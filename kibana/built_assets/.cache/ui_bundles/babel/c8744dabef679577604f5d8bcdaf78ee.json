{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/monitoring/public/components/alerts/manage_email_action.js","dependencies":[{"path":"x-pack/legacy/plugins/monitoring/public/components/alerts/manage_email_action.js","mtime":1589249552500},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLk1hbmFnZUVtYWlsQWN0aW9uID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9mb3JtX3ZhbGlkYXRpb24gPSByZXF1aXJlKCIuLi8uLi9saWIvZm9ybV92YWxpZGF0aW9uIik7Cgp2YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uLy4uLy4uL2NvbW1vbi9jb25zdGFudHMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsKICB0cnkgewogICAgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOwogICAgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsKICB9IGNhdGNoIChlcnJvcikgewogICAgcmVqZWN0KGVycm9yKTsKICAgIHJldHVybjsKICB9CgogIGlmIChpbmZvLmRvbmUpIHsKICAgIHJlc29sdmUodmFsdWUpOwogIH0gZWxzZSB7CiAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7CiAgfQp9CgpmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgewogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2VsZiA9IHRoaXMsCiAgICAgICAgYXJncyA9IGFyZ3VtZW50czsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTsKCiAgICAgIGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7CiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAibmV4dCIsIHZhbHVlKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikgewogICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgInRocm93IiwgZXJyKTsKICAgICAgfQoKICAgICAgX25leHQodW5kZWZpbmVkKTsKICAgIH0pOwogIH07Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KCnZhciBERUZBVUxUX0RBVEEgPSB7CiAgc2VydmljZTogJycsCiAgaG9zdDogJycsCiAgcG9ydDogMCwKICBzZWN1cmU6IGZhbHNlLAogIGZyb206ICcnLAogIHVzZXI6ICcnLAogIHBhc3N3b3JkOiAnJwp9OwoKdmFyIENSRUFURV9MQUJFTCA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tb25pdG9yaW5nLmFsZXJ0cy5taWdyYXRlLm1hbmFnZUFjdGlvbi5jcmVhdGVMYWJlbCcsIHsKICBkZWZhdWx0TWVzc2FnZTogJ0NyZWF0ZSBlbWFpbCBhY3Rpb24nCn0pOwoKdmFyIFNBVkVfTEFCRUwgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subW9uaXRvcmluZy5hbGVydHMubWlncmF0ZS5tYW5hZ2VBY3Rpb24uc2F2ZUxhYmVsJywgewogIGRlZmF1bHRNZXNzYWdlOiAnU2F2ZSBlbWFpbCBhY3Rpb24nCn0pOwoKdmFyIENBTkNFTF9MQUJFTCA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tb25pdG9yaW5nLmFsZXJ0cy5taWdyYXRlLm1hbmFnZUFjdGlvbi5jYW5jZWxMYWJlbCcsIHsKICBkZWZhdWx0TWVzc2FnZTogJ0NhbmNlbCcKfSk7Cgp2YXIgTkVXX1NFUlZJQ0VfSUQgPSAnX19uZXdfXyc7Cgp2YXIgTWFuYWdlRW1haWxBY3Rpb24gPSBmdW5jdGlvbiBNYW5hZ2VFbWFpbEFjdGlvbihwcm9wcykgewogIHZhciBjcmVhdGVFbWFpbEFjdGlvbiA9IHByb3BzLmNyZWF0ZUVtYWlsQWN0aW9uLAogICAgICBjYW5jZWwgPSBwcm9wcy5jYW5jZWwsCiAgICAgIGlzTmV3ID0gcHJvcHMuaXNOZXcsCiAgICAgIGFjdGlvbiA9IHByb3BzLmFjdGlvbjsKICB2YXIgZGVmYXVsdERhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX0RBVEEsIGFjdGlvbiA/IGFjdGlvbi5jb25maWcgOiB7fSk7CgogIHZhciBfUmVhY3QkdXNlU3RhdGUgPSBfcmVhY3QuZGVmYXVsdC51c2VTdGF0ZShmYWxzZSksCiAgICAgIF9SZWFjdCR1c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfUmVhY3QkdXNlU3RhdGUsIDIpLAogICAgICBpc1NhdmluZyA9IF9SZWFjdCR1c2VTdGF0ZTJbMF0sCiAgICAgIHNldElzU2F2aW5nID0gX1JlYWN0JHVzZVN0YXRlMlsxXTsKCiAgdmFyIF9SZWFjdCR1c2VTdGF0ZTMgPSBfcmVhY3QuZGVmYXVsdC51c2VTdGF0ZShmYWxzZSksCiAgICAgIF9SZWFjdCR1c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfUmVhY3QkdXNlU3RhdGUzLCAyKSwKICAgICAgc2hvd0Vycm9ycyA9IF9SZWFjdCR1c2VTdGF0ZTRbMF0sCiAgICAgIHNldFNob3dFcnJvcnMgPSBfUmVhY3QkdXNlU3RhdGU0WzFdOwoKICB2YXIgX1JlYWN0JHVzZVN0YXRlNSA9IF9yZWFjdC5kZWZhdWx0LnVzZVN0YXRlKCgwLCBfZm9ybV92YWxpZGF0aW9uLmdldE1pc3NpbmdGaWVsZEVycm9ycykoZGVmYXVsdERhdGEsIERFRkFVTFRfREFUQSkpLAogICAgICBfUmVhY3QkdXNlU3RhdGU2ID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZVN0YXRlNSwgMiksCiAgICAgIGVycm9ycyA9IF9SZWFjdCR1c2VTdGF0ZTZbMF0sCiAgICAgIHNldEVycm9ycyA9IF9SZWFjdCR1c2VTdGF0ZTZbMV07CgogIHZhciBfUmVhY3QkdXNlU3RhdGU3ID0gX3JlYWN0LmRlZmF1bHQudXNlU3RhdGUoZGVmYXVsdERhdGEpLAogICAgICBfUmVhY3QkdXNlU3RhdGU4ID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZVN0YXRlNywgMiksCiAgICAgIGRhdGEgPSBfUmVhY3QkdXNlU3RhdGU4WzBdLAogICAgICBzZXREYXRhID0gX1JlYWN0JHVzZVN0YXRlOFsxXTsKCiAgdmFyIF9SZWFjdCR1c2VTdGF0ZTkgPSBfcmVhY3QuZGVmYXVsdC51c2VTdGF0ZShmYWxzZSksCiAgICAgIF9SZWFjdCR1c2VTdGF0ZTEwID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZVN0YXRlOSwgMiksCiAgICAgIGNyZWF0ZU5ld1NlcnZpY2UgPSBfUmVhY3QkdXNlU3RhdGUxMFswXSwKICAgICAgc2V0Q3JlYXRlTmV3U2VydmljZSA9IF9SZWFjdCR1c2VTdGF0ZTEwWzFdOwoKICB2YXIgX1JlYWN0JHVzZVN0YXRlMTEgPSBfcmVhY3QuZGVmYXVsdC51c2VTdGF0ZSgnJyksCiAgICAgIF9SZWFjdCR1c2VTdGF0ZTEyID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZVN0YXRlMTEsIDIpLAogICAgICBuZXdTZXJ2aWNlID0gX1JlYWN0JHVzZVN0YXRlMTJbMF0sCiAgICAgIHNldE5ld1NlcnZpY2UgPSBfUmVhY3QkdXNlU3RhdGUxMlsxXTsKCiAgX3JlYWN0LmRlZmF1bHQudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIHZhciBtaXNzaW5nRmllbGRFcnJvcnMgPSAoMCwgX2Zvcm1fdmFsaWRhdGlvbi5nZXRNaXNzaW5nRmllbGRFcnJvcnMpKGRhdGEsIERFRkFVTFRfREFUQSk7CgogICAgaWYgKCFtaXNzaW5nRmllbGRFcnJvcnMuc2VydmljZSkgewogICAgICBpZiAoZGF0YS5zZXJ2aWNlID09PSBORVdfU0VSVklDRV9JRCAmJiAhbmV3U2VydmljZSkgewogICAgICAgIG1pc3NpbmdGaWVsZEVycm9ycy5zZXJ2aWNlID0gKDAsIF9mb3JtX3ZhbGlkYXRpb24uZ2V0UmVxdWlyZWRGaWVsZEVycm9yKSgnc2VydmljZScpOwogICAgICB9CiAgICB9CgogICAgc2V0RXJyb3JzKG1pc3NpbmdGaWVsZEVycm9ycyk7CiAgfSwgW2RhdGEsIG5ld1NlcnZpY2VdKTsKCiAgZnVuY3Rpb24gc2F2ZUVtYWlsQWN0aW9uKCkgewogICAgcmV0dXJuIF9zYXZlRW1haWxBY3Rpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CgogIGZ1bmN0aW9uIF9zYXZlRW1haWxBY3Rpb24oKSB7CiAgICBfc2F2ZUVtYWlsQWN0aW9uID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgbWVyZ2VkRGF0YTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHNldFNob3dFcnJvcnModHJ1ZSk7CgogICAgICAgICAgICAgIGlmICgoMCwgX2Zvcm1fdmFsaWRhdGlvbi5oYXNFcnJvcnMpKGVycm9ycykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgc2V0U2hvd0Vycm9ycyhmYWxzZSk7CiAgICAgICAgICAgICAgc2V0SXNTYXZpbmcodHJ1ZSk7CiAgICAgICAgICAgICAgbWVyZ2VkRGF0YSA9IF9vYmplY3RTcHJlYWQoe30sIGRhdGEsIHsKICAgICAgICAgICAgICAgIHNlcnZpY2U6IGRhdGEuc2VydmljZSA9PT0gTkVXX1NFUlZJQ0VfSUQgPyBuZXdTZXJ2aWNlIDogZGF0YS5zZXJ2aWNlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDU7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUVtYWlsQWN0aW9uKG1lcmdlZERhdGEpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEwOwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oNSk7CiAgICAgICAgICAgICAgc2V0RXJyb3JzKHsKICAgICAgICAgICAgICAgIGdlbmVyYWw6IF9jb250ZXh0LnQwLmJvZHkubWVzc2FnZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1s1LCAxMF1dKTsKICAgIH0pKTsKICAgIHJldHVybiBfc2F2ZUVtYWlsQWN0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQoKICB2YXIgc2VydmljZU9wdGlvbnMgPSBfY29uc3RhbnRzLkFMRVJUX0VNQUlMX1NFUlZJQ0VTLm1hcChmdW5jdGlvbiAoc2VydmljZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsdWU6IHNlcnZpY2UsCiAgICAgIGlucHV0RGlzcGxheTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRleHQsIG51bGwsIHNlcnZpY2UpLAogICAgICBkcm9wZG93bkRpc3BsYXk6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0LCBudWxsLCBzZXJ2aWNlKQogICAgfTsKICB9KTsKCiAgc2VydmljZU9wdGlvbnMucHVzaCh7CiAgICB2YWx1ZTogTkVXX1NFUlZJQ0VfSUQsCiAgICBpbnB1dERpc3BsYXk6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0LCBudWxsLCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subW9uaXRvcmluZy5hbGVydHMubWlncmF0ZS5tYW5hZ2VBY3Rpb24uYWRkaW5nTmV3U2VydmljZVRleHQnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQWRkaW5nIG5ldyBzZXJ2aWNlLi4uJwogICAgfSkpLAogICAgZHJvcGRvd25EaXNwbGF5OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGV4dCwgbnVsbCwgX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1vbml0b3JpbmcuYWxlcnRzLm1pZ3JhdGUubWFuYWdlQWN0aW9uLmFkZE5ld1NlcnZpY2VUZXh0JywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0FkZCBuZXcgc2VydmljZS4uLicKICAgIH0pKQogIH0pOwogIHZhciBhZGROZXdTZXJ2aWNlVWkgPSBudWxsOwoKICBpZiAoY3JlYXRlTmV3U2VydmljZSkgewogICAgYWRkTmV3U2VydmljZVVpID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIG51bGwpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmllbGRUZXh0LCB7CiAgICAgIHZhbHVlOiBuZXdTZXJ2aWNlLAogICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICAgIHJldHVybiBzZXROZXdTZXJ2aWNlKGUudGFyZ2V0LnZhbHVlKTsKICAgICAgfSwKICAgICAgaXNJbnZhbGlkOiBzaG93RXJyb3JzCiAgICB9KSk7CiAgfQoKICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm0sIHsKICAgIGlzSW52YWxpZDogc2hvd0Vycm9ycywKICAgIGVycm9yOiBPYmplY3QudmFsdWVzKGVycm9ycykKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tb25pdG9yaW5nLmFsZXJ0cy5taWdyYXRlLm1hbmFnZUFjdGlvbi5zZXJ2aWNlVGV4dCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTZXJ2aWNlJwogICAgfSksCiAgICBoZWxwVGV4dDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUxpbmssIHsKICAgICAgZXh0ZXJuYWw6IHRydWUsCiAgICAgIHRhcmdldDogIl9ibGFuayIsCiAgICAgIGhyZWY6ICJodHRwczovL25vZGVtYWlsZXIuY29tL3NtdHAvd2VsbC1rbm93bi8iCiAgICB9LCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subW9uaXRvcmluZy5hbGVydHMubWlncmF0ZS5tYW5hZ2VBY3Rpb24uc2VydmljZUhlbHBUZXh0JywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0ZpbmQgb3V0IG1vcmUnCiAgICB9KSksCiAgICBlcnJvcjogZXJyb3JzLnNlcnZpY2UsCiAgICBpc0ludmFsaWQ6IHNob3dFcnJvcnMgJiYgISFlcnJvcnMuc2VydmljZQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3VwZXJTZWxlY3QsIHsKICAgIG9wdGlvbnM6IHNlcnZpY2VPcHRpb25zLAogICAgdmFsdWVPZlNlbGVjdGVkOiBkYXRhLnNlcnZpY2UsCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoaWQpIHsKICAgICAgaWYgKGlkID09PSBORVdfU0VSVklDRV9JRCkgewogICAgICAgIHNldENyZWF0ZU5ld1NlcnZpY2UodHJ1ZSk7CiAgICAgICAgc2V0RGF0YShfb2JqZWN0U3ByZWFkKHt9LCBkYXRhLCB7CiAgICAgICAgICBzZXJ2aWNlOiBORVdfU0VSVklDRV9JRAogICAgICAgIH0pKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzZXRDcmVhdGVOZXdTZXJ2aWNlKGZhbHNlKTsKICAgICAgICBzZXREYXRhKF9vYmplY3RTcHJlYWQoe30sIGRhdGEsIHsKICAgICAgICAgIHNlcnZpY2U6IGlkCiAgICAgICAgfSkpOwogICAgICB9CiAgICB9LAogICAgaGFzRGl2aWRlcnM6IHRydWUsCiAgICBpc0ludmFsaWQ6IHNob3dFcnJvcnMgJiYgISFlcnJvcnMuc2VydmljZQogIH0pLCBhZGROZXdTZXJ2aWNlVWkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subW9uaXRvcmluZy5hbGVydHMubWlncmF0ZS5tYW5hZ2VBY3Rpb24uaG9zdFRleHQnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnSG9zdCcKICAgIH0pLAogICAgaGVscFRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tb25pdG9yaW5nLmFsZXJ0cy5taWdyYXRlLm1hbmFnZUFjdGlvbi5ob3N0SGVscFRleHQnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnSG9zdCBuYW1lIG9mIHRoZSBzZXJ2aWNlIHByb3ZpZGVyJwogICAgfSksCiAgICBlcnJvcjogZXJyb3JzLmhvc3QsCiAgICBpc0ludmFsaWQ6IHNob3dFcnJvcnMgJiYgISFlcnJvcnMuaG9zdAogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGaWVsZFRleHQsIHsKICAgIHZhbHVlOiBkYXRhLmhvc3QsCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICByZXR1cm4gc2V0RGF0YShfb2JqZWN0U3ByZWFkKHt9LCBkYXRhLCB7CiAgICAgICAgaG9zdDogZS50YXJnZXQudmFsdWUKICAgICAgfSkpOwogICAgfSwKICAgIGlzSW52YWxpZDogc2hvd0Vycm9ycyAmJiAhIWVycm9ycy5ob3N0CiAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tb25pdG9yaW5nLmFsZXJ0cy5taWdyYXRlLm1hbmFnZUFjdGlvbi5wb3J0VGV4dCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdQb3J0JwogICAgfSksCiAgICBoZWxwVGV4dDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1vbml0b3JpbmcuYWxlcnRzLm1pZ3JhdGUubWFuYWdlQWN0aW9uLnBvcnRIZWxwVGV4dCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdQb3J0IG51bWJlciBvZiB0aGUgc2VydmljZSBwcm92aWRlcicKICAgIH0pLAogICAgZXJyb3I6IGVycm9ycy5wb3J0LAogICAgaXNJbnZhbGlkOiBzaG93RXJyb3JzICYmICEhZXJyb3JzLnBvcnQKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmllbGROdW1iZXIsIHsKICAgIHZhbHVlOiBkYXRhLnBvcnQsCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICByZXR1cm4gc2V0RGF0YShfb2JqZWN0U3ByZWFkKHt9LCBkYXRhLCB7CiAgICAgICAgcG9ydDogcGFyc2VJbnQoZS50YXJnZXQudmFsdWUsIDEwKQogICAgICB9KSk7CiAgICB9LAogICAgaXNJbnZhbGlkOiBzaG93RXJyb3JzICYmICEhZXJyb3JzLnBvcnQKICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1vbml0b3JpbmcuYWxlcnRzLm1pZ3JhdGUubWFuYWdlQWN0aW9uLnNlY3VyZVRleHQnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU2VjdXJlJwogICAgfSksCiAgICBoZWxwVGV4dDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1vbml0b3JpbmcuYWxlcnRzLm1pZ3JhdGUubWFuYWdlQWN0aW9uLnNlY3VyZUhlbHBUZXh0JywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ1doZXRoZXIgdG8gdXNlIFRMUyB3aXRoIHRoZSBzZXJ2aWNlIHByb3ZpZGVyJwogICAgfSkKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3dpdGNoLCB7CiAgICBsYWJlbDogIiIsCiAgICBjaGVja2VkOiBkYXRhLnNlY3VyZSwKICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7CiAgICAgIHJldHVybiBzZXREYXRhKF9vYmplY3RTcHJlYWQoe30sIGRhdGEsIHsKICAgICAgICBzZWN1cmU6IGUudGFyZ2V0LmNoZWNrZWQKICAgICAgfSkpOwogICAgfQogIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subW9uaXRvcmluZy5hbGVydHMubWlncmF0ZS5tYW5hZ2VBY3Rpb24uZnJvbVRleHQnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRnJvbScKICAgIH0pLAogICAgaGVscFRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tb25pdG9yaW5nLmFsZXJ0cy5taWdyYXRlLm1hbmFnZUFjdGlvbi5mcm9tSGVscFRleHQnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVGhlIGZyb20gZW1haWwgYWRkcmVzcyBmb3IgYWxlcnRzJwogICAgfSksCiAgICBlcnJvcjogZXJyb3JzLmZyb20sCiAgICBpc0ludmFsaWQ6IHNob3dFcnJvcnMgJiYgISFlcnJvcnMuZnJvbQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGaWVsZFRleHQsIHsKICAgIHZhbHVlOiBkYXRhLmZyb20sCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICByZXR1cm4gc2V0RGF0YShfb2JqZWN0U3ByZWFkKHt9LCBkYXRhLCB7CiAgICAgICAgZnJvbTogZS50YXJnZXQudmFsdWUKICAgICAgfSkpOwogICAgfSwKICAgIGlzSW52YWxpZDogc2hvd0Vycm9ycyAmJiAhIWVycm9ycy5mcm9tCiAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tb25pdG9yaW5nLmFsZXJ0cy5taWdyYXRlLm1hbmFnZUFjdGlvbi51c2VyVGV4dCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdVc2VyJwogICAgfSksCiAgICBoZWxwVGV4dDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1vbml0b3JpbmcuYWxlcnRzLm1pZ3JhdGUubWFuYWdlQWN0aW9uLnVzZXJIZWxwVGV4dCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdUaGUgdXNlciB0byB1c2Ugd2l0aCB0aGUgc2VydmljZSBwcm92aWRlcicKICAgIH0pLAogICAgZXJyb3I6IGVycm9ycy51c2VyLAogICAgaXNJbnZhbGlkOiBzaG93RXJyb3JzICYmICEhZXJyb3JzLnVzZXIKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmllbGRUZXh0LCB7CiAgICB2YWx1ZTogZGF0YS51c2VyLAogICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgcmV0dXJuIHNldERhdGEoX29iamVjdFNwcmVhZCh7fSwgZGF0YSwgewogICAgICAgIHVzZXI6IGUudGFyZ2V0LnZhbHVlCiAgICAgIH0pKTsKICAgIH0sCiAgICBpc0ludmFsaWQ6IHNob3dFcnJvcnMgJiYgISFlcnJvcnMudXNlcgogIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subW9uaXRvcmluZy5hbGVydHMubWlncmF0ZS5tYW5hZ2VBY3Rpb24ucGFzc3dvcmRUZXh0JywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ1Bhc3N3b3JkJwogICAgfSksCiAgICBoZWxwVGV4dDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1vbml0b3JpbmcuYWxlcnRzLm1pZ3JhdGUubWFuYWdlQWN0aW9uLnBhc3N3b3JkSGVscFRleHQnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVGhlIHBhc3N3b3JkIHRvIHVzZSB3aXRoIHRoZSBzZXJ2aWNlIHByb3ZpZGVyJwogICAgfSksCiAgICBlcnJvcjogZXJyb3JzLnBhc3N3b3JkLAogICAgaXNJbnZhbGlkOiBzaG93RXJyb3JzICYmICEhZXJyb3JzLnBhc3N3b3JkCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZpZWxkUGFzc3dvcmQsIHsKICAgIHZhbHVlOiBkYXRhLnBhc3N3b3JkLAogICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgcmV0dXJuIHNldERhdGEoX29iamVjdFNwcmVhZCh7fSwgZGF0YSwgewogICAgICAgIHBhc3N3b3JkOiBlLnRhcmdldC52YWx1ZQogICAgICB9KSk7CiAgICB9LAogICAgaXNJbnZhbGlkOiBzaG93RXJyb3JzICYmICEhZXJyb3JzLnBhc3N3b3JkCiAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCBudWxsKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICBncm93OiBmYWxzZQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b24sIHsKICAgIHR5cGU6ICJzdWJtaXQiLAogICAgZmlsbDogdHJ1ZSwKICAgIG9uQ2xpY2s6IHNhdmVFbWFpbEFjdGlvbiwKICAgIGlzTG9hZGluZzogaXNTYXZpbmcKICB9LCBpc05ldyA/IENSRUFURV9MQUJFTCA6IFNBVkVfTEFCRUwpKSwgIWFjdGlvbiB8fCBpc05ldyA/IG51bGwgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgIGdyb3c6IGZhbHNlCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbiwgewogICAgb25DbGljazogY2FuY2VsCiAgfSwgQ0FOQ0VMX0xBQkVMKSkpKTsKfTsKCmV4cG9ydHMuTWFuYWdlRW1haWxBY3Rpb24gPSBNYW5hZ2VFbWFpbEFjdGlvbjs="},null]}