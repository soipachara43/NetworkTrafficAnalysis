{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/pages/detection_engine/rules/details/index.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/pages/detection_engine/rules/details/index.js","mtime":1589249553320},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlJ1bGVEZXRhaWxzUGFnZSA9IHZvaWQgMDsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX3JlYWN0ID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9yZWFjdFJvdXRlckRvbSA9IHJlcXVpcmUoInJlYWN0LXJvdXRlci1kb20iKTsKCnZhciBfcmVhY3RTdGlja3kgPSByZXF1aXJlKCJyZWFjdC1zdGlja3kiKTsKCnZhciBfcmVhY3RSZWR1eCA9IHJlcXVpcmUoInJlYWN0LXJlZHV4Iik7Cgp2YXIgX2ZpbHRlcnNfZ2xvYmFsID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29tcG9uZW50cy9maWx0ZXJzX2dsb2JhbCIpOwoKdmFyIF9mb3JtYXR0ZWRfZGF0ZSA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMvZm9ybWF0dGVkX2RhdGUiKTsKCnZhciBfcmVkaXJlY3RfdG9fZGV0ZWN0aW9uX2VuZ2luZSA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMvbGlua190by9yZWRpcmVjdF90b19kZXRlY3Rpb25fZW5naW5lIik7Cgp2YXIgX3NlYXJjaF9iYXIgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL3NlYXJjaF9iYXIiKTsKCnZhciBfd3JhcHBlcl9wYWdlID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29tcG9uZW50cy93cmFwcGVyX3BhZ2UiKTsKCnZhciBfcnVsZXMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb250YWluZXJzL2RldGVjdGlvbl9lbmdpbmUvcnVsZXMiKTsKCnZhciBfc291cmNlID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29udGFpbmVycy9zb3VyY2UiKTsKCnZhciBfc3B5X3JvdXRlcyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL3V0aWxzL3JvdXRlL3NweV9yb3V0ZXMiKTsKCnZhciBfc3RlcF9hYm91dF9ydWxlX2RldGFpbHMgPSByZXF1aXJlKCIuLi9jb21wb25lbnRzL3N0ZXBfYWJvdXRfcnVsZV9kZXRhaWxzLyIpOwoKdmFyIF9kZXRlY3Rpb25fZW5naW5lX2hlYWRlcl9wYWdlID0gcmVxdWlyZSgiLi4vLi4vY29tcG9uZW50cy9kZXRlY3Rpb25fZW5naW5lX2hlYWRlcl9wYWdlIik7Cgp2YXIgX3NpZ25hbHNfaGlzdG9ncmFtX3BhbmVsID0gcmVxdWlyZSgiLi4vLi4vY29tcG9uZW50cy9zaWduYWxzX2hpc3RvZ3JhbV9wYW5lbCIpOwoKdmFyIF9zaWduYWxzID0gcmVxdWlyZSgiLi4vLi4vY29tcG9uZW50cy9zaWduYWxzIik7Cgp2YXIgX3VzZXJfaW5mbyA9IHJlcXVpcmUoIi4uLy4uL2NvbXBvbmVudHMvdXNlcl9pbmZvIik7Cgp2YXIgX2RldGVjdGlvbl9lbmdpbmVfZW1wdHlfcGFnZSA9IHJlcXVpcmUoIi4uLy4uL2RldGVjdGlvbl9lbmdpbmVfZW1wdHlfcGFnZSIpOwoKdmFyIF9zaWduYWxzX2luZm8gPSByZXF1aXJlKCIuLi8uLi9jb21wb25lbnRzL3NpZ25hbHNfaW5mbyIpOwoKdmFyIF9zdGVwX2RlZmluZV9ydWxlID0gcmVxdWlyZSgiLi4vY29tcG9uZW50cy9zdGVwX2RlZmluZV9ydWxlIik7Cgp2YXIgX3N0ZXBfc2NoZWR1bGVfcnVsZSA9IHJlcXVpcmUoIi4uL2NvbXBvbmVudHMvc3RlcF9zY2hlZHVsZV9ydWxlIik7Cgp2YXIgX2RlZmF1bHRfY29uZmlnID0gcmVxdWlyZSgiLi4vLi4vY29tcG9uZW50cy9zaWduYWxzL2RlZmF1bHRfY29uZmlnIik7Cgp2YXIgX25vX3dyaXRlX3NpZ25hbHNfY2FsbG91dCA9IHJlcXVpcmUoIi4uLy4uL2NvbXBvbmVudHMvbm9fd3JpdGVfc2lnbmFsc19jYWxsb3V0Iik7Cgp2YXIgZGV0ZWN0aW9uSTE4biA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoIi4uLy4uL3RyYW5zbGF0aW9ucyIpKTsKCnZhciBfcmVhZF9vbmx5X2NhbGxvdXQgPSByZXF1aXJlKCIuLi9jb21wb25lbnRzL3JlYWRfb25seV9jYWxsb3V0Iik7Cgp2YXIgX3J1bGVfc3dpdGNoID0gcmVxdWlyZSgiLi4vY29tcG9uZW50cy9ydWxlX3N3aXRjaCIpOwoKdmFyIF9zdGVwX3BhbmVsID0gcmVxdWlyZSgiLi4vY29tcG9uZW50cy9zdGVwX3BhbmVsIik7Cgp2YXIgX2hlbHBlcnMgPSByZXF1aXJlKCIuLi9oZWxwZXJzIik7Cgp2YXIgcnVsZUkxOG4gPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCIuLi90cmFuc2xhdGlvbnMiKSk7Cgp2YXIgaTE4biA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoIi4vdHJhbnNsYXRpb25zIikpOwoKdmFyIF9nbG9iYWxfdGltZSA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbnRhaW5lcnMvZ2xvYmFsX3RpbWUiKTsKCnZhciBfY29uZmlnID0gcmVxdWlyZSgiLi4vLi4vY29tcG9uZW50cy9zaWduYWxzX2hpc3RvZ3JhbV9wYW5lbC9jb25maWciKTsKCnZhciBfaW5wdXRzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vc3RvcmUvaW5wdXRzIik7Cgp2YXIgX2FjdGlvbnMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9zdG9yZS9pbnB1dHMvYWN0aW9ucyIpOwoKdmFyIF9ydWxlX2FjdGlvbnNfb3ZlcmZsb3cgPSByZXF1aXJlKCIuLi9jb21wb25lbnRzL3J1bGVfYWN0aW9uc19vdmVyZmxvdyIpOwoKdmFyIF9zdGF0dXNfZmFpbGVkX2NhbGxvdXQgPSByZXF1aXJlKCIuL3N0YXR1c19mYWlsZWRfY2FsbG91dCIpOwoKdmFyIF9mYWlsdXJlX2hpc3RvcnkgPSByZXF1aXJlKCIuL2ZhaWx1cmVfaGlzdG9yeSIpOwoKdmFyIF9ydWxlX3N0YXR1cyA9IHJlcXVpcmUoIi4uL2NvbXBvbmVudHMvcnVsZV9zdGF0dXMiKTsKCnZhciBfdXNlX21sX2NhcGFiaWxpdGllcyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMvbWxfcG9wb3Zlci9ob29rcy91c2VfbWxfY2FwYWJpbGl0aWVzIik7Cgp2YXIgX2hhc19tbF9hZG1pbl9wZXJtaXNzaW9ucyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMvbWwvcGVybWlzc2lvbnMvaGFzX21sX2FkbWluX3Blcm1pc3Npb25zIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsKICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7CiAgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7CiAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICBhcnIyW2ldID0gYXJyW2ldOwogICAgfQoKICAgIHJldHVybiBhcnIyOwogIH0KfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKdmFyIFJ1bGVEZXRhaWxUYWJzOwoKKGZ1bmN0aW9uIChSdWxlRGV0YWlsVGFicykgewogIFJ1bGVEZXRhaWxUYWJzWyJzaWduYWxzIl0gPSAic2lnbmFscyI7CiAgUnVsZURldGFpbFRhYnNbImZhaWx1cmVzIl0gPSAiZmFpbHVyZXMiOwp9KShSdWxlRGV0YWlsVGFicyB8fCAoUnVsZURldGFpbFRhYnMgPSB7fSkpOwoKdmFyIHJ1bGVEZXRhaWxUYWJzID0gW3sKICBpZDogUnVsZURldGFpbFRhYnMuc2lnbmFscywKICBuYW1lOiBkZXRlY3Rpb25JMThuLlNJR05BTCwKICBkaXNhYmxlZDogZmFsc2UKfSwgewogIGlkOiBSdWxlRGV0YWlsVGFicy5mYWlsdXJlcywKICBuYW1lOiBpMThuLkZBSUxVUkVfSElTVE9SWV9UQUIsCiAgZGlzYWJsZWQ6IGZhbHNlCn1dOwoKdmFyIFJ1bGVEZXRhaWxzUGFnZUNvbXBvbmVudCA9IGZ1bmN0aW9uIFJ1bGVEZXRhaWxzUGFnZUNvbXBvbmVudChfcmVmKSB7CiAgdmFyIGZpbHRlcnMgPSBfcmVmLmZpbHRlcnMsCiAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSwKICAgICAgc2V0QWJzb2x1dGVSYW5nZURhdGVQaWNrZXIgPSBfcmVmLnNldEFic29sdXRlUmFuZ2VEYXRlUGlja2VyOwoKICB2YXIgX3VzZVVzZXJJbmZvID0gKDAsIF91c2VyX2luZm8udXNlVXNlckluZm8pKCksCiAgICAgIGxvYWRpbmcgPSBfdXNlVXNlckluZm8ubG9hZGluZywKICAgICAgaXNTaWduYWxJbmRleEV4aXN0cyA9IF91c2VVc2VySW5mby5pc1NpZ25hbEluZGV4RXhpc3RzLAogICAgICBpc0F1dGhlbnRpY2F0ZWQgPSBfdXNlVXNlckluZm8uaXNBdXRoZW50aWNhdGVkLAogICAgICBoYXNFbmNyeXB0aW9uS2V5ID0gX3VzZVVzZXJJbmZvLmhhc0VuY3J5cHRpb25LZXksCiAgICAgIGNhblVzZXJDUlVEID0gX3VzZVVzZXJJbmZvLmNhblVzZXJDUlVELAogICAgICBoYXNJbmRleFdyaXRlID0gX3VzZVVzZXJJbmZvLmhhc0luZGV4V3JpdGUsCiAgICAgIHNpZ25hbEluZGV4TmFtZSA9IF91c2VVc2VySW5mby5zaWduYWxJbmRleE5hbWU7CgogIHZhciBfdXNlUGFyYW1zID0gKDAsIF9yZWFjdFJvdXRlckRvbS51c2VQYXJhbXMpKCksCiAgICAgIHJ1bGVJZCA9IF91c2VQYXJhbXMuZGV0YWlsTmFtZTsKCiAgdmFyIF91c2VSdWxlID0gKDAsIF9ydWxlcy51c2VSdWxlKShydWxlSWQpLAogICAgICBfdXNlUnVsZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlUnVsZSwgMiksCiAgICAgIGlzTG9hZGluZyA9IF91c2VSdWxlMlswXSwKICAgICAgcnVsZSA9IF91c2VSdWxlMlsxXTsgLy8gVGhpcyBpcyB1c2VkIHRvIHJlLXRyaWdnZXIgYXBpIHJ1bGUgc3RhdHVzIHdoZW4gdXNlciBkZS9hY3RpdmF0ZSBydWxlCgoKICB2YXIgX3VzZVN0YXRlID0gKDAsIF9yZWFjdDIudXNlU3RhdGUpKG51bGwpLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgcnVsZUVuYWJsZWQgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRSdWxlRW5hYmxlZCA9IF91c2VTdGF0ZTJbMV07CgogIHZhciBfdXNlU3RhdGUzID0gKDAsIF9yZWFjdDIudXNlU3RhdGUpKFJ1bGVEZXRhaWxUYWJzLnNpZ25hbHMpLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIHJ1bGVEZXRhaWxUYWIgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRSdWxlRGV0YWlsVGFiID0gX3VzZVN0YXRlNFsxXTsKCiAgdmFyIF9yZWYyID0gcnVsZSAhPSBudWxsID8gKDAsIF9oZWxwZXJzLmdldFN0ZXBzRGF0YSkoewogICAgcnVsZTogcnVsZSwKICAgIGRldGFpbHNWaWV3OiB0cnVlCiAgfSkgOiB7CiAgICBhYm91dFJ1bGVEYXRhOiBudWxsLAogICAgbW9kaWZpZWRBYm91dFJ1bGVEZXRhaWxzRGF0YTogbnVsbCwKICAgIGRlZmluZVJ1bGVEYXRhOiBudWxsLAogICAgc2NoZWR1bGVSdWxlRGF0YTogbnVsbAogIH0sCiAgICAgIGFib3V0UnVsZURhdGEgPSBfcmVmMi5hYm91dFJ1bGVEYXRhLAogICAgICBtb2RpZmllZEFib3V0UnVsZURldGFpbHNEYXRhID0gX3JlZjIubW9kaWZpZWRBYm91dFJ1bGVEZXRhaWxzRGF0YSwKICAgICAgZGVmaW5lUnVsZURhdGEgPSBfcmVmMi5kZWZpbmVSdWxlRGF0YSwKICAgICAgc2NoZWR1bGVSdWxlRGF0YSA9IF9yZWYyLnNjaGVkdWxlUnVsZURhdGE7CgogIHZhciBfdXNlU2lnbmFsSW5mbyA9ICgwLCBfc2lnbmFsc19pbmZvLnVzZVNpZ25hbEluZm8pKHsKICAgIHJ1bGVJZDogcnVsZUlkCiAgfSksCiAgICAgIF91c2VTaWduYWxJbmZvMiA9IF9zbGljZWRUb0FycmF5KF91c2VTaWduYWxJbmZvLCAxKSwKICAgICAgbGFzdFNpZ25hbHMgPSBfdXNlU2lnbmFsSW5mbzJbMF07CgogIHZhciBtbENhcGFiaWxpdGllcyA9ICgwLCBfdXNlX21sX2NhcGFiaWxpdGllcy51c2VNbENhcGFiaWxpdGllcykoKTsgLy8gVE9ETzogUmVmYWN0b3IgbGljZW5zZSBjaGVjayArIGhhc01sQWRtaW5QZXJtaXNzaW9ucyB0byBjb21tb24gY2hlY2sKCiAgdmFyIGhhc01sUGVybWlzc2lvbnMgPSBtbENhcGFiaWxpdGllcy5pc1BsYXRpbnVtT3JUcmlhbExpY2Vuc2UgJiYgKDAsIF9oYXNfbWxfYWRtaW5fcGVybWlzc2lvbnMuaGFzTWxBZG1pblBlcm1pc3Npb25zKShtbENhcGFiaWxpdGllcyk7CiAgdmFyIHRpdGxlID0gaXNMb2FkaW5nID09PSB0cnVlIHx8IHJ1bGUgPT09IG51bGwgPyBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUxvYWRpbmdTcGlubmVyLCB7CiAgICBzaXplOiAibSIKICB9KSA6IHJ1bGUubmFtZTsKICB2YXIgc3ViVGl0bGUgPSAoMCwgX3JlYWN0Mi51c2VNZW1vKShmdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZjMsIF9yZWY0LCBfcmVmNSwgX3JlZjY7CgogICAgcmV0dXJuIGlzTG9hZGluZyA9PT0gdHJ1ZSB8fCBydWxlID09PSBudWxsID8gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlMb2FkaW5nU3Bpbm5lciwgewogICAgICBzaXplOiAibSIKICAgIH0pIDogW19yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgIGlkOiAieHBhY2suc2llbS5kZXRlY3Rpb25FbmdpbmUucnVsZURldGFpbHMucnVsZUNyZWF0aW9uRGVzY3JpcHRpb24iLAogICAgICBkZWZhdWx0TWVzc2FnZTogIkNyZWF0ZWQgYnk6IHtieX0gb24ge2RhdGV9IiwKICAgICAgdmFsdWVzOiB7CiAgICAgICAgYnk6IChfcmVmMyA9IHJ1bGUgPT09IG51bGwgfHwgcnVsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcnVsZS5jcmVhdGVkX2J5KSAhPT0gbnVsbCAmJiBfcmVmMyAhPT0gdm9pZCAwID8gX3JlZjMgOiBpMThuLlVOS05PV04sCiAgICAgICAgZGF0ZTogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2Zvcm1hdHRlZF9kYXRlLkZvcm1hdHRlZERhdGUsIHsKICAgICAgICAgIHZhbHVlOiAoX3JlZjQgPSBydWxlID09PSBudWxsIHx8IHJ1bGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJ1bGUuY3JlYXRlZF9hdCkgIT09IG51bGwgJiYgX3JlZjQgIT09IHZvaWQgMCA/IF9yZWY0IDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgZmllbGROYW1lOiAiY3JlYXRlZEF0IgogICAgICAgIH0pCiAgICAgIH0KICAgIH0pLCAocnVsZSA9PT0gbnVsbCB8fCBydWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBydWxlLnVwZGF0ZWRfYnkpICE9IG51bGwgPyBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICBpZDogInhwYWNrLnNpZW0uZGV0ZWN0aW9uRW5naW5lLnJ1bGVEZXRhaWxzLnJ1bGVVcGRhdGVEZXNjcmlwdGlvbiIsCiAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVXBkYXRlZCBieToge2J5fSBvbiB7ZGF0ZX0iLAogICAgICB2YWx1ZXM6IHsKICAgICAgICBieTogKF9yZWY1ID0gcnVsZSA9PT0gbnVsbCB8fCBydWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBydWxlLnVwZGF0ZWRfYnkpICE9PSBudWxsICYmIF9yZWY1ICE9PSB2b2lkIDAgPyBfcmVmNSA6IGkxOG4uVU5LTk9XTiwKICAgICAgICBkYXRlOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZm9ybWF0dGVkX2RhdGUuRm9ybWF0dGVkRGF0ZSwgewogICAgICAgICAgdmFsdWU6IChfcmVmNiA9IHJ1bGUgPT09IG51bGwgfHwgcnVsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcnVsZS51cGRhdGVkX2F0KSAhPT0gbnVsbCAmJiBfcmVmNiAhPT0gdm9pZCAwID8gX3JlZjYgOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICBmaWVsZE5hbWU6ICJ1cGRhdGVkQXQiCiAgICAgICAgfSkKICAgICAgfQogICAgfSkgOiAnJ107CiAgfSwgW2lzTG9hZGluZywgcnVsZV0pOwogIHZhciBzaWduYWxEZWZhdWx0RmlsdGVycyA9ICgwLCBfcmVhY3QyLnVzZU1lbW8pKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBydWxlSWQgIT0gbnVsbCA/ICgwLCBfZGVmYXVsdF9jb25maWcuYnVpbGRTaWduYWxzUnVsZUlkRmlsdGVyKShydWxlSWQpIDogW107CiAgfSwgW3J1bGVJZF0pOwogIHZhciBzaWduYWxNZXJnZWRGaWx0ZXJzID0gKDAsIF9yZWFjdDIudXNlTWVtbykoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc2lnbmFsRGVmYXVsdEZpbHRlcnMpLCBfdG9Db25zdW1hYmxlQXJyYXkoZmlsdGVycykpOwogIH0sIFtzaWduYWxEZWZhdWx0RmlsdGVycywgZmlsdGVyc10pOwogIHZhciB0YWJzID0gKDAsIF9yZWFjdDIudXNlTWVtbykoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGFicywgbnVsbCwgcnVsZURldGFpbFRhYnMubWFwKGZ1bmN0aW9uICh0YWIpIHsKICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGFiLCB7CiAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgIHJldHVybiBzZXRSdWxlRGV0YWlsVGFiKHRhYi5pZCk7CiAgICAgICAgfSwKICAgICAgICBpc1NlbGVjdGVkOiB0YWIuaWQgPT09IHJ1bGVEZXRhaWxUYWIsCiAgICAgICAgZGlzYWJsZWQ6IHRhYi5kaXNhYmxlZCwKICAgICAgICBrZXk6IHRhYi5pZAogICAgICB9LCB0YWIubmFtZSk7CiAgICB9KSk7CiAgfSwgW3J1bGVEZXRhaWxUYWJzLCBydWxlRGV0YWlsVGFiLCBzZXRSdWxlRGV0YWlsVGFiXSk7CiAgdmFyIHJ1bGVFcnJvciA9ICgwLCBfcmVhY3QyLnVzZU1lbW8pKGZ1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmNzsKCiAgICByZXR1cm4gKHJ1bGUgPT09IG51bGwgfHwgcnVsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcnVsZS5zdGF0dXMpID09PSAnZmFpbGVkJyAmJiBydWxlRGV0YWlsVGFiID09PSBSdWxlRGV0YWlsVGFicy5zaWduYWxzICYmIChydWxlID09PSBudWxsIHx8IHJ1bGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJ1bGUubGFzdF9mYWlsdXJlX2F0KSAhPSBudWxsID8gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3N0YXR1c19mYWlsZWRfY2FsbG91dC5SdWxlU3RhdHVzRmFpbGVkQ2FsbE91dCwgewogICAgICBtZXNzYWdlOiAoX3JlZjcgPSBydWxlID09PSBudWxsIHx8IHJ1bGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJ1bGUubGFzdF9mYWlsdXJlX21lc3NhZ2UpICE9PSBudWxsICYmIF9yZWY3ICE9PSB2b2lkIDAgPyBfcmVmNyA6ICcnLAogICAgICBkYXRlOiBydWxlID09PSBudWxsIHx8IHJ1bGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJ1bGUubGFzdF9mYWlsdXJlX2F0CiAgICB9KSA6IG51bGw7CiAgfSwgW3J1bGUsIHJ1bGVEZXRhaWxUYWJdKTsKICB2YXIgaW5kZXhUb0FkZCA9ICgwLCBfcmVhY3QyLnVzZU1lbW8pKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBzaWduYWxJbmRleE5hbWUgPT0gbnVsbCA/IFtdIDogW3NpZ25hbEluZGV4TmFtZV07CiAgfSwgW3NpZ25hbEluZGV4TmFtZV0pOwogIHZhciB1cGRhdGVEYXRlUmFuZ2VDYWxsYmFjayA9ICgwLCBfcmVhY3QyLnVzZUNhbGxiYWNrKShmdW5jdGlvbiAobWluLCBtYXgpIHsKICAgIHNldEFic29sdXRlUmFuZ2VEYXRlUGlja2VyKHsKICAgICAgaWQ6ICdnbG9iYWwnLAogICAgICBmcm9tOiBtaW4sCiAgICAgIHRvOiBtYXgKICAgIH0pOwogIH0sIFtzZXRBYnNvbHV0ZVJhbmdlRGF0ZVBpY2tlcl0pOwogIHZhciBoYW5kbGVPbkNoYW5nZUVuYWJsZWRSdWxlID0gKDAsIF9yZWFjdDIudXNlQ2FsbGJhY2spKGZ1bmN0aW9uIChlbmFibGVkKSB7CiAgICBpZiAocnVsZUVuYWJsZWQgPT0gbnVsbCB8fCBlbmFibGVkICE9PSBydWxlRW5hYmxlZCkgewogICAgICBzZXRSdWxlRW5hYmxlZChlbmFibGVkKTsKICAgIH0KICB9LCBbcnVsZUVuYWJsZWQsIHNldFJ1bGVFbmFibGVkXSk7CgogIGlmICgoMCwgX2hlbHBlcnMucmVkaXJlY3RUb0RldGVjdGlvbnMpKGlzU2lnbmFsSW5kZXhFeGlzdHMsIGlzQXV0aGVudGljYXRlZCwgaGFzRW5jcnlwdGlvbktleSkpIHsKICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSb3V0ZXJEb20uUmVkaXJlY3QsIHsKICAgICAgdG86ICIvIi5jb25jYXQoX3JlZGlyZWN0X3RvX2RldGVjdGlvbl9lbmdpbmUuREVURUNUSU9OX0VOR0lORV9QQUdFX05BTUUpCiAgICB9KTsKICB9CgogIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLmRlZmF1bHQuRnJhZ21lbnQsIG51bGwsIGhhc0luZGV4V3JpdGUgIT0gbnVsbCAmJiAhaGFzSW5kZXhXcml0ZSAmJiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfbm9fd3JpdGVfc2lnbmFsc19jYWxsb3V0Lk5vV3JpdGVTaWduYWxzQ2FsbE91dCwgbnVsbCksICgwLCBfaGVscGVycy51c2VySGFzTm9QZXJtaXNzaW9ucykoY2FuVXNlckNSVUQpICYmIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFkX29ubHlfY2FsbG91dC5SZWFkT25seUNhbGxPdXQsIG51bGwpLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfc291cmNlLldpdGhTb3VyY2UsIHsKICAgIHNvdXJjZUlkOiAiZGVmYXVsdCIsCiAgICBpbmRleFRvQWRkOiBpbmRleFRvQWRkCiAgfSwgZnVuY3Rpb24gKF9yZWY4KSB7CiAgICB2YXIgaW5kaWNlc0V4aXN0ID0gX3JlZjguaW5kaWNlc0V4aXN0LAogICAgICAgIGluZGV4UGF0dGVybiA9IF9yZWY4LmluZGV4UGF0dGVybjsKICAgIHJldHVybiAoMCwgX3NvdXJjZS5pbmRpY2VzRXhpc3RPckRhdGFUZW1wb3JhcmlseVVuYXZhaWxhYmxlKShpbmRpY2VzRXhpc3QpID8gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2dsb2JhbF90aW1lLkdsb2JhbFRpbWUsIG51bGwsIGZ1bmN0aW9uIChfcmVmOSkgewogICAgICB2YXIgX3JlZjEwLCBfcmVmMTEsIF91c2VySGFzTm9QZXJtaXNzaW9uczsKCiAgICAgIHZhciB0byA9IF9yZWY5LnRvLAogICAgICAgICAgZnJvbSA9IF9yZWY5LmZyb20sCiAgICAgICAgICBkZWxldGVRdWVyeSA9IF9yZWY5LmRlbGV0ZVF1ZXJ5LAogICAgICAgICAgc2V0UXVlcnkgPSBfcmVmOS5zZXRRdWVyeTsKICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdFN0aWNreS5TdGlja3lDb250YWluZXIsIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9maWx0ZXJzX2dsb2JhbC5GaWx0ZXJzR2xvYmFsLCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfc2VhcmNoX2Jhci5TaWVtU2VhcmNoQmFyLCB7CiAgICAgICAgaWQ6ICJnbG9iYWwiLAogICAgICAgIGluZGV4UGF0dGVybjogaW5kZXhQYXR0ZXJuCiAgICAgIH0pKSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3dyYXBwZXJfcGFnZS5XcmFwcGVyUGFnZSwgbnVsbCwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2RldGVjdGlvbl9lbmdpbmVfaGVhZGVyX3BhZ2UuRGV0ZWN0aW9uRW5naW5lSGVhZGVyUGFnZSwgewogICAgICAgIGJhY2tPcHRpb25zOiB7CiAgICAgICAgICBocmVmOiAoMCwgX3JlZGlyZWN0X3RvX2RldGVjdGlvbl9lbmdpbmUuZ2V0UnVsZXNVcmwpKCksCiAgICAgICAgICB0ZXh0OiBpMThuLkJBQ0tfVE9fUlVMRVMKICAgICAgICB9LAogICAgICAgIGJvcmRlcjogdHJ1ZSwKICAgICAgICBzdWJ0aXRsZTogc3ViVGl0bGUsCiAgICAgICAgc3VidGl0bGUyOiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGxhc3RTaWduYWxzICE9IG51bGwgPyBbX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5kZWZhdWx0LkZyYWdtZW50LCBudWxsLCBkZXRlY3Rpb25JMThuLkxBU1RfU0lHTkFMLCAnOiAnLCBsYXN0U2lnbmFscyldIDogW10pLCBbX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3J1bGVfc3RhdHVzLlJ1bGVTdGF0dXMsIHsKICAgICAgICAgIHJ1bGVJZDogcnVsZUlkICE9PSBudWxsICYmIHJ1bGVJZCAhPT0gdm9pZCAwID8gcnVsZUlkIDogbnVsbCwKICAgICAgICAgIHJ1bGVFbmFibGVkOiBydWxlRW5hYmxlZAogICAgICAgIH0pXSksCiAgICAgICAgdGl0bGU6IHRpdGxlCiAgICAgIH0sIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCB7CiAgICAgICAgYWxpZ25JdGVtczogImNlbnRlciIKICAgICAgfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVG9vbFRpcCwgewogICAgICAgIHBvc2l0aW9uOiAidG9wIiwKICAgICAgICBjb250ZW50OiAocnVsZSA9PT0gbnVsbCB8fCBydWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBydWxlLnR5cGUpID09PSAnbWFjaGluZV9sZWFybmluZycgJiYgIWhhc01sUGVybWlzc2lvbnMgPyBkZXRlY3Rpb25JMThuLk1MX1JVTEVTX0RJU0FCTEVEX01FU1NBR0UgOiB1bmRlZmluZWQKICAgICAgfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3J1bGVfc3dpdGNoLlJ1bGVTd2l0Y2gsIHsKICAgICAgICBpZDogKF9yZWYxMCA9IHJ1bGUgPT09IG51bGwgfHwgcnVsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcnVsZS5pZCkgIT09IG51bGwgJiYgX3JlZjEwICE9PSB2b2lkIDAgPyBfcmVmMTAgOiAnLTEnLAogICAgICAgIGlzRGlzYWJsZWQ6ICgwLCBfaGVscGVycy51c2VySGFzTm9QZXJtaXNzaW9ucykoY2FuVXNlckNSVUQpIHx8ICFoYXNNbFBlcm1pc3Npb25zICYmICEocnVsZSA9PT0gbnVsbCB8fCBydWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBydWxlLmVuYWJsZWQpLAogICAgICAgIGVuYWJsZWQ6IChfcmVmMTEgPSBydWxlID09PSBudWxsIHx8IHJ1bGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJ1bGUuZW5hYmxlZCkgIT09IG51bGwgJiYgX3JlZjExICE9PSB2b2lkIDAgPyBfcmVmMTEgOiBmYWxzZSwKICAgICAgICBvcHRpb25MYWJlbDogaTE4bi5BQ1RJVkFURV9SVUxFLAogICAgICAgIG9uQ2hhbmdlOiBoYW5kbGVPbkNoYW5nZUVuYWJsZWRSdWxlCiAgICAgIH0pKSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgICAgIGFsaWduSXRlbXM6ICJjZW50ZXIiLAogICAgICAgIGd1dHRlclNpemU6ICJzIiwKICAgICAgICByZXNwb25zaXZlOiBmYWxzZQogICAgICB9LCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgICAgZ3JvdzogZmFsc2UKICAgICAgfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b24sIHsKICAgICAgICBocmVmOiAoMCwgX3JlZGlyZWN0X3RvX2RldGVjdGlvbl9lbmdpbmUuZ2V0RWRpdFJ1bGVVcmwpKHJ1bGVJZCAhPT0gbnVsbCAmJiBydWxlSWQgIT09IHZvaWQgMCA/IHJ1bGVJZCA6ICcnKSwKICAgICAgICBpY29uVHlwZTogImNvbnRyb2xzSG9yaXpvbnRhbCIsCiAgICAgICAgaXNEaXNhYmxlZDogKF91c2VySGFzTm9QZXJtaXNzaW9ucyA9ICgwLCBfaGVscGVycy51c2VySGFzTm9QZXJtaXNzaW9ucykoY2FuVXNlckNSVUQpKSAhPT0gbnVsbCAmJiBfdXNlckhhc05vUGVybWlzc2lvbnMgIT09IHZvaWQgMCA/IF91c2VySGFzTm9QZXJtaXNzaW9ucyA6IHRydWUKICAgICAgfSwgcnVsZUkxOG4uRURJVF9SVUxFX1NFVFRJTkdTKSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcnVsZV9hY3Rpb25zX292ZXJmbG93LlJ1bGVBY3Rpb25zT3ZlcmZsb3csIHsKICAgICAgICBydWxlOiBydWxlLAogICAgICAgIHVzZXJIYXNOb1Blcm1pc3Npb25zOiAoMCwgX2hlbHBlcnMudXNlckhhc05vUGVybWlzc2lvbnMpKGNhblVzZXJDUlVEKQogICAgICB9KSkpKSkpLCBydWxlRXJyb3IsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCBudWxsKSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiYWJvdXRSdWxlIiwKICAgICAgICBjb21wb25lbnQ6ICJzZWN0aW9uIiwKICAgICAgICBncm93OiAxCiAgICAgIH0sIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9zdGVwX2Fib3V0X3J1bGVfZGV0YWlscy5TdGVwQWJvdXRSdWxlVG9nZ2xlRGV0YWlscywgewogICAgICAgIGxvYWRpbmc6IGlzTG9hZGluZywKICAgICAgICBzdGVwRGF0YTogYWJvdXRSdWxlRGF0YSwKICAgICAgICBzdGVwRGF0YURldGFpbHM6IG1vZGlmaWVkQWJvdXRSdWxlRGV0YWlsc0RhdGEKICAgICAgfSkpLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgICAgZ3JvdzogMQogICAgICB9LCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgICAgIGRpcmVjdGlvbjogImNvbHVtbiIKICAgICAgfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGNvbXBvbmVudDogInNlY3Rpb24iLAogICAgICAgIGdyb3c6IDEKICAgICAgfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3N0ZXBfcGFuZWwuU3RlcFBhbmVsLCB7CiAgICAgICAgbG9hZGluZzogaXNMb2FkaW5nLAogICAgICAgIHRpdGxlOiBydWxlSTE4bi5ERUZJTklUSU9OCiAgICAgIH0sIGRlZmluZVJ1bGVEYXRhICE9IG51bGwgJiYgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3N0ZXBfZGVmaW5lX3J1bGUuU3RlcERlZmluZVJ1bGUsIHsKICAgICAgICBkZXNjcmlwdGlvbkNvbHVtbnM6ICJzaW5nbGVTcGxpdCIsCiAgICAgICAgaXNSZWFkT25seVZpZXc6IHRydWUsCiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgICBkZWZhdWx0VmFsdWVzOiBkZWZpbmVSdWxlRGF0YQogICAgICB9KSkpLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgbnVsbCksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAic2NoZWR1bGUiLAogICAgICAgIGNvbXBvbmVudDogInNlY3Rpb24iLAogICAgICAgIGdyb3c6IDEKICAgICAgfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3N0ZXBfcGFuZWwuU3RlcFBhbmVsLCB7CiAgICAgICAgbG9hZGluZzogaXNMb2FkaW5nLAogICAgICAgIHRpdGxlOiBydWxlSTE4bi5TQ0hFRFVMRQogICAgICB9LCBzY2hlZHVsZVJ1bGVEYXRhICE9IG51bGwgJiYgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3N0ZXBfc2NoZWR1bGVfcnVsZS5TdGVwU2NoZWR1bGVSdWxlLCB7CiAgICAgICAgZGVzY3JpcHRpb25Db2x1bW5zOiAic2luZ2xlU3BsaXQiLAogICAgICAgIGlzUmVhZE9ubHlWaWV3OiB0cnVlLAogICAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgICAgZGVmYXVsdFZhbHVlczogc2NoZWR1bGVSdWxlRGF0YQogICAgICB9KSkpKSkpLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgbnVsbCksIHRhYnMsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCBudWxsKSwgcnVsZURldGFpbFRhYiA9PT0gUnVsZURldGFpbFRhYnMuc2lnbmFscyAmJiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLmRlZmF1bHQuRnJhZ21lbnQsIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9zaWduYWxzX2hpc3RvZ3JhbV9wYW5lbC5TaWduYWxzSGlzdG9ncmFtUGFuZWwsIHsKICAgICAgICBkZWxldGVRdWVyeTogZGVsZXRlUXVlcnksCiAgICAgICAgZmlsdGVyczogc2lnbmFsTWVyZ2VkRmlsdGVycywKICAgICAgICBxdWVyeTogcXVlcnksCiAgICAgICAgZnJvbTogZnJvbSwKICAgICAgICBzaWduYWxJbmRleE5hbWU6IHNpZ25hbEluZGV4TmFtZSwKICAgICAgICBzZXRRdWVyeTogc2V0UXVlcnksCiAgICAgICAgc3RhY2tCeU9wdGlvbnM6IF9jb25maWcuc2lnbmFsc0hpc3RvZ3JhbU9wdGlvbnMsCiAgICAgICAgdG86IHRvLAogICAgICAgIHVwZGF0ZURhdGVSYW5nZTogdXBkYXRlRGF0ZVJhbmdlQ2FsbGJhY2sKICAgICAgfSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCBudWxsKSwgcnVsZUlkICE9IG51bGwgJiYgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3NpZ25hbHMuU2lnbmFsc1RhYmxlLCB7CiAgICAgICAgY2FuVXNlckNSVUQ6IGNhblVzZXJDUlVEICE9PSBudWxsICYmIGNhblVzZXJDUlVEICE9PSB2b2lkIDAgPyBjYW5Vc2VyQ1JVRCA6IGZhbHNlLAogICAgICAgIGRlZmF1bHRGaWx0ZXJzOiBzaWduYWxEZWZhdWx0RmlsdGVycywKICAgICAgICBoYXNJbmRleFdyaXRlOiBoYXNJbmRleFdyaXRlICE9PSBudWxsICYmIGhhc0luZGV4V3JpdGUgIT09IHZvaWQgMCA/IGhhc0luZGV4V3JpdGUgOiBmYWxzZSwKICAgICAgICBmcm9tOiBmcm9tLAogICAgICAgIGxvYWRpbmc6IGxvYWRpbmcsCiAgICAgICAgc2lnbmFsc0luZGV4OiBzaWduYWxJbmRleE5hbWUgIT09IG51bGwgJiYgc2lnbmFsSW5kZXhOYW1lICE9PSB2b2lkIDAgPyBzaWduYWxJbmRleE5hbWUgOiAnJywKICAgICAgICB0bzogdG8KICAgICAgfSkpLCBydWxlRGV0YWlsVGFiID09PSBSdWxlRGV0YWlsVGFicy5mYWlsdXJlcyAmJiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZmFpbHVyZV9oaXN0b3J5LkZhaWx1cmVIaXN0b3J5LCB7CiAgICAgICAgaWQ6IHJ1bGUgPT09IG51bGwgfHwgcnVsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcnVsZS5pZAogICAgICB9KSkpOwogICAgfSkgOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfd3JhcHBlcl9wYWdlLldyYXBwZXJQYWdlLCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZGV0ZWN0aW9uX2VuZ2luZV9oZWFkZXJfcGFnZS5EZXRlY3Rpb25FbmdpbmVIZWFkZXJQYWdlLCB7CiAgICAgIGJvcmRlcjogdHJ1ZSwKICAgICAgdGl0bGU6IGkxOG4uUEFHRV9USVRMRQogICAgfSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9kZXRlY3Rpb25fZW5naW5lX2VtcHR5X3BhZ2UuRGV0ZWN0aW9uRW5naW5lRW1wdHlQYWdlLCBudWxsKSk7CiAgfSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9zcHlfcm91dGVzLlNweVJvdXRlLCB7CiAgICBzdGF0ZTogewogICAgICBydWxlTmFtZTogcnVsZSA9PT0gbnVsbCB8fCBydWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBydWxlLm5hbWUKICAgIH0KICB9KSk7Cn07Cgp2YXIgbWFrZU1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1ha2VNYXBTdGF0ZVRvUHJvcHMoKSB7CiAgdmFyIGdldEdsb2JhbElucHV0cyA9IF9pbnB1dHMuaW5wdXRzU2VsZWN0b3JzLmdsb2JhbFNlbGVjdG9yKCk7CgogIHJldHVybiBmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHZhciBnbG9iYWxJbnB1dHMgPSBnZXRHbG9iYWxJbnB1dHMoc3RhdGUpOwogICAgdmFyIHF1ZXJ5ID0gZ2xvYmFsSW5wdXRzLnF1ZXJ5LAogICAgICAgIGZpbHRlcnMgPSBnbG9iYWxJbnB1dHMuZmlsdGVyczsKICAgIHJldHVybiB7CiAgICAgIHF1ZXJ5OiBxdWVyeSwKICAgICAgZmlsdGVyczogZmlsdGVycwogICAgfTsKICB9Owp9OwoKdmFyIG1hcERpc3BhdGNoVG9Qcm9wcyA9IHsKICBzZXRBYnNvbHV0ZVJhbmdlRGF0ZVBpY2tlcjogX2FjdGlvbnMuc2V0QWJzb2x1dGVSYW5nZURhdGVQaWNrZXIKfTsKdmFyIGNvbm5lY3RvciA9ICgwLCBfcmVhY3RSZWR1eC5jb25uZWN0KShtYWtlTWFwU3RhdGVUb1Byb3BzLCBtYXBEaXNwYXRjaFRvUHJvcHMpOwp2YXIgUnVsZURldGFpbHNQYWdlID0gY29ubmVjdG9yKCgwLCBfcmVhY3QyLm1lbW8pKFJ1bGVEZXRhaWxzUGFnZUNvbXBvbmVudCkpOwpleHBvcnRzLlJ1bGVEZXRhaWxzUGFnZSA9IFJ1bGVEZXRhaWxzUGFnZTs="},null]}