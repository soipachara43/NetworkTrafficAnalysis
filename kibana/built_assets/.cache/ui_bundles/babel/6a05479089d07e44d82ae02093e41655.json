{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/apm/public/components/shared/KueryBar/index.js","dependencies":[{"path":"x-pack/legacy/plugins/apm/public/components/shared/KueryBar/index.js","mtime":1589249551627},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkt1ZXJ5QmFyID0gS3VlcnlCYXI7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX2xvZGFzaCA9IHJlcXVpcmUoImxvZGFzaCIpOwoKdmFyIF9zdHlsZWRDb21wb25lbnRzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJzdHlsZWQtY29tcG9uZW50cyIpKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF91cmxfaGVscGVycyA9IHJlcXVpcmUoIi4uL0xpbmtzL3VybF9oZWxwZXJzIik7Cgp2YXIgX1R5cGVhaGVhZCA9IHJlcXVpcmUoIi4vVHlwZWFoZWFkIik7Cgp2YXIgX2dldF9ib29sX2ZpbHRlciA9IHJlcXVpcmUoIi4vZ2V0X2Jvb2xfZmlsdGVyIik7Cgp2YXIgX3VzZUxvY2F0aW9uID0gcmVxdWlyZSgiLi4vLi4vLi4vaG9va3MvdXNlTG9jYXRpb24iKTsKCnZhciBfdXNlVXJsUGFyYW1zMiA9IHJlcXVpcmUoIi4uLy4uLy4uL2hvb2tzL3VzZVVybFBhcmFtcyIpOwoKdmFyIF9oaXN0b3J5ID0gcmVxdWlyZSgiLi4vLi4vLi4vdXRpbHMvaGlzdG9yeSIpOwoKdmFyIF91c2VBcG1QbHVnaW5Db250ZXh0ID0gcmVxdWlyZSgiLi4vLi4vLi4vaG9va3MvdXNlQXBtUGx1Z2luQ29udGV4dCIpOwoKdmFyIF91c2VEeW5hbWljSW5kZXhQYXR0ZXJuID0gcmVxdWlyZSgiLi4vLi4vLi4vaG9va3MvdXNlRHluYW1pY0luZGV4UGF0dGVybiIpOwoKdmFyIF9wdWJsaWMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmMvcGx1Z2lucy9kYXRhL3B1YmxpYyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7CiAgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgewogICAgcmV0dXJuIG9iajsKICB9IGVsc2UgewogICAgdmFyIG5ld09iaiA9IHt9OwoKICAgIGlmIChvYmogIT0gbnVsbCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OwoKICAgICAgICAgIGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBuZXdPYmouZGVmYXVsdCA9IG9iajsKICAgIHJldHVybiBuZXdPYmo7CiAgfQp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgewogIHRyeSB7CiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7CiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICByZWplY3QoZXJyb3IpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKGluZm8uZG9uZSkgewogICAgcmVzb2x2ZSh2YWx1ZSk7CiAgfSBlbHNlIHsKICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsKICB9Cn0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWxmID0gdGhpcywKICAgICAgICBhcmdzID0gYXJndW1lbnRzOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOwoKICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHsKICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7CiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOwogICAgICB9CgogICAgICBfbmV4dCh1bmRlZmluZWQpOwogICAgfSk7CiAgfTsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKdmFyIENvbnRhaW5lciA9IF9zdHlsZWRDb21wb25lbnRzLmRlZmF1bHQuZGl2LndpdGhDb25maWcoewogIGRpc3BsYXlOYW1lOiAiQ29udGFpbmVyIiwKICBjb21wb25lbnRJZDogInNjLThqdWFzdC0wIgp9KShbIm1hcmdpbi1ib3R0b206MTBweDsiXSk7CgpmdW5jdGlvbiBjb252ZXJ0S3VlcnlUb0VzUXVlcnkoa3VlcnksIGluZGV4UGF0dGVybikgewogIHZhciBhc3QgPSBfcHVibGljLmVzS3VlcnkuZnJvbUt1ZXJ5RXhwcmVzc2lvbihrdWVyeSk7CgogIHJldHVybiBfcHVibGljLmVzS3VlcnkudG9FbGFzdGljc2VhcmNoUXVlcnkoYXN0LCBpbmRleFBhdHRlcm4pOwp9CgpmdW5jdGlvbiBLdWVyeUJhcigpIHsKICB2YXIgX3VzZVN0YXRlID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoewogICAgc3VnZ2VzdGlvbnM6IFtdLAogICAgaXNMb2FkaW5nU3VnZ2VzdGlvbnM6IGZhbHNlCiAgfSksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBzdGF0ZSA9IF91c2VTdGF0ZTJbMF0sCiAgICAgIHNldFN0YXRlID0gX3VzZVN0YXRlMlsxXTsKCiAgdmFyIF91c2VVcmxQYXJhbXMgPSAoMCwgX3VzZVVybFBhcmFtczIudXNlVXJsUGFyYW1zKSgpLAogICAgICB1cmxQYXJhbXMgPSBfdXNlVXJsUGFyYW1zLnVybFBhcmFtczsKCiAgdmFyIGxvY2F0aW9uID0gKDAsIF91c2VMb2NhdGlvbi51c2VMb2NhdGlvbikoKTsKICB2YXIgZGF0YSA9ICgwLCBfdXNlQXBtUGx1Z2luQ29udGV4dC51c2VBcG1QbHVnaW5Db250ZXh0KSgpLnBsdWdpbnMuZGF0YTsKICB2YXIgY3VycmVudFJlcXVlc3RDaGVjazsKICB2YXIgcHJvY2Vzc29yRXZlbnQgPSB1cmxQYXJhbXMucHJvY2Vzc29yRXZlbnQ7CiAgdmFyIGV4YW1wbGVzID0gewogICAgdHJhbnNhY3Rpb246ICd0cmFuc2FjdGlvbi5kdXJhdGlvbi51cyA+IDMwMDAwMCcsCiAgICBlcnJvcjogJ2h0dHAucmVzcG9uc2Uuc3RhdHVzX2NvZGUgPj0gNDAwJywKICAgIG1ldHJpYzogJ3Byb2Nlc3MucGlkID0gIjEyMzQiJywKICAgIGRlZmF1bHRzOiAndHJhbnNhY3Rpb24uZHVyYXRpb24udXMgPiAzMDAwMDAgQU5EIGh0dHAucmVzcG9uc2Uuc3RhdHVzX2NvZGUgPj0gNDAwJwogIH07CiAgdmFyIGV4YW1wbGUgPSBleGFtcGxlc1twcm9jZXNzb3JFdmVudCB8fCAnZGVmYXVsdHMnXTsKCiAgdmFyIF91c2VEeW5hbWljSW5kZXhQYXR0ZSA9ICgwLCBfdXNlRHluYW1pY0luZGV4UGF0dGVybi51c2VEeW5hbWljSW5kZXhQYXR0ZXJuKShwcm9jZXNzb3JFdmVudCksCiAgICAgIGluZGV4UGF0dGVybiA9IF91c2VEeW5hbWljSW5kZXhQYXR0ZS5pbmRleFBhdHRlcm47CgogIHZhciBwbGFjZWhvbGRlciA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5hcG0ua3VlcnlCYXIucGxhY2Vob2xkZXInLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogIlNlYXJjaCB7ZXZlbnQsIHNlbGVjdCxcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uIHt0cmFuc2FjdGlvbnN9XG4gICAgICAgICAgICBtZXRyaWMge21ldHJpY3N9XG4gICAgICAgICAgICBlcnJvciB7ZXJyb3JzfVxuICAgICAgICAgICAgb3RoZXIge3RyYW5zYWN0aW9ucywgZXJyb3JzIGFuZCBtZXRyaWNzfVxuICAgICAgICAgIH0gKEUuZy4ge3F1ZXJ5RXhhbXBsZX0pIiwKICAgIHZhbHVlczogewogICAgICBxdWVyeUV4YW1wbGU6IGV4YW1wbGUsCiAgICAgIGV2ZW50OiBwcm9jZXNzb3JFdmVudAogICAgfQogIH0pOyAvLyBUaGUgYmFyIHNob3VsZCBiZSBkaXNhYmxlZCB3aGVuIHZpZXdpbmcgdGhlIHNlcnZpY2UgbWFwCgoKICB2YXIgZGlzYWJsZWQgPSAvXC9zZXJ2aWNlLW1hcCQvLnRlc3QobG9jYXRpb24ucGF0aG5hbWUpOwoKICB2YXIgZGlzYWJsZWRQbGFjZWhvbGRlciA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5hcG0ua3VlcnlCYXIuZGlzYWJsZWRQbGFjZWhvbGRlcicsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnU2VhcmNoIGlzIG5vdCBhdmFpbGFibGUgZm9yIHNlcnZpY2UgbWFwJwogIH0pOwoKICBmdW5jdGlvbiBvbkNoYW5nZShfeCwgX3gyKSB7CiAgICByZXR1cm4gX29uQ2hhbmdlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQoKICBmdW5jdGlvbiBfb25DaGFuZ2UoKSB7CiAgICBfb25DaGFuZ2UgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgIC8qI19fUFVSRV9fKi8KICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoaW5wdXRWYWx1ZSwgc2VsZWN0aW9uU3RhcnQpIHsKICAgICAgdmFyIGN1cnJlbnRSZXF1ZXN0LCBzdWdnZXN0aW9uczsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICghKGluZGV4UGF0dGVybiA9PSBudWxsKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHNldFN0YXRlKF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLCB7CiAgICAgICAgICAgICAgICBzdWdnZXN0aW9uczogW10sCiAgICAgICAgICAgICAgICBpc0xvYWRpbmdTdWdnZXN0aW9uczogdHJ1ZQogICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICBjdXJyZW50UmVxdWVzdCA9ICgwLCBfbG9kYXNoLnVuaXF1ZUlkKSgpOwogICAgICAgICAgICAgIGN1cnJlbnRSZXF1ZXN0Q2hlY2sgPSBjdXJyZW50UmVxdWVzdDsKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICByZXR1cm4gZGF0YS5hdXRvY29tcGxldGUuZ2V0UXVlcnlTdWdnZXN0aW9ucyh7CiAgICAgICAgICAgICAgICBsYW5ndWFnZTogJ2t1ZXJ5JywKICAgICAgICAgICAgICAgIGluZGV4UGF0dGVybnM6IFtpbmRleFBhdHRlcm5dLAogICAgICAgICAgICAgICAgYm9vbEZpbHRlcjogKDAsIF9nZXRfYm9vbF9maWx0ZXIuZ2V0Qm9vbEZpbHRlcikodXJsUGFyYW1zKSwKICAgICAgICAgICAgICAgIHF1ZXJ5OiBpbnB1dFZhbHVlLAogICAgICAgICAgICAgICAgc2VsZWN0aW9uU3RhcnQ6IHNlbGVjdGlvblN0YXJ0LAogICAgICAgICAgICAgICAgc2VsZWN0aW9uRW5kOiBzZWxlY3Rpb25TdGFydAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgaWYgKF9jb250ZXh0LnQwKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gW107CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIF9jb250ZXh0LnQxID0gZnVuY3Rpb24gKHN1Z2dlc3Rpb24pIHsKICAgICAgICAgICAgICAgIHJldHVybiAhKDAsIF9sb2Rhc2guc3RhcnRzV2l0aCkoc3VnZ2VzdGlvbi50ZXh0LCAnc3Bhbi4nKTsKICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBzdWdnZXN0aW9ucyA9IF9jb250ZXh0LnQwLmZpbHRlcihfY29udGV4dC50MSkuc2xpY2UoMCwgMTUpOwoKICAgICAgICAgICAgICBpZiAoIShjdXJyZW50UmVxdWVzdCAhPT0gY3VycmVudFJlcXVlc3RDaGVjaykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIHNldFN0YXRlKF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLCB7CiAgICAgICAgICAgICAgICBzdWdnZXN0aW9uczogc3VnZ2VzdGlvbnMsCiAgICAgICAgICAgICAgICBpc0xvYWRpbmdTdWdnZXN0aW9uczogZmFsc2UKICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIxOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTg7CiAgICAgICAgICAgICAgX2NvbnRleHQudDIgPSBfY29udGV4dFsiY2F0Y2giXSg1KTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKCiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igd2hpbGUgZmV0Y2hpbmcgc3VnZ2VzdGlvbnMnLCBfY29udGV4dC50Mik7CgogICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzUsIDE4XV0pOwogICAgfSkpOwogICAgcmV0dXJuIF9vbkNoYW5nZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KCiAgZnVuY3Rpb24gb25TdWJtaXQoaW5wdXRWYWx1ZSkgewogICAgaWYgKGluZGV4UGF0dGVybiA9PSBudWxsKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0cnkgewogICAgICB2YXIgcmVzID0gY29udmVydEt1ZXJ5VG9Fc1F1ZXJ5KGlucHV0VmFsdWUsIGluZGV4UGF0dGVybik7CgogICAgICBpZiAoIXJlcykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgX2hpc3RvcnkuaGlzdG9yeS5wdXNoKF9vYmplY3RTcHJlYWQoe30sIGxvY2F0aW9uLCB7CiAgICAgICAgc2VhcmNoOiAoMCwgX3VybF9oZWxwZXJzLmZyb21RdWVyeSkoX29iamVjdFNwcmVhZCh7fSwgKDAsIF91cmxfaGVscGVycy50b1F1ZXJ5KShsb2NhdGlvbi5zZWFyY2gpLCB7CiAgICAgICAgICBrdWVyeTogZW5jb2RlVVJJQ29tcG9uZW50KGlucHV0VmFsdWUudHJpbSgpKQogICAgICAgIH0pKQogICAgICB9KSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGNvbnNvbGUubG9nKCdJbnZhbGlkIGt1ZXJ5IHN5bnRheCcpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgIH0KICB9CgogIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KENvbnRhaW5lciwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfVHlwZWFoZWFkLlR5cGVhaGVhZCwgewogICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgaXNMb2FkaW5nOiBzdGF0ZS5pc0xvYWRpbmdTdWdnZXN0aW9ucywKICAgIGluaXRpYWxWYWx1ZTogdXJsUGFyYW1zLmt1ZXJ5LAogICAgb25DaGFuZ2U6IG9uQ2hhbmdlLAogICAgb25TdWJtaXQ6IG9uU3VibWl0LAogICAgc3VnZ2VzdGlvbnM6IHN0YXRlLnN1Z2dlc3Rpb25zLAogICAgcGxhY2Vob2xkZXI6IGRpc2FibGVkID8gZGlzYWJsZWRQbGFjZWhvbGRlciA6IHBsYWNlaG9sZGVyCiAgfSkpOwp9"},null]}