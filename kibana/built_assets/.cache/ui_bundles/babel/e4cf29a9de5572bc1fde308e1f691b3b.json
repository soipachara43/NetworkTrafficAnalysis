{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/input_control_vis/public/components/editor/controls_tab.js","dependencies":[{"path":"src/legacy/core_plugins/input_control_vis/public/components/editor/controls_tab.js","mtime":1589249549630},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZ2V0Q29udHJvbHNUYWIgPSBleHBvcnRzLkNvbnRyb2xzVGFiID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9yZWFjdDIgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX2NvbnRyb2xfZWRpdG9yID0gcmVxdWlyZSgiLi9jb250cm9sX2VkaXRvciIpOwoKdmFyIF9lZGl0b3JfdXRpbHMgPSByZXF1aXJlKCIuLi8uLi9lZGl0b3JfdXRpbHMiKTsKCnZhciBfbGluZWFnZSA9IHJlcXVpcmUoIi4uLy4uL2xpbmVhZ2UiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX2V4dGVuZHMoKSB7CiAgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07CgogICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsKICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRhcmdldDsKICB9OwoKICByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9IGVsc2UgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0KCiAgcmV0dXJuIF90eXBlb2Yob2JqKTsKfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgewogIHRyeSB7CiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7CiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICByZWplY3QoZXJyb3IpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKGluZm8uZG9uZSkgewogICAgcmVzb2x2ZSh2YWx1ZSk7CiAgfSBlbHNlIHsKICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsKICB9Cn0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWxmID0gdGhpcywKICAgICAgICBhcmdzID0gYXJndW1lbnRzOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOwoKICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHsKICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7CiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOwogICAgICB9CgogICAgICBfbmV4dCh1bmRlZmluZWQpOwogICAgfSk7CiAgfTsKfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgewogIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsKICAgIHJldHVybiBjYWxsOwogIH0KCiAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7Cn0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7CiAgfTsKICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOwp9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsKICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIHNlbGY7Cn0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgewogIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOwogIH0KCiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICBjb25zdHJ1Y3RvcjogewogICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0KICB9KTsKICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsKfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICAgIG8uX19wcm90b19fID0gcDsKICAgIHJldHVybiBvOwogIH07CgogIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Cgp2YXIgQ29udHJvbHNUYWJVaSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9QdXJlQ29tcG9uZW50KSB7CiAgX2luaGVyaXRzKENvbnRyb2xzVGFiVWksIF9QdXJlQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gQ29udHJvbHNUYWJVaSgpIHsKICAgIHZhciBfZ2V0UHJvdG90eXBlT2YyOwoKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29udHJvbHNUYWJVaSk7CgogICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICB9CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoX2dldFByb3RvdHlwZU9mMiA9IF9nZXRQcm90b3R5cGVPZihDb250cm9sc1RhYlVpKSkuY2FsbC5hcHBseShfZ2V0UHJvdG90eXBlT2YyLCBbdGhpc10uY29uY2F0KGFyZ3MpKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic3RhdGUiLCB7CiAgICAgIHR5cGU6IF9lZGl0b3JfdXRpbHMuQ09OVFJPTF9UWVBFUy5MSVNUCiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJnZXRJbmRleFBhdHRlcm4iLAogICAgLyojX19QVVJFX18qLwogICAgZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoaW5kZXhQYXR0ZXJuSWQpIHsKICAgICAgICB2YXIgX3JlZjIsIF9yZWYzLCBzdGFydERlcHM7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByb3BzLmRlcHMuY29yZS5nZXRTdGFydFNlcnZpY2VzKCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF9yZWYyID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9yZWYzID0gX3NsaWNlZFRvQXJyYXkoX3JlZjIsIDIpOwogICAgICAgICAgICAgICAgc3RhcnREZXBzID0gX3JlZjNbMV07CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBzdGFydERlcHMuZGF0YS5pbmRleFBhdHRlcm5zLmdldChpbmRleFBhdHRlcm5JZCk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0LnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uQ2hhbmdlIiwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIHJldHVybiBfdGhpcy5wcm9wcy5zZXRWYWx1ZSgnY29udHJvbHMnLCB2YWx1ZSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVMYWJlbENoYW5nZSIsIGZ1bmN0aW9uIChjb250cm9sSW5kZXgsIGxhYmVsKSB7CiAgICAgIHZhciB1cGRhdGVkQ29udHJvbCA9IF9vYmplY3RTcHJlYWQoe30sIF90aGlzLnByb3BzLnN0YXRlUGFyYW1zLmNvbnRyb2xzW2NvbnRyb2xJbmRleF0sIHsKICAgICAgICBsYWJlbDogbGFiZWwKICAgICAgfSk7CgogICAgICBfdGhpcy5vbkNoYW5nZSgoMCwgX2VkaXRvcl91dGlscy5zZXRDb250cm9sKShfdGhpcy5wcm9wcy5zdGF0ZVBhcmFtcy5jb250cm9scywgY29udHJvbEluZGV4LCB1cGRhdGVkQ29udHJvbCkpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlSW5kZXhQYXR0ZXJuQ2hhbmdlIiwgZnVuY3Rpb24gKGNvbnRyb2xJbmRleCwgaW5kZXhQYXR0ZXJuKSB7CiAgICAgIHZhciB1cGRhdGVkQ29udHJvbCA9IF9vYmplY3RTcHJlYWQoe30sIF90aGlzLnByb3BzLnN0YXRlUGFyYW1zLmNvbnRyb2xzW2NvbnRyb2xJbmRleF0sIHsKICAgICAgICBpbmRleFBhdHRlcm46IGluZGV4UGF0dGVybiwKICAgICAgICBmaWVsZE5hbWU6ICcnCiAgICAgIH0pOwoKICAgICAgX3RoaXMub25DaGFuZ2UoKDAsIF9lZGl0b3JfdXRpbHMuc2V0Q29udHJvbCkoX3RoaXMucHJvcHMuc3RhdGVQYXJhbXMuY29udHJvbHMsIGNvbnRyb2xJbmRleCwgdXBkYXRlZENvbnRyb2wpKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUZpZWxkTmFtZUNoYW5nZSIsIGZ1bmN0aW9uIChjb250cm9sSW5kZXgsIGZpZWxkTmFtZSkgewogICAgICB2YXIgdXBkYXRlZENvbnRyb2wgPSBfb2JqZWN0U3ByZWFkKHt9LCBfdGhpcy5wcm9wcy5zdGF0ZVBhcmFtcy5jb250cm9sc1tjb250cm9sSW5kZXhdLCB7CiAgICAgICAgZmllbGROYW1lOiBmaWVsZE5hbWUKICAgICAgfSk7CgogICAgICBfdGhpcy5vbkNoYW5nZSgoMCwgX2VkaXRvcl91dGlscy5zZXRDb250cm9sKShfdGhpcy5wcm9wcy5zdGF0ZVBhcmFtcy5jb250cm9scywgY29udHJvbEluZGV4LCB1cGRhdGVkQ29udHJvbCkpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlT3B0aW9uc0NoYW5nZSIsIGZ1bmN0aW9uIChjb250cm9sSW5kZXgsIG9wdGlvbk5hbWUsIHZhbHVlKSB7CiAgICAgIHZhciBjb250cm9sID0gX3RoaXMucHJvcHMuc3RhdGVQYXJhbXMuY29udHJvbHNbY29udHJvbEluZGV4XTsKCiAgICAgIHZhciB1cGRhdGVkQ29udHJvbCA9IF9vYmplY3RTcHJlYWQoe30sIGNvbnRyb2wsIHsKICAgICAgICBvcHRpb25zOiBfb2JqZWN0U3ByZWFkKHt9LCBjb250cm9sLm9wdGlvbnMsIF9kZWZpbmVQcm9wZXJ0eSh7fSwgb3B0aW9uTmFtZSwgdmFsdWUpKQogICAgICB9KTsKCiAgICAgIF90aGlzLm9uQ2hhbmdlKCgwLCBfZWRpdG9yX3V0aWxzLnNldENvbnRyb2wpKF90aGlzLnByb3BzLnN0YXRlUGFyYW1zLmNvbnRyb2xzLCBjb250cm9sSW5kZXgsIHVwZGF0ZWRDb250cm9sKSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVSZW1vdmVDb250cm9sIiwgZnVuY3Rpb24gKGNvbnRyb2xJbmRleCkgewogICAgICBfdGhpcy5vbkNoYW5nZSgoMCwgX2VkaXRvcl91dGlscy5yZW1vdmVDb250cm9sKShfdGhpcy5wcm9wcy5zdGF0ZVBhcmFtcy5jb250cm9scywgY29udHJvbEluZGV4KSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJtb3ZlQ29udHJvbCIsIGZ1bmN0aW9uIChjb250cm9sSW5kZXgsIGRpcmVjdGlvbikgewogICAgICBfdGhpcy5vbkNoYW5nZSgoMCwgX2VkaXRvcl91dGlscy5tb3ZlQ29udHJvbCkoX3RoaXMucHJvcHMuc3RhdGVQYXJhbXMuY29udHJvbHMsIGNvbnRyb2xJbmRleCwgZGlyZWN0aW9uKSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVBZGRDb250cm9sIiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5vbkNoYW5nZSgoMCwgX2VkaXRvcl91dGlscy5hZGRDb250cm9sKShfdGhpcy5wcm9wcy5zdGF0ZVBhcmFtcy5jb250cm9scywgKDAsIF9lZGl0b3JfdXRpbHMubmV3Q29udHJvbCkoX3RoaXMuc3RhdGUudHlwZSkpKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZVBhcmVudENoYW5nZSIsIGZ1bmN0aW9uIChjb250cm9sSW5kZXgsIHBhcmVudCkgewogICAgICB2YXIgdXBkYXRlZENvbnRyb2wgPSBfb2JqZWN0U3ByZWFkKHt9LCBfdGhpcy5wcm9wcy5zdGF0ZVBhcmFtcy5jb250cm9sc1tjb250cm9sSW5kZXhdLCB7CiAgICAgICAgcGFyZW50OiBwYXJlbnQKICAgICAgfSk7CgogICAgICBfdGhpcy5vbkNoYW5nZSgoMCwgX2VkaXRvcl91dGlscy5zZXRDb250cm9sKShfdGhpcy5wcm9wcy5zdGF0ZVBhcmFtcy5jb250cm9scywgY29udHJvbEluZGV4LCB1cGRhdGVkQ29udHJvbCkpOwogICAgfSk7CgogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKENvbnRyb2xzVGFiVWksIFt7CiAgICBrZXk6ICJyZW5kZXJDb250cm9scyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyQ29udHJvbHMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGxpbmVhZ2VNYXAgPSAoMCwgX2xpbmVhZ2UuZ2V0TGluZWFnZU1hcCkodGhpcy5wcm9wcy5zdGF0ZVBhcmFtcy5jb250cm9scyk7CiAgICAgIHJldHVybiB0aGlzLnByb3BzLnN0YXRlUGFyYW1zLmNvbnRyb2xzLm1hcChmdW5jdGlvbiAoY29udHJvbFBhcmFtcywgY29udHJvbEluZGV4KSB7CiAgICAgICAgdmFyIHBhcmVudENhbmRpZGF0ZXMgPSAoMCwgX2xpbmVhZ2UuZ2V0UGFyZW50Q2FuZGlkYXRlcykoX3RoaXMyLnByb3BzLnN0YXRlUGFyYW1zLmNvbnRyb2xzLCBjb250cm9sUGFyYW1zLmlkLCBsaW5lYWdlTWFwKTsKICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY29udHJvbF9lZGl0b3IuQ29udHJvbEVkaXRvciwgewogICAgICAgICAga2V5OiBjb250cm9sUGFyYW1zLmlkLAogICAgICAgICAgY29udHJvbEluZGV4OiBjb250cm9sSW5kZXgsCiAgICAgICAgICBjb250cm9sUGFyYW1zOiBjb250cm9sUGFyYW1zLAogICAgICAgICAgaGFuZGxlTGFiZWxDaGFuZ2U6IF90aGlzMi5oYW5kbGVMYWJlbENoYW5nZSwKICAgICAgICAgIG1vdmVDb250cm9sOiBfdGhpczIubW92ZUNvbnRyb2wsCiAgICAgICAgICBoYW5kbGVSZW1vdmVDb250cm9sOiBfdGhpczIuaGFuZGxlUmVtb3ZlQ29udHJvbCwKICAgICAgICAgIGhhbmRsZUluZGV4UGF0dGVybkNoYW5nZTogX3RoaXMyLmhhbmRsZUluZGV4UGF0dGVybkNoYW5nZSwKICAgICAgICAgIGhhbmRsZUZpZWxkTmFtZUNoYW5nZTogX3RoaXMyLmhhbmRsZUZpZWxkTmFtZUNoYW5nZSwKICAgICAgICAgIGdldEluZGV4UGF0dGVybjogX3RoaXMyLmdldEluZGV4UGF0dGVybiwKICAgICAgICAgIGhhbmRsZU9wdGlvbnNDaGFuZ2U6IF90aGlzMi5oYW5kbGVPcHRpb25zQ2hhbmdlLAogICAgICAgICAgcGFyZW50Q2FuZGlkYXRlczogcGFyZW50Q2FuZGlkYXRlcywKICAgICAgICAgIGhhbmRsZVBhcmVudENoYW5nZTogX3RoaXMyLmhhbmRsZVBhcmVudENoYW5nZSwKICAgICAgICAgIGRlcHM6IF90aGlzMi5wcm9wcy5kZXBzCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBpbnRsID0gdGhpcy5wcm9wcy5pbnRsOwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgdGhpcy5yZW5kZXJDb250cm9scygpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpUGFuZWwsIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICAgICAgaWQ6ICJzZWxlY3RDb250cm9sVHlwZSIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNlbGVjdCwgewogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJzZWxlY3RDb250cm9sVHlwZSIsCiAgICAgICAgb3B0aW9uczogW3sKICAgICAgICAgIHZhbHVlOiBfZWRpdG9yX3V0aWxzLkNPTlRST0xfVFlQRVMuUkFOR0UsCiAgICAgICAgICB0ZXh0OiBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgICBpZDogJ2lucHV0Q29udHJvbC5lZGl0b3IuY29udHJvbHNUYWIuc2VsZWN0LnJhbmdlRHJvcERvd25PcHRpb25MYWJlbCcsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmFuZ2Ugc2xpZGVyJwogICAgICAgICAgfSkKICAgICAgICB9LCB7CiAgICAgICAgICB2YWx1ZTogX2VkaXRvcl91dGlscy5DT05UUk9MX1RZUEVTLkxJU1QsCiAgICAgICAgICB0ZXh0OiBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgICBpZDogJ2lucHV0Q29udHJvbC5lZGl0b3IuY29udHJvbHNUYWIuc2VsZWN0Lmxpc3REcm9wRG93bk9wdGlvbkxhYmVsJywKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdPcHRpb25zIGxpc3QnCiAgICAgICAgICB9KQogICAgICAgIH1dLAogICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLnR5cGUsCiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMzLnNldFN0YXRlKHsKICAgICAgICAgICAgdHlwZTogZXZlbnQudGFyZ2V0LnZhbHVlCiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgICJhcmlhLWxhYmVsIjogaW50bC5mb3JtYXRNZXNzYWdlKHsKICAgICAgICAgIGlkOiAnaW5wdXRDb250cm9sLmVkaXRvci5jb250cm9sc1RhYi5zZWxlY3QuY29udHJvbFR5cGVBcmlhTGFiZWwnLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTZWxlY3QgY29udHJvbCB0eXBlJwogICAgICAgIH0pCiAgICAgIH0pKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICAgICAgaWQ6ICJhZGRDb250cm9sIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uLCB7CiAgICAgICAgZmlsbDogdHJ1ZSwKICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUFkZENvbnRyb2wsCiAgICAgICAgaWNvblR5cGU6ICJwbHVzSW5DaXJjbGUiLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJpbnB1dENvbnRyb2xFZGl0b3JBZGRCdG4iLAogICAgICAgICJhcmlhLWxhYmVsIjogaW50bC5mb3JtYXRNZXNzYWdlKHsKICAgICAgICAgIGlkOiAnaW5wdXRDb250cm9sLmVkaXRvci5jb250cm9sc1RhYi5zZWxlY3QuYWRkQ29udHJvbEFyaWFMYWJlbCcsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0FkZCBjb250cm9sJwogICAgICAgIH0pCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJpbnB1dENvbnRyb2wuZWRpdG9yLmNvbnRyb2xzVGFiLmFkZEJ1dHRvbkxhYmVsIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkFkZCIKICAgICAgfSkpKSkpKSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQ29udHJvbHNUYWJVaTsKfShfcmVhY3QuUHVyZUNvbXBvbmVudCk7Cgp2YXIgQ29udHJvbHNUYWIgPSAoMCwgX3JlYWN0Mi5pbmplY3RJMThuKShDb250cm9sc1RhYlVpKTsKZXhwb3J0cy5Db250cm9sc1RhYiA9IENvbnRyb2xzVGFiOwoKdmFyIGdldENvbnRyb2xzVGFiID0gZnVuY3Rpb24gZ2V0Q29udHJvbHNUYWIoZGVwcykgewogIHJldHVybiBmdW5jdGlvbiAocHJvcHMpIHsKICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KENvbnRyb2xzVGFiLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHsKICAgICAgZGVwczogZGVwcwogICAgfSkpOwogIH07Cn07CgpleHBvcnRzLmdldENvbnRyb2xzVGFiID0gZ2V0Q29udHJvbHNUYWI7"},null]}