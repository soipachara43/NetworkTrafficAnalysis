{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/pages/case/components/case_view/index.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/pages/case/components/case_view/index.js","mtime":1589249553268},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkNhc2VWaWV3ID0gZXhwb3J0cy5DYXNlQ29tcG9uZW50ID0gdm9pZCAwOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfc3R5bGVkQ29tcG9uZW50cyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgic3R5bGVkLWNvbXBvbmVudHMiKSk7Cgp2YXIgaTE4biA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoIi4vdHJhbnNsYXRpb25zIikpOwoKdmFyIF9saW5rX3RvID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29tcG9uZW50cy9saW5rX3RvIik7Cgp2YXIgX2hlYWRlcl9wYWdlID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29tcG9uZW50cy9oZWFkZXJfcGFnZSIpOwoKdmFyIF9lZGl0YWJsZV90aXRsZSA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMvaGVhZGVyX3BhZ2UvZWRpdGFibGVfdGl0bGUiKTsKCnZhciBfdGFnX2xpc3QgPSByZXF1aXJlKCIuLi90YWdfbGlzdCIpOwoKdmFyIF91c2VfZ2V0X2Nhc2UgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb250YWluZXJzL2Nhc2UvdXNlX2dldF9jYXNlIik7Cgp2YXIgX3VzZXJfYWN0aW9uX3RyZWUgPSByZXF1aXJlKCIuLi91c2VyX2FjdGlvbl90cmVlIik7Cgp2YXIgX3VzZXJfbGlzdCA9IHJlcXVpcmUoIi4uL3VzZXJfbGlzdCIpOwoKdmFyIF91c2VfdXBkYXRlX2Nhc2UgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb250YWluZXJzL2Nhc2UvdXNlX3VwZGF0ZV9jYXNlIik7Cgp2YXIgX3VzZV9nZXRfdXJsX3NlYXJjaCA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMvbmF2aWdhdGlvbi91c2VfZ2V0X3VybF9zZWFyY2giKTsKCnZhciBfd3JhcHBlcl9wYWdlID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29tcG9uZW50cy93cmFwcGVyX3BhZ2UiKTsKCnZhciBfdXRpbHMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb250YWluZXJzL2Nhc2UvdXRpbHMiKTsKCnZhciBfd3JhcHBlcnMgPSByZXF1aXJlKCIuLi93cmFwcGVycyIpOwoKdmFyIF9raWJhbmEgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9saWIva2liYW5hIik7Cgp2YXIgX2Nhc2Vfc3RhdHVzID0gcmVxdWlyZSgiLi4vY2FzZV9zdGF0dXMiKTsKCnZhciBfaG9tZV9uYXZpZ2F0aW9ucyA9IHJlcXVpcmUoIi4uLy4uLy4uL2hvbWUvaG9tZV9uYXZpZ2F0aW9ucyIpOwoKdmFyIF9zcHlfcm91dGVzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vdXRpbHMvcm91dGUvc3B5X3JvdXRlcyIpOwoKdmFyIF91c2VfZ2V0X2Nhc2VfdXNlcl9hY3Rpb25zID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29udGFpbmVycy9jYXNlL3VzZV9nZXRfY2FzZV91c2VyX2FjdGlvbnMiKTsKCnZhciBfdXNlX3B1c2hfdG9fc2VydmljZSA9IHJlcXVpcmUoIi4uL3VzZV9wdXNoX3RvX3NlcnZpY2UiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgIGRlZmF1bHQ6IG9iagogIH07Cn0KCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX2V4dGVuZHMoKSB7CiAgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07CgogICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsKICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRhcmdldDsKICB9OwoKICByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KCnZhciBNeVdyYXBwZXIgPSAoMCwgX3N0eWxlZENvbXBvbmVudHMuZGVmYXVsdCkoX3dyYXBwZXJfcGFnZS5XcmFwcGVyUGFnZSkud2l0aENvbmZpZyh7CiAgZGlzcGxheU5hbWU6ICJNeVdyYXBwZXIiLAogIGNvbXBvbmVudElkOiAic2MtMWJnaDNzNy0wIgp9KShbInBhZGRpbmctYm90dG9tOjA7Il0pOwp2YXIgTXlFdWlGbGV4R3JvdXAgPSAoMCwgX3N0eWxlZENvbXBvbmVudHMuZGVmYXVsdCkoX2V1aS5FdWlGbGV4R3JvdXApLndpdGhDb25maWcoewogIGRpc3BsYXlOYW1lOiAiTXlFdWlGbGV4R3JvdXAiLAogIGNvbXBvbmVudElkOiAic2MtMWJnaDNzNy0xIgp9KShbImhlaWdodDoxMDAlOyJdKTsKdmFyIE15RXVpSG9yaXpvbnRhbFJ1bGUgPSAoMCwgX3N0eWxlZENvbXBvbmVudHMuZGVmYXVsdCkoX2V1aS5FdWlIb3Jpem9udGFsUnVsZSkud2l0aENvbmZpZyh7CiAgZGlzcGxheU5hbWU6ICJNeUV1aUhvcml6b250YWxSdWxlIiwKICBjb21wb25lbnRJZDogInNjLTFiZ2gzczctMiIKfSkoWyJtYXJnaW4tbGVmdDo0OHB4OyYuZXVpSG9yaXpvbnRhbFJ1bGUtLWZ1bGx7d2lkdGg6Y2FsYygxMDAlIC0gNDhweCk7fSJdKTsKCnZhciBDYXNlQ29tcG9uZW50ID0gX3JlYWN0LmRlZmF1bHQubWVtbyhmdW5jdGlvbiAoX3JlZikgewogIHZhciBjYXNlSWQgPSBfcmVmLmNhc2VJZCwKICAgICAgY2FzZURhdGEgPSBfcmVmLmNhc2VEYXRhLAogICAgICBmZXRjaENhc2UgPSBfcmVmLmZldGNoQ2FzZSwKICAgICAgdXBkYXRlQ2FzZSA9IF9yZWYudXBkYXRlQ2FzZSwKICAgICAgdXNlckNhbkNydWQgPSBfcmVmLnVzZXJDYW5DcnVkOwogIHZhciBiYXNlUGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAoMCwgX2tpYmFuYS51c2VCYXNlUGF0aCkoKTsKICB2YXIgY2FzZUxpbmsgPSAiIi5jb25jYXQoYmFzZVBhdGgsICIvYXBwL3NpZW0jL2Nhc2UvIikuY29uY2F0KGNhc2VJZCk7CiAgdmFyIHNlYXJjaCA9ICgwLCBfdXNlX2dldF91cmxfc2VhcmNoLnVzZUdldFVybFNlYXJjaCkoX2hvbWVfbmF2aWdhdGlvbnMubmF2VGFicy5jYXNlKTsKCiAgdmFyIF91c2VTdGF0ZSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKHRydWUpLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgaW5pdExvYWRpbmdEYXRhID0gX3VzZVN0YXRlMlswXSwKICAgICAgc2V0SW5pdExvYWRpbmdEYXRhID0gX3VzZVN0YXRlMlsxXTsKCiAgdmFyIF91c2VHZXRDYXNlVXNlckFjdGlvbiA9ICgwLCBfdXNlX2dldF9jYXNlX3VzZXJfYWN0aW9ucy51c2VHZXRDYXNlVXNlckFjdGlvbnMpKGNhc2VJZCksCiAgICAgIGNhc2VVc2VyQWN0aW9ucyA9IF91c2VHZXRDYXNlVXNlckFjdGlvbi5jYXNlVXNlckFjdGlvbnMsCiAgICAgIGZldGNoQ2FzZVVzZXJBY3Rpb25zID0gX3VzZUdldENhc2VVc2VyQWN0aW9uLmZldGNoQ2FzZVVzZXJBY3Rpb25zLAogICAgICBmaXJzdEluZGV4UHVzaFRvU2VydmljZSA9IF91c2VHZXRDYXNlVXNlckFjdGlvbi5maXJzdEluZGV4UHVzaFRvU2VydmljZSwKICAgICAgaGFzRGF0YVRvUHVzaCA9IF91c2VHZXRDYXNlVXNlckFjdGlvbi5oYXNEYXRhVG9QdXNoLAogICAgICBpc0xvYWRpbmdVc2VyQWN0aW9ucyA9IF91c2VHZXRDYXNlVXNlckFjdGlvbi5pc0xvYWRpbmcsCiAgICAgIGxhc3RJbmRleFB1c2hUb1NlcnZpY2UgPSBfdXNlR2V0Q2FzZVVzZXJBY3Rpb24ubGFzdEluZGV4UHVzaFRvU2VydmljZSwKICAgICAgcGFydGljaXBhbnRzID0gX3VzZUdldENhc2VVc2VyQWN0aW9uLnBhcnRpY2lwYW50czsKCiAgdmFyIF91c2VVcGRhdGVDYXNlID0gKDAsIF91c2VfdXBkYXRlX2Nhc2UudXNlVXBkYXRlQ2FzZSkoewogICAgY2FzZUlkOiBjYXNlSWQKICB9KSwKICAgICAgaXNMb2FkaW5nID0gX3VzZVVwZGF0ZUNhc2UuaXNMb2FkaW5nLAogICAgICB1cGRhdGVLZXkgPSBfdXNlVXBkYXRlQ2FzZS51cGRhdGVLZXksCiAgICAgIHVwZGF0ZUNhc2VQcm9wZXJ0eSA9IF91c2VVcGRhdGVDYXNlLnVwZGF0ZUNhc2VQcm9wZXJ0eTsgLy8gVXBkYXRlIEZpZWxkcwoKCiAgdmFyIG9uVXBkYXRlRmllbGQgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAobmV3VXBkYXRlS2V5LCB1cGRhdGVWYWx1ZSkgewogICAgdmFyIGhhbmRsZVVwZGF0ZU5ld0Nhc2UgPSBmdW5jdGlvbiBoYW5kbGVVcGRhdGVOZXdDYXNlKG5ld0Nhc2UpIHsKICAgICAgcmV0dXJuIHVwZGF0ZUNhc2UoX29iamVjdFNwcmVhZCh7fSwgbmV3Q2FzZSwgewogICAgICAgIGNvbW1lbnRzOiBjYXNlRGF0YS5jb21tZW50cwogICAgICB9KSk7CiAgICB9OwoKICAgIHN3aXRjaCAobmV3VXBkYXRlS2V5KSB7CiAgICAgIGNhc2UgJ3RpdGxlJzoKICAgICAgICB2YXIgdGl0bGVVcGRhdGUgPSAoMCwgX3V0aWxzLmdldFR5cGVkUGF5bG9hZCkodXBkYXRlVmFsdWUpOwoKICAgICAgICBpZiAodGl0bGVVcGRhdGUubGVuZ3RoID4gMCkgewogICAgICAgICAgdXBkYXRlQ2FzZVByb3BlcnR5KHsKICAgICAgICAgICAgZmV0Y2hDYXNlVXNlckFjdGlvbnM6IGZldGNoQ2FzZVVzZXJBY3Rpb25zLAogICAgICAgICAgICB1cGRhdGVLZXk6ICd0aXRsZScsCiAgICAgICAgICAgIHVwZGF0ZVZhbHVlOiB0aXRsZVVwZGF0ZSwKICAgICAgICAgICAgdXBkYXRlQ2FzZTogaGFuZGxlVXBkYXRlTmV3Q2FzZSwKICAgICAgICAgICAgdmVyc2lvbjogY2FzZURhdGEudmVyc2lvbgogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2Rlc2NyaXB0aW9uJzoKICAgICAgICB2YXIgZGVzY3JpcHRpb25VcGRhdGUgPSAoMCwgX3V0aWxzLmdldFR5cGVkUGF5bG9hZCkodXBkYXRlVmFsdWUpOwoKICAgICAgICBpZiAoZGVzY3JpcHRpb25VcGRhdGUubGVuZ3RoID4gMCkgewogICAgICAgICAgdXBkYXRlQ2FzZVByb3BlcnR5KHsKICAgICAgICAgICAgZmV0Y2hDYXNlVXNlckFjdGlvbnM6IGZldGNoQ2FzZVVzZXJBY3Rpb25zLAogICAgICAgICAgICB1cGRhdGVLZXk6ICdkZXNjcmlwdGlvbicsCiAgICAgICAgICAgIHVwZGF0ZVZhbHVlOiBkZXNjcmlwdGlvblVwZGF0ZSwKICAgICAgICAgICAgdXBkYXRlQ2FzZTogaGFuZGxlVXBkYXRlTmV3Q2FzZSwKICAgICAgICAgICAgdmVyc2lvbjogY2FzZURhdGEudmVyc2lvbgogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3RhZ3MnOgogICAgICAgIHZhciB0YWdzVXBkYXRlID0gKDAsIF91dGlscy5nZXRUeXBlZFBheWxvYWQpKHVwZGF0ZVZhbHVlKTsKICAgICAgICB1cGRhdGVDYXNlUHJvcGVydHkoewogICAgICAgICAgZmV0Y2hDYXNlVXNlckFjdGlvbnM6IGZldGNoQ2FzZVVzZXJBY3Rpb25zLAogICAgICAgICAgdXBkYXRlS2V5OiAndGFncycsCiAgICAgICAgICB1cGRhdGVWYWx1ZTogdGFnc1VwZGF0ZSwKICAgICAgICAgIHVwZGF0ZUNhc2U6IGhhbmRsZVVwZGF0ZU5ld0Nhc2UsCiAgICAgICAgICB2ZXJzaW9uOiBjYXNlRGF0YS52ZXJzaW9uCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzdGF0dXMnOgogICAgICAgIHZhciBzdGF0dXNVcGRhdGUgPSAoMCwgX3V0aWxzLmdldFR5cGVkUGF5bG9hZCkodXBkYXRlVmFsdWUpOwoKICAgICAgICBpZiAoY2FzZURhdGEuc3RhdHVzICE9PSB1cGRhdGVWYWx1ZSkgewogICAgICAgICAgdXBkYXRlQ2FzZVByb3BlcnR5KHsKICAgICAgICAgICAgZmV0Y2hDYXNlVXNlckFjdGlvbnM6IGZldGNoQ2FzZVVzZXJBY3Rpb25zLAogICAgICAgICAgICB1cGRhdGVLZXk6ICdzdGF0dXMnLAogICAgICAgICAgICB1cGRhdGVWYWx1ZTogc3RhdHVzVXBkYXRlLAogICAgICAgICAgICB1cGRhdGVDYXNlOiBoYW5kbGVVcGRhdGVOZXdDYXNlLAogICAgICAgICAgICB2ZXJzaW9uOiBjYXNlRGF0YS52ZXJzaW9uCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBudWxsOwogICAgfQogIH0sIFtmZXRjaENhc2VVc2VyQWN0aW9ucywgdXBkYXRlQ2FzZVByb3BlcnR5LCB1cGRhdGVDYXNlLCBjYXNlRGF0YV0pOwogIHZhciBoYW5kbGVVcGRhdGVDYXNlID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKG5ld0Nhc2UpIHsKICAgIHVwZGF0ZUNhc2UobmV3Q2FzZSk7CiAgICBmZXRjaENhc2VVc2VyQWN0aW9ucyhuZXdDYXNlLmlkKTsKICB9LCBbdXBkYXRlQ2FzZSwgZmV0Y2hDYXNlVXNlckFjdGlvbnNdKTsKCiAgdmFyIF91c2VQdXNoVG9TZXJ2aWNlID0gKDAsIF91c2VfcHVzaF90b19zZXJ2aWNlLnVzZVB1c2hUb1NlcnZpY2UpKHsKICAgIGNhc2VJZDogY2FzZURhdGEuaWQsCiAgICBjYXNlU3RhdHVzOiBjYXNlRGF0YS5zdGF0dXMsCiAgICBpc05ldzogY2FzZVVzZXJBY3Rpb25zLmZpbHRlcihmdW5jdGlvbiAoY3VhKSB7CiAgICAgIHJldHVybiBjdWEuYWN0aW9uID09PSAncHVzaC10by1zZXJ2aWNlJzsKICAgIH0pLmxlbmd0aCA9PT0gMCwKICAgIHVwZGF0ZUNhc2U6IGhhbmRsZVVwZGF0ZUNhc2UsCiAgICB1c2VyQ2FuQ3J1ZDogdXNlckNhbkNydWQKICB9KSwKICAgICAgcHVzaEJ1dHRvbiA9IF91c2VQdXNoVG9TZXJ2aWNlLnB1c2hCdXR0b24sCiAgICAgIHB1c2hDYWxsb3V0cyA9IF91c2VQdXNoVG9TZXJ2aWNlLnB1c2hDYWxsb3V0czsKCiAgdmFyIG9uU3VibWl0VGFncyA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uIChuZXdUYWdzKSB7CiAgICByZXR1cm4gb25VcGRhdGVGaWVsZCgndGFncycsIG5ld1RhZ3MpOwogIH0sIFtvblVwZGF0ZUZpZWxkXSk7CiAgdmFyIG9uU3VibWl0VGl0bGUgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAobmV3VGl0bGUpIHsKICAgIHJldHVybiBvblVwZGF0ZUZpZWxkKCd0aXRsZScsIG5ld1RpdGxlKTsKICB9LCBbb25VcGRhdGVGaWVsZF0pOwogIHZhciB0b2dnbGVTdGF0dXNDYXNlID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKGUpIHsKICAgIHJldHVybiBvblVwZGF0ZUZpZWxkKCdzdGF0dXMnLCBlLnRhcmdldC5jaGVja2VkID8gJ2Nsb3NlZCcgOiAnb3BlbicpOwogIH0sIFtvblVwZGF0ZUZpZWxkXSk7CiAgdmFyIGhhbmRsZVJlZnJlc2ggPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAoKSB7CiAgICBmZXRjaENhc2VVc2VyQWN0aW9ucyhjYXNlRGF0YS5pZCk7CiAgICBmZXRjaENhc2UoKTsKICB9LCBbY2FzZURhdGEuaWQsIGZldGNoQ2FzZSwgZmV0Y2hDYXNlVXNlckFjdGlvbnNdKTsKICB2YXIgc3B5U3RhdGUgPSAoMCwgX3JlYWN0LnVzZU1lbW8pKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIGNhc2VUaXRsZTogY2FzZURhdGEudGl0bGUKICAgIH07CiAgfSwgW2Nhc2VEYXRhLnRpdGxlXSk7CiAgdmFyIGNhc2VTdGF0dXNEYXRhID0gKDAsIF9yZWFjdC51c2VNZW1vKShmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2Nhc2VEYXRhJGNsb3NlZEF0OwoKICAgIHJldHVybiBjYXNlRGF0YS5zdGF0dXMgPT09ICdvcGVuJyA/IHsKICAgICAgJ2RhdGEtdGVzdC1zdWJqJzogJ2Nhc2Utdmlldy1jcmVhdGVkQXQnLAogICAgICB2YWx1ZTogY2FzZURhdGEuY3JlYXRlZEF0LAogICAgICB0aXRsZTogaTE4bi5DQVNFX09QRU5FRCwKICAgICAgYnV0dG9uTGFiZWw6IGkxOG4uQ0xPU0VfQ0FTRSwKICAgICAgc3RhdHVzOiBjYXNlRGF0YS5zdGF0dXMsCiAgICAgIGljb246ICdmb2xkZXJDaGVjaycsCiAgICAgIGJhZGdlQ29sb3I6ICdzZWNvbmRhcnknLAogICAgICBpc1NlbGVjdGVkOiBmYWxzZQogICAgfSA6IHsKICAgICAgJ2RhdGEtdGVzdC1zdWJqJzogJ2Nhc2Utdmlldy1jbG9zZWRBdCcsCiAgICAgIHZhbHVlOiAoX2Nhc2VEYXRhJGNsb3NlZEF0ID0gY2FzZURhdGEuY2xvc2VkQXQpICE9PSBudWxsICYmIF9jYXNlRGF0YSRjbG9zZWRBdCAhPT0gdm9pZCAwID8gX2Nhc2VEYXRhJGNsb3NlZEF0IDogJycsCiAgICAgIHRpdGxlOiBpMThuLkNBU0VfQ0xPU0VELAogICAgICBidXR0b25MYWJlbDogaTE4bi5SRU9QRU5fQ0FTRSwKICAgICAgc3RhdHVzOiBjYXNlRGF0YS5zdGF0dXMsCiAgICAgIGljb246ICdmb2xkZXJFeGNsYW1hdGlvbicsCiAgICAgIGJhZGdlQ29sb3I6ICdkYW5nZXInLAogICAgICBpc1NlbGVjdGVkOiB0cnVlCiAgICB9OwogIH0sIFtjYXNlRGF0YS5jbG9zZWRBdCwgY2FzZURhdGEuY3JlYXRlZEF0LCBjYXNlRGF0YS5zdGF0dXNdKTsKICB2YXIgZW1haWxDb250ZW50ID0gKDAsIF9yZWFjdC51c2VNZW1vKShmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBzdWJqZWN0OiBpMThuLkVNQUlMX1NVQkpFQ1QoY2FzZURhdGEudGl0bGUpLAogICAgICBib2R5OiBpMThuLkVNQUlMX0JPRFkoY2FzZUxpbmspCiAgICB9OwogIH0sIFtjYXNlTGluaywgY2FzZURhdGEudGl0bGVdKTsKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgaWYgKGluaXRMb2FkaW5nRGF0YSAmJiAhaXNMb2FkaW5nVXNlckFjdGlvbnMpIHsKICAgICAgc2V0SW5pdExvYWRpbmdEYXRhKGZhbHNlKTsKICAgIH0KICB9LCBbaW5pdExvYWRpbmdEYXRhLCBpc0xvYWRpbmdVc2VyQWN0aW9uc10pOwogIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5kZWZhdWx0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KE15V3JhcHBlciwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfaGVhZGVyX3BhZ2UuSGVhZGVyUGFnZSwgewogICAgYmFja09wdGlvbnM6IHsKICAgICAgaHJlZjogKDAsIF9saW5rX3RvLmdldENhc2VVcmwpKHNlYXJjaCksCiAgICAgIHRleHQ6IGkxOG4uQkFDS19UT19BTEwKICAgIH0sCiAgICAiZGF0YS10ZXN0LXN1YmoiOiAiY2FzZS12aWV3LXRpdGxlIiwKICAgIHRpdGxlTm9kZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZWRpdGFibGVfdGl0bGUuRWRpdGFibGVUaXRsZSwgewogICAgICBkaXNhYmxlZDogIXVzZXJDYW5DcnVkLAogICAgICBpc0xvYWRpbmc6IGlzTG9hZGluZyAmJiB1cGRhdGVLZXkgPT09ICd0aXRsZScsCiAgICAgIHRpdGxlOiBjYXNlRGF0YS50aXRsZSwKICAgICAgb25TdWJtaXQ6IG9uU3VibWl0VGl0bGUKICAgIH0pLAogICAgdGl0bGU6IGNhc2VEYXRhLnRpdGxlCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY2FzZV9zdGF0dXMuQ2FzZVN0YXR1cywgX2V4dGVuZHMoewogICAgY2FzZURhdGE6IGNhc2VEYXRhLAogICAgZGlzYWJsZWQ6ICF1c2VyQ2FuQ3J1ZCwKICAgIGlzTG9hZGluZzogaXNMb2FkaW5nICYmIHVwZGF0ZUtleSA9PT0gJ3N0YXR1cycsCiAgICBvblJlZnJlc2g6IGhhbmRsZVJlZnJlc2gsCiAgICB0b2dnbGVTdGF0dXNDYXNlOiB0b2dnbGVTdGF0dXNDYXNlCiAgfSwgY2FzZVN0YXR1c0RhdGEpKSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF93cmFwcGVycy5XaGl0ZVBhZ2VXcmFwcGVyLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KE15V3JhcHBlciwgbnVsbCwgcHVzaENhbGxvdXRzICE9IG51bGwgJiYgcHVzaENhbGxvdXRzLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgIGdyb3c6IDYKICB9LCBpbml0TG9hZGluZ0RhdGEgJiYgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUxvYWRpbmdDb250ZW50LCB7CiAgICBsaW5lczogOAogIH0pLCAhaW5pdExvYWRpbmdEYXRhICYmIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LmRlZmF1bHQuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3VzZXJfYWN0aW9uX3RyZWUuVXNlckFjdGlvblRyZWUsIHsKICAgIGNhc2VVc2VyQWN0aW9uczogY2FzZVVzZXJBY3Rpb25zLAogICAgZGF0YTogY2FzZURhdGEsCiAgICBmZXRjaFVzZXJBY3Rpb25zOiBmZXRjaENhc2VVc2VyQWN0aW9ucy5iaW5kKG51bGwsIGNhc2VEYXRhLmlkKSwKICAgIGZpcnN0SW5kZXhQdXNoVG9TZXJ2aWNlOiBmaXJzdEluZGV4UHVzaFRvU2VydmljZSwKICAgIGlzTG9hZGluZ0Rlc2NyaXB0aW9uOiBpc0xvYWRpbmcgJiYgdXBkYXRlS2V5ID09PSAnZGVzY3JpcHRpb24nLAogICAgaXNMb2FkaW5nVXNlckFjdGlvbnM6IGlzTG9hZGluZ1VzZXJBY3Rpb25zLAogICAgbGFzdEluZGV4UHVzaFRvU2VydmljZTogbGFzdEluZGV4UHVzaFRvU2VydmljZSwKICAgIG9uVXBkYXRlRmllbGQ6IG9uVXBkYXRlRmllbGQsCiAgICB1cGRhdGVDYXNlOiB1cGRhdGVDYXNlLAogICAgdXNlckNhbkNydWQ6IHVzZXJDYW5DcnVkCiAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoTXlFdWlIb3Jpem9udGFsUnVsZSwgewogICAgbWFyZ2luOiAicyIKICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgYWxpZ25JdGVtczogImNlbnRlciIsCiAgICBndXR0ZXJTaXplOiAicyIsCiAgICBqdXN0aWZ5Q29udGVudDogImZsZXhFbmQiCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICBncm93OiBmYWxzZQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b25Ub2dnbGUsIHsKICAgICJkYXRhLXRlc3Qtc3ViaiI6IGNhc2VTdGF0dXNEYXRhWydkYXRhLXRlc3Qtc3ViaiddLAogICAgaWNvblR5cGU6IGNhc2VTdGF0dXNEYXRhLmljb24sCiAgICBpc0Rpc2FibGVkOiAhdXNlckNhbkNydWQsCiAgICBpc1NlbGVjdGVkOiBjYXNlU3RhdHVzRGF0YS5pc1NlbGVjdGVkLAogICAgaXNMb2FkaW5nOiBpc0xvYWRpbmcgJiYgdXBkYXRlS2V5ID09PSAnc3RhdHVzJywKICAgIGxhYmVsOiBjYXNlU3RhdHVzRGF0YS5idXR0b25MYWJlbCwKICAgIG9uQ2hhbmdlOiB0b2dnbGVTdGF0dXNDYXNlCiAgfSkpLCBoYXNEYXRhVG9QdXNoICYmIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgZ3JvdzogZmFsc2UKICB9LCBwdXNoQnV0dG9uKSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICBncm93OiAyCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfdXNlcl9saXN0LlVzZXJMaXN0LCB7CiAgICAiZGF0YS10ZXN0LXN1YmoiOiAiY2FzZS12aWV3LXVzZXItbGlzdC1yZXBvcnRlciIsCiAgICBlbWFpbDogZW1haWxDb250ZW50LAogICAgaGVhZGxpbmU6IGkxOG4uUkVQT1JURVIsCiAgICB1c2VyczogW2Nhc2VEYXRhLmNyZWF0ZWRCeV0KICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfdXNlcl9saXN0LlVzZXJMaXN0LCB7CiAgICAiZGF0YS10ZXN0LXN1YmoiOiAiY2FzZS12aWV3LXVzZXItbGlzdC1wYXJ0aWNpcGFudHMiLAogICAgZW1haWw6IGVtYWlsQ29udGVudCwKICAgIGhlYWRsaW5lOiBpMThuLlBBUlRJQ0lQQU5UUywKICAgIGxvYWRpbmc6IGlzTG9hZGluZ1VzZXJBY3Rpb25zLAogICAgdXNlcnM6IHBhcnRpY2lwYW50cwogIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF90YWdfbGlzdC5UYWdMaXN0LCB7CiAgICAiZGF0YS10ZXN0LXN1YmoiOiAiY2FzZS12aWV3LXRhZy1saXN0IiwKICAgIGRpc2FibGVkOiAhdXNlckNhbkNydWQsCiAgICB0YWdzOiBjYXNlRGF0YS50YWdzLAogICAgb25TdWJtaXQ6IG9uU3VibWl0VGFncywKICAgIGlzTG9hZGluZzogaXNMb2FkaW5nICYmIHVwZGF0ZUtleSA9PT0gJ3RhZ3MnCiAgfSkpKSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9zcHlfcm91dGVzLlNweVJvdXRlLCB7CiAgICBzdGF0ZTogc3B5U3RhdGUKICB9KSk7Cn0pOwoKZXhwb3J0cy5DYXNlQ29tcG9uZW50ID0gQ2FzZUNvbXBvbmVudDsKCnZhciBDYXNlVmlldyA9IF9yZWFjdC5kZWZhdWx0Lm1lbW8oZnVuY3Rpb24gKF9yZWYyKSB7CiAgdmFyIGNhc2VJZCA9IF9yZWYyLmNhc2VJZCwKICAgICAgdXNlckNhbkNydWQgPSBfcmVmMi51c2VyQ2FuQ3J1ZDsKCiAgdmFyIF91c2VHZXRDYXNlID0gKDAsIF91c2VfZ2V0X2Nhc2UudXNlR2V0Q2FzZSkoY2FzZUlkKSwKICAgICAgZGF0YSA9IF91c2VHZXRDYXNlLmRhdGEsCiAgICAgIGlzTG9hZGluZyA9IF91c2VHZXRDYXNlLmlzTG9hZGluZywKICAgICAgaXNFcnJvciA9IF91c2VHZXRDYXNlLmlzRXJyb3IsCiAgICAgIGZldGNoQ2FzZSA9IF91c2VHZXRDYXNlLmZldGNoQ2FzZSwKICAgICAgdXBkYXRlQ2FzZSA9IF91c2VHZXRDYXNlLnVwZGF0ZUNhc2U7CgogIGlmIChpc0Vycm9yKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIGlmIChpc0xvYWRpbmcpIHsKICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KE15RXVpRmxleEdyb3VwLCB7CiAgICAgIGp1c3RpZnlDb250ZW50OiAiY2VudGVyIiwKICAgICAgYWxpZ25JdGVtczogImNlbnRlciIKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICBncm93OiBmYWxzZQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUxvYWRpbmdTcGlubmVyLCB7CiAgICAgIHNpemU6ICJ4bCIKICAgIH0pKSk7CiAgfQoKICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChDYXNlQ29tcG9uZW50LCB7CiAgICBjYXNlSWQ6IGNhc2VJZCwKICAgIGZldGNoQ2FzZTogZmV0Y2hDYXNlLAogICAgY2FzZURhdGE6IGRhdGEsCiAgICB1cGRhdGVDYXNlOiB1cGRhdGVDYXNlLAogICAgdXNlckNhbkNydWQ6IHVzZXJDYW5DcnVkCiAgfSk7Cn0pOwoKZXhwb3J0cy5DYXNlVmlldyA9IENhc2VWaWV3OwpDYXNlQ29tcG9uZW50LmRpc3BsYXlOYW1lID0gJ0Nhc2VDb21wb25lbnQnOwpDYXNlVmlldy5kaXNwbGF5TmFtZSA9ICdDYXNlVmlldyc7"},null]}