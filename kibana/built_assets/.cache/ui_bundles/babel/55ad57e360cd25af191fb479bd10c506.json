{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/lens/public/indexpattern_datasource/operations/definitions/date_histogram.js","dependencies":[{"path":"x-pack/legacy/plugins/lens/public/indexpattern_datasource/operations/definitions/date_histogram.js","mtime":1589249552320},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRhdGVIaXN0b2dyYW1PcGVyYXRpb24gPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9yZWFjdDIgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX3N0YXRlX2hlbHBlcnMgPSByZXF1aXJlKCIuLi8uLi9zdGF0ZV9oZWxwZXJzIik7Cgp2YXIgX3B1YmxpYyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9wbHVnaW5zL2RhdGEvcHVibGljIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIGlzVmFsaWRJbnRlcnZhbCA9IF9wdWJsaWMuc2VhcmNoLmFnZ3MuaXNWYWxpZEludGVydmFsOwp2YXIgYXV0b0ludGVydmFsID0gJ2F1dG8nOwp2YXIgY2FsZW5kYXJPbmx5SW50ZXJ2YWxzID0gbmV3IFNldChbJ3cnLCAnTScsICdxJywgJ3knXSk7CnZhciBkYXRlSGlzdG9ncmFtT3BlcmF0aW9uID0gewogIHR5cGU6ICdkYXRlX2hpc3RvZ3JhbScsCiAgZGlzcGxheU5hbWU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5sZW5zLmluZGV4UGF0dGVybi5kYXRlSGlzdG9ncmFtJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdEYXRlIGhpc3RvZ3JhbScKICB9KSwKICBnZXRQb3NzaWJsZU9wZXJhdGlvbkZvckZpZWxkOiBmdW5jdGlvbiBnZXRQb3NzaWJsZU9wZXJhdGlvbkZvckZpZWxkKF9yZWYpIHsKICAgIHZhciBhZ2dyZWdhdGlvblJlc3RyaWN0aW9ucyA9IF9yZWYuYWdncmVnYXRpb25SZXN0cmljdGlvbnMsCiAgICAgICAgYWdncmVnYXRhYmxlID0gX3JlZi5hZ2dyZWdhdGFibGUsCiAgICAgICAgdHlwZSA9IF9yZWYudHlwZTsKCiAgICBpZiAodHlwZSA9PT0gJ2RhdGUnICYmIGFnZ3JlZ2F0YWJsZSAmJiAoIWFnZ3JlZ2F0aW9uUmVzdHJpY3Rpb25zIHx8IGFnZ3JlZ2F0aW9uUmVzdHJpY3Rpb25zLmRhdGVfaGlzdG9ncmFtKSkgewogICAgICByZXR1cm4gewogICAgICAgIGRhdGFUeXBlOiAnZGF0ZScsCiAgICAgICAgaXNCdWNrZXRlZDogdHJ1ZSwKICAgICAgICBzY2FsZTogJ2ludGVydmFsJwogICAgICB9OwogICAgfQogIH0sCiAgYnVpbGRDb2x1bW46IGZ1bmN0aW9uIGJ1aWxkQ29sdW1uKF9yZWYyKSB7CiAgICB2YXIgc3VnZ2VzdGVkUHJpb3JpdHkgPSBfcmVmMi5zdWdnZXN0ZWRQcmlvcml0eSwKICAgICAgICBmaWVsZCA9IF9yZWYyLmZpZWxkOwogICAgdmFyIGludGVydmFsID0gYXV0b0ludGVydmFsOwogICAgdmFyIHRpbWVab25lOwoKICAgIGlmIChmaWVsZC5hZ2dyZWdhdGlvblJlc3RyaWN0aW9ucyAmJiBmaWVsZC5hZ2dyZWdhdGlvblJlc3RyaWN0aW9ucy5kYXRlX2hpc3RvZ3JhbSkgewogICAgICBpbnRlcnZhbCA9IHJlc3RyaWN0ZWRJbnRlcnZhbChmaWVsZC5hZ2dyZWdhdGlvblJlc3RyaWN0aW9ucyk7CiAgICAgIHRpbWVab25lID0gZmllbGQuYWdncmVnYXRpb25SZXN0cmljdGlvbnMuZGF0ZV9oaXN0b2dyYW0udGltZV96b25lOwogICAgfQoKICAgIHJldHVybiB7CiAgICAgIGxhYmVsOiBmaWVsZC5uYW1lLAogICAgICBkYXRhVHlwZTogJ2RhdGUnLAogICAgICBvcGVyYXRpb25UeXBlOiAnZGF0ZV9oaXN0b2dyYW0nLAogICAgICBzdWdnZXN0ZWRQcmlvcml0eTogc3VnZ2VzdGVkUHJpb3JpdHksCiAgICAgIHNvdXJjZUZpZWxkOiBmaWVsZC5uYW1lLAogICAgICBpc0J1Y2tldGVkOiB0cnVlLAogICAgICBzY2FsZTogJ2ludGVydmFsJywKICAgICAgcGFyYW1zOiB7CiAgICAgICAgaW50ZXJ2YWw6IGludGVydmFsLAogICAgICAgIHRpbWVab25lOiB0aW1lWm9uZQogICAgICB9CiAgICB9OwogIH0sCiAgaXNUcmFuc2ZlcmFibGU6IGZ1bmN0aW9uIGlzVHJhbnNmZXJhYmxlKGNvbHVtbiwgbmV3SW5kZXhQYXR0ZXJuKSB7CiAgICB2YXIgbmV3RmllbGQgPSBuZXdJbmRleFBhdHRlcm4uZmllbGRzLmZpbmQoZnVuY3Rpb24gKGZpZWxkKSB7CiAgICAgIHJldHVybiBmaWVsZC5uYW1lID09PSBjb2x1bW4uc291cmNlRmllbGQ7CiAgICB9KTsKICAgIHJldHVybiBCb29sZWFuKG5ld0ZpZWxkICYmIG5ld0ZpZWxkLnR5cGUgPT09ICdkYXRlJyAmJiBuZXdGaWVsZC5hZ2dyZWdhdGFibGUgJiYgKCFuZXdGaWVsZC5hZ2dyZWdhdGlvblJlc3RyaWN0aW9ucyB8fCBuZXdGaWVsZC5hZ2dyZWdhdGlvblJlc3RyaWN0aW9ucy5kYXRlX2hpc3RvZ3JhbSkpOwogIH0sCiAgdHJhbnNmZXI6IGZ1bmN0aW9uIHRyYW5zZmVyKGNvbHVtbiwgbmV3SW5kZXhQYXR0ZXJuKSB7CiAgICB2YXIgbmV3RmllbGQgPSBuZXdJbmRleFBhdHRlcm4uZmllbGRzLmZpbmQoZnVuY3Rpb24gKGZpZWxkKSB7CiAgICAgIHJldHVybiBmaWVsZC5uYW1lID09PSBjb2x1bW4uc291cmNlRmllbGQ7CiAgICB9KTsKCiAgICBpZiAobmV3RmllbGQgJiYgbmV3RmllbGQuYWdncmVnYXRpb25SZXN0cmljdGlvbnMgJiYgbmV3RmllbGQuYWdncmVnYXRpb25SZXN0cmljdGlvbnMuZGF0ZV9oaXN0b2dyYW0pIHsKICAgICAgdmFyIHJlc3RyaWN0aW9ucyA9IG5ld0ZpZWxkLmFnZ3JlZ2F0aW9uUmVzdHJpY3Rpb25zLmRhdGVfaGlzdG9ncmFtOwogICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgY29sdW1uLCB7CiAgICAgICAgcGFyYW1zOiBfb2JqZWN0U3ByZWFkKHt9LCBjb2x1bW4ucGFyYW1zLCB7CiAgICAgICAgICB0aW1lWm9uZTogcmVzdHJpY3Rpb25zLnRpbWVfem9uZSwKICAgICAgICAgIC8vIFRPRE8gdGhpcyByZXdyaXRlIGxvZ2ljIGlzIHNpbXBsaWZpZWQgLSBpZiB0aGUgY3VycmVudCBpbnRlcnZhbCBpcyBhIG11bHRpcGxlIG9mCiAgICAgICAgICAvLyB0aGUgcmVzdHJpY3RlZCBpbnRlcnZhbCwgd2UgY291bGQgY2FycnkgaXQgb3ZlciBkaXJlY3RseS4gSG93ZXZlciBhcyB0aGUgY3VycmVudAogICAgICAgICAgLy8gVUkgZG9lcyBub3QgYWxsb3cgdG8gc2VsZWN0IG11bHRpcGxlcyBvZiBhbiBpbnRlcnZhbCBhbnl3YXksIHRoaXMgaXMgbm90IGluY2x1ZGVkIHlldC4KICAgICAgICAgIC8vIElmIHRoZSBVSSBhbGxvd3MgdG8gcGljayBtb3JlIGNvbXBsaWNhdGVkIGludGVydmFscywgdGhpcyBzaG91bGQgYmUgcmUtdmlzaXRlZC4KICAgICAgICAgIGludGVydmFsOiByZXN0cmljdGVkSW50ZXJ2YWwobmV3RmllbGQuYWdncmVnYXRpb25SZXN0cmljdGlvbnMpCiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9CgogICAgcmV0dXJuIGNvbHVtbjsKICB9LAogIG9uRmllbGRDaGFuZ2U6IGZ1bmN0aW9uIG9uRmllbGRDaGFuZ2Uob2xkQ29sdW1uLCBpbmRleFBhdHRlcm4sIGZpZWxkKSB7CiAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgb2xkQ29sdW1uLCB7CiAgICAgIGxhYmVsOiBmaWVsZC5uYW1lLAogICAgICBzb3VyY2VGaWVsZDogZmllbGQubmFtZQogICAgfSk7CiAgfSwKICB0b0VzQWdnc0NvbmZpZzogZnVuY3Rpb24gdG9Fc0FnZ3NDb25maWcoY29sdW1uLCBjb2x1bW5JZCkgewogICAgcmV0dXJuIHsKICAgICAgaWQ6IGNvbHVtbklkLAogICAgICBlbmFibGVkOiB0cnVlLAogICAgICB0eXBlOiAnZGF0ZV9oaXN0b2dyYW0nLAogICAgICBzY2hlbWE6ICdzZWdtZW50JywKICAgICAgcGFyYW1zOiB7CiAgICAgICAgZmllbGQ6IGNvbHVtbi5zb3VyY2VGaWVsZCwKICAgICAgICB0aW1lX3pvbmU6IGNvbHVtbi5wYXJhbXMudGltZVpvbmUsCiAgICAgICAgdXNlTm9ybWFsaXplZEVzSW50ZXJ2YWw6IHRydWUsCiAgICAgICAgaW50ZXJ2YWw6IGNvbHVtbi5wYXJhbXMuaW50ZXJ2YWwsCiAgICAgICAgZHJvcF9wYXJ0aWFsczogZmFsc2UsCiAgICAgICAgbWluX2RvY19jb3VudDogMCwKICAgICAgICBleHRlbmRlZF9ib3VuZHM6IHt9CiAgICAgIH0KICAgIH07CiAgfSwKICBwYXJhbUVkaXRvcjogZnVuY3Rpb24gcGFyYW1FZGl0b3IoX3JlZjMpIHsKICAgIHZhciBzdGF0ZSA9IF9yZWYzLnN0YXRlLAogICAgICAgIHNldFN0YXRlID0gX3JlZjMuc2V0U3RhdGUsCiAgICAgICAgY3VycmVudENvbHVtbiA9IF9yZWYzLmN1cnJlbnRDb2x1bW4sCiAgICAgICAgbGF5ZXJJZCA9IF9yZWYzLmxheWVySWQsCiAgICAgICAgZGF0ZVJhbmdlID0gX3JlZjMuZGF0ZVJhbmdlLAogICAgICAgIGRhdGEgPSBfcmVmMy5kYXRhOwogICAgdmFyIGZpZWxkID0gY3VycmVudENvbHVtbiAmJiBzdGF0ZS5pbmRleFBhdHRlcm5zW3N0YXRlLmxheWVyc1tsYXllcklkXS5pbmRleFBhdHRlcm5JZF0uZmllbGRzLmZpbmQoZnVuY3Rpb24gKGN1cnJlbnRGaWVsZCkgewogICAgICByZXR1cm4gY3VycmVudEZpZWxkLm5hbWUgPT09IGN1cnJlbnRDb2x1bW4uc291cmNlRmllbGQ7CiAgICB9KTsKICAgIHZhciBpbnRlcnZhbElzUmVzdHJpY3RlZCA9IGZpZWxkLmFnZ3JlZ2F0aW9uUmVzdHJpY3Rpb25zICYmIGZpZWxkLmFnZ3JlZ2F0aW9uUmVzdHJpY3Rpb25zLmRhdGVfaGlzdG9ncmFtOwogICAgdmFyIGludGVydmFsID0gcGFyc2VJbnRlcnZhbChjdXJyZW50Q29sdW1uLnBhcmFtcy5pbnRlcnZhbCk7IC8vIFdlIGZvcmNlIHRoZSBpbnRlcnZhbCB2YWx1ZSB0byAxIGlmIGl0J3MgZW1wdHksIHNpbmNlIHRoYXQgaXMgdGhlIEVTIGJlaGF2aW9yLAogICAgLy8gYW5kIHRoZSBpc1ZhbGlkSW50ZXJ2YWwgZnVuY3Rpb24gZG9lc24ndCBoYW5kbGUgdGhlIGVtcHR5IGNhc2UgcHJvcGVybHkuIEZpeGluZwogICAgLy8gaXNWYWxpZEludGVydmFsIGludm9sdmVzIGJyZWFraW5nIGNoYW5nZXMgaW4gb3RoZXIgYXJlYXMuCgogICAgdmFyIGlzVmFsaWQgPSBpc1ZhbGlkSW50ZXJ2YWwoIiIuY29uY2F0KGludGVydmFsLnZhbHVlID09PSAnJyA/ICcxJyA6IGludGVydmFsLnZhbHVlKS5jb25jYXQoaW50ZXJ2YWwudW5pdCksIHJlc3RyaWN0ZWRJbnRlcnZhbChmaWVsZC5hZ2dyZWdhdGlvblJlc3RyaWN0aW9ucykpOwoKICAgIGZ1bmN0aW9uIG9uQ2hhbmdlQXV0b0ludGVydmFsKGV2KSB7CiAgICAgIHZhciBmcm9tRGF0ZSA9IGRhdGVSYW5nZS5mcm9tRGF0ZSwKICAgICAgICAgIHRvRGF0ZSA9IGRhdGVSYW5nZS50b0RhdGU7CiAgICAgIHZhciB2YWx1ZSA9IGV2LnRhcmdldC5jaGVja2VkID8gZGF0YS5zZWFyY2guYWdncy5jYWxjdWxhdGVBdXRvVGltZUV4cHJlc3Npb24oewogICAgICAgIGZyb206IGZyb21EYXRlLAogICAgICAgIHRvOiB0b0RhdGUKICAgICAgfSkgfHwgJzFoJyA6IGF1dG9JbnRlcnZhbDsKICAgICAgc2V0U3RhdGUoKDAsIF9zdGF0ZV9oZWxwZXJzLnVwZGF0ZUNvbHVtblBhcmFtKSh7CiAgICAgICAgc3RhdGU6IHN0YXRlLAogICAgICAgIGxheWVySWQ6IGxheWVySWQsCiAgICAgICAgY3VycmVudENvbHVtbjogY3VycmVudENvbHVtbiwKICAgICAgICBwYXJhbU5hbWU6ICdpbnRlcnZhbCcsCiAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgIH0pKTsKICAgIH0KCiAgICB2YXIgc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbiBzZXRJbnRlcnZhbChuZXdJbnRlcnZhbCkgewogICAgICB2YXIgaXNDYWxlbmRhckludGVydmFsID0gY2FsZW5kYXJPbmx5SW50ZXJ2YWxzLmhhcyhuZXdJbnRlcnZhbC51bml0KTsKICAgICAgdmFyIHZhbHVlID0gIiIuY29uY2F0KGlzQ2FsZW5kYXJJbnRlcnZhbCA/ICcxJyA6IG5ld0ludGVydmFsLnZhbHVlKS5jb25jYXQobmV3SW50ZXJ2YWwudW5pdCB8fCAnZCcpOwogICAgICBzZXRTdGF0ZSgoMCwgX3N0YXRlX2hlbHBlcnMudXBkYXRlQ29sdW1uUGFyYW0pKHsKICAgICAgICBzdGF0ZTogc3RhdGUsCiAgICAgICAgbGF5ZXJJZDogbGF5ZXJJZCwKICAgICAgICBjdXJyZW50Q29sdW1uOiBjdXJyZW50Q29sdW1uLAogICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICBwYXJhbU5hbWU6ICdpbnRlcnZhbCcKICAgICAgfSkpOwogICAgfTsKCiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm0sIG51bGwsICFpbnRlcnZhbElzUmVzdHJpY3RlZCAmJiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVN3aXRjaCwgewogICAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMuaW5kZXhQYXR0ZXJuLmRhdGVIaXN0b2dyYW0uYXV0b0ludGVydmFsJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ3VzdG9taXplIHRpbWUgaW50ZXJ2YWwnCiAgICAgIH0pLAogICAgICBjaGVja2VkOiBjdXJyZW50Q29sdW1uLnBhcmFtcy5pbnRlcnZhbCAhPT0gYXV0b0ludGVydmFsLAogICAgICBvbkNoYW5nZTogb25DaGFuZ2VBdXRvSW50ZXJ2YWwKICAgIH0pKSwgY3VycmVudENvbHVtbi5wYXJhbXMuaW50ZXJ2YWwgIT09IGF1dG9JbnRlcnZhbCAmJiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMuaW5kZXhQYXR0ZXJuLmRhdGVIaXN0b2dyYW0ubWluaW11bUludGVydmFsJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTWluaW11bSBpbnRlcnZhbCcKICAgICAgfSkKICAgIH0sIGludGVydmFsSXNSZXN0cmljdGVkID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgaWQ6ICJ4cGFjay5sZW5zLmluZGV4UGF0dGVybi5kYXRlSGlzdG9ncmFtLnJlc3RyaWN0ZWRJbnRlcnZhbCIsCiAgICAgIGRlZmF1bHRNZXNzYWdlOiAiSW50ZXJ2YWwgZml4ZWQgdG8ge2ludGVydmFsVmFsdWV9IGR1ZSB0byBhZ2dyZWdhdGlvbiByZXN0cmljdGlvbnMuIiwKICAgICAgdmFsdWVzOiB7CiAgICAgICAgaW50ZXJ2YWxWYWx1ZTogY3VycmVudENvbHVtbi5wYXJhbXMuaW50ZXJ2YWwKICAgICAgfQogICAgfSkgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5kZWZhdWx0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGaWVsZE51bWJlciwgewogICAgICAiZGF0YS10ZXN0LXN1YmoiOiAibGVuc0RhdGVIaXN0b2dyYW1WYWx1ZSIsCiAgICAgIHZhbHVlOiB0eXBlb2YgaW50ZXJ2YWwudmFsdWUgPT09ICdudW1iZXInIHx8IGludGVydmFsLnZhbHVlID09PSAnJyA/IGludGVydmFsLnZhbHVlIDogcGFyc2VJbnQoaW50ZXJ2YWwudmFsdWUsIDEwKSwKICAgICAgZGlzYWJsZWQ6IGNhbGVuZGFyT25seUludGVydmFscy5oYXMoaW50ZXJ2YWwudW5pdCksCiAgICAgIGlzSW52YWxpZDogIWlzVmFsaWQsCiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7CiAgICAgICAgc2V0SW50ZXJ2YWwoX29iamVjdFNwcmVhZCh7fSwgaW50ZXJ2YWwsIHsKICAgICAgICAgIHZhbHVlOiBlLnRhcmdldC52YWx1ZQogICAgICAgIH0pKTsKICAgICAgfQogICAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTZWxlY3QsIHsKICAgICAgImRhdGEtdGVzdC1zdWJqIjogImxlbnNEYXRlSGlzdG9ncmFtVW5pdCIsCiAgICAgIHZhbHVlOiBpbnRlcnZhbC51bml0LAogICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICAgIHNldEludGVydmFsKF9vYmplY3RTcHJlYWQoe30sIGludGVydmFsLCB7CiAgICAgICAgICB1bml0OiBlLnRhcmdldC52YWx1ZQogICAgICAgIH0pKTsKICAgICAgfSwKICAgICAgaXNJbnZhbGlkOiAhaXNWYWxpZCwKICAgICAgb3B0aW9uczogW3sKICAgICAgICB2YWx1ZTogJ21zJywKICAgICAgICB0ZXh0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subGVucy5pbmRleFBhdHRlcm4uZGF0ZUhpc3RvZ3JhbS5taWxsaXNlY29uZHMnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ21pbGxpc2Vjb25kcycKICAgICAgICB9KQogICAgICB9LCB7CiAgICAgICAgdmFsdWU6ICdzJywKICAgICAgICB0ZXh0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subGVucy5pbmRleFBhdHRlcm4uZGF0ZUhpc3RvZ3JhbS5zZWNvbmRzJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdzZWNvbmRzJwogICAgICAgIH0pCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogJ20nLAogICAgICAgIHRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5sZW5zLmluZGV4UGF0dGVybi5kYXRlSGlzdG9ncmFtLm1pbnV0ZXMnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ21pbnV0ZXMnCiAgICAgICAgfSkKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAnaCcsCiAgICAgICAgdGV4dDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMuaW5kZXhQYXR0ZXJuLmRhdGVIaXN0b2dyYW0uaG91cnMnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ2hvdXJzJwogICAgICAgIH0pCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogJ2QnLAogICAgICAgIHRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5sZW5zLmluZGV4UGF0dGVybi5kYXRlSGlzdG9ncmFtLmRheXMnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ2RheXMnCiAgICAgICAgfSkKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAndycsCiAgICAgICAgdGV4dDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMuaW5kZXhQYXR0ZXJuLmRhdGVIaXN0b2dyYW0ud2VlaycsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnd2VlaycKICAgICAgICB9KQogICAgICB9LCB7CiAgICAgICAgdmFsdWU6ICdNJywKICAgICAgICB0ZXh0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subGVucy5pbmRleFBhdHRlcm4uZGF0ZUhpc3RvZ3JhbS5tb250aCcsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnbW9udGgnCiAgICAgICAgfSkKICAgICAgfSwgLy8gUXVhcnRlcmx5IGludGVydmFscyBhcHBlYXIgdG8gYmUgdW5zdXBwb3J0ZWQgYnkgZXNhZ2dzCiAgICAgIHsKICAgICAgICB2YWx1ZTogJ3knLAogICAgICAgIHRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5sZW5zLmluZGV4UGF0dGVybi5kYXRlSGlzdG9ncmFtLnllYXInLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ3llYXInCiAgICAgICAgfSkKICAgICAgfV0KICAgIH0pKSksICFpc1ZhbGlkICYmIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LmRlZmF1bHQuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgICAgc2l6ZTogInMiCiAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRleHRDb2xvciwgewogICAgICBjb2xvcjogImRhbmdlciIsCiAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJsZW5zRGF0ZUhpc3RvZ3JhbUVycm9yIgogICAgfSwgX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMuaW5kZXhQYXR0ZXJuLmludmFsaWRJbnRlcnZhbCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdJbnZhbGlkIGludGVydmFsIHZhbHVlJwogICAgfSkpKSkpKTsKICB9Cn07CmV4cG9ydHMuZGF0ZUhpc3RvZ3JhbU9wZXJhdGlvbiA9IGRhdGVIaXN0b2dyYW1PcGVyYXRpb247CgpmdW5jdGlvbiBwYXJzZUludGVydmFsKGN1cnJlbnRJbnRlcnZhbCkgewogIHZhciBpbnRlcnZhbCA9IGN1cnJlbnRJbnRlcnZhbCB8fCAnJzsKICB2YXIgdmFsdWVNYXRjaCA9IGludGVydmFsLm1hdGNoKC9bXGRdKy8pIHx8IFtdOwogIHZhciB1bml0TWF0Y2ggPSBpbnRlcnZhbC5tYXRjaCgvW1xEXSsvKSB8fCBbXTsKICB2YXIgcmVzdWx0ID0gcGFyc2VJbnQodmFsdWVNYXRjaFswXSB8fCAnJywgMTApOwogIHJldHVybiB7CiAgICB2YWx1ZTogaXNOYU4ocmVzdWx0KSA/ICcnIDogcmVzdWx0LAogICAgdW5pdDogdW5pdE1hdGNoWzBdIHx8ICdoJwogIH07Cn0KCmZ1bmN0aW9uIHJlc3RyaWN0ZWRJbnRlcnZhbChhZ2dyZWdhdGlvblJlc3RyaWN0aW9ucykgewogIGlmICghYWdncmVnYXRpb25SZXN0cmljdGlvbnMgfHwgIWFnZ3JlZ2F0aW9uUmVzdHJpY3Rpb25zLmRhdGVfaGlzdG9ncmFtKSB7CiAgICByZXR1cm47CiAgfQoKICByZXR1cm4gYWdncmVnYXRpb25SZXN0cmljdGlvbnMuZGF0ZV9oaXN0b2dyYW0uY2FsZW5kYXJfaW50ZXJ2YWwgfHwgYWdncmVnYXRpb25SZXN0cmljdGlvbnMuZGF0ZV9oaXN0b2dyYW0uZml4ZWRfaW50ZXJ2YWw7Cn0="},null]}