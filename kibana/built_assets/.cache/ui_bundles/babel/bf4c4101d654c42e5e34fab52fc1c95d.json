{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/maps/public/layers/sources/es_term_source.js","dependencies":[{"path":"x-pack/legacy/plugins/maps/public/layers/sources/es_term_source.js","mtime":1589249552440},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmV4dHJhY3RQcm9wZXJ0aWVzTWFwID0gZXh0cmFjdFByb3BlcnRpZXNNYXA7CmV4cG9ydHMuRVNUZXJtU291cmNlID0gdm9pZCAwOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuLi8uLi8uLi9jb21tb24vY29uc3RhbnRzIik7Cgp2YXIgX2VzX2RvY19maWVsZCA9IHJlcXVpcmUoIi4uL2ZpZWxkcy9lc19kb2NfZmllbGQiKTsKCnZhciBfZXNfYWdnX3NvdXJjZSA9IHJlcXVpcmUoIi4vZXNfYWdnX3NvdXJjZSIpOwoKdmFyIF9lc19hZ2dfdXRpbHMgPSByZXF1aXJlKCIuLi91dGlsL2VzX2FnZ191dGlscyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfQoKZnVuY3Rpb24gX29iamVjdERlc3RydWN0dXJpbmdFbXB0eShvYmopIHsgaWYgKG9iaiA9PSBudWxsKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgZGVzdHJ1Y3R1cmUgdW5kZWZpbmVkIik7IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7IH0gfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIHNlbGYgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7IGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7IH0gZnVuY3Rpb24gX3Rocm93KGVycikgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7IH0gX25leHQodW5kZWZpbmVkKTsgfSk7IH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ICE9PSAidW5kZWZpbmVkIiAmJiBSZWZsZWN0LmdldCkgeyBfZ2V0ID0gUmVmbGVjdC5nZXQ7IH0gZWxzZSB7IF9nZXQgPSBmdW5jdGlvbiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyKSB7IHZhciBiYXNlID0gX3N1cGVyUHJvcEJhc2UodGFyZ2V0LCBwcm9wZXJ0eSk7IGlmICghYmFzZSkgcmV0dXJuOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYmFzZSwgcHJvcGVydHkpOyBpZiAoZGVzYy5nZXQpIHsgcmV0dXJuIGRlc2MuZ2V0LmNhbGwocmVjZWl2ZXIpOyB9IHJldHVybiBkZXNjLnZhbHVlOyB9OyB9IHJldHVybiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyIHx8IHRhcmdldCk7IH0KCmZ1bmN0aW9uIF9zdXBlclByb3BCYXNlKG9iamVjdCwgcHJvcGVydHkpIHsgd2hpbGUgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkpIHsgb2JqZWN0ID0gX2dldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChvYmplY3QgPT09IG51bGwpIGJyZWFrOyB9IHJldHVybiBvYmplY3Q7IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKdmFyIFRFUk1TX0FHR19OQU1FID0gJ2pvaW4nOwp2YXIgRklFTERfTkFNRV9QUkVGSVggPSAnX19rYm5qb2luX18nOwp2YXIgR1JPVVBfQllfREVMSU1JVEVSID0gJ19ncm91cGJ5Xyc7CnZhciBURVJNU19CVUNLRVRfS0VZU19UT19JR05PUkUgPSBbJ2tleScsICdkb2NfY291bnQnXTsKCmZ1bmN0aW9uIGV4dHJhY3RQcm9wZXJ0aWVzTWFwKHJhd0VzRGF0YSwgY291bnRQcm9wZXJ0eU5hbWUpIHsKICB2YXIgcHJvcGVydGllc01hcCA9IG5ldyBNYXAoKTsKCiAgX2xvZGFzaC5kZWZhdWx0LmdldChyYXdFc0RhdGEsIFsnYWdncmVnYXRpb25zJywgVEVSTVNfQUdHX05BTUUsICdidWNrZXRzJ10sIFtdKS5mb3JFYWNoKGZ1bmN0aW9uICh0ZXJtQnVja2V0KSB7CiAgICB2YXIgcHJvcGVydGllcyA9ICgwLCBfZXNfYWdnX3V0aWxzLmV4dHJhY3RQcm9wZXJ0aWVzRnJvbUJ1Y2tldCkodGVybUJ1Y2tldCwgVEVSTVNfQlVDS0VUX0tFWVNfVE9fSUdOT1JFKTsKCiAgICBpZiAoY291bnRQcm9wZXJ0eU5hbWUpIHsKICAgICAgcHJvcGVydGllc1tjb3VudFByb3BlcnR5TmFtZV0gPSB0ZXJtQnVja2V0LmRvY19jb3VudDsKICAgIH0KCiAgICBwcm9wZXJ0aWVzTWFwLnNldCh0ZXJtQnVja2V0LmtleS50b1N0cmluZygpLCBwcm9wZXJ0aWVzKTsKICB9KTsKCiAgcmV0dXJuIHByb3BlcnRpZXNNYXA7Cn0KCnZhciBFU1Rlcm1Tb3VyY2UgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfQWJzdHJhY3RFU0FnZ1NvdXJjZSkgewogIF9pbmhlcml0cyhFU1Rlcm1Tb3VyY2UsIF9BYnN0cmFjdEVTQWdnU291cmNlKTsKCiAgZnVuY3Rpb24gRVNUZXJtU291cmNlKGRlc2NyaXB0b3IsIGluc3BlY3RvckFkYXB0ZXJzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEVTVGVybVNvdXJjZSk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoRVNUZXJtU291cmNlKS5jYWxsKHRoaXMsIGRlc2NyaXB0b3IsIGluc3BlY3RvckFkYXB0ZXJzKSk7CiAgICBfdGhpcy5fdGVybUZpZWxkID0gbmV3IF9lc19kb2NfZmllbGQuRVNEb2NGaWVsZCh7CiAgICAgIGZpZWxkTmFtZTogZGVzY3JpcHRvci50ZXJtLAogICAgICBzb3VyY2U6IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLAogICAgICBvcmlnaW46IF90aGlzLmdldE9yaWdpbkZvckZpZWxkKCkKICAgIH0pOwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEVTVGVybVNvdXJjZSwgW3sKICAgIGtleTogImhhc0NvbXBsZXRlQ29uZmlnIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNDb21wbGV0ZUNvbmZpZygpIHsKICAgICAgcmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5oYXModGhpcy5fZGVzY3JpcHRvciwgJ2luZGV4UGF0dGVybklkJykgJiYgX2xvZGFzaC5kZWZhdWx0Lmhhcyh0aGlzLl9kZXNjcmlwdG9yLCAndGVybScpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFRlcm1GaWVsZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGVybUZpZWxkKCkgewogICAgICByZXR1cm4gdGhpcy5fdGVybUZpZWxkOwogICAgfQogIH0sIHsKICAgIGtleTogImdldE9yaWdpbkZvckZpZWxkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPcmlnaW5Gb3JGaWVsZCgpIHsKICAgICAgcmV0dXJuIF9jb25zdGFudHMuRklFTERfT1JJR0lOLkpPSU47CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0V2hlcmVRdWVyeSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0V2hlcmVRdWVyeSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2Rlc2NyaXB0b3Iud2hlcmVRdWVyeTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRBZ2dLZXkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFnZ0tleShhZ2dUeXBlLCBmaWVsZE5hbWUpIHsKICAgICAgdmFyIG1ldHJpY0tleSA9IGFnZ1R5cGUgIT09IF9jb25zdGFudHMuQUdHX1RZUEUuQ09VTlQgPyAiIi5jb25jYXQoYWdnVHlwZSkuY29uY2F0KF9lc19hZ2dfc291cmNlLkFHR19ERUxJTUlURVIpLmNvbmNhdChmaWVsZE5hbWUpIDogYWdnVHlwZTsKICAgICAgcmV0dXJuICIiLmNvbmNhdChGSUVMRF9OQU1FX1BSRUZJWCkuY29uY2F0KG1ldHJpY0tleSkuY29uY2F0KEdST1VQX0JZX0RFTElNSVRFUikuY29uY2F0KHRoaXMuX2Rlc2NyaXB0b3IuaW5kZXhQYXR0ZXJuVGl0bGUsICIuIikuY29uY2F0KHRoaXMuX3Rlcm1GaWVsZC5nZXROYW1lKCkpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEFnZ0xhYmVsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBZ2dMYWJlbChhZ2dUeXBlLCBmaWVsZE5hbWUpIHsKICAgICAgcmV0dXJuIGFnZ1R5cGUgPT09IF9jb25zdGFudHMuQUdHX1RZUEUuQ09VTlQgPyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWFwcy5zb3VyY2UuZXNKb2luLmNvdW50TGFiZWwnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDb3VudCBvZiB7aW5kZXhQYXR0ZXJuVGl0bGV9IiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGluZGV4UGF0dGVyblRpdGxlOiB0aGlzLl9kZXNjcmlwdG9yLmluZGV4UGF0dGVyblRpdGxlCiAgICAgICAgfQogICAgICB9KSA6IF9nZXQoX2dldFByb3RvdHlwZU9mKEVTVGVybVNvdXJjZS5wcm90b3R5cGUpLCAiZ2V0QWdnTGFiZWwiLCB0aGlzKS5jYWxsKHRoaXMsIGFnZ1R5cGUsIGZpZWxkTmFtZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0UHJvcGVydGllc01hcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldFByb3BlcnRpZXNNYXAgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHNlYXJjaEZpbHRlcnMsIGxlZnRTb3VyY2VOYW1lLCBsZWZ0RmllbGROYW1lLCByZWdpc3RlckNhbmNlbENhbGxiYWNrKSB7CiAgICAgICAgdmFyIGluZGV4UGF0dGVybiwgc2VhcmNoU291cmNlLCB0ZXJtc0ZpZWxkLCB0ZXJtc0FnZywgcmF3RXNEYXRhLCBjb3VudFByb3BlcnR5TmFtZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXNDb21wbGV0ZUNvbmZpZygpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBbXSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SW5kZXhQYXR0ZXJuKCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGluZGV4UGF0dGVybiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1ha2VTZWFyY2hTb3VyY2Uoc2VhcmNoRmlsdGVycywgMCk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIHNlYXJjaFNvdXJjZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICB0ZXJtc0ZpZWxkID0gKDAsIF9lc19hZ2dfdXRpbHMuZ2V0RmllbGQpKGluZGV4UGF0dGVybiwgdGhpcy5fdGVybUZpZWxkLmdldE5hbWUoKSk7CiAgICAgICAgICAgICAgICB0ZXJtc0FnZyA9IHsKICAgICAgICAgICAgICAgICAgc2l6ZTogX2NvbnN0YW50cy5ERUZBVUxUX01BWF9CVUNLRVRTX0xJTUlUCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgc2VhcmNoU291cmNlLnNldEZpZWxkKCdhZ2dzJywgX2RlZmluZVByb3BlcnR5KHt9LCBURVJNU19BR0dfTkFNRSwgewogICAgICAgICAgICAgICAgICB0ZXJtczogKDAsIF9lc19hZ2dfdXRpbHMuYWRkRmllbGRUb0RTTCkodGVybXNBZ2csIHRlcm1zRmllbGQpLAogICAgICAgICAgICAgICAgICBhZ2dzOiBfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLmdldFZhbHVlQWdnc0RzbChpbmRleFBhdHRlcm4pKQogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3J1bkVzUXVlcnkoewogICAgICAgICAgICAgICAgICByZXF1ZXN0SWQ6IHRoaXMuZ2V0SWQoKSwKICAgICAgICAgICAgICAgICAgcmVxdWVzdE5hbWU6ICIiLmNvbmNhdCh0aGlzLl9kZXNjcmlwdG9yLmluZGV4UGF0dGVyblRpdGxlLCAiLiIpLmNvbmNhdCh0aGlzLl90ZXJtRmllbGQuZ2V0TmFtZSgpKSwKICAgICAgICAgICAgICAgICAgc2VhcmNoU291cmNlOiBzZWFyY2hTb3VyY2UsCiAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyQ2FuY2VsQ2FsbGJhY2s6IHJlZ2lzdGVyQ2FuY2VsQ2FsbGJhY2ssCiAgICAgICAgICAgICAgICAgIHJlcXVlc3REZXNjcmlwdGlvbjogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1hcHMuc291cmNlLmVzSm9pbi5qb2luRGVzY3JpcHRpb24nLCB7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFbGFzdGljc2VhcmNoIHRlcm1zIGFnZ3JlZ2F0aW9uIHJlcXVlc3QsIGxlZnQgc291cmNlOiB7bGVmdFNvdXJjZX0sIHJpZ2h0IHNvdXJjZToge3JpZ2h0U291cmNlfSIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgICAgICAgICBsZWZ0U291cmNlOiAiIi5jb25jYXQobGVmdFNvdXJjZU5hbWUsICI6IikuY29uY2F0KGxlZnRGaWVsZE5hbWUpLAogICAgICAgICAgICAgICAgICAgICAgcmlnaHRTb3VyY2U6ICIiLmNvbmNhdCh0aGlzLl9kZXNjcmlwdG9yLmluZGV4UGF0dGVyblRpdGxlLCAiOiIpLmNvbmNhdCh0aGlzLl90ZXJtRmllbGQuZ2V0TmFtZSgpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgcmF3RXNEYXRhID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGNvdW50UHJvcGVydHlOYW1lID0gdGhpcy5nZXRBZ2dLZXkoX2NvbnN0YW50cy5BR0dfVFlQRS5DT1VOVCk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXNNYXA6IGV4dHJhY3RQcm9wZXJ0aWVzTWFwKHJhd0VzRGF0YSwgY291bnRQcm9wZXJ0eU5hbWUpCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRQcm9wZXJ0aWVzTWFwKF94LCBfeDIsIF94MywgX3g0KSB7CiAgICAgICAgcmV0dXJuIF9nZXRQcm9wZXJ0aWVzTWFwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRQcm9wZXJ0aWVzTWFwOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiaXNGaWx0ZXJCeU1hcEJvdW5kcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNGaWx0ZXJCeU1hcEJvdW5kcygpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogImdldERpc3BsYXlOYW1lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0RGlzcGxheU5hbWUgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsICJlc190YWJsZSAiLmNvbmNhdCh0aGlzLmdldEluZGV4UGF0dGVybklkKCkpKTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0RGlzcGxheU5hbWUoKSB7CiAgICAgICAgcmV0dXJuIF9nZXREaXNwbGF5TmFtZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0RGlzcGxheU5hbWU7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJmaWx0ZXJBbmRGb3JtYXRQcm9wZXJ0aWVzVG9IdG1sIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZmlsdGVyQW5kRm9ybWF0UHJvcGVydGllc1RvSHRtbCA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKHByb3BlcnRpZXMpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyQW5kRm9ybWF0UHJvcGVydGllc1RvSHRtbEZvck1ldHJpY0ZpZWxkcyhwcm9wZXJ0aWVzKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0My5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZmlsdGVyQW5kRm9ybWF0UHJvcGVydGllc1RvSHRtbChfeDUpIHsKICAgICAgICByZXR1cm4gX2ZpbHRlckFuZEZvcm1hdFByb3BlcnRpZXNUb0h0bWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZpbHRlckFuZEZvcm1hdFByb3BlcnRpZXNUb0h0bWw7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJnZXRGaWVsZE5hbWVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGaWVsZE5hbWVzKCkgewogICAgICByZXR1cm4gdGhpcy5nZXRNZXRyaWNGaWVsZHMoKS5tYXAoZnVuY3Rpb24gKGVzQWdnTWV0cmljRmllbGQpIHsKICAgICAgICByZXR1cm4gZXNBZ2dNZXRyaWNGaWVsZC5nZXROYW1lKCk7CiAgICAgIH0pOwogICAgfQogIH1dLCBbewogICAga2V5OiAicmVuZGVyRWRpdG9yIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJFZGl0b3IoX3JlZikgewogICAgICBfb2JqZWN0RGVzdHJ1Y3R1cmluZ0VtcHR5KF9yZWYpOwoKICAgICAgLy9ubyBuZWVkIHRvIGxvY2FsaXplLiB0aGlzIGVkaXRvciBpcyBuZXZlciByZW5kZXJlZC4KICAgICAgcmV0dXJuICI8ZGl2PmVkaXRvciBkZXRhaWxzPC9kaXY+IjsKICAgIH0KICB9XSk7CgogIHJldHVybiBFU1Rlcm1Tb3VyY2U7Cn0oX2VzX2FnZ19zb3VyY2UuQWJzdHJhY3RFU0FnZ1NvdXJjZSk7CgpleHBvcnRzLkVTVGVybVNvdXJjZSA9IEVTVGVybVNvdXJjZTsKCl9kZWZpbmVQcm9wZXJ0eShFU1Rlcm1Tb3VyY2UsICJ0eXBlIiwgJ0VTX1RFUk1fU09VUkNFJyk7"},null]}