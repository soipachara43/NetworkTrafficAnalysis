{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/components/ml_popover/api.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/components/ml_popover/api.js","mtime":1589249553040},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmdldEpvYnNTdW1tYXJ5ID0gZXhwb3J0cy5zdG9wRGF0YWZlZWRzID0gZXhwb3J0cy5zdGFydERhdGFmZWVkcyA9IGV4cG9ydHMuc2V0dXBNbEpvYiA9IGV4cG9ydHMuZ2V0TW9kdWxlcyA9IGV4cG9ydHMuY2hlY2tSZWNvZ25pemVyID0gdm9pZCAwOwoKdmFyIF90aHJvd19pZl9ub3Rfb2sgPSByZXF1aXJlKCIuLi9tbC9hcGkvdGhyb3dfaWZfbm90X29rIik7Cgp2YXIgX2tpYmFuYSA9IHJlcXVpcmUoIi4uLy4uL2xpYi9raWJhbmEiKTsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7CiAgdHJ5IHsKICAgIHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsKICAgIHZhciB2YWx1ZSA9IGluZm8udmFsdWU7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIHJlamVjdChlcnJvcik7CiAgICByZXR1cm47CiAgfQoKICBpZiAoaW5mby5kb25lKSB7CiAgICByZXNvbHZlKHZhbHVlKTsKICB9IGVsc2UgewogICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOwogIH0KfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgdmFyIHNlbGYgPSB0aGlzLAogICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7CgogICAgICBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgewogICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsKICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7CiAgICAgIH0KCiAgICAgIF9uZXh0KHVuZGVmaW5lZCk7CiAgICB9KTsKICB9Owp9Ci8qKgogKiBDaGVja3MgdGhlIE1MIFJlY29nbml6ZXIgQVBJIHRvIHNlZSBpZiBhIGdpdmVuIGluZGV4UGF0dGVybiBoYXMgYW55IGNvbXBhdGlibGUgbW9kdWxlcwogKgogKiBAcGFyYW0gaW5kZXhQYXR0ZXJuTmFtZSBFUyBpbmRleCBwYXR0ZXJuIHRvIGNoZWNrIGZvciBjb21wYXRpYmxlIG1vZHVsZXMKICogQHBhcmFtIHNpZ25hbCB0byBjYW5jZWwgcmVxdWVzdAogKgogKiBAdGhyb3dzIEFuIGVycm9yIGlmIHJlc3BvbnNlIGlzIG5vdCBPSwogKi8KCgp2YXIgY2hlY2tSZWNvZ25pemVyID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShfcmVmMikgewogICAgdmFyIGluZGV4UGF0dGVybk5hbWUsIHNpZ25hbDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgaW5kZXhQYXR0ZXJuTmFtZSA9IF9yZWYyLmluZGV4UGF0dGVybk5hbWUsIHNpZ25hbCA9IF9yZWYyLnNpZ25hbDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX2tpYmFuYS5LaWJhbmFTZXJ2aWNlcy5nZXQoKS5odHRwLmZldGNoKCIvYXBpL21sL21vZHVsZXMvcmVjb2duaXplLyIuY29uY2F0KGluZGV4UGF0dGVybk5hbWUpLCB7CiAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgICBhc1N5c3RlbVJlcXVlc3Q6IHRydWUsCiAgICAgICAgICAgICAgc2lnbmFsOiBzaWduYWwKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBjaGVja1JlY29nbml6ZXIoX3gpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOwovKioKICogUmV0dXJucyBNTCBNb2R1bGUgZm9yIGdpdmVuIG1vZHVsZUlkLiBSZXR1cm5zIGFsbCBtb2R1bGVzIGlmIG5vIG1vZHVsZUlkIHNwZWNpZmllZAogKgogKiBAcGFyYW0gbW9kdWxlSWQgaWQgb2YgdGhlIG1vZHVsZSB0byByZXRyaWV2ZQogKiBAcGFyYW0gc2lnbmFsIHRvIGNhbmNlbCByZXF1ZXN0CiAqCiAqIEB0aHJvd3MgQW4gZXJyb3IgaWYgcmVzcG9uc2UgaXMgbm90IE9LCiAqLwoKCmV4cG9ydHMuY2hlY2tSZWNvZ25pemVyID0gY2hlY2tSZWNvZ25pemVyOwoKdmFyIGdldE1vZHVsZXMgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjMgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoX3JlZjQpIHsKICAgIHZhciBfcmVmNCRtb2R1bGVJZCwgbW9kdWxlSWQsIHNpZ25hbDsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfcmVmNCRtb2R1bGVJZCA9IF9yZWY0Lm1vZHVsZUlkLCBtb2R1bGVJZCA9IF9yZWY0JG1vZHVsZUlkID09PSB2b2lkIDAgPyAnJyA6IF9yZWY0JG1vZHVsZUlkLCBzaWduYWwgPSBfcmVmNC5zaWduYWw7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfa2liYW5hLktpYmFuYVNlcnZpY2VzLmdldCgpLmh0dHAuZmV0Y2goIi9hcGkvbWwvbW9kdWxlcy9nZXRfbW9kdWxlLyIuY29uY2F0KG1vZHVsZUlkKSwgewogICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgICAgICAgYXNTeXN0ZW1SZXF1ZXN0OiB0cnVlLAogICAgICAgICAgICAgIHNpZ25hbDogc2lnbmFsCiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUyKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBnZXRNb2R1bGVzKF94MikgewogICAgcmV0dXJuIF9yZWYzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOwovKioKICogQ3JlYXRlcyBNTCBKb2JzICsgRGF0YWZlZWRzIGZvciB0aGUgZ2l2ZW4gY29uZmlnVGVtcGxhdGUgKyBpbmRleFBhdHRlcm5OYW1lCiAqCiAqIEBwYXJhbSBjb25maWdUZW1wbGF0ZSAtIG5hbWUgb2YgY29uZmlnVGVtcGxhdGUgdG8gc2V0dXAKICogQHBhcmFtIGluZGV4UGF0dGVybk5hbWUgLSBkZWZhdWx0IGluZGV4IHBhdHRlcm4gY29uZmlnVGVtcGxhdGUgc2hvdWxkIGJlIGluc3RhbGxlZCB3aXRoCiAqIEBwYXJhbSBqb2JJZEVycm9yRmlsdGVyIC0gaWYgcHJvdmlkZWQsIGZpbHRlcnMgYWxsIGVycm9ycyBleGNlcHQgZm9yIGdpdmVuIGpvYklkcwogKiBAcGFyYW0gZ3JvdXBzIC0gbGlzdCBvZiBncm91cHMgdG8gYWRkIHRvIGpvYnMgYmVpbmcgaW5zdGFsbGVkCiAqIEBwYXJhbSBwcmVmaXggLSBwcmVmaXggdG8gYmUgYWRkZWQgdG8gam9iIG5hbWUKICoKICogQHRocm93cyBBbiBlcnJvciBpZiByZXNwb25zZSBpcyBub3QgT0sKICovCgoKZXhwb3J0cy5nZXRNb2R1bGVzID0gZ2V0TW9kdWxlczsKCnZhciBzZXR1cE1sSm9iID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWY1ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKF9yZWY2KSB7CiAgICB2YXIgY29uZmlnVGVtcGxhdGUsIF9yZWY2JGluZGV4UGF0dGVybk5hbSwgaW5kZXhQYXR0ZXJuTmFtZSwgX3JlZjYkam9iSWRFcnJvckZpbHRlLCBqb2JJZEVycm9yRmlsdGVyLCBfcmVmNiRncm91cHMsIGdyb3VwcywgX3JlZjYkcHJlZml4LCBwcmVmaXgsIHJlc3BvbnNlOwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGNvbmZpZ1RlbXBsYXRlID0gX3JlZjYuY29uZmlnVGVtcGxhdGUsIF9yZWY2JGluZGV4UGF0dGVybk5hbSA9IF9yZWY2LmluZGV4UGF0dGVybk5hbWUsIGluZGV4UGF0dGVybk5hbWUgPSBfcmVmNiRpbmRleFBhdHRlcm5OYW0gPT09IHZvaWQgMCA/ICdhdWRpdGJlYXQtKicgOiBfcmVmNiRpbmRleFBhdHRlcm5OYW0sIF9yZWY2JGpvYklkRXJyb3JGaWx0ZSA9IF9yZWY2LmpvYklkRXJyb3JGaWx0ZXIsIGpvYklkRXJyb3JGaWx0ZXIgPSBfcmVmNiRqb2JJZEVycm9yRmlsdGUgPT09IHZvaWQgMCA/IFtdIDogX3JlZjYkam9iSWRFcnJvckZpbHRlLCBfcmVmNiRncm91cHMgPSBfcmVmNi5ncm91cHMsIGdyb3VwcyA9IF9yZWY2JGdyb3VwcyA9PT0gdm9pZCAwID8gWydzaWVtJ10gOiBfcmVmNiRncm91cHMsIF9yZWY2JHByZWZpeCA9IF9yZWY2LnByZWZpeCwgcHJlZml4ID0gX3JlZjYkcHJlZml4ID09PSB2b2lkIDAgPyAnJyA6IF9yZWY2JHByZWZpeDsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gX2tpYmFuYS5LaWJhbmFTZXJ2aWNlcy5nZXQoKS5odHRwLmZldGNoKCIvYXBpL21sL21vZHVsZXMvc2V0dXAvIi5jb25jYXQoY29uZmlnVGVtcGxhdGUpLCB7CiAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgcHJlZml4OiBwcmVmaXgsCiAgICAgICAgICAgICAgICBncm91cHM6IGdyb3VwcywKICAgICAgICAgICAgICAgIGluZGV4UGF0dGVybk5hbWU6IGluZGV4UGF0dGVybk5hbWUsCiAgICAgICAgICAgICAgICBzdGFydERhdGFmZWVkOiBmYWxzZSwKICAgICAgICAgICAgICAgIHVzZURlZGljYXRlZEluZGV4OiB0cnVlCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgYXNTeXN0ZW1SZXF1ZXN0OiB0cnVlCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgKDAsIF90aHJvd19pZl9ub3Rfb2sudGhyb3dJZkVycm9yQXR0YWNoZWRUb1NldHVwKShyZXNwb25zZSwgam9iSWRFcnJvckZpbHRlcik7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMyk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gc2V0dXBNbEpvYihfeDMpIHsKICAgIHJldHVybiBfcmVmNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKLyoqCiAqIFN0YXJ0cyB0aGUgZ2l2ZW4gZGF0YUZlZWRJZHMKICoKICogQHBhcmFtIGRhdGFmZWVkSWRzCiAqIEBwYXJhbSBzdGFydAogKgogKiBAdGhyb3dzIEFuIGVycm9yIGlmIHJlc3BvbnNlIGlzIG5vdCBPSwogKi8KCgpleHBvcnRzLnNldHVwTWxKb2IgPSBzZXR1cE1sSm9iOwoKdmFyIHN0YXJ0RGF0YWZlZWRzID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWY3ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KF9yZWY4KSB7CiAgICB2YXIgZGF0YWZlZWRJZHMsIF9yZWY4JHN0YXJ0LCBzdGFydCwgcmVzcG9uc2U7CgogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgZGF0YWZlZWRJZHMgPSBfcmVmOC5kYXRhZmVlZElkcywgX3JlZjgkc3RhcnQgPSBfcmVmOC5zdGFydCwgc3RhcnQgPSBfcmVmOCRzdGFydCA9PT0gdm9pZCAwID8gMCA6IF9yZWY4JHN0YXJ0OwogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBfa2liYW5hLktpYmFuYVNlcnZpY2VzLmdldCgpLmh0dHAuZmV0Y2goJy9hcGkvbWwvam9icy9mb3JjZV9zdGFydF9kYXRhZmVlZHMnLCB7CiAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgICAgICBkYXRhZmVlZElkczogZGF0YWZlZWRJZHMKICAgICAgICAgICAgICB9LCBzdGFydCAhPT0gMCAmJiB7CiAgICAgICAgICAgICAgICBzdGFydDogc3RhcnQKICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgYXNTeXN0ZW1SZXF1ZXN0OiB0cnVlCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgKDAsIF90aHJvd19pZl9ub3Rfb2sudGhyb3dJZkVycm9yQXR0YWNoZWQpKHJlc3BvbnNlLCBkYXRhZmVlZElkcyk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNCk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gc3RhcnREYXRhZmVlZHMoX3g0KSB7CiAgICByZXR1cm4gX3JlZjcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7Ci8qKgogKiBTdG9wcyB0aGUgZ2l2ZW4gZGF0YUZlZWRJZHMgYW5kIHNldHMgdGhlIGNvcnJlc3BvbmRpbmcgSm9iJ3Mgam9iU3RhdGUgdG8gY2xvc2VkCiAqCiAqIEBwYXJhbSBkYXRhZmVlZElkcwogKgogKiBAdGhyb3dzIEFuIGVycm9yIGlmIHJlc3BvbnNlIGlzIG5vdCBPSwogKi8KCgpleHBvcnRzLnN0YXJ0RGF0YWZlZWRzID0gc3RhcnREYXRhZmVlZHM7Cgp2YXIgc3RvcERhdGFmZWVkcyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIHZhciBfcmVmOSA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNShfcmVmMTApIHsKICAgIHZhciBkYXRhZmVlZElkcywgc3RvcERhdGFmZWVkc1Jlc3BvbnNlLCBkYXRhZmVlZFByZWZpeCwgY2xvc2VKb2JzUmVzcG9uc2U7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBkYXRhZmVlZElkcyA9IF9yZWYxMC5kYXRhZmVlZElkczsKICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gX2tpYmFuYS5LaWJhbmFTZXJ2aWNlcy5nZXQoKS5odHRwLmZldGNoKCcvYXBpL21sL2pvYnMvc3RvcF9kYXRhZmVlZHMnLCB7CiAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgZGF0YWZlZWRJZHM6IGRhdGFmZWVkSWRzCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgYXNTeXN0ZW1SZXF1ZXN0OiB0cnVlCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgc3RvcERhdGFmZWVkc1Jlc3BvbnNlID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgIGRhdGFmZWVkUHJlZml4ID0gJ2RhdGFmZWVkLSc7CiAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNzsKICAgICAgICAgICAgcmV0dXJuIF9raWJhbmEuS2liYW5hU2VydmljZXMuZ2V0KCkuaHR0cC5mZXRjaCgnL2FwaS9tbC9qb2JzL2Nsb3NlX2pvYnMnLCB7CiAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgam9iSWRzOiBkYXRhZmVlZElkcy5tYXAoZnVuY3Rpb24gKGRhdGFGZWVkSWQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFGZWVkSWQuc3RhcnRzV2l0aChkYXRhZmVlZFByZWZpeCkgPyBkYXRhRmVlZElkLnN1YnN0cmluZyhkYXRhZmVlZFByZWZpeC5sZW5ndGgpIDogZGF0YUZlZWRJZDsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgYXNTeXN0ZW1SZXF1ZXN0OiB0cnVlCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgY2xvc2VKb2JzUmVzcG9uc2UgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIFtzdG9wRGF0YWZlZWRzUmVzcG9uc2UsIGNsb3NlSm9ic1Jlc3BvbnNlXSk7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gc3RvcERhdGFmZWVkcyhfeDUpIHsKICAgIHJldHVybiBfcmVmOS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKLyoqCiAqIEZldGNoZXMgYSBzdW1tYXJ5IG9mIGFsbCBNTCBqb2JzIGN1cnJlbnRseSBpbnN0YWxsZWQKICoKICogTk9URTogSWYgbm90IHNlbmRpbmcgam9iSWRzIGluIHRoZSBib2R5LCB5b3UgbXVzdCBhdCBsZWFzdCBzZW5kIGFuIGVtcHR5IGJvZHkgb3IgdGhlIHNlcnZlciB3aWxsCiAqIHJldHVybiBhIDUwMAogKgogKiBAcGFyYW0gc2lnbmFsIHRvIGNhbmNlbCByZXF1ZXN0CiAqCiAqIEB0aHJvd3MgQW4gZXJyb3IgaWYgcmVzcG9uc2UgaXMgbm90IE9LCiAqLwoKCmV4cG9ydHMuc3RvcERhdGFmZWVkcyA9IHN0b3BEYXRhZmVlZHM7Cgp2YXIgZ2V0Sm9ic1N1bW1hcnkgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjExID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KHNpZ25hbCkgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIsIF9raWJhbmEuS2liYW5hU2VydmljZXMuZ2V0KCkuaHR0cC5mZXRjaCgnL2FwaS9tbC9qb2JzL2pvYnNfc3VtbWFyeScsIHsKICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSksCiAgICAgICAgICAgICAgYXNTeXN0ZW1SZXF1ZXN0OiB0cnVlLAogICAgICAgICAgICAgIHNpZ25hbDogc2lnbmFsCiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU2KTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBnZXRKb2JzU3VtbWFyeShfeDYpIHsKICAgIHJldHVybiBfcmVmMTEuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7CgpleHBvcnRzLmdldEpvYnNTdW1tYXJ5ID0gZ2V0Sm9ic1N1bW1hcnk7"},null]}