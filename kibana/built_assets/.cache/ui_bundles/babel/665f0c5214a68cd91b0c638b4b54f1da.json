{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/plugins/es_ui_shared/static/forms/hook_form_lib/hooks/use_field.js","dependencies":[{"path":"src/plugins/es_ui_shared/static/forms/hook_form_lib/hooks/use_field.js","mtime":1589249550807},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgeyBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09ICJbb2JqZWN0IEFyZ3VtZW50c10iKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7IH0gfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIHNlbGYgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7IGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7IH0gZnVuY3Rpb24gX3Rocm93KGVycikgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7IH0gX25leHQodW5kZWZpbmVkKTsgfSk7IH07IH0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfQoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnVzZUZpZWxkID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IHJlcXVpcmUoInJlYWN0Iik7Cgp2YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uL2NvbnN0YW50cyIpOwovKgogKiBMaWNlbnNlZCB0byBFbGFzdGljc2VhcmNoIEIuVi4gdW5kZXIgb25lIG9yIG1vcmUgY29udHJpYnV0b3IKICogbGljZW5zZSBhZ3JlZW1lbnRzLiBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3RyaWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQKICogb3duZXJzaGlwLiBFbGFzdGljc2VhcmNoIEIuVi4gbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlcgogKiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heQogKiBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQogKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCgp2YXIgdXNlRmllbGQgPSBmdW5jdGlvbiB1c2VGaWVsZChmb3JtLCBwYXRoKSB7CiAgdmFyIGNvbmZpZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307CiAgdmFyIHZhbHVlQ2hhbmdlTGlzdGVuZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMyA/IGFyZ3VtZW50c1szXSA6IHVuZGVmaW5lZDsKICB2YXIgX2NvbmZpZyR0eXBlID0gY29uZmlnLnR5cGUsCiAgICAgIHR5cGUgPSBfY29uZmlnJHR5cGUgPT09IHZvaWQgMCA/IF9jb25zdGFudHMuRklFTERfVFlQRVMuVEVYVCA6IF9jb25maWckdHlwZSwKICAgICAgX2NvbmZpZyRkZWZhdWx0VmFsdWUgPSBjb25maWcuZGVmYXVsdFZhbHVlLAogICAgICBkZWZhdWx0VmFsdWUgPSBfY29uZmlnJGRlZmF1bHRWYWx1ZSA9PT0gdm9pZCAwID8gJycgOiBfY29uZmlnJGRlZmF1bHRWYWx1ZSwKICAgICAgX2NvbmZpZyRsYWJlbCA9IGNvbmZpZy5sYWJlbCwKICAgICAgbGFiZWwgPSBfY29uZmlnJGxhYmVsID09PSB2b2lkIDAgPyAnJyA6IF9jb25maWckbGFiZWwsCiAgICAgIF9jb25maWckbGFiZWxBcHBlbmQgPSBjb25maWcubGFiZWxBcHBlbmQsCiAgICAgIGxhYmVsQXBwZW5kID0gX2NvbmZpZyRsYWJlbEFwcGVuZCA9PT0gdm9pZCAwID8gJycgOiBfY29uZmlnJGxhYmVsQXBwZW5kLAogICAgICBfY29uZmlnJGhlbHBUZXh0ID0gY29uZmlnLmhlbHBUZXh0LAogICAgICBoZWxwVGV4dCA9IF9jb25maWckaGVscFRleHQgPT09IHZvaWQgMCA/ICcnIDogX2NvbmZpZyRoZWxwVGV4dCwKICAgICAgX2NvbmZpZyR2YWxpZGF0aW9ucyA9IGNvbmZpZy52YWxpZGF0aW9ucywKICAgICAgdmFsaWRhdGlvbnMgPSBfY29uZmlnJHZhbGlkYXRpb25zID09PSB2b2lkIDAgPyBbXSA6IF9jb25maWckdmFsaWRhdGlvbnMsCiAgICAgIF9jb25maWckZm9ybWF0dGVycyA9IGNvbmZpZy5mb3JtYXR0ZXJzLAogICAgICBmb3JtYXR0ZXJzID0gX2NvbmZpZyRmb3JtYXR0ZXJzID09PSB2b2lkIDAgPyBbXSA6IF9jb25maWckZm9ybWF0dGVycywKICAgICAgX2NvbmZpZyRmaWVsZHNUb1ZhbGlkID0gY29uZmlnLmZpZWxkc1RvVmFsaWRhdGVPbkNoYW5nZSwKICAgICAgZmllbGRzVG9WYWxpZGF0ZU9uQ2hhbmdlID0gX2NvbmZpZyRmaWVsZHNUb1ZhbGlkID09PSB2b2lkIDAgPyBbcGF0aF0gOiBfY29uZmlnJGZpZWxkc1RvVmFsaWQsCiAgICAgIF9jb25maWckZXJyb3JEaXNwbGF5RCA9IGNvbmZpZy5lcnJvckRpc3BsYXlEZWxheSwKICAgICAgZXJyb3JEaXNwbGF5RGVsYXkgPSBfY29uZmlnJGVycm9yRGlzcGxheUQgPT09IHZvaWQgMCA/IGZvcm0uX19vcHRpb25zLmVycm9yRGlzcGxheURlbGF5IDogX2NvbmZpZyRlcnJvckRpc3BsYXlELAogICAgICBfY29uZmlnJHNlcmlhbGl6ZXIgPSBjb25maWcuc2VyaWFsaXplciwKICAgICAgc2VyaWFsaXplciA9IF9jb25maWckc2VyaWFsaXplciA9PT0gdm9pZCAwID8gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICByZXR1cm4gdmFsdWU7CiAgfSA6IF9jb25maWckc2VyaWFsaXplciwKICAgICAgX2NvbmZpZyRkZXNlcmlhbGl6ZXIgPSBjb25maWcuZGVzZXJpYWxpemVyLAogICAgICBkZXNlcmlhbGl6ZXIgPSBfY29uZmlnJGRlc2VyaWFsaXplciA9PT0gdm9pZCAwID8gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICByZXR1cm4gdmFsdWU7CiAgfSA6IF9jb25maWckZGVzZXJpYWxpemVyOwogIHZhciBpbml0aWFsVmFsdWUgPSAoMCwgX3JlYWN0LnVzZU1lbW8pKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0eXBlb2YgZGVmYXVsdFZhbHVlID09PSAnZnVuY3Rpb24nID8gZGVzZXJpYWxpemVyKGRlZmF1bHRWYWx1ZSgpKSA6IGRlc2VyaWFsaXplcihkZWZhdWx0VmFsdWUpOwogIH0sIFtkZWZhdWx0VmFsdWVdKTsKCiAgdmFyIF9yZWYgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShpbml0aWFsVmFsdWUpLAogICAgICBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpLAogICAgICB2YWx1ZSA9IF9yZWYyWzBdLAogICAgICBzZXRTdGF0ZVZhbHVlID0gX3JlZjJbMV07CgogIHZhciBfcmVmMyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKFtdKSwKICAgICAgX3JlZjQgPSBfc2xpY2VkVG9BcnJheShfcmVmMywgMiksCiAgICAgIGVycm9ycyA9IF9yZWY0WzBdLAogICAgICBzZXRFcnJvcnMgPSBfcmVmNFsxXTsKCiAgdmFyIF9yZWY1ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkodHJ1ZSksCiAgICAgIF9yZWY2ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjUsIDIpLAogICAgICBpc1ByaXN0aW5lID0gX3JlZjZbMF0sCiAgICAgIHNldFByaXN0aW5lID0gX3JlZjZbMV07CgogIHZhciBfcmVmNyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGZhbHNlKSwKICAgICAgX3JlZjggPSBfc2xpY2VkVG9BcnJheShfcmVmNywgMiksCiAgICAgIGlzVmFsaWRhdGluZyA9IF9yZWY4WzBdLAogICAgICBzZXRWYWxpZGF0aW5nID0gX3JlZjhbMV07CgogIHZhciBfcmVmOSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGZhbHNlKSwKICAgICAgX3JlZjEwID0gX3NsaWNlZFRvQXJyYXkoX3JlZjksIDIpLAogICAgICBpc0NoYW5naW5nVmFsdWUgPSBfcmVmMTBbMF0sCiAgICAgIHNldElzQ2hhbmdpbmdWYWx1ZSA9IF9yZWYxMFsxXTsKCiAgdmFyIF9yZWYxMSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGZhbHNlKSwKICAgICAgX3JlZjEyID0gX3NsaWNlZFRvQXJyYXkoX3JlZjExLCAyKSwKICAgICAgaXNWYWxpZGF0ZWQgPSBfcmVmMTJbMF0sCiAgICAgIHNldElzVmFsaWRhdGVkID0gX3JlZjEyWzFdOwoKICB2YXIgdmFsaWRhdGVDb3VudGVyID0gKDAsIF9yZWFjdC51c2VSZWYpKDApOwogIHZhciBjaGFuZ2VDb3VudGVyID0gKDAsIF9yZWFjdC51c2VSZWYpKDApOwogIHZhciBpbmZsaWdodFZhbGlkYXRpb24gPSAoMCwgX3JlYWN0LnVzZVJlZikobnVsbCk7CiAgdmFyIGRlYm91bmNlVGltZW91dCA9ICgwLCBfcmVhY3QudXNlUmVmKShudWxsKTsKICB2YXIgaXNVbm1vdW50ZWQgPSAoMCwgX3JlYWN0LnVzZVJlZikoZmFsc2UpOyAvLyAtLSBIRUxQRVJTCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAvKioKICAgKiBGaWx0ZXIgYW4gYXJyYXkgb2YgZXJyb3JzIHdpdGggc3BlY2lmaWMgdmFsaWRhdGlvbiB0eXBlIG9uIHRoZW0KICAgKgogICAqIEBwYXJhbSBfZXJyb3JzIFRoZSBhcnJheSBvZiBlcnJvcnMgdG8gZmlsdGVyCiAgICogQHBhcmFtIHZhbGlkYXRpb25UeXBlIFRoZSB2YWxpZGF0aW9uIHR5cGUgdG8gZmlsdGVyIG91dAogICAqLwoKICB2YXIgZmlsdGVyRXJyb3JzID0gZnVuY3Rpb24gZmlsdGVyRXJyb3JzKF9lcnJvcnMpIHsKICAgIHZhciB2YWxpZGF0aW9uVHlwZVRvRmlsdGVyT3V0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBfY29uc3RhbnRzLlZBTElEQVRJT05fVFlQRVMuRklFTEQ7CiAgICB2YXIgdmFsaWRhdGlvblR5cGVUb0FycmF5ID0gQXJyYXkuaXNBcnJheSh2YWxpZGF0aW9uVHlwZVRvRmlsdGVyT3V0KSA/IHZhbGlkYXRpb25UeXBlVG9GaWx0ZXJPdXQgOiBbdmFsaWRhdGlvblR5cGVUb0ZpbHRlck91dF07CiAgICByZXR1cm4gX2Vycm9ycy5maWx0ZXIoZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIHJldHVybiB2YWxpZGF0aW9uVHlwZVRvQXJyYXkuZXZlcnkoZnVuY3Rpb24gKF90eXBlKSB7CiAgICAgICAgcmV0dXJuIGVycm9yLnZhbGlkYXRpb25UeXBlICE9PSBfdHlwZTsKICAgICAgfSk7CiAgICB9KTsKICB9OwoKICB2YXIgZm9ybWF0SW5wdXRWYWx1ZSA9IGZ1bmN0aW9uIGZvcm1hdElucHV0VmFsdWUoaW5wdXRWYWx1ZSkgewogICAgdmFyIGlzRW1wdHlTdHJpbmcgPSB0eXBlb2YgaW5wdXRWYWx1ZSA9PT0gJ3N0cmluZycgJiYgaW5wdXRWYWx1ZS50cmltKCkgPT09ICcnOwoKICAgIGlmIChpc0VtcHR5U3RyaW5nKSB7CiAgICAgIHJldHVybiBpbnB1dFZhbHVlOwogICAgfQoKICAgIHZhciBmb3JtRGF0YSA9IGZvcm0uZ2V0Rm9ybURhdGEoewogICAgICB1bmZsYXR0ZW46IGZhbHNlCiAgICB9KTsKICAgIHJldHVybiBmb3JtYXR0ZXJzLnJlZHVjZShmdW5jdGlvbiAob3V0cHV0LCBmb3JtYXR0ZXIpIHsKICAgICAgcmV0dXJuIGZvcm1hdHRlcihvdXRwdXQsIGZvcm1EYXRhKTsKICAgIH0sIGlucHV0VmFsdWUpOwogIH07CgogIHZhciBvblZhbHVlQ2hhbmdlID0KICAvKiNfX1BVUkVfXyovCiAgZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYxMyA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGNoYW5nZUl0ZXJhdGlvbiwgc3RhcnRUaW1lLCBuZXdWYWx1ZSwgZGVsdGE7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjaGFuZ2VJdGVyYXRpb24gPSArK2NoYW5nZUNvdW50ZXIuY3VycmVudDsKICAgICAgICAgICAgICBzdGFydFRpbWUgPSBEYXRlLm5vdygpOwoKICAgICAgICAgICAgICBpZiAoZGVib3VuY2VUaW1lb3V0LmN1cnJlbnQpIHsKICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChkZWJvdW5jZVRpbWVvdXQuY3VycmVudCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoZXJyb3JEaXNwbGF5RGVsYXkgPiAwKSB7CiAgICAgICAgICAgICAgICBzZXRJc0NoYW5naW5nVmFsdWUodHJ1ZSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBuZXdWYWx1ZSA9IHNlcmlhbGl6ZU91dHB1dCh2YWx1ZSk7IC8vIE5vdGlmeSBsaXN0ZW5lcgoKICAgICAgICAgICAgICBpZiAodmFsdWVDaGFuZ2VMaXN0ZW5lcikgewogICAgICAgICAgICAgICAgdmFsdWVDaGFuZ2VMaXN0ZW5lcihuZXdWYWx1ZSk7CiAgICAgICAgICAgICAgfSAvLyBVcGRhdGUgdGhlIGZvcm0gZGF0YSBvYnNlcnZhYmxlCgoKICAgICAgICAgICAgICBmb3JtLl9fdXBkYXRlRm9ybURhdGFBdChwYXRoLCBuZXdWYWx1ZSk7IC8vIFZhbGlkYXRlIGZpZWxkKHMpIGFuZCBzZXQgZm9ybS5pc1ZhbGlkIGZsYWcKCgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgIHJldHVybiBmb3JtLl9fdmFsaWRhdGVGaWVsZHMoZmllbGRzVG9WYWxpZGF0ZU9uQ2hhbmdlKTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBpZiAoIWlzVW5tb3VudGVkLmN1cnJlbnQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAqIElmIHdlIGhhdmUgc2V0IGEgZGVsYXkgdG8gZGlzcGxheSB0aGUgZXJyb3IgbWVzc2FnZSBhZnRlciB0aGUgZmllbGQgdmFsdWUgaGFzIGNoYW5nZWQsCiAgICAgICAgICAgICAgICogd2UgZmlyc3QgY2hlY2sgdGhhdCB0aGlzIGlzIHRoZSBsYXN0ICJjaGFuZ2UgaXRlcmF0aW9uIiAoPT09IHRoZSBsYXN0IGtleXN0cm9rZSBmcm9tIHRoZSB1c2VyKQogICAgICAgICAgICAgICAqIGFuZCB0aGVuLCB3ZSB2ZXJpZnkgaG93IGxvbmcgd2UndmUgYWxyZWFkeSB3YWl0ZWQgZm9yIGFzIGZvcm0uX192YWxpZGF0ZUZpZWxkcygpIGlzIGFzeW5jaHJvbm91cwogICAgICAgICAgICAgICAqIGFuZCBtaWdodCBhbHJlYWR5IGhhdmUgdGFrZW4gbW9yZSB0aGFuIHRoZSBzcGVjaWZpZWQgZGVsYXkpCiAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgaWYgKGVycm9yRGlzcGxheURlbGF5ID4gMCAmJiBjaGFuZ2VJdGVyYXRpb24gPT09IGNoYW5nZUNvdW50ZXIuY3VycmVudCkgewogICAgICAgICAgICAgICAgZGVsdGEgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lOwoKICAgICAgICAgICAgICAgIGlmIChkZWx0YSA8IGVycm9yRGlzcGxheURlbGF5KSB7CiAgICAgICAgICAgICAgICAgIGRlYm91bmNlVGltZW91dC5jdXJyZW50ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgZGVib3VuY2VUaW1lb3V0LmN1cnJlbnQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIHNldElzQ2hhbmdpbmdWYWx1ZShmYWxzZSk7CiAgICAgICAgICAgICAgICAgIH0sIGVycm9yRGlzcGxheURlbGF5IC0gZGVsdGEpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgc2V0SXNDaGFuZ2luZ1ZhbHVlKGZhbHNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gb25WYWx1ZUNoYW5nZSgpIHsKICAgICAgcmV0dXJuIF9yZWYxMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIHZhciBjYW5jZWxJbmZsaWdodFZhbGlkYXRpb24gPSBmdW5jdGlvbiBjYW5jZWxJbmZsaWdodFZhbGlkYXRpb24oKSB7CiAgICAvLyBDYW5jZWwgYW55IGluZmxpZ2h0IHZhbGlkYXRpb24gKGxpa2UgYW4gSFRUUCBSZXF1ZXN0KQogICAgaWYgKGluZmxpZ2h0VmFsaWRhdGlvbi5jdXJyZW50ICYmIHR5cGVvZiBpbmZsaWdodFZhbGlkYXRpb24uY3VycmVudC5jYW5jZWwgPT09ICdmdW5jdGlvbicpIHsKICAgICAgaW5mbGlnaHRWYWxpZGF0aW9uLmN1cnJlbnQuY2FuY2VsKCk7CiAgICAgIGluZmxpZ2h0VmFsaWRhdGlvbi5jdXJyZW50ID0gbnVsbDsKICAgIH0KICB9OwoKICB2YXIgcnVuVmFsaWRhdGlvbnMgPSBmdW5jdGlvbiBydW5WYWxpZGF0aW9ucyhfcmVmMTQpIHsKICAgIHZhciBmb3JtRGF0YSA9IF9yZWYxNC5mb3JtRGF0YSwKICAgICAgICB2YWx1ZVRvVmFsaWRhdGUgPSBfcmVmMTQudmFsdWUsCiAgICAgICAgdmFsaWRhdGlvblR5cGVUb1ZhbGlkYXRlID0gX3JlZjE0LnZhbGlkYXRpb25UeXBlVG9WYWxpZGF0ZTsKICAgIC8vIEJ5IGRlZmF1bHQsIGZvciBmaWVsZHMgdGhhdCBoYXZlIGFuIGFzeW5jaHJvbm91cyB2YWxpZGF0aW9uCiAgICAvLyB3ZSB3aWxsIGNsZWFyIHRoZSBlcnJvcnMgYXMgc29vbiBhcyB0aGUgZmllbGQgdmFsdWUgY2hhbmdlcy4KICAgIGNsZWFyRXJyb3JzKFtfY29uc3RhbnRzLlZBTElEQVRJT05fVFlQRVMuRklFTEQsIF9jb25zdGFudHMuVkFMSURBVElPTl9UWVBFUy5BU1lOQ10pOwogICAgY2FuY2VsSW5mbGlnaHRWYWxpZGF0aW9uKCk7CgogICAgdmFyIHJ1bkFzeW5jID0KICAgIC8qI19fUFVSRV9fKi8KICAgIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYxNSA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciB2YWxpZGF0aW9uRXJyb3JzLCBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uLCBfZGlkSXRlcmF0b3JFcnJvciwgX2l0ZXJhdG9yRXJyb3IsIF9pdGVyYXRvciwgX3N0ZXAsIHZhbGlkYXRpb24sIHZhbGlkYXRvciwgX3ZhbGlkYXRpb24kZXhpdE9uRmFpLCBleGl0T25GYWlsLCBfdmFsaWRhdGlvbiR0eXBlLCB2YWxpZGF0aW9uVHlwZSwgdmFsaWRhdGlvblJlc3VsdDsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcnMgPSBbXTsKICAgICAgICAgICAgICAgIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwogICAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA0OwogICAgICAgICAgICAgICAgX2l0ZXJhdG9yID0gdmFsaWRhdGlvbnNbU3ltYm9sLml0ZXJhdG9yXSgpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBpZiAoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFsaWRhdGlvbiA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICAgICAgaW5mbGlnaHRWYWxpZGF0aW9uLmN1cnJlbnQgPSBudWxsOwogICAgICAgICAgICAgICAgdmFsaWRhdG9yID0gdmFsaWRhdGlvbi52YWxpZGF0b3IsIF92YWxpZGF0aW9uJGV4aXRPbkZhaSA9IHZhbGlkYXRpb24uZXhpdE9uRmFpbCwgZXhpdE9uRmFpbCA9IF92YWxpZGF0aW9uJGV4aXRPbkZhaSA9PT0gdm9pZCAwID8gdHJ1ZSA6IF92YWxpZGF0aW9uJGV4aXRPbkZhaSwgX3ZhbGlkYXRpb24kdHlwZSA9IHZhbGlkYXRpb24udHlwZSwgdmFsaWRhdGlvblR5cGUgPSBfdmFsaWRhdGlvbiR0eXBlID09PSB2b2lkIDAgPyBfY29uc3RhbnRzLlZBTElEQVRJT05fVFlQRVMuRklFTEQgOiBfdmFsaWRhdGlvbiR0eXBlOwoKICAgICAgICAgICAgICAgIGlmICghKHR5cGVvZiB2YWxpZGF0aW9uVHlwZVRvVmFsaWRhdGUgIT09ICd1bmRlZmluZWQnICYmIHZhbGlkYXRpb25UeXBlICE9PSB2YWxpZGF0aW9uVHlwZVRvVmFsaWRhdGUpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJjb250aW51ZSIsIDIxKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIGluZmxpZ2h0VmFsaWRhdGlvbi5jdXJyZW50ID0gdmFsaWRhdG9yKHsKICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlVG9WYWxpZGF0ZSwKICAgICAgICAgICAgICAgICAgZXJyb3JzOiB2YWxpZGF0aW9uRXJyb3JzLAogICAgICAgICAgICAgICAgICBmb3JtOiBmb3JtLAogICAgICAgICAgICAgICAgICBmb3JtRGF0YTogZm9ybURhdGEsCiAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGgKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNTsKICAgICAgICAgICAgICAgIHJldHVybiBpbmZsaWdodFZhbGlkYXRpb24uY3VycmVudDsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIHZhbGlkYXRpb25SZXN1bHQgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGlvblJlc3VsdCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgiY29udGludWUiLCAyMSk7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3JzLnB1c2goX29iamVjdFNwcmVhZCh7fSwgdmFsaWRhdGlvblJlc3VsdCwgewogICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uVHlwZTogdmFsaWRhdGlvblR5cGUgfHwgX2NvbnN0YW50cy5WQUxJREFUSU9OX1RZUEVTLkZJRUxECiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgaWYgKCFleGl0T25GYWlsKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJicmVhayIsIDI0KTsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDMwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDI2OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDQpOwogICAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlOwogICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBfY29udGV4dDIudDA7CgogICAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDMwOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAzMTsKCiAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAzMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMzM7CgogICAgICAgICAgICAgICAgaWYgKCFfZGlkSXRlcmF0b3JFcnJvcikgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjsKCiAgICAgICAgICAgICAgY2FzZSAzNjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuZmluaXNoKDMzKTsKCiAgICAgICAgICAgICAgY2FzZSAzNzoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuZmluaXNoKDMwKTsKCiAgICAgICAgICAgICAgY2FzZSAzODoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCB2YWxpZGF0aW9uRXJyb3JzKTsKCiAgICAgICAgICAgICAgY2FzZSAzOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1s0LCAyNiwgMzAsIDM4XSwgWzMxLCwgMzMsIDM3XV0pOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gcnVuQXN5bmMoKSB7CiAgICAgICAgcmV0dXJuIF9yZWYxNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHZhciBydW5TeW5jID0gZnVuY3Rpb24gcnVuU3luYygpIHsKICAgICAgdmFyIHZhbGlkYXRpb25FcnJvcnMgPSBbXTsgLy8gU2VxdWVudGlhbGx5IGV4ZWN1dGUgYWxsIHRoZSB2YWxpZGF0aW9ucyBmb3IgdGhlIGZpZWxkCgogICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlOwogICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7CiAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjIgPSB1bmRlZmluZWQ7CgogICAgICB0cnkgewogICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSB2YWxpZGF0aW9uc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwMjsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IChfc3RlcDIgPSBfaXRlcmF0b3IyLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZSkgewogICAgICAgICAgdmFyIHZhbGlkYXRpb24gPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICB2YXIgdmFsaWRhdG9yID0gdmFsaWRhdGlvbi52YWxpZGF0b3IsCiAgICAgICAgICAgICAgX3ZhbGlkYXRpb24kZXhpdE9uRmFpMiA9IHZhbGlkYXRpb24uZXhpdE9uRmFpbCwKICAgICAgICAgICAgICBleGl0T25GYWlsID0gX3ZhbGlkYXRpb24kZXhpdE9uRmFpMiA9PT0gdm9pZCAwID8gdHJ1ZSA6IF92YWxpZGF0aW9uJGV4aXRPbkZhaTIsCiAgICAgICAgICAgICAgX3ZhbGlkYXRpb24kdHlwZTIgPSB2YWxpZGF0aW9uLnR5cGUsCiAgICAgICAgICAgICAgdmFsaWRhdGlvblR5cGUgPSBfdmFsaWRhdGlvbiR0eXBlMiA9PT0gdm9pZCAwID8gX2NvbnN0YW50cy5WQUxJREFUSU9OX1RZUEVTLkZJRUxEIDogX3ZhbGlkYXRpb24kdHlwZTI7CgogICAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0aW9uVHlwZVRvVmFsaWRhdGUgIT09ICd1bmRlZmluZWQnICYmIHZhbGlkYXRpb25UeXBlICE9PSB2YWxpZGF0aW9uVHlwZVRvVmFsaWRhdGUpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHZhbGlkYXRpb25SZXN1bHQgPSB2YWxpZGF0b3IoewogICAgICAgICAgICB2YWx1ZTogdmFsdWVUb1ZhbGlkYXRlLAogICAgICAgICAgICBlcnJvcnM6IHZhbGlkYXRpb25FcnJvcnMsCiAgICAgICAgICAgIGZvcm06IGZvcm0sCiAgICAgICAgICAgIGZvcm1EYXRhOiBmb3JtRGF0YSwKICAgICAgICAgICAgcGF0aDogcGF0aAogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKCF2YWxpZGF0aW9uUmVzdWx0KSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghIXZhbGlkYXRpb25SZXN1bHQudGhlbikgewogICAgICAgICAgICAvLyBUaGUgdmFsaWRhdG9yIHJldHVybmVkIGEgUHJvbWlzZTogYWJvcnQgYW5kIHJ1biB0aGUgdmFsaWRhdGlvbnMgYXN5bmNocm9ub3VzbHkKICAgICAgICAgICAgLy8gV2Uga2VlcCBhIHJlZmVyZW5jZSB0byB0aGUgb25mbGl0aCBwcm9taXNlIHNvIHdlIGNhbiBjYW5jZWwgaXQuCiAgICAgICAgICAgIGluZmxpZ2h0VmFsaWRhdGlvbi5jdXJyZW50ID0gdmFsaWRhdGlvblJlc3VsdDsKICAgICAgICAgICAgY2FuY2VsSW5mbGlnaHRWYWxpZGF0aW9uKCk7CiAgICAgICAgICAgIHJldHVybiBydW5Bc3luYygpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhbGlkYXRpb25FcnJvcnMucHVzaChfb2JqZWN0U3ByZWFkKHt9LCB2YWxpZGF0aW9uUmVzdWx0LCB7CiAgICAgICAgICAgIHZhbGlkYXRpb25UeXBlOiB2YWxpZGF0aW9uVHlwZSB8fCBfY29uc3RhbnRzLlZBTElEQVRJT05fVFlQRVMuRklFTEQKICAgICAgICAgIH0pKTsKCiAgICAgICAgICBpZiAoZXhpdE9uRmFpbCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7CiAgICAgICAgX2l0ZXJhdG9yRXJyb3IyID0gZXJyOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yICYmIF9pdGVyYXRvcjIucmV0dXJuICE9IG51bGwpIHsKICAgICAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTsKICAgICAgICAgIH0KICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikgewogICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjI7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdmFsaWRhdGlvbkVycm9yczsKICAgIH07IC8vIFdlIGZpcnN0IHRyeSB0byBydW4gdGhlIHZhbGlkYXRpb25zIHN5bmNocm9ub3VzbHkKCgogICAgcmV0dXJuIHJ1blN5bmMoKTsKICB9OyAvLyAtLSBBUEkKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKICB2YXIgY2xlYXJFcnJvcnMgPSBmdW5jdGlvbiBjbGVhckVycm9ycygpIHsKICAgIHZhciB2YWxpZGF0aW9uVHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogX2NvbnN0YW50cy5WQUxJREFUSU9OX1RZUEVTLkZJRUxEOwogICAgc2V0RXJyb3JzKGZ1bmN0aW9uIChwcmV2aW91c0Vycm9ycykgewogICAgICByZXR1cm4gZmlsdGVyRXJyb3JzKHByZXZpb3VzRXJyb3JzLCB2YWxpZGF0aW9uVHlwZSk7CiAgICB9KTsKICB9OwogIC8qKgogICAqIFZhbGlkYXRlIGEgZm9ybSBmaWVsZCwgcnVubmluZyBhbGwgaXRzIHZhbGlkYXRpb25zLgogICAqIElmIGEgdmFsaWRhdGlvblR5cGUgaXMgcHJvdmlkZWQgdGhlbiBvbmx5IHRoYXQgdmFsaWRhdGlvbiB3aWxsIGJlIGV4ZWN1dGVkLAogICAqIHNraXBwaW5nIHRoZSBvdGhlciB0eXBlIG9mIHZhbGlkYXRpb24gdGhhdCBtaWdodCBleGlzdC4KICAgKi8KCgogIHZhciB2YWxpZGF0ZSA9IGZ1bmN0aW9uIHZhbGlkYXRlKCkgewogICAgdmFyIHZhbGlkYXRpb25EYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgIHZhciBfdmFsaWRhdGlvbkRhdGEkZm9ybUQgPSB2YWxpZGF0aW9uRGF0YS5mb3JtRGF0YSwKICAgICAgICBmb3JtRGF0YSA9IF92YWxpZGF0aW9uRGF0YSRmb3JtRCA9PT0gdm9pZCAwID8gZm9ybS5nZXRGb3JtRGF0YSh7CiAgICAgIHVuZmxhdHRlbjogZmFsc2UKICAgIH0pIDogX3ZhbGlkYXRpb25EYXRhJGZvcm1ELAogICAgICAgIF92YWxpZGF0aW9uRGF0YSR2YWx1ZSA9IHZhbGlkYXRpb25EYXRhLnZhbHVlLAogICAgICAgIHZhbHVlVG9WYWxpZGF0ZSA9IF92YWxpZGF0aW9uRGF0YSR2YWx1ZSA9PT0gdm9pZCAwID8gdmFsdWUgOiBfdmFsaWRhdGlvbkRhdGEkdmFsdWUsCiAgICAgICAgdmFsaWRhdGlvblR5cGUgPSB2YWxpZGF0aW9uRGF0YS52YWxpZGF0aW9uVHlwZTsKICAgIHNldElzVmFsaWRhdGVkKHRydWUpOwogICAgc2V0VmFsaWRhdGluZyh0cnVlKTsgLy8gQnkgdGhlIHRpbWUgb3VyIHZhbGlkYXRlIGZ1bmN0aW9uIGhhcyByZWFjaGVkIGNvbXBsZXRpb24sIGl04oCZcyBwb3NzaWJsZQogICAgLy8gdGhhdCB2YWxpZGF0ZSgpIHdpbGwgaGF2ZSBiZWVuIGNhbGxlZCBhZ2Fpbi4gSWYgdGhpcyBpcyB0aGUgY2FzZSwgd2UgbmVlZAogICAgLy8gdG8gaWdub3JlIHRoZSByZXN1bHRzIG9mIHRoaXMgaW52b2NhdGlvbiBhbmQgb25seSB1c2UgdGhlIHJlc3VsdHMgb2YKICAgIC8vIHRoZSBtb3N0IHJlY2VudCBpbnZvY2F0aW9uIHRvIHVwZGF0ZSB0aGUgZXJyb3Igc3RhdGUgZm9yIGEgZmllbGQKCiAgICB2YXIgdmFsaWRhdGVJdGVyYXRpb24gPSArK3ZhbGlkYXRlQ291bnRlci5jdXJyZW50OwoKICAgIHZhciBvblZhbGlkYXRpb25FcnJvcnMgPSBmdW5jdGlvbiBvblZhbGlkYXRpb25FcnJvcnMoX3ZhbGlkYXRpb25FcnJvcnMpIHsKICAgICAgaWYgKHZhbGlkYXRlSXRlcmF0aW9uID09PSB2YWxpZGF0ZUNvdW50ZXIuY3VycmVudCkgewogICAgICAgIC8vIFRoaXMgaXMgdGhlIG1vc3QgcmVjZW50IGludm9jYXRpb24KICAgICAgICBzZXRWYWxpZGF0aW5nKGZhbHNlKTsgLy8gVXBkYXRlIHRoZSBlcnJvcnMgYXJyYXkKCiAgICAgICAgdmFyIGZpbHRlcmVkRXJyb3JzID0gZmlsdGVyRXJyb3JzKGVycm9ycywgdmFsaWRhdGlvblR5cGUpOwogICAgICAgIHNldEVycm9ycyhbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGZpbHRlcmVkRXJyb3JzKSwgX3RvQ29uc3VtYWJsZUFycmF5KF92YWxpZGF0aW9uRXJyb3JzKSkpOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGlzVmFsaWQ6IF92YWxpZGF0aW9uRXJyb3JzLmxlbmd0aCA9PT0gMCwKICAgICAgICBlcnJvcnM6IF92YWxpZGF0aW9uRXJyb3JzCiAgICAgIH07CiAgICB9OwoKICAgIHZhciB2YWxpZGF0aW9uRXJyb3JzID0gcnVuVmFsaWRhdGlvbnMoewogICAgICBmb3JtRGF0YTogZm9ybURhdGEsCiAgICAgIHZhbHVlOiB2YWx1ZVRvVmFsaWRhdGUsCiAgICAgIHZhbGlkYXRpb25UeXBlVG9WYWxpZGF0ZTogdmFsaWRhdGlvblR5cGUKICAgIH0pOwoKICAgIGlmICh2YWxpZGF0aW9uRXJyb3JzLnRoZW4pIHsKICAgICAgcmV0dXJuIHZhbGlkYXRpb25FcnJvcnMudGhlbihvblZhbGlkYXRpb25FcnJvcnMpOwogICAgfQoKICAgIHJldHVybiBvblZhbGlkYXRpb25FcnJvcnModmFsaWRhdGlvbkVycm9ycyk7CiAgfTsKICAvKioKICAgKiBIYW5kbGVyIHRvIGNoYW5nZSB0aGUgZmllbGQgdmFsdWUKICAgKgogICAqIEBwYXJhbSBuZXdWYWx1ZSBUaGUgbmV3IHZhbHVlIHRvIGFzc2lnbiB0byB0aGUgZmllbGQKICAgKi8KCgogIHZhciBzZXRWYWx1ZSA9IGZ1bmN0aW9uIHNldFZhbHVlKG5ld1ZhbHVlKSB7CiAgICBpZiAoaXNQcmlzdGluZSkgewogICAgICBzZXRQcmlzdGluZShmYWxzZSk7CiAgICB9CgogICAgdmFyIGZvcm1hdHRlZFZhbHVlID0gZm9ybWF0SW5wdXRWYWx1ZShuZXdWYWx1ZSk7CiAgICBzZXRTdGF0ZVZhbHVlKGZvcm1hdHRlZFZhbHVlKTsKICB9OwoKICB2YXIgX3NldEVycm9ycyA9IGZ1bmN0aW9uIF9zZXRFcnJvcnMoX2Vycm9ycykgewogICAgc2V0RXJyb3JzKF9lcnJvcnMubWFwKGZ1bmN0aW9uIChlcnJvcikgewogICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7CiAgICAgICAgdmFsaWRhdGlvblR5cGU6IF9jb25zdGFudHMuVkFMSURBVElPTl9UWVBFUy5GSUVMRAogICAgICB9LCBlcnJvcik7CiAgICB9KSk7CiAgfTsKICAvKioKICAgKiBGb3JtIDxpbnB1dCAvPiAib25DaGFuZ2UiIGV2ZW50IGhhbmRsZXIKICAgKgogICAqIEBwYXJhbSBldmVudCBGb3JtIGlucHV0IGNoYW5nZSBldmVudAogICAqLwoKCiAgdmFyIG9uQ2hhbmdlID0gZnVuY3Rpb24gb25DaGFuZ2UoZXZlbnQpIHsKICAgIHZhciBuZXdWYWx1ZSA9IHt9Lmhhc093blByb3BlcnR5LmNhbGwoZXZlbnQudGFyZ2V0LCAnY2hlY2tlZCcpID8gZXZlbnQudGFyZ2V0LmNoZWNrZWQgOiBldmVudC50YXJnZXQudmFsdWU7CiAgICBzZXRWYWx1ZShuZXdWYWx1ZSk7CiAgfTsKICAvKioKICAgKiBBcyB3ZSBjYW4gaGF2ZSBtdWx0aXBsZSB2YWxpZGF0aW9uIHR5cGVzIChGSUVMRCwgQVNZTkMsIEFSUkFZX0lURU0pLCB0aGlzCiAgICogbWV0aG9kIGFsbG93cyB1cyB0byByZXRyaWV2ZSBlcnJvciBtZXNzYWdlcyBmb3IgY2VydGFpbiB0eXBlcyBvZiB2YWxpZGF0aW9uLgogICAqCiAgICogRm9yIGV4YW1wbGUsIGlmIHdlIHdhbnQgdG8gdmFsaWRhdGlvbiBlcnJvciBtZXNzYWdlcyB0byBiZSBkaXNwbGF5ZWQgd2hlbiB0aGUgdXNlciBjbGlja3MgdGhlICJzYXZlIiBidXR0b24KICAgKiBfYnV0XyBpbiBjYXNlIG9mIGFuIGFzeW5jaHJvbm91cyB2YWxpZGF0aW9uIChmb3IgZXguIGFuIEhUVFAgcmVxdWVzdCB0aGF0IHdvdWxkIHZhbGlkYXRlIGFuIGluZGV4IG5hbWUpIHdlCiAgICogd2FudCB0byBpbW1lZGlhdGVseSBkaXNwbGF5IHRoZSBlcnJvciBtZXNzYWdlLCB3ZSB3b3VsZCBoYXZlIDIgdHlwZXMgb2YgdmFsaWRhdGlvbjogRklFTEQgJiBBU1lOQwogICAqCiAgICogQHBhcmFtIHZhbGlkYXRpb25UeXBlIFRoZSB2YWxpZGF0aW9uIHR5cGUgdG8gcmV0dXJuIGVycm9yIG1lc3NhZ2VzIGZyb20KICAgKi8KCgogIHZhciBnZXRFcnJvcnNNZXNzYWdlcyA9IGZ1bmN0aW9uIGdldEVycm9yc01lc3NhZ2VzKCkgewogICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogICAgdmFyIGVycm9yQ29kZSA9IGFyZ3MuZXJyb3JDb2RlLAogICAgICAgIF9hcmdzJHZhbGlkYXRpb25UeXBlID0gYXJncy52YWxpZGF0aW9uVHlwZSwKICAgICAgICB2YWxpZGF0aW9uVHlwZSA9IF9hcmdzJHZhbGlkYXRpb25UeXBlID09PSB2b2lkIDAgPyBfY29uc3RhbnRzLlZBTElEQVRJT05fVFlQRVMuRklFTEQgOiBfYXJncyR2YWxpZGF0aW9uVHlwZTsKICAgIHZhciBlcnJvck1lc3NhZ2VzID0gZXJyb3JzLnJlZHVjZShmdW5jdGlvbiAobWVzc2FnZXMsIGVycm9yKSB7CiAgICAgIHZhciBpc1NhbWVFcnJvckNvZGUgPSBlcnJvckNvZGUgJiYgZXJyb3IuY29kZSA9PT0gZXJyb3JDb2RlOwogICAgICB2YXIgaXNTYW1ldmFsaWRhdGlvblR5cGUgPSBlcnJvci52YWxpZGF0aW9uVHlwZSA9PT0gdmFsaWRhdGlvblR5cGUgfHwgdmFsaWRhdGlvblR5cGUgPT09IF9jb25zdGFudHMuVkFMSURBVElPTl9UWVBFUy5GSUVMRCAmJiAhe30uaGFzT3duUHJvcGVydHkuY2FsbChlcnJvciwgJ3ZhbGlkYXRpb25UeXBlJyk7CgogICAgICBpZiAoaXNTYW1lRXJyb3JDb2RlIHx8IHR5cGVvZiBlcnJvckNvZGUgPT09ICd1bmRlZmluZWQnICYmIGlzU2FtZXZhbGlkYXRpb25UeXBlKSB7CiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzID8gIiIuY29uY2F0KG1lc3NhZ2VzLCAiLCAiKS5jb25jYXQoZXJyb3IubWVzc2FnZSkgOiBlcnJvci5tZXNzYWdlOwogICAgICB9CgogICAgICByZXR1cm4gbWVzc2FnZXM7CiAgICB9LCAnJyk7CiAgICByZXR1cm4gZXJyb3JNZXNzYWdlcyA/IGVycm9yTWVzc2FnZXMgOiBudWxsOwogIH07CgogIHZhciByZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgdmFyIHJlc2V0T3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogewogICAgICByZXNldFZhbHVlOiB0cnVlCiAgICB9OwogICAgdmFyIF9yZXNldE9wdGlvbnMkcmVzZXRWYSA9IHJlc2V0T3B0aW9ucy5yZXNldFZhbHVlLAogICAgICAgIHJlc2V0VmFsdWUgPSBfcmVzZXRPcHRpb25zJHJlc2V0VmEgPT09IHZvaWQgMCA/IHRydWUgOiBfcmVzZXRPcHRpb25zJHJlc2V0VmE7CiAgICBzZXRQcmlzdGluZSh0cnVlKTsKICAgIHNldFZhbGlkYXRpbmcoZmFsc2UpOwogICAgc2V0SXNDaGFuZ2luZ1ZhbHVlKGZhbHNlKTsKICAgIHNldElzVmFsaWRhdGVkKGZhbHNlKTsKICAgIHNldEVycm9ycyhbXSk7CgogICAgaWYgKHJlc2V0VmFsdWUpIHsKICAgICAgc2V0VmFsdWUoaW5pdGlhbFZhbHVlKTsKICAgICAgcmV0dXJuIGluaXRpYWxWYWx1ZTsKICAgIH0KCiAgICByZXR1cm4gdmFsdWU7CiAgfTsKCiAgdmFyIHNlcmlhbGl6ZU91dHB1dCA9IGZ1bmN0aW9uIHNlcmlhbGl6ZU91dHB1dCgpIHsKICAgIHZhciByYXdWYWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdmFsdWU7CiAgICByZXR1cm4gc2VyaWFsaXplcihyYXdWYWx1ZSk7CiAgfTsgLy8gLS0gRUZGRUNUUwogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICBpZiAoaXNQcmlzdGluZSkgewogICAgICAvLyBBdm9pZCB2YWxpZGF0ZSBvbiBtb3VudAogICAgICByZXR1cm47CiAgICB9CgogICAgb25WYWx1ZUNoYW5nZSgpOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKGRlYm91bmNlVGltZW91dC5jdXJyZW50KSB7CiAgICAgICAgY2xlYXJUaW1lb3V0KGRlYm91bmNlVGltZW91dC5jdXJyZW50KTsKICAgICAgfQogICAgfTsKICB9LCBbdmFsdWVdKTsKICB2YXIgZmllbGQgPSB7CiAgICBwYXRoOiBwYXRoLAogICAgdHlwZTogdHlwZSwKICAgIGxhYmVsOiBsYWJlbCwKICAgIGxhYmVsQXBwZW5kOiBsYWJlbEFwcGVuZCwKICAgIGhlbHBUZXh0OiBoZWxwVGV4dCwKICAgIHZhbHVlOiB2YWx1ZSwKICAgIGVycm9yczogZXJyb3JzLAogICAgZm9ybTogZm9ybSwKICAgIGlzUHJpc3RpbmU6IGlzUHJpc3RpbmUsCiAgICBpc1ZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLAogICAgaXNWYWxpZGF0aW5nOiBpc1ZhbGlkYXRpbmcsCiAgICBpc1ZhbGlkYXRlZDogaXNWYWxpZGF0ZWQsCiAgICBpc0NoYW5naW5nVmFsdWU6IGlzQ2hhbmdpbmdWYWx1ZSwKICAgIG9uQ2hhbmdlOiBvbkNoYW5nZSwKICAgIGdldEVycm9yc01lc3NhZ2VzOiBnZXRFcnJvcnNNZXNzYWdlcywKICAgIHNldFZhbHVlOiBzZXRWYWx1ZSwKICAgIHNldEVycm9yczogX3NldEVycm9ycywKICAgIGNsZWFyRXJyb3JzOiBjbGVhckVycm9ycywKICAgIHZhbGlkYXRlOiB2YWxpZGF0ZSwKICAgIHJlc2V0OiByZXNldCwKICAgIF9fc2VyaWFsaXplT3V0cHV0OiBzZXJpYWxpemVPdXRwdXQKICB9OwoKICBmb3JtLl9fYWRkRmllbGQoZmllbGQpOyAvLyBFeGVjdXRlZCBmaXJzdCAoMSkKCgogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICAvKioKICAgICAqIE5PVEU6IGVmZmVjdCBjbGVhbnVwIGFjdHVhbGx5IGhhcHBlbnMgKmFmdGVyKiB0aGUgbmV3IGNvbXBvbmVudCBoYXMgYmVlbiBtb3VudGVkLAogICAgICogYnV0IGJlZm9yZSB0aGUgbmV4dCBlZmZlY3QgY2FsbGJhY2sgaXMgcnVuLgogICAgICogUmVmOiBodHRwczovL2tlbnRjZG9kZHMuY29tL2Jsb2cvdW5kZXJzdGFuZGluZy1yZWFjdHMta2V5LXByb3AKICAgICAqCiAgICAgKiBUaGlzIG1lYW5zIHRoYXQsIHRoZSAiZm9ybS5fX2FkZEZpZWxkKGZpZWxkKSIgb3V0c2lkZSB0aGUgZWZmZWN0IHdpbGwgYmUgY2FsbGVkICpiZWZvcmUqCiAgICAgKiB0aGUgY2xlYW51cCBgZm9ybS5fX3JlbW92ZUZpZWxkKHBhdGgpO2AgY3JlYXRpbmcgYSByYWNlIGNvbmRpdGlvbi4KICAgICAqCiAgICAgKiBUT0RPOiBTZWUgaG93IHdlIGNvdWxkIHJlZmFjdG9yICJ1c2VfZmllbGQiICYgInVzZV9mb3JtIiB0byBhdm9pZCBoYXZpbmcgdGhlCiAgICAgKiBgZm9ybS5fX2FkZEZpZWxkKGZpZWxkKWAgY2FsbCBvdXRzaWRlIHRoZSBlZmZlY3QuCiAgICAgKi8KICAgIGZvcm0uX19hZGRGaWVsZChmaWVsZCk7IC8vIEV4ZWN1dGVkIHRoaXJkICgzKQoKCiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAvLyBSZW1vdmUgZmllbGQgZnJvbSB0aGUgZm9ybSB3aGVuIGl0IGlzIHVubW91bnRlZCBvciBpZiBpdHMgcGF0aCBjaGFuZ2VzLgogICAgICBpc1VubW91bnRlZC5jdXJyZW50ID0gdHJ1ZTsKCiAgICAgIGZvcm0uX19yZW1vdmVGaWVsZChwYXRoKTsgLy8gRXhlY3V0ZWQgc2Vjb25kICgyKQoKICAgIH07CiAgfSwgW3BhdGhdKTsKICByZXR1cm4gZmllbGQ7Cn07CgpleHBvcnRzLnVzZUZpZWxkID0gdXNlRmllbGQ7"},null]}