{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/canvas/canvas_plugin_src/lib/flot-charts/jquery.flot.canvas.js","dependencies":[{"path":"x-pack/legacy/plugins/canvas/canvas_plugin_src/lib/flot-charts/jquery.flot.canvas.js","mtime":1589249551803},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgovKiBGbG90IHBsdWdpbiBmb3IgZHJhd2luZyBhbGwgZWxlbWVudHMgb2YgYSBwbG90IG9uIHRoZSBjYW52YXMuCgpDb3B5cmlnaHQgKGMpIDIwMDctMjAxNCBJT0xBIGFuZCBPbGUgTGF1cnNlbi4KTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgoKRmxvdCBub3JtYWxseSBwcm9kdWNlcyBjZXJ0YWluIGVsZW1lbnRzLCBsaWtlIGF4aXMgbGFiZWxzIGFuZCB0aGUgbGVnZW5kLCB1c2luZwpIVE1MIGVsZW1lbnRzLiBUaGlzIHBlcm1pdHMgZ3JlYXRlciBpbnRlcmFjdGl2aXR5IGFuZCBjdXN0b21pemF0aW9uLCBhbmQgb2Z0ZW4KbG9va3MgYmV0dGVyLCBkdWUgdG8gY3Jvc3MtYnJvd3NlciBjYW52YXMgdGV4dCBpbmNvbnNpc3RlbmNpZXMgYW5kIGxpbWl0YXRpb25zLgoKSXQgY2FuIGFsc28gYmUgZGVzaXJhYmxlIHRvIHJlbmRlciB0aGUgcGxvdCBlbnRpcmVseSBpbiBjYW52YXMsIHBhcnRpY3VsYXJseQppZiB0aGUgZ29hbCBpcyB0byBzYXZlIGl0IGFzIGFuIGltYWdlLCBvciBpZiBGbG90IGlzIGJlaW5nIHVzZWQgaW4gYSBjb250ZXh0CndoZXJlIHRoZSBIVE1MIERPTSBkb2VzIG5vdCBleGlzdCwgYXMgaXMgdGhlIGNhc2Ugd2l0aGluIE5vZGUuanMuIFRoaXMgcGx1Z2luCnN3aXRjaGVzIG91dCBGbG90J3Mgc3RhbmRhcmQgZHJhd2luZyBvcGVyYXRpb25zIGZvciBjYW52YXMtb25seSByZXBsYWNlbWVudHMuCgpDdXJyZW50bHkgdGhlIHBsdWdpbiBzdXBwb3J0cyBvbmx5IGF4aXMgbGFiZWxzLCBidXQgaXQgd2lsbCBldmVudHVhbGx5IGFsbG93CmV2ZXJ5IGVsZW1lbnQgb2YgdGhlIHBsb3QgdG8gYmUgcmVuZGVyZWQgZGlyZWN0bHkgdG8gY2FudmFzLgoKVGhlIHBsdWdpbiBzdXBwb3J0cyB0aGVzZSBvcHRpb25zOgoKewogICAgY2FudmFzOiBib29sZWFuCn0KClRoZSAiY2FudmFzIiBvcHRpb24gY29udHJvbHMgd2hldGhlciBmdWxsIGNhbnZhcyBkcmF3aW5nIGlzIGVuYWJsZWQsIG1ha2luZyBpdApwb3NzaWJsZSB0byB0b2dnbGUgb24gYW5kIG9mZi4gVGhpcyBpcyB1c2VmdWwgd2hlbiBhIHBsb3QgdXNlcyBIVE1MIHRleHQgaW4gdGhlCmJyb3dzZXIsIGJ1dCBuZWVkcyB0byByZWRyYXcgd2l0aCBjYW52YXMgdGV4dCB3aGVuIGV4cG9ydGluZyBhcyBhbiBpbWFnZS4KCiovCihmdW5jdGlvbiAoJCkgewogIHZhciBvcHRpb25zID0gewogICAgY2FudmFzOiB0cnVlCiAgfTsKICB2YXIgcmVuZGVyLCBnZXRUZXh0SW5mbywgYWRkVGV4dDsgLy8gQ2FjaGUgdGhlIHByb3RvdHlwZSBoYXNPd25Qcm9wZXJ0eSBmb3IgZmFzdGVyIGFjY2VzcwoKICB2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwoKICBmdW5jdGlvbiBpbml0KHBsb3QsIGNsYXNzZXMpIHsKICAgIHZhciBDYW52YXMgPSBjbGFzc2VzLkNhbnZhczsgLy8gV2Ugb25seSB3YW50IHRvIHJlcGxhY2UgdGhlIGZ1bmN0aW9ucyBvbmNlOyB0aGUgc2Vjb25kIHRpbWUgYXJvdW5kCiAgICAvLyB3ZSB3b3VsZCBqdXN0IGdldCBvdXIgbmV3IGZ1bmN0aW9uIGJhY2suICBUaGlzIHdob2xlIHJlcGxhY2luZyBvZgogICAgLy8gcHJvdG90eXBlIGZ1bmN0aW9ucyBpcyBhIGRpc2FzdGVyLCBhbmQgbmVlZHMgdG8gYmUgY2hhbmdlZCBBU0FQLgoKICAgIGlmIChyZW5kZXIgPT0gbnVsbCkgewogICAgICBnZXRUZXh0SW5mbyA9IENhbnZhcy5wcm90b3R5cGUuZ2V0VGV4dEluZm8sIGFkZFRleHQgPSBDYW52YXMucHJvdG90eXBlLmFkZFRleHQsIHJlbmRlciA9IENhbnZhcy5wcm90b3R5cGUucmVuZGVyOwogICAgfSAvLyBGaW5pc2hlcyByZW5kZXJpbmcgdGhlIGNhbnZhcywgaW5jbHVkaW5nIG92ZXJsYWlkIHRleHQKCgogICAgQ2FudmFzLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghcGxvdC5nZXRPcHRpb25zKCkuY2FudmFzKSB7CiAgICAgICAgcmV0dXJuIHJlbmRlci5jYWxsKHRoaXMpOwogICAgICB9CgogICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dCwKICAgICAgICAgIGNhY2hlID0gdGhpcy5fdGV4dENhY2hlOyAvLyBGb3IgZWFjaCB0ZXh0IGxheWVyLCByZW5kZXIgZWxlbWVudHMgbWFya2VkIGFzIGFjdGl2ZQoKICAgICAgY29udGV4dC5zYXZlKCk7CiAgICAgIGNvbnRleHQudGV4dEJhc2VsaW5lID0gIm1pZGRsZSI7CgogICAgICBmb3IgKHZhciBsYXllcktleSBpbiBjYWNoZSkgewogICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGNhY2hlLCBsYXllcktleSkpIHsKICAgICAgICAgIHZhciBsYXllckNhY2hlID0gY2FjaGVbbGF5ZXJLZXldOwoKICAgICAgICAgIGZvciAodmFyIHN0eWxlS2V5IGluIGxheWVyQ2FjaGUpIHsKICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwobGF5ZXJDYWNoZSwgc3R5bGVLZXkpKSB7CiAgICAgICAgICAgICAgdmFyIHN0eWxlQ2FjaGUgPSBsYXllckNhY2hlW3N0eWxlS2V5XSwKICAgICAgICAgICAgICAgICAgdXBkYXRlU3R5bGVzID0gdHJ1ZTsKCiAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHN0eWxlQ2FjaGUpIHsKICAgICAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHN0eWxlQ2FjaGUsIGtleSkpIHsKICAgICAgICAgICAgICAgICAgdmFyIGluZm8gPSBzdHlsZUNhY2hlW2tleV0sCiAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbnMgPSBpbmZvLnBvc2l0aW9ucywKICAgICAgICAgICAgICAgICAgICAgIGxpbmVzID0gaW5mby5saW5lczsgLy8gU2luY2UgZXZlcnkgZWxlbWVudCBhdCB0aGlzIGxldmVsIG9mIHRoZSBjYWNoZSBoYXZlIHRoZQogICAgICAgICAgICAgICAgICAvLyBzYW1lIGZvbnQgYW5kIGZpbGwgc3R5bGVzLCB3ZSBjYW4ganVzdCBjaGFuZ2UgdGhlbSBvbmNlCiAgICAgICAgICAgICAgICAgIC8vIHVzaW5nIHRoZSB2YWx1ZXMgZnJvbSB0aGUgZmlyc3QgZWxlbWVudC4KCiAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVTdHlsZXMpIHsKICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGluZm8uZm9udC5jb2xvcjsKICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmZvbnQgPSBpbmZvLmZvbnQuZGVmaW5pdGlvbjsKICAgICAgICAgICAgICAgICAgICB1cGRhdGVTdHlsZXMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIHBvc2l0aW9uOyBwb3NpdGlvbiA9IHBvc2l0aW9uc1tpXTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc2l0aW9uLmFjdGl2ZSkgewogICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGxpbmU7IGxpbmUgPSBwb3NpdGlvbi5saW5lc1tqXTsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFRleHQobGluZXNbal0udGV4dCwgbGluZVswXSwgbGluZVsxXSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9ucy5zcGxpY2UoaS0tLCAxKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbnMubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgICAgICBkZWxldGUgc3R5bGVDYWNoZVtrZXldOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBjb250ZXh0LnJlc3RvcmUoKTsKICAgIH07IC8vIENyZWF0ZXMgKGlmIG5lY2Vzc2FyeSkgYW5kIHJldHVybnMgYSB0ZXh0IGluZm8gb2JqZWN0LgogICAgLy8KICAgIC8vIFdoZW4gdGhlIGNhbnZhcyBvcHRpb24gaXMgc2V0LCB0aGUgb2JqZWN0IGxvb2tzIGxpa2UgdGhpczoKICAgIC8vCiAgICAvLyB7CiAgICAvLyAgICAgd2lkdGg6IFdpZHRoIG9mIHRoZSB0ZXh0J3MgYm91bmRpbmcgYm94LgogICAgLy8gICAgIGhlaWdodDogSGVpZ2h0IG9mIHRoZSB0ZXh0J3MgYm91bmRpbmcgYm94LgogICAgLy8gICAgIHBvc2l0aW9uczogQXJyYXkgb2YgcG9zaXRpb25zIGF0IHdoaWNoIHRoaXMgdGV4dCBpcyBkcmF3bi4KICAgIC8vICAgICBsaW5lczogW3sKICAgIC8vICAgICAgICAgaGVpZ2h0OiBIZWlnaHQgb2YgdGhpcyBsaW5lLgogICAgLy8gICAgICAgICB3aWR0aHM6IFdpZHRoIG9mIHRoaXMgbGluZS4KICAgIC8vICAgICAgICAgdGV4dDogVGV4dCBvbiB0aGlzIGxpbmUuCiAgICAvLyAgICAgfV0sCiAgICAvLyAgICAgZm9udDogewogICAgLy8gICAgICAgICBkZWZpbml0aW9uOiBDYW52YXMgZm9udCBwcm9wZXJ0eSBzdHJpbmcuCiAgICAvLyAgICAgICAgIGNvbG9yOiBDb2xvciBvZiB0aGUgdGV4dC4KICAgIC8vICAgICB9LAogICAgLy8gfQogICAgLy8KICAgIC8vIFRoZSBwb3NpdGlvbnMgYXJyYXkgY29udGFpbnMgb2JqZWN0cyB0aGF0IGxvb2sgbGlrZSB0aGlzOgogICAgLy8KICAgIC8vIHsKICAgIC8vICAgICBhY3RpdmU6IEZsYWcgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSB0ZXh0IHNob3VsZCBiZSB2aXNpYmxlLgogICAgLy8gICAgIGxpbmVzOiBBcnJheSBvZiBbeCwgeV0gY29vcmRpbmF0ZXMgYXQgd2hpY2ggdG8gZHJhdyB0aGUgbGluZS4KICAgIC8vICAgICB4OiBYIGNvb3JkaW5hdGUgYXQgd2hpY2ggdG8gZHJhdyB0aGUgdGV4dC4KICAgIC8vICAgICB5OiBZIGNvb3JkaW5hdGUgYXQgd2hpY2ggdG8gZHJhdyB0aGUgdGV4dC4KICAgIC8vIH0KCgogICAgQ2FudmFzLnByb3RvdHlwZS5nZXRUZXh0SW5mbyA9IGZ1bmN0aW9uIChsYXllciwgdGV4dCwgZm9udCwgYW5nbGUsIHdpZHRoKSB7CiAgICAgIGlmICghcGxvdC5nZXRPcHRpb25zKCkuY2FudmFzKSB7CiAgICAgICAgcmV0dXJuIGdldFRleHRJbmZvLmNhbGwodGhpcywgbGF5ZXIsIHRleHQsIGZvbnQsIGFuZ2xlLCB3aWR0aCk7CiAgICAgIH0KCiAgICAgIHZhciB0ZXh0U3R5bGUsIGxheWVyQ2FjaGUsIHN0eWxlQ2FjaGUsIGluZm87IC8vIENhc3QgdGhlIHZhbHVlIHRvIGEgc3RyaW5nLCBpbiBjYXNlIHdlIHdlcmUgZ2l2ZW4gYSBudW1iZXIKCiAgICAgIHRleHQgPSAiIiArIHRleHQ7IC8vIElmIHRoZSBmb250IGlzIGEgZm9udC1zcGVjIG9iamVjdCwgZ2VuZXJhdGUgYSBDU1MgZGVmaW5pdGlvbgoKICAgICAgaWYgKF90eXBlb2YoZm9udCkgPT09ICJvYmplY3QiKSB7CiAgICAgICAgdGV4dFN0eWxlID0gZm9udC5zdHlsZSArICIgIiArIGZvbnQudmFyaWFudCArICIgIiArIGZvbnQud2VpZ2h0ICsgIiAiICsgZm9udC5zaXplICsgInB4ICIgKyBmb250LmZhbWlseTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0ZXh0U3R5bGUgPSBmb250OwogICAgICB9IC8vIFJldHJpZXZlIChvciBjcmVhdGUpIHRoZSBjYWNoZSBmb3IgdGhlIHRleHQncyBsYXllciBhbmQgc3R5bGVzCgoKICAgICAgbGF5ZXJDYWNoZSA9IHRoaXMuX3RleHRDYWNoZVtsYXllcl07CgogICAgICBpZiAobGF5ZXJDYWNoZSA9PSBudWxsKSB7CiAgICAgICAgbGF5ZXJDYWNoZSA9IHRoaXMuX3RleHRDYWNoZVtsYXllcl0gPSB7fTsKICAgICAgfQoKICAgICAgc3R5bGVDYWNoZSA9IGxheWVyQ2FjaGVbdGV4dFN0eWxlXTsKCiAgICAgIGlmIChzdHlsZUNhY2hlID09IG51bGwpIHsKICAgICAgICBzdHlsZUNhY2hlID0gbGF5ZXJDYWNoZVt0ZXh0U3R5bGVdID0ge307CiAgICAgIH0KCiAgICAgIGluZm8gPSBzdHlsZUNhY2hlW3RleHRdOwoKICAgICAgaWYgKGluZm8gPT0gbnVsbCkgewogICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0OyAvLyBJZiB0aGUgZm9udCB3YXMgcHJvdmlkZWQgYXMgQ1NTLCBjcmVhdGUgYSBkaXYgd2l0aCB0aG9zZQogICAgICAgIC8vIGNsYXNzZXMgYW5kIGV4YW1pbmUgaXQgdG8gZ2VuZXJhdGUgYSBjYW52YXMgZm9udCBzcGVjLgoKICAgICAgICBpZiAoX3R5cGVvZihmb250KSAhPT0gIm9iamVjdCIpIHsKICAgICAgICAgIHZhciBlbGVtZW50ID0gJCgiPGRpdj4mbmJzcDs8L2Rpdj4iKS5jc3MoInBvc2l0aW9uIiwgImFic29sdXRlIikuYWRkQ2xhc3ModHlwZW9mIGZvbnQgPT09ICJzdHJpbmciID8gZm9udCA6IG51bGwpLmFwcGVuZFRvKHRoaXMuZ2V0VGV4dExheWVyKGxheWVyKSk7CiAgICAgICAgICBmb250ID0gewogICAgICAgICAgICBsaW5lSGVpZ2h0OiBlbGVtZW50LmhlaWdodCgpLAogICAgICAgICAgICBzdHlsZTogZWxlbWVudC5jc3MoImZvbnQtc3R5bGUiKSwKICAgICAgICAgICAgdmFyaWFudDogZWxlbWVudC5jc3MoImZvbnQtdmFyaWFudCIpLAogICAgICAgICAgICB3ZWlnaHQ6IGVsZW1lbnQuY3NzKCJmb250LXdlaWdodCIpLAogICAgICAgICAgICBmYW1pbHk6IGVsZW1lbnQuY3NzKCJmb250LWZhbWlseSIpLAogICAgICAgICAgICBjb2xvcjogZWxlbWVudC5jc3MoImNvbG9yIikKICAgICAgICAgIH07IC8vIFNldHRpbmcgbGluZS1oZWlnaHQgdG8gMSwgd2l0aG91dCB1bml0cywgc2V0cyBpdCBlcXVhbAogICAgICAgICAgLy8gdG8gdGhlIGZvbnQtc2l6ZSwgZXZlbiBpZiB0aGUgZm9udC1zaXplIGlzIGFic3RyYWN0LAogICAgICAgICAgLy8gbGlrZSAnc21hbGxlcicuICBUaGlzIGVuYWJsZXMgdXMgdG8gcmVhZCB0aGUgcmVhbCBzaXplCiAgICAgICAgICAvLyB2aWEgdGhlIGVsZW1lbnQncyBoZWlnaHQsIHdvcmtpbmcgYXJvdW5kIGJyb3dzZXJzIHRoYXQKICAgICAgICAgIC8vIHJldHVybiB0aGUgbGl0ZXJhbCAnc21hbGxlcicgdmFsdWUuCgogICAgICAgICAgZm9udC5zaXplID0gZWxlbWVudC5jc3MoImxpbmUtaGVpZ2h0IiwgMSkuaGVpZ2h0KCk7CiAgICAgICAgICBlbGVtZW50LnJlbW92ZSgpOwogICAgICAgIH0KCiAgICAgICAgdGV4dFN0eWxlID0gZm9udC5zdHlsZSArICIgIiArIGZvbnQudmFyaWFudCArICIgIiArIGZvbnQud2VpZ2h0ICsgIiAiICsgZm9udC5zaXplICsgInB4ICIgKyBmb250LmZhbWlseTsgLy8gQ3JlYXRlIGEgbmV3IGluZm8gb2JqZWN0LCBpbml0aWFsaXppbmcgdGhlIGRpbWVuc2lvbnMgdG8KICAgICAgICAvLyB6ZXJvIHNvIHdlIGNhbiBjb3VudCB0aGVtIHVwIGxpbmUtYnktbGluZS4KCiAgICAgICAgaW5mbyA9IHN0eWxlQ2FjaGVbdGV4dF0gPSB7CiAgICAgICAgICB3aWR0aDogMCwKICAgICAgICAgIGhlaWdodDogMCwKICAgICAgICAgIHBvc2l0aW9uczogW10sCiAgICAgICAgICBsaW5lczogW10sCiAgICAgICAgICBmb250OiB7CiAgICAgICAgICAgIGRlZmluaXRpb246IHRleHRTdHlsZSwKICAgICAgICAgICAgY29sb3I6IGZvbnQuY29sb3IKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGNvbnRleHQuc2F2ZSgpOwogICAgICAgIGNvbnRleHQuZm9udCA9IHRleHRTdHlsZTsgLy8gQ2FudmFzIGNhbid0IGhhbmRsZSBtdWx0aS1saW5lIHN0cmluZ3M7IGJyZWFrIG9uIHZhcmlvdXMKICAgICAgICAvLyBuZXdsaW5lcywgaW5jbHVkaW5nIEhUTUwgYnJzLCB0byBidWlsZCBhIGxpc3Qgb2YgbGluZXMuCiAgICAgICAgLy8gTm90ZSB0aGF0IHdlIGNvdWxkIHNwbGl0IGRpcmVjdGx5IG9uIHJlZ2V4cHMsIGJ1dCBJRSA8IDkgaXMKICAgICAgICAvLyBicm9rZW47IHJldmlzaXQgd2hlbiB3ZSBkcm9wIElFIDcvOCBzdXBwb3J0LgoKICAgICAgICB2YXIgbGluZXMgPSAodGV4dCArICIiKS5yZXBsYWNlKC88YnIgP1wvPz58XHJcbnxcci9nLCAiXG4iKS5zcGxpdCgiXG4iKTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7ICsraSkgewogICAgICAgICAgdmFyIGxpbmVUZXh0ID0gbGluZXNbaV0sCiAgICAgICAgICAgICAgbWVhc3VyZWQgPSBjb250ZXh0Lm1lYXN1cmVUZXh0KGxpbmVUZXh0KTsKICAgICAgICAgIGluZm8ud2lkdGggPSBNYXRoLm1heChtZWFzdXJlZC53aWR0aCwgaW5mby53aWR0aCk7CiAgICAgICAgICBpbmZvLmhlaWdodCArPSBmb250LmxpbmVIZWlnaHQ7CiAgICAgICAgICBpbmZvLmxpbmVzLnB1c2goewogICAgICAgICAgICB0ZXh0OiBsaW5lVGV4dCwKICAgICAgICAgICAgd2lkdGg6IG1lYXN1cmVkLndpZHRoLAogICAgICAgICAgICBoZWlnaHQ6IGZvbnQubGluZUhlaWdodAogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGluZm87CiAgICB9OyAvLyBBZGRzIGEgdGV4dCBzdHJpbmcgdG8gdGhlIGNhbnZhcyB0ZXh0IG92ZXJsYXkuCgoKICAgIENhbnZhcy5wcm90b3R5cGUuYWRkVGV4dCA9IGZ1bmN0aW9uIChsYXllciwgeCwgeSwgdGV4dCwgZm9udCwgYW5nbGUsIHdpZHRoLCBoYWxpZ24sIHZhbGlnbikgewogICAgICBpZiAoIXBsb3QuZ2V0T3B0aW9ucygpLmNhbnZhcykgewogICAgICAgIHJldHVybiBhZGRUZXh0LmNhbGwodGhpcywgbGF5ZXIsIHgsIHksIHRleHQsIGZvbnQsIGFuZ2xlLCB3aWR0aCwgaGFsaWduLCB2YWxpZ24pOwogICAgICB9CgogICAgICB2YXIgaW5mbyA9IHRoaXMuZ2V0VGV4dEluZm8obGF5ZXIsIHRleHQsIGZvbnQsIGFuZ2xlLCB3aWR0aCksCiAgICAgICAgICBwb3NpdGlvbnMgPSBpbmZvLnBvc2l0aW9ucywKICAgICAgICAgIGxpbmVzID0gaW5mby5saW5lczsgLy8gVGV4dCBpcyBkcmF3biB3aXRoIGJhc2VsaW5lICdtaWRkbGUnLCB3aGljaCB3ZSBuZWVkIHRvIGFjY291bnQKICAgICAgLy8gZm9yIGJ5IGFkZGluZyBoYWxmIGEgbGluZSdzIGhlaWdodCB0byB0aGUgeSBwb3NpdGlvbi4KCiAgICAgIHkgKz0gaW5mby5oZWlnaHQgLyBsaW5lcy5sZW5ndGggLyAyOyAvLyBUd2VhayB0aGUgaW5pdGlhbCB5LXBvc2l0aW9uIHRvIG1hdGNoIHZlcnRpY2FsIGFsaWdubWVudAoKICAgICAgaWYgKHZhbGlnbiA9PSAibWlkZGxlIikgewogICAgICAgIHkgPSBNYXRoLnJvdW5kKHkgLSBpbmZvLmhlaWdodCAvIDIpOwogICAgICB9IGVsc2UgaWYgKHZhbGlnbiA9PSAiYm90dG9tIikgewogICAgICAgIHkgPSBNYXRoLnJvdW5kKHkgLSBpbmZvLmhlaWdodCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgeSA9IE1hdGgucm91bmQoeSk7CiAgICAgIH0gLy8gRklYTUU6IExFR0FDWSBCUk9XU0VSIEZJWAogICAgICAvLyBBRkZFQ1RTOiBPcGVyYSA8IDEyLjAwCiAgICAgIC8vIE9mZnNldCB0aGUgeSBjb29yZGluYXRlLCBzaW5jZSBPcGVyYSBpcyBvZmYgcHJldHR5CiAgICAgIC8vIGNvbnNpc3RlbnRseSBjb21wYXJlZCB0byB0aGUgb3RoZXIgYnJvd3NlcnMuCgoKICAgICAgaWYgKCEhKHdpbmRvdy5vcGVyYSAmJiB3aW5kb3cub3BlcmEudmVyc2lvbigpLnNwbGl0KCIuIilbMF0gPCAxMikpIHsKICAgICAgICB5IC09IDI7CiAgICAgIH0gLy8gRGV0ZXJtaW5lIHdoZXRoZXIgdGhpcyB0ZXh0IGFscmVhZHkgZXhpc3RzIGF0IHRoaXMgcG9zaXRpb24uCiAgICAgIC8vIElmIHNvLCBtYXJrIGl0IGZvciBpbmNsdXNpb24gaW4gdGhlIG5leHQgcmVuZGVyIHBhc3MuCgoKICAgICAgZm9yICh2YXIgaSA9IDAsIHBvc2l0aW9uOyBwb3NpdGlvbiA9IHBvc2l0aW9uc1tpXTsgaSsrKSB7CiAgICAgICAgaWYgKHBvc2l0aW9uLnggPT0geCAmJiBwb3NpdGlvbi55ID09IHkpIHsKICAgICAgICAgIHBvc2l0aW9uLmFjdGl2ZSA9IHRydWU7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9IC8vIElmIHRoZSB0ZXh0IGRvZXNuJ3QgZXhpc3QgYXQgdGhpcyBwb3NpdGlvbiwgY3JlYXRlIGEgbmV3IGVudHJ5CgoKICAgICAgcG9zaXRpb24gPSB7CiAgICAgICAgYWN0aXZlOiB0cnVlLAogICAgICAgIGxpbmVzOiBbXSwKICAgICAgICB4OiB4LAogICAgICAgIHk6IHkKICAgICAgfTsKICAgICAgcG9zaXRpb25zLnB1c2gocG9zaXRpb24pOyAvLyBGaWxsIGluIHRoZSB4ICYgeSBwb3NpdGlvbnMgb2YgZWFjaCBsaW5lLCBhZGp1c3RpbmcgdGhlbQogICAgICAvLyBpbmRpdmlkdWFsbHkgZm9yIGhvcml6b250YWwgYWxpZ25tZW50LgoKICAgICAgZm9yICh2YXIgaSA9IDAsIGxpbmU7IGxpbmUgPSBsaW5lc1tpXTsgaSsrKSB7CiAgICAgICAgaWYgKGhhbGlnbiA9PSAiY2VudGVyIikgewogICAgICAgICAgcG9zaXRpb24ubGluZXMucHVzaChbTWF0aC5yb3VuZCh4IC0gbGluZS53aWR0aCAvIDIpLCB5XSk7CiAgICAgICAgfSBlbHNlIGlmIChoYWxpZ24gPT0gInJpZ2h0IikgewogICAgICAgICAgcG9zaXRpb24ubGluZXMucHVzaChbTWF0aC5yb3VuZCh4IC0gbGluZS53aWR0aCksIHldKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcG9zaXRpb24ubGluZXMucHVzaChbTWF0aC5yb3VuZCh4KSwgeV0pOwogICAgICAgIH0KCiAgICAgICAgeSArPSBsaW5lLmhlaWdodDsKICAgICAgfQogICAgfTsKICB9CgogICQucGxvdC5wbHVnaW5zLnB1c2goewogICAgaW5pdDogaW5pdCwKICAgIG9wdGlvbnM6IG9wdGlvbnMsCiAgICBuYW1lOiAiY2FudmFzIiwKICAgIHZlcnNpb246ICIxLjAiCiAgfSk7Cn0pKGpRdWVyeSk7"},null]}