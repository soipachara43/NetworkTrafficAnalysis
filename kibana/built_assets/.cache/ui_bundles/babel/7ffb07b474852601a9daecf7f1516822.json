{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/maps/public/connected_components/map/mb/view.js","dependencies":[{"path":"x-pack/legacy/plugins/maps/public/connected_components/map/mb/view.js","mtime":1589249552416},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLk1CTWFwQ29udGFpbmVyID0gdm9pZCAwOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9wdWJsaWMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmMvcGx1Z2lucy9raWJhbmFfdXRpbHMvcHVibGljIik7Cgp2YXIgX3V0aWxzID0gcmVxdWlyZSgiLi91dGlscyIpOwoKdmFyIF9tZXRhID0gcmVxdWlyZSgiLi4vLi4vLi4vbWV0YSIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21tb24vY29uc3RhbnRzIik7Cgp2YXIgX21hcGJveEdsQ3NwID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJtYXBib3gtZ2wvZGlzdC9tYXBib3gtZ2wtY3NwIikpOwoKdmFyIF9tYXBib3hHbENzcFdvcmtlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiISFmaWxlLWxvYWRlciFtYXBib3gtZ2wvZGlzdC9tYXBib3gtZ2wtY3NwLXdvcmtlciIpKTsKCnZhciBfbWFwYm94R2xSdGxUZXh0TWluID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIhIWZpbGUtbG9hZGVyIUBtYXBib3gvbWFwYm94LWdsLXJ0bC10ZXh0L21hcGJveC1nbC1ydGwtdGV4dC5taW4uanMiKSk7Cgp2YXIgX2Nocm9tZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgidWkvY2hyb21lIikpOwoKdmFyIF9tYWtpID0gcmVxdWlyZSgiQGVsYXN0aWMvbWFraSIpOwoKdmFyIF9zcHJpdGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkBlbGFzdGljL21ha2kvZGlzdC9zcHJpdGVAMS5wbmciKSk7Cgp2YXIgX3Nwcml0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkBlbGFzdGljL21ha2kvZGlzdC9zcHJpdGVAMi5wbmciKSk7Cgp2YXIgX2RyYXdfY29udHJvbCA9IHJlcXVpcmUoIi4vZHJhd19jb250cm9sIik7Cgp2YXIgX3Rvb2x0aXBfY29udHJvbCA9IHJlcXVpcmUoIi4vdG9vbHRpcF9jb250cm9sIik7Cgp2YXIgX2VsYXN0aWNzZWFyY2hfZ2VvX3V0aWxzID0gcmVxdWlyZSgiLi4vLi4vLi4vZWxhc3RpY3NlYXJjaF9nZW9fdXRpbHMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCl9tYXBib3hHbENzcC5kZWZhdWx0LndvcmtlclVybCA9IF9tYXBib3hHbENzcFdvcmtlci5kZWZhdWx0OwoKX21hcGJveEdsQ3NwLmRlZmF1bHQuc2V0UlRMVGV4dFBsdWdpbihfbWFwYm94R2xSdGxUZXh0TWluLmRlZmF1bHQpOwoKdmFyIE1CTWFwQ29udGFpbmVyID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkgewogIF9pbmhlcml0cyhNQk1hcENvbnRhaW5lciwgX1JlYWN0JENvbXBvbmVudCk7CgogIGZ1bmN0aW9uIE1CTWFwQ29udGFpbmVyKCkgewogICAgdmFyIF9nZXRQcm90b3R5cGVPZjI7CgogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNQk1hcENvbnRhaW5lcik7CgogICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICB9CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoX2dldFByb3RvdHlwZU9mMiA9IF9nZXRQcm90b3R5cGVPZihNQk1hcENvbnRhaW5lcikpLmNhbGwuYXBwbHkoX2dldFByb3RvdHlwZU9mMiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInN0YXRlIiwgewogICAgICBwcmV2TGF5ZXJMaXN0OiB1bmRlZmluZWQsCiAgICAgIGhhc1N5bmNlZExheWVyTGlzdDogZmFsc2UsCiAgICAgIG1iTWFwOiB1bmRlZmluZWQKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9kZWJvdW5jZWRTeW5jIiwgX2xvZGFzaC5kZWZhdWx0LmRlYm91bmNlKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKF90aGlzLl9pc01vdW50ZWQpIHsKICAgICAgICBpZiAoIV90aGlzLnN0YXRlLmhhc1N5bmNlZExheWVyTGlzdCkgewogICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICBoYXNTeW5jZWRMYXllckxpc3Q6IHRydWUKICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuX3N5bmNNYk1hcFdpdGhMYXllckxpc3QoKTsKCiAgICAgICAgICAgIF90aGlzLl9zeW5jTWJNYXBXaXRoSW5zcGVjdG9yKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIDI1NikpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9zeW5jTWJNYXBXaXRoTWFwU3RhdGUiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLAogICAgICAgICAgaXNNYXBSZWFkeSA9IF90aGlzJHByb3BzLmlzTWFwUmVhZHksCiAgICAgICAgICBnb3RvID0gX3RoaXMkcHJvcHMuZ290bywKICAgICAgICAgIGNsZWFyR290byA9IF90aGlzJHByb3BzLmNsZWFyR290bzsKCiAgICAgIGlmICghaXNNYXBSZWFkeSB8fCAhZ290bykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY2xlYXJHb3RvKCk7CgogICAgICBpZiAoZ290by5ib3VuZHMpIHsKICAgICAgICAvL2NsYW1waW5nIG90IC04OS84OSBsYXRpdHVkZXMgc2luY2UgTWFwYm94Z2wgZG9lcyBub3Qgc2VlbSB0byBoYW5kbGUgYm91bmRzIHRoYXQgY29udGFpbiB0aGUgcG9sZXMgKGxvZ3MgZXJyb3JzIHRvIHRoZSBjb25zb2xlIHdoZW4gdXNpbmcgLTkwLzkwKQogICAgICAgIHZhciBsbkxhdEJvdW5kcyA9IG5ldyBfbWFwYm94R2xDc3AuZGVmYXVsdC5MbmdMYXRCb3VuZHMobmV3IF9tYXBib3hHbENzcC5kZWZhdWx0LkxuZ0xhdCgoMCwgX2VsYXN0aWNzZWFyY2hfZ2VvX3V0aWxzLmNsYW1wVG9Mb25Cb3VuZHMpKGdvdG8uYm91bmRzLm1pbl9sb24pLCAoMCwgX2VsYXN0aWNzZWFyY2hfZ2VvX3V0aWxzLmNsYW1wVG9MYXRCb3VuZHMpKGdvdG8uYm91bmRzLm1pbl9sYXQpKSwgbmV3IF9tYXBib3hHbENzcC5kZWZhdWx0LkxuZ0xhdCgoMCwgX2VsYXN0aWNzZWFyY2hfZ2VvX3V0aWxzLmNsYW1wVG9Mb25Cb3VuZHMpKGdvdG8uYm91bmRzLm1heF9sb24pLCAoMCwgX2VsYXN0aWNzZWFyY2hfZ2VvX3V0aWxzLmNsYW1wVG9MYXRCb3VuZHMpKGdvdG8uYm91bmRzLm1heF9sYXQpKSk7IC8vbWF4Wm9vbSBlbnN1cmUgd2UncmUgbm90IHpvb21pbmcgaW4gdG9vIGZhciBvbiBzaW5nbGUgcG9pbnRzIG9yIHNtYWxsIHNoYXBlcwogICAgICAgIC8vdGhlIHBhZGRpbmcgaXMgdG8gYXZvaWQgdG9vIHRpZ2h0IG9mIGEgZml0IGFyb3VuZCBlZGdlcwoKICAgICAgICBfdGhpcy5zdGF0ZS5tYk1hcC5maXRCb3VuZHMobG5MYXRCb3VuZHMsIHsKICAgICAgICAgIG1heFpvb206IDE3LAogICAgICAgICAgcGFkZGluZzogMTYKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChnb3RvLmNlbnRlcikgewogICAgICAgIF90aGlzLnN0YXRlLm1iTWFwLnNldFpvb20oZ290by5jZW50ZXIuem9vbSk7CgogICAgICAgIF90aGlzLnN0YXRlLm1iTWFwLnNldENlbnRlcih7CiAgICAgICAgICBsbmc6IGdvdG8uY2VudGVyLmxvbiwKICAgICAgICAgIGxhdDogZ290by5jZW50ZXIubGF0CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9zeW5jTWJNYXBXaXRoTGF5ZXJMaXN0IiwgZnVuY3Rpb24gKCkgewogICAgICBpZiAoIV90aGlzLnByb3BzLmlzTWFwUmVhZHkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgICgwLCBfdXRpbHMucmVtb3ZlT3JwaGFuZWRTb3VyY2VzQW5kTGF5ZXJzKShfdGhpcy5zdGF0ZS5tYk1hcCwgX3RoaXMucHJvcHMubGF5ZXJMaXN0KTsKCiAgICAgIF90aGlzLnByb3BzLmxheWVyTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChsYXllcikgewogICAgICAgIHJldHVybiBsYXllci5zeW5jTGF5ZXJXaXRoTUIoX3RoaXMuc3RhdGUubWJNYXApOwogICAgICB9KTsKCiAgICAgICgwLCBfdXRpbHMuc3luY0xheWVyT3JkZXJGb3JTaW5nbGVMYXllcikoX3RoaXMuc3RhdGUubWJNYXAsIF90aGlzLnByb3BzLmxheWVyTGlzdCk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfc3luY01iTWFwV2l0aEluc3BlY3RvciIsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCFfdGhpcy5wcm9wcy5pc01hcFJlYWR5IHx8ICFfdGhpcy5wcm9wcy5pbnNwZWN0b3JBZGFwdGVycy5tYXApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBzdGF0cyA9IHsKICAgICAgICBjZW50ZXI6IF90aGlzLnN0YXRlLm1iTWFwLmdldENlbnRlcigpLnRvQXJyYXkoKSwKICAgICAgICB6b29tOiBfdGhpcy5zdGF0ZS5tYk1hcC5nZXRab29tKCkKICAgICAgfTsKCiAgICAgIF90aGlzLnByb3BzLmluc3BlY3RvckFkYXB0ZXJzLm1hcC5zZXRNYXBTdGF0ZSh7CiAgICAgICAgc3RhdHM6IHN0YXRzLAogICAgICAgIHN0eWxlOiBfdGhpcy5zdGF0ZS5tYk1hcC5nZXRTdHlsZSgpCiAgICAgIH0pOwogICAgfSk7CgogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKE1CTWFwQ29udGFpbmVyLCBbewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICB0aGlzLl9pbml0aWFsaXplTWFwKCk7CgogICAgICB0aGlzLl9pc01vdW50ZWQgPSB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudERpZFVwZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkgewogICAgICBpZiAodGhpcy5zdGF0ZS5tYk1hcCkgewogICAgICAgIC8vIGRvIG5vdCBkZWJvdW5jZSBzeW5jaW5nIG9mIG1hcC1zdGF0ZQogICAgICAgIHRoaXMuX3N5bmNNYk1hcFdpdGhNYXBTdGF0ZSgpOwoKICAgICAgICB0aGlzLl9kZWJvdW5jZWRTeW5jKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnRXaWxsVW5tb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7CiAgICAgIHRoaXMuX2lzTW91bnRlZCA9IGZhbHNlOwoKICAgICAgaWYgKHRoaXMuX2NoZWNrZXIpIHsKICAgICAgICB0aGlzLl9jaGVja2VyLmRlc3Ryb3koKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc3RhdGUubWJNYXApIHsKICAgICAgICB0aGlzLnN0YXRlLm1iTWFwLnJlbW92ZSgpOwogICAgICAgIHRoaXMuc3RhdGUubWJNYXAgPSBudWxsOwogICAgICB9CgogICAgICB0aGlzLnByb3BzLm9uTWFwRGVzdHJveWVkKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2dldE1hcFN0YXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0TWFwU3RhdGUoKSB7CiAgICAgIHZhciB6b29tID0gdGhpcy5zdGF0ZS5tYk1hcC5nZXRab29tKCk7CiAgICAgIHZhciBtYkNlbnRlciA9IHRoaXMuc3RhdGUubWJNYXAuZ2V0Q2VudGVyKCk7CiAgICAgIHZhciBtYkJvdW5kcyA9IHRoaXMuc3RhdGUubWJNYXAuZ2V0Qm91bmRzKCk7CiAgICAgIHJldHVybiB7CiAgICAgICAgem9vbTogX2xvZGFzaC5kZWZhdWx0LnJvdW5kKHpvb20sIF9jb25zdGFudHMuWk9PTV9QUkVDSVNJT04pLAogICAgICAgIGNlbnRlcjogewogICAgICAgICAgbG9uOiBfbG9kYXNoLmRlZmF1bHQucm91bmQobWJDZW50ZXIubG5nLCBfY29uc3RhbnRzLkRFQ0lNQUxfREVHUkVFU19QUkVDSVNJT04pLAogICAgICAgICAgbGF0OiBfbG9kYXNoLmRlZmF1bHQucm91bmQobWJDZW50ZXIubGF0LCBfY29uc3RhbnRzLkRFQ0lNQUxfREVHUkVFU19QUkVDSVNJT04pCiAgICAgICAgfSwKICAgICAgICBleHRlbnQ6IHsKICAgICAgICAgIG1pbkxvbjogX2xvZGFzaC5kZWZhdWx0LnJvdW5kKG1iQm91bmRzLmdldFdlc3QoKSwgX2NvbnN0YW50cy5ERUNJTUFMX0RFR1JFRVNfUFJFQ0lTSU9OKSwKICAgICAgICAgIG1pbkxhdDogX2xvZGFzaC5kZWZhdWx0LnJvdW5kKG1iQm91bmRzLmdldFNvdXRoKCksIF9jb25zdGFudHMuREVDSU1BTF9ERUdSRUVTX1BSRUNJU0lPTiksCiAgICAgICAgICBtYXhMb246IF9sb2Rhc2guZGVmYXVsdC5yb3VuZChtYkJvdW5kcy5nZXRFYXN0KCksIF9jb25zdGFudHMuREVDSU1BTF9ERUdSRUVTX1BSRUNJU0lPTiksCiAgICAgICAgICBtYXhMYXQ6IF9sb2Rhc2guZGVmYXVsdC5yb3VuZChtYkJvdW5kcy5nZXROb3J0aCgpLCBfY29uc3RhbnRzLkRFQ0lNQUxfREVHUkVFU19QUkVDSVNJT04pCiAgICAgICAgfQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogIl9jcmVhdGVNYk1hcEluc3RhbmNlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfY3JlYXRlTWJNYXBJbnN0YW5jZTIgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICB2YXIgbWJTdHlsZSA9IHsKICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiA4LAogICAgICAgICAgICAgICAgICAgIHNvdXJjZXM6IHt9LAogICAgICAgICAgICAgICAgICAgIGxheWVyczogW10KICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgdmFyIGdseXBoVXJsID0gKDAsIF9tZXRhLmdldEdseXBoVXJsKSgpOwoKICAgICAgICAgICAgICAgICAgaWYgKGdseXBoVXJsKSB7CiAgICAgICAgICAgICAgICAgICAgbWJTdHlsZS5nbHlwaHMgPSBnbHlwaFVybDsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRpb25Db250cm9sOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IF90aGlzMi5yZWZzLm1hcENvbnRhaW5lciwKICAgICAgICAgICAgICAgICAgICBzdHlsZTogbWJTdHlsZSwKICAgICAgICAgICAgICAgICAgICBzY3JvbGxab29tOiBfdGhpczIucHJvcHMuc2Nyb2xsWm9vbSwKICAgICAgICAgICAgICAgICAgICBwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6IF9jaHJvbWUuZGVmYXVsdC5nZXRJbmplY3RlZCgncHJlc2VydmVEcmF3aW5nQnVmZmVyJywgZmFsc2UpLAogICAgICAgICAgICAgICAgICAgIGludGVyYWN0aXZlOiAhX3RoaXMyLnByb3BzLmRpc2FibGVJbnRlcmFjdGl2ZQogICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgdmFyIGluaXRpYWxWaWV3ID0gX2xvZGFzaC5kZWZhdWx0LmdldChfdGhpczIucHJvcHMuZ290bywgJ2NlbnRlcicpOwoKICAgICAgICAgICAgICAgICAgaWYgKGluaXRpYWxWaWV3KSB7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy56b29tID0gaW5pdGlhbFZpZXcuem9vbTsKICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNlbnRlciA9IHsKICAgICAgICAgICAgICAgICAgICAgIGxuZzogaW5pdGlhbFZpZXcubG9uLAogICAgICAgICAgICAgICAgICAgICAgbGF0OiBpbml0aWFsVmlldy5sYXQKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuYm91bmRzID0gWy0xNzAsIC02MCwgMTcwLCA3NV07CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHZhciBtYk1hcCA9IG5ldyBfbWFwYm94R2xDc3AuZGVmYXVsdC5NYXAob3B0aW9ucyk7CiAgICAgICAgICAgICAgICAgIG1iTWFwLmRyYWdSb3RhdGUuZGlzYWJsZSgpOwogICAgICAgICAgICAgICAgICBtYk1hcC50b3VjaFpvb21Sb3RhdGUuZGlzYWJsZVJvdGF0aW9uKCk7CgogICAgICAgICAgICAgICAgICBpZiAoIV90aGlzMi5wcm9wcy5kaXNhYmxlSW50ZXJhY3RpdmUpIHsKICAgICAgICAgICAgICAgICAgICBtYk1hcC5hZGRDb250cm9sKG5ldyBfbWFwYm94R2xDc3AuZGVmYXVsdC5OYXZpZ2F0aW9uQ29udHJvbCh7CiAgICAgICAgICAgICAgICAgICAgICBzaG93Q29tcGFzczogZmFsc2UKICAgICAgICAgICAgICAgICAgICB9KSwgJ3RvcC1sZWZ0Jyk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHZhciBlbXB0eUltYWdlOwogICAgICAgICAgICAgICAgICBtYk1hcC5vbignc3R5bGVpbWFnZW1pc3NpbmcnLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChlbXB0eUltYWdlKSB7CiAgICAgICAgICAgICAgICAgICAgICBtYk1hcC5hZGRJbWFnZShlLmlkLCBlbXB0eUltYWdlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBtYk1hcC5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBlbXB0eUltYWdlID0gbmV3IEltYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgZW1wdHlJbWFnZS5zcmMgPSAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFCQ0FZQUFBQWZGY1NKQUFBQUMwbEVRVlFZVjJOZ0FBSUFBQVVBQWFyVnlGRUFBQUFBU1VWT1JLNUNZSUk9JzsKICAgICAgICAgICAgICAgICAgICBlbXB0eUltYWdlLmNyb3NzT3JpZ2luID0gJ2Fub255bW91cyc7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShtYk1hcCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gX2NyZWF0ZU1iTWFwSW5zdGFuY2UoKSB7CiAgICAgICAgcmV0dXJuIF9jcmVhdGVNYk1hcEluc3RhbmNlMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gX2NyZWF0ZU1iTWFwSW5zdGFuY2U7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJfaW5pdGlhbGl6ZU1hcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2luaXRpYWxpemVNYXAyID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICAgIHZhciBtYk1hcDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZU1iTWFwSW5zdGFuY2UoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgbWJNYXAgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA2OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zZXRNYXBJbml0RXJyb3IoX2NvbnRleHQyLnQwLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzTW91bnRlZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgbWJNYXA6IG1iTWFwCiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMy5fbG9hZE1ha2lTcHJpdGVzKCk7CgogICAgICAgICAgICAgICAgICBfdGhpczMuX2luaXRSZXNpemVyQ2hlY2tlcigpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMzLl9yZWdpc3Rlck1hcEV2ZW50TGlzdGVuZXJzKCk7CgogICAgICAgICAgICAgICAgICBfdGhpczMucHJvcHMub25NYXBSZWFkeShfdGhpczMuX2dldE1hcFN0YXRlKCkpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMsIFtbMCwgNl1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gX2luaXRpYWxpemVNYXAoKSB7CiAgICAgICAgcmV0dXJuIF9pbml0aWFsaXplTWFwMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gX2luaXRpYWxpemVNYXA7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJfcmVnaXN0ZXJNYXBFdmVudExpc3RlbmVycyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlZ2lzdGVyTWFwRXZlbnRMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgLy8gbW92ZWVuZCBjYWxsYmFjayBpcyBkZWJvdW5jZWQgdG8gYXZvaWQgdXBkYXRpbmcgbWFwIGV4dGVudCBzdGF0ZSB3aGlsZSBtYXAgZXh0ZW50IGlzIHN0aWxsIGNoYW5naW5nCiAgICAgIC8vIG1vdmVlbmQgaXMgZmlyZWQgd2hpbGUgdGhlIG1hcCBleHRlbnQgaXMgc3RpbGwgY2hhbmdpbmcgaW4gdGhlIGZvbGxvd2luZyBzY2VuYXJpb3MKICAgICAgLy8gMSkgRHVyaW5nIG9wZW5pbmcvY2xvc2luZyBvZiBsYXllciBkZXRhaWxzIHBhbmVsLCB0aGUgRVVJIGFuaW1hdGlvbiByZXN1bHRzIGluIDggbW92ZWVuZCBldmVudHMKICAgICAgLy8gMikgU2V0dGluZyBtYXAgem9vbSBhbmQgY2VudGVyIGZyb20gZ290byBpcyBkb25lIGluIDIgQVBJIGNhbGxzLCByZXN1bHRpbmcgaW4gMiBtb3ZlZW5kIGV2ZW50cwogICAgICB0aGlzLnN0YXRlLm1iTWFwLm9uKCdtb3ZlZW5kJywgX2xvZGFzaC5kZWZhdWx0LmRlYm91bmNlKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQucHJvcHMuZXh0ZW50Q2hhbmdlZChfdGhpczQuX2dldE1hcFN0YXRlKCkpOwogICAgICB9LCAxMDApKTsgLy8gQXR0YWNoIGV2ZW50IG9ubHkgaWYgdmlldyBjb250cm9sIGlzIHZpc2libGUsIHdoaWNoIHNob3dzIGxhdC9sb24KCiAgICAgIGlmICghdGhpcy5wcm9wcy5oaWRlVmlld0NvbnRyb2wpIHsKICAgICAgICB2YXIgdGhyb3R0bGVkU2V0TW91c2VDb29yZGluYXRlcyA9IF9sb2Rhc2guZGVmYXVsdC50aHJvdHRsZShmdW5jdGlvbiAoZSkgewogICAgICAgICAgX3RoaXM0LnByb3BzLnNldE1vdXNlQ29vcmRpbmF0ZXMoewogICAgICAgICAgICBsYXQ6IGUubG5nTGF0LmxhdCwKICAgICAgICAgICAgbG9uOiBlLmxuZ0xhdC5sbmcKICAgICAgICAgIH0pOwogICAgICAgIH0sIDEwMCk7CgogICAgICAgIHRoaXMuc3RhdGUubWJNYXAub24oJ21vdXNlbW92ZScsIHRocm90dGxlZFNldE1vdXNlQ29vcmRpbmF0ZXMpOwogICAgICAgIHRoaXMuc3RhdGUubWJNYXAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhyb3R0bGVkU2V0TW91c2VDb29yZGluYXRlcy5jYW5jZWwoKTsgLy8gY2FuY2VsIGFueSBkZWxheWVkIHNldE1vdXNlQ29vcmRpbmF0ZXMgaW52b2NhdGlvbnMKCiAgICAgICAgICBfdGhpczQucHJvcHMuY2xlYXJNb3VzZUNvb3JkaW5hdGVzKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJfaW5pdFJlc2l6ZXJDaGVja2VyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfaW5pdFJlc2l6ZXJDaGVja2VyKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHRoaXMuX2NoZWNrZXIgPSBuZXcgX3B1YmxpYy5SZXNpemVDaGVja2VyKHRoaXMucmVmcy5tYXBDb250YWluZXIpOwoKICAgICAgdGhpcy5fY2hlY2tlci5vbigncmVzaXplJywgZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNS5zdGF0ZS5tYk1hcC5yZXNpemUoKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2xvYWRNYWtpU3ByaXRlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2xvYWRNYWtpU3ByaXRlcygpIHsKICAgICAgdmFyIHNwcml0ZXMgPSAoMCwgX21ldGEuaXNSZXRpbmEpKCkgPyBfc3ByaXRlMi5kZWZhdWx0IDogX3Nwcml0ZS5kZWZhdWx0OwogICAgICB2YXIganNvbiA9ICgwLCBfbWV0YS5pc1JldGluYSkoKSA/IF9tYWtpLnNwcml0ZXNoZWV0WzJdIDogX21ha2kuc3ByaXRlc2hlZXRbMV07CiAgICAgICgwLCBfdXRpbHMuYWRkU3ByaXRlc2hlZXRUb01hcCkoanNvbiwgc3ByaXRlcywgdGhpcy5zdGF0ZS5tYk1hcCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBkcmF3Q29udHJvbDsKICAgICAgdmFyIHRvb2x0aXBDb250cm9sOwoKICAgICAgaWYgKHRoaXMuc3RhdGUubWJNYXApIHsKICAgICAgICBkcmF3Q29udHJvbCA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2RyYXdfY29udHJvbC5EcmF3Q29udHJvbCwgewogICAgICAgICAgbWJNYXA6IHRoaXMuc3RhdGUubWJNYXAsCiAgICAgICAgICBhZGRGaWx0ZXJzOiB0aGlzLnByb3BzLmFkZEZpbHRlcnMKICAgICAgICB9KTsKICAgICAgICB0b29sdGlwQ29udHJvbCA9ICF0aGlzLnByb3BzLmRpc2FibGVUb29sdGlwQ29udHJvbCA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3Rvb2x0aXBfY29udHJvbC5Ub29sdGlwQ29udHJvbCwgewogICAgICAgICAgbWJNYXA6IHRoaXMuc3RhdGUubWJNYXAsCiAgICAgICAgICBhZGRGaWx0ZXJzOiB0aGlzLnByb3BzLmFkZEZpbHRlcnMsCiAgICAgICAgICBnZW9GaWVsZHM6IHRoaXMucHJvcHMuZ2VvRmllbGRzLAogICAgICAgICAgcmVuZGVyVG9vbHRpcENvbnRlbnQ6IHRoaXMucHJvcHMucmVuZGVyVG9vbHRpcENvbnRlbnQKICAgICAgICB9KSA6IG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgaWQ6ICJtYXBDb250YWluZXIiLAogICAgICAgIGNsYXNzTmFtZTogIm1hcENvbnRhaW5lciIsCiAgICAgICAgcmVmOiAibWFwQ29udGFpbmVyIiwKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAibWFwQ29udGFpbmVyIgogICAgICB9LCBkcmF3Q29udHJvbCwgdG9vbHRpcENvbnRyb2wpOwogICAgfQogIH1dLCBbewogICAga2V5OiAiZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBwcmV2U3RhdGUpIHsKICAgICAgdmFyIG5leHRMYXllckxpc3QgPSBuZXh0UHJvcHMubGF5ZXJMaXN0OwoKICAgICAgaWYgKG5leHRMYXllckxpc3QgIT09IHByZXZTdGF0ZS5wcmV2TGF5ZXJMaXN0KSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHByZXZMYXllckxpc3Q6IG5leHRMYXllckxpc3QsCiAgICAgICAgICBoYXNTeW5jZWRMYXllckxpc3Q6IGZhbHNlCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTUJNYXBDb250YWluZXI7Cn0oX3JlYWN0LmRlZmF1bHQuQ29tcG9uZW50KTsKCmV4cG9ydHMuTUJNYXBDb250YWluZXIgPSBNQk1hcENvbnRhaW5lcjs="},null]}