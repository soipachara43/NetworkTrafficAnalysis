{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/reporting/public/panel_actions/get_csv_panel_action.js","dependencies":[{"path":"x-pack/plugins/reporting/public/panel_actions/get_csv_panel_action.js","mtime":1589249555137},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkdldENzdlJlcG9ydFBhbmVsQWN0aW9uID0gdm9pZCAwOwoKdmFyIF9kYXRlbWF0aCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQGVsYXN0aWMvZGF0ZW1hdGgiKSk7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfbW9tZW50VGltZXpvbmUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIm1vbWVudC10aW1lem9uZSIpKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vc3JjL3BsdWdpbnMvdWlfYWN0aW9ucy9wdWJsaWMiKTsKCnZhciBfbGljZW5zZV9jaGVjayA9IHJlcXVpcmUoIi4uL2xpYi9saWNlbnNlX2NoZWNrIik7Cgp2YXIgX3B1YmxpYzIgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi9zcmMvbGVnYWN5L2NvcmVfcGx1Z2lucy9lbWJlZGRhYmxlX2FwaS9wdWJsaWMvbnBfcmVhZHkvcHVibGljIik7Cgp2YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uL3NyYy9sZWdhY3kvY29yZV9wbHVnaW5zL2tpYmFuYS9wdWJsaWMvZGlzY292ZXIvbnBfcmVhZHkvZW1iZWRkYWJsZS9jb25zdGFudHMiKTsKCnZhciBfY29uc3RhbnRzMiA9IHJlcXVpcmUoIi4uLy4uL2NvbnN0YW50cyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgewogIHRyeSB7CiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7CiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICByZWplY3QoZXJyb3IpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKGluZm8uZG9uZSkgewogICAgcmVzb2x2ZSh2YWx1ZSk7CiAgfSBlbHNlIHsKICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsKICB9Cn0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWxmID0gdGhpcywKICAgICAgICBhcmdzID0gYXJndW1lbnRzOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOwoKICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHsKICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7CiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOwogICAgICB9CgogICAgICBfbmV4dCh1bmRlZmluZWQpOwogICAgfSk7CiAgfTsKfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIGlzU2F2ZWRTZWFyY2hFbWJlZGRhYmxlKGVtYmVkZGFibGUpIHsKICByZXR1cm4gZW1iZWRkYWJsZS50eXBlID09PSBfY29uc3RhbnRzLlNFQVJDSF9FTUJFRERBQkxFX1RZUEU7Cn0KCnZhciBHZXRDc3ZSZXBvcnRQYW5lbEFjdGlvbiA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEdldENzdlJlcG9ydFBhbmVsQWN0aW9uKGNvcmUsIGxpY2Vuc2UkKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBHZXRDc3ZSZXBvcnRQYW5lbEFjdGlvbik7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJpc0Rvd25sb2FkaW5nIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInR5cGUiLCAnJyk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJpZCIsIF9jb25zdGFudHMyLkNTVl9SRVBPUlRJTkdfQUNUSU9OKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImNhbkRvd25sb2FkQ1NWIiwgZmFsc2UpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiY29yZSIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJpc0NvbXBhdGlibGUiLAogICAgLyojX19QVVJFX18qLwogICAgZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoY29udGV4dCkgewogICAgICAgIHZhciBlbWJlZGRhYmxlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jYW5Eb3dubG9hZENTVikgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBlbWJlZGRhYmxlID0gY29udGV4dC5lbWJlZGRhYmxlOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZW1iZWRkYWJsZS5nZXRJbnB1dCgpLnZpZXdNb2RlICE9PSBfcHVibGljMi5WaWV3TW9kZS5FRElUICYmIGVtYmVkZGFibGUudHlwZSA9PT0gJ3NlYXJjaCcpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZXhlY3V0ZSIsCiAgICAvKiNfX1BVUkVfXyovCiAgICBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGNvbnRleHQpIHsKICAgICAgICB2YXIgZW1iZWRkYWJsZSwgX2VtYmVkZGFibGUkZ2V0SW5wdXQsIF9lbWJlZGRhYmxlJGdldElucHV0JCwgdG8sIGZyb20sIHNlYXJjaEVtYmVkZGFibGUsIHNlYXJjaFJlcXVlc3RCb2R5LCBzdGF0ZSwga2liYW5hVGltZXpvbmUsIGlkLCBmaWxlbmFtZSwgdGltZXpvbmUsIGZyb21UaW1lLCB0b1RpbWUsIGJvZHk7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBlbWJlZGRhYmxlID0gY29udGV4dC5lbWJlZGRhYmxlOwoKICAgICAgICAgICAgICAgIGlmIChpc1NhdmVkU2VhcmNoRW1iZWRkYWJsZShlbWJlZGRhYmxlKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRocm93IG5ldyBfcHVibGljLkluY29tcGF0aWJsZUFjdGlvbkVycm9yKCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMuaXNEb3dubG9hZGluZykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgX2VtYmVkZGFibGUkZ2V0SW5wdXQgPSBlbWJlZGRhYmxlLmdldElucHV0KCksIF9lbWJlZGRhYmxlJGdldElucHV0JCA9IF9lbWJlZGRhYmxlJGdldElucHV0LnRpbWVSYW5nZSwgdG8gPSBfZW1iZWRkYWJsZSRnZXRJbnB1dCQudG8sIGZyb20gPSBfZW1iZWRkYWJsZSRnZXRJbnB1dCQuZnJvbTsKICAgICAgICAgICAgICAgIHNlYXJjaEVtYmVkZGFibGUgPSBlbWJlZGRhYmxlOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA5OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldFNlYXJjaFJlcXVlc3RCb2R5KHsKICAgICAgICAgICAgICAgICAgc2VhcmNoRW1iZWRkYWJsZTogc2VhcmNoRW1iZWRkYWJsZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIHNlYXJjaFJlcXVlc3RCb2R5ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBzdGF0ZSA9IF8ucGljayhzZWFyY2hSZXF1ZXN0Qm9keSwgWydzb3J0JywgJ2RvY3ZhbHVlX2ZpZWxkcycsICdxdWVyeSddKTsKICAgICAgICAgICAgICAgIGtpYmFuYVRpbWV6b25lID0gX3RoaXMuY29yZS51aVNldHRpbmdzLmdldCgnZGF0ZUZvcm1hdDp0eicpOwogICAgICAgICAgICAgICAgaWQgPSAic2VhcmNoOiIuY29uY2F0KGVtYmVkZGFibGUuZ2V0U2F2ZWRTZWFyY2goKS5pZCk7CiAgICAgICAgICAgICAgICBmaWxlbmFtZSA9IGVtYmVkZGFibGUuZ2V0VGl0bGUoKTsKICAgICAgICAgICAgICAgIHRpbWV6b25lID0ga2liYW5hVGltZXpvbmUgPT09ICdCcm93c2VyJyA/IF9tb21lbnRUaW1lem9uZS5kZWZhdWx0LnR6Lmd1ZXNzKCkgOiBraWJhbmFUaW1lem9uZTsKICAgICAgICAgICAgICAgIGZyb21UaW1lID0gX2RhdGVtYXRoLmRlZmF1bHQucGFyc2UoZnJvbSk7CiAgICAgICAgICAgICAgICB0b1RpbWUgPSBfZGF0ZW1hdGguZGVmYXVsdC5wYXJzZSh0byk7CgogICAgICAgICAgICAgICAgaWYgKCEoIWZyb21UaW1lIHx8ICF0b1RpbWUpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfdGhpcy5vbkdlbmVyYXRpb25GYWlsKG5ldyBFcnJvcigiSW52YWxpZCB0aW1lIHJhbmdlOiBGcm9tOiAiLmNvbmNhdChmcm9tVGltZSwgIiwgVG86ICIpLmNvbmNhdCh0b1RpbWUpKSkpOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgYm9keSA9IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgdGltZXJhbmdlOiB7CiAgICAgICAgICAgICAgICAgICAgbWluOiBmcm9tVGltZS5mb3JtYXQoKSwKICAgICAgICAgICAgICAgICAgICBtYXg6IHRvVGltZS5mb3JtYXQoKSwKICAgICAgICAgICAgICAgICAgICB0aW1lem9uZTogdGltZXpvbmUKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgc3RhdGU6IHN0YXRlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF90aGlzLmlzRG93bmxvYWRpbmcgPSB0cnVlOwoKICAgICAgICAgICAgICAgIF90aGlzLmNvcmUubm90aWZpY2F0aW9ucy50b2FzdHMuYWRkU3VjY2Vzcyh7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sucmVwb3J0aW5nLmRhc2hib2FyZC5jc3ZEb3dubG9hZFN0YXJ0ZWRUaXRsZScsIHsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkNTViBEb3dubG9hZCBTdGFydGVkIgogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgdGV4dDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnJlcG9ydGluZy5kYXNoYm9hcmQuY3N2RG93bmxvYWRTdGFydGVkTWVzc2FnZScsIHsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIllvdXIgQ1NWIHdpbGwgZG93bmxvYWQgbW9tZW50YXJpbHkuIgogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgJ2RhdGEtdGVzdC1zdWJqJzogJ2NzdkRvd25sb2FkU3RhcnRlZCcKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY29yZS5odHRwLnBvc3QoIiIuY29uY2F0KF9jb25zdGFudHMyLkFQSV9HRU5FUkFURV9JTU1FRElBVEUsICIvIikuY29uY2F0KGlkKSwgewogICAgICAgICAgICAgICAgICBib2R5OiBib2R5CiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyYXdSZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBfdGhpcy5pc0Rvd25sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIHZhciBkb3dubG9hZCA9ICIiLmNvbmNhdChmaWxlbmFtZSwgIi5jc3YiKTsKICAgICAgICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbcmF3UmVzcG9uc2VdLCB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQvY3N2O2NoYXJzZXQ9dXRmLTg7JwogICAgICAgICAgICAgICAgICB9KTsgLy8gSGFjayBmb3IgSUUxMSBTdXBwb3J0CgogICAgICAgICAgICAgICAgICBpZiAod2luZG93Lm5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYihibG9iLCBkb3dubG9hZCk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHZhciBhID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgICAgICAgdmFyIGRvd25sb2FkT2JqZWN0ID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgICAgICAgICAgIGEuaHJlZiA9IGRvd25sb2FkT2JqZWN0OwogICAgICAgICAgICAgICAgICBhLmRvd25sb2FkID0gZG93bmxvYWQ7CiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgICAgICAgICAgIGEuY2xpY2soKTsKICAgICAgICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwoZG93bmxvYWRPYmplY3QpOwogICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goX3RoaXMub25HZW5lcmF0aW9uRmFpbC5iaW5kKF90aGlzKSk7CgogICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gKF94MikgewogICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpKTsKCiAgICB0aGlzLmlzRG93bmxvYWRpbmcgPSBmYWxzZTsKICAgIHRoaXMuY29yZSA9IGNvcmU7CiAgICBsaWNlbnNlJC5zdWJzY3JpYmUoZnVuY3Rpb24gKGxpY2Vuc2UpIHsKICAgICAgdmFyIHJlc3VsdHMgPSBsaWNlbnNlLmNoZWNrKCdyZXBvcnRpbmcnLCAnYmFzaWMnKTsKCiAgICAgIHZhciBfY2hlY2tMaWNlbnNlID0gKDAsIF9saWNlbnNlX2NoZWNrLmNoZWNrTGljZW5zZSkocmVzdWx0cyksCiAgICAgICAgICBzaG93TGlua3MgPSBfY2hlY2tMaWNlbnNlLnNob3dMaW5rczsKCiAgICAgIF90aGlzLmNhbkRvd25sb2FkQ1NWID0gc2hvd0xpbmtzOwogICAgfSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoR2V0Q3N2UmVwb3J0UGFuZWxBY3Rpb24sIFt7CiAgICBrZXk6ICJnZXRJY29uVHlwZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SWNvblR5cGUoKSB7CiAgICAgIHJldHVybiAnZG9jdW1lbnQnOwogICAgfQogIH0sIHsKICAgIGtleTogImdldERpc3BsYXlOYW1lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREaXNwbGF5TmFtZSgpIHsKICAgICAgcmV0dXJuIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5yZXBvcnRpbmcuZGFzaGJvYXJkLmRvd25sb2FkQ3N2UGFuZWxUaXRsZScsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0Rvd25sb2FkIENTVicKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0U2VhcmNoUmVxdWVzdEJvZHkiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRTZWFyY2hSZXF1ZXN0Qm9keSA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKF9yZWYzKSB7CiAgICAgICAgdmFyIHNlYXJjaEVtYmVkZGFibGUsIGFkYXB0ZXJzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzZWFyY2hFbWJlZGRhYmxlID0gX3JlZjMuc2VhcmNoRW1iZWRkYWJsZTsKICAgICAgICAgICAgICAgIGFkYXB0ZXJzID0gc2VhcmNoRW1iZWRkYWJsZS5nZXRJbnNwZWN0b3JBZGFwdGVycygpOwoKICAgICAgICAgICAgICAgIGlmIChhZGFwdGVycykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCB7fSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGlmICghKGFkYXB0ZXJzLnJlcXVlc3RzLnJlcXVlc3RzLmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwge30pOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgc2VhcmNoRW1iZWRkYWJsZS5nZXRTYXZlZFNlYXJjaCgpLnNlYXJjaFNvdXJjZS5nZXRTZWFyY2hSZXF1ZXN0Qm9keSgpKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0U2VhcmNoUmVxdWVzdEJvZHkoX3gzKSB7CiAgICAgICAgcmV0dXJuIF9nZXRTZWFyY2hSZXF1ZXN0Qm9keS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0U2VhcmNoUmVxdWVzdEJvZHk7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJvbkdlbmVyYXRpb25GYWlsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkdlbmVyYXRpb25GYWlsKGVycm9yKSB7CiAgICAgIHRoaXMuaXNEb3dubG9hZGluZyA9IGZhbHNlOwogICAgICB0aGlzLmNvcmUubm90aWZpY2F0aW9ucy50b2FzdHMuYWRkRGFuZ2VyKHsKICAgICAgICB0aXRsZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnJlcG9ydGluZy5kYXNoYm9hcmQuZmFpbGVkQ3N2RG93bmxvYWRUaXRsZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQ1NWIGRvd25sb2FkIGZhaWxlZCIKICAgICAgICB9KSwKICAgICAgICB0ZXh0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sucmVwb3J0aW5nLmRhc2hib2FyZC5mYWlsZWRDc3ZEb3dubG9hZE1lc3NhZ2UnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIldlIGNvdWxkbid0IGdlbmVyYXRlIHlvdXIgQ1NWIGF0IHRoaXMgdGltZS4iCiAgICAgICAgfSksCiAgICAgICAgJ2RhdGEtdGVzdC1zdWJqJzogJ2Rvd25sb2FkQ3N2RmFpbCcKICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gR2V0Q3N2UmVwb3J0UGFuZWxBY3Rpb247Cn0oKTsKCmV4cG9ydHMuR2V0Q3N2UmVwb3J0UGFuZWxBY3Rpb24gPSBHZXRDc3ZSZXBvcnRQYW5lbEFjdGlvbjs="},null]}