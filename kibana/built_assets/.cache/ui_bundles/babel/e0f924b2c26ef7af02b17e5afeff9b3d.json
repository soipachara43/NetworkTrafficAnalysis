{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/core/public/chrome/chrome_service.js","dependencies":[{"path":"src/core/public/chrome/chrome_service.js","mtime":1589249549278},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIkNocm9tZVJlY2VudGx5QWNjZXNzZWQiLCB7CiAgZW51bWVyYWJsZTogdHJ1ZSwKICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgIHJldHVybiBfcmVjZW50bHlfYWNjZXNzZWQuQ2hyb21lUmVjZW50bHlBY2Nlc3NlZDsKICB9Cn0pOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIkNocm9tZU5hdkNvbnRyb2xzIiwgewogIGVudW1lcmFibGU6IHRydWUsCiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICByZXR1cm4gX25hdl9jb250cm9scy5DaHJvbWVOYXZDb250cm9sczsKICB9Cn0pOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIkNocm9tZURvY1RpdGxlIiwgewogIGVudW1lcmFibGU6IHRydWUsCiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICByZXR1cm4gX2RvY190aXRsZS5DaHJvbWVEb2NUaXRsZTsKICB9Cn0pOwpleHBvcnRzLkNocm9tZVNlcnZpY2UgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcnhqcyA9IHJlcXVpcmUoInJ4anMiKTsKCnZhciBfb3BlcmF0b3JzID0gcmVxdWlyZSgicnhqcy9vcGVyYXRvcnMiKTsKCnZhciBfdXJsID0gcmVxdWlyZSgidXJsIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfbmF2X2xpbmtzID0gcmVxdWlyZSgiLi9uYXZfbGlua3MiKTsKCnZhciBfcmVjZW50bHlfYWNjZXNzZWQgPSByZXF1aXJlKCIuL3JlY2VudGx5X2FjY2Vzc2VkIik7Cgp2YXIgX25hdl9jb250cm9scyA9IHJlcXVpcmUoIi4vbmF2X2NvbnRyb2xzIik7Cgp2YXIgX2RvY190aXRsZSA9IHJlcXVpcmUoIi4vZG9jX3RpdGxlIik7Cgp2YXIgX3VpID0gcmVxdWlyZSgiLi91aSIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuL2NvbnN0YW50cyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgewogIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsKICBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09ICJbb2JqZWN0IEFyZ3VtZW50c10iKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHsKICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgIGFycjJbaV0gPSBhcnJbaV07CiAgICB9CgogICAgcmV0dXJuIGFycjI7CiAgfQp9CgpmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7CiAgdHJ5IHsKICAgIHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsKICAgIHZhciB2YWx1ZSA9IGluZm8udmFsdWU7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIHJlamVjdChlcnJvcik7CiAgICByZXR1cm47CiAgfQoKICBpZiAoaW5mby5kb25lKSB7CiAgICByZXNvbHZlKHZhbHVlKTsKICB9IGVsc2UgewogICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOwogIH0KfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgdmFyIHNlbGYgPSB0aGlzLAogICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7CgogICAgICBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgewogICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsKICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7CiAgICAgIH0KCiAgICAgIF9uZXh0KHVuZGVmaW5lZCk7CiAgICB9KTsKICB9Owp9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgewogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIElTX0xPQ0tFRF9LRVkgPSAnY29yZS5jaHJvbWUuaXNMb2NrZWQnOwovKiogQHB1YmxpYyAqLwoKLyoqIEBpbnRlcm5hbCAqLwoKdmFyIENocm9tZVNlcnZpY2UgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBDaHJvbWVTZXJ2aWNlKHBhcmFtcykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENocm9tZVNlcnZpY2UpOwoKICAgIHRoaXMucGFyYW1zID0gcGFyYW1zOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaXNWaXNpYmxlJCIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhcHBIaWRkZW4kIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInRvZ2dsZUhpZGRlbiQiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic3RvcCQiLCBuZXcgX3J4anMuUmVwbGF5U3ViamVjdCgxKSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJuYXZDb250cm9scyIsIG5ldyBfbmF2X2NvbnRyb2xzLk5hdkNvbnRyb2xzU2VydmljZSgpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm5hdkxpbmtzIiwgbmV3IF9uYXZfbGlua3MuTmF2TGlua3NTZXJ2aWNlKCkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicmVjZW50bHlBY2Nlc3NlZCIsIG5ldyBfcmVjZW50bHlfYWNjZXNzZWQuUmVjZW50bHlBY2Nlc3NlZFNlcnZpY2UoKSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkb2NUaXRsZSIsIG5ldyBfZG9jX3RpdGxlLkRvY1RpdGxlU2VydmljZSgpKTsKICB9CiAgLyoqCiAgICogVGhlc2Ugb2JzZXJ2YWJsZXMgYWxsb3cgY29uc3VtZXJzIHRvIHRvZ2dsZSB0aGUgY2hyb21lIHZpc2liaWxpdHkgdmlhIGVpdGhlcjoKICAgKiAgIDEuIFVzaW5nIHNldElzVmlzaWJsZSgpIHRvIHRyaWdnZXIgdGhlIG5leHQgY2hyb21lSGlkZGVuJAogICAqICAgMi4gU2V0dGluZyBgY2hyb21lbGVzc2Agd2hlbiByZWdpc3RlcmluZyBhbiBhcHBsaWNhdGlvbiwgd2hpY2ggd2lsbAogICAqICAgICAgcmVzZXQgdGhlIHZpc2liaWxpdHkgd2hlbmV2ZXIgdGhlIG5leHQgYXBwbGljYXRpb24gaXMgbW91bnRlZAogICAqICAgMy4gSGF2aW5nICJlbWJlZCIgaW4gdGhlIHF1ZXJ5IHN0cmluZwogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKENocm9tZVNlcnZpY2UsIFt7CiAgICBrZXk6ICJpbml0VmlzaWJpbGl0eSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdFZpc2liaWxpdHkoYXBwbGljYXRpb24pIHsKICAgICAgLy8gU3RhcnQgb2ZmIHRoZSBjaHJvbWUgc2VydmljZSBoaWRkZW4gaWYgImVtYmVkIiBpcyBpbiB0aGUgaGFzaCBxdWVyeSBzdHJpbmcuCiAgICAgIHZhciBpc0VtYmVkZGVkID0gJ2VtYmVkJyBpbiAoMCwgX3VybC5wYXJzZSkobG9jYXRpb24uaGFzaC5zbGljZSgxKSwgdHJ1ZSkucXVlcnk7CiAgICAgIHRoaXMudG9nZ2xlSGlkZGVuJCA9IG5ldyBfcnhqcy5CZWhhdmlvclN1YmplY3QoaXNFbWJlZGRlZCk7CiAgICAgIHRoaXMuYXBwSGlkZGVuJCA9ICgwLCBfcnhqcy5tZXJnZSkoIC8vIERlZmF1bHQgdGhlIGFwcCBiZWluZyBoaWRkZW4gdG8gdGhlIHNhbWUgdmFsdWUgaW5pdGlhbCB2YWx1ZSBhcyB0aGUgY2hyb21lIHZpc2liaWxpdHkKICAgICAgLy8gaW4gY2FzZSB0aGUgYXBwbGljYXRpb24gc2VydmljZSBoYXMgbm90IGVtaXR0ZWQgYW4gYXBwIElEIHlldCwgc2luY2Ugd2Ugd2FudCB0byB0cmlnZ2VyCiAgICAgIC8vIGNvbWJpbmVMYXRlc3QgYmVsb3cgcmVnYXJkbGVzcyBvZiBoYXZpbmcgYW4gYXBwbGljYXRpb24gdmFsdWUgeWV0LgogICAgICAoMCwgX3J4anMub2YpKGlzRW1iZWRkZWQpLCBhcHBsaWNhdGlvbi5jdXJyZW50QXBwSWQkLnBpcGUoKDAsIF9vcGVyYXRvcnMuZmxhdE1hcCkoZnVuY3Rpb24gKGFwcElkKSB7CiAgICAgICAgcmV0dXJuIGFwcGxpY2F0aW9uLmFwcGxpY2F0aW9ucyQucGlwZSgoMCwgX29wZXJhdG9ycy5tYXApKGZ1bmN0aW9uIChhcHBsaWNhdGlvbnMpIHsKICAgICAgICAgIHJldHVybiAhIWFwcElkICYmIGFwcGxpY2F0aW9ucy5oYXMoYXBwSWQpICYmICEhYXBwbGljYXRpb25zLmdldChhcHBJZCkuY2hyb21lbGVzczsKICAgICAgICB9KSk7CiAgICAgIH0pKSk7CiAgICAgIHRoaXMuaXNWaXNpYmxlJCA9ICgwLCBfcnhqcy5jb21iaW5lTGF0ZXN0KShbdGhpcy5hcHBIaWRkZW4kLCB0aGlzLnRvZ2dsZUhpZGRlbiRdKS5waXBlKCgwLCBfb3BlcmF0b3JzLm1hcCkoZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKSwKICAgICAgICAgICAgYXBwSGlkZGVuID0gX3JlZjJbMF0sCiAgICAgICAgICAgIHRvZ2dsZUhpZGRlbiA9IF9yZWYyWzFdOwoKICAgICAgICByZXR1cm4gIShhcHBIaWRkZW4gfHwgdG9nZ2xlSGlkZGVuKTsKICAgICAgfSksICgwLCBfb3BlcmF0b3JzLnRha2VVbnRpbCkodGhpcy5zdG9wJCkpOwogICAgfQogIH0sIHsKICAgIGtleTogInN0YXJ0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc3RhcnQgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKF9yZWYzKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgdmFyIGFwcGxpY2F0aW9uLCBkb2NMaW5rcywgaHR0cCwgaW5qZWN0ZWRNZXRhZGF0YSwgbm90aWZpY2F0aW9ucywgdWlTZXR0aW5ncywgYXBwVGl0bGUkLCBicmFuZCQsIGFwcGxpY2F0aW9uQ2xhc3NlcyQsIGhlbHBFeHRlbnNpb24kLCBicmVhZGNydW1icyQsIGJhZGdlJCwgaGVscFN1cHBvcnRVcmwkLCBpc05hdkRyYXdlckxvY2tlZCQsIG5hdkNvbnRyb2xzLCBuYXZMaW5rcywgcmVjZW50bHlBY2Nlc3NlZCwgZG9jVGl0bGUsIHNldElzTmF2RHJhd2VyTG9ja2VkLCBnZXRJc05hdkRyYXdlckxvY2tlZCQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgYXBwbGljYXRpb24gPSBfcmVmMy5hcHBsaWNhdGlvbiwgZG9jTGlua3MgPSBfcmVmMy5kb2NMaW5rcywgaHR0cCA9IF9yZWYzLmh0dHAsIGluamVjdGVkTWV0YWRhdGEgPSBfcmVmMy5pbmplY3RlZE1ldGFkYXRhLCBub3RpZmljYXRpb25zID0gX3JlZjMubm90aWZpY2F0aW9ucywgdWlTZXR0aW5ncyA9IF9yZWYzLnVpU2V0dGluZ3M7CiAgICAgICAgICAgICAgICB0aGlzLmluaXRWaXNpYmlsaXR5KGFwcGxpY2F0aW9uKTsKICAgICAgICAgICAgICAgIGFwcFRpdGxlJCA9IG5ldyBfcnhqcy5CZWhhdmlvclN1YmplY3QoJ0tpYmFuYScpOwogICAgICAgICAgICAgICAgYnJhbmQkID0gbmV3IF9yeGpzLkJlaGF2aW9yU3ViamVjdCh7fSk7CiAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkNsYXNzZXMkID0gbmV3IF9yeGpzLkJlaGF2aW9yU3ViamVjdChuZXcgU2V0KCkpOwogICAgICAgICAgICAgICAgaGVscEV4dGVuc2lvbiQgPSBuZXcgX3J4anMuQmVoYXZpb3JTdWJqZWN0KHVuZGVmaW5lZCk7CiAgICAgICAgICAgICAgICBicmVhZGNydW1icyQgPSBuZXcgX3J4anMuQmVoYXZpb3JTdWJqZWN0KFtdKTsKICAgICAgICAgICAgICAgIGJhZGdlJCA9IG5ldyBfcnhqcy5CZWhhdmlvclN1YmplY3QodW5kZWZpbmVkKTsKICAgICAgICAgICAgICAgIGhlbHBTdXBwb3J0VXJsJCA9IG5ldyBfcnhqcy5CZWhhdmlvclN1YmplY3QoX2NvbnN0YW50cy5LSUJBTkFfQVNLX0VMQVNUSUNfTElOSyk7CiAgICAgICAgICAgICAgICBpc05hdkRyYXdlckxvY2tlZCQgPSBuZXcgX3J4anMuQmVoYXZpb3JTdWJqZWN0KGxvY2FsU3RvcmFnZS5nZXRJdGVtKElTX0xPQ0tFRF9LRVkpID09PSAndHJ1ZScpOwogICAgICAgICAgICAgICAgbmF2Q29udHJvbHMgPSB0aGlzLm5hdkNvbnRyb2xzLnN0YXJ0KCk7CiAgICAgICAgICAgICAgICBuYXZMaW5rcyA9IHRoaXMubmF2TGlua3Muc3RhcnQoewogICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbjogYXBwbGljYXRpb24sCiAgICAgICAgICAgICAgICAgIGh0dHA6IGh0dHAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVjZW50bHlBY2Nlc3NlZC5zdGFydCh7CiAgICAgICAgICAgICAgICAgIGh0dHA6IGh0dHAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgcmVjZW50bHlBY2Nlc3NlZCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBkb2NUaXRsZSA9IHRoaXMuZG9jVGl0bGUuc3RhcnQoewogICAgICAgICAgICAgICAgICBkb2N1bWVudDogd2luZG93LmRvY3VtZW50CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBzZXRJc05hdkRyYXdlckxvY2tlZCA9IGZ1bmN0aW9uIHNldElzTmF2RHJhd2VyTG9ja2VkKGlzTG9ja2VkKSB7CiAgICAgICAgICAgICAgICAgIGlzTmF2RHJhd2VyTG9ja2VkJC5uZXh0KGlzTG9ja2VkKTsKICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oSVNfTE9DS0VEX0tFWSwgIiIuY29uY2F0KGlzTG9ja2VkKSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGdldElzTmF2RHJhd2VyTG9ja2VkJCA9IGlzTmF2RHJhd2VyTG9ja2VkJC5waXBlKCgwLCBfb3BlcmF0b3JzLnRha2VVbnRpbCkodGhpcy5zdG9wJCkpOwoKICAgICAgICAgICAgICAgIGlmICghdGhpcy5wYXJhbXMuYnJvd3NlclN1cHBvcnRzQ3NwICYmIGluamVjdGVkTWV0YWRhdGEuZ2V0Q3NwQ29uZmlnKCkud2FybkxlZ2FjeUJyb3dzZXJzKSB7CiAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbnMudG9hc3RzLmFkZFdhcm5pbmcoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2NvcmUuY2hyb21lLmxlZ2FjeUJyb3dzZXJXYXJuaW5nJywgewogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnWW91ciBicm93c2VyIGRvZXMgbm90IG1lZXQgdGhlIHNlY3VyaXR5IHJlcXVpcmVtZW50cyBmb3IgS2liYW5hLicKICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgICAgbmF2Q29udHJvbHM6IG5hdkNvbnRyb2xzLAogICAgICAgICAgICAgICAgICBuYXZMaW5rczogbmF2TGlua3MsCiAgICAgICAgICAgICAgICAgIHJlY2VudGx5QWNjZXNzZWQ6IHJlY2VudGx5QWNjZXNzZWQsCiAgICAgICAgICAgICAgICAgIGRvY1RpdGxlOiBkb2NUaXRsZSwKICAgICAgICAgICAgICAgICAgZ2V0SGVhZGVyQ29tcG9uZW50OiBmdW5jdGlvbiBnZXRIZWFkZXJDb21wb25lbnQoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LmRlZmF1bHQuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3VpLkxvYWRpbmdJbmRpY2F0b3IsIHsKICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdDb3VudCQ6IGh0dHAuZ2V0TG9hZGluZ0NvdW50JCgpCiAgICAgICAgICAgICAgICAgICAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3VpLkhlYWRlciwgewogICAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb246IGFwcGxpY2F0aW9uLAogICAgICAgICAgICAgICAgICAgICAgYXBwVGl0bGUkOiBhcHBUaXRsZSQucGlwZSgoMCwgX29wZXJhdG9ycy50YWtlVW50aWwpKF90aGlzLnN0b3AkKSksCiAgICAgICAgICAgICAgICAgICAgICBiYWRnZSQ6IGJhZGdlJC5waXBlKCgwLCBfb3BlcmF0b3JzLnRha2VVbnRpbCkoX3RoaXMuc3RvcCQpKSwKICAgICAgICAgICAgICAgICAgICAgIGJhc2VQYXRoOiBodHRwLmJhc2VQYXRoLAogICAgICAgICAgICAgICAgICAgICAgYnJlYWRjcnVtYnMkOiBicmVhZGNydW1icyQucGlwZSgoMCwgX29wZXJhdG9ycy50YWtlVW50aWwpKF90aGlzLnN0b3AkKSksCiAgICAgICAgICAgICAgICAgICAgICBraWJhbmFEb2NMaW5rOiBkb2NMaW5rcy5saW5rcy5raWJhbmEsCiAgICAgICAgICAgICAgICAgICAgICBmb3JjZUFwcFN3aXRjaGVyTmF2aWdhdGlvbiQ6IG5hdkxpbmtzLmdldEZvcmNlQXBwU3dpdGNoZXJOYXZpZ2F0aW9uJCgpLAogICAgICAgICAgICAgICAgICAgICAgaGVscEV4dGVuc2lvbiQ6IGhlbHBFeHRlbnNpb24kLnBpcGUoKDAsIF9vcGVyYXRvcnMudGFrZVVudGlsKShfdGhpcy5zdG9wJCkpLAogICAgICAgICAgICAgICAgICAgICAgaGVscFN1cHBvcnRVcmwkOiBoZWxwU3VwcG9ydFVybCQucGlwZSgoMCwgX29wZXJhdG9ycy50YWtlVW50aWwpKF90aGlzLnN0b3AkKSksCiAgICAgICAgICAgICAgICAgICAgICBob21lSHJlZjogaHR0cC5iYXNlUGF0aC5wcmVwZW5kKCcvYXBwL2tpYmFuYSMvaG9tZScpLAogICAgICAgICAgICAgICAgICAgICAgaXNWaXNpYmxlJDogX3RoaXMuaXNWaXNpYmxlJCwKICAgICAgICAgICAgICAgICAgICAgIGtpYmFuYVZlcnNpb246IGluamVjdGVkTWV0YWRhdGEuZ2V0S2liYW5hVmVyc2lvbigpLAogICAgICAgICAgICAgICAgICAgICAgbGVnYWN5TW9kZTogaW5qZWN0ZWRNZXRhZGF0YS5nZXRMZWdhY3lNb2RlKCksCiAgICAgICAgICAgICAgICAgICAgICBuYXZMaW5rcyQ6IG5hdkxpbmtzLmdldE5hdkxpbmtzJCgpLAogICAgICAgICAgICAgICAgICAgICAgcmVjZW50bHlBY2Nlc3NlZCQ6IHJlY2VudGx5QWNjZXNzZWQuZ2V0JCgpLAogICAgICAgICAgICAgICAgICAgICAgbmF2Q29udHJvbHNMZWZ0JDogbmF2Q29udHJvbHMuZ2V0TGVmdCQoKSwKICAgICAgICAgICAgICAgICAgICAgIG5hdkNvbnRyb2xzUmlnaHQkOiBuYXZDb250cm9scy5nZXRSaWdodCQoKSwKICAgICAgICAgICAgICAgICAgICAgIG9uSXNMb2NrZWRVcGRhdGU6IHNldElzTmF2RHJhd2VyTG9ja2VkLAogICAgICAgICAgICAgICAgICAgICAgaXNMb2NrZWQkOiBnZXRJc05hdkRyYXdlckxvY2tlZCQKICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHNldEFwcFRpdGxlOiBmdW5jdGlvbiBzZXRBcHBUaXRsZShhcHBUaXRsZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBhcHBUaXRsZSQubmV4dChhcHBUaXRsZSk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGdldEJyYW5kJDogZnVuY3Rpb24gZ2V0QnJhbmQkKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBicmFuZCQucGlwZSgoMCwgX29wZXJhdG9ycy50YWtlVW50aWwpKF90aGlzLnN0b3AkKSk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHNldEJyYW5kOiBmdW5jdGlvbiBzZXRCcmFuZChicmFuZCkgewogICAgICAgICAgICAgICAgICAgIGJyYW5kJC5uZXh0KE9iamVjdC5mcmVlemUoewogICAgICAgICAgICAgICAgICAgICAgbG9nbzogYnJhbmQubG9nbywKICAgICAgICAgICAgICAgICAgICAgIHNtYWxsTG9nbzogYnJhbmQuc21hbGxMb2dvCiAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBnZXRJc1Zpc2libGUkOiBmdW5jdGlvbiBnZXRJc1Zpc2libGUkKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5pc1Zpc2libGUkOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBzZXRJc1Zpc2libGU6IGZ1bmN0aW9uIHNldElzVmlzaWJsZShpc1Zpc2libGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudG9nZ2xlSGlkZGVuJC5uZXh0KCFpc1Zpc2libGUpOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBnZXRBcHBsaWNhdGlvbkNsYXNzZXMkOiBmdW5jdGlvbiBnZXRBcHBsaWNhdGlvbkNsYXNzZXMkKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBhcHBsaWNhdGlvbkNsYXNzZXMkLnBpcGUoKDAsIF9vcGVyYXRvcnMubWFwKShmdW5jdGlvbiAoc2V0KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RvQ29uc3VtYWJsZUFycmF5KHNldCk7CiAgICAgICAgICAgICAgICAgICAgfSksICgwLCBfb3BlcmF0b3JzLnRha2VVbnRpbCkoX3RoaXMuc3RvcCQpKTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgYWRkQXBwbGljYXRpb25DbGFzczogZnVuY3Rpb24gYWRkQXBwbGljYXRpb25DbGFzcyhjbGFzc05hbWUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlID0gbmV3IFNldChfdG9Db25zdW1hYmxlQXJyYXkoYXBwbGljYXRpb25DbGFzc2VzJC5nZXRWYWx1ZSgpKSk7CiAgICAgICAgICAgICAgICAgICAgdXBkYXRlLmFkZChjbGFzc05hbWUpOwogICAgICAgICAgICAgICAgICAgIGFwcGxpY2F0aW9uQ2xhc3NlcyQubmV4dCh1cGRhdGUpOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICByZW1vdmVBcHBsaWNhdGlvbkNsYXNzOiBmdW5jdGlvbiByZW1vdmVBcHBsaWNhdGlvbkNsYXNzKGNsYXNzTmFtZSkgewogICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGUgPSBuZXcgU2V0KF90b0NvbnN1bWFibGVBcnJheShhcHBsaWNhdGlvbkNsYXNzZXMkLmdldFZhbHVlKCkpKTsKICAgICAgICAgICAgICAgICAgICB1cGRhdGUuZGVsZXRlKGNsYXNzTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25DbGFzc2VzJC5uZXh0KHVwZGF0ZSk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGdldEJhZGdlJDogZnVuY3Rpb24gZ2V0QmFkZ2UkKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBiYWRnZSQucGlwZSgoMCwgX29wZXJhdG9ycy50YWtlVW50aWwpKF90aGlzLnN0b3AkKSk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHNldEJhZGdlOiBmdW5jdGlvbiBzZXRCYWRnZShiYWRnZSkgewogICAgICAgICAgICAgICAgICAgIGJhZGdlJC5uZXh0KGJhZGdlKTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZ2V0QnJlYWRjcnVtYnMkOiBmdW5jdGlvbiBnZXRCcmVhZGNydW1icyQoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJyZWFkY3J1bWJzJC5waXBlKCgwLCBfb3BlcmF0b3JzLnRha2VVbnRpbCkoX3RoaXMuc3RvcCQpKTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgc2V0QnJlYWRjcnVtYnM6IGZ1bmN0aW9uIHNldEJyZWFkY3J1bWJzKG5ld0JyZWFkY3J1bWJzKSB7CiAgICAgICAgICAgICAgICAgICAgYnJlYWRjcnVtYnMkLm5leHQobmV3QnJlYWRjcnVtYnMpOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBnZXRIZWxwRXh0ZW5zaW9uJDogZnVuY3Rpb24gZ2V0SGVscEV4dGVuc2lvbiQoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhlbHBFeHRlbnNpb24kLnBpcGUoKDAsIF9vcGVyYXRvcnMudGFrZVVudGlsKShfdGhpcy5zdG9wJCkpOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBzZXRIZWxwRXh0ZW5zaW9uOiBmdW5jdGlvbiBzZXRIZWxwRXh0ZW5zaW9uKGhlbHBFeHRlbnNpb24pIHsKICAgICAgICAgICAgICAgICAgICBoZWxwRXh0ZW5zaW9uJC5uZXh0KGhlbHBFeHRlbnNpb24pOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBzZXRIZWxwU3VwcG9ydFVybDogZnVuY3Rpb24gc2V0SGVscFN1cHBvcnRVcmwodXJsKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhlbHBTdXBwb3J0VXJsJC5uZXh0KHVybCk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGdldElzTmF2RHJhd2VyTG9ja2VkJDogZnVuY3Rpb24gKF9nZXRJc05hdkRyYXdlckxvY2tlZCQpIHsKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRJc05hdkRyYXdlckxvY2tlZCQoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2dldElzTmF2RHJhd2VyTG9ja2VkJC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZ2V0SXNOYXZEcmF3ZXJMb2NrZWQkLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9nZXRJc05hdkRyYXdlckxvY2tlZCQudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0SXNOYXZEcmF3ZXJMb2NrZWQkOwogICAgICAgICAgICAgICAgICB9KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0SXNOYXZEcmF3ZXJMb2NrZWQkOwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gc3RhcnQoX3gpIHsKICAgICAgICByZXR1cm4gX3N0YXJ0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzdGFydDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInN0b3AiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN0b3AoKSB7CiAgICAgIHRoaXMubmF2TGlua3Muc3RvcCgpOwogICAgICB0aGlzLnN0b3AkLm5leHQoKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBDaHJvbWVTZXJ2aWNlOwp9KCk7Ci8qKgogKiBDaHJvbWVTdGFydCBhbGxvd3MgcGx1Z2lucyB0byBjdXN0b21pemUgdGhlIGdsb2JhbCBjaHJvbWUgaGVhZGVyIFVJIGFuZAogKiBlbnJpY2ggdGhlIFVYIHdpdGggYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY3VycmVudCBsb2NhdGlvbiBvZiB0aGUKICogYnJvd3Nlci4KICoKICogQHJlbWFya3MKICogV2hpbGUgQ2hyb21lU3RhcnQgZXhwb3NlcyBtYW55IEFQSXMsIHRoZXkgc2hvdWxkIGJlIHVzZWQgc3BhcmluZ2x5IGFuZCB0aGUKICogZGV2ZWxvcGVyIHNob3VsZCB1bmRlcnN0YW5kIGhvdyB0aGV5IGFmZmVjdCBvdGhlciBwbHVnaW5zIGFuZCBhcHBsaWNhdGlvbnMuCiAqCiAqIEBleGFtcGxlCiAqIEhvdyB0byBhZGQgYSByZWNlbnRseSBhY2Nlc3NlZCBpdGVtIHRvIHRoZSBzaWRlYmFyOgogKiBgYGB0cwogKiBjb3JlLmNocm9tZS5yZWNlbnRseUFjY2Vzc2VkLmFkZCgnL2FwcC9tYXAvMTIzNCcsICdNYXAgMTIzNCcsICcxMjM0Jyk7CiAqIGBgYAogKgogKiBAZXhhbXBsZQogKiBIb3cgdG8gc2V0IHRoZSBoZWxwIGRyb3Bkb3duIGV4dGVuc2lvbjoKICogYGBgdHN4CiAqIGNvcmUuY2hyb21lLnNldEhlbHBFeHRlbnNpb24oZWxlbSA9PiB7CiAqICAgUmVhY3RET00ucmVuZGVyKDxNeUhlbHBDb21wb25lbnQgLz4sIGVsZW0pOwogKiAgIHJldHVybiAoKSA9PiBSZWFjdERPTS51bm1vdW50Q29tcG9uZW50QXROb2RlKGVsZW0pOwogKiB9KTsKICogYGBgCiAqCiAqIEBwdWJsaWMKICovCgoKZXhwb3J0cy5DaHJvbWVTZXJ2aWNlID0gQ2hyb21lU2VydmljZTs="},null]}