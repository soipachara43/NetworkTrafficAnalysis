{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/triggers_actions_ui/public/application/components/builtin_alert_types/threshold/visualization.js","dependencies":[{"path":"x-pack/plugins/triggers_actions_ui/public/application/components/builtin_alert_types/threshold/visualization.js","mtime":1589249555549},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlRocmVzaG9sZFZpc3VhbGl6YXRpb24gPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfcnhqcyA9IHJlcXVpcmUoInJ4anMiKTsKCnZhciBfY2hhcnRzID0gcmVxdWlyZSgiQGVsYXN0aWMvY2hhcnRzIik7Cgp2YXIgX21vbWVudFRpbWV6b25lID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJtb21lbnQtdGltZXpvbmUiKSk7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9yZWFjdDIgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfaW5kZXhfdGhyZXNob2xkX2FwaSA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbW1vbi9saWIvaW5kZXhfdGhyZXNob2xkX2FwaSIpOwoKdmFyIF9wYXJzZV9kdXJhdGlvbiA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uL2FsZXJ0aW5nL2NvbW1vbi9wYXJzZV9kdXJhdGlvbiIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7CiAgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgewogICAgcmV0dXJuIG9iajsKICB9IGVsc2UgewogICAgdmFyIG5ld09iaiA9IHt9OwoKICAgIGlmIChvYmogIT0gbnVsbCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OwoKICAgICAgICAgIGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBuZXdPYmouZGVmYXVsdCA9IG9iajsKICAgIHJldHVybiBuZXdPYmo7CiAgfQp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgewogIHRyeSB7CiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7CiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICByZWplY3QoZXJyb3IpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKGluZm8uZG9uZSkgewogICAgcmVzb2x2ZSh2YWx1ZSk7CiAgfSBlbHNlIHsKICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsKICB9Cn0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWxmID0gdGhpcywKICAgICAgICBhcmdzID0gYXJndW1lbnRzOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOwoKICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHsKICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7CiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOwogICAgICB9CgogICAgICBfbmV4dCh1bmRlZmluZWQpOwogICAgfSk7CiAgfTsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKdmFyIGN1c3RvbVRoZW1lID0gZnVuY3Rpb24gY3VzdG9tVGhlbWUoKSB7CiAgcmV0dXJuIHsKICAgIGxpbmVTZXJpZXNTdHlsZTogewogICAgICBsaW5lOiB7CiAgICAgICAgc3Ryb2tlV2lkdGg6IDMKICAgICAgfSwKICAgICAgcG9pbnQ6IHsKICAgICAgICB2aXNpYmxlOiBmYWxzZQogICAgICB9CiAgICB9CiAgfTsKfTsKCnZhciBnZXRUaW1lem9uZSA9IGZ1bmN0aW9uIGdldFRpbWV6b25lKHVpU2V0dGluZ3MpIHsKICB2YXIgY29uZmlnID0gdWlTZXR0aW5nczsKICB2YXIgREFURV9GT1JNQVRfQ09ORklHX0tFWSA9ICdkYXRlRm9ybWF0OnR6JzsKICB2YXIgaXNDdXN0b21UaW1lem9uZSA9ICFjb25maWcuaXNEZWZhdWx0KERBVEVfRk9STUFUX0NPTkZJR19LRVkpOwoKICBpZiAoaXNDdXN0b21UaW1lem9uZSkgewogICAgcmV0dXJuIGNvbmZpZy5nZXQoREFURV9GT1JNQVRfQ09ORklHX0tFWSk7CiAgfQoKICB2YXIgZGV0ZWN0ZWRUaW1lem9uZSA9IF9tb21lbnRUaW1lem9uZS5kZWZhdWx0LnR6Lmd1ZXNzKCk7CgogIGlmIChkZXRlY3RlZFRpbWV6b25lKSB7CiAgICByZXR1cm4gZGV0ZWN0ZWRUaW1lem9uZTsKICB9IC8vIGRlZmF1bHQgdG8gVVRDIGlmIHdlIGNhbid0IGZpZ3VyZSBvdXQgdGhlIHRpbWV6b25lCgoKICB2YXIgdHpPZmZzZXQgPSAoMCwgX21vbWVudFRpbWV6b25lLmRlZmF1bHQpKCkuZm9ybWF0KCdaJyk7CiAgcmV0dXJuIHR6T2Zmc2V0Owp9OwoKdmFyIGdldERvbWFpbiA9IGZ1bmN0aW9uIGdldERvbWFpbihhbGVydEludGVydmFsLCBzdGFydEF0KSB7CiAgdmFyIFZJU1VBTElaRV9JTlRFUlZBTFMgPSAzMDsKICB2YXIgaW50ZXJ2YWxNaWxsaXM7CgogIHRyeSB7CiAgICBpbnRlcnZhbE1pbGxpcyA9ICgwLCBfcGFyc2VfZHVyYXRpb24ucGFyc2VEdXJhdGlvbikoYWxlcnRJbnRlcnZhbCk7CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBpbnRlcnZhbE1pbGxpcyA9IDEwMDAgKiA2MDsgLy8gZGVmYXVsdCB0byBvbmUgbWludXRlIGlmIG5vdCBwYXJzZWFibGUKICB9CgogIHJldHVybiB7CiAgICBtaW46IHN0YXJ0QXQuZ2V0VGltZSgpIC0gaW50ZXJ2YWxNaWxsaXMgKiBWSVNVQUxJWkVfSU5URVJWQUxTLAogICAgbWF4OiBzdGFydEF0LmdldFRpbWUoKQogIH07Cn07Cgp2YXIgREVGQVVMVF9SRUZSRVNIX1JBVEUgPSA1MDAwOwp2YXIgTG9hZGluZ1N0YXRlVHlwZTsKCihmdW5jdGlvbiAoTG9hZGluZ1N0YXRlVHlwZSkgewogIExvYWRpbmdTdGF0ZVR5cGVbTG9hZGluZ1N0YXRlVHlwZVsiRmlyc3RMb2FkIl0gPSAwXSA9ICJGaXJzdExvYWQiOwogIExvYWRpbmdTdGF0ZVR5cGVbTG9hZGluZ1N0YXRlVHlwZVsiUmVmcmVzaCJdID0gMV0gPSAiUmVmcmVzaCI7CiAgTG9hZGluZ1N0YXRlVHlwZVtMb2FkaW5nU3RhdGVUeXBlWyJJZGxlIl0gPSAyXSA9ICJJZGxlIjsKfSkoTG9hZGluZ1N0YXRlVHlwZSB8fCAoTG9hZGluZ1N0YXRlVHlwZSA9IHt9KSk7IC8vIFtlcG9jaE1pbGxpcywgdmFsdWVdCgoKdmFyIFRocmVzaG9sZFZpc3VhbGl6YXRpb24gPSBmdW5jdGlvbiBUaHJlc2hvbGRWaXN1YWxpemF0aW9uKF9yZWYpIHsKICB2YXIgYWxlcnRQYXJhbXMgPSBfcmVmLmFsZXJ0UGFyYW1zLAogICAgICBhbGVydEludGVydmFsID0gX3JlZi5hbGVydEludGVydmFsLAogICAgICBhZ2dyZWdhdGlvblR5cGVzID0gX3JlZi5hZ2dyZWdhdGlvblR5cGVzLAogICAgICBjb21wYXJhdG9ycyA9IF9yZWYuY29tcGFyYXRvcnMsCiAgICAgIGFsZXJ0c0NvbnRleHQgPSBfcmVmLmFsZXJ0c0NvbnRleHQsCiAgICAgIF9yZWYkcmVmcmVzaFJhdGVJbk1pbCA9IF9yZWYucmVmcmVzaFJhdGVJbk1pbGxpc2Vjb25kcywKICAgICAgcmVmcmVzaFJhdGVJbk1pbGxpc2Vjb25kcyA9IF9yZWYkcmVmcmVzaFJhdGVJbk1pbCA9PT0gdm9pZCAwID8gREVGQVVMVF9SRUZSRVNIX1JBVEUgOiBfcmVmJHJlZnJlc2hSYXRlSW5NaWw7CiAgdmFyIGluZGV4ID0gYWxlcnRQYXJhbXMuaW5kZXgsCiAgICAgIHRpbWVGaWVsZCA9IGFsZXJ0UGFyYW1zLnRpbWVGaWVsZCwKICAgICAgYWdnVHlwZSA9IGFsZXJ0UGFyYW1zLmFnZ1R5cGUsCiAgICAgIGFnZ0ZpZWxkID0gYWxlcnRQYXJhbXMuYWdnRmllbGQsCiAgICAgIHRlcm1TaXplID0gYWxlcnRQYXJhbXMudGVybVNpemUsCiAgICAgIHRlcm1GaWVsZCA9IGFsZXJ0UGFyYW1zLnRlcm1GaWVsZCwKICAgICAgdGhyZXNob2xkQ29tcGFyYXRvciA9IGFsZXJ0UGFyYW1zLnRocmVzaG9sZENvbXBhcmF0b3IsCiAgICAgIHRpbWVXaW5kb3dTaXplID0gYWxlcnRQYXJhbXMudGltZVdpbmRvd1NpemUsCiAgICAgIHRpbWVXaW5kb3dVbml0ID0gYWxlcnRQYXJhbXMudGltZVdpbmRvd1VuaXQsCiAgICAgIGdyb3VwQnkgPSBhbGVydFBhcmFtcy5ncm91cEJ5LAogICAgICB0aHJlc2hvbGQgPSBhbGVydFBhcmFtcy50aHJlc2hvbGQ7CiAgdmFyIGh0dHAgPSBhbGVydHNDb250ZXh0Lmh0dHAsCiAgICAgIHRvYXN0Tm90aWZpY2F0aW9ucyA9IGFsZXJ0c0NvbnRleHQudG9hc3ROb3RpZmljYXRpb25zLAogICAgICBjaGFydHMgPSBhbGVydHNDb250ZXh0LmNoYXJ0cywKICAgICAgdWlTZXR0aW5ncyA9IGFsZXJ0c0NvbnRleHQudWlTZXR0aW5ncywKICAgICAgZGF0YUZpZWxkc0Zvcm1hdHMgPSBhbGVydHNDb250ZXh0LmRhdGFGaWVsZHNGb3JtYXRzOwoKICB2YXIgX3VzZVN0YXRlID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkobnVsbCksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBsb2FkaW5nU3RhdGUgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRMb2FkaW5nU3RhdGUgPSBfdXNlU3RhdGUyWzFdOwoKICB2YXIgX3VzZVN0YXRlMyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKHVuZGVmaW5lZCksCiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSwKICAgICAgZXJyb3IgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRFcnJvciA9IF91c2VTdGF0ZTRbMV07CgogIHZhciBfdXNlU3RhdGU1ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoKSwKICAgICAgX3VzZVN0YXRlNiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTUsIDIpLAogICAgICB2aXN1YWxpemF0aW9uRGF0YSA9IF91c2VTdGF0ZTZbMF0sCiAgICAgIHNldFZpc3VhbGl6YXRpb25EYXRhID0gX3VzZVN0YXRlNlsxXTsKCiAgdmFyIF91c2VTdGF0ZTcgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShuZXcgRGF0ZSgpKSwKICAgICAgX3VzZVN0YXRlOCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTcsIDIpLAogICAgICBzdGFydFZpc3VhbGl6YXRpb25BdCA9IF91c2VTdGF0ZThbMF0sCiAgICAgIHNldFN0YXJ0VmlzdWFsaXphdGlvbkF0ID0gX3VzZVN0YXRlOFsxXTsKCiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIHZhciBzb3VyY2UgPSAoMCwgX3J4anMuaW50ZXJ2YWwpKHJlZnJlc2hSYXRlSW5NaWxsaXNlY29uZHMpOwogICAgdmFyIHN1YnNjcmlwdGlvbiA9IHNvdXJjZS5zdWJzY3JpYmUoZnVuY3Rpb24gKHZhbCkgewogICAgICBzZXRTdGFydFZpc3VhbGl6YXRpb25BdChuZXcgRGF0ZSgpKTsKICAgIH0pOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7CiAgICB9OwogIH0sIFtyZWZyZXNoUmF0ZUluTWlsbGlzZWNvbmRzXSk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIF9hc3luY1RvR2VuZXJhdG9yKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgIHNldExvYWRpbmdTdGF0ZShsb2FkaW5nU3RhdGUgPyBMb2FkaW5nU3RhdGVUeXBlLlJlZnJlc2ggOiBMb2FkaW5nU3RhdGVUeXBlLkZpcnN0TG9hZCk7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBzZXRWaXN1YWxpemF0aW9uRGF0YTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gZ2V0VmlzdWFsaXphdGlvbkRhdGEoYWxlcnRXaXRob3V0QWN0aW9ucywgdmlzdWFsaXplT3B0aW9ucywgaHR0cCk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgX2NvbnRleHQudDEgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICgwLCBfY29udGV4dC50MCkoX2NvbnRleHQudDEpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gOTsKICAgICAgICAgICAgICBfY29udGV4dC50MiA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwoKICAgICAgICAgICAgICBpZiAodG9hc3ROb3RpZmljYXRpb25zKSB7CiAgICAgICAgICAgICAgICB0b2FzdE5vdGlmaWNhdGlvbnMuYWRkRGFuZ2VyKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmlnZ2Vyc0FjdGlvbnNVSS5zZWN0aW9ucy5hbGVydEFkZC51bmFibGVUb0xvYWRWaXN1YWxpemF0aW9uTWVzc2FnZScsIHsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1VuYWJsZSB0byBsb2FkIHZpc3VhbGl6YXRpb24nCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHNldEVycm9yKF9jb250ZXh0LnQyKTsKCiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEzOwogICAgICAgICAgICAgIHNldExvYWRpbmdTdGF0ZShMb2FkaW5nU3RhdGVUeXBlLklkbGUpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5maW5pc2goMTMpOwoKICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1swLCA5LCAxMywgMTZdXSk7CiAgICB9KSkoKTsKICAgIC8qIGVzbGludC1kaXNhYmxlIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwcyAqLwoKICB9LCBbaW5kZXgsIHRpbWVGaWVsZCwgYWdnVHlwZSwgYWdnRmllbGQsIHRlcm1TaXplLCB0ZXJtRmllbGQsIHRocmVzaG9sZENvbXBhcmF0b3IsIHRpbWVXaW5kb3dTaXplLCB0aW1lV2luZG93VW5pdCwgZ3JvdXBCeSwgdGhyZXNob2xkLCBzdGFydFZpc3VhbGl6YXRpb25BdF0pOwogIC8qIGVzbGludC1lbmFibGUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzICovCgogIGlmICghY2hhcnRzIHx8ICF1aVNldHRpbmdzIHx8ICFkYXRhRmllbGRzRm9ybWF0cykgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICB2YXIgY2hhcnRzVGhlbWUgPSBjaGFydHMudGhlbWUudXNlQ2hhcnRzVGhlbWUoKTsKICB2YXIgZG9tYWluID0gZ2V0RG9tYWluKGFsZXJ0SW50ZXJ2YWwsIHN0YXJ0VmlzdWFsaXphdGlvbkF0KTsKICB2YXIgdmlzdWFsaXplT3B0aW9ucyA9IHsKICAgIHJhbmdlRnJvbTogbmV3IERhdGUoZG9tYWluLm1pbikudG9JU09TdHJpbmcoKSwKICAgIHJhbmdlVG86IG5ldyBEYXRlKGRvbWFpbi5tYXgpLnRvSVNPU3RyaW5nKCksCiAgICBpbnRlcnZhbDogYWxlcnRJbnRlcnZhbAogIH07IC8vIEZldGNoaW5nIHZpc3VhbGl6YXRpb24gZGF0YSBpcyBpbmRlcGVuZGVudCBvZiBhbGVydCBhY3Rpb25zCgogIHZhciBhbGVydFdpdGhvdXRBY3Rpb25zID0gX29iamVjdFNwcmVhZCh7fSwgYWxlcnRQYXJhbXMsIHsKICAgIGFjdGlvbnM6IFtdLAogICAgdHlwZTogJ3RocmVzaG9sZCcKICB9KTsKCiAgaWYgKGxvYWRpbmdTdGF0ZSA9PT0gTG9hZGluZ1N0YXRlVHlwZS5GaXJzdExvYWQpIHsKICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRW1wdHlQcm9tcHQsIHsKICAgICAgdGl0bGU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlMb2FkaW5nQ2hhcnQsIHsKICAgICAgICBzaXplOiAieGwiCiAgICAgIH0pLAogICAgICBib2R5OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGV4dCwgewogICAgICAgIGNvbG9yOiAic3ViZHVlZCIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLnNlY3Rpb25zLmFsZXJ0QWRkLmxvYWRpbmdBbGVydFZpc3VhbGl6YXRpb25EZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJMb2FkaW5nIGFsZXJ0IHZpc3VhbGl6YXRpb25cdTIwMjYiCiAgICAgIH0pKQogICAgfSk7CiAgfQoKICBpZiAoZXJyb3IpIHsKICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgewogICAgICBzaXplOiAibCIKICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ2FsbE91dCwgewogICAgICB0aXRsZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLnNlY3Rpb25zLmFsZXJ0QWRkLmVycm9yTG9hZGluZ0FsZXJ0VmlzdWFsaXphdGlvblRpdGxlIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkNhbm5vdCBsb2FkIGFsZXJ0IHZpc3VhbGl6YXRpb24iLAogICAgICAgIHZhbHVlczoge30KICAgICAgfSksCiAgICAgIGNvbG9yOiAiZGFuZ2VyIiwKICAgICAgaWNvblR5cGU6ICJhbGVydCIKICAgIH0sIGVycm9yKSk7CiAgfQoKICB2YXIgZ2V0VGhyZXNob2xkID0gZnVuY3Rpb24gZ2V0VGhyZXNob2xkKCkgewogICAgcmV0dXJuIHRocmVzaG9sZENvbXBhcmF0b3IgPyB0aHJlc2hvbGQuc2xpY2UoMCwgY29tcGFyYXRvcnNbdGhyZXNob2xkQ29tcGFyYXRvcl0ucmVxdWlyZWRWYWx1ZXMpIDogW107CiAgfTsKCiAgaWYgKHZpc3VhbGl6YXRpb25EYXRhKSB7CiAgICB2YXIgYWxlcnRWaXN1YWxpemF0aW9uRGF0YUtleXMgPSBPYmplY3Qua2V5cyh2aXN1YWxpemF0aW9uRGF0YSk7CiAgICB2YXIgdGltZXpvbmUgPSBnZXRUaW1lem9uZSh1aVNldHRpbmdzKTsKICAgIHZhciBhY3R1YWxUaHJlc2hvbGQgPSBnZXRUaHJlc2hvbGQoKTsKICAgIHZhciBtYXhZID0gYWN0dWFsVGhyZXNob2xkW2FjdHVhbFRocmVzaG9sZC5sZW5ndGggLSAxXTsKICAgIE9iamVjdC52YWx1ZXModmlzdWFsaXphdGlvbkRhdGEpLmZvckVhY2goZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmMykgewogICAgICAgIHZhciBfcmVmNCA9IF9zbGljZWRUb0FycmF5KF9yZWYzLCAyKSwKICAgICAgICAgICAgeSA9IF9yZWY0WzFdOwoKICAgICAgICBpZiAoeSA+IG1heFkpIHsKICAgICAgICAgIG1heFkgPSB5OwogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKICAgIHZhciBkYXRlRm9ybWF0dGVyID0gKDAsIF9jaGFydHMubmljZVRpbWVGb3JtYXR0ZXIpKFtkb21haW4ubWluLCBkb21haW4ubWF4XSk7CiAgICB2YXIgYWdnTGFiZWwgPSBhZ2dyZWdhdGlvblR5cGVzW2FnZ1R5cGVdLnRleHQ7CiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiYWxlcnRWaXN1YWxpemF0aW9uQ2hhcnQiLAogICAgICBzdHlsZTogewogICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnCiAgICAgIH0KICAgIH0sIGxvYWRpbmdTdGF0ZSA9PT0gTG9hZGluZ1N0YXRlVHlwZS5SZWZyZXNoID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUxvYWRpbmdTcGlubmVyLCB7CiAgICAgIHNpemU6ICJsIiwKICAgICAgc3R5bGU6IHsKICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJywKICAgICAgICB0b3A6ICc4JScsCiAgICAgICAgcmlnaHQ6ICc1JScKICAgICAgfQogICAgfSkgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5GcmFnbWVudCwgbnVsbCksIGFsZXJ0VmlzdWFsaXphdGlvbkRhdGFLZXlzLmxlbmd0aCA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NoYXJ0cy5DaGFydCwgewogICAgICBzaXplOiBbJzEwMCUnLCAyMDBdLAogICAgICByZW5kZXJlcjogImNhbnZhcyIKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NoYXJ0cy5TZXR0aW5ncywgewogICAgICB0aGVtZTogW2N1c3RvbVRoZW1lKCksIGNoYXJ0c1RoZW1lXSwKICAgICAgeERvbWFpbjogZG9tYWluLAogICAgICBzaG93TGVnZW5kOiAhIXRlcm1GaWVsZCwKICAgICAgc2hvd0xlZ2VuZEV4dHJhOiB0cnVlLAogICAgICBsZWdlbmRQb3NpdGlvbjogX2NoYXJ0cy5Qb3NpdGlvbi5Cb3R0b20KICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jaGFydHMuQXhpcywgewogICAgICBpZDogImJvdHRvbSIsCiAgICAgIHBvc2l0aW9uOiBfY2hhcnRzLlBvc2l0aW9uLkJvdHRvbSwKICAgICAgc2hvd092ZXJsYXBwaW5nVGlja3M6IHRydWUsCiAgICAgIHRpY2tGb3JtYXQ6IGRhdGVGb3JtYXR0ZXIKICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jaGFydHMuQXhpcywgewogICAgICBkb21haW46IHsKICAgICAgICBtYXg6IG1heFkKICAgICAgfSwKICAgICAgaWQ6ICJsZWZ0IiwKICAgICAgdGl0bGU6IGFnZ0xhYmVsLAogICAgICBwb3NpdGlvbjogX2NoYXJ0cy5Qb3NpdGlvbi5MZWZ0CiAgICB9KSwgYWxlcnRWaXN1YWxpemF0aW9uRGF0YUtleXMubWFwKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NoYXJ0cy5MaW5lU2VyaWVzLCB7CiAgICAgICAga2V5OiBrZXksCiAgICAgICAgaWQ6IGtleSwKICAgICAgICB4U2NhbGVUeXBlOiBfY2hhcnRzLlNjYWxlVHlwZS5UaW1lLAogICAgICAgIHlTY2FsZVR5cGU6IF9jaGFydHMuU2NhbGVUeXBlLkxpbmVhciwKICAgICAgICBkYXRhOiB2aXN1YWxpemF0aW9uRGF0YVtrZXldLAogICAgICAgIHhBY2Nlc3NvcjogMCwKICAgICAgICB5QWNjZXNzb3JzOiBbMV0sCiAgICAgICAgdGltZVpvbmU6IHRpbWV6b25lCiAgICAgIH0pOwogICAgfSksIGFjdHVhbFRocmVzaG9sZC5tYXAoZnVuY3Rpb24gKF92YWx1ZSwgaSkgewogICAgICB2YXIgc3BlY0lkID0gaSA9PT0gMCA/ICd0aHJlc2hvbGQnIDogInRocmVzaG9sZCIuY29uY2F0KGkpOwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY2hhcnRzLkxpbmVBbm5vdGF0aW9uLCB7CiAgICAgICAga2V5OiBzcGVjSWQsCiAgICAgICAgaWQ6IHNwZWNJZCwKICAgICAgICBkb21haW5UeXBlOiBfY2hhcnRzLkFubm90YXRpb25Eb21haW5UeXBlcy5ZRG9tYWluLAogICAgICAgIGRhdGFWYWx1ZXM6IFt7CiAgICAgICAgICBkYXRhVmFsdWU6IHRocmVzaG9sZFtpXSwKICAgICAgICAgIGRldGFpbHM6IHNwZWNJZAogICAgICAgIH1dCiAgICAgIH0pOwogICAgfSkpIDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNhbGxPdXQsIHsKICAgICAgc2l6ZTogInMiLAogICAgICB0aXRsZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLnNlY3Rpb25zLmFsZXJ0QWRkLnRocmVzaG9sZFByZXZpZXdDaGFydC5ub0RhdGFUaXRsZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJObyBkYXRhIG1hdGNoZXMgdGhpcyBxdWVyeSIKICAgICAgfSksCiAgICAgIGNvbG9yOiAid2FybmluZyIKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgIGlkOiAieHBhY2sudHJpZ2dlcnNBY3Rpb25zVUkuc2VjdGlvbnMuYWxlcnRBZGQudGhyZXNob2xkUHJldmlld0NoYXJ0LmRhdGFEb2VzTm90RXhpc3RUZXh0TWVzc2FnZSIsCiAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQ2hlY2sgdGhhdCB5b3VyIHRpbWUgcmFuZ2UgYW5kIGZpbHRlcnMgYXJlIGNvcnJlY3QuIgogICAgfSkpKTsKICB9CgogIHJldHVybiBudWxsOwp9OyAvLyBjb252ZXJ0IHRoZSBkYXRhIGZyb20gdGhlIHZpc3VhbGl6YXRpb24gQVBJIGludG8gc29tZXRoaW5nIGVhc2llciB0byBkaWdlc3Qgd2l0aCBjaGFydHMKCgpleHBvcnRzLlRocmVzaG9sZFZpc3VhbGl6YXRpb24gPSBUaHJlc2hvbGRWaXN1YWxpemF0aW9uOwoKZnVuY3Rpb24gZ2V0VmlzdWFsaXphdGlvbkRhdGEoX3gsIF94MiwgX3gzKSB7CiAgcmV0dXJuIF9nZXRWaXN1YWxpemF0aW9uRGF0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfZ2V0VmlzdWFsaXphdGlvbkRhdGEoKSB7CiAgX2dldFZpc3VhbGl6YXRpb25EYXRhID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKG1vZGVsLCB2aXN1YWxpemVPcHRpb25zLCBodHRwKSB7CiAgICB2YXIgdml6RGF0YSwgcmVzdWx0LCBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uLCBfZGlkSXRlcmF0b3JFcnJvciwgX2l0ZXJhdG9yRXJyb3IsIF9pdGVyYXRvciwgX3N0ZXAsIGdyb3VwTWV0cmljczsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiAoMCwgX2luZGV4X3RocmVzaG9sZF9hcGkuZ2V0VGhyZXNob2xkQWxlcnRWaXN1YWxpemF0aW9uRGF0YSkoewogICAgICAgICAgICAgIG1vZGVsOiBtb2RlbCwKICAgICAgICAgICAgICB2aXN1YWxpemVPcHRpb25zOiB2aXN1YWxpemVPcHRpb25zLAogICAgICAgICAgICAgIGh0dHA6IGh0dHAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICB2aXpEYXRhID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgIHJlc3VsdCA9IHt9OwogICAgICAgICAgICBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTsKICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTsKICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gNzsKCiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yID0gdml6RGF0YS5yZXN1bHRzW1N5bWJvbC5pdGVyYXRvcl0oKTsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7CiAgICAgICAgICAgICAgZ3JvdXBNZXRyaWNzID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgICAgcmVzdWx0W2dyb3VwTWV0cmljcy5ncm91cF0gPSBncm91cE1ldHJpY3MubWV0cmljcy5tYXAoZnVuY3Rpb24gKG1ldHJpY1Jlc3VsdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIFtEYXRlLnBhcnNlKG1ldHJpY1Jlc3VsdFswXSksIG1ldHJpY1Jlc3VsdFsxXV07CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTU7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTE7CiAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSg3KTsKICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlOwogICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IF9jb250ZXh0Mi50MDsKCiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE1OwogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE2OwoKICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4gIT0gbnVsbCkgewogICAgICAgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTsKICAgICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTg7CgogICAgICAgICAgICBpZiAoIV9kaWRJdGVyYXRvckVycm9yKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7CgogICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5maW5pc2goMTgpOwoKICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuZmluaXNoKDE1KTsKCiAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVzdWx0KTsKCiAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1s3LCAxMSwgMTUsIDIzXSwgWzE2LCwgMTgsIDIyXV0pOwogIH0pKTsKICByZXR1cm4gX2dldFZpc3VhbGl6YXRpb25EYXRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0="},null]}