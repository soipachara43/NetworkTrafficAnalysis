{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/lens/public/editor_frame_service/service.js","dependencies":[{"path":"x-pack/legacy/plugins/lens/public/editor_frame_service/service.js","mtime":1589249552292},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkVkaXRvckZyYW1lU2VydmljZSA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoInJlYWN0LWRvbSIpOwoKdmFyIF9yZWFjdDIgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfZWRpdG9yX2ZyYW1lID0gcmVxdWlyZSgiLi9lZGl0b3JfZnJhbWUiKTsKCnZhciBfbWVyZ2VfdGFibGVzID0gcmVxdWlyZSgiLi9tZXJnZV90YWJsZXMiKTsKCnZhciBfZm9ybWF0X2NvbHVtbiA9IHJlcXVpcmUoIi4vZm9ybWF0X2NvbHVtbiIpOwoKdmFyIF9lbWJlZGRhYmxlX2ZhY3RvcnkgPSByZXF1aXJlKCIuL2VtYmVkZGFibGUvZW1iZWRkYWJsZV9mYWN0b3J5Iik7Cgp2YXIgX3N0YXRlX21hbmFnZW1lbnQgPSByZXF1aXJlKCIuL2VkaXRvcl9mcmFtZS9zdGF0ZV9tYW5hZ2VtZW50Iik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgewogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgewogIHRyeSB7CiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7CiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICByZWplY3QoZXJyb3IpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKGluZm8uZG9uZSkgewogICAgcmVzb2x2ZSh2YWx1ZSk7CiAgfSBlbHNlIHsKICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsKICB9Cn0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWxmID0gdGhpcywKICAgICAgICBhcmdzID0gYXJndW1lbnRzOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOwoKICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHsKICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7CiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOwogICAgICB9CgogICAgICBfbmV4dCh1bmRlZmluZWQpOwogICAgfSk7CiAgfTsKfQoKZnVuY3Rpb24gY29sbGVjdEFzeW5jRGVmaW5pdGlvbnMoX3gpIHsKICByZXR1cm4gX2NvbGxlY3RBc3luY0RlZmluaXRpb25zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9jb2xsZWN0QXN5bmNEZWZpbml0aW9ucygpIHsKICBfY29sbGVjdEFzeW5jRGVmaW5pdGlvbnMgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoZGVmaW5pdGlvbnMpIHsKICAgIHZhciByZXNvbHZlZERlZmluaXRpb25zLCBkZWZpbml0aW9uTWFwOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoZGVmaW5pdGlvbnMpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmVzb2x2ZWREZWZpbml0aW9ucyA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICBkZWZpbml0aW9uTWFwID0ge307CiAgICAgICAgICAgIHJlc29sdmVkRGVmaW5pdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZGVmaW5pdGlvbikgewogICAgICAgICAgICAgIGRlZmluaXRpb25NYXBbZGVmaW5pdGlvbi5pZF0gPSBkZWZpbml0aW9uOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIGRlZmluaXRpb25NYXApOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTMpOwogIH0pKTsKICByZXR1cm4gX2NvbGxlY3RBc3luY0RlZmluaXRpb25zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCnZhciBFZGl0b3JGcmFtZVNlcnZpY2UgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBFZGl0b3JGcmFtZVNlcnZpY2UoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRWRpdG9yRnJhbWVTZXJ2aWNlKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImRhdGFzb3VyY2VzIiwgW10pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidmlzdWFsaXphdGlvbnMiLCBbXSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoRWRpdG9yRnJhbWVTZXJ2aWNlLCBbewogICAga2V5OiAic2V0dXAiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldHVwKGNvcmUsIHBsdWdpbnMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHBsdWdpbnMuZXhwcmVzc2lvbnMucmVnaXN0ZXJGdW5jdGlvbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF9tZXJnZV90YWJsZXMubWVyZ2VUYWJsZXM7CiAgICAgIH0pOwogICAgICBwbHVnaW5zLmV4cHJlc3Npb25zLnJlZ2lzdGVyRnVuY3Rpb24oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfZm9ybWF0X2NvbHVtbi5mb3JtYXRDb2x1bW47CiAgICAgIH0pOwoKICAgICAgdmFyIGdldFN0YXJ0U2VydmljZXMgPQogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgdmFyIF9yZWYyLCBfcmVmMywgY29yZVN0YXJ0LCBkZXBzOwoKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIHJldHVybiBjb3JlLmdldFN0YXJ0U2VydmljZXMoKTsKCiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIF9yZWYyID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgICAgX3JlZjMgPSBfc2xpY2VkVG9BcnJheShfcmVmMiwgMik7CiAgICAgICAgICAgICAgICAgIGNvcmVTdGFydCA9IF9yZWYzWzBdOwogICAgICAgICAgICAgICAgICBkZXBzID0gX3JlZjNbMV07CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgICAgICBjYXBhYmlsaXRpZXM6IGNvcmVTdGFydC5hcHBsaWNhdGlvbi5jYXBhYmlsaXRpZXMsCiAgICAgICAgICAgICAgICAgICAgc2F2ZWRPYmplY3RzQ2xpZW50OiBjb3JlU3RhcnQuc2F2ZWRPYmplY3RzLmNsaWVudCwKICAgICAgICAgICAgICAgICAgICBjb3JlSHR0cDogY29yZVN0YXJ0Lmh0dHAsCiAgICAgICAgICAgICAgICAgICAgdGltZWZpbHRlcjogZGVwcy5kYXRhLnF1ZXJ5LnRpbWVmaWx0ZXIudGltZWZpbHRlciwKICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uUmVuZGVyZXI6IGRlcHMuZXhwcmVzc2lvbnMuUmVhY3RFeHByZXNzaW9uUmVuZGVyZXIsCiAgICAgICAgICAgICAgICAgICAgaW5kZXhQYXR0ZXJuU2VydmljZTogZGVwcy5kYXRhLmluZGV4UGF0dGVybnMKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGdldFN0YXJ0U2VydmljZXMoKSB7CiAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKTsKCiAgICAgIHBsdWdpbnMuZW1iZWRkYWJsZS5yZWdpc3RlckVtYmVkZGFibGVGYWN0b3J5KCdsZW5zJywgbmV3IF9lbWJlZGRhYmxlX2ZhY3RvcnkuRW1iZWRkYWJsZUZhY3RvcnkoZ2V0U3RhcnRTZXJ2aWNlcykpOwogICAgICByZXR1cm4gewogICAgICAgIHJlZ2lzdGVyRGF0YXNvdXJjZTogZnVuY3Rpb24gcmVnaXN0ZXJEYXRhc291cmNlKGRhdGFzb3VyY2UpIHsKICAgICAgICAgIF90aGlzLmRhdGFzb3VyY2VzLnB1c2goZGF0YXNvdXJjZSk7CiAgICAgICAgfSwKICAgICAgICByZWdpc3RlclZpc3VhbGl6YXRpb246IGZ1bmN0aW9uIHJlZ2lzdGVyVmlzdWFsaXphdGlvbih2aXN1YWxpemF0aW9uKSB7CiAgICAgICAgICBfdGhpcy52aXN1YWxpemF0aW9ucy5wdXNoKHZpc3VhbGl6YXRpb24pOwogICAgICAgIH0KICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzdGFydCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnQoY29yZSwgcGx1Z2lucykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBjcmVhdGVJbnN0YW5jZSA9CiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmNCA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICAgIHZhciBkb21FbGVtZW50LCBfcmVmNSwgX3JlZjYsIHJlc29sdmVkRGF0YXNvdXJjZXMsIHJlc29sdmVkVmlzdWFsaXphdGlvbnM7CgogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW2NvbGxlY3RBc3luY0RlZmluaXRpb25zKF90aGlzMi5kYXRhc291cmNlcyksIGNvbGxlY3RBc3luY0RlZmluaXRpb25zKF90aGlzMi52aXN1YWxpemF0aW9ucyldKTsKCiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIF9yZWY1ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICAgIF9yZWY2ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjUsIDIpOwogICAgICAgICAgICAgICAgICByZXNvbHZlZERhdGFzb3VyY2VzID0gX3JlZjZbMF07CiAgICAgICAgICAgICAgICAgIHJlc29sdmVkVmlzdWFsaXphdGlvbnMgPSBfcmVmNlsxXTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgICAgICBtb3VudDogZnVuY3Rpb24gbW91bnQoZWxlbWVudCwgX3JlZjcpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBkb2MgPSBfcmVmNy5kb2MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvciA9IF9yZWY3Lm9uRXJyb3IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVJhbmdlID0gX3JlZjcuZGF0ZVJhbmdlLAogICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5ID0gX3JlZjcucXVlcnksCiAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycyA9IF9yZWY3LmZpbHRlcnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZWRRdWVyeSA9IF9yZWY3LnNhdmVkUXVlcnksCiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2UgPSBfcmVmNy5vbkNoYW5nZTsKICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQgPSBlbGVtZW50OwogICAgICAgICAgICAgICAgICAgICAgdmFyIGZpcnN0RGF0YXNvdXJjZUlkID0gT2JqZWN0LmtleXMocmVzb2x2ZWREYXRhc291cmNlcylbMF07CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlyc3RWaXN1YWxpemF0aW9uSWQgPSBPYmplY3Qua2V5cyhyZXNvbHZlZFZpc3VhbGl6YXRpb25zKVswXTsKICAgICAgICAgICAgICAgICAgICAgICgwLCBfcmVhY3REb20ucmVuZGVyKShfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuSTE4blByb3ZpZGVyLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9lZGl0b3JfZnJhbWUuRWRpdG9yRnJhbWUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImxuc0VkaXRvckZyYW1lIiwKICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvcjogb25FcnJvciwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNvdXJjZU1hcDogcmVzb2x2ZWREYXRhc291cmNlcywKICAgICAgICAgICAgICAgICAgICAgICAgdmlzdWFsaXphdGlvbk1hcDogcmVzb2x2ZWRWaXN1YWxpemF0aW9ucywKICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbERhdGFzb3VyY2VJZDogKDAsIF9zdGF0ZV9tYW5hZ2VtZW50LmdldEFjdGl2ZURhdGFzb3VyY2VJZEZyb21Eb2MpKGRvYykgfHwgZmlyc3REYXRhc291cmNlSWQgfHwgbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFZpc3VhbGl6YXRpb25JZDogZG9jICYmIGRvYy52aXN1YWxpemF0aW9uVHlwZSB8fCBmaXJzdFZpc3VhbGl6YXRpb25JZCB8fCBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBjb3JlOiBjb3JlLAogICAgICAgICAgICAgICAgICAgICAgICBFeHByZXNzaW9uUmVuZGVyZXI6IHBsdWdpbnMuZXhwcmVzc2lvbnMuUmVhY3RFeHByZXNzaW9uUmVuZGVyZXIsCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYzogZG9jLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRlUmFuZ2U6IGRhdGVSYW5nZSwKICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5LAogICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzOiBmaWx0ZXJzLAogICAgICAgICAgICAgICAgICAgICAgICBzYXZlZFF1ZXJ5OiBzYXZlZFF1ZXJ5LAogICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogb25DaGFuZ2UKICAgICAgICAgICAgICAgICAgICAgIH0pKSwgZG9tRWxlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB1bm1vdW50OiBmdW5jdGlvbiB1bm1vdW50KCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKGRvbUVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgKDAsIF9yZWFjdERvbS51bm1vdW50Q29tcG9uZW50QXROb2RlKShkb21FbGVtZW50KTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlKCkgewogICAgICAgICAgcmV0dXJuIF9yZWY0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpOwoKICAgICAgcmV0dXJuIHsKICAgICAgICBjcmVhdGVJbnN0YW5jZTogY3JlYXRlSW5zdGFuY2UKICAgICAgfTsKICAgIH0KICB9XSk7CgogIHJldHVybiBFZGl0b3JGcmFtZVNlcnZpY2U7Cn0oKTsKCmV4cG9ydHMuRWRpdG9yRnJhbWVTZXJ2aWNlID0gRWRpdG9yRnJhbWVTZXJ2aWNlOw=="},null]}