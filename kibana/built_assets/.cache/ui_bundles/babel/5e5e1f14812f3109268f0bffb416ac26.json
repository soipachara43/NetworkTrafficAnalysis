{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/maps/public/layers/sources/wms_source/wms_client.js","dependencies":[{"path":"x-pack/legacy/plugins/maps/public/layers/sources/wms_source/wms_client.js","mtime":1589249552460},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLldtc0NsaWVudCA9IHZvaWQgMDsKCnZhciBfbG9kYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsb2Rhc2giKSk7Cgp2YXIgX3BhcnNlX3htbF9zdHJpbmcgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21tb24vcGFyc2VfeG1sX3N0cmluZyIpOwoKdmFyIF9ub2RlRmV0Y2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIm5vZGUtZmV0Y2giKSk7Cgp2YXIgX3VybCA9IHJlcXVpcmUoInVybCIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKdmFyIFdtc0NsaWVudCA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFdtc0NsaWVudChfcmVmKSB7CiAgICB2YXIgc2VydmljZVVybCA9IF9yZWYuc2VydmljZVVybDsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgV21zQ2xpZW50KTsKCiAgICB0aGlzLl9zZXJ2aWNlVXJsID0gc2VydmljZVVybDsKICB9CgogIF9jcmVhdGVDbGFzcyhXbXNDbGllbnQsIFt7CiAgICBrZXk6ICJfZmV0Y2giLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9mZXRjaDIgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHVybCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsICgwLCBfbm9kZUZldGNoLmRlZmF1bHQpKHVybCkpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gX2ZldGNoKF94KSB7CiAgICAgICAgcmV0dXJuIF9mZXRjaDIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIF9mZXRjaDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogIl9jcmVhdGVVcmwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVVcmwoZGVmYXVsdFF1ZXJ5UGFyYW1zKSB7CiAgICAgIHZhciBzZXJ2aWNlVXJsID0gKDAsIF91cmwucGFyc2UpKHRoaXMuX3NlcnZpY2VVcmwsIHRydWUpOwoKICAgICAgdmFyIHF1ZXJ5UGFyYW1zID0gX29iamVjdFNwcmVhZCh7fSwgc2VydmljZVVybC5xdWVyeSwge30sIGRlZmF1bHRRdWVyeVBhcmFtcyk7CgogICAgICByZXR1cm4gKDAsIF91cmwuZm9ybWF0KSh7CiAgICAgICAgcHJvdG9jb2w6IHNlcnZpY2VVcmwucHJvdG9jb2wsCiAgICAgICAgaG9zdG5hbWU6IHNlcnZpY2VVcmwuaG9zdG5hbWUsCiAgICAgICAgcG9ydDogc2VydmljZVVybC5wb3J0LAogICAgICAgIHBhdGhuYW1lOiBzZXJ2aWNlVXJsLnBhdGhuYW1lLAogICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtcwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRVcmxUZW1wbGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VXJsVGVtcGxhdGUobGF5ZXJzLCBzdHlsZXMpIHsKICAgICAgdmFyIHVybFRlbXBsYXRlID0gdGhpcy5fY3JlYXRlVXJsKHsKICAgICAgICBmb3JtYXQ6ICdpbWFnZS9wbmcnLAogICAgICAgIHNlcnZpY2U6ICdXTVMnLAogICAgICAgIHZlcnNpb246ICcxLjEuMScsCiAgICAgICAgcmVxdWVzdDogJ0dldE1hcCcsCiAgICAgICAgc3JzOiAnRVBTRzozODU3JywKICAgICAgICB0cmFuc3BhcmVudDogJ3RydWUnLAogICAgICAgIHdpZHRoOiAnMjU2JywKICAgICAgICBoZWlnaHQ6ICcyNTYnLAogICAgICAgIGxheWVyczogbGF5ZXJzLAogICAgICAgIHN0eWxlczogc3R5bGVzCiAgICAgIH0pOyAvL1RPRE8gRmluZCBhIGJldHRlciB3YXkgdG8gYXZvaWQgVVJMIGVuY29kaW5nIHRoZSB0ZW1wbGF0ZSBicmFjZXMKCgogICAgICByZXR1cm4gIiIuY29uY2F0KHVybFRlbXBsYXRlLCAiJmJib3g9e2Jib3gtZXBzZy0zODU3fSIpOwogICAgfQogICAgLyoqCiAgICAgKiBFeHRlbmQgYW55IHF1ZXJ5IHBhcmFtZXRlcnMgc3VwcGxpZWQgaW4gdGhlIFVSTCBidXQgb3ZlcnJpZGUgd2l0aCByZXF1aXJlZCBkZWZhdWx0cwogICAgICogKGV4LiBzZXJ2aWNlIG11c3QgYmUgV01TKQogICAgICovCgogIH0sIHsKICAgIGtleTogIl9mZXRjaENhcGFiaWxpdGllcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2ZldGNoQ2FwYWJpbGl0aWVzMiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBnZXRDYXBhYmlsaXRpZXNVcmwsIHF1ZXJ5UGFyYW1zLCByZXNwLCBib2R5OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBnZXRDYXBhYmlsaXRpZXNVcmwgPSAoMCwgX3VybC5wYXJzZSkodGhpcy5fc2VydmljZVVybCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtcyA9IF9vYmplY3RTcHJlYWQoe30sIGdldENhcGFiaWxpdGllc1VybC5xdWVyeSwge30sIHsKICAgICAgICAgICAgICAgICAgdmVyc2lvbjogJzEuMS4xJywKICAgICAgICAgICAgICAgICAgcmVxdWVzdDogJ0dldENhcGFiaWxpdGllcycsCiAgICAgICAgICAgICAgICAgIHNlcnZpY2U6ICdXTVMnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9mZXRjaCgoMCwgX3VybC5mb3JtYXQpKHsKICAgICAgICAgICAgICAgICAgcHJvdG9jb2w6IGdldENhcGFiaWxpdGllc1VybC5wcm90b2NvbCwKICAgICAgICAgICAgICAgICAgaG9zdG5hbWU6IGdldENhcGFiaWxpdGllc1VybC5ob3N0bmFtZSwKICAgICAgICAgICAgICAgICAgcG9ydDogZ2V0Q2FwYWJpbGl0aWVzVXJsLnBvcnQsCiAgICAgICAgICAgICAgICAgIHBhdGhuYW1lOiBnZXRDYXBhYmlsaXRpZXNVcmwucGF0aG5hbWUsCiAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtcwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXNwID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEocmVzcC5zdGF0dXMgPj0gNDAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiVW5hYmxlIHRvIGFjY2VzcyAiLmNvbmNhdCh0aGlzLnN0YXRlLnNlcnZpY2VVcmwpKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA5OwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3AudGV4dCgpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBib2R5ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfcGFyc2VfeG1sX3N0cmluZy5wYXJzZVhtbFN0cmluZykoYm9keSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQyLnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gX2ZldGNoQ2FwYWJpbGl0aWVzKCkgewogICAgICAgIHJldHVybiBfZmV0Y2hDYXBhYmlsaXRpZXMyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBfZmV0Y2hDYXBhYmlsaXRpZXM7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJnZXRDYXBhYmlsaXRpZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRDYXBhYmlsaXRpZXMgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgcmF3Q2FwYWJpbGl0aWVzLCBfcmVkdWNlTGF5ZXJzLCBsYXllcnMsIHN0eWxlczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9mZXRjaENhcGFiaWxpdGllcygpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByYXdDYXBhYmlsaXRpZXMgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIF9yZWR1Y2VMYXllcnMgPSByZWR1Y2VMYXllcnMoW10sIF9sb2Rhc2guZGVmYXVsdC5nZXQocmF3Q2FwYWJpbGl0aWVzLCAnV01UX01TX0NhcGFiaWxpdGllcy5DYXBhYmlsaXR5WzBdLkxheWVyJywgW10pKSwgbGF5ZXJzID0gX3JlZHVjZUxheWVycy5sYXllcnMsIHN0eWxlcyA9IF9yZWR1Y2VMYXllcnMuc3R5bGVzOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgICAgbGF5ZXJzOiBncm91cENhcGFiaWxpdGllcyhsYXllcnMpLAogICAgICAgICAgICAgICAgICBzdHlsZXM6IGdyb3VwQ2FwYWJpbGl0aWVzKHN0eWxlcykKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRDYXBhYmlsaXRpZXMoKSB7CiAgICAgICAgcmV0dXJuIF9nZXRDYXBhYmlsaXRpZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldENhcGFiaWxpdGllczsKICAgIH0oKQogIH1dKTsKCiAgcmV0dXJuIFdtc0NsaWVudDsKfSgpOwoKZXhwb3J0cy5XbXNDbGllbnQgPSBXbXNDbGllbnQ7CgpmdW5jdGlvbiByZWR1Y2VMYXllcnMocGF0aCwgbGF5ZXJzKSB7CiAgdmFyIGVtcHR5Q2FwYWJpbGl0aWVzID0gewogICAgbGF5ZXJzOiBbXSwKICAgIHN0eWxlczogW10KICB9OwoKICBmdW5jdGlvbiBjcmVhdGVPcHRpb24ob3B0aW9uUGF0aCwgb3B0aW9uVGl0bGUsIG9wdGlvbk5hbWUpIHsKICAgIHJldHVybiB7CiAgICAgIHBhdGg6IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkob3B0aW9uUGF0aCksIFtvcHRpb25UaXRsZV0pLAogICAgICB2YWx1ZTogb3B0aW9uTmFtZQogICAgfTsKICB9CgogIHJldHVybiBsYXllcnMucmVkdWNlKGZ1bmN0aW9uIChhY2N1bXVsYXRlZENhcGFiaWxpdGllcywgbGF5ZXIpIHsKICAgIC8vIExheWVyIGlzIGhpZXJhcmNoaWNhbCwgY29udGludWUgdHJhdmVyc2luZwogICAgaWYgKGxheWVyLkxheWVyKSB7CiAgICAgIHZhciBoaWVyYXJjaGljYWxDYXBhYmlsaXRpZXMgPSByZWR1Y2VMYXllcnMoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShwYXRoKSwgW2xheWVyLlRpdGxlWzBdXSksIGxheWVyLkxheWVyKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBsYXllcnM6IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoYWNjdW11bGF0ZWRDYXBhYmlsaXRpZXMubGF5ZXJzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGhpZXJhcmNoaWNhbENhcGFiaWxpdGllcy5sYXllcnMpKSwKICAgICAgICBzdHlsZXM6IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoYWNjdW11bGF0ZWRDYXBhYmlsaXRpZXMuc3R5bGVzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGhpZXJhcmNoaWNhbENhcGFiaWxpdGllcy5zdHlsZXMpKQogICAgICB9OwogICAgfQoKICAgIHZhciB1cGRhdGVkU3R5bGVzID0gX3RvQ29uc3VtYWJsZUFycmF5KGFjY3VtdWxhdGVkQ2FwYWJpbGl0aWVzLnN0eWxlcyk7CgogICAgaWYgKF9sb2Rhc2guZGVmYXVsdC5oYXMobGF5ZXIsICdTdHlsZVswXScpKSB7CiAgICAgIHVwZGF0ZWRTdHlsZXMucHVzaChjcmVhdGVPcHRpb24ocGF0aCwgX2xvZGFzaC5kZWZhdWx0LmdldChsYXllciwgJ1N0eWxlWzBdLlRpdGxlWzBdJyksIF9sb2Rhc2guZGVmYXVsdC5nZXQobGF5ZXIsICdTdHlsZVswXS5OYW1lWzBdJykpKTsKICAgIH0KCiAgICByZXR1cm4gewogICAgICBsYXllcnM6IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoYWNjdW11bGF0ZWRDYXBhYmlsaXRpZXMubGF5ZXJzKSwgW2NyZWF0ZU9wdGlvbihwYXRoLCBsYXllci5UaXRsZVswXSwgbGF5ZXIuTmFtZVswXSldKSwKICAgICAgc3R5bGVzOiB1cGRhdGVkU3R5bGVzCiAgICB9OwogIH0sIGVtcHR5Q2FwYWJpbGl0aWVzKTsKfSAvLyBBdm9pZCBmaWxsaW5nIHNlbGVjdCBib3ggb3B0aW9uIGxhYmVsIHdpdGggdGV4dCB0aGF0IGlzIGFsbCB0aGUgc2FtZQovLyBDcmVhdGUgYSBzaW5nbGUgZ3JvdXAgZnJvbSBjb21tb24gcGFydHMgb2YgTGF5ZXIgaGllcmFyY2h5CgoKZnVuY3Rpb24gZ3JvdXBDYXBhYmlsaXRpZXMobGlzdCkgewogIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIFtdOwogIH0KCiAgdmFyIG1heFBhdGhEZXB0aCA9IDA7CiAgbGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmMikgewogICAgdmFyIHBhdGggPSBfcmVmMi5wYXRoOwoKICAgIGlmIChwYXRoLmxlbmd0aCA+IG1heFBhdGhEZXB0aCkgewogICAgICBtYXhQYXRoRGVwdGggPSBwYXRoLmxlbmd0aDsKICAgIH0KICB9KTsKICB2YXIgcm9vdENvbW1vblBhdGggPSBsaXN0WzBdLnBhdGg7CgogIGZvciAodmFyIGxpc3RJbmRleCA9IDE7IGxpc3RJbmRleCA8IGxpc3QubGVuZ3RoOyBsaXN0SW5kZXgrKykgewogICAgaWYgKHJvb3RDb21tb25QYXRoLmxlbmd0aCA9PT0gMCkgewogICAgICAvLyBObyBjb21tb25hbGl0eSBpbiByb290IHBhdGgsIG5vdGhpbmcgbGVmdCB0byB2ZXJpZnkKICAgICAgYnJlYWs7CiAgICB9CgogICAgdmFyIHBhdGggPSBsaXN0W2xpc3RJbmRleF0ucGF0aDsKCiAgICBmb3IgKHZhciBwYXRoSW5kZXggPSAwOyBwYXRoSW5kZXggPCBwYXRoLmxlbmd0aCAmJiBwYXRoSW5kZXggPCByb290Q29tbW9uUGF0aC5sZW5ndGg7IHBhdGhJbmRleCsrKSB7CiAgICAgIGlmIChyb290Q29tbW9uUGF0aFtwYXRoSW5kZXhdICE9PSBwYXRoW3BhdGhJbmRleF0pIHsKICAgICAgICAvLyB0cnVuY2F0ZSByb290IGNvbW1vbiBwYXRoIGF0IGxvY2F0aW9uIG9mIGRpdmVyZ2VuY2UKICAgICAgICByb290Q29tbW9uUGF0aCA9IHJvb3RDb21tb25QYXRoLnNsaWNlKDAsIHBhdGhJbmRleCk7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICB9CgogIHZhciBsYWJlbE1hcCA9IG5ldyBNYXAoKTsKICB2YXIgb3B0aW9ucyA9IGxpc3QubWFwKGZ1bmN0aW9uIChfcmVmMykgewogICAgdmFyIHBhdGggPSBfcmVmMy5wYXRoLAogICAgICAgIHZhbHVlID0gX3JlZjMudmFsdWU7CiAgICB2YXIgdGl0bGUgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV07CiAgICB2YXIgaGllcmFjaHlXaXRoVGl0bGUgPSByb290Q29tbW9uUGF0aC5sZW5ndGggPT09IHBhdGgubGVuZ3RoID8gdGl0bGUgLy8gZW50aXJlIHBhdGggaXMgY29tbW9uLCBvbmx5IHVzZSB0aXRsZQogICAgOiBwYXRoLnNwbGljZShyb290Q29tbW9uUGF0aC5sZW5ndGgpLmpvaW4oJyAtICcpOwogICAgdmFyIGxhYmVsID0gdGl0bGUgPT09IHZhbHVlID8gaGllcmFjaHlXaXRoVGl0bGUgOiAiIi5jb25jYXQoaGllcmFjaHlXaXRoVGl0bGUsICIgKCIpLmNvbmNhdCh2YWx1ZSwgIikiKTsgLy8gbGFiZWxzIGFyZSB1c2VkIGFzIGtleXMgaW4gcmVhY3QgZWxlbWVudHMgc28gdW5pcXVlbmVzcyBtdXN0IGJlIGd1YXJhbnRlZWQKCiAgICB2YXIgdW5pcXVlTGFiZWw7CgogICAgaWYgKGxhYmVsTWFwLmhhcyhsYWJlbCkpIHsKICAgICAgdmFyIGNvdW50ZXIgPSBsYWJlbE1hcC5nZXQobGFiZWwpOwogICAgICB2YXIgbmV4dENvdW50ZXIgPSBjb3VudGVyICsgMTsKICAgICAgbGFiZWxNYXAuc2V0KGxhYmVsLCBuZXh0Q291bnRlcik7CiAgICAgIHVuaXF1ZUxhYmVsID0gIiIuY29uY2F0KGxhYmVsLCAiOiIpLmNvbmNhdChuZXh0Q291bnRlcik7CiAgICB9IGVsc2UgewogICAgICBsYWJlbE1hcC5zZXQobGFiZWwsIDApOwogICAgICB1bmlxdWVMYWJlbCA9IGxhYmVsOwogICAgfQoKICAgIHJldHVybiB7CiAgICAgIGxhYmVsOiB1bmlxdWVMYWJlbCwKICAgICAgdmFsdWU6IHZhbHVlCiAgICB9OwogIH0pOyAvLyBubyBjb21tb24gcGF0aCBvciBhbGwgYXQgc2FtZSBkZXB0aCBwYXRoCgogIGlmIChyb290Q29tbW9uUGF0aC5sZW5ndGggPT09IDAgfHwgcm9vdENvbW1vblBhdGgubGVuZ3RoID09PSBtYXhQYXRoRGVwdGgpIHsKICAgIHJldHVybiBvcHRpb25zOwogIH0KCiAgcmV0dXJuIFt7CiAgICBsYWJlbDogcm9vdENvbW1vblBhdGguam9pbignIC0gJyksCiAgICBvcHRpb25zOiBvcHRpb25zCiAgfV07Cn0="},null]}