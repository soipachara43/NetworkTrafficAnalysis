{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/monitoring/public/lib/setup_mode.js","dependencies":[{"path":"x-pack/legacy/plugins/monitoring/public/lib/setup_mode.js","mtime":1589249552604},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmlzSW5TZXR1cE1vZGUgPSBleHBvcnRzLmluaXRTZXR1cE1vZGVTdGF0ZSA9IGV4cG9ydHMuYWRkU2V0dXBNb2RlQ2FsbGJhY2sgPSBleHBvcnRzLnNldFNldHVwTW9kZU1lbnVJdGVtID0gZXhwb3J0cy50b2dnbGVTZXR1cE1vZGUgPSBleHBvcnRzLmRpc2FibGVFbGFzdGljc2VhcmNoSW50ZXJuYWxDb2xsZWN0aW9uID0gZXhwb3J0cy51cGRhdGVTZXR1cE1vZGVEYXRhID0gZXhwb3J0cy5mZXRjaENvbGxlY3Rpb25EYXRhID0gZXhwb3J0cy5zZXROZXdseURpc2NvdmVyZWRDbHVzdGVyVXVpZCA9IGV4cG9ydHMuZ2V0U2V0dXBNb2RlU3RhdGUgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcmVhY3REb20gPSByZXF1aXJlKCJyZWFjdC1kb20iKTsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX25vdGlmeSA9IHJlcXVpcmUoInVpL25vdGlmeSIpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX25ld19wbGF0Zm9ybSA9IHJlcXVpcmUoInVpL25ld19wbGF0Zm9ybSIpOwoKdmFyIF9jaHJvbWUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4uL25wX2ltcG9ydHMvdWkvY2hyb21lIikpOwoKdmFyIF9hamF4X2Vycm9yX2hhbmRsZXIgPSByZXF1aXJlKCIuL2FqYXhfZXJyb3JfaGFuZGxlciIpOwoKdmFyIF9lbnRlcl9idXR0b24gPSByZXF1aXJlKCIuLi9jb21wb25lbnRzL3NldHVwX21vZGUvZW50ZXJfYnV0dG9uIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7CiAgdHJ5IHsKICAgIHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsKICAgIHZhciB2YWx1ZSA9IGluZm8udmFsdWU7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIHJlamVjdChlcnJvcik7CiAgICByZXR1cm47CiAgfQoKICBpZiAoaW5mby5kb25lKSB7CiAgICByZXNvbHZlKHZhbHVlKTsKICB9IGVsc2UgewogICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOwogIH0KfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgdmFyIHNlbGYgPSB0aGlzLAogICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7CgogICAgICBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgewogICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsKICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7CiAgICAgIH0KCiAgICAgIF9uZXh0KHVuZGVmaW5lZCk7CiAgICB9KTsKICB9Owp9CgpmdW5jdGlvbiBpc09uUGFnZShoYXNoKSB7CiAgcmV0dXJuICgwLCBfbG9kYXNoLmNvbnRhaW5zKSh3aW5kb3cubG9jYXRpb24uaGFzaCwgaGFzaCk7Cn0KCnZhciBhbmd1bGFyU3RhdGUgPSB7CiAgaW5qZWN0b3I6IG51bGwsCiAgc2NvcGU6IG51bGwKfTsKCnZhciBjaGVja0FuZ3VsYXJTdGF0ZSA9IGZ1bmN0aW9uIGNoZWNrQW5ndWxhclN0YXRlKCkgewogIGlmICghYW5ndWxhclN0YXRlLmluamVjdG9yIHx8ICFhbmd1bGFyU3RhdGUuc2NvcGUpIHsKICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGludGVyYWN0IHdpdGggc2V0dXAgbW9kZSBiZWNhdXNlIHRoZSBhbmd1bGFyIGluamVjdG9yIHdhcyBub3QgcHJldmlvdXNseSBzZXQuJyArICcgVGhpcyBuZWVkcyB0byBiZSBzZXQgYnkgY2FsbGluZyBgaW5pdFNldHVwTW9kZVN0YXRlYC4nKTsKICB9Cn07Cgp2YXIgc2V0dXBNb2RlU3RhdGUgPSB7CiAgZW5hYmxlZDogZmFsc2UsCiAgZGF0YTogbnVsbCwKICBjYWxsYmFja3M6IFtdCn07Cgp2YXIgZ2V0U2V0dXBNb2RlU3RhdGUgPSBmdW5jdGlvbiBnZXRTZXR1cE1vZGVTdGF0ZSgpIHsKICByZXR1cm4gc2V0dXBNb2RlU3RhdGU7Cn07CgpleHBvcnRzLmdldFNldHVwTW9kZVN0YXRlID0gZ2V0U2V0dXBNb2RlU3RhdGU7Cgp2YXIgc2V0TmV3bHlEaXNjb3ZlcmVkQ2x1c3RlclV1aWQgPSBmdW5jdGlvbiBzZXROZXdseURpc2NvdmVyZWRDbHVzdGVyVXVpZChjbHVzdGVyVXVpZCkgewogIHZhciBnbG9iYWxTdGF0ZSA9IGFuZ3VsYXJTdGF0ZS5pbmplY3Rvci5nZXQoJ2dsb2JhbFN0YXRlJyk7CiAgdmFyIGV4ZWN1dG9yID0gYW5ndWxhclN0YXRlLmluamVjdG9yLmdldCgnJGV4ZWN1dG9yJyk7CiAgYW5ndWxhclN0YXRlLnNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7CiAgICBnbG9iYWxTdGF0ZS5jbHVzdGVyX3V1aWQgPSBjbHVzdGVyVXVpZDsKICAgIGdsb2JhbFN0YXRlLnNhdmUoKTsKICB9KTsKICBleGVjdXRvci5ydW4oKTsKfTsKCmV4cG9ydHMuc2V0TmV3bHlEaXNjb3ZlcmVkQ2x1c3RlclV1aWQgPSBzZXROZXdseURpc2NvdmVyZWRDbHVzdGVyVXVpZDsKCnZhciBmZXRjaENvbGxlY3Rpb25EYXRhID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh1dWlkKSB7CiAgICB2YXIgZmV0Y2hXaXRob3V0Q2x1c3RlclV1aWQsCiAgICAgICAgaHR0cCwKICAgICAgICBnbG9iYWxTdGF0ZSwKICAgICAgICBjbHVzdGVyVXVpZCwKICAgICAgICBjY3MsCiAgICAgICAgdXJsLAogICAgICAgIHJlc3BvbnNlLAogICAgICAgIFByaXZhdGUsCiAgICAgICAgYWpheEVycm9ySGFuZGxlcnMsCiAgICAgICAgX2FyZ3MgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGZldGNoV2l0aG91dENsdXN0ZXJVdWlkID0gX2FyZ3MubGVuZ3RoID4gMSAmJiBfYXJnc1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3NbMV0gOiBmYWxzZTsKICAgICAgICAgICAgY2hlY2tBbmd1bGFyU3RhdGUoKTsKICAgICAgICAgICAgaHR0cCA9IGFuZ3VsYXJTdGF0ZS5pbmplY3Rvci5nZXQoJyRodHRwJyk7CiAgICAgICAgICAgIGdsb2JhbFN0YXRlID0gYW5ndWxhclN0YXRlLmluamVjdG9yLmdldCgnZ2xvYmFsU3RhdGUnKTsKICAgICAgICAgICAgY2x1c3RlclV1aWQgPSBnbG9iYWxTdGF0ZS5jbHVzdGVyX3V1aWQ7CiAgICAgICAgICAgIGNjcyA9IGdsb2JhbFN0YXRlLmNjczsKICAgICAgICAgICAgdXJsID0gJy4uL2FwaS9tb25pdG9yaW5nL3YxL3NldHVwL2NvbGxlY3Rpb24nOwoKICAgICAgICAgICAgaWYgKHV1aWQpIHsKICAgICAgICAgICAgICB1cmwgKz0gIi9ub2RlLyIuY29uY2F0KHV1aWQpOwogICAgICAgICAgICB9IGVsc2UgaWYgKCFmZXRjaFdpdGhvdXRDbHVzdGVyVXVpZCAmJiBjbHVzdGVyVXVpZCkgewogICAgICAgICAgICAgIHVybCArPSAiL2NsdXN0ZXIvIi5jb25jYXQoY2x1c3RlclV1aWQpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHVybCArPSAnL2NsdXN0ZXInOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gODsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICByZXR1cm4gaHR0cC5wb3N0KHVybCwgewogICAgICAgICAgICAgIGNjczogY2NzCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuZGF0YSk7CgogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE1OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDgpOwogICAgICAgICAgICBQcml2YXRlID0gYW5ndWxhclN0YXRlLmluamVjdG9yLmdldCgnUHJpdmF0ZScpOwogICAgICAgICAgICBhamF4RXJyb3JIYW5kbGVycyA9IFByaXZhdGUoX2FqYXhfZXJyb3JfaGFuZGxlci5hamF4RXJyb3JIYW5kbGVyc1Byb3ZpZGVyKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgYWpheEVycm9ySGFuZGxlcnMoX2NvbnRleHQudDApKTsKCiAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbOCwgMTVdXSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gZmV0Y2hDb2xsZWN0aW9uRGF0YShfeCkgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7CgpleHBvcnRzLmZldGNoQ29sbGVjdGlvbkRhdGEgPSBmZXRjaENvbGxlY3Rpb25EYXRhOwoKdmFyIG5vdGlmeVNldHVwTW9kZURhdGFDaGFuZ2UgPSBmdW5jdGlvbiBub3RpZnlTZXR1cE1vZGVEYXRhQ2hhbmdlKG9sZERhdGEpIHsKICBzZXR1cE1vZGVTdGF0ZS5jYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbiAoY2IpIHsKICAgIHJldHVybiBjYihvbGREYXRhKTsKICB9KTsKfTsKCnZhciB1cGRhdGVTZXR1cE1vZGVEYXRhID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHV1aWQpIHsKICAgIHZhciBmZXRjaFdpdGhvdXRDbHVzdGVyVXVpZCwKICAgICAgICBvbGREYXRhLAogICAgICAgIGRhdGEsCiAgICAgICAgX3JlZjMsCiAgICAgICAgY2xvdWQsCiAgICAgICAgaXNDbG91ZEVuYWJsZWQsCiAgICAgICAgaGFzUGVybWlzc2lvbnMsCiAgICAgICAgdGV4dCwKICAgICAgICBnbG9iYWxTdGF0ZSwKICAgICAgICBjbHVzdGVyVXVpZCwKICAgICAgICBsaXZlQ2x1c3RlclV1aWQsCiAgICAgICAgbWlncmF0ZWRFc05vZGVzLAogICAgICAgIF9hcmdzMiA9IGFyZ3VtZW50czsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBmZXRjaFdpdGhvdXRDbHVzdGVyVXVpZCA9IF9hcmdzMi5sZW5ndGggPiAxICYmIF9hcmdzMlsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3MyWzFdIDogZmFsc2U7CiAgICAgICAgICAgIG9sZERhdGEgPSBzZXR1cE1vZGVTdGF0ZS5kYXRhOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiBmZXRjaENvbGxlY3Rpb25EYXRhKHV1aWQsIGZldGNoV2l0aG91dENsdXN0ZXJVdWlkKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGRhdGEgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgc2V0dXBNb2RlU3RhdGUuZGF0YSA9IGRhdGE7CiAgICAgICAgICAgIF9yZWYzID0gX25ld19wbGF0Zm9ybS5ucFNldHVwLnBsdWdpbnMsIGNsb3VkID0gX3JlZjMuY2xvdWQ7CiAgICAgICAgICAgIGlzQ2xvdWRFbmFibGVkID0gISEoY2xvdWQgJiYgY2xvdWQuaXNDbG91ZEVuYWJsZWQpOwogICAgICAgICAgICBoYXNQZXJtaXNzaW9ucyA9ICgwLCBfbG9kYXNoLmdldCkoZGF0YSwgJ19tZXRhLmhhc1Blcm1pc3Npb25zJywgZmFsc2UpOwoKICAgICAgICAgICAgaWYgKCEoaXNDbG91ZEVuYWJsZWQgfHwgIWhhc1Blcm1pc3Npb25zKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRleHQgPSAnJzsKCiAgICAgICAgICAgIGlmICghaGFzUGVybWlzc2lvbnMpIHsKICAgICAgICAgICAgICB0ZXh0ID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1vbml0b3Jpbmcuc2V0dXBNb2RlLm5vdEF2YWlsYWJsZVBlcm1pc3Npb25zJywgewogICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdZb3UgZG8gbm90IGhhdmUgdGhlIG5lY2Vzc2FyeSBwZXJtaXNzaW9ucyB0byBkbyB0aGlzLicKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0ZXh0ID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1vbml0b3Jpbmcuc2V0dXBNb2RlLm5vdEF2YWlsYWJsZUNsb3VkJywgewogICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdUaGlzIGZlYXR1cmUgaXMgbm90IGF2YWlsYWJsZSBvbiBjbG91ZC4nCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGFuZ3VsYXJTdGF0ZS5zY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBfbm90aWZ5LnRvYXN0Tm90aWZpY2F0aW9ucy5hZGREYW5nZXIoewogICAgICAgICAgICAgICAgdGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tb25pdG9yaW5nLnNldHVwTW9kZS5ub3RBdmFpbGFibGVUaXRsZScsIHsKICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTZXR1cCBtb2RlIGlzIG5vdCBhdmFpbGFibGUnCiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHRleHQ6IHRleHQKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCB0b2dnbGVTZXR1cE1vZGUoZmFsc2UpKTsKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBub3RpZnlTZXR1cE1vZGVEYXRhQ2hhbmdlKG9sZERhdGEpOwogICAgICAgICAgICBnbG9iYWxTdGF0ZSA9IGFuZ3VsYXJTdGF0ZS5pbmplY3Rvci5nZXQoJ2dsb2JhbFN0YXRlJyk7CiAgICAgICAgICAgIGNsdXN0ZXJVdWlkID0gZ2xvYmFsU3RhdGUuY2x1c3Rlcl91dWlkOwoKICAgICAgICAgICAgaWYgKCFjbHVzdGVyVXVpZCkgewogICAgICAgICAgICAgIGxpdmVDbHVzdGVyVXVpZCA9ICgwLCBfbG9kYXNoLmdldCkoZGF0YSwgJ19tZXRhLmxpdmVDbHVzdGVyVXVpZCcpOwogICAgICAgICAgICAgIG1pZ3JhdGVkRXNOb2RlcyA9IE9iamVjdC52YWx1ZXMoKDAsIF9sb2Rhc2guZ2V0KShkYXRhLCAnZWxhc3RpY3NlYXJjaC5ieVV1aWQnLCB7fSkpLmZpbHRlcihmdW5jdGlvbiAobm9kZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUuaXNQYXJ0aWFsbHlNaWdyYXRlZCB8fCBub2RlLmlzRnVsbHlNaWdyYXRlZDsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgaWYgKGxpdmVDbHVzdGVyVXVpZCAmJiBtaWdyYXRlZEVzTm9kZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgc2V0TmV3bHlEaXNjb3ZlcmVkQ2x1c3RlclV1aWQobGl2ZUNsdXN0ZXJVdWlkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMik7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlU2V0dXBNb2RlRGF0YShfeDIpIHsKICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCmV4cG9ydHMudXBkYXRlU2V0dXBNb2RlRGF0YSA9IHVwZGF0ZVNldHVwTW9kZURhdGE7Cgp2YXIgZGlzYWJsZUVsYXN0aWNzZWFyY2hJbnRlcm5hbENvbGxlY3Rpb24gPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjQgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICB2YXIgaHR0cCwgZ2xvYmFsU3RhdGUsIGNsdXN0ZXJVdWlkLCB1cmwsIHJlc3BvbnNlLCBQcml2YXRlLCBhamF4RXJyb3JIYW5kbGVyczsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGNoZWNrQW5ndWxhclN0YXRlKCk7CiAgICAgICAgICAgIGh0dHAgPSBhbmd1bGFyU3RhdGUuaW5qZWN0b3IuZ2V0KCckaHR0cCcpOwogICAgICAgICAgICBnbG9iYWxTdGF0ZSA9IGFuZ3VsYXJTdGF0ZS5pbmplY3Rvci5nZXQoJ2dsb2JhbFN0YXRlJyk7CiAgICAgICAgICAgIGNsdXN0ZXJVdWlkID0gZ2xvYmFsU3RhdGUuY2x1c3Rlcl91dWlkOwogICAgICAgICAgICB1cmwgPSAiLi4vYXBpL21vbml0b3JpbmcvdjEvc2V0dXAvY29sbGVjdGlvbi8iLmNvbmNhdChjbHVzdGVyVXVpZCwgIi9kaXNhYmxlX2ludGVybmFsX2NvbGxlY3Rpb24iKTsKICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA1OwogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDg7CiAgICAgICAgICAgIHJldHVybiBodHRwLnBvc3QodXJsKTsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZS5kYXRhKTsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDEyOwogICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDNbImNhdGNoIl0oNSk7CiAgICAgICAgICAgIFByaXZhdGUgPSBhbmd1bGFyU3RhdGUuaW5qZWN0b3IuZ2V0KCdQcml2YXRlJyk7CiAgICAgICAgICAgIGFqYXhFcnJvckhhbmRsZXJzID0gUHJpdmF0ZShfYWpheF9lcnJvcl9oYW5kbGVyLmFqYXhFcnJvckhhbmRsZXJzUHJvdmlkZXIpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgYWpheEVycm9ySGFuZGxlcnMoX2NvbnRleHQzLnQwKSk7CgogICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTMsIG51bGwsIFtbNSwgMTJdXSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gZGlzYWJsZUVsYXN0aWNzZWFyY2hJbnRlcm5hbENvbGxlY3Rpb24oKSB7CiAgICByZXR1cm4gX3JlZjQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7CgpleHBvcnRzLmRpc2FibGVFbGFzdGljc2VhcmNoSW50ZXJuYWxDb2xsZWN0aW9uID0gZGlzYWJsZUVsYXN0aWNzZWFyY2hJbnRlcm5hbENvbGxlY3Rpb247Cgp2YXIgdG9nZ2xlU2V0dXBNb2RlID0gZnVuY3Rpb24gdG9nZ2xlU2V0dXBNb2RlKGluU2V0dXBNb2RlKSB7CiAgY2hlY2tBbmd1bGFyU3RhdGUoKTsKICB2YXIgZ2xvYmFsU3RhdGUgPSBhbmd1bGFyU3RhdGUuaW5qZWN0b3IuZ2V0KCdnbG9iYWxTdGF0ZScpOwogIHNldHVwTW9kZVN0YXRlLmVuYWJsZWQgPSBpblNldHVwTW9kZTsKICBnbG9iYWxTdGF0ZS5pblNldHVwTW9kZSA9IGluU2V0dXBNb2RlOwogIGdsb2JhbFN0YXRlLnNhdmUoKTsKICBzZXRTZXR1cE1vZGVNZW51SXRlbSgpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lICBuby11c2UtYmVmb3JlLWRlZmluZQoKICBub3RpZnlTZXR1cE1vZGVEYXRhQ2hhbmdlKCk7CgogIGlmIChpblNldHVwTW9kZSkgewogICAgLy8gSW50ZW50aW9uYWxseSBkbyBub3QgYXdhaXQgdGhpcyBzbyB3ZSBkb24ndCBibG9jayBVSSBvcGVyYXRpb25zCiAgICB1cGRhdGVTZXR1cE1vZGVEYXRhKCk7CiAgfQp9OwoKZXhwb3J0cy50b2dnbGVTZXR1cE1vZGUgPSB0b2dnbGVTZXR1cE1vZGU7Cgp2YXIgc2V0U2V0dXBNb2RlTWVudUl0ZW0gPSBmdW5jdGlvbiBzZXRTZXR1cE1vZGVNZW51SXRlbSgpIHsKICBjaGVja0FuZ3VsYXJTdGF0ZSgpOwoKICBpZiAoaXNPblBhZ2UoJ25vLWRhdGEnKSkgewogICAgcmV0dXJuOwogIH0KCiAgdmFyIGdsb2JhbFN0YXRlID0gYW5ndWxhclN0YXRlLmluamVjdG9yLmdldCgnZ2xvYmFsU3RhdGUnKTsKICB2YXIgX3JlZjUgPSBfbmV3X3BsYXRmb3JtLm5wU2V0dXAucGx1Z2lucywKICAgICAgY2xvdWQgPSBfcmVmNS5jbG91ZDsKICB2YXIgaXNDbG91ZEVuYWJsZWQgPSAhIShjbG91ZCAmJiBjbG91ZC5pc0Nsb3VkRW5hYmxlZCk7CiAgdmFyIGVuYWJsZWQgPSAhZ2xvYmFsU3RhdGUuaW5TZXR1cE1vZGUgJiYgIWlzQ2xvdWRFbmFibGVkOwogICgwLCBfcmVhY3REb20ucmVuZGVyKShfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9lbnRlcl9idXR0b24uU2V0dXBNb2RlRW50ZXJCdXR0b24sIHsKICAgIGVuYWJsZWQ6IGVuYWJsZWQsCiAgICB0b2dnbGVTZXR1cE1vZGU6IHRvZ2dsZVNldHVwTW9kZQogIH0pLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0dXBNb2RlTmF2JykpOwp9OwoKZXhwb3J0cy5zZXRTZXR1cE1vZGVNZW51SXRlbSA9IHNldFNldHVwTW9kZU1lbnVJdGVtOwoKdmFyIGFkZFNldHVwTW9kZUNhbGxiYWNrID0gZnVuY3Rpb24gYWRkU2V0dXBNb2RlQ2FsbGJhY2soY2FsbGJhY2spIHsKICByZXR1cm4gc2V0dXBNb2RlU3RhdGUuY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spOwp9OwoKZXhwb3J0cy5hZGRTZXR1cE1vZGVDYWxsYmFjayA9IGFkZFNldHVwTW9kZUNhbGxiYWNrOwoKdmFyIGluaXRTZXR1cE1vZGVTdGF0ZSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIHZhciBfcmVmNiA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgkc2NvcGUsICRpbmplY3RvciwgY2FsbGJhY2spIHsKICAgIHZhciBnbG9iYWxTdGF0ZTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGFuZ3VsYXJTdGF0ZS5zY29wZSA9ICRzY29wZTsKICAgICAgICAgICAgYW5ndWxhclN0YXRlLmluamVjdG9yID0gJGluamVjdG9yOwoKICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7CiAgICAgICAgICAgICAgc2V0dXBNb2RlU3RhdGUuY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spOwogICAgICAgICAgICB9CgogICAgICAgICAgICBnbG9iYWxTdGF0ZSA9ICRpbmplY3Rvci5nZXQoJ2dsb2JhbFN0YXRlJyk7CgogICAgICAgICAgICBpZiAoIWdsb2JhbFN0YXRlLmluU2V0dXBNb2RlKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA3OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICAgIHJldHVybiB0b2dnbGVTZXR1cE1vZGUodHJ1ZSk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNCk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gaW5pdFNldHVwTW9kZVN0YXRlKF94MywgX3g0LCBfeDUpIHsKICAgIHJldHVybiBfcmVmNi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCmV4cG9ydHMuaW5pdFNldHVwTW9kZVN0YXRlID0gaW5pdFNldHVwTW9kZVN0YXRlOwoKdmFyIGlzSW5TZXR1cE1vZGUgPSBmdW5jdGlvbiBpc0luU2V0dXBNb2RlKCkgewogIGlmIChzZXR1cE1vZGVTdGF0ZS5lbmFibGVkKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIHZhciAkaW5qZWN0b3IgPSBhbmd1bGFyU3RhdGUuaW5qZWN0b3IgfHwgX2Nocm9tZS5kZWZhdWx0LmRhbmdlcm91c2x5R2V0QWN0aXZlSW5qZWN0b3IoKTsKCiAgdmFyIGdsb2JhbFN0YXRlID0gJGluamVjdG9yLmdldCgnZ2xvYmFsU3RhdGUnKTsKICByZXR1cm4gZ2xvYmFsU3RhdGUuaW5TZXR1cE1vZGU7Cn07CgpleHBvcnRzLmlzSW5TZXR1cE1vZGUgPSBpc0luU2V0dXBNb2RlOw=="},null]}