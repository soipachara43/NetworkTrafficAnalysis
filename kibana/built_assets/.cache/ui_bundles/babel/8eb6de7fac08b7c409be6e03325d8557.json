{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/containers/hosts/index.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/containers/hosts/index.js","mtime":1589249553236},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuSG9zdHNRdWVyeSA9IHZvaWQgMDsKCnZhciBfZnAgPSByZXF1aXJlKCJsb2Rhc2gvZnAiKTsKCnZhciBfbWVtb2l6ZU9uZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibWVtb2l6ZS1vbmUiKSk7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcmVhY3RBcG9sbG8gPSByZXF1aXJlKCJyZWFjdC1hcG9sbG8iKTsKCnZhciBfcmVhY3RSZWR1eCA9IHJlcXVpcmUoInJlYWN0LXJlZHV4Iik7Cgp2YXIgX3JlZHV4ID0gcmVxdWlyZSgicmVkdXgiKTsKCnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgiLi4vLi4vLi4vY29tbW9uL2NvbnN0YW50cyIpOwoKdmFyIF9zdG9yZSA9IHJlcXVpcmUoIi4uLy4uL3N0b3JlIik7Cgp2YXIgX2hlbHBlcnMgPSByZXF1aXJlKCIuLi9oZWxwZXJzIik7Cgp2YXIgX3F1ZXJ5X3RlbXBsYXRlX3BhZ2luYXRlZCA9IHJlcXVpcmUoIi4uL3F1ZXJ5X3RlbXBsYXRlX3BhZ2luYXRlZCIpOwoKdmFyIF9raWJhbmEgPSByZXF1aXJlKCIuLi8uLi9saWIva2liYW5hIik7Cgp2YXIgX2hvc3RzX3RhYmxlID0gcmVxdWlyZSgiLi9ob3N0c190YWJsZS5ncWxfcXVlcnkiKTsKCnZhciBfaGVscGVyczIgPSByZXF1aXJlKCIuLi8uLi9jb21wb25lbnRzL3BhZ2luYXRlZF90YWJsZS9oZWxwZXJzIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogIGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcikgPT09ICJzeW1ib2wiKSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0gZWxzZSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogX3R5cGVvZjIob2JqKTsKICAgIH07CiAgfQoKICByZXR1cm4gX3R5cGVvZihvYmopOwp9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgewogIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgewogICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgYXJyMltpXSA9IGFycltpXTsKICAgIH0KCiAgICByZXR1cm4gYXJyMjsKICB9Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgfQp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogIH0KfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICByZXR1cm4gQ29uc3RydWN0b3I7Cn0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsKICBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7CiAgICByZXR1cm4gY2FsbDsKICB9CgogIHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOwp9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgewogIF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgICByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOwogIH07CiAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsKfQoKZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7CiAgaWYgKHNlbGYgPT09IHZvaWQgMCkgewogICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsKICB9CgogIHJldHVybiBzZWxmOwp9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsKICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsKICB9CgogIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgewogICAgY29uc3RydWN0b3I6IHsKICAgICAgdmFsdWU6IHN1YkNsYXNzLAogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICB9CiAgfSk7CiAgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7Cn0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgICBvLl9fcHJvdG9fXyA9IHA7CiAgICByZXR1cm4gbzsKICB9OwoKICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIElEID0gJ2hvc3RzUXVlcnknOwoKdmFyIEhvc3RzQ29tcG9uZW50UXVlcnkgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfUXVlcnlUZW1wbGF0ZVBhZ2luYXQpIHsKICBfaW5oZXJpdHMoSG9zdHNDb21wb25lbnRRdWVyeSwgX1F1ZXJ5VGVtcGxhdGVQYWdpbmF0KTsKCiAgZnVuY3Rpb24gSG9zdHNDb21wb25lbnRRdWVyeShwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBIb3N0c0NvbXBvbmVudFF1ZXJ5KTsKCiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihIb3N0c0NvbXBvbmVudFF1ZXJ5KS5jYWxsKHRoaXMsIHByb3BzKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAibWVtb2l6ZWRIb3N0cyIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZ2V0SG9zdHMiLCBmdW5jdGlvbiAodmFyaWFibGVzLCBzb3VyY2UpIHsKICAgICAgcmV0dXJuICgwLCBfZnAuZ2V0T3IpKFtdLCAnSG9zdHMuZWRnZXMnLCBzb3VyY2UpOwogICAgfSk7CgogICAgX3RoaXMubWVtb2l6ZWRIb3N0cyA9ICgwLCBfbWVtb2l6ZU9uZS5kZWZhdWx0KShfdGhpcy5nZXRIb3N0cyk7CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoSG9zdHNDb21wb25lbnRRdWVyeSwgW3sKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IHRoaXMucHJvcHMsCiAgICAgICAgICBhY3RpdmVQYWdlID0gX3RoaXMkcHJvcHMuYWN0aXZlUGFnZSwKICAgICAgICAgIF90aGlzJHByb3BzJGlkID0gX3RoaXMkcHJvcHMuaWQsCiAgICAgICAgICBpZCA9IF90aGlzJHByb3BzJGlkID09PSB2b2lkIDAgPyBJRCA6IF90aGlzJHByb3BzJGlkLAogICAgICAgICAgaXNJbnNwZWN0ZWQgPSBfdGhpcyRwcm9wcy5pc0luc3BlY3RlZCwKICAgICAgICAgIGNoaWxkcmVuID0gX3RoaXMkcHJvcHMuY2hpbGRyZW4sCiAgICAgICAgICBkaXJlY3Rpb24gPSBfdGhpcyRwcm9wcy5kaXJlY3Rpb24sCiAgICAgICAgICBmaWx0ZXJRdWVyeSA9IF90aGlzJHByb3BzLmZpbHRlclF1ZXJ5LAogICAgICAgICAgZW5kRGF0ZSA9IF90aGlzJHByb3BzLmVuZERhdGUsCiAgICAgICAgICBraWJhbmEgPSBfdGhpcyRwcm9wcy5raWJhbmEsCiAgICAgICAgICBsaW1pdCA9IF90aGlzJHByb3BzLmxpbWl0LAogICAgICAgICAgc3RhcnREYXRlID0gX3RoaXMkcHJvcHMuc3RhcnREYXRlLAogICAgICAgICAgc2tpcCA9IF90aGlzJHByb3BzLnNraXAsCiAgICAgICAgICBzb3VyY2VJZCA9IF90aGlzJHByb3BzLnNvdXJjZUlkLAogICAgICAgICAgc29ydEZpZWxkID0gX3RoaXMkcHJvcHMuc29ydEZpZWxkOwogICAgICB2YXIgZGVmYXVsdEluZGV4ID0ga2liYW5hLnNlcnZpY2VzLnVpU2V0dGluZ3MuZ2V0KF9jb25zdGFudHMuREVGQVVMVF9JTkRFWF9LRVkpOwogICAgICB2YXIgdmFyaWFibGVzID0gewogICAgICAgIHNvdXJjZUlkOiBzb3VyY2VJZCwKICAgICAgICB0aW1lcmFuZ2U6IHsKICAgICAgICAgIGludGVydmFsOiAnMTJoJywKICAgICAgICAgIGZyb206IHN0YXJ0RGF0ZSwKICAgICAgICAgIHRvOiBlbmREYXRlCiAgICAgICAgfSwKICAgICAgICBzb3J0OiB7CiAgICAgICAgICBkaXJlY3Rpb246IGRpcmVjdGlvbiwKICAgICAgICAgIGZpZWxkOiBzb3J0RmllbGQKICAgICAgICB9LAogICAgICAgIHBhZ2luYXRpb246ICgwLCBfaGVscGVyczIuZ2VuZXJhdGVUYWJsZVBhZ2luYXRpb25PcHRpb25zKShhY3RpdmVQYWdlLCBsaW1pdCksCiAgICAgICAgZmlsdGVyUXVlcnk6ICgwLCBfaGVscGVycy5jcmVhdGVGaWx0ZXIpKGZpbHRlclF1ZXJ5KSwKICAgICAgICBkZWZhdWx0SW5kZXg6IGRlZmF1bHRJbmRleCwKICAgICAgICBpbnNwZWN0OiBpc0luc3BlY3RlZAogICAgICB9OwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RBcG9sbG8uUXVlcnksIHsKICAgICAgICBxdWVyeTogX2hvc3RzX3RhYmxlLkhvc3RzVGFibGVRdWVyeSwKICAgICAgICBmZXRjaFBvbGljeTogKDAsIF9oZWxwZXJzLmdldERlZmF1bHRGZXRjaFBvbGljeSkoKSwKICAgICAgICBub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2U6IHRydWUsCiAgICAgICAgc2tpcDogc2tpcCwKICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcwogICAgICB9LCBmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBkYXRhID0gX3JlZi5kYXRhLAogICAgICAgICAgICBsb2FkaW5nID0gX3JlZi5sb2FkaW5nLAogICAgICAgICAgICBmZXRjaE1vcmUgPSBfcmVmLmZldGNoTW9yZSwKICAgICAgICAgICAgbmV0d29ya1N0YXR1cyA9IF9yZWYubmV0d29ya1N0YXR1cywKICAgICAgICAgICAgcmVmZXRjaCA9IF9yZWYucmVmZXRjaDsKCiAgICAgICAgX3RoaXMyLnNldEZldGNoTW9yZShmZXRjaE1vcmUpOwoKICAgICAgICBfdGhpczIuc2V0RmV0Y2hNb3JlT3B0aW9ucyhmdW5jdGlvbiAobmV3QWN0aXZlUGFnZSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgICAgcGFnaW5hdGlvbjogKDAsIF9oZWxwZXJzMi5nZW5lcmF0ZVRhYmxlUGFnaW5hdGlvbk9wdGlvbnMpKG5ld0FjdGl2ZVBhZ2UsIGxpbWl0KQogICAgICAgICAgICB9LAogICAgICAgICAgICB1cGRhdGVRdWVyeTogZnVuY3Rpb24gdXBkYXRlUXVlcnkocHJldiwgX3JlZjIpIHsKICAgICAgICAgICAgICB2YXIgZmV0Y2hNb3JlUmVzdWx0ID0gX3JlZjIuZmV0Y2hNb3JlUmVzdWx0OwoKICAgICAgICAgICAgICBpZiAoIWZldGNoTW9yZVJlc3VsdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgZmV0Y2hNb3JlUmVzdWx0LCB7CiAgICAgICAgICAgICAgICBzb3VyY2U6IF9vYmplY3RTcHJlYWQoe30sIGZldGNoTW9yZVJlc3VsdC5zb3VyY2UsIHsKICAgICAgICAgICAgICAgICAgSG9zdHM6IF9vYmplY3RTcHJlYWQoe30sIGZldGNoTW9yZVJlc3VsdC5zb3VyY2UuSG9zdHMsIHsKICAgICAgICAgICAgICAgICAgICBlZGdlczogX3RvQ29uc3VtYWJsZUFycmF5KGZldGNoTW9yZVJlc3VsdC5zb3VyY2UuSG9zdHMuZWRnZXMpCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0pOwoKICAgICAgICB2YXIgaXNMb2FkaW5nID0gX3RoaXMyLmlzSXRBVmFsaWRMb2FkaW5nKGxvYWRpbmcsIHZhcmlhYmxlcywgbmV0d29ya1N0YXR1cyk7CgogICAgICAgIHJldHVybiBjaGlsZHJlbih7CiAgICAgICAgICBlbmREYXRlOiBlbmREYXRlLAogICAgICAgICAgaG9zdHM6IF90aGlzMi5tZW1vaXplZEhvc3RzKEpTT04uc3RyaW5naWZ5KHZhcmlhYmxlcyksICgwLCBfZnAuZ2V0KSgnc291cmNlJywgZGF0YSkpLAogICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgaW5zcGVjdDogKDAsIF9mcC5nZXRPcikobnVsbCwgJ3NvdXJjZS5Ib3N0cy5pbnNwZWN0JywgZGF0YSksCiAgICAgICAgICBpc0luc3BlY3RlZDogaXNJbnNwZWN0ZWQsCiAgICAgICAgICBsb2FkaW5nOiBpc0xvYWRpbmcsCiAgICAgICAgICBsb2FkUGFnZTogX3RoaXMyLndyYXBwZWRMb2FkTW9yZSwKICAgICAgICAgIHBhZ2VJbmZvOiAoMCwgX2ZwLmdldE9yKSh7fSwgJ3NvdXJjZS5Ib3N0cy5wYWdlSW5mbycsIGRhdGEpLAogICAgICAgICAgcmVmZXRjaDogX3RoaXMyLm1lbW9pemVkUmVmZXRjaFF1ZXJ5KHZhcmlhYmxlcywgbGltaXQsIHJlZmV0Y2gpLAogICAgICAgICAgc3RhcnREYXRlOiBzdGFydERhdGUsCiAgICAgICAgICB0b3RhbENvdW50OiAoMCwgX2ZwLmdldE9yKSgtMSwgJ3NvdXJjZS5Ib3N0cy50b3RhbENvdW50JywgZGF0YSkKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gSG9zdHNDb21wb25lbnRRdWVyeTsKfShfcXVlcnlfdGVtcGxhdGVfcGFnaW5hdGVkLlF1ZXJ5VGVtcGxhdGVQYWdpbmF0ZWQpOwoKdmFyIG1ha2VNYXBTdGF0ZVRvUHJvcHMgPSBmdW5jdGlvbiBtYWtlTWFwU3RhdGVUb1Byb3BzKCkgewogIHZhciBnZXRIb3N0c1NlbGVjdG9yID0gX3N0b3JlLmhvc3RzU2VsZWN0b3JzLmhvc3RzU2VsZWN0b3IoKTsKCiAgdmFyIGdldFF1ZXJ5ID0gX3N0b3JlLmlucHV0c1NlbGVjdG9ycy5nbG9iYWxRdWVyeUJ5SWRTZWxlY3RvcigpOwoKICB2YXIgbWFwU3RhdGVUb1Byb3BzID0gZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlLCBfcmVmMykgewogICAgdmFyIHR5cGUgPSBfcmVmMy50eXBlLAogICAgICAgIF9yZWYzJGlkID0gX3JlZjMuaWQsCiAgICAgICAgaWQgPSBfcmVmMyRpZCA9PT0gdm9pZCAwID8gSUQgOiBfcmVmMyRpZDsKCiAgICB2YXIgX2dldFF1ZXJ5ID0gZ2V0UXVlcnkoc3RhdGUsIGlkKSwKICAgICAgICBpc0luc3BlY3RlZCA9IF9nZXRRdWVyeS5pc0luc3BlY3RlZDsKCiAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgZ2V0SG9zdHNTZWxlY3RvcihzdGF0ZSwgdHlwZSksIHsKICAgICAgaXNJbnNwZWN0ZWQ6IGlzSW5zcGVjdGVkCiAgICB9KTsKICB9OwoKICByZXR1cm4gbWFwU3RhdGVUb1Byb3BzOwp9OwoKdmFyIEhvc3RzUXVlcnkgPSAoMCwgX3JlZHV4LmNvbXBvc2UpKCgwLCBfcmVhY3RSZWR1eC5jb25uZWN0KShtYWtlTWFwU3RhdGVUb1Byb3BzKSwgX2tpYmFuYS53aXRoS2liYW5hKShIb3N0c0NvbXBvbmVudFF1ZXJ5KTsKZXhwb3J0cy5Ib3N0c1F1ZXJ5ID0gSG9zdHNRdWVyeTs="},null]}