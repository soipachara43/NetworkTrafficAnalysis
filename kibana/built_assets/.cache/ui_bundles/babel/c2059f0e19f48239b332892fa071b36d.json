{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/canvas/public/components/element_types/element_types.js","dependencies":[{"path":"x-pack/legacy/plugins/canvas/public/components/element_types/element_types.js","mtime":1589249551963},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkVsZW1lbnRUeXBlcyA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcHJvcFR5cGVzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJwcm9wLXR5cGVzIikpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX2NvbmZpcm1fbW9kYWwgPSByZXF1aXJlKCIuLi9jb25maXJtX21vZGFsL2NvbmZpcm1fbW9kYWwiKTsKCnZhciBfY3VzdG9tX2VsZW1lbnRfbW9kYWwgPSByZXF1aXJlKCIuLi9jdXN0b21fZWxlbWVudF9tb2RhbCIpOwoKdmFyIF9nZXRfdGFnc19maWx0ZXIgPSByZXF1aXJlKCIuLi8uLi9saWIvZ2V0X3RhZ3NfZmlsdGVyIik7Cgp2YXIgX2V4dHJhY3Rfc2VhcmNoID0gcmVxdWlyZSgiLi4vLi4vbGliL2V4dHJhY3Rfc2VhcmNoIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCIuLi8uLi8uLi9pMThuIik7Cgp2YXIgX2VsZW1lbnRfZ3JpZCA9IHJlcXVpcmUoIi4vZWxlbWVudF9ncmlkIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCnZhciBzdHJpbmdzID0gX2kxOG4uQ29tcG9uZW50U3RyaW5ncy5FbGVtZW50VHlwZXM7CnZhciB0YWdUeXBlID0gJ2JhZGdlJzsKCnZhciBFbGVtZW50VHlwZXMgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfQ29tcG9uZW50KSB7CiAgX2luaGVyaXRzKEVsZW1lbnRUeXBlcywgX0NvbXBvbmVudCk7CgogIGZ1bmN0aW9uIEVsZW1lbnRUeXBlcygpIHsKICAgIHZhciBfZ2V0UHJvdG90eXBlT2YyOwoKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRWxlbWVudFR5cGVzKTsKCiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgIH0KCiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChfZ2V0UHJvdG90eXBlT2YyID0gX2dldFByb3RvdHlwZU9mKEVsZW1lbnRUeXBlcykpLmNhbGwuYXBwbHkoX2dldFByb3RvdHlwZU9mMiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInN0YXRlIiwgewogICAgICBlbGVtZW50VG9EZWxldGU6IG51bGwsCiAgICAgIGVsZW1lbnRUb0VkaXQ6IG51bGwKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9zaG93RWRpdE1vZGFsIiwgZnVuY3Rpb24gKGVsZW1lbnRUb0VkaXQpIHsKICAgICAgcmV0dXJuIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBlbGVtZW50VG9FZGl0OiBlbGVtZW50VG9FZGl0CiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX2hpZGVFZGl0TW9kYWwiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgZWxlbWVudFRvRWRpdDogbnVsbAogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9oYW5kbGVFZGl0IiwKICAgIC8qI19fUFVSRV9fKi8KICAgIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKG5hbWUsIGRlc2NyaXB0aW9uLCBpbWFnZSkgewogICAgICAgIHZhciB1cGRhdGVDdXN0b21FbGVtZW50LCBlbGVtZW50VG9FZGl0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHVwZGF0ZUN1c3RvbUVsZW1lbnQgPSBfdGhpcy5wcm9wcy51cGRhdGVDdXN0b21FbGVtZW50OwogICAgICAgICAgICAgICAgZWxlbWVudFRvRWRpdCA9IF90aGlzLnN0YXRlLmVsZW1lbnRUb0VkaXQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVDdXN0b21FbGVtZW50KGVsZW1lbnRUb0VkaXQuaWQsIG5hbWUsIGRlc2NyaXB0aW9uLCBpbWFnZSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIF90aGlzLl9oaWRlRWRpdE1vZGFsKCk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9zaG93RGVsZXRlTW9kYWwiLCBmdW5jdGlvbiAoZWxlbWVudFRvRGVsZXRlKSB7CiAgICAgIHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgZWxlbWVudFRvRGVsZXRlOiBlbGVtZW50VG9EZWxldGUKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfaGlkZURlbGV0ZU1vZGFsIiwgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGVsZW1lbnRUb0RlbGV0ZTogbnVsbAogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9oYW5kbGVEZWxldGUiLAogICAgLyojX19QVVJFX18qLwogICAgX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIHJlbW92ZUN1c3RvbUVsZW1lbnQsIGVsZW1lbnRUb0RlbGV0ZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICByZW1vdmVDdXN0b21FbGVtZW50ID0gX3RoaXMucHJvcHMucmVtb3ZlQ3VzdG9tRWxlbWVudDsKICAgICAgICAgICAgICBlbGVtZW50VG9EZWxldGUgPSBfdGhpcy5zdGF0ZS5lbGVtZW50VG9EZWxldGU7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiByZW1vdmVDdXN0b21FbGVtZW50KGVsZW1lbnRUb0RlbGV0ZS5pZCk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgX3RoaXMuX2hpZGVEZWxldGVNb2RhbCgpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfcmVuZGVyRWRpdE1vZGFsIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgZWxlbWVudFRvRWRpdCA9IF90aGlzLnN0YXRlLmVsZW1lbnRUb0VkaXQ7CgogICAgICBpZiAoIWVsZW1lbnRUb0VkaXQpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlPdmVybGF5TWFzaywgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY3VzdG9tX2VsZW1lbnRfbW9kYWwuQ3VzdG9tRWxlbWVudE1vZGFsLCB7CiAgICAgICAgdGl0bGU6IHN0cmluZ3MuZ2V0RWRpdEVsZW1lbnRUaXRsZSgpLAogICAgICAgIG5hbWU6IGVsZW1lbnRUb0VkaXQuZGlzcGxheU5hbWUsCiAgICAgICAgZGVzY3JpcHRpb246IGVsZW1lbnRUb0VkaXQuaGVscCwKICAgICAgICBpbWFnZTogZWxlbWVudFRvRWRpdC5pbWFnZSwKICAgICAgICBvblNhdmU6IF90aGlzLl9oYW5kbGVFZGl0LAogICAgICAgIG9uQ2FuY2VsOiBfdGhpcy5faGlkZUVkaXRNb2RhbAogICAgICB9KSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfcmVuZGVyRGVsZXRlTW9kYWwiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlbGVtZW50VG9EZWxldGUgPSBfdGhpcy5zdGF0ZS5lbGVtZW50VG9EZWxldGU7CgogICAgICBpZiAoIWVsZW1lbnRUb0RlbGV0ZSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY29uZmlybV9tb2RhbC5Db25maXJtTW9kYWwsIHsKICAgICAgICBpc09wZW46IHRydWUsCiAgICAgICAgdGl0bGU6IHN0cmluZ3MuZ2V0RGVsZXRlRWxlbWVudFRpdGxlKGVsZW1lbnRUb0RlbGV0ZS5kaXNwbGF5TmFtZSksCiAgICAgICAgbWVzc2FnZTogc3RyaW5ncy5nZXREZWxldGVFbGVtZW50RGVzY3JpcHRpb24oKSwKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogc3RyaW5ncy5nZXREZWxldGVCdXR0b25MYWJlbCgpLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHN0cmluZ3MuZ2V0Q2FuY2VsQnV0dG9uTGFiZWwoKSwKICAgICAgICBvbkNvbmZpcm06IF90aGlzLl9oYW5kbGVEZWxldGUsCiAgICAgICAgb25DYW5jZWw6IF90aGlzLl9oaWRlRGVsZXRlTW9kYWwKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfc29ydEVsZW1lbnRzIiwgZnVuY3Rpb24gKGVsZW1lbnRzKSB7CiAgICAgIHJldHVybiAoMCwgX2xvZGFzaC5zb3J0QnkpKCgwLCBfbG9kYXNoLm1hcCkoZWxlbWVudHMsIGZ1bmN0aW9uIChlbGVtZW50LCBuYW1lKSB7CiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoewogICAgICAgICAgbmFtZTogbmFtZQogICAgICAgIH0sIGVsZW1lbnQpOwogICAgICB9KSwgJ2Rpc3BsYXlOYW1lJyk7CiAgICB9KTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoRWxlbWVudFR5cGVzLCBbewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICAvLyBmZXRjaCBjdXN0b20gZWxlbWVudHMKICAgICAgdGhpcy5wcm9wcy5maW5kQ3VzdG9tRWxlbWVudHMoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzJHByb3BzID0gdGhpcy5wcm9wcywKICAgICAgICAgIHNlYXJjaCA9IF90aGlzJHByb3BzLnNlYXJjaCwKICAgICAgICAgIHNldFNlYXJjaCA9IF90aGlzJHByb3BzLnNldFNlYXJjaCwKICAgICAgICAgIGFkZEVsZW1lbnQgPSBfdGhpcyRwcm9wcy5hZGRFbGVtZW50LAogICAgICAgICAgYWRkQ3VzdG9tRWxlbWVudCA9IF90aGlzJHByb3BzLmFkZEN1c3RvbUVsZW1lbnQsCiAgICAgICAgICBmaWx0ZXJUYWdzID0gX3RoaXMkcHJvcHMuZmlsdGVyVGFncywKICAgICAgICAgIHNldEZpbHRlclRhZ3MgPSBfdGhpcyRwcm9wcy5zZXRGaWx0ZXJUYWdzOwogICAgICB2YXIgX3RoaXMkcHJvcHMyID0gdGhpcy5wcm9wcywKICAgICAgICAgIGVsZW1lbnRzID0gX3RoaXMkcHJvcHMyLmVsZW1lbnRzLAogICAgICAgICAgY3VzdG9tRWxlbWVudHMgPSBfdGhpcyRwcm9wczIuY3VzdG9tRWxlbWVudHM7CiAgICAgIGVsZW1lbnRzID0gdGhpcy5fc29ydEVsZW1lbnRzKGVsZW1lbnRzKTsKCiAgICAgIHZhciBjdXN0b21FbGVtZW50Q29udGVudCA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlFbXB0eVByb21wdCwgewogICAgICAgIGljb25UeXBlOiAidmVjdG9yIiwKICAgICAgICB0aXRsZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiaDIiLCBudWxsLCBzdHJpbmdzLmdldEFkZE5ld0VsZW1lbnRUaXRsZSgpKSwKICAgICAgICBib2R5OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgc3RyaW5ncy5nZXRBZGROZXdFbGVtZW50RGVzY3JpcHRpb24oKSksCiAgICAgICAgdGl0bGVTaXplOiAicyIKICAgICAgfSk7CgogICAgICBpZiAoY3VzdG9tRWxlbWVudHMubGVuZ3RoKSB7CiAgICAgICAgY3VzdG9tRWxlbWVudHMgPSB0aGlzLl9zb3J0RWxlbWVudHMoY3VzdG9tRWxlbWVudHMpOwogICAgICAgIGN1c3RvbUVsZW1lbnRDb250ZW50ID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZWxlbWVudF9ncmlkLkVsZW1lbnRHcmlkLCB7CiAgICAgICAgICBlbGVtZW50czogY3VzdG9tRWxlbWVudHMsCiAgICAgICAgICBmaWx0ZXI6IHNlYXJjaCwKICAgICAgICAgIGhhbmRsZUNsaWNrOiBhZGRDdXN0b21FbGVtZW50LAogICAgICAgICAgc2hvd0NvbnRyb2xzOiB0cnVlLAogICAgICAgICAgb25FZGl0OiB0aGlzLl9zaG93RWRpdE1vZGFsLAogICAgICAgICAgb25EZWxldGU6IHRoaXMuX3Nob3dEZWxldGVNb2RhbAogICAgICAgIH0pOwogICAgICB9CgogICAgICB2YXIgZmlsdGVycyA9IFsoMCwgX2dldF90YWdzX2ZpbHRlci5nZXRUYWdzRmlsdGVyKSh0YWdUeXBlKV07CgogICAgICB2YXIgb25TZWFyY2ggPSBmdW5jdGlvbiBvblNlYXJjaChfcmVmMykgewogICAgICAgIHZhciBxdWVyeVRleHQgPSBfcmVmMy5xdWVyeVRleHQ7CgogICAgICAgIHZhciBfZXh0cmFjdFNlYXJjaCA9ICgwLCBfZXh0cmFjdF9zZWFyY2guZXh0cmFjdFNlYXJjaCkocXVlcnlUZXh0KSwKICAgICAgICAgICAgc2VhcmNoVGVybSA9IF9leHRyYWN0U2VhcmNoLnNlYXJjaFRlcm0sCiAgICAgICAgICAgIGZpbHRlclRhZ3MgPSBfZXh0cmFjdFNlYXJjaC5maWx0ZXJUYWdzOwoKICAgICAgICBzZXRTZWFyY2goc2VhcmNoVGVybSk7CiAgICAgICAgc2V0RmlsdGVyVGFncyhmaWx0ZXJUYWdzKTsKICAgICAgfTsKCiAgICAgIHZhciB0YWJzID0gW3sKICAgICAgICBpZDogJ2VsZW1lbnRzJywKICAgICAgICBuYW1lOiBzdHJpbmdzLmdldEVsZW1lbnRzVGl0bGUoKSwKICAgICAgICBjb250ZW50OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJjYW52YXNFbGVtZW50c19fZmlsdGVyIgogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIG51bGwpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU2VhcmNoQmFyLCB7CiAgICAgICAgICBkZWZhdWx0UXVlcnk6IHNlYXJjaCwKICAgICAgICAgIGJveDogewogICAgICAgICAgICBwbGFjZWhvbGRlcjogc3RyaW5ncy5nZXRGaW5kRWxlbWVudFBsYWNlaG9sZGVyKCksCiAgICAgICAgICAgIGluY3JlbWVudGFsOiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgZmlsdGVyczogZmlsdGVycywKICAgICAgICAgIG9uQ2hhbmdlOiBvblNlYXJjaAogICAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCBudWxsKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZWxlbWVudF9ncmlkLkVsZW1lbnRHcmlkLCB7CiAgICAgICAgICBlbGVtZW50czogZWxlbWVudHMsCiAgICAgICAgICBmaWx0ZXJUZXh0OiBzZWFyY2gsCiAgICAgICAgICBmaWx0ZXJUYWdzOiBmaWx0ZXJUYWdzLAogICAgICAgICAgaGFuZGxlQ2xpY2s6IGFkZEVsZW1lbnQKICAgICAgICB9KSkKICAgICAgfSwgewogICAgICAgIGlkOiAnY3VzdG9tRWxlbWVudHMnLAogICAgICAgIG5hbWU6IHN0cmluZ3MuZ2V0TXlFbGVtZW50c1RpdGxlKCksCiAgICAgICAgY29udGVudDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIG51bGwpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU2VhcmNoQmFyLCB7CiAgICAgICAgICBkZWZhdWx0UXVlcnk6IHNlYXJjaCwKICAgICAgICAgIGJveDogewogICAgICAgICAgICBwbGFjZWhvbGRlcjogc3RyaW5ncy5nZXRGaW5kRWxlbWVudFBsYWNlaG9sZGVyKCksCiAgICAgICAgICAgIGluY3JlbWVudGFsOiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgb25DaGFuZ2U6IG9uU2VhcmNoCiAgICAgICAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIG51bGwpLCBjdXN0b21FbGVtZW50Q29udGVudCkKICAgICAgfV07CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aU1vZGFsQm9keSwgewogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBwYWRkaW5nUmlnaHQ6ICcxcHgnCiAgICAgICAgfQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGFiYmVkQ29udGVudCwgewogICAgICAgIHRhYnM6IHRhYnMsCiAgICAgICAgaW5pdGlhbFNlbGVjdGVkVGFiOiB0YWJzWzBdCiAgICAgIH0pKSwgdGhpcy5fcmVuZGVyRGVsZXRlTW9kYWwoKSwgdGhpcy5fcmVuZGVyRWRpdE1vZGFsKCkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEVsZW1lbnRUeXBlczsKfShfcmVhY3QuQ29tcG9uZW50KTsKCmV4cG9ydHMuRWxlbWVudFR5cGVzID0gRWxlbWVudFR5cGVzOwoKX2RlZmluZVByb3BlcnR5KEVsZW1lbnRUeXBlcywgInByb3BUeXBlcyIsIHsKICBhZGRDdXN0b21FbGVtZW50OiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYy5pc1JlcXVpcmVkLAogIGFkZEVsZW1lbnQ6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQsCiAgY3VzdG9tRWxlbWVudHM6IF9wcm9wVHlwZXMuZGVmYXVsdC5hcnJheS5pc1JlcXVpcmVkLAogIGVsZW1lbnRzOiBfcHJvcFR5cGVzLmRlZmF1bHQub2JqZWN0LAogIGZpbHRlclRhZ3M6IF9wcm9wVHlwZXMuZGVmYXVsdC5hcnJheU9mKF9wcm9wVHlwZXMuZGVmYXVsdC5zdHJpbmcpLmlzUmVxdWlyZWQsCiAgZmluZEN1c3RvbUVsZW1lbnRzOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYy5pc1JlcXVpcmVkLAogIG9uQ2xvc2U6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQsCiAgcmVtb3ZlQ3VzdG9tRWxlbWVudDogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMuaXNSZXF1aXJlZCwKICBzZWFyY2g6IF9wcm9wVHlwZXMuZGVmYXVsdC5zdHJpbmcsCiAgc2V0Q3VzdG9tRWxlbWVudHM6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQsCiAgc2V0U2VhcmNoOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYy5pc1JlcXVpcmVkLAogIHNldEZpbHRlclRhZ3M6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQsCiAgdXBkYXRlQ3VzdG9tRWxlbWVudDogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMuaXNSZXF1aXJlZAp9KTs="},null]}