{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/logstash/public/components/pipeline_list/pipeline_list.js","dependencies":[{"path":"x-pack/legacy/plugins/logstash/public/components/pipeline_list/pipeline_list.js","mtime":1589249552340},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlBpcGVsaW5lTGlzdCA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9yZWFjdDIgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX2luZm9fYWxlcnRzID0gcmVxdWlyZSgiLi9pbmZvX2FsZXJ0cyIpOwoKdmFyIF9waXBlbGluZXNfdGFibGUgPSByZXF1aXJlKCIuL3BpcGVsaW5lc190YWJsZSIpOwoKdmFyIF9jb25maXJtX2RlbGV0ZV9tb2RhbCA9IHJlcXVpcmUoIi4vY29uZmlybV9kZWxldGVfbW9kYWwiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKdmFyIFBpcGVsaW5lTGlzdFVpID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkgewogIF9pbmhlcml0cyhQaXBlbGluZUxpc3RVaSwgX1JlYWN0JENvbXBvbmVudCk7CgogIGZ1bmN0aW9uIFBpcGVsaW5lTGlzdFVpKHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBpcGVsaW5lTGlzdFVpKTsKCiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihQaXBlbGluZUxpc3RVaSkuY2FsbCh0aGlzLCBwcm9wcykpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImNvbXBvbmVudERpZE1vdW50IiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMgPSBfdGhpcy5wcm9wcywKICAgICAgICAgIGlzUmVhZE9ubHkgPSBfdGhpcyRwcm9wcy5pc1JlYWRPbmx5LAogICAgICAgICAgbGljZW5zZVNlcnZpY2UgPSBfdGhpcyRwcm9wcy5saWNlbnNlU2VydmljZSwKICAgICAgICAgIHRvYXN0Tm90aWZpY2F0aW9ucyA9IF90aGlzJHByb3BzLnRvYXN0Tm90aWZpY2F0aW9uczsKCiAgICAgIF90aGlzLmxvYWRQaXBlbGluZXMoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoaXNSZWFkT25seSkgewogICAgICAgICAgdG9hc3ROb3RpZmljYXRpb25zLmFkZFdhcm5pbmcobGljZW5zZVNlcnZpY2UubWVzc2FnZSk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIF90aGlzLmNoZWNrTW9uaXRvcmluZ0FjY2VzcygpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZ2V0RW1wdHlQcm9tcHQiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRW1wdHlQcm9tcHQsIHsKICAgICAgICB0aXRsZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiaDIiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ4cGFjay5sb2dzdGFzaC5waXBlbGluZUxpc3Qubm9QaXBlbGluZXNUaXRsZSIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIk5vIHBpcGVsaW5lcyIKICAgICAgICB9KSksCiAgICAgICAgdGl0bGVTaXplOiAieHMiLAogICAgICAgIGJvZHk6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInhwYWNrLmxvZ3N0YXNoLnBpcGVsaW5lTGlzdC5ub1BpcGVsaW5lc0Rlc2NyaXB0aW9uIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVGhlcmUgYXJlIG5vIHBpcGVsaW5lcyBkZWZpbmVkLiIKICAgICAgICB9KQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImdldEVycm9yUHJvbXB0IiwgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUVtcHR5UHJvbXB0LCB7CiAgICAgICAgdGl0bGU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImgyIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAieHBhY2subG9nc3Rhc2gucGlwZWxpbmVMaXN0LnBpcGVsaW5lc0xvYWRpbmdFcnJvclRpdGxlIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRXJyb3IiCiAgICAgICAgfSkpLAogICAgICAgIHRpdGxlU2l6ZTogInhzIiwKICAgICAgICBib2R5OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ4cGFjay5sb2dzdGFzaC5waXBlbGluZUxpc3QucGlwZWxpbmVzTG9hZGluZ0Vycm9yRGVzY3JpcHRpb24iLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFcnJvciBlbmNvdW50ZXJlZCB3aGlsZSBsb2FkaW5nIHBpcGVsaW5lcy4iCiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJsb2FkUGlwZWxpbmVzIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMyID0gX3RoaXMucHJvcHMsCiAgICAgICAgICBpc1JlYWRPbmx5ID0gX3RoaXMkcHJvcHMyLmlzUmVhZE9ubHksCiAgICAgICAgICBsaWNlbnNlU2VydmljZSA9IF90aGlzJHByb3BzMi5saWNlbnNlU2VydmljZSwKICAgICAgICAgIHBpcGVsaW5lc1NlcnZpY2UgPSBfdGhpcyRwcm9wczIucGlwZWxpbmVzU2VydmljZSwKICAgICAgICAgIHRvYXN0Tm90aWZpY2F0aW9ucyA9IF90aGlzJHByb3BzMi50b2FzdE5vdGlmaWNhdGlvbnMsCiAgICAgICAgICBpbnRsID0gX3RoaXMkcHJvcHMyLmludGw7CgogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgbWVzc2FnZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImxvYWRpbmdQaXBlbGluZXMiCiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUxvYWRpbmdTcGlubmVyLCB7CiAgICAgICAgICBzaXplOiAibSIKICAgICAgICB9KSwgIlx4QTAiLCAnICcsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInhwYWNrLmxvZ3N0YXNoLnBpcGVsaW5lTGlzdC5waXBlbGluZXNMb2FkaW5nTWVzc2FnZSIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkxvYWRpbmcgcGlwZWxpbmVzXHUyMDI2IgogICAgICAgIH0pKQogICAgICB9KTsKCiAgICAgIHJldHVybiBwaXBlbGluZXNTZXJ2aWNlLmdldFBpcGVsaW5lTGlzdCgpLnRoZW4oZnVuY3Rpb24gKHBpcGVsaW5lcykgewogICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgICAgICBpc0ZvcmJpZGRlbjogZmFsc2UsCiAgICAgICAgICBpc1NlbGVjdGFibGU6IHRydWUsCiAgICAgICAgICBwaXBlbGluZXM6IHBpcGVsaW5lcwogICAgICAgIH0pOwoKICAgICAgICBpZiAoIXBpcGVsaW5lcy5sZW5ndGgpIHsKICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgY29sdW1uczogW10sCiAgICAgICAgICAgIG1lc3NhZ2U6IF90aGlzLmdldEVtcHR5UHJvbXB0KCksCiAgICAgICAgICAgIGlzU2VsZWN0YWJsZTogZmFsc2UKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgICAgICBtZXNzYWdlOiBfdGhpcy5nZXRFcnJvclByb21wdCgpCiAgICAgICAgfSk7CgogICAgICAgIHJldHVybiBsaWNlbnNlU2VydmljZS5jaGVja1ZhbGlkaXR5KCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoZXJyLnN0YXR1cyA9PT0gNDAzKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKGlzUmVhZE9ubHkpIHsKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc0ZvcmJpZGRlbjogZmFsc2UKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc0ZvcmJpZGRlbjogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgaXNGb3JiaWRkZW46IGZhbHNlCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgdG9hc3ROb3RpZmljYXRpb25zLmFkZERhbmdlcihpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgICAgIGlkOiAneHBhY2subG9nc3Rhc2gucGlwZWxpbmVMaXN0LnBpcGVsaW5lTG9hZGluZ0Vycm9yTm90aWZpY2F0aW9uJywKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkNvdWxkbid0IGxvYWQgcGlwZWxpbmUuIEVycm9yOiBcIntlcnJTdGF0dXNUZXh0fVwiLiIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIGVyclN0YXR1c1RleHQ6IGVyci5zdGF0dXNUZXh0CiAgICAgICAgICAgIH0pKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJjaGVja01vbml0b3JpbmdBY2Nlc3MiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wczMgPSBfdGhpcy5wcm9wcywKICAgICAgICAgIGNsdXN0ZXJTZXJ2aWNlID0gX3RoaXMkcHJvcHMzLmNsdXN0ZXJTZXJ2aWNlLAogICAgICAgICAgbW9uaXRvcmluZ1NlcnZpY2UgPSBfdGhpcyRwcm9wczMubW9uaXRvcmluZ1NlcnZpY2U7CiAgICAgIGNsdXN0ZXJTZXJ2aWNlLmlzQ2x1c3RlckluZm9BdmFpbGFibGUoKS50aGVuKGZ1bmN0aW9uIChpc0F2YWlsYWJsZSkgewogICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgIHNob3dBZGRSb2xlQWxlcnQ6ICFpc0F2YWlsYWJsZSwKICAgICAgICAgIHNob3dFbmFibGVNb25pdG9yaW5nQWxlcnQ6ICFtb25pdG9yaW5nU2VydmljZS5pc01vbml0b3JpbmdFbmFibGVkKCkKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJyZW5kZXJOb1Blcm1pc3Npb25DYWxsT3V0IiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3RoaXMkc3RhdGUgPSBfdGhpcy5zdGF0ZSwKICAgICAgICAgIGlzRm9yYmlkZGVuID0gX3RoaXMkc3RhdGUuaXNGb3JiaWRkZW4sCiAgICAgICAgICBpc0xvYWRpbmcgPSBfdGhpcyRzdGF0ZS5pc0xvYWRpbmc7CiAgICAgIHJldHVybiBpc0ZvcmJpZGRlbiAmJiAhaXNMb2FkaW5nID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNhbGxPdXQsIHsKICAgICAgICBjb2xvcjogImRhbmdlciIsCiAgICAgICAgaWNvblR5cGU6ICJjcm9zcyIsCiAgICAgICAgdGl0bGU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInhwYWNrLmxvZ3N0YXNoLnBpcGVsaW5lTGlzdC5ub1Blcm1pc3Npb25Ub01hbmFnZVRpdGxlIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiWW91IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gbWFuYWdlIExvZ3N0YXNoIHBpcGVsaW5lcy4iCiAgICAgICAgfSkKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5sb2dzdGFzaC5waXBlbGluZUxpc3Qubm9QZXJtaXNzaW9uVG9NYW5hZ2VEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJQbGVhc2UgY29udGFjdCB5b3VyIGFkbWluaXN0cmF0b3IuIgogICAgICB9KSkpIDogbnVsbDsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhpZGVEZWxldGVQaXBlbGluZXNNb2RhbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIHNob3dDb25maXJtRGVsZXRlTW9kYWw6IGZhbHNlCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic2hvd0RlbGV0ZVBpcGVsaW5lc01vZGFsIiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgc2hvd0NvbmZpcm1EZWxldGVNb2RhbDogdHJ1ZQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImNhbmNlbERlbGV0ZVBpcGVsaW5lcyIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuaGlkZURlbGV0ZVBpcGVsaW5lc01vZGFsKCk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJkZWxldGVTZWxlY3RlZFBpcGVsaW5lcyIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuaGlkZURlbGV0ZVBpcGVsaW5lc01vZGFsKCk7CgogICAgICB2YXIgX3RoaXMkcHJvcHM0ID0gX3RoaXMucHJvcHMsCiAgICAgICAgICBsaWNlbnNlU2VydmljZSA9IF90aGlzJHByb3BzNC5saWNlbnNlU2VydmljZSwKICAgICAgICAgIHBpcGVsaW5lc1NlcnZpY2UgPSBfdGhpcyRwcm9wczQucGlwZWxpbmVzU2VydmljZSwKICAgICAgICAgIHRvYXN0Tm90aWZpY2F0aW9ucyA9IF90aGlzJHByb3BzNC50b2FzdE5vdGlmaWNhdGlvbnMsCiAgICAgICAgICBpbnRsID0gX3RoaXMkcHJvcHM0LmludGw7CiAgICAgIHZhciBzZWxlY3Rpb24gPSBfdGhpcy5zdGF0ZS5zZWxlY3Rpb247CiAgICAgIHZhciBudW1QaXBlbGluZXNTZWxlY3RlZCA9IHNlbGVjdGlvbi5sZW5ndGg7CiAgICAgIHZhciBwaXBlbGluZUlkcyA9IHNlbGVjdGlvbi5tYXAoZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgaWQgPSBfcmVmLmlkOwogICAgICAgIHJldHVybiBpZDsKICAgICAgfSk7CiAgICAgIHJldHVybiBwaXBlbGluZXNTZXJ2aWNlLmRlbGV0ZVBpcGVsaW5lcyhwaXBlbGluZUlkcykudGhlbihmdW5jdGlvbiAocmVzdWx0cykgewogICAgICAgIHZhciBudW1TdWNjZXNzZXMgPSByZXN1bHRzLm51bVN1Y2Nlc3NlcywKICAgICAgICAgICAgbnVtRXJyb3JzID0gcmVzdWx0cy5udW1FcnJvcnM7CgogICAgICAgIGlmIChudW1TdWNjZXNzZXMgPT09IDEgJiYgbnVtRXJyb3JzID09PSAwKSB7CiAgICAgICAgICB0b2FzdE5vdGlmaWNhdGlvbnMuYWRkU3VjY2VzcyhpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgICBpZDogJ3hwYWNrLmxvZ3N0YXNoLnBpcGVsaW5lTGlzdC5waXBlbGluZXNTdWNjZXNzZnVsbHlEZWxldGVkTm90aWZpY2F0aW9uJywKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdEZWxldGVkICJ7aWR9IicKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgaWQ6IHNlbGVjdGlvblswXS5pZAogICAgICAgICAgfSkpOwogICAgICAgIH0gZWxzZSBpZiAobnVtU3VjY2Vzc2VzKSB7CiAgICAgICAgICB2YXIgdGV4dDsKCiAgICAgICAgICBpZiAobnVtRXJyb3JzKSB7CiAgICAgICAgICAgIHRleHQgPSBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgICAgIGlkOiAneHBhY2subG9nc3Rhc2gucGlwZWxpbmVMaXN0LnBpcGVsaW5lc0NvdWxkTm90QmVEZWxldGVkRGVzY3JpcHRpb24nLAogICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQnV0IHtudW1FcnJvcnMsIHBsdXJhbCwgb25lIHsjIFBpcGVsaW5lfSBvdGhlciB7IyBQaXBlbGluZXN9fSBjb3VsZG4ndCBiZSBkZWxldGVkLiIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIG51bUVycm9yczogbnVtRXJyb3JzCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIHRvYXN0Tm90aWZpY2F0aW9ucy5hZGRTdWNjZXNzKHsKICAgICAgICAgICAgdGl0bGU6IGludGwuZm9ybWF0TWVzc2FnZSh7CiAgICAgICAgICAgICAgaWQ6ICd4cGFjay5sb2dzdGFzaC5waXBlbGluZUxpc3Quc3VjY2Vzc2Z1bGx5RGVsZXRlZFBpcGVsaW5lc05vdGlmaWNhdGlvbicsCiAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdEZWxldGVkIHtudW1TdWNjZXNzZXN9IG91dCBvZiB7bnVtUGlwZWxpbmVzU2VsZWN0ZWQsIHBsdXJhbCwgb25lIHsjIFBpcGVsaW5lfSBvdGhlciB7IyBQaXBlbGluZXN9fScKICAgICAgICAgICAgfSwgX2RlZmluZVByb3BlcnR5KHsKICAgICAgICAgICAgICBudW1TdWNjZXNzZXM6IG51bVN1Y2Nlc3NlcywKICAgICAgICAgICAgICBudW1QaXBlbGluZXNTZWxlY3RlZDogbnVtUGlwZWxpbmVzU2VsZWN0ZWQKICAgICAgICAgICAgfSwgIm51bVBpcGVsaW5lc1NlbGVjdGVkIiwgbnVtUGlwZWxpbmVzU2VsZWN0ZWQpKSwKICAgICAgICAgICAgdGV4dDogdGV4dAogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChudW1FcnJvcnMpIHsKICAgICAgICAgIHRvYXN0Tm90aWZpY2F0aW9ucy5hZGRFcnJvcihpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgICBpZDogJ3hwYWNrLmxvZ3N0YXNoLnBpcGVsaW5lTGlzdC5jb3VsZE5vdERlbGV0ZVBpcGVsaW5lc05vdGlmaWNhdGlvbicsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRmFpbGVkIHRvIGRlbGV0ZSB7bnVtRXJyb3JzLCBwbHVyYWwsIG9uZSB7IyBQaXBlbGluZX0gb3RoZXIgeyMgUGlwZWxpbmVzfX0nCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIG51bUVycm9yczogbnVtRXJyb3JzCiAgICAgICAgICB9KSk7CiAgICAgICAgfQoKICAgICAgICBfdGhpcy5sb2FkUGlwZWxpbmVzKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICByZXR1cm4gbGljZW5zZVNlcnZpY2UuY2hlY2tWYWxpZGl0eSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIHRvYXN0Tm90aWZpY2F0aW9ucy5hZGREYW5nZXIoZXJyKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvbkRlbGV0ZVNlbGVjdGVkUGlwZWxpbmVzIiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5zaG93RGVsZXRlUGlwZWxpbmVzTW9kYWwoKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uU2VsZWN0aW9uQ2hhbmdlIiwgZnVuY3Rpb24gKHNlbGVjdGlvbikgewogICAgICByZXR1cm4gX3RoaXMuc2V0U3RhdGUoewogICAgICAgIHNlbGVjdGlvbjogc2VsZWN0aW9uCiAgICAgIH0pOwogICAgfSk7CgogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIGNvbHVtbnM6IFtdLAogICAgICBpc0ZvcmJpZGRlbjogZmFsc2UsCiAgICAgIGlzTG9hZGluZzogdHJ1ZSwKICAgICAgaXNTZWxlY3RhYmxlOiBmYWxzZSwKICAgICAgcGlwZWxpbmVzOiBbXSwKICAgICAgc2hvd0FkZFJvbGVBbGVydDogZmFsc2UsCiAgICAgIHNob3dDb25maXJtRGVsZXRlTW9kYWw6IGZhbHNlLAogICAgICBzaG93RW5hYmxlTW9uaXRvcmluZ0FsZXJ0OiBmYWxzZSwKICAgICAgc2VsZWN0aW9uOiBbXQogICAgfTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhQaXBlbGluZUxpc3RVaSwgW3sKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHM1ID0gdGhpcy5wcm9wcywKICAgICAgICAgIGNsb25lUGlwZWxpbmUgPSBfdGhpcyRwcm9wczUuY2xvbmVQaXBlbGluZSwKICAgICAgICAgIGNyZWF0ZVBpcGVsaW5lID0gX3RoaXMkcHJvcHM1LmNyZWF0ZVBpcGVsaW5lLAogICAgICAgICAgaXNSZWFkT25seSA9IF90aGlzJHByb3BzNS5pc1JlYWRPbmx5LAogICAgICAgICAgb3BlblBpcGVsaW5lID0gX3RoaXMkcHJvcHM1Lm9wZW5QaXBlbGluZTsKICAgICAgdmFyIF90aGlzJHN0YXRlMiA9IHRoaXMuc3RhdGUsCiAgICAgICAgICBpc1NlbGVjdGFibGUgPSBfdGhpcyRzdGF0ZTIuaXNTZWxlY3RhYmxlLAogICAgICAgICAgbWVzc2FnZSA9IF90aGlzJHN0YXRlMi5tZXNzYWdlLAogICAgICAgICAgcGlwZWxpbmVzID0gX3RoaXMkc3RhdGUyLnBpcGVsaW5lcywKICAgICAgICAgIHNlbGVjdGlvbiA9IF90aGlzJHN0YXRlMi5zZWxlY3Rpb24sCiAgICAgICAgICBzaG93Q29uZmlybURlbGV0ZU1vZGFsID0gX3RoaXMkc3RhdGUyLnNob3dDb25maXJtRGVsZXRlTW9kYWw7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInBpcGVsaW5lTGlzdCIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVBhZ2VDb250ZW50LCB7CiAgICAgICAgaG9yaXpvbnRhbFBvc2l0aW9uOiAiY2VudGVyIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGl0bGUsIHsKICAgICAgICBzaXplOiAibSIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiaDEiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2subG9nc3Rhc2gucGlwZWxpbmVMaXN0LmhlYWQiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUGlwZWxpbmVzIgogICAgICB9KSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGV4dCwgewogICAgICAgIGNvbG9yOiAic3ViZHVlZCIsCiAgICAgICAgc2l6ZTogInMiCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2subG9nc3Rhc2gucGlwZWxpbmVMaXN0LnN1YmhlYWQiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTWFuYWdlIGxvZ3N0YXNoIGV2ZW50IHByb2Nlc3NpbmcgYW5kIHNlZSB0aGUgcmVzdWx0IHZpc3VhbGx5IgogICAgICB9KSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCBudWxsKSwgdGhpcy5yZW5kZXJOb1Blcm1pc3Npb25DYWxsT3V0KCksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3BpcGVsaW5lc190YWJsZS5QaXBlbGluZXNUYWJsZSwgewogICAgICAgIGNsb25lUGlwZWxpbmU6IGNsb25lUGlwZWxpbmUsCiAgICAgICAgY3JlYXRlUGlwZWxpbmU6IGNyZWF0ZVBpcGVsaW5lLAogICAgICAgIGlzUmVhZE9ubHk6IGlzUmVhZE9ubHksCiAgICAgICAgaXNTZWxlY3RhYmxlOiBpc1NlbGVjdGFibGUsCiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSwKICAgICAgICBwaXBlbGluZXM6IHBpcGVsaW5lcywKICAgICAgICBzZWxlY3Rpb246IHNlbGVjdGlvbiwKICAgICAgICBvbkRlbGV0ZVNlbGVjdGVkUGlwZWxpbmVzOiB0aGlzLm9uRGVsZXRlU2VsZWN0ZWRQaXBlbGluZXMsCiAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U6IHRoaXMub25TZWxlY3Rpb25DaGFuZ2UsCiAgICAgICAgb3BlblBpcGVsaW5lOiBvcGVuUGlwZWxpbmUKICAgICAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jb25maXJtX2RlbGV0ZV9tb2RhbC5Db25maXJtRGVsZXRlTW9kYWwsIHsKICAgICAgICBjYW5jZWxEZWxldGVQaXBlbGluZXM6IHRoaXMuY2FuY2VsRGVsZXRlUGlwZWxpbmVzLAogICAgICAgIGRlbGV0ZVNlbGVjdGVkUGlwZWxpbmVzOiB0aGlzLmRlbGV0ZVNlbGVjdGVkUGlwZWxpbmVzLAogICAgICAgIHNlbGVjdGlvbjogc2VsZWN0aW9uLAogICAgICAgIHNob3dDb25maXJtRGVsZXRlTW9kYWw6IHNob3dDb25maXJtRGVsZXRlTW9kYWwKICAgICAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2luZm9fYWxlcnRzLkluZm9BbGVydHMsIHsKICAgICAgICBzaG93QWRkUm9sZUFsZXJ0OiB0aGlzLnN0YXRlLnNob3dBZGRSb2xlQWxlcnQsCiAgICAgICAgc2hvd0VuYWJsZU1vbml0b3JpbmdBbGVydDogdGhpcy5zdGF0ZS5zaG93RW5hYmxlTW9uaXRvcmluZ0FsZXJ0CiAgICAgIH0pKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBQaXBlbGluZUxpc3RVaTsKfShfcmVhY3QuZGVmYXVsdC5Db21wb25lbnQpOwoKdmFyIFBpcGVsaW5lTGlzdCA9ICgwLCBfcmVhY3QyLmluamVjdEkxOG4pKFBpcGVsaW5lTGlzdFVpKTsKZXhwb3J0cy5QaXBlbGluZUxpc3QgPSBQaXBlbGluZUxpc3Q7"},null]}