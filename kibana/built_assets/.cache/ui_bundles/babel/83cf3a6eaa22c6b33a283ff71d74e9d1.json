{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/region_map/public/region_map_visualization.js","dependencies":[{"path":"src/legacy/core_plugins/region_map/public/region_map_visualization.js","mtime":1589249549890},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmNyZWF0ZVJlZ2lvbk1hcFZpc3VhbGl6YXRpb24gPSBjcmVhdGVSZWdpb25NYXBWaXN1YWxpemF0aW9uOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX2Nob3JvcGxldGhfbGF5ZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vY2hvcm9wbGV0aF9sYXllciIpKTsKCnZhciBfdXRpbGl0aWVzID0gcmVxdWlyZSgidWkvdmlzdWFsaXplL2xvYWRlci9waXBlbGluZV9oZWxwZXJzL3V0aWxpdGllcyIpOwoKdmFyIF9ub3RpZnkgPSByZXF1aXJlKCJ1aS9ub3RpZnkiKTsKCnZhciBfdG9vbHRpcF9mb3JtYXR0ZXIgPSByZXF1aXJlKCIuL3Rvb2x0aXBfZm9ybWF0dGVyIik7Cgp2YXIgX3B1YmxpYyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL3BsdWdpbnMvY2hhcnRzL3B1YmxpYyIpOwoKdmFyIF9iYXNlX21hcHNfdmlzdWFsaXphdGlvbiA9IHJlcXVpcmUoIi4uLy4uL3RpbGVfbWFwL3B1YmxpYy9iYXNlX21hcHNfdmlzdWFsaXphdGlvbiIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7IH0gfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIHNlbGYgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7IGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7IH0gZnVuY3Rpb24gX3Rocm93KGVycikgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7IH0gX25leHQodW5kZWZpbmVkKTsgfSk7IH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ICE9PSAidW5kZWZpbmVkIiAmJiBSZWZsZWN0LmdldCkgeyBfZ2V0ID0gUmVmbGVjdC5nZXQ7IH0gZWxzZSB7IF9nZXQgPSBmdW5jdGlvbiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyKSB7IHZhciBiYXNlID0gX3N1cGVyUHJvcEJhc2UodGFyZ2V0LCBwcm9wZXJ0eSk7IGlmICghYmFzZSkgcmV0dXJuOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYmFzZSwgcHJvcGVydHkpOyBpZiAoZGVzYy5nZXQpIHsgcmV0dXJuIGRlc2MuZ2V0LmNhbGwocmVjZWl2ZXIpOyB9IHJldHVybiBkZXNjLnZhbHVlOyB9OyB9IHJldHVybiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyIHx8IHRhcmdldCk7IH0KCmZ1bmN0aW9uIF9zdXBlclByb3BCYXNlKG9iamVjdCwgcHJvcGVydHkpIHsgd2hpbGUgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkpIHsgb2JqZWN0ID0gX2dldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChvYmplY3QgPT09IG51bGwpIGJyZWFrOyB9IHJldHVybiBvYmplY3Q7IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBjcmVhdGVSZWdpb25NYXBWaXN1YWxpemF0aW9uKF9yZWYpIHsKICB2YXIgc2VydmljZVNldHRpbmdzID0gX3JlZi5zZXJ2aWNlU2V0dGluZ3MsCiAgICAgICRpbmplY3RvciA9IF9yZWYuJGluamVjdG9yLAogICAgICB1aVNldHRpbmdzID0gX3JlZi51aVNldHRpbmdzOwogIHZhciBCYXNlTWFwc1Zpc3VhbGl6YXRpb24gPSBuZXcgX2Jhc2VfbWFwc192aXN1YWxpemF0aW9uLkJhc2VNYXBzVmlzdWFsaXphdGlvblByb3ZpZGVyKHNlcnZpY2VTZXR0aW5ncyk7CiAgdmFyIHRvb2x0aXBGb3JtYXR0ZXIgPSBuZXcgX3Rvb2x0aXBfZm9ybWF0dGVyLlRpbGVNYXBUb29sdGlwRm9ybWF0dGVyKCRpbmplY3Rvcik7CiAgcmV0dXJuICgKICAgIC8qI19fUFVSRV9fKi8KICAgIGZ1bmN0aW9uIChfQmFzZU1hcHNWaXN1YWxpemF0aW8pIHsKICAgICAgX2luaGVyaXRzKFJlZ2lvbk1hcHNWaXN1YWxpemF0aW9uLCBfQmFzZU1hcHNWaXN1YWxpemF0aW8pOwoKICAgICAgZnVuY3Rpb24gUmVnaW9uTWFwc1Zpc3VhbGl6YXRpb24oY29udGFpbmVyLCB2aXMpIHsKICAgICAgICB2YXIgX3RoaXM7CgogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWdpb25NYXBzVmlzdWFsaXphdGlvbik7CgogICAgICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKFJlZ2lvbk1hcHNWaXN1YWxpemF0aW9uKS5jYWxsKHRoaXMsIGNvbnRhaW5lciwgdmlzKSk7CiAgICAgICAgX3RoaXMuX3ZpcyA9IF90aGlzLnZpczsKICAgICAgICBfdGhpcy5fY2hvcm9wbGV0aExheWVyID0gbnVsbDsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICAgIH0KCiAgICAgIF9jcmVhdGVDbGFzcyhSZWdpb25NYXBzVmlzdWFsaXphdGlvbiwgW3sKICAgICAgICBrZXk6ICJyZW5kZXIiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgX3JlbmRlciA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAgICAgLyojX19QVVJFX18qLwogICAgICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShlc1Jlc3BvbnNlLCB2aXNQYXJhbXMpIHsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfZ2V0KF9nZXRQcm90b3R5cGVPZihSZWdpb25NYXBzVmlzdWFsaXphdGlvbi5wcm90b3R5cGUpLCAicmVuZGVyIiwgdGhpcykuY2FsbCh0aGlzLCBlc1Jlc3BvbnNlLCB2aXNQYXJhbXMpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fY2hvcm9wbGV0aExheWVyKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Nob3JvcGxldGhMYXllci53aGVuRGF0YUxvYWRlZCgpOwoKICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgICAgIH0pKTsKCiAgICAgICAgICBmdW5jdGlvbiByZW5kZXIoX3gsIF94MikgewogICAgICAgICAgICByZXR1cm4gX3JlbmRlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiByZW5kZXI7CiAgICAgICAgfSgpCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfdXBkYXRlRGF0YSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBfdXBkYXRlRGF0YTIgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHRhYmxlKSB7CiAgICAgICAgICAgIHZhciB0ZXJtQ29sdW1uLCB2YWx1ZUNvbHVtbiwgcmVzdWx0cywgbWV0cmljRmllbGRGb3JtYXR0ZXI7CiAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hhcnREYXRhID0gdGFibGU7CiAgICAgICAgICAgICAgICAgICAgdGVybUNvbHVtbiA9IHRoaXMuX3BhcmFtcy5idWNrZXQgPyB0YWJsZS5jb2x1bW5zW3RoaXMuX3BhcmFtcy5idWNrZXQuYWNjZXNzb3JdIDogbnVsbDsKICAgICAgICAgICAgICAgICAgICB2YWx1ZUNvbHVtbiA9IHRhYmxlLmNvbHVtbnNbdGhpcy5fcGFyYW1zLm1ldHJpYy5hY2Nlc3Nvcl07CgogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5faGFzQ29sdW1ucygpIHx8ICF0YWJsZS5yb3dzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cyA9IFtdOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gdGFibGUucm93cy5tYXAoZnVuY3Rpb24gKHJvdykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVybSA9IHJvd1t0ZXJtQ29sdW1uLmlkXTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcm93W3ZhbHVlQ29sdW1uLmlkXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXJtOiB0ZXJtLAogICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX3BhcmFtcy5zZWxlY3RlZEpvaW5GaWVsZCAmJiB0aGlzLl9wYXJhbXMuc2VsZWN0ZWRMYXllcikgewogICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGFyYW1zLnNlbGVjdGVkSm9pbkZpZWxkID0gdGhpcy5fcGFyYW1zLnNlbGVjdGVkTGF5ZXIuZmllbGRzWzBdOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3BhcmFtcy5zZWxlY3RlZExheWVyKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVDaG9yb3BsZXRoTGF5ZXJGb3JOZXdNZXRyaWNzKHRoaXMuX3BhcmFtcy5zZWxlY3RlZExheWVyLm5hbWUsIHRoaXMuX3BhcmFtcy5zZWxlY3RlZExheWVyLmF0dHJpYnV0aW9uLCB0aGlzLl9wYXJhbXMuc2hvd0FsbFNoYXBlcywgcmVzdWx0cyk7CgogICAgICAgICAgICAgICAgICAgIG1ldHJpY0ZpZWxkRm9ybWF0dGVyID0gKDAsIF91dGlsaXRpZXMuZ2V0Rm9ybWF0KSh0aGlzLl9wYXJhbXMubWV0cmljLmZvcm1hdCk7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuX2Nob3JvcGxldGhMYXllci5zZXRNZXRyaWNzKHJlc3VsdHMsIG1ldHJpY0ZpZWxkRm9ybWF0dGVyLCB2YWx1ZUNvbHVtbi5uYW1lKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHRlcm1Db2x1bW4gJiYgdmFsdWVDb2x1bW4pIHsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2Nob3JvcGxldGhMYXllci5zZXRUb29sdGlwRm9ybWF0dGVyKHRvb2x0aXBGb3JtYXR0ZXIsIG1ldHJpY0ZpZWxkRm9ybWF0dGVyLCB0ZXJtQ29sdW1uLm5hbWUsIHZhbHVlQ29sdW1uLm5hbWUpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fa2liYW5hTWFwLnVzZVVpU3RhdGVGcm9tVmlzdWFsaXphdGlvbih0aGlzLl92aXMpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgICAgIH0pKTsKCiAgICAgICAgICBmdW5jdGlvbiBfdXBkYXRlRGF0YShfeDMpIHsKICAgICAgICAgICAgcmV0dXJuIF91cGRhdGVEYXRhMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBfdXBkYXRlRGF0YTsKICAgICAgICB9KCkKICAgICAgfSwgewogICAgICAgIGtleTogIl91cGRhdGVQYXJhbXMiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgX3VwZGF0ZVBhcmFtczIgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgICAgICB2YXIgdmlzUGFyYW1zLCBtZXRyaWNGaWVsZEZvcm1hdHRlcjsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9nZXQoX2dldFByb3RvdHlwZU9mKFJlZ2lvbk1hcHNWaXN1YWxpemF0aW9uLnByb3RvdHlwZSksICJfdXBkYXRlUGFyYW1zIiwgdGhpcykuY2FsbCh0aGlzKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICB2aXNQYXJhbXMgPSB0aGlzLl9wYXJhbXM7CgogICAgICAgICAgICAgICAgICAgIGlmICghdmlzUGFyYW1zLnNlbGVjdGVkSm9pbkZpZWxkICYmIHZpc1BhcmFtcy5zZWxlY3RlZExheWVyKSB7CiAgICAgICAgICAgICAgICAgICAgICB2aXNQYXJhbXMuc2VsZWN0ZWRKb2luRmllbGQgPSB2aXNQYXJhbXMuc2VsZWN0ZWRMYXllci5maWVsZHNbMF07CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoISghdmlzUGFyYW1zLnNlbGVjdGVkSm9pbkZpZWxkIHx8ICF2aXNQYXJhbXMuc2VsZWN0ZWRMYXllcikpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUNob3JvcGxldGhMYXllckZvck5ld1Byb3BlcnRpZXModmlzUGFyYW1zLnNlbGVjdGVkTGF5ZXIubmFtZSwgdmlzUGFyYW1zLnNlbGVjdGVkTGF5ZXIuYXR0cmlidXRpb24sIHRoaXMuX3BhcmFtcy5zaG93QWxsU2hhcGVzKTsKCiAgICAgICAgICAgICAgICAgICAgbWV0cmljRmllbGRGb3JtYXR0ZXIgPSAoMCwgX3V0aWxpdGllcy5nZXRGb3JtYXQpKHRoaXMuX3BhcmFtcy5tZXRyaWMuZm9ybWF0KTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hvcm9wbGV0aExheWVyLnNldEpvaW5GaWVsZCh2aXNQYXJhbXMuc2VsZWN0ZWRKb2luRmllbGQubmFtZSk7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuX2Nob3JvcGxldGhMYXllci5zZXRDb2xvclJhbXAoX3B1YmxpYy50cnVuY2F0ZWRDb2xvck1hcHNbdmlzUGFyYW1zLmNvbG9yU2NoZW1hXS52YWx1ZSk7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuX2Nob3JvcGxldGhMYXllci5zZXRMaW5lV2VpZ2h0KHZpc1BhcmFtcy5vdXRsaW5lV2VpZ2h0KTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hvcm9wbGV0aExheWVyLnNldFRvb2x0aXBGb3JtYXR0ZXIodG9vbHRpcEZvcm1hdHRlciwgbWV0cmljRmllbGRGb3JtYXR0ZXIsIHRoaXMuX21ldHJpY0xhYmVsKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgICAgICB9KSk7CgogICAgICAgICAgZnVuY3Rpb24gX3VwZGF0ZVBhcmFtcygpIHsKICAgICAgICAgICAgcmV0dXJuIF91cGRhdGVQYXJhbXMyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIF91cGRhdGVQYXJhbXM7CiAgICAgICAgfSgpCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfdXBkYXRlQ2hvcm9wbGV0aExheWVyRm9yTmV3TWV0cmljcyIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVDaG9yb3BsZXRoTGF5ZXJGb3JOZXdNZXRyaWNzKG5hbWUsIGF0dHJpYnV0aW9uLCBzaG93QWxsRGF0YSwgbmV3TWV0cmljcykgewogICAgICAgICAgaWYgKHRoaXMuX2Nob3JvcGxldGhMYXllciAmJiB0aGlzLl9jaG9yb3BsZXRoTGF5ZXIuY2FuUmV1c2VJbnN0YW5jZUZvck5ld01ldHJpY3MobmFtZSwgc2hvd0FsbERhdGEsIG5ld01ldHJpY3MpKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gdGhpcy5fcmVjcmVhdGVDaG9yb3BsZXRoTGF5ZXIobmFtZSwgYXR0cmlidXRpb24sIHNob3dBbGxEYXRhKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfdXBkYXRlQ2hvcm9wbGV0aExheWVyRm9yTmV3UHJvcGVydGllcyIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVDaG9yb3BsZXRoTGF5ZXJGb3JOZXdQcm9wZXJ0aWVzKG5hbWUsIGF0dHJpYnV0aW9uLCBzaG93QWxsRGF0YSkgewogICAgICAgICAgaWYgKHRoaXMuX2Nob3JvcGxldGhMYXllciAmJiB0aGlzLl9jaG9yb3BsZXRoTGF5ZXIuY2FuUmV1c2VJbnN0YW5jZShuYW1lLCBzaG93QWxsRGF0YSkpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiB0aGlzLl9yZWNyZWF0ZUNob3JvcGxldGhMYXllcihuYW1lLCBhdHRyaWJ1dGlvbiwgc2hvd0FsbERhdGEpOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogIl9yZWNyZWF0ZUNob3JvcGxldGhMYXllciIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWNyZWF0ZUNob3JvcGxldGhMYXllcihuYW1lLCBhdHRyaWJ1dGlvbiwgc2hvd0FsbERhdGEpIHsKICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgICAgIHRoaXMuX2tpYmFuYU1hcC5yZW1vdmVMYXllcih0aGlzLl9jaG9yb3BsZXRoTGF5ZXIpOwoKICAgICAgICAgIGlmICh0aGlzLl9jaG9yb3BsZXRoTGF5ZXIpIHsKICAgICAgICAgICAgdGhpcy5fY2hvcm9wbGV0aExheWVyID0gdGhpcy5fY2hvcm9wbGV0aExheWVyLmNsb25lQ2hvcm9wbGV0aExheWVyRm9yTmV3RGF0YShuYW1lLCBhdHRyaWJ1dGlvbiwgdGhpcy5fcGFyYW1zLnNlbGVjdGVkTGF5ZXIuZm9ybWF0LCBzaG93QWxsRGF0YSwgdGhpcy5fcGFyYW1zLnNlbGVjdGVkTGF5ZXIubWV0YSwgdGhpcy5fcGFyYW1zLnNlbGVjdGVkTGF5ZXIsIHNlcnZpY2VTZXR0aW5ncyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLl9jaG9yb3BsZXRoTGF5ZXIgPSBuZXcgX2Nob3JvcGxldGhfbGF5ZXIuZGVmYXVsdChuYW1lLCBhdHRyaWJ1dGlvbiwgdGhpcy5fcGFyYW1zLnNlbGVjdGVkTGF5ZXIuZm9ybWF0LCBzaG93QWxsRGF0YSwgdGhpcy5fcGFyYW1zLnNlbGVjdGVkTGF5ZXIubWV0YSwgdGhpcy5fcGFyYW1zLnNlbGVjdGVkTGF5ZXIsIHNlcnZpY2VTZXR0aW5ncyk7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5fY2hvcm9wbGV0aExheWVyLm9uKCdzZWxlY3QnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgdmFyIF90aGlzMiRfY2hhcnREYXRhID0gX3RoaXMyLl9jaGFydERhdGEsCiAgICAgICAgICAgICAgICByb3dzID0gX3RoaXMyJF9jaGFydERhdGEucm93cywKICAgICAgICAgICAgICAgIGNvbHVtbnMgPSBfdGhpczIkX2NoYXJ0RGF0YS5jb2x1bW5zOwogICAgICAgICAgICB2YXIgcm93SW5kZXggPSByb3dzLmZpbmRJbmRleChmdW5jdGlvbiAocm93KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJvd1tjb2x1bW5zWzBdLmlkXSA9PT0gZXZlbnQ7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgX3RoaXMyLl92aXMuQVBJLmV2ZW50cy5maWx0ZXIoewogICAgICAgICAgICAgIHRhYmxlOiBfdGhpczIuX2NoYXJ0RGF0YSwKICAgICAgICAgICAgICBjb2x1bW46IDAsCiAgICAgICAgICAgICAgcm93OiByb3dJbmRleCwKICAgICAgICAgICAgICB2YWx1ZTogZXZlbnQKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICB0aGlzLl9jaG9yb3BsZXRoTGF5ZXIub24oJ3N0eWxlQ2hhbmdlZCcsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICB2YXIgc2hvdWxkU2hvd1dhcm5pbmcgPSBfdGhpczIuX3BhcmFtcy5pc0Rpc3BsYXlXYXJuaW5nICYmIHVpU2V0dGluZ3MuZ2V0KCd2aXN1YWxpemF0aW9uOnJlZ2lvbm1hcDpzaG93V2FybmluZ3MnKTsKCiAgICAgICAgICAgIGlmIChldmVudC5taXNtYXRjaGVzLmxlbmd0aCA+IDAgJiYgc2hvdWxkU2hvd1dhcm5pbmcpIHsKICAgICAgICAgICAgICBfbm90aWZ5LnRvYXN0Tm90aWZpY2F0aW9ucy5hZGRXYXJuaW5nKHsKICAgICAgICAgICAgICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgncmVnaW9uTWFwLnZpc3VhbGl6YXRpb24udW5hYmxlVG9TaG93TWlzbWF0Y2hlc1dhcm5pbmdUaXRsZScsIHsKICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdVbmFibGUgdG8gc2hvdyB7bWlzbWF0Y2hlc0xlbmd0aH0ge29uZU1pc21hdGNoLCBwbHVyYWwsIG9uZSB7cmVzdWx0fSBvdGhlciB7cmVzdWx0c319IG9uIG1hcCcsCiAgICAgICAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgICAgICAgIG1pc21hdGNoZXNMZW5ndGg6IGV2ZW50Lm1pc21hdGNoZXMubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgIG9uZU1pc21hdGNoOiBldmVudC5taXNtYXRjaGVzLmxlbmd0aCA+IDEgPyAwIDogMQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCdyZWdpb25NYXAudmlzdWFsaXphdGlvbi51bmFibGVUb1Nob3dNaXNtYXRjaGVzV2FybmluZ1RleHQnLCB7CiAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRW5zdXJlIHRoYXQgZWFjaCBvZiB0aGVzZSB0ZXJtIG1hdGNoZXMgYSBzaGFwZSBvbiB0aGF0IHNoYXBlJ3Mgam9pbiBmaWVsZDoge21pc21hdGNoZXN9IiwKICAgICAgICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgICAgICAgbWlzbWF0Y2hlczogZXZlbnQubWlzbWF0Y2hlcyA/IGV2ZW50Lm1pc21hdGNoZXMuam9pbignLCAnKSA6ICcnCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwoKICAgICAgICAgIHRoaXMuX2tpYmFuYU1hcC5hZGRMYXllcih0aGlzLl9jaG9yb3BsZXRoTGF5ZXIpOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogIl9oYXNDb2x1bW5zIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhc0NvbHVtbnMoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5fY2hhcnREYXRhICYmIHRoaXMuX2NoYXJ0RGF0YS5jb2x1bW5zLmxlbmd0aCA9PT0gMjsKICAgICAgICB9CiAgICAgIH1dKTsKCiAgICAgIHJldHVybiBSZWdpb25NYXBzVmlzdWFsaXphdGlvbjsKICAgIH0oQmFzZU1hcHNWaXN1YWxpemF0aW9uKQogICk7Cn0="},null]}