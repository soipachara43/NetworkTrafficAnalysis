{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/core/utils/context.js","dependencies":[{"path":"src/core/utils/context.js","mtime":1589249549498},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkyKHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5MihvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkNvbnRleHRDb250YWluZXIgPSB2b2lkIDA7Cgp2YXIgX2xvZGFzaCA9IHJlcXVpcmUoImxvZGFzaCIpOwoKdmFyIF8gPSByZXF1aXJlKCIuIik7CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQovKiogQGludGVybmFsICovCgoKdmFyIENvbnRleHRDb250YWluZXIgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICAvKioKICAgKiBVc2VkIHRvIG1hcCBjb250ZXh0cyB0byB0aGVpciBwcm92aWRlcnMgYW5kIGFzc29jaWF0ZWQgcGx1Z2luLiBJbiByZWdpc3RyYXRpb24gb3JkZXIgd2hpY2ggaXMgdGlnaHRseSBjb3VwbGVkIHRvCiAgICogcGx1Z2luIGxvYWQgb3JkZXIuCiAgICovCgogIC8qKiBVc2VkIHRvIGtlZXAgdHJhY2sgb2Ygd2hpY2ggcGx1Z2lucyByZWdpc3RlcmVkIHdoaWNoIGNvbnRleHRzIGZvciBkZXBlbmRlbmN5IHJlc29sdXRpb24uICovCgogIC8qKgogICAqIEBwYXJhbSBwbHVnaW5EZXBlbmRlbmNpZXMgLSBBIG1hcCBvZiBwbHVnaW5zIHRvIGFuIGFycmF5IG9mIHRoZWlyIGRlcGVuZGVuY2llcy4KICAgKi8KICBmdW5jdGlvbiBDb250ZXh0Q29udGFpbmVyKHBsdWdpbkRlcGVuZGVuY2llcywgY29yZUlkKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb250ZXh0Q29udGFpbmVyKTsKCiAgICB0aGlzLnBsdWdpbkRlcGVuZGVuY2llcyA9IHBsdWdpbkRlcGVuZGVuY2llczsKICAgIHRoaXMuY29yZUlkID0gY29yZUlkOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiY29udGV4dFByb3ZpZGVycyIsIG5ldyBNYXAoKSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjb250ZXh0TmFtZXNCeVNvdXJjZSIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJyZWdpc3RlckNvbnRleHQiLCBmdW5jdGlvbiAoc291cmNlLCBjb250ZXh0TmFtZSwgcHJvdmlkZXIpIHsKICAgICAgaWYgKF90aGlzLmNvbnRleHRQcm92aWRlcnMuaGFzKGNvbnRleHROYW1lKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiQ29udGV4dCBwcm92aWRlciBmb3IgIi5jb25jYXQoY29udGV4dE5hbWUsICIgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkLiIpKTsKICAgICAgfQoKICAgICAgaWYgKHNvdXJjZSAhPT0gX3RoaXMuY29yZUlkICYmICFfdGhpcy5wbHVnaW5EZXBlbmRlbmNpZXMuaGFzKHNvdXJjZSkpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCByZWdpc3RlciBjb250ZXh0IGZvciB1bmtub3duIHBsdWdpbjogIi5jb25jYXQoc291cmNlLnRvU3RyaW5nKCkpKTsKICAgICAgfQoKICAgICAgX3RoaXMuY29udGV4dFByb3ZpZGVycy5zZXQoY29udGV4dE5hbWUsIHsKICAgICAgICBwcm92aWRlcjogcHJvdmlkZXIsCiAgICAgICAgc291cmNlOiBzb3VyY2UKICAgICAgfSk7CgogICAgICBfdGhpcy5jb250ZXh0TmFtZXNCeVNvdXJjZS5zZXQoc291cmNlLCBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KF90aGlzLmNvbnRleHROYW1lc0J5U291cmNlLmdldChzb3VyY2UpIHx8IFtdKSwgW2NvbnRleHROYW1lXSkpOwoKICAgICAgcmV0dXJuIF90aGlzOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjcmVhdGVIYW5kbGVyIiwgZnVuY3Rpb24gKHNvdXJjZSwgaGFuZGxlcikgewogICAgICBpZiAoc291cmNlICE9PSBfdGhpcy5jb3JlSWQgJiYgIV90aGlzLnBsdWdpbkRlcGVuZGVuY2llcy5oYXMoc291cmNlKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiQ2Fubm90IGNyZWF0ZSBoYW5kbGVyIGZvciB1bmtub3duIHBsdWdpbjogIi5jb25jYXQoc291cmNlLnRvU3RyaW5nKCkpKTsKICAgICAgfQoKICAgICAgcmV0dXJuICgKICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgICAgIHZhciBfbGVuLAogICAgICAgICAgICAgICAgYXJncywKICAgICAgICAgICAgICAgIF9rZXksCiAgICAgICAgICAgICAgICBjb250ZXh0LAogICAgICAgICAgICAgICAgX2FyZ3MgPSBhcmd1bWVudHM7CgogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgZm9yIChfbGVuID0gX2FyZ3MubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICAgICAgICAgICAgICAgICAgYXJnc1tfa2V5XSA9IF9hcmdzW19rZXldOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmJ1aWxkQ29udGV4dC5hcHBseShfdGhpcywgW3NvdXJjZV0uY29uY2F0KGFyZ3MpKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBoYW5kbGVyLmFwcGx5KHZvaWQgMCwgW2NvbnRleHRdLmNvbmNhdChhcmdzKSkpOwoKICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICAgIH0pKTsKCiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfTsKICAgICAgICB9KCkKICAgICAgKTsKICAgIH0pOwoKICAgIHRoaXMuY29udGV4dE5hbWVzQnlTb3VyY2UgPSBuZXcgTWFwKFtbY29yZUlkLCBbXV1dKTsKICB9CgogIF9jcmVhdGVDbGFzcyhDb250ZXh0Q29udGFpbmVyLCBbewogICAga2V5OiAiYnVpbGRDb250ZXh0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfYnVpbGRDb250ZXh0ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoc291cmNlKSB7CiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAgIHZhciBfbGVuMiwKICAgICAgICAgICAgY29udGV4dEFyZ3MsCiAgICAgICAgICAgIF9rZXkyLAogICAgICAgICAgICBjb250ZXh0c1RvQnVpbGQsCiAgICAgICAgICAgIF9hcmdzMyA9IGFyZ3VtZW50czsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGZvciAoX2xlbjIgPSBfYXJnczMubGVuZ3RoLCBjb250ZXh0QXJncyA9IG5ldyBBcnJheShfbGVuMiA+IDEgPyBfbGVuMiAtIDEgOiAwKSwgX2tleTIgPSAxOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7CiAgICAgICAgICAgICAgICAgIGNvbnRleHRBcmdzW19rZXkyIC0gMV0gPSBfYXJnczNbX2tleTJdOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnRleHRzVG9CdWlsZCA9IG5ldyBTZXQodGhpcy5nZXRDb250ZXh0TmFtZXNGb3JTb3VyY2Uoc291cmNlKSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMuY29udGV4dFByb3ZpZGVycykuc29ydChzb3J0QnlDb3JlRmlyc3QodGhpcy5jb3JlSWQpKS5maWx0ZXIoZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmMyA9IF9zbGljZWRUb0FycmF5KF9yZWYyLCAxKSwKICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHROYW1lID0gX3JlZjNbMF07CgogICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dHNUb0J1aWxkLmhhcyhjb250ZXh0TmFtZSk7CiAgICAgICAgICAgICAgICB9KS5yZWR1Y2UoCiAgICAgICAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmNCA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAgICAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICAgICAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGNvbnRleHRQcm9taXNlLCBfcmVmNSkgewogICAgICAgICAgICAgICAgICAgIHZhciBfcmVmNiwgY29udGV4dE5hbWUsIF9yZWY2JCwgcHJvdmlkZXIsIHByb3ZpZGVyU291cmNlLCByZXNvbHZlZENvbnRleHQsIGV4cG9zZWRDb250ZXh0OwoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JlZjYgPSBfc2xpY2VkVG9BcnJheShfcmVmNSwgMiksIGNvbnRleHROYW1lID0gX3JlZjZbMF0sIF9yZWY2JCA9IF9yZWY2WzFdLCBwcm92aWRlciA9IF9yZWY2JC5wcm92aWRlciwgcHJvdmlkZXJTb3VyY2UgPSBfcmVmNiQuc291cmNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHRQcm9taXNlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlZENvbnRleHQgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciB0aGUgbmV4dCBwcm92aWRlciwgb25seSBleHBvc2UgdGhlIGNvbnRleHQgYXZhaWxhYmxlIGJhc2VkIG9uIHRoZSBkZXBlbmRlbmNpZXMgb2YgdGhlIHBsdWdpbiB0aGF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWdpc3RlcmVkIHRoYXQgcHJvdmlkZXIuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvc2VkQ29udGV4dCA9ICgwLCBfLnBpY2spKHJlc29sdmVkQ29udGV4dCwgX3RvQ29uc3VtYWJsZUFycmF5KF90aGlzMi5nZXRDb250ZXh0TmFtZXNGb3JTb3VyY2UocHJvdmlkZXJTb3VyY2UpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfb2JqZWN0U3ByZWFkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnQxID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIudDIgPSByZXNvbHZlZENvbnRleHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIudDMgPSBfZGVmaW5lUHJvcGVydHkyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnQ0ID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIudDUgPSBjb250ZXh0TmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvdmlkZXIuYXBwbHkodm9pZCAwLCBbZXhwb3NlZENvbnRleHRdLmNvbmNhdChjb250ZXh0QXJncykpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnQ2ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIudDcgPSAoMCwgX2NvbnRleHQyLnQzKShfY29udGV4dDIudDQsIF9jb250ZXh0Mi50NSwgX2NvbnRleHQyLnQ2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCAoMCwgX2NvbnRleHQyLnQwKShfY29udGV4dDIudDEsIF9jb250ZXh0Mi50MiwgX2NvbnRleHQyLnQ3KSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MiwgX3gzKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCksIFByb21pc2UucmVzb2x2ZSh7fSkpKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gYnVpbGRDb250ZXh0KF94KSB7CiAgICAgICAgcmV0dXJuIF9idWlsZENvbnRleHQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGJ1aWxkQ29udGV4dDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImdldENvbnRleHROYW1lc0ZvclNvdXJjZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29udGV4dE5hbWVzRm9yU291cmNlKHNvdXJjZSkgewogICAgICBpZiAoc291cmNlID09PSB0aGlzLmNvcmVJZCkgewogICAgICAgIHJldHVybiB0aGlzLmdldENvbnRleHROYW1lc0ZvckNvcmUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5nZXRDb250ZXh0TmFtZXNGb3JQbHVnaW5JZChzb3VyY2UpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0Q29udGV4dE5hbWVzRm9yQ29yZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29udGV4dE5hbWVzRm9yQ29yZSgpIHsKICAgICAgcmV0dXJuIG5ldyBTZXQodGhpcy5jb250ZXh0TmFtZXNCeVNvdXJjZS5nZXQodGhpcy5jb3JlSWQpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRDb250ZXh0TmFtZXNGb3JQbHVnaW5JZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29udGV4dE5hbWVzRm9yUGx1Z2luSWQocGx1Z2luSWQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICAvLyBJZiB0aGUgc291cmNlIGlzIGEgcGx1Z2luLi4uCiAgICAgIHZhciBwbHVnaW5EZXBzID0gdGhpcy5wbHVnaW5EZXBlbmRlbmNpZXMuZ2V0KHBsdWdpbklkKTsKCiAgICAgIGlmICghcGx1Z2luRGVwcykgewogICAgICAgIC8vIFRoaXMgY2FzZSBzaG91bGQgbmV2ZXIgYmUgaGl0LCBidXQgbGV0J3MgYmUgc2FmZS4KICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBjcmVhdGUgY29udGV4dCBmb3IgdW5rbm93biBwbHVnaW46ICIuY29uY2F0KHBsdWdpbklkLnRvU3RyaW5nKCkpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBTZXQoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmNvbnRleHROYW1lc0J5U291cmNlLmdldCh0aGlzLmNvcmVJZCkpLCBfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5jb250ZXh0TmFtZXNCeVNvdXJjZS5nZXQocGx1Z2luSWQpIHx8IFtdKSwgX3RvQ29uc3VtYWJsZUFycmF5KCgwLCBfbG9kYXNoLmZsYXR0ZW4pKHBsdWdpbkRlcHMubWFwKGZ1bmN0aW9uIChwKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMy5jb250ZXh0TmFtZXNCeVNvdXJjZS5nZXQocCkgfHwgW107CiAgICAgIH0pKSkpKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBDb250ZXh0Q29udGFpbmVyOwp9KCk7Ci8qKiBTb3J0cyBjb250ZXh0IHByb3ZpZGVyIHBhaXJzIGJ5IGNvcmUgcGFpcnMgZmlyc3QuICovCgoKZXhwb3J0cy5Db250ZXh0Q29udGFpbmVyID0gQ29udGV4dENvbnRhaW5lcjsKCnZhciBzb3J0QnlDb3JlRmlyc3QgPSBmdW5jdGlvbiBzb3J0QnlDb3JlRmlyc3QoY29yZUlkKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChfcmVmNywgX3JlZjgpIHsKICAgIHZhciBfcmVmOSA9IF9zbGljZWRUb0FycmF5KF9yZWY3LCAyKSwKICAgICAgICBsZWZ0TmFtZSA9IF9yZWY5WzBdLAogICAgICAgIGxlZnRQcm92aWRlciA9IF9yZWY5WzFdOwoKICAgIHZhciBfcmVmMTAgPSBfc2xpY2VkVG9BcnJheShfcmVmOCwgMiksCiAgICAgICAgcmlnaHROYW1lID0gX3JlZjEwWzBdLAogICAgICAgIHJpZ2h0UHJvdmlkZXIgPSBfcmVmMTBbMV07CgogICAgaWYgKGxlZnRQcm92aWRlci5zb3VyY2UgPT09IGNvcmVJZCkgewogICAgICByZXR1cm4gcmlnaHRQcm92aWRlci5zb3VyY2UgPT09IGNvcmVJZCA/IDAgOiAtMTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiByaWdodFByb3ZpZGVyLnNvdXJjZSA9PT0gY29yZUlkID8gMSA6IDA7CiAgICB9CiAgfTsKfTs="},null]}