{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/components/open_timeline/index.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/components/open_timeline/index.js","mtime":1589249553064},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlN0YXRlZnVsT3BlblRpbWVsaW5lID0gZXhwb3J0cy5TdGF0ZWZ1bE9wZW5UaW1lbGluZUNvbXBvbmVudCA9IGV4cG9ydHMuZ2V0U2VsZWN0ZWRUaW1lbGluZUlkcyA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcmVhY3RSZWR1eCA9IHJlcXVpcmUoInJlYWN0LXJlZHV4Iik7Cgp2YXIgX2RlZmF1bHRfaGVhZGVycyA9IHJlcXVpcmUoIi4uLy4uL2NvbXBvbmVudHMvdGltZWxpbmUvYm9keS9jb2x1bW5faGVhZGVycy9kZWZhdWx0X2hlYWRlcnMiKTsKCnZhciBfcGVyc2lzdCA9IHJlcXVpcmUoIi4uLy4uL2NvbnRhaW5lcnMvdGltZWxpbmUvZGVsZXRlL3BlcnNpc3QuZ3FsX3F1ZXJ5Iik7Cgp2YXIgX2FsbCA9IHJlcXVpcmUoIi4uLy4uL2NvbnRhaW5lcnMvdGltZWxpbmUvYWxsIik7Cgp2YXIgX2luZGV4ID0gcmVxdWlyZSgiLi4vLi4vY29udGFpbmVycy90aW1lbGluZS9hbGwvaW5kZXguZ3FsX3F1ZXJ5Iik7Cgp2YXIgX3N0b3JlID0gcmVxdWlyZSgiLi4vLi4vc3RvcmUiKTsKCnZhciBfZGVmYXVsdHMgPSByZXF1aXJlKCIuLi8uLi9zdG9yZS90aW1lbGluZS9kZWZhdWx0cyIpOwoKdmFyIF9hY3Rpb25zID0gcmVxdWlyZSgiLi4vLi4vc3RvcmUvdGltZWxpbmUvYWN0aW9ucyIpOwoKdmFyIF9vcGVuX3RpbWVsaW5lID0gcmVxdWlyZSgiLi9vcGVuX3RpbWVsaW5lIik7Cgp2YXIgX2hlbHBlcnMgPSByZXF1aXJlKCIuL2hlbHBlcnMiKTsKCnZhciBfb3Blbl90aW1lbGluZV9tb2RhbF9ib2R5ID0gcmVxdWlyZSgiLi9vcGVuX3RpbWVsaW5lX21vZGFsL29wZW5fdGltZWxpbmVfbW9kYWxfYm9keSIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuL2NvbnN0YW50cyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7CiAgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgewogICAgcmV0dXJuIG9iajsKICB9IGVsc2UgewogICAgdmFyIG5ld09iaiA9IHt9OwoKICAgIGlmIChvYmogIT0gbnVsbCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OwoKICAgICAgICAgIGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBuZXdPYmouZGVmYXVsdCA9IG9iajsKICAgIHJldHVybiBuZXdPYmo7CiAgfQp9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgewogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgewogIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgewogICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgYXJyMltpXSA9IGFycltpXTsKICAgIH0KCiAgICByZXR1cm4gYXJyMjsKICB9Cn0KLyoqIFJldHVybnMgYSBjb2xsZWN0aW9uIG9mIHNlbGVjdGVkIHRpbWVsaW5lIGlkcyAqLwoKCnZhciBnZXRTZWxlY3RlZFRpbWVsaW5lSWRzID0gZnVuY3Rpb24gZ2V0U2VsZWN0ZWRUaW1lbGluZUlkcyhzZWxlY3RlZEl0ZW1zKSB7CiAgcmV0dXJuIHNlbGVjdGVkSXRlbXMucmVkdWNlKGZ1bmN0aW9uICh2YWxpZFNlbGVjdGlvbnMsIHRpbWVsaW5lUmVzdWx0KSB7CiAgICByZXR1cm4gdGltZWxpbmVSZXN1bHQuc2F2ZWRPYmplY3RJZCAhPSBudWxsID8gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh2YWxpZFNlbGVjdGlvbnMpLCBbdGltZWxpbmVSZXN1bHQuc2F2ZWRPYmplY3RJZF0pIDogdmFsaWRTZWxlY3Rpb25zOwogIH0sIFtdKTsKfTsKLyoqIE1hbmFnZXMgdGhlIHN0YXRlIChlLmcgdGFibGUgc2VsZWN0aW9uKSBvZiB0aGUgKHB1cmUpIGBPcGVuVGltZWxpbmVgIGNvbXBvbmVudCAqLwoKCmV4cG9ydHMuZ2V0U2VsZWN0ZWRUaW1lbGluZUlkcyA9IGdldFNlbGVjdGVkVGltZWxpbmVJZHM7Cgp2YXIgU3RhdGVmdWxPcGVuVGltZWxpbmVDb21wb25lbnQgPSBfcmVhY3QuZGVmYXVsdC5tZW1vKGZ1bmN0aW9uIChfcmVmKSB7CiAgdmFyIGFwb2xsb0NsaWVudCA9IF9yZWYuYXBvbGxvQ2xpZW50LAogICAgICBjbG9zZU1vZGFsVGltZWxpbmUgPSBfcmVmLmNsb3NlTW9kYWxUaW1lbGluZSwKICAgICAgY3JlYXRlTmV3VGltZWxpbmUgPSBfcmVmLmNyZWF0ZU5ld1RpbWVsaW5lLAogICAgICBkZWZhdWx0UGFnZVNpemUgPSBfcmVmLmRlZmF1bHRQYWdlU2l6ZSwKICAgICAgX3JlZiRoaWRlQWN0aW9ucyA9IF9yZWYuaGlkZUFjdGlvbnMsCiAgICAgIGhpZGVBY3Rpb25zID0gX3JlZiRoaWRlQWN0aW9ucyA9PT0gdm9pZCAwID8gW10gOiBfcmVmJGhpZGVBY3Rpb25zLAogICAgICBfcmVmJGlzTW9kYWwgPSBfcmVmLmlzTW9kYWwsCiAgICAgIGlzTW9kYWwgPSBfcmVmJGlzTW9kYWwgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZiRpc01vZGFsLAogICAgICBpbXBvcnREYXRhTW9kYWxUb2dnbGUgPSBfcmVmLmltcG9ydERhdGFNb2RhbFRvZ2dsZSwKICAgICAgb25PcGVuVGltZWxpbmUgPSBfcmVmLm9uT3BlblRpbWVsaW5lLAogICAgICBzZXRJbXBvcnREYXRhTW9kYWxUb2dnbGUgPSBfcmVmLnNldEltcG9ydERhdGFNb2RhbFRvZ2dsZSwKICAgICAgdGltZWxpbmUgPSBfcmVmLnRpbWVsaW5lLAogICAgICB0aXRsZSA9IF9yZWYudGl0bGUsCiAgICAgIHVwZGF0ZVRpbWVsaW5lID0gX3JlZi51cGRhdGVUaW1lbGluZSwKICAgICAgdXBkYXRlSXNMb2FkaW5nID0gX3JlZi51cGRhdGVJc0xvYWRpbmc7CiAgLyoqIFJlcXVpcmVkIGJ5IEV1aVRhYmxlIGZvciBleHBhbmRhYmxlIHJvd3M6IGEgbWFwIG9mIGBUaW1lbGluZVJlc3VsdC5zYXZlZE9iamVjdElkYCB0byByZW5kZXJlZCBub3RlcyAqLwoKICB2YXIgX3VzZVN0YXRlID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoe30pLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgaXRlbUlkVG9FeHBhbmRlZE5vdGVzUm93TWFwID0gX3VzZVN0YXRlMlswXSwKICAgICAgc2V0SXRlbUlkVG9FeHBhbmRlZE5vdGVzUm93TWFwID0gX3VzZVN0YXRlMlsxXTsKICAvKiogT25seSBxdWVyeSBmb3IgZmF2b3JpdGUgdGltZWxpbmVzIHdoZW4gdHJ1ZSAqLwoKCiAgdmFyIF91c2VTdGF0ZTMgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShmYWxzZSksCiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSwKICAgICAgb25seUZhdm9yaXRlcyA9IF91c2VTdGF0ZTRbMF0sCiAgICAgIHNldE9ubHlGYXZvcml0ZXMgPSBfdXNlU3RhdGU0WzFdOwogIC8qKiBUaGUgcmVxdWVzdGVkIHBhZ2Ugb2YgcmVzdWx0cyAqLwoKCiAgdmFyIF91c2VTdGF0ZTUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSgwKSwKICAgICAgX3VzZVN0YXRlNiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTUsIDIpLAogICAgICBwYWdlSW5kZXggPSBfdXNlU3RhdGU2WzBdLAogICAgICBzZXRQYWdlSW5kZXggPSBfdXNlU3RhdGU2WzFdOwogIC8qKiBUaGUgcmVxdWVzdGVkIHNpemUgb2YgZWFjaCBwYWdlIG9mIHNlYXJjaCByZXN1bHRzICovCgoKICB2YXIgX3VzZVN0YXRlNyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGRlZmF1bHRQYWdlU2l6ZSksCiAgICAgIF91c2VTdGF0ZTggPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU3LCAyKSwKICAgICAgcGFnZVNpemUgPSBfdXNlU3RhdGU4WzBdLAogICAgICBzZXRQYWdlU2l6ZSA9IF91c2VTdGF0ZThbMV07CiAgLyoqIFRoZSBjdXJyZW50IHNlYXJjaCBjcml0ZXJpYSAqLwoKCiAgdmFyIF91c2VTdGF0ZTkgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSgnJyksCiAgICAgIF91c2VTdGF0ZTEwID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlOSwgMiksCiAgICAgIHNlYXJjaCA9IF91c2VTdGF0ZTEwWzBdLAogICAgICBzZXRTZWFyY2ggPSBfdXNlU3RhdGUxMFsxXTsKICAvKiogVGhlIGN1cnJlbnRseS1zZWxlY3RlZCB0aW1lbGluZXMgaW4gdGhlIHRhYmxlICovCgoKICB2YXIgX3VzZVN0YXRlMTEgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShbXSksCiAgICAgIF91c2VTdGF0ZTEyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTEsIDIpLAogICAgICBzZWxlY3RlZEl0ZW1zID0gX3VzZVN0YXRlMTJbMF0sCiAgICAgIHNldFNlbGVjdGVkSXRlbXMgPSBfdXNlU3RhdGUxMlsxXTsKICAvKiogVGhlIHJlcXVlc3RlZCBzb3J0IGRpcmVjdGlvbiBvZiB0aGUgcXVlcnkgcmVzdWx0cyAqLwoKCiAgdmFyIF91c2VTdGF0ZTEzID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoX2NvbnN0YW50cy5ERUZBVUxUX1NPUlRfRElSRUNUSU9OKSwKICAgICAgX3VzZVN0YXRlMTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUxMywgMiksCiAgICAgIHNvcnREaXJlY3Rpb24gPSBfdXNlU3RhdGUxNFswXSwKICAgICAgc2V0U29ydERpcmVjdGlvbiA9IF91c2VTdGF0ZTE0WzFdOwogIC8qKiBUaGUgcmVxdWVzdGVkIGZpZWxkIHRvIHNvcnQgb24gKi8KCgogIHZhciBfdXNlU3RhdGUxNSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKF9jb25zdGFudHMuREVGQVVMVF9TT1JUX0ZJRUxEKSwKICAgICAgX3VzZVN0YXRlMTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUxNSwgMiksCiAgICAgIHNvcnRGaWVsZCA9IF91c2VTdGF0ZTE2WzBdLAogICAgICBzZXRTb3J0RmllbGQgPSBfdXNlU3RhdGUxNlsxXTsKICAvKiogSW52b2tlZCB3aGVuIHRoZSB1c2VyIHByZXNzZXMgZW50ZXJzIHRvIHN1Ym1pdCB0aGUgdGV4dCBpbiB0aGUgc2VhcmNoIGlucHV0ICovCgoKICB2YXIgb25RdWVyeUNoYW5nZSA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uIChxdWVyeSkgewogICAgc2V0U2VhcmNoKHF1ZXJ5LnF1ZXJ5VGV4dC50cmltKCkpOwogIH0sIFtdKTsKICAvKiogRm9jdXNlcyB0aGUgaW5wdXQgdGhhdCBmaWx0ZXJzIHRoZSBmaWVsZCBicm93c2VyICovCgogIHZhciBmb2N1c0lucHV0ID0gZnVuY3Rpb24gZm9jdXNJbnB1dCgpIHsKICAgIHZhciBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi4iLmNvbmNhdChfaGVscGVycy5PUEVOX1RJTUVMSU5FX0NMQVNTX05BTUUsICIgaW5wdXQiKSk7CgogICAgaWYgKGVsZW1lbnRzICE9IG51bGwpIHsKICAgICAgZWxlbWVudHMuZm9jdXMoKTsKICAgIH0KICB9OwogIC8qIFRoaXMgZmVhdHVyZSB3aWxsIGJlIGltcGxlbWVudGVkIGluIHRoZSBuZWFyIGZ1dHVyZSwgc28gd2UgYXJlIGtlZXBpbmcgaXQgdG8ga25vdyB3aGF0IHRvIGRvICovCgogIC8qKiBJbnZva2VkIHdoZW4gdGhlIHVzZXIgY2xpY2tzIHRoZSBhY3Rpb24gdG8gYWRkIHRoZSBzZWxlY3RlZCB0aW1lbGluZXMgdG8gZmF2b3JpdGVzICovCiAgLy8gY29uc3Qgb25BZGRUaW1lbGluZXNUb0Zhdm9yaXRlczogT25BZGRUaW1lbGluZXNUb0Zhdm9yaXRlcyA9ICgpID0+IHsKICAvLyBjb25zdCB7IGFkZFRpbWVsaW5lc1RvRmF2b3JpdGVzIH0gPSB0aGlzLnByb3BzOwogIC8vIGNvbnN0IHsgc2VsZWN0ZWRJdGVtcyB9ID0gdGhpcy5zdGF0ZTsKICAvLyBpZiAoYWRkVGltZWxpbmVzVG9GYXZvcml0ZXMgIT0gbnVsbCkgewogIC8vICAgYWRkVGltZWxpbmVzVG9GYXZvcml0ZXMoZ2V0U2VsZWN0ZWRUaW1lbGluZUlkcyhzZWxlY3RlZEl0ZW1zKSk7CiAgLy8gVE9ETzogaXQncyBub3QgcG9zc2libGUgdG8gY2xlYXIgdGhlIHNlbGVjdGlvbiBzdGF0ZSBvZiB0aGUgbmV3bHktZmF2b3JpdGVkCiAgLy8gaXRlbXMsIGJlY2F1c2Ugd2UgY2FuJ3QgcGFzcyB0aGUgc2VsZWN0aW9uIHN0YXRlIGFzIHByb3BzIHRvIHRoZSB0YWJsZS4KICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbGFzdGljL2V1aS9pc3N1ZXMvMTA3NwogIC8vIFRPRE86IHRoZSBxdWVyeSBtdXN0IHJlLWV4ZWN1dGUgdG8gc2hvdyB0aGUgcmVzdWx0cyBvZiB0aGUgbXV0YXRpb24KICAvLyB9CiAgLy8gfTsKCgogIHZhciBvbkRlbGV0ZU9uZVRpbWVsaW5lID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKHRpbWVsaW5lSWRzKSB7CiAgICBkZWxldGVUaW1lbGluZXModGltZWxpbmVJZHMsIHsKICAgICAgc2VhcmNoOiBzZWFyY2gsCiAgICAgIHBhZ2VJbmZvOiB7CiAgICAgICAgcGFnZUluZGV4OiBwYWdlSW5kZXggKyAxLAogICAgICAgIHBhZ2VTaXplOiBwYWdlU2l6ZQogICAgICB9LAogICAgICBzb3J0OiB7CiAgICAgICAgc29ydEZpZWxkOiBzb3J0RmllbGQsCiAgICAgICAgc29ydE9yZGVyOiBzb3J0RGlyZWN0aW9uCiAgICAgIH0sCiAgICAgIG9ubHlVc2VyRmF2b3JpdGU6IG9ubHlGYXZvcml0ZXMKICAgIH0pOwogIH0sIFtzZWFyY2gsIHBhZ2VJbmRleCwgcGFnZVNpemUsIHNvcnRGaWVsZCwgc29ydERpcmVjdGlvbiwgb25seUZhdm9yaXRlc10pOwogIC8qKiBJbnZva2VkIHdoZW4gdGhlIHVzZXIgY2xpY2tzIHRoZSBhY3Rpb24gdG8gZGVsZXRlIHRoZSBzZWxlY3RlZCB0aW1lbGluZXMgKi8KCiAgdmFyIG9uRGVsZXRlU2VsZWN0ZWQgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAoKSB7CiAgICBkZWxldGVUaW1lbGluZXMoZ2V0U2VsZWN0ZWRUaW1lbGluZUlkcyhzZWxlY3RlZEl0ZW1zKSwgewogICAgICBzZWFyY2g6IHNlYXJjaCwKICAgICAgcGFnZUluZm86IHsKICAgICAgICBwYWdlSW5kZXg6IHBhZ2VJbmRleCArIDEsCiAgICAgICAgcGFnZVNpemU6IHBhZ2VTaXplCiAgICAgIH0sCiAgICAgIHNvcnQ6IHsKICAgICAgICBzb3J0RmllbGQ6IHNvcnRGaWVsZCwKICAgICAgICBzb3J0T3JkZXI6IHNvcnREaXJlY3Rpb24KICAgICAgfSwKICAgICAgb25seVVzZXJGYXZvcml0ZTogb25seUZhdm9yaXRlcwogICAgfSk7IC8vIE5PVEU6IHdlIGNsZWFyIHRoZSBzZWxlY3Rpb24gc3RhdGUgYmVsb3csIGJ1dCBpZiB0aGUgc2VydmVyIGZhaWxzIHRvCiAgICAvLyBkZWxldGUgYSB0aW1lbGluZSwgaXQgd2lsbCByZW1haW4gc2VsZWN0ZWQgaW4gdGhlIHRhYmxlOgoKICAgIHJlc2V0U2VsZWN0aW9uU3RhdGUoKTsgLy8gVE9ETzogdGhlIHF1ZXJ5IG11c3QgcmUtZXhlY3V0ZSB0byBzaG93IHRoZSByZXN1bHRzIG9mIHRoZSBkZWxldGlvbgogIH0sIFtzZWxlY3RlZEl0ZW1zLCBzZWFyY2gsIHBhZ2VJbmRleCwgcGFnZVNpemUsIHNvcnRGaWVsZCwgc29ydERpcmVjdGlvbiwgb25seUZhdm9yaXRlc10pOwogIC8qKiBJbnZva2VkIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyAob3IgZGUtc2VsZWN0cykgdGltZWxpbmVzICovCgogIHZhciBvblNlbGVjdGlvbkNoYW5nZSA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uIChuZXdTZWxlY3RlZEl0ZW1zKSB7CiAgICBzZXRTZWxlY3RlZEl0ZW1zKG5ld1NlbGVjdGVkSXRlbXMpOyAvLyA8LS0gdGhpcyBpcyBOT1QgcGFzc2VkIGRvd24gYXMgcHJvcHMgdG8gdGhlIHRhYmxlOiBodHRwczovL2dpdGh1Yi5jb20vZWxhc3RpYy9ldWkvaXNzdWVzLzEwNzcKICB9LCBbXSk7CiAgLyoqIEludm9rZWQgYnkgdGhlIEVVSSB0YWJsZSBpbXBsZW1lbnRhdGlvbiB3aGVuIHRoZSB1c2VyIGludGVyYWN0cyB3aXRoIHRoZSB0YWJsZSAoaS5lLiB0byB1cGRhdGUgc29ydGluZykgKi8KCiAgdmFyIG9uVGFibGVDaGFuZ2UgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAoX3JlZjIpIHsKICAgIHZhciBwYWdlID0gX3JlZjIucGFnZSwKICAgICAgICBzb3J0ID0gX3JlZjIuc29ydDsKICAgIHZhciBpbmRleCA9IHBhZ2UuaW5kZXgsCiAgICAgICAgc2l6ZSA9IHBhZ2Uuc2l6ZTsKICAgIHZhciBmaWVsZCA9IHNvcnQuZmllbGQsCiAgICAgICAgZGlyZWN0aW9uID0gc29ydC5kaXJlY3Rpb247CiAgICBzZXRQYWdlSW5kZXgoaW5kZXgpOwogICAgc2V0UGFnZVNpemUoc2l6ZSk7CiAgICBzZXRTb3J0RGlyZWN0aW9uKGRpcmVjdGlvbik7CiAgICBzZXRTb3J0RmllbGQoZmllbGQpOwogIH0sIFtdKTsKICAvKiogSW52b2tlZCB3aGVuIHRoZSB1c2VyIHRvZ2dsZXMgdGhlIG9wdGlvbiB0byBvbmx5IHZpZXcgZmF2b3JpdGUgdGltZWxpbmVzICovCgogIHZhciBvblRvZ2dsZU9ubHlGYXZvcml0ZXMgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAoKSB7CiAgICBzZXRPbmx5RmF2b3JpdGVzKCFvbmx5RmF2b3JpdGVzKTsKICB9LCBbb25seUZhdm9yaXRlc10pOwogIC8qKiBJbnZva2VkIHdoZW4gdGhlIHVzZXIgdG9nZ2xlcyB0aGUgZXhwYW5zaW9uIG9yIGNvbGxhcHNlIG9mIGlubGluZSBub3RlcyBpbiBhIHRhYmxlIHJvdyAqLwoKICB2YXIgb25Ub2dnbGVTaG93Tm90ZXMgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAobmV3SXRlbUlkVG9FeHBhbmRlZE5vdGVzUm93TWFwKSB7CiAgICBzZXRJdGVtSWRUb0V4cGFuZGVkTm90ZXNSb3dNYXAobmV3SXRlbUlkVG9FeHBhbmRlZE5vdGVzUm93TWFwKTsKICB9LCBbXSk7CiAgLyoqIFJlc2V0cyB0aGUgc2VsZWN0aW9uIHN0YXRlIHN1Y2ggdGhhdCBhbGwgdGltZWxpbmVzIGFyZSB1bnNlbGVjdGVkICovCgogIHZhciByZXNldFNlbGVjdGlvblN0YXRlID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKCkgewogICAgc2V0U2VsZWN0ZWRJdGVtcyhbXSk7CiAgfSwgW10pOwogIHZhciBvcGVuVGltZWxpbmUgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAoX3JlZjMpIHsKICAgIHZhciBkdXBsaWNhdGUgPSBfcmVmMy5kdXBsaWNhdGUsCiAgICAgICAgdGltZWxpbmVJZCA9IF9yZWYzLnRpbWVsaW5lSWQ7CgogICAgaWYgKGlzTW9kYWwgJiYgY2xvc2VNb2RhbFRpbWVsaW5lICE9IG51bGwpIHsKICAgICAgY2xvc2VNb2RhbFRpbWVsaW5lKCk7CiAgICB9CgogICAgKDAsIF9oZWxwZXJzLnF1ZXJ5VGltZWxpbmVCeUlkKSh7CiAgICAgIGFwb2xsb0NsaWVudDogYXBvbGxvQ2xpZW50LAogICAgICBkdXBsaWNhdGU6IGR1cGxpY2F0ZSwKICAgICAgb25PcGVuVGltZWxpbmU6IG9uT3BlblRpbWVsaW5lLAogICAgICB0aW1lbGluZUlkOiB0aW1lbGluZUlkLAogICAgICB1cGRhdGVJc0xvYWRpbmc6IHVwZGF0ZUlzTG9hZGluZywKICAgICAgdXBkYXRlVGltZWxpbmU6IHVwZGF0ZVRpbWVsaW5lCiAgICB9KTsKICB9LCBbYXBvbGxvQ2xpZW50LCB1cGRhdGVJc0xvYWRpbmcsIHVwZGF0ZVRpbWVsaW5lXSk7CiAgdmFyIGRlbGV0ZVRpbWVsaW5lcyA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uICh0aW1lbGluZUlkcywgdmFyaWFibGVzKSB7CiAgICBpZiAodGltZWxpbmVJZHMuaW5jbHVkZXModGltZWxpbmUuc2F2ZWRPYmplY3RJZCB8fCAnJykpIHsKICAgICAgY3JlYXRlTmV3VGltZWxpbmUoewogICAgICAgIGlkOiAndGltZWxpbmUtMScsCiAgICAgICAgY29sdW1uczogX2RlZmF1bHRfaGVhZGVycy5kZWZhdWx0SGVhZGVycywKICAgICAgICBzaG93OiBmYWxzZQogICAgICB9KTsKICAgIH0KCiAgICBhcG9sbG9DbGllbnQubXV0YXRlKHsKICAgICAgbXV0YXRpb246IF9wZXJzaXN0LmRlbGV0ZVRpbWVsaW5lTXV0YXRpb24sCiAgICAgIGZldGNoUG9saWN5OiAnbm8tY2FjaGUnLAogICAgICB2YXJpYWJsZXM6IHsKICAgICAgICBpZDogdGltZWxpbmVJZHMKICAgICAgfSwKICAgICAgcmVmZXRjaFF1ZXJpZXM6IFt7CiAgICAgICAgcXVlcnk6IF9pbmRleC5hbGxUaW1lbGluZXNRdWVyeSwKICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcwogICAgICB9XQogICAgfSk7CiAgfSwgW2Fwb2xsb0NsaWVudCwgY3JlYXRlTmV3VGltZWxpbmUsIHRpbWVsaW5lXSk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIGZvY3VzSW5wdXQoKTsKICB9LCBbXSk7CiAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2FsbC5BbGxUaW1lbGluZXNRdWVyeSwgewogICAgcGFnZUluZm86IHsKICAgICAgcGFnZUluZGV4OiBwYWdlSW5kZXggKyAxLAogICAgICBwYWdlU2l6ZTogcGFnZVNpemUKICAgIH0sCiAgICBzZWFyY2g6IHNlYXJjaCwKICAgIHNvcnQ6IHsKICAgICAgc29ydEZpZWxkOiBzb3J0RmllbGQsCiAgICAgIHNvcnRPcmRlcjogc29ydERpcmVjdGlvbgogICAgfSwKICAgIG9ubHlVc2VyRmF2b3JpdGU6IG9ubHlGYXZvcml0ZXMKICB9LCBmdW5jdGlvbiAoX3JlZjQpIHsKICAgIHZhciB0aW1lbGluZXMgPSBfcmVmNC50aW1lbGluZXMsCiAgICAgICAgbG9hZGluZyA9IF9yZWY0LmxvYWRpbmcsCiAgICAgICAgdG90YWxDb3VudCA9IF9yZWY0LnRvdGFsQ291bnQsCiAgICAgICAgcmVmZXRjaCA9IF9yZWY0LnJlZmV0Y2g7CiAgICByZXR1cm4gIWlzTW9kYWwgPyBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9vcGVuX3RpbWVsaW5lLk9wZW5UaW1lbGluZSwgewogICAgICAiZGF0YS10ZXN0LXN1YmoiOiAnb3Blbi10aW1lbGluZScsCiAgICAgIGRlbGV0ZVRpbWVsaW5lczogb25EZWxldGVPbmVUaW1lbGluZSwKICAgICAgZGVmYXVsdFBhZ2VTaXplOiBkZWZhdWx0UGFnZVNpemUsCiAgICAgIGlzTG9hZGluZzogbG9hZGluZywKICAgICAgaXRlbUlkVG9FeHBhbmRlZE5vdGVzUm93TWFwOiBpdGVtSWRUb0V4cGFuZGVkTm90ZXNSb3dNYXAsCiAgICAgIGltcG9ydERhdGFNb2RhbFRvZ2dsZTogaW1wb3J0RGF0YU1vZGFsVG9nZ2xlLAogICAgICBvbkFkZFRpbWVsaW5lc1RvRmF2b3JpdGVzOiB1bmRlZmluZWQsCiAgICAgIG9uRGVsZXRlU2VsZWN0ZWQ6IG9uRGVsZXRlU2VsZWN0ZWQsCiAgICAgIG9ubHlGYXZvcml0ZXM6IG9ubHlGYXZvcml0ZXMsCiAgICAgIG9uT3BlblRpbWVsaW5lOiBvcGVuVGltZWxpbmUsCiAgICAgIG9uUXVlcnlDaGFuZ2U6IG9uUXVlcnlDaGFuZ2UsCiAgICAgIG9uU2VsZWN0aW9uQ2hhbmdlOiBvblNlbGVjdGlvbkNoYW5nZSwKICAgICAgb25UYWJsZUNoYW5nZTogb25UYWJsZUNoYW5nZSwKICAgICAgb25Ub2dnbGVPbmx5RmF2b3JpdGVzOiBvblRvZ2dsZU9ubHlGYXZvcml0ZXMsCiAgICAgIG9uVG9nZ2xlU2hvd05vdGVzOiBvblRvZ2dsZVNob3dOb3RlcywKICAgICAgcGFnZUluZGV4OiBwYWdlSW5kZXgsCiAgICAgIHBhZ2VTaXplOiBwYWdlU2l6ZSwKICAgICAgcXVlcnk6IHNlYXJjaCwKICAgICAgcmVmZXRjaDogcmVmZXRjaCwKICAgICAgc2VhcmNoUmVzdWx0czogdGltZWxpbmVzLAogICAgICBzZXRJbXBvcnREYXRhTW9kYWxUb2dnbGU6IHNldEltcG9ydERhdGFNb2RhbFRvZ2dsZSwKICAgICAgc2VsZWN0ZWRJdGVtczogc2VsZWN0ZWRJdGVtcywKICAgICAgc29ydERpcmVjdGlvbjogc29ydERpcmVjdGlvbiwKICAgICAgc29ydEZpZWxkOiBzb3J0RmllbGQsCiAgICAgIHRpdGxlOiB0aXRsZSwKICAgICAgdG90YWxTZWFyY2hSZXN1bHRzQ291bnQ6IHRvdGFsQ291bnQKICAgIH0pIDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfb3Blbl90aW1lbGluZV9tb2RhbF9ib2R5Lk9wZW5UaW1lbGluZU1vZGFsQm9keSwgewogICAgICAiZGF0YS10ZXN0LXN1YmoiOiAnb3Blbi10aW1lbGluZS1tb2RhbCcsCiAgICAgIGRlbGV0ZVRpbWVsaW5lczogb25EZWxldGVPbmVUaW1lbGluZSwKICAgICAgZGVmYXVsdFBhZ2VTaXplOiBkZWZhdWx0UGFnZVNpemUsCiAgICAgIGhpZGVBY3Rpb25zOiBoaWRlQWN0aW9ucywKICAgICAgaXNMb2FkaW5nOiBsb2FkaW5nLAogICAgICBpdGVtSWRUb0V4cGFuZGVkTm90ZXNSb3dNYXA6IGl0ZW1JZFRvRXhwYW5kZWROb3Rlc1Jvd01hcCwKICAgICAgb25BZGRUaW1lbGluZXNUb0Zhdm9yaXRlczogdW5kZWZpbmVkLAogICAgICBvbmx5RmF2b3JpdGVzOiBvbmx5RmF2b3JpdGVzLAogICAgICBvbk9wZW5UaW1lbGluZTogb3BlblRpbWVsaW5lLAogICAgICBvblF1ZXJ5Q2hhbmdlOiBvblF1ZXJ5Q2hhbmdlLAogICAgICBvblNlbGVjdGlvbkNoYW5nZTogb25TZWxlY3Rpb25DaGFuZ2UsCiAgICAgIG9uVGFibGVDaGFuZ2U6IG9uVGFibGVDaGFuZ2UsCiAgICAgIG9uVG9nZ2xlT25seUZhdm9yaXRlczogb25Ub2dnbGVPbmx5RmF2b3JpdGVzLAogICAgICBvblRvZ2dsZVNob3dOb3Rlczogb25Ub2dnbGVTaG93Tm90ZXMsCiAgICAgIHBhZ2VJbmRleDogcGFnZUluZGV4LAogICAgICBwYWdlU2l6ZTogcGFnZVNpemUsCiAgICAgIHF1ZXJ5OiBzZWFyY2gsCiAgICAgIHNlYXJjaFJlc3VsdHM6IHRpbWVsaW5lcywKICAgICAgc2VsZWN0ZWRJdGVtczogc2VsZWN0ZWRJdGVtcywKICAgICAgc29ydERpcmVjdGlvbjogc29ydERpcmVjdGlvbiwKICAgICAgc29ydEZpZWxkOiBzb3J0RmllbGQsCiAgICAgIHRpdGxlOiB0aXRsZSwKICAgICAgdG90YWxTZWFyY2hSZXN1bHRzQ291bnQ6IHRvdGFsQ291bnQKICAgIH0pOwogIH0pOwp9KTsKCmV4cG9ydHMuU3RhdGVmdWxPcGVuVGltZWxpbmVDb21wb25lbnQgPSBTdGF0ZWZ1bE9wZW5UaW1lbGluZUNvbXBvbmVudDsKCnZhciBtYWtlTWFwU3RhdGVUb1Byb3BzID0gZnVuY3Rpb24gbWFrZU1hcFN0YXRlVG9Qcm9wcygpIHsKICB2YXIgZ2V0VGltZWxpbmUgPSBfc3RvcmUudGltZWxpbmVTZWxlY3RvcnMuZ2V0VGltZWxpbmVCeUlkU2VsZWN0b3IoKTsKCiAgdmFyIG1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyhzdGF0ZSkgewogICAgdmFyIF9nZXRUaW1lbGluZTsKCiAgICB2YXIgdGltZWxpbmUgPSAoX2dldFRpbWVsaW5lID0gZ2V0VGltZWxpbmUoc3RhdGUsICd0aW1lbGluZS0xJykpICE9PSBudWxsICYmIF9nZXRUaW1lbGluZSAhPT0gdm9pZCAwID8gX2dldFRpbWVsaW5lIDogX2RlZmF1bHRzLnRpbWVsaW5lRGVmYXVsdHM7CiAgICByZXR1cm4gewogICAgICB0aW1lbGluZTogdGltZWxpbmUKICAgIH07CiAgfTsKCiAgcmV0dXJuIG1hcFN0YXRlVG9Qcm9wczsKfTsKCnZhciBtYXBEaXNwYXRjaFRvUHJvcHMgPSBmdW5jdGlvbiBtYXBEaXNwYXRjaFRvUHJvcHMoZGlzcGF0Y2gpIHsKICByZXR1cm4gewogICAgY3JlYXRlTmV3VGltZWxpbmU6IGZ1bmN0aW9uIGNyZWF0ZU5ld1RpbWVsaW5lKF9yZWY1KSB7CiAgICAgIHZhciBpZCA9IF9yZWY1LmlkLAogICAgICAgICAgY29sdW1ucyA9IF9yZWY1LmNvbHVtbnMsCiAgICAgICAgICBzaG93ID0gX3JlZjUuc2hvdzsKICAgICAgcmV0dXJuIGRpc3BhdGNoKCgwLCBfYWN0aW9ucy5jcmVhdGVUaW1lbGluZSkoewogICAgICAgIGlkOiBpZCwKICAgICAgICBjb2x1bW5zOiBjb2x1bW5zLAogICAgICAgIHNob3c6IHNob3cKICAgICAgfSkpOwogICAgfSwKICAgIHVwZGF0ZUlzTG9hZGluZzogZnVuY3Rpb24gdXBkYXRlSXNMb2FkaW5nKF9yZWY2KSB7CiAgICAgIHZhciBpZCA9IF9yZWY2LmlkLAogICAgICAgICAgaXNMb2FkaW5nID0gX3JlZjYuaXNMb2FkaW5nOwogICAgICByZXR1cm4gZGlzcGF0Y2goKDAsIF9hY3Rpb25zLnVwZGF0ZUlzTG9hZGluZykoewogICAgICAgIGlkOiBpZCwKICAgICAgICBpc0xvYWRpbmc6IGlzTG9hZGluZwogICAgICB9KSk7CiAgICB9LAogICAgdXBkYXRlVGltZWxpbmU6ICgwLCBfaGVscGVycy5kaXNwYXRjaFVwZGF0ZVRpbWVsaW5lKShkaXNwYXRjaCkKICB9Owp9OwoKdmFyIGNvbm5lY3RvciA9ICgwLCBfcmVhY3RSZWR1eC5jb25uZWN0KShtYWtlTWFwU3RhdGVUb1Byb3BzLCBtYXBEaXNwYXRjaFRvUHJvcHMpOwp2YXIgU3RhdGVmdWxPcGVuVGltZWxpbmUgPSBjb25uZWN0b3IoU3RhdGVmdWxPcGVuVGltZWxpbmVDb21wb25lbnQpOwpleHBvcnRzLlN0YXRlZnVsT3BlblRpbWVsaW5lID0gU3RhdGVmdWxPcGVuVGltZWxpbmU7"},null]}