{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/containers/case/configure/use_configure.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/containers/case/configure/use_configure.js","mtime":1589249553220},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnVzZUNhc2VDb25maWd1cmUgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gcmVxdWlyZSgicmVhY3QiKTsKCnZhciBfYXBpID0gcmVxdWlyZSgiLi9hcGkiKTsKCnZhciBfdG9hc3RlcnMgPSByZXF1aXJlKCIuLi8uLi8uLi9jb21wb25lbnRzL3RvYXN0ZXJzIik7Cgp2YXIgaTE4biA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoIi4vdHJhbnNsYXRpb25zIikpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7CiAgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgewogICAgcmV0dXJuIG9iajsKICB9IGVsc2UgewogICAgdmFyIG5ld09iaiA9IHt9OwoKICAgIGlmIChvYmogIT0gbnVsbCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OwoKICAgICAgICAgIGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBuZXdPYmouZGVmYXVsdCA9IG9iajsKICAgIHJldHVybiBuZXdPYmo7CiAgfQp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgewogIHRyeSB7CiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7CiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICByZWplY3QoZXJyb3IpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKGluZm8uZG9uZSkgewogICAgcmVzb2x2ZSh2YWx1ZSk7CiAgfSBlbHNlIHsKICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsKICB9Cn0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWxmID0gdGhpcywKICAgICAgICBhcmdzID0gYXJndW1lbnRzOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOwoKICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHsKICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7CiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOwogICAgICB9CgogICAgICBfbmV4dCh1bmRlZmluZWQpOwogICAgfSk7CiAgfTsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKdmFyIHVzZUNhc2VDb25maWd1cmUgPSBmdW5jdGlvbiB1c2VDYXNlQ29uZmlndXJlKF9yZWYpIHsKICB2YXIgc2V0Q29ubmVjdG9yID0gX3JlZi5zZXRDb25uZWN0b3IsCiAgICAgIHNldENsb3N1cmVUeXBlID0gX3JlZi5zZXRDbG9zdXJlVHlwZSwKICAgICAgc2V0Q3VycmVudENvbmZpZ3VyYXRpb24gPSBfcmVmLnNldEN1cnJlbnRDb25maWd1cmF0aW9uOwoKICB2YXIgX3VzZVN0YXRlVG9hc3RlciA9ICgwLCBfdG9hc3RlcnMudXNlU3RhdGVUb2FzdGVyKSgpLAogICAgICBfdXNlU3RhdGVUb2FzdGVyMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZVRvYXN0ZXIsIDIpLAogICAgICBkaXNwYXRjaFRvYXN0ZXIgPSBfdXNlU3RhdGVUb2FzdGVyMlsxXTsKCiAgdmFyIF91c2VTdGF0ZSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKHRydWUpLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgbG9hZGluZyA9IF91c2VTdGF0ZTJbMF0sCiAgICAgIHNldExvYWRpbmcgPSBfdXNlU3RhdGUyWzFdOwoKICB2YXIgX3VzZVN0YXRlMyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGZhbHNlKSwKICAgICAgX3VzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTMsIDIpLAogICAgICBmaXJzdExvYWQgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRGaXJzdExvYWQgPSBfdXNlU3RhdGU0WzFdOwoKICB2YXIgX3VzZVN0YXRlNSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGZhbHNlKSwKICAgICAgX3VzZVN0YXRlNiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTUsIDIpLAogICAgICBwZXJzaXN0TG9hZGluZyA9IF91c2VTdGF0ZTZbMF0sCiAgICAgIHNldFBlcnNpc3RMb2FkaW5nID0gX3VzZVN0YXRlNlsxXTsKCiAgdmFyIF91c2VTdGF0ZTcgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSgnJyksCiAgICAgIF91c2VTdGF0ZTggPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU3LCAyKSwKICAgICAgdmVyc2lvbiA9IF91c2VTdGF0ZThbMF0sCiAgICAgIHNldFZlcnNpb24gPSBfdXNlU3RhdGU4WzFdOwoKICB2YXIgcmVmZXRjaENhc2VDb25maWd1cmUgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAoKSB7CiAgICB2YXIgZGlkQ2FuY2VsID0gZmFsc2U7CiAgICB2YXIgYWJvcnRDdHJsID0gbmV3IEFib3J0Q29udHJvbGxlcigpOwoKICAgIHZhciBmZXRjaENhc2VDb25maWd1cmF0aW9uID0KICAgIC8qI19fUFVSRV9fKi8KICAgIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgICAgc2V0TG9hZGluZyh0cnVlKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfYXBpLmdldENhc2VDb25maWd1cmUpKHsKICAgICAgICAgICAgICAgICAgc2lnbmFsOiBhYm9ydEN0cmwuc2lnbmFsCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIWRpZENhbmNlbCkgewogICAgICAgICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTsKCiAgICAgICAgICAgICAgICAgIGlmIChyZXMgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHNldENvbm5lY3RvcihyZXMuY29ubmVjdG9ySWQsIHJlcy5jb25uZWN0b3JOYW1lKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHNldENsb3N1cmVUeXBlICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgIHNldENsb3N1cmVUeXBlKHJlcy5jbG9zdXJlVHlwZSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBzZXRWZXJzaW9uKHJlcy52ZXJzaW9uKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdExvYWQpIHsKICAgICAgICAgICAgICAgICAgICAgIHNldEZpcnN0TG9hZCh0cnVlKTsKCiAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0Q3VycmVudENvbmZpZ3VyYXRpb24gIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50Q29uZmlndXJhdGlvbih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdG9ySWQ6IHJlcy5jb25uZWN0b3JJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zdXJlVHlwZTogcmVzLmNsb3N1cmVUeXBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gODsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CgogICAgICAgICAgICAgICAgaWYgKCFkaWRDYW5jZWwpIHsKICAgICAgICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7CiAgICAgICAgICAgICAgICAgICgwLCBfdG9hc3RlcnMuZXJyb3JUb1RvYXN0ZXIpKHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogaTE4bi5FUlJPUl9USVRMRSwKICAgICAgICAgICAgICAgICAgICBlcnJvcjogX2NvbnRleHQudDAuYm9keSAmJiBfY29udGV4dC50MC5ib2R5Lm1lc3NhZ2UgPyBuZXcgRXJyb3IoX2NvbnRleHQudDAuYm9keS5tZXNzYWdlKSA6IF9jb250ZXh0LnQwLAogICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoVG9hc3RlcjogZGlzcGF0Y2hUb2FzdGVyCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1swLCA4XV0pOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gZmV0Y2hDYXNlQ29uZmlndXJhdGlvbigpIHsKICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICBmZXRjaENhc2VDb25maWd1cmF0aW9uKCk7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBkaWRDYW5jZWwgPSB0cnVlOwogICAgICBhYm9ydEN0cmwuYWJvcnQoKTsKICAgIH07CiAgfSwgW10pOwogIHZhciBwZXJzaXN0Q2FzZUNvbmZpZ3VyZSA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKAogIC8qI19fUFVSRV9fKi8KICBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZjMgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgIC8qI19fUFVSRV9fKi8KICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKF9yZWY0KSB7CiAgICAgIHZhciBjb25uZWN0b3JJZCwgY29ubmVjdG9yTmFtZSwgY2xvc3VyZVR5cGUsIGRpZENhbmNlbCwgYWJvcnRDdHJsLCBzYXZlQ2FzZUNvbmZpZ3VyYXRpb247CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29ubmVjdG9ySWQgPSBfcmVmNC5jb25uZWN0b3JJZCwgY29ubmVjdG9yTmFtZSA9IF9yZWY0LmNvbm5lY3Rvck5hbWUsIGNsb3N1cmVUeXBlID0gX3JlZjQuY2xvc3VyZVR5cGU7CiAgICAgICAgICAgICAgZGlkQ2FuY2VsID0gZmFsc2U7CiAgICAgICAgICAgICAgYWJvcnRDdHJsID0gbmV3IEFib3J0Q29udHJvbGxlcigpOwoKICAgICAgICAgICAgICBzYXZlQ2FzZUNvbmZpZ3VyYXRpb24gPQogICAgICAgICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgX3JlZjUgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgICAgICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICAgICAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgICAgICAgICAgICB2YXIgY29ubmVjdG9yT2JqLCByZXM7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgIHNldFBlcnNpc3RMb2FkaW5nKHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rvck9iaiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rvcl9pZDogY29ubmVjdG9ySWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0b3JfbmFtZTogY29ubmVjdG9yTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3N1cmVfdHlwZTogY2xvc3VyZVR5cGUKICAgICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh2ZXJzaW9uLmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoMCwgX2FwaS5wb3N0Q2FzZUNvbmZpZ3VyZSkoY29ubmVjdG9yT2JqLCBhYm9ydEN0cmwuc2lnbmFsKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfYXBpLnBhdGNoQ2FzZUNvbmZpZ3VyZSkoX29iamVjdFNwcmVhZCh7fSwgY29ubmVjdG9yT2JqLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIGFib3J0Q3RybC5zaWduYWwpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnQwOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRpZENhbmNlbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UGVyc2lzdExvYWRpbmcoZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q29ubmVjdG9yKHJlcy5jb25uZWN0b3JJZCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldENsb3N1cmVUeXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldENsb3N1cmVUeXBlKHJlcy5jbG9zdXJlVHlwZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VmVyc2lvbihyZXMudmVyc2lvbik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldEN1cnJlbnRDb25maWd1cmF0aW9uICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudENvbmZpZ3VyYXRpb24oewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RvcklkOiByZXMuY29ubmVjdG9ySWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc3VyZVR5cGU6IHJlcy5jbG9zdXJlVHlwZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwgX3RvYXN0ZXJzLmRpc3BsYXlTdWNjZXNzVG9hc3QpKGkxOG4uU1VDQ0VTU19DT05GSUdVUkUsIGRpc3BhdGNoVG9hc3Rlcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE2OwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MSA9IF9jb250ZXh0MlsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkaWRDYW5jZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFBlcnNpc3RMb2FkaW5nKGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwLCBfdG9hc3RlcnMuZXJyb3JUb1RvYXN0ZXIpKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGkxOG4uRVJST1JfVElUTEUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBfY29udGV4dDIudDEuYm9keSAmJiBfY29udGV4dDIudDEuYm9keS5tZXNzYWdlID8gbmV3IEVycm9yKF9jb250ZXh0Mi50MS5ib2R5Lm1lc3NhZ2UpIDogX2NvbnRleHQyLnQxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaFRvYXN0ZXI6IGRpc3BhdGNoVG9hc3RlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzAsIDE2XV0pOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBzYXZlQ2FzZUNvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9KCk7CgogICAgICAgICAgICAgIHNhdmVDYXNlQ29uZmlndXJhdGlvbigpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBkaWRDYW5jZWwgPSB0cnVlOwogICAgICAgICAgICAgICAgYWJvcnRDdHJsLmFib3J0KCk7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpLCBbdmVyc2lvbl0pOwogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICByZWZldGNoQ2FzZUNvbmZpZ3VyZSgpOwogIH0sIFtdKTsKICByZXR1cm4gewogICAgbG9hZGluZzogbG9hZGluZywKICAgIHJlZmV0Y2hDYXNlQ29uZmlndXJlOiByZWZldGNoQ2FzZUNvbmZpZ3VyZSwKICAgIHBlcnNpc3RDYXNlQ29uZmlndXJlOiBwZXJzaXN0Q2FzZUNvbmZpZ3VyZSwKICAgIHBlcnNpc3RMb2FkaW5nOiBwZXJzaXN0TG9hZGluZwogIH07Cn07CgpleHBvcnRzLnVzZUNhc2VDb25maWd1cmUgPSB1c2VDYXNlQ29uZmlndXJlOw=="},null]}