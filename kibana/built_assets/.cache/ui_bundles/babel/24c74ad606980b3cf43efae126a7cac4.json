{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/maps/public/elasticsearch_geo_utils.js","dependencies":[{"path":"x-pack/legacy/plugins/maps/public/elasticsearch_geo_utils.js","mtime":1589249552380},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmhpdHNUb0dlb0pzb24gPSBoaXRzVG9HZW9Kc29uOwpleHBvcnRzLmdlb1BvaW50VG9HZW9tZXRyeSA9IGdlb1BvaW50VG9HZW9tZXRyeTsKZXhwb3J0cy5jb252ZXJ0RVNTaGFwZVRvR2VvanNvbkdlb21ldHJ5ID0gY29udmVydEVTU2hhcGVUb0dlb2pzb25HZW9tZXRyeTsKZXhwb3J0cy5nZW9TaGFwZVRvR2VvbWV0cnkgPSBnZW9TaGFwZVRvR2VvbWV0cnk7CmV4cG9ydHMuY3JlYXRlRXh0ZW50RmlsdGVyID0gY3JlYXRlRXh0ZW50RmlsdGVyOwpleHBvcnRzLmNyZWF0ZVNwYXRpYWxGaWx0ZXJXaXRoQm91bmRpbmdCb3ggPSBjcmVhdGVTcGF0aWFsRmlsdGVyV2l0aEJvdW5kaW5nQm94OwpleHBvcnRzLmNyZWF0ZVNwYXRpYWxGaWx0ZXJXaXRoR2VvbWV0cnkgPSBjcmVhdGVTcGF0aWFsRmlsdGVyV2l0aEdlb21ldHJ5OwpleHBvcnRzLmNyZWF0ZURpc3RhbmNlRmlsdGVyV2l0aE1ldGEgPSBjcmVhdGVEaXN0YW5jZUZpbHRlcldpdGhNZXRhOwpleHBvcnRzLnJvdW5kQ29vcmRpbmF0ZXMgPSByb3VuZENvb3JkaW5hdGVzOwpleHBvcnRzLmdldEJvdW5kaW5nQm94R2VvbWV0cnkgPSBnZXRCb3VuZGluZ0JveEdlb21ldHJ5OwpleHBvcnRzLmNvbnZlcnRNYXBFeHRlbnRUb1BvbHlnb24gPSBjb252ZXJ0TWFwRXh0ZW50VG9Qb2x5Z29uOwpleHBvcnRzLmNsYW1wVG9MYXRCb3VuZHMgPSBjbGFtcFRvTGF0Qm91bmRzOwpleHBvcnRzLmNsYW1wVG9Mb25Cb3VuZHMgPSBjbGFtcFRvTG9uQm91bmRzOwpleHBvcnRzLmNsYW1wID0gY2xhbXA7Cgp2YXIgX2xvZGFzaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibG9kYXNoIikpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX3dlbGxrbm93biA9IHJlcXVpcmUoIndlbGxrbm93biIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuLi9jb21tb24vY29uc3RhbnRzIik7Cgp2YXIgX2kxOG5fZ2V0dGVycyA9IHJlcXVpcmUoIi4uL2NvbW1vbi9pMThuX2dldHRlcnMiKTsKCnZhciBfa2liYW5hX3NlcnZpY2VzID0gcmVxdWlyZSgiLi9raWJhbmFfc2VydmljZXMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgpmdW5jdGlvbiBlbnN1cmVHZW9GaWVsZCh0eXBlKSB7CiAgdmFyIGV4cGVjdGVkVHlwZXMgPSBbX2NvbnN0YW50cy5FU19HRU9fRklFTERfVFlQRS5HRU9fUE9JTlQsIF9jb25zdGFudHMuRVNfR0VPX0ZJRUxEX1RZUEUuR0VPX1NIQVBFXTsKCiAgaWYgKCFleHBlY3RlZFR5cGVzLmluY2x1ZGVzKHR5cGUpKSB7CiAgICB2YXIgZXJyb3JNZXNzYWdlID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1hcHMuZXNfZ2VvX3V0aWxzLnVuc3VwcG9ydGVkRmllbGRUeXBlRXJyb3JNZXNzYWdlJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ1Vuc3VwcG9ydGVkIGZpZWxkIHR5cGUsIGV4cGVjdGVkOiB7ZXhwZWN0ZWRUeXBlc30sIHlvdSBwcm92aWRlZDoge2ZpZWxkVHlwZX0nLAogICAgICB2YWx1ZXM6IHsKICAgICAgICBmaWVsZFR5cGU6IHR5cGUsCiAgICAgICAgZXhwZWN0ZWRUeXBlczogZXhwZWN0ZWRUeXBlcy5qb2luKCcsJykKICAgICAgfQogICAgfSk7CgogICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7CiAgfQp9CgpmdW5jdGlvbiBlbnN1cmVHZW9tZXRyeVR5cGUodHlwZSwgZXhwZWN0ZWRUeXBlcykgewogIGlmICghZXhwZWN0ZWRUeXBlcy5pbmNsdWRlcyh0eXBlKSkgewogICAgdmFyIGVycm9yTWVzc2FnZSA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tYXBzLmVzX2dlb191dGlscy51bnN1cHBvcnRlZEdlb21ldHJ5VHlwZUVycm9yTWVzc2FnZScsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlLCBleHBlY3RlZDoge2V4cGVjdGVkVHlwZXN9LCB5b3UgcHJvdmlkZWQ6IHtnZW9tZXRyeVR5cGV9JywKICAgICAgdmFsdWVzOiB7CiAgICAgICAgZ2VvbWV0cnlUeXBlOiB0eXBlLAogICAgICAgIGV4cGVjdGVkVHlwZXM6IGV4cGVjdGVkVHlwZXMuam9pbignLCcpCiAgICAgIH0KICAgIH0pOwoKICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpOwogIH0KfQovKioKICogQ29udmVydHMgRWxhc3RpY3NlYXJjaCBzZWFyY2ggcmVzdWx0cyBpbnRvIEdlb0pzb24gRmVhdHVyZUNvbGxlY3Rpb24KICoKICogQHBhcmFtIHthcnJheX0gaGl0cyBFbGFzdGljc2VhcmNoIHNlYXJjaCByZXNwb25zZSBoaXRzIGFycmF5CiAqIEBwYXJhbSB7ZnVuY3Rpb259IGZsYXR0ZW5IaXQgTWV0aG9kIHRvIGZsYXR0ZW4gaGl0cy5fc291cmNlIGFuZCBoaXRzLmZpZWxkcyBpbnRvIHByb3BlcnRpZXMgb2JqZWN0LgogKiAgIFNob3VsZCBqdXN0IGJlIEluZGV4UGF0dGVybi5mbGF0dGVuSGl0IGJ1dCB3YW50ZWQgdG8gYXZvaWQgY291cGxpbmcgdGhpcyBtZXRob2QgdG8gSW5kZXhQYXR0ZXJuLgogKiBAcGFyYW0ge3N0cmluZ30gZ2VvRmllbGROYW1lIEdlb21ldHJ5IGZpZWxkIG5hbWUKICogQHBhcmFtIHtzdHJpbmd9IGdlb0ZpZWxkVHlwZSBHZW9tZXRyeSBmaWVsZCB0eXBlIFsiZ2VvX3BvaW50IiwgImdlb19zaGFwZSJdCiAqIEByZXR1cm5zIHtudW1iZXJ9CiAqLwoKCmZ1bmN0aW9uIGhpdHNUb0dlb0pzb24oaGl0cywgZmxhdHRlbkhpdCwgZ2VvRmllbGROYW1lLCBnZW9GaWVsZFR5cGUpIHsKICB2YXIgZmVhdHVyZXMgPSBbXTsKICB2YXIgdG1wR2VvbWV0cmllc0FjY3VtdWxhdG9yID0gW107CgogIGZvciAodmFyIGkgPSAwOyBpIDwgaGl0cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHByb3BlcnRpZXMgPSBmbGF0dGVuSGl0KGhpdHNbaV0pOwogICAgdG1wR2VvbWV0cmllc0FjY3VtdWxhdG9yLmxlbmd0aCA9IDA7IC8vdHJ1bmNhdGUgYWNjdW11bGF0b3IKCiAgICBlbnN1cmVHZW9GaWVsZChnZW9GaWVsZFR5cGUpOwoKICAgIGlmIChnZW9GaWVsZFR5cGUgPT09IF9jb25zdGFudHMuRVNfR0VPX0ZJRUxEX1RZUEUuR0VPX1BPSU5UKSB7CiAgICAgIGdlb1BvaW50VG9HZW9tZXRyeShwcm9wZXJ0aWVzW2dlb0ZpZWxkTmFtZV0sIHRtcEdlb21ldHJpZXNBY2N1bXVsYXRvcik7CiAgICB9IGVsc2UgewogICAgICBnZW9TaGFwZVRvR2VvbWV0cnkocHJvcGVydGllc1tnZW9GaWVsZE5hbWVdLCB0bXBHZW9tZXRyaWVzQWNjdW11bGF0b3IpOwogICAgfSAvLyBkb24ndCBpbmNsdWRlIGdlb21ldHJ5IGZpZWxkIHZhbHVlIGluIHByb3BlcnRpZXMKCgogICAgZGVsZXRlIHByb3BlcnRpZXNbZ2VvRmllbGROYW1lXTsgLy9jcmVhdGUgbmV3IGdlb2pzb24gRmVhdHVyZSBmb3IgZXZlcnkgaW5kaXZpZHVhbCBnZW9qc29uIGdlb21ldHJ5LgoKICAgIGZvciAodmFyIGogPSAwOyBqIDwgdG1wR2VvbWV0cmllc0FjY3VtdWxhdG9yLmxlbmd0aDsgaisrKSB7CiAgICAgIGZlYXR1cmVzLnB1c2goewogICAgICAgIHR5cGU6ICdGZWF0dXJlJywKICAgICAgICBnZW9tZXRyeTogdG1wR2VvbWV0cmllc0FjY3VtdWxhdG9yW2pdLAogICAgICAgIC8vIF9pZCBpcyBub3QgdW5pcXVlIGFjcm9zcyBLaWJhbmEgaW5kZXggcGF0dGVybi4gTXVsdGlwbGUgRVMgaW5kaWNlcyBjb3VsZCBoYXZlIF9pZCBjb2xsaXNpb25zCiAgICAgICAgLy8gTmVlZCB0byBwcmVmaXggd2l0aCBfaW5kZXggdG8gZ3VhcmFudGVlIHVuaXF1ZW5lc3MKICAgICAgICBpZDogIiIuY29uY2F0KHByb3BlcnRpZXMuX2luZGV4LCAiOiIpLmNvbmNhdChwcm9wZXJ0aWVzLl9pZCwgIjoiKS5jb25jYXQoaiksCiAgICAgICAgcHJvcGVydGllczogcHJvcGVydGllcwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB7CiAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLAogICAgZmVhdHVyZXM6IGZlYXR1cmVzCiAgfTsKfSAvLyBQYXJzZSBnZW9fcG9pbnQgZG9jdmFsdWVfZmllbGQKLy8gRWl0aGVyCi8vIDEpIEFycmF5IG9mIGxhdExvbiBzdHJpbmdzCi8vIDIpIGxhdExvbiBzdHJpbmcKCgpmdW5jdGlvbiBnZW9Qb2ludFRvR2VvbWV0cnkodmFsdWUsIGFjY3VtdWxhdG9yKSB7CiAgaWYgKCF2YWx1ZSkgewogICAgcmV0dXJuOwogIH0KCiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7CiAgICAgIGdlb1BvaW50VG9HZW9tZXRyeSh2YWx1ZVtpXSwgYWNjdW11bGF0b3IpOwogICAgfQoKICAgIHJldHVybjsKICB9CgogIHZhciBjb21tYVNwbGl0ID0gdmFsdWUuc3BsaXQoJywnKTsKICB2YXIgbGF0ID0gcGFyc2VGbG9hdChjb21tYVNwbGl0WzBdKTsKICB2YXIgbG9uID0gcGFyc2VGbG9hdChjb21tYVNwbGl0WzFdKTsKICBhY2N1bXVsYXRvci5wdXNoKHsKICAgIHR5cGU6IF9jb25zdGFudHMuR0VPX0pTT05fVFlQRS5QT0lOVCwKICAgIGNvb3JkaW5hdGVzOiBbbG9uLCBsYXRdCiAgfSk7Cn0KCmZ1bmN0aW9uIGNvbnZlcnRFU1NoYXBlVG9HZW9qc29uR2VvbWV0cnkodmFsdWUpIHsKICB2YXIgZ2VvSnNvbiA9IHsKICAgIHR5cGU6IHZhbHVlLnR5cGUsCiAgICBjb29yZGluYXRlczogdmFsdWUuY29vcmRpbmF0ZXMKICB9OyAvLyBodHRwczovL3d3dy5lbGFzdGljLmNvL2d1aWRlL2VuL2VsYXN0aWNzZWFyY2gvcmVmZXJlbmNlL2N1cnJlbnQvZ2VvLXNoYXBlLmh0bWwjaW5wdXQtc3RydWN0dXJlCiAgLy8gRm9yIHNvbWUgdW5rbm93biBjb21wYXRpYmlsaXR5IG5pZ2h0bWFyaXNoIHJlYXNvbiwgRWxhc3RpY3NlYXJjaCB0eXBlcyBhcmUgbm90IGNhcGl0YWxpemVkIHRoZSBzYW1lIGFzIGdlb2pzb24gdHlwZXMKICAvLyBGb3IgZXhhbXBsZTogJ0xpbmVTdHJpbmcnIGdlb2pzb24gdHlwZSBpcyAnbGluZXN0cmluZycgaW4gZWxhc3RpY3NlYXJjaAogIC8vIENvbnZlcnQgZmVhdHVyZSB0eXBlcyB0byBnZW9qc29uIHNwZWMgdmFsdWVzCiAgLy8gU29tZXRpbWVzLCB0aGUgdHlwZSBpbiBFUyBpcyBjYXBpdGFsaXplZCBjb3JyZWN0bHkuIFNvbWV0aW1lcyBpdCBpcyBub3QuIEl0IGRlcGVuZHMgb24gaG93IHRoZSBkb2Mgd2FzIGluZ2VzdGVkCiAgLy8gVGhlIGJlbG93IGlzIHRoZSBjb3JyZWN0aW9uIGluLXBsYWNlLgoKICBzd2l0Y2ggKHZhbHVlLnR5cGUpIHsKICAgIGNhc2UgJ3BvaW50JzoKICAgICAgZ2VvSnNvbi50eXBlID0gX2NvbnN0YW50cy5HRU9fSlNPTl9UWVBFLlBPSU5UOwogICAgICBicmVhazsKCiAgICBjYXNlICdsaW5lc3RyaW5nJzoKICAgICAgZ2VvSnNvbi50eXBlID0gX2NvbnN0YW50cy5HRU9fSlNPTl9UWVBFLkxJTkVfU1RSSU5HOwogICAgICBicmVhazsKCiAgICBjYXNlICdwb2x5Z29uJzoKICAgICAgZ2VvSnNvbi50eXBlID0gX2NvbnN0YW50cy5HRU9fSlNPTl9UWVBFLlBPTFlHT047CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgJ211bHRpcG9pbnQnOgogICAgICBnZW9Kc29uLnR5cGUgPSBfY29uc3RhbnRzLkdFT19KU09OX1RZUEUuTVVMVElfUE9JTlQ7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgJ211bHRpbGluZXN0cmluZyc6CiAgICAgIGdlb0pzb24udHlwZSA9IF9jb25zdGFudHMuR0VPX0pTT05fVFlQRS5NVUxUSV9MSU5FX1NUUklORzsKICAgICAgYnJlYWs7CgogICAgY2FzZSAnbXVsdGlwb2x5Z29uJzoKICAgICAgZ2VvSnNvbi50eXBlID0gX2NvbnN0YW50cy5HRU9fSlNPTl9UWVBFLk1VTFRJX1BPTFlHT047CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgJ2dlb21ldHJ5Y29sbGVjdGlvbic6CiAgICAgIGdlb0pzb24udHlwZSA9IF9jb25zdGFudHMuR0VPX0pTT05fVFlQRS5HRU9NRVRSWV9DT0xMRUNUSU9OOwogICAgICBicmVhazsKCiAgICBjYXNlICdlbnZlbG9wZSc6CiAgICBjYXNlICdjaXJjbGUnOgogICAgICB2YXIgZXJyb3JNZXNzYWdlID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1hcHMuZXNfZ2VvX3V0aWxzLmNvbnZlcnQudW5zdXBwb3J0ZWRHZW9tZXRyeVR5cGVFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJVbmFibGUgdG8gY29udmVydCB7Z2VvbWV0cnlUeXBlfSBnZW9tZXRyeSB0byBnZW9qc29uLCBub3Qgc3VwcG9ydGVkIiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGdlb21ldHJ5VHlwZTogZ2VvSnNvbi50eXBlCiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpOwogIH0KCiAgcmV0dXJuIGdlb0pzb247Cn0KCmZ1bmN0aW9uIGNvbnZlcnRXS1RTdHJpbmdUb0dlb2pzb24odmFsdWUpIHsKICB0cnkgewogICAgcmV0dXJuICgwLCBfd2VsbGtub3duLnBhcnNlKSh2YWx1ZSk7CiAgfSBjYXRjaCAoZSkgewogICAgdmFyIGVycm9yTWVzc2FnZSA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tYXBzLmVzX2dlb191dGlscy53a3QuaW52YWxpZFdLVEVycm9yTWVzc2FnZScsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJVbmFibGUgdG8gY29udmVydCB7d2t0fSB0byBnZW9qc29uLiBWYWxpZCBXS1QgZXhwZWN0ZWQuIiwKICAgICAgdmFsdWVzOiB7CiAgICAgICAgd2t0OiB2YWx1ZQogICAgICB9CiAgICB9KTsKCiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTsKICB9Cn0KCmZ1bmN0aW9uIGdlb1NoYXBlVG9HZW9tZXRyeSh2YWx1ZSwgYWNjdW11bGF0b3IpIHsKICBpZiAoIXZhbHVlKSB7CiAgICByZXR1cm47CiAgfQoKICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgIC8vIHZhbHVlIGV4cHJlc3NlZCBhcyBhbiBhcnJheSBvZiB2YWx1ZXMKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHsKICAgICAgZ2VvU2hhcGVUb0dlb21ldHJ5KHZhbHVlW2ldLCBhY2N1bXVsYXRvcik7CiAgICB9CgogICAgcmV0dXJuOwogIH0KCiAgdmFyIGdlb0pzb247CgogIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7CiAgICBnZW9Kc29uID0gY29udmVydFdLVFN0cmluZ1RvR2VvanNvbih2YWx1ZSk7CiAgfSBlbHNlIHsKICAgIGdlb0pzb24gPSBjb252ZXJ0RVNTaGFwZVRvR2VvanNvbkdlb21ldHJ5KHZhbHVlKTsKICB9CgogIGFjY3VtdWxhdG9yLnB1c2goZ2VvSnNvbik7Cn0KCmZ1bmN0aW9uIGNyZWF0ZUdlb0JvdW5kQm94RmlsdGVyKGdlb21ldHJ5LCBnZW9GaWVsZE5hbWUpIHsKICB2YXIgZmlsdGVyUHJvcHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9OwogIGVuc3VyZUdlb21ldHJ5VHlwZShnZW9tZXRyeS50eXBlLCBbX2NvbnN0YW50cy5HRU9fSlNPTl9UWVBFLlBPTFlHT05dKTsKICB2YXIgVE9QX0xFRlRfSU5ERVggPSAwOwogIHZhciBCT1RUT01fUklHSFRfSU5ERVggPSAyOwogIHZhciB2ZXJ0aWNpZXMgPSBnZW9tZXRyeS5jb29yZGluYXRlc1tfY29uc3RhbnRzLlBPTFlHT05fQ09PUkRJTkFURVNfRVhURVJJT1JfSU5ERVhdOwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHsKICAgIGdlb19ib3VuZGluZ19ib3g6IF9kZWZpbmVQcm9wZXJ0eSh7fSwgZ2VvRmllbGROYW1lLCB7CiAgICAgIHRvcF9sZWZ0OiB2ZXJ0aWNpZXNbVE9QX0xFRlRfSU5ERVhdLAogICAgICBib3R0b21fcmlnaHQ6IHZlcnRpY2llc1tCT1RUT01fUklHSFRfSU5ERVhdCiAgICB9KQogIH0sIGZpbHRlclByb3BzKTsKfQoKZnVuY3Rpb24gY3JlYXRlR2VvUG9seWdvbkZpbHRlcihwb2x5Z29uQ29vcmRpbmF0ZXMsIGdlb0ZpZWxkTmFtZSkgewogIHZhciBmaWx0ZXJQcm9wcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoewogICAgZ2VvX3BvbHlnb246IF9kZWZpbmVQcm9wZXJ0eSh7CiAgICAgIGlnbm9yZV91bm1hcHBlZDogdHJ1ZQogICAgfSwgZ2VvRmllbGROYW1lLCB7CiAgICAgIHBvaW50czogcG9seWdvbkNvb3JkaW5hdGVzW19jb25zdGFudHMuUE9MWUdPTl9DT09SRElOQVRFU19FWFRFUklPUl9JTkRFWF0ubWFwKGZ1bmN0aW9uIChjb29yZGluYXRlUGFpcikgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBsb246IGNvb3JkaW5hdGVQYWlyW19jb25zdGFudHMuTE9OX0lOREVYXSwKICAgICAgICAgIGxhdDogY29vcmRpbmF0ZVBhaXJbX2NvbnN0YW50cy5MQVRfSU5ERVhdCiAgICAgICAgfTsKICAgICAgfSkKICAgIH0pCiAgfSwgZmlsdGVyUHJvcHMpOwp9CgpmdW5jdGlvbiBjcmVhdGVFeHRlbnRGaWx0ZXIobWFwRXh0ZW50LCBnZW9GaWVsZE5hbWUsIGdlb0ZpZWxkVHlwZSkgewogIGVuc3VyZUdlb0ZpZWxkKGdlb0ZpZWxkVHlwZSk7CiAgdmFyIHNhZmVQb2x5Z29uID0gY29udmVydE1hcEV4dGVudFRvUG9seWdvbihtYXBFeHRlbnQpOwoKICBpZiAoZ2VvRmllbGRUeXBlID09PSBfY29uc3RhbnRzLkVTX0dFT19GSUVMRF9UWVBFLkdFT19QT0lOVCkgewogICAgcmV0dXJuIGNyZWF0ZUdlb0JvdW5kQm94RmlsdGVyKHNhZmVQb2x5Z29uLCBnZW9GaWVsZE5hbWUpOwogIH0KCiAgcmV0dXJuIHsKICAgIGdlb19zaGFwZTogX2RlZmluZVByb3BlcnR5KHt9LCBnZW9GaWVsZE5hbWUsIHsKICAgICAgc2hhcGU6IHNhZmVQb2x5Z29uLAogICAgICByZWxhdGlvbjogX2NvbnN0YW50cy5FU19TUEFUSUFMX1JFTEFUSU9OUy5JTlRFUlNFQ1RTCiAgICB9KQogIH07Cn0KCmZ1bmN0aW9uIGNyZWF0ZVNwYXRpYWxGaWx0ZXJXaXRoQm91bmRpbmdCb3gob3B0aW9ucykgewogIHJldHVybiBjcmVhdGVHZW9tZXRyeUZpbHRlcldpdGhNZXRhKF9vYmplY3RTcHJlYWQoe30sIG9wdGlvbnMsIHsKICAgIGlzQm91bmRpbmdCb3g6IHRydWUKICB9KSk7Cn0KCmZ1bmN0aW9uIGNyZWF0ZVNwYXRpYWxGaWx0ZXJXaXRoR2VvbWV0cnkob3B0aW9ucykgewogIHJldHVybiBjcmVhdGVHZW9tZXRyeUZpbHRlcldpdGhNZXRhKG9wdGlvbnMpOwp9CgpmdW5jdGlvbiBjcmVhdGVHZW9tZXRyeUZpbHRlcldpdGhNZXRhKF9yZWYpIHsKICB2YXIgcHJlSW5kZXhlZFNoYXBlID0gX3JlZi5wcmVJbmRleGVkU2hhcGUsCiAgICAgIGdlb21ldHJ5ID0gX3JlZi5nZW9tZXRyeSwKICAgICAgZ2VvbWV0cnlMYWJlbCA9IF9yZWYuZ2VvbWV0cnlMYWJlbCwKICAgICAgaW5kZXhQYXR0ZXJuSWQgPSBfcmVmLmluZGV4UGF0dGVybklkLAogICAgICBnZW9GaWVsZE5hbWUgPSBfcmVmLmdlb0ZpZWxkTmFtZSwKICAgICAgZ2VvRmllbGRUeXBlID0gX3JlZi5nZW9GaWVsZFR5cGUsCiAgICAgIF9yZWYkcmVsYXRpb24gPSBfcmVmLnJlbGF0aW9uLAogICAgICByZWxhdGlvbiA9IF9yZWYkcmVsYXRpb24gPT09IHZvaWQgMCA/IF9jb25zdGFudHMuRVNfU1BBVElBTF9SRUxBVElPTlMuSU5URVJTRUNUUyA6IF9yZWYkcmVsYXRpb24sCiAgICAgIF9yZWYkaXNCb3VuZGluZ0JveCA9IF9yZWYuaXNCb3VuZGluZ0JveCwKICAgICAgaXNCb3VuZGluZ0JveCA9IF9yZWYkaXNCb3VuZGluZ0JveCA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmJGlzQm91bmRpbmdCb3g7CiAgZW5zdXJlR2VvRmllbGQoZ2VvRmllbGRUeXBlKTsKICB2YXIgcmVsYXRpb25MYWJlbCA9IGdlb0ZpZWxkVHlwZSA9PT0gX2NvbnN0YW50cy5FU19HRU9fRklFTERfVFlQRS5HRU9fUE9JTlQgPyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWFwcy5lc19nZW9fdXRpbHMuc2hhcGVGaWx0ZXIuZ2VvUG9pbnRSZWxhdGlvbkxhYmVsJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdpbicKICB9KSA6ICgwLCBfaTE4bl9nZXR0ZXJzLmdldEVzU3BhdGlhbFJlbGF0aW9uTGFiZWwpKHJlbGF0aW9uKTsKICB2YXIgbWV0YSA9IHsKICAgIHR5cGU6IF9raWJhbmFfc2VydmljZXMuU1BBVElBTF9GSUxURVJfVFlQRSwKICAgIG5lZ2F0ZTogZmFsc2UsCiAgICBpbmRleDogaW5kZXhQYXR0ZXJuSWQsCiAgICBrZXk6IGdlb0ZpZWxkTmFtZSwKICAgIGFsaWFzOiAiIi5jb25jYXQoZ2VvRmllbGROYW1lLCAiICIpLmNvbmNhdChyZWxhdGlvbkxhYmVsLCAiICIpLmNvbmNhdChnZW9tZXRyeUxhYmVsKQogIH07CgogIGlmIChnZW9GaWVsZFR5cGUgPT09IF9jb25zdGFudHMuRVNfR0VPX0ZJRUxEX1RZUEUuR0VPX1NIQVBFKSB7CiAgICB2YXIgc2hhcGVRdWVyeSA9IHsKICAgICAgcmVsYXRpb246IHJlbGF0aW9uCiAgICB9OwoKICAgIGlmIChwcmVJbmRleGVkU2hhcGUpIHsKICAgICAgc2hhcGVRdWVyeS5pbmRleGVkX3NoYXBlID0gcHJlSW5kZXhlZFNoYXBlOwogICAgfSBlbHNlIHsKICAgICAgc2hhcGVRdWVyeS5zaGFwZSA9IGdlb21ldHJ5OwogICAgfQoKICAgIHJldHVybiB7CiAgICAgIG1ldGE6IG1ldGEsCiAgICAgIGdlb19zaGFwZTogX2RlZmluZVByb3BlcnR5KHsKICAgICAgICBpZ25vcmVfdW5tYXBwZWQ6IHRydWUKICAgICAgfSwgZ2VvRmllbGROYW1lLCBzaGFwZVF1ZXJ5KQogICAgfTsKICB9IC8vIGdlb19wb2ludHMgc3VwcG9ydHMgbGltaXRlZCBnZW9tZXRyeSB0eXBlcwoKCiAgZW5zdXJlR2VvbWV0cnlUeXBlKGdlb21ldHJ5LnR5cGUsIFtfY29uc3RhbnRzLkdFT19KU09OX1RZUEUuUE9MWUdPTiwgX2NvbnN0YW50cy5HRU9fSlNPTl9UWVBFLk1VTFRJX1BPTFlHT05dKTsKCiAgaWYgKGdlb21ldHJ5LnR5cGUgPT09IF9jb25zdGFudHMuR0VPX0pTT05fVFlQRS5NVUxUSV9QT0xZR09OKSB7CiAgICByZXR1cm4gewogICAgICBtZXRhOiBtZXRhLAogICAgICBxdWVyeTogewogICAgICAgIGJvb2w6IHsKICAgICAgICAgIHNob3VsZDogZ2VvbWV0cnkuY29vcmRpbmF0ZXMubWFwKGZ1bmN0aW9uIChwb2x5Z29uQ29vcmRpbmF0ZXMpIHsKICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUdlb1BvbHlnb25GaWx0ZXIocG9seWdvbkNvb3JkaW5hdGVzLCBnZW9GaWVsZE5hbWUpOwogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfQoKICBpZiAoaXNCb3VuZGluZ0JveCkgewogICAgcmV0dXJuIGNyZWF0ZUdlb0JvdW5kQm94RmlsdGVyKGdlb21ldHJ5LCBnZW9GaWVsZE5hbWUsIHsKICAgICAgbWV0YTogbWV0YQogICAgfSk7CiAgfQoKICByZXR1cm4gY3JlYXRlR2VvUG9seWdvbkZpbHRlcihnZW9tZXRyeS5jb29yZGluYXRlcywgZ2VvRmllbGROYW1lLCB7CiAgICBtZXRhOiBtZXRhCiAgfSk7Cn0KCmZ1bmN0aW9uIGNyZWF0ZURpc3RhbmNlRmlsdGVyV2l0aE1ldGEoX3JlZjIpIHsKICB2YXIgYWxpYXMgPSBfcmVmMi5hbGlhcywKICAgICAgZGlzdGFuY2VLbSA9IF9yZWYyLmRpc3RhbmNlS20sCiAgICAgIGdlb0ZpZWxkTmFtZSA9IF9yZWYyLmdlb0ZpZWxkTmFtZSwKICAgICAgaW5kZXhQYXR0ZXJuSWQgPSBfcmVmMi5pbmRleFBhdHRlcm5JZCwKICAgICAgcG9pbnQgPSBfcmVmMi5wb2ludDsKICB2YXIgbWV0YSA9IHsKICAgIHR5cGU6IF9raWJhbmFfc2VydmljZXMuU1BBVElBTF9GSUxURVJfVFlQRSwKICAgIG5lZ2F0ZTogZmFsc2UsCiAgICBpbmRleDogaW5kZXhQYXR0ZXJuSWQsCiAgICBrZXk6IGdlb0ZpZWxkTmFtZSwKICAgIGFsaWFzOiBhbGlhcyA/IGFsaWFzIDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1hcHMuZXNfZ2VvX3V0aWxzLmRpc3RhbmNlRmlsdGVyQWxpYXMnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAne2dlb0ZpZWxkTmFtZX0gd2l0aGluIHtkaXN0YW5jZUttfWttIG9mIHtwb2ludExhYmVsfScsCiAgICAgIHZhbHVlczogewogICAgICAgIGRpc3RhbmNlS206IGRpc3RhbmNlS20sCiAgICAgICAgZ2VvRmllbGROYW1lOiBnZW9GaWVsZE5hbWUsCiAgICAgICAgcG9pbnRMYWJlbDogcG9pbnQuam9pbignLCcpCiAgICAgIH0KICAgIH0pCiAgfTsKICByZXR1cm4gewogICAgZ2VvX2Rpc3RhbmNlOiBfZGVmaW5lUHJvcGVydHkoewogICAgICBkaXN0YW5jZTogIiIuY29uY2F0KGRpc3RhbmNlS20sICJrbSIpCiAgICB9LCBnZW9GaWVsZE5hbWUsIHBvaW50KSwKICAgIG1ldGE6IG1ldGEKICB9Owp9CgpmdW5jdGlvbiByb3VuZENvb3JkaW5hdGVzKGNvb3JkaW5hdGVzKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb29yZGluYXRlcy5sZW5ndGg7IGkrKykgewogICAgdmFyIHZhbHVlID0gY29vcmRpbmF0ZXNbaV07CgogICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7CiAgICAgIHJvdW5kQ29vcmRpbmF0ZXModmFsdWUpOwogICAgfSBlbHNlIGlmICghaXNOYU4odmFsdWUpKSB7CiAgICAgIGNvb3JkaW5hdGVzW2ldID0gX2xvZGFzaC5kZWZhdWx0LnJvdW5kKHZhbHVlLCBfY29uc3RhbnRzLkRFQ0lNQUxfREVHUkVFU19QUkVDSVNJT04pOwogICAgfQogIH0KfQovKgogKiByZXR1cm5zIFBvbHlnb24gZ2VvbWV0cnkgd2hlcmUgY29vcmRpbmF0ZXMgZGVmaW5lIGEgYm91bmRpbmcgYm94IHRoYXQgY29udGFpbnMgdGhlIGlucHV0IGdlb21ldHJ5CiAqLwoKCmZ1bmN0aW9uIGdldEJvdW5kaW5nQm94R2VvbWV0cnkoZ2VvbWV0cnkpIHsKICBlbnN1cmVHZW9tZXRyeVR5cGUoZ2VvbWV0cnkudHlwZSwgW19jb25zdGFudHMuR0VPX0pTT05fVFlQRS5QT0xZR09OXSk7CiAgdmFyIGV4dGVyaW9yID0gZ2VvbWV0cnkuY29vcmRpbmF0ZXNbX2NvbnN0YW50cy5QT0xZR09OX0NPT1JESU5BVEVTX0VYVEVSSU9SX0lOREVYXTsKICB2YXIgZXh0ZW50ID0gewogICAgbWluTG9uOiBleHRlcmlvclswXVtfY29uc3RhbnRzLkxPTl9JTkRFWF0sCiAgICBtaW5MYXQ6IGV4dGVyaW9yWzBdW19jb25zdGFudHMuTEFUX0lOREVYXSwKICAgIG1heExvbjogZXh0ZXJpb3JbMF1bX2NvbnN0YW50cy5MT05fSU5ERVhdLAogICAgbWF4TGF0OiBleHRlcmlvclswXVtfY29uc3RhbnRzLkxBVF9JTkRFWF0KICB9OwoKICBmb3IgKHZhciBpID0gMTsgaSA8IGV4dGVyaW9yLmxlbmd0aDsgaSsrKSB7CiAgICBleHRlbnQubWluTG9uID0gTWF0aC5taW4oZXh0ZXJpb3JbaV1bX2NvbnN0YW50cy5MT05fSU5ERVhdLCBleHRlbnQubWluTG9uKTsKICAgIGV4dGVudC5taW5MYXQgPSBNYXRoLm1pbihleHRlcmlvcltpXVtfY29uc3RhbnRzLkxBVF9JTkRFWF0sIGV4dGVudC5taW5MYXQpOwogICAgZXh0ZW50Lm1heExvbiA9IE1hdGgubWF4KGV4dGVyaW9yW2ldW19jb25zdGFudHMuTE9OX0lOREVYXSwgZXh0ZW50Lm1heExvbik7CiAgICBleHRlbnQubWF4TGF0ID0gTWF0aC5tYXgoZXh0ZXJpb3JbaV1bX2NvbnN0YW50cy5MQVRfSU5ERVhdLCBleHRlbnQubWF4TGF0KTsKICB9CgogIHJldHVybiBjb252ZXJ0TWFwRXh0ZW50VG9Qb2x5Z29uKGV4dGVudCk7Cn0KCmZ1bmN0aW9uIGZvcm1hdEVudmVsb3BlQXNQb2x5Z29uKF9yZWYzKSB7CiAgdmFyIG1heExhdCA9IF9yZWYzLm1heExhdCwKICAgICAgbWF4TG9uID0gX3JlZjMubWF4TG9uLAogICAgICBtaW5MYXQgPSBfcmVmMy5taW5MYXQsCiAgICAgIG1pbkxvbiA9IF9yZWYzLm1pbkxvbjsKICAvLyBHZW9KU09OIG1hbmRhdGVzIHRoYXQgdGhlIG91dGVyIHBvbHlnb24gbXVzdCBiZSBjb3VudGVyY2xvY2t3aXNlIHRvIGF2b2lkIGFtYmlndW91cyBwb2x5Z29ucwogIC8vIHdoZW4gdGhlIHNoYXBlIGNyb3NzZXMgdGhlIGRhdGVsaW5lCiAgdmFyIGxlZnQgPSBtaW5Mb247CiAgdmFyIHJpZ2h0ID0gbWF4TG9uOwogIHZhciB0b3AgPSBtYXhMYXQgPiA5MCA/IDkwIDogbWF4TGF0OwogIHZhciBib3R0b20gPSBtaW5MYXQgPCAtOTAgPyAtOTAgOiBtaW5MYXQ7CiAgdmFyIHRvcExlZnQgPSBbbGVmdCwgdG9wXTsKICB2YXIgYm90dG9tTGVmdCA9IFtsZWZ0LCBib3R0b21dOwogIHZhciBib3R0b21SaWdodCA9IFtyaWdodCwgYm90dG9tXTsKICB2YXIgdG9wUmlnaHQgPSBbcmlnaHQsIHRvcF07CiAgcmV0dXJuIHsKICAgIHR5cGU6IF9jb25zdGFudHMuR0VPX0pTT05fVFlQRS5QT0xZR09OLAogICAgY29vcmRpbmF0ZXM6IFtbdG9wTGVmdCwgYm90dG9tTGVmdCwgYm90dG9tUmlnaHQsIHRvcFJpZ2h0LCB0b3BMZWZ0XV0KICB9Owp9Ci8qCiAqIENvbnZlcnQgbWFwIGJvdW5kcyB0byBwb2x5Z29uCiAqLwoKCmZ1bmN0aW9uIGNvbnZlcnRNYXBFeHRlbnRUb1BvbHlnb24oX3JlZjQpIHsKICB2YXIgbWF4TGF0ID0gX3JlZjQubWF4TGF0LAogICAgICBtYXhMb24gPSBfcmVmNC5tYXhMb24sCiAgICAgIG1pbkxhdCA9IF9yZWY0Lm1pbkxhdCwKICAgICAgbWluTG9uID0gX3JlZjQubWluTG9uOwogIHZhciBsb25EZWx0YSA9IG1heExvbiAtIG1pbkxvbjsKCiAgaWYgKGxvbkRlbHRhID49IDM2MCkgewogICAgcmV0dXJuIGZvcm1hdEVudmVsb3BlQXNQb2x5Z29uKHsKICAgICAgbWF4TGF0OiBtYXhMYXQsCiAgICAgIG1heExvbjogMTgwLAogICAgICBtaW5MYXQ6IG1pbkxhdCwKICAgICAgbWluTG9uOiAtMTgwCiAgICB9KTsKICB9CgogIGlmIChtYXhMb24gPiAxODApIHsKICAgIC8vIGJvdW5kcyBjcm9zcyBkYXRlbGluZSBlYXN0IHRvIHdlc3QKICAgIHZhciBvdmVybGFwV2VzdE9mRGF0ZUxpbmUgPSBtYXhMb24gLSAxODA7CiAgICByZXR1cm4gZm9ybWF0RW52ZWxvcGVBc1BvbHlnb24oewogICAgICBtYXhMYXQ6IG1heExhdCwKICAgICAgbWF4TG9uOiAtMTgwICsgb3ZlcmxhcFdlc3RPZkRhdGVMaW5lLAogICAgICBtaW5MYXQ6IG1pbkxhdCwKICAgICAgbWluTG9uOiBtaW5Mb24KICAgIH0pOwogIH0KCiAgaWYgKG1pbkxvbiA8IC0xODApIHsKICAgIC8vIGJvdW5kcyBjcm9zcyBkYXRlbGluZSB3ZXN0IHRvIGVhc3QKICAgIHZhciBvdmVybGFwRWFzdE9mRGF0ZUxpbmUgPSBNYXRoLmFicyhtaW5Mb24pIC0gMTgwOwogICAgcmV0dXJuIGZvcm1hdEVudmVsb3BlQXNQb2x5Z29uKHsKICAgICAgbWF4TGF0OiBtYXhMYXQsCiAgICAgIG1heExvbjogbWF4TG9uLAogICAgICBtaW5MYXQ6IG1pbkxhdCwKICAgICAgbWluTG9uOiAxODAgLSBvdmVybGFwRWFzdE9mRGF0ZUxpbmUKICAgIH0pOwogIH0KCiAgcmV0dXJuIGZvcm1hdEVudmVsb3BlQXNQb2x5Z29uKHsKICAgIG1heExhdDogbWF4TGF0LAogICAgbWF4TG9uOiBtYXhMb24sCiAgICBtaW5MYXQ6IG1pbkxhdCwKICAgIG1pbkxvbjogbWluTG9uCiAgfSk7Cn0KCmZ1bmN0aW9uIGNsYW1wVG9MYXRCb3VuZHMobGF0KSB7CiAgcmV0dXJuIGNsYW1wKGxhdCwgLTg5LCA4OSk7Cn0KCmZ1bmN0aW9uIGNsYW1wVG9Mb25Cb3VuZHMobG9uKSB7CiAgcmV0dXJuIGNsYW1wKGxvbiwgLTE4MCwgMTgwKTsKfQoKZnVuY3Rpb24gY2xhbXAodmFsLCBtaW4sIG1heCkgewogIGlmICh2YWwgPiBtYXgpIHsKICAgIHJldHVybiBtYXg7CiAgfSBlbHNlIGlmICh2YWwgPCBtaW4pIHsKICAgIHJldHVybiBtaW47CiAgfSBlbHNlIHsKICAgIHJldHVybiB2YWw7CiAgfQp9"},null]}