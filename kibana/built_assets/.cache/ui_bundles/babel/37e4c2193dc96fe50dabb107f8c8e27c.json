{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/index_management/public/application/components/mappings_editor/constants/data_types_definition.js","dependencies":[{"path":"x-pack/plugins/index_management/public/application/components/mappings_editor/constants/data_types_definition.js","mtime":1589249554116},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkFMTF9EQVRBX1RZUEVTID0gZXhwb3J0cy5TVUJfVFlQRV9NQVBfVE9fTUFJTiA9IGV4cG9ydHMuTUFJTl9EQVRBX1RZUEVfREVGSU5JVElPTiA9IGV4cG9ydHMuTUFJTl9UWVBFUyA9IGV4cG9ydHMuVFlQRV9ERUZJTklUSU9OID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfcmVhY3QyID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9kb2N1bWVudGF0aW9uID0gcmVxdWlyZSgiLi4vLi4vLi4vc2VydmljZXMvZG9jdW1lbnRhdGlvbiIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgewogIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsKICBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09ICJbb2JqZWN0IEFyZ3VtZW50c10iKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHsKICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgIGFycjJbaV0gPSBhcnJbaV07CiAgICB9CgogICAgcmV0dXJuIGFycjI7CiAgfQp9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgewogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIFRZUEVfREVGSU5JVElPTiA9IHsKICB0ZXh0OiB7CiAgICB2YWx1ZTogJ3RleHQnLAogICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLnRleHREZXNjcmlwdGlvbicsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdUZXh0JwogICAgfSksCiAgICBkb2N1bWVudGF0aW9uOiB7CiAgICAgIG1haW46ICcvdGV4dC5odG1sJwogICAgfSwKICAgIGRlc2NyaXB0aW9uOiBmdW5jdGlvbiBkZXNjcmlwdGlvbigpIHsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS50ZXh0TG9uZ0Rlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlRleHQgZmllbGRzIHN1cHBvcnQgZnVsbC10ZXh0IHNlYXJjaCBieSBicmVha2luZyBzdHJpbmdzIGludG8gaW5kaXZpZHVhbCwgc2VhcmNoYWJsZSB0ZXJtcy4gVG8gaW5kZXggc3RydWN0dXJlZCBjb250ZW50LCBzdWNoIGFzIGFuIGVtYWlsIGFkZHJlc3MsIHVzZSB0aGUge2tleXdvcmR9LiIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBrZXl3b3JkOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpTGluaywgewogICAgICAgICAgICBocmVmOiBfZG9jdW1lbnRhdGlvbi5kb2N1bWVudGF0aW9uU2VydmljZS5nZXRUeXBlRG9jTGluaygna2V5d29yZCcpLAogICAgICAgICAgICB0YXJnZXQ6ICJfYmxhbmsiCiAgICAgICAgICB9LCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS50ZXh0TG9uZ0Rlc2NyaXB0aW9uLmtleXdvcmRUeXBlTGluaycsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdrZXl3b3JkIGRhdGEgdHlwZScKICAgICAgICAgIH0pKQogICAgICAgIH0KICAgICAgfSkpOwogICAgfQogIH0sCiAga2V5d29yZDogewogICAgdmFsdWU6ICdrZXl3b3JkJywKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5rZXl3b3JkRGVzY3JpcHRpb24nLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnS2V5d29yZCcKICAgIH0pLAogICAgZG9jdW1lbnRhdGlvbjogewogICAgICBtYWluOiAnL2tleXdvcmQuaHRtbCcKICAgIH0sCiAgICBkZXNjcmlwdGlvbjogZnVuY3Rpb24gZGVzY3JpcHRpb24oKSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUua2V5d29yZExvbmdEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJLZXl3b3JkIGZpZWxkcyBzdXBwb3J0IHNlYXJjaGluZyBmb3IgYW4gZXhhY3QgdmFsdWUgYW5kIGFyZSB1c2VmdWwgZm9yIGZpbHRlcmluZywgc29ydGluZywgYW5kIGFnZ3JlZ2F0aW9ucy4gVG8gaW5kZXggZnVsbC10ZXh0IGNvbnRlbnQsIHN1Y2ggYXMgYW4gZW1haWwgYm9keSwgdXNlIHRoZSB7dGV4dFR5cGV9LiIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICB0ZXh0VHlwZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUxpbmssIHsKICAgICAgICAgICAgaHJlZjogX2RvY3VtZW50YXRpb24uZG9jdW1lbnRhdGlvblNlcnZpY2UuZ2V0VHlwZURvY0xpbmsoJ3RleHQnKSwKICAgICAgICAgICAgdGFyZ2V0OiAiX2JsYW5rIgogICAgICAgICAgfSwgX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUua2V5d29yZExvbmdEZXNjcmlwdGlvbi50ZXh0VHlwZUxpbmsnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAndGV4dCBkYXRhIHR5cGUnCiAgICAgICAgICB9KSkKICAgICAgICB9CiAgICAgIH0pKTsKICAgIH0KICB9LAogIG51bWVyaWM6IHsKICAgIHZhbHVlOiAnbnVtZXJpYycsCiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUubnVtZXJpY0Rlc2NyaXB0aW9uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ051bWVyaWMnCiAgICB9KSwKICAgIGRvY3VtZW50YXRpb246IHsKICAgICAgbWFpbjogJy9udW1iZXIuaHRtbCcKICAgIH0sCiAgICBzdWJUeXBlczogewogICAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUubnVtZXJpY1N1YnR5cGVEZXNjcmlwdGlvbicsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ051bWVyaWMgdHlwZScKICAgICAgfSksCiAgICAgIHR5cGVzOiBbJ2J5dGUnLCAnZG91YmxlJywgJ2Zsb2F0JywgJ2hhbGZfZmxvYXQnLCAnaW50ZWdlcicsICdsb25nJywgJ3NjYWxlZF9mbG9hdCcsICdzaG9ydCddCiAgICB9CiAgfSwKICBieXRlOiB7CiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUuYnl0ZURlc2NyaXB0aW9uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0J5dGUnCiAgICB9KSwKICAgIHZhbHVlOiAnYnl0ZScsCiAgICBkZXNjcmlwdGlvbjogZnVuY3Rpb24gZGVzY3JpcHRpb24oKSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUuYnl0ZUxvbmdEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJCeXRlIGZpZWxkcyBhY2NlcHQgYSBzaWduZWQgOC1iaXQgaW50ZWdlciB3aXRoIGEgbWluaW11bSB2YWx1ZSBvZiB7bWluVmFsdWV9IGFuZCBhIG1heGltdW0gdmFsdWUgb2Yge21heFZhbHVlfS4iLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgbWluVmFsdWU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDb2RlLCBudWxsLCAiLTEyOCIpLAogICAgICAgICAgbWF4VmFsdWU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDb2RlLCBudWxsLCAiMTI3IikKICAgICAgICB9CiAgICAgIH0pKTsKICAgIH0KICB9LAogIGRvdWJsZTogewogICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLmRvdWJsZURlc2NyaXB0aW9uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0RvdWJsZScKICAgIH0pLAogICAgdmFsdWU6ICdkb3VibGUnLAogICAgZGVzY3JpcHRpb246IGZ1bmN0aW9uIGRlc2NyaXB0aW9uKCkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLmRvdWJsZUxvbmdEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJEb3VibGUgZmllbGRzIGFjY2VwdCBhIGRvdWJsZS1wcmVjaXNpb24gNjQtYml0IGZsb2F0aW5nIHBvaW50IG51bWJlciwgcmVzdHJpY3RlZCB0byBmaW5pdGUgdmFsdWVzIChJRUVFIDc1NCkuIgogICAgICB9KSk7CiAgICB9CiAgfSwKICBpbnRlZ2VyOiB7CiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUuaW50ZWdlckRlc2NyaXB0aW9uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0ludGVnZXInCiAgICB9KSwKICAgIHZhbHVlOiAnaW50ZWdlcicsCiAgICBkZXNjcmlwdGlvbjogZnVuY3Rpb24gZGVzY3JpcHRpb24oKSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUuaW50ZWdlckxvbmdEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJJbnRlZ2VyIGZpZWxkcyBhY2NlcHQgYSBzaWduZWQgMzItYml0IGludGVnZXIgd2l0aCBhIG1pbmltdW0gdmFsdWUgb2Yge21pblZhbHVlfSBhbmQgYSBtYXhpbXVtIHZhbHVlIG9mIHttYXhWYWx1ZX0uIiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIG1pblZhbHVlOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ29kZSwgbnVsbCwgIi0yIiwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgic3VwIiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJldWktYWxpZ25Ub3AiCiAgICAgICAgICB9LCAiMzEiKSksCiAgICAgICAgICBtYXhWYWx1ZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNvZGUsIG51bGwsICIyIiwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgic3VwIiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJldWktYWxpZ25Ub3AiCiAgICAgICAgICB9LCAiMzEiKSwgIi0xIikKICAgICAgICB9CiAgICAgIH0pKTsKICAgIH0KICB9LAogIGxvbmc6IHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5sb25nRGVzY3JpcHRpb24nLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTG9uZycKICAgIH0pLAogICAgdmFsdWU6ICdsb25nJywKICAgIGRlc2NyaXB0aW9uOiBmdW5jdGlvbiBkZXNjcmlwdGlvbigpIHsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5sb25nTG9uZ0Rlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkxvbmcgZmllbGRzIGFjY2VwdCBhIHNpZ25lZCA2NC1iaXQgaW50ZWdlciB3aXRoIGEgbWluaW11bSB2YWx1ZSBvZiB7bWluVmFsdWV9IGFuZCBhIG1heGltdW0gdmFsdWUgb2Yge21heFZhbHVlfS4iLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgbWluVmFsdWU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDb2RlLCBudWxsLCAiLTIiLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJzdXAiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImV1aS1hbGlnblRvcCIKICAgICAgICAgIH0sICI2MyIpKSwKICAgICAgICAgIG1heFZhbHVlOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ29kZSwgbnVsbCwgIjIiLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJzdXAiLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogImV1aS1hbGlnblRvcCIKICAgICAgICAgIH0sICI2MyIpLCAiLTEiKQogICAgICAgIH0KICAgICAgfSkpOwogICAgfQogIH0sCiAgZmxvYXQ6IHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5mbG9hdERlc2NyaXB0aW9uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0Zsb2F0JwogICAgfSksCiAgICB2YWx1ZTogJ2Zsb2F0JywKICAgIGRlc2NyaXB0aW9uOiBmdW5jdGlvbiBkZXNjcmlwdGlvbigpIHsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5mbG9hdExvbmdEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJGbG9hdCBmaWVsZHMgYWNjZXB0IGEgc2luZ2xlLXByZWNpc2lvbiAzMi1iaXQgZmxvYXRpbmcgcG9pbnQgbnVtYmVyLCByZXN0cmljdGVkIHRvIGZpbml0ZSB2YWx1ZXMgKElFRUUgNzU0KS4iCiAgICAgIH0pKTsKICAgIH0KICB9LAogIGhhbGZfZmxvYXQ6IHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5oYWxmRmxvYXREZXNjcmlwdGlvbicsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdIYWxmIGZsb2F0JwogICAgfSksCiAgICB2YWx1ZTogJ2hhbGZfZmxvYXQnLAogICAgZGVzY3JpcHRpb246IGZ1bmN0aW9uIGRlc2NyaXB0aW9uKCkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLmhhbGZGbG9hdExvbmdEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJIYWxmLWZsb2F0IGZpZWxkcyBhY2NlcHQgYSBoYWxmLXByZWNpc2lvbiAxNi1iaXQgZmxvYXRpbmcgcG9pbnQgbnVtYmVyLCByZXN0cmljdGVkIHRvIGZpbml0ZSB2YWx1ZXMgKElFRUUgNzU0KS4iCiAgICAgIH0pKTsKICAgIH0KICB9LAogIHNjYWxlZF9mbG9hdDogewogICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLnNjYWxlZEZsb2F0RGVzY3JpcHRpb24nLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU2NhbGVkIGZsb2F0JwogICAgfSksCiAgICB2YWx1ZTogJ3NjYWxlZF9mbG9hdCcsCiAgICBkZXNjcmlwdGlvbjogZnVuY3Rpb24gZGVzY3JpcHRpb24oKSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUuc2NhbGVkRmxvYXRMb25nRGVzY3JpcHRpb24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU2NhbGVkLWZsb2F0IGZpZWxkcyBhY2NlcHQgYSBmbG9hdGluZyBwb2ludCBudW1iZXIgdGhhdCBpcyBiYWNrZWQgYnkgYSB7bG9uZ1R5cGV9IGFuZCBzY2FsZWQgYnkgYSBmaXhlZCB7ZG91YmxlVHlwZX0gc2NhbGluZyBmYWN0b3IuIFVzZSB0aGlzIGRhdGEgdHlwZSB0byBzdG9yZSBmbG9hdGluZyBwb2ludCBkYXRhIGludG8gYW4gaW50ZWdlciB1c2luZyBhIHNjYWxpbmcgZmFjdG9yLiBUaGlzIHNhdmVzIGRpc2sgc3BhY2UsIGJ1dCBhZmZlY3RzIGFjY3VyYWN5LiIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBsb25nVHlwZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNvZGUsIG51bGwsICJsb25nIiksCiAgICAgICAgICBkb3VibGVUeXBlOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ29kZSwgbnVsbCwgImRvdWJsZSIpCiAgICAgICAgfQogICAgICB9KSk7CiAgICB9CiAgfSwKICBzaG9ydDogewogICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLnNob3J0RGVzY3JpcHRpb24nLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU2hvcnQnCiAgICB9KSwKICAgIHZhbHVlOiAnc2hvcnQnLAogICAgZGVzY3JpcHRpb246IGZ1bmN0aW9uIGRlc2NyaXB0aW9uKCkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLnNob3J0TG9uZ0Rlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlNob3J0IGZpZWxkcyBhY2NlcHQgYSBzaWduZWQgMTYtYml0IGludGVnZXIgd2l0aCBhIG1pbmltdW0gdmFsdWUgb2Yge21pblZhbHVlfSBhbmQgYSBtYXhpbXVtIHZhbHVlIG9mIHttYXhWYWx1ZX0uIiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIG1pblZhbHVlOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ29kZSwgbnVsbCwgIi0zMiw3NjgiKSwKICAgICAgICAgIG1heFZhbHVlOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ29kZSwgbnVsbCwgIjMyLDc2NyIpCiAgICAgICAgfQogICAgICB9KSk7CiAgICB9CiAgfSwKICBkYXRlOiB7CiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUuZGF0ZURlc2NyaXB0aW9uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0RhdGUnCiAgICB9KSwKICAgIHZhbHVlOiAnZGF0ZScsCiAgICBkb2N1bWVudGF0aW9uOiB7CiAgICAgIG1haW46ICcvZGF0ZS5odG1sJwogICAgfSwKICAgIGRlc2NyaXB0aW9uOiBmdW5jdGlvbiBkZXNjcmlwdGlvbigpIHsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5kYXRlTG9uZ0Rlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkRhdGUgZmllbGRzIGFjY2VwdCBzdHJpbmdzIHdpdGggZm9ybWF0dGVkIGRhdGVzIChcIjIwMTUvMDEvMDEgMTI6MTA6MzBcIiksIGxvbmcgbnVtYmVycyByZXByZXNlbnRpbmcgbWlsbGlzZWNvbmRzIHNpbmNlIHRoZSBlcG9jaCwgYW5kIGludGVnZXJzIHJlcHJlc2VudGluZyBzZWNvbmRzIHNpbmNlIHRoZSBlcG9jaC4gTXVsdGlwbGUgZGF0ZSBmb3JtYXRzIGFyZSBhbGxvd2VkLiBEYXRlcyB3aXRoIHRpbWV6b25lcyBhcmUgY29udmVydGVkIHRvIFVUQy4iCiAgICAgIH0pKTsKICAgIH0KICB9LAogIGRhdGVfbmFub3M6IHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5kYXRlTmFub3NEZXNjcmlwdGlvbicsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdEYXRlIG5hbm9zZWNvbmRzJwogICAgfSksCiAgICB2YWx1ZTogJ2RhdGVfbmFub3MnLAogICAgZG9jdW1lbnRhdGlvbjogewogICAgICBtYWluOiAnL2RhdGVfbmFub3MuaHRtbCcKICAgIH0sCiAgICBkZXNjcmlwdGlvbjogZnVuY3Rpb24gZGVzY3JpcHRpb24oKSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUuZGF0ZU5hbm9zTG9uZ0Rlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkRhdGUgbmFub3NlY29uZHMgZmllbGRzIHN0b3JlIGRhdGVzIGluIG5hbm9zZWNvbmQgcmVzb2x1dGlvbi4gQWdncmVnYXRpb25zIHJlbWFpbiBpbiBtaWxsaXNlY29uZCByZXNvbHV0aW9uLiBUbyBzdG9yZSBkYXRlcyBpbiBtaWxsaXNlY29uZCByZXNvbHV0aW9uLCB1c2UgdGhlIHtkYXRlfS4iLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgZGF0ZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUxpbmssIHsKICAgICAgICAgICAgaHJlZjogX2RvY3VtZW50YXRpb24uZG9jdW1lbnRhdGlvblNlcnZpY2UuZ2V0VHlwZURvY0xpbmsoJ2RhdGUnKSwKICAgICAgICAgICAgdGFyZ2V0OiAiX2JsYW5rIgogICAgICAgICAgfSwgX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUuZGF0ZU5hbm9zTG9uZ0Rlc2NyaXB0aW9uLmRhdGVUeXBlTGluaycsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdkYXRlIGRhdGEgdHlwZScKICAgICAgICAgIH0pKQogICAgICAgIH0KICAgICAgfSkpOwogICAgfQogIH0sCiAgYmluYXJ5OiB7CiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUuYmluYXJ5RGVzY3JpcHRpb24nLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQmluYXJ5JwogICAgfSksCiAgICB2YWx1ZTogJ2JpbmFyeScsCiAgICBkb2N1bWVudGF0aW9uOiB7CiAgICAgIG1haW46ICcvYmluYXJ5Lmh0bWwnCiAgICB9LAogICAgZGVzY3JpcHRpb246IGZ1bmN0aW9uIGRlc2NyaXB0aW9uKCkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLmJpbmFyeUxvbmdEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJCaW5hcnkgZmllbGRzIGFjY2VwdCBhIGJpbmFyeSB2YWx1ZSBhcyBhIEJhc2U2NC1lbmNvZGVkIHN0cmluZy4gQnkgZGVmYXVsdCwgYmluYXJ5IGZpZWxkcyBhcmUgbm90IHN0b3JlZCBvciBzZWFyY2hhYmxlLiIKICAgICAgfSkpOwogICAgfQogIH0sCiAgaXA6IHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5pcERlc2NyaXB0aW9uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0lQJwogICAgfSksCiAgICB2YWx1ZTogJ2lwJywKICAgIGRvY3VtZW50YXRpb246IHsKICAgICAgbWFpbjogJy9pcC5odG1sJwogICAgfSwKICAgIGRlc2NyaXB0aW9uOiBmdW5jdGlvbiBkZXNjcmlwdGlvbigpIHsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5pcExvbmdEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJJUCBmaWVsZHMgYWNjZXB0IElQdjQgb3IgSVB2NiBhZGRyZXNzZXMuIElmIHlvdSBuZWVkIHRvIHN0b3JlIElQIHJhbmdlcyBpbiBhIHNpbmdsZSBmaWVsZCwgdXNlIHRoZSB7aXBSYW5nZX0uIiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGlwUmFuZ2U6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlMaW5rLCB7CiAgICAgICAgICAgIGhyZWY6IF9kb2N1bWVudGF0aW9uLmRvY3VtZW50YXRpb25TZXJ2aWNlLmdldFR5cGVEb2NMaW5rKCdyYW5nZScpLAogICAgICAgICAgICB0YXJnZXQ6ICJfYmxhbmsiCiAgICAgICAgICB9LCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5pcExvbmdEZXNjcmlwdGlvbi5pcFJhbmdlVHlwZUxpbmsnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnSVAgcmFuZ2UgZGF0YSB0eXBlJwogICAgICAgICAgfSkpCiAgICAgICAgfQogICAgICB9KSk7CiAgICB9CiAgfSwKICBib29sZWFuOiB7CiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUuYm9vbGVhbkRlc2NyaXB0aW9uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0Jvb2xlYW4nCiAgICB9KSwKICAgIHZhbHVlOiAnYm9vbGVhbicsCiAgICBkb2N1bWVudGF0aW9uOiB7CiAgICAgIG1haW46ICcvYm9vbGVhbi5odG1sJwogICAgfSwKICAgIGRlc2NyaXB0aW9uOiBmdW5jdGlvbiBkZXNjcmlwdGlvbigpIHsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5ib29sZWFuTG9uZ0Rlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkJvb2xlYW4gZmllbGRzIGFjY2VwdCBKU09OIHt0cnVlfSBhbmQge2ZhbHNlfSB2YWx1ZXMsIGFzIHdlbGwgYXMgc3RyaW5ncyB3aGljaCBhcmUgaW50ZXJwcmV0ZWQgYXMgdHJ1ZSBvciBmYWxzZS4iLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgdHJ1ZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNvZGUsIG51bGwsICJ0cnVlIiksCiAgICAgICAgICBmYWxzZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNvZGUsIG51bGwsICJmYWxzZSIpCiAgICAgICAgfQogICAgICB9KSk7CiAgICB9CiAgfSwKICByYW5nZTogewogICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLnJhbmdlRGVzY3JpcHRpb24nLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmFuZ2UnCiAgICB9KSwKICAgIHZhbHVlOiAncmFuZ2UnLAogICAgZG9jdW1lbnRhdGlvbjogewogICAgICBtYWluOiAnL3JhbmdlLmh0bWwnCiAgICB9LAogICAgc3ViVHlwZXM6IHsKICAgICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLnJhbmdlU3VidHlwZURlc2NyaXB0aW9uJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmFuZ2UgdHlwZScKICAgICAgfSksCiAgICAgIHR5cGVzOiBbJ2RhdGVfcmFuZ2UnLCAnZG91YmxlX3JhbmdlJywgJ2Zsb2F0X3JhbmdlJywgJ2ludGVnZXJfcmFuZ2UnLCAnaXBfcmFuZ2UnLCAnbG9uZ19yYW5nZSddCiAgICB9CiAgfSwKICBvYmplY3Q6IHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5vYmplY3REZXNjcmlwdGlvbicsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdPYmplY3QnCiAgICB9KSwKICAgIHZhbHVlOiAnb2JqZWN0JywKICAgIGRvY3VtZW50YXRpb246IHsKICAgICAgbWFpbjogJy9vYmplY3QuaHRtbCcKICAgIH0sCiAgICBkZXNjcmlwdGlvbjogZnVuY3Rpb24gZGVzY3JpcHRpb24oKSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUub2JqZWN0TG9uZ0Rlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIk9iamVjdCBmaWVsZHMgY2FuIGNvbnRhaW4gY2hpbGRyZW4sIHdoaWNoIGFyZSBxdWVyaWVkIGFzIGEgZmxhdHRlbmVkIGxpc3QuIFRvIHF1ZXJ5IGNoaWxkIG9iamVjdHMgaW5kZXBlbmRlbnRseSwgdXNlIHRoZSB7bmVzdGVkfS4iLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgbmVzdGVkOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpTGluaywgewogICAgICAgICAgICBocmVmOiBfZG9jdW1lbnRhdGlvbi5kb2N1bWVudGF0aW9uU2VydmljZS5nZXRUeXBlRG9jTGluaygnbmVzdGVkJyksCiAgICAgICAgICAgIHRhcmdldDogIl9ibGFuayIKICAgICAgICAgIH0sIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLm9iamVjdExvbmdEZXNjcmlwdGlvbi5uZXN0ZWRUeXBlTGluaycsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICduZXN0ZWQgZGF0YSB0eXBlJwogICAgICAgICAgfSkpCiAgICAgICAgfQogICAgICB9KSk7CiAgICB9CiAgfSwKICBuZXN0ZWQ6IHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5uZXN0ZWREZXNjcmlwdGlvbicsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdOZXN0ZWQnCiAgICB9KSwKICAgIHZhbHVlOiAnbmVzdGVkJywKICAgIGRvY3VtZW50YXRpb246IHsKICAgICAgbWFpbjogJy9uZXN0ZWQuaHRtbCcKICAgIH0sCiAgICBkZXNjcmlwdGlvbjogZnVuY3Rpb24gZGVzY3JpcHRpb24oKSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUubmVzdGVkTG9uZ0Rlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkxpa2Uge29iamVjdHN9LCBuZXN0ZWQgZmllbGRzIGNhbiBjb250YWluIGNoaWxkcmVuLiBUaGUgZGlmZmVyZW5jZSBpcyB0aGF0IHlvdSBjYW4gcXVlcnkgdGhlaXIgY2hpbGQgb2JqZWN0cyBpbmRlcGVuZGVudGx5LiIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBvYmplY3RzOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpTGluaywgewogICAgICAgICAgICBocmVmOiBfZG9jdW1lbnRhdGlvbi5kb2N1bWVudGF0aW9uU2VydmljZS5nZXRUeXBlRG9jTGluaygnb2JqZWN0JyksCiAgICAgICAgICAgIHRhcmdldDogIl9ibGFuayIKICAgICAgICAgIH0sIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLm5lc3RlZExvbmdEZXNjcmlwdGlvbi5vYmplY3RUeXBlTGluaycsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdvYmplY3RzJwogICAgICAgICAgfSkpCiAgICAgICAgfQogICAgICB9KSk7CiAgICB9CiAgfSwKICByYW5rX2ZlYXR1cmU6IHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5yYW5rRmVhdHVyZURlc2NyaXB0aW9uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ1JhbmsgZmVhdHVyZScKICAgIH0pLAogICAgdmFsdWU6ICdyYW5rX2ZlYXR1cmUnLAogICAgZG9jdW1lbnRhdGlvbjogewogICAgICBtYWluOiAnL3JhbmstZmVhdHVyZS5odG1sJwogICAgfSwKICAgIGRlc2NyaXB0aW9uOiBmdW5jdGlvbiBkZXNjcmlwdGlvbigpIHsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5yYW5rRmVhdHVyZUxvbmdEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJUaGUgcmFuayBmZWF0dXJlIGZpZWxkIGFjY2VwdHMgYSBudW1iZXIgdGhhdCB3aWxsIGJvb3N0IGRvY3VtZW50cyBpbiB7cmFua0ZlYXR1cmVRdWVyeX0uIiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIHJhbmtGZWF0dXJlUXVlcnk6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlMaW5rLCB7CiAgICAgICAgICAgIGhyZWY6IF9kb2N1bWVudGF0aW9uLmRvY3VtZW50YXRpb25TZXJ2aWNlLmdldFJhbmtGZWF0dXJlUXVlcnlMaW5rKCksCiAgICAgICAgICAgIHRhcmdldDogIl9ibGFuayIKICAgICAgICAgIH0sIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLnJhbmtGZWF0dXJlTG9uZ0Rlc2NyaXB0aW9uLnF1ZXJ5TGluaycsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdyYW5rX2ZlYXR1cmUgcXVlcmllcycKICAgICAgICAgIH0pKQogICAgICAgIH0KICAgICAgfSkpOwogICAgfQogIH0sCiAgcmFua19mZWF0dXJlczogewogICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLnJhbmtGZWF0dXJlc0Rlc2NyaXB0aW9uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ1JhbmsgZmVhdHVyZXMnCiAgICB9KSwKICAgIHZhbHVlOiAncmFua19mZWF0dXJlcycsCiAgICBkb2N1bWVudGF0aW9uOiB7CiAgICAgIG1haW46ICcvcmFuay1mZWF0dXJlcy5odG1sJwogICAgfSwKICAgIGRlc2NyaXB0aW9uOiBmdW5jdGlvbiBkZXNjcmlwdGlvbigpIHsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5yYW5rRmVhdHVyZXNMb25nRGVzY3JpcHRpb24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVGhlIHJhbmsgZmVhdHVyZXMgZmllbGQgYWNjZXB0cyBudW1lcmljIHZlY3RvcnMgdGhhdCB3aWxsIGJvb3N0IGRvY3VtZW50cyBpbiB7cmFua0ZlYXR1cmVRdWVyeX0uIiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIHJhbmtGZWF0dXJlUXVlcnk6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlMaW5rLCB7CiAgICAgICAgICAgIGhyZWY6IF9kb2N1bWVudGF0aW9uLmRvY3VtZW50YXRpb25TZXJ2aWNlLmdldFJhbmtGZWF0dXJlUXVlcnlMaW5rKCksCiAgICAgICAgICAgIHRhcmdldDogIl9ibGFuayIKICAgICAgICAgIH0sIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLnJhbmtGZWF0dXJlc0xvbmdEZXNjcmlwdGlvbi5xdWVyeUxpbmsnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAncmFua19mZWF0dXJlIHF1ZXJpZXMnCiAgICAgICAgICB9KSkKICAgICAgICB9CiAgICAgIH0pKTsKICAgIH0KICB9LAogIGRlbnNlX3ZlY3RvcjogewogICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLmRlbnNlVmVjdG9yRGVzY3JpcHRpb24nLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRGVuc2UgdmVjdG9yJwogICAgfSksCiAgICB2YWx1ZTogJ2RlbnNlX3ZlY3RvcicsCiAgICBkb2N1bWVudGF0aW9uOiB7CiAgICAgIG1haW46ICcvZGVuc2UtdmVjdG9yLmh0bWwnCiAgICB9LAogICAgZGVzY3JpcHRpb246IGZ1bmN0aW9uIGRlc2NyaXB0aW9uKCkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLmRlbnNlVmVjdG9yTG9uZ0Rlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkRlbnNlIHZlY3RvciBmaWVsZHMgc3RvcmUgdmVjdG9ycyBvZiBmbG9hdCB2YWx1ZXMsIHVzZWZ1bCBmb3IgZG9jdW1lbnQgc2NvcmluZy4iCiAgICAgIH0pKTsKICAgIH0KICB9LAogIGRhdGVfcmFuZ2U6IHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5kYXRlUmFuZ2VEZXNjcmlwdGlvbicsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdEYXRlIHJhbmdlJwogICAgfSksCiAgICB2YWx1ZTogJ2RhdGVfcmFuZ2UnLAogICAgZGVzY3JpcHRpb246IGZ1bmN0aW9uIGRlc2NyaXB0aW9uKCkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLmRhdGVSYW5nZUxvbmdEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJEYXRlIHJhbmdlIGZpZWxkcyBhY2NlcHQgYW4gdW5zaWduZWQgNjQtYml0IGludGVnZXIgcmVwcmVzZW50aW5nIG1pbGxpc2Vjb25kcyBzaW5jZSB0aGUgc3lzdGVtIGVwb2NoLiIKICAgICAgfSkpOwogICAgfQogIH0sCiAgZG91YmxlX3JhbmdlOiB7CiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUuZG91YmxlUmFuZ2VEZXNjcmlwdGlvbicsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdEb3VibGUgcmFuZ2UnCiAgICB9KSwKICAgIHZhbHVlOiAnZG91YmxlX3JhbmdlJywKICAgIGRlc2NyaXB0aW9uOiBmdW5jdGlvbiBkZXNjcmlwdGlvbigpIHsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5kb3VibGVSYW5nZUxvbmdEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJEb3VibGUgcmFuZ2UgZmllbGRzIGFjY2VwdCBhIDY0LWJpdCBkb3VibGUgcHJlY2lzaW9uIGZsb2F0aW5nIHBvaW50IG51bWJlciAoSUVFRSA3NTQgYmluYXJ5NjQpLiIKICAgICAgfSkpOwogICAgfQogIH0sCiAgZmxvYXRfcmFuZ2U6IHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5mbG9hdFJhbmdlRGVzY3JpcHRpb24nLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRmxvYXQgcmFuZ2UnCiAgICB9KSwKICAgIHZhbHVlOiAnZmxvYXRfcmFuZ2UnLAogICAgZGVzY3JpcHRpb246IGZ1bmN0aW9uIGRlc2NyaXB0aW9uKCkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLmZsb2F0UmFuZ2VMb25nRGVzY3JpcHRpb24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRmxvYXQgcmFuZ2UgZmllbGRzIGFjY2VwdCBhIDMyLWJpdCBzaW5nbGUgcHJlY2lzaW9uIGZsb2F0aW5nIHBvaW50IG51bWJlciAoSUVFRSA3NTQgYmluYXJ5MzIpLiIKICAgICAgfSkpOwogICAgfQogIH0sCiAgaW50ZWdlcl9yYW5nZTogewogICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLmludGVnZXJSYW5nZURlc2NyaXB0aW9uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0ludGVnZXIgcmFuZ2UnCiAgICB9KSwKICAgIHZhbHVlOiAnaW50ZWdlcl9yYW5nZScsCiAgICBkZXNjcmlwdGlvbjogZnVuY3Rpb24gZGVzY3JpcHRpb24oKSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUuaW50ZWdlclJhbmdlTG9uZ0Rlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkludGVnZXIgcmFuZ2UgZmllbGRzIGFjY2VwdCBhIHNpZ25lZCAzMi1iaXQgaW50ZWdlci4iCiAgICAgIH0pKTsKICAgIH0KICB9LAogIGxvbmdfcmFuZ2U6IHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5sb25nUmFuZ2VEZXNjcmlwdGlvbicsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdMb25nIHJhbmdlJwogICAgfSksCiAgICB2YWx1ZTogJ2xvbmdfcmFuZ2UnLAogICAgZGVzY3JpcHRpb246IGZ1bmN0aW9uIGRlc2NyaXB0aW9uKCkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLmxvbmdSYW5nZUxvbmdEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJMb25nIHJhbmdlIGZpZWxkcyBhY2NlcHQgYSBzaWduZWQgNjQtYml0IGludGVnZXIuIgogICAgICB9KSk7CiAgICB9CiAgfSwKICBpcF9yYW5nZTogewogICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLmlwUmFuZ2VEZXNjcmlwdGlvbicsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdJUCByYW5nZScKICAgIH0pLAogICAgdmFsdWU6ICdpcF9yYW5nZScsCiAgICBkZXNjcmlwdGlvbjogZnVuY3Rpb24gZGVzY3JpcHRpb24oKSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUuaXBSYW5nZUxvbmdEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJJUCByYW5nZSBmaWVsZHMgYWNjZXB0IGFuIElQdjQgb3IgSVBWNiBhZGRyZXNzLiIKICAgICAgfSkpOwogICAgfQogIH0sCiAgZ2VvX3BvaW50OiB7CiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUuZ2VvUG9pbnREZXNjcmlwdGlvbicsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdHZW8tcG9pbnQnCiAgICB9KSwKICAgIHZhbHVlOiAnZ2VvX3BvaW50JywKICAgIGRvY3VtZW50YXRpb246IHsKICAgICAgbWFpbjogJy9nZW8tcG9pbnQuaHRtbCcKICAgIH0sCiAgICBkZXNjcmlwdGlvbjogZnVuY3Rpb24gZGVzY3JpcHRpb24oKSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUuZ2VvUG9pbnRMb25nRGVzY3JpcHRpb24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiR2VvLXBvaW50IGZpZWxkcyBhY2NlcHQgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZSBwYWlycy4gVXNlIHRoaXMgZGF0YSB0eXBlIHRvIHNlYXJjaCB3aXRoaW4gYSBib3VuZGluZyBib3gsIGFnZ3JlZ2F0ZSBkb2N1bWVudHMgZ2VvZ3JhcGhpY2FsbHksIGFuZCBzb3J0IGRvY3VtZW50cyBieSBkaXN0YW5jZS4iCiAgICAgIH0pKTsKICAgIH0KICB9LAogIGdlb19zaGFwZTogewogICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLmdlb1NoYXBlRGVzY3JpcHRpb24nLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnR2VvLXNoYXBlJwogICAgfSksCiAgICB2YWx1ZTogJ2dlb19zaGFwZScsCiAgICBkb2N1bWVudGF0aW9uOiB7CiAgICAgIG1haW46ICcvZ2VvLXNoYXBlLmh0bWwnLAogICAgICBsZWFybk1vcmU6ICcvZ2VvLXNoYXBlLmh0bWwjZ2Vvc2hhcGUtaW5kZXhpbmctYXBwcm9hY2gnCiAgICB9LAogICAgZGVzY3JpcHRpb246IGZ1bmN0aW9uIGRlc2NyaXB0aW9uKCkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmdlb1NoYXBlVHlwZS5maWVsZERlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkdlby1zaGFwZXMgYXJlIGluZGV4ZWQgYnkgZGVjb21wb3NpbmcgdGhlIHNoYXBlIGludG8gYSB0cmlhbmd1bGFyIG1lc2ggYW5kIGluZGV4aW5nIGVhY2ggdHJpYW5nbGUgYXMgYSA3LWRpbWVuc2lvbmFsIHBvaW50IGluIGEgQktEIHRyZWUuIHtkb2NzTGlua30iLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgZG9jc0xpbms6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlMaW5rLCB7CiAgICAgICAgICAgIGhyZWY6IF9kb2N1bWVudGF0aW9uLmRvY3VtZW50YXRpb25TZXJ2aWNlLmdldFR5cGVEb2NMaW5rKCdnZW9fc2hhcGUnLCAnbGVhcm5Nb3JlJyksCiAgICAgICAgICAgIHRhcmdldDogIl9ibGFuayIKICAgICAgICAgIH0sIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmdlb1NoYXBlVHlwZS5maWVsZERlc2NyaXB0aW9uLmxlYXJuTW9yZUxpbmsnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTGVhcm4gbW9yZS4nCiAgICAgICAgICB9KSkKICAgICAgICB9CiAgICAgIH0pKTsKICAgIH0KICB9LAogIGNvbXBsZXRpb246IHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5jb21wbGV0aW9uU3VnZ2VzdGVyRGVzY3JpcHRpb24nLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ29tcGxldGlvbiBzdWdnZXN0ZXInCiAgICB9KSwKICAgIHZhbHVlOiAnY29tcGxldGlvbicsCiAgICBkb2N1bWVudGF0aW9uOiB7CiAgICAgIG1haW46ICcvc2VhcmNoLXN1Z2dlc3RlcnMuaHRtbCNjb21wbGV0aW9uLXN1Z2dlc3RlcicKICAgIH0sCiAgICBkZXNjcmlwdGlvbjogZnVuY3Rpb24gZGVzY3JpcHRpb24oKSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUuY29tcGxldGlvblN1Z2dlc3RlckxvbmdEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDb21wbGV0aW9uIHN1Z2dlc3RlciBmaWVsZHMgc3VwcG9ydCBhdXRvY29tcGxldGUsIGJ1dCByZXF1aXJlIHNwZWNpYWwgZGF0YSBzdHJ1Y3R1cmVzIHRoYXQgb2NjdXB5IG1lbW9yeSBhbmQgYnVpbGQgc2xvd2x5LiIKICAgICAgfSkpOwogICAgfQogIH0sCiAgdG9rZW5fY291bnQ6IHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS50b2tlbkNvdW50RGVzY3JpcHRpb24nLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVG9rZW4gY291bnQnCiAgICB9KSwKICAgIHZhbHVlOiAndG9rZW5fY291bnQnLAogICAgZG9jdW1lbnRhdGlvbjogewogICAgICBtYWluOiAnL3Rva2VuLWNvdW50Lmh0bWwnCiAgICB9LAogICAgZGVzY3JpcHRpb246IGZ1bmN0aW9uIGRlc2NyaXB0aW9uKCkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLnRva2VuQ291bnRMb25nRGVzY3JpcHRpb24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVG9rZW4gY291bnQgZmllbGRzIGFjY2VwdCBzdHJpbmcgdmFsdWVzLiAgVGhlc2UgdmFsdWVzIGFyZSBhbmFseXplZCwgYW5kIHRoZSBudW1iZXIgb2YgdG9rZW5zIGluIHRoZSBzdHJpbmcgYXJlIGluZGV4ZWQuIgogICAgICB9KSk7CiAgICB9CiAgfSwKICBwZXJjb2xhdG9yOiB7CiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUucGVyY29sYXRvckRlc2NyaXB0aW9uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ1BlcmNvbGF0b3InCiAgICB9KSwKICAgIHZhbHVlOiAncGVyY29sYXRvcicsCiAgICBkb2N1bWVudGF0aW9uOiB7CiAgICAgIG1haW46ICcvcGVyY29sYXRvci5odG1sJwogICAgfSwKICAgIGRlc2NyaXB0aW9uOiBmdW5jdGlvbiBkZXNjcmlwdGlvbigpIHsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5wZXJjb2xhdG9yTG9uZ0Rlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlRoZSBwZXJjb2xhdG9yIGRhdGEgdHlwZSBlbmFibGVzIHtwZXJjb2xhdG9yfS4iLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgcGVyY29sYXRvcjogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUxpbmssIHsKICAgICAgICAgICAgaHJlZjogX2RvY3VtZW50YXRpb24uZG9jdW1lbnRhdGlvblNlcnZpY2UuZ2V0UGVyY29sYXRvclF1ZXJ5TGluaygpLAogICAgICAgICAgICB0YXJnZXQ6ICJfYmxhbmsiCiAgICAgICAgICB9LCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5wZXJjb2xhdG9yTG9uZ0Rlc2NyaXB0aW9uLmxlYXJuTW9yZUxpbmsnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAncGVyY29sYXRvciBxdWVyaWVzJwogICAgICAgICAgfSkpCiAgICAgICAgfQogICAgICB9KSk7CiAgICB9CiAgfSwKICBqb2luOiB7CiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUuam9pbkRlc2NyaXB0aW9uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0pvaW4nCiAgICB9KSwKICAgIHZhbHVlOiAnam9pbicsCiAgICBkb2N1bWVudGF0aW9uOiB7CiAgICAgIG1haW46ICcvcGFyZW50LWpvaW4uaHRtbCcKICAgIH0sCiAgICBkZXNjcmlwdGlvbjogZnVuY3Rpb24gZGVzY3JpcHRpb24oKSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUuam9pbkxvbmdEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJKb2luIGZpZWxkcyBkZWZpbmUgcGFyZW50LWNoaWxkIHJlbGF0aW9uc2hpcHMgYW1vbmcgZG9jdW1lbnRzIG9mIHRoZSBzYW1lIGluZGV4LiIKICAgICAgfSkpOwogICAgfQogIH0sCiAgYWxpYXM6IHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5hbGlhc0Rlc2NyaXB0aW9uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0FsaWFzJwogICAgfSksCiAgICB2YWx1ZTogJ2FsaWFzJywKICAgIGRvY3VtZW50YXRpb246IHsKICAgICAgbWFpbjogJy9hbGlhcy5odG1sJwogICAgfSwKICAgIGRlc2NyaXB0aW9uOiBmdW5jdGlvbiBkZXNjcmlwdGlvbigpIHsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5hbGlhc0xvbmdEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBbGlhcyBmaWVsZHMgYWNjZXB0IGFuIGFsdGVybmF0aXZlIG5hbWUgZm9yIGEgZmllbGQsIHdoaWNoIHlvdSBjYW4gdXNlIGluIHNlYXJjaCByZXF1ZXN0cy4iCiAgICAgIH0pKTsKICAgIH0KICB9LAogIHNlYXJjaF9hc195b3VfdHlwZTogewogICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLnNlYXJjaEFzWW91VHlwZURlc2NyaXB0aW9uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ1NlYXJjaC1hcy15b3UtdHlwZScKICAgIH0pLAogICAgdmFsdWU6ICdzZWFyY2hfYXNfeW91X3R5cGUnLAogICAgZG9jdW1lbnRhdGlvbjogewogICAgICBtYWluOiAnL3NlYXJjaC1hcy15b3UtdHlwZS5odG1sJwogICAgfSwKICAgIGRlc2NyaXB0aW9uOiBmdW5jdGlvbiBkZXNjcmlwdGlvbigpIHsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5zZWFyY2hBc1lvdVR5cGVMb25nRGVzY3JpcHRpb24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU2VhcmNoLWFzLXlvdS10eXBlIGZpZWxkcyBicmVhayBzdHJpbmdzIGludG8gc3ViZmllbGRzIGZvciBzZWFyY2ggc3VnZ2VzdGlvbnMsIGFuZCB3aWxsIG1hdGNoIHRlcm1zIGF0IGFueSBwb3NpdGlvbiBpbiB0aGUgc3RyaW5nLiIKICAgICAgfSkpOwogICAgfQogIH0sCiAgZmxhdHRlbmVkOiB7CiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUuZmxhdHRlbmVkRGVzY3JpcHRpb24nLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRmxhdHRlbmVkJwogICAgfSksCiAgICB2YWx1ZTogJ2ZsYXR0ZW5lZCcsCiAgICBkb2N1bWVudGF0aW9uOiB7CiAgICAgIG1haW46ICcvZmxhdHRlbmVkLmh0bWwnCiAgICB9LAogICAgZGVzY3JpcHRpb246IGZ1bmN0aW9uIGRlc2NyaXB0aW9uKCkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRhdGFUeXBlLmZsYXR0ZW5lZExvbmdEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJGbGF0dGVuZWQgZmllbGRzIG1hcCBhbiBvYmplY3QgYXMgYSBzaW5nbGUgZmllbGQgYW5kIGFyZSB1c2VmdWwgZm9yIGluZGV4aW5nIG9iamVjdHMgd2l0aCBhIGxhcmdlIG9yIHVua25vd24gbnVtYmVyIG9mIHVuaXF1ZSBrZXlzLiBGbGF0dGVuZWQgZmllbGRzIHN1cHBvcnQgYmFzaWMgcXVlcmllcyBvbmx5LiIKICAgICAgfSkpOwogICAgfQogIH0sCiAgc2hhcGU6IHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5zaGFwZURlc2NyaXB0aW9uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ1NoYXBlJwogICAgfSksCiAgICB2YWx1ZTogJ3NoYXBlJywKICAgIGRvY3VtZW50YXRpb246IHsKICAgICAgbWFpbjogJy9zaGFwZS5odG1sJwogICAgfSwKICAgIGRlc2NyaXB0aW9uOiBmdW5jdGlvbiBkZXNjcmlwdGlvbigpIHsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5kYXRhVHlwZS5zaGFwZUxvbmdEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTaGFwZSBmaWVsZHMgZW5hYmxlIHNlYXJjaGluZyBvZiBjb21wbGV4IHNoYXBlcywgc3VjaCBhcyByZWN0YW5nbGVzIGFuZCBwb2x5Z29ucy4iCiAgICAgIH0pKTsKICAgIH0KICB9LAogIG90aGVyOiB7CiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUub3RoZXJEZXNjcmlwdGlvbicsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdPdGhlcicKICAgIH0pLAogICAgdmFsdWU6ICdvdGhlcicsCiAgICBkZXNjcmlwdGlvbjogZnVuY3Rpb24gZGVzY3JpcHRpb24oKSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZGF0YVR5cGUub3RoZXJMb25nRGVzY3JpcHRpb24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU3BlY2lmeSB0eXBlIHBhcmFtZXRlcnMgaW4gSlNPTi4iCiAgICAgIH0pKTsKICAgIH0KICB9Cn07CmV4cG9ydHMuVFlQRV9ERUZJTklUSU9OID0gVFlQRV9ERUZJTklUSU9OOwp2YXIgTUFJTl9UWVBFUyA9IFsnYWxpYXMnLCAnYmluYXJ5JywgJ2Jvb2xlYW4nLCAnY29tcGxldGlvbicsICdkYXRlJywgJ2RhdGVfbmFub3MnLCAnZGVuc2VfdmVjdG9yJywgJ2ZsYXR0ZW5lZCcsICdnZW9fcG9pbnQnLCAnZ2VvX3NoYXBlJywgJ2lwJywgJ2pvaW4nLCAna2V5d29yZCcsICduZXN0ZWQnLCAnbnVtZXJpYycsICdvYmplY3QnLCAncGVyY29sYXRvcicsICdyYW5nZScsICdyYW5rX2ZlYXR1cmUnLCAncmFua19mZWF0dXJlcycsICdzZWFyY2hfYXNfeW91X3R5cGUnLCAnc2hhcGUnLCAndGV4dCcsICd0b2tlbl9jb3VudCcsICdvdGhlciddOwpleHBvcnRzLk1BSU5fVFlQRVMgPSBNQUlOX1RZUEVTOwp2YXIgTUFJTl9EQVRBX1RZUEVfREVGSU5JVElPTiA9IE1BSU5fVFlQRVMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHR5cGUpIHsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgYWNjLCBfZGVmaW5lUHJvcGVydHkoe30sIHR5cGUsIFRZUEVfREVGSU5JVElPTlt0eXBlXSkpOwp9LCB7fSk7Ci8qKgogKiBSZXR1cm4gYSBtYXAgb2Ygc3ViVHlwZSAtPiBtYWluVHlwZQogKgogKiBAZXhhbXBsZQogKgogKiB7CiAqICAgbG9uZzogJ251bWVyaWMnLAogKiAgIGludGVnZXI6ICdudW1lcmljJywKICogICBzaG9ydDogJ251bWVyaWMnLAogKiB9CiAqLwoKZXhwb3J0cy5NQUlOX0RBVEFfVFlQRV9ERUZJTklUSU9OID0gTUFJTl9EQVRBX1RZUEVfREVGSU5JVElPTjsKdmFyIFNVQl9UWVBFX01BUF9UT19NQUlOID0gT2JqZWN0LmVudHJpZXMoTUFJTl9EQVRBX1RZUEVfREVGSU5JVElPTikucmVkdWNlKGZ1bmN0aW9uIChhY2MsIF9yZWYpIHsKICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKSwKICAgICAgdHlwZSA9IF9yZWYyWzBdLAogICAgICBkZWZpbml0aW9uID0gX3JlZjJbMV07CgogIGlmICh7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRlZmluaXRpb24sICdzdWJUeXBlcycpKSB7CiAgICBkZWZpbml0aW9uLnN1YlR5cGVzLnR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHN1YlR5cGUpIHsKICAgICAgYWNjW3N1YlR5cGVdID0gdHlwZTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIGFjYzsKfSwge30pOyAvLyBTaW5nbGUgc291cmNlIG9mIHRydXRoIG9mIGFsbCB0aGUgcG9zc2libGUgZGF0YSB0eXBlcy4KCmV4cG9ydHMuU1VCX1RZUEVfTUFQX1RPX01BSU4gPSBTVUJfVFlQRV9NQVBfVE9fTUFJTjsKdmFyIEFMTF9EQVRBX1RZUEVTID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShPYmplY3Qua2V5cyhNQUlOX0RBVEFfVFlQRV9ERUZJTklUSU9OKSksIF90b0NvbnN1bWFibGVBcnJheShPYmplY3Qua2V5cyhTVUJfVFlQRV9NQVBfVE9fTUFJTikpKTsKZXhwb3J0cy5BTExfREFUQV9UWVBFUyA9IEFMTF9EQVRBX1RZUEVTOw=="},null]}