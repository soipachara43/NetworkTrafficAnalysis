{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/maps/public/embeddable/map_embeddable.js","dependencies":[{"path":"x-pack/legacy/plugins/maps/public/embeddable/map_embeddable.js","mtime":1589249552428},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLk1hcEVtYmVkZGFibGUgPSB2b2lkIDA7Cgp2YXIgX2xvZGFzaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibG9kYXNoIikpOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3JlYWN0UmVkdXggPSByZXF1aXJlKCJyZWFjdC1yZWR1eCIpOwoKdmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoInJlYWN0LWRvbSIpOwoKcmVxdWlyZSgibWFwYm94LWdsL2Rpc3QvbWFwYm94LWdsLmNzcyIpOwoKdmFyIF9wdWJsaWMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvbGVnYWN5L2NvcmVfcGx1Z2lucy9lbWJlZGRhYmxlX2FwaS9wdWJsaWMvbnBfcmVhZHkvcHVibGljIik7Cgp2YXIgX3B1YmxpYzIgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvcGx1Z2lucy91aV9hY3Rpb25zL3B1YmxpYyIpOwoKdmFyIF9wdWJsaWMzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL3BsdWdpbnMvZGF0YS9wdWJsaWMiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoInVpL2kxOG4iKTsKCnZhciBfZ2lzX21hcCA9IHJlcXVpcmUoIi4uL2Nvbm5lY3RlZF9jb21wb25lbnRzL2dpc19tYXAiKTsKCnZhciBfc3RvcmUgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi9wbHVnaW5zL21hcHMvcHVibGljL3JlZHVjZXJzL3N0b3JlIik7Cgp2YXIgX25ld19wbGF0Zm9ybSA9IHJlcXVpcmUoInVpL25ld19wbGF0Zm9ybSIpOwoKdmFyIF9tYXBfYWN0aW9ucyA9IHJlcXVpcmUoIi4uL2FjdGlvbnMvbWFwX2FjdGlvbnMiKTsKCnZhciBfdWlfYWN0aW9ucyA9IHJlcXVpcmUoIi4uL2FjdGlvbnMvdWlfYWN0aW9ucyIpOwoKdmFyIF91aV9zZWxlY3RvcnMgPSByZXF1aXJlKCIuLi9zZWxlY3RvcnMvdWlfc2VsZWN0b3JzIik7Cgp2YXIgX25vbl9zZXJpYWxpemFibGVfaW5zdGFuY2VzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vcGx1Z2lucy9tYXBzL3B1YmxpYy9yZWR1Y2Vycy9ub25fc2VyaWFsaXphYmxlX2luc3RhbmNlcyIpOwoKdmFyIF9tYXBfc2VsZWN0b3JzID0gcmVxdWlyZSgiLi4vc2VsZWN0b3JzL21hcF9zZWxlY3RvcnMiKTsKCnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgiLi4vLi4vY29tbW9uL2NvbnN0YW50cyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7IH0gfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIHNlbGYgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7IGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7IH0gZnVuY3Rpb24gX3Rocm93KGVycikgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7IH0gX25leHQodW5kZWZpbmVkKTsgfSk7IH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ICE9PSAidW5kZWZpbmVkIiAmJiBSZWZsZWN0LmdldCkgeyBfZ2V0ID0gUmVmbGVjdC5nZXQ7IH0gZWxzZSB7IF9nZXQgPSBmdW5jdGlvbiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyKSB7IHZhciBiYXNlID0gX3N1cGVyUHJvcEJhc2UodGFyZ2V0LCBwcm9wZXJ0eSk7IGlmICghYmFzZSkgcmV0dXJuOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYmFzZSwgcHJvcGVydHkpOyBpZiAoZGVzYy5nZXQpIHsgcmV0dXJuIGRlc2MuZ2V0LmNhbGwocmVjZWl2ZXIpOyB9IHJldHVybiBkZXNjLnZhbHVlOyB9OyB9IHJldHVybiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyIHx8IHRhcmdldCk7IH0KCmZ1bmN0aW9uIF9zdXBlclByb3BCYXNlKG9iamVjdCwgcHJvcGVydHkpIHsgd2hpbGUgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkpIHsgb2JqZWN0ID0gX2dldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChvYmplY3QgPT09IG51bGwpIGJyZWFrOyB9IHJldHVybiBvYmplY3Q7IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKdmFyIE1hcEVtYmVkZGFibGUgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfRW1iZWRkYWJsZSkgewogIF9pbmhlcml0cyhNYXBFbWJlZGRhYmxlLCBfRW1iZWRkYWJsZSk7CgogIGZ1bmN0aW9uIE1hcEVtYmVkZGFibGUoY29uZmlnLCBpbml0aWFsSW5wdXQsIHBhcmVudCwgcmVuZGVyVG9vbHRpcENvbnRlbnQsIGV2ZW50SGFuZGxlcnMpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWFwRW1iZWRkYWJsZSk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoTWFwRW1iZWRkYWJsZSkuY2FsbCh0aGlzLCBpbml0aWFsSW5wdXQsIHsKICAgICAgZWRpdFVybDogY29uZmlnLmVkaXRVcmwsCiAgICAgIGluZGV4UGF0dGVybnM6IGNvbmZpZy5pbmRleFBhdHRlcm5zLAogICAgICBlZGl0YWJsZTogY29uZmlnLmVkaXRhYmxlLAogICAgICBkZWZhdWx0VGl0bGU6IGNvbmZpZy50aXRsZQogICAgfSwgcGFyZW50KSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAidHlwZSIsIF9jb25zdGFudHMuTUFQX1NBVkVEX09CSkVDVF9UWVBFKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJhZGRGaWx0ZXJzIiwgZnVuY3Rpb24gKGZpbHRlcnMpIHsKICAgICAgX25ld19wbGF0Zm9ybS5ucFN0YXJ0LnBsdWdpbnMudWlBY3Rpb25zLmV4ZWN1dGVUcmlnZ2VyQWN0aW9ucyhfcHVibGljMi5BUFBMWV9GSUxURVJfVFJJR0dFUiwgewogICAgICAgIGVtYmVkZGFibGU6IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLAogICAgICAgIGZpbHRlcnM6IGZpbHRlcnMKICAgICAgfSk7CiAgICB9KTsKCiAgICBfdGhpcy5fcmVuZGVyVG9vbHRpcENvbnRlbnQgPSByZW5kZXJUb29sdGlwQ29udGVudDsKICAgIF90aGlzLl9ldmVudEhhbmRsZXJzID0gZXZlbnRIYW5kbGVyczsKICAgIF90aGlzLl9sYXllckxpc3QgPSBjb25maWcubGF5ZXJMaXN0OwogICAgX3RoaXMuX3N0b3JlID0gKDAsIF9zdG9yZS5jcmVhdGVNYXBTdG9yZSkoKTsKICAgIF90aGlzLl9zdWJzY3JpcHRpb24gPSBfdGhpcy5nZXRJbnB1dCQoKS5zdWJzY3JpYmUoZnVuY3Rpb24gKGlucHV0KSB7CiAgICAgIHJldHVybiBfdGhpcy5vbkNvbnRhaW5lclN0YXRlQ2hhbmdlZChpbnB1dCk7CiAgICB9KTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhNYXBFbWJlZGRhYmxlLCBbewogICAga2V5OiAiZ2V0SW5zcGVjdG9yQWRhcHRlcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3BlY3RvckFkYXB0ZXJzKCkgewogICAgICByZXR1cm4gKDAsIF9ub25fc2VyaWFsaXphYmxlX2luc3RhbmNlcy5nZXRJbnNwZWN0b3JBZGFwdGVycykodGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAib25Db250YWluZXJTdGF0ZUNoYW5nZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ29udGFpbmVyU3RhdGVDaGFuZ2VkKGNvbnRhaW5lclN0YXRlKSB7CiAgICAgIGlmICghX2xvZGFzaC5kZWZhdWx0LmlzRXF1YWwoY29udGFpbmVyU3RhdGUudGltZVJhbmdlLCB0aGlzLl9wcmV2VGltZVJhbmdlKSB8fCAhX2xvZGFzaC5kZWZhdWx0LmlzRXF1YWwoY29udGFpbmVyU3RhdGUucXVlcnksIHRoaXMuX3ByZXZRdWVyeSkgfHwgIV9wdWJsaWMzLmVzRmlsdGVycy5vbmx5RGlzYWJsZWRGaWx0ZXJzQ2hhbmdlZChjb250YWluZXJTdGF0ZS5maWx0ZXJzLCB0aGlzLl9wcmV2RmlsdGVycykpIHsKICAgICAgICB0aGlzLl9kaXNwYXRjaFNldFF1ZXJ5KGNvbnRhaW5lclN0YXRlKTsKICAgICAgfQoKICAgICAgaWYgKCFfbG9kYXNoLmRlZmF1bHQuaXNFcXVhbChjb250YWluZXJTdGF0ZS5yZWZyZXNoQ29uZmlnLCB0aGlzLl9wcmV2UmVmcmVzaENvbmZpZykpIHsKICAgICAgICB0aGlzLl9kaXNwYXRjaFNldFJlZnJlc2hDb25maWcoY29udGFpbmVyU3RhdGUpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiX2Rpc3BhdGNoU2V0UXVlcnkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kaXNwYXRjaFNldFF1ZXJ5KF9yZWYpIHsKICAgICAgdmFyIHF1ZXJ5ID0gX3JlZi5xdWVyeSwKICAgICAgICAgIHRpbWVSYW5nZSA9IF9yZWYudGltZVJhbmdlLAogICAgICAgICAgZmlsdGVycyA9IF9yZWYuZmlsdGVycywKICAgICAgICAgIHJlZnJlc2ggPSBfcmVmLnJlZnJlc2g7CiAgICAgIHRoaXMuX3ByZXZUaW1lUmFuZ2UgPSB0aW1lUmFuZ2U7CiAgICAgIHRoaXMuX3ByZXZRdWVyeSA9IHF1ZXJ5OwogICAgICB0aGlzLl9wcmV2RmlsdGVycyA9IGZpbHRlcnM7CgogICAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaCgoMCwgX21hcF9hY3Rpb25zLnNldFF1ZXJ5KSh7CiAgICAgICAgZmlsdGVyczogZmlsdGVycy5maWx0ZXIoZnVuY3Rpb24gKGZpbHRlcikgewogICAgICAgICAgcmV0dXJuICFmaWx0ZXIubWV0YS5kaXNhYmxlZDsKICAgICAgICB9KSwKICAgICAgICBxdWVyeTogcXVlcnksCiAgICAgICAgdGltZUZpbHRlcnM6IHRpbWVSYW5nZSwKICAgICAgICByZWZyZXNoOiByZWZyZXNoCiAgICAgIH0pKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZGlzcGF0Y2hTZXRSZWZyZXNoQ29uZmlnIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGlzcGF0Y2hTZXRSZWZyZXNoQ29uZmlnKF9yZWYyKSB7CiAgICAgIHZhciByZWZyZXNoQ29uZmlnID0gX3JlZjIucmVmcmVzaENvbmZpZzsKICAgICAgdGhpcy5fcHJldlJlZnJlc2hDb25maWcgPSByZWZyZXNoQ29uZmlnOwoKICAgICAgdGhpcy5fc3RvcmUuZGlzcGF0Y2goKDAsIF9tYXBfYWN0aW9ucy5zZXRSZWZyZXNoQ29uZmlnKSh7CiAgICAgICAgaXNQYXVzZWQ6IHJlZnJlc2hDb25maWcucGF1c2UsCiAgICAgICAgaW50ZXJ2YWw6IHJlZnJlc2hDb25maWcudmFsdWUKICAgICAgfSkpOwogICAgfQogICAgLyoqCiAgICAgKgogICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZG9tTm9kZQogICAgICogQHBhcmFtIHtDb250YWluZXJTdGF0ZX0gY29udGFpbmVyU3RhdGUKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcihkb21Ob2RlKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5fc3RvcmUuZGlzcGF0Y2goKDAsIF9ub25fc2VyaWFsaXphYmxlX2luc3RhbmNlcy5zZXRFdmVudEhhbmRsZXJzKSh0aGlzLl9ldmVudEhhbmRsZXJzKSk7CgogICAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaCgoMCwgX3VpX2FjdGlvbnMuc2V0UmVhZE9ubHkpKHRydWUpKTsKCiAgICAgIHRoaXMuX3N0b3JlLmRpc3BhdGNoKCgwLCBfbWFwX2FjdGlvbnMuZGlzYWJsZVNjcm9sbFpvb20pKCkpOwoKICAgICAgaWYgKF9sb2Rhc2guZGVmYXVsdC5oYXModGhpcy5pbnB1dCwgJ2lzTGF5ZXJUT0NPcGVuJykpIHsKICAgICAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaCgoMCwgX3VpX2FjdGlvbnMuc2V0SXNMYXllclRPQ09wZW4pKHRoaXMuaW5wdXQuaXNMYXllclRPQ09wZW4pKTsKICAgICAgfQoKICAgICAgaWYgKF9sb2Rhc2guZGVmYXVsdC5oYXModGhpcy5pbnB1dCwgJ29wZW5UT0NEZXRhaWxzJykpIHsKICAgICAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaCgoMCwgX3VpX2FjdGlvbnMuc2V0T3BlblRPQ0RldGFpbHMpKHRoaXMuaW5wdXQub3BlblRPQ0RldGFpbHMpKTsKICAgICAgfQoKICAgICAgaWYgKF9sb2Rhc2guZGVmYXVsdC5oYXModGhpcy5pbnB1dCwgJ2Rpc2FibGVJbnRlcmFjdGl2ZScpICYmIHRoaXMuaW5wdXQuZGlzYWJsZUludGVyYWN0aXZlKSB7CiAgICAgICAgdGhpcy5fc3RvcmUuZGlzcGF0Y2goKDAsIF9tYXBfYWN0aW9ucy5kaXNhYmxlSW50ZXJhY3RpdmUpKHRoaXMuaW5wdXQuZGlzYWJsZUludGVyYWN0aXZlKSk7CiAgICAgIH0KCiAgICAgIGlmIChfbG9kYXNoLmRlZmF1bHQuaGFzKHRoaXMuaW5wdXQsICdkaXNhYmxlVG9vbHRpcENvbnRyb2wnKSAmJiB0aGlzLmlucHV0LmRpc2FibGVUb29sdGlwQ29udHJvbCkgewogICAgICAgIHRoaXMuX3N0b3JlLmRpc3BhdGNoKCgwLCBfbWFwX2FjdGlvbnMuZGlzYWJsZVRvb2x0aXBDb250cm9sKSh0aGlzLmlucHV0LmRpc2FibGVUb29sdGlwQ29udHJvbCkpOwogICAgICB9CgogICAgICBpZiAoX2xvZGFzaC5kZWZhdWx0Lmhhcyh0aGlzLmlucHV0LCAnaGlkZVRvb2xiYXJPdmVybGF5JykgJiYgdGhpcy5pbnB1dC5oaWRlVG9vbGJhck92ZXJsYXkpIHsKICAgICAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaCgoMCwgX21hcF9hY3Rpb25zLmhpZGVUb29sYmFyT3ZlcmxheSkodGhpcy5pbnB1dC5oaWRlVG9vbGJhck92ZXJsYXkpKTsKICAgICAgfQoKICAgICAgaWYgKF9sb2Rhc2guZGVmYXVsdC5oYXModGhpcy5pbnB1dCwgJ2hpZGVMYXllckNvbnRyb2wnKSAmJiB0aGlzLmlucHV0LmhpZGVMYXllckNvbnRyb2wpIHsKICAgICAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaCgoMCwgX21hcF9hY3Rpb25zLmhpZGVMYXllckNvbnRyb2wpKHRoaXMuaW5wdXQuaGlkZUxheWVyQ29udHJvbCkpOwogICAgICB9CgogICAgICBpZiAoX2xvZGFzaC5kZWZhdWx0Lmhhcyh0aGlzLmlucHV0LCAnaGlkZVZpZXdDb250cm9sJykgJiYgdGhpcy5pbnB1dC5oaWRlVmlld0NvbnRyb2wpIHsKICAgICAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaCgoMCwgX21hcF9hY3Rpb25zLmhpZGVWaWV3Q29udHJvbCkodGhpcy5pbnB1dC5oaWRlVmlld0NvbnRyb2wpKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuaW5wdXQubWFwQ2VudGVyKSB7CiAgICAgICAgdGhpcy5fc3RvcmUuZGlzcGF0Y2goKDAsIF9tYXBfYWN0aW9ucy5zZXRHb3RvV2l0aENlbnRlcikoewogICAgICAgICAgbGF0OiB0aGlzLmlucHV0Lm1hcENlbnRlci5sYXQsCiAgICAgICAgICBsb246IHRoaXMuaW5wdXQubWFwQ2VudGVyLmxvbiwKICAgICAgICAgIHpvb206IHRoaXMuaW5wdXQubWFwQ2VudGVyLnpvb20KICAgICAgICB9KSk7CiAgICAgIH0KCiAgICAgIHRoaXMuX3N0b3JlLmRpc3BhdGNoKCgwLCBfbWFwX2FjdGlvbnMucmVwbGFjZUxheWVyTGlzdCkodGhpcy5fbGF5ZXJMaXN0KSk7CgogICAgICBpZiAodGhpcy5pbnB1dC5oaWRkZW5MYXllcnMpIHsKICAgICAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaCgoMCwgX21hcF9hY3Rpb25zLnNldEhpZGRlbkxheWVycykodGhpcy5pbnB1dC5oaWRkZW5MYXllcnMpKTsKICAgICAgfQoKICAgICAgdGhpcy5fZGlzcGF0Y2hTZXRRdWVyeSh0aGlzLmlucHV0KTsKCiAgICAgIHRoaXMuX2Rpc3BhdGNoU2V0UmVmcmVzaENvbmZpZyh0aGlzLmlucHV0KTsKCiAgICAgIHRoaXMuX2RvbU5vZGUgPSBkb21Ob2RlOwogICAgICAoMCwgX3JlYWN0RG9tLnJlbmRlcikoX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSZWR1eC5Qcm92aWRlciwgewogICAgICAgIHN0b3JlOiB0aGlzLl9zdG9yZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9pMThuLkkxOG5Db250ZXh0LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9naXNfbWFwLkdpc01hcCwgewogICAgICAgIGFkZEZpbHRlcnM6IHRoaXMuaW5wdXQuaGlkZUZpbHRlckFjdGlvbnMgPyBudWxsIDogdGhpcy5hZGRGaWx0ZXJzLAogICAgICAgIHJlbmRlclRvb2x0aXBDb250ZW50OiB0aGlzLl9yZW5kZXJUb29sdGlwQ29udGVudAogICAgICB9KSkpLCB0aGlzLl9kb21Ob2RlKTsKICAgICAgdGhpcy5fdW5zdWJzY3JpYmVGcm9tU3RvcmUgPSB0aGlzLl9zdG9yZS5zdWJzY3JpYmUoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5faGFuZGxlU3RvcmVDaGFuZ2VzKCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNldExheWVyTGlzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3NldExheWVyTGlzdCA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUobGF5ZXJMaXN0KSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdGhpcy5fbGF5ZXJMaXN0ID0gbGF5ZXJMaXN0OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RvcmUuZGlzcGF0Y2goKDAsIF9tYXBfYWN0aW9ucy5yZXBsYWNlTGF5ZXJMaXN0KSh0aGlzLl9sYXllckxpc3QpKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQuc2VudCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBzZXRMYXllckxpc3QoX3gpIHsKICAgICAgICByZXR1cm4gX3NldExheWVyTGlzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gc2V0TGF5ZXJMaXN0OwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZGVzdHJveSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHsKICAgICAgX2dldChfZ2V0UHJvdG90eXBlT2YoTWFwRW1iZWRkYWJsZS5wcm90b3R5cGUpLCAiZGVzdHJveSIsIHRoaXMpLmNhbGwodGhpcyk7CgogICAgICBpZiAodGhpcy5fdW5zdWJzY3JpYmVGcm9tU3RvcmUpIHsKICAgICAgICB0aGlzLl91bnN1YnNjcmliZUZyb21TdG9yZSgpOwogICAgICB9CgogICAgICBpZiAodGhpcy5fZG9tTm9kZSkgewogICAgICAgICgwLCBfcmVhY3REb20udW5tb3VudENvbXBvbmVudEF0Tm9kZSkodGhpcy5fZG9tTm9kZSk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLl9zdWJzY3JpcHRpb24pIHsKICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInJlbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVsb2FkKCkgewogICAgICB0aGlzLl9kaXNwYXRjaFNldFF1ZXJ5KHsKICAgICAgICBxdWVyeTogdGhpcy5fcHJldlF1ZXJ5LAogICAgICAgIHRpbWVSYW5nZTogdGhpcy5fcHJldlRpbWVSYW5nZSwKICAgICAgICBmaWx0ZXJzOiB0aGlzLl9wcmV2RmlsdGVycywKICAgICAgICByZWZyZXNoOiB0cnVlCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIl9oYW5kbGVTdG9yZUNoYW5nZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVTdG9yZUNoYW5nZXMoKSB7CiAgICAgIHZhciBjZW50ZXIgPSAoMCwgX21hcF9zZWxlY3RvcnMuZ2V0TWFwQ2VudGVyKSh0aGlzLl9zdG9yZS5nZXRTdGF0ZSgpKTsKICAgICAgdmFyIHpvb20gPSAoMCwgX21hcF9zZWxlY3RvcnMuZ2V0TWFwWm9vbSkodGhpcy5fc3RvcmUuZ2V0U3RhdGUoKSk7CiAgICAgIHZhciBtYXBDZW50ZXIgPSB0aGlzLmlucHV0Lm1hcENlbnRlciB8fCB7fTsKCiAgICAgIGlmICghbWFwQ2VudGVyIHx8IG1hcENlbnRlci5sYXQgIT09IGNlbnRlci5sYXQgfHwgbWFwQ2VudGVyLmxvbiAhPT0gY2VudGVyLmxvbiB8fCBtYXBDZW50ZXIuem9vbSAhPT0gem9vbSkgewogICAgICAgIHRoaXMudXBkYXRlSW5wdXQoewogICAgICAgICAgbWFwQ2VudGVyOiB7CiAgICAgICAgICAgIGxhdDogY2VudGVyLmxhdCwKICAgICAgICAgICAgbG9uOiBjZW50ZXIubG9uLAogICAgICAgICAgICB6b29tOiB6b29tCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHZhciBpc0xheWVyVE9DT3BlbiA9ICgwLCBfdWlfc2VsZWN0b3JzLmdldElzTGF5ZXJUT0NPcGVuKSh0aGlzLl9zdG9yZS5nZXRTdGF0ZSgpKTsKCiAgICAgIGlmICh0aGlzLmlucHV0LmlzTGF5ZXJUT0NPcGVuICE9PSBpc0xheWVyVE9DT3BlbikgewogICAgICAgIHRoaXMudXBkYXRlSW5wdXQoewogICAgICAgICAgaXNMYXllclRPQ09wZW46IGlzTGF5ZXJUT0NPcGVuCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHZhciBvcGVuVE9DRGV0YWlscyA9ICgwLCBfdWlfc2VsZWN0b3JzLmdldE9wZW5UT0NEZXRhaWxzKSh0aGlzLl9zdG9yZS5nZXRTdGF0ZSgpKTsKCiAgICAgIGlmICghX2xvZGFzaC5kZWZhdWx0LmlzRXF1YWwodGhpcy5pbnB1dC5vcGVuVE9DRGV0YWlscywgb3BlblRPQ0RldGFpbHMpKSB7CiAgICAgICAgdGhpcy51cGRhdGVJbnB1dCh7CiAgICAgICAgICBvcGVuVE9DRGV0YWlsczogb3BlblRPQ0RldGFpbHMKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdmFyIGhpZGRlbkxheWVySWRzID0gKDAsIF9tYXBfc2VsZWN0b3JzLmdldEhpZGRlbkxheWVySWRzKSh0aGlzLl9zdG9yZS5nZXRTdGF0ZSgpKTsKCiAgICAgIGlmICghX2xvZGFzaC5kZWZhdWx0LmlzRXF1YWwodGhpcy5pbnB1dC5oaWRkZW5MYXllcnMsIGhpZGRlbkxheWVySWRzKSkgewogICAgICAgIHRoaXMudXBkYXRlSW5wdXQoewogICAgICAgICAgaGlkZGVuTGF5ZXJzOiBoaWRkZW5MYXllcklkcwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTWFwRW1iZWRkYWJsZTsKfShfcHVibGljLkVtYmVkZGFibGUpOwoKZXhwb3J0cy5NYXBFbWJlZGRhYmxlID0gTWFwRW1iZWRkYWJsZTs="},null]}