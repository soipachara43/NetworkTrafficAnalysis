{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/containers/authentications/index.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/containers/authentications/index.js","mtime":1589249553216},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuQXV0aGVudGljYXRpb25zUXVlcnkgPSB2b2lkIDA7Cgp2YXIgX2ZwID0gcmVxdWlyZSgibG9kYXNoL2ZwIik7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcmVhY3RBcG9sbG8gPSByZXF1aXJlKCJyZWFjdC1hcG9sbG8iKTsKCnZhciBfcmVhY3RSZWR1eCA9IHJlcXVpcmUoInJlYWN0LXJlZHV4Iik7Cgp2YXIgX3JlZHV4ID0gcmVxdWlyZSgicmVkdXgiKTsKCnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgiLi4vLi4vLi4vY29tbW9uL2NvbnN0YW50cyIpOwoKdmFyIF9zdG9yZSA9IHJlcXVpcmUoIi4uLy4uL3N0b3JlIik7Cgp2YXIgX2hlbHBlcnMgPSByZXF1aXJlKCIuLi9oZWxwZXJzIik7Cgp2YXIgX2hlbHBlcnMyID0gcmVxdWlyZSgiLi4vLi4vY29tcG9uZW50cy9wYWdpbmF0ZWRfdGFibGUvaGVscGVycyIpOwoKdmFyIF9raWJhbmEgPSByZXF1aXJlKCIuLi8uLi9saWIva2liYW5hIik7Cgp2YXIgX3F1ZXJ5X3RlbXBsYXRlX3BhZ2luYXRlZCA9IHJlcXVpcmUoIi4uL3F1ZXJ5X3RlbXBsYXRlX3BhZ2luYXRlZCIpOwoKdmFyIF9pbmRleCA9IHJlcXVpcmUoIi4vaW5kZXguZ3FsX3F1ZXJ5Iik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogIGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcikgPT09ICJzeW1ib2wiKSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0gZWxzZSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogX3R5cGVvZjIob2JqKTsKICAgIH07CiAgfQoKICByZXR1cm4gX3R5cGVvZihvYmopOwp9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgewogIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgewogICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgYXJyMltpXSA9IGFycltpXTsKICAgIH0KCiAgICByZXR1cm4gYXJyMjsKICB9Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7CiAgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgewogICAgcmV0dXJuIGNhbGw7CiAgfQoKICByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsKfQoKZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7CiAgaWYgKHNlbGYgPT09IHZvaWQgMCkgewogICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsKICB9CgogIHJldHVybiBzZWxmOwp9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgewogIF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgICByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOwogIH07CiAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsKfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7CiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7CiAgfQoKICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsKICAgIGNvbnN0cnVjdG9yOiB7CiAgICAgIHZhbHVlOiBzdWJDbGFzcywKICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgfQogIH0pOwogIGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOwp9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgewogIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgewogICAgby5fX3Byb3RvX18gPSBwOwogICAgcmV0dXJuIG87CiAgfTsKCiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsKfQoKdmFyIElEID0gJ2F1dGhlbnRpY2F0aW9uUXVlcnknOwoKdmFyIEF1dGhlbnRpY2F0aW9uc0NvbXBvbmVudFF1ZXJ5ID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX1F1ZXJ5VGVtcGxhdGVQYWdpbmF0KSB7CiAgX2luaGVyaXRzKEF1dGhlbnRpY2F0aW9uc0NvbXBvbmVudFF1ZXJ5LCBfUXVlcnlUZW1wbGF0ZVBhZ2luYXQpOwoKICBmdW5jdGlvbiBBdXRoZW50aWNhdGlvbnNDb21wb25lbnRRdWVyeSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBdXRoZW50aWNhdGlvbnNDb21wb25lbnRRdWVyeSk7CgogICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihBdXRoZW50aWNhdGlvbnNDb21wb25lbnRRdWVyeSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQXV0aGVudGljYXRpb25zQ29tcG9uZW50UXVlcnksIFt7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IHRoaXMucHJvcHMsCiAgICAgICAgICBhY3RpdmVQYWdlID0gX3RoaXMkcHJvcHMuYWN0aXZlUGFnZSwKICAgICAgICAgIGNoaWxkcmVuID0gX3RoaXMkcHJvcHMuY2hpbGRyZW4sCiAgICAgICAgICBlbmREYXRlID0gX3RoaXMkcHJvcHMuZW5kRGF0ZSwKICAgICAgICAgIGZpbHRlclF1ZXJ5ID0gX3RoaXMkcHJvcHMuZmlsdGVyUXVlcnksCiAgICAgICAgICBfdGhpcyRwcm9wcyRpZCA9IF90aGlzJHByb3BzLmlkLAogICAgICAgICAgaWQgPSBfdGhpcyRwcm9wcyRpZCA9PT0gdm9pZCAwID8gSUQgOiBfdGhpcyRwcm9wcyRpZCwKICAgICAgICAgIGlzSW5zcGVjdGVkID0gX3RoaXMkcHJvcHMuaXNJbnNwZWN0ZWQsCiAgICAgICAgICBraWJhbmEgPSBfdGhpcyRwcm9wcy5raWJhbmEsCiAgICAgICAgICBsaW1pdCA9IF90aGlzJHByb3BzLmxpbWl0LAogICAgICAgICAgc2tpcCA9IF90aGlzJHByb3BzLnNraXAsCiAgICAgICAgICBzb3VyY2VJZCA9IF90aGlzJHByb3BzLnNvdXJjZUlkLAogICAgICAgICAgc3RhcnREYXRlID0gX3RoaXMkcHJvcHMuc3RhcnREYXRlOwogICAgICB2YXIgdmFyaWFibGVzID0gewogICAgICAgIHNvdXJjZUlkOiBzb3VyY2VJZCwKICAgICAgICB0aW1lcmFuZ2U6IHsKICAgICAgICAgIGludGVydmFsOiAnMTJoJywKICAgICAgICAgIGZyb206IHN0YXJ0RGF0ZSwKICAgICAgICAgIHRvOiBlbmREYXRlCiAgICAgICAgfSwKICAgICAgICBwYWdpbmF0aW9uOiAoMCwgX2hlbHBlcnMyLmdlbmVyYXRlVGFibGVQYWdpbmF0aW9uT3B0aW9ucykoYWN0aXZlUGFnZSwgbGltaXQpLAogICAgICAgIGZpbHRlclF1ZXJ5OiAoMCwgX2hlbHBlcnMuY3JlYXRlRmlsdGVyKShmaWx0ZXJRdWVyeSksCiAgICAgICAgZGVmYXVsdEluZGV4OiBraWJhbmEuc2VydmljZXMudWlTZXR0aW5ncy5nZXQoX2NvbnN0YW50cy5ERUZBVUxUX0lOREVYX0tFWSksCiAgICAgICAgaW5zcGVjdDogaXNJbnNwZWN0ZWQKICAgICAgfTsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0QXBvbGxvLlF1ZXJ5LCB7CiAgICAgICAgcXVlcnk6IF9pbmRleC5hdXRoZW50aWNhdGlvbnNRdWVyeSwKICAgICAgICBmZXRjaFBvbGljeTogKDAsIF9oZWxwZXJzLmdldERlZmF1bHRGZXRjaFBvbGljeSkoKSwKICAgICAgICBub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2U6IHRydWUsCiAgICAgICAgc2tpcDogc2tpcCwKICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcwogICAgICB9LCBmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBkYXRhID0gX3JlZi5kYXRhLAogICAgICAgICAgICBsb2FkaW5nID0gX3JlZi5sb2FkaW5nLAogICAgICAgICAgICBmZXRjaE1vcmUgPSBfcmVmLmZldGNoTW9yZSwKICAgICAgICAgICAgbmV0d29ya1N0YXR1cyA9IF9yZWYubmV0d29ya1N0YXR1cywKICAgICAgICAgICAgcmVmZXRjaCA9IF9yZWYucmVmZXRjaDsKICAgICAgICB2YXIgYXV0aGVudGljYXRpb25zID0gKDAsIF9mcC5nZXRPcikoW10sICdzb3VyY2UuQXV0aGVudGljYXRpb25zLmVkZ2VzJywgZGF0YSk7CgogICAgICAgIF90aGlzLnNldEZldGNoTW9yZShmZXRjaE1vcmUpOwoKICAgICAgICBfdGhpcy5zZXRGZXRjaE1vcmVPcHRpb25zKGZ1bmN0aW9uIChuZXdBY3RpdmVQYWdlKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgICBwYWdpbmF0aW9uOiAoMCwgX2hlbHBlcnMyLmdlbmVyYXRlVGFibGVQYWdpbmF0aW9uT3B0aW9ucykobmV3QWN0aXZlUGFnZSwgbGltaXQpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVwZGF0ZVF1ZXJ5OiBmdW5jdGlvbiB1cGRhdGVRdWVyeShwcmV2LCBfcmVmMikgewogICAgICAgICAgICAgIHZhciBmZXRjaE1vcmVSZXN1bHQgPSBfcmVmMi5mZXRjaE1vcmVSZXN1bHQ7CgogICAgICAgICAgICAgIGlmICghZmV0Y2hNb3JlUmVzdWx0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcHJldjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBmZXRjaE1vcmVSZXN1bHQsIHsKICAgICAgICAgICAgICAgIHNvdXJjZTogX29iamVjdFNwcmVhZCh7fSwgZmV0Y2hNb3JlUmVzdWx0LnNvdXJjZSwgewogICAgICAgICAgICAgICAgICBBdXRoZW50aWNhdGlvbnM6IF9vYmplY3RTcHJlYWQoe30sIGZldGNoTW9yZVJlc3VsdC5zb3VyY2UuQXV0aGVudGljYXRpb25zLCB7CiAgICAgICAgICAgICAgICAgICAgZWRnZXM6IF90b0NvbnN1bWFibGVBcnJheShmZXRjaE1vcmVSZXN1bHQuc291cmNlLkF1dGhlbnRpY2F0aW9ucy5lZGdlcykKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfSk7CgogICAgICAgIHZhciBpc0xvYWRpbmcgPSBfdGhpcy5pc0l0QVZhbGlkTG9hZGluZyhsb2FkaW5nLCB2YXJpYWJsZXMsIG5ldHdvcmtTdGF0dXMpOwoKICAgICAgICByZXR1cm4gY2hpbGRyZW4oewogICAgICAgICAgYXV0aGVudGljYXRpb25zOiBhdXRoZW50aWNhdGlvbnMsCiAgICAgICAgICBpZDogaWQsCiAgICAgICAgICBpbnNwZWN0OiAoMCwgX2ZwLmdldE9yKShudWxsLCAnc291cmNlLkF1dGhlbnRpY2F0aW9ucy5pbnNwZWN0JywgZGF0YSksCiAgICAgICAgICBpc0luc3BlY3RlZDogaXNJbnNwZWN0ZWQsCiAgICAgICAgICBsb2FkaW5nOiBpc0xvYWRpbmcsCiAgICAgICAgICBsb2FkUGFnZTogX3RoaXMud3JhcHBlZExvYWRNb3JlLAogICAgICAgICAgcGFnZUluZm86ICgwLCBfZnAuZ2V0T3IpKHt9LCAnc291cmNlLkF1dGhlbnRpY2F0aW9ucy5wYWdlSW5mbycsIGRhdGEpLAogICAgICAgICAgcmVmZXRjaDogX3RoaXMubWVtb2l6ZWRSZWZldGNoUXVlcnkodmFyaWFibGVzLCBsaW1pdCwgcmVmZXRjaCksCiAgICAgICAgICB0b3RhbENvdW50OiAoMCwgX2ZwLmdldE9yKSgtMSwgJ3NvdXJjZS5BdXRoZW50aWNhdGlvbnMudG90YWxDb3VudCcsIGRhdGEpCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEF1dGhlbnRpY2F0aW9uc0NvbXBvbmVudFF1ZXJ5Owp9KF9xdWVyeV90ZW1wbGF0ZV9wYWdpbmF0ZWQuUXVlcnlUZW1wbGF0ZVBhZ2luYXRlZCk7Cgp2YXIgbWFrZU1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1ha2VNYXBTdGF0ZVRvUHJvcHMoKSB7CiAgdmFyIGdldEF1dGhlbnRpY2F0aW9uc1NlbGVjdG9yID0gX3N0b3JlLmhvc3RzU2VsZWN0b3JzLmF1dGhlbnRpY2F0aW9uc1NlbGVjdG9yKCk7CgogIHZhciBnZXRRdWVyeSA9IF9zdG9yZS5pbnB1dHNTZWxlY3RvcnMuZ2xvYmFsUXVlcnlCeUlkU2VsZWN0b3IoKTsKCiAgdmFyIG1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyhzdGF0ZSwgX3JlZjMpIHsKICAgIHZhciB0eXBlID0gX3JlZjMudHlwZSwKICAgICAgICBfcmVmMyRpZCA9IF9yZWYzLmlkLAogICAgICAgIGlkID0gX3JlZjMkaWQgPT09IHZvaWQgMCA/IElEIDogX3JlZjMkaWQ7CgogICAgdmFyIF9nZXRRdWVyeSA9IGdldFF1ZXJ5KHN0YXRlLCBpZCksCiAgICAgICAgaXNJbnNwZWN0ZWQgPSBfZ2V0UXVlcnkuaXNJbnNwZWN0ZWQ7CgogICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIGdldEF1dGhlbnRpY2F0aW9uc1NlbGVjdG9yKHN0YXRlLCB0eXBlKSwgewogICAgICBpc0luc3BlY3RlZDogaXNJbnNwZWN0ZWQKICAgIH0pOwogIH07CgogIHJldHVybiBtYXBTdGF0ZVRvUHJvcHM7Cn07Cgp2YXIgQXV0aGVudGljYXRpb25zUXVlcnkgPSAoMCwgX3JlZHV4LmNvbXBvc2UpKCgwLCBfcmVhY3RSZWR1eC5jb25uZWN0KShtYWtlTWFwU3RhdGVUb1Byb3BzKSwgX2tpYmFuYS53aXRoS2liYW5hKShBdXRoZW50aWNhdGlvbnNDb21wb25lbnRRdWVyeSk7CmV4cG9ydHMuQXV0aGVudGljYXRpb25zUXVlcnkgPSBBdXRoZW50aWNhdGlvbnNRdWVyeTs="},null]}