{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/ui/public/field_editor/components/scripting_help/test_script.js","dependencies":[{"path":"src/legacy/ui/public/field_editor/components/scripting_help/test_script.js","mtime":1589249550323},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlRlc3RTY3JpcHQgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3Byb3BUeXBlcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicHJvcC10eXBlcyIpKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX3JlYWN0MiA9IHJlcXVpcmUoIkBrYm4vaTE4bi9yZWFjdCIpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX25ld19wbGF0Zm9ybSA9IHJlcXVpcmUoInVpL25ld19wbGF0Zm9ybSIpOwoKdmFyIF9wdWJsaWMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi9wbHVnaW5zL2RhdGEvcHVibGljIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCnZhciBTZWFyY2hCYXIgPSBfbmV3X3BsYXRmb3JtLm5wU3RhcnQucGx1Z2lucy5kYXRhLnVpLlNlYXJjaEJhcjsKdmFyIHVpU2V0dGluZ3MgPSBfbmV3X3BsYXRmb3JtLm5wU3RhcnQuY29yZS51aVNldHRpbmdzOwoKdmFyIFRlc3RTY3JpcHQgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfQ29tcG9uZW50KSB7CiAgX2luaGVyaXRzKFRlc3RTY3JpcHQsIF9Db21wb25lbnQpOwoKICBmdW5jdGlvbiBUZXN0U2NyaXB0KCkgewogICAgdmFyIF9nZXRQcm90b3R5cGVPZjI7CgogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUZXN0U2NyaXB0KTsKCiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgIH0KCiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChfZ2V0UHJvdG90eXBlT2YyID0gX2dldFByb3RvdHlwZU9mKFRlc3RTY3JpcHQpKS5jYWxsLmFwcGx5KF9nZXRQcm90b3R5cGVPZjIsIFt0aGlzXS5jb25jYXQoYXJncykpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzdGF0ZSIsIHsKICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgYWRkaXRpb25hbEZpZWxkczogW10KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInByZXZpZXdTY3JpcHQiLAogICAgLyojX19QVVJFX18qLwogICAgZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoc2VhcmNoQ29udGV4dCkgewogICAgICAgIHZhciBfdGhpcyRwcm9wcywgaW5kZXhQYXR0ZXJuLCBsYW5nLCBuYW1lLCBzY3JpcHQsIGV4ZWN1dGVTY3JpcHQsIHF1ZXJ5LCBlc1F1ZXJ5Q29uZmlncywgc2NyaXB0UmVzcG9uc2U7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsIGluZGV4UGF0dGVybiA9IF90aGlzJHByb3BzLmluZGV4UGF0dGVybiwgbGFuZyA9IF90aGlzJHByb3BzLmxhbmcsIG5hbWUgPSBfdGhpcyRwcm9wcy5uYW1lLCBzY3JpcHQgPSBfdGhpcyRwcm9wcy5zY3JpcHQsIGV4ZWN1dGVTY3JpcHQgPSBfdGhpcyRwcm9wcy5leGVjdXRlU2NyaXB0OwoKICAgICAgICAgICAgICAgIGlmICghKCFzY3JpcHQgfHwgc2NyaXB0Lmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIGlzTG9hZGluZzogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKHNlYXJjaENvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgZXNRdWVyeUNvbmZpZ3MgPSBfcHVibGljLmVzUXVlcnkuZ2V0RXNRdWVyeUNvbmZpZyh1aVNldHRpbmdzKTsKICAgICAgICAgICAgICAgICAgcXVlcnkgPSBfcHVibGljLmVzUXVlcnkuYnVpbGRFc1F1ZXJ5KF90aGlzLnByb3BzLmluZGV4UGF0dGVybiwgc2VhcmNoQ29udGV4dC5xdWVyeSwgbnVsbCwgZXNRdWVyeUNvbmZpZ3MpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVTY3JpcHQoewogICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgICAgICAgICBsYW5nOiBsYW5nLAogICAgICAgICAgICAgICAgICBzY3JpcHQ6IHNjcmlwdCwKICAgICAgICAgICAgICAgICAgaW5kZXhQYXR0ZXJuVGl0bGU6IGluZGV4UGF0dGVybi50aXRsZSwKICAgICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5LAogICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsRmllbGRzOiBfdGhpcy5zdGF0ZS5hZGRpdGlvbmFsRmllbGRzLm1hcChmdW5jdGlvbiAob3B0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi52YWx1ZTsKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBzY3JpcHRSZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEoc2NyaXB0UmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgICBwcmV2aWV3RGF0YTogc2NyaXB0UmVzcG9uc2UKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgICBwcmV2aWV3RGF0YTogc2NyaXB0UmVzcG9uc2UuaGl0cy5oaXRzLm1hcChmdW5jdGlvbiAoaGl0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICAgICAgICAgICAgX2lkOiBoaXQuX2lkCiAgICAgICAgICAgICAgICAgICAgfSwgaGl0Ll9zb3VyY2UsIHt9LCBoaXQuZmllbGRzKTsKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvbkFkZGl0aW9uYWxGaWVsZHNDaGFuZ2UiLCBmdW5jdGlvbiAoc2VsZWN0ZWRPcHRpb25zKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBhZGRpdGlvbmFsRmllbGRzOiBzZWxlY3RlZE9wdGlvbnMKICAgICAgfSk7CiAgICB9KTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoVGVzdFNjcmlwdCwgW3sKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgaWYgKHRoaXMucHJvcHMuc2NyaXB0KSB7CiAgICAgICAgdGhpcy5wcmV2aWV3U2NyaXB0KCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXJQcmV2aWV3IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJQcmV2aWV3KCkgewogICAgICB2YXIgcHJldmlld0RhdGEgPSB0aGlzLnN0YXRlLnByZXZpZXdEYXRhOwoKICAgICAgaWYgKCFwcmV2aWV3RGF0YSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICBpZiAocHJldmlld0RhdGEuZXJyb3IpIHsKICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNhbGxPdXQsIHsKICAgICAgICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgnY29tbW9uLnVpLmZpZWxkRWRpdG9yLnRlc3RTY3JpcHQuZXJyb3JNZXNzYWdlJywgewogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlRoZXJlJ3MgYW4gZXJyb3IgaW4geW91ciBzY3JpcHQiCiAgICAgICAgICB9KSwKICAgICAgICAgIGNvbG9yOiAiZGFuZ2VyIiwKICAgICAgICAgIGljb25UeXBlOiAiY3Jvc3MiCiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNvZGVCbG9jaywgewogICAgICAgICAgbGFuZ3VhZ2U6ICJqc29uIiwKICAgICAgICAgIGNsYXNzTmFtZTogInNjcmlwdFByZXZpZXdDb2RlQmxvY2siLAogICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInNjcmlwdGVkRmllbGRQcmV2aWV3IgogICAgICAgIH0sIEpTT04uc3RyaW5naWZ5KHByZXZpZXdEYXRhLmVycm9yLCBudWxsLCAnICcpKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRpdGxlLCB7CiAgICAgICAgc2l6ZTogInhzIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImNvbW1vbi51aS5maWVsZEVkaXRvci50ZXN0U2NyaXB0LnJlc3VsdHNMYWJlbCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJGaXJzdCAxMCByZXN1bHRzIgogICAgICB9KSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCB7CiAgICAgICAgc2l6ZTogInMiCiAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ29kZUJsb2NrLCB7CiAgICAgICAgbGFuZ3VhZ2U6ICJqc29uIiwKICAgICAgICBjbGFzc05hbWU6ICJzY3JpcHRQcmV2aWV3Q29kZUJsb2NrIiwKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAic2NyaXB0ZWRGaWVsZFByZXZpZXciCiAgICAgIH0sIEpTT04uc3RyaW5naWZ5KHByZXZpZXdEYXRhLCBudWxsLCAnICcpKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyVG9vbGJhciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyVG9vbGJhcigpIHsKICAgICAgdmFyIGZpZWxkc0J5VHlwZU1hcCA9IG5ldyBNYXAoKTsKICAgICAgdmFyIGZpZWxkcyA9IFtdOwogICAgICB0aGlzLnByb3BzLmluZGV4UGF0dGVybi5maWVsZHMuZmlsdGVyKGZ1bmN0aW9uIChmaWVsZCkgewogICAgICAgIHZhciBpc011bHRpRmllbGQgPSBmaWVsZC5zdWJUeXBlICYmIGZpZWxkLnN1YlR5cGUubXVsdGk7CiAgICAgICAgcmV0dXJuICFmaWVsZC5uYW1lLnN0YXJ0c1dpdGgoJ18nKSAmJiAhaXNNdWx0aUZpZWxkICYmICFmaWVsZC5zY3JpcHRlZDsKICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQpIHsKICAgICAgICBpZiAoZmllbGRzQnlUeXBlTWFwLmhhcyhmaWVsZC50eXBlKSkgewogICAgICAgICAgdmFyIGZpZWxkc0xpc3QgPSBmaWVsZHNCeVR5cGVNYXAuZ2V0KGZpZWxkLnR5cGUpOwogICAgICAgICAgZmllbGRzTGlzdC5wdXNoKGZpZWxkLm5hbWUpOwogICAgICAgICAgZmllbGRzQnlUeXBlTWFwLnNldChmaWVsZC50eXBlLCBmaWVsZHNMaXN0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZmllbGRzQnlUeXBlTWFwLnNldChmaWVsZC50eXBlLCBbZmllbGQubmFtZV0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGZpZWxkc0J5VHlwZU1hcC5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZHNMaXN0LCBmaWVsZFR5cGUpIHsKICAgICAgICBmaWVsZHMucHVzaCh7CiAgICAgICAgICBsYWJlbDogZmllbGRUeXBlLAogICAgICAgICAgb3B0aW9uczogZmllbGRzTGlzdC5zb3J0KCkubWFwKGZ1bmN0aW9uIChmaWVsZE5hbWUpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICB2YWx1ZTogZmllbGROYW1lLAogICAgICAgICAgICAgIGxhYmVsOiBmaWVsZE5hbWUKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBmaWVsZHMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgIGlmIChhLmxhYmVsIDwgYi5sYWJlbCkgcmV0dXJuIC0xOwogICAgICAgIGlmIChhLmxhYmVsID4gYi5sYWJlbCkgcmV0dXJuIDE7CiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0pOwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICAgICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCdjb21tb24udWkuZmllbGRFZGl0b3IudGVzdFNjcmlwdC5maWVsZHNMYWJlbCcsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQWRkaXRpb25hbCBmaWVsZHMnCiAgICAgICAgfSksCiAgICAgICAgZnVsbFdpZHRoOiB0cnVlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDb21ib0JveCwgewogICAgICAgIHBsYWNlaG9sZGVyOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgnY29tbW9uLnVpLmZpZWxkRWRpdG9yLnRlc3RTY3JpcHQuZmllbGRzUGxhY2Vob2xkZXInLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1NlbGVjdC4uLicKICAgICAgICB9KSwKICAgICAgICBvcHRpb25zOiBmaWVsZHMsCiAgICAgICAgc2VsZWN0ZWRPcHRpb25zOiB0aGlzLnN0YXRlLmFkZGl0aW9uYWxGaWVsZHMsCiAgICAgICAgb25DaGFuZ2U6IHRoaXMub25BZGRpdGlvbmFsRmllbGRzQ2hhbmdlLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJhZGRpdGlvbmFsRmllbGRzU2VsZWN0IiwKICAgICAgICBmdWxsV2lkdGg6IHRydWUKICAgICAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAidGVzdFNjcmlwdF9fc2VhcmNoQmFyIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFNlYXJjaEJhciwgewogICAgICAgIHNob3dGaWx0ZXJCYXI6IGZhbHNlLAogICAgICAgIHNob3dEYXRlUGlja2VyOiBmYWxzZSwKICAgICAgICBzaG93UXVlcnlJbnB1dDogdHJ1ZSwKICAgICAgICBxdWVyeTogewogICAgICAgICAgbGFuZ3VhZ2U6IHVpU2V0dGluZ3MuZ2V0KCdzZWFyY2g6cXVlcnlMYW5ndWFnZScpLAogICAgICAgICAgcXVlcnk6ICcnCiAgICAgICAgfSwKICAgICAgICBvblF1ZXJ5U3VibWl0OiB0aGlzLnByZXZpZXdTY3JpcHQsCiAgICAgICAgaW5kZXhQYXR0ZXJuczogW3RoaXMucHJvcHMuaW5kZXhQYXR0ZXJuXSwKICAgICAgICBjdXN0b21TdWJtaXRCdXR0b246IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b24sIHsKICAgICAgICAgIGRpc2FibGVkOiB0aGlzLnByb3BzLnNjcmlwdCA/IGZhbHNlIDogdHJ1ZSwKICAgICAgICAgIGlzTG9hZGluZzogdGhpcy5zdGF0ZS5pc0xvYWRpbmcsCiAgICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAicnVuU2NyaXB0QnV0dG9uIgogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogImNvbW1vbi51aS5maWVsZEVkaXRvci50ZXN0U2NyaXB0LnN1Ym1pdEJ1dHRvbkxhYmVsIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUnVuIHNjcmlwdCIKICAgICAgICB9KSkKICAgICAgfSkpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCBudWxsKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRleHQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImgzIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImNvbW1vbi51aS5maWVsZEVkaXRvci50ZXN0U2NyaXB0LnJlc3VsdHNUaXRsZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJQcmV2aWV3IHJlc3VsdHMiCiAgICAgIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJjb21tb24udWkuZmllbGRFZGl0b3IudGVzdFNjcmlwdC5pbnN0cnVjdGlvbnMiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUnVuIHlvdXIgc2NyaXB0IHRvIHByZXZpZXcgdGhlIGZpcnN0IDEwIHJlc3VsdHMuIFlvdSBjYW4gYWxzbyBzZWxlY3Qgc29tZSBhZGRpdGlvbmFsIGZpZWxkcyB0byBpbmNsdWRlIGluIHlvdXIgcmVzdWx0cyB0byBnYWluIG1vcmUgY29udGV4dCBvciBhZGQgYSBxdWVyeSB0byBmaWx0ZXIgb24gc3BlY2lmaWMgZG9jdW1lbnRzLiIKICAgICAgfSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgbnVsbCksIHRoaXMucmVuZGVyVG9vbGJhcigpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCBudWxsKSwgdGhpcy5yZW5kZXJQcmV2aWV3KCkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFRlc3RTY3JpcHQ7Cn0oX3JlYWN0LkNvbXBvbmVudCk7CgpleHBvcnRzLlRlc3RTY3JpcHQgPSBUZXN0U2NyaXB0OwpUZXN0U2NyaXB0LnByb3BUeXBlcyA9IHsKICBpbmRleFBhdHRlcm46IF9wcm9wVHlwZXMuZGVmYXVsdC5vYmplY3QuaXNSZXF1aXJlZCwKICBsYW5nOiBfcHJvcFR5cGVzLmRlZmF1bHQuc3RyaW5nLmlzUmVxdWlyZWQsCiAgbmFtZTogX3Byb3BUeXBlcy5kZWZhdWx0LnN0cmluZywKICBzY3JpcHQ6IF9wcm9wVHlwZXMuZGVmYXVsdC5zdHJpbmcsCiAgZXhlY3V0ZVNjcmlwdDogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMuaXNSZXF1aXJlZAp9OwpUZXN0U2NyaXB0LmRlZmF1bHRQcm9wcyA9IHsKICBuYW1lOiAnbXlTY3JpcHRlZEZpZWxkJwp9Ow=="},null]}