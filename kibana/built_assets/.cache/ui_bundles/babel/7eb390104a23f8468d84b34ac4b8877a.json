{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/monitoring/public/components/elasticsearch/nodes/nodes.js","dependencies":[{"path":"x-pack/legacy/plugins/monitoring/public/components/elasticsearch/nodes/nodes.js","mtime":1589249552532},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkVsYXN0aWNzZWFyY2hOb2RlcyA9IEVsYXN0aWNzZWFyY2hOb2RlczsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfbm9kZSA9IHJlcXVpcmUoIi4uL25vZGUiKTsKCnZhciBfZXh0cmFjdF9pcCA9IHJlcXVpcmUoIi4uLy4uLy4uL2xpYi9leHRyYWN0X2lwIik7Cgp2YXIgX2NsdXN0ZXJfc3RhdHVzID0gcmVxdWlyZSgiLi4vY2x1c3Rlcl9zdGF0dXMiKTsKCnZhciBfdGFibGUgPSByZXF1aXJlKCIuLi8uLi90YWJsZSIpOwoKdmFyIF9jZWxscyA9IHJlcXVpcmUoIi4vY2VsbHMiKTsKCnZhciBfYmFkZ2UgPSByZXF1aXJlKCIuLi8uLi9zZXR1cF9tb2RlL2JhZGdlIik7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX2xvZGFzaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibG9kYXNoIikpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21tb24vY29uc3RhbnRzIik7Cgp2YXIgX2xpc3RpbmdfY2FsbG91dCA9IHJlcXVpcmUoIi4uLy4uL3NldHVwX21vZGUvbGlzdGluZ19jYWxsb3V0Iik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgpmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpOyB2YXIga2V5LCBpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHsgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307IHZhciB0YXJnZXQgPSB7fTsgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpOyB2YXIga2V5LCBpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IHJldHVybiB0YXJnZXQ7IH0KCnZhciBnZXROb2RlVG9vbHRpcCA9IGZ1bmN0aW9uIGdldE5vZGVUb29sdGlwKG5vZGUpIHsKICB2YXIgbm9kZVR5cGVMYWJlbCA9IG5vZGUubm9kZVR5cGVMYWJlbCwKICAgICAgbm9kZVR5cGVDbGFzcyA9IG5vZGUubm9kZVR5cGVDbGFzczsKCiAgdmFyIG5vZGVUeXBlTGFiZWxDb250ZW50ID0gbm9kZVR5cGVMYWJlbCB8fCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subW9uaXRvcmluZy5lbGFzdGljc2VhcmNoLm5vZGVzLnVua25vd25Ob2RlVHlwZUxhYmVsJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdVbmtub3duJwogIH0pOwoKICB2YXIgbm9kZVR5cGVDbGFzc0ljb24gPSBub2RlVHlwZUNsYXNzIHx8ICdlbXB0eSc7CgogIGlmIChub2RlVHlwZUxhYmVsKSB7CiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuZGVmYXVsdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRvb2xUaXAsIHsKICAgICAgcG9zaXRpb246ICJib3R0b20iLAogICAgICBjb250ZW50OiBub2RlVHlwZUxhYmVsQ29udGVudAogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUljb24sIHsKICAgICAgdHlwZTogbm9kZVR5cGVDbGFzc0ljb24KICAgIH0pKSwgJyAnLCAiXHhBMCIpOwogIH0KCiAgcmV0dXJuIG51bGw7Cn07Cgp2YXIgZ2V0U29ydEhhbmRsZXIgPSBmdW5jdGlvbiBnZXRTb3J0SGFuZGxlcih0eXBlKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gX2xvZGFzaC5kZWZhdWx0LmdldChpdGVtLCBbdHlwZSwgJ3N1bW1hcnknLCAnbGFzdFZhbCddKTsKICB9Owp9OwoKdmFyIGdldENvbHVtbnMgPSBmdW5jdGlvbiBnZXRDb2x1bW5zKHNob3dDZ3JvdXBNZXRyaWNzRWxhc3RpY3NlYXJjaCwgc2V0dXBNb2RlLCBjbHVzdGVyVXVpZCkgewogIHZhciBjb2xzID0gW107CgogIHZhciBjcHVVc2FnZUNvbHVtblRpdGxlID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1vbml0b3JpbmcuZWxhc3RpY3NlYXJjaC5ub2Rlcy5jcHVVc2FnZUNvbHVtblRpdGxlJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdDUFUgVXNhZ2UnCiAgfSk7CgogIGNvbHMucHVzaCh7CiAgICBuYW1lOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subW9uaXRvcmluZy5lbGFzdGljc2VhcmNoLm5vZGVzLm5hbWVDb2x1bW5UaXRsZScsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdOYW1lJwogICAgfSksCiAgICB3aWR0aDogJzIwJScsCiAgICBmaWVsZDogJ25hbWUnLAogICAgc29ydGFibGU6IHRydWUsCiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcih2YWx1ZSwgbm9kZSkgewogICAgICB2YXIgbmFtZUxpbmsgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpTGluaywgewogICAgICAgIGhyZWY6ICIjL2VsYXN0aWNzZWFyY2gvbm9kZXMvIi5jb25jYXQobm9kZS5yZXNvbHZlciksCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogIm5vZGVMaW5rLSIuY29uY2F0KG5vZGUucmVzb2x2ZXIpCiAgICAgIH0sIHZhbHVlKTsKCiAgICAgIHZhciBzZXR1cE1vZGVTdGF0dXMgPSBudWxsOwoKICAgICAgaWYgKHNldHVwTW9kZSAmJiBzZXR1cE1vZGUuZW5hYmxlZCkgewogICAgICAgIHZhciBsaXN0ID0gX2xvZGFzaC5kZWZhdWx0LmdldChzZXR1cE1vZGUsICdkYXRhLmJ5VXVpZCcsIHt9KTsKCiAgICAgICAgdmFyIHN0YXR1cyA9IGxpc3Rbbm9kZS5yZXNvbHZlcl0gfHwge307CiAgICAgICAgdmFyIGluc3RhbmNlID0gewogICAgICAgICAgdXVpZDogbm9kZS5yZXNvbHZlciwKICAgICAgICAgIG5hbWU6IG5vZGUubmFtZQogICAgICAgIH07CiAgICAgICAgc2V0dXBNb2RlU3RhdHVzID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgY2xhc3NOYW1lOiAibW9uVGFibGVDZWxsX19zZXR1cE1vZGVTdGF0dXMiCiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfYmFkZ2UuU2V0dXBNb2RlQmFkZ2UsIHsKICAgICAgICAgIHNldHVwTW9kZTogc2V0dXBNb2RlLAogICAgICAgICAgc3RhdHVzOiBzdGF0dXMsCiAgICAgICAgICBpbnN0YW5jZTogaW5zdGFuY2UsCiAgICAgICAgICBwcm9kdWN0TmFtZTogX2NvbnN0YW50cy5FTEFTVElDU0VBUkNIX1NZU1RFTV9JRCwKICAgICAgICAgIGNsdXN0ZXJVdWlkOiBjbHVzdGVyVXVpZAogICAgICAgIH0pKTsKCiAgICAgICAgaWYgKHN0YXR1cy5pc05ldE5ld1VzZXIpIHsKICAgICAgICAgIG5hbWVMaW5rID0gdmFsdWU7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogIm1vblRhYmxlQ2VsbF9fbmFtZSIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRleHQsIHsKICAgICAgICBzaXplOiAibSIKICAgICAgfSwgZ2V0Tm9kZVRvb2x0aXAobm9kZSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogIm5hbWUiCiAgICAgIH0sIG5hbWVMaW5rKSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAibW9uVGFibGVDZWxsX190cmFuc3BvcnRBZGRyZXNzIgogICAgICB9LCAoMCwgX2V4dHJhY3RfaXAuZXh0cmFjdElwKShub2RlLnRyYW5zcG9ydF9hZGRyZXNzKSksIHNldHVwTW9kZVN0YXR1cyk7CiAgICB9CiAgfSk7CiAgY29scy5wdXNoKHsKICAgIG5hbWU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tb25pdG9yaW5nLmVsYXN0aWNzZWFyY2gubm9kZXMuc3RhdHVzQ29sdW1uVGl0bGUnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU3RhdHVzJwogICAgfSksCiAgICBmaWVsZDogJ2lzT25saW5lJywKICAgIHNvcnRhYmxlOiB0cnVlLAogICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIodmFsdWUpIHsKICAgICAgdmFyIHN0YXR1cyA9IHZhbHVlID8gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1vbml0b3JpbmcuZWxhc3RpY3NlYXJjaC5ub2Rlcy5zdGF0dXNDb2x1bW4ub25saW5lTGFiZWwnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdPbmxpbmUnCiAgICAgIH0pIDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1vbml0b3JpbmcuZWxhc3RpY3NlYXJjaC5ub2Rlcy5zdGF0dXNDb2x1bW4ub2ZmbGluZUxhYmVsJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnT2ZmbGluZScKICAgICAgfSk7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAibW9uVGFibGVDZWxsX19zdGF0dXMiCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX25vZGUuTm9kZVN0YXR1c0ljb24sIHsKICAgICAgICBpc09ubGluZTogdmFsdWUsCiAgICAgICAgc3RhdHVzOiBzdGF0dXMKICAgICAgfSksICIgIiwgc3RhdHVzKTsKICAgIH0KICB9KTsKICBjb2xzLnB1c2goewogICAgbmFtZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1vbml0b3JpbmcuZWxhc3RpY3NlYXJjaC5ub2Rlcy5zaGFyZHNDb2x1bW5UaXRsZScsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTaGFyZHMnCiAgICB9KSwKICAgIGZpZWxkOiAnc2hhcmRDb3VudCcsCiAgICBzb3J0YWJsZTogdHJ1ZSwKICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHZhbHVlLCBub2RlKSB7CiAgICAgIHJldHVybiBub2RlLmlzT25saW5lID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogIm1vblRhYmxlQ2VsbF9fbnVtYmVyIiwKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAic2hhcmRzIgogICAgICB9LCB2YWx1ZSkgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jZWxscy5PZmZsaW5lQ2VsbCwgbnVsbCk7CiAgICB9CiAgfSk7CgogIGlmIChzaG93Q2dyb3VwTWV0cmljc0VsYXN0aWNzZWFyY2gpIHsKICAgIGNvbHMucHVzaCh7CiAgICAgIG5hbWU6IGNwdVVzYWdlQ29sdW1uVGl0bGUsCiAgICAgIGZpZWxkOiAnbm9kZV9jZ3JvdXBfcXVvdGEnLAogICAgICBzb3J0YWJsZTogZ2V0U29ydEhhbmRsZXIoJ25vZGVfY2dyb3VwX3F1b3RhJyksCiAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHZhbHVlLCBub2RlKSB7CiAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NlbGxzLk1ldHJpY0NlbGwsIHsKICAgICAgICAgIGlzT25saW5lOiBub2RlLmlzT25saW5lLAogICAgICAgICAgbWV0cmljOiB2YWx1ZSwKICAgICAgICAgIGlzUGVyY2VudDogdHJ1ZSwKICAgICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJjcHVRdW90YSIKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgICBjb2xzLnB1c2goewogICAgICBuYW1lOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subW9uaXRvcmluZy5lbGFzdGljc2VhcmNoLm5vZGVzLmNwdVRocm90dGxpbmdDb2x1bW5UaXRsZScsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0NQVSBUaHJvdHRsaW5nJwogICAgICB9KSwKICAgICAgZmllbGQ6ICdub2RlX2Nncm91cF90aHJvdHRsZWQnLAogICAgICBzb3J0YWJsZTogZ2V0U29ydEhhbmRsZXIoJ25vZGVfY2dyb3VwX3Rocm90dGxlZCcpLAogICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcih2YWx1ZSwgbm9kZSkgewogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jZWxscy5NZXRyaWNDZWxsLCB7CiAgICAgICAgICBpc09ubGluZTogbm9kZS5pc09ubGluZSwKICAgICAgICAgIG1ldHJpYzogdmFsdWUsCiAgICAgICAgICBpc1BlcmNlbnQ6IGZhbHNlLAogICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImNwdVRocm90dGxlZCIKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfSBlbHNlIHsKICAgIGNvbHMucHVzaCh7CiAgICAgIG5hbWU6IGNwdVVzYWdlQ29sdW1uVGl0bGUsCiAgICAgIGZpZWxkOiAnbm9kZV9jcHVfdXRpbGl6YXRpb24nLAogICAgICBzb3J0YWJsZTogZ2V0U29ydEhhbmRsZXIoJ25vZGVfY3B1X3V0aWxpemF0aW9uJyksCiAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHZhbHVlLCBub2RlKSB7CiAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NlbGxzLk1ldHJpY0NlbGwsIHsKICAgICAgICAgIGlzT25saW5lOiBub2RlLmlzT25saW5lLAogICAgICAgICAgbWV0cmljOiB2YWx1ZSwKICAgICAgICAgIGlzUGVyY2VudDogdHJ1ZSwKICAgICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJjcHVVc2FnZSIKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgICBjb2xzLnB1c2goewogICAgICBuYW1lOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subW9uaXRvcmluZy5lbGFzdGljc2VhcmNoLm5vZGVzLmxvYWRBdmVyYWdlQ29sdW1uVGl0bGUnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdMb2FkIEF2ZXJhZ2UnCiAgICAgIH0pLAogICAgICBmaWVsZDogJ25vZGVfbG9hZF9hdmVyYWdlJywKICAgICAgc29ydGFibGU6IGdldFNvcnRIYW5kbGVyKCdub2RlX2xvYWRfYXZlcmFnZScpLAogICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcih2YWx1ZSwgbm9kZSkgewogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jZWxscy5NZXRyaWNDZWxsLCB7CiAgICAgICAgICBpc09ubGluZTogbm9kZS5pc09ubGluZSwKICAgICAgICAgIG1ldHJpYzogdmFsdWUsCiAgICAgICAgICBpc1BlcmNlbnQ6IGZhbHNlLAogICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImxvYWRBdmVyYWdlIgogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICB9CgogIGNvbHMucHVzaCh7CiAgICBuYW1lOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subW9uaXRvcmluZy5lbGFzdGljc2VhcmNoLm5vZGVzLmp2bU1lbW9yeUNvbHVtblRpdGxlJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ3tqYXZhVmlydHVhbE1hY2hpbmV9IEhlYXAnLAogICAgICB2YWx1ZXM6IHsKICAgICAgICBqYXZhVmlydHVhbE1hY2hpbmU6ICdKVk0nCiAgICAgIH0KICAgIH0pLAogICAgZmllbGQ6ICdub2RlX2p2bV9tZW1fcGVyY2VudCcsCiAgICBzb3J0YWJsZTogZ2V0U29ydEhhbmRsZXIoJ25vZGVfanZtX21lbV9wZXJjZW50JyksCiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcih2YWx1ZSwgbm9kZSkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY2VsbHMuTWV0cmljQ2VsbCwgewogICAgICAgIGlzT25saW5lOiBub2RlLmlzT25saW5lLAogICAgICAgIG1ldHJpYzogdmFsdWUsCiAgICAgICAgaXNQZXJjZW50OiB0cnVlLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJqdm1NZW1vcnkiCiAgICAgIH0pOwogICAgfQogIH0pOwogIGNvbHMucHVzaCh7CiAgICBuYW1lOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subW9uaXRvcmluZy5lbGFzdGljc2VhcmNoLm5vZGVzLmRpc2tGcmVlU3BhY2VDb2x1bW5UaXRsZScsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdEaXNrIEZyZWUgU3BhY2UnCiAgICB9KSwKICAgIGZpZWxkOiAnbm9kZV9mcmVlX3NwYWNlJywKICAgIHNvcnRhYmxlOiBnZXRTb3J0SGFuZGxlcignbm9kZV9mcmVlX3NwYWNlJyksCiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcih2YWx1ZSwgbm9kZSkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY2VsbHMuTWV0cmljQ2VsbCwgewogICAgICAgIGlzT25saW5lOiBub2RlLmlzT25saW5lLAogICAgICAgIG1ldHJpYzogdmFsdWUsCiAgICAgICAgaXNQZXJjZW50OiBmYWxzZSwKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiZGlza0ZyZWVTcGFjZSIKICAgICAgfSk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIGNvbHM7Cn07CgpmdW5jdGlvbiBFbGFzdGljc2VhcmNoTm9kZXMoX3JlZikgewogIHZhciBjbHVzdGVyU3RhdHVzID0gX3JlZi5jbHVzdGVyU3RhdHVzLAogICAgICBzaG93Q2dyb3VwTWV0cmljc0VsYXN0aWNzZWFyY2ggPSBfcmVmLnNob3dDZ3JvdXBNZXRyaWNzRWxhc3RpY3NlYXJjaCwKICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgWyJjbHVzdGVyU3RhdHVzIiwgInNob3dDZ3JvdXBNZXRyaWNzRWxhc3RpY3NlYXJjaCJdKTsKCiAgdmFyIHNvcnRpbmcgPSBwcm9wcy5zb3J0aW5nLAogICAgICBwYWdpbmF0aW9uID0gcHJvcHMucGFnaW5hdGlvbiwKICAgICAgb25UYWJsZUNoYW5nZSA9IHByb3BzLm9uVGFibGVDaGFuZ2UsCiAgICAgIGNsdXN0ZXJVdWlkID0gcHJvcHMuY2x1c3RlclV1aWQsCiAgICAgIHNldHVwTW9kZSA9IHByb3BzLnNldHVwTW9kZSwKICAgICAgZmV0Y2hNb3JlRGF0YSA9IHByb3BzLmZldGNoTW9yZURhdGE7CiAgdmFyIGNvbHVtbnMgPSBnZXRDb2x1bW5zKHNob3dDZ3JvdXBNZXRyaWNzRWxhc3RpY3NlYXJjaCwgc2V0dXBNb2RlLCBjbHVzdGVyVXVpZCk7IC8vIE1lcmdlIHRoZSBub2RlcyBkYXRhIHdpdGggdGhlIHNldHVwIGRhdGEgaWYgZW5hYmxlZAoKICB2YXIgbm9kZXMgPSBwcm9wcy5ub2RlcyB8fCBbXTsKCiAgaWYgKHNldHVwTW9kZS5lbmFibGVkICYmIHNldHVwTW9kZS5kYXRhKSB7CiAgICAvLyBXZSB3YW50IHRvIGNyZWF0ZSBhIHNlYW1sZXNzIGV4cGVyaWVuY2UgZm9yIHRoZSB1c2VyIGJ5IG1lcmdpbmcgaW4gdGhlIHNldHVwIGRhdGEKICAgIC8vIGFuZCB0aGUgbm9kZSBkYXRhIGZyb20gbW9uaXRvcmluZyBpbmRpY2VzIGluIHRoZSBsaWtlbHkgc2NlbmFyaW8gd2hlcmUgc29tZSBub2RlcwogICAgLy8gYXJlIHVzaW5nIE1CIGNvbGxlY3Rpb24gYW5kIHNvbWUgYXJlIHVzaW5nIG5vIGNvbGxlY3Rpb24KICAgIHZhciBub2Rlc0J5VXVpZCA9IG5vZGVzLnJlZHVjZShmdW5jdGlvbiAoYnlVdWlkLCBub2RlKSB7CiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBieVV1aWQsIF9kZWZpbmVQcm9wZXJ0eSh7fSwgbm9kZS5pZCB8fCBub2RlLnJlc29sdmVyLCBub2RlKSk7CiAgICB9LCB7fSk7CiAgICBub2Rlcy5wdXNoLmFwcGx5KG5vZGVzLCBfdG9Db25zdW1hYmxlQXJyYXkoT2JqZWN0LmVudHJpZXMoc2V0dXBNb2RlLmRhdGEuYnlVdWlkKS5yZWR1Y2UoZnVuY3Rpb24gKG5vZGVzLCBfcmVmMikgewogICAgICB2YXIgX3JlZjMgPSBfc2xpY2VkVG9BcnJheShfcmVmMiwgMiksCiAgICAgICAgICBub2RlVXVpZCA9IF9yZWYzWzBdLAogICAgICAgICAgaW5zdGFuY2UgPSBfcmVmM1sxXTsKCiAgICAgIGlmICghbm9kZXNCeVV1aWRbbm9kZVV1aWRdICYmIGluc3RhbmNlLm5vZGUpIHsKICAgICAgICBub2Rlcy5wdXNoKGluc3RhbmNlLm5vZGUpOwogICAgICB9CgogICAgICByZXR1cm4gbm9kZXM7CiAgICB9LCBbXSkpKTsKICB9CgogIHZhciBzZXR1cE1vZGVDYWxsb3V0ID0gbnVsbDsKCiAgaWYgKHNldHVwTW9kZS5lbmFibGVkICYmIHNldHVwTW9kZS5kYXRhKSB7CiAgICBzZXR1cE1vZGVDYWxsb3V0ID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfbGlzdGluZ19jYWxsb3V0Lkxpc3RpbmdDYWxsT3V0LCB7CiAgICAgIHNldHVwTW9kZURhdGE6IHNldHVwTW9kZS5kYXRhLAogICAgICB1c2VOb2RlSWRlbnRpZmllcjogdHJ1ZSwKICAgICAgcHJvZHVjdE5hbWU6IF9jb25zdGFudHMuRUxBU1RJQ1NFQVJDSF9TWVNURU1fSUQsCiAgICAgIGN1c3RvbVJlbmRlcmVyOiBmdW5jdGlvbiBjdXN0b21SZW5kZXJlcigpIHsKICAgICAgICB2YXIgY3VzdG9tUmVuZGVyUmVzcG9uc2UgPSB7CiAgICAgICAgICBzaG91bGRSZW5kZXI6IGZhbHNlLAogICAgICAgICAgY29tcG9uZW50VG9SZW5kZXI6IG51bGwKICAgICAgICB9OwogICAgICAgIHZhciBpc05ldE5ld1VzZXIgPSBzZXR1cE1vZGUuZGF0YS50b3RhbFVuaXF1ZUluc3RhbmNlQ291bnQgPT09IDA7CiAgICAgICAgdmFyIGhhc05vSW5zdGFuY2VzID0gc2V0dXBNb2RlLmRhdGEudG90YWxVbmlxdWVJbnRlcm5hbGx5Q29sbGVjdGVkQ291bnQgPT09IDAgJiYgc2V0dXBNb2RlLmRhdGEudG90YWxVbmlxdWVGdWxseU1pZ3JhdGVkQ291bnQgPT09IDAgJiYgc2V0dXBNb2RlLmRhdGEudG90YWxVbmlxdWVQYXJ0aWFsbHlNaWdyYXRlZENvdW50ID09PSAwOwoKICAgICAgICBpZiAoaXNOZXROZXdVc2VyIHx8IGhhc05vSW5zdGFuY2VzKSB7CiAgICAgICAgICBjdXN0b21SZW5kZXJSZXNwb25zZS5zaG91bGRSZW5kZXIgPSB0cnVlOwogICAgICAgICAgY3VzdG9tUmVuZGVyUmVzcG9uc2UuY29tcG9uZW50VG9SZW5kZXIgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNhbGxPdXQsIHsKICAgICAgICAgICAgdGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tb25pdG9yaW5nLmVsYXN0aWNzZWFyY2gubm9kZXMubWV0cmljYmVhdE1pZ3JhdGlvbi5kZXRlY3RlZE5vZGVUaXRsZScsIHsKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0VsYXN0aWNzZWFyY2ggbm9kZSBkZXRlY3RlZCcKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGNvbG9yOiBzZXR1cE1vZGUuZGF0YS50b3RhbFVuaXF1ZUluc3RhbmNlQ291bnQgPiAwID8gJ2RhbmdlcicgOiAnd2FybmluZycsCiAgICAgICAgICAgIGljb25UeXBlOiAiZmxhZyIKICAgICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subW9uaXRvcmluZy5lbGFzdGljc2VhcmNoLm5vZGVzLm1ldHJpY2JlYXRNaWdyYXRpb24uZGV0ZWN0ZWROb2RlRGVzY3JpcHRpb24nLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVGhlIGZvbGxvd2luZyBub2RlcyBhcmUgbm90IG1vbml0b3JlZC4gQ2xpY2sgJ01vbml0b3Igd2l0aCBNZXRyaWNiZWF0JyBiZWxvdyB0byBzdGFydCBtb25pdG9yaW5nLiIKICAgICAgICAgIH0pKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgICAgICAgICAgc2l6ZTogIm0iCiAgICAgICAgICB9KSk7CiAgICAgICAgfSBlbHNlIGlmIChzZXR1cE1vZGUuZGF0YS50b3RhbFVuaXF1ZVBhcnRpYWxseU1pZ3JhdGVkQ291bnQgPT09IHNldHVwTW9kZS5kYXRhLnRvdGFsVW5pcXVlSW5zdGFuY2VDb3VudCkgewogICAgICAgICAgdmFyIGZpbmlzaE1pZ3JhdGlvbkFjdGlvbiA9IF9sb2Rhc2guZGVmYXVsdC5nZXQoc2V0dXBNb2RlLm1ldGEsICdsaXZlQ2x1c3RlclV1aWQnKSA9PT0gY2x1c3RlclV1aWQgPyBzZXR1cE1vZGUuc2hvcnRjdXRUb0ZpbmlzaE1pZ3JhdGlvbiA6IHNldHVwTW9kZS5vcGVuRmx5b3V0OwogICAgICAgICAgY3VzdG9tUmVuZGVyUmVzcG9uc2Uuc2hvdWxkUmVuZGVyID0gdHJ1ZTsKICAgICAgICAgIGN1c3RvbVJlbmRlclJlc3BvbnNlLmNvbXBvbmVudFRvUmVuZGVyID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDYWxsT3V0LCB7CiAgICAgICAgICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subW9uaXRvcmluZy5lbGFzdGljc2VhcmNoLm5vZGVzLm1ldHJpY2JlYXRNaWdyYXRpb24uZGlzYWJsZUludGVybmFsQ29sbGVjdGlvblRpdGxlJywgewogICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTWV0cmljYmVhdCBpcyBub3cgbW9uaXRvcmluZyB5b3VyIEVsYXN0aWNzZWFyY2ggbm9kZXMnCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBjb2xvcjogIndhcm5pbmciLAogICAgICAgICAgICBpY29uVHlwZTogImZsYWciCiAgICAgICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1vbml0b3JpbmcuZWxhc3RpY3NlYXJjaC5ub2Rlcy5tZXRyaWNiZWF0TWlncmF0aW9uLmRpc2FibGVJbnRlcm5hbENvbGxlY3Rpb25EZXNjcmlwdGlvbicsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJEaXNhYmxlIHNlbGYgbW9uaXRvcmluZyB0byBmaW5pc2ggdGhlIG1pZ3JhdGlvbi4iCiAgICAgICAgICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b24sIHsKICAgICAgICAgICAgb25DbGljazogZmluaXNoTWlncmF0aW9uQWN0aW9uLAogICAgICAgICAgICBzaXplOiAicyIsCiAgICAgICAgICAgIGNvbG9yOiAid2FybmluZyIsCiAgICAgICAgICAgIGZpbGw6IHRydWUKICAgICAgICAgIH0sIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tb25pdG9yaW5nLmVsYXN0aWNzZWFyY2gubm9kZXMubWV0cmljYmVhdE1pZ3JhdGlvbi5kaXNhYmxlSW50ZXJuYWxDb2xsZWN0aW9uTWlncmF0aW9uQnV0dG9uTGFiZWwnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRGlzYWJsZSBzZWxmIG1vbml0b3JpbmcnCiAgICAgICAgICB9KSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCB7CiAgICAgICAgICAgIHNpemU6ICJtIgogICAgICAgICAgfSkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGN1c3RvbVJlbmRlclJlc3BvbnNlOwogICAgICB9CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIHJlbmRlckNsdXN0ZXJTdGF0dXMoKSB7CiAgICBpZiAoIWNsdXN0ZXJTdGF0dXMpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpUGFuZWwsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NsdXN0ZXJfc3RhdHVzLkNsdXN0ZXJTdGF0dXMsIHsKICAgICAgc3RhdHM6IGNsdXN0ZXJTdGF0dXMKICAgIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgewogICAgICBzaXplOiAibSIKICAgIH0pKTsKICB9CgogIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpUGFnZSwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVBhZ2VCb2R5LCBudWxsLCByZW5kZXJDbHVzdGVyU3RhdHVzKCksIHNldHVwTW9kZUNhbGxvdXQsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlQYWdlQ29udGVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfdGFibGUuRXVpTW9uaXRvcmluZ1NTUFRhYmxlLCB7CiAgICBjbGFzc05hbWU6ICJlbGFzdGljc2VhcmNoTm9kZXNUYWJsZSIsCiAgICByb3dzOiBub2RlcywKICAgIGNvbHVtbnM6IGNvbHVtbnMsCiAgICBzb3J0aW5nOiBzb3J0aW5nLAogICAgcGFnaW5hdGlvbjogcGFnaW5hdGlvbiwKICAgIHNldHVwTW9kZTogc2V0dXBNb2RlLAogICAgcHJvZHVjdE5hbWU6IF9jb25zdGFudHMuRUxBU1RJQ1NFQVJDSF9TWVNURU1fSUQsCiAgICBzZWFyY2g6IHsKICAgICAgYm94OiB7CiAgICAgICAgaW5jcmVtZW50YWw6IHRydWUsCiAgICAgICAgcGxhY2Vob2xkZXI6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tb25pdG9yaW5nLmVsYXN0aWNzZWFyY2gubm9kZXMubW9uaXRvcmluZ1RhYmxlUGxhY2Vob2xkZXInLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0ZpbHRlciBOb2Rlc+KApicKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgb25UYWJsZUNoYW5nZTogb25UYWJsZUNoYW5nZSwKICAgIGZldGNoTW9yZURhdGE6IGZldGNoTW9yZURhdGEKICB9KSkpKTsKfQ=="},null]}