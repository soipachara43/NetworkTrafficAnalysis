{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/cross_cluster_replication/public/np_ready/app/store/actions/auto_follow_pattern.js","dependencies":[{"path":"x-pack/legacy/plugins/cross_cluster_replication/public/np_ready/app/store/actions/auto_follow_pattern.js","mtime":1589249552208},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnJlc3VtZUF1dG9Gb2xsb3dQYXR0ZXJuID0gZXhwb3J0cy5wYXVzZUF1dG9Gb2xsb3dQYXR0ZXJuID0gZXhwb3J0cy5kZWxldGVBdXRvRm9sbG93UGF0dGVybiA9IGV4cG9ydHMuc2F2ZUF1dG9Gb2xsb3dQYXR0ZXJuID0gZXhwb3J0cy5nZXRBdXRvRm9sbG93UGF0dGVybiA9IGV4cG9ydHMubG9hZEF1dG9Gb2xsb3dQYXR0ZXJucyA9IGV4cG9ydHMuc2VsZWN0RWRpdEF1dG9Gb2xsb3dQYXR0ZXJuID0gZXhwb3J0cy5zZWxlY3REZXRhaWxBdXRvRm9sbG93UGF0dGVybiA9IHZvaWQgMDsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9ub3RpZmljYXRpb25zID0gcmVxdWlyZSgiLi4vLi4vc2VydmljZXMvbm90aWZpY2F0aW9ucyIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuLi8uLi9jb25zdGFudHMiKTsKCnZhciBfYXBpID0gcmVxdWlyZSgiLi4vLi4vc2VydmljZXMvYXBpIik7Cgp2YXIgX3JvdXRpbmcgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4uLy4uL3NlcnZpY2VzL3JvdXRpbmciKSk7Cgp2YXIgdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoIi4uL2FjdGlvbl90eXBlcyIpKTsKCnZhciBfYXBpMiA9IHJlcXVpcmUoIi4vYXBpIik7Cgp2YXIgX3NlbGVjdG9ycyA9IHJlcXVpcmUoIi4uL3NlbGVjdG9ycyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9Cgp2YXIgc2NvcGUgPSBfY29uc3RhbnRzLlNFQ1RJT05TLkFVVE9fRk9MTE9XX1BBVFRFUk47Cgp2YXIgc2VsZWN0RGV0YWlsQXV0b0ZvbGxvd1BhdHRlcm4gPSBmdW5jdGlvbiBzZWxlY3REZXRhaWxBdXRvRm9sbG93UGF0dGVybihpZCkgewogIHJldHVybiB7CiAgICB0eXBlOiB0LkFVVE9fRk9MTE9XX1BBVFRFUk5fU0VMRUNUX0RFVEFJTCwKICAgIHBheWxvYWQ6IGlkCiAgfTsKfTsKCmV4cG9ydHMuc2VsZWN0RGV0YWlsQXV0b0ZvbGxvd1BhdHRlcm4gPSBzZWxlY3REZXRhaWxBdXRvRm9sbG93UGF0dGVybjsKCnZhciBzZWxlY3RFZGl0QXV0b0ZvbGxvd1BhdHRlcm4gPSBmdW5jdGlvbiBzZWxlY3RFZGl0QXV0b0ZvbGxvd1BhdHRlcm4oaWQpIHsKICByZXR1cm4gewogICAgdHlwZTogdC5BVVRPX0ZPTExPV19QQVRURVJOX1NFTEVDVF9FRElULAogICAgcGF5bG9hZDogaWQKICB9Owp9OwoKZXhwb3J0cy5zZWxlY3RFZGl0QXV0b0ZvbGxvd1BhdHRlcm4gPSBzZWxlY3RFZGl0QXV0b0ZvbGxvd1BhdHRlcm47Cgp2YXIgbG9hZEF1dG9Gb2xsb3dQYXR0ZXJucyA9IGZ1bmN0aW9uIGxvYWRBdXRvRm9sbG93UGF0dGVybnMoKSB7CiAgdmFyIGlzVXBkYXRpbmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlOwogIHJldHVybiAoMCwgX2FwaTIuc2VuZEFwaVJlcXVlc3QpKHsKICAgIGxhYmVsOiB0LkFVVE9fRk9MTE9XX1BBVFRFUk5fTE9BRCwKICAgIHNjb3BlOiBzY29wZSwKICAgIHN0YXR1czogaXNVcGRhdGluZyA/IF9jb25zdGFudHMuQVBJX1NUQVRVUy5VUERBVElORyA6IF9jb25zdGFudHMuQVBJX1NUQVRVUy5MT0FESU5HLAogICAgaGFuZGxlcjogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2hhbmRsZXIgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfYXBpLmxvYWRBdXRvRm9sbG93UGF0dGVybnMpKCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0LnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gaGFuZGxlcigpIHsKICAgICAgICByZXR1cm4gX2hhbmRsZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGhhbmRsZXI7CiAgICB9KCkKICB9KTsKfTsKCmV4cG9ydHMubG9hZEF1dG9Gb2xsb3dQYXR0ZXJucyA9IGxvYWRBdXRvRm9sbG93UGF0dGVybnM7Cgp2YXIgZ2V0QXV0b0ZvbGxvd1BhdHRlcm4gPSBmdW5jdGlvbiBnZXRBdXRvRm9sbG93UGF0dGVybihpZCkgewogIHJldHVybiAoMCwgX2FwaTIuc2VuZEFwaVJlcXVlc3QpKHsKICAgIGxhYmVsOiB0LkFVVE9fRk9MTE9XX1BBVFRFUk5fR0VULAogICAgc2NvcGU6ICIiLmNvbmNhdChzY29wZSwgIi1nZXQiKSwKICAgIGhhbmRsZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9oYW5kbGVyMiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gKDAsIF9hcGkuZ2V0QXV0b0ZvbGxvd1BhdHRlcm4pKGlkKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0Mi5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gaGFuZGxlcigpIHsKICAgICAgICByZXR1cm4gX2hhbmRsZXIyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBoYW5kbGVyOwogICAgfSgpCiAgfSk7Cn07CgpleHBvcnRzLmdldEF1dG9Gb2xsb3dQYXR0ZXJuID0gZ2V0QXV0b0ZvbGxvd1BhdHRlcm47Cgp2YXIgc2F2ZUF1dG9Gb2xsb3dQYXR0ZXJuID0gZnVuY3Rpb24gc2F2ZUF1dG9Gb2xsb3dQYXR0ZXJuKGlkLCBhdXRvRm9sbG93UGF0dGVybikgewogIHZhciBpc1VwZGF0aW5nID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTsKICByZXR1cm4gKDAsIF9hcGkyLnNlbmRBcGlSZXF1ZXN0KSh7CiAgICBsYWJlbDogaXNVcGRhdGluZyA/IHQuQVVUT19GT0xMT1dfUEFUVEVSTl9VUERBVEUgOiB0LkFVVE9fRk9MTE9XX1BBVFRFUk5fQ1JFQVRFLAogICAgc3RhdHVzOiBfY29uc3RhbnRzLkFQSV9TVEFUVVMuU0FWSU5HLAogICAgc2NvcGU6ICIiLmNvbmNhdChzY29wZSwgIi1zYXZlIiksCiAgICBoYW5kbGVyOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfaGFuZGxlcjMgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCFpc1VwZGF0aW5nKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfYXBpLnVwZGF0ZUF1dG9Gb2xsb3dQYXR0ZXJuKShpZCwgYXV0b0ZvbGxvd1BhdHRlcm4pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQzLnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gKDAsIF9hcGkuY3JlYXRlQXV0b0ZvbGxvd1BhdHRlcm4pKF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICAgICAgICBpZDogaWQKICAgICAgICAgICAgICAgIH0sIGF1dG9Gb2xsb3dQYXR0ZXJuKSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDMuc2VudCk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgICAgcmV0dXJuIF9oYW5kbGVyMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaGFuZGxlcjsKICAgIH0oKSwKICAgIG9uU3VjY2VzczogZnVuY3Rpb24gb25TdWNjZXNzKCkgewogICAgICB2YXIgc3VjY2Vzc01lc3NhZ2UgPSBpc1VwZGF0aW5nID8gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmNyb3NzQ2x1c3RlclJlcGxpY2F0aW9uLmF1dG9Gb2xsb3dQYXR0ZXJuLnVwZGF0ZUFjdGlvbi5zdWNjZXNzTm90aWZpY2F0aW9uVGl0bGUnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBdXRvLWZvbGxvdyBwYXR0ZXJuICd7bmFtZX0nIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIG5hbWU6IGlkCiAgICAgICAgfQogICAgICB9KSA6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5jcm9zc0NsdXN0ZXJSZXBsaWNhdGlvbi5hdXRvRm9sbG93UGF0dGVybi5hZGRBY3Rpb24uc3VjY2Vzc05vdGlmaWNhdGlvblRpdGxlJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQWRkZWQgYXV0by1mb2xsb3cgcGF0dGVybiAne25hbWV9JyIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBuYW1lOiBpZAogICAgICAgIH0KICAgICAgfSk7CiAgICAgICgwLCBfbm90aWZpY2F0aW9ucy5nZXROb3RpZmljYXRpb25zKSgpLmFkZFN1Y2Nlc3Moc3VjY2Vzc01lc3NhZ2UpOwoKICAgICAgX3JvdXRpbmcuZGVmYXVsdC5uYXZpZ2F0ZSgiL2F1dG9fZm9sbG93X3BhdHRlcm5zIiwgdW5kZWZpbmVkLCB7CiAgICAgICAgcGF0dGVybjogZW5jb2RlVVJJQ29tcG9uZW50KGlkKQogICAgICB9KTsKICAgIH0KICB9KTsKfTsKCmV4cG9ydHMuc2F2ZUF1dG9Gb2xsb3dQYXR0ZXJuID0gc2F2ZUF1dG9Gb2xsb3dQYXR0ZXJuOwoKdmFyIGRlbGV0ZUF1dG9Gb2xsb3dQYXR0ZXJuID0gZnVuY3Rpb24gZGVsZXRlQXV0b0ZvbGxvd1BhdHRlcm4oaWQpIHsKICByZXR1cm4gKDAsIF9hcGkyLnNlbmRBcGlSZXF1ZXN0KSh7CiAgICBsYWJlbDogdC5BVVRPX0ZPTExPV19QQVRURVJOX0RFTEVURSwKICAgIHNjb3BlOiAiIi5jb25jYXQoc2NvcGUsICItZGVsZXRlIiksCiAgICBzdGF0dXM6IF9jb25zdGFudHMuQVBJX1NUQVRVUy5ERUxFVElORywKICAgIGhhbmRsZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9oYW5kbGVyNCA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgKDAsIF9hcGkuZGVsZXRlQXV0b0ZvbGxvd1BhdHRlcm4pKGlkKSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgICAgcmV0dXJuIF9oYW5kbGVyNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaGFuZGxlcjsKICAgIH0oKSwKICAgIG9uU3VjY2VzczogZnVuY3Rpb24gb25TdWNjZXNzKHJlc3BvbnNlLCBkaXNwYXRjaCwgZ2V0U3RhdGUpIHsKICAgICAgLyoqCiAgICAgICAqIFdlIGNhbiBoYXZlIDEgb3IgbW9yZSBhdXRvLWZvbGxvdyBwYXR0ZXJuIGRlbGV0ZSBvcGVyYXRpb24KICAgICAgICogdGhhdCBjYW4gZmFpbCBvciBzdWNjZWVkLiBXZSB3aWxsIHNob3cgMSB0b2FzdCBub3RpZmljYXRpb24gZm9yIGVhY2guCiAgICAgICAqLwogICAgICBpZiAocmVzcG9uc2UuZXJyb3JzLmxlbmd0aCkgewogICAgICAgIHZhciBoYXNNdWx0aXBsZUVycm9ycyA9IHJlc3BvbnNlLmVycm9ycy5sZW5ndGggPiAxOwogICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBoYXNNdWx0aXBsZUVycm9ycyA/IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5jcm9zc0NsdXN0ZXJSZXBsaWNhdGlvbi5hdXRvRm9sbG93UGF0dGVybi5yZW1vdmVBY3Rpb24uZXJyb3JNdWx0aXBsZU5vdGlmaWNhdGlvblRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFcnJvciByZW1vdmluZyB7Y291bnR9IGF1dG8tZm9sbG93IHBhdHRlcm5zIiwKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBjb3VudDogcmVzcG9uc2UuZXJyb3JzLmxlbmd0aAogICAgICAgICAgfQogICAgICAgIH0pIDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmNyb3NzQ2x1c3RlclJlcGxpY2F0aW9uLmF1dG9Gb2xsb3dQYXR0ZXJuLnJlbW92ZUFjdGlvbi5lcnJvclNpbmdsZU5vdGlmaWNhdGlvblRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFcnJvciByZW1vdmluZyB0aGUgJ3tuYW1lfScgYXV0by1mb2xsb3cgcGF0dGVybiIsCiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgbmFtZTogcmVzcG9uc2UuZXJyb3JzWzBdLmlkCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgKDAsIF9ub3RpZmljYXRpb25zLmdldE5vdGlmaWNhdGlvbnMpKCkuYWRkRGFuZ2VyKGVycm9yTWVzc2FnZSk7CiAgICAgIH0KCiAgICAgIGlmIChyZXNwb25zZS5pdGVtc0RlbGV0ZWQubGVuZ3RoKSB7CiAgICAgICAgdmFyIGhhc011bHRpcGxlRGVsZXRlID0gcmVzcG9uc2UuaXRlbXNEZWxldGVkLmxlbmd0aCA+IDE7CiAgICAgICAgdmFyIHN1Y2Nlc3NNZXNzYWdlID0gaGFzTXVsdGlwbGVEZWxldGUgPyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24uYXV0b0ZvbGxvd1BhdHRlcm4ucmVtb3ZlQWN0aW9uLnN1Y2Nlc3NNdWx0aXBsZU5vdGlmaWNhdGlvblRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJ7Y291bnR9IGF1dG8tZm9sbG93IHBhdHRlcm5zIHdlcmUgcmVtb3ZlZCIsCiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgY291bnQ6IHJlc3BvbnNlLml0ZW1zRGVsZXRlZC5sZW5ndGgKICAgICAgICAgIH0KICAgICAgICB9KSA6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5jcm9zc0NsdXN0ZXJSZXBsaWNhdGlvbi5hdXRvRm9sbG93UGF0dGVybi5yZW1vdmVBY3Rpb24uc3VjY2Vzc1NpbmdsZU5vdGlmaWNhdGlvblRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBdXRvLWZvbGxvdyBwYXR0ZXJuICd7bmFtZX0nIHdhcyByZW1vdmVkIiwKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBuYW1lOiByZXNwb25zZS5pdGVtc0RlbGV0ZWRbMF0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICAoMCwgX25vdGlmaWNhdGlvbnMuZ2V0Tm90aWZpY2F0aW9ucykoKS5hZGRTdWNjZXNzKHN1Y2Nlc3NNZXNzYWdlKTsgLy8gSWYgd2UndmUganVzdCBkZWxldGVkIGEgcGF0dGVybiB3ZSB3ZXJlIGxvb2tpbmcgYXQsIHdlIG5lZWQgdG8gY2xvc2UgdGhlIHBhbmVsLgoKICAgICAgICB2YXIgYXV0b0ZvbGxvd1BhdHRlcm5JZCA9ICgwLCBfc2VsZWN0b3JzLmdldFNlbGVjdGVkQXV0b0ZvbGxvd1BhdHRlcm5JZCkoJ2RldGFpbCcpKGdldFN0YXRlKCkpOwoKICAgICAgICBpZiAocmVzcG9uc2UuaXRlbXNEZWxldGVkLmluY2x1ZGVzKGF1dG9Gb2xsb3dQYXR0ZXJuSWQpKSB7CiAgICAgICAgICBkaXNwYXRjaChzZWxlY3REZXRhaWxBdXRvRm9sbG93UGF0dGVybihudWxsKSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSk7Cn07CgpleHBvcnRzLmRlbGV0ZUF1dG9Gb2xsb3dQYXR0ZXJuID0gZGVsZXRlQXV0b0ZvbGxvd1BhdHRlcm47Cgp2YXIgcGF1c2VBdXRvRm9sbG93UGF0dGVybiA9IGZ1bmN0aW9uIHBhdXNlQXV0b0ZvbGxvd1BhdHRlcm4oaWQpIHsKICByZXR1cm4gKDAsIF9hcGkyLnNlbmRBcGlSZXF1ZXN0KSh7CiAgICBsYWJlbDogdC5BVVRPX0ZPTExPV19QQVRURVJOX1BBVVNFLAogICAgc2NvcGU6ICIiLmNvbmNhdChzY29wZSwgIi1wYXVzZSIpLAogICAgc3RhdHVzOiBfY29uc3RhbnRzLkFQSV9TVEFUVVMuVVBEQVRJTkcsCiAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICByZXR1cm4gKDAsIF9hcGkucGF1c2VBdXRvRm9sbG93UGF0dGVybikoaWQpOwogICAgfSwKICAgIG9uU3VjY2VzczogZnVuY3Rpb24gb25TdWNjZXNzKHJlc3BvbnNlKSB7CiAgICAgIC8qKgogICAgICAgKiBXZSBjYW4gaGF2ZSAxIG9yIG1vcmUgYXV0by1mb2xsb3cgcGF0dGVybiBwYXVzZSBvcGVyYXRpb25zCiAgICAgICAqIHRoYXQgY2FuIGZhaWwgb3Igc3VjY2VlZC4gV2Ugd2lsbCBzaG93IDEgdG9hc3Qgbm90aWZpY2F0aW9uIGZvciBlYWNoLgogICAgICAgKi8KICAgICAgaWYgKHJlc3BvbnNlLmVycm9ycy5sZW5ndGgpIHsKICAgICAgICB2YXIgaGFzTXVsdGlwbGVFcnJvcnMgPSByZXNwb25zZS5lcnJvcnMubGVuZ3RoID4gMTsKICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gaGFzTXVsdGlwbGVFcnJvcnMgPyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24uYXV0b0ZvbGxvd1BhdHRlcm4ucGF1c2VBY3Rpb24uZXJyb3JNdWx0aXBsZU5vdGlmaWNhdGlvblRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFcnJvciBwYXVzaW5nIHtjb3VudH0gYXV0by1mb2xsb3cgcGF0dGVybnMiLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIGNvdW50OiByZXNwb25zZS5lcnJvcnMubGVuZ3RoCiAgICAgICAgICB9CiAgICAgICAgfSkgOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24uYXV0b0ZvbGxvd1BhdHRlcm4ucGF1c2VBY3Rpb24uZXJyb3JTaW5nbGVOb3RpZmljYXRpb25UaXRsZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRXJyb3IgcGF1c2luZyB0aGUgJ3tuYW1lfScgYXV0by1mb2xsb3cgcGF0dGVybiIsCiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgbmFtZTogcmVzcG9uc2UuZXJyb3JzWzBdLmlkCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgKDAsIF9ub3RpZmljYXRpb25zLmdldE5vdGlmaWNhdGlvbnMpKCkuYWRkRGFuZ2VyKGVycm9yTWVzc2FnZSk7CiAgICAgIH0KCiAgICAgIGlmIChyZXNwb25zZS5pdGVtc1BhdXNlZC5sZW5ndGgpIHsKICAgICAgICB2YXIgaGFzTXVsdGlwbGUgPSByZXNwb25zZS5pdGVtc1BhdXNlZC5sZW5ndGggPiAxOwogICAgICAgIHZhciBzdWNjZXNzTWVzc2FnZSA9IGhhc011bHRpcGxlID8gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmNyb3NzQ2x1c3RlclJlcGxpY2F0aW9uLmF1dG9Gb2xsb3dQYXR0ZXJuLnBhdXNlQWN0aW9uLnN1Y2Nlc3NNdWx0aXBsZU5vdGlmaWNhdGlvblRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJ7Y291bnR9IGF1dG8tZm9sbG93IHBhdHRlcm5zIHdlcmUgcGF1c2VkIiwKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBjb3VudDogcmVzcG9uc2UuaXRlbXNQYXVzZWQubGVuZ3RoCiAgICAgICAgICB9CiAgICAgICAgfSkgOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24uYXV0b0ZvbGxvd1BhdHRlcm4ucGF1c2VBY3Rpb24uc3VjY2Vzc1NpbmdsZU5vdGlmaWNhdGlvblRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBdXRvLWZvbGxvdyBwYXR0ZXJuICd7bmFtZX0nIHdhcyBwYXVzZWQiLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIG5hbWU6IHJlc3BvbnNlLml0ZW1zUGF1c2VkWzBdCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgKDAsIF9ub3RpZmljYXRpb25zLmdldE5vdGlmaWNhdGlvbnMpKCkuYWRkU3VjY2VzcyhzdWNjZXNzTWVzc2FnZSk7CiAgICAgIH0KICAgIH0KICB9KTsKfTsKCmV4cG9ydHMucGF1c2VBdXRvRm9sbG93UGF0dGVybiA9IHBhdXNlQXV0b0ZvbGxvd1BhdHRlcm47Cgp2YXIgcmVzdW1lQXV0b0ZvbGxvd1BhdHRlcm4gPSBmdW5jdGlvbiByZXN1bWVBdXRvRm9sbG93UGF0dGVybihpZCkgewogIHJldHVybiAoMCwgX2FwaTIuc2VuZEFwaVJlcXVlc3QpKHsKICAgIGxhYmVsOiB0LkFVVE9fRk9MTE9XX1BBVFRFUk5fUkVTVU1FLAogICAgc2NvcGU6ICIiLmNvbmNhdChzY29wZSwgIi1yZXN1bWUiKSwKICAgIHN0YXR1czogX2NvbnN0YW50cy5BUElfU1RBVFVTLlVQREFUSU5HLAogICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcigpIHsKICAgICAgcmV0dXJuICgwLCBfYXBpLnJlc3VtZUF1dG9Gb2xsb3dQYXR0ZXJuKShpZCk7CiAgICB9LAogICAgb25TdWNjZXNzOiBmdW5jdGlvbiBvblN1Y2Nlc3MocmVzcG9uc2UpIHsKICAgICAgLyoqCiAgICAgICAqIFdlIGNhbiBoYXZlIDEgb3IgbW9yZSBhdXRvLWZvbGxvdyBwYXR0ZXJuIHJlc3VtZSBvcGVyYXRpb25zCiAgICAgICAqIHRoYXQgY2FuIGZhaWwgb3Igc3VjY2VlZC4gV2Ugd2lsbCBzaG93IDEgdG9hc3Qgbm90aWZpY2F0aW9uIGZvciBlYWNoLgogICAgICAgKi8KICAgICAgaWYgKHJlc3BvbnNlLmVycm9ycy5sZW5ndGgpIHsKICAgICAgICB2YXIgaGFzTXVsdGlwbGVFcnJvcnMgPSByZXNwb25zZS5lcnJvcnMubGVuZ3RoID4gMTsKICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gaGFzTXVsdGlwbGVFcnJvcnMgPyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24uYXV0b0ZvbGxvd1BhdHRlcm4ucmVzdW1lQWN0aW9uLmVycm9yTXVsdGlwbGVOb3RpZmljYXRpb25UaXRsZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRXJyb3IgcmVzdW1pbmcge2NvdW50fSBhdXRvLWZvbGxvdyBwYXR0ZXJucyIsCiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgY291bnQ6IHJlc3BvbnNlLmVycm9ycy5sZW5ndGgKICAgICAgICAgIH0KICAgICAgICB9KSA6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5jcm9zc0NsdXN0ZXJSZXBsaWNhdGlvbi5hdXRvRm9sbG93UGF0dGVybi5yZXN1bWVBY3Rpb24uZXJyb3JTaW5nbGVOb3RpZmljYXRpb25UaXRsZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRXJyb3IgcmVzdW1pbmcgdGhlICd7bmFtZX0nIGF1dG8tZm9sbG93IHBhdHRlcm4iLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIG5hbWU6IHJlc3BvbnNlLmVycm9yc1swXS5pZAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgICgwLCBfbm90aWZpY2F0aW9ucy5nZXROb3RpZmljYXRpb25zKSgpLmFkZERhbmdlcihlcnJvck1lc3NhZ2UpOwogICAgICB9CgogICAgICBpZiAocmVzcG9uc2UuaXRlbXNSZXN1bWVkLmxlbmd0aCkgewogICAgICAgIHZhciBoYXNNdWx0aXBsZSA9IHJlc3BvbnNlLml0ZW1zUmVzdW1lZC5sZW5ndGggPiAxOwogICAgICAgIHZhciBzdWNjZXNzTWVzc2FnZSA9IGhhc011bHRpcGxlID8gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmNyb3NzQ2x1c3RlclJlcGxpY2F0aW9uLmF1dG9Gb2xsb3dQYXR0ZXJuLnJlc3VtZUFjdGlvbi5zdWNjZXNzTXVsdGlwbGVOb3RpZmljYXRpb25UaXRsZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAie2NvdW50fSBhdXRvLWZvbGxvdyBwYXR0ZXJucyB3ZXJlIHJlc3VtZWQiLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIGNvdW50OiByZXNwb25zZS5pdGVtc1Jlc3VtZWQubGVuZ3RoCiAgICAgICAgICB9CiAgICAgICAgfSkgOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24uYXV0b0ZvbGxvd1BhdHRlcm4ucmVzdW1lQWN0aW9uLnN1Y2Nlc3NTaW5nbGVOb3RpZmljYXRpb25UaXRsZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQXV0by1mb2xsb3cgcGF0dGVybiAne25hbWV9JyB3YXMgcmVzdW1lZCIsCiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgbmFtZTogcmVzcG9uc2UuaXRlbXNSZXN1bWVkWzBdCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgKDAsIF9ub3RpZmljYXRpb25zLmdldE5vdGlmaWNhdGlvbnMpKCkuYWRkU3VjY2VzcyhzdWNjZXNzTWVzc2FnZSk7CiAgICAgIH0KICAgIH0KICB9KTsKfTsKCmV4cG9ydHMucmVzdW1lQXV0b0ZvbGxvd1BhdHRlcm4gPSByZXN1bWVBdXRvRm9sbG93UGF0dGVybjs="},null]}