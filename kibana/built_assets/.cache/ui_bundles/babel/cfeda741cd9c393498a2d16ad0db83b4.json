{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/rollup/public/index_pattern_creation/rollup_index_pattern_creation_config.js","dependencies":[{"path":"x-pack/legacy/plugins/rollup/public/index_pattern_creation/rollup_index_pattern_creation_config.js","mtime":1589249552836},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlJvbGx1cEluZGV4UGF0dGVybkNyZWF0aW9uQ29uZmlnID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfcm9sbHVwX3Byb21wdCA9IHJlcXVpcmUoIi4vY29tcG9uZW50cy9yb2xsdXBfcHJvbXB0Iik7Cgp2YXIgX3B1YmxpYyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9sZWdhY3kvY29yZV9wbHVnaW5zL21hbmFnZW1lbnQvcHVibGljIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7IHRyeSB7IHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsgfSBjYXRjaCAoZXJyb3IpIHsgcmVqZWN0KGVycm9yKTsgcmV0dXJuOyB9IGlmIChpbmZvLmRvbmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0gZWxzZSB7IFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsgfSB9CgpmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgc2VsZiA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTsgZnVuY3Rpb24gX25leHQodmFsdWUpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAibmV4dCIsIHZhbHVlKTsgfSBmdW5jdGlvbiBfdGhyb3coZXJyKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgInRocm93IiwgZXJyKTsgfSBfbmV4dCh1bmRlZmluZWQpOyB9KTsgfTsgfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCnZhciByb2xsdXBJbmRleFBhdHRlcm5UeXBlTmFtZSA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5yb2xsdXBKb2JzLmVkaXRSb2xsdXBJbmRleFBhdHRlcm4uY3JlYXRlSW5kZXguZGVmYXVsdFR5cGVOYW1lJywgewogIGRlZmF1bHRNZXNzYWdlOiAncm9sbHVwIGluZGV4IHBhdHRlcm4nCn0pOwoKdmFyIHJvbGx1cEluZGV4UGF0dGVybkJ1dHRvblRleHQgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sucm9sbHVwSm9icy5lZGl0Um9sbHVwSW5kZXhQYXR0ZXJuLmNyZWF0ZUluZGV4LmRlZmF1bHRCdXR0b25UZXh0JywgewogIGRlZmF1bHRNZXNzYWdlOiAnUm9sbHVwIGluZGV4IHBhdHRlcm4nCn0pOwoKdmFyIHJvbGx1cEluZGV4UGF0dGVybkJ1dHRvbkRlc2NyaXB0aW9uID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnJvbGx1cEpvYnMuZWRpdFJvbGx1cEluZGV4UGF0dGVybi5jcmVhdGVJbmRleC5kZWZhdWx0QnV0dG9uRGVzY3JpcHRpb24nLCB7CiAgZGVmYXVsdE1lc3NhZ2U6ICdQZXJmb3JtIGxpbWl0ZWQgYWdncmVnYXRpb25zIGFnYWluc3Qgc3VtbWFyaXplZCBkYXRhJwp9KTsKCnZhciByb2xsdXBJbmRleFBhdHRlcm5Ob01hdGNoRXJyb3IgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sucm9sbHVwSm9icy5lZGl0Um9sbHVwSW5kZXhQYXR0ZXJuLmNyZWF0ZUluZGV4Lm5vTWF0Y2hFcnJvcicsIHsKICBkZWZhdWx0TWVzc2FnZTogJ1JvbGx1cCBpbmRleCBwYXR0ZXJuIGVycm9yOiBtdXN0IG1hdGNoIG9uZSByb2xsdXAgaW5kZXgnCn0pOwoKdmFyIHJvbGx1cEluZGV4UGF0dGVyblRvb01hbnlNYXRjaGVzRXJyb3IgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sucm9sbHVwSm9icy5lZGl0Um9sbHVwSW5kZXhQYXR0ZXJuLmNyZWF0ZUluZGV4LnRvb01hbnlNYXRjaGVzRXJyb3InLCB7CiAgZGVmYXVsdE1lc3NhZ2U6ICdSb2xsdXAgaW5kZXggcGF0dGVybiBlcnJvcjogY2FuIG9ubHkgbWF0Y2ggb25lIHJvbGx1cCBpbmRleCcKfSk7Cgp2YXIgcm9sbHVwSW5kZXhQYXR0ZXJuSW5kZXhMYWJlbCA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5yb2xsdXBKb2JzLmVkaXRSb2xsdXBJbmRleFBhdHRlcm4uY3JlYXRlSW5kZXguaW5kZXhMYWJlbCcsIHsKICBkZWZhdWx0TWVzc2FnZTogJ1JvbGx1cCcKfSk7Cgp2YXIgUm9sbHVwSW5kZXhQYXR0ZXJuQ3JlYXRpb25Db25maWcgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfSW5kZXhQYXR0ZXJuQ3JlYXRpb24pIHsKICBfaW5oZXJpdHMoUm9sbHVwSW5kZXhQYXR0ZXJuQ3JlYXRpb25Db25maWcsIF9JbmRleFBhdHRlcm5DcmVhdGlvbik7CgogIGZ1bmN0aW9uIFJvbGx1cEluZGV4UGF0dGVybkNyZWF0aW9uQ29uZmlnKG9wdGlvbnMpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUm9sbHVwSW5kZXhQYXR0ZXJuQ3JlYXRpb25Db25maWcpOwoKICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKFJvbGx1cEluZGV4UGF0dGVybkNyZWF0aW9uQ29uZmlnKS5jYWxsKHRoaXMsIF9vYmplY3RTcHJlYWQoewogICAgICB0eXBlOiAncm9sbHVwJywKICAgICAgbmFtZTogcm9sbHVwSW5kZXhQYXR0ZXJuVHlwZU5hbWUsCiAgICAgIHNob3dTeXN0ZW1JbmRpY2VzOiBmYWxzZSwKICAgICAgaXNCZXRhOiB0cnVlCiAgICB9LCBvcHRpb25zKSkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImtleSIsICdyb2xsdXAnKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJpc1JvbGx1cEluZGV4IiwgZnVuY3Rpb24gKGluZGV4TmFtZSkgewogICAgICByZXR1cm4gX3RoaXMucm9sbHVwSW5kaWNlcy5pbmNsdWRlcyhpbmRleE5hbWUpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiY2hlY2tJbmRpY2VzRm9yRXJyb3JzIiwgZnVuY3Rpb24gKGluZGljZXMpIHsKICAgICAgX3RoaXMucm9sbHVwSW5kZXggPSBudWxsOwoKICAgICAgaWYgKCFpbmRpY2VzIHx8ICFpbmRpY2VzLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHJvbGx1cEluZGljZXMgPSBpbmRpY2VzLmZpbHRlcihmdW5jdGlvbiAoaW5kZXgpIHsKICAgICAgICByZXR1cm4gX3RoaXMuaXNSb2xsdXBJbmRleChpbmRleC5uYW1lKTsKICAgICAgfSk7CgogICAgICBpZiAoIXJvbGx1cEluZGljZXMubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIFtyb2xsdXBJbmRleFBhdHRlcm5Ob01hdGNoRXJyb3JdOwogICAgICB9IGVsc2UgaWYgKHJvbGx1cEluZGljZXMubGVuZ3RoID4gMSkgewogICAgICAgIHJldHVybiBbcm9sbHVwSW5kZXhQYXR0ZXJuVG9vTWFueU1hdGNoZXNFcnJvcl07CiAgICAgIH0KCiAgICAgIHZhciByb2xsdXBJbmRleE5hbWUgPSByb2xsdXBJbmRpY2VzWzBdLm5hbWU7CiAgICAgIHZhciBlcnJvciA9IF90aGlzLnJvbGx1cEluZGljZXNDYXBhYmlsaXRpZXNbcm9sbHVwSW5kZXhOYW1lXS5lcnJvcjsKCiAgICAgIGlmIChlcnJvcikgewogICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sucm9sbHVwSm9icy5lZGl0Um9sbHVwSW5kZXhQYXR0ZXJuLmNyZWF0ZUluZGV4LnVuY2F1Z2h0RXJyb3InLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1JvbGx1cCBpbmRleCBwYXR0ZXJuIGVycm9yOiB7ZXJyb3J9JywKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBlcnJvcjogZXJyb3IKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIFtlcnJvck1lc3NhZ2VdOwogICAgICB9CgogICAgICBfdGhpcy5yb2xsdXBJbmRleCA9IHJvbGx1cEluZGV4TmFtZTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImdldEluZGV4UGF0dGVybk1hcHBpbmdzIiwgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX3RoaXMucm9sbHVwSW5kZXggPyB7CiAgICAgICAgdHlwZTogX3RoaXMudHlwZSwKICAgICAgICB0eXBlTWV0YTogewogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIHJvbGx1cF9pbmRleDogX3RoaXMucm9sbHVwSW5kZXgKICAgICAgICAgIH0sCiAgICAgICAgICBhZ2dzOiBfdGhpcy5yb2xsdXBJbmRpY2VzQ2FwYWJpbGl0aWVzW190aGlzLnJvbGx1cEluZGV4XS5hZ2dzCiAgICAgICAgfQogICAgICB9IDoge307CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJyZW5kZXJQcm9tcHQiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yb2xsdXBfcHJvbXB0LlJvbGx1cFByb21wdCwgbnVsbCk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJnZXRGZXRjaEZvcldpbGRjYXJkT3B0aW9ucyIsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB0eXBlOiBfdGhpcy50eXBlLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgcm9sbHVwX2luZGV4OiBfdGhpcy5yb2xsdXBJbmRleAogICAgICAgIH0KICAgICAgfTsKICAgIH0pOwoKICAgIF90aGlzLnJvbGx1cEluZGV4ID0gbnVsbDsKICAgIF90aGlzLnJvbGx1cEpvYnMgPSBbXTsKICAgIF90aGlzLnJvbGx1cEluZGljZXNDYXBhYmlsaXRpZXMgPSB7fTsKICAgIF90aGlzLnJvbGx1cEluZGljZXMgPSBbXTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhSb2xsdXBJbmRleFBhdHRlcm5DcmVhdGlvbkNvbmZpZywgW3sKICAgIGtleTogInNldFJvbGx1cEluZGljZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9zZXRSb2xsdXBJbmRpY2VzID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgaXNBbm9ueW1vdXMsIHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGhhY2sgaW50ZW5kZWQgdG8gcHJldmVudCB0aGUgZ2V0Um9sbHVwSW5kaWNlcygpIHJlcXVlc3QgZnJvbSBiZWluZyBzZW50IGlmCiAgICAgICAgICAgICAgICAvLyB3ZSdyZSBvbiAvbG9nb3V0LiBUaGVyZSBpcyBhIHJhY2UgY29uZGl0aW9uIHRoYXQgY2FuIGFyaXNlIG9uIHRoYXQgcGFnZSwgd2hlcmVieSB0aGlzCiAgICAgICAgICAgICAgICAvLyByZXF1ZXN0IHJlc29sdmVzIGFmdGVyIHRoZSBsb2dvdXQgcmVxdWVzdCByZXNvbHZlcywgYW5kIHVuLWNsZWFycyB0aGUgc2Vzc2lvbiBJRC4KICAgICAgICAgICAgICAgIGlzQW5vbnltb3VzID0gdGhpcy5odHRwQ2xpZW50LmFub255bW91c1BhdGhzLmlzQW5vbnltb3VzKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSk7CgogICAgICAgICAgICAgICAgaWYgKGlzQW5vbnltb3VzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQuZ2V0KCcvYXBpL3JvbGx1cC9pbmRpY2VzJyk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHRoaXMucm9sbHVwSW5kaWNlc0NhcGFiaWxpdGllcyA9IHJlc3BvbnNlIHx8IHt9OwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICB0aGlzLnJvbGx1cEluZGljZXMgPSBPYmplY3Qua2V5cyh0aGlzLnJvbGx1cEluZGljZXNDYXBhYmlsaXRpZXMpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcywgW1swLCAxMF1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gc2V0Um9sbHVwSW5kaWNlcygpIHsKICAgICAgICByZXR1cm4gX3NldFJvbGx1cEluZGljZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHNldFJvbGx1cEluZGljZXM7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJnZXRJbmRleFBhdHRlcm5DcmVhdGlvbk9wdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldEluZGV4UGF0dGVybkNyZWF0aW9uT3B0aW9uID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIodXJsSGFuZGxlcikgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRSb2xsdXBJbmRpY2VzKCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCB0aGlzLnJvbGx1cEluZGljZXMgJiYgdGhpcy5yb2xsdXBJbmRpY2VzLmxlbmd0aCA/IHsKICAgICAgICAgICAgICAgICAgdGV4dDogcm9sbHVwSW5kZXhQYXR0ZXJuQnV0dG9uVGV4dCwKICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJvbGx1cEluZGV4UGF0dGVybkJ1dHRvbkRlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICB0ZXN0U3ViajogImNyZWF0ZVJvbGx1cEluZGV4UGF0dGVybkJ1dHRvbiIsCiAgICAgICAgICAgICAgICAgIGlzQmV0YTogdGhpcy5pc0JldGEsCiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICAgICAgICAgICAgdXJsSGFuZGxlcignL21hbmFnZW1lbnQva2liYW5hL2luZGV4X3BhdHRlcm4/dHlwZT1yb2xsdXAnKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSA6IG51bGwpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRJbmRleFBhdHRlcm5DcmVhdGlvbk9wdGlvbihfeCkgewogICAgICAgIHJldHVybiBfZ2V0SW5kZXhQYXR0ZXJuQ3JlYXRpb25PcHRpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldEluZGV4UGF0dGVybkNyZWF0aW9uT3B0aW9uOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZ2V0SW5kZXhUYWdzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbmRleFRhZ3MoaW5kZXhOYW1lKSB7CiAgICAgIHJldHVybiB0aGlzLmlzUm9sbHVwSW5kZXgoaW5kZXhOYW1lKSA/IFt7CiAgICAgICAga2V5OiB0aGlzLnR5cGUsCiAgICAgICAgbmFtZTogcm9sbHVwSW5kZXhQYXR0ZXJuSW5kZXhMYWJlbAogICAgICB9XSA6IFtdOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFJvbGx1cEluZGV4UGF0dGVybkNyZWF0aW9uQ29uZmlnOwp9KF9wdWJsaWMuSW5kZXhQYXR0ZXJuQ3JlYXRpb25Db25maWcpOwoKZXhwb3J0cy5Sb2xsdXBJbmRleFBhdHRlcm5DcmVhdGlvbkNvbmZpZyA9IFJvbGx1cEluZGV4UGF0dGVybkNyZWF0aW9uQ29uZmlnOw=="},null]}