{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/vis_type_table/public/agg_table/agg_table.js","dependencies":[{"path":"src/legacy/core_plugins/vis_type_table/public/agg_table/agg_table.js","mtime":1589249549986},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLktibkFnZ1RhYmxlID0gS2JuQWdnVGFibGU7Cgp2YXIgX2xvZGFzaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibG9kYXNoIikpOwoKdmFyIF9hZ2dfdGFibGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vYWdnX3RhYmxlLmh0bWwiKSk7Cgp2YXIgX2xlZ2FjeV9pbXBvcnRzID0gcmVxdWlyZSgiLi4vbGVnYWN5X2ltcG9ydHMiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfQoKZnVuY3Rpb24gS2JuQWdnVGFibGUoY29uZmlnLCBSZWN1cnNpb25IZWxwZXIpIHsKICByZXR1cm4gewogICAgcmVzdHJpY3Q6ICdFJywKICAgIHRlbXBsYXRlOiBfYWdnX3RhYmxlLmRlZmF1bHQsCiAgICBzY29wZTogewogICAgICB0YWJsZTogJz0nLAogICAgICBkaW1lbnNpb25zOiAnPScsCiAgICAgIHBlclBhZ2U6ICc9PycsCiAgICAgIHNvcnQ6ICc9PycsCiAgICAgIGV4cG9ydFRpdGxlOiAnPT8nLAogICAgICBzaG93VG90YWw6ICc9JywKICAgICAgdG90YWxGdW5jOiAnPScsCiAgICAgIHBlcmNlbnRhZ2VDb2w6ICc9JywKICAgICAgZmlsdGVyOiAnPScKICAgIH0sCiAgICBjb250cm9sbGVyQXM6ICdhZ2dUYWJsZScsCiAgICBjb21waWxlOiBmdW5jdGlvbiBjb21waWxlKCRlbCkgewogICAgICAvLyBVc2UgdGhlIGNvbXBpbGUgZnVuY3Rpb24gZnJvbSB0aGUgUmVjdXJzaW9uSGVscGVyLAogICAgICAvLyBBbmQgcmV0dXJuIHRoZSBsaW5raW5nIGZ1bmN0aW9uKHMpIHdoaWNoIGl0IHJldHVybnMKICAgICAgcmV0dXJuIFJlY3Vyc2lvbkhlbHBlci5jb21waWxlKCRlbCk7CiAgICB9LAogICAgY29udHJvbGxlcjogZnVuY3Rpb24gY29udHJvbGxlcigkc2NvcGUpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICBzZWxmLl9zYXZlQXMgPSByZXF1aXJlKCdAZWxhc3RpYy9maWxlc2F2ZXInKS5zYXZlQXM7CiAgICAgIHNlbGYuY3N2ID0gewogICAgICAgIHNlcGFyYXRvcjogY29uZmlnLmdldCgnY3N2OnNlcGFyYXRvcicpLAogICAgICAgIHF1b3RlVmFsdWVzOiBjb25maWcuZ2V0KCdjc3Y6cXVvdGVWYWx1ZXMnKQogICAgICB9OwoKICAgICAgc2VsZi5leHBvcnRBc0NzdiA9IGZ1bmN0aW9uIChmb3JtYXR0ZWQpIHsKICAgICAgICB2YXIgY3N2ID0gbmV3IEJsb2IoW3NlbGYudG9Dc3YoZm9ybWF0dGVkKV0sIHsKICAgICAgICAgIHR5cGU6ICd0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgnCiAgICAgICAgfSk7CgogICAgICAgIHNlbGYuX3NhdmVBcyhjc3YsIHNlbGYuY3N2LmZpbGVuYW1lKTsKICAgICAgfTsKCiAgICAgIHNlbGYudG9Dc3YgPSBmdW5jdGlvbiAoZm9ybWF0dGVkKSB7CiAgICAgICAgdmFyIHJvd3MgPSAkc2NvcGUudGFibGUucm93czsKICAgICAgICB2YXIgY29sdW1ucyA9IGZvcm1hdHRlZCA/ICRzY29wZS5mb3JtYXR0ZWRDb2x1bW5zIDogJHNjb3BlLnRhYmxlLmNvbHVtbnM7CiAgICAgICAgdmFyIG5vbkFscGhhTnVtUkUgPSAvW15hLXpBLVowLTldLzsKICAgICAgICB2YXIgYWxsRG91YmxlUXVvdGVSRSA9IC8iL2c7CgogICAgICAgIGZ1bmN0aW9uIGVzY2FwZSh2YWwpIHsKICAgICAgICAgIGlmICghZm9ybWF0dGVkICYmIF9sb2Rhc2guZGVmYXVsdC5pc09iamVjdCh2YWwpKSB2YWwgPSB2YWwudmFsdWVPZigpOwogICAgICAgICAgdmFsID0gU3RyaW5nKHZhbCk7CgogICAgICAgICAgaWYgKHNlbGYuY3N2LnF1b3RlVmFsdWVzICYmIG5vbkFscGhhTnVtUkUudGVzdCh2YWwpKSB7CiAgICAgICAgICAgIHZhbCA9ICciJyArIHZhbC5yZXBsYWNlKGFsbERvdWJsZVF1b3RlUkUsICciIicpICsgJyInOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiB2YWw7CiAgICAgICAgfSAvLyBlc2NhcGUgZWFjaCBjZWxsIGluIGVhY2ggcm93CgoKICAgICAgICB2YXIgY3N2Um93cyA9IHJvd3MubWFwKGZ1bmN0aW9uIChyb3cpIHsKICAgICAgICAgIHJldHVybiBPYmplY3QuZW50cmllcyhyb3cpLm1hcChmdW5jdGlvbiAoX3JlZikgewogICAgICAgICAgICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKSwKICAgICAgICAgICAgICAgIGsgPSBfcmVmMlswXSwKICAgICAgICAgICAgICAgIHYgPSBfcmVmMlsxXTsKCiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjb2x1bW5zLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgICByZXR1cm4gYy5pZCA9PT0gazsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAoZm9ybWF0dGVkICYmIGNvbHVtbikgewogICAgICAgICAgICAgIHJldHVybiBlc2NhcGUoY29sdW1uLmZvcm1hdHRlci5jb252ZXJ0KHYpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGVzY2FwZSh2KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOyAvLyBhZGQgdGhlIGNvbHVtbnMgdG8gdGhlIHJvd3MKCiAgICAgICAgY3N2Um93cy51bnNoaWZ0KGNvbHVtbnMubWFwKGZ1bmN0aW9uIChjb2wpIHsKICAgICAgICAgIHJldHVybiBlc2NhcGUoZm9ybWF0dGVkID8gY29sLnRpdGxlIDogY29sLm5hbWUpOwogICAgICAgIH0pKTsKICAgICAgICByZXR1cm4gY3N2Um93cy5tYXAoZnVuY3Rpb24gKHJvdykgewogICAgICAgICAgcmV0dXJuIHJvdy5qb2luKHNlbGYuY3N2LnNlcGFyYXRvcikgKyAnXHJcbic7CiAgICAgICAgfSkuam9pbignJyk7CiAgICAgIH07CgogICAgICAkc2NvcGUuJHdhdGNoTXVsdGkoWyd0YWJsZScsICdleHBvcnRUaXRsZScsICdwZXJjZW50YWdlQ29sJywgJ3RvdGFsRnVuYycsICc9c2NvcGUuZGltZW5zaW9ucyddLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHRhYmxlID0gJHNjb3BlLnRhYmxlLAogICAgICAgICAgICBleHBvcnRUaXRsZSA9ICRzY29wZS5leHBvcnRUaXRsZSwKICAgICAgICAgICAgcGVyY2VudGFnZUNvbCA9ICRzY29wZS5wZXJjZW50YWdlQ29sOwogICAgICAgIHZhciBzaG93UGVyY2VudGFnZSA9IHBlcmNlbnRhZ2VDb2wgIT09ICcnOwoKICAgICAgICBpZiAoIXRhYmxlKSB7CiAgICAgICAgICAkc2NvcGUucm93cyA9IG51bGw7CiAgICAgICAgICAkc2NvcGUuZm9ybWF0dGVkQ29sdW1ucyA9IG51bGw7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBzZWxmLmNzdi5maWxlbmFtZSA9IChleHBvcnRUaXRsZSB8fCB0YWJsZS50aXRsZSB8fCAndGFibGUnKSArICcuY3N2JzsKICAgICAgICAkc2NvcGUucm93cyA9IHRhYmxlLnJvd3M7CiAgICAgICAgJHNjb3BlLmZvcm1hdHRlZENvbHVtbnMgPSBbXTsKICAgICAgICBpZiAodHlwZW9mICRzY29wZS5kaW1lbnNpb25zID09PSAndW5kZWZpbmVkJykgcmV0dXJuOwogICAgICAgIHZhciBfJHNjb3BlJGRpbWVuc2lvbnMgPSAkc2NvcGUuZGltZW5zaW9ucywKICAgICAgICAgICAgYnVja2V0cyA9IF8kc2NvcGUkZGltZW5zaW9ucy5idWNrZXRzLAogICAgICAgICAgICBtZXRyaWNzID0gXyRzY29wZSRkaW1lbnNpb25zLm1ldHJpY3MsCiAgICAgICAgICAgIHNwbGl0Q29sdW1uID0gXyRzY29wZSRkaW1lbnNpb25zLnNwbGl0Q29sdW1uOwogICAgICAgICRzY29wZS5mb3JtYXR0ZWRDb2x1bW5zID0gdGFibGUuY29sdW1ucy5tYXAoZnVuY3Rpb24gKGNvbCwgaSkgewogICAgICAgICAgdmFyIF9kaW1lbnNpb24kZm9ybWF0LCBfZGltZW5zaW9uJGZvcm1hdDIsIF9kaW1lbnNpb24kZm9ybWF0MiRwYTsKCiAgICAgICAgICB2YXIgaXNCdWNrZXQgPSBidWNrZXRzLmZpbmQoZnVuY3Rpb24gKGJ1Y2tldCkgewogICAgICAgICAgICByZXR1cm4gYnVja2V0LmFjY2Vzc29yID09PSBpOwogICAgICAgICAgfSk7CiAgICAgICAgICB2YXIgaXNTcGxpdENvbHVtbiA9IHNwbGl0Q29sdW1uID8gc3BsaXRDb2x1bW4uZmluZChmdW5jdGlvbiAoc3BsaXRDb2x1bW4pIHsKICAgICAgICAgICAgcmV0dXJuIHNwbGl0Q29sdW1uLmFjY2Vzc29yID09PSBpOwogICAgICAgICAgfSkgOiB1bmRlZmluZWQ7CiAgICAgICAgICB2YXIgZGltZW5zaW9uID0gaXNCdWNrZXQgfHwgaXNTcGxpdENvbHVtbiB8fCBtZXRyaWNzLmZpbmQoZnVuY3Rpb24gKG1ldHJpYykgewogICAgICAgICAgICByZXR1cm4gbWV0cmljLmFjY2Vzc29yID09PSBpOwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAoIWRpbWVuc2lvbikgcmV0dXJuOwogICAgICAgICAgdmFyIGZvcm1hdHRlciA9ICgwLCBfbGVnYWN5X2ltcG9ydHMuZ2V0Rm9ybWF0KShkaW1lbnNpb24uZm9ybWF0KTsKICAgICAgICAgIHZhciBmb3JtYXR0ZWRDb2x1bW4gPSB7CiAgICAgICAgICAgIGlkOiBjb2wuaWQsCiAgICAgICAgICAgIHRpdGxlOiBjb2wubmFtZSwKICAgICAgICAgICAgZm9ybWF0dGVyOiBmb3JtYXR0ZXIsCiAgICAgICAgICAgIGZpbHRlcmFibGU6ICEhaXNCdWNrZXQKICAgICAgICAgIH07CiAgICAgICAgICB2YXIgbGFzdCA9IGkgPT09IHRhYmxlLmNvbHVtbnMubGVuZ3RoIC0gMTsKCiAgICAgICAgICBpZiAobGFzdCB8fCAhaXNCdWNrZXQpIHsKICAgICAgICAgICAgZm9ybWF0dGVkQ29sdW1uLmNsYXNzID0gJ3Zpc3VhbGl6ZS10YWJsZS1yaWdodCc7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGlzRGF0ZSA9ICgoX2RpbWVuc2lvbiRmb3JtYXQgPSBkaW1lbnNpb24uZm9ybWF0KSA9PT0gbnVsbCB8fCBfZGltZW5zaW9uJGZvcm1hdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RpbWVuc2lvbiRmb3JtYXQuaWQpID09PSAnZGF0ZScgfHwgKChfZGltZW5zaW9uJGZvcm1hdDIgPSBkaW1lbnNpb24uZm9ybWF0KSA9PT0gbnVsbCB8fCBfZGltZW5zaW9uJGZvcm1hdDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGltZW5zaW9uJGZvcm1hdDIkcGEgPSBfZGltZW5zaW9uJGZvcm1hdDIucGFyYW1zKSA9PT0gbnVsbCB8fCBfZGltZW5zaW9uJGZvcm1hdDIkcGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kaW1lbnNpb24kZm9ybWF0MiRwYS5pZCkgPT09ICdkYXRlJzsKICAgICAgICAgIHZhciBhbGxvd3NOdW1lcmljYWxBZ2dyZWdhdGlvbnMgPSBmb3JtYXR0ZXIgPT09IG51bGwgfHwgZm9ybWF0dGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmb3JtYXR0ZXIuYWxsb3dzTnVtZXJpY2FsQWdncmVnYXRpb25zOwogICAgICAgICAgdmFyIHRvdGFsRnVuYyA9ICRzY29wZS50b3RhbEZ1bmM7CgogICAgICAgICAgaWYgKHR5cGVvZiB0b3RhbEZ1bmMgPT09ICd1bmRlZmluZWQnICYmIHNob3dQZXJjZW50YWdlKSB7CiAgICAgICAgICAgIHRvdGFsRnVuYyA9ICdzdW0nOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChhbGxvd3NOdW1lcmljYWxBZ2dyZWdhdGlvbnMgfHwgaXNEYXRlIHx8IHRvdGFsRnVuYyA9PT0gJ2NvdW50JykgewogICAgICAgICAgICB2YXIgc3VtID0gZnVuY3Rpb24gc3VtKHRhYmxlUm93cykgewogICAgICAgICAgICAgIHJldHVybiBfbG9kYXNoLmRlZmF1bHQucmVkdWNlKHRhYmxlUm93cywgZnVuY3Rpb24gKHByZXYsIGN1cnIpIHsKICAgICAgICAgICAgICAgIC8vIHNvbWUgbWV0cmljcyByZXR1cm4gdW5kZWZpbmVkIGZvciBzb21lIG9mIHRoZSB2YWx1ZXMKICAgICAgICAgICAgICAgIC8vIGRlcml2YXRpdmUgaXMgYW4gZXhhbXBsZSBvZiB0aGlzIGFzIGl0IHJldHVybnMgdW5kZWZpbmVkIGluIHRoZSBmaXJzdCByb3cKICAgICAgICAgICAgICAgIGlmIChjdXJyW2NvbC5pZF0gPT09IHVuZGVmaW5lZCkgcmV0dXJuIHByZXY7CiAgICAgICAgICAgICAgICByZXR1cm4gcHJldiArIGN1cnJbY29sLmlkXTsKICAgICAgICAgICAgICB9LCAwKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGZvcm1hdHRlZENvbHVtbi5zdW1Ub3RhbCA9IHN1bSh0YWJsZS5yb3dzKTsKCiAgICAgICAgICAgIHN3aXRjaCAodG90YWxGdW5jKSB7CiAgICAgICAgICAgICAgY2FzZSAnc3VtJzoKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgaWYgKCFpc0RhdGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdG90YWwgPSBmb3JtYXR0ZWRDb2x1bW4uc3VtVG90YWw7CiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkQ29sdW1uLmZvcm1hdHRlZFRvdGFsID0gZm9ybWF0dGVyLmNvbnZlcnQodG90YWwpOwogICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZENvbHVtbi50b3RhbCA9IGZvcm1hdHRlZENvbHVtbi5zdW1Ub3RhbDsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgJ2F2Zyc6CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGlmICghaXNEYXRlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF90b3RhbCA9IHN1bSh0YWJsZS5yb3dzKSAvIHRhYmxlLnJvd3MubGVuZ3RoOwoKICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRDb2x1bW4uZm9ybWF0dGVkVG90YWwgPSBmb3JtYXR0ZXIuY29udmVydChfdG90YWwpOwogICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZENvbHVtbi50b3RhbCA9IF90b3RhbDsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgJ21pbic6CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHZhciBfdG90YWwyID0gX2xvZGFzaC5kZWZhdWx0LmNoYWluKHRhYmxlLnJvd3MpLm1hcChjb2wuaWQpLm1pbigpLnZhbHVlKCk7CgogICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRDb2x1bW4uZm9ybWF0dGVkVG90YWwgPSBmb3JtYXR0ZXIuY29udmVydChfdG90YWwyKTsKICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkQ29sdW1uLnRvdGFsID0gX3RvdGFsMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgJ21heCc6CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHZhciBfdG90YWwzID0gX2xvZGFzaC5kZWZhdWx0LmNoYWluKHRhYmxlLnJvd3MpLm1hcChjb2wuaWQpLm1heCgpLnZhbHVlKCk7CgogICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRDb2x1bW4uZm9ybWF0dGVkVG90YWwgPSBmb3JtYXR0ZXIuY29udmVydChfdG90YWwzKTsKICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkQ29sdW1uLnRvdGFsID0gX3RvdGFsMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgJ2NvdW50JzoKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgdmFyIF90b3RhbDQgPSB0YWJsZS5yb3dzLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkQ29sdW1uLmZvcm1hdHRlZFRvdGFsID0gX3RvdGFsNDsKICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkQ29sdW1uLnRvdGFsID0gX3RvdGFsNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBmb3JtYXR0ZWRDb2x1bW47CiAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChjb2x1bW4pIHsKICAgICAgICAgIHJldHVybiBjb2x1bW47CiAgICAgICAgfSk7CgogICAgICAgIGlmIChzaG93UGVyY2VudGFnZSkgewogICAgICAgICAgdmFyIGluc2VydEF0SW5kZXggPSBfbG9kYXNoLmRlZmF1bHQuZmluZEluZGV4KCRzY29wZS5mb3JtYXR0ZWRDb2x1bW5zLCB7CiAgICAgICAgICAgIHRpdGxlOiBwZXJjZW50YWdlQ29sCiAgICAgICAgICB9KTsgLy8gY29sdW1uIHRvIHNob3cgcGVyY2VudGFnZSBmb3Igd2FzIHJlbW92ZWQKCgogICAgICAgICAgaWYgKGluc2VydEF0SW5kZXggPCAwKSByZXR1cm47CgogICAgICAgICAgdmFyIF9hZGRQZXJjZW50YWdlQ29sID0gYWRkUGVyY2VudGFnZUNvbCgkc2NvcGUuZm9ybWF0dGVkQ29sdW1ucywgcGVyY2VudGFnZUNvbCwgdGFibGUucm93cywgaW5zZXJ0QXRJbmRleCksCiAgICAgICAgICAgICAgY29scyA9IF9hZGRQZXJjZW50YWdlQ29sLmNvbHMsCiAgICAgICAgICAgICAgcm93cyA9IF9hZGRQZXJjZW50YWdlQ29sLnJvd3M7CgogICAgICAgICAgJHNjb3BlLnJvd3MgPSByb3dzOwogICAgICAgICAgJHNjb3BlLmZvcm1hdHRlZENvbHVtbnMgPSBjb2xzOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfTsKfQovKioKICogQHBhcmFtIHtbXU9iamVjdH0gY29sdW1ucyAtIHRoZSBmb3JtYXR0ZWQgY29sdW1ucyB0aGF0IHdpbGwgYmUgZGlzcGxheWVkCiAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZSAtIHRoZSB0aXRsZSBvZiB0aGUgY29sdW1uIHRvIGFkZCB0bwogKiBAcGFyYW0ge1tdT2JqZWN0fSByb3dzIC0gdGhlIHJvdyBkYXRhIGZvciB0aGUgY29sdW1ucwogKiBAcGFyYW0ge051bWJlcn0gaW5zZXJ0QXRJbmRleCAtIHRoZSBpbmRleCB0byBpbnNlcnQgdGhlIHBlcmNlbnRhZ2UgY29sdW1uIGF0CiAqIEByZXR1cm5zIHtPYmplY3R9IC0gY29scyBhbmQgcm93cyBmb3IgdGhlIHRhYmxlIHRvIHJlbmRlciBub3cgaW5jbHVkZWQgcGVyY2VudGFnZSBjb2x1bW4ocykKICovCgoKZnVuY3Rpb24gYWRkUGVyY2VudGFnZUNvbChjb2x1bW5zLCB0aXRsZSwgcm93cywgaW5zZXJ0QXRJbmRleCkgewogIHZhciBfY29sdW1ucyRpbnNlcnRBdEluZGUgPSBjb2x1bW5zW2luc2VydEF0SW5kZXhdLAogICAgICBpZCA9IF9jb2x1bW5zJGluc2VydEF0SW5kZS5pZCwKICAgICAgc3VtVG90YWwgPSBfY29sdW1ucyRpbnNlcnRBdEluZGUuc3VtVG90YWw7CiAgdmFyIG5ld0lkID0gIiIuY29uY2F0KGlkLCAiLXBlcmNlbnRzIik7CiAgdmFyIGZvcm1hdHRlciA9ICgwLCBfbGVnYWN5X2ltcG9ydHMuZ2V0Rm9ybWF0KSh7CiAgICBpZDogJ3BlcmNlbnQnCiAgfSk7CgogIHZhciBpMThuVGl0bGUgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgndmlzVHlwZVRhYmxlLnBhcmFtcy5wZXJjZW50YWdlVGFibGVDb2x1bW5OYW1lJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICd7dGl0bGV9IHBlcmNlbnRhZ2VzJywKICAgIHZhbHVlczogewogICAgICB0aXRsZTogdGl0bGUKICAgIH0KICB9KTsKCiAgdmFyIG5ld0NvbHMgPSBpbnNlcnQoY29sdW1ucywgaW5zZXJ0QXRJbmRleCwgewogICAgdGl0bGU6IGkxOG5UaXRsZSwKICAgIGlkOiBuZXdJZCwKICAgIGZvcm1hdHRlcjogZm9ybWF0dGVyCiAgfSk7CiAgdmFyIG5ld1Jvd3MgPSByb3dzLm1hcChmdW5jdGlvbiAocm93KSB7CiAgICByZXR1cm4gX29iamVjdFNwcmVhZChfZGVmaW5lUHJvcGVydHkoe30sIG5ld0lkLCBmb3JtYXR0ZXIuY29udmVydChyb3dbaWRdIC8gc3VtVG90YWwgLyAxMDApKSwgcm93KTsKICB9KTsKICByZXR1cm4gewogICAgY29sczogbmV3Q29scywKICAgIHJvd3M6IG5ld1Jvd3MKICB9Owp9CgpmdW5jdGlvbiBpbnNlcnQoYXJyLCBpbmRleCkgewogIHZhciBuZXdBcnJheSA9IF90b0NvbnN1bWFibGVBcnJheShhcnIpOwoKICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgaXRlbXMgPSBuZXcgQXJyYXkoX2xlbiA+IDIgPyBfbGVuIC0gMiA6IDApLCBfa2V5ID0gMjsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgaXRlbXNbX2tleSAtIDJdID0gYXJndW1lbnRzW19rZXldOwogIH0KCiAgbmV3QXJyYXkuc3BsaWNlLmFwcGx5KG5ld0FycmF5LCBbaW5kZXggKyAxLCAwXS5jb25jYXQoaXRlbXMpKTsKICByZXR1cm4gbmV3QXJyYXk7Cn0="},null]}