{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/plugins/data/public/search/aggs/buckets/terms.js","dependencies":[{"path":"src/plugins/data/public/search/aggs/buckets/terms.js","mtime":1589249550639},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnRlcm1zQnVja2V0QWdnID0gZXhwb3J0cy50ZXJtc0FnZ0ZpbHRlciA9IHZvaWQgMDsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfYnVja2V0X2FnZ190eXBlID0gcmVxdWlyZSgiLi9fYnVja2V0X2FnZ190eXBlIik7Cgp2YXIgX2J1Y2tldF9hZ2dfdHlwZXMgPSByZXF1aXJlKCIuL2J1Y2tldF9hZ2dfdHlwZXMiKTsKCnZhciBfdGVybXMgPSByZXF1aXJlKCIuL2NyZWF0ZV9maWx0ZXIvdGVybXMiKTsKCnZhciBfbWlncmF0ZV9pbmNsdWRlX2V4Y2x1ZGVfZm9ybWF0ID0gcmVxdWlyZSgiLi9taWdyYXRlX2luY2x1ZGVfZXhjbHVkZV9mb3JtYXQiKTsKCnZhciBfY29tbW9uID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29tbW9uIik7Cgp2YXIgX2V4cHJlc3Npb25zID0gcmVxdWlyZSgiLi4vLi4vZXhwcmVzc2lvbnMiKTsKCnZhciBfdGVybXNfb3RoZXJfYnVja2V0X2hlbHBlciA9IHJlcXVpcmUoIi4vX3Rlcm1zX290aGVyX2J1Y2tldF9oZWxwZXIiKTsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7CiAgdHJ5IHsKICAgIHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsKICAgIHZhciB2YWx1ZSA9IGluZm8udmFsdWU7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIHJlamVjdChlcnJvcik7CiAgICByZXR1cm47CiAgfQoKICBpZiAoaW5mby5kb25lKSB7CiAgICByZXNvbHZlKHZhbHVlKTsKICB9IGVsc2UgewogICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOwogIH0KfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgdmFyIHNlbGYgPSB0aGlzLAogICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7CgogICAgICBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgewogICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsKICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7CiAgICAgIH0KCiAgICAgIF9uZXh0KHVuZGVmaW5lZCk7CiAgICB9KTsKICB9Owp9Cgp2YXIgdGVybXNBZ2dGaWx0ZXIgPSBbJyF0b3BfaGl0cycsICchcGVyY2VudGlsZXMnLCAnIW1lZGlhbicsICchc3RkX2RldicsICchZGVyaXZhdGl2ZScsICchbW92aW5nX2F2ZycsICchc2VyaWFsX2RpZmYnLCAnIWN1bXVsYXRpdmVfc3VtJywgJyFhdmdfYnVja2V0JywgJyFtYXhfYnVja2V0JywgJyFtaW5fYnVja2V0JywgJyFzdW1fYnVja2V0J107CmV4cG9ydHMudGVybXNBZ2dGaWx0ZXIgPSB0ZXJtc0FnZ0ZpbHRlcjsKCnZhciB0ZXJtc1RpdGxlID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2RhdGEuc2VhcmNoLmFnZ3MuYnVja2V0cy50ZXJtc1RpdGxlJywgewogIGRlZmF1bHRNZXNzYWdlOiAnVGVybXMnCn0pOwoKdmFyIHRlcm1zQnVja2V0QWdnID0gbmV3IF9idWNrZXRfYWdnX3R5cGUuQnVja2V0QWdnVHlwZSh7CiAgbmFtZTogX2J1Y2tldF9hZ2dfdHlwZXMuQlVDS0VUX1RZUEVTLlRFUk1TLAogIHRpdGxlOiB0ZXJtc1RpdGxlLAogIG1ha2VMYWJlbDogZnVuY3Rpb24gbWFrZUxhYmVsKGFnZykgewogICAgdmFyIHBhcmFtcyA9IGFnZy5wYXJhbXM7CiAgICByZXR1cm4gYWdnLmdldEZpZWxkRGlzcGxheU5hbWUoKSArICc6ICcgKyBwYXJhbXMub3JkZXIudGV4dDsKICB9LAogIGdldEZvcm1hdDogZnVuY3Rpb24gZ2V0Rm9ybWF0KGJ1Y2tldCkgewogICAgcmV0dXJuIHsKICAgICAgZ2V0Q29udmVydGVyRm9yOiBmdW5jdGlvbiBnZXRDb252ZXJ0ZXJGb3IodHlwZSkgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICBpZiAodmFsID09PSAnX19vdGhlcl9fJykgewogICAgICAgICAgICByZXR1cm4gYnVja2V0LnBhcmFtcy5vdGhlckJ1Y2tldExhYmVsOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh2YWwgPT09ICdfX21pc3NpbmdfXycpIHsKICAgICAgICAgICAgcmV0dXJuIGJ1Y2tldC5wYXJhbXMubWlzc2luZ0J1Y2tldExhYmVsOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBidWNrZXQucGFyYW1zLmZpZWxkLmZvcm1hdC5jb252ZXJ0KHZhbCwgdHlwZSk7CiAgICAgICAgfTsKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZUZpbHRlcjogX3Rlcm1zLmNyZWF0ZUZpbHRlclRlcm1zLAogIHBvc3RGbGlnaHRSZXF1ZXN0OiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX3Bvc3RGbGlnaHRSZXF1ZXN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlc3AsIGFnZ0NvbmZpZ3MsIGFnZ0NvbmZpZywgc2VhcmNoU291cmNlLCBpbnNwZWN0b3JBZGFwdGVycywgYWJvcnRTaWduYWwpIHsKICAgICAgdmFyIG5lc3RlZFNlYXJjaFNvdXJjZSwgZmlsdGVyQWdnLCByZXF1ZXN0LCByZXNwb25zZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmIChyZXNwLmFnZ3JlZ2F0aW9ucykgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlc3ApOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIG5lc3RlZFNlYXJjaFNvdXJjZSA9IHNlYXJjaFNvdXJjZS5jcmVhdGVDaGlsZCgpOwoKICAgICAgICAgICAgICBpZiAoIWFnZ0NvbmZpZy5wYXJhbXMub3RoZXJCdWNrZXQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZmlsdGVyQWdnID0gKDAsIF90ZXJtc19vdGhlcl9idWNrZXRfaGVscGVyLmJ1aWxkT3RoZXJCdWNrZXRBZ2cpKGFnZ0NvbmZpZ3MsIGFnZ0NvbmZpZywgcmVzcCk7CgogICAgICAgICAgICAgIGlmIChmaWx0ZXJBZ2cpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXNwKTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBuZXN0ZWRTZWFyY2hTb3VyY2Uuc2V0RmllbGQoJ2FnZ3MnLCBmaWx0ZXJBZ2cpOwogICAgICAgICAgICAgIHJlcXVlc3QgPSBpbnNwZWN0b3JBZGFwdGVycy5yZXF1ZXN0cy5zdGFydChfaTE4bi5pMThuLnRyYW5zbGF0ZSgnZGF0YS5zZWFyY2guYWdncy5idWNrZXRzLnRlcm1zLm90aGVyQnVja2V0VGl0bGUnLCB7CiAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ090aGVyIGJ1Y2tldCcKICAgICAgICAgICAgICB9KSwgewogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IF9pMThuLmkxOG4udHJhbnNsYXRlKCdkYXRhLnNlYXJjaC5hZ2dzLmJ1Y2tldHMudGVybXMub3RoZXJCdWNrZXREZXNjcmlwdGlvbicsIHsKICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdUaGlzIHJlcXVlc3QgY291bnRzIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRoYXQgZmFsbCAnICsgJ291dHNpZGUgdGhlIGNyaXRlcmlvbiBvZiB0aGUgZGF0YSBidWNrZXRzLicKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgbmVzdGVkU2VhcmNoU291cmNlLmdldFNlYXJjaFJlcXVlc3RCb2R5KCkudGhlbihmdW5jdGlvbiAoYm9keSkgewogICAgICAgICAgICAgICAgcmVxdWVzdC5qc29uKGJvZHkpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHJlcXVlc3Quc3RhdHMoKDAsIF9leHByZXNzaW9ucy5nZXRSZXF1ZXN0SW5zcGVjdG9yU3RhdHMpKG5lc3RlZFNlYXJjaFNvdXJjZSkpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICByZXR1cm4gbmVzdGVkU2VhcmNoU291cmNlLmZldGNoKHsKICAgICAgICAgICAgICAgIGFib3J0U2lnbmFsOiBhYm9ydFNpZ25hbAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgcmVxdWVzdC5zdGF0cygoMCwgX2V4cHJlc3Npb25zLmdldFJlc3BvbnNlSW5zcGVjdG9yU3RhdHMpKG5lc3RlZFNlYXJjaFNvdXJjZSwgcmVzcG9uc2UpKS5vayh7CiAgICAgICAgICAgICAgICBqc29uOiByZXNwb25zZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHJlc3AgPSAoMCwgX3Rlcm1zX290aGVyX2J1Y2tldF9oZWxwZXIubWVyZ2VPdGhlckJ1Y2tldEFnZ1Jlc3BvbnNlKShhZ2dDb25maWdzLCByZXNwLCByZXNwb25zZSwgYWdnQ29uZmlnLCBmaWx0ZXJBZ2coKSk7CgogICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIGlmIChhZ2dDb25maWcucGFyYW1zLm1pc3NpbmdCdWNrZXQpIHsKICAgICAgICAgICAgICAgIHJlc3AgPSAoMCwgX3Rlcm1zX290aGVyX2J1Y2tldF9oZWxwZXIudXBkYXRlTWlzc2luZ0J1Y2tldCkocmVzcCwgYWdnQ29uZmlncywgYWdnQ29uZmlnKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlc3ApOwoKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSk7CgogICAgZnVuY3Rpb24gcG9zdEZsaWdodFJlcXVlc3QoX3gsIF94MiwgX3gzLCBfeDQsIF94NSwgX3g2KSB7CiAgICAgIHJldHVybiBfcG9zdEZsaWdodFJlcXVlc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICByZXR1cm4gcG9zdEZsaWdodFJlcXVlc3Q7CiAgfSgpLAogIHBhcmFtczogW3sKICAgIG5hbWU6ICdmaWVsZCcsCiAgICB0eXBlOiAnZmllbGQnLAogICAgZmlsdGVyRmllbGRUeXBlczogW19jb21tb24uS0JOX0ZJRUxEX1RZUEVTLk5VTUJFUiwgX2NvbW1vbi5LQk5fRklFTERfVFlQRVMuQk9PTEVBTiwgX2NvbW1vbi5LQk5fRklFTERfVFlQRVMuREFURSwgX2NvbW1vbi5LQk5fRklFTERfVFlQRVMuSVAsIF9jb21tb24uS0JOX0ZJRUxEX1RZUEVTLlNUUklOR10KICB9LCB7CiAgICBuYW1lOiAnb3JkZXJCeScsCiAgICB3cml0ZTogX2xvZGFzaC5ub29wIC8vIHByZXZlbnQgZGVmYXVsdCB3cml0ZSwgaXQncyBoYW5kbGVkIGJ5IG9yZGVyQWdnCgogIH0sIHsKICAgIG5hbWU6ICdvcmRlckFnZycsCiAgICB0eXBlOiAnYWdnJywKICAgIGFsbG93ZWRBZ2dzOiB0ZXJtc0FnZ0ZpbHRlciwKICAgIGRlZmF1bHQ6IG51bGwsCiAgICBtYWtlQWdnOiBmdW5jdGlvbiBtYWtlQWdnKHRlcm1zQWdnLCBzdGF0ZSkgewogICAgICBzdGF0ZSA9IHN0YXRlIHx8IHt9OwogICAgICBzdGF0ZS5zY2hlbWEgPSAnb3JkZXJBZ2cnOwogICAgICB2YXIgb3JkZXJBZ2cgPSB0ZXJtc0FnZy5hZ2dDb25maWdzLmNyZWF0ZUFnZ0NvbmZpZyhzdGF0ZSwgewogICAgICAgIGFkZFRvQWdnQ29uZmlnczogZmFsc2UKICAgICAgfSk7CiAgICAgIG9yZGVyQWdnLmlkID0gdGVybXNBZ2cuaWQgKyAnLW9yZGVyQWdnJzsKICAgICAgcmV0dXJuIG9yZGVyQWdnOwogICAgfSwKICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZShhZ2csIG91dHB1dCwgYWdncykgewogICAgICB2YXIgZGlyID0gYWdnLnBhcmFtcy5vcmRlci52YWx1ZTsKICAgICAgdmFyIG9yZGVyID0gb3V0cHV0LnBhcmFtcy5vcmRlciA9IHt9OwogICAgICB2YXIgb3JkZXJBZ2cgPSBhZ2cucGFyYW1zLm9yZGVyQWdnIHx8IGFnZ3MuZ2V0UmVzcG9uc2VBZ2dCeUlkKGFnZy5wYXJhbXMub3JkZXJCeSk7IC8vIFRPRE86IFRoaXMgd29ya3MgYXJvdW5kIGFuIEVsYXN0aWNzZWFyY2ggYnVnIHRoZSBhbHdheXMgY2FzdHMgdGVybXMgYWdnIHNjcmlwdHMgdG8gc3RyaW5ncwogICAgICAvLyB0aHVzIGNhdXNpbmcgaXNzdWVzIHdpdGggZmlsdGVyaW5nLiBUaGlzIHByb2JhYmx5IGNhdXNlcyBvdGhlciBpc3N1ZXMgc2luY2UgZmxvYXQgbWlnaHQgbm90CiAgICAgIC8vIGJlIGFibGUgdG8gY29udGFpbiB0aGUgbnVtYmVyIG9uIHRoZSBlbGFzdGljc2VhcmNoIHNpZGUKCiAgICAgIGlmIChvdXRwdXQucGFyYW1zLnNjcmlwdCkgewogICAgICAgIG91dHB1dC5wYXJhbXMudmFsdWVfdHlwZSA9IGFnZy5nZXRGaWVsZCgpLnR5cGUgPT09ICdudW1iZXInID8gJ2Zsb2F0JyA6IGFnZy5nZXRGaWVsZCgpLnR5cGU7CiAgICAgIH0KCiAgICAgIGlmIChhZ2cucGFyYW1zLm1pc3NpbmdCdWNrZXQgJiYgYWdnLnBhcmFtcy5maWVsZC50eXBlID09PSAnc3RyaW5nJykgewogICAgICAgIG91dHB1dC5wYXJhbXMubWlzc2luZyA9ICdfX21pc3NpbmdfXyc7CiAgICAgIH0KCiAgICAgIGlmICghb3JkZXJBZ2cpIHsKICAgICAgICBvcmRlclthZ2cucGFyYW1zLm9yZGVyQnkgfHwgJ19jb3VudCddID0gZGlyOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKG9yZGVyQWdnLnR5cGUubmFtZSA9PT0gJ2NvdW50JykgewogICAgICAgIG9yZGVyLl9jb3VudCA9IGRpcjsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBvcmRlckFnZ0lkID0gb3JkZXJBZ2cuaWQ7CgogICAgICBpZiAob3JkZXJBZ2cucGFyZW50SWQgJiYgYWdncykgewogICAgICAgIG9yZGVyQWdnID0gYWdncy5ieUlkKG9yZGVyQWdnLnBhcmVudElkKTsKICAgICAgfQoKICAgICAgb3V0cHV0LnN1YkFnZ3MgPSAob3V0cHV0LnN1YkFnZ3MgfHwgW10pLmNvbmNhdChvcmRlckFnZyk7CiAgICAgIG9yZGVyW29yZGVyQWdnSWRdID0gZGlyOwogICAgfQogIH0sIHsKICAgIG5hbWU6ICdvcmRlcicsCiAgICB0eXBlOiAnb3B0aW9uZWQnLAogICAgZGVmYXVsdDogJ2Rlc2MnLAogICAgb3B0aW9uczogW3sKICAgICAgdGV4dDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2RhdGEuc2VhcmNoLmFnZ3MuYnVja2V0cy50ZXJtcy5vcmRlckRlc2NlbmRpbmdUaXRsZScsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0Rlc2NlbmRpbmcnCiAgICAgIH0pLAogICAgICB2YWx1ZTogJ2Rlc2MnCiAgICB9LCB7CiAgICAgIHRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCdkYXRhLnNlYXJjaC5hZ2dzLmJ1Y2tldHMudGVybXMub3JkZXJBc2NlbmRpbmdUaXRsZScsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0FzY2VuZGluZycKICAgICAgfSksCiAgICAgIHZhbHVlOiAnYXNjJwogICAgfV0sCiAgICB3cml0ZTogX2xvZGFzaC5ub29wIC8vIHByZXZlbnQgZGVmYXVsdCB3cml0ZSwgaXQncyBoYW5kbGVkIGJ5IG9yZGVyQWdnCgogIH0sIHsKICAgIG5hbWU6ICdzaXplJywKICAgIGRlZmF1bHQ6IDUKICB9LCB7CiAgICBuYW1lOiAnb3RoZXJCdWNrZXQnLAogICAgZGVmYXVsdDogZmFsc2UsCiAgICB3cml0ZTogX2xvZGFzaC5ub29wCiAgfSwgewogICAgbmFtZTogJ290aGVyQnVja2V0TGFiZWwnLAogICAgdHlwZTogJ3N0cmluZycsCiAgICBkZWZhdWx0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgnZGF0YS5zZWFyY2guYWdncy5idWNrZXRzLnRlcm1zLm90aGVyQnVja2V0TGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnT3RoZXInCiAgICB9KSwKICAgIGRpc3BsYXlOYW1lOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgnZGF0YS5zZWFyY2guYWdncy5vdGhlckJ1Y2tldC5sYWJlbEZvck90aGVyQnVja2V0TGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTGFiZWwgZm9yIG90aGVyIGJ1Y2tldCcKICAgIH0pLAogICAgc2hvdWxkU2hvdzogZnVuY3Rpb24gc2hvdWxkU2hvdyhhZ2cpIHsKICAgICAgcmV0dXJuIGFnZy5nZXRQYXJhbSgnb3RoZXJCdWNrZXQnKTsKICAgIH0sCiAgICB3cml0ZTogX2xvZGFzaC5ub29wCiAgfSwgewogICAgbmFtZTogJ21pc3NpbmdCdWNrZXQnLAogICAgZGVmYXVsdDogZmFsc2UsCiAgICB3cml0ZTogX2xvZGFzaC5ub29wCiAgfSwgewogICAgbmFtZTogJ21pc3NpbmdCdWNrZXRMYWJlbCcsCiAgICBkZWZhdWx0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgnZGF0YS5zZWFyY2guYWdncy5idWNrZXRzLnRlcm1zLm1pc3NpbmdCdWNrZXRMYWJlbCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdNaXNzaW5nJywKICAgICAgZGVzY3JpcHRpb246ICJEZWZhdWx0IGxhYmVsIHVzZWQgaW4gY2hhcnRzIHdoZW4gZG9jdW1lbnRzIGFyZSBtaXNzaW5nIGEgZmllbGQuXG4gICAgICAgICAgVmlzaWJsZSB3aGVuIHlvdSBjcmVhdGUgYSBjaGFydCB3aXRoIGEgdGVybXMgYWdncmVnYXRpb24gYW5kIGVuYWJsZSBcIlNob3cgbWlzc2luZyB2YWx1ZXNcIiIKICAgIH0pLAogICAgdHlwZTogJ3N0cmluZycsCiAgICBkaXNwbGF5TmFtZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2RhdGEuc2VhcmNoLmFnZ3Mub3RoZXJCdWNrZXQubGFiZWxGb3JNaXNzaW5nVmFsdWVzTGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTGFiZWwgZm9yIG1pc3NpbmcgdmFsdWVzJwogICAgfSksCiAgICBzaG91bGRTaG93OiBmdW5jdGlvbiBzaG91bGRTaG93KGFnZykgewogICAgICByZXR1cm4gYWdnLmdldFBhcmFtKCdtaXNzaW5nQnVja2V0Jyk7CiAgICB9LAogICAgd3JpdGU6IF9sb2Rhc2gubm9vcAogIH0sIF9vYmplY3RTcHJlYWQoewogICAgbmFtZTogJ2V4Y2x1ZGUnLAogICAgZGlzcGxheU5hbWU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCdkYXRhLnNlYXJjaC5hZ2dzLmJ1Y2tldHMudGVybXMuZXhjbHVkZUxhYmVsJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0V4Y2x1ZGUnCiAgICB9KSwKICAgIHR5cGU6ICdzdHJpbmcnLAogICAgYWR2YW5jZWQ6IHRydWUsCiAgICBzaG91bGRTaG93OiBfbWlncmF0ZV9pbmNsdWRlX2V4Y2x1ZGVfZm9ybWF0LmlzU3RyaW5nVHlwZQogIH0sIF9taWdyYXRlX2luY2x1ZGVfZXhjbHVkZV9mb3JtYXQubWlncmF0ZUluY2x1ZGVFeGNsdWRlRm9ybWF0KSwgX29iamVjdFNwcmVhZCh7CiAgICBuYW1lOiAnaW5jbHVkZScsCiAgICBkaXNwbGF5TmFtZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2RhdGEuc2VhcmNoLmFnZ3MuYnVja2V0cy50ZXJtcy5pbmNsdWRlTGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnSW5jbHVkZScKICAgIH0pLAogICAgdHlwZTogJ3N0cmluZycsCiAgICBhZHZhbmNlZDogdHJ1ZSwKICAgIHNob3VsZFNob3c6IF9taWdyYXRlX2luY2x1ZGVfZXhjbHVkZV9mb3JtYXQuaXNTdHJpbmdUeXBlCiAgfSwgX21pZ3JhdGVfaW5jbHVkZV9leGNsdWRlX2Zvcm1hdC5taWdyYXRlSW5jbHVkZUV4Y2x1ZGVGb3JtYXQpXQp9KTsKZXhwb3J0cy50ZXJtc0J1Y2tldEFnZyA9IHRlcm1zQnVja2V0QWdnOw=="},null]}