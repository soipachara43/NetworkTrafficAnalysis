{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/lens/public/editor_frame_service/editor_frame/workspace_panel.js","dependencies":[{"path":"x-pack/legacy/plugins/lens/public/editor_frame_service/editor_frame/workspace_panel.js","mtime":1589249552304},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLklubmVyV29ya3NwYWNlUGFuZWwgPSBJbm5lcldvcmtzcGFjZVBhbmVsOwpleHBvcnRzLldvcmtzcGFjZVBhbmVsID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9yZWFjdDIgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfZHJhZ19kcm9wID0gcmVxdWlyZSgiLi4vLi4vZHJhZ19kcm9wIik7Cgp2YXIgX3N1Z2dlc3Rpb25faGVscGVycyA9IHJlcXVpcmUoIi4vc3VnZ2VzdGlvbl9oZWxwZXJzIik7Cgp2YXIgX2V4cHJlc3Npb25faGVscGVycyA9IHJlcXVpcmUoIi4vZXhwcmVzc2lvbl9oZWxwZXJzIik7Cgp2YXIgX2RlYm91bmNlZF9jb21wb25lbnQgPSByZXF1aXJlKCIuLi8uLi9kZWJvdW5jZWRfY29tcG9uZW50Iik7Cgp2YXIgX2xlbnNfdWlfdGVsZW1ldHJ5ID0gcmVxdWlyZSgiLi4vLi4vbGVuc191aV90ZWxlbWV0cnkiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCnZhciBXb3Jrc3BhY2VQYW5lbCA9ICgwLCBfZGVib3VuY2VkX2NvbXBvbmVudC5kZWJvdW5jZWRDb21wb25lbnQpKElubmVyV29ya3NwYWNlUGFuZWwpOyAvLyBFeHBvcnRlZCBmb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5LgoKZXhwb3J0cy5Xb3Jrc3BhY2VQYW5lbCA9IFdvcmtzcGFjZVBhbmVsOwoKZnVuY3Rpb24gSW5uZXJXb3Jrc3BhY2VQYW5lbChfcmVmKSB7CiAgdmFyIGFjdGl2ZURhdGFzb3VyY2VJZCA9IF9yZWYuYWN0aXZlRGF0YXNvdXJjZUlkLAogICAgICBhY3RpdmVWaXN1YWxpemF0aW9uSWQgPSBfcmVmLmFjdGl2ZVZpc3VhbGl6YXRpb25JZCwKICAgICAgdmlzdWFsaXphdGlvbk1hcCA9IF9yZWYudmlzdWFsaXphdGlvbk1hcCwKICAgICAgdmlzdWFsaXphdGlvblN0YXRlID0gX3JlZi52aXN1YWxpemF0aW9uU3RhdGUsCiAgICAgIGRhdGFzb3VyY2VNYXAgPSBfcmVmLmRhdGFzb3VyY2VNYXAsCiAgICAgIGRhdGFzb3VyY2VTdGF0ZXMgPSBfcmVmLmRhdGFzb3VyY2VTdGF0ZXMsCiAgICAgIGZyYW1lUHVibGljQVBJID0gX3JlZi5mcmFtZVB1YmxpY0FQSSwKICAgICAgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoLAogICAgICBjb3JlID0gX3JlZi5jb3JlLAogICAgICBFeHByZXNzaW9uUmVuZGVyZXJDb21wb25lbnQgPSBfcmVmLkV4cHJlc3Npb25SZW5kZXJlcjsKICB2YXIgSVNfREFSS19USEVNRSA9IGNvcmUudWlTZXR0aW5ncy5nZXQoJ3RoZW1lOmRhcmtNb2RlJyk7CiAgdmFyIGVtcHR5U3RhdGVHcmFwaGljVVJMID0gSVNfREFSS19USEVNRSA/ICcvcGx1Z2lucy9sZW5zL2Fzc2V0cy9sZW5zX2FwcF9ncmFwaGljX2RhcmtfMngucG5nJyA6ICcvcGx1Z2lucy9sZW5zL2Fzc2V0cy9sZW5zX2FwcF9ncmFwaGljX2xpZ2h0XzJ4LnBuZyc7CiAgdmFyIGRyYWdEcm9wQ29udGV4dCA9ICgwLCBfcmVhY3QudXNlQ29udGV4dCkoX2RyYWdfZHJvcC5EcmFnQ29udGV4dCk7CiAgdmFyIHN1Z2dlc3Rpb25Gb3JEcmFnZ2VkRmllbGQgPSAoMCwgX3JlYWN0LnVzZU1lbW8pKGZ1bmN0aW9uICgpIHsKICAgIGlmICghZHJhZ0Ryb3BDb250ZXh0LmRyYWdnaW5nIHx8ICFhY3RpdmVEYXRhc291cmNlSWQpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBoYXNEYXRhID0gT2JqZWN0LnZhbHVlcyhmcmFtZVB1YmxpY0FQSS5kYXRhc291cmNlTGF5ZXJzKS5zb21lKGZ1bmN0aW9uIChkYXRhc291cmNlKSB7CiAgICAgIHJldHVybiBkYXRhc291cmNlLmdldFRhYmxlU3BlYygpLmxlbmd0aCA+IDA7CiAgICB9KTsKICAgIHZhciBzdWdnZXN0aW9ucyA9ICgwLCBfc3VnZ2VzdGlvbl9oZWxwZXJzLmdldFN1Z2dlc3Rpb25zKSh7CiAgICAgIGRhdGFzb3VyY2VNYXA6IF9kZWZpbmVQcm9wZXJ0eSh7fSwgYWN0aXZlRGF0YXNvdXJjZUlkLCBkYXRhc291cmNlTWFwW2FjdGl2ZURhdGFzb3VyY2VJZF0pLAogICAgICBkYXRhc291cmNlU3RhdGVzOiBkYXRhc291cmNlU3RhdGVzLAogICAgICB2aXN1YWxpemF0aW9uTWFwOiBoYXNEYXRhICYmIGFjdGl2ZVZpc3VhbGl6YXRpb25JZCA/IF9kZWZpbmVQcm9wZXJ0eSh7fSwgYWN0aXZlVmlzdWFsaXphdGlvbklkLCB2aXN1YWxpemF0aW9uTWFwW2FjdGl2ZVZpc3VhbGl6YXRpb25JZF0pIDogdmlzdWFsaXphdGlvbk1hcCwKICAgICAgYWN0aXZlVmlzdWFsaXphdGlvbklkOiBhY3RpdmVWaXN1YWxpemF0aW9uSWQsCiAgICAgIHZpc3VhbGl6YXRpb25TdGF0ZTogdmlzdWFsaXphdGlvblN0YXRlLAogICAgICBmaWVsZDogZHJhZ0Ryb3BDb250ZXh0LmRyYWdnaW5nCiAgICB9KTsKICAgIHJldHVybiBzdWdnZXN0aW9ucy5maW5kKGZ1bmN0aW9uIChzKSB7CiAgICAgIHJldHVybiBzLnZpc3VhbGl6YXRpb25JZCA9PT0gYWN0aXZlVmlzdWFsaXphdGlvbklkOwogICAgfSkgfHwgc3VnZ2VzdGlvbnNbMF07CiAgfSwgW2RyYWdEcm9wQ29udGV4dC5kcmFnZ2luZ10pOwoKICB2YXIgX3VzZVN0YXRlID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoewogICAgZXhwcmVzc2lvbkJ1aWxkRXJyb3I6IHVuZGVmaW5lZCwKICAgIGV4cGFuZEVycm9yOiBmYWxzZQogIH0pLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgbG9jYWxTdGF0ZSA9IF91c2VTdGF0ZTJbMF0sCiAgICAgIHNldExvY2FsU3RhdGUgPSBfdXNlU3RhdGUyWzFdOwoKICB2YXIgYWN0aXZlVmlzdWFsaXphdGlvbiA9IGFjdGl2ZVZpc3VhbGl6YXRpb25JZCA/IHZpc3VhbGl6YXRpb25NYXBbYWN0aXZlVmlzdWFsaXphdGlvbklkXSA6IG51bGw7CiAgdmFyIGV4cHJlc3Npb24gPSAoMCwgX3JlYWN0LnVzZU1lbW8pKGZ1bmN0aW9uICgpIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiAoMCwgX2V4cHJlc3Npb25faGVscGVycy5idWlsZEV4cHJlc3Npb24pKHsKICAgICAgICB2aXN1YWxpemF0aW9uOiBhY3RpdmVWaXN1YWxpemF0aW9uLAogICAgICAgIHZpc3VhbGl6YXRpb25TdGF0ZTogdmlzdWFsaXphdGlvblN0YXRlLAogICAgICAgIGRhdGFzb3VyY2VNYXA6IGRhdGFzb3VyY2VNYXAsCiAgICAgICAgZGF0YXNvdXJjZVN0YXRlczogZGF0YXNvdXJjZVN0YXRlcywKICAgICAgICBmcmFtZVB1YmxpY0FQSTogZnJhbWVQdWJsaWNBUEkKICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIC8vIE1vc3QgbGlrZWx5IGFuIGVycm9yIGluIHRoZSBleHByZXNzaW9uIHByb3ZpZGVkIGJ5IGEgZGF0YXNvdXJjZSBvciB2aXN1YWxpemF0aW9uCiAgICAgIHNldExvY2FsU3RhdGUoZnVuY3Rpb24gKHMpIHsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgcywgewogICAgICAgICAgZXhwcmVzc2lvbkJ1aWxkRXJyb3I6IGUudG9TdHJpbmcoKQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCBbYWN0aXZlVmlzdWFsaXphdGlvbiwgdmlzdWFsaXphdGlvblN0YXRlLCBkYXRhc291cmNlTWFwLCBkYXRhc291cmNlU3RhdGVzLCBmcmFtZVB1YmxpY0FQSS5kYXRlUmFuZ2UsIGZyYW1lUHVibGljQVBJLnF1ZXJ5LCBmcmFtZVB1YmxpY0FQSS5maWx0ZXJzXSk7CgogIGZ1bmN0aW9uIG9uRHJvcCgpIHsKICAgIGlmIChzdWdnZXN0aW9uRm9yRHJhZ2dlZEZpZWxkKSB7CiAgICAgICgwLCBfbGVuc191aV90ZWxlbWV0cnkudHJhY2tVaUV2ZW50KSgnZHJvcF9vbnRvX3dvcmtzcGFjZScpOwogICAgICAoMCwgX2xlbnNfdWlfdGVsZW1ldHJ5LnRyYWNrVWlFdmVudCkoZXhwcmVzc2lvbiA/ICdkcm9wX25vbl9lbXB0eScgOiAnZHJvcF9lbXB0eScpOwogICAgICAoMCwgX3N1Z2dlc3Rpb25faGVscGVycy5zd2l0Y2hUb1N1Z2dlc3Rpb24pKGRpc3BhdGNoLCBzdWdnZXN0aW9uRm9yRHJhZ2dlZEZpZWxkLCAnU1dJVENIX1ZJU1VBTElaQVRJT04nKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHJlbmRlckVtcHR5V29ya3NwYWNlKCkgewogICAgdmFyIHRvb2x0aXBDb250ZW50ID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMuZWRpdG9yRnJhbWUudG9vbHRpcENvbnRlbnQnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTGVucyBpcyBpbiBiZXRhIGFuZCBpcyBzdWJqZWN0IHRvIGNoYW5nZS4gIFRoZSBkZXNpZ24gYW5kIGNvZGUgaXMgbGVzcyBtYXR1cmUgdGhhbiBvZmZpY2lhbCBHQSBmZWF0dXJlcyBhbmQgaXMgYmVpbmcgcHJvdmlkZWQgYXMtaXMgd2l0aCBubyB3YXJyYW50aWVzLiBCZXRhIGZlYXR1cmVzIGFyZSBub3Qgc3ViamVjdCB0byB0aGUgc3VwcG9ydCBTTEEgb2Ygb2ZmaWNpYWwgR0EgZmVhdHVyZXMnCiAgICB9KTsKCiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICBjbGFzc05hbWU6ICJldWktdGV4dENlbnRlciIKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0LCB7CiAgICAgIHRleHRBbGlnbjogImNlbnRlciIsCiAgICAgIGdyb3c6IGZhbHNlLAogICAgICBjb2xvcjogInN1YmR1ZWQiLAogICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiZW1wdHktd29ya3NwYWNlIgogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiaDMiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICBpZDogInhwYWNrLmxlbnMuZWRpdG9yRnJhbWUuZW1wdHlXb3Jrc3BhY2UiLAogICAgICBkZWZhdWx0TWVzc2FnZTogIkRyb3Agc29tZSBmaWVsZHMgaGVyZSB0byBzdGFydCIKICAgIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUltYWdlLCB7CiAgICAgIHN0eWxlOiB7CiAgICAgICAgd2lkdGg6IDM2MAogICAgICB9LAogICAgICB1cmw6IGNvcmUuaHR0cC5iYXNlUGF0aC5wcmVwZW5kKGVtcHR5U3RhdGVHcmFwaGljVVJMKSwKICAgICAgYWx0OiAiIgogICAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICBpZDogInhwYWNrLmxlbnMuZWRpdG9yRnJhbWUuZW1wdHlXb3Jrc3BhY2VIZWFkaW5nIiwKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJMZW5zIGlzIGEgbmV3IHRvb2wgZm9yIGNyZWF0aW5nIHZpc3VhbGl6YXRpb25zIgogICAgfSksICcgJywgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJldGFCYWRnZSwgewogICAgICBsYWJlbDogIkJldGEiLAogICAgICB0b29sdGlwQ29udGVudDogdG9vbHRpcENvbnRlbnQKICAgIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbkVtcHR5LCB7CiAgICAgIGhyZWY6ICJodHRwczovL3d3dy5lbGFzdGljLmNvL3Byb2R1Y3RzL2tpYmFuYS9mZWVkYmFjayIsCiAgICAgIGljb25UeXBlOiAicG9wb3V0IiwKICAgICAgaWNvblNpZGU6ICJyaWdodCIsCiAgICAgIHNpemU6ICJ4cyIsCiAgICAgIHRhcmdldDogIl9ibGFuayIKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgIGlkOiAieHBhY2subGVucy5lZGl0b3JGcmFtZS5nb1RvRm9ydW1zIiwKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJNYWtlIHJlcXVlc3RzIGFuZCBnaXZlIGZlZWRiYWNrIgogICAgfSkpKSk7CiAgfQoKICBmdW5jdGlvbiByZW5kZXJWaXN1YWxpemF0aW9uKCkgewogICAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgICAgLy8gcmVzZXQgZXhwcmVzc2lvbiBlcnJvciBpZiBjb21wb25lbnQgYXR0ZW1wdHMgdG8gcnVuIGl0IGFnYWluCiAgICAgIGlmIChleHByZXNzaW9uICYmIGxvY2FsU3RhdGUuZXhwcmVzc2lvbkJ1aWxkRXJyb3IpIHsKICAgICAgICBzZXRMb2NhbFN0YXRlKGZ1bmN0aW9uIChzKSB7CiAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgcywgewogICAgICAgICAgICBleHByZXNzaW9uQnVpbGRFcnJvcjogdW5kZWZpbmVkCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwgW2V4cHJlc3Npb25dKTsKCiAgICBpZiAoZXhwcmVzc2lvbiA9PT0gbnVsbCkgewogICAgICByZXR1cm4gcmVuZGVyRW1wdHlXb3Jrc3BhY2UoKTsKICAgIH0KCiAgICBpZiAobG9jYWxTdGF0ZS5leHByZXNzaW9uQnVpbGRFcnJvcikgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgICAgIGRpcmVjdGlvbjogImNvbHVtbiIsCiAgICAgICAgYWxpZ25JdGVtczogImNlbnRlciIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpSWNvbiwgewogICAgICAgIHR5cGU6ICJhbGVydCIsCiAgICAgICAgc2l6ZTogInhsIiwKICAgICAgICBjb2xvcjogImRhbmdlciIKICAgICAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiZXhwcmVzc2lvbi1mYWlsdXJlIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2subGVucy5lZGl0b3JGcmFtZS5leHByZXNzaW9uRmFpbHVyZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBbiBlcnJvciBvY2N1cnJlZCBpbiB0aGUgZXhwcmVzc2lvbiIKICAgICAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBsb2NhbFN0YXRlLmV4cHJlc3Npb25CdWlsZEVycm9yKSk7CiAgICB9CgogICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgY2xhc3NOYW1lOiAibG5zRXhwcmVzc2lvblJlbmRlcmVyIgogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChFeHByZXNzaW9uUmVuZGVyZXJDb21wb25lbnQsIHsKICAgICAgY2xhc3NOYW1lOiAibG5zRXhwcmVzc2lvblJlbmRlcmVyX19jb21wb25lbnQiLAogICAgICBwYWRkaW5nOiAibSIsCiAgICAgIGV4cHJlc3Npb246IGV4cHJlc3Npb24sCiAgICAgIHJlbmRlckVycm9yOiBmdW5jdGlvbiByZW5kZXJFcnJvcihlcnJvck1lc3NhZ2UpIHsKICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgICAgICAgZGlyZWN0aW9uOiAiY29sdW1uIiwKICAgICAgICAgIGFsaWduSXRlbXM6ICJjZW50ZXIiCiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpSWNvbiwgewogICAgICAgICAgdHlwZTogImFsZXJ0IiwKICAgICAgICAgIHNpemU6ICJ4bCIsCiAgICAgICAgICBjb2xvcjogImRhbmdlciIKICAgICAgICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImV4cHJlc3Npb24tZmFpbHVyZSIKICAgICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ4cGFjay5sZW5zLmVkaXRvckZyYW1lLmRhdGFGYWlsdXJlIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQW4gZXJyb3Igb2NjdXJyZWQgd2hlbiBsb2FkaW5nIGRhdGEuIgogICAgICAgIH0pKSwgZXJyb3JNZXNzYWdlID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJldWktdGV4dEJyZWFrQWxsIiwKICAgICAgICAgIGdyb3c6IGZhbHNlCiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbkVtcHR5LCB7CiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgICBzZXRMb2NhbFN0YXRlKGZ1bmN0aW9uIChwcmV2U3RhdGUpIHsKICAgICAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgcHJldlN0YXRlLCB7CiAgICAgICAgICAgICAgICBleHBhbmRFcnJvcjogIXByZXZTdGF0ZS5leHBhbmRFcnJvcgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subGVucy5lZGl0b3JGcmFtZS5leHBhbmRSZW5kZXJpbmdFcnJvckJ1dHRvbicsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU2hvdyBkZXRhaWxzIG9mIGVycm9yJwogICAgICAgIH0pKSwgbG9jYWxTdGF0ZS5leHBhbmRFcnJvciA/IGVycm9yTWVzc2FnZSA6IG51bGwpIDogbnVsbCk7CiAgICAgIH0KICAgIH0pKTsKICB9CgogIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9kcmFnX2Ryb3AuRHJhZ0Ryb3AsIHsKICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJsbnNXb3Jrc3BhY2UiLAogICAgZHJhZ2dhYmxlOiBmYWxzZSwKICAgIGRyb3BwYWJsZTogQm9vbGVhbihzdWdnZXN0aW9uRm9yRHJhZ2dlZEZpZWxkKSwKICAgIG9uRHJvcDogb25Ecm9wCiAgfSwgcmVuZGVyVmlzdWFsaXphdGlvbigpKTsKfQ=="},null]}