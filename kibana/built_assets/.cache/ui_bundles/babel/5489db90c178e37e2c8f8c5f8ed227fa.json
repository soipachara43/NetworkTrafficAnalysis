{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/vis_type_timeseries/public/components/vis_types/table/vis.js","dependencies":[{"path":"src/legacy/core_plugins/vis_type_timeseries/public/components/vis_types/table/vis.js","mtime":1589249550046},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlRhYmxlVmlzID0gdm9pZCAwOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJsb2Rhc2giKSk7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3Byb3BUeXBlcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicHJvcC10eXBlcyIpKTsKCnZhciBfdGlja19mb3JtYXR0ZXIgPSByZXF1aXJlKCIuLi8uLi9saWIvdGlja19mb3JtYXR0ZXIiKTsKCnZhciBfY2FsY3VsYXRlX2xhYmVsID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcGx1Z2lucy92aXNfdHlwZV90aW1lc2VyaWVzL2NvbW1vbi9jYWxjdWxhdGVfbGFiZWwiKTsKCnZhciBfaXNfc29ydGFibGUgPSByZXF1aXJlKCIuL2lzX3NvcnRhYmxlIik7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9yZXBsYWNlX3ZhcnMgPSByZXF1aXJlKCIuLi8uLi9saWIvcmVwbGFjZV92YXJzIik7Cgp2YXIgX3B1YmxpYyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3BsdWdpbnMvZGF0YS9wdWJsaWMiKTsKCnZhciBfcmVhY3QyID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX3NlcnZpY2VzID0gcmVxdWlyZSgiLi4vLi4vLi4vc2VydmljZXMiKTsKCnZhciBfbWV0cmljX3R5cGVzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcGx1Z2lucy92aXNfdHlwZV90aW1lc2VyaWVzL2NvbW1vbi9tZXRyaWNfdHlwZXMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7IHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OyBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsgfSBlbHNlIHsgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKZnVuY3Rpb24gZ2V0Q29sb3IocnVsZXMsIGNvbG9yS2V5LCB2YWx1ZSkgewogIHZhciBjb2xvcjsKCiAgaWYgKHJ1bGVzKSB7CiAgICBydWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChydWxlKSB7CiAgICAgIGlmIChydWxlLm9wZXJhdG9yICYmIHJ1bGUudmFsdWUgIT0gbnVsbCkgewogICAgICAgIGlmIChfbG9kYXNoLmRlZmF1bHRbcnVsZS5vcGVyYXRvcl0odmFsdWUsIHJ1bGUudmFsdWUpKSB7CiAgICAgICAgICBjb2xvciA9IHJ1bGVbY29sb3JLZXldOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfQoKICByZXR1cm4gY29sb3I7Cn0KCnZhciBUYWJsZVZpcyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoVGFibGVWaXMsIF9Db21wb25lbnQpOwoKICBmdW5jdGlvbiBUYWJsZVZpcyhwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUYWJsZVZpcyk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoVGFibGVWaXMpLmNhbGwodGhpcywgcHJvcHMpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJyZW5kZXJSb3ciLCBmdW5jdGlvbiAocm93KSB7CiAgICAgIHZhciBtb2RlbCA9IF90aGlzLnByb3BzLm1vZGVsOwogICAgICB2YXIgcm93RGlzcGxheSA9IG1vZGVsLnBpdm90X3R5cGUgPT09ICdkYXRlJyA/IF90aGlzLmRhdGVGb3JtYXR0ZXIuY29udmVydChyb3cua2V5KSA6IHJvdy5rZXk7CgogICAgICBpZiAobW9kZWwuZHJpbGxkb3duX3VybCkgewogICAgICAgIHZhciB1cmwgPSAoMCwgX3JlcGxhY2VfdmFycy5yZXBsYWNlVmFycykobW9kZWwuZHJpbGxkb3duX3VybCwge30sIHsKICAgICAgICAgIGtleTogcm93LmtleQogICAgICAgIH0pOwogICAgICAgIHJvd0Rpc3BsYXkgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJhIiwgewogICAgICAgICAgaHJlZjogdXJsCiAgICAgICAgfSwgcm93RGlzcGxheSk7CiAgICAgIH0KCiAgICAgIHZhciBjb2x1bW5zID0gcm93LnNlcmllcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgfSkubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgdmFyIGNvbHVtbiA9IF90aGlzLnZpc2libGVTZXJpZXMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgICAgcmV0dXJuIGMuaWQgPT09IGl0ZW0uaWQ7CiAgICAgICAgfSk7CgogICAgICAgIGlmICghY29sdW1uKSByZXR1cm4gbnVsbDsKICAgICAgICB2YXIgZm9ybWF0dGVyID0gKDAsIF90aWNrX2Zvcm1hdHRlci5jcmVhdGVUaWNrRm9ybWF0dGVyKShjb2x1bW4uZm9ybWF0dGVyLCBjb2x1bW4udmFsdWVfdGVtcGxhdGUsIF90aGlzLnByb3BzLmdldENvbmZpZyk7CiAgICAgICAgdmFyIHZhbHVlID0gZm9ybWF0dGVyKGl0ZW0ubGFzdCk7CiAgICAgICAgdmFyIHRyZW5kOwoKICAgICAgICBpZiAoY29sdW1uLnRyZW5kX2Fycm93cykgewogICAgICAgICAgdmFyIHRyZW5kSWNvbiA9IGl0ZW0uc2xvcGUgPiAwID8gJ3NvcnRVcCcgOiAnc29ydERvd24nOwogICAgICAgICAgdHJlbmQgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgIlx4QTAgIiwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUljb24sIHsKICAgICAgICAgICAgdHlwZTogdHJlbmRJY29uLAogICAgICAgICAgICBjb2xvcjogInN1YmR1ZWQiCiAgICAgICAgICB9KSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgc3R5bGUgPSB7CiAgICAgICAgICBjb2xvcjogZ2V0Q29sb3IoY29sdW1uLmNvbG9yX3J1bGVzLCAndGV4dCcsIGl0ZW0ubGFzdCkKICAgICAgICB9OwogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJ0ZCIsIHsKICAgICAgICAgIGtleTogIiIuY29uY2F0KHJvdy5rZXksICItIikuY29uY2F0KGl0ZW0uaWQpLAogICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInR2YlRhYmxlVmlzX192YWx1ZSIsCiAgICAgICAgICBjbGFzc05hbWU6ICJldWktdGV4dFJpZ2h0IiwKICAgICAgICAgIHN0eWxlOiBzdHlsZQogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCB2YWx1ZSksIHRyZW5kKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJ0ciIsIHsKICAgICAgICBrZXk6IHJvdy5rZXkKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCByb3dEaXNwbGF5KSwgY29sdW1ucyk7CiAgICB9KTsKCiAgICB2YXIgZmllbGRGb3JtYXRzU2VydmljZSA9ICgwLCBfc2VydmljZXMuZ2V0RmllbGRGb3JtYXRzKSgpOwogICAgdmFyIERhdGVGb3JtYXQgPSBmaWVsZEZvcm1hdHNTZXJ2aWNlLmdldFR5cGUoX3B1YmxpYy5maWVsZEZvcm1hdHMuRklFTERfRk9STUFUX0lEUy5EQVRFKTsKICAgIF90aGlzLmRhdGVGb3JtYXR0ZXIgPSBuZXcgRGF0ZUZvcm1hdCh7fSwgX3RoaXMucHJvcHMuZ2V0Q29uZmlnKTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhUYWJsZVZpcywgW3sKICAgIGtleTogInJlbmRlckhlYWRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVySGVhZGVyKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMgPSB0aGlzLnByb3BzLAogICAgICAgICAgbW9kZWwgPSBfdGhpcyRwcm9wcy5tb2RlbCwKICAgICAgICAgIHVpU3RhdGUgPSBfdGhpcyRwcm9wcy51aVN0YXRlLAogICAgICAgICAgb25VaVN0YXRlID0gX3RoaXMkcHJvcHMub25VaVN0YXRlOwogICAgICB2YXIgc3RhdGVLZXkgPSAiIi5jb25jYXQobW9kZWwudHlwZSwgIi5zb3J0Iik7CiAgICAgIHZhciBzb3J0ID0gdWlTdGF0ZS5nZXQoc3RhdGVLZXksIHsKICAgICAgICBjb2x1bW46ICdfZGVmYXVsdF8nLAogICAgICAgIG9yZGVyOiAnYXNjJwogICAgICB9KTsKCiAgICAgIHZhciBjYWxjdWxhdGVIZWFkZXJMYWJlbCA9IGZ1bmN0aW9uIGNhbGN1bGF0ZUhlYWRlckxhYmVsKG1ldHJpYywgaXRlbSkgewogICAgICAgIHZhciBkZWZhdWx0TGFiZWwgPSBpdGVtLmxhYmVsIHx8ICgwLCBfY2FsY3VsYXRlX2xhYmVsLmNhbGN1bGF0ZUxhYmVsKShtZXRyaWMsIGl0ZW0ubWV0cmljcyk7CgogICAgICAgIHN3aXRjaCAobWV0cmljLnR5cGUpIHsKICAgICAgICAgIGNhc2UgX21ldHJpY190eXBlcy5NRVRSSUNfVFlQRVMuUEVSQ0VOVElMRToKICAgICAgICAgICAgcmV0dXJuICIiLmNvbmNhdChkZWZhdWx0TGFiZWwsICIgKCIpLmNvbmNhdCgoMCwgX2xvZGFzaC5sYXN0KShtZXRyaWMucGVyY2VudGlsZXMpLnZhbHVlIHx8IDAsICIpIik7CgogICAgICAgICAgY2FzZSBfbWV0cmljX3R5cGVzLk1FVFJJQ19UWVBFUy5QRVJDRU5USUxFX1JBTks6CiAgICAgICAgICAgIHJldHVybiAiIi5jb25jYXQoZGVmYXVsdExhYmVsLCAiICgiKS5jb25jYXQoKDAsIF9sb2Rhc2gubGFzdCkobWV0cmljLnZhbHVlcykgfHwgMCwgIikiKTsKCiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZXR1cm4gZGVmYXVsdExhYmVsOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIHZhciBjb2x1bW5zID0gdGhpcy52aXNpYmxlU2VyaWVzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHZhciBtZXRyaWMgPSAoMCwgX2xvZGFzaC5sYXN0KShpdGVtLm1ldHJpY3MpOwogICAgICAgIHZhciBsYWJlbCA9IGNhbGN1bGF0ZUhlYWRlckxhYmVsKG1ldHJpYywgaXRlbSk7CgogICAgICAgIHZhciBoYW5kbGVDbGljayA9IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKCkgewogICAgICAgICAgaWYgKCEoMCwgX2lzX3NvcnRhYmxlLmlzU29ydGFibGUpKG1ldHJpYykpIHJldHVybjsKICAgICAgICAgIHZhciBvcmRlcjsKCiAgICAgICAgICBpZiAoc29ydC5jb2x1bW4gPT09IGl0ZW0uaWQpIHsKICAgICAgICAgICAgb3JkZXIgPSBzb3J0Lm9yZGVyID09PSAnYXNjJyA/ICdkZXNjJyA6ICdhc2MnOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgb3JkZXIgPSAnYXNjJzsKICAgICAgICAgIH0KCiAgICAgICAgICBvblVpU3RhdGUoc3RhdGVLZXksIHsKICAgICAgICAgICAgY29sdW1uOiBpdGVtLmlkLAogICAgICAgICAgICBvcmRlcjogb3JkZXIKICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIHZhciBzb3J0Q29tcG9uZW50OwoKICAgICAgICBpZiAoKDAsIF9pc19zb3J0YWJsZS5pc1NvcnRhYmxlKShtZXRyaWMpKSB7CiAgICAgICAgICB2YXIgX3NvcnRJY29uOwoKICAgICAgICAgIGlmIChzb3J0LmNvbHVtbiA9PT0gaXRlbS5pZCkgewogICAgICAgICAgICBfc29ydEljb24gPSBzb3J0Lm9yZGVyID09PSAnYXNjJyA/ICdzb3J0VXAnIDogJ3NvcnREb3duJzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF9zb3J0SWNvbiA9ICdlbXB0eSc7CiAgICAgICAgICB9CgogICAgICAgICAgc29ydENvbXBvbmVudCA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlJY29uLCB7CiAgICAgICAgICAgIHR5cGU6IF9zb3J0SWNvbgogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgaGVhZGVyQ29udGVudCA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCBsYWJlbCwgIiAiLCBzb3J0Q29tcG9uZW50KTsKCiAgICAgICAgaWYgKCEoMCwgX2lzX3NvcnRhYmxlLmlzU29ydGFibGUpKG1ldHJpYykpIHsKICAgICAgICAgIGhlYWRlckNvbnRlbnQgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVG9vbFRpcCwgewogICAgICAgICAgICBjb250ZW50OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICAgIGlkOiAidmlzVHlwZVRpbWVzZXJpZXMudGFibGUuY29sdW1uTm90U29ydGFibGVUb29sdGlwIiwKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlRoaXMgY29sdW1uIGlzIG5vdCBzb3J0YWJsZSIKICAgICAgICAgICAgfSkKICAgICAgICAgIH0sIGhlYWRlckNvbnRlbnQpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInRoIiwgewogICAgICAgICAgb25DbGljazogaGFuZGxlQ2xpY2ssCiAgICAgICAgICBrZXk6IGl0ZW0uaWQsCiAgICAgICAgICBzY29wZTogImNvbCIKICAgICAgICB9LCBoZWFkZXJDb250ZW50KTsKICAgICAgfSk7CiAgICAgIHZhciBsYWJlbCA9IG1vZGVsLnBpdm90X2xhYmVsIHx8IG1vZGVsLnBpdm90X2ZpZWxkIHx8IG1vZGVsLnBpdm90X2lkOwogICAgICB2YXIgc29ydEljb247CgogICAgICBpZiAoc29ydC5jb2x1bW4gPT09ICdfZGVmYXVsdF8nKSB7CiAgICAgICAgc29ydEljb24gPSBzb3J0Lm9yZGVyID09PSAnYXNjJyA/ICdzb3J0VXAnIDogJ3NvcnREb3duJzsKICAgICAgfSBlbHNlIHsKICAgICAgICBzb3J0SWNvbiA9ICdlbXB0eSc7CiAgICAgIH0KCiAgICAgIHZhciBzb3J0Q29tcG9uZW50ID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUljb24sIHsKICAgICAgICB0eXBlOiBzb3J0SWNvbgogICAgICB9KTsKCiAgICAgIHZhciBoYW5kbGVTb3J0Q2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVTb3J0Q2xpY2soKSB7CiAgICAgICAgdmFyIG9yZGVyOwoKICAgICAgICBpZiAoc29ydC5jb2x1bW4gPT09ICdfZGVmYXVsdF8nKSB7CiAgICAgICAgICBvcmRlciA9IHNvcnQub3JkZXIgPT09ICdhc2MnID8gJ2Rlc2MnIDogJ2FzYyc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9yZGVyID0gJ2FzYyc7CiAgICAgICAgfQoKICAgICAgICBvblVpU3RhdGUoc3RhdGVLZXksIHsKICAgICAgICAgIGNvbHVtbjogJ19kZWZhdWx0XycsCiAgICAgICAgICBvcmRlcjogb3JkZXIKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJ0ciIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInRoIiwgewogICAgICAgIGNsYXNzTmFtZTogImV1aS10ZXh0TGVmdCIsCiAgICAgICAgc2NvcGU6ICJjb2wiLAogICAgICAgIG9uQ2xpY2s6IGhhbmRsZVNvcnRDbGljawogICAgICB9LCBsYWJlbCwgIiAiLCBzb3J0Q29tcG9uZW50KSwgY29sdW1ucyk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLAogICAgICAgICAgdmlzRGF0YSA9IF90aGlzJHByb3BzMi52aXNEYXRhLAogICAgICAgICAgbW9kZWwgPSBfdGhpcyRwcm9wczIubW9kZWw7CiAgICAgIHZhciBoZWFkZXIgPSB0aGlzLnJlbmRlckhlYWRlcigpOwogICAgICB2YXIgcm93czsKCiAgICAgIGlmICgoMCwgX2xvZGFzaC5pc0FycmF5KSh2aXNEYXRhLnNlcmllcykgJiYgdmlzRGF0YS5zZXJpZXMubGVuZ3RoKSB7CiAgICAgICAgcm93cyA9IHZpc0RhdGEuc2VyaWVzLm1hcCh0aGlzLnJlbmRlclJvdyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIG1lc3NhZ2UgPSBtb2RlbC5waXZvdF9pZCA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInZpc1R5cGVUaW1lc2VyaWVzLnRhYmxlLm5vUmVzdWx0c0F2YWlsYWJsZU1lc3NhZ2UiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJObyByZXN1bHRzIGF2YWlsYWJsZS4iCiAgICAgICAgfSkgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ2aXNUeXBlVGltZXNlcmllcy50YWJsZS5ub1Jlc3VsdHNBdmFpbGFibGVXaXRoRGVzY3JpcHRpb25NZXNzYWdlIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTm8gcmVzdWx0cyBhdmFpbGFibGUuIFlvdSBtdXN0IGNob29zZSBhIGdyb3VwIGJ5IGZpZWxkIGZvciB0aGlzIHZpc3VhbGl6YXRpb24uIgogICAgICAgIH0pOwogICAgICAgIHJvd3MgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJ0ciIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICAgICAgY29sU3BhbjogdGhpcy52aXNpYmxlU2VyaWVzLmxlbmd0aCArIDEKICAgICAgICB9LCBtZXNzYWdlKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAidHZiVmlzIiwKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAidGFibGVWaWV3IgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJ0YWJsZSIsIHsKICAgICAgICBjbGFzc05hbWU6ICJ0YWJsZSIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgidGhlYWQiLCBudWxsLCBoZWFkZXIpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIsIG51bGwsIHJvd3MpKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAidmlzaWJsZVNlcmllcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuICgwLCBfbG9kYXNoLmdldCkodGhpcy5wcm9wcywgJ21vZGVsLnNlcmllcycsIFtdKS5maWx0ZXIoZnVuY3Rpb24gKHNlcmllcykgewogICAgICAgIHJldHVybiAhc2VyaWVzLmhpZGRlbjsKICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gVGFibGVWaXM7Cn0oX3JlYWN0LkNvbXBvbmVudCk7CgpleHBvcnRzLlRhYmxlVmlzID0gVGFibGVWaXM7ClRhYmxlVmlzLmRlZmF1bHRQcm9wcyA9IHsKICBzb3J0OiB7fQp9OwpUYWJsZVZpcy5wcm9wVHlwZXMgPSB7CiAgdmlzRGF0YTogX3Byb3BUeXBlcy5kZWZhdWx0Lm9iamVjdCwKICBtb2RlbDogX3Byb3BUeXBlcy5kZWZhdWx0Lm9iamVjdCwKICBiYWNrZ3JvdW5kQ29sb3I6IF9wcm9wVHlwZXMuZGVmYXVsdC5zdHJpbmcsCiAgb25QYWdpbmF0ZTogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMsCiAgb25VaVN0YXRlOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYywKICB1aVN0YXRlOiBfcHJvcFR5cGVzLmRlZmF1bHQub2JqZWN0LAogIHBhZ2VOdW1iZXI6IF9wcm9wVHlwZXMuZGVmYXVsdC5udW1iZXIsCiAgZ2V0Q29uZmlnOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYwp9Ow=="},null]}