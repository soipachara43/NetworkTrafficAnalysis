{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/tile_map/public/tile_map_visualization.js","dependencies":[{"path":"src/legacy/core_plugins/tile_map/public/tile_map_visualization.js","mtime":1589249549910},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmNyZWF0ZVRpbGVNYXBWaXN1YWxpemF0aW9uID0gdm9pZCAwOwoKdmFyIF9sb2Rhc2ggPSByZXF1aXJlKCJsb2Rhc2giKTsKCnZhciBfZ2VvaGFzaF9sYXllciA9IHJlcXVpcmUoIi4vZ2VvaGFzaF9sYXllciIpOwoKdmFyIF9iYXNlX21hcHNfdmlzdWFsaXphdGlvbiA9IHJlcXVpcmUoIi4vYmFzZV9tYXBzX3Zpc3VhbGl6YXRpb24iKTsKCnZhciBfdG9vbHRpcF9mb3JtYXR0ZXIgPSByZXF1aXJlKCIuL2VkaXRvcnMvX3Rvb2x0aXBfZm9ybWF0dGVyIik7Cgp2YXIgX25ld19wbGF0Zm9ybSA9IHJlcXVpcmUoInVpL25ld19wbGF0Zm9ybSIpOwoKdmFyIF91dGlsaXRpZXMgPSByZXF1aXJlKCIuLi8uLi8uLi91aS9wdWJsaWMvdmlzdWFsaXplL2xvYWRlci9waXBlbGluZV9oZWxwZXJzL3V0aWxpdGllcyIpOwoKdmFyIF9kZWNvZGVfZ2VvX2hhc2ggPSByZXF1aXJlKCIuLi8uLi8uLi91aS9wdWJsaWMvdmlzL21hcC9kZWNvZGVfZ2VvX2hhc2giKTsKCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7IH0gfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIHNlbGYgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7IGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7IH0gZnVuY3Rpb24gX3Rocm93KGVycikgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7IH0gX25leHQodW5kZWZpbmVkKTsgfSk7IH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ICE9PSAidW5kZWZpbmVkIiAmJiBSZWZsZWN0LmdldCkgeyBfZ2V0ID0gUmVmbGVjdC5nZXQ7IH0gZWxzZSB7IF9nZXQgPSBmdW5jdGlvbiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyKSB7IHZhciBiYXNlID0gX3N1cGVyUHJvcEJhc2UodGFyZ2V0LCBwcm9wZXJ0eSk7IGlmICghYmFzZSkgcmV0dXJuOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYmFzZSwgcHJvcGVydHkpOyBpZiAoZGVzYy5nZXQpIHsgcmV0dXJuIGRlc2MuZ2V0LmNhbGwocmVjZWl2ZXIpOyB9IHJldHVybiBkZXNjLnZhbHVlOyB9OyB9IHJldHVybiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyIHx8IHRhcmdldCk7IH0KCmZ1bmN0aW9uIF9zdXBlclByb3BCYXNlKG9iamVjdCwgcHJvcGVydHkpIHsgd2hpbGUgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkpIHsgb2JqZWN0ID0gX2dldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChvYmplY3QgPT09IG51bGwpIGJyZWFrOyB9IHJldHVybiBvYmplY3Q7IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKdmFyIGNyZWF0ZVRpbGVNYXBWaXN1YWxpemF0aW9uID0gZnVuY3Rpb24gY3JlYXRlVGlsZU1hcFZpc3VhbGl6YXRpb24oX3JlZikgewogIHZhciBfdGVtcDsKCiAgdmFyIHNlcnZpY2VTZXR0aW5ncyA9IF9yZWYuc2VydmljZVNldHRpbmdzLAogICAgICAkaW5qZWN0b3IgPSBfcmVmLiRpbmplY3RvcjsKICB2YXIgQmFzZU1hcHNWaXN1YWxpemF0aW9uID0gbmV3IF9iYXNlX21hcHNfdmlzdWFsaXphdGlvbi5CYXNlTWFwc1Zpc3VhbGl6YXRpb25Qcm92aWRlcihzZXJ2aWNlU2V0dGluZ3MpOwogIHZhciB0b29sdGlwRm9ybWF0dGVyID0gbmV3IF90b29sdGlwX2Zvcm1hdHRlci5UaWxlTWFwVG9vbHRpcEZvcm1hdHRlclByb3ZpZGVyKCRpbmplY3Rvcik7CiAgcmV0dXJuIF90ZW1wID0KICAvKiNfX1BVUkVfXyovCiAgZnVuY3Rpb24gKF9CYXNlTWFwc1Zpc3VhbGl6YXRpbykgewogICAgX2luaGVyaXRzKENvb3JkaW5hdGVNYXBzVmlzdWFsaXphdGlvbiwgX0Jhc2VNYXBzVmlzdWFsaXphdGlvKTsKCiAgICBmdW5jdGlvbiBDb29yZGluYXRlTWFwc1Zpc3VhbGl6YXRpb24oZWxlbWVudCwgdmlzKSB7CiAgICAgIHZhciBfdGhpczsKCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb29yZGluYXRlTWFwc1Zpc3VhbGl6YXRpb24pOwoKICAgICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoQ29vcmRpbmF0ZU1hcHNWaXN1YWxpemF0aW9uKS5jYWxsKHRoaXMsIGVsZW1lbnQsIHZpcykpOwoKICAgICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAidXBkYXRlR2VvaGFzaEFnZyIsIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZ2VvaGFzaEFnZyA9IF90aGlzLl9nZXRHZW9IYXNoQWdnKCk7CgogICAgICAgIGlmICghZ2VvaGFzaEFnZykgcmV0dXJuOwogICAgICAgIHZhciB1cGRhdGVWYXJzT2JqZWN0ID0gewogICAgICAgICAgbmFtZTogJ2JvdW5kcycsCiAgICAgICAgICBkYXRhOiB7fQogICAgICAgIH07CgogICAgICAgIHZhciBib3VuZHMgPSBfdGhpcy5fa2liYW5hTWFwLmdldEJvdW5kcygpOwoKICAgICAgICB2YXIgbWFwQ29sbGFyID0gKDAsIF9kZWNvZGVfZ2VvX2hhc2guc2NhbGVCb3VuZHMpKGJvdW5kcyk7CgogICAgICAgIGlmICghKDAsIF9kZWNvZGVfZ2VvX2hhc2guZ2VvQ29udGFpbnMpKGdlb2hhc2hBZ2cuYWdnQ29uZmlnUGFyYW1zLmJvdW5kaW5nQm94LCBtYXBDb2xsYXIpKSB7CiAgICAgICAgICB1cGRhdGVWYXJzT2JqZWN0LmRhdGEuYm91bmRpbmdCb3ggPSB7CiAgICAgICAgICAgIHRvcF9sZWZ0OiBtYXBDb2xsYXIudG9wX2xlZnQsCiAgICAgICAgICAgIGJvdHRvbV9yaWdodDogbWFwQ29sbGFyLmJvdHRvbV9yaWdodAogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdXBkYXRlVmFyc09iamVjdC5kYXRhLmJvdW5kaW5nQm94ID0gZ2VvaGFzaEFnZy5hZ2dDb25maWdQYXJhbXMuYm91bmRpbmdCb3g7CiAgICAgICAgfSAvLyB0b2RvOiBhdXRvUHJlY2lzaW9uIHNob3VsZCBiZSB2aXMgcGFyYW1ldGVyLCBub3QgYWdnQ29uZmlnIG9uZQoKCiAgICAgICAgdXBkYXRlVmFyc09iamVjdC5kYXRhLnByZWNpc2lvbiA9IGdlb2hhc2hBZ2cuYWdnQ29uZmlnUGFyYW1zLmF1dG9QcmVjaXNpb24gPyBfZGVjb2RlX2dlb19oYXNoLnpvb21QcmVjaXNpb25bX3RoaXMudmlzLmdldFVpU3RhdGUoKS5nZXQoJ21hcFpvb20nKV0gOiAoMCwgX2RlY29kZV9nZW9faGFzaC5nZXRQcmVjaXNpb24pKGdlb2hhc2hBZ2cuYWdnQ29uZmlnUGFyYW1zLnByZWNpc2lvbik7CgogICAgICAgIF90aGlzLnZpcy5ldmVudHNTdWJqZWN0Lm5leHQodXBkYXRlVmFyc09iamVjdCk7CiAgICAgIH0pOwoKICAgICAgX3RoaXMuX2dlb2hhc2hMYXllciA9IG51bGw7CiAgICAgIHJldHVybiBfdGhpczsKICAgIH0KCiAgICBfY3JlYXRlQ2xhc3MoQ29vcmRpbmF0ZU1hcHNWaXN1YWxpemF0aW9uLCBbewogICAgICBrZXk6ICJfbWFrZUtpYmFuYU1hcCIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9tYWtlS2liYW5hTWFwMiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAgICAgdmFyIHByZXZpb3VzUHJlY2lzaW9uLCBwcmVjaXNpb25DaGFuZ2UsIHVpU3RhdGU7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICByZXR1cm4gX2dldChfZ2V0UHJvdG90eXBlT2YoQ29vcmRpbmF0ZU1hcHNWaXN1YWxpemF0aW9uLnByb3RvdHlwZSksICJfbWFrZUtpYmFuYU1hcCIsIHRoaXMpLmNhbGwodGhpcyk7CgogICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBwcmV2aW91c1ByZWNpc2lvbiA9IHRoaXMuX2tpYmFuYU1hcC5nZXRHZW9oYXNoUHJlY2lzaW9uKCk7CiAgICAgICAgICAgICAgICAgIHByZWNpc2lvbkNoYW5nZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB1aVN0YXRlID0gdGhpcy52aXMuZ2V0VWlTdGF0ZSgpOwogICAgICAgICAgICAgICAgICB1aVN0YXRlLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAocHJvcCkgewogICAgICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSAnbWFwWm9vbScgfHwgcHJvcCA9PT0gJ21hcENlbnRlcicpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi51cGRhdGVHZW9oYXNoQWdnKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIHRoaXMuX2tpYmFuYU1hcC5vbignem9vbWNoYW5nZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBwcmVjaXNpb25DaGFuZ2UgPSBwcmV2aW91c1ByZWNpc2lvbiAhPT0gX3RoaXMyLl9raWJhbmFNYXAuZ2V0R2VvaGFzaFByZWNpc2lvbigpOwogICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUHJlY2lzaW9uID0gX3RoaXMyLl9raWJhbmFNYXAuZ2V0R2VvaGFzaFByZWNpc2lvbigpOwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIHRoaXMuX2tpYmFuYU1hcC5vbignem9vbWVuZCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvaGFzaEFnZyA9IF90aGlzMi5fZ2V0R2VvSGFzaEFnZygpOwoKICAgICAgICAgICAgICAgICAgICBpZiAoIWdlb2hhc2hBZ2cpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciBpc0F1dG9QcmVjaXNpb24gPSB0eXBlb2YgZ2VvaGFzaEFnZy5hZ2dDb25maWdQYXJhbXMuYXV0b1ByZWNpc2lvbiA9PT0gJ2Jvb2xlYW4nID8gZ2VvaGFzaEFnZy5hZ2dDb25maWdQYXJhbXMuYXV0b1ByZWNpc2lvbiA6IHRydWU7CgogICAgICAgICAgICAgICAgICAgIGlmICghaXNBdXRvUHJlY2lzaW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAocHJlY2lzaW9uQ2hhbmdlKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczIudXBkYXRlR2VvaGFzaEFnZygpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAvL3doZW4gd2UgZmlsdGVyIHF1ZXJpZXMgYnkgY29sbGFyCiAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuX3VwZGF0ZURhdGEoX3RoaXMyLl9nZW9Kc29uRmVhdHVyZUNvbGxlY3Rpb25BbmRNZXRhKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgdGhpcy5fa2liYW5hTWFwLmFkZERyYXdDb250cm9sKCk7CgogICAgICAgICAgICAgICAgICB0aGlzLl9raWJhbmFNYXAub24oJ2RyYXdDcmVhdGVkOnJlY3RhbmdsZScsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgICAgIHZhciBnZW9oYXNoQWdnID0gX3RoaXMyLl9nZXRHZW9IYXNoQWdnKCk7CgogICAgICAgICAgICAgICAgICAgIF90aGlzMi5hZGRTcGF0aWFsRmlsdGVyKGdlb2hhc2hBZ2csICdnZW9fYm91bmRpbmdfYm94JywgZXZlbnQuYm91bmRzKTsKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICB0aGlzLl9raWJhbmFNYXAub24oJ2RyYXdDcmVhdGVkOnBvbHlnb24nLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvaGFzaEFnZyA9IF90aGlzMi5fZ2V0R2VvSGFzaEFnZygpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczIuYWRkU3BhdGlhbEZpbHRlcihnZW9oYXNoQWdnLCAnZ2VvX3BvbHlnb24nLCB7CiAgICAgICAgICAgICAgICAgICAgICBwb2ludHM6IGV2ZW50LnBvaW50cwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICAgIH0pKTsKCiAgICAgICAgZnVuY3Rpb24gX21ha2VLaWJhbmFNYXAoKSB7CiAgICAgICAgICByZXR1cm4gX21ha2VLaWJhbmFNYXAyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gX21ha2VLaWJhbmFNYXA7CiAgICAgIH0oKQogICAgfSwgewogICAgICBrZXk6ICJfdXBkYXRlRGF0YSIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF91cGRhdGVEYXRhMiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihnZW9qc29uRmVhdHVyZUNvbGxlY3Rpb25BbmRNZXRhKSB7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBpZiAoISh0aGlzLl9nZXRNYXBzUGFyYW1zKCkubWFwVHlwZSAhPT0gJ0hlYXRtYXAnICYmIGdlb2pzb25GZWF0dXJlQ29sbGVjdGlvbkFuZE1ldGEgPT09IHRoaXMuX2dlb0pzb25GZWF0dXJlQ29sbGVjdGlvbkFuZE1ldGEpKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBpZiAodGhpcy5fZ2VvaGFzaExheWVyKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fa2liYW5hTWFwLnJlbW92ZUxheWVyKHRoaXMuX2dlb2hhc2hMYXllcik7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuX2dlb2hhc2hMYXllciA9IG51bGw7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGlmIChnZW9qc29uRmVhdHVyZUNvbGxlY3Rpb25BbmRNZXRhKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB0aGlzLl9nZW9Kc29uRmVhdHVyZUNvbGxlY3Rpb25BbmRNZXRhID0gbnVsbDsKCiAgICAgICAgICAgICAgICAgIHRoaXMuX2tpYmFuYU1hcC5yZW1vdmVMYXllcih0aGlzLl9nZW9oYXNoTGF5ZXIpOwoKICAgICAgICAgICAgICAgICAgdGhpcy5fZ2VvaGFzaExheWVyID0gbnVsbDsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9nZW9Kc29uRmVhdHVyZUNvbGxlY3Rpb25BbmRNZXRhIHx8ICFnZW9qc29uRmVhdHVyZUNvbGxlY3Rpb25BbmRNZXRhLmZlYXR1cmVDb2xsZWN0aW9uLmZlYXR1cmVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuX2dlb0pzb25GZWF0dXJlQ29sbGVjdGlvbkFuZE1ldGEgPSBnZW9qc29uRmVhdHVyZUNvbGxlY3Rpb25BbmRNZXRhOwogICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlR2VvaGFzaEFnZygpOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB0aGlzLl9nZW9Kc29uRmVhdHVyZUNvbGxlY3Rpb25BbmRNZXRhID0gZ2VvanNvbkZlYXR1cmVDb2xsZWN0aW9uQW5kTWV0YTsKCiAgICAgICAgICAgICAgICAgIHRoaXMuX3JlY3JlYXRlR2VvaGFzaExheWVyKCk7CgogICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICAgIH0pKTsKCiAgICAgICAgZnVuY3Rpb24gX3VwZGF0ZURhdGEoX3gpIHsKICAgICAgICAgIHJldHVybiBfdXBkYXRlRGF0YTIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBfdXBkYXRlRGF0YTsKICAgICAgfSgpCiAgICB9LCB7CiAgICAgIGtleTogIl9yZWNyZWF0ZUdlb2hhc2hMYXllciIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVjcmVhdGVHZW9oYXNoTGF5ZXIoKSB7CiAgICAgICAgaWYgKHRoaXMuX2dlb2hhc2hMYXllcikgewogICAgICAgICAgdGhpcy5fa2liYW5hTWFwLnJlbW92ZUxheWVyKHRoaXMuX2dlb2hhc2hMYXllcik7CgogICAgICAgICAgdGhpcy5fZ2VvaGFzaExheWVyID0gbnVsbDsKICAgICAgICB9CgogICAgICAgIHZhciBnZW9oYXNoT3B0aW9ucyA9IHRoaXMuX2dldEdlb2hhc2hPcHRpb25zKCk7CgogICAgICAgIHRoaXMuX2dlb2hhc2hMYXllciA9IG5ldyBfZ2VvaGFzaF9sYXllci5HZW9oYXNoTGF5ZXIodGhpcy5fZ2VvSnNvbkZlYXR1cmVDb2xsZWN0aW9uQW5kTWV0YS5mZWF0dXJlQ29sbGVjdGlvbiwgdGhpcy5fZ2VvSnNvbkZlYXR1cmVDb2xsZWN0aW9uQW5kTWV0YS5tZXRhLCBnZW9oYXNoT3B0aW9ucywgdGhpcy5fa2liYW5hTWFwLmdldFpvb21MZXZlbCgpLCB0aGlzLl9raWJhbmFNYXApOwoKICAgICAgICB0aGlzLl9raWJhbmFNYXAuYWRkTGF5ZXIodGhpcy5fZ2VvaGFzaExheWVyKTsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJfdXBkYXRlUGFyYW1zIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3VwZGF0ZVBhcmFtczIgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgICB2YXIgZ2VvaGFzaE9wdGlvbnM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfZ2V0KF9nZXRQcm90b3R5cGVPZihDb29yZGluYXRlTWFwc1Zpc3VhbGl6YXRpb24ucHJvdG90eXBlKSwgIl91cGRhdGVQYXJhbXMiLCB0aGlzKS5jYWxsKHRoaXMpOwoKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgdGhpcy5fa2liYW5hTWFwLnNldERlc2F0dXJhdGVCYXNlTGF5ZXIodGhpcy5fcGFyYW1zLmlzRGVzYXR1cmF0ZWQpOyAvL2F2b2lkIHJlY3JlYXRpbmcgdGhlIGxlYWZsZXQgbGF5ZXIgd2hlbiB0aGVyZSBhcmUgb3B0aW9uLWNoYW5nZXMgdGhhdCBkbyBub3QgZWZmZWN0IHRoZSByZXByZXNlbnRhdGlvbgogICAgICAgICAgICAgICAgICAvL2UuZy4gdG9vbHRpcC12aXNpYmlsaXR5LCBsZWdlbmQgcG9zaXRpb24sIGJhc2VtYXAtZGVzYXR1cmF0aW9uLCAuLi4KCgogICAgICAgICAgICAgICAgICBnZW9oYXNoT3B0aW9ucyA9IHRoaXMuX2dldEdlb2hhc2hPcHRpb25zKCk7CgogICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2dlb2hhc2hMYXllciB8fCAhdGhpcy5fZ2VvaGFzaExheWVyLmlzUmV1c2FibGUoZ2VvaGFzaE9wdGlvbnMpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2dlb0pzb25GZWF0dXJlQ29sbGVjdGlvbkFuZE1ldGEpIHsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlY3JlYXRlR2VvaGFzaExheWVyKCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVEYXRhKHRoaXMuX2dlb0pzb25GZWF0dXJlQ29sbGVjdGlvbkFuZE1ldGEpOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgICAgfSkpOwoKICAgICAgICBmdW5jdGlvbiBfdXBkYXRlUGFyYW1zKCkgewogICAgICAgICAgcmV0dXJuIF91cGRhdGVQYXJhbXMyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gX3VwZGF0ZVBhcmFtczsKICAgICAgfSgpCiAgICB9LCB7CiAgICAgIGtleTogIl9nZXRHZW9oYXNoT3B0aW9ucyIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0R2VvaGFzaE9wdGlvbnMoKSB7CiAgICAgICAgdmFyIG5ld1BhcmFtcyA9IHRoaXMuX2dldE1hcHNQYXJhbXMoKTsKCiAgICAgICAgdmFyIG1ldHJpY0RpbWVuc2lvbiA9IHRoaXMuX3BhcmFtcy5kaW1lbnNpb25zLm1ldHJpYzsKICAgICAgICB2YXIgbWV0cmljTGFiZWwgPSBtZXRyaWNEaW1lbnNpb24gPyBtZXRyaWNEaW1lbnNpb24ubGFiZWwgOiAnJzsKICAgICAgICB2YXIgbWV0cmljRm9ybWF0ID0gKDAsIF91dGlsaXRpZXMuZ2V0Rm9ybWF0KShtZXRyaWNEaW1lbnNpb24gJiYgbWV0cmljRGltZW5zaW9uLmZvcm1hdCk7CiAgICAgICAgdmFyIGJvdW5kVG9vbHRpcEZvcm1hdHRlciA9IHRvb2x0aXBGb3JtYXR0ZXIuYmluZChudWxsLCBtZXRyaWNMYWJlbCwgbWV0cmljRm9ybWF0LmdldENvbnZlcnRlckZvcigndGV4dCcpKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgbGFiZWw6IG1ldHJpY0xhYmVsLAogICAgICAgICAgdmFsdWVGb3JtYXR0ZXI6IHRoaXMuX2dlb0pzb25GZWF0dXJlQ29sbGVjdGlvbkFuZE1ldGEgPyBtZXRyaWNGb3JtYXQuZ2V0Q29udmVydGVyRm9yKCd0ZXh0JykgOiBudWxsLAogICAgICAgICAgdG9vbHRpcEZvcm1hdHRlcjogdGhpcy5fZ2VvSnNvbkZlYXR1cmVDb2xsZWN0aW9uQW5kTWV0YSA/IGJvdW5kVG9vbHRpcEZvcm1hdHRlciA6IG51bGwsCiAgICAgICAgICBtYXBUeXBlOiBuZXdQYXJhbXMubWFwVHlwZSwKICAgICAgICAgIGlzRmlsdGVyZWRCeUNvbGxhcjogdGhpcy5faXNGaWx0ZXJlZEJ5Q29sbGFyKCksCiAgICAgICAgICBjb2xvclJhbXA6IG5ld1BhcmFtcy5jb2xvclNjaGVtYSwKICAgICAgICAgIGhlYXRtYXA6IHsKICAgICAgICAgICAgaGVhdENsdXN0ZXJTaXplOiBuZXdQYXJhbXMuaGVhdENsdXN0ZXJTaXplCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJhZGRTcGF0aWFsRmlsdGVyIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFNwYXRpYWxGaWx0ZXIoYWdnLCBmaWx0ZXJOYW1lLCBmaWx0ZXJEYXRhKSB7CiAgICAgICAgaWYgKCFhZ2cpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBpbmRleFBhdHRlcm5OYW1lID0gYWdnLmluZGV4UGF0dGVybklkOwogICAgICAgIHZhciBmaWVsZCA9IGFnZy5hZ2dDb25maWdQYXJhbXMuZmllbGQ7CiAgICAgICAgdmFyIGZpbHRlciA9IHsKICAgICAgICAgIG1ldGE6IHsKICAgICAgICAgICAgbmVnYXRlOiBmYWxzZSwKICAgICAgICAgICAgaW5kZXg6IGluZGV4UGF0dGVybk5hbWUKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGZpbHRlcltmaWx0ZXJOYW1lXSA9IHsKICAgICAgICAgIGlnbm9yZV91bm1hcHBlZDogdHJ1ZQogICAgICAgIH07CiAgICAgICAgZmlsdGVyW2ZpbHRlck5hbWVdW2ZpZWxkXSA9IGZpbHRlckRhdGE7CiAgICAgICAgdmFyIGZpbHRlck1hbmFnZXIgPSBfbmV3X3BsYXRmb3JtLm5wU3RhcnQucGx1Z2lucy5kYXRhLnF1ZXJ5LmZpbHRlck1hbmFnZXI7CiAgICAgICAgZmlsdGVyTWFuYWdlci5hZGRGaWx0ZXJzKFtmaWx0ZXJdKTsKICAgICAgICB0aGlzLnZpcy51cGRhdGVTdGF0ZSgpOwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogIl9nZXRHZW9IYXNoQWdnIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRHZW9IYXNoQWdnKCkgewogICAgICAgIHJldHVybiB0aGlzLl9nZW9Kc29uRmVhdHVyZUNvbGxlY3Rpb25BbmRNZXRhICYmIHRoaXMuX2dlb0pzb25GZWF0dXJlQ29sbGVjdGlvbkFuZE1ldGEubWV0YS5nZW9oYXNoOwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogIl9pc0ZpbHRlcmVkQnlDb2xsYXIiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzRmlsdGVyZWRCeUNvbGxhcigpIHsKICAgICAgICB2YXIgREVGQVVMVCA9IGZhbHNlOwoKICAgICAgICB2YXIgYWdnID0gdGhpcy5fZ2V0R2VvSGFzaEFnZygpOwoKICAgICAgICBpZiAoYWdnKSB7CiAgICAgICAgICByZXR1cm4gKDAsIF9sb2Rhc2guZ2V0KShhZ2csICdhZ2dDb25maWdQYXJhbXMuaXNGaWx0ZXJlZEJ5Q29sbGFyJywgREVGQVVMVCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBERUZBVUxUOwogICAgICAgIH0KICAgICAgfQogICAgfV0pOwoKICAgIHJldHVybiBDb29yZGluYXRlTWFwc1Zpc3VhbGl6YXRpb247CiAgfShCYXNlTWFwc1Zpc3VhbGl6YXRpb24pLCBfdGVtcDsKfTsKCmV4cG9ydHMuY3JlYXRlVGlsZU1hcFZpc3VhbGl6YXRpb24gPSBjcmVhdGVUaWxlTWFwVmlzdWFsaXphdGlvbjs="},null]}