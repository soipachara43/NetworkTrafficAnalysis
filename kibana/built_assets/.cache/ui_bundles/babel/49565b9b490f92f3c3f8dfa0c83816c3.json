{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/index_lifecycle_management/public/np_ready/application/store/selectors/policies.js","dependencies":[{"path":"x-pack/legacy/plugins/index_lifecycle_management/public/np_ready/application/store/selectors/policies.js","mtime":1589249552260},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnBoYXNlVG9FUyA9IGV4cG9ydHMucG9saWN5RnJvbUVTID0gZXhwb3J0cy5pc0VtcHR5T2JqZWN0ID0gZXhwb3J0cy5pc051bWJlciA9IGV4cG9ydHMuc3BsaXRTaXplQW5kVW5pdHMgPSBleHBvcnRzLmdldFBoYXNlRGF0YSA9IGV4cG9ydHMuZ2V0UGhhc2UgPSBleHBvcnRzLmdldFBoYXNlcyA9IGV4cG9ydHMuZ2V0U2VsZWN0ZWRQb2xpY3lOYW1lID0gZXhwb3J0cy5nZXRTYXZlQXNOZXdQb2xpY3kgPSBleHBvcnRzLmdldFBhZ2VPZlBvbGljaWVzID0gZXhwb3J0cy5nZXRQb2xpY3lQYWdlciA9IGV4cG9ydHMuZ2V0VG90YWxQb2xpY2llcyA9IGV4cG9ydHMuaXNQb2xpY3lMaXN0TG9hZGVkID0gZXhwb3J0cy5nZXRQb2xpY3lQYWdlU2l6ZSA9IGV4cG9ydHMuZ2V0UG9saWN5Q3VycmVudFBhZ2UgPSBleHBvcnRzLmdldFBvbGljeVNvcnQgPSBleHBvcnRzLmdldFBvbGljeUZpbHRlciA9IGV4cG9ydHMuZ2V0U2VsZWN0ZWRPcmlnaW5hbFBvbGljeU5hbWUgPSBleHBvcnRzLmdldElzU2VsZWN0ZWRQb2xpY3lTZXQgPSBleHBvcnRzLmdldFNlbGVjdGVkUG9saWN5ID0gZXhwb3J0cy5nZXRJc05ld1BvbGljeSA9IGV4cG9ydHMuZ2V0UG9saWN5QnlOYW1lID0gZXhwb3J0cy5nZXRQb2xpY2llcyA9IHZvaWQgMDsKCnZhciBfcmVzZWxlY3QgPSByZXF1aXJlKCJyZXNlbGVjdCIpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgiLi4vLi4vY29uc3RhbnRzIik7Cgp2YXIgX3NlcnZpY2VzID0gcmVxdWlyZSgiLi4vLi4vc2VydmljZXMiKTsKCnZhciBfZGVmYXVsdHMgPSByZXF1aXJlKCIuLi9kZWZhdWx0cyIpOwoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9Cgp2YXIgZ2V0UG9saWNpZXMgPSBmdW5jdGlvbiBnZXRQb2xpY2llcyhzdGF0ZSkgewogIHJldHVybiBzdGF0ZS5wb2xpY2llcy5wb2xpY2llczsKfTsKCmV4cG9ydHMuZ2V0UG9saWNpZXMgPSBnZXRQb2xpY2llczsKCnZhciBnZXRQb2xpY3lCeU5hbWUgPSBmdW5jdGlvbiBnZXRQb2xpY3lCeU5hbWUoc3RhdGUsIG5hbWUpIHsKICByZXR1cm4gZ2V0UG9saWNpZXMoc3RhdGUpLmZpbmQoZnVuY3Rpb24gKHBvbGljeSkgewogICAgcmV0dXJuIHBvbGljeS5uYW1lID09PSBuYW1lOwogIH0pIHx8IHt9Owp9OwoKZXhwb3J0cy5nZXRQb2xpY3lCeU5hbWUgPSBnZXRQb2xpY3lCeU5hbWU7Cgp2YXIgZ2V0SXNOZXdQb2xpY3kgPSBmdW5jdGlvbiBnZXRJc05ld1BvbGljeShzdGF0ZSkgewogIHJldHVybiBzdGF0ZS5wb2xpY2llcy5zZWxlY3RlZFBvbGljeS5pc05ldzsKfTsKCmV4cG9ydHMuZ2V0SXNOZXdQb2xpY3kgPSBnZXRJc05ld1BvbGljeTsKCnZhciBnZXRTZWxlY3RlZFBvbGljeSA9IGZ1bmN0aW9uIGdldFNlbGVjdGVkUG9saWN5KHN0YXRlKSB7CiAgcmV0dXJuIHN0YXRlLnBvbGljaWVzLnNlbGVjdGVkUG9saWN5Owp9OwoKZXhwb3J0cy5nZXRTZWxlY3RlZFBvbGljeSA9IGdldFNlbGVjdGVkUG9saWN5OwoKdmFyIGdldElzU2VsZWN0ZWRQb2xpY3lTZXQgPSBmdW5jdGlvbiBnZXRJc1NlbGVjdGVkUG9saWN5U2V0KHN0YXRlKSB7CiAgcmV0dXJuIHN0YXRlLnBvbGljaWVzLnNlbGVjdGVkUG9saWN5U2V0Owp9OwoKZXhwb3J0cy5nZXRJc1NlbGVjdGVkUG9saWN5U2V0ID0gZ2V0SXNTZWxlY3RlZFBvbGljeVNldDsKCnZhciBnZXRTZWxlY3RlZE9yaWdpbmFsUG9saWN5TmFtZSA9IGZ1bmN0aW9uIGdldFNlbGVjdGVkT3JpZ2luYWxQb2xpY3lOYW1lKHN0YXRlKSB7CiAgcmV0dXJuIHN0YXRlLnBvbGljaWVzLm9yaWdpbmFsUG9saWN5TmFtZTsKfTsKCmV4cG9ydHMuZ2V0U2VsZWN0ZWRPcmlnaW5hbFBvbGljeU5hbWUgPSBnZXRTZWxlY3RlZE9yaWdpbmFsUG9saWN5TmFtZTsKCnZhciBnZXRQb2xpY3lGaWx0ZXIgPSBmdW5jdGlvbiBnZXRQb2xpY3lGaWx0ZXIoc3RhdGUpIHsKICByZXR1cm4gc3RhdGUucG9saWNpZXMuZmlsdGVyOwp9OwoKZXhwb3J0cy5nZXRQb2xpY3lGaWx0ZXIgPSBnZXRQb2xpY3lGaWx0ZXI7Cgp2YXIgZ2V0UG9saWN5U29ydCA9IGZ1bmN0aW9uIGdldFBvbGljeVNvcnQoc3RhdGUpIHsKICByZXR1cm4gc3RhdGUucG9saWNpZXMuc29ydDsKfTsKCmV4cG9ydHMuZ2V0UG9saWN5U29ydCA9IGdldFBvbGljeVNvcnQ7Cgp2YXIgZ2V0UG9saWN5Q3VycmVudFBhZ2UgPSBmdW5jdGlvbiBnZXRQb2xpY3lDdXJyZW50UGFnZShzdGF0ZSkgewogIHJldHVybiBzdGF0ZS5wb2xpY2llcy5jdXJyZW50UGFnZTsKfTsKCmV4cG9ydHMuZ2V0UG9saWN5Q3VycmVudFBhZ2UgPSBnZXRQb2xpY3lDdXJyZW50UGFnZTsKCnZhciBnZXRQb2xpY3lQYWdlU2l6ZSA9IGZ1bmN0aW9uIGdldFBvbGljeVBhZ2VTaXplKHN0YXRlKSB7CiAgcmV0dXJuIHN0YXRlLnBvbGljaWVzLnBhZ2VTaXplOwp9OwoKZXhwb3J0cy5nZXRQb2xpY3lQYWdlU2l6ZSA9IGdldFBvbGljeVBhZ2VTaXplOwoKdmFyIGlzUG9saWN5TGlzdExvYWRlZCA9IGZ1bmN0aW9uIGlzUG9saWN5TGlzdExvYWRlZChzdGF0ZSkgewogIHJldHVybiBzdGF0ZS5wb2xpY2llcy5pc0xvYWRlZDsKfTsKCmV4cG9ydHMuaXNQb2xpY3lMaXN0TG9hZGVkID0gaXNQb2xpY3lMaXN0TG9hZGVkOwp2YXIgZ2V0RmlsdGVyZWRQb2xpY2llcyA9ICgwLCBfcmVzZWxlY3QuY3JlYXRlU2VsZWN0b3IpKGdldFBvbGljaWVzLCBnZXRQb2xpY3lGaWx0ZXIsIGZ1bmN0aW9uIChwb2xpY2llcywgZmlsdGVyKSB7CiAgcmV0dXJuICgwLCBfc2VydmljZXMuZmlsdGVySXRlbXMpKFsnbmFtZSddLCBmaWx0ZXIsIHBvbGljaWVzKTsKfSk7CnZhciBnZXRUb3RhbFBvbGljaWVzID0gKDAsIF9yZXNlbGVjdC5jcmVhdGVTZWxlY3RvcikoZ2V0RmlsdGVyZWRQb2xpY2llcywgZnVuY3Rpb24gKGZpbHRlcmVkUG9saWNpZXMpIHsKICByZXR1cm4gZmlsdGVyZWRQb2xpY2llcy5sZW5ndGg7Cn0pOwpleHBvcnRzLmdldFRvdGFsUG9saWNpZXMgPSBnZXRUb3RhbFBvbGljaWVzOwp2YXIgZ2V0UG9saWN5UGFnZXIgPSAoMCwgX3Jlc2VsZWN0LmNyZWF0ZVNlbGVjdG9yKShnZXRQb2xpY3lDdXJyZW50UGFnZSwgZ2V0UG9saWN5UGFnZVNpemUsIGdldFRvdGFsUG9saWNpZXMsIGZ1bmN0aW9uIChjdXJyZW50UGFnZSwgcGFnZVNpemUsIHRvdGFsUG9saWNpZXMpIHsKICByZXR1cm4gbmV3IF9ldWkuUGFnZXIodG90YWxQb2xpY2llcywgcGFnZVNpemUsIGN1cnJlbnRQYWdlKTsKfSk7CmV4cG9ydHMuZ2V0UG9saWN5UGFnZXIgPSBnZXRQb2xpY3lQYWdlcjsKdmFyIGdldFBhZ2VPZlBvbGljaWVzID0gKDAsIF9yZXNlbGVjdC5jcmVhdGVTZWxlY3RvcikoZ2V0RmlsdGVyZWRQb2xpY2llcywgZ2V0UG9saWN5U29ydCwgZ2V0UG9saWN5UGFnZXIsIGZ1bmN0aW9uIChmaWx0ZXJlZFBvbGljaWVzLCBzb3J0LCBwYWdlcikgewogIHZhciBzb3J0ZWRQb2xpY2llcyA9ICgwLCBfc2VydmljZXMuc29ydFRhYmxlKShmaWx0ZXJlZFBvbGljaWVzLCBzb3J0LnNvcnRGaWVsZCwgc29ydC5pc1NvcnRBc2NlbmRpbmcpOwogIHZhciBmaXJzdEl0ZW1JbmRleCA9IHBhZ2VyLmZpcnN0SXRlbUluZGV4LAogICAgICBsYXN0SXRlbUluZGV4ID0gcGFnZXIubGFzdEl0ZW1JbmRleDsKICB2YXIgcGFnZWRQb2xpY2llcyA9IHNvcnRlZFBvbGljaWVzLnNsaWNlKGZpcnN0SXRlbUluZGV4LCBsYXN0SXRlbUluZGV4ICsgMSk7CiAgcmV0dXJuIHBhZ2VkUG9saWNpZXM7Cn0pOwpleHBvcnRzLmdldFBhZ2VPZlBvbGljaWVzID0gZ2V0UGFnZU9mUG9saWNpZXM7Cgp2YXIgZ2V0U2F2ZUFzTmV3UG9saWN5ID0gZnVuY3Rpb24gZ2V0U2F2ZUFzTmV3UG9saWN5KHN0YXRlKSB7CiAgcmV0dXJuIHN0YXRlLnBvbGljaWVzLnNlbGVjdGVkUG9saWN5LnNhdmVBc05ldzsKfTsKCmV4cG9ydHMuZ2V0U2F2ZUFzTmV3UG9saWN5ID0gZ2V0U2F2ZUFzTmV3UG9saWN5OwoKdmFyIGdldFNlbGVjdGVkUG9saWN5TmFtZSA9IGZ1bmN0aW9uIGdldFNlbGVjdGVkUG9saWN5TmFtZShzdGF0ZSkgewogIGlmICghZ2V0U2F2ZUFzTmV3UG9saWN5KHN0YXRlKSkgewogICAgcmV0dXJuIGdldFNlbGVjdGVkT3JpZ2luYWxQb2xpY3lOYW1lKHN0YXRlKTsKICB9CgogIHJldHVybiBzdGF0ZS5wb2xpY2llcy5zZWxlY3RlZFBvbGljeS5uYW1lOwp9OwoKZXhwb3J0cy5nZXRTZWxlY3RlZFBvbGljeU5hbWUgPSBnZXRTZWxlY3RlZFBvbGljeU5hbWU7Cgp2YXIgZ2V0UGhhc2VzID0gZnVuY3Rpb24gZ2V0UGhhc2VzKHN0YXRlKSB7CiAgcmV0dXJuIHN0YXRlLnBvbGljaWVzLnNlbGVjdGVkUG9saWN5LnBoYXNlczsKfTsKCmV4cG9ydHMuZ2V0UGhhc2VzID0gZ2V0UGhhc2VzOwoKdmFyIGdldFBoYXNlID0gZnVuY3Rpb24gZ2V0UGhhc2Uoc3RhdGUsIHBoYXNlKSB7CiAgcmV0dXJuIGdldFBoYXNlcyhzdGF0ZSlbcGhhc2VdOwp9OwoKZXhwb3J0cy5nZXRQaGFzZSA9IGdldFBoYXNlOwoKdmFyIGdldFBoYXNlRGF0YSA9IGZ1bmN0aW9uIGdldFBoYXNlRGF0YShzdGF0ZSwgcGhhc2UsIGtleSkgewogIGlmIChfY29uc3RhbnRzLlBIQVNFX0FUVFJJQlVURVNfVEhBVF9BUkVfTlVNQkVSUy5pbmNsdWRlcyhrZXkpKSB7CiAgICByZXR1cm4gcGFyc2VJbnQoZ2V0UGhhc2Uoc3RhdGUsIHBoYXNlKVtrZXldKTsKICB9CgogIHJldHVybiBnZXRQaGFzZShzdGF0ZSwgcGhhc2UpW2tleV07Cn07CgpleHBvcnRzLmdldFBoYXNlRGF0YSA9IGdldFBoYXNlRGF0YTsKCnZhciBzcGxpdFNpemVBbmRVbml0cyA9IGZ1bmN0aW9uIHNwbGl0U2l6ZUFuZFVuaXRzKGZpZWxkKSB7CiAgdmFyIHNpemU7CiAgdmFyIHVuaXRzOwogIHZhciByZXN1bHQgPSAvKFxkKykoXHcrKS8uZXhlYyhmaWVsZCk7CgogIGlmIChyZXN1bHQpIHsKICAgIHNpemUgPSBwYXJzZUludChyZXN1bHRbMV0pIHx8IDA7CiAgICB1bml0cyA9IHJlc3VsdFsyXTsKICB9CgogIHJldHVybiB7CiAgICBzaXplOiBzaXplLAogICAgdW5pdHM6IHVuaXRzCiAgfTsKfTsKCmV4cG9ydHMuc3BsaXRTaXplQW5kVW5pdHMgPSBzcGxpdFNpemVBbmRVbml0czsKCnZhciBpc051bWJlciA9IGZ1bmN0aW9uIGlzTnVtYmVyKHZhbHVlKSB7CiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcic7Cn07CgpleHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7Cgp2YXIgaXNFbXB0eU9iamVjdCA9IGZ1bmN0aW9uIGlzRW1wdHlPYmplY3Qob2JqKSB7CiAgcmV0dXJuICFvYmogfHwgT2JqZWN0LmVudHJpZXMob2JqKS5sZW5ndGggPT09IDAgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBPYmplY3Q7Cn07CgpleHBvcnRzLmlzRW1wdHlPYmplY3QgPSBpc0VtcHR5T2JqZWN0OwoKdmFyIHBoYXNlRnJvbUVTID0gZnVuY3Rpb24gcGhhc2VGcm9tRVMocGhhc2UsIHBoYXNlTmFtZSwgZGVmYXVsdEVtcHR5UG9saWN5KSB7CiAgdmFyIHBvbGljeSA9IF9vYmplY3RTcHJlYWQoe30sIGRlZmF1bHRFbXB0eVBvbGljeSk7CgogIGlmICghcGhhc2UpIHsKICAgIHJldHVybiBwb2xpY3k7CiAgfQoKICBwb2xpY3lbX2NvbnN0YW50cy5QSEFTRV9FTkFCTEVEXSA9IHRydWU7CgogIGlmIChwaGFzZS5taW5fYWdlKSB7CiAgICBpZiAocGhhc2VOYW1lID09PSBfY29uc3RhbnRzLlBIQVNFX1dBUk0gJiYgcGhhc2UubWluX2FnZSA9PT0gJzBtcycpIHsKICAgICAgcG9saWN5W19jb25zdGFudHMuV0FSTV9QSEFTRV9PTl9ST0xMT1ZFUl0gPSB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgdmFyIF9zcGxpdFNpemVBbmRVbml0cyA9IHNwbGl0U2l6ZUFuZFVuaXRzKHBoYXNlLm1pbl9hZ2UpLAogICAgICAgICAgbWluQWdlID0gX3NwbGl0U2l6ZUFuZFVuaXRzLnNpemUsCiAgICAgICAgICBtaW5BZ2VVbml0cyA9IF9zcGxpdFNpemVBbmRVbml0cy51bml0czsKCiAgICAgIHBvbGljeVtfY29uc3RhbnRzLlBIQVNFX1JPTExPVkVSX01JTklNVU1fQUdFXSA9IG1pbkFnZTsKICAgICAgcG9saWN5W19jb25zdGFudHMuUEhBU0VfUk9MTE9WRVJfTUlOSU1VTV9BR0VfVU5JVFNdID0gbWluQWdlVW5pdHM7CiAgICB9CiAgfQoKICBpZiAocGhhc2VOYW1lID09PSBfY29uc3RhbnRzLlBIQVNFX1dBUk0pIHsKICAgIHBvbGljeVtfY29uc3RhbnRzLlBIQVNFX1NIUklOS19FTkFCTEVEXSA9IGZhbHNlOwogICAgcG9saWN5W19jb25zdGFudHMuUEhBU0VfRk9SQ0VfTUVSR0VfRU5BQkxFRF0gPSBmYWxzZTsKICB9CgogIGlmIChwaGFzZS5hY3Rpb25zKSB7CiAgICB2YXIgYWN0aW9ucyA9IHBoYXNlLmFjdGlvbnM7CgogICAgaWYgKGFjdGlvbnMucm9sbG92ZXIpIHsKICAgICAgdmFyIHJvbGxvdmVyID0gYWN0aW9ucy5yb2xsb3ZlcjsKICAgICAgcG9saWN5W19jb25zdGFudHMuUEhBU0VfUk9MTE9WRVJfRU5BQkxFRF0gPSB0cnVlOwoKICAgICAgaWYgKHJvbGxvdmVyLm1heF9hZ2UpIHsKICAgICAgICB2YXIgX3NwbGl0U2l6ZUFuZFVuaXRzMiA9IHNwbGl0U2l6ZUFuZFVuaXRzKHJvbGxvdmVyLm1heF9hZ2UpLAogICAgICAgICAgICBtYXhBZ2UgPSBfc3BsaXRTaXplQW5kVW5pdHMyLnNpemUsCiAgICAgICAgICAgIG1heEFnZVVuaXRzID0gX3NwbGl0U2l6ZUFuZFVuaXRzMi51bml0czsKCiAgICAgICAgcG9saWN5W19jb25zdGFudHMuUEhBU0VfUk9MTE9WRVJfTUFYX0FHRV0gPSBtYXhBZ2U7CiAgICAgICAgcG9saWN5W19jb25zdGFudHMuUEhBU0VfUk9MTE9WRVJfTUFYX0FHRV9VTklUU10gPSBtYXhBZ2VVbml0czsKICAgICAgfQoKICAgICAgaWYgKHJvbGxvdmVyLm1heF9zaXplKSB7CiAgICAgICAgdmFyIF9zcGxpdFNpemVBbmRVbml0czMgPSBzcGxpdFNpemVBbmRVbml0cyhyb2xsb3Zlci5tYXhfc2l6ZSksCiAgICAgICAgICAgIG1heFNpemUgPSBfc3BsaXRTaXplQW5kVW5pdHMzLnNpemUsCiAgICAgICAgICAgIG1heFNpemVVbml0cyA9IF9zcGxpdFNpemVBbmRVbml0czMudW5pdHM7CgogICAgICAgIHBvbGljeVtfY29uc3RhbnRzLlBIQVNFX1JPTExPVkVSX01BWF9TSVpFX1NUT1JFRF0gPSBtYXhTaXplOwogICAgICAgIHBvbGljeVtfY29uc3RhbnRzLlBIQVNFX1JPTExPVkVSX01BWF9TSVpFX1NUT1JFRF9VTklUU10gPSBtYXhTaXplVW5pdHM7CiAgICAgIH0KCiAgICAgIGlmIChyb2xsb3Zlci5tYXhfZG9jcykgewogICAgICAgIHBvbGljeVtfY29uc3RhbnRzLlBIQVNFX1JPTExPVkVSX01BWF9ET0NVTUVOVFNdID0gcm9sbG92ZXIubWF4X2RvY3M7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoYWN0aW9ucy5hbGxvY2F0ZSkgewogICAgICB2YXIgYWxsb2NhdGUgPSBhY3Rpb25zLmFsbG9jYXRlOwoKICAgICAgaWYgKGFsbG9jYXRlLnJlcXVpcmUpIHsKICAgICAgICBPYmplY3QuZW50cmllcyhhbGxvY2F0ZS5yZXF1aXJlKS5mb3JFYWNoKGZ1bmN0aW9uIChlbnRyeSkgewogICAgICAgICAgcG9saWN5W19jb25zdGFudHMuUEhBU0VfTk9ERV9BVFRSU10gPSBlbnRyeS5qb2luKCc6Jyk7CiAgICAgICAgfSk7IC8vIGNoZWNraW5nIGZvciBudWxsIG9yIHVuZGVmaW5lZCBoZXJlCgogICAgICAgIGlmIChhbGxvY2F0ZS5udW1iZXJfb2ZfcmVwbGljYXMgIT0gbnVsbCkgewogICAgICAgICAgcG9saWN5W19jb25zdGFudHMuUEhBU0VfUkVQTElDQV9DT1VOVF0gPSBhbGxvY2F0ZS5udW1iZXJfb2ZfcmVwbGljYXM7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaWYgKGFjdGlvbnMuZm9yY2VtZXJnZSkgewogICAgICB2YXIgZm9yY2VtZXJnZSA9IGFjdGlvbnMuZm9yY2VtZXJnZTsKICAgICAgcG9saWN5W19jb25zdGFudHMuUEhBU0VfRk9SQ0VfTUVSR0VfRU5BQkxFRF0gPSB0cnVlOwogICAgICBwb2xpY3lbX2NvbnN0YW50cy5QSEFTRV9GT1JDRV9NRVJHRV9TRUdNRU5UU10gPSBmb3JjZW1lcmdlLm1heF9udW1fc2VnbWVudHM7CiAgICB9CgogICAgaWYgKGFjdGlvbnMuc2hyaW5rKSB7CiAgICAgIHBvbGljeVtfY29uc3RhbnRzLlBIQVNFX1NIUklOS19FTkFCTEVEXSA9IHRydWU7CiAgICAgIHBvbGljeVtfY29uc3RhbnRzLlBIQVNFX1BSSU1BUllfU0hBUkRfQ09VTlRdID0gYWN0aW9ucy5zaHJpbmsubnVtYmVyX29mX3NoYXJkczsKICAgIH0KCiAgICBpZiAoYWN0aW9ucy5mcmVlemUpIHsKICAgICAgcG9saWN5W19jb25zdGFudHMuUEhBU0VfRlJFRVpFX0VOQUJMRURdID0gdHJ1ZTsKICAgIH0KCiAgICBpZiAoYWN0aW9ucy5zZXRfcHJpb3JpdHkpIHsKICAgICAgcG9saWN5W19jb25zdGFudHMuUEhBU0VfSU5ERVhfUFJJT1JJVFldID0gYWN0aW9ucy5zZXRfcHJpb3JpdHkucHJpb3JpdHk7CiAgICB9CiAgfQoKICByZXR1cm4gcG9saWN5Owp9OwoKdmFyIHBvbGljeUZyb21FUyA9IGZ1bmN0aW9uIHBvbGljeUZyb21FUyhwb2xpY3kpIHsKICB2YXIgX3BoYXNlczsKCiAgdmFyIG5hbWUgPSBwb2xpY3kubmFtZSwKICAgICAgcGhhc2VzID0gcG9saWN5LnBvbGljeS5waGFzZXM7CiAgcmV0dXJuIHsKICAgIG5hbWU6IG5hbWUsCiAgICBwaGFzZXM6IChfcGhhc2VzID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfcGhhc2VzLCBfY29uc3RhbnRzLlBIQVNFX0hPVCwgcGhhc2VGcm9tRVMocGhhc2VzW19jb25zdGFudHMuUEhBU0VfSE9UXSwgX2NvbnN0YW50cy5QSEFTRV9IT1QsIF9kZWZhdWx0cy5kZWZhdWx0RW1wdHlIb3RQaGFzZSkpLCBfZGVmaW5lUHJvcGVydHkoX3BoYXNlcywgX2NvbnN0YW50cy5QSEFTRV9XQVJNLCBwaGFzZUZyb21FUyhwaGFzZXNbX2NvbnN0YW50cy5QSEFTRV9XQVJNXSwgX2NvbnN0YW50cy5QSEFTRV9XQVJNLCBfZGVmYXVsdHMuZGVmYXVsdEVtcHR5V2FybVBoYXNlKSksIF9kZWZpbmVQcm9wZXJ0eShfcGhhc2VzLCBfY29uc3RhbnRzLlBIQVNFX0NPTEQsIHBoYXNlRnJvbUVTKHBoYXNlc1tfY29uc3RhbnRzLlBIQVNFX0NPTERdLCBfY29uc3RhbnRzLlBIQVNFX0NPTEQsIF9kZWZhdWx0cy5kZWZhdWx0RW1wdHlDb2xkUGhhc2UpKSwgX2RlZmluZVByb3BlcnR5KF9waGFzZXMsIF9jb25zdGFudHMuUEhBU0VfREVMRVRFLCBwaGFzZUZyb21FUyhwaGFzZXNbX2NvbnN0YW50cy5QSEFTRV9ERUxFVEVdLCBfY29uc3RhbnRzLlBIQVNFX0RFTEVURSwgX2RlZmF1bHRzLmRlZmF1bHRFbXB0eURlbGV0ZVBoYXNlKSksIF9waGFzZXMpLAogICAgaXNOZXc6IGZhbHNlLAogICAgc2F2ZUFzTmV3OiBmYWxzZQogIH07Cn07CgpleHBvcnRzLnBvbGljeUZyb21FUyA9IHBvbGljeUZyb21FUzsKCnZhciBwaGFzZVRvRVMgPSBmdW5jdGlvbiBwaGFzZVRvRVMocGhhc2UsIG9yaWdpbmFsRXNQaGFzZSkgewogIHZhciBlc1BoYXNlID0gX29iamVjdFNwcmVhZCh7fSwgb3JpZ2luYWxFc1BoYXNlKTsKCiAgaWYgKCFwaGFzZVtfY29uc3RhbnRzLlBIQVNFX0VOQUJMRURdKSB7CiAgICByZXR1cm4ge307CiAgfQoKICBpZiAoaXNOdW1iZXIocGhhc2VbX2NvbnN0YW50cy5QSEFTRV9ST0xMT1ZFUl9NSU5JTVVNX0FHRV0pKSB7CiAgICBlc1BoYXNlLm1pbl9hZ2UgPSAiIi5jb25jYXQocGhhc2VbX2NvbnN0YW50cy5QSEFTRV9ST0xMT1ZFUl9NSU5JTVVNX0FHRV0pLmNvbmNhdChwaGFzZVtfY29uc3RhbnRzLlBIQVNFX1JPTExPVkVSX01JTklNVU1fQUdFX1VOSVRTXSk7CiAgfSAvLyBJZiB3YXJtIHBoYXNlIG9uIHJvbGxvdmVyIGlzIGVuYWJsZWQsIGRlbGV0ZSBtaW4gYWdlIGZpZWxkCiAgLy8gQW4gaW5kZXggbGlmZWN5Y2xlIHN3aXRjaGVzIHRvIHdhcm0gcGhhc2Ugd2hlbiByb2xsb3ZlciBvY2N1cnMsIHNvIHlvdSBjYW5ub3Qgc3BlY2lmeSBhIHdhcm0gcGhhc2UgdGltZQogIC8vIFRoZXkgYXJlIG11dHVhbGx5IGV4Y2x1c2l2ZQoKCiAgaWYgKHBoYXNlW19jb25zdGFudHMuV0FSTV9QSEFTRV9PTl9ST0xMT1ZFUl0pIHsKICAgIGRlbGV0ZSBlc1BoYXNlLm1pbl9hZ2U7CiAgfQoKICBlc1BoYXNlLmFjdGlvbnMgPSBlc1BoYXNlLmFjdGlvbnMgfHwge307CgogIGlmIChwaGFzZVtfY29uc3RhbnRzLlBIQVNFX1JPTExPVkVSX0VOQUJMRURdKSB7CiAgICBlc1BoYXNlLmFjdGlvbnMucm9sbG92ZXIgPSB7fTsKCiAgICBpZiAoaXNOdW1iZXIocGhhc2VbX2NvbnN0YW50cy5QSEFTRV9ST0xMT1ZFUl9NQVhfQUdFXSkpIHsKICAgICAgZXNQaGFzZS5hY3Rpb25zLnJvbGxvdmVyLm1heF9hZ2UgPSAiIi5jb25jYXQocGhhc2VbX2NvbnN0YW50cy5QSEFTRV9ST0xMT1ZFUl9NQVhfQUdFXSkuY29uY2F0KHBoYXNlW19jb25zdGFudHMuUEhBU0VfUk9MTE9WRVJfTUFYX0FHRV9VTklUU10pOwogICAgfQoKICAgIGlmIChpc051bWJlcihwaGFzZVtfY29uc3RhbnRzLlBIQVNFX1JPTExPVkVSX01BWF9TSVpFX1NUT1JFRF0pKSB7CiAgICAgIGVzUGhhc2UuYWN0aW9ucy5yb2xsb3Zlci5tYXhfc2l6ZSA9ICIiLmNvbmNhdChwaGFzZVtfY29uc3RhbnRzLlBIQVNFX1JPTExPVkVSX01BWF9TSVpFX1NUT1JFRF0pLmNvbmNhdChwaGFzZVtfY29uc3RhbnRzLlBIQVNFX1JPTExPVkVSX01BWF9TSVpFX1NUT1JFRF9VTklUU10pOwogICAgfQoKICAgIGlmIChpc051bWJlcihwaGFzZVtfY29uc3RhbnRzLlBIQVNFX1JPTExPVkVSX01BWF9ET0NVTUVOVFNdKSkgewogICAgICBlc1BoYXNlLmFjdGlvbnMucm9sbG92ZXIubWF4X2RvY3MgPSBwaGFzZVtfY29uc3RhbnRzLlBIQVNFX1JPTExPVkVSX01BWF9ET0NVTUVOVFNdOwogICAgfQogIH0gZWxzZSB7CiAgICBkZWxldGUgZXNQaGFzZS5hY3Rpb25zLnJvbGxvdmVyOwogIH0KCiAgaWYgKHBoYXNlW19jb25zdGFudHMuUEhBU0VfTk9ERV9BVFRSU10pIHsKICAgIHZhciBfcGhhc2UkUEhBU0VfTk9ERV9BVFQgPSBwaGFzZVtfY29uc3RhbnRzLlBIQVNFX05PREVfQVRUUlNdLnNwbGl0KCc6JyksCiAgICAgICAgX3BoYXNlJFBIQVNFX05PREVfQVRUMiA9IF9zbGljZWRUb0FycmF5KF9waGFzZSRQSEFTRV9OT0RFX0FUVCwgMiksCiAgICAgICAgbmFtZSA9IF9waGFzZSRQSEFTRV9OT0RFX0FUVDJbMF0sCiAgICAgICAgdmFsdWUgPSBfcGhhc2UkUEhBU0VfTk9ERV9BVFQyWzFdOwoKICAgIGVzUGhhc2UuYWN0aW9ucy5hbGxvY2F0ZSA9IGVzUGhhc2UuYWN0aW9ucy5hbGxvY2F0ZSB8fCB7fTsKICAgIGVzUGhhc2UuYWN0aW9ucy5hbGxvY2F0ZS5yZXF1aXJlID0gX2RlZmluZVByb3BlcnR5KHt9LCBuYW1lLCB2YWx1ZSk7CiAgfSBlbHNlIHsKICAgIGlmIChlc1BoYXNlLmFjdGlvbnMuYWxsb2NhdGUpIHsKICAgICAgZGVsZXRlIGVzUGhhc2UuYWN0aW9ucy5hbGxvY2F0ZS5yZXF1aXJlOwogICAgfQogIH0KCiAgaWYgKGlzTnVtYmVyKHBoYXNlW19jb25zdGFudHMuUEhBU0VfUkVQTElDQV9DT1VOVF0pKSB7CiAgICBlc1BoYXNlLmFjdGlvbnMuYWxsb2NhdGUgPSBlc1BoYXNlLmFjdGlvbnMuYWxsb2NhdGUgfHwge307CiAgICBlc1BoYXNlLmFjdGlvbnMuYWxsb2NhdGUubnVtYmVyX29mX3JlcGxpY2FzID0gcGhhc2VbX2NvbnN0YW50cy5QSEFTRV9SRVBMSUNBX0NPVU5UXTsKICB9IGVsc2UgewogICAgaWYgKGVzUGhhc2UuYWN0aW9ucy5hbGxvY2F0ZSkgewogICAgICBkZWxldGUgZXNQaGFzZS5hY3Rpb25zLmFsbG9jYXRlLm51bWJlcl9vZl9yZXBsaWNhczsKICAgIH0KICB9CgogIGlmIChlc1BoYXNlLmFjdGlvbnMuYWxsb2NhdGUgJiYgIWVzUGhhc2UuYWN0aW9ucy5hbGxvY2F0ZS5yZXF1aXJlICYmICFpc051bWJlcihlc1BoYXNlLmFjdGlvbnMuYWxsb2NhdGUubnVtYmVyX29mX3JlcGxpY2FzKSAmJiBpc0VtcHR5T2JqZWN0KGVzUGhhc2UuYWN0aW9ucy5hbGxvY2F0ZS5pbmNsdWRlKSAmJiBpc0VtcHR5T2JqZWN0KGVzUGhhc2UuYWN0aW9ucy5hbGxvY2F0ZS5leGNsdWRlKSkgewogICAgLy8gcmVtb3ZlIGFsbG9jYXRlIGFjdGlvbiBpZiBpdCBkb2VzIG5vdCBkZWZpbmUgcmVxdWlyZSBvciBudW1iZXIgb2Ygbm9kZXMKICAgIC8vIGFuZCBib3RoIGluY2x1ZGUgYW5kIGV4Y2x1ZGUgYXJlIGVtcHR5IG9iamVjdHMgKEVTIHdpbGwgZmFpbCB0byBwYXJzZSBpZiB3ZSBkb24ndCkKICAgIGRlbGV0ZSBlc1BoYXNlLmFjdGlvbnMuYWxsb2NhdGU7CiAgfQoKICBpZiAocGhhc2VbX2NvbnN0YW50cy5QSEFTRV9GT1JDRV9NRVJHRV9FTkFCTEVEXSkgewogICAgZXNQaGFzZS5hY3Rpb25zLmZvcmNlbWVyZ2UgPSB7CiAgICAgIG1heF9udW1fc2VnbWVudHM6IHBoYXNlW19jb25zdGFudHMuUEhBU0VfRk9SQ0VfTUVSR0VfU0VHTUVOVFNdCiAgICB9OwogIH0gZWxzZSB7CiAgICBkZWxldGUgZXNQaGFzZS5hY3Rpb25zLmZvcmNlbWVyZ2U7CiAgfQoKICBpZiAocGhhc2VbX2NvbnN0YW50cy5QSEFTRV9TSFJJTktfRU5BQkxFRF0gJiYgaXNOdW1iZXIocGhhc2VbX2NvbnN0YW50cy5QSEFTRV9QUklNQVJZX1NIQVJEX0NPVU5UXSkpIHsKICAgIGVzUGhhc2UuYWN0aW9ucy5zaHJpbmsgPSB7CiAgICAgIG51bWJlcl9vZl9zaGFyZHM6IHBoYXNlW19jb25zdGFudHMuUEhBU0VfUFJJTUFSWV9TSEFSRF9DT1VOVF0KICAgIH07CiAgfSBlbHNlIHsKICAgIGRlbGV0ZSBlc1BoYXNlLmFjdGlvbnMuc2hyaW5rOwogIH0KCiAgaWYgKHBoYXNlW19jb25zdGFudHMuUEhBU0VfRlJFRVpFX0VOQUJMRURdKSB7CiAgICBlc1BoYXNlLmFjdGlvbnMuZnJlZXplID0ge307CiAgfSBlbHNlIHsKICAgIGRlbGV0ZSBlc1BoYXNlLmFjdGlvbnMuZnJlZXplOwogIH0KCiAgaWYgKGlzTnVtYmVyKHBoYXNlW19jb25zdGFudHMuUEhBU0VfSU5ERVhfUFJJT1JJVFldKSkgewogICAgZXNQaGFzZS5hY3Rpb25zLnNldF9wcmlvcml0eSA9IHsKICAgICAgcHJpb3JpdHk6IHBoYXNlW19jb25zdGFudHMuUEhBU0VfSU5ERVhfUFJJT1JJVFldCiAgICB9OwogIH0KCiAgcmV0dXJuIGVzUGhhc2U7Cn07CgpleHBvcnRzLnBoYXNlVG9FUyA9IHBoYXNlVG9FUzs="},null]}