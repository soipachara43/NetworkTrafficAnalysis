{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/index_management/public/application/components/mappings_editor/constants/parameters_definition.js","dependencies":[{"path":"x-pack/plugins/index_management/public/application/components/mappings_editor/constants/parameters_definition.js","mtime":1589249554120},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlBBUkFNRVRFUlNfREVGSU5JVElPTiA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9yZWFjdDIgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIHQgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJpby10cyIpKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX3NoYXJlZF9pbXBvcnRzID0gcmVxdWlyZSgiLi4vc2hhcmVkX2ltcG9ydHMiKTsKCnZhciBfZG9jdW1lbnRhdGlvbiA9IHJlcXVpcmUoIi4uLy4uLy4uL3NlcnZpY2VzL2RvY3VtZW50YXRpb24iKTsKCnZhciBfZGVmYXVsdF92YWx1ZXMgPSByZXF1aXJlKCIuL2RlZmF1bHRfdmFsdWVzIik7Cgp2YXIgX2RhdGFfdHlwZXNfZGVmaW5pdGlvbiA9IHJlcXVpcmUoIi4vZGF0YV90eXBlc19kZWZpbml0aW9uIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgIGRlZmF1bHQ6IG9iagogIH07Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Cgp2YXIgdG9JbnQgPSBfc2hhcmVkX2ltcG9ydHMuZmllbGRGb3JtYXR0ZXJzLnRvSW50Owp2YXIgZW1wdHlGaWVsZCA9IF9zaGFyZWRfaW1wb3J0cy5maWVsZFZhbGlkYXRvcnMuZW1wdHlGaWVsZCwKICAgIGNvbnRhaW5zQ2hhcnNGaWVsZCA9IF9zaGFyZWRfaW1wb3J0cy5maWVsZFZhbGlkYXRvcnMuY29udGFpbnNDaGFyc0ZpZWxkLAogICAgbnVtYmVyR3JlYXRlclRoYW5GaWVsZCA9IF9zaGFyZWRfaW1wb3J0cy5maWVsZFZhbGlkYXRvcnMubnVtYmVyR3JlYXRlclRoYW5GaWVsZDsKdmFyIGNvbW1vbkVycm9yTWVzc2FnZXMgPSB7CiAgc21hbGxlclRoYW5aZXJvOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5wYXJhbWV0ZXJzLnZhbGlkYXRpb25zLnNtYWxsZXJaZXJvRXJyb3JNZXNzYWdlJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdUaGUgdmFsdWUgbXVzdCBiZSBncmVhdGVyIG9yIGVxdWFsIHRvIDAuJwogIH0pLAogIHNwYWNlc05vdEFsbG93ZWQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLnBhcmFtZXRlcnMudmFsaWRhdGlvbnMuc3BhY2VzTm90QWxsb3dlZEVycm9yTWVzc2FnZScsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnU3BhY2VzIGFyZSBub3QgYWxsb3dlZC4nCiAgfSksCiAgYW5hbHl6ZXJJc1JlcXVpcmVkOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5wYXJhbWV0ZXJzLnZhbGlkYXRpb25zLmFuYWx5emVySXNSZXF1aXJlZEVycm9yTWVzc2FnZScsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnU3BlY2lmeSB0aGUgY3VzdG9tIGFuYWx5emVyIG5hbWUgb3IgY2hvb3NlIGEgYnVpbHQtaW4gYW5hbHl6ZXIuJwogIH0pCn07Cgp2YXIgbnVsbFZhbHVlTGFiZWwgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5udWxsVmFsdWVGaWVsZExhYmVsJywgewogIGRlZmF1bHRNZXNzYWdlOiAnTnVsbCB2YWx1ZScKfSk7Cgp2YXIgbnVsbFZhbHVlVmFsaWRhdGVFbXB0eUZpZWxkID0gZW1wdHlGaWVsZChfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5wYXJhbWV0ZXJzLnZhbGlkYXRpb25zLm51bGxWYWx1ZUlzUmVxdWlyZWRFcnJvck1lc3NhZ2UnLCB7CiAgZGVmYXVsdE1lc3NhZ2U6ICdOdWxsIHZhbHVlIGlzIHJlcXVpcmVkLicKfSkpOwp2YXIgbWFwSW5kZXhUb1ZhbHVlID0gWyd0cnVlJywgdHJ1ZSwgJ2ZhbHNlJywgZmFsc2VdOwp2YXIgaW5kZXhPcHRpb25zQ29uZmlnID0gewogIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5pbmRleE9wdGlvbnNMYWJlbCcsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnSW5kZXggb3B0aW9ucycKICB9KSwKICBoZWxwVGV4dDogZnVuY3Rpb24gaGVscFRleHQoKSB7CiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmluZGV4T3B0aW9uc0hlbHBUZXh0IiwKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJJbmZvcm1hdGlvbiB0byBzdG9yZSBpbiB0aGUgaW5kZXguIHtkb2NzTGlua30iLAogICAgICB2YWx1ZXM6IHsKICAgICAgICBkb2NzTGluazogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUxpbmssIHsKICAgICAgICAgIGhyZWY6IF9kb2N1bWVudGF0aW9uLmRvY3VtZW50YXRpb25TZXJ2aWNlLmdldEluZGV4T3B0aW9uc0xpbmsoKSwKICAgICAgICAgIHRhcmdldDogIl9ibGFuayIKICAgICAgICB9LCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5jb25maWd1cmF0aW9uLmluZGV4T3B0aW9uc2REb2N1bWVudGF0aW9uTGluaycsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTGVhcm4gbW9yZS4nCiAgICAgICAgfSkpCiAgICAgIH0KICAgIH0pOwogIH0sCiAgdHlwZTogX3NoYXJlZF9pbXBvcnRzLkZJRUxEX1RZUEVTLlNVUEVSX1NFTEVDVAp9Owp2YXIgZmllbGRkYXRhRnJlcXVlbmN5RmlsdGVyUGFyYW0gPSB7CiAgZmllbGRDb25maWc6IHsKICAgIGRlZmF1bHRWYWx1ZToge30KICB9LAogIC8vIE5lZWRlZCBmb3IgIkZpZWxkUGFyYW1zIiB0eXBlCiAgcHJvcHM6IHsKICAgIG1pbl9zZWdtZW50X3NpemU6IHsKICAgICAgZmllbGRDb25maWc6IHsKICAgICAgICB0eXBlOiBfc2hhcmVkX2ltcG9ydHMuRklFTERfVFlQRVMuTlVNQkVSLAogICAgICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5taW5TZWdtZW50U2l6ZUZpZWxkTGFiZWwnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ01pbmltdW0gc2VnbWVudCBzaXplJwogICAgICAgIH0pLAogICAgICAgIGRlZmF1bHRWYWx1ZTogNTAsCiAgICAgICAgZm9ybWF0dGVyczogW3RvSW50XQogICAgICB9CiAgICB9CiAgfSwKICBzY2hlbWE6IHQucmVjb3JkKHQudW5pb24oW3QubGl0ZXJhbCgnbWluJyksIHQubGl0ZXJhbCgnbWF4JyksIHQubGl0ZXJhbCgnbWluX3NlZ21lbnRfc2l6ZScpXSksIHQubnVtYmVyKQp9Owp2YXIgYW5hbHl6ZXJWYWxpZGF0aW9ucyA9IFt7CiAgdmFsaWRhdG9yOiBlbXB0eUZpZWxkKGNvbW1vbkVycm9yTWVzc2FnZXMuYW5hbHl6ZXJJc1JlcXVpcmVkKQp9LCB7CiAgdmFsaWRhdG9yOiBjb250YWluc0NoYXJzRmllbGQoewogICAgY2hhcnM6ICcgJywKICAgIG1lc3NhZ2U6IGNvbW1vbkVycm9yTWVzc2FnZXMuc3BhY2VzTm90QWxsb3dlZAogIH0pCn1dOwovKioKICogU2luZ2xlIHNvdXJjZSBvZiB0cnV0aCBmb3IgdGhlIHBhcmFtZXRlcnMgYSB1c2VyIGNhbiBjaGFuZ2Ugb24gX2FueV8gZmllbGQgdHlwZS4KICogSXQgaXMgYWxzbyB0aGUgc2luZ2xlIHNvdXJjZSBvZiB0cnV0aCBmb3IgdGhlIHBhcmFtZXRlcnMgZGVmYXVsdCB2YWx1ZXMuCiAqCiAqIEFzIGEgY29uc2VxdWVuY2UsIGlmIGEgcGFyYW1ldGVyIGlzICpub3QqIGRlY2xhcmVkIGhlcmUsIHdlIHdvbid0IGJlIGFibGUgdG8gZGVjbGFyZSBpdCBpbiB0aGUgSnNvbiBlZGl0b3IuCiAqLwoKdmFyIFBBUkFNRVRFUlNfREVGSU5JVElPTiA9IHsKICBuYW1lOiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IubmFtZUZpZWxkTGFiZWwnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdGaWVsZCBuYW1lJwogICAgICB9KSwKICAgICAgZGVmYXVsdFZhbHVlOiAnJywKICAgICAgdmFsaWRhdGlvbnM6IFt7CiAgICAgICAgdmFsaWRhdG9yOiBlbXB0eUZpZWxkKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLnBhcmFtZXRlcnMudmFsaWRhdGlvbnMubmFtZUlzUmVxdWlyZWRFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0dpdmUgYSBuYW1lIHRvIHRoZSBmaWVsZC4nCiAgICAgICAgfSkpCiAgICAgIH1dCiAgICB9CiAgfSwKICB0eXBlOiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IudHlwZUZpZWxkTGFiZWwnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdGaWVsZCB0eXBlJwogICAgICB9KSwKICAgICAgZGVmYXVsdFZhbHVlOiAndGV4dCcsCiAgICAgIGRlc2VyaWFsaXplcjogZnVuY3Rpb24gZGVzZXJpYWxpemVyKGZpZWxkVHlwZSkgewogICAgICAgIGlmICh0eXBlb2YgZmllbGRUeXBlID09PSAnc3RyaW5nJyAmJiBCb29sZWFuKGZpZWxkVHlwZSkpIHsKICAgICAgICAgIHJldHVybiBbewogICAgICAgICAgICBsYWJlbDogX2RhdGFfdHlwZXNfZGVmaW5pdGlvbi5UWVBFX0RFRklOSVRJT05bZmllbGRUeXBlXSA/IF9kYXRhX3R5cGVzX2RlZmluaXRpb24uVFlQRV9ERUZJTklUSU9OW2ZpZWxkVHlwZV0ubGFiZWwgOiBmaWVsZFR5cGUsCiAgICAgICAgICAgIHZhbHVlOiBmaWVsZFR5cGUKICAgICAgICAgIH1dOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9LAogICAgICBzZXJpYWxpemVyOiBmdW5jdGlvbiBzZXJpYWxpemVyKGZpZWxkVHlwZSkgewogICAgICAgIHJldHVybiBmaWVsZFR5cGUgJiYgZmllbGRUeXBlLmxlbmd0aCA/IGZpZWxkVHlwZVswXS52YWx1ZSA6IGZpZWxkVHlwZTsKICAgICAgfSwKICAgICAgdmFsaWRhdGlvbnM6IFt7CiAgICAgICAgdmFsaWRhdG9yOiBlbXB0eUZpZWxkKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLnBhcmFtZXRlcnMudmFsaWRhdGlvbnMudHlwZUlzUmVxdWlyZWRFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1NwZWNpZnkgYSBmaWVsZCB0eXBlLicKICAgICAgICB9KSkKICAgICAgfV0KICAgIH0sCiAgICBzY2hlbWE6IHQuc3RyaW5nCiAgfSwKICBzdG9yZTogewogICAgZmllbGRDb25maWc6IHsKICAgICAgdHlwZTogX3NoYXJlZF9pbXBvcnRzLkZJRUxEX1RZUEVTLkNIRUNLQk9YLAogICAgICBkZWZhdWx0VmFsdWU6IGZhbHNlCiAgICB9LAogICAgc2NoZW1hOiB0LmJvb2xlYW4KICB9LAogIGluZGV4OiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICB0eXBlOiBfc2hhcmVkX2ltcG9ydHMuRklFTERfVFlQRVMuQ0hFQ0tCT1gsCiAgICAgIGRlZmF1bHRWYWx1ZTogdHJ1ZQogICAgfSwKICAgIHNjaGVtYTogdC5ib29sZWFuCiAgfSwKICBkb2NfdmFsdWVzOiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICBkZWZhdWx0VmFsdWU6IHRydWUKICAgIH0sCiAgICBzY2hlbWE6IHQuYm9vbGVhbgogIH0sCiAgZG9jX3ZhbHVlc19iaW5hcnk6IHsKICAgIGZpZWxkQ29uZmlnOiB7CiAgICAgIGRlZmF1bHRWYWx1ZTogZmFsc2UKICAgIH0sCiAgICBzY2hlbWE6IHQuYm9vbGVhbgogIH0sCiAgZmllbGRkYXRhOiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICB0eXBlOiBfc2hhcmVkX2ltcG9ydHMuRklFTERfVFlQRVMuQ0hFQ0tCT1gsCiAgICAgIGRlZmF1bHRWYWx1ZTogZmFsc2UKICAgIH0sCiAgICBzY2hlbWE6IHQuYm9vbGVhbgogIH0sCiAgZmllbGRkYXRhX2ZyZXF1ZW5jeV9maWx0ZXI6IGZpZWxkZGF0YUZyZXF1ZW5jeUZpbHRlclBhcmFtLAogIGZpZWxkZGF0YV9mcmVxdWVuY3lfZmlsdGVyX3BlcmNlbnRhZ2U6IF9vYmplY3RTcHJlYWQoe30sIGZpZWxkZGF0YUZyZXF1ZW5jeUZpbHRlclBhcmFtLCB7CiAgICBwcm9wczogewogICAgICBtaW46IHsKICAgICAgICBmaWVsZENvbmZpZzogewogICAgICAgICAgZGVmYXVsdFZhbHVlOiAwLjAxLAogICAgICAgICAgc2VyaWFsaXplcjogZnVuY3Rpb24gc2VyaWFsaXplcih2YWx1ZSkgewogICAgICAgICAgICByZXR1cm4gdmFsdWUgPT09ICcnID8gJycgOiB0b0ludCh2YWx1ZSkgLyAxMDA7CiAgICAgICAgICB9LAogICAgICAgICAgZGVzZXJpYWxpemVyOiBmdW5jdGlvbiBkZXNlcmlhbGl6ZXIodmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodmFsdWUgKiAxMDApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgbWF4OiB7CiAgICAgICAgZmllbGRDb25maWc6IHsKICAgICAgICAgIGRlZmF1bHRWYWx1ZTogMSwKICAgICAgICAgIHNlcmlhbGl6ZXI6IGZ1bmN0aW9uIHNlcmlhbGl6ZXIodmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIHZhbHVlID09PSAnJyA/ICcnIDogdG9JbnQodmFsdWUpIC8gMTAwOwogICAgICAgICAgfSwKICAgICAgICAgIGRlc2VyaWFsaXplcjogZnVuY3Rpb24gZGVzZXJpYWxpemVyKHZhbHVlKSB7CiAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlICogMTAwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9KSwKICBmaWVsZGRhdGFfZnJlcXVlbmN5X2ZpbHRlcl9hYnNvbHV0ZTogX29iamVjdFNwcmVhZCh7fSwgZmllbGRkYXRhRnJlcXVlbmN5RmlsdGVyUGFyYW0sIHsKICAgIHByb3BzOiB7CiAgICAgIG1pbjogewogICAgICAgIGZpZWxkQ29uZmlnOiB7CiAgICAgICAgICBkZWZhdWx0VmFsdWU6IDIsCiAgICAgICAgICB2YWxpZGF0aW9uczogW3sKICAgICAgICAgICAgdmFsaWRhdG9yOiBudW1iZXJHcmVhdGVyVGhhbkZpZWxkKHsKICAgICAgICAgICAgICB0aGFuOiAxLAogICAgICAgICAgICAgIG1lc3NhZ2U6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLnBhcmFtZXRlcnMudmFsaWRhdGlvbnMuZmllbGREYXRhRnJlcXVlbmN5Lm51bWJlckdyZWF0ZXJUaGFuT25lRXJyb3JNZXNzYWdlJywgewogICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdWYWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvbmUuJwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9XSwKICAgICAgICAgIGZvcm1hdHRlcnM6IFt0b0ludF0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIG1heDogewogICAgICAgIGZpZWxkQ29uZmlnOiB7CiAgICAgICAgICBkZWZhdWx0VmFsdWU6IDUsCiAgICAgICAgICB2YWxpZGF0aW9uczogW3sKICAgICAgICAgICAgdmFsaWRhdG9yOiBudW1iZXJHcmVhdGVyVGhhbkZpZWxkKHsKICAgICAgICAgICAgICB0aGFuOiAxLAogICAgICAgICAgICAgIG1lc3NhZ2U6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLnBhcmFtZXRlcnMudmFsaWRhdGlvbnMuZmllbGREYXRhRnJlcXVlbmN5Lm51bWJlckdyZWF0ZXJUaGFuT25lRXJyb3JNZXNzYWdlJywgewogICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdWYWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvbmUuJwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9XSwKICAgICAgICAgIGZvcm1hdHRlcnM6IFt0b0ludF0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9KSwKICBjb2VyY2U6IHsKICAgIGZpZWxkQ29uZmlnOiB7CiAgICAgIGRlZmF1bHRWYWx1ZTogdHJ1ZQogICAgfSwKICAgIHNjaGVtYTogdC5ib29sZWFuCiAgfSwKICBjb2VyY2Vfc2hhcGU6IHsKICAgIGZpZWxkQ29uZmlnOiB7CiAgICAgIGRlZmF1bHRWYWx1ZTogZmFsc2UKICAgIH0sCiAgICBzY2hlbWE6IHQuYm9vbGVhbgogIH0sCiAgaWdub3JlX21hbGZvcm1lZDogewogICAgZmllbGRDb25maWc6IHsKICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZQogICAgfSwKICAgIHNjaGVtYTogdC5ib29sZWFuCiAgfSwKICBudWxsX3ZhbHVlOiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICBkZWZhdWx0VmFsdWU6ICcnLAogICAgICB0eXBlOiBfc2hhcmVkX2ltcG9ydHMuRklFTERfVFlQRVMuVEVYVCwKICAgICAgbGFiZWw6IG51bGxWYWx1ZUxhYmVsCiAgICB9CiAgfSwKICBudWxsX3ZhbHVlX2lwOiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICBkZWZhdWx0VmFsdWU6ICcnLAogICAgICB0eXBlOiBfc2hhcmVkX2ltcG9ydHMuRklFTERfVFlQRVMuVEVYVCwKICAgICAgbGFiZWw6IG51bGxWYWx1ZUxhYmVsLAogICAgICBoZWxwVGV4dDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IucGFyYW1ldGVycy5udWxsVmFsdWVJcEhlbHBUZXh0JywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQWNjZXB0cyBhbiBJUCBhZGRyZXNzLicKICAgICAgfSkKICAgIH0KICB9LAogIG51bGxfdmFsdWVfbnVtZXJpYzogewogICAgZmllbGRDb25maWc6IHsKICAgICAgZGVmYXVsdFZhbHVlOiAnJywKICAgICAgLy8gTmVlZGVkIGZvciBGaWVsZFBhcmFtcyB0eXBpbmcKICAgICAgbGFiZWw6IG51bGxWYWx1ZUxhYmVsLAogICAgICBmb3JtYXR0ZXJzOiBbdG9JbnRdLAogICAgICB2YWxpZGF0aW9uczogW3sKICAgICAgICB2YWxpZGF0b3I6IG51bGxWYWx1ZVZhbGlkYXRlRW1wdHlGaWVsZAogICAgICB9XQogICAgfSwKICAgIHNjaGVtYTogdC5udW1iZXIKICB9LAogIG51bGxfdmFsdWVfYm9vbGVhbjogewogICAgZmllbGRDb25maWc6IHsKICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZSwKICAgICAgbGFiZWw6IG51bGxWYWx1ZUxhYmVsLAogICAgICBkZXNlcmlhbGl6ZXI6IGZ1bmN0aW9uIGRlc2VyaWFsaXplcih2YWx1ZSkgewogICAgICAgIHJldHVybiBtYXBJbmRleFRvVmFsdWUuaW5kZXhPZih2YWx1ZSk7CiAgICAgIH0sCiAgICAgIHNlcmlhbGl6ZXI6IGZ1bmN0aW9uIHNlcmlhbGl6ZXIodmFsdWUpIHsKICAgICAgICByZXR1cm4gbWFwSW5kZXhUb1ZhbHVlW3ZhbHVlXTsKICAgICAgfQogICAgfSwKICAgIHNjaGVtYTogdC51bmlvbihbdC5saXRlcmFsKHRydWUpLCB0LmxpdGVyYWwoZmFsc2UpLCB0LmxpdGVyYWwoJ3RydWUnKSwgdC5saXRlcmFsKCdmYWxzZScpXSkKICB9LAogIG51bGxfdmFsdWVfZ2VvX3BvaW50OiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICBkZWZhdWx0VmFsdWU6ICcnLAogICAgICAvLyBOZWVkZWQgZm9yIEZpZWxkUGFyYW1zIHR5cGluZwogICAgICBsYWJlbDogbnVsbFZhbHVlTGFiZWwsCiAgICAgIGhlbHBUZXh0OiBmdW5jdGlvbiBoZWxwVGV4dCgpIHsKICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5wYXJhbWV0ZXJzLmdlb1BvaW50TnVsbFZhbHVlSGVscFRleHQiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJHZW8tcG9pbnRzIGNhbiBiZSBleHByZXNzZWQgYXMgYW4gb2JqZWN0LCBzdHJpbmcsIGdlb2hhc2gsIGFycmF5IG9yIHtkb2NzTGlua30gUE9JTlQuIiwKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBkb2NzTGluazogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUxpbmssIHsKICAgICAgICAgICAgICBocmVmOiBfZG9jdW1lbnRhdGlvbi5kb2N1bWVudGF0aW9uU2VydmljZS5nZXRXZWxsS25vd25UZXh0TGluaygpLAogICAgICAgICAgICAgIHRhcmdldDogIl9ibGFuayIKICAgICAgICAgICAgfSwgX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IucGFyYW1ldGVycy53ZWxsS25vd25UZXh0RG9jdW1lbnRhdGlvbkxpbmsnLCB7CiAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdXZWxsLUtub3duIFRleHQnCiAgICAgICAgICAgIH0pKQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9LAogICAgICB2YWxpZGF0aW9uczogW3sKICAgICAgICB2YWxpZGF0b3I6IG51bGxWYWx1ZVZhbGlkYXRlRW1wdHlGaWVsZAogICAgICB9XSwKICAgICAgZGVzZXJpYWxpemVyOiBmdW5jdGlvbiBkZXNlcmlhbGl6ZXIodmFsdWUpIHsKICAgICAgICBpZiAodmFsdWUgPT09ICcnKSB7CiAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpOwogICAgICB9LAogICAgICBzZXJpYWxpemVyOiBmdW5jdGlvbiBzZXJpYWxpemVyKHZhbHVlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgLy8gc3dhbGxvdyBlcnJvciBhbmQgcmV0dXJuIG5vbi1wYXJzZWQgdmFsdWU7CiAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgc2NoZW1hOiB0LmFueQogIH0sCiAgY29weV90bzogewogICAgZmllbGRDb25maWc6IHsKICAgICAgZGVmYXVsdFZhbHVlOiAnJywKICAgICAgdHlwZTogX3NoYXJlZF9pbXBvcnRzLkZJRUxEX1RZUEVTLlRFWFQsCiAgICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5wYXJhbWV0ZXJzLmNvcHlUb0xhYmVsJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnR3JvdXAgZmllbGQgbmFtZScKICAgICAgfSksCiAgICAgIHZhbGlkYXRpb25zOiBbewogICAgICAgIHZhbGlkYXRvcjogZW1wdHlGaWVsZChfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5wYXJhbWV0ZXJzLnZhbGlkYXRpb25zLmNvcHlUb0lzUmVxdWlyZWRFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0dyb3VwIGZpZWxkIG5hbWUgaXMgcmVxdWlyZWQuJwogICAgICAgIH0pKQogICAgICB9XQogICAgfSwKICAgIHNjaGVtYTogdC5zdHJpbmcKICB9LAogIG1heF9pbnB1dF9sZW5ndGg6IHsKICAgIGZpZWxkQ29uZmlnOiB7CiAgICAgIGRlZmF1bHRWYWx1ZTogNTAsCiAgICAgIHR5cGU6IF9zaGFyZWRfaW1wb3J0cy5GSUVMRF9UWVBFUy5OVU1CRVIsCiAgICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5wYXJhbWV0ZXJzLm1heElucHV0TGVuZ3RoTGFiZWwnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdNYXggaW5wdXQgbGVuZ3RoJwogICAgICB9KSwKICAgICAgZm9ybWF0dGVyczogW3RvSW50XSwKICAgICAgdmFsaWRhdGlvbnM6IFt7CiAgICAgICAgdmFsaWRhdG9yOiBlbXB0eUZpZWxkKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLnBhcmFtZXRlcnMudmFsaWRhdGlvbnMubWF4SW5wdXRMZW5ndGhGaWVsZFJlcXVpcmVkRXJyb3JNZXNzYWdlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTcGVjaWZ5IGEgbWF4IGlucHV0IGxlbmd0aC4nCiAgICAgICAgfSkpCiAgICAgIH1dCiAgICB9LAogICAgc2NoZW1hOiB0Lm51bWJlcgogIH0sCiAgbG9jYWxlOiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICBkZWZhdWx0VmFsdWU6ICdST09UJywKICAgICAgdHlwZTogX3NoYXJlZF9pbXBvcnRzLkZJRUxEX1RZUEVTLlRFWFQsCiAgICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5wYXJhbWV0ZXJzLmxvY2FsZUxhYmVsJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTG9jYWxlJwogICAgICB9KSwKICAgICAgaGVscFRleHQ6IGZ1bmN0aW9uIGhlbHBUZXh0KCkgewogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLnBhcmFtZXRlcnMubG9jYWxlSGVscFRleHQiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTZXBhcmF0ZSB0aGUgbGFuZ3VhZ2UsIGNvdW50cnksIGFuZCB2YXJpYW50LCB1c2Uge2h5cGhlbn0gb3Ige3VuZGVyc2NvcmV9LiBBIG1heGltdW0gb2YgMiBzZXBhcmF0b3JzIGlzIGFsbG93ZWQuIEV4YW1wbGU6IHtsb2NhbGV9LiIsCiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgbG9jYWxlOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ29kZSwgbnVsbCwgImVuLVVTIiksCiAgICAgICAgICAgIGh5cGhlbjogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNvZGUsIG51bGwsICItIiksCiAgICAgICAgICAgIHVuZGVyc2NvcmU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDb2RlLCBudWxsLCAiXyIpCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHZhbGlkYXRpb25zOiBbewogICAgICAgIHZhbGlkYXRvcjogZW1wdHlGaWVsZChfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5wYXJhbWV0ZXJzLnZhbGlkYXRpb25zLmxvY2FsZUZpZWxkUmVxdWlyZWRFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1NwZWNpZnkgYSBsb2NhbGUuJwogICAgICAgIH0pKQogICAgICB9XQogICAgfSwKICAgIHNjaGVtYTogdC5zdHJpbmcKICB9LAogIG9yaWVudGF0aW9uOiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICBkZWZhdWx0VmFsdWU6ICdjY3cnLAogICAgICB0eXBlOiBfc2hhcmVkX2ltcG9ydHMuRklFTERfVFlQRVMuU1VQRVJfU0VMRUNULAogICAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IucGFyYW1ldGVycy5vcmllbnRhdGlvbkxhYmVsJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnT3JpZW50YXRpb24nCiAgICAgIH0pCiAgICB9LAogICAgc2NoZW1hOiB0LnN0cmluZwogIH0sCiAgYm9vc3Q6IHsKICAgIGZpZWxkQ29uZmlnOiB7CiAgICAgIGRlZmF1bHRWYWx1ZTogMS4wLAogICAgICB0eXBlOiBfc2hhcmVkX2ltcG9ydHMuRklFTERfVFlQRVMuTlVNQkVSLAogICAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IucGFyYW1ldGVycy5ib29zdExhYmVsJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQm9vc3QgbGV2ZWwnCiAgICAgIH0pLAogICAgICBmb3JtYXR0ZXJzOiBbdG9JbnRdLAogICAgICB2YWxpZGF0aW9uczogW3sKICAgICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uIHZhbGlkYXRvcihfcmVmKSB7CiAgICAgICAgICB2YXIgdmFsdWUgPSBfcmVmLnZhbHVlOwoKICAgICAgICAgIGlmICh2YWx1ZSA8IDApIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBtZXNzYWdlOiBjb21tb25FcnJvck1lc3NhZ2VzLnNtYWxsZXJUaGFuWmVybwogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfV0KICAgIH0sCiAgICBzY2hlbWE6IHQubnVtYmVyCiAgfSwKICBzY2FsaW5nX2ZhY3RvcjogewogICAgdGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLnBhcmFtZXRlcnMuc2NhbGluZ0ZhY3RvckZpZWxkVGl0bGUnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU2NhbGluZyBmYWN0b3InCiAgICB9KSwKICAgIGRlc2NyaXB0aW9uOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5wYXJhbWV0ZXJzLnNjYWxpbmdGYWN0b3JGaWVsZERlc2NyaXB0aW9uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ1ZhbHVlcyB3aWxsIGJlIG11bHRpcGxpZWQgYnkgdGhpcyBmYWN0b3IgYXQgaW5kZXggdGltZSBhbmQgcm91bmRlZCB0byB0aGUgY2xvc2VzdCBsb25nIHZhbHVlLiBIaWdoIGZhY3RvciB2YWx1ZXMgaW1wcm92ZSBhY2N1cmFjeSwgYnV0IGFsc28gaW5jcmVhc2Ugc3BhY2UgcmVxdWlyZW1lbnRzLicKICAgIH0pLAogICAgZmllbGRDb25maWc6IHsKICAgICAgZGVmYXVsdFZhbHVlOiAnJywKICAgICAgdHlwZTogX3NoYXJlZF9pbXBvcnRzLkZJRUxEX1RZUEVTLk5VTUJFUiwKICAgICAgZGVzZXJpYWxpemVyOiBmdW5jdGlvbiBkZXNlcmlhbGl6ZXIodmFsdWUpIHsKICAgICAgICByZXR1cm4gdmFsdWUgPT09ICcnID8gdmFsdWUgOiArdmFsdWU7CiAgICAgIH0sCiAgICAgIGZvcm1hdHRlcnM6IFt0b0ludF0sCiAgICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5wYXJhbWV0ZXJzLnNjYWxpbmdGYWN0b3JMYWJlbCcsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1NjYWxpbmcgZmFjdG9yJwogICAgICB9KSwKICAgICAgdmFsaWRhdGlvbnM6IFt7CiAgICAgICAgdmFsaWRhdG9yOiBlbXB0eUZpZWxkKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLnBhcmFtZXRlcnMudmFsaWRhdGlvbnMuc2NhbGluZ0ZhY3RvcklzUmVxdWlyZWRFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0Egc2NhbGluZyBmYWN0b3IgaXMgcmVxdWlyZWQuJwogICAgICAgIH0pKQogICAgICB9LCB7CiAgICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbiB2YWxpZGF0b3IoX3JlZjIpIHsKICAgICAgICAgIHZhciB2YWx1ZSA9IF9yZWYyLnZhbHVlOwoKICAgICAgICAgIGlmICh2YWx1ZSA8PSAwKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgbWVzc2FnZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IucGFyYW1ldGVycy52YWxpZGF0aW9ucy5ncmVhdGVyVGhhblplcm9FcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1RoZSBzY2FsaW5nIGZhY3RvciBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwLicKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfV0sCiAgICAgIGhlbHBUZXh0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5wYXJhbWV0ZXJzLnNjYWxpbmdGYWN0b3JIZWxwVGV4dCcsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIDAuJwogICAgICB9KQogICAgfSwKICAgIHNjaGVtYTogdC5udW1iZXIKICB9LAogIGR5bmFtaWM6IHsKICAgIGZpZWxkQ29uZmlnOiB7CiAgICAgIGRlZmF1bHRWYWx1ZTogdHJ1ZQogICAgfSwKICAgIHNjaGVtYTogdC51bmlvbihbdC5ib29sZWFuLCB0LmxpdGVyYWwoJ3N0cmljdCcpXSkKICB9LAogIGR5bmFtaWNfdG9nZ2xlOiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICBkZWZhdWx0VmFsdWU6IHRydWUKICAgIH0KICB9LAogIGR5bmFtaWNfc3RyaWN0OiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICBkZWZhdWx0VmFsdWU6IGZhbHNlLAogICAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuZHluYW1pY1N0cmljdFBhcmFtZXRlci5maWVsZFRpdGxlJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVGhyb3cgYW4gZXhjZXB0aW9uIHdoZW4gdGhlIG9iamVjdCBjb250YWlucyBhbiB1bm1hcHBlZCBwcm9wZXJ0eScKICAgICAgfSksCiAgICAgIGhlbHBUZXh0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5keW5hbWljU3RyaWN0UGFyYW1ldGVyLmZpZWxkSGVscFRleHQnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdCeSBkZWZhdWx0LCB1bm1hcHBlZCBwcm9wZXJ0aWVzIHdpbGwgYmUgc2lsZW50bHkgaWdub3JlZCB3aGVuIGR5bmFtaWMgbWFwcGluZyBpcyBkaXNhYmxlZC4gT3B0aW9uYWxseSwgeW91IGNhbiBjaG9vc2UgdG8gdGhyb3cgYW4gZXhjZXB0aW9uIHdoZW4gYW4gb2JqZWN0IGNvbnRhaW5zIGFuIHVubWFwcGVkIHByb3BlcnR5LicKICAgICAgfSkKICAgIH0KICB9LAogIGVuYWJsZWQ6IHsKICAgIGZpZWxkQ29uZmlnOiB7CiAgICAgIGRlZmF1bHRWYWx1ZTogdHJ1ZQogICAgfSwKICAgIHNjaGVtYTogdC5ib29sZWFuCiAgfSwKICBmb3JtYXQ6IHsKICAgIGZpZWxkQ29uZmlnOiB7CiAgICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5mb3JtYXRGaWVsZExhYmVsJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRm9ybWF0JwogICAgICB9KSwKICAgICAgZGVmYXVsdFZhbHVlOiAnc3RyaWN0X2RhdGVfb3B0aW9uYWxfdGltZXx8ZXBvY2hfbWlsbGlzJywKICAgICAgc2VyaWFsaXplcjogZnVuY3Rpb24gc2VyaWFsaXplcihmb3JtYXQpIHsKICAgICAgICByZXR1cm4gZm9ybWF0Lmxlbmd0aCA/IGZvcm1hdC5tYXAoZnVuY3Rpb24gKF9yZWYzKSB7CiAgICAgICAgICB2YXIgbGFiZWwgPSBfcmVmMy5sYWJlbDsKICAgICAgICAgIHJldHVybiBsYWJlbDsKICAgICAgICB9KS5qb2luKCd8fCcpIDogdW5kZWZpbmVkOwogICAgICB9LAogICAgICBkZXNlcmlhbGl6ZXI6IGZ1bmN0aW9uIGRlc2VyaWFsaXplcihmb3JtYXRzKSB7CiAgICAgICAgcmV0dXJuIGZvcm1hdHMuc3BsaXQoJ3x8JykubWFwKGZ1bmN0aW9uIChmb3JtYXQpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGxhYmVsOiBmb3JtYXQKICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGhlbHBUZXh0OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5mb3JtYXRIZWxwVGV4dCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTcGVjaWZ5IGN1c3RvbSBmb3JtYXRzIHVzaW5nIHtkYXRlU3ludGF4fSBzeW50YXguIiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGRhdGVTeW50YXg6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDb2RlLCBudWxsLCAieXl5eS9NTS9kZCIpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIHNjaGVtYTogdC5zdHJpbmcKICB9LAogIGFuYWx5emVyOiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IuYW5hbHl6ZXJGaWVsZExhYmVsJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQW5hbHl6ZXInCiAgICAgIH0pLAogICAgICBkZWZhdWx0VmFsdWU6IF9kZWZhdWx0X3ZhbHVlcy5JTkRFWF9ERUZBVUxULAogICAgICB2YWxpZGF0aW9uczogYW5hbHl6ZXJWYWxpZGF0aW9ucwogICAgfSwKICAgIHNjaGVtYTogdC5zdHJpbmcKICB9LAogIHNlYXJjaF9hbmFseXplcjogewogICAgZmllbGRDb25maWc6IHsKICAgICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLnNlYXJjaEFuYWx5emVyRmllbGRMYWJlbCcsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1NlYXJjaCBhbmFseXplcicKICAgICAgfSksCiAgICAgIGRlZmF1bHRWYWx1ZTogX2RlZmF1bHRfdmFsdWVzLklOREVYX0RFRkFVTFQsCiAgICAgIHZhbGlkYXRpb25zOiBhbmFseXplclZhbGlkYXRpb25zCiAgICB9LAogICAgc2NoZW1hOiB0LnN0cmluZwogIH0sCiAgc2VhcmNoX3F1b3RlX2FuYWx5emVyOiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3Iuc2VhcmNoUXVvdGVBbmFseXplckZpZWxkTGFiZWwnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTZWFyY2ggcXVvdGUgYW5hbHl6ZXInCiAgICAgIH0pLAogICAgICBkZWZhdWx0VmFsdWU6IF9kZWZhdWx0X3ZhbHVlcy5JTkRFWF9ERUZBVUxULAogICAgICB2YWxpZGF0aW9uczogYW5hbHl6ZXJWYWxpZGF0aW9ucwogICAgfSwKICAgIHNjaGVtYTogdC5zdHJpbmcKICB9LAogIG5vcm1hbGl6ZXI6IHsKICAgIGZpZWxkQ29uZmlnOiB7CiAgICAgIGxhYmVsOiAnTm9ybWFsaXplcicsCiAgICAgIGRlZmF1bHRWYWx1ZTogJycsCiAgICAgIHR5cGU6IF9zaGFyZWRfaW1wb3J0cy5GSUVMRF9UWVBFUy5URVhULAogICAgICB2YWxpZGF0aW9uczogW3sKICAgICAgICB2YWxpZGF0b3I6IGVtcHR5RmllbGQoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IucGFyYW1ldGVycy52YWxpZGF0aW9ucy5ub3JtYWxpemVySXNSZXF1aXJlZEVycm9yTWVzc2FnZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTm9ybWFsaXplciBuYW1lIGlzIHJlcXVpcmVkLicKICAgICAgICB9KSkKICAgICAgfSwgewogICAgICAgIHZhbGlkYXRvcjogY29udGFpbnNDaGFyc0ZpZWxkKHsKICAgICAgICAgIGNoYXJzOiAnICcsCiAgICAgICAgICBtZXNzYWdlOiBjb21tb25FcnJvck1lc3NhZ2VzLnNwYWNlc05vdEFsbG93ZWQKICAgICAgICB9KQogICAgICB9XSwKICAgICAgaGVscFRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLnBhcmFtZXRlcnMubm9ybWFsaXplckhlbHBUZXh0JywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVGhlIG5hbWUgb2YgYSBub3JtYWxpemVyIGRlZmluZWQgaW4gdGhlIGluZGV4J3Mgc2V0dGluZ3MuIgogICAgICB9KQogICAgfSwKICAgIHNjaGVtYTogdC5zdHJpbmcKICB9LAogIGluZGV4X29wdGlvbnM6IHsKICAgIGZpZWxkQ29uZmlnOiBfb2JqZWN0U3ByZWFkKHt9LCBpbmRleE9wdGlvbnNDb25maWcsIHsKICAgICAgZGVmYXVsdFZhbHVlOiAncG9zaXRpb25zJwogICAgfSksCiAgICBzY2hlbWE6IHQuc3RyaW5nCiAgfSwKICBpbmRleF9vcHRpb25zX2tleXdvcmQ6IHsKICAgIGZpZWxkQ29uZmlnOiBfb2JqZWN0U3ByZWFkKHt9LCBpbmRleE9wdGlvbnNDb25maWcsIHsKICAgICAgZGVmYXVsdFZhbHVlOiAnZG9jcycKICAgIH0pLAogICAgc2NoZW1hOiB0LnN0cmluZwogIH0sCiAgaW5kZXhfb3B0aW9uc19mbGF0dGVuZWQ6IHsKICAgIGZpZWxkQ29uZmlnOiBfb2JqZWN0U3ByZWFkKHt9LCBpbmRleE9wdGlvbnNDb25maWcsIHsKICAgICAgZGVmYXVsdFZhbHVlOiAnZG9jcycKICAgIH0pLAogICAgc2NoZW1hOiB0LnN0cmluZwogIH0sCiAgZWFnZXJfZ2xvYmFsX29yZGluYWxzOiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICBkZWZhdWx0VmFsdWU6IGZhbHNlCiAgICB9LAogICAgc2NoZW1hOiB0LmJvb2xlYW4KICB9LAogIGVhZ2VyX2dsb2JhbF9vcmRpbmFsc19qb2luOiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICBkZWZhdWx0VmFsdWU6IHRydWUKICAgIH0KICB9LAogIGluZGV4X3BocmFzZXM6IHsKICAgIGZpZWxkQ29uZmlnOiB7CiAgICAgIGRlZmF1bHRWYWx1ZTogZmFsc2UKICAgIH0sCiAgICBzY2hlbWE6IHQuYm9vbGVhbgogIH0sCiAgcHJlc2VydmVfc2VwYXJhdG9yczogewogICAgZmllbGRDb25maWc6IHsKICAgICAgZGVmYXVsdFZhbHVlOiB0cnVlCiAgICB9LAogICAgc2NoZW1hOiB0LmJvb2xlYW4KICB9LAogIHByZXNlcnZlX3Bvc2l0aW9uX2luY3JlbWVudHM6IHsKICAgIGZpZWxkQ29uZmlnOiB7CiAgICAgIGRlZmF1bHRWYWx1ZTogdHJ1ZQogICAgfSwKICAgIHNjaGVtYTogdC5ib29sZWFuCiAgfSwKICBpZ25vcmVfel92YWx1ZTogewogICAgZmllbGRDb25maWc6IHsKICAgICAgZGVmYXVsdFZhbHVlOiB0cnVlCiAgICB9LAogICAgc2NoZW1hOiB0LmJvb2xlYW4KICB9LAogIHBvaW50c19vbmx5OiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICBkZWZhdWx0VmFsdWU6IGZhbHNlCiAgICB9LAogICAgc2NoZW1hOiB0LmJvb2xlYW4KICB9LAogIG5vcm1zOiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICBkZWZhdWx0VmFsdWU6IHRydWUKICAgIH0sCiAgICBzY2hlbWE6IHQuYm9vbGVhbgogIH0sCiAgbm9ybXNfa2V5d29yZDogewogICAgZmllbGRDb25maWc6IHsKICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZQogICAgfSwKICAgIHNjaGVtYTogdC5ib29sZWFuCiAgfSwKICB0ZXJtX3ZlY3RvcjogewogICAgZmllbGRDb25maWc6IHsKICAgICAgdHlwZTogX3NoYXJlZF9pbXBvcnRzLkZJRUxEX1RZUEVTLlNVUEVSX1NFTEVDVCwKICAgICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLnBhcmFtZXRlcnMudGVybVZlY3RvckxhYmVsJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU2V0IHRlcm0gdmVjdG9yJwogICAgICB9KSwKICAgICAgZGVmYXVsdFZhbHVlOiAnbm8nCiAgICB9LAogICAgc2NoZW1hOiB0LnN0cmluZwogIH0sCiAgcGF0aDogewogICAgZmllbGRDb25maWc6IHsKICAgICAgdHlwZTogX3NoYXJlZF9pbXBvcnRzLkZJRUxEX1RZUEVTLkNPTUJPX0JPWCwKICAgICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLnBhcmFtZXRlcnMucGF0aExhYmVsJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRmllbGQgcGF0aCcKICAgICAgfSksCiAgICAgIGhlbHBUZXh0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5wYXJhbWV0ZXJzLnBhdGhIZWxwVGV4dCcsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1RoZSBhYnNvbHV0ZSBwYXRoIGZyb20gdGhlIHJvb3QgdG8gdGhlIHRhcmdldCBmaWVsZC4nCiAgICAgIH0pLAogICAgICB2YWxpZGF0aW9uczogW3sKICAgICAgICB2YWxpZGF0b3I6IGVtcHR5RmllbGQoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IucGFyYW1ldGVycy52YWxpZGF0aW9ucy5wYXRoSXNSZXF1aXJlZEVycm9yTWVzc2FnZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU2VsZWN0IGEgZmllbGQgdG8gcG9pbnQgdGhlIGFsaWFzIHRvLicKICAgICAgICB9KSkKICAgICAgfV0sCiAgICAgIHNlcmlhbGl6ZXI6IGZ1bmN0aW9uIHNlcmlhbGl6ZXIodmFsdWUpIHsKICAgICAgICByZXR1cm4gdmFsdWUubGVuZ3RoID09PSAwID8gJycgOiB2YWx1ZVswXS5pZDsKICAgICAgfQogICAgfSwKICAgIHRhcmdldFR5cGVzTm90QWxsb3dlZDogWydvYmplY3QnLCAnbmVzdGVkJywgJ2FsaWFzJ10sCiAgICBzY2hlbWE6IHQuc3RyaW5nCiAgfSwKICBwb3NpdGlvbl9pbmNyZW1lbnRfZ2FwOiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICB0eXBlOiBfc2hhcmVkX2ltcG9ydHMuRklFTERfVFlQRVMuTlVNQkVSLAogICAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IucGFyYW1ldGVycy5wb3NpdGlvbkluY3JlbWVudEdhcExhYmVsJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUG9zaXRpb24gaW5jcmVtZW50IGdhcCcKICAgICAgfSksCiAgICAgIGRlZmF1bHRWYWx1ZTogMTAwLAogICAgICBmb3JtYXR0ZXJzOiBbdG9JbnRdLAogICAgICB2YWxpZGF0aW9uczogW3sKICAgICAgICB2YWxpZGF0b3I6IGVtcHR5RmllbGQoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IucGFyYW1ldGVycy52YWxpZGF0aW9ucy5wb3NpdGlvbkluY3JlbWVudEdhcElzUmVxdWlyZWRFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1NldCBhIHBvc2l0aW9uIGluY3JlbWVudCBnYXAgdmFsdWUnCiAgICAgICAgfSkpCiAgICAgIH0sIHsKICAgICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uIHZhbGlkYXRvcihfcmVmNCkgewogICAgICAgICAgdmFyIHZhbHVlID0gX3JlZjQudmFsdWU7CgogICAgICAgICAgaWYgKHZhbHVlIDwgMCkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIG1lc3NhZ2U6IGNvbW1vbkVycm9yTWVzc2FnZXMuc21hbGxlclRoYW5aZXJvCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9XQogICAgfSwKICAgIHNjaGVtYTogdC5udW1iZXIKICB9LAogIGluZGV4X3ByZWZpeGVzOiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICBkZWZhdWx0VmFsdWU6IHt9CiAgICB9LAogICAgLy8gTmVlZGVkIGZvciBGaWVsZFBhcmFtcyB0eXBpbmcKICAgIHByb3BzOiB7CiAgICAgIG1pbl9jaGFyczogewogICAgICAgIGZpZWxkQ29uZmlnOiB7CiAgICAgICAgICB0eXBlOiBfc2hhcmVkX2ltcG9ydHMuRklFTERfVFlQRVMuTlVNQkVSLAogICAgICAgICAgZGVmYXVsdFZhbHVlOiAyLAogICAgICAgICAgc2VyaWFsaXplcjogZnVuY3Rpb24gc2VyaWFsaXplcih2YWx1ZSkgewogICAgICAgICAgICByZXR1cm4gdmFsdWUgPT09ICcnID8gJycgOiB0b0ludCh2YWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBtYXhfY2hhcnM6IHsKICAgICAgICBmaWVsZENvbmZpZzogewogICAgICAgICAgdHlwZTogX3NoYXJlZF9pbXBvcnRzLkZJRUxEX1RZUEVTLk5VTUJFUiwKICAgICAgICAgIGRlZmF1bHRWYWx1ZTogNSwKICAgICAgICAgIHNlcmlhbGl6ZXI6IGZ1bmN0aW9uIHNlcmlhbGl6ZXIodmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIHZhbHVlID09PSAnJyA/ICcnIDogdG9JbnQodmFsdWUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHNjaGVtYTogdC5wYXJ0aWFsKHsKICAgICAgbWluX2NoYXJzOiB0Lm51bWJlciwKICAgICAgbWF4X2NoYXJzOiB0Lm51bWJlcgogICAgfSkKICB9LAogIHNpbWlsYXJpdHk6IHsKICAgIGZpZWxkQ29uZmlnOiB7CiAgICAgIGRlZmF1bHRWYWx1ZTogJ0JNMjUnLAogICAgICB0eXBlOiBfc2hhcmVkX2ltcG9ydHMuRklFTERfVFlQRVMuU1VQRVJfU0VMRUNULAogICAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IucGFyYW1ldGVycy5zaW1pbGFyaXR5TGFiZWwnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTaW1pbGFyaXR5IGFsZ29yaXRobScKICAgICAgfSkKICAgIH0sCiAgICBzY2hlbWE6IHQuc3RyaW5nCiAgfSwKICBzcGxpdF9xdWVyaWVzX29uX3doaXRlc3BhY2U6IHsKICAgIGZpZWxkQ29uZmlnOiB7CiAgICAgIGRlZmF1bHRWYWx1ZTogZmFsc2UKICAgIH0sCiAgICBzY2hlbWE6IHQuYm9vbGVhbgogIH0sCiAgaWdub3JlX2Fib3ZlOiB7CiAgICBmaWVsZENvbmZpZzogewogICAgICAvLyBQcm90ZWN0cyBhZ2FpbnN0IEx1Y2VuZeKAmXMgdGVybSBieXRlLWxlbmd0aCBsaW1pdCBvZiAzMjc2Ni4gVVRGLTggY2hhcmFjdGVycyBtYXkgb2NjdXB5IGF0CiAgICAgIC8vIG1vc3QgNCBieXRlcywgc28gMzI3NjYgLyA0ID0gODE5MSBjaGFyYWN0ZXJzLgogICAgICBkZWZhdWx0VmFsdWU6IDgxOTEsCiAgICAgIHR5cGU6IF9zaGFyZWRfaW1wb3J0cy5GSUVMRF9UWVBFUy5OVU1CRVIsCiAgICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5pZ25vcmVBYm92ZUZpZWxkTGFiZWwnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDaGFyYWN0ZXIgbGVuZ3RoIGxpbWl0JwogICAgICB9KSwKICAgICAgZm9ybWF0dGVyczogW3RvSW50XSwKICAgICAgdmFsaWRhdGlvbnM6IFt7CiAgICAgICAgdmFsaWRhdG9yOiBlbXB0eUZpZWxkKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLnBhcmFtZXRlcnMudmFsaWRhdGlvbnMuaWdub3JlQWJvdmVJc1JlcXVpcmVkRXJyb3JNZXNzYWdlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDaGFyYWN0ZXIgbGVuZ3RoIGxpbWl0IGlzIHJlcXVpcmVkLicKICAgICAgICB9KSkKICAgICAgfSwgewogICAgICAgIHZhbGlkYXRvcjogZnVuY3Rpb24gdmFsaWRhdG9yKF9yZWY1KSB7CiAgICAgICAgICB2YXIgdmFsdWUgPSBfcmVmNS52YWx1ZTsKCiAgICAgICAgICBpZiAodmFsdWUgPCAwKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgbWVzc2FnZTogY29tbW9uRXJyb3JNZXNzYWdlcy5zbWFsbGVyVGhhblplcm8KICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH1dCiAgICB9LAogICAgc2NoZW1hOiB0Lm51bWJlcgogIH0sCiAgZW5hYmxlX3Bvc2l0aW9uX2luY3JlbWVudHM6IHsKICAgIGZpZWxkQ29uZmlnOiB7CiAgICAgIGRlZmF1bHRWYWx1ZTogdHJ1ZQogICAgfSwKICAgIHNjaGVtYTogdC5ib29sZWFuCiAgfSwKICBkZXB0aF9saW1pdDogewogICAgZmllbGRDb25maWc6IHsKICAgICAgZGVmYXVsdFZhbHVlOiAyMCwKICAgICAgdHlwZTogX3NoYXJlZF9pbXBvcnRzLkZJRUxEX1RZUEVTLk5VTUJFUiwKICAgICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRlcHRoTGltaXRGaWVsZExhYmVsJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTmVzdGVkIG9iamVjdCBkZXB0aCBsaW1pdCcKICAgICAgfSksCiAgICAgIGZvcm1hdHRlcnM6IFt0b0ludF0sCiAgICAgIHZhbGlkYXRpb25zOiBbewogICAgICAgIHZhbGlkYXRvcjogZnVuY3Rpb24gdmFsaWRhdG9yKF9yZWY2KSB7CiAgICAgICAgICB2YXIgdmFsdWUgPSBfcmVmNi52YWx1ZTsKCiAgICAgICAgICBpZiAodmFsdWUgPCAwKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgbWVzc2FnZTogY29tbW9uRXJyb3JNZXNzYWdlcy5zbWFsbGVyVGhhblplcm8KICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH1dCiAgICB9LAogICAgc2NoZW1hOiB0Lm51bWJlcgogIH0sCiAgZGltczogewogICAgZmllbGRDb25maWc6IHsKICAgICAgZGVmYXVsdFZhbHVlOiAnJywKICAgICAgdHlwZTogX3NoYXJlZF9pbXBvcnRzLkZJRUxEX1RZUEVTLk5VTUJFUiwKICAgICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmRpbXNGaWVsZExhYmVsJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRGltZW5zaW9ucycKICAgICAgfSksCiAgICAgIGhlbHBUZXh0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5wYXJhbWV0ZXJzLmRpbXNIZWxwVGV4dERlc2NyaXB0aW9uJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVGhlIG51bWJlciBvZiBkaW1lbnNpb25zIGluIHRoZSB2ZWN0b3IuJwogICAgICB9KSwKICAgICAgZm9ybWF0dGVyczogW3RvSW50XSwKICAgICAgdmFsaWRhdGlvbnM6IFt7CiAgICAgICAgdmFsaWRhdG9yOiBlbXB0eUZpZWxkKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLnBhcmFtZXRlcnMudmFsaWRhdGlvbnMuZGltc0lzUmVxdWlyZWRFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1NwZWNpZnkgYSBkaW1lbnNpb24uJwogICAgICAgIH0pKQogICAgICB9XQogICAgfSwKICAgIHNjaGVtYTogdC5zdHJpbmcKICB9LAogIHJlbGF0aW9uczogewogICAgZmllbGRDb25maWc6IHsKICAgICAgZGVmYXVsdFZhbHVlOiBbXSAvLyBOZWVkZWQgZm9yIEZpZWxkUGFyYW1zIHR5cGluZwoKICAgIH0sCiAgICBzY2hlbWE6IHQucmVjb3JkKHQuc3RyaW5nLCB0LnVuaW9uKFt0LnN0cmluZywgdC5hcnJheSh0LnN0cmluZyldKSkKICB9LAogIG1heF9zaGluZ2xlX3NpemU6IHsKICAgIGZpZWxkQ29uZmlnOiB7CiAgICAgIHR5cGU6IF9zaGFyZWRfaW1wb3J0cy5GSUVMRF9UWVBFUy5TRUxFQ1QsCiAgICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5sYXJnZXN0U2hpbmdsZVNpemVGaWVsZExhYmVsJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTWF4IHNoaW5nbGUgc2l6ZScKICAgICAgfSksCiAgICAgIGRlZmF1bHRWYWx1ZTogMywKICAgICAgZm9ybWF0dGVyczogW3RvSW50XQogICAgfSwKICAgIHNjaGVtYTogdC51bmlvbihbdC5saXRlcmFsKDIpLCB0LmxpdGVyYWwoMyksIHQubGl0ZXJhbCg0KV0pCiAgfQp9OwpleHBvcnRzLlBBUkFNRVRFUlNfREVGSU5JVElPTiA9IFBBUkFNRVRFUlNfREVGSU5JVElPTjs="},null]}