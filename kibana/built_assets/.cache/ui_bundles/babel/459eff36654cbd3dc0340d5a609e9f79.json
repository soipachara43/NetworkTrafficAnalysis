{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/monitoring/public/views/base_controller.js","dependencies":[{"path":"x-pack/legacy/plugins/monitoring/public/views/base_controller.js","mtime":1589249552612},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLk1vbml0b3JpbmdWaWV3QmFzZUNvbnRyb2xsZXIgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfbW9tZW50ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJtb21lbnQiKSk7Cgp2YXIgX3JlYWN0RG9tID0gcmVxdWlyZSgicmVhY3QtZG9tIik7Cgp2YXIgX2dldF9wYWdlX2RhdGEgPSByZXF1aXJlKCIuLi9saWIvZ2V0X3BhZ2VfZGF0YSIpOwoKdmFyIF9jb21wb25lbnRzID0gcmVxdWlyZSgicGx1Z2lucy9tb25pdG9yaW5nL2NvbXBvbmVudHMiKTsKCnZhciBfdGltZWZpbHRlciA9IHJlcXVpcmUoInBsdWdpbnMvbW9uaXRvcmluZy9ucF9pbXBvcnRzL3VpL3RpbWVmaWx0ZXIiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoInVpL2kxOG4iKTsKCnZhciBfY2FuY2VsX3Byb21pc2UgPSByZXF1aXJlKCIuLi8uLi9jb21tb24vY2FuY2VsX3Byb21pc2UiKTsKCnZhciBfc2V0dXBfbW9kZSA9IHJlcXVpcmUoIi4uL2xpYi9zZXR1cF9tb2RlIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKLyoqCiAqIEdpdmVuIGEgdGltZXpvbmUsIHRoaXMgZnVuY3Rpb24gd2lsbCBjYWxjdWxhdGUgdGhlIG9mZnNldCBpbiBtaWxsaXNlY29uZHMKICogZnJvbSBVVEMgdGltZS4KICoKICogQHBhcmFtIHtzdHJpbmd9IHRpbWV6b25lCiAqLwp2YXIgZ2V0T2Zmc2V0SW5NUyA9IGZ1bmN0aW9uIGdldE9mZnNldEluTVModGltZXpvbmUpIHsKICBpZiAodGltZXpvbmUgPT09ICdCcm93c2VyJykgewogICAgcmV0dXJuIDA7CiAgfQoKICB2YXIgb2Zmc2V0SW5NaW51dGVzID0gX21vbWVudC5kZWZhdWx0LnR6KHRpbWV6b25lKS51dGNPZmZzZXQoKTsKCiAgdmFyIG9mZnNldEluTVMgPSBvZmZzZXRJbk1pbnV0ZXMgKiAxICogNjAgKiAxMDAwOwogIHJldHVybiBvZmZzZXRJbk1TOwp9OwovKioKICogQ2xhc3MgdG8gbWFuYWdlIGNvbW1vbiBpbnN0YW50aWF0aW9uIGJlaGF2aW9ycyBpbiBhIHZpZXcgY29udHJvbGxlcgogKgogKiBUaGlzIGlzIGV4cGVjdGVkIHRvIGJlIGV4dGVuZGVkLCBhbmQgYmVoYXZpb3IgZW5hYmxlZCB1c2luZyBzdXBlcigpOwogKgogKiBFeGFtcGxlOgogKiB1aVJvdXRlcy53aGVuKCcvbXlSb3V0ZScsIHsKICogICB0ZW1wbGF0ZTogaW1wb3J0ZWRUZW1wbGF0ZSwKICogICBjb250cm9sbGVyQXM6ICdteVZpZXcnLAogKiAgIGNvbnRyb2xsZXI6IGNsYXNzIE15VmlldyBleHRlbmRzIE1vbml0b3JpbmdWaWV3QmFzZUNvbnRyb2xsZXIgewogKiAgICAgY29uc3RydWN0b3IoJGluamVjdG9yLCAkc2NvcGUpIHsKICogICAgICAgc3VwZXIoewogKiAgICAgICAgIHRpdGxlOiAnSGVsbG8gV29ybGQnLAogKiAgICAgICAgIGFwaTogJy4uL2FwaS92MS9tb25pdG9yaW5nL2Zvby9iYXInLAogKiAgICAgICAgIGRlZmF1bHREYXRhLAogKiAgICAgICAgIHJlYWN0Tm9kZUlkLAogKiAgICAgICAgICRzY29wZSwKICogICAgICAgICAkaW5qZWN0b3IsCiAqICAgICAgICAgb3B0aW9uczogewogKiAgICAgICAgICAgZW5hYmxlVGltZUZpbHRlcjogZmFsc2UgLy8gdGhpcyB3aWxsIGhhdmUganVzdCB0aGUgcGFnZSBhdXRvLXJlZnJlc2ggY29udHJvbCBzaG93CiAqICAgICAgICAgfQogKiAgICAgICB9KTsKICogICAgIH0KICogICB9CiAqIH0pOwogKi8KCgp2YXIgTW9uaXRvcmluZ1ZpZXdCYXNlQ29udHJvbGxlciA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIC8qKgogICAqIENyZWF0ZSBhIHZpZXcgY29udHJvbGxlcgogICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZSAtIFRpdGxlIG9mIHRoZSBwYWdlCiAgICogQHBhcmFtIHtTdHJpbmd9IGFwaSAtIEJhY2stZW5kIEFQSSBlbmRwb2ludCB0byBwb2xsIGZvciBnZXR0aW5nIHRoZSBwYWdlCiAgICogICAgZGF0YSB1c2luZyBQT1NUIGFuZCB0aW1lIHJhbmdlIGRhdGEgaW4gdGhlIGJvZHkuIFdoZW5ldmVyIHBvc3NpYmxlLCB1c2UKICAgKiAgICB0aGlzIG1ldGhvZCBmb3IgZGF0YSBwb2xsaW5nIHJhdGhlciB0aGFuIHN1cHBseSB0aGUgZ2V0UGFnZURhdGEgcGFyYW0uCiAgICogQHBhcmFtIHtGdW5jdGlvbn0gYXBpVXJsRm4gLSBGdW5jdGlvbiB0aGF0IHJldHVybnMgYSBzdHJpbmcgZm9yIHRoZSBiYWNrLWVuZAogICAqICAgIEFQSSBlbmRwb2ludCwgaW4gY2FzZSB0aGUgc3RyaW5nIGhhcyBkeW5hbWljIHF1ZXJ5IHBhcmFtZXRlcnMgKGUuZy4KICAgKiAgICBzaG93X3N5c3RlbV9pbmRpY2VzKSByYXRoZXIgdGhhbiBzdXBwbHkgdGhlIGdldFBhZ2VEYXRhIHBhcmFtLgogICAqIEBwYXJhbSB7RnVuY3Rpb259IGdldFBhZ2VEYXRhIC0gKE9wdGlvbmFsKSBGdW5jdGlvbiB0byBmZXRjaCBwYWdlIGRhdGEsIGlmCiAgICogICAgc2ltcGx5IHBhc3NpbmcgdGhlIEFQSSBzdHJpbmcgaXNuJ3Qgd29ya2FibGUuCiAgICogQHBhcmFtIHtPYmplY3R9IGRlZmF1bHREYXRhIC0gSW5pdGlhbCBtb2RlbCBkYXRhIHRvIHBvcHVsYXRlCiAgICogQHBhcmFtIHtTdHJpbmd9IHJlYWN0Tm9kZUlkIC0gRE9NIGVsZW1lbnQgSUQgb2YgdGhlIGVsZW1lbnQgZm9yIG1vdW50aW5nCiAgICogICAgdGhlIHZpZXcncyBtYWluIFJlYWN0IGNvbXBvbmVudAogICAqIEBwYXJhbSB7U2VydmljZX0gJGluamVjdG9yIC0gQW5ndWxhciBkZXBlbmRlbmN5IGluamVjdGlvbiBzZXJ2aWNlCiAgICogQHBhcmFtIHtTZXJ2aWNlfSAkc2NvcGUgLSBBbmd1bGFyIHZpZXcgZGF0YSBiaW5kaW5nIHNlcnZpY2UKICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMuZW5hYmxlVGltZUZpbHRlciAtIFdoZXRoZXIgdG8gc2hvdyB0aGUgdGltZSBmaWx0ZXIKICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMuZW5hYmxlQXV0b1JlZnJlc2ggLSBXaGV0aGVyIHRvIHNob3cgdGhlIGF1dG8KICAgKiAgICByZWZyZXNoIGNvbnRyb2wKICAgKi8KICBmdW5jdGlvbiBNb25pdG9yaW5nVmlld0Jhc2VDb250cm9sbGVyKF9yZWYpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIF9yZWYkdGl0bGUgPSBfcmVmLnRpdGxlLAogICAgICAgIHRpdGxlID0gX3JlZiR0aXRsZSA9PT0gdm9pZCAwID8gJycgOiBfcmVmJHRpdGxlLAogICAgICAgIF9yZWYkYXBpID0gX3JlZi5hcGksCiAgICAgICAgYXBpID0gX3JlZiRhcGkgPT09IHZvaWQgMCA/ICcnIDogX3JlZiRhcGksCiAgICAgICAgYXBpVXJsRm4gPSBfcmVmLmFwaVVybEZuLAogICAgICAgIF9yZWYkZ2V0UGFnZURhdGEgPSBfcmVmLmdldFBhZ2VEYXRhLAogICAgICAgIF9nZXRQYWdlRGF0YSA9IF9yZWYkZ2V0UGFnZURhdGEgPT09IHZvaWQgMCA/IF9nZXRfcGFnZV9kYXRhLmdldFBhZ2VEYXRhIDogX3JlZiRnZXRQYWdlRGF0YSwKICAgICAgICBkZWZhdWx0RGF0YSA9IF9yZWYuZGVmYXVsdERhdGEsCiAgICAgICAgX3JlZiRyZWFjdE5vZGVJZCA9IF9yZWYucmVhY3ROb2RlSWQsCiAgICAgICAgcmVhY3ROb2RlSWQgPSBfcmVmJHJlYWN0Tm9kZUlkID09PSB2b2lkIDAgPyBudWxsIDogX3JlZiRyZWFjdE5vZGVJZCwKICAgICAgICAkc2NvcGUgPSBfcmVmLiRzY29wZSwKICAgICAgICAkaW5qZWN0b3IgPSBfcmVmLiRpbmplY3RvciwKICAgICAgICBfcmVmJG9wdGlvbnMgPSBfcmVmLm9wdGlvbnMsCiAgICAgICAgb3B0aW9ucyA9IF9yZWYkb3B0aW9ucyA9PT0gdm9pZCAwID8ge30gOiBfcmVmJG9wdGlvbnMsCiAgICAgICAgX3JlZiRmZXRjaERhdGFJbW1lZGlhID0gX3JlZi5mZXRjaERhdGFJbW1lZGlhdGVseSwKICAgICAgICBmZXRjaERhdGFJbW1lZGlhdGVseSA9IF9yZWYkZmV0Y2hEYXRhSW1tZWRpYSA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWYkZmV0Y2hEYXRhSW1tZWRpYTsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTW9uaXRvcmluZ1ZpZXdCYXNlQ29udHJvbGxlcik7CgogICAgdmFyIHRpdGxlU2VydmljZSA9ICRpbmplY3Rvci5nZXQoJ3RpdGxlJyk7CiAgICB2YXIgJGV4ZWN1dG9yID0gJGluamVjdG9yLmdldCgnJGV4ZWN1dG9yJyk7CiAgICB2YXIgJHdpbmRvdyA9ICRpbmplY3Rvci5nZXQoJyR3aW5kb3cnKTsKICAgIHZhciBjb25maWcgPSAkaW5qZWN0b3IuZ2V0KCdjb25maWcnKTsKICAgIHRpdGxlU2VydmljZSgkc2NvcGUuY2x1c3RlciwgdGl0bGUpOwogICAgJHNjb3BlLnBhZ2VEYXRhID0gdGhpcy5kYXRhID0gX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdERhdGEpOwogICAgdGhpcy5faXNEYXRhSW5pdGlhbGl6ZWQgPSBmYWxzZTsKICAgIHRoaXMucmVhY3ROb2RlSWQgPSByZWFjdE5vZGVJZDsKICAgIHZhciBkZWZlclRpbWVyOwogICAgdmFyIHpvb21JbkxldmVsID0gMDsKCiAgICB2YXIgcG9wc3RhdGVIYW5kbGVyID0gZnVuY3Rpb24gcG9wc3RhdGVIYW5kbGVyKCkgewogICAgICByZXR1cm4gem9vbUluTGV2ZWwgPiAwICYmIC0tem9vbUluTGV2ZWw7CiAgICB9OwoKICAgIHZhciByZW1vdmVQb3BzdGF0ZUhhbmRsZXIgPSBmdW5jdGlvbiByZW1vdmVQb3BzdGF0ZUhhbmRsZXIoKSB7CiAgICAgIHJldHVybiAkd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgcG9wc3RhdGVIYW5kbGVyKTsKICAgIH07CgogICAgdmFyIGFkZFBvcHN0YXRlSGFuZGxlciA9IGZ1bmN0aW9uIGFkZFBvcHN0YXRlSGFuZGxlcigpIHsKICAgICAgcmV0dXJuICR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBwb3BzdGF0ZUhhbmRsZXIpOwogICAgfTsKCiAgICB0aGlzLnpvb21JbmZvID0gewogICAgICB6b29tT3V0SGFuZGxlcjogZnVuY3Rpb24gem9vbU91dEhhbmRsZXIoKSB7CiAgICAgICAgcmV0dXJuICR3aW5kb3cuaGlzdG9yeS5iYWNrKCk7CiAgICAgIH0sCiAgICAgIHNob3dab29tT3V0QnRuOiBmdW5jdGlvbiBzaG93Wm9vbU91dEJ0bigpIHsKICAgICAgICByZXR1cm4gem9vbUluTGV2ZWwgPiAwOwogICAgICB9CiAgICB9OwogICAgdmFyIF9vcHRpb25zJGVuYWJsZVRpbWVGaSA9IG9wdGlvbnMuZW5hYmxlVGltZUZpbHRlciwKICAgICAgICBlbmFibGVUaW1lRmlsdGVyID0gX29wdGlvbnMkZW5hYmxlVGltZUZpID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkZW5hYmxlVGltZUZpLAogICAgICAgIF9vcHRpb25zJGVuYWJsZUF1dG9SZSA9IG9wdGlvbnMuZW5hYmxlQXV0b1JlZnJlc2gsCiAgICAgICAgZW5hYmxlQXV0b1JlZnJlc2ggPSBfb3B0aW9ucyRlbmFibGVBdXRvUmUgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRlbmFibGVBdXRvUmU7CgogICAgaWYgKGVuYWJsZVRpbWVGaWx0ZXIgPT09IGZhbHNlKSB7CiAgICAgIF90aW1lZmlsdGVyLnRpbWVmaWx0ZXIuZGlzYWJsZVRpbWVSYW5nZVNlbGVjdG9yKCk7CiAgICB9IGVsc2UgewogICAgICBfdGltZWZpbHRlci50aW1lZmlsdGVyLmVuYWJsZVRpbWVSYW5nZVNlbGVjdG9yKCk7CiAgICB9CgogICAgaWYgKGVuYWJsZUF1dG9SZWZyZXNoID09PSBmYWxzZSkgewogICAgICBfdGltZWZpbHRlci50aW1lZmlsdGVyLmRpc2FibGVBdXRvUmVmcmVzaFNlbGVjdG9yKCk7CiAgICB9IGVsc2UgewogICAgICBfdGltZWZpbHRlci50aW1lZmlsdGVyLmVuYWJsZUF1dG9SZWZyZXNoU2VsZWN0b3IoKTsKICAgIH0KCiAgICB0aGlzLnVwZGF0ZURhdGEgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChfdGhpcy51cGRhdGVEYXRhUHJvbWlzZSkgewogICAgICAgIC8vIERvIG5vdCBzZW50IGFub3RoZXIgcmVxdWVzdCBpZiBvbmUgaXMgaW5mbGlnaHQKICAgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2VsYXN0aWMva2liYW5hL2lzc3Vlcy8yNDA4MgogICAgICAgIF90aGlzLnVwZGF0ZURhdGFQcm9taXNlLmNhbmNlbCgpOwoKICAgICAgICBfdGhpcy51cGRhdGVEYXRhUHJvbWlzZSA9IG51bGw7CiAgICAgIH0KCiAgICAgIHZhciBfYXBpID0gYXBpVXJsRm4gPyBhcGlVcmxGbigpIDogYXBpOwoKICAgICAgdmFyIHByb21pc2VzID0gW19nZXRQYWdlRGF0YSgkaW5qZWN0b3IsIF9hcGksIF90aGlzLmdldFBhZ2luYXRpb25Sb3V0ZU9wdGlvbnMoKSldOwogICAgICB2YXIgc2V0dXBNb2RlID0gKDAsIF9zZXR1cF9tb2RlLmdldFNldHVwTW9kZVN0YXRlKSgpOwoKICAgICAgaWYgKHNldHVwTW9kZS5lbmFibGVkKSB7CiAgICAgICAgcHJvbWlzZXMucHVzaCgoMCwgX3NldHVwX21vZGUudXBkYXRlU2V0dXBNb2RlRGF0YSkoKSk7CiAgICAgIH0KCiAgICAgIF90aGlzLnVwZGF0ZURhdGFQcm9taXNlID0gbmV3IF9jYW5jZWxfcHJvbWlzZS5Qcm9taXNlV2l0aENhbmNlbChQcm9taXNlLmFsbChwcm9taXNlcykpOwogICAgICByZXR1cm4gX3RoaXMudXBkYXRlRGF0YVByb21pc2UucHJvbWlzZSgpLnRoZW4oZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgICAgdmFyIF9yZWYzID0gX3NsaWNlZFRvQXJyYXkoX3JlZjIsIDEpLAogICAgICAgICAgICBwYWdlRGF0YSA9IF9yZWYzWzBdOwoKICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzLl9pc0RhdGFJbml0aWFsaXplZCA9IHRydWU7IC8vIHJlbmRlciB3aWxsIHJlcGxhY2UgbG9hZGluZyBzY3JlZW4gd2l0aCB0aGUgcmVhY3QgY29tcG9uZW50CgogICAgICAgICAgJHNjb3BlLnBhZ2VEYXRhID0gX3RoaXMuZGF0YSA9IHBhZ2VEYXRhOyAvLyB1cGRhdGUgdGhlIHZpZXcncyBkYXRhIHdpdGggdGhlIGZldGNoIHJlc3VsdAogICAgICAgIH0pOwogICAgICB9KTsKICAgIH07CgogICAgZmV0Y2hEYXRhSW1tZWRpYXRlbHkgJiYgdGhpcy51cGRhdGVEYXRhKCk7CiAgICAkZXhlY3V0b3IucmVnaXN0ZXIoewogICAgICBleGVjdXRlOiBmdW5jdGlvbiBleGVjdXRlKCkgewogICAgICAgIHJldHVybiBfdGhpcy51cGRhdGVEYXRhKCk7CiAgICAgIH0KICAgIH0pOwogICAgJGV4ZWN1dG9yLnN0YXJ0KCRzY29wZSk7CiAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHsKICAgICAgY2xlYXJUaW1lb3V0KGRlZmVyVGltZXIpOwogICAgICByZW1vdmVQb3BzdGF0ZUhhbmRsZXIoKTsKCiAgICAgIGlmIChfdGhpcy5yZWFjdE5vZGVJZCkgewogICAgICAgIC8vIFdJUCBodHRwczovL2dpdGh1Yi5jb20vZWxhc3RpYy94LXBhY2sta2liYW5hL2lzc3Vlcy81MTk4CiAgICAgICAgKDAsIF9yZWFjdERvbS51bm1vdW50Q29tcG9uZW50QXROb2RlKShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChfdGhpcy5yZWFjdE5vZGVJZCkpOwogICAgICB9CgogICAgICAkZXhlY3V0b3IuZGVzdHJveSgpOwogICAgfSk7IC8vIG5lZWRlZCBmb3IgY2hhcnQgcGFnZXMKCiAgICB0aGlzLm9uQnJ1c2ggPSBmdW5jdGlvbiAoX3JlZjQpIHsKICAgICAgdmFyIHhheGlzID0gX3JlZjQueGF4aXM7CiAgICAgIHJlbW92ZVBvcHN0YXRlSGFuZGxlcigpOwogICAgICB2YXIgdG8gPSB4YXhpcy50bywKICAgICAgICAgIGZyb20gPSB4YXhpcy5mcm9tOwogICAgICB2YXIgdGltZXpvbmUgPSBjb25maWcuZ2V0KCdkYXRlRm9ybWF0OnR6Jyk7CiAgICAgIHZhciBvZmZzZXQgPSBnZXRPZmZzZXRJbk1TKHRpbWV6b25lKTsKCiAgICAgIF90aW1lZmlsdGVyLnRpbWVmaWx0ZXIuc2V0VGltZSh7CiAgICAgICAgZnJvbTogKDAsIF9tb21lbnQuZGVmYXVsdCkoZnJvbSAtIG9mZnNldCksCiAgICAgICAgdG86ICgwLCBfbW9tZW50LmRlZmF1bHQpKHRvIC0gb2Zmc2V0KSwKICAgICAgICBtb2RlOiAnYWJzb2x1dGUnCiAgICAgIH0pOwoKICAgICAgJGV4ZWN1dG9yLmNhbmNlbCgpOwogICAgICAkZXhlY3V0b3IucnVuKCk7CiAgICAgICsrem9vbUluTGV2ZWw7CiAgICAgIGNsZWFyVGltZW91dChkZWZlclRpbWVyKTsKICAgICAgLyoKICAgICAgICBOZWVkZWQgdG8gZGVmZXIgJ3BvcHN0YXRlJyBldmVudCwgc28gaXQgZG9lcyBub3QgZmlyZSBpbW1lZGlhdGVseSBhZnRlciBpdCdzIGFkZGVkLgogICAgICAgIDEwbXMgaXMgdG8gbWFrZSBzdXJlIHRoZSBldmVudCBpcyBub3QgYWRkZWQgd2l0aCB0aGUgc2FtZSBjb2RlIGRpZ2VzdAogICAgICAqLwoKICAgICAgZGVmZXJUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBhZGRQb3BzdGF0ZUhhbmRsZXIoKTsKICAgICAgfSwgMTApOwogICAgfTsKCiAgICB0aGlzLnNldFRpdGxlID0gZnVuY3Rpb24gKHRpdGxlKSB7CiAgICAgIHJldHVybiB0aXRsZVNlcnZpY2UoJHNjb3BlLmNsdXN0ZXIsIHRpdGxlKTsKICAgIH07CiAgfQoKICBfY3JlYXRlQ2xhc3MoTW9uaXRvcmluZ1ZpZXdCYXNlQ29udHJvbGxlciwgW3sKICAgIGtleTogInJlbmRlclJlYWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJSZWFjdChjb21wb25lbnQpIHsKICAgICAgdmFyIHJlbmRlckVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnJlYWN0Tm9kZUlkKTsKCiAgICAgIGlmICghcmVuZGVyRWxlbWVudCkgewogICAgICAgIGNvbnNvbGUud2FybigiXCIjIi5jb25jYXQodGhpcy5yZWFjdE5vZGVJZCwgIlwiIGVsZW1lbnQgaGFzIG5vdCBiZWVuIGFkZGVkIHRvIHRoZSBET00geWV0IikpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuX2lzRGF0YUluaXRpYWxpemVkID09PSBmYWxzZSkgewogICAgICAgICgwLCBfcmVhY3REb20ucmVuZGVyKShfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9pMThuLkkxOG5Db250ZXh0LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jb21wb25lbnRzLlBhZ2VMb2FkaW5nLCBudWxsKSksIHJlbmRlckVsZW1lbnQpOwogICAgICB9IGVsc2UgewogICAgICAgICgwLCBfcmVhY3REb20ucmVuZGVyKShjb21wb25lbnQsIHJlbmRlckVsZW1lbnQpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0UGFnaW5hdGlvblJvdXRlT3B0aW9ucyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFnaW5hdGlvblJvdXRlT3B0aW9ucygpIHsKICAgICAgcmV0dXJuIHt9OwogICAgfQogIH1dKTsKCiAgcmV0dXJuIE1vbml0b3JpbmdWaWV3QmFzZUNvbnRyb2xsZXI7Cn0oKTsKCmV4cG9ydHMuTW9uaXRvcmluZ1ZpZXdCYXNlQ29udHJvbGxlciA9IE1vbml0b3JpbmdWaWV3QmFzZUNvbnRyb2xsZXI7"},null]}