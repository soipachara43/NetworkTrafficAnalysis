{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/infra/public/containers/logs/log_position/log_position_state.js","dependencies":[{"path":"x-pack/plugins/infra/public/containers/logs/log_position/log_position_state.js","mtime":1589249554277},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkxvZ1Bvc2l0aW9uU3RhdGUgPSBleHBvcnRzLnVzZUxvZ1Bvc2l0aW9uU3RhdGUgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gcmVxdWlyZSgicmVhY3QiKTsKCnZhciBfY29uc3RhdGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImNvbnN0YXRlIikpOwoKdmFyIF9yZWFjdFVzZSA9IHJlcXVpcmUoInJlYWN0LXVzZSIpOwoKdmFyIF9kYXRlbWF0aCA9IHJlcXVpcmUoIi4uLy4uLy4uL3V0aWxzL2RhdGVtYXRoIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKdmFyIERFRkFVTFRfREFURV9SQU5HRSA9IHsKICBzdGFydERhdGVFeHByZXNzaW9uOiAnbm93LTFkJywKICBlbmREYXRlRXhwcmVzc2lvbjogJ25vdycKfTsKdmFyIERFU0lSRURfQlVGRkVSX1BBR0VTID0gMjsKCnZhciB1c2VWaXNpYmxlTWlkcG9pbnQgPSBmdW5jdGlvbiB1c2VWaXNpYmxlTWlkcG9pbnQobWlkZGxlS2V5LCB0YXJnZXRQb3NpdGlvbikgewogIC8vIE9mIHRoZSB0d28gZGVwZW5kZW5jaWVzIGBtaWRkbGVLZXlgIGFuZCBgdGFyZ2V0UG9zaXRpb25gLCByZXR1cm4KICAvLyB3aGljaGV2ZXIgb25lIHdhcyB0aGUgbW9zdCByZWNlbnRseSB1cGRhdGVkLiBUaGlzIGFsbG93cyB0aGUgVUkgY29udHJvbHMKICAvLyB0byBkaXNwbGF5IGEgbmV3bHktc2VsZWN0ZWQgYHRhcmdldFBvc2l0aW9uYCBiZWZvcmUgbG9hZGluZyBuZXcgZGF0YTsKICAvLyBvdGhlcndpc2UgdGhlIHByZXZpb3VzIGBtaWRkbGVLZXlgIHdvdWxkIGxpbmdlciBpbiB0aGUgVUkgZm9yIHRoZSBlbnRpcmV0eQogIC8vIG9mIHRoZSBsb2FkaW5nIG9wZXJhdGlvbiwgd2hpY2ggdGhlIHVzZXIgY291bGQgcGVyY2VpdmUgYXMgdW5yZXNwb25zaXZlbmVzcwogIHZhciBfdXNlU3RhdGUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSh7CiAgICBtaWRkbGVLZXk6IG1pZGRsZUtleSwKICAgIHRhcmdldFBvc2l0aW9uOiB0YXJnZXRQb3NpdGlvbiwKICAgIGN1cnJlbnRWYWx1ZTogbWlkZGxlS2V5IHx8IHRhcmdldFBvc2l0aW9uCiAgfSksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBzdG9yZSA9IF91c2VTdGF0ZTJbMF0sCiAgICAgIHVwZGF0ZSA9IF91c2VTdGF0ZTJbMV07CgogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICBpZiAobWlkZGxlS2V5ICE9PSBzdG9yZS5taWRkbGVLZXkpIHsKICAgICAgdXBkYXRlKHsKICAgICAgICB0YXJnZXRQb3NpdGlvbjogdGFyZ2V0UG9zaXRpb24sCiAgICAgICAgbWlkZGxlS2V5OiBtaWRkbGVLZXksCiAgICAgICAgY3VycmVudFZhbHVlOiBtaWRkbGVLZXkKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHRhcmdldFBvc2l0aW9uICE9PSBzdG9yZS50YXJnZXRQb3NpdGlvbikgewogICAgICB1cGRhdGUoewogICAgICAgIHRhcmdldFBvc2l0aW9uOiB0YXJnZXRQb3NpdGlvbiwKICAgICAgICBtaWRkbGVLZXk6IG1pZGRsZUtleSwKICAgICAgICBjdXJyZW50VmFsdWU6IHRhcmdldFBvc2l0aW9uCiAgICAgIH0pOwogICAgfQogIH0sIFttaWRkbGVLZXksIHRhcmdldFBvc2l0aW9uXSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzCgogIHJldHVybiBzdG9yZS5jdXJyZW50VmFsdWU7Cn07Cgp2YXIgdXNlTG9nUG9zaXRpb25TdGF0ZSA9IGZ1bmN0aW9uIHVzZUxvZ1Bvc2l0aW9uU3RhdGUoKSB7CiAgLy8gRmxhZyB0byBkZXRlcm1pbmUgaWYgYExvZ1Bvc2l0aW9uU3RhdGVgIGhhcyBiZWVuIGZ1bGx5IGluaXRpYWxpemVkLgogIC8vCiAgLy8gV2hlbiB0aGUgcGFnZSBsb2FkcywgdGhlcmUgbWlnaHQgYmUgaW5pdGlhbCBzdGF0ZSBpbiB0aGUgVVJMLiBXZSB3YW50IHRvCiAgLy8gcHJldmVudCB0aGUgZW50cmllcyBmcm9tIHNob3dpbmcgdW50aWwgd2UgaGF2ZSBwcm9jZXNzZWQgdGhhdCBpbml0aWFsCiAgLy8gc3RhdGUuIFRoYXQgcHJldmVudHMgZG91YmxlIGZldGNoaW5nLgogIHZhciBfdXNlU3RhdGUzID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZmFsc2UpLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIGlzSW5pdGlhbGl6ZWQgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRJbml0aWFsaXplZCA9IF91c2VTdGF0ZTRbMV07CgogIHZhciBpbml0aWFsaXplID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKCkgewogICAgc2V0SW5pdGlhbGl6ZWQodHJ1ZSk7CiAgfSwgW3NldEluaXRpYWxpemVkXSk7CgogIHZhciBfdXNlU3RhdGU1ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkobnVsbCksCiAgICAgIF91c2VTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU1LCAyKSwKICAgICAgdGFyZ2V0UG9zaXRpb24gPSBfdXNlU3RhdGU2WzBdLAogICAgICBqdW1wVG9UYXJnZXRQb3NpdGlvbiA9IF91c2VTdGF0ZTZbMV07CgogIHZhciBfdXNlU3RhdGU3ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZmFsc2UpLAogICAgICBfdXNlU3RhdGU4ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNywgMiksCiAgICAgIGlzU3RyZWFtaW5nID0gX3VzZVN0YXRlOFswXSwKICAgICAgc2V0SXNTdHJlYW1pbmcgPSBfdXNlU3RhdGU4WzFdOwoKICB2YXIgX3VzZVN0YXRlOSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKHsKICAgIGVuZEtleTogbnVsbCwKICAgIG1pZGRsZUtleTogbnVsbCwKICAgIHN0YXJ0S2V5OiBudWxsLAogICAgcGFnZXNCZWZvcmVTdGFydDogSW5maW5pdHksCiAgICBwYWdlc0FmdGVyRW5kOiBJbmZpbml0eQogIH0pLAogICAgICBfdXNlU3RhdGUxMCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTksIDIpLAogICAgICB2aXNpYmxlUG9zaXRpb25zID0gX3VzZVN0YXRlMTBbMF0sCiAgICAgIHJlcG9ydFZpc2libGVQb3NpdGlvbnMgPSBfdXNlU3RhdGUxMFsxXTsgLy8gV2UgZ3JvdXAgdGhlIGBzdGFydERhdGVgIGFuZCBgZW5kRGF0ZWAgdmFsdWVzIGluIHRoZSBzYW1lIG9iamVjdCB0byBiZSBhYmxlCiAgLy8gdG8gc2V0IGJvdGggYXQgdGhlIHNhbWUgdGltZSwgc2F2aW5nIGEgcmUtcmVuZGVyCgoKICB2YXIgX3VzZVNldFN0YXRlID0gKDAsIF9yZWFjdFVzZS51c2VTZXRTdGF0ZSkoX29iamVjdFNwcmVhZCh7fSwgREVGQVVMVF9EQVRFX1JBTkdFLCB7CiAgICBzdGFydFRpbWVzdGFtcDogKDAsIF9kYXRlbWF0aC5kYXRlbWF0aFRvRXBvY2hNaWxsaXMpKERFRkFVTFRfREFURV9SQU5HRS5zdGFydERhdGVFeHByZXNzaW9uKSwKICAgIGVuZFRpbWVzdGFtcDogKDAsIF9kYXRlbWF0aC5kYXRlbWF0aFRvRXBvY2hNaWxsaXMpKERFRkFVTFRfREFURV9SQU5HRS5lbmREYXRlRXhwcmVzc2lvbiwgJ3VwJyksCiAgICB0aW1lc3RhbXBzTGFzdFVwZGF0ZTogRGF0ZS5ub3coKQogIH0pKSwKICAgICAgX3VzZVNldFN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTZXRTdGF0ZSwgMiksCiAgICAgIGRhdGVSYW5nZSA9IF91c2VTZXRTdGF0ZTJbMF0sCiAgICAgIHNldERhdGVSYW5nZSA9IF91c2VTZXRTdGF0ZTJbMV07CgogIHZhciBzdGFydEtleSA9IHZpc2libGVQb3NpdGlvbnMuc3RhcnRLZXksCiAgICAgIG1pZGRsZUtleSA9IHZpc2libGVQb3NpdGlvbnMubWlkZGxlS2V5LAogICAgICBlbmRLZXkgPSB2aXNpYmxlUG9zaXRpb25zLmVuZEtleSwKICAgICAgcGFnZXNCZWZvcmVTdGFydCA9IHZpc2libGVQb3NpdGlvbnMucGFnZXNCZWZvcmVTdGFydCwKICAgICAgcGFnZXNBZnRlckVuZCA9IHZpc2libGVQb3NpdGlvbnMucGFnZXNBZnRlckVuZDsKICB2YXIgdmlzaWJsZU1pZHBvaW50ID0gdXNlVmlzaWJsZU1pZHBvaW50KG1pZGRsZUtleSwgdGFyZ2V0UG9zaXRpb24pOwogIHZhciB2aXNpYmxlVGltZUludGVydmFsID0gKDAsIF9yZWFjdC51c2VNZW1vKShmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gc3RhcnRLZXkgJiYgZW5kS2V5ID8gewogICAgICBzdGFydDogc3RhcnRLZXkudGltZSwKICAgICAgZW5kOiBlbmRLZXkudGltZQogICAgfSA6IG51bGw7CiAgfSwgW3N0YXJ0S2V5LCBlbmRLZXldKTsgLy8gQWxsb3cgc2V0dGluZyBgc3RhcnREYXRlYCBhbmQgYGVuZERhdGVgIHNlcGFyYXRlbHksIG9yIHRvZ2V0aGVyCgogIHZhciB1cGRhdGVEYXRlUmFuZ2UgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAobmV3RGF0ZVJhbmdlKSB7CiAgICAvLyBQcmV2ZW50IHVubmVjZXNzYXJ5IHJlLXJlbmRlcnMKICAgIGlmICghKCdzdGFydERhdGVFeHByZXNzaW9uJyBpbiBuZXdEYXRlUmFuZ2UpICYmICEoJ2VuZERhdGVFeHByZXNzaW9uJyBpbiBuZXdEYXRlUmFuZ2UpKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgbmV4dFN0YXJ0RGF0ZUV4cHJlc3Npb24gPSBuZXdEYXRlUmFuZ2Uuc3RhcnREYXRlRXhwcmVzc2lvbiB8fCBkYXRlUmFuZ2Uuc3RhcnREYXRlRXhwcmVzc2lvbjsKICAgIHZhciBuZXh0RW5kRGF0ZUV4cHJlc3Npb24gPSBuZXdEYXRlUmFuZ2UuZW5kRGF0ZUV4cHJlc3Npb24gfHwgZGF0ZVJhbmdlLmVuZERhdGVFeHByZXNzaW9uOwoKICAgIGlmICghKDAsIF9kYXRlbWF0aC5pc1ZhbGlkRGF0ZW1hdGgpKG5leHRTdGFydERhdGVFeHByZXNzaW9uKSB8fCAhKDAsIF9kYXRlbWF0aC5pc1ZhbGlkRGF0ZW1hdGgpKG5leHRFbmREYXRlRXhwcmVzc2lvbikpIHsKICAgICAgcmV0dXJuOwogICAgfSAvLyBEYXRlcyBhcmUgdmFsaWQsIHNvIHRoZSBmdW5jdGlvbiBjYW5ub3QgcmV0dXJuIGBudWxsYAoKCiAgICB2YXIgbmV4dFN0YXJ0VGltZXN0YW1wID0gKDAsIF9kYXRlbWF0aC5kYXRlbWF0aFRvRXBvY2hNaWxsaXMpKG5leHRTdGFydERhdGVFeHByZXNzaW9uKTsKICAgIHZhciBuZXh0RW5kVGltZXN0YW1wID0gKDAsIF9kYXRlbWF0aC5kYXRlbWF0aFRvRXBvY2hNaWxsaXMpKG5leHRFbmREYXRlRXhwcmVzc2lvbiwgJ3VwJyk7IC8vIFJlc2V0IHRoZSB0YXJnZXQgcG9zaXRpb24gaWYgaXQgZG9lc24ndCBmYWxsIHdpdGhpbiB0aGUgbmV3IHJhbmdlLgoKICAgIGlmICh0YXJnZXRQb3NpdGlvbiAmJiAobmV4dFN0YXJ0VGltZXN0YW1wID4gdGFyZ2V0UG9zaXRpb24udGltZSB8fCBuZXh0RW5kVGltZXN0YW1wIDwgdGFyZ2V0UG9zaXRpb24udGltZSkpIHsKICAgICAganVtcFRvVGFyZ2V0UG9zaXRpb24obnVsbCk7CiAgICB9CgogICAgc2V0RGF0ZVJhbmdlKF9vYmplY3RTcHJlYWQoe30sIG5ld0RhdGVSYW5nZSwgewogICAgICBzdGFydFRpbWVzdGFtcDogbmV4dFN0YXJ0VGltZXN0YW1wLAogICAgICBlbmRUaW1lc3RhbXA6IG5leHRFbmRUaW1lc3RhbXAsCiAgICAgIHRpbWVzdGFtcHNMYXN0VXBkYXRlOiBEYXRlLm5vdygpCiAgICB9KSk7CiAgfSwgW3NldERhdGVSYW5nZSwgZGF0ZVJhbmdlLCB0YXJnZXRQb3NpdGlvbl0pOyAvLyBgZW5kVGltZXN0YW1wYCB1cGRhdGUgY29uZGl0aW9ucwoKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgaWYgKGRhdGVSYW5nZS5lbmREYXRlRXhwcmVzc2lvbiAhPT0gJ25vdycpIHsKICAgICAgcmV0dXJuOwogICAgfSAvLyBVc2VyIGlzIGNsb3NlIHRvIHRoZSBib3R0b20gZWRnZSBvZiB0aGUgc2Nyb2xsLgoKCiAgICBpZiAodmlzaWJsZVBvc2l0aW9ucy5wYWdlc0FmdGVyRW5kIDw9IERFU0lSRURfQlVGRkVSX1BBR0VTKSB7CiAgICAgIHNldERhdGVSYW5nZSh7CiAgICAgICAgZW5kVGltZXN0YW1wOiAoMCwgX2RhdGVtYXRoLmRhdGVtYXRoVG9FcG9jaE1pbGxpcykoZGF0ZVJhbmdlLmVuZERhdGVFeHByZXNzaW9uLCAndXAnKSwKICAgICAgICB0aW1lc3RhbXBzTGFzdFVwZGF0ZTogRGF0ZS5ub3coKQogICAgICB9KTsKICAgIH0KICB9LCBbZGF0ZVJhbmdlLmVuZERhdGVFeHByZXNzaW9uLCB2aXNpYmxlUG9zaXRpb25zLCBzZXREYXRlUmFuZ2VdKTsKCiAgdmFyIHN0YXRlID0gX29iamVjdFNwcmVhZCh7CiAgICBpc0luaXRpYWxpemVkOiBpc0luaXRpYWxpemVkLAogICAgdGFyZ2V0UG9zaXRpb246IHRhcmdldFBvc2l0aW9uLAogICAgaXNTdHJlYW1pbmc6IGlzU3RyZWFtaW5nLAogICAgZmlyc3RWaXNpYmxlUG9zaXRpb246IHN0YXJ0S2V5LAogICAgcGFnZXNCZWZvcmVTdGFydDogcGFnZXNCZWZvcmVTdGFydCwKICAgIHBhZ2VzQWZ0ZXJFbmQ6IHBhZ2VzQWZ0ZXJFbmQsCiAgICB2aXNpYmxlTWlkcG9pbnQ6IHZpc2libGVNaWRwb2ludCwKICAgIHZpc2libGVNaWRwb2ludFRpbWU6IHZpc2libGVNaWRwb2ludCA/IHZpc2libGVNaWRwb2ludC50aW1lIDogbnVsbCwKICAgIHZpc2libGVUaW1lSW50ZXJ2YWw6IHZpc2libGVUaW1lSW50ZXJ2YWwKICB9LCBkYXRlUmFuZ2UpOwoKICB2YXIgY2FsbGJhY2tzID0gewogICAgaW5pdGlhbGl6ZTogaW5pdGlhbGl6ZSwKICAgIGp1bXBUb1RhcmdldFBvc2l0aW9uOiBqdW1wVG9UYXJnZXRQb3NpdGlvbiwKICAgIGp1bXBUb1RhcmdldFBvc2l0aW9uVGltZTogKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKHRpbWUpIHsKICAgICAgcmV0dXJuIGp1bXBUb1RhcmdldFBvc2l0aW9uKHsKICAgICAgICB0aWVicmVha2VyOiAwLAogICAgICAgIHRpbWU6IHRpbWUKICAgICAgfSk7CiAgICB9LCBbanVtcFRvVGFyZ2V0UG9zaXRpb25dKSwKICAgIHJlcG9ydFZpc2libGVQb3NpdGlvbnM6IHJlcG9ydFZpc2libGVQb3NpdGlvbnMsCiAgICBzdGFydExpdmVTdHJlYW1pbmc6ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uICgpIHsKICAgICAgc2V0SXNTdHJlYW1pbmcodHJ1ZSk7CiAgICAgIGp1bXBUb1RhcmdldFBvc2l0aW9uKG51bGwpOwogICAgICB1cGRhdGVEYXRlUmFuZ2UoewogICAgICAgIHN0YXJ0RGF0ZUV4cHJlc3Npb246ICdub3ctMWQnLAogICAgICAgIGVuZERhdGVFeHByZXNzaW9uOiAnbm93JwogICAgICB9KTsKICAgIH0sIFtzZXRJc1N0cmVhbWluZywgdXBkYXRlRGF0ZVJhbmdlXSksCiAgICBzdG9wTGl2ZVN0cmVhbWluZzogKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc2V0SXNTdHJlYW1pbmcoZmFsc2UpOwogICAgfSwgW3NldElzU3RyZWFtaW5nXSksCiAgICB1cGRhdGVEYXRlUmFuZ2U6IHVwZGF0ZURhdGVSYW5nZQogIH07CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLCB7fSwgY2FsbGJhY2tzKTsKfTsKCmV4cG9ydHMudXNlTG9nUG9zaXRpb25TdGF0ZSA9IHVzZUxvZ1Bvc2l0aW9uU3RhdGU7CnZhciBMb2dQb3NpdGlvblN0YXRlID0gKDAsIF9jb25zdGF0ZS5kZWZhdWx0KSh1c2VMb2dQb3NpdGlvblN0YXRlKTsKZXhwb3J0cy5Mb2dQb3NpdGlvblN0YXRlID0gTG9nUG9zaXRpb25TdGF0ZTs="},null]}