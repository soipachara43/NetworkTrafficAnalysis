{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/index_management/public/application/components/mappings_editor/components/document_fields/fields/create_field/create_field.js","dependencies":[{"path":"x-pack/plugins/index_management/public/application/components/mappings_editor/components/document_fields/fields/create_field/create_field.js","mtime":1589249554112},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkNyZWF0ZUZpZWxkID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9jbGFzc25hbWVzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJjbGFzc25hbWVzIikpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9kb2N1bWVudGF0aW9uID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vc2VydmljZXMvZG9jdW1lbnRhdGlvbiIpOwoKdmFyIF9zaGFyZWRfaW1wb3J0cyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL3NoYXJlZF9pbXBvcnRzIik7Cgp2YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbnN0YW50cyIpOwoKdmFyIF9tYXBwaW5nc19zdGF0ZSA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL21hcHBpbmdzX3N0YXRlIik7Cgp2YXIgX2xpYiA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2xpYiIpOwoKdmFyIF9maWVsZF9wYXJhbWV0ZXJzID0gcmVxdWlyZSgiLi4vLi4vZmllbGRfcGFyYW1ldGVycyIpOwoKdmFyIF9yZXF1aXJlZF9wYXJhbWV0ZXJzX2Zvcm1zID0gcmVxdWlyZSgiLi9yZXF1aXJlZF9wYXJhbWV0ZXJzX2Zvcm1zIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7CiAgdHJ5IHsKICAgIHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsKICAgIHZhciB2YWx1ZSA9IGluZm8udmFsdWU7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIHJlamVjdChlcnJvcik7CiAgICByZXR1cm47CiAgfQoKICBpZiAoaW5mby5kb25lKSB7CiAgICByZXNvbHZlKHZhbHVlKTsKICB9IGVsc2UgewogICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOwogIH0KfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgdmFyIHNlbGYgPSB0aGlzLAogICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7CgogICAgICBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgewogICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsKICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7CiAgICAgIH0KCiAgICAgIF9uZXh0KHVuZGVmaW5lZCk7CiAgICB9KTsKICB9Owp9Cgp2YXIgZm9ybVdyYXBwZXIgPSBmdW5jdGlvbiBmb3JtV3JhcHBlcihwcm9wcykgewogIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJmb3JtIiwgcHJvcHMpOwp9OwoKdmFyIENyZWF0ZUZpZWxkID0gX3JlYWN0LmRlZmF1bHQubWVtbyhmdW5jdGlvbiBDcmVhdGVGaWVsZENvbXBvbmVudChfcmVmKSB7CiAgdmFyIGFsbEZpZWxkcyA9IF9yZWYuYWxsRmllbGRzLAogICAgICBpc1Jvb3RMZXZlbEZpZWxkID0gX3JlZi5pc1Jvb3RMZXZlbEZpZWxkLAogICAgICBpc011bHRpRmllbGQgPSBfcmVmLmlzTXVsdGlGaWVsZCwKICAgICAgcGFkZGluZ0xlZnQgPSBfcmVmLnBhZGRpbmdMZWZ0LAogICAgICBpc0NhbmNlbGFibGUgPSBfcmVmLmlzQ2FuY2VsYWJsZSwKICAgICAgbWF4TmVzdGVkRGVwdGggPSBfcmVmLm1heE5lc3RlZERlcHRoOwogIHZhciBkaXNwYXRjaCA9ICgwLCBfbWFwcGluZ3Nfc3RhdGUudXNlRGlzcGF0Y2gpKCk7CgogIHZhciBfdXNlRm9ybSA9ICgwLCBfc2hhcmVkX2ltcG9ydHMudXNlRm9ybSkoewogICAgc2VyaWFsaXplcjogX2xpYi5maWVsZFNlcmlhbGl6ZXIsCiAgICBvcHRpb25zOiB7CiAgICAgIHN0cmlwRW1wdHlGaWVsZHM6IGZhbHNlCiAgICB9CiAgfSksCiAgICAgIGZvcm0gPSBfdXNlRm9ybS5mb3JtOwoKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgdmFyIHN1YnNjcmlwdGlvbiA9IGZvcm0uc3Vic2NyaWJlKGZ1bmN0aW9uICh1cGRhdGVkRmllbGRGb3JtKSB7CiAgICAgIGRpc3BhdGNoKHsKICAgICAgICB0eXBlOiAnZmllbGRGb3JtLnVwZGF0ZScsCiAgICAgICAgdmFsdWU6IHVwZGF0ZWRGaWVsZEZvcm0KICAgICAgfSk7CiAgICB9KTsKICAgIHJldHVybiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmU7CiAgfSwgW2Zvcm0sIGRpc3BhdGNoXSk7CgogIHZhciBjYW5jZWwgPSBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICBkaXNwYXRjaCh7CiAgICAgIHR5cGU6ICdkb2N1bWVudEZpZWxkLmNoYW5nZVN0YXR1cycsCiAgICAgIHZhbHVlOiAnaWRsZScKICAgIH0pOwogIH07CgogIHZhciBzdWJtaXRGb3JtID0KICAvKiNfX1BVUkVfXyovCiAgZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGUpIHsKICAgICAgdmFyIGV4aXRBZnRlciwKICAgICAgICAgIF9yZWYzLAogICAgICAgICAgaXNWYWxpZCwKICAgICAgICAgIGRhdGEsCiAgICAgICAgICBfYXJncyA9IGFyZ3VtZW50czsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBleGl0QWZ0ZXIgPSBfYXJncy5sZW5ndGggPiAxICYmIF9hcmdzWzFdICE9PSB1bmRlZmluZWQgPyBfYXJnc1sxXSA6IGZhbHNlOwoKICAgICAgICAgICAgICBpZiAoZSkgewogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIGZvcm0uc3VibWl0KCk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgX3JlZjMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGlzVmFsaWQgPSBfcmVmMy5pc1ZhbGlkOwogICAgICAgICAgICAgIGRhdGEgPSBfcmVmMy5kYXRhOwoKICAgICAgICAgICAgICBpZiAoaXNWYWxpZCkgewogICAgICAgICAgICAgICAgZm9ybS5yZXNldCgpOwogICAgICAgICAgICAgICAgZGlzcGF0Y2goewogICAgICAgICAgICAgICAgICB0eXBlOiAnZmllbGQuYWRkJywKICAgICAgICAgICAgICAgICAgdmFsdWU6IGRhdGEKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmIChleGl0QWZ0ZXIpIHsKICAgICAgICAgICAgICAgICAgY2FuY2VsKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gc3VibWl0Rm9ybShfeCkgewogICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOwoKICB2YXIgb25DbGlja091dHNpZGUgPSBmdW5jdGlvbiBvbkNsaWNrT3V0c2lkZSgpIHsKICAgIHZhciBuYW1lID0gZm9ybS5nZXRGaWVsZHMoKS5uYW1lLnZhbHVlOwoKICAgIGlmIChuYW1lLnRyaW0oKSA9PT0gJycpIHsKICAgICAgaWYgKGlzQ2FuY2VsYWJsZSAhPT0gZmFsc2UpIHsKICAgICAgICBjYW5jZWwoKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgc3VibWl0Rm9ybSh1bmRlZmluZWQsIHRydWUpOwogICAgfQogIH07CiAgLyoqCiAgICogV2hlbiB3ZSBjaGFuZ2UgdGhlIHR5cGUsIHdlIG5lZWQgdG8gY2hlY2sgaWYgdGhlcmUgaXMgYSBzdWJUeXBlIGFycmF5IHRvIGNob29zZSBmcm9tLgogICAqIElmIHRoZXJlIGlzIGEgc3ViVHlwZSBhcnJheSwgd2UgYnVpbGQgdGhlIG9wdGlvbnMgbGlzdCBmb3IgdGhlIHNlbGVjdCAoYW5kIGluIGNhc2UgdGhlIGZpZWxkIGlzIGEgbXVsdGktZmllbGQKICAgKiB3ZSBhbHNvIGZpbHRlciBvdXQgYmxhY2tsaXN0ZWQgdHlwZXMpLgogICAqCiAgICogQHBhcmFtIHR5cGUgVGhlIHNlbGVjdGVkIGZpZWxkIHR5cGUKICAgKi8KCgogIHZhciBnZXRTdWJUeXBlTWV0YSA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uICh0eXBlKSB7CiAgICB2YXIgdHlwZURlZmluaXRpb24gPSBfY29uc3RhbnRzLlRZUEVfREVGSU5JVElPTlt0eXBlXTsKICAgIHZhciBoYXNTdWJUeXBlcyA9IHR5cGVEZWZpbml0aW9uICE9PSB1bmRlZmluZWQgJiYgdHlwZURlZmluaXRpb24uc3ViVHlwZXM7CiAgICB2YXIgc3ViVHlwZU9wdGlvbnMgPSBoYXNTdWJUeXBlcyA/IHR5cGVEZWZpbml0aW9uLnN1YlR5cGVzLnR5cGVzLm1hcChmdW5jdGlvbiAoc3ViVHlwZSkgewogICAgICByZXR1cm4gX2NvbnN0YW50cy5UWVBFX0RFRklOSVRJT05bc3ViVHlwZV07CiAgICB9KS5tYXAoZnVuY3Rpb24gKHN1YlR5cGUpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB2YWx1ZTogc3ViVHlwZS52YWx1ZSwKICAgICAgICBsYWJlbDogc3ViVHlwZS5sYWJlbAogICAgICB9OwogICAgfSkgOiB1bmRlZmluZWQ7CgogICAgaWYgKGhhc1N1YlR5cGVzKSB7CiAgICAgIGlmIChpc011bHRpRmllbGQpIHsKICAgICAgICAvLyBJZiBpdCBpcyBhIG11bHRpLWZpZWxkLCB3ZSBuZWVkIHRvIGZpbHRlciBvdXQgbm9uLWFsbG93ZWQgdHlwZXMKICAgICAgICBzdWJUeXBlT3B0aW9ucyA9ICgwLCBfbGliLmZpbHRlclR5cGVzRm9yTXVsdGlGaWVsZCkoc3ViVHlwZU9wdGlvbnMpOwogICAgICB9IGVsc2UgaWYgKGlzUm9vdExldmVsRmllbGQgPT09IGZhbHNlKSB7CiAgICAgICAgc3ViVHlwZU9wdGlvbnMgPSAoMCwgX2xpYi5maWx0ZXJUeXBlc0Zvck5vblJvb3RGaWVsZHMpKHN1YlR5cGVPcHRpb25zKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB7CiAgICAgIHN1YlR5cGVPcHRpb25zOiBzdWJUeXBlT3B0aW9ucywKICAgICAgc3ViVHlwZUxhYmVsOiBoYXNTdWJUeXBlcyA/IHR5cGVEZWZpbml0aW9uLnN1YlR5cGVzLmxhYmVsIDogdW5kZWZpbmVkCiAgICB9OwogIH0sIFtpc011bHRpRmllbGQsIGlzUm9vdExldmVsRmllbGRdKTsKICB2YXIgb25UeXBlQ2hhbmdlID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKG5leHRUeXBlKSB7CiAgICBmb3JtLnNldEZpZWxkVmFsdWUoJ3R5cGUnLCBuZXh0VHlwZSk7CgogICAgaWYgKG5leHRUeXBlLmxlbmd0aCkgewogICAgICB2YXIgX2dldFN1YlR5cGVNZXRhID0gZ2V0U3ViVHlwZU1ldGEobmV4dFR5cGVbMF0udmFsdWUpLAogICAgICAgICAgc3ViVHlwZU9wdGlvbnMgPSBfZ2V0U3ViVHlwZU1ldGEuc3ViVHlwZU9wdGlvbnM7CgogICAgICBmb3JtLnNldEZpZWxkVmFsdWUoJ3N1YlR5cGUnLCBzdWJUeXBlT3B0aW9ucyA/IFtzdWJUeXBlT3B0aW9uc1swXV0gOiB1bmRlZmluZWQpOwogICAgfQogIH0sIFtmb3JtLCBnZXRTdWJUeXBlTWV0YV0pOwogIHZhciByZW5kZXJGb3JtRmllbGRzID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKF9yZWY0KSB7CiAgICB2YXIgdHlwZSA9IF9yZWY0LnR5cGU7CiAgICB2YXIgaXNPdGhlclR5cGUgPSB0eXBlID09PSAnb3RoZXInOwoKICAgIHZhciBfZ2V0U3ViVHlwZU1ldGEyID0gZ2V0U3ViVHlwZU1ldGEodHlwZSksCiAgICAgICAgc3ViVHlwZU9wdGlvbnMgPSBfZ2V0U3ViVHlwZU1ldGEyLnN1YlR5cGVPcHRpb25zLAogICAgICAgIHN1YlR5cGVMYWJlbCA9IF9nZXRTdWJUeXBlTWV0YTIuc3ViVHlwZUxhYmVsOwoKICAgIHZhciBkb2NMaW5rID0gX2RvY3VtZW50YXRpb24uZG9jdW1lbnRhdGlvblNlcnZpY2UuZ2V0VHlwZURvY0xpbmsodHlwZSk7CgogICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgICBndXR0ZXJTaXplOiAicyIKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZmllbGRfcGFyYW1ldGVycy5OYW1lUGFyYW1ldGVyLCBudWxsKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZmllbGRfcGFyYW1ldGVycy5UeXBlUGFyYW1ldGVyLCB7CiAgICAgIGlzUm9vdExldmVsRmllbGQ6IGlzUm9vdExldmVsRmllbGQsCiAgICAgIGlzTXVsdGlGaWVsZDogaXNNdWx0aUZpZWxkLAogICAgICBvblR5cGVDaGFuZ2U6IG9uVHlwZUNoYW5nZSwKICAgICAgZG9jTGluazogZG9jTGluawogICAgfSkpLCBpc090aGVyVHlwZSAmJiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2ZpZWxkX3BhcmFtZXRlcnMuT3RoZXJUeXBlTmFtZVBhcmFtZXRlciwgbnVsbCkpLCBzdWJUeXBlT3B0aW9ucyAmJiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3NoYXJlZF9pbXBvcnRzLlVzZUZpZWxkLCB7CiAgICAgIHBhdGg6ICJzdWJUeXBlIiwKICAgICAgY29uZmlnOiBfb2JqZWN0U3ByZWFkKHt9LCAoMCwgX2xpYi5nZXRGaWVsZENvbmZpZykoJ3R5cGUnKSwgewogICAgICAgIGxhYmVsOiBzdWJUeXBlTGFiZWwsCiAgICAgICAgZGVmYXVsdFZhbHVlOiBzdWJUeXBlT3B0aW9uc1swXS52YWx1ZQogICAgICB9KQogICAgfSwgZnVuY3Rpb24gKHN1YlR5cGVGaWVsZCkgewogICAgICB2YXIgZXJyb3IgPSBzdWJUeXBlRmllbGQuZ2V0RXJyb3JzTWVzc2FnZXMoKTsKICAgICAgdmFyIGlzSW52YWxpZCA9IGVycm9yID8gQm9vbGVhbihlcnJvci5sZW5ndGgpIDogZmFsc2U7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgICAgIGxhYmVsOiBzdWJUeXBlRmllbGQubGFiZWwsCiAgICAgICAgZXJyb3I6IGVycm9yLAogICAgICAgIGlzSW52YWxpZDogaXNJbnZhbGlkCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDb21ib0JveCwgewogICAgICAgIHBsYWNlaG9sZGVyOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5jcmVhdGVGaWVsZC50eXBlUGxhY2Vob2xkZXJMYWJlbCcsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU2VsZWN0IGEgdHlwZScKICAgICAgICB9KSwKICAgICAgICBzaW5nbGVTZWxlY3Rpb246IHsKICAgICAgICAgIGFzUGxhaW5UZXh0OiB0cnVlCiAgICAgICAgfSwKICAgICAgICBvcHRpb25zOiBzdWJUeXBlT3B0aW9ucywKICAgICAgICBzZWxlY3RlZE9wdGlvbnM6IHN1YlR5cGVGaWVsZC52YWx1ZSwKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UobmV3U3ViVHlwZSkgewogICAgICAgICAgcmV0dXJuIHN1YlR5cGVGaWVsZC5zZXRWYWx1ZShuZXdTdWJUeXBlKTsKICAgICAgICB9LAogICAgICAgIGlzQ2xlYXJhYmxlOiBmYWxzZQogICAgICB9KSk7CiAgICB9KSkpKTsKICB9LCBbZ2V0U3ViVHlwZU1ldGEsIGlzTXVsdGlGaWVsZCwgaXNSb290TGV2ZWxGaWVsZCwgb25UeXBlQ2hhbmdlXSk7CgogIHZhciByZW5kZXJGb3JtQWN0aW9ucyA9IGZ1bmN0aW9uIHJlbmRlckZvcm1BY3Rpb25zKCkgewogICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgICAgZ3V0dGVyU2l6ZTogInMiLAogICAgICBqdXN0aWZ5Q29udGVudDogImZsZXhFbmQiCiAgICB9LCBpc0NhbmNlbGFibGUgIT09IGZhbHNlICYmIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICBncm93OiBmYWxzZQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbkVtcHR5LCB7CiAgICAgIG9uQ2xpY2s6IGNhbmNlbCwKICAgICAgImRhdGEtdGVzdC1zdWJqIjogImNhbmNlbEJ1dHRvbiIKICAgIH0sIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmNyZWF0ZUZpZWxkLmNhbmNlbEJ1dHRvbkxhYmVsJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ0NhbmNlbCcKICAgIH0pKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICBncm93OiBmYWxzZQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbiwgewogICAgICBjb2xvcjogInByaW1hcnkiLAogICAgICBmaWxsOiB0cnVlLAogICAgICBvbkNsaWNrOiBzdWJtaXRGb3JtLAogICAgICB0eXBlOiAic3VibWl0IiwKICAgICAgImRhdGEtdGVzdC1zdWJqIjogImFkZEJ1dHRvbiIKICAgIH0sIGlzTXVsdGlGaWVsZCA/IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmNyZWF0ZUZpZWxkLmFkZE11bHRpRmllbGRCdXR0b25MYWJlbCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdBZGQgbXVsdGktZmllbGQnCiAgICB9KSA6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmNyZWF0ZUZpZWxkLmFkZEZpZWxkQnV0dG9uTGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQWRkIGZpZWxkJwogICAgfSkpKSk7CiAgfTsKCiAgdmFyIHJlbmRlclBhcmFtZXRlcnNGb3JtID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKF9yZWY1KSB7CiAgICB2YXIgdHlwZSA9IF9yZWY1LnR5cGUsCiAgICAgICAgc3ViVHlwZSA9IF9yZWY1LnN1YlR5cGU7CiAgICB2YXIgUGFyYW1ldGVyc0Zvcm0gPSAoMCwgX3JlcXVpcmVkX3BhcmFtZXRlcnNfZm9ybXMuZ2V0UGFyYW1ldGVyc0Zvcm1Gb3JUeXBlKSh0eXBlLCBzdWJUeXBlKTsKICAgIHJldHVybiBQYXJhbWV0ZXJzRm9ybSA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgY2xhc3NOYW1lOiAibWFwcGluZ3NFZGl0b3JfX2NyZWF0ZUZpZWxkUmVxdWlyZWRQcm9wcyIKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoUGFyYW1ldGVyc0Zvcm0sIHsKICAgICAgYWxsRmllbGRzOiBhbGxGaWVsZHMKICAgIH0pKSA6IG51bGw7CiAgfSwgW2FsbEZpZWxkc10pOwogIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpT3V0c2lkZUNsaWNrRGV0ZWN0b3IsIHsKICAgIG9uT3V0c2lkZUNsaWNrOiBvbkNsaWNrT3V0c2lkZQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3NoYXJlZF9pbXBvcnRzLkZvcm0sIHsKICAgIGZvcm06IGZvcm0sCiAgICBGb3JtV3JhcHBlcjogZm9ybVdyYXBwZXIsCiAgICBvblN1Ym1pdDogc3VibWl0Rm9ybSwKICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJjcmVhdGVGaWVsZEZvcm0iCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgY2xhc3NOYW1lOiAoMCwgX2NsYXNzbmFtZXMuZGVmYXVsdCkoJ21hcHBpbmdzRWRpdG9yX19jcmVhdGVGaWVsZFdyYXBwZXInLCB7CiAgICAgICdtYXBwaW5nc0VkaXRvcl9fY3JlYXRlRmllbGRXcmFwcGVyLS10b2dnbGUnOiBCb29sZWFuKG1heE5lc3RlZERlcHRoKSAmJiBtYXhOZXN0ZWREZXB0aCA+IDAsCiAgICAgICdtYXBwaW5nc0VkaXRvcl9fY3JlYXRlRmllbGRXcmFwcGVyLS1tdWx0aUZpZWxkJzogaXNNdWx0aUZpZWxkCiAgICB9KSwKICAgIHN0eWxlOiB7CiAgICAgIHBhZGRpbmdMZWZ0OiAiIi5jb25jYXQoaXNNdWx0aUZpZWxkID8gcGFkZGluZ0xlZnQgLSBfY29uc3RhbnRzLkVVSV9TSVpFICogMS41IC8vIEFzIHRoZXJlIGFyZSBubyAiTCIgYnVsbGV0IGxpc3Qgd2UgbmVlZCB0byBzdWJzdHJhY3Qgc29tZSBpbmRlbnQKICAgICAgOiBwYWRkaW5nTGVmdCwgInB4IikKICAgIH0KICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICBjbGFzc05hbWU6ICJtYXBwaW5nc0VkaXRvcl9fY3JlYXRlRmllbGRDb250ZW50IgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgIGd1dHRlclNpemU6ICJzIiwKICAgIGFsaWduSXRlbXM6ICJjZW50ZXIiCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfc2hhcmVkX2ltcG9ydHMuRm9ybURhdGFQcm92aWRlciwgewogICAgcGF0aHNUb1dhdGNoOiAidHlwZSIKICB9LCByZW5kZXJGb3JtRmllbGRzKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCBudWxsLCByZW5kZXJGb3JtQWN0aW9ucygpKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3NoYXJlZF9pbXBvcnRzLkZvcm1EYXRhUHJvdmlkZXIsIHsKICAgIHBhdGhzVG9XYXRjaDogWyd0eXBlJywgJ3N1YlR5cGUnXQogIH0sIHJlbmRlclBhcmFtZXRlcnNGb3JtKSkpKSk7Cn0pOwoKZXhwb3J0cy5DcmVhdGVGaWVsZCA9IENyZWF0ZUZpZWxkOw=="},null]}