{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/timelion/public/panels/timechart/schema.js","dependencies":[{"path":"src/legacy/core_plugins/timelion/public/panels/timechart/schema.js","mtime":1589249549930},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnRpbWVjaGFydEZuID0gdGltZWNoYXJ0Rm47CgpyZXF1aXJlKCIuLi8uLi8uLi8uLi92aXNfdHlwZV90aW1lbGlvbi9wdWJsaWMvZmxvdCIpOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfanF1ZXJ5ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJqcXVlcnkiKSk7Cgp2YXIgX21vbWVudFRpbWV6b25lID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJtb21lbnQtdGltZXpvbmUiKSk7Cgp2YXIgX3RpbWVmaWx0ZXIgPSByZXF1aXJlKCJ1aS90aW1lZmlsdGVyIik7Cgp2YXIgX29ic2VydmVfcmVzaXplID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuLi8uLi9saWIvb2JzZXJ2ZV9yZXNpemUiKSk7Cgp2YXIgX2xpYiA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uL3BsdWdpbnMvdGltZWxpb24vY29tbW9uL2xpYiIpOwoKdmFyIF90aWNrX2Zvcm1hdHRlcnMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi92aXNfdHlwZV90aW1lbGlvbi9wdWJsaWMvaGVscGVycy90aWNrX2Zvcm1hdHRlcnMiKTsKCnZhciBfeGF4aXNfZm9ybWF0dGVyID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vdmlzX3R5cGVfdGltZWxpb24vcHVibGljL2hlbHBlcnMveGF4aXNfZm9ybWF0dGVyIik7Cgp2YXIgX3RpY2tfZ2VuZXJhdG9yID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vdmlzX3R5cGVfdGltZWxpb24vcHVibGljL2hlbHBlcnMvdGlja19nZW5lcmF0b3IiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgIGRlZmF1bHQ6IG9iagogIH07Cn0KLyoKICogTGljZW5zZWQgdG8gRWxhc3RpY3NlYXJjaCBCLlYuIHVuZGVyIG9uZSBvciBtb3JlIGNvbnRyaWJ1dG9yCiAqIGxpY2Vuc2UgYWdyZWVtZW50cy4gU2VlIHRoZSBOT1RJQ0UgZmlsZSBkaXN0cmlidXRlZCB3aXRoCiAqIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdhcmRpbmcgY29weXJpZ2h0CiAqIG93bmVyc2hpcC4gRWxhc3RpY3NlYXJjaCBCLlYuIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIKICogdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7IHlvdSBtYXkKICogbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICovCi8vIEB0cy1pZ25vcmUKCgp2YXIgREVCT1VOQ0VfREVMQVkgPSA1MDsKCmZ1bmN0aW9uIHRpbWVjaGFydEZuKGRlcGVuZGVuY2llcykgewogIHZhciAkcm9vdFNjb3BlID0gZGVwZW5kZW5jaWVzLiRyb290U2NvcGUsCiAgICAgICRjb21waWxlID0gZGVwZW5kZW5jaWVzLiRjb21waWxlLAogICAgICB1aVNldHRpbmdzID0gZGVwZW5kZW5jaWVzLnVpU2V0dGluZ3M7CiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIGhlbHA6ICdEcmF3IGEgdGltZXNlcmllcyBjaGFydCcsCiAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCRzY29wZSwgJGVsZW0pIHsKICAgICAgICB2YXIgdGVtcGxhdGUgPSAnPGRpdiBjbGFzcz0iY2hhcnQtdG9wLXRpdGxlIj48L2Rpdj48ZGl2IGNsYXNzPSJjaGFydC1jYW52YXMiPjwvZGl2Pic7CiAgICAgICAgdmFyIGZvcm1hdHRlcnMgPSAoMCwgX3RpY2tfZm9ybWF0dGVycy50aWNrRm9ybWF0dGVycykoKTsKICAgICAgICB2YXIgZ2V0eEF4aXNGb3JtYXR0ZXIgPSAoMCwgX3hheGlzX2Zvcm1hdHRlci54YXhpc0Zvcm1hdHRlclByb3ZpZGVyKSh1aVNldHRpbmdzKTsKICAgICAgICB2YXIgZ2VuZXJhdGVUaWNrcyA9ICgwLCBfdGlja19nZW5lcmF0b3IuZ2VuZXJhdGVUaWNrc1Byb3ZpZGVyKSgpOyAvLyBUT0RPOiBJIHdvbmRlciBpZiB3ZSBzaG91bGQgc3VwcGx5IG91ciBvd24gbW9tZW50IHRoYXQgc2V0cyB0aGlzIGV2ZXJ5IHRpbWU/CiAgICAgICAgLy8gY291bGQganVzdCB1c2UgYW5ndWxhcidzIGluamVjdGlvbiB0byBwcm92aWRlIGEgbW9tZW50IHNlcnZpY2U/CgogICAgICAgIF9tb21lbnRUaW1lem9uZS5kZWZhdWx0LnR6LnNldERlZmF1bHQodWlTZXR0aW5ncy5nZXQoJ2RhdGVGb3JtYXQ6dHonKSk7CgogICAgICAgIHZhciByZW5kZXIgPSAkc2NvcGUuc2VyaWVzTGlzdC5yZW5kZXIgfHwge307CiAgICAgICAgJHNjb3BlLmNoYXJ0ID0gJHNjb3BlLnNlcmllc0xpc3QubGlzdDsKICAgICAgICAkc2NvcGUuaW50ZXJ2YWwgPSAkc2NvcGUuaW50ZXJ2YWw7CiAgICAgICAgJHNjb3BlLnNlYXJjaCA9ICRzY29wZS5zZWFyY2ggfHwgX2xvZGFzaC5kZWZhdWx0Lm5vb3A7CiAgICAgICAgdmFyIGxlZ2VuZFZhbHVlTnVtYmVyczsKICAgICAgICB2YXIgbGVnZW5kQ2FwdGlvbjsKCiAgICAgICAgdmFyIGRlYm91bmNlZFNldExlZ2VuZE51bWJlcnMgPSBfbG9kYXNoLmRlZmF1bHQuZGVib3VuY2Uoc2V0TGVnZW5kTnVtYmVycywgREVCT1VOQ0VfREVMQVksIHsKICAgICAgICAgIG1heFdhaXQ6IERFQk9VTkNFX0RFTEFZLAogICAgICAgICAgbGVhZGluZzogdHJ1ZSwKICAgICAgICAgIHRyYWlsaW5nOiBmYWxzZQogICAgICAgIH0pOyAvLyBlbnN1cmUgbGVnZW5kIGlzIHRoZSBzYW1lIGhlaWdodCB3aXRoIG9yIHdpdGhvdXQgYSBjYXB0aW9uIHNvIGxlZ2VuZCBpdGVtcyBkbyBub3QgbW92ZSBhcm91bmQKCgogICAgICAgIHZhciBlbXB0eUNhcHRpb24gPSAnPGJyPic7CiAgICAgICAgdmFyIGRlZmF1bHRPcHRpb25zID0gewogICAgICAgICAgeGF4aXM6IHsKICAgICAgICAgICAgbW9kZTogJ3RpbWUnLAogICAgICAgICAgICB0aWNrTGVuZ3RoOiA1LAogICAgICAgICAgICB0aW1lem9uZTogJ2Jyb3dzZXInCiAgICAgICAgICB9LAogICAgICAgICAgc2VsZWN0aW9uOiB7CiAgICAgICAgICAgIG1vZGU6ICd4JywKICAgICAgICAgICAgY29sb3I6ICcjY2NjJwogICAgICAgICAgfSwKICAgICAgICAgIGNyb3NzaGFpcjogewogICAgICAgICAgICBtb2RlOiAneCcsCiAgICAgICAgICAgIGNvbG9yOiAnI0M2NicsCiAgICAgICAgICAgIGxpbmVXaWR0aDogMgogICAgICAgICAgfSwKICAgICAgICAgIGdyaWQ6IHsKICAgICAgICAgICAgc2hvdzogcmVuZGVyLmdyaWQsCiAgICAgICAgICAgIGJvcmRlcldpZHRoOiAwLAogICAgICAgICAgICBib3JkZXJDb2xvcjogbnVsbCwKICAgICAgICAgICAgbWFyZ2luOiAxMCwKICAgICAgICAgICAgaG92ZXJhYmxlOiB0cnVlLAogICAgICAgICAgICBhdXRvSGlnaGxpZ2h0OiBmYWxzZQogICAgICAgICAgfSwKICAgICAgICAgIGxlZ2VuZDogewogICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2IoMjU1LDI1NSwyNTUsMCknLAogICAgICAgICAgICBwb3NpdGlvbjogJ253JywKICAgICAgICAgICAgbGFiZWxCb3hCb3JkZXJDb2xvcjogJ3JnYigyNTUsMjU1LDI1NSwwKScsCiAgICAgICAgICAgIGxhYmVsRm9ybWF0dGVyOiBmdW5jdGlvbiBsYWJlbEZvcm1hdHRlcihsYWJlbCwgc2VyaWVzKSB7CiAgICAgICAgICAgICAgdmFyIHdyYXBwZXJTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgICAgIHZhciBsYWJlbFNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICAgICAgdmFyIG51bWJlclNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICAgICAgd3JhcHBlclNwYW4uc2V0QXR0cmlidXRlKCdjbGFzcycsICduZ0xlZ2VuZFZhbHVlJyk7CiAgICAgICAgICAgICAgd3JhcHBlclNwYW4uc2V0QXR0cmlidXRlKCdrYm4tYWNjZXNzaWJsZS1jbGljaycsICcnKTsKICAgICAgICAgICAgICB3cmFwcGVyU3Bhbi5zZXRBdHRyaWJ1dGUoJ25nLWNsaWNrJywgInRvZ2dsZVNlcmllcygiLmNvbmNhdChzZXJpZXMuX2lkLCAiKSIpKTsKICAgICAgICAgICAgICB3cmFwcGVyU3Bhbi5zZXRBdHRyaWJ1dGUoJ25nLWZvY3VzJywgImZvY3VzU2VyaWVzKCIuY29uY2F0KHNlcmllcy5faWQsICIpIikpOwogICAgICAgICAgICAgIHdyYXBwZXJTcGFuLnNldEF0dHJpYnV0ZSgnbmctbW91c2VvdmVyJywgImhpZ2hsaWdodFNlcmllcygiLmNvbmNhdChzZXJpZXMuX2lkLCAiKSIpKTsKICAgICAgICAgICAgICBsYWJlbFNwYW4uc2V0QXR0cmlidXRlKCduZy1ub24tYmluZGFibGUnLCAnJyk7CiAgICAgICAgICAgICAgbGFiZWxTcGFuLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGxhYmVsKSk7CiAgICAgICAgICAgICAgbnVtYmVyU3Bhbi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ25nTGVnZW5kVmFsdWVOdW1iZXInKTsKICAgICAgICAgICAgICB3cmFwcGVyU3Bhbi5hcHBlbmRDaGlsZChsYWJlbFNwYW4pOwogICAgICAgICAgICAgIHdyYXBwZXJTcGFuLmFwcGVuZENoaWxkKG51bWJlclNwYW4pOwogICAgICAgICAgICAgIHJldHVybiB3cmFwcGVyU3Bhbi5vdXRlckhUTUw7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBjb2xvcnM6IFsnIzAxQTRBNCcsICcjQzY2JywgJyNEMEQxMDInLCAnIzYxNjE2MScsICcjMDBBMUNCJywgJyMzMjc0MkMnLCAnI0YxOEQwNScsICcjMTEzRjhDJywgJyM2MUFFMjQnLCAnI0Q3MDA2MCddCiAgICAgICAgfTsKICAgICAgICB2YXIgb3JpZ2luYWxDb2xvck1hcCA9IG5ldyBNYXAoKTsKICAgICAgICAkc2NvcGUuY2hhcnQuZm9yRWFjaChmdW5jdGlvbiAoc2VyaWVzLCBzZXJpZXNJbmRleCkgewogICAgICAgICAgaWYgKCFzZXJpZXMuY29sb3IpIHsKICAgICAgICAgICAgdmFyIGNvbG9ySW5kZXggPSBzZXJpZXNJbmRleCAlIGRlZmF1bHRPcHRpb25zLmNvbG9ycy5sZW5ndGg7CiAgICAgICAgICAgIHNlcmllcy5jb2xvciA9IGRlZmF1bHRPcHRpb25zLmNvbG9yc1tjb2xvckluZGV4XTsKICAgICAgICAgIH0KCiAgICAgICAgICBvcmlnaW5hbENvbG9yTWFwLnNldChzZXJpZXMsIHNlcmllcy5jb2xvcik7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGhpZ2hsaWdodGVkU2VyaWVzOwogICAgICAgIHZhciBmb2N1c2VkU2VyaWVzOwoKICAgICAgICBmdW5jdGlvbiB1bmhpZ2hsaWdodFNlcmllcygpIHsKICAgICAgICAgIGlmIChoaWdobGlnaHRlZFNlcmllcyA9PT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgaGlnaGxpZ2h0ZWRTZXJpZXMgPSBudWxsOwogICAgICAgICAgZm9jdXNlZFNlcmllcyA9IG51bGw7CiAgICAgICAgICAkc2NvcGUuY2hhcnQuZm9yRWFjaChmdW5jdGlvbiAoc2VyaWVzKSB7CiAgICAgICAgICAgIHNlcmllcy5jb2xvciA9IG9yaWdpbmFsQ29sb3JNYXAuZ2V0KHNlcmllcyk7IC8vIHJlc2V0IHRoZSBjb2xvcnMKICAgICAgICAgIH0pOwogICAgICAgICAgZHJhd1Bsb3QoJHNjb3BlLmNoYXJ0KTsKICAgICAgICB9CgogICAgICAgICRzY29wZS5oaWdobGlnaHRTZXJpZXMgPSBfbG9kYXNoLmRlZmF1bHQuZGVib3VuY2UoZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgICBpZiAoaGlnaGxpZ2h0ZWRTZXJpZXMgPT09IGlkKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBoaWdobGlnaHRlZFNlcmllcyA9IGlkOwogICAgICAgICAgJHNjb3BlLmNoYXJ0LmZvckVhY2goZnVuY3Rpb24gKHNlcmllcywgc2VyaWVzSW5kZXgpIHsKICAgICAgICAgICAgaWYgKHNlcmllc0luZGV4ICE9PSBpZCkgewogICAgICAgICAgICAgIHNlcmllcy5jb2xvciA9ICdyZ2JhKDEyOCwxMjgsMTI4LDAuMSknOyAvLyBtYXJrIGFzIGdyZXkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBzZXJpZXMuY29sb3IgPSBvcmlnaW5hbENvbG9yTWFwLmdldChzZXJpZXMpOyAvLyBjb2xvciBpdCBsaWtlIGl0IHdhcwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIGRyYXdQbG90KCRzY29wZS5jaGFydCk7CiAgICAgICAgfSwgREVCT1VOQ0VfREVMQVkpOwoKICAgICAgICAkc2NvcGUuZm9jdXNTZXJpZXMgPSBmdW5jdGlvbiAoaWQpIHsKICAgICAgICAgIGZvY3VzZWRTZXJpZXMgPSBpZDsKICAgICAgICAgICRzY29wZS5oaWdobGlnaHRTZXJpZXMoaWQpOwogICAgICAgIH07CgogICAgICAgICRzY29wZS50b2dnbGVTZXJpZXMgPSBmdW5jdGlvbiAoaWQpIHsKICAgICAgICAgIHZhciBzZXJpZXMgPSAkc2NvcGUuY2hhcnRbaWRdOwogICAgICAgICAgc2VyaWVzLl9oaWRlID0gIXNlcmllcy5faGlkZTsKICAgICAgICAgIGRyYXdQbG90KCRzY29wZS5jaGFydCk7CiAgICAgICAgfTsKCiAgICAgICAgdmFyIGNhbmNlbFJlc2l6ZSA9ICgwLCBfb2JzZXJ2ZV9yZXNpemUuZGVmYXVsdCkoJGVsZW0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGRyYXdQbG90KCRzY29wZS5jaGFydCk7CiAgICAgICAgfSk7CiAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBjYW5jZWxSZXNpemUoKTsKICAgICAgICAgICRlbGVtLm9mZigncGxvdGhvdmVyJyk7CiAgICAgICAgICAkZWxlbS5vZmYoJ3Bsb3RzZWxlY3RlZCcpOwogICAgICAgICAgJGVsZW0ub2ZmKCdtb3VzZWxlYXZlJyk7CiAgICAgICAgfSk7CiAgICAgICAgJGVsZW0ub24oJ3Bsb3Rob3ZlcicsIGZ1bmN0aW9uIChldmVudCwgcG9zLCBpdGVtKSB7CiAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3RpbWVsaW9uUGxvdEhvdmVyJywgZXZlbnQsIHBvcywgaXRlbSk7CiAgICAgICAgfSk7CiAgICAgICAgJGVsZW0ub24oJ3Bsb3RzZWxlY3RlZCcsIGZ1bmN0aW9uIChldmVudCwgcmFuZ2VzKSB7CiAgICAgICAgICBfdGltZWZpbHRlci50aW1lZmlsdGVyLnNldFRpbWUoewogICAgICAgICAgICBmcm9tOiAoMCwgX21vbWVudFRpbWV6b25lLmRlZmF1bHQpKHJhbmdlcy54YXhpcy5mcm9tKSwKICAgICAgICAgICAgdG86ICgwLCBfbW9tZW50VGltZXpvbmUuZGVmYXVsdCkocmFuZ2VzLnhheGlzLnRvKQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgJGVsZW0ub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3RpbWVsaW9uUGxvdExlYXZlJyk7CiAgICAgICAgfSk7CiAgICAgICAgJHNjb3BlLiRvbigndGltZWxpb25QbG90SG92ZXInLCBmdW5jdGlvbiAoYW5ndWxhckV2ZW50LCBmbG90RXZlbnQsIHBvcykgewogICAgICAgICAgaWYgKCEkc2NvcGUucGxvdCkgcmV0dXJuOwogICAgICAgICAgJHNjb3BlLnBsb3Quc2V0Q3Jvc3NoYWlyKHBvcyk7CiAgICAgICAgICBkZWJvdW5jZWRTZXRMZWdlbmROdW1iZXJzKHBvcyk7CiAgICAgICAgfSk7CiAgICAgICAgJHNjb3BlLiRvbigndGltZWxpb25QbG90TGVhdmUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoISRzY29wZS5wbG90KSByZXR1cm47CiAgICAgICAgICAkc2NvcGUucGxvdC5jbGVhckNyb3NzaGFpcigpOwogICAgICAgICAgY2xlYXJMZWdlbmROdW1iZXJzKCk7CiAgICAgICAgfSk7IC8vIFNoYW1lbGVzc2x5IGJvcnJvd2VkIGZyb20gdGhlIGZsb3RDcm9zc2hhaXJzIGV4YW1wbGUKCiAgICAgICAgZnVuY3Rpb24gc2V0TGVnZW5kTnVtYmVycyhwb3MpIHsKICAgICAgICAgIHVuaGlnaGxpZ2h0U2VyaWVzKCk7CiAgICAgICAgICB2YXIgcGxvdCA9ICRzY29wZS5wbG90OwogICAgICAgICAgdmFyIGF4ZXMgPSBwbG90LmdldEF4ZXMoKTsKCiAgICAgICAgICBpZiAocG9zLnggPCBheGVzLnhheGlzLm1pbiB8fCBwb3MueCA+IGF4ZXMueGF4aXMubWF4KSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgaTsKICAgICAgICAgIHZhciBkYXRhc2V0ID0gcGxvdC5nZXREYXRhKCk7CgogICAgICAgICAgaWYgKGxlZ2VuZENhcHRpb24pIHsKICAgICAgICAgICAgbGVnZW5kQ2FwdGlvbi50ZXh0KCgwLCBfbW9tZW50VGltZXpvbmUuZGVmYXVsdCkocG9zLngpLmZvcm1hdChfbG9kYXNoLmRlZmF1bHQuZ2V0KGRhdGFzZXQsICdbMF0uX2dsb2JhbC5sZWdlbmQudGltZUZvcm1hdCcsIF9saWIuREVGQVVMVF9USU1FX0ZPUk1BVCkpKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcCgpIHsKICAgICAgICAgICAgdmFyIHNlcmllcyA9IGRhdGFzZXRbaV07CiAgICAgICAgICAgIHZhciB1c2VOZWFyZXN0UG9pbnQgPSBzZXJpZXMubGluZXMuc2hvdyAmJiAhc2VyaWVzLmxpbmVzLnN0ZXBzOwoKICAgICAgICAgICAgdmFyIHByZWNpc2lvbiA9IF9sb2Rhc2guZGVmYXVsdC5nZXQoc2VyaWVzLCAnX21ldGEucHJlY2lzaW9uJywgMik7CgogICAgICAgICAgICBpZiAoc2VyaWVzLl9oaWRlKSByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgdmFyIGN1cnJlbnRQb2ludCA9IHNlcmllcy5kYXRhLmZpbmQoZnVuY3Rpb24gKHBvaW50LCBpbmRleCkgewogICAgICAgICAgICAgIGlmIChpbmRleCArIDEgPT09IHNlcmllcy5kYXRhLmxlbmd0aCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAodXNlTmVhcmVzdFBvaW50KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcG9zLnggLSBwb2ludFswXSA8IHNlcmllcy5kYXRhW2luZGV4ICsgMV1bMF0gLSBwb3MueDsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIHBvcy54IDwgc2VyaWVzLmRhdGFbaW5kZXggKyAxXVswXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgeSA9IGN1cnJlbnRQb2ludFsxXTsKCiAgICAgICAgICAgIGlmICh5ICE9IG51bGwpIHsKICAgICAgICAgICAgICB2YXIgbGFiZWwgPSB5LnRvRml4ZWQocHJlY2lzaW9uKTsKCiAgICAgICAgICAgICAgaWYgKHNlcmllcy55YXhpcy50aWNrRm9ybWF0dGVyKSB7CiAgICAgICAgICAgICAgICBsYWJlbCA9IHNlcmllcy55YXhpcy50aWNrRm9ybWF0dGVyKGxhYmVsLCBzZXJpZXMueWF4aXMpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgbGVnZW5kVmFsdWVOdW1iZXJzLmVxKGkpLnRleHQoIigiLmNvbmNhdChsYWJlbCwgIikiKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbGVnZW5kVmFsdWVOdW1iZXJzLmVxKGkpLmVtcHR5KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CgogICAgICAgICAgZm9yIChpID0gMDsgaSA8IGRhdGFzZXQubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgdmFyIF9yZXQgPSBfbG9vcCgpOwoKICAgICAgICAgICAgaWYgKF9yZXQgPT09ICJjb250aW51ZSIpIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xlYXJMZWdlbmROdW1iZXJzKCkgewogICAgICAgICAgaWYgKGxlZ2VuZENhcHRpb24pIHsKICAgICAgICAgICAgbGVnZW5kQ2FwdGlvbi5odG1sKGVtcHR5Q2FwdGlvbik7CiAgICAgICAgICB9CgogICAgICAgICAgX2xvZGFzaC5kZWZhdWx0LmVhY2gobGVnZW5kVmFsdWVOdW1iZXJzLCBmdW5jdGlvbiAobnVtKSB7CiAgICAgICAgICAgICgwLCBfanF1ZXJ5LmRlZmF1bHQpKG51bSkuZW1wdHkoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdmFyIGxlZ2VuZFNjb3BlID0gJHNjb3BlLiRuZXcoKTsKCiAgICAgICAgZnVuY3Rpb24gZHJhd1Bsb3QocGxvdENvbmZpZykgewogICAgICAgICAgaWYgKCEoMCwgX2pxdWVyeS5kZWZhdWx0KSgnLmNoYXJ0LWNhbnZhcycsICRlbGVtKS5sZW5ndGgpICRlbGVtLmh0bWwodGVtcGxhdGUpOwogICAgICAgICAgdmFyIGNhbnZhc0VsZW0gPSAoMCwgX2pxdWVyeS5kZWZhdWx0KSgnLmNoYXJ0LWNhbnZhcycsICRlbGVtKTsgLy8gd2UgY2FuJ3QgdXNlIGAkLnBsb3RgIHRvIGRyYXcgdGhlIGNoYXJ0IHdoZW4gdGhlIGhlaWdodCBvciB3aWR0aCBpcyAwCiAgICAgICAgICAvLyBzbywgd2UnbGwgbmVlZCBhbm90aGVyIGV2ZW50IHRvIHRyaWdnZXIgZHJhd1Bsb3QgdG8gYWN0dWFsbHkgZHJhdyBpdAoKICAgICAgICAgIGlmIChjYW52YXNFbGVtLmhlaWdodCgpID09PSAwIHx8IGNhbnZhc0VsZW0ud2lkdGgoKSA9PT0gMCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHRpdGxlID0gKDAsIF9sb2Rhc2guZGVmYXVsdCkocGxvdENvbmZpZykubWFwKCdfdGl0bGUnKS5jb21wYWN0KCkubGFzdCgpOwogICAgICAgICAgKDAsIF9qcXVlcnkuZGVmYXVsdCkoJy5jaGFydC10b3AtdGl0bGUnLCAkZWxlbSkudGV4dCh0aXRsZSA9PSBudWxsID8gJycgOiB0aXRsZSk7CgogICAgICAgICAgdmFyIG9wdGlvbnMgPSBfbG9kYXNoLmRlZmF1bHQuY2xvbmVEZWVwKGRlZmF1bHRPcHRpb25zKTsgLy8gR2V0IHRoZSBYLWF4aXMgdGljayBmb3JtYXQKCgogICAgICAgICAgdmFyIHRpbWUgPSBfdGltZWZpbHRlci50aW1lZmlsdGVyLmdldEJvdW5kcygpOwoKICAgICAgICAgIHZhciBpbnRlcnZhbCA9ICgwLCBfbGliLmNhbGN1bGF0ZUludGVydmFsKSh0aW1lLm1pbi52YWx1ZU9mKCksIHRpbWUubWF4LnZhbHVlT2YoKSwgdWlTZXR0aW5ncy5nZXQoJ3RpbWVsaW9uOnRhcmdldF9idWNrZXRzJykgfHwgMjAwLCAkc2NvcGUuaW50ZXJ2YWwsIHVpU2V0dGluZ3MuZ2V0KCd0aW1lbGlvbjptaW5faW50ZXJ2YWwnKSB8fCAnMW1zJyk7CiAgICAgICAgICB2YXIgZm9ybWF0ID0gZ2V0eEF4aXNGb3JtYXR0ZXIoaW50ZXJ2YWwpOyAvLyBVc2UgbW9tZW50IHRvIGZvcm1hdCB0aWNrcyBzbyB3ZSBnZXQgdGltZXpvbmUgY29ycmVjdGlvbgoKICAgICAgICAgIG9wdGlvbnMueGF4aXMudGlja0Zvcm1hdHRlciA9IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgcmV0dXJuICgwLCBfbW9tZW50VGltZXpvbmUuZGVmYXVsdCkodmFsKS5mb3JtYXQoZm9ybWF0KTsKICAgICAgICAgIH07IC8vIENhbGN1bGF0ZSBob3cgbWFueSB0aWNrcyBjYW4gZml0IG9uIHRoZSBheGlzCgoKICAgICAgICAgIHZhciB0aWNrTGV0dGVyV2lkdGggPSA3OwogICAgICAgICAgdmFyIHRpY2tQYWRkaW5nID0gNDU7CiAgICAgICAgICBvcHRpb25zLnhheGlzLnRpY2tzID0gTWF0aC5mbG9vcigkZWxlbS53aWR0aCgpIC8gKGZvcm1hdC5sZW5ndGggKiB0aWNrTGV0dGVyV2lkdGggKyB0aWNrUGFkZGluZykpOwoKICAgICAgICAgIHZhciBzZXJpZXMgPSBfbG9kYXNoLmRlZmF1bHQubWFwKHBsb3RDb25maWcsIGZ1bmN0aW9uIChzZXJpZSwgaW5kZXgpIHsKICAgICAgICAgICAgc2VyaWUgPSBfbG9kYXNoLmRlZmF1bHQuY2xvbmVEZWVwKF9sb2Rhc2guZGVmYXVsdC5kZWZhdWx0cyhzZXJpZSwgewogICAgICAgICAgICAgIHNoYWRvd1NpemU6IDAsCiAgICAgICAgICAgICAgbGluZXM6IHsKICAgICAgICAgICAgICAgIGxpbmVXaWR0aDogMwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkpOwogICAgICAgICAgICBzZXJpZS5faWQgPSBpbmRleDsKCiAgICAgICAgICAgIGlmIChzZXJpZS5jb2xvcikgewogICAgICAgICAgICAgIHZhciBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgICAgIHNwYW4uc3R5bGUuY29sb3IgPSBzZXJpZS5jb2xvcjsKICAgICAgICAgICAgICBzZXJpZS5jb2xvciA9IHNwYW4uc3R5bGUuY29sb3I7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChzZXJpZS5faGlkZSkgewogICAgICAgICAgICAgIHNlcmllLmRhdGEgPSBbXTsKICAgICAgICAgICAgICBzZXJpZS5zdGFjayA9IGZhbHNlOyAvLyBzZXJpZS5jb2xvciA9ICIjZGRkIjsKCiAgICAgICAgICAgICAgc2VyaWUubGFiZWwgPSAnKGhpZGRlbikgJyArIHNlcmllLmxhYmVsOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc2VyaWUuX2dsb2JhbCkgewogICAgICAgICAgICAgIF9sb2Rhc2guZGVmYXVsdC5tZXJnZShvcHRpb25zLCBzZXJpZS5fZ2xvYmFsLCBmdW5jdGlvbiAob2JqVmFsLCBzcmNWYWwpIHsKICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMga2luZCBvZiBncm9zcywgaXQgbWVhbnMgdGhhdCB5b3UgY2FuJ3QgcmVwbGFjZSBhIGdsb2JhbCB2YWx1ZSB3aXRoIGEgbnVsbAogICAgICAgICAgICAgICAgLy8gYmVzdCB5b3UgY2FuIGRvIGlzIGFuIGVtcHR5IHN0cmluZy4gRGVhbCB3aXRoIGl0LgogICAgICAgICAgICAgICAgaWYgKG9ialZhbCA9PSBudWxsKSByZXR1cm4gc3JjVmFsOwogICAgICAgICAgICAgICAgaWYgKHNyY1ZhbCA9PSBudWxsKSByZXR1cm4gb2JqVmFsOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gc2VyaWU7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAob3B0aW9ucy55YXhlcykgewogICAgICAgICAgICBvcHRpb25zLnlheGVzLmZvckVhY2goZnVuY3Rpb24gKHlheGlzKSB7CiAgICAgICAgICAgICAgaWYgKHlheGlzICYmIHlheGlzLnVuaXRzKSB7CiAgICAgICAgICAgICAgICB5YXhpcy50aWNrRm9ybWF0dGVyID0gZm9ybWF0dGVyc1t5YXhpcy51bml0cy50eXBlXTsKICAgICAgICAgICAgICAgIHZhciBieXRlTW9kZXMgPSBbJ2J5dGVzJywgJ2J5dGVzL3MnXTsKCiAgICAgICAgICAgICAgICBpZiAoYnl0ZU1vZGVzLmluY2x1ZGVzKHlheGlzLnVuaXRzLnR5cGUpKSB7CiAgICAgICAgICAgICAgICAgIHlheGlzLnRpY2tHZW5lcmF0b3IgPSBnZW5lcmF0ZVRpY2tzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IC8vIEB0cy1pZ25vcmUKCgogICAgICAgICAgJHNjb3BlLnBsb3QgPSBfanF1ZXJ5LmRlZmF1bHQucGxvdChjYW52YXNFbGVtLCBfbG9kYXNoLmRlZmF1bHQuY29tcGFjdChzZXJpZXMpLCBvcHRpb25zKTsKCiAgICAgICAgICBpZiAoJHNjb3BlLnBsb3QpIHsKICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCd0aW1lbGlvbkNoYXJ0UmVuZGVyZWQnKTsKICAgICAgICAgIH0KCiAgICAgICAgICBsZWdlbmRTY29wZS4kZGVzdHJveSgpOwogICAgICAgICAgbGVnZW5kU2NvcGUgPSAkc2NvcGUuJG5ldygpOyAvLyBVc2VkIHRvIHRvZ2dsZSB0aGUgc2VyaWVzLCBhbmQgZm9yIGRpc3BsYXlpbmcgdmFsdWVzIG9uIGhvdmVyCgogICAgICAgICAgbGVnZW5kVmFsdWVOdW1iZXJzID0gY2FudmFzRWxlbS5maW5kKCcubmdMZWdlbmRWYWx1ZU51bWJlcicpOwoKICAgICAgICAgIF9sb2Rhc2guZGVmYXVsdC5lYWNoKGNhbnZhc0VsZW0uZmluZCgnLm5nTGVnZW5kVmFsdWUnKSwgZnVuY3Rpb24gKGVsZW0pIHsKICAgICAgICAgICAgJGNvbXBpbGUoZWxlbSkobGVnZW5kU2NvcGUpOwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKF9sb2Rhc2guZGVmYXVsdC5nZXQoJHNjb3BlLnBsb3QuZ2V0RGF0YSgpLCAnWzBdLl9nbG9iYWwubGVnZW5kLnNob3dUaW1lJywgdHJ1ZSkpIHsKICAgICAgICAgICAgbGVnZW5kQ2FwdGlvbiA9ICgwLCBfanF1ZXJ5LmRlZmF1bHQpKCc8Y2FwdGlvbiBjbGFzcz0idGltQ2hhcnRfX2xlZ2VuZENhcHRpb24iPjwvY2FwdGlvbj4nKTsKICAgICAgICAgICAgbGVnZW5kQ2FwdGlvbi5odG1sKGVtcHR5Q2FwdGlvbik7CiAgICAgICAgICAgIGNhbnZhc0VsZW0uZmluZCgnZGl2LmxlZ2VuZCB0YWJsZScpLmFwcGVuZChsZWdlbmRDYXB0aW9uKTsgLy8gbGVnZW5kIGhhcyBiZWVuIHJlLWNyZWF0ZWQuIEFwcGx5IGZvY3VzIG9uIGxlZ2VuZCBlbGVtZW50IHdoZW4gcHJldmlvdXNseSBzZXQKCiAgICAgICAgICAgIGlmIChmb2N1c2VkU2VyaWVzIHx8IGZvY3VzZWRTZXJpZXMgPT09IDApIHsKICAgICAgICAgICAgICB2YXIgJGxlZ2VuZExhYmVscyA9IGNhbnZhc0VsZW0uZmluZCgnZGl2LmxlZ2VuZCB0YWJsZSAubGVnZW5kTGFiZWw+c3BhbicpOwogICAgICAgICAgICAgICRsZWdlbmRMYWJlbHMuZ2V0KGZvY3VzZWRTZXJpZXMpLmZvY3VzKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICRzY29wZS4kd2F0Y2goJ2NoYXJ0JywgZHJhd1Bsb3QpOwogICAgICB9CiAgICB9OwogIH07Cn0="},null]}