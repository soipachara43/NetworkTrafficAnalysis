{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/kibana/public/management/sections/objects/lib/resolve_saved_objects.js","dependencies":[{"path":"src/legacy/core_plugins/kibana/public/management/sections/objects/lib/resolve_saved_objects.js","mtime":1589249549858},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnJlc29sdmVJbmRleFBhdHRlcm5Db25mbGljdHMgPSByZXNvbHZlSW5kZXhQYXR0ZXJuQ29uZmxpY3RzOwpleHBvcnRzLnNhdmVPYmplY3RzID0gc2F2ZU9iamVjdHM7CmV4cG9ydHMuc2F2ZU9iamVjdCA9IHNhdmVPYmplY3Q7CmV4cG9ydHMucmVzb2x2ZVNhdmVkU2VhcmNoZXMgPSByZXNvbHZlU2F2ZWRTZWFyY2hlczsKZXhwb3J0cy5yZXNvbHZlU2F2ZWRPYmplY3RzID0gcmVzb2x2ZVNhdmVkT2JqZWN0czsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7IH0gfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIHNlbGYgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7IGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7IH0gZnVuY3Rpb24gX3Rocm93KGVycikgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7IH0gX25leHQodW5kZWZpbmVkKTsgfSk7IH07IH0KCmZ1bmN0aW9uIGdldFNhdmVkT2JqZWN0KF94LCBfeDIpIHsKICByZXR1cm4gX2dldFNhdmVkT2JqZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9nZXRTYXZlZE9iamVjdCgpIHsKICBfZ2V0U2F2ZWRPYmplY3QgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShkb2MsIHNlcnZpY2VzKSB7CiAgICB2YXIgc2VydmljZSwgb2JqOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBzZXJ2aWNlID0gc2VydmljZXMuZmluZChmdW5jdGlvbiAoc2VydmljZSkgewogICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlLnR5cGUgPT09IGRvYy5fdHlwZTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAoc2VydmljZSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICByZXR1cm4gc2VydmljZS5nZXQoKTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIG9iaiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIG9iai5pZCA9IGRvYy5faWQ7CiAgICAgICAgICAgIG9iai5taWdyYXRpb25WZXJzaW9uID0gZG9jLl9taWdyYXRpb25WZXJzaW9uOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBvYmopOwoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CiAgcmV0dXJuIF9nZXRTYXZlZE9iamVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBhZGRKc29uRmllbGRUb0luZGV4UGF0dGVybih0YXJnZXQsIHNvdXJjZVN0cmluZywgZmllbGROYW1lLCBpbmRleE5hbWUpIHsKICBpZiAoc291cmNlU3RyaW5nKSB7CiAgICB0cnkgewogICAgICB0YXJnZXRbZmllbGROYW1lXSA9IEpTT04ucGFyc2Uoc291cmNlU3RyaW5nKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcihfaTE4bi5pMThuLnRyYW5zbGF0ZSgna2JuLm1hbmFnZW1lbnQub2JqZWN0cy5wYXJzaW5nRmllbGRFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdFcnJvciBlbmNvdW50ZXJlZCBwYXJzaW5nIHtmaWVsZE5hbWV9IGZvciBpbmRleCBwYXR0ZXJuIHtpbmRleE5hbWV9OiB7ZXJyb3JNZXNzYWdlfScsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBmaWVsZE5hbWU6IGZpZWxkTmFtZSwKICAgICAgICAgIGluZGV4TmFtZTogaW5kZXhOYW1lLAogICAgICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvci5tZXNzYWdlCiAgICAgICAgfQogICAgICB9KSk7CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBpbXBvcnRJbmRleFBhdHRlcm4oX3gzLCBfeDQsIF94NSwgX3g2KSB7CiAgcmV0dXJuIF9pbXBvcnRJbmRleFBhdHRlcm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX2ltcG9ydEluZGV4UGF0dGVybigpIHsKICBfaW1wb3J0SW5kZXhQYXR0ZXJuID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGRvYywgaW5kZXhQYXR0ZXJucywgb3ZlcndyaXRlQWxsLCBjb25maXJtTW9kYWxQcm9taXNlKSB7CiAgICB2YXIgZW1wdHlQYXR0ZXJuLCBfZG9jJF9zb3VyY2UsIHRpdGxlLCB0aW1lRmllbGROYW1lLCBmaWVsZHMsIGZpZWxkRm9ybWF0TWFwLCBzb3VyY2VGaWx0ZXJzLCB0eXBlLCB0eXBlTWV0YSwgaW1wb3J0ZWRJbmRleFBhdHRlcm4sIG5ld0lkLCBpc0NvbmZpcm1lZDsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBpbmRleFBhdHRlcm5zLm1ha2UoKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGVtcHR5UGF0dGVybiA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICBfZG9jJF9zb3VyY2UgPSBkb2MuX3NvdXJjZSwgdGl0bGUgPSBfZG9jJF9zb3VyY2UudGl0bGUsIHRpbWVGaWVsZE5hbWUgPSBfZG9jJF9zb3VyY2UudGltZUZpZWxkTmFtZSwgZmllbGRzID0gX2RvYyRfc291cmNlLmZpZWxkcywgZmllbGRGb3JtYXRNYXAgPSBfZG9jJF9zb3VyY2UuZmllbGRGb3JtYXRNYXAsIHNvdXJjZUZpbHRlcnMgPSBfZG9jJF9zb3VyY2Uuc291cmNlRmlsdGVycywgdHlwZSA9IF9kb2MkX3NvdXJjZS50eXBlLCB0eXBlTWV0YSA9IF9kb2MkX3NvdXJjZS50eXBlTWV0YTsKICAgICAgICAgICAgaW1wb3J0ZWRJbmRleFBhdHRlcm4gPSB7CiAgICAgICAgICAgICAgaWQ6IGRvYy5faWQsCiAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgICAgICAgIHRpbWVGaWVsZE5hbWU6IHRpbWVGaWVsZE5hbWUKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGlmICh0eXBlKSB7CiAgICAgICAgICAgICAgaW1wb3J0ZWRJbmRleFBhdHRlcm4udHlwZSA9IHR5cGU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGFkZEpzb25GaWVsZFRvSW5kZXhQYXR0ZXJuKGltcG9ydGVkSW5kZXhQYXR0ZXJuLCBmaWVsZHMsICdmaWVsZHMnLCB0aXRsZSk7CiAgICAgICAgICAgIGFkZEpzb25GaWVsZFRvSW5kZXhQYXR0ZXJuKGltcG9ydGVkSW5kZXhQYXR0ZXJuLCBmaWVsZEZvcm1hdE1hcCwgJ2ZpZWxkRm9ybWF0TWFwJywgdGl0bGUpOwogICAgICAgICAgICBhZGRKc29uRmllbGRUb0luZGV4UGF0dGVybihpbXBvcnRlZEluZGV4UGF0dGVybiwgc291cmNlRmlsdGVycywgJ3NvdXJjZUZpbHRlcnMnLCB0aXRsZSk7CiAgICAgICAgICAgIGFkZEpzb25GaWVsZFRvSW5kZXhQYXR0ZXJuKGltcG9ydGVkSW5kZXhQYXR0ZXJuLCB0eXBlTWV0YSwgJ3R5cGVNZXRhJywgdGl0bGUpOwogICAgICAgICAgICBPYmplY3QuYXNzaWduKGVtcHR5UGF0dGVybiwgaW1wb3J0ZWRJbmRleFBhdHRlcm4pOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEzOwogICAgICAgICAgICByZXR1cm4gZW1wdHlQYXR0ZXJuLmNyZWF0ZShvdmVyd3JpdGVBbGwpOwoKICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIG5ld0lkID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICBpZiAobmV3SWQpIHsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI1OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE3OwogICAgICAgICAgICByZXR1cm4gY29uZmlybU1vZGFsUHJvbWlzZShfaTE4bi5pMThuLnRyYW5zbGF0ZSgna2JuLm1hbmFnZW1lbnQuaW5kZXhQYXR0ZXJuLmNvbmZpcm1PdmVyd3JpdGVMYWJlbCcsIHsKICAgICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnRpdGxlCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBvdmVyd3JpdGUgJ3t0aXRsZX0nPyIKICAgICAgICAgICAgfSksIHsKICAgICAgICAgICAgICB0aXRsZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5tYW5hZ2VtZW50LmluZGV4UGF0dGVybi5jb25maXJtT3ZlcndyaXRlVGl0bGUnLCB7CiAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ092ZXJ3cml0ZSB7dHlwZX0/JywKICAgICAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCdrYm4ubWFuYWdlbWVudC5pbmRleFBhdHRlcm4uY29uZmlybU92ZXJ3cml0ZUJ1dHRvbicsIHsKICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnT3ZlcndyaXRlJwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIGlzQ29uZmlybWVkID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICBpZiAoIWlzQ29uZmlybWVkKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMTsKICAgICAgICAgICAgcmV0dXJuIGVtcHR5UGF0dGVybi5jcmVhdGUodHJ1ZSk7CgogICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgbmV3SWQgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyNTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgIGluZGV4UGF0dGVybnMuY2xlYXJDYWNoZShuZXdJZCk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBuZXdJZCk7CgogICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogIH0pKTsKICByZXR1cm4gX2ltcG9ydEluZGV4UGF0dGVybi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBpbXBvcnREb2N1bWVudChfeDcsIF94OCwgX3g5KSB7CiAgcmV0dXJuIF9pbXBvcnREb2N1bWVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfaW1wb3J0RG9jdW1lbnQoKSB7CiAgX2ltcG9ydERvY3VtZW50ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKG9iaiwgZG9jLCBvdmVyd3JpdGVBbGwpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIG9iai5hcHBseUVTUmVzcChfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgICByZWZlcmVuY2VzOiBkb2MuX3JlZmVyZW5jZXMgfHwgW10KICAgICAgICAgICAgfSwgZG9jKSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiBvYmouc2F2ZSh7CiAgICAgICAgICAgICAgY29uZmlybU92ZXJ3cml0ZTogIW92ZXJ3cml0ZUFsbAogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDMuc2VudCk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMyk7CiAgfSkpOwogIHJldHVybiBfaW1wb3J0RG9jdW1lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gZ3JvdXBCeVR5cGUoZG9jcykgewogIHZhciBkZWZhdWx0RG9jVHlwZXMgPSB7CiAgICBzZWFyY2hlczogW10sCiAgICBpbmRleFBhdHRlcm5zOiBbXSwKICAgIG90aGVyOiBbXQogIH07CiAgcmV0dXJuIGRvY3MucmVkdWNlKGZ1bmN0aW9uICh0eXBlcywgZG9jKSB7CiAgICBzd2l0Y2ggKGRvYy5fdHlwZSkgewogICAgICBjYXNlICdzZWFyY2gnOgogICAgICAgIHR5cGVzLnNlYXJjaGVzLnB1c2goZG9jKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2luZGV4LXBhdHRlcm4nOgogICAgICAgIHR5cGVzLmluZGV4UGF0dGVybnMucHVzaChkb2MpOwogICAgICAgIGJyZWFrOwoKICAgICAgZGVmYXVsdDoKICAgICAgICB0eXBlcy5vdGhlci5wdXNoKGRvYyk7CiAgICB9CgogICAgcmV0dXJuIHR5cGVzOwogIH0sIGRlZmF1bHREb2NUeXBlcyk7Cn0KCmZ1bmN0aW9uIGF3YWl0RWFjaEl0ZW1JblBhcmFsbGVsKF94MTAsIF94MTEpIHsKICByZXR1cm4gX2F3YWl0RWFjaEl0ZW1JblBhcmFsbGVsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9hd2FpdEVhY2hJdGVtSW5QYXJhbGxlbCgpIHsKICBfYXdhaXRFYWNoSXRlbUluUGFyYWxsZWwgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQobGlzdCwgb3ApIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGxpc3QubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG9wKGl0ZW0pOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ0LnNlbnQpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTQpOwogIH0pKTsKICByZXR1cm4gX2F3YWl0RWFjaEl0ZW1JblBhcmFsbGVsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIHJlc29sdmVJbmRleFBhdHRlcm5Db25mbGljdHMoX3gxMiwgX3gxMywgX3gxNCkgewogIHJldHVybiBfcmVzb2x2ZUluZGV4UGF0dGVybkNvbmZsaWN0cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfcmVzb2x2ZUluZGV4UGF0dGVybkNvbmZsaWN0cygpIHsKICBfcmVzb2x2ZUluZGV4UGF0dGVybkNvbmZsaWN0cyA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNihyZXNvbHV0aW9ucywgY29uZmxpY3RlZEluZGV4UGF0dGVybnMsIG92ZXJ3cml0ZUFsbCkgewogICAgdmFyIGltcG9ydENvdW50OwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgaW1wb3J0Q291bnQgPSAwOwogICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBhd2FpdEVhY2hJdGVtSW5QYXJhbGxlbChjb25mbGljdGVkSW5kZXhQYXR0ZXJucywKICAgICAgICAgICAgLyojX19QVVJFX18qLwogICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoX3JlZjIpIHsKICAgICAgICAgICAgICAgIHZhciBvYmosIG9sZEluZGV4SWQsIHJlc29sdXRpb24sIG5ld0luZGV4SWQsIGZpbHRlcjsKICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IF9yZWYyLm9iajsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzb2x2ZSBzZWFyY2ggaW5kZXggcmVmZXJlbmNlOgogICAgICAgICAgICAgICAgICAgICAgICBvbGRJbmRleElkID0gb2JqLnNlYXJjaFNvdXJjZS5nZXRPd25GaWVsZCgnaW5kZXgnKTsgLy8gRGVwZW5kaW5nIG9uIHRoZSBvYmplY3QsIHRoaXMgY2FuIGVpdGhlciBiZSB0aGUgcmF3IGlkIG9yIHRoZSBhY3R1YWwgaW5kZXggcGF0dGVybiBvYmplY3QKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2xkSW5kZXhJZCAhPT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRJbmRleElkID0gb2xkSW5kZXhJZC5pZDsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbiA9IHJlc29sdXRpb25zLmZpbmQoZnVuY3Rpb24gKF9yZWYzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9sZElkID0gX3JlZjMub2xkSWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9sZElkID09PSBvbGRJbmRleElkOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzb2x1dGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXhJZCA9IHJlc29sdXRpb24ubmV3SWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iai5oeWRyYXRlSW5kZXhQYXR0ZXJuKG5ld0luZGV4SWQpOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzb2x2ZSBmaWx0ZXIgaW5kZXggcmVmZXJlbmNlOgogICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXIgPSAob2JqLnNlYXJjaFNvdXJjZS5nZXRPd25GaWVsZCgnZmlsdGVyJykgfHwgW10pLm1hcChmdW5jdGlvbiAoZmlsdGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZmlsdGVyLm1ldGEgJiYgZmlsdGVyLm1ldGEuaW5kZXgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbiA9IHJlc29sdXRpb25zLmZpbmQoZnVuY3Rpb24gKF9yZWY0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2xkSWQgPSBfcmVmNC5vbGRJZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvbGRJZCA9PT0gZmlsdGVyLm1ldGEuaW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdXRpb24gPyBfb2JqZWN0U3ByZWFkKHt9LCBmaWx0ZXIsIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRhOiBfb2JqZWN0U3ByZWFkKHt9LCBmaWx0ZXIubWV0YSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogcmVzb2x1dGlvbi5uZXdJZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICB9KSA6IGZpbHRlcjsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouc2VhcmNoU291cmNlLnNldEZpZWxkKCdmaWx0ZXInLCBmaWx0ZXIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzb2x1dGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2F2ZU9iamVjdChvYmosIG92ZXJ3cml0ZUFsbCk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfY29udGV4dDUuc2VudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydENvdW50Kys7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDI4KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgaW1wb3J0Q291bnQpOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTYpOwogIH0pKTsKICByZXR1cm4gX3Jlc29sdmVJbmRleFBhdHRlcm5Db25mbGljdHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gc2F2ZU9iamVjdHMoX3gxNSwgX3gxNikgewogIHJldHVybiBfc2F2ZU9iamVjdHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3NhdmVPYmplY3RzKCkgewogIF9zYXZlT2JqZWN0cyA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOChvYmpzLCBvdmVyd3JpdGVBbGwpIHsKICAgIHZhciBpbXBvcnRDb3VudDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGltcG9ydENvdW50ID0gMDsKICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gYXdhaXRFYWNoSXRlbUluUGFyYWxsZWwob2JqcywKICAgICAgICAgICAgLyojX19QVVJFX18qLwogICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIF9yZWY1ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgICAgICAgICAgLyojX19QVVJFX18qLwogICAgICAgICAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KG9iaikgewogICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2F2ZU9iamVjdChvYmosIG92ZXJ3cml0ZUFsbCk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV9jb250ZXh0Ny5zZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRDb3VudCsrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDI5KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KCkpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIsIGltcG9ydENvdW50KTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU4KTsKICB9KSk7CiAgcmV0dXJuIF9zYXZlT2JqZWN0cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBzYXZlT2JqZWN0KF94MTcsIF94MTgpIHsKICByZXR1cm4gX3NhdmVPYmplY3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3NhdmVPYmplY3QoKSB7CiAgX3NhdmVPYmplY3QgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkob2JqLCBvdmVyd3JpdGVBbGwpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIG9iai5zYXZlKHsKICAgICAgICAgICAgICBjb25maXJtT3ZlcndyaXRlOiAhb3ZlcndyaXRlQWxsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0OS5zZW50KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU5KTsKICB9KSk7CiAgcmV0dXJuIF9zYXZlT2JqZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIHJlc29sdmVTYXZlZFNlYXJjaGVzKF94MTksIF94MjAsIF94MjEsIF94MjIpIHsKICByZXR1cm4gX3Jlc29sdmVTYXZlZFNlYXJjaGVzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9yZXNvbHZlU2F2ZWRTZWFyY2hlcygpIHsKICBfcmVzb2x2ZVNhdmVkU2VhcmNoZXMgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKHNhdmVkU2VhcmNoZXMsIHNlcnZpY2VzLCBpbmRleFBhdHRlcm5zLCBvdmVyd3JpdGVBbGwpIHsKICAgIHZhciBpbXBvcnRDb3VudDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpbXBvcnRDb3VudCA9IDA7CiAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBhd2FpdEVhY2hJdGVtSW5QYXJhbGxlbChzYXZlZFNlYXJjaGVzLAogICAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgX3JlZjYgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKHNlYXJjaERvYykgewogICAgICAgICAgICAgICAgdmFyIG9iajsKICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTApIHsKICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0U2F2ZWRPYmplY3Qoc2VhcmNoRG9jLCBzZXJ2aWNlcyk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICBvYmogPSBfY29udGV4dDEwLnNlbnQ7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbXBvcnREb2N1bWVudChvYmosIHNlYXJjaERvYywgb3ZlcndyaXRlQWxsKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX2NvbnRleHQxMC5zZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0Q291bnQrKzsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTApOwogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDMwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KCkpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KCJyZXR1cm4iLCBpbXBvcnRDb3VudCk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTExKTsKICB9KSk7CiAgcmV0dXJuIF9yZXNvbHZlU2F2ZWRTZWFyY2hlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiByZXNvbHZlU2F2ZWRPYmplY3RzKF94MjMsIF94MjQsIF94MjUsIF94MjYsIF94MjcpIHsKICByZXR1cm4gX3Jlc29sdmVTYXZlZE9iamVjdHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3Jlc29sdmVTYXZlZE9iamVjdHMoKSB7CiAgX3Jlc29sdmVTYXZlZE9iamVjdHMgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE1KHNhdmVkT2JqZWN0cywgb3ZlcndyaXRlQWxsLCBzZXJ2aWNlcywgaW5kZXhQYXR0ZXJucywgY29uZmlybU1vZGFsUHJvbWlzZSkgewogICAgdmFyIGRvY1R5cGVzLCBpbXBvcnRlZE9iamVjdENvdW50LCBmYWlsZWRJbXBvcnRzLCBjb25mbGljdGVkU2VhcmNoRG9jcywgY29uZmxpY3RlZEluZGV4UGF0dGVybnMsIGNvbmZsaWN0ZWRTYXZlZE9iamVjdHNMaW5rZWRUb1NhdmVkU2VhcmNoZXM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE1JChfY29udGV4dDE1KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDE1LnByZXYgPSBfY29udGV4dDE1Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgZG9jVHlwZXMgPSBncm91cEJ5VHlwZShzYXZlZE9iamVjdHMpOyAvLyBLZWVwIHRyYWNrIG9mIGhvdyBtYW55IHdlIGFjdHVhbGx5IGltcG9ydCBiZWNhdXNlIHRoZSB1c2VyCiAgICAgICAgICAgIC8vIGNhbiBjYW5jZWwgYW4gb3ZlcnJpZGUKCiAgICAgICAgICAgIGltcG9ydGVkT2JqZWN0Q291bnQgPSAwOwogICAgICAgICAgICBmYWlsZWRJbXBvcnRzID0gW107IC8vIFN0YXJ0IHdpdGggdGhlIGluZGV4IHBhdHRlcm5zIHNpbmNlIGV2ZXJ5dGhpbmcgaXMgZGVwZW5kZW50IG9uIHRoZW0KCiAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDU7CiAgICAgICAgICAgIHJldHVybiBhd2FpdEVhY2hJdGVtSW5QYXJhbGxlbChkb2NUeXBlcy5pbmRleFBhdHRlcm5zLAogICAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgX3JlZjcgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEyKGluZGV4UGF0dGVybkRvYykgewogICAgICAgICAgICAgICAgdmFyIGltcG9ydGVkSW5kZXhQYXR0ZXJuSWQ7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEyJChfY29udGV4dDEyKSB7CiAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMi5wcmV2ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGltcG9ydEluZGV4UGF0dGVybihpbmRleFBhdHRlcm5Eb2MsIGluZGV4UGF0dGVybnMsIG92ZXJ3cml0ZUFsbCwgY29uZmlybU1vZGFsUHJvbWlzZSk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRlZEluZGV4UGF0dGVybklkID0gX2NvbnRleHQxMi5zZW50OwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltcG9ydGVkSW5kZXhQYXR0ZXJuSWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRlZE9iamVjdENvdW50Kys7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIucHJldiA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIudDAgPSBfY29udGV4dDEyWyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWRJbXBvcnRzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4UGF0dGVybkRvYzogaW5kZXhQYXR0ZXJuRG9jLAogICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBfY29udGV4dDEyLnQwCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTIsIG51bGwsIFtbMCwgN11dKTsKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gzMSkgewogICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIC8vIFdlIHdhbnQgdG8gZG8gdGhlIHNhbWUgZm9yIHNhdmVkIHNlYXJjaGVzLCBidXQgd2Ugd2FudCB0byBrZWVwIHRoZW0gc2VwYXJhdGUgYmVjYXVzZSB0aGV5IG5lZWQKICAgICAgICAgICAgLy8gdG8gYmUgYXBwbGllZCBfZmlyc3RfIGJlY2F1c2Ugb3RoZXIgc2F2ZWQgb2JqZWN0cyBjYW4gYmUgZGVwZW5kZW50IG9uIHRob3NlIHNhdmVkIHNlYXJjaGVzIGV4aXN0aW5nCiAgICAgICAgICAgIGNvbmZsaWN0ZWRTZWFyY2hEb2NzID0gW107IC8vIEtlZXAgYSByZWNvcmQgb2YgdGhlIGluZGV4IHBhdHRlcm5zIGFzc2lnbmVkIHRvIG91ciBpbXBvcnRlZCBzYXZlZCBvYmplY3RzIHRoYXQgZG8gbm90CiAgICAgICAgICAgIC8vIGV4aXN0LiBXZSB3aWxsIHByb3ZpZGUgYSB3YXkgZm9yIHRoZSB1c2VyIHRvIG1hbnVhbGx5IHNlbGVjdCBhIG5ldyBpbmRleCBwYXR0ZXJuIGZvciB0aG9zZQogICAgICAgICAgICAvLyBzYXZlZCBvYmplY3RzLgoKICAgICAgICAgICAgY29uZmxpY3RlZEluZGV4UGF0dGVybnMgPSBbXTsgLy8gS2VlcCBhIHJlY29yZCBvZiBhbnkgb2JqZWN0cyB3aGljaCBmYWlsIHRvIGltcG9ydCBmb3IgdW5rbm93biByZWFzb25zLgogICAgICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIHRvIGhhdmUgc2F2ZWQgb2JqZWN0cyB0aGF0IGxpbmsgdG8gc2F2ZWQgc2VhcmNoZXMgd2hpY2ggdGhlbiBsaW5rIHRvIGluZGV4IHBhdHRlcm5zCiAgICAgICAgICAgIC8vIGFuZCB0aG9zZSBjb3VsZCBlcnJvciBvdXQsIGJ1dCB0aGUgZXJyb3IgY29tZXMgYXMgYW4gaW5kZXggcGF0dGVybiBub3QgZm91bmQgZXJyb3IuIFdlIGNhbid0IHJlc29sdmUKICAgICAgICAgICAgLy8gdGhvc2UgdGhlIHNhbWUgYXMgd2F5IGFzIG5vcm1hbCBpbmRleCBwYXR0ZXJuIG5vdCBmb3VuZCBlcnJvcnMsIGJ1dCB3aGVuIHRob3NlIGFyZSBmaXhlZCwgaXQncyB2ZXJ5CiAgICAgICAgICAgIC8vIGxpa2VseSB0aGF0IHRoZXNlIHNhdmVkIG9iamVjdHMgd2lsbCB3b3JrIG9uY2UgcmVzYXZlZCBzbyBrZWVwIHRoZW0gYXJvdW5kIHRvIHJlc2F2ZSB0aGVtLgoKICAgICAgICAgICAgY29uZmxpY3RlZFNhdmVkT2JqZWN0c0xpbmtlZFRvU2F2ZWRTZWFyY2hlcyA9IFtdOwogICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSAxMDsKICAgICAgICAgICAgcmV0dXJuIGF3YWl0RWFjaEl0ZW1JblBhcmFsbGVsKGRvY1R5cGVzLnNlYXJjaGVzLAogICAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgX3JlZjggPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEzKHNlYXJjaERvYykgewogICAgICAgICAgICAgICAgdmFyIG9iajsKICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTMkKF9jb250ZXh0MTMpIHsKICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTMucHJldiA9IF9jb250ZXh0MTMubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0U2F2ZWRPYmplY3Qoc2VhcmNoRG9jLCBzZXJ2aWNlcyk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICBvYmogPSBfY29udGV4dDEzLnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTMucHJldiA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbXBvcnREb2N1bWVudChvYmosIHNlYXJjaERvYywgb3ZlcndyaXRlQWxsKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX2NvbnRleHQxMy5zZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0ZWRPYmplY3RDb3VudCsrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTMucHJldiA9IDEwOwogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEzLnQwID0gX2NvbnRleHQxM1siY2F0Y2giXSgzKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfY29udGV4dDEzLnQwLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdTYXZlZE9iamVjdE5vdEZvdW5kJykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfY29udGV4dDEzLnQwLnNhdmVkT2JqZWN0VHlwZSA9PT0gJ2luZGV4LXBhdHRlcm4nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25mbGljdGVkSW5kZXhQYXR0ZXJucy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqOiBvYmosCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYzogc2VhcmNoRG9jCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmxpY3RlZFNlYXJjaERvY3MucHVzaChzZWFyY2hEb2MpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWRJbXBvcnRzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqOiBvYmosCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogX2NvbnRleHQxMy50MAogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxMywgbnVsbCwgW1szLCAxMF1dKTsKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gzMikgewogICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY4LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSAxMjsKICAgICAgICAgICAgcmV0dXJuIGF3YWl0RWFjaEl0ZW1JblBhcmFsbGVsKGRvY1R5cGVzLm90aGVyLAogICAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2YXIgX3JlZjkgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE0KG90aGVyRG9jKSB7CiAgICAgICAgICAgICAgICB2YXIgb2JqLCBpc0luZGV4UGF0dGVybk5vdEZvdW5kOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNCQoX2NvbnRleHQxNCkgewogICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNC5wcmV2ID0gX2NvbnRleHQxNC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRTYXZlZE9iamVjdChvdGhlckRvYywgc2VydmljZXMpOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gX2NvbnRleHQxNC5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE0LnByZXYgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW1wb3J0RG9jdW1lbnQob2JqLCBvdGhlckRvYywgb3ZlcndyaXRlQWxsKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX2NvbnRleHQxNC5zZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0ZWRPYmplY3RDb3VudCsrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTQucHJldiA9IDEwOwogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE0LnQwID0gX2NvbnRleHQxNFsiY2F0Y2giXSgzKTsKICAgICAgICAgICAgICAgICAgICAgICAgaXNJbmRleFBhdHRlcm5Ob3RGb3VuZCA9IF9jb250ZXh0MTQudDAuY29uc3RydWN0b3IubmFtZSA9PT0gJ1NhdmVkT2JqZWN0Tm90Rm91bmQnICYmIF9jb250ZXh0MTQudDAuc2F2ZWRPYmplY3RUeXBlID09PSAnaW5kZXgtcGF0dGVybic7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNJbmRleFBhdHRlcm5Ob3RGb3VuZCAmJiBvYmouc2F2ZWRTZWFyY2hJZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0ZWRTYXZlZE9iamVjdHNMaW5rZWRUb1NhdmVkU2VhcmNoZXMucHVzaChvYmopOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzSW5kZXhQYXR0ZXJuTm90Rm91bmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjb25mbGljdGVkSW5kZXhQYXR0ZXJucy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iajogb2JqLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jOiBvdGhlckRvYwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxlZEltcG9ydHMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmo6IG9iaiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBfY29udGV4dDE0LnQwCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgX2NhbGxlZTE0LCBudWxsLCBbWzMsIDEwXV0pOwogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDMzKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KCkpOwoKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgIGNvbmZsaWN0ZWRJbmRleFBhdHRlcm5zOiBjb25mbGljdGVkSW5kZXhQYXR0ZXJucywKICAgICAgICAgICAgICBjb25mbGljdGVkU2F2ZWRPYmplY3RzTGlua2VkVG9TYXZlZFNlYXJjaGVzOiBjb25mbGljdGVkU2F2ZWRPYmplY3RzTGlua2VkVG9TYXZlZFNlYXJjaGVzLAogICAgICAgICAgICAgIGNvbmZsaWN0ZWRTZWFyY2hEb2NzOiBjb25mbGljdGVkU2VhcmNoRG9jcywKICAgICAgICAgICAgICBpbXBvcnRlZE9iamVjdENvdW50OiBpbXBvcnRlZE9iamVjdENvdW50LAogICAgICAgICAgICAgIGZhaWxlZEltcG9ydHM6IGZhaWxlZEltcG9ydHMKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUxNSk7CiAgfSkpOwogIHJldHVybiBfcmVzb2x2ZVNhdmVkT2JqZWN0cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9"},null]}