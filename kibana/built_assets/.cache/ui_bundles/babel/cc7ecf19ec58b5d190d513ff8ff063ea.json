{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/ui/public/indexed_array/indexed_array.js","dependencies":[{"path":"src/legacy/ui/public/indexed_array/indexed_array.js","mtime":1589249550327},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkluZGV4ZWRBcnJheSA9IHZvaWQgMDsKCnZhciBfbG9kYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsb2Rhc2giKSk7Cgp2YXIgX2luZmxlY3RvciA9IHJlcXVpcmUoIi4vaW5mbGVjdG9yIik7Cgp2YXIgX29yZ2FuaXplX2J5ID0gcmVxdWlyZSgiLi9oZWxwZXJzL29yZ2FuaXplX2J5Iik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX2dldCh0YXJnZXQsIHByb3BlcnR5LCByZWNlaXZlcikgeyBpZiAodHlwZW9mIFJlZmxlY3QgIT09ICJ1bmRlZmluZWQiICYmIFJlZmxlY3QuZ2V0KSB7IF9nZXQgPSBSZWZsZWN0LmdldDsgfSBlbHNlIHsgX2dldCA9IGZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgdmFyIGJhc2UgPSBfc3VwZXJQcm9wQmFzZSh0YXJnZXQsIHByb3BlcnR5KTsgaWYgKCFiYXNlKSByZXR1cm47IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiYXNlLCBwcm9wZXJ0eSk7IGlmIChkZXNjLmdldCkgeyByZXR1cm4gZGVzYy5nZXQuY2FsbChyZWNlaXZlcik7IH0gcmV0dXJuIGRlc2MudmFsdWU7IH07IH0gcmV0dXJuIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIgfHwgdGFyZ2V0KTsgfQoKZnVuY3Rpb24gX3N1cGVyUHJvcEJhc2Uob2JqZWN0LCBwcm9wZXJ0eSkgeyB3aGlsZSAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSkgeyBvYmplY3QgPSBfZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgYnJlYWs7IH0gcmV0dXJuIG9iamVjdDsgfQoKZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCnZhciBwYXRoR2V0dGVyID0gKDAsIF9sb2Rhc2guZGVmYXVsdCkoX2xvZGFzaC5kZWZhdWx0LmdldCkucmVhcmcoMSwgMCkuYXJ5KDIpOwp2YXIgaW5mbGVjdEluZGV4ID0gKDAsIF9pbmZsZWN0b3IuaW5mbGVjdG9yKSgnYnknKTsKdmFyIGluZmxlY3RPcmRlciA9ICgwLCBfaW5mbGVjdG9yLmluZmxlY3RvcikoJ2luJywgJ09yZGVyJyk7CnZhciBDTEVBUl9DQUNIRSA9IHt9Owp2YXIgT1BUX05BTUVTID0gWydpbmRleCcsICdncm91cCcsICdvcmRlcicsICdpbml0aWFsU2V0JywgJ2ltbXV0YWJsZSddOwovKioKICogIEdlbmVyaWMgZXh0ZW5zaW9uIG9mIEFycmF5IGNsYXNzLCB3aGljaCB3aWxsIGluZGV4IChhbmQgcmVpbmRleCkgdGhlCiAqICBvYmplY3RzIGl0IGNvbnRhaW5zIGJhc2VkIG9uIHRoZWlyIHByb3BlcnRpZXMuCiAqCiAqICBAcGFyYW0ge09iamVjdH0gY29uZmlnIGRlc2NyaWJlcyB0aGUgcHJvcGVydGllcyBvZiB0aGlzIHJlZ2lzdHJ5IG9iamVjdAogKiAgQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBbY29uZmlnLmluZGV4XSBhIGxpc3Qgb2YgcHJvcHMvcGF0aHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmRleCB0aGUgZG9jcy4KICogIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gW2NvbmZpZy5ncm91cF0gYSBsaXN0IG9mIGtleXMvcGF0aHMgdG8gZ3JvdXAgZG9jcyBieS4KICogIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gW2NvbmZpZy5vcmRlcl0gYSBsaXN0IG9mIGtleXMvcGF0aHMgdG8gb3JkZXIgdGhlIGtleXMgYnkuCiAqICBAcGFyYW0ge0FycmF5PGFueT59IFtjb25maWcuaW5pdGlhbFNldF0gdGhlIGluaXRpYWwgZGF0YXNldCB0aGUgSW5kZXhlZEFycmF5IHNob3VsZCBjb250YWluLgogKiAgQHBhcmFtIHtib29sZWFufSBbY29uZmlnLmltbXV0YWJsZV0gYSBmbGFnIHRoYXQgaGludHMgdG8gcGVvcGxlIHJlYWRpbmcgdGhlIGltcGxlbWVudGF0aW9uIHRoYXQgdGhpcyBJbmRleGVkQXJyYXkKICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZCBub3QgYmUgbW9kaWZpZWQKICovCgp2YXIgSW5kZXhlZEFycmF5ID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gSW5kZXhlZEFycmF5KGNvbmZpZykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEluZGV4ZWRBcnJheSk7CgogICAgY29uZmlnID0gX2xvZGFzaC5kZWZhdWx0LnBpY2soY29uZmlnIHx8IHt9LCBPUFRfTkFNRVMpOyAvLyB1c2UgZGVmaW5lUHJvcGVydHkgc28gdGhhdCB2YWx1ZSBjYW4ndCBiZSBjaGFuZ2VkCgogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdyYXcnLCB7CiAgICAgIHZhbHVlOiBbXQogICAgfSk7CiAgICB0aGlzLl9pbmRleE5hbWVzID0gX2xvZGFzaC5kZWZhdWx0LnVuaW9uKHRoaXMuX3NldHVwSW5kZXgoY29uZmlnLmdyb3VwLCBpbmZsZWN0SW5kZXgsIG9yZ2FuaXplQnlJbmRleGVkQXJyYXkoY29uZmlnKSksIHRoaXMuX3NldHVwSW5kZXgoY29uZmlnLmluZGV4LCBpbmZsZWN0SW5kZXgsIF9sb2Rhc2guZGVmYXVsdC5pbmRleEJ5KSwgdGhpcy5fc2V0dXBJbmRleChjb25maWcub3JkZXIsIGluZmxlY3RPcmRlciwgZnVuY3Rpb24gKHJhdywgcGx1Y2tWYWx1ZSkgewogICAgICByZXR1cm4gX3RvQ29uc3VtYWJsZUFycmF5KHJhdykuc29ydChmdW5jdGlvbiAoaXRlbUEsIGl0ZW1CKSB7CiAgICAgICAgdmFyIGEgPSBwbHVja1ZhbHVlKGl0ZW1BKTsKICAgICAgICB2YXIgYiA9IHBsdWNrVmFsdWUoaXRlbUIpOwoKICAgICAgICBpZiAodHlwZW9mIGEgPT09ICdudW1iZXInICYmIHR5cGVvZiBiID09PSAnbnVtYmVyJykgewogICAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIFN0cmluZyhhKS50b0xvd2VyQ2FzZSgpLmxvY2FsZUNvbXBhcmUoU3RyaW5nKGIpLnRvTG93ZXJDYXNlKCkpOwogICAgICB9KTsKICAgIH0pKTsKCiAgICBpZiAoY29uZmlnLmluaXRpYWxTZXQpIHsKICAgICAgdGhpcy5wdXNoLmFwcGx5KHRoaXMsIGNvbmZpZy5pbml0aWFsU2V0KTsKICAgIH0KCiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2ltbXV0YWJsZScsIHsKICAgICAgdmFsdWU6ICEhY29uZmlnLmltbXV0YWJsZQogICAgfSk7CiAgfQogIC8qKgogICAqIFJlbW92ZSBpdGVtcyBmcm9tIHRoaXMgYmFzZWQgb24gYSBwcmVkaWNhdGUKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IHByZWRpY2F0ZSAtIHRoZSBwcmVkaWNhdGUgdXNlZCB0byBkZWNpZGUgd2hhdCBpcyByZW1vdmVkCiAgICogQHJldHVybiB7YXJyYXl9IC0gdGhlIHJlbW92ZWQgZGF0YQogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKEluZGV4ZWRBcnJheSwgW3sKICAgIGtleTogInJlbW92ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlKHByZWRpY2F0ZSkgewogICAgICB0aGlzLl9hc3NlcnRNdXRhYmxlKCdyZW1vdmUnKTsKCiAgICAgIHZhciBvdXQgPSBfbG9kYXNoLmRlZmF1bHQucmVtb3ZlKHRoaXMsIHByZWRpY2F0ZSk7CgogICAgICBfbG9kYXNoLmRlZmF1bHQucmVtb3ZlKHRoaXMucmF3LCBwcmVkaWNhdGUpOwoKICAgICAgdGhpcy5fY2xlYXJJbmRpY2VzKCk7CgogICAgICByZXR1cm4gb3V0OwogICAgfQogICAgLyoqCiAgICAgKiBwcm92aWRlIGEgaG9vayBmb3IgdGhlIEpTT04gc2VyaWFsaXplcgogICAgICogQHJldHVybiB7YXJyYXl9IC0gYSBwbGFpbiwgdmFuaWxsYSBhcnJheSB3aXRoIG91ciBzYW1lIGRhdGEKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJ0b0pTT04iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIHRoaXMucmF3OwogICAgfSAvLyB3cmFwcGVycyBmb3IgbXV0YWJsZSBBcnJheSBtZXRob2RzCgogIH0sIHsKICAgIGtleTogImNvcHlXaXRoaW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvcHlXaXRoaW4oKSB7CiAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbignY29weVdpdGhpbicsIGFyZ3MpOwogICAgfQogIH0sIHsKICAgIGtleTogImZpbGwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbGwoKSB7CiAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykgewogICAgICAgIGFyZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuX211dGF0aW9uKCdmaWxsJywgYXJncyk7CiAgICB9CiAgfSwgewogICAga2V5OiAicG9wIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwb3AoKSB7CiAgICAgIGZvciAodmFyIF9sZW4zID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuMyksIF9rZXkzID0gMDsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykgewogICAgICAgIGFyZ3NbX2tleTNdID0gYXJndW1lbnRzW19rZXkzXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuX211dGF0aW9uKCdwb3AnLCBhcmdzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwdXNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwdXNoKCkgewogICAgICBmb3IgKHZhciBfbGVuNCA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjQpLCBfa2V5NCA9IDA7IF9rZXk0IDwgX2xlbjQ7IF9rZXk0KyspIHsKICAgICAgICBhcmdzW19rZXk0XSA9IGFyZ3VtZW50c1tfa2V5NF07CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbigncHVzaCcsIGFyZ3MpOwogICAgfQogIH0sIHsKICAgIGtleTogInJldmVyc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJldmVyc2UoKSB7CiAgICAgIGZvciAodmFyIF9sZW41ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuNSksIF9rZXk1ID0gMDsgX2tleTUgPCBfbGVuNTsgX2tleTUrKykgewogICAgICAgIGFyZ3NbX2tleTVdID0gYXJndW1lbnRzW19rZXk1XTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuX211dGF0aW9uKCdyZXZlcnNlJywgYXJncyk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2hpZnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNoaWZ0KCkgewogICAgICBmb3IgKHZhciBfbGVuNiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjYpLCBfa2V5NiA9IDA7IF9rZXk2IDwgX2xlbjY7IF9rZXk2KyspIHsKICAgICAgICBhcmdzW19rZXk2XSA9IGFyZ3VtZW50c1tfa2V5Nl07CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbignc2hpZnQnLCBhcmdzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzb3J0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzb3J0KCkgewogICAgICBmb3IgKHZhciBfbGVuNyA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjcpLCBfa2V5NyA9IDA7IF9rZXk3IDwgX2xlbjc7IF9rZXk3KyspIHsKICAgICAgICBhcmdzW19rZXk3XSA9IGFyZ3VtZW50c1tfa2V5N107CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbignc29ydCcsIGFyZ3MpOwogICAgfQogIH0sIHsKICAgIGtleTogInNwbGljZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3BsaWNlKCkgewogICAgICBmb3IgKHZhciBfbGVuOCA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjgpLCBfa2V5OCA9IDA7IF9rZXk4IDwgX2xlbjg7IF9rZXk4KyspIHsKICAgICAgICBhcmdzW19rZXk4XSA9IGFyZ3VtZW50c1tfa2V5OF07CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbignc3BsaWNlJywgYXJncyk7CiAgICB9CiAgfSwgewogICAga2V5OiAidW5zaGlmdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdW5zaGlmdCgpIHsKICAgICAgZm9yICh2YXIgX2xlbjkgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW45KSwgX2tleTkgPSAwOyBfa2V5OSA8IF9sZW45OyBfa2V5OSsrKSB7CiAgICAgICAgYXJnc1tfa2V5OV0gPSBhcmd1bWVudHNbX2tleTldOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5fbXV0YXRpb24oJ3Vuc2hpZnQnLCBhcmdzKTsKICAgIH0KICAgIC8qKgogICAgICogIElmIHRoaXMgaW5zdGFuY2Ugb2YgSW5kZXhlZEFycmF5IGlzIG5vdCBtdXRhYmxlLCB0aHJvdyBhbiBlcnJvcgogICAgICogIEBwcml2YXRlCiAgICAgKiAgQHBhcmFtICB7U3RyaW5nfSBtZXRob2ROYW1lIC0gdXNlciBmYWNpbmcgbWV0aG9kIG5hbWUsIGZvciBlcnJvciBtZXNzYWdlCiAgICAgKiAgQHJldHVybiB7dW5kZWZpbmVkfQogICAgICovCgogIH0sIHsKICAgIGtleTogIl9hc3NlcnRNdXRhYmxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfYXNzZXJ0TXV0YWJsZShtZXRob2ROYW1lKSB7CiAgICAgIGlmICh0aGlzLmltbXV0YWJsZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiIi5jb25jYXQobWV0aG9kTmFtZSwgIigpIGlzIG5vdCBhbGxvd2VkIG9uIGltbXV0YWJsZSBJbmRleGVkQXJyYXkgaW5zdGFuY2VzIikpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqICBFeGVjdXRlIHNvbWUgbXV0YWJsZSBtZXRob2QgZnJvbSB0aGUgQXJyYXkgcHJvdG90eXBlCiAgICAgKiAgb24gdGhlIEluZGV4ZWRBcnJheSBhbmQgdGhpcy5yYXcKICAgICAqCiAgICAgKiAgQHByaXZhdGUKICAgICAqICBAcGFyYW0gIHtzdHJpbmd9IG1ldGhvZE5hbWUKICAgICAqICBAcGFyYW0gIHtBcnJheTxhbnk+fSBhcmdzCiAgICAgKiAgQHJldHVybiB7YW55fQogICAgICovCgogIH0sIHsKICAgIGtleTogIl9tdXRhdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX211dGF0aW9uKG1ldGhvZE5hbWUsIGFyZ3MpIHsKICAgICAgdGhpcy5fYXNzZXJ0TXV0YWJsZShtZXRob2ROYW1lKTsKCiAgICAgIF9nZXQoX2dldFByb3RvdHlwZU9mKEluZGV4ZWRBcnJheS5wcm90b3R5cGUpLCBtZXRob2ROYW1lLCB0aGlzKS5hcHBseSh0aGlzLCBhcmdzKTsKCiAgICAgIHRoaXMuX2NsZWFySW5kaWNlcygpOwoKICAgICAgcmV0dXJuIF9nZXQoX2dldFByb3RvdHlwZU9mKEluZGV4ZWRBcnJheS5wcm90b3R5cGUpLCBtZXRob2ROYW1lLCB0aGlzKS5hcHBseSh0aGlzLnJhdywgYXJncyk7CiAgICB9CiAgICAvKioKICAgICAqIENyZWF0ZSBpbmRpY2VzIGZvciBhIGdyb3VwIG9mIG9iamVjdCBwcm9wZXJ0aWVzLiBnZXR0ZXJzIGFuZCBzZXR0ZXJzIGFyZSB1c2VkIHRvCiAgICAgKiByZWFkIGFuZCBjb250cm9sIHRoZSBpbmRpY2VzLgogICAgICogQHByaXZhdGUKICAgICAqIEBwYXJhbSAge3N0cmluZ1tdfSBwcm9wcyAgIC0gdGhlIHByb3BlcnRpZXMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmRleCBkb2NzCiAgICAgKiBAcGFyYW0gIHtmdW5jdGlvbn0gaW5mbGVjdCAtIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aXRoIGEgcHJvcGVydHkgbmFtZSwgYW5kCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVzIHRoZSBwdWJsaWMgcHJvcGVydHkgYXQgd2hpY2ggdGhlIGluZGV4IHdpbGwgYmUgZXhwb3NlZAogICAgICogQHBhcmFtICB7ZnVuY3Rpb259IG9wICAgICAgLSB0aGUgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIHVzZWQgdG8gY3JlYXRlIHRoZSBpbmRpY2VzLCBpdCBpcyBwYXNzZWQKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSByYXcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJlZ2lzdHJ5LCBhbmQgYSBnZXR0ZXIgZm9yIHJlYWRpbmcgdGhlCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodCBwcm9wCiAgICAgKgogICAgICogQHJldHVybnMge3N0cmluZ1tdfSAgICAgICAgLSB0aGUgcHVibGljIGtleXMgb2YgYWxsIGluZGljZXMgY3JlYXRlZAogICAgICovCgogIH0sIHsKICAgIGtleTogIl9zZXR1cEluZGV4IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBJbmRleChwcm9wcywgaW5mbGVjdCwgb3ApIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vIHNob3J0Y3V0IGZvciBlbXB0eSBwcm9wcwogICAgICBpZiAoIXByb3BzIHx8IHByb3BzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICByZXR1cm4gcHJvcHMubWFwKGZ1bmN0aW9uIChwcm9wKSB7CiAgICAgICAgdmFyIGluZGV4TmFtZSA9IGluZmxlY3QocHJvcCk7CiAgICAgICAgdmFyIGdldEluZGV4VmFsdWVGcm9tSXRlbSA9IHBhdGhHZXR0ZXIucGFydGlhbChwcm9wKS52YWx1ZSgpOwogICAgICAgIHZhciBjYWNoZTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX3RoaXMsIGluZGV4TmFtZSwgewogICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLAogICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7CiAgICAgICAgICAgIC8vIGNhbid0IHNldCBhbnkgdmFsdWUgb3RoZXIgdGhhbiB0aGUgQ0xFQVJfQ0FDSEUgY29uc3RhbnQKICAgICAgICAgICAgaWYgKHZhbCA9PT0gQ0xFQVJfQ0FDSEUpIHsKICAgICAgICAgICAgICBjYWNoZSA9IGZhbHNlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoaW5kZXhOYW1lICsgJyBjYW4gbm90IGJlIHNldCwgaXQgaXMgYSBjb21wdXRlZCBpbmRleCBvZiB2YWx1ZXMnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICBpZiAoIWNhY2hlKSB7CiAgICAgICAgICAgICAgY2FjaGUgPSBvcChfdGhpcy5yYXcsIGdldEluZGV4VmFsdWVGcm9tSXRlbSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBjYWNoZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm4gaW5kZXhOYW1lOwogICAgICB9KTsKICAgIH0KICAgIC8qKgogICAgICogQ2xlYXIgY2FjaGVkIGluZGV4L2dyb3VwL29yZGVyIGNhY2hlcyBzbyB0aGV5IHdpbGwgYmUgcmVjcmVhdGVkCiAgICAgKiBvbiBuZXh0IGFjY2VzcwogICAgICogQHByaXZhdGUKICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJfY2xlYXJJbmRpY2VzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfY2xlYXJJbmRpY2VzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuX2luZGV4TmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgewogICAgICAgIF90aGlzMltuYW1lXSA9IENMRUFSX0NBQ0hFOwogICAgICB9KTsKICAgIH0KICB9XSk7CgogIHJldHVybiBJbmRleGVkQXJyYXk7Cn0oKTsgLy8gdXNpbmcgdHJhZGl0aW9uYWwgYGV4dGVuZHMgQXJyYXlgIHN5bnRheCBkb2Vzbid0IHdvcmsgd2l0aCBiYWJlbAovLyBTZWUgaHR0cHM6Ly9iYWJlbGpzLmlvL2RvY3MvdXNhZ2UvY2F2ZWF0cy8KCgpleHBvcnRzLkluZGV4ZWRBcnJheSA9IEluZGV4ZWRBcnJheTsKCl9kZWZpbmVQcm9wZXJ0eShJbmRleGVkQXJyYXksICJPUFRfTkFNRVMiLCBPUFRfTkFNRVMpOwoKT2JqZWN0LnNldFByb3RvdHlwZU9mKEluZGV4ZWRBcnJheS5wcm90b3R5cGUsIEFycmF5LnByb3RvdHlwZSk7IC8vIFNpbWlsYXIgdG8gYG9yZ2FuaXplQnlgIGJ1dCByZXR1cm5zIEluZGV4ZWRBcnJheXMgaW5zdGVhZCBvZiBub3JtYWwgQXJyYXlzLgoKZnVuY3Rpb24gb3JnYW5pemVCeUluZGV4ZWRBcnJheShjb25maWcpIHsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgdmFyIGdyb3VwZWQgPSBfb3JnYW5pemVfYnkub3JnYW5pemVCeS5hcHBseSh2b2lkIDAsIGFyZ3VtZW50cyk7CgogICAgcmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5yZWR1Y2UoZ3JvdXBlZCwgZnVuY3Rpb24gKGFjYywgdmFsdWUsIGdyb3VwKSB7CiAgICAgIGFjY1tncm91cF0gPSBuZXcgSW5kZXhlZEFycmF5KF9vYmplY3RTcHJlYWQoe30sIGNvbmZpZywgewogICAgICAgIGluaXRpYWxTZXQ6IHZhbHVlCiAgICAgIH0pKTsKICAgICAgcmV0dXJuIGFjYzsKICAgIH0sIHt9KTsKICB9Owp9"},null]}