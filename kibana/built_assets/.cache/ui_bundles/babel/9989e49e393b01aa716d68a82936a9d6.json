{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/infra/public/components/logging/log_minimap/log_minimap.js","dependencies":[{"path":"x-pack/plugins/infra/public/components/logging/log_minimap/log_minimap.js","mtime":1589249554245},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuTG9nTWluaW1hcCA9IHZvaWQgMDsKCnZhciBfZDNTY2FsZSA9IHJlcXVpcmUoImQzLXNjYWxlIik7Cgp2YXIgUmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vb2JzZXJ2YWJpbGl0eS9wdWJsaWMiKTsKCnZhciBfZGVuc2l0eV9jaGFydCA9IHJlcXVpcmUoIi4vZGVuc2l0eV9jaGFydCIpOwoKdmFyIF9oaWdobGlnaHRlZF9pbnRlcnZhbCA9IHJlcXVpcmUoIi4vaGlnaGxpZ2h0ZWRfaW50ZXJ2YWwiKTsKCnZhciBfc2VhcmNoX21hcmtlcnMgPSByZXF1aXJlKCIuL3NlYXJjaF9tYXJrZXJzIik7Cgp2YXIgX3RpbWVfcnVsZXIgPSByZXF1aXJlKCIuL3RpbWVfcnVsZXIiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9IGVsc2UgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0KCiAgcmV0dXJuIF90eXBlb2Yob2JqKTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MygpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBmaWxsOiAiLCAiO1xuICAmICIsICIge1xuICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgfVxuICAmOmhvdmVyICIsICIge1xuICAgIHZpc2liaWxpdHk6IHZpc2libGU7XG4gIH1cbiJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0MyA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDMoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MigpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIHN0cm9rZS13aWR0aDogMXB4O1xuICBzdHJva2U6ICIsICI7XG4iXSk7CgogIF90ZW1wbGF0ZU9iamVjdDIgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QyKCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdCgpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgc3Ryb2tlOiAiLCAiO1xuICBzdHJva2Utd2lkdGg6IDFweDtcbiJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0ID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0KCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCmZ1bmN0aW9uIF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoc3RyaW5ncywgcmF3KSB7CiAgaWYgKCFyYXcpIHsKICAgIHJhdyA9IHN0cmluZ3Muc2xpY2UoMCk7CiAgfQoKICByZXR1cm4gT2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzdHJpbmdzLCB7CiAgICByYXc6IHsKICAgICAgdmFsdWU6IE9iamVjdC5mcmVlemUocmF3KQogICAgfQogIH0pKTsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgewogIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsKICAgIHJldHVybiBjYWxsOwogIH0KCiAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7Cn0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7CiAgfTsKICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOwp9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsKICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIHNlbGY7Cn0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgewogIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOwogIH0KCiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICBjb25zdHJ1Y3RvcjogewogICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0KICB9KTsKICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsKfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICAgIG8uX19wcm90b19fID0gcDsKICAgIHJldHVybiBvOwogIH07CgogIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9IC8vIFdpZGUgZW5vdWdoIHRvIGZpdCAiU2VwdGVtYmVyIgoKCnZhciBUSU1FUlVMRVJfV0lEVEggPSA1MDsKCmZ1bmN0aW9uIGNhbGN1bGF0ZVlTY2FsZShzdGFydCwgZW5kLCBoZWlnaHQpIHsKICByZXR1cm4gKDAsIF9kM1NjYWxlLnNjYWxlTGluZWFyKSgpLmRvbWFpbihbc3RhcnQgfHwgMCwgZW5kIHx8IDBdKS5yYW5nZShbMCwgaGVpZ2h0XSk7Cn0KCnZhciBMb2dNaW5pbWFwID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkgewogIF9pbmhlcml0cyhMb2dNaW5pbWFwLCBfUmVhY3QkQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gTG9nTWluaW1hcChwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMb2dNaW5pbWFwKTsKCiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihMb2dNaW5pbWFwKS5jYWxsKHRoaXMsIHByb3BzKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlQ2xpY2siLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIG1pbmltYXBUb3AgPSBldmVudC5jdXJyZW50VGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDsKICAgICAgdmFyIGNsaWNrZWRZUG9zaXRpb24gPSBldmVudC5jbGllbnRZIC0gbWluaW1hcFRvcDsKICAgICAgdmFyIGNsaWNrZWRUaW1lID0gTWF0aC5mbG9vcihfdGhpcy5nZXRZU2NhbGUoKS5pbnZlcnQoY2xpY2tlZFlQb3NpdGlvbikpOwoKICAgICAgX3RoaXMucHJvcHMuanVtcFRvVGFyZ2V0KHsKICAgICAgICB0aWVicmVha2VyOiAwLAogICAgICAgIHRpbWU6IGNsaWNrZWRUaW1lCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZ2V0WVNjYWxlIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMgPSBfdGhpcy5wcm9wcywKICAgICAgICAgIHN0YXJ0ID0gX3RoaXMkcHJvcHMuc3RhcnQsCiAgICAgICAgICBlbmQgPSBfdGhpcyRwcm9wcy5lbmQsCiAgICAgICAgICBoZWlnaHQgPSBfdGhpcyRwcm9wcy5oZWlnaHQ7CiAgICAgIHJldHVybiBjYWxjdWxhdGVZU2NhbGUoc3RhcnQsIGVuZCwgaGVpZ2h0KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImdldFBvc2l0aW9uT2ZUaW1lIiwgZnVuY3Rpb24gKHRpbWUpIHsKICAgICAgcmV0dXJuIF90aGlzLmdldFlTY2FsZSgpKHRpbWUpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAidXBkYXRlVGltZUN1cnNvciIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICB2YXIgc3ZnUG9zaXRpb24gPSBldmVudC5jdXJyZW50VGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICB2YXIgdGltZUN1cnNvclkgPSBldmVudC5jbGllbnRZIC0gc3ZnUG9zaXRpb24udG9wOwoKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIHRpbWVDdXJzb3JZOiB0aW1lQ3Vyc29yWQogICAgICB9KTsKICAgIH0pOwoKICAgIF90aGlzLnN0YXRlID0gewogICAgICB0aW1lQ3Vyc29yWTogMCwKICAgICAgdGFyZ2V0OiBwcm9wcy50YXJnZXQKICAgIH07CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoTG9nTWluaW1hcCwgW3sKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMyID0gdGhpcy5wcm9wcywKICAgICAgICAgIHN0YXJ0ID0gX3RoaXMkcHJvcHMyLnN0YXJ0LAogICAgICAgICAgZW5kID0gX3RoaXMkcHJvcHMyLmVuZCwKICAgICAgICAgIGNsYXNzTmFtZSA9IF90aGlzJHByb3BzMi5jbGFzc05hbWUsCiAgICAgICAgICBoZWlnaHQgPSBfdGhpcyRwcm9wczIuaGVpZ2h0LAogICAgICAgICAgaGlnaGxpZ2h0ZWRJbnRlcnZhbCA9IF90aGlzJHByb3BzMi5oaWdobGlnaHRlZEludGVydmFsLAogICAgICAgICAganVtcFRvVGFyZ2V0ID0gX3RoaXMkcHJvcHMyLmp1bXBUb1RhcmdldCwKICAgICAgICAgIHN1bW1hcnlCdWNrZXRzID0gX3RoaXMkcHJvcHMyLnN1bW1hcnlCdWNrZXRzLAogICAgICAgICAgc3VtbWFyeUhpZ2hsaWdodEJ1Y2tldHMgPSBfdGhpcyRwcm9wczIuc3VtbWFyeUhpZ2hsaWdodEJ1Y2tldHMsCiAgICAgICAgICB3aWR0aCA9IF90aGlzJHByb3BzMi53aWR0aDsKICAgICAgdmFyIF90aGlzJHN0YXRlID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIHRpbWVDdXJzb3JZID0gX3RoaXMkc3RhdGUudGltZUN1cnNvclksCiAgICAgICAgICB0YXJnZXQgPSBfdGhpcyRzdGF0ZS50YXJnZXQ7CgogICAgICB2YXIgX2NhbGN1bGF0ZVlTY2FsZSRkb21hID0gY2FsY3VsYXRlWVNjYWxlKHN0YXJ0LCBlbmQsIGhlaWdodCkuZG9tYWluKCksCiAgICAgICAgICBfY2FsY3VsYXRlWVNjYWxlJGRvbWEyID0gX3NsaWNlZFRvQXJyYXkoX2NhbGN1bGF0ZVlTY2FsZSRkb21hLCAyKSwKICAgICAgICAgIG1pblRpbWUgPSBfY2FsY3VsYXRlWVNjYWxlJGRvbWEyWzBdLAogICAgICAgICAgbWF4VGltZSA9IF9jYWxjdWxhdGVZU2NhbGUkZG9tYTJbMV07CgogICAgICB2YXIgdGlja0NvdW50ID0gaGVpZ2h0ID8gTWF0aC5mbG9vcihoZWlnaHQgLyA1MCkgOiAxMjsKICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTWluaW1hcFdyYXBwZXIsIHsKICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSwKICAgICAgICBoZWlnaHQ6IGhlaWdodCwKICAgICAgICBwcmVzZXJ2ZUFzcGVjdFJhdGlvOiAibm9uZSIsCiAgICAgICAgdmlld0JveDogIjAgMCAiLmNvbmNhdCh3aWR0aCwgIiAiKS5jb25jYXQoaGVpZ2h0KSwKICAgICAgICB3aWR0aDogd2lkdGgsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVDbGljaywKICAgICAgICBvbk1vdXNlTW92ZTogdGhpcy51cGRhdGVUaW1lQ3Vyc29yCiAgICAgIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTWluaW1hcEJvcmRlciwgewogICAgICAgIHgxOiBUSU1FUlVMRVJfV0lEVEgsCiAgICAgICAgeDI6IFRJTUVSVUxFUl9XSURUSCwKICAgICAgICB5MTogMCwKICAgICAgICB5MjogaGVpZ2h0CiAgICAgIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KF90aW1lX3J1bGVyLlRpbWVSdWxlciwgewogICAgICAgIHN0YXJ0OiBtaW5UaW1lLAogICAgICAgIGVuZDogbWF4VGltZSwKICAgICAgICB3aWR0aDogVElNRVJVTEVSX1dJRFRILAogICAgICAgIGhlaWdodDogaGVpZ2h0LAogICAgICAgIHRpY2tDb3VudDogdGlja0NvdW50CiAgICAgIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KCJnIiwgewogICAgICAgIHRyYW5zZm9ybTogInRyYW5zbGF0ZSgiLmNvbmNhdChUSU1FUlVMRVJfV0lEVEgsICIsIDApIikKICAgICAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChfZGVuc2l0eV9jaGFydC5EZW5zaXR5Q2hhcnQsIHsKICAgICAgICBidWNrZXRzOiBzdW1tYXJ5QnVja2V0cywKICAgICAgICBzdGFydDogbWluVGltZSwKICAgICAgICBlbmQ6IG1heFRpbWUsCiAgICAgICAgd2lkdGg6IHdpZHRoIC0gVElNRVJVTEVSX1dJRFRILAogICAgICAgIGhlaWdodDogaGVpZ2h0CiAgICAgIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KF9zZWFyY2hfbWFya2Vycy5TZWFyY2hNYXJrZXJzLCB7CiAgICAgICAgYnVja2V0czogc3VtbWFyeUhpZ2hsaWdodEJ1Y2tldHMgfHwgW10sCiAgICAgICAgc3RhcnQ6IG1pblRpbWUsCiAgICAgICAgZW5kOiBtYXhUaW1lLAogICAgICAgIHdpZHRoOiB3aWR0aCAtIFRJTUVSVUxFUl9XSURUSCwKICAgICAgICBoZWlnaHQ6IGhlaWdodCwKICAgICAgICBqdW1wVG9UYXJnZXQ6IGp1bXBUb1RhcmdldAogICAgICB9KSksIGhpZ2hsaWdodGVkSW50ZXJ2YWwgPyBSZWFjdC5jcmVhdGVFbGVtZW50KF9oaWdobGlnaHRlZF9pbnRlcnZhbC5IaWdobGlnaHRlZEludGVydmFsLCB7CiAgICAgICAgZW5kOiBoaWdobGlnaHRlZEludGVydmFsLmVuZCwKICAgICAgICBnZXRQb3NpdGlvbk9mVGltZTogdGhpcy5nZXRQb3NpdGlvbk9mVGltZSwKICAgICAgICBzdGFydDogaGlnaGxpZ2h0ZWRJbnRlcnZhbC5zdGFydCwKICAgICAgICB0YXJnZXRXaWR0aDogVElNRVJVTEVSX1dJRFRILAogICAgICAgIHdpZHRoOiB3aWR0aCwKICAgICAgICB0YXJnZXQ6IHRhcmdldAogICAgICB9KSA6IG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGltZUN1cnNvciwgewogICAgICAgIHgxOiBUSU1FUlVMRVJfV0lEVEgsCiAgICAgICAgeDI6IHdpZHRoLAogICAgICAgIHkxOiB0aW1lQ3Vyc29yWSwKICAgICAgICB5MjogdGltZUN1cnNvclkKICAgICAgfSkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIExvZ01pbmltYXA7Cn0oUmVhY3QuQ29tcG9uZW50KTsKCmV4cG9ydHMuTG9nTWluaW1hcCA9IExvZ01pbmltYXA7Cgp2YXIgTWluaW1hcEJvcmRlciA9IF9wdWJsaWMuZXVpU3R5bGVkLmxpbmUoX3RlbXBsYXRlT2JqZWN0KCksIGZ1bmN0aW9uIChwcm9wcykgewogIHJldHVybiBwcm9wcy50aGVtZS5ldWkuZXVpQ29sb3JNZWRpdW1TaGFkZTsKfSk7Cgp2YXIgVGltZUN1cnNvciA9IF9wdWJsaWMuZXVpU3R5bGVkLmxpbmUoX3RlbXBsYXRlT2JqZWN0MigpLCBmdW5jdGlvbiAocHJvcHMpIHsKICByZXR1cm4gcHJvcHMudGhlbWUuZGFya01vZGUgPyBwcm9wcy50aGVtZS5ldWkuZXVpQ29sb3JEYXJrZXN0U2hhZGUgOiBwcm9wcy50aGVtZS5ldWkuZXVpQ29sb3JEYXJrU2hhZGU7Cn0pOwoKdmFyIE1pbmltYXBXcmFwcGVyID0gX3B1YmxpYy5ldWlTdHlsZWQuc3ZnKF90ZW1wbGF0ZU9iamVjdDMoKSwgZnVuY3Rpb24gKHByb3BzKSB7CiAgcmV0dXJuIHByb3BzLnRoZW1lLmV1aS5ldWlDb2xvckVtcHR5U2hhZGU7Cn0sIFRpbWVDdXJzb3IsIFRpbWVDdXJzb3IpOw=="},null]}