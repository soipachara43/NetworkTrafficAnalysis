{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/kibana/public/management/sections/index_patterns/edit_index_pattern/edit_index_pattern.js","dependencies":[{"path":"src/legacy/core_plugins/kibana/public/management/sections/index_patterns/edit_index_pattern/edit_index_pattern.js","mtime":1589249549830},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnJlcXVpcmUoIi4vaW5kZXhfaGVhZGVyIik7CgpyZXF1aXJlKCIuL2NyZWF0ZV9lZGl0X2ZpZWxkIik7Cgp2YXIgX2RvY190aXRsZSA9IHJlcXVpcmUoInVpL2RvY190aXRsZSIpOwoKdmFyIF91cmwgPSByZXF1aXJlKCJ1aS91cmwiKTsKCnZhciBfZWRpdF9zZWN0aW9ucyA9IHJlcXVpcmUoIi4vZWRpdF9zZWN0aW9ucyIpOwoKdmFyIF9ub3RpZnkgPSByZXF1aXJlKCJ1aS9ub3RpZnkiKTsKCnZhciBfcm91dGVzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJ1aS9yb3V0ZXMiKSk7Cgp2YXIgX21vZHVsZXMgPSByZXF1aXJlKCJ1aS9tb2R1bGVzIik7Cgp2YXIgX2VkaXRfaW5kZXhfcGF0dGVybiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9lZGl0X2luZGV4X3BhdHRlcm4uaHRtbCIpKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcGx1Z2lucy9raWJhbmFfdXRpbHMvcHVibGljIik7Cgp2YXIgX3B1YmxpYzIgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wbHVnaW5zL2tpYmFuYV9sZWdhY3kvcHVibGljIik7Cgp2YXIgX2xlZ2FjeSA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uL21hbmFnZW1lbnQvcHVibGljL2xlZ2FjeSIpOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3JlYWN0RG9tID0gcmVxdWlyZSgicmVhY3QtZG9tIik7Cgp2YXIgX3NvdXJjZV9maWx0ZXJzX3RhYmxlID0gcmVxdWlyZSgiLi9zb3VyY2VfZmlsdGVyc190YWJsZSIpOwoKdmFyIF9pbmRleGVkX2ZpZWxkc190YWJsZSA9IHJlcXVpcmUoIi4vaW5kZXhlZF9maWVsZHNfdGFibGUiKTsKCnZhciBfc2NyaXB0ZWRfZmllbGRzX3RhYmxlID0gcmVxdWlyZSgiLi9zY3JpcHRlZF9maWVsZHNfdGFibGUiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9pMThuMiA9IHJlcXVpcmUoInVpL2kxOG4iKTsKCnZhciBfbmV3X3BsYXRmb3JtID0gcmVxdWlyZSgidWkvbmV3X3BsYXRmb3JtIik7Cgp2YXIgX2JyZWFkY3J1bWJzID0gcmVxdWlyZSgiLi4vYnJlYWRjcnVtYnMiKTsKCnZhciBfZWRpdF9pbmRleF9wYXR0ZXJuX3N0YXRlX2NvbnRhaW5lciA9IHJlcXVpcmUoIi4vZWRpdF9pbmRleF9wYXR0ZXJuX3N0YXRlX2NvbnRhaW5lciIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9Cgp2YXIgUkVBQ1RfU09VUkNFX0ZJTFRFUlNfRE9NX0VMRU1FTlRfSUQgPSAncmVhY3RTb3VyY2VGaWx0ZXJzVGFibGUnOwp2YXIgUkVBQ1RfSU5ERVhFRF9GSUVMRFNfRE9NX0VMRU1FTlRfSUQgPSAncmVhY3RJbmRleGVkRmllbGRzVGFibGUnOwp2YXIgUkVBQ1RfU0NSSVBURURfRklFTERTX0RPTV9FTEVNRU5UX0lEID0gJ3JlYWN0U2NyaXB0ZWRGaWVsZHNUYWJsZSc7CnZhciBUQUJfSU5ERVhFRF9GSUVMRFMgPSAnaW5kZXhlZEZpZWxkcyc7CnZhciBUQUJfU0NSSVBURURfRklFTERTID0gJ3NjcmlwdGVkRmllbGRzJzsKdmFyIFRBQl9TT1VSQ0VfRklMVEVSUyA9ICdzb3VyY2VGaWx0ZXJzJzsKCmZ1bmN0aW9uIHVwZGF0ZVNvdXJjZUZpbHRlcnNUYWJsZSgkc2NvcGUpIHsKICAkc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uICgpIHsKICAgIHZhciBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoUkVBQ1RfU09VUkNFX0ZJTFRFUlNfRE9NX0VMRU1FTlRfSUQpOwoKICAgIGlmICghbm9kZSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgKDAsIF9yZWFjdERvbS5yZW5kZXIpKF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2kxOG4yLkkxOG5Db250ZXh0LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9zb3VyY2VfZmlsdGVyc190YWJsZS5Tb3VyY2VGaWx0ZXJzVGFibGUsIHsKICAgICAgaW5kZXhQYXR0ZXJuOiAkc2NvcGUuaW5kZXhQYXR0ZXJuLAogICAgICBmaWx0ZXJGaWx0ZXI6ICRzY29wZS5maWVsZEZpbHRlciwKICAgICAgZmllbGRXaWxkY2FyZE1hdGNoZXI6ICRzY29wZS5maWVsZFdpbGRjYXJkTWF0Y2hlciwKICAgICAgb25BZGRPclJlbW92ZUZpbHRlcjogZnVuY3Rpb24gb25BZGRPclJlbW92ZUZpbHRlcigpIHsKICAgICAgICAkc2NvcGUuZWRpdFNlY3Rpb25zID0gJHNjb3BlLmVkaXRTZWN0aW9uc1Byb3ZpZGVyKCRzY29wZS5pbmRleFBhdHRlcm4sICRzY29wZS5maWVsZEZpbHRlciwgJHNjb3BlLmluZGV4UGF0dGVybkxpc3RQcm92aWRlcik7CiAgICAgICAgJHNjb3BlLnJlZnJlc2hGaWx0ZXJzKCk7CiAgICAgICAgJHNjb3BlLiRhcHBseSgpOwogICAgICB9CiAgICB9KSksIG5vZGUpOwogIH0pOwp9CgpmdW5jdGlvbiBkZXN0cm95U291cmNlRmlsdGVyc1RhYmxlKCkgewogIHZhciBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoUkVBQ1RfU09VUkNFX0ZJTFRFUlNfRE9NX0VMRU1FTlRfSUQpOwogIG5vZGUgJiYgKDAsIF9yZWFjdERvbS51bm1vdW50Q29tcG9uZW50QXROb2RlKShub2RlKTsKfQoKZnVuY3Rpb24gdXBkYXRlU2NyaXB0ZWRGaWVsZHNUYWJsZSgkc2NvcGUpIHsKICAkc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uICgpIHsKICAgIHZhciBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoUkVBQ1RfU0NSSVBURURfRklFTERTX0RPTV9FTEVNRU5UX0lEKTsKCiAgICBpZiAoIW5vZGUpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgICgwLCBfcmVhY3REb20ucmVuZGVyKShfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9pMThuMi5JMThuQ29udGV4dCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfc2NyaXB0ZWRfZmllbGRzX3RhYmxlLlNjcmlwdGVkRmllbGRzVGFibGUsIHsKICAgICAgaW5kZXhQYXR0ZXJuOiAkc2NvcGUuaW5kZXhQYXR0ZXJuLAogICAgICBmaWVsZEZpbHRlcjogJHNjb3BlLmZpZWxkRmlsdGVyLAogICAgICBzY3JpcHRlZEZpZWxkTGFuZ3VhZ2VGaWx0ZXI6ICRzY29wZS5zY3JpcHRlZEZpZWxkTGFuZ3VhZ2VGaWx0ZXIsCiAgICAgIGhlbHBlcnM6IHsKICAgICAgICByZWRpcmVjdFRvUm91dGU6IGZ1bmN0aW9uIHJlZGlyZWN0VG9Sb3V0ZShvYmosIHJvdXRlKSB7CiAgICAgICAgICAkc2NvcGUua2JuVXJsLmNoYW5nZVRvUm91dGUob2JqLCByb3V0ZSk7CiAgICAgICAgICAkc2NvcGUuJGFwcGx5KCk7CiAgICAgICAgfSwKICAgICAgICBnZXRSb3V0ZUhyZWY6IGZ1bmN0aW9uIGdldFJvdXRlSHJlZihvYmosIHJvdXRlKSB7CiAgICAgICAgICByZXR1cm4gJHNjb3BlLmtiblVybC5nZXRSb3V0ZUhyZWYob2JqLCByb3V0ZSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBvblJlbW92ZUZpZWxkOiBmdW5jdGlvbiBvblJlbW92ZUZpZWxkKCkgewogICAgICAgICRzY29wZS5lZGl0U2VjdGlvbnMgPSAkc2NvcGUuZWRpdFNlY3Rpb25zUHJvdmlkZXIoJHNjb3BlLmluZGV4UGF0dGVybiwgJHNjb3BlLmZpZWxkRmlsdGVyLCAkc2NvcGUuaW5kZXhQYXR0ZXJuTGlzdFByb3ZpZGVyKTsKICAgICAgICAkc2NvcGUucmVmcmVzaEZpbHRlcnMoKTsKICAgICAgICAkc2NvcGUuJGFwcGx5KCk7CiAgICAgIH0KICAgIH0pKSwgbm9kZSk7CiAgfSk7Cn0KCmZ1bmN0aW9uIGRlc3Ryb3lTY3JpcHRlZEZpZWxkc1RhYmxlKCkgewogIHZhciBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoUkVBQ1RfU0NSSVBURURfRklFTERTX0RPTV9FTEVNRU5UX0lEKTsKICBub2RlICYmICgwLCBfcmVhY3REb20udW5tb3VudENvbXBvbmVudEF0Tm9kZSkobm9kZSk7Cn0KCmZ1bmN0aW9uIHVwZGF0ZUluZGV4ZWRGaWVsZHNUYWJsZSgkc2NvcGUpIHsKICAkc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uICgpIHsKICAgIHZhciBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoUkVBQ1RfSU5ERVhFRF9GSUVMRFNfRE9NX0VMRU1FTlRfSUQpOwoKICAgIGlmICghbm9kZSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgKDAsIF9yZWFjdERvbS5yZW5kZXIpKF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2kxOG4yLkkxOG5Db250ZXh0LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9pbmRleGVkX2ZpZWxkc190YWJsZS5JbmRleGVkRmllbGRzVGFibGUsIHsKICAgICAgZmllbGRzOiAkc2NvcGUuZmllbGRzLAogICAgICBpbmRleFBhdHRlcm46ICRzY29wZS5pbmRleFBhdHRlcm4sCiAgICAgIGZpZWxkRmlsdGVyOiAkc2NvcGUuZmllbGRGaWx0ZXIsCiAgICAgIGZpZWxkV2lsZGNhcmRNYXRjaGVyOiAkc2NvcGUuZmllbGRXaWxkY2FyZE1hdGNoZXIsCiAgICAgIGluZGV4ZWRGaWVsZFR5cGVGaWx0ZXI6ICRzY29wZS5pbmRleGVkRmllbGRUeXBlRmlsdGVyLAogICAgICBoZWxwZXJzOiB7CiAgICAgICAgcmVkaXJlY3RUb1JvdXRlOiBmdW5jdGlvbiByZWRpcmVjdFRvUm91dGUob2JqLCByb3V0ZSkgewogICAgICAgICAgJHNjb3BlLmtiblVybC5jaGFuZ2VUb1JvdXRlKG9iaiwgcm91dGUpOwogICAgICAgICAgJHNjb3BlLiRhcHBseSgpOwogICAgICAgIH0sCiAgICAgICAgZ2V0RmllbGRJbmZvOiAkc2NvcGUuZ2V0RmllbGRJbmZvCiAgICAgIH0KICAgIH0pKSwgbm9kZSk7CiAgfSk7Cn0KCmZ1bmN0aW9uIGRlc3Ryb3lJbmRleGVkRmllbGRzVGFibGUoKSB7CiAgdmFyIG5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChSRUFDVF9JTkRFWEVEX0ZJRUxEU19ET01fRUxFTUVOVF9JRCk7CiAgbm9kZSAmJiAoMCwgX3JlYWN0RG9tLnVubW91bnRDb21wb25lbnRBdE5vZGUpKG5vZGUpOwp9CgpmdW5jdGlvbiBoYW5kbGVUYWJDaGFuZ2UoJHNjb3BlLCBuZXdUYWIpIHsKICBkZXN0cm95SW5kZXhlZEZpZWxkc1RhYmxlKCk7CiAgZGVzdHJveVNvdXJjZUZpbHRlcnNUYWJsZSgpOwogIGRlc3Ryb3lTY3JpcHRlZEZpZWxkc1RhYmxlKCk7CiAgdXBkYXRlVGFibGVzKCRzY29wZSwgbmV3VGFiKTsKfQoKZnVuY3Rpb24gdXBkYXRlVGFibGVzKCRzY29wZSwgY3VycmVudFRhYikgewogIHN3aXRjaCAoY3VycmVudFRhYikgewogICAgY2FzZSBUQUJfU0NSSVBURURfRklFTERTOgogICAgICByZXR1cm4gdXBkYXRlU2NyaXB0ZWRGaWVsZHNUYWJsZSgkc2NvcGUpOwoKICAgIGNhc2UgVEFCX0lOREVYRURfRklFTERTOgogICAgICByZXR1cm4gdXBkYXRlSW5kZXhlZEZpZWxkc1RhYmxlKCRzY29wZSk7CgogICAgY2FzZSBUQUJfU09VUkNFX0ZJTFRFUlM6CiAgICAgIHJldHVybiB1cGRhdGVTb3VyY2VGaWx0ZXJzVGFibGUoJHNjb3BlKTsKICB9Cn0KCl9yb3V0ZXMuZGVmYXVsdC53aGVuKCcvbWFuYWdlbWVudC9raWJhbmEvaW5kZXhfcGF0dGVybnMvOmluZGV4UGF0dGVybklkJywgewogIHRlbXBsYXRlOiBfZWRpdF9pbmRleF9wYXR0ZXJuLmRlZmF1bHQsCiAgazdCcmVhZGNydW1iczogX2JyZWFkY3J1bWJzLmdldEVkaXRCcmVhZGNydW1icywKICByZXNvbHZlOiB7CiAgICBpbmRleFBhdHRlcm46IGZ1bmN0aW9uIGluZGV4UGF0dGVybigkcm91dGUsIFByb21pc2UsIHJlZGlyZWN0V2hlbk1pc3NpbmcpIHsKICAgICAgdmFyIGluZGV4UGF0dGVybnMgPSBfbmV3X3BsYXRmb3JtLm5wU3RhcnQucGx1Z2lucy5kYXRhLmluZGV4UGF0dGVybnM7CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoaW5kZXhQYXR0ZXJucy5nZXQoJHJvdXRlLmN1cnJlbnQucGFyYW1zLmluZGV4UGF0dGVybklkKSkuY2F0Y2gocmVkaXJlY3RXaGVuTWlzc2luZygnL21hbmFnZW1lbnQva2liYW5hL2luZGV4X3BhdHRlcm5zJykpOwogICAgfQogIH0KfSk7CgpfbW9kdWxlcy51aU1vZHVsZXMuZ2V0KCdhcHBzL21hbmFnZW1lbnQnKS5jb250cm9sbGVyKCdtYW5hZ2VtZW50SW5kZXhQYXR0ZXJuc0VkaXQnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sICRyb3V0ZSwgUHJvbWlzZSwgY29uZmlnLCBQcml2YXRlKSB7CiAgdmFyIF9jcmVhdGVFZGl0SW5kZXhQYXR0ZSA9ICgwLCBfZWRpdF9pbmRleF9wYXR0ZXJuX3N0YXRlX2NvbnRhaW5lci5jcmVhdGVFZGl0SW5kZXhQYXR0ZXJuUGFnZVN0YXRlQ29udGFpbmVyKSh7CiAgICB1c2VIYXNoZWRVcmw6IGNvbmZpZy5nZXQoJ3N0YXRlOnN0b3JlSW5TZXNzaW9uU3RvcmFnZScpLAogICAgZGVmYXVsdFRhYjogVEFCX0lOREVYRURfRklFTERTCiAgfSksCiAgICAgIHN0YXJ0U3luY2luZ1N0YXRlID0gX2NyZWF0ZUVkaXRJbmRleFBhdHRlLnN0YXJ0U3luY2luZ1N0YXRlLAogICAgICBzdG9wU3luY2luZ1N0YXRlID0gX2NyZWF0ZUVkaXRJbmRleFBhdHRlLnN0b3BTeW5jaW5nU3RhdGUsCiAgICAgIHNldEN1cnJlbnRUYWIgPSBfY3JlYXRlRWRpdEluZGV4UGF0dGUuc2V0Q3VycmVudFRhYiwKICAgICAgZ2V0Q3VycmVudFRhYiA9IF9jcmVhdGVFZGl0SW5kZXhQYXR0ZS5nZXRDdXJyZW50VGFiLAogICAgICBzdGF0ZSQgPSBfY3JlYXRlRWRpdEluZGV4UGF0dGUuc3RhdGUkOwoKICAkc2NvcGUuZ2V0Q3VycmVudFRhYiA9IGdldEN1cnJlbnRUYWI7CiAgJHNjb3BlLnNldEN1cnJlbnRUYWIgPSBzZXRDdXJyZW50VGFiOwogIHZhciBzdGF0ZUNoYW5nZWRTdWIgPSAoMCwgX3B1YmxpYzIuc3Vic2NyaWJlV2l0aFNjb3BlKSgkc2NvcGUsIHN0YXRlJCwgewogICAgbmV4dDogZnVuY3Rpb24gbmV4dChfcmVmKSB7CiAgICAgIHZhciB0YWIgPSBfcmVmLnRhYjsKICAgICAgaGFuZGxlVGFiQ2hhbmdlKCRzY29wZSwgdGFiKTsKICAgIH0KICB9LCBfbm90aWZ5LmZhdGFsRXJyb3IpOwogIGhhbmRsZVRhYkNoYW5nZSgkc2NvcGUsIGdldEN1cnJlbnRUYWIoKSk7IC8vIHNldHVwIGluaXRpYWwgdGFiIGRlcGVuZGluZyBvbiBpbml0aWFsIHRhYiBzdGF0ZQoKICBzdGFydFN5bmNpbmdTdGF0ZSgpOyAvLyBzdGFydHMgc3luY2luZyBzdGF0ZSBiZXR3ZWVuIHN0YXRlIGNvbnRhaW5lciBhbmQgdXJsCgogIHZhciBkZXN0cm95U3RhdGUgPSBmdW5jdGlvbiBkZXN0cm95U3RhdGUoKSB7CiAgICBzdGF0ZUNoYW5nZWRTdWIudW5zdWJzY3JpYmUoKTsKICAgIHN0b3BTeW5jaW5nU3RhdGUoKTsKICB9OwoKICAkc2NvcGUuZmllbGRXaWxkY2FyZE1hdGNoZXIgPSBmdW5jdGlvbiAoKSB7CiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgIH0KCiAgICByZXR1cm4gX3B1YmxpYy5maWVsZFdpbGRjYXJkTWF0Y2hlci5hcHBseSh2b2lkIDAsIGFyZ3MuY29uY2F0KFtjb25maWcuZ2V0KCdtZXRhRmllbGRzJyldKSk7CiAgfTsKCiAgJHNjb3BlLmVkaXRTZWN0aW9uc1Byb3ZpZGVyID0gUHJpdmF0ZShfZWRpdF9zZWN0aW9ucy5JbmRpY2VzRWRpdFNlY3Rpb25zUHJvdmlkZXIpOwogICRzY29wZS5rYm5VcmwgPSBQcml2YXRlKF91cmwuS2JuVXJsUHJvdmlkZXIpOwogICRzY29wZS5pbmRleFBhdHRlcm4gPSAkcm91dGUuY3VycmVudC5sb2NhbHMuaW5kZXhQYXR0ZXJuOwogICRzY29wZS5pbmRleFBhdHRlcm5MaXN0UHJvdmlkZXIgPSBfbGVnYWN5LnNldHVwLmluZGV4UGF0dGVybi5saXN0OwogICRzY29wZS5pbmRleFBhdHRlcm4udGFncyA9IF9sZWdhY3kuc2V0dXAuaW5kZXhQYXR0ZXJuLmxpc3QuZ2V0SW5kZXhQYXR0ZXJuVGFncygkc2NvcGUuaW5kZXhQYXR0ZXJuLCAkc2NvcGUuaW5kZXhQYXR0ZXJuLmlkID09PSBjb25maWcuZ2V0KCdkZWZhdWx0SW5kZXgnKSk7CiAgJHNjb3BlLmdldEZpZWxkSW5mbyA9IF9sZWdhY3kuc2V0dXAuaW5kZXhQYXR0ZXJuLmxpc3QuZ2V0RmllbGRJbmZvLmJpbmQoX2xlZ2FjeS5zZXR1cC5pbmRleFBhdHRlcm4ubGlzdCk7CgogIF9kb2NfdGl0bGUuZG9jVGl0bGUuY2hhbmdlKCRzY29wZS5pbmRleFBhdHRlcm4udGl0bGUpOwoKICB2YXIgb3RoZXJQYXR0ZXJucyA9IF9sb2Rhc2guZGVmYXVsdC5maWx0ZXIoJHJvdXRlLmN1cnJlbnQubG9jYWxzLmluZGV4UGF0dGVybnMsIGZ1bmN0aW9uIChwYXR0ZXJuKSB7CiAgICByZXR1cm4gcGF0dGVybi5pZCAhPT0gJHNjb3BlLmluZGV4UGF0dGVybi5pZDsKICB9KTsKCiAgJHNjb3BlLiR3YXRjaCgnaW5kZXhQYXR0ZXJuLmZpZWxkcycsIGZ1bmN0aW9uICgpIHsKICAgICRzY29wZS5lZGl0U2VjdGlvbnMgPSAkc2NvcGUuZWRpdFNlY3Rpb25zUHJvdmlkZXIoJHNjb3BlLmluZGV4UGF0dGVybiwgJHNjb3BlLmZpZWxkRmlsdGVyLCBfbGVnYWN5LnNldHVwLmluZGV4UGF0dGVybi5saXN0KTsKICAgICRzY29wZS5yZWZyZXNoRmlsdGVycygpOwogICAgJHNjb3BlLmZpZWxkcyA9ICRzY29wZS5pbmRleFBhdHRlcm4uZ2V0Tm9uU2NyaXB0ZWRGaWVsZHMoKTsKICB9KTsKICAkc2NvcGUubWlncmF0aW9uID0gewogICAgaXNNaWdyYXRpbmc6IGZhbHNlLAogICAgbmV3VGl0bGU6ICRzY29wZS5pbmRleFBhdHRlcm4uZ2V0SW5kZXgoKQogIH07CiAgJHNjb3BlLm1pZ3JhdGUgPQogIC8qI19fUFVSRV9fKi8KICBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgJHNjb3BlLm1pZ3JhdGlvbi5pc01pZ3JhdGluZyA9IHRydWU7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gJHNjb3BlLmluZGV4UGF0dGVybi5taWdyYXRlKCRzY29wZS5taWdyYXRpb24ubmV3VGl0bGUpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgJHNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICRzY29wZS5taWdyYXRpb24uaXNNaWdyYXRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKCiAgJHNjb3BlLnJlZnJlc2hGaWx0ZXJzID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGluZGV4ZWRGaWVsZFR5cGVzID0gW107CiAgICB2YXIgc2NyaXB0ZWRGaWVsZExhbmd1YWdlcyA9IFtdOwogICAgJHNjb3BlLmluZGV4UGF0dGVybi5maWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQpIHsKICAgICAgaWYgKGZpZWxkLnNjcmlwdGVkKSB7CiAgICAgICAgc2NyaXB0ZWRGaWVsZExhbmd1YWdlcy5wdXNoKGZpZWxkLmxhbmcpOwogICAgICB9IGVsc2UgewogICAgICAgIGluZGV4ZWRGaWVsZFR5cGVzLnB1c2goZmllbGQudHlwZSk7CiAgICAgIH0KICAgIH0pOwogICAgJHNjb3BlLmluZGV4ZWRGaWVsZFR5cGVzID0gX2xvZGFzaC5kZWZhdWx0LnVuaXF1ZShpbmRleGVkRmllbGRUeXBlcyk7CiAgICAkc2NvcGUuc2NyaXB0ZWRGaWVsZExhbmd1YWdlcyA9IF9sb2Rhc2guZGVmYXVsdC51bmlxdWUoc2NyaXB0ZWRGaWVsZExhbmd1YWdlcyk7CiAgfTsKCiAgJHNjb3BlLmNoYW5nZUZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXIsIHZhbCkgewogICAgJHNjb3BlW2ZpbHRlcl0gPSB2YWwgfHwgJyc7IC8vIG51bGwgY2F1c2VzIGZpbHRlciB0byBjaGVjayBmb3IgbnVsbCBleHBsaWNpdGx5CiAgfTsKCiAgJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oJ2luZGV4UGF0dGVybi5maWVsZHMnLCBmdW5jdGlvbiAoKSB7CiAgICAkc2NvcGUuY29uZmxpY3RGaWVsZHMgPSAkc2NvcGUuaW5kZXhQYXR0ZXJuLmZpZWxkcy5maWx0ZXIoZnVuY3Rpb24gKGZpZWxkKSB7CiAgICAgIHJldHVybiBmaWVsZC50eXBlID09PSAnY29uZmxpY3QnOwogICAgfSk7CiAgfSk7CgogICRzY29wZS5yZWZyZXNoRmllbGRzID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGNvbmZpcm1NZXNzYWdlID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5tYW5hZ2VtZW50LmVkaXRJbmRleFBhdHRlcm4ucmVmcmVzaExhYmVsJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ1RoaXMgYWN0aW9uIHJlc2V0cyB0aGUgcG9wdWxhcml0eSBjb3VudGVyIG9mIGVhY2ggZmllbGQuJwogICAgfSk7CgogICAgdmFyIGNvbmZpcm1Nb2RhbE9wdGlvbnMgPSB7CiAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgna2JuLm1hbmFnZW1lbnQuZWRpdEluZGV4UGF0dGVybi5yZWZyZXNoQnV0dG9uJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmVmcmVzaCcKICAgICAgfSksCiAgICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgna2JuLm1hbmFnZW1lbnQuZWRpdEluZGV4UGF0dGVybi5yZWZyZXNoSGVhZGVyJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmVmcmVzaCBmaWVsZCBsaXN0PycKICAgICAgfSkKICAgIH07CgogICAgX25ld19wbGF0Zm9ybS5ucFN0YXJ0LmNvcmUub3ZlcmxheXMub3BlbkNvbmZpcm0oY29uZmlybU1lc3NhZ2UsIGNvbmZpcm1Nb2RhbE9wdGlvbnMpLnRoZW4oCiAgICAvKiNfX1BVUkVfXyovCiAgICBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGlzQ29uZmlybWVkKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghaXNDb25maXJtZWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmluZGV4UGF0dGVybi5pbml0KHRydWUpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAkc2NvcGUuZmllbGRzID0gJHNjb3BlLmluZGV4UGF0dGVybi5nZXROb25TY3JpcHRlZEZpZWxkcygpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgcmV0dXJuIF9yZWYzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCkpOwogIH07CgogICRzY29wZS5yZW1vdmVQYXR0ZXJuID0gZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gZG9SZW1vdmUoKSB7CiAgICAgIGlmICgkc2NvcGUuaW5kZXhQYXR0ZXJuLmlkID09PSBjb25maWcuZ2V0KCdkZWZhdWx0SW5kZXgnKSkgewogICAgICAgIGNvbmZpZy5yZW1vdmUoJ2RlZmF1bHRJbmRleCcpOwoKICAgICAgICBpZiAob3RoZXJQYXR0ZXJucy5sZW5ndGgpIHsKICAgICAgICAgIGNvbmZpZy5zZXQoJ2RlZmF1bHRJbmRleCcsIG90aGVyUGF0dGVybnNbMF0uaWQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgUHJvbWlzZS5yZXNvbHZlKCRzY29wZS5pbmRleFBhdHRlcm4uZGVzdHJveSgpKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAkbG9jYXRpb24udXJsKCcvbWFuYWdlbWVudC9raWJhbmEvaW5kZXhfcGF0dGVybnMnKTsKICAgICAgfSkuY2F0Y2goX25vdGlmeS5mYXRhbEVycm9yKTsKICAgIH0KCiAgICB2YXIgY29uZmlybU1vZGFsT3B0aW9ucyA9IHsKICAgICAgY29uZmlybUJ1dHRvblRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCdrYm4ubWFuYWdlbWVudC5lZGl0SW5kZXhQYXR0ZXJuLmRlbGV0ZUJ1dHRvbicsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0RlbGV0ZScKICAgICAgfSksCiAgICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgna2JuLm1hbmFnZW1lbnQuZWRpdEluZGV4UGF0dGVybi5kZWxldGVIZWFkZXInLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdEZWxldGUgaW5kZXggcGF0dGVybj8nCiAgICAgIH0pCiAgICB9OwoKICAgIF9uZXdfcGxhdGZvcm0ubnBTdGFydC5jb3JlLm92ZXJsYXlzLm9wZW5Db25maXJtKCcnLCBjb25maXJtTW9kYWxPcHRpb25zKS50aGVuKGZ1bmN0aW9uIChpc0NvbmZpcm1lZCkgewogICAgICBpZiAoaXNDb25maXJtZWQpIHsKICAgICAgICBkb1JlbW92ZSgpOwogICAgICB9CiAgICB9KTsKICB9OwoKICAkc2NvcGUuc2V0RGVmYXVsdFBhdHRlcm4gPSBmdW5jdGlvbiAoKSB7CiAgICBjb25maWcuc2V0KCdkZWZhdWx0SW5kZXgnLCAkc2NvcGUuaW5kZXhQYXR0ZXJuLmlkKTsKICB9OwoKICAkc2NvcGUuc2V0SW5kZXhQYXR0ZXJuc1RpbWVGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkgewogICAgaWYgKGZpZWxkLnR5cGUgIT09ICdkYXRlJykgewogICAgICB2YXIgZXJyb3JNZXNzYWdlID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5tYW5hZ2VtZW50LmVkaXRJbmRleFBhdHRlcm4ubm90RGF0ZUVycm9yTWVzc2FnZScsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1RoYXQgZmllbGQgaXMgYSB7ZmllbGRUeXBlfSBub3QgYSBkYXRlLicsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBmaWVsZFR5cGU6IGZpZWxkLnR5cGUKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgX25vdGlmeS50b2FzdE5vdGlmaWNhdGlvbnMuYWRkRGFuZ2VyKGVycm9yTWVzc2FnZSk7CgogICAgICByZXR1cm47CiAgICB9CgogICAgJHNjb3BlLmluZGV4UGF0dGVybi50aW1lRmllbGROYW1lID0gZmllbGQubmFtZTsKICAgIHJldHVybiAkc2NvcGUuaW5kZXhQYXR0ZXJuLnNhdmUoKTsKICB9OwoKICAkc2NvcGUuJHdhdGNoKCdmaWVsZEZpbHRlcicsIGZ1bmN0aW9uICgpIHsKICAgICRzY29wZS5lZGl0U2VjdGlvbnMgPSAkc2NvcGUuZWRpdFNlY3Rpb25zUHJvdmlkZXIoJHNjb3BlLmluZGV4UGF0dGVybiwgJHNjb3BlLmZpZWxkRmlsdGVyLCBfbGVnYWN5LnNldHVwLmluZGV4UGF0dGVybi5saXN0KTsKCiAgICBpZiAoJHNjb3BlLmZpZWxkRmlsdGVyID09PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHVwZGF0ZVRhYmxlcygkc2NvcGUsIGdldEN1cnJlbnRUYWIoKSk7CiAgfSk7CiAgJHNjb3BlLiR3YXRjaCgnaW5kZXhlZEZpZWxkVHlwZUZpbHRlcicsIGZ1bmN0aW9uICgpIHsKICAgIGlmICgkc2NvcGUuaW5kZXhlZEZpZWxkVHlwZUZpbHRlciAhPT0gdW5kZWZpbmVkICYmIGdldEN1cnJlbnRUYWIoKSA9PT0gVEFCX0lOREVYRURfRklFTERTKSB7CiAgICAgIHVwZGF0ZUluZGV4ZWRGaWVsZHNUYWJsZSgkc2NvcGUpOwogICAgfQogIH0pOwogICRzY29wZS4kd2F0Y2goJ3NjcmlwdGVkRmllbGRMYW5ndWFnZUZpbHRlcicsIGZ1bmN0aW9uICgpIHsKICAgIGlmICgkc2NvcGUuc2NyaXB0ZWRGaWVsZExhbmd1YWdlRmlsdGVyICE9PSB1bmRlZmluZWQgJiYgZ2V0Q3VycmVudFRhYigpID09PSBUQUJfU0NSSVBURURfRklFTERTKSB7CiAgICAgIHVwZGF0ZVNjcmlwdGVkRmllbGRzVGFibGUoJHNjb3BlKTsKICAgIH0KICB9KTsKICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHsKICAgIGRlc3Ryb3lJbmRleGVkRmllbGRzVGFibGUoKTsKICAgIGRlc3Ryb3lTY3JpcHRlZEZpZWxkc1RhYmxlKCk7CiAgICBkZXN0cm95U291cmNlRmlsdGVyc1RhYmxlKCk7CiAgICBkZXN0cm95U3RhdGUoKTsKICB9KTsKfSk7"},null]}