{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/maps/public/layers/fields/es_agg_field.js","dependencies":[{"path":"x-pack/legacy/plugins/maps/public/layers/fields/es_agg_field.js","mtime":1589249552436},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmVzQWdnRmllbGRzRmFjdG9yeSA9IGVzQWdnRmllbGRzRmFjdG9yeTsKZXhwb3J0cy5FU0FnZ0ZpZWxkID0gdm9pZCAwOwoKdmFyIF9lc19kb2NfZmllbGQgPSByZXF1aXJlKCIuL2VzX2RvY19maWVsZCIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuLi8uLi8uLi9jb21tb24vY29uc3RhbnRzIik7Cgp2YXIgX2lzX21ldHJpY19jb3VudGFibGUgPSByZXF1aXJlKCIuLi91dGlsL2lzX21ldHJpY19jb3VudGFibGUiKTsKCnZhciBfZXNfYWdnX3V0aWxzID0gcmVxdWlyZSgiLi4vdXRpbC9lc19hZ2dfdXRpbHMiKTsKCnZhciBfdG9wX3Rlcm1fcGVyY2VudGFnZV9maWVsZCA9IHJlcXVpcmUoIi4vdG9wX3Rlcm1fcGVyY2VudGFnZV9maWVsZCIpOwoKdmFyIF90b29sdGlwX3Byb3BlcnR5ID0gcmVxdWlyZSgiLi4vdG9vbHRpcHMvdG9vbHRpcF9wcm9wZXJ0eSIpOwoKdmFyIF9lc19hZ2dfdG9vbHRpcF9wcm9wZXJ0eSA9IHJlcXVpcmUoIi4uL3Rvb2x0aXBzL2VzX2FnZ190b29sdGlwX3Byb3BlcnR5Iik7CgpmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7CiAgdHJ5IHsKICAgIHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsKICAgIHZhciB2YWx1ZSA9IGluZm8udmFsdWU7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIHJlamVjdChlcnJvcik7CiAgICByZXR1cm47CiAgfQoKICBpZiAoaW5mby5kb25lKSB7CiAgICByZXNvbHZlKHZhbHVlKTsKICB9IGVsc2UgewogICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOwogIH0KfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgdmFyIHNlbGYgPSB0aGlzLAogICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7CgogICAgICBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgewogICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsKICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7CiAgICAgIH0KCiAgICAgIF9uZXh0KHVuZGVmaW5lZCk7CiAgICB9KTsKICB9Owp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIEVTQWdnRmllbGQgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBFU0FnZ0ZpZWxkKF9yZWYpIHsKICAgIHZhciBsYWJlbCA9IF9yZWYubGFiZWwsCiAgICAgICAgc291cmNlID0gX3JlZi5zb3VyY2UsCiAgICAgICAgYWdnVHlwZSA9IF9yZWYuYWdnVHlwZSwKICAgICAgICBlc0RvY0ZpZWxkID0gX3JlZi5lc0RvY0ZpZWxkLAogICAgICAgIG9yaWdpbiA9IF9yZWYub3JpZ2luOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFU0FnZ0ZpZWxkKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIl9zb3VyY2UiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiX29yaWdpbiIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJfbGFiZWwiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiX2FnZ1R5cGUiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiX2VzRG9jRmllbGQiLCB2b2lkIDApOwoKICAgIHRoaXMuX3NvdXJjZSA9IHNvdXJjZTsKICAgIHRoaXMuX29yaWdpbiA9IG9yaWdpbjsKICAgIHRoaXMuX2xhYmVsID0gbGFiZWw7CiAgICB0aGlzLl9hZ2dUeXBlID0gYWdnVHlwZTsKICAgIHRoaXMuX2VzRG9jRmllbGQgPSBlc0RvY0ZpZWxkOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEVTQWdnRmllbGQsIFt7CiAgICBrZXk6ICJnZXRTb3VyY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNvdXJjZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3NvdXJjZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRPcmlnaW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldE9yaWdpbigpIHsKICAgICAgcmV0dXJuIHRoaXMuX29yaWdpbjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXROYW1lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXROYW1lKCkgewogICAgICByZXR1cm4gdGhpcy5fc291cmNlLmdldEFnZ0tleSh0aGlzLmdldEFnZ1R5cGUoKSwgdGhpcy5nZXRSb290TmFtZSgpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRSb290TmFtZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Um9vdE5hbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLl9nZXRFU0RvY0ZpZWxkTmFtZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldExhYmVsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0TGFiZWwgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHRoaXMuX2xhYmVsID8gdGhpcy5fbGFiZWwgOiB0aGlzLl9zb3VyY2UuZ2V0QWdnTGFiZWwodGhpcy5nZXRBZ2dUeXBlKCksIHRoaXMuZ2V0Um9vdE5hbWUoKSkpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0TGFiZWwoKSB7CiAgICAgICAgcmV0dXJuIF9nZXRMYWJlbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0TGFiZWw7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJnZXRBZ2dUeXBlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBZ2dUeXBlKCkgewogICAgICByZXR1cm4gdGhpcy5fYWdnVHlwZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc1ZhbGlkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc1ZhbGlkKCkgewogICAgICByZXR1cm4gdGhpcy5nZXRBZ2dUeXBlKCkgPT09IF9jb25zdGFudHMuQUdHX1RZUEUuQ09VTlQgPyB0cnVlIDogISF0aGlzLl9lc0RvY0ZpZWxkOwogICAgfQogIH0sIHsKICAgIGtleTogImdldERhdGFUeXBlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0RGF0YVR5cGUgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHRoaXMuZ2V0QWdnVHlwZSgpID09PSBfY29uc3RhbnRzLkFHR19UWVBFLlRFUk1TID8gJ3N0cmluZycgOiAnbnVtYmVyJyk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldERhdGFUeXBlKCkgewogICAgICAgIHJldHVybiBfZ2V0RGF0YVR5cGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldERhdGFUeXBlOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiX2dldEVTRG9jRmllbGROYW1lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0RVNEb2NGaWVsZE5hbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLl9lc0RvY0ZpZWxkID8gdGhpcy5fZXNEb2NGaWVsZC5nZXROYW1lKCkgOiAnJzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVUb29sdGlwUHJvcGVydHkiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9jcmVhdGVUb29sdGlwUHJvcGVydHkgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyh2YWx1ZSkgewogICAgICAgIHZhciBpbmRleFBhdHRlcm4sIHRvb2x0aXBQcm9wZXJ0eTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NvdXJjZS5nZXRJbmRleFBhdHRlcm4oKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgaW5kZXhQYXR0ZXJuID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDMudDAgPSBfdG9vbHRpcF9wcm9wZXJ0eS5Ub29sdGlwUHJvcGVydHk7CiAgICAgICAgICAgICAgICBfY29udGV4dDMudDEgPSB0aGlzLmdldE5hbWUoKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldExhYmVsKCk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MiA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLnQzID0gdmFsdWU7CiAgICAgICAgICAgICAgICB0b29sdGlwUHJvcGVydHkgPSBuZXcgX2NvbnRleHQzLnQwKF9jb250ZXh0My50MSwgX2NvbnRleHQzLnQyLCBfY29udGV4dDMudDMpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIG5ldyBfZXNfYWdnX3Rvb2x0aXBfcHJvcGVydHkuRVNBZ2dUb29sdGlwUHJvcGVydHkodG9vbHRpcFByb3BlcnR5LCBpbmRleFBhdHRlcm4sIHRoaXMpKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVRvb2x0aXBQcm9wZXJ0eShfeCkgewogICAgICAgIHJldHVybiBfY3JlYXRlVG9vbHRpcFByb3BlcnR5LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjcmVhdGVUb29sdGlwUHJvcGVydHk7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJnZXRWYWx1ZUFnZ0RzbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWVBZ2dEc2woaW5kZXhQYXR0ZXJuKSB7CiAgICAgIGlmICh0aGlzLmdldEFnZ1R5cGUoKSA9PT0gX2NvbnN0YW50cy5BR0dfVFlQRS5DT1VOVCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICB2YXIgZmllbGQgPSAoMCwgX2VzX2FnZ191dGlscy5nZXRGaWVsZCkoaW5kZXhQYXR0ZXJuLCB0aGlzLmdldFJvb3ROYW1lKCkpOwogICAgICB2YXIgYWdnVHlwZSA9IHRoaXMuZ2V0QWdnVHlwZSgpOwogICAgICB2YXIgYWdnQm9keSA9IGFnZ1R5cGUgPT09IF9jb25zdGFudHMuQUdHX1RZUEUuVEVSTVMgPyB7CiAgICAgICAgc2l6ZTogMSwKICAgICAgICBzaGFyZF9zaXplOiAxCiAgICAgIH0gOiB7fTsKICAgICAgcmV0dXJuIF9kZWZpbmVQcm9wZXJ0eSh7fSwgYWdnVHlwZSwgKDAsIF9lc19hZ2dfdXRpbHMuYWRkRmllbGRUb0RTTCkoYWdnQm9keSwgZmllbGQpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRCdWNrZXRDb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QnVja2V0Q291bnQoKSB7CiAgICAgIC8vIHRlcm1zIGFnZ3JlZ2F0aW9uIGluY3JlYXNlcyB0aGUgb3ZlcmFsbCBudW1iZXIgb2YgYnVja2V0cyBwZXIgc3BsaXQgYnVja2V0CiAgICAgIHJldHVybiB0aGlzLmdldEFnZ1R5cGUoKSA9PT0gX2NvbnN0YW50cy5BR0dfVFlQRS5URVJNUyA/IDEgOiAwOwogICAgfQogIH0sIHsKICAgIGtleTogInN1cHBvcnRzRmllbGRNZXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdXBwb3J0c0ZpZWxkTWV0YSgpIHsKICAgICAgLy8gY291bnQgYW5kIHN1bSBhZ2dyZWdhdGlvbnMgYXJlIG5vdCB3aXRoaW4gZmllbGQgYm91bmRzIHNvIHRoZXkgZG8gbm90IHN1cHBvcnQgZmllbGQgbWV0YS4KICAgICAgcmV0dXJuICEoMCwgX2lzX21ldHJpY19jb3VudGFibGUuaXNNZXRyaWNDb3VudGFibGUpKHRoaXMuZ2V0QWdnVHlwZSgpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjYW5WYWx1ZUJlRm9ybWF0dGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5WYWx1ZUJlRm9ybWF0dGVkKCkgewogICAgICAvLyBEbyBub3QgdXNlIGZpZWxkIGZvcm1hdHRlcnMgZm9yIGNvdW50aW5nIG1ldHJpY3MKICAgICAgcmV0dXJuICFbX2NvbnN0YW50cy5BR0dfVFlQRS5DT1VOVCwgX2NvbnN0YW50cy5BR0dfVFlQRS5VTklRVUVfQ09VTlRdLmluY2x1ZGVzKHRoaXMuZ2V0QWdnVHlwZSgpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRPcmRpbmFsRmllbGRNZXRhUmVxdWVzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldE9yZGluYWxGaWVsZE1ldGFSZXF1ZXN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCB0aGlzLl9lc0RvY0ZpZWxkID8gdGhpcy5fZXNEb2NGaWVsZC5nZXRPcmRpbmFsRmllbGRNZXRhUmVxdWVzdCgpIDogbnVsbCk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldE9yZGluYWxGaWVsZE1ldGFSZXF1ZXN0KCkgewogICAgICAgIHJldHVybiBfZ2V0T3JkaW5hbEZpZWxkTWV0YVJlcXVlc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldE9yZGluYWxGaWVsZE1ldGFSZXF1ZXN0OwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZ2V0Q2F0ZWdvcmljYWxGaWVsZE1ldGFSZXF1ZXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0Q2F0ZWdvcmljYWxGaWVsZE1ldGFSZXF1ZXN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iLCB0aGlzLl9lc0RvY0ZpZWxkID8gdGhpcy5fZXNEb2NGaWVsZC5nZXRDYXRlZ29yaWNhbEZpZWxkTWV0YVJlcXVlc3QoKSA6IG51bGwpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRDYXRlZ29yaWNhbEZpZWxkTWV0YVJlcXVlc3QoKSB7CiAgICAgICAgcmV0dXJuIF9nZXRDYXRlZ29yaWNhbEZpZWxkTWV0YVJlcXVlc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldENhdGVnb3JpY2FsRmllbGRNZXRhUmVxdWVzdDsKICAgIH0oKQogIH1dKTsKCiAgcmV0dXJuIEVTQWdnRmllbGQ7Cn0oKTsKCmV4cG9ydHMuRVNBZ2dGaWVsZCA9IEVTQWdnRmllbGQ7CgpmdW5jdGlvbiBlc0FnZ0ZpZWxkc0ZhY3RvcnkoYWdnRGVzY3JpcHRvciwgc291cmNlLCBvcmlnaW4pIHsKICB2YXIgYWdnRmllbGQgPSBuZXcgRVNBZ2dGaWVsZCh7CiAgICBsYWJlbDogYWdnRGVzY3JpcHRvci5sYWJlbCwKICAgIGVzRG9jRmllbGQ6IGFnZ0Rlc2NyaXB0b3IuZmllbGQgPyBuZXcgX2VzX2RvY19maWVsZC5FU0RvY0ZpZWxkKHsKICAgICAgZmllbGROYW1lOiBhZ2dEZXNjcmlwdG9yLmZpZWxkLAogICAgICBzb3VyY2U6IHNvdXJjZSwKICAgICAgb3JpZ2luOiBvcmlnaW4KICAgIH0pIDogdW5kZWZpbmVkLAogICAgYWdnVHlwZTogYWdnRGVzY3JpcHRvci50eXBlLAogICAgc291cmNlOiBzb3VyY2UsCiAgICBvcmlnaW46IG9yaWdpbgogIH0pOwogIHZhciBhZ2dGaWVsZHMgPSBbYWdnRmllbGRdOwoKICBpZiAoYWdnRGVzY3JpcHRvci5maWVsZCAmJiBhZ2dEZXNjcmlwdG9yLnR5cGUgPT09IF9jb25zdGFudHMuQUdHX1RZUEUuVEVSTVMpIHsKICAgIGFnZ0ZpZWxkcy5wdXNoKG5ldyBfdG9wX3Rlcm1fcGVyY2VudGFnZV9maWVsZC5Ub3BUZXJtUGVyY2VudGFnZUZpZWxkKGFnZ0ZpZWxkKSk7CiAgfQoKICByZXR1cm4gYWdnRmllbGRzOwp9"},null]}