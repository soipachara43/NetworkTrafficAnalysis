{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/plugins/data/public/search/expressions/esaggs.js","dependencies":[{"path":"src/plugins/data/public/search/expressions/esaggs.js","mtime":1589249550675},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmVzYWdncyA9IHZvaWQgMDsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vcGx1Z2lucy9raWJhbmFfdXRpbHMvcHVibGljIik7Cgp2YXIgX3NlYXJjaF9zb3VyY2UgPSByZXF1aXJlKCIuLi9zZWFyY2hfc291cmNlIik7Cgp2YXIgX3RhYmlmeSA9IHJlcXVpcmUoIi4uL3RhYmlmeSIpOwoKdmFyIF9jb21tb24gPSByZXF1aXJlKCIuLi8uLi8uLi9jb21tb24iKTsKCnZhciBfcXVlcnkgPSByZXF1aXJlKCIuLi8uLi9xdWVyeSIpOwoKdmFyIF9zZXJ2aWNlcyA9IHJlcXVpcmUoIi4uLy4uL3NlcnZpY2VzIik7Cgp2YXIgX2J1aWxkX3RhYnVsYXJfaW5zcGVjdG9yX2RhdGEgPSByZXF1aXJlKCIuL2J1aWxkX3RhYnVsYXJfaW5zcGVjdG9yX2RhdGEiKTsKCnZhciBfdXRpbHMgPSByZXF1aXJlKCIuL3V0aWxzIik7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgewogIHRyeSB7CiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7CiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICByZWplY3QoZXJyb3IpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKGluZm8uZG9uZSkgewogICAgcmVzb2x2ZSh2YWx1ZSk7CiAgfSBlbHNlIHsKICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsKICB9Cn0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWxmID0gdGhpcywKICAgICAgICBhcmdzID0gYXJndW1lbnRzOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOwoKICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHsKICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7CiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOwogICAgICB9CgogICAgICBfbmV4dCh1bmRlZmluZWQpOwogICAgfSk7CiAgfTsKfQoKdmFyIG5hbWUgPSAnZXNhZ2dzJzsKCnZhciBoYW5kbGVDb3VyaWVyUmVxdWVzdCA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoX3JlZjIpIHsKICAgIHZhciBzZWFyY2hTb3VyY2UsIGFnZ3MsIHRpbWVSYW5nZSwgcXVlcnksIGZpbHRlcnMsIGZvcmNlRmV0Y2gsIHBhcnRpYWxSb3dzLCBtZXRyaWNzQXRBbGxMZXZlbHMsIGluc3BlY3RvckFkYXB0ZXJzLCBmaWx0ZXJNYW5hZ2VyLCBhYm9ydFNpZ25hbCwgdGltZUZpbHRlclNlYXJjaFNvdXJjZSwgcmVxdWVzdFNlYXJjaFNvdXJjZSwgcmVxQm9keSwgcXVlcnlIYXNoLCBzaG91bGRRdWVyeSwgcmVxdWVzdCwgcmVzcG9uc2UsIHJlc3AsIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24sIF9kaWRJdGVyYXRvckVycm9yLCBfaXRlcmF0b3JFcnJvciwgX2l0ZXJhdG9yLCBfc3RlcCwgYWdnLCBwYXJzZWRUaW1lUmFuZ2UsIHRhYmlmeVBhcmFtcywgdGFiaWZ5Q2FjaGVIYXNoLCBzaG91bGRDYWxjdWxhdGVOZXdUYWJpZnk7CgogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBzZWFyY2hTb3VyY2UgPSBfcmVmMi5zZWFyY2hTb3VyY2UsIGFnZ3MgPSBfcmVmMi5hZ2dzLCB0aW1lUmFuZ2UgPSBfcmVmMi50aW1lUmFuZ2UsIHF1ZXJ5ID0gX3JlZjIucXVlcnksIGZpbHRlcnMgPSBfcmVmMi5maWx0ZXJzLCBmb3JjZUZldGNoID0gX3JlZjIuZm9yY2VGZXRjaCwgcGFydGlhbFJvd3MgPSBfcmVmMi5wYXJ0aWFsUm93cywgbWV0cmljc0F0QWxsTGV2ZWxzID0gX3JlZjIubWV0cmljc0F0QWxsTGV2ZWxzLCBpbnNwZWN0b3JBZGFwdGVycyA9IF9yZWYyLmluc3BlY3RvckFkYXB0ZXJzLCBmaWx0ZXJNYW5hZ2VyID0gX3JlZjIuZmlsdGVyTWFuYWdlciwgYWJvcnRTaWduYWwgPSBfcmVmMi5hYm9ydFNpZ25hbDsgLy8gQ3JlYXRlIGEgbmV3IHNlYXJjaCBzb3VyY2UgdGhhdCBpbmhlcml0cyB0aGUgb3JpZ2luYWwgc2VhcmNoIHNvdXJjZQogICAgICAgICAgICAvLyBidXQgaGFzIHRoZSBhcHByb3ByaWF0ZSB0aW1lUmFuZ2UgYXBwbGllZCB2aWEgYSBmaWx0ZXIuCiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSB0ZW1wb3Jhcnkgc29sdXRpb24gdW50aWwgd2UgcHJvcGVybHkgcGFzcyBkb3duIGFsbCByZXF1aXJlZAogICAgICAgICAgICAvLyBpbmZvcm1hdGlvbiBmb3IgdGhlIHJlcXVlc3QgdG8gdGhlIHJlcXVlc3QgaGFuZGxlciAoaHR0cHM6Ly9naXRodWIuY29tL2VsYXN0aWMva2liYW5hL2lzc3Vlcy8xNjY0MSkuCiAgICAgICAgICAgIC8vIFVzaW5nIGNhbGxQYXJlbnRTdGFydEhhbmRsZXJzOiB0cnVlIHdlIG1ha2Ugc3VyZSwgdGhhdCB0aGUgcGFyZW50IHNlYXJjaFNvdXJjZQogICAgICAgICAgICAvLyBvblNlYXJjaFJlcXVlc3RTdGFydCB3aWxsIGJlIGNhbGxlZCBwcm9wZXJseSBldmVuIHRob3VnaCB3ZSB1c2UgYW4gaW5oZXJpdGVkCiAgICAgICAgICAgIC8vIHNlYXJjaCBzb3VyY2UuCgogICAgICAgICAgICB0aW1lRmlsdGVyU2VhcmNoU291cmNlID0gc2VhcmNoU291cmNlLmNyZWF0ZUNoaWxkKHsKICAgICAgICAgICAgICBjYWxsUGFyZW50U3RhcnRIYW5kbGVyczogdHJ1ZQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmVxdWVzdFNlYXJjaFNvdXJjZSA9IHRpbWVGaWx0ZXJTZWFyY2hTb3VyY2UuY3JlYXRlQ2hpbGQoewogICAgICAgICAgICAgIGNhbGxQYXJlbnRTdGFydEhhbmRsZXJzOiB0cnVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBhZ2dzLnNldFRpbWVSYW5nZSh0aW1lUmFuZ2UpOyAvLyBGb3Igbm93IHdlIG5lZWQgdG8gbWlycm9yIHRoZSBoaXN0b3J5IG9mIHRoZSBwYXNzZWQgc2VhcmNoIHNvdXJjZSwgc2luY2UKICAgICAgICAgICAgLy8gdGhlIHJlcXVlc3QgaW5zcGVjdG9yIHdvdWxkbid0IHdvcmsgb3RoZXJ3aXNlLgoKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlcXVlc3RTZWFyY2hTb3VyY2UsICdoaXN0b3J5JywgewogICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHNlYXJjaFNvdXJjZS5oaXN0b3J5OwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoaGlzdG9yeSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHNlYXJjaFNvdXJjZS5oaXN0b3J5ID0gaGlzdG9yeTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXF1ZXN0U2VhcmNoU291cmNlLnNldEZpZWxkKCdhZ2dzJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBhZ2dzLnRvRHNsKG1ldHJpY3NBdEFsbExldmVscyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXF1ZXN0U2VhcmNoU291cmNlLm9uUmVxdWVzdFN0YXJ0KGZ1bmN0aW9uIChwYXJhbVNlYXJjaFNvdXJjZSwgb3B0aW9ucykgewogICAgICAgICAgICAgIHJldHVybiBhZ2dzLm9uU2VhcmNoUmVxdWVzdFN0YXJ0KHBhcmFtU2VhcmNoU291cmNlLCBvcHRpb25zKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAodGltZVJhbmdlKSB7CiAgICAgICAgICAgICAgdGltZUZpbHRlclNlYXJjaFNvdXJjZS5zZXRGaWVsZCgnZmlsdGVyJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfcXVlcnkuZ2V0VGltZSkoc2VhcmNoU291cmNlLmdldEZpZWxkKCdpbmRleCcpLCB0aW1lUmFuZ2UpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXF1ZXN0U2VhcmNoU291cmNlLnNldEZpZWxkKCdmaWx0ZXInLCBmaWx0ZXJzKTsKICAgICAgICAgICAgcmVxdWVzdFNlYXJjaFNvdXJjZS5zZXRGaWVsZCgncXVlcnknLCBxdWVyeSk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RTZWFyY2hTb3VyY2UuZ2V0U2VhcmNoUmVxdWVzdEJvZHkoKTsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICByZXFCb2R5ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgcXVlcnlIYXNoID0gKDAsIF9wdWJsaWMuY2FsY3VsYXRlT2JqZWN0SGFzaCkocmVxQm9keSk7IC8vIFdlIG9ubHkgbmVlZCB0byByZWV4ZWN1dGUgdGhlIHF1ZXJ5LCBpZiBmb3JjZUZldGNoIHdhcyB0cnVlIG9yIHRoZSBoYXNoIG9mIHRoZSByZXF1ZXN0IGJvZHkgaGFzIGNoYW5nZWQKICAgICAgICAgICAgLy8gc2luY2UgdGhlIGxhc3QgcmVxdWVzdAoKICAgICAgICAgICAgc2hvdWxkUXVlcnkgPSBmb3JjZUZldGNoIHx8IHNlYXJjaFNvdXJjZS5sYXN0UXVlcnkgIT09IHF1ZXJ5SGFzaDsKCiAgICAgICAgICAgIGlmICghc2hvdWxkUXVlcnkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGluc3BlY3RvckFkYXB0ZXJzLnJlcXVlc3RzLnJlc2V0KCk7CiAgICAgICAgICAgIHJlcXVlc3QgPSBpbnNwZWN0b3JBZGFwdGVycy5yZXF1ZXN0cy5zdGFydChfaTE4bi5pMThuLnRyYW5zbGF0ZSgnZGF0YS5mdW5jdGlvbnMuZXNhZ2dzLmluc3BlY3Rvci5kYXRhUmVxdWVzdC50aXRsZScsIHsKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0RhdGEnCiAgICAgICAgICAgIH0pLCB7CiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IF9pMThuLmkxOG4udHJhbnNsYXRlKCdkYXRhLmZ1bmN0aW9ucy5lc2FnZ3MuaW5zcGVjdG9yLmRhdGFSZXF1ZXN0LmRlc2NyaXB0aW9uJywgewogICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdUaGlzIHJlcXVlc3QgcXVlcmllcyBFbGFzdGljc2VhcmNoIHRvIGZldGNoIHRoZSBkYXRhIGZvciB0aGUgdmlzdWFsaXphdGlvbi4nCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJlcXVlc3Quc3RhdHMoKDAsIF91dGlscy5nZXRSZXF1ZXN0SW5zcGVjdG9yU3RhdHMpKHJlcXVlc3RTZWFyY2hTb3VyY2UpKTsKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE5OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0U2VhcmNoU291cmNlLmZldGNoKHsKICAgICAgICAgICAgICBhYm9ydFNpZ25hbDogYWJvcnRTaWduYWwKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBzZWFyY2hTb3VyY2UubGFzdFF1ZXJ5ID0gcXVlcnlIYXNoOwogICAgICAgICAgICByZXF1ZXN0LnN0YXRzKCgwLCBfdXRpbHMuZ2V0UmVzcG9uc2VJbnNwZWN0b3JTdGF0cykoc2VhcmNoU291cmNlLCByZXNwb25zZSkpLm9rKHsKICAgICAgICAgICAgICBqc29uOiByZXNwb25zZQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc2VhcmNoU291cmNlLnJhd1Jlc3BvbnNlID0gcmVzcG9uc2U7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzMjsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI4OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDE5KTsgLy8gTG9nIGFueSBlcnJvciBkdXJpbmcgcmVxdWVzdCB0byB0aGUgaW5zcGVjdG9yCgogICAgICAgICAgICByZXF1ZXN0LmVycm9yKHsKICAgICAgICAgICAgICBqc29uOiBfY29udGV4dC50MAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQudDA7CgogICAgICAgICAgY2FzZSAzMjoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDMyOyAvLyBBZGQgdGhlIHJlcXVlc3QgYm9keSBubyBtYXR0ZXIgaWYgdGhpbmdzIHdlbnQgZmluZSBvciBub3QKCiAgICAgICAgICAgIHJlcXVlc3RTZWFyY2hTb3VyY2UuZ2V0U2VhcmNoUmVxdWVzdEJvZHkoKS50aGVuKGZ1bmN0aW9uIChyZXEpIHsKICAgICAgICAgICAgICByZXF1ZXN0Lmpzb24ocmVxKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5maW5pc2goMzIpOwoKICAgICAgICAgIGNhc2UgMzU6CiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCByYXdSZXNwb25zZSBpcyBub3QgZGVlcGx5IGNsb25lZCBoZXJlLCBzbyBkb3duc3RyZWFtIGFwcGxpY2F0aW9ucyB1c2luZyBjb3VyaWVyCiAgICAgICAgICAgIC8vIG11c3QgdGFrZSBjYXJlIG5vdCB0byBtdXRhdGUgaXQsIG9yIGl0IGNvdWxkIGhhdmUgdW5pbnRlbmRlZCBzaWRlIGVmZmVjdHMsIGUuZy4gZGlzcGxheWluZwogICAgICAgICAgICAvLyByZXNwb25zZSBkYXRhIGluY29ycmVjdGx5IGluIHRoZSBpbnNwZWN0b3IuCiAgICAgICAgICAgIHJlc3AgPSBzZWFyY2hTb3VyY2UucmF3UmVzcG9uc2U7CiAgICAgICAgICAgIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwogICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlOwogICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDM5OwogICAgICAgICAgICBfaXRlcmF0b3IgPSBhZ2dzLmFnZ3NbU3ltYm9sLml0ZXJhdG9yXSgpOwoKICAgICAgICAgIGNhc2UgNDE6CiAgICAgICAgICAgIGlmIChfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1MDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYWdnID0gX3N0ZXAudmFsdWU7CgogICAgICAgICAgICBpZiAoISgwLCBfbG9kYXNoLmhhcykoYWdnLCAndHlwZS5wb3N0RmxpZ2h0UmVxdWVzdCcpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ3OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDY7CiAgICAgICAgICAgIHJldHVybiBhZ2cudHlwZS5wb3N0RmxpZ2h0UmVxdWVzdChyZXNwLCBhZ2dzLCBhZ2csIHJlcXVlc3RTZWFyY2hTb3VyY2UsIGluc3BlY3RvckFkYXB0ZXJzLCBhYm9ydFNpZ25hbCk7CgogICAgICAgICAgY2FzZSA0NjoKICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgY2FzZSA0NzoKICAgICAgICAgICAgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0MTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA1MDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU2OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDUyOgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNTI7CiAgICAgICAgICAgIF9jb250ZXh0LnQxID0gX2NvbnRleHRbImNhdGNoIl0oMzkpOwogICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7CiAgICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gX2NvbnRleHQudDE7CgogICAgICAgICAgY2FzZSA1NjoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDU2OwogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNTc7CgogICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpOwogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSA1OToKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDU5OwoKICAgICAgICAgICAgaWYgKCFfZGlkSXRlcmF0b3JFcnJvcikgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2MjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7CgogICAgICAgICAgY2FzZSA2MjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmZpbmlzaCg1OSk7CgogICAgICAgICAgY2FzZSA2MzoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmZpbmlzaCg1Nik7CgogICAgICAgICAgY2FzZSA2NDoKICAgICAgICAgICAgc2VhcmNoU291cmNlLmZpbmFsUmVzcG9uc2UgPSByZXNwOwogICAgICAgICAgICBwYXJzZWRUaW1lUmFuZ2UgPSB0aW1lUmFuZ2UgPyAoMCwgX3F1ZXJ5LmdldFRpbWUpKGFnZ3MuaW5kZXhQYXR0ZXJuLCB0aW1lUmFuZ2UpIDogbnVsbDsKICAgICAgICAgICAgdGFiaWZ5UGFyYW1zID0gewogICAgICAgICAgICAgIG1ldHJpY3NBdEFsbExldmVsczogbWV0cmljc0F0QWxsTGV2ZWxzLAogICAgICAgICAgICAgIHBhcnRpYWxSb3dzOiBwYXJ0aWFsUm93cywKICAgICAgICAgICAgICB0aW1lUmFuZ2U6IHBhcnNlZFRpbWVSYW5nZSA/IHBhcnNlZFRpbWVSYW5nZS5yYW5nZSA6IHVuZGVmaW5lZAogICAgICAgICAgICB9OwogICAgICAgICAgICB0YWJpZnlDYWNoZUhhc2ggPSAoMCwgX3B1YmxpYy5jYWxjdWxhdGVPYmplY3RIYXNoKShfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgICB0YWJpZnlBZ2dzOiBhZ2dzCiAgICAgICAgICAgIH0sIHRhYmlmeVBhcmFtcykpOyAvLyBXZSBvbmx5IG5lZWQgdG8gcmVleGVjdXRlIHRhYmlmeSwgaWYgZWl0aGVyIHdlIGRpZCBhIG5ldyByZXF1ZXN0IG9yIHNvbWUgaW5wdXQgcGFyYW1zIHRvIHRhYmlmeSBjaGFuZ2VkCgogICAgICAgICAgICBzaG91bGRDYWxjdWxhdGVOZXdUYWJpZnkgPSBzaG91bGRRdWVyeSB8fCBzZWFyY2hTb3VyY2UubGFzdFRhYmlmeUhhc2ggIT09IHRhYmlmeUNhY2hlSGFzaDsKCiAgICAgICAgICAgIGlmIChzaG91bGRDYWxjdWxhdGVOZXdUYWJpZnkpIHsKICAgICAgICAgICAgICBzZWFyY2hTb3VyY2UubGFzdFRhYmlmeUhhc2ggPSB0YWJpZnlDYWNoZUhhc2g7CiAgICAgICAgICAgICAgc2VhcmNoU291cmNlLnRhYmlmaWVkUmVzcG9uc2UgPSAoMCwgX3RhYmlmeS50YWJpZnlBZ2dSZXNwb25zZSkoYWdncywgc2VhcmNoU291cmNlLmZpbmFsUmVzcG9uc2UsIHRhYmlmeVBhcmFtcyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGluc3BlY3RvckFkYXB0ZXJzLmRhdGEuc2V0VGFidWxhckxvYWRlcihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuICgwLCBfYnVpbGRfdGFidWxhcl9pbnNwZWN0b3JfZGF0YS5idWlsZFRhYnVsYXJJbnNwZWN0b3JEYXRhKShzZWFyY2hTb3VyY2UudGFiaWZpZWRSZXNwb25zZSwgZmlsdGVyTWFuYWdlcik7CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICByZXR1cm5zRm9ybWF0dGVkVmFsdWVzOiB0cnVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBzZWFyY2hTb3VyY2UudGFiaWZpZWRSZXNwb25zZSk7CgogICAgICAgICAgY2FzZSA3MjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzE5LCAyOCwgMzIsIDM1XSwgWzM5LCA1MiwgNTYsIDY0XSwgWzU3LCwgNTksIDYzXV0pOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZUNvdXJpZXJSZXF1ZXN0KF94KSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCnZhciBlc2FnZ3MgPSBmdW5jdGlvbiBlc2FnZ3MoKSB7CiAgcmV0dXJuIHsKICAgIG5hbWU6IG5hbWUsCiAgICB0eXBlOiAna2liYW5hX2RhdGF0YWJsZScsCiAgICBpbnB1dFR5cGVzOiBbJ2tpYmFuYV9jb250ZXh0JywgJ251bGwnXSwKICAgIGhlbHA6IF9pMThuLmkxOG4udHJhbnNsYXRlKCdkYXRhLmZ1bmN0aW9ucy5lc2FnZ3MuaGVscCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdSdW4gQWdnQ29uZmlnIGFnZ3JlZ2F0aW9uJwogICAgfSksCiAgICBhcmdzOiB7CiAgICAgIGluZGV4OiB7CiAgICAgICAgdHlwZXM6IFsnc3RyaW5nJ10sCiAgICAgICAgaGVscDogJycKICAgICAgfSwKICAgICAgbWV0cmljc0F0QWxsTGV2ZWxzOiB7CiAgICAgICAgdHlwZXM6IFsnYm9vbGVhbiddLAogICAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICAgIGhlbHA6ICcnCiAgICAgIH0sCiAgICAgIHBhcnRpYWxSb3dzOiB7CiAgICAgICAgdHlwZXM6IFsnYm9vbGVhbiddLAogICAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICAgIGhlbHA6ICcnCiAgICAgIH0sCiAgICAgIGluY2x1ZGVGb3JtYXRIaW50czogewogICAgICAgIHR5cGVzOiBbJ2Jvb2xlYW4nXSwKICAgICAgICBkZWZhdWx0OiBmYWxzZSwKICAgICAgICBoZWxwOiAnJwogICAgICB9LAogICAgICBhZ2dDb25maWdzOiB7CiAgICAgICAgdHlwZXM6IFsnc3RyaW5nJ10sCiAgICAgICAgZGVmYXVsdDogJyIiJywKICAgICAgICBoZWxwOiAnJwogICAgICB9CiAgICB9LAogICAgZm46IGZ1bmN0aW9uIGZuKGlucHV0LCBhcmdzLCBfcmVmMykgewogICAgICB2YXIgaW5zcGVjdG9yQWRhcHRlcnMgPSBfcmVmMy5pbnNwZWN0b3JBZGFwdGVycywKICAgICAgICAgIGFib3J0U2lnbmFsID0gX3JlZjMuYWJvcnRTaWduYWw7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgaW5kZXhQYXR0ZXJucywgX2dldFF1ZXJ5U2VydmljZSwgZmlsdGVyTWFuYWdlciwgc2VhcmNoU2VydmljZSwgYWdnQ29uZmlnc1N0YXRlLCBpbmRleFBhdHRlcm4sIGFnZ3MsIHNlYXJjaFNvdXJjZSwgcmVzcG9uc2UsIHRhYmxlOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaW5kZXhQYXR0ZXJucyA9ICgwLCBfc2VydmljZXMuZ2V0SW5kZXhQYXR0ZXJucykoKTsKICAgICAgICAgICAgICAgIF9nZXRRdWVyeVNlcnZpY2UgPSAoMCwgX3NlcnZpY2VzLmdldFF1ZXJ5U2VydmljZSkoKSwgZmlsdGVyTWFuYWdlciA9IF9nZXRRdWVyeVNlcnZpY2UuZmlsdGVyTWFuYWdlcjsKICAgICAgICAgICAgICAgIHNlYXJjaFNlcnZpY2UgPSAoMCwgX3NlcnZpY2VzLmdldFNlYXJjaFNlcnZpY2UpKCk7CiAgICAgICAgICAgICAgICBhZ2dDb25maWdzU3RhdGUgPSBKU09OLnBhcnNlKGFyZ3MuYWdnQ29uZmlncyk7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXhQYXR0ZXJucy5nZXQoYXJncy5pbmRleCk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGluZGV4UGF0dGVybiA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgYWdncyA9IHNlYXJjaFNlcnZpY2UuYWdncy5jcmVhdGVBZ2dDb25maWdzKGluZGV4UGF0dGVybiwgYWdnQ29uZmlnc1N0YXRlKTsgLy8gd2Ugc2hvdWxkIG1vdmUgc2VhcmNoU291cmNlIGNyZWF0aW9uIGluc2lkZSBjb3VyaWVyIHJlcXVlc3QgaGFuZGxlcgoKICAgICAgICAgICAgICAgIHNlYXJjaFNvdXJjZSA9IG5ldyBfc2VhcmNoX3NvdXJjZS5TZWFyY2hTb3VyY2UoKTsKICAgICAgICAgICAgICAgIHNlYXJjaFNvdXJjZS5zZXRGaWVsZCgnaW5kZXgnLCBpbmRleFBhdHRlcm4pOwogICAgICAgICAgICAgICAgc2VhcmNoU291cmNlLnNldEZpZWxkKCdzaXplJywgMCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUNvdXJpZXJSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgc2VhcmNoU291cmNlOiBzZWFyY2hTb3VyY2UsCiAgICAgICAgICAgICAgICAgIGFnZ3M6IGFnZ3MsCiAgICAgICAgICAgICAgICAgIHRpbWVSYW5nZTogKDAsIF9sb2Rhc2guZ2V0KShpbnB1dCwgJ3RpbWVSYW5nZScsIHVuZGVmaW5lZCksCiAgICAgICAgICAgICAgICAgIHF1ZXJ5OiAoMCwgX2xvZGFzaC5nZXQpKGlucHV0LCAncXVlcnknLCB1bmRlZmluZWQpLAogICAgICAgICAgICAgICAgICBmaWx0ZXJzOiAoMCwgX2xvZGFzaC5nZXQpKGlucHV0LCAnZmlsdGVycycsIHVuZGVmaW5lZCksCiAgICAgICAgICAgICAgICAgIGZvcmNlRmV0Y2g6IHRydWUsCiAgICAgICAgICAgICAgICAgIG1ldHJpY3NBdEFsbExldmVsczogYXJncy5tZXRyaWNzQXRBbGxMZXZlbHMsCiAgICAgICAgICAgICAgICAgIHBhcnRpYWxSb3dzOiBhcmdzLnBhcnRpYWxSb3dzLAogICAgICAgICAgICAgICAgICBpbnNwZWN0b3JBZGFwdGVyczogaW5zcGVjdG9yQWRhcHRlcnMsCiAgICAgICAgICAgICAgICAgIGZpbHRlck1hbmFnZXI6IGZpbHRlck1hbmFnZXIsCiAgICAgICAgICAgICAgICAgIGFib3J0U2lnbmFsOiBhYm9ydFNpZ25hbAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgdGFibGUgPSB7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICdraWJhbmFfZGF0YXRhYmxlJywKICAgICAgICAgICAgICAgICAgcm93czogcmVzcG9uc2Uucm93cywKICAgICAgICAgICAgICAgICAgY29sdW1uczogcmVzcG9uc2UuY29sdW1ucy5tYXAoZnVuY3Rpb24gKGNvbHVtbikgewogICAgICAgICAgICAgICAgICAgIHZhciBjbGVhbmVkQ29sdW1uID0gewogICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbHVtbi5pZCwKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGNvbHVtbi5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgbWV0YTogKDAsIF91dGlscy5zZXJpYWxpemVBZ2dDb25maWcpKGNvbHVtbi5hZ2dDb25maWcpCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MuaW5jbHVkZUZvcm1hdEhpbnRzKSB7CiAgICAgICAgICAgICAgICAgICAgICBjbGVhbmVkQ29sdW1uLmZvcm1hdEhpbnQgPSAoMCwgX2NvbW1vbi5zZXJpYWxpemVGaWVsZEZvcm1hdCkoY29sdW1uLmFnZ0NvbmZpZyk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xlYW5lZENvbHVtbjsKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgdGFibGUpOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfTsKfTsKCmV4cG9ydHMuZXNhZ2dzID0gZXNhZ2dzOw=="},null]}