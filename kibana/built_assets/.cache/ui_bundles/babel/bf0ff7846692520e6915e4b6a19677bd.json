{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/canvas/public/state/middleware/history.js","dependencies":[{"path":"x-pack/legacy/plugins/canvas/public/state/middleware/history.js","mtime":1589249552063},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmhpc3RvcnlNaWRkbGV3YXJlID0gdm9pZCAwOwoKdmFyIF9sb2Rhc2ggPSByZXF1aXJlKCJsb2Rhc2giKTsKCnZhciBfYXBwcyA9IHJlcXVpcmUoIi4uLy4uL2FwcHMiKTsKCnZhciBfaGlzdG9yeV9wcm92aWRlciA9IHJlcXVpcmUoIi4uLy4uL2xpYi9oaXN0b3J5X3Byb3ZpZGVyIik7Cgp2YXIgX3JvdXRlcl9wcm92aWRlciA9IHJlcXVpcmUoIi4uLy4uL2xpYi9yb3V0ZXJfcHJvdmlkZXIiKTsKCnZhciBfd29ya3BhZF9zZXJ2aWNlID0gcmVxdWlyZSgiLi4vLi4vbGliL3dvcmtwYWRfc2VydmljZSIpOwoKdmFyIF9oaXN0b3J5ID0gcmVxdWlyZSgiLi4vYWN0aW9ucy9oaXN0b3J5Iik7Cgp2YXIgX3dvcmtwYWQgPSByZXF1aXJlKCIuLi9hY3Rpb25zL3dvcmtwYWQiKTsKCnZhciBfYXNzZXRzID0gcmVxdWlyZSgiLi4vYWN0aW9ucy9hc3NldHMiKTsKCnZhciBfYXBwID0gcmVxdWlyZSgiLi4vc2VsZWN0b3JzL2FwcCIpOwoKdmFyIF93b3JrcGFkMiA9IHJlcXVpcmUoIi4uL3NlbGVjdG9ycy93b3JrcGFkIik7CgpmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7IHRyeSB7IHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsgfSBjYXRjaCAoZXJyb3IpIHsgcmVqZWN0KGVycm9yKTsgcmV0dXJuOyB9IGlmIChpbmZvLmRvbmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0gZWxzZSB7IFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsgfSB9CgpmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgc2VsZiA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTsgZnVuY3Rpb24gX25leHQodmFsdWUpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAibmV4dCIsIHZhbHVlKTsgfSBmdW5jdGlvbiBfdGhyb3coZXJyKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgInRocm93IiwgZXJyKTsgfSBfbmV4dCh1bmRlZmluZWQpOyB9KTsgfTsgfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKZnVuY3Rpb24gZ2V0SGlzdG9yeVN0YXRlKHN0YXRlKSB7CiAgLy8gdGhpcyBpcyB3aGF0IGdldHMgd3JpdHRlbiB0byBicm93c2VyIGhpc3RvcnkKICByZXR1cm4gc3RhdGUucGVyc2lzdGVudDsKfQoKdmFyIGhpc3RvcnlNaWRkbGV3YXJlID0gZnVuY3Rpb24gaGlzdG9yeU1pZGRsZXdhcmUoX3JlZikgewogIHZhciBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2gsCiAgICAgIGdldFN0YXRlID0gX3JlZi5nZXRTdGF0ZTsKCiAgLy8gaXRlcmF0ZSBvdmVyIHJvdXRlcywgaW5qZWN0aW5nIHJlZHV4IHRvIGFjdGlvbiBoYW5kbGVycwogIHZhciByZWR1eEluamVjdCA9IGZ1bmN0aW9uIHJlZHV4SW5qZWN0KHJvdXRlcykgewogICAgcmV0dXJuIHJvdXRlcy5tYXAoZnVuY3Rpb24gKHJvdXRlKSB7CiAgICAgIGlmIChyb3V0ZS5jaGlsZHJlbikgewogICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCByb3V0ZSwgewogICAgICAgICAgY2hpbGRyZW46IHJlZHV4SW5qZWN0KHJvdXRlLmNoaWxkcmVuKQogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoIXJvdXRlLmFjdGlvbikgewogICAgICAgIHJldHVybiByb3V0ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHJvdXRlLCB7CiAgICAgICAgYWN0aW9uOiByb3V0ZS5hY3Rpb24oZGlzcGF0Y2gsIGdldFN0YXRlKQogICAgICB9KTsKICAgIH0pOwogIH07CgogIHZhciBoYW5kbGVyU3RhdGUgPSB7CiAgICBwZW5kaW5nQ291bnQ6IDAKICB9OyAvLyB3cmFwIHVwIHRoZSBhcHBsaWNhdGlvbiByb3V0ZSBhY3Rpb25zIGluIHJlZHV4CgogIHZhciByb3V0ZXIgPSAoMCwgX3JvdXRlcl9wcm92aWRlci5yb3V0ZXJQcm92aWRlcikocmVkdXhJbmplY3QoX2FwcHMucm91dGVzKSk7CiAgdmFyIGhpc3RvcnkgPSAoMCwgX2hpc3RvcnlfcHJvdmlkZXIuaGlzdG9yeVByb3ZpZGVyKSgpOyAvLyB3aXJlIHVwIGhpc3RvcnkgY2hhbmdlIGhhbmRsZXIgKHRoaXMgb25seSBoYXBwZW5zIG9uY2UpCgogIHZhciBoYW5kbGVIaXN0b3J5Q2hhbmdlcyA9CiAgLyojX19QVVJFX18qLwogIGZ1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShsb2NhdGlvbiwgcHJldkxvY2F0aW9uKSB7CiAgICAgIHZhciBwYXRobmFtZSwgaGlzdG9yeVN0YXRlLCBoaXN0b3J5QWN0aW9uLCBpc0Jyb3dzZXJOYXYsIGlzVXJsQ2hhbmdlLCBjdXJyZW50V29ya3BhZElkLCBuZXdXb3JrcGFkOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcGF0aG5hbWUgPSBsb2NhdGlvbi5wYXRobmFtZSwgaGlzdG9yeVN0YXRlID0gbG9jYXRpb24uc3RhdGUsIGhpc3RvcnlBY3Rpb24gPSBsb2NhdGlvbi5hY3Rpb247IC8vIHBvcCBzdGF0ZSB3aWxsIGZpcmUgb24gYW55IGhhc2gtYmFzZWQgdXJsIGNoYW5nZSwgYnV0IG9ubHkgYmFjay9mb3J3YXJkIHdpbGwgaGF2ZSBzdGF0ZQoKICAgICAgICAgICAgICBpc0Jyb3dzZXJOYXYgPSBoaXN0b3J5QWN0aW9uID09PSAncG9wJyAmJiBoaXN0b3J5U3RhdGUgIT0gbnVsbDsKICAgICAgICAgICAgICBpc1VybENoYW5nZSA9ICFpc0Jyb3dzZXJOYXYgJiYgaGlzdG9yeUFjdGlvbiA9PT0gJ3BvcCcgfHwgKGhpc3RvcnlBY3Rpb24gPT09ICdwdXNoJyB8fCBoaXN0b3J5QWN0aW9uID09PSAncmVwbGFjZScpICYmIHByZXZMb2NhdGlvbi5wYXRobmFtZSAhPT0gcGF0aG5hbWU7IC8vIG9ubHkgcmVzdG9yZSB0aGUgaGlzdG9yeSBvbiBwb3BTdGF0ZSBldmVudHMgd2l0aCBzdGF0ZQogICAgICAgICAgICAgIC8vIHRoaXMgb25seSBoYXBwZW5zIHdoZW4gdXNpbmcgYmFjay9mb3J3YXJkIHdpdGggcG9wU3RhdGUgb2JqZWN0cwoKICAgICAgICAgICAgICBpZiAoIWlzQnJvd3Nlck5hdikgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvLyBUT0RPOiBvb2YsIHRoaXMgc3Vja3MuIHdlIGNhbid0IGp1c3Qgc2hvdmUgYXNzZXRzIGludG8gaGlzdG9yeSBzdGF0ZSBiZWNhdXNlCiAgICAgICAgICAgICAgLy8gZmlyZWZveCBpcyBsaW1pdGVkIHRvIDY0MGsgKHdhdCEpLiBzbywgd2hlbiB3ZSBzZWUgdGhhdCB0aGUgd29ya3BhZCBpZCBpcyBjaGFuZ2luZywKICAgICAgICAgICAgICAvLyB3ZSBpbnN0ZWFkIGp1c3QgcmVzdG9yZSB0aGUgYXNzZXRzLCB3aGljaCBlbnN1cmVzIHRoZSBvdmVyYWxsIHN0YXRlIGlzIGNvcnJlY3QuCiAgICAgICAgICAgICAgLy8gdGhlcmUgbXVzdCBiZSBhIGJldHRlciB3YXkgdG8gaGFuZGxlIGhpc3RvcnkgdGhvdWdoLi4uCiAgICAgICAgICAgICAgY3VycmVudFdvcmtwYWRJZCA9ICgwLCBfd29ya3BhZDIuZ2V0V29ya3BhZCkoZ2V0U3RhdGUoKSkuaWQ7CgogICAgICAgICAgICAgIGlmICghKGN1cnJlbnRXb3JrcGFkSWQgIT09IGhpc3RvcnlTdGF0ZS53b3JrcGFkLmlkKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICByZXR1cm4gKDAsIF93b3JrcGFkX3NlcnZpY2UuZ2V0KShoaXN0b3J5U3RhdGUud29ya3BhZC5pZCk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgbmV3V29ya3BhZCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgZGlzcGF0Y2goKDAsIF9hc3NldHMuc2V0QXNzZXRzKShuZXdXb3JrcGFkLmFzc2V0cykpOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBkaXNwYXRjaCgoMCwgX2hpc3RvcnkucmVzdG9yZUhpc3RvcnkpKGhpc3RvcnlTdGF0ZSkpKTsKCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgaWYgKCFpc1VybENoYW5nZSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgcmV0dXJuIHJvdXRlci5wYXJzZShwYXRobmFtZSk7CgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0LnNlbnQpOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZUhpc3RvcnlDaGFuZ2VzKF94LCBfeDIpIHsKICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgaGlzdG9yeS5vbkNoYW5nZSgKICAvKiNfX1BVUkVfXyovCiAgZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIF9hcmdzMiA9IGFyZ3VtZW50czsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAvLyB1c2UgaGlzdG9yeSByZXBsYWNlIHVudGlsIGFueSBhc3luYyBoYW5kbGVycyBhcmUgY29tcGxldGVkCiAgICAgICAgICAgICAgaGFuZGxlclN0YXRlLnBlbmRpbmdDb3VudCArPSAxOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUhpc3RvcnlDaGFuZ2VzLmFwcGx5KHZvaWQgMCwgX2FyZ3MyKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDg7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA2OwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgxKTsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDg7CiAgICAgICAgICAgICAgLy8gcmVzdG9yZSBkZWZhdWx0IGhpc3RvcnkgbWV0aG9kCiAgICAgICAgICAgICAgaGFuZGxlclN0YXRlLnBlbmRpbmdDb3VudCAtPSAxOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuZmluaXNoKDgpOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzEsIDYsIDgsIDExXV0pOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCkpOwogIHJldHVybiBmdW5jdGlvbiAobmV4dCkgewogICAgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb24pIHsKICAgICAgdmFyIG9sZFN0YXRlID0gZ2V0U3RhdGUoKTsgLy8gZGVhbCB3aXRoIGhpc3RvcnkgYWN0aW9ucwoKICAgICAgc3dpdGNoIChhY3Rpb24udHlwZSkgewogICAgICAgIGNhc2UgX2hpc3RvcnkudW5kb0hpc3RvcnkudG9TdHJpbmcoKToKICAgICAgICAgIHJldHVybiBoaXN0b3J5LnVuZG8oKTsKCiAgICAgICAgY2FzZSBfaGlzdG9yeS5yZWRvSGlzdG9yeS50b1N0cmluZygpOgogICAgICAgICAgcmV0dXJuIGhpc3RvcnkucmVkbygpOwoKICAgICAgICBjYXNlIF9oaXN0b3J5LnJlc3RvcmVIaXN0b3J5LnRvU3RyaW5nKCk6CiAgICAgICAgICAvLyBza2lwIHN0YXRlIGNvbXBhcmUsIHNpbXBseSBleGVjdXRlIHRoZSBhY3Rpb24KICAgICAgICAgIG5leHQoYWN0aW9uKTsgLy8gVE9ETzogd2Ugc2hvdWxkbid0IG5lZWQgdG8gcmVzZXQgdGhlIGVudGlyZSB3b3JrcGFkIGZvciB1bmRvL3JlZG8KCiAgICAgICAgICBkaXNwYXRjaCgoMCwgX3dvcmtwYWQuaW5pdGlhbGl6ZVdvcmtwYWQpKCkpOwogICAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIGV4ZWN1dGUgdGhlIGFjdGlvbiBsaWtlIG5vcm1hbAoKCiAgICAgIG5leHQoYWN0aW9uKTsKICAgICAgdmFyIG5ld1N0YXRlID0gZ2V0U3RhdGUoKTsgLy8gaWYgdGhlIGFwcCBpcyBub3QgcmVhZHksIGRvbid0IHBlcnNpc3QgYW55dGhpbmcKCiAgICAgIGlmICghKDAsIF9hcHAuaXNBcHBSZWFkeSkobmV3U3RhdGUpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIGlmIGFwcCBzd2l0Y2hlZCBmcm9tIG5vdCByZWFkeSB0byByZWFkeSwgcmVwbGFjZSBjdXJyZW50IHN0YXRlCiAgICAgIC8vIHRoaXMgYWxsb3dzIHRoZSBiYWNrIGJ1dHRvbiB0byB3b3JrIGNvcnJlY3RseSBhbGwgdGhlIHdheSB0byBmaXJzdCBwYWdlIGxvYWQKCgogICAgICBpZiAoISgwLCBfYXBwLmlzQXBwUmVhZHkpKG9sZFN0YXRlKSAmJiAoMCwgX2FwcC5pc0FwcFJlYWR5KShuZXdTdGF0ZSkpIHsKICAgICAgICBoaXN0b3J5LnJlcGxhY2UoZ2V0SGlzdG9yeVN0YXRlKG5ld1N0YXRlKSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIGlmIHRoZSBwZXJzaXN0ZW50IHN0YXRlIGNoYW5nZWQsIHB1c2ggaXQgaW50byB0aGUgaGlzdG9yeQoKCiAgICAgIHZhciBvbGRIaXN0b3J5U3RhdGUgPSBnZXRIaXN0b3J5U3RhdGUob2xkU3RhdGUpOwogICAgICB2YXIgaGlzdG9yeVN0YXRlID0gZ2V0SGlzdG9yeVN0YXRlKG5ld1N0YXRlKTsKCiAgICAgIGlmICghKDAsIF9sb2Rhc2guaXNFcXVhbCkoaGlzdG9yeVN0YXRlLCBvbGRIaXN0b3J5U3RhdGUpKSB7CiAgICAgICAgLy8gaWYgdGhlcmUgYXJlIHBlbmRpbmcgcm91dGUgY2hhbmdlcywganVzdCByZXBsYWNlIGN1cnJlbnQgcm91dGUgKHRvIGF2b2lkIGV4dHJhIGJhY2svZm9ydGggaGlzdG9yeSBlbnRyaWVzKQogICAgICAgIHZhciB1c2VSZXBsYWNlU3RhdGUgPSBoYW5kbGVyU3RhdGUucGVuZGluZ0NvdW50ICE9PSAwOwogICAgICAgIHVzZVJlcGxhY2VTdGF0ZSA/IGhpc3RvcnkucmVwbGFjZShoaXN0b3J5U3RhdGUpIDogaGlzdG9yeS5wdXNoKGhpc3RvcnlTdGF0ZSk7CiAgICAgIH0KICAgIH07CiAgfTsKfTsKCmV4cG9ydHMuaGlzdG9yeU1pZGRsZXdhcmUgPSBoaXN0b3J5TWlkZGxld2FyZTs="},null]}