{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/containers/users/index.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/containers/users/index.js","mtime":1589249553244},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuVXNlcnNRdWVyeSA9IHZvaWQgMDsKCnZhciBfZnAgPSByZXF1aXJlKCJsb2Rhc2gvZnAiKTsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9yZWFjdEFwb2xsbyA9IHJlcXVpcmUoInJlYWN0LWFwb2xsbyIpOwoKdmFyIF9yZWFjdFJlZHV4ID0gcmVxdWlyZSgicmVhY3QtcmVkdXgiKTsKCnZhciBfcmVkdXggPSByZXF1aXJlKCJyZWR1eCIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuLi8uLi8uLi9jb21tb24vY29uc3RhbnRzIik7Cgp2YXIgX3N0b3JlID0gcmVxdWlyZSgiLi4vLi4vc3RvcmUiKTsKCnZhciBfa2liYW5hID0gcmVxdWlyZSgiLi4vLi4vbGliL2tpYmFuYSIpOwoKdmFyIF9oZWxwZXJzID0gcmVxdWlyZSgiLi4vaGVscGVycyIpOwoKdmFyIF9oZWxwZXJzMiA9IHJlcXVpcmUoIi4uLy4uL2NvbXBvbmVudHMvcGFnaW5hdGVkX3RhYmxlL2hlbHBlcnMiKTsKCnZhciBfcXVlcnlfdGVtcGxhdGVfcGFnaW5hdGVkID0gcmVxdWlyZSgiLi4vcXVlcnlfdGVtcGxhdGVfcGFnaW5hdGVkIik7Cgp2YXIgX2luZGV4ID0gcmVxdWlyZSgiLi9pbmRleC5ncWxfcXVlcnkiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgIGRlZmF1bHQ6IG9iagogIH07Cn0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgX3R5cGVvZjIoU3ltYm9sLml0ZXJhdG9yKSA9PT0gInN5bWJvbCIpIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gX3R5cGVvZjIob2JqKTsKICAgIH07CiAgfSBlbHNlIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9CgogIHJldHVybiBfdHlwZW9mKG9iaik7Cn0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsKICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7CiAgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7CiAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICBhcnIyW2ldID0gYXJyW2ldOwogICAgfQoKICAgIHJldHVybiBhcnIyOwogIH0KfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgfQp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogIH0KfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICByZXR1cm4gQ29uc3RydWN0b3I7Cn0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsKICBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7CiAgICByZXR1cm4gY2FsbDsKICB9CgogIHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOwp9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsKICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIHNlbGY7Cn0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7CiAgfTsKICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOwp9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsKICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsKICB9CgogIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgewogICAgY29uc3RydWN0b3I6IHsKICAgICAgdmFsdWU6IHN1YkNsYXNzLAogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICB9CiAgfSk7CiAgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7Cn0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgICBvLl9fcHJvdG9fXyA9IHA7CiAgICByZXR1cm4gbzsKICB9OwoKICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOwp9Cgp2YXIgSUQgPSAndXNlcnNRdWVyeSc7Cgp2YXIgVXNlcnNDb21wb25lbnRRdWVyeSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9RdWVyeVRlbXBsYXRlUGFnaW5hdCkgewogIF9pbmhlcml0cyhVc2Vyc0NvbXBvbmVudFF1ZXJ5LCBfUXVlcnlUZW1wbGF0ZVBhZ2luYXQpOwoKICBmdW5jdGlvbiBVc2Vyc0NvbXBvbmVudFF1ZXJ5KCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVzZXJzQ29tcG9uZW50UXVlcnkpOwoKICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoVXNlcnNDb21wb25lbnRRdWVyeSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoVXNlcnNDb21wb25lbnRRdWVyeSwgW3sKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzJHByb3BzID0gdGhpcy5wcm9wcywKICAgICAgICAgIGFjdGl2ZVBhZ2UgPSBfdGhpcyRwcm9wcy5hY3RpdmVQYWdlLAogICAgICAgICAgY2hpbGRyZW4gPSBfdGhpcyRwcm9wcy5jaGlsZHJlbiwKICAgICAgICAgIGVuZERhdGUgPSBfdGhpcyRwcm9wcy5lbmREYXRlLAogICAgICAgICAgZmlsdGVyUXVlcnkgPSBfdGhpcyRwcm9wcy5maWx0ZXJRdWVyeSwKICAgICAgICAgIGZsb3dUYXJnZXQgPSBfdGhpcyRwcm9wcy5mbG93VGFyZ2V0LAogICAgICAgICAgX3RoaXMkcHJvcHMkaWQgPSBfdGhpcyRwcm9wcy5pZCwKICAgICAgICAgIGlkID0gX3RoaXMkcHJvcHMkaWQgPT09IHZvaWQgMCA/IElEIDogX3RoaXMkcHJvcHMkaWQsCiAgICAgICAgICBpcCA9IF90aGlzJHByb3BzLmlwLAogICAgICAgICAgaXNJbnNwZWN0ZWQgPSBfdGhpcyRwcm9wcy5pc0luc3BlY3RlZCwKICAgICAgICAgIGtpYmFuYSA9IF90aGlzJHByb3BzLmtpYmFuYSwKICAgICAgICAgIGxpbWl0ID0gX3RoaXMkcHJvcHMubGltaXQsCiAgICAgICAgICBza2lwID0gX3RoaXMkcHJvcHMuc2tpcCwKICAgICAgICAgIHNvdXJjZUlkID0gX3RoaXMkcHJvcHMuc291cmNlSWQsCiAgICAgICAgICBzdGFydERhdGUgPSBfdGhpcyRwcm9wcy5zdGFydERhdGUsCiAgICAgICAgICBzb3J0ID0gX3RoaXMkcHJvcHMuc29ydDsKICAgICAgdmFyIHZhcmlhYmxlcyA9IHsKICAgICAgICBkZWZhdWx0SW5kZXg6IGtpYmFuYS5zZXJ2aWNlcy51aVNldHRpbmdzLmdldChfY29uc3RhbnRzLkRFRkFVTFRfSU5ERVhfS0VZKSwKICAgICAgICBmaWx0ZXJRdWVyeTogKDAsIF9oZWxwZXJzLmNyZWF0ZUZpbHRlcikoZmlsdGVyUXVlcnkpLAogICAgICAgIGZsb3dUYXJnZXQ6IGZsb3dUYXJnZXQsCiAgICAgICAgaW5zcGVjdDogaXNJbnNwZWN0ZWQsCiAgICAgICAgaXA6IGlwLAogICAgICAgIHBhZ2luYXRpb246ICgwLCBfaGVscGVyczIuZ2VuZXJhdGVUYWJsZVBhZ2luYXRpb25PcHRpb25zKShhY3RpdmVQYWdlLCBsaW1pdCksCiAgICAgICAgc29ydDogc29ydCwKICAgICAgICBzb3VyY2VJZDogc291cmNlSWQsCiAgICAgICAgdGltZXJhbmdlOiB7CiAgICAgICAgICBpbnRlcnZhbDogJzEyaCcsCiAgICAgICAgICBmcm9tOiBzdGFydERhdGUsCiAgICAgICAgICB0bzogZW5kRGF0ZQogICAgICAgIH0KICAgICAgfTsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0QXBvbGxvLlF1ZXJ5LCB7CiAgICAgICAgcXVlcnk6IF9pbmRleC51c2Vyc1F1ZXJ5LAogICAgICAgIGZldGNoUG9saWN5OiAoMCwgX2hlbHBlcnMuZ2V0RGVmYXVsdEZldGNoUG9saWN5KSgpLAogICAgICAgIG5vdGlmeU9uTmV0d29ya1N0YXR1c0NoYW5nZTogdHJ1ZSwKICAgICAgICBza2lwOiBza2lwLAogICAgICAgIHZhcmlhYmxlczogdmFyaWFibGVzCiAgICAgIH0sIGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIGRhdGEgPSBfcmVmLmRhdGEsCiAgICAgICAgICAgIGxvYWRpbmcgPSBfcmVmLmxvYWRpbmcsCiAgICAgICAgICAgIGZldGNoTW9yZSA9IF9yZWYuZmV0Y2hNb3JlLAogICAgICAgICAgICBuZXR3b3JrU3RhdHVzID0gX3JlZi5uZXR3b3JrU3RhdHVzLAogICAgICAgICAgICByZWZldGNoID0gX3JlZi5yZWZldGNoOwogICAgICAgIHZhciB1c2VycyA9ICgwLCBfZnAuZ2V0T3IpKFtdLCAic291cmNlLlVzZXJzLmVkZ2VzIiwgZGF0YSk7CgogICAgICAgIF90aGlzLnNldEZldGNoTW9yZShmZXRjaE1vcmUpOwoKICAgICAgICBfdGhpcy5zZXRGZXRjaE1vcmVPcHRpb25zKGZ1bmN0aW9uIChuZXdBY3RpdmVQYWdlKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgICBwYWdpbmF0aW9uOiAoMCwgX2hlbHBlcnMyLmdlbmVyYXRlVGFibGVQYWdpbmF0aW9uT3B0aW9ucykobmV3QWN0aXZlUGFnZSwgbGltaXQpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVwZGF0ZVF1ZXJ5OiBmdW5jdGlvbiB1cGRhdGVRdWVyeShwcmV2LCBfcmVmMikgewogICAgICAgICAgICAgIHZhciBmZXRjaE1vcmVSZXN1bHQgPSBfcmVmMi5mZXRjaE1vcmVSZXN1bHQ7CgogICAgICAgICAgICAgIGlmICghZmV0Y2hNb3JlUmVzdWx0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcHJldjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBmZXRjaE1vcmVSZXN1bHQsIHsKICAgICAgICAgICAgICAgIHNvdXJjZTogX29iamVjdFNwcmVhZCh7fSwgZmV0Y2hNb3JlUmVzdWx0LnNvdXJjZSwgewogICAgICAgICAgICAgICAgICBVc2VyczogX29iamVjdFNwcmVhZCh7fSwgZmV0Y2hNb3JlUmVzdWx0LnNvdXJjZS5Vc2VycywgewogICAgICAgICAgICAgICAgICAgIGVkZ2VzOiBfdG9Db25zdW1hYmxlQXJyYXkoZmV0Y2hNb3JlUmVzdWx0LnNvdXJjZS5Vc2Vycy5lZGdlcykKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfSk7CgogICAgICAgIHZhciBpc0xvYWRpbmcgPSBfdGhpcy5pc0l0QVZhbGlkTG9hZGluZyhsb2FkaW5nLCB2YXJpYWJsZXMsIG5ldHdvcmtTdGF0dXMpOwoKICAgICAgICByZXR1cm4gY2hpbGRyZW4oewogICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgaW5zcGVjdDogKDAsIF9mcC5nZXRPcikobnVsbCwgJ3NvdXJjZS5Vc2Vycy5pbnNwZWN0JywgZGF0YSksCiAgICAgICAgICBpc0luc3BlY3RlZDogaXNJbnNwZWN0ZWQsCiAgICAgICAgICBsb2FkaW5nOiBpc0xvYWRpbmcsCiAgICAgICAgICBsb2FkUGFnZTogX3RoaXMud3JhcHBlZExvYWRNb3JlLAogICAgICAgICAgcGFnZUluZm86ICgwLCBfZnAuZ2V0T3IpKHt9LCAnc291cmNlLlVzZXJzLnBhZ2VJbmZvJywgZGF0YSksCiAgICAgICAgICByZWZldGNoOiBfdGhpcy5tZW1vaXplZFJlZmV0Y2hRdWVyeSh2YXJpYWJsZXMsIGxpbWl0LCByZWZldGNoKSwKICAgICAgICAgIHRvdGFsQ291bnQ6ICgwLCBfZnAuZ2V0T3IpKC0xLCAnc291cmNlLlVzZXJzLnRvdGFsQ291bnQnLCBkYXRhKSwKICAgICAgICAgIHVzZXJzOiB1c2VycwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9XSk7CgogIHJldHVybiBVc2Vyc0NvbXBvbmVudFF1ZXJ5Owp9KF9xdWVyeV90ZW1wbGF0ZV9wYWdpbmF0ZWQuUXVlcnlUZW1wbGF0ZVBhZ2luYXRlZCk7Cgp2YXIgbWFrZU1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1ha2VNYXBTdGF0ZVRvUHJvcHMoKSB7CiAgdmFyIGdldFVzZXJzU2VsZWN0b3IgPSBfc3RvcmUubmV0d29ya1NlbGVjdG9ycy51c2Vyc1NlbGVjdG9yKCk7CgogIHZhciBnZXRRdWVyeSA9IF9zdG9yZS5pbnB1dHNTZWxlY3RvcnMuZ2xvYmFsUXVlcnlCeUlkU2VsZWN0b3IoKTsKCiAgdmFyIG1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyhzdGF0ZSwgX3JlZjMpIHsKICAgIHZhciBfcmVmMyRpZCA9IF9yZWYzLmlkLAogICAgICAgIGlkID0gX3JlZjMkaWQgPT09IHZvaWQgMCA/IElEIDogX3JlZjMkaWQ7CgogICAgdmFyIF9nZXRRdWVyeSA9IGdldFF1ZXJ5KHN0YXRlLCBpZCksCiAgICAgICAgaXNJbnNwZWN0ZWQgPSBfZ2V0UXVlcnkuaXNJbnNwZWN0ZWQ7CgogICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIGdldFVzZXJzU2VsZWN0b3Ioc3RhdGUpLCB7CiAgICAgIGlzSW5zcGVjdGVkOiBpc0luc3BlY3RlZAogICAgfSk7CiAgfTsKCiAgcmV0dXJuIG1hcFN0YXRlVG9Qcm9wczsKfTsKCnZhciBjb25uZWN0b3IgPSAoMCwgX3JlYWN0UmVkdXguY29ubmVjdCkobWFrZU1hcFN0YXRlVG9Qcm9wcyk7CnZhciBVc2Vyc1F1ZXJ5ID0gKDAsIF9yZWR1eC5jb21wb3NlKShjb25uZWN0b3IsIF9raWJhbmEud2l0aEtpYmFuYSkoVXNlcnNDb21wb25lbnRRdWVyeSk7CmV4cG9ydHMuVXNlcnNRdWVyeSA9IFVzZXJzUXVlcnk7"},null]}