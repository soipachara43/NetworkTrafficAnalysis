{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/timelion/public/directives/saved_object_finder.js","dependencies":[{"path":"src/legacy/core_plugins/timelion/public/directives/saved_object_finder.js","mtime":1589249549926},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfcmlzb25Ob2RlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJyaXNvbi1ub2RlIikpOwoKdmFyIF9tb2R1bGVzID0gcmVxdWlyZSgidWkvbW9kdWxlcyIpOwoKcmVxdWlyZSgidWkvZGlyZWN0aXZlcy9pbnB1dF9mb2N1cyIpOwoKdmFyIF9zYXZlZF9vYmplY3RfZmluZGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL3NhdmVkX29iamVjdF9maW5kZXIuaHRtbCIpKTsKCnZhciBfc2F2ZWRfc2hlZXRzID0gcmVxdWlyZSgiLi4vc2VydmljZXMvc2F2ZWRfc2hlZXRzIik7Cgp2YXIgX2tleV9tYXAgPSByZXF1aXJlKCJ1aS9kaXJlY3RpdmVzL2tleV9tYXAiKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vcGx1Z2lucy9raWJhbmFfbGVnYWN5L3B1YmxpYyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8qCiAqIExpY2Vuc2VkIHRvIEVsYXN0aWNzZWFyY2ggQi5WLiB1bmRlciBvbmUgb3IgbW9yZSBjb250cmlidXRvcgogKiBsaWNlbnNlIGFncmVlbWVudHMuIFNlZSB0aGUgTk9USUNFIGZpbGUgZGlzdHJpYnV0ZWQgd2l0aAogKiB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodAogKiBvd25lcnNoaXAuIEVsYXN0aWNzZWFyY2ggQi5WLiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyCiAqIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5CiAqIG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwp2YXIgX21vZHVsZSA9IF9tb2R1bGVzLnVpTW9kdWxlcy5nZXQoJ2tpYmFuYScpOwoKX21vZHVsZS5kaXJlY3RpdmUoJ3BhZ2luYXRlJywgX3B1YmxpYy5QYWdpbmF0ZURpcmVjdGl2ZVByb3ZpZGVyKS5kaXJlY3RpdmUoJ3BhZ2luYXRlQ29udHJvbHMnLCBfcHVibGljLlBhZ2luYXRlQ29udHJvbHNEaXJlY3RpdmVQcm92aWRlcikuZGlyZWN0aXZlKCdzYXZlZE9iamVjdEZpbmRlcicsIGZ1bmN0aW9uICgkbG9jYXRpb24sIGtiblVybCwgUHJpdmF0ZSwgY29uZmlnKSB7CiAgcmV0dXJuIHsKICAgIHJlc3RyaWN0OiAnRScsCiAgICBzY29wZTogewogICAgICB0eXBlOiAnQCcsCiAgICAgIC8vIG9wdGlvbmFsIG1ha2UtdXJsIGF0dHIsIHNldHMgdGhlIHVzZXJNYWtlVXJsIGluIG91ciBzY29wZQogICAgICB1c2VyTWFrZVVybDogJz0/bWFrZVVybCcsCiAgICAgIC8vIG9wdGlvbmFsIG9uLWNob29zZSBhdHRyLCBzZXRzIHRoZSB1c2VyT25DaG9vc2UgaW4gb3VyIHNjb3BlCiAgICAgIHVzZXJPbkNob29zZTogJz0/b25DaG9vc2UnLAogICAgICAvLyBvcHRpb25hbCB1c2VMb2NhbE1hbmFnZW1lbnQgYXR0ciwgIHJlbW92ZXMgbGluayB0byBtYW5hZ2VtZW50IHNlY3Rpb24KICAgICAgdXNlTG9jYWxNYW5hZ2VtZW50OiAnPT91c2VMb2NhbE1hbmFnZW1lbnQnLAoKICAgICAgLyoqCiAgICAgICAqIEB0eXBlIHtmdW5jdGlvbn0gLSBhbiBvcHRpb25hbCBmdW5jdGlvbi4gSWYgc3VwcGxpZWQgYW4gYEFkZCBuZXcgWGAgYnV0dG9uIGlzIHNob3duCiAgICAgICAqIGFuZCB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGVuIGNsaWNrZWQuCiAgICAgICAqLwogICAgICBvbkFkZE5ldzogJz0nLAoKICAgICAgLyoqCiAgICAgICAqIEB7dHlwZX0gYm9vbGVhbiAtIHNldCB0aGlzIHRvIHRydWUsIGlmIHlvdSBkb24ndCB3YW50IHRoZSBzZWFyY2ggYm94IGFib3ZlIHRoZQogICAgICAgKiB0YWJsZSB0byBhdXRvbWF0aWNhbGx5IGdhaW4gZm9jdXMgb25jZSBsb2FkZWQKICAgICAgICovCiAgICAgIGRpc2FibGVBdXRvRm9jdXM6ICc9JwogICAgfSwKICAgIHRlbXBsYXRlOiBfc2F2ZWRfb2JqZWN0X2ZpbmRlci5kZWZhdWx0LAogICAgY29udHJvbGxlckFzOiAnZmluZGVyJywKICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uIGNvbnRyb2xsZXIoJHNjb3BlLCAkZWxlbWVudCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7IC8vIHRoZSB0ZXh0IGlucHV0IGVsZW1lbnQKCiAgICAgIHZhciAkaW5wdXQgPSAkZWxlbWVudC5maW5kKCdpbnB1dFtuZy1tb2RlbD1maWx0ZXJdJyk7IC8vIFRoZSBudW1iZXIgb2YgaXRlbXMgdG8gc2hvdyBpbiB0aGUgbGlzdAoKICAgICAgJHNjb3BlLnBlclBhZ2UgPSBjb25maWcuZ2V0KCdzYXZlZE9iamVjdHM6cGVyUGFnZScpOyAvLyB0aGUgbGlzdCB0aGF0IHdpbGwgaG9sZCB0aGUgc3VnZ2VzdGlvbnMKCiAgICAgIHZhciAkbGlzdCA9ICRlbGVtZW50LmZpbmQoJ3VsJyk7IC8vIHRoZSBjdXJyZW50IGZpbHRlciBzdHJpbmcsIHVzZWQgdG8gY2hlY2sgdGhhdCByZXR1cm5lZCByZXN1bHRzIGFyZSBzdGlsbCB1c2VmdWwKCiAgICAgIHZhciBjdXJyZW50RmlsdGVyID0gJHNjb3BlLmZpbHRlcjsgLy8gdGhlIG1vc3QgcmVjZW50bHkgZW50ZXJlZCBzZWFyY2gvZmlsdGVyCgogICAgICB2YXIgcHJldlNlYXJjaDsgLy8gdGhlIGxpc3Qgb2YgaGl0cywgdXNlZCB0byByZW5kZXIgZGlzcGxheQoKICAgICAgc2VsZi5oaXRzID0gW107CiAgICAgIHNlbGYuc2VydmljZSA9IF9zYXZlZF9zaGVldHMuc2F2ZWRTaGVldExvYWRlcjsKICAgICAgc2VsZi5wcm9wZXJ0aWVzID0gc2VsZi5zZXJ2aWNlLmxvYWRlclByb3BlcnRpZXM7CiAgICAgIGZpbHRlclJlc3VsdHMoKTsKICAgICAgLyoqCiAgICAgICAqIEJvb2xlYW4gdGhhdCBrZWVwcyB0cmFjayBvZiB3aGV0aGVyIGhpdHMgYXJlIHNvcnRlZCBhc2NlbmRpbmcgKHRydWUpCiAgICAgICAqIG9yIGRlc2NlbmRpbmcgKGZhbHNlKSBieSB0aXRsZQogICAgICAgKiBAdHlwZSB7Qm9vbGVhbn0KICAgICAgICovCgogICAgICBzZWxmLmlzQXNjZW5kaW5nID0gdHJ1ZTsKICAgICAgLyoqCiAgICAgICAqIFNvcnRzIHNhdmVkIG9iamVjdCBmaW5kZXIgaGl0cyBlaXRoZXIgYXNjZW5kaW5nIG9yIGRlc2NlbmRpbmcKICAgICAgICogQHBhcmFtICB7QXJyYXl9IGhpdHMgQXJyYXkgb2Ygc2F2ZWQgZmluZGVyIG9iamVjdCBoaXRzCiAgICAgICAqIEByZXR1cm4ge0FycmF5fSBBcnJheSBzb3J0ZWQgZWl0aGVyIGFzY2VuZGluZyBvciBkZXNjZW5kaW5nCiAgICAgICAqLwoKICAgICAgc2VsZi5zb3J0SGl0cyA9IGZ1bmN0aW9uIChoaXRzKSB7CiAgICAgICAgc2VsZi5pc0FzY2VuZGluZyA9ICFzZWxmLmlzQXNjZW5kaW5nOwogICAgICAgIHNlbGYuaGl0cyA9IHNlbGYuaXNBc2NlbmRpbmcgPyBfbG9kYXNoLmRlZmF1bHQuc29ydEJ5KGhpdHMsICd0aXRsZScpIDogX2xvZGFzaC5kZWZhdWx0LnNvcnRCeShoaXRzLCAndGl0bGUnKS5yZXZlcnNlKCk7CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiBQYXNzZWQgdGhlIGhpdCBvYmplY3RzIGFuZCB3aWxsIGRldGVybWluZSBpZiB0aGUKICAgICAgICogaGl0IHNob3VsZCBoYXZlIGEgdXJsIGluIHRoZSBVSSwgcmV0dXJucyBpdCBpZiBzbwogICAgICAgKiBAcmV0dXJuIHtzdHJpbmd8bnVsbH0gLSB0aGUgdXJsIG9yIG5vdGhpbmcKICAgICAgICovCgoKICAgICAgc2VsZi5tYWtlVXJsID0gZnVuY3Rpb24gKGhpdCkgewogICAgICAgIGlmICgkc2NvcGUudXNlck1ha2VVcmwpIHsKICAgICAgICAgIHJldHVybiAkc2NvcGUudXNlck1ha2VVcmwoaGl0KTsKICAgICAgICB9CgogICAgICAgIGlmICghJHNjb3BlLnVzZXJPbkNob29zZSkgewogICAgICAgICAgcmV0dXJuIGhpdC51cmw7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJyMnOwogICAgICB9OwoKICAgICAgc2VsZi5wcmV2ZW50Q2xpY2sgPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIH07CiAgICAgIC8qKgogICAgICAgKiBDYWxsZWQgd2hlbiBhIGhpdCBvYmplY3QgaXMgY2xpY2tlZCwgY2FuIG92ZXJyaWRlIHRoZQogICAgICAgKiB1cmwgYmVoYXZpb3IgaWYgbmVjZXNzYXJ5LgogICAgICAgKi8KCgogICAgICBzZWxmLm9uQ2hvb3NlID0gZnVuY3Rpb24gKGhpdCwgJGV2ZW50KSB7CiAgICAgICAgaWYgKCRzY29wZS51c2VyT25DaG9vc2UpIHsKICAgICAgICAgICRzY29wZS51c2VyT25DaG9vc2UoaGl0LCAkZXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgdmFyIHVybCA9IHNlbGYubWFrZVVybChoaXQpOwogICAgICAgIGlmICghdXJsIHx8IHVybCA9PT0gJyMnIHx8IHVybC5jaGFyQXQoMCkgIT09ICcjJykgcmV0dXJuOwogICAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyB3ZSB3YW50IHRoZSAnL3BhdGgnLCBub3QgJyMvcGF0aCcKCiAgICAgICAga2JuVXJsLmNoYW5nZSh1cmwuc3Vic3RyKDEpKTsKICAgICAgfTsKCiAgICAgICRzY29wZS4kd2F0Y2goJ2ZpbHRlcicsIGZ1bmN0aW9uIChuZXdGaWx0ZXIpIHsKICAgICAgICAvLyBlbnN1cmUgdGhhdCB0aGUgY3VycmVudEZpbHRlciBjaGFuZ2VzIGZyb20gdW5kZWZpbmVkIHRvICcnCiAgICAgICAgLy8gd2hpY2ggdHJpZ2dlcnMKICAgICAgICBjdXJyZW50RmlsdGVyID0gbmV3RmlsdGVyIHx8ICcnOwogICAgICAgIGZpbHRlclJlc3VsdHMoKTsKICAgICAgfSk7CiAgICAgICRzY29wZS5wYWdlRmlyc3RJdGVtID0gMDsKICAgICAgJHNjb3BlLnBhZ2VMYXN0SXRlbSA9IDA7CgogICAgICAkc2NvcGUub25QYWdlQ2hhbmdlZCA9IGZ1bmN0aW9uIChwYWdlKSB7CiAgICAgICAgJHNjb3BlLnBhZ2VGaXJzdEl0ZW0gPSBwYWdlLmZpcnN0SXRlbTsKICAgICAgICAkc2NvcGUucGFnZUxhc3RJdGVtID0gcGFnZS5sYXN0SXRlbTsKICAgICAgfTsgLy9tYW5hZ2VzIHRoZSBzdGF0ZSBvZiB0aGUga2V5Ym9hcmQgc2VsZWN0b3IKCgogICAgICBzZWxmLnNlbGVjdG9yID0gewogICAgICAgIGVuYWJsZWQ6IGZhbHNlLAogICAgICAgIGluZGV4OiAtMQogICAgICB9OwoKICAgICAgc2VsZi5nZXRMYWJlbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX2xvZGFzaC5kZWZhdWx0LndvcmRzKHNlbGYucHJvcGVydGllcy5ub3VucykubWFwKF9sb2Rhc2guZGVmYXVsdC5jYXBpdGFsaXplKS5qb2luKCcgJyk7CiAgICAgIH07IC8va2V5IGhhbmRsZXIgZm9yIHRoZSBmaWx0ZXIgdGV4dCBib3gKCgogICAgICBzZWxmLmZpbHRlcktleURvd24gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgc3dpdGNoIChfa2V5X21hcC5rZXlNYXBbJGV2ZW50LmtleUNvZGVdKSB7CiAgICAgICAgICBjYXNlICdlbnRlcic6CiAgICAgICAgICAgIGlmIChzZWxmLmhpdENvdW50ICE9PSAxKSByZXR1cm47CiAgICAgICAgICAgIHZhciBoaXQgPSBzZWxmLmhpdHNbMF07CiAgICAgICAgICAgIGlmICghaGl0KSByZXR1cm47CiAgICAgICAgICAgIHNlbGYub25DaG9vc2UoaGl0LCAkZXZlbnQpOwogICAgICAgICAgICAkZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9OyAvL2tleSBoYW5kbGVyIGZvciB0aGUgbGlzdCBpdGVtcwoKCiAgICAgIHNlbGYuaGl0S2V5RG93biA9IGZ1bmN0aW9uICgkZXZlbnQsIHBhZ2UsIHBhZ2luYXRlKSB7CiAgICAgICAgc3dpdGNoIChfa2V5X21hcC5rZXlNYXBbJGV2ZW50LmtleUNvZGVdKSB7CiAgICAgICAgICBjYXNlICd0YWInOgogICAgICAgICAgICBpZiAoIXNlbGYuc2VsZWN0b3IuZW5hYmxlZCkgYnJlYWs7CiAgICAgICAgICAgIHNlbGYuc2VsZWN0b3IuaW5kZXggPSAtMTsKICAgICAgICAgICAgc2VsZi5zZWxlY3Rvci5lbmFibGVkID0gZmFsc2U7IC8vaWYgdGhlIHVzZXIgdHlwZXMgc2hpZnQtdGFiIHJldHVybiB0byB0aGUgdGV4dGJveAogICAgICAgICAgICAvL2lmIHRoZSB1c2VyIHR5cGVzIHRhYiwgc2V0IHRoZSBmb2N1cyB0byB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGhpdC4KCiAgICAgICAgICAgIGlmICgkZXZlbnQuc2hpZnRLZXkpIHsKICAgICAgICAgICAgICAkaW5wdXQuZm9jdXMoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAkbGlzdC5maW5kKCdsaS5hY3RpdmUgYScpLmZvY3VzKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdkb3duJzoKICAgICAgICAgICAgaWYgKCFzZWxmLnNlbGVjdG9yLmVuYWJsZWQpIGJyZWFrOwoKICAgICAgICAgICAgaWYgKHNlbGYuc2VsZWN0b3IuaW5kZXggKyAxIDwgcGFnZS5sZW5ndGgpIHsKICAgICAgICAgICAgICBzZWxmLnNlbGVjdG9yLmluZGV4ICs9IDE7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICd1cCc6CiAgICAgICAgICAgIGlmICghc2VsZi5zZWxlY3Rvci5lbmFibGVkKSBicmVhazsKCiAgICAgICAgICAgIGlmIChzZWxmLnNlbGVjdG9yLmluZGV4ID4gMCkgewogICAgICAgICAgICAgIHNlbGYuc2VsZWN0b3IuaW5kZXggLT0gMTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ3JpZ2h0JzoKICAgICAgICAgICAgaWYgKCFzZWxmLnNlbGVjdG9yLmVuYWJsZWQpIGJyZWFrOwoKICAgICAgICAgICAgaWYgKHBhZ2UubnVtYmVyIDwgcGFnZS5jb3VudCkgewogICAgICAgICAgICAgIHBhZ2luYXRlLmdvVG9QYWdlKHBhZ2UubnVtYmVyICsgMSk7CiAgICAgICAgICAgICAgc2VsZi5zZWxlY3Rvci5pbmRleCA9IDA7CiAgICAgICAgICAgICAgc2VsZWN0VG9wSGl0KCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdsZWZ0JzoKICAgICAgICAgICAgaWYgKCFzZWxmLnNlbGVjdG9yLmVuYWJsZWQpIGJyZWFrOwoKICAgICAgICAgICAgaWYgKHBhZ2UubnVtYmVyID4gMSkgewogICAgICAgICAgICAgIHBhZ2luYXRlLmdvVG9QYWdlKHBhZ2UubnVtYmVyIC0gMSk7CiAgICAgICAgICAgICAgc2VsZi5zZWxlY3Rvci5pbmRleCA9IDA7CiAgICAgICAgICAgICAgc2VsZWN0VG9wSGl0KCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdlc2NhcGUnOgogICAgICAgICAgICBpZiAoIXNlbGYuc2VsZWN0b3IuZW5hYmxlZCkgYnJlYWs7CiAgICAgICAgICAgICRpbnB1dC5mb2N1cygpOwogICAgICAgICAgICAkZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAnZW50ZXInOgogICAgICAgICAgICBpZiAoIXNlbGYuc2VsZWN0b3IuZW5hYmxlZCkgYnJlYWs7CiAgICAgICAgICAgIHZhciBoaXRJbmRleCA9IChwYWdlLm51bWJlciAtIDEpICogcGFnaW5hdGUucGVyUGFnZSArIHNlbGYuc2VsZWN0b3IuaW5kZXg7CiAgICAgICAgICAgIHZhciBoaXQgPSBzZWxmLmhpdHNbaGl0SW5kZXhdOwogICAgICAgICAgICBpZiAoIWhpdCkgYnJlYWs7CiAgICAgICAgICAgIHNlbGYub25DaG9vc2UoaGl0LCAkZXZlbnQpOwogICAgICAgICAgICAkZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAnc2hpZnQnOgogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAkaW5wdXQuZm9jdXMoKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgc2VsZi5oaXRCbHVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHNlbGYuc2VsZWN0b3IuaW5kZXggPSAtMTsKICAgICAgICBzZWxmLnNlbGVjdG9yLmVuYWJsZWQgPSBmYWxzZTsKICAgICAgfTsKCiAgICAgIHNlbGYubWFuYWdlT2JqZWN0cyA9IGZ1bmN0aW9uICh0eXBlKSB7CiAgICAgICAgJGxvY2F0aW9uLnVybCgnL21hbmFnZW1lbnQva2liYW5hL29iamVjdHM/X2E9JyArIF9yaXNvbk5vZGUuZGVmYXVsdC5lbmNvZGUoewogICAgICAgICAgdGFiOiB0eXBlCiAgICAgICAgfSkpOwogICAgICB9OwoKICAgICAgc2VsZi5oaXRDb3VudE5vdW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIChzZWxmLmhpdENvdW50ID09PSAxID8gc2VsZi5wcm9wZXJ0aWVzLm5vdW4gOiBzZWxmLnByb3BlcnRpZXMubm91bnMpLnRvTG93ZXJDYXNlKCk7CiAgICAgIH07CgogICAgICBmdW5jdGlvbiBzZWxlY3RUb3BIaXQoKSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvL3RyaWdnZXJpbmcgYSBmb2N1cyBldmVudCBraWNrcyBvZmYgYSBuZXcgYW5ndWxhciBkaWdlc3QgY3ljbGUuCiAgICAgICAgICAkbGlzdC5maW5kKCdhOmZpcnN0JykuZm9jdXMoKTsKICAgICAgICB9LCAwKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZmlsdGVyUmVzdWx0cygpIHsKICAgICAgICBpZiAoIXNlbGYuc2VydmljZSkgcmV0dXJuOwogICAgICAgIGlmICghc2VsZi5wcm9wZXJ0aWVzKSByZXR1cm47IC8vIHRyYWNrIHRoZSBmaWx0ZXIgdGhhdCB3ZSB1c2UgZm9yIHRoaXMgc2VhcmNoLAogICAgICAgIC8vIGJ1dCBlbnN1cmUgdGhhdCB3ZSBkb24ndCBzZWFyY2ggZm9yIHRoZSBzYW1lCiAgICAgICAgLy8gdGhpbmcgdHdpY2UuIFRoaXMgaXMgY2FsbGVkIGZyb20gbXVsdGlwbGUgcGxhY2VzCiAgICAgICAgLy8gYW5kIG5lZWRzIHRvIGJlIHNtYXJ0IGFib3V0IHdoZW4gaXQgYWN0dWFsbHkgc2VhcmNoZXMKCiAgICAgICAgdmFyIGZpbHRlciA9IGN1cnJlbnRGaWx0ZXI7CiAgICAgICAgaWYgKHByZXZTZWFyY2ggPT09IGZpbHRlcikgcmV0dXJuOwogICAgICAgIHByZXZTZWFyY2ggPSBmaWx0ZXI7CiAgICAgICAgdmFyIGlzTGFic0VuYWJsZWQgPSBjb25maWcuZ2V0KCd2aXN1YWxpemU6ZW5hYmxlTGFicycpOwogICAgICAgIHNlbGYuc2VydmljZS5maW5kKGZpbHRlcikudGhlbihmdW5jdGlvbiAoaGl0cykgewogICAgICAgICAgaGl0cy5oaXRzID0gaGl0cy5oaXRzLmZpbHRlcihmdW5jdGlvbiAoaGl0KSB7CiAgICAgICAgICAgIHJldHVybiBpc0xhYnNFbmFibGVkIHx8IF9sb2Rhc2guZGVmYXVsdC5nZXQoaGl0LCAndHlwZS5zdGFnZScpICE9PSAnZXhwZXJpbWVudGFsJzsKICAgICAgICAgIH0pOwogICAgICAgICAgaGl0cy50b3RhbCA9IGhpdHMuaGl0cy5sZW5ndGg7IC8vIGVuc3VyZSB0aGF0IHdlIGRvbid0IGRpc3BsYXkgb2xkIHJlc3VsdHMKICAgICAgICAgIC8vIGFzIHdlIGNhbid0IHJlYWxseSBjYW5jZWwgcmVxdWVzdHMKCiAgICAgICAgICBpZiAoY3VycmVudEZpbHRlciA9PT0gZmlsdGVyKSB7CiAgICAgICAgICAgIHNlbGYuaGl0Q291bnQgPSBoaXRzLnRvdGFsOwogICAgICAgICAgICBzZWxmLmhpdHMgPSBfbG9kYXNoLmRlZmF1bHQuc29ydEJ5KGhpdHMuaGl0cywgJ3RpdGxlJyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Owp9KTs="},null]}