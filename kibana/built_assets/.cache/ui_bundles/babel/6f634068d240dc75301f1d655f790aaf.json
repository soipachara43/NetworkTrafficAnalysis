{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/canvas/canvas_plugin_src/lib/flot-charts/jquery.flot.selection.js","dependencies":[{"path":"x-pack/legacy/plugins/canvas/canvas_plugin_src/lib/flot-charts/jquery.flot.selection.js","mtime":1589249551807},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKLyogRmxvdCBwbHVnaW4gZm9yIHNlbGVjdGluZyByZWdpb25zIG9mIGEgcGxvdC4KCkNvcHlyaWdodCAoYykgMjAwNy0yMDE0IElPTEEgYW5kIE9sZSBMYXVyc2VuLgpMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCgpUaGUgcGx1Z2luIHN1cHBvcnRzIHRoZXNlIG9wdGlvbnM6CgpzZWxlY3Rpb246IHsKCW1vZGU6IG51bGwgb3IgIngiIG9yICJ5IiBvciAieHkiLAoJY29sb3I6IGNvbG9yLAoJc2hhcGU6ICJyb3VuZCIgb3IgIm1pdGVyIiBvciAiYmV2ZWwiLAoJbWluU2l6ZTogbnVtYmVyIG9mIHBpeGVscwp9CgpTZWxlY3Rpb24gc3VwcG9ydCBpcyBlbmFibGVkIGJ5IHNldHRpbmcgdGhlIG1vZGUgdG8gb25lIG9mICJ4IiwgInkiIG9yICJ4eSIuCkluICJ4IiBtb2RlLCB0aGUgdXNlciB3aWxsIG9ubHkgYmUgYWJsZSB0byBzcGVjaWZ5IHRoZSB4IHJhbmdlLCBzaW1pbGFybHkgZm9yCiJ5IiBtb2RlLiBGb3IgInh5IiwgdGhlIHNlbGVjdGlvbiBiZWNvbWVzIGEgcmVjdGFuZ2xlIHdoZXJlIGJvdGggcmFuZ2VzIGNhbiBiZQpzcGVjaWZpZWQuICJjb2xvciIgaXMgY29sb3Igb2YgdGhlIHNlbGVjdGlvbiAoaWYgeW91IG5lZWQgdG8gY2hhbmdlIHRoZSBjb2xvcgpsYXRlciBvbiwgeW91IGNhbiBnZXQgdG8gaXQgd2l0aCBwbG90LmdldE9wdGlvbnMoKS5zZWxlY3Rpb24uY29sb3IpLiAic2hhcGUiCmlzIHRoZSBzaGFwZSBvZiB0aGUgY29ybmVycyBvZiB0aGUgc2VsZWN0aW9uLgoKIm1pblNpemUiIGlzIHRoZSBtaW5pbXVtIHNpemUgYSBzZWxlY3Rpb24gY2FuIGJlIGluIHBpeGVscy4gVGhpcyB2YWx1ZSBjYW4KYmUgY3VzdG9taXplZCB0byBkZXRlcm1pbmUgdGhlIHNtYWxsZXN0IHNpemUgYSBzZWxlY3Rpb24gY2FuIGJlIGFuZCBzdGlsbApoYXZlIHRoZSBzZWxlY3Rpb24gcmVjdGFuZ2xlIGJlIGRpc3BsYXllZC4gV2hlbiBjdXN0b21pemluZyB0aGlzIHZhbHVlLCB0aGUKZmFjdCB0aGF0IGl0IHJlZmVycyB0byBwaXhlbHMsIG5vdCBheGlzIHVuaXRzIG11c3QgYmUgdGFrZW4gaW50byBhY2NvdW50LgpUaHVzLCBmb3IgZXhhbXBsZSwgaWYgdGhlcmUgaXMgYSBiYXIgZ3JhcGggaW4gdGltZSBtb2RlIHdpdGggQmFyV2lkdGggc2V0IHRvIDEKbWludXRlLCBzZXR0aW5nICJtaW5TaXplIiB0byAxIHdpbGwgbm90IG1ha2UgdGhlIG1pbmltdW0gc2VsZWN0aW9uIHNpemUgMQptaW51dGUsIGJ1dCByYXRoZXIgMSBwaXhlbC4gTm90ZSBhbHNvIHRoYXQgc2V0dGluZyAibWluU2l6ZSIgdG8gMCB3aWxsIHByZXZlbnQKInBsb3R1bnNlbGVjdGVkIiBldmVudHMgZnJvbSBiZWluZyBmaXJlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgbW91c2Ugd2l0aG91dApkcmFnZ2luZy4KCldoZW4gc2VsZWN0aW9uIHN1cHBvcnQgaXMgZW5hYmxlZCwgYSAicGxvdHNlbGVjdGVkIiBldmVudCB3aWxsIGJlIGVtaXR0ZWQgb24KdGhlIERPTSBlbGVtZW50IHlvdSBwYXNzZWQgaW50byB0aGUgcGxvdCBmdW5jdGlvbi4gVGhlIGV2ZW50IGhhbmRsZXIgZ2V0cyBhCnBhcmFtZXRlciB3aXRoIHRoZSByYW5nZXMgc2VsZWN0ZWQgb24gdGhlIGF4ZXMsIGxpa2UgdGhpczoKCglwbGFjZWhvbGRlci5iaW5kKCAicGxvdHNlbGVjdGVkIiwgZnVuY3Rpb24oIGV2ZW50LCByYW5nZXMgKSB7CgkJYWxlcnQoIllvdSBzZWxlY3RlZCAiICsgcmFuZ2VzLnhheGlzLmZyb20gKyAiIHRvICIgKyByYW5nZXMueGF4aXMudG8pCgkJLy8gc2ltaWxhciBmb3IgeWF4aXMgLSB3aXRoIG11bHRpcGxlIGF4ZXMsIHRoZSBleHRyYSBvbmVzIGFyZSBpbgoJCS8vIHgyYXhpcywgeDNheGlzLCAuLi4KCX0pOwoKVGhlICJwbG90c2VsZWN0ZWQiIGV2ZW50IGlzIG9ubHkgZmlyZWQgd2hlbiB0aGUgdXNlciBoYXMgZmluaXNoZWQgbWFraW5nIHRoZQpzZWxlY3Rpb24uIEEgInBsb3RzZWxlY3RpbmciIGV2ZW50IGlzIGZpcmVkIGR1cmluZyB0aGUgcHJvY2VzcyB3aXRoIHRoZSBzYW1lCnBhcmFtZXRlcnMgYXMgdGhlICJwbG90c2VsZWN0ZWQiIGV2ZW50LCBpbiBjYXNlIHlvdSB3YW50IHRvIGtub3cgd2hhdCdzCmhhcHBlbmluZyB3aGlsZSBpdCdzIGhhcHBlbmluZywKCkEgInBsb3R1bnNlbGVjdGVkIiBldmVudCB3aXRoIG5vIGFyZ3VtZW50cyBpcyBlbWl0dGVkIHdoZW4gdGhlIHVzZXIgY2xpY2tzIHRoZQptb3VzZSB0byByZW1vdmUgdGhlIHNlbGVjdGlvbi4gQXMgc3RhdGVkIGFib3ZlLCBzZXR0aW5nICJtaW5TaXplIiB0byAwIHdpbGwKZGVzdHJveSB0aGlzIGJlaGF2aW9yLgoKVGhlIHBsdWdpbiBhbGxzbyBhZGRzIHRoZSBmb2xsb3dpbmcgbWV0aG9kcyB0byB0aGUgcGxvdCBvYmplY3Q6CgotIHNldFNlbGVjdGlvbiggcmFuZ2VzLCBwcmV2ZW50RXZlbnQgKQoKICBTZXQgdGhlIHNlbGVjdGlvbiByZWN0YW5nbGUuIFRoZSBwYXNzZWQgaW4gcmFuZ2VzIGlzIG9uIHRoZSBzYW1lIGZvcm0gYXMKICByZXR1cm5lZCBpbiB0aGUgInBsb3RzZWxlY3RlZCIgZXZlbnQuIElmIHRoZSBzZWxlY3Rpb24gbW9kZSBpcyAieCIsIHlvdQogIHNob3VsZCBwdXQgaW4gZWl0aGVyIGFuIHhheGlzIHJhbmdlLCBpZiB0aGUgbW9kZSBpcyAieSIgeW91IG5lZWQgdG8gcHV0IGluCiAgYW4geWF4aXMgcmFuZ2UgYW5kIGJvdGggeGF4aXMgYW5kIHlheGlzIGlmIHRoZSBzZWxlY3Rpb24gbW9kZSBpcyAieHkiLCBsaWtlCiAgdGhpczoKCglzZXRTZWxlY3Rpb24oeyB4YXhpczogeyBmcm9tOiAwLCB0bzogMTAgfSwgeWF4aXM6IHsgZnJvbTogNDAsIHRvOiA2MCB9IH0pOwoKICBzZXRTZWxlY3Rpb24gd2lsbCB0cmlnZ2VyIHRoZSAicGxvdHNlbGVjdGVkIiBldmVudCB3aGVuIGNhbGxlZC4gSWYgeW91IGRvbid0CiAgd2FudCB0aGF0IHRvIGhhcHBlbiwgZS5nLiBpZiB5b3UncmUgaW5zaWRlIGEgInBsb3RzZWxlY3RlZCIgaGFuZGxlciwgcGFzcwogIHRydWUgYXMgdGhlIHNlY29uZCBwYXJhbWV0ZXIuIElmIHlvdSBhcmUgdXNpbmcgbXVsdGlwbGUgYXhlcywgeW91IGNhbgogIHNwZWNpZnkgdGhlIHJhbmdlcyBvbiBhbnkgb2YgdGhvc2UsIGUuZy4gYXMgeDJheGlzL3gzYXhpcy8uLi4gaW5zdGVhZCBvZgogIHhheGlzLCB0aGUgcGx1Z2luIHBpY2tzIHRoZSBmaXJzdCBvbmUgaXQgc2Vlcy4KCi0gY2xlYXJTZWxlY3Rpb24oIHByZXZlbnRFdmVudCApCgogIENsZWFyIHRoZSBzZWxlY3Rpb24gcmVjdGFuZ2xlLiBQYXNzIGluIHRydWUgdG8gYXZvaWQgZ2V0dGluZyBhCiAgInBsb3R1bnNlbGVjdGVkIiBldmVudC4KCi0gZ2V0U2VsZWN0aW9uKCkKCiAgUmV0dXJucyB0aGUgY3VycmVudCBzZWxlY3Rpb24gaW4gdGhlIHNhbWUgZm9ybWF0IGFzIHRoZSAicGxvdHNlbGVjdGVkIgogIGV2ZW50LiBJZiB0aGVyZSdzIGN1cnJlbnRseSBubyBzZWxlY3Rpb24sIHRoZSBmdW5jdGlvbiByZXR1cm5zIG51bGwuCgoqLwooZnVuY3Rpb24gKCQpIHsKICBmdW5jdGlvbiBpbml0KHBsb3QpIHsKICAgIHZhciBzZWxlY3Rpb24gPSB7CiAgICAgIGZpcnN0OiB7CiAgICAgICAgeDogLTEsCiAgICAgICAgeTogLTEKICAgICAgfSwKICAgICAgc2Vjb25kOiB7CiAgICAgICAgeDogLTEsCiAgICAgICAgeTogLTEKICAgICAgfSwKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIGFjdGl2ZTogZmFsc2UKICAgIH07IC8vIEZJWE1FOiBUaGUgZHJhZyBoYW5kbGluZyBpbXBsZW1lbnRlZCBoZXJlIHNob3VsZCBiZQogICAgLy8gYWJzdHJhY3RlZCBvdXQsIHRoZXJlJ3Mgc29tZSBzaW1pbGFyIGNvZGUgZnJvbSBhIGxpYnJhcnkgaW4KICAgIC8vIHRoZSBuYXZpZ2F0aW9uIHBsdWdpbiwgdGhpcyBzaG91bGQgYmUgbWFzc2FnZWQgYSBiaXQgdG8gZml0CiAgICAvLyB0aGUgRmxvdCBjYXNlcyBoZXJlIGJldHRlciBhbmQgcmV1c2VkLiBEb2luZyB0aGlzIHdvdWxkCiAgICAvLyBtYWtlIHRoaXMgcGx1Z2luIG11Y2ggc2xpbW1lci4KCiAgICB2YXIgc2F2ZWRoYW5kbGVycyA9IHt9OwogICAgdmFyIG1vdXNlVXBIYW5kbGVyID0gbnVsbDsKCiAgICBmdW5jdGlvbiBvbk1vdXNlTW92ZShlKSB7CiAgICAgIGlmIChzZWxlY3Rpb24uYWN0aXZlKSB7CiAgICAgICAgdXBkYXRlU2VsZWN0aW9uKGUpOwogICAgICAgIHBsb3QuZ2V0UGxhY2Vob2xkZXIoKS50cmlnZ2VyKCJwbG90c2VsZWN0aW5nIiwgW2dldFNlbGVjdGlvbigpXSk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBvbk1vdXNlRG93bihlKSB7CiAgICAgIGlmIChlLndoaWNoICE9IDEpIC8vIG9ubHkgYWNjZXB0IGxlZnQtY2xpY2sKICAgICAgICByZXR1cm47IC8vIGNhbmNlbCBvdXQgYW55IHRleHQgc2VsZWN0aW9ucwoKICAgICAgZG9jdW1lbnQuYm9keS5mb2N1cygpOyAvLyBwcmV2ZW50IHRleHQgc2VsZWN0aW9uIGFuZCBkcmFnIGluIG9sZC1zY2hvb2wgYnJvd3NlcnMKCiAgICAgIGlmIChkb2N1bWVudC5vbnNlbGVjdHN0YXJ0ICE9PSB1bmRlZmluZWQgJiYgc2F2ZWRoYW5kbGVycy5vbnNlbGVjdHN0YXJ0ID09IG51bGwpIHsKICAgICAgICBzYXZlZGhhbmRsZXJzLm9uc2VsZWN0c3RhcnQgPSBkb2N1bWVudC5vbnNlbGVjdHN0YXJ0OwoKICAgICAgICBkb2N1bWVudC5vbnNlbGVjdHN0YXJ0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGlmIChkb2N1bWVudC5vbmRyYWcgIT09IHVuZGVmaW5lZCAmJiBzYXZlZGhhbmRsZXJzLm9uZHJhZyA9PSBudWxsKSB7CiAgICAgICAgc2F2ZWRoYW5kbGVycy5vbmRyYWcgPSBkb2N1bWVudC5vbmRyYWc7CgogICAgICAgIGRvY3VtZW50Lm9uZHJhZyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9OwogICAgICB9CgogICAgICBzZXRTZWxlY3Rpb25Qb3Moc2VsZWN0aW9uLmZpcnN0LCBlKTsKICAgICAgc2VsZWN0aW9uLmFjdGl2ZSA9IHRydWU7IC8vIHRoaXMgaXMgYSBiaXQgc2lsbHksIGJ1dCB3ZSBoYXZlIHRvIHVzZSBhIGNsb3N1cmUgdG8gYmUKICAgICAgLy8gYWJsZSB0byB3aGFjayB0aGUgc2FtZSBoYW5kbGVyIGFnYWluCgogICAgICBtb3VzZVVwSGFuZGxlciA9IGZ1bmN0aW9uIG1vdXNlVXBIYW5kbGVyKGUpIHsKICAgICAgICBvbk1vdXNlVXAoZSk7CiAgICAgIH07CgogICAgICAkKGRvY3VtZW50KS5vbmUoIm1vdXNldXAiLCBtb3VzZVVwSGFuZGxlcik7CiAgICB9CgogICAgZnVuY3Rpb24gb25Nb3VzZVVwKGUpIHsKICAgICAgbW91c2VVcEhhbmRsZXIgPSBudWxsOyAvLyByZXZlcnQgZHJhZyBzdHVmZiBmb3Igb2xkLXNjaG9vbCBicm93c2VycwoKICAgICAgaWYgKGRvY3VtZW50Lm9uc2VsZWN0c3RhcnQgIT09IHVuZGVmaW5lZCkgZG9jdW1lbnQub25zZWxlY3RzdGFydCA9IHNhdmVkaGFuZGxlcnMub25zZWxlY3RzdGFydDsKICAgICAgaWYgKGRvY3VtZW50Lm9uZHJhZyAhPT0gdW5kZWZpbmVkKSBkb2N1bWVudC5vbmRyYWcgPSBzYXZlZGhhbmRsZXJzLm9uZHJhZzsgLy8gbm8gbW9yZSBkcmFnZ2luZwoKICAgICAgc2VsZWN0aW9uLmFjdGl2ZSA9IGZhbHNlOwogICAgICB1cGRhdGVTZWxlY3Rpb24oZSk7CiAgICAgIGlmIChzZWxlY3Rpb25Jc1NhbmUoKSkgdHJpZ2dlclNlbGVjdGVkRXZlbnQoKTtlbHNlIHsKICAgICAgICAvLyB0aGlzIGNvdW50cyBhcyBhIGNsZWFyCiAgICAgICAgcGxvdC5nZXRQbGFjZWhvbGRlcigpLnRyaWdnZXIoInBsb3R1bnNlbGVjdGVkIiwgW10pOwogICAgICAgIHBsb3QuZ2V0UGxhY2Vob2xkZXIoKS50cmlnZ2VyKCJwbG90c2VsZWN0aW5nIiwgW251bGxdKTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0U2VsZWN0aW9uKCkgewogICAgICBpZiAoIXNlbGVjdGlvbklzU2FuZSgpKSByZXR1cm4gbnVsbDsKICAgICAgaWYgKCFzZWxlY3Rpb24uc2hvdykgcmV0dXJuIG51bGw7CiAgICAgIHZhciByID0ge30sCiAgICAgICAgICBjMSA9IHNlbGVjdGlvbi5maXJzdCwKICAgICAgICAgIGMyID0gc2VsZWN0aW9uLnNlY29uZDsKICAgICAgJC5lYWNoKHBsb3QuZ2V0QXhlcygpLCBmdW5jdGlvbiAobmFtZSwgYXhpcykgewogICAgICAgIGlmIChheGlzLnVzZWQpIHsKICAgICAgICAgIHZhciBwMSA9IGF4aXMuYzJwKGMxW2F4aXMuZGlyZWN0aW9uXSksCiAgICAgICAgICAgICAgcDIgPSBheGlzLmMycChjMltheGlzLmRpcmVjdGlvbl0pOwogICAgICAgICAgcltuYW1lXSA9IHsKICAgICAgICAgICAgZnJvbTogTWF0aC5taW4ocDEsIHAyKSwKICAgICAgICAgICAgdG86IE1hdGgubWF4KHAxLCBwMikKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIHI7CiAgICB9CgogICAgZnVuY3Rpb24gdHJpZ2dlclNlbGVjdGVkRXZlbnQoKSB7CiAgICAgIHZhciByID0gZ2V0U2VsZWN0aW9uKCk7CiAgICAgIHBsb3QuZ2V0UGxhY2Vob2xkZXIoKS50cmlnZ2VyKCJwbG90c2VsZWN0ZWQiLCBbcl0pOyAvLyBiYWNrd2FyZHMtY29tcGF0IHN0dWZmLCB0byBiZSByZW1vdmVkIGluIGZ1dHVyZQoKICAgICAgaWYgKHIueGF4aXMgJiYgci55YXhpcykgcGxvdC5nZXRQbGFjZWhvbGRlcigpLnRyaWdnZXIoInNlbGVjdGVkIiwgW3sKICAgICAgICB4MTogci54YXhpcy5mcm9tLAogICAgICAgIHkxOiByLnlheGlzLmZyb20sCiAgICAgICAgeDI6IHIueGF4aXMudG8sCiAgICAgICAgeTI6IHIueWF4aXMudG8KICAgICAgfV0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsYW1wKG1pbiwgdmFsdWUsIG1heCkgewogICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFNlbGVjdGlvblBvcyhwb3MsIGUpIHsKICAgICAgdmFyIG8gPSBwbG90LmdldE9wdGlvbnMoKTsKICAgICAgdmFyIG9mZnNldCA9IHBsb3QuZ2V0UGxhY2Vob2xkZXIoKS5vZmZzZXQoKTsKICAgICAgdmFyIHBsb3RPZmZzZXQgPSBwbG90LmdldFBsb3RPZmZzZXQoKTsKICAgICAgcG9zLnggPSBjbGFtcCgwLCBlLnBhZ2VYIC0gb2Zmc2V0LmxlZnQgLSBwbG90T2Zmc2V0LmxlZnQsIHBsb3Qud2lkdGgoKSk7CiAgICAgIHBvcy55ID0gY2xhbXAoMCwgZS5wYWdlWSAtIG9mZnNldC50b3AgLSBwbG90T2Zmc2V0LnRvcCwgcGxvdC5oZWlnaHQoKSk7CiAgICAgIGlmIChvLnNlbGVjdGlvbi5tb2RlID09ICJ5IikgcG9zLnggPSBwb3MgPT0gc2VsZWN0aW9uLmZpcnN0ID8gMCA6IHBsb3Qud2lkdGgoKTsKICAgICAgaWYgKG8uc2VsZWN0aW9uLm1vZGUgPT0gIngiKSBwb3MueSA9IHBvcyA9PSBzZWxlY3Rpb24uZmlyc3QgPyAwIDogcGxvdC5oZWlnaHQoKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVTZWxlY3Rpb24ocG9zKSB7CiAgICAgIGlmIChwb3MucGFnZVggPT0gbnVsbCkgcmV0dXJuOwogICAgICBzZXRTZWxlY3Rpb25Qb3Moc2VsZWN0aW9uLnNlY29uZCwgcG9zKTsKCiAgICAgIGlmIChzZWxlY3Rpb25Jc1NhbmUoKSkgewogICAgICAgIHNlbGVjdGlvbi5zaG93ID0gdHJ1ZTsKICAgICAgICBwbG90LnRyaWdnZXJSZWRyYXdPdmVybGF5KCk7CiAgICAgIH0gZWxzZSBjbGVhclNlbGVjdGlvbih0cnVlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjbGVhclNlbGVjdGlvbihwcmV2ZW50RXZlbnQpIHsKICAgICAgaWYgKHNlbGVjdGlvbi5zaG93KSB7CiAgICAgICAgc2VsZWN0aW9uLnNob3cgPSBmYWxzZTsKICAgICAgICBwbG90LnRyaWdnZXJSZWRyYXdPdmVybGF5KCk7CiAgICAgICAgaWYgKCFwcmV2ZW50RXZlbnQpIHBsb3QuZ2V0UGxhY2Vob2xkZXIoKS50cmlnZ2VyKCJwbG90dW5zZWxlY3RlZCIsIFtdKTsKICAgICAgfQogICAgfSAvLyBmdW5jdGlvbiB0YWtlbiBmcm9tIG1hcmtpbmdzIHN1cHBvcnQgaW4gRmxvdAoKCiAgICBmdW5jdGlvbiBleHRyYWN0UmFuZ2UocmFuZ2VzLCBjb29yZCkgewogICAgICB2YXIgYXhpcywKICAgICAgICAgIGZyb20sCiAgICAgICAgICB0bywKICAgICAgICAgIGtleSwKICAgICAgICAgIGF4ZXMgPSBwbG90LmdldEF4ZXMoKTsKCiAgICAgIGZvciAodmFyIGsgaW4gYXhlcykgewogICAgICAgIGF4aXMgPSBheGVzW2tdOwoKICAgICAgICBpZiAoYXhpcy5kaXJlY3Rpb24gPT0gY29vcmQpIHsKICAgICAgICAgIGtleSA9IGNvb3JkICsgYXhpcy5uICsgImF4aXMiOwogICAgICAgICAgaWYgKCFyYW5nZXNba2V5XSAmJiBheGlzLm4gPT0gMSkga2V5ID0gY29vcmQgKyAiYXhpcyI7IC8vIHN1cHBvcnQgeDFheGlzIGFzIHhheGlzCgogICAgICAgICAgaWYgKHJhbmdlc1trZXldKSB7CiAgICAgICAgICAgIGZyb20gPSByYW5nZXNba2V5XS5mcm9tOwogICAgICAgICAgICB0byA9IHJhbmdlc1trZXldLnRvOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gLy8gYmFja3dhcmRzLWNvbXBhdCBzdHVmZiAtIHRvIGJlIHJlbW92ZWQgaW4gZnV0dXJlCgoKICAgICAgaWYgKCFyYW5nZXNba2V5XSkgewogICAgICAgIGF4aXMgPSBjb29yZCA9PSAieCIgPyBwbG90LmdldFhBeGVzKClbMF0gOiBwbG90LmdldFlBeGVzKClbMF07CiAgICAgICAgZnJvbSA9IHJhbmdlc1tjb29yZCArICIxIl07CiAgICAgICAgdG8gPSByYW5nZXNbY29vcmQgKyAiMiJdOwogICAgICB9IC8vIGF1dG8tcmV2ZXJzZSBhcyBhbiBhZGRlZCBib251cwoKCiAgICAgIGlmIChmcm9tICE9IG51bGwgJiYgdG8gIT0gbnVsbCAmJiBmcm9tID4gdG8pIHsKICAgICAgICB2YXIgdG1wID0gZnJvbTsKICAgICAgICBmcm9tID0gdG87CiAgICAgICAgdG8gPSB0bXA7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgZnJvbTogZnJvbSwKICAgICAgICB0bzogdG8sCiAgICAgICAgYXhpczogYXhpcwogICAgICB9OwogICAgfQoKICAgIGZ1bmN0aW9uIHNldFNlbGVjdGlvbihyYW5nZXMsIHByZXZlbnRFdmVudCkgewogICAgICB2YXIgYXhpcywKICAgICAgICAgIHJhbmdlLAogICAgICAgICAgbyA9IHBsb3QuZ2V0T3B0aW9ucygpOwoKICAgICAgaWYgKG8uc2VsZWN0aW9uLm1vZGUgPT0gInkiKSB7CiAgICAgICAgc2VsZWN0aW9uLmZpcnN0LnggPSAwOwogICAgICAgIHNlbGVjdGlvbi5zZWNvbmQueCA9IHBsb3Qud2lkdGgoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByYW5nZSA9IGV4dHJhY3RSYW5nZShyYW5nZXMsICJ4Iik7CiAgICAgICAgc2VsZWN0aW9uLmZpcnN0LnggPSByYW5nZS5heGlzLnAyYyhyYW5nZS5mcm9tKTsKICAgICAgICBzZWxlY3Rpb24uc2Vjb25kLnggPSByYW5nZS5heGlzLnAyYyhyYW5nZS50byk7CiAgICAgIH0KCiAgICAgIGlmIChvLnNlbGVjdGlvbi5tb2RlID09ICJ4IikgewogICAgICAgIHNlbGVjdGlvbi5maXJzdC55ID0gMDsKICAgICAgICBzZWxlY3Rpb24uc2Vjb25kLnkgPSBwbG90LmhlaWdodCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHJhbmdlID0gZXh0cmFjdFJhbmdlKHJhbmdlcywgInkiKTsKICAgICAgICBzZWxlY3Rpb24uZmlyc3QueSA9IHJhbmdlLmF4aXMucDJjKHJhbmdlLmZyb20pOwogICAgICAgIHNlbGVjdGlvbi5zZWNvbmQueSA9IHJhbmdlLmF4aXMucDJjKHJhbmdlLnRvKTsKICAgICAgfQoKICAgICAgc2VsZWN0aW9uLnNob3cgPSB0cnVlOwogICAgICBwbG90LnRyaWdnZXJSZWRyYXdPdmVybGF5KCk7CiAgICAgIGlmICghcHJldmVudEV2ZW50ICYmIHNlbGVjdGlvbklzU2FuZSgpKSB0cmlnZ2VyU2VsZWN0ZWRFdmVudCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNlbGVjdGlvbklzU2FuZSgpIHsKICAgICAgdmFyIG1pblNpemUgPSBwbG90LmdldE9wdGlvbnMoKS5zZWxlY3Rpb24ubWluU2l6ZTsKICAgICAgcmV0dXJuIE1hdGguYWJzKHNlbGVjdGlvbi5zZWNvbmQueCAtIHNlbGVjdGlvbi5maXJzdC54KSA+PSBtaW5TaXplICYmIE1hdGguYWJzKHNlbGVjdGlvbi5zZWNvbmQueSAtIHNlbGVjdGlvbi5maXJzdC55KSA+PSBtaW5TaXplOwogICAgfQoKICAgIHBsb3QuY2xlYXJTZWxlY3Rpb24gPSBjbGVhclNlbGVjdGlvbjsKICAgIHBsb3Quc2V0U2VsZWN0aW9uID0gc2V0U2VsZWN0aW9uOwogICAgcGxvdC5nZXRTZWxlY3Rpb24gPSBnZXRTZWxlY3Rpb247CiAgICBwbG90Lmhvb2tzLmJpbmRFdmVudHMucHVzaChmdW5jdGlvbiAocGxvdCwgZXZlbnRIb2xkZXIpIHsKICAgICAgdmFyIG8gPSBwbG90LmdldE9wdGlvbnMoKTsKCiAgICAgIGlmIChvLnNlbGVjdGlvbi5tb2RlICE9IG51bGwpIHsKICAgICAgICBldmVudEhvbGRlci5tb3VzZW1vdmUob25Nb3VzZU1vdmUpOwogICAgICAgIGV2ZW50SG9sZGVyLm1vdXNlZG93bihvbk1vdXNlRG93bik7CiAgICAgIH0KICAgIH0pOwogICAgcGxvdC5ob29rcy5kcmF3T3ZlcmxheS5wdXNoKGZ1bmN0aW9uIChwbG90LCBjdHgpIHsKICAgICAgLy8gZHJhdyBzZWxlY3Rpb24KICAgICAgaWYgKHNlbGVjdGlvbi5zaG93ICYmIHNlbGVjdGlvbklzU2FuZSgpKSB7CiAgICAgICAgdmFyIHBsb3RPZmZzZXQgPSBwbG90LmdldFBsb3RPZmZzZXQoKTsKICAgICAgICB2YXIgbyA9IHBsb3QuZ2V0T3B0aW9ucygpOwogICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgY3R4LnRyYW5zbGF0ZShwbG90T2Zmc2V0LmxlZnQsIHBsb3RPZmZzZXQudG9wKTsKICAgICAgICB2YXIgYyA9ICQuY29sb3IucGFyc2Uoby5zZWxlY3Rpb24uY29sb3IpOwogICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGMuc2NhbGUoJ2EnLCAwLjgpLnRvU3RyaW5nKCk7CiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICAgICAgY3R4LmxpbmVKb2luID0gby5zZWxlY3Rpb24uc2hhcGU7CiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGMuc2NhbGUoJ2EnLCAwLjQpLnRvU3RyaW5nKCk7CiAgICAgICAgdmFyIHggPSBNYXRoLm1pbihzZWxlY3Rpb24uZmlyc3QueCwgc2VsZWN0aW9uLnNlY29uZC54KSArIDAuNSwKICAgICAgICAgICAgeSA9IE1hdGgubWluKHNlbGVjdGlvbi5maXJzdC55LCBzZWxlY3Rpb24uc2Vjb25kLnkpICsgMC41LAogICAgICAgICAgICB3ID0gTWF0aC5hYnMoc2VsZWN0aW9uLnNlY29uZC54IC0gc2VsZWN0aW9uLmZpcnN0LngpIC0gMSwKICAgICAgICAgICAgaCA9IE1hdGguYWJzKHNlbGVjdGlvbi5zZWNvbmQueSAtIHNlbGVjdGlvbi5maXJzdC55KSAtIDE7CiAgICAgICAgY3R4LmZpbGxSZWN0KHgsIHksIHcsIGgpOwogICAgICAgIGN0eC5zdHJva2VSZWN0KHgsIHksIHcsIGgpOwogICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgIH0KICAgIH0pOwogICAgcGxvdC5ob29rcy5zaHV0ZG93bi5wdXNoKGZ1bmN0aW9uIChwbG90LCBldmVudEhvbGRlcikgewogICAgICBldmVudEhvbGRlci51bmJpbmQoIm1vdXNlbW92ZSIsIG9uTW91c2VNb3ZlKTsKICAgICAgZXZlbnRIb2xkZXIudW5iaW5kKCJtb3VzZWRvd24iLCBvbk1vdXNlRG93bik7CiAgICAgIGlmIChtb3VzZVVwSGFuZGxlcikgJChkb2N1bWVudCkudW5iaW5kKCJtb3VzZXVwIiwgbW91c2VVcEhhbmRsZXIpOwogICAgfSk7CiAgfQoKICAkLnBsb3QucGx1Z2lucy5wdXNoKHsKICAgIGluaXQ6IGluaXQsCiAgICBvcHRpb25zOiB7CiAgICAgIHNlbGVjdGlvbjogewogICAgICAgIG1vZGU6IG51bGwsCiAgICAgICAgLy8gb25lIG9mIG51bGwsICJ4IiwgInkiIG9yICJ4eSIKICAgICAgICBjb2xvcjogIiNlOGNmYWMiLAogICAgICAgIHNoYXBlOiAicm91bmQiLAogICAgICAgIC8vIG9uZSBvZiAicm91bmQiLCAibWl0ZXIiLCBvciAiYmV2ZWwiCiAgICAgICAgbWluU2l6ZTogNSAvLyBtaW5pbXVtIG51bWJlciBvZiBwaXhlbHMKCiAgICAgIH0KICAgIH0sCiAgICBuYW1lOiAnc2VsZWN0aW9uJywKICAgIHZlcnNpb246ICcxLjEnCiAgfSk7Cn0pKGpRdWVyeSk7"},null]}