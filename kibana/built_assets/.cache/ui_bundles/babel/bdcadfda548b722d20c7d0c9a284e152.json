{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/monitoring/public/directives/main/index.js","dependencies":[{"path":"x-pack/legacy/plugins/monitoring/public/directives/main/index.js","mtime":1589249552596},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLk1vbml0b3JpbmdNYWluQ29udHJvbGxlciA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoInJlYWN0LWRvbSIpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9sb2Rhc2ggPSByZXF1aXJlKCJsb2Rhc2giKTsKCnZhciBfbW9kdWxlcyA9IHJlcXVpcmUoInBsdWdpbnMvbW9uaXRvcmluZy9ucF9pbXBvcnRzL3VpL21vZHVsZXMiKTsKCnZhciBfaW5kZXggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vaW5kZXguaHRtbCIpKTsKCnZhciBfdGltZWZpbHRlciA9IHJlcXVpcmUoInBsdWdpbnMvbW9uaXRvcmluZy9ucF9pbXBvcnRzL3VpL3RpbWVmaWx0ZXIiKTsKCnZhciBfZm9ybWF0dGluZyA9IHJlcXVpcmUoIi4uLy4uLy4uL2NvbW1vbi9mb3JtYXR0aW5nIik7Cgp2YXIgX3NldHVwX21vZGUgPSByZXF1aXJlKCIuLi8uLi9saWIvc2V0dXBfbW9kZSIpOwoKdmFyIF9yeGpzID0gcmVxdWlyZSgicnhqcyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9Cgp2YXIgc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIHNldE9wdGlvbnMoY29udHJvbGxlcikgewogIGlmICghY29udHJvbGxlci5waXBlbGluZVZlcnNpb25zIHx8ICFjb250cm9sbGVyLnBpcGVsaW5lVmVyc2lvbnMubGVuZ3RoIHx8ICFjb250cm9sbGVyLnBpcGVsaW5lRHJvcGRvd25FbGVtZW50KSB7CiAgICByZXR1cm47CiAgfQoKICAoMCwgX3JlYWN0RG9tLnJlbmRlcikoX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICBncm93OiBmYWxzZQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUaXRsZSwgewogICAgc3R5bGU6IHsKICAgICAgbWF4V2lkdGg6IDQwMCwKICAgICAgbGluZUhlaWdodDogJzQwcHgnLAogICAgICBvdmVyZmxvdzogJ2hpZGRlbicsCiAgICAgIHdoaXRlU3BhY2U6ICdub3dyYXAnCiAgICB9CiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiaDIiLCBudWxsLCBjb250cm9sbGVyLnBpcGVsaW5lSWQpKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgZ3JvdzogZmFsc2UKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU2VsZWN0LCB7CiAgICB2YWx1ZTogY29udHJvbGxlci5waXBlbGluZUhhc2gsCiAgICBvcHRpb25zOiBjb250cm9sbGVyLnBpcGVsaW5lVmVyc2lvbnMubWFwKGZ1bmN0aW9uIChvcHRpb24pIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB0ZXh0OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subW9uaXRvcmluZy5sb2dzdGFzaE5hdmlnYXRpb24ucGlwZWxpbmVWZXJzaW9uRGVzY3JpcHRpb24nLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1ZlcnNpb24gYWN0aXZlIHtyZWxhdGl2ZUxhc3RTZWVufSBhbmQgZmlyc3Qgc2VlbiB7cmVsYXRpdmVGaXJzdFNlZW59JywKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICByZWxhdGl2ZUxhc3RTZWVuOiBvcHRpb24ucmVsYXRpdmVMYXN0U2VlbiwKICAgICAgICAgICAgcmVsYXRpdmVGaXJzdFNlZW46IG9wdGlvbi5yZWxhdGl2ZUZpcnN0U2VlbgogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgIHZhbHVlOiBvcHRpb24uaGFzaAogICAgICB9OwogICAgfSksCiAgICBvbkNoYW5nZTogY29udHJvbGxlci5vbkNoYW5nZVBpcGVsaW5lSGFzaAogIH0pKSksIGNvbnRyb2xsZXIucGlwZWxpbmVEcm9wZG93bkVsZW1lbnQpOwp9OwovKgogKiBNYW5hZ2UgZGF0YSBhbmQgcHJvdmlkZSBoZWxwZXIgbWV0aG9kcyBmb3IgdGhlICJtYWluIiBkaXJlY3RpdmUncyB0ZW1wbGF0ZQogKi8KCgp2YXIgTW9uaXRvcmluZ01haW5Db250cm9sbGVyID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgLy8gY2FsbGVkIGludGVybmFsbHkgYnkgQW5ndWxhcgogIGZ1bmN0aW9uIE1vbml0b3JpbmdNYWluQ29udHJvbGxlcigpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vbml0b3JpbmdNYWluQ29udHJvbGxlcik7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhZGRUaW1lcmFuZ2VPYnNlcnZlcnMiLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnN1YnNjcmlwdGlvbnMgPSBuZXcgX3J4anMuU3Vic2NyaXB0aW9uKCk7CgogICAgICB2YXIgcmVmcmVzaEludGVydmFsVXBkYXRlZCA9IGZ1bmN0aW9uIHJlZnJlc2hJbnRlcnZhbFVwZGF0ZWQoKSB7CiAgICAgICAgdmFyIF90aW1lZmlsdGVyJGdldFJlZnJlcyA9IF90aW1lZmlsdGVyLnRpbWVmaWx0ZXIuZ2V0UmVmcmVzaEludGVydmFsKCksCiAgICAgICAgICAgIHJlZnJlc2hJbnRlcnZhbCA9IF90aW1lZmlsdGVyJGdldFJlZnJlcy52YWx1ZSwKICAgICAgICAgICAgaXNQYXVzZWQgPSBfdGltZWZpbHRlciRnZXRSZWZyZXMucGF1c2U7CgogICAgICAgIF90aGlzLmRhdGVQaWNrZXIub25SZWZyZXNoQ2hhbmdlKHsKICAgICAgICAgIHJlZnJlc2hJbnRlcnZhbDogcmVmcmVzaEludGVydmFsLAogICAgICAgICAgaXNQYXVzZWQ6IGlzUGF1c2VkCiAgICAgICAgfSwgdHJ1ZSk7CiAgICAgIH07CgogICAgICB2YXIgdGltZVVwZGF0ZWQgPSBmdW5jdGlvbiB0aW1lVXBkYXRlZCgpIHsKICAgICAgICBfdGhpcy5kYXRlUGlja2VyLm9uVGltZVVwZGF0ZSh7CiAgICAgICAgICBkYXRlUmFuZ2U6IF90aW1lZmlsdGVyLnRpbWVmaWx0ZXIuZ2V0VGltZSgpCiAgICAgICAgfSwgdHJ1ZSk7CiAgICAgIH07CgogICAgICBfdGhpcy5zdWJzY3JpcHRpb25zLmFkZChfdGltZWZpbHRlci50aW1lZmlsdGVyLmdldFJlZnJlc2hJbnRlcnZhbFVwZGF0ZSQoKS5zdWJzY3JpYmUocmVmcmVzaEludGVydmFsVXBkYXRlZCkpOwoKICAgICAgX3RoaXMuc3Vic2NyaXB0aW9ucy5hZGQoX3RpbWVmaWx0ZXIudGltZWZpbHRlci5nZXRUaW1lVXBkYXRlJCgpLnN1YnNjcmliZSh0aW1lVXBkYXRlZCkpOwogICAgfSk7CgogICAgdGhpcy5pbkxpc3RpbmcgPSBmYWxzZTsKICAgIHRoaXMuaW5BbGVydHMgPSBmYWxzZTsKICAgIHRoaXMuaW5PdmVydmlldyA9IGZhbHNlOwogICAgdGhpcy5pbkVsYXN0aWNzZWFyY2ggPSBmYWxzZTsKICAgIHRoaXMuaW5LaWJhbmEgPSBmYWxzZTsKICAgIHRoaXMuaW5Mb2dzdGFzaCA9IGZhbHNlOwogICAgdGhpcy5pbkJlYXRzID0gZmFsc2U7CiAgICB0aGlzLmluQXBtID0gZmFsc2U7CiAgfQoKICBfY3JlYXRlQ2xhc3MoTW9uaXRvcmluZ01haW5Db250cm9sbGVyLCBbewogICAga2V5OiAiZHJvcGRvd25Mb2FkZWRIYW5kbGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkcm9wZG93bkxvYWRlZEhhbmRsZXIoKSB7CiAgICAgIHRoaXMucGlwZWxpbmVEcm9wZG93bkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZHJvcGRvd24tZWxtJyk7CiAgICAgIHNldE9wdGlvbnModGhpcyk7CiAgICB9IC8vIGtpY2sgdGhpbmdzIG9mZiBmcm9tIHRoZSBkaXJlY3RpdmUgbGluayBmdW5jdGlvbgoKICB9LCB7CiAgICBrZXk6ICJzZXR1cCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0dXAob3B0aW9ucykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuX2xpY2Vuc2VTZXJ2aWNlID0gb3B0aW9ucy5saWNlbnNlU2VydmljZTsKICAgICAgdGhpcy5fYnJlYWRjcnVtYnNTZXJ2aWNlID0gb3B0aW9ucy5icmVhZGNydW1ic1NlcnZpY2U7CiAgICAgIHRoaXMuX2tiblVybFNlcnZpY2UgPSBvcHRpb25zLmtiblVybFNlcnZpY2U7CiAgICAgIHRoaXMuX2V4ZWN1dG9yU2VydmljZSA9IG9wdGlvbnMuZXhlY3V0b3JTZXJ2aWNlOwogICAgICBPYmplY3QuYXNzaWduKHRoaXMsIG9wdGlvbnMuYXR0cmlidXRlcyk7CiAgICAgIHRoaXMubmF2TmFtZSA9ICIiLmNvbmNhdCh0aGlzLm5hbWUsICItbmF2Iik7IC8vIHNldCB0aGUgc2VjdGlvbiB3ZSdyZSBuYXZpZ2F0ZWQgaW4KCiAgICAgIGlmICh0aGlzLnByb2R1Y3QpIHsKICAgICAgICB0aGlzLmluRWxhc3RpY3NlYXJjaCA9IHRoaXMucHJvZHVjdCA9PT0gJ2VsYXN0aWNzZWFyY2gnOwogICAgICAgIHRoaXMuaW5LaWJhbmEgPSB0aGlzLnByb2R1Y3QgPT09ICdraWJhbmEnOwogICAgICAgIHRoaXMuaW5Mb2dzdGFzaCA9IHRoaXMucHJvZHVjdCA9PT0gJ2xvZ3N0YXNoJzsKICAgICAgICB0aGlzLmluQmVhdHMgPSB0aGlzLnByb2R1Y3QgPT09ICdiZWF0cyc7CiAgICAgICAgdGhpcy5pbkFwbSA9IHRoaXMucHJvZHVjdCA9PT0gJ2FwbSc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pbk92ZXJ2aWV3ID0gdGhpcy5uYW1lID09PSAnb3ZlcnZpZXcnOwogICAgICAgIHRoaXMuaW5BbGVydHMgPSB0aGlzLm5hbWUgPT09ICdhbGVydHMnOwogICAgICAgIHRoaXMuaW5MaXN0aW5nID0gdGhpcy5uYW1lID09PSAnbGlzdGluZyc7IC8vIHx8IHRoaXMubmFtZSA9PT0gJ25vLWRhdGEnOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuaW5MaXN0aW5nKSB7CiAgICAgICAgLy8gbm8gYnJlYWRjcnVtYnMgaW4gY2x1c3RlciBsaXN0aW5nIHBhZ2UKICAgICAgICB0aGlzLmJyZWFkY3J1bWJzID0gdGhpcy5fYnJlYWRjcnVtYnNTZXJ2aWNlKG9wdGlvbnMuY2x1c3Rlck5hbWUsIHRoaXMpOwogICAgICB9CgogICAgICBpZiAodGhpcy5waXBlbGluZUhhc2gpIHsKICAgICAgICB0aGlzLnBpcGVsaW5lSGFzaFNob3J0ID0gKDAsIF9mb3JtYXR0aW5nLnNob3J0ZW5QaXBlbGluZUhhc2gpKHRoaXMucGlwZWxpbmVIYXNoKTsKCiAgICAgICAgdGhpcy5vbkNoYW5nZVBpcGVsaW5lSGFzaCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczIuX2tiblVybFNlcnZpY2UuY2hhbmdlUGF0aCgiL2xvZ3N0YXNoL3BpcGVsaW5lcy8iLmNvbmNhdChfdGhpczIucGlwZWxpbmVJZCwgIi8iKS5jb25jYXQoX3RoaXMyLnBpcGVsaW5lSGFzaCkpOwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHRoaXMuZGF0ZVBpY2tlciA9IHsKICAgICAgICB0aW1lUmFuZ2U6IF90aW1lZmlsdGVyLnRpbWVmaWx0ZXIuZ2V0VGltZSgpLAogICAgICAgIHJlZnJlc2hJbnRlcnZhbDogX3RpbWVmaWx0ZXIudGltZWZpbHRlci5nZXRSZWZyZXNoSW50ZXJ2YWwoKSwKICAgICAgICBvblJlZnJlc2hDaGFuZ2U6IGZ1bmN0aW9uIG9uUmVmcmVzaENoYW5nZShfcmVmKSB7CiAgICAgICAgICB2YXIgaXNQYXVzZWQgPSBfcmVmLmlzUGF1c2VkLAogICAgICAgICAgICAgIHJlZnJlc2hJbnRlcnZhbCA9IF9yZWYucmVmcmVzaEludGVydmFsOwogICAgICAgICAgdmFyIHNraXBTZXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogICAgICAgICAgX3RoaXMyLmRhdGVQaWNrZXIucmVmcmVzaEludGVydmFsID0gewogICAgICAgICAgICBwYXVzZTogaXNQYXVzZWQsCiAgICAgICAgICAgIHZhbHVlOiByZWZyZXNoSW50ZXJ2YWwKICAgICAgICAgIH07CgogICAgICAgICAgaWYgKCFza2lwU2V0KSB7CiAgICAgICAgICAgIF90aW1lZmlsdGVyLnRpbWVmaWx0ZXIuc2V0UmVmcmVzaEludGVydmFsKHsKICAgICAgICAgICAgICBwYXVzZTogaXNQYXVzZWQsCiAgICAgICAgICAgICAgdmFsdWU6IHJlZnJlc2hJbnRlcnZhbCA/IHJlZnJlc2hJbnRlcnZhbCA6IF90aGlzMi5kYXRlUGlja2VyLnJlZnJlc2hJbnRlcnZhbC52YWx1ZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIG9uVGltZVVwZGF0ZTogZnVuY3Rpb24gb25UaW1lVXBkYXRlKF9yZWYyKSB7CiAgICAgICAgICB2YXIgZGF0ZVJhbmdlID0gX3JlZjIuZGF0ZVJhbmdlOwogICAgICAgICAgdmFyIHNraXBTZXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogICAgICAgICAgX3RoaXMyLmRhdGVQaWNrZXIudGltZVJhbmdlID0gX29iamVjdFNwcmVhZCh7fSwgZGF0ZVJhbmdlKTsKCiAgICAgICAgICBpZiAoIXNraXBTZXQpIHsKICAgICAgICAgICAgX3RpbWVmaWx0ZXIudGltZWZpbHRlci5zZXRUaW1lKGRhdGVSYW5nZSk7CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXMyLl9leGVjdXRvclNlcnZpY2UuY2FuY2VsKCk7CgogICAgICAgICAgX3RoaXMyLl9leGVjdXRvclNlcnZpY2UucnVuKCk7CiAgICAgICAgfQogICAgICB9OwogICAgfSAvLyBjaGVjayB3aGV0aGVyIHRvICJoaWdobGlnaHQiIGEgdGFiCgogIH0sIHsKICAgIGtleTogImlzQWN0aXZlVGFiIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0FjdGl2ZVRhYih0ZXN0UGF0aCkgewogICAgICByZXR1cm4gdGhpcy5uYW1lID09PSB0ZXN0UGF0aDsKICAgIH0gLy8gY2hlY2sgd2hldGhlciB0byBzaG93IE1MIHRhYgoKICB9LCB7CiAgICBrZXk6ICJpc01sU3VwcG9ydGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc01sU3VwcG9ydGVkKCkgewogICAgICByZXR1cm4gdGhpcy5fbGljZW5zZVNlcnZpY2UubWxJc1N1cHBvcnRlZCgpOwogICAgfQogIH0sIHsKICAgIGtleTogImlzRGlzYWJsZWRUYWIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzRGlzYWJsZWRUYWIocHJvZHVjdCkgewogICAgICB2YXIgc2V0dXBNb2RlID0gKDAsIF9zZXR1cF9tb2RlLmdldFNldHVwTW9kZVN0YXRlKSgpOwoKICAgICAgaWYgKCFzZXR1cE1vZGUuZW5hYmxlZCB8fCAhc2V0dXBNb2RlLmRhdGEpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHZhciBkYXRhID0gc2V0dXBNb2RlLmRhdGFbcHJvZHVjdF0gfHwge307CgogICAgICBpZiAoZGF0YS50b3RhbFVuaXF1ZUluc3RhbmNlQ291bnQgPT09IDApIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKGRhdGEudG90YWxVbmlxdWVJbnRlcm5hbGx5Q29sbGVjdGVkQ291bnQgPT09IDAgJiYgZGF0YS50b3RhbFVuaXF1ZUZ1bGx5TWlncmF0ZWRDb3VudCA9PT0gMCAmJiBkYXRhLnRvdGFsVW5pcXVlUGFydGlhbGx5TWlncmF0ZWRDb3VudCA9PT0gMCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTW9uaXRvcmluZ01haW5Db250cm9sbGVyOwp9KCk7CgpleHBvcnRzLk1vbml0b3JpbmdNYWluQ29udHJvbGxlciA9IE1vbml0b3JpbmdNYWluQ29udHJvbGxlcjsKCnZhciB1aU1vZHVsZSA9IF9tb2R1bGVzLnVpTW9kdWxlcy5nZXQoJ21vbml0b3JpbmcvZGlyZWN0aXZlcycsIFtdKTsKCnVpTW9kdWxlLmRpcmVjdGl2ZSgnbW9uaXRvcmluZ01haW4nLCBmdW5jdGlvbiAoYnJlYWRjcnVtYnMsIGxpY2Vuc2UsIGtiblVybCwgJGluamVjdG9yKSB7CiAgdmFyICRleGVjdXRvciA9ICRpbmplY3Rvci5nZXQoJyRleGVjdXRvcicpOwogIHJldHVybiB7CiAgICByZXN0cmljdDogJ0UnLAogICAgdHJhbnNjbHVkZTogdHJ1ZSwKICAgIHRlbXBsYXRlOiBfaW5kZXguZGVmYXVsdCwKICAgIGNvbnRyb2xsZXI6IE1vbml0b3JpbmdNYWluQ29udHJvbGxlciwKICAgIGNvbnRyb2xsZXJBczogJ21vbml0b3JpbmdNYWluJywKICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsCiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBfZWxlbWVudCwgYXR0cmlidXRlcywgY29udHJvbGxlcikgewogICAgICBjb250cm9sbGVyLmFkZFRpbWVyYW5nZU9ic2VydmVycygpOwogICAgICAoMCwgX3NldHVwX21vZGUuaW5pdFNldHVwTW9kZVN0YXRlKShzY29wZSwgJGluamVjdG9yLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29udHJvbGxlci5zZXR1cChnZXRTZXR1cE9iaigpKTsKICAgICAgfSk7CgogICAgICBpZiAoIXNjb3BlLmNsdXN0ZXIpIHsKICAgICAgICB2YXIgJHJvdXRlID0gJGluamVjdG9yLmdldCgnJHJvdXRlJyk7CiAgICAgICAgdmFyIGdsb2JhbFN0YXRlID0gJGluamVjdG9yLmdldCgnZ2xvYmFsU3RhdGUnKTsKICAgICAgICBzY29wZS5jbHVzdGVyID0gKCRyb3V0ZS5jdXJyZW50LmxvY2Fscy5jbHVzdGVycyB8fCBbXSkuZmluZChmdW5jdGlvbiAoY2x1c3RlcikgewogICAgICAgICAgcmV0dXJuIGNsdXN0ZXIuY2x1c3Rlcl91dWlkID09PSBnbG9iYWxTdGF0ZS5jbHVzdGVyX3V1aWQ7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGdldFNldHVwT2JqKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBsaWNlbnNlU2VydmljZTogbGljZW5zZSwKICAgICAgICAgIGJyZWFkY3J1bWJzU2VydmljZTogYnJlYWRjcnVtYnMsCiAgICAgICAgICBleGVjdXRvclNlcnZpY2U6ICRleGVjdXRvciwKICAgICAgICAgIGtiblVybFNlcnZpY2U6IGtiblVybCwKICAgICAgICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgICAgICAgbmFtZTogYXR0cmlidXRlcy5uYW1lLAogICAgICAgICAgICBwcm9kdWN0OiBhdHRyaWJ1dGVzLnByb2R1Y3QsCiAgICAgICAgICAgIGluc3RhbmNlOiBhdHRyaWJ1dGVzLmluc3RhbmNlLAogICAgICAgICAgICByZXNvbHZlcjogYXR0cmlidXRlcy5yZXNvbHZlciwKICAgICAgICAgICAgcGFnZTogYXR0cmlidXRlcy5wYWdlLAogICAgICAgICAgICB0YWJJY29uQ2xhc3M6IGF0dHJpYnV0ZXMudGFiSWNvbkNsYXNzLAogICAgICAgICAgICB0YWJJY29uTGFiZWw6IGF0dHJpYnV0ZXMudGFiSWNvbkxhYmVsLAogICAgICAgICAgICBwaXBlbGluZUlkOiBhdHRyaWJ1dGVzLnBpcGVsaW5lSWQsCiAgICAgICAgICAgIHBpcGVsaW5lSGFzaDogYXR0cmlidXRlcy5waXBlbGluZUhhc2gsCiAgICAgICAgICAgIHBpcGVsaW5lVmVyc2lvbnM6ICgwLCBfbG9kYXNoLmdldCkoc2NvcGUsICdwYWdlRGF0YS52ZXJzaW9ucycpLAogICAgICAgICAgICBpc0NjckVuYWJsZWQ6IGF0dHJpYnV0ZXMuaXNDY3JFbmFibGVkID09PSAndHJ1ZScgfHwgYXR0cmlidXRlcy5pc0NjckVuYWJsZWQgPT09IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICBjbHVzdGVyTmFtZTogKDAsIF9sb2Rhc2guZ2V0KShzY29wZSwgJ2NsdXN0ZXIuY2x1c3Rlcl9uYW1lJykKICAgICAgICB9OwogICAgICB9CgogICAgICB2YXIgc2V0dXBPYmogPSBnZXRTZXR1cE9iaigpOwogICAgICBjb250cm9sbGVyLnNldHVwKHNldHVwT2JqKTsKICAgICAgT2JqZWN0LmtleXMoc2V0dXBPYmouYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgYXR0cmlidXRlcy4kb2JzZXJ2ZShrZXksIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBjb250cm9sbGVyLnNldHVwKGdldFNldHVwT2JqKCkpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHsKICAgICAgICBjb250cm9sbGVyLnBpcGVsaW5lRHJvcGRvd25FbGVtZW50ICYmICgwLCBfcmVhY3REb20udW5tb3VudENvbXBvbmVudEF0Tm9kZSkoY29udHJvbGxlci5waXBlbGluZURyb3Bkb3duRWxlbWVudCk7CiAgICAgICAgY29udHJvbGxlci5zdWJzY3JpcHRpb25zICYmIGNvbnRyb2xsZXIuc3Vic2NyaXB0aW9ucy51bnN1YnNjcmliZSgpOwogICAgICB9KTsKICAgICAgc2NvcGUuJHdhdGNoKCdwYWdlRGF0YS52ZXJzaW9ucycsIGZ1bmN0aW9uICh2ZXJzaW9ucykgewogICAgICAgIGNvbnRyb2xsZXIucGlwZWxpbmVWZXJzaW9ucyA9IHZlcnNpb25zOwogICAgICAgIHNldE9wdGlvbnMoY29udHJvbGxlcik7CiAgICAgIH0pOwogICAgfQogIH07Cn0pOw=="},null]}