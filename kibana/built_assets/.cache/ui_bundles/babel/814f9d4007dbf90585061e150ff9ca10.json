{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/infra/public/utils/url_state.js","dependencies":[{"path":"x-pack/plugins/infra/public/utils/url_state.js","mtime":1589249554333},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMucmVwbGFjZVN0YXRlS2V5SW5RdWVyeVN0cmluZyA9IGV4cG9ydHMuZ2V0UGFyYW1Gcm9tUXVlcnlTdHJpbmcgPSBleHBvcnRzLmdldFF1ZXJ5U3RyaW5nRnJvbUxvY2F0aW9uID0gZXhwb3J0cy5kZWNvZGVSaXNvblVybFN0YXRlID0gZXhwb3J0cy5VcmxTdGF0ZUNvbnRhaW5lciA9IHZvaWQgMDsKCnZhciBfcXVlcnlTdHJpbmcgPSByZXF1aXJlKCJxdWVyeS1zdHJpbmciKTsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcmVhY3RSb3V0ZXJEb20gPSByZXF1aXJlKCJyZWFjdC1yb3V0ZXItZG9tIik7Cgp2YXIgX3Jpc29uTm9kZSA9IHJlcXVpcmUoInJpc29uLW5vZGUiKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vc3JjL3BsdWdpbnMva2liYW5hX3V0aWxzL3B1YmxpYyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2V4dGVuZHMoKSB7CiAgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07CgogICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsKICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRhcmdldDsKICB9OwoKICByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9IGVsc2UgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0KCiAgcmV0dXJuIF90eXBlb2Yob2JqKTsKfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgewogIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsKICAgIHJldHVybiBjYWxsOwogIH0KCiAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7Cn0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7CiAgfTsKICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOwp9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsKICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIHNlbGY7Cn0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgewogIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOwogIH0KCiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICBjb25zdHJ1Y3RvcjogewogICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0KICB9KTsKICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsKfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICAgIG8uX19wcm90b19fID0gcDsKICAgIHJldHVybiBvOwogIH07CgogIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Cgp2YXIgVXJsU3RhdGVDb250YWluZXJMaWZlY3ljbGUgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7CiAgX2luaGVyaXRzKFVybFN0YXRlQ29udGFpbmVyTGlmZWN5Y2xlLCBfUmVhY3QkQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gVXJsU3RhdGVDb250YWluZXJMaWZlY3ljbGUoKSB7CiAgICB2YXIgX2dldFByb3RvdHlwZU9mMjsKCiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVybFN0YXRlQ29udGFpbmVyTGlmZWN5Y2xlKTsKCiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgIH0KCiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChfZ2V0UHJvdG90eXBlT2YyID0gX2dldFByb3RvdHlwZU9mKFVybFN0YXRlQ29udGFpbmVyTGlmZWN5Y2xlKSkuY2FsbC5hcHBseShfZ2V0UHJvdG90eXBlT2YyLCBbdGhpc10uY29uY2F0KGFyZ3MpKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicmVwbGFjZVN0YXRlSW5Mb2NhdGlvbiIsICgwLCBfbG9kYXNoLnRocm90dGxlKShmdW5jdGlvbiAodXJsU3RhdGUpIHsKICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsCiAgICAgICAgICBoaXN0b3J5ID0gX3RoaXMkcHJvcHMuaGlzdG9yeSwKICAgICAgICAgIGxvY2F0aW9uID0gX3RoaXMkcHJvcHMubG9jYXRpb24sCiAgICAgICAgICB1cmxTdGF0ZUtleSA9IF90aGlzJHByb3BzLnVybFN0YXRlS2V5OwogICAgICB2YXIgbmV3TG9jYXRpb24gPSByZXBsYWNlUXVlcnlTdHJpbmdJbkxvY2F0aW9uKGxvY2F0aW9uLCByZXBsYWNlU3RhdGVLZXlJblF1ZXJ5U3RyaW5nKHVybFN0YXRlS2V5LCB1cmxTdGF0ZSkoZ2V0UXVlcnlTdHJpbmdGcm9tTG9jYXRpb24obG9jYXRpb24pKSk7CgogICAgICBpZiAobmV3TG9jYXRpb24gIT09IGxvY2F0aW9uKSB7CiAgICAgICAgaGlzdG9yeS5yZXBsYWNlKG5ld0xvY2F0aW9uKTsKICAgICAgfQogICAgfSwgMTAwMCkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUluaXRpYWxpemUiLCBmdW5jdGlvbiAobG9jYXRpb24pIHsKICAgICAgdmFyIF90aGlzJHByb3BzMiA9IF90aGlzLnByb3BzLAogICAgICAgICAgb25Jbml0aWFsaXplID0gX3RoaXMkcHJvcHMyLm9uSW5pdGlhbGl6ZSwKICAgICAgICAgIG1hcFRvVXJsU3RhdGUgPSBfdGhpcyRwcm9wczIubWFwVG9VcmxTdGF0ZSwKICAgICAgICAgIHVybFN0YXRlS2V5ID0gX3RoaXMkcHJvcHMyLnVybFN0YXRlS2V5LAogICAgICAgICAgdXJsU3RhdGUgPSBfdGhpcyRwcm9wczIudXJsU3RhdGU7CgogICAgICBpZiAoIW9uSW5pdGlhbGl6ZSB8fCAhbWFwVG9VcmxTdGF0ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIG5ld1VybFN0YXRlU3RyaW5nID0gZ2V0UGFyYW1Gcm9tUXVlcnlTdHJpbmcoZ2V0UXVlcnlTdHJpbmdGcm9tTG9jYXRpb24obG9jYXRpb24pLCB1cmxTdGF0ZUtleSk7CiAgICAgIHZhciBuZXdVcmxTdGF0ZSA9IG1hcFRvVXJsU3RhdGUoZGVjb2RlUmlzb25VcmxTdGF0ZShuZXdVcmxTdGF0ZVN0cmluZykpOyAvLyBXaGVuIHRoZSBuZXdVUkxTdGF0ZSBpcyBlbXB0eSB3ZSBjYW4gYXNzdW1lIHRoYXQgdGhlIHN0YXRlIHdpbGwgYmVjb21pbmcKICAgICAgLy8gZnJvbSB0aGUgdXJsU3RhdGUgaW5pdGlhbGx5LiBCeSBzZXR0aW5nIHBvcHVsYXRlV2l0aEludGlhbFN0YXRlIHRvIHRydWUKICAgICAgLy8gdGhpcyB3aWxsIG5vdyBzZXJpYWxpemUgdGhlIGluaXRpYWwgdXJsU3RhdGUgaW50byB0aGUgVVJMIHdoZW4gdGhlIHBhZ2UgaXMKICAgICAgLy8gbG9hZGVkLgoKICAgICAgaWYgKCFuZXdVcmxTdGF0ZSAmJiBfdGhpcy5wcm9wcy5wb3B1bGF0ZVdpdGhJbml0aWFsU3RhdGUpIHsKICAgICAgICBfdGhpcy5yZXBsYWNlU3RhdGVJbkxvY2F0aW9uKHVybFN0YXRlKTsKCiAgICAgICAgb25Jbml0aWFsaXplKHVybFN0YXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvbkluaXRpYWxpemUobmV3VXJsU3RhdGUpOwogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVMb2NhdGlvbkNoYW5nZSIsIGZ1bmN0aW9uIChwcmV2TG9jYXRpb24sIG5ld0xvY2F0aW9uKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wczMgPSBfdGhpcy5wcm9wcywKICAgICAgICAgIG9uQ2hhbmdlID0gX3RoaXMkcHJvcHMzLm9uQ2hhbmdlLAogICAgICAgICAgbWFwVG9VcmxTdGF0ZSA9IF90aGlzJHByb3BzMy5tYXBUb1VybFN0YXRlLAogICAgICAgICAgdXJsU3RhdGVLZXkgPSBfdGhpcyRwcm9wczMudXJsU3RhdGVLZXk7CgogICAgICBpZiAoIW9uQ2hhbmdlIHx8ICFtYXBUb1VybFN0YXRlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgcHJldmlvdXNVcmxTdGF0ZVN0cmluZyA9IGdldFBhcmFtRnJvbVF1ZXJ5U3RyaW5nKGdldFF1ZXJ5U3RyaW5nRnJvbUxvY2F0aW9uKHByZXZMb2NhdGlvbiksIHVybFN0YXRlS2V5KTsKICAgICAgdmFyIG5ld1VybFN0YXRlU3RyaW5nID0gZ2V0UGFyYW1Gcm9tUXVlcnlTdHJpbmcoZ2V0UXVlcnlTdHJpbmdGcm9tTG9jYXRpb24obmV3TG9jYXRpb24pLCB1cmxTdGF0ZUtleSk7CgogICAgICBpZiAocHJldmlvdXNVcmxTdGF0ZVN0cmluZyAhPT0gbmV3VXJsU3RhdGVTdHJpbmcpIHsKICAgICAgICB2YXIgX3ByZXZpb3VzVXJsU3RhdGUgPSBtYXBUb1VybFN0YXRlKGRlY29kZVJpc29uVXJsU3RhdGUocHJldmlvdXNVcmxTdGF0ZVN0cmluZykpOwoKICAgICAgICB2YXIgbmV3VXJsU3RhdGUgPSBtYXBUb1VybFN0YXRlKGRlY29kZVJpc29uVXJsU3RhdGUobmV3VXJsU3RhdGVTdHJpbmcpKTsKCiAgICAgICAgaWYgKHR5cGVvZiBuZXdVcmxTdGF0ZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIG9uQ2hhbmdlKG5ld1VybFN0YXRlLCBfcHJldmlvdXNVcmxTdGF0ZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoVXJsU3RhdGVDb250YWluZXJMaWZlY3ljbGUsIFt7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50RGlkVXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoX3JlZikgewogICAgICB2YXIgcHJldkxvY2F0aW9uID0gX3JlZi5sb2NhdGlvbiwKICAgICAgICAgIHByZXZVcmxTdGF0ZSA9IF9yZWYudXJsU3RhdGU7CiAgICAgIHZhciBfdGhpcyRwcm9wczQgPSB0aGlzLnByb3BzLAogICAgICAgICAgaGlzdG9yeSA9IF90aGlzJHByb3BzNC5oaXN0b3J5LAogICAgICAgICAgbG9jYXRpb24gPSBfdGhpcyRwcm9wczQubG9jYXRpb24sCiAgICAgICAgICB1cmxTdGF0ZSA9IF90aGlzJHByb3BzNC51cmxTdGF0ZTsKCiAgICAgIGlmICh1cmxTdGF0ZSAhPT0gcHJldlVybFN0YXRlKSB7CiAgICAgICAgdGhpcy5yZXBsYWNlU3RhdGVJbkxvY2F0aW9uKHVybFN0YXRlKTsKICAgICAgfQoKICAgICAgaWYgKGhpc3RvcnkuYWN0aW9uID09PSAnUE9QJyAmJiBsb2NhdGlvbiAhPT0gcHJldkxvY2F0aW9uKSB7CiAgICAgICAgdGhpcy5oYW5kbGVMb2NhdGlvbkNoYW5nZShwcmV2TG9jYXRpb24sIGxvY2F0aW9uKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgdmFyIGxvY2F0aW9uID0gdGhpcy5wcm9wcy5sb2NhdGlvbjsKICAgICAgdGhpcy5oYW5kbGVJbml0aWFsaXplKGxvY2F0aW9uKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBVcmxTdGF0ZUNvbnRhaW5lckxpZmVjeWNsZTsKfShfcmVhY3QuZGVmYXVsdC5Db21wb25lbnQpOwoKdmFyIFVybFN0YXRlQ29udGFpbmVyID0gZnVuY3Rpb24gVXJsU3RhdGVDb250YWluZXIocHJvcHMpIHsKICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RSb3V0ZXJEb20uUm91dGUsIG51bGwsIGZ1bmN0aW9uIChfcmVmMikgewogICAgdmFyIGhpc3RvcnkgPSBfcmVmMi5oaXN0b3J5LAogICAgICAgIGxvY2F0aW9uID0gX3JlZjIubG9jYXRpb247CiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChVcmxTdGF0ZUNvbnRhaW5lckxpZmVjeWNsZSwgX2V4dGVuZHMoewogICAgICBoaXN0b3J5OiBoaXN0b3J5LAogICAgICBsb2NhdGlvbjogbG9jYXRpb24KICAgIH0sIHByb3BzKSk7CiAgfSk7Cn07CgpleHBvcnRzLlVybFN0YXRlQ29udGFpbmVyID0gVXJsU3RhdGVDb250YWluZXI7Cgp2YXIgZGVjb2RlUmlzb25VcmxTdGF0ZSA9IGZ1bmN0aW9uIGRlY29kZVJpc29uVXJsU3RhdGUodmFsdWUpIHsKICB0cnkgewogICAgcmV0dXJuIHZhbHVlID8gKDAsIF9yaXNvbk5vZGUuZGVjb2RlKSh2YWx1ZSkgOiB1bmRlZmluZWQ7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm1lc3NhZ2Uuc3RhcnRzV2l0aCgncmlzb24gZGVjb2RlciBlcnJvcicpKSB7CiAgICAgIHJldHVybiB7fTsKICAgIH0KCiAgICB0aHJvdyBlcnJvcjsKICB9Cn07CgpleHBvcnRzLmRlY29kZVJpc29uVXJsU3RhdGUgPSBkZWNvZGVSaXNvblVybFN0YXRlOwoKdmFyIGVuY29kZVJpc29uVXJsU3RhdGUgPSBmdW5jdGlvbiBlbmNvZGVSaXNvblVybFN0YXRlKHN0YXRlKSB7CiAgcmV0dXJuICgwLCBfcmlzb25Ob2RlLmVuY29kZSkoc3RhdGUpOwp9OwoKdmFyIGdldFF1ZXJ5U3RyaW5nRnJvbUxvY2F0aW9uID0gZnVuY3Rpb24gZ2V0UXVlcnlTdHJpbmdGcm9tTG9jYXRpb24obG9jYXRpb24pIHsKICByZXR1cm4gbG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKTsKfTsKCmV4cG9ydHMuZ2V0UXVlcnlTdHJpbmdGcm9tTG9jYXRpb24gPSBnZXRRdWVyeVN0cmluZ0Zyb21Mb2NhdGlvbjsKCnZhciBnZXRQYXJhbUZyb21RdWVyeVN0cmluZyA9IGZ1bmN0aW9uIGdldFBhcmFtRnJvbVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nLCBrZXkpIHsKICB2YXIgcGFyc2VkUXVlcnlTdHJpbmcgPSAoMCwgX3F1ZXJ5U3RyaW5nLnBhcnNlKShxdWVyeVN0cmluZywgewogICAgc29ydDogZmFsc2UKICB9KTsKICB2YXIgcXVlcnlQYXJhbSA9IHBhcnNlZFF1ZXJ5U3RyaW5nW2tleV07CiAgcmV0dXJuIEFycmF5LmlzQXJyYXkocXVlcnlQYXJhbSkgPyBxdWVyeVBhcmFtWzBdIDogcXVlcnlQYXJhbTsKfTsKCmV4cG9ydHMuZ2V0UGFyYW1Gcm9tUXVlcnlTdHJpbmcgPSBnZXRQYXJhbUZyb21RdWVyeVN0cmluZzsKCnZhciByZXBsYWNlU3RhdGVLZXlJblF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24gcmVwbGFjZVN0YXRlS2V5SW5RdWVyeVN0cmluZyhzdGF0ZUtleSwgdXJsU3RhdGUpIHsKICByZXR1cm4gZnVuY3Rpb24gKHF1ZXJ5U3RyaW5nKSB7CiAgICB2YXIgcHJldmlvdXNRdWVyeVZhbHVlcyA9ICgwLCBfcXVlcnlTdHJpbmcucGFyc2UpKHF1ZXJ5U3RyaW5nLCB7CiAgICAgIHNvcnQ6IGZhbHNlCiAgICB9KTsKICAgIHZhciBlbmNvZGVkVXJsU3RhdGUgPSB0eXBlb2YgdXJsU3RhdGUgIT09ICd1bmRlZmluZWQnID8gZW5jb2RlUmlzb25VcmxTdGF0ZSh1cmxTdGF0ZSkgOiB1bmRlZmluZWQ7CiAgICByZXR1cm4gKDAsIF9xdWVyeVN0cmluZy5zdHJpbmdpZnkpKF9wdWJsaWMudXJsLmVuY29kZVF1ZXJ5KF9vYmplY3RTcHJlYWQoe30sIHByZXZpb3VzUXVlcnlWYWx1ZXMsIF9kZWZpbmVQcm9wZXJ0eSh7fSwgc3RhdGVLZXksIGVuY29kZWRVcmxTdGF0ZSkpKSwgewogICAgICBzb3J0OiBmYWxzZSwKICAgICAgZW5jb2RlOiBmYWxzZQogICAgfSk7CiAgfTsKfTsKCmV4cG9ydHMucmVwbGFjZVN0YXRlS2V5SW5RdWVyeVN0cmluZyA9IHJlcGxhY2VTdGF0ZUtleUluUXVlcnlTdHJpbmc7Cgp2YXIgcmVwbGFjZVF1ZXJ5U3RyaW5nSW5Mb2NhdGlvbiA9IGZ1bmN0aW9uIHJlcGxhY2VRdWVyeVN0cmluZ0luTG9jYXRpb24obG9jYXRpb24sIHF1ZXJ5U3RyaW5nKSB7CiAgaWYgKHF1ZXJ5U3RyaW5nID09PSBnZXRRdWVyeVN0cmluZ0Zyb21Mb2NhdGlvbihsb2NhdGlvbikpIHsKICAgIHJldHVybiBsb2NhdGlvbjsKICB9IGVsc2UgewogICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIGxvY2F0aW9uLCB7CiAgICAgIHNlYXJjaDogIj8iLmNvbmNhdChxdWVyeVN0cmluZykKICAgIH0pOwogIH0KfTs="},null]}