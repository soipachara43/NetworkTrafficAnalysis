{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/containers/network_http/index.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/containers/network_http/index.js","mtime":1589249553240},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuTmV0d29ya0h0dHBRdWVyeSA9IHZvaWQgMDsKCnZhciBfZnAgPSByZXF1aXJlKCJsb2Rhc2gvZnAiKTsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9yZWFjdEFwb2xsbyA9IHJlcXVpcmUoInJlYWN0LWFwb2xsbyIpOwoKdmFyIF9yZWFjdFJlZHV4ID0gcmVxdWlyZSgicmVhY3QtcmVkdXgiKTsKCnZhciBfcmVkdXggPSByZXF1aXJlKCJyZWR1eCIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuLi8uLi8uLi9jb21tb24vY29uc3RhbnRzIik7Cgp2YXIgX3N0b3JlID0gcmVxdWlyZSgiLi4vLi4vc3RvcmUiKTsKCnZhciBfa2liYW5hID0gcmVxdWlyZSgiLi4vLi4vbGliL2tpYmFuYSIpOwoKdmFyIF9oZWxwZXJzID0gcmVxdWlyZSgiLi4vLi4vY29tcG9uZW50cy9wYWdpbmF0ZWRfdGFibGUvaGVscGVycyIpOwoKdmFyIF9oZWxwZXJzMiA9IHJlcXVpcmUoIi4uL2hlbHBlcnMiKTsKCnZhciBfcXVlcnlfdGVtcGxhdGVfcGFnaW5hdGVkID0gcmVxdWlyZSgiLi4vcXVlcnlfdGVtcGxhdGVfcGFnaW5hdGVkIik7Cgp2YXIgX2luZGV4ID0gcmVxdWlyZSgiLi9pbmRleC5ncWxfcXVlcnkiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgIGRlZmF1bHQ6IG9iagogIH07Cn0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgX3R5cGVvZjIoU3ltYm9sLml0ZXJhdG9yKSA9PT0gInN5bWJvbCIpIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gX3R5cGVvZjIob2JqKTsKICAgIH07CiAgfSBlbHNlIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9CgogIHJldHVybiBfdHlwZW9mKG9iaik7Cn0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsKICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7CiAgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7CiAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICBhcnIyW2ldID0gYXJyW2ldOwogICAgfQoKICAgIHJldHVybiBhcnIyOwogIH0KfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgfQp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogIH0KfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICByZXR1cm4gQ29uc3RydWN0b3I7Cn0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsKICBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7CiAgICByZXR1cm4gY2FsbDsKICB9CgogIHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOwp9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsKICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIHNlbGY7Cn0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7CiAgfTsKICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOwp9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsKICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsKICB9CgogIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgewogICAgY29uc3RydWN0b3I6IHsKICAgICAgdmFsdWU6IHN1YkNsYXNzLAogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICB9CiAgfSk7CiAgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7Cn0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgICBvLl9fcHJvdG9fXyA9IHA7CiAgICByZXR1cm4gbzsKICB9OwoKICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOwp9Cgp2YXIgSUQgPSAnbmV0d29ya0h0dHBRdWVyeSc7Cgp2YXIgTmV0d29ya0h0dHBDb21wb25lbnRRdWVyeSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9RdWVyeVRlbXBsYXRlUGFnaW5hdCkgewogIF9pbmhlcml0cyhOZXR3b3JrSHR0cENvbXBvbmVudFF1ZXJ5LCBfUXVlcnlUZW1wbGF0ZVBhZ2luYXQpOwoKICBmdW5jdGlvbiBOZXR3b3JrSHR0cENvbXBvbmVudFF1ZXJ5KCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE5ldHdvcmtIdHRwQ29tcG9uZW50UXVlcnkpOwoKICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoTmV0d29ya0h0dHBDb21wb25lbnRRdWVyeSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoTmV0d29ya0h0dHBDb21wb25lbnRRdWVyeSwgW3sKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzJHByb3BzID0gdGhpcy5wcm9wcywKICAgICAgICAgIGFjdGl2ZVBhZ2UgPSBfdGhpcyRwcm9wcy5hY3RpdmVQYWdlLAogICAgICAgICAgY2hpbGRyZW4gPSBfdGhpcyRwcm9wcy5jaGlsZHJlbiwKICAgICAgICAgIGVuZERhdGUgPSBfdGhpcyRwcm9wcy5lbmREYXRlLAogICAgICAgICAgZmlsdGVyUXVlcnkgPSBfdGhpcyRwcm9wcy5maWx0ZXJRdWVyeSwKICAgICAgICAgIF90aGlzJHByb3BzJGlkID0gX3RoaXMkcHJvcHMuaWQsCiAgICAgICAgICBpZCA9IF90aGlzJHByb3BzJGlkID09PSB2b2lkIDAgPyBJRCA6IF90aGlzJHByb3BzJGlkLAogICAgICAgICAgaXAgPSBfdGhpcyRwcm9wcy5pcCwKICAgICAgICAgIGlzSW5zcGVjdGVkID0gX3RoaXMkcHJvcHMuaXNJbnNwZWN0ZWQsCiAgICAgICAgICBraWJhbmEgPSBfdGhpcyRwcm9wcy5raWJhbmEsCiAgICAgICAgICBsaW1pdCA9IF90aGlzJHByb3BzLmxpbWl0LAogICAgICAgICAgc2tpcCA9IF90aGlzJHByb3BzLnNraXAsCiAgICAgICAgICBzb3VyY2VJZCA9IF90aGlzJHByb3BzLnNvdXJjZUlkLAogICAgICAgICAgc29ydCA9IF90aGlzJHByb3BzLnNvcnQsCiAgICAgICAgICBzdGFydERhdGUgPSBfdGhpcyRwcm9wcy5zdGFydERhdGU7CiAgICAgIHZhciB2YXJpYWJsZXMgPSB7CiAgICAgICAgZGVmYXVsdEluZGV4OiBraWJhbmEuc2VydmljZXMudWlTZXR0aW5ncy5nZXQoX2NvbnN0YW50cy5ERUZBVUxUX0lOREVYX0tFWSksCiAgICAgICAgZmlsdGVyUXVlcnk6ICgwLCBfaGVscGVyczIuY3JlYXRlRmlsdGVyKShmaWx0ZXJRdWVyeSksCiAgICAgICAgaW5zcGVjdDogaXNJbnNwZWN0ZWQsCiAgICAgICAgaXA6IGlwLAogICAgICAgIHBhZ2luYXRpb246ICgwLCBfaGVscGVycy5nZW5lcmF0ZVRhYmxlUGFnaW5hdGlvbk9wdGlvbnMpKGFjdGl2ZVBhZ2UsIGxpbWl0KSwKICAgICAgICBzb3J0OiBzb3J0LAogICAgICAgIHNvdXJjZUlkOiBzb3VyY2VJZCwKICAgICAgICB0aW1lcmFuZ2U6IHsKICAgICAgICAgIGludGVydmFsOiAnMTJoJywKICAgICAgICAgIGZyb206IHN0YXJ0RGF0ZSwKICAgICAgICAgIHRvOiBlbmREYXRlCiAgICAgICAgfQogICAgICB9OwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RBcG9sbG8uUXVlcnksIHsKICAgICAgICBmZXRjaFBvbGljeTogKDAsIF9oZWxwZXJzMi5nZXREZWZhdWx0RmV0Y2hQb2xpY3kpKCksCiAgICAgICAgbm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlOiB0cnVlLAogICAgICAgIHF1ZXJ5OiBfaW5kZXgubmV0d29ya0h0dHBRdWVyeSwKICAgICAgICBza2lwOiBza2lwLAogICAgICAgIHZhcmlhYmxlczogdmFyaWFibGVzCiAgICAgIH0sIGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIGRhdGEgPSBfcmVmLmRhdGEsCiAgICAgICAgICAgIGxvYWRpbmcgPSBfcmVmLmxvYWRpbmcsCiAgICAgICAgICAgIGZldGNoTW9yZSA9IF9yZWYuZmV0Y2hNb3JlLAogICAgICAgICAgICBuZXR3b3JrU3RhdHVzID0gX3JlZi5uZXR3b3JrU3RhdHVzLAogICAgICAgICAgICByZWZldGNoID0gX3JlZi5yZWZldGNoOwogICAgICAgIHZhciBuZXR3b3JrSHR0cCA9ICgwLCBfZnAuZ2V0T3IpKFtdLCAic291cmNlLk5ldHdvcmtIdHRwLmVkZ2VzIiwgZGF0YSk7CgogICAgICAgIF90aGlzLnNldEZldGNoTW9yZShmZXRjaE1vcmUpOwoKICAgICAgICBfdGhpcy5zZXRGZXRjaE1vcmVPcHRpb25zKGZ1bmN0aW9uIChuZXdBY3RpdmVQYWdlKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgICBwYWdpbmF0aW9uOiAoMCwgX2hlbHBlcnMuZ2VuZXJhdGVUYWJsZVBhZ2luYXRpb25PcHRpb25zKShuZXdBY3RpdmVQYWdlLCBsaW1pdCkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdXBkYXRlUXVlcnk6IGZ1bmN0aW9uIHVwZGF0ZVF1ZXJ5KHByZXYsIF9yZWYyKSB7CiAgICAgICAgICAgICAgdmFyIGZldGNoTW9yZVJlc3VsdCA9IF9yZWYyLmZldGNoTW9yZVJlc3VsdDsKCiAgICAgICAgICAgICAgaWYgKCFmZXRjaE1vcmVSZXN1bHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBwcmV2OwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIGZldGNoTW9yZVJlc3VsdCwgewogICAgICAgICAgICAgICAgc291cmNlOiBfb2JqZWN0U3ByZWFkKHt9LCBmZXRjaE1vcmVSZXN1bHQuc291cmNlLCB7CiAgICAgICAgICAgICAgICAgIE5ldHdvcmtIdHRwOiBfb2JqZWN0U3ByZWFkKHt9LCBmZXRjaE1vcmVSZXN1bHQuc291cmNlLk5ldHdvcmtIdHRwLCB7CiAgICAgICAgICAgICAgICAgICAgZWRnZXM6IF90b0NvbnN1bWFibGVBcnJheShmZXRjaE1vcmVSZXN1bHQuc291cmNlLk5ldHdvcmtIdHRwLmVkZ2VzKQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICB9KTsKCiAgICAgICAgdmFyIGlzTG9hZGluZyA9IF90aGlzLmlzSXRBVmFsaWRMb2FkaW5nKGxvYWRpbmcsIHZhcmlhYmxlcywgbmV0d29ya1N0YXR1cyk7CgogICAgICAgIHJldHVybiBjaGlsZHJlbih7CiAgICAgICAgICBpZDogaWQsCiAgICAgICAgICBpbnNwZWN0OiAoMCwgX2ZwLmdldE9yKShudWxsLCAnc291cmNlLk5ldHdvcmtIdHRwLmluc3BlY3QnLCBkYXRhKSwKICAgICAgICAgIGlzSW5zcGVjdGVkOiBpc0luc3BlY3RlZCwKICAgICAgICAgIGxvYWRpbmc6IGlzTG9hZGluZywKICAgICAgICAgIGxvYWRQYWdlOiBfdGhpcy53cmFwcGVkTG9hZE1vcmUsCiAgICAgICAgICBuZXR3b3JrSHR0cDogbmV0d29ya0h0dHAsCiAgICAgICAgICBwYWdlSW5mbzogKDAsIF9mcC5nZXRPcikoe30sICdzb3VyY2UuTmV0d29ya0h0dHAucGFnZUluZm8nLCBkYXRhKSwKICAgICAgICAgIHJlZmV0Y2g6IF90aGlzLm1lbW9pemVkUmVmZXRjaFF1ZXJ5KHZhcmlhYmxlcywgbGltaXQsIHJlZmV0Y2gpLAogICAgICAgICAgdG90YWxDb3VudDogKDAsIF9mcC5nZXRPcikoLTEsICdzb3VyY2UuTmV0d29ya0h0dHAudG90YWxDb3VudCcsIGRhdGEpCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIE5ldHdvcmtIdHRwQ29tcG9uZW50UXVlcnk7Cn0oX3F1ZXJ5X3RlbXBsYXRlX3BhZ2luYXRlZC5RdWVyeVRlbXBsYXRlUGFnaW5hdGVkKTsKCnZhciBtYWtlTWFwU3RhdGVUb1Byb3BzID0gZnVuY3Rpb24gbWFrZU1hcFN0YXRlVG9Qcm9wcygpIHsKICB2YXIgZ2V0SHR0cFNlbGVjdG9yID0gX3N0b3JlLm5ldHdvcmtTZWxlY3RvcnMuaHR0cFNlbGVjdG9yKCk7CgogIHZhciBnZXRRdWVyeSA9IF9zdG9yZS5pbnB1dHNTZWxlY3RvcnMuZ2xvYmFsUXVlcnlCeUlkU2VsZWN0b3IoKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZjMpIHsKICAgIHZhciBfcmVmMyRpZCA9IF9yZWYzLmlkLAogICAgICAgIGlkID0gX3JlZjMkaWQgPT09IHZvaWQgMCA/IElEIDogX3JlZjMkaWQsCiAgICAgICAgdHlwZSA9IF9yZWYzLnR5cGU7CgogICAgdmFyIF9nZXRRdWVyeSA9IGdldFF1ZXJ5KHN0YXRlLCBpZCksCiAgICAgICAgaXNJbnNwZWN0ZWQgPSBfZ2V0UXVlcnkuaXNJbnNwZWN0ZWQ7CgogICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIGdldEh0dHBTZWxlY3RvcihzdGF0ZSwgdHlwZSksIHsKICAgICAgaXNJbnNwZWN0ZWQ6IGlzSW5zcGVjdGVkCiAgICB9KTsKICB9Owp9OwoKdmFyIE5ldHdvcmtIdHRwUXVlcnkgPSAoMCwgX3JlZHV4LmNvbXBvc2UpKCgwLCBfcmVhY3RSZWR1eC5jb25uZWN0KShtYWtlTWFwU3RhdGVUb1Byb3BzKSwgX2tpYmFuYS53aXRoS2liYW5hKShOZXR3b3JrSHR0cENvbXBvbmVudFF1ZXJ5KTsKZXhwb3J0cy5OZXR3b3JrSHR0cFF1ZXJ5ID0gTmV0d29ya0h0dHBRdWVyeTs="},null]}