{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/maps/public/connected_components/layer_panel/join_editor/resources/join.js","dependencies":[{"path":"x-pack/legacy/plugins/maps/public/connected_components/layer_panel/join_editor/resources/join.js","mtime":1589249552408},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkpvaW4gPSB2b2lkIDA7Cgp2YXIgX2xvZGFzaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibG9kYXNoIikpOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9qb2luX2V4cHJlc3Npb24gPSByZXF1aXJlKCIuL2pvaW5fZXhwcmVzc2lvbiIpOwoKdmFyIF9tZXRyaWNzX2V4cHJlc3Npb24gPSByZXF1aXJlKCIuL21ldHJpY3NfZXhwcmVzc2lvbiIpOwoKdmFyIF93aGVyZV9leHByZXNzaW9uID0gcmVxdWlyZSgiLi93aGVyZV9leHByZXNzaW9uIik7Cgp2YXIgX2dsb2JhbF9maWx0ZXJfY2hlY2tib3ggPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2dsb2JhbF9maWx0ZXJfY2hlY2tib3giKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjL3BsdWdpbnMvZGF0YS9wdWJsaWMiKTsKCnZhciBfa2liYW5hX3NlcnZpY2VzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4va2liYW5hX3NlcnZpY2VzIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7IHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OyBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsgfSBlbHNlIHsgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7IHRyeSB7IHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsgfSBjYXRjaCAoZXJyb3IpIHsgcmVqZWN0KGVycm9yKTsgcmV0dXJuOyB9IGlmIChpbmZvLmRvbmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0gZWxzZSB7IFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsgfSB9CgpmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgc2VsZiA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTsgZnVuY3Rpb24gX25leHQodmFsdWUpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAibmV4dCIsIHZhbHVlKTsgfSBmdW5jdGlvbiBfdGhyb3coZXJyKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgInRocm93IiwgZXJyKTsgfSBfbmV4dCh1bmRlZmluZWQpOyB9KTsgfTsgfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCnZhciBKb2luID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhKb2luLCBfQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gSm9pbigpIHsKICAgIHZhciBfZ2V0UHJvdG90eXBlT2YyOwoKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSm9pbik7CgogICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICB9CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoX2dldFByb3RvdHlwZU9mMiA9IF9nZXRQcm90b3R5cGVPZihKb2luKSkuY2FsbC5hcHBseShfZ2V0UHJvdG90eXBlT2YyLCBbdGhpc10uY29uY2F0KGFyZ3MpKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic3RhdGUiLCB7CiAgICAgIHJpZ2h0RmllbGRzOiB1bmRlZmluZWQsCiAgICAgIGluZGV4UGF0dGVybjogdW5kZWZpbmVkLAogICAgICBsb2FkRXJyb3I6IHVuZGVmaW5lZAogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX29uTGVmdEZpZWxkQ2hhbmdlIiwgZnVuY3Rpb24gKGxlZnRGaWVsZCkgewogICAgICBfdGhpcy5wcm9wcy5vbkNoYW5nZSh7CiAgICAgICAgbGVmdEZpZWxkOiBsZWZ0RmllbGQsCiAgICAgICAgcmlnaHQ6IF90aGlzLnByb3BzLmpvaW4ucmlnaHQKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfb25SaWdodFNvdXJjZUNoYW5nZSIsIGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgIHZhciBpbmRleFBhdHRlcm5JZCA9IF9yZWYuaW5kZXhQYXR0ZXJuSWQsCiAgICAgICAgICBpbmRleFBhdHRlcm5UaXRsZSA9IF9yZWYuaW5kZXhQYXR0ZXJuVGl0bGU7CgogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgcmlnaHRGaWVsZHM6IHVuZGVmaW5lZCwKICAgICAgICBsb2FkRXJyb3I6IHVuZGVmaW5lZAogICAgICB9KTsKCiAgICAgIF90aGlzLl9sb2FkUmlnaHRGaWVsZHMoaW5kZXhQYXR0ZXJuSWQpOwoKICAgICAgX3RoaXMucHJvcHMub25DaGFuZ2UoewogICAgICAgIGxlZnRGaWVsZDogX3RoaXMucHJvcHMuam9pbi5sZWZ0RmllbGQsCiAgICAgICAgcmlnaHQ6IHsKICAgICAgICAgIGlkOiBfdGhpcy5wcm9wcy5qb2luLnJpZ2h0LmlkLAogICAgICAgICAgaW5kZXhQYXR0ZXJuSWQ6IGluZGV4UGF0dGVybklkLAogICAgICAgICAgaW5kZXhQYXR0ZXJuVGl0bGU6IGluZGV4UGF0dGVyblRpdGxlCiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9vblJpZ2h0RmllbGRDaGFuZ2UiLCBmdW5jdGlvbiAodGVybSkgewogICAgICBfdGhpcy5wcm9wcy5vbkNoYW5nZSh7CiAgICAgICAgbGVmdEZpZWxkOiBfdGhpcy5wcm9wcy5qb2luLmxlZnRGaWVsZCwKICAgICAgICByaWdodDogX29iamVjdFNwcmVhZCh7fSwgX3RoaXMucHJvcHMuam9pbi5yaWdodCwgewogICAgICAgICAgdGVybTogdGVybQogICAgICAgIH0pCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX29uTWV0cmljc0NoYW5nZSIsIGZ1bmN0aW9uIChtZXRyaWNzKSB7CiAgICAgIF90aGlzLnByb3BzLm9uQ2hhbmdlKHsKICAgICAgICBsZWZ0RmllbGQ6IF90aGlzLnByb3BzLmpvaW4ubGVmdEZpZWxkLAogICAgICAgIHJpZ2h0OiBfb2JqZWN0U3ByZWFkKHt9LCBfdGhpcy5wcm9wcy5qb2luLnJpZ2h0LCB7CiAgICAgICAgICBtZXRyaWNzOiBtZXRyaWNzCiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfb25XaGVyZVF1ZXJ5Q2hhbmdlIiwgZnVuY3Rpb24gKHdoZXJlUXVlcnkpIHsKICAgICAgX3RoaXMucHJvcHMub25DaGFuZ2UoewogICAgICAgIGxlZnRGaWVsZDogX3RoaXMucHJvcHMuam9pbi5sZWZ0RmllbGQsCiAgICAgICAgcmlnaHQ6IF9vYmplY3RTcHJlYWQoe30sIF90aGlzLnByb3BzLmpvaW4ucmlnaHQsIHsKICAgICAgICAgIHdoZXJlUXVlcnk6IHdoZXJlUXVlcnkKICAgICAgICB9KQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9vbkFwcGx5R2xvYmFsUXVlcnlDaGFuZ2UiLCBmdW5jdGlvbiAoYXBwbHlHbG9iYWxRdWVyeSkgewogICAgICBfdGhpcy5wcm9wcy5vbkNoYW5nZSh7CiAgICAgICAgbGVmdEZpZWxkOiBfdGhpcy5wcm9wcy5qb2luLmxlZnRGaWVsZCwKICAgICAgICByaWdodDogX29iamVjdFNwcmVhZCh7fSwgX3RoaXMucHJvcHMuam9pbi5yaWdodCwgewogICAgICAgICAgYXBwbHlHbG9iYWxRdWVyeTogYXBwbHlHbG9iYWxRdWVyeQogICAgICAgIH0pCiAgICAgIH0pOwogICAgfSk7CgogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEpvaW4sIFt7CiAgICBrZXk6ICJjb21wb25lbnREaWRNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgIHRoaXMuX2lzTW91bnRlZCA9IHRydWU7CgogICAgICB0aGlzLl9sb2FkUmlnaHRGaWVsZHMoX2xvZGFzaC5kZWZhdWx0LmdldCh0aGlzLnByb3BzLmpvaW4sICdyaWdodC5pbmRleFBhdHRlcm5JZCcpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnRXaWxsVW5tb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7CiAgICAgIHRoaXMuX2lzTW91bnRlZCA9IGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogIl9sb2FkUmlnaHRGaWVsZHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9sb2FkUmlnaHRGaWVsZHMyID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShpbmRleFBhdHRlcm5JZCkgewogICAgICAgIHZhciBpbmRleFBhdHRlcm47CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKGluZGV4UGF0dGVybklkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiAoMCwgX2tpYmFuYV9zZXJ2aWNlcy5nZXRJbmRleFBhdHRlcm5TZXJ2aWNlKSgpLmdldChpbmRleFBhdHRlcm5JZCk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGluZGV4UGF0dGVybiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDg7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDIpOwoKICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc01vdW50ZWQpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgbG9hZEVycm9yOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWFwcy5sYXllclBhbmVsLmpvaW4ubm9JbmRleFBhdHRlcm5FcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlVuYWJsZSB0byBmaW5kIEluZGV4IHBhdHRlcm4ge2luZGV4UGF0dGVybklkfSIsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhQYXR0ZXJuSWQ6IGluZGV4UGF0dGVybklkCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNNb3VudGVkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgcmlnaHRGaWVsZHM6IGluZGV4UGF0dGVybi5maWVsZHMuZmlsdGVyKGZ1bmN0aW9uIChmaWVsZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAhX3B1YmxpYy5pbmRleFBhdHRlcm5zLmlzTmVzdGVkRmllbGQoZmllbGQpOwogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgaW5kZXhQYXR0ZXJuOiBpbmRleFBhdHRlcm4KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcywgW1syLCA4XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBfbG9hZFJpZ2h0RmllbGRzKF94KSB7CiAgICAgICAgcmV0dXJuIF9sb2FkUmlnaHRGaWVsZHMyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBfbG9hZFJpZ2h0RmllbGRzOwogICAgfSgpCiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IHRoaXMucHJvcHMsCiAgICAgICAgICBqb2luID0gX3RoaXMkcHJvcHMuam9pbiwKICAgICAgICAgIG9uUmVtb3ZlID0gX3RoaXMkcHJvcHMub25SZW1vdmUsCiAgICAgICAgICBsZWZ0RmllbGRzID0gX3RoaXMkcHJvcHMubGVmdEZpZWxkcywKICAgICAgICAgIGxlZnRTb3VyY2VOYW1lID0gX3RoaXMkcHJvcHMubGVmdFNvdXJjZU5hbWU7CiAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IHRoaXMuc3RhdGUsCiAgICAgICAgICByaWdodEZpZWxkcyA9IF90aGlzJHN0YXRlLnJpZ2h0RmllbGRzLAogICAgICAgICAgaW5kZXhQYXR0ZXJuID0gX3RoaXMkc3RhdGUuaW5kZXhQYXR0ZXJuOwoKICAgICAgdmFyIHJpZ2h0ID0gX2xvZGFzaC5kZWZhdWx0LmdldChqb2luLCAncmlnaHQnLCB7fSk7CgogICAgICB2YXIgcmlnaHRTb3VyY2VOYW1lID0gcmlnaHQuaW5kZXhQYXR0ZXJuVGl0bGUgPyByaWdodC5pbmRleFBhdHRlcm5UaXRsZSA6IHJpZ2h0LmluZGV4UGF0dGVybklkOwogICAgICB2YXIgaXNKb2luQ29uZmlnQ29tcGxldGUgPSBqb2luLmxlZnRGaWVsZCAmJiByaWdodC5pbmRleFBhdHRlcm5JZCAmJiByaWdodC50ZXJtOwogICAgICB2YXIgbWV0cmljc0V4cHJlc3Npb247CiAgICAgIHZhciBnbG9iYWxGaWx0ZXJDaGVja2JveDsKCiAgICAgIGlmIChpc0pvaW5Db25maWdDb21wbGV0ZSkgewogICAgICAgIG1ldHJpY3NFeHByZXNzaW9uID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgICAgICBncm93OiBmYWxzZQogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX21ldHJpY3NfZXhwcmVzc2lvbi5NZXRyaWNzRXhwcmVzc2lvbiwgewogICAgICAgICAgbWV0cmljczogcmlnaHQubWV0cmljcywKICAgICAgICAgIHJpZ2h0RmllbGRzOiByaWdodEZpZWxkcywKICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLl9vbk1ldHJpY3NDaGFuZ2UKICAgICAgICB9KSk7CiAgICAgICAgZ2xvYmFsRmlsdGVyQ2hlY2tib3ggPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9nbG9iYWxfZmlsdGVyX2NoZWNrYm94Lkdsb2JhbEZpbHRlckNoZWNrYm94LCB7CiAgICAgICAgICBhcHBseUdsb2JhbFF1ZXJ5OiByaWdodC5hcHBseUdsb2JhbFF1ZXJ5LAogICAgICAgICAgc2V0QXBwbHlHbG9iYWxRdWVyeTogdGhpcy5fb25BcHBseUdsb2JhbFF1ZXJ5Q2hhbmdlLAogICAgICAgICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tYXBzLmxheWVyUGFuZWwuam9pbi5hcHBseUdsb2JhbFF1ZXJ5Q2hlY2tib3hMYWJlbCcsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBcHBseSBnbG9iYWwgZmlsdGVyIHRvIGpvaW4iCiAgICAgICAgICB9KQogICAgICAgIH0pOwogICAgICB9CgogICAgICB2YXIgd2hlcmVFeHByZXNzaW9uOwoKICAgICAgaWYgKGluZGV4UGF0dGVybiAmJiBpc0pvaW5Db25maWdDb21wbGV0ZSkgewogICAgICAgIHdoZXJlRXhwcmVzc2lvbiA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgICAgZ3JvdzogZmFsc2UKICAgICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF93aGVyZV9leHByZXNzaW9uLldoZXJlRXhwcmVzc2lvbiwgewogICAgICAgICAgaW5kZXhQYXR0ZXJuOiBpbmRleFBhdHRlcm4sCiAgICAgICAgICB3aGVyZVF1ZXJ5OiBqb2luLnJpZ2h0LndoZXJlUXVlcnksCiAgICAgICAgICBvbkNoYW5nZTogdGhpcy5fb25XaGVyZVF1ZXJ5Q2hhbmdlCiAgICAgICAgfSkpOwogICAgICB9CgogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogIm1hcEpvaW5JdGVtIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCB7CiAgICAgICAgY2xhc3NOYW1lOiAibWFwSm9pbkl0ZW1fX2lubmVyIiwKICAgICAgICByZXNwb25zaXZlOiBmYWxzZSwKICAgICAgICB3cmFwOiB0cnVlLAogICAgICAgIGd1dHRlclNpemU6ICJzIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9qb2luX2V4cHJlc3Npb24uSm9pbkV4cHJlc3Npb24sIHsKICAgICAgICBsZWZ0U291cmNlTmFtZTogbGVmdFNvdXJjZU5hbWUsCiAgICAgICAgbGVmdFZhbHVlOiBqb2luLmxlZnRGaWVsZCwKICAgICAgICBsZWZ0RmllbGRzOiBsZWZ0RmllbGRzLAogICAgICAgIG9uTGVmdEZpZWxkQ2hhbmdlOiB0aGlzLl9vbkxlZnRGaWVsZENoYW5nZSwKICAgICAgICByaWdodFNvdXJjZUluZGV4UGF0dGVybklkOiByaWdodC5pbmRleFBhdHRlcm5JZCwKICAgICAgICByaWdodFNvdXJjZU5hbWU6IHJpZ2h0U291cmNlTmFtZSwKICAgICAgICBvblJpZ2h0U291cmNlQ2hhbmdlOiB0aGlzLl9vblJpZ2h0U291cmNlQ2hhbmdlLAogICAgICAgIHJpZ2h0VmFsdWU6IHJpZ2h0LnRlcm0sCiAgICAgICAgcmlnaHRGaWVsZHM6IHJpZ2h0RmllbGRzLAogICAgICAgIG9uUmlnaHRGaWVsZENoYW5nZTogdGhpcy5fb25SaWdodEZpZWxkQ2hhbmdlCiAgICAgIH0pKSwgbWV0cmljc0V4cHJlc3Npb24sIHdoZXJlRXhwcmVzc2lvbiwgZ2xvYmFsRmlsdGVyQ2hlY2tib3gsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b25JY29uLCB7CiAgICAgICAgY2xhc3NOYW1lOiAibWFwSm9pbkl0ZW1fX2RlbGV0ZSIsCiAgICAgICAgaWNvblR5cGU6ICJ0cmFzaCIsCiAgICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICAgICJhcmlhLWxhYmVsIjogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1hcHMubGF5ZXJQYW5lbC5qb2luLmRlbGV0ZUpvaW5BcmlhTGFiZWwnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0RlbGV0ZSBqb2luJwogICAgICAgIH0pLAogICAgICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWFwcy5sYXllclBhbmVsLmpvaW4uZGVsZXRlSm9pblRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdEZWxldGUgam9pbicKICAgICAgICB9KSwKICAgICAgICBvbkNsaWNrOiBvblJlbW92ZQogICAgICB9KSkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEpvaW47Cn0oX3JlYWN0LkNvbXBvbmVudCk7CgpleHBvcnRzLkpvaW4gPSBKb2luOw=="},null]}