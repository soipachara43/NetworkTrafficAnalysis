{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/kibana/public/discover/np_ready/components/field_chooser/discover_field_search.js","dependencies":[{"path":"src/legacy/core_plugins/kibana/public/discover/np_ready/components/field_chooser/discover_field_search.js","mtime":1589249549710},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkRpc2NvdmVyRmllbGRTZWFyY2ggPSBEaXNjb3ZlckZpZWxkU2VhcmNoOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9yZWFjdDIgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KLyoqCiAqIENvbXBvbmVudCBpcyBEaXNjb3ZlcidzIHNpZGUgYmFyIHRvICBzZWFyY2ggb2YgYXZhaWxhYmxlIGZpZWxkcwogKiBBZGRpdGlvbmFsbHkgdGhlcmUncyBhIGJ1dHRvbiBkaXNwbGF5ZWQgdGhhdCBhbGxvd3MgdGhlIHVzZXIgdG8gc2hvdy9oaWRlIG1vcmUgZmlsdGVyIGZpZWxkcwogKi8KCgpmdW5jdGlvbiBEaXNjb3ZlckZpZWxkU2VhcmNoKF9yZWYpIHsKICB2YXIgX29uQ2hhbmdlID0gX3JlZi5vbkNoYW5nZSwKICAgICAgdmFsdWUgPSBfcmVmLnZhbHVlLAogICAgICB0eXBlcyA9IF9yZWYudHlwZXM7CgogIHZhciBzZWFyY2hQbGFjZWhvbGRlciA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCdrYm4uZGlzY292ZXIuZmllbGRDaG9vc2VyLnNlYXJjaFBsYWNlSG9sZGVyJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdTZWFyY2ggZmllbGQgbmFtZXMnCiAgfSk7CgogIHZhciBhZ2dyZWdhdGFibGVMYWJlbCA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCdrYm4uZGlzY292ZXIuZmllbGRDaG9vc2VyLmZpbHRlci5hZ2dyZWdhdGFibGVMYWJlbCcsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnQWdncmVnYXRhYmxlJwogIH0pOwoKICB2YXIgc2VhcmNoYWJsZUxhYmVsID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5kaXNjb3Zlci5maWVsZENob29zZXIuZmlsdGVyLnNlYXJjaGFibGVMYWJlbCcsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnU2VhcmNoYWJsZScKICB9KTsKCiAgdmFyIHR5cGVMYWJlbCA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCdrYm4uZGlzY292ZXIuZmllbGRDaG9vc2VyLmZpbHRlci50eXBlTGFiZWwnLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogJ1R5cGUnCiAgfSk7CgogIHZhciB0eXBlT3B0aW9ucyA9IHR5cGVzID8gdHlwZXMubWFwKGZ1bmN0aW9uICh0eXBlKSB7CiAgICByZXR1cm4gewogICAgICB2YWx1ZTogdHlwZSwKICAgICAgdGV4dDogdHlwZQogICAgfTsKICB9KSA6IFt7CiAgICB2YWx1ZTogJ2FueScsCiAgICB0ZXh0OiAnYW55JwogIH1dOwoKICB2YXIgX3VzZVN0YXRlID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoMCksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBhY3RpdmVGaWx0ZXJzQ291bnQgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRBY3RpdmVGaWx0ZXJzQ291bnQgPSBfdXNlU3RhdGUyWzFdOwoKICB2YXIgX3VzZVN0YXRlMyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGZhbHNlKSwKICAgICAgX3VzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTMsIDIpLAogICAgICBpc1BvcG92ZXJPcGVuID0gX3VzZVN0YXRlNFswXSwKICAgICAgc2V0UG9wb3Zlck9wZW4gPSBfdXNlU3RhdGU0WzFdOwoKICB2YXIgX3VzZVN0YXRlNSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKHsKICAgIHNlYXJjaGFibGU6ICdhbnknLAogICAgYWdncmVnYXRhYmxlOiAnYW55JywKICAgIHR5cGU6ICdhbnknLAogICAgbWlzc2luZzogdHJ1ZQogIH0pLAogICAgICBfdXNlU3RhdGU2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNSwgMiksCiAgICAgIHZhbHVlcyA9IF91c2VTdGF0ZTZbMF0sCiAgICAgIHNldFZhbHVlcyA9IF91c2VTdGF0ZTZbMV07CgogIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7CiAgICAvLyBhdCBpbml0aWFsIHJlbmRlcmluZyB2YWx1ZSBpcyB1bmRlZmluZWQgKGFuZ3VsYXIgcmVsYXRlZCksIHRoaXMgY2F0Y2hlcyB0aGUgd2FybmluZwogICAgLy8gc2hvdWxkIGJlIHJlbW92ZWQgb25jZSBhbGwgaXMgcmVhY3QKICAgIHJldHVybiBudWxsOwogIH0KCiAgdmFyIGZpbHRlckJ0bkFyaWFMYWJlbCA9IGlzUG9wb3Zlck9wZW4gPyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgna2JuLmRpc2NvdmVyLmZpZWxkQ2hvb3Nlci50b2dnbGVGaWVsZEZpbHRlckJ1dHRvbkhpZGVBcmlhTGFiZWwnLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogJ0hpZGUgZmllbGQgZmlsdGVyIHNldHRpbmdzJwogIH0pIDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5kaXNjb3Zlci5maWVsZENob29zZXIudG9nZ2xlRmllbGRGaWx0ZXJCdXR0b25TaG93QXJpYUxhYmVsJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICdTaG93IGZpZWxkIGZpbHRlciBzZXR0aW5ncycKICB9KTsKCiAgdmFyIGhhbmRsZUZhY2V0QnV0dG9uQ2xpY2tlZCA9IGZ1bmN0aW9uIGhhbmRsZUZhY2V0QnV0dG9uQ2xpY2tlZCgpIHsKICAgIHNldFBvcG92ZXJPcGVuKCFpc1BvcG92ZXJPcGVuKTsKICB9OwoKICB2YXIgYXBwbHlGaWx0ZXJWYWx1ZSA9IGZ1bmN0aW9uIGFwcGx5RmlsdGVyVmFsdWUoaWQsIGZpbHRlclZhbHVlKSB7CiAgICBzd2l0Y2ggKGZpbHRlclZhbHVlKSB7CiAgICAgIGNhc2UgJ2FueSc6CiAgICAgICAgaWYgKGlkICE9PSAndHlwZScpIHsKICAgICAgICAgIF9vbkNoYW5nZShpZCwgdW5kZWZpbmVkKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX29uQ2hhbmdlKGlkLCBmaWx0ZXJWYWx1ZSk7CiAgICAgICAgfQoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3RydWUnOgogICAgICAgIF9vbkNoYW5nZShpZCwgdHJ1ZSk7CgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnZmFsc2UnOgogICAgICAgIF9vbkNoYW5nZShpZCwgZmFsc2UpOwoKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgX29uQ2hhbmdlKGlkLCBmaWx0ZXJWYWx1ZSk7CgogICAgfQogIH07CgogIHZhciBpc0ZpbHRlckFjdGl2ZSA9IGZ1bmN0aW9uIGlzRmlsdGVyQWN0aXZlKG5hbWUsIGZpbHRlclZhbHVlKSB7CiAgICByZXR1cm4gbmFtZSAhPT0gJ21pc3NpbmcnICYmIGZpbHRlclZhbHVlICE9PSAnYW55JzsKICB9OwoKICB2YXIgaGFuZGxlVmFsdWVDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVWYWx1ZUNoYW5nZShuYW1lLCBmaWx0ZXJWYWx1ZSkgewogICAgdmFyIHByZXZpb3VzVmFsdWUgPSB2YWx1ZXNbbmFtZV07CiAgICB1cGRhdGVGaWx0ZXJDb3VudChuYW1lLCBwcmV2aW91c1ZhbHVlLCBmaWx0ZXJWYWx1ZSk7CgogICAgdmFyIHVwZGF0ZWRWYWx1ZXMgPSBfb2JqZWN0U3ByZWFkKHt9LCB2YWx1ZXMpOwoKICAgIHVwZGF0ZWRWYWx1ZXNbbmFtZV0gPSBmaWx0ZXJWYWx1ZTsKICAgIHNldFZhbHVlcyh1cGRhdGVkVmFsdWVzKTsKICAgIGFwcGx5RmlsdGVyVmFsdWUobmFtZSwgZmlsdGVyVmFsdWUpOwogIH07CgogIHZhciB1cGRhdGVGaWx0ZXJDb3VudCA9IGZ1bmN0aW9uIHVwZGF0ZUZpbHRlckNvdW50KG5hbWUsIHByZXZpb3VzVmFsdWUsIGN1cnJlbnRWYWx1ZSkgewogICAgdmFyIHByZXZpb3VzbHlGaWx0ZXJBY3RpdmUgPSBpc0ZpbHRlckFjdGl2ZShuYW1lLCBwcmV2aW91c1ZhbHVlKTsKICAgIHZhciBmaWx0ZXJBY3RpdmUgPSBpc0ZpbHRlckFjdGl2ZShuYW1lLCBjdXJyZW50VmFsdWUpOwogICAgdmFyIGRpZmYgPSBOdW1iZXIoZmlsdGVyQWN0aXZlKSAtIE51bWJlcihwcmV2aW91c2x5RmlsdGVyQWN0aXZlKTsKICAgIHNldEFjdGl2ZUZpbHRlcnNDb3VudChhY3RpdmVGaWx0ZXJzQ291bnQgKyBkaWZmKTsKICB9OwoKICB2YXIgaGFuZGxlTWlzc2luZ0NoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZU1pc3NpbmdDaGFuZ2UoZSkgewogICAgdmFyIG1pc3NpbmdWYWx1ZSA9IGUudGFyZ2V0LmNoZWNrZWQ7CiAgICBoYW5kbGVWYWx1ZUNoYW5nZSgnbWlzc2luZycsIG1pc3NpbmdWYWx1ZSk7CiAgfTsKCiAgdmFyIGJ1dHRvbkNvbnRlbnQgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmFjZXRCdXR0b24sIHsKICAgICJhcmlhLWxhYmVsIjogZmlsdGVyQnRuQXJpYUxhYmVsLAogICAgImRhdGEtdGVzdC1zdWJqIjogInRvZ2dsZUZpZWxkRmlsdGVyQnV0dG9uIiwKICAgIGNsYXNzTmFtZTogImRzY1RvZ2dsZUZpZWxkRmlsdGVyQnV0dG9uIiwKICAgIGljb246IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlJY29uLCB7CiAgICAgIHR5cGU6ICJmaWx0ZXIiCiAgICB9KSwKICAgIGlzU2VsZWN0ZWQ6IGFjdGl2ZUZpbHRlcnNDb3VudCA+IDAsCiAgICBxdWFudGl0eTogYWN0aXZlRmlsdGVyc0NvdW50LAogICAgb25DbGljazogaGFuZGxlRmFjZXRCdXR0b25DbGlja2VkCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgIGlkOiAia2JuLmRpc2NvdmVyLmZpZWxkQ2hvb3Nlci5maWVsZEZpbHRlckZhY2V0QnV0dG9uTGFiZWwiLAogICAgZGVmYXVsdE1lc3NhZ2U6ICJGaWx0ZXIgYnkgdHlwZSIKICB9KSk7CgogIHZhciBzZWxlY3QgPSBmdW5jdGlvbiBzZWxlY3QoaWQsIHNlbGVjdE9wdGlvbnMsIHNlbGVjdFZhbHVlKSB7CiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNlbGVjdCwgewogICAgICBpZDogIiIuY29uY2F0KGlkLCAiLXNlbGVjdCIpLAogICAgICBvcHRpb25zOiBzZWxlY3RPcHRpb25zLAogICAgICB2YWx1ZTogc2VsZWN0VmFsdWUsCiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7CiAgICAgICAgcmV0dXJuIGhhbmRsZVZhbHVlQ2hhbmdlKGlkLCBlLnRhcmdldC52YWx1ZSk7CiAgICAgIH0sCiAgICAgICJhcmlhLWxhYmVsIjogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5kaXNjb3Zlci5maWVsZENob29zZXIuZmlsdGVyLmZpZWxkU2VsZWN0b3JMYWJlbCcsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1NlbGVjdGlvbiBvZiB7aWR9IGZpbHRlciBvcHRpb25zJywKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGlkOiBpZAogICAgICAgIH0KICAgICAgfSksCiAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICIiLmNvbmNhdChpZCwgIlNlbGVjdCIpLAogICAgICBjb21wcmVzc2VkOiB0cnVlCiAgICB9KTsKICB9OwoKICB2YXIgdG9nZ2xlQnV0dG9ucyA9IGZ1bmN0aW9uIHRvZ2dsZUJ1dHRvbnMoaWQpIHsKICAgIHJldHVybiBbewogICAgICBpZDogIiIuY29uY2F0KGlkLCAiLWFueSIpLAogICAgICBsYWJlbDogJ2FueScKICAgIH0sIHsKICAgICAgaWQ6ICIiLmNvbmNhdChpZCwgIi10cnVlIiksCiAgICAgIGxhYmVsOiAneWVzJwogICAgfSwgewogICAgICBpZDogIiIuY29uY2F0KGlkLCAiLWZhbHNlIiksCiAgICAgIGxhYmVsOiAnbm8nCiAgICB9XTsKICB9OwoKICB2YXIgYnV0dG9uR3JvdXAgPSBmdW5jdGlvbiBidXR0b25Hcm91cChpZCwgbGVnZW5kKSB7CiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbkdyb3VwLCB7CiAgICAgIGxlZ2VuZDogbGVnZW5kLAogICAgICBvcHRpb25zOiB0b2dnbGVCdXR0b25zKGlkKSwKICAgICAgaWRTZWxlY3RlZDogIiIuY29uY2F0KGlkLCAiLSIpLmNvbmNhdCh2YWx1ZXNbaWRdKSwKICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKG9wdGlvbklkKSB7CiAgICAgICAgcmV0dXJuIGhhbmRsZVZhbHVlQ2hhbmdlKGlkLCBvcHRpb25JZC5yZXBsYWNlKCIiLmNvbmNhdChpZCwgIi0iKSwgJycpKTsKICAgICAgfSwKICAgICAgYnV0dG9uU2l6ZTogImNvbXByZXNzZWQiLAogICAgICBpc0Z1bGxXaWR0aDogdHJ1ZSwKICAgICAgImRhdGEtdGVzdC1zdWJqIjogIiIuY29uY2F0KGlkLCAiQnV0dG9uR3JvdXAiKQogICAgfSk7CiAgfTsKCiAgdmFyIHNlbGVjdGlvblBhbmVsID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgY2xhc3NOYW1lOiAiZHNjRmllbGRTZWFyY2hfX2Zvcm1XcmFwcGVyIgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtLCB7CiAgICAiZGF0YS10ZXN0LXN1YmoiOiAiZmlsdGVyU2VsZWN0aW9uUGFuZWwiCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgIGxhYmVsOiBhZ2dyZWdhdGFibGVMYWJlbCwKICAgIGRpc3BsYXk6ICJjb2x1bW5Db21wcmVzc2VkIgogIH0sIGJ1dHRvbkdyb3VwKCdhZ2dyZWdhdGFibGUnLCBhZ2dyZWdhdGFibGVMYWJlbCkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgZnVsbFdpZHRoOiB0cnVlLAogICAgbGFiZWw6IHNlYXJjaGFibGVMYWJlbCwKICAgIGRpc3BsYXk6ICJjb2x1bW5Db21wcmVzc2VkIgogIH0sIGJ1dHRvbkdyb3VwKCdzZWFyY2hhYmxlJywgc2VhcmNoYWJsZUxhYmVsKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICBmdWxsV2lkdGg6IHRydWUsCiAgICBsYWJlbDogdHlwZUxhYmVsLAogICAgZGlzcGxheTogImNvbHVtbkNvbXByZXNzZWQiCiAgfSwgc2VsZWN0KCd0eXBlJywgdHlwZU9wdGlvbnMsIHZhbHVlcy50eXBlKSkpKTsKCiAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LmRlZmF1bHQuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgIHJlc3BvbnNpdmU6IGZhbHNlLAogICAgZ3V0dGVyU2l6ZTogJ3MnCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmllbGRTZWFyY2gsIHsKICAgICJhcmlhLWxhYmVsIjogc2VhcmNoUGxhY2Vob2xkZXIsCiAgICAiZGF0YS10ZXN0LXN1YmoiOiAiZmllbGRGaWx0ZXJTZWFyY2hJbnB1dCIsCiAgICBjb21wcmVzc2VkOiB0cnVlLAogICAgZnVsbFdpZHRoOiB0cnVlLAogICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7CiAgICAgIHJldHVybiBfb25DaGFuZ2UoJ25hbWUnLCBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKTsKICAgIH0sCiAgICBwbGFjZWhvbGRlcjogc2VhcmNoUGxhY2Vob2xkZXIsCiAgICB2YWx1ZTogdmFsdWUKICB9KSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICBjbGFzc05hbWU6ICJkc2NGaWVsZFNlYXJjaF9fZmlsdGVyV3JhcHBlciIKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpT3V0c2lkZUNsaWNrRGV0ZWN0b3IsIHsKICAgIG9uT3V0c2lkZUNsaWNrOiBmdW5jdGlvbiBvbk91dHNpZGVDbGljaygpIHt9LAogICAgaXNEaXNhYmxlZDogIWlzUG9wb3Zlck9wZW4KICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpUG9wb3ZlciwgewogICAgaWQ6ICJkYXRhUGFuZWxUeXBlRmlsdGVyIiwKICAgIHBhbmVsQ2xhc3NOYW1lOiAiZXVpRmlsdGVyR3JvdXBfX3BvcG92ZXJQYW5lbCIsCiAgICBwYW5lbFBhZGRpbmdTaXplOiAibm9uZSIsCiAgICBhbmNob3JQb3NpdGlvbjogImRvd25MZWZ0IiwKICAgIGRpc3BsYXk6ICJibG9jayIsCiAgICBpc09wZW46IGlzUG9wb3Zlck9wZW4sCiAgICBjbG9zZVBvcG92ZXI6IGZ1bmN0aW9uIGNsb3NlUG9wb3ZlcigpIHsKICAgICAgc2V0UG9wb3Zlck9wZW4oZmFsc2UpOwogICAgfSwKICAgIGJ1dHRvbjogYnV0dG9uQ29udGVudAogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlQb3BvdmVyVGl0bGUsIG51bGwsIF9pMThuLmkxOG4udHJhbnNsYXRlKCdrYm4uZGlzY292ZXIuZmllbGRDaG9vc2VyLmZpbHRlci5maWx0ZXJCeVR5cGVMYWJlbCcsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnRmlsdGVyIGJ5IHR5cGUnCiAgfSkpLCBzZWxlY3Rpb25QYW5lbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVBvcG92ZXJGb290ZXIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTd2l0Y2gsIHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgna2JuLmRpc2NvdmVyLmZpZWxkQ2hvb3Nlci5maWx0ZXIuaGlkZU1pc3NpbmdGaWVsZHNMYWJlbCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdIaWRlIG1pc3NpbmcgZmllbGRzJwogICAgfSksCiAgICBjaGVja2VkOiB2YWx1ZXMubWlzc2luZywKICAgIG9uQ2hhbmdlOiBoYW5kbGVNaXNzaW5nQ2hhbmdlLAogICAgImRhdGEtdGVzdC1zdWJqIjogIm1pc3NpbmdTd2l0Y2giCiAgfSkpKSkpKTsKfQ=="},null]}