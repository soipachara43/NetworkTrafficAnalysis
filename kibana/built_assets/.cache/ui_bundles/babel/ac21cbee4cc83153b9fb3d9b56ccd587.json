{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/ui/public/state_management/state.js","dependencies":[{"path":"src/legacy/ui/public/state_management/state.js","mtime":1589249550351},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlN0YXRlUHJvdmlkZXIgPSBTdGF0ZVByb3ZpZGVyOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9hbmd1bGFyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJhbmd1bGFyIikpOwoKdmFyIF9yaXNvbk5vZGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJpc29uLW5vZGUiKSk7Cgp2YXIgX2V2ZW50cyA9IHJlcXVpcmUoIi4uL2V2ZW50cyIpOwoKdmFyIF9ub3RpZnkgPSByZXF1aXJlKCIuLi9ub3RpZnkiKTsKCnJlcXVpcmUoIi4vY29uZmlnX3Byb3ZpZGVyIik7Cgp2YXIgX2xlZ2FjeV9jbGFzcyA9IHJlcXVpcmUoIi4uL3V0aWxzL2xlZ2FjeV9jbGFzcyIpOwoKdmFyIF9wdWJsaWMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9wbHVnaW5zL2tpYmFuYV91dGlscy9wdWJsaWMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovKgogKiBMaWNlbnNlZCB0byBFbGFzdGljc2VhcmNoIEIuVi4gdW5kZXIgb25lIG9yIG1vcmUgY29udHJpYnV0b3IKICogbGljZW5zZSBhZ3JlZW1lbnRzLiBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3RyaWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQKICogb3duZXJzaGlwLiBFbGFzdGljc2VhcmNoIEIuVi4gbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlcgogKiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heQogKiBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQogKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCi8qKgogKiBAbmFtZSBTdGF0ZQogKgogKiBAZXh0ZW5kcyBFdmVudHMKICoKICogQGRlc2NyaXB0aW9uIFBlcnNpc3RzIGdlbmVyaWMgInN0YXRlIiB0byBhbmQgcmVhZHMgaXQgZnJvbSB0aGUgVVJMLgogKi8KZnVuY3Rpb24gU3RhdGVQcm92aWRlcihQcml2YXRlLCAkcm9vdFNjb3BlLCAkbG9jYXRpb24sIHN0YXRlTWFuYWdlbWVudENvbmZpZywgY29uZmlnLCBrYm5VcmwsICRpbmplY3RvcikgewogIHZhciBFdmVudHMgPSBQcml2YXRlKF9ldmVudHMuRXZlbnRzUHJvdmlkZXIpOwoKICB2YXIgaXNEdW1teVJvdXRlID0gZnVuY3Rpb24gaXNEdW1teVJvdXRlKCkgewogICAgcmV0dXJuICRpbmplY3Rvci5oYXMoJyRyb3V0ZScpICYmICRpbmplY3Rvci5nZXQoJyRyb3V0ZScpLmN1cnJlbnQgJiYgJGluamVjdG9yLmdldCgnJHJvdXRlJykuY3VycmVudC5vdXRlckFuZ3VsYXJXcmFwcGVyUm91dGU7CiAgfTsKCiAgKDAsIF9sZWdhY3lfY2xhc3MuY3JlYXRlTGVnYWN5Q2xhc3MpKFN0YXRlKS5pbmhlcml0cyhFdmVudHMpOwoKICBmdW5jdGlvbiBTdGF0ZSh1cmxQYXJhbSwgZGVmYXVsdHMpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIF9oYXNoZWRJdGVtU3RvcmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IF9wdWJsaWMuaGFzaGVkSXRlbVN0b3JlOwoKICAgIFN0YXRlLlN1cGVyLmNhbGwodGhpcyk7CiAgICB0aGlzLnNldERlZmF1bHRzKGRlZmF1bHRzKTsKICAgIHRoaXMuX3VybFBhcmFtID0gdXJsUGFyYW0gfHwgJ19zJzsKICAgIHRoaXMuX2hhc2hlZEl0ZW1TdG9yZSA9IF9oYXNoZWRJdGVtU3RvcmU7IC8vIFdoZW4gdGhlIFVSTCB1cGRhdGVzIHdlIG5lZWQgdG8gZmV0Y2ggdGhlIHZhbHVlcyBmcm9tIHRoZSBVUkwKCiAgICB0aGlzLl9jbGVhblVwTGlzdGVuZXJzID0gWy8vIHBhcnRpYWwgcm91dGUgdXBkYXRlLCBubyBhcHAgcmVsb2FkCiAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlVXBkYXRlJywgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5mZXRjaCgpOwogICAgfSksIC8vIGJlZ2lubmluZyBvZiBmdWxsIHJvdXRlIHVwZGF0ZSwgbmV3IGFwcCB3aWxsIGJlIGluaXRpYWxpemVkIGJlZm9yZQogICAgLy8gJHJvdXRlQ2hhbmdlU3VjY2VzcyBvciAkcm91dGVDaGFuZ2VFcnJvcgogICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKCkgewogICAgICBpZiAoIV90aGlzLl9wZXJzaXN0QWNyb3NzQXBwcykgewogICAgICAgIF90aGlzLmRlc3Ryb3koKTsKICAgICAgfQogICAgfSksICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24gKCkgewogICAgICBpZiAoX3RoaXMuX3BlcnNpc3RBY3Jvc3NBcHBzKSB7CiAgICAgICAgX3RoaXMuZmV0Y2goKTsKICAgICAgfQogICAgfSldOyAvLyBJbml0aWFsaXplIHRoZSBTdGF0ZSB3aXRoIGZldGNoCgogICAgdGhpcy5mZXRjaCgpOwogIH0KCiAgU3RhdGUucHJvdG90eXBlLl9yZWFkRnJvbVVSTCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWFyY2ggPSAkbG9jYXRpb24uc2VhcmNoKCk7CiAgICB2YXIgdXJsVmFsID0gc2VhcmNoW3RoaXMuX3VybFBhcmFtXTsKCiAgICBpZiAoIXVybFZhbCkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBpZiAoKDAsIF9wdWJsaWMuaXNTdGF0ZUhhc2gpKHVybFZhbCkpIHsKICAgICAgcmV0dXJuIHRoaXMuX3BhcnNlU3RhdGVIYXNoKHVybFZhbCk7CiAgICB9CgogICAgdmFyIHJpc29uRW5jb2RlZDsKICAgIHZhciB1bmFibGVUb1BhcnNlOwoKICAgIHRyeSB7CiAgICAgIHJpc29uRW5jb2RlZCA9IF9yaXNvbk5vZGUuZGVmYXVsdC5kZWNvZGUodXJsVmFsKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdW5hYmxlVG9QYXJzZSA9IHRydWU7CiAgICB9CgogICAgaWYgKHVuYWJsZVRvUGFyc2UpIHsKICAgICAgX25vdGlmeS50b2FzdE5vdGlmaWNhdGlvbnMuYWRkRGFuZ2VyKF9pMThuLmkxOG4udHJhbnNsYXRlKCdjb21tb24udWkuc3RhdGVNYW5hZ2VtZW50LnVuYWJsZVRvUGFyc2VVcmxFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdVbmFibGUgdG8gcGFyc2UgVVJMJwogICAgICB9KSk7CgogICAgICBzZWFyY2hbdGhpcy5fdXJsUGFyYW1dID0gdGhpcy50b1F1ZXJ5UGFyYW0odGhpcy5fZGVmYXVsdHMpOwogICAgICAkbG9jYXRpb24uc2VhcmNoKHNlYXJjaCkucmVwbGFjZSgpOwogICAgfQoKICAgIGlmICghcmlzb25FbmNvZGVkKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIGlmICh0aGlzLmlzSGFzaGluZ0VuYWJsZWQoKSkgewogICAgICAvLyBSSVNPTiBjYW4gZmluZCBpdHMgd2F5IGludG8gdGhlIFVSTCBhbnkgbnVtYmVyIG9mIHdheXMsIGluY2x1ZGluZyB0aGUgbmF2YmFyIGxpbmtzIG9yCiAgICAgIC8vIHNoYXJlZCB1cmxzIHdpdGggdGhlIGVudGlyZSBzdGF0ZSBlbWJlZGRlZC4gVGhlc2UgdmFsdWVzIG5lZWQgdG8gYmUgdHJhbnNsYXRlZCBpbnRvCiAgICAgIC8vIGhhc2hlcyBhbmQgcmVwbGFjZWQgaW4gdGhlIGJyb3dzZXIgaGlzdG9yeSB3aGVuIHN0YXRlLWhhc2hpbmcgaXMgZW5hYmxlZAogICAgICBzZWFyY2hbdGhpcy5fdXJsUGFyYW1dID0gdGhpcy50b1F1ZXJ5UGFyYW0ocmlzb25FbmNvZGVkKTsKICAgICAgJGxvY2F0aW9uLnNlYXJjaChzZWFyY2gpLnJlcGxhY2UoKTsKICAgIH0KCiAgICByZXR1cm4gcmlzb25FbmNvZGVkOwogIH07CiAgLyoqCiAgICogRmV0Y2hlcyB0aGUgc3RhdGUgZnJvbSB0aGUgdXJsCiAgICogQHJldHVybnMge3ZvaWR9CiAgICovCgoKICBTdGF0ZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAoIXN0YXRlTWFuYWdlbWVudENvbmZpZy5lbmFibGVkKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgc3Rhc2ggPSB0aGlzLl9yZWFkRnJvbVVSTCgpOyAvLyBub3RoaW5nIHRvIHJlYWQgZnJvbSB0aGUgdXJsPyBzYXZlIGlmIG9yZGVyZWQgdG8gcGVyc2lzdCwgYnV0IG9ubHkgaWYgaXQncyBub3Qgb24gYSB3cmFwcGVyIHJvdXRlCgoKICAgIGlmIChzdGFzaCA9PT0gbnVsbCkgewogICAgICBpZiAodGhpcy5fcGVyc2lzdEFjcm9zc0FwcHMpIHsKICAgICAgICByZXR1cm4gdGhpcy5zYXZlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3Rhc2ggPSB7fTsKICAgICAgfQogICAgfQoKICAgIF9sb2Rhc2guZGVmYXVsdC5kZWZhdWx0cyhzdGFzaCwgdGhpcy5fZGVmYXVsdHMpOyAvLyBhcHBseSBkaWZmIHRvIHN0YXRlIGZyb20gc3Rhc2gsIHdpbGwgY2hhbmdlIHN0YXRlIGluIHBsYWNlIHZpYSBzaWRlIGVmZmVjdAoKCiAgICB2YXIgZGlmZlJlc3VsdHMgPSAoMCwgX3B1YmxpYy5hcHBseURpZmYpKHRoaXMsIHN0YXNoKTsKCiAgICBpZiAoIWlzRHVtbXlSb3V0ZSgpICYmIGRpZmZSZXN1bHRzLmtleXMubGVuZ3RoKSB7CiAgICAgIHRoaXMuZW1pdCgnZmV0Y2hfd2l0aF9jaGFuZ2VzJywgZGlmZlJlc3VsdHMua2V5cyk7CiAgICB9CiAgfTsKICAvKioKICAgKiBTYXZlcyB0aGUgc3RhdGUgdG8gdGhlIHVybAogICAqIEByZXR1cm5zIHt2b2lkfQogICAqLwoKCiAgU3RhdGUucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiAocmVwbGFjZSkgewogICAgaWYgKCFzdGF0ZU1hbmFnZW1lbnRDb25maWcuZW5hYmxlZCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKGlzRHVtbXlSb3V0ZSgpKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgc3Rhc2ggPSB0aGlzLl9yZWFkRnJvbVVSTCgpOwoKICAgIHZhciBzdGF0ZSA9IHRoaXMudG9PYmplY3QoKTsKICAgIHJlcGxhY2UgPSByZXBsYWNlIHx8IGZhbHNlOwoKICAgIGlmICghc3Rhc2gpIHsKICAgICAgcmVwbGFjZSA9IHRydWU7CiAgICAgIHN0YXNoID0ge307CiAgICB9IC8vIGFwcGx5IGRpZmYgdG8gc3RhdGUgZnJvbSBzdGFzaCwgd2lsbCBjaGFuZ2Ugc3RhdGUgaW4gcGxhY2UgdmlhIHNpZGUgZWZmZWN0CgoKICAgIHZhciBkaWZmUmVzdWx0cyA9ICgwLCBfcHVibGljLmFwcGx5RGlmZikoc3Rhc2gsIF9sb2Rhc2guZGVmYXVsdC5kZWZhdWx0cyh7fSwgc3RhdGUsIHRoaXMuX2RlZmF1bHRzKSk7CgogICAgaWYgKGRpZmZSZXN1bHRzLmtleXMubGVuZ3RoKSB7CiAgICAgIHRoaXMuZW1pdCgnc2F2ZV93aXRoX2NoYW5nZXMnLCBkaWZmUmVzdWx0cy5rZXlzKTsKICAgIH0gLy8gcGVyc2lzdCB0aGUgc3RhdGUgaW4gdGhlIFVSTAoKCiAgICB2YXIgc2VhcmNoID0gJGxvY2F0aW9uLnNlYXJjaCgpOwogICAgc2VhcmNoW3RoaXMuX3VybFBhcmFtXSA9IHRoaXMudG9RdWVyeVBhcmFtKHN0YXRlKTsKCiAgICBpZiAocmVwbGFjZSkgewogICAgICAkbG9jYXRpb24uc2VhcmNoKHNlYXJjaCkucmVwbGFjZSgpOwogICAgfSBlbHNlIHsKICAgICAgJGxvY2F0aW9uLnNlYXJjaChzZWFyY2gpOwogICAgfQogIH07CiAgLyoqCiAgICogQ2FsbHMgc2F2ZSB3aXRoIGEgZm9yY2VkIHJlcGxhY2UKICAgKiBAcmV0dXJucyB7dm9pZH0KICAgKi8KCgogIFN0YXRlLnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24gKCkgewogICAgaWYgKCFzdGF0ZU1hbmFnZW1lbnRDb25maWcuZW5hYmxlZCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5zYXZlKHRydWUpOwogIH07CiAgLyoqCiAgICogUmVzZXRzIHRoZSBzdGF0ZSB0byB0aGUgZGVmYXVsdHMKICAgKgogICAqIEByZXR1cm5zIHt2b2lkfQogICAqLwoKCiAgU3RhdGUucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewogICAgaWYgKCFzdGF0ZU1hbmFnZW1lbnRDb25maWcuZW5hYmxlZCkgewogICAgICByZXR1cm47CiAgICB9CgogICAga2JuVXJsLnJlbW92ZVBhcmFtKHRoaXMuZ2V0UXVlcnlQYXJhbU5hbWUoKSk7IC8vIGFwcGx5IGRpZmYgdG8gYXR0cmlidXRlcyBmcm9tIGRlZmF1bHRzLCB0aGlzIGlzIHNpZGUgZWZmZWN0aW5nIHNvCiAgICAvLyBpdCB3aWxsIGNoYW5nZSB0aGUgc3RhdGUgaW4gcGxhY2UuCgogICAgdmFyIGRpZmZSZXN1bHRzID0gKDAsIF9wdWJsaWMuYXBwbHlEaWZmKSh0aGlzLCB0aGlzLl9kZWZhdWx0cyk7CgogICAgaWYgKGRpZmZSZXN1bHRzLmtleXMubGVuZ3RoKSB7CiAgICAgIHRoaXMuZW1pdCgncmVzZXRfd2l0aF9jaGFuZ2VzJywgZGlmZlJlc3VsdHMua2V5cyk7CiAgICB9CgogICAgdGhpcy5zYXZlKCk7CiAgfTsKICAvKioKICAgKiBDbGVhbnMgdXAgdGhlIHN0YXRlIG9iamVjdAogICAqIEByZXR1cm5zIHt2b2lkfQogICAqLwoKCiAgU3RhdGUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICB0aGlzLm9mZigpOyAvLyByZW1vdmVzIGFsbCBsaXN0ZW5lcnMKICAgIC8vIFJlbW92ZXMgdGhlICRyb3V0ZVVwZGF0ZSBsaXN0ZW5lcgoKICAgIHRoaXMuX2NsZWFuVXBMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHsKICAgICAgcmV0dXJuIGxpc3RlbmVyKF90aGlzMik7CiAgICB9KTsKICB9OwoKICBTdGF0ZS5wcm90b3R5cGUuc2V0RGVmYXVsdHMgPSBmdW5jdGlvbiAoZGVmYXVsdHMpIHsKICAgIHRoaXMuX2RlZmF1bHRzID0gZGVmYXVsdHMgfHwge307CiAgfTsKICAvKioKICAgKiAgUGFyc2UgdGhlIHN0YXRlIGhhc2ggdG8gaXQncyB1bnNlcmlhbGl6ZWQgdmFsdWUuIEhhc2hlcyBhcmUgcmVzdG9yZWQKICAgKiAgdG8gdGhlaXIgcHJlLWhhc2hlZCBzdGF0ZS4KICAgKgogICAqICBAcGFyYW0gIHtzdHJpbmd9IHN0YXRlSGFzaCAtIHN0YXRlIGhhc2ggdmFsdWUgZnJvbSB0aGUgcXVlcnkgc3RyaW5nLgogICAqICBAcmV0dXJuIHthbnl9IC0gdGhlIHN0b3JlZCB2YWx1ZSwgb3IgbnVsbCBpZiBoYXNoIGRvZXMgbm90IHJlc29sdmUuCiAgICovCgoKICBTdGF0ZS5wcm90b3R5cGUuX3BhcnNlU3RhdGVIYXNoID0gZnVuY3Rpb24gKHN0YXRlSGFzaCkgewogICAgdmFyIGpzb24gPSB0aGlzLl9oYXNoZWRJdGVtU3RvcmUuZ2V0SXRlbShzdGF0ZUhhc2gpOwoKICAgIGlmIChqc29uID09PSBudWxsKSB7CiAgICAgIF9ub3RpZnkudG9hc3ROb3RpZmljYXRpb25zLmFkZERhbmdlcihfaTE4bi5pMThuLnRyYW5zbGF0ZSgnY29tbW9uLnVpLnN0YXRlTWFuYWdlbWVudC51bmFibGVUb1Jlc3RvcmVVcmxFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdVbmFibGUgdG8gY29tcGxldGVseSByZXN0b3JlIHRoZSBVUkwsIGJlIHN1cmUgdG8gdXNlIHRoZSBzaGFyZSBmdW5jdGlvbmFsaXR5LicKICAgICAgfSkpOwogICAgfQoKICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pOwogIH07CiAgLyoqCiAgICogIExvb2t1cCB0aGUgdmFsdWUgZm9yIGEgaGFzaCBhbmQgcmV0dXJuIGl0J3MgdmFsdWUgaW4gcmlzb24gZm9ybWF0IG9yIGp1c3QKICAgKiAgcmV0dXJuIHBhc3NlZCBhcmd1bWVudCBpZiBpdCdzIG5vdCByZWNvZ25pemVkIGFzIHN0YXRlIGhhc2guCiAgICoKICAgKiAgQHBhcmFtICB7c3RyaW5nfSBzdGF0ZUhhc2hPclJpc29uIC0gZWl0aGVyIHN0YXRlIGhhc2ggdmFsdWUgb3Igcmlzb24gc3RyaW5nLgogICAqICBAcmV0dXJuIHtzdHJpbmd9IHJpc29uCiAgICovCgoKICBTdGF0ZS5wcm90b3R5cGUudHJhbnNsYXRlSGFzaFRvUmlzb24gPSBmdW5jdGlvbiAoc3RhdGVIYXNoT3JSaXNvbikgewogICAgaWYgKCgwLCBfcHVibGljLmlzU3RhdGVIYXNoKShzdGF0ZUhhc2hPclJpc29uKSkgewogICAgICByZXR1cm4gX3Jpc29uTm9kZS5kZWZhdWx0LmVuY29kZSh0aGlzLl9wYXJzZVN0YXRlSGFzaChzdGF0ZUhhc2hPclJpc29uKSk7CiAgICB9CgogICAgcmV0dXJuIHN0YXRlSGFzaE9yUmlzb247CiAgfTsKCiAgU3RhdGUucHJvdG90eXBlLmlzSGFzaGluZ0VuYWJsZWQgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gISFjb25maWcuZ2V0KCdzdGF0ZTpzdG9yZUluU2Vzc2lvblN0b3JhZ2UnKTsKICB9OwogIC8qKgogICAqICBQcm9kdWNlIHRoZSBoYXNoIHZlcnNpb24gb2YgdGhlIHN0YXRlIGluIGl0J3MgY3VycmVudCBwb3NpdGlvbgogICAqCiAgICogIEByZXR1cm4ge3N0cmluZ30KICAgKi8KCgogIFN0YXRlLnByb3RvdHlwZS50b1F1ZXJ5UGFyYW0gPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc3RhdGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRoaXMudG9PYmplY3QoKTsKCiAgICBpZiAoIXRoaXMuaXNIYXNoaW5nRW5hYmxlZCgpKSB7CiAgICAgIHJldHVybiBfcmlzb25Ob2RlLmRlZmF1bHQuZW5jb2RlKHN0YXRlKTsKICAgIH0gLy8gV2UgbmVlZCB0byBzdHJpcCBvdXQgQW5ndWxhci1zcGVjaWZpYyBwcm9wZXJ0aWVzLgoKCiAgICB2YXIganNvbiA9IF9hbmd1bGFyLmRlZmF1bHQudG9Kc29uKHN0YXRlKTsKCiAgICB2YXIgaGFzaCA9ICgwLCBfcHVibGljLmNyZWF0ZVN0YXRlSGFzaCkoanNvbik7CgogICAgdmFyIGlzSXRlbVNldCA9IHRoaXMuX2hhc2hlZEl0ZW1TdG9yZS5zZXRJdGVtKGhhc2gsIGpzb24pOwoKICAgIGlmIChpc0l0ZW1TZXQpIHsKICAgICAgcmV0dXJuIGhhc2g7CiAgICB9IC8vIElmIHdlIHJhbiBvdXQgb2Ygc3BhY2UgdHJ5aW5nIHRvIHBlcnNpc3QgdGhlIHN0YXRlLCBub3RpZnkgdGhlIHVzZXIuCgoKICAgIHZhciBtZXNzYWdlID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2NvbW1vbi51aS5zdGF0ZU1hbmFnZW1lbnQudW5hYmxlVG9TdG9yZUhpc3RvcnlJblNlc3Npb25FcnJvck1lc3NhZ2UnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnS2liYW5hIGlzIHVuYWJsZSB0byBzdG9yZSBoaXN0b3J5IGl0ZW1zIGluIHlvdXIgc2Vzc2lvbiAnICsgImJlY2F1c2UgaXQgaXMgZnVsbCBhbmQgdGhlcmUgZG9uJ3Qgc2VlbSB0byBiZSBpdGVtcyBhbnkgaXRlbXMgc2FmZSAiICsgJ3RvIGRlbGV0ZS5cblxuJyArICdUaGlzIGNhbiB1c3VhbGx5IGJlIGZpeGVkIGJ5IG1vdmluZyB0byBhIGZyZXNoIHRhYiwgYnV0IGNvdWxkICcgKyAnYmUgY2F1c2VkIGJ5IGEgbGFyZ2VyIGlzc3VlLiBJZiB5b3UgYXJlIHNlZWluZyB0aGlzIG1lc3NhZ2UgcmVndWxhcmx5LCAnICsgJ3BsZWFzZSBmaWxlIGFuIGlzc3VlIGF0IHtnaXRIdWJJc3N1ZXNVcmx9LicsCiAgICAgIHZhbHVlczogewogICAgICAgIGdpdEh1Yklzc3Vlc1VybDogJ2h0dHBzOi8vZ2l0aHViLmNvbS9lbGFzdGljL2tpYmFuYS9pc3N1ZXMnCiAgICAgIH0KICAgIH0pOwoKICAgICgwLCBfbm90aWZ5LmZhdGFsRXJyb3IpKG5ldyBFcnJvcihtZXNzYWdlKSk7CiAgfTsKICAvKioKICAgKiAgR2V0IHRoZSBxdWVyeSBzdHJpbmcgcGFyYW1ldGVyIG5hbWUgd2hlcmUgdGhpcyBzdGF0ZSB3cml0ZXMgYW5kIHJlYWRzCiAgICogIEByZXR1cm4ge3N0cmluZ30KICAgKi8KCgogIFN0YXRlLnByb3RvdHlwZS5nZXRRdWVyeVBhcmFtTmFtZSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLl91cmxQYXJhbTsKICB9OwogIC8qKgogICAqIFJldHVybnMgYW4gb2JqZWN0IHdpdGggZWFjaCBwcm9wZXJ0eSBuYW1lIGFuZCB2YWx1ZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBlbnRyaWVzIGluIHRoaXMgY29sbGVjdGlvbgogICAqIGV4Y2x1ZGluZyBmaWVsZHMgc3RhcnRlZCBmcm9tICckJywgJ18nIGFuZCBhbGwgbWV0aG9kcwogICAqCiAgICogQHJldHVybiB7b2JqZWN0fQogICAqLwoKCiAgU3RhdGUucHJvdG90eXBlLnRvT2JqZWN0ID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5vbWl0KHRoaXMsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7CiAgICAgIHJldHVybiBrZXkuY2hhckF0KDApID09PSAnJCcgfHwga2V5LmNoYXJBdCgwKSA9PT0gJ18nIHx8IF9sb2Rhc2guZGVmYXVsdC5pc0Z1bmN0aW9uKHZhbHVlKTsKICAgIH0pOwogIH07CiAgLyoqIEFsaWFzIGZvciBtZXRob2QgJ3RvT2JqZWN0JwogICAqCiAgICogQG9ic29sZXRlIFBsZWFzZSB1c2UgJ3RvT2JqZWN0JyBtZXRob2QgaW5zdGVhZAogICAqIEByZXR1cm4ge29iamVjdH0KICAgKi8KCgogIFN0YXRlLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpcy50b09iamVjdCgpOwogIH07CgogIHJldHVybiBTdGF0ZTsKfQ=="},null]}