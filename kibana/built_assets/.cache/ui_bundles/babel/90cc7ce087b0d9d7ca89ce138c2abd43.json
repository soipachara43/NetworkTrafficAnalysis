{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/store/timeline/reducer.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/store/timeline/reducer.js","mtime":1589249553352},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnRpbWVsaW5lUmVkdWNlciA9IGV4cG9ydHMuaW5pdGlhbFRpbWVsaW5lU3RhdGUgPSB2b2lkIDA7Cgp2YXIgX3R5cGVzY3JpcHRGc2FSZWR1Y2VycyA9IHJlcXVpcmUoInR5cGVzY3JpcHQtZnNhLXJlZHVjZXJzIik7Cgp2YXIgX2FjdGlvbnMgPSByZXF1aXJlKCIuL2FjdGlvbnMiKTsKCnZhciBfaGVscGVycyA9IHJlcXVpcmUoIi4vaGVscGVycyIpOwoKdmFyIF90eXBlcyA9IHJlcXVpcmUoIi4vdHlwZXMiKTsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Cgp2YXIgaW5pdGlhbFRpbWVsaW5lU3RhdGUgPSB7CiAgdGltZWxpbmVCeUlkOiBfdHlwZXMuRU1QVFlfVElNRUxJTkVfQllfSUQsCiAgYXV0b1NhdmVkV2FybmluZ01zZzogewogICAgdGltZWxpbmVJZDogbnVsbCwKICAgIG5ld1RpbWVsaW5lTW9kZWw6IG51bGwKICB9LAogIHNob3dDYWxsT3V0VW5hdXRob3JpemVkTXNnOiBmYWxzZQp9OwovKiogVGhlIHJlZHVjZXIgZm9yIGFsbCB0aW1lbGluZSBhY3Rpb25zICAqLwoKZXhwb3J0cy5pbml0aWFsVGltZWxpbmVTdGF0ZSA9IGluaXRpYWxUaW1lbGluZVN0YXRlOwp2YXIgdGltZWxpbmVSZWR1Y2VyID0gKDAsIF90eXBlc2NyaXB0RnNhUmVkdWNlcnMucmVkdWNlcldpdGhJbml0aWFsU3RhdGUpKGluaXRpYWxUaW1lbGluZVN0YXRlKS5jYXNlKF9hY3Rpb25zLmFkZFRpbWVsaW5lLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWYpIHsKICB2YXIgaWQgPSBfcmVmLmlkLAogICAgICB0aW1lbGluZSA9IF9yZWYudGltZWxpbmU7CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLCB7CiAgICB0aW1lbGluZUJ5SWQ6ICgwLCBfaGVscGVycy5hZGRUaW1lbGluZVRvU3RvcmUpKHsKICAgICAgaWQ6IGlkLAogICAgICB0aW1lbGluZTogdGltZWxpbmUsCiAgICAgIHRpbWVsaW5lQnlJZDogc3RhdGUudGltZWxpbmVCeUlkCiAgICB9KQogIH0pOwp9KS5jYXNlKF9hY3Rpb25zLmNyZWF0ZVRpbWVsaW5lLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWYyKSB7CiAgdmFyIGlkID0gX3JlZjIuaWQsCiAgICAgIGRhdGFQcm92aWRlcnMgPSBfcmVmMi5kYXRhUHJvdmlkZXJzLAogICAgICBkYXRlUmFuZ2UgPSBfcmVmMi5kYXRlUmFuZ2UsCiAgICAgIHNob3cgPSBfcmVmMi5zaG93LAogICAgICBjb2x1bW5zID0gX3JlZjIuY29sdW1ucywKICAgICAgaXRlbXNQZXJQYWdlID0gX3JlZjIuaXRlbXNQZXJQYWdlLAogICAgICBrcWxRdWVyeSA9IF9yZWYyLmtxbFF1ZXJ5LAogICAgICBzb3J0ID0gX3JlZjIuc29ydCwKICAgICAgc2hvd0NoZWNrYm94ZXMgPSBfcmVmMi5zaG93Q2hlY2tib3hlcywKICAgICAgc2hvd1Jvd1JlbmRlcmVycyA9IF9yZWYyLnNob3dSb3dSZW5kZXJlcnMsCiAgICAgIGZpbHRlcnMgPSBfcmVmMi5maWx0ZXJzOwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgdGltZWxpbmVCeUlkOiAoMCwgX2hlbHBlcnMuYWRkTmV3VGltZWxpbmUpKHsKICAgICAgY29sdW1uczogY29sdW1ucywKICAgICAgZGF0YVByb3ZpZGVyczogZGF0YVByb3ZpZGVycywKICAgICAgZGF0ZVJhbmdlOiBkYXRlUmFuZ2UsCiAgICAgIGZpbHRlcnM6IGZpbHRlcnMsCiAgICAgIGlkOiBpZCwKICAgICAgaXRlbXNQZXJQYWdlOiBpdGVtc1BlclBhZ2UsCiAgICAgIGtxbFF1ZXJ5OiBrcWxRdWVyeSwKICAgICAgc29ydDogc29ydCwKICAgICAgc2hvdzogc2hvdywKICAgICAgc2hvd0NoZWNrYm94ZXM6IHNob3dDaGVja2JveGVzLAogICAgICBzaG93Um93UmVuZGVyZXJzOiBzaG93Um93UmVuZGVyZXJzLAogICAgICB0aW1lbGluZUJ5SWQ6IHN0YXRlLnRpbWVsaW5lQnlJZAogICAgfSkKICB9KTsKfSkuY2FzZShfYWN0aW9ucy51cHNlcnRDb2x1bW4sIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZjMpIHsKICB2YXIgY29sdW1uID0gX3JlZjMuY29sdW1uLAogICAgICBpZCA9IF9yZWYzLmlkLAogICAgICBpbmRleCA9IF9yZWYzLmluZGV4OwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgdGltZWxpbmVCeUlkOiAoMCwgX2hlbHBlcnMudXBzZXJ0VGltZWxpbmVDb2x1bW4pKHsKICAgICAgY29sdW1uOiBjb2x1bW4sCiAgICAgIGlkOiBpZCwKICAgICAgaW5kZXg6IGluZGV4LAogICAgICB0aW1lbGluZUJ5SWQ6IHN0YXRlLnRpbWVsaW5lQnlJZAogICAgfSkKICB9KTsKfSkuY2FzZShfYWN0aW9ucy5hZGRIaXN0b3J5LCBmdW5jdGlvbiAoc3RhdGUsIF9yZWY0KSB7CiAgdmFyIGlkID0gX3JlZjQuaWQsCiAgICAgIGhpc3RvcnlJZCA9IF9yZWY0Lmhpc3RvcnlJZDsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgIHRpbWVsaW5lQnlJZDogKDAsIF9oZWxwZXJzLmFkZFRpbWVsaW5lSGlzdG9yeSkoewogICAgICBpZDogaWQsCiAgICAgIGhpc3RvcnlJZDogaGlzdG9yeUlkLAogICAgICB0aW1lbGluZUJ5SWQ6IHN0YXRlLnRpbWVsaW5lQnlJZAogICAgfSkKICB9KTsKfSkuY2FzZShfYWN0aW9ucy5hZGROb3RlLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWY1KSB7CiAgdmFyIGlkID0gX3JlZjUuaWQsCiAgICAgIG5vdGVJZCA9IF9yZWY1Lm5vdGVJZDsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgIHRpbWVsaW5lQnlJZDogKDAsIF9oZWxwZXJzLmFkZFRpbWVsaW5lTm90ZSkoewogICAgICBpZDogaWQsCiAgICAgIG5vdGVJZDogbm90ZUlkLAogICAgICB0aW1lbGluZUJ5SWQ6IHN0YXRlLnRpbWVsaW5lQnlJZAogICAgfSkKICB9KTsKfSkuY2FzZShfYWN0aW9ucy5hZGROb3RlVG9FdmVudCwgZnVuY3Rpb24gKHN0YXRlLCBfcmVmNikgewogIHZhciBpZCA9IF9yZWY2LmlkLAogICAgICBub3RlSWQgPSBfcmVmNi5ub3RlSWQsCiAgICAgIGV2ZW50SWQgPSBfcmVmNi5ldmVudElkOwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgdGltZWxpbmVCeUlkOiAoMCwgX2hlbHBlcnMuYWRkVGltZWxpbmVOb3RlVG9FdmVudCkoewogICAgICBpZDogaWQsCiAgICAgIG5vdGVJZDogbm90ZUlkLAogICAgICBldmVudElkOiBldmVudElkLAogICAgICB0aW1lbGluZUJ5SWQ6IHN0YXRlLnRpbWVsaW5lQnlJZAogICAgfSkKICB9KTsKfSkuY2FzZShfYWN0aW9ucy5hZGRQcm92aWRlciwgZnVuY3Rpb24gKHN0YXRlLCBfcmVmNykgewogIHZhciBpZCA9IF9yZWY3LmlkLAogICAgICBwcm92aWRlciA9IF9yZWY3LnByb3ZpZGVyOwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgdGltZWxpbmVCeUlkOiAoMCwgX2hlbHBlcnMuYWRkVGltZWxpbmVQcm92aWRlcikoewogICAgICBpZDogaWQsCiAgICAgIHByb3ZpZGVyOiBwcm92aWRlciwKICAgICAgdGltZWxpbmVCeUlkOiBzdGF0ZS50aW1lbGluZUJ5SWQKICAgIH0pCiAgfSk7Cn0pLmNhc2UoX2FjdGlvbnMuYXBwbHlLcWxGaWx0ZXJRdWVyeSwgZnVuY3Rpb24gKHN0YXRlLCBfcmVmOCkgewogIHZhciBpZCA9IF9yZWY4LmlkLAogICAgICBmaWx0ZXJRdWVyeSA9IF9yZWY4LmZpbHRlclF1ZXJ5OwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgdGltZWxpbmVCeUlkOiAoMCwgX2hlbHBlcnMuYXBwbHlLcWxGaWx0ZXJRdWVyeURyYWZ0KSh7CiAgICAgIGlkOiBpZCwKICAgICAgZmlsdGVyUXVlcnk6IGZpbHRlclF1ZXJ5LAogICAgICB0aW1lbGluZUJ5SWQ6IHN0YXRlLnRpbWVsaW5lQnlJZAogICAgfSkKICB9KTsKfSkuY2FzZShfYWN0aW9ucy5zZXRLcWxGaWx0ZXJRdWVyeURyYWZ0LCBmdW5jdGlvbiAoc3RhdGUsIF9yZWY5KSB7CiAgdmFyIGlkID0gX3JlZjkuaWQsCiAgICAgIGZpbHRlclF1ZXJ5RHJhZnQgPSBfcmVmOS5maWx0ZXJRdWVyeURyYWZ0OwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgdGltZWxpbmVCeUlkOiAoMCwgX2hlbHBlcnMudXBkYXRlS3FsRmlsdGVyUXVlcnlEcmFmdCkoewogICAgICBpZDogaWQsCiAgICAgIGZpbHRlclF1ZXJ5RHJhZnQ6IGZpbHRlclF1ZXJ5RHJhZnQsCiAgICAgIHRpbWVsaW5lQnlJZDogc3RhdGUudGltZWxpbmVCeUlkCiAgICB9KQogIH0pOwp9KS5jYXNlKF9hY3Rpb25zLnNob3dUaW1lbGluZSwgZnVuY3Rpb24gKHN0YXRlLCBfcmVmMTApIHsKICB2YXIgaWQgPSBfcmVmMTAuaWQsCiAgICAgIHNob3cgPSBfcmVmMTAuc2hvdzsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgIHRpbWVsaW5lQnlJZDogKDAsIF9oZWxwZXJzLnVwZGF0ZVRpbWVsaW5lU2hvd1RpbWVsaW5lKSh7CiAgICAgIGlkOiBpZCwKICAgICAgc2hvdzogc2hvdywKICAgICAgdGltZWxpbmVCeUlkOiBzdGF0ZS50aW1lbGluZUJ5SWQKICAgIH0pCiAgfSk7Cn0pLmNhc2UoX2FjdGlvbnMuYXBwbHlEZWx0YVRvQ29sdW1uV2lkdGgsIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZjExKSB7CiAgdmFyIGlkID0gX3JlZjExLmlkLAogICAgICBjb2x1bW5JZCA9IF9yZWYxMS5jb2x1bW5JZCwKICAgICAgZGVsdGEgPSBfcmVmMTEuZGVsdGE7CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLCB7CiAgICB0aW1lbGluZUJ5SWQ6ICgwLCBfaGVscGVycy5hcHBseURlbHRhVG9UaW1lbGluZUNvbHVtbldpZHRoKSh7CiAgICAgIGlkOiBpZCwKICAgICAgY29sdW1uSWQ6IGNvbHVtbklkLAogICAgICBkZWx0YTogZGVsdGEsCiAgICAgIHRpbWVsaW5lQnlJZDogc3RhdGUudGltZWxpbmVCeUlkCiAgICB9KQogIH0pOwp9KS5jYXNlKF9hY3Rpb25zLmFwcGx5RGVsdGFUb1dpZHRoLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWYxMikgewogIHZhciBpZCA9IF9yZWYxMi5pZCwKICAgICAgZGVsdGEgPSBfcmVmMTIuZGVsdGEsCiAgICAgIGJvZHlDbGllbnRXaWR0aFBpeGVscyA9IF9yZWYxMi5ib2R5Q2xpZW50V2lkdGhQaXhlbHMsCiAgICAgIG1pbldpZHRoUGl4ZWxzID0gX3JlZjEyLm1pbldpZHRoUGl4ZWxzLAogICAgICBtYXhXaWR0aFBlcmNlbnQgPSBfcmVmMTIubWF4V2lkdGhQZXJjZW50OwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgdGltZWxpbmVCeUlkOiAoMCwgX2hlbHBlcnMuYXBwbHlEZWx0YVRvQ3VycmVudFdpZHRoKSh7CiAgICAgIGlkOiBpZCwKICAgICAgZGVsdGE6IGRlbHRhLAogICAgICBib2R5Q2xpZW50V2lkdGhQaXhlbHM6IGJvZHlDbGllbnRXaWR0aFBpeGVscywKICAgICAgbWluV2lkdGhQaXhlbHM6IG1pbldpZHRoUGl4ZWxzLAogICAgICBtYXhXaWR0aFBlcmNlbnQ6IG1heFdpZHRoUGVyY2VudCwKICAgICAgdGltZWxpbmVCeUlkOiBzdGF0ZS50aW1lbGluZUJ5SWQKICAgIH0pCiAgfSk7Cn0pLmNhc2UoX2FjdGlvbnMucGluRXZlbnQsIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZjEzKSB7CiAgdmFyIGlkID0gX3JlZjEzLmlkLAogICAgICBldmVudElkID0gX3JlZjEzLmV2ZW50SWQ7CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLCB7CiAgICB0aW1lbGluZUJ5SWQ6ICgwLCBfaGVscGVycy5waW5UaW1lbGluZUV2ZW50KSh7CiAgICAgIGlkOiBpZCwKICAgICAgZXZlbnRJZDogZXZlbnRJZCwKICAgICAgdGltZWxpbmVCeUlkOiBzdGF0ZS50aW1lbGluZUJ5SWQKICAgIH0pCiAgfSk7Cn0pLmNhc2UoX2FjdGlvbnMucmVtb3ZlQ29sdW1uLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWYxNCkgewogIHZhciBpZCA9IF9yZWYxNC5pZCwKICAgICAgY29sdW1uSWQgPSBfcmVmMTQuY29sdW1uSWQ7CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLCB7CiAgICB0aW1lbGluZUJ5SWQ6ICgwLCBfaGVscGVycy5yZW1vdmVUaW1lbGluZUNvbHVtbikoewogICAgICBpZDogaWQsCiAgICAgIGNvbHVtbklkOiBjb2x1bW5JZCwKICAgICAgdGltZWxpbmVCeUlkOiBzdGF0ZS50aW1lbGluZUJ5SWQKICAgIH0pCiAgfSk7Cn0pLmNhc2UoX2FjdGlvbnMucmVtb3ZlUHJvdmlkZXIsIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZjE1KSB7CiAgdmFyIGlkID0gX3JlZjE1LmlkLAogICAgICBwcm92aWRlcklkID0gX3JlZjE1LnByb3ZpZGVySWQsCiAgICAgIGFuZFByb3ZpZGVySWQgPSBfcmVmMTUuYW5kUHJvdmlkZXJJZDsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgIHRpbWVsaW5lQnlJZDogKDAsIF9oZWxwZXJzLnJlbW92ZVRpbWVsaW5lUHJvdmlkZXIpKHsKICAgICAgaWQ6IGlkLAogICAgICBwcm92aWRlcklkOiBwcm92aWRlcklkLAogICAgICB0aW1lbGluZUJ5SWQ6IHN0YXRlLnRpbWVsaW5lQnlJZCwKICAgICAgYW5kUHJvdmlkZXJJZDogYW5kUHJvdmlkZXJJZAogICAgfSkKICB9KTsKfSkuY2FzZShfYWN0aW9ucy5zdGFydFRpbWVsaW5lU2F2aW5nLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWYxNikgewogIHZhciBpZCA9IF9yZWYxNi5pZDsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgIHRpbWVsaW5lQnlJZDogX29iamVjdFNwcmVhZCh7fSwgc3RhdGUudGltZWxpbmVCeUlkLCBfZGVmaW5lUHJvcGVydHkoe30sIGlkLCBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZS50aW1lbGluZUJ5SWRbaWRdLCB7CiAgICAgIGlzU2F2aW5nOiB0cnVlCiAgICB9KSkpCiAgfSk7Cn0pLmNhc2UoX2FjdGlvbnMuZW5kVGltZWxpbmVTYXZpbmcsIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZjE3KSB7CiAgdmFyIGlkID0gX3JlZjE3LmlkOwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgdGltZWxpbmVCeUlkOiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZS50aW1lbGluZUJ5SWQsIF9kZWZpbmVQcm9wZXJ0eSh7fSwgaWQsIF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLnRpbWVsaW5lQnlJZFtpZF0sIHsKICAgICAgaXNTYXZpbmc6IGZhbHNlCiAgICB9KSkpCiAgfSk7Cn0pLmNhc2UoX2FjdGlvbnMuc2V0RXZlbnRzRGVsZXRlZCwgZnVuY3Rpb24gKHN0YXRlLCBfcmVmMTgpIHsKICB2YXIgaWQgPSBfcmVmMTguaWQsCiAgICAgIGV2ZW50SWRzID0gX3JlZjE4LmV2ZW50SWRzLAogICAgICBpc0RlbGV0ZWQgPSBfcmVmMTguaXNEZWxldGVkOwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgdGltZWxpbmVCeUlkOiAoMCwgX2hlbHBlcnMuc2V0RGVsZXRlZFRpbWVsaW5lRXZlbnRzKSh7CiAgICAgIGlkOiBpZCwKICAgICAgZXZlbnRJZHM6IGV2ZW50SWRzLAogICAgICB0aW1lbGluZUJ5SWQ6IHN0YXRlLnRpbWVsaW5lQnlJZCwKICAgICAgaXNEZWxldGVkOiBpc0RlbGV0ZWQKICAgIH0pCiAgfSk7Cn0pLmNhc2UoX2FjdGlvbnMuY2xlYXJFdmVudHNEZWxldGVkLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWYxOSkgewogIHZhciBpZCA9IF9yZWYxOS5pZDsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgIHRpbWVsaW5lQnlJZDogX29iamVjdFNwcmVhZCh7fSwgc3RhdGUudGltZWxpbmVCeUlkLCBfZGVmaW5lUHJvcGVydHkoe30sIGlkLCBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZS50aW1lbGluZUJ5SWRbaWRdLCB7CiAgICAgIGRlbGV0ZWRFdmVudElkczogW10KICAgIH0pKSkKICB9KTsKfSkuY2FzZShfYWN0aW9ucy5zZXRFdmVudHNMb2FkaW5nLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWYyMCkgewogIHZhciBpZCA9IF9yZWYyMC5pZCwKICAgICAgZXZlbnRJZHMgPSBfcmVmMjAuZXZlbnRJZHMsCiAgICAgIGlzTG9hZGluZyA9IF9yZWYyMC5pc0xvYWRpbmc7CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLCB7CiAgICB0aW1lbGluZUJ5SWQ6ICgwLCBfaGVscGVycy5zZXRMb2FkaW5nVGltZWxpbmVFdmVudHMpKHsKICAgICAgaWQ6IGlkLAogICAgICBldmVudElkczogZXZlbnRJZHMsCiAgICAgIHRpbWVsaW5lQnlJZDogc3RhdGUudGltZWxpbmVCeUlkLAogICAgICBpc0xvYWRpbmc6IGlzTG9hZGluZwogICAgfSkKICB9KTsKfSkuY2FzZShfYWN0aW9ucy5jbGVhckV2ZW50c0xvYWRpbmcsIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZjIxKSB7CiAgdmFyIGlkID0gX3JlZjIxLmlkOwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgdGltZWxpbmVCeUlkOiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZS50aW1lbGluZUJ5SWQsIF9kZWZpbmVQcm9wZXJ0eSh7fSwgaWQsIF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLnRpbWVsaW5lQnlJZFtpZF0sIHsKICAgICAgbG9hZGluZ0V2ZW50SWRzOiBbXQogICAgfSkpKQogIH0pOwp9KS5jYXNlKF9hY3Rpb25zLnNldFNlbGVjdGVkLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWYyMikgewogIHZhciBpZCA9IF9yZWYyMi5pZCwKICAgICAgZXZlbnRJZHMgPSBfcmVmMjIuZXZlbnRJZHMsCiAgICAgIGlzU2VsZWN0ZWQgPSBfcmVmMjIuaXNTZWxlY3RlZCwKICAgICAgaXNTZWxlY3RBbGxDaGVja2VkID0gX3JlZjIyLmlzU2VsZWN0QWxsQ2hlY2tlZDsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgIHRpbWVsaW5lQnlJZDogKDAsIF9oZWxwZXJzLnNldFNlbGVjdGVkVGltZWxpbmVFdmVudHMpKHsKICAgICAgaWQ6IGlkLAogICAgICBldmVudElkczogZXZlbnRJZHMsCiAgICAgIHRpbWVsaW5lQnlJZDogc3RhdGUudGltZWxpbmVCeUlkLAogICAgICBpc1NlbGVjdGVkOiBpc1NlbGVjdGVkLAogICAgICBpc1NlbGVjdEFsbENoZWNrZWQ6IGlzU2VsZWN0QWxsQ2hlY2tlZAogICAgfSkKICB9KTsKfSkuY2FzZShfYWN0aW9ucy5jbGVhclNlbGVjdGVkLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWYyMykgewogIHZhciBpZCA9IF9yZWYyMy5pZDsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgIHRpbWVsaW5lQnlJZDogX29iamVjdFNwcmVhZCh7fSwgc3RhdGUudGltZWxpbmVCeUlkLCBfZGVmaW5lUHJvcGVydHkoe30sIGlkLCBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZS50aW1lbGluZUJ5SWRbaWRdLCB7CiAgICAgIHNlbGVjdGVkRXZlbnRJZHM6IHt9LAogICAgICBpc1NlbGVjdEFsbENoZWNrZWQ6IGZhbHNlCiAgICB9KSkpCiAgfSk7Cn0pLmNhc2UoX2FjdGlvbnMudXBkYXRlSXNMb2FkaW5nLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWYyNCkgewogIHZhciBpZCA9IF9yZWYyNC5pZCwKICAgICAgaXNMb2FkaW5nID0gX3JlZjI0LmlzTG9hZGluZzsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgIHRpbWVsaW5lQnlJZDogX29iamVjdFNwcmVhZCh7fSwgc3RhdGUudGltZWxpbmVCeUlkLCBfZGVmaW5lUHJvcGVydHkoe30sIGlkLCBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZS50aW1lbGluZUJ5SWRbaWRdLCB7CiAgICAgIGlzTG9hZGluZzogaXNMb2FkaW5nCiAgICB9KSkpCiAgfSk7Cn0pLmNhc2UoX2FjdGlvbnMudXBkYXRlVGltZWxpbmUsIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZjI1KSB7CiAgdmFyIGlkID0gX3JlZjI1LmlkLAogICAgICB0aW1lbGluZSA9IF9yZWYyNS50aW1lbGluZTsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgIHRpbWVsaW5lQnlJZDogX29iamVjdFNwcmVhZCh7fSwgc3RhdGUudGltZWxpbmVCeUlkLCBfZGVmaW5lUHJvcGVydHkoe30sIGlkLCB0aW1lbGluZSkpCiAgfSk7Cn0pLmNhc2UoX2FjdGlvbnMudW5QaW5FdmVudCwgZnVuY3Rpb24gKHN0YXRlLCBfcmVmMjYpIHsKICB2YXIgaWQgPSBfcmVmMjYuaWQsCiAgICAgIGV2ZW50SWQgPSBfcmVmMjYuZXZlbnRJZDsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgIHRpbWVsaW5lQnlJZDogKDAsIF9oZWxwZXJzLnVuUGluVGltZWxpbmVFdmVudCkoewogICAgICBpZDogaWQsCiAgICAgIGV2ZW50SWQ6IGV2ZW50SWQsCiAgICAgIHRpbWVsaW5lQnlJZDogc3RhdGUudGltZWxpbmVCeUlkCiAgICB9KQogIH0pOwp9KS5jYXNlKF9hY3Rpb25zLnVwZGF0ZUNvbHVtbnMsIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZjI3KSB7CiAgdmFyIGlkID0gX3JlZjI3LmlkLAogICAgICBjb2x1bW5zID0gX3JlZjI3LmNvbHVtbnM7CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLCB7CiAgICB0aW1lbGluZUJ5SWQ6ICgwLCBfaGVscGVycy51cGRhdGVUaW1lbGluZUNvbHVtbnMpKHsKICAgICAgaWQ6IGlkLAogICAgICBjb2x1bW5zOiBjb2x1bW5zLAogICAgICB0aW1lbGluZUJ5SWQ6IHN0YXRlLnRpbWVsaW5lQnlJZAogICAgfSkKICB9KTsKfSkuY2FzZShfYWN0aW9ucy51cGRhdGVEZXNjcmlwdGlvbiwgZnVuY3Rpb24gKHN0YXRlLCBfcmVmMjgpIHsKICB2YXIgaWQgPSBfcmVmMjguaWQsCiAgICAgIGRlc2NyaXB0aW9uID0gX3JlZjI4LmRlc2NyaXB0aW9uOwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgdGltZWxpbmVCeUlkOiAoMCwgX2hlbHBlcnMudXBkYXRlVGltZWxpbmVEZXNjcmlwdGlvbikoewogICAgICBpZDogaWQsCiAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiwKICAgICAgdGltZWxpbmVCeUlkOiBzdGF0ZS50aW1lbGluZUJ5SWQKICAgIH0pCiAgfSk7Cn0pLmNhc2UoX2FjdGlvbnMudXBkYXRlRXZlbnRUeXBlLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWYyOSkgewogIHZhciBpZCA9IF9yZWYyOS5pZCwKICAgICAgZXZlbnRUeXBlID0gX3JlZjI5LmV2ZW50VHlwZTsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgIHRpbWVsaW5lQnlJZDogKDAsIF9oZWxwZXJzLnVwZGF0ZVRpbWVsaW5lRXZlbnRUeXBlKSh7CiAgICAgIGlkOiBpZCwKICAgICAgZXZlbnRUeXBlOiBldmVudFR5cGUsCiAgICAgIHRpbWVsaW5lQnlJZDogc3RhdGUudGltZWxpbmVCeUlkCiAgICB9KQogIH0pOwp9KS5jYXNlKF9hY3Rpb25zLnVwZGF0ZUlzRmF2b3JpdGUsIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZjMwKSB7CiAgdmFyIGlkID0gX3JlZjMwLmlkLAogICAgICBpc0Zhdm9yaXRlID0gX3JlZjMwLmlzRmF2b3JpdGU7CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLCB7CiAgICB0aW1lbGluZUJ5SWQ6ICgwLCBfaGVscGVycy51cGRhdGVUaW1lbGluZUlzRmF2b3JpdGUpKHsKICAgICAgaWQ6IGlkLAogICAgICBpc0Zhdm9yaXRlOiBpc0Zhdm9yaXRlLAogICAgICB0aW1lbGluZUJ5SWQ6IHN0YXRlLnRpbWVsaW5lQnlJZAogICAgfSkKICB9KTsKfSkuY2FzZShfYWN0aW9ucy51cGRhdGVJc0xpdmUsIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZjMxKSB7CiAgdmFyIGlkID0gX3JlZjMxLmlkLAogICAgICBpc0xpdmUgPSBfcmVmMzEuaXNMaXZlOwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgdGltZWxpbmVCeUlkOiAoMCwgX2hlbHBlcnMudXBkYXRlVGltZWxpbmVJc0xpdmUpKHsKICAgICAgaWQ6IGlkLAogICAgICBpc0xpdmU6IGlzTGl2ZSwKICAgICAgdGltZWxpbmVCeUlkOiBzdGF0ZS50aW1lbGluZUJ5SWQKICAgIH0pCiAgfSk7Cn0pLmNhc2UoX2FjdGlvbnMudXBkYXRlS3FsTW9kZSwgZnVuY3Rpb24gKHN0YXRlLCBfcmVmMzIpIHsKICB2YXIgaWQgPSBfcmVmMzIuaWQsCiAgICAgIGtxbE1vZGUgPSBfcmVmMzIua3FsTW9kZTsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgIHRpbWVsaW5lQnlJZDogKDAsIF9oZWxwZXJzLnVwZGF0ZVRpbWVsaW5lS3FsTW9kZSkoewogICAgICBpZDogaWQsCiAgICAgIGtxbE1vZGU6IGtxbE1vZGUsCiAgICAgIHRpbWVsaW5lQnlJZDogc3RhdGUudGltZWxpbmVCeUlkCiAgICB9KQogIH0pOwp9KS5jYXNlKF9hY3Rpb25zLnVwZGF0ZVRpdGxlLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWYzMykgewogIHZhciBpZCA9IF9yZWYzMy5pZCwKICAgICAgdGl0bGUgPSBfcmVmMzMudGl0bGU7CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLCB7CiAgICB0aW1lbGluZUJ5SWQ6ICgwLCBfaGVscGVycy51cGRhdGVUaW1lbGluZVRpdGxlKSh7CiAgICAgIGlkOiBpZCwKICAgICAgdGl0bGU6IHRpdGxlLAogICAgICB0aW1lbGluZUJ5SWQ6IHN0YXRlLnRpbWVsaW5lQnlJZAogICAgfSkKICB9KTsKfSkuY2FzZShfYWN0aW9ucy51cGRhdGVQcm92aWRlcnMsIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZjM0KSB7CiAgdmFyIGlkID0gX3JlZjM0LmlkLAogICAgICBwcm92aWRlcnMgPSBfcmVmMzQucHJvdmlkZXJzOwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgdGltZWxpbmVCeUlkOiAoMCwgX2hlbHBlcnMudXBkYXRlVGltZWxpbmVQcm92aWRlcnMpKHsKICAgICAgaWQ6IGlkLAogICAgICBwcm92aWRlcnM6IHByb3ZpZGVycywKICAgICAgdGltZWxpbmVCeUlkOiBzdGF0ZS50aW1lbGluZUJ5SWQKICAgIH0pCiAgfSk7Cn0pLmNhc2UoX2FjdGlvbnMudXBkYXRlUmFuZ2UsIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZjM1KSB7CiAgdmFyIGlkID0gX3JlZjM1LmlkLAogICAgICBzdGFydCA9IF9yZWYzNS5zdGFydCwKICAgICAgZW5kID0gX3JlZjM1LmVuZDsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgIHRpbWVsaW5lQnlJZDogKDAsIF9oZWxwZXJzLnVwZGF0ZVRpbWVsaW5lUmFuZ2UpKHsKICAgICAgaWQ6IGlkLAogICAgICBzdGFydDogc3RhcnQsCiAgICAgIGVuZDogZW5kLAogICAgICB0aW1lbGluZUJ5SWQ6IHN0YXRlLnRpbWVsaW5lQnlJZAogICAgfSkKICB9KTsKfSkuY2FzZShfYWN0aW9ucy51cGRhdGVTb3J0LCBmdW5jdGlvbiAoc3RhdGUsIF9yZWYzNikgewogIHZhciBpZCA9IF9yZWYzNi5pZCwKICAgICAgc29ydCA9IF9yZWYzNi5zb3J0OwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgdGltZWxpbmVCeUlkOiAoMCwgX2hlbHBlcnMudXBkYXRlVGltZWxpbmVTb3J0KSh7CiAgICAgIGlkOiBpZCwKICAgICAgc29ydDogc29ydCwKICAgICAgdGltZWxpbmVCeUlkOiBzdGF0ZS50aW1lbGluZUJ5SWQKICAgIH0pCiAgfSk7Cn0pLmNhc2UoX2FjdGlvbnMudXBkYXRlRGF0YVByb3ZpZGVyRW5hYmxlZCwgZnVuY3Rpb24gKHN0YXRlLCBfcmVmMzcpIHsKICB2YXIgaWQgPSBfcmVmMzcuaWQsCiAgICAgIGVuYWJsZWQgPSBfcmVmMzcuZW5hYmxlZCwKICAgICAgcHJvdmlkZXJJZCA9IF9yZWYzNy5wcm92aWRlcklkLAogICAgICBhbmRQcm92aWRlcklkID0gX3JlZjM3LmFuZFByb3ZpZGVySWQ7CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLCB7CiAgICB0aW1lbGluZUJ5SWQ6ICgwLCBfaGVscGVycy51cGRhdGVUaW1lbGluZVByb3ZpZGVyRW5hYmxlZCkoewogICAgICBpZDogaWQsCiAgICAgIGVuYWJsZWQ6IGVuYWJsZWQsCiAgICAgIHByb3ZpZGVySWQ6IHByb3ZpZGVySWQsCiAgICAgIHRpbWVsaW5lQnlJZDogc3RhdGUudGltZWxpbmVCeUlkLAogICAgICBhbmRQcm92aWRlcklkOiBhbmRQcm92aWRlcklkCiAgICB9KQogIH0pOwp9KS5jYXNlKF9hY3Rpb25zLnVwZGF0ZURhdGFQcm92aWRlckV4Y2x1ZGVkLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWYzOCkgewogIHZhciBpZCA9IF9yZWYzOC5pZCwKICAgICAgZXhjbHVkZWQgPSBfcmVmMzguZXhjbHVkZWQsCiAgICAgIHByb3ZpZGVySWQgPSBfcmVmMzgucHJvdmlkZXJJZCwKICAgICAgYW5kUHJvdmlkZXJJZCA9IF9yZWYzOC5hbmRQcm92aWRlcklkOwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgdGltZWxpbmVCeUlkOiAoMCwgX2hlbHBlcnMudXBkYXRlVGltZWxpbmVQcm92aWRlckV4Y2x1ZGVkKSh7CiAgICAgIGlkOiBpZCwKICAgICAgZXhjbHVkZWQ6IGV4Y2x1ZGVkLAogICAgICBwcm92aWRlcklkOiBwcm92aWRlcklkLAogICAgICB0aW1lbGluZUJ5SWQ6IHN0YXRlLnRpbWVsaW5lQnlJZCwKICAgICAgYW5kUHJvdmlkZXJJZDogYW5kUHJvdmlkZXJJZAogICAgfSkKICB9KTsKfSkuY2FzZShfYWN0aW9ucy5kYXRhUHJvdmlkZXJFZGl0ZWQsIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZjM5KSB7CiAgdmFyIGFuZFByb3ZpZGVySWQgPSBfcmVmMzkuYW5kUHJvdmlkZXJJZCwKICAgICAgZXhjbHVkZWQgPSBfcmVmMzkuZXhjbHVkZWQsCiAgICAgIGZpZWxkID0gX3JlZjM5LmZpZWxkLAogICAgICBpZCA9IF9yZWYzOS5pZCwKICAgICAgb3BlcmF0b3IgPSBfcmVmMzkub3BlcmF0b3IsCiAgICAgIHByb3ZpZGVySWQgPSBfcmVmMzkucHJvdmlkZXJJZCwKICAgICAgdmFsdWUgPSBfcmVmMzkudmFsdWU7CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLCB7CiAgICB0aW1lbGluZUJ5SWQ6ICgwLCBfaGVscGVycy51cGRhdGVUaW1lbGluZVByb3ZpZGVyUHJvcGVydGllcykoewogICAgICBhbmRQcm92aWRlcklkOiBhbmRQcm92aWRlcklkLAogICAgICBleGNsdWRlZDogZXhjbHVkZWQsCiAgICAgIGZpZWxkOiBmaWVsZCwKICAgICAgaWQ6IGlkLAogICAgICBvcGVyYXRvcjogb3BlcmF0b3IsCiAgICAgIHByb3ZpZGVySWQ6IHByb3ZpZGVySWQsCiAgICAgIHRpbWVsaW5lQnlJZDogc3RhdGUudGltZWxpbmVCeUlkLAogICAgICB2YWx1ZTogdmFsdWUKICAgIH0pCiAgfSk7Cn0pLmNhc2UoX2FjdGlvbnMudXBkYXRlRGF0YVByb3ZpZGVyS3FsUXVlcnksIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZjQwKSB7CiAgdmFyIGlkID0gX3JlZjQwLmlkLAogICAgICBrcWxRdWVyeSA9IF9yZWY0MC5rcWxRdWVyeSwKICAgICAgcHJvdmlkZXJJZCA9IF9yZWY0MC5wcm92aWRlcklkOwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgdGltZWxpbmVCeUlkOiAoMCwgX2hlbHBlcnMudXBkYXRlVGltZWxpbmVQcm92aWRlcktxbFF1ZXJ5KSh7CiAgICAgIGlkOiBpZCwKICAgICAga3FsUXVlcnk6IGtxbFF1ZXJ5LAogICAgICBwcm92aWRlcklkOiBwcm92aWRlcklkLAogICAgICB0aW1lbGluZUJ5SWQ6IHN0YXRlLnRpbWVsaW5lQnlJZAogICAgfSkKICB9KTsKfSkuY2FzZShfYWN0aW9ucy51cGRhdGVJdGVtc1BlclBhZ2UsIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZjQxKSB7CiAgdmFyIGlkID0gX3JlZjQxLmlkLAogICAgICBpdGVtc1BlclBhZ2UgPSBfcmVmNDEuaXRlbXNQZXJQYWdlOwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgdGltZWxpbmVCeUlkOiAoMCwgX2hlbHBlcnMudXBkYXRlVGltZWxpbmVJdGVtc1BlclBhZ2UpKHsKICAgICAgaWQ6IGlkLAogICAgICBpdGVtc1BlclBhZ2U6IGl0ZW1zUGVyUGFnZSwKICAgICAgdGltZWxpbmVCeUlkOiBzdGF0ZS50aW1lbGluZUJ5SWQKICAgIH0pCiAgfSk7Cn0pLmNhc2UoX2FjdGlvbnMudXBkYXRlUGFnZUluZGV4LCBmdW5jdGlvbiAoc3RhdGUsIF9yZWY0MikgewogIHZhciBpZCA9IF9yZWY0Mi5pZCwKICAgICAgYWN0aXZlUGFnZSA9IF9yZWY0Mi5hY3RpdmVQYWdlOwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgdGltZWxpbmVCeUlkOiAoMCwgX2hlbHBlcnMudXBkYXRlVGltZWxpbmVQYWdlSW5kZXgpKHsKICAgICAgaWQ6IGlkLAogICAgICBhY3RpdmVQYWdlOiBhY3RpdmVQYWdlLAogICAgICB0aW1lbGluZUJ5SWQ6IHN0YXRlLnRpbWVsaW5lQnlJZAogICAgfSkKICB9KTsKfSkuY2FzZShfYWN0aW9ucy51cGRhdGVJdGVtc1BlclBhZ2VPcHRpb25zLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWY0MykgewogIHZhciBpZCA9IF9yZWY0My5pZCwKICAgICAgaXRlbXNQZXJQYWdlT3B0aW9ucyA9IF9yZWY0My5pdGVtc1BlclBhZ2VPcHRpb25zOwogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgdGltZWxpbmVCeUlkOiAoMCwgX2hlbHBlcnMudXBkYXRlVGltZWxpbmVQZXJQYWdlT3B0aW9ucykoewogICAgICBpZDogaWQsCiAgICAgIGl0ZW1zUGVyUGFnZU9wdGlvbnM6IGl0ZW1zUGVyUGFnZU9wdGlvbnMsCiAgICAgIHRpbWVsaW5lQnlJZDogc3RhdGUudGltZWxpbmVCeUlkCiAgICB9KQogIH0pOwp9KS5jYXNlKF9hY3Rpb25zLnVwZGF0ZUhpZ2hsaWdodGVkRHJvcEFuZFByb3ZpZGVySWQsIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZjQ0KSB7CiAgdmFyIGlkID0gX3JlZjQ0LmlkLAogICAgICBwcm92aWRlcklkID0gX3JlZjQ0LnByb3ZpZGVySWQ7CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLCB7CiAgICB0aW1lbGluZUJ5SWQ6ICgwLCBfaGVscGVycy51cGRhdGVIaWdobGlnaHRlZERyb3BBbmRQcm92aWRlcikoewogICAgICBpZDogaWQsCiAgICAgIHByb3ZpZGVySWQ6IHByb3ZpZGVySWQsCiAgICAgIHRpbWVsaW5lQnlJZDogc3RhdGUudGltZWxpbmVCeUlkCiAgICB9KQogIH0pOwp9KS5jYXNlKF9hY3Rpb25zLnVwZGF0ZUF1dG9TYXZlTXNnLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWY0NSkgewogIHZhciB0aW1lbGluZUlkID0gX3JlZjQ1LnRpbWVsaW5lSWQsCiAgICAgIG5ld1RpbWVsaW5lTW9kZWwgPSBfcmVmNDUubmV3VGltZWxpbmVNb2RlbDsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgIGF1dG9TYXZlZFdhcm5pbmdNc2c6IHsKICAgICAgdGltZWxpbmVJZDogdGltZWxpbmVJZCwKICAgICAgbmV3VGltZWxpbmVNb2RlbDogbmV3VGltZWxpbmVNb2RlbAogICAgfQogIH0pOwp9KS5jYXNlKF9hY3Rpb25zLnNob3dDYWxsT3V0VW5hdXRob3JpemVkTXNnLCBmdW5jdGlvbiAoc3RhdGUpIHsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgIHNob3dDYWxsT3V0VW5hdXRob3JpemVkTXNnOiB0cnVlCiAgfSk7Cn0pLmNhc2UoX2FjdGlvbnMuc2V0U2F2ZWRRdWVyeUlkLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWY0NikgewogIHZhciBpZCA9IF9yZWY0Ni5pZCwKICAgICAgc2F2ZWRRdWVyeUlkID0gX3JlZjQ2LnNhdmVkUXVlcnlJZDsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgIHRpbWVsaW5lQnlJZDogKDAsIF9oZWxwZXJzLnVwZGF0ZVNhdmVkUXVlcnkpKHsKICAgICAgaWQ6IGlkLAogICAgICBzYXZlZFF1ZXJ5SWQ6IHNhdmVkUXVlcnlJZCwKICAgICAgdGltZWxpbmVCeUlkOiBzdGF0ZS50aW1lbGluZUJ5SWQKICAgIH0pCiAgfSk7Cn0pLmNhc2UoX2FjdGlvbnMuc2V0RmlsdGVycywgZnVuY3Rpb24gKHN0YXRlLCBfcmVmNDcpIHsKICB2YXIgaWQgPSBfcmVmNDcuaWQsCiAgICAgIGZpbHRlcnMgPSBfcmVmNDcuZmlsdGVyczsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgIHRpbWVsaW5lQnlJZDogKDAsIF9oZWxwZXJzLnVwZGF0ZUZpbHRlcnMpKHsKICAgICAgaWQ6IGlkLAogICAgICBmaWx0ZXJzOiBmaWx0ZXJzLAogICAgICB0aW1lbGluZUJ5SWQ6IHN0YXRlLnRpbWVsaW5lQnlJZAogICAgfSkKICB9KTsKfSkuYnVpbGQoKTsKZXhwb3J0cy50aW1lbGluZVJlZHVjZXIgPSB0aW1lbGluZVJlZHVjZXI7"},null]}