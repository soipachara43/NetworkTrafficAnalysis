{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/plugins/home/public/application/components/tutorial/tutorial.js","dependencies":[{"path":"src/plugins/home/public/application/components/tutorial/tutorial.js","mtime":1589249550855},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlR1dG9yaWFsID0gdm9pZCAwOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9wcm9wVHlwZXMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInByb3AtdHlwZXMiKSk7Cgp2YXIgX2Zvb3RlciA9IHJlcXVpcmUoIi4vZm9vdGVyIik7Cgp2YXIgX2ludHJvZHVjdGlvbiA9IHJlcXVpcmUoIi4vaW50cm9kdWN0aW9uIik7Cgp2YXIgX2luc3RydWN0aW9uX3NldCA9IHJlcXVpcmUoIi4vaW5zdHJ1Y3Rpb25fc2V0Iik7Cgp2YXIgX3NhdmVkX29iamVjdHNfaW5zdGFsbGVyID0gcmVxdWlyZSgiLi9zYXZlZF9vYmplY3RzX2luc3RhbGxlciIpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBTdGF0dXNDaGVja1N0YXRlcyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoIi4vc3RhdHVzX2NoZWNrX3N0YXRlcyIpKTsKCnZhciBfcmVhY3QyID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfa2liYW5hX3NlcnZpY2VzID0gcmVxdWlyZSgiLi4vLi4va2liYW5hX3NlcnZpY2VzIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7IHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OyBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsgfSBlbHNlIHsgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCnZhciBJTlNUUlVDVElPTlNfVFlQRSA9IHsKICBFTEFTVElDX0NMT1VEOiAnZWxhc3RpY0Nsb3VkJywKICBPTl9QUkVNOiAnb25QcmVtJywKICBPTl9QUkVNX0VMQVNUSUNfQ0xPVUQ6ICdvblByZW1FbGFzdGljQ2xvdWQnCn07Cgp2YXIgaG9tZVRpdGxlID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2hvbWUuYnJlYWRjcnVtYnMuaG9tZVRpdGxlJywgewogIGRlZmF1bHRNZXNzYWdlOiAnSG9tZScKfSk7Cgp2YXIgYWRkRGF0YVRpdGxlID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2hvbWUuYnJlYWRjcnVtYnMuYWRkRGF0YVRpdGxlJywgewogIGRlZmF1bHRNZXNzYWdlOiAnQWRkIGRhdGEnCn0pOwoKdmFyIFR1dG9yaWFsVWkgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7CiAgX2luaGVyaXRzKFR1dG9yaWFsVWksIF9SZWFjdCRDb21wb25lbnQpOwoKICBmdW5jdGlvbiBUdXRvcmlhbFVpKHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFR1dG9yaWFsVWkpOwoKICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKFR1dG9yaWFsVWkpLmNhbGwodGhpcywgcHJvcHMpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJnZXRJbnN0cnVjdGlvbnMiLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghX3RoaXMuc3RhdGUudHV0b3JpYWwpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgaW5zdHJ1Y3Rpb25TZXRzOiBbXQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHN3aXRjaCAoX3RoaXMuc3RhdGUudmlzaWJsZUluc3RydWN0aW9ucykgewogICAgICAgIGNhc2UgSU5TVFJVQ1RJT05TX1RZUEUuRUxBU1RJQ19DTE9VRDoKICAgICAgICAgIHJldHVybiBfdGhpcy5zdGF0ZS50dXRvcmlhbC5lbGFzdGljQ2xvdWQ7CgogICAgICAgIGNhc2UgSU5TVFJVQ1RJT05TX1RZUEUuT05fUFJFTToKICAgICAgICAgIHJldHVybiBfdGhpcy5zdGF0ZS50dXRvcmlhbC5vblByZW07CgogICAgICAgIGNhc2UgSU5TVFJVQ1RJT05TX1RZUEUuT05fUFJFTV9FTEFTVElDX0NMT1VEOgogICAgICAgICAgcmV0dXJuIF90aGlzLnN0YXRlLnR1dG9yaWFsLm9uUHJlbUVsYXN0aWNDbG91ZDsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihfdGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgICBpZDogJ2hvbWUudHV0b3JpYWwudW5oYW5kbGVkSW5zdHJ1Y3Rpb25UeXBlRXJyb3JEZXNjcmlwdGlvbicsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVW5oYW5kbGVkIGluc3RydWN0aW9uIHR5cGUge3Zpc2libGVJbnN0cnVjdGlvbnN9JwogICAgICAgICAgfSwgewogICAgICAgICAgICB2aXNpYmxlSW5zdHJ1Y3Rpb25zOiBfdGhpcy5zdGF0ZS52aXNpYmxlSW5zdHJ1Y3Rpb25zCiAgICAgICAgICB9KSk7CiAgICAgIH0KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImdldEluc3RydWN0aW9uU2V0cyIsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzLmdldEluc3RydWN0aW9ucygpLmluc3RydWN0aW9uU2V0czsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImluaXRJbnN0cnVjdGlvbnNTdGF0ZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGluc3RydWN0aW9ucyA9IF90aGlzLmdldEluc3RydWN0aW9ucygpOwoKICAgICAgdmFyIHBhcmFtVmFsdWVzID0ge307CgogICAgICBpZiAoaW5zdHJ1Y3Rpb25zLnBhcmFtcykgewogICAgICAgIGluc3RydWN0aW9ucy5wYXJhbXMuZm9yRWFjaChmdW5jdGlvbiAocGFyYW0pIHsKICAgICAgICAgIHBhcmFtVmFsdWVzW3BhcmFtLmlkXSA9IHBhcmFtLmRlZmF1bHRWYWx1ZTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdmFyIHN0YXR1c0NoZWNrU3RhdGVzID0gbmV3IEFycmF5KGluc3RydWN0aW9ucy5pbnN0cnVjdGlvblNldHMubGVuZ3RoKS5maWxsKFN0YXR1c0NoZWNrU3RhdGVzLk5PVF9DSEVDS0VEKTsKCiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBwYXJhbVZhbHVlczogcGFyYW1WYWx1ZXMsCiAgICAgICAgc3RhdHVzQ2hlY2tTdGF0ZXM6IHN0YXR1c0NoZWNrU3RhdGVzCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic2V0VmlzaWJsZUluc3RydWN0aW9ucyIsIGZ1bmN0aW9uIChpbnN0cnVjdGlvbnNUeXBlKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICB2aXNpYmxlSW5zdHJ1Y3Rpb25zOiBpbnN0cnVjdGlvbnNUeXBlCiAgICAgIH0sIF90aGlzLmluaXRJbnN0cnVjdGlvbnNTdGF0ZSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzZXRQYXJhbWV0ZXIiLCBmdW5jdGlvbiAocGFyYW1JZCwgbmV3VmFsdWUpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHByZXZpb3VzU3RhdGUpIHsKICAgICAgICB2YXIgcGFyYW1WYWx1ZXMgPSBfbG9kYXNoLmRlZmF1bHQuY2xvbmVEZWVwKHByZXZpb3VzU3RhdGUucGFyYW1WYWx1ZXMpOwoKICAgICAgICBwYXJhbVZhbHVlc1twYXJhbUlkXSA9IG5ld1ZhbHVlOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICBwYXJhbVZhbHVlczogcGFyYW1WYWx1ZXMKICAgICAgICB9OwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImNoZWNrSW5zdHJ1Y3Rpb25TZXRTdGF0dXMiLAogICAgLyojX19QVVJFX18qLwogICAgZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoaW5zdHJ1Y3Rpb25TZXRJbmRleCkgewogICAgICAgIHZhciBpbnN0cnVjdGlvblNldCwgZXNIaXRzQ2hlY2tDb25maWcsIHN0YXR1c0NoZWNrU3RhdGU7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25TZXQgPSBfdGhpcy5nZXRJbnN0cnVjdGlvblNldHMoKVtpbnN0cnVjdGlvblNldEluZGV4XTsKICAgICAgICAgICAgICAgIGVzSGl0c0NoZWNrQ29uZmlnID0gX2xvZGFzaC5kZWZhdWx0LmdldChpbnN0cnVjdGlvblNldCwgInN0YXR1c0NoZWNrLmVzSGl0c0NoZWNrIik7CgogICAgICAgICAgICAgICAgaWYgKCFlc0hpdHNDaGVja0NvbmZpZykgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZmV0Y2hFc0hpdHNTdGF0dXMoZXNIaXRzQ2hlY2tDb25maWcpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBzdGF0dXNDaGVja1N0YXRlID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZShmdW5jdGlvbiAocHJldlN0YXRlKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ2hlY2tTdGF0ZXM6IF9vYmplY3RTcHJlYWQoe30sIHByZXZTdGF0ZS5zdGF0dXNDaGVja1N0YXRlcywgX2RlZmluZVByb3BlcnR5KHt9LCBpbnN0cnVjdGlvblNldEluZGV4LCBzdGF0dXNDaGVja1N0YXRlKSkKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImZldGNoRXNIaXRzU3RhdHVzIiwKICAgIC8qI19fUFVSRV9fKi8KICAgIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoZXNIaXRzQ2hlY2tDb25maWcpIHsKICAgICAgICB2YXIgc2VhcmNoSGVhZGVyLCBzZWFyY2hCb2R5LCByZXNwb25zZSwgcmVzdWx0cywgbnVtSGl0czsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc2VhcmNoSGVhZGVyID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICBpbmRleDogZXNIaXRzQ2hlY2tDb25maWcuaW5kZXgKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgc2VhcmNoQm9keSA9IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgcXVlcnk6IGVzSGl0c0NoZWNrQ29uZmlnLnF1ZXJ5LAogICAgICAgICAgICAgICAgICBzaXplOiAxCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaChfdGhpcy5wcm9wcy5hZGRCYXNlUGF0aCgnL2VsYXN0aWNzZWFyY2gvX21zZWFyY2gnKSwgewogICAgICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgICAgICAgICAgICAgYm9keTogIiIuY29uY2F0KHNlYXJjaEhlYWRlciwgIlxuIikuY29uY2F0KHNlYXJjaEJvZHksICJcbiIpLAogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgYWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAgICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi94LW5kanNvbicsCiAgICAgICAgICAgICAgICAgICAgJ2tibi14c3JmJzogJ2tpYmFuYScKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6ICdzYW1lLW9yaWdpbicKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKHJlc3BvbnNlLnN0YXR1cyA+IDMwMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgU3RhdHVzQ2hlY2tTdGF0ZXMuRVJST1IpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICByZXN1bHRzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBudW1IaXRzID0gX2xvZGFzaC5kZWZhdWx0LmdldChyZXN1bHRzLCAncmVzcG9uc2VzLlswXS5oaXRzLmhpdHMubGVuZ3RoJywgMCk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgbnVtSGl0cyA9PT0gMCA/IFN0YXR1c0NoZWNrU3RhdGVzLk5PX0RBVEEgOiBTdGF0dXNDaGVja1N0YXRlcy5IQVNfREFUQSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gKF94MikgewogICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJyZW5kZXJJbnN0cnVjdGlvblNldHNUb2dnbGUiLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghX3RoaXMucHJvcHMuaXNDbG91ZEVuYWJsZWQgJiYgX3RoaXMuc3RhdGUudHV0b3JpYWwub25QcmVtRWxhc3RpY0Nsb3VkKSB7CiAgICAgICAgdmFyIHNlbGZNYW5hZ2VkTGFiZWwgPSBfdGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgaWQ6ICdob21lLnR1dG9yaWFsLnNlbGZNYW5hZ2VkQnV0dG9uTGFiZWwnLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTZWxmIG1hbmFnZWQnCiAgICAgICAgfSk7CgogICAgICAgIHZhciBjbG91ZExhYmVsID0gX3RoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsKICAgICAgICAgIGlkOiAnaG9tZS50dXRvcmlhbC5lbGFzdGljQ2xvdWRCdXR0b25MYWJlbCcsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0VsYXN0aWMgQ2xvdWQnCiAgICAgICAgfSk7CgogICAgICAgIHZhciByYWRpb0J1dHRvbnMgPSBbewogICAgICAgICAgaWQ6IElOU1RSVUNUSU9OU19UWVBFLk9OX1BSRU0sCiAgICAgICAgICBsYWJlbDogc2VsZk1hbmFnZWRMYWJlbAogICAgICAgIH0sIHsKICAgICAgICAgIGlkOiBJTlNUUlVDVElPTlNfVFlQRS5PTl9QUkVNX0VMQVNUSUNfQ0xPVUQsCiAgICAgICAgICBsYWJlbDogY2xvdWRMYWJlbAogICAgICAgIH1dOwogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCB7CiAgICAgICAgICBqdXN0aWZ5Q29udGVudDogImNlbnRlciIKICAgICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICAgIGdyb3c6IGZhbHNlCiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbkdyb3VwLCB7CiAgICAgICAgICBvcHRpb25zOiByYWRpb0J1dHRvbnMsCiAgICAgICAgICBpZFNlbGVjdGVkOiBfdGhpcy5zdGF0ZS52aXNpYmxlSW5zdHJ1Y3Rpb25zLAogICAgICAgICAgb25DaGFuZ2U6IF90aGlzLnNldFZpc2libGVJbnN0cnVjdGlvbnMsCiAgICAgICAgICBjb2xvcjogInByaW1hcnkiCiAgICAgICAgfSkpKTsKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAib25TdGF0dXNDaGVjayIsIGZ1bmN0aW9uIChpbnN0cnVjdGlvblNldEluZGV4KSB7CiAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uIChwcmV2U3RhdGUpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgc3RhdHVzQ2hlY2tTdGF0ZXM6IF9vYmplY3RTcHJlYWQoe30sIHByZXZTdGF0ZS5zdGF0dXNDaGVja1N0YXRlcywgX2RlZmluZVByb3BlcnR5KHt9LCBpbnN0cnVjdGlvblNldEluZGV4LCBTdGF0dXNDaGVja1N0YXRlcy5GRVRDSElORykpCiAgICAgICAgfTsKICAgICAgfSwgX3RoaXMuY2hlY2tJbnN0cnVjdGlvblNldFN0YXR1cy5iaW5kKG51bGwsIGluc3RydWN0aW9uU2V0SW5kZXgpKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInJlbmRlckluc3RydWN0aW9uU2V0cyIsIGZ1bmN0aW9uIChpbnN0cnVjdGlvbnMpIHsKICAgICAgdmFyIG9mZnNldCA9IDE7CiAgICAgIHJldHVybiBpbnN0cnVjdGlvbnMuaW5zdHJ1Y3Rpb25TZXRzLm1hcChmdW5jdGlvbiAoaW5zdHJ1Y3Rpb25TZXQsIGluZGV4KSB7CiAgICAgICAgdmFyIGN1cnJlbnRPZmZzZXQgPSBvZmZzZXQ7CiAgICAgICAgb2Zmc2V0ICs9IGluc3RydWN0aW9uU2V0Lmluc3RydWN0aW9uVmFyaWFudHNbMF0uaW5zdHJ1Y3Rpb25zLmxlbmd0aDsKICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfaW5zdHJ1Y3Rpb25fc2V0Lkluc3RydWN0aW9uU2V0LCB7CiAgICAgICAgICB0aXRsZTogaW5zdHJ1Y3Rpb25TZXQudGl0bGUsCiAgICAgICAgICBpbnN0cnVjdGlvblZhcmlhbnRzOiBpbnN0cnVjdGlvblNldC5pbnN0cnVjdGlvblZhcmlhbnRzLAogICAgICAgICAgc3RhdHVzQ2hlY2tDb25maWc6IGluc3RydWN0aW9uU2V0LnN0YXR1c0NoZWNrLAogICAgICAgICAgc3RhdHVzQ2hlY2tTdGF0ZTogX3RoaXMuc3RhdGUuc3RhdHVzQ2hlY2tTdGF0ZXNbaW5kZXhdLAogICAgICAgICAgb25TdGF0dXNDaGVjazogZnVuY3Rpb24gb25TdGF0dXNDaGVjaygpIHsKICAgICAgICAgICAgX3RoaXMub25TdGF0dXNDaGVjayhpbmRleCk7CiAgICAgICAgICB9LAogICAgICAgICAgb2Zmc2V0OiBjdXJyZW50T2Zmc2V0LAogICAgICAgICAgcGFyYW1zOiBpbnN0cnVjdGlvbnMucGFyYW1zLAogICAgICAgICAgcGFyYW1WYWx1ZXM6IF90aGlzLnN0YXRlLnBhcmFtVmFsdWVzLAogICAgICAgICAgc2V0UGFyYW1ldGVyOiBfdGhpcy5zZXRQYXJhbWV0ZXIsCiAgICAgICAgICByZXBsYWNlVGVtcGxhdGVTdHJpbmdzOiBfdGhpcy5wcm9wcy5yZXBsYWNlVGVtcGxhdGVTdHJpbmdzLAogICAgICAgICAga2V5OiBpbmRleAogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInJlbmRlclNhdmVkT2JqZWN0c0luc3RhbGxlciIsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCFfdGhpcy5zdGF0ZS50dXRvcmlhbC5zYXZlZE9iamVjdHMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9zYXZlZF9vYmplY3RzX2luc3RhbGxlci5TYXZlZE9iamVjdHNJbnN0YWxsZXIsIHsKICAgICAgICBidWxrQ3JlYXRlOiBfdGhpcy5wcm9wcy5idWxrQ3JlYXRlLAogICAgICAgIHNhdmVkT2JqZWN0czogX3RoaXMuc3RhdGUudHV0b3JpYWwuc2F2ZWRPYmplY3RzLAogICAgICAgIGluc3RhbGxNc2c6IF90aGlzLnN0YXRlLnR1dG9yaWFsLnNhdmVkT2JqZWN0c0luc3RhbGxNc2cKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJyZW5kZXJGb290ZXIiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBsYWJlbDsKICAgICAgdmFyIHVybDsKCiAgICAgIGlmIChfbG9kYXNoLmRlZmF1bHQuaGFzKF90aGlzLnN0YXRlLCAndHV0b3JpYWwuYXJ0aWZhY3RzLmFwcGxpY2F0aW9uJykpIHsKICAgICAgICBsYWJlbCA9IF90aGlzLnN0YXRlLnR1dG9yaWFsLmFydGlmYWN0cy5hcHBsaWNhdGlvbi5sYWJlbDsKICAgICAgICB1cmwgPSBfdGhpcy5wcm9wcy5hZGRCYXNlUGF0aChfdGhpcy5zdGF0ZS50dXRvcmlhbC5hcnRpZmFjdHMuYXBwbGljYXRpb24ucGF0aCk7CiAgICAgIH0gZWxzZSBpZiAoX2xvZGFzaC5kZWZhdWx0LmhhcyhfdGhpcy5zdGF0ZSwgJ3R1dG9yaWFsLmFydGlmYWN0cy5kYXNoYm9hcmRzJykpIHsKICAgICAgICB2YXIgb3ZlcnZpZXdEYXNoYm9hcmQgPSBfdGhpcy5zdGF0ZS50dXRvcmlhbC5hcnRpZmFjdHMuZGFzaGJvYXJkcy5maW5kKGZ1bmN0aW9uIChkYXNoYm9hcmQpIHsKICAgICAgICAgIHJldHVybiBkYXNoYm9hcmQuaXNPdmVydmlldzsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKG92ZXJ2aWV3RGFzaGJvYXJkKSB7CiAgICAgICAgICBsYWJlbCA9IG92ZXJ2aWV3RGFzaGJvYXJkLmxpbmtMYWJlbDsKICAgICAgICAgIHVybCA9IF90aGlzLnByb3BzLmFkZEJhc2VQYXRoKCIvYXBwL2tpYmFuYSMvZGFzaGJvYXJkLyIuY29uY2F0KG92ZXJ2aWV3RGFzaGJvYXJkLmlkKSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodXJsICYmIGxhYmVsKSB7CiAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2Zvb3Rlci5Gb290ZXIsIHsKICAgICAgICAgIGxhYmVsOiBsYWJlbCwKICAgICAgICAgIHVybDogdXJsCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwoKICAgIF90aGlzLnN0YXRlID0gewogICAgICBub3RGb3VuZDogZmFsc2UsCiAgICAgIHBhcmFtVmFsdWVzOiB7fSwKICAgICAgc3RhdHVzQ2hlY2tTdGF0ZXM6IFtdLAogICAgICB0dXRvcmlhbDogbnVsbAogICAgfTsKCiAgICBpZiAocHJvcHMuaXNDbG91ZEVuYWJsZWQpIHsKICAgICAgX3RoaXMuc3RhdGUudmlzaWJsZUluc3RydWN0aW9ucyA9IElOU1RSVUNUSU9OU19UWVBFLkVMQVNUSUNfQ0xPVUQ7CiAgICB9IGVsc2UgewogICAgICBfdGhpcy5zdGF0ZS52aXNpYmxlSW5zdHJ1Y3Rpb25zID0gSU5TVFJVQ1RJT05TX1RZUEUuT05fUFJFTTsKICAgIH0KCiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoVHV0b3JpYWxVaSwgW3sKICAgIGtleTogIlVOU0FGRV9jb21wb25lbnRXaWxsTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIFVOU0FGRV9jb21wb25lbnRXaWxsTW91bnQoKSB7CiAgICAgIHRoaXMuX2lzTW91bnRlZCA9IHRydWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50V2lsbFVubW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkgewogICAgICB0aGlzLl9pc01vdW50ZWQgPSBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnREaWRNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2NvbXBvbmVudERpZE1vdW50ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIHR1dG9yaWFsOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5nZXRUdXRvcmlhbCh0aGlzLnByb3BzLnR1dG9yaWFsSWQpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICB0dXRvcmlhbCA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc01vdW50ZWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGlmICh0dXRvcmlhbCkgewogICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3Qvbm8tZGlkLW1vdW50LXNldC1zdGF0ZQogICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICB0dXRvcmlhbDogdHV0b3JpYWwKICAgICAgICAgICAgICAgICAgfSwgdGhpcy5pbml0SW5zdHJ1Y3Rpb25zU3RhdGUpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L25vLWRpZC1tb3VudC1zZXQtc3RhdGUKICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgbm90Rm91bmQ6IHRydWUKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgKDAsIF9raWJhbmFfc2VydmljZXMuZ2V0U2VydmljZXMpKCkuY2hyb21lLnNldEJyZWFkY3J1bWJzKFt7CiAgICAgICAgICAgICAgICAgIHRleHQ6IGhvbWVUaXRsZSwKICAgICAgICAgICAgICAgICAgaHJlZjogJyMvaG9tZScKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgdGV4dDogYWRkRGF0YVRpdGxlLAogICAgICAgICAgICAgICAgICBocmVmOiAnIy9ob21lL3R1dG9yaWFsX2RpcmVjdG9yeScKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgdGV4dDogdHV0b3JpYWwgPyB0dXRvcmlhbC5uYW1lIDogdGhpcy5wcm9wcy50dXRvcmlhbElkCiAgICAgICAgICAgICAgICB9XSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICAgIHJldHVybiBfY29tcG9uZW50RGlkTW91bnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGNvbXBvbmVudERpZE1vdW50OwogICAgfSgpCiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBjb250ZW50OwoKICAgICAgaWYgKHRoaXMuc3RhdGUubm90Rm91bmQpIHsKICAgICAgICBjb250ZW50ID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgY2xhc3NOYW1lOiAiaG9tVHV0b3JpYWxfX25vdEZvdW5kUGFuZWwiCiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRleHQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJob21lLnR1dG9yaWFsLm5vVHV0b3JpYWxMYWJlbCIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlVuYWJsZSB0byBmaW5kIHR1dG9yaWFsIHt0dXRvcmlhbElkfSIsCiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgdHV0b3JpYWxJZDogdGhpcy5wcm9wcy50dXRvcmlhbElkCiAgICAgICAgICB9CiAgICAgICAgfSkpKSk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnN0YXRlLnR1dG9yaWFsKSB7CiAgICAgICAgdmFyIHByZXZpZXdVcmw7CgogICAgICAgIGlmICh0aGlzLnN0YXRlLnR1dG9yaWFsLnByZXZpZXdJbWFnZVBhdGgpIHsKICAgICAgICAgIHByZXZpZXdVcmwgPSB0aGlzLnByb3BzLmFkZEJhc2VQYXRoKHRoaXMuc3RhdGUudHV0b3JpYWwucHJldmlld0ltYWdlUGF0aCk7CiAgICAgICAgfQoKICAgICAgICB2YXIgZXhwb3J0ZWRGaWVsZHNVcmw7CgogICAgICAgIGlmIChfbG9kYXNoLmRlZmF1bHQuaGFzKHRoaXMuc3RhdGUsICd0dXRvcmlhbC5hcnRpZmFjdHMuZXhwb3J0ZWRGaWVsZHMnKSkgewogICAgICAgICAgZXhwb3J0ZWRGaWVsZHNVcmwgPSB0aGlzLnByb3BzLnJlcGxhY2VUZW1wbGF0ZVN0cmluZ3ModGhpcy5zdGF0ZS50dXRvcmlhbC5hcnRpZmFjdHMuZXhwb3J0ZWRGaWVsZHMuZG9jdW1lbnRhdGlvblVybCk7CiAgICAgICAgfQoKICAgICAgICB2YXIgaWNvbiA9IHRoaXMuc3RhdGUudHV0b3JpYWwuZXVpSWNvblR5cGU7CgogICAgICAgIGlmIChpY29uICYmIGljb24uaW5jbHVkZXMoJy8nKSkgewogICAgICAgICAgaWNvbiA9IHRoaXMucHJvcHMuYWRkQmFzZVBhdGgoaWNvbik7CiAgICAgICAgfQoKICAgICAgICB2YXIgaW5zdHJ1Y3Rpb25zID0gdGhpcy5nZXRJbnN0cnVjdGlvbnMoKTsKICAgICAgICBjb250ZW50ID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfaW50cm9kdWN0aW9uLkludHJvZHVjdGlvbiwgewogICAgICAgICAgdGl0bGU6IHRoaXMuc3RhdGUudHV0b3JpYWwubmFtZSwKICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLnByb3BzLnJlcGxhY2VUZW1wbGF0ZVN0cmluZ3ModGhpcy5zdGF0ZS50dXRvcmlhbC5sb25nRGVzY3JpcHRpb24pLAogICAgICAgICAgcHJldmlld1VybDogcHJldmlld1VybCwKICAgICAgICAgIGV4cG9ydGVkRmllbGRzVXJsOiBleHBvcnRlZEZpZWxkc1VybCwKICAgICAgICAgIGljb25UeXBlOiBpY29uLAogICAgICAgICAgaXNCZXRhOiB0aGlzLnN0YXRlLnR1dG9yaWFsLmlzQmV0YQogICAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCBudWxsKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgY2xhc3NOYW1lOiAiZXVpLXRleHRDZW50ZXIiCiAgICAgICAgfSwgdGhpcy5yZW5kZXJJbnN0cnVjdGlvblNldHNUb2dnbGUoKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIG51bGwpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpUGFuZWwsIHsKICAgICAgICAgIHBhZGRpbmdTaXplOiAibCIKICAgICAgICB9LCB0aGlzLnJlbmRlckluc3RydWN0aW9uU2V0cyhpbnN0cnVjdGlvbnMpLCB0aGlzLnJlbmRlclNhdmVkT2JqZWN0c0luc3RhbGxlcigpLCB0aGlzLnJlbmRlckZvb3RlcigpKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpUGFnZSwgewogICAgICAgIHJlc3RyaWN0V2lkdGg6IDEyMDAKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVBhZ2VCb2R5LCBudWxsLCBjb250ZW50KSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gVHV0b3JpYWxVaTsKfShfcmVhY3QuZGVmYXVsdC5Db21wb25lbnQpOwoKVHV0b3JpYWxVaS5wcm9wVHlwZXMgPSB7CiAgYWRkQmFzZVBhdGg6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQsCiAgaXNDbG91ZEVuYWJsZWQ6IF9wcm9wVHlwZXMuZGVmYXVsdC5ib29sLmlzUmVxdWlyZWQsCiAgZ2V0VHV0b3JpYWw6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQsCiAgcmVwbGFjZVRlbXBsYXRlU3RyaW5nczogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMuaXNSZXF1aXJlZCwKICB0dXRvcmlhbElkOiBfcHJvcFR5cGVzLmRlZmF1bHQuc3RyaW5nLmlzUmVxdWlyZWQsCiAgYnVsa0NyZWF0ZTogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMuaXNSZXF1aXJlZAp9Owp2YXIgVHV0b3JpYWwgPSAoMCwgX3JlYWN0Mi5pbmplY3RJMThuKShUdXRvcmlhbFVpKTsKZXhwb3J0cy5UdXRvcmlhbCA9IFR1dG9yaWFsOw=="},null]}