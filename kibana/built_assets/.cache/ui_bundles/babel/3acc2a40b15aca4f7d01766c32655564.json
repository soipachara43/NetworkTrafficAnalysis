{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/vis_type_timeseries/public/components/vis_types/timeseries/vis.js","dependencies":[{"path":"src/legacy/core_plugins/vis_type_timeseries/public/components/vis_types/timeseries/vis.js","mtime":1589249550050},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlRpbWVzZXJpZXNWaXN1YWxpemF0aW9uID0gdm9pZCAwOwoKdmFyIF9wcm9wVHlwZXMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInByb3AtdHlwZXMiKSk7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3JlYWN0Y3NzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJyZWFjdGNzcyIpKTsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9jaGFydHMgPSByZXF1aXJlKCJAZWxhc3RpYy9jaGFydHMiKTsKCnZhciBfdGlja19mb3JtYXR0ZXIgPSByZXF1aXJlKCIuLi8uLi9saWIvdGlja19mb3JtYXR0ZXIiKTsKCnZhciBfdGltZXNlcmllcyA9IHJlcXVpcmUoIi4uLy4uLy4uL3Zpc3VhbGl6YXRpb25zL3ZpZXdzL3RpbWVzZXJpZXMiKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4va2liYW5hX3JlYWN0L3B1YmxpYyIpOwoKdmFyIF9yZXBsYWNlX3ZhcnMgPSByZXF1aXJlKCIuLi8uLi9saWIvcmVwbGFjZV92YXJzIik7Cgp2YXIgX2dldF9heGlzX2xhYmVsX3N0cmluZyA9IHJlcXVpcmUoIi4uLy4uL2xpYi9nZXRfYXhpc19sYWJlbF9zdHJpbmciKTsKCnZhciBfZ2V0X2ludGVydmFsID0gcmVxdWlyZSgiLi4vLi4vbGliL2dldF9pbnRlcnZhbCIpOwoKdmFyIF9jaGFydHMyID0gcmVxdWlyZSgiLi4vLi4vbGliL2NoYXJ0cyIpOwoKdmFyIF9jcmVhdGVfeGF4aXNfZm9ybWF0dGVyID0gcmVxdWlyZSgiLi4vLi4vbGliL2NyZWF0ZV94YXhpc19mb3JtYXR0ZXIiKTsKCnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgiLi4vLi4vLi4vdmlzdWFsaXphdGlvbnMvY29uc3RhbnRzIik7Cgp2YXIgX3NlcnZpY2VzID0gcmVxdWlyZSgiLi4vLi4vLi4vc2VydmljZXMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307IGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOyB9IGVsc2UgeyBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH0KCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHNvdXJjZSwgZXhjbHVkZWQpIHsgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307IHZhciB0YXJnZXQgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKTsgdmFyIGtleSwgaTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHNvdXJjZVN5bWJvbEtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSk7IGZvciAoaSA9IDA7IGkgPCBzb3VyY2VTeW1ib2xLZXlzLmxlbmd0aDsgaSsrKSB7IGtleSA9IHNvdXJjZVN5bWJvbEtleXNbaV07IGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHNvdXJjZSwga2V5KSkgY29udGludWU7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0ge307IHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTsgdmFyIGtleSwgaTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCnZhciBUaW1lc2VyaWVzVmlzdWFsaXphdGlvbiA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoVGltZXNlcmllc1Zpc3VhbGl6YXRpb24sIF9Db21wb25lbnQpOwoKICBmdW5jdGlvbiBUaW1lc2VyaWVzVmlzdWFsaXphdGlvbigpIHsKICAgIHZhciBfZ2V0UHJvdG90eXBlT2YyOwoKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGltZXNlcmllc1Zpc3VhbGl6YXRpb24pOwoKICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogICAgfQoKICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKF9nZXRQcm90b3R5cGVPZjIgPSBfZ2V0UHJvdG90eXBlT2YoVGltZXNlcmllc1Zpc3VhbGl6YXRpb24pKS5jYWxsLmFwcGx5KF9nZXRQcm90b3R5cGVPZjIsIFt0aGlzXS5jb25jYXQoYXJncykpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJ4QXhpc0Zvcm1hdHRlciIsIGZ1bmN0aW9uIChpbnRlcnZhbCkgewogICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCkgewogICAgICAgIHZhciBfdGhpcyRwcm9wcyR2aXNEYXRhID0gX3RoaXMucHJvcHMudmlzRGF0YSwKICAgICAgICAgICAgc2NhbGVkRGF0YUZvcm1hdCA9IF90aGlzJHByb3BzJHZpc0RhdGEuc2NhbGVkRGF0YUZvcm1hdCwKICAgICAgICAgICAgZGF0ZUZvcm1hdCA9IF90aGlzJHByb3BzJHZpc0RhdGEuZGF0ZUZvcm1hdDsKCiAgICAgICAgaWYgKCFzY2FsZWREYXRhRm9ybWF0IHx8ICFkYXRlRm9ybWF0KSB7CiAgICAgICAgICByZXR1cm4gdmFsOwogICAgICAgIH0KCiAgICAgICAgdmFyIGZvcm1hdHRlciA9ICgwLCBfY3JlYXRlX3hheGlzX2Zvcm1hdHRlci5jcmVhdGVYYXhpc0Zvcm1hdHRlcikoaW50ZXJ2YWwsIHNjYWxlZERhdGFGb3JtYXQsIGRhdGVGb3JtYXQpOwogICAgICAgIHJldHVybiBmb3JtYXR0ZXIodmFsKTsKICAgICAgfTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInlBeGlzU3RhY2tlZEJ5UGVyY2VudEZvcm1hdHRlciIsIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgdmFyIG4gPSBOdW1iZXIodmFsKSAqIDEwMDsKICAgICAgcmV0dXJuICIiLmNvbmNhdCgoTnVtYmVyLmlzTmFOKG4pID8gMCA6IG4pLnRvRml4ZWQoMCksICIlIik7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJhcHBseURvY1RvIiwgZnVuY3Rpb24gKHRlbXBsYXRlKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgdmFyIHZhcnMgPSAoMCwgX3JlcGxhY2VfdmFycy5yZXBsYWNlVmFycykodGVtcGxhdGUsIG51bGwsIGRvYyk7CgogICAgICAgIGlmICh2YXJzIGluc3RhbmNlb2YgRXJyb3IpIHsKICAgICAgICAgIF90aGlzLnNob3dUb2FzdE5vdGlmaWNhdGlvbiA9IHZhcnMuZXJyb3IuY2F1c2VkX2J5OwogICAgICAgICAgcmV0dXJuIHRlbXBsYXRlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHZhcnM7CiAgICAgIH07CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJwcmVwYXJlQW5ub3RhdGlvbnMiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLAogICAgICAgICAgbW9kZWwgPSBfdGhpcyRwcm9wcy5tb2RlbCwKICAgICAgICAgIHZpc0RhdGEgPSBfdGhpcyRwcm9wcy52aXNEYXRhOwogICAgICByZXR1cm4gKDAsIF9sb2Rhc2gubWFwKShtb2RlbC5hbm5vdGF0aW9ucywgZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgaWQgPSBfcmVmLmlkLAogICAgICAgICAgICBjb2xvciA9IF9yZWYuY29sb3IsCiAgICAgICAgICAgIGljb24gPSBfcmVmLmljb24sCiAgICAgICAgICAgIHRlbXBsYXRlID0gX3JlZi50ZW1wbGF0ZTsKICAgICAgICB2YXIgYW5ub3RhdGlvbkRhdGEgPSAoMCwgX2xvZGFzaC5nZXQpKHZpc0RhdGEsICIiLmNvbmNhdChtb2RlbC5pZCwgIi5hbm5vdGF0aW9ucy4iKS5jb25jYXQoaWQpLCBbXSk7CgogICAgICAgIHZhciBhcHBseURvY1RvVGVtcGxhdGUgPSBfdGhpcy5hcHBseURvY1RvKHRlbXBsYXRlKTsKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgIGNvbG9yOiBjb2xvciwKICAgICAgICAgIGljb246IGljb24sCiAgICAgICAgICBkYXRhOiBhbm5vdGF0aW9uRGF0YS5tYXAoZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgICAgICAgIHZhciBkb2NzID0gX3JlZjIuZG9jcywKICAgICAgICAgICAgICAgIHJlc3QgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZjIsIFsiZG9jcyJdKTsKCiAgICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCByZXN0LCB7CiAgICAgICAgICAgICAgZG9jczogZG9jcy5tYXAoYXBwbHlEb2NUb1RlbXBsYXRlKQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9KTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoVGltZXNlcmllc1Zpc3VhbGl6YXRpb24sIFt7CiAgICBrZXk6ICJjb21wb25lbnREaWRVcGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHsKICAgICAgdmFyIHRvYXN0Tm90aWZpY2F0aW9ucyA9ICgwLCBfc2VydmljZXMuZ2V0Q29yZVN0YXJ0KSgpLm5vdGlmaWNhdGlvbnMudG9hc3RzOwoKICAgICAgaWYgKHRoaXMuc2hvd1RvYXN0Tm90aWZpY2F0aW9uICYmIHRoaXMubm90aWZpY2F0aW9uUmVhc29uICE9PSB0aGlzLnNob3dUb2FzdE5vdGlmaWNhdGlvbi5yZWFzb24pIHsKICAgICAgICBpZiAodGhpcy5ub3RpZmljYXRpb24pIHsKICAgICAgICAgIHRvYXN0Tm90aWZpY2F0aW9ucy5yZW1vdmUodGhpcy5ub3RpZmljYXRpb24pOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25SZWFzb24gPSB0aGlzLnNob3dUb2FzdE5vdGlmaWNhdGlvbi5yZWFzb247CiAgICAgICAgdGhpcy5ub3RpZmljYXRpb24gPSB0b2FzdE5vdGlmaWNhdGlvbnMuYWRkRGFuZ2VyKHsKICAgICAgICAgIHRpdGxlOiB0aGlzLnNob3dUb2FzdE5vdGlmaWNhdGlvbi50aXRsZSwKICAgICAgICAgIHRleHQ6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3B1YmxpYy5NYXJrZG93blNpbXBsZSwgbnVsbCwgdGhpcy5zaG93VG9hc3ROb3RpZmljYXRpb24ucmVhc29uKQogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuc2hvd1RvYXN0Tm90aWZpY2F0aW9uICYmIHRoaXMubm90aWZpY2F0aW9uKSB7CiAgICAgICAgdG9hc3ROb3RpZmljYXRpb25zLnJlbW92ZSh0aGlzLm5vdGlmaWNhdGlvbik7CiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25SZWFzb24gPSBudWxsOwogICAgICAgIHRoaXMubm90aWZpY2F0aW9uID0gbnVsbDsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLAogICAgICAgICAgbW9kZWwgPSBfdGhpcyRwcm9wczIubW9kZWwsCiAgICAgICAgICB2aXNEYXRhID0gX3RoaXMkcHJvcHMyLnZpc0RhdGEsCiAgICAgICAgICBvbkJydXNoID0gX3RoaXMkcHJvcHMyLm9uQnJ1c2g7CiAgICAgIHZhciBzdHlsZXMgPSAoMCwgX3JlYWN0Y3NzLmRlZmF1bHQpKHsKICAgICAgICBkZWZhdWx0OiB7CiAgICAgICAgICB0dmJWaXM6IHsKICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAoMCwgX2xvZGFzaC5nZXQpKG1vZGVsLCAnYmFja2dyb3VuZF9jb2xvcicpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdmFyIHNlcmllcyA9ICgwLCBfbG9kYXNoLmdldCkodmlzRGF0YSwgIiIuY29uY2F0KG1vZGVsLmlkLCAiLnNlcmllcyIpLCBbXSk7CiAgICAgIHZhciBpbnRlcnZhbCA9ICgwLCBfZ2V0X2ludGVydmFsLmdldEludGVydmFsKSh2aXNEYXRhLCBtb2RlbCk7CiAgICAgIHZhciB5QXhpc0lkR2VuZXJhdG9yID0gKDAsIF9ldWkuaHRtbElkR2VuZXJhdG9yKSgneWF4aXMnKTsKICAgICAgdmFyIG1haW5BeGlzR3JvdXBJZCA9IHlBeGlzSWRHZW5lcmF0b3IoJ21haW5fZ3JvdXAnKTsKICAgICAgdmFyIHNlcmllc01vZGVsID0gbW9kZWwuc2VyaWVzLmZpbHRlcihmdW5jdGlvbiAocykgewogICAgICAgIHJldHVybiAhcy5oaWRkZW47CiAgICAgIH0pLm1hcChmdW5jdGlvbiAocykgewogICAgICAgIHJldHVybiAoMCwgX2xvZGFzaC5jbG9uZURlZXApKHMpOwogICAgICB9KTsKICAgICAgdmFyIGVuYWJsZUhpc3RvZ3JhbU1vZGUgPSAoMCwgX2NoYXJ0czIuYXJlRmllbGRzRGlmZmVyZW50KSgnY2hhcnRfdHlwZScpKHNlcmllc01vZGVsKTsKICAgICAgdmFyIGZpcnN0U2VyaWVzID0gc2VyaWVzTW9kZWwuZmluZChmdW5jdGlvbiAocykgewogICAgICAgIHJldHVybiBzLmZvcm1hdHRlciAmJiAhcy5zZXBhcmF0ZV9heGlzOwogICAgICB9KTsKICAgICAgdmFyIG1haW5BeGlzU2NhbGVUeXBlID0gVGltZXNlcmllc1Zpc3VhbGl6YXRpb24uZ2V0QXhpc1NjYWxlVHlwZShtb2RlbCk7CiAgICAgIHZhciBtYWluQXhpc0RvbWFpbiA9IFRpbWVzZXJpZXNWaXN1YWxpemF0aW9uLmdldFlBeGlzRG9tYWluKG1vZGVsKTsKICAgICAgdmFyIHRpY2tGb3JtYXR0ZXIgPSBUaW1lc2VyaWVzVmlzdWFsaXphdGlvbi5nZXRUaWNrRm9ybWF0dGVyKGZpcnN0U2VyaWVzLCB0aGlzLnByb3BzLmdldENvbmZpZyk7CiAgICAgIHZhciB5QXhpcyA9IFtdOwogICAgICB2YXIgbWFpbkRvbWFpbkFkZGVkID0gZmFsc2U7CiAgICAgIHRoaXMuc2hvd1RvYXN0Tm90aWZpY2F0aW9uID0gbnVsbDsKICAgICAgc2VyaWVzTW9kZWwuZm9yRWFjaChmdW5jdGlvbiAoc2VyaWVzR3JvdXApIHsKICAgICAgICB2YXIgaXNTdGFja2VkV2l0aGluU2VyaWVzID0gc2VyaWVzR3JvdXAuc3RhY2tlZCA9PT0gX2NvbnN0YW50cy5TVEFDS0VEX09QVElPTlMuU1RBQ0tFRF9XSVRISU5fU0VSSUVTOwogICAgICAgIHZhciBoYXNTZXBhcmF0ZUF4aXMgPSBCb29sZWFuKHNlcmllc0dyb3VwLnNlcGFyYXRlX2F4aXMpOwogICAgICAgIHZhciBncm91cElkID0gaGFzU2VwYXJhdGVBeGlzIHx8IGlzU3RhY2tlZFdpdGhpblNlcmllcyA/IHNlcmllc0dyb3VwLmlkIDogbWFpbkF4aXNHcm91cElkOwogICAgICAgIHZhciBkb21haW4gPSBoYXNTZXBhcmF0ZUF4aXMgPyBUaW1lc2VyaWVzVmlzdWFsaXphdGlvbi5nZXRZQXhpc0RvbWFpbihzZXJpZXNHcm91cCkgOiB1bmRlZmluZWQ7CiAgICAgICAgdmFyIGlzQ3VzdG9tRG9tYWluID0gZ3JvdXBJZCAhPT0gbWFpbkF4aXNHcm91cElkOwogICAgICAgIHZhciBzZXJpZXNHcm91cFRpY2tGb3JtYXR0ZXIgPSBUaW1lc2VyaWVzVmlzdWFsaXphdGlvbi5nZXRUaWNrRm9ybWF0dGVyKHNlcmllc0dyb3VwLCBfdGhpczIucHJvcHMuZ2V0Q29uZmlnKTsKICAgICAgICB2YXIgeVNjYWxlVHlwZSA9IGhhc1NlcGFyYXRlQXhpcyA/IFRpbWVzZXJpZXNWaXN1YWxpemF0aW9uLmdldEF4aXNTY2FsZVR5cGUoc2VyaWVzR3JvdXApIDogbWFpbkF4aXNTY2FsZVR5cGU7CgogICAgICAgIGlmIChzZXJpZXNHcm91cC5zdGFja2VkID09PSBfY29uc3RhbnRzLlNUQUNLRURfT1BUSU9OUy5QRVJDRU5UKSB7CiAgICAgICAgICBzZXJpZXNHcm91cC5zZXBhcmF0ZV9heGlzID0gdHJ1ZTsKICAgICAgICAgIHNlcmllc0dyb3VwLmF4aXNGb3JtYXR0ZXIgPSAncGVyY2VudCc7CiAgICAgICAgICBzZXJpZXNHcm91cC5heGlzX21pbiA9IHNlcmllc0dyb3VwLmF4aXNfbWluIHx8IDA7CiAgICAgICAgICBzZXJpZXNHcm91cC5heGlzX21heCA9IHNlcmllc0dyb3VwLmF4aXNfbWF4IHx8IDE7CiAgICAgICAgICBzZXJpZXNHcm91cC5heGlzX3Bvc2l0aW9uID0gbW9kZWwuYXhpc19wb3NpdGlvbjsKICAgICAgICB9CgogICAgICAgIHNlcmllcy5maWx0ZXIoZnVuY3Rpb24gKHIpIHsKICAgICAgICAgIHJldHVybiAoMCwgX2xvZGFzaC5zdGFydHNXaXRoKShyLmlkLCBzZXJpZXNHcm91cC5pZCk7CiAgICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoc2VyaWVzRGF0YVJvdykgewogICAgICAgICAgc2VyaWVzRGF0YVJvdy50aWNrRm9ybWF0dGVyID0gc2VyaWVzR3JvdXBUaWNrRm9ybWF0dGVyOwogICAgICAgICAgc2VyaWVzRGF0YVJvdy5ncm91cElkID0gZ3JvdXBJZDsKICAgICAgICAgIHNlcmllc0RhdGFSb3cueVNjYWxlVHlwZSA9IHlTY2FsZVR5cGU7CiAgICAgICAgICBzZXJpZXNEYXRhUm93LmhpZGVJbkxlZ2VuZCA9IEJvb2xlYW4oc2VyaWVzR3JvdXAuaGlkZV9pbl9sZWdlbmQpOwogICAgICAgICAgc2VyaWVzRGF0YVJvdy51c2VEZWZhdWx0R3JvdXBEb21haW4gPSAhaXNDdXN0b21Eb21haW47CiAgICAgICAgfSk7CgogICAgICAgIGlmIChpc0N1c3RvbURvbWFpbikgewogICAgICAgICAgVGltZXNlcmllc1Zpc3VhbGl6YXRpb24uYWRkWUF4aXMoeUF4aXMsIHsKICAgICAgICAgICAgZG9tYWluOiBkb21haW4sCiAgICAgICAgICAgIGdyb3VwSWQ6IGdyb3VwSWQsCiAgICAgICAgICAgIGlkOiB5QXhpc0lkR2VuZXJhdG9yKHNlcmllc0dyb3VwLmlkKSwKICAgICAgICAgICAgcG9zaXRpb246IHNlcmllc0dyb3VwLmF4aXNfcG9zaXRpb24sCiAgICAgICAgICAgIGhpZGU6IGlzU3RhY2tlZFdpdGhpblNlcmllcywKICAgICAgICAgICAgdGlja0Zvcm1hdHRlcjogc2VyaWVzR3JvdXAuc3RhY2tlZCA9PT0gX2NvbnN0YW50cy5TVEFDS0VEX09QVElPTlMuUEVSQ0VOVCA/IF90aGlzMi55QXhpc1N0YWNrZWRCeVBlcmNlbnRGb3JtYXR0ZXIgOiBzZXJpZXNHcm91cFRpY2tGb3JtYXR0ZXIKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAoIW1haW5Eb21haW5BZGRlZCkgewogICAgICAgICAgVGltZXNlcmllc1Zpc3VhbGl6YXRpb24uYWRkWUF4aXMoeUF4aXMsIHsKICAgICAgICAgICAgdGlja0Zvcm1hdHRlcjogdGlja0Zvcm1hdHRlciwKICAgICAgICAgICAgaWQ6IHlBeGlzSWRHZW5lcmF0b3IoJ21haW4nKSwKICAgICAgICAgICAgZ3JvdXBJZDogbWFpbkF4aXNHcm91cElkLAogICAgICAgICAgICBwb3NpdGlvbjogbW9kZWwuYXhpc19wb3NpdGlvbiwKICAgICAgICAgICAgZG9tYWluOiBtYWluQXhpc0RvbWFpbgogICAgICAgICAgfSk7CiAgICAgICAgICBtYWluRG9tYWluQWRkZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHZhciBkYXJrTW9kZSA9ICgwLCBfc2VydmljZXMuZ2V0VUlTZXR0aW5ncykoKS5nZXQoJ3RoZW1lOmRhcmtNb2RlJyk7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAidHZiVmlzIiwKICAgICAgICBzdHlsZTogc3R5bGVzLnR2YlZpcwogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF90aW1lc2VyaWVzLlRpbWVTZXJpZXMsIHsKICAgICAgICBzZXJpZXM6IHNlcmllcywKICAgICAgICB5QXhpczogeUF4aXMsCiAgICAgICAgb25CcnVzaDogb25CcnVzaCwKICAgICAgICBlbmFibGVIaXN0b2dyYW1Nb2RlOiBlbmFibGVIaXN0b2dyYW1Nb2RlLAogICAgICAgIGJhY2tncm91bmRDb2xvcjogbW9kZWwuYmFja2dyb3VuZF9jb2xvciwKICAgICAgICBkYXJrTW9kZTogZGFya01vZGUsCiAgICAgICAgc2hvd0dyaWQ6IEJvb2xlYW4obW9kZWwuc2hvd19ncmlkKSwKICAgICAgICBsZWdlbmQ6IEJvb2xlYW4obW9kZWwuc2hvd19sZWdlbmQpLAogICAgICAgIGxlZ2VuZFBvc2l0aW9uOiBtb2RlbC5sZWdlbmRfcG9zaXRpb24sCiAgICAgICAgeEF4aXNMYWJlbDogKDAsIF9nZXRfYXhpc19sYWJlbF9zdHJpbmcuZ2V0QXhpc0xhYmVsU3RyaW5nKShpbnRlcnZhbCksCiAgICAgICAgeEF4aXNGb3JtYXR0ZXI6IHRoaXMueEF4aXNGb3JtYXR0ZXIoaW50ZXJ2YWwpLAogICAgICAgIGFubm90YXRpb25zOiB0aGlzLnByZXBhcmVBbm5vdGF0aW9ucygpCiAgICAgIH0pKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBUaW1lc2VyaWVzVmlzdWFsaXphdGlvbjsKfShfcmVhY3QuQ29tcG9uZW50KTsKCmV4cG9ydHMuVGltZXNlcmllc1Zpc3VhbGl6YXRpb24gPSBUaW1lc2VyaWVzVmlzdWFsaXphdGlvbjsKCl9kZWZpbmVQcm9wZXJ0eShUaW1lc2VyaWVzVmlzdWFsaXphdGlvbiwgInByb3BUeXBlcyIsIHsKICBtb2RlbDogX3Byb3BUeXBlcy5kZWZhdWx0Lm9iamVjdCwKICBvbkJydXNoOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYywKICB2aXNEYXRhOiBfcHJvcFR5cGVzLmRlZmF1bHQub2JqZWN0LAogIGRhdGVGb3JtYXQ6IF9wcm9wVHlwZXMuZGVmYXVsdC5zdHJpbmcsCiAgZ2V0Q29uZmlnOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYwp9KTsKCl9kZWZpbmVQcm9wZXJ0eShUaW1lc2VyaWVzVmlzdWFsaXphdGlvbiwgImdldFlBeGlzRG9tYWluIiwgZnVuY3Rpb24gKG1vZGVsKSB7CiAgdmFyIGF4aXNNaW4gPSAoMCwgX2xvZGFzaC5nZXQpKG1vZGVsLCAnYXhpc19taW4nLCAnJykudG9TdHJpbmcoKTsKICB2YXIgYXhpc01heCA9ICgwLCBfbG9kYXNoLmdldCkobW9kZWwsICdheGlzX21heCcsICcnKS50b1N0cmluZygpOwogIHZhciBmaXQgPSBtb2RlbC5zZXJpZXMgPyBtb2RlbC5zZXJpZXMuZmlsdGVyKGZ1bmN0aW9uIChfcmVmMykgewogICAgdmFyIGhpZGRlbiA9IF9yZWYzLmhpZGRlbjsKICAgIHJldHVybiAhaGlkZGVuOwogIH0pLmV2ZXJ5KGZ1bmN0aW9uIChfcmVmNCkgewogICAgdmFyIGZpbGwgPSBfcmVmNC5maWxsOwogICAgcmV0dXJuIGZpbGwgPT09ICcwJzsKICB9KSA6IG1vZGVsLmZpbGwgPT09ICcwJzsKICByZXR1cm4gewogICAgbWluOiBheGlzTWluLmxlbmd0aCA/IE51bWJlcihheGlzTWluKSA6IHVuZGVmaW5lZCwKICAgIG1heDogYXhpc01heC5sZW5ndGggPyBOdW1iZXIoYXhpc01heCkgOiB1bmRlZmluZWQsCiAgICBmaXQ6IGZpdAogIH07Cn0pOwoKX2RlZmluZVByb3BlcnR5KFRpbWVzZXJpZXNWaXN1YWxpemF0aW9uLCAiYWRkWUF4aXMiLCBmdW5jdGlvbiAoeUF4aXMsIF9yZWY1KSB7CiAgdmFyIGlkID0gX3JlZjUuaWQsCiAgICAgIGdyb3VwSWQgPSBfcmVmNS5ncm91cElkLAogICAgICBwb3NpdGlvbiA9IF9yZWY1LnBvc2l0aW9uLAogICAgICB0aWNrRm9ybWF0dGVyID0gX3JlZjUudGlja0Zvcm1hdHRlciwKICAgICAgZG9tYWluID0gX3JlZjUuZG9tYWluLAogICAgICBoaWRlID0gX3JlZjUuaGlkZTsKICB5QXhpcy5wdXNoKHsKICAgIGlkOiBpZCwKICAgIGdyb3VwSWQ6IGdyb3VwSWQsCiAgICBwb3NpdGlvbjogcG9zaXRpb24sCiAgICB0aWNrRm9ybWF0dGVyOiB0aWNrRm9ybWF0dGVyLAogICAgZG9tYWluOiBkb21haW4sCiAgICBoaWRlOiBoaWRlCiAgfSk7Cn0pOwoKX2RlZmluZVByb3BlcnR5KFRpbWVzZXJpZXNWaXN1YWxpemF0aW9uLCAiZ2V0QXhpc1NjYWxlVHlwZSIsIGZ1bmN0aW9uIChtb2RlbCkgewogIHJldHVybiAoMCwgX2xvZGFzaC5nZXQpKG1vZGVsLCAnYXhpc19zY2FsZScpID09PSAnbG9nJyA/IF9jaGFydHMuU2NhbGVUeXBlLkxvZyA6IF9jaGFydHMuU2NhbGVUeXBlLkxpbmVhcjsKfSk7CgpfZGVmaW5lUHJvcGVydHkoVGltZXNlcmllc1Zpc3VhbGl6YXRpb24sICJnZXRUaWNrRm9ybWF0dGVyIiwgZnVuY3Rpb24gKG1vZGVsLCBnZXRDb25maWcpIHsKICByZXR1cm4gKDAsIF90aWNrX2Zvcm1hdHRlci5jcmVhdGVUaWNrRm9ybWF0dGVyKSgoMCwgX2xvZGFzaC5nZXQpKG1vZGVsLCAnZm9ybWF0dGVyJyksICgwLCBfbG9kYXNoLmdldCkobW9kZWwsICd2YWx1ZV90ZW1wbGF0ZScpLCBnZXRDb25maWcpOwp9KTs="},null]}