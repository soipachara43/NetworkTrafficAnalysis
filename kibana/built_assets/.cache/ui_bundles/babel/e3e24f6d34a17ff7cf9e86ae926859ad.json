{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/index_management/public/application/components/mappings_editor/components/load_mappings/load_mappings_provider.js","dependencies":[{"path":"x-pack/plugins/index_management/public/application/components/mappings_editor/components/load_mappings/load_mappings_provider.js","mtime":1589249554116},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkxvYWRNYXBwaW5nc1Byb3ZpZGVyID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9sb2Rhc2ggPSByZXF1aXJlKCJsb2Rhc2giKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9yZWFjdDIgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX3NoYXJlZF9pbXBvcnRzID0gcmVxdWlyZSgiLi4vLi4vc2hhcmVkX2ltcG9ydHMiKTsKCnZhciBfbGliID0gcmVxdWlyZSgiLi4vLi4vbGliIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgewogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9Cgp2YXIgTUFYX0VSUk9SU19UT19ESVNQTEFZID0gMTsKCnZhciBnZXRUZXh0cyA9IGZ1bmN0aW9uIGdldFRleHRzKHZpZXcpIHsKICB2YXIgdG90YWxFcnJvcnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7CiAgcmV0dXJuIHsKICAgIG1vZGFsVGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmxvYWRKc29uTW9kYWxUaXRsZScsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdMb2FkIEpTT04nCiAgICB9KSwKICAgIGJ1dHRvbnM6IHsKICAgICAgY29uZmlybTogdmlldyA9PT0gJ2pzb24nID8gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IubG9hZEpzb25Nb2RhbC5sb2FkQnV0dG9uTGFiZWwnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdMb2FkIGFuZCBvdmVyd3JpdGUnCiAgICAgIH0pIDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IubG9hZEpzb25Nb2RhbC5hY2NlcHRXYXJuaW5nTGFiZWwnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDb250aW51ZSBsb2FkaW5nJwogICAgICB9KSwKICAgICAgY2FuY2VsOiB2aWV3ID09PSAnanNvbicgPyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5sb2FkSnNvbk1vZGFsLmNhbmNlbEJ1dHRvbkxhYmVsJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ2FuY2VsJwogICAgICB9KSA6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmxvYWRKc29uTW9kYWwuZ29CYWNrQnV0dG9uTGFiZWwnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdHbyBiYWNrJwogICAgICB9KQogICAgfSwKICAgIGVkaXRvcjogewogICAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IubG9hZEpzb25Nb2RhbC5qc29uRWRpdG9yTGFiZWwnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdNYXBwaW5ncyBvYmplY3QnCiAgICAgIH0pCiAgICB9LAogICAgdmFsaWRhdGlvbkVycm9yczogewogICAgICB0aXRsZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IubG9hZEpzb25Nb2RhbC52YWxpZGF0aW9uRXJyb3JUaXRsZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJ7dG90YWxFcnJvcnN9IHt0b3RhbEVycm9ycywgcGx1cmFsLCBvbmUge2ludmFsaWQgb3B0aW9ufSBvdGhlciB7aW52YWxpZCBvcHRpb25zfX0gZGV0ZWN0ZWQgaW4ge21hcHBpbmdzfSBvYmplY3QiLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgdG90YWxFcnJvcnM6IHRvdGFsRXJyb3JzLAogICAgICAgICAgLy8gTk9URTogVGhpcyBkb2Vzbid0IG5lZWQgaW50ZXJuYXRpb25hbGl6YXRpb24gYmVjYXVzZSBpdCdzIHBhcnQgb2YgdGhlIEVTIEFQSS4KICAgICAgICAgIG1hcHBpbmdzOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJjb2RlIiwgbnVsbCwgIm1hcHBpbmdzIikKICAgICAgICB9CiAgICAgIH0pLAogICAgICBkZXNjcmlwdGlvbjogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IubG9hZEpzb25Nb2RhbC52YWxpZGF0aW9uRXJyb3JEZXNjcmlwdGlvbicsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0lmIHlvdSBjb250aW51ZSBsb2FkaW5nIHRoZSBvYmplY3QsIG9ubHkgdmFsaWQgb3B0aW9ucyB3aWxsIGJlIGFjY2VwdGVkLicKICAgICAgfSkKICAgIH0KICB9Owp9OwoKdmFyIGdldEVycm9yTWVzc2FnZSA9IGZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZShlcnJvcikgewogIHN3aXRjaCAoZXJyb3IuY29kZSkgewogICAgY2FzZSAnRVJSX0NPTkZJRyc6CiAgICAgIHsKICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAieHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5sb2FkSnNvbk1vZGFsLnZhbGlkYXRpb25FcnJvci5jb25maWd1cmF0aW9uTWVzc2FnZSIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlRoZSB7Y29uZmlnTmFtZX0gY29uZmlndXJhdGlvbiBpcyBpbnZhbGlkLiIsCiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgY29uZmlnTmFtZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiY29kZSIsIG51bGwsIGVycm9yLmNvbmZpZ05hbWUpCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICBjYXNlICdFUlJfRklFTEQnOgogICAgICB7CiAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogInhwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IubG9hZEpzb25Nb2RhbC52YWxpZGF0aW9uRXJyb3IuZmllbGRNZXNzYWdlIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVGhlIHtmaWVsZFBhdGh9IGZpZWxkIGlzIGludmFsaWQuIiwKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBmaWVsZFBhdGg6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImNvZGUiLCBudWxsLCBlcnJvci5maWVsZFBhdGgpCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICBjYXNlICdFUlJfUEFSQU1FVEVSJzoKICAgICAgewogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLmxvYWRKc29uTW9kYWwudmFsaWRhdGlvbkVycm9yLnBhcmFtZXRlck1lc3NhZ2UiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJUaGUge3BhcmFtTmFtZX0gcGFyYW1ldGVyIG9uIGZpZWxkIHtmaWVsZFBhdGh9IGlzIGludmFsaWQuIiwKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBwYXJhbU5hbWU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImNvZGUiLCBudWxsLCBlcnJvci5wYXJhbU5hbWUpLAogICAgICAgICAgICBmaWVsZFBhdGg6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImNvZGUiLCBudWxsLCBlcnJvci5maWVsZFBhdGgpCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICB9Cn07Cgp2YXIgYXJlQWxsT2JqZWN0S2V5c1ZhbGlkUGFyYW1ldGVycyA9IGZ1bmN0aW9uIGFyZUFsbE9iamVjdEtleXNWYWxpZFBhcmFtZXRlcnMob2JqKSB7CiAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikuZXZlcnkoZnVuY3Rpb24gKGtleSkgewogICAgcmV0dXJuIF9saWIuVkFMSURfTUFQUElOR1NfUEFSQU1FVEVSUy5pbmNsdWRlcyhrZXkpOwogIH0pOwp9OwoKdmFyIExvYWRNYXBwaW5nc1Byb3ZpZGVyID0gZnVuY3Rpb24gTG9hZE1hcHBpbmdzUHJvdmlkZXIoX3JlZikgewogIHZhciBfc3RhdGUkZXJyb3JzLCBfc3RhdGUkanNvbjsKCiAgdmFyIG9uSnNvbiA9IF9yZWYub25Kc29uLAogICAgICBjaGlsZHJlbiA9IF9yZWYuY2hpbGRyZW47CgogIHZhciBfdXNlU3RhdGUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSh7CiAgICBpc01vZGFsT3BlbjogZmFsc2UKICB9KSwKICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksCiAgICAgIHN0YXRlID0gX3VzZVN0YXRlMlswXSwKICAgICAgc2V0U3RhdGUgPSBfdXNlU3RhdGUyWzFdOwoKICB2YXIgX3VzZVN0YXRlMyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKE1BWF9FUlJPUlNfVE9fRElTUExBWSksCiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSwKICAgICAgdG90YWxFcnJvcnNUb0Rpc3BsYXkgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRUb3RhbEVycm9yc1RvRGlzcGxheSA9IF91c2VTdGF0ZTRbMV07CgogIHZhciBqc29uQ29udGVudCA9ICgwLCBfcmVhY3QudXNlUmVmKSh1bmRlZmluZWQpOwogIHZhciB2aWV3ID0gc3RhdGUuanNvbiAhPT0gdW5kZWZpbmVkICYmIHN0YXRlLmVycm9ycyAhPT0gdW5kZWZpbmVkID8gJ3ZhbGlkYXRpb25SZXN1bHQnIDogJ2pzb24nOwogIHZhciBpMThuVGV4dHMgPSBnZXRUZXh0cyh2aWV3LCAoX3N0YXRlJGVycm9ycyA9IHN0YXRlLmVycm9ycykgPT09IG51bGwgfHwgX3N0YXRlJGVycm9ycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3N0YXRlJGVycm9ycy5sZW5ndGgpOwoKICB2YXIgb25Kc29uVXBkYXRlID0gZnVuY3Rpb24gb25Kc29uVXBkYXRlKGpzb25VcGRhdGVEYXRhKSB7CiAgICBqc29uQ29udGVudC5jdXJyZW50ID0ganNvblVwZGF0ZURhdGE7CiAgfTsKCiAgdmFyIG9wZW5Nb2RhbCA9IGZ1bmN0aW9uIG9wZW5Nb2RhbCgpIHsKICAgIHNldFN0YXRlKHsKICAgICAgaXNNb2RhbE9wZW46IHRydWUKICAgIH0pOwogIH07CgogIHZhciBjbG9zZU1vZGFsID0gZnVuY3Rpb24gY2xvc2VNb2RhbCgpIHsKICAgIHNldFN0YXRlKHsKICAgICAgaXNNb2RhbE9wZW46IGZhbHNlCiAgICB9KTsKICB9OwoKICB2YXIgZ2V0TWFwcGluZ3NNZXRhZGF0YSA9IGZ1bmN0aW9uIGdldE1hcHBpbmdzTWV0YWRhdGEodW5wYXJzZWQpIHsKICAgIHZhciBoYXNDdXN0b21UeXBlID0gZmFsc2U7CiAgICB2YXIgaXNNdWx0aVR5cGVNYXBwaW5ncyA9IGZhbHNlOwogICAgdmFyIGN1c3RvbVR5cGU7CiAgICAvKioKICAgICAqIFdlIG5lZWQgdG8gY2hlY2sgaWYgdGhlcmUgYXJlIHNpbmdsZSBvciBtdWx0aS10eXBlcyBtYXBwaW5ncyBkZWNsYXJlZCwgZm9yIHRoYXQgd2Ugd2lsbCBjaGVjayBmb3IgdGhlIGZvbGxvd2luZzoKICAgICAqCiAgICAgKiAtIEFyZSAqKmFsbCoqIHJvb3QgbGV2ZWwga2V5cyB2YWxpZCBwYXJhbWV0ZXIgZm9yIHRoZSBtYXBwaW5ncyBkZWZpbml0aW9uLiBJZiBub3QsIGFuZCBhbGwga2V5cyBhcmUgcGxhaW4gb2JqZWN0LCB3ZSBhc3N1bWUgd2UgaGF2ZSBtdWx0aS10eXBlIG1hcHBpbmdzCiAgICAgKiAtIElmIHRoZXJlIGFyZSBtb3JlIHRoYW4gdHdvIHR5cGVzLCByZXR1cm4gImFzIGlzIiBhcyB0aGUgVUkgZG9lcyBub3Qgc3VwcG9ydCBtb3JlIHRoYW4gMSB0eXBlIGFuZCB3aWxsIGRpc3BsYXkgYSB3YXJuaW5nIGNhbGxvdXQKICAgICAqIC0gSWYgdGhlcmUgaXMgb25seSAxIHR5cGUsIHZhbGlkYXRlIHRoZSBtYXBwaW5ncyBkZWZpbml0aW9uIGFuZCByZXR1cm4gaXQgd3JhcHBlZCBpbnNpZGUgdGhlIHRoZSBjdXN0b20gdHlwZQogICAgICovCgogICAgdmFyIGFyZUFsbEtleXNWYWxpZCA9IGFyZUFsbE9iamVjdEtleXNWYWxpZFBhcmFtZXRlcnModW5wYXJzZWQpOwogICAgdmFyIGFyZUFsbFZhbHVlc1BsYWluT2JqZWN0cyA9IE9iamVjdC52YWx1ZXModW5wYXJzZWQpLmV2ZXJ5KF9sb2Rhc2guaXNQbGFpbk9iamVjdCk7CiAgICB2YXIgYXJlQWxsVmFsdWVzT2JqS2V5c1ZhbGlkUGFyYW1ldGVyTmFtZSA9IGFyZUFsbFZhbHVlc1BsYWluT2JqZWN0cyAmJiBPYmplY3QudmFsdWVzKHVucGFyc2VkKS5ldmVyeShhcmVBbGxPYmplY3RLZXlzVmFsaWRQYXJhbWV0ZXJzKTsKCiAgICBpZiAoIWFyZUFsbEtleXNWYWxpZCAmJiBhcmVBbGxWYWx1ZXNQbGFpbk9iamVjdHMpIHsKICAgICAgaGFzQ3VzdG9tVHlwZSA9IHRydWU7CiAgICAgIGlzTXVsdGlUeXBlTWFwcGluZ3MgPSBPYmplY3Qua2V5cyh1bnBhcnNlZCkubGVuZ3RoID4gMTsKICAgIH0gLy8gSWYgYWxsIHJvb3QgbGV2ZWwga2V5cyBhcmUgKnZhbGlkKiBwYXJhbWV0ZXJzIEJVVCB0aGV5IGFyZSBhbGwgcGxhaW4gb2JqZWN0cyB3aGljaCAqYWxzbyogaGF2ZSBBTEwgdmFsaWQgbWFwcGluZ3MgY29uZmlnIHBhcmFtZXRlcgogICAgLy8gd2UgY2FuIGFzc3VtZSB0aGF0IHRoZXkgYXJlIGN1c3RvbSB0eXBlcyB3aG9zZSBuYW1lIG1hdGNoZXMgYSBtYXBwaW5ncyBjb25maWd1cmF0aW9uIHBhcmFtZXRlci4KICAgIC8vIFRoaXMgaXMgdG8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIGEgY3VzdG9tIHR5cGUgd291bGQgYmUgZm9yIGV4YW1wbGUgImR5bmFtaWMiIHdoaWNoIGlzIGEgbWFwcGluZ3MgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXIuCiAgICBlbHNlIGlmIChhcmVBbGxLZXlzVmFsaWQgJiYgYXJlQWxsVmFsdWVzUGxhaW5PYmplY3RzICYmIGFyZUFsbFZhbHVlc09iaktleXNWYWxpZFBhcmFtZXRlck5hbWUpIHsKICAgICAgICBoYXNDdXN0b21UeXBlID0gdHJ1ZTsKICAgICAgICBpc011bHRpVHlwZU1hcHBpbmdzID0gT2JqZWN0LmtleXModW5wYXJzZWQpLmxlbmd0aCA+IDE7CiAgICAgIH0KCiAgICBpZiAoaGFzQ3VzdG9tVHlwZSAmJiAhaXNNdWx0aVR5cGVNYXBwaW5ncykgewogICAgICBjdXN0b21UeXBlID0gT2JqZWN0LmtleXModW5wYXJzZWQpWzBdOwogICAgfQoKICAgIHJldHVybiB7CiAgICAgIGlzTXVsdGlUeXBlTWFwcGluZ3M6IGlzTXVsdGlUeXBlTWFwcGluZ3MsCiAgICAgIGN1c3RvbVR5cGU6IGN1c3RvbVR5cGUKICAgIH07CiAgfTsKCiAgdmFyIGxvYWRKc29uID0gZnVuY3Rpb24gbG9hZEpzb24oKSB7CiAgICBpZiAoanNvbkNvbnRlbnQuY3VycmVudCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIC8vIE5vIGNoYW5nZXMgaGF2ZSBiZWVuIG1hZGUgaW4gdGhlIEpTT04sIHRoaXMgaXMgcHJvYmFibHkgYSAicmVzZXQoKSIgZm9yIHRoZSB1c2VyCiAgICAgIG9uSnNvbih7fSk7CiAgICAgIGNsb3NlTW9kYWwoKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBpc1ZhbGlkSnNvbiA9IGpzb25Db250ZW50LmN1cnJlbnQudmFsaWRhdGUoKTsKCiAgICBpZiAoaXNWYWxpZEpzb24pIHsKICAgICAgLy8gUGFyc2UgYW5kIHZhbGlkYXRlIHRoZSBKU09OIHRvIG1ha2Ugc3VyZSBpdCB3b24ndCBicmVhayB0aGUgVUkKICAgICAgdmFyIHVucGFyc2VkID0ganNvbkNvbnRlbnQuY3VycmVudC5kYXRhLmZvcm1hdCgpOwoKICAgICAgaWYgKE9iamVjdC5rZXlzKHVucGFyc2VkKS5sZW5ndGggPT09IDApIHsKICAgICAgICAvLyBFbXB0eSBvYmplY3QuLi5leGl0IGVhcmx5CiAgICAgICAgb25Kc29uKHVucGFyc2VkKTsKICAgICAgICBjbG9zZU1vZGFsKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgbWFwcGluZ3NUb1ZhbGlkYXRlID0gdW5wYXJzZWQ7CgogICAgICB2YXIgX2dldE1hcHBpbmdzTWV0YWRhdGEgPSBnZXRNYXBwaW5nc01ldGFkYXRhKHVucGFyc2VkKSwKICAgICAgICAgIGlzTXVsdGlUeXBlTWFwcGluZ3MgPSBfZ2V0TWFwcGluZ3NNZXRhZGF0YS5pc011bHRpVHlwZU1hcHBpbmdzLAogICAgICAgICAgY3VzdG9tVHlwZSA9IF9nZXRNYXBwaW5nc01ldGFkYXRhLmN1c3RvbVR5cGU7CgogICAgICBpZiAoaXNNdWx0aVR5cGVNYXBwaW5ncykgewogICAgICAgIC8vIEV4aXQgZWFybHksIHRoZSBVSSB3aWxsIHNob3cgYSB3YXJuaW5nCiAgICAgICAgb25Kc29uKHVucGFyc2VkKTsKICAgICAgICBjbG9zZU1vZGFsKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIEN1c3RvbSB0eXBlIGNhbid0IGJlICJwcm9wZXJ0aWVzIiwgRVMgd2lsbCBub3QgdHJlYXQgaXQgYXMgc3VjaAogICAgICAvLyBhcyBpdCBpcyByZXNlcnZlZCBmb3IgZmllbGRzIGRlZmluaXRpb24KCgogICAgICBpZiAoY3VzdG9tVHlwZSAhPT0gdW5kZWZpbmVkICYmIGN1c3RvbVR5cGUgIT09ICdwcm9wZXJ0aWVzJykgewogICAgICAgIG1hcHBpbmdzVG9WYWxpZGF0ZSA9IHVucGFyc2VkW2N1c3RvbVR5cGVdOwogICAgICB9CgogICAgICB2YXIgX3ZhbGlkYXRlTWFwcGluZ3MgPSAoMCwgX2xpYi52YWxpZGF0ZU1hcHBpbmdzKShtYXBwaW5nc1RvVmFsaWRhdGUpLAogICAgICAgICAgcGFyc2VkID0gX3ZhbGlkYXRlTWFwcGluZ3MudmFsdWUsCiAgICAgICAgICBlcnJvcnMgPSBfdmFsaWRhdGVNYXBwaW5ncy5lcnJvcnM7IC8vIFdyYXAgdGhlIG1hcHBpbmdzIGRlZmluaXRpb24gd2l0aCBjdXN0b20gdHlwZSBpZiBvbmUgd2FzIHByb3ZpZGVkLgoKCiAgICAgIHZhciBwYXJzZWRXaXRoVHlwZSA9IGN1c3RvbVR5cGUgIT09IHVuZGVmaW5lZCA/IF9kZWZpbmVQcm9wZXJ0eSh7fSwgY3VzdG9tVHlwZSwgcGFyc2VkKSA6IHBhcnNlZDsKCiAgICAgIGlmIChlcnJvcnMpIHsKICAgICAgICBzZXRTdGF0ZSh7CiAgICAgICAgICBpc01vZGFsT3BlbjogdHJ1ZSwKICAgICAgICAgIGpzb246IHsKICAgICAgICAgICAgdW5wYXJzZWQ6IHVucGFyc2VkLAogICAgICAgICAgICBwYXJzZWQ6IHBhcnNlZFdpdGhUeXBlCiAgICAgICAgICB9LAogICAgICAgICAgZXJyb3JzOiBlcnJvcnMKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIG9uSnNvbihwYXJzZWRXaXRoVHlwZSk7CiAgICAgIGNsb3NlTW9kYWwoKTsKICAgIH0KICB9OwoKICB2YXIgb25Db25maXJtID0gZnVuY3Rpb24gb25Db25maXJtKCkgewogICAgaWYgKHZpZXcgPT09ICdqc29uJykgewogICAgICBsb2FkSnNvbigpOwogICAgfSBlbHNlIHsKICAgICAgLy8gV2UgaGF2ZSBzb21lIEpTT04gYW5kIHdlIGFncmVlIG9uIHRoZSBlcnJvcgogICAgICBvbkpzb24oc3RhdGUuanNvbi5wYXJzZWQpOwogICAgICBjbG9zZU1vZGFsKCk7CiAgICB9CiAgfTsKCiAgdmFyIG9uQ2FuY2VsID0gZnVuY3Rpb24gb25DYW5jZWwoKSB7CiAgICBpZiAodmlldyA9PT0gJ2pzb24nKSB7CiAgICAgIC8vIENhbmNlbC4uLgogICAgICBjbG9zZU1vZGFsKCk7CiAgICB9IGVsc2UgewogICAgICAvLyBHbyBiYWNrIHRvIHRoZSBKU09OIGVkaXRvciB0byBjb3JyZWN0IHRoZSBlcnJvcnMuCiAgICAgIHNldFN0YXRlKHsKICAgICAgICBpc01vZGFsT3BlbjogdHJ1ZSwKICAgICAgICBqc29uOiBzdGF0ZS5qc29uCiAgICAgIH0pOwogICAgfQogIH07CgogIHZhciByZW5kZXJFcnJvcnNGaWx0ZXJCdXR0b24gPSBmdW5jdGlvbiByZW5kZXJFcnJvcnNGaWx0ZXJCdXR0b24oKSB7CiAgICB2YXIgc2hvd2luZ0FsbEVycm9ycyA9IHRvdGFsRXJyb3JzVG9EaXNwbGF5ID4gTUFYX0VSUk9SU19UT19ESVNQTEFZOwogICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b25FbXB0eSwgewogICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgIHJldHVybiBzZXRUb3RhbEVycm9yc1RvRGlzcGxheShzaG93aW5nQWxsRXJyb3JzID8gTUFYX0VSUk9SU19UT19ESVNQTEFZIDogc3RhdGUuZXJyb3JzLmxlbmd0aCk7CiAgICAgIH0sCiAgICAgIGljb25UeXBlOiBzaG93aW5nQWxsRXJyb3JzID8gJ2Fycm93VXAnIDogJ2Fycm93RG93bicKICAgIH0sIHNob3dpbmdBbGxFcnJvcnMgPyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suaWR4TWdtdC5tYXBwaW5nc0VkaXRvci5oaWRlRXJyb3JzQnV0dG9uTGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnSGlkZSBlcnJvcnMnCiAgICB9KSA6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pZHhNZ210Lm1hcHBpbmdzRWRpdG9yLnNob3dBbGxFcnJvcnNCdXR0b25MYWJlbCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTaG93IHtudW1FcnJvcnN9IG1vcmUgZXJyb3JzJywKICAgICAgdmFsdWVzOiB7CiAgICAgICAgbnVtRXJyb3JzOiBzdGF0ZS5lcnJvcnMubGVuZ3RoIC0gTUFYX0VSUk9SU19UT19ESVNQTEFZCiAgICAgIH0KICAgIH0pKTsKICB9OwoKICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuZGVmYXVsdC5GcmFnbWVudCwgbnVsbCwgY2hpbGRyZW4ob3Blbk1vZGFsKSwgc3RhdGUuaXNNb2RhbE9wZW4gJiYgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aU92ZXJsYXlNYXNrLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ29uZmlybU1vZGFsLCB7CiAgICB0aXRsZTogaTE4blRleHRzLm1vZGFsVGl0bGUsCiAgICBvbkNhbmNlbDogb25DYW5jZWwsCiAgICBvbkNvbmZpcm06IG9uQ29uZmlybSwKICAgIGNhbmNlbEJ1dHRvblRleHQ6IGkxOG5UZXh0cy5idXR0b25zLmNhbmNlbCwKICAgIGNvbmZpcm1CdXR0b25UZXh0OiBpMThuVGV4dHMuYnV0dG9ucy5jb25maXJtLAogICAgbWF4V2lkdGg6IDYwMAogIH0sIHZpZXcgPT09ICdqc29uJyA/IC8vIFRoZSBDU1Mgb3ZlcnJpZGUgZm9yIHRoZSBFdWlDb2RlRWRpdG9yIHJlcXVpcmVzIGEgcGFyZW50IC5hcHBsaWNhdGlvbiBjc3MgY2xhc3MKICBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICBjbGFzc05hbWU6ICJhcHBsaWNhdGlvbiIKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGV4dCwgewogICAgY29sb3I6ICJzdWJkdWVkIgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICBpZDogInhwYWNrLmlkeE1nbXQubWFwcGluZ3NFZGl0b3IubG9hZEpzb25Nb2RhbC5qc29uRWRpdG9ySGVscFRleHQiLAogICAgZGVmYXVsdE1lc3NhZ2U6ICJQcm92aWRlIGEgbWFwcGluZ3Mgb2JqZWN0LCBmb3IgZXhhbXBsZSwgdGhlIG9iamVjdCBhc3NpZ25lZCB0byBhbiBpbmRleCB7bWFwcGluZ3N9IHByb3BlcnR5LiBUaGlzIHdpbGwgb3ZlcndyaXRlIGV4aXN0aW5nIG1hcHBpbmdzLCBkeW5hbWljIHRlbXBsYXRlcywgYW5kIG9wdGlvbnMuIiwKICAgIHZhbHVlczogewogICAgICBtYXBwaW5nczogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiY29kZSIsIG51bGwsICJtYXBwaW5ncyIpCiAgICB9CiAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCB7CiAgICBzaXplOiAibSIKICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfc2hhcmVkX2ltcG9ydHMuSnNvbkVkaXRvciwgewogICAgbGFiZWw6IGkxOG5UZXh0cy5lZGl0b3IubGFiZWwsCiAgICBvblVwZGF0ZTogb25Kc29uVXBkYXRlLAogICAgZGVmYXVsdFZhbHVlOiAoX3N0YXRlJGpzb24gPSBzdGF0ZS5qc29uKSA9PT0gbnVsbCB8fCBfc3RhdGUkanNvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3N0YXRlJGpzb24udW5wYXJzZWQsCiAgICBldWlDb2RlRWRpdG9yUHJvcHM6IHsKICAgICAgaGVpZ2h0OiAnNDUwcHgnCiAgICB9CiAgfSkpIDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuZGVmYXVsdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNhbGxPdXQsIHsKICAgIHRpdGxlOiBpMThuVGV4dHMudmFsaWRhdGlvbkVycm9ycy50aXRsZSwKICAgIGljb25UeXBlOiAiYWxlcnQiLAogICAgY29sb3I6ICJ3YXJuaW5nIgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgaTE4blRleHRzLnZhbGlkYXRpb25FcnJvcnMuZGVzY3JpcHRpb24pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgbnVsbCksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoIm9sIiwgbnVsbCwgc3RhdGUuZXJyb3JzLnNsaWNlKDAsIHRvdGFsRXJyb3JzVG9EaXNwbGF5KS5tYXAoZnVuY3Rpb24gKGVycm9yLCBpKSB7CiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgibGkiLCB7CiAgICAgIGtleTogaQogICAgfSwgZ2V0RXJyb3JNZXNzYWdlKGVycm9yKSk7CiAgfSkpLCBzdGF0ZS5lcnJvcnMubGVuZ3RoID4gTUFYX0VSUk9SU19UT19ESVNQTEFZICYmIHJlbmRlckVycm9yc0ZpbHRlckJ1dHRvbigpKSkpKSk7Cn07CgpleHBvcnRzLkxvYWRNYXBwaW5nc1Byb3ZpZGVyID0gTG9hZE1hcHBpbmdzUHJvdmlkZXI7"},null]}