{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/maps/public/connected_components/widget_overlay/layer_control/layer_toc/toc_entry/view.js","dependencies":[{"path":"x-pack/legacy/plugins/maps/public/connected_components/widget_overlay/layer_control/layer_toc/toc_entry/view.js","mtime":1589249552428},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlRPQ0VudHJ5ID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX2NsYXNzbmFtZXMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImNsYXNzbmFtZXMiKSk7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9sYXllcl90b2NfYWN0aW9ucyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uL2NvbXBvbmVudHMvbGF5ZXJfdG9jX2FjdGlvbnMiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfQoKZnVuY3Rpb24gX2V4dGVuZHMoKSB7IF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCmZ1bmN0aW9uIGVzY2FwZUxheWVyTmFtZShuYW1lKSB7CiAgcmV0dXJuIG5hbWUgPyBuYW1lLnNwbGl0KCcgJykuam9pbignXycpIDogJyc7Cn0KCnZhciBUT0NFbnRyeSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHsKICBfaW5oZXJpdHMoVE9DRW50cnksIF9SZWFjdCRDb21wb25lbnQpOwoKICBmdW5jdGlvbiBUT0NFbnRyeSgpIHsKICAgIHZhciBfZ2V0UHJvdG90eXBlT2YyOwoKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVE9DRW50cnkpOwoKICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogICAgfQoKICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKF9nZXRQcm90b3R5cGVPZjIgPSBfZ2V0UHJvdG90eXBlT2YoVE9DRW50cnkpKS5jYWxsLmFwcGx5KF9nZXRQcm90b3R5cGVPZjIsIFt0aGlzXS5jb25jYXQoYXJncykpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzdGF0ZSIsIHsKICAgICAgZGlzcGxheU5hbWU6IG51bGwsCiAgICAgIGhhc0xlZ2VuZERldGFpbHM6IGZhbHNlLAogICAgICBzaG91bGRTaG93TW9kYWw6IGZhbHNlCiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfdG9nZ2xlTGF5ZXJEZXRhaWxzVmlzaWJpbGl0eSIsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKF90aGlzLnByb3BzLmlzTGVnZW5kRGV0YWlsc09wZW4pIHsKICAgICAgICBfdGhpcy5wcm9wcy5oaWRlVE9DRGV0YWlscyhfdGhpcy5wcm9wcy5sYXllci5nZXRJZCgpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpcy5wcm9wcy5zaG93VE9DRGV0YWlscyhfdGhpcy5wcm9wcy5sYXllci5nZXRJZCgpKTsKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX29wZW5MYXllclBhbmVsV2l0aENoZWNrIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMgPSBfdGhpcy5wcm9wcywKICAgICAgICAgIHNlbGVjdGVkTGF5ZXIgPSBfdGhpcyRwcm9wcy5zZWxlY3RlZExheWVyLAogICAgICAgICAgaGFzRGlydHlTdGF0ZVNlbGVjdG9yID0gX3RoaXMkcHJvcHMuaGFzRGlydHlTdGF0ZVNlbGVjdG9yOwoKICAgICAgaWYgKHNlbGVjdGVkTGF5ZXIgJiYgc2VsZWN0ZWRMYXllci5nZXRJZCgpID09PSBfdGhpcy5wcm9wcy5sYXllci5nZXRJZCgpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoaGFzRGlydHlTdGF0ZVNlbGVjdG9yKSB7CiAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgc2hvdWxkU2hvd01vZGFsOiB0cnVlCiAgICAgICAgfSk7CgogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgX3RoaXMucHJvcHMub3BlbkxheWVyUGFuZWwoX3RoaXMucHJvcHMubGF5ZXIuZ2V0SWQoKSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfcmVuZGVyTGVnZW5kRGV0YWlscyIsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCFfdGhpcy5wcm9wcy5pc0xlZ2VuZERldGFpbHNPcGVuIHx8ICFfdGhpcy5zdGF0ZS5oYXNMZWdlbmREZXRhaWxzKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHZhciB0b2NEZXRhaWxzID0gX3RoaXMucHJvcHMubGF5ZXIucmVuZGVyTGVnZW5kRGV0YWlscygpOwoKICAgICAgaWYgKCF0b2NEZXRhaWxzKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAibWFwVG9jRW50cnlfX2xheWVyRGV0YWlscyIsCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogIm1hcExheWVyVE9DRGV0YWlscyIuY29uY2F0KGVzY2FwZUxheWVyTmFtZShfdGhpcy5zdGF0ZS5kaXNwbGF5TmFtZSkpCiAgICAgIH0sIHRvY0RldGFpbHMpOwogICAgfSk7CgogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFRPQ0VudHJ5LCBbewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICB0aGlzLl9pc01vdW50ZWQgPSB0cnVlOwoKICAgICAgdGhpcy5fdXBkYXRlRGlzcGxheU5hbWUoKTsKCiAgICAgIHRoaXMuX2xvYWRIYXNMZWdlbmREZXRhaWxzKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50V2lsbFVubW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkgewogICAgICB0aGlzLl9pc01vdW50ZWQgPSBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnREaWRVcGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHsKICAgICAgdGhpcy5fdXBkYXRlRGlzcGxheU5hbWUoKTsKCiAgICAgIHRoaXMuX2xvYWRIYXNMZWdlbmREZXRhaWxzKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2xvYWRIYXNMZWdlbmREZXRhaWxzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfbG9hZEhhc0xlZ2VuZERldGFpbHMyID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgaGFzTGVnZW5kRGV0YWlsczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLmxheWVyLmhhc0xlZ2VuZERldGFpbHMoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX2NvbnRleHQudDEgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghX2NvbnRleHQudDEpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQxID0gdGhpcy5wcm9wcy5sYXllci5pc1Zpc2libGUoKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dC50MTsKCiAgICAgICAgICAgICAgICBpZiAoIV9jb250ZXh0LnQwKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IHRoaXMucHJvcHMubGF5ZXIuc2hvd0F0Wm9vbUxldmVsKHRoaXMucHJvcHMuem9vbSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIGhhc0xlZ2VuZERldGFpbHMgPSBfY29udGV4dC50MDsKCiAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNNb3VudGVkICYmIGhhc0xlZ2VuZERldGFpbHMgIT09IHRoaXMuc3RhdGUuaGFzTGVnZW5kRGV0YWlscykgewogICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICBoYXNMZWdlbmREZXRhaWxzOiBoYXNMZWdlbmREZXRhaWxzCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIF9sb2FkSGFzTGVnZW5kRGV0YWlscygpIHsKICAgICAgICByZXR1cm4gX2xvYWRIYXNMZWdlbmREZXRhaWxzMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gX2xvYWRIYXNMZWdlbmREZXRhaWxzOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiX3VwZGF0ZURpc3BsYXlOYW1lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdXBkYXRlRGlzcGxheU5hbWUyID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIGxhYmVsOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5sYXllci5nZXREaXNwbGF5TmFtZSgpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBsYWJlbCA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc01vdW50ZWQpIHsKICAgICAgICAgICAgICAgICAgaWYgKGxhYmVsICE9PSB0aGlzLnN0YXRlLmRpc3BsYXlOYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogbGFiZWwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBfdXBkYXRlRGlzcGxheU5hbWUoKSB7CiAgICAgICAgcmV0dXJuIF91cGRhdGVEaXNwbGF5TmFtZTIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIF91cGRhdGVEaXNwbGF5TmFtZTsKICAgIH0oKQogIH0sIHsKICAgIGtleTogIl9yZW5kZXJDYW5jZWxNb2RhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbmRlckNhbmNlbE1vZGFsKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICghdGhpcy5zdGF0ZS5zaG91bGRTaG93TW9kYWwpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgdmFyIGNsb3NlTW9kYWwgPSBmdW5jdGlvbiBjbG9zZU1vZGFsKCkgewogICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7CiAgICAgICAgICBzaG91bGRTaG93TW9kYWw6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICB2YXIgb3BlblBhbmVsID0gZnVuY3Rpb24gb3BlblBhbmVsKCkgewogICAgICAgIGNsb3NlTW9kYWwoKTsKCiAgICAgICAgX3RoaXMyLnByb3BzLm9wZW5MYXllclBhbmVsKF90aGlzMi5wcm9wcy5sYXllci5nZXRJZCgpKTsKICAgICAgfTsKCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpT3ZlcmxheU1hc2ssIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDb25maXJtTW9kYWwsIHsKICAgICAgICB0aXRsZTogIkRpc2NhcmQgY2hhbmdlcyIsCiAgICAgICAgb25DYW5jZWw6IGNsb3NlTW9kYWwsCiAgICAgICAgb25Db25maXJtOiBvcGVuUGFuZWwsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIkRvIG5vdCBwcm9jZWVkIiwKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIlByb2NlZWQgYW5kIGRpc2NhcmQgY2hhbmdlcyIsCiAgICAgICAgYnV0dG9uQ29sb3I6ICJkYW5nZXIiLAogICAgICAgIGRlZmF1bHRGb2N1c2VkQnV0dG9uOiAiY2FuY2VsIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgIlRoZXJlIGFyZSB1bnNhdmVkIGNoYW5nZXMgdG8geW91ciBsYXllci4iKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsICJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcHJvY2VlZD8iKSkpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9yZW5kZXJMYXllckljb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVuZGVyTGF5ZXJJY29ucygpIHsKICAgICAgaWYgKHRoaXMucHJvcHMuaXNSZWFkT25seSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogIm1hcFRvY0VudHJ5X19sYXllckljb25zIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uSWNvbiwgewogICAgICAgIGljb25UeXBlOiAicGVuY2lsIiwKICAgICAgICAiYXJpYS1sYWJlbCI6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tYXBzLmxheWVyQ29udHJvbC50b2NFbnRyeS5lZGl0QnV0dG9uQXJpYUxhYmVsJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdFZGl0IGxheWVyJwogICAgICAgIH0pLAogICAgICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWFwcy5sYXllckNvbnRyb2wudG9jRW50cnkuZWRpdEJ1dHRvblRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdFZGl0IGxheWVyJwogICAgICAgIH0pLAogICAgICAgIG9uQ2xpY2s6IHRoaXMuX29wZW5MYXllclBhbmVsV2l0aENoZWNrCiAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uSWNvbiwgX2V4dGVuZHMoewogICAgICAgIGljb25UeXBlOiAiZ3JhYiIsCiAgICAgICAgY29sb3I6ICJzdWJkdWVkIiwKICAgICAgICB0aXRsZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1hcHMubGF5ZXJDb250cm9sLnRvY0VudHJ5LmdyYWJCdXR0b25UaXRsZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmVvcmRlciBsYXllcicKICAgICAgICB9KSwKICAgICAgICAiYXJpYS1sYWJlbCI6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tYXBzLmxheWVyQ29udHJvbC50b2NFbnRyeS5ncmFiQnV0dG9uQXJpYUxhYmVsJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdSZW9yZGVyIGxheWVyJwogICAgICAgIH0pLAogICAgICAgIGNsYXNzTmFtZTogIm1hcFRvY0VudHJ5X19ncmFiIgogICAgICB9LCB0aGlzLnByb3BzLmRyYWdIYW5kbGVQcm9wcykpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfcmVuZGVyRGV0YWlsc1RvZ2dsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbmRlckRldGFpbHNUb2dnbGUoKSB7CiAgICAgIGlmICghdGhpcy5zdGF0ZS5oYXNMZWdlbmREZXRhaWxzKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHZhciBpc0xlZ2VuZERldGFpbHNPcGVuID0gdGhpcy5wcm9wcy5pc0xlZ2VuZERldGFpbHNPcGVuOwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICBjbGFzc05hbWU6ICJtYXBUb2NFbnRyeV9fZGV0YWlsc1RvZ2dsZSIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgIGNsYXNzTmFtZTogIm1hcFRvY0VudHJ5X19kZXRhaWxzVG9nZ2xlQnV0dG9uIiwKICAgICAgICAiYXJpYS1sYWJlbCI6IGlzTGVnZW5kRGV0YWlsc09wZW4gPyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWFwcy5sYXllckNvbnRyb2wudG9jRW50cnkuaGlkZURldGFpbHNCdXR0b25BcmlhTGFiZWwnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0hpZGUgbGF5ZXIgZGV0YWlscycKICAgICAgICB9KSA6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tYXBzLmxheWVyQ29udHJvbC50b2NFbnRyeS5zaG93RGV0YWlsc0J1dHRvbkFyaWFMYWJlbCcsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU2hvdyBsYXllciBkZXRhaWxzJwogICAgICAgIH0pLAogICAgICAgIHRpdGxlOiBpc0xlZ2VuZERldGFpbHNPcGVuID8gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1hcHMubGF5ZXJDb250cm9sLnRvY0VudHJ5LmhpZGVEZXRhaWxzQnV0dG9uVGl0bGUnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0hpZGUgbGF5ZXIgZGV0YWlscycKICAgICAgICB9KSA6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tYXBzLmxheWVyQ29udHJvbC50b2NFbnRyeS5zaG93RGV0YWlsc0J1dHRvblRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTaG93IGxheWVyIGRldGFpbHMnCiAgICAgICAgfSksCiAgICAgICAgb25DbGljazogdGhpcy5fdG9nZ2xlTGF5ZXJEZXRhaWxzVmlzaWJpbGl0eQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpSWNvbiwgewogICAgICAgIGNsYXNzTmFtZTogImV1aS1hbGlnbkJhc2VsaW5lIiwKICAgICAgICB0eXBlOiBpc0xlZ2VuZERldGFpbHNPcGVuID8gJ2Fycm93VXAnIDogJ2Fycm93RG93bicsCiAgICAgICAgc2l6ZTogInMiCiAgICAgIH0pKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3JlbmRlckxheWVySGVhZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVuZGVyTGF5ZXJIZWFkZXIoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLAogICAgICAgICAgX3JlbW92ZUxheWVyID0gX3RoaXMkcHJvcHMyLnJlbW92ZUxheWVyLAogICAgICAgICAgX2Nsb25lTGF5ZXIgPSBfdGhpcyRwcm9wczIuY2xvbmVMYXllciwKICAgICAgICAgIGlzUmVhZE9ubHkgPSBfdGhpcyRwcm9wczIuaXNSZWFkT25seSwKICAgICAgICAgIGxheWVyID0gX3RoaXMkcHJvcHMyLmxheWVyLAogICAgICAgICAgem9vbSA9IF90aGlzJHByb3BzMi56b29tLAogICAgICAgICAgX3RvZ2dsZVZpc2libGUgPSBfdGhpcyRwcm9wczIudG9nZ2xlVmlzaWJsZSwKICAgICAgICAgIF9maXRUb0JvdW5kcyA9IF90aGlzJHByb3BzMi5maXRUb0JvdW5kcywKICAgICAgICAgIGlzVXNpbmdTZWFyY2ggPSBfdGhpcyRwcm9wczIuaXNVc2luZ1NlYXJjaDsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBjbGFzc05hbWU6IGxheWVyLmlzVmlzaWJsZSgpICYmIGxheWVyLnNob3dBdFpvb21MZXZlbCh6b29tKSAmJiAhbGF5ZXIuaGFzRXJyb3JzKCkgPyAnbWFwVG9jRW50cnktdmlzaWJsZScgOiAnbWFwVG9jRW50cnktbm90VmlzaWJsZScKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfbGF5ZXJfdG9jX2FjdGlvbnMuTGF5ZXJUb2NBY3Rpb25zLCB7CiAgICAgICAgbGF5ZXI6IGxheWVyLAogICAgICAgIGlzVXNpbmdTZWFyY2g6IGlzVXNpbmdTZWFyY2gsCiAgICAgICAgZml0VG9Cb3VuZHM6IGZ1bmN0aW9uIGZpdFRvQm91bmRzKCkgewogICAgICAgICAgX2ZpdFRvQm91bmRzKGxheWVyLmdldElkKCkpOwogICAgICAgIH0sCiAgICAgICAgem9vbTogem9vbSwKICAgICAgICB0b2dnbGVWaXNpYmxlOiBmdW5jdGlvbiB0b2dnbGVWaXNpYmxlKCkgewogICAgICAgICAgX3RvZ2dsZVZpc2libGUobGF5ZXIuZ2V0SWQoKSk7CiAgICAgICAgfSwKICAgICAgICBkaXNwbGF5TmFtZTogdGhpcy5zdGF0ZS5kaXNwbGF5TmFtZSwKICAgICAgICBlc2NhcGVkRGlzcGxheU5hbWU6IGVzY2FwZUxheWVyTmFtZSh0aGlzLnN0YXRlLmRpc3BsYXlOYW1lKSwKICAgICAgICBjbG9uZUxheWVyOiBmdW5jdGlvbiBjbG9uZUxheWVyKCkgewogICAgICAgICAgX2Nsb25lTGF5ZXIobGF5ZXIuZ2V0SWQoKSk7CiAgICAgICAgfSwKICAgICAgICBlZGl0TGF5ZXI6IHRoaXMuX29wZW5MYXllclBhbmVsV2l0aENoZWNrLAogICAgICAgIGlzUmVhZE9ubHk6IGlzUmVhZE9ubHksCiAgICAgICAgcmVtb3ZlTGF5ZXI6IGZ1bmN0aW9uIHJlbW92ZUxheWVyKCkgewogICAgICAgICAgX3JlbW92ZUxheWVyKGxheWVyLmdldElkKCkpOwogICAgICAgIH0KICAgICAgfSksIHRoaXMuX3JlbmRlckxheWVySWNvbnMoKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBjbGFzc2VzID0gKDAsIF9jbGFzc25hbWVzLmRlZmF1bHQpKCdtYXBUb2NFbnRyeScsIHsKICAgICAgICAnbWFwVG9jRW50cnktaXNEcmFnZ2luZyc6IHRoaXMucHJvcHMuaXNEcmFnZ2luZywKICAgICAgICAnbWFwVG9jRW50cnktaXNEcmFnZ2luZ092ZXInOiB0aGlzLnByb3BzLmlzRHJhZ2dpbmdPdmVyCiAgICAgIH0pOwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogY2xhc3NlcywKICAgICAgICBpZDogdGhpcy5wcm9wcy5sYXllci5nZXRJZCgpLAogICAgICAgICJkYXRhLWxheWVyaWQiOiB0aGlzLnByb3BzLmxheWVyLmdldElkKCkKICAgICAgfSwgdGhpcy5fcmVuZGVyTGF5ZXJIZWFkZXIoKSwgdGhpcy5fcmVuZGVyTGVnZW5kRGV0YWlscygpLCB0aGlzLl9yZW5kZXJEZXRhaWxzVG9nZ2xlKCksIHRoaXMuX3JlbmRlckNhbmNlbE1vZGFsKCkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFRPQ0VudHJ5Owp9KF9yZWFjdC5kZWZhdWx0LkNvbXBvbmVudCk7CgpleHBvcnRzLlRPQ0VudHJ5ID0gVE9DRW50cnk7"},null]}