{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/kibana/public/management/sections/objects/components/objects_table/components/relationships/relationships.js","dependencies":[{"path":"src/legacy/core_plugins/kibana/public/management/sections/objects/components/objects_table/components/relationships/relationships.js","mtime":1589249549850},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlJlbGF0aW9uc2hpcHMgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3Byb3BUeXBlcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicHJvcC10eXBlcyIpKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX2Nocm9tZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgidWkvY2hyb21lIikpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX3JlYWN0MiA9IHJlcXVpcmUoIkBrYm4vaTE4bi9yZWFjdCIpOwoKdmFyIF9saWIgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9saWIiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7IHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OyBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsgfSBlbHNlIHsgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IH0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCnZhciBSZWxhdGlvbnNoaXBzID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhSZWxhdGlvbnNoaXBzLCBfQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gUmVsYXRpb25zaGlwcyhwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWxhdGlvbnNoaXBzKTsKCiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihSZWxhdGlvbnNoaXBzKS5jYWxsKHRoaXMsIHByb3BzKSk7CiAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgcmVsYXRpb25zaGlwczogdW5kZWZpbmVkLAogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICBlcnJvcjogdW5kZWZpbmVkCiAgICB9OwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFJlbGF0aW9uc2hpcHMsIFt7CiAgICBrZXk6ICJVTlNBRkVfY29tcG9uZW50V2lsbE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBVTlNBRkVfY29tcG9uZW50V2lsbE1vdW50KCkgewogICAgICB0aGlzLmdldFJlbGF0aW9uc2hpcERhdGEoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJVTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7CiAgICAgIGlmIChuZXh0UHJvcHMuc2F2ZWRPYmplY3QuaWQgIT09IHRoaXMucHJvcHMuc2F2ZWRPYmplY3QuaWQpIHsKICAgICAgICB0aGlzLmdldFJlbGF0aW9uc2hpcERhdGEoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImdldFJlbGF0aW9uc2hpcERhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRSZWxhdGlvbnNoaXBEYXRhID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgX3RoaXMkcHJvcHMsIHNhdmVkT2JqZWN0LCBnZXRSZWxhdGlvbnNoaXBzLCByZWxhdGlvbnNoaXBzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcyRwcm9wcyA9IHRoaXMucHJvcHMsIHNhdmVkT2JqZWN0ID0gX3RoaXMkcHJvcHMuc2F2ZWRPYmplY3QsIGdldFJlbGF0aW9uc2hpcHMgPSBfdGhpcyRwcm9wcy5nZXRSZWxhdGlvbnNoaXBzOwogICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIGlzTG9hZGluZzogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGdldFJlbGF0aW9uc2hpcHMoc2F2ZWRPYmplY3QudHlwZSwgc2F2ZWRPYmplY3QuaWQpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICByZWxhdGlvbnNoaXBzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICByZWxhdGlvbnNoaXBzOiByZWxhdGlvbnNoaXBzLAogICAgICAgICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgICBlcnJvcjogdW5kZWZpbmVkCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gOTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMik7CiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgZXJyb3I6IF9jb250ZXh0LnQwLm1lc3NhZ2UsCiAgICAgICAgICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcywgW1syLCA5XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRSZWxhdGlvbnNoaXBEYXRhKCkgewogICAgICAgIHJldHVybiBfZ2V0UmVsYXRpb25zaGlwRGF0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0UmVsYXRpb25zaGlwRGF0YTsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInJlbmRlckVycm9yIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJFcnJvcigpIHsKICAgICAgdmFyIGVycm9yID0gdGhpcy5zdGF0ZS5lcnJvcjsKCiAgICAgIGlmICghZXJyb3IpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDYWxsT3V0LCB7CiAgICAgICAgdGl0bGU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogImtibi5tYW5hZ2VtZW50Lm9iamVjdHMub2JqZWN0c1RhYmxlLnJlbGF0aW9uc2hpcHMucmVuZGVyRXJyb3JNZXNzYWdlIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRXJyb3IiCiAgICAgICAgfSksCiAgICAgICAgY29sb3I6ICJkYW5nZXIiCiAgICAgIH0sIGVycm9yKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXJSZWxhdGlvbnNoaXBzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJSZWxhdGlvbnNoaXBzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLAogICAgICAgICAgZ29JbnNwZWN0T2JqZWN0ID0gX3RoaXMkcHJvcHMyLmdvSW5zcGVjdE9iamVjdCwKICAgICAgICAgIHNhdmVkT2JqZWN0ID0gX3RoaXMkcHJvcHMyLnNhdmVkT2JqZWN0OwogICAgICB2YXIgX3RoaXMkc3RhdGUgPSB0aGlzLnN0YXRlLAogICAgICAgICAgcmVsYXRpb25zaGlwcyA9IF90aGlzJHN0YXRlLnJlbGF0aW9uc2hpcHMsCiAgICAgICAgICBpc0xvYWRpbmcgPSBfdGhpcyRzdGF0ZS5pc0xvYWRpbmcsCiAgICAgICAgICBlcnJvciA9IF90aGlzJHN0YXRlLmVycm9yOwoKICAgICAgaWYgKGVycm9yKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyRXJyb3IoKTsKICAgICAgfQoKICAgICAgaWYgKGlzTG9hZGluZykgewogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpTG9hZGluZ0tpYmFuYSwgewogICAgICAgICAgc2l6ZTogInhsIgogICAgICAgIH0pOwogICAgICB9CgogICAgICB2YXIgY29sdW1ucyA9IFt7CiAgICAgICAgZmllbGQ6ICd0eXBlJywKICAgICAgICBuYW1lOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgna2JuLm1hbmFnZW1lbnQub2JqZWN0cy5vYmplY3RzVGFibGUucmVsYXRpb25zaGlwcy5jb2x1bW5UeXBlTmFtZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVHlwZScKICAgICAgICB9KSwKICAgICAgICB3aWR0aDogJzUwcHgnLAogICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICBkZXNjcmlwdGlvbjogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5tYW5hZ2VtZW50Lm9iamVjdHMub2JqZWN0c1RhYmxlLnJlbGF0aW9uc2hpcHMuY29sdW1uVHlwZURlc2NyaXB0aW9uJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdUeXBlIG9mIHRoZSBzYXZlZCBvYmplY3QnCiAgICAgICAgfSksCiAgICAgICAgc29ydGFibGU6IGZhbHNlLAogICAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHR5cGUsIG9iamVjdCkgewogICAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUb29sVGlwLCB7CiAgICAgICAgICAgIHBvc2l0aW9uOiAidG9wIiwKICAgICAgICAgICAgY29udGVudDogKDAsIF9saWIuZ2V0U2F2ZWRPYmplY3RMYWJlbCkodHlwZSkKICAgICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlJY29uLCB7CiAgICAgICAgICAgICJhcmlhLWxhYmVsIjogKDAsIF9saWIuZ2V0U2F2ZWRPYmplY3RMYWJlbCkodHlwZSksCiAgICAgICAgICAgIHR5cGU6IG9iamVjdC5tZXRhLmljb24gfHwgJ2FwcHMnLAogICAgICAgICAgICBzaXplOiAicyIsCiAgICAgICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJyZWxhdGlvbnNoaXBzT2JqZWN0VHlwZSIKICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBmaWVsZDogJ3JlbGF0aW9uc2hpcCcsCiAgICAgICAgbmFtZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5tYW5hZ2VtZW50Lm9iamVjdHMub2JqZWN0c1RhYmxlLnJlbGF0aW9uc2hpcHMuY29sdW1uUmVsYXRpb25zaGlwTmFtZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRGlyZWN0IHJlbGF0aW9uc2hpcCcKICAgICAgICB9KSwKICAgICAgICBkYXRhVHlwZTogJ3N0cmluZycsCiAgICAgICAgc29ydGFibGU6IGZhbHNlLAogICAgICAgIHdpZHRoOiAnMTI1cHgnLAogICAgICAgICdkYXRhLXRlc3Qtc3Viaic6ICdkaXJlY3RSZWxhdGlvbnNoaXAnLAogICAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHJlbGF0aW9uc2hpcCkgewogICAgICAgICAgaWYgKHJlbGF0aW9uc2hpcCA9PT0gJ3BhcmVudCcpIHsKICAgICAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0LCB7CiAgICAgICAgICAgICAgc2l6ZTogInMiCiAgICAgICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgaWQ6ICJrYm4ubWFuYWdlbWVudC5vYmplY3RzLm9iamVjdHNUYWJsZS5yZWxhdGlvbnNoaXBzLmNvbHVtblJlbGF0aW9uc2hpcC5wYXJlbnRBc1ZhbHVlIiwKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlBhcmVudCIKICAgICAgICAgICAgfSkpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChyZWxhdGlvbnNoaXAgPT09ICdjaGlsZCcpIHsKICAgICAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0LCB7CiAgICAgICAgICAgICAgc2l6ZTogInMiCiAgICAgICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgaWQ6ICJrYm4ubWFuYWdlbWVudC5vYmplY3RzLm9iamVjdHNUYWJsZS5yZWxhdGlvbnNoaXBzLmNvbHVtblJlbGF0aW9uc2hpcC5jaGlsZEFzVmFsdWUiLAogICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQ2hpbGQiCiAgICAgICAgICAgIH0pKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBmaWVsZDogJ21ldGEudGl0bGUnLAogICAgICAgIG5hbWU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCdrYm4ubWFuYWdlbWVudC5vYmplY3RzLm9iamVjdHNUYWJsZS5yZWxhdGlvbnNoaXBzLmNvbHVtblRpdGxlTmFtZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVGl0bGUnCiAgICAgICAgfSksCiAgICAgICAgZGVzY3JpcHRpb246IF9pMThuLmkxOG4udHJhbnNsYXRlKCdrYm4ubWFuYWdlbWVudC5vYmplY3RzLm9iamVjdHNUYWJsZS5yZWxhdGlvbnNoaXBzLmNvbHVtblRpdGxlRGVzY3JpcHRpb24nLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1RpdGxlIG9mIHRoZSBzYXZlZCBvYmplY3QnCiAgICAgICAgfSksCiAgICAgICAgZGF0YVR5cGU6ICdzdHJpbmcnLAogICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcih0aXRsZSwgb2JqZWN0KSB7CiAgICAgICAgICB2YXIgX3JlZiA9IG9iamVjdC5tZXRhLmluQXBwVXJsIHx8IHt9LAogICAgICAgICAgICAgIHBhdGggPSBfcmVmLnBhdGg7CgogICAgICAgICAgdmFyIGNhbkdvSW5BcHAgPSBfdGhpczIucHJvcHMuY2FuR29JbkFwcChvYmplY3QpOwoKICAgICAgICAgIGlmICghY2FuR29JbkFwcCkgewogICAgICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRleHQsIHsKICAgICAgICAgICAgICBzaXplOiAicyIsCiAgICAgICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInJlbGF0aW9uc2hpcHNUaXRsZSIKICAgICAgICAgICAgfSwgdGl0bGUgfHwgKDAsIF9saWIuZ2V0RGVmYXVsdFRpdGxlKShvYmplY3QpKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUxpbmssIHsKICAgICAgICAgICAgaHJlZjogX2Nocm9tZS5kZWZhdWx0LmFkZEJhc2VQYXRoKHBhdGgpLAogICAgICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAicmVsYXRpb25zaGlwc1RpdGxlIgogICAgICAgICAgfSwgdGl0bGUgfHwgKDAsIF9saWIuZ2V0RGVmYXVsdFRpdGxlKShvYmplY3QpKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBuYW1lOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgna2JuLm1hbmFnZW1lbnQub2JqZWN0cy5vYmplY3RzVGFibGUucmVsYXRpb25zaGlwcy5jb2x1bW5BY3Rpb25zTmFtZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQWN0aW9ucycKICAgICAgICB9KSwKICAgICAgICBhY3Rpb25zOiBbewogICAgICAgICAgbmFtZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5tYW5hZ2VtZW50Lm9iamVjdHMub2JqZWN0c1RhYmxlLnJlbGF0aW9uc2hpcHMuY29sdW1uQWN0aW9ucy5pbnNwZWN0QWN0aW9uTmFtZScsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdJbnNwZWN0JwogICAgICAgICAgfSksCiAgICAgICAgICBkZXNjcmlwdGlvbjogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5tYW5hZ2VtZW50Lm9iamVjdHMub2JqZWN0c1RhYmxlLnJlbGF0aW9uc2hpcHMuY29sdW1uQWN0aW9ucy5pbnNwZWN0QWN0aW9uRGVzY3JpcHRpb24nLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnSW5zcGVjdCB0aGlzIHNhdmVkIG9iamVjdCcKICAgICAgICAgIH0pLAogICAgICAgICAgdHlwZTogJ2ljb24nLAogICAgICAgICAgaWNvbjogJ2luc3BlY3QnLAogICAgICAgICAgJ2RhdGEtdGVzdC1zdWJqJzogJ3JlbGF0aW9uc2hpcHNUYWJsZUFjdGlvbi1pbnNwZWN0JywKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2sob2JqZWN0KSB7CiAgICAgICAgICAgIHJldHVybiBnb0luc3BlY3RPYmplY3Qob2JqZWN0KTsKICAgICAgICAgIH0sCiAgICAgICAgICBhdmFpbGFibGU6IGZ1bmN0aW9uIGF2YWlsYWJsZShvYmplY3QpIHsKICAgICAgICAgICAgcmV0dXJuICEhb2JqZWN0Lm1ldGEuZWRpdFVybDsKICAgICAgICAgIH0KICAgICAgICB9XQogICAgICB9XTsKICAgICAgdmFyIGZpbHRlclR5cGVzTWFwID0gbmV3IE1hcChyZWxhdGlvbnNoaXBzLm1hcChmdW5jdGlvbiAocmVsYXRpb25zaGlwKSB7CiAgICAgICAgcmV0dXJuIFtyZWxhdGlvbnNoaXAudHlwZSwgewogICAgICAgICAgdmFsdWU6IHJlbGF0aW9uc2hpcC50eXBlLAogICAgICAgICAgbmFtZTogcmVsYXRpb25zaGlwLnR5cGUsCiAgICAgICAgICB2aWV3OiByZWxhdGlvbnNoaXAudHlwZQogICAgICAgIH1dOwogICAgICB9KSk7CiAgICAgIHZhciBzZWFyY2ggPSB7CiAgICAgICAgZmlsdGVyczogW3sKICAgICAgICAgIHR5cGU6ICdmaWVsZF92YWx1ZV9zZWxlY3Rpb24nLAogICAgICAgICAgZmllbGQ6ICdyZWxhdGlvbnNoaXAnLAogICAgICAgICAgbmFtZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5tYW5hZ2VtZW50Lm9iamVjdHMub2JqZWN0c1RhYmxlLnJlbGF0aW9uc2hpcHMuc2VhcmNoLmZpbHRlcnMucmVsYXRpb25zaGlwLm5hbWUnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRGlyZWN0IHJlbGF0aW9uc2hpcCcKICAgICAgICAgIH0pLAogICAgICAgICAgbXVsdGlTZWxlY3Q6ICdvcicsCiAgICAgICAgICBvcHRpb25zOiBbewogICAgICAgICAgICB2YWx1ZTogJ3BhcmVudCcsCiAgICAgICAgICAgIG5hbWU6ICdwYXJlbnQnLAogICAgICAgICAgICB2aWV3OiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgna2JuLm1hbmFnZW1lbnQub2JqZWN0cy5vYmplY3RzVGFibGUucmVsYXRpb25zaGlwcy5zZWFyY2guZmlsdGVycy5yZWxhdGlvbnNoaXAucGFyZW50QXNWYWx1ZS52aWV3JywgewogICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUGFyZW50JwogICAgICAgICAgICB9KQogICAgICAgICAgfSwgewogICAgICAgICAgICB2YWx1ZTogJ2NoaWxkJywKICAgICAgICAgICAgbmFtZTogJ2NoaWxkJywKICAgICAgICAgICAgdmlldzogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tibi5tYW5hZ2VtZW50Lm9iamVjdHMub2JqZWN0c1RhYmxlLnJlbGF0aW9uc2hpcHMuc2VhcmNoLmZpbHRlcnMucmVsYXRpb25zaGlwLmNoaWxkQXNWYWx1ZS52aWV3JywgewogICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ2hpbGQnCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9XQogICAgICAgIH0sIHsKICAgICAgICAgIHR5cGU6ICdmaWVsZF92YWx1ZV9zZWxlY3Rpb24nLAogICAgICAgICAgZmllbGQ6ICd0eXBlJywKICAgICAgICAgIG5hbWU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCdrYm4ubWFuYWdlbWVudC5vYmplY3RzLm9iamVjdHNUYWJsZS5yZWxhdGlvbnNoaXBzLnNlYXJjaC5maWx0ZXJzLnR5cGUubmFtZScsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdUeXBlJwogICAgICAgICAgfSksCiAgICAgICAgICBtdWx0aVNlbGVjdDogJ29yJywKICAgICAgICAgIG9wdGlvbnM6IF90b0NvbnN1bWFibGVBcnJheShmaWx0ZXJUeXBlc01hcC52YWx1ZXMoKSkKICAgICAgICB9XQogICAgICB9OwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNhbGxPdXQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgna2JuLm1hbmFnZW1lbnQub2JqZWN0cy5vYmplY3RzVGFibGUucmVsYXRpb25zaGlwcy5yZWxhdGlvbnNoaXBzVGl0bGUnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdIZXJlIGFyZSB0aGUgc2F2ZWQgb2JqZWN0cyByZWxhdGVkIHRvIHt0aXRsZX0uICcgKyAnRGVsZXRpbmcgdGhpcyB7dHlwZX0gYWZmZWN0cyBpdHMgcGFyZW50IG9iamVjdHMsIGJ1dCBub3QgaXRzIGNoaWxkcmVuLicsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICB0eXBlOiBzYXZlZE9iamVjdC50eXBlLAogICAgICAgICAgdGl0bGU6IHNhdmVkT2JqZWN0Lm1ldGEudGl0bGUgfHwgKDAsIF9saWIuZ2V0RGVmYXVsdFRpdGxlKShzYXZlZE9iamVjdCkKICAgICAgICB9CiAgICAgIH0pKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIG51bGwpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpSW5NZW1vcnlUYWJsZSwgewogICAgICAgIGl0ZW1zOiByZWxhdGlvbnNoaXBzLAogICAgICAgIGNvbHVtbnM6IGNvbHVtbnMsCiAgICAgICAgcGFnaW5hdGlvbjogdHJ1ZSwKICAgICAgICBzZWFyY2g6IHNlYXJjaCwKICAgICAgICByb3dQcm9wczogZnVuY3Rpb24gcm93UHJvcHMoKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAnZGF0YS10ZXN0LXN1YmonOiAicmVsYXRpb25zaGlwc1RhYmxlUm93IgogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0pKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzJHByb3BzMyA9IHRoaXMucHJvcHMsCiAgICAgICAgICBjbG9zZSA9IF90aGlzJHByb3BzMy5jbG9zZSwKICAgICAgICAgIHNhdmVkT2JqZWN0ID0gX3RoaXMkcHJvcHMzLnNhdmVkT2JqZWN0OwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZseW91dCwgewogICAgICAgIG9uQ2xvc2U6IGNsb3NlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbHlvdXRIZWFkZXIsIHsKICAgICAgICBoYXNCb3JkZXI6IHRydWUKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRpdGxlLCB7CiAgICAgICAgc2l6ZTogIm0iCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImgyIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRvb2xUaXAsIHsKICAgICAgICBwb3NpdGlvbjogInRvcCIsCiAgICAgICAgY29udGVudDogKDAsIF9saWIuZ2V0U2F2ZWRPYmplY3RMYWJlbCkoc2F2ZWRPYmplY3QudHlwZSkKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUljb24sIHsKICAgICAgICAiYXJpYS1sYWJlbCI6ICgwLCBfbGliLmdldFNhdmVkT2JqZWN0TGFiZWwpKHNhdmVkT2JqZWN0LnR5cGUpLAogICAgICAgIHNpemU6ICJtIiwKICAgICAgICB0eXBlOiBzYXZlZE9iamVjdC5tZXRhLmljb24gfHwgJ2FwcHMnCiAgICAgIH0pKSwgIlx4QTBceEEwIiwgc2F2ZWRPYmplY3QubWV0YS50aXRsZSB8fCAoMCwgX2xpYi5nZXREZWZhdWx0VGl0bGUpKHNhdmVkT2JqZWN0KSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZseW91dEJvZHksIG51bGwsIHRoaXMucmVuZGVyUmVsYXRpb25zaGlwcygpKSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUmVsYXRpb25zaGlwczsKfShfcmVhY3QuQ29tcG9uZW50KTsKCmV4cG9ydHMuUmVsYXRpb25zaGlwcyA9IFJlbGF0aW9uc2hpcHM7CgpfZGVmaW5lUHJvcGVydHkoUmVsYXRpb25zaGlwcywgInByb3BUeXBlcyIsIHsKICBnZXRSZWxhdGlvbnNoaXBzOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYy5pc1JlcXVpcmVkLAogIHNhdmVkT2JqZWN0OiBfcHJvcFR5cGVzLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWQsCiAgY2xvc2U6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQsCiAgZ29JbnNwZWN0T2JqZWN0OiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYy5pc1JlcXVpcmVkLAogIGNhbkdvSW5BcHA6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLmlzUmVxdWlyZWQKfSk7"},null]}