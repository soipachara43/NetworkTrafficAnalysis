{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/maps/public/layers/sources/kibana_regionmap_source/kibana_regionmap_source.js","dependencies":[{"path":"x-pack/legacy/plugins/maps/public/layers/sources/kibana_regionmap_source/kibana_regionmap_source.js","mtime":1589249552460},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLktpYmFuYVJlZ2lvbm1hcFNvdXJjZSA9IHZvaWQgMDsKCnZhciBfdmVjdG9yX3NvdXJjZSA9IHJlcXVpcmUoIi4uL3ZlY3Rvcl9zb3VyY2UiKTsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9jcmVhdGVfc291cmNlX2VkaXRvciA9IHJlcXVpcmUoIi4vY3JlYXRlX3NvdXJjZV9lZGl0b3IiKTsKCnZhciBfbWV0YSA9IHJlcXVpcmUoIi4uLy4uLy4uL21ldGEiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9pMThuX2dldHRlcnMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21tb24vaTE4bl9nZXR0ZXJzIik7Cgp2YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbW1vbi9jb25zdGFudHMiKTsKCnZhciBfa2liYW5hX3JlZ2lvbl9maWVsZCA9IHJlcXVpcmUoIi4uLy4uL2ZpZWxkcy9raWJhbmFfcmVnaW9uX2ZpZWxkIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7IHRyeSB7IHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsgfSBjYXRjaCAoZXJyb3IpIHsgcmVqZWN0KGVycm9yKTsgcmV0dXJuOyB9IGlmIChpbmZvLmRvbmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0gZWxzZSB7IFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsgfSB9CgpmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgc2VsZiA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTsgZnVuY3Rpb24gX25leHQodmFsdWUpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAibmV4dCIsIHZhbHVlKTsgfSBmdW5jdGlvbiBfdGhyb3coZXJyKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgInRocm93IiwgZXJyKTsgfSBfbmV4dCh1bmRlZmluZWQpOyB9KTsgfTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgeyByZXR1cm4gY2FsbDsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfQoKZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gc2VsZjsgfQoKZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9Cgp2YXIgS2liYW5hUmVnaW9ubWFwU291cmNlID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX0Fic3RyYWN0VmVjdG9yU291cmNlKSB7CiAgX2luaGVyaXRzKEtpYmFuYVJlZ2lvbm1hcFNvdXJjZSwgX0Fic3RyYWN0VmVjdG9yU291cmNlKTsKCiAgZnVuY3Rpb24gS2liYW5hUmVnaW9ubWFwU291cmNlKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEtpYmFuYVJlZ2lvbm1hcFNvdXJjZSk7CgogICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihLaWJhbmFSZWdpb25tYXBTb3VyY2UpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEtpYmFuYVJlZ2lvbm1hcFNvdXJjZSwgW3sKICAgIGtleTogImNyZWF0ZUZpZWxkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVGaWVsZChfcmVmKSB7CiAgICAgIHZhciBmaWVsZE5hbWUgPSBfcmVmLmZpZWxkTmFtZTsKICAgICAgcmV0dXJuIG5ldyBfa2liYW5hX3JlZ2lvbl9maWVsZC5LaWJhbmFSZWdpb25GaWVsZCh7CiAgICAgICAgZmllbGROYW1lOiBmaWVsZE5hbWUsCiAgICAgICAgc291cmNlOiB0aGlzLAogICAgICAgIG9yaWdpbjogX2NvbnN0YW50cy5GSUVMRF9PUklHSU4uU09VUkNFCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEltbXV0YWJsZVByb3BlcnRpZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRJbW11dGFibGVQcm9wZXJ0aWVzID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBbewogICAgICAgICAgICAgICAgICBsYWJlbDogKDAsIF9pMThuX2dldHRlcnMuZ2V0RGF0YVNvdXJjZUxhYmVsKSgpLAogICAgICAgICAgICAgICAgICB2YWx1ZTogS2liYW5hUmVnaW9ubWFwU291cmNlLnRpdGxlCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWFwcy5zb3VyY2Uua2JuUmVnaW9uTWFwLnZlY3RvckxheWVyTGFiZWwnLCB7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdWZWN0b3IgbGF5ZXInCiAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5fZGVzY3JpcHRvci5uYW1lCiAgICAgICAgICAgICAgICB9XSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRJbW11dGFibGVQcm9wZXJ0aWVzKCkgewogICAgICAgIHJldHVybiBfZ2V0SW1tdXRhYmxlUHJvcGVydGllcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0SW1tdXRhYmxlUHJvcGVydGllczsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImdldFZlY3RvckZpbGVNZXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0VmVjdG9yRmlsZU1ldGEgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICB2YXIgcmVnaW9uTGlzdCwgbWV0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmVnaW9uTGlzdCA9ICgwLCBfbWV0YS5nZXRLaWJhbmFSZWdpb25MaXN0KSgpOwogICAgICAgICAgICAgICAgbWV0YSA9IHJlZ2lvbkxpc3QuZmluZChmdW5jdGlvbiAoc291cmNlKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBzb3VyY2UubmFtZSA9PT0gX3RoaXMuX2Rlc2NyaXB0b3IubmFtZTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmIChtZXRhKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tYXBzLnNvdXJjZS5rYm5SZWdpb25NYXAubm9Db25maWdFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVW5hYmxlIHRvIGZpbmQgbWFwLnJlZ2lvbm1hcCBjb25maWd1cmF0aW9uIGZvciB7bmFtZX0iLAogICAgICAgICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLl9kZXNjcmlwdG9yLm5hbWUKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgbWV0YSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldFZlY3RvckZpbGVNZXRhKCkgewogICAgICAgIHJldHVybiBfZ2V0VmVjdG9yRmlsZU1ldGEuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldFZlY3RvckZpbGVNZXRhOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZ2V0R2VvSnNvbldpdGhNZXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0R2VvSnNvbldpdGhNZXRhID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIHZlY3RvckZpbGVNZXRhLCBmZWF0dXJlQ29sbGVjdGlvbjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVjdG9yRmlsZU1ldGEoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgdmVjdG9yRmlsZU1ldGEgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBfdmVjdG9yX3NvdXJjZS5BYnN0cmFjdFZlY3RvclNvdXJjZS5nZXRHZW9Kc29uKHsKICAgICAgICAgICAgICAgICAgZm9ybWF0OiB2ZWN0b3JGaWxlTWV0YS5mb3JtYXQudHlwZSwKICAgICAgICAgICAgICAgICAgZmVhdHVyZUNvbGxlY3Rpb25QYXRoOiB2ZWN0b3JGaWxlTWV0YS5tZXRhLmZlYXR1cmVfY29sbGVjdGlvbl9wYXRoLAogICAgICAgICAgICAgICAgICBmZXRjaFVybDogdmVjdG9yRmlsZU1ldGEudXJsCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgZmVhdHVyZUNvbGxlY3Rpb24gPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICAgIGRhdGE6IGZlYXR1cmVDb2xsZWN0aW9uCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0R2VvSnNvbldpdGhNZXRhKCkgewogICAgICAgIHJldHVybiBfZ2V0R2VvSnNvbldpdGhNZXRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRHZW9Kc29uV2l0aE1ldGE7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJnZXRMZWZ0Sm9pbkZpZWxkcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldExlZnRKb2luRmllbGRzID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAgIHZhciB2ZWN0b3JGaWxlTWV0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVjdG9yRmlsZU1ldGEoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgdmVjdG9yRmlsZU1ldGEgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCB2ZWN0b3JGaWxlTWV0YS5maWVsZHMubWFwKGZ1bmN0aW9uIChmKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuY3JlYXRlRmllbGQoewogICAgICAgICAgICAgICAgICAgIGZpZWxkTmFtZTogZi5uYW1lCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRMZWZ0Sm9pbkZpZWxkcygpIHsKICAgICAgICByZXR1cm4gX2dldExlZnRKb2luRmllbGRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRMZWZ0Sm9pbkZpZWxkczsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImdldERpc3BsYXlOYW1lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0RGlzcGxheU5hbWUgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIHRoaXMuX2Rlc2NyaXB0b3IubmFtZSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldERpc3BsYXlOYW1lKCkgewogICAgICAgIHJldHVybiBfZ2V0RGlzcGxheU5hbWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldERpc3BsYXlOYW1lOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiaXNUaW1lQXdhcmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9pc1RpbWVBd2FyZSA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBpc1RpbWVBd2FyZSgpIHsKICAgICAgICByZXR1cm4gX2lzVGltZUF3YXJlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBpc1RpbWVBd2FyZTsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImNhbkZvcm1hdEZlYXR1cmVQcm9wZXJ0aWVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5Gb3JtYXRGZWF0dXJlUHJvcGVydGllcygpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfV0sIFt7CiAgICBrZXk6ICJjcmVhdGVEZXNjcmlwdG9yIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVEZXNjcmlwdG9yKF9yZWYyKSB7CiAgICAgIHZhciBuYW1lID0gX3JlZjIubmFtZTsKICAgICAgcmV0dXJuIHsKICAgICAgICB0eXBlOiBLaWJhbmFSZWdpb25tYXBTb3VyY2UudHlwZSwKICAgICAgICBuYW1lOiBuYW1lCiAgICAgIH07CiAgICB9CiAgfV0pOwoKICByZXR1cm4gS2liYW5hUmVnaW9ubWFwU291cmNlOwp9KF92ZWN0b3Jfc291cmNlLkFic3RyYWN0VmVjdG9yU291cmNlKTsKCmV4cG9ydHMuS2liYW5hUmVnaW9ubWFwU291cmNlID0gS2liYW5hUmVnaW9ubWFwU291cmNlOwoKX2RlZmluZVByb3BlcnR5KEtpYmFuYVJlZ2lvbm1hcFNvdXJjZSwgInR5cGUiLCAnUkVHSU9OTUFQX0ZJTEUnKTsKCl9kZWZpbmVQcm9wZXJ0eShLaWJhbmFSZWdpb25tYXBTb3VyY2UsICJ0aXRsZSIsIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tYXBzLnNvdXJjZS5rYm5SZWdpb25NYXBUaXRsZScsIHsKICBkZWZhdWx0TWVzc2FnZTogJ0NvbmZpZ3VyZWQgR2VvSlNPTicKfSkpOwoKX2RlZmluZVByb3BlcnR5KEtpYmFuYVJlZ2lvbm1hcFNvdXJjZSwgImRlc2NyaXB0aW9uIiwgX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1hcHMuc291cmNlLmtiblJlZ2lvbk1hcERlc2NyaXB0aW9uJywgewogIGRlZmF1bHRNZXNzYWdlOiAnVmVjdG9yIGRhdGEgZnJvbSBob3N0ZWQgR2VvSlNPTiBjb25maWd1cmVkIGluIGtpYmFuYS55bWwnCn0pKTsKCl9kZWZpbmVQcm9wZXJ0eShLaWJhbmFSZWdpb25tYXBTb3VyY2UsICJpY29uIiwgJ2xvZ29LaWJhbmEnKTsKCl9kZWZpbmVQcm9wZXJ0eShLaWJhbmFSZWdpb25tYXBTb3VyY2UsICJyZW5kZXJFZGl0b3IiLCBmdW5jdGlvbiAoX3JlZjMpIHsKICB2YXIgb25QcmV2aWV3U291cmNlID0gX3JlZjMub25QcmV2aWV3U291cmNlLAogICAgICBpbnNwZWN0b3JBZGFwdGVycyA9IF9yZWYzLmluc3BlY3RvckFkYXB0ZXJzOwoKICB2YXIgb25Tb3VyY2VDb25maWdDaGFuZ2UgPSBmdW5jdGlvbiBvblNvdXJjZUNvbmZpZ0NoYW5nZShzb3VyY2VDb25maWcpIHsKICAgIHZhciBzb3VyY2VEZXNjcmlwdG9yID0gS2liYW5hUmVnaW9ubWFwU291cmNlLmNyZWF0ZURlc2NyaXB0b3Ioc291cmNlQ29uZmlnKTsKICAgIHZhciBzb3VyY2UgPSBuZXcgS2liYW5hUmVnaW9ubWFwU291cmNlKHNvdXJjZURlc2NyaXB0b3IsIGluc3BlY3RvckFkYXB0ZXJzKTsKICAgIG9uUHJldmlld1NvdXJjZShzb3VyY2UpOwogIH07CgogIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jcmVhdGVfc291cmNlX2VkaXRvci5DcmVhdGVTb3VyY2VFZGl0b3IsIHsKICAgIG9uU291cmNlQ29uZmlnQ2hhbmdlOiBvblNvdXJjZUNvbmZpZ0NoYW5nZQogIH0pOwp9KTs="},null]}