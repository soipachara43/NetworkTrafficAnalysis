{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/containers/network_top_countries/index.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/containers/network_top_countries/index.js","mtime":1589249553240},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuTmV0d29ya1RvcENvdW50cmllc1F1ZXJ5ID0gdm9pZCAwOwoKdmFyIF9mcCA9IHJlcXVpcmUoImxvZGFzaC9mcCIpOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3JlYWN0QXBvbGxvID0gcmVxdWlyZSgicmVhY3QtYXBvbGxvIik7Cgp2YXIgX3JlYWN0UmVkdXggPSByZXF1aXJlKCJyZWFjdC1yZWR1eCIpOwoKdmFyIF9yZWR1eCA9IHJlcXVpcmUoInJlZHV4Iik7Cgp2YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uLy4uLy4uL2NvbW1vbi9jb25zdGFudHMiKTsKCnZhciBfc3RvcmUgPSByZXF1aXJlKCIuLi8uLi9zdG9yZSIpOwoKdmFyIF9raWJhbmEgPSByZXF1aXJlKCIuLi8uLi9saWIva2liYW5hIik7Cgp2YXIgX2hlbHBlcnMgPSByZXF1aXJlKCIuLi8uLi9jb21wb25lbnRzL3BhZ2luYXRlZF90YWJsZS9oZWxwZXJzIik7Cgp2YXIgX2hlbHBlcnMyID0gcmVxdWlyZSgiLi4vaGVscGVycyIpOwoKdmFyIF9xdWVyeV90ZW1wbGF0ZV9wYWdpbmF0ZWQgPSByZXF1aXJlKCIuLi9xdWVyeV90ZW1wbGF0ZV9wYWdpbmF0ZWQiKTsKCnZhciBfaW5kZXggPSByZXF1aXJlKCIuL2luZGV4LmdxbF9xdWVyeSIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9IGVsc2UgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0KCiAgcmV0dXJuIF90eXBlb2Yob2JqKTsKfQoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgewogIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsKICBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09ICJbb2JqZWN0IEFyZ3VtZW50c10iKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHsKICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgIGFycjJbaV0gPSBhcnJbaV07CiAgICB9CgogICAgcmV0dXJuIGFycjI7CiAgfQp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgewogIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsKICAgIHJldHVybiBjYWxsOwogIH0KCiAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7Cn0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgewogIGlmIChzZWxmID09PSB2b2lkIDApIHsKICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7CiAgfQoKICByZXR1cm4gc2VsZjsKfQoKZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgewogICAgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsKICB9OwogIHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7Cn0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgewogIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOwogIH0KCiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICBjb25zdHJ1Y3RvcjogewogICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0KICB9KTsKICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsKfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICAgIG8uX19wcm90b19fID0gcDsKICAgIHJldHVybiBvOwogIH07CgogIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7Cn0KCnZhciBJRCA9ICduZXR3b3JrVG9wQ291bnRyaWVzUXVlcnknOwoKdmFyIE5ldHdvcmtUb3BDb3VudHJpZXNDb21wb25lbnRRdWVyeSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9RdWVyeVRlbXBsYXRlUGFnaW5hdCkgewogIF9pbmhlcml0cyhOZXR3b3JrVG9wQ291bnRyaWVzQ29tcG9uZW50UXVlcnksIF9RdWVyeVRlbXBsYXRlUGFnaW5hdCk7CgogIGZ1bmN0aW9uIE5ldHdvcmtUb3BDb3VudHJpZXNDb21wb25lbnRRdWVyeSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBOZXR3b3JrVG9wQ291bnRyaWVzQ29tcG9uZW50UXVlcnkpOwoKICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoTmV0d29ya1RvcENvdW50cmllc0NvbXBvbmVudFF1ZXJ5KS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTsKICB9CgogIF9jcmVhdGVDbGFzcyhOZXR3b3JrVG9wQ291bnRyaWVzQ29tcG9uZW50UXVlcnksIFt7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IHRoaXMucHJvcHMsCiAgICAgICAgICBhY3RpdmVQYWdlID0gX3RoaXMkcHJvcHMuYWN0aXZlUGFnZSwKICAgICAgICAgIGNoaWxkcmVuID0gX3RoaXMkcHJvcHMuY2hpbGRyZW4sCiAgICAgICAgICBlbmREYXRlID0gX3RoaXMkcHJvcHMuZW5kRGF0ZSwKICAgICAgICAgIGZsb3dUYXJnZXQgPSBfdGhpcyRwcm9wcy5mbG93VGFyZ2V0LAogICAgICAgICAgZmlsdGVyUXVlcnkgPSBfdGhpcyRwcm9wcy5maWx0ZXJRdWVyeSwKICAgICAgICAgIGtpYmFuYSA9IF90aGlzJHByb3BzLmtpYmFuYSwKICAgICAgICAgIF90aGlzJHByb3BzJGlkID0gX3RoaXMkcHJvcHMuaWQsCiAgICAgICAgICBpZCA9IF90aGlzJHByb3BzJGlkID09PSB2b2lkIDAgPyAiIi5jb25jYXQoSUQsICItIikuY29uY2F0KGZsb3dUYXJnZXQpIDogX3RoaXMkcHJvcHMkaWQsCiAgICAgICAgICBpcCA9IF90aGlzJHByb3BzLmlwLAogICAgICAgICAgaXNJbnNwZWN0ZWQgPSBfdGhpcyRwcm9wcy5pc0luc3BlY3RlZCwKICAgICAgICAgIGxpbWl0ID0gX3RoaXMkcHJvcHMubGltaXQsCiAgICAgICAgICBza2lwID0gX3RoaXMkcHJvcHMuc2tpcCwKICAgICAgICAgIHNvdXJjZUlkID0gX3RoaXMkcHJvcHMuc291cmNlSWQsCiAgICAgICAgICBzdGFydERhdGUgPSBfdGhpcyRwcm9wcy5zdGFydERhdGUsCiAgICAgICAgICBzb3J0ID0gX3RoaXMkcHJvcHMuc29ydDsKICAgICAgdmFyIHZhcmlhYmxlcyA9IHsKICAgICAgICBkZWZhdWx0SW5kZXg6IGtpYmFuYS5zZXJ2aWNlcy51aVNldHRpbmdzLmdldChfY29uc3RhbnRzLkRFRkFVTFRfSU5ERVhfS0VZKSwKICAgICAgICBmaWx0ZXJRdWVyeTogKDAsIF9oZWxwZXJzMi5jcmVhdGVGaWx0ZXIpKGZpbHRlclF1ZXJ5KSwKICAgICAgICBmbG93VGFyZ2V0OiBmbG93VGFyZ2V0LAogICAgICAgIGluc3BlY3Q6IGlzSW5zcGVjdGVkLAogICAgICAgIGlwOiBpcCwKICAgICAgICBwYWdpbmF0aW9uOiAoMCwgX2hlbHBlcnMuZ2VuZXJhdGVUYWJsZVBhZ2luYXRpb25PcHRpb25zKShhY3RpdmVQYWdlLCBsaW1pdCksCiAgICAgICAgc29ydDogc29ydCwKICAgICAgICBzb3VyY2VJZDogc291cmNlSWQsCiAgICAgICAgdGltZXJhbmdlOiB7CiAgICAgICAgICBpbnRlcnZhbDogJzEyaCcsCiAgICAgICAgICBmcm9tOiBzdGFydERhdGUsCiAgICAgICAgICB0bzogZW5kRGF0ZQogICAgICAgIH0KICAgICAgfTsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0QXBvbGxvLlF1ZXJ5LCB7CiAgICAgICAgZmV0Y2hQb2xpY3k6ICgwLCBfaGVscGVyczIuZ2V0RGVmYXVsdEZldGNoUG9saWN5KSgpLAogICAgICAgIG5vdGlmeU9uTmV0d29ya1N0YXR1c0NoYW5nZTogdHJ1ZSwKICAgICAgICBxdWVyeTogX2luZGV4Lm5ldHdvcmtUb3BDb3VudHJpZXNRdWVyeSwKICAgICAgICBza2lwOiBza2lwLAogICAgICAgIHZhcmlhYmxlczogdmFyaWFibGVzCiAgICAgIH0sIGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIGRhdGEgPSBfcmVmLmRhdGEsCiAgICAgICAgICAgIGxvYWRpbmcgPSBfcmVmLmxvYWRpbmcsCiAgICAgICAgICAgIGZldGNoTW9yZSA9IF9yZWYuZmV0Y2hNb3JlLAogICAgICAgICAgICBuZXR3b3JrU3RhdHVzID0gX3JlZi5uZXR3b3JrU3RhdHVzLAogICAgICAgICAgICByZWZldGNoID0gX3JlZi5yZWZldGNoOwogICAgICAgIHZhciBuZXR3b3JrVG9wQ291bnRyaWVzID0gKDAsIF9mcC5nZXRPcikoW10sICJzb3VyY2UuTmV0d29ya1RvcENvdW50cmllcy5lZGdlcyIsIGRhdGEpOwoKICAgICAgICBfdGhpcy5zZXRGZXRjaE1vcmUoZmV0Y2hNb3JlKTsKCiAgICAgICAgX3RoaXMuc2V0RmV0Y2hNb3JlT3B0aW9ucyhmdW5jdGlvbiAobmV3QWN0aXZlUGFnZSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgICAgcGFnaW5hdGlvbjogKDAsIF9oZWxwZXJzLmdlbmVyYXRlVGFibGVQYWdpbmF0aW9uT3B0aW9ucykobmV3QWN0aXZlUGFnZSwgbGltaXQpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVwZGF0ZVF1ZXJ5OiBmdW5jdGlvbiB1cGRhdGVRdWVyeShwcmV2LCBfcmVmMikgewogICAgICAgICAgICAgIHZhciBmZXRjaE1vcmVSZXN1bHQgPSBfcmVmMi5mZXRjaE1vcmVSZXN1bHQ7CgogICAgICAgICAgICAgIGlmICghZmV0Y2hNb3JlUmVzdWx0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcHJldjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBmZXRjaE1vcmVSZXN1bHQsIHsKICAgICAgICAgICAgICAgIHNvdXJjZTogX29iamVjdFNwcmVhZCh7fSwgZmV0Y2hNb3JlUmVzdWx0LnNvdXJjZSwgewogICAgICAgICAgICAgICAgICBOZXR3b3JrVG9wQ291bnRyaWVzOiBfb2JqZWN0U3ByZWFkKHt9LCBmZXRjaE1vcmVSZXN1bHQuc291cmNlLk5ldHdvcmtUb3BDb3VudHJpZXMsIHsKICAgICAgICAgICAgICAgICAgICBlZGdlczogX3RvQ29uc3VtYWJsZUFycmF5KGZldGNoTW9yZVJlc3VsdC5zb3VyY2UuTmV0d29ya1RvcENvdW50cmllcy5lZGdlcykKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfSk7CgogICAgICAgIHZhciBpc0xvYWRpbmcgPSBfdGhpcy5pc0l0QVZhbGlkTG9hZGluZyhsb2FkaW5nLCB2YXJpYWJsZXMsIG5ldHdvcmtTdGF0dXMpOwoKICAgICAgICByZXR1cm4gY2hpbGRyZW4oewogICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgaW5zcGVjdDogKDAsIF9mcC5nZXRPcikobnVsbCwgJ3NvdXJjZS5OZXR3b3JrVG9wQ291bnRyaWVzLmluc3BlY3QnLCBkYXRhKSwKICAgICAgICAgIGlzSW5zcGVjdGVkOiBpc0luc3BlY3RlZCwKICAgICAgICAgIGxvYWRpbmc6IGlzTG9hZGluZywKICAgICAgICAgIGxvYWRQYWdlOiBfdGhpcy53cmFwcGVkTG9hZE1vcmUsCiAgICAgICAgICBuZXR3b3JrVG9wQ291bnRyaWVzOiBuZXR3b3JrVG9wQ291bnRyaWVzLAogICAgICAgICAgcGFnZUluZm86ICgwLCBfZnAuZ2V0T3IpKHt9LCAnc291cmNlLk5ldHdvcmtUb3BDb3VudHJpZXMucGFnZUluZm8nLCBkYXRhKSwKICAgICAgICAgIHJlZmV0Y2g6IF90aGlzLm1lbW9pemVkUmVmZXRjaFF1ZXJ5KHZhcmlhYmxlcywgbGltaXQsIHJlZmV0Y2gpLAogICAgICAgICAgdG90YWxDb3VudDogKDAsIF9mcC5nZXRPcikoLTEsICdzb3VyY2UuTmV0d29ya1RvcENvdW50cmllcy50b3RhbENvdW50JywgZGF0YSkKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTmV0d29ya1RvcENvdW50cmllc0NvbXBvbmVudFF1ZXJ5Owp9KF9xdWVyeV90ZW1wbGF0ZV9wYWdpbmF0ZWQuUXVlcnlUZW1wbGF0ZVBhZ2luYXRlZCk7Cgp2YXIgbWFrZU1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1ha2VNYXBTdGF0ZVRvUHJvcHMoKSB7CiAgdmFyIGdldFRvcENvdW50cmllc1NlbGVjdG9yID0gX3N0b3JlLm5ldHdvcmtTZWxlY3RvcnMudG9wQ291bnRyaWVzU2VsZWN0b3IoKTsKCiAgdmFyIGdldFF1ZXJ5ID0gX3N0b3JlLmlucHV0c1NlbGVjdG9ycy5nbG9iYWxRdWVyeUJ5SWRTZWxlY3RvcigpOwoKICByZXR1cm4gZnVuY3Rpb24gKHN0YXRlLCBfcmVmMykgewogICAgdmFyIGZsb3dUYXJnZXQgPSBfcmVmMy5mbG93VGFyZ2V0LAogICAgICAgIF9yZWYzJGlkID0gX3JlZjMuaWQsCiAgICAgICAgaWQgPSBfcmVmMyRpZCA9PT0gdm9pZCAwID8gIiIuY29uY2F0KElELCAiLSIpLmNvbmNhdChmbG93VGFyZ2V0KSA6IF9yZWYzJGlkLAogICAgICAgIHR5cGUgPSBfcmVmMy50eXBlOwoKICAgIHZhciBfZ2V0UXVlcnkgPSBnZXRRdWVyeShzdGF0ZSwgaWQpLAogICAgICAgIGlzSW5zcGVjdGVkID0gX2dldFF1ZXJ5LmlzSW5zcGVjdGVkOwoKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBnZXRUb3BDb3VudHJpZXNTZWxlY3RvcihzdGF0ZSwgdHlwZSwgZmxvd1RhcmdldCksIHsKICAgICAgaXNJbnNwZWN0ZWQ6IGlzSW5zcGVjdGVkCiAgICB9KTsKICB9Owp9OwoKdmFyIE5ldHdvcmtUb3BDb3VudHJpZXNRdWVyeSA9ICgwLCBfcmVkdXguY29tcG9zZSkoKDAsIF9yZWFjdFJlZHV4LmNvbm5lY3QpKG1ha2VNYXBTdGF0ZVRvUHJvcHMpLCBfa2liYW5hLndpdGhLaWJhbmEpKE5ldHdvcmtUb3BDb3VudHJpZXNDb21wb25lbnRRdWVyeSk7CmV4cG9ydHMuTmV0d29ya1RvcENvdW50cmllc1F1ZXJ5ID0gTmV0d29ya1RvcENvdW50cmllc1F1ZXJ5Ow=="},null]}