{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/plugins/data/common/field_formats/field_formats_registry.js","dependencies":[{"path":"src/plugins/data/common/field_formats/field_formats_registry.js","mtime":1589249550575},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eTIodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkyKG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuRmllbGRGb3JtYXRzUmVnaXN0cnkgPSB2b2lkIDA7Cgp2YXIgX2xvZGFzaCA9IHJlcXVpcmUoImxvZGFzaCIpOwoKdmFyIF90eXBlcyA9IHJlcXVpcmUoIi4vdHlwZXMiKTsKCnZhciBfYmFzZV9mb3JtYXR0ZXJzID0gcmVxdWlyZSgiLi9jb25zdGFudHMvYmFzZV9mb3JtYXR0ZXJzIik7Cgp2YXIgX2ZpZWxkX2Zvcm1hdCA9IHJlcXVpcmUoIi4vZmllbGRfZm9ybWF0Iik7CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIEZpZWxkRm9ybWF0c1JlZ2lzdHJ5ID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gRmllbGRGb3JtYXRzUmVnaXN0cnkoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWVsZEZvcm1hdHNSZWdpc3RyeSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJmaWVsZEZvcm1hdHMiLCBuZXcgTWFwKCkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZGVmYXVsdE1hcCIsIHt9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1ldGFQYXJhbXNPcHRpb25zIiwge30pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZ2V0Q29uZmlnIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImRlc2VyaWFsaXplIiwgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gbmV3IChfZmllbGRfZm9ybWF0LkZpZWxkRm9ybWF0LmZyb20oX2xvZGFzaC5pZGVudGl0eSkpKCk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImdldERlZmF1bHRDb25maWciLCBmdW5jdGlvbiAoZmllbGRUeXBlLCBlc1R5cGVzKSB7CiAgICAgIHZhciB0eXBlID0gX3RoaXMuZ2V0RGVmYXVsdFR5cGVOYW1lKGZpZWxkVHlwZSwgZXNUeXBlcyk7CgogICAgICByZXR1cm4gX3RoaXMuZGVmYXVsdE1hcCAmJiBfdGhpcy5kZWZhdWx0TWFwW3R5cGVdIHx8IHsKICAgICAgICBpZDogX3R5cGVzLkZJRUxEX0ZPUk1BVF9JRFMuU1RSSU5HLAogICAgICAgIHBhcmFtczoge30KICAgICAgfTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZ2V0VHlwZSIsIGZ1bmN0aW9uIChmb3JtYXRJZCkgewogICAgICB2YXIgZmllbGRGb3JtYXQgPSBfdGhpcy5maWVsZEZvcm1hdHMuZ2V0KGZvcm1hdElkKTsKCiAgICAgIGlmIChmaWVsZEZvcm1hdCkgewogICAgICAgIHZhciBkZWNvcmF0ZWRGaWVsZEZvcm1hdCA9IF90aGlzLmZpZWxkRm9ybWF0TWV0YVBhcmFtc0RlY29yYXRvcihmaWVsZEZvcm1hdCk7CgogICAgICAgIGlmIChkZWNvcmF0ZWRGaWVsZEZvcm1hdCkgewogICAgICAgICAgcmV0dXJuIGRlY29yYXRlZEZpZWxkRm9ybWF0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZ2V0VHlwZVdpdGhvdXRNZXRhUGFyYW1zIiwgZnVuY3Rpb24gKGZvcm1hdElkKSB7CiAgICAgIHJldHVybiBfdGhpcy5maWVsZEZvcm1hdHMuZ2V0KGZvcm1hdElkKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZ2V0RGVmYXVsdFR5cGUiLCBmdW5jdGlvbiAoZmllbGRUeXBlLCBlc1R5cGVzKSB7CiAgICAgIHZhciBjb25maWcgPSBfdGhpcy5nZXREZWZhdWx0Q29uZmlnKGZpZWxkVHlwZSwgZXNUeXBlcyk7CgogICAgICByZXR1cm4gX3RoaXMuZ2V0VHlwZShjb25maWcuaWQpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJnZXRUeXBlTmFtZUJ5RXNUeXBlcyIsIGZ1bmN0aW9uIChlc1R5cGVzKSB7CiAgICAgIGlmICghQXJyYXkuaXNBcnJheShlc1R5cGVzKSkgewogICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgIH0KCiAgICAgIHJldHVybiBlc1R5cGVzLmZpbmQoZnVuY3Rpb24gKHR5cGUpIHsKICAgICAgICByZXR1cm4gX3RoaXMuZGVmYXVsdE1hcFt0eXBlXSAmJiBfdGhpcy5kZWZhdWx0TWFwW3R5cGVdLmVzOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZ2V0RGVmYXVsdFR5cGVOYW1lIiwgZnVuY3Rpb24gKGZpZWxkVHlwZSwgZXNUeXBlcykgewogICAgICB2YXIgZXNUeXBlID0gX3RoaXMuZ2V0VHlwZU5hbWVCeUVzVHlwZXMoZXNUeXBlcyk7CgogICAgICByZXR1cm4gZXNUeXBlIHx8IGZpZWxkVHlwZTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZ2V0SW5zdGFuY2UiLCAoMCwgX2xvZGFzaC5tZW1vaXplKShmdW5jdGlvbiAoZm9ybWF0SWQpIHsKICAgICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CgogICAgICB2YXIgQ29uY3JldGVGaWVsZEZvcm1hdCA9IF90aGlzLmdldFR5cGUoZm9ybWF0SWQpOwoKICAgICAgaWYgKCFDb25jcmV0ZUZpZWxkRm9ybWF0KSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJGaWVsZCBGb3JtYXQgJyIuY29uY2F0KGZvcm1hdElkLCAiJyBub3QgZm91bmQhIikpOwogICAgICB9CgogICAgICByZXR1cm4gbmV3IENvbmNyZXRlRmllbGRGb3JtYXQocGFyYW1zLCBfdGhpcy5nZXRDb25maWcpOwogICAgfSwgZnVuY3Rpb24gKGZvcm1hdElkLCBwYXJhbXMpIHsKICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KF9vYmplY3RTcHJlYWQoewogICAgICAgIGZvcm1hdElkOiBmb3JtYXRJZAogICAgICB9LCBwYXJhbXMpKTsKICAgIH0pKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImdldERlZmF1bHRJbnN0YW5jZSIsICgwLCBfbG9kYXNoLm1lbW9pemUpKHRoaXMuZ2V0RGVmYXVsdEluc3RhbmNlUGxhaW4sIHRoaXMuZ2V0RGVmYXVsdEluc3RhbmNlQ2FjaGVSZXNvbHZlcikpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZmllbGRGb3JtYXRNZXRhUGFyYW1zRGVjb3JhdG9yIiwgZnVuY3Rpb24gKGZpZWxkRm9ybWF0KSB7CiAgICAgIHZhciBnZXRNZXRhUGFyYW1zID0gZnVuY3Rpb24gZ2V0TWV0YVBhcmFtcyhjdXN0b21QYXJhbXMpIHsKICAgICAgICByZXR1cm4gX3RoaXMuYnVpbGRNZXRhUGFyYW1zKGN1c3RvbVBhcmFtcyk7CiAgICAgIH07CgogICAgICBpZiAoZmllbGRGb3JtYXQpIHsKICAgICAgICB2YXIgX2NsYXNzLCBfdGVtcDsKCiAgICAgICAgcmV0dXJuIF90ZW1wID0gX2NsYXNzID0KICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgZnVuY3Rpb24gKF9maWVsZEZvcm1hdCkgewogICAgICAgICAgX2luaGVyaXRzKERlY29yYXRlZEZpZWxkRm9ybWF0LCBfZmllbGRGb3JtYXQpOwoKICAgICAgICAgIGZ1bmN0aW9uIERlY29yYXRlZEZpZWxkRm9ybWF0KCkgewogICAgICAgICAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgICAgICAgICAgdmFyIGdldENvbmZpZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkOwoKICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERlY29yYXRlZEZpZWxkRm9ybWF0KTsKCiAgICAgICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoRGVjb3JhdGVkRmllbGRGb3JtYXQpLmNhbGwodGhpcywgZ2V0TWV0YVBhcmFtcyhwYXJhbXMpLCBnZXRDb25maWcpKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gRGVjb3JhdGVkRmllbGRGb3JtYXQ7CiAgICAgICAgfShmaWVsZEZvcm1hdCksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3MsICJpZCIsIGZpZWxkRm9ybWF0LmlkKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzcywgImZpZWxkVHlwZSIsIGZpZWxkRm9ybWF0LmZpZWxkVHlwZSksIF90ZW1wOwogICAgICB9CgogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJidWlsZE1ldGFQYXJhbXMiLCBmdW5jdGlvbiAoY3VzdG9tUGFyYW1zKSB7CiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBfdGhpcy5tZXRhUGFyYW1zT3B0aW9ucywge30sIGN1c3RvbVBhcmFtcyk7CiAgICB9KTsKICB9CgogIF9jcmVhdGVDbGFzcyhGaWVsZEZvcm1hdHNSZWdpc3RyeSwgW3sKICAgIGtleTogImluaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoZ2V0Q29uZmlnKSB7CiAgICAgIHZhciBtZXRhUGFyYW1zT3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgICAgIHZhciBkZWZhdWx0RmllbGRDb252ZXJ0ZXJzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBfYmFzZV9mb3JtYXR0ZXJzLmJhc2VGb3JtYXR0ZXJzOwogICAgICB2YXIgZGVmYXVsdFR5cGVNYXAgPSBnZXRDb25maWcoJ2Zvcm1hdDpkZWZhdWx0VHlwZU1hcCcpOwogICAgICB0aGlzLnJlZ2lzdGVyKGRlZmF1bHRGaWVsZENvbnZlcnRlcnMpOwogICAgICB0aGlzLnBhcnNlRGVmYXVsdFR5cGVNYXAoZGVmYXVsdFR5cGVNYXApOwogICAgICB0aGlzLmdldENvbmZpZyA9IGdldENvbmZpZzsKICAgICAgdGhpcy5tZXRhUGFyYW1zT3B0aW9ucyA9IG1ldGFQYXJhbXNPcHRpb25zOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGlkIG9mIHRoZSBkZWZhdWx0IHR5cGUgZm9yIHRoaXMgZmllbGQgdHlwZQogICAgICogdXNpbmcgdGhlIGZvcm1hdDpkZWZhdWx0VHlwZU1hcCBjb25maWcgbWFwCiAgICAgKgogICAgICogQHBhcmFtICB7S0JOX0ZJRUxEX1RZUEVTfSBmaWVsZFR5cGUgLSB0aGUgZmllbGQgdHlwZQogICAgICogQHBhcmFtICB7RVNfRklFTERfVFlQRVNbXX0gZXNUeXBlcyAtIEFycmF5IG9mIEVTIGRhdGEgdHlwZXMKICAgICAqIEByZXR1cm4ge0ZpZWxkVHlwZX0KICAgICAqLwoKICAgIC8qKgogICAgICogR2V0IHRoZSBkZWZhdWx0IGZpZWxkRm9ybWF0IGluc3RhbmNlIGZvciBhIGZpZWxkIGZvcm1hdC4KICAgICAqCiAgICAgKiBAcGFyYW0gIHtLQk5fRklFTERfVFlQRVN9IGZpZWxkVHlwZQogICAgICogQHBhcmFtICB7RVNfRklFTERfVFlQRVNbXX0gZXNUeXBlcwogICAgICogQHJldHVybiB7RmllbGRGb3JtYXR9CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0RGVmYXVsdEluc3RhbmNlUGxhaW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlZmF1bHRJbnN0YW5jZVBsYWluKGZpZWxkVHlwZSwgZXNUeXBlcykgewogICAgICB2YXIgY29uZiA9IHRoaXMuZ2V0RGVmYXVsdENvbmZpZyhmaWVsZFR5cGUsIGVzVHlwZXMpOwogICAgICByZXR1cm4gdGhpcy5nZXRJbnN0YW5jZShjb25mLmlkLCBjb25mLnBhcmFtcyk7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYSBjYWNoZSBrZXkgYnVpbHQgYnkgdGhlIGdpdmVuIHZhcmlhYmxlcyBmb3IgY2FjaGluZyBpbiBtZW1vaXplZAogICAgICogV2hlcmUgZXNUeXBlIGNvbnRhaW5zIGZpZWxkVHlwZSwgZmllbGRUeXBlIGlzIHJldHVybmVkCiAgICAgKiAtPiBraWJhbmEgdHlwZXMgaGF2ZSBhIGhpZ2hlciBwcmlvcml0eSBpbiB0aGF0IGNhc2UKICAgICAqIC0+IHdvdWxkIGxlYWQgdG8gZmFpbGluZyB0ZXN0cyB0aGF0IG1hdGNoIGUuZy4gZGF0ZSBmb3JtYXQgd2l0aC93aXRob3V0IGVzVHlwZXMKICAgICAqIGh0dHBzOi8vbG9kYXNoLmNvbS9kb2NzI21lbW9pemUKICAgICAqCiAgICAgKiBAcGFyYW0gIHtLQk5fRklFTERfVFlQRVN9IGZpZWxkVHlwZQogICAgICogQHBhcmFtICB7RVNfRklFTERfVFlQRVNbXX0gZXNUeXBlcwogICAgICogQHJldHVybiB7U3RyaW5nfQogICAgICovCgogIH0sIHsKICAgIGtleTogImdldERlZmF1bHRJbnN0YW5jZUNhY2hlUmVzb2x2ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlZmF1bHRJbnN0YW5jZUNhY2hlUmVzb2x2ZXIoZmllbGRUeXBlLCBlc1R5cGVzKSB7CiAgICAgIC8vIEB0cy1pZ25vcmUKICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZXNUeXBlcykgJiYgZXNUeXBlcy5pbmRleE9mKGZpZWxkVHlwZSkgPT09IC0xID8gW2ZpZWxkVHlwZV0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShlc1R5cGVzKSkuam9pbignLScpIDogZmllbGRUeXBlOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgZmlsdGVyZWQgbGlzdCBvZiBmaWVsZCBmb3JtYXRzIGJ5IGZvcm1hdCB0eXBlCiAgICAgKgogICAgICogQHBhcmFtICB7S0JOX0ZJRUxEX1RZUEVTfSBmaWVsZFR5cGUKICAgICAqIEByZXR1cm4ge0lGaWVsZEZvcm1hdFR5cGVbXX0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRCeUZpZWxkVHlwZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QnlGaWVsZFR5cGUoZmllbGRUeXBlKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmZpZWxkRm9ybWF0cy52YWx1ZXMoKSkuZmlsdGVyKGZ1bmN0aW9uIChmb3JtYXQpIHsKICAgICAgICByZXR1cm4gZm9ybWF0ICYmIGZvcm1hdC5maWVsZFR5cGUuaW5kZXhPZihmaWVsZFR5cGUpICE9PSAtMTsKICAgICAgfSkubWFwKGZ1bmN0aW9uIChmb3JtYXQpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLmZpZWxkRm9ybWF0TWV0YVBhcmFtc0RlY29yYXRvcihmb3JtYXQpOwogICAgICB9KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBkZWZhdWx0IGZpZWxkRm9ybWF0IGluc3RhbmNlIGZvciBhIGZpZWxkIGZvcm1hdC4KICAgICAqIEl0J3MgYSBtZW1vaXplZCBmdW5jdGlvbiB0aGF0IGJ1aWxkcyBhbmQgcmVhZHMgYSBjYWNoZQogICAgICoKICAgICAqIEBwYXJhbSAge0tCTl9GSUVMRF9UWVBFU30gZmllbGRUeXBlCiAgICAgKiBAcGFyYW0gIHtFU19GSUVMRF9UWVBFU1tdfSBlc1R5cGVzCiAgICAgKiBAcmV0dXJuIHtGaWVsZEZvcm1hdH0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJwYXJzZURlZmF1bHRUeXBlTWFwIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZURlZmF1bHRUeXBlTWFwKHZhbHVlKSB7CiAgICAgIHRoaXMuZGVmYXVsdE1hcCA9IHZhbHVlOwogICAgICAoMCwgX2xvZGFzaC5mb3JPd24pKHRoaXMsIGZ1bmN0aW9uIChmbikgewogICAgICAgIGlmICgoMCwgX2xvZGFzaC5pc0Z1bmN0aW9uKShmbikgJiYgZm4uY2FjaGUpIHsKICAgICAgICAgIC8vIGNsZWFyIGFsbCBtZW1vaXplIGNhY2hlcwogICAgICAgICAgLy8gQHRzLWlnbm9yZQogICAgICAgICAgZm4uY2FjaGUgPSBuZXcgX2xvZGFzaC5tZW1vaXplLkNhY2hlKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWdpc3RlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXIoZmllbGRGb3JtYXRzKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgZmllbGRGb3JtYXRzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkRm9ybWF0KSB7CiAgICAgICAgcmV0dXJuIF90aGlzMy5maWVsZEZvcm1hdHMuc2V0KGZpZWxkRm9ybWF0LmlkLCBmaWVsZEZvcm1hdCk7CiAgICAgIH0pOwogICAgfQogICAgLyoqCiAgICAgKiBGaWVsZEZvcm1hdCBkZWNvcmF0b3IgLSBwcm92aWRlIGEgb25lIHdheSB0byBhZGQgbWV0YS1wYXJhbXMgZm9yIGFsbCBmaWVsZCBmb3JtYXR0ZXJzCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqIEBwYXJhbSAge0lGaWVsZEZvcm1hdFR5cGV9IGZpZWxkRm9ybWF0IC0gZmllbGQgZm9ybWF0IHR5cGUKICAgICAqIEByZXR1cm4ge0lGaWVsZEZvcm1hdFR5cGUgfCB1bmRlZmluZWR9CiAgICAgKi8KCiAgfV0pOwoKICByZXR1cm4gRmllbGRGb3JtYXRzUmVnaXN0cnk7Cn0oKTsKCmV4cG9ydHMuRmllbGRGb3JtYXRzUmVnaXN0cnkgPSBGaWVsZEZvcm1hdHNSZWdpc3RyeTs="},null]}