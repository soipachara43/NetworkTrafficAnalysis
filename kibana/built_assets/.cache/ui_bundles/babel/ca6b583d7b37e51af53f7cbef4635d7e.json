{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/plugins/kibana_react/public/table_list_view/table_list_view.js","dependencies":[{"path":"src/plugins/kibana_react/public/table_list_view/table_list_view.js","mtime":1589249550959},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuVGFibGVMaXN0VmlldyA9IGV4cG9ydHMuRU1QVFlfRklMVEVSID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3JlYWN0MiA9IHJlcXVpcmUoIkBrYm4vaTE4bi9yZWFjdCIpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX2xvZGFzaCA9IHJlcXVpcmUoImxvZGFzaCIpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfdXRpbCA9IHJlcXVpcmUoIi4uL3V0aWwiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgIGRlZmF1bHQ6IG9iagogIH07Cn0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgX3R5cGVvZjIoU3ltYm9sLml0ZXJhdG9yKSA9PT0gInN5bWJvbCIpIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gX3R5cGVvZjIob2JqKTsKICAgIH07CiAgfSBlbHNlIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9CgogIHJldHVybiBfdHlwZW9mKG9iaik7Cn0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsKICB0cnkgewogICAgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOwogICAgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsKICB9IGNhdGNoIChlcnJvcikgewogICAgcmVqZWN0KGVycm9yKTsKICAgIHJldHVybjsKICB9CgogIGlmIChpbmZvLmRvbmUpIHsKICAgIHJlc29sdmUodmFsdWUpOwogIH0gZWxzZSB7CiAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7CiAgfQp9CgpmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgewogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2VsZiA9IHRoaXMsCiAgICAgICAgYXJncyA9IGFyZ3VtZW50czsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTsKCiAgICAgIGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7CiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAibmV4dCIsIHZhbHVlKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikgewogICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgInRocm93IiwgZXJyKTsKICAgICAgfQoKICAgICAgX25leHQodW5kZWZpbmVkKTsKICAgIH0pOwogIH07Cn0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgfQp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogIH0KfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICByZXR1cm4gQ29uc3RydWN0b3I7Cn0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsKICBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7CiAgICByZXR1cm4gY2FsbDsKICB9CgogIHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOwp9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgewogIF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgICByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOwogIH07CiAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsKfQoKZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7CiAgaWYgKHNlbGYgPT09IHZvaWQgMCkgewogICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsKICB9CgogIHJldHVybiBzZWxmOwp9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsKICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsKICB9CgogIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgewogICAgY29uc3RydWN0b3I6IHsKICAgICAgdmFsdWU6IHN1YkNsYXNzLAogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICB9CiAgfSk7CiAgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7Cn0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgICBvLl9fcHJvdG9fXyA9IHA7CiAgICByZXR1cm4gbzsKICB9OwoKICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIEVNUFRZX0ZJTFRFUiA9ICcnOwpleHBvcnRzLkVNUFRZX0ZJTFRFUiA9IEVNUFRZX0ZJTFRFUjsgLy8gc2F2ZWQgb2JqZWN0IGNsaWVudCBkb2VzIG5vdCBzdXBwb3J0IHNvcnRpbmcgYnkgdGl0bGUgYmVjYXVzZSB0aXRsZSBpcyBvbmx5IG1hcHBlZCBhcyBhbmFseXplZAovLyB0aGUgbGVnYWN5IGltcGxlbWVudGF0aW9uIGdvdCBhcm91bmQgdGhpcyBieSBwdWxsaW5nIGBsaXN0aW5nTGltaXRgIGl0ZW1zIGFuZCBkb2luZyBjbGllbnQgc2lkZSBzb3J0aW5nCi8vIGFuZCBub3Qgc3VwcG9ydGluZyBzZXJ2ZXItc2lkZSBwYWdpbmcuCi8vIFRoaXMgY29tcG9uZW50IGRvZXMgbm90IHRyeSB0byB0YWNrbGUgdGhlc2UgcHJvYmxlbXMgKHlldCkgYW5kIGlzIGp1c3QgZmVhdHVyZSBtYXRjaGluZyB0aGUgbGVnYWN5IGNvbXBvbmVudAovLyBUT0RPIHN1cHBvcnQgc2VydmVyIHNpZGUgc29ydGluZy9wYWdpbmcgb25jZSB0aXRsZSBhbmQgZGVzY3JpcHRpb24gYXJlIHNvcnRhYmxlIG9uIHRoZSBzZXJ2ZXIuCgp2YXIgVGFibGVMaXN0VmlldyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHsKICBfaW5oZXJpdHMoVGFibGVMaXN0VmlldywgX1JlYWN0JENvbXBvbmVudCk7CgogIGZ1bmN0aW9uIFRhYmxlTGlzdFZpZXcocHJvcHMpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGFibGVMaXN0Vmlldyk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoVGFibGVMaXN0VmlldykuY2FsbCh0aGlzLCBwcm9wcykpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInBhZ2luYXRpb24iLCB7fSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX2lzTW91bnRlZCIsIGZhbHNlKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJkZWJvdW5jZWRGZXRjaCIsICgwLCBfbG9kYXNoLmRlYm91bmNlKSgKICAgIC8qI19fUFVSRV9fKi8KICAgIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGZpbHRlcikgewogICAgICAgIHZhciByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcm9wcy5maW5kSXRlbXMoZmlsdGVyKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChfdGhpcy5faXNNb3VudGVkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0aGlzIGNoZWNrIHRvIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSBzZWFyY2ggcmVzdWx0cyBjb21lIGJhY2sgaW4gYSBkaWZmZXJlbnQKICAgICAgICAgICAgICAgIC8vIG9yZGVyIHRoYW4gdGhleSB3ZXJlIHNlbnQgb3V0LiBPbmx5IGxvYWQgcmVzdWx0cyBmb3IgdGhlIG1vc3QgcmVjZW50IHNlYXJjaC4KICAgICAgICAgICAgICAgIC8vIEFsc28sIGluIGNhc2UgZmlsdGVyIGlzIGVtcHR5LCBpdGVtcyBhcmUgYmVpbmcgcHJlLXNvcnRlZCBhbHBoYWJldGljYWxseS4KICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIgPT09IF90aGlzLnN0YXRlLmZpbHRlcikgewogICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgaGFzSW5pdGlhbEZldGNoUmV0dXJuZWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgaXNGZXRjaGluZ0l0ZW1zOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBpdGVtczogIWZpbHRlciA/ICgwLCBfbG9kYXNoLnNvcnRCeSkocmVzcG9uc2UuaGl0cywgJ3RpdGxlJykgOiByZXNwb25zZS5oaXRzLAogICAgICAgICAgICAgICAgICAgIHRvdGFsSXRlbXM6IHJlc3BvbnNlLnRvdGFsLAogICAgICAgICAgICAgICAgICAgIHNob3dMaW1pdEVycm9yOiByZXNwb25zZS50b3RhbCA+IF90aGlzLnByb3BzLmxpc3RpbmdMaW1pdAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpLCAzMDApKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJmZXRjaEl0ZW1zIiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgaXNGZXRjaGluZ0l0ZW1zOiB0cnVlCiAgICAgIH0sIF90aGlzLmRlYm91bmNlZEZldGNoLmJpbmQobnVsbCwgX3RoaXMuc3RhdGUuZmlsdGVyKSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJkZWxldGVTZWxlY3RlZEl0ZW1zIiwKICAgIC8qI19fUFVSRV9fKi8KICAgIF9hc3luY1RvR2VuZXJhdG9yKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciBpdGVtc0J5SWQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKCEoX3RoaXMuc3RhdGUuaXNEZWxldGluZ0l0ZW1zIHx8ICFfdGhpcy5wcm9wcy5kZWxldGVJdGVtcykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzRGVsZXRpbmdJdGVtczogdHJ1ZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDM7CiAgICAgICAgICAgICAgaXRlbXNCeUlkID0gKDAsIF9sb2Rhc2guaW5kZXhCeSkoX3RoaXMuc3RhdGUuaXRlbXMsICdpZCcpOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucHJvcHMuZGVsZXRlSXRlbXMoX3RoaXMuc3RhdGUuc2VsZWN0ZWRJZHMubWFwKGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1zQnlJZFtpZF07CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA5OwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgzKTsKCiAgICAgICAgICAgICAgX3RoaXMucHJvcHMudG9hc3ROb3RpZmljYXRpb25zLmFkZERhbmdlcih7CiAgICAgICAgICAgICAgICB0aXRsZTogKDAsIF91dGlsLnRvTW91bnRQb2ludCkoX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgICAgICAgaWQ6ICJraWJhbmEtcmVhY3QudGFibGVMaXN0Vmlldy5saXN0aW5nLnVuYWJsZVRvRGVsZXRlRGFuZ2VyTWVzc2FnZSIsCiAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVW5hYmxlIHRvIGRlbGV0ZSB7ZW50aXR5TmFtZX0ocykiLAogICAgICAgICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICAgICAgICBlbnRpdHlOYW1lOiBfdGhpcy5wcm9wcy5lbnRpdHlOYW1lCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgIHRleHQ6ICIiLmNvbmNhdChfY29udGV4dDIudDApCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF90aGlzLmZldGNoSXRlbXMoKTsKCiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXNEZWxldGluZ0l0ZW1zOiBmYWxzZSwKICAgICAgICAgICAgICAgIHNlbGVjdGVkSWRzOiBbXQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBfdGhpcy5jbG9zZURlbGV0ZU1vZGFsKCk7CgogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMywgOV1dKTsKICAgIH0pKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiY2xvc2VEZWxldGVNb2RhbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIHNob3dEZWxldGVNb2RhbDogZmFsc2UKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvcGVuRGVsZXRlTW9kYWwiLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBzaG93RGVsZXRlTW9kYWw6IHRydWUKICAgICAgfSk7CiAgICB9KTsKCiAgICB2YXIgaW5pdGlhbFBhZ2VTaXplID0gcHJvcHMudWlTZXR0aW5ncy5nZXQoJ3NhdmVkT2JqZWN0czpwZXJQYWdlJyk7CiAgICBfdGhpcy5wYWdpbmF0aW9uID0gewogICAgICBpbml0aWFsUGFnZUluZGV4OiAwLAogICAgICBpbml0aWFsUGFnZVNpemU6IGluaXRpYWxQYWdlU2l6ZSwKICAgICAgcGFnZVNpemVPcHRpb25zOiAoMCwgX2xvZGFzaC51bmlxKShbMTAsIDIwLCA1MCwgaW5pdGlhbFBhZ2VTaXplXSkuc29ydCgpCiAgICB9OwogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIGl0ZW1zOiBbXSwKICAgICAgdG90YWxJdGVtczogMCwKICAgICAgaGFzSW5pdGlhbEZldGNoUmV0dXJuZWQ6IGZhbHNlLAogICAgICBpc0ZldGNoaW5nSXRlbXM6IGZhbHNlLAogICAgICBpc0RlbGV0aW5nSXRlbXM6IGZhbHNlLAogICAgICBzaG93RGVsZXRlTW9kYWw6IGZhbHNlLAogICAgICBzaG93TGltaXRFcnJvcjogZmFsc2UsCiAgICAgIGZpbHRlcjogcHJvcHMuaW5pdGlhbEZpbHRlciwKICAgICAgc2VsZWN0ZWRJZHM6IFtdCiAgICB9OwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFRhYmxlTGlzdFZpZXcsIFt7CiAgICBrZXk6ICJVTlNBRkVfY29tcG9uZW50V2lsbE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBVTlNBRkVfY29tcG9uZW50V2lsbE1vdW50KCkgewogICAgICB0aGlzLl9pc01vdW50ZWQgPSB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudFdpbGxVbm1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHsKICAgICAgdGhpcy5faXNNb3VudGVkID0gZmFsc2U7CiAgICAgIHRoaXMuZGVib3VuY2VkRmV0Y2guY2FuY2VsKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICB0aGlzLmZldGNoSXRlbXMoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRGaWx0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEZpbHRlcihfcmVmMykgewogICAgICB2YXIgcXVlcnlUZXh0ID0gX3JlZjMucXVlcnlUZXh0OyAvLyBJZiB0aGUgdXNlciBpcyBzZWFyY2hpbmcsIHdlIHdhbnQgdG8gY2xlYXIgdGhlIHNvcnQgb3JkZXIgc28gdGhhdAogICAgICAvLyByZXN1bHRzIGFyZSBvcmRlcmVkIGJ5IEVsYXN0aWNzZWFyY2gncyByZWxldmFuY2UuCgogICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICBmaWx0ZXI6IHF1ZXJ5VGV4dAogICAgICB9LCB0aGlzLmZldGNoSXRlbXMpOwogICAgfQogIH0sIHsKICAgIGtleTogImhhc05vSXRlbXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhc05vSXRlbXMoKSB7CiAgICAgIGlmICghdGhpcy5zdGF0ZS5pc0ZldGNoaW5nSXRlbXMgJiYgdGhpcy5zdGF0ZS5pdGVtcy5sZW5ndGggPT09IDAgJiYgIXRoaXMuc3RhdGUuZmlsdGVyKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXJDb25maXJtRGVsZXRlTW9kYWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckNvbmZpcm1EZWxldGVNb2RhbCgpIHsKICAgICAgdmFyIGRlbGV0ZUJ1dHRvbiA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJraWJhbmEtcmVhY3QudGFibGVMaXN0Vmlldy5saXN0aW5nLmRlbGV0ZVNlbGVjdGVkSXRlbXNDb25maXJtTW9kYWwuY29uZmlybUJ1dHRvbkxhYmVsIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkRlbGV0ZSIKICAgICAgfSk7CgogICAgICBpZiAodGhpcy5zdGF0ZS5pc0RlbGV0aW5nSXRlbXMpIHsKICAgICAgICBkZWxldGVCdXR0b24gPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJraWJhbmEtcmVhY3QudGFibGVMaXN0Vmlldy5saXN0aW5nLmRlbGV0ZVNlbGVjdGVkSXRlbXNDb25maXJtTW9kYWwuY29uZmlybUJ1dHRvbkxhYmVsRGVsZXRpbmciLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJEZWxldGluZyIKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlPdmVybGF5TWFzaywgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNvbmZpcm1Nb2RhbCwgewogICAgICAgIHRpdGxlOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJraWJhbmEtcmVhY3QudGFibGVMaXN0Vmlldy5saXN0aW5nLmRlbGV0ZVNlbGVjdGVkQ29uZmlybU1vZGFsLnRpdGxlIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRGVsZXRlIHtpdGVtQ291bnR9IHtlbnRpdHlOYW1lfT8iLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIGl0ZW1Db3VudDogdGhpcy5zdGF0ZS5zZWxlY3RlZElkcy5sZW5ndGgsCiAgICAgICAgICAgIGVudGl0eU5hbWU6IHRoaXMuc3RhdGUuc2VsZWN0ZWRJZHMubGVuZ3RoID09PSAxID8gdGhpcy5wcm9wcy5lbnRpdHlOYW1lIDogdGhpcy5wcm9wcy5lbnRpdHlOYW1lUGx1cmFsCiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgYnV0dG9uQ29sb3I6ICJkYW5nZXIiLAogICAgICAgIG9uQ2FuY2VsOiB0aGlzLmNsb3NlRGVsZXRlTW9kYWwsCiAgICAgICAgb25Db25maXJtOiB0aGlzLmRlbGV0ZVNlbGVjdGVkSXRlbXMsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAia2liYW5hLXJlYWN0LnRhYmxlTGlzdFZpZXcubGlzdGluZy5kZWxldGVTZWxlY3RlZEl0ZW1zQ29uZmlybU1vZGFsLmNhbmNlbEJ1dHRvbkxhYmVsIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQ2FuY2VsIgogICAgICAgIH0pLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBkZWxldGVCdXR0b24sCiAgICAgICAgZGVmYXVsdEZvY3VzZWRCdXR0b246ICJjYW5jZWwiCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAia2liYW5hLXJlYWN0LnRhYmxlTGlzdFZpZXcubGlzdGluZy5kZWxldGVDb25maXJtTW9kYWxEZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJZb3UgY2FuJ3QgcmVjb3ZlciBkZWxldGVkIHtlbnRpdHlOYW1lUGx1cmFsfS4iLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgZW50aXR5TmFtZVBsdXJhbDogdGhpcy5wcm9wcy5lbnRpdHlOYW1lUGx1cmFsCiAgICAgICAgfQogICAgICB9KSkpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXJMaXN0aW5nTGltaXRXYXJuaW5nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJMaXN0aW5nTGltaXRXYXJuaW5nKCkgewogICAgICBpZiAodGhpcy5zdGF0ZS5zaG93TGltaXRFcnJvcikgewogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5kZWZhdWx0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ2FsbE91dCwgewogICAgICAgICAgdGl0bGU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgIGlkOiAia2liYW5hLXJlYWN0LnRhYmxlTGlzdFZpZXcubGlzdGluZy5saXN0aW5nTGltaXRFeGNlZWRlZFRpdGxlIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJMaXN0aW5nIGxpbWl0IGV4Y2VlZGVkIgogICAgICAgICAgfSksCiAgICAgICAgICBjb2xvcjogIndhcm5pbmciLAogICAgICAgICAgaWNvblR5cGU6ICJoZWxwIgogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJraWJhbmEtcmVhY3QudGFibGVMaXN0Vmlldy5saXN0aW5nLmxpc3RpbmdMaW1pdEV4Y2VlZGVkRGVzY3JpcHRpb24iLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJZb3UgaGF2ZSB7dG90YWxJdGVtc30ge2VudGl0eU5hbWVQbHVyYWx9LCBidXQgeW91ciB7bGlzdGluZ0xpbWl0VGV4dH0gc2V0dGluZyBwcmV2ZW50cyB0aGUgdGFibGUgYmVsb3cgZnJvbSBkaXNwbGF5aW5nIG1vcmUgdGhhbiB7bGlzdGluZ0xpbWl0VmFsdWV9LiBZb3UgY2FuIGNoYW5nZSB0aGlzIHNldHRpbmcgdW5kZXIge2FkdmFuY2VkU2V0dGluZ3NMaW5rfS4iLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIGVudGl0eU5hbWVQbHVyYWw6IHRoaXMucHJvcHMuZW50aXR5TmFtZVBsdXJhbCwKICAgICAgICAgICAgdG90YWxJdGVtczogdGhpcy5zdGF0ZS50b3RhbEl0ZW1zLAogICAgICAgICAgICBsaXN0aW5nTGltaXRWYWx1ZTogdGhpcy5wcm9wcy5saXN0aW5nTGltaXQsCiAgICAgICAgICAgIGxpc3RpbmdMaW1pdFRleHQ6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInN0cm9uZyIsIG51bGwsICJsaXN0aW5nTGltaXQiKSwKICAgICAgICAgICAgYWR2YW5jZWRTZXR0aW5nc0xpbms6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlMaW5rLCB7CiAgICAgICAgICAgICAgaHJlZjogIiMvbWFuYWdlbWVudC9raWJhbmEvc2V0dGluZ3MiCiAgICAgICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgaWQ6ICJraWJhbmEtcmVhY3QudGFibGVMaXN0Vmlldy5saXN0aW5nLmxpc3RpbmdMaW1pdEV4Y2VlZGVkLmFkdmFuY2VkU2V0dGluZ3NMaW5rVGV4dCIsCiAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBZHZhbmNlZCBTZXR0aW5ncyIKICAgICAgICAgICAgfSkpCiAgICAgICAgICB9CiAgICAgICAgfSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgewogICAgICAgICAgc2l6ZTogIm0iCiAgICAgICAgfSkpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyTm9JdGVtc01lc3NhZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlck5vSXRlbXNNZXNzYWdlKCkgewogICAgICBpZiAodGhpcy5wcm9wcy5ub0l0ZW1zRnJhZ21lbnQpIHsKICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5ub0l0ZW1zRnJhZ21lbnQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogImtpYmFuYS1yZWFjdC50YWJsZUxpc3RWaWV3Lmxpc3Rpbmcubm9BdmFpbGFibGVJdGVtc01lc3NhZ2UiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJObyB7ZW50aXR5TmFtZVBsdXJhbH0gYXZhaWxhYmxlLiIsCiAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgZW50aXR5TmFtZVBsdXJhbDogdGhpcy5wcm9wcy5lbnRpdHlOYW1lUGx1cmFsCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXJUb29sc0xlZnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclRvb2xzTGVmdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgc2VsZWN0aW9uID0gdGhpcy5zdGF0ZS5zZWxlY3RlZElkczsKCiAgICAgIGlmIChzZWxlY3Rpb24ubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgb25DbGljayA9IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgX3RoaXMyLm9wZW5EZWxldGVNb2RhbCgpOwogICAgICB9OwoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b24sIHsKICAgICAgICBjb2xvcjogImRhbmdlciIsCiAgICAgICAgaWNvblR5cGU6ICJ0cmFzaCIsCiAgICAgICAgb25DbGljazogb25DbGljaywKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiZGVsZXRlU2VsZWN0ZWRJdGVtcyIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImtpYmFuYS1yZWFjdC50YWJsZUxpc3RWaWV3Lmxpc3RpbmcuZGVsZXRlQnV0dG9uTWVzc2FnZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJEZWxldGUge2l0ZW1Db3VudH0ge2VudGl0eU5hbWV9IiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGl0ZW1Db3VudDogc2VsZWN0aW9uLmxlbmd0aCwKICAgICAgICAgIGVudGl0eU5hbWU6IHNlbGVjdGlvbi5sZW5ndGggPT09IDEgPyB0aGlzLnByb3BzLmVudGl0eU5hbWUgOiB0aGlzLnByb3BzLmVudGl0eU5hbWVQbHVyYWwKICAgICAgICB9CiAgICAgIH0pKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXJUYWJsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyVGFibGUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIHNlbGVjdGlvbiA9IHRoaXMucHJvcHMuZGVsZXRlSXRlbXMgPyB7CiAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U6IGZ1bmN0aW9uIG9uU2VsZWN0aW9uQ2hhbmdlKG9iaikgewogICAgICAgICAgX3RoaXMzLnNldFN0YXRlKHsKICAgICAgICAgICAgc2VsZWN0ZWRJZHM6IG9iai5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICByZXR1cm4gaXRlbS5pZDsKICAgICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICAgIHJldHVybiBCb29sZWFuKGlkKTsKICAgICAgICAgICAgfSkKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSA6IHVuZGVmaW5lZDsKICAgICAgdmFyIGFjdGlvbnMgPSBbewogICAgICAgIG5hbWU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCdraWJhbmEtcmVhY3QudGFibGVMaXN0Vmlldy5saXN0aW5nLnRhYmxlLmVkaXRBY3Rpb25OYW1lJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdFZGl0JwogICAgICAgIH0pLAogICAgICAgIGRlc2NyaXB0aW9uOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgna2liYW5hLXJlYWN0LnRhYmxlTGlzdFZpZXcubGlzdGluZy50YWJsZS5lZGl0QWN0aW9uRGVzY3JpcHRpb24nLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0VkaXQnCiAgICAgICAgfSksCiAgICAgICAgaWNvbjogJ3BlbmNpbCcsCiAgICAgICAgdHlwZTogJ2ljb24nLAogICAgICAgIG9uQ2xpY2s6IHRoaXMucHJvcHMuZWRpdEl0ZW0KICAgICAgfV07CiAgICAgIHZhciBzZWFyY2ggPSB7CiAgICAgICAgb25DaGFuZ2U6IHRoaXMuc2V0RmlsdGVyLmJpbmQodGhpcyksCiAgICAgICAgdG9vbHNMZWZ0OiB0aGlzLnJlbmRlclRvb2xzTGVmdCgpLAogICAgICAgIGRlZmF1bHRRdWVyeTogdGhpcy5zdGF0ZS5maWx0ZXIsCiAgICAgICAgYm94OiB7CiAgICAgICAgICBpbmNyZW1lbnRhbDogdHJ1ZQogICAgICAgIH0KICAgICAgfTsKICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLnByb3BzLnRhYmxlQ29sdW1ucy5zbGljZSgpOwoKICAgICAgaWYgKHRoaXMucHJvcHMuZWRpdEl0ZW0pIHsKICAgICAgICBjb2x1bW5zLnB1c2goewogICAgICAgICAgbmFtZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tpYmFuYS1yZWFjdC50YWJsZUxpc3RWaWV3Lmxpc3RpbmcudGFibGUuYWN0aW9uVGl0bGUnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQWN0aW9ucycKICAgICAgICAgIH0pLAogICAgICAgICAgd2lkdGg6ICcxMDBweCcsCiAgICAgICAgICBhY3Rpb25zOiBhY3Rpb25zCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHZhciBub0l0ZW1zTWVzc2FnZSA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJraWJhbmEtcmVhY3QudGFibGVMaXN0Vmlldy5saXN0aW5nLm5vTWF0Y2hlZEl0ZW1zTWVzc2FnZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJObyB7ZW50aXR5TmFtZVBsdXJhbH0gbWF0Y2hlZCB5b3VyIHNlYXJjaC4iLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgZW50aXR5TmFtZVBsdXJhbDogdGhpcy5wcm9wcy5lbnRpdHlOYW1lUGx1cmFsCiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpSW5NZW1vcnlUYWJsZSwgewogICAgICAgIGl0ZW1JZDogImlkIiwKICAgICAgICBpdGVtczogdGhpcy5zdGF0ZS5pdGVtcywKICAgICAgICBjb2x1bW5zOiBjb2x1bW5zIC8vIEV1aUJhc2ljVGFibGVDb2x1bW4gaXMgc3RyaWN0ZXIgdGhhbiBDb2x1bW4KICAgICAgICAsCiAgICAgICAgcGFnaW5hdGlvbjogdGhpcy5wYWdpbmF0aW9uLAogICAgICAgIGxvYWRpbmc6IHRoaXMuc3RhdGUuaXNGZXRjaGluZ0l0ZW1zLAogICAgICAgIG1lc3NhZ2U6IG5vSXRlbXNNZXNzYWdlLAogICAgICAgIHNlbGVjdGlvbjogc2VsZWN0aW9uLAogICAgICAgIHNlYXJjaDogc2VhcmNoLAogICAgICAgIHNvcnRpbmc6IHRydWUsCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogIml0ZW1zSW5NZW1UYWJsZSIKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyTGlzdGluZ09yRW1wdHlTdGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyTGlzdGluZ09yRW1wdHlTdGF0ZSgpIHsKICAgICAgaWYgKHRoaXMuaGFzTm9JdGVtcygpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyTm9JdGVtc01lc3NhZ2UoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMucmVuZGVyTGlzdGluZygpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlckxpc3RpbmciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckxpc3RpbmcoKSB7CiAgICAgIHZhciBjcmVhdGVCdXR0b247CgogICAgICBpZiAodGhpcy5wcm9wcy5jcmVhdGVJdGVtKSB7CiAgICAgICAgY3JlYXRlQnV0dG9uID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgICAgICBncm93OiBmYWxzZQogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b24sIHsKICAgICAgICAgIG9uQ2xpY2s6IHRoaXMucHJvcHMuY3JlYXRlSXRlbSwKICAgICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJuZXdJdGVtQnV0dG9uIiwKICAgICAgICAgIGljb25UeXBlOiAicGx1c0luQ2lyY2xlIiwKICAgICAgICAgIGZpbGw6IHRydWUKICAgICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJraWJhbmEtcmVhY3QudGFibGVMaXN0Vmlldy5saXN0aW5nLmNyZWF0ZU5ld0l0ZW1CdXR0b25MYWJlbCIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkNyZWF0ZSB7ZW50aXR5TmFtZX0iLAogICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgIGVudGl0eU5hbWU6IHRoaXMucHJvcHMuZW50aXR5TmFtZQogICAgICAgICAgfQogICAgICAgIH0pKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCB0aGlzLnN0YXRlLnNob3dEZWxldGVNb2RhbCAmJiB0aGlzLnJlbmRlckNvbmZpcm1EZWxldGVNb2RhbCgpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCB7CiAgICAgICAganVzdGlmeUNvbnRlbnQ6ICJzcGFjZUJldHdlZW4iLAogICAgICAgIGFsaWduSXRlbXM6ICJmbGV4RW5kIiwKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAidG9wLW5hdiIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgICAgZ3JvdzogZmFsc2UKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRpdGxlLCB7CiAgICAgICAgc2l6ZTogImwiCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImgxIiwgewogICAgICAgIGlkOiB0aGlzLnByb3BzLmhlYWRpbmdJZAogICAgICB9LCB0aGlzLnByb3BzLnRhYmxlTGlzdFRpdGxlKSkpLCBjcmVhdGVCdXR0b24pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCB7CiAgICAgICAgc2l6ZTogIm0iCiAgICAgIH0pLCB0aGlzLnJlbmRlckxpc3RpbmdMaW1pdFdhcm5pbmcoKSwgdGhpcy5yZW5kZXJUYWJsZSgpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXJQYWdlQ29udGVudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUGFnZUNvbnRlbnQoKSB7CiAgICAgIGlmICghdGhpcy5zdGF0ZS5oYXNJbml0aWFsRmV0Y2hSZXR1cm5lZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlQYWdlQ29udGVudCwgewogICAgICAgIGhvcml6b250YWxQb3NpdGlvbjogImNlbnRlciIKICAgICAgfSwgdGhpcy5yZW5kZXJMaXN0aW5nT3JFbXB0eVN0YXRlKCkpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVBhZ2UsIHsKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiB0aGlzLnByb3BzLmVudGl0eU5hbWUgKyAnTGFuZGluZ1BhZ2UnLAogICAgICAgIGNsYXNzTmFtZTogIml0ZW1MaXN0aW5nX19wYWdlIiwKICAgICAgICByZXN0cmljdFdpZHRoOiB0cnVlCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlQYWdlQm9keSwgewogICAgICAgICJhcmlhLWxhYmVsbGVkYnkiOiB0aGlzLnN0YXRlLmhhc0luaXRpYWxGZXRjaFJldHVybmVkID8gdGhpcy5wcm9wcy5oZWFkaW5nSWQgOiB1bmRlZmluZWQKICAgICAgfSwgdGhpcy5yZW5kZXJQYWdlQ29udGVudCgpKSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gVGFibGVMaXN0VmlldzsKfShfcmVhY3QuZGVmYXVsdC5Db21wb25lbnQpOwoKZXhwb3J0cy5UYWJsZUxpc3RWaWV3ID0gVGFibGVMaXN0Vmlldzs="},null]}