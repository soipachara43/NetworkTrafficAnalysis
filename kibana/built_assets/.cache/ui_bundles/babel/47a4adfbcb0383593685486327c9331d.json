{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/maps/public/layers/sources/ems_tms_source/ems_tms_source.js","dependencies":[{"path":"x-pack/legacy/plugins/maps/public/layers/sources/ems_tms_source/ems_tms_source.js","mtime":1589249552448},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkVNU1RNU1NvdXJjZSA9IHZvaWQgMDsKCnZhciBfbG9kYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsb2Rhc2giKSk7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfdG1zX3NvdXJjZSA9IHJlcXVpcmUoIi4uL3Rtc19zb3VyY2UiKTsKCnZhciBfdmVjdG9yX3RpbGVfbGF5ZXIgPSByZXF1aXJlKCIuLi8uLi92ZWN0b3JfdGlsZV9sYXllciIpOwoKdmFyIF9tZXRhID0gcmVxdWlyZSgiLi4vLi4vLi4vbWV0YSIpOwoKdmFyIF90aWxlX3NlcnZpY2Vfc2VsZWN0ID0gcmVxdWlyZSgiLi90aWxlX3NlcnZpY2Vfc2VsZWN0Iik7Cgp2YXIgX3VwZGF0ZV9zb3VyY2VfZWRpdG9yID0gcmVxdWlyZSgiLi91cGRhdGVfc291cmNlX2VkaXRvciIpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX2kxOG5fZ2V0dGVycyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbW1vbi9pMThuX2dldHRlcnMiKTsKCnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29tbW9uL2NvbnN0YW50cyIpOwoKdmFyIF9raWJhbmFfc2VydmljZXMgPSByZXF1aXJlKCIuLi8uLi8uLi9raWJhbmFfc2VydmljZXMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7IH0gfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIHNlbGYgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7IGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7IH0gZnVuY3Rpb24gX3Rocm93KGVycikgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7IH0gX25leHQodW5kZWZpbmVkKTsgfSk7IH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKdmFyIEVNU1RNU1NvdXJjZSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9BYnN0cmFjdFRNU1NvdXJjZSkgewogIF9pbmhlcml0cyhFTVNUTVNTb3VyY2UsIF9BYnN0cmFjdFRNU1NvdXJjZSk7CgogIF9jcmVhdGVDbGFzcyhFTVNUTVNTb3VyY2UsIG51bGwsIFt7CiAgICBrZXk6ICJjcmVhdGVEZXNjcmlwdG9yIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVEZXNjcmlwdG9yKHNvdXJjZUNvbmZpZykgewogICAgICByZXR1cm4gewogICAgICAgIHR5cGU6IEVNU1RNU1NvdXJjZS50eXBlLAogICAgICAgIGlkOiBzb3VyY2VDb25maWcuaWQsCiAgICAgICAgaXNBdXRvU2VsZWN0OiBzb3VyY2VDb25maWcuaXNBdXRvU2VsZWN0CiAgICAgIH07CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyRWRpdG9yIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJFZGl0b3IoX3JlZikgewogICAgICB2YXIgb25QcmV2aWV3U291cmNlID0gX3JlZi5vblByZXZpZXdTb3VyY2UsCiAgICAgICAgICBpbnNwZWN0b3JBZGFwdGVycyA9IF9yZWYuaW5zcGVjdG9yQWRhcHRlcnM7CgogICAgICB2YXIgb25Tb3VyY2VDb25maWdDaGFuZ2UgPSBmdW5jdGlvbiBvblNvdXJjZUNvbmZpZ0NoYW5nZShzb3VyY2VDb25maWcpIHsKICAgICAgICB2YXIgZGVzY3JpcHRvciA9IEVNU1RNU1NvdXJjZS5jcmVhdGVEZXNjcmlwdG9yKHNvdXJjZUNvbmZpZyk7CiAgICAgICAgdmFyIHNvdXJjZSA9IG5ldyBFTVNUTVNTb3VyY2UoZGVzY3JpcHRvciwgaW5zcGVjdG9yQWRhcHRlcnMpOwogICAgICAgIG9uUHJldmlld1NvdXJjZShzb3VyY2UpOwogICAgICB9OwoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3RpbGVfc2VydmljZV9zZWxlY3QuVGlsZVNlcnZpY2VTZWxlY3QsIHsKICAgICAgICBvblRpbGVTZWxlY3Q6IG9uU291cmNlQ29uZmlnQ2hhbmdlCiAgICAgIH0pOwogICAgfQogIH1dKTsKCiAgZnVuY3Rpb24gRU1TVE1TU291cmNlKGRlc2NyaXB0b3IsIGluc3BlY3RvckFkYXB0ZXJzKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRU1TVE1TU291cmNlKTsKCiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKEVNU1RNU1NvdXJjZSkuY2FsbCh0aGlzLCB7CiAgICAgIGlkOiBkZXNjcmlwdG9yLmlkLAogICAgICB0eXBlOiBFTVNUTVNTb3VyY2UudHlwZSwKICAgICAgaXNBdXRvU2VsZWN0OiBfbG9kYXNoLmRlZmF1bHQuZ2V0KGRlc2NyaXB0b3IsICdpc0F1dG9TZWxlY3QnLCBmYWxzZSkKICAgIH0sIGluc3BlY3RvckFkYXB0ZXJzKSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoRU1TVE1TU291cmNlLCBbewogICAga2V5OiAicmVuZGVyU291cmNlU2V0dGluZ3NFZGl0b3IiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclNvdXJjZVNldHRpbmdzRWRpdG9yKF9yZWYyKSB7CiAgICAgIHZhciBvbkNoYW5nZSA9IF9yZWYyLm9uQ2hhbmdlOwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfdXBkYXRlX3NvdXJjZV9lZGl0b3IuVXBkYXRlU291cmNlRWRpdG9yLCB7CiAgICAgICAgb25DaGFuZ2U6IG9uQ2hhbmdlLAogICAgICAgIGNvbmZpZzogdGhpcy5fZGVzY3JpcHRvcgogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRJbW11dGFibGVQcm9wZXJ0aWVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0SW1tdXRhYmxlUHJvcGVydGllcyA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGRpc3BsYXlOYW1lLCBhdXRvU2VsZWN0TXNnOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGlzcGxheU5hbWUoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZGlzcGxheU5hbWUgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgYXV0b1NlbGVjdE1zZyA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tYXBzLnNvdXJjZS5lbXNUaWxlLmlzQXV0b1NlbGVjdExhYmVsJywgewogICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ2F1dG9zZWxlY3QgYmFzZWQgb24gS2liYW5hIHRoZW1lJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBbewogICAgICAgICAgICAgICAgICBsYWJlbDogKDAsIF9pMThuX2dldHRlcnMuZ2V0RGF0YVNvdXJjZUxhYmVsKSgpLAogICAgICAgICAgICAgICAgICB2YWx1ZTogRU1TVE1TU291cmNlLnRpdGxlCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWFwcy5zb3VyY2UuZW1zVGlsZS5zZXJ2aWNlSWQnLCB7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJUaWxlIHNlcnZpY2UiCiAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5fZGVzY3JpcHRvci5pc0F1dG9TZWxlY3QgPyAiIi5jb25jYXQoZGlzcGxheU5hbWUsICIgLSAiKS5jb25jYXQoYXV0b1NlbGVjdE1zZykgOiBkaXNwbGF5TmFtZQogICAgICAgICAgICAgICAgfV0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0SW1tdXRhYmxlUHJvcGVydGllcygpIHsKICAgICAgICByZXR1cm4gX2dldEltbXV0YWJsZVByb3BlcnRpZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldEltbXV0YWJsZVByb3BlcnRpZXM7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJfZ2V0RU1TVE1TU2VydmljZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldEVNU1RNU1NlcnZpY2UyID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIGVtc0NsaWVudCwgZW1zVE1TU2VydmljZXMsIGVtc1RpbGVMYXllcklkLCB0bXNTZXJ2aWNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBlbXNDbGllbnQgPSAoMCwgX21ldGEuZ2V0RU1TQ2xpZW50KSgpOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGVtc0NsaWVudC5nZXRUTVNTZXJ2aWNlcygpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBlbXNUTVNTZXJ2aWNlcyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgZW1zVGlsZUxheWVySWQgPSB0aGlzLmdldFRpbGVMYXllcklkKCk7CiAgICAgICAgICAgICAgICB0bXNTZXJ2aWNlID0gZW1zVE1TU2VydmljZXMuZmluZChmdW5jdGlvbiAodG1zU2VydmljZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gdG1zU2VydmljZS5nZXRJZCgpID09PSBlbXNUaWxlTGF5ZXJJZDsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmICh0bXNTZXJ2aWNlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tYXBzLnNvdXJjZS5lbXNUaWxlLmVycm9yTWVzc2FnZScsIHsKICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJVbmFibGUgdG8gZmluZCBFTVMgdGlsZSBjb25maWd1cmF0aW9uIGZvciBpZDoge2lkfSIsCiAgICAgICAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgICAgICAgIGlkOiBlbXNUaWxlTGF5ZXJJZAogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCB0bXNTZXJ2aWNlKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gX2dldEVNU1RNU1NlcnZpY2UoKSB7CiAgICAgICAgcmV0dXJuIF9nZXRFTVNUTVNTZXJ2aWNlMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gX2dldEVNU1RNU1NlcnZpY2U7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJfY3JlYXRlRGVmYXVsdExheWVyRGVzY3JpcHRvciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZURlZmF1bHRMYXllckRlc2NyaXB0b3Iob3B0aW9ucykgewogICAgICByZXR1cm4gX3ZlY3Rvcl90aWxlX2xheWVyLlZlY3RvclRpbGVMYXllci5jcmVhdGVEZXNjcmlwdG9yKF9vYmplY3RTcHJlYWQoewogICAgICAgIHNvdXJjZURlc2NyaXB0b3I6IHRoaXMuX2Rlc2NyaXB0b3IKICAgICAgfSwgb3B0aW9ucykpOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZURlZmF1bHRMYXllciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRGVmYXVsdExheWVyKG9wdGlvbnMpIHsKICAgICAgcmV0dXJuIG5ldyBfdmVjdG9yX3RpbGVfbGF5ZXIuVmVjdG9yVGlsZUxheWVyKHsKICAgICAgICBsYXllckRlc2NyaXB0b3I6IHRoaXMuX2NyZWF0ZURlZmF1bHRMYXllckRlc2NyaXB0b3Iob3B0aW9ucyksCiAgICAgICAgc291cmNlOiB0aGlzCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImdldERpc3BsYXlOYW1lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0RGlzcGxheU5hbWUgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgZW1zVE1TU2VydmljZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldEVNU1RNU1NlcnZpY2UoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgZW1zVE1TU2VydmljZSA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIGVtc1RNU1NlcnZpY2UuZ2V0RGlzcGxheU5hbWUoKSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNzsKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCB0aGlzLmdldFRpbGVMYXllcklkKCkpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzLCBbWzAsIDddXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldERpc3BsYXlOYW1lKCkgewogICAgICAgIHJldHVybiBfZ2V0RGlzcGxheU5hbWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldERpc3BsYXlOYW1lOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZ2V0QXR0cmlidXRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0QXR0cmlidXRpb25zID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIGVtc1RNU1NlcnZpY2UsIG1hcmtkb3duOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0RU1TVE1TU2VydmljZSgpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBlbXNUTVNTZXJ2aWNlID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICBtYXJrZG93biA9IGVtc1RNU1NlcnZpY2UuZ2V0TWFya2Rvd25BdHRyaWJ1dGlvbigpOwoKICAgICAgICAgICAgICAgIGlmIChtYXJrZG93bikgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBbXSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCB0aGlzLmNvbnZlcnRNYXJrZG93bkxpbmtUb09iamVjdEFycihtYXJrZG93bikpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRBdHRyaWJ1dGlvbnMoKSB7CiAgICAgICAgcmV0dXJuIF9nZXRBdHRyaWJ1dGlvbnMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldEF0dHJpYnV0aW9uczsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImdldFVybFRlbXBsYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0VXJsVGVtcGxhdGUgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgZW1zVE1TU2VydmljZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldEVNU1RNU1NlcnZpY2UoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZW1zVE1TU2VydmljZSA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGVtc1RNU1NlcnZpY2UuZ2V0VXJsVGVtcGxhdGUoKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0NS5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0VXJsVGVtcGxhdGUoKSB7CiAgICAgICAgcmV0dXJuIF9nZXRVcmxUZW1wbGF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0VXJsVGVtcGxhdGU7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJnZXRTcHJpdGVOYW1lc3BhY2VQcmVmaXgiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNwcml0ZU5hbWVzcGFjZVByZWZpeCgpIHsKICAgICAgcmV0dXJuICdlbXMvJyArIHRoaXMuZ2V0VGlsZUxheWVySWQoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRWZWN0b3JTdHlsZVNoZWV0QW5kU3ByaXRlTWV0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldFZlY3RvclN0eWxlU2hlZXRBbmRTcHJpdGVNZXRhID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoaXNSZXRpbmEpIHsKICAgICAgICB2YXIgZW1zVE1TU2VydmljZSwgc3R5bGVTaGVldCwgc3ByaXRlTWV0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldEVNU1RNU1NlcnZpY2UoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZW1zVE1TU2VydmljZSA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGVtc1RNU1NlcnZpY2UuZ2V0VmVjdG9yU3R5bGVTaGVldCgpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBzdHlsZVNoZWV0ID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gZW1zVE1TU2VydmljZS5nZXRTcHJpdGVTaGVldE1ldGEoaXNSZXRpbmEpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBzcHJpdGVNZXRhID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgICB2ZWN0b3JTdHlsZVNoZWV0OiBzdHlsZVNoZWV0LAogICAgICAgICAgICAgICAgICBzcHJpdGVNZXRhOiBzcHJpdGVNZXRhCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldFZlY3RvclN0eWxlU2hlZXRBbmRTcHJpdGVNZXRhKF94KSB7CiAgICAgICAgcmV0dXJuIF9nZXRWZWN0b3JTdHlsZVNoZWV0QW5kU3ByaXRlTWV0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0VmVjdG9yU3R5bGVTaGVldEFuZFNwcml0ZU1ldGE7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJnZXRUaWxlTGF5ZXJJZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGlsZUxheWVySWQoKSB7CiAgICAgIGlmICghdGhpcy5fZGVzY3JpcHRvci5pc0F1dG9TZWxlY3QpIHsKICAgICAgICByZXR1cm4gdGhpcy5fZGVzY3JpcHRvci5pZDsKICAgICAgfQoKICAgICAgdmFyIGlzRGFya01vZGUgPSAoMCwgX2tpYmFuYV9zZXJ2aWNlcy5nZXRVaVNldHRpbmdzKSgpLmdldCgndGhlbWU6ZGFya01vZGUnLCBmYWxzZSk7CiAgICAgIHZhciBlbXNUaWxlTGF5ZXJJZCA9ICgwLCBfa2liYW5hX3NlcnZpY2VzLmdldEluamVjdGVkVmFyRnVuYykoKSgnZW1zVGlsZUxheWVySWQnKTsKICAgICAgcmV0dXJuIGlzRGFya01vZGUgPyBlbXNUaWxlTGF5ZXJJZC5kYXJrIDogZW1zVGlsZUxheWVySWQuYnJpZ2h0OwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEVNU1RNU1NvdXJjZTsKfShfdG1zX3NvdXJjZS5BYnN0cmFjdFRNU1NvdXJjZSk7CgpleHBvcnRzLkVNU1RNU1NvdXJjZSA9IEVNU1RNU1NvdXJjZTsKCl9kZWZpbmVQcm9wZXJ0eShFTVNUTVNTb3VyY2UsICJ0eXBlIiwgX2NvbnN0YW50cy5FTVNfVE1TKTsKCl9kZWZpbmVQcm9wZXJ0eShFTVNUTVNTb3VyY2UsICJ0aXRsZSIsIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tYXBzLnNvdXJjZS5lbXNUaWxlVGl0bGUnLCB7CiAgZGVmYXVsdE1lc3NhZ2U6ICdFTVMgQmFzZW1hcHMnCn0pKTsKCl9kZWZpbmVQcm9wZXJ0eShFTVNUTVNTb3VyY2UsICJkZXNjcmlwdGlvbiIsIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tYXBzLnNvdXJjZS5lbXNUaWxlRGVzY3JpcHRpb24nLCB7CiAgZGVmYXVsdE1lc3NhZ2U6ICdUaWxlIG1hcCBzZXJ2aWNlIGZyb20gRWxhc3RpYyBNYXBzIFNlcnZpY2UnCn0pKTsKCl9kZWZpbmVQcm9wZXJ0eShFTVNUTVNTb3VyY2UsICJpY29uIiwgJ2Vtc0FwcCcpOw=="},null]}