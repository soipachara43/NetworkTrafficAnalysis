{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/lens/public/xy_visualization/xy_suggestions.js","dependencies":[{"path":"x-pack/legacy/plugins/lens/public/xy_visualization/xy_suggestions.js","mtime":1589249552324},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmdldFN1Z2dlc3Rpb25zID0gZ2V0U3VnZ2VzdGlvbnM7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX2NoYXJ0cyA9IHJlcXVpcmUoIkBlbGFzdGljL2NoYXJ0cyIpOwoKdmFyIF9zdGF0ZV9oZWxwZXJzID0gcmVxdWlyZSgiLi9zdGF0ZV9oZWxwZXJzIik7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgewogIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgewogICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgYXJyMltpXSA9IGFycltpXTsKICAgIH0KCiAgICByZXR1cm4gYXJyMjsKICB9Cn0KCmZ1bmN0aW9uIF90b0FycmF5KGFycikgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsKICBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09ICJbb2JqZWN0IEFyZ3VtZW50c10iKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKdmFyIGNvbHVtblNvcnRPcmRlciA9IHsKICBkb2N1bWVudDogMCwKICBkYXRlOiAxLAogIHN0cmluZzogMiwKICBpcDogMywKICBib29sZWFuOiA0LAogIG51bWJlcjogNQp9OwovKioKICogR2VuZXJhdGUgc3VnZ2VzdGlvbnMgZm9yIHRoZSB4eSBjaGFydC4KICoKICogQHBhcmFtIG9wdHMKICovCgpmdW5jdGlvbiBnZXRTdWdnZXN0aW9ucyhfcmVmKSB7CiAgdmFyIHRhYmxlID0gX3JlZi50YWJsZSwKICAgICAgc3RhdGUgPSBfcmVmLnN0YXRlLAogICAgICBrZXB0TGF5ZXJJZHMgPSBfcmVmLmtlcHRMYXllcklkczsKCiAgaWYgKCAvLyBXZSBvbmx5IHJlbmRlciBsaW5lIGNoYXJ0cyBmb3IgbXVsdGktcm93IHF1ZXJpZXMuIFdlIHJlcXVpcmUgYXQgbGVhc3QKICAvLyB0d28gY29sdW1uczogb25lIGZvciB4IGFuZCBhdCBsZWFzdCBvbmUgZm9yIHksIGFuZCB5IGNvbHVtbnMgbXVzdCBiZSBudW1lcmljLgogIC8vIFdlIHJlamVjdCBhbnkgZGF0YXNvdXJjZSBzdWdnZXN0aW9ucyB3aGljaCBoYXZlIGEgY29sdW1uIG9mIGFuIHVua25vd24gdHlwZS4KICAhdGFibGUuaXNNdWx0aVJvdyB8fCB0YWJsZS5jb2x1bW5zLmxlbmd0aCA8PSAxIHx8IHRhYmxlLmNvbHVtbnMuZXZlcnkoZnVuY3Rpb24gKGNvbCkgewogICAgcmV0dXJuIGNvbC5vcGVyYXRpb24uZGF0YVR5cGUgIT09ICdudW1iZXInOwogIH0pIHx8IHRhYmxlLmNvbHVtbnMuc29tZShmdW5jdGlvbiAoY29sKSB7CiAgICByZXR1cm4gIWNvbHVtblNvcnRPcmRlci5oYXNPd25Qcm9wZXJ0eShjb2wub3BlcmF0aW9uLmRhdGFUeXBlKTsKICB9KSkgewogICAgcmV0dXJuIFtdOwogIH0KCiAgdmFyIHN1Z2dlc3Rpb25zID0gZ2V0U3VnZ2VzdGlvbkZvckNvbHVtbnModGFibGUsIGtlcHRMYXllcklkcywgc3RhdGUpOwoKICBpZiAoc3VnZ2VzdGlvbnMgJiYgc3VnZ2VzdGlvbnMgaW5zdGFuY2VvZiBBcnJheSkgewogICAgcmV0dXJuIHN1Z2dlc3Rpb25zOwogIH0KCiAgcmV0dXJuIHN1Z2dlc3Rpb25zID8gW3N1Z2dlc3Rpb25zXSA6IFtdOwp9CgpmdW5jdGlvbiBnZXRTdWdnZXN0aW9uRm9yQ29sdW1ucyh0YWJsZSwga2VwdExheWVySWRzLCBjdXJyZW50U3RhdGUpIHsKICB2YXIgX3BhcnRpdGlvbiA9ICgwLCBfbG9kYXNoLnBhcnRpdGlvbikodGFibGUuY29sdW1ucywgZnVuY3Rpb24gKGNvbCkgewogICAgcmV0dXJuIGNvbC5vcGVyYXRpb24uaXNCdWNrZXRlZDsKICB9KSwKICAgICAgX3BhcnRpdGlvbjIgPSBfc2xpY2VkVG9BcnJheShfcGFydGl0aW9uLCAyKSwKICAgICAgYnVja2V0cyA9IF9wYXJ0aXRpb24yWzBdLAogICAgICB2YWx1ZXMgPSBfcGFydGl0aW9uMlsxXTsKCiAgaWYgKGJ1Y2tldHMubGVuZ3RoID09PSAxIHx8IGJ1Y2tldHMubGVuZ3RoID09PSAyKSB7CiAgICB2YXIgX2dldEJ1Y2tldE1hcHBpbmdzID0gZ2V0QnVja2V0TWFwcGluZ3ModGFibGUsIGN1cnJlbnRTdGF0ZSksCiAgICAgICAgX2dldEJ1Y2tldE1hcHBpbmdzMiA9IF9zbGljZWRUb0FycmF5KF9nZXRCdWNrZXRNYXBwaW5ncywgMiksCiAgICAgICAgeCA9IF9nZXRCdWNrZXRNYXBwaW5nczJbMF0sCiAgICAgICAgc3BsaXRCeSA9IF9nZXRCdWNrZXRNYXBwaW5nczJbMV07CgogICAgcmV0dXJuIGdldFN1Z2dlc3Rpb25zRm9yTGF5ZXIoewogICAgICBsYXllcklkOiB0YWJsZS5sYXllcklkLAogICAgICBjaGFuZ2VUeXBlOiB0YWJsZS5jaGFuZ2VUeXBlLAogICAgICB4VmFsdWU6IHgsCiAgICAgIHlWYWx1ZXM6IHZhbHVlcywKICAgICAgc3BsaXRCeTogc3BsaXRCeSwKICAgICAgY3VycmVudFN0YXRlOiBjdXJyZW50U3RhdGUsCiAgICAgIHRhYmxlTGFiZWw6IHRhYmxlLmxhYmVsLAogICAgICBrZXB0TGF5ZXJJZHM6IGtlcHRMYXllcklkcwogICAgfSk7CiAgfSBlbHNlIGlmIChidWNrZXRzLmxlbmd0aCA9PT0gMCkgewogICAgdmFyIF9wcmlvcml0aXplQ29sdW1ucyA9IHByaW9yaXRpemVDb2x1bW5zKHZhbHVlcyksCiAgICAgICAgX3ByaW9yaXRpemVDb2x1bW5zMiA9IF90b0FycmF5KF9wcmlvcml0aXplQ29sdW1ucyksCiAgICAgICAgX3ggPSBfcHJpb3JpdGl6ZUNvbHVtbnMyWzBdLAogICAgICAgIHlWYWx1ZXMgPSBfcHJpb3JpdGl6ZUNvbHVtbnMyLnNsaWNlKDEpOwoKICAgIHJldHVybiBnZXRTdWdnZXN0aW9uc0ZvckxheWVyKHsKICAgICAgbGF5ZXJJZDogdGFibGUubGF5ZXJJZCwKICAgICAgY2hhbmdlVHlwZTogdGFibGUuY2hhbmdlVHlwZSwKICAgICAgeFZhbHVlOiBfeCwKICAgICAgeVZhbHVlczogeVZhbHVlcywKICAgICAgc3BsaXRCeTogdW5kZWZpbmVkLAogICAgICBjdXJyZW50U3RhdGU6IGN1cnJlbnRTdGF0ZSwKICAgICAgdGFibGVMYWJlbDogdGFibGUubGFiZWwsCiAgICAgIGtlcHRMYXllcklkczoga2VwdExheWVySWRzCiAgICB9KTsKICB9Cn0KCmZ1bmN0aW9uIGdldEJ1Y2tldE1hcHBpbmdzKHRhYmxlLCBjdXJyZW50U3RhdGUpIHsKICB2YXIgY3VycmVudExheWVyID0gY3VycmVudFN0YXRlICYmIGN1cnJlbnRTdGF0ZS5sYXllcnMuZmluZChmdW5jdGlvbiAoX3JlZjIpIHsKICAgIHZhciBsYXllcklkID0gX3JlZjIubGF5ZXJJZDsKICAgIHJldHVybiBsYXllcklkID09PSB0YWJsZS5sYXllcklkOwogIH0pOwogIHZhciBidWNrZXRzID0gdGFibGUuY29sdW1ucy5maWx0ZXIoZnVuY3Rpb24gKGNvbCkgewogICAgcmV0dXJuIGNvbC5vcGVyYXRpb24uaXNCdWNrZXRlZDsKICB9KTsgLy8gcmV2ZXJzZSB0aGUgYnVja2V0cyBiZWZvcmUgcHJpb3JpdGl6YXRpb24gdG8gYWx3YXlzIHVzZSB0aGUgbW9zdCBpbm5lcgogIC8vIGJ1Y2tldCBvZiB0aGUgaGlnaGVzdC1wcmlvcml0aXplZCBncm91cCBhcyB4IHZhbHVlIChkb24ndCB1c2UgbmVzdGVkCiAgLy8gYnVja2V0cyBhcyBzcGxpdCBzZXJpZXMpCgogIHZhciBwcmlvcml0aXplZEJ1Y2tldHMgPSBwcmlvcml0aXplQ29sdW1ucyhidWNrZXRzLnJldmVyc2UoKSk7CgogIGlmICghY3VycmVudExheWVyIHx8IHRhYmxlLmNoYW5nZVR5cGUgPT09ICdpbml0aWFsJykgewogICAgcmV0dXJuIHByaW9yaXRpemVkQnVja2V0czsKICB9IC8vIGlmIGV4aXN0aW5nIHRhYmxlIGlzIGp1c3QgbW9kaWZpZWQsIHRyeSB0byBtYXAgYnVja2V0cyB0byB0aGUgY3VycmVudCBkaW1lbnNpb25zCgoKICB2YXIgY3VycmVudFhDb2x1bW5JbmRleCA9IHByaW9yaXRpemVkQnVja2V0cy5maW5kSW5kZXgoZnVuY3Rpb24gKF9yZWYzKSB7CiAgICB2YXIgY29sdW1uSWQgPSBfcmVmMy5jb2x1bW5JZDsKICAgIHJldHVybiBjb2x1bW5JZCA9PT0gY3VycmVudExheWVyLnhBY2Nlc3NvcjsKICB9KTsKICB2YXIgY3VycmVudFhEYXRhVHlwZSA9IGN1cnJlbnRYQ29sdW1uSW5kZXggPiAtMSAmJiBwcmlvcml0aXplZEJ1Y2tldHNbY3VycmVudFhDb2x1bW5JbmRleF0ub3BlcmF0aW9uLmRhdGFUeXBlOwoKICBpZiAoY3VycmVudFhEYXRhVHlwZSAmJiAoIC8vIG1ha2Ugc3VyZSB0aW1lIGdldHMgbWFwcGVkIHRvIHggZGltZW5zaW9uIGV2ZW4gd2hlbiBjaGFuZ2luZyBjdXJyZW50IGJ1Y2tldC9kaW1lbnNpb24gbWFwcGluZwogIGN1cnJlbnRYRGF0YVR5cGUgPT09ICdkYXRlJyB8fCBwcmlvcml0aXplZEJ1Y2tldHNbMF0ub3BlcmF0aW9uLmRhdGFUeXBlICE9PSAnZGF0ZScpKSB7CiAgICB2YXIgX3ByaW9yaXRpemVkQnVja2V0cyRzID0gcHJpb3JpdGl6ZWRCdWNrZXRzLnNwbGljZShjdXJyZW50WENvbHVtbkluZGV4LCAxKSwKICAgICAgICBfcHJpb3JpdGl6ZWRCdWNrZXRzJHMyID0gX3NsaWNlZFRvQXJyYXkoX3ByaW9yaXRpemVkQnVja2V0cyRzLCAxKSwKICAgICAgICB4ID0gX3ByaW9yaXRpemVkQnVja2V0cyRzMlswXTsKCiAgICBwcmlvcml0aXplZEJ1Y2tldHMudW5zaGlmdCh4KTsKICB9CgogIHZhciBjdXJyZW50U3BsaXRDb2x1bW5JbmRleCA9IHByaW9yaXRpemVkQnVja2V0cy5maW5kSW5kZXgoZnVuY3Rpb24gKF9yZWY0KSB7CiAgICB2YXIgY29sdW1uSWQgPSBfcmVmNC5jb2x1bW5JZDsKICAgIHJldHVybiBjb2x1bW5JZCA9PT0gY3VycmVudExheWVyLnNwbGl0QWNjZXNzb3I7CiAgfSk7CgogIGlmIChjdXJyZW50U3BsaXRDb2x1bW5JbmRleCA+IC0xKSB7CiAgICB2YXIgX3ByaW9yaXRpemVkQnVja2V0cyRzMyA9IHByaW9yaXRpemVkQnVja2V0cy5zcGxpY2UoY3VycmVudFNwbGl0Q29sdW1uSW5kZXgsIDEpLAogICAgICAgIF9wcmlvcml0aXplZEJ1Y2tldHMkczQgPSBfc2xpY2VkVG9BcnJheShfcHJpb3JpdGl6ZWRCdWNrZXRzJHMzLCAxKSwKICAgICAgICBzcGxpdEJ5ID0gX3ByaW9yaXRpemVkQnVja2V0cyRzNFswXTsKCiAgICBwcmlvcml0aXplZEJ1Y2tldHMucHVzaChzcGxpdEJ5KTsKICB9CgogIHJldHVybiBwcmlvcml0aXplZEJ1Y2tldHM7Cn0gLy8gVGhpcyBzaHVmZmxlcyBjb2x1bW5zIGFyb3VuZCBzbyB0aGF0IHRoZSBsZWZ0LW1vc3QgY29sdW1uIGRlZnVhbHRzIHRvOgovLyBkYXRlLCBzdHJpbmcsIGJvb2xlYW4sIHRoZW4gbnVtYmVyLCBpbiB0aGF0IHByaW9yaXR5LiBXZSB0aGVuIHVzZSB0aGlzCi8vIG9yZGVyIHRvIHBsdWNrIG91dCB0aGUgeCBjb2x1bW4sIGFuZCB0aGUgc3BsaXQgLyBzdGFjayBjb2x1bW4uCgoKZnVuY3Rpb24gcHJpb3JpdGl6ZUNvbHVtbnMoY29sdW1ucykgewogIHJldHVybiBfdG9Db25zdW1hYmxlQXJyYXkoY29sdW1ucykuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgcmV0dXJuIGNvbHVtblNvcnRPcmRlclthLm9wZXJhdGlvbi5kYXRhVHlwZV0gLSBjb2x1bW5Tb3J0T3JkZXJbYi5vcGVyYXRpb24uZGF0YVR5cGVdOwogIH0pOwp9CgpmdW5jdGlvbiBnZXRTdWdnZXN0aW9uc0ZvckxheWVyKF9yZWY1KSB7CiAgdmFyIGxheWVySWQgPSBfcmVmNS5sYXllcklkLAogICAgICBjaGFuZ2VUeXBlID0gX3JlZjUuY2hhbmdlVHlwZSwKICAgICAgeFZhbHVlID0gX3JlZjUueFZhbHVlLAogICAgICB5VmFsdWVzID0gX3JlZjUueVZhbHVlcywKICAgICAgc3BsaXRCeSA9IF9yZWY1LnNwbGl0QnksCiAgICAgIGN1cnJlbnRTdGF0ZSA9IF9yZWY1LmN1cnJlbnRTdGF0ZSwKICAgICAgdGFibGVMYWJlbCA9IF9yZWY1LnRhYmxlTGFiZWwsCiAgICAgIGtlcHRMYXllcklkcyA9IF9yZWY1LmtlcHRMYXllcklkczsKICB2YXIgdGl0bGUgPSBnZXRTdWdnZXN0aW9uVGl0bGUoeVZhbHVlcywgeFZhbHVlLCB0YWJsZUxhYmVsKTsKICB2YXIgc2VyaWVzVHlwZSA9IGdldFNlcmllc1R5cGUoY3VycmVudFN0YXRlLCBsYXllcklkLCB4VmFsdWUsIGNoYW5nZVR5cGUpOwogIHZhciBvcHRpb25zID0gewogICAgY3VycmVudFN0YXRlOiBjdXJyZW50U3RhdGUsCiAgICBzZXJpZXNUeXBlOiBzZXJpZXNUeXBlLAogICAgbGF5ZXJJZDogbGF5ZXJJZCwKICAgIHRpdGxlOiB0aXRsZSwKICAgIHlWYWx1ZXM6IHlWYWx1ZXMsCiAgICBzcGxpdEJ5OiBzcGxpdEJ5LAogICAgY2hhbmdlVHlwZTogY2hhbmdlVHlwZSwKICAgIHhWYWx1ZTogeFZhbHVlLAogICAga2VwdExheWVySWRzOiBrZXB0TGF5ZXJJZHMKICB9OwogIHZhciBpc1NhbWVTdGF0ZSA9IGN1cnJlbnRTdGF0ZSAmJiBjaGFuZ2VUeXBlID09PSAndW5jaGFuZ2VkJzsKCiAgaWYgKCFpc1NhbWVTdGF0ZSkgewogICAgcmV0dXJuIGJ1aWxkU3VnZ2VzdGlvbihvcHRpb25zKTsKICB9CgogIHZhciBzYW1lU3RhdGVTdWdnZXN0aW9ucyA9IFtdOyAvLyBpZiBjdXJyZW50IHN0YXRlIGlzIHVzaW5nIHRoZSBzYW1lIGRhdGEsIHN1Z2dlc3Qgc2FtZSBjaGFydCB3aXRoIGRpZmZlcmVudCBwcmVzZW50YXRpb25hbCBjb25maWd1cmF0aW9uCgogIGlmIChzZXJpZXNUeXBlICE9PSAnbGluZScgJiYgeFZhbHVlLm9wZXJhdGlvbi5zY2FsZSA9PT0gJ29yZGluYWwnKSB7CiAgICAvLyBmbGlwIGJldHdlZW4gaG9yaXpvbnRhbC92ZXJ0aWNhbCBmb3Igb3JkaW5hbCBzY2FsZXMKICAgIHNhbWVTdGF0ZVN1Z2dlc3Rpb25zLnB1c2goYnVpbGRTdWdnZXN0aW9uKF9vYmplY3RTcHJlYWQoe30sIG9wdGlvbnMsIHsKICAgICAgdGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5sZW5zLnh5U3VnZ2VzdGlvbnMuZmxpcFRpdGxlJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRmxpcCcKICAgICAgfSksCiAgICAgIHNlcmllc1R5cGU6IHNlcmllc1R5cGUgPT09ICdiYXJfaG9yaXpvbnRhbCcgPyAnYmFyJyA6IHNlcmllc1R5cGUgPT09ICdiYXJfaG9yaXpvbnRhbF9zdGFja2VkJyA/ICdiYXJfc3RhY2tlZCcgOiAnYmFyX2hvcml6b250YWwnCiAgICB9KSkpOwogIH0gZWxzZSB7CiAgICAvLyBjaGFuZ2UgY2hhcnQgdHlwZSBmb3IgaW50ZXJ2YWwgb3IgcmF0aW8gc2NhbGVzIG9uIHggYXhpcwogICAgdmFyIG5ld1Nlcmllc1R5cGUgPSBhbHRTZXJpZXNUeXBlKHNlcmllc1R5cGUpOwogICAgc2FtZVN0YXRlU3VnZ2VzdGlvbnMucHVzaChidWlsZFN1Z2dlc3Rpb24oX29iamVjdFNwcmVhZCh7fSwgb3B0aW9ucywgewogICAgICBzZXJpZXNUeXBlOiBuZXdTZXJpZXNUeXBlLAogICAgICB0aXRsZTogbmV3U2VyaWVzVHlwZS5zdGFydHNXaXRoKCdiYXInKSA/IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5sZW5zLnh5U3VnZ2VzdGlvbnMuYmFyQ2hhcnRUaXRsZScsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0JhciBjaGFydCcKICAgICAgfSkgOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subGVucy54eVN1Z2dlc3Rpb25zLmxpbmVDaGFydFRpdGxlJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTGluZSBjaGFydCcKICAgICAgfSkKICAgIH0pKSk7CiAgfQoKICBpZiAoc2VyaWVzVHlwZSAhPT0gJ2xpbmUnICYmIHNwbGl0QnkpIHsKICAgIC8vIGZsaXAgYmV0d2VlbiBzdGFja2VkL3Vuc3RhY2tlZAogICAgc2FtZVN0YXRlU3VnZ2VzdGlvbnMucHVzaChidWlsZFN1Z2dlc3Rpb24oX29iamVjdFNwcmVhZCh7fSwgb3B0aW9ucywgewogICAgICBzZXJpZXNUeXBlOiB0b2dnbGVTdGFja1Nlcmllc1R5cGUoc2VyaWVzVHlwZSksCiAgICAgIHRpdGxlOiBzZXJpZXNUeXBlLmVuZHNXaXRoKCdzdGFja2VkJykgPyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subGVucy54eVN1Z2dlc3Rpb25zLnVuc3RhY2tlZENoYXJ0VGl0bGUnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdVbnN0YWNrZWQnCiAgICAgIH0pIDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMueHlTdWdnZXN0aW9ucy5zdGFja2VkQ2hhcnRUaXRsZScsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1N0YWNrZWQnCiAgICAgIH0pCiAgICB9KSkpOwogIH0KCiAgcmV0dXJuIHNhbWVTdGF0ZVN1Z2dlc3Rpb25zOwp9CgpmdW5jdGlvbiB0b2dnbGVTdGFja1Nlcmllc1R5cGUob2xkU2VyaWVzVHlwZSkgewogIHN3aXRjaCAob2xkU2VyaWVzVHlwZSkgewogICAgY2FzZSAnYXJlYSc6CiAgICAgIHJldHVybiAnYXJlYV9zdGFja2VkJzsKCiAgICBjYXNlICdhcmVhX3N0YWNrZWQnOgogICAgICByZXR1cm4gJ2FyZWEnOwoKICAgIGNhc2UgJ2Jhcic6CiAgICAgIHJldHVybiAnYmFyX3N0YWNrZWQnOwoKICAgIGNhc2UgJ2Jhcl9zdGFja2VkJzoKICAgICAgcmV0dXJuICdiYXInOwoKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBvbGRTZXJpZXNUeXBlOwogIH0KfSAvLyBVbnRpbCB0aGUgYXJlYSBjaGFydCByZW5kZXJpbmcgYnVnIGlzIGZpeGVkLCBhdm9pZCBzdWdnZXN0aW5nIGFyZWEgY2hhcnRzCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGFzdGljL2VsYXN0aWMtY2hhcnRzL2lzc3Vlcy8zODgKCgpmdW5jdGlvbiBhbHRTZXJpZXNUeXBlKG9sZFNlcmllc1R5cGUpIHsKICBzd2l0Y2ggKG9sZFNlcmllc1R5cGUpIHsKICAgIGNhc2UgJ2FyZWEnOgogICAgICByZXR1cm4gJ2xpbmUnOwoKICAgIGNhc2UgJ2FyZWFfc3RhY2tlZCc6CiAgICAgIHJldHVybiAnYmFyX3N0YWNrZWQnOwoKICAgIGNhc2UgJ2Jhcic6CiAgICAgIHJldHVybiAnbGluZSc7CgogICAgY2FzZSAnYmFyX3N0YWNrZWQnOgogICAgICByZXR1cm4gJ2xpbmUnOwoKICAgIGNhc2UgJ2xpbmUnOgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuICdiYXJfc3RhY2tlZCc7CiAgfQp9CgpmdW5jdGlvbiBnZXRTZXJpZXNUeXBlKGN1cnJlbnRTdGF0ZSwgbGF5ZXJJZCwgeFZhbHVlLCBjaGFuZ2VUeXBlKSB7CiAgdmFyIGRlZmF1bHRUeXBlID0gJ2Jhcl9zdGFja2VkJzsKICB2YXIgb2xkTGF5ZXIgPSBnZXRFeGlzdGluZ0xheWVyKGN1cnJlbnRTdGF0ZSwgbGF5ZXJJZCk7CiAgdmFyIG9sZExheWVyU2VyaWVzVHlwZSA9IG9sZExheWVyID8gb2xkTGF5ZXIuc2VyaWVzVHlwZSA6IGZhbHNlOwogIHZhciBjbG9zZXN0U2VyaWVzVHlwZSA9IG9sZExheWVyU2VyaWVzVHlwZSB8fCBjdXJyZW50U3RhdGUgJiYgY3VycmVudFN0YXRlLnByZWZlcnJlZFNlcmllc1R5cGUgfHwgZGVmYXVsdFR5cGU7IC8vIEF0dGVtcHQgdG8ga2VlcCB0aGUgc2VyaWVzVHlwZSBjb25zaXN0ZW50IG9uIGluaXRpYWwgYWRkIG9mIGEgbGF5ZXIKICAvLyBPcmRpbmFsIHNjYWxlcyBzaG91bGQgYWx3YXlzIHVzZSBhIGJhciBiZWNhdXNlIHRoZXJlIGlzIG5vIGludGVycG9sYXRpb24gYmV0d2VlbiBidWNrZXRzCgogIGlmICh4VmFsdWUub3BlcmF0aW9uLnNjYWxlICYmIHhWYWx1ZS5vcGVyYXRpb24uc2NhbGUgPT09ICdvcmRpbmFsJykgewogICAgcmV0dXJuIGNsb3Nlc3RTZXJpZXNUeXBlLnN0YXJ0c1dpdGgoJ2JhcicpID8gY2xvc2VzdFNlcmllc1R5cGUgOiBkZWZhdWx0VHlwZTsKICB9CgogIGlmIChjaGFuZ2VUeXBlID09PSAnaW5pdGlhbCcpIHsKICAgIHJldHVybiBkZWZhdWx0VHlwZTsKICB9CgogIHJldHVybiBjbG9zZXN0U2VyaWVzVHlwZSAhPT0gZGVmYXVsdFR5cGUgPyBjbG9zZXN0U2VyaWVzVHlwZSA6IGRlZmF1bHRUeXBlOwp9CgpmdW5jdGlvbiBnZXRTdWdnZXN0aW9uVGl0bGUoeVZhbHVlcywgeFZhbHVlLCB0YWJsZUxhYmVsKSB7CiAgdmFyIHlUaXRsZSA9IHlWYWx1ZXMubWFwKGZ1bmN0aW9uIChjb2wpIHsKICAgIHJldHVybiBjb2wub3BlcmF0aW9uLmxhYmVsOwogIH0pLmpvaW4oX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMueHlTdWdnZXN0aW9ucy55QXhpeENvbmp1bmN0aW9uU2lnbicsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnICYgJywKICAgIGRlc2NyaXB0aW9uOiAnQSBjaGFyYWN0ZXIgdGhhdCBjYW4gYmUgdXNlZCBmb3IgY29uanVuY3Rpb24gb2YgbXVsdGlwbGUgZW51bWFyYXRlZCBpdGVtcy4gTWFrZSBzdXJlIHRvIGluY2x1ZGUgc3BhY2VzIGFyb3VuZCBpdCBpZiBuZWVkZWQuJwogIH0pKTsKICB2YXIgeFRpdGxlID0geFZhbHVlLm9wZXJhdGlvbi5sYWJlbDsKICB2YXIgdGl0bGUgPSB0YWJsZUxhYmVsIHx8ICh4VmFsdWUub3BlcmF0aW9uLmRhdGFUeXBlID09PSAnZGF0ZScgPyBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subGVucy54eVN1Z2dlc3Rpb25zLmRhdGVTdWdnZXN0aW9uJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICd7eVRpdGxlfSBvdmVyIHt4VGl0bGV9JywKICAgIGRlc2NyaXB0aW9uOiAnQ2hhcnQgZGVzY3JpcHRpb24gZm9yIGNoYXJ0cyBvdmVyIHRpbWUsIGxpa2UgIlRyYW5zZmVyZWQgYnl0ZXMgb3ZlciBsb2cudGltZXN0YW1wIicsCiAgICB2YWx1ZXM6IHsKICAgICAgeFRpdGxlOiB4VGl0bGUsCiAgICAgIHlUaXRsZTogeVRpdGxlCiAgICB9CiAgfSkgOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subGVucy54eVN1Z2dlc3Rpb25zLm5vbkRhdGVTdWdnZXN0aW9uJywgewogICAgZGVmYXVsdE1lc3NhZ2U6ICd7eVRpdGxlfSBvZiB7eFRpdGxlfScsCiAgICBkZXNjcmlwdGlvbjogJ0NoYXJ0IGRlc2NyaXB0aW9uIGZvciBhIHZhbHVlIG9mIHNvbWUgZ3JvdXBzLCBsaWtlICJUb3AgVVJMcyBvZiB0b3AgNSBjb3VudHJpZXMiJywKICAgIHZhbHVlczogewogICAgICB4VGl0bGU6IHhUaXRsZSwKICAgICAgeVRpdGxlOiB5VGl0bGUKICAgIH0KICB9KSk7CiAgcmV0dXJuIHRpdGxlOwp9CgpmdW5jdGlvbiBidWlsZFN1Z2dlc3Rpb24oX3JlZjYpIHsKICB2YXIgY3VycmVudFN0YXRlID0gX3JlZjYuY3VycmVudFN0YXRlLAogICAgICBzZXJpZXNUeXBlID0gX3JlZjYuc2VyaWVzVHlwZSwKICAgICAgbGF5ZXJJZCA9IF9yZWY2LmxheWVySWQsCiAgICAgIHRpdGxlID0gX3JlZjYudGl0bGUsCiAgICAgIHlWYWx1ZXMgPSBfcmVmNi55VmFsdWVzLAogICAgICBzcGxpdEJ5ID0gX3JlZjYuc3BsaXRCeSwKICAgICAgY2hhbmdlVHlwZSA9IF9yZWY2LmNoYW5nZVR5cGUsCiAgICAgIHhWYWx1ZSA9IF9yZWY2LnhWYWx1ZSwKICAgICAga2VwdExheWVySWRzID0gX3JlZjYua2VwdExheWVySWRzOwoKICB2YXIgbmV3TGF5ZXIgPSBfb2JqZWN0U3ByZWFkKHt9LCBnZXRFeGlzdGluZ0xheWVyKGN1cnJlbnRTdGF0ZSwgbGF5ZXJJZCkgfHwge30sIHsKICAgIGxheWVySWQ6IGxheWVySWQsCiAgICBzZXJpZXNUeXBlOiBzZXJpZXNUeXBlLAogICAgeEFjY2Vzc29yOiB4VmFsdWUuY29sdW1uSWQsCiAgICBzcGxpdEFjY2Vzc29yOiBzcGxpdEJ5ID09PSBudWxsIHx8IHNwbGl0QnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNwbGl0QnkuY29sdW1uSWQsCiAgICBhY2Nlc3NvcnM6IHlWYWx1ZXMubWFwKGZ1bmN0aW9uIChjb2wpIHsKICAgICAgcmV0dXJuIGNvbC5jb2x1bW5JZDsKICAgIH0pCiAgfSk7CgogIHZhciBrZXB0TGF5ZXJzID0gY3VycmVudFN0YXRlID8gY3VycmVudFN0YXRlLmxheWVycy5maWx0ZXIoZnVuY3Rpb24gKGxheWVyKSB7CiAgICByZXR1cm4gbGF5ZXIubGF5ZXJJZCAhPT0gbGF5ZXJJZCAmJiBrZXB0TGF5ZXJJZHMuaW5jbHVkZXMobGF5ZXIubGF5ZXJJZCk7CiAgfSkgOiBbXTsKICB2YXIgc3RhdGUgPSB7CiAgICBsZWdlbmQ6IGN1cnJlbnRTdGF0ZSA/IGN1cnJlbnRTdGF0ZS5sZWdlbmQgOiB7CiAgICAgIGlzVmlzaWJsZTogdHJ1ZSwKICAgICAgcG9zaXRpb246IF9jaGFydHMuUG9zaXRpb24uUmlnaHQKICAgIH0sCiAgICBwcmVmZXJyZWRTZXJpZXNUeXBlOiBzZXJpZXNUeXBlLAogICAgbGF5ZXJzOiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGtlcHRMYXllcnMpLCBbbmV3TGF5ZXJdKQogIH07CiAgcmV0dXJuIHsKICAgIHRpdGxlOiB0aXRsZSwKICAgIHNjb3JlOiBnZXRTY29yZSh5VmFsdWVzLCBzcGxpdEJ5LCBjaGFuZ2VUeXBlKSwKICAgIC8vIGRvbid0IGFkdmVydGlzZSBjaGFydCBvZiBzYW1lIHR5cGUgYnV0IHdpdGggbGVzcyBkYXRhCiAgICBoaWRlOiBjdXJyZW50U3RhdGUgJiYgY2hhbmdlVHlwZSA9PT0gJ3JlZHVjZWQnLAogICAgc3RhdGU6IHN0YXRlLAogICAgcHJldmlld0ljb246ICgwLCBfc3RhdGVfaGVscGVycy5nZXRJY29uRm9yU2VyaWVzKShzZXJpZXNUeXBlKQogIH07Cn0KCmZ1bmN0aW9uIGdldFNjb3JlKHlWYWx1ZXMsIHNwbGl0QnksIGNoYW5nZVR5cGUpIHsKICAvLyBVbmNoYW5nZWQgdGFibGUgc3VnZ2VzdGlvbnMgaGFsZiB0aGUgc2NvcmUgYmVjYXVzZSB0aGUgdW5kZXJseWluZyBkYXRhIGRvZXNuJ3QgY2hhbmdlCiAgdmFyIGNoYW5nZUZhY3RvciA9IGNoYW5nZVR5cGUgPT09ICd1bmNoYW5nZWQnID8gMC41IDogMTsgLy8gY2hhcnQgd2l0aCBtdWx0aXBsZSB5IHZhbHVlcyBhbmQgc3BsaXQgc2VyaWVzIHdpbGwgaGF2ZSBhIHNjb3JlIG9mIDEsIHNpbmdsZSB5IHZhbHVlIGFuZCBubyBzcGxpdCBzZXJpZXMgcmVkdWNlIHNjb3JlCgogIHJldHVybiAoKHlWYWx1ZXMubGVuZ3RoID4gMSA/IDIgOiAxKSArIChzcGxpdEJ5ID8gMSA6IDApKSAvIDMgKiBjaGFuZ2VGYWN0b3I7Cn0KCmZ1bmN0aW9uIGdldEV4aXN0aW5nTGF5ZXIoY3VycmVudFN0YXRlLCBsYXllcklkKSB7CiAgcmV0dXJuIGN1cnJlbnRTdGF0ZSAmJiBjdXJyZW50U3RhdGUubGF5ZXJzLmZpbmQoZnVuY3Rpb24gKGxheWVyKSB7CiAgICByZXR1cm4gbGF5ZXIubGF5ZXJJZCA9PT0gbGF5ZXJJZDsKICB9KTsKfQ=="},null]}