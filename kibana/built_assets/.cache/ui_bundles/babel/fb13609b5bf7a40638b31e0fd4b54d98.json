{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/vis_default_editor/public/components/agg.js","dependencies":[{"path":"src/legacy/core_plugins/vis_default_editor/public/components/agg.js","mtime":1589249549938},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkRlZmF1bHRFZGl0b3JBZ2cgPSBEZWZhdWx0RWRpdG9yQWdnOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9hZ2dfcGFyYW1zID0gcmVxdWlyZSgiLi9hZ2dfcGFyYW1zIik7Cgp2YXIgX2FnZ19ncm91cF9zdGF0ZSA9IHJlcXVpcmUoIi4vYWdnX2dyb3VwX3N0YXRlIik7Cgp2YXIgX3Jvd3Nfb3JfY29sdW1ucyA9IHJlcXVpcmUoIi4vY29udHJvbHMvcm93c19vcl9jb2x1bW5zIik7Cgp2YXIgX3JhZGl1c19yYXRpb19vcHRpb24gPSByZXF1aXJlKCIuL2NvbnRyb2xzL3JhZGl1c19yYXRpb19vcHRpb24iKTsKCnZhciBfc2NoZW1hcyA9IHJlcXVpcmUoIi4uL3NjaGVtYXMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KCmZ1bmN0aW9uIERlZmF1bHRFZGl0b3JBZ2coX3JlZikgewogIHZhciBfYWdnJHR5cGU7CgogIHZhciBhZ2cgPSBfcmVmLmFnZywKICAgICAgYWdnSW5kZXggPSBfcmVmLmFnZ0luZGV4LAogICAgICBhZ2dJc1Rvb0xvdyA9IF9yZWYuYWdnSXNUb29Mb3csCiAgICAgIGRyYWdIYW5kbGVQcm9wcyA9IF9yZWYuZHJhZ0hhbmRsZVByb3BzLAogICAgICBmb3JtSXNUb3VjaGVkID0gX3JlZi5mb3JtSXNUb3VjaGVkLAogICAgICBncm91cE5hbWUgPSBfcmVmLmdyb3VwTmFtZSwKICAgICAgaXNEaXNhYmxlZCA9IF9yZWYuaXNEaXNhYmxlZCwKICAgICAgaXNEcmFnZ2FibGUgPSBfcmVmLmlzRHJhZ2dhYmxlLAogICAgICBpc0xhc3RCdWNrZXQgPSBfcmVmLmlzTGFzdEJ1Y2tldCwKICAgICAgaXNSZW1vdmFibGUgPSBfcmVmLmlzUmVtb3ZhYmxlLAogICAgICBtZXRyaWNBZ2dzID0gX3JlZi5tZXRyaWNBZ2dzLAogICAgICBsYXN0UGFyZW50UGlwZWxpbmVBZ2dUaXRsZSA9IF9yZWYubGFzdFBhcmVudFBpcGVsaW5lQWdnVGl0bGUsCiAgICAgIHN0YXRlID0gX3JlZi5zdGF0ZSwKICAgICAgc2V0QWdnUGFyYW1WYWx1ZSA9IF9yZWYuc2V0QWdnUGFyYW1WYWx1ZSwKICAgICAgc2V0U3RhdGVQYXJhbVZhbHVlID0gX3JlZi5zZXRTdGF0ZVBhcmFtVmFsdWUsCiAgICAgIG9uQWdnVHlwZUNoYW5nZSA9IF9yZWYub25BZ2dUeXBlQ2hhbmdlLAogICAgICBvblRvZ2dsZUVuYWJsZUFnZyA9IF9yZWYub25Ub2dnbGVFbmFibGVBZ2csCiAgICAgIHJlbW92ZUFnZyA9IF9yZWYucmVtb3ZlQWdnLAogICAgICBzZXRBZ2dzU3RhdGUgPSBfcmVmLnNldEFnZ3NTdGF0ZSwKICAgICAgc2NoZW1hcyA9IF9yZWYuc2NoZW1hczsKCiAgdmFyIF91c2VTdGF0ZSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGFnZy5icmFuZE5ldyksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBpc0VkaXRvck9wZW4gPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRJc0VkaXRvck9wZW4gPSBfdXNlU3RhdGUyWzFdOwoKICB2YXIgX3VzZVN0YXRlMyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKHRydWUpLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIHZhbGlkU3RhdGUgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRWYWxpZFN0YXRlID0gX3VzZVN0YXRlNFsxXTsKCiAgdmFyIHNob3dEZXNjcmlwdGlvbiA9ICFpc0VkaXRvck9wZW4gJiYgdmFsaWRTdGF0ZTsKICB2YXIgc2hvd0Vycm9yID0gIWlzRWRpdG9yT3BlbiAmJiAhdmFsaWRTdGF0ZTsKICB2YXIgYWdnTmFtZSA9IChfYWdnJHR5cGUgPSBhZ2cudHlwZSkgPT09IG51bGwgfHwgX2FnZyR0eXBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYWdnJHR5cGUubmFtZTsKICB2YXIgZGlzYWJsZWRQYXJhbXM7CiAgdmFyIGFnZ0Vycm9yOyAvLyBXaGVuIGEgUGFyZW50IFBpcGVsaW5lIGFnZyBpcyBzZWxlY3RlZCBhbmQgdGhpcyBhZ2cgaXMgdGhlIGxhc3QgYnVja2V0LgoKICB2YXIgaXNMYXN0QnVja2V0QWdnID0gaXNMYXN0QnVja2V0ICYmIGxhc3RQYXJlbnRQaXBlbGluZUFnZ1RpdGxlICYmIGFnZy50eXBlOwogIHZhciBTY2hlbWFDb21wb25lbnQ7CgogIGlmIChhZ2cuc2NoZW1hID09PSAnc3BsaXQnKSB7CiAgICBTY2hlbWFDb21wb25lbnQgPSBfcm93c19vcl9jb2x1bW5zLlJvd3NPckNvbHVtbnNDb250cm9sOwogIH0KCiAgaWYgKGFnZy5zY2hlbWEgPT09ICdyYWRpdXMnKSB7CiAgICBTY2hlbWFDb21wb25lbnQgPSBfcmFkaXVzX3JhdGlvX29wdGlvbi5SYWRpdXNSYXRpb09wdGlvbkNvbnRyb2w7CiAgfQoKICBpZiAoaXNMYXN0QnVja2V0QWdnKSB7CiAgICBpZiAoWydkYXRlX2hpc3RvZ3JhbScsICdoaXN0b2dyYW0nXS5pbmNsdWRlcyhhZ2dOYW1lKSkgewogICAgICBkaXNhYmxlZFBhcmFtcyA9IFsnbWluX2RvY19jb3VudCddOwogICAgfSBlbHNlIHsKICAgICAgYWdnRXJyb3IgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgndmlzRGVmYXVsdEVkaXRvci5tZXRyaWNzLndyb25nTGFzdEJ1Y2tldFR5cGVFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdMYXN0IGJ1Y2tldCBhZ2dyZWdhdGlvbiBtdXN0IGJlICJEYXRlIEhpc3RvZ3JhbSIgb3IgIkhpc3RvZ3JhbSIgd2hlbiB1c2luZyAie3R5cGV9IiBtZXRyaWMgYWdncmVnYXRpb24uJywKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIHR5cGU6IGxhc3RQYXJlbnRQaXBlbGluZUFnZ1RpdGxlCiAgICAgICAgfSwKICAgICAgICBkZXNjcmlwdGlvbjogJ0RhdGUgSGlzdG9ncmFtIGFuZCBIaXN0b2dyYW0gc2hvdWxkIG5vdCBiZSB0cmFuc2xhdGVkJwogICAgICB9KTsKICAgIH0KICB9IC8vIEEgZGVzY3JpcHRpb24gb2YgdGhlIGFnZ3JlZ2F0aW9uLCBmb3IgZGlzcGxheWluZyBpbiB0aGUgY29sbGFwc2VkIGFnZyBoZWFkZXIKCgogIHZhciBhZ2dEZXNjcmlwdGlvbiA9ICcnOwoKICBpZiAoYWdnLnR5cGUgJiYgYWdnLnR5cGUubWFrZUxhYmVsKSB7CiAgICB0cnkgewogICAgICBhZ2dEZXNjcmlwdGlvbiA9IGFnZy50eXBlLm1ha2VMYWJlbChhZ2cpOwogICAgfSBjYXRjaCAoZSkgewogICAgICAvLyBEYXRlIEhpc3RvZ3JhbSdzIGBtYWtlTGFiZWxgIGltcGxlbWVudGF0aW9uIGludm9rZXMgJ3dyaXRlJyBtZXRob2QgZm9yIGVhY2ggcGFyYW0sIGluY2x1ZGluZyBpbnRlcnZhbCdzICd3cml0ZScsCiAgICAgIC8vIHdoaWNoIHRocm93cyBhbiBlcnJvciB3aGVuIGludGVydmFsIGlzIHVuZGVmaW5lZC4KICAgICAgYWdnRGVzY3JpcHRpb24gPSAnJzsKICAgIH0KICB9CgogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICBpZiAoaXNMYXN0QnVja2V0QWdnICYmIFsnZGF0ZV9oaXN0b2dyYW0nLCAnaGlzdG9ncmFtJ10uaW5jbHVkZXMoYWdnTmFtZSkpIHsKICAgICAgc2V0QWdnUGFyYW1WYWx1ZShhZ2cuaWQsICdtaW5fZG9jX2NvdW50JywgLy8gImhpc3RvZ3JhbSIgYWdnIGhhcyBhbiBlZGl0b3IgZm9yICJtaW5fZG9jX2NvdW50IiBwYXJhbSwgd2hpY2ggYWNjZXB0cyBib29sZWFuCiAgICAgIC8vICJkYXRlX2hpc3RvZ3JhbSIgYWdnIGRvZXNuJ3QgaGF2ZSBhbiBlZGl0b3IgZm9yICJtaW5fZG9jX2NvdW50IiBwYXJhbSwgaXQgc2hvdWxkIGJlIHNldCBhcyBhIG51bWVyaWMgdmFsdWUKICAgICAgYWdnTmFtZSA9PT0gJ2hpc3RvZ3JhbScgPyB0cnVlIDogMCk7CiAgICB9CiAgfSwgW2FnZ05hbWUsIGlzTGFzdEJ1Y2tldEFnZywgYWdnLmlkLCBzZXRBZ2dQYXJhbVZhbHVlXSk7CiAgdmFyIHNldFRvdWNoZWQgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAodG91Y2hlZCkgewogICAgc2V0QWdnc1N0YXRlKHsKICAgICAgdHlwZTogX2FnZ19ncm91cF9zdGF0ZS5BR0dTX0FDVElPTl9LRVlTLlRPVUNIRUQsCiAgICAgIHBheWxvYWQ6IHRvdWNoZWQsCiAgICAgIGFnZ0lkOiBhZ2cuaWQKICAgIH0pOwogIH0sIFthZ2cuaWQsIHNldEFnZ3NTdGF0ZV0pOwogIHZhciBzZXRWYWxpZGl0eSA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uIChpc1ZhbGlkKSB7CiAgICBzZXRBZ2dzU3RhdGUoewogICAgICB0eXBlOiBfYWdnX2dyb3VwX3N0YXRlLkFHR1NfQUNUSU9OX0tFWVMuVkFMSUQsCiAgICAgIHBheWxvYWQ6IGlzVmFsaWQsCiAgICAgIGFnZ0lkOiBhZ2cuaWQKICAgIH0pOwogICAgc2V0VmFsaWRTdGF0ZShpc1ZhbGlkKTsKICB9LCBbYWdnLmlkLCBzZXRBZ2dzU3RhdGVdKTsKICB2YXIgb25Ub2dnbGUgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAoaXNPcGVuKSB7CiAgICBzZXRJc0VkaXRvck9wZW4oaXNPcGVuKTsKCiAgICBpZiAoIWlzT3BlbikgewogICAgICBzZXRUb3VjaGVkKHRydWUpOwogICAgfQogIH0sIFtzZXRUb3VjaGVkXSk7CgogIHZhciByZW5kZXJBZ2dCdXR0b25zID0gZnVuY3Rpb24gcmVuZGVyQWdnQnV0dG9ucygpIHsKICAgIHZhciBhY3Rpb25JY29ucyA9IFtdOwoKICAgIGlmIChzaG93RXJyb3IpIHsKICAgICAgYWN0aW9uSWNvbnMucHVzaCh7CiAgICAgICAgaWQ6ICdoYXNFcnJvcnMnLAogICAgICAgIGNvbG9yOiAnZGFuZ2VyJywKICAgICAgICB0eXBlOiAnYWxlcnQnLAogICAgICAgIHRvb2x0aXA6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd2aXNEZWZhdWx0RWRpdG9yLmFnZy5lcnJvcnNBcmlhTGFiZWwnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0FnZ3JlZ2F0aW9uIGhhcyBlcnJvcnMnCiAgICAgICAgfSksCiAgICAgICAgZGF0YVRlc3RTdWJqOiAnaGFzRXJyb3JzQWdncmVnYXRpb25JY29uJwogICAgICB9KTsKICAgIH0KCiAgICBpZiAoYWdnLmVuYWJsZWQgJiYgaXNSZW1vdmFibGUpIHsKICAgICAgYWN0aW9uSWNvbnMucHVzaCh7CiAgICAgICAgaWQ6ICdkaXNhYmxlQWdncmVnYXRpb24nLAogICAgICAgIGNvbG9yOiAndGV4dCcsCiAgICAgICAgZGlzYWJsZWQ6IGlzRGlzYWJsZWQsCiAgICAgICAgdHlwZTogJ2V5ZScsCiAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgIHJldHVybiBvblRvZ2dsZUVuYWJsZUFnZyhhZ2cuaWQsIGZhbHNlKTsKICAgICAgICB9LAogICAgICAgIHRvb2x0aXA6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd2aXNEZWZhdWx0RWRpdG9yLmFnZy5kaXNhYmxlQWdnQnV0dG9uVG9vbHRpcCcsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRGlzYWJsZSBhZ2dyZWdhdGlvbicKICAgICAgICB9KSwKICAgICAgICBkYXRhVGVzdFN1Ymo6ICd0b2dnbGVEaXNhYmxlQWdncmVnYXRpb25CdG4gZGlzYWJsZScKICAgICAgfSk7CiAgICB9CgogICAgaWYgKCFhZ2cuZW5hYmxlZCkgewogICAgICBhY3Rpb25JY29ucy5wdXNoKHsKICAgICAgICBpZDogJ2VuYWJsZUFnZ3JlZ2F0aW9uJywKICAgICAgICBjb2xvcjogJ3RleHQnLAogICAgICAgIHR5cGU6ICdleWVDbG9zZWQnLAogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICByZXR1cm4gb25Ub2dnbGVFbmFibGVBZ2coYWdnLmlkLCB0cnVlKTsKICAgICAgICB9LAogICAgICAgIHRvb2x0aXA6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd2aXNEZWZhdWx0RWRpdG9yLmFnZy5lbmFibGVBZ2dCdXR0b25Ub29sdGlwJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdFbmFibGUgYWdncmVnYXRpb24nCiAgICAgICAgfSksCiAgICAgICAgZGF0YVRlc3RTdWJqOiAndG9nZ2xlRGlzYWJsZUFnZ3JlZ2F0aW9uQnRuIGVuYWJsZScKICAgICAgfSk7CiAgICB9CgogICAgaWYgKGlzRHJhZ2dhYmxlKSB7CiAgICAgIGFjdGlvbkljb25zLnB1c2goewogICAgICAgIGlkOiAnZHJhZ0hhbmRsZScsCiAgICAgICAgdHlwZTogJ2dyYWInLAogICAgICAgIHRvb2x0aXA6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd2aXNEZWZhdWx0RWRpdG9yLmFnZy5tb2RpZnlQcmlvcml0eUJ1dHRvblRvb2x0aXAnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ01vZGlmeSBwcmlvcml0eSBieSBkcmFnZ2luZycKICAgICAgICB9KSwKICAgICAgICBkYXRhVGVzdFN1Ymo6ICdkcmFnSGFuZGxlQnRuJwogICAgICB9KTsKICAgIH0KCiAgICBpZiAoaXNSZW1vdmFibGUpIHsKICAgICAgYWN0aW9uSWNvbnMucHVzaCh7CiAgICAgICAgaWQ6ICdyZW1vdmVEaW1lbnNpb24nLAogICAgICAgIGNvbG9yOiAnZGFuZ2VyJywKICAgICAgICB0eXBlOiAnY3Jvc3MnLAogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICByZXR1cm4gcmVtb3ZlQWdnKGFnZy5pZCk7CiAgICAgICAgfSwKICAgICAgICB0b29sdGlwOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgndmlzRGVmYXVsdEVkaXRvci5hZ2cucmVtb3ZlRGltZW5zaW9uQnV0dG9uVG9vbHRpcCcsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmVtb3ZlIGRpbWVuc2lvbicKICAgICAgICB9KSwKICAgICAgICBkYXRhVGVzdFN1Ymo6ICdyZW1vdmVEaW1lbnNpb25CdG4nCiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBkcmFnSGFuZGxlUHJvcHMsIGFjdGlvbkljb25zLm1hcChmdW5jdGlvbiAoaWNvbikgewogICAgICBpZiAoaWNvbi5pZCA9PT0gJ2RyYWdIYW5kbGUnKSB7CiAgICAgICAgdmFyIF9yZWYyOwoKICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUljb25UaXAsIHsKICAgICAgICAgIGtleTogaWNvbi5pZCwKICAgICAgICAgIHR5cGU6IGljb24udHlwZSwKICAgICAgICAgIGNvbnRlbnQ6IGljb24udG9vbHRpcCwKICAgICAgICAgIGljb25Qcm9wczogKF9yZWYyID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfcmVmMiwgJ2FyaWEtbGFiZWwnLCBpY29uLnRvb2x0aXApLCBfZGVmaW5lUHJvcGVydHkoX3JlZjIsICdkYXRhLXRlc3Qtc3ViaicsIGljb24uZGF0YVRlc3RTdWJqKSwgX3JlZjIpLAogICAgICAgICAgcG9zaXRpb246ICJib3R0b20iCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVG9vbFRpcCwgewogICAgICAgIGtleTogaWNvbi5pZCwKICAgICAgICBwb3NpdGlvbjogImJvdHRvbSIsCiAgICAgICAgY29udGVudDogaWNvbi50b29sdGlwCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b25JY29uLCB7CiAgICAgICAgZGlzYWJsZWQ6IGljb24uZGlzYWJsZWQsCiAgICAgICAgaWNvblR5cGU6IGljb24udHlwZSwKICAgICAgICBjb2xvcjogaWNvbi5jb2xvciwKICAgICAgICBvbkNsaWNrOiBpY29uLm9uQ2xpY2ssCiAgICAgICAgImFyaWEtbGFiZWwiOiBpY29uLnRvb2x0aXAsCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogaWNvbi5kYXRhVGVzdFN1YmoKICAgICAgfSkpOwogICAgfSkpOwogIH07CgogIHZhciBzY2hlbWFUaXRsZSA9ICgwLCBfc2NoZW1hcy5nZXRTY2hlbWFCeU5hbWUpKHNjaGVtYXMsIGFnZy5zY2hlbWEpLnRpdGxlOwoKICB2YXIgYnV0dG9uQ29udGVudCA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LmRlZmF1bHQuRnJhZ21lbnQsIG51bGwsIHNjaGVtYVRpdGxlIHx8IGFnZy5zY2hlbWEsICIgIiwgc2hvd0Rlc2NyaXB0aW9uICYmIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCBhZ2dEZXNjcmlwdGlvbikpOwoKICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUFjY29yZGlvbiwgewogICAgaWQ6ICJ2aXNFZGl0b3JBZ2dBY2NvcmRpb24iLmNvbmNhdChhZ2cuaWQpLAogICAgaW5pdGlhbElzT3BlbjogaXNFZGl0b3JPcGVuLAogICAgYnV0dG9uQ29udGVudDogYnV0dG9uQ29udGVudCwKICAgIGJ1dHRvbkNsYXNzTmFtZTogImV1aS10ZXh0VHJ1bmNhdGUiLAogICAgYnV0dG9uQ29udGVudENsYXNzTmFtZTogInZpc0VkaXRvclNpZGViYXJfX2FnZ0dyb3VwQWNjb3JkaW9uQnV0dG9uQ29udGVudCBldWktdGV4dFRydW5jYXRlIiwKICAgIGNsYXNzTmFtZTogInZpc0VkaXRvclNpZGViYXJfX3NlY3Rpb24gdmlzRWRpdG9yU2lkZWJhcl9fY29sbGFwc2libGUgdmlzRWRpdG9yU2lkZWJhcl9fY29sbGFwc2libGUtLW1hcmdpbkJvdHRvbSIsCiAgICAiYXJpYS1sYWJlbCI6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd2aXNEZWZhdWx0RWRpdG9yLmFnZy50b2dnbGVFZGl0b3JCdXR0b25BcmlhTGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVG9nZ2xlIHtzY2hlbWF9IGVkaXRvcicsCiAgICAgIHZhbHVlczogewogICAgICAgIHNjaGVtYTogc2NoZW1hVGl0bGUgfHwgYWdnLnNjaGVtYQogICAgICB9CiAgICB9KSwKICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJ2aXNFZGl0b3JBZ2dBY2NvcmRpb24iLmNvbmNhdChhZ2cuaWQpLAogICAgZXh0cmFBY3Rpb246IHJlbmRlckFnZ0J1dHRvbnMoKSwKICAgIG9uVG9nZ2xlOiBvblRvZ2dsZQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LmRlZmF1bHQuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgIHNpemU6ICJtIgogIH0pLCBTY2hlbWFDb21wb25lbnQgJiYgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChTY2hlbWFDb21wb25lbnQsIHsKICAgIGFnZzogYWdnLAogICAgZWRpdG9yU3RhdGVQYXJhbXM6IHN0YXRlLnBhcmFtcywKICAgIHNldEFnZ1BhcmFtVmFsdWU6IHNldEFnZ1BhcmFtVmFsdWUsCiAgICBzZXRTdGF0ZVBhcmFtVmFsdWU6IHNldFN0YXRlUGFyYW1WYWx1ZQogIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9hZ2dfcGFyYW1zLkRlZmF1bHRFZGl0b3JBZ2dQYXJhbXMsIHsKICAgIGFnZzogYWdnLAogICAgYWdnRXJyb3I6IGFnZ0Vycm9yLAogICAgYWdnSW5kZXg6IGFnZ0luZGV4LAogICAgYWdnSXNUb29Mb3c6IGFnZ0lzVG9vTG93LAogICAgZGlzYWJsZWRQYXJhbXM6IGRpc2FibGVkUGFyYW1zLAogICAgZm9ybUlzVG91Y2hlZDogZm9ybUlzVG91Y2hlZCwKICAgIGdyb3VwTmFtZTogZ3JvdXBOYW1lLAogICAgaW5kZXhQYXR0ZXJuOiBhZ2cuZ2V0SW5kZXhQYXR0ZXJuKCksCiAgICBtZXRyaWNBZ2dzOiBtZXRyaWNBZ2dzLAogICAgc3RhdGU6IHN0YXRlLAogICAgc2V0QWdnUGFyYW1WYWx1ZTogc2V0QWdnUGFyYW1WYWx1ZSwKICAgIG9uQWdnVHlwZUNoYW5nZTogb25BZ2dUeXBlQ2hhbmdlLAogICAgc2V0VG91Y2hlZDogc2V0VG91Y2hlZCwKICAgIHNldFZhbGlkaXR5OiBzZXRWYWxpZGl0eSwKICAgIHNjaGVtYXM6IHNjaGVtYXMKICB9KSkpOwp9"},null]}