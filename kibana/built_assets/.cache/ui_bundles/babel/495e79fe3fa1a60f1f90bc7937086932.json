{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/lens/public/indexpattern_datasource/operations/definitions/terms.js","dependencies":[{"path":"x-pack/legacy/plugins/lens/public/indexpattern_datasource/operations/definitions/terms.js","mtime":1589249552320},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnRlcm1zT3BlcmF0aW9uID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX3N0YXRlX2hlbHBlcnMgPSByZXF1aXJlKCIuLi8uLi9zdGF0ZV9oZWxwZXJzIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfSAvLyBBZGQgdGlja3MgdG8gRXVpUmFuZ2UgY29tcG9uZW50IHByb3BzCgoKdmFyIEZpeGVkRXVpUmFuZ2UgPSBfZXVpLkV1aVJhbmdlOwoKZnVuY3Rpb24gb2ZOYW1lKG5hbWUpIHsKICByZXR1cm4gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMuaW5kZXhQYXR0ZXJuLnRlcm1zT2YnLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogJ1RvcCB2YWx1ZXMgb2Yge25hbWV9JywKICAgIHZhbHVlczogewogICAgICBuYW1lOiBuYW1lCiAgICB9CiAgfSk7Cn0KCmZ1bmN0aW9uIGlzU29ydGFibGVCeUNvbHVtbihjb2x1bW4pIHsKICByZXR1cm4gIWNvbHVtbi5pc0J1Y2tldGVkOwp9Cgp2YXIgREVGQVVMVF9TSVpFID0gMzsKdmFyIHN1cHBvcnRlZFR5cGVzID0gbmV3IFNldChbJ3N0cmluZycsICdib29sZWFuJywgJ251bWJlcicsICdpcCddKTsKdmFyIHRlcm1zT3BlcmF0aW9uID0gewogIHR5cGU6ICd0ZXJtcycsCiAgZGlzcGxheU5hbWU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5sZW5zLmluZGV4UGF0dGVybi50ZXJtcycsIHsKICAgIGRlZmF1bHRNZXNzYWdlOiAnVG9wIHZhbHVlcycKICB9KSwKICBnZXRQb3NzaWJsZU9wZXJhdGlvbkZvckZpZWxkOiBmdW5jdGlvbiBnZXRQb3NzaWJsZU9wZXJhdGlvbkZvckZpZWxkKF9yZWYpIHsKICAgIHZhciBhZ2dyZWdhdGlvblJlc3RyaWN0aW9ucyA9IF9yZWYuYWdncmVnYXRpb25SZXN0cmljdGlvbnMsCiAgICAgICAgYWdncmVnYXRhYmxlID0gX3JlZi5hZ2dyZWdhdGFibGUsCiAgICAgICAgdHlwZSA9IF9yZWYudHlwZTsKCiAgICBpZiAoc3VwcG9ydGVkVHlwZXMuaGFzKHR5cGUpICYmIGFnZ3JlZ2F0YWJsZSAmJiAoIWFnZ3JlZ2F0aW9uUmVzdHJpY3Rpb25zIHx8IGFnZ3JlZ2F0aW9uUmVzdHJpY3Rpb25zLnRlcm1zKSkgewogICAgICByZXR1cm4gewogICAgICAgIGRhdGFUeXBlOiB0eXBlLAogICAgICAgIGlzQnVja2V0ZWQ6IHRydWUsCiAgICAgICAgc2NhbGU6ICdvcmRpbmFsJwogICAgICB9OwogICAgfQogIH0sCiAgaXNUcmFuc2ZlcmFibGU6IGZ1bmN0aW9uIGlzVHJhbnNmZXJhYmxlKGNvbHVtbiwgbmV3SW5kZXhQYXR0ZXJuKSB7CiAgICB2YXIgbmV3RmllbGQgPSBuZXdJbmRleFBhdHRlcm4uZmllbGRzLmZpbmQoZnVuY3Rpb24gKGZpZWxkKSB7CiAgICAgIHJldHVybiBmaWVsZC5uYW1lID09PSBjb2x1bW4uc291cmNlRmllbGQ7CiAgICB9KTsKICAgIHJldHVybiBCb29sZWFuKG5ld0ZpZWxkICYmIHN1cHBvcnRlZFR5cGVzLmhhcyhuZXdGaWVsZC50eXBlKSAmJiBuZXdGaWVsZC5hZ2dyZWdhdGFibGUgJiYgKCFuZXdGaWVsZC5hZ2dyZWdhdGlvblJlc3RyaWN0aW9ucyB8fCBuZXdGaWVsZC5hZ2dyZWdhdGlvblJlc3RyaWN0aW9ucy50ZXJtcykpOwogIH0sCiAgYnVpbGRDb2x1bW46IGZ1bmN0aW9uIGJ1aWxkQ29sdW1uKF9yZWYyKSB7CiAgICB2YXIgc3VnZ2VzdGVkUHJpb3JpdHkgPSBfcmVmMi5zdWdnZXN0ZWRQcmlvcml0eSwKICAgICAgICBjb2x1bW5zID0gX3JlZjIuY29sdW1ucywKICAgICAgICBmaWVsZCA9IF9yZWYyLmZpZWxkOwogICAgdmFyIGV4aXN0aW5nTWV0cmljQ29sdW1uID0gT2JqZWN0LmVudHJpZXMoY29sdW1ucykuZmlsdGVyKGZ1bmN0aW9uIChfcmVmMykgewogICAgICB2YXIgX3JlZjQgPSBfc2xpY2VkVG9BcnJheShfcmVmMywgMiksCiAgICAgICAgICBfY29sdW1uSWQgPSBfcmVmNFswXSwKICAgICAgICAgIGNvbHVtbiA9IF9yZWY0WzFdOwoKICAgICAgcmV0dXJuIGNvbHVtbiAmJiBpc1NvcnRhYmxlQnlDb2x1bW4oY29sdW1uKTsKICAgIH0pLm1hcChmdW5jdGlvbiAoX3JlZjUpIHsKICAgICAgdmFyIF9yZWY2ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjUsIDEpLAogICAgICAgICAgaWQgPSBfcmVmNlswXTsKCiAgICAgIHJldHVybiBpZDsKICAgIH0pWzBdOwogICAgcmV0dXJuIHsKICAgICAgbGFiZWw6IG9mTmFtZShmaWVsZC5uYW1lKSwKICAgICAgZGF0YVR5cGU6IGZpZWxkLnR5cGUsCiAgICAgIG9wZXJhdGlvblR5cGU6ICd0ZXJtcycsCiAgICAgIHNjYWxlOiAnb3JkaW5hbCcsCiAgICAgIHN1Z2dlc3RlZFByaW9yaXR5OiBzdWdnZXN0ZWRQcmlvcml0eSwKICAgICAgc291cmNlRmllbGQ6IGZpZWxkLm5hbWUsCiAgICAgIGlzQnVja2V0ZWQ6IHRydWUsCiAgICAgIHBhcmFtczogewogICAgICAgIHNpemU6IERFRkFVTFRfU0laRSwKICAgICAgICBvcmRlckJ5OiBleGlzdGluZ01ldHJpY0NvbHVtbiA/IHsKICAgICAgICAgIHR5cGU6ICdjb2x1bW4nLAogICAgICAgICAgY29sdW1uSWQ6IGV4aXN0aW5nTWV0cmljQ29sdW1uCiAgICAgICAgfSA6IHsKICAgICAgICAgIHR5cGU6ICdhbHBoYWJldGljYWwnCiAgICAgICAgfSwKICAgICAgICBvcmRlckRpcmVjdGlvbjogZXhpc3RpbmdNZXRyaWNDb2x1bW4gPyAnZGVzYycgOiAnYXNjJwogICAgICB9CiAgICB9OwogIH0sCiAgdG9Fc0FnZ3NDb25maWc6IGZ1bmN0aW9uIHRvRXNBZ2dzQ29uZmlnKGNvbHVtbiwgY29sdW1uSWQpIHsKICAgIHJldHVybiB7CiAgICAgIGlkOiBjb2x1bW5JZCwKICAgICAgZW5hYmxlZDogdHJ1ZSwKICAgICAgdHlwZTogJ3Rlcm1zJywKICAgICAgc2NoZW1hOiAnc2VnbWVudCcsCiAgICAgIHBhcmFtczogewogICAgICAgIGZpZWxkOiBjb2x1bW4uc291cmNlRmllbGQsCiAgICAgICAgb3JkZXJCeTogY29sdW1uLnBhcmFtcy5vcmRlckJ5LnR5cGUgPT09ICdhbHBoYWJldGljYWwnID8gJ19rZXknIDogY29sdW1uLnBhcmFtcy5vcmRlckJ5LmNvbHVtbklkLAogICAgICAgIG9yZGVyOiBjb2x1bW4ucGFyYW1zLm9yZGVyRGlyZWN0aW9uLAogICAgICAgIHNpemU6IGNvbHVtbi5wYXJhbXMuc2l6ZSwKICAgICAgICBvdGhlckJ1Y2tldDogZmFsc2UsCiAgICAgICAgb3RoZXJCdWNrZXRMYWJlbDogJ090aGVyJywKICAgICAgICBtaXNzaW5nQnVja2V0OiBmYWxzZSwKICAgICAgICBtaXNzaW5nQnVja2V0TGFiZWw6ICdNaXNzaW5nJwogICAgICB9CiAgICB9OwogIH0sCiAgb25GaWVsZENoYW5nZTogZnVuY3Rpb24gb25GaWVsZENoYW5nZShvbGRDb2x1bW4sIGluZGV4UGF0dGVybiwgZmllbGQpIHsKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBvbGRDb2x1bW4sIHsKICAgICAgbGFiZWw6IG9mTmFtZShmaWVsZC5uYW1lKSwKICAgICAgc291cmNlRmllbGQ6IGZpZWxkLm5hbWUKICAgIH0pOwogIH0sCiAgb25PdGhlckNvbHVtbkNoYW5nZWQ6IGZ1bmN0aW9uIG9uT3RoZXJDb2x1bW5DaGFuZ2VkKGN1cnJlbnRDb2x1bW4sIGNvbHVtbnMpIHsKICAgIGlmIChjdXJyZW50Q29sdW1uLnBhcmFtcy5vcmRlckJ5LnR5cGUgPT09ICdjb2x1bW4nKSB7CiAgICAgIC8vIGNoZWNrIHdoZXRoZXIgdGhlIGNvbHVtbiBpcyBzdGlsbCB0aGVyZSBhbmQgc3RpbGwgYSBtZXRyaWMKICAgICAgdmFyIGNvbHVtblNvcnRlZEJ5ID0gY29sdW1uc1tjdXJyZW50Q29sdW1uLnBhcmFtcy5vcmRlckJ5LmNvbHVtbklkXTsKCiAgICAgIGlmICghY29sdW1uU29ydGVkQnkgfHwgIWlzU29ydGFibGVCeUNvbHVtbihjb2x1bW5Tb3J0ZWRCeSkpIHsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgY3VycmVudENvbHVtbiwgewogICAgICAgICAgcGFyYW1zOiBfb2JqZWN0U3ByZWFkKHt9LCBjdXJyZW50Q29sdW1uLnBhcmFtcywgewogICAgICAgICAgICBvcmRlckJ5OiB7CiAgICAgICAgICAgICAgdHlwZTogJ2FscGhhYmV0aWNhbCcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb3JkZXJEaXJlY3Rpb246ICdhc2MnCiAgICAgICAgICB9KQogICAgICAgIH0pOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGN1cnJlbnRDb2x1bW47CiAgfSwKICBwYXJhbUVkaXRvcjogZnVuY3Rpb24gcGFyYW1FZGl0b3IoX3JlZjcpIHsKICAgIHZhciBzdGF0ZSA9IF9yZWY3LnN0YXRlLAogICAgICAgIHNldFN0YXRlID0gX3JlZjcuc2V0U3RhdGUsCiAgICAgICAgY3VycmVudENvbHVtbiA9IF9yZWY3LmN1cnJlbnRDb2x1bW4sCiAgICAgICAgbGF5ZXJJZCA9IF9yZWY3LmxheWVySWQ7CiAgICB2YXIgU0VQQVJBVE9SID0gJyQkJCc7CgogICAgZnVuY3Rpb24gdG9WYWx1ZShvcmRlckJ5KSB7CiAgICAgIGlmIChvcmRlckJ5LnR5cGUgPT09ICdhbHBoYWJldGljYWwnKSB7CiAgICAgICAgcmV0dXJuIG9yZGVyQnkudHlwZTsKICAgICAgfQoKICAgICAgcmV0dXJuICIiLmNvbmNhdChvcmRlckJ5LnR5cGUpLmNvbmNhdChTRVBBUkFUT1IpLmNvbmNhdChvcmRlckJ5LmNvbHVtbklkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBmcm9tVmFsdWUodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09PSAnYWxwaGFiZXRpY2FsJykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB0eXBlOiAnYWxwaGFiZXRpY2FsJwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciBwYXJ0cyA9IHZhbHVlLnNwbGl0KFNFUEFSQVRPUik7CiAgICAgIHJldHVybiB7CiAgICAgICAgdHlwZTogJ2NvbHVtbicsCiAgICAgICAgY29sdW1uSWQ6IHBhcnRzWzFdCiAgICAgIH07CiAgICB9CgogICAgdmFyIG9yZGVyT3B0aW9ucyA9IE9iamVjdC5lbnRyaWVzKHN0YXRlLmxheWVyc1tsYXllcklkXS5jb2x1bW5zKS5maWx0ZXIoZnVuY3Rpb24gKF9yZWY4KSB7CiAgICAgIHZhciBfcmVmOSA9IF9zbGljZWRUb0FycmF5KF9yZWY4LCAyKSwKICAgICAgICAgIF9jb2x1bW5JZCA9IF9yZWY5WzBdLAogICAgICAgICAgY29sdW1uID0gX3JlZjlbMV07CgogICAgICByZXR1cm4gaXNTb3J0YWJsZUJ5Q29sdW1uKGNvbHVtbik7CiAgICB9KS5tYXAoZnVuY3Rpb24gKF9yZWYxMCkgewogICAgICB2YXIgX3JlZjExID0gX3NsaWNlZFRvQXJyYXkoX3JlZjEwLCAyKSwKICAgICAgICAgIGNvbHVtbklkID0gX3JlZjExWzBdLAogICAgICAgICAgY29sdW1uID0gX3JlZjExWzFdOwoKICAgICAgcmV0dXJuIHsKICAgICAgICB2YWx1ZTogdG9WYWx1ZSh7CiAgICAgICAgICB0eXBlOiAnY29sdW1uJywKICAgICAgICAgIGNvbHVtbklkOiBjb2x1bW5JZAogICAgICAgIH0pLAogICAgICAgIHRleHQ6IGNvbHVtbi5sYWJlbAogICAgICB9OwogICAgfSk7CiAgICBvcmRlck9wdGlvbnMucHVzaCh7CiAgICAgIHZhbHVlOiB0b1ZhbHVlKHsKICAgICAgICB0eXBlOiAnYWxwaGFiZXRpY2FsJwogICAgICB9KSwKICAgICAgdGV4dDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMuaW5kZXhQYXR0ZXJuLnRlcm1zLm9yZGVyQWxwaGFiZXRpY2FsJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQWxwaGFiZXRpY2FsJwogICAgICB9KQogICAgfSk7CiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm0sIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subGVucy5pbmRleFBhdHRlcm4udGVybXMuc2l6ZScsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ051bWJlciBvZiB2YWx1ZXMnCiAgICAgIH0pLAogICAgICBkaXNwbGF5OiAiY29sdW1uQ29tcHJlc3NlZCIKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRml4ZWRFdWlSYW5nZSwgewogICAgICBtaW46IDEsCiAgICAgIG1heDogMjAsCiAgICAgIHN0ZXA6IDEsCiAgICAgIHZhbHVlOiBjdXJyZW50Q29sdW1uLnBhcmFtcy5zaXplLAogICAgICBzaG93SW5wdXQ6IHRydWUsCiAgICAgIHNob3dMYWJlbHM6IHRydWUsCiAgICAgIGNvbXByZXNzZWQ6IHRydWUsCiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7CiAgICAgICAgcmV0dXJuIHNldFN0YXRlKCgwLCBfc3RhdGVfaGVscGVycy51cGRhdGVDb2x1bW5QYXJhbSkoewogICAgICAgICAgc3RhdGU6IHN0YXRlLAogICAgICAgICAgbGF5ZXJJZDogbGF5ZXJJZCwKICAgICAgICAgIGN1cnJlbnRDb2x1bW46IGN1cnJlbnRDb2x1bW4sCiAgICAgICAgICBwYXJhbU5hbWU6ICdzaXplJywKICAgICAgICAgIHZhbHVlOiBOdW1iZXIoZS50YXJnZXQudmFsdWUpCiAgICAgICAgfSkpOwogICAgICB9LAogICAgICAiYXJpYS1sYWJlbCI6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5sZW5zLmluZGV4UGF0dGVybi50ZXJtcy5zaXplJywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTnVtYmVyIG9mIHZhbHVlcycKICAgICAgfSkKICAgIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5sZW5zLmluZGV4UGF0dGVybi50ZXJtcy5vcmRlckJ5JywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnT3JkZXIgYnknCiAgICAgIH0pLAogICAgICBkaXNwbGF5OiAiY29sdW1uQ29tcHJlc3NlZCIKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTZWxlY3QsIHsKICAgICAgY29tcHJlc3NlZDogdHJ1ZSwKICAgICAgImRhdGEtdGVzdC1zdWJqIjogImluZGV4UGF0dGVybi10ZXJtcy1vcmRlckJ5IiwKICAgICAgb3B0aW9uczogb3JkZXJPcHRpb25zLAogICAgICB2YWx1ZTogdG9WYWx1ZShjdXJyZW50Q29sdW1uLnBhcmFtcy5vcmRlckJ5KSwKICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgICByZXR1cm4gc2V0U3RhdGUoKDAsIF9zdGF0ZV9oZWxwZXJzLnVwZGF0ZUNvbHVtblBhcmFtKSh7CiAgICAgICAgICBzdGF0ZTogc3RhdGUsCiAgICAgICAgICBsYXllcklkOiBsYXllcklkLAogICAgICAgICAgY3VycmVudENvbHVtbjogY3VycmVudENvbHVtbiwKICAgICAgICAgIHBhcmFtTmFtZTogJ29yZGVyQnknLAogICAgICAgICAgdmFsdWU6IGZyb21WYWx1ZShlLnRhcmdldC52YWx1ZSkKICAgICAgICB9KSk7CiAgICAgIH0sCiAgICAgICJhcmlhLWxhYmVsIjogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMuaW5kZXhQYXR0ZXJuLnRlcm1zLm9yZGVyQnknLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdPcmRlciBieScKICAgICAgfSkKICAgIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5sZW5zLmluZGV4UGF0dGVybi50ZXJtcy5vcmRlckRpcmVjdGlvbicsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ09yZGVyIGRpcmVjdGlvbicKICAgICAgfSksCiAgICAgIGRpc3BsYXk6ICJjb2x1bW5Db21wcmVzc2VkIgogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNlbGVjdCwgewogICAgICBjb21wcmVzc2VkOiB0cnVlLAogICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiaW5kZXhQYXR0ZXJuLXRlcm1zLW9yZGVyRGlyZWN0aW9uIiwKICAgICAgb3B0aW9uczogW3sKICAgICAgICB2YWx1ZTogJ2FzYycsCiAgICAgICAgdGV4dDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMuaW5kZXhQYXR0ZXJuLnRlcm1zLm9yZGVyQXNjZW5kaW5nJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdBc2NlbmRpbmcnCiAgICAgICAgfSkKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAnZGVzYycsCiAgICAgICAgdGV4dDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMuaW5kZXhQYXR0ZXJuLnRlcm1zLm9yZGVyRGVzY2VuZGluZycsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRGVzY2VuZGluZycKICAgICAgICB9KQogICAgICB9XSwKICAgICAgdmFsdWU6IGN1cnJlbnRDb2x1bW4ucGFyYW1zLm9yZGVyRGlyZWN0aW9uLAogICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICAgIHJldHVybiBzZXRTdGF0ZSgoMCwgX3N0YXRlX2hlbHBlcnMudXBkYXRlQ29sdW1uUGFyYW0pKHsKICAgICAgICAgIHN0YXRlOiBzdGF0ZSwKICAgICAgICAgIGxheWVySWQ6IGxheWVySWQsCiAgICAgICAgICBjdXJyZW50Q29sdW1uOiBjdXJyZW50Q29sdW1uLAogICAgICAgICAgcGFyYW1OYW1lOiAnb3JkZXJEaXJlY3Rpb24nLAogICAgICAgICAgdmFsdWU6IGUudGFyZ2V0LnZhbHVlCiAgICAgICAgfSkpOwogICAgICB9LAogICAgICAiYXJpYS1sYWJlbCI6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5sZW5zLmluZGV4UGF0dGVybi50ZXJtcy5vcmRlckJ5JywgewogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnT3JkZXIgYnknCiAgICAgIH0pCiAgICB9KSkpOwogIH0KfTsKZXhwb3J0cy50ZXJtc09wZXJhdGlvbiA9IHRlcm1zT3BlcmF0aW9uOw=="},null]}