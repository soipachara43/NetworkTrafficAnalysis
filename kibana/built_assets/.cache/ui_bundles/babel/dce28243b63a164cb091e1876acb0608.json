{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/plugins/dashboard/public/embeddable/grid/dashboard_grid.js","dependencies":[{"path":"src/plugins/dashboard/public/embeddable/grid/dashboard_grid.js","mtime":1589249550543},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuRGFzaGJvYXJkR3JpZCA9IHZvaWQgMDsKCnJlcXVpcmUoInJlYWN0LWdyaWQtbGF5b3V0L2Nzcy9zdHlsZXMuY3NzIik7CgpyZXF1aXJlKCJyZWFjdC1yZXNpemFibGUvY3NzL3N0eWxlcy5jc3MiKTsKCnZhciBfcmVhY3RTaXplbWUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJlYWN0LXNpemVtZSIpKTsKCnZhciBfcmVhY3QgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfY2xhc3NuYW1lcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiY2xhc3NuYW1lcyIpKTsKCnZhciBfbG9kYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsb2Rhc2giKSk7Cgp2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3JlYWN0R3JpZExheW91dCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QtZ3JpZC1sYXlvdXQiKSk7Cgp2YXIgX2VtYmVkZGFibGVfcGx1Z2luID0gcmVxdWlyZSgiLi4vLi4vZW1iZWRkYWJsZV9wbHVnaW4iKTsKCnZhciBfZGFzaGJvYXJkX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uL2Rhc2hib2FyZF9jb25zdGFudHMiKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4va2liYW5hX3JlYWN0L3B1YmxpYyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9IGVsc2UgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0KCiAgcmV0dXJuIF90eXBlb2Yob2JqKTsKfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgewogIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsKICAgIHJldHVybiBjYWxsOwogIH0KCiAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7Cn0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7CiAgfTsKICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOwp9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsKICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIHNlbGY7Cn0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgewogIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOwogIH0KCiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICBjb25zdHJ1Y3RvcjogewogICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0KICB9KTsKICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsKfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICAgIG8uX19wcm90b19fID0gcDsKICAgIHJldHVybiBvOwogIH07CgogIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBfb2JqZWN0RGVzdHJ1Y3R1cmluZ0VtcHR5KG9iaikgewogIGlmIChvYmogPT0gbnVsbCkgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGRlc3RydWN0dXJlIHVuZGVmaW5lZCIpOwp9Cgp2YXIgbGFzdFZhbGlkR3JpZFNpemUgPSAwOwovKioKICogVGhpcyBpcyBhIGZpeCBmb3IgYSBidWcgdGhhdCBzdG9wcGVkIHRoZSBicm93c2VyIHdpbmRvdyBmcm9tIGF1dG9tYXRpY2FsbHkgc2Nyb2xsaW5nIGRvd24gd2hlbiBwYW5lbHMgd2VyZSBtYWRlCiAqIHRhbGxlciB0aGFuIHRoZSBjdXJyZW50IGdyaWQuCiAqIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZWxhc3RpYy9raWJhbmEvaXNzdWVzLzE0NzEwLgogKi8KCmZ1bmN0aW9uIGVuc3VyZVdpbmRvd1Njcm9sbHNUb0JvdHRvbShldmVudCkgewogIC8vIFRoZSBidWZmZXIgaXMgdG8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSBicm93c2VyIGlzIG1heGltaXplZCBhbmQgaXQncyBpbXBvc3NpYmxlIGZvciB0aGUgbW91c2UgdG8gbW92ZSBiZWxvdwogIC8vIHRoZSBzY3JlZW4sIG91dCBvZiB0aGUgd2luZG93LiAgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGFzdGljL2tpYmFuYS9pc3N1ZXMvMTQ3MzcKICB2YXIgV0lORE9XX0JVRkZFUiA9IDEwOwoKICBpZiAoZXZlbnQuY2xpZW50WSA+IHdpbmRvdy5pbm5lckhlaWdodCAtIFdJTkRPV19CVUZGRVIpIHsKICAgIHdpbmRvdy5zY3JvbGxUbygwLCBldmVudC5wYWdlWSArIFdJTkRPV19CVUZGRVIgLSB3aW5kb3cuaW5uZXJIZWlnaHQpOwogIH0KfQoKZnVuY3Rpb24gUmVzcG9uc2l2ZUdyaWQoX3JlZikgewogIHZhciBzaXplID0gX3JlZi5zaXplLAogICAgICBpc1ZpZXdNb2RlID0gX3JlZi5pc1ZpZXdNb2RlLAogICAgICBsYXlvdXQgPSBfcmVmLmxheW91dCwKICAgICAgb25MYXlvdXRDaGFuZ2UgPSBfcmVmLm9uTGF5b3V0Q2hhbmdlLAogICAgICBjaGlsZHJlbiA9IF9yZWYuY2hpbGRyZW4sCiAgICAgIG1heGltaXplZFBhbmVsSWQgPSBfcmVmLm1heGltaXplZFBhbmVsSWQsCiAgICAgIHVzZU1hcmdpbnMgPSBfcmVmLnVzZU1hcmdpbnM7IC8vIFRoaXMgaXMgdG8gcHJldmVudCBhIGJ1ZyB3aGVyZSB2aWV3IG1vZGUgY2hhbmdlcyB3aGVuIHRoZSBwYW5lbCBpcyBleHBhbmRlZC4gIFZpZXcgbW9kZSBjaGFuZ2VzIHdpbGwgdHJpZ2dlcgogIC8vIHRoZSBncmlkIHRvIHJlLXJlbmRlciwgYnV0IHdoZW4gYSBwYW5lbCBpcyBleHBhbmRlZCwgdGhlIHNpemUgd2lsbCBiZSAwLiBNaW5pbWl6aW5nIHRoZSBwYW5lbCB3b24ndCBjYXVzZSB0aGUKICAvLyBncmlkIHRvIHJlLXJlbmRlciBzbyBpdCdsbCBzaG93IGEgZ3JpZCB3aXRoIGEgd2lkdGggb2YgMC4KCiAgbGFzdFZhbGlkR3JpZFNpemUgPSBzaXplLndpZHRoID4gMCA/IHNpemUud2lkdGggOiBsYXN0VmFsaWRHcmlkU2l6ZTsKICB2YXIgY2xhc3NlcyA9ICgwLCBfY2xhc3NuYW1lcy5kZWZhdWx0KSh7CiAgICAnZHNoTGF5b3V0LS12aWV3aW5nJzogaXNWaWV3TW9kZSwKICAgICdkc2hMYXlvdXQtLWVkaXRpbmcnOiAhaXNWaWV3TW9kZSwKICAgICdkc2hMYXlvdXQtaXNNYXhpbWl6ZWRQYW5lbCc6IG1heGltaXplZFBhbmVsSWQgIT09IHVuZGVmaW5lZCwKICAgICdkc2hMYXlvdXQtd2l0aG91dE1hcmdpbnMnOiAhdXNlTWFyZ2lucwogIH0pOwogIHZhciBNQVJHSU5TID0gdXNlTWFyZ2lucyA/IDggOiAwOyAvLyBXZSBjYW4ndCB0YWtlIGFkdmFudGFnZSBvZiBpc0RyYWdnYWJsZSBvciBpc1Jlc2l6YWJsZSBkdWUgdG8gcGVyZm9ybWFuY2UgY29uY2VybnM6CiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL1NUUk1ML3JlYWN0LWdyaWQtbGF5b3V0L2lzc3Vlcy8yNDAKCiAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdEdyaWRMYXlvdXQuZGVmYXVsdCwgewogICAgd2lkdGg6IGxhc3RWYWxpZEdyaWRTaXplLAogICAgY2xhc3NOYW1lOiBjbGFzc2VzLAogICAgaXNEcmFnZ2FibGU6IHRydWUsCiAgICBpc1Jlc2l6YWJsZTogdHJ1ZSAvLyBUaGVyZSBpcyBhIGJ1ZyB3aXRoIGQzICsgZmlyZWZveCArIGVsZW1lbnRzIHVzaW5nIHRyYW5zZm9ybXMuCiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2VsYXN0aWMva2liYW5hL2lzc3Vlcy8xNjg3MCBmb3IgbW9yZSBjb250ZXh0LgogICAgLAogICAgdXNlQ1NTVHJhbnNmb3JtczogZmFsc2UsCiAgICBtYXJnaW46IFtNQVJHSU5TLCBNQVJHSU5TXSwKICAgIGNvbHM6IF9kYXNoYm9hcmRfY29uc3RhbnRzLkRBU0hCT0FSRF9HUklEX0NPTFVNTl9DT1VOVCwKICAgIHJvd0hlaWdodDogX2Rhc2hib2FyZF9jb25zdGFudHMuREFTSEJPQVJEX0dSSURfSEVJR0hUIC8vIFBhc3MgdGhlIG5hbWVkIGNsYXNzZXMgb2Ygd2hhdCBzaG91bGQgZ2V0IHRoZSBkcmFnZ2luZyBoYW5kbGUKICAgIC8vICguZG9lc250LWV4aXN0IGxpdGVyYWxseSBkb2VzbnQgZXhpc3QpCiAgICAsCiAgICBkcmFnZ2FibGVIYW5kbGU6IGlzVmlld01vZGUgPyAnLmRvZXNudC1leGlzdCcgOiAnLmVtYlBhbmVsX19kcmFnZ2VyJywKICAgIGxheW91dDogbGF5b3V0LAogICAgb25MYXlvdXRDaGFuZ2U6IG9uTGF5b3V0Q2hhbmdlLAogICAgb25SZXNpemU6IGZ1bmN0aW9uIG9uUmVzaXplKF9yZWYyLCBfcmVmMywgX3JlZjQsIF9yZWY1LCBldmVudCkgewogICAgICBfb2JqZWN0RGVzdHJ1Y3R1cmluZ0VtcHR5KF9yZWYyKTsKCiAgICAgIF9vYmplY3REZXN0cnVjdHVyaW5nRW1wdHkoX3JlZjMpOwoKICAgICAgX29iamVjdERlc3RydWN0dXJpbmdFbXB0eShfcmVmNCk7CgogICAgICBfb2JqZWN0RGVzdHJ1Y3R1cmluZ0VtcHR5KF9yZWY1KTsKCiAgICAgIHJldHVybiBlbnN1cmVXaW5kb3dTY3JvbGxzVG9Cb3R0b20oZXZlbnQpOwogICAgfQogIH0sIGNoaWxkcmVuKTsKfSAvLyBVc2luZyBzaXplTWUgc2V0cyB1cCB0aGUgZ3JpZCB0byBiZSByZS1yZW5kZXJlZCBhdXRvbWF0aWNhbGx5IG5vdCBvbmx5IHdoZW4gdGhlIHdpbmRvdyBzaXplIGNoYW5nZXMsIGJ1dCBhbHNvCi8vIHdoZW4gdGhlIGNvbnRhaW5lciBzaXplIGNoYW5nZXMsIHNvIGl0IHdvcmtzIGZvciBGdWxsIFNjcmVlbiBtb2RlIHN3aXRjaGVzLgoKCnZhciBjb25maWcgPSB7CiAgbW9uaXRvcldpZHRoOiB0cnVlCn07CnZhciBSZXNwb25zaXZlU2l6ZWRHcmlkID0gKDAsIF9yZWFjdFNpemVtZS5kZWZhdWx0KShjb25maWcpKFJlc3BvbnNpdmVHcmlkKTsKCnZhciBEYXNoYm9hcmRHcmlkVWkgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7CiAgX2luaGVyaXRzKERhc2hib2FyZEdyaWRVaSwgX1JlYWN0JENvbXBvbmVudCk7IC8vIEEgbWFwcGluZyBvZiBwYW5lbEluZGV4ZXMgdG8gZ3JpZCBpdGVtcyBzbyB3ZSBjYW4gc2V0IHRoZSB6SW5kZXggYXBwcm9wcmlhdGVseSBvbiB0aGUgbGFzdCBmb2N1c2VkCiAgLy8gaXRlbS4KCgogIGZ1bmN0aW9uIERhc2hib2FyZEdyaWRVaShwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEYXNoYm9hcmRHcmlkVWkpOwoKICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKERhc2hib2FyZEdyaWRVaSkuY2FsbCh0aGlzLCBwcm9wcykpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInN1YnNjcmlwdGlvbiIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAibW91bnRlZCIsIGZhbHNlKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJncmlkSXRlbXMiLCB7fSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiYnVpbGRMYXlvdXRGcm9tUGFuZWxzIiwgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX2xvZGFzaC5kZWZhdWx0Lm1hcChfdGhpcy5zdGF0ZS5wYW5lbHMsIGZ1bmN0aW9uIChwYW5lbCkgewogICAgICAgIHJldHVybiBwYW5lbC5ncmlkRGF0YTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvbkxheW91dENoYW5nZSIsIGZ1bmN0aW9uIChsYXlvdXQpIHsKICAgICAgdmFyIHBhbmVscyA9IF90aGlzLnN0YXRlLnBhbmVsczsKICAgICAgdmFyIHVwZGF0ZWRQYW5lbHMgPSBsYXlvdXQucmVkdWNlKGZ1bmN0aW9uICh1cGRhdGVkUGFuZWxzQWNjLCBwYW5lbExheW91dCkgewogICAgICAgIHVwZGF0ZWRQYW5lbHNBY2NbcGFuZWxMYXlvdXQuaV0gPSBfb2JqZWN0U3ByZWFkKHt9LCBwYW5lbHNbcGFuZWxMYXlvdXQuaV0sIHsKICAgICAgICAgIGdyaWREYXRhOiBfbG9kYXNoLmRlZmF1bHQucGljayhwYW5lbExheW91dCwgWyd4JywgJ3knLCAndycsICdoJywgJ2knXSkKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gdXBkYXRlZFBhbmVsc0FjYzsKICAgICAgfSwge30pOwoKICAgICAgX3RoaXMub25QYW5lbHNVcGRhdGVkKHVwZGF0ZWRQYW5lbHMpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAib25QYW5lbHNVcGRhdGVkIiwgZnVuY3Rpb24gKHBhbmVscykgewogICAgICBfdGhpcy5wcm9wcy5jb250YWluZXIudXBkYXRlSW5wdXQoewogICAgICAgIHBhbmVsczogcGFuZWxzCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAib25QYW5lbEZvY3VzZWQiLCBmdW5jdGlvbiAoZm9jdXNlZFBhbmVsSW5kZXgpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGZvY3VzZWRQYW5lbEluZGV4OiBmb2N1c2VkUGFuZWxJbmRleAogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uUGFuZWxCbHVycmVkIiwgZnVuY3Rpb24gKGJsdXJyZWRQYW5lbEluZGV4KSB7CiAgICAgIGlmIChfdGhpcy5zdGF0ZS5mb2N1c2VkUGFuZWxJbmRleCA9PT0gYmx1cnJlZFBhbmVsSW5kZXgpIHsKICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICBmb2N1c2VkUGFuZWxJbmRleDogdW5kZWZpbmVkCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwoKICAgIF90aGlzLnN0YXRlID0gewogICAgICBsYXlvdXQ6IFtdLAogICAgICBpc0xheW91dEludmFsaWQ6IGZhbHNlLAogICAgICBmb2N1c2VkUGFuZWxJbmRleDogdW5kZWZpbmVkLAogICAgICBwYW5lbHM6IF90aGlzLnByb3BzLmNvbnRhaW5lci5nZXRJbnB1dCgpLnBhbmVscywKICAgICAgdmlld01vZGU6IF90aGlzLnByb3BzLmNvbnRhaW5lci5nZXRJbnB1dCgpLnZpZXdNb2RlLAogICAgICB1c2VNYXJnaW5zOiBfdGhpcy5wcm9wcy5jb250YWluZXIuZ2V0SW5wdXQoKS51c2VNYXJnaW5zLAogICAgICBleHBhbmRlZFBhbmVsSWQ6IF90aGlzLnByb3BzLmNvbnRhaW5lci5nZXRJbnB1dCgpLmV4cGFuZGVkUGFuZWxJZAogICAgfTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhEYXNoYm9hcmRHcmlkVWksIFt7CiAgICBrZXk6ICJjb21wb25lbnREaWRNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5tb3VudGVkID0gdHJ1ZTsKICAgICAgdmFyIGlzTGF5b3V0SW52YWxpZCA9IGZhbHNlOwogICAgICB2YXIgbGF5b3V0OwoKICAgICAgdHJ5IHsKICAgICAgICBsYXlvdXQgPSB0aGlzLmJ1aWxkTGF5b3V0RnJvbVBhbmVscygpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKCiAgICAgICAgaXNMYXlvdXRJbnZhbGlkID0gdHJ1ZTsKICAgICAgICB0aGlzLnByb3BzLmtpYmFuYS5ub3RpZmljYXRpb25zLnRvYXN0cy5kYW5nZXIoewogICAgICAgICAgdGl0bGU6IHRoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsKICAgICAgICAgICAgaWQ6ICdkYXNoYm9hcmQuZGFzaGJvYXJkR3JpZC50b2FzdC51bmFibGVUb0xvYWREYXNoYm9hcmREYW5nZXJNZXNzYWdlJywKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdVbmFibGUgdG8gbG9hZCBkYXNoYm9hcmQuJwogICAgICAgICAgfSksCiAgICAgICAgICBib2R5OiBlcnJvci5tZXNzYWdlLAogICAgICAgICAgdG9hc3RMaWZlVGltZU1zOiA1MDAwCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgIGxheW91dDogbGF5b3V0LAogICAgICAgIGlzTGF5b3V0SW52YWxpZDogaXNMYXlvdXRJbnZhbGlkCiAgICAgIH0pOwogICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IHRoaXMucHJvcHMuY29udGFpbmVyLmdldElucHV0JCgpLnN1YnNjcmliZShmdW5jdGlvbiAoaW5wdXQpIHsKICAgICAgICBpZiAoX3RoaXMyLm1vdW50ZWQpIHsKICAgICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7CiAgICAgICAgICAgIHBhbmVsczogaW5wdXQucGFuZWxzLAogICAgICAgICAgICB2aWV3TW9kZTogaW5wdXQudmlld01vZGUsCiAgICAgICAgICAgIHVzZU1hcmdpbnM6IGlucHV0LnVzZU1hcmdpbnMsCiAgICAgICAgICAgIGV4cGFuZGVkUGFuZWxJZDogaW5wdXQuZXhwYW5kZWRQYW5lbElkCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudFdpbGxVbm1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHsKICAgICAgdGhpcy5tb3VudGVkID0gZmFsc2U7CgogICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb24pIHsKICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyUGFuZWxzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJQYW5lbHMoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzJHN0YXRlID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIGZvY3VzZWRQYW5lbEluZGV4ID0gX3RoaXMkc3RhdGUuZm9jdXNlZFBhbmVsSW5kZXgsCiAgICAgICAgICBwYW5lbHMgPSBfdGhpcyRzdGF0ZS5wYW5lbHMsCiAgICAgICAgICBleHBhbmRlZFBhbmVsSWQgPSBfdGhpcyRzdGF0ZS5leHBhbmRlZFBhbmVsSWQ7IC8vIFBhcnQgb2Ygb3VyIHVub2ZmaWNpYWwgQVBJIC0gbmVlZCB0byByZW5kZXIgaW4gYSBjb25zaXN0ZW50IG9yZGVyIGZvciBwbHVnaW5zLgoKICAgICAgdmFyIHBhbmVsc0luT3JkZXIgPSBPYmplY3Qua2V5cyhwYW5lbHMpLm1hcChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgcmV0dXJuIHBhbmVsc1trZXldOwogICAgICB9KTsKICAgICAgcGFuZWxzSW5PcmRlci5zb3J0KGZ1bmN0aW9uIChwYW5lbEEsIHBhbmVsQikgewogICAgICAgIGlmIChwYW5lbEEuZ3JpZERhdGEueSA9PT0gcGFuZWxCLmdyaWREYXRhLnkpIHsKICAgICAgICAgIHJldHVybiBwYW5lbEEuZ3JpZERhdGEueCAtIHBhbmVsQi5ncmlkRGF0YS54OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gcGFuZWxBLmdyaWREYXRhLnkgLSBwYW5lbEIuZ3JpZERhdGEueTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gX2xvZGFzaC5kZWZhdWx0Lm1hcChwYW5lbHNJbk9yZGVyLCBmdW5jdGlvbiAocGFuZWwpIHsKICAgICAgICB2YXIgZXhwYW5kUGFuZWwgPSBleHBhbmRlZFBhbmVsSWQgIT09IHVuZGVmaW5lZCAmJiBleHBhbmRlZFBhbmVsSWQgPT09IHBhbmVsLmV4cGxpY2l0SW5wdXQuaWQ7CiAgICAgICAgdmFyIGhpZGVQYW5lbCA9IGV4cGFuZGVkUGFuZWxJZCAhPT0gdW5kZWZpbmVkICYmIGV4cGFuZGVkUGFuZWxJZCAhPT0gcGFuZWwuZXhwbGljaXRJbnB1dC5pZDsKICAgICAgICB2YXIgY2xhc3NlcyA9ICgwLCBfY2xhc3NuYW1lcy5kZWZhdWx0KSh7CiAgICAgICAgICAnZHNoRGFzaGJvYXJkR3JpZF9faXRlbS0tZXhwYW5kZWQnOiBleHBhbmRQYW5lbCwKICAgICAgICAgICdkc2hEYXNoYm9hcmRHcmlkX19pdGVtLS1oaWRkZW4nOiBoaWRlUGFuZWwKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgIHpJbmRleDogZm9jdXNlZFBhbmVsSW5kZXggPT09IHBhbmVsLmV4cGxpY2l0SW5wdXQuaWQgPyAyIDogJ2F1dG8nCiAgICAgICAgICB9LAogICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc2VzLAogICAgICAgICAga2V5OiBwYW5lbC5leHBsaWNpdElucHV0LmlkLAogICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImRhc2hib2FyZFBhbmVsIiwKICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKHJlYWN0R3JpZEl0ZW0pIHsKICAgICAgICAgICAgX3RoaXMzLmdyaWRJdGVtc1twYW5lbC5leHBsaWNpdElucHV0LmlkXSA9IHJlYWN0R3JpZEl0ZW07CiAgICAgICAgICB9CiAgICAgICAgfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2VtYmVkZGFibGVfcGx1Z2luLkVtYmVkZGFibGVDaGlsZFBhbmVsLCB7CiAgICAgICAgICBlbWJlZGRhYmxlSWQ6IHBhbmVsLmV4cGxpY2l0SW5wdXQuaWQsCiAgICAgICAgICBjb250YWluZXI6IF90aGlzMy5wcm9wcy5jb250YWluZXIsCiAgICAgICAgICBnZXRBY3Rpb25zOiBfdGhpczMucHJvcHMua2liYW5hLnNlcnZpY2VzLnVpQWN0aW9ucy5nZXRUcmlnZ2VyQ29tcGF0aWJsZUFjdGlvbnMsCiAgICAgICAgICBnZXRFbWJlZGRhYmxlRmFjdG9yeTogX3RoaXMzLnByb3BzLmtpYmFuYS5zZXJ2aWNlcy5lbWJlZGRhYmxlLmdldEVtYmVkZGFibGVGYWN0b3J5LAogICAgICAgICAgZ2V0QWxsRW1iZWRkYWJsZUZhY3RvcmllczogX3RoaXMzLnByb3BzLmtpYmFuYS5zZXJ2aWNlcy5lbWJlZGRhYmxlLmdldEVtYmVkZGFibGVGYWN0b3JpZXMsCiAgICAgICAgICBvdmVybGF5czogX3RoaXMzLnByb3BzLmtpYmFuYS5zZXJ2aWNlcy5vdmVybGF5cywKICAgICAgICAgIG5vdGlmaWNhdGlvbnM6IF90aGlzMy5wcm9wcy5raWJhbmEuc2VydmljZXMubm90aWZpY2F0aW9ucywKICAgICAgICAgIGluc3BlY3RvcjogX3RoaXMzLnByb3BzLmtpYmFuYS5zZXJ2aWNlcy5pbnNwZWN0b3IsCiAgICAgICAgICBTYXZlZE9iamVjdEZpbmRlcjogX3RoaXMzLnByb3BzLmtpYmFuYS5zZXJ2aWNlcy5TYXZlZE9iamVjdEZpbmRlcgogICAgICAgIH0pKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIGlmICh0aGlzLnN0YXRlLmlzTGF5b3V0SW52YWxpZCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICB2YXIgdmlld01vZGUgPSB0aGlzLnN0YXRlLnZpZXdNb2RlOwogICAgICB2YXIgaXNWaWV3TW9kZSA9IHZpZXdNb2RlID09PSBfZW1iZWRkYWJsZV9wbHVnaW4uVmlld01vZGUuVklFVzsKICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFJlc3BvbnNpdmVTaXplZEdyaWQsIHsKICAgICAgICBpc1ZpZXdNb2RlOiBpc1ZpZXdNb2RlLAogICAgICAgIGxheW91dDogdGhpcy5idWlsZExheW91dEZyb21QYW5lbHMoKSwKICAgICAgICBvbkxheW91dENoYW5nZTogdGhpcy5vbkxheW91dENoYW5nZSwKICAgICAgICBtYXhpbWl6ZWRQYW5lbElkOiB0aGlzLnN0YXRlLmV4cGFuZGVkUGFuZWxJZCwKICAgICAgICB1c2VNYXJnaW5zOiB0aGlzLnN0YXRlLnVzZU1hcmdpbnMKICAgICAgfSwgdGhpcy5yZW5kZXJQYW5lbHMoKSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRGFzaGJvYXJkR3JpZFVpOwp9KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpOwoKdmFyIERhc2hib2FyZEdyaWQgPSAoMCwgX3JlYWN0LmluamVjdEkxOG4pKCgwLCBfcHVibGljLndpdGhLaWJhbmEpKERhc2hib2FyZEdyaWRVaSkpOwpleHBvcnRzLkRhc2hib2FyZEdyaWQgPSBEYXNoYm9hcmRHcmlkOw=="},null]}