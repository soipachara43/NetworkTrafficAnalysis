{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/infra/public/containers/logs/log_analysis/log_analysis_module.js","dependencies":[{"path":"x-pack/plugins/infra/public/containers/logs/log_analysis/log_analysis_module.js","mtime":1589249554273},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnVzZUxvZ0FuYWx5c2lzTW9kdWxlID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IHJlcXVpcmUoInJlYWN0Iik7Cgp2YXIgX3VzZV90cmFja2VkX3Byb21pc2UgPSByZXF1aXJlKCIuLi8uLi8uLi91dGlscy91c2VfdHJhY2tlZF9wcm9taXNlIik7Cgp2YXIgX2xvZ19hbmFseXNpc19tb2R1bGVfc3RhdHVzID0gcmVxdWlyZSgiLi9sb2dfYW5hbHlzaXNfbW9kdWxlX3N0YXR1cyIpOwoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgewogIHRyeSB7CiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7CiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICByZWplY3QoZXJyb3IpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKGluZm8uZG9uZSkgewogICAgcmVzb2x2ZSh2YWx1ZSk7CiAgfSBlbHNlIHsKICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsKICB9Cn0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWxmID0gdGhpcywKICAgICAgICBhcmdzID0gYXJndW1lbnRzOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOwoKICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHsKICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7CiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOwogICAgICB9CgogICAgICBfbmV4dCh1bmRlZmluZWQpOwogICAgfSk7CiAgfTsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKdmFyIHVzZUxvZ0FuYWx5c2lzTW9kdWxlID0gZnVuY3Rpb24gdXNlTG9nQW5hbHlzaXNNb2R1bGUoX3JlZikgewogIHZhciBzb3VyY2VDb25maWd1cmF0aW9uID0gX3JlZi5zb3VyY2VDb25maWd1cmF0aW9uLAogICAgICBtb2R1bGVEZXNjcmlwdG9yID0gX3JlZi5tb2R1bGVEZXNjcmlwdG9yOwogIHZhciBzcGFjZUlkID0gc291cmNlQ29uZmlndXJhdGlvbi5zcGFjZUlkLAogICAgICBzb3VyY2VJZCA9IHNvdXJjZUNvbmZpZ3VyYXRpb24uc291cmNlSWQsCiAgICAgIHRpbWVzdGFtcEZpZWxkID0gc291cmNlQ29uZmlndXJhdGlvbi50aW1lc3RhbXBGaWVsZCwKICAgICAgaW5kaWNlcyA9IHNvdXJjZUNvbmZpZ3VyYXRpb24uaW5kaWNlczsKCiAgdmFyIF91c2VNb2R1bGVTdGF0dXMgPSAoMCwgX2xvZ19hbmFseXNpc19tb2R1bGVfc3RhdHVzLnVzZU1vZHVsZVN0YXR1cykobW9kdWxlRGVzY3JpcHRvci5qb2JUeXBlcywgewogICAgYnVja2V0U3BhbjogbW9kdWxlRGVzY3JpcHRvci5idWNrZXRTcGFuLAogICAgaW5kZXhQYXR0ZXJuOiBpbmRpY2VzLmpvaW4oJywnKSwKICAgIHRpbWVzdGFtcEZpZWxkOiB0aW1lc3RhbXBGaWVsZAogIH0pLAogICAgICBfdXNlTW9kdWxlU3RhdHVzMiA9IF9zbGljZWRUb0FycmF5KF91c2VNb2R1bGVTdGF0dXMsIDIpLAogICAgICBtb2R1bGVTdGF0dXMgPSBfdXNlTW9kdWxlU3RhdHVzMlswXSwKICAgICAgZGlzcGF0Y2hNb2R1bGVTdGF0dXMgPSBfdXNlTW9kdWxlU3RhdHVzMlsxXTsKCiAgdmFyIF91c2VUcmFja2VkUHJvbWlzZSA9ICgwLCBfdXNlX3RyYWNrZWRfcHJvbWlzZS51c2VUcmFja2VkUHJvbWlzZSkoewogICAgY2FuY2VsUHJldmlvdXNPbjogJ3Jlc29sdXRpb24nLAogICAgY3JlYXRlUHJvbWlzZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2NyZWF0ZVByb21pc2UgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRpc3BhdGNoTW9kdWxlU3RhdHVzKHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZldGNoaW5nTW9kdWxlRGVmaW5pdGlvbicKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gbW9kdWxlRGVzY3JpcHRvci5nZXRNb2R1bGVEZWZpbml0aW9uKCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0LnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gY3JlYXRlUHJvbWlzZSgpIHsKICAgICAgICByZXR1cm4gX2NyZWF0ZVByb21pc2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGNyZWF0ZVByb21pc2U7CiAgICB9KCksCiAgICBvblJlc29sdmU6IGZ1bmN0aW9uIG9uUmVzb2x2ZShyZXNwb25zZSkgewogICAgICBkaXNwYXRjaE1vZHVsZVN0YXR1cyh7CiAgICAgICAgdHlwZTogJ2ZldGNoZWRNb2R1bGVEZWZpbml0aW9uJywKICAgICAgICBzcGFjZUlkOiBzcGFjZUlkLAogICAgICAgIHNvdXJjZUlkOiBzb3VyY2VJZCwKICAgICAgICBtb2R1bGVEZWZpbml0aW9uOiByZXNwb25zZQogICAgICB9KTsKICAgIH0sCiAgICBvblJlamVjdDogZnVuY3Rpb24gb25SZWplY3QoKSB7CiAgICAgIGRpc3BhdGNoTW9kdWxlU3RhdHVzKHsKICAgICAgICB0eXBlOiAnZmFpbGVkRmV0Y2hpbmdNb2R1bGVEZWZpbml0aW9uJwogICAgICB9KTsKICAgIH0KICB9LCBbbW9kdWxlRGVzY3JpcHRvci5nZXRNb2R1bGVEZWZpbml0aW9uLCBzcGFjZUlkLCBzb3VyY2VJZF0pLAogICAgICBfdXNlVHJhY2tlZFByb21pc2UyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVRyYWNrZWRQcm9taXNlLCAyKSwKICAgICAgZmV0Y2hNb2R1bGVEZWZpbml0aW9uUmVxdWVzdCA9IF91c2VUcmFja2VkUHJvbWlzZTJbMF0sCiAgICAgIGZldGNoTW9kdWxlRGVmaW5pdGlvbiA9IF91c2VUcmFja2VkUHJvbWlzZTJbMV07CgogIHZhciBfdXNlVHJhY2tlZFByb21pc2UzID0gKDAsIF91c2VfdHJhY2tlZF9wcm9taXNlLnVzZVRyYWNrZWRQcm9taXNlKSh7CiAgICBjYW5jZWxQcmV2aW91c09uOiAncmVzb2x1dGlvbicsCiAgICBjcmVhdGVQcm9taXNlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfY3JlYXRlUHJvbWlzZTIgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGlzcGF0Y2hNb2R1bGVTdGF0dXMoewogICAgICAgICAgICAgICAgICB0eXBlOiAnZmV0Y2hpbmdKb2JTdGF0dXNlcycKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZURlc2NyaXB0b3IuZ2V0Sm9iU3VtbWFyeShzcGFjZUlkLCBzb3VyY2VJZCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIuc2VudCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVByb21pc2UoKSB7CiAgICAgICAgcmV0dXJuIF9jcmVhdGVQcm9taXNlMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gY3JlYXRlUHJvbWlzZTsKICAgIH0oKSwKICAgIG9uUmVzb2x2ZTogZnVuY3Rpb24gb25SZXNvbHZlKGpvYlJlc3BvbnNlKSB7CiAgICAgIGRpc3BhdGNoTW9kdWxlU3RhdHVzKHsKICAgICAgICB0eXBlOiAnZmV0Y2hlZEpvYlN0YXR1c2VzJywKICAgICAgICBwYXlsb2FkOiBqb2JSZXNwb25zZSwKICAgICAgICBzcGFjZUlkOiBzcGFjZUlkLAogICAgICAgIHNvdXJjZUlkOiBzb3VyY2VJZAogICAgICB9KTsKICAgIH0sCiAgICBvblJlamVjdDogZnVuY3Rpb24gb25SZWplY3QoKSB7CiAgICAgIGRpc3BhdGNoTW9kdWxlU3RhdHVzKHsKICAgICAgICB0eXBlOiAnZmFpbGVkRmV0Y2hpbmdKb2JTdGF0dXNlcycKICAgICAgfSk7CiAgICB9CiAgfSwgW3NwYWNlSWQsIHNvdXJjZUlkXSksCiAgICAgIF91c2VUcmFja2VkUHJvbWlzZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlVHJhY2tlZFByb21pc2UzLCAyKSwKICAgICAgZmV0Y2hKb2JTdGF0dXNSZXF1ZXN0ID0gX3VzZVRyYWNrZWRQcm9taXNlNFswXSwKICAgICAgZmV0Y2hKb2JTdGF0dXMgPSBfdXNlVHJhY2tlZFByb21pc2U0WzFdOwoKICB2YXIgaXNMb2FkaW5nTW9kdWxlU3RhdHVzID0gKDAsIF9yZWFjdC51c2VNZW1vKShmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gZmV0Y2hKb2JTdGF0dXNSZXF1ZXN0LnN0YXRlID09PSAncGVuZGluZycgfHwgZmV0Y2hNb2R1bGVEZWZpbml0aW9uUmVxdWVzdC5zdGF0ZSA9PT0gJ3BlbmRpbmcnOwogIH0sIFtmZXRjaEpvYlN0YXR1c1JlcXVlc3Quc3RhdGUsIGZldGNoTW9kdWxlRGVmaW5pdGlvblJlcXVlc3Quc3RhdGVdKTsKCiAgdmFyIF91c2VUcmFja2VkUHJvbWlzZTUgPSAoMCwgX3VzZV90cmFja2VkX3Byb21pc2UudXNlVHJhY2tlZFByb21pc2UpKHsKICAgIGNhbmNlbFByZXZpb3VzT246ICdyZXNvbHV0aW9uJywKICAgIGNyZWF0ZVByb21pc2U6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9jcmVhdGVQcm9taXNlMyA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKHNlbGVjdGVkSW5kaWNlcywgc3RhcnQsIGVuZCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkaXNwYXRjaE1vZHVsZVN0YXR1cyh7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdGFydGVkU2V0dXAnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBtb2R1bGVEZXNjcmlwdG9yLnNldFVwTW9kdWxlKHN0YXJ0LCBlbmQsIHsKICAgICAgICAgICAgICAgICAgaW5kaWNlczogc2VsZWN0ZWRJbmRpY2VzLAogICAgICAgICAgICAgICAgICBzb3VyY2VJZDogc291cmNlSWQsCiAgICAgICAgICAgICAgICAgIHNwYWNlSWQ6IHNwYWNlSWQsCiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcEZpZWxkOiB0aW1lc3RhbXBGaWVsZAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDMuc2VudCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVByb21pc2UoX3gsIF94MiwgX3gzKSB7CiAgICAgICAgcmV0dXJuIF9jcmVhdGVQcm9taXNlMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gY3JlYXRlUHJvbWlzZTsKICAgIH0oKSwKICAgIG9uUmVzb2x2ZTogZnVuY3Rpb24gb25SZXNvbHZlKF9yZWYyKSB7CiAgICAgIHZhciBkYXRhZmVlZHMgPSBfcmVmMi5kYXRhZmVlZHMsCiAgICAgICAgICBqb2JzID0gX3JlZjIuam9iczsKICAgICAgZGlzcGF0Y2hNb2R1bGVTdGF0dXMoewogICAgICAgIHR5cGU6ICdmaW5pc2hlZFNldHVwJywKICAgICAgICBkYXRhZmVlZHM6IGRhdGFmZWVkcywKICAgICAgICBqb2JzOiBqb2JzLAogICAgICAgIHNwYWNlSWQ6IHNwYWNlSWQsCiAgICAgICAgc291cmNlSWQ6IHNvdXJjZUlkCiAgICAgIH0pOwogICAgfSwKICAgIG9uUmVqZWN0OiBmdW5jdGlvbiBvblJlamVjdCgpIHsKICAgICAgZGlzcGF0Y2hNb2R1bGVTdGF0dXMoewogICAgICAgIHR5cGU6ICdmYWlsZWRTZXR1cCcKICAgICAgfSk7CiAgICB9CiAgfSwgW21vZHVsZURlc2NyaXB0b3Iuc2V0VXBNb2R1bGUsIHNwYWNlSWQsIHNvdXJjZUlkLCB0aW1lc3RhbXBGaWVsZF0pLAogICAgICBfdXNlVHJhY2tlZFByb21pc2U2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVRyYWNrZWRQcm9taXNlNSwgMiksCiAgICAgIHNldFVwTW9kdWxlID0gX3VzZVRyYWNrZWRQcm9taXNlNlsxXTsKCiAgdmFyIF91c2VUcmFja2VkUHJvbWlzZTcgPSAoMCwgX3VzZV90cmFja2VkX3Byb21pc2UudXNlVHJhY2tlZFByb21pc2UpKHsKICAgIGNhbmNlbFByZXZpb3VzT246ICdyZXNvbHV0aW9uJywKICAgIGNyZWF0ZVByb21pc2U6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9jcmVhdGVQcm9taXNlNCA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gbW9kdWxlRGVzY3JpcHRvci5jbGVhblVwTW9kdWxlKHNwYWNlSWQsIHNvdXJjZUlkKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0NC5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gY3JlYXRlUHJvbWlzZSgpIHsKICAgICAgICByZXR1cm4gX2NyZWF0ZVByb21pc2U0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjcmVhdGVQcm9taXNlOwogICAgfSgpCiAgfSwgW3NwYWNlSWQsIHNvdXJjZUlkXSksCiAgICAgIF91c2VUcmFja2VkUHJvbWlzZTggPSBfc2xpY2VkVG9BcnJheShfdXNlVHJhY2tlZFByb21pc2U3LCAyKSwKICAgICAgY2xlYW5VcE1vZHVsZVJlcXVlc3QgPSBfdXNlVHJhY2tlZFByb21pc2U4WzBdLAogICAgICBjbGVhblVwTW9kdWxlID0gX3VzZVRyYWNrZWRQcm9taXNlOFsxXTsKCiAgdmFyIGlzQ2xlYW5pbmdVcCA9ICgwLCBfcmVhY3QudXNlTWVtbykoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGNsZWFuVXBNb2R1bGVSZXF1ZXN0LnN0YXRlID09PSAncGVuZGluZyc7CiAgfSwgW2NsZWFuVXBNb2R1bGVSZXF1ZXN0LnN0YXRlXSk7CiAgdmFyIGNsZWFuVXBBbmRTZXRVcE1vZHVsZSA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uIChzZWxlY3RlZEluZGljZXMsIHN0YXJ0LCBlbmQpIHsKICAgIGRpc3BhdGNoTW9kdWxlU3RhdHVzKHsKICAgICAgdHlwZTogJ3N0YXJ0ZWRTZXR1cCcKICAgIH0pOwogICAgY2xlYW5VcE1vZHVsZSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICBzZXRVcE1vZHVsZShzZWxlY3RlZEluZGljZXMsIHN0YXJ0LCBlbmQpOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICBkaXNwYXRjaE1vZHVsZVN0YXR1cyh7CiAgICAgICAgdHlwZTogJ2ZhaWxlZFNldHVwJwogICAgICB9KTsKICAgIH0pOwogIH0sIFtjbGVhblVwTW9kdWxlLCBkaXNwYXRjaE1vZHVsZVN0YXR1cywgc2V0VXBNb2R1bGVdKTsKICB2YXIgdmlld1NldHVwRm9yUmVjb25maWd1cmF0aW9uID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKCkgewogICAgZGlzcGF0Y2hNb2R1bGVTdGF0dXMoewogICAgICB0eXBlOiAncmVxdWVzdGVkSm9iQ29uZmlndXJhdGlvblVwZGF0ZScKICAgIH0pOwogIH0sIFtkaXNwYXRjaE1vZHVsZVN0YXR1c10pOwogIHZhciB2aWV3U2V0dXBGb3JVcGRhdGUgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAoKSB7CiAgICBkaXNwYXRjaE1vZHVsZVN0YXR1cyh7CiAgICAgIHR5cGU6ICdyZXF1ZXN0ZWRKb2JEZWZpbml0aW9uVXBkYXRlJwogICAgfSk7CiAgfSwgW2Rpc3BhdGNoTW9kdWxlU3RhdHVzXSk7CiAgdmFyIHZpZXdSZXN1bHRzID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKCkgewogICAgZGlzcGF0Y2hNb2R1bGVTdGF0dXMoewogICAgICB0eXBlOiAndmlld2VkUmVzdWx0cycKICAgIH0pOwogIH0sIFtkaXNwYXRjaE1vZHVsZVN0YXR1c10pOwogIHZhciBqb2JJZHMgPSAoMCwgX3JlYWN0LnVzZU1lbW8pKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBtb2R1bGVEZXNjcmlwdG9yLmdldEpvYklkcyhzcGFjZUlkLCBzb3VyY2VJZCk7CiAgfSwgW21vZHVsZURlc2NyaXB0b3IsIHNwYWNlSWQsIHNvdXJjZUlkXSk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIGRpc3BhdGNoTW9kdWxlU3RhdHVzKHsKICAgICAgdHlwZTogJ3VwZGF0ZWRTb3VyY2VDb25maWd1cmF0aW9uJywKICAgICAgc3BhY2VJZDogc3BhY2VJZCwKICAgICAgc291cmNlSWQ6IHNvdXJjZUlkLAogICAgICBzb3VyY2VDb25maWd1cmF0aW9uOiB7CiAgICAgICAgdGltZXN0YW1wRmllbGQ6IHRpbWVzdGFtcEZpZWxkLAogICAgICAgIGluZGV4UGF0dGVybjogaW5kaWNlcy5qb2luKCcsJyksCiAgICAgICAgYnVja2V0U3BhbjogbW9kdWxlRGVzY3JpcHRvci5idWNrZXRTcGFuCiAgICAgIH0KICAgIH0pOwogIH0sIFtkaXNwYXRjaE1vZHVsZVN0YXR1cywgaW5kaWNlcywgbW9kdWxlRGVzY3JpcHRvci5idWNrZXRTcGFuLCBzb3VyY2VDb25maWd1cmF0aW9uLCBzb3VyY2VJZCwgc3BhY2VJZCwgdGltZXN0YW1wRmllbGRdKTsKICByZXR1cm4gewogICAgY2xlYW5VcEFuZFNldFVwTW9kdWxlOiBjbGVhblVwQW5kU2V0VXBNb2R1bGUsCiAgICBjbGVhblVwTW9kdWxlOiBjbGVhblVwTW9kdWxlLAogICAgZmV0Y2hKb2JTdGF0dXM6IGZldGNoSm9iU3RhdHVzLAogICAgZmV0Y2hNb2R1bGVEZWZpbml0aW9uOiBmZXRjaE1vZHVsZURlZmluaXRpb24sCiAgICBpc0NsZWFuaW5nVXA6IGlzQ2xlYW5pbmdVcCwKICAgIGlzTG9hZGluZ01vZHVsZVN0YXR1czogaXNMb2FkaW5nTW9kdWxlU3RhdHVzLAogICAgam9iSWRzOiBqb2JJZHMsCiAgICBqb2JTdGF0dXM6IG1vZHVsZVN0YXR1cy5qb2JTdGF0dXMsCiAgICBsYXN0U2V0dXBFcnJvck1lc3NhZ2VzOiBtb2R1bGVTdGF0dXMubGFzdFNldHVwRXJyb3JNZXNzYWdlcywKICAgIG1vZHVsZURlc2NyaXB0b3I6IG1vZHVsZURlc2NyaXB0b3IsCiAgICBzZXRVcE1vZHVsZTogc2V0VXBNb2R1bGUsCiAgICBzZXR1cFN0YXR1czogbW9kdWxlU3RhdHVzLnNldHVwU3RhdHVzLAogICAgc291cmNlQ29uZmlndXJhdGlvbjogc291cmNlQ29uZmlndXJhdGlvbiwKICAgIHZpZXdSZXN1bHRzOiB2aWV3UmVzdWx0cywKICAgIHZpZXdTZXR1cEZvclJlY29uZmlndXJhdGlvbjogdmlld1NldHVwRm9yUmVjb25maWd1cmF0aW9uLAogICAgdmlld1NldHVwRm9yVXBkYXRlOiB2aWV3U2V0dXBGb3JVcGRhdGUKICB9Owp9OwoKZXhwb3J0cy51c2VMb2dBbmFseXNpc01vZHVsZSA9IHVzZUxvZ0FuYWx5c2lzTW9kdWxlOw=="},null]}