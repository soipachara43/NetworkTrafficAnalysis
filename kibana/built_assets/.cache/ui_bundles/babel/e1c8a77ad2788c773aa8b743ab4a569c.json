{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/components/search_bar/index.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/components/search_bar/index.js","mtime":1589249553128},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlNpZW1TZWFyY2hCYXIgPSBleHBvcnRzLmNvbm5lY3RvciA9IGV4cG9ydHMuZGlzcGF0Y2hVcGRhdGVTZWFyY2ggPSB2b2lkIDA7Cgp2YXIgX2ZwID0gcmVxdWlyZSgibG9kYXNoL2ZwIik7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3JlYWN0UmVkdXggPSByZXF1aXJlKCJyZWFjdC1yZWR1eCIpOwoKdmFyIF9yeGpzID0gcmVxdWlyZSgicnhqcyIpOwoKdmFyIF9zdHlsZWRDb21wb25lbnRzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJzdHlsZWQtY29tcG9uZW50cyIpKTsKCnZhciBfZmFzdERlZXBFcXVhbCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiZmFzdC1kZWVwLWVxdWFsIikpOwoKdmFyIF9pbnB1dHMgPSByZXF1aXJlKCIuLi8uLi9zdG9yZS9pbnB1dHMiKTsKCnZhciBfc3VwZXJfZGF0ZV9waWNrZXIgPSByZXF1aXJlKCIuLi9zdXBlcl9kYXRlX3BpY2tlciIpOwoKdmFyIF9zZWxlY3RvcnMgPSByZXF1aXJlKCIuL3NlbGVjdG9ycyIpOwoKdmFyIF9hY3Rpb25zID0gcmVxdWlyZSgiLi4vLi4vc3RvcmUvYWN0aW9ucyIpOwoKdmFyIF9raWJhbmEgPSByZXF1aXJlKCIuLi8uLi9saWIva2liYW5hIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Cgp2YXIgU2VhcmNoQmFyQ29udGFpbmVyID0gX3N0eWxlZENvbXBvbmVudHMuZGVmYXVsdC5kaXYud2l0aENvbmZpZyh7CiAgZGlzcGxheU5hbWU6ICJTZWFyY2hCYXJDb250YWluZXIiLAogIGNvbXBvbmVudElkOiAic2oxMjVkLTAiCn0pKFsiLmdsb2JhbFF1ZXJ5QmFye3BhZGRpbmc6MHB4O30iXSk7Cgp2YXIgU2VhcmNoQmFyQ29tcG9uZW50ID0gKDAsIF9yZWFjdC5tZW1vKShmdW5jdGlvbiAoX3JlZikgewogIHZhciBlbmQgPSBfcmVmLmVuZCwKICAgICAgZmlsdGVyUXVlcnkgPSBfcmVmLmZpbHRlclF1ZXJ5LAogICAgICBmcm9tU3RyID0gX3JlZi5mcm9tU3RyLAogICAgICBpZCA9IF9yZWYuaWQsCiAgICAgIGluZGV4UGF0dGVybiA9IF9yZWYuaW5kZXhQYXR0ZXJuLAogICAgICBfcmVmJGlzTG9hZGluZyA9IF9yZWYuaXNMb2FkaW5nLAogICAgICBpc0xvYWRpbmcgPSBfcmVmJGlzTG9hZGluZyA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmJGlzTG9hZGluZywKICAgICAgcXVlcmllcyA9IF9yZWYucXVlcmllcywKICAgICAgc2F2ZWRRdWVyeSA9IF9yZWYuc2F2ZWRRdWVyeSwKICAgICAgc2V0U2F2ZWRRdWVyeSA9IF9yZWYuc2V0U2F2ZWRRdWVyeSwKICAgICAgc2V0U2VhcmNoQmFyRmlsdGVyID0gX3JlZi5zZXRTZWFyY2hCYXJGaWx0ZXIsCiAgICAgIHN0YXJ0ID0gX3JlZi5zdGFydCwKICAgICAgdG9TdHIgPSBfcmVmLnRvU3RyLAogICAgICB1cGRhdGVTZWFyY2ggPSBfcmVmLnVwZGF0ZVNlYXJjaCwKICAgICAgZGF0YVRlc3RTdWJqID0gX3JlZi5kYXRhVGVzdFN1Ymo7CiAgdmFyIGRhdGEgPSAoMCwgX2tpYmFuYS51c2VLaWJhbmEpKCkuc2VydmljZXMuZGF0YTsKICB2YXIgX2RhdGEkcXVlcnkgPSBkYXRhLnF1ZXJ5LAogICAgICB0aW1lZmlsdGVyID0gX2RhdGEkcXVlcnkudGltZWZpbHRlci50aW1lZmlsdGVyLAogICAgICBmaWx0ZXJNYW5hZ2VyID0gX2RhdGEkcXVlcnkuZmlsdGVyTWFuYWdlcjsKCiAgaWYgKGZyb21TdHIgIT0gbnVsbCAmJiB0b1N0ciAhPSBudWxsKSB7CiAgICB0aW1lZmlsdGVyLnNldFRpbWUoewogICAgICBmcm9tOiBmcm9tU3RyLAogICAgICB0bzogdG9TdHIKICAgIH0pOwogIH0gZWxzZSBpZiAoc3RhcnQgIT0gbnVsbCAmJiBlbmQgIT0gbnVsbCkgewogICAgdGltZWZpbHRlci5zZXRUaW1lKHsKICAgICAgZnJvbTogbmV3IERhdGUoc3RhcnQpLnRvSVNPU3RyaW5nKCksCiAgICAgIHRvOiBuZXcgRGF0ZShlbmQpLnRvSVNPU3RyaW5nKCkKICAgIH0pOwogIH0KCiAgdmFyIG9uUXVlcnlTdWJtaXQgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAocGF5bG9hZCkgewogICAgdmFyIGlzUXVpY2tTZWxlY3Rpb24gPSBwYXlsb2FkLmRhdGVSYW5nZS5mcm9tLmluY2x1ZGVzKCdub3cnKSB8fCBwYXlsb2FkLmRhdGVSYW5nZS50by5pbmNsdWRlcygnbm93Jyk7CiAgICB2YXIgdXBkYXRlU2VhcmNoQmFyID0gewogICAgICBpZDogaWQsCiAgICAgIGVuZDogdG9TdHIgIT0gbnVsbCA/IHRvU3RyIDogbmV3IERhdGUoZW5kKS50b0lTT1N0cmluZygpLAogICAgICBzdGFydDogZnJvbVN0ciAhPSBudWxsID8gZnJvbVN0ciA6IG5ldyBEYXRlKHN0YXJ0KS50b0lTT1N0cmluZygpLAogICAgICBpc0ludmFsaWQ6IGZhbHNlLAogICAgICBpc1F1aWNrU2VsZWN0aW9uOiBpc1F1aWNrU2VsZWN0aW9uLAogICAgICB1cGRhdGVUaW1lOiBmYWxzZSwKICAgICAgZmlsdGVyTWFuYWdlcjogZmlsdGVyTWFuYWdlcgogICAgfTsKICAgIHZhciBpc1N0YXRlVXBkYXRlZCA9IGZhbHNlOwoKICAgIGlmIChpc1F1aWNrU2VsZWN0aW9uICYmIChmcm9tU3RyICE9PSBwYXlsb2FkLmRhdGVSYW5nZS5mcm9tIHx8IHRvU3RyICE9PSBwYXlsb2FkLmRhdGVSYW5nZS50bykgfHwgIWlzUXVpY2tTZWxlY3Rpb24gJiYgKHN0YXJ0ICE9PSAoMCwgX3N1cGVyX2RhdGVfcGlja2VyLmZvcm1hdERhdGUpKHBheWxvYWQuZGF0ZVJhbmdlLmZyb20pIHx8IGVuZCAhPT0gKDAsIF9zdXBlcl9kYXRlX3BpY2tlci5mb3JtYXREYXRlKShwYXlsb2FkLmRhdGVSYW5nZS50bykpKSB7CiAgICAgIGlzU3RhdGVVcGRhdGVkID0gdHJ1ZTsKICAgICAgdXBkYXRlU2VhcmNoQmFyLnVwZGF0ZVRpbWUgPSB0cnVlOwogICAgICB1cGRhdGVTZWFyY2hCYXIuZW5kID0gcGF5bG9hZC5kYXRlUmFuZ2UudG87CiAgICAgIHVwZGF0ZVNlYXJjaEJhci5zdGFydCA9IHBheWxvYWQuZGF0ZVJhbmdlLmZyb207CiAgICB9CgogICAgaWYgKHBheWxvYWQucXVlcnkgIT0gbnVsbCAmJiAhKDAsIF9mYXN0RGVlcEVxdWFsLmRlZmF1bHQpKHBheWxvYWQucXVlcnksIGZpbHRlclF1ZXJ5KSkgewogICAgICBpc1N0YXRlVXBkYXRlZCA9IHRydWU7CiAgICAgIHVwZGF0ZVNlYXJjaEJhciA9ICgwLCBfZnAuc2V0KSgncXVlcnknLCBwYXlsb2FkLnF1ZXJ5LCB1cGRhdGVTZWFyY2hCYXIpOwogICAgfQoKICAgIGlmICghaXNTdGF0ZVVwZGF0ZWQpIHsKICAgICAgLy8gVGhhdCBtZWFuIHdlIGFyZSBkb2luZyBhIHJlZnJlc2ghCiAgICAgIGlmIChpc1F1aWNrU2VsZWN0aW9uKSB7CiAgICAgICAgdXBkYXRlU2VhcmNoQmFyLnVwZGF0ZVRpbWUgPSB0cnVlOwogICAgICAgIHVwZGF0ZVNlYXJjaEJhci5lbmQgPSBwYXlsb2FkLmRhdGVSYW5nZS50bzsKICAgICAgICB1cGRhdGVTZWFyY2hCYXIuc3RhcnQgPSBwYXlsb2FkLmRhdGVSYW5nZS5mcm9tOwogICAgICB9IGVsc2UgewogICAgICAgIHF1ZXJpZXMuZm9yRWFjaChmdW5jdGlvbiAocSkgewogICAgICAgICAgcmV0dXJuIHEucmVmZXRjaCAmJiBxLnJlZmV0Y2goKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHVwZGF0ZVNlYXJjaCh1cGRhdGVTZWFyY2hCYXIpOwogICAgfSwgMCk7CiAgfSwgW2lkLCBlbmQsIGZpbHRlclF1ZXJ5LCBmcm9tU3RyLCBxdWVyaWVzLCBzdGFydCwgdG9TdHJdKTsKICB2YXIgb25SZWZyZXNoID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgIGlmIChwYXlsb2FkLmRhdGVSYW5nZS5mcm9tLmluY2x1ZGVzKCdub3cnKSB8fCBwYXlsb2FkLmRhdGVSYW5nZS50by5pbmNsdWRlcygnbm93JykpIHsKICAgICAgdXBkYXRlU2VhcmNoKHsKICAgICAgICBpZDogaWQsCiAgICAgICAgZW5kOiBwYXlsb2FkLmRhdGVSYW5nZS50bywKICAgICAgICBzdGFydDogcGF5bG9hZC5kYXRlUmFuZ2UuZnJvbSwKICAgICAgICBpc0ludmFsaWQ6IGZhbHNlLAogICAgICAgIGlzUXVpY2tTZWxlY3Rpb246IHRydWUsCiAgICAgICAgdXBkYXRlVGltZTogdHJ1ZSwKICAgICAgICBmaWx0ZXJNYW5hZ2VyOiBmaWx0ZXJNYW5hZ2VyCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgcXVlcmllcy5mb3JFYWNoKGZ1bmN0aW9uIChxKSB7CiAgICAgICAgcmV0dXJuIHEucmVmZXRjaCAmJiBxLnJlZmV0Y2goKTsKICAgICAgfSk7CiAgICB9CiAgfSwgW2lkLCBxdWVyaWVzLCBmaWx0ZXJNYW5hZ2VyXSk7CiAgdmFyIG9uU2F2ZWQgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAobmV3U2F2ZWRRdWVyeSkgewogICAgc2V0U2F2ZWRRdWVyeSh7CiAgICAgIGlkOiBpZCwKICAgICAgc2F2ZWRRdWVyeTogbmV3U2F2ZWRRdWVyeQogICAgfSk7CiAgfSwgW2lkXSk7CiAgdmFyIG9uU2F2ZWRRdWVyeVVwZGF0ZWQgPSAoMCwgX3JlYWN0LnVzZUNhbGxiYWNrKShmdW5jdGlvbiAoc2F2ZWRRdWVyeVVwZGF0ZWQpIHsKICAgIHZhciBpc1F1aWNrU2VsZWN0aW9uID0gc2F2ZWRRdWVyeVVwZGF0ZWQuYXR0cmlidXRlcy50aW1lZmlsdGVyID8gc2F2ZWRRdWVyeVVwZGF0ZWQuYXR0cmlidXRlcy50aW1lZmlsdGVyLmZyb20uaW5jbHVkZXMoJ25vdycpIHx8IHNhdmVkUXVlcnlVcGRhdGVkLmF0dHJpYnV0ZXMudGltZWZpbHRlci50by5pbmNsdWRlcygnbm93JykgOiBmYWxzZTsKICAgIHZhciB1cGRhdGVTZWFyY2hCYXIgPSB7CiAgICAgIGlkOiBpZCwKICAgICAgZmlsdGVyczogc2F2ZWRRdWVyeVVwZGF0ZWQuYXR0cmlidXRlcy5maWx0ZXJzIHx8IFtdLAogICAgICBlbmQ6IHRvU3RyICE9IG51bGwgPyB0b1N0ciA6IG5ldyBEYXRlKGVuZCkudG9JU09TdHJpbmcoKSwKICAgICAgc3RhcnQ6IGZyb21TdHIgIT0gbnVsbCA/IGZyb21TdHIgOiBuZXcgRGF0ZShzdGFydCkudG9JU09TdHJpbmcoKSwKICAgICAgaXNJbnZhbGlkOiBmYWxzZSwKICAgICAgaXNRdWlja1NlbGVjdGlvbjogaXNRdWlja1NlbGVjdGlvbiwKICAgICAgdXBkYXRlVGltZTogZmFsc2UsCiAgICAgIGZpbHRlck1hbmFnZXI6IGZpbHRlck1hbmFnZXIKICAgIH07CgogICAgaWYgKHNhdmVkUXVlcnlVcGRhdGVkLmF0dHJpYnV0ZXMudGltZWZpbHRlcikgewogICAgICB1cGRhdGVTZWFyY2hCYXIuZW5kID0gc2F2ZWRRdWVyeVVwZGF0ZWQuYXR0cmlidXRlcy50aW1lZmlsdGVyID8gc2F2ZWRRdWVyeVVwZGF0ZWQuYXR0cmlidXRlcy50aW1lZmlsdGVyLnRvIDogdXBkYXRlU2VhcmNoQmFyLmVuZDsKICAgICAgdXBkYXRlU2VhcmNoQmFyLnN0YXJ0ID0gc2F2ZWRRdWVyeVVwZGF0ZWQuYXR0cmlidXRlcy50aW1lZmlsdGVyID8gc2F2ZWRRdWVyeVVwZGF0ZWQuYXR0cmlidXRlcy50aW1lZmlsdGVyLmZyb20gOiB1cGRhdGVTZWFyY2hCYXIuc3RhcnQ7CiAgICAgIHVwZGF0ZVNlYXJjaEJhci51cGRhdGVUaW1lID0gdHJ1ZTsKICAgIH0KCiAgICB1cGRhdGVTZWFyY2hCYXIgPSAoMCwgX2ZwLnNldCkoJ3F1ZXJ5Jywgc2F2ZWRRdWVyeVVwZGF0ZWQuYXR0cmlidXRlcy5xdWVyeSwgdXBkYXRlU2VhcmNoQmFyKTsKICAgIHVwZGF0ZVNlYXJjaEJhciA9ICgwLCBfZnAuc2V0KSgnc2F2ZWRRdWVyeScsIHNhdmVkUXVlcnlVcGRhdGVkLCB1cGRhdGVTZWFyY2hCYXIpOwogICAgdXBkYXRlU2VhcmNoKHVwZGF0ZVNlYXJjaEJhcik7CiAgfSwgW2lkLCBlbmQsIGZyb21TdHIsIHN0YXJ0LCB0b1N0cl0pOwogIHZhciBvbkNsZWFyU2F2ZWRRdWVyeSA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uICgpIHsKICAgIGlmIChzYXZlZFF1ZXJ5ICE9IG51bGwpIHsKICAgICAgdXBkYXRlU2VhcmNoKHsKICAgICAgICBpZDogaWQsCiAgICAgICAgZmlsdGVyczogW10sCiAgICAgICAgZW5kOiB0b1N0ciAhPSBudWxsID8gdG9TdHIgOiBuZXcgRGF0ZShlbmQpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgc3RhcnQ6IGZyb21TdHIgIT0gbnVsbCA/IGZyb21TdHIgOiBuZXcgRGF0ZShzdGFydCkudG9JU09TdHJpbmcoKSwKICAgICAgICBpc0ludmFsaWQ6IGZhbHNlLAogICAgICAgIGlzUXVpY2tTZWxlY3Rpb246IGZhbHNlLAogICAgICAgIHVwZGF0ZVRpbWU6IGZhbHNlLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBxdWVyeTogJycsCiAgICAgICAgICBsYW5ndWFnZTogc2F2ZWRRdWVyeS5hdHRyaWJ1dGVzLnF1ZXJ5Lmxhbmd1YWdlCiAgICAgICAgfSwKICAgICAgICByZXNldFNhdmVkUXVlcnk6IHRydWUsCiAgICAgICAgc2F2ZWRRdWVyeTogdW5kZWZpbmVkLAogICAgICAgIGZpbHRlck1hbmFnZXI6IGZpbHRlck1hbmFnZXIKICAgICAgfSk7CiAgICB9CiAgfSwgW2lkLCBlbmQsIGZpbHRlck1hbmFnZXIsIGZyb21TdHIsIHN0YXJ0LCB0b1N0ciwgc2F2ZWRRdWVyeV0pOwogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICB2YXIgaXNTdWJzY3JpYmVkID0gdHJ1ZTsKICAgIHZhciBzdWJzY3JpcHRpb25zID0gbmV3IF9yeGpzLlN1YnNjcmlwdGlvbigpOwogICAgc3Vic2NyaXB0aW9ucy5hZGQoZmlsdGVyTWFuYWdlci5nZXRVcGRhdGVzJCgpLnN1YnNjcmliZSh7CiAgICAgIG5leHQ6IGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgICAgaWYgKGlzU3Vic2NyaWJlZCkgewogICAgICAgICAgc2V0U2VhcmNoQmFyRmlsdGVyKHsKICAgICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgICBmaWx0ZXJzOiBmaWx0ZXJNYW5hZ2VyLmdldEZpbHRlcnMoKQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KSk7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBpc1N1YnNjcmliZWQgPSBmYWxzZTsKICAgICAgc3Vic2NyaXB0aW9ucy51bnN1YnNjcmliZSgpOwogICAgfTsKICB9LCBbXSk7CiAgdmFyIGluZGV4UGF0dGVybnMgPSAoMCwgX3JlYWN0LnVzZU1lbW8pKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBbaW5kZXhQYXR0ZXJuXTsKICB9LCBbaW5kZXhQYXR0ZXJuXSk7CiAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoU2VhcmNoQmFyQ29udGFpbmVyLCB7CiAgICAiZGF0YS10ZXN0LXN1YmoiOiAiIi5jb25jYXQoaWQsICJEYXRlUGlja2VyIikKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KGRhdGEudWkuU2VhcmNoQmFyLCB7CiAgICBhcHBOYW1lOiAic2llbSIsCiAgICBpc0xvYWRpbmc6IGlzTG9hZGluZywKICAgIGluZGV4UGF0dGVybnM6IGluZGV4UGF0dGVybnMsCiAgICBxdWVyeTogZmlsdGVyUXVlcnksCiAgICBvbkNsZWFyU2F2ZWRRdWVyeTogb25DbGVhclNhdmVkUXVlcnksCiAgICBvblF1ZXJ5U3VibWl0OiBvblF1ZXJ5U3VibWl0LAogICAgb25SZWZyZXNoOiBvblJlZnJlc2gsCiAgICBvblNhdmVkOiBvblNhdmVkLAogICAgb25TYXZlZFF1ZXJ5VXBkYXRlZDogb25TYXZlZFF1ZXJ5VXBkYXRlZCwKICAgIHNhdmVkUXVlcnk6IHNhdmVkUXVlcnksCiAgICBzaG93RmlsdGVyQmFyOiB0cnVlLAogICAgc2hvd0RhdGVQaWNrZXI6IHRydWUsCiAgICBzaG93UXVlcnlCYXI6IHRydWUsCiAgICBzaG93UXVlcnlJbnB1dDogdHJ1ZSwKICAgIHNob3dTYXZlUXVlcnk6IHRydWUsCiAgICBkYXRhVGVzdFN1Ymo6IGRhdGFUZXN0U3ViagogIH0pKTsKfSk7Cgp2YXIgbWFrZU1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1ha2VNYXBTdGF0ZVRvUHJvcHMoKSB7CiAgdmFyIGdldEVuZFNlbGVjdG9yID0gKDAsIF9zZWxlY3RvcnMuZW5kU2VsZWN0b3IpKCk7CiAgdmFyIGdldEZyb21TdHJTZWxlY3RvciA9ICgwLCBfc2VsZWN0b3JzLmZyb21TdHJTZWxlY3RvcikoKTsKICB2YXIgZ2V0SXNMb2FkaW5nU2VsZWN0b3IgPSAoMCwgX3NlbGVjdG9ycy5pc0xvYWRpbmdTZWxlY3RvcikoKTsKICB2YXIgZ2V0S2luZFNlbGVjdG9yID0gKDAsIF9zZWxlY3RvcnMua2luZFNlbGVjdG9yKSgpOwogIHZhciBnZXRRdWVyaWVzU2VsZWN0b3IgPSAoMCwgX3NlbGVjdG9ycy5xdWVyaWVzU2VsZWN0b3IpKCk7CiAgdmFyIGdldFN0YXJ0U2VsZWN0b3IgPSAoMCwgX3NlbGVjdG9ycy5zdGFydFNlbGVjdG9yKSgpOwogIHZhciBnZXRUb1N0clNlbGVjdG9yID0gKDAsIF9zZWxlY3RvcnMudG9TdHJTZWxlY3RvcikoKTsKICB2YXIgZ2V0RmlsdGVyUXVlcnlTZWxlY3RvciA9ICgwLCBfc2VsZWN0b3JzLmZpbHRlclF1ZXJ5U2VsZWN0b3IpKCk7CiAgdmFyIGdldFNhdmVkUXVlcnlTZWxlY3RvciA9ICgwLCBfc2VsZWN0b3JzLnNhdmVkUXVlcnlTZWxlY3RvcikoKTsKICByZXR1cm4gZnVuY3Rpb24gKHN0YXRlLCBfcmVmMikgewogICAgdmFyIGlkID0gX3JlZjIuaWQ7CiAgICB2YXIgaW5wdXRzUmFuZ2UgPSAoMCwgX2ZwLmdldE9yKSh7fSwgImlucHV0cy4iLmNvbmNhdChpZCksIHN0YXRlKTsKICAgIHJldHVybiB7CiAgICAgIGVuZDogZ2V0RW5kU2VsZWN0b3IoaW5wdXRzUmFuZ2UpLAogICAgICBmcm9tU3RyOiBnZXRGcm9tU3RyU2VsZWN0b3IoaW5wdXRzUmFuZ2UpLAogICAgICBmaWx0ZXJRdWVyeTogZ2V0RmlsdGVyUXVlcnlTZWxlY3RvcihpbnB1dHNSYW5nZSksCiAgICAgIGlzTG9hZGluZzogZ2V0SXNMb2FkaW5nU2VsZWN0b3IoaW5wdXRzUmFuZ2UpLAogICAgICBraW5kOiBnZXRLaW5kU2VsZWN0b3IoaW5wdXRzUmFuZ2UpLAogICAgICBxdWVyaWVzOiBnZXRRdWVyaWVzU2VsZWN0b3IoaW5wdXRzUmFuZ2UpLAogICAgICBzYXZlZFF1ZXJ5OiBnZXRTYXZlZFF1ZXJ5U2VsZWN0b3IoaW5wdXRzUmFuZ2UpLAogICAgICBzdGFydDogZ2V0U3RhcnRTZWxlY3RvcihpbnB1dHNSYW5nZSksCiAgICAgIHRvU3RyOiBnZXRUb1N0clNlbGVjdG9yKGlucHV0c1JhbmdlKQogICAgfTsKICB9Owp9OwoKU2VhcmNoQmFyQ29tcG9uZW50LmRpc3BsYXlOYW1lID0gJ1NpZW1TZWFyY2hCYXInOwoKdmFyIGRpc3BhdGNoVXBkYXRlU2VhcmNoID0gZnVuY3Rpb24gZGlzcGF0Y2hVcGRhdGVTZWFyY2goZGlzcGF0Y2gpIHsKICByZXR1cm4gZnVuY3Rpb24gKF9yZWYzKSB7CiAgICB2YXIgZW5kID0gX3JlZjMuZW5kLAogICAgICAgIGZpbHRlcnMgPSBfcmVmMy5maWx0ZXJzLAogICAgICAgIGlkID0gX3JlZjMuaWQsCiAgICAgICAgaXNRdWlja1NlbGVjdGlvbiA9IF9yZWYzLmlzUXVpY2tTZWxlY3Rpb24sCiAgICAgICAgcXVlcnkgPSBfcmVmMy5xdWVyeSwKICAgICAgICByZXNldFNhdmVkUXVlcnkgPSBfcmVmMy5yZXNldFNhdmVkUXVlcnksCiAgICAgICAgc2F2ZWRRdWVyeSA9IF9yZWYzLnNhdmVkUXVlcnksCiAgICAgICAgc3RhcnQgPSBfcmVmMy5zdGFydCwKICAgICAgICB0aW1lbGluZUlkID0gX3JlZjMudGltZWxpbmVJZCwKICAgICAgICBmaWx0ZXJNYW5hZ2VyID0gX3JlZjMuZmlsdGVyTWFuYWdlciwKICAgICAgICBfcmVmMyR1cGRhdGVUaW1lID0gX3JlZjMudXBkYXRlVGltZSwKICAgICAgICB1cGRhdGVUaW1lID0gX3JlZjMkdXBkYXRlVGltZSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmMyR1cGRhdGVUaW1lOwoKICAgIGlmICh1cGRhdGVUaW1lKSB7CiAgICAgIHZhciBmcm9tRGF0ZSA9ICgwLCBfc3VwZXJfZGF0ZV9waWNrZXIuZm9ybWF0RGF0ZSkoc3RhcnQpOwogICAgICB2YXIgdG9EYXRlID0gKDAsIF9zdXBlcl9kYXRlX3BpY2tlci5mb3JtYXREYXRlKShlbmQsIHsKICAgICAgICByb3VuZFVwOiB0cnVlCiAgICAgIH0pOwoKICAgICAgaWYgKGlzUXVpY2tTZWxlY3Rpb24pIHsKICAgICAgICBkaXNwYXRjaChfaW5wdXRzLmlucHV0c0FjdGlvbnMuc2V0UmVsYXRpdmVSYW5nZURhdGVQaWNrZXIoewogICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgZnJvbVN0cjogc3RhcnQsCiAgICAgICAgICB0b1N0cjogZW5kLAogICAgICAgICAgZnJvbTogZnJvbURhdGUsCiAgICAgICAgICB0bzogdG9EYXRlCiAgICAgICAgfSkpOwogICAgICB9IGVsc2UgewogICAgICAgIHRvRGF0ZSA9ICgwLCBfc3VwZXJfZGF0ZV9waWNrZXIuZm9ybWF0RGF0ZSkoZW5kKTsKICAgICAgICBkaXNwYXRjaChfaW5wdXRzLmlucHV0c0FjdGlvbnMuc2V0QWJzb2x1dGVSYW5nZURhdGVQaWNrZXIoewogICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgZnJvbTogKDAsIF9zdXBlcl9kYXRlX3BpY2tlci5mb3JtYXREYXRlKShzdGFydCksCiAgICAgICAgICB0bzogKDAsIF9zdXBlcl9kYXRlX3BpY2tlci5mb3JtYXREYXRlKShlbmQpCiAgICAgICAgfSkpOwogICAgICB9CgogICAgICBpZiAodGltZWxpbmVJZCAhPSBudWxsKSB7CiAgICAgICAgZGlzcGF0Y2goX2FjdGlvbnMudGltZWxpbmVBY3Rpb25zLnVwZGF0ZVJhbmdlKHsKICAgICAgICAgIGlkOiB0aW1lbGluZUlkLAogICAgICAgICAgc3RhcnQ6IGZyb21EYXRlLAogICAgICAgICAgZW5kOiB0b0RhdGUKICAgICAgICB9KSk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAocXVlcnkgIT0gbnVsbCkgewogICAgICBkaXNwYXRjaChfaW5wdXRzLmlucHV0c0FjdGlvbnMuc2V0RmlsdGVyUXVlcnkoX29iamVjdFNwcmVhZCh7CiAgICAgICAgaWQ6IGlkCiAgICAgIH0sIHF1ZXJ5KSkpOwogICAgfQoKICAgIGlmIChmaWx0ZXJzICE9IG51bGwpIHsKICAgICAgZmlsdGVyTWFuYWdlci5zZXRGaWx0ZXJzKGZpbHRlcnMpOwogICAgfQoKICAgIGlmIChzYXZlZFF1ZXJ5ICE9IG51bGwgfHwgcmVzZXRTYXZlZFF1ZXJ5KSB7CiAgICAgIGRpc3BhdGNoKF9pbnB1dHMuaW5wdXRzQWN0aW9ucy5zZXRTYXZlZFF1ZXJ5KHsKICAgICAgICBpZDogaWQsCiAgICAgICAgc2F2ZWRRdWVyeTogc2F2ZWRRdWVyeQogICAgICB9KSk7CiAgICB9CgogICAgZGlzcGF0Y2goX2FjdGlvbnMuaG9zdHNBY3Rpb25zLnNldEhvc3RUYWJsZXNBY3RpdmVQYWdlVG9aZXJvKCkpOwogICAgZGlzcGF0Y2goX2FjdGlvbnMubmV0d29ya0FjdGlvbnMuc2V0TmV0d29ya1RhYmxlc0FjdGl2ZVBhZ2VUb1plcm8oKSk7CiAgfTsKfTsKCmV4cG9ydHMuZGlzcGF0Y2hVcGRhdGVTZWFyY2ggPSBkaXNwYXRjaFVwZGF0ZVNlYXJjaDsKCnZhciBtYXBEaXNwYXRjaFRvUHJvcHMgPSBmdW5jdGlvbiBtYXBEaXNwYXRjaFRvUHJvcHMoZGlzcGF0Y2gpIHsKICByZXR1cm4gewogICAgdXBkYXRlU2VhcmNoOiBkaXNwYXRjaFVwZGF0ZVNlYXJjaChkaXNwYXRjaCksCiAgICBzZXRTYXZlZFF1ZXJ5OiBmdW5jdGlvbiBzZXRTYXZlZFF1ZXJ5KF9yZWY0KSB7CiAgICAgIHZhciBpZCA9IF9yZWY0LmlkLAogICAgICAgICAgc2F2ZWRRdWVyeSA9IF9yZWY0LnNhdmVkUXVlcnk7CiAgICAgIHJldHVybiBkaXNwYXRjaChfaW5wdXRzLmlucHV0c0FjdGlvbnMuc2V0U2F2ZWRRdWVyeSh7CiAgICAgICAgaWQ6IGlkLAogICAgICAgIHNhdmVkUXVlcnk6IHNhdmVkUXVlcnkKICAgICAgfSkpOwogICAgfSwKICAgIHNldFNlYXJjaEJhckZpbHRlcjogZnVuY3Rpb24gc2V0U2VhcmNoQmFyRmlsdGVyKF9yZWY1KSB7CiAgICAgIHZhciBpZCA9IF9yZWY1LmlkLAogICAgICAgICAgZmlsdGVycyA9IF9yZWY1LmZpbHRlcnM7CiAgICAgIHJldHVybiBkaXNwYXRjaChfaW5wdXRzLmlucHV0c0FjdGlvbnMuc2V0U2VhcmNoQmFyRmlsdGVyKHsKICAgICAgICBpZDogaWQsCiAgICAgICAgZmlsdGVyczogZmlsdGVycwogICAgICB9KSk7CiAgICB9CiAgfTsKfTsKCnZhciBjb25uZWN0b3IgPSAoMCwgX3JlYWN0UmVkdXguY29ubmVjdCkobWFrZU1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKTsKZXhwb3J0cy5jb25uZWN0b3IgPSBjb25uZWN0b3I7CnZhciBTaWVtU2VhcmNoQmFyID0gY29ubmVjdG9yKFNlYXJjaEJhckNvbXBvbmVudCk7CmV4cG9ydHMuU2llbVNlYXJjaEJhciA9IFNpZW1TZWFyY2hCYXI7"},null]}