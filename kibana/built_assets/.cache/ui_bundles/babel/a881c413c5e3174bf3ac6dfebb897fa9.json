{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/timelion/public/directives/timelion_expression_input_helpers.js","dependencies":[{"path":"src/legacy/core_plugins/timelion/public/directives/timelion_expression_input_helpers.js","mtime":1589249549926},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnN1Z2dlc3QgPSBzdWdnZXN0OwpleHBvcnRzLmluc2VydEF0TG9jYXRpb24gPSBpbnNlcnRBdExvY2F0aW9uOwpleHBvcnRzLlN1Z2dlc3Rpb25zID0gZXhwb3J0cy5TVUdHRVNUSU9OX1RZUEUgPSB2b2lkIDA7Cgp2YXIgX2xvZGFzaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibG9kYXNoIikpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKdmFyIFNVR0dFU1RJT05fVFlQRSA9IHsKICBBUkdVTUVOVFM6ICdhcmd1bWVudHMnLAogIEFSR1VNRU5UX1ZBTFVFOiAnYXJndW1lbnRfdmFsdWUnLAogIEZVTkNUSU9OUzogJ2Z1bmN0aW9ucycKfTsKZXhwb3J0cy5TVUdHRVNUSU9OX1RZUEUgPSBTVUdHRVNUSU9OX1RZUEU7Cgp2YXIgU3VnZ2VzdGlvbnMgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBTdWdnZXN0aW9ucygpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdWdnZXN0aW9ucyk7CgogICAgdGhpcy5yZXNldCgpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFN1Z2dlc3Rpb25zLCBbewogICAga2V5OiAicmVzZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICB0aGlzLmluZGV4ID0gLTE7CiAgICAgIHRoaXMubGlzdCA9IFtdOwogICAgICB0aGlzLnR5cGUgPSBudWxsOwogICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogInNldExpc3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldExpc3QobGlzdCwgdHlwZSkgewogICAgICB0aGlzLmxpc3QgPSBsaXN0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICBpZiAoYS5uYW1lIDwgYi5uYW1lKSB7CiAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgfQoKICAgICAgICBpZiAoYS5uYW1lID4gYi5uYW1lKSB7CiAgICAgICAgICByZXR1cm4gMTsKICAgICAgICB9IC8vIG5hbWVzIG11c3QgYmUgZXF1YWwKCgogICAgICAgIHJldHVybiAwOwogICAgICB9KTsKICAgICAgdGhpcy50eXBlID0gdHlwZTsgLy8gT25seSB0cnkgdG8gcG9zaXRpb24gaW5kZXggaW5zaWRlIG9mIGxpc3QgcmFuZ2UsIHdoZW4gaXQgd2FzIGFscmVhZHkgZm9jdXNlZAogICAgICAvLyBiZWZvcmVoYW5kIChpLmUuIG5vdCAtMSkKCiAgICAgIGlmICh0aGlzLmluZGV4ID4gLTEpIHsKICAgICAgICAvLyBXZSBtYXkgZ2V0IGEgc2hvcnRlciBsaXN0IHRoYW4gdGhlIG9uZSB3ZSBoYXZlIG5vdywgc28gd2UgbmVlZCB0byBtYWtlIHN1cmUgb3VyIGluZGV4IGRvZXNuJ3QKICAgICAgICAvLyBmYWxsIG91dHNpZGUgb2YgdGhlIG5ldyBsaXN0J3MgcmFuZ2UuCiAgICAgICAgdGhpcy5pbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMuaW5kZXgsIHRoaXMubGlzdC5sZW5ndGggLSAxKSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRDb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q291bnQoKSB7CiAgICAgIHJldHVybiB0aGlzLmxpc3QubGVuZ3RoOwogICAgfQogIH0sIHsKICAgIGtleTogImlzRW1wdHkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzRW1wdHkoKSB7CiAgICAgIHJldHVybiB0aGlzLmxpc3QubGVuZ3RoID09PSAwOwogICAgfQogIH0sIHsKICAgIGtleTogInNob3ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNob3coKSB7CiAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoaWRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoaWRlKCkgewogICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogInN0ZXBGb3J3YXJkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdGVwRm9yd2FyZCgpIHsKICAgICAgaWYgKHRoaXMuaW5kZXggPiAwKSB7CiAgICAgICAgdGhpcy5pbmRleCAtPSAxOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic3RlcEJhY2t3YXJkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdGVwQmFja3dhcmQoKSB7CiAgICAgIGlmICh0aGlzLmluZGV4IDwgdGhpcy5saXN0Lmxlbmd0aCAtIDEpIHsKICAgICAgICB0aGlzLmluZGV4ICs9IDE7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBTdWdnZXN0aW9uczsKfSgpOwoKZXhwb3J0cy5TdWdnZXN0aW9ucyA9IFN1Z2dlc3Rpb25zOwoKZnVuY3Rpb24gaW5Mb2NhdGlvbihjdXJzb3JQb3NpdGlvbiwgbG9jYXRpb24pIHsKICByZXR1cm4gY3Vyc29yUG9zaXRpb24gPj0gbG9jYXRpb24ubWluICYmIGN1cnNvclBvc2l0aW9uIDw9IGxvY2F0aW9uLm1heDsKfQoKZnVuY3Rpb24gZ2V0QXJndW1lbnRzSGVscChmdW5jdGlvbkhlbHApIHsKICB2YXIgZnVuY3Rpb25BcmdzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBbXTsKCiAgaWYgKCFmdW5jdGlvbkhlbHApIHsKICAgIHJldHVybiBbXTsKICB9IC8vIERvIG5vdCBwcm92aWRlICdpbnB1dFNlcmllcycgYXMgYXJndW1lbnQgc3VnZ2VzdGlvbiBmb3IgY2hhaW5hYmxlIGZ1bmN0aW9ucwoKCiAgdmFyIGFyZ3NIZWxwID0gZnVuY3Rpb25IZWxwLmNoYWluYWJsZSA/IGZ1bmN0aW9uSGVscC5hcmdzLnNsaWNlKDEpIDogZnVuY3Rpb25IZWxwLmFyZ3Muc2xpY2UoMCk7IC8vIGlnbm9yZSBhcmd1bWVudHMgdGhhdCBhcmUgYWxyZWFkeSBwcm92aWRlZCBpbiBmdW5jdGlvbiBkZWNsYXJhdGlvbgoKICB2YXIgZnVuY3Rpb25BcmdOYW1lcyA9IGZ1bmN0aW9uQXJncy5tYXAoZnVuY3Rpb24gKGFyZykgewogICAgcmV0dXJuIGFyZy5uYW1lOwogIH0pOwogIHJldHVybiBhcmdzSGVscC5maWx0ZXIoZnVuY3Rpb24gKGFyZykgewogICAgcmV0dXJuICFmdW5jdGlvbkFyZ05hbWVzLmluY2x1ZGVzKGFyZy5uYW1lKTsKICB9KTsKfQoKZnVuY3Rpb24gZXh0cmFjdFN1Z2dlc3Rpb25zRnJvbVBhcnNlZFJlc3VsdChfeCwgX3gyLCBfeDMsIF94NCkgewogIHJldHVybiBfZXh0cmFjdFN1Z2dlc3Rpb25zRnJvbVBhcnNlZFJlc3VsdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfZXh0cmFjdFN1Z2dlc3Rpb25zRnJvbVBhcnNlZFJlc3VsdCgpIHsKICBfZXh0cmFjdFN1Z2dlc3Rpb25zRnJvbVBhcnNlZFJlc3VsdCA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlc3VsdCwgY3Vyc29yUG9zaXRpb24sIGZ1bmN0aW9uTGlzdCwgYXJnVmFsdWVTdWdnZXN0aW9ucykgewogICAgdmFyIGFjdGl2ZUZ1bmMsIGZ1bmN0aW9uSGVscCwgb3BlblBhcmVuLCBhY3RpdmVBcmcsIGZ1bmN0aW9uTmFtZSwgZnVuY3Rpb25BcmdzLCBhcmdOYW1lLCBwYXJ0aWFsSW5wdXQsIHZhbHVlU3VnZ2VzdGlvbnMsIF9mdW5jdGlvbkhlbHAkYXJncyRmaSwgc3RhdGljU3VnZ2VzdGlvbnMsIGFyZ3NIZWxwLCBhcmd1bWVudFN1Z2dlc3Rpb25zLCBsb2NhdGlvbjsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGFjdGl2ZUZ1bmMgPSByZXN1bHQuZnVuY3Rpb25zLmZpbmQoZnVuY3Rpb24gKGZ1bmMpIHsKICAgICAgICAgICAgICByZXR1cm4gY3Vyc29yUG9zaXRpb24gPj0gZnVuYy5sb2NhdGlvbi5taW4gJiYgY3Vyc29yUG9zaXRpb24gPCBmdW5jLmxvY2F0aW9uLm1heDsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAoYWN0aXZlRnVuYykgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGZ1bmN0aW9uSGVscCA9IGZ1bmN0aW9uTGlzdC5maW5kKGZ1bmN0aW9uIChmdW5jKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmMubmFtZSA9PT0gYWN0aXZlRnVuYy5mdW5jdGlvbjsKICAgICAgICAgICAgfSk7IC8vIHJldHVybiBmdW5jdGlvbiBzdWdnZXN0aW9uIHdoZW4gY3Vyc29yIGlzIG91dHNpZGUgb2YgcGFyZW50aGVzZXMKICAgICAgICAgICAgLy8gbG9jYXRpb24gcmFuZ2UgaW5jbHVkZXMgJy4nLCBmdW5jdGlvbiBuYW1lLCBhbmQgJygnLgoKICAgICAgICAgICAgb3BlblBhcmVuID0gYWN0aXZlRnVuYy5sb2NhdGlvbi5taW4gKyBhY3RpdmVGdW5jLmZ1bmN0aW9uLmxlbmd0aCArIDI7CgogICAgICAgICAgICBpZiAoIShjdXJzb3JQb3NpdGlvbiA8IG9wZW5QYXJlbikpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgIGxpc3Q6IFtmdW5jdGlvbkhlbHBdLAogICAgICAgICAgICAgIGxvY2F0aW9uOiBhY3RpdmVGdW5jLmxvY2F0aW9uLAogICAgICAgICAgICAgIHR5cGU6IFNVR0dFU1RJT05fVFlQRS5GVU5DVElPTlMKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAvLyByZXR1cm4gYXJndW1lbnQgdmFsdWUgc3VnZ2VzdGlvbnMgd2hlbiBjdXJzb3IgaXMgaW5zaWRlIGFyZ3VtZW50IHZhbHVlCiAgICAgICAgICAgIGFjdGl2ZUFyZyA9IGFjdGl2ZUZ1bmMuYXJndW1lbnRzLmZpbmQoZnVuY3Rpb24gKGFyZ3VtZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGluTG9jYXRpb24oY3Vyc29yUG9zaXRpb24sIGFyZ3VtZW50LmxvY2F0aW9uKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAoIShhY3RpdmVBcmcgJiYgYWN0aXZlQXJnLnR5cGUgPT09ICduYW1lZEFyZycgJiYgaW5Mb2NhdGlvbihjdXJzb3JQb3NpdGlvbiwgYWN0aXZlQXJnLnZhbHVlLmxvY2F0aW9uKSkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uTmFtZSA9IGFjdGl2ZUZ1bmMuZnVuY3Rpb24sIGZ1bmN0aW9uQXJncyA9IGFjdGl2ZUZ1bmMuYXJndW1lbnRzOwogICAgICAgICAgICBhcmdOYW1lID0gYWN0aXZlQXJnLm5hbWUsIHBhcnRpYWxJbnB1dCA9IGFjdGl2ZUFyZy52YWx1ZS50ZXh0OwoKICAgICAgICAgICAgaWYgKCFhcmdWYWx1ZVN1Z2dlc3Rpb25zLmhhc0R5bmFtaWNTdWdnZXN0aW9uc0ZvckFyZ3VtZW50KGZ1bmN0aW9uTmFtZSwgYXJnTmFtZSkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgcmV0dXJuIGFyZ1ZhbHVlU3VnZ2VzdGlvbnMuZ2V0RHluYW1pY1N1Z2dlc3Rpb25zRm9yQXJndW1lbnQoZnVuY3Rpb25OYW1lLCBhcmdOYW1lLCBmdW5jdGlvbkFyZ3MsIHBhcnRpYWxJbnB1dCk7CgogICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgdmFsdWVTdWdnZXN0aW9ucyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxOTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgX2Z1bmN0aW9uSGVscCRhcmdzJGZpID0gZnVuY3Rpb25IZWxwLmFyZ3MuZmluZChmdW5jdGlvbiAoYXJnKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGFyZy5uYW1lID09PSBhY3RpdmVBcmcubmFtZTsKICAgICAgICAgICAgfSksIHN0YXRpY1N1Z2dlc3Rpb25zID0gX2Z1bmN0aW9uSGVscCRhcmdzJGZpLnN1Z2dlc3Rpb25zOwogICAgICAgICAgICB2YWx1ZVN1Z2dlc3Rpb25zID0gYXJnVmFsdWVTdWdnZXN0aW9ucy5nZXRTdGF0aWNTdWdnZXN0aW9uc0ZvcklucHV0KHBhcnRpYWxJbnB1dCwgc3RhdGljU3VnZ2VzdGlvbnMpOwoKICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICBsaXN0OiB2YWx1ZVN1Z2dlc3Rpb25zLAogICAgICAgICAgICAgIGxvY2F0aW9uOiBhY3RpdmVBcmcudmFsdWUubG9jYXRpb24sCiAgICAgICAgICAgICAgdHlwZTogU1VHR0VTVElPTl9UWVBFLkFSR1VNRU5UX1ZBTFVFCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgIC8vIHJldHVybiBhcmd1bWVudCBzdWdnZXN0aW9ucwogICAgICAgICAgICBhcmdzSGVscCA9IGdldEFyZ3VtZW50c0hlbHAoZnVuY3Rpb25IZWxwLCBhY3RpdmVGdW5jLmFyZ3VtZW50cyk7CiAgICAgICAgICAgIGFyZ3VtZW50U3VnZ2VzdGlvbnMgPSBhcmdzSGVscC5maWx0ZXIoZnVuY3Rpb24gKGFyZykgewogICAgICAgICAgICAgIGlmIChfbG9kYXNoLmRlZmF1bHQuZ2V0KGFjdGl2ZUFyZywgJ3R5cGUnKSA9PT0gJ25hbWVkQXJnJykgewogICAgICAgICAgICAgICAgcmV0dXJuIF9sb2Rhc2guZGVmYXVsdC5zdGFydHNXaXRoKGFyZy5uYW1lLCBhY3RpdmVBcmcubmFtZSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChhY3RpdmVBcmcpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfbG9kYXNoLmRlZmF1bHQuc3RhcnRzV2l0aChhcmcubmFtZSwgYWN0aXZlQXJnLnRleHQpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBsb2NhdGlvbiA9IGFjdGl2ZUFyZyA/IGFjdGl2ZUFyZy5sb2NhdGlvbiA6IHsKICAgICAgICAgICAgICBtaW46IGN1cnNvclBvc2l0aW9uLAogICAgICAgICAgICAgIG1heDogY3Vyc29yUG9zaXRpb24KICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgIGxpc3Q6IGFyZ3VtZW50U3VnZ2VzdGlvbnMsCiAgICAgICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLAogICAgICAgICAgICAgIHR5cGU6IFNVR0dFU1RJT05fVFlQRS5BUkdVTUVOVFMKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CiAgcmV0dXJuIF9leHRyYWN0U3VnZ2VzdGlvbnNGcm9tUGFyc2VkUmVzdWx0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIHN1Z2dlc3QoX3g1LCBfeDYsIF94NywgX3g4LCBfeDkpIHsKICByZXR1cm4gX3N1Z2dlc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3N1Z2dlc3QoKSB7CiAgX3N1Z2dlc3QgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoZXhwcmVzc2lvbiwgZnVuY3Rpb25MaXN0LCBQYXJzZXIsIGN1cnNvclBvc2l0aW9uLCBhcmdWYWx1ZVN1Z2dlc3Rpb25zKSB7CiAgICB2YXIgcmVzdWx0LCBtZXNzYWdlLCBsaXN0LCBfbWVzc2FnZSwgZnVuY3Rpb25OYW1lLCBmdW5jdGlvbkFyZ3MsIGZ1bmN0aW9uSGVscCwgX21lc3NhZ2UyLCBhcmdOYW1lLCBfZnVuY3Rpb25OYW1lLCBfZnVuY3Rpb25BcmdzLCB2YWx1ZVN1Z2dlc3Rpb25zLCBfZnVuY3Rpb25IZWxwLCBhcmdIZWxwOwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMDsKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gUGFyc2VyLnBhcnNlKGV4cHJlc3Npb24pOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgcmV0dXJuIGV4dHJhY3RTdWdnZXN0aW9uc0Zyb21QYXJzZWRSZXN1bHQocmVzdWx0LCBjdXJzb3JQb3NpdGlvbiwgZnVuY3Rpb25MaXN0LCBhcmdWYWx1ZVN1Z2dlc3Rpb25zKTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIuc2VudCk7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDk7CiAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxMTsKICAgICAgICAgICAgLy8gVGhlIGdyYW1tYXIgd2lsbCB0aHJvdyBhbiBlcnJvciBjb250YWluaW5nIGEgbWVzc2FnZSBpZiB0aGUgZXhwcmVzc2lvbiBpcyBmb3JtYXR0ZWQKICAgICAgICAgICAgLy8gY29ycmVjdGx5IGFuZCBpcyBwcmVwYXJlZCB0byBhY2NlcHQgc3VnZ2VzdGlvbnMuIElmIHRoZSBleHByZXNzaW9uIGlzIG5vdCBmb3JtYXR0ZWQKICAgICAgICAgICAgLy8gY29ycmVjdGx5IHRoZSBncmFtbWFyIHdpbGwganVzdCB0aHJvdyBhIHJlZ3VsYXIgUEVHIFN5bnRheEVycm9yLCBhbmQgdGhpcyBKU09OLnBhcnNlCiAgICAgICAgICAgIC8vIGF0dGVtcHQgd2lsbCB0aHJvdyBhbiBlcnJvci4KICAgICAgICAgICAgbWVzc2FnZSA9IEpTT04ucGFyc2UoX2NvbnRleHQyLnQwLm1lc3NhZ2UpOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE4OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE1OwogICAgICAgICAgICBfY29udGV4dDIudDEgPSBfY29udGV4dDJbImNhdGNoIl0oMTEpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgX2NvbnRleHQyLnQyID0gbWVzc2FnZS50eXBlOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IF9jb250ZXh0Mi50MiA9PT0gJ2luY29tcGxldGVGdW5jdGlvbicgPyAyMSA6IF9jb250ZXh0Mi50MiA9PT0gJ2luY29tcGxldGVBcmd1bWVudCcgPyAyMyA6IF9jb250ZXh0Mi50MiA9PT0gJ2luY29tcGxldGVBcmd1bWVudFZhbHVlJyA/IDI2IDogMzc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgIGlmIChtZXNzYWdlLmZ1bmN0aW9uKSB7CiAgICAgICAgICAgICAgLy8gVGhlIHVzZXIgaGFzIHN0YXJ0IHR5cGluZyBhIGZ1bmN0aW9uIG5hbWUsIHNvIHdlJ2xsIGZpbHRlciB0aGUgbGlzdCBkb3duIHRvIG9ubHkKICAgICAgICAgICAgICAvLyBwb3NzaWJsZSBtYXRjaGVzLgogICAgICAgICAgICAgIGxpc3QgPSBmdW5jdGlvbkxpc3QuZmlsdGVyKGZ1bmN0aW9uIChmdW5jKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX2xvZGFzaC5kZWZhdWx0LnN0YXJ0c1dpdGgoZnVuYy5uYW1lLCBtZXNzYWdlLmZ1bmN0aW9uKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyBUaGUgdXNlciBoYXNuJ3QgdHlwZWQgYW55dGhpbmcgeWV0LCBzbyB3ZSdsbCBqdXN0IHJldHVybiB0aGUgZW50aXJlIGxpc3QuCiAgICAgICAgICAgICAgbGlzdCA9IGZ1bmN0aW9uTGlzdDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICBsaXN0OiBsaXN0LAogICAgICAgICAgICAgIGxvY2F0aW9uOiBtZXNzYWdlLmxvY2F0aW9uLAogICAgICAgICAgICAgIHR5cGU6IFNVR0dFU1RJT05fVFlQRS5GVU5DVElPTlMKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgX21lc3NhZ2UgPSBtZXNzYWdlLCBmdW5jdGlvbk5hbWUgPSBfbWVzc2FnZS5jdXJyZW50RnVuY3Rpb24sIGZ1bmN0aW9uQXJncyA9IF9tZXNzYWdlLmN1cnJlbnRBcmdzOwogICAgICAgICAgICBmdW5jdGlvbkhlbHAgPSBmdW5jdGlvbkxpc3QuZmluZChmdW5jdGlvbiAoZnVuYykgewogICAgICAgICAgICAgIHJldHVybiBmdW5jLm5hbWUgPT09IGZ1bmN0aW9uTmFtZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgbGlzdDogZ2V0QXJndW1lbnRzSGVscChmdW5jdGlvbkhlbHAsIGZ1bmN0aW9uQXJncyksCiAgICAgICAgICAgICAgbG9jYXRpb246IG1lc3NhZ2UubG9jYXRpb24sCiAgICAgICAgICAgICAgdHlwZTogU1VHR0VTVElPTl9UWVBFLkFSR1VNRU5UUwogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICBfbWVzc2FnZTIgPSBtZXNzYWdlLCBhcmdOYW1lID0gX21lc3NhZ2UyLm5hbWUsIF9mdW5jdGlvbk5hbWUgPSBfbWVzc2FnZTIuY3VycmVudEZ1bmN0aW9uLCBfZnVuY3Rpb25BcmdzID0gX21lc3NhZ2UyLmN1cnJlbnRBcmdzOwogICAgICAgICAgICB2YWx1ZVN1Z2dlc3Rpb25zID0gW107CgogICAgICAgICAgICBpZiAoIWFyZ1ZhbHVlU3VnZ2VzdGlvbnMuaGFzRHluYW1pY1N1Z2dlc3Rpb25zRm9yQXJndW1lbnQoX2Z1bmN0aW9uTmFtZSwgYXJnTmFtZSkpIHsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDMxOwogICAgICAgICAgICByZXR1cm4gYXJnVmFsdWVTdWdnZXN0aW9ucy5nZXREeW5hbWljU3VnZ2VzdGlvbnNGb3JBcmd1bWVudChfZnVuY3Rpb25OYW1lLCBhcmdOYW1lLCBfZnVuY3Rpb25BcmdzKTsKCiAgICAgICAgICBjYXNlIDMxOgogICAgICAgICAgICB2YWx1ZVN1Z2dlc3Rpb25zID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzY7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICAgIF9mdW5jdGlvbkhlbHAgPSBmdW5jdGlvbkxpc3QuZmluZChmdW5jdGlvbiAoZnVuYykgewogICAgICAgICAgICAgIHJldHVybiBmdW5jLm5hbWUgPT09IF9mdW5jdGlvbk5hbWU7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKF9mdW5jdGlvbkhlbHApIHsKICAgICAgICAgICAgICBhcmdIZWxwID0gX2Z1bmN0aW9uSGVscC5hcmdzLmZpbmQoZnVuY3Rpb24gKGFyZykgewogICAgICAgICAgICAgICAgcmV0dXJuIGFyZy5uYW1lID09PSBhcmdOYW1lOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBpZiAoYXJnSGVscCAmJiBhcmdIZWxwLnN1Z2dlc3Rpb25zKSB7CiAgICAgICAgICAgICAgICB2YWx1ZVN1Z2dlc3Rpb25zID0gYXJnSGVscC5zdWdnZXN0aW9uczsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICBjYXNlIDM2OgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgIGxpc3Q6IHZhbHVlU3VnZ2VzdGlvbnMsCiAgICAgICAgICAgICAgbG9jYXRpb246IHsKICAgICAgICAgICAgICAgIG1pbjogY3Vyc29yUG9zaXRpb24sCiAgICAgICAgICAgICAgICBtYXg6IGN1cnNvclBvc2l0aW9uCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB0eXBlOiBTVUdHRVNUSU9OX1RZUEUuQVJHVU1FTlRfVkFMVUUKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAzNzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMCwgOV0sIFsxMSwgMTVdXSk7CiAgfSkpOwogIHJldHVybiBfc3VnZ2VzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBpbnNlcnRBdExvY2F0aW9uKHZhbHVlVG9JbnNlcnQsIGRlc3RpbmF0aW9uLCByZXBsYWNlbWVudFJhbmdlU3RhcnQsIHJlcGxhY2VtZW50UmFuZ2VFbmQpIHsKICAvLyBJbnNlcnQgdGhlIHZhbHVlIGF0IGEgbG9jYXRpb24gY2FyZXQgd2l0aGluIHRoZSBkZXN0aW5hdGlvbi4KICB2YXIgcHJlZml4ID0gZGVzdGluYXRpb24uc2xpY2UoMCwgcmVwbGFjZW1lbnRSYW5nZVN0YXJ0KTsKICB2YXIgc3VmZml4ID0gZGVzdGluYXRpb24uc2xpY2UocmVwbGFjZW1lbnRSYW5nZUVuZCwgZGVzdGluYXRpb24ubGVuZ3RoKTsKICB2YXIgcmVzdWx0ID0gIiIuY29uY2F0KHByZWZpeCkuY29uY2F0KHZhbHVlVG9JbnNlcnQpLmNvbmNhdChzdWZmaXgpOwogIHJldHVybiByZXN1bHQ7Cn0="},null]}