{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/reporting/public/lib/stream_handler.js","dependencies":[{"path":"x-pack/plugins/reporting/public/lib/stream_handler.js","mtime":1589249555121},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlJlcG9ydGluZ05vdGlmaWVyU3RyZWFtSGFuZGxlciA9IHZvaWQgMDsKCnZhciBSeCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJ4anMiKSk7Cgp2YXIgX29wZXJhdG9ycyA9IHJlcXVpcmUoInJ4anMvb3BlcmF0b3JzIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgiLi4vLi4vY29uc3RhbnRzIik7Cgp2YXIgX2NvbXBvbmVudHMgPSByZXF1aXJlKCIuLi9jb21wb25lbnRzIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsKICB0cnkgewogICAgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOwogICAgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsKICB9IGNhdGNoIChlcnJvcikgewogICAgcmVqZWN0KGVycm9yKTsKICAgIHJldHVybjsKICB9CgogIGlmIChpbmZvLmRvbmUpIHsKICAgIHJlc29sdmUodmFsdWUpOwogIH0gZWxzZSB7CiAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7CiAgfQp9CgpmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgewogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2VsZiA9IHRoaXMsCiAgICAgICAgYXJncyA9IGFyZ3VtZW50czsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTsKCiAgICAgIGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7CiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAibmV4dCIsIHZhbHVlKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikgewogICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgInRocm93IiwgZXJyKTsKICAgICAgfQoKICAgICAgX25leHQodW5kZWZpbmVkKTsKICAgIH0pOwogIH07Cn0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgfQp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogIH0KfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICByZXR1cm4gQ29uc3RydWN0b3I7Cn0KCmZ1bmN0aW9uIHVwZGF0ZVN0b3JlZChqb2JJZHMpIHsKICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKF9jb25zdGFudHMuSk9CX0NPTVBMRVRJT05fTk9USUZJQ0FUSU9OU19TRVNTSU9OX0tFWSwgSlNPTi5zdHJpbmdpZnkoam9iSWRzKSk7Cn0KCmZ1bmN0aW9uIHN1bW1hcml6ZUpvYihzcmMpIHsKICByZXR1cm4gewogICAgaWQ6IHNyYy5faWQsCiAgICBzdGF0dXM6IHNyYy5fc291cmNlLnN0YXR1cywKICAgIHRpdGxlOiBzcmMuX3NvdXJjZS5wYXlsb2FkLnRpdGxlLAogICAgdHlwZTogc3JjLl9zb3VyY2UucGF5bG9hZC50eXBlLAogICAgbWF4U2l6ZVJlYWNoZWQ6IHNyYy5fc291cmNlLm91dHB1dC5tYXhfc2l6ZV9yZWFjaGVkLAogICAgY3N2Q29udGFpbnNGb3JtdWxhczogc3JjLl9zb3VyY2Uub3V0cHV0LmNzdl9jb250YWluc19mb3JtdWxhcwogIH07Cn0KCnZhciBSZXBvcnRpbmdOb3RpZmllclN0cmVhbUhhbmRsZXIgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBSZXBvcnRpbmdOb3RpZmllclN0cmVhbUhhbmRsZXIobm90aWZpY2F0aW9ucywgYXBpQ2xpZW50KSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVwb3J0aW5nTm90aWZpZXJTdHJlYW1IYW5kbGVyKTsKCiAgICB0aGlzLm5vdGlmaWNhdGlvbnMgPSBub3RpZmljYXRpb25zOwogICAgdGhpcy5hcGlDbGllbnQgPSBhcGlDbGllbnQ7CiAgfQogIC8qCiAgICogVXNlIEtpYmFuYSBUb2FzdCBBUEkgdG8gc2hvdyBvdXIgbWVzc2FnZXMKICAgKi8KCgogIF9jcmVhdGVDbGFzcyhSZXBvcnRpbmdOb3RpZmllclN0cmVhbUhhbmRsZXIsIFt7CiAgICBrZXk6ICJzaG93Tm90aWZpY2F0aW9ucyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvd05vdGlmaWNhdGlvbnMoX3JlZikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGNvbXBsZXRlZEpvYnMgPSBfcmVmLmNvbXBsZXRlZCwKICAgICAgICAgIGZhaWxlZEpvYnMgPSBfcmVmLmZhaWxlZDsKCiAgICAgIHZhciBzaG93Tm90aWZpY2F0aW9uc0FzeW5jID0KICAgICAgLyojX19QVVJFX18qLwogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgICAgLyojX19QVVJFX18qLwogICAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiwgX2RpZEl0ZXJhdG9yRXJyb3IsIF9pdGVyYXRvckVycm9yLCBfaXRlcmF0b3IsIF9zdGVwLCBqb2IsIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yLCBfZGlkSXRlcmF0b3JFcnJvcjIsIF9pdGVyYXRvckVycm9yMiwgX2l0ZXJhdG9yMiwgX3N0ZXAyLCBfam9iLCBfcmVmMywgY29udGVudDsKCiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIC8vIG5vdGlmaWNhdGlvbnMgd2l0aCBkb3dubG9hZCBsaW5rCiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwogICAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlOwogICAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDM7CgogICAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvciA9IGNvbXBsZXRlZEpvYnNbU3ltYm9sLml0ZXJhdG9yXSgpOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICBqb2IgPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGpvYi5jc3ZDb250YWluc0Zvcm11bGFzKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5ub3RpZmljYXRpb25zLnRvYXN0cy5hZGRXYXJuaW5nKCgwLCBfY29tcG9uZW50cy5nZXRXYXJuaW5nRm9ybXVsYXNUb2FzdCkoam9iLCBfdGhpcy5hcGlDbGllbnQuZ2V0TWFuYWdlbWVudExpbmssIF90aGlzLmFwaUNsaWVudC5nZXREb3dubG9hZExpbmspKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGpvYi5tYXhTaXplUmVhY2hlZCkgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMubm90aWZpY2F0aW9ucy50b2FzdHMuYWRkV2FybmluZygoMCwgX2NvbXBvbmVudHMuZ2V0V2FybmluZ01heFNpemVUb2FzdCkoam9iLCBfdGhpcy5hcGlDbGllbnQuZ2V0TWFuYWdlbWVudExpbmssIF90aGlzLmFwaUNsaWVudC5nZXREb3dubG9hZExpbmspKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMubm90aWZpY2F0aW9ucy50b2FzdHMuYWRkU3VjY2VzcygoMCwgX2NvbXBvbmVudHMuZ2V0U3VjY2Vzc1RvYXN0KShqb2IsIF90aGlzLmFwaUNsaWVudC5nZXRNYW5hZ2VtZW50TGluaywgX3RoaXMuYXBpQ2xpZW50LmdldERvd25sb2FkTGluaykpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSAvLyBubyBkb3dubG9hZCBsaW5rIGF2YWlsYWJsZQoKCiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNzsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgzKTsKICAgICAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlOwogICAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IF9jb250ZXh0LnQwOwoKICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEyOwoKICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4gIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNDsKCiAgICAgICAgICAgICAgICAgIGlmICghX2RpZEl0ZXJhdG9yRXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yOwoKICAgICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5maW5pc2goMTQpOwoKICAgICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5maW5pc2goMTEpOwoKICAgICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDIyOwogICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyID0gZmFpbGVkSm9ic1tTeW1ib2wuaXRlcmF0b3JdKCk7CgogICAgICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICAgICAgaWYgKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM0OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfam9iID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjg7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudChfam9iLmlkKTsKCiAgICAgICAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICAgICAgICBfcmVmMyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBfcmVmMy5jb250ZW50OwoKICAgICAgICAgICAgICAgICAgX3RoaXMubm90aWZpY2F0aW9ucy50b2FzdHMuYWRkRGFuZ2VyKCgwLCBfY29tcG9uZW50cy5nZXRGYWlsdXJlVG9hc3QpKGNvbnRlbnQsIF9qb2IsIF90aGlzLmFwaUNsaWVudC5nZXRNYW5hZ2VtZW50TGluaykpOwoKICAgICAgICAgICAgICAgIGNhc2UgMzE6CiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI0OwogICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICBjYXNlIDM0OgogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzNjsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQudDEgPSBfY29udGV4dFsiY2F0Y2giXSgyMik7CiAgICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7CiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yMiA9IF9jb250ZXh0LnQxOwoKICAgICAgICAgICAgICAgIGNhc2UgNDA6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA0MDsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDQxOwoKICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNhc2UgNDM6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA0MzsKCiAgICAgICAgICAgICAgICAgIGlmICghX2RpZEl0ZXJhdG9yRXJyb3IyKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ2OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjI7CgogICAgICAgICAgICAgICAgY2FzZSA0NjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmZpbmlzaCg0Myk7CgogICAgICAgICAgICAgICAgY2FzZSA0NzoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmZpbmlzaCg0MCk7CgogICAgICAgICAgICAgICAgY2FzZSA0ODoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogY29tcGxldGVkSm9icywKICAgICAgICAgICAgICAgICAgICBmYWlsZWQ6IGZhaWxlZEpvYnMKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY2FzZSA0OToKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzMsIDcsIDExLCAxOV0sIFsxMiwsIDE0LCAxOF0sIFsyMiwgMzYsIDQwLCA0OF0sIFs0MSwsIDQzLCA0N11dKTsKICAgICAgICB9KSk7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiBzaG93Tm90aWZpY2F0aW9uc0FzeW5jKCkgewogICAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpOwoKICAgICAgcmV0dXJuIFJ4LmZyb20oc2hvd05vdGlmaWNhdGlvbnNBc3luYygpKTsgLy8gY29udmVydCBQcm9taXNlIHRvIE9ic2VydmFibGUsIGZvciB0aGUgY29udmVuaWVuY2Ugb2YgdGhlIG1haW4gc3RyZWFtCiAgICB9CiAgICAvKgogICAgICogQW4gb2JzZXJ2YWJsZSB0aGF0IGZpbmRzIGpvYnMgdGhhdCBhcmUga25vd24gdG8gYmUgInByb2Nlc3NpbmciIChzdG9yZWQgaW4KICAgICAqIHNlc3Npb24gc3RvcmFnZSkgYnV0IGhhdmUgbm9uLXByb2Nlc3Npbmcgam9iIHN0YXR1cyBvbiB0aGUgc2VydmVyCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZmluZENoYW5nZWRTdGF0dXNKb2JzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kQ2hhbmdlZFN0YXR1c0pvYnMoc3RvcmVkSm9icykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBSeC5mcm9tKHRoaXMuYXBpQ2xpZW50LmZpbmRGb3JKb2JJZHMoc3RvcmVkSm9icykpLnBpcGUoKDAsIF9vcGVyYXRvcnMubWFwKShmdW5jdGlvbiAoam9icykgewogICAgICAgIHZhciBjb21wbGV0ZWRKb2JzID0gW107CiAgICAgICAgdmFyIGZhaWxlZEpvYnMgPSBbXTsKICAgICAgICB2YXIgcGVuZGluZyA9IFtdOyAvLyBhZGQgc2lkZSBlZmZlY3RzIHRvIHN0b3JhZ2UKCiAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gdHJ1ZTsKICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IzID0gZmFsc2U7CiAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yMyA9IHVuZGVmaW5lZDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSBqb2JzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAzOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gKF9zdGVwMyA9IF9pdGVyYXRvcjMubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSB0cnVlKSB7CiAgICAgICAgICAgIHZhciBqb2IgPSBfc3RlcDMudmFsdWU7CiAgICAgICAgICAgIHZhciBqb2JJZCA9IGpvYi5faWQsCiAgICAgICAgICAgICAgICBqb2JTdGF0dXMgPSBqb2IuX3NvdXJjZS5zdGF0dXM7CgogICAgICAgICAgICBpZiAoc3RvcmVkSm9icy5pbmNsdWRlcyhqb2JJZCkpIHsKICAgICAgICAgICAgICBpZiAoam9iU3RhdHVzID09PSBfY29uc3RhbnRzLkpPQl9TVEFUVVNfQ09NUExFVEVEKSB7CiAgICAgICAgICAgICAgICBjb21wbGV0ZWRKb2JzLnB1c2goc3VtbWFyaXplSm9iKGpvYikpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoam9iU3RhdHVzID09PSBfY29uc3RhbnRzLkpPQl9TVEFUVVNfRkFJTEVEKSB7CiAgICAgICAgICAgICAgICBmYWlsZWRKb2JzLnB1c2goc3VtbWFyaXplSm9iKGpvYikpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBwZW5kaW5nLnB1c2goam9iSWQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IzID0gdHJ1ZTsKICAgICAgICAgIF9pdGVyYXRvckVycm9yMyA9IGVycjsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyAmJiBfaXRlcmF0b3IzLnJldHVybiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5yZXR1cm4oKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMykgewogICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdXBkYXRlU3RvcmVkKHBlbmRpbmcpOyAvLyByZWZyZXNoIHRoZSBzdG9yYWdlIG9mIHBlbmRpbmcgam9iIElEcywgbWludXMgY29tcGxldGVkIGFuZCBmYWlsZWQgam9iIElEcwoKICAgICAgICByZXR1cm4gewogICAgICAgICAgY29tcGxldGVkOiBjb21wbGV0ZWRKb2JzLAogICAgICAgICAgZmFpbGVkOiBmYWlsZWRKb2JzCiAgICAgICAgfTsKICAgICAgfSksICgwLCBfb3BlcmF0b3JzLmNhdGNoRXJyb3IpKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAvLyBzaG93IGNvbm5lY3Rpb24gcmVmdXNlZCB0b2FzdAogICAgICAgIF90aGlzMi5ub3RpZmljYXRpb25zLnRvYXN0cy5hZGREYW5nZXIoKDAsIF9jb21wb25lbnRzLmdldEdlbmVyYWxFcnJvclRvYXN0KShfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sucmVwb3J0aW5nLnB1YmxpY05vdGlmaWVyLmh0dHBFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0NvdWxkIG5vdCBjaGVjayBSZXBvcnRpbmcgam9iIHN0YXR1cyEnCiAgICAgICAgfSksIGVycikpOyAvLyBwcmV0dGllci1pZ25vcmUKCgogICAgICAgIHdpbmRvdy5jb25zb2xlLmVycm9yKGVycik7CiAgICAgICAgcmV0dXJuIFJ4Lm9mKHsKICAgICAgICAgIGNvbXBsZXRlZDogW10sCiAgICAgICAgICBmYWlsZWQ6IFtdCiAgICAgICAgfSk7IC8vIGxvZyB0aGUgZXJyb3IgYW5kIHJlc3VtZQogICAgICB9KSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUmVwb3J0aW5nTm90aWZpZXJTdHJlYW1IYW5kbGVyOwp9KCk7CgpleHBvcnRzLlJlcG9ydGluZ05vdGlmaWVyU3RyZWFtSGFuZGxlciA9IFJlcG9ydGluZ05vdGlmaWVyU3RyZWFtSGFuZGxlcjs="},null]}