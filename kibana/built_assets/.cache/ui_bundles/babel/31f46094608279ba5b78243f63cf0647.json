{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/triggers_actions_ui/public/application/components/builtin_alert_types/threshold/expression.js","dependencies":[{"path":"x-pack/plugins/triggers_actions_ui/public/application/components/builtin_alert_types/threshold/expression.js","mtime":1589249555545},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkluZGV4VGhyZXNob2xkQWxlcnRUeXBlRXhwcmVzc2lvbiA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9yZWFjdDIgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX2luZGV4X2NvbnRyb2xzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29tbW9uL2luZGV4X2NvbnRyb2xzIik7Cgp2YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbW1vbi9jb25zdGFudHMiKTsKCnZhciBfZ2V0X3RpbWVfb3B0aW9ucyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbW1vbi9saWIvZ2V0X3RpbWVfb3B0aW9ucyIpOwoKdmFyIF92aXN1YWxpemF0aW9uID0gcmVxdWlyZSgiLi92aXN1YWxpemF0aW9uIik7Cgp2YXIgX2NvbW1vbiA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbW1vbiIpOwoKcmVxdWlyZSgiLi9leHByZXNzaW9uLnNjc3MiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgewogIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsKICBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09ICJbb2JqZWN0IEFyZ3VtZW50c10iKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHsKICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgIGFycjJbaV0gPSBhcnJbaV07CiAgICB9CgogICAgcmV0dXJuIGFycjI7CiAgfQp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgewogIHRyeSB7CiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7CiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICByZWplY3QoZXJyb3IpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKGluZm8uZG9uZSkgewogICAgcmVzb2x2ZSh2YWx1ZSk7CiAgfSBlbHNlIHsKICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsKICB9Cn0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWxmID0gdGhpcywKICAgICAgICBhcmdzID0gYXJndW1lbnRzOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOwoKICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHsKICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7CiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOwogICAgICB9CgogICAgICBfbmV4dCh1bmRlZmluZWQpOwogICAgfSk7CiAgfTsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKdmFyIERFRkFVTFRfVkFMVUVTID0gewogIEFHR1JFR0FUSU9OX1RZUEU6ICdjb3VudCcsCiAgVEVSTV9TSVpFOiA1LAogIFRIUkVTSE9MRF9DT01QQVJBVE9SOiBfY29uc3RhbnRzLkNPTVBBUkFUT1JTLkdSRUFURVJfVEhBTiwKICBUSU1FX1dJTkRPV19TSVpFOiA1LAogIFRJTUVfV0lORE9XX1VOSVQ6ICdtJywKICBUSFJFU0hPTEQ6IFsxMDAwXSwKICBHUk9VUF9CWTogJ2FsbCcKfTsKdmFyIGV4cHJlc3Npb25GaWVsZHNXaXRoVmFsaWRhdGlvbiA9IFsnaW5kZXgnLCAndGltZUZpZWxkJywgJ2FnZ0ZpZWxkJywgJ3Rlcm1TaXplJywgJ3Rlcm1GaWVsZCcsICd0aHJlc2hvbGQwJywgJ3RocmVzaG9sZDEnLCAndGltZVdpbmRvd1NpemUnXTsKCnZhciBJbmRleFRocmVzaG9sZEFsZXJ0VHlwZUV4cHJlc3Npb24gPSBmdW5jdGlvbiBJbmRleFRocmVzaG9sZEFsZXJ0VHlwZUV4cHJlc3Npb24oX3JlZikgewogIHZhciBhbGVydFBhcmFtcyA9IF9yZWYuYWxlcnRQYXJhbXMsCiAgICAgIGFsZXJ0SW50ZXJ2YWwgPSBfcmVmLmFsZXJ0SW50ZXJ2YWwsCiAgICAgIHNldEFsZXJ0UGFyYW1zID0gX3JlZi5zZXRBbGVydFBhcmFtcywKICAgICAgc2V0QWxlcnRQcm9wZXJ0eSA9IF9yZWYuc2V0QWxlcnRQcm9wZXJ0eSwKICAgICAgZXJyb3JzID0gX3JlZi5lcnJvcnMsCiAgICAgIGFsZXJ0c0NvbnRleHQgPSBfcmVmLmFsZXJ0c0NvbnRleHQ7CiAgdmFyIGluZGV4ID0gYWxlcnRQYXJhbXMuaW5kZXgsCiAgICAgIHRpbWVGaWVsZCA9IGFsZXJ0UGFyYW1zLnRpbWVGaWVsZCwKICAgICAgYWdnVHlwZSA9IGFsZXJ0UGFyYW1zLmFnZ1R5cGUsCiAgICAgIGFnZ0ZpZWxkID0gYWxlcnRQYXJhbXMuYWdnRmllbGQsCiAgICAgIGdyb3VwQnkgPSBhbGVydFBhcmFtcy5ncm91cEJ5LAogICAgICB0ZXJtU2l6ZSA9IGFsZXJ0UGFyYW1zLnRlcm1TaXplLAogICAgICB0ZXJtRmllbGQgPSBhbGVydFBhcmFtcy50ZXJtRmllbGQsCiAgICAgIHRocmVzaG9sZENvbXBhcmF0b3IgPSBhbGVydFBhcmFtcy50aHJlc2hvbGRDb21wYXJhdG9yLAogICAgICB0aHJlc2hvbGQgPSBhbGVydFBhcmFtcy50aHJlc2hvbGQsCiAgICAgIHRpbWVXaW5kb3dTaXplID0gYWxlcnRQYXJhbXMudGltZVdpbmRvd1NpemUsCiAgICAgIHRpbWVXaW5kb3dVbml0ID0gYWxlcnRQYXJhbXMudGltZVdpbmRvd1VuaXQ7CiAgdmFyIGh0dHAgPSBhbGVydHNDb250ZXh0Lmh0dHA7CgogIHZhciBfdXNlU3RhdGUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShmYWxzZSksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBpbmRleFBvcG92ZXJPcGVuID0gX3VzZVN0YXRlMlswXSwKICAgICAgc2V0SW5kZXhQb3BvdmVyT3BlbiA9IF91c2VTdGF0ZTJbMV07CgogIHZhciBfdXNlU3RhdGUzID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoW10pLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIGluZGV4UGF0dGVybnMgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRJbmRleFBhdHRlcm5zID0gX3VzZVN0YXRlNFsxXTsKCiAgdmFyIF91c2VTdGF0ZTUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShbXSksCiAgICAgIF91c2VTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU1LCAyKSwKICAgICAgZXNGaWVsZHMgPSBfdXNlU3RhdGU2WzBdLAogICAgICBzZXRFc0ZpZWxkcyA9IF91c2VTdGF0ZTZbMV07CgogIHZhciBfdXNlU3RhdGU3ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoW10pLAogICAgICBfdXNlU3RhdGU4ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNywgMiksCiAgICAgIGluZGV4T3B0aW9ucyA9IF91c2VTdGF0ZThbMF0sCiAgICAgIHNldEluZGV4T3B0aW9ucyA9IF91c2VTdGF0ZThbMV07CgogIHZhciBfdXNlU3RhdGU5ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoW19pbmRleF9jb250cm9scy5maXJzdEZpZWxkT3B0aW9uXSksCiAgICAgIF91c2VTdGF0ZTEwID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlOSwgMiksCiAgICAgIHRpbWVGaWVsZE9wdGlvbnMgPSBfdXNlU3RhdGUxMFswXSwKICAgICAgc2V0VGltZUZpZWxkT3B0aW9ucyA9IF91c2VTdGF0ZTEwWzFdOwoKICB2YXIgX3VzZVN0YXRlMTEgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShmYWxzZSksCiAgICAgIF91c2VTdGF0ZTEyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTEsIDIpLAogICAgICBpc0luZGljaWVzTG9hZGluZyA9IF91c2VTdGF0ZTEyWzBdLAogICAgICBzZXRJc0luZGljaWVzTG9hZGluZyA9IF91c2VTdGF0ZTEyWzFdOwoKICB2YXIgaGFzRXhwcmVzc2lvbkVycm9ycyA9ICEhT2JqZWN0LmtleXMoZXJyb3JzKS5maW5kKGZ1bmN0aW9uIChlcnJvcktleSkgewogICAgcmV0dXJuIGV4cHJlc3Npb25GaWVsZHNXaXRoVmFsaWRhdGlvbi5pbmNsdWRlcyhlcnJvcktleSkgJiYgZXJyb3JzW2Vycm9yS2V5XS5sZW5ndGggPj0gMSAmJiBhbGVydFBhcmFtc1tlcnJvcktleV0gIT09IHVuZGVmaW5lZDsKICB9KTsKICB2YXIgY2FuU2hvd1ZpenVhbGl6YXRpb24gPSAhIU9iamVjdC5rZXlzKGVycm9ycykuZmluZChmdW5jdGlvbiAoZXJyb3JLZXkpIHsKICAgIHJldHVybiBleHByZXNzaW9uRmllbGRzV2l0aFZhbGlkYXRpb24uaW5jbHVkZXMoZXJyb3JLZXkpICYmIGVycm9yc1tlcnJvcktleV0ubGVuZ3RoID49IDE7CiAgfSk7CgogIHZhciBleHByZXNzaW9uRXJyb3JNZXNzYWdlID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLnNlY3Rpb25zLmFsZXJ0QWRkLnRocmVzaG9sZC5maXhFcnJvckluRXhwcmVzc2lvbkJlbG93VmFsaWRhdGlvbk1lc3NhZ2UnLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogJ0V4cHJlc3Npb24gY29udGFpbnMgZXJyb3JzLicKICB9KTsKCiAgdmFyIHNldERlZmF1bHRFeHByZXNzaW9uVmFsdWVzID0KICAvKiNfX1BVUkVfXyovCiAgZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgY3VycmVudEVzRmllbGRzLCB0aW1lRmllbGRzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc2V0QWxlcnRQcm9wZXJ0eSgncGFyYW1zJywgX29iamVjdFNwcmVhZCh7fSwgYWxlcnRQYXJhbXMsIHsKICAgICAgICAgICAgICAgIGFnZ1R5cGU6IGFnZ1R5cGUgIT09IG51bGwgJiYgYWdnVHlwZSAhPT0gdm9pZCAwID8gYWdnVHlwZSA6IERFRkFVTFRfVkFMVUVTLkFHR1JFR0FUSU9OX1RZUEUsCiAgICAgICAgICAgICAgICB0ZXJtU2l6ZTogdGVybVNpemUgIT09IG51bGwgJiYgdGVybVNpemUgIT09IHZvaWQgMCA/IHRlcm1TaXplIDogREVGQVVMVF9WQUxVRVMuVEVSTV9TSVpFLAogICAgICAgICAgICAgICAgdGhyZXNob2xkQ29tcGFyYXRvcjogdGhyZXNob2xkQ29tcGFyYXRvciAhPT0gbnVsbCAmJiB0aHJlc2hvbGRDb21wYXJhdG9yICE9PSB2b2lkIDAgPyB0aHJlc2hvbGRDb21wYXJhdG9yIDogREVGQVVMVF9WQUxVRVMuVEhSRVNIT0xEX0NPTVBBUkFUT1IsCiAgICAgICAgICAgICAgICB0aW1lV2luZG93U2l6ZTogdGltZVdpbmRvd1NpemUgIT09IG51bGwgJiYgdGltZVdpbmRvd1NpemUgIT09IHZvaWQgMCA/IHRpbWVXaW5kb3dTaXplIDogREVGQVVMVF9WQUxVRVMuVElNRV9XSU5ET1dfU0laRSwKICAgICAgICAgICAgICAgIHRpbWVXaW5kb3dVbml0OiB0aW1lV2luZG93VW5pdCAhPT0gbnVsbCAmJiB0aW1lV2luZG93VW5pdCAhPT0gdm9pZCAwID8gdGltZVdpbmRvd1VuaXQgOiBERUZBVUxUX1ZBTFVFUy5USU1FX1dJTkRPV19VTklULAogICAgICAgICAgICAgICAgZ3JvdXBCeTogZ3JvdXBCeSAhPT0gbnVsbCAmJiBncm91cEJ5ICE9PSB2b2lkIDAgPyBncm91cEJ5IDogREVGQVVMVF9WQUxVRVMuR1JPVVBfQlksCiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IHRocmVzaG9sZCAhPT0gbnVsbCAmJiB0aHJlc2hvbGQgIT09IHZvaWQgMCA/IHRocmVzaG9sZCA6IERFRkFVTFRfVkFMVUVTLlRIUkVTSE9MRAogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgaWYgKCEoaW5kZXggJiYgaW5kZXgubGVuZ3RoID4gMCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gKDAsIF9pbmRleF9jb250cm9scy5nZXRGaWVsZHMpKGh0dHAsIGluZGV4KTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjdXJyZW50RXNGaWVsZHMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIHRpbWVGaWVsZHMgPSAoMCwgX2dldF90aW1lX29wdGlvbnMuZ2V0VGltZUZpZWxkT3B0aW9ucykoY3VycmVudEVzRmllbGRzKTsKICAgICAgICAgICAgICBzZXRFc0ZpZWxkcyhjdXJyZW50RXNGaWVsZHMpOwogICAgICAgICAgICAgIHNldFRpbWVGaWVsZE9wdGlvbnMoW19pbmRleF9jb250cm9scy5maXJzdEZpZWxkT3B0aW9uXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHRpbWVGaWVsZHMpKSk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiBzZXREZWZhdWx0RXhwcmVzc2lvblZhbHVlcygpIHsKICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgdmFyIGNsb3NlSW5kZXhQb3BvdmVyID0gZnVuY3Rpb24gY2xvc2VJbmRleFBvcG92ZXIoKSB7CiAgICBzZXRJbmRleFBvcG92ZXJPcGVuKGZhbHNlKTsKCiAgICBpZiAodGltZUZpZWxkID09PSB1bmRlZmluZWQpIHsKICAgICAgc2V0QWxlcnRQYXJhbXMoJ3RpbWVGaWVsZCcsICcnKTsKICAgIH0KICB9OwoKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgdmFyIGluZGV4UGF0dGVybnNGdW5jdGlvbiA9CiAgICAvKiNfX1BVUkVfXyovCiAgICBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBzZXRJbmRleFBhdHRlcm5zOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfaW5kZXhfY29udHJvbHMuZ2V0SW5kZXhQYXR0ZXJucykoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQxID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICAoMCwgX2NvbnRleHQyLnQwKShfY29udGV4dDIudDEpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gaW5kZXhQYXR0ZXJuc0Z1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIGluZGV4UGF0dGVybnNGdW5jdGlvbigpOwogIH0sIFtdKTsKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgc2V0RGVmYXVsdEV4cHJlc3Npb25WYWx1ZXMoKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwcwogIH0sIFtdKTsKCiAgdmFyIGluZGV4UG9wb3ZlciA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCBudWxsKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAganVzdGlmeUNvbnRlbnQ6ICJzcGFjZUJldHdlZW4iCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgaWQ6ICJpbmRleFNlbGVjdFNlYXJjaEJveCIsCiAgICBmdWxsV2lkdGg6IHRydWUsCiAgICBsYWJlbDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgaWQ6ICJ4cGFjay50cmlnZ2Vyc0FjdGlvbnNVSS5zZWN0aW9ucy5hbGVydEFkZC50aHJlc2hvbGQuaW5kaWNlc1RvUXVlcnlMYWJlbCIsCiAgICAgIGRlZmF1bHRNZXNzYWdlOiAiSW5kaWNlcyB0byBxdWVyeSIKICAgIH0pLAogICAgaXNJbnZhbGlkOiBlcnJvcnMuaW5kZXgubGVuZ3RoID4gMCAmJiBpbmRleCAhPT0gdW5kZWZpbmVkLAogICAgZXJyb3I6IGVycm9ycy5pbmRleCwKICAgIGhlbHBUZXh0OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICBpZDogInhwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLnNlY3Rpb25zLmFsZXJ0QWRkLnRocmVzaG9sZC5ob3dUb0Jyb2FkZW5TZWFyY2hRdWVyeURlc2NyaXB0aW9uIiwKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJVc2UgKiB0byBicm9hZGVuIHlvdXIgcXVlcnkuIgogICAgfSkKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQ29tYm9Cb3gsIHsKICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgIGFzeW5jOiB0cnVlLAogICAgaXNMb2FkaW5nOiBpc0luZGljaWVzTG9hZGluZywKICAgIGlzSW52YWxpZDogZXJyb3JzLmluZGV4Lmxlbmd0aCA+IDAgJiYgaW5kZXggIT09IHVuZGVmaW5lZCwKICAgIG5vU3VnZ2VzdGlvbnM6ICFpbmRleE9wdGlvbnMubGVuZ3RoLAogICAgb3B0aW9uczogaW5kZXhPcHRpb25zLAogICAgImRhdGEtdGVzdC1zdWJqIjogInRocmVzaG9sZEluZGV4ZXNDb21ib0JveCIsCiAgICBzZWxlY3RlZE9wdGlvbnM6IChpbmRleCB8fCBbXSkubWFwKGZ1bmN0aW9uIChhbkluZGV4KSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgbGFiZWw6IGFuSW5kZXgsCiAgICAgICAgdmFsdWU6IGFuSW5kZXgKICAgICAgfTsKICAgIH0pLAogICAgb25DaGFuZ2U6CiAgICAvKiNfX1BVUkVfXyovCiAgICBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmNCA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKHNlbGVjdGVkKSB7CiAgICAgICAgdmFyIGluZGljZXMsIGN1cnJlbnRFc0ZpZWxkcywgdGltZUZpZWxkczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc2V0QWxlcnRQYXJhbXMoJ2luZGV4Jywgc2VsZWN0ZWQubWFwKGZ1bmN0aW9uIChhU2VsZWN0ZWQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGFTZWxlY3RlZC52YWx1ZTsKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIGluZGljZXMgPSBzZWxlY3RlZC5tYXAoZnVuY3Rpb24gKHMpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHMudmFsdWU7CiAgICAgICAgICAgICAgICB9KTsgLy8gcmVzZXQgdGltZSBmaWVsZCBhbmQgZXhwcmVzc2lvbiBmaWVsZHMgaWYgaW5kaWNlcyBhcmUgZGVsZXRlZAoKICAgICAgICAgICAgICAgIGlmICghKGluZGljZXMubGVuZ3RoID09PSAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHNldFRpbWVGaWVsZE9wdGlvbnMoW19pbmRleF9jb250cm9scy5maXJzdEZpZWxkT3B0aW9uXSk7CiAgICAgICAgICAgICAgICBzZXRBbGVydFByb3BlcnR5KCdwYXJhbXMnLCBfb2JqZWN0U3ByZWFkKHt9LCBhbGVydFBhcmFtcywgewogICAgICAgICAgICAgICAgICBpbmRleDogaW5kaWNlcywKICAgICAgICAgICAgICAgICAgYWdnVHlwZTogREVGQVVMVF9WQUxVRVMuQUdHUkVHQVRJT05fVFlQRSwKICAgICAgICAgICAgICAgICAgdGVybVNpemU6IERFRkFVTFRfVkFMVUVTLlRFUk1fU0laRSwKICAgICAgICAgICAgICAgICAgdGhyZXNob2xkQ29tcGFyYXRvcjogREVGQVVMVF9WQUxVRVMuVEhSRVNIT0xEX0NPTVBBUkFUT1IsCiAgICAgICAgICAgICAgICAgIHRpbWVXaW5kb3dTaXplOiBERUZBVUxUX1ZBTFVFUy5USU1FX1dJTkRPV19TSVpFLAogICAgICAgICAgICAgICAgICB0aW1lV2luZG93VW5pdDogREVGQVVMVF9WQUxVRVMuVElNRV9XSU5ET1dfVU5JVCwKICAgICAgICAgICAgICAgICAgZ3JvdXBCeTogREVGQVVMVF9WQUxVRVMuR1JPVVBfQlksCiAgICAgICAgICAgICAgICAgIHRocmVzaG9sZDogREVGQVVMVF9WQUxVRVMuVEhSRVNIT0xELAogICAgICAgICAgICAgICAgICB0aW1lRmllbGQ6ICcnCiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiAoMCwgX2luZGV4X2NvbnRyb2xzLmdldEZpZWxkcykoaHR0cCwgaW5kaWNlcyk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIGN1cnJlbnRFc0ZpZWxkcyA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgdGltZUZpZWxkcyA9ICgwLCBfZ2V0X3RpbWVfb3B0aW9ucy5nZXRUaW1lRmllbGRPcHRpb25zKShjdXJyZW50RXNGaWVsZHMpOwogICAgICAgICAgICAgICAgc2V0RXNGaWVsZHMoY3VycmVudEVzRmllbGRzKTsKICAgICAgICAgICAgICAgIHNldFRpbWVGaWVsZE9wdGlvbnMoW19pbmRleF9jb250cm9scy5maXJzdEZpZWxkT3B0aW9uXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHRpbWVGaWVsZHMpKSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgcmV0dXJuIF9yZWY0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCksCiAgICBvblNlYXJjaENoYW5nZToKICAgIC8qI19fUFVSRV9fKi8KICAgIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWY1ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoc2VhcmNoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHNldElzSW5kaWNpZXNMb2FkaW5nKHRydWUpOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0LnQwID0gc2V0SW5kZXhPcHRpb25zOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfaW5kZXhfY29udHJvbHMuZ2V0SW5kZXhPcHRpb25zKShodHRwLCBzZWFyY2gsIGluZGV4UGF0dGVybnMpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBfY29udGV4dDQudDEgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgICgwLCBfY29udGV4dDQudDApKF9jb250ZXh0NC50MSk7CiAgICAgICAgICAgICAgICBzZXRJc0luZGljaWVzTG9hZGluZyhmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gyKSB7CiAgICAgICAgcmV0dXJuIF9yZWY1LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCksCiAgICBvbkJsdXI6IGZ1bmN0aW9uIG9uQmx1cigpIHsKICAgICAgaWYgKCFpbmRleCkgewogICAgICAgIHNldEFsZXJ0UGFyYW1zKCdpbmRleCcsIFtdKTsKICAgICAgfQogICAgfQogIH0pKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgZ3JvdzogZmFsc2UKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgaWQ6ICJ0aHJlc2hvbGRUaW1lRmllbGQiLAogICAgZnVsbFdpZHRoOiB0cnVlLAogICAgbGFiZWw6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgIGlkOiAieHBhY2sudHJpZ2dlcnNBY3Rpb25zVUkuc2VjdGlvbnMuYWxlcnRBZGQudGhyZXNob2xkLnRpbWVGaWVsZExhYmVsIiwKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJUaW1lIGZpZWxkIgogICAgfSksCiAgICBpc0ludmFsaWQ6IGVycm9ycy50aW1lRmllbGQubGVuZ3RoID4gMCAmJiB0aW1lRmllbGQgIT09IHVuZGVmaW5lZCwKICAgIGVycm9yOiBlcnJvcnMudGltZUZpZWxkCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNlbGVjdCwgewogICAgb3B0aW9uczogdGltZUZpZWxkT3B0aW9ucywKICAgIGlzSW52YWxpZDogZXJyb3JzLnRpbWVGaWVsZC5sZW5ndGggPiAwICYmIHRpbWVGaWVsZCAhPT0gdW5kZWZpbmVkLAogICAgZnVsbFdpZHRoOiB0cnVlLAogICAgbmFtZTogInRocmVzaG9sZFRpbWVGaWVsZCIsCiAgICAiZGF0YS10ZXN0LXN1YmoiOiAidGhyZXNob2xkQWxlcnRUaW1lRmllbGRTZWxlY3QiLAogICAgdmFsdWU6IHRpbWVGaWVsZCwKICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7CiAgICAgIHNldEFsZXJ0UGFyYW1zKCd0aW1lRmllbGQnLCBlLnRhcmdldC52YWx1ZSk7CiAgICB9LAogICAgb25CbHVyOiBmdW5jdGlvbiBvbkJsdXIoKSB7CiAgICAgIGlmICh0aW1lRmllbGQgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHNldEFsZXJ0UGFyYW1zKCd0aW1lRmllbGQnLCAnJyk7CiAgICAgIH0KICAgIH0KICB9KSkpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgbnVsbCkpOwoKICB2YXIgZmlyc3RTZXRPZlN0ZXBzID0gW3sKICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJpZ2dlcnNBY3Rpb25zVUkuc2VjdGlvbnMuYWxlcnRBZGQuc2VsZWN0SW5kZXgnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU2VsZWN0IGFuIGluZGV4LicKICAgIH0pLAogICAgY2hpbGRyZW46IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LmRlZmF1bHQuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgICAgd3JhcDogdHJ1ZQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgIGdyb3c6IGZhbHNlCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpUG9wb3ZlciwgewogICAgICBpZDogImluZGV4UG9wb3ZlciIsCiAgICAgIGJ1dHRvbjogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUV4cHJlc3Npb24sIHsKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAic2VsZWN0SW5kZXhFeHByZXNzaW9uIiwKICAgICAgICBkZXNjcmlwdGlvbjogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLnNlY3Rpb25zLmFsZXJ0QWRkLnRocmVzaG9sZC5pbmRleExhYmVsJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdpbmRleCcKICAgICAgICB9KSwKICAgICAgICB2YWx1ZTogaW5kZXggJiYgaW5kZXgubGVuZ3RoID4gMCA/IGluZGV4LmpvaW4oJyAnKSA6IF9pbmRleF9jb250cm9scy5maXJzdEZpZWxkT3B0aW9uLnRleHQsCiAgICAgICAgaXNBY3RpdmU6IGluZGV4UG9wb3Zlck9wZW4sCiAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgIHNldEluZGV4UG9wb3Zlck9wZW4odHJ1ZSk7CiAgICAgICAgfSwKICAgICAgICBjb2xvcjogaW5kZXggJiYgaW5kZXgubGVuZ3RoID4gMCAmJiB0aW1lRmllbGQgIT09ICcnID8gJ3NlY29uZGFyeScgOiAnZGFuZ2VyJwogICAgICB9KSwKICAgICAgaXNPcGVuOiBpbmRleFBvcG92ZXJPcGVuLAogICAgICBjbG9zZVBvcG92ZXI6IGNsb3NlSW5kZXhQb3BvdmVyLAogICAgICBvd25Gb2N1czogdHJ1ZSwKICAgICAgd2l0aFRpdGxlOiB0cnVlLAogICAgICBhbmNob3JQb3NpdGlvbjogImRvd25MZWZ0IiwKICAgICAgekluZGV4OiA4MDAwCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgIHN0eWxlOiB7CiAgICAgICAgd2lkdGg6ICc0NTBweCcKICAgICAgfQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVBvcG92ZXJUaXRsZSwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgICBhbGlnbkl0ZW1zOiAiY2VudGVyIiwKICAgICAgZ3V0dGVyU2l6ZTogInMiCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIG51bGwsIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmlnZ2Vyc0FjdGlvbnNVSS5zZWN0aW9ucy5hbGVydEFkZC50aHJlc2hvbGQuaW5kZXhCdXR0b25MYWJlbCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdpbmRleCcKICAgIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgIGdyb3c6IGZhbHNlCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uSWNvbiwgewogICAgICBpY29uVHlwZTogImNyb3NzIiwKICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICAiYXJpYS1sYWJlbCI6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmlnZ2Vyc0FjdGlvbnNVSS5zZWN0aW9ucy5hbGVydEFkZC50aHJlc2hvbGQuY2xvc2VJbmRleFBvcG92ZXJMYWJlbCcsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0Nsb3NlJwogICAgICB9KSwKICAgICAgb25DbGljazogY2xvc2VJbmRleFBvcG92ZXIKICAgIH0pKSkpLCBpbmRleFBvcG92ZXIpKSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgZ3JvdzogZmFsc2UKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NvbW1vbi5XaGVuRXhwcmVzc2lvbiwgewogICAgICBhZ2dUeXBlOiBhZ2dUeXBlICE9PSBudWxsICYmIGFnZ1R5cGUgIT09IHZvaWQgMCA/IGFnZ1R5cGUgOiBERUZBVUxUX1ZBTFVFUy5BR0dSRUdBVElPTl9UWVBFLAogICAgICBvbkNoYW5nZVNlbGVjdGVkQWdnVHlwZTogZnVuY3Rpb24gb25DaGFuZ2VTZWxlY3RlZEFnZ1R5cGUoc2VsZWN0ZWRBZ2dUeXBlKSB7CiAgICAgICAgcmV0dXJuIHNldEFsZXJ0UGFyYW1zKCdhZ2dUeXBlJywgc2VsZWN0ZWRBZ2dUeXBlKTsKICAgICAgfQogICAgfSkpLCBhZ2dUeXBlICYmIF9jb25zdGFudHMuYnVpbHRJbkFnZ3JlZ2F0aW9uVHlwZXNbYWdnVHlwZV0uZmllbGRSZXF1aXJlZCA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICBncm93OiBmYWxzZQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY29tbW9uLk9mRXhwcmVzc2lvbiwgewogICAgICBhZ2dGaWVsZDogYWdnRmllbGQsCiAgICAgIGZpZWxkczogZXNGaWVsZHMsCiAgICAgIGFnZ1R5cGU6IGFnZ1R5cGUsCiAgICAgIGVycm9yczogZXJyb3JzLAogICAgICBvbkNoYW5nZVNlbGVjdGVkQWdnRmllbGQ6IGZ1bmN0aW9uIG9uQ2hhbmdlU2VsZWN0ZWRBZ2dGaWVsZChzZWxlY3RlZEFnZ0ZpZWxkKSB7CiAgICAgICAgcmV0dXJuIHNldEFsZXJ0UGFyYW1zKCdhZ2dGaWVsZCcsIHNlbGVjdGVkQWdnRmllbGQpOwogICAgICB9CiAgICB9KSkgOiBudWxsKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgIGdyb3c6IGZhbHNlCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jb21tb24uR3JvdXBCeUV4cHJlc3Npb24sIHsKICAgICAgZ3JvdXBCeTogZ3JvdXBCeSB8fCBERUZBVUxUX1ZBTFVFUy5HUk9VUF9CWSwKICAgICAgdGVybUZpZWxkOiB0ZXJtRmllbGQsCiAgICAgIHRlcm1TaXplOiB0ZXJtU2l6ZSwKICAgICAgZXJyb3JzOiBlcnJvcnMsCiAgICAgIGZpZWxkczogZXNGaWVsZHMsCiAgICAgIG9uQ2hhbmdlU2VsZWN0ZWRHcm91cEJ5OiBmdW5jdGlvbiBvbkNoYW5nZVNlbGVjdGVkR3JvdXBCeShzZWxlY3RlZEdyb3VwQnkpIHsKICAgICAgICByZXR1cm4gc2V0QWxlcnRQYXJhbXMoJ2dyb3VwQnknLCBzZWxlY3RlZEdyb3VwQnkpOwogICAgICB9LAogICAgICBvbkNoYW5nZVNlbGVjdGVkVGVybUZpZWxkOiBmdW5jdGlvbiBvbkNoYW5nZVNlbGVjdGVkVGVybUZpZWxkKHNlbGVjdGVkVGVybUZpZWxkKSB7CiAgICAgICAgcmV0dXJuIHNldEFsZXJ0UGFyYW1zKCd0ZXJtRmllbGQnLCBzZWxlY3RlZFRlcm1GaWVsZCk7CiAgICAgIH0sCiAgICAgIG9uQ2hhbmdlU2VsZWN0ZWRUZXJtU2l6ZTogZnVuY3Rpb24gb25DaGFuZ2VTZWxlY3RlZFRlcm1TaXplKHNlbGVjdGVkVGVybVNpemUpIHsKICAgICAgICByZXR1cm4gc2V0QWxlcnRQYXJhbXMoJ3Rlcm1TaXplJywgc2VsZWN0ZWRUZXJtU2l6ZSk7CiAgICAgIH0KICAgIH0pKSkpCiAgfSwgewogICAgdGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmlnZ2Vyc0FjdGlvbnNVSS5zZWN0aW9ucy5hbGVydEFkZC5jb25kaXRpb25Qcm9tcHQnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRGVmaW5lIHRoZSBjb25kaXRpb24uJwogICAgfSksCiAgICBjaGlsZHJlbjogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuZGVmYXVsdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICAgIGdyb3c6IGZhbHNlCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jb21tb24uVGhyZXNob2xkRXhwcmVzc2lvbiwgewogICAgICB0aHJlc2hvbGRDb21wYXJhdG9yOiB0aHJlc2hvbGRDb21wYXJhdG9yICE9PSBudWxsICYmIHRocmVzaG9sZENvbXBhcmF0b3IgIT09IHZvaWQgMCA/IHRocmVzaG9sZENvbXBhcmF0b3IgOiBERUZBVUxUX1ZBTFVFUy5USFJFU0hPTERfQ09NUEFSQVRPUiwKICAgICAgdGhyZXNob2xkOiB0aHJlc2hvbGQsCiAgICAgIGVycm9yczogZXJyb3JzLAogICAgICBwb3B1cFBvc2l0aW9uOiAndXBMZWZ0JywKICAgICAgb25DaGFuZ2VTZWxlY3RlZFRocmVzaG9sZDogZnVuY3Rpb24gb25DaGFuZ2VTZWxlY3RlZFRocmVzaG9sZChzZWxlY3RlZFRocmVzaG9sZHMpIHsKICAgICAgICByZXR1cm4gc2V0QWxlcnRQYXJhbXMoJ3RocmVzaG9sZCcsIHNlbGVjdGVkVGhyZXNob2xkcyk7CiAgICAgIH0sCiAgICAgIG9uQ2hhbmdlU2VsZWN0ZWRUaHJlc2hvbGRDb21wYXJhdG9yOiBmdW5jdGlvbiBvbkNoYW5nZVNlbGVjdGVkVGhyZXNob2xkQ29tcGFyYXRvcihzZWxlY3RlZFRocmVzaG9sZENvbXBhcmF0b3IpIHsKICAgICAgICByZXR1cm4gc2V0QWxlcnRQYXJhbXMoJ3RocmVzaG9sZENvbXBhcmF0b3InLCBzZWxlY3RlZFRocmVzaG9sZENvbXBhcmF0b3IpOwogICAgICB9CiAgICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICBncm93OiBmYWxzZQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfY29tbW9uLkZvckxhc3RFeHByZXNzaW9uLCB7CiAgICAgIHBvcHVwUG9zaXRpb246ICd1cExlZnQnLAogICAgICB0aW1lV2luZG93U2l6ZTogdGltZVdpbmRvd1NpemUsCiAgICAgIHRpbWVXaW5kb3dVbml0OiB0aW1lV2luZG93VW5pdCwKICAgICAgZXJyb3JzOiBlcnJvcnMsCiAgICAgIG9uQ2hhbmdlV2luZG93U2l6ZTogZnVuY3Rpb24gb25DaGFuZ2VXaW5kb3dTaXplKHNlbGVjdGVkV2luZG93U2l6ZSkgewogICAgICAgIHJldHVybiBzZXRBbGVydFBhcmFtcygndGltZVdpbmRvd1NpemUnLCBzZWxlY3RlZFdpbmRvd1NpemUpOwogICAgICB9LAogICAgICBvbkNoYW5nZVdpbmRvd1VuaXQ6IGZ1bmN0aW9uIG9uQ2hhbmdlV2luZG93VW5pdChzZWxlY3RlZFdpbmRvd1VuaXQpIHsKICAgICAgICByZXR1cm4gc2V0QWxlcnRQYXJhbXMoJ3RpbWVXaW5kb3dVbml0Jywgc2VsZWN0ZWRXaW5kb3dVbml0KTsKICAgICAgfQogICAgfSkpKSkKICB9XTsKICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRnJhZ21lbnQsIG51bGwsIGhhc0V4cHJlc3Npb25FcnJvcnMgPyBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgbnVsbCksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDYWxsT3V0LCB7CiAgICBjb2xvcjogImRhbmdlciIsCiAgICBzaXplOiAicyIsCiAgICB0aXRsZTogZXhwcmVzc2lvbkVycm9yTWVzc2FnZQogIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCBudWxsKSkgOiBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCB7CiAgICBzaXplOiAibCIKICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVN0ZXBzLCB7CiAgICBzdGVwczogZmlyc3RTZXRPZlN0ZXBzCiAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgIHNpemU6ICJsIgogIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICBjbGFzc05hbWU6ICJhY3RBbGVydFZpc3VhbGl6YXRpb25fX2NoYXJ0IgogIH0sIGNhblNob3dWaXp1YWxpemF0aW9uID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgIHNpemU6ICJ4bCIKICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUVtcHR5UHJvbXB0LCB7CiAgICBpY29uVHlwZTogInZpc0JhclZlcnRpY2FsIiwKICAgIGJvZHk6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0LCB7CiAgICAgIGNvbG9yOiAic3ViZHVlZCIKICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgIGlkOiAieHBhY2sudHJpZ2dlcnNBY3Rpb25zVUkuc2VjdGlvbnMuYWxlcnRBZGQucHJldmlld0FsZXJ0VmlzdWFsaXphdGlvbkRlc2NyaXB0aW9uIiwKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDb21wbGV0ZSB0aGUgZXhwcmVzc2lvbiB0byBnZW5lcmF0ZSBhIHByZXZpZXcuIgogICAgfSkpCiAgfSkpIDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3Zpc3VhbGl6YXRpb24uVGhyZXNob2xkVmlzdWFsaXphdGlvbiwgewogICAgYWxlcnRQYXJhbXM6IGFsZXJ0UGFyYW1zLAogICAgYWxlcnRJbnRlcnZhbDogYWxlcnRJbnRlcnZhbCwKICAgIGFnZ3JlZ2F0aW9uVHlwZXM6IF9jb25zdGFudHMuYnVpbHRJbkFnZ3JlZ2F0aW9uVHlwZXMsCiAgICBjb21wYXJhdG9yczogX2NvbnN0YW50cy5idWlsdEluQ29tcGFyYXRvcnMsCiAgICBhbGVydHNDb250ZXh0OiBhbGVydHNDb250ZXh0CiAgfSkpKSk7Cn07CgpleHBvcnRzLkluZGV4VGhyZXNob2xkQWxlcnRUeXBlRXhwcmVzc2lvbiA9IEluZGV4VGhyZXNob2xkQWxlcnRUeXBlRXhwcmVzc2lvbjs="},null]}