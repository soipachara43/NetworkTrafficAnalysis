{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/core/public/saved_objects/saved_objects_client.js","dependencies":[{"path":"src/core/public/saved_objects/saved_objects_client.js","mtime":1589249549330},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlNhdmVkT2JqZWN0c0NsaWVudCA9IHZvaWQgMDsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX3VybCA9IHJlcXVpcmUoInVybCIpOwoKdmFyIF9lcnJvcl9hdXRvX2NyZWF0ZV9pbmRleCA9IHJlcXVpcmUoIi4uLy4uLy4uL2xlZ2FjeS91aS9wdWJsaWMvZXJyb3JfYXV0b19jcmVhdGVfaW5kZXgvZXJyb3JfYXV0b19jcmVhdGVfaW5kZXgiKTsKCnZhciBfc2ltcGxlX3NhdmVkX29iamVjdCA9IHJlcXVpcmUoIi4vc2ltcGxlX3NhdmVkX29iamVjdCIpOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgewogIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsKICBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09ICJbb2JqZWN0IEFyZ3VtZW50c10iKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHsKICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgIGFycjJbaV0gPSBhcnJbaV07CiAgICB9CgogICAgcmV0dXJuIGFycjI7CiAgfQp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIGpvaW4gPSBmdW5jdGlvbiBqb2luKCkgewogIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCB1cmlDb21wb25lbnRzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgdXJpQ29tcG9uZW50c1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICB9CgogIHJldHVybiB1cmlDb21wb25lbnRzLmZpbHRlcihmdW5jdGlvbiAoY29tcCkgewogICAgcmV0dXJuIEJvb2xlYW4oY29tcCk7CiAgfSkubWFwKGVuY29kZVVSSUNvbXBvbmVudCkuam9pbignLycpOwp9OwovKioKICogSW50ZXJ2YWwgdGhhdCByZXF1ZXN0cyBhcmUgYmF0Y2hlZCBmb3IKICogQHR5cGUge2ludGVnZXJ9CiAqLwoKCnZhciBCQVRDSF9JTlRFUlZBTCA9IDEwMDsKdmFyIEFQSV9CQVNFX1VSTCA9ICcvYXBpL3NhdmVkX29iamVjdHMvJzsKLyoqCiAqIFNhdmVkT2JqZWN0c0NsaWVudENvbnRyYWN0IGFzIGltcGxlbWVudGVkIGJ5IHRoZSB7QGxpbmsgU2F2ZWRPYmplY3RzQ2xpZW50fQogKgogKiBAcHVibGljCiAqLwoKLyoqCiAqIFNhdmVkIE9iamVjdHMgaXMgS2liYW5hJ3MgZGF0YSBwZXJzaXNlbnRlbmNlIG1lY2hhbmlzbSBhbGxvd2luZyBwbHVnaW5zIHRvCiAqIHVzZSBFbGFzdGljc2VhcmNoIGZvciBzdG9yaW5nIHBsdWdpbiBzdGF0ZS4gVGhlIGNsaWVudC1zaWRlCiAqIFNhdmVkT2JqZWN0c0NsaWVudCBpcyBhIHRoaW4gY29udmVuaWVuY2UgbGlicmFyeSBhcm91bmQgdGhlIFNhdmVkT2JqZWN0cwogKiBIVFRQIEFQSSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCBTYXZlZCBPYmplY3RzLgogKgogKiBAcHVibGljCiAqLwoKdmFyIFNhdmVkT2JqZWN0c0NsaWVudCA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIC8qKgogICAqIFRocm90dGxlZCBwcm9jZXNzaW5nIG9mIGdldCByZXF1ZXN0cyBpbnRvIGJ1bGsgcmVxdWVzdHMgYXQgMTAwbXMgaW50ZXJ2YWwKICAgKi8KCiAgLyoqIEBpbnRlcm5hbCAqLwogIGZ1bmN0aW9uIFNhdmVkT2JqZWN0c0NsaWVudChodHRwKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTYXZlZE9iamVjdHNDbGllbnQpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaHR0cCIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJiYXRjaFF1ZXVlIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInByb2Nlc3NCYXRjaFF1ZXVlIiwgKDAsIF9sb2Rhc2gudGhyb3R0bGUpKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHF1ZXVlID0gKDAsIF9sb2Rhc2guY2xvbmVEZWVwKShfdGhpcy5iYXRjaFF1ZXVlKTsKICAgICAgX3RoaXMuYmF0Y2hRdWV1ZSA9IFtdOwoKICAgICAgX3RoaXMuYnVsa0dldChxdWV1ZSkudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBzYXZlZE9iamVjdHMgPSBfcmVmLnNhdmVkT2JqZWN0czsKICAgICAgICBxdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uIChxdWV1ZUl0ZW0pIHsKICAgICAgICAgIHZhciBmb3VuZE9iamVjdCA9IHNhdmVkT2JqZWN0cy5maW5kKGZ1bmN0aW9uIChzYXZlZE9iamVjdCkgewogICAgICAgICAgICByZXR1cm4gc2F2ZWRPYmplY3QuaWQgPT09IHF1ZXVlSXRlbS5pZCAmJiBzYXZlZE9iamVjdC50eXBlID09PSBxdWV1ZUl0ZW0udHlwZTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmICghZm91bmRPYmplY3QpIHsKICAgICAgICAgICAgcmV0dXJuIHF1ZXVlSXRlbS5yZXNvbHZlKF90aGlzLmNyZWF0ZVNhdmVkT2JqZWN0KCgwLCBfbG9kYXNoLnBpY2spKHF1ZXVlSXRlbSwgWydpZCcsICd0eXBlJ10pKSk7CiAgICAgICAgICB9CgogICAgICAgICAgcXVldWVJdGVtLnJlc29sdmUoZm91bmRPYmplY3QpOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgcXVldWUuZm9yRWFjaChmdW5jdGlvbiAocXVldWVJdGVtKSB7CiAgICAgICAgICBxdWV1ZUl0ZW0ucmVqZWN0KGVycik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwgQkFUQ0hfSU5URVJWQUwsIHsKICAgICAgbGVhZGluZzogZmFsc2UKICAgIH0pKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImNyZWF0ZSIsIGZ1bmN0aW9uICh0eXBlLCBhdHRyaWJ1dGVzKSB7CiAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTsKCiAgICAgIGlmICghdHlwZSB8fCAhYXR0cmlidXRlcykgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ3JlcXVpcmVzIHR5cGUgYW5kIGF0dHJpYnV0ZXMnKSk7CiAgICAgIH0KCiAgICAgIHZhciBwYXRoID0gX3RoaXMuZ2V0UGF0aChbdHlwZSwgb3B0aW9ucy5pZF0pOwoKICAgICAgdmFyIHF1ZXJ5ID0gewogICAgICAgIG92ZXJ3cml0ZTogb3B0aW9ucy5vdmVyd3JpdGUKICAgICAgfTsKCiAgICAgIHZhciBjcmVhdGVSZXF1ZXN0ID0gX3RoaXMuc2F2ZWRPYmplY3RzRmV0Y2gocGF0aCwgewogICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgIHF1ZXJ5OiBxdWVyeSwKICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLAogICAgICAgICAgbWlncmF0aW9uVmVyc2lvbjogb3B0aW9ucy5taWdyYXRpb25WZXJzaW9uLAogICAgICAgICAgcmVmZXJlbmNlczogb3B0aW9ucy5yZWZlcmVuY2VzCiAgICAgICAgfSkKICAgICAgfSk7CgogICAgICByZXR1cm4gY3JlYXRlUmVxdWVzdC50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmNyZWF0ZVNhdmVkT2JqZWN0KHJlc3ApOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBpZiAoKDAsIF9lcnJvcl9hdXRvX2NyZWF0ZV9pbmRleC5pc0F1dG9DcmVhdGVJbmRleEVycm9yKShlcnJvcikpIHsKICAgICAgICAgICgwLCBfZXJyb3JfYXV0b19jcmVhdGVfaW5kZXguc2hvd0F1dG9DcmVhdGVJbmRleEVycm9yUGFnZSkoKTsKICAgICAgICB9CgogICAgICAgIHRocm93IGVycm9yOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYnVsa0NyZWF0ZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG9iamVjdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdOwogICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogewogICAgICAgIG92ZXJ3cml0ZTogZmFsc2UKICAgICAgfTsKCiAgICAgIHZhciBwYXRoID0gX3RoaXMuZ2V0UGF0aChbJ19idWxrX2NyZWF0ZSddKTsKCiAgICAgIHZhciBxdWVyeSA9IHsKICAgICAgICBvdmVyd3JpdGU6IG9wdGlvbnMub3ZlcndyaXRlCiAgICAgIH07CgogICAgICB2YXIgcmVxdWVzdCA9IF90aGlzLnNhdmVkT2JqZWN0c0ZldGNoKHBhdGgsIHsKICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICBxdWVyeTogcXVlcnksCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob2JqZWN0cykKICAgICAgfSk7CgogICAgICByZXR1cm4gcmVxdWVzdC50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgcmVzcC5zYXZlZF9vYmplY3RzID0gcmVzcC5zYXZlZF9vYmplY3RzLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgICAgcmV0dXJuIF90aGlzLmNyZWF0ZVNhdmVkT2JqZWN0KGQpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiByZW5hbWVLZXlzKHsKICAgICAgICAgIHNhdmVkX29iamVjdHM6ICdzYXZlZE9iamVjdHMnCiAgICAgICAgfSwgcmVzcCk7CiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkZWxldGUiLCBmdW5jdGlvbiAodHlwZSwgaWQpIHsKICAgICAgaWYgKCF0eXBlIHx8ICFpZCkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ3JlcXVpcmVzIHR5cGUgYW5kIGlkJykpOwogICAgICB9CgogICAgICByZXR1cm4gX3RoaXMuc2F2ZWRPYmplY3RzRmV0Y2goX3RoaXMuZ2V0UGF0aChbdHlwZSwgaWRdKSwgewogICAgICAgIG1ldGhvZDogJ0RFTEVURScKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImZpbmQiLCBmdW5jdGlvbiAob3B0aW9ucykgewogICAgICB2YXIgcGF0aCA9IF90aGlzLmdldFBhdGgoWydfZmluZCddKTsKCiAgICAgIHZhciByZW5hbWVNYXAgPSB7CiAgICAgICAgZGVmYXVsdFNlYXJjaE9wZXJhdG9yOiAnZGVmYXVsdF9zZWFyY2hfb3BlcmF0b3InLAogICAgICAgIGZpZWxkczogJ2ZpZWxkcycsCiAgICAgICAgaGFzUmVmZXJlbmNlOiAnaGFzX3JlZmVyZW5jZScsCiAgICAgICAgcGFnZTogJ3BhZ2UnLAogICAgICAgIHBlclBhZ2U6ICdwZXJfcGFnZScsCiAgICAgICAgc2VhcmNoOiAnc2VhcmNoJywKICAgICAgICBzZWFyY2hGaWVsZHM6ICdzZWFyY2hfZmllbGRzJywKICAgICAgICBzb3J0RmllbGQ6ICdzb3J0X2ZpZWxkJywKICAgICAgICB0eXBlOiAndHlwZScsCiAgICAgICAgZmlsdGVyOiAnZmlsdGVyJwogICAgICB9OwogICAgICB2YXIgcmVuYW1lZFF1ZXJ5ID0gcmVuYW1lS2V5cyhyZW5hbWVNYXAsIG9wdGlvbnMpOwoKICAgICAgdmFyIHF1ZXJ5ID0gX2xvZGFzaC5waWNrLmFwcGx5KG51bGwsIFtyZW5hbWVkUXVlcnldLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoT2JqZWN0LnZhbHVlcyhyZW5hbWVNYXApKSkpOwoKICAgICAgdmFyIHJlcXVlc3QgPSBfdGhpcy5zYXZlZE9iamVjdHNGZXRjaChwYXRoLCB7CiAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICBxdWVyeTogcXVlcnkKICAgICAgfSk7CgogICAgICByZXR1cm4gcmVxdWVzdC50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgcmVzcC5zYXZlZF9vYmplY3RzID0gcmVzcC5zYXZlZF9vYmplY3RzLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgICAgcmV0dXJuIF90aGlzLmNyZWF0ZVNhdmVkT2JqZWN0KGQpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiByZW5hbWVLZXlzKHsKICAgICAgICAgIHNhdmVkX29iamVjdHM6ICdzYXZlZE9iamVjdHMnLAogICAgICAgICAgdG90YWw6ICd0b3RhbCcsCiAgICAgICAgICBwZXJfcGFnZTogJ3BlclBhZ2UnLAogICAgICAgICAgcGFnZTogJ3BhZ2UnCiAgICAgICAgfSwgcmVzcCk7CiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJnZXQiLCBmdW5jdGlvbiAodHlwZSwgaWQpIHsKICAgICAgaWYgKCF0eXBlIHx8ICFpZCkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ3JlcXVpcmVzIHR5cGUgYW5kIGlkJykpOwogICAgICB9CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIF90aGlzLmJhdGNoUXVldWUucHVzaCh7CiAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgcmVzb2x2ZTogcmVzb2x2ZSwKICAgICAgICAgIHJlamVjdDogcmVqZWN0CiAgICAgICAgfSk7CgogICAgICAgIF90aGlzLnByb2Nlc3NCYXRjaFF1ZXVlKCk7CiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJidWxrR2V0IiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgb2JqZWN0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107CgogICAgICB2YXIgcGF0aCA9IF90aGlzLmdldFBhdGgoWydfYnVsa19nZXQnXSk7CgogICAgICB2YXIgZmlsdGVyZWRPYmplY3RzID0gb2JqZWN0cy5tYXAoZnVuY3Rpb24gKG9iaikgewogICAgICAgIHJldHVybiAoMCwgX2xvZGFzaC5waWNrKShvYmosIFsnaWQnLCAndHlwZSddKTsKICAgICAgfSk7CgogICAgICB2YXIgcmVxdWVzdCA9IF90aGlzLnNhdmVkT2JqZWN0c0ZldGNoKHBhdGgsIHsKICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShmaWx0ZXJlZE9iamVjdHMpCiAgICAgIH0pOwoKICAgICAgcmV0dXJuIHJlcXVlc3QudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIHJlc3Auc2F2ZWRfb2JqZWN0cyA9IHJlc3Auc2F2ZWRfb2JqZWN0cy5tYXAoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5jcmVhdGVTYXZlZE9iamVjdChkKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gcmVuYW1lS2V5cyh7CiAgICAgICAgICBzYXZlZF9vYmplY3RzOiAnc2F2ZWRPYmplY3RzJwogICAgICAgIH0sIHJlc3ApOwogICAgICB9KTsKICAgIH0pOwoKICAgIHRoaXMuaHR0cCA9IGh0dHA7CiAgICB0aGlzLmJhdGNoUXVldWUgPSBbXTsKICB9CiAgLyoqCiAgICogUGVyc2lzdHMgYW4gb2JqZWN0CiAgICoKICAgKiBAcGFyYW0gdHlwZQogICAqIEBwYXJhbSBhdHRyaWJ1dGVzCiAgICogQHBhcmFtIG9wdGlvbnMKICAgKiBAcmV0dXJucwogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKFNhdmVkT2JqZWN0c0NsaWVudCwgW3sKICAgIGtleTogInVwZGF0ZSIsCgogICAgLyoqCiAgICAgKiBVcGRhdGVzIGFuIG9iamVjdAogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBhdHRyaWJ1dGVzCiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucwogICAgICogQHByb3Age2ludGVnZXJ9IG9wdGlvbnMudmVyc2lvbiAtIGVuc3VyZXMgdmVyc2lvbiBtYXRjaGVzIHRoYXQgb2YgcGVyc2lzdGVkIG9iamVjdAogICAgICogQHByb3Age29iamVjdH0gb3B0aW9ucy5taWdyYXRpb25WZXJzaW9uIC0gVGhlIG9wdGlvbmFsIG1pZ3JhdGlvblZlcnNpb24gb2YgdGhpcyBkb2N1bWVudAogICAgICogQHJldHVybnMKICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZSh0eXBlLCBpZCwgYXR0cmlidXRlcykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBfcmVmMiA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge30sCiAgICAgICAgICB2ZXJzaW9uID0gX3JlZjIudmVyc2lvbiwKICAgICAgICAgIG1pZ3JhdGlvblZlcnNpb24gPSBfcmVmMi5taWdyYXRpb25WZXJzaW9uLAogICAgICAgICAgcmVmZXJlbmNlcyA9IF9yZWYyLnJlZmVyZW5jZXM7CgogICAgICBpZiAoIXR5cGUgfHwgIWlkIHx8ICFhdHRyaWJ1dGVzKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigncmVxdWlyZXMgdHlwZSwgaWQgYW5kIGF0dHJpYnV0ZXMnKSk7CiAgICAgIH0KCiAgICAgIHZhciBwYXRoID0gdGhpcy5nZXRQYXRoKFt0eXBlLCBpZF0pOwogICAgICB2YXIgYm9keSA9IHsKICAgICAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLAogICAgICAgIG1pZ3JhdGlvblZlcnNpb246IG1pZ3JhdGlvblZlcnNpb24sCiAgICAgICAgcmVmZXJlbmNlczogcmVmZXJlbmNlcywKICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uCiAgICAgIH07CiAgICAgIHJldHVybiB0aGlzLnNhdmVkT2JqZWN0c0ZldGNoKHBhdGgsIHsKICAgICAgICBtZXRob2Q6ICdQVVQnLAogICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICByZXR1cm4gX3RoaXMyLmNyZWF0ZVNhdmVkT2JqZWN0KHJlc3ApOwogICAgICB9KTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIG11bHRpcGxlIGRvY3VtZW50cyBhdCBvbmNlCiAgICAgKgogICAgICogQHBhcmFtIHthcnJheX0gb2JqZWN0cyAtIFt7IHR5cGUsIGlkLCBhdHRyaWJ1dGVzLCBvcHRpb25zOiB7IHZlcnNpb24sIHJlZmVyZW5jZXMgfSB9XQogICAgICogQHJldHVybnMgVGhlIHJlc3VsdCBvZiB0aGUgdXBkYXRlIG9wZXJhdGlvbiBjb250YWluaW5nIGJvdGggZmFpbGVkIGFuZCB1cGRhdGVkIHNhdmVkIG9iamVjdHMuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiYnVsa1VwZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYnVsa1VwZGF0ZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgb2JqZWN0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107CiAgICAgIHZhciBwYXRoID0gdGhpcy5nZXRQYXRoKFsnX2J1bGtfdXBkYXRlJ10pOwogICAgICByZXR1cm4gdGhpcy5zYXZlZE9iamVjdHNGZXRjaChwYXRoLCB7CiAgICAgICAgbWV0aG9kOiAnUFVUJywKICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvYmplY3RzKQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgcmVzcC5zYXZlZF9vYmplY3RzID0gcmVzcC5zYXZlZF9vYmplY3RzLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMy5jcmVhdGVTYXZlZE9iamVjdChkKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gcmVuYW1lS2V5cyh7CiAgICAgICAgICBzYXZlZF9vYmplY3RzOiAnc2F2ZWRPYmplY3RzJwogICAgICAgIH0sIHJlc3ApOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVTYXZlZE9iamVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlU2F2ZWRPYmplY3Qob3B0aW9ucykgewogICAgICByZXR1cm4gbmV3IF9zaW1wbGVfc2F2ZWRfb2JqZWN0LlNpbXBsZVNhdmVkT2JqZWN0KHRoaXMsIG9wdGlvbnMpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFBhdGgiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBhdGgocGF0aCkgewogICAgICByZXR1cm4gKDAsIF91cmwucmVzb2x2ZSkoQVBJX0JBU0VfVVJMLCBqb2luLmFwcGx5KHZvaWQgMCwgX3RvQ29uc3VtYWJsZUFycmF5KHBhdGgpKSk7CiAgICB9CiAgICAvKioKICAgICAqIFRvIGVuc3VyZSB3ZSBkb24ndCBicmVhayBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSwgc2F2ZWRPYmplY3RzRmV0Y2gga2VlcHMKICAgICAqIHRoZSBvbGQga2ZldGNoIGVycm9yIGZvcm1hdCBvZiBge3Jlczoge3N0YXR1czogbnVtYmVyfX1gIHdoZXJlYXMgYGh0dHAuZmV0Y2hgCiAgICAgKiB1c2VzIGB7cmVzcG9uc2U6IHtzdGF0dXM6IG51bWJlcn19YC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJzYXZlZE9iamVjdHNGZXRjaCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZWRPYmplY3RzRmV0Y2gocGF0aCwgX3JlZjMpIHsKICAgICAgdmFyIG1ldGhvZCA9IF9yZWYzLm1ldGhvZCwKICAgICAgICAgIHF1ZXJ5ID0gX3JlZjMucXVlcnksCiAgICAgICAgICBib2R5ID0gX3JlZjMuYm9keTsKICAgICAgcmV0dXJuIHRoaXMuaHR0cC5mZXRjaChwYXRoLCB7CiAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgcXVlcnk6IHF1ZXJ5LAogICAgICAgIGJvZHk6IGJvZHkKICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gU2F2ZWRPYmplY3RzQ2xpZW50Owp9KCk7Ci8qKgogKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHRoZSBvd24gcHJvcGVydGllcyBvZiBgb2JqYCwgYnV0IHRoZQogKiBrZXlzIHJlbmFtZWQgYWNjb3JkaW5nIHRvIHRoZSBga2V5c01hcGAuCiAqCiAqIEBwYXJhbSBrZXlzTWFwIC0gYSBtYXAgb2YgdGhlIGZvcm0gYHtvbGRLZXk6IG5ld0tleX1gCiAqIEBwYXJhbSBvYmogLSB0aGUgb2JqZWN0IHdob3NlIG93biBwcm9wZXJ0aWVzIHdpbGwgYmUgcmVuYW1lZAogKi8KCgpleHBvcnRzLlNhdmVkT2JqZWN0c0NsaWVudCA9IFNhdmVkT2JqZWN0c0NsaWVudDsKCnZhciByZW5hbWVLZXlzID0gZnVuY3Rpb24gcmVuYW1lS2V5cyhrZXlzTWFwLCBvYmopIHsKICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7CiAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgYWNjLCB7fSwgX2RlZmluZVByb3BlcnR5KHt9LCBrZXlzTWFwW2tleV0gfHwga2V5LCBvYmpba2V5XSkpOwogIH0sIHt9KTsKfTs="},null]}