{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/infra/public/components/logging/log_text_stream/scrollable_log_text_stream_view.js","dependencies":[{"path":"x-pack/plugins/infra/public/components/logging/log_text_stream/scrollable_log_text_stream_view.js","mtime":1589249554249},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuU2Nyb2xsYWJsZUxvZ1RleHRTdHJlYW1WaWV3ID0gdm9pZCAwOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX3JlYWN0ID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9tb21lbnQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIm1vbWVudCIpKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vb2JzZXJ2YWJpbGl0eS9wdWJsaWMiKTsKCnZhciBfaGFuZGxlcnMgPSByZXF1aXJlKCIuLi8uLi8uLi91dGlscy9oYW5kbGVycyIpOwoKdmFyIF9hdXRvX3NpemVyID0gcmVxdWlyZSgiLi4vLi4vYXV0b19zaXplciIpOwoKdmFyIF9lbXB0eV9zdGF0ZXMgPSByZXF1aXJlKCIuLi8uLi9lbXB0eV9zdGF0ZXMiKTsKCnZhciBfbG9hZGluZyA9IHJlcXVpcmUoIi4uLy4uL2xvYWRpbmciKTsKCnZhciBfaXRlbSA9IHJlcXVpcmUoIi4vaXRlbSIpOwoKdmFyIF9jb2x1bW5faGVhZGVycyA9IHJlcXVpcmUoIi4vY29sdW1uX2hlYWRlcnMiKTsKCnZhciBfbG9hZGluZ19pdGVtX3ZpZXcgPSByZXF1aXJlKCIuL2xvYWRpbmdfaXRlbV92aWV3Iik7Cgp2YXIgX2p1bXBfdG9fdGFpbCA9IHJlcXVpcmUoIi4vanVtcF90b190YWlsIik7Cgp2YXIgX2xvZ19lbnRyeV9yb3cgPSByZXF1aXJlKCIuL2xvZ19lbnRyeV9yb3ciKTsKCnZhciBfbWVhc3VyYWJsZV9pdGVtX3ZpZXcgPSByZXF1aXJlKCIuL21lYXN1cmFibGVfaXRlbV92aWV3Iik7Cgp2YXIgX3ZlcnRpY2FsX3Njcm9sbF9wYW5lbCA9IHJlcXVpcmUoIi4vdmVydGljYWxfc2Nyb2xsX3BhbmVsIik7Cgp2YXIgX2xvZ19lbnRyeV9jb2x1bW4gPSByZXF1aXJlKCIuL2xvZ19lbnRyeV9jb2x1bW4iKTsKCnZhciBfbG9nX2RhdGVfcm93ID0gcmVxdWlyZSgiLi9sb2dfZGF0ZV9yb3ciKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgIGRlZmF1bHQ6IG9iagogIH07Cn0KCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9IGVsc2UgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0KCiAgcmV0dXJuIF90eXBlb2Yob2JqKTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MigpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgZmxleDogMSAxIDAlO1xuIl0pOwoKICBfdGVtcGxhdGVPYmplY3QyID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MigpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXg6IDEgMSAwJTtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XG4iXSk7CgogIF90ZW1wbGF0ZU9iamVjdCA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdCgpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKHN0cmluZ3MsIHJhdykgewogIGlmICghcmF3KSB7CiAgICByYXcgPSBzdHJpbmdzLnNsaWNlKDApOwogIH0KCiAgcmV0dXJuIE9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc3RyaW5ncywgewogICAgcmF3OiB7CiAgICAgIHZhbHVlOiBPYmplY3QuZnJlZXplKHJhdykKICAgIH0KICB9KSk7Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgfQp9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7CiAgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgewogICAgcmV0dXJuIGNhbGw7CiAgfQoKICByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsKfQoKZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgewogICAgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsKICB9OwogIHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7Cn0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgewogIGlmIChzZWxmID09PSB2b2lkIDApIHsKICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7CiAgfQoKICByZXR1cm4gc2VsZjsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsKICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsKICB9CgogIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgewogICAgY29uc3RydWN0b3I6IHsKICAgICAgdmFsdWU6IHN1YkNsYXNzLAogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICB9CiAgfSk7CiAgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7Cn0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgICBvLl9fcHJvdG9fXyA9IHA7CiAgICByZXR1cm4gbzsKICB9OwoKICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOwp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKdmFyIFNjcm9sbGFibGVMb2dUZXh0U3RyZWFtVmlldyA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9SZWFjdCRQdXJlQ29tcG9uZW50KSB7CiAgX2luaGVyaXRzKFNjcm9sbGFibGVMb2dUZXh0U3RyZWFtVmlldywgX1JlYWN0JFB1cmVDb21wb25lbnQpOwoKICBfY3JlYXRlQ2xhc3MoU2Nyb2xsYWJsZUxvZ1RleHRTdHJlYW1WaWV3LCBudWxsLCBbewogICAga2V5OiAiZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBwcmV2U3RhdGUpIHsKICAgICAgdmFyIGhhc05ld1RhcmdldCA9IG5leHRQcm9wcy50YXJnZXQgJiYgbmV4dFByb3BzLnRhcmdldCAhPT0gcHJldlN0YXRlLnRhcmdldDsKICAgICAgdmFyIGhhc0l0ZW1zID0gbmV4dFByb3BzLml0ZW1zLmxlbmd0aCA+IDA7IC8vIFByZXZlbnQgbmV3IGVudHJpZXMgZnJvbSBiZWluZyBhcHBlbmRlZCBhbmQgbW92aW5nIHRoZSBzdHJlYW0gZm9yd2FyZCB3aGVuCiAgICAgIC8vIHRoZSB1c2VyIGhhcyBzY3JvbGxlZCB1cCBkdXJpbmcgbGl2ZSBzdHJlYW1pbmcKCiAgICAgIHZhciBuZXh0SXRlbXMgPSBoYXNJdGVtcyAmJiBwcmV2U3RhdGUuaXNTY3JvbGxMb2NrZWQgPyBwcmV2U3RhdGUuaXRlbXMgOiBuZXh0UHJvcHMuaXRlbXM7CgogICAgICBpZiAobmV4dFByb3BzLmlzU3RyZWFtaW5nICYmIGhhc0l0ZW1zKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHRhcmdldDogbmV4dFByb3BzLnRhcmdldCwKICAgICAgICAgIHRhcmdldElkOiAoMCwgX2l0ZW0uZ2V0U3RyZWFtSXRlbUlkKShuZXh0UHJvcHMuaXRlbXNbbmV4dFByb3BzLml0ZW1zLmxlbmd0aCAtIDFdKSwKICAgICAgICAgIGl0ZW1zOiBuZXh0SXRlbXMKICAgICAgICB9OwogICAgICB9IGVsc2UgaWYgKGhhc05ld1RhcmdldCAmJiBoYXNJdGVtcykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB0YXJnZXQ6IG5leHRQcm9wcy50YXJnZXQsCiAgICAgICAgICB0YXJnZXRJZDogKDAsIF9pdGVtLmdldFN0cmVhbUl0ZW1JZCkoKDAsIF9pdGVtLmdldFN0cmVhbUl0ZW1CZWZvcmVUaW1lS2V5KShuZXh0UHJvcHMuaXRlbXMsIG5leHRQcm9wcy50YXJnZXQpKSwKICAgICAgICAgIGl0ZW1zOiBuZXh0SXRlbXMKICAgICAgICB9OwogICAgICB9IGVsc2UgaWYgKCFoYXNJdGVtcykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB0YXJnZXQ6IG51bGwsCiAgICAgICAgICB0YXJnZXRJZDogbnVsbCwKICAgICAgICAgIGl0ZW1zOiBbXQogICAgICAgIH07CiAgICAgIH0gZWxzZSBpZiAoaGFzSXRlbXMgJiYgKG5leHRJdGVtcy5sZW5ndGggIT09IHByZXZTdGF0ZS5pdGVtcy5sZW5ndGggfHwgbmV4dEl0ZW1zWzBdICE9PSBwcmV2U3RhdGUuaXRlbXNbMF0pKSB7CiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHByZXZTdGF0ZSwgewogICAgICAgICAgaXRlbXM6IG5leHRJdGVtcwogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9XSk7CgogIGZ1bmN0aW9uIFNjcm9sbGFibGVMb2dUZXh0U3RyZWFtVmlldyhwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTY3JvbGxhYmxlTG9nVGV4dFN0cmVhbVZpZXcpOwoKICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKFNjcm9sbGFibGVMb2dUZXh0U3RyZWFtVmlldykuY2FsbCh0aGlzLCBwcm9wcykpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZU9wZW5GbHlvdXQiLCBmdW5jdGlvbiAoaWQpIHsKICAgICAgX3RoaXMucHJvcHMuc2V0Rmx5b3V0SXRlbShpZCk7CgogICAgICBfdGhpcy5wcm9wcy5zZXRGbHlvdXRWaXNpYmlsaXR5KHRydWUpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlUmVsb2FkIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgcmVsb2FkSXRlbXMgPSBfdGhpcy5wcm9wcy5yZWxvYWRJdGVtczsKCiAgICAgIGlmIChyZWxvYWRJdGVtcykgewogICAgICAgIHJlbG9hZEl0ZW1zKCk7CiAgICAgIH0KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZVZpc2libGVDaGlsZHJlbkNoYW5nZSIsICgwLCBfaGFuZGxlcnMuY2FsbFdpdGhvdXRSZXBlYXRzKShmdW5jdGlvbiAoX3JlZikgewogICAgICB2YXIgdG9wQ2hpbGQgPSBfcmVmLnRvcENoaWxkLAogICAgICAgICAgbWlkZGxlQ2hpbGQgPSBfcmVmLm1pZGRsZUNoaWxkLAogICAgICAgICAgYm90dG9tQ2hpbGQgPSBfcmVmLmJvdHRvbUNoaWxkLAogICAgICAgICAgcGFnZXNBYm92ZSA9IF9yZWYucGFnZXNBYm92ZSwKICAgICAgICAgIHBhZ2VzQmVsb3cgPSBfcmVmLnBhZ2VzQmVsb3csCiAgICAgICAgICBmcm9tU2Nyb2xsID0gX3JlZi5mcm9tU2Nyb2xsOwoKICAgICAgaWYgKGZyb21TY3JvbGwgJiYgX3RoaXMucHJvcHMuaXNTdHJlYW1pbmcpIHsKICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICBpc1Njcm9sbExvY2tlZDogcGFnZXNCZWxvdyAhPT0gMAogICAgICAgIH0pOwogICAgICB9CgogICAgICBfdGhpcy5wcm9wcy5yZXBvcnRWaXNpYmxlSW50ZXJ2YWwoewogICAgICAgIGVuZEtleTogKDAsIF9pdGVtLnBhcnNlU3RyZWFtSXRlbUlkKShib3R0b21DaGlsZCksCiAgICAgICAgbWlkZGxlS2V5OiAoMCwgX2l0ZW0ucGFyc2VTdHJlYW1JdGVtSWQpKG1pZGRsZUNoaWxkKSwKICAgICAgICBwYWdlc0FmdGVyRW5kOiBwYWdlc0JlbG93LAogICAgICAgIHBhZ2VzQmVmb3JlU3RhcnQ6IHBhZ2VzQWJvdmUsCiAgICAgICAgc3RhcnRLZXk6ICgwLCBfaXRlbS5wYXJzZVN0cmVhbUl0ZW1JZCkodG9wQ2hpbGQpLAogICAgICAgIGZyb21TY3JvbGw6IGZyb21TY3JvbGwKICAgICAgfSk7CiAgICB9KSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlSnVtcFRvVGFpbCIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGl0ZW1zID0gX3RoaXMucHJvcHMuaXRlbXM7CiAgICAgIHZhciBsYXN0SXRlbVRhcmdldCA9ICgwLCBfaXRlbS5nZXRTdHJlYW1JdGVtSWQpKGl0ZW1zW2l0ZW1zLmxlbmd0aCAtIDFdKTsKCiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICB0YXJnZXRJZDogbGFzdEl0ZW1UYXJnZXQsCiAgICAgICAgaXNTY3JvbGxMb2NrZWQ6IGZhbHNlCiAgICAgIH0pOwogICAgfSk7CgogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIHRhcmdldDogbnVsbCwKICAgICAgdGFyZ2V0SWQ6IG51bGwsCiAgICAgIGl0ZW1zOiBwcm9wcy5pdGVtcywKICAgICAgaXNTY3JvbGxMb2NrZWQ6IGZhbHNlCiAgICB9OwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFNjcm9sbGFibGVMb2dUZXh0U3RyZWFtVmlldywgW3sKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IHRoaXMucHJvcHMsCiAgICAgICAgICBjb2x1bW5Db25maWd1cmF0aW9ucyA9IF90aGlzJHByb3BzLmNvbHVtbkNvbmZpZ3VyYXRpb25zLAogICAgICAgICAgY3VycmVudEhpZ2hsaWdodEtleSA9IF90aGlzJHByb3BzLmN1cnJlbnRIaWdobGlnaHRLZXksCiAgICAgICAgICBoYXNNb3JlQWZ0ZXJFbmQgPSBfdGhpcyRwcm9wcy5oYXNNb3JlQWZ0ZXJFbmQsCiAgICAgICAgICBoYXNNb3JlQmVmb3JlU3RhcnQgPSBfdGhpcyRwcm9wcy5oYXNNb3JlQmVmb3JlU3RhcnQsCiAgICAgICAgICBoaWdobGlnaHRlZEl0ZW0gPSBfdGhpcyRwcm9wcy5oaWdobGlnaHRlZEl0ZW0sCiAgICAgICAgICBpc0xvYWRpbmdNb3JlID0gX3RoaXMkcHJvcHMuaXNMb2FkaW5nTW9yZSwKICAgICAgICAgIGlzUmVsb2FkaW5nID0gX3RoaXMkcHJvcHMuaXNSZWxvYWRpbmcsCiAgICAgICAgICBpc1N0cmVhbWluZyA9IF90aGlzJHByb3BzLmlzU3RyZWFtaW5nLAogICAgICAgICAgc2NhbGUgPSBfdGhpcyRwcm9wcy5zY2FsZSwKICAgICAgICAgIHdyYXAgPSBfdGhpcyRwcm9wcy53cmFwLAogICAgICAgICAgc3RhcnREYXRlRXhwcmVzc2lvbiA9IF90aGlzJHByb3BzLnN0YXJ0RGF0ZUV4cHJlc3Npb24sCiAgICAgICAgICBlbmREYXRlRXhwcmVzc2lvbiA9IF90aGlzJHByb3BzLmVuZERhdGVFeHByZXNzaW9uLAogICAgICAgICAgbGFzdExvYWRlZFRpbWUgPSBfdGhpcyRwcm9wcy5sYXN0TG9hZGVkVGltZSwKICAgICAgICAgIHVwZGF0ZURhdGVSYW5nZSA9IF90aGlzJHByb3BzLnVwZGF0ZURhdGVSYW5nZSwKICAgICAgICAgIHN0YXJ0TGl2ZVN0cmVhbWluZyA9IF90aGlzJHByb3BzLnN0YXJ0TGl2ZVN0cmVhbWluZzsKICAgICAgdmFyIF90aGlzJHN0YXRlID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIHRhcmdldElkID0gX3RoaXMkc3RhdGUudGFyZ2V0SWQsCiAgICAgICAgICBpdGVtcyA9IF90aGlzJHN0YXRlLml0ZW1zLAogICAgICAgICAgaXNTY3JvbGxMb2NrZWQgPSBfdGhpcyRzdGF0ZS5pc1Njcm9sbExvY2tlZDsKICAgICAgdmFyIGhhc0l0ZW1zID0gaXRlbXMubGVuZ3RoID4gMDsKICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFNjcm9sbGFibGVMb2dUZXh0U3RyZWFtVmlld1dyYXBwZXIsIG51bGwsIGlzUmVsb2FkaW5nICYmICghaXNTdHJlYW1pbmcgfHwgIWhhc0l0ZW1zKSA/IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9sb2FkaW5nLkluZnJhTG9hZGluZ1BhbmVsLCB7CiAgICAgICAgd2lkdGg6ICIxMDAlIiwKICAgICAgICBoZWlnaHQ6ICIxMDAlIiwKICAgICAgICB0ZXh0OiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJ4cGFjay5pbmZyYS5sb2dzLnNjcm9sbGFibGVMb2dUZXh0U3RyZWFtVmlldy5sb2FkaW5nRW50cmllc0xhYmVsIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTG9hZGluZyBlbnRyaWVzIgogICAgICAgIH0pCiAgICAgIH0pIDogIWhhc0l0ZW1zID8gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2VtcHR5X3N0YXRlcy5Ob0RhdGEsIHsKICAgICAgICB0aXRsZVRleHQ6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5pbmZyYS5sb2dzLmVtcHR5Vmlldy5ub0xvZ01lc3NhZ2VUaXRsZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVGhlcmUgYXJlIG5vIGxvZyBtZXNzYWdlcyB0byBkaXNwbGF5LicKICAgICAgICB9KSwKICAgICAgICBib2R5VGV4dDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmluZnJhLmxvZ3MuZW1wdHlWaWV3Lm5vTG9nTWVzc2FnZURlc2NyaXB0aW9uJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdUcnkgYWRqdXN0aW5nIHlvdXIgZmlsdGVyLicKICAgICAgICB9KSwKICAgICAgICByZWZldGNoVGV4dDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmluZnJhLmxvZ3MuZW1wdHlWaWV3LmNoZWNrRm9yTmV3RGF0YUJ1dHRvbkxhYmVsJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDaGVjayBmb3IgbmV3IGRhdGEnCiAgICAgICAgfSksCiAgICAgICAgb25SZWZldGNoOiB0aGlzLmhhbmRsZVJlbG9hZCwKICAgICAgICB0ZXN0U3RyaW5nOiAibG9nc05vRGF0YVByb21wdCIKICAgICAgfSkgOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChXaXRoQ29sdW1uV2lkdGhzLCB7CiAgICAgICAgY29sdW1uQ29uZmlndXJhdGlvbnM6IGNvbHVtbkNvbmZpZ3VyYXRpb25zLAogICAgICAgIHNjYWxlOiBzY2FsZQogICAgICB9LCBmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgICB2YXIgY29sdW1uV2lkdGhzID0gX3JlZjIuY29sdW1uV2lkdGhzLAogICAgICAgICAgICBDaGFyYWN0ZXJEaW1lbnNpb25zUHJvYmUgPSBfcmVmMi5DaGFyYWN0ZXJEaW1lbnNpb25zUHJvYmU7CiAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuZGVmYXVsdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQ2hhcmFjdGVyRGltZW5zaW9uc1Byb2JlLCBudWxsKSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NvbHVtbl9oZWFkZXJzLkxvZ0NvbHVtbkhlYWRlcnMsIHsKICAgICAgICAgIGNvbHVtbkNvbmZpZ3VyYXRpb25zOiBjb2x1bW5Db25maWd1cmF0aW9ucywKICAgICAgICAgIGNvbHVtbldpZHRoczogY29sdW1uV2lkdGhzCiAgICAgICAgfSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9hdXRvX3NpemVyLkF1dG9TaXplciwgewogICAgICAgICAgYm91bmRzOiB0cnVlLAogICAgICAgICAgY29udGVudDogdHJ1ZSwKICAgICAgICAgIGRldGVjdEFueVdpbmRvd1Jlc2l6ZTogImhlaWdodCIKICAgICAgICB9LCBmdW5jdGlvbiAoX3JlZjMpIHsKICAgICAgICAgIHZhciBtZWFzdXJlUmVmID0gX3JlZjMubWVhc3VyZVJlZiwKICAgICAgICAgICAgICBfcmVmMyRib3VuZHMkaGVpZ2h0ID0gX3JlZjMuYm91bmRzLmhlaWdodCwKICAgICAgICAgICAgICBoZWlnaHQgPSBfcmVmMyRib3VuZHMkaGVpZ2h0ID09PSB2b2lkIDAgPyAwIDogX3JlZjMkYm91bmRzJGhlaWdodCwKICAgICAgICAgICAgICBfcmVmMyRjb250ZW50JHdpZHRoID0gX3JlZjMuY29udGVudC53aWR0aCwKICAgICAgICAgICAgICB3aWR0aCA9IF9yZWYzJGNvbnRlbnQkd2lkdGggPT09IHZvaWQgMCA/IDAgOiBfcmVmMyRjb250ZW50JHdpZHRoOwogICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFNjcm9sbFBhbmVsU2l6ZVByb2JlLCB7CiAgICAgICAgICAgIHJlZjogbWVhc3VyZVJlZgogICAgICAgICAgfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3ZlcnRpY2FsX3Njcm9sbF9wYW5lbC5WZXJ0aWNhbFNjcm9sbFBhbmVsLCB7CiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0LAogICAgICAgICAgICB3aWR0aDogd2lkdGgsCiAgICAgICAgICAgIG9uVmlzaWJsZUNoaWxkcmVuQ2hhbmdlOiBfdGhpczIuaGFuZGxlVmlzaWJsZUNoaWxkcmVuQ2hhbmdlLAogICAgICAgICAgICB0YXJnZXQ6IHRhcmdldElkLAogICAgICAgICAgICBoaWRlU2Nyb2xsYmFyOiB0cnVlLAogICAgICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAnbG9nU3RyZWFtJywKICAgICAgICAgICAgaXNMb2NrZWQ6IGlzU2Nyb2xsTG9ja2VkLAogICAgICAgICAgICBlbnRyaWVzQ291bnQ6IGl0ZW1zLmxlbmd0aAogICAgICAgICAgfSwgZnVuY3Rpb24gKHJlZ2lzdGVyQ2hpbGQpIHsKICAgICAgICAgICAgcmV0dXJuIGl0ZW1zLmxlbmd0aCA+IDAgPyBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLmRlZmF1bHQuRnJhZ21lbnQsIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9sb2FkaW5nX2l0ZW1fdmlldy5Mb2dUZXh0U3RyZWFtTG9hZGluZ0l0ZW1WaWV3LCB7CiAgICAgICAgICAgICAgcG9zaXRpb246ICJzdGFydCIsCiAgICAgICAgICAgICAgaXNMb2FkaW5nOiBpc0xvYWRpbmdNb3JlLAogICAgICAgICAgICAgIGhhc01vcmU6IGhhc01vcmVCZWZvcmVTdGFydCwKICAgICAgICAgICAgICB0aW1lc3RhbXA6IGl0ZW1zWzBdLmxvZ0VudHJ5LmN1cnNvci50aW1lLAogICAgICAgICAgICAgIGlzU3RyZWFtaW5nOiBmYWxzZSwKICAgICAgICAgICAgICBzdGFydERhdGVFeHByZXNzaW9uOiBzdGFydERhdGVFeHByZXNzaW9uLAogICAgICAgICAgICAgIGVuZERhdGVFeHByZXNzaW9uOiBlbmREYXRlRXhwcmVzc2lvbiwKICAgICAgICAgICAgICBvbkV4dGVuZFJhbmdlOiBmdW5jdGlvbiBvbkV4dGVuZFJhbmdlKG5ld0RhdGVFeHByZXNzaW9uKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlRGF0ZVJhbmdlKHsKICAgICAgICAgICAgICAgICAgc3RhcnREYXRlRXhwcmVzc2lvbjogbmV3RGF0ZUV4cHJlc3Npb24KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIGl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSwgaWR4KSB7CiAgICAgICAgICAgICAgdmFyIGN1cnJlbnRUaW1lc3RhbXAgPSBpdGVtLmxvZ0VudHJ5LmN1cnNvci50aW1lOwogICAgICAgICAgICAgIHZhciBzaG93RGF0ZSA9IGZhbHNlOwoKICAgICAgICAgICAgICBpZiAoaWR4ID4gMCkgewogICAgICAgICAgICAgICAgdmFyIHByZXZUaW1lc3RhbXAgPSBpdGVtc1tpZHggLSAxXS5sb2dFbnRyeS5jdXJzb3IudGltZTsKICAgICAgICAgICAgICAgIHNob3dEYXRlID0gISgwLCBfbW9tZW50LmRlZmF1bHQpKGN1cnJlbnRUaW1lc3RhbXApLmlzU2FtZShwcmV2VGltZXN0YW1wLCAnZGF5Jyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5GcmFnbWVudCwgewogICAgICAgICAgICAgICAga2V5OiAoMCwgX2l0ZW0uZ2V0U3RyZWFtSXRlbUlkKShpdGVtKQogICAgICAgICAgICAgIH0sIHNob3dEYXRlICYmIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9sb2dfZGF0ZV9yb3cuTG9nRGF0ZVJvdywgewogICAgICAgICAgICAgICAgdGltZXN0YW1wOiBjdXJyZW50VGltZXN0YW1wCiAgICAgICAgICAgICAgfSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9tZWFzdXJhYmxlX2l0ZW1fdmlldy5NZWFzdXJhYmxlSXRlbVZpZXcsIHsKICAgICAgICAgICAgICAgIHJlZ2lzdGVyOiByZWdpc3RlckNoaWxkLAogICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uS2V5OiAoMCwgX2l0ZW0uZ2V0U3RyZWFtSXRlbUlkKShpdGVtKQogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChpdGVtTWVhc3VyZVJlZikgewogICAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9sb2dfZW50cnlfcm93LkxvZ0VudHJ5Um93LCB7CiAgICAgICAgICAgICAgICAgIGNvbHVtbkNvbmZpZ3VyYXRpb25zOiBjb2x1bW5Db25maWd1cmF0aW9ucywKICAgICAgICAgICAgICAgICAgY29sdW1uV2lkdGhzOiBjb2x1bW5XaWR0aHMsCiAgICAgICAgICAgICAgICAgIG9wZW5GbHlvdXRXaXRoSXRlbTogX3RoaXMyLmhhbmRsZU9wZW5GbHlvdXQsCiAgICAgICAgICAgICAgICAgIGJvdW5kaW5nQm94UmVmOiBpdGVtTWVhc3VyZVJlZiwKICAgICAgICAgICAgICAgICAgbG9nRW50cnk6IGl0ZW0ubG9nRW50cnksCiAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodHM6IGl0ZW0uaGlnaGxpZ2h0cywKICAgICAgICAgICAgICAgICAgaXNBY3RpdmVIaWdobGlnaHQ6ICEhY3VycmVudEhpZ2hsaWdodEtleSAmJiBjdXJyZW50SGlnaGxpZ2h0S2V5LmdpZCA9PT0gaXRlbS5sb2dFbnRyeS5pZCwKICAgICAgICAgICAgICAgICAgc2NhbGU6IHNjYWxlLAogICAgICAgICAgICAgICAgICB3cmFwOiB3cmFwLAogICAgICAgICAgICAgICAgICBpc0hpZ2hsaWdodGVkOiBoaWdobGlnaHRlZEl0ZW0gPyBpdGVtLmxvZ0VudHJ5LmlkID09PSBoaWdobGlnaHRlZEl0ZW0gOiBmYWxzZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9KSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2xvYWRpbmdfaXRlbV92aWV3LkxvZ1RleHRTdHJlYW1Mb2FkaW5nSXRlbVZpZXcsIHsKICAgICAgICAgICAgICBwb3NpdGlvbjogImVuZCIsCiAgICAgICAgICAgICAgaXNMb2FkaW5nOiBpc1N0cmVhbWluZyB8fCBpc0xvYWRpbmdNb3JlLAogICAgICAgICAgICAgIGhhc01vcmU6IGhhc01vcmVBZnRlckVuZCwKICAgICAgICAgICAgICBpc1N0cmVhbWluZzogaXNTdHJlYW1pbmcsCiAgICAgICAgICAgICAgdGltZXN0YW1wOiBpc1N0cmVhbWluZyAmJiBsYXN0TG9hZGVkVGltZSA/IGxhc3RMb2FkZWRUaW1lLnZhbHVlT2YoKSA6IGl0ZW1zW2l0ZW1zLmxlbmd0aCAtIDFdLmxvZ0VudHJ5LmN1cnNvci50aW1lLAogICAgICAgICAgICAgIHN0YXJ0RGF0ZUV4cHJlc3Npb246IHN0YXJ0RGF0ZUV4cHJlc3Npb24sCiAgICAgICAgICAgICAgZW5kRGF0ZUV4cHJlc3Npb246IGVuZERhdGVFeHByZXNzaW9uLAogICAgICAgICAgICAgIG9uRXh0ZW5kUmFuZ2U6IGZ1bmN0aW9uIG9uRXh0ZW5kUmFuZ2UobmV3RGF0ZUV4cHJlc3Npb24pIHsKICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVEYXRlUmFuZ2UoewogICAgICAgICAgICAgICAgICBlbmREYXRlRXhwcmVzc2lvbjogbmV3RGF0ZUV4cHJlc3Npb24KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgb25TdHJlYW1TdGFydDogZnVuY3Rpb24gb25TdHJlYW1TdGFydCgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBzdGFydExpdmVTdHJlYW1pbmcoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBpc1Njcm9sbExvY2tlZCAmJiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfanVtcF90b190YWlsLkxvZ1RleHRTdHJlYW1KdW1wVG9UYWlsLCB7CiAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoLAogICAgICAgICAgICAgIG9uQ2xpY2tKdW1wOiBfdGhpczIuaGFuZGxlSnVtcFRvVGFpbAogICAgICAgICAgICB9KSkgOiBudWxsOwogICAgICAgICAgfSkpOwogICAgICAgIH0pKTsKICAgICAgfSkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFNjcm9sbGFibGVMb2dUZXh0U3RyZWFtVmlldzsKfShfcmVhY3QyLmRlZmF1bHQuUHVyZUNvbXBvbmVudCk7Ci8qKgogKiBJZiB0aGUgYWJvdmUgY29tcG9uZW50IHdhc24ndCBhIGNsYXNzIGNvbXBvbmVudCwgdGhpcyB3b3VsZG4ndCBiZSBuZWNlc3NhcnkKICogc2luY2UgdGhlIGB1c2VDb2x1bW5XaWR0aHNgIGhvb2sgY291bGQgaGF2ZSBiZWVuIHVzZWQgZGlyZWN0bHkuCiAqLwoKCmV4cG9ydHMuU2Nyb2xsYWJsZUxvZ1RleHRTdHJlYW1WaWV3ID0gU2Nyb2xsYWJsZUxvZ1RleHRTdHJlYW1WaWV3OwoKdmFyIFdpdGhDb2x1bW5XaWR0aHMgPSBmdW5jdGlvbiBXaXRoQ29sdW1uV2lkdGhzKF9yZWY0KSB7CiAgdmFyIGNoaWxkcmVuID0gX3JlZjQuY2hpbGRyZW4sCiAgICAgIGNvbHVtbkNvbmZpZ3VyYXRpb25zID0gX3JlZjQuY29sdW1uQ29uZmlndXJhdGlvbnMsCiAgICAgIHNjYWxlID0gX3JlZjQuc2NhbGU7CiAgdmFyIGNoaWxkUGFyYW1zID0gKDAsIF9sb2dfZW50cnlfY29sdW1uLnVzZUNvbHVtbldpZHRocykoewogICAgY29sdW1uQ29uZmlndXJhdGlvbnM6IGNvbHVtbkNvbmZpZ3VyYXRpb25zLAogICAgc2NhbGU6IHNjYWxlCiAgfSk7CiAgcmV0dXJuIGNoaWxkcmVuKGNoaWxkUGFyYW1zKTsKfTsKCnZhciBTY3JvbGxhYmxlTG9nVGV4dFN0cmVhbVZpZXdXcmFwcGVyID0gX3B1YmxpYy5ldWlTdHlsZWQuZGl2KF90ZW1wbGF0ZU9iamVjdCgpKTsKCnZhciBTY3JvbGxQYW5lbFNpemVQcm9iZSA9IF9wdWJsaWMuZXVpU3R5bGVkLmRpdihfdGVtcGxhdGVPYmplY3QyKCkpOw=="},null]}