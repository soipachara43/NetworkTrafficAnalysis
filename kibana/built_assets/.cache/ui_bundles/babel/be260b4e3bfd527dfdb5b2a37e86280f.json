{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/reporting/public/components/report_listing.js","dependencies":[{"path":"x-pack/plugins/reporting/public/components/report_listing.js","mtime":1589249555121},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuUmVwb3J0TGlzdGluZyA9IHZvaWQgMDsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfcmVhY3QgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX21vbWVudCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgibW9tZW50IikpOwoKdmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcG9sbGVyID0gcmVxdWlyZSgiLi4vLi4vY29tbW9uL3BvbGxlciIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuLi8uLi9jb25zdGFudHMiKTsKCnZhciBfbGljZW5zZV9jaGVjayA9IHJlcXVpcmUoIi4uL2xpYi9saWNlbnNlX2NoZWNrIik7Cgp2YXIgX2J1dHRvbnMgPSByZXF1aXJlKCIuL2J1dHRvbnMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9IGVsc2UgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0KCiAgcmV0dXJuIF90eXBlb2Yob2JqKTsKfQoKZnVuY3Rpb24gX2V4dGVuZHMoKSB7CiAgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07CgogICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsKICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRhcmdldDsKICB9OwoKICByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgewogIHRyeSB7CiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7CiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICByZWplY3QoZXJyb3IpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKGluZm8uZG9uZSkgewogICAgcmVzb2x2ZSh2YWx1ZSk7CiAgfSBlbHNlIHsKICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsKICB9Cn0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWxmID0gdGhpcywKICAgICAgICBhcmdzID0gYXJndW1lbnRzOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOwoKICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHsKICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7CiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOwogICAgICB9CgogICAgICBfbmV4dCh1bmRlZmluZWQpOwogICAgfSk7CiAgfTsKfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgewogIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsKICAgIHJldHVybiBjYWxsOwogIH0KCiAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7Cn0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7CiAgfTsKICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOwp9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsKICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIHNlbGY7Cn0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgewogIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOwogIH0KCiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICBjb25zdHJ1Y3RvcjogewogICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0KICB9KTsKICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsKfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICAgIG8uX19wcm90b19fID0gcDsKICAgIHJldHVybiBvOwogIH07CgogIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Cgp2YXIgam9iU3RhdHVzTGFiZWxzTWFwID0gbmV3IE1hcChbW19jb25zdGFudHMuSm9iU3RhdHVzZXMuUEVORElORywgX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnJlcG9ydGluZy5qb2JTdGF0dXNlcy5wZW5kaW5nVGV4dCcsIHsKICBkZWZhdWx0TWVzc2FnZTogJ1BlbmRpbmcnCn0pXSwgW19jb25zdGFudHMuSm9iU3RhdHVzZXMuUFJPQ0VTU0lORywgX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnJlcG9ydGluZy5qb2JTdGF0dXNlcy5wcm9jZXNzaW5nVGV4dCcsIHsKICBkZWZhdWx0TWVzc2FnZTogJ1Byb2Nlc3NpbmcnCn0pXSwgW19jb25zdGFudHMuSm9iU3RhdHVzZXMuQ09NUExFVEVELCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sucmVwb3J0aW5nLmpvYlN0YXR1c2VzLmNvbXBsZXRlZFRleHQnLCB7CiAgZGVmYXVsdE1lc3NhZ2U6ICdDb21wbGV0ZWQnCn0pXSwgW19jb25zdGFudHMuSm9iU3RhdHVzZXMuRkFJTEVELCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sucmVwb3J0aW5nLmpvYlN0YXR1c2VzLmZhaWxlZFRleHQnLCB7CiAgZGVmYXVsdE1lc3NhZ2U6ICdGYWlsZWQnCn0pXSwgW19jb25zdGFudHMuSm9iU3RhdHVzZXMuQ0FOQ0VMTEVELCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sucmVwb3J0aW5nLmpvYlN0YXR1c2VzLmNhbmNlbGxlZFRleHQnLCB7CiAgZGVmYXVsdE1lc3NhZ2U6ICdDYW5jZWxsZWQnCn0pXV0pOwoKdmFyIFJlcG9ydExpc3RpbmdVaSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoUmVwb3J0TGlzdGluZ1VpLCBfQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gUmVwb3J0TGlzdGluZ1VpKHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlcG9ydExpc3RpbmdVaSk7CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoUmVwb3J0TGlzdGluZ1VpKS5jYWxsKHRoaXMsIHByb3BzKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaXNJbml0aWFsSm9ic0ZldGNoIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJsaWNlbnNlU3Vic2NyaXB0aW9uIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJtb3VudGVkIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJwb2xsZXIiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImxpY2Vuc2VIYW5kbGVyIiwgZnVuY3Rpb24gKGxpY2Vuc2UpIHsKICAgICAgdmFyIF9jaGVja0xpY2Vuc2UgPSAoMCwgX2xpY2Vuc2VfY2hlY2suY2hlY2tMaWNlbnNlKShsaWNlbnNlLmNoZWNrKCdyZXBvcnRpbmcnLCAnYmFzaWMnKSksCiAgICAgICAgICBlbmFibGVMaW5rcyA9IF9jaGVja0xpY2Vuc2UuZW5hYmxlTGlua3MsCiAgICAgICAgICBzaG93TGlua3MgPSBfY2hlY2tMaWNlbnNlLnNob3dMaW5rcywKICAgICAgICAgIGJhZExpY2Vuc2VNZXNzYWdlID0gX2NoZWNrTGljZW5zZS5tZXNzYWdlOwoKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGVuYWJsZUxpbmtzOiBlbmFibGVMaW5rcywKICAgICAgICBzaG93TGlua3M6IHNob3dMaW5rcywKICAgICAgICBiYWRMaWNlbnNlTWVzc2FnZTogYmFkTGljZW5zZU1lc3NhZ2UKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvblNlbGVjdGlvbkNoYW5nZSIsIGZ1bmN0aW9uIChqb2JzKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uIChjdXJyZW50KSB7CiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIGN1cnJlbnQsIHsKICAgICAgICAgIHNlbGVjdGVkSm9iczogam9icwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInJlbW92ZVJlY29yZCIsIGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgICAgdmFyIGpvYnMgPSBfdGhpcy5zdGF0ZS5qb2JzOwogICAgICB2YXIgZmlsdGVyZWQgPSBqb2JzLmZpbHRlcihmdW5jdGlvbiAoaikgewogICAgICAgIHJldHVybiBqLmlkICE9PSByZWNvcmQuaWQ7CiAgICAgIH0pOwoKICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKGN1cnJlbnQpIHsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgY3VycmVudCwgewogICAgICAgICAgam9iczogZmlsdGVyZWQKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJyZW5kZXJEZWxldGVCdXR0b24iLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzZWxlY3RlZEpvYnMgPSBfdGhpcy5zdGF0ZS5zZWxlY3RlZEpvYnM7CiAgICAgIGlmIChzZWxlY3RlZEpvYnMubGVuZ3RoID09PSAwKSByZXR1cm4gdW5kZWZpbmVkOwoKICAgICAgdmFyIHBlcmZvcm1EZWxldGUgPQogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24sIF9kaWRJdGVyYXRvckVycm9yLCBfaXRlcmF0b3JFcnJvciwgX2l0ZXJhdG9yLCBfc3RlcCwgcmVjb3JkOwoKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzsKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yID0gc2VsZWN0ZWRKb2JzW1N5bWJvbC5pdGVyYXRvcl0oKTsKCiAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgIGlmIChfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgcmVjb3JkID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA3OwogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcm9wcy5hcGlDbGllbnQuZGVsZXRlUmVwb3J0KHJlY29yZC5pZCk7CgogICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgX3RoaXMucmVtb3ZlUmVjb3JkKHJlY29yZCk7CgogICAgICAgICAgICAgICAgICBfdGhpcy5wcm9wcy50b2FzdHMuYWRkU3VjY2VzcyhfdGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgIGlkOiAneHBhY2sucmVwb3J0aW5nLmxpc3RpbmcudGFibGUuZGVsZXRlQ29uZmltJywKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlRoZSB7cmVwb3J0VGl0bGV9IHJlcG9ydCB3YXMgZGVsZXRlZCIKICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHJlcG9ydFRpdGxlOiByZWNvcmQub2JqZWN0X3RpdGxlCiAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE0OwogICAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDcpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMucHJvcHMudG9hc3RzLmFkZERhbmdlcihfdGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgIGlkOiAneHBhY2sucmVwb3J0aW5nLmxpc3RpbmcudGFibGUuZGVsZXRlRmFpbGVkRXJyb3JNZXNzYWdlJywKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlRoZSByZXBvcnQgd2FzIG5vdCBkZWxldGVkOiB7ZXJyb3J9IgogICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IF9jb250ZXh0LnQwCiAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgIHRocm93IF9jb250ZXh0LnQwOwoKICAgICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI3OwogICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjM7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnQxID0gX2NvbnRleHRbImNhdGNoIl0oMyk7CiAgICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBfY29udGV4dC50MTsKCiAgICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjc7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyODsKCiAgICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzA7CgogICAgICAgICAgICAgICAgICBpZiAoIV9kaWRJdGVyYXRvckVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDMzOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjsKCiAgICAgICAgICAgICAgICBjYXNlIDMzOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuZmluaXNoKDMwKTsKCiAgICAgICAgICAgICAgICBjYXNlIDM0OgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuZmluaXNoKDI3KTsKCiAgICAgICAgICAgICAgICBjYXNlIDM1OgogICAgICAgICAgICAgICAgICAvLyBTaW5jZSB0aGUgY29udGVudHMgb2YgdGhlIHRhYmxlIGhhdmUgY2hhbmdlZCwgd2UgbXVzdCByZXNldCB0aGUgcGFnaW5hdGlvbgogICAgICAgICAgICAgICAgICAvLyBhbmQgcmUtZmV0Y2guIE90aGVyd2lzZSwgdGhlIE50aCBwYWdlIHdlIGFyZSBvbiBjb3VsZCBiZSBlbXB0eSBvZiBqb2JzLgogICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6IDAKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9LCBfdGhpcy5mZXRjaEpvYnMpOwoKICAgICAgICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1szLCAyMywgMjcsIDM1XSwgWzcsIDE0XSwgWzI4LCwgMzAsIDM0XV0pOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHBlcmZvcm1EZWxldGUoKSB7CiAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKTsKCiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfYnV0dG9ucy5SZXBvcnREZWxldGVCdXR0b24sIF9leHRlbmRzKHsKICAgICAgICBqb2JzVG9EZWxldGU6IHNlbGVjdGVkSm9icywKICAgICAgICBwZXJmb3JtRGVsZXRlOiBwZXJmb3JtRGVsZXRlCiAgICAgIH0sIF90aGlzLnByb3BzKSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvblRhYmxlQ2hhbmdlIiwgZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgIHZhciBwYWdlID0gX3JlZjIucGFnZTsKICAgICAgdmFyIHBhZ2VJbmRleCA9IHBhZ2UuaW5kZXg7CgogICAgICBfdGhpcy5zZXRTdGF0ZShmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHBhZ2U6IHBhZ2VJbmRleAogICAgICAgIH07CiAgICAgIH0sIF90aGlzLmZldGNoSm9icyk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJmZXRjaEpvYnMiLAogICAgLyojX19QVVJFX18qLwogICAgX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIGpvYnMsIHRvdGFsOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIC8vIGF2b2lkIHBhZ2UgZmxpY2tlciB3aGVuIHBvbGxlciBpcyB1cGRhdGluZyB0YWJsZSAtIG9ubHkgZGlzcGxheSBsb2FkaW5nIHNjcmVlbiBvbiBmaXJzdCBsb2FkCiAgICAgICAgICAgICAgaWYgKF90aGlzLmlzSW5pdGlhbEpvYnNGZXRjaCkgewogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIGlzTG9hZGluZzogdHJ1ZQogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcm9wcy5hcGlDbGllbnQubGlzdChfdGhpcy5zdGF0ZS5wYWdlKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBqb2JzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcm9wcy5hcGlDbGllbnQudG90YWwoKTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICB0b3RhbCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIF90aGlzLmlzSW5pdGlhbEpvYnNGZXRjaCA9IGZhbHNlOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTE7CiAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDEpOwoKICAgICAgICAgICAgICBpZiAoX3RoaXMubGljZW5zZUFsbG93c1RvU2hvd1RoaXNQYWdlKCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF90aGlzLnByb3BzLnRvYXN0cy5hZGREYW5nZXIoX3RoaXMuc3RhdGUuYmFkTGljZW5zZU1lc3NhZ2UpOwoKICAgICAgICAgICAgICBfdGhpcy5wcm9wcy5yZWRpcmVjdCgna2liYW5hIy9tYW5hZ2VtZW50Jyk7CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgaWYgKF9jb250ZXh0Mi50MC5tZXNzYWdlID09PSAnRmFpbGVkIHRvIGZldGNoJykgewogICAgICAgICAgICAgICAgX3RoaXMucHJvcHMudG9hc3RzLmFkZERhbmdlcihfY29udGV4dDIudDAubWVzc2FnZSB8fCBfdGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgICAgICAgICBpZDogJ3hwYWNrLnJlcG9ydGluZy5saXN0aW5nLnRhYmxlLnJlcXVlc3RGYWlsZWRFcnJvck1lc3NhZ2UnLAogICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1JlcXVlc3QgZmFpbGVkJwogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKF90aGlzLm1vdW50ZWQpIHsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGpvYnM6IFtdLAogICAgICAgICAgICAgICAgICAgIHRvdGFsOiAwCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgaWYgKF90aGlzLm1vdW50ZWQpIHsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIHRvdGFsOiB0b3RhbCwKICAgICAgICAgICAgICAgICAgICBqb2JzOiBqb2JzLm1hcChmdW5jdGlvbiAoam9iKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gam9iLl9zb3VyY2U7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICBpZDogam9iLl9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogc291cmNlLmpvYnR5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdF90eXBlOiBzb3VyY2UucGF5bG9hZC50eXBlLAogICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RfdGl0bGU6IHNvdXJjZS5wYXlsb2FkLnRpdGxlLAogICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkX2J5OiBzb3VyY2UuY3JlYXRlZF9ieSwKICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlZF9hdDogc291cmNlLmNyZWF0ZWRfYXQsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ZWRfYXQ6IHNvdXJjZS5zdGFydGVkX2F0LAogICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWRfYXQ6IHNvdXJjZS5jb21wbGV0ZWRfYXQsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogc291cmNlLnN0YXR1cywKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzTGFiZWw6IGpvYlN0YXR1c0xhYmVsc01hcC5nZXQoc291cmNlLnN0YXR1cykgfHwgc291cmNlLnN0YXR1cywKICAgICAgICAgICAgICAgICAgICAgICAgbWF4X3NpemVfcmVhY2hlZDogc291cmNlLm91dHB1dCA/IHNvdXJjZS5vdXRwdXQubWF4X3NpemVfcmVhY2hlZCA6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICBhdHRlbXB0czogc291cmNlLmF0dGVtcHRzLAogICAgICAgICAgICAgICAgICAgICAgICBtYXhfYXR0ZW1wdHM6IHNvdXJjZS5tYXhfYXR0ZW1wdHMsCiAgICAgICAgICAgICAgICAgICAgICAgIGNzdl9jb250YWluc19mb3JtdWxhczogKDAsIF9sb2Rhc2guZ2V0KShzb3VyY2UsICdvdXRwdXQuY3N2X2NvbnRhaW5zX2Zvcm11bGFzJyksCiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzOiBzb3VyY2Uub3V0cHV0ID8gc291cmNlLm91dHB1dC53YXJuaW5ncyA6IHVuZGVmaW5lZAogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzEsIDExXV0pOwogICAgfSkpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJsaWNlbnNlQWxsb3dzVG9TaG93VGhpc1BhZ2UiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfdGhpcy5zdGF0ZS5zaG93TGlua3MgJiYgX3RoaXMuc3RhdGUuZW5hYmxlTGlua3M7CiAgICB9KTsKCiAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgcGFnZTogMCwKICAgICAgdG90YWw6IDAsCiAgICAgIGpvYnM6IFtdLAogICAgICBzZWxlY3RlZEpvYnM6IFtdLAogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICBzaG93TGlua3M6IGZhbHNlLAogICAgICBlbmFibGVMaW5rczogZmFsc2UsCiAgICAgIGJhZExpY2Vuc2VNZXNzYWdlOiAnJwogICAgfTsKICAgIF90aGlzLmlzSW5pdGlhbEpvYnNGZXRjaCA9IHRydWU7CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoUmVwb3J0TGlzdGluZ1VpLCBbewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVBhZ2VDb250ZW50LCB7CiAgICAgICAgaG9yaXpvbnRhbFBvc2l0aW9uOiAiY2VudGVyIiwKICAgICAgICBjbGFzc05hbWU6ICJldWlQYWdlQm9keS0tcmVzdHJpY3RXaWR0aC1kZWZhdWx0IgogICAgICB9LCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRpdGxlLCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiaDEiLCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2sucmVwb3J0aW5nLmxpc3RpbmcucmVwb3J0c3RpdGxlIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlJlcG9ydHMiCiAgICAgIH0pKSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGV4dCwgewogICAgICAgIGNvbG9yOiAic3ViZHVlZCIsCiAgICAgICAgc2l6ZTogInMiCiAgICAgIH0sIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnJlcG9ydGluZy5saXN0aW5nLnJlcG9ydHMuc3VidGl0bGUiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRmluZCByZXBvcnRzIGdlbmVyYXRlZCBpbiBLaWJhbmEgYXBwbGljYXRpb25zIGhlcmUiCiAgICAgIH0pKSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCBudWxsKSwgdGhpcy5yZW5kZXJUYWJsZSgpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnRXaWxsVW5tb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7CiAgICAgIHRoaXMubW91bnRlZCA9IGZhbHNlOwogICAgICB0aGlzLnBvbGxlci5zdG9wKCk7CgogICAgICBpZiAodGhpcy5saWNlbnNlU3Vic2NyaXB0aW9uKSB7CiAgICAgICAgdGhpcy5saWNlbnNlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnREaWRNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5tb3VudGVkID0gdHJ1ZTsKICAgICAgdGhpcy5wb2xsZXIgPSBuZXcgX3BvbGxlci5Qb2xsZXIoewogICAgICAgIGZ1bmN0aW9uVG9Qb2xsOiBmdW5jdGlvbiBmdW5jdGlvblRvUG9sbCgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczIuZmV0Y2hKb2JzKCk7CiAgICAgICAgfSwKICAgICAgICBwb2xsRnJlcXVlbmN5SW5NaWxsaXM6IF9jb25zdGFudHMuSk9CX0NPTVBMRVRJT05fTk9USUZJQ0FUSU9OU19QT0xMRVJfQ09ORklHLmpvYkNvbXBsZXRpb25Ob3RpZmllci5pbnRlcnZhbCwKICAgICAgICB0cmFpbGluZzogZmFsc2UsCiAgICAgICAgY29udGludWVQb2xsaW5nT25FcnJvcjogdHJ1ZSwKICAgICAgICBwb2xsRnJlcXVlbmN5RXJyb3JNdWx0aXBsaWVyOiBfY29uc3RhbnRzLkpPQl9DT01QTEVUSU9OX05PVElGSUNBVElPTlNfUE9MTEVSX0NPTkZJRy5qb2JDb21wbGV0aW9uTm90aWZpZXIuaW50ZXJ2YWxFcnJvck11bHRpcGxpZXIKICAgICAgfSk7CiAgICAgIHRoaXMucG9sbGVyLnN0YXJ0KCk7CiAgICAgIHRoaXMubGljZW5zZVN1YnNjcmlwdGlvbiA9IHRoaXMucHJvcHMubGljZW5zZSQuc3Vic2NyaWJlKHRoaXMubGljZW5zZUhhbmRsZXIpOwogICAgfQogIH0sIHsKICAgIGtleTogImZvcm1hdERhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZvcm1hdERhdGUodGltZXN0YW1wKSB7CiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuICgwLCBfbW9tZW50LmRlZmF1bHQpKHRpbWVzdGFtcCkuZm9ybWF0KCdZWVlZLU1NLUREIEAgaGg6bW0gQScpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIC8vIGlnbm9yZSBwYXJzZSBlcnJvciBhbmQgZGlzcGxheSB1bmZvcm1hdHRlZCB2YWx1ZQogICAgICAgIHJldHVybiB0aW1lc3RhbXA7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXJUYWJsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyVGFibGUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIGludGwgPSB0aGlzLnByb3BzLmludGw7CiAgICAgIHZhciB0YWJsZUNvbHVtbnMgPSBbewogICAgICAgIGZpZWxkOiAnb2JqZWN0X3RpdGxlJywKICAgICAgICBuYW1lOiBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgaWQ6ICd4cGFjay5yZXBvcnRpbmcubGlzdGluZy50YWJsZUNvbHVtbnMucmVwb3J0VGl0bGUnLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdSZXBvcnQnCiAgICAgICAgfSksCiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIob2JqZWN0VGl0bGUsIHJlY29yZCkgewogICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgb2JqZWN0VGl0bGUpLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRleHQsIHsKICAgICAgICAgICAgc2l6ZTogInMiCiAgICAgICAgICB9LCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRleHRDb2xvciwgewogICAgICAgICAgICBjb2xvcjogInN1YmR1ZWQiCiAgICAgICAgICB9LCByZWNvcmQub2JqZWN0X3R5cGUpKSk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgZmllbGQ6ICdjcmVhdGVkX2F0JywKICAgICAgICBuYW1lOiBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgaWQ6ICd4cGFjay5yZXBvcnRpbmcubGlzdGluZy50YWJsZUNvbHVtbnMuY3JlYXRlZEF0VGl0bGUnLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDcmVhdGVkIGF0JwogICAgICAgIH0pLAogICAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGNyZWF0ZWRBdCwgcmVjb3JkKSB7CiAgICAgICAgICBpZiAocmVjb3JkLmNyZWF0ZWRfYnkpIHsKICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgX3RoaXMzLmZvcm1hdERhdGUoY3JlYXRlZEF0KSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgcmVjb3JkLmNyZWF0ZWRfYnkpKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gX3RoaXMzLmZvcm1hdERhdGUoY3JlYXRlZEF0KTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBmaWVsZDogJ3N0YXR1cycsCiAgICAgICAgbmFtZTogaW50bC5mb3JtYXRNZXNzYWdlKHsKICAgICAgICAgIGlkOiAneHBhY2sucmVwb3J0aW5nLmxpc3RpbmcudGFibGVDb2x1bW5zLnN0YXR1c1RpdGxlJywKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU3RhdHVzJwogICAgICAgIH0pLAogICAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHN0YXR1cywgcmVjb3JkKSB7CiAgICAgICAgICBpZiAoc3RhdHVzID09PSAncGVuZGluZycpIHsKICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICAgIGlkOiAieHBhY2sucmVwb3J0aW5nLmxpc3RpbmcudGFibGVWYWx1ZS5zdGF0dXNEZXRhaWwucGVuZGluZ1N0YXR1c1JlYWNoZWRUZXh0IiwKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlBlbmRpbmcgLSB3YWl0aW5nIGZvciBqb2IgdG8gYmUgcHJvY2Vzc2VkIgogICAgICAgICAgICB9KSk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIG1heFNpemVSZWFjaGVkOwoKICAgICAgICAgIGlmIChyZWNvcmQubWF4X3NpemVfcmVhY2hlZCkgewogICAgICAgICAgICBtYXhTaXplUmVhY2hlZCA9IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgICBpZDogInhwYWNrLnJlcG9ydGluZy5saXN0aW5nLnRhYmxlVmFsdWUuc3RhdHVzRGV0YWlsLm1heFNpemVSZWFjaGVkVGV4dCIsCiAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICIgLSBNYXggc2l6ZSByZWFjaGVkIgogICAgICAgICAgICB9KSk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHdhcm5pbmdzOwoKICAgICAgICAgIGlmIChyZWNvcmQud2FybmluZ3MpIHsKICAgICAgICAgICAgd2FybmluZ3MgPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRleHQsIHsKICAgICAgICAgICAgICBzaXplOiAicyIKICAgICAgICAgICAgfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlUZXh0Q29sb3IsIHsKICAgICAgICAgICAgICBjb2xvcjogInN1YmR1ZWQiCiAgICAgICAgICAgIH0sIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgaWQ6ICJ4cGFjay5yZXBvcnRpbmcubGlzdGluZy50YWJsZVZhbHVlLnN0YXR1c0RldGFpbC53YXJuaW5nc1RleHQiLAogICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRXJyb3JzIG9jY3VycmVkOiBzZWUgam9iIGluZm8gZm9yIGRldGFpbHMuIgogICAgICAgICAgICB9KSkpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBzdGF0dXNUaW1lc3RhbXA7CgogICAgICAgICAgaWYgKHN0YXR1cyA9PT0gX2NvbnN0YW50cy5Kb2JTdGF0dXNlcy5QUk9DRVNTSU5HICYmIHJlY29yZC5zdGFydGVkX2F0KSB7CiAgICAgICAgICAgIHN0YXR1c1RpbWVzdGFtcCA9IF90aGlzMy5mb3JtYXREYXRlKHJlY29yZC5zdGFydGVkX2F0KTsKICAgICAgICAgIH0gZWxzZSBpZiAocmVjb3JkLmNvbXBsZXRlZF9hdCAmJiAoc3RhdHVzID09PSBfY29uc3RhbnRzLkpvYlN0YXR1c2VzLkNPTVBMRVRFRCB8fCBzdGF0dXMgPT09IF9jb25zdGFudHMuSm9iU3RhdHVzZXMuRkFJTEVEKSkgewogICAgICAgICAgICBzdGF0dXNUaW1lc3RhbXAgPSBfdGhpczMuZm9ybWF0RGF0ZShyZWNvcmQuY29tcGxldGVkX2F0KTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgc3RhdHVzTGFiZWwgPSBqb2JTdGF0dXNMYWJlbHNNYXAuZ2V0KHN0YXR1cykgfHwgc3RhdHVzOwoKICAgICAgICAgIGlmIChzdGF0dXMgPT09IF9jb25zdGFudHMuSm9iU3RhdHVzZXMuUFJPQ0VTU0lORykgewogICAgICAgICAgICBzdGF0dXNMYWJlbCA9IHN0YXR1c0xhYmVsICsgIiAoYXR0ZW1wdCAiLmNvbmNhdChyZWNvcmQuYXR0ZW1wdHMsICIgb2YgIikuY29uY2F0KHJlY29yZC5tYXhfYXR0ZW1wdHMsICIpIik7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHN0YXR1c1RpbWVzdGFtcCkgewogICAgICAgICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgaWQ6ICJ4cGFjay5yZXBvcnRpbmcubGlzdGluZy50YWJsZVZhbHVlLnN0YXR1c0RldGFpbC5zdGF0dXNUaW1lc3RhbXBUZXh0IiwKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIntzdGF0dXNMYWJlbH0gYXQge3N0YXR1c1RpbWVzdGFtcH0iLAogICAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgICAgc3RhdHVzTGFiZWw6IHN0YXR1c0xhYmVsLAogICAgICAgICAgICAgICAgc3RhdHVzVGltZXN0YW1wOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiZXVpLXRleHROb1dyYXAiCiAgICAgICAgICAgICAgICB9LCBzdGF0dXNUaW1lc3RhbXApCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgbWF4U2l6ZVJlYWNoZWQsIHdhcm5pbmdzKTsKICAgICAgICAgIH0gLy8gdW5rbm93biBzdGF0dXMKCgogICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCBzdGF0dXNMYWJlbCwgbWF4U2l6ZVJlYWNoZWQpOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIG5hbWU6IGludGwuZm9ybWF0TWVzc2FnZSh7CiAgICAgICAgICBpZDogJ3hwYWNrLnJlcG9ydGluZy5saXN0aW5nLnRhYmxlQ29sdW1ucy5hY3Rpb25zVGl0bGUnLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdBY3Rpb25zJwogICAgICAgIH0pLAogICAgICAgIGFjdGlvbnM6IFt7CiAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihyZWNvcmQpIHsKICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfYnV0dG9ucy5SZXBvcnREb3dubG9hZEJ1dHRvbiwgX2V4dGVuZHMoe30sIF90aGlzMy5wcm9wcywgewogICAgICAgICAgICAgIHJlY29yZDogcmVjb3JkCiAgICAgICAgICAgIH0pKSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2J1dHRvbnMuUmVwb3J0RXJyb3JCdXR0b24sIF9leHRlbmRzKHt9LCBfdGhpczMucHJvcHMsIHsKICAgICAgICAgICAgICByZWNvcmQ6IHJlY29yZAogICAgICAgICAgICB9KSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9idXR0b25zLlJlcG9ydEluZm9CdXR0b24sIF9leHRlbmRzKHt9LCBfdGhpczMucHJvcHMsIHsKICAgICAgICAgICAgICBqb2JJZDogcmVjb3JkLmlkCiAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICB9CiAgICAgICAgfV0KICAgICAgfV07CiAgICAgIHZhciBwYWdpbmF0aW9uID0gewogICAgICAgIHBhZ2VJbmRleDogdGhpcy5zdGF0ZS5wYWdlLAogICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICB0b3RhbEl0ZW1Db3VudDogdGhpcy5zdGF0ZS50b3RhbCwKICAgICAgICBoaWRlUGVyUGFnZU9wdGlvbnM6IHRydWUKICAgICAgfTsKICAgICAgdmFyIHNlbGVjdGlvbiA9IHsKICAgICAgICBpdGVtSWQ6ICdpZCcsCiAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U6IHRoaXMub25TZWxlY3Rpb25DaGFuZ2UKICAgICAgfTsKICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRnJhZ21lbnQsIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQmFzaWNUYWJsZSwgewogICAgICAgIGl0ZW1JZDogImlkIiwKICAgICAgICBpdGVtczogdGhpcy5zdGF0ZS5qb2JzLAogICAgICAgIGxvYWRpbmc6IHRoaXMuc3RhdGUuaXNMb2FkaW5nLAogICAgICAgIGNvbHVtbnM6IHRhYmxlQ29sdW1ucywKICAgICAgICBub0l0ZW1zTWVzc2FnZTogdGhpcy5zdGF0ZS5pc0xvYWRpbmcgPyBpbnRsLmZvcm1hdE1lc3NhZ2UoewogICAgICAgICAgaWQ6ICd4cGFjay5yZXBvcnRpbmcubGlzdGluZy50YWJsZS5sb2FkaW5nUmVwb3J0c0Rlc2NyaXB0aW9uJywKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTG9hZGluZyByZXBvcnRzJwogICAgICAgIH0pIDogaW50bC5mb3JtYXRNZXNzYWdlKHsKICAgICAgICAgIGlkOiAneHBhY2sucmVwb3J0aW5nLmxpc3RpbmcudGFibGUubm9DcmVhdGVkUmVwb3J0c0Rlc2NyaXB0aW9uJywKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTm8gcmVwb3J0cyBoYXZlIGJlZW4gY3JlYXRlZCcKICAgICAgICB9KSwKICAgICAgICBwYWdpbmF0aW9uOiBwYWdpbmF0aW9uLAogICAgICAgIHNlbGVjdGlvbjogc2VsZWN0aW9uLAogICAgICAgIGlzU2VsZWN0YWJsZTogdHJ1ZSwKICAgICAgICBvbkNoYW5nZTogdGhpcy5vblRhYmxlQ2hhbmdlLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJyZXBvcnRKb2JMaXN0aW5nIgogICAgICB9KSwgdGhpcy5zdGF0ZS5zZWxlY3RlZEpvYnMubGVuZ3RoID4gMCA/IHRoaXMucmVuZGVyRGVsZXRlQnV0dG9uKCkgOiBudWxsKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBSZXBvcnRMaXN0aW5nVWk7Cn0oX3JlYWN0Mi5Db21wb25lbnQpOwoKdmFyIFJlcG9ydExpc3RpbmcgPSAoMCwgX3JlYWN0LmluamVjdEkxOG4pKFJlcG9ydExpc3RpbmdVaSk7CmV4cG9ydHMuUmVwb3J0TGlzdGluZyA9IFJlcG9ydExpc3Rpbmc7"},null]}