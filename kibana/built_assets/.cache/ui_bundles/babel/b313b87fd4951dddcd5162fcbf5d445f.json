{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/triggers_actions_ui/public/application/sections/actions_connectors_list/components/actions_connectors_list.js","dependencies":[{"path":"x-pack/plugins/triggers_actions_ui/public/application/sections/actions_connectors_list/components/actions_connectors_list.js","mtime":1589249555561},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkFjdGlvbnNDb25uZWN0b3JzTGlzdCA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfcmVhY3QyID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX2FwcF9jb250ZXh0ID0gcmVxdWlyZSgiLi4vLi4vLi4vYXBwX2NvbnRleHQiKTsKCnZhciBfYWN0aW9uX2Nvbm5lY3Rvcl9hcGkgPSByZXF1aXJlKCIuLi8uLi8uLi9saWIvYWN0aW9uX2Nvbm5lY3Rvcl9hcGkiKTsKCnZhciBfYWN0aW9uX2Nvbm5lY3Rvcl9mb3JtID0gcmVxdWlyZSgiLi4vLi4vYWN0aW9uX2Nvbm5lY3Rvcl9mb3JtIik7Cgp2YXIgX2NhcGFiaWxpdGllcyA9IHJlcXVpcmUoIi4uLy4uLy4uL2xpYi9jYXBhYmlsaXRpZXMiKTsKCnZhciBfZGVsZXRlX21vZGFsX2NvbmZpcm1hdGlvbiA9IHJlcXVpcmUoIi4uLy4uLy4uL2NvbXBvbmVudHMvZGVsZXRlX21vZGFsX2NvbmZpcm1hdGlvbiIpOwoKdmFyIF9hY3Rpb25zX2Nvbm5lY3RvcnNfY29udGV4dCA9IHJlcXVpcmUoIi4uLy4uLy4uL2NvbnRleHQvYWN0aW9uc19jb25uZWN0b3JzX2NvbnRleHQiKTsKCnZhciBfY2hlY2tfYWN0aW9uX3R5cGVfZW5hYmxlZCA9IHJlcXVpcmUoIi4uLy4uLy4uL2xpYi9jaGVja19hY3Rpb25fdHlwZV9lbmFibGVkIik7CgpyZXF1aXJlKCIuL2FjdGlvbnNfY29ubmVjdG9yc19saXN0LnNjc3MiKTsKCnZhciBfZW1wdHlfY29ubmVjdG9yc19wcm9tcHQgPSByZXF1aXJlKCIuLi8uLi8uLi9jb21wb25lbnRzL3Byb21wdHMvZW1wdHlfY29ubmVjdG9yc19wcm9tcHQiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsKICB0cnkgewogICAgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOwogICAgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsKICB9IGNhdGNoIChlcnJvcikgewogICAgcmVqZWN0KGVycm9yKTsKICAgIHJldHVybjsKICB9CgogIGlmIChpbmZvLmRvbmUpIHsKICAgIHJlc29sdmUodmFsdWUpOwogIH0gZWxzZSB7CiAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7CiAgfQp9CgpmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgewogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2VsZiA9IHRoaXMsCiAgICAgICAgYXJncyA9IGFyZ3VtZW50czsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTsKCiAgICAgIGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7CiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAibmV4dCIsIHZhbHVlKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikgewogICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgInRocm93IiwgZXJyKTsKICAgICAgfQoKICAgICAgX25leHQodW5kZWZpbmVkKTsKICAgIH0pOwogIH07Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KCnZhciBBY3Rpb25zQ29ubmVjdG9yc0xpc3QgPSBmdW5jdGlvbiBBY3Rpb25zQ29ubmVjdG9yc0xpc3QoKSB7CiAgdmFyIF91c2VBcHBEZXBlbmRlbmNpZXMgPSAoMCwgX2FwcF9jb250ZXh0LnVzZUFwcERlcGVuZGVuY2llcykoKSwKICAgICAgaHR0cCA9IF91c2VBcHBEZXBlbmRlbmNpZXMuaHR0cCwKICAgICAgdG9hc3ROb3RpZmljYXRpb25zID0gX3VzZUFwcERlcGVuZGVuY2llcy50b2FzdE5vdGlmaWNhdGlvbnMsCiAgICAgIGNhcGFiaWxpdGllcyA9IF91c2VBcHBEZXBlbmRlbmNpZXMuY2FwYWJpbGl0aWVzLAogICAgICBhY3Rpb25UeXBlUmVnaXN0cnkgPSBfdXNlQXBwRGVwZW5kZW5jaWVzLmFjdGlvblR5cGVSZWdpc3RyeTsKCiAgdmFyIGNhbkRlbGV0ZSA9ICgwLCBfY2FwYWJpbGl0aWVzLmhhc0RlbGV0ZUFjdGlvbnNDYXBhYmlsaXR5KShjYXBhYmlsaXRpZXMpOwogIHZhciBjYW5TYXZlID0gKDAsIF9jYXBhYmlsaXRpZXMuaGFzU2F2ZUFjdGlvbnNDYXBhYmlsaXR5KShjYXBhYmlsaXRpZXMpOwoKICB2YXIgX3VzZVN0YXRlID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkodW5kZWZpbmVkKSwKICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksCiAgICAgIGFjdGlvblR5cGVzSW5kZXggPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRBY3Rpb25UeXBlc0luZGV4ID0gX3VzZVN0YXRlMlsxXTsKCiAgdmFyIF91c2VTdGF0ZTMgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShbXSksCiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSwKICAgICAgYWN0aW9ucyA9IF91c2VTdGF0ZTRbMF0sCiAgICAgIHNldEFjdGlvbnMgPSBfdXNlU3RhdGU0WzFdOwoKICB2YXIgX3VzZVN0YXRlNSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKFtdKSwKICAgICAgX3VzZVN0YXRlNiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTUsIDIpLAogICAgICBkYXRhID0gX3VzZVN0YXRlNlswXSwKICAgICAgc2V0RGF0YSA9IF91c2VTdGF0ZTZbMV07CgogIHZhciBfdXNlU3RhdGU3ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoW10pLAogICAgICBfdXNlU3RhdGU4ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNywgMiksCiAgICAgIHNlbGVjdGVkSXRlbXMgPSBfdXNlU3RhdGU4WzBdLAogICAgICBzZXRTZWxlY3RlZEl0ZW1zID0gX3VzZVN0YXRlOFsxXTsKCiAgdmFyIF91c2VTdGF0ZTkgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShmYWxzZSksCiAgICAgIF91c2VTdGF0ZTEwID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlOSwgMiksCiAgICAgIGlzTG9hZGluZ0FjdGlvblR5cGVzID0gX3VzZVN0YXRlMTBbMF0sCiAgICAgIHNldElzTG9hZGluZ0FjdGlvblR5cGVzID0gX3VzZVN0YXRlMTBbMV07CgogIHZhciBfdXNlU3RhdGUxMSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGZhbHNlKSwKICAgICAgX3VzZVN0YXRlMTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUxMSwgMiksCiAgICAgIGlzTG9hZGluZ0FjdGlvbnMgPSBfdXNlU3RhdGUxMlswXSwKICAgICAgc2V0SXNMb2FkaW5nQWN0aW9ucyA9IF91c2VTdGF0ZTEyWzFdOwoKICB2YXIgX3VzZVN0YXRlMTMgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShmYWxzZSksCiAgICAgIF91c2VTdGF0ZTE0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTMsIDIpLAogICAgICBlZGl0Rmx5b3V0VmlzaWJsZSA9IF91c2VTdGF0ZTE0WzBdLAogICAgICBzZXRFZGl0Rmx5b3V0VmlzaWJpbGl0eSA9IF91c2VTdGF0ZTE0WzFdOwoKICB2YXIgX3VzZVN0YXRlMTUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShmYWxzZSksCiAgICAgIF91c2VTdGF0ZTE2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTUsIDIpLAogICAgICBhZGRGbHlvdXRWaXNpYmxlID0gX3VzZVN0YXRlMTZbMF0sCiAgICAgIHNldEFkZEZseW91dFZpc2liaWxpdHkgPSBfdXNlU3RhdGUxNlsxXTsKCiAgdmFyIF91c2VTdGF0ZTE3ID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoW10pLAogICAgICBfdXNlU3RhdGUxOCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTE3LCAyKSwKICAgICAgYWN0aW9uVHlwZXNMaXN0ID0gX3VzZVN0YXRlMThbMF0sCiAgICAgIHNldEFjdGlvblR5cGVzTGlzdCA9IF91c2VTdGF0ZTE4WzFdOwoKICB2YXIgX3VzZVN0YXRlMTkgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSh1bmRlZmluZWQpLAogICAgICBfdXNlU3RhdGUyMCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTE5LCAyKSwKICAgICAgZWRpdGVkQ29ubmVjdG9ySXRlbSA9IF91c2VTdGF0ZTIwWzBdLAogICAgICBzZXRFZGl0ZWRDb25uZWN0b3JJdGVtID0gX3VzZVN0YXRlMjBbMV07CgogIHZhciBfdXNlU3RhdGUyMSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKFtdKSwKICAgICAgX3VzZVN0YXRlMjIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUyMSwgMiksCiAgICAgIGNvbm5lY3RvcnNUb0RlbGV0ZSA9IF91c2VTdGF0ZTIyWzBdLAogICAgICBzZXRDb25uZWN0b3JzVG9EZWxldGUgPSBfdXNlU3RhdGUyMlsxXTsKCiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIGxvYWRBY3Rpb25zKCk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHMKICB9LCBbXSk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIF9hc3luY1RvR2VuZXJhdG9yKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGFjdGlvblR5cGVzLCBpbmRleCwgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiwgX2RpZEl0ZXJhdG9yRXJyb3IsIF9pdGVyYXRvckVycm9yLCBfaXRlcmF0b3IsIF9zdGVwLCBhY3Rpb25UeXBlSXRlbTsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgICBzZXRJc0xvYWRpbmdBY3Rpb25UeXBlcyh0cnVlKTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gKDAsIF9hY3Rpb25fY29ubmVjdG9yX2FwaS5sb2FkQWN0aW9uVHlwZXMpKHsKICAgICAgICAgICAgICAgIGh0dHA6IGh0dHAKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBhY3Rpb25UeXBlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgaW5kZXggPSB7fTsKICAgICAgICAgICAgICBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTsKICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlOwogICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA5OwoKICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvciA9IGFjdGlvblR5cGVzW1N5bWJvbC5pdGVyYXRvcl0oKTsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7CiAgICAgICAgICAgICAgICBhY3Rpb25UeXBlSXRlbSA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICAgICAgaW5kZXhbYWN0aW9uVHlwZUl0ZW0uaWRdID0gYWN0aW9uVHlwZUl0ZW07CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMzsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDkpOwogICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTsKICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IF9jb250ZXh0LnQwOwoKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTc7CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE4OwoKICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjA7CgogICAgICAgICAgICAgIGlmICghX2RpZEl0ZXJhdG9yRXJyb3IpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7CgogICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5maW5pc2goMjApOwoKICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuZmluaXNoKDE3KTsKCiAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgICAgc2V0QWN0aW9uVHlwZXNJbmRleChpbmRleCk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDMxOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjg7CiAgICAgICAgICAgICAgX2NvbnRleHQudDEgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICB0b2FzdE5vdGlmaWNhdGlvbnMuYWRkRGFuZ2VyKHsKICAgICAgICAgICAgICAgIHRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJpZ2dlcnNBY3Rpb25zVUkuc2VjdGlvbnMuYWN0aW9uc0Nvbm5lY3RvcnNMaXN0LnVuYWJsZVRvTG9hZEFjdGlvblR5cGVzTWVzc2FnZScsIHsKICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdVbmFibGUgdG8gbG9hZCBhY3Rpb24gdHlwZXMnCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzE7CiAgICAgICAgICAgICAgc2V0SXNMb2FkaW5nQWN0aW9uVHlwZXMoZmFsc2UpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5maW5pc2goMzEpOwoKICAgICAgICAgICAgY2FzZSAzNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1swLCAyOCwgMzEsIDM0XSwgWzksIDEzLCAxNywgMjVdLCBbMTgsLCAyMCwgMjRdXSk7CiAgICB9KSkoKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwcwoKICB9LCBbXSk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIC8vIEF2b2lkIGZsaWNrZXJpbmcgYmVmb3JlIGFjdGlvbiB0eXBlcyBsb2FkCiAgICBpZiAodHlwZW9mIGFjdGlvblR5cGVzSW5kZXggPT09ICd1bmRlZmluZWQnKSB7CiAgICAgIHJldHVybjsKICAgIH0gLy8gVXBkYXRlIHRoZSBkYXRhIGZvciB0aGUgdGFibGUKCgogICAgdmFyIHVwZGF0ZWREYXRhID0gYWN0aW9ucy5tYXAoZnVuY3Rpb24gKGFjdGlvbikgewogICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgYWN0aW9uLCB7CiAgICAgICAgYWN0aW9uVHlwZTogYWN0aW9uVHlwZXNJbmRleFthY3Rpb24uYWN0aW9uVHlwZUlkXSA/IGFjdGlvblR5cGVzSW5kZXhbYWN0aW9uLmFjdGlvblR5cGVJZF0ubmFtZSA6IGFjdGlvbi5hY3Rpb25UeXBlSWQKICAgICAgfSk7CiAgICB9KTsKICAgIHNldERhdGEodXBkYXRlZERhdGEpOyAvLyBVcGRhdGUgdGhlIGFjdGlvbiB0eXBlcyBsaXN0IGZvciB0aGUgZmlsdGVyCgogICAgdmFyIGFjdGlvblR5cGVzID0gT2JqZWN0LnZhbHVlcyhhY3Rpb25UeXBlc0luZGV4KS5tYXAoZnVuY3Rpb24gKGFjdGlvblR5cGUpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB2YWx1ZTogYWN0aW9uVHlwZS5pZCwKICAgICAgICBuYW1lOiAiIi5jb25jYXQoYWN0aW9uVHlwZS5uYW1lLCAiICgiKS5jb25jYXQoZ2V0QWN0aW9uc0NvdW50QnlBY3Rpb25UeXBlKGFjdGlvbnMsIGFjdGlvblR5cGUuaWQpLCAiKSIpCiAgICAgIH07CiAgICB9KS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgIHJldHVybiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpOwogICAgfSk7CiAgICBzZXRBY3Rpb25UeXBlc0xpc3QoYWN0aW9uVHlwZXMpOwogIH0sIFthY3Rpb25zLCBhY3Rpb25UeXBlc0luZGV4XSk7CgogIGZ1bmN0aW9uIGxvYWRBY3Rpb25zKCkgewogICAgcmV0dXJuIF9sb2FkQWN0aW9ucy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KCiAgZnVuY3Rpb24gX2xvYWRBY3Rpb25zKCkgewogICAgX2xvYWRBY3Rpb25zID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgdmFyIGFjdGlvbnNSZXNwb25zZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzZXRJc0xvYWRpbmdBY3Rpb25zKHRydWUpOwogICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMTsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuICgwLCBfYWN0aW9uX2Nvbm5lY3Rvcl9hcGkubG9hZEFsbEFjdGlvbnMpKHsKICAgICAgICAgICAgICAgIGh0dHA6IGh0dHAKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBhY3Rpb25zUmVzcG9uc2UgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICBzZXRBY3Rpb25zKGFjdGlvbnNSZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDExOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gODsKICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSBfY29udGV4dDRbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgdG9hc3ROb3RpZmljYXRpb25zLmFkZERhbmdlcih7CiAgICAgICAgICAgICAgICB0aXRsZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLnNlY3Rpb25zLmFjdGlvbnNDb25uZWN0b3JzTGlzdC51bmFibGVUb0xvYWRBY3Rpb25zTWVzc2FnZScsIHsKICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdVbmFibGUgdG8gbG9hZCBjb25uZWN0b3JzJwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAxMTsKICAgICAgICAgICAgICBzZXRJc0xvYWRpbmdBY3Rpb25zKGZhbHNlKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmZpbmlzaCgxMSk7CgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTQsIG51bGwsIFtbMSwgOCwgMTEsIDE0XV0pOwogICAgfSkpOwogICAgcmV0dXJuIF9sb2FkQWN0aW9ucy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KCiAgZnVuY3Rpb24gZWRpdEl0ZW0oX3gpIHsKICAgIHJldHVybiBfZWRpdEl0ZW0uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CgogIGZ1bmN0aW9uIF9lZGl0SXRlbSgpIHsKICAgIF9lZGl0SXRlbSA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoY29ubmVjdG9yVGFibGVJdGVtKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc2V0RWRpdGVkQ29ubmVjdG9ySXRlbShjb25uZWN0b3JUYWJsZUl0ZW0pOwogICAgICAgICAgICAgIHNldEVkaXRGbHlvdXRWaXNpYmlsaXR5KHRydWUpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTUpOwogICAgfSkpOwogICAgcmV0dXJuIF9lZGl0SXRlbS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KCiAgdmFyIGFjdGlvbnNUYWJsZUNvbHVtbnMgPSBbewogICAgZmllbGQ6ICduYW1lJywKICAgICdkYXRhLXRlc3Qtc3Viaic6ICdjb25uZWN0b3JzVGFibGVDZWxsLW5hbWUnLAogICAgbmFtZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLnNlY3Rpb25zLmFjdGlvbnNDb25uZWN0b3JzTGlzdC5jb25uZWN0b3JzTGlzdFRhYmxlLmNvbHVtbnMubmFtZVRpdGxlJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ05hbWUnCiAgICB9KSwKICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgIHRydW5jYXRlVGV4dDogdHJ1ZSwKICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKHZhbHVlLCBpdGVtKSB7CiAgICAgIHZhciBjaGVja0VuYWJsZWRSZXN1bHQgPSAoMCwgX2NoZWNrX2FjdGlvbl90eXBlX2VuYWJsZWQuY2hlY2tBY3Rpb25UeXBlRW5hYmxlZCkoYWN0aW9uVHlwZXNJbmRleCAmJiBhY3Rpb25UeXBlc0luZGV4W2l0ZW0uYWN0aW9uVHlwZUlkXSk7CgogICAgICB2YXIgbGluayA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlMaW5rLCB7CiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImVkaXQiLmNvbmNhdChpdGVtLmlkKSwKICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgcmV0dXJuIGVkaXRJdGVtKGl0ZW0pOwogICAgICAgIH0sCiAgICAgICAga2V5OiBpdGVtLmlkLAogICAgICAgIGRpc2FibGVkOiBhY3Rpb25UeXBlc0luZGV4ID8gIWFjdGlvblR5cGVzSW5kZXhbaXRlbS5hY3Rpb25UeXBlSWRdLmVuYWJsZWQgOiB0cnVlCiAgICAgIH0sIHZhbHVlKTsKCiAgICAgIHJldHVybiBjaGVja0VuYWJsZWRSZXN1bHQuaXNFbmFibGVkID8gbGluayA6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBsaW5rLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpSWNvblRpcCwgewogICAgICAgIHR5cGU6ICJxdWVzdGlvbkluQ2lyY2xlIiwKICAgICAgICBjb250ZW50OiBjaGVja0VuYWJsZWRSZXN1bHQubWVzc2FnZSwKICAgICAgICBwb3NpdGlvbjogInJpZ2h0IgogICAgICB9KSk7CiAgICB9CiAgfSwgewogICAgZmllbGQ6ICdhY3Rpb25UeXBlJywKICAgICdkYXRhLXRlc3Qtc3Viaic6ICdjb25uZWN0b3JzVGFibGVDZWxsLWFjdGlvblR5cGUnLAogICAgbmFtZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLnNlY3Rpb25zLmFjdGlvbnNDb25uZWN0b3JzTGlzdC5jb25uZWN0b3JzTGlzdFRhYmxlLmNvbHVtbnMuYWN0aW9uVHlwZVRpdGxlJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ1R5cGUnCiAgICB9KSwKICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgIHRydW5jYXRlVGV4dDogdHJ1ZQogIH0sIHsKICAgIGZpZWxkOiAncmVmZXJlbmNlZEJ5Q291bnQnLAogICAgJ2RhdGEtdGVzdC1zdWJqJzogJ2Nvbm5lY3RvcnNUYWJsZUNlbGwtcmVmZXJlbmNlZEJ5Q291bnQnLAogICAgbmFtZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLnNlY3Rpb25zLmFjdGlvbnNDb25uZWN0b3JzTGlzdC5jb25uZWN0b3JzTGlzdFRhYmxlLmNvbHVtbnMucmVmZXJlbmNlZEJ5Q291bnRUaXRsZScsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdBY3Rpb25zJwogICAgfSksCiAgICBzb3J0YWJsZTogZmFsc2UsCiAgICB0cnVuY2F0ZVRleHQ6IHRydWUsCiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcih2YWx1ZSwgaXRlbSkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJhZGdlLCB7CiAgICAgICAgY29sb3I6ICJob2xsb3ciLAogICAgICAgIGtleTogaXRlbS5pZAogICAgICB9LCB2YWx1ZSk7CiAgICB9CiAgfSwgewogICAgZmllbGQ6ICcnLAogICAgbmFtZTogJycsCiAgICBhY3Rpb25zOiBbewogICAgICBlbmFibGVkOiBmdW5jdGlvbiBlbmFibGVkKCkgewogICAgICAgIHJldHVybiBjYW5EZWxldGU7CiAgICAgIH0sCiAgICAgICdkYXRhLXRlc3Qtc3Viaic6ICdkZWxldGVDb25uZWN0b3InLAogICAgICBuYW1lOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJpZ2dlcnNBY3Rpb25zVUkuc2VjdGlvbnMuYWN0aW9uc0Nvbm5lY3RvcnNMaXN0LmNvbm5lY3RvcnNMaXN0VGFibGUuY29sdW1ucy5hY3Rpb25zLmRlbGV0ZUFjdGlvbk5hbWUnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdEZWxldGUnCiAgICAgIH0pLAogICAgICBkZXNjcmlwdGlvbjogY2FuRGVsZXRlID8gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLnNlY3Rpb25zLmFjdGlvbnNDb25uZWN0b3JzTGlzdC5jb25uZWN0b3JzTGlzdFRhYmxlLmNvbHVtbnMuYWN0aW9ucy5kZWxldGVBY3Rpb25EZXNjcmlwdGlvbicsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0RlbGV0ZSB0aGlzIGNvbm5lY3RvcicKICAgICAgfSkgOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJpZ2dlcnNBY3Rpb25zVUkuc2VjdGlvbnMuYWN0aW9uc0Nvbm5lY3RvcnNMaXN0LmNvbm5lY3RvcnNMaXN0VGFibGUuY29sdW1ucy5hY3Rpb25zLmRlbGV0ZUFjdGlvbkRpc2FibGVkRGVzY3JpcHRpb24nLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdVbmFibGUgdG8gZGVsZXRlIGNvbm5lY3RvcnMnCiAgICAgIH0pLAogICAgICB0eXBlOiAnaWNvbicsCiAgICAgIGljb246ICd0cmFzaCcsCiAgICAgIGNvbG9yOiAnZGFuZ2VyJywKICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhpdGVtKSB7CiAgICAgICAgcmV0dXJuIHNldENvbm5lY3RvcnNUb0RlbGV0ZShbaXRlbS5pZF0pOwogICAgICB9CiAgICB9XQogIH1dOwoKICB2YXIgdGFibGUgPSBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpSW5NZW1vcnlUYWJsZSwgewogICAgbG9hZGluZzogaXNMb2FkaW5nQWN0aW9ucyB8fCBpc0xvYWRpbmdBY3Rpb25UeXBlcywKICAgIGl0ZW1zOiBkYXRhLAogICAgc29ydGluZzogdHJ1ZSwKICAgIGl0ZW1JZDogImlkIiwKICAgIGNvbHVtbnM6IGFjdGlvbnNUYWJsZUNvbHVtbnMsCiAgICByb3dQcm9wczogZnVuY3Rpb24gcm93UHJvcHMoaXRlbSkgewogICAgICByZXR1cm4gewogICAgICAgIGNsYXNzTmFtZTogIWFjdGlvblR5cGVzSW5kZXggfHwgIWFjdGlvblR5cGVzSW5kZXhbaXRlbS5hY3Rpb25UeXBlSWRdLmVuYWJsZWQgPyAnYWN0Q29ubmVjdG9yc0xpc3RfX3RhYmxlUm93RGlzYWJsZWQnIDogJycsCiAgICAgICAgJ2RhdGEtdGVzdC1zdWJqJzogJ2Nvbm5lY3RvcnMtcm93JwogICAgICB9OwogICAgfSwKICAgIGNlbGxQcm9wczogZnVuY3Rpb24gY2VsbFByb3BzKGl0ZW0pIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAnZGF0YS10ZXN0LXN1YmonOiAnY2VsbCcsCiAgICAgICAgY2xhc3NOYW1lOiAhYWN0aW9uVHlwZXNJbmRleCB8fCAhYWN0aW9uVHlwZXNJbmRleFtpdGVtLmFjdGlvblR5cGVJZF0uZW5hYmxlZCA/ICdhY3RDb25uZWN0b3JzTGlzdF9fdGFibGVDZWxsRGlzYWJsZWQnIDogJycKICAgICAgfTsKICAgIH0sCiAgICAiZGF0YS10ZXN0LXN1YmoiOiAiYWN0aW9uc1RhYmxlIiwKICAgIHBhZ2luYXRpb246IHRydWUsCiAgICBzZWxlY3Rpb246IGNhbkRlbGV0ZSA/IHsKICAgICAgb25TZWxlY3Rpb25DaGFuZ2U6IGZ1bmN0aW9uIG9uU2VsZWN0aW9uQ2hhbmdlKHVwZGF0ZWRTZWxlY3RlZEl0ZW1zTGlzdCkgewogICAgICAgIHNldFNlbGVjdGVkSXRlbXModXBkYXRlZFNlbGVjdGVkSXRlbXNMaXN0KTsKICAgICAgfQogICAgfSA6IHVuZGVmaW5lZCwKICAgIHNlYXJjaDogewogICAgICBmaWx0ZXJzOiBbewogICAgICAgIHR5cGU6ICdmaWVsZF92YWx1ZV9zZWxlY3Rpb24nLAogICAgICAgIGZpZWxkOiAnYWN0aW9uVHlwZUlkJywKICAgICAgICBuYW1lOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJpZ2dlcnNBY3Rpb25zVUkuc2VjdGlvbnMuYWN0aW9uc0Nvbm5lY3RvcnNMaXN0LmZpbHRlcnMuYWN0aW9uVHlwZUlkTmFtZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVHlwZScKICAgICAgICB9KSwKICAgICAgICBtdWx0aVNlbGVjdDogJ29yJywKICAgICAgICBvcHRpb25zOiBhY3Rpb25UeXBlc0xpc3QKICAgICAgfV0sCiAgICAgIHRvb2xzTGVmdDogc2VsZWN0ZWRJdGVtcy5sZW5ndGggPT09IDAgfHwgIWNhbkRlbGV0ZSA/IFtdIDogW19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b24sIHsKICAgICAgICBrZXk6ICJkZWxldGUiLAogICAgICAgIGljb25UeXBlOiAidHJhc2giLAogICAgICAgIGNvbG9yOiAiZGFuZ2VyIiwKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiYnVsa0RlbGV0ZSIsCiAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgIHNldENvbm5lY3RvcnNUb0RlbGV0ZShzZWxlY3RlZEl0ZW1zLm1hcChmdW5jdGlvbiAoc2VsZWN0ZWQpIHsKICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkLmlkOwogICAgICAgICAgfSkpOwogICAgICAgIH0sCiAgICAgICAgdGl0bGU6IGNhbkRlbGV0ZSA/IHVuZGVmaW5lZCA6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmlnZ2Vyc0FjdGlvbnNVSS5zZWN0aW9ucy5hY3Rpb25zQ29ubmVjdG9yc0xpc3QuYnV0dG9ucy5kZWxldGVEaXNhYmxlZFRpdGxlJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdVbmFibGUgdG8gZGVsZXRlIGNvbm5lY3RvcnMnCiAgICAgICAgfSkKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLnNlY3Rpb25zLmFjdGlvbnNDb25uZWN0b3JzTGlzdC5idXR0b25zLmRlbGV0ZUxhYmVsIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkRlbGV0ZSB7Y291bnR9IiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGNvdW50OiBzZWxlY3RlZEl0ZW1zLmxlbmd0aAogICAgICAgIH0KICAgICAgfSkpXSwKICAgICAgdG9vbHNSaWdodDogW19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlCdXR0b24sIHsKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAiY3JlYXRlQWN0aW9uQnV0dG9uIiwKICAgICAgICBrZXk6ICJjcmVhdGUtYWN0aW9uIiwKICAgICAgICBmaWxsOiB0cnVlLAogICAgICAgIGljb25UeXBlOiAicGx1c0luQ2lyY2xlIiwKICAgICAgICBpY29uU2lkZTogImxlZnQiLAogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICByZXR1cm4gc2V0QWRkRmx5b3V0VmlzaWJpbGl0eSh0cnVlKTsKICAgICAgICB9CiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay50cmlnZ2Vyc0FjdGlvbnNVSS5zZWN0aW9ucy5hY3Rpb25zQ29ubmVjdG9yc0xpc3QuYWRkQWN0aW9uQnV0dG9uTGFiZWwiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQ3JlYXRlIGNvbm5lY3RvciIKICAgICAgfSkpXQogICAgfQogIH0pOwoKICB2YXIgbm9QZXJtaXNzaW9uUHJvbXB0ID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiaDIiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgaWQ6ICJ4cGFjay50cmlnZ2Vyc0FjdGlvbnNVSS5zZWN0aW9ucy5hY3Rpb25zQ29ubmVjdG9yc0xpc3Qubm9QZXJtaXNzaW9uVG9DcmVhdGVUaXRsZSIsCiAgICBkZWZhdWx0TWVzc2FnZTogIk5vIHBlcm1pc3Npb25zIHRvIGNyZWF0ZSBjb25uZWN0b3IiCiAgfSkpOwoKICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgic2VjdGlvbiIsIHsKICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJhY3Rpb25zTGlzdCIKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9kZWxldGVfbW9kYWxfY29uZmlybWF0aW9uLkRlbGV0ZU1vZGFsQ29uZmlybWF0aW9uLCB7CiAgICBvbkRlbGV0ZWQ6IGZ1bmN0aW9uIG9uRGVsZXRlZChkZWxldGVkKSB7CiAgICAgIGlmIChzZWxlY3RlZEl0ZW1zLmxlbmd0aCA9PT0gMCB8fCBzZWxlY3RlZEl0ZW1zLmxlbmd0aCA9PT0gZGVsZXRlZC5sZW5ndGgpIHsKICAgICAgICB2YXIgdXBkYXRlZEFjdGlvbnMgPSBhY3Rpb25zLmZpbHRlcihmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICAgICAgICByZXR1cm4gYWN0aW9uLmlkICYmICFjb25uZWN0b3JzVG9EZWxldGUuaW5jbHVkZXMoYWN0aW9uLmlkKTsKICAgICAgICB9KTsKICAgICAgICBzZXRBY3Rpb25zKHVwZGF0ZWRBY3Rpb25zKTsKICAgICAgICBzZXRTZWxlY3RlZEl0ZW1zKFtdKTsKICAgICAgfQoKICAgICAgc2V0Q29ubmVjdG9yc1RvRGVsZXRlKFtdKTsKICAgIH0sCiAgICBvbkVycm9yczoKICAgIC8qI19fUFVSRV9fKi8KICAgIF9hc3luY1RvR2VuZXJhdG9yKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBsb2FkQWN0aW9ucygpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHNldENvbm5lY3RvcnNUb0RlbGV0ZShbXSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSksCiAgICBvbkNhbmNlbDoKICAgIC8qI19fUFVSRV9fKi8KICAgIF9hc3luY1RvR2VuZXJhdG9yKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc2V0Q29ubmVjdG9yc1RvRGVsZXRlKFtdKTsKCiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzKTsKICAgIH0pKSwKICAgIGFwaURlbGV0ZUNhbGw6IF9hY3Rpb25fY29ubmVjdG9yX2FwaS5kZWxldGVBY3Rpb25zLAogICAgaWRzVG9EZWxldGU6IGNvbm5lY3RvcnNUb0RlbGV0ZSwKICAgIHNpbmdsZVRpdGxlOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJpZ2dlcnNBY3Rpb25zVUkuc2VjdGlvbnMuYWN0aW9uc0Nvbm5lY3RvcnNMaXN0LnNpbmdsZVRpdGxlJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ2Nvbm5lY3RvcicKICAgIH0pLAogICAgbXVsdGlwbGVUaXRsZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLnNlY3Rpb25zLmFjdGlvbnNDb25uZWN0b3JzTGlzdC5tdWx0aXBsZVRpdGxlJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ2Nvbm5lY3RvcnMnCiAgICB9KQogIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCB7CiAgICBzaXplOiAibSIKICB9KSwgKGlzTG9hZGluZ0FjdGlvbnMgfHwgaXNMb2FkaW5nQWN0aW9uVHlwZXMpICYmIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgIGp1c3RpZnlDb250ZW50OiAiY2VudGVyIiwKICAgIGFsaWduSXRlbXM6ICJjZW50ZXIiCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICBncm93OiBmYWxzZQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlMb2FkaW5nU3Bpbm5lciwgewogICAgc2l6ZTogInhsIgogIH0pKSksIGRhdGEubGVuZ3RoICE9PSAwICYmIHRhYmxlLCBkYXRhLmxlbmd0aCA9PT0gMCAmJiBjYW5TYXZlICYmICFpc0xvYWRpbmdBY3Rpb25zICYmICFpc0xvYWRpbmdBY3Rpb25UeXBlcyAmJiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9lbXB0eV9jb25uZWN0b3JzX3Byb21wdC5FbXB0eUNvbm5lY3RvcnNQcm9tcHQsIHsKICAgIG9uQ1RBQ2xpY2tlZDogZnVuY3Rpb24gb25DVEFDbGlja2VkKCkgewogICAgICByZXR1cm4gc2V0QWRkRmx5b3V0VmlzaWJpbGl0eSh0cnVlKTsKICAgIH0KICB9KSwgZGF0YS5sZW5ndGggPT09IDAgJiYgIWNhblNhdmUgJiYgbm9QZXJtaXNzaW9uUHJvbXB0LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9hY3Rpb25zX2Nvbm5lY3RvcnNfY29udGV4dC5BY3Rpb25zQ29ubmVjdG9yc0NvbnRleHRQcm92aWRlciwgewogICAgdmFsdWU6IHsKICAgICAgYWN0aW9uVHlwZVJlZ2lzdHJ5OiBhY3Rpb25UeXBlUmVnaXN0cnksCiAgICAgIGh0dHA6IGh0dHAsCiAgICAgIGNhcGFiaWxpdGllczogY2FwYWJpbGl0aWVzLAogICAgICB0b2FzdE5vdGlmaWNhdGlvbnM6IHRvYXN0Tm90aWZpY2F0aW9ucywKICAgICAgcmVsb2FkQ29ubmVjdG9yczogbG9hZEFjdGlvbnMKICAgIH0KICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9hY3Rpb25fY29ubmVjdG9yX2Zvcm0uQ29ubmVjdG9yQWRkRmx5b3V0LCB7CiAgICBhZGRGbHlvdXRWaXNpYmxlOiBhZGRGbHlvdXRWaXNpYmxlLAogICAgc2V0QWRkRmx5b3V0VmlzaWJpbGl0eTogc2V0QWRkRmx5b3V0VmlzaWJpbGl0eQogIH0pLCBlZGl0ZWRDb25uZWN0b3JJdGVtID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfYWN0aW9uX2Nvbm5lY3Rvcl9mb3JtLkNvbm5lY3RvckVkaXRGbHlvdXQsIHsKICAgIGtleTogZWRpdGVkQ29ubmVjdG9ySXRlbS5pZCwKICAgIGluaXRpYWxDb25uZWN0b3I6IGVkaXRlZENvbm5lY3Rvckl0ZW0sCiAgICBlZGl0Rmx5b3V0VmlzaWJsZTogZWRpdEZseW91dFZpc2libGUsCiAgICBzZXRFZGl0Rmx5b3V0VmlzaWJpbGl0eTogc2V0RWRpdEZseW91dFZpc2liaWxpdHkKICB9KSA6IG51bGwpKTsKfTsKCmV4cG9ydHMuQWN0aW9uc0Nvbm5lY3RvcnNMaXN0ID0gQWN0aW9uc0Nvbm5lY3RvcnNMaXN0OwoKZnVuY3Rpb24gZ2V0QWN0aW9uc0NvdW50QnlBY3Rpb25UeXBlKGFjdGlvbnMsIGFjdGlvblR5cGVJZCkgewogIHJldHVybiBhY3Rpb25zLmZpbHRlcihmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICByZXR1cm4gYWN0aW9uLmFjdGlvblR5cGVJZCA9PT0gYWN0aW9uVHlwZUlkOwogIH0pLmxlbmd0aDsKfQ=="},null]}