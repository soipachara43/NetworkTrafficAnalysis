{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/index_management/public/application/services/api.js","dependencies":[{"path":"x-pack/plugins/index_management/public/application/services/api.js","mtime":1589249554144},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmxvYWRJbmRpY2VzID0gbG9hZEluZGljZXM7CmV4cG9ydHMucmVsb2FkSW5kaWNlcyA9IHJlbG9hZEluZGljZXM7CmV4cG9ydHMuY2xvc2VJbmRpY2VzID0gY2xvc2VJbmRpY2VzOwpleHBvcnRzLmRlbGV0ZUluZGljZXMgPSBkZWxldGVJbmRpY2VzOwpleHBvcnRzLm9wZW5JbmRpY2VzID0gb3BlbkluZGljZXM7CmV4cG9ydHMucmVmcmVzaEluZGljZXMgPSByZWZyZXNoSW5kaWNlczsKZXhwb3J0cy5mbHVzaEluZGljZXMgPSBmbHVzaEluZGljZXM7CmV4cG9ydHMuZm9yY2VtZXJnZUluZGljZXMgPSBmb3JjZW1lcmdlSW5kaWNlczsKZXhwb3J0cy5jbGVhckNhY2hlSW5kaWNlcyA9IGNsZWFyQ2FjaGVJbmRpY2VzOwpleHBvcnRzLmZyZWV6ZUluZGljZXMgPSBmcmVlemVJbmRpY2VzOwpleHBvcnRzLnVuZnJlZXplSW5kaWNlcyA9IHVuZnJlZXplSW5kaWNlczsKZXhwb3J0cy5sb2FkSW5kZXhTZXR0aW5ncyA9IGxvYWRJbmRleFNldHRpbmdzOwpleHBvcnRzLnVwZGF0ZUluZGV4U2V0dGluZ3MgPSB1cGRhdGVJbmRleFNldHRpbmdzOwpleHBvcnRzLmxvYWRJbmRleFN0YXRzID0gbG9hZEluZGV4U3RhdHM7CmV4cG9ydHMubG9hZEluZGV4TWFwcGluZyA9IGxvYWRJbmRleE1hcHBpbmc7CmV4cG9ydHMubG9hZEluZGV4RGF0YSA9IGxvYWRJbmRleERhdGE7CmV4cG9ydHMudXNlTG9hZEluZGV4VGVtcGxhdGVzID0gdXNlTG9hZEluZGV4VGVtcGxhdGVzOwpleHBvcnRzLmRlbGV0ZVRlbXBsYXRlcyA9IGRlbGV0ZVRlbXBsYXRlczsKZXhwb3J0cy51c2VMb2FkSW5kZXhUZW1wbGF0ZSA9IHVzZUxvYWRJbmRleFRlbXBsYXRlOwpleHBvcnRzLnNhdmVUZW1wbGF0ZSA9IHNhdmVUZW1wbGF0ZTsKZXhwb3J0cy51cGRhdGVUZW1wbGF0ZSA9IHVwZGF0ZVRlbXBsYXRlOwpleHBvcnRzLnNldFVpTWV0cmljU2VydmljZSA9IHZvaWQgMDsKCnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgiLi4vLi4vLi4vY29tbW9uL2NvbnN0YW50cyIpOwoKdmFyIF9jb25zdGFudHMyID0gcmVxdWlyZSgiLi4vY29uc3RhbnRzIik7Cgp2YXIgX3VzZV9yZXF1ZXN0ID0gcmVxdWlyZSgiLi91c2VfcmVxdWVzdCIpOwoKdmFyIF9odHRwID0gcmVxdWlyZSgiLi9odHRwIik7Cgp2YXIgX21hcHBpbmdzX2VkaXRvciA9IHJlcXVpcmUoIi4uL2NvbXBvbmVudHMvbWFwcGluZ3NfZWRpdG9yIik7CgpmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7CiAgdHJ5IHsKICAgIHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsKICAgIHZhciB2YWx1ZSA9IGluZm8udmFsdWU7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIHJlamVjdChlcnJvcik7CiAgICByZXR1cm47CiAgfQoKICBpZiAoaW5mby5kb25lKSB7CiAgICByZXNvbHZlKHZhbHVlKTsKICB9IGVsc2UgewogICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOwogIH0KfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgdmFyIHNlbGYgPSB0aGlzLAogICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7CgogICAgICBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgewogICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsKICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7CiAgICAgIH0KCiAgICAgIF9uZXh0KHVuZGVmaW5lZCk7CiAgICB9KTsKICB9Owp9IC8vIFRlbXBvcmFyeSBoYWNrIHRvIHByb3ZpZGUgdGhlIHVpTWV0cmljU2VydmljZSBpbnN0YW5jZSB0byB0aGlzIGZpbGUuCi8vIFRPRE86IFJlZmFjdG9yIGFuZCBleHBvcnQgYW4gQXBpU2VydmljZSBpbnN0YW5jZSB0aHJvdWdoIHRoZSBhcHAgZGVwZW5kZW5jaWVzIGNvbnRleHQKCgp2YXIgdWlNZXRyaWNTZXJ2aWNlOwoKdmFyIHNldFVpTWV0cmljU2VydmljZSA9IGZ1bmN0aW9uIHNldFVpTWV0cmljU2VydmljZShfdWlNZXRyaWNTZXJ2aWNlKSB7CiAgdWlNZXRyaWNTZXJ2aWNlID0gX3VpTWV0cmljU2VydmljZTsKfTsgLy8gRW5kIGhhY2sKCgpleHBvcnRzLnNldFVpTWV0cmljU2VydmljZSA9IHNldFVpTWV0cmljU2VydmljZTsKCmZ1bmN0aW9uIGxvYWRJbmRpY2VzKCkgewogIHJldHVybiBfbG9hZEluZGljZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX2xvYWRJbmRpY2VzKCkgewogIF9sb2FkSW5kaWNlcyA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgdmFyIHJlc3BvbnNlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIF9odHRwLmh0dHBTZXJ2aWNlLmh0dHBDbGllbnQuZ2V0KCIiLmNvbmNhdChfY29uc3RhbnRzLkFQSV9CQVNFX1BBVEgsICIvaW5kaWNlcyIpKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuZGF0YSA/IHJlc3BvbnNlLmRhdGEgOiByZXNwb25zZSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKICByZXR1cm4gX2xvYWRJbmRpY2VzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIHJlbG9hZEluZGljZXMoX3gpIHsKICByZXR1cm4gX3JlbG9hZEluZGljZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3JlbG9hZEluZGljZXMoKSB7CiAgX3JlbG9hZEluZGljZXMgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoaW5kZXhOYW1lcykgewogICAgdmFyIGJvZHksIHJlc3BvbnNlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgYm9keSA9IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICBpbmRleE5hbWVzOiBpbmRleE5hbWVzCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBfaHR0cC5odHRwU2VydmljZS5odHRwQ2xpZW50LnBvc3QoIiIuY29uY2F0KF9jb25zdGFudHMuQVBJX0JBU0VfUEFUSCwgIi9pbmRpY2VzL3JlbG9hZCIpLCB7CiAgICAgICAgICAgICAgYm9keTogYm9keQogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZS5kYXRhID8gcmVzcG9uc2UuZGF0YSA6IHJlc3BvbnNlKTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUyKTsKICB9KSk7CiAgcmV0dXJuIF9yZWxvYWRJbmRpY2VzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIGNsb3NlSW5kaWNlcyhfeDIpIHsKICByZXR1cm4gX2Nsb3NlSW5kaWNlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfY2xvc2VJbmRpY2VzKCkgewogIF9jbG9zZUluZGljZXMgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoaW5kaWNlcykgewogICAgdmFyIGJvZHksIHJlc3BvbnNlLCBldmVudE5hbWU7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBib2R5ID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgIGluZGljZXM6IGluZGljZXMKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIF9odHRwLmh0dHBTZXJ2aWNlLmh0dHBDbGllbnQucG9zdCgiIi5jb25jYXQoX2NvbnN0YW50cy5BUElfQkFTRV9QQVRILCAiL2luZGljZXMvY2xvc2UiKSwgewogICAgICAgICAgICAgIGJvZHk6IGJvZHkKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0My5zZW50OyAvLyBPbmx5IHRyYWNrIHN1Y2Nlc3NmdWwgcmVxdWVzdHMuCgogICAgICAgICAgICBldmVudE5hbWUgPSBpbmRpY2VzLmxlbmd0aCA+IDEgPyBfY29uc3RhbnRzLlVJTV9JTkRFWF9DTE9TRV9NQU5ZIDogX2NvbnN0YW50cy5VSU1fSU5ERVhfQ0xPU0U7CiAgICAgICAgICAgIHVpTWV0cmljU2VydmljZS50cmFja01ldHJpYygnY291bnQnLCBldmVudE5hbWUpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTMpOwogIH0pKTsKICByZXR1cm4gX2Nsb3NlSW5kaWNlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBkZWxldGVJbmRpY2VzKF94MykgewogIHJldHVybiBfZGVsZXRlSW5kaWNlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfZGVsZXRlSW5kaWNlcygpIHsKICBfZGVsZXRlSW5kaWNlcyA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNChpbmRpY2VzKSB7CiAgICB2YXIgYm9keSwgcmVzcG9uc2UsIGV2ZW50TmFtZTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGJvZHkgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgaW5kaWNlczogaW5kaWNlcwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gX2h0dHAuaHR0cFNlcnZpY2UuaHR0cENsaWVudC5wb3N0KCIiLmNvbmNhdChfY29uc3RhbnRzLkFQSV9CQVNFX1BBVEgsICIvaW5kaWNlcy9kZWxldGUiKSwgewogICAgICAgICAgICAgIGJvZHk6IGJvZHkKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0NC5zZW50OyAvLyBPbmx5IHRyYWNrIHN1Y2Nlc3NmdWwgcmVxdWVzdHMuCgogICAgICAgICAgICBldmVudE5hbWUgPSBpbmRpY2VzLmxlbmd0aCA+IDEgPyBfY29uc3RhbnRzLlVJTV9JTkRFWF9ERUxFVEVfTUFOWSA6IF9jb25zdGFudHMuVUlNX0lOREVYX0RFTEVURTsKICAgICAgICAgICAgdWlNZXRyaWNTZXJ2aWNlLnRyYWNrTWV0cmljKCdjb3VudCcsIGV2ZW50TmFtZSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNCk7CiAgfSkpOwogIHJldHVybiBfZGVsZXRlSW5kaWNlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBvcGVuSW5kaWNlcyhfeDQpIHsKICByZXR1cm4gX29wZW5JbmRpY2VzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9vcGVuSW5kaWNlcygpIHsKICBfb3BlbkluZGljZXMgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoaW5kaWNlcykgewogICAgdmFyIGJvZHksIHJlc3BvbnNlLCBldmVudE5hbWU7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBib2R5ID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgIGluZGljZXM6IGluZGljZXMKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIF9odHRwLmh0dHBTZXJ2aWNlLmh0dHBDbGllbnQucG9zdCgiIi5jb25jYXQoX2NvbnN0YW50cy5BUElfQkFTRV9QQVRILCAiL2luZGljZXMvb3BlbiIpLCB7CiAgICAgICAgICAgICAgYm9keTogYm9keQogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ1LnNlbnQ7IC8vIE9ubHkgdHJhY2sgc3VjY2Vzc2Z1bCByZXF1ZXN0cy4KCiAgICAgICAgICAgIGV2ZW50TmFtZSA9IGluZGljZXMubGVuZ3RoID4gMSA/IF9jb25zdGFudHMuVUlNX0lOREVYX09QRU5fTUFOWSA6IF9jb25zdGFudHMuVUlNX0lOREVYX09QRU47CiAgICAgICAgICAgIHVpTWV0cmljU2VydmljZS50cmFja01ldHJpYygnY291bnQnLCBldmVudE5hbWUpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTUpOwogIH0pKTsKICByZXR1cm4gX29wZW5JbmRpY2VzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIHJlZnJlc2hJbmRpY2VzKF94NSkgewogIHJldHVybiBfcmVmcmVzaEluZGljZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3JlZnJlc2hJbmRpY2VzKCkgewogIF9yZWZyZXNoSW5kaWNlcyA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNihpbmRpY2VzKSB7CiAgICB2YXIgYm9keSwgcmVzcG9uc2UsIGV2ZW50TmFtZTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGJvZHkgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgaW5kaWNlczogaW5kaWNlcwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gX2h0dHAuaHR0cFNlcnZpY2UuaHR0cENsaWVudC5wb3N0KCIiLmNvbmNhdChfY29uc3RhbnRzLkFQSV9CQVNFX1BBVEgsICIvaW5kaWNlcy9yZWZyZXNoIiksIHsKICAgICAgICAgICAgICBib2R5OiBib2R5CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDYuc2VudDsgLy8gT25seSB0cmFjayBzdWNjZXNzZnVsIHJlcXVlc3RzLgoKICAgICAgICAgICAgZXZlbnROYW1lID0gaW5kaWNlcy5sZW5ndGggPiAxID8gX2NvbnN0YW50cy5VSU1fSU5ERVhfUkVGUkVTSF9NQU5ZIDogX2NvbnN0YW50cy5VSU1fSU5ERVhfUkVGUkVTSDsKICAgICAgICAgICAgdWlNZXRyaWNTZXJ2aWNlLnRyYWNrTWV0cmljKCdjb3VudCcsIGV2ZW50TmFtZSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNik7CiAgfSkpOwogIHJldHVybiBfcmVmcmVzaEluZGljZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gZmx1c2hJbmRpY2VzKF94NikgewogIHJldHVybiBfZmx1c2hJbmRpY2VzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9mbHVzaEluZGljZXMoKSB7CiAgX2ZsdXNoSW5kaWNlcyA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNyhpbmRpY2VzKSB7CiAgICB2YXIgYm9keSwgcmVzcG9uc2UsIGV2ZW50TmFtZTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGJvZHkgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgaW5kaWNlczogaW5kaWNlcwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gX2h0dHAuaHR0cFNlcnZpY2UuaHR0cENsaWVudC5wb3N0KCIiLmNvbmNhdChfY29uc3RhbnRzLkFQSV9CQVNFX1BBVEgsICIvaW5kaWNlcy9mbHVzaCIpLCB7CiAgICAgICAgICAgICAgYm9keTogYm9keQogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ3LnNlbnQ7IC8vIE9ubHkgdHJhY2sgc3VjY2Vzc2Z1bCByZXF1ZXN0cy4KCiAgICAgICAgICAgIGV2ZW50TmFtZSA9IGluZGljZXMubGVuZ3RoID4gMSA/IF9jb25zdGFudHMuVUlNX0lOREVYX0ZMVVNIX01BTlkgOiBfY29uc3RhbnRzLlVJTV9JTkRFWF9GTFVTSDsKICAgICAgICAgICAgdWlNZXRyaWNTZXJ2aWNlLnRyYWNrTWV0cmljKCdjb3VudCcsIGV2ZW50TmFtZSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNyk7CiAgfSkpOwogIHJldHVybiBfZmx1c2hJbmRpY2VzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIGZvcmNlbWVyZ2VJbmRpY2VzKF94NywgX3g4KSB7CiAgcmV0dXJuIF9mb3JjZW1lcmdlSW5kaWNlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfZm9yY2VtZXJnZUluZGljZXMoKSB7CiAgX2ZvcmNlbWVyZ2VJbmRpY2VzID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KGluZGljZXMsIG1heE51bVNlZ21lbnRzKSB7CiAgICB2YXIgYm9keSwgcmVzcG9uc2UsIGV2ZW50TmFtZTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGJvZHkgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgaW5kaWNlczogaW5kaWNlcywKICAgICAgICAgICAgICBtYXhOdW1TZWdtZW50czogbWF4TnVtU2VnbWVudHMKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIF9odHRwLmh0dHBTZXJ2aWNlLmh0dHBDbGllbnQucG9zdCgiIi5jb25jYXQoX2NvbnN0YW50cy5BUElfQkFTRV9QQVRILCAiL2luZGljZXMvZm9yY2VtZXJnZSIpLCB7CiAgICAgICAgICAgICAgYm9keTogYm9keQogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ4LnNlbnQ7IC8vIE9ubHkgdHJhY2sgc3VjY2Vzc2Z1bCByZXF1ZXN0cy4KCiAgICAgICAgICAgIGV2ZW50TmFtZSA9IGluZGljZXMubGVuZ3RoID4gMSA/IF9jb25zdGFudHMuVUlNX0lOREVYX0ZPUkNFX01FUkdFX01BTlkgOiBfY29uc3RhbnRzLlVJTV9JTkRFWF9GT1JDRV9NRVJHRTsKICAgICAgICAgICAgdWlNZXRyaWNTZXJ2aWNlLnRyYWNrTWV0cmljKCdjb3VudCcsIGV2ZW50TmFtZSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlOCk7CiAgfSkpOwogIHJldHVybiBfZm9yY2VtZXJnZUluZGljZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gY2xlYXJDYWNoZUluZGljZXMoX3g5KSB7CiAgcmV0dXJuIF9jbGVhckNhY2hlSW5kaWNlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfY2xlYXJDYWNoZUluZGljZXMoKSB7CiAgX2NsZWFyQ2FjaGVJbmRpY2VzID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KGluZGljZXMpIHsKICAgIHZhciBib2R5LCByZXNwb25zZSwgZXZlbnROYW1lOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgYm9keSA9IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICBpbmRpY2VzOiBpbmRpY2VzCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBfaHR0cC5odHRwU2VydmljZS5odHRwQ2xpZW50LnBvc3QoIiIuY29uY2F0KF9jb25zdGFudHMuQVBJX0JBU0VfUEFUSCwgIi9pbmRpY2VzL2NsZWFyX2NhY2hlIiksIHsKICAgICAgICAgICAgICBib2R5OiBib2R5CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDkuc2VudDsgLy8gT25seSB0cmFjayBzdWNjZXNzZnVsIHJlcXVlc3RzLgoKICAgICAgICAgICAgZXZlbnROYW1lID0gaW5kaWNlcy5sZW5ndGggPiAxID8gX2NvbnN0YW50cy5VSU1fSU5ERVhfQ0xFQVJfQ0FDSEVfTUFOWSA6IF9jb25zdGFudHMuVUlNX0lOREVYX0NMRUFSX0NBQ0hFOwogICAgICAgICAgICB1aU1ldHJpY1NlcnZpY2UudHJhY2tNZXRyaWMoJ2NvdW50JywgZXZlbnROYW1lKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU5KTsKICB9KSk7CiAgcmV0dXJuIF9jbGVhckNhY2hlSW5kaWNlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBmcmVlemVJbmRpY2VzKF94MTApIHsKICByZXR1cm4gX2ZyZWV6ZUluZGljZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX2ZyZWV6ZUluZGljZXMoKSB7CiAgX2ZyZWV6ZUluZGljZXMgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKGluZGljZXMpIHsKICAgIHZhciBib2R5LCByZXNwb25zZSwgZXZlbnROYW1lOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGJvZHkgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgaW5kaWNlczogaW5kaWNlcwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIF9odHRwLmh0dHBTZXJ2aWNlLmh0dHBDbGllbnQucG9zdCgiIi5jb25jYXQoX2NvbnN0YW50cy5BUElfQkFTRV9QQVRILCAiL2luZGljZXMvZnJlZXplIiksIHsKICAgICAgICAgICAgICBib2R5OiBib2R5CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDEwLnNlbnQ7IC8vIE9ubHkgdHJhY2sgc3VjY2Vzc2Z1bCByZXF1ZXN0cy4KCiAgICAgICAgICAgIGV2ZW50TmFtZSA9IGluZGljZXMubGVuZ3RoID4gMSA/IF9jb25zdGFudHMuVUlNX0lOREVYX0ZSRUVaRV9NQU5ZIDogX2NvbnN0YW50cy5VSU1fSU5ERVhfRlJFRVpFOwogICAgICAgICAgICB1aU1ldHJpY1NlcnZpY2UudHJhY2tNZXRyaWMoJ2NvdW50JywgZXZlbnROYW1lKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTEwKTsKICB9KSk7CiAgcmV0dXJuIF9mcmVlemVJbmRpY2VzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIHVuZnJlZXplSW5kaWNlcyhfeDExKSB7CiAgcmV0dXJuIF91bmZyZWV6ZUluZGljZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX3VuZnJlZXplSW5kaWNlcygpIHsKICBfdW5mcmVlemVJbmRpY2VzID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMShpbmRpY2VzKSB7CiAgICB2YXIgYm9keSwgcmVzcG9uc2UsIGV2ZW50TmFtZTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBib2R5ID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgIGluZGljZXM6IGluZGljZXMKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBfaHR0cC5odHRwU2VydmljZS5odHRwQ2xpZW50LnBvc3QoIiIuY29uY2F0KF9jb25zdGFudHMuQVBJX0JBU0VfUEFUSCwgIi9pbmRpY2VzL3VuZnJlZXplIiksIHsKICAgICAgICAgICAgICBib2R5OiBib2R5CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDExLnNlbnQ7IC8vIE9ubHkgdHJhY2sgc3VjY2Vzc2Z1bCByZXF1ZXN0cy4KCiAgICAgICAgICAgIGV2ZW50TmFtZSA9IGluZGljZXMubGVuZ3RoID4gMSA/IF9jb25zdGFudHMuVUlNX0lOREVYX1VORlJFRVpFX01BTlkgOiBfY29uc3RhbnRzLlVJTV9JTkRFWF9VTkZSRUVaRTsKICAgICAgICAgICAgdWlNZXRyaWNTZXJ2aWNlLnRyYWNrTWV0cmljKCdjb3VudCcsIGV2ZW50TmFtZSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUxMSk7CiAgfSkpOwogIHJldHVybiBfdW5mcmVlemVJbmRpY2VzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIGxvYWRJbmRleFNldHRpbmdzKF94MTIpIHsKICByZXR1cm4gX2xvYWRJbmRleFNldHRpbmdzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9sb2FkSW5kZXhTZXR0aW5ncygpIHsKICBfbG9hZEluZGV4U2V0dGluZ3MgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEyKGluZGV4TmFtZSkgewogICAgdmFyIHJlc3BvbnNlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMiQoX2NvbnRleHQxMikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMi5wcmV2ID0gX2NvbnRleHQxMi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBfaHR0cC5odHRwU2VydmljZS5odHRwQ2xpZW50LmdldCgiIi5jb25jYXQoX2NvbnN0YW50cy5BUElfQkFTRV9QQVRILCAiL3NldHRpbmdzLyIpLmNvbmNhdChpbmRleE5hbWUpKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQxMi5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMTIpOwogIH0pKTsKICByZXR1cm4gX2xvYWRJbmRleFNldHRpbmdzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIHVwZGF0ZUluZGV4U2V0dGluZ3MoX3gxMywgX3gxNCkgewogIHJldHVybiBfdXBkYXRlSW5kZXhTZXR0aW5ncy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfdXBkYXRlSW5kZXhTZXR0aW5ncygpIHsKICBfdXBkYXRlSW5kZXhTZXR0aW5ncyA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTMoaW5kZXhOYW1lLCBib2R5KSB7CiAgICB2YXIgcmVzcG9uc2U7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEzJChfY29udGV4dDEzKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDEzLnByZXYgPSBfY29udGV4dDEzLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIF9odHRwLmh0dHBTZXJ2aWNlLmh0dHBDbGllbnQucHV0KCIiLmNvbmNhdChfY29uc3RhbnRzLkFQSV9CQVNFX1BBVEgsICIvc2V0dGluZ3MvIikuY29uY2F0KGluZGV4TmFtZSksIHsKICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KQogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQxMy5zZW50OyAvLyBPbmx5IHRyYWNrIHN1Y2Nlc3NmdWwgcmVxdWVzdHMuCgogICAgICAgICAgICB1aU1ldHJpY1NlcnZpY2UudHJhY2tNZXRyaWMoJ2NvdW50JywgX2NvbnN0YW50cy5VSU1fVVBEQVRFX1NFVFRJTkdTKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTEzKTsKICB9KSk7CiAgcmV0dXJuIF91cGRhdGVJbmRleFNldHRpbmdzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIGxvYWRJbmRleFN0YXRzKF94MTUpIHsKICByZXR1cm4gX2xvYWRJbmRleFN0YXRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9sb2FkSW5kZXhTdGF0cygpIHsKICBfbG9hZEluZGV4U3RhdHMgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE0KGluZGV4TmFtZSkgewogICAgdmFyIHJlc3BvbnNlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNCQoX2NvbnRleHQxNCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNC5wcmV2ID0gX2NvbnRleHQxNC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBfaHR0cC5odHRwU2VydmljZS5odHRwQ2xpZW50LmdldCgiIi5jb25jYXQoX2NvbnN0YW50cy5BUElfQkFTRV9QQVRILCAiL3N0YXRzLyIpLmNvbmNhdChpbmRleE5hbWUpKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQxNC5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMTQpOwogIH0pKTsKICByZXR1cm4gX2xvYWRJbmRleFN0YXRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIGxvYWRJbmRleE1hcHBpbmcoX3gxNikgewogIHJldHVybiBfbG9hZEluZGV4TWFwcGluZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfbG9hZEluZGV4TWFwcGluZygpIHsKICBfbG9hZEluZGV4TWFwcGluZyA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTUoaW5kZXhOYW1lKSB7CiAgICB2YXIgcmVzcG9uc2U7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE1JChfY29udGV4dDE1KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDE1LnByZXYgPSBfY29udGV4dDE1Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIF9odHRwLmh0dHBTZXJ2aWNlLmh0dHBDbGllbnQuZ2V0KCIiLmNvbmNhdChfY29uc3RhbnRzLkFQSV9CQVNFX1BBVEgsICIvbWFwcGluZy8iKS5jb25jYXQoaW5kZXhOYW1lKSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MTUuc2VudDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTE1KTsKICB9KSk7CiAgcmV0dXJuIF9sb2FkSW5kZXhNYXBwaW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIGxvYWRJbmRleERhdGEoX3gxNywgX3gxOCkgewogIHJldHVybiBfbG9hZEluZGV4RGF0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfbG9hZEluZGV4RGF0YSgpIHsKICBfbG9hZEluZGV4RGF0YSA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTYodHlwZSwgaW5kZXhOYW1lKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE2JChfY29udGV4dDE2KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDE2LnByZXYgPSBfY29udGV4dDE2Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQxNi50MCA9IHR5cGU7CiAgICAgICAgICAgIF9jb250ZXh0MTYubmV4dCA9IF9jb250ZXh0MTYudDAgPT09IF9jb25zdGFudHMyLlRBQl9NQVBQSU5HID8gMyA6IF9jb250ZXh0MTYudDAgPT09IF9jb25zdGFudHMyLlRBQl9TRVRUSU5HUyA/IDQgOiBfY29udGV4dDE2LnQwID09PSBfY29uc3RhbnRzMi5UQUJfU1RBVFMgPyA1IDogNjsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5hYnJ1cHQoInJldHVybiIsIGxvYWRJbmRleE1hcHBpbmcoaW5kZXhOYW1lKSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5hYnJ1cHQoInJldHVybiIsIGxvYWRJbmRleFNldHRpbmdzKGluZGV4TmFtZSkpOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTYuYWJydXB0KCJyZXR1cm4iLCBsb2FkSW5kZXhTdGF0cyhpbmRleE5hbWUpKTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMTYpOwogIH0pKTsKICByZXR1cm4gX2xvYWRJbmRleERhdGEuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gdXNlTG9hZEluZGV4VGVtcGxhdGVzKCkgewogIHJldHVybiAoMCwgX3VzZV9yZXF1ZXN0LnVzZVJlcXVlc3QpKHsKICAgIHBhdGg6ICIiLmNvbmNhdChfY29uc3RhbnRzLkFQSV9CQVNFX1BBVEgsICIvdGVtcGxhdGVzIiksCiAgICBtZXRob2Q6ICdnZXQnCiAgfSk7Cn0KCmZ1bmN0aW9uIGRlbGV0ZVRlbXBsYXRlcyhfeDE5KSB7CiAgcmV0dXJuIF9kZWxldGVUZW1wbGF0ZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX2RlbGV0ZVRlbXBsYXRlcygpIHsKICBfZGVsZXRlVGVtcGxhdGVzID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNyhuYW1lcykgewogICAgdmFyIHJlc3VsdCwgdWltQWN0aW9uVHlwZTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTckKF9jb250ZXh0MTcpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTcucHJldiA9IF9jb250ZXh0MTcubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICByZXN1bHQgPSAoMCwgX3VzZV9yZXF1ZXN0LnNlbmRSZXF1ZXN0KSh7CiAgICAgICAgICAgICAgcGF0aDogIiIuY29uY2F0KF9jb25zdGFudHMuQVBJX0JBU0VfUEFUSCwgIi90ZW1wbGF0ZXMvIikuY29uY2F0KG5hbWVzLm1hcChmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChuYW1lKTsKICAgICAgICAgICAgICB9KS5qb2luKCcsJykpLAogICAgICAgICAgICAgIG1ldGhvZDogJ2RlbGV0ZScKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHVpbUFjdGlvblR5cGUgPSBuYW1lcy5sZW5ndGggPiAxID8gX2NvbnN0YW50cy5VSU1fVEVNUExBVEVfREVMRVRFX01BTlkgOiBfY29uc3RhbnRzLlVJTV9URU1QTEFURV9ERUxFVEU7CiAgICAgICAgICAgIHVpTWV0cmljU2VydmljZS50cmFja01ldHJpYygnY291bnQnLCB1aW1BY3Rpb25UeXBlKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuYWJydXB0KCJyZXR1cm4iLCByZXN1bHQpOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE3LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUxNyk7CiAgfSkpOwogIHJldHVybiBfZGVsZXRlVGVtcGxhdGVzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIHVzZUxvYWRJbmRleFRlbXBsYXRlKG5hbWUpIHsKICByZXR1cm4gKDAsIF91c2VfcmVxdWVzdC51c2VSZXF1ZXN0KSh7CiAgICBwYXRoOiAiIi5jb25jYXQoX2NvbnN0YW50cy5BUElfQkFTRV9QQVRILCAiL3RlbXBsYXRlcy8iKS5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpKSwKICAgIG1ldGhvZDogJ2dldCcKICB9KTsKfQoKZnVuY3Rpb24gc2F2ZVRlbXBsYXRlKF94MjAsIF94MjEpIHsKICByZXR1cm4gX3NhdmVUZW1wbGF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfc2F2ZVRlbXBsYXRlKCkgewogIF9zYXZlVGVtcGxhdGUgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE4KHRlbXBsYXRlLCBpc0Nsb25lKSB7CiAgICB2YXIgaW5jbHVkZVR5cGVOYW1lLCByZXN1bHQsIHVpbUFjdGlvblR5cGU7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE4JChfY29udGV4dDE4KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDE4LnByZXYgPSBfY29udGV4dDE4Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgaW5jbHVkZVR5cGVOYW1lID0gKDAsIF9tYXBwaW5nc19lZGl0b3IuZG9NYXBwaW5nc0hhdmVUeXBlKSh0ZW1wbGF0ZS5tYXBwaW5ncyk7CiAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiAoMCwgX3VzZV9yZXF1ZXN0LnNlbmRSZXF1ZXN0KSh7CiAgICAgICAgICAgICAgcGF0aDogIiIuY29uY2F0KF9jb25zdGFudHMuQVBJX0JBU0VfUEFUSCwgIi90ZW1wbGF0ZXMiKSwKICAgICAgICAgICAgICBtZXRob2Q6ICdwdXQnLAogICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHRlbXBsYXRlKSwKICAgICAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAgICAgaW5jbHVkZV90eXBlX25hbWU6IGluY2x1ZGVUeXBlTmFtZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDE4LnNlbnQ7CiAgICAgICAgICAgIHVpbUFjdGlvblR5cGUgPSBpc0Nsb25lID8gX2NvbnN0YW50cy5VSU1fVEVNUExBVEVfQ0xPTkUgOiBfY29uc3RhbnRzLlVJTV9URU1QTEFURV9DUkVBVEU7CiAgICAgICAgICAgIHVpTWV0cmljU2VydmljZS50cmFja01ldHJpYygnY291bnQnLCB1aW1BY3Rpb25UeXBlKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguYWJydXB0KCJyZXR1cm4iLCByZXN1bHQpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE4LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUxOCk7CiAgfSkpOwogIHJldHVybiBfc2F2ZVRlbXBsYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIHVwZGF0ZVRlbXBsYXRlKF94MjIpIHsKICByZXR1cm4gX3VwZGF0ZVRlbXBsYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF91cGRhdGVUZW1wbGF0ZSgpIHsKICBfdXBkYXRlVGVtcGxhdGUgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE5KHRlbXBsYXRlKSB7CiAgICB2YXIgaW5jbHVkZVR5cGVOYW1lLCBuYW1lLCByZXN1bHQ7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE5JChfY29udGV4dDE5KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDE5LnByZXYgPSBfY29udGV4dDE5Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgaW5jbHVkZVR5cGVOYW1lID0gKDAsIF9tYXBwaW5nc19lZGl0b3IuZG9NYXBwaW5nc0hhdmVUeXBlKSh0ZW1wbGF0ZS5tYXBwaW5ncyk7CiAgICAgICAgICAgIG5hbWUgPSB0ZW1wbGF0ZS5uYW1lOwogICAgICAgICAgICBfY29udGV4dDE5Lm5leHQgPSA0OwogICAgICAgICAgICByZXR1cm4gKDAsIF91c2VfcmVxdWVzdC5zZW5kUmVxdWVzdCkoewogICAgICAgICAgICAgIHBhdGg6ICIiLmNvbmNhdChfY29uc3RhbnRzLkFQSV9CQVNFX1BBVEgsICIvdGVtcGxhdGVzLyIpLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQobmFtZSkpLAogICAgICAgICAgICAgIG1ldGhvZDogJ3B1dCcsCiAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodGVtcGxhdGUpLAogICAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgICBpbmNsdWRlX3R5cGVfbmFtZTogaW5jbHVkZVR5cGVOYW1lCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0MTkuc2VudDsKICAgICAgICAgICAgdWlNZXRyaWNTZXJ2aWNlLnRyYWNrTWV0cmljKCdjb3VudCcsIF9jb25zdGFudHMuVUlNX1RFTVBMQVRFX1VQREFURSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LmFicnVwdCgicmV0dXJuIiwgcmVzdWx0KTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMTkpOwogIH0pKTsKICByZXR1cm4gX3VwZGF0ZVRlbXBsYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0="},null]}