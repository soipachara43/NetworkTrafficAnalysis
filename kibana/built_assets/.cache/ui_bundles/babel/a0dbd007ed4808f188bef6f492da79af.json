{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/siem/public/pages/detection_engine/components/signals_histogram_panel/index.js","dependencies":[{"path":"x-pack/legacy/plugins/siem/public/pages/detection_engine/components/signals_histogram_panel/index.js","mtime":1589249553288},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlNpZ25hbHNIaXN0b2dyYW1QYW5lbCA9IGV4cG9ydHMuREVURUNUSU9OU19ISVNUT0dSQU1fSUQgPSB2b2lkIDA7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9udW1lcmFsID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAZWxhc3RpYy9udW1lcmFsIikpOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9zdHlsZWRDb21wb25lbnRzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJzdHlsZWQtY29tcG9uZW50cyIpKTsKCnZhciBfZnAgPSByZXF1aXJlKCJsb2Rhc2gvZnAiKTsKCnZhciBfaGVhZGVyX3NlY3Rpb24gPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2hlYWRlcl9zZWN0aW9uIik7Cgp2YXIgX3B1YmxpYyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9wbHVnaW5zL2RhdGEvcHVibGljIik7Cgp2YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uL2NvbW1vbi9jb25zdGFudHMiKTsKCnZhciBfdXNlX3F1ZXJ5ID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29udGFpbmVycy9kZXRlY3Rpb25fZW5naW5lL3NpZ25hbHMvdXNlX3F1ZXJ5Iik7Cgp2YXIgX2xpbmtfdG8gPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL2xpbmtfdG8iKTsKCnZhciBfaW5zcGVjdCA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMvaW5zcGVjdCIpOwoKdmFyIF91c2VfZ2V0X3VybF9zZWFyY2ggPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL25hdmlnYXRpb24vdXNlX2dldF91cmxfc2VhcmNoIik7Cgp2YXIgX21hdHJpeF9sb2FkZXIgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL21hdHJpeF9oaXN0b2dyYW0vbWF0cml4X2xvYWRlciIpOwoKdmFyIF9raWJhbmEgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9saWIva2liYW5hIik7Cgp2YXIgX2hvbWVfbmF2aWdhdGlvbnMgPSByZXF1aXJlKCIuLi8uLi8uLi9ob21lL2hvbWVfbmF2aWdhdGlvbnMiKTsKCnZhciBfY29uZmlnID0gcmVxdWlyZSgiLi9jb25maWciKTsKCnZhciBfaGVscGVycyA9IHJlcXVpcmUoIi4vaGVscGVycyIpOwoKdmFyIF9zaWduYWxzX2hpc3RvZ3JhbSA9IHJlcXVpcmUoIi4vc2lnbmFsc19oaXN0b2dyYW0iKTsKCnZhciBpMThuID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgiLi90cmFuc2xhdGlvbnMiKSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgIGRlZmF1bHQ6IG9iagogIH07Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgewogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9Cgp2YXIgREVGQVVMVF9QQU5FTF9IRUlHSFQgPSAzMDA7CnZhciBTdHlsZWRFdWlQYW5lbCA9ICgwLCBfc3R5bGVkQ29tcG9uZW50cy5kZWZhdWx0KShfZXVpLkV1aVBhbmVsKS53aXRoQ29uZmlnKHsKICBkaXNwbGF5TmFtZTogIlN0eWxlZEV1aVBhbmVsIiwKICBjb21wb25lbnRJZDogImNvZGM3cC0wIgp9KShbImRpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47IiwgIiBwb3NpdGlvbjpyZWxhdGl2ZTsiXSwgZnVuY3Rpb24gKF9yZWYpIHsKICB2YXIgaGVpZ2h0ID0gX3JlZi5oZWlnaHQ7CiAgcmV0dXJuIGhlaWdodCAhPSBudWxsID8gImhlaWdodDogIi5jb25jYXQoaGVpZ2h0LCAicHg7IikgOiAnJzsKfSk7CnZhciBkZWZhdWx0VG90YWxTaWduYWxzT2JqID0gewogIHZhbHVlOiAwLAogIHJlbGF0aW9uOiAnZXEnCn07CnZhciBERVRFQ1RJT05TX0hJU1RPR1JBTV9JRCA9ICdkZXRlY3Rpb25zLWhpc3RvZ3JhbSc7CmV4cG9ydHMuREVURUNUSU9OU19ISVNUT0dSQU1fSUQgPSBERVRFQ1RJT05TX0hJU1RPR1JBTV9JRDsKdmFyIFZpZXdTaWduYWxzRmxleEl0ZW0gPSAoMCwgX3N0eWxlZENvbXBvbmVudHMuZGVmYXVsdCkoX2V1aS5FdWlGbGV4SXRlbSkud2l0aENvbmZpZyh7CiAgZGlzcGxheU5hbWU6ICJWaWV3U2lnbmFsc0ZsZXhJdGVtIiwKICBjb21wb25lbnRJZDogImNvZGM3cC0xIgp9KShbIm1hcmdpbi1sZWZ0OjI0cHg7Il0pOwp2YXIgU2lnbmFsc0hpc3RvZ3JhbVBhbmVsID0gKDAsIF9yZWFjdC5tZW1vKShmdW5jdGlvbiAoX3JlZjIpIHsKICB2YXIgY2hhcnRIZWlnaHQgPSBfcmVmMi5jaGFydEhlaWdodCwKICAgICAgX3JlZjIkZGVmYXVsdFN0YWNrQnlPID0gX3JlZjIuZGVmYXVsdFN0YWNrQnlPcHRpb24sCiAgICAgIGRlZmF1bHRTdGFja0J5T3B0aW9uID0gX3JlZjIkZGVmYXVsdFN0YWNrQnlPID09PSB2b2lkIDAgPyBfY29uZmlnLnNpZ25hbHNIaXN0b2dyYW1PcHRpb25zWzBdIDogX3JlZjIkZGVmYXVsdFN0YWNrQnlPLAogICAgICBkZWxldGVRdWVyeSA9IF9yZWYyLmRlbGV0ZVF1ZXJ5LAogICAgICBmaWx0ZXJzID0gX3JlZjIuZmlsdGVycywKICAgICAgcXVlcnkgPSBfcmVmMi5xdWVyeSwKICAgICAgZnJvbSA9IF9yZWYyLmZyb20sCiAgICAgIF9yZWYyJGxlZ2VuZFBvc2l0aW9uID0gX3JlZjIubGVnZW5kUG9zaXRpb24sCiAgICAgIGxlZ2VuZFBvc2l0aW9uID0gX3JlZjIkbGVnZW5kUG9zaXRpb24gPT09IHZvaWQgMCA/ICdyaWdodCcgOiBfcmVmMiRsZWdlbmRQb3NpdGlvbiwKICAgICAgX3JlZjIkcGFuZWxIZWlnaHQgPSBfcmVmMi5wYW5lbEhlaWdodCwKICAgICAgcGFuZWxIZWlnaHQgPSBfcmVmMiRwYW5lbEhlaWdodCA9PT0gdm9pZCAwID8gREVGQVVMVF9QQU5FTF9IRUlHSFQgOiBfcmVmMiRwYW5lbEhlaWdodCwKICAgICAgc2V0UXVlcnkgPSBfcmVmMi5zZXRRdWVyeSwKICAgICAgc2lnbmFsSW5kZXhOYW1lID0gX3JlZjIuc2lnbmFsSW5kZXhOYW1lLAogICAgICBfcmVmMiRzaG93TGlua1RvU2lnbmEgPSBfcmVmMi5zaG93TGlua1RvU2lnbmFscywKICAgICAgc2hvd0xpbmtUb1NpZ25hbHMgPSBfcmVmMiRzaG93TGlua1RvU2lnbmEgPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjIkc2hvd0xpbmtUb1NpZ25hLAogICAgICBfcmVmMiRzaG93VG90YWxTaWduYWwgPSBfcmVmMi5zaG93VG90YWxTaWduYWxzQ291bnQsCiAgICAgIHNob3dUb3RhbFNpZ25hbHNDb3VudCA9IF9yZWYyJHNob3dUb3RhbFNpZ25hbCA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmMiRzaG93VG90YWxTaWduYWwsCiAgICAgIHN0YWNrQnlPcHRpb25zID0gX3JlZjIuc3RhY2tCeU9wdGlvbnMsCiAgICAgIHRvID0gX3JlZjIudG8sCiAgICAgIF9yZWYyJHRpdGxlID0gX3JlZjIudGl0bGUsCiAgICAgIHRpdGxlID0gX3JlZjIkdGl0bGUgPT09IHZvaWQgMCA/IGkxOG4uSElTVE9HUkFNX0hFQURFUiA6IF9yZWYyJHRpdGxlLAogICAgICB1cGRhdGVEYXRlUmFuZ2UgPSBfcmVmMi51cGRhdGVEYXRlUmFuZ2U7CgogIHZhciBfdXNlU3RhdGUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSh0cnVlKSwKICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksCiAgICAgIGlzSW5pdGlhbExvYWRpbmcgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRJc0luaXRpYWxMb2FkaW5nID0gX3VzZVN0YXRlMlsxXTsKCiAgdmFyIF91c2VVaVNldHRpbmckID0gKDAsIF9raWJhbmEudXNlVWlTZXR0aW5nJCkoX2NvbnN0YW50cy5ERUZBVUxUX05VTUJFUl9GT1JNQVQpLAogICAgICBfdXNlVWlTZXR0aW5nJDIgPSBfc2xpY2VkVG9BcnJheShfdXNlVWlTZXR0aW5nJCwgMSksCiAgICAgIGRlZmF1bHROdW1iZXJGb3JtYXQgPSBfdXNlVWlTZXR0aW5nJDJbMF07CgogIHZhciBfdXNlU3RhdGUzID0gKDAsIF9yZWFjdC51c2VTdGF0ZSkoZGVmYXVsdFRvdGFsU2lnbmFsc09iaiksCiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSwKICAgICAgdG90YWxTaWduYWxzT2JqID0gX3VzZVN0YXRlNFswXSwKICAgICAgc2V0VG90YWxTaWduYWxzT2JqID0gX3VzZVN0YXRlNFsxXTsKCiAgdmFyIF91c2VTdGF0ZTUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShkZWZhdWx0U3RhY2tCeU9wdGlvbiksCiAgICAgIF91c2VTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU1LCAyKSwKICAgICAgc2VsZWN0ZWRTdGFja0J5T3B0aW9uID0gX3VzZVN0YXRlNlswXSwKICAgICAgc2V0U2VsZWN0ZWRTdGFja0J5T3B0aW9uID0gX3VzZVN0YXRlNlsxXTsKCiAgdmFyIF91c2VRdWVyeVNpZ25hbHMgPSAoMCwgX3VzZV9xdWVyeS51c2VRdWVyeVNpZ25hbHMpKCgwLCBfaGVscGVycy5nZXRTaWduYWxzSGlzdG9ncmFtUXVlcnkpKHNlbGVjdGVkU3RhY2tCeU9wdGlvbi52YWx1ZSwgZnJvbSwgdG8sIFtdKSwgc2lnbmFsSW5kZXhOYW1lKSwKICAgICAgaXNMb2FkaW5nU2lnbmFscyA9IF91c2VRdWVyeVNpZ25hbHMubG9hZGluZywKICAgICAgc2lnbmFsc0RhdGEgPSBfdXNlUXVlcnlTaWduYWxzLmRhdGEsCiAgICAgIHNldFNpZ25hbHNRdWVyeSA9IF91c2VRdWVyeVNpZ25hbHMuc2V0UXVlcnksCiAgICAgIHJlc3BvbnNlID0gX3VzZVF1ZXJ5U2lnbmFscy5yZXNwb25zZSwKICAgICAgcmVxdWVzdCA9IF91c2VRdWVyeVNpZ25hbHMucmVxdWVzdCwKICAgICAgcmVmZXRjaCA9IF91c2VRdWVyeVNpZ25hbHMucmVmZXRjaDsKCiAgdmFyIGtpYmFuYSA9ICgwLCBfa2liYW5hLnVzZUtpYmFuYSkoKTsKICB2YXIgdXJsU2VhcmNoID0gKDAsIF91c2VfZ2V0X3VybF9zZWFyY2gudXNlR2V0VXJsU2VhcmNoKShfaG9tZV9uYXZpZ2F0aW9ucy5uYXZUYWJzLmRldGVjdGlvbnMpOwogIHZhciB0b3RhbFNpZ25hbHMgPSAoMCwgX3JlYWN0LnVzZU1lbW8pKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBpMThuLlNIT1dJTkdfU0lHTkFMUygoMCwgX251bWVyYWwuZGVmYXVsdCkodG90YWxTaWduYWxzT2JqLnZhbHVlKS5mb3JtYXQoZGVmYXVsdE51bWJlckZvcm1hdCksIHRvdGFsU2lnbmFsc09iai52YWx1ZSwgdG90YWxTaWduYWxzT2JqLnJlbGF0aW9uID09PSAnZ3RlJyA/ICc+JyA6IHRvdGFsU2lnbmFsc09iai5yZWxhdGlvbiA9PT0gJ2x0ZScgPyAnPCcgOiAnJyk7CiAgfSwgW3RvdGFsU2lnbmFsc09ial0pOwogIHZhciBzZXRTZWxlY3RlZE9wdGlvbkNhbGxiYWNrID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKGV2ZW50KSB7CiAgICB2YXIgX3JlZjM7CgogICAgc2V0U2VsZWN0ZWRTdGFja0J5T3B0aW9uKChfcmVmMyA9IHN0YWNrQnlPcHRpb25zID09PSBudWxsIHx8IHN0YWNrQnlPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzdGFja0J5T3B0aW9ucy5maW5kKGZ1bmN0aW9uIChjbykgewogICAgICByZXR1cm4gY28udmFsdWUgPT09IGV2ZW50LnRhcmdldC52YWx1ZTsKICAgIH0pKSAhPT0gbnVsbCAmJiBfcmVmMyAhPT0gdm9pZCAwID8gX3JlZjMgOiBkZWZhdWx0U3RhY2tCeU9wdGlvbik7CiAgfSwgW10pOwogIHZhciBmb3JtYXR0ZWRTaWduYWxzRGF0YSA9ICgwLCBfcmVhY3QudXNlTWVtbykoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuICgwLCBfaGVscGVycy5mb3JtYXRTaWduYWxzRGF0YSkoc2lnbmFsc0RhdGEpOwogIH0sIFtzaWduYWxzRGF0YV0pOwogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICB2YXIgY2FuY2VsZWQgPSBmYWxzZTsKCiAgICBpZiAoIWNhbmNlbGVkICYmICEoMCwgX2hlbHBlcnMuc2hvd0luaXRpYWxMb2FkaW5nU3Bpbm5lcikoewogICAgICBpc0luaXRpYWxMb2FkaW5nOiBpc0luaXRpYWxMb2FkaW5nLAogICAgICBpc0xvYWRpbmdTaWduYWxzOiBpc0xvYWRpbmdTaWduYWxzCiAgICB9KSkgewogICAgICBzZXRJc0luaXRpYWxMb2FkaW5nKGZhbHNlKTsKICAgIH0KCiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBjYW5jZWxlZCA9IHRydWU7IC8vIHByZXZlbnQgbG9uZyBydW5uaW5nIGRhdGEgZmV0Y2hlcyBmcm9tIHVwZGF0aW5nIHN0YXRlIGFmdGVyIHVubW91bnRpbmcKICAgIH07CiAgfSwgW2lzSW5pdGlhbExvYWRpbmcsIGlzTG9hZGluZ1NpZ25hbHMsIHNldElzSW5pdGlhbExvYWRpbmddKTsKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKGRlbGV0ZVF1ZXJ5KSB7CiAgICAgICAgZGVsZXRlUXVlcnkoewogICAgICAgICAgaWQ6IERFVEVDVElPTlNfSElTVE9HUkFNX0lECiAgICAgICAgfSk7CiAgICAgIH0KICAgIH07CiAgfSwgW10pOwogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICBpZiAocmVmZXRjaCAhPSBudWxsICYmIHNldFF1ZXJ5ICE9IG51bGwpIHsKICAgICAgc2V0UXVlcnkoewogICAgICAgIGlkOiBERVRFQ1RJT05TX0hJU1RPR1JBTV9JRCwKICAgICAgICBpbnNwZWN0OiB7CiAgICAgICAgICBkc2w6IFtyZXF1ZXN0XSwKICAgICAgICAgIHJlc3BvbnNlOiBbcmVzcG9uc2VdCiAgICAgICAgfSwKICAgICAgICBsb2FkaW5nOiBpc0xvYWRpbmdTaWduYWxzLAogICAgICAgIHJlZmV0Y2g6IHJlZmV0Y2gKICAgICAgfSk7CiAgICB9CiAgfSwgW3NldFF1ZXJ5LCBpc0xvYWRpbmdTaWduYWxzLCBzaWduYWxzRGF0YSwgcmVzcG9uc2UsIHJlcXVlc3QsIHJlZmV0Y2hdKTsKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWY0OwoKICAgIHNldFRvdGFsU2lnbmFsc09iaigoX3JlZjQgPSBzaWduYWxzRGF0YSA9PT0gbnVsbCB8fCBzaWduYWxzRGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2lnbmFsc0RhdGEuaGl0cy50b3RhbCkgIT09IG51bGwgJiYgX3JlZjQgIT09IHZvaWQgMCA/IF9yZWY0IDogewogICAgICB2YWx1ZTogMCwKICAgICAgcmVsYXRpb246ICdlcScKICAgIH0pOwogIH0sIFtzaWduYWxzRGF0YV0pOwogICgwLCBfcmVhY3QudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZjU7CgogICAgdmFyIGNvbnZlcnRlZCA9IF9wdWJsaWMuZXNRdWVyeS5idWlsZEVzUXVlcnkodW5kZWZpbmVkLCBxdWVyeSAhPSBudWxsID8gW3F1ZXJ5XSA6IFtdLCAoX3JlZjUgPSBmaWx0ZXJzID09PSBudWxsIHx8IGZpbHRlcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpbHRlcnMuZmlsdGVyKGZ1bmN0aW9uIChmKSB7CiAgICAgIHJldHVybiBmLm1ldGEuZGlzYWJsZWQgPT09IGZhbHNlOwogICAgfSkpICE9PSBudWxsICYmIF9yZWY1ICE9PSB2b2lkIDAgPyBfcmVmNSA6IFtdLCBfb2JqZWN0U3ByZWFkKHt9LCBfcHVibGljLmVzUXVlcnkuZ2V0RXNRdWVyeUNvbmZpZyhraWJhbmEuc2VydmljZXMudWlTZXR0aW5ncyksIHsKICAgICAgZGF0ZUZvcm1hdFRaOiB1bmRlZmluZWQKICAgIH0pKTsKCiAgICBzZXRTaWduYWxzUXVlcnkoKDAsIF9oZWxwZXJzLmdldFNpZ25hbHNIaXN0b2dyYW1RdWVyeSkoc2VsZWN0ZWRTdGFja0J5T3B0aW9uLnZhbHVlLCBmcm9tLCB0bywgISgwLCBfZnAuaXNFbXB0eSkoY29udmVydGVkKSA/IFtjb252ZXJ0ZWRdIDogW10pKTsKICB9LCBbc2VsZWN0ZWRTdGFja0J5T3B0aW9uLnZhbHVlLCBmcm9tLCB0bywgcXVlcnksIGZpbHRlcnNdKTsKICB2YXIgbGlua0J1dHRvbiA9ICgwLCBfcmVhY3QudXNlTWVtbykoZnVuY3Rpb24gKCkgewogICAgaWYgKHNob3dMaW5rVG9TaWduYWxzKSB7CiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFZpZXdTaWduYWxzRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZQogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uLCB7CiAgICAgICAgaHJlZjogKDAsIF9saW5rX3RvLmdldERldGVjdGlvbkVuZ2luZVVybCkodXJsU2VhcmNoKQogICAgICB9LCBpMThuLlZJRVdfU0lHTkFMUykpOwogICAgfQogIH0sIFtzaG93TGlua1RvU2lnbmFscywgdXJsU2VhcmNoXSk7CiAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2luc3BlY3QuSW5zcGVjdEJ1dHRvbkNvbnRhaW5lciwgewogICAgc2hvdzogIWlzSW5pdGlhbExvYWRpbmcKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFN0eWxlZEV1aVBhbmVsLCB7CiAgICBoZWlnaHQ6IHBhbmVsSGVpZ2h0CiAgfSwgaXNJbml0aWFsTG9hZGluZyA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LmRlZmF1bHQuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2hlYWRlcl9zZWN0aW9uLkhlYWRlclNlY3Rpb24sIHsKICAgIGlkOiBERVRFQ1RJT05TX0hJU1RPR1JBTV9JRCwKICAgIHRpdGxlOiB0aXRsZQogIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9tYXRyaXhfbG9hZGVyLk1hdHJpeExvYWRlciwgbnVsbCkpIDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuZGVmYXVsdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfaGVhZGVyX3NlY3Rpb24uSGVhZGVyU2VjdGlvbiwgewogICAgaWQ6IERFVEVDVElPTlNfSElTVE9HUkFNX0lELAogICAgdGl0bGU6IHRpdGxlLAogICAgc3VidGl0bGU6IHNob3dUb3RhbFNpZ25hbHNDb3VudCAmJiB0b3RhbFNpZ25hbHMKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCB7CiAgICBhbGlnbkl0ZW1zOiAiY2VudGVyIiwKICAgIGd1dHRlclNpemU6ICJub25lIgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgZ3JvdzogZmFsc2UKICB9LCBzdGFja0J5T3B0aW9ucyAmJiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU2VsZWN0LCB7CiAgICBvbkNoYW5nZTogc2V0U2VsZWN0ZWRPcHRpb25DYWxsYmFjaywKICAgIG9wdGlvbnM6IHN0YWNrQnlPcHRpb25zLAogICAgcHJlcGVuZDogaTE4bi5TVEFDS19CWV9MQUJFTCwKICAgIHZhbHVlOiBzZWxlY3RlZFN0YWNrQnlPcHRpb24udmFsdWUKICB9KSksIGxpbmtCdXR0b24pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfc2lnbmFsc19oaXN0b2dyYW0uU2lnbmFsc0hpc3RvZ3JhbSwgewogICAgY2hhcnRIZWlnaHQ6IGNoYXJ0SGVpZ2h0LAogICAgZGF0YTogZm9ybWF0dGVkU2lnbmFsc0RhdGEsCiAgICBmcm9tOiBmcm9tLAogICAgbGVnZW5kUG9zaXRpb246IGxlZ2VuZFBvc2l0aW9uLAogICAgbG9hZGluZzogaXNMb2FkaW5nU2lnbmFscywKICAgIHRvOiB0bywKICAgIHVwZGF0ZURhdGVSYW5nZTogdXBkYXRlRGF0ZVJhbmdlCiAgfSkpKSk7Cn0pOwpleHBvcnRzLlNpZ25hbHNIaXN0b2dyYW1QYW5lbCA9IFNpZ25hbHNIaXN0b2dyYW1QYW5lbDsKU2lnbmFsc0hpc3RvZ3JhbVBhbmVsLmRpc3BsYXlOYW1lID0gJ1NpZ25hbHNIaXN0b2dyYW1QYW5lbCc7"},null]}