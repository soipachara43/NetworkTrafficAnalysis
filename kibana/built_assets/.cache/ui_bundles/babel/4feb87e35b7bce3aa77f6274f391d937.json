{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/apm/public/components/shared/charts/TransactionCharts/ChoroplethMap/index.js","dependencies":[{"path":"x-pack/legacy/plugins/apm/public/components/shared/charts/TransactionCharts/ChoroplethMap/index.js","mtime":1589249551667},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmdldFByb2dyZXNzaW9uQ29sb3IgPSBnZXRQcm9ncmVzc2lvbkNvbG9yOwpleHBvcnRzLkNob3JvcGxldGhNYXAgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX21hcGJveEdsID0gcmVxdWlyZSgibWFwYm94LWdsIik7CgpyZXF1aXJlKCJtYXBib3gtZ2wvZGlzdC9tYXBib3gtZ2wuY3NzIik7Cgp2YXIgX2V1aV90aGVtZV9saWdodCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQGVsYXN0aWMvZXVpL2Rpc3QvZXVpX3RoZW1lX2xpZ2h0Lmpzb24iKSk7Cgp2YXIgX3BvbGlzaGVkID0gcmVxdWlyZSgicG9saXNoZWQiKTsKCnZhciBfQ2hvcm9wbGV0aFRvb2xUaXAgPSByZXF1aXJlKCIuL0Nob3JvcGxldGhUb29sVGlwIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsKICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7CiAgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7CiAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICBhcnIyW2ldID0gYXJyW2ldOwogICAgfQoKICAgIHJldHVybiBhcnIyOwogIH0KfQoKdmFyIENIT1JPUExFVEhfTEFZRVJfSUQgPSAnY2hvcm9wbGV0aF9sYXllcic7CnZhciBDSE9ST1BMRVRIX1BPTFlHT05TX1NPVVJDRV9JRCA9ICdjaG9yb3BsZXRoX3BvbHlnb25zJzsKdmFyIEdFT0pTT05fS0VZX1BST1BFUlRZID0gJ2lzbzInOwp2YXIgTUFQQk9YX1NUWUxFID0gJ2h0dHBzOi8vdGlsZXMubWFwcy5lbGFzdGljLmNvL3N0eWxlcy9vc20tYnJpZ2h0LWRlc2F0dXJhdGVkL3N0eWxlLmpzb24nOwp2YXIgR0VPSlNPTl9TT1VSQ0UgPSAnaHR0cHM6Ly92ZWN0b3IubWFwcy5lbGFzdGljLmNvL2ZpbGVzL3dvcmxkX2NvdW50cmllc192MS5nZW8uanNvbj9lbGFzdGljX3RpbGVfc2VydmljZV90b3M9YWdyZWUmbXlfYXBwX25hbWU9ZW1zLWxhbmRpbmcmbXlfYXBwX3ZlcnNpb249Ny4yLjAnOwoKZnVuY3Rpb24gZ2V0UHJvZ3Jlc3Npb25Db2xvcihzY2FsZSkgewogIHZhciBiYXNlQ29sb3IgPSBfZXVpX3RoZW1lX2xpZ2h0LmRlZmF1bHQuZXVpQ29sb3JQcmltYXJ5OwogIHZhciBhZGp1c3RlZFNjYWxlID0gMC43NSAqIHNjYWxlICsgMC4wNTsgLy8gcHJldmVudHMgcHVyZSBibGFjayAmIHdoaXRlIGFzIG1pbi9tYXggY29sb3JzLgoKICBpZiAoYWRqdXN0ZWRTY2FsZSA8IDAuNSkgewogICAgcmV0dXJuICgwLCBfcG9saXNoZWQudGludCkoYWRqdXN0ZWRTY2FsZSAqIDIsIGJhc2VDb2xvcik7CiAgfQoKICBpZiAoYWRqdXN0ZWRTY2FsZSA+IDAuNSkgewogICAgcmV0dXJuICgwLCBfcG9saXNoZWQuc2hhZGUpKDEgLSAoYWRqdXN0ZWRTY2FsZSAtIDAuNSkgKiAyLCBiYXNlQ29sb3IpOwogIH0KCiAgcmV0dXJuIGJhc2VDb2xvcjsKfQoKdmFyIGdldE1pbiA9IGZ1bmN0aW9uIGdldE1pbihpdGVtcykgewogIHJldHVybiBNYXRoLm1pbi5hcHBseShNYXRoLCBfdG9Db25zdW1hYmxlQXJyYXkoaXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gaXRlbS52YWx1ZTsKICB9KSkpOwp9OwoKdmFyIGdldE1heCA9IGZ1bmN0aW9uIGdldE1heChpdGVtcykgewogIHJldHVybiBNYXRoLm1heC5hcHBseShNYXRoLCBfdG9Db25zdW1hYmxlQXJyYXkoaXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gaXRlbS52YWx1ZTsKICB9KSkpOwp9OwoKdmFyIENob3JvcGxldGhNYXAgPSBmdW5jdGlvbiBDaG9yb3BsZXRoTWFwKHByb3BzKSB7CiAgdmFyIGl0ZW1zID0gcHJvcHMuaXRlbXM7CiAgdmFyIGNvbnRhaW5lclJlZiA9ICgwLCBfcmVhY3QudXNlUmVmKShudWxsKTsKCiAgdmFyIF91c2VTdGF0ZSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKG51bGwpLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgbWFwID0gX3VzZVN0YXRlMlswXSwKICAgICAgc2V0TWFwID0gX3VzZVN0YXRlMlsxXTsKCiAgdmFyIHBvcHVwUmVmID0gKDAsIF9yZWFjdC51c2VSZWYpKG51bGwpOwogIHZhciBwb3B1cENvbnRhaW5lclJlZiA9ICgwLCBfcmVhY3QudXNlUmVmKShudWxsKTsKCiAgdmFyIF91c2VTdGF0ZTMgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShudWxsKSwKICAgICAgX3VzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTMsIDIpLAogICAgICB0b29sdGlwU3RhdGUgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRUb29sdGlwU3RhdGUgPSBfdXNlU3RhdGU0WzFdOwoKICB2YXIgX3VzZU1lbW8gPSAoMCwgX3JlYWN0LnVzZU1lbW8pKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBbZ2V0TWluKGl0ZW1zKSwgZ2V0TWF4KGl0ZW1zKV07CiAgfSwgW2l0ZW1zXSksCiAgICAgIF91c2VNZW1vMiA9IF9zbGljZWRUb0FycmF5KF91c2VNZW1vLCAyKSwKICAgICAgbWluID0gX3VzZU1lbW8yWzBdLAogICAgICBtYXggPSBfdXNlTWVtbzJbMV07IC8vIGNvbnZlcnRzIGFuIGl0ZW0gdmFsdWUgdG8gYSBzY2FsZWQgdmFsdWUgYmV0d2VlbiAwIGFuZCAxCgoKICB2YXIgZ2V0VmFsdWVTY2FsZSA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgcmV0dXJuICh2YWx1ZSAtIG1pbikgLyAobWF4IC0gbWluKTsKICB9LCBbbWF4LCBtaW5dKTsKICB2YXIgY29udHJvbFNjcm9sbFpvb21PbldoZWVsID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKGV2ZW50KSB7CiAgICBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICB9IGVsc2UgewogICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgIH0KICB9LCBbXSk7IC8vIHNpZGUgZWZmZWN0IGNyZWF0ZXMgYSBuZXcgbW91c2VvdmVyIGhhbmRsZXIgcmVmZXJlbmNpbmcgbmV3IGNvbXBvbmVudCBzdGF0ZQogIC8vIGFuZCByZXBsYWNlcyB0aGUgb2xkIG9uZSBzdG9yZWQgaW4gYHVwZGF0ZVRvb2x0aXBTdGF0ZU9uTW91c2Vtb3ZlUmVmYAoKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgdmFyIHVwZGF0ZVRvb2x0aXBTdGF0ZU9uTW91c2Vtb3ZlID0gZnVuY3Rpb24gdXBkYXRlVG9vbHRpcFN0YXRlT25Nb3VzZW1vdmUoZXZlbnQpIHsKICAgICAgdmFyIGlzTWFwUXVlcnlhYmxlID0gbWFwICYmIHBvcHVwUmVmLmN1cnJlbnQgJiYgaXRlbXMubGVuZ3RoICYmIG1hcC5nZXRMYXllcihDSE9ST1BMRVRIX0xBWUVSX0lEKTsKCiAgICAgIGlmICghaXNNYXBRdWVyeWFibGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHBvcHVwUmVmLmN1cnJlbnQuc2V0TG5nTGF0KGV2ZW50LmxuZ0xhdCk7CiAgICAgIHZhciBob3ZlckZlYXR1cmVzID0gbWFwLnF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhldmVudC5wb2ludCwgewogICAgICAgIGxheWVyczogW0NIT1JPUExFVEhfTEFZRVJfSURdCiAgICAgIH0pOwoKICAgICAgaWYgKHRvb2x0aXBTdGF0ZSAmJiBob3ZlckZlYXR1cmVzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiBzZXRUb29sdGlwU3RhdGUobnVsbCk7CiAgICAgIH0KCiAgICAgIHZhciBmZWF0dXJlUHJvcGVydGllcyA9IGhvdmVyRmVhdHVyZXNbMF0ucHJvcGVydGllczsKCiAgICAgIGlmICh0b29sdGlwU3RhdGUgJiYgdG9vbHRpcFN0YXRlLm5hbWUgPT09IGZlYXR1cmVQcm9wZXJ0aWVzLm5hbWUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBpdGVtID0gaXRlbXMuZmluZChmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBrZXkgPSBfcmVmLmtleTsKICAgICAgICByZXR1cm4gZmVhdHVyZVByb3BlcnRpZXMgJiYga2V5ID09PSBmZWF0dXJlUHJvcGVydGllc1tHRU9KU09OX0tFWV9QUk9QRVJUWV07CiAgICAgIH0pOwoKICAgICAgaWYgKGl0ZW0pIHsKICAgICAgICByZXR1cm4gc2V0VG9vbHRpcFN0YXRlKHsKICAgICAgICAgIG5hbWU6IGZlYXR1cmVQcm9wZXJ0aWVzLm5hbWUsCiAgICAgICAgICB2YWx1ZTogaXRlbS52YWx1ZSwKICAgICAgICAgIGRvY0NvdW50OiBpdGVtLmRvY0NvdW50CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHNldFRvb2x0aXBTdGF0ZShudWxsKTsKICAgIH07CgogICAgdXBkYXRlVG9vbHRpcFN0YXRlT25Nb3VzZW1vdmVSZWYuY3VycmVudCA9IHVwZGF0ZVRvb2x0aXBTdGF0ZU9uTW91c2Vtb3ZlOwogIH0sIFttYXAsIGl0ZW1zLCB0b29sdGlwU3RhdGVdKTsKICB2YXIgdXBkYXRlVG9vbHRpcFN0YXRlT25Nb3VzZW1vdmVSZWYgPSAoMCwgX3JlYWN0LnVzZVJlZikoZnVuY3Rpb24gKGV2ZW50KSB7fSk7IC8vIGluaXRpYWxpemF0aW9uIHNpZGUgZWZmZWN0LCBvbmx5IHJ1bnMgb25jZQoKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgaWYgKGNvbnRhaW5lclJlZi5jdXJyZW50ID09PSBudWxsKSB7CiAgICAgIHJldHVybjsKICAgIH0gLy8gc2V0IHVwIE1hcCBvYmplY3QKCgogICAgdmFyIG1hcGJveE1hcCA9IG5ldyBfbWFwYm94R2wuTWFwKHsKICAgICAgYXR0cmlidXRpb25Db250cm9sOiBmYWxzZSwKICAgICAgY29udGFpbmVyOiBjb250YWluZXJSZWYuY3VycmVudCwKICAgICAgZHJhZ1JvdGF0ZTogZmFsc2UsCiAgICAgIHRvdWNoWm9vbVJvdGF0ZTogZmFsc2UsCiAgICAgIHpvb206IDAuODUsCiAgICAgIGNlbnRlcjogewogICAgICAgIGxuZzogMCwKICAgICAgICBsYXQ6IDMwCiAgICAgIH0sCiAgICAgIHN0eWxlOiBNQVBCT1hfU1RZTEUKICAgIH0pOwogICAgbWFwYm94TWFwLmFkZENvbnRyb2wobmV3IF9tYXBib3hHbC5OYXZpZ2F0aW9uQ29udHJvbCh7CiAgICAgIHNob3dDb21wYXNzOiBmYWxzZQogICAgfSksICd0b3AtbGVmdCcpOyAvLyBzZXQgdXAgUG9wdXAgb2JqZWN0CgogICAgcG9wdXBSZWYuY3VycmVudCA9IG5ldyBfbWFwYm94R2wuUG9wdXAoewogICAgICBjbG9zZUJ1dHRvbjogZmFsc2UsCiAgICAgIGNsb3NlT25DbGljazogZmFsc2UKICAgIH0pOyAvLyBhbHdheXMgdXNlIHRoZSBjdXJyZW50IGhhbmRsZXIgd2hpY2ggY2hhbmdlcyB3aXRoIGNvbXBvbmVudCBzdGF0ZQoKICAgIG1hcGJveE1hcC5vbignbW91c2Vtb3ZlJywgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdXBkYXRlVG9vbHRpcFN0YXRlT25Nb3VzZW1vdmVSZWYuY3VycmVudC5hcHBseSh1cGRhdGVUb29sdGlwU3RhdGVPbk1vdXNlbW92ZVJlZiwgYXJndW1lbnRzKTsKICAgIH0pOwogICAgbWFwYm94TWFwLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uICgpIHsKICAgICAgc2V0VG9vbHRpcFN0YXRlKG51bGwpOwogICAgfSk7IC8vIG9ubHkgc2Nyb2xsIHpvb20gd2hlbiBrZXkgaXMgcHJlc3NlZAoKICAgIHZhciBjYW52YXNFbGVtZW50ID0gbWFwYm94TWFwLmdldENhbnZhcygpOwogICAgY2FudmFzRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIGNvbnRyb2xTY3JvbGxab29tT25XaGVlbCk7CiAgICBtYXBib3hNYXAub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7CiAgICAgIG1hcGJveE1hcC5hZGRTb3VyY2UoQ0hPUk9QTEVUSF9QT0xZR09OU19TT1VSQ0VfSUQsIHsKICAgICAgICB0eXBlOiAnZ2VvanNvbicsCiAgICAgICAgZGF0YTogR0VPSlNPTl9TT1VSQ0UKICAgICAgfSk7CiAgICAgIHNldE1hcChtYXBib3hNYXApOwogICAgfSk7IC8vIGNsZWFudXAgZnVuY3Rpb24gY2FsbGVkIHdoZW4gY29tcG9uZW50IHVubW91bnRzCgogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgY2FudmFzRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd3aGVlbCcsIGNvbnRyb2xTY3JvbGxab29tT25XaGVlbCk7CiAgICB9OwogIH0sIFtjb250cm9sU2Nyb2xsWm9vbU9uV2hlZWxdKTsgLy8gc2lkZSBlZmZlY3QgcmVwbGFjZXMgY2hvcm9wbGV0aCBsYXllciB3aXRoIG5ldyBvbmUgb24gaXRlbXMgY2hhbmdlcwoKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgaWYgKCFtYXApIHsKICAgICAgcmV0dXJuOwogICAgfSAvLyBmaW5kIGZpcnN0IHN5bWJvbCBsYXllciB0byBwbGFjZSBuZXcgbGF5ZXIgaW4gY29ycmVjdCBvcmRlcgoKCiAgICB2YXIgc3ltYm9sTGF5ZXIgPSAobWFwLmdldFN0eWxlKCkubGF5ZXJzIHx8IFtdKS5maW5kKGZ1bmN0aW9uIChfcmVmMikgewogICAgICB2YXIgdHlwZSA9IF9yZWYyLnR5cGU7CiAgICAgIHJldHVybiB0eXBlID09PSAnc3ltYm9sJzsKICAgIH0pOwoKICAgIGlmIChtYXAuZ2V0TGF5ZXIoQ0hPUk9QTEVUSF9MQVlFUl9JRCkpIHsKICAgICAgbWFwLnJlbW92ZUxheWVyKENIT1JPUExFVEhfTEFZRVJfSUQpOwogICAgfQoKICAgIGlmIChpdGVtcy5sZW5ndGggPT09IDApIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBzdG9wcyA9IGl0ZW1zLm1hcChmdW5jdGlvbiAoX3JlZjMpIHsKICAgICAgdmFyIGtleSA9IF9yZWYzLmtleSwKICAgICAgICAgIHZhbHVlID0gX3JlZjMudmFsdWU7CiAgICAgIHJldHVybiBba2V5LCBnZXRQcm9ncmVzc2lvbkNvbG9yKGdldFZhbHVlU2NhbGUodmFsdWUpKV07CiAgICB9KTsKICAgIHZhciBmaWxsQ29sb3IgPSB7CiAgICAgIHByb3BlcnR5OiBHRU9KU09OX0tFWV9QUk9QRVJUWSwKICAgICAgc3RvcHM6IHN0b3BzLAogICAgICB0eXBlOiAnY2F0ZWdvcmljYWwnLAogICAgICBkZWZhdWx0OiAndHJhbnNwYXJlbnQnCiAgICB9OwogICAgbWFwLmFkZExheWVyKHsKICAgICAgaWQ6IENIT1JPUExFVEhfTEFZRVJfSUQsCiAgICAgIHR5cGU6ICdmaWxsJywKICAgICAgc291cmNlOiBDSE9ST1BMRVRIX1BPTFlHT05TX1NPVVJDRV9JRCwKICAgICAgbGF5b3V0OiB7fSwKICAgICAgcGFpbnQ6IHsKICAgICAgICAnZmlsbC1vcGFjaXR5JzogMC43NSwKICAgICAgICAnZmlsbC1jb2xvcic6IGZpbGxDb2xvcgogICAgICB9CiAgICB9LCBzeW1ib2xMYXllciA/IHN5bWJvbExheWVyLmlkIDogdW5kZWZpbmVkKTsKICB9LCBbbWFwLCBpdGVtcywgZ2V0VmFsdWVTY2FsZV0pOyAvLyBzaWRlIGVmZmVjdCB0byBvbmx5IHJlbmRlciB0aGUgUG9wdXAgd2hlbiBob3ZlcmluZyBhIHJlZ2lvbiB3aXRoIGEgbWF0Y2hpbmcgaXRlbQoKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgaWYgKCEocG9wdXBDb250YWluZXJSZWYuY3VycmVudCAmJiBtYXAgJiYgcG9wdXBSZWYuY3VycmVudCkpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmICh0b29sdGlwU3RhdGUpIHsKICAgICAgcG9wdXBSZWYuY3VycmVudC5zZXRET01Db250ZW50KHBvcHVwQ29udGFpbmVyUmVmLmN1cnJlbnQpLmFkZFRvKG1hcCk7CgogICAgICBpZiAocG9wdXBDb250YWluZXJSZWYuY3VycmVudC5wYXJlbnRFbGVtZW50KSB7CiAgICAgICAgcG9wdXBDb250YWluZXJSZWYuY3VycmVudC5wYXJlbnRFbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHBvcHVwUmVmLmN1cnJlbnQucmVtb3ZlKCk7CiAgICB9CiAgfSwgW21hcCwgdG9vbHRpcFN0YXRlXSk7IC8vIHJlbmRlciBtYXAgY29udGFpbmVyIGFuZCB0b29sdGlwIGluIGEgaGlkZGVuIGNvbnRhaW5lcgoKICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgcmVmOiBjb250YWluZXJSZWYsCiAgICBzdHlsZTogewogICAgICBoZWlnaHQ6IDI1NgogICAgfQogIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICBzdHlsZTogewogICAgICBkaXNwbGF5OiAnbm9uZScKICAgIH0KICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICByZWY6IHBvcHVwQ29udGFpbmVyUmVmCiAgfSwgdG9vbHRpcFN0YXRlID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfQ2hvcm9wbGV0aFRvb2xUaXAuQ2hvcm9wbGV0aFRvb2xUaXAsIHRvb2x0aXBTdGF0ZSkgOiBudWxsKSkpOwp9OwoKZXhwb3J0cy5DaG9yb3BsZXRoTWFwID0gQ2hvcm9wbGV0aE1hcDs="},null]}