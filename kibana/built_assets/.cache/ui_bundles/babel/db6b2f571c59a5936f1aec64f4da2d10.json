{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/vis_type_vislib/public/components/options/metrics_axes/index.js","dependencies":[{"path":"src/legacy/core_plugins/vis_type_vislib/public/components/options/metrics_axes/index.js","mtime":1589249550102},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLk1ldHJpY3NBeGlzT3B0aW9ucyA9IE1ldHJpY3NBeGlzT3B0aW9uczsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9zZXJpZXNfcGFuZWwgPSByZXF1aXJlKCIuL3Nlcmllc19wYW5lbCIpOwoKdmFyIF9jYXRlZ29yeV9heGlzX3BhbmVsID0gcmVxdWlyZSgiLi9jYXRlZ29yeV9heGlzX3BhbmVsIik7Cgp2YXIgX3ZhbHVlX2F4ZXNfcGFuZWwgPSByZXF1aXJlKCIuL3ZhbHVlX2F4ZXNfcGFuZWwiKTsKCnZhciBfdXRpbHMgPSByZXF1aXJlKCIuL3V0aWxzIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgewogIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gIltvYmplY3QgQXJndW1lbnRzXSIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgewogICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgYXJyMltpXSA9IGFycltpXTsKICAgIH0KCiAgICByZXR1cm4gYXJyMjsKICB9Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KCnZhciBWQUxVRV9BWElTX1BSRUZJWCA9ICdWYWx1ZUF4aXMtJzsKCmZ1bmN0aW9uIE1ldHJpY3NBeGlzT3B0aW9ucyhwcm9wcykgewogIHZhciBzdGF0ZVBhcmFtcyA9IHByb3BzLnN0YXRlUGFyYW1zLAogICAgICBzZXRWYWx1ZSA9IHByb3BzLnNldFZhbHVlLAogICAgICBhZ2dzID0gcHJvcHMuYWdncywKICAgICAgdmlzID0gcHJvcHMudmlzLAogICAgICBpc1RhYlNlbGVjdGVkID0gcHJvcHMuaXNUYWJTZWxlY3RlZDsKCiAgdmFyIF91c2VTdGF0ZSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKHRydWUpLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgaXNDYXRlZ29yeUF4aXNIb3Jpem9udGFsID0gX3VzZVN0YXRlMlswXSwKICAgICAgc2V0SXNDYXRlZ29yeUF4aXNIb3Jpem9udGFsID0gX3VzZVN0YXRlMlsxXTsKCiAgdmFyIHNldFBhcmFtQnlJbmRleCA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uIChheGVzTmFtZSwgaW5kZXgsIHBhcmFtTmFtZSwgdmFsdWUpIHsKICAgIHZhciBpdGVtcyA9IHN0YXRlUGFyYW1zW2F4ZXNOYW1lXTsKCiAgICB2YXIgYXJyYXkgPSBfdG9Db25zdW1hYmxlQXJyYXkoaXRlbXMpOwoKICAgIGFycmF5W2luZGV4XSA9IF9vYmplY3RTcHJlYWQoe30sIGFycmF5W2luZGV4XSwgX2RlZmluZVByb3BlcnR5KHt9LCBwYXJhbU5hbWUsIHZhbHVlKSk7CiAgICBzZXRWYWx1ZShheGVzTmFtZSwgYXJyYXkpOwogIH0sIFtzdGF0ZVBhcmFtcywgc2V0VmFsdWVdKTsKICB2YXIgc2V0Q2F0ZWdvcnlBeGlzID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKHZhbHVlKSB7CiAgICB2YXIgY2F0ZWdvcnlBeGVzID0gX3RvQ29uc3VtYWJsZUFycmF5KHN0YXRlUGFyYW1zLmNhdGVnb3J5QXhlcyk7CgogICAgY2F0ZWdvcnlBeGVzWzBdID0gdmFsdWU7CiAgICBzZXRWYWx1ZSgnY2F0ZWdvcnlBeGVzJywgY2F0ZWdvcnlBeGVzKTsKICB9LCBbc2V0VmFsdWUsIHN0YXRlUGFyYW1zLmNhdGVnb3J5QXhlc10pOyAvLyBzdG9yZXMgcHJldmlvdXMgYWdncycgY3VzdG9tIGxhYmVscwoKICB2YXIgX3VzZVN0YXRlMyA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKHt9KSwKICAgICAgX3VzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTMsIDIpLAogICAgICBsYXN0Q3VzdG9tTGFiZWxzID0gX3VzZVN0YXRlNFswXSwKICAgICAgc2V0TGFzdEN1c3RvbUxhYmVscyA9IF91c2VTdGF0ZTRbMV07IC8vIHN0b3JlcyBwcmV2aW91cyBhZ2dzJyBmaWVsZCBhbmQgdHlwZQoKCiAgdmFyIF91c2VTdGF0ZTUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSh7fSksCiAgICAgIF91c2VTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU1LCAyKSwKICAgICAgbGFzdFNlcmllc0FnZyA9IF91c2VTdGF0ZTZbMF0sCiAgICAgIHNldExhc3RTZXJpZXNBZ2cgPSBfdXNlU3RhdGU2WzFdOwoKICB2YXIgdXBkYXRlQXhpc1RpdGxlID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKHNlcmllc1BhcmFtcykgewogICAgdmFyIHNlcmllcyA9IHNlcmllc1BhcmFtcyB8fCBzdGF0ZVBhcmFtcy5zZXJpZXNQYXJhbXM7CiAgICB2YXIgaXNBeGVzQ2hhbmdlZCA9IGZhbHNlOwogICAgdmFyIGxhc3RWYWx1ZXNDaGFuZ2VkID0gZmFsc2U7CgogICAgdmFyIGxhc3RMYWJlbHMgPSBfb2JqZWN0U3ByZWFkKHt9LCBsYXN0Q3VzdG9tTGFiZWxzKTsKCiAgICB2YXIgbGFzdE1hdGNoaW5nU2VyaWVzQWdnID0gX29iamVjdFNwcmVhZCh7fSwgbGFzdFNlcmllc0FnZyk7CgogICAgdmFyIGF4ZXMgPSBzdGF0ZVBhcmFtcy52YWx1ZUF4ZXMubWFwKGZ1bmN0aW9uIChheGlzLCBheGlzTnVtYmVyKSB7CiAgICAgIHZhciBuZXdDdXN0b21MYWJlbCA9ICcnOwogICAgICB2YXIgdXBkYXRlZEF4aXM7CiAgICAgIHZhciBtYXRjaGluZ1NlcmllcyA9IFtdOwogICAgICBzZXJpZXMuZm9yRWFjaChmdW5jdGlvbiAoc2VyaWUsIHNlcmllc0luZGV4KSB7CiAgICAgICAgaWYgKGF4aXNOdW1iZXIgPT09IDAgJiYgIXNlcmllLnZhbHVlQXhpcyB8fCBzZXJpZS52YWx1ZUF4aXMgPT09IGF4aXMuaWQpIHsKICAgICAgICAgIHZhciBhZ2dCeUluZGV4ID0gYWdncy5ieVNjaGVtYU5hbWUoJ21ldHJpYycpW3Nlcmllc0luZGV4XTsKICAgICAgICAgIG1hdGNoaW5nU2VyaWVzLnB1c2goYWdnQnlJbmRleCk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIGlmIChtYXRjaGluZ1Nlcmllcy5sZW5ndGggPT09IDEpIHsKICAgICAgICAvLyBpZiBzZXZlcmFsIHNlcmllcyBtYXRjaGVzIHRvIHRoZSBheGlzLCBheGlzIHRpdGxlIGlzIHNldCBhY2NvcmRpbmcgdG8gdGhlIGZpcnN0IHNlcmllLgogICAgICAgIG5ld0N1c3RvbUxhYmVsID0gbWF0Y2hpbmdTZXJpZXNbMF0ubWFrZUxhYmVsKCk7CiAgICAgIH0KCiAgICAgIGlmIChsYXN0Q3VzdG9tTGFiZWxzW2F4aXMuaWRdICE9PSBuZXdDdXN0b21MYWJlbCAmJiBuZXdDdXN0b21MYWJlbCAhPT0gJycpIHsKICAgICAgICB2YXIgbGFzdFNlcmllc0FnZ1R5cGUgPSAoMCwgX2xvZGFzaC5nZXQpKGxhc3RTZXJpZXNBZ2csICIiLmNvbmNhdChtYXRjaGluZ1Nlcmllc1swXS5pZCwgIi50eXBlIikpOwogICAgICAgIHZhciBsYXN0U2VyaWVzQWdnRmllbGQgPSAoMCwgX2xvZGFzaC5nZXQpKGxhc3RTZXJpZXNBZ2csICIiLmNvbmNhdChtYXRjaGluZ1Nlcmllc1swXS5pZCwgIi5maWVsZCIpKTsKICAgICAgICB2YXIgbWF0Y2hpbmdTZXJpZXNBZ2dUeXBlID0gKDAsIF9sb2Rhc2guZ2V0KShtYXRjaGluZ1NlcmllcywgJ1swXXR5cGUubmFtZScsICcnKTsKICAgICAgICB2YXIgbWF0Y2hpbmdTZXJpZXNBZ2dGaWVsZCA9ICgwLCBfbG9kYXNoLmdldCkobWF0Y2hpbmdTZXJpZXMsICdbMF1wYXJhbXMuZmllbGQubmFtZScsICcnKTsKICAgICAgICB2YXIgYWdnVHlwZUlzQ2hhbmdlZCA9IGxhc3RTZXJpZXNBZ2dUeXBlICE9PSBtYXRjaGluZ1Nlcmllc0FnZ1R5cGU7CiAgICAgICAgdmFyIGFnZ0ZpZWxkSXNDaGFuZ2VkID0gbGFzdFNlcmllc0FnZ0ZpZWxkICE9PSBtYXRjaGluZ1Nlcmllc0FnZ0ZpZWxkOwogICAgICAgIGxhc3RNYXRjaGluZ1Nlcmllc0FnZ1ttYXRjaGluZ1Nlcmllc1swXS5pZF0gPSB7CiAgICAgICAgICB0eXBlOiBtYXRjaGluZ1Nlcmllc0FnZ1R5cGUsCiAgICAgICAgICBmaWVsZDogbWF0Y2hpbmdTZXJpZXNBZ2dGaWVsZAogICAgICAgIH07CiAgICAgICAgbGFzdExhYmVsc1theGlzLmlkXSA9IG5ld0N1c3RvbUxhYmVsOwogICAgICAgIGxhc3RWYWx1ZXNDaGFuZ2VkID0gdHJ1ZTsKCiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGxhc3RDdXN0b21MYWJlbHMpLmxlbmd0aCAhPT0gMCAmJiAoYWdnVHlwZUlzQ2hhbmdlZCB8fCBhZ2dGaWVsZElzQ2hhbmdlZCB8fCBheGlzLnRpdGxlLnRleHQgPT09ICcnIHx8IGxhc3RDdXN0b21MYWJlbHNbYXhpcy5pZF0gPT09IGF4aXMudGl0bGUudGV4dCkgJiYgbmV3Q3VzdG9tTGFiZWwgIT09IGF4aXMudGl0bGUudGV4dCkgewogICAgICAgICAgLy8gT3ZlcnJpZGUgYXhpcyB0aXRsZSB3aXRoIG5ldyBjdXN0b20gbGFiZWwKICAgICAgICAgIHVwZGF0ZWRBeGlzID0gX29iamVjdFNwcmVhZCh7fSwgYXhpcywgewogICAgICAgICAgICB0aXRsZTogX29iamVjdFNwcmVhZCh7fSwgYXhpcy50aXRsZSwgewogICAgICAgICAgICAgIHRleHQ6IG5ld0N1c3RvbUxhYmVsCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9KTsKICAgICAgICAgIGlzQXhlc0NoYW5nZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHVwZGF0ZWRBeGlzIHx8IGF4aXM7CiAgICB9KTsKCiAgICBpZiAoaXNBeGVzQ2hhbmdlZCkgewogICAgICBzZXRWYWx1ZSgndmFsdWVBeGVzJywgYXhlcyk7CiAgICB9CgogICAgaWYgKGxhc3RWYWx1ZXNDaGFuZ2VkKSB7CiAgICAgIHNldExhc3RTZXJpZXNBZ2cobGFzdE1hdGNoaW5nU2VyaWVzQWdnKTsKICAgICAgc2V0TGFzdEN1c3RvbUxhYmVscyhsYXN0TGFiZWxzKTsKICAgIH0KICB9LCBbYWdncywgbGFzdEN1c3RvbUxhYmVscywgbGFzdFNlcmllc0FnZywgc2V0VmFsdWUsIHN0YXRlUGFyYW1zLnNlcmllc1BhcmFtcywgc3RhdGVQYXJhbXMudmFsdWVBeGVzXSk7CiAgdmFyIG9uVmFsdWVBeGlzUG9zaXRpb25DaGFuZ2VkID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkgewogICAgdmFyIHZhbHVlQXhlcyA9IF90b0NvbnN1bWFibGVBcnJheShzdGF0ZVBhcmFtcy52YWx1ZUF4ZXMpOwoKICAgIHZhciBuYW1lID0gKDAsIF91dGlscy5nZXRVcGRhdGVkQXhpc05hbWUpKHZhbHVlLCB2YWx1ZUF4ZXMpOwogICAgdmFsdWVBeGVzW2luZGV4XSA9IF9vYmplY3RTcHJlYWQoe30sIHZhbHVlQXhlc1tpbmRleF0sIHsKICAgICAgbmFtZTogbmFtZSwKICAgICAgcG9zaXRpb246IHZhbHVlCiAgICB9KTsKICAgIHNldFZhbHVlKCd2YWx1ZUF4ZXMnLCB2YWx1ZUF4ZXMpOwogIH0sIFtzdGF0ZVBhcmFtcy52YWx1ZUF4ZXMsIHNldFZhbHVlXSk7CiAgdmFyIG9uQ2F0ZWdvcnlBeGlzUG9zaXRpb25DaGFuZ2VkID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKGNoYXJ0UG9zaXRpb24pIHsKICAgIHZhciBpc0NoYXJ0SG9yaXpvbnRhbCA9ICgwLCBfdXRpbHMuaXNBeGlzSG9yaXpvbnRhbCkoY2hhcnRQb3NpdGlvbik7CiAgICBzZXRJc0NhdGVnb3J5QXhpc0hvcml6b250YWwoKDAsIF91dGlscy5pc0F4aXNIb3Jpem9udGFsKShjaGFydFBvc2l0aW9uKSk7CiAgICBzdGF0ZVBhcmFtcy52YWx1ZUF4ZXMuZm9yRWFjaChmdW5jdGlvbiAoYXhpcywgaW5kZXgpIHsKICAgICAgaWYgKCgwLCBfdXRpbHMuaXNBeGlzSG9yaXpvbnRhbCkoYXhpcy5wb3NpdGlvbikgPT09IGlzQ2hhcnRIb3Jpem9udGFsKSB7CiAgICAgICAgdmFyIHBvc2l0aW9uID0gKDAsIF91dGlscy5tYXBQb3NpdGlvbikoYXhpcy5wb3NpdGlvbik7CiAgICAgICAgb25WYWx1ZUF4aXNQb3NpdGlvbkNoYW5nZWQoaW5kZXgsIHBvc2l0aW9uKTsKICAgICAgfQogICAgfSk7CiAgfSwgW3N0YXRlUGFyYW1zLnZhbHVlQXhlcywgb25WYWx1ZUF4aXNQb3NpdGlvbkNoYW5nZWRdKTsKICB2YXIgYWRkVmFsdWVBeGlzID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKCkgewogICAgdmFyIG5leHRBeGlzSWROdW1iZXIgPSBzdGF0ZVBhcmFtcy52YWx1ZUF4ZXMucmVkdWNlKCgwLCBfdXRpbHMuY291bnROZXh0QXhpc051bWJlcikoVkFMVUVfQVhJU19QUkVGSVgpLCAxKTsKICAgIHZhciBuZXdBeGlzID0gKDAsIF9sb2Rhc2guY2xvbmVEZWVwKShzdGF0ZVBhcmFtcy52YWx1ZUF4ZXNbMF0pOwogICAgbmV3QXhpcy5pZCA9IFZBTFVFX0FYSVNfUFJFRklYICsgbmV4dEF4aXNJZE51bWJlcjsKICAgIG5ld0F4aXMucG9zaXRpb24gPSAoMCwgX3V0aWxzLm1hcFBvc2l0aW9uT3Bwb3NpdGUpKG5ld0F4aXMucG9zaXRpb24pOwogICAgbmV3QXhpcy5uYW1lID0gKDAsIF91dGlscy5nZXRVcGRhdGVkQXhpc05hbWUpKG5ld0F4aXMucG9zaXRpb24sIHN0YXRlUGFyYW1zLnZhbHVlQXhlcyk7CiAgICBzZXRWYWx1ZSgndmFsdWVBeGVzJywgW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShzdGF0ZVBhcmFtcy52YWx1ZUF4ZXMpLCBbbmV3QXhpc10pKTsKICAgIHJldHVybiBuZXdBeGlzOwogIH0sIFtzdGF0ZVBhcmFtcy52YWx1ZUF4ZXMsIHNldFZhbHVlXSk7CiAgdmFyIHJlbW92ZVZhbHVlQXhpcyA9ICgwLCBfcmVhY3QudXNlQ2FsbGJhY2spKGZ1bmN0aW9uIChheGlzKSB7CiAgICB2YXIgbmV3VmFsdWVBeGVzID0gc3RhdGVQYXJhbXMudmFsdWVBeGVzLmZpbHRlcihmdW5jdGlvbiAodmFsQXhpcykgewogICAgICByZXR1cm4gdmFsQXhpcy5pZCAhPT0gYXhpcy5pZDsKICAgIH0pOwogICAgc2V0VmFsdWUoJ3ZhbHVlQXhlcycsIG5ld1ZhbHVlQXhlcyk7CiAgICB2YXIgaXNTZXJpZXNVcGRhdGVkID0gZmFsc2U7CiAgICB2YXIgc2VyaWVzID0gc3RhdGVQYXJhbXMuc2VyaWVzUGFyYW1zLm1hcChmdW5jdGlvbiAoc2VyKSB7CiAgICAgIGlmIChheGlzLmlkID09PSBzZXIudmFsdWVBeGlzKSB7CiAgICAgICAgaXNTZXJpZXNVcGRhdGVkID0gdHJ1ZTsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc2VyLCB7CiAgICAgICAgICB2YWx1ZUF4aXM6IG5ld1ZhbHVlQXhlc1swXS5pZAogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gc2VyOwogICAgfSk7CgogICAgaWYgKGlzU2VyaWVzVXBkYXRlZCkgewogICAgICAvLyBpZiBzZXJpZXNQYXJhbXMgaGF2ZSB2YWx1ZUF4aXMgZXF1YWxzIHRvIHJlbW92ZWQgb25lLCB0aGVuIHdlIHJlc2V0IGl0IHRvIHRoZSBmaXJzdCB2YWx1ZUF4aXMKICAgICAgc2V0VmFsdWUoJ3Nlcmllc1BhcmFtcycsIHNlcmllcyk7CiAgICB9CgogICAgaWYgKHN0YXRlUGFyYW1zLmdyaWQudmFsdWVBeGlzID09PSBheGlzLmlkKSB7CiAgICAgIC8vIHJlc2V0IFktYXhpcyBncmlkIGxpbmVzIHNldHRpbmcKICAgICAgc2V0VmFsdWUoJ2dyaWQnLCBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZVBhcmFtcy5ncmlkLCB7CiAgICAgICAgdmFsdWVBeGlzOiB1bmRlZmluZWQKICAgICAgfSkpOwogICAgfQogIH0sIFtzdGF0ZVBhcmFtcy5zZXJpZXNQYXJhbXMsIHN0YXRlUGFyYW1zLnZhbHVlQXhlcywgc2V0VmFsdWUsIHN0YXRlUGFyYW1zLmdyaWRdKTsKICB2YXIgY2hhbmdlVmFsdWVBeGlzID0gKDAsIF9yZWFjdC51c2VDYWxsYmFjaykoZnVuY3Rpb24gKGluZGV4LCBwYXJhbU5hbWUsIHNlbGVjdGVkVmFsdWVBeGlzKSB7CiAgICB2YXIgbmV3VmFsdWVBeGlzID0gc2VsZWN0ZWRWYWx1ZUF4aXM7CgogICAgaWYgKHNlbGVjdGVkVmFsdWVBeGlzID09PSAnbmV3JykgewogICAgICB2YXIgYXhpcyA9IGFkZFZhbHVlQXhpcygpOwogICAgICBuZXdWYWx1ZUF4aXMgPSBheGlzLmlkOwogICAgfQoKICAgIHNldFBhcmFtQnlJbmRleCgnc2VyaWVzUGFyYW1zJywgaW5kZXgsIHBhcmFtTmFtZSwgbmV3VmFsdWVBeGlzKTsKICAgIHVwZGF0ZUF4aXNUaXRsZSgpOwogIH0sIFthZGRWYWx1ZUF4aXMsIHNldFBhcmFtQnlJbmRleCwgdXBkYXRlQXhpc1RpdGxlXSk7CiAgdmFyIHNjaGVtYU5hbWUgPSB2aXMudHlwZS5zY2hlbWFzLm1ldHJpY3NbMF0ubmFtZTsKICB2YXIgbWV0cmljcyA9ICgwLCBfcmVhY3QudXNlTWVtbykoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGFnZ3MuYnlTY2hlbWFOYW1lKHNjaGVtYU5hbWUpOwogIH0sIFtzY2hlbWFOYW1lLCBhZ2dzXSk7CiAgdmFyIGZpcnN0VmFsdWVBeGVzSWQgPSBzdGF0ZVBhcmFtcy52YWx1ZUF4ZXNbMF0uaWQ7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIHZhciB1cGRhdGVkU2VyaWVzID0gbWV0cmljcy5tYXAoZnVuY3Rpb24gKGFnZykgewogICAgICB2YXIgcGFyYW1zID0gc3RhdGVQYXJhbXMuc2VyaWVzUGFyYW1zLmZpbmQoZnVuY3Rpb24gKHBhcmFtKSB7CiAgICAgICAgcmV0dXJuIHBhcmFtLmRhdGEuaWQgPT09IGFnZy5pZDsKICAgICAgfSk7CiAgICAgIHZhciBsYWJlbCA9IGFnZy5tYWtlTGFiZWwoKTsgLy8gdXBkYXRlIGxhYmVscyBmb3IgZXhpc3RpbmcgcGFyYW1zIG9yIGNyZWF0ZSBuZXcgb25lCgogICAgICBpZiAocGFyYW1zKSB7CiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHBhcmFtcywgewogICAgICAgICAgZGF0YTogX29iamVjdFNwcmVhZCh7fSwgcGFyYW1zLmRhdGEsIHsKICAgICAgICAgICAgbGFiZWw6IGxhYmVsCiAgICAgICAgICB9KQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBzZXJpZXMgPSAoMCwgX3V0aWxzLm1ha2VTZXJpZSkoYWdnLmlkLCBsYWJlbCwgZmlyc3RWYWx1ZUF4ZXNJZCwgc3RhdGVQYXJhbXMuc2VyaWVzUGFyYW1zW3N0YXRlUGFyYW1zLnNlcmllc1BhcmFtcy5sZW5ndGggLSAxXSk7CiAgICAgICAgcmV0dXJuIHNlcmllczsKICAgICAgfQogICAgfSk7CiAgICBzZXRWYWx1ZSgnc2VyaWVzUGFyYW1zJywgdXBkYXRlZFNlcmllcyk7CiAgICB1cGRhdGVBeGlzVGl0bGUodXBkYXRlZFNlcmllcyk7CiAgfSwgW21ldHJpY3MsIGZpcnN0VmFsdWVBeGVzSWQsIHNldFZhbHVlLCBzdGF0ZVBhcmFtcy5zZXJpZXNQYXJhbXMsIHVwZGF0ZUF4aXNUaXRsZV0pOwogIHZhciB2aXNUeXBlID0gKDAsIF9yZWFjdC51c2VNZW1vKShmdW5jdGlvbiAoKSB7CiAgICB2YXIgdHlwZXMgPSAoMCwgX2xvZGFzaC51bmlxKShzdGF0ZVBhcmFtcy5zZXJpZXNQYXJhbXMubWFwKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgIHZhciB0eXBlID0gX3JlZi50eXBlOwogICAgICByZXR1cm4gdHlwZTsKICAgIH0pKTsKICAgIHJldHVybiB0eXBlcy5sZW5ndGggPT09IDEgPyB0eXBlc1swXSA6ICdoaXN0b2dyYW0nOwogIH0sIFtzdGF0ZVBhcmFtcy5zZXJpZXNQYXJhbXNdKTsKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgdmlzLnNldFN0YXRlKF9vYmplY3RTcHJlYWQoe30sIHZpcy5zZXJpYWxpemUoKSwgewogICAgICB0eXBlOiB2aXNUeXBlCiAgICB9KSk7CiAgfSwgW3ZpcywgdmlzVHlwZV0pOwogIHJldHVybiBpc1RhYlNlbGVjdGVkID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuZGVmYXVsdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfc2VyaWVzX3BhbmVsLlNlcmllc1BhbmVsLCB7CiAgICBjaGFuZ2VWYWx1ZUF4aXM6IGNoYW5nZVZhbHVlQXhpcywKICAgIHNldFBhcmFtQnlJbmRleDogc2V0UGFyYW1CeUluZGV4LAogICAgc2VyaWVzUGFyYW1zOiBzdGF0ZVBhcmFtcy5zZXJpZXNQYXJhbXMsCiAgICB2YWx1ZUF4ZXM6IHN0YXRlUGFyYW1zLnZhbHVlQXhlcywKICAgIHZpczogdmlzCiAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgIHNpemU6ICJzIgogIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF92YWx1ZV9heGVzX3BhbmVsLlZhbHVlQXhlc1BhbmVsLCB7CiAgICBhZGRWYWx1ZUF4aXM6IGFkZFZhbHVlQXhpcywKICAgIGlzQ2F0ZWdvcnlBeGlzSG9yaXpvbnRhbDogaXNDYXRlZ29yeUF4aXNIb3Jpem9udGFsLAogICAgcmVtb3ZlVmFsdWVBeGlzOiByZW1vdmVWYWx1ZUF4aXMsCiAgICBvblZhbHVlQXhpc1Bvc2l0aW9uQ2hhbmdlZDogb25WYWx1ZUF4aXNQb3NpdGlvbkNoYW5nZWQsCiAgICBzZXRQYXJhbUJ5SW5kZXg6IHNldFBhcmFtQnlJbmRleCwKICAgIHNldE11bHRpcGxlVmFsaWRpdHk6IHByb3BzLnNldE11bHRpcGxlVmFsaWRpdHksCiAgICBzZXJpZXNQYXJhbXM6IHN0YXRlUGFyYW1zLnNlcmllc1BhcmFtcywKICAgIHZhbHVlQXhlczogc3RhdGVQYXJhbXMudmFsdWVBeGVzLAogICAgdmlzOiB2aXMKICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgewogICAgc2l6ZTogInMiCiAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NhdGVnb3J5X2F4aXNfcGFuZWwuQ2F0ZWdvcnlBeGlzUGFuZWwsIHsKICAgIGF4aXM6IHN0YXRlUGFyYW1zLmNhdGVnb3J5QXhlc1swXSwKICAgIG9uUG9zaXRpb25DaGFuZ2VkOiBvbkNhdGVnb3J5QXhpc1Bvc2l0aW9uQ2hhbmdlZCwKICAgIHNldENhdGVnb3J5QXhpczogc2V0Q2F0ZWdvcnlBeGlzLAogICAgdmlzOiB2aXMKICB9KSkgOiBudWxsOwp9"},null]}