{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/kibana/public/discover/np_ready/components/field_chooser/field_chooser.js","dependencies":[{"path":"src/legacy/core_plugins/kibana/public/discover/np_ready/components/field_chooser/field_chooser.js","mtime":1589249549714},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmNyZWF0ZUZpZWxkQ2hvb3NlckRpcmVjdGl2ZSA9IGNyZWF0ZUZpZWxkQ2hvb3NlckRpcmVjdGl2ZTsKCnZhciBfbG9kYXNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsb2Rhc2giKSk7Cgp2YXIgX2pxdWVyeSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgianF1ZXJ5IikpOwoKdmFyIF9yaXNvbk5vZGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJpc29uLW5vZGUiKSk7Cgp2YXIgX2ZpZWxkX2NhbGN1bGF0b3IgPSByZXF1aXJlKCIuL2xpYi9maWVsZF9jYWxjdWxhdG9yIik7CgpyZXF1aXJlKCIuL2Rpc2NvdmVyX2ZpZWxkIik7CgpyZXF1aXJlKCIuL2Rpc2NvdmVyX2ZpZWxkX3NlYXJjaF9kaXJlY3RpdmUiKTsKCnJlcXVpcmUoIi4vZGlzY292ZXJfaW5kZXhfcGF0dGVybl9kaXJlY3RpdmUiKTsKCnZhciBfZmllbGRfY2hvb3NlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9maWVsZF9jaG9vc2VyLmh0bWwiKSk7Cgp2YXIgX3B1YmxpYyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3BsdWdpbnMvZGF0YS9wdWJsaWMiKTsKCnZhciBfdmlzdWFsaXplX3VybF91dGlscyA9IHJlcXVpcmUoIi4vbGliL3Zpc3VhbGl6ZV91cmxfdXRpbHMiKTsKCnZhciBfa2liYW5hX3NlcnZpY2VzID0gcmVxdWlyZSgiLi4vLi4vLi4va2liYW5hX3NlcnZpY2VzIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKZnVuY3Rpb24gY3JlYXRlRmllbGRDaG9vc2VyRGlyZWN0aXZlKCRsb2NhdGlvbikgewogIHJldHVybiB7CiAgICByZXN0cmljdDogJ0UnLAogICAgc2NvcGU6IHsKICAgICAgY29sdW1uczogJz0nLAogICAgICBoaXRzOiAnPScsCiAgICAgIGZpZWxkQ291bnRzOiAnPScsCiAgICAgIHN0YXRlOiAnPScsCiAgICAgIGluZGV4UGF0dGVybjogJz0nLAogICAgICBpbmRleFBhdHRlcm5MaXN0OiAnPScsCiAgICAgIG9uQWRkRmllbGQ6ICc9JywKICAgICAgb25BZGRGaWx0ZXI6ICc9JywKICAgICAgb25SZW1vdmVGaWVsZDogJz0nCiAgICB9LAogICAgdGVtcGxhdGU6IF9maWVsZF9jaG9vc2VyLmRlZmF1bHQsCiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKCRzY29wZSkgewogICAgICAkc2NvcGUuc2hvd0ZpbHRlciA9IGZhbHNlOwoKICAgICAgJHNjb3BlLnRvZ2dsZVNob3dGaWx0ZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuICRzY29wZS5zaG93RmlsdGVyID0gISRzY29wZS5zaG93RmlsdGVyOwogICAgICB9OwoKICAgICAgJHNjb3BlLmluZGV4UGF0dGVybkxpc3QgPSBfbG9kYXNoLmRlZmF1bHQuc29ydEJ5KCRzY29wZS5pbmRleFBhdHRlcm5MaXN0LCBmdW5jdGlvbiAobykgewogICAgICAgIHJldHVybiBvLmdldCgndGl0bGUnKTsKICAgICAgfSk7CiAgICAgIHZhciBjb25maWcgPSAoMCwgX2tpYmFuYV9zZXJ2aWNlcy5nZXRTZXJ2aWNlcykoKS51aVNldHRpbmdzOwogICAgICB2YXIgZmlsdGVyID0gJHNjb3BlLmZpbHRlciA9IHsKICAgICAgICBwcm9wczogWyd0eXBlJywgJ2FnZ3JlZ2F0YWJsZScsICdzZWFyY2hhYmxlJywgJ21pc3NpbmcnLCAnbmFtZSddLAogICAgICAgIGRlZmF1bHRzOiB7CiAgICAgICAgICBtaXNzaW5nOiB0cnVlLAogICAgICAgICAgdHlwZTogJ2FueScsCiAgICAgICAgICBuYW1lOiAnJwogICAgICAgIH0sCiAgICAgICAgYm9vbE9wdHM6IFt7CiAgICAgICAgICBsYWJlbDogJ2FueScsCiAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICd5ZXMnLAogICAgICAgICAgdmFsdWU6IHRydWUKICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogJ25vJywKICAgICAgICAgIHZhbHVlOiBmYWxzZQogICAgICAgIH1dLAogICAgICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgICAgIGZpbHRlci52YWxzID0gX2xvZGFzaC5kZWZhdWx0LmNsb25lKGZpbHRlci5kZWZhdWx0cyk7CiAgICAgICAgfSwKCiAgICAgICAgLyoqCiAgICAgICAgICogZmlsdGVyIGZvciBmaWVsZHMgdGhhdCBhcmUgZGlzcGxheWVkIC8gc2VsZWN0ZWQgZm9yIHRoZSBkYXRhIHRhYmxlCiAgICAgICAgICovCiAgICAgICAgaXNGaWVsZEZpbHRlcmVkQW5kRGlzcGxheWVkOiBmdW5jdGlvbiBpc0ZpZWxkRmlsdGVyZWRBbmREaXNwbGF5ZWQoZmllbGQpIHsKICAgICAgICAgIHJldHVybiBmaWVsZC5kaXNwbGF5ICYmIGlzRmllbGRGaWx0ZXJlZChmaWVsZCk7CiAgICAgICAgfSwKCiAgICAgICAgLyoqCiAgICAgICAgICogZmlsdGVyIGZvciBmaWVsZHMgdGhhdCBhcmUgbm90IGRpc3BsYXllZCAvIHNlbGVjdGVkIGZvciB0aGUgZGF0YSB0YWJsZQogICAgICAgICAqLwogICAgICAgIGlzRmllbGRGaWx0ZXJlZEFuZE5vdERpc3BsYXllZDogZnVuY3Rpb24gaXNGaWVsZEZpbHRlcmVkQW5kTm90RGlzcGxheWVkKGZpZWxkKSB7CiAgICAgICAgICByZXR1cm4gIWZpZWxkLmRpc3BsYXkgJiYgaXNGaWVsZEZpbHRlcmVkKGZpZWxkKSAmJiBmaWVsZC50eXBlICE9PSAnX3NvdXJjZSc7CiAgICAgICAgfSwKICAgICAgICBnZXRBY3RpdmU6IGZ1bmN0aW9uIGdldEFjdGl2ZSgpIHsKICAgICAgICAgIHJldHVybiBfbG9kYXNoLmRlZmF1bHQuc29tZShmaWx0ZXIucHJvcHMsIGZ1bmN0aW9uIChwcm9wKSB7CiAgICAgICAgICAgIHJldHVybiBmaWx0ZXIudmFsc1twcm9wXSAhPT0gZmlsdGVyLmRlZmF1bHRzW3Byb3BdOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgZnVuY3Rpb24gaXNGaWVsZEZpbHRlcmVkKGZpZWxkKSB7CiAgICAgICAgdmFyIG1hdGNoRmlsdGVyID0gZmlsdGVyLnZhbHMudHlwZSA9PT0gJ2FueScgfHwgZmllbGQudHlwZSA9PT0gZmlsdGVyLnZhbHMudHlwZTsKICAgICAgICB2YXIgaXNBZ2dyZWdhdGFibGUgPSBmaWx0ZXIudmFscy5hZ2dyZWdhdGFibGUgPT0gbnVsbCB8fCBmaWVsZC5hZ2dyZWdhdGFibGUgPT09IGZpbHRlci52YWxzLmFnZ3JlZ2F0YWJsZTsKICAgICAgICB2YXIgaXNTZWFyY2hhYmxlID0gZmlsdGVyLnZhbHMuc2VhcmNoYWJsZSA9PSBudWxsIHx8IGZpZWxkLnNlYXJjaGFibGUgPT09IGZpbHRlci52YWxzLnNlYXJjaGFibGU7CiAgICAgICAgdmFyIHNjcmlwdGVkT3JNaXNzaW5nID0gIWZpbHRlci52YWxzLm1pc3NpbmcgfHwgZmllbGQudHlwZSA9PT0gJ19zb3VyY2UnIHx8IGZpZWxkLnNjcmlwdGVkIHx8IGZpZWxkLnJvd0NvdW50ID4gMDsKICAgICAgICB2YXIgbWF0Y2hOYW1lID0gIWZpbHRlci52YWxzLm5hbWUgfHwgZmllbGQubmFtZS5pbmRleE9mKGZpbHRlci52YWxzLm5hbWUpICE9PSAtMTsKICAgICAgICByZXR1cm4gbWF0Y2hGaWx0ZXIgJiYgaXNBZ2dyZWdhdGFibGUgJiYgaXNTZWFyY2hhYmxlICYmIHNjcmlwdGVkT3JNaXNzaW5nICYmIG1hdGNoTmFtZTsKICAgICAgfQoKICAgICAgJHNjb3BlLnNldEZpbHRlclZhbHVlID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7CiAgICAgICAgZmlsdGVyLnZhbHNbbmFtZV0gPSB2YWx1ZTsKICAgICAgfTsKCiAgICAgICRzY29wZS5maWx0ZXJzQWN0aXZlID0gMDsgLy8gc2V0IHRoZSBpbml0aWFsIHZhbHVlcyB0byB0aGUgZGVmYXVsdHMKCiAgICAgIGZpbHRlci5yZXNldCgpOwogICAgICAkc2NvcGUuJHdhdGNoQ29sbGVjdGlvbignZmlsdGVyLnZhbHMnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgZmlsdGVyLmFjdGl2ZSA9IGZpbHRlci5nZXRBY3RpdmUoKTsKCiAgICAgICAgaWYgKGZpbHRlci52YWxzKSB7CiAgICAgICAgICB2YXIgY291bnQgPSAwOwogICAgICAgICAgT2JqZWN0LmtleXMoZmlsdGVyLnZhbHMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICBpZiAoa2V5ID09PSAnbWlzc2luZycgfHwga2V5ID09PSAnbmFtZScpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGZpbHRlci52YWxzW2tleV07CgogICAgICAgICAgICBpZiAodmFsdWUgJiYgdmFsdWUgIT09ICdhbnknIHx8IHZhbHVlID09PSBmYWxzZSkgewogICAgICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgJHNjb3BlLmZpbHRlcnNBY3RpdmUgPSBjb3VudDsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAkc2NvcGUuJHdhdGNoTXVsdGkoWydbXWZpZWxkQ291bnRzJywgJ1tdY29sdW1ucycsICdbXWhpdHMnXSwgZnVuY3Rpb24gKGN1ciwgcHJldikgewogICAgICAgIHZhciBuZXdIaXRzID0gY3VyWzJdICE9PSBwcmV2WzJdOwogICAgICAgIHZhciBmaWVsZHMgPSAkc2NvcGUuZmllbGRzOwogICAgICAgIHZhciBjb2x1bW5zID0gJHNjb3BlLmNvbHVtbnMgfHwgW107CiAgICAgICAgdmFyIGZpZWxkQ291bnRzID0gJHNjb3BlLmZpZWxkQ291bnRzOwoKICAgICAgICBpZiAoIWZpZWxkcyB8fCBuZXdIaXRzKSB7CiAgICAgICAgICAkc2NvcGUuZmllbGRzID0gZmllbGRzID0gZ2V0RmllbGRzKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIWZpZWxkcykgcmV0dXJuOyAvLyBncm91cCB0aGUgZmllbGRzIGludG8gcG9wdWxhciBhbmQgdXAtcG9wdWxhciBsaXN0cwoKICAgICAgICBfbG9kYXNoLmRlZmF1bHQuY2hhaW4oZmllbGRzKS5lYWNoKGZ1bmN0aW9uIChmaWVsZCkgewogICAgICAgICAgZmllbGQuZGlzcGxheU9yZGVyID0gX2xvZGFzaC5kZWZhdWx0LmluZGV4T2YoY29sdW1ucywgZmllbGQubmFtZSkgKyAxOwogICAgICAgICAgZmllbGQuZGlzcGxheSA9ICEhZmllbGQuZGlzcGxheU9yZGVyOwogICAgICAgICAgZmllbGQucm93Q291bnQgPSBmaWVsZENvdW50c1tmaWVsZC5uYW1lXTsKICAgICAgICB9KS5zb3J0QnkoZnVuY3Rpb24gKGZpZWxkKSB7CiAgICAgICAgICByZXR1cm4gKGZpZWxkLmNvdW50IHx8IDApICogLTE7CiAgICAgICAgfSkuZ3JvdXBCeShmdW5jdGlvbiAoZmllbGQpIHsKICAgICAgICAgIGlmIChmaWVsZC5kaXNwbGF5KSByZXR1cm4gJ3NlbGVjdGVkJzsKICAgICAgICAgIHJldHVybiBmaWVsZC5jb3VudCA+IDAgPyAncG9wdWxhcicgOiAndW5wb3B1bGFyJzsKICAgICAgICB9KS50YXAoZnVuY3Rpb24gKGdyb3VwcykgewogICAgICAgICAgZ3JvdXBzLnNlbGVjdGVkID0gX2xvZGFzaC5kZWZhdWx0LnNvcnRCeShncm91cHMuc2VsZWN0ZWQgfHwgW10sICdkaXNwbGF5T3JkZXInKTsKICAgICAgICAgIGdyb3Vwcy5wb3B1bGFyID0gZ3JvdXBzLnBvcHVsYXIgfHwgW107CiAgICAgICAgICBncm91cHMudW5wb3B1bGFyID0gZ3JvdXBzLnVucG9wdWxhciB8fCBbXTsgLy8gbW92ZSBleGNlc3MgcG9wdWxhciBmaWVsZHMgdG8gdW4tcG9wdWxhciBsaXN0CgogICAgICAgICAgdmFyIGV4dHJhcyA9IGdyb3Vwcy5wb3B1bGFyLnNwbGljZShjb25maWcuZ2V0KCdmaWVsZHM6cG9wdWxhckxpbWl0JykpOwogICAgICAgICAgZ3JvdXBzLnVucG9wdWxhciA9IGV4dHJhcy5jb25jYXQoZ3JvdXBzLnVucG9wdWxhcik7CiAgICAgICAgfSkuZWFjaChmdW5jdGlvbiAoZ3JvdXAsIG5hbWUpIHsKICAgICAgICAgICRzY29wZVtuYW1lICsgJ0ZpZWxkcyddID0gX2xvZGFzaC5kZWZhdWx0LnNvcnRCeShncm91cCwgbmFtZSA9PT0gJ3NlbGVjdGVkJyA/ICdkaXNwbGF5JyA6ICduYW1lJyk7CiAgICAgICAgfSkuY29tbWl0KCk7IC8vIGluY2x1ZGUgdW5kZWZpbmVkIHNvIHRoZSB1c2VyIGNhbiBjbGVhciB0aGUgZmlsdGVyCgoKICAgICAgICAkc2NvcGUuZmllbGRUeXBlcyA9IF9sb2Rhc2guZGVmYXVsdC51bmlvbihbJ2FueSddLCBfbG9kYXNoLmRlZmF1bHQucGx1Y2soZmllbGRzLCAndHlwZScpKTsKICAgICAgfSk7CgogICAgICAkc2NvcGUuaW5jcmVhc2VGaWVsZENvdW50ZXIgPSBmdW5jdGlvbiAoZmllbGROYW1lKSB7CiAgICAgICAgJHNjb3BlLmluZGV4UGF0dGVybi5wb3B1bGFyaXplRmllbGQoZmllbGROYW1lLCAxKTsKICAgICAgfTsKCiAgICAgIGZ1bmN0aW9uIGdldFZpc3VhbGl6ZVVybChmaWVsZCkgewogICAgICAgIGlmICghJHNjb3BlLnN0YXRlKSB7CiAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgfQoKICAgICAgICBpZiAoKGZpZWxkLnR5cGUgPT09IF9wdWJsaWMuS0JOX0ZJRUxEX1RZUEVTLkdFT19QT0lOVCB8fCBmaWVsZC50eXBlID09PSBfcHVibGljLktCTl9GSUVMRF9UWVBFUy5HRU9fU0hBUEUpICYmICgwLCBfdmlzdWFsaXplX3VybF91dGlscy5pc01hcHNBcHBSZWdpc3RlcmVkKSgpKSB7CiAgICAgICAgICByZXR1cm4gKDAsIF92aXN1YWxpemVfdXJsX3V0aWxzLmdldE1hcHNBcHBVcmwpKGZpZWxkLCAkc2NvcGUuaW5kZXhQYXR0ZXJuLCAkc2NvcGUuc3RhdGUsICRzY29wZS5jb2x1bW5zKTsKICAgICAgICB9CgogICAgICAgIHZhciBhZ2cgPSB7fTsKICAgICAgICB2YXIgaXNHZW9Qb2ludCA9IGZpZWxkLnR5cGUgPT09IF9wdWJsaWMuS0JOX0ZJRUxEX1RZUEVTLkdFT19QT0lOVDsKICAgICAgICB2YXIgdHlwZSA9IGlzR2VvUG9pbnQgPyAndGlsZV9tYXAnIDogJ2hpc3RvZ3JhbSc7IC8vIElmIHdlJ3JlIHZpc3VhbGl6aW5nIGEgZGF0ZSBmaWVsZCwgYW5kIG91ciBpbmRleCBpcyB0aW1lIGJhc2VkIChhbmQgdGh1cyBoYXMgYSB0aW1lIGZpbHRlciksCiAgICAgICAgLy8gdGhlbiBydW4gYSBkYXRlIGhpc3RvZ3JhbQoKICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gJ2RhdGUnICYmICRzY29wZS5pbmRleFBhdHRlcm4udGltZUZpZWxkTmFtZSA9PT0gZmllbGQubmFtZSkgewogICAgICAgICAgYWdnID0gewogICAgICAgICAgICB0eXBlOiAnZGF0ZV9oaXN0b2dyYW0nLAogICAgICAgICAgICBzY2hlbWE6ICdzZWdtZW50JywKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgZmllbGQ6IGZpZWxkLm5hbWUsCiAgICAgICAgICAgICAgaW50ZXJ2YWw6ICdhdXRvJwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0gZWxzZSBpZiAoaXNHZW9Qb2ludCkgewogICAgICAgICAgYWdnID0gewogICAgICAgICAgICB0eXBlOiAnZ2VvaGFzaF9ncmlkJywKICAgICAgICAgICAgc2NoZW1hOiAnc2VnbWVudCcsCiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIGZpZWxkOiBmaWVsZC5uYW1lLAogICAgICAgICAgICAgIHByZWNpc2lvbjogMwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhZ2cgPSB7CiAgICAgICAgICAgIHR5cGU6ICd0ZXJtcycsCiAgICAgICAgICAgIHNjaGVtYTogJ3NlZ21lbnQnLAogICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICBmaWVsZDogZmllbGQubmFtZSwKICAgICAgICAgICAgICBzaXplOiBwYXJzZUludChjb25maWcuZ2V0KCdkaXNjb3ZlcjphZ2dzOnRlcm1zOnNpemUnKSwgMTApLAogICAgICAgICAgICAgIG9yZGVyQnk6ICcyJwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICcjL3Zpc3VhbGl6ZS9jcmVhdGU/JyArIF9qcXVlcnkuZGVmYXVsdC5wYXJhbShfbG9kYXNoLmRlZmF1bHQuYXNzaWduKF9sb2Rhc2guZGVmYXVsdC5jbG9uZSgkbG9jYXRpb24uc2VhcmNoKCkpLCB7CiAgICAgICAgICBpbmRleFBhdHRlcm46ICRzY29wZS5zdGF0ZS5pbmRleCwKICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICBfYTogX3Jpc29uTm9kZS5kZWZhdWx0LmVuY29kZSh7CiAgICAgICAgICAgIGZpbHRlcnM6ICRzY29wZS5zdGF0ZS5maWx0ZXJzIHx8IFtdLAogICAgICAgICAgICBxdWVyeTogJHNjb3BlLnN0YXRlLnF1ZXJ5IHx8IHVuZGVmaW5lZCwKICAgICAgICAgICAgdmlzOiB7CiAgICAgICAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICAgICAgICBhZ2dzOiBbewogICAgICAgICAgICAgICAgc2NoZW1hOiAnbWV0cmljJywKICAgICAgICAgICAgICAgIHR5cGU6ICdjb3VudCcsCiAgICAgICAgICAgICAgICBpZDogJzInCiAgICAgICAgICAgICAgfSwgYWdnXQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0pKTsKICAgICAgfQoKICAgICAgJHNjb3BlLmNvbXB1dGVEZXRhaWxzID0gZnVuY3Rpb24gKGZpZWxkLCByZWNvbXB1dGUpIHsKICAgICAgICBpZiAoX2xvZGFzaC5kZWZhdWx0LmlzVW5kZWZpbmVkKGZpZWxkLmRldGFpbHMpIHx8IHJlY29tcHV0ZSkgewogICAgICAgICAgZmllbGQuZGV0YWlscyA9IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICB2aXN1YWxpemVVcmw6ICgwLCBfdmlzdWFsaXplX3VybF91dGlscy5pc0ZpZWxkVmlzdWFsaXphYmxlKShmaWVsZCkgPyBnZXRWaXN1YWxpemVVcmwoZmllbGQpIDogbnVsbAogICAgICAgICAgfSwgX2ZpZWxkX2NhbGN1bGF0b3IuZmllbGRDYWxjdWxhdG9yLmdldEZpZWxkVmFsdWVDb3VudHMoewogICAgICAgICAgICBoaXRzOiAkc2NvcGUuaGl0cywKICAgICAgICAgICAgZmllbGQ6IGZpZWxkLAogICAgICAgICAgICBjb3VudDogNSwKICAgICAgICAgICAgZ3JvdXBlZDogZmFsc2UKICAgICAgICAgIH0pKTsKCiAgICAgICAgICBfbG9kYXNoLmRlZmF1bHQuZWFjaChmaWVsZC5kZXRhaWxzLmJ1Y2tldHMsIGZ1bmN0aW9uIChidWNrZXQpIHsKICAgICAgICAgICAgYnVja2V0LmRpc3BsYXkgPSBmaWVsZC5mb3JtYXQuY29udmVydChidWNrZXQudmFsdWUpOwogICAgICAgICAgfSk7CgogICAgICAgICAgJHNjb3BlLmluY3JlYXNlRmllbGRDb3VudGVyKGZpZWxkLCAxKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGVsZXRlIGZpZWxkLmRldGFpbHM7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgZnVuY3Rpb24gZ2V0RmllbGRzKCkgewogICAgICAgIHZhciBwcmV2RmllbGRzID0gJHNjb3BlLmZpZWxkczsKICAgICAgICB2YXIgaW5kZXhQYXR0ZXJuID0gJHNjb3BlLmluZGV4UGF0dGVybjsKICAgICAgICB2YXIgaGl0cyA9ICRzY29wZS5oaXRzOwogICAgICAgIHZhciBmaWVsZENvdW50cyA9ICRzY29wZS5maWVsZENvdW50czsKICAgICAgICBpZiAoIWluZGV4UGF0dGVybiB8fCAhaGl0cyB8fCAhZmllbGRDb3VudHMpIHJldHVybjsKICAgICAgICB2YXIgZmllbGRTcGVjcyA9IGluZGV4UGF0dGVybi5maWVsZHMuc2xpY2UoMCk7CgogICAgICAgIHZhciBmaWVsZE5hbWVzSW5Eb2NzID0gX2xvZGFzaC5kZWZhdWx0LmtleXMoZmllbGRDb3VudHMpOwoKICAgICAgICB2YXIgZmllbGROYW1lc0luSW5kZXhQYXR0ZXJuID0gX2xvZGFzaC5kZWZhdWx0Lm1hcChpbmRleFBhdHRlcm4uZmllbGRzLCAnbmFtZScpOwoKICAgICAgICBfbG9kYXNoLmRlZmF1bHQuZGlmZmVyZW5jZShmaWVsZE5hbWVzSW5Eb2NzLCBmaWVsZE5hbWVzSW5JbmRleFBhdHRlcm4pLmZvckVhY2goZnVuY3Rpb24gKHVua25vd25GaWVsZE5hbWUpIHsKICAgICAgICAgIGZpZWxkU3BlY3MucHVzaCh7CiAgICAgICAgICAgIG5hbWU6IHVua25vd25GaWVsZE5hbWUsCiAgICAgICAgICAgIHR5cGU6ICd1bmtub3duJwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CgogICAgICAgIHZhciBmaWVsZHMgPSBuZXcgX3B1YmxpYy5JbmRleFBhdHRlcm5GaWVsZExpc3QoaW5kZXhQYXR0ZXJuLCBmaWVsZFNwZWNzKTsKCiAgICAgICAgaWYgKHByZXZGaWVsZHMpIHsKICAgICAgICAgIGZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZCkgewogICAgICAgICAgICBmaWVsZC5kZXRhaWxzID0gKHByZXZGaWVsZHMuZ2V0QnlOYW1lKGZpZWxkLm5hbWUpIHx8IHt9KS5kZXRhaWxzOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmllbGRzOwogICAgICB9CiAgICB9CiAgfTsKfQ=="},null]}