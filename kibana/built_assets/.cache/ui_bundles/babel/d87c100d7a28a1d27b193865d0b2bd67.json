{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/infra/public/components/autocomplete_field/autocomplete_field.js","dependencies":[{"path":"x-pack/plugins/infra/public/components/autocomplete_field/autocomplete_field.js","mtime":1589249554225},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuQXV0b2NvbXBsZXRlRmllbGQgPSB2b2lkIDA7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3B1YmxpYyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL29ic2VydmFiaWxpdHkvcHVibGljIik7Cgp2YXIgX3R5cGVkX3JlYWN0ID0gcmVxdWlyZSgiLi4vLi4vdXRpbHMvdHlwZWRfcmVhY3QiKTsKCnZhciBfc3VnZ2VzdGlvbl9pdGVtID0gcmVxdWlyZSgiLi9zdWdnZXN0aW9uX2l0ZW0iKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgIGRlZmF1bHQ6IG9iagogIH07Cn0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgX3R5cGVvZjIoU3ltYm9sLml0ZXJhdG9yKSA9PT0gInN5bWJvbCIpIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gX3R5cGVvZjIob2JqKTsKICAgIH07CiAgfSBlbHNlIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9CgogIHJldHVybiBfdHlwZW9mKG9iaik7Cn0KCmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDIoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDEwMCU7XG4gIG1hcmdpbi10b3A6IDJweDtcbiAgb3ZlcmZsb3cteDogaGlkZGVuO1xuICBvdmVyZmxvdy15OiBzY3JvbGw7XG4gIHotaW5kZXg6ICIsICI7XG4gIG1heC1oZWlnaHQ6IDMyMnB4O1xuIl0pOwoKICBfdGVtcGxhdGVPYmplY3QyID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MigpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0ID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0KCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCmZ1bmN0aW9uIF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoc3RyaW5ncywgcmF3KSB7CiAgaWYgKCFyYXcpIHsKICAgIHJhdyA9IHN0cmluZ3Muc2xpY2UoMCk7CiAgfQoKICByZXR1cm4gT2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzdHJpbmdzLCB7CiAgICByYXc6IHsKICAgICAgdmFsdWU6IE9iamVjdC5mcmVlemUocmF3KQogICAgfQogIH0pKTsKfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgewogIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsKICAgIHJldHVybiBjYWxsOwogIH0KCiAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7Cn0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7CiAgfTsKICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOwp9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsKICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIHNlbGY7Cn0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgewogIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOwogIH0KCiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICBjb25zdHJ1Y3RvcjogewogICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0KICB9KTsKICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsKfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICAgIG8uX19wcm90b19fID0gcDsKICAgIHJldHVybiBvOwogIH07CgogIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9Cgp2YXIgQXV0b2NvbXBsZXRlRmllbGQgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7CiAgX2luaGVyaXRzKEF1dG9jb21wbGV0ZUZpZWxkLCBfUmVhY3QkQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gQXV0b2NvbXBsZXRlRmllbGQoKSB7CiAgICB2YXIgX2dldFByb3RvdHlwZU9mMjsKCiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEF1dG9jb21wbGV0ZUZpZWxkKTsKCiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgIH0KCiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChfZ2V0UHJvdG90eXBlT2YyID0gX2dldFByb3RvdHlwZU9mKEF1dG9jb21wbGV0ZUZpZWxkKSkuY2FsbC5hcHBseShfZ2V0UHJvdG90eXBlT2YyLCBbdGhpc10uY29uY2F0KGFyZ3MpKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic3RhdGUiLCB7CiAgICAgIGFyZVN1Z2dlc3Rpb25zVmlzaWJsZTogZmFsc2UsCiAgICAgIGlzRm9jdXNlZDogZmFsc2UsCiAgICAgIHNlbGVjdGVkSW5kZXg6IG51bGwKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImlucHV0RWxlbWVudCIsIG51bGwpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUNoYW5nZUlucHV0UmVmIiwgZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgX3RoaXMuaW5wdXRFbGVtZW50ID0gZWxlbWVudDsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUNoYW5nZSIsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgX3RoaXMuY2hhbmdlVmFsdWUoZXZ0LmN1cnJlbnRUYXJnZXQudmFsdWUpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlS2V5RG93biIsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgdmFyIHN1Z2dlc3Rpb25zID0gX3RoaXMucHJvcHMuc3VnZ2VzdGlvbnM7CgogICAgICBzd2l0Y2ggKGV2dC5rZXkpIHsKICAgICAgICBjYXNlICdBcnJvd1VwJzoKICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgIGlmIChzdWdnZXN0aW9ucy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKCgwLCBfdHlwZWRfcmVhY3QuY29tcG9zZVN0YXRlVXBkYXRlcnMpKHdpdGhTdWdnZXN0aW9uc1Zpc2libGUsIHdpdGhQcmV2aW91c1N1Z2dlc3Rpb25TZWxlY3RlZCkpOwogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdBcnJvd0Rvd24nOgogICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgaWYgKHN1Z2dlc3Rpb25zLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoKDAsIF90eXBlZF9yZWFjdC5jb21wb3NlU3RhdGVVcGRhdGVycykod2l0aFN1Z2dlc3Rpb25zVmlzaWJsZSwgd2l0aE5leHRTdWdnZXN0aW9uU2VsZWN0ZWQpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ0VudGVyJzoKICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgIGlmIChfdGhpcy5zdGF0ZS5zZWxlY3RlZEluZGV4ICE9PSBudWxsKSB7CiAgICAgICAgICAgIF90aGlzLmFwcGx5U2VsZWN0ZWRTdWdnZXN0aW9uKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5zdWJtaXQoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnRXNjYXBlJzoKICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgIF90aGlzLnNldFN0YXRlKHdpdGhTdWdnZXN0aW9uc0hpZGRlbik7CgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUtleVVwIiwgZnVuY3Rpb24gKGV2dCkgewogICAgICBzd2l0Y2ggKGV2dC5rZXkpIHsKICAgICAgICBjYXNlICdBcnJvd0xlZnQnOgogICAgICAgIGNhc2UgJ0Fycm93UmlnaHQnOgogICAgICAgIGNhc2UgJ0hvbWUnOgogICAgICAgIGNhc2UgJ0VuZCc6CiAgICAgICAgICBfdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpOwoKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVGb2N1cyIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoKDAsIF90eXBlZF9yZWFjdC5jb21wb3NlU3RhdGVVcGRhdGVycykod2l0aFN1Z2dlc3Rpb25zVmlzaWJsZSwgd2l0aEZvY3VzZWQpKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUJsdXIiLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKCgwLCBfdHlwZWRfcmVhY3QuY29tcG9zZVN0YXRlVXBkYXRlcnMpKHdpdGhTdWdnZXN0aW9uc0hpZGRlbiwgd2l0aFVuZm9jdXNlZCkpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic2VsZWN0U3VnZ2VzdGlvbkF0IiwgZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuc2V0U3RhdGUod2l0aFN1Z2dlc3Rpb25BdEluZGV4U2VsZWN0ZWQoaW5kZXgpKTsKICAgICAgfTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImFwcGx5U2VsZWN0ZWRTdWdnZXN0aW9uIiwgZnVuY3Rpb24gKCkgewogICAgICBpZiAoX3RoaXMuc3RhdGUuc2VsZWN0ZWRJbmRleCAhPT0gbnVsbCkgewogICAgICAgIF90aGlzLmFwcGx5U3VnZ2VzdGlvbkF0KF90aGlzLnN0YXRlLnNlbGVjdGVkSW5kZXgpKCk7CiAgICAgIH0KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImFwcGx5U3VnZ2VzdGlvbkF0IiwgZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsCiAgICAgICAgICAgIHZhbHVlID0gX3RoaXMkcHJvcHMudmFsdWUsCiAgICAgICAgICAgIHN1Z2dlc3Rpb25zID0gX3RoaXMkcHJvcHMuc3VnZ2VzdGlvbnM7CiAgICAgICAgdmFyIHNlbGVjdGVkU3VnZ2VzdGlvbiA9IHN1Z2dlc3Rpb25zW2luZGV4XTsKCiAgICAgICAgaWYgKCFzZWxlY3RlZFN1Z2dlc3Rpb24pIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBuZXdWYWx1ZSA9IHZhbHVlLnN1YnN0cigwLCBzZWxlY3RlZFN1Z2dlc3Rpb24uc3RhcnQpICsgc2VsZWN0ZWRTdWdnZXN0aW9uLnRleHQgKyB2YWx1ZS5zdWJzdHIoc2VsZWN0ZWRTdWdnZXN0aW9uLmVuZCk7CgogICAgICAgIF90aGlzLnNldFN0YXRlKHdpdGhTdWdnZXN0aW9uc0hpZGRlbik7CgogICAgICAgIF90aGlzLmNoYW5nZVZhbHVlKG5ld1ZhbHVlKTsKCiAgICAgICAgX3RoaXMuZm9jdXNJbnB1dEVsZW1lbnQoKTsKICAgICAgfTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImNoYW5nZVZhbHVlIiwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIHZhciBvbkNoYW5nZSA9IF90aGlzLnByb3BzLm9uQ2hhbmdlOwoKICAgICAgaWYgKG9uQ2hhbmdlKSB7CiAgICAgICAgb25DaGFuZ2UodmFsdWUpOwogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJmb2N1c0lucHV0RWxlbWVudCIsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKF90aGlzLmlucHV0RWxlbWVudCkgewogICAgICAgIF90aGlzLmlucHV0RWxlbWVudC5mb2N1cygpOwogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzaG93U3VnZ2VzdGlvbnMiLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKHdpdGhTdWdnZXN0aW9uc1Zpc2libGUpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic3VibWl0IiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMyID0gX3RoaXMucHJvcHMsCiAgICAgICAgICBpc1ZhbGlkID0gX3RoaXMkcHJvcHMyLmlzVmFsaWQsCiAgICAgICAgICBvblN1Ym1pdCA9IF90aGlzJHByb3BzMi5vblN1Ym1pdCwKICAgICAgICAgIHZhbHVlID0gX3RoaXMkcHJvcHMyLnZhbHVlOwoKICAgICAgaWYgKGlzVmFsaWQgJiYgb25TdWJtaXQpIHsKICAgICAgICBvblN1Ym1pdCh2YWx1ZSk7CiAgICAgIH0KCiAgICAgIF90aGlzLnNldFN0YXRlKHdpdGhTdWdnZXN0aW9uc0hpZGRlbik7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJ1cGRhdGVTdWdnZXN0aW9ucyIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGlucHV0Q3Vyc29yUG9zaXRpb24gPSBfdGhpcy5pbnB1dEVsZW1lbnQgPyBfdGhpcy5pbnB1dEVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgfHwgMCA6IDA7CgogICAgICBfdGhpcy5wcm9wcy5sb2FkU3VnZ2VzdGlvbnMoX3RoaXMucHJvcHMudmFsdWUsIGlucHV0Q3Vyc29yUG9zaXRpb24sIDIwMCk7CiAgICB9KTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQXV0b2NvbXBsZXRlRmllbGQsIFt7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgX3RoaXMkcHJvcHMzID0gdGhpcy5wcm9wcywKICAgICAgICAgIHN1Z2dlc3Rpb25zID0gX3RoaXMkcHJvcHMzLnN1Z2dlc3Rpb25zLAogICAgICAgICAgaXNMb2FkaW5nU3VnZ2VzdGlvbnMgPSBfdGhpcyRwcm9wczMuaXNMb2FkaW5nU3VnZ2VzdGlvbnMsCiAgICAgICAgICBpc1ZhbGlkID0gX3RoaXMkcHJvcHMzLmlzVmFsaWQsCiAgICAgICAgICBwbGFjZWhvbGRlciA9IF90aGlzJHByb3BzMy5wbGFjZWhvbGRlciwKICAgICAgICAgIHZhbHVlID0gX3RoaXMkcHJvcHMzLnZhbHVlLAogICAgICAgICAgYXJpYUxhYmVsID0gX3RoaXMkcHJvcHMzWydhcmlhLWxhYmVsJ107CiAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IHRoaXMuc3RhdGUsCiAgICAgICAgICBhcmVTdWdnZXN0aW9uc1Zpc2libGUgPSBfdGhpcyRzdGF0ZS5hcmVTdWdnZXN0aW9uc1Zpc2libGUsCiAgICAgICAgICBzZWxlY3RlZEluZGV4ID0gX3RoaXMkc3RhdGUuc2VsZWN0ZWRJbmRleDsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlPdXRzaWRlQ2xpY2tEZXRlY3RvciwgewogICAgICAgIG9uT3V0c2lkZUNsaWNrOiB0aGlzLmhhbmRsZUJsdXIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChBdXRvY29tcGxldGVDb250YWluZXIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRml4ZWRFdWlGaWVsZFNlYXJjaCwgewogICAgICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgICAgICBpbnB1dFJlZjogdGhpcy5oYW5kbGVDaGFuZ2VJbnB1dFJlZiwKICAgICAgICBpc0xvYWRpbmc6IGlzTG9hZGluZ1N1Z2dlc3Rpb25zLAogICAgICAgIGlzSW52YWxpZDogIWlzVmFsaWQsCiAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlQ2hhbmdlLAogICAgICAgIG9uRm9jdXM6IHRoaXMuaGFuZGxlRm9jdXMsCiAgICAgICAgb25LZXlEb3duOiB0aGlzLmhhbmRsZUtleURvd24sCiAgICAgICAgb25LZXlVcDogdGhpcy5oYW5kbGVLZXlVcCwKICAgICAgICBvblNlYXJjaDogdGhpcy5zdWJtaXQsCiAgICAgICAgcGxhY2Vob2xkZXI6IHBsYWNlaG9sZGVyLAogICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICAiYXJpYS1sYWJlbCI6IGFyaWFMYWJlbAogICAgICB9KSwgYXJlU3VnZ2VzdGlvbnNWaXNpYmxlICYmICFpc0xvYWRpbmdTdWdnZXN0aW9ucyAmJiBzdWdnZXN0aW9ucy5sZW5ndGggPiAwID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChTdWdnZXN0aW9uc1BhbmVsLCBudWxsLCBzdWdnZXN0aW9ucy5tYXAoZnVuY3Rpb24gKHN1Z2dlc3Rpb24sIHN1Z2dlc3Rpb25JbmRleCkgewogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9zdWdnZXN0aW9uX2l0ZW0uU3VnZ2VzdGlvbkl0ZW0sIHsKICAgICAgICAgIGtleTogc3VnZ2VzdGlvbi50ZXh0LAogICAgICAgICAgc3VnZ2VzdGlvbjogc3VnZ2VzdGlvbiwKICAgICAgICAgIGlzU2VsZWN0ZWQ6IHN1Z2dlc3Rpb25JbmRleCA9PT0gc2VsZWN0ZWRJbmRleCwKICAgICAgICAgIG9uTW91c2VFbnRlcjogX3RoaXMyLnNlbGVjdFN1Z2dlc3Rpb25BdChzdWdnZXN0aW9uSW5kZXgpLAogICAgICAgICAgb25DbGljazogX3RoaXMyLmFwcGx5U3VnZ2VzdGlvbkF0KHN1Z2dlc3Rpb25JbmRleCkKICAgICAgICB9KTsKICAgICAgfSkpIDogbnVsbCkpOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgaWYgKHRoaXMuaW5wdXRFbGVtZW50ICYmIHRoaXMucHJvcHMuYXV0b0ZvY3VzKSB7CiAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQuZm9jdXMoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudERpZFVwZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykgewogICAgICB2YXIgaGFzTmV3VmFsdWUgPSBwcmV2UHJvcHMudmFsdWUgIT09IHRoaXMucHJvcHMudmFsdWU7CiAgICAgIHZhciBoYXNOZXdTdWdnZXN0aW9ucyA9IHByZXZQcm9wcy5zdWdnZXN0aW9ucyAhPT0gdGhpcy5wcm9wcy5zdWdnZXN0aW9uczsKCiAgICAgIGlmIChoYXNOZXdWYWx1ZSkgewogICAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTsKICAgICAgfQoKICAgICAgaWYgKGhhc05ld1ZhbHVlICYmIHRoaXMucHJvcHMudmFsdWUgPT09ICcnKSB7CiAgICAgICAgdGhpcy5zdWJtaXQoKTsKICAgICAgfQoKICAgICAgaWYgKGhhc05ld1N1Z2dlc3Rpb25zICYmIHRoaXMuc3RhdGUuaXNGb2N1c2VkKSB7CiAgICAgICAgdGhpcy5zaG93U3VnZ2VzdGlvbnMoKTsKICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIEF1dG9jb21wbGV0ZUZpZWxkOwp9KF9yZWFjdC5kZWZhdWx0LkNvbXBvbmVudCk7CgpleHBvcnRzLkF1dG9jb21wbGV0ZUZpZWxkID0gQXV0b2NvbXBsZXRlRmllbGQ7Cgp2YXIgd2l0aFByZXZpb3VzU3VnZ2VzdGlvblNlbGVjdGVkID0gZnVuY3Rpb24gd2l0aFByZXZpb3VzU3VnZ2VzdGlvblNlbGVjdGVkKHN0YXRlLCBwcm9wcykgewogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgc2VsZWN0ZWRJbmRleDogcHJvcHMuc3VnZ2VzdGlvbnMubGVuZ3RoID09PSAwID8gbnVsbCA6IHN0YXRlLnNlbGVjdGVkSW5kZXggIT09IG51bGwgPyAoc3RhdGUuc2VsZWN0ZWRJbmRleCArIHByb3BzLnN1Z2dlc3Rpb25zLmxlbmd0aCAtIDEpICUgcHJvcHMuc3VnZ2VzdGlvbnMubGVuZ3RoIDogTWF0aC5tYXgocHJvcHMuc3VnZ2VzdGlvbnMubGVuZ3RoIC0gMSwgMCkKICB9KTsKfTsKCnZhciB3aXRoTmV4dFN1Z2dlc3Rpb25TZWxlY3RlZCA9IGZ1bmN0aW9uIHdpdGhOZXh0U3VnZ2VzdGlvblNlbGVjdGVkKHN0YXRlLCBwcm9wcykgewogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgc2VsZWN0ZWRJbmRleDogcHJvcHMuc3VnZ2VzdGlvbnMubGVuZ3RoID09PSAwID8gbnVsbCA6IHN0YXRlLnNlbGVjdGVkSW5kZXggIT09IG51bGwgPyAoc3RhdGUuc2VsZWN0ZWRJbmRleCArIDEpICUgcHJvcHMuc3VnZ2VzdGlvbnMubGVuZ3RoIDogMAogIH0pOwp9OwoKdmFyIHdpdGhTdWdnZXN0aW9uQXRJbmRleFNlbGVjdGVkID0gZnVuY3Rpb24gd2l0aFN1Z2dlc3Rpb25BdEluZGV4U2VsZWN0ZWQoc3VnZ2VzdGlvbkluZGV4KSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSwgcHJvcHMpIHsKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgICBzZWxlY3RlZEluZGV4OiBwcm9wcy5zdWdnZXN0aW9ucy5sZW5ndGggPT09IDAgPyBudWxsIDogc3VnZ2VzdGlvbkluZGV4ID49IDAgJiYgc3VnZ2VzdGlvbkluZGV4IDwgcHJvcHMuc3VnZ2VzdGlvbnMubGVuZ3RoID8gc3VnZ2VzdGlvbkluZGV4IDogMAogICAgfSk7CiAgfTsKfTsKCnZhciB3aXRoU3VnZ2VzdGlvbnNWaXNpYmxlID0gZnVuY3Rpb24gd2l0aFN1Z2dlc3Rpb25zVmlzaWJsZShzdGF0ZSkgewogIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgYXJlU3VnZ2VzdGlvbnNWaXNpYmxlOiB0cnVlCiAgfSk7Cn07Cgp2YXIgd2l0aFN1Z2dlc3Rpb25zSGlkZGVuID0gZnVuY3Rpb24gd2l0aFN1Z2dlc3Rpb25zSGlkZGVuKHN0YXRlKSB7CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLCB7CiAgICBhcmVTdWdnZXN0aW9uc1Zpc2libGU6IGZhbHNlLAogICAgc2VsZWN0ZWRJbmRleDogbnVsbAogIH0pOwp9OwoKdmFyIHdpdGhGb2N1c2VkID0gZnVuY3Rpb24gd2l0aEZvY3VzZWQoc3RhdGUpIHsKICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgIGlzRm9jdXNlZDogdHJ1ZQogIH0pOwp9OwoKdmFyIHdpdGhVbmZvY3VzZWQgPSBmdW5jdGlvbiB3aXRoVW5mb2N1c2VkKHN0YXRlKSB7CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLCB7CiAgICBpc0ZvY3VzZWQ6IGZhbHNlCiAgfSk7Cn07Cgp2YXIgRml4ZWRFdWlGaWVsZFNlYXJjaCA9IF9ldWkuRXVpRmllbGRTZWFyY2g7Cgp2YXIgQXV0b2NvbXBsZXRlQ29udGFpbmVyID0gX3B1YmxpYy5ldWlTdHlsZWQuZGl2KF90ZW1wbGF0ZU9iamVjdCgpKTsKCnZhciBTdWdnZXN0aW9uc1BhbmVsID0gKDAsIF9wdWJsaWMuZXVpU3R5bGVkKShfZXVpLkV1aVBhbmVsKS5hdHRycyhmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHsKICAgIHBhZGRpbmdTaXplOiAnbm9uZScsCiAgICBoYXNTaGFkb3c6IHRydWUKICB9Owp9KShfdGVtcGxhdGVPYmplY3QyKCksIGZ1bmN0aW9uIChwcm9wcykgewogIHJldHVybiBwcm9wcy50aGVtZS5ldWkuZXVpWkxldmVsMTsKfSk7"},null]}