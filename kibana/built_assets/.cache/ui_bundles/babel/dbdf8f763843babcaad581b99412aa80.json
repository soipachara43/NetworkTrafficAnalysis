{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/lens/public/xy_visualization/xy_visualization.js","dependencies":[{"path":"x-pack/legacy/plugins/lens/public/xy_visualization/xy_visualization.js","mtime":1589249552332},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnh5VmlzdWFsaXphdGlvbiA9IHZvaWQgMDsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfcmVhY3REb20gPSByZXF1aXJlKCJyZWFjdC1kb20iKTsKCnZhciBfY2hhcnRzID0gcmVxdWlyZSgiQGVsYXN0aWMvY2hhcnRzIik7Cgp2YXIgX3JlYWN0MiA9IHJlcXVpcmUoIkBrYm4vaTE4bi9yZWFjdCIpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX3h5X3N1Z2dlc3Rpb25zID0gcmVxdWlyZSgiLi94eV9zdWdnZXN0aW9ucyIpOwoKdmFyIF94eV9jb25maWdfcGFuZWwgPSByZXF1aXJlKCIuL3h5X2NvbmZpZ19wYW5lbCIpOwoKdmFyIF90eXBlcyA9IHJlcXVpcmUoIi4vdHlwZXMiKTsKCnZhciBfdG9fZXhwcmVzc2lvbiA9IHJlcXVpcmUoIi4vdG9fZXhwcmVzc2lvbiIpOwoKdmFyIF9jaGFydF9iYXJfc3RhY2tlZCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi4vYXNzZXRzL2NoYXJ0X2Jhcl9zdGFja2VkLnN2ZyIpKTsKCnZhciBfY2hhcnRfbWl4ZWRfeHkgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4uL2Fzc2V0cy9jaGFydF9taXhlZF94eS5zdmciKSk7Cgp2YXIgX3N0YXRlX2hlbHBlcnMgPSByZXF1aXJlKCIuL3N0YXRlX2hlbHBlcnMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgIGRlZmF1bHQ6IG9iagogIH07Cn0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsKICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7CiAgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7CiAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICBhcnIyW2ldID0gYXJyW2ldOwogICAgfQoKICAgIHJldHVybiBhcnIyOwogIH0KfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCnZhciBkZWZhdWx0SWNvbiA9IF9jaGFydF9iYXJfc3RhY2tlZC5kZWZhdWx0Owp2YXIgZGVmYXVsdFNlcmllc1R5cGUgPSAnYmFyX3N0YWNrZWQnOwoKdmFyIGlzTnVtZXJpY01ldHJpYyA9IGZ1bmN0aW9uIGlzTnVtZXJpY01ldHJpYyhvcCkgewogIHJldHVybiAhb3AuaXNCdWNrZXRlZCAmJiBvcC5kYXRhVHlwZSA9PT0gJ251bWJlcic7Cn07Cgp2YXIgaXNCdWNrZXRlZCA9IGZ1bmN0aW9uIGlzQnVja2V0ZWQob3ApIHsKICByZXR1cm4gb3AuaXNCdWNrZXRlZDsKfTsKCmZ1bmN0aW9uIF9nZXREZXNjcmlwdGlvbihzdGF0ZSkgewogIGlmICghc3RhdGUpIHsKICAgIHJldHVybiB7CiAgICAgIGljb246IGRlZmF1bHRJY29uLAogICAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMueHlWaXN1YWxpemF0aW9uLnh5TGFiZWwnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdYWScKICAgICAgfSkKICAgIH07CiAgfQoKICBpZiAoIXN0YXRlLmxheWVycy5sZW5ndGgpIHsKICAgIHZhciBfdmlzdWFsaXphdGlvblR5cGUgPSBfdHlwZXMudmlzdWFsaXphdGlvblR5cGVzLmZpbmQoZnVuY3Rpb24gKHYpIHsKICAgICAgcmV0dXJuIHYuaWQgPT09IHN0YXRlLnByZWZlcnJlZFNlcmllc1R5cGU7CiAgICB9KTsKCiAgICByZXR1cm4gewogICAgICBpY29uOiBfdmlzdWFsaXphdGlvblR5cGUubGFyZ2VJY29uIHx8IF92aXN1YWxpemF0aW9uVHlwZS5pY29uLAogICAgICBsYWJlbDogX3Zpc3VhbGl6YXRpb25UeXBlLmxhYmVsCiAgICB9OwogIH0KCiAgdmFyIHZpc3VhbGl6YXRpb25UeXBlID0gX3R5cGVzLnZpc3VhbGl6YXRpb25UeXBlcy5maW5kKGZ1bmN0aW9uICh0KSB7CiAgICByZXR1cm4gdC5pZCA9PT0gc3RhdGUubGF5ZXJzWzBdLnNlcmllc1R5cGU7CiAgfSk7CgogIHZhciBzZXJpZXNUeXBlcyA9IF9sb2Rhc2guZGVmYXVsdC51bmlxdWUoc3RhdGUubGF5ZXJzLm1hcChmdW5jdGlvbiAobCkgewogICAgcmV0dXJuIGwuc2VyaWVzVHlwZTsKICB9KSk7CgogIHJldHVybiB7CiAgICBpY29uOiBzZXJpZXNUeXBlcy5sZW5ndGggPT09IDEgPyB2aXN1YWxpemF0aW9uVHlwZS5sYXJnZUljb24gfHwgdmlzdWFsaXphdGlvblR5cGUuaWNvbiA6IF9jaGFydF9taXhlZF94eS5kZWZhdWx0LAogICAgbGFiZWw6IHNlcmllc1R5cGVzLmxlbmd0aCA9PT0gMSA/IHZpc3VhbGl6YXRpb25UeXBlLmxhYmVsIDogKDAsIF9zdGF0ZV9oZWxwZXJzLmlzSG9yaXpvbnRhbENoYXJ0KShzdGF0ZS5sYXllcnMpID8gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMueHlWaXN1YWxpemF0aW9uLm1peGVkQmFySG9yaXpvbnRhbExhYmVsJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ01peGVkIGhvcml6b250YWwgYmFyJwogICAgfSkgOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subGVucy54eVZpc3VhbGl6YXRpb24ubWl4ZWRMYWJlbCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdNaXhlZCBYWScKICAgIH0pCiAgfTsKfQoKdmFyIHh5VmlzdWFsaXphdGlvbiA9IHsKICBpZDogJ2xuc1hZJywKICB2aXN1YWxpemF0aW9uVHlwZXM6IF90eXBlcy52aXN1YWxpemF0aW9uVHlwZXMsCiAgZ2V0TGF5ZXJJZHM6IGZ1bmN0aW9uIGdldExheWVySWRzKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUubGF5ZXJzLm1hcChmdW5jdGlvbiAobCkgewogICAgICByZXR1cm4gbC5sYXllcklkOwogICAgfSk7CiAgfSwKICByZW1vdmVMYXllcjogZnVuY3Rpb24gcmVtb3ZlTGF5ZXIoc3RhdGUsIGxheWVySWQpIHsKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgICBsYXllcnM6IHN0YXRlLmxheWVycy5maWx0ZXIoZnVuY3Rpb24gKGwpIHsKICAgICAgICByZXR1cm4gbC5sYXllcklkICE9PSBsYXllcklkOwogICAgICB9KQogICAgfSk7CiAgfSwKICBhcHBlbmRMYXllcjogZnVuY3Rpb24gYXBwZW5kTGF5ZXIoc3RhdGUsIGxheWVySWQpIHsKICAgIHZhciB1c2VkU2VyaWVzVHlwZXMgPSBfbG9kYXNoLmRlZmF1bHQudW5pcShzdGF0ZS5sYXllcnMubWFwKGZ1bmN0aW9uIChsYXllcikgewogICAgICByZXR1cm4gbGF5ZXIuc2VyaWVzVHlwZTsKICAgIH0pKTsKCiAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgc3RhdGUsIHsKICAgICAgbGF5ZXJzOiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHN0YXRlLmxheWVycyksIFtuZXdMYXllclN0YXRlKHVzZWRTZXJpZXNUeXBlcy5sZW5ndGggPT09IDEgPyB1c2VkU2VyaWVzVHlwZXNbMF0gOiBzdGF0ZS5wcmVmZXJyZWRTZXJpZXNUeXBlLCBsYXllcklkKV0pCiAgICB9KTsKICB9LAogIGNsZWFyTGF5ZXI6IGZ1bmN0aW9uIGNsZWFyTGF5ZXIoc3RhdGUsIGxheWVySWQpIHsKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSwgewogICAgICBsYXllcnM6IHN0YXRlLmxheWVycy5tYXAoZnVuY3Rpb24gKGwpIHsKICAgICAgICByZXR1cm4gbC5sYXllcklkICE9PSBsYXllcklkID8gbCA6IG5ld0xheWVyU3RhdGUoc3RhdGUucHJlZmVycmVkU2VyaWVzVHlwZSwgbGF5ZXJJZCk7CiAgICAgIH0pCiAgICB9KTsKICB9LAogIGdldERlc2NyaXB0aW9uOiBmdW5jdGlvbiBnZXREZXNjcmlwdGlvbihzdGF0ZSkgewogICAgdmFyIF9nZXREZXNjcmlwdGlvbjIgPSBfZ2V0RGVzY3JpcHRpb24oc3RhdGUpLAogICAgICAgIGljb24gPSBfZ2V0RGVzY3JpcHRpb24yLmljb24sCiAgICAgICAgbGFiZWwgPSBfZ2V0RGVzY3JpcHRpb24yLmxhYmVsOwoKICAgIHZhciBjaGFydExhYmVsID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMueHlWaXN1YWxpemF0aW9uLmNoYXJ0TGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAne2xhYmVsfSBjaGFydCcsCiAgICAgIHZhbHVlczogewogICAgICAgIGxhYmVsOiBsYWJlbAogICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gewogICAgICBpY29uOiBpY29uIHx8IGRlZmF1bHRJY29uLAogICAgICBsYWJlbDogY2hhcnRMYWJlbAogICAgfTsKICB9LAogIHN3aXRjaFZpc3VhbGl6YXRpb25UeXBlOiBmdW5jdGlvbiBzd2l0Y2hWaXN1YWxpemF0aW9uVHlwZShzZXJpZXNUeXBlLCBzdGF0ZSkgewogICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLCB7CiAgICAgIHByZWZlcnJlZFNlcmllc1R5cGU6IHNlcmllc1R5cGUsCiAgICAgIGxheWVyczogc3RhdGUubGF5ZXJzLm1hcChmdW5jdGlvbiAobGF5ZXIpIHsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgbGF5ZXIsIHsKICAgICAgICAgIHNlcmllc1R5cGU6IHNlcmllc1R5cGUKICAgICAgICB9KTsKICAgICAgfSkKICAgIH0pOwogIH0sCiAgZ2V0U3VnZ2VzdGlvbnM6IF94eV9zdWdnZXN0aW9ucy5nZXRTdWdnZXN0aW9ucywKICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKGZyYW1lLCBzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlIHx8IHsKICAgICAgdGl0bGU6ICdFbXB0eSBYWSBjaGFydCcsCiAgICAgIGxlZ2VuZDogewogICAgICAgIGlzVmlzaWJsZTogdHJ1ZSwKICAgICAgICBwb3NpdGlvbjogX2NoYXJ0cy5Qb3NpdGlvbi5SaWdodAogICAgICB9LAogICAgICBwcmVmZXJyZWRTZXJpZXNUeXBlOiBkZWZhdWx0U2VyaWVzVHlwZSwKICAgICAgbGF5ZXJzOiBbewogICAgICAgIGxheWVySWQ6IGZyYW1lLmFkZE5ld0xheWVyKCksCiAgICAgICAgYWNjZXNzb3JzOiBbXSwKICAgICAgICBwb3NpdGlvbjogX2NoYXJ0cy5Qb3NpdGlvbi5Ub3AsCiAgICAgICAgc2VyaWVzVHlwZTogZGVmYXVsdFNlcmllc1R5cGUsCiAgICAgICAgc2hvd0dyaWRsaW5lczogZmFsc2UKICAgICAgfV0KICAgIH07CiAgfSwKICBnZXRQZXJzaXN0YWJsZVN0YXRlOiBmdW5jdGlvbiBnZXRQZXJzaXN0YWJsZVN0YXRlKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGU7CiAgfSwKICBnZXRDb25maWd1cmF0aW9uOiBmdW5jdGlvbiBnZXRDb25maWd1cmF0aW9uKHByb3BzKSB7CiAgICB2YXIgbGF5ZXIgPSBwcm9wcy5zdGF0ZS5sYXllcnMuZmluZChmdW5jdGlvbiAobCkgewogICAgICByZXR1cm4gbC5sYXllcklkID09PSBwcm9wcy5sYXllcklkOwogICAgfSk7CiAgICByZXR1cm4gewogICAgICBncm91cHM6IFt7CiAgICAgICAgZ3JvdXBJZDogJ3gnLAogICAgICAgIGdyb3VwTGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5sZW5zLnh5Q2hhcnQueEF4aXNMYWJlbCcsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnWC1heGlzJwogICAgICAgIH0pLAogICAgICAgIGFjY2Vzc29yczogbGF5ZXIueEFjY2Vzc29yID8gW2xheWVyLnhBY2Nlc3Nvcl0gOiBbXSwKICAgICAgICBmaWx0ZXJPcGVyYXRpb25zOiBpc0J1Y2tldGVkLAogICAgICAgIHN1Z2dlc3RlZFByaW9yaXR5OiAxLAogICAgICAgIHN1cHBvcnRzTW9yZUNvbHVtbnM6ICFsYXllci54QWNjZXNzb3IsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgZGF0YVRlc3RTdWJqOiAnbG5zWFlfeERpbWVuc2lvblBhbmVsJwogICAgICB9LCB7CiAgICAgICAgZ3JvdXBJZDogJ3knLAogICAgICAgIGdyb3VwTGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5sZW5zLnh5Q2hhcnQueUF4aXNMYWJlbCcsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnWS1heGlzJwogICAgICAgIH0pLAogICAgICAgIGFjY2Vzc29yczogbGF5ZXIuYWNjZXNzb3JzLAogICAgICAgIGZpbHRlck9wZXJhdGlvbnM6IGlzTnVtZXJpY01ldHJpYywKICAgICAgICBzdXBwb3J0c01vcmVDb2x1bW5zOiB0cnVlLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIGRhdGFUZXN0U3ViajogJ2xuc1hZX3lEaW1lbnNpb25QYW5lbCcKICAgICAgfSwgewogICAgICAgIGdyb3VwSWQ6ICdicmVha2Rvd24nLAogICAgICAgIGdyb3VwTGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5sZW5zLnh5Q2hhcnQuc3BsaXRTZXJpZXMnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0JyZWFrIGRvd24gYnknCiAgICAgICAgfSksCiAgICAgICAgYWNjZXNzb3JzOiBsYXllci5zcGxpdEFjY2Vzc29yID8gW2xheWVyLnNwbGl0QWNjZXNzb3JdIDogW10sCiAgICAgICAgZmlsdGVyT3BlcmF0aW9uczogaXNCdWNrZXRlZCwKICAgICAgICBzdWdnZXN0ZWRQcmlvcml0eTogMCwKICAgICAgICBzdXBwb3J0c01vcmVDb2x1bW5zOiAhbGF5ZXIuc3BsaXRBY2Nlc3NvciwKICAgICAgICBkYXRhVGVzdFN1Ymo6ICdsbnNYWV9zcGxpdERpbWVuc2lvblBhbmVsJwogICAgICB9XQogICAgfTsKICB9LAogIHNldERpbWVuc2lvbjogZnVuY3Rpb24gc2V0RGltZW5zaW9uKF9yZWYpIHsKICAgIHZhciBwcmV2U3RhdGUgPSBfcmVmLnByZXZTdGF0ZSwKICAgICAgICBsYXllcklkID0gX3JlZi5sYXllcklkLAogICAgICAgIGNvbHVtbklkID0gX3JlZi5jb2x1bW5JZCwKICAgICAgICBncm91cElkID0gX3JlZi5ncm91cElkOwogICAgdmFyIG5ld0xheWVyID0gcHJldlN0YXRlLmxheWVycy5maW5kKGZ1bmN0aW9uIChsKSB7CiAgICAgIHJldHVybiBsLmxheWVySWQgPT09IGxheWVySWQ7CiAgICB9KTsKCiAgICBpZiAoIW5ld0xheWVyKSB7CiAgICAgIHJldHVybiBwcmV2U3RhdGU7CiAgICB9CgogICAgaWYgKGdyb3VwSWQgPT09ICd4JykgewogICAgICBuZXdMYXllci54QWNjZXNzb3IgPSBjb2x1bW5JZDsKICAgIH0KCiAgICBpZiAoZ3JvdXBJZCA9PT0gJ3knKSB7CiAgICAgIG5ld0xheWVyLmFjY2Vzc29ycyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkobmV3TGF5ZXIuYWNjZXNzb3JzLmZpbHRlcihmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiBhICE9PSBjb2x1bW5JZDsKICAgICAgfSkpLCBbY29sdW1uSWRdKTsKICAgIH0KCiAgICBpZiAoZ3JvdXBJZCA9PT0gJ2JyZWFrZG93bicpIHsKICAgICAgbmV3TGF5ZXIuc3BsaXRBY2Nlc3NvciA9IGNvbHVtbklkOwogICAgfQoKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBwcmV2U3RhdGUsIHsKICAgICAgbGF5ZXJzOiBwcmV2U3RhdGUubGF5ZXJzLm1hcChmdW5jdGlvbiAobCkgewogICAgICAgIHJldHVybiBsLmxheWVySWQgPT09IGxheWVySWQgPyBuZXdMYXllciA6IGw7CiAgICAgIH0pCiAgICB9KTsKICB9LAogIHJlbW92ZURpbWVuc2lvbjogZnVuY3Rpb24gcmVtb3ZlRGltZW5zaW9uKF9yZWYyKSB7CiAgICB2YXIgcHJldlN0YXRlID0gX3JlZjIucHJldlN0YXRlLAogICAgICAgIGxheWVySWQgPSBfcmVmMi5sYXllcklkLAogICAgICAgIGNvbHVtbklkID0gX3JlZjIuY29sdW1uSWQ7CiAgICB2YXIgbmV3TGF5ZXIgPSBwcmV2U3RhdGUubGF5ZXJzLmZpbmQoZnVuY3Rpb24gKGwpIHsKICAgICAgcmV0dXJuIGwubGF5ZXJJZCA9PT0gbGF5ZXJJZDsKICAgIH0pOwoKICAgIGlmICghbmV3TGF5ZXIpIHsKICAgICAgcmV0dXJuIHByZXZTdGF0ZTsKICAgIH0KCiAgICBpZiAobmV3TGF5ZXIueEFjY2Vzc29yID09PSBjb2x1bW5JZCkgewogICAgICBkZWxldGUgbmV3TGF5ZXIueEFjY2Vzc29yOwogICAgfSBlbHNlIGlmIChuZXdMYXllci5zcGxpdEFjY2Vzc29yID09PSBjb2x1bW5JZCkgewogICAgICBkZWxldGUgbmV3TGF5ZXIuc3BsaXRBY2Nlc3NvcjsKICAgIH0gZWxzZSBpZiAobmV3TGF5ZXIuYWNjZXNzb3JzLmluY2x1ZGVzKGNvbHVtbklkKSkgewogICAgICBuZXdMYXllci5hY2Nlc3NvcnMgPSBuZXdMYXllci5hY2Nlc3NvcnMuZmlsdGVyKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIGEgIT09IGNvbHVtbklkOwogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgcHJldlN0YXRlLCB7CiAgICAgIGxheWVyczogcHJldlN0YXRlLmxheWVycy5tYXAoZnVuY3Rpb24gKGwpIHsKICAgICAgICByZXR1cm4gbC5sYXllcklkID09PSBsYXllcklkID8gbmV3TGF5ZXIgOiBsOwogICAgICB9KQogICAgfSk7CiAgfSwKICBnZXRMYXllckNvbnRleHRNZW51SWNvbjogZnVuY3Rpb24gZ2V0TGF5ZXJDb250ZXh0TWVudUljb24oX3JlZjMpIHsKICAgIHZhciBfdmlzdWFsaXphdGlvblR5cGVzJGY7CgogICAgdmFyIHN0YXRlID0gX3JlZjMuc3RhdGUsCiAgICAgICAgbGF5ZXJJZCA9IF9yZWYzLmxheWVySWQ7CiAgICB2YXIgbGF5ZXIgPSBzdGF0ZS5sYXllcnMuZmluZChmdW5jdGlvbiAobCkgewogICAgICByZXR1cm4gbC5sYXllcklkID09PSBsYXllcklkOwogICAgfSk7CiAgICByZXR1cm4gKF92aXN1YWxpemF0aW9uVHlwZXMkZiA9IF90eXBlcy52aXN1YWxpemF0aW9uVHlwZXMuZmluZChmdW5jdGlvbiAodCkgewogICAgICByZXR1cm4gdC5pZCA9PT0gKGxheWVyID09PSBudWxsIHx8IGxheWVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsYXllci5zZXJpZXNUeXBlKTsKICAgIH0pKSA9PT0gbnVsbCB8fCBfdmlzdWFsaXphdGlvblR5cGVzJGYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92aXN1YWxpemF0aW9uVHlwZXMkZi5pY29uOwogIH0sCiAgcmVuZGVyTGF5ZXJDb250ZXh0TWVudTogZnVuY3Rpb24gcmVuZGVyTGF5ZXJDb250ZXh0TWVudShkb21FbGVtZW50LCBwcm9wcykgewogICAgKDAsIF9yZWFjdERvbS5yZW5kZXIpKF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5JMThuUHJvdmlkZXIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3h5X2NvbmZpZ19wYW5lbC5MYXllckNvbnRleHRNZW51LCBwcm9wcykpLCBkb21FbGVtZW50KTsKICB9LAogIHRvRXhwcmVzc2lvbjogX3RvX2V4cHJlc3Npb24udG9FeHByZXNzaW9uLAogIHRvUHJldmlld0V4cHJlc3Npb246IF90b19leHByZXNzaW9uLnRvUHJldmlld0V4cHJlc3Npb24KfTsKZXhwb3J0cy54eVZpc3VhbGl6YXRpb24gPSB4eVZpc3VhbGl6YXRpb247CgpmdW5jdGlvbiBuZXdMYXllclN0YXRlKHNlcmllc1R5cGUsIGxheWVySWQpIHsKICByZXR1cm4gewogICAgbGF5ZXJJZDogbGF5ZXJJZCwKICAgIHNlcmllc1R5cGU6IHNlcmllc1R5cGUsCiAgICBhY2Nlc3NvcnM6IFtdCiAgfTsKfQ=="},null]}