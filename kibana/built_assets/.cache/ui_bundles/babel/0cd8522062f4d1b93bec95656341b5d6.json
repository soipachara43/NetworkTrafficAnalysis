{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/maps/public/layers/sources/es_pew_pew_source/es_pew_pew_source.js","dependencies":[{"path":"x-pack/legacy/plugins/maps/public/layers/sources/es_pew_pew_source/es_pew_pew_source.js","mtime":1589249552452},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkVTUGV3UGV3U291cmNlID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3YgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInV1aWQvdjQiKSk7Cgp2YXIgX3ZlY3Rvcl9mZWF0dXJlX3R5cGVzID0gcmVxdWlyZSgiLi4vdmVjdG9yX2ZlYXR1cmVfdHlwZXMiKTsKCnZhciBfdmVjdG9yX2xheWVyID0gcmVxdWlyZSgiLi4vLi4vdmVjdG9yX2xheWVyIik7Cgp2YXIgX2NyZWF0ZV9zb3VyY2VfZWRpdG9yID0gcmVxdWlyZSgiLi9jcmVhdGVfc291cmNlX2VkaXRvciIpOwoKdmFyIF91cGRhdGVfc291cmNlX2VkaXRvciA9IHJlcXVpcmUoIi4vdXBkYXRlX3NvdXJjZV9lZGl0b3IiKTsKCnZhciBfdmVjdG9yX3N0eWxlID0gcmVxdWlyZSgiLi4vLi4vc3R5bGVzL3ZlY3Rvci92ZWN0b3Jfc3R5bGUiKTsKCnZhciBfdmVjdG9yX3N0eWxlX2RlZmF1bHRzID0gcmVxdWlyZSgiLi4vLi4vc3R5bGVzL3ZlY3Rvci92ZWN0b3Jfc3R5bGVfZGVmYXVsdHMiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21tb24vY29uc3RhbnRzIik7Cgp2YXIgX2kxOG5fZ2V0dGVycyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbW1vbi9pMThuX2dldHRlcnMiKTsKCnZhciBfY29udmVydF90b19saW5lcyA9IHJlcXVpcmUoIi4vY29udmVydF90b19saW5lcyIpOwoKdmFyIF9lc19hZ2dfc291cmNlID0gcmVxdWlyZSgiLi4vZXNfYWdnX3NvdXJjZSIpOwoKdmFyIF9keW5hbWljX3N0eWxlX3Byb3BlcnR5ID0gcmVxdWlyZSgiLi4vLi4vc3R5bGVzL3ZlY3Rvci9wcm9wZXJ0aWVzL2R5bmFtaWNfc3R5bGVfcHJvcGVydHkiKTsKCnZhciBfY29sb3JfdXRpbHMgPSByZXF1aXJlKCIuLi8uLi9zdHlsZXMvY29sb3JfdXRpbHMiKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjL3BsdWdpbnMvZGF0YS9wdWJsaWMiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7IH0gfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIHNlbGYgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7IGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7IH0gZnVuY3Rpb24gX3Rocm93KGVycikgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7IH0gX25leHQodW5kZWZpbmVkKTsgfSk7IH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIHNlbGY7IH0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKdmFyIE1BWF9HRU9USUxFX0xFVkVMID0gMjk7Cgp2YXIgRVNQZXdQZXdTb3VyY2UgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfQWJzdHJhY3RFU0FnZ1NvdXJjZSkgewogIF9pbmhlcml0cyhFU1Bld1Bld1NvdXJjZSwgX0Fic3RyYWN0RVNBZ2dTb3VyY2UpOwoKICBmdW5jdGlvbiBFU1Bld1Bld1NvdXJjZSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFU1Bld1Bld1NvdXJjZSk7CgogICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihFU1Bld1Bld1NvdXJjZSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoRVNQZXdQZXdTb3VyY2UsIFt7CiAgICBrZXk6ICJyZW5kZXJTb3VyY2VTZXR0aW5nc0VkaXRvciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyU291cmNlU2V0dGluZ3NFZGl0b3IoX3JlZikgewogICAgICB2YXIgb25DaGFuZ2UgPSBfcmVmLm9uQ2hhbmdlOwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfdXBkYXRlX3NvdXJjZV9lZGl0b3IuVXBkYXRlU291cmNlRWRpdG9yLCB7CiAgICAgICAgaW5kZXhQYXR0ZXJuSWQ6IHRoaXMuZ2V0SW5kZXhQYXR0ZXJuSWQoKSwKICAgICAgICBvbkNoYW5nZTogb25DaGFuZ2UsCiAgICAgICAgbWV0cmljczogdGhpcy5fZGVzY3JpcHRvci5tZXRyaWNzLAogICAgICAgIGFwcGx5R2xvYmFsUXVlcnk6IHRoaXMuX2Rlc2NyaXB0b3IuYXBwbHlHbG9iYWxRdWVyeQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0ZpbHRlckJ5TWFwQm91bmRzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZpbHRlckJ5TWFwQm91bmRzKCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0pvaW5hYmxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0pvaW5hYmxlKCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNHZW9HcmlkUHJlY2lzaW9uQXdhcmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzR2VvR3JpZFByZWNpc2lvbkF3YXJlKCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRTdXBwb3J0ZWRTaGFwZVR5cGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0U3VwcG9ydGVkU2hhcGVUeXBlcyA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgW192ZWN0b3JfZmVhdHVyZV90eXBlcy5WRUNUT1JfU0hBUEVfVFlQRVMuTElORV0pOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0U3VwcG9ydGVkU2hhcGVUeXBlcygpIHsKICAgICAgICByZXR1cm4gX2dldFN1cHBvcnRlZFNoYXBlVHlwZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldFN1cHBvcnRlZFNoYXBlVHlwZXM7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJnZXRJbW11dGFibGVQcm9wZXJ0aWVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0SW1tdXRhYmxlUHJvcGVydGllcyA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBpbmRleFBhdHRlcm5UaXRsZSwgaW5kZXhQYXR0ZXJuOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpbmRleFBhdHRlcm5UaXRsZSA9IHRoaXMuZ2V0SW5kZXhQYXR0ZXJuSWQoKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEluZGV4UGF0dGVybigpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBpbmRleFBhdHRlcm4gPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGluZGV4UGF0dGVyblRpdGxlID0gaW5kZXhQYXR0ZXJuLnRpdGxlOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDg7CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgW3sKICAgICAgICAgICAgICAgICAgbGFiZWw6ICgwLCBfaTE4bl9nZXR0ZXJzLmdldERhdGFTb3VyY2VMYWJlbCkoKSwKICAgICAgICAgICAgICAgICAgdmFsdWU6IEVTUGV3UGV3U291cmNlLnRpdGxlCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWFwcy5zb3VyY2UucGV3UGV3LmluZGV4UGF0dGVybkxhYmVsJywgewogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnSW5kZXggcGF0dGVybicKICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBpbmRleFBhdHRlcm5UaXRsZQogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1hcHMuc291cmNlLnBld1Bldy5zb3VyY2VHZW9GaWVsZExhYmVsJywgewogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU291cmNlJwogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuX2Rlc2NyaXB0b3Iuc291cmNlR2VvRmllbGQKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgbGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tYXBzLnNvdXJjZS5wZXdQZXcuZGVzdEdlb0ZpZWxkTGFiZWwnLCB7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdEZXN0aW5hdGlvbicKICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLl9kZXNjcmlwdG9yLmRlc3RHZW9GaWVsZAogICAgICAgICAgICAgICAgfV0pOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzLCBbWzEsIDhdXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldEltbXV0YWJsZVByb3BlcnRpZXMoKSB7CiAgICAgICAgcmV0dXJuIF9nZXRJbW11dGFibGVQcm9wZXJ0aWVzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRJbW11dGFibGVQcm9wZXJ0aWVzOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiY3JlYXRlRGVmYXVsdExheWVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVEZWZhdWx0TGF5ZXIob3B0aW9ucykgewogICAgICB2YXIgX1ZlY3RvclN0eWxlJGNyZWF0ZURlOwoKICAgICAgdmFyIGRlZmF1bHREeW5hbWljUHJvcGVydGllcyA9ICgwLCBfdmVjdG9yX3N0eWxlX2RlZmF1bHRzLmdldERlZmF1bHREeW5hbWljUHJvcGVydGllcykoKTsKCiAgICAgIHZhciBzdHlsZURlc2NyaXB0b3IgPSBfdmVjdG9yX3N0eWxlLlZlY3RvclN0eWxlLmNyZWF0ZURlc2NyaXB0b3IoKF9WZWN0b3JTdHlsZSRjcmVhdGVEZSA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX1ZlY3RvclN0eWxlJGNyZWF0ZURlLCBfY29uc3RhbnRzLlZFQ1RPUl9TVFlMRVMuTElORV9DT0xPUiwgewogICAgICAgIHR5cGU6IF9keW5hbWljX3N0eWxlX3Byb3BlcnR5LkR5bmFtaWNTdHlsZVByb3BlcnR5LnR5cGUsCiAgICAgICAgb3B0aW9uczogX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdER5bmFtaWNQcm9wZXJ0aWVzW19jb25zdGFudHMuVkVDVE9SX1NUWUxFUy5MSU5FX0NPTE9SXS5vcHRpb25zLCB7CiAgICAgICAgICBmaWVsZDogewogICAgICAgICAgICBuYW1lOiBfY29uc3RhbnRzLkNPVU5UX1BST1BfTkFNRSwKICAgICAgICAgICAgb3JpZ2luOiBfY29uc3RhbnRzLkZJRUxEX09SSUdJTi5TT1VSQ0UKICAgICAgICAgIH0sCiAgICAgICAgICBjb2xvcjogX2NvbG9yX3V0aWxzLkNPTE9SX0dSQURJRU5UU1swXS52YWx1ZQogICAgICAgIH0pCiAgICAgIH0pLCBfZGVmaW5lUHJvcGVydHkoX1ZlY3RvclN0eWxlJGNyZWF0ZURlLCBfY29uc3RhbnRzLlZFQ1RPUl9TVFlMRVMuTElORV9XSURUSCwgewogICAgICAgIHR5cGU6IF9keW5hbWljX3N0eWxlX3Byb3BlcnR5LkR5bmFtaWNTdHlsZVByb3BlcnR5LnR5cGUsCiAgICAgICAgb3B0aW9uczogX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdER5bmFtaWNQcm9wZXJ0aWVzW19jb25zdGFudHMuVkVDVE9SX1NUWUxFUy5MSU5FX1dJRFRIXS5vcHRpb25zLCB7CiAgICAgICAgICBmaWVsZDogewogICAgICAgICAgICBuYW1lOiBfY29uc3RhbnRzLkNPVU5UX1BST1BfTkFNRSwKICAgICAgICAgICAgb3JpZ2luOiBfY29uc3RhbnRzLkZJRUxEX09SSUdJTi5TT1VSQ0UKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9KSwgX1ZlY3RvclN0eWxlJGNyZWF0ZURlKSk7CgogICAgICByZXR1cm4gbmV3IF92ZWN0b3JfbGF5ZXIuVmVjdG9yTGF5ZXIoewogICAgICAgIGxheWVyRGVzY3JpcHRvcjogX3ZlY3Rvcl9sYXllci5WZWN0b3JMYXllci5jcmVhdGVEZXNjcmlwdG9yKF9vYmplY3RTcHJlYWQoe30sIG9wdGlvbnMsIHsKICAgICAgICAgIHNvdXJjZURlc2NyaXB0b3I6IHRoaXMuX2Rlc2NyaXB0b3IsCiAgICAgICAgICBzdHlsZTogc3R5bGVEZXNjcmlwdG9yCiAgICAgICAgfSkpLAogICAgICAgIHNvdXJjZTogdGhpcywKICAgICAgICBzdHlsZTogbmV3IF92ZWN0b3Jfc3R5bGUuVmVjdG9yU3R5bGUoc3R5bGVEZXNjcmlwdG9yLCB0aGlzKQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRHZW9HcmlkUHJlY2lzaW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRHZW9HcmlkUHJlY2lzaW9uKHpvb20pIHsKICAgICAgdmFyIHRhcmdldEdlb3RpbGVMZXZlbCA9IE1hdGguY2VpbCh6b29tKSArIDI7CiAgICAgIHJldHVybiBNYXRoLm1pbih0YXJnZXRHZW90aWxlTGV2ZWwsIE1BWF9HRU9USUxFX0xFVkVMKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRHZW9Kc29uV2l0aE1ldGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRHZW9Kc29uV2l0aE1ldGEgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhsYXllck5hbWUsIHNlYXJjaEZpbHRlcnMsIHJlZ2lzdGVyQ2FuY2VsQ2FsbGJhY2spIHsKICAgICAgICB2YXIgaW5kZXhQYXR0ZXJuLCBzZWFyY2hTb3VyY2UsIGVzUmVzcG9uc2UsIF9jb252ZXJ0VG9MaW5lcywgZmVhdHVyZUNvbGxlY3Rpb247CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRJbmRleFBhdHRlcm4oKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgaW5kZXhQYXR0ZXJuID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tYWtlU2VhcmNoU291cmNlKHNlYXJjaEZpbHRlcnMsIDApOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBzZWFyY2hTb3VyY2UgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIHNlYXJjaFNvdXJjZS5zZXRGaWVsZCgnYWdncycsIHsKICAgICAgICAgICAgICAgICAgZGVzdFNwbGl0OiB7CiAgICAgICAgICAgICAgICAgICAgdGVybXM6IHsKICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdDogewogICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICJkb2NbJyIuY29uY2F0KHRoaXMuX2Rlc2NyaXB0b3IuZGVzdEdlb0ZpZWxkLCAiJ10udmFsdWUudG9TdHJpbmcoKSIpLAogICAgICAgICAgICAgICAgICAgICAgICBsYW5nOiAncGFpbmxlc3MnCiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvdW50OiAnZGVzYycKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICBzaXplOiAxMDAKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGFnZ3M6IHsKICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZUdyaWQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgZ2VvdGlsZV9ncmlkOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHRoaXMuX2Rlc2NyaXB0b3Iuc291cmNlR2VvRmllbGQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBzZWFyY2hGaWx0ZXJzLmdlb2dyaWRQcmVjaXNpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogNTAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGFnZ3M6IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZUNlbnRyb2lkOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9fY2VudHJvaWQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHRoaXMuX2Rlc2NyaXB0b3Iuc291cmNlR2VvRmllbGQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuZ2V0VmFsdWVBZ2dzRHNsKGluZGV4UGF0dGVybikpCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9ydW5Fc1F1ZXJ5KHsKICAgICAgICAgICAgICAgICAgcmVxdWVzdElkOiB0aGlzLmdldElkKCksCiAgICAgICAgICAgICAgICAgIHJlcXVlc3ROYW1lOiBsYXllck5hbWUsCiAgICAgICAgICAgICAgICAgIHNlYXJjaFNvdXJjZTogc2VhcmNoU291cmNlLAogICAgICAgICAgICAgICAgICByZWdpc3RlckNhbmNlbENhbGxiYWNrOiByZWdpc3RlckNhbmNlbENhbGxiYWNrLAogICAgICAgICAgICAgICAgICByZXF1ZXN0RGVzY3JpcHRpb246IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tYXBzLnNvdXJjZS5wZXdQZXcuaW5zcGVjdG9yRGVzY3JpcHRpb24nLCB7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTb3VyY2UtZGVzdGluYXRpb24gY29ubmVjdGlvbnMgcmVxdWVzdCcKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBlc1Jlc3BvbnNlID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udmVydFRvTGluZXMgPSAoMCwgX2NvbnZlcnRfdG9fbGluZXMuY29udmVydFRvTGluZXMpKGVzUmVzcG9uc2UpLCBmZWF0dXJlQ29sbGVjdGlvbiA9IF9jb252ZXJ0VG9MaW5lcy5mZWF0dXJlQ29sbGVjdGlvbjsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICAgIGRhdGE6IGZlYXR1cmVDb2xsZWN0aW9uLAogICAgICAgICAgICAgICAgICBtZXRhOiB7CiAgICAgICAgICAgICAgICAgICAgYXJlUmVzdWx0c1RyaW1tZWQ6IGZhbHNlCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0R2VvSnNvbldpdGhNZXRhKF94LCBfeDIsIF94MykgewogICAgICAgIHJldHVybiBfZ2V0R2VvSnNvbldpdGhNZXRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRHZW9Kc29uV2l0aE1ldGE7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJfZ2V0R2VvRmllbGQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRHZW9GaWVsZDIgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgaW5kZXhQYXR0ZXJuLCBmaWVsZCwgZ2VvRmllbGQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEluZGV4UGF0dGVybigpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBpbmRleFBhdHRlcm4gPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIGZpZWxkID0gaW5kZXhQYXR0ZXJuLmZpZWxkcy5nZXRCeU5hbWUodGhpcy5fZGVzY3JpcHRvci5kZXN0R2VvRmllbGQpOwogICAgICAgICAgICAgICAgZ2VvRmllbGQgPSBfcHVibGljLmluZGV4UGF0dGVybnMuaXNOZXN0ZWRGaWVsZChmaWVsZCkgPyB1bmRlZmluZWQgOiBmaWVsZDsKCiAgICAgICAgICAgICAgICBpZiAoZ2VvRmllbGQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1hcHMuc291cmNlLmVzU291cmNlLm5vR2VvRmllbGRFcnJvck1lc3NhZ2UnLCB7CiAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiSW5kZXggcGF0dGVybiB7aW5kZXhQYXR0ZXJuVGl0bGV9IG5vIGxvbmdlciBjb250YWlucyB0aGUgZ2VvIGZpZWxkIHtnZW9GaWVsZH0iLAogICAgICAgICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICAgICAgICBpbmRleFBhdHRlcm5UaXRsZTogaW5kZXhQYXR0ZXJuLnRpdGxlLAogICAgICAgICAgICAgICAgICAgIGdlb0ZpZWxkOiB0aGlzLl9kZXNjcmlwdG9yLmdlb0ZpZWxkCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIGdlb0ZpZWxkKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gX2dldEdlb0ZpZWxkKCkgewogICAgICAgIHJldHVybiBfZ2V0R2VvRmllbGQyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBfZ2V0R2VvRmllbGQ7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJjYW5Gb3JtYXRGZWF0dXJlUHJvcGVydGllcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2FuRm9ybWF0RmVhdHVyZVByb3BlcnRpZXMoKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogImZpbHRlckFuZEZvcm1hdFByb3BlcnRpZXNUb0h0bWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9maWx0ZXJBbmRGb3JtYXRQcm9wZXJ0aWVzVG9IdG1sID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUocHJvcGVydGllcykgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJBbmRGb3JtYXRQcm9wZXJ0aWVzVG9IdG1sRm9yTWV0cmljRmllbGRzKHByb3BlcnRpZXMpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ1LnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBmaWx0ZXJBbmRGb3JtYXRQcm9wZXJ0aWVzVG9IdG1sKF94NCkgewogICAgICAgIHJldHVybiBfZmlsdGVyQW5kRm9ybWF0UHJvcGVydGllc1RvSHRtbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZmlsdGVyQW5kRm9ybWF0UHJvcGVydGllc1RvSHRtbDsKICAgIH0oKQogIH1dLCBbewogICAga2V5OiAiY3JlYXRlRGVzY3JpcHRvciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRGVzY3JpcHRvcihfcmVmMikgewogICAgICB2YXIgaW5kZXhQYXR0ZXJuSWQgPSBfcmVmMi5pbmRleFBhdHRlcm5JZCwKICAgICAgICAgIHNvdXJjZUdlb0ZpZWxkID0gX3JlZjIuc291cmNlR2VvRmllbGQsCiAgICAgICAgICBkZXN0R2VvRmllbGQgPSBfcmVmMi5kZXN0R2VvRmllbGQ7CiAgICAgIHJldHVybiB7CiAgICAgICAgdHlwZTogRVNQZXdQZXdTb3VyY2UudHlwZSwKICAgICAgICBpZDogKDAsIF92LmRlZmF1bHQpKCksCiAgICAgICAgaW5kZXhQYXR0ZXJuSWQ6IGluZGV4UGF0dGVybklkLAogICAgICAgIHNvdXJjZUdlb0ZpZWxkOiBzb3VyY2VHZW9GaWVsZCwKICAgICAgICBkZXN0R2VvRmllbGQ6IGRlc3RHZW9GaWVsZAogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlckVkaXRvciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyRWRpdG9yKF9yZWYzKSB7CiAgICAgIHZhciBvblByZXZpZXdTb3VyY2UgPSBfcmVmMy5vblByZXZpZXdTb3VyY2UsCiAgICAgICAgICBpbnNwZWN0b3JBZGFwdGVycyA9IF9yZWYzLmluc3BlY3RvckFkYXB0ZXJzOwoKICAgICAgdmFyIG9uU291cmNlQ29uZmlnQ2hhbmdlID0gZnVuY3Rpb24gb25Tb3VyY2VDb25maWdDaGFuZ2Uoc291cmNlQ29uZmlnKSB7CiAgICAgICAgaWYgKCFzb3VyY2VDb25maWcpIHsKICAgICAgICAgIG9uUHJldmlld1NvdXJjZShudWxsKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBzb3VyY2VEZXNjcmlwdG9yID0gRVNQZXdQZXdTb3VyY2UuY3JlYXRlRGVzY3JpcHRvcihzb3VyY2VDb25maWcpOwogICAgICAgIHZhciBzb3VyY2UgPSBuZXcgRVNQZXdQZXdTb3VyY2Uoc291cmNlRGVzY3JpcHRvciwgaW5zcGVjdG9yQWRhcHRlcnMpOwogICAgICAgIG9uUHJldmlld1NvdXJjZShzb3VyY2UpOwogICAgICB9OwoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2NyZWF0ZV9zb3VyY2VfZWRpdG9yLkNyZWF0ZVNvdXJjZUVkaXRvciwgewogICAgICAgIG9uU291cmNlQ29uZmlnQ2hhbmdlOiBvblNvdXJjZUNvbmZpZ0NoYW5nZQogICAgICB9KTsKICAgIH0KICB9XSk7CgogIHJldHVybiBFU1Bld1Bld1NvdXJjZTsKfShfZXNfYWdnX3NvdXJjZS5BYnN0cmFjdEVTQWdnU291cmNlKTsKCmV4cG9ydHMuRVNQZXdQZXdTb3VyY2UgPSBFU1Bld1Bld1NvdXJjZTsKCl9kZWZpbmVQcm9wZXJ0eShFU1Bld1Bld1NvdXJjZSwgInR5cGUiLCBfY29uc3RhbnRzLkVTX1BFV19QRVcpOwoKX2RlZmluZVByb3BlcnR5KEVTUGV3UGV3U291cmNlLCAidGl0bGUiLCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWFwcy5zb3VyY2UucGV3UGV3VGl0bGUnLCB7CiAgZGVmYXVsdE1lc3NhZ2U6ICdQb2ludCB0byBwb2ludCcKfSkpOwoKX2RlZmluZVByb3BlcnR5KEVTUGV3UGV3U291cmNlLCAiZGVzY3JpcHRpb24iLCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWFwcy5zb3VyY2UucGV3UGV3RGVzY3JpcHRpb24nLCB7CiAgZGVmYXVsdE1lc3NhZ2U6ICdBZ2dyZWdhdGVkIGRhdGEgcGF0aHMgYmV0d2VlbiB0aGUgc291cmNlIGFuZCBkZXN0aW5hdGlvbicKfSkpOw=="},null]}