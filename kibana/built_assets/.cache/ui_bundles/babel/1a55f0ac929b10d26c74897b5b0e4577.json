{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/plugins/es_ui_shared/static/forms/hook_form_lib/hooks/use_form.js","dependencies":[{"path":"src/plugins/es_ui_shared/static/forms/hook_form_lib/hooks/use_form.js","mtime":1589249550807},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7IH0gfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIHNlbGYgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7IGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7IH0gZnVuY3Rpb24gX3Rocm93KGVycikgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7IH0gX25leHQodW5kZWZpbmVkKTsgfSk7IH07IH0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOyB9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfQoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnVzZUZvcm0gPSB1c2VGb3JtOwoKdmFyIF9yZWFjdCA9IHJlcXVpcmUoInJlYWN0Iik7Cgp2YXIgX2xvZGFzaCA9IHJlcXVpcmUoImxvZGFzaCIpOwoKdmFyIF9saWIgPSByZXF1aXJlKCIuLi9saWIiKTsKLyoKICogTGljZW5zZWQgdG8gRWxhc3RpY3NlYXJjaCBCLlYuIHVuZGVyIG9uZSBvciBtb3JlIGNvbnRyaWJ1dG9yCiAqIGxpY2Vuc2UgYWdyZWVtZW50cy4gU2VlIHRoZSBOT1RJQ0UgZmlsZSBkaXN0cmlidXRlZCB3aXRoCiAqIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdhcmRpbmcgY29weXJpZ2h0CiAqIG93bmVyc2hpcC4gRWxhc3RpY3NlYXJjaCBCLlYuIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byB5b3UgdW5kZXIKICogdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7IHlvdSBtYXkKICogbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICovCgoKdmFyIERFRkFVTFRfRVJST1JfRElTUExBWV9USU1FT1VUID0gNTAwOwp2YXIgREVGQVVMVF9PUFRJT05TID0gewogIGVycm9yRGlzcGxheURlbGF5OiBERUZBVUxUX0VSUk9SX0RJU1BMQVlfVElNRU9VVCwKICBzdHJpcEVtcHR5RmllbGRzOiB0cnVlCn07CgpmdW5jdGlvbiB1c2VGb3JtKCkgewogIHZhciBmb3JtQ29uZmlnID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICB2YXIgb25TdWJtaXQgPSBmb3JtQ29uZmlnLm9uU3VibWl0LAogICAgICBzY2hlbWEgPSBmb3JtQ29uZmlnLnNjaGVtYSwKICAgICAgX2Zvcm1Db25maWckc2VyaWFsaXplID0gZm9ybUNvbmZpZy5zZXJpYWxpemVyLAogICAgICBzZXJpYWxpemVyID0gX2Zvcm1Db25maWckc2VyaWFsaXplID09PSB2b2lkIDAgPyBmdW5jdGlvbiAoZGF0YSkgewogICAgcmV0dXJuIGRhdGE7CiAgfSA6IF9mb3JtQ29uZmlnJHNlcmlhbGl6ZSwKICAgICAgX2Zvcm1Db25maWckZGVzZXJpYWxpID0gZm9ybUNvbmZpZy5kZXNlcmlhbGl6ZXIsCiAgICAgIGRlc2VyaWFsaXplciA9IF9mb3JtQ29uZmlnJGRlc2VyaWFsaSA9PT0gdm9pZCAwID8gZnVuY3Rpb24gKGRhdGEpIHsKICAgIHJldHVybiBkYXRhOwogIH0gOiBfZm9ybUNvbmZpZyRkZXNlcmlhbGksCiAgICAgIF9mb3JtQ29uZmlnJG9wdGlvbnMgPSBmb3JtQ29uZmlnLm9wdGlvbnMsCiAgICAgIG9wdGlvbnMgPSBfZm9ybUNvbmZpZyRvcHRpb25zID09PSB2b2lkIDAgPyB7fSA6IF9mb3JtQ29uZmlnJG9wdGlvbnM7CiAgdmFyIGZvcm1EZWZhdWx0VmFsdWUgPSBmb3JtQ29uZmlnLmRlZmF1bHRWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8IE9iamVjdC5rZXlzKGZvcm1Db25maWcuZGVmYXVsdFZhbHVlKS5sZW5ndGggPT09IDAgPyB7fSA6IE9iamVjdC5lbnRyaWVzKGZvcm1Db25maWcuZGVmYXVsdFZhbHVlKS5maWx0ZXIoZnVuY3Rpb24gKF9yZWYpIHsKICAgIHZhciB2YWx1ZSA9IF9yZWZbMV07CiAgICByZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZDsKICB9KS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgX3JlZjIpIHsKICAgIHZhciBfcmVmMyA9IF9zbGljZWRUb0FycmF5KF9yZWYyLCAyKSwKICAgICAgICBrZXkgPSBfcmVmM1swXSwKICAgICAgICB2YWx1ZSA9IF9yZWYzWzFdOwoKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBhY2MsIF9kZWZpbmVQcm9wZXJ0eSh7fSwga2V5LCB2YWx1ZSkpOwogIH0sIHt9KTsKCiAgdmFyIGZvcm1PcHRpb25zID0gX29iamVjdFNwcmVhZCh7fSwgREVGQVVMVF9PUFRJT05TLCB7fSwgb3B0aW9ucyk7CgogIHZhciBkZWZhdWx0VmFsdWVEZXNlcmlhbGl6ZWQgPSAoMCwgX3JlYWN0LnVzZU1lbW8pKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBkZXNlcmlhbGl6ZXIoZm9ybURlZmF1bHRWYWx1ZSk7CiAgfSwgW2Zvcm1Db25maWcuZGVmYXVsdFZhbHVlXSk7CgogIHZhciBfcmVmNCA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGZhbHNlKSwKICAgICAgX3JlZjUgPSBfc2xpY2VkVG9BcnJheShfcmVmNCwgMiksCiAgICAgIGlzU3VibWl0dGVkID0gX3JlZjVbMF0sCiAgICAgIHNldElzU3VibWl0dGVkID0gX3JlZjVbMV07CgogIHZhciBfcmVmNiA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGZhbHNlKSwKICAgICAgX3JlZjcgPSBfc2xpY2VkVG9BcnJheShfcmVmNiwgMiksCiAgICAgIGlzU3VibWl0dGluZyA9IF9yZWY3WzBdLAogICAgICBzZXRTdWJtaXR0aW5nID0gX3JlZjdbMV07CgogIHZhciBfcmVmOCA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKHVuZGVmaW5lZCksCiAgICAgIF9yZWY5ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjgsIDIpLAogICAgICBpc1ZhbGlkID0gX3JlZjlbMF0sCiAgICAgIHNldElzVmFsaWQgPSBfcmVmOVsxXTsKCiAgdmFyIGZpZWxkc1JlZnMgPSAoMCwgX3JlYWN0LnVzZVJlZikoe30pOwogIHZhciBmb3JtVXBkYXRlU3Vic2NyaWJlcnMgPSAoMCwgX3JlYWN0LnVzZVJlZikoW10pOwogIHZhciBpc1VubW91bnRlZCA9ICgwLCBfcmVhY3QudXNlUmVmKShmYWxzZSk7IC8vIGZvcm1EYXRhJCBpcyBhbiBvYnNlcnZhYmxlIHdlIGNhbiBzdWJzY3JpYmUgdG8gaW4gb3JkZXIgdG8gcmVjZWl2ZSBsaXZlCiAgLy8gdXBkYXRlIG9mIHRoZSByYXcgZm9ybSBkYXRhLiBBcyBhbiBvYnNlcnZhYmxlIGl0IGRvZXMgbm90IHRyaWdnZXIgYW55IFJlYWN0CiAgLy8gcmVuZGVyKCkuCiAgLy8gVGhlIDxGb3JtRGF0YVByb3ZpZGVyPiBjb21wb25lbnQgaXMgdGhlIG9uZSBpbiBjaGFyZ2Ugb2YgcmVhZGluZyB0aGlzIG9ic2VydmFibGUKICAvLyBhbmQgdXBkYXRpbmcgaXRzIHN0YXRlIHRvIHRyaWdnZXIgdGhlIG5lY2Vzc2FyeSB2aWV3IHJlbmRlci4KCiAgdmFyIGZvcm1EYXRhJCA9ICgwLCBfcmVhY3QudXNlUmVmKShuZXcgX2xpYi5TdWJqZWN0KCgwLCBfbGliLmZsYXR0ZW5PYmplY3QpKGZvcm1EZWZhdWx0VmFsdWUpKSk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIGZvcm1VcGRhdGVTdWJzY3JpYmVycy5jdXJyZW50LmZvckVhY2goZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikgewogICAgICAgIHJldHVybiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTsKICAgICAgfSk7CiAgICAgIGZvcm1VcGRhdGVTdWJzY3JpYmVycy5jdXJyZW50ID0gW107CiAgICAgIGlzVW5tb3VudGVkLmN1cnJlbnQgPSB0cnVlOwogICAgfTsKICB9LCBbXSk7IC8vIC0tIEhFTFBFUlMKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIHZhciBmaWVsZHNUb0FycmF5ID0gZnVuY3Rpb24gZmllbGRzVG9BcnJheSgpIHsKICAgIHJldHVybiBPYmplY3QudmFsdWVzKGZpZWxkc1JlZnMuY3VycmVudCk7CiAgfTsKCiAgdmFyIHN0cmlwRW1wdHlGaWVsZHMgPSBmdW5jdGlvbiBzdHJpcEVtcHR5RmllbGRzKGZpZWxkcykgewogICAgaWYgKGZvcm1PcHRpb25zLnN0cmlwRW1wdHlGaWVsZHMpIHsKICAgICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGZpZWxkcykucmVkdWNlKGZ1bmN0aW9uIChhY2MsIF9yZWYxMCkgewogICAgICAgIHZhciBfcmVmMTEgPSBfc2xpY2VkVG9BcnJheShfcmVmMTAsIDIpLAogICAgICAgICAgICBrZXkgPSBfcmVmMTFbMF0sCiAgICAgICAgICAgIGZpZWxkID0gX3JlZjExWzFdOwoKICAgICAgICBpZiAodHlwZW9mIGZpZWxkLnZhbHVlICE9PSAnc3RyaW5nJyB8fCBmaWVsZC52YWx1ZS50cmltKCkgIT09ICcnKSB7CiAgICAgICAgICBhY2Nba2V5XSA9IGZpZWxkOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGFjYzsKICAgICAgfSwge30pOwogICAgfQoKICAgIHJldHVybiBmaWVsZHM7CiAgfTsKCiAgdmFyIHVwZGF0ZUZvcm1EYXRhQXQgPSBmdW5jdGlvbiB1cGRhdGVGb3JtRGF0YUF0KHBhdGgsIHZhbHVlKSB7CiAgICB2YXIgY3VycmVudEZvcm1EYXRhID0gZm9ybURhdGEkLmN1cnJlbnQudmFsdWU7CiAgICBmb3JtRGF0YSQuY3VycmVudC5uZXh0KF9vYmplY3RTcHJlYWQoe30sIGN1cnJlbnRGb3JtRGF0YSwgX2RlZmluZVByb3BlcnR5KHt9LCBwYXRoLCB2YWx1ZSkpKTsKICAgIHJldHVybiBmb3JtRGF0YSQuY3VycmVudC52YWx1ZTsKICB9OyAvLyAtLSBBUEkKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKICB2YXIgZ2V0Rm9ybURhdGEgPSBmdW5jdGlvbiBnZXRGb3JtRGF0YSgpIHsKICAgIHZhciBnZXREYXRhT3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogewogICAgICB1bmZsYXR0ZW46IHRydWUKICAgIH07CiAgICByZXR1cm4gZ2V0RGF0YU9wdGlvbnMudW5mbGF0dGVuID8gKDAsIF9saWIudW5mbGF0dGVuT2JqZWN0KSgoMCwgX2xpYi5tYXBGb3JtRmllbGRzKShzdHJpcEVtcHR5RmllbGRzKGZpZWxkc1JlZnMuY3VycmVudCksIGZ1bmN0aW9uIChmaWVsZCkgewogICAgICByZXR1cm4gZmllbGQuX19zZXJpYWxpemVPdXRwdXQoKTsKICAgIH0pKSA6IE9iamVjdC5lbnRyaWVzKGZpZWxkc1JlZnMuY3VycmVudCkucmVkdWNlKGZ1bmN0aW9uIChhY2MsIF9yZWYxMikgewogICAgICB2YXIgX3JlZjEzID0gX3NsaWNlZFRvQXJyYXkoX3JlZjEyLCAyKSwKICAgICAgICAgIGtleSA9IF9yZWYxM1swXSwKICAgICAgICAgIGZpZWxkID0gX3JlZjEzWzFdOwoKICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIGFjYywgX2RlZmluZVByb3BlcnR5KHt9LCBrZXksIGZpZWxkLl9fc2VyaWFsaXplT3V0cHV0KCkpKTsKICAgIH0sIHt9KTsKICB9OwoKICB2YXIgZ2V0RXJyb3JzID0gZnVuY3Rpb24gZ2V0RXJyb3JzKCkgewogICAgaWYgKGlzVmFsaWQgPT09IHRydWUpIHsKICAgICAgcmV0dXJuIFtdOwogICAgfQoKICAgIHJldHVybiBmaWVsZHNUb0FycmF5KCkucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGZpZWxkKSB7CiAgICAgIHZhciBmaWVsZEVycm9yID0gZmllbGQuZ2V0RXJyb3JzTWVzc2FnZXMoKTsKCiAgICAgIGlmIChmaWVsZEVycm9yID09PSBudWxsKSB7CiAgICAgICAgcmV0dXJuIGFjYzsKICAgICAgfQoKICAgICAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoYWNjKSwgW2ZpZWxkRXJyb3JdKTsKICAgIH0sIFtdKTsKICB9OwoKICB2YXIgaXNGaWVsZFZhbGlkID0gZnVuY3Rpb24gaXNGaWVsZFZhbGlkKGZpZWxkKSB7CiAgICByZXR1cm4gZmllbGQuaXNWYWxpZCAmJiAhZmllbGQuaXNWYWxpZGF0aW5nOwogIH07CgogIHZhciB1cGRhdGVGb3JtVmFsaWRpdHkgPSBmdW5jdGlvbiB1cGRhdGVGb3JtVmFsaWRpdHkoKSB7CiAgICB2YXIgZmllbGRzQXJyYXkgPSBmaWVsZHNUb0FycmF5KCk7CiAgICB2YXIgYXJlQWxsRmllbGRzVmFsaWRhdGVkID0gZmllbGRzQXJyYXkuZXZlcnkoZnVuY3Rpb24gKGZpZWxkKSB7CiAgICAgIHJldHVybiBmaWVsZC5pc1ZhbGlkYXRlZDsKICAgIH0pOwoKICAgIGlmICghYXJlQWxsRmllbGRzVmFsaWRhdGVkKSB7CiAgICAgIC8vIElmICpub3QqIGFsbCB0aGUgZmllbHMgaGF2ZSBiZWVuIHZhbGlkYXRlZCwgdGhlIHZhbGlkaXR5IG9mIHRoZSBmb3JtIGlzIHVua25vd24sIHRodXMgc3RpbGwgInVuZGVmaW5lZCIKICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH0KCiAgICB2YXIgaXNGb3JtVmFsaWQgPSBmaWVsZHNBcnJheS5ldmVyeShpc0ZpZWxkVmFsaWQpOwogICAgc2V0SXNWYWxpZChpc0Zvcm1WYWxpZCk7CiAgICByZXR1cm4gaXNGb3JtVmFsaWQ7CiAgfTsKCiAgdmFyIHZhbGlkYXRlRmllbGRzID0KICAvKiNfX1BVUkVfXyovCiAgZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYxNCA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShmaWVsZE5hbWVzKSB7CiAgICAgIHZhciBmaWVsZHNUb1ZhbGlkYXRlLCBmb3JtRGF0YSwgaXNGb3JtVmFsaWQsIGFyZUZpZWxkc1ZhbGlkOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgZmllbGRzVG9WYWxpZGF0ZSA9IGZpZWxkTmFtZXMubWFwKGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmllbGRzUmVmcy5jdXJyZW50W25hbWVdOwogICAgICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoZmllbGQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmaWVsZCAhPT0gdW5kZWZpbmVkOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBpZiAoIShmaWVsZHNUb1ZhbGlkYXRlLmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICBhcmVGaWVsZHNWYWxpZDogdHJ1ZSwKICAgICAgICAgICAgICAgIGlzRm9ybVZhbGlkOiB0cnVlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgZm9ybURhdGEgPSBnZXRGb3JtRGF0YSh7CiAgICAgICAgICAgICAgICB1bmZsYXR0ZW46IGZhbHNlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGZpZWxkc1RvVmFsaWRhdGUubWFwKGZ1bmN0aW9uIChmaWVsZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkLnZhbGlkYXRlKHsKICAgICAgICAgICAgICAgICAgZm9ybURhdGE6IGZvcm1EYXRhCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgaXNGb3JtVmFsaWQgPSB1cGRhdGVGb3JtVmFsaWRpdHkoKTsKICAgICAgICAgICAgICBhcmVGaWVsZHNWYWxpZCA9IGZpZWxkc1RvVmFsaWRhdGUuZXZlcnkoaXNGaWVsZFZhbGlkKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICBhcmVGaWVsZHNWYWxpZDogYXJlRmllbGRzVmFsaWQsCiAgICAgICAgICAgICAgICBpc0Zvcm1WYWxpZDogaXNGb3JtVmFsaWQKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIHZhbGlkYXRlRmllbGRzKF94KSB7CiAgICAgIHJldHVybiBfcmVmMTQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOwoKICB2YXIgdmFsaWRhdGVBbGxGaWVsZHMgPQogIC8qI19fUFVSRV9fKi8KICBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZjE1ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIGZpZWxkc0FycmF5LCBmaWVsZHNUb1ZhbGlkYXRlLCBpc0Zvcm1WYWxpZCwgX3JlZjE2OwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBmaWVsZHNBcnJheSA9IGZpZWxkc1RvQXJyYXkoKTsKICAgICAgICAgICAgICBmaWVsZHNUb1ZhbGlkYXRlID0gZmllbGRzQXJyYXkuZmlsdGVyKGZ1bmN0aW9uIChmaWVsZCkgewogICAgICAgICAgICAgICAgcmV0dXJuICFmaWVsZC5pc1ZhbGlkYXRlZDsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBpc0Zvcm1WYWxpZCA9IGlzVmFsaWQ7CgogICAgICAgICAgICAgIGlmICghKGZpZWxkc1RvVmFsaWRhdGUubGVuZ3RoID09PSAwKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoaXNGb3JtVmFsaWQgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgLy8gV2Ugc2hvdWxkIG5ldmVyIGVudGVyIHRoaXMgY29uZGl0aW9uIGFzIHRoZSBmb3JtIHZhbGlkaXR5IGlzIHVwZGF0ZWQgZWFjaCB0aW1lCiAgICAgICAgICAgICAgICAvLyBhIGZpZWxkIGlzIHZhbGlkYXRlZC4gQnV0IHNvbWV0aW1lcywgZHVyaW5nIHRlc3RzIGl0IGRvZXMgbm90IGhhcHBlbiBhbmQgd2UgbmVlZAogICAgICAgICAgICAgICAgLy8gdG8gd2FpdCB0aGUgbmV4dCB0aWNrIChob29rcyBsaWZlY3ljbGUgYmVpbmcgdHJpY2t5KSB0byBtYWtlIHN1cmUgdGhlICJpc1ZhbGlkIiBzdGF0ZSBpcyB1cGRhdGVkLgogICAgICAgICAgICAgICAgLy8gSW4gb3JkZXIgdG8gYXZvaWQgdGhpcyB1bmludGVudGlvbmFsIGJlaGF2aW91ciwgd2UgYWRkIHRoaXMgaWYgY29uZGl0aW9uIGhlcmUuCiAgICAgICAgICAgICAgICBpc0Zvcm1WYWxpZCA9IGZpZWxkc0FycmF5LmV2ZXJ5KGlzRmllbGRWYWxpZCk7CiAgICAgICAgICAgICAgICBzZXRJc1ZhbGlkKGlzRm9ybVZhbGlkKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBpc0Zvcm1WYWxpZCk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4OwogICAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZUZpZWxkcyhmaWVsZHNUb1ZhbGlkYXRlLm1hcChmdW5jdGlvbiAoZmllbGQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmaWVsZC5wYXRoOwogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBfcmVmMTYgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBpc0Zvcm1WYWxpZCA9IF9yZWYxNi5pc0Zvcm1WYWxpZDsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgaXNGb3JtVmFsaWQpOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gdmFsaWRhdGVBbGxGaWVsZHMoKSB7CiAgICAgIHJldHVybiBfcmVmMTUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOwoKICB2YXIgYWRkRmllbGQgPSBmdW5jdGlvbiBhZGRGaWVsZChmaWVsZCkgewogICAgZmllbGRzUmVmcy5jdXJyZW50W2ZpZWxkLnBhdGhdID0gZmllbGQ7CgogICAgaWYgKCF7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGZvcm1EYXRhJC5jdXJyZW50LnZhbHVlLCBmaWVsZC5wYXRoKSkgewogICAgICB2YXIgZmllbGRWYWx1ZSA9IGZpZWxkLl9fc2VyaWFsaXplT3V0cHV0KCk7CgogICAgICB1cGRhdGVGb3JtRGF0YUF0KGZpZWxkLnBhdGgsIGZpZWxkVmFsdWUpOwogICAgfQogIH07CgogIHZhciByZW1vdmVGaWVsZCA9IGZ1bmN0aW9uIHJlbW92ZUZpZWxkKF9maWVsZE5hbWVzKSB7CiAgICB2YXIgZmllbGROYW1lcyA9IEFycmF5LmlzQXJyYXkoX2ZpZWxkTmFtZXMpID8gX2ZpZWxkTmFtZXMgOiBbX2ZpZWxkTmFtZXNdOwoKICAgIHZhciBjdXJyZW50Rm9ybURhdGEgPSBfb2JqZWN0U3ByZWFkKHt9LCBmb3JtRGF0YSQuY3VycmVudC52YWx1ZSk7CgogICAgZmllbGROYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgIGRlbGV0ZSBmaWVsZHNSZWZzLmN1cnJlbnRbbmFtZV07CiAgICAgIGRlbGV0ZSBjdXJyZW50Rm9ybURhdGFbbmFtZV07CiAgICB9KTsKICAgIGZvcm1EYXRhJC5jdXJyZW50Lm5leHQoY3VycmVudEZvcm1EYXRhKTsKICAgIC8qKgogICAgICogQWZ0ZXIgcmVtb3ZpbmcgYSBmaWVsZCwgdGhlIGZvcm0gdmFsaWRpdHkgbWlnaHQgaGF2ZSBjaGFuZ2VkCiAgICAgKiAoYW4gaW52YWxpZCBmaWVsZCBtaWdodCBoYXZlIGJlZW4gcmVtb3ZlZCBhbmQgbm93IHRoZSBmb3JtIGlzIHZhbGlkKQogICAgICovCgogICAgdXBkYXRlRm9ybVZhbGlkaXR5KCk7CiAgfTsKCiAgdmFyIHNldEZpZWxkVmFsdWUgPSBmdW5jdGlvbiBzZXRGaWVsZFZhbHVlKGZpZWxkTmFtZSwgdmFsdWUpIHsKICAgIGlmIChmaWVsZHNSZWZzLmN1cnJlbnRbZmllbGROYW1lXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBmaWVsZHNSZWZzLmN1cnJlbnRbZmllbGROYW1lXS5zZXRWYWx1ZSh2YWx1ZSk7CiAgfTsKCiAgdmFyIHNldEZpZWxkRXJyb3JzID0gZnVuY3Rpb24gc2V0RmllbGRFcnJvcnMoZmllbGROYW1lLCBlcnJvcnMpIHsKICAgIGlmIChmaWVsZHNSZWZzLmN1cnJlbnRbZmllbGROYW1lXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBmaWVsZHNSZWZzLmN1cnJlbnRbZmllbGROYW1lXS5zZXRFcnJvcnMoZXJyb3JzKTsKICB9OwoKICB2YXIgZ2V0RmllbGRzID0gZnVuY3Rpb24gZ2V0RmllbGRzKCkgewogICAgcmV0dXJuIGZpZWxkc1JlZnMuY3VycmVudDsKICB9OwoKICB2YXIgZ2V0RmllbGREZWZhdWx0VmFsdWUgPSBmdW5jdGlvbiBnZXRGaWVsZERlZmF1bHRWYWx1ZShmaWVsZE5hbWUpIHsKICAgIHJldHVybiAoMCwgX2xvZGFzaC5nZXQpKGRlZmF1bHRWYWx1ZURlc2VyaWFsaXplZCwgZmllbGROYW1lKTsKICB9OwoKICB2YXIgcmVhZEZpZWxkQ29uZmlnRnJvbVNjaGVtYSA9IGZ1bmN0aW9uIHJlYWRGaWVsZENvbmZpZ0Zyb21TY2hlbWEoZmllbGROYW1lKSB7CiAgICB2YXIgY29uZmlnID0gKDAsIF9sb2Rhc2guZ2V0KShzY2hlbWEgPyBzY2hlbWEgOiB7fSwgZmllbGROYW1lKSB8fCB7fTsKICAgIHJldHVybiBjb25maWc7CiAgfTsKCiAgdmFyIHN1Ym1pdEZvcm0gPQogIC8qI19fUFVSRV9fKi8KICBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZjE3ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhlKSB7CiAgICAgIHZhciBpc0Zvcm1WYWxpZCwgZm9ybURhdGE7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKGUpIHsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICghaXNTdWJtaXR0ZWQpIHsKICAgICAgICAgICAgICAgIHNldElzU3VibWl0dGVkKHRydWUpOyAvLyBVc2VyIGhhcyBhdHRlbXB0ZWQgdG8gc3VibWl0IHRoZSBmb3JtIGF0IGxlYXN0IG9uY2UKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHNldFN1Ym1pdHRpbmcodHJ1ZSk7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZUFsbEZpZWxkcygpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGlzRm9ybVZhbGlkID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgZm9ybURhdGEgPSBzZXJpYWxpemVyKGdldEZvcm1EYXRhKCkpOwoKICAgICAgICAgICAgICBpZiAoIW9uU3VibWl0KSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEwOwogICAgICAgICAgICAgIHJldHVybiBvblN1Ym1pdChmb3JtRGF0YSwgaXNGb3JtVmFsaWQpOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBzZXRTdWJtaXR0aW5nKGZhbHNlKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgZGF0YTogZm9ybURhdGEsCiAgICAgICAgICAgICAgICBpc1ZhbGlkOiBpc0Zvcm1WYWxpZAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gc3VibWl0Rm9ybShfeDIpIHsKICAgICAgcmV0dXJuIF9yZWYxNy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIHZhciBzdWJzY3JpYmUgPSBmdW5jdGlvbiBzdWJzY3JpYmUoaGFuZGxlcikgewogICAgdmFyIGZvcm1hdCA9IGZ1bmN0aW9uIGZvcm1hdCgpIHsKICAgICAgcmV0dXJuIHNlcmlhbGl6ZXIoZ2V0Rm9ybURhdGEoKSk7CiAgICB9OwoKICAgIHZhciBzdWJzY3JpcHRpb24gPSBmb3JtRGF0YSQuY3VycmVudC5zdWJzY3JpYmUoZnVuY3Rpb24gKHJhdykgewogICAgICBpZiAoIWlzVW5tb3VudGVkLmN1cnJlbnQpIHsKICAgICAgICBoYW5kbGVyKHsKICAgICAgICAgIGlzVmFsaWQ6IGlzVmFsaWQsCiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIHJhdzogcmF3LAogICAgICAgICAgICBmb3JtYXQ6IGZvcm1hdAogICAgICAgICAgfSwKICAgICAgICAgIHZhbGlkYXRlOiB2YWxpZGF0ZUFsbEZpZWxkcwogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICAgIGZvcm1VcGRhdGVTdWJzY3JpYmVycy5jdXJyZW50LnB1c2goc3Vic2NyaXB0aW9uKTsKICAgIHJldHVybiBzdWJzY3JpcHRpb247CiAgfTsKICAvKioKICAgKiBSZXNldCBhbGwgdGhlIGZpZWxkcyBvZiB0aGUgZm9ybSB0byB0aGVpciBkZWZhdWx0IHZhbHVlcwogICAqIGFuZCByZXNldCBhbGwgdGhlIHN0YXRlcyB0byB0aGVpciBvcmlnaW5hbCB2YWx1ZS4KICAgKi8KCgogIHZhciByZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgdmFyIHJlc2V0T3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogewogICAgICByZXNldFZhbHVlczogdHJ1ZQogICAgfTsKICAgIHZhciBfcmVzZXRPcHRpb25zJHJlc2V0VmEgPSByZXNldE9wdGlvbnMucmVzZXRWYWx1ZXMsCiAgICAgICAgcmVzZXRWYWx1ZXMgPSBfcmVzZXRPcHRpb25zJHJlc2V0VmEgPT09IHZvaWQgMCA/IHRydWUgOiBfcmVzZXRPcHRpb25zJHJlc2V0VmE7CgogICAgdmFyIGN1cnJlbnRGb3JtRGF0YSA9IF9vYmplY3RTcHJlYWQoe30sIGZvcm1EYXRhJC5jdXJyZW50LnZhbHVlKTsKCiAgICBPYmplY3QuZW50cmllcyhmaWVsZHNSZWZzLmN1cnJlbnQpLmZvckVhY2goZnVuY3Rpb24gKF9yZWYxOCkgewogICAgICB2YXIgX3JlZjE5ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjE4LCAyKSwKICAgICAgICAgIHBhdGggPSBfcmVmMTlbMF0sCiAgICAgICAgICBmaWVsZCA9IF9yZWYxOVsxXTsKCiAgICAgIC8vIEJ5IHJlc2V0dGluZyB0aGUgZm9ybSwgc29tZSBmaWVsZCBtaWdodCBiZSB1bm1vdW50ZWQuIEluIG9yZGVyCiAgICAgIC8vIHRvIGF2b2lkIGEgcmFjZSBjb25kaXRpb24sIHdlIGNoZWNrIHRoYXQgdGhlIGZpZWxkIHN0aWxsIGV4aXN0cy4KICAgICAgdmFyIGlzRmllbGRNb3VudGVkID0gZmllbGRzUmVmcy5jdXJyZW50W3BhdGhdICE9PSB1bmRlZmluZWQ7CgogICAgICBpZiAoaXNGaWVsZE1vdW50ZWQpIHsKICAgICAgICB2YXIgZmllbGRWYWx1ZSA9IGZpZWxkLnJlc2V0KHsKICAgICAgICAgIHJlc2V0VmFsdWU6IHJlc2V0VmFsdWVzCiAgICAgICAgfSk7CiAgICAgICAgY3VycmVudEZvcm1EYXRhW3BhdGhdID0gZmllbGRWYWx1ZTsKICAgICAgfQogICAgfSk7CgogICAgaWYgKHJlc2V0VmFsdWVzKSB7CiAgICAgIGZvcm1EYXRhJC5jdXJyZW50Lm5leHQoY3VycmVudEZvcm1EYXRhKTsKICAgIH0KCiAgICBzZXRJc1N1Ym1pdHRlZChmYWxzZSk7CiAgICBzZXRTdWJtaXR0aW5nKGZhbHNlKTsKICAgIHNldElzVmFsaWQodW5kZWZpbmVkKTsKICB9OwoKICB2YXIgZm9ybSA9IHsKICAgIGlzU3VibWl0dGVkOiBpc1N1Ym1pdHRlZCwKICAgIGlzU3VibWl0dGluZzogaXNTdWJtaXR0aW5nLAogICAgaXNWYWxpZDogaXNWYWxpZCwKICAgIHN1Ym1pdDogc3VibWl0Rm9ybSwKICAgIHN1YnNjcmliZTogc3Vic2NyaWJlLAogICAgc2V0RmllbGRWYWx1ZTogc2V0RmllbGRWYWx1ZSwKICAgIHNldEZpZWxkRXJyb3JzOiBzZXRGaWVsZEVycm9ycywKICAgIGdldEZpZWxkczogZ2V0RmllbGRzLAogICAgZ2V0Rm9ybURhdGE6IGdldEZvcm1EYXRhLAogICAgZ2V0RXJyb3JzOiBnZXRFcnJvcnMsCiAgICBnZXRGaWVsZERlZmF1bHRWYWx1ZTogZ2V0RmllbGREZWZhdWx0VmFsdWUsCiAgICByZXNldDogcmVzZXQsCiAgICBfX29wdGlvbnM6IGZvcm1PcHRpb25zLAogICAgX19mb3JtRGF0YSQ6IGZvcm1EYXRhJCwKICAgIF9fdXBkYXRlRm9ybURhdGFBdDogdXBkYXRlRm9ybURhdGFBdCwKICAgIF9fcmVhZEZpZWxkQ29uZmlnRnJvbVNjaGVtYTogcmVhZEZpZWxkQ29uZmlnRnJvbVNjaGVtYSwKICAgIF9fYWRkRmllbGQ6IGFkZEZpZWxkLAogICAgX19yZW1vdmVGaWVsZDogcmVtb3ZlRmllbGQsCiAgICBfX3ZhbGlkYXRlRmllbGRzOiB2YWxpZGF0ZUZpZWxkcwogIH07CiAgcmV0dXJuIHsKICAgIGZvcm06IGZvcm0KICB9Owp9"},null]}