{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/lens/public/editor_frame_service/editor_frame/chart_switch.js","dependencies":[{"path":"x-pack/legacy/plugins/lens/public/editor_frame_service/editor_frame/chart_switch.js","mtime":1589249552292},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkNoYXJ0U3dpdGNoID0gQ2hhcnRTd2l0Y2g7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX2V1aSA9IHJlcXVpcmUoIkBlbGFzdGljL2V1aSIpOwoKdmFyIF9sb2Rhc2ggPSByZXF1aXJlKCJsb2Rhc2giKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9zdWdnZXN0aW9uX2hlbHBlcnMgPSByZXF1aXJlKCIuL3N1Z2dlc3Rpb25faGVscGVycyIpOwoKdmFyIF9sZW5zX3VpX3RlbGVtZXRyeSA9IHJlcXVpcmUoIi4uLy4uL2xlbnNfdWlfdGVsZW1ldHJ5Iik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgIH0pOwogICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogIH0KCiAgcmV0dXJuIGtleXM7Cn0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwoKICAgIGlmIChpICUgMikgewogICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgewogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9CgpmdW5jdGlvbiBWaXN1YWxpemF0aW9uU3VtbWFyeShwcm9wcykgewogIHZhciB2aXN1YWxpemF0aW9uID0gcHJvcHMudmlzdWFsaXphdGlvbk1hcFtwcm9wcy52aXN1YWxpemF0aW9uSWQgfHwgJyddOwoKICBpZiAoIXZpc3VhbGl6YXRpb24pIHsKICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5kZWZhdWx0LkZyYWdtZW50LCBudWxsLCBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subGVucy5jb25maWdQYW5lbC5zZWxlY3RWaXN1YWxpemF0aW9uJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ1NlbGVjdCBhIHZpc3VhbGl6YXRpb24nCiAgICB9KSk7CiAgfQoKICB2YXIgZGVzY3JpcHRpb24gPSB2aXN1YWxpemF0aW9uLmdldERlc2NyaXB0aW9uKHByb3BzLnZpc3VhbGl6YXRpb25TdGF0ZSk7CiAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LmRlZmF1bHQuRnJhZ21lbnQsIG51bGwsIGRlc2NyaXB0aW9uLmljb24gJiYgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUljb24sIHsKICAgIHNpemU6ICJ4bCIsCiAgICBjbGFzc05hbWU6ICJsbnNDaGFydFN3aXRjaF9fc3VtbWFyeUljb24iLAogICAgdHlwZTogZGVzY3JpcHRpb24uaWNvbgogIH0pLCBkZXNjcmlwdGlvbi5sYWJlbCk7Cn0KCmZ1bmN0aW9uIENoYXJ0U3dpdGNoKHByb3BzKSB7CiAgdmFyIF91c2VTdGF0ZSA9ICgwLCBfcmVhY3QudXNlU3RhdGUpKGZhbHNlKSwKICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksCiAgICAgIGZseW91dE9wZW4gPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRGbHlvdXRPcGVuID0gX3VzZVN0YXRlMlsxXTsKCiAgdmFyIGNvbW1pdFNlbGVjdGlvbiA9IGZ1bmN0aW9uIGNvbW1pdFNlbGVjdGlvbihzZWxlY3Rpb24pIHsKICAgIHNldEZseW91dE9wZW4oZmFsc2UpOwogICAgKDAsIF9sZW5zX3VpX3RlbGVtZXRyeS50cmFja1VpRXZlbnQpKCJjaGFydF9zd2l0Y2giKTsKICAgICgwLCBfc3VnZ2VzdGlvbl9oZWxwZXJzLnN3aXRjaFRvU3VnZ2VzdGlvbikocHJvcHMuZGlzcGF0Y2gsIF9vYmplY3RTcHJlYWQoe30sIHNlbGVjdGlvbiwgewogICAgICB2aXN1YWxpemF0aW9uU3RhdGU6IHNlbGVjdGlvbi5nZXRWaXN1YWxpemF0aW9uU3RhdGUoKQogICAgfSksICdTV0lUQ0hfVklTVUFMSVpBVElPTicpOwoKICAgIGlmICghc2VsZWN0aW9uLmRhdGFzb3VyY2VJZCAmJiAhc2VsZWN0aW9uLnNhbWVEYXRhc291cmNlcyB8fCBzZWxlY3Rpb24uZGF0YUxvc3MgPT09ICdldmVyeXRoaW5nJykgewogICAgICBwcm9wcy5mcmFtZVB1YmxpY0FQSS5yZW1vdmVMYXllcnMoT2JqZWN0LmtleXMocHJvcHMuZnJhbWVQdWJsaWNBUEkuZGF0YXNvdXJjZUxheWVycykpOwogICAgfQogIH07CgogIGZ1bmN0aW9uIGdldFNlbGVjdGlvbih2aXN1YWxpemF0aW9uSWQsIHN1YlZpc3VhbGl6YXRpb25JZCkgewogICAgdmFyIG5ld1Zpc3VhbGl6YXRpb24gPSBwcm9wcy52aXN1YWxpemF0aW9uTWFwW3Zpc3VhbGl6YXRpb25JZF07CgogICAgdmFyIHN3aXRjaFZpc1R5cGUgPSBwcm9wcy52aXN1YWxpemF0aW9uTWFwW3Zpc3VhbGl6YXRpb25JZF0uc3dpdGNoVmlzdWFsaXphdGlvblR5cGUgfHwgZnVuY3Rpb24gKF90eXBlLCBpbml0aWFsU3RhdGUpIHsKICAgICAgcmV0dXJuIGluaXRpYWxTdGF0ZTsKICAgIH07CgogICAgaWYgKHByb3BzLnZpc3VhbGl6YXRpb25JZCA9PT0gdmlzdWFsaXphdGlvbklkKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdmlzdWFsaXphdGlvbklkOiB2aXN1YWxpemF0aW9uSWQsCiAgICAgICAgc3ViVmlzdWFsaXphdGlvbklkOiBzdWJWaXN1YWxpemF0aW9uSWQsCiAgICAgICAgZGF0YUxvc3M6ICdub3RoaW5nJywKICAgICAgICBrZXB0TGF5ZXJJZHM6IE9iamVjdC5rZXlzKHByb3BzLmZyYW1lUHVibGljQVBJLmRhdGFzb3VyY2VMYXllcnMpLAogICAgICAgIGdldFZpc3VhbGl6YXRpb25TdGF0ZTogZnVuY3Rpb24gZ2V0VmlzdWFsaXphdGlvblN0YXRlKCkgewogICAgICAgICAgcmV0dXJuIHN3aXRjaFZpc1R5cGUoc3ViVmlzdWFsaXphdGlvbklkLCBwcm9wcy52aXN1YWxpemF0aW9uU3RhdGUpOwogICAgICAgIH0sCiAgICAgICAgc2FtZURhdGFzb3VyY2VzOiB0cnVlCiAgICAgIH07CiAgICB9CgogICAgdmFyIGxheWVycyA9IE9iamVjdC5lbnRyaWVzKHByb3BzLmZyYW1lUHVibGljQVBJLmRhdGFzb3VyY2VMYXllcnMpOwogICAgdmFyIGNvbnRhaW5zRGF0YSA9IGxheWVycy5zb21lKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpLAogICAgICAgICAgX2xheWVySWQgPSBfcmVmMlswXSwKICAgICAgICAgIGRhdGFzb3VyY2UgPSBfcmVmMlsxXTsKCiAgICAgIHJldHVybiBkYXRhc291cmNlLmdldFRhYmxlU3BlYygpLmxlbmd0aCA+IDA7CiAgICB9KTsKICAgIHZhciB0b3BTdWdnZXN0aW9uID0gZ2V0VG9wU3VnZ2VzdGlvbihwcm9wcywgdmlzdWFsaXphdGlvbklkLCBuZXdWaXN1YWxpemF0aW9uKTsKICAgIHZhciBkYXRhTG9zczsKCiAgICBpZiAoIWNvbnRhaW5zRGF0YSkgewogICAgICBkYXRhTG9zcyA9ICdub3RoaW5nJzsKICAgIH0gZWxzZSBpZiAoIXRvcFN1Z2dlc3Rpb24pIHsKICAgICAgZGF0YUxvc3MgPSAnZXZlcnl0aGluZyc7CiAgICB9IGVsc2UgaWYgKGxheWVycy5sZW5ndGggPiAxKSB7CiAgICAgIGRhdGFMb3NzID0gJ2xheWVycyc7CiAgICB9IGVsc2UgaWYgKHRvcFN1Z2dlc3Rpb24uY29sdW1ucyAhPT0gbGF5ZXJzWzBdWzFdLmdldFRhYmxlU3BlYygpLmxlbmd0aCkgewogICAgICBkYXRhTG9zcyA9ICdjb2x1bW5zJzsKICAgIH0gZWxzZSB7CiAgICAgIGRhdGFMb3NzID0gJ25vdGhpbmcnOwogICAgfQoKICAgIHJldHVybiB7CiAgICAgIHZpc3VhbGl6YXRpb25JZDogdmlzdWFsaXphdGlvbklkLAogICAgICBzdWJWaXN1YWxpemF0aW9uSWQ6IHN1YlZpc3VhbGl6YXRpb25JZCwKICAgICAgZGF0YUxvc3M6IGRhdGFMb3NzLAogICAgICBnZXRWaXN1YWxpemF0aW9uU3RhdGU6IHRvcFN1Z2dlc3Rpb24gPyBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHN3aXRjaFZpc1R5cGUoc3ViVmlzdWFsaXphdGlvbklkLCBuZXdWaXN1YWxpemF0aW9uLmluaXRpYWxpemUocHJvcHMuZnJhbWVQdWJsaWNBUEksIHRvcFN1Z2dlc3Rpb24udmlzdWFsaXphdGlvblN0YXRlKSk7CiAgICAgIH0gOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHN3aXRjaFZpc1R5cGUoc3ViVmlzdWFsaXphdGlvbklkLCBuZXdWaXN1YWxpemF0aW9uLmluaXRpYWxpemUocHJvcHMuZnJhbWVQdWJsaWNBUEkpKTsKICAgICAgfSwKICAgICAga2VwdExheWVySWRzOiB0b3BTdWdnZXN0aW9uID8gdG9wU3VnZ2VzdGlvbi5rZXB0TGF5ZXJJZHMgOiBbXSwKICAgICAgZGF0YXNvdXJjZVN0YXRlOiB0b3BTdWdnZXN0aW9uID8gdG9wU3VnZ2VzdGlvbi5kYXRhc291cmNlU3RhdGUgOiB1bmRlZmluZWQsCiAgICAgIGRhdGFzb3VyY2VJZDogdG9wU3VnZ2VzdGlvbiA/IHRvcFN1Z2dlc3Rpb24uZGF0YXNvdXJjZUlkIDogdW5kZWZpbmVkCiAgICB9OwogIH0KCiAgdmFyIHZpc3VhbGl6YXRpb25UeXBlcyA9ICgwLCBfcmVhY3QudXNlTWVtbykoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGZseW91dE9wZW4gJiYgKDAsIF9sb2Rhc2guZmxhdHRlbikoT2JqZWN0LnZhbHVlcyhwcm9wcy52aXN1YWxpemF0aW9uTWFwKS5tYXAoZnVuY3Rpb24gKHYpIHsKICAgICAgcmV0dXJuIHYudmlzdWFsaXphdGlvblR5cGVzLm1hcChmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgIHZpc3VhbGl6YXRpb25JZDogdi5pZAogICAgICAgIH0sIHQsIHsKICAgICAgICAgIGljb246IHQubGFyZ2VJY29uIHx8IHQuaWNvbgogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pKS5tYXAoZnVuY3Rpb24gKHZpc3VhbGl6YXRpb25UeXBlKSB7CiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCB2aXN1YWxpemF0aW9uVHlwZSwgewogICAgICAgIHNlbGVjdGlvbjogZ2V0U2VsZWN0aW9uKHZpc3VhbGl6YXRpb25UeXBlLnZpc3VhbGl6YXRpb25JZCwgdmlzdWFsaXphdGlvblR5cGUuaWQpCiAgICAgIH0pOwogICAgfSk7CiAgfSwgW2ZseW91dE9wZW4sIHByb3BzLnZpc3VhbGl6YXRpb25NYXAsIHByb3BzLmZyYW1lUHVibGljQVBJLCBwcm9wcy52aXN1YWxpemF0aW9uSWQsIHByb3BzLnZpc3VhbGl6YXRpb25TdGF0ZV0pOwoKICB2YXIgcG9wb3ZlciA9IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlQb3BvdmVyLCB7CiAgICBpZDogImxuc0NoYXJ0U3dpdGNoUG9wb3ZlciIsCiAgICBvd25Gb2N1czogdHJ1ZSwKICAgIGluaXRpYWxGb2N1czogIi5sbnNDaGFydFN3aXRjaF9fcG9wb3ZlclBhbmVsIiwKICAgIHBhbmVsQ2xhc3NOYW1lOiAibG5zQ2hhcnRTd2l0Y2hfX3BvcG92ZXJQYW5lbCIsCiAgICBhbmNob3JDbGFzc05hbWU6ICJldWktdGV4dFRydW5jYXRlIiwKICAgIHBhbmVsUGFkZGluZ1NpemU6ICJzIiwKICAgIGJ1dHRvbjogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbkVtcHR5LCB7CiAgICAgIGNsYXNzTmFtZTogImxuc0NoYXJ0U3dpdGNoX190cmlnZ2VyQnV0dG9uIiwKICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICByZXR1cm4gc2V0Rmx5b3V0T3BlbighZmx5b3V0T3Blbik7CiAgICAgIH0sCiAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJsbnNDaGFydFN3aXRjaFBvcG92ZXIiLAogICAgICBmbHVzaDogImxlZnQiLAogICAgICBpY29uU2lkZTogInJpZ2h0IiwKICAgICAgaWNvblR5cGU6ICJhcnJvd0Rvd24iLAogICAgICBjb2xvcjogInRleHQiCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFZpc3VhbGl6YXRpb25TdW1tYXJ5LCBwcm9wcykpLAogICAgaXNPcGVuOiBmbHlvdXRPcGVuLAogICAgY2xvc2VQb3BvdmVyOiBmdW5jdGlvbiBjbG9zZVBvcG92ZXIoKSB7CiAgICAgIHJldHVybiBzZXRGbHlvdXRPcGVuKGZhbHNlKTsKICAgIH0sCiAgICBhbmNob3JQb3NpdGlvbjogImRvd25MZWZ0IgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlQb3BvdmVyVGl0bGUsIG51bGwsIF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5sZW5zLmNvbmZpZ1BhbmVsLnNlbGVjdFZpc3VhbGl6YXRpb24nLCB7CiAgICBkZWZhdWx0TWVzc2FnZTogJ1NlbGVjdCBhIHZpc3VhbGl6YXRpb24nCiAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpS2V5UGFkTWVudSwgbnVsbCwgKHZpc3VhbGl6YXRpb25UeXBlcyB8fCBbXSkubWFwKGZ1bmN0aW9uICh2KSB7CiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUtleVBhZE1lbnVJdGVtQnV0dG9uLCB7CiAgICAgIGtleTogIiIuY29uY2F0KHYudmlzdWFsaXphdGlvbklkLCAiOiIpLmNvbmNhdCh2LmlkKSwKICAgICAgbGFiZWw6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInZpc1R5cGVUaXRsZSIKICAgICAgfSwgdi5sYWJlbCksCiAgICAgIHJvbGU6ICJtZW51aXRlbSIsCiAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJsbnNDaGFydFN3aXRjaFBvcG92ZXJfIi5jb25jYXQodi5pZCksCiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgcmV0dXJuIGNvbW1pdFNlbGVjdGlvbih2LnNlbGVjdGlvbik7CiAgICAgIH0sCiAgICAgIGJldGFCYWRnZUxhYmVsOiB2LnNlbGVjdGlvbi5kYXRhTG9zcyAhPT0gJ25vdGhpbmcnID8gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMuY2hhcnRTd2l0Y2guZGF0YUxvc3NMYWJlbCcsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0RhdGEgbG9zcycKICAgICAgfSkgOiB1bmRlZmluZWQsCiAgICAgIGJldGFCYWRnZVRvb2x0aXBDb250ZW50OiB2LnNlbGVjdGlvbi5kYXRhTG9zcyAhPT0gJ25vdGhpbmcnID8gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmxlbnMuY2hhcnRTd2l0Y2guZGF0YUxvc3NEZXNjcmlwdGlvbicsIHsKICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1N3aXRjaGluZyB0byB0aGlzIGNoYXJ0IHdpbGwgbG9zZSBzb21lIG9mIHRoZSBjb25maWd1cmF0aW9uJwogICAgICB9KSA6IHVuZGVmaW5lZCwKICAgICAgYmV0YUJhZGdlSWNvblR5cGU6IHYuc2VsZWN0aW9uLmRhdGFMb3NzICE9PSAnbm90aGluZycgPyAnYWxlcnQnIDogdW5kZWZpbmVkCiAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpSWNvbiwgewogICAgICBjbGFzc05hbWU6ICJsbnNDaGFydFN3aXRjaF9fY2hhcnRJY29uIiwKICAgICAgdHlwZTogdi5pY29uIHx8ICdlbXB0eScsCiAgICAgIHNpemU6ICJsIgogICAgfSkpOwogIH0pKSk7CgogIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICBjbGFzc05hbWU6ICJsbnNDaGFydFN3aXRjaF9faGVhZGVyIgogIH0sIHBvcG92ZXIpOwp9CgpmdW5jdGlvbiBnZXRUb3BTdWdnZXN0aW9uKHByb3BzLCB2aXN1YWxpemF0aW9uSWQsIG5ld1Zpc3VhbGl6YXRpb24pIHsKICB2YXIgc3VnZ2VzdGlvbnMgPSAoMCwgX3N1Z2dlc3Rpb25faGVscGVycy5nZXRTdWdnZXN0aW9ucykoewogICAgZGF0YXNvdXJjZU1hcDogcHJvcHMuZGF0YXNvdXJjZU1hcCwKICAgIGRhdGFzb3VyY2VTdGF0ZXM6IHByb3BzLmRhdGFzb3VyY2VTdGF0ZXMsCiAgICB2aXN1YWxpemF0aW9uTWFwOiBfZGVmaW5lUHJvcGVydHkoe30sIHZpc3VhbGl6YXRpb25JZCwgbmV3VmlzdWFsaXphdGlvbiksCiAgICBhY3RpdmVWaXN1YWxpemF0aW9uSWQ6IHByb3BzLnZpc3VhbGl6YXRpb25JZCwKICAgIHZpc3VhbGl6YXRpb25TdGF0ZTogcHJvcHMudmlzdWFsaXphdGlvblN0YXRlCiAgfSkuZmlsdGVyKGZ1bmN0aW9uIChzdWdnZXN0aW9uKSB7CiAgICAvLyBkb24ndCB1c2UgZXh0ZW5kZWQgdmVyc2lvbnMgb2YgY3VycmVudCBkYXRhIHRhYmxlIG9uIHN3aXRjaGluZyBiZXR3ZWVuIHZpc3VhbGl6YXRpb25zCiAgICAvLyB0byBhdm9pZCBjb25mdXNpbmcgdGhlIHVzZXIuCiAgICByZXR1cm4gc3VnZ2VzdGlvbi5jaGFuZ2VUeXBlICE9PSAnZXh0ZW5kZWQnOwogIH0pOyAvLyBXZSBwcmVmZXIgdW5jaGFuZ2VkIG9yIHJlZHVjZWQgc3VnZ2VzdGlvbnMgd2hlbiBzd2l0Y2hpbmcKICAvLyBjaGFydHMgc2luY2UgdGhhdCBhbGxvd3MgeW91IHRvIHN3aXRjaCBmcm9tIEEgdG8gQiBhbmQgYmFjawogIC8vIHRvIEEgd2l0aCB0aGUgZ3JlYXRlc3QgY2hhbmNlIG9mIHByZXNlcnZpbmcgeW91ciBvcmlnaW5hbCBzdGF0ZS4KCiAgcmV0dXJuIHN1Z2dlc3Rpb25zLmZpbmQoZnVuY3Rpb24gKHMpIHsKICAgIHJldHVybiBzLmNoYW5nZVR5cGUgPT09ICd1bmNoYW5nZWQnOwogIH0pIHx8IHN1Z2dlc3Rpb25zLmZpbmQoZnVuY3Rpb24gKHMpIHsKICAgIHJldHVybiBzLmNoYW5nZVR5cGUgPT09ICdyZWR1Y2VkJzsKICB9KSB8fCBzdWdnZXN0aW9uc1swXTsKfQ=="},null]}