{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/infra/public/components/logging/log_text_stream/loading_item_view.js","dependencies":[{"path":"x-pack/plugins/infra/public/components/logging/log_text_stream/loading_item_view.js","mtime":1589249554245},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuTG9nVGV4dFN0cmVhbUxvYWRpbmdJdGVtVmlldyA9IHZvaWQgMDsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX3JlYWN0ID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgUmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vb2JzZXJ2YWJpbGl0eS9wdWJsaWMiKTsKCnZhciBfbG9nX3RleHRfc2VwYXJhdG9yID0gcmVxdWlyZSgiLi9sb2dfdGV4dF9zZXBhcmF0b3IiKTsKCnZhciBfZGF0ZW1hdGggPSByZXF1aXJlKCIuLi8uLi8uLi91dGlscy9kYXRlbWF0aCIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7CiAgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgewogICAgcmV0dXJuIG9iajsKICB9IGVsc2UgewogICAgdmFyIG5ld09iaiA9IHt9OwoKICAgIGlmIChvYmogIT0gbnVsbCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OwoKICAgICAgICAgIGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBuZXdPYmouZGVmYXVsdCA9IG9iajsKICAgIHJldHVybiBuZXdPYmo7CiAgfQp9CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogIGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcikgPT09ICJzeW1ib2wiKSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0gZWxzZSB7CiAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogX3R5cGVvZjIob2JqKTsKICAgIH07CiAgfQoKICByZXR1cm4gX3R5cGVvZihvYmopOwp9CgpmdW5jdGlvbiBfZXh0ZW5kcygpIHsKICBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgewogICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsKCiAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgewogICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdGFyZ2V0OwogIH07CgogIHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QyKCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICBwYWRkaW5nLWxlZnQ6ICIsICI7XG4gIHBhZGRpbmctdG9wOiAiLCAiO1xuICBwYWRkaW5nLWJvdHRvbTogIiwgIjtcbiJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0MiA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDIoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0KCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICBoZWlnaHQ6IDQwcHg7XG4iXSk7CgogIF90ZW1wbGF0ZU9iamVjdCA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdCgpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKHN0cmluZ3MsIHJhdykgewogIGlmICghcmF3KSB7CiAgICByYXcgPSBzdHJpbmdzLnNsaWNlKDApOwogIH0KCiAgcmV0dXJuIE9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc3RyaW5ncywgewogICAgcmF3OiB7CiAgICAgIHZhbHVlOiBPYmplY3QuZnJlZXplKHJhdykKICAgIH0KICB9KSk7Cn0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgfQp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogIH0KfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICByZXR1cm4gQ29uc3RydWN0b3I7Cn0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsKICBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7CiAgICByZXR1cm4gY2FsbDsKICB9CgogIHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOwp9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsKICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIHNlbGY7Cn0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7CiAgfTsKICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOwp9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsKICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsKICB9CgogIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgewogICAgY29uc3RydWN0b3I6IHsKICAgICAgdmFsdWU6IHN1YkNsYXNzLAogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICB9CiAgfSk7CiAgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7Cn0KCmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7CiAgICBvLl9fcHJvdG9fXyA9IHA7CiAgICByZXR1cm4gbzsKICB9OwoKICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOwp9Cgp2YXIgVElNRVNUQU1QX0ZPUk1BVCA9IHsKICBob3VyMTI6IGZhbHNlLAogIG1vbnRoOiAnc2hvcnQnLAogIGRheTogJ251bWVyaWMnLAogIGhvdXI6ICdudW1lcmljJywKICBtaW51dGU6ICdudW1lcmljJywKICBzZWNvbmQ6ICdudW1lcmljJwp9OwoKdmFyIExvZ1RleHRTdHJlYW1Mb2FkaW5nSXRlbVZpZXcgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkgewogIF9pbmhlcml0cyhMb2dUZXh0U3RyZWFtTG9hZGluZ0l0ZW1WaWV3LCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7CgogIGZ1bmN0aW9uIExvZ1RleHRTdHJlYW1Mb2FkaW5nSXRlbVZpZXcoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9nVGV4dFN0cmVhbUxvYWRpbmdJdGVtVmlldyk7CgogICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihMb2dUZXh0U3RyZWFtTG9hZGluZ0l0ZW1WaWV3KS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTsKICB9CgogIF9jcmVhdGVDbGFzcyhMb2dUZXh0U3RyZWFtTG9hZGluZ0l0ZW1WaWV3LCBbewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IHRoaXMucHJvcHMsCiAgICAgICAgICBwb3NpdGlvbiA9IF90aGlzJHByb3BzLnBvc2l0aW9uLAogICAgICAgICAgdGltZXN0YW1wID0gX3RoaXMkcHJvcHMudGltZXN0YW1wLAogICAgICAgICAgc3RhcnREYXRlRXhwcmVzc2lvbiA9IF90aGlzJHByb3BzLnN0YXJ0RGF0ZUV4cHJlc3Npb24sCiAgICAgICAgICBlbmREYXRlRXhwcmVzc2lvbiA9IF90aGlzJHByb3BzLmVuZERhdGVFeHByZXNzaW9uLAogICAgICAgICAgY2xhc3NOYW1lID0gX3RoaXMkcHJvcHMuY2xhc3NOYW1lLAogICAgICAgICAgaGFzTW9yZSA9IF90aGlzJHByb3BzLmhhc01vcmUsCiAgICAgICAgICBpc0xvYWRpbmcgPSBfdGhpcyRwcm9wcy5pc0xvYWRpbmcsCiAgICAgICAgICBpc1N0cmVhbWluZyA9IF90aGlzJHByb3BzLmlzU3RyZWFtaW5nLAogICAgICAgICAgb25FeHRlbmRSYW5nZSA9IF90aGlzJHByb3BzLm9uRXh0ZW5kUmFuZ2UsCiAgICAgICAgICBvblN0cmVhbVN0YXJ0ID0gX3RoaXMkcHJvcHMub25TdHJlYW1TdGFydDsKICAgICAgdmFyIHNob3VsZFNob3dDdGEgPSAhaGFzTW9yZSAmJiAhaXNTdHJlYW1pbmc7CiAgICAgIHZhciBleHRyYSA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoTG9hZGluZ0l0ZW1WaWV3RXh0cmEsIHsKICAgICAgICBqdXN0aWZ5Q29udGVudDogImNlbnRlciIsCiAgICAgICAgYWxpZ25JdGVtczogImNlbnRlciIsCiAgICAgICAgZ3V0dGVyU2l6ZTogIm0iCiAgICAgIH0sIGlzTG9hZGluZyB8fCBpc1N0cmVhbWluZyA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoUHJvZ3Jlc3NTcGlubmVyLCB7CiAgICAgICAga2luZDogaXNTdHJlYW1pbmcgPyAnc3RyZWFtaW5nJyA6ICdsb2FkaW5nJwogICAgICB9KSA6IHNob3VsZFNob3dDdGEgPyBSZWFjdC5jcmVhdGVFbGVtZW50KFByb2dyZXNzQ3RhLCB7CiAgICAgICAgcG9zaXRpb246IHBvc2l0aW9uLAogICAgICAgIG9uU3RyZWFtU3RhcnQ6IG9uU3RyZWFtU3RhcnQsCiAgICAgICAgb25FeHRlbmRSYW5nZTogb25FeHRlbmRSYW5nZSwKICAgICAgICBzdGFydERhdGVFeHByZXNzaW9uOiBzdGFydERhdGVFeHByZXNzaW9uLAogICAgICAgIGVuZERhdGVFeHByZXNzaW9uOiBlbmREYXRlRXhwcmVzc2lvbgogICAgICB9KSA6IG51bGwpOwogICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChQcm9ncmVzc0VudHJ5V3JhcHBlciwgewogICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLAogICAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbgogICAgICB9LCBwb3NpdGlvbiA9PT0gJ3N0YXJ0JyA/IGV4dHJhIDogbnVsbCwgUmVhY3QuY3JlYXRlRWxlbWVudChQcm9ncmVzc01lc3NhZ2UsIHsKICAgICAgICB0aW1lc3RhbXA6IHRpbWVzdGFtcCwKICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24sCiAgICAgICAgaXNTdHJlYW1pbmc6IGlzU3RyZWFtaW5nCiAgICAgIH0pLCBwb3NpdGlvbiA9PT0gJ2VuZCcgPyBleHRyYSA6IG51bGwpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIExvZ1RleHRTdHJlYW1Mb2FkaW5nSXRlbVZpZXc7Cn0oUmVhY3QuUHVyZUNvbXBvbmVudCk7CgpleHBvcnRzLkxvZ1RleHRTdHJlYW1Mb2FkaW5nSXRlbVZpZXcgPSBMb2dUZXh0U3RyZWFtTG9hZGluZ0l0ZW1WaWV3Owp2YXIgTG9hZGluZ0l0ZW1WaWV3RXh0cmEgPSAoMCwgX3B1YmxpYy5ldWlTdHlsZWQpKF9ldWkuRXVpRmxleEdyb3VwKShfdGVtcGxhdGVPYmplY3QoKSk7Cgp2YXIgUHJvZ3Jlc3NFbnRyeVdyYXBwZXIgPSBfcHVibGljLmV1aVN0eWxlZC5kaXYoX3RlbXBsYXRlT2JqZWN0MigpLCBmdW5jdGlvbiAocHJvcHMpIHsKICByZXR1cm4gcHJvcHMudGhlbWUuZXVpLmV1aVNpemVTOwp9LCBmdW5jdGlvbiAocHJvcHMpIHsKICByZXR1cm4gcHJvcHMucG9zaXRpb24gPT09ICdzdGFydCcgPyBwcm9wcy50aGVtZS5ldWkuZXVpU2l6ZUwgOiBwcm9wcy50aGVtZS5ldWkuZXVpU2l6ZU07Cn0sIGZ1bmN0aW9uIChwcm9wcykgewogIHJldHVybiBwcm9wcy5wb3NpdGlvbiA9PT0gJ2VuZCcgPyBwcm9wcy50aGVtZS5ldWkuZXVpU2l6ZUwgOiBwcm9wcy50aGVtZS5ldWkuZXVpU2l6ZU07Cn0pOwoKdmFyIFByb2dyZXNzTWVzc2FnZSA9IGZ1bmN0aW9uIFByb2dyZXNzTWVzc2FnZShfcmVmKSB7CiAgdmFyIHRpbWVzdGFtcCA9IF9yZWYudGltZXN0YW1wLAogICAgICBwb3NpdGlvbiA9IF9yZWYucG9zaXRpb24sCiAgICAgIGlzU3RyZWFtaW5nID0gX3JlZi5pc1N0cmVhbWluZzsKICB2YXIgZm9ybWF0dGVkVGltZXN0YW1wID0gaXNTdHJlYW1pbmcgJiYgcG9zaXRpb24gPT09ICdlbmQnID8gUmVhY3QuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkUmVsYXRpdmUsIHsKICAgIHVuaXRzOiAic2Vjb25kIiwKICAgIHZhbHVlOiB0aW1lc3RhbXAsCiAgICB1cGRhdGVJbnRlcnZhbDogMQogIH0pIDogUmVhY3QuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkVGltZSwgX2V4dGVuZHMoewogICAgdmFsdWU6IHRpbWVzdGFtcAogIH0sIFRJTUVTVEFNUF9GT1JNQVQpKTsKICB2YXIgbWVzc2FnZSA9IHBvc2l0aW9uID09PSAnc3RhcnQnID8gUmVhY3QuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgaWQ6ICJ4cGFjay5pbmZyYS5sb2dzLnNob3dpbmdFbnRyaWVzRnJvbVRpbWVzdGFtcCIsCiAgICBkZWZhdWx0TWVzc2FnZTogIlNob3dpbmcgZW50cmllcyBmcm9tIHt0aW1lc3RhbXB9IiwKICAgIHZhbHVlczogewogICAgICB0aW1lc3RhbXA6IGZvcm1hdHRlZFRpbWVzdGFtcAogICAgfQogIH0pIDogaXNTdHJlYW1pbmcgPyBSZWFjdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICBpZDogInhwYWNrLmluZnJhLmxvZ3MubGFzdFVwZGF0ZSIsCiAgICBkZWZhdWx0TWVzc2FnZTogIkxhc3QgdXBkYXRlIHt0aW1lc3RhbXB9IiwKICAgIHZhbHVlczogewogICAgICB0aW1lc3RhbXA6IGZvcm1hdHRlZFRpbWVzdGFtcAogICAgfQogIH0pIDogUmVhY3QuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgaWQ6ICJ4cGFjay5pbmZyYS5sb2dzLnNob3dpbmdFbnRyaWVzVW50aWxUaW1lc3RhbXAiLAogICAgZGVmYXVsdE1lc3NhZ2U6ICJTaG93aW5nIGVudHJpZXMgdW50aWwge3RpbWVzdGFtcH0iLAogICAgdmFsdWVzOiB7CiAgICAgIHRpbWVzdGFtcDogZm9ybWF0dGVkVGltZXN0YW1wCiAgICB9CiAgfSk7CiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoX2xvZ190ZXh0X3NlcGFyYXRvci5Mb2dUZXh0U2VwYXJhdG9yLCBudWxsLCBSZWFjdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGl0bGUsIHsKICAgIHNpemU6ICJ4eHMiCiAgfSwgbWVzc2FnZSkpOwp9OwoKdmFyIFByb2dyZXNzU3Bpbm5lciA9IGZ1bmN0aW9uIFByb2dyZXNzU3Bpbm5lcihfcmVmMikgewogIHZhciBraW5kID0gX3JlZjIua2luZDsKICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgUmVhY3QuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhJdGVtLCB7CiAgICBncm93OiBmYWxzZQogIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlMb2FkaW5nU3Bpbm5lciwgewogICAgc2l6ZTogImwiCiAgfSkpLCBSZWFjdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgIGdyb3c6IGZhbHNlCiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRleHQsIHsKICAgIHNpemU6ICJzIgogIH0sIGtpbmQgPT09ICdzdHJlYW1pbmcnID8gUmVhY3QuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgaWQ6ICJ4cGFjay5pbmZyYS5sb2dzLnN0cmVhbWluZ05ld0VudHJpZXNUZXh0IiwKICAgIGRlZmF1bHRNZXNzYWdlOiAiU3RyZWFtaW5nIG5ldyBlbnRyaWVzIgogIH0pIDogUmVhY3QuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgaWQ6ICJ4cGFjay5pbmZyYS5sb2dzLmxvYWRpbmdOZXdFbnRyaWVzVGV4dCIsCiAgICBkZWZhdWx0TWVzc2FnZTogIkxvYWRpbmcgbmV3IGVudHJpZXMiCiAgfSkpKSk7Cn07Cgp2YXIgUHJvZ3Jlc3NDdGEgPSBmdW5jdGlvbiBQcm9ncmVzc0N0YShfcmVmMykgewogIHZhciBwb3NpdGlvbiA9IF9yZWYzLnBvc2l0aW9uLAogICAgICBzdGFydERhdGVFeHByZXNzaW9uID0gX3JlZjMuc3RhcnREYXRlRXhwcmVzc2lvbiwKICAgICAgZW5kRGF0ZUV4cHJlc3Npb24gPSBfcmVmMy5lbmREYXRlRXhwcmVzc2lvbiwKICAgICAgb25FeHRlbmRSYW5nZSA9IF9yZWYzLm9uRXh0ZW5kUmFuZ2UsCiAgICAgIG9uU3RyZWFtU3RhcnQgPSBfcmVmMy5vblN0cmVhbVN0YXJ0OwogIHZhciByYW5nZUVkZ2UgPSBwb3NpdGlvbiA9PT0gJ3N0YXJ0JyA/IHN0YXJ0RGF0ZUV4cHJlc3Npb24gOiBlbmREYXRlRXhwcmVzc2lvbjsKCiAgaWYgKHJhbmdlRWRnZSA9PT0gJ25vdycgJiYgcG9zaXRpb24gPT09ICdlbmQnKSB7CiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbiwgewogICAgICBvbkNsaWNrOiBvblN0cmVhbVN0YXJ0LAogICAgICBzaXplOiAicyIKICAgIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgaWQ6ICJ4cGFjay5pbmZyYS5sb2dzLnN0cmVhbUxpdmUiLAogICAgICBkZWZhdWx0TWVzc2FnZTogIlN0cmVhbSBsaXZlIgogICAgfSkpOwogIH0KCiAgdmFyIGljb25UeXBlID0gcG9zaXRpb24gPT09ICdzdGFydCcgPyAnYXJyb3dVcCcgOiAnYXJyb3dEb3duJzsKICB2YXIgZXh0ZW5kZWRSYW5nZSA9IHBvc2l0aW9uID09PSAnc3RhcnQnID8gKDAsIF9kYXRlbWF0aC5leHRlbmREYXRlbWF0aCkoc3RhcnREYXRlRXhwcmVzc2lvbiwgJ2JlZm9yZScsIGVuZERhdGVFeHByZXNzaW9uKSA6ICgwLCBfZGF0ZW1hdGguZXh0ZW5kRGF0ZW1hdGgpKGVuZERhdGVFeHByZXNzaW9uLCAnYWZ0ZXInLCBzdGFydERhdGVFeHByZXNzaW9uKTsKCiAgaWYgKCFleHRlbmRlZFJhbmdlIHx8ICEoJ2RpZmZVbml0JyBpbiBleHRlbmRlZFJhbmdlKSkgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbiwgewogICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgaWYgKHR5cGVvZiBvbkV4dGVuZFJhbmdlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgb25FeHRlbmRSYW5nZShleHRlbmRlZFJhbmdlLnZhbHVlKTsKICAgICAgfQogICAgfSwKICAgIGljb25UeXBlOiBpY29uVHlwZSwKICAgIHNpemU6ICJzIgogIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUHJvZ3Jlc3NFeHRlbmRNZXNzYWdlLCB7CiAgICBhbW91bnQ6IGV4dGVuZGVkUmFuZ2UuZGlmZkFtb3VudCwKICAgIHVuaXQ6IGV4dGVuZGVkUmFuZ2UuZGlmZlVuaXQKICB9KSk7Cn07Cgp2YXIgUHJvZ3Jlc3NFeHRlbmRNZXNzYWdlID0gZnVuY3Rpb24gUHJvZ3Jlc3NFeHRlbmRNZXNzYWdlKF9yZWY0KSB7CiAgdmFyIGFtb3VudCA9IF9yZWY0LmFtb3VudCwKICAgICAgdW5pdCA9IF9yZWY0LnVuaXQ7CgogIHN3aXRjaCAodW5pdCkgewogICAgY2FzZSAnbXMnOgogICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaW5mcmEubG9ncy5leHRlbmRUaW1lZnJhbWVCeU1pbGxpc2Vjb25kc0J1dHRvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFeHRlbmQgdGltZSBmcmFtZSBieSB7YW1vdW50LCBudW1iZXJ9IHthbW91bnQsIHBsdXJhbCwgb25lIHttaWxsaXNlY29uZH0gb3RoZXIge21pbGxpc2Vjb25kc319IiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGFtb3VudDogYW1vdW50CiAgICAgICAgfQogICAgICB9KTsKCiAgICBjYXNlICdzJzoKICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmluZnJhLmxvZ3MuZXh0ZW5kVGltZWZyYW1lQnlTZWNvbmRzQnV0dG9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkV4dGVuZCB0aW1lIGZyYW1lIGJ5IHthbW91bnQsIG51bWJlcn0ge2Ftb3VudCwgcGx1cmFsLCBvbmUge3NlY29uZH0gb3RoZXIge3NlY29uZHN9fSIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBhbW91bnQ6IGFtb3VudAogICAgICAgIH0KICAgICAgfSk7CgogICAgY2FzZSAnbSc6CiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5pbmZyYS5sb2dzLmV4dGVuZFRpbWVmcmFtZUJ5TWludXRlc0J1dHRvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFeHRlbmQgdGltZSBmcmFtZSBieSB7YW1vdW50LCBudW1iZXJ9IHthbW91bnQsIHBsdXJhbCwgb25lIHttaW51dGV9IG90aGVyIHttaW51dGVzfX0iLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgYW1vdW50OiBhbW91bnQKICAgICAgICB9CiAgICAgIH0pOwoKICAgIGNhc2UgJ2gnOgogICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaW5mcmEubG9ncy5leHRlbmRUaW1lZnJhbWVCeUhvdXJzQnV0dG9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkV4dGVuZCB0aW1lIGZyYW1lIGJ5IHthbW91bnQsIG51bWJlcn0ge2Ftb3VudCwgcGx1cmFsLCBvbmUge2hvdXJ9IG90aGVyIHtob3Vyc319IiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGFtb3VudDogYW1vdW50CiAgICAgICAgfQogICAgICB9KTsKCiAgICBjYXNlICdkJzoKICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmluZnJhLmxvZ3MuZXh0ZW5kVGltZWZyYW1lQnlEYXlzQnV0dG9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkV4dGVuZCB0aW1lIGZyYW1lIGJ5IHthbW91bnQsIG51bWJlcn0ge2Ftb3VudCwgcGx1cmFsLCBvbmUge2RheX0gb3RoZXIge2RheXN9fSIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBhbW91bnQ6IGFtb3VudAogICAgICAgIH0KICAgICAgfSk7CgogICAgY2FzZSAndyc6CiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5pbmZyYS5sb2dzLmV4dGVuZFRpbWVmcmFtZUJ5V2Vla3NCdXR0b24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRXh0ZW5kIHRpbWUgZnJhbWUgYnkge2Ftb3VudCwgbnVtYmVyfSB7YW1vdW50LCBwbHVyYWwsIG9uZSB7d2Vla30gb3RoZXIge3dlZWtzfX0iLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgYW1vdW50OiBhbW91bnQKICAgICAgICB9CiAgICAgIH0pOwoKICAgIGNhc2UgJ00nOgogICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suaW5mcmEubG9ncy5leHRlbmRUaW1lZnJhbWVCeU1vbnRoc0J1dHRvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFeHRlbmQgdGltZSBmcmFtZSBieSB7YW1vdW50LCBudW1iZXJ9IHthbW91bnQsIHBsdXJhbCwgb25lIHttb250aH0gb3RoZXIge21vbnRoc319IiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGFtb3VudDogYW1vdW50CiAgICAgICAgfQogICAgICB9KTsKCiAgICBjYXNlICd5JzoKICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmluZnJhLmxvZ3MuZXh0ZW5kVGltZWZyYW1lQnlZZWFyc0J1dHRvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFeHRlbmQgdGltZSBmcmFtZSBieSB7YW1vdW50LCBudW1iZXJ9IHthbW91bnQsIHBsdXJhbCwgb25lIHt5ZWFyfSBvdGhlciB7eWVhcnN9fSIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICBhbW91bnQ6IGFtb3VudAogICAgICAgIH0KICAgICAgfSk7CgogICAgZGVmYXVsdDoKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5oYW5kbGVkIHVuaXQ6ICcgKyB1bml0KTsKICB9Cn07"},null]}