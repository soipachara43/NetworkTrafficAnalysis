{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/canvas/public/state/reducers/elements.js","dependencies":[{"path":"x-pack/legacy/plugins/canvas/public/state/reducers/elements.js","mtime":1589249552071},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmFzc2lnbk5vZGVQcm9wZXJ0aWVzID0gYXNzaWduTm9kZVByb3BlcnRpZXM7CmV4cG9ydHMuZWxlbWVudHNSZWR1Y2VyID0gdm9pZCAwOwoKdmFyIF9yZWR1eEFjdGlvbnMgPSByZXF1aXJlKCJyZWR1eC1hY3Rpb25zIik7Cgp2YXIgX29iamVjdFBhdGhJbW11dGFibGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIm9iamVjdC1wYXRoLWltbXV0YWJsZSIpKTsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgYWN0aW9ucyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoIi4uL2FjdGlvbnMvZWxlbWVudHMiKSk7Cgp2YXIgX2hhbmRsZUFjdGlvbnM7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7IHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OyBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsgfSBlbHNlIHsgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKdmFyIGFzc2lnbiA9IF9vYmplY3RQYXRoSW1tdXRhYmxlLmRlZmF1bHQuYXNzaWduLAogICAgcHVzaCA9IF9vYmplY3RQYXRoSW1tdXRhYmxlLmRlZmF1bHQucHVzaCwKICAgIGRlbCA9IF9vYmplY3RQYXRoSW1tdXRhYmxlLmRlZmF1bHQuZGVsLAogICAgc2V0ID0gX29iamVjdFBhdGhJbW11dGFibGUuZGVmYXVsdC5zZXQ7Cgp2YXIgZ2V0TG9jYXRpb24gPSBmdW5jdGlvbiBnZXRMb2NhdGlvbih0eXBlKSB7CiAgcmV0dXJuIHR5cGUgPT09ICdncm91cCcgPyAnZ3JvdXBzJyA6ICdlbGVtZW50cyc7Cn07Cgp2YXIgZmlyc3RPY2N1cnJlbmNlID0gZnVuY3Rpb24gZmlyc3RPY2N1cnJlbmNlKGVsZW1lbnQsIGluZGV4LCBhcnJheSkgewogIHJldHVybiBhcnJheS5pbmRleE9mKGVsZW1lbnQpID09PSBpbmRleDsKfTsKCnZhciBnZXRMb2NhdGlvbkZyb21JZHMgPSBmdW5jdGlvbiBnZXRMb2NhdGlvbkZyb21JZHMod29ya3BhZFN0YXRlLCBwYWdlSWQsIG5vZGVJZCkgewogIHZhciBwYWdlID0gd29ya3BhZFN0YXRlLnBhZ2VzLmZpbmQoZnVuY3Rpb24gKHApIHsKICAgIHJldHVybiBwLmlkID09PSBwYWdlSWQ7CiAgfSk7CiAgdmFyIGdyb3VwcyA9IHBhZ2UgPT0gbnVsbCA/IFtdIDogcGFnZS5ncm91cHMgfHwgW107CiAgcmV0dXJuIGdyb3Vwcy5maW5kKGZ1bmN0aW9uIChlKSB7CiAgICByZXR1cm4gZS5pZCA9PT0gbm9kZUlkOwogIH0pID8gJ2dyb3VwcycgOiAnZWxlbWVudHMnOwp9OwoKZnVuY3Rpb24gZ2V0UGFnZUluZGV4QnlJZCh3b3JrcGFkU3RhdGUsIHBhZ2VJZCkgewogIHJldHVybiAoMCwgX2xvZGFzaC5nZXQpKHdvcmtwYWRTdGF0ZSwgJ3BhZ2VzJywgW10pLmZpbmRJbmRleChmdW5jdGlvbiAocGFnZSkgewogICAgcmV0dXJuIHBhZ2UuaWQgPT09IHBhZ2VJZDsKICB9KTsKfQoKZnVuY3Rpb24gZ2V0Tm9kZUluZGV4QnlJZChwYWdlLCBub2RlSWQsIGxvY2F0aW9uKSB7CiAgcmV0dXJuIHBhZ2VbbG9jYXRpb25dLmZpbmRJbmRleChmdW5jdGlvbiAobm9kZSkgewogICAgcmV0dXJuIG5vZGUuaWQgPT09IG5vZGVJZDsKICB9KTsKfQoKZnVuY3Rpb24gYXNzaWduTm9kZVByb3BlcnRpZXMod29ya3BhZFN0YXRlLCBwYWdlSWQsIG5vZGVJZCwgcHJvcHMpIHsKICB2YXIgcGFnZUluZGV4ID0gZ2V0UGFnZUluZGV4QnlJZCh3b3JrcGFkU3RhdGUsIHBhZ2VJZCk7CiAgdmFyIGxvY2F0aW9uID0gZ2V0TG9jYXRpb25Gcm9tSWRzKHdvcmtwYWRTdGF0ZSwgcGFnZUlkLCBub2RlSWQpOwogIHZhciBub2Rlc1BhdGggPSAicGFnZXMuIi5jb25jYXQocGFnZUluZGV4LCAiLiIpLmNvbmNhdChsb2NhdGlvbik7CiAgdmFyIG5vZGVJbmRleCA9ICgwLCBfbG9kYXNoLmdldCkod29ya3BhZFN0YXRlLCBub2Rlc1BhdGgsIFtdKS5maW5kSW5kZXgoZnVuY3Rpb24gKG5vZGUpIHsKICAgIHJldHVybiBub2RlLmlkID09PSBub2RlSWQ7CiAgfSk7CgogIGlmIChwYWdlSW5kZXggPT09IC0xIHx8IG5vZGVJbmRleCA9PT0gLTEpIHsKICAgIHJldHVybiB3b3JrcGFkU3RhdGU7CiAgfQoKICByZXR1cm4gYXNzaWduKHdvcmtwYWRTdGF0ZSwgIiIuY29uY2F0KG5vZGVzUGF0aCwgIi4iKS5jb25jYXQobm9kZUluZGV4KSwgcHJvcHMpOwp9CgpmdW5jdGlvbiBtb3ZlTm9kZUxheWVyKHdvcmtwYWRTdGF0ZSwgcGFnZUlkLCBub2RlSWQsIG1vdmVtZW50LCBsb2NhdGlvbikgewogIHZhciBwYWdlSW5kZXggPSBnZXRQYWdlSW5kZXhCeUlkKHdvcmtwYWRTdGF0ZSwgcGFnZUlkKTsKICB2YXIgbm9kZUluZGV4ID0gZ2V0Tm9kZUluZGV4QnlJZCh3b3JrcGFkU3RhdGUucGFnZXNbcGFnZUluZGV4XSwgbm9kZUlkLCBsb2NhdGlvbik7CiAgdmFyIG5vZGVzID0gKDAsIF9sb2Rhc2guZ2V0KSh3b3JrcGFkU3RhdGUsIFsncGFnZXMnLCBwYWdlSW5kZXgsIGxvY2F0aW9uXSk7CiAgdmFyIGZyb20gPSBub2RlSW5kZXg7CgogIHZhciB0byA9IGZ1bmN0aW9uICgpIHsKICAgIGlmIChtb3ZlbWVudCA8IEluZmluaXR5ICYmIG1vdmVtZW50ID4gLUluZmluaXR5KSB7CiAgICAgIHJldHVybiBub2RlSW5kZXggKyBtb3ZlbWVudDsKICAgIH0KCiAgICBpZiAobW92ZW1lbnQgPT09IEluZmluaXR5KSB7CiAgICAgIHJldHVybiBub2Rlcy5sZW5ndGggLSAxOwogICAgfQoKICAgIGlmIChtb3ZlbWVudCA9PT0gLUluZmluaXR5KSB7CiAgICAgIHJldHVybiAwOwogICAgfQoKICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBlbGVtZW50IGxheWVyIG1vdmVtZW50Jyk7CiAgfSgpOwoKICBpZiAodG8gPiBub2Rlcy5sZW5ndGggLSAxIHx8IHRvIDwgMCkgewogICAgcmV0dXJuIHdvcmtwYWRTdGF0ZTsKICB9IC8vIENvbW1vbgoKCiAgdmFyIG5ld05vZGVzID0gbm9kZXMuc2xpY2UoMCk7CiAgbmV3Tm9kZXMuc3BsaWNlKHRvLCAwLCBuZXdOb2Rlcy5zcGxpY2UoZnJvbSwgMSlbMF0pOwogIHJldHVybiBzZXQod29ya3BhZFN0YXRlLCAicGFnZXMuIi5jb25jYXQocGFnZUluZGV4LCAiLiIpLmNvbmNhdChsb2NhdGlvbiksIG5ld05vZGVzKTsKfQoKdmFyIHRyaW1Qb3NpdGlvbiA9IGZ1bmN0aW9uIHRyaW1Qb3NpdGlvbihfcmVmKSB7CiAgdmFyIGxlZnQgPSBfcmVmLmxlZnQsCiAgICAgIHRvcCA9IF9yZWYudG9wLAogICAgICB3aWR0aCA9IF9yZWYud2lkdGgsCiAgICAgIGhlaWdodCA9IF9yZWYuaGVpZ2h0LAogICAgICBhbmdsZSA9IF9yZWYuYW5nbGUsCiAgICAgIHBhcmVudCA9IF9yZWYucGFyZW50OwogIHJldHVybiB7CiAgICBsZWZ0OiBsZWZ0LAogICAgdG9wOiB0b3AsCiAgICB3aWR0aDogd2lkdGgsCiAgICBoZWlnaHQ6IGhlaWdodCwKICAgIGFuZ2xlOiBhbmdsZSwKICAgIHBhcmVudDogcGFyZW50CiAgfTsKfTsKCnZhciB0cmltRWxlbWVudCA9IGZ1bmN0aW9uIHRyaW1FbGVtZW50KF9yZWYyKSB7CiAgdmFyIGlkID0gX3JlZjIuaWQsCiAgICAgIHBvc2l0aW9uID0gX3JlZjIucG9zaXRpb24sCiAgICAgIGV4cHJlc3Npb24gPSBfcmVmMi5leHByZXNzaW9uLAogICAgICBmaWx0ZXIgPSBfcmVmMi5maWx0ZXI7CiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoewogICAgaWQ6IGlkLAogICAgcG9zaXRpb246IHRyaW1Qb3NpdGlvbihwb3NpdGlvbikKICB9LCBwb3NpdGlvbi50eXBlICE9PSAnZ3JvdXAnICYmIHsKICAgIGV4cHJlc3Npb246IGV4cHJlc3Npb24KICB9LCB7fSwgZmlsdGVyICE9PSB2b2lkIDAgJiYgewogICAgZmlsdGVyOiBmaWx0ZXIKICB9KTsKfTsKCnZhciBnZXRQYWdlV2l0aEVsZW1lbnRJZCA9IGZ1bmN0aW9uIGdldFBhZ2VXaXRoRWxlbWVudElkKHdvcmtwYWQsIGVsZW1lbnRJZCkgewogIHZhciBtYXRjaGluZ1BhZ2UgPSB3b3JrcGFkLnBhZ2VzLmZpbmQoZnVuY3Rpb24gKHBhZ2UpIHsKICAgIHJldHVybiBwYWdlLmVsZW1lbnRzLm1hcChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICByZXR1cm4gZWxlbWVudC5pZDsKICAgIH0pLmluY2x1ZGVzKGVsZW1lbnRJZCk7CiAgfSk7CgogIGlmIChtYXRjaGluZ1BhZ2UpIHsKICAgIHJldHVybiBtYXRjaGluZ1BhZ2UuaWQ7CiAgfQoKICByZXR1cm4gdW5kZWZpbmVkOwp9OwoKdmFyIGVsZW1lbnRzUmVkdWNlciA9ICgwLCBfcmVkdXhBY3Rpb25zLmhhbmRsZUFjdGlvbnMpKChfaGFuZGxlQWN0aW9ucyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2hhbmRsZUFjdGlvbnMsIGFjdGlvbnMuc2V0RXhwcmVzc2lvbiwgZnVuY3Rpb24gKHdvcmtwYWRTdGF0ZSwgX3JlZjMpIHsKICB2YXIgcGF5bG9hZCA9IF9yZWYzLnBheWxvYWQ7CiAgdmFyIGV4cHJlc3Npb24gPSBwYXlsb2FkLmV4cHJlc3Npb24sCiAgICAgIHBhZ2VJZCA9IHBheWxvYWQucGFnZUlkLAogICAgICBlbGVtZW50SWQgPSBwYXlsb2FkLmVsZW1lbnRJZDsKICByZXR1cm4gYXNzaWduTm9kZVByb3BlcnRpZXMod29ya3BhZFN0YXRlLCBwYWdlSWQsIGVsZW1lbnRJZCwgewogICAgZXhwcmVzc2lvbjogZXhwcmVzc2lvbgogIH0pOwp9KSwgX2RlZmluZVByb3BlcnR5KF9oYW5kbGVBY3Rpb25zLCBhY3Rpb25zLnNldEZpbHRlciwgZnVuY3Rpb24gKHdvcmtwYWRTdGF0ZSwgX3JlZjQpIHsKICB2YXIgcGF5bG9hZCA9IF9yZWY0LnBheWxvYWQ7CiAgdmFyIGZpbHRlciA9IHBheWxvYWQuZmlsdGVyLAogICAgICBlbGVtZW50SWQgPSBwYXlsb2FkLmVsZW1lbnRJZDsKICB2YXIgcGFnZUlkID0gZ2V0UGFnZVdpdGhFbGVtZW50SWQod29ya3BhZFN0YXRlLCBlbGVtZW50SWQpOwogIHJldHVybiBhc3NpZ25Ob2RlUHJvcGVydGllcyh3b3JrcGFkU3RhdGUsIHBhZ2VJZCwgZWxlbWVudElkLCB7CiAgICBmaWx0ZXI6IGZpbHRlcgogIH0pOwp9KSwgX2RlZmluZVByb3BlcnR5KF9oYW5kbGVBY3Rpb25zLCBhY3Rpb25zLnNldE11bHRpcGxlUG9zaXRpb25zLCBmdW5jdGlvbiAod29ya3BhZFN0YXRlLCBfcmVmNSkgewogIHZhciBwYXlsb2FkID0gX3JlZjUucGF5bG9hZDsKICByZXR1cm4gcGF5bG9hZC5yZXBvc2l0aW9uZWRFbGVtZW50cy5yZWR1Y2UoZnVuY3Rpb24gKHByZXZpb3VzV29ya3BhZFN0YXRlLCBfcmVmNikgewogICAgdmFyIHBvc2l0aW9uID0gX3JlZjYucG9zaXRpb24sCiAgICAgICAgcGFnZUlkID0gX3JlZjYucGFnZUlkLAogICAgICAgIGVsZW1lbnRJZCA9IF9yZWY2LmVsZW1lbnRJZDsKICAgIHJldHVybiBhc3NpZ25Ob2RlUHJvcGVydGllcyhwcmV2aW91c1dvcmtwYWRTdGF0ZSwgcGFnZUlkLCBlbGVtZW50SWQsIHsKICAgICAgcG9zaXRpb246IHRyaW1Qb3NpdGlvbihwb3NpdGlvbikKICAgIH0pOwogIH0sIHdvcmtwYWRTdGF0ZSk7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX2hhbmRsZUFjdGlvbnMsIGFjdGlvbnMuZWxlbWVudExheWVyLCBmdW5jdGlvbiAod29ya3BhZFN0YXRlLCBfcmVmNykgewogIHZhciBfcmVmNyRwYXlsb2FkID0gX3JlZjcucGF5bG9hZCwKICAgICAgcGFnZUlkID0gX3JlZjckcGF5bG9hZC5wYWdlSWQsCiAgICAgIGVsZW1lbnRJZCA9IF9yZWY3JHBheWxvYWQuZWxlbWVudElkLAogICAgICBtb3ZlbWVudCA9IF9yZWY3JHBheWxvYWQubW92ZW1lbnQ7CiAgdmFyIGxvY2F0aW9uID0gZ2V0TG9jYXRpb25Gcm9tSWRzKHdvcmtwYWRTdGF0ZSwgcGFnZUlkLCBlbGVtZW50SWQpOwogIHJldHVybiBtb3ZlTm9kZUxheWVyKHdvcmtwYWRTdGF0ZSwgcGFnZUlkLCBlbGVtZW50SWQsIG1vdmVtZW50LCBsb2NhdGlvbik7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX2hhbmRsZUFjdGlvbnMsIGFjdGlvbnMuYWRkRWxlbWVudCwgZnVuY3Rpb24gKHdvcmtwYWRTdGF0ZSwgX3JlZjgpIHsKICB2YXIgX3JlZjgkcGF5bG9hZCA9IF9yZWY4LnBheWxvYWQsCiAgICAgIHBhZ2VJZCA9IF9yZWY4JHBheWxvYWQucGFnZUlkLAogICAgICBlbGVtZW50ID0gX3JlZjgkcGF5bG9hZC5lbGVtZW50OwogIHZhciBwYWdlSW5kZXggPSBnZXRQYWdlSW5kZXhCeUlkKHdvcmtwYWRTdGF0ZSwgcGFnZUlkKTsKCiAgaWYgKHBhZ2VJbmRleCA8IDApIHsKICAgIHJldHVybiB3b3JrcGFkU3RhdGU7CiAgfQoKICBpZiAoIC8vIGRvbid0IGFkZCBhIGdyb3VwIHRoYXQgaXMgYWxyZWFkeSBwZXJzaXN0ZWQKICB3b3JrcGFkU3RhdGUucGFnZXNbcGFnZUluZGV4XVtnZXRMb2NhdGlvbihlbGVtZW50LnBvc2l0aW9uLnR5cGUpXS5maW5kKGZ1bmN0aW9uIChlKSB7CiAgICByZXR1cm4gZS5pZCA9PT0gZWxlbWVudC5pZDsKICB9KSkgewogICAgcmV0dXJuIHdvcmtwYWRTdGF0ZTsKICB9CgogIHJldHVybiBwdXNoKHdvcmtwYWRTdGF0ZSwgInBhZ2VzLiIuY29uY2F0KHBhZ2VJbmRleCwgIi4iKS5jb25jYXQoZ2V0TG9jYXRpb24oZWxlbWVudC5wb3NpdGlvbi50eXBlKSksIHRyaW1FbGVtZW50KGVsZW1lbnQpKTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfaGFuZGxlQWN0aW9ucywgYWN0aW9ucy5pbnNlcnROb2RlcywgZnVuY3Rpb24gKHdvcmtwYWRTdGF0ZSwgX3JlZjkpIHsKICB2YXIgX3JlZjkkcGF5bG9hZCA9IF9yZWY5LnBheWxvYWQsCiAgICAgIHBhZ2VJZCA9IF9yZWY5JHBheWxvYWQucGFnZUlkLAogICAgICBlbGVtZW50cyA9IF9yZWY5JHBheWxvYWQuZWxlbWVudHM7CiAgdmFyIHBhZ2VJbmRleCA9IGdldFBhZ2VJbmRleEJ5SWQod29ya3BhZFN0YXRlLCBwYWdlSWQpOwoKICBpZiAocGFnZUluZGV4IDwgMCkgewogICAgcmV0dXJuIHdvcmtwYWRTdGF0ZTsKICB9CgogIHJldHVybiBlbGVtZW50cy5yZWR1Y2UoZnVuY3Rpb24gKHN0YXRlLCBlbGVtZW50KSB7CiAgICByZXR1cm4gcHVzaChzdGF0ZSwgInBhZ2VzLiIuY29uY2F0KHBhZ2VJbmRleCwgIi4iKS5jb25jYXQoZ2V0TG9jYXRpb24oZWxlbWVudC5wb3NpdGlvbi50eXBlKSksIHRyaW1FbGVtZW50KGVsZW1lbnQpKTsKICB9LCB3b3JrcGFkU3RhdGUpOwp9KSwgX2RlZmluZVByb3BlcnR5KF9oYW5kbGVBY3Rpb25zLCBhY3Rpb25zLnJlbW92ZUVsZW1lbnRzLCBmdW5jdGlvbiAod29ya3BhZFN0YXRlLCBfcmVmMTApIHsKICB2YXIgX3JlZjEwJHBheWxvYWQgPSBfcmVmMTAucGF5bG9hZCwKICAgICAgcGFnZUlkID0gX3JlZjEwJHBheWxvYWQucGFnZUlkLAogICAgICBlbGVtZW50SWRzID0gX3JlZjEwJHBheWxvYWQuZWxlbWVudElkczsKICB2YXIgcGFnZUluZGV4ID0gZ2V0UGFnZUluZGV4QnlJZCh3b3JrcGFkU3RhdGUsIHBhZ2VJZCk7CgogIGlmIChwYWdlSW5kZXggPCAwKSB7CiAgICByZXR1cm4gd29ya3BhZFN0YXRlOwogIH0KCiAgdmFyIG5vZGVJbmRpY2VzID0gZWxlbWVudElkcy5maWx0ZXIoZmlyc3RPY2N1cnJlbmNlKS5tYXAoZnVuY3Rpb24gKG5vZGVJZCkgewogICAgdmFyIGxvY2F0aW9uID0gZ2V0TG9jYXRpb25Gcm9tSWRzKHdvcmtwYWRTdGF0ZSwgcGFnZUlkLCBub2RlSWQpOwogICAgcmV0dXJuIHsKICAgICAgbG9jYXRpb246IGxvY2F0aW9uLAogICAgICBpbmRleDogZ2V0Tm9kZUluZGV4QnlJZCh3b3JrcGFkU3RhdGUucGFnZXNbcGFnZUluZGV4XSwgbm9kZUlkLCBsb2NhdGlvbikKICAgIH07CiAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgcmV0dXJuIGIuaW5kZXggLSBhLmluZGV4OwogIH0pOyAvLyBkZWxldGluZyBmcm9tIGVuZCB0b3dhcmQgYmVnaW5uaW5nLCBvdGhlcndpc2UgaW5kaWNlcyB3aWxsIGJlY29tZSBvZmYgLSB0b2RvIGZ1c2UgbG9vcHMhCgogIHJldHVybiBub2RlSW5kaWNlcy5yZWR1Y2UoZnVuY3Rpb24gKHN0YXRlLCBfcmVmMTEpIHsKICAgIHZhciBsb2NhdGlvbiA9IF9yZWYxMS5sb2NhdGlvbiwKICAgICAgICBpbmRleCA9IF9yZWYxMS5pbmRleDsKICAgIHJldHVybiBkZWwoc3RhdGUsICJwYWdlcy4iLmNvbmNhdChwYWdlSW5kZXgsICIuIikuY29uY2F0KGxvY2F0aW9uLCAiLiIpLmNvbmNhdChpbmRleCkpOwogIH0sIHdvcmtwYWRTdGF0ZSk7Cn0pLCBfaGFuZGxlQWN0aW9ucyksIHt9KTsKZXhwb3J0cy5lbGVtZW50c1JlZHVjZXIgPSBlbGVtZW50c1JlZHVjZXI7"},null]}