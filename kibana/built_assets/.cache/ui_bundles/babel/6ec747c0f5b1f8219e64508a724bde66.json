{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/timelion/public/directives/timelion_expression_input.js","dependencies":[{"path":"src/legacy/core_plugins/timelion/public/directives/timelion_expression_input.js","mtime":1589249549926},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlRpbWVsaW9uRXhwSW5wdXQgPSBUaW1lbGlvbkV4cElucHV0OwoKdmFyIF9sb2Rhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxvZGFzaCIpKTsKCnZhciBfanF1ZXJ5ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJqcXVlcnkiKSk7Cgp2YXIgX3BlZ2pzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJwZWdqcyIpKTsKCnZhciBfY2hhaW4gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInJhdy1sb2FkZXIhLi4vLi4vLi4vLi4vLi4vcGx1Z2lucy90aW1lbGlvbi9jb21tb24vY2hhaW4ucGVnIikpOwoKdmFyIF90aW1lbGlvbl9leHByZXNzaW9uX2lucHV0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL3RpbWVsaW9uX2V4cHJlc3Npb25faW5wdXQuaHRtbCIpKTsKCnZhciBfdGltZWxpb25fZXhwcmVzc2lvbl9pbnB1dF9oZWxwZXJzID0gcmVxdWlyZSgiLi90aW1lbGlvbl9leHByZXNzaW9uX2lucHV0X2hlbHBlcnMiKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX2FyZ192YWx1ZV9zdWdnZXN0aW9ucyA9IHJlcXVpcmUoIi4uLy4uLy4uL3Zpc190eXBlX3RpbWVsaW9uL3B1YmxpYy9oZWxwZXJzL2FyZ192YWx1ZV9zdWdnZXN0aW9ucyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9Cgp2YXIgUGFyc2VyID0gX3BlZ2pzLmRlZmF1bHQuZ2VuZXJhdGUoX2NoYWluLmRlZmF1bHQpOwoKZnVuY3Rpb24gVGltZWxpb25FeHBJbnB1dCgkaHR0cCwgJHRpbWVvdXQpIHsKICByZXR1cm4gewogICAgcmVzdHJpY3Q6ICdFJywKICAgIHNjb3BlOiB7CiAgICAgIHJvd3M6ICc9JywKICAgICAgc2hlZXQ6ICc9JywKICAgICAgdXBkYXRlQ2hhcnQ6ICcmJywKICAgICAgc2hvdWxkUG9wb3ZlclN1Z2dlc3Rpb25zOiAnQCcKICAgIH0sCiAgICByZXBsYWNlOiB0cnVlLAogICAgdGVtcGxhdGU6IF90aW1lbGlvbl9leHByZXNzaW9uX2lucHV0LmRlZmF1bHQsCiAgICBsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtKSB7CiAgICAgIHZhciBhcmdWYWx1ZVN1Z2dlc3Rpb25zID0gKDAsIF9hcmdfdmFsdWVfc3VnZ2VzdGlvbnMuZ2V0QXJnVmFsdWVTdWdnZXN0aW9ucykoKTsKICAgICAgdmFyIGV4cHJlc3Npb25JbnB1dCA9IGVsZW0uZmluZCgnW2RhdGEtZXhwcmVzc2lvbi1pbnB1dF0nKTsKICAgICAgdmFyIGZ1bmN0aW9uUmVmZXJlbmNlID0ge307CiAgICAgIHZhciBzdWdnZXN0aWJsZUZ1bmN0aW9uTG9jYXRpb24gPSB7fTsKICAgICAgc2NvcGUuc3VnZ2VzdGlvbnMgPSBuZXcgX3RpbWVsaW9uX2V4cHJlc3Npb25faW5wdXRfaGVscGVycy5TdWdnZXN0aW9ucygpOwoKICAgICAgZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgICAkaHR0cC5nZXQoJy4uL2FwaS90aW1lbGlvbi9mdW5jdGlvbnMnKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICBPYmplY3QuYXNzaWduKGZ1bmN0aW9uUmVmZXJlbmNlLCB7CiAgICAgICAgICAgIGJ5TmFtZTogX2xvZGFzaC5kZWZhdWx0LmluZGV4QnkocmVzcC5kYXRhLCAnbmFtZScpLAogICAgICAgICAgICBsaXN0OiByZXNwLmRhdGEKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBmdW5jdGlvbiBzZXRDYXJldE9mZnNldChjYXJldE9mZnNldCkgewogICAgICAgIC8vIFdhaXQgZm9yIEFuZ3VsYXIgdG8gdXBkYXRlIHRoZSBpbnB1dCB3aXRoIHRoZSBuZXcgZXhwcmVzc2lvbiBhbmQgKnRoZW4qIHdlIGNhbiBzZXQKICAgICAgICAvLyB0aGUgY2FyZXQgcG9zaXRpb24uCiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgZXhwcmVzc2lvbklucHV0LmZvY3VzKCk7CiAgICAgICAgICBleHByZXNzaW9uSW5wdXRbMF0uc2VsZWN0aW9uU3RhcnQgPSBleHByZXNzaW9uSW5wdXRbMF0uc2VsZWN0aW9uRW5kID0gY2FyZXRPZmZzZXQ7CiAgICAgICAgICBzY29wZS4kYXBwbHkoKTsKICAgICAgICB9LCAwKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gaW5zZXJ0U3VnZ2VzdGlvbkludG9FeHByZXNzaW9uKHN1Z2dlc3Rpb25JbmRleCkgewogICAgICAgIGlmIChzY29wZS5zdWdnZXN0aW9ucy5pc0VtcHR5KCkpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBfc3VnZ2VzdGlibGVGdW5jdGlvbkwgPSBzdWdnZXN0aWJsZUZ1bmN0aW9uTG9jYXRpb24sCiAgICAgICAgICAgIG1pbiA9IF9zdWdnZXN0aWJsZUZ1bmN0aW9uTC5taW4sCiAgICAgICAgICAgIG1heCA9IF9zdWdnZXN0aWJsZUZ1bmN0aW9uTC5tYXg7CiAgICAgICAgdmFyIGluc2VydGVkVmFsdWU7CiAgICAgICAgdmFyIGluc2VydFBvc2l0aW9uTWluT2Zmc2V0ID0gMDsKCiAgICAgICAgc3dpdGNoIChzY29wZS5zdWdnZXN0aW9ucy50eXBlKSB7CiAgICAgICAgICBjYXNlIF90aW1lbGlvbl9leHByZXNzaW9uX2lucHV0X2hlbHBlcnMuU1VHR0VTVElPTl9UWVBFLkZVTkNUSU9OUzoKICAgICAgICAgICAgewogICAgICAgICAgICAgIC8vIFBvc2l0aW9uIHRoZSBjYXJldCBpbnNpZGUgb2YgdGhlIGZ1bmN0aW9uIHBhcmVudGhlc2VzLgogICAgICAgICAgICAgIGluc2VydGVkVmFsdWUgPSAiIi5jb25jYXQoc2NvcGUuc3VnZ2VzdGlvbnMubGlzdFtzdWdnZXN0aW9uSW5kZXhdLm5hbWUsICIoKSIpOyAvLyBtaW4gYWR2YW5jZWQgb25lIHRvIG5vdCByZXBsYWNlIGZ1bmN0aW9uICcuJwoKICAgICAgICAgICAgICBpbnNlcnRQb3NpdGlvbk1pbk9mZnNldCA9IDE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICBjYXNlIF90aW1lbGlvbl9leHByZXNzaW9uX2lucHV0X2hlbHBlcnMuU1VHR0VTVElPTl9UWVBFLkFSR1VNRU5UUzoKICAgICAgICAgICAgewogICAgICAgICAgICAgIC8vIFBvc2l0aW9uIHRoZSBjYXJldCBhZnRlciB0aGUgJz0nCiAgICAgICAgICAgICAgaW5zZXJ0ZWRWYWx1ZSA9ICIiLmNvbmNhdChzY29wZS5zdWdnZXN0aW9ucy5saXN0W3N1Z2dlc3Rpb25JbmRleF0ubmFtZSwgIj0iKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgX3RpbWVsaW9uX2V4cHJlc3Npb25faW5wdXRfaGVscGVycy5TVUdHRVNUSU9OX1RZUEUuQVJHVU1FTlRfVkFMVUU6CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAvLyBQb3NpdGlvbiB0aGUgY2FyZXQgYWZ0ZXIgdGhlIGFyZ3VtZW50IHZhbHVlCiAgICAgICAgICAgICAgaW5zZXJ0ZWRWYWx1ZSA9ICIiLmNvbmNhdChzY29wZS5zdWdnZXN0aW9ucy5saXN0W3N1Z2dlc3Rpb25JbmRleF0ubmFtZSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciB1cGRhdGVkRXhwcmVzc2lvbiA9ICgwLCBfdGltZWxpb25fZXhwcmVzc2lvbl9pbnB1dF9oZWxwZXJzLmluc2VydEF0TG9jYXRpb24pKGluc2VydGVkVmFsdWUsIHNjb3BlLnNoZWV0LCBtaW4gKyBpbnNlcnRQb3NpdGlvbk1pbk9mZnNldCwgbWF4KTsKICAgICAgICBzY29wZS5zaGVldCA9IHVwZGF0ZWRFeHByZXNzaW9uOwogICAgICAgIHZhciBuZXdDYXJldE9mZnNldCA9IG1pbiArIGluc2VydGVkVmFsdWUubGVuZ3RoOwogICAgICAgIHNldENhcmV0T2Zmc2V0KG5ld0NhcmV0T2Zmc2V0KTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gc2Nyb2xsVG9TdWdnZXN0aW9uQXQoaW5kZXgpIHsKICAgICAgICAvLyBXZSBkb24ndCBjYWNoZSB0aGVzZSBiZWNhdXNlIHRoZSBsaXN0IGNoYW5nZXMgYmFzZWQgb24gdXNlciBpbnB1dC4KICAgICAgICB2YXIgc3VnZ2VzdGlvbnNMaXN0ID0gKDAsIF9qcXVlcnkuZGVmYXVsdCkoJ1tkYXRhLXN1Z2dlc3Rpb25zLWxpc3RdJyk7CiAgICAgICAgdmFyIHN1Z2dlc3Rpb25MaXN0SXRlbSA9ICgwLCBfanF1ZXJ5LmRlZmF1bHQpKCdbZGF0YS1zdWdnZXN0aW9uLWxpc3QtaXRlbV0nKVtpbmRleF07IC8vIFNjcm9sbCB0byB0aGUgcG9zaXRpb24gb2YgdGhlIGl0ZW0gcmVsYXRpdmUgdG8gdGhlIGxpc3QsIG5vdCB0byB0aGUgd2luZG93LgoKICAgICAgICBzdWdnZXN0aW9uc0xpc3Quc2Nyb2xsVG9wKHN1Z2dlc3Rpb25MaXN0SXRlbS5vZmZzZXRUb3AgLSBzdWdnZXN0aW9uc0xpc3RbMF0ub2Zmc2V0VG9wKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZ2V0Q3Vyc29yUG9zaXRpb24oKSB7CiAgICAgICAgaWYgKGV4cHJlc3Npb25JbnB1dC5sZW5ndGgpIHsKICAgICAgICAgIHJldHVybiBleHByZXNzaW9uSW5wdXRbMF0uc2VsZWN0aW9uU3RhcnQ7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZ2V0U3VnZ2VzdGlvbnMoKSB7CiAgICAgICAgcmV0dXJuIF9nZXRTdWdnZXN0aW9ucy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBfZ2V0U3VnZ2VzdGlvbnMoKSB7CiAgICAgICAgX2dldFN1Z2dlc3Rpb25zID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgICAgLyojX19QVVJFX18qLwogICAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgICB2YXIgc3VnZ2VzdGlvbnM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIF90aW1lbGlvbl9leHByZXNzaW9uX2lucHV0X2hlbHBlcnMuc3VnZ2VzdCkoc2NvcGUuc2hlZXQsIGZ1bmN0aW9uUmVmZXJlbmNlLmxpc3QsIFBhcnNlciwgZ2V0Q3Vyc29yUG9zaXRpb24oKSwgYXJnVmFsdWVTdWdnZXN0aW9ucyk7CgogICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBzdWdnZXN0aW9ucyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAgIC8vIFdlJ3JlIHVzaW5nIEVTNiBQcm9taXNlcywgbm90ICRxLCBzbyB3ZSBoYXZlIHRvIHdyYXAgdGhpcyBpbiAkYXBwbHkuCiAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN1Z2dlc3Rpb25zKSB7CiAgICAgICAgICAgICAgICAgICAgICBzY29wZS5zdWdnZXN0aW9ucy5zZXRMaXN0KHN1Z2dlc3Rpb25zLmxpc3QsIHN1Z2dlc3Rpb25zLnR5cGUpOwogICAgICAgICAgICAgICAgICAgICAgc2NvcGUuc3VnZ2VzdGlvbnMuc2hvdygpOwogICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlibGVGdW5jdGlvbkxvY2F0aW9uID0gc3VnZ2VzdGlvbnMubG9jYXRpb247CiAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWdnZXN0aW9uc0xpc3QgPSAoMCwgX2pxdWVyeS5kZWZhdWx0KSgnW2RhdGEtc3VnZ2VzdGlvbnMtbGlzdF0nKTsKICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbnNMaXN0LnNjcm9sbFRvcCgwKTsKICAgICAgICAgICAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlibGVGdW5jdGlvbkxvY2F0aW9uID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgICAgIHNjb3BlLnN1Z2dlc3Rpb25zLnJlc2V0KCk7CiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICB9KSk7CiAgICAgICAgcmV0dXJuIF9nZXRTdWdnZXN0aW9ucy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBpc05hdmlnYXRpb25hbEtleShrZXlDb2RlKSB7CiAgICAgICAgdmFyIGtleUNvZGVzID0gX2xvZGFzaC5kZWZhdWx0LnZhbHVlcyhfZXVpLmNvbWJvQm94S2V5Q29kZXMpOwoKICAgICAgICByZXR1cm4ga2V5Q29kZXMuaW5jbHVkZXMoa2V5Q29kZSk7CiAgICAgIH0KCiAgICAgIHNjb3BlLm9uRm9jdXNJbnB1dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBXYWl0IGZvciB0aGUgY2FyZXQgcG9zaXRpb24gb2YgdGhlIGlucHV0IHRvIHVwZGF0ZSBhbmQgdGhlbiB3ZSBjYW4gZ2V0IHN1Z2dlc3Rpb25zCiAgICAgICAgLy8gKHdoaWNoIGRlcGVuZHMgb24gdGhlIGNhcmV0IHBvc2l0aW9uKS4KICAgICAgICAkdGltZW91dChnZXRTdWdnZXN0aW9ucywgMCk7CiAgICAgIH07CgogICAgICBzY29wZS5vbkJsdXJJbnB1dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBzY29wZS5zdWdnZXN0aW9ucy5oaWRlKCk7CiAgICAgIH07CgogICAgICBzY29wZS5vbktleURvd25JbnB1dCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgLy8gSWYgd2UndmUgcHJlc3NlZCBhbnkgbm9uLW5hdmlnYXRpb25hbCBrZXlzLCB0aGVuIHRoZSB1c2VyIGhhcyB0eXBlZCBzb21ldGhpbmcgYW5kIHdlCiAgICAgICAgLy8gY2FuIGV4aXQgZWFybHkgd2l0aG91dCBkb2luZyBhbnkgbmF2aWdhdGlvbi4gVGhlIGtleXVwIGhhbmRsZXIgd2lsbCBwdWxsIHVwIHN1Z2dlc3Rpb25zLgogICAgICAgIGlmICghaXNOYXZpZ2F0aW9uYWxLZXkoZS5rZXlDb2RlKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgc3dpdGNoIChlLmtleUNvZGUpIHsKICAgICAgICAgIGNhc2UgX2V1aS5jb21ib0JveEtleUNvZGVzLlVQOgogICAgICAgICAgICBpZiAoc2NvcGUuc3VnZ2VzdGlvbnMuaXNWaXNpYmxlKSB7CiAgICAgICAgICAgICAgLy8gVXAgYW5kIGRvd24ga2V5cyBuYXZpZ2F0ZSB0aHJvdWdoIHN1Z2dlc3Rpb25zLgogICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICBzY29wZS5zdWdnZXN0aW9ucy5zdGVwRm9yd2FyZCgpOwogICAgICAgICAgICAgIHNjcm9sbFRvU3VnZ2VzdGlvbkF0KHNjb3BlLnN1Z2dlc3Rpb25zLmluZGV4KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSBfZXVpLmNvbWJvQm94S2V5Q29kZXMuRE9XTjoKICAgICAgICAgICAgaWYgKHNjb3BlLnN1Z2dlc3Rpb25zLmlzVmlzaWJsZSkgewogICAgICAgICAgICAgIC8vIFVwIGFuZCBkb3duIGtleXMgbmF2aWdhdGUgdGhyb3VnaCBzdWdnZXN0aW9ucy4KICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgc2NvcGUuc3VnZ2VzdGlvbnMuc3RlcEJhY2t3YXJkKCk7CiAgICAgICAgICAgICAgc2Nyb2xsVG9TdWdnZXN0aW9uQXQoc2NvcGUuc3VnZ2VzdGlvbnMuaW5kZXgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIF9ldWkuY29tYm9Cb3hLZXlDb2Rlcy5UQUI6CiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBzdWdnZXN0aW9ucyBvciBub25lIGlzIHNlbGVjdGVkLCB0aGUgdXNlciB0YWJzIHRvIHRoZSBuZXh0IGlucHV0LgogICAgICAgICAgICBpZiAoc2NvcGUuc3VnZ2VzdGlvbnMuaXNFbXB0eSgpIHx8IHNjb3BlLnN1Z2dlc3Rpb25zLmluZGV4IDwgMCkgewogICAgICAgICAgICAgIC8vIEJlZm9yZSBsZXR0aW5nIHRoZSB0YWIgYmUgaGFuZGxlZCB0byBmb2N1cyB0aGUgbmV4dCBlbGVtZW50CiAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBoaWRlIHRoZSBzdWdnZXN0aW9ucywgb3RoZXJ3aXNlIGl0IHdpbGwgZm9jdXMgdGhlc2UKICAgICAgICAgICAgICAvLyBpbnN0ZWFkIG9mIHRoZSB0aW1lIGludGVydmFsIHNlbGVjdC4KICAgICAgICAgICAgICBzY29wZS5zdWdnZXN0aW9ucy5oaWRlKCk7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IC8vIElmIHdlIGhhdmUgc3VnZ2VzdGlvbnMsIGNvbXBsZXRlIHRoZSBzZWxlY3RlZCBvbmUuCgoKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBpbnNlcnRTdWdnZXN0aW9uSW50b0V4cHJlc3Npb24oc2NvcGUuc3VnZ2VzdGlvbnMuaW5kZXgpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIF9ldWkuY29tYm9Cb3hLZXlDb2Rlcy5FTlRFUjoKICAgICAgICAgICAgaWYgKGUubWV0YUtleSB8fCBlLmN0cmxLZXkpIHsKICAgICAgICAgICAgICAvLyBSZS1yZW5kZXIgdGhlIGNoYXJ0IHdoZW4gdGhlIHVzZXIgaGl0cyBDTUQrRU5URVIuCiAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgIHNjb3BlLnVwZGF0ZUNoYXJ0KCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXNjb3BlLnN1Z2dlc3Rpb25zLmlzRW1wdHkoKSkgewogICAgICAgICAgICAgIC8vIElmIHRoZSBzdWdnZXN0aW9ucyBhcmUgb3BlbiwgY29tcGxldGUgdGhlIGV4cHJlc3Npb24gd2l0aCB0aGUgc3VnZ2VzdGlvbi4KICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgaW5zZXJ0U3VnZ2VzdGlvbkludG9FeHByZXNzaW9uKHNjb3BlLnN1Z2dlc3Rpb25zLmluZGV4KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSBfZXVpLmNvbWJvQm94S2V5Q29kZXMuRVNDQVBFOgogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIHNjb3BlLnN1Z2dlc3Rpb25zLmhpZGUoKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgc2NvcGUub25LZXlVcElucHV0ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAvLyBJZiB0aGUgdXNlciBpc24ndCBuYXZpZ2F0aW5nLCB0aGVuIHdlIHNob3VsZCB1cGRhdGUgdGhlIHN1Z2dlc3Rpb25zIGJhc2VkIG9uIHRoZWlyIGlucHV0LgogICAgICAgIGlmICghaXNOYXZpZ2F0aW9uYWxLZXkoZS5rZXlDb2RlKSkgewogICAgICAgICAgZ2V0U3VnZ2VzdGlvbnMoKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBzY29wZS5vbkNsaWNrRXhwcmVzc2lvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBnZXRTdWdnZXN0aW9ucygpOwogICAgICB9OwoKICAgICAgc2NvcGUub25DbGlja1N1Z2dlc3Rpb24gPSBmdW5jdGlvbiAoaW5kZXgpIHsKICAgICAgICBpbnNlcnRTdWdnZXN0aW9uSW50b0V4cHJlc3Npb24oaW5kZXgpOwogICAgICB9OwoKICAgICAgc2NvcGUuZ2V0QWN0aXZlU3VnZ2VzdGlvbklkID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChzY29wZS5zdWdnZXN0aW9ucy5pc1Zpc2libGUgJiYgc2NvcGUuc3VnZ2VzdGlvbnMuaW5kZXggPiAtMSkgewogICAgICAgICAgcmV0dXJuICJ0aW1lbGlvblN1Z2dlc3Rpb24iLmNvbmNhdChzY29wZS5zdWdnZXN0aW9ucy5pbmRleCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH07CgogICAgICBpbml0KCk7CiAgICB9CiAgfTsKfQ=="},null]}