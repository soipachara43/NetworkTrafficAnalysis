{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/plugins/triggers_actions_ui/public/application/components/builtin_action_types/email.js","dependencies":[{"path":"x-pack/plugins/triggers_actions_ui/public/application/components/builtin_action_types/email.js","mtime":1589249555541},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmdldEFjdGlvblR5cGUgPSBnZXRBY3Rpb25UeXBlOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9yZWFjdDIgPSByZXF1aXJlKCJAa2JuL2kxOG4vcmVhY3QiKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfYWRkX21lc3NhZ2VfdmFyaWFibGVzID0gcmVxdWlyZSgiLi4vYWRkX21lc3NhZ2VfdmFyaWFibGVzIik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsKICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7CiAgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7CiAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICBhcnIyW2ldID0gYXJyW2ldOwogICAgfQoKICAgIHJldHVybiBhcnIyOwogIH0KfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKZnVuY3Rpb24gZ2V0QWN0aW9uVHlwZSgpIHsKICB2YXIgbWFpbGZvcm1hdCA9IC9eW15AXHNdK0BbXkBcc10rJC87CiAgcmV0dXJuIHsKICAgIGlkOiAnLmVtYWlsJywKICAgIGljb25DbGFzczogJ2VtYWlsJywKICAgIHNlbGVjdE1lc3NhZ2U6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmlnZ2Vyc0FjdGlvbnNVSS5jb21wb25lbnRzLmJ1aWx0aW5BY3Rpb25UeXBlcy5lbWFpbEFjdGlvbi5zZWxlY3RNZXNzYWdlVGV4dCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTZW5kIGVtYWlsIGZyb20geW91ciBzZXJ2ZXIuJwogICAgfSksCiAgICBhY3Rpb25UeXBlVGl0bGU6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmlnZ2Vyc0FjdGlvbnNVSS5jb21wb25lbnRzLmJ1aWx0aW5BY3Rpb25UeXBlcy5lbWFpbEFjdGlvbi5hY3Rpb25UeXBlVGl0bGUnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU2VuZCB0byBlbWFpbCcKICAgIH0pLAogICAgdmFsaWRhdGVDb25uZWN0b3I6IGZ1bmN0aW9uIHZhbGlkYXRlQ29ubmVjdG9yKGFjdGlvbikgewogICAgICB2YXIgdmFsaWRhdGlvblJlc3VsdCA9IHsKICAgICAgICBlcnJvcnM6IHt9CiAgICAgIH07CiAgICAgIHZhciBlcnJvcnMgPSB7CiAgICAgICAgZnJvbTogbmV3IEFycmF5KCksCiAgICAgICAgcG9ydDogbmV3IEFycmF5KCksCiAgICAgICAgaG9zdDogbmV3IEFycmF5KCksCiAgICAgICAgdXNlcjogbmV3IEFycmF5KCksCiAgICAgICAgcGFzc3dvcmQ6IG5ldyBBcnJheSgpCiAgICAgIH07CiAgICAgIHZhbGlkYXRpb25SZXN1bHQuZXJyb3JzID0gZXJyb3JzOwoKICAgICAgaWYgKCFhY3Rpb24uY29uZmlnLmZyb20pIHsKICAgICAgICBlcnJvcnMuZnJvbS5wdXNoKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmlnZ2Vyc0FjdGlvbnNVSS5jb21wb25lbnRzLmJ1aWx0aW5BY3Rpb25UeXBlcy5lcnJvci5yZXF1aXJlZEZyb21UZXh0JywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTZW5kZXIgaXMgcmVxdWlyZWQuJwogICAgICAgIH0pKTsKICAgICAgfQoKICAgICAgaWYgKGFjdGlvbi5jb25maWcuZnJvbSAmJiAhYWN0aW9uLmNvbmZpZy5mcm9tLnRyaW0oKS5tYXRjaChtYWlsZm9ybWF0KSkgewogICAgICAgIGVycm9ycy5mcm9tLnB1c2goX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLmNvbXBvbmVudHMuYnVpbHRpbkFjdGlvblR5cGVzLmVycm9yLmZvcm1hdEZyb21UZXh0JywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTZW5kZXIgaXMgbm90IGEgdmFsaWQgZW1haWwgYWRkcmVzcy4nCiAgICAgICAgfSkpOwogICAgICB9CgogICAgICBpZiAoIWFjdGlvbi5jb25maWcucG9ydCkgewogICAgICAgIGVycm9ycy5wb3J0LnB1c2goX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLmNvbXBvbmVudHMuYnVpbHRpbkFjdGlvblR5cGVzLmVycm9yLnJlcXVpcmVkUG9ydFRleHQnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1BvcnQgaXMgcmVxdWlyZWQuJwogICAgICAgIH0pKTsKICAgICAgfQoKICAgICAgaWYgKCFhY3Rpb24uY29uZmlnLmhvc3QpIHsKICAgICAgICBlcnJvcnMuaG9zdC5wdXNoKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmlnZ2Vyc0FjdGlvbnNVSS5jb21wb25lbnRzLmJ1aWx0aW5BY3Rpb25UeXBlcy5lcnJvci5yZXF1aXJlZEhvc3RUZXh0JywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdIb3N0IGlzIHJlcXVpcmVkLicKICAgICAgICB9KSk7CiAgICAgIH0KCiAgICAgIGlmIChhY3Rpb24uc2VjcmV0cy51c2VyICYmICFhY3Rpb24uc2VjcmV0cy5wYXNzd29yZCkgewogICAgICAgIGVycm9ycy5wYXNzd29yZC5wdXNoKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmlnZ2Vyc0FjdGlvbnNVSS5jb21wb25lbnRzLmJ1aWx0aW5BY3Rpb25UeXBlcy5lcnJvci5yZXF1aXJlZFBhc3N3b3JkVGV4dCcsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUGFzc3dvcmQgaXMgcmVxdWlyZWQgd2hlbiB1c2VybmFtZSBpcyB1c2VkLicKICAgICAgICB9KSk7CiAgICAgIH0KCiAgICAgIGlmICghYWN0aW9uLnNlY3JldHMudXNlciAmJiBhY3Rpb24uc2VjcmV0cy5wYXNzd29yZCkgewogICAgICAgIGVycm9ycy51c2VyLnB1c2goX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLmNvbXBvbmVudHMuYnVpbHRpbkFjdGlvblR5cGVzLmVycm9yLnJlcXVpcmVkVXNlclRleHQnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1VzZXJuYW1lIGlzIHJlcXVpcmVkIHdoZW4gcGFzc3dvcmQgaXMgdXNlZC4nCiAgICAgICAgfSkpOwogICAgICB9CgogICAgICByZXR1cm4gdmFsaWRhdGlvblJlc3VsdDsKICAgIH0sCiAgICB2YWxpZGF0ZVBhcmFtczogZnVuY3Rpb24gdmFsaWRhdGVQYXJhbXMoYWN0aW9uUGFyYW1zKSB7CiAgICAgIHZhciBfYWN0aW9uUGFyYW1zJG1lc3NhZ2UsIF9hY3Rpb25QYXJhbXMkc3ViamVjdDsKCiAgICAgIHZhciB2YWxpZGF0aW9uUmVzdWx0ID0gewogICAgICAgIGVycm9yczoge30KICAgICAgfTsKICAgICAgdmFyIGVycm9ycyA9IHsKICAgICAgICB0bzogbmV3IEFycmF5KCksCiAgICAgICAgY2M6IG5ldyBBcnJheSgpLAogICAgICAgIGJjYzogbmV3IEFycmF5KCksCiAgICAgICAgbWVzc2FnZTogbmV3IEFycmF5KCksCiAgICAgICAgc3ViamVjdDogbmV3IEFycmF5KCkKICAgICAgfTsKICAgICAgdmFsaWRhdGlvblJlc3VsdC5lcnJvcnMgPSBlcnJvcnM7CgogICAgICBpZiAoKCEoYWN0aW9uUGFyYW1zLnRvIGluc3RhbmNlb2YgQXJyYXkpIHx8IGFjdGlvblBhcmFtcy50by5sZW5ndGggPT09IDApICYmICghKGFjdGlvblBhcmFtcy5jYyBpbnN0YW5jZW9mIEFycmF5KSB8fCBhY3Rpb25QYXJhbXMuY2MubGVuZ3RoID09PSAwKSAmJiAoIShhY3Rpb25QYXJhbXMuYmNjIGluc3RhbmNlb2YgQXJyYXkpIHx8IGFjdGlvblBhcmFtcy5iY2MubGVuZ3RoID09PSAwKSkgewogICAgICAgIHZhciBlcnJvclRleHQgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJpZ2dlcnNBY3Rpb25zVUkuY29tcG9uZW50cy5idWlsdGluQWN0aW9uVHlwZXMuZXJyb3IucmVxdWlyZWRFbnRyeVRleHQnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ05vIFRvLCBDYywgb3IgQmNjIGVudHJ5LiAgQXQgbGVhc3Qgb25lIGVudHJ5IGlzIHJlcXVpcmVkLicKICAgICAgICB9KTsKCiAgICAgICAgZXJyb3JzLnRvLnB1c2goZXJyb3JUZXh0KTsKICAgICAgICBlcnJvcnMuY2MucHVzaChlcnJvclRleHQpOwogICAgICAgIGVycm9ycy5iY2MucHVzaChlcnJvclRleHQpOwogICAgICB9CgogICAgICBpZiAoISgoX2FjdGlvblBhcmFtcyRtZXNzYWdlID0gYWN0aW9uUGFyYW1zLm1lc3NhZ2UpID09PSBudWxsIHx8IF9hY3Rpb25QYXJhbXMkbWVzc2FnZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FjdGlvblBhcmFtcyRtZXNzYWdlLmxlbmd0aCkpIHsKICAgICAgICBlcnJvcnMubWVzc2FnZS5wdXNoKF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay50cmlnZ2Vyc0FjdGlvbnNVSS5jb21wb25lbnRzLmJ1aWx0aW5BY3Rpb25UeXBlcy5lcnJvci5yZXF1aXJlZE1lc3NhZ2VUZXh0JywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdNZXNzYWdlIGlzIHJlcXVpcmVkLicKICAgICAgICB9KSk7CiAgICAgIH0KCiAgICAgIGlmICghKChfYWN0aW9uUGFyYW1zJHN1YmplY3QgPSBhY3Rpb25QYXJhbXMuc3ViamVjdCkgPT09IG51bGwgfHwgX2FjdGlvblBhcmFtcyRzdWJqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYWN0aW9uUGFyYW1zJHN1YmplY3QubGVuZ3RoKSkgewogICAgICAgIGVycm9ycy5zdWJqZWN0LnB1c2goX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLmNvbXBvbmVudHMuYnVpbHRpbkFjdGlvblR5cGVzLmVycm9yLnJlcXVpcmVkU3ViamVjdFRleHQnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1N1YmplY3QgaXMgcmVxdWlyZWQuJwogICAgICAgIH0pKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbGlkYXRpb25SZXN1bHQ7CiAgICB9LAogICAgYWN0aW9uQ29ubmVjdG9yRmllbGRzOiBFbWFpbEFjdGlvbkNvbm5lY3RvckZpZWxkcywKICAgIGFjdGlvblBhcmFtc0ZpZWxkczogRW1haWxQYXJhbXNGaWVsZHMKICB9Owp9Cgp2YXIgRW1haWxBY3Rpb25Db25uZWN0b3JGaWVsZHMgPSBmdW5jdGlvbiBFbWFpbEFjdGlvbkNvbm5lY3RvckZpZWxkcyhfcmVmKSB7CiAgdmFyIGFjdGlvbiA9IF9yZWYuYWN0aW9uLAogICAgICBlZGl0QWN0aW9uQ29uZmlnID0gX3JlZi5lZGl0QWN0aW9uQ29uZmlnLAogICAgICBlZGl0QWN0aW9uU2VjcmV0cyA9IF9yZWYuZWRpdEFjdGlvblNlY3JldHMsCiAgICAgIGVycm9ycyA9IF9yZWYuZXJyb3JzOwogIHZhciBfYWN0aW9uJGNvbmZpZyA9IGFjdGlvbi5jb25maWcsCiAgICAgIGZyb20gPSBfYWN0aW9uJGNvbmZpZy5mcm9tLAogICAgICBob3N0ID0gX2FjdGlvbiRjb25maWcuaG9zdCwKICAgICAgcG9ydCA9IF9hY3Rpb24kY29uZmlnLnBvcnQsCiAgICAgIHNlY3VyZSA9IF9hY3Rpb24kY29uZmlnLnNlY3VyZTsKICB2YXIgX2FjdGlvbiRzZWNyZXRzID0gYWN0aW9uLnNlY3JldHMsCiAgICAgIHVzZXIgPSBfYWN0aW9uJHNlY3JldHMudXNlciwKICAgICAgcGFzc3dvcmQgPSBfYWN0aW9uJHNlY3JldHMucGFzc3dvcmQ7CiAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEdyb3VwLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICBpZDogImZyb20iLAogICAgZnVsbFdpZHRoOiB0cnVlLAogICAgZXJyb3I6IGVycm9ycy5mcm9tLAogICAgaXNJbnZhbGlkOiBlcnJvcnMuZnJvbS5sZW5ndGggPiAwICYmIGZyb20gIT09IHVuZGVmaW5lZCwKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJpZ2dlcnNBY3Rpb25zVUkuc2VjdGlvbnMuYnVpbHRpbkFjdGlvblR5cGVzLmVtYWlsQWN0aW9uLmZyb21UZXh0RmllbGRMYWJlbCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTZW5kZXInCiAgICB9KQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGaWVsZFRleHQsIHsKICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgIGlzSW52YWxpZDogZXJyb3JzLmZyb20ubGVuZ3RoID4gMCAmJiBmcm9tICE9PSB1bmRlZmluZWQsCiAgICBuYW1lOiAiZnJvbSIsCiAgICB2YWx1ZTogZnJvbSB8fCAnJywKICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJlbWFpbEZyb21JbnB1dCIsCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICBlZGl0QWN0aW9uQ29uZmlnKCdmcm9tJywgZS50YXJnZXQudmFsdWUpOwogICAgfSwKICAgIG9uQmx1cjogZnVuY3Rpb24gb25CbHVyKCkgewogICAgICBpZiAoIWZyb20pIHsKICAgICAgICBlZGl0QWN0aW9uQ29uZmlnKCdmcm9tJywgJycpOwogICAgICB9CiAgICB9CiAgfSkpKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgIGp1c3RpZnlDb250ZW50OiAic3BhY2VCZXR3ZWVuIgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgIGlkOiAiZW1haWxIb3N0IiwKICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgIGVycm9yOiBlcnJvcnMuaG9zdCwKICAgIGlzSW52YWxpZDogZXJyb3JzLmhvc3QubGVuZ3RoID4gMCAmJiBob3N0ICE9PSB1bmRlZmluZWQsCiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLnNlY3Rpb25zLmJ1aWx0aW5BY3Rpb25UeXBlcy5lbWFpbEFjdGlvbi5ob3N0VGV4dEZpZWxkTGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnSG9zdCcKICAgIH0pCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZpZWxkVGV4dCwgewogICAgZnVsbFdpZHRoOiB0cnVlLAogICAgaXNJbnZhbGlkOiBlcnJvcnMuaG9zdC5sZW5ndGggPiAwICYmIGhvc3QgIT09IHVuZGVmaW5lZCwKICAgIG5hbWU6ICJob3N0IiwKICAgIHZhbHVlOiBob3N0IHx8ICcnLAogICAgImRhdGEtdGVzdC1zdWJqIjogImVtYWlsSG9zdElucHV0IiwKICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7CiAgICAgIGVkaXRBY3Rpb25Db25maWcoJ2hvc3QnLCBlLnRhcmdldC52YWx1ZSk7CiAgICB9LAogICAgb25CbHVyOiBmdW5jdGlvbiBvbkJsdXIoKSB7CiAgICAgIGlmICghaG9zdCkgewogICAgICAgIGVkaXRBY3Rpb25Db25maWcoJ2hvc3QnLCAnJyk7CiAgICAgIH0KICAgIH0KICB9KSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgIGp1c3RpZnlDb250ZW50OiAic3BhY2VCZXR3ZWVuIgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgIGlkOiAiZW1haWxQb3J0IiwKICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgIHBsYWNlaG9sZGVyOiAiNTg3IiwKICAgIGVycm9yOiBlcnJvcnMucG9ydCwKICAgIGlzSW52YWxpZDogZXJyb3JzLnBvcnQubGVuZ3RoID4gMCAmJiBwb3J0ICE9PSB1bmRlZmluZWQsCiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLnNlY3Rpb25zLmJ1aWx0aW5BY3Rpb25UeXBlcy5lbWFpbEFjdGlvbi5wb3J0VGV4dEZpZWxkTGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUG9ydCcKICAgIH0pCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZpZWxkTnVtYmVyLCB7CiAgICBwcmVwZW5kOiAiOiIsCiAgICBpc0ludmFsaWQ6IGVycm9ycy5wb3J0Lmxlbmd0aCA+IDAgJiYgcG9ydCAhPT0gdW5kZWZpbmVkLAogICAgZnVsbFdpZHRoOiB0cnVlLAogICAgbmFtZTogInBvcnQiLAogICAgdmFsdWU6IHBvcnQgfHwgJycsCiAgICAiZGF0YS10ZXN0LXN1YmoiOiAiZW1haWxQb3J0SW5wdXQiLAogICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgZWRpdEFjdGlvbkNvbmZpZygncG9ydCcsIHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlLCAxMCkpOwogICAgfSwKICAgIG9uQmx1cjogZnVuY3Rpb24gb25CbHVyKCkgewogICAgICBpZiAoIXBvcnQpIHsKICAgICAgICBlZGl0QWN0aW9uQ29uZmlnKCdwb3J0JywgMCk7CiAgICAgIH0KICAgIH0KICB9KSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgIGhhc0VtcHR5TGFiZWxTcGFjZTogdHJ1ZQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTd2l0Y2gsIHsKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJpZ2dlcnNBY3Rpb25zVUkuc2VjdGlvbnMuYnVpbHRpbkFjdGlvblR5cGVzLmVtYWlsQWN0aW9uLnNlY3VyZVN3aXRjaExhYmVsJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ1NlY3VyZScKICAgIH0pLAogICAgY2hlY2tlZDogc2VjdXJlIHx8IGZhbHNlLAogICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgZWRpdEFjdGlvbkNvbmZpZygnc2VjdXJlJywgZS50YXJnZXQuY2hlY2tlZCk7CiAgICB9CiAgfSkpKSkpKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgIGp1c3RpZnlDb250ZW50OiAic3BhY2VCZXR3ZWVuIgogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgIGlkOiAiZW1haWxVc2VyIiwKICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgIGVycm9yOiBlcnJvcnMudXNlciwKICAgIGlzSW52YWxpZDogZXJyb3JzLnVzZXIubGVuZ3RoID4gMCwKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJpZ2dlcnNBY3Rpb25zVUkuc2VjdGlvbnMuYnVpbHRpbkFjdGlvblR5cGVzLmVtYWlsQWN0aW9uLnVzZXJUZXh0RmllbGRMYWJlbCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdVc2VybmFtZScKICAgIH0pCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZpZWxkVGV4dCwgewogICAgZnVsbFdpZHRoOiB0cnVlLAogICAgaXNJbnZhbGlkOiBlcnJvcnMudXNlci5sZW5ndGggPiAwLAogICAgbmFtZTogInVzZXIiLAogICAgdmFsdWU6IHVzZXIgfHwgJycsCiAgICAiZGF0YS10ZXN0LXN1YmoiOiAiZW1haWxVc2VySW5wdXQiLAogICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgZWRpdEFjdGlvblNlY3JldHMoJ3VzZXInLCBudWxsYWJsZVN0cmluZyhlLnRhcmdldC52YWx1ZSkpOwogICAgfQogIH0pKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgIGlkOiAiZW1haWxQYXNzd29yZCIsCiAgICBmdWxsV2lkdGg6IHRydWUsCiAgICBlcnJvcjogZXJyb3JzLnBhc3N3b3JkLAogICAgaXNJbnZhbGlkOiBlcnJvcnMucGFzc3dvcmQubGVuZ3RoID4gMCwKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJpZ2dlcnNBY3Rpb25zVUkuc2VjdGlvbnMuYnVpbHRpbkFjdGlvblR5cGVzLmVtYWlsQWN0aW9uLnBhc3N3b3JkRmllbGRMYWJlbCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdQYXNzd29yZCcKICAgIH0pCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZpZWxkUGFzc3dvcmQsIHsKICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgIGlzSW52YWxpZDogZXJyb3JzLnBhc3N3b3JkLmxlbmd0aCA+IDAsCiAgICBuYW1lOiAicGFzc3dvcmQiLAogICAgdmFsdWU6IHBhc3N3b3JkIHx8ICcnLAogICAgImRhdGEtdGVzdC1zdWJqIjogImVtYWlsUGFzc3dvcmRJbnB1dCIsCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICBlZGl0QWN0aW9uU2VjcmV0cygncGFzc3dvcmQnLCBudWxsYWJsZVN0cmluZyhlLnRhcmdldC52YWx1ZSkpOwogICAgfQogIH0pKSkpKTsKfTsKCnZhciBFbWFpbFBhcmFtc0ZpZWxkcyA9IGZ1bmN0aW9uIEVtYWlsUGFyYW1zRmllbGRzKF9yZWYyKSB7CiAgdmFyIGFjdGlvblBhcmFtcyA9IF9yZWYyLmFjdGlvblBhcmFtcywKICAgICAgZWRpdEFjdGlvbiA9IF9yZWYyLmVkaXRBY3Rpb24sCiAgICAgIGluZGV4ID0gX3JlZjIuaW5kZXgsCiAgICAgIGVycm9ycyA9IF9yZWYyLmVycm9ycywKICAgICAgbWVzc2FnZVZhcmlhYmxlcyA9IF9yZWYyLm1lc3NhZ2VWYXJpYWJsZXMsCiAgICAgIGRlZmF1bHRNZXNzYWdlID0gX3JlZjIuZGVmYXVsdE1lc3NhZ2U7CiAgdmFyIHRvID0gYWN0aW9uUGFyYW1zLnRvLAogICAgICBjYyA9IGFjdGlvblBhcmFtcy5jYywKICAgICAgYmNjID0gYWN0aW9uUGFyYW1zLmJjYywKICAgICAgc3ViamVjdCA9IGFjdGlvblBhcmFtcy5zdWJqZWN0LAogICAgICBtZXNzYWdlID0gYWN0aW9uUGFyYW1zLm1lc3NhZ2U7CiAgdmFyIHRvT3B0aW9ucyA9IHRvID8gdG8ubWFwKGZ1bmN0aW9uIChsYWJlbCkgewogICAgcmV0dXJuIHsKICAgICAgbGFiZWw6IGxhYmVsCiAgICB9OwogIH0pIDogW107CiAgdmFyIGNjT3B0aW9ucyA9IGNjID8gY2MubWFwKGZ1bmN0aW9uIChsYWJlbCkgewogICAgcmV0dXJuIHsKICAgICAgbGFiZWw6IGxhYmVsCiAgICB9OwogIH0pIDogW107CiAgdmFyIGJjY09wdGlvbnMgPSBiY2MgPyBiY2MubWFwKGZ1bmN0aW9uIChsYWJlbCkgewogICAgcmV0dXJuIHsKICAgICAgbGFiZWw6IGxhYmVsCiAgICB9OwogIH0pIDogW107CgogIHZhciBfdXNlU3RhdGUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShmYWxzZSksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBhZGRDQyA9IF91c2VTdGF0ZTJbMF0sCiAgICAgIHNldEFkZENDID0gX3VzZVN0YXRlMlsxXTsKCiAgdmFyIF91c2VTdGF0ZTMgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKShmYWxzZSksCiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSwKICAgICAgYWRkQkNDID0gX3VzZVN0YXRlNFswXSwKICAgICAgc2V0QWRkQkNDID0gX3VzZVN0YXRlNFsxXTsKCiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIGlmICghbWVzc2FnZSAmJiBkZWZhdWx0TWVzc2FnZSAmJiBkZWZhdWx0TWVzc2FnZS5sZW5ndGggPiAwKSB7CiAgICAgIGVkaXRBY3Rpb24oJ21lc3NhZ2UnLCBkZWZhdWx0TWVzc2FnZSwgaW5kZXgpOwogICAgfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzCgogIH0sIFtdKTsKCiAgdmFyIG9uU2VsZWN0TWVzc2FnZVZhcmlhYmxlID0gZnVuY3Rpb24gb25TZWxlY3RNZXNzYWdlVmFyaWFibGUocGFyYW1zUHJvcGVydHksIHZhcmlhYmxlKSB7CiAgICB2YXIgX3BhcmFtc1Byb3BlcnR5OwoKICAgIGVkaXRBY3Rpb24ocGFyYW1zUHJvcGVydHksICgoX3BhcmFtc1Byb3BlcnR5ID0gYWN0aW9uUGFyYW1zW3BhcmFtc1Byb3BlcnR5XSkgIT09IG51bGwgJiYgX3BhcmFtc1Byb3BlcnR5ICE9PSB2b2lkIDAgPyBfcGFyYW1zUHJvcGVydHkgOiAnJykuY29uY2F0KCIge3siLmNvbmNhdCh2YXJpYWJsZSwgIn19IikpLCBpbmRleCk7CiAgfTsKCiAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgZnVsbFdpZHRoOiB0cnVlLAogICAgZXJyb3I6IGVycm9ycy50bywKICAgIGlzSW52YWxpZDogZXJyb3JzLnRvLmxlbmd0aCA+IDAgJiYgdG8gIT09IHVuZGVmaW5lZCwKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJpZ2dlcnNBY3Rpb25zVUkuc2VjdGlvbnMuYnVpbHRpbkFjdGlvblR5cGVzLmVtYWlsQWN0aW9uLnJlY2lwaWVudFRleHRGaWVsZExhYmVsJywgewogICAgICBkZWZhdWx0TWVzc2FnZTogJ1RvJwogICAgfSksCiAgICBsYWJlbEFwcGVuZDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRnJhZ21lbnQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCAhYWRkQ0MgPyBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uRW1wdHksIHsKICAgICAgc2l6ZTogInhzIiwKICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICByZXR1cm4gc2V0QWRkQ0ModHJ1ZSk7CiAgICAgIH0KICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQWRkIENjIiwKICAgICAgaWQ6ICJ4cGFjay50cmlnZ2Vyc0FjdGlvbnNVSS5zZWN0aW9ucy5idWlsdGluQWN0aW9uVHlwZXMuZW1haWxBY3Rpb24uYWRkQ2NCdXR0b24iCiAgICB9KSkgOiBudWxsLCAhYWRkQkNDID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbkVtcHR5LCB7CiAgICAgIHNpemU6ICJ4cyIsCiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgcmV0dXJuIHNldEFkZEJDQyh0cnVlKTsKICAgICAgfQogICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJ7dGl0bGVCY2N9IiwKICAgICAgaWQ6ICJ4cGFjay50cmlnZ2Vyc0FjdGlvbnNVSS5zZWN0aW9ucy5idWlsdGluQWN0aW9uVHlwZXMuZW1haWxBY3Rpb24uYWRkQmNjQnV0dG9uIiwKICAgICAgdmFsdWVzOiB7CiAgICAgICAgdGl0bGVCY2M6ICFhZGRDQyA/ICcvIEJjYycgOiAnQWRkIEJjYycKICAgICAgfQogICAgfSkpIDogbnVsbCkpCiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNvbWJvQm94LCB7CiAgICBub1N1Z2dlc3Rpb25zOiB0cnVlLAogICAgaXNJbnZhbGlkOiBlcnJvcnMudG8ubGVuZ3RoID4gMCAmJiB0byAhPT0gdW5kZWZpbmVkLAogICAgZnVsbFdpZHRoOiB0cnVlLAogICAgImRhdGEtdGVzdC1zdWJqIjogInRvRW1haWxBZGRyZXNzSW5wdXQiLAogICAgc2VsZWN0ZWRPcHRpb25zOiB0b09wdGlvbnMsCiAgICBvbkNyZWF0ZU9wdGlvbjogZnVuY3Rpb24gb25DcmVhdGVPcHRpb24oc2VhcmNoVmFsdWUpIHsKICAgICAgdmFyIG5ld09wdGlvbnMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHRvT3B0aW9ucyksIFt7CiAgICAgICAgbGFiZWw6IHNlYXJjaFZhbHVlCiAgICAgIH1dKTsKICAgICAgZWRpdEFjdGlvbigndG8nLCBuZXdPcHRpb25zLm1hcChmdW5jdGlvbiAobmV3T3B0aW9uKSB7CiAgICAgICAgcmV0dXJuIG5ld09wdGlvbi5sYWJlbDsKICAgICAgfSksIGluZGV4KTsKICAgIH0sCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2Uoc2VsZWN0ZWRPcHRpb25zKSB7CiAgICAgIGVkaXRBY3Rpb24oJ3RvJywgc2VsZWN0ZWRPcHRpb25zLm1hcChmdW5jdGlvbiAoc2VsZWN0ZWRPcHRpb24pIHsKICAgICAgICByZXR1cm4gc2VsZWN0ZWRPcHRpb24ubGFiZWw7CiAgICAgIH0pLCBpbmRleCk7CiAgICB9LAogICAgb25CbHVyOiBmdW5jdGlvbiBvbkJsdXIoKSB7CiAgICAgIGlmICghdG8pIHsKICAgICAgICBlZGl0QWN0aW9uKCd0bycsIFtdLCBpbmRleCk7CiAgICAgIH0KICAgIH0KICB9KSksIGFkZENDID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgIGVycm9yOiBlcnJvcnMuY2MsCiAgICBpc0ludmFsaWQ6IGVycm9ycy5jYy5sZW5ndGggPiAwICYmIGNjICE9PSB1bmRlZmluZWQsCiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLnNlY3Rpb25zLmJ1aWx0aW5BY3Rpb25UeXBlcy5lbWFpbEFjdGlvbi5yZWNpcGllbnRDb3B5VGV4dEZpZWxkTGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ2MnCiAgICB9KQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDb21ib0JveCwgewogICAgbm9TdWdnZXN0aW9uczogdHJ1ZSwKICAgIGlzSW52YWxpZDogZXJyb3JzLmNjLmxlbmd0aCA+IDAgJiYgY2MgIT09IHVuZGVmaW5lZCwKICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJjY0VtYWlsQWRkcmVzc0lucHV0IiwKICAgIHNlbGVjdGVkT3B0aW9uczogY2NPcHRpb25zLAogICAgb25DcmVhdGVPcHRpb246IGZ1bmN0aW9uIG9uQ3JlYXRlT3B0aW9uKHNlYXJjaFZhbHVlKSB7CiAgICAgIHZhciBuZXdPcHRpb25zID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShjY09wdGlvbnMpLCBbewogICAgICAgIGxhYmVsOiBzZWFyY2hWYWx1ZQogICAgICB9XSk7CiAgICAgIGVkaXRBY3Rpb24oJ2NjJywgbmV3T3B0aW9ucy5tYXAoZnVuY3Rpb24gKG5ld09wdGlvbikgewogICAgICAgIHJldHVybiBuZXdPcHRpb24ubGFiZWw7CiAgICAgIH0pLCBpbmRleCk7CiAgICB9LAogICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHNlbGVjdGVkT3B0aW9ucykgewogICAgICBlZGl0QWN0aW9uKCdjYycsIHNlbGVjdGVkT3B0aW9ucy5tYXAoZnVuY3Rpb24gKHNlbGVjdGVkT3B0aW9uKSB7CiAgICAgICAgcmV0dXJuIHNlbGVjdGVkT3B0aW9uLmxhYmVsOwogICAgICB9KSwgaW5kZXgpOwogICAgfSwKICAgIG9uQmx1cjogZnVuY3Rpb24gb25CbHVyKCkgewogICAgICBpZiAoIWNjKSB7CiAgICAgICAgZWRpdEFjdGlvbignY2MnLCBbXSwgaW5kZXgpOwogICAgICB9CiAgICB9CiAgfSkpIDogbnVsbCwgYWRkQkNDID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgIGVycm9yOiBlcnJvcnMuYmNjLAogICAgaXNJbnZhbGlkOiBlcnJvcnMuYmNjLmxlbmd0aCA+IDAgJiYgYmNjICE9PSB1bmRlZmluZWQsCiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLnNlY3Rpb25zLmJ1aWx0aW5BY3Rpb25UeXBlcy5lbWFpbEFjdGlvbi5yZWNpcGllbnRCY2NUZXh0RmllbGRMYWJlbCcsIHsKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdCY2MnCiAgICB9KQogIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDb21ib0JveCwgewogICAgbm9TdWdnZXN0aW9uczogdHJ1ZSwKICAgIGlzSW52YWxpZDogZXJyb3JzLmJjYy5sZW5ndGggPiAwICYmIGJjYyAhPT0gdW5kZWZpbmVkLAogICAgZnVsbFdpZHRoOiB0cnVlLAogICAgImRhdGEtdGVzdC1zdWJqIjogImJjY0VtYWlsQWRkcmVzc0lucHV0IiwKICAgIHNlbGVjdGVkT3B0aW9uczogYmNjT3B0aW9ucywKICAgIG9uQ3JlYXRlT3B0aW9uOiBmdW5jdGlvbiBvbkNyZWF0ZU9wdGlvbihzZWFyY2hWYWx1ZSkgewogICAgICB2YXIgbmV3T3B0aW9ucyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoYmNjT3B0aW9ucyksIFt7CiAgICAgICAgbGFiZWw6IHNlYXJjaFZhbHVlCiAgICAgIH1dKTsKICAgICAgZWRpdEFjdGlvbignYmNjJywgbmV3T3B0aW9ucy5tYXAoZnVuY3Rpb24gKG5ld09wdGlvbikgewogICAgICAgIHJldHVybiBuZXdPcHRpb24ubGFiZWw7CiAgICAgIH0pLCBpbmRleCk7CiAgICB9LAogICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHNlbGVjdGVkT3B0aW9ucykgewogICAgICBlZGl0QWN0aW9uKCdiY2MnLCBzZWxlY3RlZE9wdGlvbnMubWFwKGZ1bmN0aW9uIChzZWxlY3RlZE9wdGlvbikgewogICAgICAgIHJldHVybiBzZWxlY3RlZE9wdGlvbi5sYWJlbDsKICAgICAgfSksIGluZGV4KTsKICAgIH0sCiAgICBvbkJsdXI6IGZ1bmN0aW9uIG9uQmx1cigpIHsKICAgICAgaWYgKCFiY2MpIHsKICAgICAgICBlZGl0QWN0aW9uKCdiY2MnLCBbXSwgaW5kZXgpOwogICAgICB9CiAgICB9CiAgfSkpIDogbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgIGVycm9yOiBlcnJvcnMuc3ViamVjdCwKICAgIGlzSW52YWxpZDogZXJyb3JzLnN1YmplY3QubGVuZ3RoID4gMCAmJiBzdWJqZWN0ICE9PSB1bmRlZmluZWQsCiAgICBsYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLnRyaWdnZXJzQWN0aW9uc1VJLnNlY3Rpb25zLmJ1aWx0aW5BY3Rpb25UeXBlcy5lbWFpbEFjdGlvbi5zdWJqZWN0VGV4dEZpZWxkTGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU3ViamVjdCcKICAgIH0pLAogICAgbGFiZWxBcHBlbmQ6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2FkZF9tZXNzYWdlX3ZhcmlhYmxlcy5BZGRNZXNzYWdlVmFyaWFibGVzLCB7CiAgICAgIG1lc3NhZ2VWYXJpYWJsZXM6IG1lc3NhZ2VWYXJpYWJsZXMsCiAgICAgIG9uU2VsZWN0RXZlbnRIYW5kbGVyOiBmdW5jdGlvbiBvblNlbGVjdEV2ZW50SGFuZGxlcih2YXJpYWJsZSkgewogICAgICAgIHJldHVybiBvblNlbGVjdE1lc3NhZ2VWYXJpYWJsZSgnc3ViamVjdCcsIHZhcmlhYmxlKTsKICAgICAgfSwKICAgICAgcGFyYW1zUHJvcGVydHk6ICJzdWJqZWN0IgogICAgfSkKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmllbGRUZXh0LCB7CiAgICBmdWxsV2lkdGg6IHRydWUsCiAgICBpc0ludmFsaWQ6IGVycm9ycy5zdWJqZWN0Lmxlbmd0aCA+IDAgJiYgc3ViamVjdCAhPT0gdW5kZWZpbmVkLAogICAgbmFtZTogInN1YmplY3QiLAogICAgImRhdGEtdGVzdC1zdWJqIjogImVtYWlsU3ViamVjdElucHV0IiwKICAgIHZhbHVlOiBzdWJqZWN0IHx8ICcnLAogICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHsKICAgICAgZWRpdEFjdGlvbignc3ViamVjdCcsIGUudGFyZ2V0LnZhbHVlLCBpbmRleCk7CiAgICB9LAogICAgb25CbHVyOiBmdW5jdGlvbiBvbkJsdXIoKSB7CiAgICAgIGlmICghc3ViamVjdCkgewogICAgICAgIGVkaXRBY3Rpb24oJ3N1YmplY3QnLCAnJywgaW5kZXgpOwogICAgICB9CiAgICB9CiAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgZnVsbFdpZHRoOiB0cnVlLAogICAgZXJyb3I6IGVycm9ycy5tZXNzYWdlLAogICAgaXNJbnZhbGlkOiBlcnJvcnMubWVzc2FnZS5sZW5ndGggPiAwICYmIG1lc3NhZ2UgIT09IHVuZGVmaW5lZCwKICAgIGxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2sudHJpZ2dlcnNBY3Rpb25zVUkuc2VjdGlvbnMuYnVpbHRpbkFjdGlvblR5cGVzLmVtYWlsQWN0aW9uLm1lc3NhZ2VUZXh0QXJlYUZpZWxkTGFiZWwnLCB7CiAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTWVzc2FnZScKICAgIH0pLAogICAgbGFiZWxBcHBlbmQ6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2FkZF9tZXNzYWdlX3ZhcmlhYmxlcy5BZGRNZXNzYWdlVmFyaWFibGVzLCB7CiAgICAgIG1lc3NhZ2VWYXJpYWJsZXM6IG1lc3NhZ2VWYXJpYWJsZXMsCiAgICAgIG9uU2VsZWN0RXZlbnRIYW5kbGVyOiBmdW5jdGlvbiBvblNlbGVjdEV2ZW50SGFuZGxlcih2YXJpYWJsZSkgewogICAgICAgIHJldHVybiBvblNlbGVjdE1lc3NhZ2VWYXJpYWJsZSgnbWVzc2FnZScsIHZhcmlhYmxlKTsKICAgICAgfSwKICAgICAgcGFyYW1zUHJvcGVydHk6ICJtZXNzYWdlIgogICAgfSkKICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpVGV4dEFyZWEsIHsKICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgIGlzSW52YWxpZDogZXJyb3JzLm1lc3NhZ2UubGVuZ3RoID4gMCAmJiBtZXNzYWdlICE9PSB1bmRlZmluZWQsCiAgICB2YWx1ZTogbWVzc2FnZSB8fCAnJywKICAgIG5hbWU6ICJtZXNzYWdlIiwKICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJlbWFpbE1lc3NhZ2VJbnB1dCIsCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkgewogICAgICBlZGl0QWN0aW9uKCdtZXNzYWdlJywgZS50YXJnZXQudmFsdWUsIGluZGV4KTsKICAgIH0sCiAgICBvbkJsdXI6IGZ1bmN0aW9uIG9uQmx1cigpIHsKICAgICAgaWYgKCFtZXNzYWdlKSB7CiAgICAgICAgZWRpdEFjdGlvbignbWVzc2FnZScsICcnLCBpbmRleCk7CiAgICAgIH0KICAgIH0KICB9KSkpOwp9OyAvLyBpZiB0aGUgc3RyaW5nID09IG51bGwgb3IgaXMgZW1wdHksIHJldHVybiBudWxsLCBlbHNlIHJldHVybiBzdHJpbmcKCgpmdW5jdGlvbiBudWxsYWJsZVN0cmluZyhzdHIpIHsKICBpZiAoc3RyID09IG51bGwgfHwgc3RyLnRyaW0oKSA9PT0gJycpIHJldHVybiBudWxsOwogIHJldHVybiBzdHI7Cn0="},null]}