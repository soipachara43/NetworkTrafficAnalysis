{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/canvas/canvas_plugin_src/uis/arguments/image_upload/index.js","dependencies":[{"path":"x-pack/legacy/plugins/canvas/canvas_plugin_src/uis/arguments/image_upload/index.js","mtime":1589249551867},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmltYWdlVXBsb2FkID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3Byb3BUeXBlcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicHJvcC10eXBlcyIpKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX2xvZGFzaCA9IHJlcXVpcmUoImxvZGFzaCIpOwoKdmFyIF9hc3NldF9waWNrZXIgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9wdWJsaWMvY29tcG9uZW50cy9hc3NldF9waWNrZXIiKTsKCnZhciBfZWxhc3RpY19vdXRsaW5lID0gcmVxdWlyZSgiLi4vLi4vLi4vbGliL2VsYXN0aWNfb3V0bGluZSIpOwoKdmFyIF9yZXNvbHZlX2RhdGF1cmwgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21tb24vbGliL3Jlc29sdmVfZGF0YXVybCIpOwoKdmFyIF9odHRwdXJsID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29tbW9uL2xpYi9odHRwdXJsIik7Cgp2YXIgX2RhdGF1cmwgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9jb21tb24vbGliL2RhdGF1cmwiKTsKCnZhciBfdGVtcGxhdGVfZnJvbV9yZWFjdF9jb21wb25lbnQgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9wdWJsaWMvbGliL3RlbXBsYXRlX2Zyb21fcmVhY3RfY29tcG9uZW50Iik7Cgp2YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoIi4uLy4uLy4uLy4uL2NvbW1vbi9saWIvY29uc3RhbnRzIik7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCIuLi8uLi8uLi8uLi9pMThuIik7Cgp2YXIgX2Zvcm1zID0gcmVxdWlyZSgiLi9mb3JtcyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCnZhciBzdHJpbmdzID0gX2kxOG4uQXJndW1lbnRTdHJpbmdzLkltYWdlVXBsb2FkOwoKdmFyIEltYWdlVXBsb2FkID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkgewogIF9pbmhlcml0cyhJbWFnZVVwbG9hZCwgX1JlYWN0JENvbXBvbmVudCk7CgogIGZ1bmN0aW9uIEltYWdlVXBsb2FkKHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEltYWdlVXBsb2FkKTsKCiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihJbWFnZVVwbG9hZCkuY2FsbCh0aGlzLCBwcm9wcykpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInVwZGF0ZUFTVCIsIGZ1bmN0aW9uIChhc3NldElkKSB7CiAgICAgIF90aGlzLnByb3BzLm9uVmFsdWVDaGFuZ2UoewogICAgICAgIHR5cGU6ICdleHByZXNzaW9uJywKICAgICAgICBjaGFpbjogW3sKICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbicsCiAgICAgICAgICBmdW5jdGlvbjogJ2Fzc2V0JywKICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICBfOiBbYXNzZXRJZF0KICAgICAgICAgIH0KICAgICAgICB9XQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZVVwbG9hZCIsIGZ1bmN0aW9uIChmaWxlcykgewogICAgICB2YXIgb25Bc3NldEFkZCA9IF90aGlzLnByb3BzLm9uQXNzZXRBZGQ7CgogICAgICB2YXIgX2ZpbGVzID0gX3NsaWNlZFRvQXJyYXkoZmlsZXMsIDEpLAogICAgICAgICAgZmlsZSA9IF9maWxlc1swXTsKCiAgICAgIHZhciBfZ2V0JHNwbGl0ID0gKDAsIF9sb2Rhc2guZ2V0KShmaWxlLCAndHlwZScsICcnKS5zcGxpdCgnLycpLAogICAgICAgICAgX2dldCRzcGxpdDIgPSBfc2xpY2VkVG9BcnJheShfZ2V0JHNwbGl0LCAyKSwKICAgICAgICAgIHR5cGUgPSBfZ2V0JHNwbGl0MlswXSwKICAgICAgICAgIHN1YnR5cGUgPSBfZ2V0JHNwbGl0MlsxXTsKCiAgICAgIGlmICh0eXBlID09PSAnaW1hZ2UnICYmIF9jb25zdGFudHMuVkFMSURfSU1BR0VfVFlQRVMuaW5kZXhPZihzdWJ0eXBlKSA+PSAwKSB7CiAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgbG9hZGluZzogdHJ1ZQogICAgICAgIH0pOyAvLyBzdGFydCBsb2FkaW5nIGluZGljYXRvcgoKCiAgICAgICAgKDAsIF9kYXRhdXJsLmVuY29kZSkoZmlsZSkudGhlbihmdW5jdGlvbiAoZGF0YXVybCkgewogICAgICAgICAgcmV0dXJuIG9uQXNzZXRBZGQoJ2RhdGF1cmwnLCBkYXRhdXJsKTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChhc3NldElkKSB7CiAgICAgICAgICBfdGhpcy51cGRhdGVBU1QoYXNzZXRJZCk7IC8vIHRoaXMgY29tcG9uZW50IGNhbiBnbyBhd2F5IHdoZW4gb25WYWx1ZUNoYW5nZSBpcyBjYWxsZWQsIGNoZWNrIGZvciBfaXNNb3VudGVkCgoKICAgICAgICAgIF90aGlzLl9pc01vdW50ZWQgJiYgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICBsb2FkaW5nOiBmYWxzZQogICAgICAgICAgfSk7IC8vIHNldCBsb2FkaW5nIHN0YXRlIGJhY2sgdG8gZmFsc2UKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiY2hhbmdlVXJsVHlwZSIsIGZ1bmN0aW9uIChvcHRpb25JZCkgewogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgdXJsVHlwZTogb3B0aW9uSWQKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzZXRTcmNVcmwiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzcmNVcmwgPSBfdGhpcy5pbnB1dFJlZnMuc3JjVXJsVGV4dC52YWx1ZTsKCiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICB1cmw6IHNyY1VybAogICAgICB9KTsKCiAgICAgIHZhciBvblZhbHVlQ2hhbmdlID0gX3RoaXMucHJvcHMub25WYWx1ZUNoYW5nZTsKICAgICAgb25WYWx1ZUNoYW5nZShzcmNVcmwpOwogICAgfSk7CgogICAgdmFyIHVybCA9IHByb3BzLnJlc29sdmVkQXJnVmFsdWUgfHwgbnVsbDsKICAgIHZhciB1cmxUeXBlID0gT2JqZWN0LmtleXMocHJvcHMuYXNzZXRzKS5sZW5ndGggPyAnYXNzZXQnIDogJ2ZpbGUnOyAvLyBpZiBub3QgYSB2YWxpZCBiYXNlNjQgc3RyaW5nLCB3aWxsIHNob3cgYXMgbWlzc2luZyBhc3NldCBpY29uCgogICAgaWYgKCgwLCBfaHR0cHVybC5pc1ZhbGlkSHR0cFVybCkodXJsKSkgewogICAgICB1cmxUeXBlID0gJ2xpbmsnOwogICAgfQoKICAgIF90aGlzLmlucHV0UmVmcyA9IHt9OwogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICB1cmw6IHVybCwKICAgICAgLy8gd2hhdCB0byBzaG93IGluIHByZXZpZXcgLyBwYXN0ZSB1cmwgdGV4dCBpbnB1dAogICAgICB1cmxUeXBlOiB1cmxUeXBlIC8vIHdoYXQgcGFuZWwgdG8gc2hvdywgZmlsZXVwbG9hZCBvciBwYXN0ZSB1cmwKCiAgICB9OwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEltYWdlVXBsb2FkLCBbewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICAvLyBrZWVwIHRyYWNrIG9mIHdoZXRoZXIgb3Igbm90IHRoZSBjb21wb25lbnQgaXMgbW91bnRlZCwgdG8gcHJldmVudCByb2d1ZSBzZXRTdGF0ZSBjYWxscwogICAgICB0aGlzLl9pc01vdW50ZWQgPSB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudFdpbGxVbm1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHsKICAgICAgdGhpcy5faXNNb3VudGVkID0gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzJHN0YXRlID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIGxvYWRpbmcgPSBfdGhpcyRzdGF0ZS5sb2FkaW5nLAogICAgICAgICAgdXJsID0gX3RoaXMkc3RhdGUudXJsLAogICAgICAgICAgdXJsVHlwZSA9IF90aGlzJHN0YXRlLnVybFR5cGU7CiAgICAgIHZhciBhc3NldHMgPSBPYmplY3QudmFsdWVzKHRoaXMucHJvcHMuYXNzZXRzKTsKICAgICAgdmFyIHNlbGVjdGVkQXNzZXQgPSB7fTsKICAgICAgdmFyIHVybFR5cGVPcHRpb25zID0gW3sKICAgICAgICBpZDogJ2ZpbGUnLAogICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldEZpbGVVcmxUeXBlKCkKICAgICAgfSwgewogICAgICAgIGlkOiAnbGluaycsCiAgICAgICAgbGFiZWw6IHN0cmluZ3MuZ2V0TGlua1VybFR5cGUoKQogICAgICB9XTsKCiAgICAgIGlmIChhc3NldHMubGVuZ3RoKSB7CiAgICAgICAgdXJsVHlwZU9wdGlvbnMudW5zaGlmdCh7CiAgICAgICAgICBpZDogJ2Fzc2V0JywKICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldEFzc2V0VXJsVHlwZSgpCiAgICAgICAgfSk7CiAgICAgICAgc2VsZWN0ZWRBc3NldCA9IGFzc2V0cy5maW5kKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgICB2YXIgdmFsdWUgPSBfcmVmLnZhbHVlOwogICAgICAgICAgcmV0dXJuIHZhbHVlID09PSB1cmw7CiAgICAgICAgfSkgfHwge307CiAgICAgIH0KCiAgICAgIHZhciBzZWxlY3RVcmxUeXBlID0gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgICAgICBkaXNwbGF5OiAicm93Q29tcHJlc3NlZCIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbkdyb3VwLCB7CiAgICAgICAgYnV0dG9uU2l6ZTogImNvbXByZXNzZWQiLAogICAgICAgIG9wdGlvbnM6IHVybFR5cGVPcHRpb25zLAogICAgICAgIGlkU2VsZWN0ZWQ6IHVybFR5cGUsCiAgICAgICAgb25DaGFuZ2U6IHRoaXMuY2hhbmdlVXJsVHlwZSwKICAgICAgICBpc0Z1bGxXaWR0aDogdHJ1ZSwKICAgICAgICBjbGFzc05hbWU6ICJjYW52YXNTaWRlYmFyX19idXR0b25Hcm91cCIKICAgICAgfSkpOwoKICAgICAgdmFyIGZvcm1zID0gewogICAgICAgIGZpbGU6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2Zvcm1zLkZpbGVGb3JtLCB7CiAgICAgICAgICBsb2FkaW5nOiBsb2FkaW5nLAogICAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlVXBsb2FkCiAgICAgICAgfSksCiAgICAgICAgbGluazogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZm9ybXMuTGlua0Zvcm0sIHsKICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgaW5wdXRSZWY6IGZ1bmN0aW9uIGlucHV0UmVmKHJlZikgewogICAgICAgICAgICByZXR1cm4gX3RoaXMyLmlucHV0UmVmcy5zcmNVcmxUZXh0ID0gcmVmOwogICAgICAgICAgfSwKICAgICAgICAgIG9uU3VibWl0OiB0aGlzLnNldFNyY1VybAogICAgICAgIH0pLAogICAgICAgIGFzc2V0OiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9hc3NldF9waWNrZXIuQXNzZXRQaWNrZXIsIHsKICAgICAgICAgIGFzc2V0czogYXNzZXRzLAogICAgICAgICAgc2VsZWN0ZWQ6IHNlbGVjdGVkQXNzZXQuaWQsCiAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoX3JlZjIpIHsKICAgICAgICAgICAgdmFyIGlkID0gX3JlZjIuaWQ7CiAgICAgICAgICAgIHJldHVybiBfdGhpczIudXBkYXRlQVNUKGlkKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9OwogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogImNhbnZhc1NpZGViYXJfX3BhbmVsLW5vTWluV2lkdGgiLAogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJwogICAgICAgIH0KICAgICAgfSwgc2VsZWN0VXJsVHlwZSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgewogICAgICAgIHNpemU6ICJzIgogICAgICB9KSwgZm9ybXNbdXJsVHlwZV0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTcGFjZXIsIHsKICAgICAgICBzaXplOiAicyIKICAgICAgfSkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEltYWdlVXBsb2FkOwp9KF9yZWFjdC5kZWZhdWx0LkNvbXBvbmVudCk7CgpfZGVmaW5lUHJvcGVydHkoSW1hZ2VVcGxvYWQsICJwcm9wVHlwZXMiLCB7CiAgb25Bc3NldEFkZDogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMuaXNSZXF1aXJlZCwKICBvblZhbHVlQ2hhbmdlOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYy5pc1JlcXVpcmVkLAogIHR5cGVJbnN0YW5jZTogX3Byb3BUeXBlcy5kZWZhdWx0Lm9iamVjdC5pc1JlcXVpcmVkLAogIHJlc29sdmVkQXJnVmFsdWU6IF9wcm9wVHlwZXMuZGVmYXVsdC5zdHJpbmcsCiAgYXNzZXRzOiBfcHJvcFR5cGVzLmRlZmF1bHQub2JqZWN0LmlzUmVxdWlyZWQKfSk7Cgp2YXIgaW1hZ2VVcGxvYWQgPSBmdW5jdGlvbiBpbWFnZVVwbG9hZCgpIHsKICByZXR1cm4gewogICAgbmFtZTogJ2ltYWdlVXBsb2FkJywKICAgIGRpc3BsYXlOYW1lOiBzdHJpbmdzLmdldERpc3BsYXlOYW1lKCksCiAgICBoZWxwOiBzdHJpbmdzLmdldEhlbHAoKSwKICAgIHJlc29sdmVBcmdWYWx1ZTogdHJ1ZSwKICAgIHRlbXBsYXRlOiAoMCwgX3RlbXBsYXRlX2Zyb21fcmVhY3RfY29tcG9uZW50LnRlbXBsYXRlRnJvbVJlYWN0Q29tcG9uZW50KShJbWFnZVVwbG9hZCksCiAgICByZXNvbHZlOiBmdW5jdGlvbiByZXNvbHZlKF9yZWYzKSB7CiAgICAgIHZhciBhcmdzID0gX3JlZjMuYXJnczsKICAgICAgcmV0dXJuIHsKICAgICAgICBkYXRhdXJsOiAoMCwgX3Jlc29sdmVfZGF0YXVybC5yZXNvbHZlRnJvbUFyZ3MpKGFyZ3MsIF9lbGFzdGljX291dGxpbmUuZWxhc3RpY091dGxpbmUpCiAgICAgIH07CiAgICB9CiAgfTsKfTsKCmV4cG9ydHMuaW1hZ2VVcGxvYWQgPSBpbWFnZVVwbG9hZDs="},null]}