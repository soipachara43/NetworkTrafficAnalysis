{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/cross_cluster_replication/public/np_ready/app/components/remote_clusters_form_field.js","dependencies":[{"path":"x-pack/legacy/plugins/cross_cluster_replication/public/np_ready/app/components/remote_clusters_form_field.js","mtime":1589249552183},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLlJlbW90ZUNsdXN0ZXJzRm9ybUZpZWxkID0gdm9pZCAwOwoKdmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJlYWN0IikpOwoKdmFyIF9pMThuID0gcmVxdWlyZSgiQGtibi9pMThuIik7Cgp2YXIgX3JlYWN0MiA9IHJlcXVpcmUoIkBrYm4vaTE4bi9yZWFjdCIpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfcm91dGluZyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi4vc2VydmljZXMvcm91dGluZyIpKTsKCnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29tbW9uL2NvbnN0YW50cyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307IGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOyB9IGVsc2UgeyBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfQoKZnVuY3Rpb24gX2V4dGVuZHMoKSB7IF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfQoKZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgeyByZXR1cm4gY2FsbDsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfQoKZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfQoKZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsgfSByZXR1cm4gc2VsZjsgfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9Cgp2YXIgZXJyb3JNZXNzYWdlcyA9IHsKICBub0NsdXN0ZXJGb3VuZDogZnVuY3Rpb24gbm9DbHVzdGVyRm91bmQoKSB7CiAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgaWQ6ICJ4cGFjay5jcm9zc0NsdXN0ZXJSZXBsaWNhdGlvbi5yZW1vdGVDbHVzdGVyc0Zvcm1GaWVsZC5lbXB0eVJlbW90ZUNsdXN0ZXJzQ2FsbE91dERlc2NyaXB0aW9uIiwKICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJZb3UgbmVlZCBhdCBsZWFzdCBvbmUgcmVtb3RlIGNsdXN0ZXIgdG8gY3JlYXRlIGEgZm9sbG93ZXIgaW5kZXguIgogICAgfSk7CiAgfSwKICByZW1vdGVDbHVzdGVyTm90Q29ubmVjdGVkRWRpdGFibGU6IGZ1bmN0aW9uIHJlbW90ZUNsdXN0ZXJOb3RDb25uZWN0ZWRFZGl0YWJsZShuYW1lKSB7CiAgICByZXR1cm4gewogICAgICB0aXRsZTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmNyb3NzQ2x1c3RlclJlcGxpY2F0aW9uLnJlbW90ZUNsdXN0ZXJzRm9ybUZpZWxkLmN1cnJlbnRSZW1vdGVDbHVzdGVyTm90Q29ubmVjdGVkQ2FsbE91dFRpdGxlIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlJlbW90ZSBjbHVzdGVyICd7bmFtZX0nIGlzIG5vdCBjb25uZWN0ZWQiLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgbmFtZTogbmFtZQogICAgICAgIH0KICAgICAgfSksCiAgICAgIGRlc2NyaXB0aW9uOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24ucmVtb3RlQ2x1c3RlcnNGb3JtRmllbGQuY3VycmVudFJlbW90ZUNsdXN0ZXJOb3RDb25uZWN0ZWRDYWxsT3V0RGVzY3JpcHRpb24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRWRpdCB0aGUgcmVtb3RlIGNsdXN0ZXIgb3Igc2VsZWN0IGEgY2x1c3RlciB0aGF0IGlzIGNvbm5lY3RlZC4iCiAgICAgIH0pCiAgICB9OwogIH0KfTsKCnZhciBSZW1vdGVDbHVzdGVyc0Zvcm1GaWVsZCA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKF9QdXJlQ29tcG9uZW50KSB7CiAgX2luaGVyaXRzKFJlbW90ZUNsdXN0ZXJzRm9ybUZpZWxkLCBfUHVyZUNvbXBvbmVudCk7CgogIGZ1bmN0aW9uIFJlbW90ZUNsdXN0ZXJzRm9ybUZpZWxkKCkgewogICAgdmFyIF9nZXRQcm90b3R5cGVPZjI7CgogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZW1vdGVDbHVzdGVyc0Zvcm1GaWVsZCk7CgogICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICB9CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoX2dldFByb3RvdHlwZU9mMiA9IF9nZXRQcm90b3R5cGVPZihSZW1vdGVDbHVzdGVyc0Zvcm1GaWVsZCkpLmNhbGwuYXBwbHkoX2dldFByb3RvdHlwZU9mMiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImVycm9yTWVzc2FnZXMiLCBfb2JqZWN0U3ByZWFkKHt9LCBlcnJvck1lc3NhZ2VzLCB7fSwgX3RoaXMucHJvcHMuZXJyb3JNZXNzYWdlcykpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uUmVtb3RlQ2x1c3RlckNoYW5nZSIsIGZ1bmN0aW9uIChjbHVzdGVyKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLAogICAgICAgICAgb25DaGFuZ2UgPSBfdGhpcyRwcm9wcy5vbkNoYW5nZSwKICAgICAgICAgIG9uRXJyb3IgPSBfdGhpcyRwcm9wcy5vbkVycm9yOwoKICAgICAgdmFyIF90aGlzJHZhbGlkYXRlUmVtb3RlQyA9IF90aGlzLnZhbGlkYXRlUmVtb3RlQ2x1c3RlcihjbHVzdGVyKSwKICAgICAgICAgIGVycm9yID0gX3RoaXMkdmFsaWRhdGVSZW1vdGVDLmVycm9yOwoKICAgICAgb25DaGFuZ2UoY2x1c3Rlcik7CiAgICAgIG9uRXJyb3IoZXJyb3IpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicmVuZGVyTm90RWRpdGFibGUiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBhcmVFcnJvcnNWaXNpYmxlID0gX3RoaXMucHJvcHMuYXJlRXJyb3JzVmlzaWJsZTsKCiAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBfdGhpcy5yZW5kZXJFcnJvck1lc3NhZ2UoKTsKCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZpZWxkVGV4dCwgewogICAgICAgIHZhbHVlOiBfdGhpcy5wcm9wcy5zZWxlY3RlZCwKICAgICAgICBmdWxsV2lkdGg6IHRydWUsCiAgICAgICAgZGlzYWJsZWQ6IHRydWUsCiAgICAgICAgaXNJbnZhbGlkOiBhcmVFcnJvcnNWaXNpYmxlICYmIEJvb2xlYW4oZXJyb3JNZXNzYWdlKSwKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAicmVtb3RlQ2x1c3RlcklucHV0IgogICAgICB9KSwgYXJlRXJyb3JzVmlzaWJsZSAmJiBCb29sZWFuKGVycm9yTWVzc2FnZSkgPyBfdGhpcy5yZW5kZXJWYWxpZFJlbW90ZUNsdXN0ZXJSZXF1aXJlZCgpIDogbnVsbCwgZXJyb3JNZXNzYWdlKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInJlbmRlclZhbGlkUmVtb3RlQ2x1c3RlclJlcXVpcmVkIiwgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1FcnJvclRleHQsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ4cGFjay5jcm9zc0NsdXN0ZXJSZXBsaWNhdGlvbi5yZW1vdGVDbHVzdGVyc0Zvcm1GaWVsZC52YWxpZFJlbW90ZUNsdXN0ZXJSZXF1aXJlZCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBIGNvbm5lY3RlZCByZW1vdGUgY2x1c3RlciBpcyByZXF1aXJlZC4iCiAgICAgIH0pKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInJlbmRlckRyb3Bkb3duIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMyID0gX3RoaXMucHJvcHMsCiAgICAgICAgICByZW1vdGVDbHVzdGVycyA9IF90aGlzJHByb3BzMi5yZW1vdGVDbHVzdGVycywKICAgICAgICAgIHNlbGVjdGVkID0gX3RoaXMkcHJvcHMyLnNlbGVjdGVkLAogICAgICAgICAgY3VycmVudFVybCA9IF90aGlzJHByb3BzMi5jdXJyZW50VXJsLAogICAgICAgICAgYXJlRXJyb3JzVmlzaWJsZSA9IF90aGlzJHByb3BzMi5hcmVFcnJvcnNWaXNpYmxlOwogICAgICB2YXIgaGFzQ2x1c3RlcnMgPSBCb29sZWFuKHJlbW90ZUNsdXN0ZXJzLmxlbmd0aCk7CiAgICAgIHZhciByZW1vdGVDbHVzdGVyc09wdGlvbnMgPSBoYXNDbHVzdGVycyA/IHJlbW90ZUNsdXN0ZXJzLm1hcChmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBuYW1lID0gX3JlZi5uYW1lLAogICAgICAgICAgICBpc0Nvbm5lY3RlZCA9IF9yZWYuaXNDb25uZWN0ZWQ7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZhbHVlOiBuYW1lLAogICAgICAgICAgdGV4dDogaXNDb25uZWN0ZWQgPyBuYW1lIDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmNyb3NzQ2x1c3RlclJlcGxpY2F0aW9uLnJlbW90ZUNsdXN0ZXJzRm9ybUZpZWxkLnJlbW90ZUNsdXN0ZXJEcm9wZG93bk5vdENvbm5lY3RlZCcsIHsKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICd7bmFtZX0gKG5vdCBjb25uZWN0ZWQpJywKICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgbmFtZTogbmFtZQogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgICdkYXRhLXRlc3Qtc3Viaic6ICJvcHRpb24tIi5jb25jYXQobmFtZSkKICAgICAgICB9OwogICAgICB9KSA6IFtdOwoKICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IF90aGlzLnJlbmRlckVycm9yTWVzc2FnZSgpOwoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU2VsZWN0LCB7CiAgICAgICAgZnVsbFdpZHRoOiB0cnVlLAogICAgICAgIG9wdGlvbnM6IHJlbW90ZUNsdXN0ZXJzT3B0aW9ucywKICAgICAgICB2YWx1ZTogaGFzQ2x1c3RlcnMgPyBzZWxlY3RlZCA6ICcnLAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7CiAgICAgICAgICBfdGhpcy5vblJlbW90ZUNsdXN0ZXJDaGFuZ2UoZS50YXJnZXQudmFsdWUpOwogICAgICAgIH0sCiAgICAgICAgaGFzTm9Jbml0aWFsU2VsZWN0aW9uOiAhaGFzQ2x1c3RlcnMsCiAgICAgICAgaXNJbnZhbGlkOiBhcmVFcnJvcnNWaXNpYmxlICYmIEJvb2xlYW4oZXJyb3JNZXNzYWdlKSwKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAicmVtb3RlQ2x1c3RlclNlbGVjdCIKICAgICAgfSksIGFyZUVycm9yc1Zpc2libGUgJiYgQm9vbGVhbihlcnJvck1lc3NhZ2UpID8gX3RoaXMucmVuZGVyVmFsaWRSZW1vdGVDbHVzdGVyUmVxdWlyZWQoKSA6IG51bGwsIGVycm9yTWVzc2FnZSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgewogICAgICAgIHNpemU6ICJzIgogICAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgJyAnLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uRW1wdHksIF9leHRlbmRzKHt9LCBfcm91dGluZy5kZWZhdWx0LmdldFJvdXRlckxpbmtQcm9wcygnL2FkZCcsIF9jb25zdGFudHMuQkFTRV9QQVRIX1JFTU9URV9DTFVTVEVSUywgewogICAgICAgIHJlZGlyZWN0OiBjdXJyZW50VXJsCiAgICAgIH0sIHRydWUpLCB7CiAgICAgICAgc2l6ZTogInMiLAogICAgICAgIGljb25UeXBlOiAicGx1c0luQ2lyY2xlIiwKICAgICAgICBmbHVzaDogImxlZnQiLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJhZGRCdXR0b24iCiAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24ucmVtb3RlQ2x1c3RlcnNGb3JtRmllbGQuYWRkUmVtb3RlQ2x1c3RlckJ1dHRvbkxhYmVsIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkFkZCByZW1vdGUgY2x1c3RlciIKICAgICAgfSkpKSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJyZW5kZXJOb0NsdXN0ZXJGb3VuZCIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGN1cnJlbnRVcmwgPSBfdGhpcy5wcm9wcy5jdXJyZW50VXJsOwoKICAgICAgdmFyIHRpdGxlID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLmNyb3NzQ2x1c3RlclJlcGxpY2F0aW9uLnJlbW90ZUNsdXN0ZXJzRm9ybUZpZWxkLmVtcHR5UmVtb3RlQ2x1c3RlcnNDYWxsT3V0VGl0bGUnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJZb3UgZG9uJ3QgaGF2ZSBhbnkgcmVtb3RlIGNsdXN0ZXJzIgogICAgICB9KTsKCiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNhbGxPdXQsIHsKICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICAgIGljb25UeXBlOiAiY3Jvc3MiLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJub0NsdXN0ZXJGb3VuZEVycm9yIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3RoaXMuZXJyb3JNZXNzYWdlcy5ub0NsdXN0ZXJGb3VuZCgpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbiwgX2V4dGVuZHMoe30sIF9yb3V0aW5nLmRlZmF1bHQuZ2V0Um91dGVyTGlua1Byb3BzKCcvYWRkJywgX2NvbnN0YW50cy5CQVNFX1BBVEhfUkVNT1RFX0NMVVNURVJTLCB7CiAgICAgICAgcmVkaXJlY3Q6IGN1cnJlbnRVcmwKICAgICAgfSwgdHJ1ZSksIHsKICAgICAgICBpY29uVHlwZTogInBsdXNJbkNpcmNsZSIsCiAgICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJhZGRCdXR0b24iCiAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24ucmVtb3RlQ2x1c3RlcnNGb3JtRmllbGQuYWRkUmVtb3RlQ2x1c3RlckJ1dHRvbkxhYmVsIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkFkZCByZW1vdGUgY2x1c3RlciIKICAgICAgfSkpKSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJyZW5kZXJDdXJyZW50UmVtb3RlQ2x1c3Rlck5vdENvbm5lY3RlZCIsIGZ1bmN0aW9uIChuYW1lLCBmYXRhbCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMzID0gX3RoaXMucHJvcHMsCiAgICAgICAgICBpc0VkaXRhYmxlID0gX3RoaXMkcHJvcHMzLmlzRWRpdGFibGUsCiAgICAgICAgICBjdXJyZW50VXJsID0gX3RoaXMkcHJvcHMzLmN1cnJlbnRVcmw7CiAgICAgIHZhciBfdGhpcyRlcnJvck1lc3NhZ2VzID0gX3RoaXMuZXJyb3JNZXNzYWdlcywKICAgICAgICAgIHJlbW90ZUNsdXN0ZXJOb3RDb25uZWN0ZWRFZGl0YWJsZSA9IF90aGlzJGVycm9yTWVzc2FnZXMucmVtb3RlQ2x1c3Rlck5vdENvbm5lY3RlZEVkaXRhYmxlLAogICAgICAgICAgcmVtb3RlQ2x1c3Rlck5vdENvbm5lY3RlZE5vdEVkaXRhYmxlID0gX3RoaXMkZXJyb3JNZXNzYWdlcy5yZW1vdGVDbHVzdGVyTm90Q29ubmVjdGVkTm90RWRpdGFibGU7CgogICAgICB2YXIgX3JlZjIgPSBpc0VkaXRhYmxlID8gcmVtb3RlQ2x1c3Rlck5vdENvbm5lY3RlZEVkaXRhYmxlKG5hbWUpIDogcmVtb3RlQ2x1c3Rlck5vdENvbm5lY3RlZE5vdEVkaXRhYmxlKG5hbWUpLAogICAgICAgICAgdGl0bGUgPSBfcmVmMi50aXRsZSwKICAgICAgICAgIGRlc2NyaXB0aW9uID0gX3JlZjIuZGVzY3JpcHRpb247CgogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUNhbGxPdXQsIHsKICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgY29sb3I6IGZhdGFsID8gJ2RhbmdlcicgOiAnd2FybmluZycsCiAgICAgICAgaWNvblR5cGU6ICJjcm9zcyIsCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogIm5vdENvbm5lY3RlZEVycm9yIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgZGVzY3JpcHRpb24pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpQnV0dG9uLCBfZXh0ZW5kcyh7fSwgX3JvdXRpbmcuZGVmYXVsdC5nZXRSb3V0ZXJMaW5rUHJvcHMoIi9lZGl0LyIuY29uY2F0KG5hbWUpLCBfY29uc3RhbnRzLkJBU0VfUEFUSF9SRU1PVEVfQ0xVU1RFUlMsIHsKICAgICAgICByZWRpcmVjdDogY3VycmVudFVybAogICAgICB9LCB0cnVlKSwgewogICAgICAgIGNvbG9yOiBmYXRhbCA/ICdkYW5nZXInIDogJ3dhcm5pbmcnLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJlZGl0QnV0dG9uIgogICAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInhwYWNrLmNyb3NzQ2x1c3RlclJlcGxpY2F0aW9uLnJlbW90ZUNsdXN0ZXJzRm9ybUZpZWxkLnZpZXdSZW1vdGVDbHVzdGVyQnV0dG9uTGFiZWwiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRWRpdCByZW1vdGUgY2x1c3RlciIKICAgICAgfSkpKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInJlbmRlclJlbW90ZUNsdXN0ZXJEb2VzTm90RXhpc3QiLCBmdW5jdGlvbiAobmFtZSkgewogICAgICB2YXIgY3VycmVudFVybCA9IF90aGlzLnByb3BzLmN1cnJlbnRVcmw7CgogICAgICB2YXIgdGl0bGUgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24ucmVtb3RlQ2x1c3RlcnNGb3JtRmllbGQucmVtb3RlQ2x1c3Rlck5vdEZvdW5kVGl0bGUnLCB7CiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDb3VsZG4ndCBmaW5kIHJlbW90ZSBjbHVzdGVyICd7bmFtZX0nIiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIG5hbWU6IG5hbWUKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlDYWxsT3V0LCB7CiAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgIGNvbG9yOiAiZGFuZ2VyIiwKICAgICAgICBpY29uVHlwZTogImNyb3NzIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgX3RoaXMuZXJyb3JNZXNzYWdlcy5yZW1vdGVDbHVzdGVyRG9lc05vdEV4aXN0KG5hbWUpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUJ1dHRvbiwgX2V4dGVuZHMoe30sIF9yb3V0aW5nLmRlZmF1bHQuZ2V0Um91dGVyTGlua1Byb3BzKCcvYWRkJywgX2NvbnN0YW50cy5CQVNFX1BBVEhfUkVNT1RFX0NMVVNURVJTLCB7CiAgICAgICAgcmVkaXJlY3Q6IGN1cnJlbnRVcmwKICAgICAgfSwgdHJ1ZSksIHsKICAgICAgICBpY29uVHlwZTogInBsdXNJbkNpcmNsZSIsCiAgICAgICAgY29sb3I6ICJkYW5nZXIiLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJhZGRCdXR0b24iCiAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAieHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24ucmVtb3RlQ2x1c3RlcnNGb3JtRmllbGQuYWRkUmVtb3RlQ2x1c3RlckJ1dHRvbkxhYmVsIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkFkZCByZW1vdGUgY2x1c3RlciIKICAgICAgfSkpKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInJlbmRlckVycm9yTWVzc2FnZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF90aGlzJHByb3BzNCA9IF90aGlzLnByb3BzLAogICAgICAgICAgc2VsZWN0ZWQgPSBfdGhpcyRwcm9wczQuc2VsZWN0ZWQsCiAgICAgICAgICByZW1vdGVDbHVzdGVycyA9IF90aGlzJHByb3BzNC5yZW1vdGVDbHVzdGVycywKICAgICAgICAgIGlzRWRpdGFibGUgPSBfdGhpcyRwcm9wczQuaXNFZGl0YWJsZTsKICAgICAgdmFyIHJlbW90ZUNsdXN0ZXIgPSByZW1vdGVDbHVzdGVycy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMubmFtZSA9PT0gc2VsZWN0ZWQ7CiAgICAgIH0pOwogICAgICB2YXIgaXNTZWxlY3RlZFJlbW90ZUNsdXN0ZXJDb25uZWN0ZWQgPSByZW1vdGVDbHVzdGVyICYmIHJlbW90ZUNsdXN0ZXIuaXNDb25uZWN0ZWQ7CiAgICAgIHZhciBlcnJvcjsKCiAgICAgIGlmIChpc0VkaXRhYmxlKSB7CiAgICAgICAgLyogQ3JlYXRlICovCiAgICAgICAgdmFyIGhhc0NsdXN0ZXJzID0gQm9vbGVhbihyZW1vdGVDbHVzdGVycy5sZW5ndGgpOwoKICAgICAgICBpZiAoaGFzQ2x1c3RlcnMgJiYgIWlzU2VsZWN0ZWRSZW1vdGVDbHVzdGVyQ29ubmVjdGVkKSB7CiAgICAgICAgICBlcnJvciA9IF90aGlzLnJlbmRlckN1cnJlbnRSZW1vdGVDbHVzdGVyTm90Q29ubmVjdGVkKHNlbGVjdGVkKTsKICAgICAgICB9IGVsc2UgaWYgKCFoYXNDbHVzdGVycykgewogICAgICAgICAgZXJyb3IgPSBfdGhpcy5yZW5kZXJOb0NsdXN0ZXJGb3VuZCgpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvKiBFZGl0ICovCiAgICAgICAgdmFyIGRvZXNFeGlzdHMgPSAhIXJlbW90ZUNsdXN0ZXI7CgogICAgICAgIGlmICghZG9lc0V4aXN0cykgewogICAgICAgICAgZXJyb3IgPSBfdGhpcy5yZW5kZXJSZW1vdGVDbHVzdGVyRG9lc05vdEV4aXN0KHNlbGVjdGVkKTsKICAgICAgICB9IGVsc2UgaWYgKCFpc1NlbGVjdGVkUmVtb3RlQ2x1c3RlckNvbm5lY3RlZCkgewogICAgICAgICAgZXJyb3IgPSBfdGhpcy5yZW5kZXJDdXJyZW50UmVtb3RlQ2x1c3Rlck5vdENvbm5lY3RlZChzZWxlY3RlZCwgdHJ1ZSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gZXJyb3IgPyBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNwYWNlciwgewogICAgICAgIHNpemU6ICJzIgogICAgICB9KSwgZXJyb3IpIDogbnVsbDsKICAgIH0pOwoKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhSZW1vdGVDbHVzdGVyc0Zvcm1GaWVsZCwgW3sKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgdmFyIF90aGlzJHByb3BzNSA9IHRoaXMucHJvcHMsCiAgICAgICAgICBzZWxlY3RlZCA9IF90aGlzJHByb3BzNS5zZWxlY3RlZCwKICAgICAgICAgIG9uRXJyb3IgPSBfdGhpcyRwcm9wczUub25FcnJvcjsKCiAgICAgIHZhciBfdGhpcyR2YWxpZGF0ZVJlbW90ZUMyID0gdGhpcy52YWxpZGF0ZVJlbW90ZUNsdXN0ZXIoc2VsZWN0ZWQpLAogICAgICAgICAgZXJyb3IgPSBfdGhpcyR2YWxpZGF0ZVJlbW90ZUMyLmVycm9yOwoKICAgICAgb25FcnJvcihlcnJvcik7CiAgICB9CiAgfSwgewogICAga2V5OiAidmFsaWRhdGVSZW1vdGVDbHVzdGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB2YWxpZGF0ZVJlbW90ZUNsdXN0ZXIoY2x1c3Rlck5hbWUpIHsKICAgICAgdmFyIHJlbW90ZUNsdXN0ZXJzID0gdGhpcy5wcm9wcy5yZW1vdGVDbHVzdGVyczsKICAgICAgdmFyIHJlbW90ZUNsdXN0ZXIgPSByZW1vdGVDbHVzdGVycy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMubmFtZSA9PT0gY2x1c3Rlck5hbWU7CiAgICAgIH0pOwogICAgICByZXR1cm4gcmVtb3RlQ2x1c3RlciAmJiByZW1vdGVDbHVzdGVyLmlzQ29ubmVjdGVkID8gewogICAgICAgIGVycm9yOiBudWxsCiAgICAgIH0gOiB7CiAgICAgICAgZXJyb3I6IHsKICAgICAgICAgIG1lc3NhZ2U6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgIGlkOiAieHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24ucmVtb3RlQ2x1c3RlcnNGb3JtRmllbGQuaW52YWxpZFJlbW90ZUNsdXN0ZXJFcnJvciIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiSW52YWxpZCByZW1vdGUgY2x1c3RlciIKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHM2ID0gdGhpcy5wcm9wcywKICAgICAgICAgIHJlbW90ZUNsdXN0ZXJzID0gX3RoaXMkcHJvcHM2LnJlbW90ZUNsdXN0ZXJzLAogICAgICAgICAgc2VsZWN0ZWQgPSBfdGhpcyRwcm9wczYuc2VsZWN0ZWQsCiAgICAgICAgICBpc0VkaXRhYmxlID0gX3RoaXMkcHJvcHM2LmlzRWRpdGFibGUsCiAgICAgICAgICBhcmVFcnJvcnNWaXNpYmxlID0gX3RoaXMkcHJvcHM2LmFyZUVycm9yc1Zpc2libGU7CiAgICAgIHZhciByZW1vdGVDbHVzdGVyID0gcmVtb3RlQ2x1c3RlcnMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLm5hbWUgPT09IHNlbGVjdGVkOwogICAgICB9KTsKICAgICAgdmFyIGhhc0NsdXN0ZXJzID0gQm9vbGVhbihyZW1vdGVDbHVzdGVycy5sZW5ndGgpOwogICAgICB2YXIgaXNTZWxlY3RlZFJlbW90ZUNsdXN0ZXJDb25uZWN0ZWQgPSByZW1vdGVDbHVzdGVyICYmIHJlbW90ZUNsdXN0ZXIuaXNDb25uZWN0ZWQ7CiAgICAgIHZhciBpc0ludmFsaWQgPSBhcmVFcnJvcnNWaXNpYmxlICYmICghaGFzQ2x1c3RlcnMgfHwgIWlzU2VsZWN0ZWRSZW1vdGVDbHVzdGVyQ29ubmVjdGVkKTsKICAgICAgdmFyIGZpZWxkOwoKICAgICAgaWYgKGlzRWRpdGFibGUpIHsKICAgICAgICBpZiAoaGFzQ2x1c3RlcnMpIHsKICAgICAgICAgIGZpZWxkID0gdGhpcy5yZW5kZXJEcm9wZG93bigpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmaWVsZCA9IHRoaXMucmVuZGVyRXJyb3JNZXNzYWdlKCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGZpZWxkID0gdGhpcy5yZW5kZXJOb3RFZGl0YWJsZSgpOwogICAgICB9CgogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgICAgICBsYWJlbDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAieHBhY2suY3Jvc3NDbHVzdGVyUmVwbGljYXRpb24ucmVtb3RlQ2x1c3RlcnNGb3JtRmllbGQuZmllbGRDbHVzdGVyTGFiZWwiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJSZW1vdGUgY2x1c3RlciIKICAgICAgICB9KSwKICAgICAgICBpc0ludmFsaWQ6IGlzSW52YWxpZCwKICAgICAgICBmdWxsV2lkdGg6IHRydWUsCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInJlbW90ZUNsdXN0ZXJGb3JtRmllbGQiCiAgICAgIH0sIGZpZWxkKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBSZW1vdGVDbHVzdGVyc0Zvcm1GaWVsZDsKfShfcmVhY3QuUHVyZUNvbXBvbmVudCk7CgpleHBvcnRzLlJlbW90ZUNsdXN0ZXJzRm9ybUZpZWxkID0gUmVtb3RlQ2x1c3RlcnNGb3JtRmllbGQ7"},null]}