{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/input_control_vis/public/components/editor/list_control_editor.js","dependencies":[{"path":"src/legacy/core_plugins/input_control_vis/public/components/editor/list_control_editor.js","mtime":1589249549630},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuTGlzdENvbnRyb2xFZGl0b3IgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3JlYWN0MiA9IHJlcXVpcmUoIkBrYm4vaTE4bi9yZWFjdCIpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfaW5kZXhfcGF0dGVybl9zZWxlY3RfZm9ybV9yb3cgPSByZXF1aXJlKCIuL2luZGV4X3BhdHRlcm5fc2VsZWN0X2Zvcm1fcm93Iik7Cgp2YXIgX2ZpZWxkX3NlbGVjdCA9IHJlcXVpcmUoIi4vZmllbGRfc2VsZWN0Iik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsKICBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7CiAgICByZXR1cm4gb2JqOwogIH0gZWxzZSB7CiAgICB2YXIgbmV3T2JqID0ge307CgogICAgaWYgKG9iaiAhPSBudWxsKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307CgogICAgICAgICAgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIG5ld09iai5kZWZhdWx0ID0gb2JqOwogICAgcmV0dXJuIG5ld09iajsKICB9Cn0KCmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgX3R5cGVvZjIoU3ltYm9sLml0ZXJhdG9yKSA9PT0gInN5bWJvbCIpIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gX3R5cGVvZjIob2JqKTsKICAgIH07CiAgfSBlbHNlIHsKICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9CgogIHJldHVybiBfdHlwZW9mKG9iaik7Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9hcnIgPSBbXTsKICB2YXIgX24gPSB0cnVlOwogIHZhciBfZCA9IGZhbHNlOwogIHZhciBfZSA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKCiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsKICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9kID0gdHJ1ZTsKICAgIF9lID0gZXJyOwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKSBfaVsicmV0dXJuIl0oKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICB9CiAgfQoKICByZXR1cm4gX2FycjsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KCmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsKICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOwp9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7CiAgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpID09PSAiW29iamVjdCBBcmd1bWVudHNdIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7CiAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICBhcnIyW2ldID0gYXJyW2ldOwogICAgfQoKICAgIHJldHVybiBhcnIyOwogIH0KfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgewogIHRyeSB7CiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7CiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICByZWplY3QoZXJyb3IpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKGluZm8uZG9uZSkgewogICAgcmVzb2x2ZSh2YWx1ZSk7CiAgfSBlbHNlIHsKICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsKICB9Cn0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWxmID0gdGhpcywKICAgICAgICBhcmdzID0gYXJndW1lbnRzOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOwoKICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHsKICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7CiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOwogICAgICB9CgogICAgICBfbmV4dCh1bmRlZmluZWQpOwogICAgfSk7CiAgfTsKfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgfQp9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogIHJldHVybiBDb25zdHJ1Y3RvcjsKfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgewogIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsKICAgIHJldHVybiBjYWxsOwogIH0KCiAgcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7Cn0KCmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7CiAgfTsKICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOwp9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsKICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIHNlbGY7Cn0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgewogIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOwogIH0KCiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICBjb25zdHJ1Y3RvcjogewogICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0KICB9KTsKICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsKfQoKZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICAgIG8uX19wcm90b19fID0gcDsKICAgIHJldHVybiBvOwogIH07CgogIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgpmdW5jdGlvbiBmaWx0ZXJGaWVsZChmaWVsZCkgewogIHJldHVybiBCb29sZWFuKGZpZWxkLmFnZ3JlZ2F0YWJsZSkgJiYgWydudW1iZXInLCAnYm9vbGVhbicsICdkYXRlJywgJ2lwJywgJ3N0cmluZyddLmluY2x1ZGVzKGZpZWxkLnR5cGUpOwp9Cgp2YXIgTGlzdENvbnRyb2xFZGl0b3IgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uIChfUHVyZUNvbXBvbmVudCkgewogIF9pbmhlcml0cyhMaXN0Q29udHJvbEVkaXRvciwgX1B1cmVDb21wb25lbnQpOwoKICBmdW5jdGlvbiBMaXN0Q29udHJvbEVkaXRvcigpIHsKICAgIHZhciBfZ2V0UHJvdG90eXBlT2YyOwoKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTGlzdENvbnRyb2xFZGl0b3IpOwoKICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogICAgfQoKICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKF9nZXRQcm90b3R5cGVPZjIgPSBfZ2V0UHJvdG90eXBlT2YoTGlzdENvbnRyb2xFZGl0b3IpKS5jYWxsLmFwcGx5KF9nZXRQcm90b3R5cGVPZjIsIFt0aGlzXS5jb25jYXQoYXJncykpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJpc01vdW50ZWQiLCBmYWxzZSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic3RhdGUiLCB7CiAgICAgIGlzTG9hZGluZ0ZpZWxkVHlwZTogdHJ1ZSwKICAgICAgaXNTdHJpbmdGaWVsZDogZmFsc2UsCiAgICAgIHByZXZGaWVsZE5hbWU6IF90aGlzLnByb3BzLmNvbnRyb2xQYXJhbXMuZmllbGROYW1lLAogICAgICBJbmRleFBhdHRlcm5TZWxlY3Q6IG51bGwKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImNvbXBvbmVudERpZFVwZGF0ZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKF90aGlzLnN0YXRlLmlzTG9hZGluZ0ZpZWxkVHlwZSkgewogICAgICAgIF90aGlzLmxvYWRJc1N0cmluZ0ZpZWxkKCk7CiAgICAgIH0KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImxvYWRJc1N0cmluZ0ZpZWxkIiwKICAgIC8qI19fUFVSRV9fKi8KICAgIF9hc3luY1RvR2VuZXJhdG9yKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGluZGV4UGF0dGVybiwgZmllbGQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoISghX3RoaXMucHJvcHMuY29udHJvbFBhcmFtcy5pbmRleFBhdHRlcm4gfHwgIV90aGlzLnByb3BzLmNvbnRyb2xQYXJhbXMuZmllbGROYW1lKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzTG9hZGluZ0ZpZWxkVHlwZTogZmFsc2UKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDM7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByb3BzLmdldEluZGV4UGF0dGVybihfdGhpcy5wcm9wcy5jb250cm9sUGFyYW1zLmluZGV4UGF0dGVybik7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgaW5kZXhQYXR0ZXJuID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDk7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgzKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgaWYgKF90aGlzLmlzTW91bnRlZCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgZmllbGQgPSBpbmRleFBhdHRlcm4uZmllbGRzLmZpbmQoZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IF9yZWYyLm5hbWU7CiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZSA9PT0gX3RoaXMucHJvcHMuY29udHJvbFBhcmFtcy5maWVsZE5hbWU7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGlmIChmaWVsZCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXNMb2FkaW5nRmllbGRUeXBlOiBmYWxzZSwKICAgICAgICAgICAgICAgIGlzU3RyaW5nRmllbGQ6IGZpZWxkLnR5cGUgPT09ICdzdHJpbmcnCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzMsIDldXSk7CiAgICB9KSkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInJlbmRlck9wdGlvbnMiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcyRjb250cm9sUGEsIF90aGlzJHByb3BzJGNvbnRyb2xQYTI7CgogICAgICBpZiAoX3RoaXMuc3RhdGUuaXNMb2FkaW5nRmllbGRUeXBlIHx8ICFfdGhpcy5wcm9wcy5jb250cm9sUGFyYW1zLmZpZWxkTmFtZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIG9wdGlvbnMgPSBbXTsKCiAgICAgIGlmIChfdGhpcy5wcm9wcy5wYXJlbnRDYW5kaWRhdGVzICYmIF90aGlzLnByb3BzLnBhcmVudENhbmRpZGF0ZXMubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBwYXJlbnRDYW5kaWRhdGVzT3B0aW9ucyA9IFt7CiAgICAgICAgICB2YWx1ZTogJycsCiAgICAgICAgICB0ZXh0OiAnJwogICAgICAgIH1dLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoX3RoaXMucHJvcHMucGFyZW50Q2FuZGlkYXRlcykpOwogICAgICAgIG9wdGlvbnMucHVzaChfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgICAgICAgaWQ6ICJwYXJlbnRTZWxlY3QtIi5jb25jYXQoX3RoaXMucHJvcHMuY29udHJvbEluZGV4KSwKICAgICAgICAgIGxhYmVsOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogImlucHV0Q29udHJvbC5lZGl0b3IubGlzdENvbnRyb2wucGFyZW50TGFiZWwiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlBhcmVudCBjb250cm9sIgogICAgICAgICAgfSksCiAgICAgICAgICBoZWxwVGV4dDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgaWQ6ICJpbnB1dENvbnRyb2wuZWRpdG9yLmxpc3RDb250cm9sLnBhcmVudERlc2NyaXB0aW9uIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJPcHRpb25zIGFyZSBiYXNlZCBvbiB0aGUgdmFsdWUgb2YgcGFyZW50IGNvbnRyb2wuIERpc2FibGVkIGlmIHBhcmVudCBpcyBub3Qgc2V0LiIKICAgICAgICAgIH0pLAogICAgICAgICAga2V5OiAicGFyZW50U2VsZWN0IgogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTZWxlY3QsIHsKICAgICAgICAgIG9wdGlvbnM6IHBhcmVudENhbmRpZGF0ZXNPcHRpb25zLAogICAgICAgICAgdmFsdWU6IF90aGlzLnByb3BzLmNvbnRyb2xQYXJhbXMucGFyZW50LAogICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7CiAgICAgICAgICAgIF90aGlzLnByb3BzLmhhbmRsZVBhcmVudENoYW5nZShfdGhpcy5wcm9wcy5jb250cm9sSW5kZXgsIGV2ZW50LnRhcmdldC52YWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfSkpKTsKICAgICAgfQoKICAgICAgb3B0aW9ucy5wdXNoKF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGb3JtUm93LCB7CiAgICAgICAgaWQ6ICJtdWx0aXNlbGVjdC0iLmNvbmNhdChfdGhpcy5wcm9wcy5jb250cm9sSW5kZXgpLAogICAgICAgIGtleTogIm11bHRpc2VsZWN0IiwKICAgICAgICBoZWxwVGV4dDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAiaW5wdXRDb250cm9sLmVkaXRvci5saXN0Q29udHJvbC5tdWx0aXNlbGVjdERlc2NyaXB0aW9uIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQWxsb3cgbXVsdGlwbGUgc2VsZWN0aW9uIgogICAgICAgIH0pCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTd2l0Y2gsIHsKICAgICAgICBsYWJlbDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAiaW5wdXRDb250cm9sLmVkaXRvci5saXN0Q29udHJvbC5tdWx0aXNlbGVjdExhYmVsIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTXVsdGlzZWxlY3QiCiAgICAgICAgfSksCiAgICAgICAgY2hlY2tlZDogKF90aGlzJHByb3BzJGNvbnRyb2xQYSA9IF90aGlzLnByb3BzLmNvbnRyb2xQYXJhbXMub3B0aW9ucy5tdWx0aXNlbGVjdCkgIT09IG51bGwgJiYgX3RoaXMkcHJvcHMkY29udHJvbFBhICE9PSB2b2lkIDAgPyBfdGhpcyRwcm9wcyRjb250cm9sUGEgOiB0cnVlLAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShldmVudCkgewogICAgICAgICAgX3RoaXMucHJvcHMuaGFuZGxlT3B0aW9uc0NoYW5nZShfdGhpcy5wcm9wcy5jb250cm9sSW5kZXgsICdtdWx0aXNlbGVjdCcsIGV2ZW50LnRhcmdldC5jaGVja2VkKTsKICAgICAgICB9LAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJsaXN0Q29udHJvbE11bHRpc2VsZWN0SW5wdXQiCiAgICAgIH0pKSk7CiAgICAgIHZhciBkeW5hbWljT3B0aW9uc0hlbHBUZXh0ID0gX3RoaXMuc3RhdGUuaXNTdHJpbmdGaWVsZCA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJpbnB1dENvbnRyb2wuZWRpdG9yLmxpc3RDb250cm9sLmR5bmFtaWNPcHRpb25zLnVwZGF0ZURlc2NyaXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlVwZGF0ZSBvcHRpb25zIGluIHJlc3BvbnNlIHRvIHVzZXIgaW5wdXQiCiAgICAgIH0pIDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImlucHV0Q29udHJvbC5lZGl0b3IubGlzdENvbnRyb2wuZHluYW1pY09wdGlvbnMuc3RyaW5nRmllbGREZXNjcmlwdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJPbmx5IGF2YWlsYWJsZSBmb3IgXCJzdHJpbmdcIiBmaWVsZHMiCiAgICAgIH0pOwogICAgICBvcHRpb25zLnB1c2goX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZvcm1Sb3csIHsKICAgICAgICBpZDogImR5bmFtaWNPcHRpb25zLSIuY29uY2F0KF90aGlzLnByb3BzLmNvbnRyb2xJbmRleCksCiAgICAgICAga2V5OiAiZHluYW1pY09wdGlvbnMiLAogICAgICAgIGhlbHBUZXh0OiBkeW5hbWljT3B0aW9uc0hlbHBUZXh0CiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlTd2l0Y2gsIHsKICAgICAgICBsYWJlbDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAiaW5wdXRDb250cm9sLmVkaXRvci5saXN0Q29udHJvbC5keW5hbWljT3B0aW9uc0xhYmVsIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRHluYW1pYyBPcHRpb25zIgogICAgICAgIH0pLAogICAgICAgIGNoZWNrZWQ6IChfdGhpcyRwcm9wcyRjb250cm9sUGEyID0gX3RoaXMucHJvcHMuY29udHJvbFBhcmFtcy5vcHRpb25zLmR5bmFtaWNPcHRpb25zKSAhPT0gbnVsbCAmJiBfdGhpcyRwcm9wcyRjb250cm9sUGEyICE9PSB2b2lkIDAgPyBfdGhpcyRwcm9wcyRjb250cm9sUGEyIDogZmFsc2UsCiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7CiAgICAgICAgICBfdGhpcy5wcm9wcy5oYW5kbGVPcHRpb25zQ2hhbmdlKF90aGlzLnByb3BzLmNvbnRyb2xJbmRleCwgJ2R5bmFtaWNPcHRpb25zJywgZXZlbnQudGFyZ2V0LmNoZWNrZWQpOwogICAgICAgIH0sCiAgICAgICAgZGlzYWJsZWQ6IF90aGlzLnN0YXRlLmlzU3RyaW5nRmllbGQgPyBmYWxzZSA6IHRydWUsCiAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogImxpc3RDb250cm9sRHluYW1pY09wdGlvbnNTd2l0Y2giCiAgICAgIH0pKSk7IC8vIHNpemUgaXMgbm90IHVzZWQgd2hlbiBkeW5hbWljIG9wdGlvbnMgaXMgc2V0CgogICAgICBpZiAoIV90aGlzLnByb3BzLmNvbnRyb2xQYXJhbXMub3B0aW9ucy5keW5hbWljT3B0aW9ucyB8fCAhX3RoaXMuc3RhdGUuaXNTdHJpbmdGaWVsZCkgewogICAgICAgIG9wdGlvbnMucHVzaChfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRm9ybVJvdywgewogICAgICAgICAgaWQ6ICJzaXplLSIuY29uY2F0KF90aGlzLnByb3BzLmNvbnRyb2xJbmRleCksCiAgICAgICAgICBsYWJlbDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgaWQ6ICJpbnB1dENvbnRyb2wuZWRpdG9yLmxpc3RDb250cm9sLnNpemVMYWJlbCIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU2l6ZSIKICAgICAgICAgIH0pLAogICAgICAgICAga2V5OiAic2l6ZSIsCiAgICAgICAgICBoZWxwVGV4dDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QyLkZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgaWQ6ICJpbnB1dENvbnRyb2wuZWRpdG9yLmxpc3RDb250cm9sLnNpemVEZXNjcmlwdGlvbiIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTnVtYmVyIG9mIG9wdGlvbnMiCiAgICAgICAgICB9KQogICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGaWVsZE51bWJlciwgewogICAgICAgICAgbWluOiAxLAogICAgICAgICAgdmFsdWU6IF90aGlzLnByb3BzLmNvbnRyb2xQYXJhbXMub3B0aW9ucy5zaXplLAogICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGV2ZW50KSB7CiAgICAgICAgICAgIF90aGlzLnByb3BzLmhhbmRsZU9wdGlvbnNDaGFuZ2UoX3RoaXMucHJvcHMuY29udHJvbEluZGV4LCAnc2l6ZScsIGV2ZW50LnRhcmdldC52YWx1ZUFzTnVtYmVyKTsKICAgICAgICAgIH0sCiAgICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAibGlzdENvbnRyb2xTaXplSW5wdXQiCiAgICAgICAgfSkpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG9wdGlvbnM7CiAgICB9KTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoTGlzdENvbnRyb2xFZGl0b3IsIFt7CiAgICBrZXk6ICJjb21wb25lbnREaWRNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgIHRoaXMuaXNNb3VudGVkID0gdHJ1ZTsKICAgICAgdGhpcy5sb2FkSXNTdHJpbmdGaWVsZCgpOwogICAgICB0aGlzLmdldEluZGV4UGF0dGVyblNlbGVjdCgpOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudFdpbGxVbm1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHsKICAgICAgdGhpcy5pc01vdW50ZWQgPSBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRJbmRleFBhdHRlcm5TZWxlY3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRJbmRleFBhdHRlcm5TZWxlY3QgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgX3JlZjMsIF9yZWY0LCBkYXRhOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuZGVwcy5jb3JlLmdldFN0YXJ0U2VydmljZXMoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3JlZjMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIF9yZWY0ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjMsIDIpOwogICAgICAgICAgICAgICAgZGF0YSA9IF9yZWY0WzFdLmRhdGE7CiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgSW5kZXhQYXR0ZXJuU2VsZWN0OiBkYXRhLnVpLkluZGV4UGF0dGVyblNlbGVjdAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldEluZGV4UGF0dGVyblNlbGVjdCgpIHsKICAgICAgICByZXR1cm4gX2dldEluZGV4UGF0dGVyblNlbGVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0SW5kZXhQYXR0ZXJuU2VsZWN0OwogICAgfSgpCiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIGlmICh0aGlzLnN0YXRlLkluZGV4UGF0dGVyblNlbGVjdCA9PT0gbnVsbCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuZGVmYXVsdC5GcmFnbWVudCwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfaW5kZXhfcGF0dGVybl9zZWxlY3RfZm9ybV9yb3cuSW5kZXhQYXR0ZXJuU2VsZWN0Rm9ybVJvdywgewogICAgICAgIGluZGV4UGF0dGVybklkOiB0aGlzLnByb3BzLmNvbnRyb2xQYXJhbXMuaW5kZXhQYXR0ZXJuLAogICAgICAgIG9uQ2hhbmdlOiB0aGlzLnByb3BzLmhhbmRsZUluZGV4UGF0dGVybkNoYW5nZSwKICAgICAgICBjb250cm9sSW5kZXg6IHRoaXMucHJvcHMuY29udHJvbEluZGV4LAogICAgICAgIEluZGV4UGF0dGVyblNlbGVjdDogdGhpcy5zdGF0ZS5JbmRleFBhdHRlcm5TZWxlY3QKICAgICAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2ZpZWxkX3NlbGVjdC5GaWVsZFNlbGVjdCwgewogICAgICAgIGZpZWxkTmFtZTogdGhpcy5wcm9wcy5jb250cm9sUGFyYW1zLmZpZWxkTmFtZSwKICAgICAgICBpbmRleFBhdHRlcm5JZDogdGhpcy5wcm9wcy5jb250cm9sUGFyYW1zLmluZGV4UGF0dGVybiwKICAgICAgICBmaWx0ZXJGaWVsZDogZmlsdGVyRmllbGQsCiAgICAgICAgb25DaGFuZ2U6IHRoaXMucHJvcHMuaGFuZGxlRmllbGROYW1lQ2hhbmdlLAogICAgICAgIGdldEluZGV4UGF0dGVybjogdGhpcy5wcm9wcy5nZXRJbmRleFBhdHRlcm4sCiAgICAgICAgY29udHJvbEluZGV4OiB0aGlzLnByb3BzLmNvbnRyb2xJbmRleAogICAgICB9KSwgdGhpcy5yZW5kZXJPcHRpb25zKCkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIExpc3RDb250cm9sRWRpdG9yOwp9KF9yZWFjdC5QdXJlQ29tcG9uZW50KTsKCmV4cG9ydHMuTGlzdENvbnRyb2xFZGl0b3IgPSBMaXN0Q29udHJvbEVkaXRvcjsKCl9kZWZpbmVQcm9wZXJ0eShMaXN0Q29udHJvbEVkaXRvciwgImdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyIsIGZ1bmN0aW9uIChuZXh0UHJvcHMsIHByZXZTdGF0ZSkgewogIHZhciBpc05ld0ZpZWxkTmFtZSA9IHByZXZTdGF0ZS5wcmV2RmllbGROYW1lICE9PSBuZXh0UHJvcHMuY29udHJvbFBhcmFtcy5maWVsZE5hbWU7CgogIGlmICghcHJldlN0YXRlLmlzTG9hZGluZ0ZpZWxkVHlwZSAmJiBpc05ld0ZpZWxkTmFtZSkgewogICAgcmV0dXJuIHsKICAgICAgcHJldkZpZWxkTmFtZTogbmV4dFByb3BzLmNvbnRyb2xQYXJhbXMuZmllbGROYW1lLAogICAgICBpc0xvYWRpbmdGaWVsZFR5cGU6IHRydWUKICAgIH07CiAgfQoKICByZXR1cm4gbnVsbDsKfSk7"},null]}