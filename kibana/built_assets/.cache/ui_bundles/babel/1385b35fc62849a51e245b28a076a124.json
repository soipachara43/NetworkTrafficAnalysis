{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/legacy/core_plugins/visualizations/public/np_ready/public/wizard/type_selection/type_selection.js","dependencies":[{"path":"src/legacy/core_plugins/visualizations/public/np_ready/public/wizard/type_selection/type_selection.js","mtime":1589249550182},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMihvYmopOyB9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuVHlwZVNlbGVjdGlvbiA9IHZvaWQgMDsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKdmFyIF9yZWFjdCA9IHJlcXVpcmUoIkBrYm4vaTE4bi9yZWFjdCIpOwoKdmFyIF9sb2Rhc2ggPSByZXF1aXJlKCJsb2Rhc2giKTsKCnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfZXVpID0gcmVxdWlyZSgiQGVsYXN0aWMvZXVpIik7Cgp2YXIgX21lbW9pemUgPSByZXF1aXJlKCIuLi8uLi8uLi8uLi8uLi8uLi92aXN1YWxpemF0aW9ucy9wdWJsaWMvbnBfcmVhZHkvcHVibGljL2xlZ2FjeS9tZW1vaXplIik7Cgp2YXIgX25ld192aXNfaGVscCA9IHJlcXVpcmUoIi4vbmV3X3Zpc19oZWxwIik7Cgp2YXIgX3Zpc19oZWxwX3RleHQgPSByZXF1aXJlKCIuL3Zpc19oZWxwX3RleHQiKTsKCnZhciBfdmlzX3R5cGVfaWNvbiA9IHJlcXVpcmUoIi4vdmlzX3R5cGVfaWNvbiIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogICAgfTsKICB9IGVsc2UgewogICAgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgICB9OwogIH0KCiAgcmV0dXJuIF90eXBlb2Yob2JqKTsKfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICB9IGVsc2UgewogICAgICBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgewogIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsKICBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09ICJbb2JqZWN0IEFyZ3VtZW50c10iKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsKfQoKZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHsKICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgIGFycjJbaV0gPSBhcnJbaV07CiAgICB9CgogICAgcmV0dXJuIGFycjI7CiAgfQp9CgpmdW5jdGlvbiBfZXh0ZW5kcygpIHsKICBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgewogICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsKCiAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgewogICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdGFyZ2V0OwogIH07CgogIHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICB9Cn0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgcmV0dXJuIENvbnN0cnVjdG9yOwp9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7CiAgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgewogICAgcmV0dXJuIGNhbGw7CiAgfQoKICByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsKfQoKZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsKICBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgewogICAgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsKICB9OwogIHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7Cn0KCmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgewogIGlmIChzZWxmID09PSB2b2lkIDApIHsKICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7CiAgfQoKICByZXR1cm4gc2VsZjsKfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7CiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7CiAgfQoKICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsKICAgIGNvbnN0cnVjdG9yOiB7CiAgICAgIHZhbHVlOiBzdWJDbGFzcywKICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgfQogIH0pOwogIGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOwp9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgewogIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgewogICAgby5fX3Byb3RvX18gPSBwOwogICAgcmV0dXJuIG87CiAgfTsKCiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCnZhciBUeXBlU2VsZWN0aW9uID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkgewogIF9pbmhlcml0cyhUeXBlU2VsZWN0aW9uLCBfUmVhY3QkQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gVHlwZVNlbGVjdGlvbigpIHsKICAgIHZhciBfZ2V0UHJvdG90eXBlT2YyOwoKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVHlwZVNlbGVjdGlvbik7CgogICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICB9CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoX2dldFByb3RvdHlwZU9mMiA9IF9nZXRQcm90b3R5cGVPZihUeXBlU2VsZWN0aW9uKSkuY2FsbC5hcHBseShfZ2V0UHJvdG90eXBlT2YyLCBbdGhpc10uY29uY2F0KGFyZ3MpKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic3RhdGUiLCB7CiAgICAgIGhpZ2hsaWdodGVkVHlwZTogbnVsbCwKICAgICAgcXVlcnk6ICcnCiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJnZXRGaWx0ZXJlZFZpc1R5cGVzIiwgKDAsIF9tZW1vaXplLm1lbW9pemVMYXN0KShfdGhpcy5maWx0ZXJlZFZpc1R5cGVzKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicmVuZGVyVmlzVHlwZSIsIGZ1bmN0aW9uICh2aXNUeXBlKSB7CiAgICAgIHZhciBzdGFnZSA9IHt9OwogICAgICB2YXIgaGlnaGxpZ2h0TXNnOwoKICAgICAgaWYgKCEoJ2FsaWFzVXJsJyBpbiB2aXNUeXBlKSAmJiB2aXNUeXBlLnN0YWdlID09PSAnZXhwZXJpbWVudGFsJykgewogICAgICAgIHN0YWdlID0gewogICAgICAgICAgYmV0YUJhZGdlTGFiZWw6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd2aXN1YWxpemF0aW9ucy5uZXdWaXNXaXphcmQuZXhwZXJpbWVudGFsVGl0bGUnLCB7CiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRXhwZXJpbWVudGFsJwogICAgICAgICAgfSksCiAgICAgICAgICBiZXRhQmFkZ2VUb29sdGlwQ29udGVudDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3Zpc3VhbGl6YXRpb25zLm5ld1Zpc1dpemFyZC5leHBlcmltZW50YWxUb29sdGlwJywgewogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1RoaXMgdmlzdWFsaXphdGlvbiBtaWdodCBiZSBjaGFuZ2VkIG9yIHJlbW92ZWQgaW4gYSBmdXR1cmUgcmVsZWFzZSBhbmQgaXMgbm90IHN1YmplY3QgdG8gdGhlIHN1cHBvcnQgU0xBLicKICAgICAgICAgIH0pCiAgICAgICAgfTsKICAgICAgICBoaWdobGlnaHRNc2cgPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgndmlzdWFsaXphdGlvbnMubmV3VmlzV2l6YXJkLmV4cGVyaW1lbnRhbERlc2NyaXB0aW9uJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdUaGlzIHZpc3VhbGl6YXRpb24gaXMgZXhwZXJpbWVudGFsLiBUaGUgZGVzaWduIGFuZCBpbXBsZW1lbnRhdGlvbiBhcmUgbGVzcyBtYXR1cmUgdGhhbiBzdGFibGUgdmlzdWFsaXphdGlvbnMgYW5kIG1pZ2h0IGJlIHN1YmplY3QgdG8gY2hhbmdlLicKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICgnYWxpYXNVcmwnIGluIHZpc1R5cGUpIHsKICAgICAgICBpZiAodmlzVHlwZS5zdGFnZSA9PT0gJ2JldGEnKSB7CiAgICAgICAgICB2YXIgYWxpYXNEZXNjcmlwdGlvbiA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd2aXN1YWxpemF0aW9ucy5uZXdWaXNXaXphcmQuYmV0YURlc2NyaXB0aW9uJywgewogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1RoaXMgdmlzdWFsaXphdGlvbiBpcyBpbiBiZXRhIGFuZCBpcyBzdWJqZWN0IHRvIGNoYW5nZS4gVGhlIGRlc2lnbiBhbmQgY29kZSBpcyBsZXNzIG1hdHVyZSB0aGFuIG9mZmljaWFsIEdBIGZlYXR1cmVzIGFuZCBpcyBiZWluZyBwcm92aWRlZCBhcy1pcyB3aXRoIG5vIHdhcnJhbnRpZXMuIEJldGEgZmVhdHVyZXMgYXJlIG5vdCBzdWJqZWN0IHRvIHRoZSBzdXBwb3J0IFNMQSBvZiBvZmZpY2lhbCBHQSBmZWF0dXJlcycKICAgICAgICAgIH0pOwoKICAgICAgICAgIHN0YWdlID0gewogICAgICAgICAgICBiZXRhQmFkZ2VMYWJlbDogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3Zpc3VhbGl6YXRpb25zLm5ld1Zpc1dpemFyZC5iZXRhVGl0bGUnLCB7CiAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdCZXRhJwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgYmV0YUJhZGdlVG9vbHRpcENvbnRlbnQ6IGFsaWFzRGVzY3JpcHRpb24gLy8gYmV0YUJhZGdlSWNvblR5cGU6ICdwb3BvdXQnLAoKICAgICAgICAgIH07CiAgICAgICAgICBoaWdobGlnaHRNc2cgPSBhbGlhc0Rlc2NyaXB0aW9uOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgX2FsaWFzRGVzY3JpcHRpb24gPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgndmlzdWFsaXphdGlvbnMubmV3VmlzV2l6YXJkLnZpc1R5cGVBbGlhc0Rlc2NyaXB0aW9uJywgewogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ09wZW5zIGEgS2liYW5hIGFwcGxpY2F0aW9uIHRoYXQgaXMgb3V0c2lkZSBvZiBWaXN1YWxpemUuJwogICAgICAgICAgfSk7CgogICAgICAgICAgc3RhZ2UgPSB7CiAgICAgICAgICAgIGJldGFCYWRnZUxhYmVsOiBfaTE4bi5pMThuLnRyYW5zbGF0ZSgndmlzdWFsaXphdGlvbnMubmV3VmlzV2l6YXJkLnZpc1R5cGVBbGlhc1RpdGxlJywgewogICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnS2liYW5hIGFwcGxpY2F0aW9uJwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgYmV0YUJhZGdlVG9vbHRpcENvbnRlbnQ6IF9hbGlhc0Rlc2NyaXB0aW9uLAogICAgICAgICAgICBiZXRhQmFkZ2VJY29uVHlwZTogJ3BvcG91dCcKICAgICAgICAgIH07CiAgICAgICAgICBoaWdobGlnaHRNc2cgPSBfYWxpYXNEZXNjcmlwdGlvbjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBpc0Rpc2FibGVkID0gX3RoaXMuc3RhdGUucXVlcnkgIT09ICcnICYmICF2aXNUeXBlLmhpZ2hsaWdodGVkOwoKICAgICAgdmFyIG9uQ2xpY2sgPSBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgIHJldHVybiBfdGhpcy5wcm9wcy5vblZpc1R5cGVTZWxlY3RlZCh2aXNUeXBlKTsKICAgICAgfTsKCiAgICAgIHZhciBoaWdobGlnaHRlZFR5cGUgPSB7CiAgICAgICAgdGl0bGU6IHZpc1R5cGUudGl0bGUsCiAgICAgICAgbmFtZTogdmlzVHlwZS5uYW1lLAogICAgICAgIGRlc2NyaXB0aW9uOiB2aXNUeXBlLmRlc2NyaXB0aW9uLAogICAgICAgIGhpZ2hsaWdodE1zZzogaGlnaGxpZ2h0TXNnCiAgICAgIH07CiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUtleVBhZE1lbnVJdGVtQnV0dG9uLCBfZXh0ZW5kcyh7CiAgICAgICAga2V5OiB2aXNUeXBlLm5hbWUsCiAgICAgICAgbGFiZWw6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgewogICAgICAgICAgImRhdGEtdGVzdC1zdWJqIjogInZpc1R5cGVUaXRsZSIKICAgICAgICB9LCB2aXNUeXBlLnRpdGxlKSwKICAgICAgICBvbkNsaWNrOiBvbkNsaWNrLAogICAgICAgIG9uRm9jdXM6IGZ1bmN0aW9uIG9uRm9jdXMoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMuc2V0SGlnaGxpZ2h0VHlwZShoaWdobGlnaHRlZFR5cGUpOwogICAgICAgIH0sCiAgICAgICAgb25Nb3VzZUVudGVyOiBmdW5jdGlvbiBvbk1vdXNlRW50ZXIoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMuc2V0SGlnaGxpZ2h0VHlwZShoaWdobGlnaHRlZFR5cGUpOwogICAgICAgIH0sCiAgICAgICAgb25Nb3VzZUxlYXZlOiBmdW5jdGlvbiBvbk1vdXNlTGVhdmUoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMuc2V0SGlnaGxpZ2h0VHlwZShudWxsKTsKICAgICAgICB9LAogICAgICAgIG9uQmx1cjogZnVuY3Rpb24gb25CbHVyKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzLnNldEhpZ2hsaWdodFR5cGUobnVsbCk7CiAgICAgICAgfSwKICAgICAgICBjbGFzc05hbWU6ICJ2aXNOZXdWaXNEaWFsb2dfX3R5cGUiLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJ2aXNUeXBlLSIuY29uY2F0KHZpc1R5cGUubmFtZSksCiAgICAgICAgImRhdGEtdmlzLXN0YWdlIjogISgnYWxpYXNVcmwnIGluIHZpc1R5cGUpID8gdmlzVHlwZS5zdGFnZSA6ICdhbGlhcycsCiAgICAgICAgZGlzYWJsZWQ6IGlzRGlzYWJsZWQsCiAgICAgICAgImFyaWEtZGVzY3JpYmVkYnkiOiAidmlzVHlwZURlc2NyaXB0aW9uLSIuY29uY2F0KHZpc1R5cGUubmFtZSksCiAgICAgICAgcm9sZTogIm1lbnVpdGVtIgogICAgICB9LCBzdGFnZSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF92aXNfdHlwZV9pY29uLlZpc1R5cGVJY29uLCB7CiAgICAgICAgaWNvbjogdmlzVHlwZS5pY29uLAogICAgICAgIGltYWdlOiAhKCdhbGlhc1VybCcgaW4gdmlzVHlwZSkgPyB2aXNUeXBlLmltYWdlIDogdW5kZWZpbmVkCiAgICAgIH0pKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uUXVlcnlDaGFuZ2UiLCBmdW5jdGlvbiAoZXYpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIHF1ZXJ5OiBldi50YXJnZXQudmFsdWUKICAgICAgfSk7CiAgICB9KTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoVHlwZVNlbGVjdGlvbiwgW3sKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMkc3RhdGUgPSB0aGlzLnN0YXRlLAogICAgICAgICAgcXVlcnkgPSBfdGhpcyRzdGF0ZS5xdWVyeSwKICAgICAgICAgIGhpZ2hsaWdodGVkVHlwZSA9IF90aGlzJHN0YXRlLmhpZ2hsaWdodGVkVHlwZTsKICAgICAgdmFyIHZpc1R5cGVzID0gdGhpcy5nZXRGaWx0ZXJlZFZpc1R5cGVzKHRoaXMucHJvcHMudmlzVHlwZXNSZWdpc3RyeSwgcXVlcnkpOwogICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5kZWZhdWx0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aU1vZGFsSGVhZGVyLCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aU1vZGFsSGVhZGVyVGl0bGUsIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ2aXN1YWxpemF0aW9ucy5uZXdWaXNXaXphcmQudGl0bGUiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTmV3IFZpc3VhbGl6YXRpb24iCiAgICAgIH0pKSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAidmlzTmV3VmlzRGlhbG9nX19ib2R5IgogICAgICB9LCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUZsZXhHcm91cCwgewogICAgICAgIGd1dHRlclNpemU6ICJ4bCIKICAgICAgfSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgbnVsbCwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgICAgICBjbGFzc05hbWU6ICJ2aXNOZXdWaXNEaWFsb2dfX2xpc3QiLAogICAgICAgIGRpcmVjdGlvbjogImNvbHVtbiIsCiAgICAgICAgZ3V0dGVyU2l6ZTogIm5vbmUiLAogICAgICAgIHJlc3BvbnNpdmU6IGZhbHNlCiAgICAgIH0sIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiBmYWxzZSwKICAgICAgICBjbGFzc05hbWU6ICJ2aXNOZXdWaXNEaWFsb2dfX3NlYXJjaFdyYXBwZXIiCiAgICAgIH0sIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmllbGRTZWFyY2gsIHsKICAgICAgICBwbGFjZWhvbGRlcjogIkZpbHRlciIsCiAgICAgICAgdmFsdWU6IHF1ZXJ5LAogICAgICAgIG9uQ2hhbmdlOiB0aGlzLm9uUXVlcnlDaGFuZ2UsCiAgICAgICAgZnVsbFdpZHRoOiB0cnVlLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJmaWx0ZXJWaXNUeXBlIiwKICAgICAgICAiYXJpYS1sYWJlbCI6IF9pMThuLmkxOG4udHJhbnNsYXRlKCd2aXN1YWxpemF0aW9ucy5uZXdWaXNXaXphcmQuZmlsdGVyVmlzVHlwZUFyaWFMYWJlbCcsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRmlsdGVyIGZvciBhIHZpc3VhbGl6YXRpb24gdHlwZScKICAgICAgICB9KQogICAgICB9KSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmxleEl0ZW0sIHsKICAgICAgICBncm93OiAxLAogICAgICAgIGNsYXNzTmFtZTogInZpc05ld1Zpc0RpYWxvZ19fdHlwZXNXcmFwcGVyIgogICAgICB9LCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVNjcmVlblJlYWRlck9ubHksIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgewogICAgICAgICJhcmlhLWxpdmUiOiAicG9saXRlIgogICAgICB9LCBxdWVyeSAmJiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3QuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAidmlzdWFsaXphdGlvbnMubmV3VmlzV2l6YXJkLnJlc3VsdHNGb3VuZCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJ7cmVzdWx0Q291bnR9IHtyZXN1bHRDb3VudCwgcGx1cmFsLCBvbmUge3R5cGV9IG90aGVyIHt0eXBlc30gfSBmb3VuZCIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICByZXN1bHRDb3VudDogdmlzVHlwZXMuZmlsdGVyKGZ1bmN0aW9uICh0eXBlKSB7CiAgICAgICAgICAgIHJldHVybiB0eXBlLmhpZ2hsaWdodGVkOwogICAgICAgICAgfSkubGVuZ3RoCiAgICAgICAgfQogICAgICB9KSkpLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aUtleVBhZE1lbnUsIHsKICAgICAgICBjbGFzc05hbWU6ICJ2aXNOZXdWaXNEaWFsb2dfX3R5cGVzIiwKICAgICAgICAiZGF0YS10ZXN0LXN1YmoiOiAidmlzTmV3RGlhbG9nVHlwZXMiCiAgICAgIH0sIHZpc1R5cGVzLm1hcCh0aGlzLnJlbmRlclZpc1R5cGUpKSkpKSwgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4SXRlbSwgewogICAgICAgIGNsYXNzTmFtZTogInZpc05ld1Zpc0RpYWxvZ19fZGVzY3JpcHRpb24iLAogICAgICAgIGdyb3c6IGZhbHNlCiAgICAgIH0sIGhpZ2hsaWdodGVkVHlwZSA/IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF92aXNfaGVscF90ZXh0LlZpc0hlbHBUZXh0LCBoaWdobGlnaHRlZFR5cGUpIDogX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5kZWZhdWx0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRpdGxlLCB7CiAgICAgICAgc2l6ZTogInMiCiAgICAgIH0sIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJoMiIsIG51bGwsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdC5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJ2aXN1YWxpemF0aW9ucy5uZXdWaXNXaXphcmQuc2VsZWN0VmlzVHlwZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTZWxlY3QgYSB2aXN1YWxpemF0aW9uIHR5cGUiCiAgICAgIH0pKSksIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpU3BhY2VyLCB7CiAgICAgICAgc2l6ZTogIm0iCiAgICAgIH0pLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfbmV3X3Zpc19oZWxwLk5ld1Zpc0hlbHAsIHsKICAgICAgICBwcm9tb3RlZFR5cGVzOiB2aXNUeXBlcy5maWx0ZXIoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIHJldHVybiB0LnByb21vdGlvbjsKICAgICAgICB9KSwKICAgICAgICBvblByb21vdGlvbkNsaWNrZWQ6IHRoaXMucHJvcHMub25WaXNUeXBlU2VsZWN0ZWQKICAgICAgfSkpKSkpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmaWx0ZXJlZFZpc1R5cGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmaWx0ZXJlZFZpc1R5cGVzKHZpc1R5cGVzLCBxdWVyeSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciB0eXBlcyA9IHZpc1R5cGVzLmFsbCgpLmZpbHRlcihmdW5jdGlvbiAodHlwZSkgewogICAgICAgIC8vIEZpbHRlciBvdXQgYWxsIGxhYiB2aXN1YWxpemF0aW9ucyBpZiBsYWIgbW9kZSBpcyBub3QgZW5hYmxlZAogICAgICAgIGlmICghX3RoaXMyLnByb3BzLnNob3dFeHBlcmltZW50YWwgJiYgdHlwZS5zdGFnZSA9PT0gJ2V4cGVyaW1lbnRhbCcpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9IC8vIEZpbHRlciBvdXQgaGlkZGVuIHZpc3VhbGl6YXRpb25zCgoKICAgICAgICBpZiAodHlwZS5oaWRkZW4pIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9KTsKICAgICAgdmFyIGFsbFR5cGVzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh0eXBlcyksIF90b0NvbnN1bWFibGVBcnJheSh2aXNUeXBlcy5nZXRBbGlhc2VzKCkpKTsKICAgICAgdmFyIGVudHJpZXM7CgogICAgICBpZiAoIXF1ZXJ5KSB7CiAgICAgICAgZW50cmllcyA9IGFsbFR5cGVzLm1hcChmdW5jdGlvbiAodHlwZSkgewogICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHR5cGUsIHsKICAgICAgICAgICAgaGlnaGxpZ2h0ZWQ6IGZhbHNlCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgcSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7CiAgICAgICAgZW50cmllcyA9IGFsbFR5cGVzLm1hcChmdW5jdGlvbiAodHlwZSkgewogICAgICAgICAgdmFyIG1hdGNoZXNRdWVyeSA9IHR5cGUubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHEpIHx8IHR5cGUudGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSB8fCB0eXBlb2YgdHlwZS5kZXNjcmlwdGlvbiA9PT0gJ3N0cmluZycgJiYgdHlwZS5kZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHEpOwogICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIHR5cGUsIHsKICAgICAgICAgICAgaGlnaGxpZ2h0ZWQ6IG1hdGNoZXNRdWVyeQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiAoMCwgX2xvZGFzaC5zb3J0QnlPcmRlcikoZW50cmllcywgWydoaWdobGlnaHRlZCcsICdwcm9tb3Rpb24nLCAndGl0bGUnXSwgWydkZXNjJywgJ2FzYycsICdhc2MnXSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0SGlnaGxpZ2h0VHlwZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0SGlnaGxpZ2h0VHlwZShoaWdobGlnaHRlZFR5cGUpIHsKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgaGlnaGxpZ2h0ZWRUeXBlOiBoaWdobGlnaHRlZFR5cGUKICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gVHlwZVNlbGVjdGlvbjsKfShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTsKCmV4cG9ydHMuVHlwZVNlbGVjdGlvbiA9IFR5cGVTZWxlY3Rpb247"},null]}