{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/apm/public/components/app/ServiceMap/Cytoscape.js","dependencies":[{"path":"x-pack/legacy/plugins/apm/public/components/app/ServiceMap/Cytoscape.js","mtime":1589249551587},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkN5dG9zY2FwZSA9IEN5dG9zY2FwZTsKZXhwb3J0cy5DeXRvc2NhcGVDb250ZXh0ID0gdm9pZCAwOwoKdmFyIF9jeXRvc2NhcGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImN5dG9zY2FwZSIpKTsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBfbG9kYXNoID0gcmVxdWlyZSgibG9kYXNoIik7Cgp2YXIgX2N5dG9zY2FwZU9wdGlvbnMgPSByZXF1aXJlKCIuL2N5dG9zY2FwZU9wdGlvbnMiKTsKCnZhciBfcHVibGljID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcGx1Z2lucy9vYnNlcnZhYmlsaXR5L3B1YmxpYyIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7CiAgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgewogICAgcmV0dXJuIG9iajsKICB9IGVsc2UgewogICAgdmFyIG5ld09iaiA9IHt9OwoKICAgIGlmIChvYmogIT0gbnVsbCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsKICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IHt9OwoKICAgICAgICAgIGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBuZXdPYmouZGVmYXVsdCA9IG9iajsKICAgIHJldHVybiBuZXdPYmo7CiAgfQp9CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICBkZWZhdWx0OiBvYmoKICB9Owp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KCiAgcmV0dXJuIG9iajsKfQoKZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7Cn0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsKICB2YXIgX2FyciA9IFtdOwogIHZhciBfbiA9IHRydWU7CiAgdmFyIF9kID0gZmFsc2U7CiAgdmFyIF9lID0gdW5kZWZpbmVkOwoKICB0cnkgewogICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICBfYXJyLnB1c2goX3MudmFsdWUpOwoKICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2QgPSB0cnVlOwogICAgX2UgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOwogICAgfSBmaW5hbGx5IHsKICAgICAgaWYgKF9kKSB0aHJvdyBfZTsKICAgIH0KICB9CgogIHJldHVybiBfYXJyOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsKfQoKdmFyIEN5dG9zY2FwZUNvbnRleHQgPSAoMCwgX3JlYWN0LmNyZWF0ZUNvbnRleHQpKHVuZGVmaW5lZCk7CmV4cG9ydHMuQ3l0b3NjYXBlQ29udGV4dCA9IEN5dG9zY2FwZUNvbnRleHQ7CgpmdW5jdGlvbiB1c2VDeXRvc2NhcGUob3B0aW9ucykgewogIHZhciBfdXNlU3RhdGUgPSAoMCwgX3JlYWN0LnVzZVN0YXRlKSh1bmRlZmluZWQpLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgY3kgPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRDeSA9IF91c2VTdGF0ZTJbMV07CgogIHZhciByZWYgPSAoMCwgX3JlYWN0LnVzZVJlZikobnVsbCk7CiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIGlmICghY3kpIHsKICAgICAgc2V0Q3koKDAsIF9jeXRvc2NhcGUuZGVmYXVsdCkoX29iamVjdFNwcmVhZCh7fSwgb3B0aW9ucywgewogICAgICAgIGNvbnRhaW5lcjogcmVmLmN1cnJlbnQKICAgICAgfSkpKTsKICAgIH0KICB9LCBbb3B0aW9ucywgY3ldKTsgLy8gRGVzdHJveSB0aGUgY3l0b3NjYXBlIGluc3RhbmNlIG9uIHVubW91bnQKCiAgKDAsIF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChjeSkgewogICAgICAgIGN5LmRlc3Ryb3koKTsKICAgICAgfQogICAgfTsKICB9LCBbY3ldKTsKICByZXR1cm4gW3JlZiwgY3ldOwp9CgpmdW5jdGlvbiByb3RhdGVQb2ludChfcmVmLCBkZWdyZWVzUm90YXRlZCkgewogIHZhciB4ID0gX3JlZi54LAogICAgICB5ID0gX3JlZi55OwogIHZhciByYWRpYW5zUGVyRGVncmVlID0gTWF0aC5QSSAvIDE4MDsKICB2YXIgzrggPSByYWRpYW5zUGVyRGVncmVlICogZGVncmVlc1JvdGF0ZWQ7CiAgdmFyIGNvc864ID0gTWF0aC5jb3MozrgpOwogIHZhciBzaW7OuCA9IE1hdGguc2luKM64KTsKICByZXR1cm4gewogICAgeDogeCAqIGNvc864IC0geSAqIHNpbs64LAogICAgeTogeCAqIHNpbs64ICsgeSAqIGNvc864CiAgfTsKfQoKZnVuY3Rpb24gZ2V0TGF5b3V0T3B0aW9ucyhzZWxlY3RlZFJvb3RzLCBoZWlnaHQsIHdpZHRoKSB7CiAgcmV0dXJuIHsKICAgIG5hbWU6ICdicmVhZHRoZmlyc3QnLAogICAgcm9vdHM6IHNlbGVjdGVkUm9vdHMubGVuZ3RoID8gc2VsZWN0ZWRSb290cyA6IHVuZGVmaW5lZCwKICAgIGZpdDogdHJ1ZSwKICAgIHBhZGRpbmc6IF9jeXRvc2NhcGVPcHRpb25zLm5vZGVIZWlnaHQsCiAgICBzcGFjaW5nRmFjdG9yOiAwLjg1LAogICAgYW5pbWF0ZTogdHJ1ZSwKICAgIGFuaW1hdGlvbkVhc2luZzogX2N5dG9zY2FwZU9wdGlvbnMuYW5pbWF0aW9uT3B0aW9ucy5lYXNpbmcsCiAgICBhbmltYXRpb25EdXJhdGlvbjogX2N5dG9zY2FwZU9wdGlvbnMuYW5pbWF0aW9uT3B0aW9ucy5kdXJhdGlvbiwKICAgIC8vIEB0cy1pZ25vcmUKICAgIC8vIFJvdGF0ZSBub2RlcyBjb3VudGVyLWNsb2Nrd2lzZSB0byB0cmFuc2Zvcm0gbGF5b3V0IGZyb20gdG9w4oaSYm90dG9tIHRvIGxlZnTihpJyaWdodC4KICAgIC8vIFRoZSBleHRyYSA1wrAgYWNoaWV2ZXMgdGhlIGVmZmVjdCBvZiBzZXBhcmF0aW5nIG92ZXJsYXBwaW5nIHRheGktc3R5bGVkIGVkZ2VzLgogICAgdHJhbnNmb3JtOiBmdW5jdGlvbiB0cmFuc2Zvcm0obm9kZSwgcG9zKSB7CiAgICAgIHJldHVybiByb3RhdGVQb2ludChwb3MsIC05NSk7CiAgICB9LAogICAgLy8gc3dhcCB3aWR0aC9oZWlnaHQgb2YgYm91bmRpbmdCb3ggdG8gY29tcGVuc2F0ZSBmb3IgdGhlIHJvdGF0aW9uCiAgICBib3VuZGluZ0JveDogewogICAgICB4MTogMCwKICAgICAgeTE6IDAsCiAgICAgIHc6IGhlaWdodCwKICAgICAgaDogd2lkdGgKICAgIH0KICB9Owp9CgpmdW5jdGlvbiBzZWxlY3RSb290cyhjeSkgewogIHZhciBiZnMgPSBjeS5lbGVtZW50cygpLmJmcyh7CiAgICByb290czogY3kuZWxlbWVudHMoKS5sZWF2ZXMoKQogIH0pOwogIHZhciBmdXJ0aGVzdE5vZGVGcm9tTGVhdmVzID0gYmZzLnBhdGgubGFzdCgpOwogIHJldHVybiBjeS5lbGVtZW50cygpLnJvb3RzKCkudW5pb24oZnVydGhlc3ROb2RlRnJvbUxlYXZlcykubWFwKGZ1bmN0aW9uIChlbCkgewogICAgcmV0dXJuIGVsLmlkKCk7CiAgfSk7Cn0KCmZ1bmN0aW9uIEN5dG9zY2FwZShfcmVmMikgewogIHZhciBjaGlsZHJlbiA9IF9yZWYyLmNoaWxkcmVuLAogICAgICBlbGVtZW50cyA9IF9yZWYyLmVsZW1lbnRzLAogICAgICBoZWlnaHQgPSBfcmVmMi5oZWlnaHQsCiAgICAgIHdpZHRoID0gX3JlZjIud2lkdGgsCiAgICAgIHNlcnZpY2VOYW1lID0gX3JlZjIuc2VydmljZU5hbWUsCiAgICAgIHN0eWxlID0gX3JlZjIuc3R5bGU7CgogIHZhciBfdXNlQ3l0b3NjYXBlID0gdXNlQ3l0b3NjYXBlKF9vYmplY3RTcHJlYWQoe30sIF9jeXRvc2NhcGVPcHRpb25zLmN5dG9zY2FwZU9wdGlvbnMsIHsKICAgIGVsZW1lbnRzOiBlbGVtZW50cwogIH0pKSwKICAgICAgX3VzZUN5dG9zY2FwZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlQ3l0b3NjYXBlLCAyKSwKICAgICAgcmVmID0gX3VzZUN5dG9zY2FwZTJbMF0sCiAgICAgIGN5ID0gX3VzZUN5dG9zY2FwZTJbMV07IC8vIEFkZCB0aGUgaGVpZ2h0IHRvIHRoZSBkaXYgc3R5bGUuIFRoZSBoZWlnaHQgaXMgYSBzZXBhcmF0ZSBwcm9wIGJlY2F1c2UgaXQKICAvLyBpcyByZXF1aXJlZCBhbmQgY2FuIHRyaWdnZXIgcmVuZGVyaW5nIHdoZW4gY2hhbmdlZC4KCgogIHZhciBkaXZTdHlsZSA9IF9vYmplY3RTcHJlYWQoe30sIHN0eWxlLCB7CiAgICBoZWlnaHQ6IGhlaWdodAogIH0pOwoKICB2YXIgdHJhY2tBcG1FdmVudCA9ICgwLCBfcHVibGljLnVzZVVpVHJhY2tlcikoewogICAgYXBwOiAnYXBtJwogIH0pOyAvLyBUcmlnZ2VyIGEgY3VzdG9tICJkYXRhIiBldmVudCB3aGVuIGRhdGEgY2hhbmdlcwoKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgaWYgKGN5ICYmIGVsZW1lbnRzLmxlbmd0aCA+IDApIHsKICAgICAgdmFyIHJlbmRlcmVkRWxlbWVudHMgPSBjeS5lbGVtZW50cygnbm9kZSxlZGdlJyk7CiAgICAgIHZhciBsYXRlc3RFbGVtZW50SWRzID0gZWxlbWVudHMubWFwKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5kYXRhLmlkOwogICAgICB9KTsKICAgICAgdmFyIGFic2VudEVsZW1lbnRzID0gcmVuZGVyZWRFbGVtZW50cy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgcmV0dXJuICFsYXRlc3RFbGVtZW50SWRzLmluY2x1ZGVzKGVsLmlkKCkpOwogICAgICB9KTsKICAgICAgY3kucmVtb3ZlKGFic2VudEVsZW1lbnRzKTsKICAgICAgY3kuYWRkKGVsZW1lbnRzKTsKICAgICAgY3kudHJpZ2dlcignZGF0YScpOwogICAgfQogIH0sIFtjeSwgZWxlbWVudHNdKTsgLy8gU2V0IHVwIGN5dG9zY2FwZSBldmVudCBoYW5kbGVycwoKICAoMCwgX3JlYWN0LnVzZUVmZmVjdCkoZnVuY3Rpb24gKCkgewogICAgdmFyIHJlc2V0Q29ubmVjdGVkRWRnZVN0eWxlID0gZnVuY3Rpb24gcmVzZXRDb25uZWN0ZWRFZGdlU3R5bGUobm9kZSkgewogICAgICBpZiAoY3kpIHsKICAgICAgICBjeS5lZGdlcygpLnJlbW92ZUNsYXNzKCdoaWdobGlnaHQnKTsKCiAgICAgICAgaWYgKG5vZGUpIHsKICAgICAgICAgIG5vZGUuY29ubmVjdGVkRWRnZXMoKS5hZGRDbGFzcygnaGlnaGxpZ2h0Jyk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIHZhciBkYXRhSGFuZGxlciA9IGZ1bmN0aW9uIGRhdGFIYW5kbGVyKGV2ZW50KSB7CiAgICAgIGlmIChjeSkgewogICAgICAgIGlmIChzZXJ2aWNlTmFtZSkgewogICAgICAgICAgcmVzZXRDb25uZWN0ZWRFZGdlU3R5bGUoY3kuZ2V0RWxlbWVudEJ5SWQoc2VydmljZU5hbWUpKTsgLy8gQWRkIHRoZSAicHJpbWFyeSIgY2xhc3MgdG8gdGhlIG5vZGUgaWYgaXRzIGlkIG1hdGNoZXMgdGhlIHNlcnZpY2VOYW1lLgoKICAgICAgICAgIGlmIChjeS5ub2RlcygpLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgY3kubm9kZXMoKS5yZW1vdmVDbGFzcygncHJpbWFyeScpOwogICAgICAgICAgICBjeS5nZXRFbGVtZW50QnlJZChzZXJ2aWNlTmFtZSkuYWRkQ2xhc3MoJ3ByaW1hcnknKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzZXRDb25uZWN0ZWRFZGdlU3R5bGUoKTsKICAgICAgICB9CgogICAgICAgIHZhciBzZWxlY3RlZFJvb3RzID0gc2VsZWN0Um9vdHMoZXZlbnQuY3kpOwogICAgICAgIHZhciBsYXlvdXQgPSBjeS5sYXlvdXQoZ2V0TGF5b3V0T3B0aW9ucyhzZWxlY3RlZFJvb3RzLCBoZWlnaHQsIHdpZHRoKSk7CiAgICAgICAgbGF5b3V0LnJ1bigpOwogICAgICB9CiAgICB9OwoKICAgIHZhciBsYXlvdXRzdG9wRGVsYXlUaW1lb3V0OwoKICAgIHZhciBsYXlvdXRzdG9wSGFuZGxlciA9IGZ1bmN0aW9uIGxheW91dHN0b3BIYW5kbGVyKGV2ZW50KSB7CiAgICAgIC8vIFRoaXMgMG1zIHRpbWVyIGlzIG5lY2Vzc2FyeSB0byBwcmV2ZW50IGEgcmFjZSBjb25kaXRpb24KICAgICAgLy8gYmV0d2VlbiB0aGUgbGF5b3V0IGZpbmlzaGluZyByZW5kZXJpbmcgYW5kIHZpZXdwb3J0IGNlbnRlcmluZwogICAgICBsYXlvdXRzdG9wRGVsYXlUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHNlcnZpY2VOYW1lKSB7CiAgICAgICAgICBldmVudC5jeS5hbmltYXRlKF9vYmplY3RTcHJlYWQoe30sIF9jeXRvc2NhcGVPcHRpb25zLmFuaW1hdGlvbk9wdGlvbnMsIHsKICAgICAgICAgICAgZml0OiB7CiAgICAgICAgICAgICAgZWxlczogZXZlbnQuY3kuZWxlbWVudHMoKSwKICAgICAgICAgICAgICBwYWRkaW5nOiBfY3l0b3NjYXBlT3B0aW9ucy5ub2RlSGVpZ2h0CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNlbnRlcjogewogICAgICAgICAgICAgIGVsZXM6IGV2ZW50LmN5LmdldEVsZW1lbnRCeUlkKHNlcnZpY2VOYW1lKQogICAgICAgICAgICB9CiAgICAgICAgICB9KSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGV2ZW50LmN5LmZpdCh1bmRlZmluZWQsIF9jeXRvc2NhcGVPcHRpb25zLm5vZGVIZWlnaHQpOwogICAgICAgIH0KICAgICAgfSwgMCk7CiAgICB9OyAvLyBkZWJvdW5jZSBob3ZlciB0cmFja2luZyBzbyBpdCBkb2Vzbid0IHNwYW0gdGVsZW1ldHJ5IHdpdGggcmVkdW5kYW50IGV2ZW50cwoKCiAgICB2YXIgdHJhY2tOb2RlRWRnZUhvdmVyID0gKDAsIF9sb2Rhc2guZGVib3VuY2UpKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRyYWNrQXBtRXZlbnQoewogICAgICAgIG1ldHJpYzogJ3NlcnZpY2VfbWFwX25vZGVfb3JfZWRnZV9ob3ZlcicKICAgICAgfSk7CiAgICB9LCAxMDAwKTsKCiAgICB2YXIgbW91c2VvdmVySGFuZGxlciA9IGZ1bmN0aW9uIG1vdXNlb3ZlckhhbmRsZXIoZXZlbnQpIHsKICAgICAgdHJhY2tOb2RlRWRnZUhvdmVyKCk7CiAgICAgIGV2ZW50LnRhcmdldC5hZGRDbGFzcygnaG92ZXInKTsKICAgICAgZXZlbnQudGFyZ2V0LmNvbm5lY3RlZEVkZ2VzKCkuYWRkQ2xhc3MoJ25vZGVIb3ZlcicpOwogICAgfTsKCiAgICB2YXIgbW91c2VvdXRIYW5kbGVyID0gZnVuY3Rpb24gbW91c2VvdXRIYW5kbGVyKGV2ZW50KSB7CiAgICAgIGV2ZW50LnRhcmdldC5yZW1vdmVDbGFzcygnaG92ZXInKTsKICAgICAgZXZlbnQudGFyZ2V0LmNvbm5lY3RlZEVkZ2VzKCkucmVtb3ZlQ2xhc3MoJ25vZGVIb3ZlcicpOwogICAgfTsKCiAgICB2YXIgc2VsZWN0SGFuZGxlciA9IGZ1bmN0aW9uIHNlbGVjdEhhbmRsZXIoZXZlbnQpIHsKICAgICAgdHJhY2tBcG1FdmVudCh7CiAgICAgICAgbWV0cmljOiAnc2VydmljZV9tYXBfbm9kZV9zZWxlY3QnCiAgICAgIH0pOwogICAgICByZXNldENvbm5lY3RlZEVkZ2VTdHlsZShldmVudC50YXJnZXQpOwogICAgfTsKCiAgICB2YXIgdW5zZWxlY3RIYW5kbGVyID0gZnVuY3Rpb24gdW5zZWxlY3RIYW5kbGVyKGV2ZW50KSB7CiAgICAgIHJlc2V0Q29ubmVjdGVkRWRnZVN0eWxlKCk7CiAgICB9OwoKICAgIHZhciBkZWJ1Z0hhbmRsZXIgPSBmdW5jdGlvbiBkZWJ1Z0hhbmRsZXIoZXZlbnQpIHsKICAgICAgdmFyIGRlYnVnRW5hYmxlZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2FwbV9kZWJ1ZycpID09PSAndHJ1ZSc7CgogICAgICBpZiAoZGVidWdFbmFibGVkKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICBjb25zb2xlLmRlYnVnKCdjeXRvc2NhcGU6JywgZXZlbnQpOwogICAgICB9CiAgICB9OwoKICAgIGlmIChjeSkgewogICAgICBjeS5vbignZGF0YSBsYXlvdXRzdG9wIHNlbGVjdCB1bnNlbGVjdCcsIGRlYnVnSGFuZGxlcik7CiAgICAgIGN5Lm9uKCdkYXRhJywgZGF0YUhhbmRsZXIpOwogICAgICBjeS5vbignbGF5b3V0c3RvcCcsIGxheW91dHN0b3BIYW5kbGVyKTsKICAgICAgY3kub24oJ21vdXNlb3ZlcicsICdlZGdlLCBub2RlJywgbW91c2VvdmVySGFuZGxlcik7CiAgICAgIGN5Lm9uKCdtb3VzZW91dCcsICdlZGdlLCBub2RlJywgbW91c2VvdXRIYW5kbGVyKTsKICAgICAgY3kub24oJ3NlbGVjdCcsICdub2RlJywgc2VsZWN0SGFuZGxlcik7CiAgICAgIGN5Lm9uKCd1bnNlbGVjdCcsICdub2RlJywgdW5zZWxlY3RIYW5kbGVyKTsKICAgIH0KCiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBpZiAoY3kpIHsKICAgICAgICBjeS5yZW1vdmVMaXN0ZW5lcignZGF0YSBsYXlvdXRzdG9wIHNlbGVjdCB1bnNlbGVjdCcsIHVuZGVmaW5lZCwgZGVidWdIYW5kbGVyKTsKICAgICAgICBjeS5yZW1vdmVMaXN0ZW5lcignZGF0YScsIHVuZGVmaW5lZCwgZGF0YUhhbmRsZXIpOwogICAgICAgIGN5LnJlbW92ZUxpc3RlbmVyKCdsYXlvdXRzdG9wJywgdW5kZWZpbmVkLCBsYXlvdXRzdG9wSGFuZGxlcik7CiAgICAgICAgY3kucmVtb3ZlTGlzdGVuZXIoJ21vdXNlb3ZlcicsICdlZGdlLCBub2RlJywgbW91c2VvdmVySGFuZGxlcik7CiAgICAgICAgY3kucmVtb3ZlTGlzdGVuZXIoJ21vdXNlb3V0JywgJ2VkZ2UsIG5vZGUnLCBtb3VzZW91dEhhbmRsZXIpOwogICAgICAgIGN5LnJlbW92ZUxpc3RlbmVyKCdzZWxlY3QnLCAnbm9kZScsIHNlbGVjdEhhbmRsZXIpOwogICAgICAgIGN5LnJlbW92ZUxpc3RlbmVyKCd1bnNlbGVjdCcsICdub2RlJywgdW5zZWxlY3RIYW5kbGVyKTsKICAgICAgfQoKICAgICAgY2xlYXJUaW1lb3V0KGxheW91dHN0b3BEZWxheVRpbWVvdXQpOwogICAgfTsKICB9LCBbY3ksIGhlaWdodCwgc2VydmljZU5hbWUsIHRyYWNrQXBtRXZlbnQsIHdpZHRoXSk7CiAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQ3l0b3NjYXBlQ29udGV4dC5Qcm92aWRlciwgewogICAgdmFsdWU6IGN5CiAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgcmVmOiByZWYsCiAgICBzdHlsZTogZGl2U3R5bGUKICB9LCBjaGlsZHJlbikpOwp9"},null]}