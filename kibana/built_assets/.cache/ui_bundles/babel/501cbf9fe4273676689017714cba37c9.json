{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!x-pack/legacy/plugins/maps/public/connected_components/layer_addpanel/view.js","dependencies":[{"path":"x-pack/legacy/plugins/maps/public/connected_components/layer_addpanel/view.js","mtime":1589249552400},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkFkZExheWVyUGFuZWwgPSB2b2lkIDA7Cgp2YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZSgicmVhY3QiKSk7Cgp2YXIgX3NvdXJjZV9zZWxlY3QgPSByZXF1aXJlKCIuL3NvdXJjZV9zZWxlY3Qvc291cmNlX3NlbGVjdCIpOwoKdmFyIF9mbHlvdXRfZm9vdGVyID0gcmVxdWlyZSgiLi9mbHlvdXRfZm9vdGVyIik7Cgp2YXIgX3NvdXJjZV9lZGl0b3IgPSByZXF1aXJlKCIuL3NvdXJjZV9lZGl0b3IiKTsKCnZhciBfaW1wb3J0X2VkaXRvciA9IHJlcXVpcmUoIi4vaW1wb3J0X2VkaXRvciIpOwoKdmFyIF9ldWkgPSByZXF1aXJlKCJAZWxhc3RpYy9ldWkiKTsKCnZhciBfaTE4biA9IHJlcXVpcmUoIkBrYm4vaTE4biIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfQoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9CgpmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9CgpmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9CgpmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBzZWxmOyB9CgpmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24iKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9CgpmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH0KCnZhciBBZGRMYXllclBhbmVsID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhBZGRMYXllclBhbmVsLCBfQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gQWRkTGF5ZXJQYW5lbCgpIHsKICAgIHZhciBfZ2V0UHJvdG90eXBlT2YyOwoKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWRkTGF5ZXJQYW5lbCk7CgogICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICB9CgogICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoX2dldFByb3RvdHlwZU9mMiA9IF9nZXRQcm90b3R5cGVPZihBZGRMYXllclBhbmVsKSkuY2FsbC5hcHBseShfZ2V0UHJvdG90eXBlT2YyLCBbdGhpc10uY29uY2F0KGFyZ3MpKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic3RhdGUiLCB7CiAgICAgIHNvdXJjZVR5cGU6IG51bGwsCiAgICAgIGxheWVyOiBudWxsLAogICAgICBpbXBvcnRWaWV3OiBmYWxzZSwKICAgICAgbGF5ZXJJbXBvcnRBZGRSZWFkeTogZmFsc2UKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl92aWV3TGF5ZXIiLAogICAgLyojX19QVVJFX18qLwogICAgZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoc291cmNlKSB7CiAgICAgICAgdmFyIG9wdGlvbnMsCiAgICAgICAgICAgIHN0eWxlLAogICAgICAgICAgICBsYXllckluaXRQcm9wcywKICAgICAgICAgICAgbmV3TGF5ZXIsCiAgICAgICAgICAgIF9hcmdzID0gYXJndW1lbnRzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBfYXJncy5sZW5ndGggPiAxICYmIF9hcmdzWzFdICE9PSB1bmRlZmluZWQgPyBfYXJnc1sxXSA6IHt9OwoKICAgICAgICAgICAgICAgIGlmIChfdGhpcy5faXNNb3VudGVkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgaWYgKHNvdXJjZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICBsYXllcjogbnVsbAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgX3RoaXMucHJvcHMucmVtb3ZlVHJhbnNpZW50TGF5ZXIoKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgc3R5bGUgPSBfdGhpcy5zdGF0ZS5sYXllciAmJiBfdGhpcy5zdGF0ZS5sYXllci5nZXRDdXJyZW50U3R5bGUoKSA/IF90aGlzLnN0YXRlLmxheWVyLmdldEN1cnJlbnRTdHlsZSgpLmdldERlc2NyaXB0b3IoKSA6IG51bGw7CiAgICAgICAgICAgICAgICBsYXllckluaXRQcm9wcyA9IF9vYmplY3RTcHJlYWQoe30sIG9wdGlvbnMsIHsKICAgICAgICAgICAgICAgICAgc3R5bGU6IHN0eWxlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG5ld0xheWVyID0gc291cmNlLmNyZWF0ZURlZmF1bHRMYXllcihsYXllckluaXRQcm9wcywgX3RoaXMucHJvcHMubWFwQ29sb3JzKTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuX2lzTW91bnRlZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICBsYXllcjogbmV3TGF5ZXIKICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByb3BzLnZpZXdMYXllcihfdGhpcy5zdGF0ZS5sYXllcik7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX2NsZWFyTGF5ZXJEYXRhIiwgZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgIHZhciBfcmVmMiRrZWVwU291cmNlVHlwZSA9IF9yZWYyLmtlZXBTb3VyY2VUeXBlLAogICAgICAgICAga2VlcFNvdXJjZVR5cGUgPSBfcmVmMiRrZWVwU291cmNlVHlwZSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmMiRrZWVwU291cmNlVHlwZTsKCiAgICAgIGlmICghX3RoaXMuX2lzTW91bnRlZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgX3RoaXMuc2V0U3RhdGUoX29iamVjdFNwcmVhZCh7CiAgICAgICAgbGF5ZXI6IG51bGwKICAgICAgfSwgIWtlZXBTb3VyY2VUeXBlID8gewogICAgICAgIHNvdXJjZVR5cGU6IG51bGwsCiAgICAgICAgaW1wb3J0VmlldzogZmFsc2UKICAgICAgfSA6IHt9KSk7CgogICAgICBfdGhpcy5wcm9wcy5yZW1vdmVUcmFuc2llbnRMYXllcigpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX29uU291cmNlU2VsZWN0aW9uQ2hhbmdlIiwgZnVuY3Rpb24gKF9yZWYzKSB7CiAgICAgIHZhciB0eXBlID0gX3JlZjMudHlwZSwKICAgICAgICAgIGlzSW5kZXhpbmdTb3VyY2UgPSBfcmVmMy5pc0luZGV4aW5nU291cmNlOwoKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIHNvdXJjZVR5cGU6IHR5cGUsCiAgICAgICAgaW1wb3J0VmlldzogaXNJbmRleGluZ1NvdXJjZQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9sYXllckFkZEhhbmRsZXIiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLAogICAgICAgICAgaXNJbmRleGluZ1RyaWdnZXJlZCA9IF90aGlzJHByb3BzLmlzSW5kZXhpbmdUcmlnZ2VyZWQsCiAgICAgICAgICBzZXRJbmRleGluZ1RyaWdnZXJlZCA9IF90aGlzJHByb3BzLnNldEluZGV4aW5nVHJpZ2dlcmVkLAogICAgICAgICAgc2VsZWN0TGF5ZXJBbmRBZGQgPSBfdGhpcyRwcm9wcy5zZWxlY3RMYXllckFuZEFkZCwKICAgICAgICAgIHJlc2V0SW5kZXhpbmcgPSBfdGhpcyRwcm9wcy5yZXNldEluZGV4aW5nOwoKICAgICAgdmFyIGxheWVyU291cmNlID0gX3RoaXMuc3RhdGUubGF5ZXIuZ2V0U291cmNlKCk7CgogICAgICB2YXIgYm9vbEluZGV4TGF5ZXIgPSBsYXllclNvdXJjZS5zaG91bGRCZUluZGV4ZWQoKTsKCiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBsYXllcjogbnVsbAogICAgICB9KTsKCiAgICAgIGlmIChib29sSW5kZXhMYXllciAmJiAhaXNJbmRleGluZ1RyaWdnZXJlZCkgewogICAgICAgIHNldEluZGV4aW5nVHJpZ2dlcmVkKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2VsZWN0TGF5ZXJBbmRBZGQoKTsKCiAgICAgICAgaWYgKF90aGlzLnN0YXRlLmltcG9ydFZpZXcpIHsKICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgbGF5ZXJJbXBvcnRBZGRSZWFkeTogZmFsc2UKICAgICAgICAgIH0pOwoKICAgICAgICAgIHJlc2V0SW5kZXhpbmcoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwoKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhBZGRMYXllclBhbmVsLCBbewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICB0aGlzLl9pc01vdW50ZWQgPSB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudFdpbGxVbm1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHsKICAgICAgdGhpcy5faXNNb3VudGVkID0gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50RGlkVXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7CiAgICAgIGlmICghdGhpcy5zdGF0ZS5sYXllckltcG9ydEFkZFJlYWR5ICYmIHRoaXMucHJvcHMuaXNJbmRleGluZ1N1Y2Nlc3MpIHsKICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGxheWVySW1wb3J0QWRkUmVhZHk6IHRydWUKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIl9nZXRQYW5lbERlc2NyaXB0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0UGFuZWxEZXNjcmlwdGlvbigpIHsKICAgICAgdmFyIF90aGlzJHN0YXRlID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIHNvdXJjZVR5cGUgPSBfdGhpcyRzdGF0ZS5zb3VyY2VUeXBlLAogICAgICAgICAgaW1wb3J0VmlldyA9IF90aGlzJHN0YXRlLmltcG9ydFZpZXcsCiAgICAgICAgICBsYXllckltcG9ydEFkZFJlYWR5ID0gX3RoaXMkc3RhdGUubGF5ZXJJbXBvcnRBZGRSZWFkeTsKICAgICAgdmFyIHBhbmVsRGVzY3JpcHRpb247CgogICAgICBpZiAoIXNvdXJjZVR5cGUpIHsKICAgICAgICBwYW5lbERlc2NyaXB0aW9uID0gX2kxOG4uaTE4bi50cmFuc2xhdGUoJ3hwYWNrLm1hcHMuYWRkTGF5ZXJQYW5lbC5zZWxlY3RTb3VyY2UnLCB7CiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1NlbGVjdCBzb3VyY2UnCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAobGF5ZXJJbXBvcnRBZGRSZWFkeSB8fCAhaW1wb3J0VmlldykgewogICAgICAgIHBhbmVsRGVzY3JpcHRpb24gPSBfaTE4bi5pMThuLnRyYW5zbGF0ZSgneHBhY2subWFwcy5hZGRMYXllclBhbmVsLmFkZExheWVyJywgewogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdBZGQgbGF5ZXInCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcGFuZWxEZXNjcmlwdGlvbiA9IF9pMThuLmkxOG4udHJhbnNsYXRlKCd4cGFjay5tYXBzLmFkZExheWVyUGFuZWwuaW1wb3J0RmlsZScsIHsKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnSW1wb3J0IGZpbGUnCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBwYW5lbERlc2NyaXB0aW9uOwogICAgfQogIH0sIHsKICAgIGtleTogIl9yZW5kZXJBZGRMYXllclBhbmVsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVuZGVyQWRkTGF5ZXJQYW5lbCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgX3RoaXMkc3RhdGUyID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIHNvdXJjZVR5cGUgPSBfdGhpcyRzdGF0ZTIuc291cmNlVHlwZSwKICAgICAgICAgIGltcG9ydFZpZXcgPSBfdGhpcyRzdGF0ZTIuaW1wb3J0VmlldzsKCiAgICAgIGlmICghc291cmNlVHlwZSkgewogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9zb3VyY2Vfc2VsZWN0LlNvdXJjZVNlbGVjdCwgewogICAgICAgICAgdXBkYXRlU291cmNlU2VsZWN0aW9uOiB0aGlzLl9vblNvdXJjZVNlbGVjdGlvbkNoYW5nZQogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoaW1wb3J0VmlldykgewogICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9pbXBvcnRfZWRpdG9yLkltcG9ydEVkaXRvciwgewogICAgICAgICAgY2xlYXJTb3VyY2U6IHRoaXMuX2NsZWFyTGF5ZXJEYXRhLAogICAgICAgICAgdmlld0xheWVyOiB0aGlzLl92aWV3TGF5ZXIsCiAgICAgICAgICBvblJlbW92ZTogZnVuY3Rpb24gb25SZW1vdmUoKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczIuX2NsZWFyTGF5ZXJEYXRhKHsKICAgICAgICAgICAgICBrZWVwU291cmNlVHlwZTogdHJ1ZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3NvdXJjZV9lZGl0b3IuU291cmNlRWRpdG9yLCB7CiAgICAgICAgY2xlYXJTb3VyY2U6IHRoaXMuX2NsZWFyTGF5ZXJEYXRhLAogICAgICAgIHNvdXJjZVR5cGU6IHNvdXJjZVR5cGUsCiAgICAgICAgcHJldmlld0xheWVyOiB0aGlzLl92aWV3TGF5ZXIKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3JlbmRlckZvb3RlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbmRlckZvb3RlcihidXR0b25EZXNjcmlwdGlvbikgewogICAgICB2YXIgX3RoaXMkc3RhdGUzID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIGltcG9ydFZpZXcgPSBfdGhpcyRzdGF0ZTMuaW1wb3J0VmlldywKICAgICAgICAgIGxheWVyID0gX3RoaXMkc3RhdGUzLmxheWVyOwogICAgICB2YXIgX3RoaXMkcHJvcHMyID0gdGhpcy5wcm9wcywKICAgICAgICAgIGlzSW5kZXhpbmdSZWFkeSA9IF90aGlzJHByb3BzMi5pc0luZGV4aW5nUmVhZHksCiAgICAgICAgICBpc0luZGV4aW5nU3VjY2VzcyA9IF90aGlzJHByb3BzMi5pc0luZGV4aW5nU3VjY2VzczsKICAgICAgdmFyIGJ1dHRvbkVuYWJsZWQgPSBpbXBvcnRWaWV3ID8gaXNJbmRleGluZ1JlYWR5IHx8IGlzSW5kZXhpbmdTdWNjZXNzIDogISFsYXllcjsKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2ZseW91dF9mb290ZXIuRmx5b3V0Rm9vdGVyLCB7CiAgICAgICAgc2hvd05leHRCdXR0b246ICEhdGhpcy5zdGF0ZS5zb3VyY2VUeXBlLAogICAgICAgIGRpc2FibGVOZXh0QnV0dG9uOiAhYnV0dG9uRW5hYmxlZCwKICAgICAgICBvbkNsaWNrOiB0aGlzLl9sYXllckFkZEhhbmRsZXIsCiAgICAgICAgbmV4dEJ1dHRvblRleHQ6IGJ1dHRvbkRlc2NyaXB0aW9uCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIl9yZW5kZXJGbHlvdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW5kZXJGbHlvdXQoKSB7CiAgICAgIHZhciBwYW5lbERlc2NyaXB0aW9uID0gdGhpcy5fZ2V0UGFuZWxEZXNjcmlwdGlvbigpOwoKICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX2V1aS5FdWlGbGV4R3JvdXAsIHsKICAgICAgICBkaXJlY3Rpb246ICJjb2x1bW4iLAogICAgICAgIGd1dHRlclNpemU6ICJub25lIgogICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9ldWkuRXVpRmx5b3V0SGVhZGVyLCB7CiAgICAgICAgaGFzQm9yZGVyOiB0cnVlLAogICAgICAgIGNsYXNzTmFtZTogIm1hcExheWVyUGFuZWxfX2hlYWRlciIKICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfZXVpLkV1aVRpdGxlLCB7CiAgICAgICAgc2l6ZTogInMiCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImgyIiwgbnVsbCwgcGFuZWxEZXNjcmlwdGlvbikpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogIm1hcExheWVyUGFuZWxfX2JvZHkiLAogICAgICAgICJkYXRhLXRlc3Qtc3ViaiI6ICJsYXllckFkZEZvcm0iCiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBjbGFzc05hbWU6ICJtYXBMYXllclBhbmVsX19ib2R5T3ZlcmZsb3ciCiAgICAgIH0sIHRoaXMuX3JlbmRlckFkZExheWVyUGFuZWwoKSkpLCB0aGlzLl9yZW5kZXJGb290ZXIocGFuZWxEZXNjcmlwdGlvbikpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICByZXR1cm4gdGhpcy5wcm9wcy5mbHlvdXRWaXNpYmxlID8gdGhpcy5fcmVuZGVyRmx5b3V0KCkgOiBudWxsOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEFkZExheWVyUGFuZWw7Cn0oX3JlYWN0LkNvbXBvbmVudCk7CgpleHBvcnRzLkFkZExheWVyUGFuZWwgPSBBZGRMYXllclBhbmVsOw=="},null]}