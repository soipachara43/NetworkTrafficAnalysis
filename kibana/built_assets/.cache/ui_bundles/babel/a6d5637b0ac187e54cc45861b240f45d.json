{"remainingRequest":"node_modules/thread-loader/dist/cjs.js??ref--8-1!node_modules/babel-loader/lib/index.js??ref--8-2!src/plugins/kibana_legacy/public/angular/angular_config.js","dependencies":[{"path":"src/plugins/kibana_legacy/public/angular/angular_config.js","mtime":1589249550927},{"path":"node_modules/cache-loader/dist/cjs.js","mtime":1589249605183},{"path":"node_modules/thread-loader/dist/cjs.js","mtime":1589249608558},{"path":"node_modules/babel-loader/lib/index.js","mtime":1589249591025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLiRzZXR1cFhzcmZSZXF1ZXN0SW50ZXJjZXB0b3IgPSBleHBvcnRzLmNvbmZpZ3VyZUFwcEFuZ3VsYXJNb2R1bGUgPSB2b2lkIDA7Cgp2YXIgX2pxdWVyeSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgianF1ZXJ5IikpOwoKdmFyIF9sb2Rhc2ggPSByZXF1aXJlKCJsb2Rhc2giKTsKCnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJyZWFjdCIpKTsKCnZhciBSeCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoInJ4anMiKSk7Cgp2YXIgX2kxOG4gPSByZXF1aXJlKCJAa2JuL2kxOG4iKTsKCnZhciBfcmVhY3QyID0gcmVxdWlyZSgiQGtibi9pMThuL3JlYWN0Iik7Cgp2YXIgX3V0aWxzID0gcmVxdWlyZSgiLi4vLi4vLi4vLi4vY29yZS91dGlscyIpOwoKdmFyIF9wdWJsaWMgPSByZXF1aXJlKCIuLi8uLi8uLi9raWJhbmFfcmVhY3QvcHVibGljIik7Cgp2YXIgX3V0aWxzMiA9IHJlcXVpcmUoIi4uL3V0aWxzIik7Cgp2YXIgX2xpYiA9IHJlcXVpcmUoIi4uL25vdGlmeS9saWIiKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgewogIGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgIHJldHVybiBvYmo7CiAgfSBlbHNlIHsKICAgIHZhciBuZXdPYmogPSB7fTsKCiAgICBpZiAob2JqICE9IG51bGwpIHsKICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7CiAgICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsKCiAgICAgICAgICBpZiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgbmV3T2JqLmRlZmF1bHQgPSBvYmo7CiAgICByZXR1cm4gbmV3T2JqOwogIH0KfQoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgZGVmYXVsdDogb2JqCiAgfTsKfQovKgogKiBMaWNlbnNlZCB0byBFbGFzdGljc2VhcmNoIEIuVi4gdW5kZXIgb25lIG9yIG1vcmUgY29udHJpYnV0b3IKICogbGljZW5zZSBhZ3JlZW1lbnRzLiBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3RyaWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQKICogb3duZXJzaGlwLiBFbGFzdGljc2VhcmNoIEIuVi4gbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlcgogKiB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heQogKiBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQogKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCgp2YXIgVVJMX0xJTUlUX1dBUk5fV0lUSElOID0gMTAwMDsKLyoqCiAqIERldGVjdHMgd2hldGhlciBhIGdpdmVuIGFuZ3VsYXIgcm91dGUgaXMgYSBkdW1teSByb3V0ZSB0aGF0IGRvZXNuJ3QKICogcmVxdWlyZSBhbnkgYWN0aW9uLiBUaGVyZSBhcmUgdHdvIHdheXMgdGhpcyBjYW4gaGFwcGVuOgogKiBJZiBgb3V0ZXJBbmd1bGFyV3JhcHBlclJvdXRlYCBpcyBzZXQgb24gdGhlIHJvdXRlIGNvbmZpZyBvYmplY3QsCiAqIGl0IG1lYW5zIHRoZSBsb2NhbCBhcHBsaWNhdGlvbiBzZXJ2aWNlIHNldCB1cCB0aGlzIHJvdXRlIG9uIHRoZSBvdXRlciBhbmd1bGFyCiAqIGFuZCB0aGUgaW50ZXJuYWwgcm91dGVzIHdpbGwgaGFuZGxlIHRoZSBob29rcy4KICoKICogSWYgYW5ndWxhciBkaWQgbm90IGRldGVjdCBhIHJvdXRlIGFuZCBpdCBpcyB0aGUgbG9jYWwgYW5ndWxhciwgd2UgYXJlIGN1cnJlbnRseQogKiBuYXZpZ2F0aW5nIGF3YXkgZnJvbSBhIFVSTCBjb250cm9sbGVkIGJ5IGEgbG9jYWwgYW5ndWxhciByb3V0ZXIgYW5kIHRoZQogKiBhcHBsaWNhdGlvbiB3aWxsIGdldCB1bm1vdW50ZWQuIEluIHRoaXMgY2FzZSB0aGUgb3V0ZXIgcm91dGVyIHdpbGwgaGFuZGxlCiAqIHRoZSBob29rcy4KICogQHBhcmFtICRyb3V0ZSBJbmplY3RlZCAkcm91dGUgZGVwZW5kZW5jeQogKiBAcGFyYW0gaXNMb2NhbEFuZ3VsYXIgRmxhZyB3aGV0aGVyIHRoaXMgaXMgdGhlIGxvY2FsIGFuZ3VsYXIgcm91dGVyCiAqLwoKZnVuY3Rpb24gaXNEdW1teVJvdXRlKCRyb3V0ZSwgaXNMb2NhbEFuZ3VsYXIpIHsKICByZXR1cm4gJHJvdXRlLmN1cnJlbnQgJiYgJHJvdXRlLmN1cnJlbnQuJCRyb3V0ZSAmJiAkcm91dGUuY3VycmVudC4kJHJvdXRlLm91dGVyQW5ndWxhcldyYXBwZXJSb3V0ZSB8fCAhJHJvdXRlLmN1cnJlbnQgJiYgaXNMb2NhbEFuZ3VsYXI7Cn0KCnZhciBjb25maWd1cmVBcHBBbmd1bGFyTW9kdWxlID0gZnVuY3Rpb24gY29uZmlndXJlQXBwQW5ndWxhck1vZHVsZShhbmd1bGFyTW9kdWxlLCBuZXdQbGF0Zm9ybSwgaXNMb2NhbEFuZ3VsYXIpIHsKICB2YXIgY29yZSA9ICdjb3JlJyBpbiBuZXdQbGF0Zm9ybSA/IG5ld1BsYXRmb3JtLmNvcmUgOiBuZXdQbGF0Zm9ybTsKICB2YXIgcGFja2FnZUluZm8gPSAnaW5qZWN0ZWRNZXRhZGF0YScgaW4gbmV3UGxhdGZvcm0gPyBuZXdQbGF0Zm9ybS5pbmplY3RlZE1ldGFkYXRhLmdldExlZ2FjeU1ldGFkYXRhKCkgOiBuZXdQbGF0Zm9ybS5lbnYucGFja2FnZUluZm87CgogIGlmICgnaW5qZWN0ZWRNZXRhZGF0YScgaW4gbmV3UGxhdGZvcm0pIHsKICAgICgwLCBfbG9kYXNoLmZvck93bikobmV3UGxhdGZvcm0uaW5qZWN0ZWRNZXRhZGF0YS5nZXRJbmplY3RlZFZhcnMoKSwgZnVuY3Rpb24gKHZhbCwgbmFtZSkgewogICAgICBpZiAobmFtZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgLy8gVGhlIGxlZ2FjeSBwbGF0Zm9ybSBtb2RpZmllcyBzb21lIG9mIHRoZXNlIHZhbHVlcywgY2xvbmUgdG8gYW4gdW5mcm96ZW4gb2JqZWN0LgogICAgICAgIGFuZ3VsYXJNb2R1bGUudmFsdWUobmFtZSwgKDAsIF9sb2Rhc2guY2xvbmVEZWVwKSh2YWwpKTsKICAgICAgfQogICAgfSk7CiAgfQoKICBhbmd1bGFyTW9kdWxlLnZhbHVlKCdrYm5WZXJzaW9uJywgcGFja2FnZUluZm8udmVyc2lvbikudmFsdWUoJ2J1aWxkTnVtJywgcGFja2FnZUluZm8uYnVpbGROdW0pLnZhbHVlKCdidWlsZFNoYScsIHBhY2thZ2VJbmZvLmJ1aWxkU2hhKS52YWx1ZSgnZXNVcmwnLCBnZXRFc1VybChjb3JlKSkudmFsdWUoJ3VpQ2FwYWJpbGl0aWVzJywgY29yZS5hcHBsaWNhdGlvbi5jYXBhYmlsaXRpZXMpLmNvbmZpZyhzZXR1cENvbXBpbGVQcm92aWRlcignaW5qZWN0ZWRNZXRhZGF0YScgaW4gbmV3UGxhdGZvcm0gPyBuZXdQbGF0Zm9ybS5pbmplY3RlZE1ldGFkYXRhLmdldExlZ2FjeU1ldGFkYXRhKCkuZGV2TW9kZSA6IG5ld1BsYXRmb3JtLmVudi5tb2RlLmRldikpLmNvbmZpZyhzZXR1cExvY2F0aW9uUHJvdmlkZXIoKSkuY29uZmlnKCRzZXR1cFhzcmZSZXF1ZXN0SW50ZXJjZXB0b3IocGFja2FnZUluZm8udmVyc2lvbikpLnJ1bihjYXB0dXJlJGh0dHBMb2FkaW5nQ291bnQoY29yZSkpLnJ1bigkc2V0dXBCcmVhZGNydW1ic0F1dG9DbGVhcihjb3JlLCBpc0xvY2FsQW5ndWxhcikpLnJ1bigkc2V0dXBCYWRnZUF1dG9DbGVhcihjb3JlLCBpc0xvY2FsQW5ndWxhcikpLnJ1bigkc2V0dXBIZWxwRXh0ZW5zaW9uQXV0b0NsZWFyKGNvcmUsIGlzTG9jYWxBbmd1bGFyKSkucnVuKCRzZXR1cFVybE92ZXJmbG93SGFuZGxpbmcoY29yZSwgaXNMb2NhbEFuZ3VsYXIpKS5ydW4oJHNldHVwVUlDYXBhYmlsaXR5UmVkaXJlY3QoY29yZSkpOwp9OwoKZXhwb3J0cy5jb25maWd1cmVBcHBBbmd1bGFyTW9kdWxlID0gY29uZmlndXJlQXBwQW5ndWxhck1vZHVsZTsKCnZhciBnZXRFc1VybCA9IGZ1bmN0aW9uIGdldEVzVXJsKG5ld1BsYXRmb3JtKSB7CiAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgYS5ocmVmID0gbmV3UGxhdGZvcm0uaHR0cC5iYXNlUGF0aC5wcmVwZW5kKCcvZWxhc3RpY3NlYXJjaCcpOwogIHZhciBwcm90b2NvbFBvcnQgPSAvaHR0cHMvLnRlc3QoYS5wcm90b2NvbCkgPyA0NDMgOiA4MDsKICB2YXIgcG9ydCA9IGEucG9ydCB8fCBwcm90b2NvbFBvcnQ7CiAgcmV0dXJuIHsKICAgIGhvc3Q6IGEuaG9zdG5hbWUsCiAgICBwb3J0OiBwb3J0LAogICAgcHJvdG9jb2w6IGEucHJvdG9jb2wsCiAgICBwYXRobmFtZTogYS5wYXRobmFtZQogIH07Cn07Cgp2YXIgc2V0dXBDb21waWxlUHJvdmlkZXIgPSBmdW5jdGlvbiBzZXR1cENvbXBpbGVQcm92aWRlcihkZXZNb2RlKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICgkY29tcGlsZVByb3ZpZGVyKSB7CiAgICBpZiAoIWRldk1vZGUpIHsKICAgICAgJGNvbXBpbGVQcm92aWRlci5kZWJ1Z0luZm9FbmFibGVkKGZhbHNlKTsKICAgIH0KICB9Owp9OwoKdmFyIHNldHVwTG9jYXRpb25Qcm92aWRlciA9IGZ1bmN0aW9uIHNldHVwTG9jYXRpb25Qcm92aWRlcigpIHsKICByZXR1cm4gZnVuY3Rpb24gKCRsb2NhdGlvblByb3ZpZGVyKSB7CiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoewogICAgICBlbmFibGVkOiBmYWxzZSwKICAgICAgcmVxdWlyZUJhc2U6IGZhbHNlLAogICAgICByZXdyaXRlTGlua3M6IGZhbHNlCiAgICB9KTsKICAgICRsb2NhdGlvblByb3ZpZGVyLmhhc2hQcmVmaXgoJycpOwogIH07Cn07Cgp2YXIgJHNldHVwWHNyZlJlcXVlc3RJbnRlcmNlcHRvciA9IGZ1bmN0aW9uICRzZXR1cFhzcmZSZXF1ZXN0SW50ZXJjZXB0b3IodmVyc2lvbikgewogIC8vIENvbmZpZ3VyZSBqUXVlcnkgcHJlZmlsdGVyCiAgX2pxdWVyeS5kZWZhdWx0LmFqYXhQcmVmaWx0ZXIoZnVuY3Rpb24gKF9yZWYsIG9yaWdpbmFsT3B0aW9ucywganFYSFIpIHsKICAgIHZhciBfcmVmJGtiblhzcmZUb2tlbiA9IF9yZWYua2JuWHNyZlRva2VuLAogICAgICAgIGtiblhzcmZUb2tlbiA9IF9yZWYka2JuWHNyZlRva2VuID09PSB2b2lkIDAgPyB0cnVlIDogX3JlZiRrYm5Yc3JmVG9rZW47CgogICAgaWYgKGtiblhzcmZUb2tlbikgewogICAgICBqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCdrYm4tdmVyc2lvbicsIHZlcnNpb24pOwogICAgfQogIH0pOwoKICByZXR1cm4gZnVuY3Rpb24gKCRodHRwUHJvdmlkZXIpIHsKICAgIC8vIENvbmZpZ3VyZSAkaHR0cFByb3ZpZGVyIGludGVyY2VwdG9yCiAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbiByZXF1ZXN0KG9wdHMpIHsKICAgICAgICAgIHZhciBfcmVmMiA9IG9wdHMsCiAgICAgICAgICAgICAgX3JlZjIka2JuWHNyZlRva2VuID0gX3JlZjIua2JuWHNyZlRva2VuLAogICAgICAgICAgICAgIGtiblhzcmZUb2tlbiA9IF9yZWYyJGtiblhzcmZUb2tlbiA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWYyJGtiblhzcmZUb2tlbjsKCiAgICAgICAgICBpZiAoa2JuWHNyZlRva2VuKSB7CiAgICAgICAgICAgICgwLCBfbG9kYXNoLnNldCkob3B0cywgWydoZWFkZXJzJywgJ2tibi12ZXJzaW9uJ10sIHZlcnNpb24pOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBvcHRzOwogICAgICAgIH0KICAgICAgfTsKICAgIH0pOwogIH07Cn07Ci8qKgogKiBJbmplY3RlZCBpbnRvIGFuZ3VsYXIgbW9kdWxlIGJ5IHVpL2Nocm9tZSBhbmd1bGFyIGludGVncmF0aW9uCiAqIGFuZCBhZGRzIGEgcm9vdC1sZXZlbCB3YXRjaGVyIHRoYXQgd2lsbCBjYXB0dXJlIHRoZSBjb3VudCBvZgogKiBhY3RpdmUgJGh0dHAgcmVxdWVzdHMgb24gZWFjaCBkaWdlc3QgbG9vcCBhbmQgZXhwb3NlIHRoZSBjb3VudCB0bwogKiB0aGUgY29yZS5sb2FkaW5nQ291bnQgYXBpCiAqLwoKCmV4cG9ydHMuJHNldHVwWHNyZlJlcXVlc3RJbnRlcmNlcHRvciA9ICRzZXR1cFhzcmZSZXF1ZXN0SW50ZXJjZXB0b3I7Cgp2YXIgY2FwdHVyZSRodHRwTG9hZGluZ0NvdW50ID0gZnVuY3Rpb24gY2FwdHVyZSRodHRwTG9hZGluZ0NvdW50KG5ld1BsYXRmb3JtKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkaHR0cCkgewogICAgbmV3UGxhdGZvcm0uaHR0cC5hZGRMb2FkaW5nQ291bnRTb3VyY2UobmV3IFJ4Lk9ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7CiAgICAgIHZhciB1bndhdGNoID0gJHJvb3RTY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIHZhciByZXFzID0gJGh0dHAucGVuZGluZ1JlcXVlc3RzIHx8IFtdOwogICAgICAgIG9ic2VydmVyLm5leHQocmVxcy5maWx0ZXIoZnVuY3Rpb24gKHJlcSkgewogICAgICAgICAgcmV0dXJuICEoMCwgX3V0aWxzMi5pc1N5c3RlbUFwaVJlcXVlc3QpKHJlcSk7CiAgICAgICAgfSkubGVuZ3RoKTsKICAgICAgfSk7CiAgICAgIHJldHVybiB1bndhdGNoOwogICAgfSkpOwogIH07Cn07Ci8qKgogKiBpbnRlZ3JhdGVzIHdpdGggYW5ndWxhciB0byBhdXRvbWF0aWNhbGx5IHJlZGlyZWN0IHRvIGhvbWUgaWYgcmVxdWlyZWQKICogY2FwYWJpbGl0eSBpcyBub3QgbWV0CiAqLwoKCnZhciAkc2V0dXBVSUNhcGFiaWxpdHlSZWRpcmVjdCA9IGZ1bmN0aW9uICRzZXR1cFVJQ2FwYWJpbGl0eVJlZGlyZWN0KG5ld1BsYXRmb3JtKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkaW5qZWN0b3IpIHsKICAgIHZhciBpc0tpYmFuYUFwcFJvdXRlID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmVuZHNXaXRoKCcvYXBwL2tpYmFuYScpOyAvLyB0aGlzIGZlYXR1cmUgb25seSB3b3JrcyB3aXRoaW4ga2liYW5hIGFwcCBmb3Igbm93IGFmdGVyIGV2ZXJ5dGhpbmcgaXMKICAgIC8vIHN3aXRjaGVkIHRvIHRoZSBhcHBsaWNhdGlvbiBzZXJ2aWNlLCB0aGlzIGNhbiBiZSBjaGFuZ2VkIHRvIGhhbmRsZSBhbGwKICAgIC8vIGFwcHMuCgogICAgaWYgKCFpc0tpYmFuYUFwcFJvdXRlKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdmFyIF9yZWYzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fSwKICAgICAgICAgIHJvdXRlID0gX3JlZjMuJCRyb3V0ZTsKCiAgICAgIGlmICghcm91dGUgfHwgIXJvdXRlLnJlcXVpcmVVSUNhcGFiaWxpdHkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghKDAsIF9sb2Rhc2guZ2V0KShuZXdQbGF0Zm9ybS5hcHBsaWNhdGlvbi5jYXBhYmlsaXRpZXMsIHJvdXRlLnJlcXVpcmVVSUNhcGFiaWxpdHkpKSB7CiAgICAgICAgJGluamVjdG9yLmdldCgnJGxvY2F0aW9uJykudXJsKCcvaG9tZScpOwogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIH0KICAgIH0pOwogIH07Cn07Ci8qKgogKiBpbnRlcm5hbCBhbmd1bGFyIHJ1biBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW4gYW5ndWxhciBib290c3RyYXBzIGFuZAogKiBsZXRzIHVzIGludGVncmF0ZSB3aXRoIHRoZSBhbmd1bGFyIHJvdXRlciBzbyB0aGF0IHdlIGNhbiBhdXRvbWF0aWNhbGx5IGNsZWFyCiAqIHRoZSBicmVhZGNydW1icyBpZiB3ZSBzd2l0Y2ggdG8gYSBLaWJhbmEgYXBwIHRoYXQgZG9lcyBub3QgdXNlIGJyZWFkY3J1bWJzIGNvcnJlY3RseQogKi8KCgp2YXIgJHNldHVwQnJlYWRjcnVtYnNBdXRvQ2xlYXIgPSBmdW5jdGlvbiAkc2V0dXBCcmVhZGNydW1ic0F1dG9DbGVhcihuZXdQbGF0Zm9ybSwgaXNMb2NhbEFuZ3VsYXIpIHsKICByZXR1cm4gZnVuY3Rpb24gKCRyb290U2NvcGUsICRpbmplY3RvcikgewogICAgLy8gQSBmbGFnIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIHdlIHNob3VsZCBhdXRvbWF0aWNhbGx5CiAgICAvLyBjbGVhciB0aGUgYnJlYWRjcnVtYnMgYmV0d2VlbiBhbmd1bGFyIHJvdXRlIGNoYW5nZXMuCiAgICB2YXIgYnJlYWRjcnVtYlNldFNpbmNlUm91dGVDaGFuZ2UgPSBmYWxzZTsKICAgIHZhciAkcm91dGUgPSAkaW5qZWN0b3IuaGFzKCckcm91dGUnKSA/ICRpbmplY3Rvci5nZXQoJyRyb3V0ZScpIDoge307IC8vIHJlc2V0IGJyZWFkY3J1bWJTZXRTaW5jZVJvdXRlQ2hhbmdlIGFueSB0aW1lIHRoZSBicmVhZGNydW1icyBjaGFuZ2UsIGV2ZW4KICAgIC8vIGlmIGl0IHdhcyBkb25lIGRpcmVjdGx5IHRocm91Z2ggdGhlIG5ldyBwbGF0Zm9ybQoKICAgIG5ld1BsYXRmb3JtLmNocm9tZS5nZXRCcmVhZGNydW1icyQoKS5zdWJzY3JpYmUoewogICAgICBuZXh0OiBmdW5jdGlvbiBuZXh0KCkgewogICAgICAgIGJyZWFkY3J1bWJTZXRTaW5jZVJvdXRlQ2hhbmdlID0gdHJ1ZTsKICAgICAgfQogICAgfSk7CiAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbiAoKSB7CiAgICAgIGJyZWFkY3J1bWJTZXRTaW5jZVJvdXRlQ2hhbmdlID0gZmFsc2U7CiAgICB9KTsKICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24gKCkgewogICAgICBpZiAoaXNEdW1teVJvdXRlKCRyb3V0ZSwgaXNMb2NhbEFuZ3VsYXIpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgY3VycmVudCA9ICRyb3V0ZS5jdXJyZW50IHx8IHt9OwoKICAgICAgaWYgKGJyZWFkY3J1bWJTZXRTaW5jZVJvdXRlQ2hhbmdlIHx8IGN1cnJlbnQuJCRyb3V0ZSAmJiBjdXJyZW50LiQkcm91dGUucmVkaXJlY3RUbykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGs3QnJlYWRjcnVtYnNQcm92aWRlciA9IGN1cnJlbnQuazdCcmVhZGNydW1iczsKCiAgICAgIGlmICghazdCcmVhZGNydW1ic1Byb3ZpZGVyKSB7CiAgICAgICAgbmV3UGxhdGZvcm0uY2hyb21lLnNldEJyZWFkY3J1bWJzKFtdKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRyeSB7CiAgICAgICAgbmV3UGxhdGZvcm0uY2hyb21lLnNldEJyZWFkY3J1bWJzKCRpbmplY3Rvci5pbnZva2UoazdCcmVhZGNydW1ic1Byb3ZpZGVyKSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgaWYgKCgwLCBfbGliLmlzQW5ndWxhckh0dHBFcnJvcikoZXJyb3IpKSB7CiAgICAgICAgICBlcnJvciA9ICgwLCBfbGliLmZvcm1hdEFuZ3VsYXJIdHRwRXJyb3IpKGVycm9yKTsKICAgICAgICB9CgogICAgICAgIG5ld1BsYXRmb3JtLmZhdGFsRXJyb3JzLmFkZChlcnJvciwgJ2xvY2F0aW9uJyk7CiAgICAgIH0KICAgIH0pOwogIH07Cn07Ci8qKgogKiBpbnRlcm5hbCBhbmd1bGFyIHJ1biBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW4gYW5ndWxhciBib290c3RyYXBzIGFuZAogKiBsZXRzIHVzIGludGVncmF0ZSB3aXRoIHRoZSBhbmd1bGFyIHJvdXRlciBzbyB0aGF0IHdlIGNhbiBhdXRvbWF0aWNhbGx5IGNsZWFyCiAqIHRoZSBiYWRnZSBpZiB3ZSBzd2l0Y2ggdG8gYSBLaWJhbmEgYXBwIHRoYXQgZG9lcyBub3QgdXNlIHRoZSBiYWRnZSBjb3JyZWN0bHkKICovCgoKdmFyICRzZXR1cEJhZGdlQXV0b0NsZWFyID0gZnVuY3Rpb24gJHNldHVwQmFkZ2VBdXRvQ2xlYXIobmV3UGxhdGZvcm0sIGlzTG9jYWxBbmd1bGFyKSB7CiAgcmV0dXJuIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkaW5qZWN0b3IpIHsKICAgIC8vIEEgZmxhZyB1c2VkIHRvIGRldGVybWluZSBpZiB3ZSBzaG91bGQgYXV0b21hdGljYWxseQogICAgLy8gY2xlYXIgdGhlIGJhZGdlIGJldHdlZW4gYW5ndWxhciByb3V0ZSBjaGFuZ2VzLgogICAgdmFyIGJhZGdlU2V0U2luY2VSb3V0ZUNoYW5nZSA9IGZhbHNlOwogICAgdmFyICRyb3V0ZSA9ICRpbmplY3Rvci5oYXMoJyRyb3V0ZScpID8gJGluamVjdG9yLmdldCgnJHJvdXRlJykgOiB7fTsKICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uICgpIHsKICAgICAgYmFkZ2VTZXRTaW5jZVJvdXRlQ2hhbmdlID0gZmFsc2U7CiAgICB9KTsKICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24gKCkgewogICAgICBpZiAoaXNEdW1teVJvdXRlKCRyb3V0ZSwgaXNMb2NhbEFuZ3VsYXIpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgY3VycmVudCA9ICRyb3V0ZS5jdXJyZW50IHx8IHt9OwoKICAgICAgaWYgKGJhZGdlU2V0U2luY2VSb3V0ZUNoYW5nZSB8fCBjdXJyZW50LiQkcm91dGUgJiYgY3VycmVudC4kJHJvdXRlLnJlZGlyZWN0VG8pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBiYWRnZVByb3ZpZGVyID0gY3VycmVudC5iYWRnZTsKCiAgICAgIGlmICghYmFkZ2VQcm92aWRlcikgewogICAgICAgIG5ld1BsYXRmb3JtLmNocm9tZS5zZXRCYWRnZSh1bmRlZmluZWQpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdHJ5IHsKICAgICAgICBuZXdQbGF0Zm9ybS5jaHJvbWUuc2V0QmFkZ2UoJGluamVjdG9yLmludm9rZShiYWRnZVByb3ZpZGVyKSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgaWYgKCgwLCBfbGliLmlzQW5ndWxhckh0dHBFcnJvcikoZXJyb3IpKSB7CiAgICAgICAgICBlcnJvciA9ICgwLCBfbGliLmZvcm1hdEFuZ3VsYXJIdHRwRXJyb3IpKGVycm9yKTsKICAgICAgICB9CgogICAgICAgIG5ld1BsYXRmb3JtLmZhdGFsRXJyb3JzLmFkZChlcnJvciwgJ2xvY2F0aW9uJyk7CiAgICAgIH0KICAgIH0pOwogIH07Cn07Ci8qKgogKiBpbnRlcm5hbCBhbmd1bGFyIHJ1biBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW4gYW5ndWxhciBib290c3RyYXBzIGFuZAogKiBsZXRzIHVzIGludGVncmF0ZSB3aXRoIHRoZSBhbmd1bGFyIHJvdXRlciBzbyB0aGF0IHdlIGNhbiBhdXRvbWF0aWNhbGx5IGNsZWFyCiAqIHRoZSBoZWxwRXh0ZW5zaW9uIGlmIHdlIHN3aXRjaCB0byBhIEtpYmFuYSBhcHAgdGhhdCBkb2VzIG5vdCBzZXQgaXRzIG93bgogKiBoZWxwRXh0ZW5zaW9uCiAqLwoKCnZhciAkc2V0dXBIZWxwRXh0ZW5zaW9uQXV0b0NsZWFyID0gZnVuY3Rpb24gJHNldHVwSGVscEV4dGVuc2lvbkF1dG9DbGVhcihuZXdQbGF0Zm9ybSwgaXNMb2NhbEFuZ3VsYXIpIHsKICByZXR1cm4gZnVuY3Rpb24gKCRyb290U2NvcGUsICRpbmplY3RvcikgewogICAgLyoqCiAgICAgKiByZXNldCBoZWxwRXh0ZW5zaW9uU2V0U2luY2VSb3V0ZUNoYW5nZSBhbnkgdGltZSB0aGUgaGVscEV4dGVuc2lvbiBjaGFuZ2VzLCBldmVuCiAgICAgKiBpZiBpdCB3YXMgZG9uZSBkaXJlY3RseSB0aHJvdWdoIHRoZSBuZXcgcGxhdGZvcm0KICAgICAqLwogICAgdmFyIGhlbHBFeHRlbnNpb25TZXRTaW5jZVJvdXRlQ2hhbmdlID0gZmFsc2U7CiAgICBuZXdQbGF0Zm9ybS5jaHJvbWUuZ2V0SGVscEV4dGVuc2lvbiQoKS5zdWJzY3JpYmUoewogICAgICBuZXh0OiBmdW5jdGlvbiBuZXh0KCkgewogICAgICAgIGhlbHBFeHRlbnNpb25TZXRTaW5jZVJvdXRlQ2hhbmdlID0gdHJ1ZTsKICAgICAgfQogICAgfSk7CiAgICB2YXIgJHJvdXRlID0gJGluamVjdG9yLmhhcygnJHJvdXRlJykgPyAkaW5qZWN0b3IuZ2V0KCckcm91dGUnKSA6IHt9OwogICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKCkgewogICAgICBpZiAoaXNEdW1teVJvdXRlKCRyb3V0ZSwgaXNMb2NhbEFuZ3VsYXIpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBoZWxwRXh0ZW5zaW9uU2V0U2luY2VSb3V0ZUNoYW5nZSA9IGZhbHNlOwogICAgfSk7CiAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKGlzRHVtbXlSb3V0ZSgkcm91dGUsIGlzTG9jYWxBbmd1bGFyKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGN1cnJlbnQgPSAkcm91dGUuY3VycmVudCB8fCB7fTsKCiAgICAgIGlmIChoZWxwRXh0ZW5zaW9uU2V0U2luY2VSb3V0ZUNoYW5nZSB8fCBjdXJyZW50LiQkcm91dGUgJiYgY3VycmVudC4kJHJvdXRlLnJlZGlyZWN0VG8pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIG5ld1BsYXRmb3JtLmNocm9tZS5zZXRIZWxwRXh0ZW5zaW9uKGN1cnJlbnQuaGVscEV4dGVuc2lvbik7CiAgICB9KTsKICB9Owp9OwoKdmFyICRzZXR1cFVybE92ZXJmbG93SGFuZGxpbmcgPSBmdW5jdGlvbiAkc2V0dXBVcmxPdmVyZmxvd0hhbmRsaW5nKG5ld1BsYXRmb3JtLCBpc0xvY2FsQW5ndWxhcikgewogIHJldHVybiBmdW5jdGlvbiAoJGxvY2F0aW9uLCAkcm9vdFNjb3BlLCAkaW5qZWN0b3IpIHsKICAgIHZhciAkcm91dGUgPSAkaW5qZWN0b3IuaGFzKCckcm91dGUnKSA/ICRpbmplY3Rvci5nZXQoJyRyb3V0ZScpIDoge307CiAgICB2YXIgdXJsT3ZlcmZsb3cgPSBuZXcgX3V0aWxzMi5VcmxPdmVyZmxvd1NlcnZpY2UoKTsKCiAgICB2YXIgY2hlY2sgPSBmdW5jdGlvbiBjaGVjaygpIHsKICAgICAgaWYgKGlzRHVtbXlSb3V0ZSgkcm91dGUsIGlzTG9jYWxBbmd1bGFyKSkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBkaXNhYmxlIGxvbmcgdXJsIGNoZWNrcyB3aGVuIHN0b3Jpbmcgc3RhdGUgaW4gc2Vzc2lvbiBzdG9yYWdlCgoKICAgICAgaWYgKG5ld1BsYXRmb3JtLnVpU2V0dGluZ3MuZ2V0KCdzdGF0ZTpzdG9yZUluU2Vzc2lvblN0b3JhZ2UnKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCRsb2NhdGlvbi5wYXRoKCkgPT09ICcvZXJyb3IvdXJsLW92ZXJmbG93JykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdHJ5IHsKICAgICAgICBpZiAodXJsT3ZlcmZsb3cuY2hlY2soJGxvY2F0aW9uLmFic1VybCgpKSA8PSBVUkxfTElNSVRfV0FSTl9XSVRISU4pIHsKICAgICAgICAgIG5ld1BsYXRmb3JtLm5vdGlmaWNhdGlvbnMudG9hc3RzLmFkZFdhcm5pbmcoewogICAgICAgICAgICB0aXRsZTogX2kxOG4uaTE4bi50cmFuc2xhdGUoJ2tpYmFuYV9sZWdhY3kuYmlnVXJsV2FybmluZ05vdGlmaWNhdGlvblRpdGxlJywgewogICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVGhlIFVSTCBpcyBiaWcgYW5kIEtpYmFuYSBtaWdodCBzdG9wIHdvcmtpbmcnCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB0ZXh0OiAoMCwgX3B1YmxpYy50b01vdW50UG9pbnQpKF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0LkZyYWdtZW50LCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdDIuRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICAgIGlkOiAia2liYW5hX2xlZ2FjeS5iaWdVcmxXYXJuaW5nTm90aWZpY2F0aW9uTWVzc2FnZSIsCiAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFaXRoZXIgZW5hYmxlIHRoZSB7c3RvcmVJblNlc3Npb25TdG9yYWdlUGFyYW19IG9wdGlvbiBpbiB7YWR2YW5jZWRTZXR0aW5nc0xpbmt9IG9yIHNpbXBsaWZ5IHRoZSBvbnNjcmVlbiB2aXN1YWxzLiIsCiAgICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgICBzdG9yZUluU2Vzc2lvblN0b3JhZ2VQYXJhbTogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiY29kZSIsIG51bGwsICJzdGF0ZTpzdG9yZUluU2Vzc2lvblN0b3JhZ2UiKSwKICAgICAgICAgICAgICAgIGFkdmFuY2VkU2V0dGluZ3NMaW5rOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJhIiwgewogICAgICAgICAgICAgICAgICBocmVmOiAiIy9tYW5hZ2VtZW50L2tpYmFuYS9zZXR0aW5ncyIKICAgICAgICAgICAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Mi5Gb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgICAgIGlkOiAia2liYW5hX2xlZ2FjeS5iaWdVcmxXYXJuaW5nTm90aWZpY2F0aW9uTWVzc2FnZS5hZHZhbmNlZFNldHRpbmdzTGlua1RleHQiLAogICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogImFkdmFuY2VkIHNldHRpbmdzIgogICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSkpCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICgwLCBfdXRpbHMubW9kaWZ5VXJsKSh3aW5kb3cubG9jYXRpb24uaHJlZiwgZnVuY3Rpb24gKHBhcnRzKSB7CiAgICAgICAgICBwYXJ0cy5oYXNoID0gJyMvZXJyb3IvdXJsLW92ZXJmbG93JzsKICAgICAgICB9KTsgLy8gZm9yY2UgdGhlIGJyb3dzZXIgdG8gcmVsb2FkIHRvIHRoYXQgS2liYW5hJ3MgcG90ZW50aWFsbHkgdW5zdGFibGUgc3RhdGUgaXMgdW5sb2FkZWQKCiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9CiAgICB9OwoKICAgICRyb290U2NvcGUuJG9uKCckcm91dGVVcGRhdGUnLCBjaGVjayk7CiAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3RhcnQnLCBjaGVjayk7CiAgfTsKfTs="},null]}