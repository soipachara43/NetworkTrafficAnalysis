/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[29],{5219:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AngularApp=void 0;var _angular=_interopRequireDefault(__webpack_require__(42));var _routes=_interopRequireDefault(__webpack_require__(43));var _chrome=_interopRequireDefault(__webpack_require__(140));var _modules=__webpack_require__(150);var _timefilter=__webpack_require__(55);var _angular_config=__webpack_require__(5932);var _modules2=__webpack_require__(5933);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AngularApp=function AngularApp(_ref,_ref2){var _this=this;var core=_ref.core;var element=_ref2.element;_classCallCheck(this,AngularApp);_defineProperty(this,"injector",void 0);_defineProperty(this,"destroy",(function(){if(_this.injector){_this.injector.get("$rootScope").$destroy()}}));_modules.uiModules.addToModule();var app=(0,_modules2.localAppModule)(core);app.config((function($routeProvider){$routeProvider.eagerInstantiationEnabled(false);_routes.default.addToProvider($routeProvider)}));(0,_angular_config.configureAppAngularModule)(app,core);(0,_timefilter.registerTimefilterWithGlobalState)(app);var appElement=document.createElement("div");appElement.setAttribute("style","height: 100%");appElement.innerHTML='<div ng-view style="height: 100%" id="monitoring-angular-app"></div>';this.injector=_angular.default.bootstrap(appElement,[_modules2.appModuleName]);_chrome.default.setInjector(this.injector);_angular.default.element(element).append(appElement)};exports.AngularApp=AngularApp},5932:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.configureAppAngularModule=void 0;var _jquery=_interopRequireDefault(__webpack_require__(23));var _lodash=__webpack_require__(3);var Rx=_interopRequireWildcard(__webpack_require__(18));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isSystemApiRequest=function isSystemApiRequest(request){return Boolean(request&&request.headers&&!!request.headers["kbn-system-api"])};var configureAppAngularModule=function configureAppAngularModule(angularModule,newPlatform){var legacyMetadata=newPlatform.injectedMetadata.getLegacyMetadata();(0,_lodash.forOwn)(newPlatform.injectedMetadata.getInjectedVars(),(function(val,name){if(name!==undefined){angularModule.value(name,(0,_lodash.cloneDeep)(val))}}));angularModule.value("kbnVersion",newPlatform.injectedMetadata.getKibanaVersion()).value("buildNum",legacyMetadata.buildNum).value("buildSha",legacyMetadata.buildSha).value("serverName",legacyMetadata.serverName).value("esUrl",getEsUrl(newPlatform)).value("uiCapabilities",newPlatform.application.capabilities).config(setupCompileProvider(newPlatform)).config(setupLocationProvider()).config($setupXsrfRequestInterceptor(newPlatform)).run(capture$httpLoadingCount(newPlatform)).run($setupUICapabilityRedirect(newPlatform))};exports.configureAppAngularModule=configureAppAngularModule;var getEsUrl=function getEsUrl(newPlatform){var a=document.createElement("a");a.href=newPlatform.http.basePath.prepend("/elasticsearch");var protocolPort=/https/.test(a.protocol)?443:80;var port=a.port||protocolPort;return{host:a.hostname,port:port,protocol:a.protocol,pathname:a.pathname}};var setupCompileProvider=function setupCompileProvider(newPlatform){return function($compileProvider){if(!newPlatform.injectedMetadata.getLegacyMetadata().devMode){$compileProvider.debugInfoEnabled(false)}}};var setupLocationProvider=function setupLocationProvider(){return function($locationProvider){$locationProvider.html5Mode({enabled:false,requireBase:false,rewriteLinks:false});$locationProvider.hashPrefix("")}};var $setupXsrfRequestInterceptor=function $setupXsrfRequestInterceptor(newPlatform){var version=newPlatform.injectedMetadata.getLegacyMetadata().version;_jquery.default.ajaxPrefilter((function(_ref,originalOptions,jqXHR){var _ref$kbnXsrfToken=_ref.kbnXsrfToken,kbnXsrfToken=_ref$kbnXsrfToken===void 0?true:_ref$kbnXsrfToken;if(kbnXsrfToken){jqXHR.setRequestHeader("kbn-version",version)}}));return function($httpProvider){$httpProvider.interceptors.push((function(){return{request:function request(opts){var _ref2=opts,_ref2$kbnXsrfToken=_ref2.kbnXsrfToken,kbnXsrfToken=_ref2$kbnXsrfToken===void 0?true:_ref2$kbnXsrfToken;if(kbnXsrfToken){(0,_lodash.set)(opts,["headers","kbn-version"],version)}return opts}}}))}};var capture$httpLoadingCount=function capture$httpLoadingCount(newPlatform){return function($rootScope,$http){newPlatform.http.addLoadingCountSource(new Rx.Observable((function(observer){var unwatch=$rootScope.$watch((function(){var reqs=$http.pendingRequests||[];observer.next(reqs.filter((function(req){return!isSystemApiRequest(req)})).length)}));return unwatch})))}};var $setupUICapabilityRedirect=function $setupUICapabilityRedirect(newPlatform){return function($rootScope,$injector){var isKibanaAppRoute=window.location.pathname.endsWith("/app/kibana");if(!isKibanaAppRoute){return}$rootScope.$on("$routeChangeStart",(function(event){var _ref3=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},route=_ref3.$$route;if(!route||!route.requireUICapability){return}if(!(0,_lodash.get)(newPlatform.application.capabilities,route.requireUICapability)){$injector.get("kbnUrl").change("/home");event.preventDefault()}}))}}},5933:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.localAppModule=exports.appModuleName=void 0;var _angular=_interopRequireDefault(__webpack_require__(42));var _angular2=__webpack_require__(119);var _public=__webpack_require__(24);var _public2=__webpack_require__(51);var _legacy_imports=__webpack_require__(387);var _promises=__webpack_require__(5934);var _private=__webpack_require__(5935);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var appModuleName="monitoring";exports.appModuleName=appModuleName;var thirdPartyAngularDependencies=["ngSanitize","ngRoute","react"];var localAppModule=function localAppModule(core){createLocalI18nModule();createLocalPrivateModule();createLocalPromiseModule();createLocalStorage();createLocalConfigModule(core);createLocalKbnUrlModule();createLocalStateModule();createLocalTopNavModule(_legacy_imports.npStart.plugins.navigation);createHrefModule(core);var appModule=_angular.default.module(appModuleName,[].concat(thirdPartyAngularDependencies,["monitoring/Config","monitoring/I18n","monitoring/Private","monitoring/TopNav","monitoring/State","monitoring/Storage","monitoring/href","monitoring/services","monitoring/filters","monitoring/directives"]));return appModule};exports.localAppModule=localAppModule;function createLocalStateModule(){_angular.default.module("monitoring/State",["monitoring/Private","monitoring/Config","monitoring/KbnUrl","monitoring/Promise"]).factory("AppState",(function(Private){return Private(_legacy_imports.AppStateProvider)})).service("globalState",(function(Private){return Private(_legacy_imports.GlobalStateProvider)}))}function createLocalKbnUrlModule(){_angular.default.module("monitoring/KbnUrl",["monitoring/Private","ngRoute"]).service("kbnUrl",(function(Private){return Private(_legacy_imports.KbnUrlProvider)}))}function createLocalConfigModule(core){_angular.default.module("monitoring/Config",["monitoring/Private"]).provider("stateManagementConfig",_legacy_imports.StateManagementConfigProvider).provider("config",(function(){return{$get:function $get(){return{get:core.uiSettings.get.bind(core.uiSettings)}}}}))}function createLocalPromiseModule(){_angular.default.module("monitoring/Promise",[]).service("Promise",_promises.PromiseServiceCreator)}function createLocalStorage(){_angular.default.module("monitoring/Storage",[]).service("localStorage",(function($window){return new _public.Storage($window.localStorage)})).service("sessionStorage",(function($window){return new _public.Storage($window.sessionStorage)})).service("sessionTimeout",(function(){}))}function createLocalPrivateModule(){_angular.default.module("monitoring/Private",[]).provider("Private",_private.PrivateProvider)}function createLocalTopNavModule(_ref){var ui=_ref.ui;_angular.default.module("monitoring/TopNav",["react"]).directive("kbnTopNav",_public2.createTopNavDirective).directive("kbnTopNavHelper",(0,_public2.createTopNavHelper)(ui))}function createLocalI18nModule(){_angular.default.module("monitoring/I18n",[]).provider("i18n",_angular2.I18nProvider).filter("i18n",_angular2.i18nFilter).directive("i18nId",_angular2.i18nDirective)}function createHrefModule(core){var name="kbnHref";_angular.default.module("monitoring/href",[]).directive(name,(function(){return{restrict:"A",link:{pre:function pre(_$scope,_$el,$attr){$attr.$observe(name,(function(val){if(val){$attr.$set("href",core.http.basePath.prepend(val))}}))}}}}))}},5934:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PromiseServiceCreator=PromiseServiceCreator;var _lodash=_interopRequireDefault(__webpack_require__(3));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PromiseServiceCreator($q,$timeout){function Promise(fn){if(typeof this==="undefined")throw new Error('Promise constructor must be called with "new"');var defer=$q.defer();try{fn(defer.resolve,defer.reject)}catch(e){defer.reject(e)}return defer.promise}Promise.all=Promise.props=$q.all;Promise.resolve=function(val){var defer=$q.defer();defer.resolve(val);return defer.promise};Promise.reject=function(reason){var defer=$q.defer();defer.reject(reason);return defer.promise};Promise.cast=$q.when;Promise.delay=function(ms){return $timeout(_lodash.default.noop,ms)};Promise.method=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return Promise.try(fn,args,this)}};Promise.nodeify=function(promise,cb){promise.then((function(val){cb(void 0,val)}),cb)};Promise.map=function(arr,fn){return Promise.all(arr.map((function(i,el,list){return Promise.try(fn,[i,el,list])})))};Promise.each=function(arr,fn){var queue=arr.slice(0);var i=0;return function next(){if(!queue.length)return arr;return Promise.try(fn,[arr.shift(),i++]).then(next)}()};Promise.is=function(obj){return obj&&typeof obj.then==="function"};Promise.halt=_lodash.default.once((function(){var promise=new Promise((function(){}));promise.then=_lodash.default.constant(promise);promise.catch=_lodash.default.constant(promise);return promise}));Promise.try=function(fn,args,ctx){if(typeof fn!=="function"){return Promise.reject(new TypeError("fn must be a function"))}var value;if(Array.isArray(args)){try{value=fn.apply(ctx,args)}catch(e){return Promise.reject(e)}}else{try{value=fn.call(ctx,args)}catch(e){return Promise.reject(e)}}return Promise.resolve(value)};Promise.fromNode=function(takesCbFn){return new Promise((function(resolve,reject){takesCbFn((function(err){for(var _len=arguments.length,results=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){results[_key-1]=arguments[_key]}if(err)reject(err);else if(results.length>1)resolve(results);else resolve(results[0])}))}))};Promise.race=function(iterable){return new Promise((function(resolve,reject){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=iterable[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var i=_step.value;Promise.resolve(i).then(resolve,reject)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}))};return Promise}},5935:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PrivateProvider=PrivateProvider;var _lodash=_interopRequireDefault(__webpack_require__(3));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var nextId=_lodash.default.partial(_lodash.default.uniqueId,"privateProvider#");function name(fn){return fn.name||fn.toString().split("\n").shift()}function PrivateProvider(){var provider=this;var cache={};var swaps={};function identify(fn){if(typeof fn!=="function"){throw new TypeError('Expected private module "'+fn+'" to be a function')}if(fn.$$id)return fn.$$id;else return fn.$$id=nextId()}provider.stub=function(fn,instance){cache[identify(fn)]=instance;return instance};provider.swap=function(fn,prov){var id=identify(fn);swaps[id]=prov};provider.$get=["$injector",function PrivateFactory($injector){var privPath=[];var pathToString=function pathToString(){return privPath.map(name).join(" -> ")};function instantiate(prov,locals){if(~privPath.indexOf(prov)){throw new Error('Circular reference to "'+name(prov)+'"'+" found while resolving private deps: "+pathToString())}privPath.push(prov);var context={};var instance=$injector.invoke(prov,context,locals);if(!_lodash.default.isObject(instance))instance=context;privPath.pop();return instance}function get(id,prov,$delegateId,$delegateProv){if(cache[id])return cache[id];var instance;if($delegateId!=null&&$delegateProv!=null){instance=instantiate(prov,{$decorate:_lodash.default.partial(get,$delegateId,$delegateProv)})}else{instance=instantiate(prov)}return cache[id]=instance}function Private(prov){var id=identify(prov);var $delegateId;var $delegateProv;if(swaps[id]){$delegateId=id;$delegateProv=prov;prov=swaps[$delegateId];id=identify(prov)}return get(id,prov,$delegateId,$delegateProv)}Private.stub=provider.stub;Private.swap=provider.swap;return Private}]}}}]);