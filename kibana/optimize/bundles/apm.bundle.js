/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */(function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var executeModules=data[2];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}deferredModules.push.apply(deferredModules,executeModules||[]);return checkDeferredModules()}function checkDeferredModules(){var result;for(var i=0;i<deferredModules.length;i++){var deferredModule=deferredModules[i];var fulfilled=true;for(var j=1;j<deferredModule.length;j++){var depId=deferredModule[j];if(installedChunks[depId]!==0)fulfilled=false}if(fulfilled){deferredModules.splice(i--,1);result=__webpack_require__(__webpack_require__.s=deferredModule[0])}}return result}var installedModules={};var installedCssChunks={2:0};var installedChunks={2:0};var deferredModules=[];function jsonpScriptSrc(chunkId){return __webpack_require__.p+""+({}[chunkId]||chunkId)+".bundle.js"}function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(chunkId){var promises=[];var cssChunks={20:1};if(installedCssChunks[chunkId])promises.push(installedCssChunks[chunkId]);else if(installedCssChunks[chunkId]!==0&&cssChunks[chunkId]){promises.push(installedCssChunks[chunkId]=new Promise((function(resolve,reject){var href=""+({}[chunkId]||chunkId)+".style.css";var fullhref=__webpack_require__.p+href;var existingLinkTags=document.getElementsByTagName("link");for(var i=0;i<existingLinkTags.length;i++){var tag=existingLinkTags[i];var dataHref=tag.getAttribute("data-href")||tag.getAttribute("href");if(tag.rel==="stylesheet"&&(dataHref===href||dataHref===fullhref))return resolve()}var existingStyleTags=document.getElementsByTagName("style");for(var i=0;i<existingStyleTags.length;i++){var tag=existingStyleTags[i];var dataHref=tag.getAttribute("data-href");if(dataHref===href||dataHref===fullhref)return resolve()}var linkTag=document.createElement("link");linkTag.rel="stylesheet";linkTag.type="text/css";linkTag.onload=resolve;linkTag.onerror=function(event){var request=event&&event.target&&event.target.src||fullhref;var err=new Error("Loading CSS chunk "+chunkId+" failed.\n("+request+")");err.code="CSS_CHUNK_LOAD_FAILED";err.request=request;delete installedCssChunks[chunkId];linkTag.parentNode.removeChild(linkTag);reject(err)};linkTag.href=fullhref;var head=document.getElementsByTagName("head")[0];head.appendChild(linkTag)})).then((function(){installedCssChunks[chunkId]=0})))}var installedChunkData=installedChunks[chunkId];if(installedChunkData!==0){if(installedChunkData){promises.push(installedChunkData[2])}else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var script=document.createElement("script");var onScriptComplete;script.charset="utf-8";script.timeout=120;if(__webpack_require__.nc){script.setAttribute("nonce",__webpack_require__.nc)}script.src=jsonpScriptSrc(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null;clearTimeout(timeout);var chunk=installedChunks[chunkId];if(chunk!==0){if(chunk){var errorType=event&&(event.type==="load"?"missing":event.type);var realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")";error.name="ChunkLoadError";error.type=errorType;error.request=realSrc;chunk[1](error)}installedChunks[chunkId]=undefined}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete;document.head.appendChild(script)}}return Promise.all(promises)};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="__REPLACE_WITH_PUBLIC_PATH__";__webpack_require__.oe=function(err){console.error(err);throw err};var jsonpArray=window["webpackJsonp"]=window["webpackJsonp"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;deferredModules.push([3728,0]);return checkDeferredModules()})({0:function(module,exports){module.exports=__kbnSharedDeps__.React},1:function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},11:function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},118:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiDarkTheme},119:function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nAngular},120:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiChartsTheme},1216:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ApmPlugin=exports.REACT_APP_ROOT_ID=void 0;var _apmRumReact=__webpack_require__(4031);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(11));var _reactRouterDom=__webpack_require__(33);var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _public=__webpack_require__(14);var _alert_types=__webpack_require__(435);var _public2=__webpack_require__(261);var _APMIndicesPermission=__webpack_require__(3732);var _route_config=__webpack_require__(3738);var _ScrollToTopOnPathChange=__webpack_require__(3960);var _UpdateBreadcrumbs=__webpack_require__(3961);var _ErrorRateAlertTrigger=__webpack_require__(3963);var _TransactionDurationAlertTrigger=__webpack_require__(3964);var _ApmPluginContext=__webpack_require__(340);var _LicenseContext=__webpack_require__(440);var _LoadingIndicatorContext=__webpack_require__(610);var _LocationContext=__webpack_require__(1217);var _MatchedRouteContext=__webpack_require__(3965);var _UrlParamsContext=__webpack_require__(342);var _createCallApmApi=__webpack_require__(159);var _index_pattern=__webpack_require__(3966);var _variables=__webpack_require__(26);var _history=__webpack_require__(82);var _featureCatalogueEntry=__webpack_require__(1268);var _getConfigFromInjectedMetadata=__webpack_require__(3967);var _setHelpExtension=__webpack_require__(3968);var _toggleAppLinkInNav=__webpack_require__(3969);var _updateBadge=__webpack_require__(3970);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var REACT_APP_ROOT_ID="react-apm-root";exports.REACT_APP_ROOT_ID=REACT_APP_ROOT_ID;var MainContainer=_styledComponents.default.div.withConfig({displayName:"MainContainer",componentId:"sc-1pgjfdb-0"})(["min-width:",";padding:",";height:100%;"],(0,_variables.px)(_variables.unit*50),(0,_variables.px)(_variables.units.plus));var App=function App(){return _react.default.createElement(MainContainer,{"data-test-subj":"apmMainContainer",role:"main"},_react.default.createElement(_UpdateBreadcrumbs.UpdateBreadcrumbs,{routes:_route_config.routes}),_react.default.createElement(_reactRouterDom.Route,{component:_ScrollToTopOnPathChange.ScrollToTopOnPathChange}),_react.default.createElement(_APMIndicesPermission.APMIndicesPermission,null,_react.default.createElement(_reactRouterDom.Switch,null,_route_config.routes.map((function(route,i){return _react.default.createElement(_apmRumReact.ApmRoute,_extends({key:i},route))})))))};var ApmPlugin=function(){function ApmPlugin(initializerContext){_classCallCheck(this,ApmPlugin);this.initializerContext=initializerContext;_defineProperty(this,"setupPlugins",{})}_createClass(ApmPlugin,[{key:"setup",value:function setup(_core,plugins){plugins.home.featureCatalogue.register(_featureCatalogueEntry.featureCatalogueEntry);this.setupPlugins=plugins}},{key:"start",value:function start(core){var i18nCore=core.i18n;var plugins=this.setupPlugins;(0,_createCallApmApi.createCallApmApi)(core.http);var config=(0,_getConfigFromInjectedMetadata.getConfigFromInjectedMetadata)();(0,_setHelpExtension.setHelpExtension)(core);(0,_updateBadge.setReadonlyBadge)(core);(0,_toggleAppLinkInNav.toggleAppLinkInNav)(core,config);var apmPluginContextValue={config:config,core:core,plugins:plugins};plugins.triggers_actions_ui.alertTypeRegistry.register({id:_alert_types.AlertType.ErrorRate,name:_i18n.i18n.translate("xpack.apm.alertTypes.errorRate",{defaultMessage:"Error rate"}),iconClass:"bell",alertParamsExpression:_ErrorRateAlertTrigger.ErrorRateAlertTrigger,validate:function validate(){return{errors:[]}}});plugins.triggers_actions_ui.alertTypeRegistry.register({id:_alert_types.AlertType.TransactionDuration,name:_i18n.i18n.translate("xpack.apm.alertTypes.transactionDuration",{defaultMessage:"Transaction duration"}),iconClass:"bell",alertParamsExpression:_TransactionDurationAlertTrigger.TransactionDurationAlertTrigger,validate:function validate(){return{errors:[]}}});_reactDom.default.render(_react.default.createElement(_ApmPluginContext.ApmPluginContext.Provider,{value:apmPluginContextValue},_react.default.createElement(_public2.AlertsContextProvider,{value:{http:core.http,docLinks:core.docLinks,toastNotifications:core.notifications.toasts,actionTypeRegistry:plugins.triggers_actions_ui.actionTypeRegistry,alertTypeRegistry:plugins.triggers_actions_ui.alertTypeRegistry}},_react.default.createElement(_public.KibanaContextProvider,{services:_objectSpread({},core,{},plugins)},_react.default.createElement(i18nCore.Context,null,_react.default.createElement(_reactRouterDom.Router,{history:_history.history},_react.default.createElement(_LocationContext.LocationProvider,null,_react.default.createElement(_MatchedRouteContext.MatchedRouteProvider,{routes:_route_config.routes},_react.default.createElement(_UrlParamsContext.UrlParamsProvider,null,_react.default.createElement(_LoadingIndicatorContext.LoadingIndicatorProvider,null,_react.default.createElement(_LicenseContext.LicenseProvider,null,_react.default.createElement(App,null))))))))))),document.getElementById(REACT_APP_ROOT_ID));(0,_index_pattern.createStaticIndexPattern)().catch((function(e){console.log("Error fetching static index pattern",e)}))}},{key:"stop",value:function stop(){}}]);return ApmPlugin}();exports.ApmPlugin=ApmPlugin},1217:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LocationProvider=exports.LocationContext=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _reactRouterDom=__webpack_require__(33);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var initialLocation={};var LocationContext=(0,_react.createContext)(initialLocation);exports.LocationContext=LocationContext;var LocationProvider=(0,_reactRouterDom.withRouter)((function(_ref){var location=_ref.location,children=_ref.children;return _react.default.createElement(LocationContext.Provider,{children:children,value:location})}));exports.LocationProvider=LocationProvider},1218:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.resolveUrlParams=resolveUrlParams;var _helpers=__webpack_require__(614);var _url_helpers=__webpack_require__(71);var _constants=__webpack_require__(615);var _config=__webpack_require__(616);var _pickKeys=__webpack_require__(161);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function resolveUrlParams(location,state){var _getPathParams=(0,_helpers.getPathParams)(location.pathname),processorEvent=_getPathParams.processorEvent,serviceName=_getPathParams.serviceName,serviceNodeName=_getPathParams.serviceNodeName,errorGroupId=_getPathParams.errorGroupId,traceIdLink=_getPathParams.traceId;var query=(0,_url_helpers.toQuery)(location.search);var traceId=query.traceId,transactionId=query.transactionId,transactionName=query.transactionName,transactionType=query.transactionType,detailTab=query.detailTab,flyoutDetailTab=query.flyoutDetailTab,waterfallItemId=query.waterfallItemId,spanId=query.spanId,page=query.page,pageSize=query.pageSize,sortDirection=query.sortDirection,sortField=query.sortField,kuery=query.kuery,_query$refreshPaused=query.refreshPaused,refreshPaused=_query$refreshPaused===void 0?_constants.TIMEPICKER_DEFAULTS.refreshPaused:_query$refreshPaused,_query$refreshInterva=query.refreshInterval,refreshInterval=_query$refreshInterva===void 0?_constants.TIMEPICKER_DEFAULTS.refreshInterval:_query$refreshInterva,_query$rangeFrom=query.rangeFrom,rangeFrom=_query$rangeFrom===void 0?_constants.TIMEPICKER_DEFAULTS.rangeFrom:_query$rangeFrom,_query$rangeTo=query.rangeTo,rangeTo=_query$rangeTo===void 0?_constants.TIMEPICKER_DEFAULTS.rangeTo:_query$rangeTo,environment=query.environment,searchTerm=query.searchTerm;var localUIFilters=_pickKeys.pickKeys.apply(void 0,[query].concat(_toConsumableArray(_config.localUIFilterNames)));return(0,_helpers.removeUndefinedProps)(_objectSpread({start:(0,_helpers.getStart)(state,rangeFrom),end:(0,_helpers.getEnd)(state,rangeTo),rangeFrom:rangeFrom,rangeTo:rangeTo,refreshPaused:(0,_helpers.toBoolean)(refreshPaused),refreshInterval:(0,_helpers.toNumber)(refreshInterval),sortDirection:sortDirection,sortField:sortField,page:(0,_helpers.toNumber)(page)||0,pageSize:pageSize?(0,_helpers.toNumber)(pageSize):undefined,transactionId:(0,_helpers.toString)(transactionId),traceId:(0,_helpers.toString)(traceId),waterfallItemId:(0,_helpers.toString)(waterfallItemId),detailTab:(0,_helpers.toString)(detailTab),flyoutDetailTab:(0,_helpers.toString)(flyoutDetailTab),spanId:(0,_helpers.toNumber)(spanId),kuery:kuery&&decodeURIComponent(kuery),transactionName:transactionName,transactionType:transactionType,searchTerm:(0,_helpers.toString)(searchTerm),processorEvent:processorEvent,serviceName:serviceName,traceIdLink:traceIdLink,errorGroupId:errorGroupId,serviceNodeName:serviceNodeName?decodeURIComponent(serviceNodeName):serviceNodeName,environment:environment},localUIFilters))}},1219:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTimepickerRisonData=getTimepickerRisonData;var _constants=__webpack_require__(615);var _url_helpers=__webpack_require__(71);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getTimepickerRisonData(currentSearch){var currentQuery=(0,_url_helpers.toQuery)(currentSearch);var nextQuery=_objectSpread({},_constants.TIMEPICKER_DEFAULTS,{},currentQuery);return{time:{from:encodeURIComponent(nextQuery.rangeFrom),to:encodeURIComponent(nextQuery.rangeTo)},refreshInterval:{pause:String(nextQuery.refreshPaused),value:String(nextQuery.refreshInterval)}}}},1220:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.flattenObject=void 0;var _lodash=__webpack_require__(3);var flattenObject=function flattenObject(item,parentKey){if(item){var isArrayWithSingleValue=Array.isArray(item)&&item.length===1;return Object.keys(item).sort().reduce((function(acc,key){var childKey=isArrayWithSingleValue?"":key;var currentKey=(0,_lodash.compact)([parentKey,childKey]).join(".");if((0,_lodash.isObject)(item[key])){return acc.concat(flattenObject(item[key],currentKey))}else{acc.push({key:currentKey,value:item[key]});return acc}}),[])}return[]};exports.flattenObject=flattenObject},1221:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HeightRetainer=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var HeightRetainer=function HeightRetainer(props){var containerElement=(0,_react.useRef)(null);var minHeight=(0,_react.useRef)(0);(0,_react.useEffect)((function(){if(containerElement.current){var currentHeight=containerElement.current.clientHeight;if(minHeight.current<currentHeight){minHeight.current=currentHeight}}}));return _react.default.createElement("div",_extends({},props,{ref:containerElement,style:{minHeight:minHeight.current}}))};exports.HeightRetainer=HeightRetainer},1222:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KeyValueTable=KeyValueTable;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _FormattedValue=__webpack_require__(3758);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function KeyValueTable(_ref){var keyValuePairs=_ref.keyValuePairs,_ref$tableProps=_ref.tableProps,tableProps=_ref$tableProps===void 0?{}:_ref$tableProps;return _react.default.createElement(_eui.EuiTable,_extends({compressed:true},tableProps),_react.default.createElement(_eui.EuiTableBody,null,keyValuePairs.map((function(_ref2){var key=_ref2.key,value=_ref2.value;return _react.default.createElement(_eui.EuiTableRow,{key:key},_react.default.createElement(_eui.EuiTableRowCell,null,_react.default.createElement("strong",{"data-test-subj":"dot-key"},key)),_react.default.createElement(_eui.EuiTableRowCell,{"data-test-subj":"value"},_react.default.createElement(_FormattedValue.FormattedValue,{value:value})))}))))}},1223:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Stackframe=Stackframe;var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _eui=__webpack_require__(2);var _variables=__webpack_require__(26);var _FrameHeading=__webpack_require__(3760);var _Context=__webpack_require__(3761);var _Variables=__webpack_require__(3765);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ContextContainer=_styledComponents.default.div.withConfig({displayName:"ContextContainer",componentId:"rraigy-0"})(["position:relative;font-family:",";font-size:",";border:1px solid ",";border-radius:",";background:",";"],_variables.fontFamilyCode,_variables.fontSize,_eui_theme_light.default.euiColorLightShade,_variables.borderRadius,(function(props){return props.isLibraryFrame?_eui_theme_light.default.euiColorEmptyShade:_eui_theme_light.default.euiColorLightestShade}));function Stackframe(_ref){var stackframe=_ref.stackframe,codeLanguage=_ref.codeLanguage,id=_ref.id,_ref$initialIsOpen=_ref.initialIsOpen,initialIsOpen=_ref$initialIsOpen===void 0?false:_ref$initialIsOpen,_ref$isLibraryFrame=_ref.isLibraryFrame,isLibraryFrame=_ref$isLibraryFrame===void 0?false:_ref$isLibraryFrame;if(!hasLineContext(stackframe)){return _react.default.createElement(_FrameHeading.FrameHeading,{stackframe:stackframe,isLibraryFrame:isLibraryFrame})}return _react.default.createElement(_eui.EuiAccordion,{buttonContent:_react.default.createElement(_FrameHeading.FrameHeading,{stackframe:stackframe,isLibraryFrame:isLibraryFrame}),id:id,initialIsOpen:initialIsOpen},_react.default.createElement(ContextContainer,{isLibraryFrame:isLibraryFrame},_react.default.createElement(_Context.Context,{stackframe:stackframe,codeLanguage:codeLanguage,isLibraryFrame:isLibraryFrame})),_react.default.createElement(_Variables.Variables,{vars:stackframe.vars}))}function hasLineContext(stackframe){var _stackframe$line;return((_stackframe$line=stackframe.line)===null||_stackframe$line===void 0?void 0:_stackframe$line.hasOwnProperty("context"))||false}},1226:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.httpStatusCodeToColor=httpStatusCodeToColor;exports.warningColor=exports.successColor=exports.neutralColor=exports.errorColor=void 0;var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var euiColorDarkShade=_eui_theme_light.default.euiColorDarkShade,euiColorWarning=_eui_theme_light.default.euiColorWarning;var errorColor="#c23c2b";exports.errorColor=errorColor;var neutralColor=euiColorDarkShade;exports.neutralColor=neutralColor;var successColor="#327a42";exports.successColor=successColor;var warningColor=euiColorWarning;exports.warningColor=warningColor;var httpStatusCodeColors={1:neutralColor,2:successColor,3:neutralColor,4:warningColor,5:errorColor};function getStatusColor(status){return httpStatusCodeColors[status.toString().substr(0,1)]}function httpStatusCodeToColor(status){if(typeof status==="string"){return getStatusColor(parseInt(status.replace(/\D/g,""),10))}else{return getStatusColor(status)}}},1227:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UserAgentSummaryItem=UserAgentSummaryItem;var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Version=(0,_styledComponents.default)("span").withConfig({displayName:"Version",componentId:"sc-1umx1ms-0"})(["font-size:",";"],_eui_theme_light.default.euiFontSizeS);function UserAgentSummaryItem(_ref){var name=_ref.name,version=_ref.version;return _react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.transactionDetails.userAgentAndVersionLabel",{defaultMessage:"User agent & version"})},_react.default.createElement(_react.default.Fragment,null,name," ",version&&_react.default.createElement(Version,null,"(",version,")")))}},1228:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFormattedBuckets=getFormattedBuckets;exports.ErrorDistribution=ErrorDistribution;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _d3Scale=__webpack_require__(329);var _d=_interopRequireDefault(__webpack_require__(45));var _react=_interopRequireDefault(__webpack_require__(0));var _formatters=__webpack_require__(72);var _getTimezoneOffsetInMs=__webpack_require__(622);var _Histogram=_interopRequireDefault(__webpack_require__(1229));var _EmptyMessage=__webpack_require__(343);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getFormattedBuckets(buckets,bucketSize){if(!buckets){return null}return buckets.map((function(_ref){var count=_ref.count,key=_ref.key;return{x0:key,x:key+bucketSize,y:count}}))}var tooltipHeader=function tooltipHeader(bucket){return(0,_formatters.asRelativeDateTimeRange)(bucket.x0,bucket.x)};function ErrorDistribution(_ref2){var distribution=_ref2.distribution,title=_ref2.title;var buckets=getFormattedBuckets(distribution.buckets,distribution.bucketSize);if(!buckets||distribution.noHits){return _react.default.createElement(_EmptyMessage.EmptyMessage,{heading:_i18n.i18n.translate("xpack.apm.errorGroupDetails.noErrorsLabel",{defaultMessage:"No errors were found"})})}var xMin=_d.default.min(buckets,(function(d){return d.x0}));var xMax=_d.default.max(buckets,(function(d){return d.x}));var tickFormat=(0,_d3Scale.scaleUtc)().domain([xMin,xMax]).tickFormat();return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("span",null,title)),_react.default.createElement(_Histogram.default,{tooltipHeader:tooltipHeader,verticalLineHover:function verticalLineHover(bucket){return bucket.x},xType:"time-utc",formatX:function formatX(value){var time=value.getTime();return tickFormat(new Date(time-(0,_getTimezoneOffsetInMs.getTimezoneOffsetInMs)(time)))},buckets:buckets,bucketSize:distribution.bucketSize,formatYShort:function formatYShort(value){return _i18n.i18n.translate("xpack.apm.errorGroupDetails.occurrencesShortLabel",{defaultMessage:"{occCount} occ.",values:{occCount:value}})},formatYLong:function formatYLong(value){return _i18n.i18n.translate("xpack.apm.errorGroupDetails.occurrencesLongLabel",{defaultMessage:"{occCount} occurrences",values:{occCount:value}})}}))}},1229:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.HistogramInner=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _d2=_interopRequireDefault(__webpack_require__(45));var _lodash=__webpack_require__(3);var _propTypes=_interopRequireDefault(__webpack_require__(5));var _d3Scale=__webpack_require__(329);var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _SingleRect=_interopRequireDefault(__webpack_require__(3774));var _reactVis=__webpack_require__(191);var _variables=__webpack_require__(26);var _Tooltip=_interopRequireDefault(__webpack_require__(1230));var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _polished=__webpack_require__(149);var _timezone=__webpack_require__(1231);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var XY_HEIGHT=_variables.unit*10;var XY_MARGIN={top:_variables.unit,left:_variables.unit*5,right:_variables.unit,bottom:_variables.unit*2};var X_TICK_TOTAL=8;var ChartsWrapper=_styledComponents.default.div.withConfig({displayName:"ChartsWrapper",componentId:"sc-17u2nd5-0"})(["user-select:none;position:absolute;top:0;left:0;"]);var HistogramInner=function(_PureComponent){_inherits(HistogramInner,_PureComponent);function HistogramInner(props){var _this;_classCallCheck(this,HistogramInner);_this=_possibleConstructorReturn(this,_getPrototypeOf(HistogramInner).call(this,props));_defineProperty(_assertThisInitialized(_this),"onClick",(function(bucket){if(_this.props.onClick){_this.props.onClick(bucket)}}));_defineProperty(_assertThisInitialized(_this),"onHover",(function(bucket){_this.setState({hoveredBucket:bucket})}));_defineProperty(_assertThisInitialized(_this),"onBlur",(function(){_this.setState({hoveredBucket:{}})}));_this.state={hoveredBucket:{}};return _this}_createClass(HistogramInner,[{key:"getChartData",value:function getChartData(items,selectedItem){var yMax=_d2.default.max(items,(function(d){return d.y}));var MINIMUM_BUCKET_SIZE=yMax*.02;return items.map((function(item){var padding=(item.x-item.x0)/20;return _objectSpread({},item,{color:item===selectedItem?_eui_theme_light.default.euiColorVis1:(0,_polished.tint)(.5,_eui_theme_light.default.euiColorVis1),x0:item.x0+padding,x:item.x-padding,y:item.y>0?Math.max(item.y,MINIMUM_BUCKET_SIZE):0})}))}},{key:"render",value:function render(){var _this$props=this.props,backgroundHover=_this$props.backgroundHover,bucketIndex=_this$props.bucketIndex,buckets=_this$props.buckets,bucketSize=_this$props.bucketSize,formatX=_this$props.formatX,formatYShort=_this$props.formatYShort,formatYLong=_this$props.formatYLong,tooltipFooter=_this$props.tooltipFooter,tooltipHeader=_this$props.tooltipHeader,verticalLineHover=_this$props.verticalLineHover,XY_WIDTH=_this$props.width;var hoveredBucket=this.state.hoveredBucket;if((0,_lodash.isEmpty)(buckets)||XY_WIDTH===0){return null}var isTimeSeries=this.props.xType==="time"||this.props.xType==="time-utc";var xMin=_d2.default.min(buckets,(function(d){return d.x0}));var xMax=_d2.default.max(buckets,(function(d){return d.x}));var yMin=0;var yMax=_d2.default.max(buckets,(function(d){return d.y}));var selectedBucket=buckets[bucketIndex];var chartData=this.getChartData(buckets,selectedBucket);var _x=(0,_d3Scale.scaleLinear)().domain([xMin,xMax]).range([XY_MARGIN.left,XY_WIDTH-XY_MARGIN.right]);var y=(0,_d3Scale.scaleLinear)().domain([yMin,yMax]).range([XY_HEIGHT,0]).nice();var _getDomainTZ=(0,_timezone.getDomainTZ)(xMin,xMax),_getDomainTZ2=_slicedToArray(_getDomainTZ,2),xMinZone=_getDomainTZ2[0],xMaxZone=_getDomainTZ2[1];var xTickValues=isTimeSeries?(0,_timezone.getTimeTicksTZ)({domain:[xMinZone,xMaxZone],totalTicks:X_TICK_TOTAL,width:XY_WIDTH}):undefined;var xDomain=_x.domain();var yDomain=y.domain();var yTickValues=[0,yDomain[1]/2,yDomain[1]];var shouldShowTooltip=hoveredBucket.x>0&&(hoveredBucket.y>0||isTimeSeries);var showVerticalLineHover=verticalLineHover(hoveredBucket);var showBackgroundHover=backgroundHover(hoveredBucket);return _react.default.createElement("div",{style:{position:"relative",height:XY_HEIGHT}},_react.default.createElement(ChartsWrapper,null,_react.default.createElement(_reactVis.XYPlot,{xType:this.props.xType,width:XY_WIDTH,height:XY_HEIGHT,margin:XY_MARGIN,xDomain:xDomain,yDomain:yDomain},_react.default.createElement(_reactVis.HorizontalGridLines,{tickValues:yTickValues}),_react.default.createElement(_reactVis.XAxis,{style:{strokeWidth:"1px"},marginRight:10,tickSizeOuter:10,tickSizeInner:0,tickTotal:X_TICK_TOTAL,tickFormat:formatX,tickValues:xTickValues}),_react.default.createElement(_reactVis.YAxis,{tickSize:0,hideLine:true,tickValues:yTickValues,tickFormat:formatYShort}),showBackgroundHover&&_react.default.createElement(_SingleRect.default,{x:_x(hoveredBucket.x0),width:_x(bucketSize)-_x(0),style:{fill:_eui_theme_light.default.euiColorLightestShade}}),shouldShowTooltip&&_react.default.createElement(_Tooltip.default,{style:{marginLeft:"1%",marginRight:"1%"},header:tooltipHeader(hoveredBucket),footer:tooltipFooter(hoveredBucket),tooltipPoints:[{value:formatYLong(hoveredBucket.y)}],x:hoveredBucket.xCenter,y:yDomain[1]/2}),selectedBucket&&_react.default.createElement(_SingleRect.default,{x:_x(selectedBucket.x0),width:_x(bucketSize)-_x(0),style:{fill:"transparent",stroke:_eui_theme_light.default.euiColorVis1,rx:"0px",ry:"0px"}}),_react.default.createElement(_reactVis.VerticalRectSeries,{colorType:"literal",data:chartData,style:{rx:"0px",ry:"0px"}}),showVerticalLineHover&&_react.default.createElement(_reactVis.VerticalGridLines,{tickValues:[hoveredBucket.x]}),_react.default.createElement(_reactVis.Voronoi,{extent:[[XY_MARGIN.left,XY_MARGIN.top],[XY_WIDTH,XY_HEIGHT]],nodes:buckets.map((function(bucket){return _objectSpread({},bucket,{xCenter:(bucket.x0+bucket.x)/2})})),onClick:this.onClick,onHover:this.onHover,onBlur:this.onBlur,x:function x(d){return _x(d.xCenter)},y:function y(){return 1}}))))}}]);return HistogramInner}(_react.PureComponent);exports.HistogramInner=HistogramInner;HistogramInner.propTypes={backgroundHover:_propTypes.default.func,bucketIndex:_propTypes.default.number,buckets:_propTypes.default.array.isRequired,bucketSize:_propTypes.default.number.isRequired,formatX:_propTypes.default.func,formatYLong:_propTypes.default.func,formatYShort:_propTypes.default.func,onClick:_propTypes.default.func,tooltipFooter:_propTypes.default.func,tooltipHeader:_propTypes.default.func,verticalLineHover:_propTypes.default.func,width:_propTypes.default.number.isRequired,xType:_propTypes.default.string};HistogramInner.defaultProps={backgroundHover:function backgroundHover(){return null},formatYLong:function formatYLong(value){return value},formatYShort:function formatYShort(value){return value},tooltipFooter:function tooltipFooter(){return null},tooltipHeader:function tooltipHeader(){return null},verticalLineHover:function verticalLineHover(){return null},xType:"linear"};var _default=(0,_reactVis.makeWidthFlexible)(HistogramInner);exports.default=_default},1230:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=Tooltip;var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(3);var _reactVis=__webpack_require__(191);var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _variables=__webpack_require__(26);var _Legend=__webpack_require__(344);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _formatters=__webpack_require__(72);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var TooltipElm=_styledComponents.default.div.withConfig({displayName:"TooltipElm",componentId:"sc-1b5o2y6-0"})(["margin:0 ",";transform:translateY(-50%);border:1px solid ",";background:",";border-radius:",";font-size:",";color:",";"],(0,_variables.px)(_variables.unit),_eui_theme_light.default.euiColorLightShade,_eui_theme_light.default.euiColorEmptyShade,_variables.borderRadius,_variables.fontSize,_eui_theme_light.default.euiColorFullShade);var Header=_styledComponents.default.div.withConfig({displayName:"Header",componentId:"sc-1b5o2y6-1"})(["background:",";border-bottom:1px solid ",";border-radius:"," "," 0 0;padding:",";color:",";"],_eui_theme_light.default.euiColorLightestShade,_eui_theme_light.default.euiColorLightShade,_variables.borderRadius,_variables.borderRadius,(0,_variables.px)(_variables.units.half),_eui_theme_light.default.euiColorMediumShade);var Content=_styledComponents.default.div.withConfig({displayName:"Content",componentId:"sc-1b5o2y6-2"})(["margin:",";margin-right:",";font-size:",";"],(0,_variables.px)(_variables.units.half),(0,_variables.px)(_variables.unit),_variables.fontSizes.small);var Footer=_styledComponents.default.div.withConfig({displayName:"Footer",componentId:"sc-1b5o2y6-3"})(["color:",";margin:",";font-size:",";"],_eui_theme_light.default.euiColorMediumShade,(0,_variables.px)(_variables.units.half),_variables.fontSizes.small);var LegendContainer=_styledComponents.default.div.withConfig({displayName:"LegendContainer",componentId:"sc-1b5o2y6-4"})(["display:flex;align-items:center;margin-bottom:",";justify-content:space-between;"],(0,_variables.px)(_variables.units.quarter));var LegendGray=(0,_styledComponents.default)(_Legend.Legend).withConfig({displayName:"LegendGray",componentId:"sc-1b5o2y6-5"})(["color:",";padding-bottom:0;padding-right:",";"],_eui_theme_light.default.euiColorMediumShade,(0,_variables.px)(_variables.units.half));var Value=_styledComponents.default.div.withConfig({displayName:"Value",componentId:"sc-1b5o2y6-6"})(["color:",";font-size:",";"],_eui_theme_light.default.euiColorDarkShade,_variables.fontSize);function Tooltip(_ref){var header=_ref.header,footer=_ref.footer,tooltipPoints=_ref.tooltipPoints,x=_ref.x,y=_ref.y,props=_objectWithoutProperties(_ref,["header","footer","tooltipPoints","x","y"]);if((0,_lodash.isEmpty)(tooltipPoints)){return null}var showLegends=tooltipPoints.length>1;return _react.default.createElement(_reactVis.Hint,_extends({},props,{value:{x:x,y:y}}),_react.default.createElement(TooltipElm,null,_react.default.createElement(Header,null,header||(0,_formatters.asAbsoluteDateTime)(x,"seconds")),_react.default.createElement(Content,null,showLegends?tooltipPoints.map((function(point,i){return _react.default.createElement(LegendContainer,{key:i},_react.default.createElement(LegendGray,{fontSize:_variables.fontSize.tiny,radius:_variables.units.half,color:point.color,text:point.text}),_react.default.createElement(Value,null,point.value))})):_react.default.createElement(Value,null,tooltipPoints[0].value)),_react.default.createElement(Footer,null,footer)))}Tooltip.propTypes={header:_propTypes.default.string,tooltipPoints:_propTypes.default.array.isRequired,x:_propTypes.default.number,y:_propTypes.default.number};Tooltip.defaultProps={};module.exports=exports.default},1231:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDomainTZ=exports.getTimeTicksTZ=void 0;var _d2=_interopRequireDefault(__webpack_require__(45));var _getTimezoneOffsetInMs=__webpack_require__(622);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var getTimeTicksTZ=function getTimeTicksTZ(_ref){var domain=_ref.domain,totalTicks=_ref.totalTicks,width=_ref.width;return _d2.default.time.scale.utc().domain(domain).range([0,width]).ticks(totalTicks).map((function(x){var time=x.getTime();return new Date(time+(0,_getTimezoneOffsetInMs.getTimezoneOffsetInMs)(time))}))};exports.getTimeTicksTZ=getTimeTicksTZ;var getDomainTZ=function getDomainTZ(min,max){var _map=[min,max].map((function(time){return time-(0,_getTimezoneOffsetInMs.getTimezoneOffsetInMs)(time)})),_map2=_slicedToArray(_map,2),xMinZone=_map2[0],xMaxZone=_map2[1];return[xMinZone,xMaxZone]};exports.getDomainTZ=getDomainTZ},1232:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useAgentName=useAgentName;var _useFetcher2=__webpack_require__(36);var _useUrlParams2=__webpack_require__(35);function useAgentName(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var start=urlParams.start,end=urlParams.end,serviceName=urlParams.serviceName;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end){return callApmApi({pathname:"/api/apm/services/{serviceName}/agent_name",params:{path:{serviceName:serviceName},query:{start:start,end:end}}}).then((function(res){return res.agentName}))}}),[serviceName,start,end]),agentName=_useFetcher.data,error=_useFetcher.error,status=_useFetcher.status;return{agentName:agentName,status:status,error:error}}},1233:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EuiTabLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _classnames=_interopRequireDefault(__webpack_require__(79));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _variables=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Wrapper=_styledComponents.default.div.withConfig({displayName:"Wrapper",componentId:"sc-1m1b6bd-0"})(["padding:0;a{display:inline-block;padding:"," ",";","}"],(0,_variables.px)(_variables.unit*.75),(0,_variables.px)(_variables.unit),(function(_ref){var isSelected=_ref.isSelected;return!isSelected?"color: ".concat(_eui_theme_light.default.euiTextColor," !important;"):""}));var EuiTabLink=function EuiTabLink(props){var isSelected=props.isSelected,children=props.children;var className=(0,_classnames.default)("euiTab",{"euiTab-isSelected":isSelected});return _react.default.createElement(Wrapper,{className:className,isSelected:isSelected},_react.default.createElement("span",{className:"euiTab__content"},children))};exports.EuiTabLink=EuiTabLink},1234:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorOverviewLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(83);var _useUrlParams2=__webpack_require__(35);var _pickKeys=__webpack_require__(161);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var ErrorOverviewLink=function ErrorOverviewLink(_ref){var serviceName=_ref.serviceName,query=_ref.query,rest=_objectWithoutProperties(_ref,["serviceName","query"]);var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var persistedFilters=(0,_pickKeys.pickKeys)(urlParams,"host","containerId","podName","serviceVersion");return _react.default.createElement(_APMLink.APMLink,_extends({path:"/services/".concat(serviceName,"/errors"),query:_objectSpread({},persistedFilters,{},query)},rest))};exports.ErrorOverviewLink=ErrorOverviewLink},1235:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceMapLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(83);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var ServiceMapLink=function ServiceMapLink(_ref){var serviceName=_ref.serviceName,rest=_objectWithoutProperties(_ref,["serviceName"]);var path=serviceName?"/services/".concat(serviceName,"/service-map"):"/service-map";return _react.default.createElement(_APMLink.APMLink,_extends({path:path},rest))};exports.ServiceMapLink=ServiceMapLink},1236:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorDetailLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(83);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var ErrorDetailLink=function ErrorDetailLink(_ref){var serviceName=_ref.serviceName,errorGroupId=_ref.errorGroupId,rest=_objectWithoutProperties(_ref,["serviceName","errorGroupId"]);return _react.default.createElement(_APMLink.APMLink,_extends({path:"/services/".concat(serviceName,"/errors/").concat(errorGroupId)},rest))};exports.ErrorDetailLink=ErrorDetailLink},1237:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceMap=ServiceMap;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _service_map=__webpack_require__(3791);var _useFetcher2=__webpack_require__(36);var _useLicense=__webpack_require__(623);var _useUrlParams2=__webpack_require__(35);var _createCallApmApi=__webpack_require__(159);var _BetaBadge=__webpack_require__(3793);var _LicensePrompt=__webpack_require__(1238);var _Controls=__webpack_require__(3795);var _Cytoscape=__webpack_require__(441);var _cytoscapeOptions=__webpack_require__(442);var _EmptyBanner=__webpack_require__(3811);var _Popover=__webpack_require__(3812);var _useRefDimensions2=__webpack_require__(3818);var _public=__webpack_require__(78);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ServiceMap(_ref){var _ref2;var serviceName=_ref.serviceName;var license=(0,_useLicense.useLicense)();var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var _useFetcher=(0,_useFetcher2.useFetcher)((function(){if(!license||!(0,_service_map.isValidPlatinumLicense)(license)){return}var start=urlParams.start,end=urlParams.end,environment=urlParams.environment;if(start&&end){return(0,_createCallApmApi.callApmApi)({isCachable:false,pathname:"/api/apm/service-map",params:{query:{start:start,end:end,environment:environment,serviceName:serviceName}}})}}),[license,serviceName,urlParams]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?{elements:[]}:_useFetcher$data;var _useRefDimensions=(0,_useRefDimensions2.useRefDimensions)(),ref=_useRefDimensions.ref,height=_useRefDimensions.height,width=_useRefDimensions.width;(0,_public.useTrackPageview)({app:"apm",path:"service_map"});(0,_public.useTrackPageview)({app:"apm",path:"service_map",delay:15e3});if(!license){return null}return(0,_service_map.isValidPlatinumLicense)(license)?_react.default.createElement("div",{style:{height:height-parseInt(_eui_theme_light.default.gutterTypes.gutterLarge,10)},ref:ref},_react.default.createElement(_Cytoscape.Cytoscape,{elements:(_ref2=data===null||data===void 0?void 0:data.elements)!==null&&_ref2!==void 0?_ref2:[],height:height,serviceName:serviceName,style:_cytoscapeOptions.cytoscapeDivStyle,width:width},_react.default.createElement(_Controls.Controls,null),_react.default.createElement(_BetaBadge.BetaBadge,null),serviceName&&_react.default.createElement(_EmptyBanner.EmptyBanner,null),_react.default.createElement(_Popover.Popover,{focusedServiceName:serviceName}))):_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",style:{height:"60vh"}},_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{width:600,textAlign:"center"}},_react.default.createElement(_LicensePrompt.LicensePrompt,{text:_service_map.invalidLicenseMessage,showBetaBadge:true})))}},1238:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LicensePrompt=void 0;var _eui=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _useKibanaUrl=__webpack_require__(3794);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LicensePrompt=function LicensePrompt(_ref){var text=_ref.text,_ref$showBetaBadge=_ref.showBetaBadge,showBetaBadge=_ref$showBetaBadge===void 0?false:_ref$showBetaBadge;var licensePageUrl=(0,_useKibanaUrl.useKibanaUrl)("/app/kibana","/management/elasticsearch/license_management/home");var renderLicenseBody=_react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"iInCircle",iconColor:"subdued",title:_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.apm.license.title",{defaultMessage:"Start free 30-day trial"})),body:_react.default.createElement("p",null,text),actions:_react.default.createElement(_eui.EuiButton,{fill:true,href:licensePageUrl},_i18n.i18n.translate("xpack.apm.license.button",{defaultMessage:"Start trial"}))});var renderWithBetaBadge=_react.default.createElement(_eui.EuiPanel,{betaBadgeLabel:_i18n.i18n.translate("xpack.apm.license.betaBadge",{defaultMessage:"Beta"}),betaBadgeTooltipContent:_i18n.i18n.translate("xpack.apm.license.betaTooltipMessage",{defaultMessage:"This feature is currently in beta. If you encounter any bugs or have feedback, please open an issue or visit our discussion forum."})},renderLicenseBody);return _react.default.createElement(_react.default.Fragment,null,showBetaBadge?renderWithBetaBadge:renderLicenseBody)};exports.LicensePrompt=LicensePrompt},1239:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useServiceMetricCharts=useServiceMetricCharts;var _UrlParamsContext=__webpack_require__(342);var _useFetcher2=__webpack_require__(36);var INITIAL_DATA={charts:[]};function useServiceMetricCharts(urlParams,agentName){var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,serviceNodeName=urlParams.serviceNodeName;var uiFilters=(0,_UrlParamsContext.useUiFilters)(urlParams);var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end&&agentName){return callApmApi({pathname:"/api/apm/services/{serviceName}/metrics/charts",params:{path:{serviceName:serviceName},query:{start:start,end:end,agentName:agentName,serviceNodeName:serviceNodeName,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,agentName,serviceNodeName,uiFilters]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?INITIAL_DATA:_useFetcher$data,error=_useFetcher.error,status=_useFetcher.status;return{data:data,status:status,error:error}}},1240:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricsChart=MetricsChart;var _eui=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _CustomPlot=_interopRequireDefault(__webpack_require__(1241));var _formatters=__webpack_require__(72);var _isValidCoordinateValue=__webpack_require__(347);var _useChartsSync=__webpack_require__(1242);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function MetricsChart(_ref){var chart=_ref.chart;var formatYValue=getYTickFormatter(chart);var formatTooltip=getTooltipFormatter(chart);var transformedSeries=chart.series.map((function(series){return _objectSpread({},series,{legendValue:formatYValue(series.overallValue)})}));var syncedChartProps=(0,_useChartsSync.useChartsSync)();return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("span",null,chart.title)),_react.default.createElement(_CustomPlot.default,_extends({},syncedChartProps,{series:transformedSeries,tickFormatY:formatYValue,formatTooltipValue:formatTooltip,yMax:chart.yUnit==="percent"?1:"max"})))}function getYTickFormatter(chart){switch(chart.yUnit){case"bytes":{var max=Math.max.apply(Math,_toConsumableArray(chart.series.flatMap((function(series){return series.data.map((function(coord){return coord.y||0}))}))));return(0,_formatters.getFixedByteFormatter)(max)}case"percent":{return function(y){return(0,_formatters.asPercent)(y||0,1)}}case"time":{return function(y){return(0,_formatters.asDuration)(y)}}case"integer":{return function(y){return(0,_isValidCoordinateValue.isValidCoordinateValue)(y)?(0,_formatters.asInteger)(y):y}}default:{return function(y){return(0,_isValidCoordinateValue.isValidCoordinateValue)(y)?(0,_formatters.asDecimal)(y):y}}}}function getTooltipFormatter(_ref2){var yUnit=_ref2.yUnit;switch(yUnit){case"bytes":{return function(c){return(0,_formatters.asDynamicBytes)(c.y)}}case"percent":{return function(c){return(0,_formatters.asPercent)(c.y||0,1)}}case"time":{return function(c){return(0,_formatters.asDuration)(c.y)}}case"integer":{return function(c){return(0,_isValidCoordinateValue.isValidCoordinateValue)(c.y)?(0,_formatters.asInteger)(c.y):c.y}}default:{return function(c){return(0,_isValidCoordinateValue.isValidCoordinateValue)(c.y)?(0,_formatters.asDecimal)(c.y):c.y}}}}},1241:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.InnerCustomPlot=void 0;var _lodash=__webpack_require__(3);var _reactVis=__webpack_require__(191);var _propTypes=_interopRequireDefault(__webpack_require__(5));var _react=_interopRequireWildcard(__webpack_require__(0));var _Legends=_interopRequireDefault(__webpack_require__(3820));var _StaticPlot=_interopRequireDefault(__webpack_require__(3821));var _InteractivePlot=_interopRequireDefault(__webpack_require__(3823));var _VoronoiPlot=_interopRequireDefault(__webpack_require__(3825));var _AnnotationsPlot=__webpack_require__(3826);var _reselect=__webpack_require__(148);var _plotUtils=__webpack_require__(346);var _isValidCoordinateValue=__webpack_require__(347);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VISIBLE_LEGEND_COUNT=4;function getHiddenLegendCount(series){return series.filter((function(serie){return serie.hideLegend})).length}var InnerCustomPlot=function(_PureComponent){_inherits(InnerCustomPlot,_PureComponent);function InnerCustomPlot(){var _getPrototypeOf2;var _this;_classCallCheck(this,InnerCustomPlot);for(var _len=arguments.length,_args=new Array(_len),_key=0;_key<_len;_key++){_args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(InnerCustomPlot)).call.apply(_getPrototypeOf2,[this].concat(_args)));_defineProperty(_assertThisInitialized(_this),"state",{seriesEnabledState:[],isDrawing:false,selectionStart:null,selectionEnd:null,showAnnotations:true});_defineProperty(_assertThisInitialized(_this),"getEnabledSeries",(0,_reselect.createSelector)((function(state){return state.visibleSeries}),(function(state){return state.seriesEnabledState}),(function(visibleSeries,seriesEnabledState){return visibleSeries.filter((function(serie,i){return!seriesEnabledState[i]}))})));_defineProperty(_assertThisInitialized(_this),"getOptions",(0,_reselect.createSelector)((function(state){return state.width}),(function(state){return state.yMin}),(function(state){return state.yMax}),(function(state){return state.height}),(function(state){return state.stackBy}),(function(width,yMin,yMax,height,stackBy){return{width:width,yMin:yMin,yMax:yMax,height:height,stackBy:stackBy}})));_defineProperty(_assertThisInitialized(_this),"getPlotValues",(0,_reselect.createSelector)((function(state){return state.visibleSeries}),(function(state){return state.enabledSeries}),(function(state){return state.options}),_plotUtils.getPlotValues));_defineProperty(_assertThisInitialized(_this),"getVisibleSeries",(0,_reselect.createSelector)((function(state){return state.series}),(function(series){return series.slice(0,VISIBLE_LEGEND_COUNT+getHiddenLegendCount(series))})));_defineProperty(_assertThisInitialized(_this),"clickLegend",(function(i){_this.setState((function(_ref){var seriesEnabledState=_ref.seriesEnabledState;var nextSeriesEnabledState=_this.props.series.map((function(value,_i){var disabledValue=seriesEnabledState[_i];return i===_i?!disabledValue:!!disabledValue}));return{seriesEnabledState:nextSeriesEnabledState}}))}));_defineProperty(_assertThisInitialized(_this),"onMouseLeave",(function(){var _this$props;(_this$props=_this.props).onMouseLeave.apply(_this$props,arguments)}));_defineProperty(_assertThisInitialized(_this),"onMouseDown",(function(node){return _this.setState({isDrawing:true,selectionStart:node.x,selectionEnd:null})}));_defineProperty(_assertThisInitialized(_this),"onMouseUp",(function(){if(_this.state.isDrawing&&_this.state.selectionEnd!==null){var _sort=[_this.state.selectionStart,_this.state.selectionEnd].sort(),_sort2=_slicedToArray(_sort,2),start=_sort2[0],end=_sort2[1];_this.props.onSelectionEnd({start:start,end:end})}_this.setState({isDrawing:false})}));_defineProperty(_assertThisInitialized(_this),"onHover",(function(node){_this.props.onHover(node.x);if(_this.state.isDrawing){_this.setState({selectionEnd:node.x})}}));return _this}_createClass(InnerCustomPlot,[{key:"componentDidMount",value:function componentDidMount(){document.body.addEventListener("mouseup",this.onMouseUp)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.body.removeEventListener("mouseup",this.onMouseUp)}},{key:"render",value:function render(){var _this2=this;var _this$props2=this.props,series=_this$props2.series,truncateLegends=_this$props2.truncateLegends,width=_this$props2.width,annotations=_this$props2.annotations;if(!width){return null}var hiddenSeriesCount=Math.max(series.length-VISIBLE_LEGEND_COUNT-getHiddenLegendCount(series),0);var visibleSeries=this.getVisibleSeries({series:series});var enabledSeries=this.getEnabledSeries({visibleSeries:visibleSeries,seriesEnabledState:this.state.seriesEnabledState});var options=this.getOptions(this.props);var hasValidCoordinates=(0,_lodash.flatten)(series.map((function(s){return s.data}))).some((function(p){return(0,_isValidCoordinateValue.isValidCoordinateValue)(p.y)}));var noHits=!hasValidCoordinates;var plotValues=this.getPlotValues({visibleSeries:visibleSeries,enabledSeries:enabledSeries,options:options});if((0,_lodash.isEmpty)(plotValues)){return null}return _react.default.createElement(_react.Fragment,null,_react.default.createElement("div",{style:{position:"relative",height:plotValues.XY_HEIGHT}},_react.default.createElement(_StaticPlot.default,{width:width,noHits:noHits,plotValues:plotValues,series:enabledSeries,tickFormatY:this.props.tickFormatY,tickFormatX:this.props.tickFormatX}),this.state.showAnnotations&&!(0,_lodash.isEmpty)(annotations)&&_react.default.createElement(_AnnotationsPlot.AnnotationsPlot,{plotValues:plotValues,width:width,annotations:annotations||[]}),_react.default.createElement(_InteractivePlot.default,{plotValues:plotValues,hoverX:this.props.hoverX,series:enabledSeries,formatTooltipValue:this.props.formatTooltipValue,isDrawing:this.state.isDrawing,selectionStart:this.state.selectionStart,selectionEnd:this.state.selectionEnd}),_react.default.createElement(_VoronoiPlot.default,{noHits:noHits,plotValues:plotValues,series:enabledSeries,onHover:this.onHover,onMouseLeave:this.onMouseLeave,onMouseDown:this.onMouseDown})),_react.default.createElement(_Legends.default,{noHits:noHits,truncateLegends:truncateLegends,series:visibleSeries,hiddenSeriesCount:hiddenSeriesCount,clickLegend:this.clickLegend,seriesEnabledState:this.state.seriesEnabledState,hasAnnotations:!(0,_lodash.isEmpty)(annotations),showAnnotations:this.state.showAnnotations,onAnnotationsToggle:function onAnnotationsToggle(){_this2.setState((function(_ref2){var showAnnotations=_ref2.showAnnotations;return{showAnnotations:!showAnnotations}}))}}))}}]);return InnerCustomPlot}(_react.PureComponent);exports.InnerCustomPlot=InnerCustomPlot;InnerCustomPlot.propTypes={formatTooltipValue:_propTypes.default.func,hoverX:_propTypes.default.number,onHover:_propTypes.default.func.isRequired,onMouseLeave:_propTypes.default.func.isRequired,onSelectionEnd:_propTypes.default.func.isRequired,series:_propTypes.default.array.isRequired,tickFormatY:_propTypes.default.func,truncateLegends:_propTypes.default.bool,width:_propTypes.default.number.isRequired,height:_propTypes.default.number,stackBy:_propTypes.default.string,annotations:_propTypes.default.arrayOf(_propTypes.default.shape({type:_propTypes.default.string,id:_propTypes.default.string,firstSeen:_propTypes.default.number}))};InnerCustomPlot.defaultProps={formatTooltipValue:function formatTooltipValue(p){return p.y},tickFormatX:undefined,tickFormatY:function tickFormatY(y){return y},truncateLegends:false};var _default=(0,_reactVis.makeWidthFlexible)(InnerCustomPlot);exports.default=_default},1242:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useChartsSync=useChartsSync;var _react=__webpack_require__(0);var _ChartsSyncContext=__webpack_require__(348);function useChartsSync(){var context=(0,_react.useContext)(_ChartsSyncContext.ChartsSyncContext);if(!context){throw new Error("Missing ChartsSync context provider")}return context}},1243:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useTransactionCharts=useTransactionCharts;var _react=__webpack_require__(0);var _chartSelectors=__webpack_require__(3831);var _useFetcher2=__webpack_require__(36);var _useUrlParams2=__webpack_require__(35);function useTransactionCharts(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),_useUrlParams$urlPara=_useUrlParams.urlParams,serviceName=_useUrlParams$urlPara.serviceName,transactionType=_useUrlParams$urlPara.transactionType,start=_useUrlParams$urlPara.start,end=_useUrlParams$urlPara.end,transactionName=_useUrlParams$urlPara.transactionName,uiFilters=_useUrlParams.uiFilters;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end){return callApmApi({pathname:"/api/apm/services/{serviceName}/transaction_groups/charts",params:{path:{serviceName:serviceName},query:{start:start,end:end,transactionType:transactionType,transactionName:transactionName,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,transactionName,transactionType,uiFilters]),data=_useFetcher.data,error=_useFetcher.error,status=_useFetcher.status;var memoizedData=(0,_react.useMemo)((function(){return(0,_chartSelectors.getTransactionCharts)({transactionType:transactionType},data)}),[data,transactionType]);return{data:memoizedData,status:status,error:error}}},1244:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getMlPrefix=getMlPrefix;exports.getMlJobId=getMlJobId;exports.getMlIndex=getMlIndex;function getMlPrefix(serviceName,transactionType){var maybeTransactionType=transactionType?"".concat(transactionType,"-"):"";return"".concat(serviceName,"-").concat(maybeTransactionType).toLowerCase()}function getMlJobId(serviceName,transactionType){return"".concat(getMlPrefix(serviceName,transactionType),"high_mean_response_time")}function getMlIndex(serviceName,transactionType){return".ml-anomalies-".concat(getMlJobId(serviceName,transactionType))}},1245:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MLLink=MLLink;var _eui=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _url=_interopRequireDefault(__webpack_require__(84));var _risonNode=_interopRequireDefault(__webpack_require__(295));var _useLocation=__webpack_require__(132);var _rison_helpers=__webpack_require__(1219);var _useApmPluginContext2=__webpack_require__(62);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function MLLink(_ref){var children=_ref.children,_ref$path=_ref.path,path=_ref$path===void 0?"":_ref$path,_ref$query=_ref.query,query=_ref$query===void 0?{}:_ref$query;var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),core=_useApmPluginContext.core;var location=(0,_useLocation.useLocation)();var risonQuery=(0,_rison_helpers.getTimepickerRisonData)(location.search);if(query.ml){risonQuery.ml=query.ml}var href=_url.default.format({pathname:core.http.basePath.prepend("/app/ml"),hash:"".concat(path,"?_g=").concat(_risonNode.default.encode(risonQuery))});return _react.default.createElement(_eui.EuiLink,{children:children,href:href})}},1246:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionBreakdown=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _useTransactionBreakdown=__webpack_require__(3843);var _TransactionBreakdownHeader=__webpack_require__(3844);var _TransactionBreakdownKpiList=__webpack_require__(3845);var _TransactionBreakdownGraph=__webpack_require__(3859);var _useFetcher=__webpack_require__(36);var _public=__webpack_require__(78);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var emptyMessage=_i18n.i18n.translate("xpack.apm.transactionBreakdown.noData",{defaultMessage:"No data within this time range."});var TransactionBreakdown=function TransactionBreakdown(_ref){var initialIsOpen=_ref.initialIsOpen;var _useState=(0,_react.useState)(!!initialIsOpen),_useState2=_slicedToArray(_useState,2),showChart=_useState2[0],setShowChart=_useState2[1];var _useTransactionBreakd=(0,_useTransactionBreakdown.useTransactionBreakdown)(),data=_useTransactionBreakd.data,status=_useTransactionBreakd.status;var trackApmEvent=(0,_public.useUiTracker)({app:"apm"});var kpis=data.kpis,timeseries=data.timeseries;var noHits=data.kpis.length===0&&status===_useFetcher.FETCH_STATUS.SUCCESS;var showEmptyMessage=noHits&&!showChart;return _react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_TransactionBreakdownHeader.TransactionBreakdownHeader,{showChart:showChart,onToggleClick:function onToggleClick(){setShowChart(!showChart);if(showChart){trackApmEvent({metric:"hide_breakdown_chart"})}else{trackApmEvent({metric:"show_breakdown_chart"})}}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},showEmptyMessage?_react.default.createElement(_eui.EuiText,null,emptyMessage):_react.default.createElement(_TransactionBreakdownKpiList.TransactionBreakdownKpiList,{kpis:kpis})),showChart?_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_TransactionBreakdownGraph.TransactionBreakdownGraph,{timeseries:timeseries})):null))};exports.TransactionBreakdown=TransactionBreakdown},1247:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ImpactBar=ImpactBar;var _eui=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function ImpactBar(_ref){var value=_ref.value,_ref$max=_ref.max,max=_ref$max===void 0?100:_ref$max,rest=_objectWithoutProperties(_ref,["value","max"]);return _react.default.createElement(_eui.EuiProgress,_extends({size:"l",value:value,max:max,color:"primary"},rest))}},1248:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionSummary=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _=__webpack_require__(619);var _TimestampTooltip=__webpack_require__(287);var _DurationSummaryItem=__webpack_require__(1249);var _ErrorCountSummaryItemBadge=__webpack_require__(3879);var _agent_name=__webpack_require__(345);var _HttpInfoSummaryItem=__webpack_require__(621);var _TransactionResultSummaryItem=__webpack_require__(3880);var _UserAgentSummaryItem=__webpack_require__(1227);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getTransactionResultSummaryItem=function getTransactionResultSummaryItem(transaction){var _transaction$transact,_transaction$url;var result=transaction.transaction.result;var isRumAgent=(0,_agent_name.isRumAgentName)(transaction.agent.name);var url=isRumAgent?(_transaction$transact=transaction.transaction.page)===null||_transaction$transact===void 0?void 0:_transaction$transact.url:(_transaction$url=transaction.url)===null||_transaction$url===void 0?void 0:_transaction$url.full;if(url){var _transaction$http,_transaction$http$req,_transaction$http2,_transaction$http2$re;var method=(_transaction$http=transaction.http)===null||_transaction$http===void 0?void 0:(_transaction$http$req=_transaction$http.request)===null||_transaction$http$req===void 0?void 0:_transaction$http$req.method;var status=(_transaction$http2=transaction.http)===null||_transaction$http2===void 0?void 0:(_transaction$http2$re=_transaction$http2.response)===null||_transaction$http2$re===void 0?void 0:_transaction$http2$re.status_code;return _react.default.createElement(_HttpInfoSummaryItem.HttpInfoSummaryItem,{method:method,status:status,url:url})}if(result){return _react.default.createElement(_TransactionResultSummaryItem.TransactionResultSummaryItem,{transactionResult:result})}return null};var TransactionSummary=function TransactionSummary(_ref){var transaction=_ref.transaction,totalDuration=_ref.totalDuration,errorCount=_ref.errorCount;var items=[_react.default.createElement(_TimestampTooltip.TimestampTooltip,{time:transaction.timestamp.us/1e3}),_react.default.createElement(_DurationSummaryItem.DurationSummaryItem,{duration:transaction.transaction.duration.us,totalDuration:totalDuration,parentType:"trace"}),getTransactionResultSummaryItem(transaction),errorCount?_react.default.createElement(_ErrorCountSummaryItemBadge.ErrorCountSummaryItemBadge,{count:errorCount}):null,transaction.user_agent?_react.default.createElement(_UserAgentSummaryItem.UserAgentSummaryItem,transaction.user_agent):null];return _react.default.createElement(_.Summary,{items:items})};exports.TransactionSummary=TransactionSummary},1249:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DurationSummaryItem=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(2);var _PercentOfParent=__webpack_require__(3878);var _formatters=__webpack_require__(72);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DurationSummaryItem=function DurationSummaryItem(_ref){var duration=_ref.duration,totalDuration=_ref.totalDuration,parentType=_ref.parentType;var calculatedTotalDuration=totalDuration===undefined?duration:totalDuration;var label=_i18n.i18n.translate("xpack.apm.transactionDurationLabel",{defaultMessage:"Duration"});return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiToolTip,{content:label},_react.default.createElement(_eui.EuiText,null,(0,_formatters.asDuration)(duration)))," ",_react.default.createElement(_eui.EuiText,{size:"s"},_react.default.createElement(_PercentOfParent.PercentOfParent,{duration:duration,totalDuration:calculatedTotalDuration,parentType:parentType})))};exports.DurationSummaryItem=DurationSummaryItem},1250:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionActionMenu=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _public=__webpack_require__(78);var _useApmPluginContext2=__webpack_require__(62);var _useFetcher2=__webpack_require__(36);var _useLocation=__webpack_require__(132);var _useUrlParams2=__webpack_require__(35);var _CustomLinkFlyout=__webpack_require__(1251);var _CustomLink=__webpack_require__(3888);var _CustomLinkPopover=__webpack_require__(3889);var _sections=__webpack_require__(3890);var _useLicense=__webpack_require__(623);var _variables=__webpack_require__(26);var _helper=__webpack_require__(630);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var ActionMenuButton=function ActionMenuButton(_ref){var onClick=_ref.onClick;return _react.default.createElement(_eui.EuiButtonEmpty,{iconType:"arrowDown",iconSide:"right",onClick:onClick},_i18n.i18n.translate("xpack.apm.transactionActionMenu.actionsButtonLabel",{defaultMessage:"Actions"}))};var TransactionActionMenu=function TransactionActionMenu(_ref2){var transaction=_ref2.transaction;var license=(0,_useLicense.useLicense)();var hasValidLicense=(license===null||license===void 0?void 0:license.isActive)&&(license===null||license===void 0?void 0:license.hasAtLeast("gold"));var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),core=_useApmPluginContext.core;var location=(0,_useLocation.useLocation)();var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isActionPopoverOpen=_useState2[0],setIsActionPopoverOpen=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),isCustomLinksPopoverOpen=_useState4[0],setIsCustomLinksPopoverOpen=_useState4[1];var _useState5=(0,_react.useState)(false),_useState6=_slicedToArray(_useState5,2),isCustomLinkFlyoutOpen=_useState6[0],setIsCustomLinkFlyoutOpen=_useState6[1];var filters=(0,_react.useMemo)((function(){return[{key:"service.name",value:transaction===null||transaction===void 0?void 0:transaction.service.name},{key:"service.environment",value:transaction===null||transaction===void 0?void 0:transaction.service.environment},{key:"transaction.name",value:transaction===null||transaction===void 0?void 0:transaction.transaction.name},{key:"transaction.type",value:transaction===null||transaction===void 0?void 0:transaction.transaction.type}].filter((function(filter){return typeof filter.value==="string"}))}),[transaction]);var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){return callApmApi({pathname:"/api/apm/settings/custom_links",params:{query:(0,_helper.convertFiltersToQuery)(filters)}})}),[filters]),_useFetcher$data=_useFetcher.data,customLinks=_useFetcher$data===void 0?[]:_useFetcher$data,status=_useFetcher.status,refetch=_useFetcher.refetch;var sections=(0,_sections.getSections)({transaction:transaction,basePath:core.http.basePath,location:location,urlParams:urlParams});var closePopover=function closePopover(){setIsActionPopoverOpen(false);setIsCustomLinksPopoverOpen(false)};var toggleCustomLinkFlyout=function toggleCustomLinkFlyout(){closePopover();setIsCustomLinkFlyoutOpen((function(isOpen){return!isOpen}))};var toggleCustomLinkPopover=function toggleCustomLinkPopover(){setIsCustomLinksPopoverOpen((function(isOpen){return!isOpen}))};return _react.default.createElement(_react.default.Fragment,null,isCustomLinkFlyoutOpen&&_react.default.createElement(_CustomLinkFlyout.CustomLinkFlyout,{defaults:{filters:filters},onClose:toggleCustomLinkFlyout,onSave:function onSave(){toggleCustomLinkFlyout();refetch()},onDelete:function onDelete(){toggleCustomLinkFlyout();refetch()}}),_react.default.createElement(_public.ActionMenu,{id:"transactionActionMenu",closePopover:closePopover,isOpen:isActionPopoverOpen,anchorPosition:"downRight",button:_react.default.createElement(ActionMenuButton,{onClick:function onClick(){return setIsActionPopoverOpen(true)}})},_react.default.createElement("div",{style:{maxHeight:(0,_variables.px)(600),width:(0,_variables.px)(335)}},isCustomLinksPopoverOpen?_react.default.createElement(_CustomLinkPopover.CustomLinkPopover,{customLinks:customLinks.slice(3,customLinks.length),onCreateCustomLinkClick:toggleCustomLinkFlyout,onClose:toggleCustomLinkPopover,transaction:transaction}):_react.default.createElement(_react.default.Fragment,null,sections.map((function(section,idx){var isLastSection=idx!==sections.length-1;return _react.default.createElement("div",{key:idx},section.map((function(item){return _react.default.createElement(_public.Section,{key:item.key},item.title&&_react.default.createElement(_public.SectionTitle,null,item.title),item.subtitle&&_react.default.createElement(_public.SectionSubtitle,null,item.subtitle),_react.default.createElement(_public.SectionLinks,null,item.actions.map((function(action){return _react.default.createElement(_public.SectionLink,{key:action.key,label:action.label,href:action.href})}))))})),isLastSection&&_react.default.createElement(_public.ActionMenuDivider,null))})),hasValidLicense&&_react.default.createElement(_CustomLink.CustomLink,{customLinks:customLinks,status:status,onCreateCustomLinkClick:toggleCustomLinkFlyout,onSeeMoreClick:toggleCustomLinkPopover,transaction:transaction})))))};exports.TransactionActionMenu=TransactionActionMenu},1251:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CustomLinkFlyout=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _useApmPluginContext=__webpack_require__(62);var _FiltersSection=__webpack_require__(3881);var _FlyoutFooter=__webpack_require__(3883);var _LinkSection=__webpack_require__(3885);var _saveCustomLink=__webpack_require__(3886);var _LinkPreview=__webpack_require__(3887);var _Documentation=__webpack_require__(1252);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var filtersEmptyState=[{key:"",value:""}];var CustomLinkFlyout=function CustomLinkFlyout(_ref){var _defaults$filters;var onClose=_ref.onClose,onSave=_ref.onSave,onDelete=_ref.onDelete,defaults=_ref.defaults,customLinkId=_ref.customLinkId;var toasts=(0,_useApmPluginContext.useApmPluginContext)().core.notifications.toasts;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isSaving=_useState2[0],setIsSaving=_useState2[1];var _useState3=(0,_react.useState)((defaults===null||defaults===void 0?void 0:defaults.label)||""),_useState4=_slicedToArray(_useState3,2),label=_useState4[0],setLabel=_useState4[1];var _useState5=(0,_react.useState)((defaults===null||defaults===void 0?void 0:defaults.url)||""),_useState6=_slicedToArray(_useState5,2),url=_useState6[0],setUrl=_useState6[1];var _useState7=(0,_react.useState)((defaults===null||defaults===void 0?void 0:(_defaults$filters=defaults.filters)===null||_defaults$filters===void 0?void 0:_defaults$filters.length)?defaults.filters:filtersEmptyState),_useState8=_slicedToArray(_useState7,2),filters=_useState8[0],setFilters=_useState8[1];var isFormValid=!!label&&!!url;var onSubmit=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(event){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setIsSaving(true);_context.next=4;return(0,_saveCustomLink.saveCustomLink)({id:customLinkId,label:label,url:url,filters:filters,toasts:toasts});case 4:setIsSaving(false);onSave();case 6:case"end":return _context.stop()}}}),_callee)})));return function onSubmit(_x){return _ref2.apply(this,arguments)}}();return _react.default.createElement(_eui.EuiPortal,null,_react.default.createElement("form",{onSubmit:onSubmit},_react.default.createElement(_eui.EuiFlyout,{ownFocus:true,onClose:onClose,size:"m"},_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyout.title",{defaultMessage:"Create link"})))),_react.default.createElement(_eui.EuiFlyoutBody,null,_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyout.label",{defaultMessage:"Links will be available in the context of transaction details throughout the APM app. You can create an unlimited number of links. You can refer to dynamic variables by using any of the transaction metadata to fill in your URLs. More information, including examples, are available in the"})," ",_react.default.createElement(_Documentation.Documentation,{label:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyout.label.doc",{defaultMessage:"documentation."})}))),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_LinkSection.LinkSection,{label:label,onChangeLabel:setLabel,url:url,onChangeUrl:setUrl}),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_FiltersSection.FiltersSection,{filters:filters,onChangeFilters:setFilters}),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_LinkPreview.LinkPreview,{label:label,url:url,filters:filters})),_react.default.createElement(_FlyoutFooter.FlyoutFooter,{isSaveButtonEnabled:isFormValid,onClose:onClose,isSaving:isSaving,onDelete:onDelete,customLinkId:customLinkId}))))};exports.CustomLinkFlyout=CustomLinkFlyout},1252:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Documentation=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _ElasticDocsLink=__webpack_require__(238);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Documentation=function Documentation(_ref){var label=_ref.label;return _react.default.createElement(_ElasticDocsLink.ElasticDocsLink,{section:"/kibana",path:"/custom-links.html",target:"_blank"},label)};exports.Documentation=Documentation},1253:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CustomLinkSection=void 0;var _eui=__webpack_require__(2);var _mustache=_interopRequireDefault(__webpack_require__(557));var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _variables=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LinkContainer=_styledComponents.default.li.withConfig({displayName:"LinkContainer",componentId:"z4anlk-0"})(["margin-top:",";&:first-of-type{margin-top:0;}"],(0,_variables.px)(_variables.units.half));var TruncateText=(0,_styledComponents.default)(_eui.EuiText).withConfig({displayName:"TruncateText",componentId:"z4anlk-1"})(["font-weight:500;line-height:",";",""],(0,_variables.px)(_variables.units.unit),(0,_variables.truncate)((0,_variables.px)(_variables.units.unit*25)));var CustomLinkSection=function CustomLinkSection(_ref){var customLinks=_ref.customLinks,transaction=_ref.transaction;return _react.default.createElement("ul",null,customLinks.map((function(link){var href=link.url;try{href=_mustache.default.render(link.url,transaction)}catch(e){}return _react.default.createElement(LinkContainer,{key:link.id},_react.default.createElement(_eui.EuiLink,{href:href,target:"_blank"},_react.default.createElement(TruncateText,{size:"s"},link.label)))})))};exports.CustomLinkSection=CustomLinkSection},1254:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ManageCustomLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _APMLink=__webpack_require__(83);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ManageCustomLink=function ManageCustomLink(_ref){var onCreateCustomLinkClick=_ref.onCreateCustomLinkClick,_ref$showCreateCustom=_ref.showCreateCustomLinkButton,showCreateCustomLinkButton=_ref$showCreateCustom===void 0?true:_ref$showCreateCustom;return _react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"none"},_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{justifyContent:"center"}},_react.default.createElement(_eui.EuiToolTip,{position:"top",content:_i18n.i18n.translate("xpack.apm.customLink.buttom.manage",{defaultMessage:"Manage custom links"})},_react.default.createElement(_APMLink.APMLink,{path:"/settings/customize-ui"},_react.default.createElement(_eui.EuiIcon,{type:"gear",color:"text","aria-label":"Custom links settings page"})))),showCreateCustomLinkButton&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"plusInCircle",size:"xs",onClick:onCreateCustomLinkClick},_i18n.i18n.translate("xpack.apm.customLink.buttom.create.title",{defaultMessage:"Create"}))))))};exports.ManageCustomLink=ManageCustomLink},1255:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionMetadata=TransactionMetadata;var _react=_interopRequireWildcard(__webpack_require__(0));var _sections=__webpack_require__(3895);var _helper=__webpack_require__(437);var _=__webpack_require__(618);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function TransactionMetadata(_ref){var transaction=_ref.transaction;var sectionsWithRows=(0,_react.useMemo)((function(){return(0,_helper.getSectionsWithRows)(_sections.TRANSACTION_METADATA_SECTIONS,transaction)}),[transaction]);return _react.default.createElement(_.MetadataTable,{sections:sectionsWithRows})}},1256:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ResponsiveFlyout=void 0;var _eui=__webpack_require__(2);var _styledComponents=_interopRequireDefault(__webpack_require__(12));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ResponsiveFlyout=(0,_styledComponents.default)(_eui.EuiFlyout).withConfig({displayName:"ResponsiveFlyout",componentId:"sc-1gn3o9a-0"})(["width:100%;@media (min-width:800px){width:90%;}@media (min-width:1000px){width:80%;}@media (min-width:1400px){width:70%;}@media (min-width:2000px){width:60%;}"]);exports.ResponsiveFlyout=ResponsiveFlyout},1257:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StickyProperties=StickyProperties;var _eui=__webpack_require__(2);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _variables=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var TooltipFieldName=_styledComponents.default.span.withConfig({displayName:"TooltipFieldName",componentId:"sc-1156jpp-0"})(["font-family:",";"],_variables.fontFamilyCode);var PropertyLabel=_styledComponents.default.div.withConfig({displayName:"PropertyLabel",componentId:"sc-1156jpp-1"})(["margin-bottom:",";font-size:",";color:",";span{cursor:help;}"],(0,_variables.px)(_variables.units.half),_variables.fontSizes.small,_eui_theme_light.default.euiColorMediumShade);PropertyLabel.displayName="PropertyLabel";var propertyValueLineHeight=1.2;var PropertyValue=_styledComponents.default.div.withConfig({displayName:"PropertyValue",componentId:"sc-1156jpp-2"})(["display:inline-block;line-height:",";"],propertyValueLineHeight);PropertyValue.displayName="PropertyValue";var PropertyValueTruncated=_styledComponents.default.span.withConfig({displayName:"PropertyValueTruncated",componentId:"sc-1156jpp-3"})(["display:inline-block;line-height:",";",";"],propertyValueLineHeight,(0,_variables.truncate)("100%"));function getPropertyLabel(_ref){var fieldName=_ref.fieldName,label=_ref.label;if(fieldName){return _react.default.createElement(PropertyLabel,null,_react.default.createElement(_eui.EuiToolTip,{content:_react.default.createElement(TooltipFieldName,null,fieldName)},_react.default.createElement("span",null,label)))}return _react.default.createElement(PropertyLabel,null,label)}function getPropertyValue(_ref2){var val=_ref2.val,fieldName=_ref2.fieldName,_ref2$truncated=_ref2.truncated,truncated=_ref2$truncated===void 0?false:_ref2$truncated;if(truncated){return _react.default.createElement(_eui.EuiToolTip,{content:String(val)},_react.default.createElement(PropertyValueTruncated,null,String(val)))}return _react.default.createElement(PropertyValue,null,val)}function StickyProperties(_ref3){var stickyProperties=_ref3.stickyProperties;var itemStyles={padding:"1em 1em 1em 0"};var groupStyles={marginTop:"-1em",marginBottom:"-1em"};return _react.default.createElement(_eui.EuiFlexGroup,{wrap:true,gutterSize:"none",style:groupStyles},stickyProperties&&stickyProperties.map((function(_ref4,i){var _ref4$width=_ref4.width,width=_ref4$width===void 0?0:_ref4$width,prop=_objectWithoutProperties(_ref4,["width"]);return _react.default.createElement(_eui.EuiFlexItem,{key:i,style:_objectSpread({minWidth:width},itemStyles),grow:false},getPropertyLabel(prop),getPropertyValue(prop))})))}},1258:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SyncBadge=SyncBadge;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _variables=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SpanBadge=(0,_styledComponents.default)(_eui.EuiBadge).withConfig({displayName:"SpanBadge",componentId:"sc-1r6psyi-0"})(["display:inline-block;margin-right:",";"],(0,_variables.px)(_variables.units.quarter));function SyncBadge(_ref){var sync=_ref.sync;switch(sync){case true:return _react.default.createElement(SpanBadge,null,_i18n.i18n.translate("xpack.apm.transactionDetails.syncBadgeBlocking",{defaultMessage:"blocking"}));case false:return _react.default.createElement(SpanBadge,null,_i18n.i18n.translate("xpack.apm.transactionDetails.syncBadgeAsync",{defaultMessage:"async"}));default:return null}}},1259:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Settings=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(2);var _HomeLink=__webpack_require__(3935);var _useLocation2=__webpack_require__(132);var _APMLink=__webpack_require__(83);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Settings=function Settings(props){var _useLocation=(0,_useLocation2.useLocation)(),search=_useLocation.search,pathname=_useLocation.pathname;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_HomeLink.HomeLink,null,_react.default.createElement(_eui.EuiButtonEmpty,{size:"s",color:"primary",iconType:"arrowLeft"},_i18n.i18n.translate("xpack.apm.settings.returnToOverviewLinkLabel",{defaultMessage:"Return to overview"}))),_react.default.createElement(_eui.EuiPage,null,_react.default.createElement(_eui.EuiPageSideBar,null,_react.default.createElement(_eui.EuiSideNav,{items:[{name:_i18n.i18n.translate("xpack.apm.settings.pageTitle",{defaultMessage:"Settings"}),id:0,items:[{name:_i18n.i18n.translate("xpack.apm.settings.agentConfig",{defaultMessage:"Agent Configuration"}),id:"1",href:(0,_APMLink.getAPMHref)("/settings/agent-configuration",search),isSelected:pathname.startsWith("/settings/agent-configuration")},{name:_i18n.i18n.translate("xpack.apm.settings.indices",{defaultMessage:"Indices"}),id:"2",href:(0,_APMLink.getAPMHref)("/settings/apm-indices",search),isSelected:pathname==="/settings/apm-indices"},{name:_i18n.i18n.translate("xpack.apm.settings.customizeApp",{defaultMessage:"Customize app"}),id:"3",href:(0,_APMLink.getAPMHref)("/settings/customize-ui",search),isSelected:pathname==="/settings/customize-ui"}]}]})),_react.default.createElement(_eui.EuiPageBody,null,props.children)))};exports.Settings=Settings},1260:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.editAgentConfigurationHref=editAgentConfigurationHref;exports.createAgentConfigurationHref=createAgentConfigurationHref;var _APMLink=__webpack_require__(83);var _history=__webpack_require__(82);function editAgentConfigurationHref(configService){var search=_history.history.location.search;return(0,_APMLink.getAPMHref)("/settings/agent-configuration/edit",search,{name:configService.name,environment:configService.environment})}function createAgentConfigurationHref(){var search=_history.history.location.search;return(0,_APMLink.getAPMHref)("/settings/agent-configuration/create",search)}},1261:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CreateCustomLinkButton=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CreateCustomLinkButton=function CreateCustomLinkButton(_ref){var onClick=_ref.onClick;return _react.default.createElement(_eui.EuiButton,{color:"primary",fill:true,onClick:onClick},_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.createCustomLink",{defaultMessage:"Create custom link"}))};exports.CreateCustomLinkButton=CreateCustomLinkButton},1262:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SelectWithPlaceholder=exports.NO_SELECTION=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _lodash=__webpack_require__(3);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var NO_SELECTION="__NO_SELECTION__";exports.NO_SELECTION=NO_SELECTION;var DEFAULT_PLACEHOLDER=_i18n.i18n.translate("xpack.apm.selectPlaceholder",{defaultMessage:"Select option:"});var SelectWithPlaceholder=function SelectWithPlaceholder(props){var placeholder=props.placeholder||DEFAULT_PLACEHOLDER;return _react.default.createElement(_eui.EuiSelect,_extends({},props,{options:[{text:placeholder,value:NO_SELECTION}].concat(_toConsumableArray(props.options||[])),value:(0,_lodash.isEmpty)(props.value)?NO_SELECTION:props.value,onChange:function onChange(e){if(props.onChange){var customEvent=Object.assign(e,{target:Object.assign(e.target,{value:e.target.value===NO_SELECTION?"":e.target.value})});props.onChange(customEvent)}}}))};exports.SelectWithPlaceholder=SelectWithPlaceholder},1263:function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}Object.defineProperty(exports,"__esModule",{value:true});exports.filterByAgent=filterByAgent;exports.isValid=isValid;exports.settingDefinitions=void 0;var t=_interopRequireWildcard(__webpack_require__(110));var _lodash=__webpack_require__(3);var _Either=__webpack_require__(135);var _i18n=__webpack_require__(1);var _boolean_rt=__webpack_require__(3952);var _integer_rt=__webpack_require__(1264);var _agent_name=__webpack_require__(345);var _number_float_rt=__webpack_require__(3953);var _bytes_rt=__webpack_require__(3954);var _duration_rt=__webpack_require__(1265);var _general_settings=__webpack_require__(3955);var _java_settings=__webpack_require__(3957);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function getDefaultsByType(settingDefinition){switch(settingDefinition.type){case"boolean":return{validation:_boolean_rt.booleanRt};case"text":return{validation:t.string};case"integer":return{validation:_integer_rt.integerRt,validationError:_i18n.i18n.translate("xpack.apm.agentConfig.integer.errorText",{defaultMessage:"Must be an integer"})};case"float":return{validation:_number_float_rt.numberFloatRt,validationError:_i18n.i18n.translate("xpack.apm.agentConfig.float.errorText",{defaultMessage:"Must be a number between 0.000 and 1"})};case"bytes":return{validation:_bytes_rt.bytesRt,units:_bytes_rt.BYTE_UNITS,validationError:_i18n.i18n.translate("xpack.apm.agentConfig.bytes.errorText",{defaultMessage:"Please specify an integer and a unit"})};case"duration":return{validation:_duration_rt.durationRt,units:_duration_rt.DURATION_UNITS,validationError:_i18n.i18n.translate("xpack.apm.agentConfig.bytes.errorText",{defaultMessage:"Please specify an integer and a unit"})}}}function filterByAgent(agentName){return function(setting){if(!agentName){if(setting.includeAgents){return false}if(setting.excludeAgents){return setting.excludeAgents.every(_agent_name.isRumAgentName)}return true}if(setting.includeAgents){return setting.includeAgents.includes(agentName)}if(setting.excludeAgents){return!setting.excludeAgents.includes(agentName)}return true}}function isValid(setting,value){return(0,_Either.isRight)(setting.validation.decode(value))}var settingDefinitions=(0,_lodash.sortBy)([].concat(_toConsumableArray(_general_settings.generalSettings),_toConsumableArray(_java_settings.javaSettings)).map((function(def){var defWithDefaults=_objectSpread({},getDefaultsByType(def),{},def);if(!defWithDefaults.validation){throw new Error("Missing validation for ".concat(def.key))}return defWithDefaults})),"key");exports.settingDefinitions=settingDefinitions},1264:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getIntegerRt=getIntegerRt;exports.integerRt=void 0;var t=_interopRequireWildcard(__webpack_require__(110));var _Either=__webpack_require__(135);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function getIntegerRt(_ref){var min=_ref.min,max=_ref.max;return new t.Type("integerRt",t.string.is,(function(input,context){return _Either.either.chain(t.string.validate(input,context),(function(inputAsString){var inputAsInt=parseInt(inputAsString,10);var isValid=inputAsInt>=min&&inputAsInt<=max;return isValid?t.success(inputAsString):t.failure(input,context,"Number must be a valid number between ".concat(min," and ").concat(max))}))}),t.identity)}var integerRt=getIntegerRt({min:-Infinity,max:Infinity});exports.integerRt=integerRt},1265:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDurationRt=getDurationRt;exports.durationRt=exports.DURATION_UNITS=void 0;var t=_interopRequireWildcard(__webpack_require__(110));var _Either=__webpack_require__(135);var _amount_and_unit=__webpack_require__(631);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var DURATION_UNITS=["ms","s","m"];exports.DURATION_UNITS=DURATION_UNITS;function getDurationRt(_ref){var min=_ref.min;return new t.Type("durationRt",t.string.is,(function(input,context){return _Either.either.chain(t.string.validate(input,context),(function(inputAsString){var _ref2=(0,_amount_and_unit.amountAndUnitToObject)(inputAsString),amount=_ref2.amount,unit=_ref2.unit;var amountAsInt=parseInt(amount,10);var isValidUnit=DURATION_UNITS.includes(unit);var isValid=amountAsInt>=min&&isValidUnit;return isValid?t.success(inputAsString):t.failure(input,context,"Must have numeric amount and a valid unit (".concat(DURATION_UNITS,")"))}))}),t.identity)}var durationRt=getDurationRt({min:1});exports.durationRt=durationRt},1266:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceAlertTrigger=ServiceAlertTrigger;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _useUrlParams2=__webpack_require__(35);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ServiceAlertTrigger(props){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var fields=props.fields,setAlertParams=props.setAlertParams,setAlertProperty=props.setAlertProperty,alertTypeName=props.alertTypeName,defaults=props.defaults;var params=_objectSpread({},defaults,{serviceName:urlParams.serviceName});(0,_react.useEffect)((function(){setAlertProperty("name","".concat(alertTypeName," | ").concat(params.serviceName));setAlertProperty("tags",["apm","service.name:".concat(params.serviceName).toLowerCase()]);Object.keys(params).forEach((function(key){setAlertParams(key,params[key])}))}),[]);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_eui.EuiFlexGrid,{gutterSize:"l",direction:"row",columns:2},fields.map((function(field,index){return _react.default.createElement(_eui.EuiFlexItem,{grow:false,key:index},field)}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}))}},1267:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PopoverExpression=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var PopoverExpression=function PopoverExpression(props){var title=props.title,value=props.value,children=props.children;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),popoverOpen=_useState2[0],setPopoverOpen=_useState2[1];return _react.default.createElement(_eui.EuiPopover,{isOpen:popoverOpen,withTitle:true,anchorPosition:"downLeft",closePopover:function closePopover(){return setPopoverOpen(false)},button:_react.default.createElement(_eui.EuiExpression,{description:title,value:value,isActive:popoverOpen,onClick:function onClick(){return setPopoverOpen(true)}})},children)};exports.PopoverExpression=PopoverExpression},128:function(module,exports){module.exports=__kbnSharedDeps__.ReactDomServer},132:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useLocation=useLocation;var _react=__webpack_require__(0);var _LocationContext=__webpack_require__(1217);function useLocation(){return(0,_react.useContext)(_LocationContext.LocationContext)}},1415:function(module,exports,__webpack_require__){module.exports=__webpack_require__(41)(957)},1418:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.decodeOrThrow=exports.throwErrors=exports.createPlainError=void 0;var _Either=__webpack_require__(135);var _function=__webpack_require__(379);var _pipeable=__webpack_require__(265);var _PathReporter=__webpack_require__(367);var createPlainError=function createPlainError(message){return new Error(message)};exports.createPlainError=createPlainError;var throwErrors=function throwErrors(createError){return function(errors){throw createError((0,_PathReporter.failure)(errors).join("\n"))}};exports.throwErrors=throwErrors;var decodeOrThrow=function decodeOrThrow(runtimeType){var createError=arguments.length>1&&arguments[1]!==undefined?arguments[1]:createPlainError;return function(inputValue){return(0,_pipeable.pipe)(runtimeType.decode(inputValue),(0,_Either.fold)(throwErrors(createError),_function.identity))}};exports.decodeOrThrow=decodeOrThrow},142:function(module,exports){module.exports=__kbnSharedDeps__.ElasticsearchBrowser},1420:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.registerStartSingleton=registerStartSingleton;exports.npStart=void 0;var npStart;exports.npStart=npStart;function registerStartSingleton(start){exports.npStart=npStart=start}},1423:function(module,exports,__webpack_require__){module.exports=__webpack_require__(37)(1834)},1425:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SilentCanceledPromiseError=exports.CanceledPromiseError=exports.useTrackedPromise=void 0;var _react=__webpack_require__(0);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var useTrackedPromise=function useTrackedPromise(_ref,dependencies){var createPromise=_ref.createPromise,_ref$onResolve=_ref.onResolve,onResolve=_ref$onResolve===void 0?noOp:_ref$onResolve,_ref$onReject=_ref.onReject,onReject=_ref$onReject===void 0?noOp:_ref$onReject,_ref$cancelPreviousOn=_ref.cancelPreviousOn,cancelPreviousOn=_ref$cancelPreviousOn===void 0?"never":_ref$cancelPreviousOn;var pendingPromises=(0,_react.useRef)([]);var _useState=(0,_react.useState)({state:"uninitialized"}),_useState2=_slicedToArray(_useState,2),promiseState=_useState2[0],setPromiseState=_useState2[1];var execute=(0,_react.useMemo)((function(){return function(){var rejectCancellationPromise;var cancellationPromise=new Promise((function(_,reject){rejectCancellationPromise=reject}));var previousPendingPromises=pendingPromises.current;var cancelPreviousPendingPromises=function cancelPreviousPendingPromises(){previousPendingPromises.forEach((function(promise){return promise.cancel()}))};var newPromise=createPromise.apply(void 0,arguments);var newCancelablePromise=Promise.race([newPromise,cancellationPromise]);setPromiseState({state:"pending",promise:newCancelablePromise});if(cancelPreviousOn==="creation"){cancelPreviousPendingPromises()}var newPendingPromise={cancel:function cancel(){rejectCancellationPromise(new CanceledPromiseError)},cancelSilently:function cancelSilently(){rejectCancellationPromise(new SilentCanceledPromiseError)},promise:newCancelablePromise.then((function(value){setPromiseState((function(previousPromiseState){return previousPromiseState.state==="pending"&&previousPromiseState.promise===newCancelablePromise?{state:"resolved",promise:newPendingPromise.promise,value:value}:previousPromiseState}));if(["settlement","resolution"].includes(cancelPreviousOn)){cancelPreviousPendingPromises()}pendingPromises.current=pendingPromises.current.filter((function(pendingPromise){return pendingPromise.promise!==newPendingPromise.promise}));if(onResolve){onResolve(value)}return value}),(function(value){if(!(value instanceof SilentCanceledPromiseError)){setPromiseState((function(previousPromiseState){return previousPromiseState.state==="pending"&&previousPromiseState.promise===newCancelablePromise?{state:"rejected",promise:newCancelablePromise,value:value}:previousPromiseState}))}if(["settlement","rejection"].includes(cancelPreviousOn)){cancelPreviousPendingPromises()}pendingPromises.current=pendingPromises.current.filter((function(pendingPromise){return pendingPromise.promise!==newPendingPromise.promise}));if(onReject){onReject(value)}throw value}))};pendingPromises.current=[].concat(_toConsumableArray(pendingPromises.current),[newPendingPromise]);newPendingPromise.promise.catch(noOp);return newPendingPromise.promise}}),dependencies);(0,_react.useEffect)((function(){return function(){pendingPromises.current.forEach((function(promise){return promise.cancelSilently()}))}}),[]);return[promiseState,execute]};exports.useTrackedPromise=useTrackedPromise;var CanceledPromiseError=function(_Error){_inherits(CanceledPromiseError,_Error);function CanceledPromiseError(message){var _this;_classCallCheck(this,CanceledPromiseError);_this=_possibleConstructorReturn(this,_getPrototypeOf(CanceledPromiseError).call(this,message));_defineProperty(_assertThisInitialized(_this),"isCanceled",true);Object.setPrototypeOf(_assertThisInitialized(_this),(this instanceof CanceledPromiseError?this.constructor:void 0).prototype);return _this}return CanceledPromiseError}(_wrapNativeSuper(Error));exports.CanceledPromiseError=CanceledPromiseError;var SilentCanceledPromiseError=function(_CanceledPromiseError){_inherits(SilentCanceledPromiseError,_CanceledPromiseError);function SilentCanceledPromiseError(){_classCallCheck(this,SilentCanceledPromiseError);return _possibleConstructorReturn(this,_getPrototypeOf(SilentCanceledPromiseError).apply(this,arguments))}return SilentCanceledPromiseError}(CanceledPromiseError);exports.SilentCanceledPromiseError=SilentCanceledPromiseError;var noOp=function noOp(){return undefined}},1438:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.composeStateUpdaters=composeStateUpdaters;exports.asChildFunctionRenderer=void 0;var _lodash=__webpack_require__(3);var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var asChildFunctionRenderer=function asChildFunctionRenderer(hoc){var _temp;var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},onInitialize=_ref.onInitialize,onCleanup=_ref.onCleanup;return hoc((_temp=function(_React$Component){_inherits(ChildFunctionRenderer,_React$Component);function ChildFunctionRenderer(){var _getPrototypeOf2;var _this;_classCallCheck(this,ChildFunctionRenderer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ChildFunctionRenderer)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"displayName","ChildFunctionRenderer");_defineProperty(_assertThisInitialized(_this),"getRendererArgs",(function(){return(0,_lodash.omit)(_this.props,["children","initializeOnMount","resetOnUnmount"])}));return _this}_createClass(ChildFunctionRenderer,[{key:"componentDidMount",value:function componentDidMount(){if(this.props.initializeOnMount&&onInitialize){onInitialize(this.getRendererArgs())}}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.props.resetOnUnmount&&onCleanup){onCleanup(this.getRendererArgs())}}},{key:"render",value:function render(){return this.props.children(this.getRendererArgs())}}]);return ChildFunctionRenderer}(_react.default.Component),_temp))};exports.asChildFunctionRenderer=asChildFunctionRenderer;function composeStateUpdaters(){for(var _len3=arguments.length,updaters=new Array(_len3),_key3=0;_key3<_len3;_key3++){updaters[_key3]=arguments[_key3]}return function(state,props){return updaters.reduce((function(currentState,updater){return updater(currentState,props)||currentState}),state)}}},1439:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useHTTPRequest=useHTTPRequest;var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(1);var _use_tracked_promise=__webpack_require__(1425);var _public=__webpack_require__(14);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function useHTTPRequest(pathname,method,body){var decode=arguments.length>3&&arguments[3]!==undefined?arguments[3]:function(response){return response};var fetch=arguments.length>4?arguments[4]:undefined;var toastWarning=arguments.length>5?arguments[5]:undefined;return function(){var _kibana$services$http;var kibana=(0,_public.useKibana)();var fetchService=fetch?fetch:(_kibana$services$http=kibana.services.http)===null||_kibana$services$http===void 0?void 0:_kibana$services$http.fetch;var toast=toastWarning?toastWarning:kibana.notifications.toasts.warning;var _useState=(0,_react.useState)(null),_useState2=_slicedToArray(_useState,2),response=_useState2[0],setResponse=_useState2[1];var _useState3=(0,_react.useState)(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useTrackedPromise=(0,_use_tracked_promise.useTrackedPromise)({cancelPreviousOn:"resolution",createPromise:function createPromise(){if(!fetchService){throw new Error("HTTP service is unavailable")}return fetchService(pathname,{method:method,body:body})},onResolve:function onResolve(resp){return setResponse(decode(resp))},onReject:function onReject(e){var _err$response,_err$response2,_err$response3;var err=e;setError(err);toast({toastLifeTimeMs:3e3,title:_i18n.i18n.translate("xpack.infra.useHTTPRequest.error.title",{defaultMessage:"Error while fetching resource"}),body:_react.default.createElement("div",null,err.response?_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("h5",null,_i18n.i18n.translate("xpack.infra.useHTTPRequest.error.status",{defaultMessage:"Error"})),(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.statusText," (",(_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.status,")",_react.default.createElement("h5",null,_i18n.i18n.translate("xpack.infra.useHTTPRequest.error.url",{defaultMessage:"URL"})),(_err$response3=err.response)===null||_err$response3===void 0?void 0:_err$response3.url):_react.default.createElement("h5",null,err.message))})}},[pathname,body,method,fetch,toast]),_useTrackedPromise2=_slicedToArray(_useTrackedPromise,2),request=_useTrackedPromise2[0],makeRequest=_useTrackedPromise2[1];var loading=(0,_react.useMemo)((function(){if(request.state==="resolved"&&response===null){return true}return request.state==="pending"}),[request.state,response]);return{response:response,error:error,loading:loading,makeRequest:makeRequest}}()}},1440:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFormatter=exports.FORMATTERS=void 0;var _mustache=_interopRequireDefault(__webpack_require__(557));var _lib=__webpack_require__(473);var _bytes=__webpack_require__(3856);var _number=__webpack_require__(627);var _percent=__webpack_require__(3857);var _high_precision=__webpack_require__(3858);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FORMATTERS={number:_number.formatNumber,abbreviatedNumber:(0,_bytes.createBytesFormatter)(_lib.InfraWaffleMapDataFormat.abbreviatedNumber),bytes:(0,_bytes.createBytesFormatter)(_lib.InfraWaffleMapDataFormat.bytesDecimal),bits:(0,_bytes.createBytesFormatter)(_lib.InfraWaffleMapDataFormat.bitsDecimal),percent:_percent.formatPercent,highPercision:_high_precision.formatHighPercision};exports.FORMATTERS=FORMATTERS;var createFormatter=function createFormatter(format){var template=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"{{value}}";return function(val){if(val==null){return""}var fmtFn=FORMATTERS[format];var value=fmtFn(Number(val));return _mustache.default.render(template,{value:value})}};exports.createFormatter=createFormatter},1443:function(module,exports,__webpack_require__){module.exports=__webpack_require__(41)(1201)},15:function(module,exports){module.exports=__kbnSharedDeps__.Moment},159:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createCallApmApi=createCallApmApi;exports.callApmApi=void 0;var _callApi=__webpack_require__(286);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var callApmApi=function callApmApi(){throw new Error("callApmApi has to be initialized before used. Call createCallApmApi first.")};exports.callApmApi=callApmApi;function createCallApmApi(http){exports.callApmApi=callApmApi=function callApmApi(options){var pathname=options.pathname,_options$params=options.params,params=_options$params===void 0?{}:_options$params,opts=_objectWithoutProperties(options,["pathname","params"]);var path=params.path||{};var formattedPathname=Object.keys(path).reduce((function(acc,paramName){return acc.replace("{".concat(paramName,"}"),path[paramName])}),pathname);return(0,_callApi.callApi)(http,_objectSpread({},opts,{pathname:formattedPathname,body:params.body,query:params.query}))}}},160:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UNIDENTIFIED_SERVICE_NODES_LABEL=exports.NOT_AVAILABLE_LABEL=void 0;var _i18n=__webpack_require__(1);var NOT_AVAILABLE_LABEL=_i18n.i18n.translate("xpack.apm.notAvailableLabel",{defaultMessage:"N/A"});exports.NOT_AVAILABLE_LABEL=NOT_AVAILABLE_LABEL;var UNIDENTIFIED_SERVICE_NODES_LABEL=_i18n.i18n.translate("xpack.apm.serviceNodeNameMissing",{defaultMessage:"(Empty)"});exports.UNIDENTIFIED_SERVICE_NODES_LABEL=UNIDENTIFIED_SERVICE_NODES_LABEL},161:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.pickKeys=pickKeys;var _lodash=__webpack_require__(3);function pickKeys(obj){for(var _len=arguments.length,keys=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){keys[_key-1]=arguments[_key]}return(0,_lodash.pick)(obj,keys)}},1797:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.WithKueryAutocompletion=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _public=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var WithKueryAutocompletionComponent=function(_React$Component){_inherits(WithKueryAutocompletionComponent,_React$Component);function WithKueryAutocompletionComponent(){var _getPrototypeOf2;var _this;_classCallCheck(this,WithKueryAutocompletionComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(WithKueryAutocompletionComponent)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{currentRequest:null,suggestions:[]});_defineProperty(_assertThisInitialized(_this),"loadSuggestions",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(expression,cursorPosition,maxSuggestions){var indexPattern,language,hasQuerySuggestions,suggestions;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:indexPattern=_this.props.indexPattern;language="kuery";hasQuerySuggestions=_this.props.kibana.services.data.autocomplete.hasQuerySuggestions(language);if(hasQuerySuggestions){_context.next=5;break}return _context.abrupt("return");case 5:_this.setState({currentRequest:{expression:expression,cursorPosition:cursorPosition},suggestions:[]});_context.next=8;return _this.props.kibana.services.data.autocomplete.getQuerySuggestions({language:language,query:expression,selectionStart:cursorPosition,selectionEnd:cursorPosition,indexPatterns:[indexPattern],boolFilter:[]});case 8:_context.t0=_context.sent;if(_context.t0){_context.next=11;break}_context.t0=[];case 11:suggestions=_context.t0;_this.setState((function(state){return state.currentRequest&&state.currentRequest.expression!==expression&&state.currentRequest.cursorPosition!==cursorPosition?state:_objectSpread({},state,{currentRequest:null,suggestions:maxSuggestions?suggestions.slice(0,maxSuggestions):suggestions})}));case 13:case"end":return _context.stop()}}}),_callee)})));return function(_x,_x2,_x3){return _ref.apply(this,arguments)}}());return _this}_createClass(WithKueryAutocompletionComponent,[{key:"render",value:function render(){var _this$state=this.state,currentRequest=_this$state.currentRequest,suggestions=_this$state.suggestions;return this.props.children({isLoadingSuggestions:currentRequest!==null,loadSuggestions:this.loadSuggestions,suggestions:suggestions})}}]);return WithKueryAutocompletionComponent}(_react.default.Component);var WithKueryAutocompletion=(0,_public.withKibana)(WithKueryAutocompletionComponent);exports.WithKueryAutocompletion=WithKueryAutocompletion},1798:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _autocomplete_field=__webpack_require__(3851);Object.keys(_autocomplete_field).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _autocomplete_field[key]}})}))},18:function(module,exports){module.exports=__kbnSharedDeps__.Rxjs},1852:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricsExplorerKueryBar=void 0;var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _with_kuery_autocompletion=__webpack_require__(1797);var _autocomplete_field=__webpack_require__(1798);var _public=__webpack_require__(8);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function validateQuery(query){try{_public.esKuery.fromKueryExpression(query)}catch(err){return false}return true}var MetricsExplorerKueryBar=function MetricsExplorerKueryBar(_ref){var derivedIndexPattern=_ref.derivedIndexPattern,onSubmit=_ref.onSubmit,onChange=_ref.onChange,value=_ref.value,placeholder=_ref.placeholder;var _useState=(0,_react.useState)(value||""),_useState2=_slicedToArray(_useState,2),draftQuery=_useState2[0],setDraftQuery=_useState2[1];var _useState3=(0,_react.useState)(true),_useState4=_slicedToArray(_useState3,2),isValid=_useState4[0],setValidation=_useState4[1];(0,_react.useEffect)((function(){if(value){setDraftQuery(value)}}),[value]);var handleChange=function handleChange(query){setValidation(validateQuery(query));setDraftQuery(query);if(onChange){onChange(query)}};var filteredDerivedIndexPattern=_objectSpread({},derivedIndexPattern,{fields:derivedIndexPattern.fields});var defaultPlaceholder=_i18n.i18n.translate("xpack.infra.homePage.toolbar.kqlSearchFieldPlaceholder",{defaultMessage:"Search for infrastructure data… (e.g. host.name:host-1)"});return _react.default.createElement(_with_kuery_autocompletion.WithKueryAutocompletion,{indexPattern:filteredDerivedIndexPattern},(function(_ref2){var isLoadingSuggestions=_ref2.isLoadingSuggestions,loadSuggestions=_ref2.loadSuggestions,suggestions=_ref2.suggestions;return _react.default.createElement(_autocomplete_field.AutocompleteField,{"aria-label":placeholder,isLoadingSuggestions:isLoadingSuggestions,isValid:isValid,loadSuggestions:loadSuggestions,onChange:handleChange,onSubmit:onSubmit,placeholder:placeholder||defaultPlaceholder,suggestions:suggestions,value:draftQuery})}))};exports.MetricsExplorerKueryBar=MetricsExplorerKueryBar},1853:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricsExplorerGroupBy=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var MetricsExplorerGroupBy=function MetricsExplorerGroupBy(_ref){var options=_ref.options,onChange=_ref.onChange,fields=_ref.fields;var handleChange=(0,_react.useCallback)((function(selectedOptions){var groupBy=selectedOptions.length===1&&selectedOptions[0].label||null;onChange(groupBy)}),[onChange]);return _react.default.createElement(_eui.EuiComboBox,{placeholder:_i18n.i18n.translate("xpack.infra.metricsExplorer.groupByLabel",{defaultMessage:"Everything"}),"aria-label":_i18n.i18n.translate("xpack.infra.metricsExplorer.groupByAriaLabel",{defaultMessage:"Graph per"}),fullWidth:true,singleSelection:true,selectedOptions:options.groupBy&&[{label:options.groupBy}]||[],options:fields.filter((function(f){return f.aggregatable&&f.type==="string"})).map((function(f){return{label:f.name}})),onChange:handleChange,isClearable:true})};exports.MetricsExplorerGroupBy=MetricsExplorerGroupBy},191:function(module,exports,__webpack_require__){module.exports=__webpack_require__(32)(2177)},2:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},209:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LoadingStatePrompt=LoadingStatePrompt;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function LoadingStatePrompt(){return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceAround"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiLoadingSpinner,{size:"l","data-test-subj":"loading-spinner"})))}},21:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiLightTheme},23:function(module,exports){module.exports=__kbnSharedDeps__.Jquery},238:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ElasticDocsLink=ElasticDocsLink;var _eui=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _useApmPluginContext=__webpack_require__(62);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function ElasticDocsLink(_ref){var section=_ref.section,path=_ref.path,children=_ref.children,rest=_objectWithoutProperties(_ref,["section","path","children"]);var docLinks=(0,_useApmPluginContext.useApmPluginContext)().core.docLinks;var baseUrl=docLinks.ELASTIC_WEBSITE_URL;var version=docLinks.DOC_LINK_VERSION;var href="".concat(baseUrl,"guide/en").concat(section,"/").concat(version).concat(path);return typeof children==="function"?children(href):_react.default.createElement(_eui.EuiLink,_extends({href:href},rest),children)}},239:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UnoptimizedManagedTable=UnoptimizedManagedTable;exports.ManagedTable=void 0;var _eui=__webpack_require__(2);var _lodash=__webpack_require__(3);var _react=_interopRequireWildcard(__webpack_require__(0));var _useUrlParams2=__webpack_require__(35);var _history=__webpack_require__(82);var _url_helpers=__webpack_require__(71);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function UnoptimizedManagedTable(props){var _props$columns$;var items=props.items,columns=props.columns,_props$initialPageInd=props.initialPageIndex,initialPageIndex=_props$initialPageInd===void 0?0:_props$initialPageInd,_props$initialPageSiz=props.initialPageSize,initialPageSize=_props$initialPageSiz===void 0?10:_props$initialPageSiz,_props$initialSortFie=props.initialSortField,initialSortField=_props$initialSortFie===void 0?((_props$columns$=props.columns[0])===null||_props$columns$===void 0?void 0:_props$columns$.field)||"":_props$initialSortFie,_props$initialSortDir=props.initialSortDirection,initialSortDirection=_props$initialSortDir===void 0?"asc":_props$initialSortDir,_props$hidePerPageOpt=props.hidePerPageOptions,hidePerPageOptions=_props$hidePerPageOpt===void 0?true:_props$hidePerPageOpt,noItemsMessage=props.noItemsMessage,_props$sortItems=props.sortItems,sortItems=_props$sortItems===void 0?true:_props$sortItems;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),_useUrlParams$urlPara=_useUrlParams.urlParams,_useUrlParams$urlPara2=_useUrlParams$urlPara.page,page=_useUrlParams$urlPara2===void 0?initialPageIndex:_useUrlParams$urlPara2,_useUrlParams$urlPara3=_useUrlParams$urlPara.pageSize,pageSize=_useUrlParams$urlPara3===void 0?initialPageSize:_useUrlParams$urlPara3,_useUrlParams$urlPara4=_useUrlParams$urlPara.sortField,sortField=_useUrlParams$urlPara4===void 0?initialSortField:_useUrlParams$urlPara4,_useUrlParams$urlPara5=_useUrlParams$urlPara.sortDirection,sortDirection=_useUrlParams$urlPara5===void 0?initialSortDirection:_useUrlParams$urlPara5;var renderedItems=(0,_react.useMemo)((function(){var sortedItems=sortItems?(0,_lodash.sortByOrder)(items,sortField,sortDirection):items;return sortedItems.slice(page*pageSize,(page+1)*pageSize)}),[page,pageSize,sortField,sortDirection,items,sortItems]);var sort=(0,_react.useMemo)((function(){return{sort:{field:sortField,direction:sortDirection}}}),[sortField,sortDirection]);var onTableChange=(0,_react.useCallback)((function(options){_history.history.push(_objectSpread({},_history.history.location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(_history.history.location.search),{page:options.page.index,pageSize:options.page.size,sortField:options.sort.field,sortDirection:options.sort.direction}))}))}),[]);var pagination=(0,_react.useMemo)((function(){return{hidePerPageOptions:hidePerPageOptions,totalItemCount:items.length,pageIndex:page,pageSize:pageSize}}),[hidePerPageOptions,items,page,pageSize]);return _react.default.createElement(_eui.EuiBasicTable,{noItemsMessage:noItemsMessage,items:renderedItems,columns:columns,pagination:pagination,sorting:sort,onChange:onTableChange})}var ManagedTable=_react.default.memo(UnoptimizedManagedTable);exports.ManagedTable=ManagedTable},240:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PROJECTION=void 0;var PROJECTION;exports.PROJECTION=PROJECTION;(function(PROJECTION){PROJECTION["SERVICES"]="services";PROJECTION["TRANSACTION_GROUPS"]="transactionGroups";PROJECTION["TRACES"]="traces";PROJECTION["TRANSACTIONS"]="transactions";PROJECTION["METRICS"]="metrics";PROJECTION["ERROR_GROUPS"]="errorGroups";PROJECTION["SERVICE_NODES"]="serviceNodes"})(PROJECTION||(exports.PROJECTION=PROJECTION={}))},241:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LocalUIFilters=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _Filter=__webpack_require__(3786);var _useLocalUIFilters2=__webpack_require__(3789);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var ButtonWrapper=_styledComponents.default.div.withConfig({displayName:"ButtonWrapper",componentId:"sc-9ifnz7-0"})(["display:inline-block;"]);var LocalUIFilters=function LocalUIFilters(_ref){var projection=_ref.projection,params=_ref.params,filterNames=_ref.filterNames,children=_ref.children,_ref$showCount=_ref.showCount,showCount=_ref$showCount===void 0?true:_ref$showCount;var _useLocalUIFilters=(0,_useLocalUIFilters2.useLocalUIFilters)({filterNames:filterNames,projection:projection,params:params}),filters=_useLocalUIFilters.filters,setFilterValue=_useLocalUIFilters.setFilterValue,clearValues=_useLocalUIFilters.clearValues;var hasValues=filters.some((function(filter){return filter.value.length>0}));return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h3",null,_i18n.i18n.translate("xpack.apm.localFiltersTitle",{defaultMessage:"Filters"}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),children,filters.map((function(filter){return _react.default.createElement(_react.default.Fragment,{key:filter.name},_react.default.createElement(_Filter.Filter,_extends({},filter,{onChange:function onChange(value){setFilterValue(filter.name,value)},showCount:showCount})),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"none"}))})),hasValues?_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(ButtonWrapper,null,_react.default.createElement(_eui.EuiButtonEmpty,{size:"xs",iconType:"cross",flush:"left",onClick:clearValues},_i18n.i18n.translate("xpack.apm.clearFilters",{defaultMessage:"Clear filters"})))):null)};exports.LocalUIFilters=LocalUIFilters},286:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.clearCache=clearCache;exports.callApi=callApi;var _lodash=__webpack_require__(3);var _lruCache=_interopRequireDefault(__webpack_require__(1208));var _objectHash=_interopRequireDefault(__webpack_require__(4035));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function fetchOptionsWithDebug(fetchOptions){var debugEnabled=sessionStorage.getItem("apm_debug")==="true"&&(0,_lodash.startsWith)(fetchOptions.pathname,"/api/apm");var body=fetchOptions.body,rest=_objectWithoutProperties(fetchOptions,["body"]);return _objectSpread({},rest,{},body!==undefined?{body:JSON.stringify(body)}:{},{query:_objectSpread({},fetchOptions.query,{},debugEnabled?{_debug:true}:{})})}var cache=new _lruCache.default({max:100,maxAge:1e3*60*60});function clearCache(){cache.reset()}function callApi(_x,_x2){return _callApi.apply(this,arguments)}function _callApi(){_callApi=_asyncToGenerator(regeneratorRuntime.mark((function _callee(http,fetchOptions){var cacheKey,cacheResponse,_fetchOptionsWithDebu,pathname,_fetchOptionsWithDebu2,method,options,lowercaseMethod,res;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:cacheKey=getCacheKey(fetchOptions);cacheResponse=cache.get(cacheKey);if(!cacheResponse){_context.next=4;break}return _context.abrupt("return",cacheResponse);case 4:_fetchOptionsWithDebu=fetchOptionsWithDebug(fetchOptions),pathname=_fetchOptionsWithDebu.pathname,_fetchOptionsWithDebu2=_fetchOptionsWithDebu.method,method=_fetchOptionsWithDebu2===void 0?"get":_fetchOptionsWithDebu2,options=_objectWithoutProperties(_fetchOptionsWithDebu,["pathname","method"]);lowercaseMethod=method.toLowerCase();_context.next=8;return http[lowercaseMethod](pathname,options);case 8:res=_context.sent;if(isCachable(fetchOptions)){cache.set(cacheKey,res)}return _context.abrupt("return",res);case 11:case"end":return _context.stop()}}}),_callee)})));return _callApi.apply(this,arguments)}function isCachable(fetchOptions){if(fetchOptions.isCachable!==undefined){return fetchOptions.isCachable}if(!(fetchOptions.query&&fetchOptions.query.start&&fetchOptions.query.end)){return false}return(0,_lodash.isString)(fetchOptions.query.end)&&new Date(fetchOptions.query.end).getTime()<Date.now()}function getCacheKey(options){return(0,_objectHash.default)(options)}},287:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimestampTooltip=TimestampTooltip;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _momentTimezone=_interopRequireDefault(__webpack_require__(39));var _formatters=__webpack_require__(72);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TimestampTooltip(_ref){var time=_ref.time,_ref$timeUnit=_ref.timeUnit,timeUnit=_ref$timeUnit===void 0?"milliseconds":_ref$timeUnit;var momentTime=(0,_momentTimezone.default)(time);var relativeTimeLabel=momentTime.fromNow();var absoluteTimeLabel=(0,_formatters.asAbsoluteDateTime)(time,timeUnit);return _react.default.createElement(_eui.EuiToolTip,{content:absoluteTimeLabel},_react.default.createElement(_react.default.Fragment,null,relativeTimeLabel))}},288:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionDetailLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(83);var _useUrlParams2=__webpack_require__(35);var _pickKeys=__webpack_require__(161);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var TransactionDetailLink=function TransactionDetailLink(_ref){var serviceName=_ref.serviceName,traceId=_ref.traceId,transactionId=_ref.transactionId,transactionName=_ref.transactionName,transactionType=_ref.transactionType,rest=_objectWithoutProperties(_ref,["serviceName","traceId","transactionId","transactionName","transactionType"]);var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var persistedFilters=(0,_pickKeys.pickKeys)(urlParams,"transactionResult","serviceVersion");return _react.default.createElement(_APMLink.APMLink,_extends({path:"/services/".concat(serviceName,"/transactions/view"),query:_objectSpread({traceId:traceId,transactionId:transactionId,transactionName:transactionName,transactionType:transactionType},persistedFilters)},rest))};exports.TransactionDetailLink=TransactionDetailLink},31:function(module,exports){module.exports=__kbnSharedDeps__.RxjsOperators},32:function(module,exports){module.exports=vendors_3},329:function(module,exports,__webpack_require__){module.exports=__webpack_require__(32)(110)},33:function(module,exports){module.exports=__kbnSharedDeps__.ReactRouterDom},340:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ApmPluginContext=void 0;var _react=__webpack_require__(0);var ApmPluginContext=(0,_react.createContext)({});exports.ApmPluginContext=ApmPluginContext},341:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ApmHeader=void 0;var _eui=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _KueryBar=__webpack_require__(3740);var _DatePicker=__webpack_require__(3749);var _EnvironmentFilter=__webpack_require__(3750);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ApmHeader=function ApmHeader(_ref){var children=_ref.children;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,children),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_DatePicker.DatePicker,null))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:3},_react.default.createElement(_KueryBar.KueryBar,null)),_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_EnvironmentFilter.EnvironmentFilter,null))))};exports.ApmHeader=ApmHeader},342:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useUiFilters=useUiFilters;exports.UrlParamsProvider=exports.UrlParamsContext=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _reactRouterDom=__webpack_require__(33);var _lodash=__webpack_require__(3);var _helpers=__webpack_require__(614);var _resolveUrlParams=__webpack_require__(1218);var _config=__webpack_require__(616);var _pickKeys=__webpack_require__(161);var _useDeepObjectIdentity=__webpack_require__(3747);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function useUiFilters(params){var kuery=params.kuery,environment=params.environment,urlParams=_objectWithoutProperties(params,["kuery","environment"]);var localUiFilters=(0,_lodash.mapValues)(_pickKeys.pickKeys.apply(void 0,[urlParams].concat(_toConsumableArray(_config.localUIFilterNames))),(function(val){return val?val.split(","):[]}));return(0,_useDeepObjectIdentity.useDeepObjectIdentity)(_objectSpread({kuery:kuery,environment:environment},localUiFilters))}var defaultRefresh=function defaultRefresh(time){};var UrlParamsContext=(0,_react.createContext)({urlParams:{},refreshTimeRange:defaultRefresh,uiFilters:{}});exports.UrlParamsContext=UrlParamsContext;var UrlParamsProvider=(0,_reactRouterDom.withRouter)((function(_ref){var location=_ref.location,children=_ref.children;var refUrlParams=(0,_react.useRef)((0,_resolveUrlParams.resolveUrlParams)(location,{}));var _refUrlParams$current=refUrlParams.current,start=_refUrlParams$current.start,end=_refUrlParams$current.end,rangeFrom=_refUrlParams$current.rangeFrom,rangeTo=_refUrlParams$current.rangeTo;var _useState=(0,_react.useState)(""),_useState2=_slicedToArray(_useState,2),forceUpdate=_useState2[1];var urlParams=(0,_react.useMemo)((function(){return(0,_resolveUrlParams.resolveUrlParams)(location,{start:start,end:end,rangeFrom:rangeFrom,rangeTo:rangeTo})}),[location,start,end,rangeFrom,rangeTo]);refUrlParams.current=urlParams;var refreshTimeRange=(0,_react.useCallback)((function(timeRange){refUrlParams.current=_objectSpread({},refUrlParams.current,{start:(0,_helpers.getParsedDate)(timeRange.rangeFrom),end:(0,_helpers.getParsedDate)(timeRange.rangeTo,{roundUp:true})});forceUpdate((0,_lodash.uniqueId)())}),[forceUpdate]);var uiFilters=useUiFilters(urlParams);var contextValue=(0,_react.useMemo)((function(){return{urlParams:urlParams,refreshTimeRange:refreshTimeRange,uiFilters:uiFilters}}),[urlParams,refreshTimeRange,uiFilters]);return _react.default.createElement(UrlParamsContext.Provider,{children:children,value:contextValue})}));exports.UrlParamsProvider=UrlParamsProvider},343:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmptyMessage=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EmptyMessage=function EmptyMessage(_ref){var _ref$heading=_ref.heading,heading=_ref$heading===void 0?_i18n.i18n.translate("xpack.apm.emptyMessage.noDataFoundLabel",{defaultMessage:"No data found."}):_ref$heading,_ref$subheading=_ref.subheading,subheading=_ref$subheading===void 0?_i18n.i18n.translate("xpack.apm.emptyMessage.noDataFoundDescription",{defaultMessage:"Try another time range or reset the search filter."}):_ref$subheading,_ref$hideSubheading=_ref.hideSubheading,hideSubheading=_ref$hideSubheading===void 0?false:_ref$hideSubheading;return _react.default.createElement(_eui.EuiEmptyPrompt,{titleSize:"s",title:_react.default.createElement("div",null,heading),body:!hideSubheading&&subheading})};exports.EmptyMessage=EmptyMessage},344:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Legend=exports.Indicator=exports.Shape=void 0;var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _variables=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var Shape;exports.Shape=Shape;(function(Shape){Shape["circle"]="circle";Shape["square"]="square"})(Shape||(exports.Shape=Shape={}));var Container=_styledComponents.default.div.withConfig({displayName:"Container",componentId:"ay18rd-0"})(["display:flex;align-items:center;font-size:",";color:",";cursor:",";opacity:",";user-select:none;"],(function(props){return props.fontSize}),_eui_theme_light.default.euiColorDarkShade,(function(props){return props.clickable?"pointer":"initial"}),(function(props){return props.disabled?.4:1}));var Indicator=_styledComponents.default.span.withConfig({displayName:"Indicator",componentId:"ay18rd-1"})(["width:",";height:",";margin-right:",";background:",";border-radius:",";"],(function(props){return(0,_variables.px)(props.radius)}),(function(props){return(0,_variables.px)(props.radius)}),(function(props){return props.withMargin?(0,_variables.px)(props.radius/2):0}),(function(props){return props.color}),(function(props){return props.shape===Shape.circle?"100%":"0"}));exports.Indicator=Indicator;var Legend=function Legend(_ref){var onClick=_ref.onClick,text=_ref.text,_ref$color=_ref.color,color=_ref$color===void 0?_eui_theme_light.default.euiColorVis1:_ref$color,_ref$fontSize=_ref.fontSize,fontSize=_ref$fontSize===void 0?_variables.fontSizes.small:_ref$fontSize,_ref$radius=_ref.radius,radius=_ref$radius===void 0?_variables.units.minus-1:_ref$radius,_ref$disabled=_ref.disabled,disabled=_ref$disabled===void 0?false:_ref$disabled,_ref$clickable=_ref.clickable,clickable=_ref$clickable===void 0?false:_ref$clickable,_ref$shape=_ref.shape,shape=_ref$shape===void 0?Shape.circle:_ref$shape,indicator=_ref.indicator,rest=_objectWithoutProperties(_ref,["onClick","text","color","fontSize","radius","disabled","clickable","shape","indicator"]);return _react.default.createElement(Container,_extends({onClick:onClick,disabled:disabled,clickable:clickable||Boolean(onClick),fontSize:fontSize},rest),indicator?indicator():_react.default.createElement(Indicator,{color:color,radius:radius,shape:shape,withMargin:!!text}),text)};exports.Legend=Legend},345:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isAgentName=isAgentName;exports.isRumAgentName=isRumAgentName;exports.isJavaAgentName=isJavaAgentName;exports.AGENT_NAMES=void 0;var AGENT_NAMES=["java","js-base","rum-js","dotnet","go","java","nodejs","python","ruby"];exports.AGENT_NAMES=AGENT_NAMES;function isAgentName(agentName){return AGENT_NAMES.includes(agentName)}function isRumAgentName(agentName){return agentName==="js-base"||agentName==="rum-js"}function isJavaAgentName(agentName){return agentName==="java"}},346:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPlotValues=getPlotValues;exports.SharedPlot=SharedPlot;var _lodash=__webpack_require__(3);var _d3Scale=__webpack_require__(329);var _reactVis=__webpack_require__(191);var _d2=_interopRequireDefault(__webpack_require__(45));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _react=_interopRequireDefault(__webpack_require__(0));var _variables=__webpack_require__(26);var _timezone=__webpack_require__(1231);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var XY_HEIGHT=_variables.unit*16;var XY_MARGIN={top:_variables.unit,left:_variables.unit*5,right:0,bottom:_variables.unit*2};var getXScale=function getXScale(xMin,xMax,width){return(0,_d3Scale.scaleLinear)().domain([xMin,xMax]).range([XY_MARGIN.left,width-XY_MARGIN.right])};var getYScale=function getYScale(yMin,yMax){return(0,_d3Scale.scaleLinear)().domain([yMin,yMax]).range([XY_HEIGHT,0]).nice()};function getFlattenedCoordinates(visibleSeries,enabledSeries){var enabledCoordinates=(0,_lodash.flatten)(enabledSeries.map((function(serie){return serie.data})));if(!(0,_lodash.isEmpty)(enabledCoordinates)){return enabledCoordinates}return(0,_lodash.flatten)(visibleSeries.map((function(serie){return serie.data})))}function getPlotValues(visibleSeries,enabledSeries,_ref){var width=_ref.width,_ref$yMin=_ref.yMin,yMin=_ref$yMin===void 0?0:_ref$yMin,_ref$yMax=_ref.yMax,yMax=_ref$yMax===void 0?"max":_ref$yMax,height=_ref.height,stackBy=_ref.stackBy;var flattenedCoordinates=getFlattenedCoordinates(visibleSeries,enabledSeries);var xMin=_d2.default.min(flattenedCoordinates,(function(d){return d.x}));var xMax=_d2.default.max(flattenedCoordinates,(function(d){return d.x}));if(yMax==="max"){yMax=_d2.default.max(flattenedCoordinates,(function(d){var _d$y;return(_d$y=d.y)!==null&&_d$y!==void 0?_d$y:0}))}if(yMin==="min"){yMin=_d2.default.min(flattenedCoordinates,(function(d){var _d$y2;return(_d$y2=d.y)!==null&&_d$y2!==void 0?_d$y2:0}))}var _getDomainTZ=(0,_timezone.getDomainTZ)(xMin,xMax),_getDomainTZ2=_slicedToArray(_getDomainTZ,2),xMinZone=_getDomainTZ2[0],xMaxZone=_getDomainTZ2[1];var xScale=getXScale(xMin,xMax,width);var yScale=getYScale(yMin,yMax);var yMaxNice=yScale.domain()[1];var yTickValues=[0,yMaxNice/2,yMaxNice];var xTickTotal=Math.floor(width/100);var xTickValues=(0,_timezone.getTimeTicksTZ)({domain:[xMinZone,xMaxZone],totalTicks:xTickTotal,width:width});return{x:xScale,y:yScale,xTickValues:xTickValues,yTickValues:yTickValues,XY_MARGIN:XY_MARGIN,XY_HEIGHT:height||XY_HEIGHT,XY_WIDTH:width,stackBy:stackBy}}function SharedPlot(_ref2){var plotValues=_ref2.plotValues,props=_objectWithoutProperties(_ref2,["plotValues"]);var height=plotValues.XY_HEIGHT,margin=plotValues.XY_MARGIN,width=plotValues.XY_WIDTH;return _react.default.createElement("div",{style:{position:"absolute",top:0,left:0,pointerEvents:"none"}},_react.default.createElement(_reactVis.XYPlot,_extends({dontCheckIfEmpty:true,height:height,margin:margin,xType:"time-utc",width:width,xDomain:plotValues.x.domain(),yDomain:plotValues.y.domain(),stackBy:plotValues.stackBy},props)))}SharedPlot.propTypes={plotValues:_propTypes.default.shape({x:_propTypes.default.func.isRequired,y:_propTypes.default.func.isRequired,XY_WIDTH:_propTypes.default.number.isRequired,height:_propTypes.default.number}).isRequired}},347:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isValidCoordinateValue=void 0;var isValidCoordinateValue=function isValidCoordinateValue(value){return value!==null&&value!==undefined};exports.isValidCoordinateValue=isValidCoordinateValue},348:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ChartsSyncContextProvider=exports.ChartsSyncContext=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _url_helpers=__webpack_require__(71);var _history=__webpack_require__(82);var _useUrlParams2=__webpack_require__(35);var _useFetcher2=__webpack_require__(36);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var ChartsSyncContext=_react.default.createContext(null);exports.ChartsSyncContext=ChartsSyncContext;var ChartsSyncContextProvider=function ChartsSyncContextProvider(_ref){var children=_ref.children;var _useState=(0,_react.useState)(null),_useState2=_slicedToArray(_useState,2),time=_useState2[0],setTime=_useState2[1];var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;var start=urlParams.start,end=urlParams.end,serviceName=urlParams.serviceName;var environment=uiFilters.environment;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(start&&end&&serviceName){return callApmApi({pathname:"/api/apm/services/{serviceName}/annotations",params:{path:{serviceName:serviceName},query:{start:start,end:end,environment:environment}}})}}),[start,end,environment,serviceName]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?{annotations:[]}:_useFetcher$data;var value=(0,_react.useMemo)((function(){var hoverXHandlers={onHover:function onHover(hoverX){setTime(hoverX)},onMouseLeave:function onMouseLeave(){setTime(null)},onSelectionEnd:function onSelectionEnd(range){setTime(null);var currentSearch=(0,_url_helpers.toQuery)(_history.history.location.search);var nextSearch={rangeFrom:new Date(range.start).toISOString(),rangeTo:new Date(range.end).toISOString()};_history.history.push(_objectSpread({},_history.history.location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},currentSearch,{},nextSearch))}))},hoverX:time,annotations:data.annotations};return _objectSpread({},hoverXHandlers)}),[time,data.annotations]);return _react.default.createElement(ChartsSyncContext.Provider,{value:value,children:children})};exports.ChartsSyncContextProvider=ChartsSyncContextProvider},35:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useUrlParams=useUrlParams;var _react=__webpack_require__(0);var _UrlParamsContext=__webpack_require__(342);function useUrlParams(){return(0,_react.useContext)(_UrlParamsContext.UrlParamsContext)}},350:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getOptionLabel=getOptionLabel;exports.omitAllOption=omitAllOption;exports.ALL_OPTION_VALUE=void 0;var _i18n=__webpack_require__(1);var ALL_OPTION_VALUE="ALL_OPTION_VALUE";exports.ALL_OPTION_VALUE=ALL_OPTION_VALUE;function getOptionLabel(value){if(value===undefined||value===ALL_OPTION_VALUE){return _i18n.i18n.translate("xpack.apm.agentConfig.allOptionLabel",{defaultMessage:"All"})}return value}function omitAllOption(value){return value===ALL_OPTION_VALUE?undefined:value}},36:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useFetcher=useFetcher;exports.FETCH_STATUS=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(1);var _public=__webpack_require__(14);var _LoadingIndicatorContext=__webpack_require__(610);var _createCallApmApi=__webpack_require__(159);var _useApmPluginContext=__webpack_require__(62);var _useLoadingIndicator2=__webpack_require__(3736);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var FETCH_STATUS;exports.FETCH_STATUS=FETCH_STATUS;(function(FETCH_STATUS){FETCH_STATUS["LOADING"]="loading";FETCH_STATUS["SUCCESS"]="success";FETCH_STATUS["FAILURE"]="failure";FETCH_STATUS["PENDING"]="pending"})(FETCH_STATUS||(exports.FETCH_STATUS=FETCH_STATUS={}));function useFetcher(fn,fnDeps){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var notifications=(0,_useApmPluginContext.useApmPluginContext)().core.notifications;var _options$preservePrev=options.preservePreviousData,preservePreviousData=_options$preservePrev===void 0?true:_options$preservePrev;var _useLoadingIndicator=(0,_useLoadingIndicator2.useLoadingIndicator)(),setIsLoading=_useLoadingIndicator.setIsLoading;var _useContext=(0,_react.useContext)(_LoadingIndicatorContext.LoadingIndicatorContext),dispatchStatus=_useContext.dispatchStatus;var _useState=(0,_react.useState)({data:undefined,status:FETCH_STATUS.PENDING}),_useState2=_slicedToArray(_useState,2),result=_useState2[0],setResult=_useState2[1];var _useState3=(0,_react.useState)(0),_useState4=_slicedToArray(_useState3,2),counter=_useState4[0],setCounter=_useState4[1];(0,_react.useEffect)((function(){var didCancel=false;function doFetch(){return _doFetch.apply(this,arguments)}function _doFetch(){_doFetch=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var promise,data,err,_err$response,_err$response2,_err$response3,errorDetails;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:promise=fn(_createCallApmApi.callApmApi);if(promise){_context.next=3;break}return _context.abrupt("return");case 3:setIsLoading(true);setResult((function(prevResult){return{data:preservePreviousData?prevResult.data:undefined,status:FETCH_STATUS.LOADING,error:undefined}}));_context.prev=5;_context.next=8;return promise;case 8:data=_context.sent;if(!didCancel){setIsLoading(false);setResult({data:data,status:FETCH_STATUS.SUCCESS,error:undefined})}_context.next=16;break;case 12:_context.prev=12;_context.t0=_context["catch"](5);err=_context.t0;if(!didCancel){errorDetails="response"in err?_react.default.createElement(_react.default.Fragment,null,(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.statusText," (",(_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.status,")",_react.default.createElement("h5",null,_i18n.i18n.translate("xpack.apm.fetcher.error.url",{defaultMessage:"URL"})),(_err$response3=err.response)===null||_err$response3===void 0?void 0:_err$response3.url):err.message;notifications.toasts.addWarning({title:_i18n.i18n.translate("xpack.apm.fetcher.error.title",{defaultMessage:"Error while fetching resource"}),text:(0,_public.toMountPoint)(_react.default.createElement("div",null,_react.default.createElement("h5",null,_i18n.i18n.translate("xpack.apm.fetcher.error.status",{defaultMessage:"Error"})),errorDetails))});setIsLoading(false);setResult({data:undefined,status:FETCH_STATUS.FAILURE,error:_context.t0})}case 16:case"end":return _context.stop()}}}),_callee,null,[[5,12]])})));return _doFetch.apply(this,arguments)}doFetch();return function(){setIsLoading(false);didCancel=true}}),[counter,preservePreviousData,dispatchStatus,setIsLoading].concat(_toConsumableArray(fnDeps)));return(0,_react.useMemo)((function(){return _objectSpread({},result,{refetch:function refetch(){setCounter((function(count){return count+1}))}})}),[result])}},37:function(module,exports){module.exports=vendors_2},3728:function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(1);var _kibanaCore__=__webpack_require__(92);var injectedMetadata=JSON.parse(document.querySelector("kbn-injected-metadata").getAttribute("data"));_i18n.i18n.load(injectedMetadata.i18n.translationsUrl).catch((function(e){return e})).then((function(i18nError){var coreSystem=new _kibanaCore__.CoreSystem({injectedMetadata:injectedMetadata,rootDomElement:document.body,browserSupportsCsp:!window.__kbnCspNotEnforced__,requireLegacyFiles:function requireLegacyFiles(){__webpack_require__(3729)}});coreSystem.setup().then((function(coreSetup){if(i18nError){coreSetup.fatalErrors.add(i18nError)}return coreSystem.start()}))}))},3729:function(module,exports,__webpack_require__){"use strict";var _new_platform=__webpack_require__(9);__webpack_require__(1215);__webpack_require__(237);var _chrome=_interopRequireDefault(__webpack_require__(27));var _newPlatform=__webpack_require__(3730);var _plugin=__webpack_require__(1216);__webpack_require__(3971);var _index=_interopRequireDefault(__webpack_require__(3972));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_chrome.default.setRootTemplate(_index.default);var checkForRoot=function checkForRoot(){return new Promise((function(resolve){var ready=!!document.getElementById(_plugin.REACT_APP_ROOT_ID);if(ready){resolve()}else{setTimeout((function(){return resolve(checkForRoot())}),10)}}))};checkForRoot().then((function(){var pluginInstance=(0,_newPlatform.plugin)({});pluginInstance.setup(_new_platform.npSetup.core,_new_platform.npSetup.plugins);pluginInstance.start(_new_platform.npStart.core,_new_platform.npStart.plugins)}))},3730:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=void 0;var _plugin=__webpack_require__(1216);var plugin=function plugin(pluginInitializerContext){return new _plugin.ApmPlugin(pluginInitializerContext)};exports.plugin=plugin},3732:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.APMIndicesPermission=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(3);var _react=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _useFetcher2=__webpack_require__(36);var _variables=__webpack_require__(26);var _ElasticDocsLink=__webpack_require__(238);var _SetupInstructionsLink=__webpack_require__(611);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var APMIndicesPermission=function APMIndicesPermission(_ref){var children=_ref.children;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isPermissionWarningDismissed=_useState2[0],setIsPermissionWarningDismissed=_useState2[1];var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){return callApmApi({pathname:"/api/apm/security/indices_privileges"})}),[]),_useFetcher$data=_useFetcher.data,indicesPrivileges=_useFetcher$data===void 0?{}:_useFetcher$data,status=_useFetcher.status;if(status===_useFetcher2.FETCH_STATUS.LOADING||status===_useFetcher2.FETCH_STATUS.PENDING){return null}var indicesWithoutPermission=Object.keys(indicesPrivileges).filter((function(index){return!indicesPrivileges[index].read}));if(!(0,_lodash.isEmpty)(indicesWithoutPermission)&&!isPermissionWarningDismissed){return _react.default.createElement(PermissionWarning,{indicesWithoutPermission:indicesWithoutPermission,onEscapeHatchClick:function onEscapeHatchClick(){return setIsPermissionWarningDismissed(true)}})}return _react.default.createElement(_react.default.Fragment,null,children)};exports.APMIndicesPermission=APMIndicesPermission;var CentralizedContainer=_styledComponents.default.div.withConfig({displayName:"CentralizedContainer",componentId:"sc-1ubu6cb-0"})(["height:",";display:flex;justify-content:center;align-items:center;"],(0,_variables.pct)(100));var EscapeHatch=_styledComponents.default.div.withConfig({displayName:"EscapeHatch",componentId:"sc-1ubu6cb-1"})(["width:",";margin-top:",";justify-content:center;display:flex;"],(0,_variables.pct)(100),(0,_variables.px)(_variables.units.plus));var PermissionWarning=function PermissionWarning(_ref2){var indicesWithoutPermission=_ref2.indicesWithoutPermission,onEscapeHatchClick=_ref2.onEscapeHatchClick;return _react.default.createElement("div",{style:{height:(0,_variables.pct)(95)}},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"l"},_react.default.createElement("h1",null,_i18n.i18n.translate("xpack.apm.permission.apm",{defaultMessage:"APM"})))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_SetupInstructionsLink.SetupInstructionsLink,null))),_react.default.createElement(CentralizedContainer,null,_react.default.createElement("div",null,_react.default.createElement(_eui.EuiPanel,{paddingSize:"none"},_react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"apmApp",iconColor:"",title:_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.apm.permission.title",{defaultMessage:"Missing permissions to access APM"})),body:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.permission.description",{defaultMessage:"Your user doesn't have access to all APM indices. You can still use the APM app but some data may be missing. You must be granted access to the following indices:"})),_react.default.createElement("ul",{style:{listStyleType:"none"}},indicesWithoutPermission.map((function(index){return _react.default.createElement("li",{key:index,style:{marginTop:_variables.units.half}},_react.default.createElement(_eui.EuiText,{size:"s"},index))})))),actions:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_ElasticDocsLink.ElasticDocsLink,{section:"/apm/server",path:"/feature-roles.html"},(function(href){return _react.default.createElement(_eui.EuiButton,{color:"primary",fill:true,href:href},_i18n.i18n.translate("xpack.apm.permission.learnMore",{defaultMessage:"Learn more about APM permissions"}))})),_react.default.createElement(EscapeHatch,null,_react.default.createElement(_eui.EuiLink,{color:"subdued",onClick:onEscapeHatchClick,style:{fontSize:_variables.fontSize}},_i18n.i18n.translate("xpack.apm.permission.dismissWarning",{defaultMessage:"Dismiss"}))))})))))}},3733:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useDelayedVisibility=useDelayedVisibility;var _react=__webpack_require__(0);var _Delayed=__webpack_require__(3734);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function useDelayedVisibility(visible,hideDelayMs,showDelayMs,minimumVisibleDuration){var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isVisible=_useState2[0],setIsVisible=_useState2[1];var delayedRef=(0,_react.useRef)(null);(0,_react.useEffect)((function(){var delayed=new _Delayed.Delayed({hideDelayMs:hideDelayMs,showDelayMs:showDelayMs,minimumVisibleDuration:minimumVisibleDuration});delayed.onChange((function(visibility){setIsVisible(visibility)}));delayedRef.current=delayed;return function(){delayed.destroy()}}),[hideDelayMs,showDelayMs,minimumVisibleDuration]);(0,_react.useEffect)((function(){if(!delayedRef.current){return}if(visible){delayedRef.current.show()}else{delayedRef.current.hide()}}),[visible]);return isVisible}},3734:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Delayed=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Delayed=function(){function Delayed(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$minimumVisibleDu=_ref.minimumVisibleDuration,minimumVisibleDuration=_ref$minimumVisibleDu===void 0?1e3:_ref$minimumVisibleDu,_ref$showDelayMs=_ref.showDelayMs,showDelayMs=_ref$showDelayMs===void 0?50:_ref$showDelayMs,_ref$hideDelayMs=_ref.hideDelayMs,hideDelayMs=_ref$hideDelayMs===void 0?50:_ref$hideDelayMs;_classCallCheck(this,Delayed);_defineProperty(this,"displayedAt",0);_defineProperty(this,"hideDelayMs",void 0);_defineProperty(this,"isVisible",false);_defineProperty(this,"minimumVisibleDuration",void 0);_defineProperty(this,"showDelayMs",void 0);_defineProperty(this,"timeoutId",void 0);_defineProperty(this,"onChangeCallback",(function(){return null}));this.minimumVisibleDuration=minimumVisibleDuration;this.hideDelayMs=hideDelayMs;this.showDelayMs=showDelayMs}_createClass(Delayed,[{key:"updateState",value:function updateState(isVisible){var _this=this;window.clearTimeout(this.timeoutId);var ms=!isVisible?Math.max(this.displayedAt+this.minimumVisibleDuration-Date.now(),this.hideDelayMs):this.showDelayMs;this.timeoutId=window.setTimeout((function(){if(_this.isVisible!==isVisible){_this.isVisible=isVisible;_this.onChangeCallback(isVisible);if(isVisible){_this.displayedAt=Date.now()}}}),ms)}},{key:"show",value:function show(){this.updateState(true)}},{key:"hide",value:function hide(){this.updateState(false)}},{key:"onChange",value:function onChange(onChangeCallback){this.onChangeCallback=onChangeCallback}},{key:"destroy",value:function destroy(){if(this.timeoutId){window.clearTimeout(this.timeoutId)}}}]);return Delayed}();exports.Delayed=Delayed},3736:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useLoadingIndicator=useLoadingIndicator;var _react=__webpack_require__(0);var _LoadingIndicatorContext=__webpack_require__(610);var _useComponentId=__webpack_require__(3737);function useLoadingIndicator(){var _useContext=(0,_react.useContext)(_LoadingIndicatorContext.LoadingIndicatorContext),dispatchStatus=_useContext.dispatchStatus;var id=(0,_useComponentId.useComponentId)();(0,_react.useEffect)((function(){return function(){dispatchStatus({id:id,isLoading:false})}}),[dispatchStatus,id]);return(0,_react.useMemo)((function(){return{setIsLoading:function setIsLoading(loading){dispatchStatus({id:id,isLoading:loading})}}}),[dispatchStatus,id])}},3737:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useComponentId=useComponentId;var _react=__webpack_require__(0);var uniqueId=0;var getUniqueId=function getUniqueId(){return uniqueId++};function useComponentId(){var idRef=(0,_react.useRef)(getUniqueId());return idRef.current}},3738:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.routes=void 0;var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _reactRouterDom=__webpack_require__(33);var _service_nodes=__webpack_require__(613);var _ErrorGroupDetails=__webpack_require__(3739);var _ServiceDetails=__webpack_require__(3780);var _TransactionDetails=__webpack_require__(3872);var _Home=__webpack_require__(3923);var _route_names=__webpack_require__(3934);var _Settings=__webpack_require__(1259);var _AgentConfigurations=__webpack_require__(3936);var _ApmIndices=__webpack_require__(3939);var _url_helpers=__webpack_require__(71);var _ServiceNodeMetrics=__webpack_require__(3940);var _resolveUrlParams2=__webpack_require__(1218);var _i18n2=__webpack_require__(160);var _TraceLink=__webpack_require__(3941);var _CustomizeUI=__webpack_require__(3942);var _agent_configuration=__webpack_require__(3947);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var metricsBreadcrumb=_i18n.i18n.translate("xpack.apm.breadcrumb.metricsTitle",{defaultMessage:"Metrics"});var renderAsRedirectTo=function renderAsRedirectTo(to){return function(_ref){var location=_ref.location;return _react.default.createElement(_reactRouterDom.Redirect,{to:_objectSpread({},location,{pathname:to})})}};var routes=[{exact:true,path:"/",render:renderAsRedirectTo("/services"),breadcrumb:"APM",name:_route_names.RouteName.HOME},{exact:true,path:"/services",component:function component(){return _react.default.createElement(_Home.Home,{tab:"services"})},breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.servicesTitle",{defaultMessage:"Services"}),name:_route_names.RouteName.SERVICES},{exact:true,path:"/traces",component:function component(){return _react.default.createElement(_Home.Home,{tab:"traces"})},breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.tracesTitle",{defaultMessage:"Traces"}),name:_route_names.RouteName.TRACES},{exact:true,path:"/settings",render:renderAsRedirectTo("/settings/agent-configuration"),breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.listSettingsTitle",{defaultMessage:"Settings"}),name:_route_names.RouteName.SETTINGS},{exact:true,path:"/settings/apm-indices",component:function component(){return _react.default.createElement(_Settings.Settings,null,_react.default.createElement(_ApmIndices.ApmIndices,null))},breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.settings.indicesTitle",{defaultMessage:"Indices"}),name:_route_names.RouteName.INDICES},{exact:true,path:"/settings/agent-configuration",component:function component(){return _react.default.createElement(_Settings.Settings,null,_react.default.createElement(_AgentConfigurations.AgentConfigurations,null))},breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.settings.agentConfigurationTitle",{defaultMessage:"Agent Configuration"}),name:_route_names.RouteName.AGENT_CONFIGURATION},{exact:true,path:"/settings/agent-configuration/create",breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.settings.createAgentConfigurationTitle",{defaultMessage:"Create Agent Configuration"}),name:_route_names.RouteName.AGENT_CONFIGURATION_CREATE,component:function component(){return _react.default.createElement(_agent_configuration.CreateAgentConfigurationRouteHandler,null)}},{exact:true,path:"/settings/agent-configuration/edit",breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.settings.editAgentConfigurationTitle",{defaultMessage:"Edit Agent Configuration"}),name:_route_names.RouteName.AGENT_CONFIGURATION_EDIT,component:function component(){return _react.default.createElement(_agent_configuration.EditAgentConfigurationRouteHandler,null)}},{exact:true,path:"/services/:serviceName",breadcrumb:function breadcrumb(_ref2){var match=_ref2.match;return match.params.serviceName},render:function render(props){return renderAsRedirectTo("/services/".concat(props.match.params.serviceName,"/transactions"))(props)},name:_route_names.RouteName.SERVICE},{exact:true,path:"/services/:serviceName/errors/:groupId",component:_ErrorGroupDetails.ErrorGroupDetails,breadcrumb:function breadcrumb(_ref3){var match=_ref3.match;return match.params.groupId},name:_route_names.RouteName.ERROR},{exact:true,path:"/services/:serviceName/errors",component:function component(){return _react.default.createElement(_ServiceDetails.ServiceDetails,{tab:"errors"})},breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.errorsTitle",{defaultMessage:"Errors"}),name:_route_names.RouteName.ERRORS},{exact:true,path:"/services/:serviceName/transactions",component:function component(){return _react.default.createElement(_ServiceDetails.ServiceDetails,{tab:"transactions"})},breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.transactionsTitle",{defaultMessage:"Transactions"}),name:_route_names.RouteName.TRANSACTIONS},{exact:true,path:"/services/:serviceName/metrics",component:function component(){return _react.default.createElement(_ServiceDetails.ServiceDetails,{tab:"metrics"})},breadcrumb:metricsBreadcrumb,name:_route_names.RouteName.METRICS},{exact:true,path:"/services/:serviceName/nodes",component:function component(){return _react.default.createElement(_ServiceDetails.ServiceDetails,{tab:"nodes"})},breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.nodesTitle",{defaultMessage:"JVMs"}),name:_route_names.RouteName.SERVICE_NODES},{exact:true,path:"/services/:serviceName/nodes/:serviceNodeName/metrics",component:function component(){return _react.default.createElement(_ServiceNodeMetrics.ServiceNodeMetrics,null)},breadcrumb:function breadcrumb(_ref4){var location=_ref4.location;var _resolveUrlParams=(0,_resolveUrlParams2.resolveUrlParams)(location,{}),serviceNodeName=_resolveUrlParams.serviceNodeName;if(serviceNodeName===_service_nodes.SERVICE_NODE_NAME_MISSING){return _i18n2.UNIDENTIFIED_SERVICE_NODES_LABEL}return serviceNodeName||""},name:_route_names.RouteName.SERVICE_NODE_METRICS},{exact:true,path:"/services/:serviceName/transactions/view",component:_TransactionDetails.TransactionDetails,breadcrumb:function breadcrumb(_ref5){var location=_ref5.location;var query=(0,_url_helpers.toQuery)(location.search);return query.transactionName},name:_route_names.RouteName.TRANSACTION_NAME},{exact:true,path:"/link-to/trace/:traceId",component:_TraceLink.TraceLink,breadcrumb:null,name:_route_names.RouteName.LINK_TO_TRACE},{exact:true,path:"/service-map",component:function component(){return _react.default.createElement(_Home.Home,{tab:"service-map"})},breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.serviceMapTitle",{defaultMessage:"Service Map"}),name:_route_names.RouteName.SERVICE_MAP},{exact:true,path:"/services/:serviceName/service-map",component:function component(){return _react.default.createElement(_ServiceDetails.ServiceDetails,{tab:"service-map"})},breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.serviceMapTitle",{defaultMessage:"Service Map"}),name:_route_names.RouteName.SINGLE_SERVICE_MAP},{exact:true,path:"/settings/customize-ui",component:function component(){return _react.default.createElement(_Settings.Settings,null,_react.default.createElement(_CustomizeUI.CustomizeUI,null))},breadcrumb:_i18n.i18n.translate("xpack.apm.breadcrumb.settings.customizeUI",{defaultMessage:"Customize UI"}),name:_route_names.RouteName.CUSTOMIZE_UI}];exports.routes=routes},3739:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorGroupDetails=ErrorGroupDetails;var _eui=__webpack_require__(2);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _i18n2=__webpack_require__(160);var _useFetcher3=__webpack_require__(36);var _variables=__webpack_require__(26);var _ApmHeader=__webpack_require__(341);var _DetailView=__webpack_require__(3752);var _Distribution=__webpack_require__(1228);var _useLocation=__webpack_require__(132);var _useUrlParams2=__webpack_require__(35);var _public=__webpack_require__(78);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Titles=_styledComponents.default.div.withConfig({displayName:"Titles",componentId:"n5cwlo-0"})(["margin-bottom:",";"],(0,_variables.px)(_variables.units.plus));var Label=_styledComponents.default.div.withConfig({displayName:"Label",componentId:"n5cwlo-1"})(["margin-bottom:",";font-size:",";color:",";"],(0,_variables.px)(_variables.units.quarter),_variables.fontSizes.small,_eui_theme_light.default.euiColorMediumShade);var Message=_styledComponents.default.div.withConfig({displayName:"Message",componentId:"n5cwlo-2"})(["font-family:",";font-weight:bold;font-size:",";margin-bottom:",";"],_variables.fontFamilyCode,_variables.fontSizes.large,(0,_variables.px)(_variables.units.half));var Culprit=_styledComponents.default.div.withConfig({displayName:"Culprit",componentId:"n5cwlo-3"})(["font-family:",";"],_variables.fontFamilyCode);function getShortGroupId(errorGroupId){if(!errorGroupId){return _i18n2.NOT_AVAILABLE_LABEL}return errorGroupId.slice(0,5)}function ErrorGroupDetails(){var _errorGroupData$error,_errorGroupData$error2,_errorGroupData$error3,_errorGroupData$error4,_errorGroupData$error5,_errorGroupData$error6,_errorGroupData$error7;var location=(0,_useLocation.useLocation)();var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,errorGroupId=urlParams.errorGroupId;var _useFetcher=(0,_useFetcher3.useFetcher)((function(callApmApi){if(serviceName&&start&&end&&errorGroupId){return callApmApi({pathname:"/api/apm/services/{serviceName}/errors/{groupId}",params:{path:{serviceName:serviceName,groupId:errorGroupId},query:{start:start,end:end,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,errorGroupId,uiFilters]),errorGroupData=_useFetcher.data;var _useFetcher2=(0,_useFetcher3.useFetcher)((function(callApmApi){if(serviceName&&start&&end&&errorGroupId){return callApmApi({pathname:"/api/apm/services/{serviceName}/errors/distribution",params:{path:{serviceName:serviceName},query:{start:start,end:end,groupId:errorGroupId,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,errorGroupId,uiFilters]),errorDistributionData=_useFetcher2.data;(0,_public.useTrackPageview)({app:"apm",path:"error_group_details"});(0,_public.useTrackPageview)({app:"apm",path:"error_group_details",delay:15e3});if(!errorGroupData||!errorDistributionData){return null}var showDetails=errorGroupData.occurrencesCount!==0;var logMessage=(_errorGroupData$error=errorGroupData.error)===null||_errorGroupData$error===void 0?void 0:(_errorGroupData$error2=_errorGroupData$error.error.log)===null||_errorGroupData$error2===void 0?void 0:_errorGroupData$error2.message;var excMessage=(_errorGroupData$error3=errorGroupData.error)===null||_errorGroupData$error3===void 0?void 0:(_errorGroupData$error4=_errorGroupData$error3.error.exception)===null||_errorGroupData$error4===void 0?void 0:_errorGroupData$error4[0].message;var culprit=(_errorGroupData$error5=errorGroupData.error)===null||_errorGroupData$error5===void 0?void 0:_errorGroupData$error5.error.culprit;var isUnhandled=((_errorGroupData$error6=errorGroupData.error)===null||_errorGroupData$error6===void 0?void 0:(_errorGroupData$error7=_errorGroupData$error6.error.exception)===null||_errorGroupData$error7===void 0?void 0:_errorGroupData$error7[0].handled)===false;return _react.default.createElement("div",null,_react.default.createElement(_ApmHeader.ApmHeader,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h1",null,_i18n.i18n.translate("xpack.apm.errorGroupDetails.errorGroupTitle",{defaultMessage:"Error group {errorGroupId}",values:{errorGroupId:getShortGroupId(urlParams.errorGroupId)}})))),isUnhandled&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiBadge,{color:"warning"},_i18n.i18n.translate("xpack.apm.errorGroupDetails.unhandledLabel",{defaultMessage:"Unhandled"}))))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiPanel,null,showDetails&&_react.default.createElement(Titles,null,_react.default.createElement(_eui.EuiText,null,logMessage&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(Label,null,_i18n.i18n.translate("xpack.apm.errorGroupDetails.logMessageLabel",{defaultMessage:"Log message"})),_react.default.createElement(Message,null,logMessage)),_react.default.createElement(Label,null,_i18n.i18n.translate("xpack.apm.errorGroupDetails.exceptionMessageLabel",{defaultMessage:"Exception message"})),_react.default.createElement(Message,null,excMessage||_i18n2.NOT_AVAILABLE_LABEL),_react.default.createElement(Label,null,_i18n.i18n.translate("xpack.apm.errorGroupDetails.culpritLabel",{defaultMessage:"Culprit"})),_react.default.createElement(Culprit,null,culprit||_i18n2.NOT_AVAILABLE_LABEL))),_react.default.createElement(_Distribution.ErrorDistribution,{distribution:errorDistributionData,title:_i18n.i18n.translate("xpack.apm.errorGroupDetails.occurrencesChartLabel",{defaultMessage:"Occurrences"})})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),showDetails&&_react.default.createElement(_DetailView.DetailView,{errorGroup:errorGroupData,urlParams:urlParams,location:location}))}},3740:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KueryBar=KueryBar;var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(3);var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _i18n=__webpack_require__(1);var _url_helpers=__webpack_require__(71);var _Typeahead=__webpack_require__(3741);var _get_bool_filter=__webpack_require__(3745);var _useLocation=__webpack_require__(132);var _useUrlParams2=__webpack_require__(35);var _history=__webpack_require__(82);var _useApmPluginContext=__webpack_require__(62);var _useDynamicIndexPattern=__webpack_require__(3748);var _public=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var Container=_styledComponents.default.div.withConfig({displayName:"Container",componentId:"sc-8juast-0"})(["margin-bottom:10px;"]);function convertKueryToEsQuery(kuery,indexPattern){var ast=_public.esKuery.fromKueryExpression(kuery);return _public.esKuery.toElasticsearchQuery(ast,indexPattern)}function KueryBar(){var _useState=(0,_react.useState)({suggestions:[],isLoadingSuggestions:false}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var location=(0,_useLocation.useLocation)();var data=(0,_useApmPluginContext.useApmPluginContext)().plugins.data;var currentRequestCheck;var processorEvent=urlParams.processorEvent;var examples={transaction:"transaction.duration.us > 300000",error:"http.response.status_code >= 400",metric:'process.pid = "1234"',defaults:"transaction.duration.us > 300000 AND http.response.status_code >= 400"};var example=examples[processorEvent||"defaults"];var _useDynamicIndexPatte=(0,_useDynamicIndexPattern.useDynamicIndexPattern)(processorEvent),indexPattern=_useDynamicIndexPatte.indexPattern;var placeholder=_i18n.i18n.translate("xpack.apm.kueryBar.placeholder",{defaultMessage:"Search {event, select,\n            transaction {transactions}\n            metric {metrics}\n            error {errors}\n            other {transactions, errors and metrics}\n          } (E.g. {queryExample})",values:{queryExample:example,event:processorEvent}});var disabled=/\/service-map$/.test(location.pathname);var disabledPlaceholder=_i18n.i18n.translate("xpack.apm.kueryBar.disabledPlaceholder",{defaultMessage:"Search is not available for service map"});function onChange(_x,_x2){return _onChange.apply(this,arguments)}function _onChange(){_onChange=_asyncToGenerator(regeneratorRuntime.mark((function _callee(inputValue,selectionStart){var currentRequest,suggestions;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(indexPattern==null)){_context.next=2;break}return _context.abrupt("return");case 2:setState(_objectSpread({},state,{suggestions:[],isLoadingSuggestions:true}));currentRequest=(0,_lodash.uniqueId)();currentRequestCheck=currentRequest;_context.prev=5;_context.next=8;return data.autocomplete.getQuerySuggestions({language:"kuery",indexPatterns:[indexPattern],boolFilter:(0,_get_bool_filter.getBoolFilter)(urlParams),query:inputValue,selectionStart:selectionStart,selectionEnd:selectionStart});case 8:_context.t0=_context.sent;if(_context.t0){_context.next=11;break}_context.t0=[];case 11:_context.t1=function(suggestion){return!(0,_lodash.startsWith)(suggestion.text,"span.")};suggestions=_context.t0.filter(_context.t1).slice(0,15);if(!(currentRequest!==currentRequestCheck)){_context.next=15;break}return _context.abrupt("return");case 15:setState(_objectSpread({},state,{suggestions:suggestions,isLoadingSuggestions:false}));_context.next=21;break;case 18:_context.prev=18;_context.t2=_context["catch"](5);console.error("Error while fetching suggestions",_context.t2);case 21:case"end":return _context.stop()}}}),_callee,null,[[5,18]])})));return _onChange.apply(this,arguments)}function onSubmit(inputValue){if(indexPattern==null){return}try{var res=convertKueryToEsQuery(inputValue,indexPattern);if(!res){return}_history.history.push(_objectSpread({},location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(location.search),{kuery:encodeURIComponent(inputValue.trim())}))}))}catch(e){console.log("Invalid kuery syntax")}}return _react.default.createElement(Container,null,_react.default.createElement(_Typeahead.Typeahead,{disabled:disabled,isLoading:state.isLoadingSuggestions,initialValue:urlParams.kuery,onChange:onChange,onSubmit:onSubmit,suggestions:state.suggestions,placeholder:disabled?disabledPlaceholder:placeholder}))}},3741:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Typeahead=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _Suggestions=_interopRequireDefault(__webpack_require__(3742));var _ClickOutside=_interopRequireDefault(__webpack_require__(3744));var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var KEY_CODES={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,ESC:27,TAB:9};var Typeahead=function(_Component){_inherits(Typeahead,_Component);function Typeahead(){var _getPrototypeOf2;var _this;_classCallCheck(this,Typeahead);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Typeahead)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isSuggestionsVisible:false,index:null,value:"",initialValue:""});_defineProperty(_assertThisInitialized(_this),"incrementIndex",(function(currentIndex){var nextIndex=currentIndex+1;if(currentIndex===null||nextIndex>=_this.props.suggestions.length){nextIndex=0}_this.setState({index:nextIndex})}));_defineProperty(_assertThisInitialized(_this),"decrementIndex",(function(currentIndex){var previousIndex=currentIndex-1;if(previousIndex<0){previousIndex=null}_this.setState({index:previousIndex})}));_defineProperty(_assertThisInitialized(_this),"onKeyUp",(function(event){var selectionStart=event.target.selectionStart;var value=_this.state.value;switch(event.keyCode){case KEY_CODES.LEFT:_this.setState({isSuggestionsVisible:true});_this.props.onChange(value,selectionStart);break;case KEY_CODES.RIGHT:_this.setState({isSuggestionsVisible:true});_this.props.onChange(value,selectionStart);break}}));_defineProperty(_assertThisInitialized(_this),"onKeyDown",(function(event){var _this$state=_this.state,isSuggestionsVisible=_this$state.isSuggestionsVisible,index=_this$state.index,value=_this$state.value;switch(event.keyCode){case KEY_CODES.DOWN:event.preventDefault();if(isSuggestionsVisible){_this.incrementIndex(index)}else{_this.setState({isSuggestionsVisible:true,index:0})}break;case KEY_CODES.UP:event.preventDefault();if(isSuggestionsVisible){_this.decrementIndex(index)}break;case KEY_CODES.ENTER:event.preventDefault();if(isSuggestionsVisible&&_this.props.suggestions[index]){_this.selectSuggestion(_this.props.suggestions[index])}else{_this.setState({isSuggestionsVisible:false});_this.props.onSubmit(value)}break;case KEY_CODES.ESC:event.preventDefault();_this.setState({isSuggestionsVisible:false});break;case KEY_CODES.TAB:_this.setState({isSuggestionsVisible:false});break}}));_defineProperty(_assertThisInitialized(_this),"selectSuggestion",(function(suggestion){var nextInputValue=_this.state.value.substr(0,suggestion.start)+suggestion.text+_this.state.value.substr(suggestion.end);_this.setState({value:nextInputValue,index:null});_this.props.onChange(nextInputValue,nextInputValue.length)}));_defineProperty(_assertThisInitialized(_this),"onClickOutside",(function(){_this.setState({isSuggestionsVisible:false})}));_defineProperty(_assertThisInitialized(_this),"onChangeInputValue",(function(event){var _event$target=event.target,value=_event$target.value,selectionStart=_event$target.selectionStart;var hasValue=Boolean(value.trim());_this.setState({value:value,isSuggestionsVisible:hasValue,index:null});if(!hasValue){_this.props.onSubmit(value)}_this.props.onChange(value,selectionStart)}));_defineProperty(_assertThisInitialized(_this),"onClickInput",(function(event){var selectionStart=event.target.selectionStart;_this.props.onChange(_this.state.value,selectionStart)}));_defineProperty(_assertThisInitialized(_this),"onClickSuggestion",(function(suggestion){_this.selectSuggestion(suggestion);_this.inputRef.focus()}));_defineProperty(_assertThisInitialized(_this),"onMouseEnterSuggestion",(function(index){_this.setState({index:index})}));_defineProperty(_assertThisInitialized(_this),"onSubmit",(function(){_this.props.onSubmit(_this.state.value);_this.setState({isSuggestionsVisible:false})}));return _this}_createClass(Typeahead,[{key:"render",value:function render(){var _this2=this;var placeholder=this.props.placeholder;return _react.default.createElement(_ClickOutside.default,{onClickOutside:this.onClickOutside,style:{position:"relative"}},_react.default.createElement("div",{style:{position:"relative"}},_react.default.createElement(_eui.EuiFieldSearch,{fullWidth:true,style:{backgroundImage:"none"},placeholder:placeholder,inputRef:function inputRef(node){if(node){_this2.inputRef=node}},disabled:this.props.disabled,value:this.state.value,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onChange:this.onChangeInputValue,onClick:this.onClickInput,autoComplete:"off",spellCheck:false}),this.props.isLoading&&_react.default.createElement(_eui.EuiProgress,{size:"xs",color:"accent",position:"absolute",style:{bottom:0,top:"initial"}})),_react.default.createElement(_Suggestions.default,{show:this.state.isSuggestionsVisible,suggestions:this.props.suggestions,index:this.state.index,onClick:this.onClickSuggestion,onMouseEnter:this.onMouseEnterSuggestion}))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props,state){var initialValue=props.initialValue?props.initialValue:"";if(initialValue!==state.initialValue){return{value:initialValue,initialValue:initialValue}}return null}}]);return Typeahead}(_react.Component);exports.Typeahead=Typeahead;Typeahead.propTypes={initialValue:_propTypes.default.string,isLoading:_propTypes.default.bool,disabled:_propTypes.default.bool,onChange:_propTypes.default.func.isRequired,onSubmit:_propTypes.default.func.isRequired,suggestions:_propTypes.default.array.isRequired,placeholder:_propTypes.default.string.isRequired};Typeahead.defaultProps={isLoading:false,disabled:false,suggestions:[]}},3742:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _lodash=__webpack_require__(3);var _Suggestion=_interopRequireDefault(__webpack_require__(3743));var _variables=__webpack_require__(26);var _polished=__webpack_require__(149);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var List=_styledComponents.default.ul.withConfig({displayName:"List",componentId:"yhgvuu-0"})(["width:100%;border:1px solid ",";border-radius:",";box-shadow:0px "," "," ",";position:absolute;background:#fff;z-index:10;left:0;max-height:",";overflow:scroll;"],_eui_theme_light.default.euiColorLightShade,(0,_variables.px)(_variables.units.quarter),(0,_variables.px)(_variables.units.quarter),(0,_variables.px)(_variables.units.double),(0,_polished.tint)(.1,_eui_theme_light.default.euiColorFullShade),(0,_variables.px)(_variables.unit*20));var Suggestions=function(_Component){_inherits(Suggestions,_Component);function Suggestions(){var _getPrototypeOf2;var _this;_classCallCheck(this,Suggestions);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Suggestions)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"childNodes",[]);_defineProperty(_assertThisInitialized(_this),"scrollIntoView",(function(){var parent=_this.parentNode;var child=_this.childNodes[_this.props.index];if(_this.props.index==null||!parent||!child){return}var scrollTop=Math.max(Math.min(parent.scrollTop,child.offsetTop),child.offsetTop+child.offsetHeight-parent.offsetHeight);parent.scrollTop=scrollTop}));return _this}_createClass(Suggestions,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(prevProps.index!==this.props.index){this.scrollIntoView()}}},{key:"render",value:function render(){var _this2=this;if(!this.props.show||(0,_lodash.isEmpty)(this.props.suggestions)){return null}var suggestions=this.props.suggestions.map((function(suggestion,index){var key=suggestion+"_"+index;return _react.default.createElement(_Suggestion.default,{innerRef:function innerRef(node){return _this2.childNodes[index]=node},selected:index===_this2.props.index,suggestion:suggestion,onClick:_this2.props.onClick,onMouseEnter:function onMouseEnter(){return _this2.props.onMouseEnter(index)},key:key})}));return _react.default.createElement(List,{innerRef:function innerRef(node){return _this2.parentNode=node}},suggestions)}}]);return Suggestions}(_react.Component);Suggestions.propTypes={index:_propTypes.default.number,onClick:_propTypes.default.func.isRequired,onMouseEnter:_propTypes.default.func.isRequired,show:_propTypes.default.bool,suggestions:_propTypes.default.array.isRequired};var _default=Suggestions;exports.default=_default;module.exports=exports.default},3743:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _eui=__webpack_require__(2);var _variables=__webpack_require__(26);var _polished=__webpack_require__(149);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getIconColor(type){switch(type){case"field":return _eui_theme_light.default.euiColorVis7;case"value":return _eui_theme_light.default.euiColorVis0;case"operator":return _eui_theme_light.default.euiColorVis1;case"conjunction":return _eui_theme_light.default.euiColorVis3;case"recentSearch":return _eui_theme_light.default.euiColorMediumShade}}var Description=_styledComponents.default.div.withConfig({displayName:"Description",componentId:"ph09hf-0"})(["color:",";p{display:inline;span{font-family:",";color:",";padding:0 ",";display:inline-block;}}"],_eui_theme_light.default.euiColorDarkShade,_variables.fontFamilyCode,_eui_theme_light.default.euiColorFullShade,(0,_variables.px)(_variables.units.quarter));var ListItem=_styledComponents.default.li.withConfig({displayName:"ListItem",componentId:"ph09hf-1"})(["font-size:",";height:",";align-items:center;display:flex;background:",";cursor:pointer;border-radius:",";","{p span{background:",";}}"],_variables.fontSizes.small,(0,_variables.px)(_variables.units.double),(function(props){return props.selected?_eui_theme_light.default.euiColorLightestShade:"initial"}),(0,_variables.px)(_variables.units.quarter),Description,(function(props){return props.selected?_eui_theme_light.default.euiColorEmptyShade:_eui_theme_light.default.euiColorLightestShade}));var Icon=_styledComponents.default.div.withConfig({displayName:"Icon",componentId:"ph09hf-2"})(["flex:0 0 ",";background:",";color:",";width:100%;height:100%;text-align:center;line-height:",";"],(0,_variables.px)(_variables.units.double),(function(props){return(0,_polished.tint)(.1,getIconColor(props.type))}),(function(props){return getIconColor(props.type)}),(0,_variables.px)(_variables.units.double));var TextValue=_styledComponents.default.div.withConfig({displayName:"TextValue",componentId:"ph09hf-3"})(["flex:0 0 ",";color:",";padding:0 ",";"],(0,_variables.px)(_variables.unit*16),_eui_theme_light.default.euiColorDarkestShade,(0,_variables.px)(_variables.units.half));function getEuiIconType(type){switch(type){case"field":return"kqlField";case"value":return"kqlValue";case"recentSearch":return"search";case"conjunction":return"kqlSelector";case"operator":return"kqlOperand";default:throw new Error("Unknown type",type)}}function Suggestion(props){return _react.default.createElement(ListItem,{innerRef:props.innerRef,selected:props.selected,onClick:function onClick(){return props.onClick(props.suggestion)},onMouseEnter:props.onMouseEnter},_react.default.createElement(Icon,{type:props.suggestion.type},_react.default.createElement(_eui.EuiIcon,{type:getEuiIconType(props.suggestion.type)})),_react.default.createElement(TextValue,null,props.suggestion.text),_react.default.createElement(Description,null,props.suggestion.description))}Suggestion.propTypes={onClick:_propTypes.default.func.isRequired,onMouseEnter:_propTypes.default.func.isRequired,selected:_propTypes.default.bool,suggestion:_propTypes.default.object.isRequired,innerRef:_propTypes.default.func.isRequired};var _default=Suggestion;exports.default=_default;module.exports=exports.default},3744:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ClickOutside=function(_Component){_inherits(ClickOutside,_Component);function ClickOutside(){var _getPrototypeOf2;var _this;_classCallCheck(this,ClickOutside);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ClickOutside)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"setNodeRef",(function(node){_this.nodeRef=node}));_defineProperty(_assertThisInitialized(_this),"onClick",(function(event){if(_this.nodeRef&&!_this.nodeRef.contains(event.target)){_this.props.onClickOutside()}}));return _this}_createClass(ClickOutside,[{key:"componentDidMount",value:function componentDidMount(){document.addEventListener("mousedown",this.onClick)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("mousedown",this.onClick)}},{key:"render",value:function render(){var _this$props=this.props,onClickOutside=_this$props.onClickOutside,restProps=_objectWithoutProperties(_this$props,["onClickOutside"]);return _react.default.createElement("div",_extends({ref:this.setNodeRef},restProps),this.props.children)}}]);return ClickOutside}(_react.Component);exports.default=ClickOutside;ClickOutside.propTypes={onClickOutside:_propTypes.default.func.isRequired};module.exports=exports.default},3745:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getBoolFilter=getBoolFilter;var _elasticsearch_fieldnames=__webpack_require__(81);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getBoolFilter(urlParams){var start=urlParams.start,end=urlParams.end,serviceName=urlParams.serviceName,processorEvent=urlParams.processorEvent;if(!start||!end){throw new Error("Date range was not defined")}var boolFilter=[{range:{"@timestamp":{gte:new Date(start).getTime(),lte:new Date(end).getTime(),format:"epoch_millis"}}}];if(serviceName){boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.SERVICE_NAME,serviceName)})}switch(processorEvent){case"transaction":boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"transaction")});if(urlParams.transactionName){boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.TRANSACTION_NAME,urlParams.transactionName)})}if(urlParams.transactionType){boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.TRANSACTION_TYPE,urlParams.transactionType)})}break;case"error":boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"error")});if(urlParams.errorGroupId){boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.ERROR_GROUP_ID,urlParams.errorGroupId)})}break;case"metric":boolFilter.push({term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"metric")});break;default:boolFilter.push({bool:{should:[{term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"error")},{term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"transaction")},{term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"metric")}]}})}return boolFilter}},3746:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ProcessorEvent=void 0;var ProcessorEvent;exports.ProcessorEvent=ProcessorEvent;(function(ProcessorEvent){ProcessorEvent["transaction"]="transaction";ProcessorEvent["error"]="error";ProcessorEvent["metric"]="metric"})(ProcessorEvent||(exports.ProcessorEvent=ProcessorEvent={}))},3747:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useDeepObjectIdentity=useDeepObjectIdentity;var _react=__webpack_require__(0);var _lodash=__webpack_require__(3);function useDeepObjectIdentity(value){var valueRef=(0,_react.useRef)(value);if(!(0,_lodash.isEqual)(valueRef.current,value)){valueRef.current=value}return valueRef.current}},3748:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useDynamicIndexPattern=useDynamicIndexPattern;var _useFetcher2=__webpack_require__(36);function useDynamicIndexPattern(processorEvent){var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){return callApmApi({pathname:"/api/apm/index_pattern/dynamic",isCachable:true,params:{query:{processorEvent:processorEvent}}})}),[processorEvent]),data=_useFetcher.data,status=_useFetcher.status;return{indexPattern:data===null||data===void 0?void 0:data.dynamicIndexPattern,status:status}}},3749:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DatePicker=DatePicker;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _url_helpers=__webpack_require__(71);var _history=__webpack_require__(82);var _useLocation=__webpack_require__(132);var _useUrlParams2=__webpack_require__(35);var _callApi=__webpack_require__(286);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function DatePicker(){var location=(0,_useLocation.useLocation)();var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams,refreshTimeRange=_useUrlParams.refreshTimeRange;var commonlyUsedRanges=[{start:"now-15m",end:"now",label:_i18n.i18n.translate("xpack.apm.datePicker.last15MinutesLabel",{defaultMessage:"Last 15 minutes"})},{start:"now-30m",end:"now",label:_i18n.i18n.translate("xpack.apm.datePicker.last30MinutesLabel",{defaultMessage:"Last 30 minutes"})},{start:"now-1h",end:"now",label:_i18n.i18n.translate("xpack.apm.datePicker.last1HourLabel",{defaultMessage:"Last 1 hour"})},{start:"now-24h",end:"now",label:_i18n.i18n.translate("xpack.apm.datePicker.last24HoursLabel",{defaultMessage:"Last 24 hours"})},{start:"now-7d",end:"now",label:_i18n.i18n.translate("xpack.apm.datePicker.last7DaysLabel",{defaultMessage:"Last 7 days"})},{start:"now-30d",end:"now",label:_i18n.i18n.translate("xpack.apm.datePicker.last30DaysLabel",{defaultMessage:"Last 30 days"})},{start:"now-90d",end:"now",label:_i18n.i18n.translate("xpack.apm.datePicker.last90DaysLabel",{defaultMessage:"Last 90 days"})},{start:"now-1y",end:"now",label:_i18n.i18n.translate("xpack.apm.datePicker.last1YearLabel",{defaultMessage:"Last 1 year"})}];function updateUrl(nextQuery){_history.history.push(_objectSpread({},location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(location.search),{},nextQuery))}))}function onRefreshChange(_ref){var isPaused=_ref.isPaused,refreshInterval=_ref.refreshInterval;updateUrl({refreshPaused:isPaused,refreshInterval:refreshInterval})}function onTimeChange(_ref2){var start=_ref2.start,end=_ref2.end;updateUrl({rangeFrom:start,rangeTo:end})}var rangeFrom=urlParams.rangeFrom,rangeTo=urlParams.rangeTo,refreshPaused=urlParams.refreshPaused,refreshInterval=urlParams.refreshInterval;return _react.default.createElement(_eui.EuiSuperDatePicker,{start:rangeFrom,end:rangeTo,isPaused:refreshPaused,refreshInterval:refreshInterval,onTimeChange:onTimeChange,onRefresh:function onRefresh(_ref3){var start=_ref3.start,end=_ref3.end;(0,_callApi.clearCache)();refreshTimeRange({rangeFrom:start,rangeTo:end})},onRefreshChange:onRefreshChange,showUpdateButton:true,commonlyUsedRanges:commonlyUsedRanges})}},3750:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EnvironmentFilter=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _useFetcher2=__webpack_require__(36);var _useLocation=__webpack_require__(132);var _useUrlParams2=__webpack_require__(35);var _history=__webpack_require__(82);var _url_helpers=__webpack_require__(71);var _environment_filter_values=__webpack_require__(3751);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function updateEnvironmentUrl(location,environment){var nextEnvironmentQueryParam=environment!==_environment_filter_values.ENVIRONMENT_ALL?environment:undefined;_history.history.push(_objectSpread({},location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(location.search),{environment:nextEnvironmentQueryParam}))}))}var ALL_OPTION={value:_environment_filter_values.ENVIRONMENT_ALL,text:_i18n.i18n.translate("xpack.apm.filter.environment.allLabel",{defaultMessage:"All"})};var NOT_DEFINED_OPTION={value:_environment_filter_values.ENVIRONMENT_NOT_DEFINED,text:_i18n.i18n.translate("xpack.apm.filter.environment.notDefinedLabel",{defaultMessage:"Not defined"})};var SEPARATOR_OPTION={text:"- ".concat(_i18n.i18n.translate("xpack.apm.filter.environment.selectEnvironmentLabel",{defaultMessage:"Select environment"})," -"),disabled:true};function getOptions(environments){var environmentOptions=environments.filter((function(env){return env!==_environment_filter_values.ENVIRONMENT_NOT_DEFINED})).map((function(environment){return{value:environment,text:environment}}));return[ALL_OPTION].concat(_toConsumableArray(environments.includes(_environment_filter_values.ENVIRONMENT_NOT_DEFINED)?[NOT_DEFINED_OPTION]:[]),_toConsumableArray(environmentOptions.length>0?[SEPARATOR_OPTION]:[]),_toConsumableArray(environmentOptions))}var EnvironmentFilter=function EnvironmentFilter(){var location=(0,_useLocation.useLocation)();var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;var start=urlParams.start,end=urlParams.end,serviceName=urlParams.serviceName;var environment=uiFilters.environment;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(start&&end){return callApmApi({pathname:"/api/apm/ui_filters/environments",params:{query:{start:start,end:end,serviceName:serviceName}}})}}),[start,end,serviceName]),_useFetcher$data=_useFetcher.data,environments=_useFetcher$data===void 0?[]:_useFetcher$data,_useFetcher$status=_useFetcher.status,status=_useFetcher$status===void 0?"loading":_useFetcher$status;return _react.default.createElement(_eui.EuiSelect,{prepend:_i18n.i18n.translate("xpack.apm.filter.environment.label",{defaultMessage:"environment"}),options:getOptions(environments),value:environment||_environment_filter_values.ENVIRONMENT_ALL,onChange:function onChange(event){updateEnvironmentUrl(location,event.target.value)},isLoading:status==="loading"})};exports.EnvironmentFilter=EnvironmentFilter},3751:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ENVIRONMENT_NOT_DEFINED=exports.ENVIRONMENT_ALL=void 0;var ENVIRONMENT_ALL="ENVIRONMENT_ALL";exports.ENVIRONMENT_ALL=ENVIRONMENT_ALL;var ENVIRONMENT_NOT_DEFINED="ENVIRONMENT_NOT_DEFINED";exports.ENVIRONMENT_NOT_DEFINED=ENVIRONMENT_NOT_DEFINED},3752:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DetailView=DetailView;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _lodash=__webpack_require__(3);var _variables=__webpack_require__(26);var _DiscoverErrorLink=__webpack_require__(3753);var _url_helpers=__webpack_require__(71);var _history=__webpack_require__(82);var _ErrorMetadata=__webpack_require__(3755);var _Stacktrace=__webpack_require__(438);var _ErrorTabs=__webpack_require__(3766);var _Summary=__webpack_require__(619);var _TimestampTooltip=__webpack_require__(287);var _HttpInfoSummaryItem=__webpack_require__(621);var _TransactionDetailLink=__webpack_require__(288);var _UserAgentSummaryItem=__webpack_require__(1227);var _ExceptionStacktrace=__webpack_require__(3772);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var HeaderContainer=_styledComponents.default.div.withConfig({displayName:"HeaderContainer",componentId:"a860kg-0"})(["display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:",";"],(0,_variables.px)(_variables.unit));var TransactionLinkName=_styledComponents.default.div.withConfig({displayName:"TransactionLinkName",componentId:"a860kg-1"})(["margin-left:",";display:inline-block;vertical-align:middle;"],(0,_variables.px)(_variables.units.half));function getCurrentTab(){var tabs=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var currentTabKey=arguments.length>1?arguments[1]:undefined;var selectedTab=tabs.find((function(_ref){var key=_ref.key;return key===currentTabKey}));return selectedTab?selectedTab:(0,_lodash.first)(tabs)||{}}function DetailView(_ref2){var _error$error$page,_error$url,_error$http,_error$http$request,_error$http2,_error$http2$response;var errorGroup=_ref2.errorGroup,urlParams=_ref2.urlParams,location=_ref2.location;var transaction=errorGroup.transaction,error=errorGroup.error,occurrencesCount=errorGroup.occurrencesCount;if(!error){return null}var tabs=(0,_ErrorTabs.getTabs)(error);var currentTab=getCurrentTab(tabs,urlParams.detailTab);var errorUrl=((_error$error$page=error.error.page)===null||_error$error$page===void 0?void 0:_error$error$page.url)||((_error$url=error.url)===null||_error$url===void 0?void 0:_error$url.full);var method=(_error$http=error.http)===null||_error$http===void 0?void 0:(_error$http$request=_error$http.request)===null||_error$http$request===void 0?void 0:_error$http$request.method;var status=(_error$http2=error.http)===null||_error$http2===void 0?void 0:(_error$http2$response=_error$http2.response)===null||_error$http2$response===void 0?void 0:_error$http2$response.status_code;return _react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(HeaderContainer,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h3",null,_i18n.i18n.translate("xpack.apm.errorGroupDetails.errorOccurrenceTitle",{defaultMessage:"Error occurrence"}))),_react.default.createElement(_DiscoverErrorLink.DiscoverErrorLink,{error:error,kuery:urlParams.kuery},_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"discoverApp"},_i18n.i18n.translate("xpack.apm.errorGroupDetails.viewOccurrencesInDiscoverButtonLabel",{defaultMessage:"View {occurrencesCount} {occurrencesCount, plural, one {occurrence} other {occurrences}} in Discover.",values:{occurrencesCount:occurrencesCount}})))),_react.default.createElement(_Summary.Summary,{items:[_react.default.createElement(_TimestampTooltip.TimestampTooltip,{time:error.timestamp.us/1e3}),errorUrl&&method?_react.default.createElement(_HttpInfoSummaryItem.HttpInfoSummaryItem,{url:errorUrl,method:method,status:status}):null,transaction&&transaction.user_agent?_react.default.createElement(_UserAgentSummaryItem.UserAgentSummaryItem,transaction.user_agent):null,transaction&&_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.errorGroupDetails.relatedTransactionSample",{defaultMessage:"Related transaction sample"})},_react.default.createElement(_TransactionDetailLink.TransactionDetailLink,{traceId:transaction.trace.id,transactionId:transaction.transaction.id,transactionName:transaction.transaction.name,transactionType:transaction.transaction.type,serviceName:transaction.service.name},_react.default.createElement(_eui.EuiIcon,{type:"merge"}),_react.default.createElement(TransactionLinkName,null,transaction.transaction.name)))]}),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiTabs,null,tabs.map((function(_ref3){var key=_ref3.key,label=_ref3.label;return _react.default.createElement(_eui.EuiTab,{onClick:function onClick(){_history.history.replace(_objectSpread({},location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(location.search),{detailTab:key}))}))},isSelected:currentTab.key===key,key:key},label)}))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(TabContent,{error:error,currentTab:currentTab}))}function TabContent(_ref4){var _error$service$langua,_error$error$log;var error=_ref4.error,currentTab=_ref4.currentTab;var codeLanguage=(_error$service$langua=error.service.language)===null||_error$service$langua===void 0?void 0:_error$service$langua.name;var exceptions=error.error.exception||[];var logStackframes=(_error$error$log=error.error.log)===null||_error$error$log===void 0?void 0:_error$error$log.stacktrace;switch(currentTab.key){case _ErrorTabs.logStacktraceTab.key:return _react.default.createElement(_Stacktrace.Stacktrace,{stackframes:logStackframes,codeLanguage:codeLanguage});case _ErrorTabs.exceptionStacktraceTab.key:return _react.default.createElement(_ExceptionStacktrace.ExceptionStacktrace,{codeLanguage:codeLanguage,exceptions:exceptions});default:return _react.default.createElement(_ErrorMetadata.ErrorMetadata,{error:error})}}},3753:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiscoverErrorLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _elasticsearch_fieldnames=__webpack_require__(81);var _DiscoverLink=__webpack_require__(436);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getDiscoverQuery(error,kuery){var serviceName=error.service.name;var groupId=error.error.grouping_key;var query="".concat(_elasticsearch_fieldnames.SERVICE_NAME,':"').concat(serviceName,'" AND ').concat(_elasticsearch_fieldnames.ERROR_GROUP_ID,':"').concat(groupId,'"');if(kuery){query+=" AND ".concat(kuery)}return{_a:{interval:"auto",query:{language:"kuery",query:query},sort:{"@timestamp":"desc"}}}}var DiscoverErrorLink=function DiscoverErrorLink(_ref){var error=_ref.error,kuery=_ref.kuery,children=_ref.children;return _react.default.createElement(_DiscoverLink.DiscoverLink,{query:getDiscoverQuery(error,kuery),children:children})};exports.DiscoverErrorLink=DiscoverErrorLink},3754:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.APM_STATIC_INDEX_PATTERN_ID=void 0;var APM_STATIC_INDEX_PATTERN_ID="apm_static_index_pattern_id";exports.APM_STATIC_INDEX_PATTERN_ID=APM_STATIC_INDEX_PATTERN_ID},3755:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorMetadata=ErrorMetadata;var _react=_interopRequireWildcard(__webpack_require__(0));var _sections=__webpack_require__(3756);var _helper=__webpack_require__(437);var _=__webpack_require__(618);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ErrorMetadata(_ref){var error=_ref.error;var sectionsWithRows=(0,_react.useMemo)((function(){return(0,_helper.getSectionsWithRows)(_sections.ERROR_METADATA_SECTIONS,error)}),[error]);return _react.default.createElement(_.MetadataTable,{sections:sectionsWithRows})}},3756:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ERROR_METADATA_SECTIONS=void 0;var _sections=__webpack_require__(617);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ERROR_METADATA_SECTIONS=[_objectSpread({},_sections.LABELS,{required:true}),_sections.ERROR,_sections.HTTP,_sections.HOST,_sections.CONTAINER,_sections.SERVICE,_sections.PROCESS,_sections.AGENT,_sections.URL,_objectSpread({},_sections.USER,{required:true}),_sections.CUSTOM_ERROR];exports.ERROR_METADATA_SECTIONS=ERROR_METADATA_SECTIONS},3757:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Section=Section;var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(3);var _i18n=__webpack_require__(1);var _eui=__webpack_require__(2);var _KeyValueTable=__webpack_require__(1222);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Section(_ref){var keyValuePairs=_ref.keyValuePairs;if(!(0,_lodash.isEmpty)(keyValuePairs)){return _react.default.createElement(_KeyValueTable.KeyValueTable,{keyValuePairs:keyValuePairs})}return _react.default.createElement(_eui.EuiText,{size:"s"},_i18n.i18n.translate("xpack.apm.propertiesTable.agentFeature.noDataAvailableLabel",{defaultMessage:"No data available"}))}},3758:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FormattedKey=FormattedKey;exports.FormattedValue=FormattedValue;var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _lodash=__webpack_require__(3);var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _i18n=__webpack_require__(160);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EmptyValue=_styledComponents.default.span.withConfig({displayName:"EmptyValue",componentId:"sc-1g8xvnn-0"})(["color:",";text-align:left;"],_eui_theme_light.default.euiColorMediumShade);function FormattedKey(_ref){var k=_ref.k,value=_ref.value;if(value==null){return _react.default.createElement(EmptyValue,null,k)}return _react.default.createElement(_react.default.Fragment,null,k)}function FormattedValue(_ref2){var value=_ref2.value;if((0,_lodash.isObject)(value)){return _react.default.createElement("pre",null,JSON.stringify(value,null,4))}else if((0,_lodash.isBoolean)(value)||(0,_lodash.isNumber)(value)){return _react.default.createElement(_react.default.Fragment,null,String(value))}else if(!value){return _react.default.createElement(EmptyValue,null,_i18n.NOT_AVAILABLE_LABEL)}return _react.default.createElement(_react.default.Fragment,null,value)}},3759:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LibraryStacktrace=LibraryStacktrace;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _Stackframe=__webpack_require__(1223);var _variables=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FramesContainer=(0,_styledComponents.default)("div").withConfig({displayName:"FramesContainer",componentId:"sc-15kutgr-0"})(["padding-left:",";"],(0,_variables.px)(_variables.unit));function LibraryStacktrace(_ref){var codeLanguage=_ref.codeLanguage,id=_ref.id,stackframes=_ref.stackframes;if(stackframes.length===0){return null}return _react.default.createElement(_eui.EuiAccordion,{buttonContent:_i18n.i18n.translate("xpack.apm.stacktraceTab.libraryFramesToogleButtonLabel",{defaultMessage:"{count, plural, one {# library frame} other {# library frames}}",values:{count:stackframes.length}}),id:id},_react.default.createElement(FramesContainer,null,stackframes.map((function(stackframe,i){return _react.default.createElement(_Stackframe.Stackframe,{key:i,id:i.toString(10),isLibraryFrame:true,codeLanguage:codeLanguage,stackframe:stackframe})}))))}},3760:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FrameHeading=void 0;var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _react=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _variables=__webpack_require__(26);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FileDetails=_styledComponents.default.div.withConfig({displayName:"FileDetails",componentId:"kpezkn-0"})(["color:",";padding:"," 0;font-family:",";font-size:",";"],_eui_theme_light.default.euiColorDarkShade,(0,_variables.px)(_variables.units.half),_variables.fontFamilyCode,_variables.fontSize);var LibraryFrameFileDetail=_styledComponents.default.span.withConfig({displayName:"LibraryFrameFileDetail",componentId:"kpezkn-1"})(["color:",";"],_eui_theme_light.default.euiColorDarkShade);var AppFrameFileDetail=_styledComponents.default.span.withConfig({displayName:"AppFrameFileDetail",componentId:"kpezkn-2"})(["color:",";"],_eui_theme_light.default.euiColorFullShade);var FrameHeading=function FrameHeading(_ref){var _ref2,_stackframe$line;var stackframe=_ref.stackframe,isLibraryFrame=_ref.isLibraryFrame;var FileDetail=isLibraryFrame?LibraryFrameFileDetail:AppFrameFileDetail;var lineNumber=(_ref2=(_stackframe$line=stackframe.line)===null||_stackframe$line===void 0?void 0:_stackframe$line.number)!==null&&_ref2!==void 0?_ref2:0;var name="filename"in stackframe?stackframe.filename:stackframe.classname;return _react.default.createElement(FileDetails,null,_react.default.createElement(FileDetail,null,name)," in"," ",_react.default.createElement(FileDetail,null,stackframe.function),lineNumber>0&&_react.default.createElement(_react.Fragment,null," at ",_react.default.createElement(FileDetail,null,"line ",lineNumber)))};exports.FrameHeading=FrameHeading},3761:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Context=Context;var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _lodash=__webpack_require__(3);var _polished=__webpack_require__(149);var _react=_interopRequireDefault(__webpack_require__(0));var _javascript=_interopRequireDefault(__webpack_require__(4036));var _python=_interopRequireDefault(__webpack_require__(4037));var _ruby=_interopRequireDefault(__webpack_require__(4049));var _light=_interopRequireWildcard(__webpack_require__(1415));var _styles=__webpack_require__(1423);var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _variables=__webpack_require__(26);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}(0,_light.registerLanguage)("javascript",_javascript.default);(0,_light.registerLanguage)("python",_python.default);(0,_light.registerLanguage)("ruby",_ruby.default);var ContextContainer=_styledComponents.default.div.withConfig({displayName:"ContextContainer",componentId:"urrc06-0"})(["position:relative;border-radius:",";"],_variables.borderRadius);var LINE_HEIGHT=_variables.units.eighth*9;var LineHighlight=_styledComponents.default.div.withConfig({displayName:"LineHighlight",componentId:"urrc06-1"})(["position:absolute;width:100%;height:",";top:",";pointer-events:none;background-color:",";"],(0,_variables.px)(_variables.units.eighth*9),(function(props){return(0,_variables.px)(props.lineNumber*LINE_HEIGHT)}),(0,_polished.tint)(.1,_eui_theme_light.default.euiColorWarning));var LineNumberContainer=_styledComponents.default.div.withConfig({displayName:"LineNumberContainer",componentId:"urrc06-2"})(["position:absolute;top:0;left:0;border-radius:",";background:",";"],_variables.borderRadius,(function(props){return props.isLibraryFrame?_eui_theme_light.default.euiColorEmptyShade:_eui_theme_light.default.euiColorLightestShade}));var LineNumber=_styledComponents.default.div.withConfig({displayName:"LineNumber",componentId:"urrc06-3"})(["position:relative;min-width:",";padding-left:",";padding-right:",";color:",";line-height:",";text-align:right;border-right:1px solid ",";background-color:",";&:last-of-type{border-radius:0 0 0 ",";}"],(0,_variables.px)(_variables.units.eighth*21),(0,_variables.px)(_variables.units.half),(0,_variables.px)(_variables.units.quarter),_eui_theme_light.default.euiColorMediumShade,(0,_variables.px)(_variables.unit+_variables.units.eighth),_eui_theme_light.default.euiColorLightShade,(function(props){return props.highlight?(0,_polished.tint)(.1,_eui_theme_light.default.euiColorWarning):null}),_variables.borderRadius);var LineContainer=_styledComponents.default.div.withConfig({displayName:"LineContainer",componentId:"urrc06-4"})(["overflow:auto;margin:0 0 0 ",";padding:0;background-color:",";&:last-of-type{border-radius:0 0 "," 0;}"],(0,_variables.px)(_variables.units.eighth*21),_eui_theme_light.default.euiColorEmptyShade,_variables.borderRadius);var Line=_styledComponents.default.pre.withConfig({displayName:"Line",componentId:"urrc06-5"})(["margin:0;color:inherit;background:inherit;border:0;border-radius:0;overflow:initial;padding:0 ",";line-height:",";"],(0,_variables.px)(LINE_HEIGHT),(0,_variables.px)(LINE_HEIGHT));var Code=_styledComponents.default.code.withConfig({displayName:"Code",componentId:"urrc06-6"})(["position:relative;padding:0;margin:0;white-space:pre;z-index:2;"]);function getStackframeLines(stackframe){var _stackframe$context,_stackframe$context2;var line=stackframe.line.context;var preLines=((_stackframe$context=stackframe.context)===null||_stackframe$context===void 0?void 0:_stackframe$context.pre)||[];var postLines=((_stackframe$context2=stackframe.context)===null||_stackframe$context2===void 0?void 0:_stackframe$context2.post)||[];return[].concat(_toConsumableArray(preLines),[line],_toConsumableArray(postLines))}function getStartLineNumber(stackframe){var _stackframe$context3;var preLines=(0,_lodash.size)(((_stackframe$context3=stackframe.context)===null||_stackframe$context3===void 0?void 0:_stackframe$context3.pre)||[]);return stackframe.line.number-preLines}function Context(_ref){var _stackframe$context4;var stackframe=_ref.stackframe,codeLanguage=_ref.codeLanguage,isLibraryFrame=_ref.isLibraryFrame;var lines=getStackframeLines(stackframe);var startLineNumber=getStartLineNumber(stackframe);var highlightedLineIndex=(0,_lodash.size)(((_stackframe$context4=stackframe.context)===null||_stackframe$context4===void 0?void 0:_stackframe$context4.pre)||[]);var language=codeLanguage||"javascript";return _react.default.createElement(ContextContainer,null,_react.default.createElement(LineHighlight,{lineNumber:highlightedLineIndex}),_react.default.createElement(LineNumberContainer,{isLibraryFrame:isLibraryFrame},lines.map((function(line,i){return _react.default.createElement(LineNumber,{key:line+i,highlight:highlightedLineIndex===i},i+startLineNumber,".")}))),_react.default.createElement(LineContainer,null,lines.map((function(line,i){return _react.default.createElement(_light.default,{key:line+i,language:language,style:_styles.xcode,PreTag:Line,CodeTag:Code,customStyle:{padding:null,overflowX:null}},line||"\n")}))))}},3765:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Variables=void 0;var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _variables=__webpack_require__(26);var _KeyValueTable=__webpack_require__(1222);var _flattenObject=__webpack_require__(1220);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var VariablesContainer=_styledComponents.default.div.withConfig({displayName:"VariablesContainer",componentId:"uun7h7-0"})(["background:",";border-radius:0 0 "," ",";padding:"," ",";"],_eui_theme_light.default.euiColorEmptyShade,_variables.borderRadius,_variables.borderRadius,(0,_variables.px)(_variables.units.half),(0,_variables.px)(_variables.unit));var Variables=function Variables(_ref){var vars=_ref.vars;if(!vars){return null}var flattenedVariables=(0,_flattenObject.flattenObject)(vars);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(VariablesContainer,null,_react.default.createElement(_eui.EuiAccordion,{id:"local-variables",className:"euiAccordion",buttonContent:_i18n.i18n.translate("xpack.apm.stacktraceTab.localVariablesToogleButtonLabel",{defaultMessage:"Local variables"})},_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_KeyValueTable.KeyValueTable,{keyValuePairs:flattenedVariables})))))};exports.Variables=Variables},3766:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTabs=getTabs;exports.metadataTab=exports.exceptionStacktraceTab=exports.logStacktraceTab=void 0;var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(3);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var logStacktraceTab={key:"log_stacktrace",label:_i18n.i18n.translate("xpack.apm.propertiesTable.tabs.logStacktraceLabel",{defaultMessage:"Log stack trace"})};exports.logStacktraceTab=logStacktraceTab;var exceptionStacktraceTab={key:"exception_stacktrace",label:_i18n.i18n.translate("xpack.apm.propertiesTable.tabs.exceptionStacktraceLabel",{defaultMessage:"Exception stack trace"})};exports.exceptionStacktraceTab=exceptionStacktraceTab;var metadataTab={key:"metadata",label:_i18n.i18n.translate("xpack.apm.propertiesTable.tabs.metadataLabel",{defaultMessage:"Metadata"})};exports.metadataTab=metadataTab;function getTabs(error){var _error$error$log;var hasLogStacktrace=!(0,_lodash.isEmpty)((_error$error$log=error.error.log)===null||_error$error$log===void 0?void 0:_error$error$log.stacktrace);return[].concat(_toConsumableArray(hasLogStacktrace?[logStacktraceTab]:[]),[exceptionStacktraceTab,metadataTab])}},3767:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.asAbsoluteDateTime=asAbsoluteDateTime;exports.asRelativeDateTimeRange=asRelativeDateTimeRange;exports.getDateDifference=void 0;var _momentTimezone=_interopRequireDefault(__webpack_require__(39));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function formatTimezone(momentTime){var DEFAULT_TIMEZONE_FORMAT="Z";var utcOffsetHours=momentTime.utcOffset()/60;var customTimezoneFormat=utcOffsetHours>0?"+".concat(utcOffsetHours):utcOffsetHours;var utcOffsetFormatted=Number.isInteger(utcOffsetHours)?customTimezoneFormat:DEFAULT_TIMEZONE_FORMAT;return momentTime.format("(UTC".concat(utcOffsetFormatted,")"))}function getTimeFormat(timeUnit){switch(timeUnit){case"hours":return"HH";case"minutes":return"HH:mm";case"seconds":return"HH:mm:ss";case"milliseconds":return"HH:mm:ss.SSS";default:return""}}function getDateFormat(dateUnit){switch(dateUnit){case"years":return"YYYY";case"months":return"MMM YYYY";case"days":return"MMM D, YYYY";default:return""}}var getDateDifference=function getDateDifference(start,end,unitOfTime){return end.diff(start,unitOfTime)};exports.getDateDifference=getDateDifference;function getFormatsAccordingToDateDifference(start,end){if(getDateDifference(start,end,"years")>=5){return{dateFormat:getDateFormat("years")}}if(getDateDifference(start,end,"months")>=5){return{dateFormat:getDateFormat("months")}}var dateFormatWithDays=getDateFormat("days");if(getDateDifference(start,end,"days")>1){return{dateFormat:dateFormatWithDays}}if(getDateDifference(start,end,"hours")>=5){return{dateFormat:dateFormatWithDays,timeFormat:getTimeFormat("minutes")}}if(getDateDifference(start,end,"minutes")>=5){return{dateFormat:dateFormatWithDays,timeFormat:getTimeFormat("seconds")}}return{dateFormat:dateFormatWithDays,timeFormat:getTimeFormat("milliseconds")}}function asAbsoluteDateTime(time){var timeUnit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"milliseconds";var momentTime=(0,_momentTimezone.default)(time);var formattedTz=formatTimezone(momentTime);return momentTime.format("".concat(getDateFormat("days"),", ").concat(getTimeFormat(timeUnit)," ").concat(formattedTz))}function asRelativeDateTimeRange(start,end){var momentStartTime=(0,_momentTimezone.default)(start);var momentEndTime=(0,_momentTimezone.default)(end);var _getFormatsAccordingT=getFormatsAccordingToDateDifference(momentStartTime,momentEndTime),dateFormat=_getFormatsAccordingT.dateFormat,timeFormat=_getFormatsAccordingT.timeFormat;if(timeFormat){var _startFormatted=momentStartTime.format("".concat(dateFormat,", ").concat(timeFormat));var _endFormatted=momentEndTime.format(timeFormat);var formattedTz=formatTimezone(momentStartTime);return"".concat(_startFormatted," - ").concat(_endFormatted," ").concat(formattedTz)}var startFormatted=momentStartTime.format(dateFormat);var endFormatted=momentEndTime.format(dateFormat);return"".concat(startFormatted," - ").concat(endFormatted)}},3768:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertTo=convertTo;exports.asDuration=asDuration;exports.getDurationFormatter=exports.toMicroseconds=void 0;var _i18n=__webpack_require__(1);var _moment=_interopRequireDefault(__webpack_require__(15));var _lodash=__webpack_require__(3);var _i18n2=__webpack_require__(160);var _formatters=__webpack_require__(620);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var durationUnit={hours:{label:_i18n.i18n.translate("xpack.apm.formatters.hoursTimeUnitLabel",{defaultMessage:"h"}),convert:function convert(value){return(0,_formatters.asDecimal)(_moment.default.duration(value/1e3).asHours())}},minutes:{label:_i18n.i18n.translate("xpack.apm.formatters.minutesTimeUnitLabel",{defaultMessage:"min"}),convert:function convert(value){return(0,_formatters.asDecimal)(_moment.default.duration(value/1e3).asMinutes())}},seconds:{label:_i18n.i18n.translate("xpack.apm.formatters.secondsTimeUnitLabel",{defaultMessage:"s"}),convert:function convert(value){return(0,_formatters.asDecimal)(_moment.default.duration(value/1e3).asSeconds())}},milliseconds:{label:_i18n.i18n.translate("xpack.apm.formatters.millisTimeUnitLabel",{defaultMessage:"ms"}),convert:function convert(value){return(0,_formatters.asInteger)(_moment.default.duration(value/1e3).asMilliseconds())}},microseconds:{label:_i18n.i18n.translate("xpack.apm.formatters.microsTimeUnitLabel",{defaultMessage:"μs"}),convert:function convert(value){return(0,_formatters.asInteger)(value)}}};function convertTo(_ref){var unit=_ref.unit,microseconds=_ref.microseconds,_ref$defaultValue=_ref.defaultValue,defaultValue=_ref$defaultValue===void 0?_i18n2.NOT_AVAILABLE_LABEL:_ref$defaultValue;var duration=durationUnit[unit];if(!duration||microseconds==null){return{value:defaultValue,formatted:defaultValue}}var convertedValue=duration.convert(microseconds);return{value:convertedValue,unit:duration.label,formatted:"".concat(convertedValue," ").concat(duration.label)}}var toMicroseconds=function toMicroseconds(value,timeUnit){return _moment.default.duration(value,timeUnit).asMilliseconds()*1e3};exports.toMicroseconds=toMicroseconds;function getDurationUnitKey(max){if(max>toMicroseconds(1,"hours")){return"hours"}if(max>toMicroseconds(1,"minutes")){return"minutes"}if(max>toMicroseconds(10,"seconds")){return"seconds"}if(max>toMicroseconds(10,"milliseconds")){return"milliseconds"}return"microseconds"}var getDurationFormatter=(0,_lodash.memoize)((function(max){var unit=getDurationUnitKey(max);return function(value){var _ref2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},defaultValue=_ref2.defaultValue;return convertTo({unit:unit,microseconds:value,defaultValue:defaultValue})}}));exports.getDurationFormatter=getDurationFormatter;function asDuration(value){var _ref3=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref3$defaultValue=_ref3.defaultValue,defaultValue=_ref3$defaultValue===void 0?_i18n2.NOT_AVAILABLE_LABEL:_ref3$defaultValue;if(value==null){return defaultValue}var formatter=getDurationFormatter(value);return formatter(value,{defaultValue:defaultValue}).formatted}},3769:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.asDynamicBytes=exports.getFixedByteFormatter=void 0;var _lodash=__webpack_require__(3);var _formatters=__webpack_require__(620);function asKilobytes(value){return"".concat((0,_formatters.asDecimal)(value/1e3)," KB")}function asMegabytes(value){return"".concat((0,_formatters.asDecimal)(value/1e6)," MB")}function asGigabytes(value){return"".concat((0,_formatters.asDecimal)(value/1e9)," GB")}function asTerabytes(value){return"".concat((0,_formatters.asDecimal)(value/1e12)," TB")}function asBytes(value){return"".concat((0,_formatters.asDecimal)(value)," B")}var bailIfNumberInvalid=function bailIfNumberInvalid(cb){return function(val){if(val===null||val===undefined||isNaN(val)){return""}return cb(val)}};var getFixedByteFormatter=(0,_lodash.memoize)((function(max){var formatter=unmemoizedFixedByteFormatter(max);return bailIfNumberInvalid(formatter)}));exports.getFixedByteFormatter=getFixedByteFormatter;var asDynamicBytes=bailIfNumberInvalid((function(value){return unmemoizedFixedByteFormatter(value)(value)}));exports.asDynamicBytes=asDynamicBytes;var unmemoizedFixedByteFormatter=function unmemoizedFixedByteFormatter(max){if(max>1e12){return asTerabytes}if(max>1e9){return asGigabytes}if(max>1e6){return asMegabytes}if(max>1e3){return asKilobytes}return asBytes}},3770:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HttpStatusBadge=HttpStatusBadge;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(2);var _statusCodes=__webpack_require__(3771);var _httpStatusCodeToColor=__webpack_require__(1226);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function HttpStatusBadge(_ref){var status=_ref.status;var label=_i18n.i18n.translate("xpack.apm.transactionDetails.statusCode",{defaultMessage:"Status code"});return _react.default.createElement(_eui.EuiToolTip,{content:label},_react.default.createElement(_eui.EuiBadge,{color:(0,_httpStatusCodeToColor.httpStatusCodeToColor)(status)||"default"},status," ",_statusCodes.statusCodes[status.toString()]))}},3771:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.statusCodes=void 0;var statusCodes={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",511:"Network Authentication Required","1xx":"**Informational**","2xx":"**Successful**","3xx":"**Redirection**","4xx":"**Client Error**","5xx":"**Server Error**","7xx":"**Developer Error**"};exports.statusCodes=statusCodes},3772:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExceptionStacktrace=ExceptionStacktrace;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _Stacktrace=__webpack_require__(438);var _CauseStacktrace=__webpack_require__(3773);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ExceptionStacktrace(_ref){var _exceptions$;var codeLanguage=_ref.codeLanguage,exceptions=_ref.exceptions;var title=(_exceptions$=exceptions[0])===null||_exceptions$===void 0?void 0:_exceptions$.message;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h4",null,title)),exceptions.map((function(ex,index){return index===0?_react.default.createElement(_Stacktrace.Stacktrace,{key:index,stackframes:ex.stacktrace,codeLanguage:codeLanguage}):_react.default.createElement(_CauseStacktrace.CauseStacktrace,{codeLanguage:codeLanguage,key:index,id:index.toString(),message:ex.message,stackframes:ex.stacktrace})})))}},3773:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CauseStacktrace=CauseStacktrace;var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(2);var _variables=__webpack_require__(26);var _=__webpack_require__(438);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Accordion=(0,_styledComponents.default)(_eui.EuiAccordion).withConfig({displayName:"Accordion",componentId:"sc-1gvaaxc-0"})(["border-top:",";"],_eui_theme_light.default.euiBorderThin);var CausedByContainer=(0,_styledComponents.default)("h5").withConfig({displayName:"CausedByContainer",componentId:"sc-1gvaaxc-1"})(["padding:"," 0;"],_eui_theme_light.default.spacerSizes.s);var CausedByHeading=(0,_styledComponents.default)("span").withConfig({displayName:"CausedByHeading",componentId:"sc-1gvaaxc-2"})(["color:",";display:block;font-size:",";font-weight:",";text-transform:uppercase;"],_eui_theme_light.default.textColors.subdued,_eui_theme_light.default.euiFontSizeXS,_eui_theme_light.default.euiFontWeightBold);var FramesContainer=(0,_styledComponents.default)("div").withConfig({displayName:"FramesContainer",componentId:"sc-1gvaaxc-3"})(["padding-left:",";"],(0,_variables.px)(_variables.unit));function CausedBy(_ref){var message=_ref.message;return _react.default.createElement(CausedByContainer,null,_react.default.createElement(CausedByHeading,null,_i18n.i18n.translate("xpack.apm.stacktraceTab.causedByFramesToogleButtonLabel",{defaultMessage:"Caused By"})),_react.default.createElement(_eui.EuiTitle,{size:"xxs"},_react.default.createElement("span",null,message)))}function CauseStacktrace(_ref2){var codeLanguage=_ref2.codeLanguage,id=_ref2.id,_ref2$message=_ref2.message,message=_ref2$message===void 0?"…":_ref2$message,_ref2$stackframes=_ref2.stackframes,stackframes=_ref2$stackframes===void 0?[]:_ref2$stackframes;if(stackframes.length===0){return _react.default.createElement(CausedBy,{message:message})}return _react.default.createElement(Accordion,{buttonContent:_react.default.createElement(CausedBy,{message:message}),id:id},_react.default.createElement(FramesContainer,null,_react.default.createElement(_.Stacktrace,{stackframes:stackframes,codeLanguage:codeLanguage})))}},3774:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SingleRect(_ref){var innerHeight=_ref.innerHeight,marginTop=_ref.marginTop,style=_ref.style,x=_ref.x,width=_ref.width;return _react.default.createElement("rect",{style:style,height:innerHeight,width:width,rx:"2px",ry:"2px",x:x,y:marginTop})}SingleRect.requiresSVG=true;SingleRect.propTypes={x:_propTypes.default.number.isRequired};var _default=SingleRect;exports.default=_default;module.exports=exports.default},3780:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceDetails=ServiceDetails;var _eui=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _ApmHeader=__webpack_require__(341);var _ServiceDetailTabs=__webpack_require__(3781);var _ServiceIntegrations=__webpack_require__(3863);var _useUrlParams2=__webpack_require__(35);var _AlertIntegrations=__webpack_require__(3870);var _useApmPluginContext=__webpack_require__(62);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ServiceDetails(_ref){var tab=_ref.tab;var plugin=(0,_useApmPluginContext.useApmPluginContext)();var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var serviceName=urlParams.serviceName;var canReadAlerts=!!plugin.core.application.capabilities.apm["alerting:show"];var canSaveAlerts=!!plugin.core.application.capabilities.apm["alerting:save"];var isAlertingPluginEnabled="alerting"in plugin.plugins;var isAlertingAvailable=isAlertingPluginEnabled&&(canReadAlerts||canSaveAlerts);return _react.default.createElement("div",null,_react.default.createElement(_ApmHeader.ApmHeader,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"l"},_react.default.createElement("h1",null,serviceName))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_ServiceIntegrations.ServiceIntegrations,{urlParams:urlParams})),isAlertingAvailable&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_AlertIntegrations.AlertIntegrations,{canReadAlerts:canReadAlerts,canSaveAlerts:canSaveAlerts})))),_react.default.createElement(_ServiceDetailTabs.ServiceDetailTabs,{tab:tab}))}},3781:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceDetailTabs=ServiceDetailTabs;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _agent_name=__webpack_require__(345);var _useAgentName2=__webpack_require__(1232);var _useApmPluginContext=__webpack_require__(62);var _useUrlParams2=__webpack_require__(35);var _EuiTabLink=__webpack_require__(1233);var _ErrorOverviewLink=__webpack_require__(1234);var _MetricOverviewLink=__webpack_require__(3782);var _ServiceMapLink=__webpack_require__(1235);var _ServiceNodeOverviewLink=__webpack_require__(3783);var _TransactionOverviewLink=__webpack_require__(439);var _ErrorGroupOverview=__webpack_require__(3784);var _ServiceMap=__webpack_require__(1237);var _ServiceMetrics=__webpack_require__(3819);var _ServiceNodeOverview=__webpack_require__(3827);var _TransactionOverview=__webpack_require__(3829);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ServiceDetailTabs(_ref){var tab=_ref.tab;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var serviceName=urlParams.serviceName;var _useAgentName=(0,_useAgentName2.useAgentName)(),agentName=_useAgentName.agentName;var serviceMapEnabled=(0,_useApmPluginContext.useApmPluginContext)().config.serviceMapEnabled;if(!serviceName){throw new Error("Service name was not defined")}var transactionsTab={link:_react.default.createElement(_TransactionOverviewLink.TransactionOverviewLink,{serviceName:serviceName},_i18n.i18n.translate("xpack.apm.serviceDetails.transactionsTabLabel",{defaultMessage:"Transactions"})),render:function render(){return _react.default.createElement(_TransactionOverview.TransactionOverview,null)},name:"transactions"};var errorsTab={link:_react.default.createElement(_ErrorOverviewLink.ErrorOverviewLink,{serviceName:serviceName},_i18n.i18n.translate("xpack.apm.serviceDetails.errorsTabLabel",{defaultMessage:"Errors"})),render:function render(){return _react.default.createElement(_ErrorGroupOverview.ErrorGroupOverview,null)},name:"errors"};var tabs=[transactionsTab,errorsTab];if((0,_agent_name.isJavaAgentName)(agentName)){var nodesListTab={link:_react.default.createElement(_ServiceNodeOverviewLink.ServiceNodeOverviewLink,{serviceName:serviceName},_i18n.i18n.translate("xpack.apm.serviceDetails.nodesTabLabel",{defaultMessage:"JVMs"})),render:function render(){return _react.default.createElement(_ServiceNodeOverview.ServiceNodeOverview,null)},name:"nodes"};tabs.push(nodesListTab)}else if(agentName&&!(0,_agent_name.isRumAgentName)(agentName)){var metricsTab={link:_react.default.createElement(_MetricOverviewLink.MetricOverviewLink,{serviceName:serviceName},_i18n.i18n.translate("xpack.apm.serviceDetails.metricsTabLabel",{defaultMessage:"Metrics"})),render:function render(){return _react.default.createElement(_ServiceMetrics.ServiceMetrics,{agentName:agentName})},name:"metrics"};tabs.push(metricsTab)}var serviceMapTab={link:_react.default.createElement(_ServiceMapLink.ServiceMapLink,{serviceName:serviceName},_i18n.i18n.translate("xpack.apm.home.serviceMapTabLabel",{defaultMessage:"Service Map"})),render:function render(){return _react.default.createElement(_ServiceMap.ServiceMap,{serviceName:serviceName})},name:"service-map"};if(serviceMapEnabled){tabs.push(serviceMapTab)}var selectedTab=tabs.find((function(serviceTab){return serviceTab.name===tab}));return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTabs,null,tabs.map((function(serviceTab){return _react.default.createElement(_EuiTabLink.EuiTabLink,{isSelected:serviceTab.name===tab,key:serviceTab.name},serviceTab.link)}))),selectedTab?selectedTab.render():null)}},3782:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetricOverviewLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(83);var _useUrlParams2=__webpack_require__(35);var _pickKeys=__webpack_require__(161);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var MetricOverviewLink=function MetricOverviewLink(_ref){var serviceName=_ref.serviceName,rest=_objectWithoutProperties(_ref,["serviceName"]);var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var persistedFilters=(0,_pickKeys.pickKeys)(urlParams,"host","containerId","podName","serviceVersion");return _react.default.createElement(_APMLink.APMLink,_extends({path:"/services/".concat(serviceName,"/metrics"),query:persistedFilters},rest))};exports.MetricOverviewLink=MetricOverviewLink},3783:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceNodeOverviewLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(83);var _useUrlParams2=__webpack_require__(35);var _pickKeys=__webpack_require__(161);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var ServiceNodeOverviewLink=function ServiceNodeOverviewLink(_ref){var serviceName=_ref.serviceName,rest=_objectWithoutProperties(_ref,["serviceName"]);var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var persistedFilters=(0,_pickKeys.pickKeys)(urlParams,"host","containerId","podName","serviceVersion");return _react.default.createElement(_APMLink.APMLink,_extends({path:"/services/".concat(serviceName,"/nodes"),query:persistedFilters},rest))};exports.ServiceNodeOverviewLink=ServiceNodeOverviewLink},3784:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorGroupOverview=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _useFetcher3=__webpack_require__(36);var _Distribution=__webpack_require__(1228);var _List=__webpack_require__(3785);var _useUrlParams2=__webpack_require__(35);var _public=__webpack_require__(78);var _typings=__webpack_require__(240);var _LocalUIFilters=__webpack_require__(241);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var ErrorGroupOverview=function ErrorGroupOverview(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,sortField=urlParams.sortField,sortDirection=urlParams.sortDirection;var _useFetcher=(0,_useFetcher3.useFetcher)((function(callApmApi){if(serviceName&&start&&end){return callApmApi({pathname:"/api/apm/services/{serviceName}/errors/distribution",params:{path:{serviceName:serviceName},query:{start:start,end:end,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,uiFilters]),errorDistributionData=_useFetcher.data;var _useFetcher2=(0,_useFetcher3.useFetcher)((function(callApmApi){var normalizedSortDirection=sortDirection==="asc"?"asc":"desc";if(serviceName&&start&&end){return callApmApi({pathname:"/api/apm/services/{serviceName}/errors",params:{path:{serviceName:serviceName},query:{start:start,end:end,sortField:sortField,sortDirection:normalizedSortDirection,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,sortField,sortDirection,uiFilters]),errorGroupListData=_useFetcher2.data;(0,_public.useTrackPageview)({app:"apm",path:"error_group_overview"});(0,_public.useTrackPageview)({app:"apm",path:"error_group_overview",delay:15e3});var localUIFiltersConfig=(0,_react.useMemo)((function(){var config={filterNames:["host","containerId","podName","serviceVersion"],params:{serviceName:serviceName},projection:_typings.PROJECTION.ERROR_GROUPS};return config}),[serviceName]);if(!errorDistributionData||!errorGroupListData){return null}return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_LocalUIFilters.LocalUIFilters,localUIFiltersConfig)),_react.default.createElement(_eui.EuiFlexItem,{grow:7},_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_Distribution.ErrorDistribution,{distribution:errorDistributionData,title:_i18n.i18n.translate("xpack.apm.serviceDetails.metrics.errorOccurrencesChartTitle",{defaultMessage:"Error occurrences"})})))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h3",null,"Errors")),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_List.ErrorGroupList,{items:errorGroupListData})))))};exports.ErrorGroupOverview=ErrorGroupOverview},3785:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorGroupList=void 0;var _eui=__webpack_require__(2);var _numeral=_interopRequireDefault(__webpack_require__(164));var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _i18n2=__webpack_require__(160);var _variables=__webpack_require__(26);var _useUrlParams2=__webpack_require__(35);var _ManagedTable=__webpack_require__(239);var _ErrorDetailLink=__webpack_require__(1236);var _TimestampTooltip=__webpack_require__(287);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GroupIdLink=(0,_styledComponents.default)(_ErrorDetailLink.ErrorDetailLink).withConfig({displayName:"GroupIdLink",componentId:"sc-12m0avg-0"})(["font-family:",";"],_variables.fontFamilyCode);var MessageAndCulpritCell=_styledComponents.default.div.withConfig({displayName:"MessageAndCulpritCell",componentId:"sc-12m0avg-1"})(["",";"],(0,_variables.truncate)("100%"));var MessageLink=(0,_styledComponents.default)(_ErrorDetailLink.ErrorDetailLink).withConfig({displayName:"MessageLink",componentId:"sc-12m0avg-2"})(["font-family:",";font-size:",";",";"],_variables.fontFamilyCode,_variables.fontSizes.large,(0,_variables.truncate)("100%"));var Culprit=_styledComponents.default.div.withConfig({displayName:"Culprit",componentId:"sc-12m0avg-3"})(["font-family:",";"],_variables.fontFamilyCode);var ErrorGroupList=function ErrorGroupList(props){var items=props.items;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),serviceName=_useUrlParams.urlParams.serviceName;if(!serviceName){throw new Error("Service name is required")}var columns=(0,_react.useMemo)((function(){return[{name:_i18n.i18n.translate("xpack.apm.errorsTable.groupIdColumnLabel",{defaultMessage:"Group ID"}),field:"groupId",sortable:false,width:(0,_variables.px)(_variables.unit*6),render:function render(groupId){return _react.default.createElement(GroupIdLink,{serviceName:serviceName,errorGroupId:groupId},groupId.slice(0,5)||_i18n2.NOT_AVAILABLE_LABEL)}},{name:_i18n.i18n.translate("xpack.apm.errorsTable.errorMessageAndCulpritColumnLabel",{defaultMessage:"Error message and culprit"}),field:"message",sortable:false,width:"50%",render:function render(message,item){return _react.default.createElement(MessageAndCulpritCell,null,_react.default.createElement(_eui.EuiToolTip,{id:"error-message-tooltip",content:message||_i18n2.NOT_AVAILABLE_LABEL},_react.default.createElement(MessageLink,{serviceName:serviceName,errorGroupId:item.groupId},message||_i18n2.NOT_AVAILABLE_LABEL)),_react.default.createElement("br",null),_react.default.createElement(_eui.EuiToolTip,{id:"error-culprit-tooltip",content:item.culprit||_i18n2.NOT_AVAILABLE_LABEL},_react.default.createElement(Culprit,null,item.culprit||_i18n2.NOT_AVAILABLE_LABEL)))}},{name:"",field:"handled",sortable:false,align:"right",render:function render(isUnhandled){return isUnhandled===false&&_react.default.createElement(_eui.EuiBadge,{color:"warning"},_i18n.i18n.translate("xpack.apm.errorsTable.unhandledLabel",{defaultMessage:"Unhandled"}))}},{name:_i18n.i18n.translate("xpack.apm.errorsTable.occurrencesColumnLabel",{defaultMessage:"Occurrences"}),field:"occurrenceCount",sortable:true,dataType:"number",render:function render(value){return value?(0,_numeral.default)(value).format("0.[0]a"):_i18n2.NOT_AVAILABLE_LABEL}},{field:"latestOccurrenceAt",sortable:true,name:_i18n.i18n.translate("xpack.apm.errorsTable.latestOccurrenceColumnLabel",{defaultMessage:"Latest occurrence"}),align:"right",render:function render(value){return value?_react.default.createElement(_TimestampTooltip.TimestampTooltip,{time:value,timeUnit:"minutes"}):_i18n2.NOT_AVAILABLE_LABEL}}]}),[serviceName]);return _react.default.createElement(_ManagedTable.ManagedTable,{noItemsMessage:_i18n.i18n.translate("xpack.apm.errorsTable.noErrorsLabel",{defaultMessage:"No errors were found"}),items:items,columns:columns,initialPageSize:25,initialSortField:"occurrenceCount",initialSortDirection:"desc",sortItems:false})};exports.ErrorGroupList=ErrorGroupList},3786:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Filter=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _FilterBadgeList=__webpack_require__(3787);var _variables=__webpack_require__(26);var _FilterTitleButton=__webpack_require__(3788);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var Popover=(0,_styledComponents.default)(_eui.EuiPopover).attrs((function(){return{anchorClassName:"anchor"}})).withConfig({displayName:"Popover",componentId:"sc-92gggq-0"})([".anchor{display:block;}"]);var SelectContainer=_styledComponents.default.div.withConfig({displayName:"SelectContainer",componentId:"sc-92gggq-1"})(["width:",";"],(0,_variables.px)(_variables.unit*16));var Counter=_styledComponents.default.div.withConfig({displayName:"Counter",componentId:"sc-92gggq-2"})(["border-radius:",";background:",";padding:0 ",";"],_eui_theme_light.default.euiBorderRadius,_eui_theme_light.default.euiColorLightShade,_eui_theme_light.default.paddingSizes.xs);var ApplyButton=(0,_styledComponents.default)(_eui.EuiButton).withConfig({displayName:"ApplyButton",componentId:"sc-92gggq-3"})(["align-self:flex-end;"]);var FlexItem=(0,_styledComponents.default)(_eui.EuiFlexItem).withConfig({displayName:"FlexItem",componentId:"sc-92gggq-4"})(["flex-basis:auto !important;"]);var Filter=function Filter(_ref){var name=_ref.name,title=_ref.title,options=_ref.options,onChange=_ref.onChange,value=_ref.value,showCount=_ref.showCount;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),showPopover=_useState2[0],setShowPopover=_useState2[1];var toggleShowPopover=function toggleShowPopover(){return setShowPopover((function(show){return!show}))};var button=_react.default.createElement(_FilterTitleButton.FilterTitleButton,{onClick:toggleShowPopover},title);var items=(0,_react.useMemo)((function(){return options.map((function(option){return{label:option.name,append:showCount?_react.default.createElement(Counter,null,_react.default.createElement(_eui.EuiText,{size:"xs"},option.count)):null,checked:value.includes(option.name)?"on":undefined}}))}),[value,options,showCount]);var _useState3=(0,_react.useState)(items),_useState4=_slicedToArray(_useState3,2),visibleOptions=_useState4[0],setVisibleOptions=_useState4[1];(0,_react.useEffect)((function(){setVisibleOptions(items)}),[items]);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(Popover,{id:"local-filter-".concat(name),closePopover:toggleShowPopover,button:button,isOpen:showPopover,panelPaddingSize:"s",anchorPosition:"downLeft"},_react.default.createElement(_eui.EuiSelectable,{onChange:function onChange(selectedOptions){setVisibleOptions(selectedOptions)},options:visibleOptions,searchable:true},(function(list,search){return _react.default.createElement(SelectContainer,null,_react.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"none"},_react.default.createElement(FlexItem,{grow:true},_react.default.createElement(_eui.EuiTitle,{size:"xxxs",textTransform:"uppercase"},_react.default.createElement("h4",null,_i18n.i18n.translate("xpack.apm.applyFilter",{defaultMessage:"Apply {title} filter",values:{title:title}}))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"none"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),search,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),list,_react.default.createElement(_eui.EuiSpacer,{size:"s"})),_react.default.createElement(FlexItem,{grow:false},_react.default.createElement(ApplyButton,{color:"primary",fill:true,onClick:function onClick(){var newValue=visibleOptions.filter((function(option){return option.checked==="on"})).map((function(option){return option.label}));setShowPopover(false);onChange(newValue)},size:"s"},_i18n.i18n.translate("xpack.apm.applyOptions",{defaultMessage:"Apply options"})))))}))),value.length?_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_FilterBadgeList.FilterBadgeList,{onRemove:function onRemove(val){onChange(value.filter((function(v){return val!==v})))},value:value}),_react.default.createElement(_eui.EuiSpacer,{size:"s"})):null)};exports.Filter=Filter},3787:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBadgeList=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _variables=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BadgeText=_styledComponents.default.div.withConfig({displayName:"BadgeText",componentId:"sc-8w0u72-0"})(["display:inline-block;",";vertical-align:middle;"],(0,_variables.truncate)((0,_variables.px)(_variables.unit*8)));var FilterBadgeList=function FilterBadgeList(_ref){var onRemove=_ref.onRemove,value=_ref.value;return _react.default.createElement(_eui.EuiFlexGrid,{gutterSize:"s"},value.map((function(val){return _react.default.createElement(_eui.EuiFlexItem,{key:val,grow:false},_react.default.createElement("button",{type:"button",onClick:function onClick(){onRemove(val)}},_react.default.createElement(_eui.EuiBadge,{color:"hollow"},_react.default.createElement(BadgeText,null,val),_react.default.createElement(_eui.EuiIcon,{type:"cross"}))))})))};exports.FilterBadgeList=FilterBadgeList},3788:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterTitleButton=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _styledComponents=_interopRequireDefault(__webpack_require__(12));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Button=(0,_styledComponents.default)(_eui.EuiButtonEmpty).attrs((function(){return{contentProps:{className:"alignLeft"},color:"text"}})).withConfig({displayName:"Button",componentId:"oltwer-0"})(["width:100%;.alignLeft{justify-content:flex-start;padding-left:0;}"]);var FilterTitleButton=function FilterTitleButton(props){return _react.default.createElement(Button,props,_react.default.createElement(_eui.EuiTitle,{size:"xxxs",textTransform:"uppercase"},_react.default.createElement("h4",null,props.children)))};exports.FilterTitleButton=FilterTitleButton},3789:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useLocalUIFilters=useLocalUIFilters;var _lodash=__webpack_require__(3);var _useFetcher2=__webpack_require__(36);var _useUrlParams2=__webpack_require__(35);var _config=__webpack_require__(616);var _history=__webpack_require__(82);var _url_helpers=__webpack_require__(71);var _helpers=__webpack_require__(614);var _pickKeys=__webpack_require__(161);var _useCallApi=__webpack_require__(3790);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getInitialData=function getInitialData(filterNames){return filterNames.map((function(filterName){return _objectSpread({options:[]},_config.localUIFilters[filterName])}))};function useLocalUIFilters(_ref){var projection=_ref.projection,filterNames=_ref.filterNames,params=_ref.params;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),uiFilters=_useUrlParams.uiFilters,urlParams=_useUrlParams.urlParams;var callApi=(0,_useCallApi.useCallApi)();var values=_pickKeys.pickKeys.apply(void 0,[uiFilters].concat(_toConsumableArray(filterNames)));var setFilterValue=function setFilterValue(name,value){var search=(0,_lodash.omit)((0,_url_helpers.toQuery)(_history.history.location.search),name);_history.history.push(_objectSpread({},_history.history.location,{search:(0,_url_helpers.fromQuery)((0,_helpers.removeUndefinedProps)(_objectSpread({},search,_defineProperty({},name,value.length?value.join(","):undefined))))}))};var clearValues=function clearValues(){var search=(0,_lodash.omit)((0,_url_helpers.toQuery)(_history.history.location.search),filterNames);_history.history.push(_objectSpread({},_history.history.location,{search:(0,_url_helpers.fromQuery)(search)}))};var _useFetcher=(0,_useFetcher2.useFetcher)((function(){return callApi({method:"GET",pathname:"/api/apm/ui_filters/local_filters/".concat(projection),query:_objectSpread({uiFilters:JSON.stringify(uiFilters),start:urlParams.start,end:urlParams.end,filterNames:JSON.stringify(filterNames)},params)})}),[callApi,projection,uiFilters,urlParams.start,urlParams.end,filterNames,params]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?getInitialData(filterNames):_useFetcher$data,status=_useFetcher.status;var filters=data.map((function(filter){return _objectSpread({},filter,{value:values[filter.name]||[]})}));return{filters:filters,status:status,setFilterValue:setFilterValue,clearValues:clearValues}}},3790:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useCallApi=useCallApi;var _react=__webpack_require__(0);var _callApi=__webpack_require__(286);var _useApmPluginContext=__webpack_require__(62);function useCallApi(){var http=(0,_useApmPluginContext.useApmPluginContext)().core.http;return(0,_react.useMemo)((function(){return function(options){return(0,_callApi.callApi)(http,options)}}),[http])}},3791:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isValidPlatinumLicense=isValidPlatinumLicense;exports.invalidLicenseMessage=void 0;var _i18n=__webpack_require__(1);var _elasticsearch_fieldnames=__webpack_require__(81);function isValidPlatinumLicense(license){return license.isActive&&license.hasAtLeast("platinum")}var invalidLicenseMessage=_i18n.i18n.translate("xpack.apm.serviceMap.invalidLicenseMessage",{defaultMessage:"In order to access Service Maps, you must be subscribed to an Elastic Platinum license. With it, you'll have the ability to visualize your entire application stack along with your APM data."});exports.invalidLicenseMessage=invalidLicenseMessage},3792:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InvalidLicenseNotification=InvalidLicenseNotification;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _useApmPluginContext2=__webpack_require__(62);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function InvalidLicenseNotification(){var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),core=_useApmPluginContext.core;var manageLicenseURL=core.http.basePath.prepend("/app/kibana#/management/elasticsearch/license_management");return _react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"alert",iconColor:"warning",title:_react.default.createElement("h1",null,_i18n.i18n.translate("xpack.apm.invalidLicense.title",{defaultMessage:"Invalid License"})),body:_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.invalidLicense.message",{defaultMessage:"The APM UI is not available because your current license has expired or is no longer valid."})),actions:[_react.default.createElement(_eui.EuiButton,{href:manageLicenseURL},_i18n.i18n.translate("xpack.apm.invalidLicense.licenseManagementLink",{defaultMessage:"Manage your license"}))]})}},3793:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BetaBadge=BetaBadge;var _eui=__webpack_require__(2);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BetaBadgeContainer=_styledComponents.default.div.withConfig({displayName:"BetaBadgeContainer",componentId:"sc-1p2g2w1-0"})(["right:",";position:absolute;top:",";z-index:1;"],_eui_theme_light.default.gutterTypes.gutterMedium,_eui_theme_light.default.gutterTypes.gutterSmall);function BetaBadge(){return _react.default.createElement(BetaBadgeContainer,null,_react.default.createElement(_eui.EuiBetaBadge,{label:_i18n.i18n.translate("xpack.apm.serviceMap.betaBadge",{defaultMessage:"Beta"}),tooltipContent:_i18n.i18n.translate("xpack.apm.serviceMap.betaTooltipMessage",{defaultMessage:"This feature is currently in beta. If you encounter any bugs or have feedback, please open an issue or visit our discussion forum."})}))}},3794:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useKibanaUrl=useKibanaUrl;var _url=_interopRequireDefault(__webpack_require__(84));var _useApmPluginContext2=__webpack_require__(62);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function useKibanaUrl(path,hash){var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),core=_useApmPluginContext.core;return _url.default.format({pathname:core.http.basePath.prepend(path),hash:hash})}},3795:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Controls=Controls;var _eui=__webpack_require__(2);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _Cytoscape=__webpack_require__(441);var _cytoscapeOptions=__webpack_require__(442);var _APMLink=__webpack_require__(83);var _useUrlParams2=__webpack_require__(35);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var ControlsContainer=(0,_styledComponents.default)("div").withConfig({displayName:"ControlsContainer",componentId:"nyuhsx-0"})(["left:",";position:absolute;top:",";z-index:1;"],_eui_theme_light.default.gutterTypes.gutterMedium,_eui_theme_light.default.gutterTypes.gutterSmall);var Button=(0,_styledComponents.default)(_eui.EuiButtonIcon).withConfig({displayName:"Button",componentId:"nyuhsx-1"})(["display:block;margin:",";"],_eui_theme_light.default.paddingSizes.xs);var ZoomInButton=(0,_styledComponents.default)(Button).withConfig({displayName:"ZoomInButton",componentId:"nyuhsx-2"})(["margin-bottom:",";"],_eui_theme_light.default.paddingSizes.s);var Panel=(0,_styledComponents.default)(_eui.EuiPanel).withConfig({displayName:"Panel",componentId:"nyuhsx-3"})(["margin-bottom:",";"],_eui_theme_light.default.paddingSizes.s);var duration=parseInt(_eui_theme_light.default.euiAnimSpeedFast,10);var steps=5;function doZoom(cy,increment){if(cy){var level=cy.zoom()+increment;var primaryCenter=cy.nodes(".primary").position();var _cy$nodes$boundingBox=cy.nodes().boundingBox({}),x1=_cy$nodes$boundingBox.x1,y1=_cy$nodes$boundingBox.y1,w=_cy$nodes$boundingBox.w,h=_cy$nodes$boundingBox.h;var graphCenter={x:x1+w/2,y:y1+h/2};cy.animate({duration:duration,zoom:{level:level,position:primaryCenter||graphCenter}})}}function Controls(){var _urlParams$kuery;var cy=(0,_react.useContext)(_Cytoscape.CytoscapeContext);var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var currentSearch=(_urlParams$kuery=urlParams.kuery)!==null&&_urlParams$kuery!==void 0?_urlParams$kuery:"";var _useState=(0,_react.useState)(cy&&cy.zoom()||1),_useState2=_slicedToArray(_useState,2),zoom=_useState2[0],setZoom=_useState2[1];(0,_react.useEffect)((function(){if(cy){cy.on("zoom",(function(event){setZoom(event.cy.zoom())}))}}),[cy]);function center(){if(cy){var eles=cy.nodes();cy.animate(_objectSpread({},_cytoscapeOptions.animationOptions,{center:{eles:eles},fit:{eles:eles,padding:_cytoscapeOptions.nodeHeight}}))}}function zoomIn(){doZoom(cy,increment)}function zoomOut(){doZoom(cy,-increment)}if(!cy){return null}var maxZoom=cy.maxZoom();var isMaxZoom=zoom===maxZoom;var minZoom=cy.minZoom();var isMinZoom=zoom===minZoom;var increment=(maxZoom-minZoom)/steps;var centerLabel=_i18n.i18n.translate("xpack.apm.serviceMap.center",{defaultMessage:"Center"});var viewFullMapLabel=_i18n.i18n.translate("xpack.apm.serviceMap.viewFullMap",{defaultMessage:"View full service map"});var zoomInLabel=_i18n.i18n.translate("xpack.apm.serviceMap.zoomIn",{defaultMessage:"Zoom in"});var zoomOutLabel=_i18n.i18n.translate("xpack.apm.serviceMap.zoomOut",{defaultMessage:"Zoom out"});var showViewFullMapButton=cy.nodes(".primary").length>0;return _react.default.createElement(ControlsContainer,null,_react.default.createElement(Panel,{hasShadow:true,paddingSize:"none"},_react.default.createElement(_eui.EuiToolTip,{anchorClassName:"eui-displayInline",content:zoomInLabel},_react.default.createElement(ZoomInButton,{"aria-label":zoomInLabel,color:"text",disabled:isMaxZoom,iconType:"plusInCircleFilled",onClick:zoomIn})),_react.default.createElement(_eui.EuiToolTip,{anchorClassName:"eui-displayInline",content:zoomOutLabel},_react.default.createElement(Button,{"aria-label":zoomOutLabel,color:"text",disabled:isMinZoom,iconType:"minusInCircleFilled",onClick:zoomOut}))),_react.default.createElement(Panel,{hasShadow:true,paddingSize:"none"},_react.default.createElement(_eui.EuiToolTip,{anchorClassName:"eui-displayInline",content:centerLabel},_react.default.createElement(Button,{"aria-label":centerLabel,color:"text",iconType:"crosshairs",onClick:center}))),showViewFullMapButton&&_react.default.createElement(Panel,{hasShadow:true,paddingSize:"none"},_react.default.createElement(_eui.EuiToolTip,{anchorClassName:"eui-displayInline",content:viewFullMapLabel},_react.default.createElement(Button,{"aria-label":viewFullMapLabel,color:"text",href:(0,_APMLink.getAPMHref)("/service-map",currentSearch,urlParams),iconType:"apps"}))))}},3797:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.iconForNode=iconForNode;exports.defaultIcon=void 0;var _agent_name=__webpack_require__(345);var _elasticsearch_fieldnames=__webpack_require__(81);var _database=_interopRequireDefault(__webpack_require__(3798));var _default=_interopRequireDefault(__webpack_require__(3799));var _documents=_interopRequireDefault(__webpack_require__(3800));var _dotNet=_interopRequireDefault(__webpack_require__(3801));var _elasticsearch=_interopRequireDefault(__webpack_require__(3802));var _globe=_interopRequireDefault(__webpack_require__(3803));var _go=_interopRequireDefault(__webpack_require__(3804));var _java=_interopRequireDefault(__webpack_require__(3805));var _nodejs=_interopRequireDefault(__webpack_require__(3806));var _php=_interopRequireDefault(__webpack_require__(3807));var _python=_interopRequireDefault(__webpack_require__(3808));var _ruby=_interopRequireDefault(__webpack_require__(3809));var _rumjs=_interopRequireDefault(__webpack_require__(3810));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var defaultIcon=_default.default;exports.defaultIcon=defaultIcon;var icons={cache:_database.default,db:_database.default,ext:_globe.default,external:_globe.default,messaging:_documents.default,resource:_globe.default};var serviceIcons={dotnet:_dotNet.default,go:_go.default,java:_java.default,"js-base":_rumjs.default,nodejs:_nodejs.default,php:_php.default,python:_python.default,ruby:_ruby.default};var isIE11=!!window.MSInputMethodContext&&!!document.documentMode;function iconForNode(node){var type=node.data(_elasticsearch_fieldnames.SPAN_TYPE);if(node.data(_elasticsearch_fieldnames.SERVICE_NAME)){var agentName=node.data(_elasticsearch_fieldnames.AGENT_NAME);var normalizedAgentName=(0,_agent_name.isRumAgentName)(agentName)?"js-base":agentName;return serviceIcons[normalizedAgentName]}else if(isIE11){return defaultIcon}else if(node.data(_elasticsearch_fieldnames.SPAN_TYPE)==="db"&&node.data(_elasticsearch_fieldnames.SPAN_SUBTYPE)==="elasticsearch"){return _elasticsearch.default}else if(icons[type]){return icons[type]}else{return defaultIcon}}},3798:function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8cGF0aCBkPSJNMiwxMiBMMTQsMTIgTDE0LDEwLjAzMDczOSBDMTIuNzc1MTAyOSwxMC42MTE1NDggMTAuNTQ2MzI1MSwxMSA4LDExIEM1LjQ1MzY3NDg2LDExIDMuMjI0ODk3MTUsMTAuNjExNTQ4IDIsMTAuMDMwNzM5IEwyLDEyIFogTTEsMTIgTDEsMyBDMSwxLjg5NTQzMDUgNC4xMzQwMDY3NSwxIDgsMSBDMTEuODY1OTkzMiwxIDE1LDEuODk1NDMwNSAxNSwzIEwxNSwxMiBDMTUsMTMuMTA0NTY5NSAxMS44NjU5OTMyLDE0IDgsMTQgQzQuMTM0MDA2NzUsMTQgMSwxMy4xMDQ1Njk1IDEsMTIgWiBNMiw5IEwxNCw5IEwxNCw3LjAzMDczOTAzIEMxMi43NzUxMDI5LDcuNjExNTQ3OTUgMTAuNTQ2MzI1MSw4IDgsOCBDNS40NTM2NzQ4Niw4IDMuMjI0ODk3MTUsNy42MTE1NDc5NSAyLDcuMDMwNzM5MDMgTDIsOSBaIE0yLDQuMDMwNzM5MDMgTDIsNiBMMTQsNiBMMTQsNC4wMzA3MzkwMyBDMTIuNzc1MTAyOSw0LjYxMTU0Nzk1IDEwLjU0NjMyNTEsNSA4LDUgQzUuNDUzNjc0ODYsNSAzLjIyNDg5NzE1LDQuNjExNTQ3OTUgMiw0LjAzMDczOTAzIFogTTEyLjY3NTAyNjMsMi41NDczMTAzOSBDMTEuNDY2OTI0NCwyLjIwMjEzODQgOS43OTQyNDM0LDIgOCwyIEM2LjIwNTc1NjYsMiA0LjUzMzA3NTYxLDIuMjAyMTM4NCAzLjMyNDk3MzY2LDIuNTQ3MzEwMzkgQzIuODMzMzQ5NTksMi42ODc3NzQ0IDIuNDQ1MTE1NzQsMi44NDUzNjYwNyAyLjE4ODYwMzg0LDMgQzIuNDQ1MTE1NzQsMy4xNTQ2MzM5MyAyLjgzMzM0OTU5LDMuMzEyMjI1NiAzLjMyNDk3MzY2LDMuNDUyNjg5NjEgQzQuNTMzMDc1NjEsMy43OTc4NjE2IDYuMjA1NzU2Niw0IDgsNCBDOS43OTQyNDM0LDQgMTEuNDY2OTI0NCwzLjc5Nzg2MTYgMTIuNjc1MDI2MywzLjQ1MjY4OTYxIEMxMy4xNjY2NTA0LDMuMzEyMjI1NiAxMy41NTQ4ODQzLDMuMTU0NjMzOTMgMTMuODExMzk2MiwzIEMxMy41NTQ4ODQzLDIuODQ1MzY2MDcgMTMuMTY2NjUwNCwyLjY4Nzc3NDQgMTIuNjc1MDI2MywyLjU0NzMxMDM5IFogTTIuMDAwMTIyMDcsNiBDMi4yNTY2MzM5Nyw2LjE1NDYzMzkzIDIuODMzMzQ5NTksNi4zMTIyMjU2IDMuMzI0OTczNjYsNi40NTI2ODk2MSBDNC41MzMwNzU2MSw2Ljc5Nzg2MTYgNi4yMDU3NTY2LDcgOCw3IEM5Ljc5NDI0MzQsNyAxMS40NjY5MjQ0LDYuNzk3ODYxNiAxMi42NzUwMjYzLDYuNDUyNjg5NjEgQzEzLjE2NjY1MDQsNi4zMTIyMjU2IDEzLjc0NTI1ODEsNi4xNTQ2MzM5MyAxNC4wMDE3Nyw2IEMxNC4wMDE3Nyw2IDIuMDAwMTIyMDcsNiAyLjAwMDEyMjA3LDYgWiBNMi4wMDAxMjIwNyw5IEMyLjI1NjYzMzk3LDkuMTU0NjMzOTMgMi44MzMzNDk1OSw5LjMxMjIyNTYgMy4zMjQ5NzM2Niw5LjQ1MjY4OTYxIEM0LjUzMzA3NTYxLDkuNzk3ODYxNiA2LjIwNTc1NjYsMTAgOCwxMCBDOS43OTQyNDM0LDEwIDExLjQ2NjkyNDQsOS43OTc4NjE2IDEyLjY3NTAyNjMsOS40NTI2ODk2MSBDMTMuMTY2NjUwNCw5LjMxMjIyNTYgMTMuNzQ1MjU4MSw5LjE1NDYzMzkzIDE0LjAwMTc3LDkgQzE0LjAwMTc3LDkgMi4wMDAxMjIwNyw5IDIuMDAwMTIyMDcsOSBaIE0yLjAwMDEyMjA3LDEyIEMyLjI1NjYzMzk3LDEyLjE1NDYzMzkgMi44MzMzNDk1OSwxMi4zMTIyMjU2IDMuMzI0OTczNjYsMTIuNDUyNjg5NiBDNC41MzMwNzU2MSwxMi43OTc4NjE2IDYuMjA1NzU2NiwxMyA4LDEzIEM5Ljc5NDI0MzQsMTMgMTEuNDY2OTI0NCwxMi43OTc4NjE2IDEyLjY3NTAyNjMsMTIuNDUyNjg5NiBDMTMuMTY2NjUwNCwxMi4zMTIyMjU2IDEzLjc0NTI1ODEsMTIuMTU0NjMzOSAxNC4wMDE3NywxMiBDMTQuMDAxNzcsMTIgMi4wMDAxMjIwNywxMiAyLjAwMDEyMjA3LDEyIFoiLz4KPC9zdmc+Cg=="},3799:function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTE2Ljc1IDYuMTY1YTEuNSAxLjUgMCAwMC0xLjUgMGwtNy4zOTIgNC4yNjhhMS41IDEuNSAwIDAwLS43NSAxLjN2OC41MzVhMS41IDEuNSAwIDAwLjc1IDEuMjk5bDcuMzkyIDQuMjY4YTEuNSAxLjUgMCAwMDEuNSAwbDcuMzkyLTQuMjY4YTEuNSAxLjUgMCAwMC43NS0xLjI5OXYtOC41MzZhMS41IDEuNSAwIDAwLS43NS0xLjI5OUwxNi43NSA2LjE2NXptLjc1LTEuMjk5bDcuMzkyIDQuMjY4YTMgMyAwIDAxMS41IDIuNTk4djguNTM2YTMgMyAwIDAxLTEuNSAyLjU5OEwxNy41IDI3LjEzNGEzIDMgMCAwMS0zIDBsLTcuMzkyLTQuMjY4YTMgMyAwIDAxLTEuNS0yLjU5OHYtOC41MzZhMyAzIDAgMDExLjUtMi41OThMMTQuNSA0Ljg2NmEzIDMgMCAwMTMgMHoiIGZpbGw9IiM5OEEyQjMiLz4KPC9zdmc+Cg=="},3800:function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOC44IDBjLjI3NCAwIC41MzcuMTEzLjcyNi4zMTJsMy4yIDMuNDI4Yy4xNzYuMTg2LjI3NC40MzMuMjc0LjY4OVYxM2ExIDEgMCAwMS0xIDFIMmExIDEgMCAwMS0xLTFWMWExIDEgMCAwMTEtMWg2Ljh6TTEyIDVIOC41YS41LjUgMCAwMS0uNS0uNVYxSDJ2MTJoMTBWNXptLTcuNSA2YS41LjUgMCAxMTAtMWg1YS41LjUgMCAxMTAgMWgtNXptMC0zYS41LjUgMCAwMTAtMWg1YS41LjUgMCAxMTAgMWgtNXptMSA4YS41LjUgMCAxMTAtMUgxNFY2LjVhLjUuNSAwIDExMSAwVjE1YTEgMSAwIDAxLTEgMUg1LjV6Ij48L3BhdGg+PC9zdmc+Cg=="},3801:function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTS45MDIgMjEuODU2YS44NjMuODYzIDAgMDEtLjY0LS4yNy44ODcuODg3IDAgMDEtLjI2Mi0uNjQuOS45IDAgMDEuMjYyLS42NDMuODU3Ljg1NyAwIDAxLjY0LS4yNzUuODc1Ljg3NSAwIDAxLjY0LjI3Ni44OTIuODkyIDAgMDEuMjY5LjY0MS44ODEuODgxIDAgMDEtLjI2OS42NDIuODg1Ljg4NSAwIDAxLS42NC4yN3pNMTMuNjE3IDIxLjY5NmgtMS42NzZsLTUuOTk2LTkuMzI5YTMuODU3IDMuODU3IDAgMDEtLjM3LS43MzFoLS4wNTJjLjA1Ny41MzMuMDc4IDEuMDY4LjA2NCAxLjYwNHY4LjQ1Nkg0LjIyNFYxMGgxLjc3Mmw1LjgzNiA5LjE2MmMuMjQzLjM4LjQwMS42NDEuNDc0Ljc4MmguMDMyYTEyLjQwOSAxMi40MDkgMCAwMS0uMDg0LTEuNzJWMTBoMS4zNjN2MTEuNjk2ek0yMi44NDMgMjEuNjk2aC02LjJWMTBoNS45MTJ2MS4yMzhoLTQuNTE3djMuODg4aDQuMjF2MS4yMzJoLTQuMjF2NC4wNTVoNC44MTFsLS4wMDYgMS4yODN6TTMyIDExLjIzOGgtMy4zOTJ2MTAuNDU4aC0xLjM2M1YxMS4yMzhoLTMuMzUzVjEwSDMydjEuMjM4eiIgZmlsbD0iIzYyMUVFNSIvPgo8L3N2Zz4K"},3802:function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjbGFzcz0iZXVpSWNvbiBldWlJY29uLS14TGFyZ2UgZXVpSWNvbi1pc0xvYWRlZCIgZm9jdXNhYmxlPSJmYWxzZSIgcm9sZT0iaW1nIiBhcmlhLWhpZGRlbj0idHJ1ZSI+PGcgZmlsbD0iYmxhY2siIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggY2xhc3M9ImV1aUljb25fX2ZpbGxOZWdhdGl2ZSIgZD0iTTIgMTZjMCAxLjM4NC4xOTQgMi43Mi41MjQgNEgyMmE0IDQgMCAwMDAtOEgyLjUyNEExNS45ODQgMTUuOTg0IDAgMDAyIDE2Ij48L3BhdGg+PHBhdGggZmlsbD0iI0ZFQzUxNCIgZD0iTTI4LjkyNCA3LjY2MkExNS4zODEgMTUuMzgxIDAgMDAzMC40OCA2QzI3LjU0NyAyLjM0NiAyMy4wNSAwIDE4IDAgMTEuNjc5IDAgNi4yMzkgMy42NzggMy42NDQgOUgyNS41MWE1LjAzOSA1LjAzOSAwIDAwMy40MTMtMS4zMzgiPjwvcGF0aD48cGF0aCBmaWxsPSIjMDBCRkIzIiBkPSJNMjUuNTEgMjNIMy42NDVDNi4yNCAyOC4zMjMgMTEuNjc5IDMyIDE4IDMyYzUuMDUgMCA5LjU0Ny0yLjM0NiAxMi40OC02YTE1LjM4MSAxNS4zODEgMCAwMC0xLjU1Ni0xLjY2MkE1LjAzNCA1LjAzNCAwIDAwMjUuNTEgMjMiPjwvcGF0aD48L2c+PC9zdmc+Cg=="},3803:function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8cGF0aCBkPSJNMS4wMTg5NDQ4Miw4IEMxLjEwMjU0Njc2LDkuMDk4OTk0MDQgMS40NTk0NDA5LDEwLjEyMTU5NzEgMi4wMjE4MTc5MSwxMSBMNC40MDM2ODg0MSwxMSBDNC4xODAxOTkzMywxMC4wOTQwMTY0IDQuMDQwNzcwMTcsOS4wNzgxMjExMiA0LjAwNzY1NDQsOCBMMS4wMTg5NDQ4Miw4IFogTTEuMDE4OTQ0ODIsNyBMNC4wMDc2NTQ0LDcgQzQuMDQwNzcwMTcsNS45MjE4Nzg4OCA0LjE4MDE5OTMzLDQuOTA1OTgzNTYgNC40MDM2ODg0MSw0IEwyLjAyMTgxNzkxLDQgQzEuNDU5NDQwOSw0Ljg3ODQwMjg1IDEuMTAyNTQ2NzYsNS45MDEwMDU5NiAxLjAxODk0NDgyLDcgWiBNMTMuOTgxMDU1Miw4IEwxMC45OTIzNDU2LDggQzEwLjk1OTIyOTgsOS4wNzgxMjExMiAxMC44MTk4MDA3LDEwLjA5NDAxNjQgMTAuNTk2MzExNiwxMSBMMTIuOTc4MTgyMSwxMSBDMTMuNTQwNTU5MSwxMC4xMjE1OTcxIDEzLjg5NzQ1MzIsOS4wOTg5OTQwNCAxMy45ODEwNTUyLDggWiBNMTMuOTgxMDU1Miw3IEMxMy44OTc0NTMyLDUuOTAxMDA1OTYgMTMuNTQwNTU5MSw0Ljg3ODQwMjg1IDEyLjk3ODE4MjEsNCBMMTAuNTk2MzExNiw0IEMxMC44MTk4MDA3LDQuOTA1OTgzNTYgMTAuOTU5MjI5OCw1LjkyMTg3ODg4IDEwLjk5MjM0NTYsNyBMMTMuOTgxMDU1Miw3IFogTTUuMDA4MzA5MjcsOCBDNS4wNDUxODQ1Miw5LjEwNjc2MDAxIDUuMjAyNjA1OTEsMTAuMTI2ODMyIDUuNDM2NjcxMiwxMSBMOS41NjMzMjg4LDExIEM5Ljc5NzM5NDA5LDEwLjEyNjgzMiA5Ljk1NDgxNTQ4LDkuMTA2NzYwMDEgOS45OTE2OTA3Myw4IEw1LjAwODMwOTI3LDggWiBNNS4wMDgzMDkyNyw3IEw5Ljk5MTY5MDczLDcgQzkuOTU0ODE1NDgsNS44OTMyMzk5OSA5Ljc5NzM5NDA5LDQuODczMTY3OTkgOS41NjMzMjg4LDQgTDUuNDM2NjcxMiw0IEM1LjIwMjYwNTkxLDQuODczMTY3OTkgNS4wNDUxODQ1Miw1Ljg5MzIzOTk5IDUuMDA4MzA5MjcsNyBaIE0wLjAxNjQwMjI3NzQsOCBMMCw4IEwwLDcgTDAuMDE2NDAyMjc3NCw3IEMwLjI3MzY5NTMyLDMuMDkwOTg0MDkgMy41MjU4Nzg2NSwwIDcuNSwwIEMxMS40NzQxMjEzLDAgMTQuNzI2MzA0NywzLjA5MDk4NDA5IDE0Ljk4MzU5NzcsNyBMMTUsNyBMMTUsOCBMMTQuOTgzNTk3Nyw4IEMxNC43MjYzMDQ3LDExLjkwOTAxNTkgMTEuNDc0MTIxMywxNSA3LjUsMTUgQzMuNTI1ODc4NjUsMTUgMC4yNzM2OTUzMiwxMS45MDkwMTU5IDAuMDE2NDAyMjc3NCw4IFogTTIuODA5NTcyMTksMTIgQzMuNTUwOTg5NDUsMTIuNzcyNTkyNiA0LjQ4MTQ0MTM4LDEzLjM2MjM4NDUgNS41MjY1NzQxMywxMy42OTUwMjE4IEM1LjIwOTU4MjgxLDEzLjIzMDQ1NDEgNC45MzAwNjcyLDEyLjY1NzA3OCA0LjY5OTc0MzY3LDEyIEwyLjgwOTU3MjE5LDEyIFogTTEyLjE5MDQyNzgsMTIgTDEwLjMwMDI1NjMsMTIgQzEwLjA2OTkzMjgsMTIuNjU3MDc4IDkuNzkwNDE3MTksMTMuMjMwNDU0MSA5LjQ3MzQyNTg3LDEzLjY5NTAyMTggQzEwLjUxODU1ODYsMTMuMzYyMzg0NSAxMS40NDkwMTA1LDEyLjc3MjU5MjYgMTIuMTkwNDI3OCwxMiBaIE01Ljc2MTg1MDY5LDEyIEM2LjI0NjAwNjA4LDEzLjIzOTY5NjcgNi44OTM2NTc3OSwxNCA3LjUsMTQgQzguMTA2MzQyMjEsMTQgOC43NTM5OTM5MiwxMy4yMzk2OTY3IDkuMjM4MTQ5MzEsMTIgTDUuNzYxODUwNjksMTIgWiBNMi44MDk1NzIxOSwzIEw0LjY5OTc0MzY3LDMgQzQuOTMwMDY3MiwyLjM0MjkyMjA0IDUuMjA5NTgyODEsMS43Njk1NDU5MiA1LjUyNjU3NDEzLDEuMzA0OTc4MTggQzQuNDgxNDQxMzgsMS42Mzc2MTU1MiAzLjU1MDk4OTQ1LDIuMjI3NDA3NCAyLjgwOTU3MjE5LDMgWiBNMTIuMTkwNDI3OCwzIEMxMS40NDkwMTA1LDIuMjI3NDA3NCAxMC41MTg1NTg2LDEuNjM3NjE1NTIgOS40NzM0MjU4NywxLjMwNDk3ODE4IEM5Ljc5MDQxNzE5LDEuNzY5NTQ1OTIgMTAuMDY5OTMyOCwyLjM0MjkyMjA0IDEwLjMwMDI1NjMsMyBMMTIuMTkwNDI3OCwzIFogTTUuNzYxODUwNjksMyBMOS4yMzgxNDkzMSwzIEM4Ljc1Mzk5MzkyLDEuNzYwMzAzMzQgOC4xMDYzNDIyMSwxIDcuNSwxIEM2Ljg5MzY1Nzc5LDEgNi4yNDYwMDYwOCwxLjc2MDMwMzM0IDUuNzYxODUwNjksMyBaIi8+Cjwvc3ZnPgo="},3804:function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSIgZmlsbD0iIzAwQUREOCI+CiAgICA8cGF0aCBkPSJNMi40MTQgMTMuMTVjLS4wNjIgMC0uMDc3LS4wMzEtLjA0Ni0uMDc4bC4zMjQtLjQxN2MuMDMxLS4wNDcuMTA5LS4wNzguMTctLjA3OGg1LjUyNWMuMDYyIDAgLjA3Ny4wNDcuMDQ2LjA5M2wtLjI2My40MDJjLS4wMy4wNDctLjEwOC4wOTMtLjE1NS4wOTNsLTUuNjAxLS4wMTV6TS4wNzcgMTQuNTczYy0uMDYxIDAtLjA3Ny0uMDMtLjA0Ni0uMDc3bC4zMjUtLjQxOGMuMDMtLjA0Ni4xMDgtLjA3Ny4xNy0uMDc3aDcuMDU2Yy4wNjIgMCAuMDkzLjA0Ni4wNzguMDkzbC0uMTI0LjM3MWMtLjAxNi4wNjItLjA3OC4wOTMtLjE0LjA5M2wtNy4zMTkuMDE1em0zLjc0NSAxLjQyNGMtLjA2MiAwLS4wNzctLjA0Ni0uMDQ2LS4wOTNsLjIxNi0uMzg3Yy4wMzEtLjA0Ni4wOTMtLjA5My4xNTUtLjA5M2gzLjA5NWMuMDYyIDAgLjA5My4wNDcuMDkzLjEwOWwtLjAzMS4zNzFjMCAuMDYyLS4wNjIuMTA4LS4xMDkuMTA4bC0zLjM3My0uMDE1em0xNi4wNjItMy4xMjZjLS45NzUuMjQ4LTEuNjQuNDMzLTIuNi42ODEtLjIzMi4wNjItLjI0Ny4wNzctLjQ0OC0uMTU1LS4yMzItLjI2My0uNDAzLS40MzMtLjcyOC0uNTg4LS45NzUtLjQ4LTEuOTE4LS4zNC0yLjguMjMyLTEuMDUzLjY4MS0xLjU5NCAxLjY4Ny0xLjU3OSAyLjk0LjAxNiAxLjIzOC44NjcgMi4yNiAyLjA5IDIuNDMgMS4wNTEuMTQgMS45MzMtLjIzMiAyLjYzLTEuMDIxLjEzOS0uMTcuMjYzLS4zNTYuNDE4LS41NzNIMTMuODhjLS4zMjUgMC0uNDAyLS4yMDEtLjI5NC0uNDY0LjIwMS0uNDguNTczLTEuMjg1Ljc5LTEuNjg3YS40MTguNDE4IDAgMDEuMzg2LS4yNDdoNS42MzNjLS4wMzEuNDE3LS4wMzEuODM1LS4wOTMgMS4yNTNhNi41OTggNi41OTggMCAwMS0xLjI3IDMuMDMzYy0xLjExMyAxLjQ3LTIuNTY4IDIuMzgzLTQuNDEgMi42My0xLjUxNi4yMDEtMi45MjQtLjA5My00LjE2Mi0xLjAyLTEuMTQ1LS44NjctMS43OTUtMi4wMTMtMS45NjUtMy40MzYtLjIwMS0xLjY4Ny4yOTQtMy4yMDMgMS4zMTUtNC41MzQgMS4xLTEuNDM5IDIuNTU0LTIuMzUyIDQuMzMzLTIuNjc3IDEuNDU1LS4yNjMgMi44NDctLjA5MyA0LjEuNzU4LjgyLjU0MiAxLjQwOSAxLjI4NSAxLjc5NiAyLjE4Mi4wOTMuMTQuMDMuMjE3LS4xNTUuMjYzeiIvPgogICAgPHBhdGggZD0iTTI1LjAwNiAyMS40MjhjLTEuNDA4LS4wMy0yLjY5My0uNDMzLTMuNzc2LTEuMzYxLS45MTMtLjc5LTEuNDg1LTEuNzk1LTEuNjcxLTIuOTg3LS4yNzktMS43NDguMjAxLTMuMjk2IDEuMjUzLTQuNjczIDEuMTMtMS40ODYgMi40OTItMi4yNiA0LjMzMy0yLjU4NCAxLjU3OC0uMjc5IDMuMDY0LS4xMjQgNC40MS43ODkgMS4yMjMuODM2IDEuOTggMS45NjUgMi4xODIgMy40NS4yNjMgMi4wOS0uMzQgMy43OTItMS43OCA1LjI0Ni0xLjAyIDEuMDM3LTIuMjc0IDEuNjg3LTMuNzEzIDEuOTgxLS40MTguMDc3LS44MzYuMDkzLTEuMjM4LjE0em0zLjY4My02LjI1MWMtLjAxNi0uMjAxLS4wMTYtLjM1Ni0uMDQ3LS41MS0uMjc4LTEuNTMzLTEuNjg2LTIuNC0zLjE1Ny0yLjA1OS0xLjQzOS4zMjUtMi4zNjcgMS4yMzgtMi43MDcgMi42OTMtLjI3OSAxLjIwNy4zMDkgMi40MjkgMS40MjMgMi45MjQuODUxLjM3MSAxLjcwMi4zMjUgMi41MjItLjA5MyAxLjIyMy0uNjM0IDEuODg4LTEuNjI1IDEuOTY2LTIuOTU1eiIvPgogIDwvZz4KICA8ZGVmcz4KICAgIDxjbGlwUGF0aCBpZD0iY2xpcDAiPgogICAgICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCA5LjMzM2gzMnYxMi4yNzVIMHoiLz4KICAgIDwvY2xpcFBhdGg+CiAgPC9kZWZzPgo8L3N2Zz4K"},3805:function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMS43MjkgMjQuNzQ3cy0xLjI0My43MS44ODUuOTUxYzIuNTguMjkgMy44OTcuMjQ4IDYuNzM4LS4yOCAwIDAgLjc0OC40NiAxLjc5Mi44NTgtNi4zNzEgMi42ODUtMTQuNDE5LS4xNTUtOS40MTUtMS41M3ptLS43NzktMy41MDNzLTEuMzk0IDEuMDE0LjczNiAxLjIzMWMyLjc1NS4yOCA0LjkzLjMwMyA4LjY5NS0uNDEgMCAwIC41Mi41MiAxLjMzOC44MDMtNy43MDIgMi4yMTUtMTYuMjguMTc0LTEwLjc2OS0xLjYyNHoiIGZpbGw9IiMzMTc0QjkiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE3LjUxMiAxNS4zYzEuNTcgMS43NzgtLjQxMSAzLjM3Ny0uNDExIDMuMzc3czMuOTg2LTIuMDIzIDIuMTU1LTQuNTU3Yy0xLjcxLTIuMzYyLTMuMDItMy41MzYgNC4wNzctNy41ODMgMCAwLTExLjE0MSAyLjczNS01LjgyIDguNzYzeiIgZmlsbD0iI0NBMzEzMiIvPgogIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjUuOTM4IDI3LjMzOHMuOTIuNzQ2LTEuMDEzIDEuMzIzYy0zLjY3NyAxLjA5NS0xNS4zMDQgMS40MjUtMTguNTM0LjA0NC0xLjE2LS40OTcgMS4wMTYtMS4xODYgMS43MDEtMS4zMzIuNzE0LS4xNTEgMS4xMjItLjEyNCAxLjEyMi0uMTI0LTEuMjkxLS44OTQtOC4zNDYgMS43NTYtMy41ODMgMi41MTYgMTIuOTg4IDIuMDcxIDIzLjY3NS0uOTMyIDIwLjMwNy0yLjQyN3ptLTEzLjYxMS05LjcyNHMtNS45MTQgMS4zODEtMi4wOTQgMS44ODRjMS42MTMuMjEyIDQuODI3LjE2MyA3LjgyMy0uMDg0YTYxLjg4MyA2MS44ODMgMCAwMDQuOTA1LS42MzRzLS44NjIuMzYzLTEuNDg3Ljc4MmMtNi4wMDcgMS41NTQtMTcuNjA4LjgzLTE0LjI2OC0uNzU4IDIuODI0LTEuMzQzIDUuMTItMS4xOSA1LjEyLTEuMTl6bTEwLjYxIDUuODMxYzYuMTA1LTMuMTIgMy4yODItNi4xMTcgMS4zMTEtNS43MTNhNC43MDIgNC43MDIgMCAwMC0uNjk4LjE4NHMuMTgtLjI3Ni41MjItLjM5NWMzLjg5OC0xLjM0NyA2Ljg5NiAzLjk3NC0xLjI1NyA2LjA4MiAwIDAgLjA5NC0uMDg0LjEyMi0uMTU4eiIgZmlsbD0iIzMxNzRCOSIvPgogIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTkuMjU2IDBzMy4zOCAzLjMyNi0zLjIwNyA4LjQ0Yy01LjI4MyA0LjEwMy0xLjIwNSA2LjQ0Mi0uMDAyIDkuMTE1LTMuMDg0LTIuNzM2LTUuMzQ3LTUuMTQ0LTMuODMtNy4zODZDMTQuNDQ4IDYuODc5IDIwLjYyIDUuMjgzIDE5LjI1NyAweiIgZmlsbD0iI0NBMzEzMiIvPgogIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTIuOTI3IDMxLjljNS44Ni4zNjggMTQuODYtLjIwNSAxNS4wNzMtMi45MzIgMCAwLS40MSAxLjAzMy00Ljg0MyAxLjg1My01LjAwMi45MjYtMTEuMTcyLjgxOS0xNC44My4yMjUgMCAwIC43NS42MSA0LjYuODUzeiIgZmlsbD0iIzMxNzRCOSIvPgo8L3N2Zz4K"},3806:function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPG1hc2sgaWQ9ImEiIG1hc2tVbml0cz0idXNlclNwYWNlT25Vc2UiIHg9IjUiIHk9IjQiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyNCI+CiAgICA8cGF0aCBkPSJNMTYuMTAxIDQuMTVhMS4xNTEgMS4xNTEgMCAwMC0xLjEzOSAwTDUuNTYgOS41NzljLS4zNTguMjAxLS41NTkuNTgtLjU1OS45ODN2MTAuODc4YzAgLjQwMi4yMjMuNzgyLjU1OS45ODNsOS40MDMgNS40MjdhMS4xNTIgMS4xNTIgMCAwMDEuMTQgMGw5LjQwMy01LjQyN2MuMzU3LS4yMDEuNTU5LS41ODEuNTU5LS45ODNWMTAuNTZjMC0uNDAyLS4yMjQtLjc4Mi0uNTU5LS45ODNsLTkuNDA0LTUuNDI3eiIgZmlsbD0iI2ZmZiIvPgogIDwvbWFzaz4KICA8ZyBtYXNrPSJ1cmwoI2EpIj4KICAgIDxwYXRoIGQ9Ik0xNi4xMDEgNC4xNWExLjE1MSAxLjE1MSAwIDAwLTEuMTM5IDBMNS41NiA5LjU3OWMtLjM1OC4yMDEtLjU1OS41OC0uNTU5Ljk4M3YxMC44NzhjMCAuNDAyLjIyMy43ODIuNTU5Ljk4M2w5LjQwMyA1LjQyN2ExLjE1MiAxLjE1MiAwIDAwMS4xNCAwbDkuNDAzLTUuNDI3Yy4zNTctLjIwMS41NTktLjU4MS41NTktLjk4M1YxMC41NmMwLS40MDItLjIyNC0uNzgyLS41NTktLjk4M2wtOS40MDQtNS40Mjd6IiBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXIpIi8+CiAgICA8cGF0aCBkPSJNMjUuNTI3IDkuNTc3TDE2LjA4IDQuMTVhMS41NSAxLjU1IDAgMDAtLjI5LS4xMTJMNS4yIDIyLjE3NWMuMDg4LjEwNy4xOTQuMTk4LjMxMy4yNjhsOS40NDggNS40MjhjLjI2OC4xNTcuNTgxLjIwMS44NzEuMTEyTDI1Ljc3MyA5LjhhMS4xNzMgMS4xNzMgMCAwMC0uMjQ2LS4yMjN6IiBmaWxsPSJ1cmwoI3BhaW50MV9saW5lYXIpIi8+CiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI1LjU1IDIyLjQyMmMuMjY3LS4xNTcuNDY4LS40MjUuNTU4LS43MTVMMTUuNzQ0IDQuMDE3Yy0uMjY4LS4wNDUtLjU1OS0uMDIzLS44MDQuMTMzTDUuNTU5IDkuNTU2bDEwLjExOCAxOC40NWMuMTQ3LS4wMjQuMjktLjA3LjQyNC0uMTM0bDkuNDQ4LTUuNDV6IiBmaWxsPSJ1cmwoI3BhaW50Ml9saW5lYXIpIi8+CiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI1LjU1IDIyLjQyMmwtOS40MjYgNS40MjhhMS4zNDkgMS4zNDkgMCAwMS0uNDI0LjEzNGwuMTc4LjMzNSAxMC40NTMtNi4wNTN2LS4xMzRsLS4yNjgtLjQ0N2MtLjA0NC4zMTMtLjI0NS41OC0uNTE0LjczN3oiIGZpbGw9InVybCgjcGFpbnQzX2xpbmVhcikiLz4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjUuNTUgMjIuNDIybC05LjQyNiA1LjQyOGExLjM0OSAxLjM0OSAwIDAxLS40MjQuMTM0bC4xNzguMzM1IDEwLjQ1My02LjA1M3YtLjEzNGwtLjI2OC0uNDQ3Yy0uMDQ0LjMxMy0uMjQ1LjU4LS41MTQuNzM3eiIgZmlsbD0idXJsKCNwYWludDRfbGluZWFyKSIvPgogIDwvZz4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhciIgeDE9IjE5LjM2MyIgeTE9IjguMTk3IiB4Mj0iOS4wNTYiIHkyPSIyNC4zOTIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzQxODczRiIvPgogICAgICA8c3RvcCBvZmZzZXQ9Ii4zMjkiIHN0b3AtY29sb3I9IiM0MThCM0QiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuNjM1IiBzdG9wLWNvbG9yPSIjNDE5NjM3Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iLjkzMiIgc3RvcC1jb2xvcj0iIzNGQTkyRCIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMzRkFFMkEiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MV9saW5lYXIiIHgxPSIxNC4xMDQiIHkxPSIxNy4yNzMiIHgyPSIzOS45MTgiIHkyPSIzLjI0OSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBvZmZzZXQ9Ii4xMzgiIHN0b3AtY29sb3I9IiM0MTg3M0YiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuNDAzIiBzdG9wLWNvbG9yPSIjNTRBMDQ0Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iLjcxNCIgc3RvcC1jb2xvcj0iIzY2Qjg0OCIvPgogICAgICA8c3RvcCBvZmZzZXQ9Ii45MDgiIHN0b3AtY29sb3I9IiM2Q0MwNEEiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50Ml9saW5lYXIiIHgxPSI0LjY1NyIgeTE9IjE2IiB4Mj0iMjYuNDE2IiB5Mj0iMTYiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIuMDkyIiBzdG9wLWNvbG9yPSIjNkNDMDRBIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iLjI4NiIgc3RvcC1jb2xvcj0iIzY2Qjg0OCIvPgogICAgICA8c3RvcCBvZmZzZXQ9Ii41OTciIHN0b3AtY29sb3I9IiM1NEEwNDQiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuODYyIiBzdG9wLWNvbG9yPSIjNDE4NzNGIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDNfbGluZWFyIiB4MT0iNC42NTciIHkxPSIyNS4wMiIgeDI9IjI2LjQxNiIgeTI9IjI1LjAyIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIG9mZnNldD0iLjA5MiIgc3RvcC1jb2xvcj0iIzZDQzA0QSIvPgogICAgICA8c3RvcCBvZmZzZXQ9Ii4yODYiIHN0b3AtY29sb3I9IiM2NkI4NDgiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuNTk3IiBzdG9wLWNvbG9yPSIjNTRBMDQ0Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iLjg2MiIgc3RvcC1jb2xvcj0iIzQxODczRiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ0X2xpbmVhciIgeDE9IjI5LjU4NiIgeTE9IjcuNjgzIiB4Mj0iMjQuMDczIiB5Mj0iMzYuNTY4IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiM0MTg3M0YiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuMzI5IiBzdG9wLWNvbG9yPSIjNDE4QjNEIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iLjYzNSIgc3RvcC1jb2xvcj0iIzQxOTYzNyIvPgogICAgICA8c3RvcCBvZmZzZXQ9Ii45MzIiIHN0b3AtY29sb3I9IiMzRkE5MkQiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjM0ZBRTJBIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KPC9zdmc+Cg=="},3807:function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTS40NSAxNS42M2MwIDQuNTE4IDYuOTYyIDguMTggMTUuNTUgOC4xOCA4LjU4OCAwIDE1LjU1LTMuNjYyIDE1LjU1LTguMThTMjQuNTg4IDcuNDUgMTYgNy40NUM3LjQxMiA3LjQ1LjQ1IDExLjExMi40NSAxNS42M3oiIGZpbGw9InVybCgjcGFpbnQwX3JhZGlhbCkiLz4KICA8cGF0aCBkPSJNMTYgMjMuMjAzYzguMjUzIDAgMTQuOTQzLTMuMzkgMTQuOTQzLTcuNTczIDAtNC4xODItNi42OS03LjU3My0xNC45NDMtNy41NzMtOC4yNTIgMC0xNC45NDMgMy4zOS0xNC45NDMgNy41NzMgMCA0LjE4MiA2LjY5IDcuNTczIDE0Ljk0MyA3LjU3M3oiIGZpbGw9IiM3NzdCQjMiLz4KICA8cGF0aCBkPSJNOC44OTggMTYuNTY5Yy42NzkgMCAxLjE4Ni0uMTI1IDEuNTA2LS4zNzIuMzE3LS4yNDQuNTM2LS42NjcuNjUxLTEuMjU3LjEwNy0uNTUyLjA2Ni0uOTM3LS4xMjEtMS4xNDUtLjE5Mi0uMjEyLS42MDYtLjMyLTEuMjMyLS4zMkg4LjYxOGwtLjYwMSAzLjA5NGguODgxem0tMy41NDYgMy44MWEuMTY4LjE2OCAwIDAxLS4xNjYtLjJsMS41OTMtOC4xOThhLjE2OS4xNjkgMCAwMS4xNjYtLjEzN2gzLjQzNGMxLjA3OSAwIDEuODgyLjI5MyAyLjM4Ny44NzEuNTA4LjU4MS42NjQgMS4zOTQuNDY2IDIuNDE0LS4wOC40MTYtLjIyLjgwMi0uNDEzIDEuMTQ4YTMuODQxIDMuODQxIDAgMDEtLjc2Ljk1MmMtLjM3Mi4zNDktLjc5My42MDEtMS4yNS43NS0uNDUuMTQ2LTEuMDI5LjIyLTEuNzE5LjIySDcuN2wtLjM5NyAyLjA0NGEuMTY5LjE2OSAwIDAxLS4xNjYuMTM2SDUuMzUyeiIgZmlsbD0iIzAwMCIvPgogIDxwYXRoIGQ9Ik04Ljc1NyAxMy42NDRoLjk0NmMuNzU0IDAgMS4wMTcuMTY2IDEuMTA2LjI2NC4xNDguMTY0LjE3NS41MS4wOCAxLS4xMDYuNTQ4LS4zMDQuOTM3LS41ODggMS4xNTUtLjI5LjIyNC0uNzYyLjMzNy0xLjQwMy4zMzdoLS42NzZsLjUzNS0yLjc1NnptMS42MjItMS45NjlINi45NDVjLS4xNjIgMC0uMy4xMTUtLjMzMS4yNzRMNS4wMiAyMC4xNDZhLjMzOC4zMzggMCAwMC4zMzIuNDAyaDEuNzg1Yy4xNjIgMCAuMy0uMTE1LjMzMi0uMjczbC4zNy0xLjkwN0g5LjA5Yy43MDggMCAxLjMwNC0uMDc3IDEuNzctLjIyOS40ODEtLjE1Ni45MjMtLjQyIDEuMzE0LS43ODYuMzI0LS4yOTguNTktLjYzMi43OTItLjk5My4yMDItLjM2Mi4zNDctLjc2NS40MzItMS4xOTguMjA5LTEuMDc1LjAzOS0xLjkzNS0uNTA1LTIuNTU4LS41MzgtLjYxNi0xLjM4NC0uOTI4LTIuNTE0LS45Mjh6bS0yLjU2NyA1LjA2MmgxLjA4NmMuNzIgMCAxLjI1Ny0uMTM1IDEuNjA5LS40MDYuMzUzLS4yNzIuNTktLjcyNS43MTQtMS4zNi4xMTgtLjYwOC4wNjQtMS4wMzgtLjE2Mi0xLjI4OS0uMjI2LS4yNS0uNjc4LS4zNzUtMS4zNTYtLjM3NUg4LjQ3OWwtLjY2NyAzLjQzem0yLjU2Ny00LjcyNGMxLjAzMyAwIDEuNzg2LjI3MSAyLjI2LjgxMy40NzQuNTQzLjYxNiAxLjMuNDI3IDIuMjcxLS4wNzguNC0uMjA5Ljc2Ni0uMzk0IDEuMDk4YTMuNjYzIDMuNjYzIDAgMDEtLjcyNy45MSAzLjE1NCAzLjE1NCAwIDAxLTEuMTg5LjcxM2MtLjQzNi4xNDItLjk5LjIxMy0xLjY2Ni4yMTNINy41NmwtLjQyMyAyLjE4SDUuMzUybDEuNTkzLTguMTk4aDMuNDM0IiBmaWxsPSIjZmZmIi8+CiAgPHBhdGggZD0iTTE3LjMyNiAxOC4yYS4xNjguMTY4IDAgMDEtLjE2NS0uMjAxbC43MDUtMy42MjdjLjA2Ny0uMzQ1LjA1LS41OTMtLjA0Ny0uNjk3LS4wNi0uMDY0LS4yMzgtLjE3Mi0uNzY1LS4xNzJoLTEuMjc3bC0uODg2IDQuNTZhLjE2OS4xNjkgMCAwMS0uMTY2LjEzN2gtMS43NzFhLjE2OS4xNjkgMCAwMS0uMTY2LS4yMDFMMTQuMzggOS44YS4xNjkuMTY5IDAgMDEuMTY2LS4xMzZoMS43NzFhLjE2OS4xNjkgMCAwMS4xNjYuMmwtLjM4NCAxLjk4aDEuMzczYzEuMDQ3IDAgMS43NTYuMTg0IDIuMTcuNTYzLjQyLjM4Ny41NTIgMS4wMDcuMzkgMS44NGwtLjc0MSAzLjgxNWEuMTY5LjE2OSAwIDAxLS4xNjYuMTM3aC0xLjh6IiBmaWxsPSIjMDAwIi8+CiAgPHBhdGggZD0iTTE2LjMxOCA5LjQ5NmgtMS43NzFjLS4xNjIgMC0uMy4xMTUtLjMzMi4yNzNsLTEuNTkzIDguMTk4YS4zMzcuMzM3IDAgMDAuMzMxLjQwMWgxLjc3MmMuMTYyIDAgLjMtLjExNC4zMzEtLjI3M2wuODYtNC40MjNoMS4xMzhjLjUyNiAwIC42MzcuMTEzLjY0MS4xMTcuMDMyLjAzNS4wNzQuMTk0LjAwNS41NWwtLjcwNSAzLjYyOGEuMzM3LjMzNyAwIDAwLjMzMS40MDFoMS44Yy4xNjIgMCAuMy0uMTE0LjMzMS0uMjczbC43NDItMy44MTRjLjE3NC0uODk2LjAyNS0xLjU2OC0uNDQzLTEuOTk3LS40NDUtLjQxLTEuMTkyLS42MDktMi4yODMtLjYwOWgtMS4xNjlsLjM0Ni0xLjc3N2EuMzM3LjMzNyAwIDAwLS4zMzItLjQwMnptMCAuMzM4bC0uNDIzIDIuMTc5aDEuNTc4Yy45OTMgMCAxLjY3OC4xNzMgMi4wNTUuNTIuMzc3LjM0Ni40OS45MDcuMzQgMS42ODNsLS43NDIgMy44MTVoLTEuOGwuNzA1LTMuNjI3Yy4wOC0uNDEzLjA1LS42OTQtLjA4OC0uODQ0LS4xNC0uMTUtLjQzNi0uMjI1LS44OS0uMjI1aC0xLjQxNWwtLjkxMyA0LjY5NmgtMS43NzJsMS41OTQtOC4xOTdoMS43NzF6IiBmaWxsPSIjZmZmIi8+CiAgPHBhdGggZD0iTTIyLjgzNiAxNi41NjljLjY3OSAwIDEuMTg1LS4xMjUgMS41MDYtLjM3Mi4zMTctLjI0NC41MzYtLjY2Ny42NS0xLjI1Ny4xMDgtLjU1Mi4wNjctLjkzNy0uMTItMS4xNDUtLjE5Mi0uMjEyLS42MDYtLjMyLTEuMjMyLS4zMmgtMS4wODRsLS42MDEgMy4wOTRoLjg4MXptLTMuNTQ2IDMuODFhLjE2OC4xNjggMCAwMS0uMTY2LS4ybDEuNTkzLTguMTk4YS4xNjkuMTY5IDAgMDEuMTY2LS4xMzdoMy40MzRjMS4wNzkgMCAxLjg4Mi4yOTMgMi4zODcuODcxLjUwOC41ODEuNjY0IDEuMzkzLjQ2NiAyLjQxNC0uMDgxLjQxNi0uMjIuODAyLS40MTMgMS4xNDgtLjE5NC4zNDYtLjQ1LjY2Ny0uNzYuOTUyLS4zNzIuMzQ5LS43OTMuNjAxLTEuMjUuNzUtLjQ1LjE0Ni0xLjAyOS4yMi0xLjcxOS4yMmgtMS4zOWwtLjM5NyAyLjA0NGEuMTY5LjE2OSAwIDAxLS4xNjYuMTM2SDE5LjI5eiIgZmlsbD0iIzAwMCIvPgogIDxwYXRoIGQ9Ik0yMi42OTUgMTMuNjQ0aC45NDVjLjc1NSAwIDEuMDE3LjE2NiAxLjEwNy4yNjQuMTQ3LjE2NC4xNzUuNTEuMDggMS0uMTA3LjU0OC0uMzA0LjkzNy0uNTg4IDEuMTU1LS4yOS4yMjQtLjc2Mi4zMzctMS40MDMuMzM3aC0uNjc2bC41MzUtMi43NTZ6bTEuNjIyLTEuOTY5aC0zLjQzNGMtLjE2MiAwLS4zLjExNS0uMzMxLjI3NGwtMS41OTQgOC4xOTdhLjMzOC4zMzggMCAwMC4zMzIuNDAyaDEuNzg1Yy4xNjIgMCAuMy0uMTE1LjMzMS0uMjczbC4zNy0xLjkwN2gxLjI1MmMuNzA4IDAgMS4zMDQtLjA3NyAxLjc3LS4yMjkuNDgxLS4xNTYuOTIzLS40MiAxLjMxNC0uNzg3LjMyNC0uMjk3LjU5LS42MzEuNzkyLS45OTIuMjAyLS4zNjIuMzQ3LS43NjUuNDMxLTEuMTk4LjIxLTEuMDc1LjA0LTEuOTM2LS41MDQtMi41NTgtLjUzOC0uNjE2LTEuMzg0LS45MjgtMi41MTQtLjkyOHptLTIuNTY3IDUuMDYyaDEuMDg2Yy43MiAwIDEuMjU3LS4xMzUgMS42MDktLjQwNi4zNTItLjI3Mi41OS0uNzI1LjcxMy0xLjM2LjExOS0uNjA4LjA2NS0xLjAzOC0uMTYxLTEuMjg5LS4yMjYtLjI1LS42NzgtLjM3NS0xLjM1Ny0uMzc1aC0xLjIyM2wtLjY2NyAzLjQzem0yLjU2Ny00LjcyNGMxLjAzMyAwIDEuNzg2LjI3MSAyLjI2LjgxMy40NzQuNTQzLjYxNiAxLjMuNDI3IDIuMjcxLS4wNzguNC0uMjEuNzY2LS4zOTQgMS4wOThhMy42NiAzLjY2IDAgMDEtLjcyNy45MSAzLjE1NCAzLjE1NCAwIDAxLTEuMTg5LjcxM2MtLjQzNi4xNDItLjk5LjIxMy0xLjY2Ni4yMTNoLTEuNTNsLS40MjMgMi4xOEgxOS4yOWwxLjU5My04LjE5OGgzLjQzNCIgZmlsbD0iI2ZmZiIvPgogIDxkZWZzPgogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJwYWludDBfcmFkaWFsIiBjeD0iMCIgY3k9IjAiIHI9IjEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBncmFkaWVudFRyYW5zZm9ybT0idHJhbnNsYXRlKDkuNzg2IDEwLjMyNikgc2NhbGUoMjAuNDE5NCkiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjQUVCMkQ1Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiNBRUIyRDUiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuNzUiIHN0b3AtY29sb3I9IiM0ODRDODkiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjNDg0Qzg5Ii8+CiAgICA8L3JhZGlhbEdyYWRpZW50PgogIDwvZGVmcz4KPC9zdmc+Cg=="},3808:function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CiAgICA8cGF0aCBkPSJNMTUuODk3IDQuMDA3Yy02LjA3OCAwLTUuNjk4IDIuNjM1LTUuNjk4IDIuNjM1bC4wMDcgMi43M2g1Ljh2LjgySDcuOTAxcy0zLjg4OS0uNDQtMy44ODkgNS42OTFjMCA2LjEzMyAzLjM5NCA1LjkxNSAzLjM5NCA1LjkxNWgyLjAyNnYtMi44NDVzLS4xMDktMy4zOTUgMy4zNC0zLjM5NWg1Ljc1M3MzLjIzMS4wNTMgMy4yMzEtMy4xMjN2LTUuMjVzLjQ5MS0zLjE3OC01Ljg2LTMuMTc4em0tMy4xOTggMS44MzZhMS4wNDMgMS4wNDMgMCAxMS4wMDIgMi4wODYgMS4wNDMgMS4wNDMgMCAwMS0uMDAyLTIuMDg2eiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyKSIvPgogICAgPHBhdGggZD0iTTE2LjA3IDI3LjgyMmM2LjA3NyAwIDUuNjk4LTIuNjM1IDUuNjk4LTIuNjM1bC0uMDA3LTIuNzNoLTUuOHYtLjgyaDguMTAzczMuODkuNDQgMy44OS01LjY5MmMwLTYuMTMyLTMuMzk1LTUuOTE1LTMuMzk1LTUuOTE1aC0yLjAyNnYyLjg0NnMuMTEgMy4zOTQtMy4zNCAzLjM5NGgtNS43NTJzLTMuMjMyLS4wNTItMy4yMzIgMy4xMjR2NS4yNXMtLjQ5IDMuMTc4IDUuODYgMy4xNzh6bTMuMTk4LTEuODM2YTEuMDQgMS4wNCAwIDAxLTEuMDQ0LTEuMDQzIDEuMDQxIDEuMDQxIDAgMDExLjQ0My0uOTY1IDEuMDQyIDEuMDQyIDAgMDEwIDEuOTI5IDEuMDQgMS4wNCAwIDAxLS40LjA3OXoiIGZpbGw9InVybCgjcGFpbnQxX2xpbmVhcikiLz4KICA8L2c+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXIiIHgxPSI2LjMxNCIgeTE9IjYuMTQ5IiB4Mj0iMTguMTc4IiB5Mj0iMTcuODk0IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiMzODdFQjgiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMzY2OTk0Ii8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDFfbGluZWFyIiB4MT0iMTMuNTk2IiB5MT0iMTMuNjkxIiB4Mj0iMjYuMzM3IiB5Mj0iMjUuNzM1IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGRkUwNTIiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkZDMzMxIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGNsaXBQYXRoIGlkPSJjbGlwMCI+CiAgICAgIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik00IDRoMjR2MjMuOTA0SDR6Ii8+CiAgICA8L2NsaXBQYXRoPgogIDwvZGVmcz4KPC9zdmc+Cg=="},3809:function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CiAgICA8cGF0aCBkPSJNMjIuNTEgMTkuNzI2bC0xMy42NCA4LjEgMTcuNjYyLTEuMTk4IDEuMzYtMTcuODEtNS4zODEgMTAuOTA4eiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyKSIvPgogICAgPHBhdGggZD0iTTI2LjU2MSAyNi42MTZsLTEuNTE4LTEwLjQ3OC00LjEzNSA1LjQ2IDUuNjUzIDUuMDE4eiIgZmlsbD0idXJsKCNwYWludDFfbGluZWFyKSIvPgogICAgPHBhdGggZD0iTTI2LjU4MiAyNi42MTZsLTExLjEyMi0uODczLTYuNTMyIDIuMDYgMTcuNjU0LTEuMTg3eiIgZmlsbD0idXJsKCNwYWludDJfbGluZWFyKSIvPgogICAgPHBhdGggZD0iTTguOTQ0IDI3LjgwNmwyLjc3OS05LjEwMi02LjExNCAxLjMwNyAzLjMzNSA3Ljc5NXoiIGZpbGw9InVybCgjcGFpbnQzX2xpbmVhcikiLz4KICAgIDxwYXRoIGQ9Ik0yMC45MDcgMjEuNjI4bC0yLjU1Ni0xMC4wMTQtNy4zMTcgNi44NTggOS44NzMgMy4xNTZ6IiBmaWxsPSJ1cmwoI3BhaW50NF9saW5lYXIpIi8+CiAgICA8cGF0aCBkPSJNMjcuMzEzIDExLjc1NWwtNi45MTYtNS42NDgtMS45MjYgNi4yMjYgOC44NDItLjU3OHoiIGZpbGw9InVybCgjcGFpbnQ1X2xpbmVhcikiLz4KICAgIDxwYXRoIGQ9Ik0yNC4wNzggNC4wOTNMMjAuMDExIDYuMzRsLTIuNTY2LTIuMjc4IDYuNjMzLjAzeiIgZmlsbD0idXJsKCNwYWludDZfbGluZWFyKSIvPgogICAgPHBhdGggZD0iTTQgMjMuMDY0bDEuNzA0LTMuMTA3LTEuMzc4LTMuNzAyTDQgMjMuMDY1eiIgZmlsbD0idXJsKCNwYWludDdfbGluZWFyKSIvPgogICAgPHBhdGggZD0iTTQuMjM0IDE2LjEzOGwxLjM4NyAzLjkzMyA2LjAyNi0xLjM1MiA2Ljg4LTYuMzk0IDEuOTQxLTYuMTY2TDE3LjQxMSA0bC01LjE5OCAxLjk0NWMtMS42MzcgMS41MjMtNC44MTUgNC41MzctNC45MyA0LjU5My0uMTEzLjA1OC0yLjA5OCAzLjgxLTMuMDQ5IDUuNnoiIGZpbGw9IiNmZmYiLz4KICAgIDxwYXRoIGQ9Ik05LjEwNCA5LjA3MWMzLjU0OS0zLjUxOSA4LjEyNC01LjU5OCA5Ljg4LTMuODI2IDEuNzU0IDEuNzcxLS4xMDcgNi4wNzYtMy42NTYgOS41OTRzLTguMDY3IDUuNzExLTkuODIyIDMuOTRjLTEuNzU2LTEuNzcuMDQ4LTYuMTkgMy41OTgtOS43MDh6IiBmaWxsPSJ1cmwoI3BhaW50OF9saW5lYXIpIi8+CiAgICA8cGF0aCBkPSJNOC45NDQgMjcuODAybDIuNzU3LTkuMTMgOS4xNTUgMi45NGMtMy4zMSAzLjEwNC02Ljk5MiA1LjcyOS0xMS45MTIgNi4xOXoiIGZpbGw9InVybCgjcGFpbnQ5X2xpbmVhcikiLz4KICAgIDxwYXRoIGQ9Ik0xOC41MzkgMTIuMzA4bDIuMzUgOS4zMWMyLjc2NS0yLjkwOCA1LjI0Ny02LjAzNCA2LjQ2Mi05LjlsLTguODEyLjU5eiIgZmlsbD0idXJsKCNwYWludDEwX2xpbmVhcikiLz4KICAgIDxwYXRoIGQ9Ik0yNy4zMjcgMTEuNzY1Yy45NC0yLjgzOSAxLjE1OC02LjkxMS0zLjI3OC03LjY2N2wtMy42NCAyLjAxIDYuOTE4IDUuNjU3eiIgZmlsbD0idXJsKCNwYWludDExX2xpbmVhcikiLz4KICAgIDxwYXRoIGQ9Ik00IDIzLjAyM2MuMTMgNC42ODYgMy41MSA0Ljc1NSA0Ljk1IDQuNzk2bC0zLjMyNi03Ljc2N0w0IDIzLjAyM3oiIGZpbGw9IiM5RTEyMDkiLz4KICAgIDxwYXRoIGQ9Ik0xOC41NTIgMTIuMzIyYzIuMTI1IDEuMzA2IDYuNDA3IDMuOTI5IDYuNDk0IDMuOTc3LjEzNS4wNzYgMS44NDYtMi44ODYgMi4yMzQtNC41NmwtOC43MjguNTgzeiIgZmlsbD0idXJsKCNwYWludDEyX3JhZGlhbCkiLz4KICAgIDxwYXRoIGQ9Ik0xMS42OTcgMTguNjcxbDMuNjg2IDcuMTFjMi4xNzktMS4xODIgMy44ODUtMi42MjEgNS40NDgtNC4xNjRsLTkuMTM0LTIuOTQ2eiIgZmlsbD0idXJsKCNwYWludDEzX3JhZGlhbCkiLz4KICAgIDxwYXRoIGQ9Ik01LjYxIDIwLjA2MmwtLjUyMiA2LjIxN2MuOTg1IDEuMzQ2IDIuMzQgMS40NjMgMy43NjIgMS4zNTgtMS4wMjgtMi41Ni0zLjA4My03LjY4LTMuMjQtNy41NzV6IiBmaWxsPSJ1cmwoI3BhaW50MTRfbGluZWFyKSIvPgogICAgPHBhdGggZD0iTTIwLjM4OCA2LjEyM2w3LjMyMSAxLjAyOGMtLjM5LTEuNjU2LTEuNTktMi43MjQtMy42MzUtMy4wNThsLTMuNjg2IDIuMDN6IiBmaWxsPSJ1cmwoI3BhaW50MTVfbGluZWFyKSIvPgogIDwvZz4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhciIgeDE9IjI0Ljk5MiIgeTE9IjI5Ljk5MyIgeDI9IjE5Ljk1NyIgeTI9IjIxLjA5MSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkI3NjU1Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iLjQxIiBzdG9wLWNvbG9yPSIjRTQyQjFFIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iLjk5IiBzdG9wLWNvbG9yPSIjOTAwIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzkwMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhciIgeDE9IjI3LjUwMyIgeTE9IjIyLjUxOCIgeDI9IjIwLjQyNSIgeTI9IjIxLjEzNSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjODcxMTAxIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iLjk5IiBzdG9wLWNvbG9yPSIjOTExMjA5Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzkxMTIwOSIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQyX2xpbmVhciIgeDE9IjIyLjMwNSIgeTE9IjMwLjI2MyIgeDI9IjIyLjIxNCIgeTI9IjI1Ljc3NCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjODcxMTAxIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iLjk5IiBzdG9wLWNvbG9yPSIjOTExMjA5Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzkxMTIwOSIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQzX2xpbmVhciIgeDE9IjguNjY2IiB5MT0iMTkuMzYyIiB4Mj0iMTAuNzcxIiB5Mj0iMjUuNTMzIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNmZmYiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuMjMiIHN0b3AtY29sb3I9IiNFNTcyNTIiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuNDYiIHN0b3AtY29sb3I9IiNERTNCMjAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuOTkiIHN0b3AtY29sb3I9IiNBNjAwMDMiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjQTYwMDAzIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDRfbGluZWFyIiB4MT0iMTUuNTkzIiB5MT0iMTMuMjUxIiB4Mj0iMTUuOTc1IiB5Mj0iMTkuOTMiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPgogICAgICA8c3RvcCBvZmZzZXQ9Ii4yMyIgc3RvcC1jb2xvcj0iI0U0NzE0RSIvPgogICAgICA8c3RvcCBvZmZzZXQ9Ii41NiIgc3RvcC1jb2xvcj0iI0JFMUEwRCIvPgogICAgICA8c3RvcCBvZmZzZXQ9Ii45OSIgc3RvcC1jb2xvcj0iI0E4MEQwMCIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNBODBEMDAiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50NV9saW5lYXIiIHgxPSIyMS43MzkiIHkxPSI3LjA3OCIgeDI9IjIyLjI5NyIgeTI9IjExLjkyOCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjZmZmIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iLjE4IiBzdG9wLWNvbG9yPSIjRTQ2MzQyIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iLjQiIHN0b3AtY29sb3I9IiNDODI0MTAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuOTkiIHN0b3AtY29sb3I9IiNBODBEMDAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjQTgwRDAwIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDZfbGluZWFyIiB4MT0iMTguMzQ3IiB5MT0iNS4zOTIiIHgyPSIxOS4xMzQiIHkyPSIyLjA1NSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjZmZmIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iLjU0IiBzdG9wLWNvbG9yPSIjQzgxRjExIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iLjk5IiBzdG9wLWNvbG9yPSIjQkYwOTA1Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0JGMDkwNSIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ3X2xpbmVhciIgeDE9IjQuNDcxIiB5MT0iMTcuNjk0IiB4Mj0iNi41MjkiIHkyPSIxOC45ODQiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPgogICAgICA8c3RvcCBvZmZzZXQ9Ii4zMSIgc3RvcC1jb2xvcj0iI0RFNDAyNCIvPgogICAgICA8c3RvcCBvZmZzZXQ9Ii45OSIgc3RvcC1jb2xvcj0iI0JGMTkwQiIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNCRjE5MEIiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50OF9saW5lYXIiIHgxPSIxLjc2MiIgeTE9IjIyLjcwNCIgeDI9IjIwLjI1NSIgeTI9IjMuNjM1IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNCRDAwMTIiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuMDciIHN0b3AtY29sb3I9IiNmZmYiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuMTciIHN0b3AtY29sb3I9IiNmZmYiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuMjciIHN0b3AtY29sb3I9IiNDODJGMUMiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuMzMiIHN0b3AtY29sb3I9IiM4MjBDMDEiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuNDYiIHN0b3AtY29sb3I9IiNBMzE2MDEiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuNzIiIHN0b3AtY29sb3I9IiNCMzEzMDEiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuOTkiIHN0b3AtY29sb3I9IiNFODI2MDkiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRTgyNjA5Ii8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDlfbGluZWFyIiB4MT0iMTUuOTQ4IiB5MT0iMjQuNjI1IiB4Mj0iMTAuNzE0IiB5Mj0iMjIuNDI3IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiM4QzBDMDEiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuNTQiIHN0b3AtY29sb3I9IiM5OTBDMDAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuOTkiIHN0b3AtY29sb3I9IiNBODBEMEUiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjQTgwRDBFIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDEwX2xpbmVhciIgeDE9IjI1LjUyOSIgeTE9IjE3LjkzIiB4Mj0iMjAuMTM4IiB5Mj0iMTQuMTAxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiM3RTExMEIiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuOTkiIHN0b3AtY29sb3I9IiM5RTBDMDAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjOUUwQzAwIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDExX2xpbmVhciIgeDE9IjI3LjM0OSIgeTE9IjkuNzgxIiB4Mj0iMjQuODE0IiB5Mj0iNy4yMDciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzc5MTMwRCIvPgogICAgICA8c3RvcCBvZmZzZXQ9Ii45OSIgc3RvcC1jb2xvcj0iIzlFMTIwQiIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM5RTEyMEIiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MTRfbGluZWFyIiB4MT0iNy4yMTYiIHkxPSIyNy43OTciIHgyPSIyLjY3MSIgeTI9IjI0LjAyNCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjOEIyMTE0Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iLjQzIiBzdG9wLWNvbG9yPSIjOUUxMDBBIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iLjk5IiBzdG9wLWNvbG9yPSIjQjMxMDBDIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0IzMTAwQyIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxNV9saW5lYXIiIHgxPSIyMi42NDgiIHkxPSI1LjE4MSIgeDI9IjIzLjkzOSIgeTI9IjguNDQ1IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNCMzEwMDAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuNDQiIHN0b3AtY29sb3I9IiM5MTBGMDgiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIuOTkiIHN0b3AtY29sb3I9IiM3OTFDMTIiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjNzkxQzEyIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJwYWludDEyX3JhZGlhbCIgY3g9IjAiIGN5PSIwIiByPSIxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCg2LjA3Mjc5IDAgMCAzLjE3MzE4IDIxLjM0NSAxMy41NzMpIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0E4MEQwMCIvPgogICAgICA8c3RvcCBvZmZzZXQ9Ii45OSIgc3RvcC1jb2xvcj0iIzdFMEUwOCIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM3RTBFMDgiLz4KICAgIDwvcmFkaWFsR3JhZGllbnQ+CiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9InBhaW50MTNfcmFkaWFsIiBjeD0iMCIgY3k9IjAiIHI9IjEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDguMDcyODQgMCAwIDYuMjg0MzEgMTIuOTM1IDIxLjU3NikiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjQTMwQzAwIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iLjk5IiBzdG9wLWNvbG9yPSIjODAwRTA4Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzgwMEUwOCIvPgogICAgPC9yYWRpYWxHcmFkaWVudD4KICAgIDxjbGlwUGF0aCBpZD0iY2xpcDAiPgogICAgICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNNCA0aDI0djIzLjkwNEg0eiIvPgogICAgPC9jbGlwUGF0aD4KICA8L2RlZnM+Cjwvc3ZnPgo="},3810:function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTUgMjAuMjQ1bDIuNDM4LTEuNDg1Yy40Ny44NC44OTggMS41NSAxLjkyNCAxLjU1Ljk4NCAwIDEuNjA0LS4zODcgMS42MDQtMS44OTRWOC4xNzJoMi45OTRWMTguNDZjMCAzLjEyLTEuODE4IDQuNTQtNC40NyA0LjU0LTIuMzk0IDAtMy43ODQtMS4yNDgtNC40OS0yLjc1NHptMTAuNTg2LS4zMjNsMi40MzgtMS40MmMuNjQyIDEuMDU1IDEuNDc2IDEuODMgMi45NSAxLjgzIDEuMjQxIDAgMi4wMzItLjYyNSAyLjAzMi0xLjQ4NiAwLTEuMDMzLS44MTItMS4zOTgtMi4xOC0ybC0uNzUtLjMyNGMtMi4xNTktLjkyNS0zLjU5Mi0yLjA4Ny0zLjU5Mi00LjU0IDAtMi4yNiAxLjcxMS0zLjk4MiA0LjM4NC0zLjk4MiAxLjkwMyAwIDMuMjcyLjY2NyA0LjI1NSAyLjQxbC0yLjMzIDEuNTA3Yy0uNTE0LS45MjUtMS4wNy0xLjI5MS0xLjkyNS0xLjI5MS0uODc3IDAtMS40MzMuNTYtMS40MzMgMS4yOSAwIC45MDUuNTU2IDEuMjcgMS44NCAxLjgzbC43NDguMzIzQzI0LjU2NyAxNS4xNjcgMjYgMTYuMjg2IDI2IDE4LjgwMyAyNiAyMS41MTUgMjMuODgzIDIzIDIxLjAzOSAyM2MtMi43OCAwLTQuNTc2LTEuMzM0LTUuNDUzLTMuMDc4IiBmaWxsPSIjMDAwIi8+Cjwvc3ZnPgo="},3811:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmptyBanner=EmptyBanner;var _eui=__webpack_require__(2);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _ElasticDocsLink=__webpack_require__(238);var _Cytoscape=__webpack_require__(441);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var EmptyBannerContainer=_styledComponents.default.div.withConfig({displayName:"EmptyBannerContainer",componentId:"sc-1nk7dcr-0"})(["margin:",";left:calc( "," + "," );position:absolute;z-index:1;"],_eui_theme_light.default.gutterTypes.gutterSmall,_eui_theme_light.default.gutterTypes.gutterExtraLarge,_eui_theme_light.default.gutterTypes.gutterSmall);function EmptyBanner(){var cy=(0,_react.useContext)(_Cytoscape.CytoscapeContext);var _useState=(0,_react.useState)(0),_useState2=_slicedToArray(_useState,2),nodeCount=_useState2[0],setNodeCount=_useState2[1];(0,_react.useEffect)((function(){var handler=function handler(event){return setNodeCount(event.cy.nodes().length)};if(cy){cy.on("add remove","node",handler)}return function(){if(cy){cy.removeListener("add remove","node",handler)}}}),[cy]);if(!cy||nodeCount!==1){return null}var width=cy.width()-parseInt(_eui_theme_light.default.gutterTypes.gutterExtraLarge,10)-parseInt(_eui_theme_light.default.gutterTypes.gutterLarge,10);return _react.default.createElement(EmptyBannerContainer,{style:{width:width}},_react.default.createElement(_eui.EuiCallOut,{title:_i18n.i18n.translate("xpack.apm.serviceMap.emptyBanner.title",{defaultMessage:"Looks like there's only a single service."})},_i18n.i18n.translate("xpack.apm.serviceMap.emptyBanner.message",{defaultMessage:"We will map out connected services and external requests if we can detect them. Please make sure you're running the latest version of the APM agent."})," ",_react.default.createElement(_ElasticDocsLink.ElasticDocsLink,{section:"/apm/get-started",path:"/agents.html"},_i18n.i18n.translate("xpack.apm.serviceMap.emptyBanner.docsLink",{defaultMessage:"Learn more in the docs"}))))}},3812:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Popover=Popover;var _eui=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _elasticsearch_fieldnames=__webpack_require__(81);var _Cytoscape=__webpack_require__(441);var _Contents=__webpack_require__(3813);var _cytoscapeOptions=__webpack_require__(442);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function Popover(_ref){var _ref2,_ref3,_ref5,_ref6,_ref7,_ref8;var focusedServiceName=_ref.focusedServiceName;var cy=(0,_react.useContext)(_Cytoscape.CytoscapeContext);var _useState=(0,_react.useState)(undefined),_useState2=_slicedToArray(_useState,2),selectedNode=_useState2[0],setSelectedNode=_useState2[1];var deselect=(0,_react.useCallback)((function(){if(cy){cy.elements().unselect()}setSelectedNode(undefined)}),[cy,setSelectedNode]);var renderedHeight=(_ref2=selectedNode===null||selectedNode===void 0?void 0:selectedNode.renderedHeight())!==null&&_ref2!==void 0?_ref2:0;var renderedWidth=(_ref3=selectedNode===null||selectedNode===void 0?void 0:selectedNode.renderedWidth())!==null&&_ref3!==void 0?_ref3:0;var _ref4=(_ref5=selectedNode===null||selectedNode===void 0?void 0:selectedNode.renderedPosition())!==null&&_ref5!==void 0?_ref5:{x:-1e4,y:-1e4},x=_ref4.x,y=_ref4.y;var isOpen=!!selectedNode;var isService=(selectedNode===null||selectedNode===void 0?void 0:selectedNode.data(_elasticsearch_fieldnames.SERVICE_NAME))!==undefined;var triggerStyle={background:"transparent",height:renderedHeight,position:"absolute",width:renderedWidth};var trigger=_react.default.createElement("div",{style:triggerStyle});var zoom=(_ref6=cy===null||cy===void 0?void 0:cy.zoom())!==null&&_ref6!==void 0?_ref6:1;var height=(_ref7=selectedNode===null||selectedNode===void 0?void 0:selectedNode.height())!==null&&_ref7!==void 0?_ref7:0;var translateY=y-(zoom+1)*height/4;var popoverStyle={position:"absolute",transform:"translate(".concat(x,"px, ").concat(translateY,"px)")};var selectedNodeData=(_ref8=selectedNode===null||selectedNode===void 0?void 0:selectedNode.data())!==null&&_ref8!==void 0?_ref8:{};var selectedNodeServiceName=selectedNodeData.id;var label=selectedNodeData.label||selectedNodeServiceName;var popoverRef=(0,_react.useRef)(null);(0,_react.useEffect)((function(){var selectHandler=function selectHandler(event){setSelectedNode(event.target)};if(cy){cy.on("select","node",selectHandler);cy.on("unselect","node",deselect);cy.on("data viewport",deselect)}return function(){if(cy){cy.removeListener("select","node",selectHandler);cy.removeListener("unselect","node",deselect);cy.removeListener("data viewport",undefined,deselect)}}}),[cy,deselect]);(0,_react.useEffect)((function(){if(popoverRef.current){popoverRef.current.positionPopoverFluid()}}),[popoverRef,x,y]);var centerSelectedNode=(0,_react.useCallback)((function(){if(cy){cy.animate(_objectSpread({},_cytoscapeOptions.animationOptions,{center:{eles:cy.getElementById(selectedNodeServiceName)}}))}}),[cy,selectedNodeServiceName]);var isAlreadyFocused=focusedServiceName===selectedNodeServiceName;return _react.default.createElement(_eui.EuiPopover,{anchorPosition:"upCenter",button:trigger,closePopover:function closePopover(){},isOpen:isOpen,ref:popoverRef,style:popoverStyle},_react.default.createElement(_Contents.Contents,{isService:isService,label:label,onFocusClick:isAlreadyFocused?centerSelectedNode:deselect,selectedNodeData:selectedNodeData,selectedNodeServiceName:selectedNodeServiceName}))}},3813:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Contents=Contents;var _eui=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _elasticsearch_fieldnames=__webpack_require__(81);var _Buttons=__webpack_require__(3814);var _Info=__webpack_require__(3815);var _ServiceMetricFetcher=__webpack_require__(3816);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var popoverMinWidth=280;var isIE11=!!window.MSInputMethodContext&&!!document.documentMode;var FlexColumnGroup=function FlexColumnGroup(props){if(isIE11){var direction=props.direction,gutterSize=props.gutterSize,rest=_objectWithoutProperties(props,["direction","gutterSize"]);return _react.default.createElement("div",rest)}return _react.default.createElement(_eui.EuiFlexGroup,props)};var FlexColumnItem=function FlexColumnItem(props){return isIE11?_react.default.createElement("div",props):_react.default.createElement(_eui.EuiFlexItem,props)};function Contents(_ref){var selectedNodeData=_ref.selectedNodeData,isService=_ref.isService,label=_ref.label,onFocusClick=_ref.onFocusClick,selectedNodeServiceName=_ref.selectedNodeServiceName;var frameworkName=selectedNodeData[_elasticsearch_fieldnames.SERVICE_FRAMEWORK_NAME];return _react.default.createElement(FlexColumnGroup,{direction:"column",gutterSize:"s",style:{minWidth:popoverMinWidth}},_react.default.createElement(FlexColumnItem,null,_react.default.createElement(_eui.EuiTitle,{size:"xxs"},_react.default.createElement("h3",null,label)),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"xs"})),_react.default.createElement(FlexColumnItem,null,isService?_react.default.createElement(_ServiceMetricFetcher.ServiceMetricFetcher,{frameworkName:frameworkName,serviceName:selectedNodeServiceName}):_react.default.createElement(_Info.Info,selectedNodeData)),isService&&_react.default.createElement(_Buttons.Buttons,{onFocusClick:onFocusClick,selectedNodeServiceName:selectedNodeServiceName}))}},3814:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Buttons=Buttons;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _useUrlParams=__webpack_require__(35);var _APMLink=__webpack_require__(83);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Buttons(_ref){var _ref$onFocusClick=_ref.onFocusClick,onFocusClick=_ref$onFocusClick===void 0?function(){}:_ref$onFocusClick,selectedNodeServiceName=_ref.selectedNodeServiceName;var urlParams=(0,_useUrlParams.useUrlParams)().urlParams;var detailsUrl=(0,_APMLink.getAPMHref)("/services/".concat(selectedNodeServiceName,"/transactions"),"",urlParams);var focusUrl=(0,_APMLink.getAPMHref)("/services/".concat(selectedNodeServiceName,"/service-map"),"",urlParams);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiButton,{href:detailsUrl,fill:true},_i18n.i18n.translate("xpack.apm.serviceMap.serviceDetailsButtonText",{defaultMessage:"Service Details"}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiButton,{color:"secondary",href:focusUrl,onClick:onFocusClick},_i18n.i18n.translate("xpack.apm.serviceMap.focusMapButtonText",{defaultMessage:"Focus map"}))))}},3815:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Info=Info;var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _elasticsearch_fieldnames=__webpack_require__(81);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ItemRow=_styledComponents.default.div.withConfig({displayName:"ItemRow",componentId:"y947w1-0"})(["line-height:2;"]);var ItemTitle=_styledComponents.default.dt.withConfig({displayName:"ItemTitle",componentId:"y947w1-1"})(["color:",";"],_eui_theme_light.default.textColors.subdued);var ItemDescription=_styledComponents.default.dd.withConfig({displayName:"ItemDescription",componentId:"y947w1-2"})([""]);function Info(data){var type=data[_elasticsearch_fieldnames.SPAN_TYPE]==="db"?"database":data[_elasticsearch_fieldnames.SPAN_TYPE];var subtype=data[_elasticsearch_fieldnames.SPAN_TYPE]!=="external"&&data[_elasticsearch_fieldnames.SPAN_SUBTYPE];var listItems=[{title:_i18n.i18n.translate("xpack.apm.serviceMap.typePopoverMetric",{defaultMessage:"Type"}),description:type},{title:_i18n.i18n.translate("xpack.apm.serviceMap.subtypePopoverMetric",{defaultMessage:"Subtype"}),description:subtype}];return _react.default.createElement(_react.default.Fragment,null,listItems.map((function(_ref){var title=_ref.title,description=_ref.description;return description&&_react.default.createElement(ItemRow,{key:title},_react.default.createElement(ItemTitle,null,title),_react.default.createElement(ItemDescription,null,description))})))}},3816:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceMetricFetcher=ServiceMetricFetcher;var _react=_interopRequireDefault(__webpack_require__(0));var _useFetcher2=__webpack_require__(36);var _useUrlParams2=__webpack_require__(35);var _ServiceMetricList=__webpack_require__(3817);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ServiceMetricFetcher(_ref){var frameworkName=_ref.frameworkName,serviceName=_ref.serviceName;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),_useUrlParams$urlPara=_useUrlParams.urlParams,start=_useUrlParams$urlPara.start,end=_useUrlParams$urlPara.end,environment=_useUrlParams$urlPara.environment;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end){return callApmApi({pathname:"/api/apm/service-map/service/{serviceName}",params:{path:{serviceName:serviceName},query:{start:start,end:end,environment:environment}}})}}),[serviceName,start,end,environment],{preservePreviousData:false}),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?{}:_useFetcher$data,status=_useFetcher.status;var isLoading=status==="loading";return _react.default.createElement(_ServiceMetricList.ServiceMetricList,_extends({},data,{frameworkName:frameworkName,isLoading:isLoading}))}},3817:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceMetricList=ServiceMetricList;var _eui=__webpack_require__(2);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(3);var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _formatters=__webpack_require__(72);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function LoadingSpinner(){return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",style:{height:170}},_react.default.createElement(_eui.EuiLoadingSpinner,{size:"xl"}))}var BadgeRow=(0,_styledComponents.default)(_eui.EuiFlexItem).withConfig({displayName:"BadgeRow",componentId:"sc-1d6njb0-0"})(["padding-bottom:",";"],_eui_theme_light.default.gutterTypes.gutterSmall);var ItemRow=(0,_styledComponents.default)("tr").withConfig({displayName:"ItemRow",componentId:"sc-1d6njb0-1"})(["line-height:2;"]);var ItemTitle=(0,_styledComponents.default)("td").withConfig({displayName:"ItemTitle",componentId:"sc-1d6njb0-2"})(["color:",";padding-right:1rem;"],_eui_theme_light.default.textColors.subdued);var ItemDescription=(0,_styledComponents.default)("td").withConfig({displayName:"ItemDescription",componentId:"sc-1d6njb0-3"})(["text-align:right;"]);function ServiceMetricList(_ref){var avgTransactionDuration=_ref.avgTransactionDuration,avgRequestsPerMinute=_ref.avgRequestsPerMinute,avgErrorsPerMinute=_ref.avgErrorsPerMinute,avgCpuUsage=_ref.avgCpuUsage,avgMemoryUsage=_ref.avgMemoryUsage,frameworkName=_ref.frameworkName,numInstances=_ref.numInstances,isLoading=_ref.isLoading;var listItems=[{title:_i18n.i18n.translate("xpack.apm.serviceMap.avgTransDurationPopoverMetric",{defaultMessage:"Trans. duration (avg.)"}),description:(0,_lodash.isNumber)(avgTransactionDuration)?(0,_formatters.asDuration)(avgTransactionDuration):null},{title:_i18n.i18n.translate("xpack.apm.serviceMap.avgReqPerMinutePopoverMetric",{defaultMessage:"Req. per minute (avg.)"}),description:(0,_lodash.isNumber)(avgRequestsPerMinute)?"".concat(avgRequestsPerMinute.toFixed(2)," ").concat((0,_formatters.tpmUnit)("request")):null},{title:_i18n.i18n.translate("xpack.apm.serviceMap.avgErrorsPerMinutePopoverMetric",{defaultMessage:"Errors per minute (avg.)"}),description:avgErrorsPerMinute===null||avgErrorsPerMinute===void 0?void 0:avgErrorsPerMinute.toFixed(2)},{title:_i18n.i18n.translate("xpack.apm.serviceMap.avgCpuUsagePopoverMetric",{defaultMessage:"CPU usage (avg.)"}),description:(0,_lodash.isNumber)(avgCpuUsage)?(0,_formatters.asPercent)(avgCpuUsage,1):null},{title:_i18n.i18n.translate("xpack.apm.serviceMap.avgMemoryUsagePopoverMetric",{defaultMessage:"Memory usage (avg.)"}),description:(0,_lodash.isNumber)(avgMemoryUsage)?(0,_formatters.asPercent)(avgMemoryUsage,1):null}];var showBadgeRow=frameworkName||numInstances>1;return isLoading?_react.default.createElement(LoadingSpinner,null):_react.default.createElement(_react.default.Fragment,null,showBadgeRow&&_react.default.createElement(BadgeRow,null,_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none"},frameworkName&&_react.default.createElement(_eui.EuiBadge,null,frameworkName),numInstances>1&&_react.default.createElement(_eui.EuiBadge,{iconType:"apps",color:"hollow"},_i18n.i18n.translate("xpack.apm.serviceMap.numInstancesMetric",{values:{numInstances:numInstances},defaultMessage:"{numInstances} instances"})))),_react.default.createElement("table",null,_react.default.createElement("tbody",null,listItems.map((function(_ref2){var title=_ref2.title,description=_ref2.description;return description&&_react.default.createElement(ItemRow,{key:title},_react.default.createElement(ItemTitle,null,title),_react.default.createElement(ItemDescription,null,description))})))))}},3818:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useRefDimensions=useRefDimensions;var _react=__webpack_require__(0);var _reactUse=__webpack_require__(397);function useRefDimensions(){var ref=(0,_react.useRef)(null);var windowHeight=(0,_reactUse.useWindowSize)().height;if(!ref.current){return{ref:ref,width:0,height:0}}var _ref$current$getBound=ref.current.getBoundingClientRect(),top=_ref$current$getBound.top,width=_ref$current$getBound.width;var height=windowHeight-top;return{ref:ref,width:width,height:height}}},3819:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceMetrics=ServiceMetrics;var _eui=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _useServiceMetricCharts=__webpack_require__(1239);var _MetricsChart=__webpack_require__(1240);var _useUrlParams2=__webpack_require__(35);var _ChartsSyncContext=__webpack_require__(348);var _typings=__webpack_require__(240);var _LocalUIFilters=__webpack_require__(241);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ServiceMetrics(_ref){var agentName=_ref.agentName;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var serviceName=urlParams.serviceName,serviceNodeName=urlParams.serviceNodeName;var _useServiceMetricChar=(0,_useServiceMetricCharts.useServiceMetricCharts)(urlParams,agentName),data=_useServiceMetricChar.data;var start=urlParams.start,end=urlParams.end;var localFiltersConfig=(0,_react.useMemo)((function(){return{filterNames:["host","containerId","podName","serviceVersion"],params:{serviceName:serviceName,serviceNodeName:serviceNodeName},projection:_typings.PROJECTION.METRICS,showCount:false}}),[serviceName,serviceNodeName]);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_LocalUIFilters.LocalUIFilters,localFiltersConfig)),_react.default.createElement(_eui.EuiFlexItem,{grow:7},_react.default.createElement(_ChartsSyncContext.ChartsSyncContextProvider,null,_react.default.createElement(_eui.EuiFlexGrid,{columns:2,gutterSize:"s"},data.charts.map((function(chart){return _react.default.createElement(_eui.EuiFlexItem,{key:chart.key},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_MetricsChart.MetricsChart,{start:start,end:end,chart:chart})))}))),_react.default.createElement(_eui.EuiSpacer,{size:"xxl"})))))}},3820:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=Legends;var _propTypes=_interopRequireDefault(__webpack_require__(5));var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _Legend=__webpack_require__(344);var _variables=__webpack_require__(26);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Container=_styledComponents.default.div.withConfig({displayName:"Container",componentId:"sc-1irq3g8-0"})(["display:flex;margin-left:",";flex-wrap:wrap;& > div{margin-top:",";margin-right:",";&:last-child{margin-right:0;}}"],(0,_variables.px)(_variables.unit*5),(0,_variables.px)(_variables.units.half),(0,_variables.px)(_variables.unit));var LegendContent=_styledComponents.default.span.withConfig({displayName:"LegendContent",componentId:"sc-1irq3g8-1"})(["white-space:nowrap;color:",";display:flex;"],_eui_theme_light.default.euiColorMediumShade);var TruncatedLabel=_styledComponents.default.span.withConfig({displayName:"TruncatedLabel",componentId:"sc-1irq3g8-2"})(["display:inline-block;",";"],(0,_variables.truncate)((0,_variables.px)(_variables.units.half*10)));var SeriesValue=_styledComponents.default.span.withConfig({displayName:"SeriesValue",componentId:"sc-1irq3g8-3"})(["margin-left:",";color:",";display:inline-block;"],(0,_variables.px)(_variables.units.quarter),_eui_theme_light.default.euiColorFullShade);var MoreSeriesContainer=_styledComponents.default.div.withConfig({displayName:"MoreSeriesContainer",componentId:"sc-1irq3g8-4"})(["font-size:",";color:",";"],_variables.fontSizes.small,_eui_theme_light.default.euiColorMediumShade);function MoreSeries(_ref){var hiddenSeriesCount=_ref.hiddenSeriesCount;if(hiddenSeriesCount<=0){return null}return _react.default.createElement(MoreSeriesContainer,null,"(+",hiddenSeriesCount,")")}function Legends(_ref2){var clickLegend=_ref2.clickLegend,hiddenSeriesCount=_ref2.hiddenSeriesCount,noHits=_ref2.noHits,series=_ref2.series,seriesEnabledState=_ref2.seriesEnabledState,truncateLegends=_ref2.truncateLegends,hasAnnotations=_ref2.hasAnnotations,showAnnotations=_ref2.showAnnotations,onAnnotationsToggle=_ref2.onAnnotationsToggle;if(noHits&&!hasAnnotations){return null}return _react.default.createElement(Container,null,series.map((function(serie,i){if(serie.hideLegend){return null}var text=_react.default.createElement(LegendContent,null,truncateLegends?_react.default.createElement(TruncatedLabel,{title:serie.title},serie.title):serie.title,serie.legendValue&&_react.default.createElement(SeriesValue,null,serie.legendValue));return _react.default.createElement(_Legend.Legend,{key:i,onClick:function onClick(){return clickLegend(i)},disabled:seriesEnabledState[i],text:text,color:serie.color})})),hasAnnotations&&_react.default.createElement(_Legend.Legend,{key:"annotations",onClick:function onClick(){if(onAnnotationsToggle){onAnnotationsToggle()}},text:_react.default.createElement(LegendContent,null,_i18n.i18n.translate("xpack.apm.serviceVersion",{defaultMessage:"Service version"})),indicator:function indicator(){return _react.default.createElement("div",{style:{marginRight:(0,_variables.px)(_variables.units.quarter)}},_react.default.createElement(_eui.EuiIcon,{type:"annotation",color:_eui_theme_light.default.euiColorSecondary}))},disabled:!showAnnotations,color:_eui_theme_light.default.euiColorSecondary}),_react.default.createElement(MoreSeries,{hiddenSeriesCount:hiddenSeriesCount}))}Legends.propTypes={clickLegend:_propTypes.default.func.isRequired,hiddenSeriesCount:_propTypes.default.number.isRequired,noHits:_propTypes.default.bool.isRequired,series:_propTypes.default.array.isRequired,seriesEnabledState:_propTypes.default.array.isRequired,truncateLegends:_propTypes.default.bool.isRequired,hasAnnotations:_propTypes.default.bool,showAnnotations:_propTypes.default.bool,onAnnotationsToggle:_propTypes.default.func};module.exports=exports.default},3821:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _reactVis=__webpack_require__(191);var _propTypes=_interopRequireDefault(__webpack_require__(5));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(3);var _polished=__webpack_require__(149);var _d3Scale=__webpack_require__(329);var _StatusText=_interopRequireDefault(__webpack_require__(3822));var _plotUtils=__webpack_require__(346);var _i18n=__webpack_require__(1);var _isValidCoordinateValue=__webpack_require__(347);var _getTimezoneOffsetInMs=__webpack_require__(622);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getNull=function getNull(d){return(0,_isValidCoordinateValue.isValidCoordinateValue)(d.y)&&!isNaN(d.y)};var StaticPlot=function(_PureComponent){_inherits(StaticPlot,_PureComponent);function StaticPlot(){var _getPrototypeOf2;var _this;_classCallCheck(this,StaticPlot);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(StaticPlot)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"tickFormatXTime",(function(value){var xDomain=_this.props.plotValues.x.domain();var time=value.getTime();return(0,_d3Scale.scaleUtc)().domain(xDomain).tickFormat()(new Date(time-(0,_getTimezoneOffsetInMs.getTimezoneOffsetInMs)(time)))}));return _this}_createClass(StaticPlot,[{key:"getVisSeries",value:function getVisSeries(series,plotValues){var _this2=this;return series.slice().reverse().map((function(serie){return _this2.getSerie(serie,plotValues)}))}},{key:"getSerie",value:function getSerie(serie,plotValues){switch(serie.type){case"line":return _react.default.createElement(_reactVis.LineSeries,{getNull:getNull,key:serie.title,xType:"time-utc",curve:"curveMonotoneX",data:serie.data,color:serie.color,stack:serie.stack});case"area":return _react.default.createElement(_reactVis.AreaSeries,{getNull:getNull,key:serie.title,xType:"time-utc",curve:"curveMonotoneX",data:serie.data,color:serie.color,stroke:serie.color,fill:serie.areaColor||(0,_polished.rgba)(serie.color,.3)});case"areaStacked":{var _data=serie.data.map((function(value){return"y"in value&&(0,_isValidCoordinateValue.isValidCoordinateValue)(value.y)?value:_objectSpread({},value,{y:undefined})}));return[_react.default.createElement(_reactVis.AreaSeries,{getNull:getNull,key:"".concat(serie.title,"-area"),xType:"time-utc",curve:"curveMonotoneX",data:_data,color:serie.color,stroke:"rgba(0,0,0,0)",fill:serie.areaColor||(0,_polished.rgba)(serie.color,.3),stack:true,cluster:"area"}),_react.default.createElement(_reactVis.LineSeries,{getNull:getNull,key:"".concat(serie.title,"-line"),xType:"time-utc",curve:"curveMonotoneX",data:_data,color:serie.color,stack:true,cluster:"line"})]}case"areaMaxHeight":var yMax=(0,_lodash.last)(plotValues.yTickValues);var data=serie.data.map((function(p){return{x0:p.x0,x:p.x,y0:0,y:yMax}}));return _react.default.createElement(_reactVis.VerticalRectSeries,{getNull:getNull,key:serie.title,xType:"time-utc",curve:"curveMonotoneX",data:data,color:serie.color,stroke:serie.color,fill:serie.areaColor});case"linemark":return _react.default.createElement(_reactVis.LineMarkSeries,{getNull:getNull,key:serie.title,xType:"time-utc",curve:"curveMonotoneX",data:serie.data,color:serie.color,size:.5});default:throw new Error("Unknown type ".concat(serie.type))}}},{key:"render",value:function render(){var _this$props=this.props,series=_this$props.series,tickFormatY=_this$props.tickFormatY,plotValues=_this$props.plotValues,noHits=_this$props.noHits;var xTickValues=plotValues.xTickValues,yTickValues=plotValues.yTickValues;var tickFormatX=this.props.tickFormatX||this.tickFormatXTime;return _react.default.createElement(_plotUtils.SharedPlot,{plotValues:plotValues},_react.default.createElement(_reactVis.XAxis,{type:"time-utc",tickSize:0,tickFormat:tickFormatX,tickValues:xTickValues}),noHits?_react.default.createElement(_StatusText.default,{marginLeft:30,text:_i18n.i18n.translate("xpack.apm.metrics.plot.noDataLabel",{defaultMessage:"No data within this time range."})}):[_react.default.createElement(_reactVis.HorizontalGridLines,{key:"grid-lines",tickValues:yTickValues}),_react.default.createElement(_reactVis.YAxis,{key:"y-axis",tickSize:0,tickValues:yTickValues,tickFormat:tickFormatY,style:{line:{stroke:"none",fill:"none"}}}),this.getVisSeries(series,plotValues)])}}]);return StaticPlot}(_react.PureComponent);var _default=StaticPlot;exports.default=_default;StaticPlot.propTypes={noHits:_propTypes.default.bool.isRequired,series:_propTypes.default.array.isRequired,plotValues:_propTypes.default.object.isRequired,tickFormatX:_propTypes.default.func,tickFormatY:_propTypes.default.func.isRequired,width:_propTypes.default.number.isRequired};module.exports=exports.default},3822:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(5));var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function StatusText(_ref){var marginLeft=_ref.marginLeft,marginRight=_ref.marginRight,marginTop=_ref.marginTop,marginBottom=_ref.marginBottom,text=_ref.text;var xTransform="calc(-50% + ".concat(marginLeft-marginRight,"px)");var yTransform="calc(-50% + ".concat(marginTop-marginBottom,"px - 15px)");return _react.default.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(".concat(xTransform,",").concat(yTransform,")")}},text)}StatusText.propTypes={text:_propTypes.default.string};var _default=StatusText;exports.default=_default;module.exports=exports.default},3823:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _lodash=__webpack_require__(3);var _plotUtils=__webpack_require__(346);var _propTypes=_interopRequireDefault(__webpack_require__(5));var _react=_interopRequireWildcard(__webpack_require__(0));var _SelectionMarker=_interopRequireDefault(__webpack_require__(3824));var _reactVis=__webpack_require__(191);var _Tooltip=_interopRequireDefault(__webpack_require__(1230));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getPointByX(serie,x){return serie.data.find((function(point){return point.x===x}))}var InteractivePlot=function(_PureComponent){_inherits(InteractivePlot,_PureComponent);function InteractivePlot(){var _getPrototypeOf2;var _this;_classCallCheck(this,InteractivePlot);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(InteractivePlot)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"getMarkPoints",(function(hoverX){return _this.props.series.filter((function(serie){return serie.data.some((function(point){return point.x===hoverX&&point.y!=null}))})).map((function(serie){var _ref=getPointByX(serie,hoverX)||{},x=_ref.x,y=_ref.y;return{x:x,y:y,color:serie.color}})).reverse()}));_defineProperty(_assertThisInitialized(_this),"getTooltipPoints",(function(hoverX){return _this.props.series.filter((function(series){return!series.hideTooltipValue})).map((function(serie){var point=getPointByX(serie,hoverX)||{};return{color:serie.color,value:_this.props.formatTooltipValue(point),text:serie.titleShort||serie.title}}))}));return _this}_createClass(InteractivePlot,[{key:"render",value:function render(){var _this$props=this.props,plotValues=_this$props.plotValues,hoverX=_this$props.hoverX,series=_this$props.series,isDrawing=_this$props.isDrawing,selectionStart=_this$props.selectionStart,selectionEnd=_this$props.selectionEnd;if((0,_lodash.isEmpty)(series)){return null}var tooltipPoints=this.getTooltipPoints(hoverX);var markPoints=this.getMarkPoints(hoverX);var x=plotValues.x,xTickValues=plotValues.xTickValues,yTickValues=plotValues.yTickValues;var yValueMiddle=yTickValues[1];if((0,_lodash.isEmpty)(xTickValues)){return _react.default.createElement(_plotUtils.SharedPlot,{plotValues:plotValues})}return _react.default.createElement(_plotUtils.SharedPlot,{plotValues:plotValues},hoverX&&_react.default.createElement(_Tooltip.default,{tooltipPoints:tooltipPoints,x:hoverX,y:yValueMiddle}),hoverX&&_react.default.createElement(_reactVis.MarkSeries,{data:markPoints,colorType:"literal"}),hoverX&&_react.default.createElement(_reactVis.VerticalGridLines,{tickValues:[hoverX]}),isDrawing&&selectionEnd!==null&&_react.default.createElement(_SelectionMarker.default,{start:x(selectionStart),end:x(selectionEnd)}))}}]);return InteractivePlot}(_react.PureComponent);InteractivePlot.propTypes={formatTooltipValue:_propTypes.default.func.isRequired,hoverX:_propTypes.default.number,isDrawing:_propTypes.default.bool.isRequired,plotValues:_propTypes.default.object.isRequired,selectionEnd:_propTypes.default.number,selectionStart:_propTypes.default.number,series:_propTypes.default.array.isRequired};var _default=InteractivePlot;exports.default=_default;module.exports=exports.default},3824:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(5));var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SelectionMarker(_ref){var innerHeight=_ref.innerHeight,marginTop=_ref.marginTop,start=_ref.start,end=_ref.end;var width=Math.abs(end-start);var x=start<end?start:end;return _react.default.createElement("rect",{pointerEvents:"none",fill:"black",fillOpacity:"0.1",x:x,y:marginTop,width:width,height:innerHeight})}SelectionMarker.requiresSVG=true;SelectionMarker.propTypes={start:_propTypes.default.number,end:_propTypes.default.number};var _default=SelectionMarker;exports.default=_default;module.exports=exports.default},3825:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _lodash=__webpack_require__(3);var _reactVis=__webpack_require__(191);var _propTypes=_interopRequireDefault(__webpack_require__(5));var _react=_interopRequireWildcard(__webpack_require__(0));var _plotUtils=__webpack_require__(346);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function getXValuesCombined(series){return _lodash.union.apply(void 0,_toConsumableArray(series.map((function(serie){return serie.data.map((function(p){return p.x}))})))).map((function(x){return{x:x}}))}var VoronoiPlot=function(_PureComponent){_inherits(VoronoiPlot,_PureComponent);function VoronoiPlot(){_classCallCheck(this,VoronoiPlot);return _possibleConstructorReturn(this,_getPrototypeOf(VoronoiPlot).apply(this,arguments))}_createClass(VoronoiPlot,[{key:"render",value:function render(){var _this$props=this.props,series=_this$props.series,plotValues=_this$props.plotValues,noHits=_this$props.noHits;var XY_MARGIN=plotValues.XY_MARGIN,XY_HEIGHT=plotValues.XY_HEIGHT,XY_WIDTH=plotValues.XY_WIDTH,_x=plotValues.x;var xValuesCombined=getXValuesCombined(series);if(!xValuesCombined||noHits){return null}return _react.default.createElement(_plotUtils.SharedPlot,{plotValues:plotValues,onMouseLeave:this.props.onMouseLeave},_react.default.createElement(_reactVis.Voronoi,{extent:[[XY_MARGIN.left,XY_MARGIN.top],[XY_WIDTH,XY_HEIGHT]],nodes:xValuesCombined,onHover:this.props.onHover,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,x:function x(d){return _x(d.x)},y:function y(){return 0}}))}}]);return VoronoiPlot}(_react.PureComponent);var _default=VoronoiPlot;exports.default=_default;VoronoiPlot.propTypes={noHits:_propTypes.default.bool.isRequired,onHover:_propTypes.default.func.isRequired,onMouseDown:_propTypes.default.func.isRequired,onMouseLeave:_propTypes.default.func.isRequired,onMouseUp:_propTypes.default.func,series:_propTypes.default.array.isRequired,plotValues:_propTypes.default.object.isRequired};module.exports=exports.default},3826:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AnnotationsPlot=AnnotationsPlot;var _react=_interopRequireDefault(__webpack_require__(0));var _reactVis=__webpack_require__(191);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _plotUtils=__webpack_require__(346);var _formatters=__webpack_require__(72);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var style={stroke:_eui_theme_light.default.euiColorSecondary,strokeDasharray:"none"};function AnnotationsPlot(props){var plotValues=props.plotValues,annotations=props.annotations;var tickValues=annotations.map((function(annotation){return annotation.time}));return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_plotUtils.SharedPlot,{plotValues:plotValues},_react.default.createElement(_reactVis.VerticalGridLines,{tickValues:tickValues,style:style})),annotations.map((function(annotation){return _react.default.createElement("div",{key:annotation.id,style:{position:"absolute",left:plotValues.x(annotation.time)-8,top:-2}},_react.default.createElement(_eui.EuiToolTip,{title:(0,_formatters.asAbsoluteDateTime)(annotation.time,"seconds"),content:_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_eui.EuiText,null,_i18n.i18n.translate("xpack.apm.version",{defaultMessage:"Version"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},annotation.text))},_react.default.createElement(_eui.EuiIcon,{type:"dot",color:_eui_theme_light.default.euiColorSecondary})))})))}},3827:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceNodeOverview=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _i18n2=__webpack_require__(160);var _service_nodes=__webpack_require__(613);var _typings=__webpack_require__(240);var _LocalUIFilters=__webpack_require__(241);var _useUrlParams2=__webpack_require__(35);var _ManagedTable=__webpack_require__(239);var _useFetcher2=__webpack_require__(36);var _formatters=__webpack_require__(72);var _ServiceNodeMetricOverviewLink=__webpack_require__(3828);var _variables=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var INITIAL_PAGE_SIZE=25;var INITIAL_SORT_FIELD="cpu";var INITIAL_SORT_DIRECTION="desc";var ServiceNodeName=_styledComponents.default.div.withConfig({displayName:"ServiceNodeName",componentId:"sc-1pmt842-0"})(["",""],(0,_variables.truncate)((0,_variables.px)(8*_variables.unit)));var ServiceNodeOverview=function ServiceNodeOverview(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),uiFilters=_useUrlParams.uiFilters,urlParams=_useUrlParams.urlParams;var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end;var localFiltersConfig=(0,_react.useMemo)((function(){return{filterNames:["host","containerId","podName"],params:{serviceName:serviceName},projection:_typings.PROJECTION.SERVICE_NODES}}),[serviceName]);var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(!serviceName||!start||!end){return undefined}return callApmApi({pathname:"/api/apm/services/{serviceName}/serviceNodes",params:{path:{serviceName:serviceName},query:{start:start,end:end,uiFilters:JSON.stringify(uiFilters)}}})}),[serviceName,start,end,uiFilters]),_useFetcher$data=_useFetcher.data,items=_useFetcher$data===void 0?[]:_useFetcher$data;if(!serviceName){return null}var columns=[{name:_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.jvmsTable.nameExplanation",{defaultMessage:"By default, the JVM name is the container ID (where applicable) or the hostname, but it can be manually configured through the agent's 'service_node_name' configuration."})},_react.default.createElement(_react.default.Fragment,null,_i18n.i18n.translate("xpack.apm.jvmsTable.nameColumnLabel",{defaultMessage:"Name"}))),field:"name",sortable:true,render:function render(name){var _ref=name===_service_nodes.SERVICE_NODE_NAME_MISSING?{displayedName:_i18n2.UNIDENTIFIED_SERVICE_NODES_LABEL,tooltip:_i18n.i18n.translate("xpack.apm.jvmsTable.explainServiceNodeNameMissing",{defaultMessage:"We could not identify which JVMs these metrics belong to. This is likely caused by running a version of APM Server that is older than 7.5. Upgrading to APM Server 7.5 or higher should resolve this issue."})}:{displayedName:name,tooltip:name},displayedName=_ref.displayedName,tooltip=_ref.tooltip;return _react.default.createElement(_eui.EuiToolTip,{content:tooltip},_react.default.createElement(_ServiceNodeMetricOverviewLink.ServiceNodeMetricOverviewLink,{serviceName:serviceName,serviceNodeName:name},_react.default.createElement(ServiceNodeName,null,displayedName)))}},{name:_i18n.i18n.translate("xpack.apm.jvmsTable.cpuColumnLabel",{defaultMessage:"CPU avg"}),field:"cpu",sortable:true,render:function render(value){return(0,_formatters.asPercent)(value||0,1)}},{name:_i18n.i18n.translate("xpack.apm.jvmsTable.heapMemoryColumnLabel",{defaultMessage:"Heap memory avg"}),field:"heapMemory",sortable:true,render:_formatters.asDynamicBytes},{name:_i18n.i18n.translate("xpack.apm.jvmsTable.nonHeapMemoryColumnLabel",{defaultMessage:"Non-heap memory avg"}),field:"nonHeapMemory",sortable:true,render:_formatters.asDynamicBytes},{name:_i18n.i18n.translate("xpack.apm.jvmsTable.threadCountColumnLabel",{defaultMessage:"Thread count max"}),field:"threadCount",sortable:true,render:_formatters.asInteger}];return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_LocalUIFilters.LocalUIFilters,localFiltersConfig)),_react.default.createElement(_eui.EuiFlexItem,{grow:7},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_ManagedTable.ManagedTable,{noItemsMessage:_i18n.i18n.translate("xpack.apm.jvmsTable.noJvmsLabel",{defaultMessage:"No JVMs were found"}),items:items,columns:columns,initialPageSize:INITIAL_PAGE_SIZE,initialSortField:INITIAL_SORT_FIELD,initialSortDirection:INITIAL_SORT_DIRECTION})))))};exports.ServiceNodeOverview=ServiceNodeOverview},3828:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceNodeMetricOverviewLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(83);var _useUrlParams2=__webpack_require__(35);var _pickKeys=__webpack_require__(161);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var ServiceNodeMetricOverviewLink=function ServiceNodeMetricOverviewLink(_ref){var serviceName=_ref.serviceName,serviceNodeName=_ref.serviceNodeName,rest=_objectWithoutProperties(_ref,["serviceName","serviceNodeName"]);var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var persistedFilters=(0,_pickKeys.pickKeys)(urlParams,"host","containerId","podName","serviceVersion");return _react.default.createElement(_APMLink.APMLink,_extends({path:"/services/".concat(serviceName,"/nodes/").concat(encodeURIComponent(serviceNodeName),"/metrics"),query:persistedFilters},rest))};exports.ServiceNodeMetricOverviewLink=ServiceNodeMetricOverviewLink},3829:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionOverview=TransactionOverview;var _eui=__webpack_require__(2);var _lodash=__webpack_require__(3);var _react=_interopRequireWildcard(__webpack_require__(0));var _useTransactionList2=__webpack_require__(3830);var _useTransactionCharts2=__webpack_require__(1243);var _TransactionCharts=__webpack_require__(624);var _TransactionBreakdown=__webpack_require__(1246);var _List=__webpack_require__(3860);var _useRedirect=__webpack_require__(3861);var _useFetcher2=__webpack_require__(36);var _ml=__webpack_require__(628);var _history=__webpack_require__(82);var _useLocation=__webpack_require__(132);var _ChartsSyncContext=__webpack_require__(348);var _public=__webpack_require__(78);var _url_helpers=__webpack_require__(71);var _LocalUIFilters=__webpack_require__(241);var _typings=__webpack_require__(240);var _useUrlParams2=__webpack_require__(35);var _useServiceTransactionTypes=__webpack_require__(629);var _TransactionTypeFilter=__webpack_require__(3862);var _useApmPluginContext=__webpack_require__(62);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getRedirectLocation(_ref){var urlParams=_ref.urlParams,location=_ref.location,serviceTransactionTypes=_ref.serviceTransactionTypes;var transactionType=urlParams.transactionType;var firstTransactionType=(0,_lodash.first)(serviceTransactionTypes);if(!transactionType&&firstTransactionType){return _objectSpread({},location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(location.search),{transactionType:firstTransactionType}))})}}function TransactionOverview(){var location=(0,_useLocation.useLocation)();var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var serviceName=urlParams.serviceName,transactionType=urlParams.transactionType;var serviceTransactionTypes=(0,_useServiceTransactionTypes.useServiceTransactionTypes)(urlParams);(0,_useRedirect.useRedirect)(_history.history,getRedirectLocation({urlParams:urlParams,location:location,serviceTransactionTypes:serviceTransactionTypes}));var _useTransactionCharts=(0,_useTransactionCharts2.useTransactionCharts)(),transactionCharts=_useTransactionCharts.data;(0,_public.useTrackPageview)({app:"apm",path:"transaction_overview"});(0,_public.useTrackPageview)({app:"apm",path:"transaction_overview",delay:15e3});var _useTransactionList=(0,_useTransactionList2.useTransactionList)(urlParams),transactionListData=_useTransactionList.data,transactionListStatus=_useTransactionList.status;var http=(0,_useApmPluginContext.useApmPluginContext)().core.http;var _useFetcher=(0,_useFetcher2.useFetcher)((function(){if(serviceName&&transactionType){return(0,_ml.getHasMLJob)({serviceName:serviceName,transactionType:transactionType,http:http})}}),[http,serviceName,transactionType]),_useFetcher$data=_useFetcher.data,hasMLJob=_useFetcher$data===void 0?false:_useFetcher$data;var localFiltersConfig=(0,_react.useMemo)((function(){return{filterNames:["transactionResult","host","containerId","podName","serviceVersion"],params:{serviceName:serviceName,transactionType:transactionType},projection:_typings.PROJECTION.TRANSACTION_GROUPS}}),[serviceName,transactionType]);if(!serviceName||!transactionType){return null}return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_LocalUIFilters.LocalUIFilters,localFiltersConfig,_react.default.createElement(_TransactionTypeFilter.TransactionTypeFilter,{transactionTypes:serviceTransactionTypes}),_react.default.createElement(_eui.EuiSpacer,{size:"xl"}),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"none"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:7},_react.default.createElement(_ChartsSyncContext.ChartsSyncContextProvider,null,_react.default.createElement(_TransactionBreakdown.TransactionBreakdown,{initialIsOpen:true}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_TransactionCharts.TransactionCharts,{hasMLJob:hasMLJob,charts:transactionCharts,location:location,urlParams:urlParams})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h3",null,"Transactions")),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_List.TransactionList,{isLoading:transactionListStatus==="loading",items:transactionListData})))))}},3830:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useTransactionList=useTransactionList;var _react=__webpack_require__(0);var _UrlParamsContext=__webpack_require__(342);var _useFetcher2=__webpack_require__(36);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var getRelativeImpact=function getRelativeImpact(impact,impactMin,impactMax){return Math.max((impact-impactMin)/Math.max(impactMax-impactMin,1)*100,1)};function getWithRelativeImpact(items){var impacts=items.map((function(_ref){var impact=_ref.impact;return impact})).filter((function(impact){return impact!==null}));var impactMin=Math.min.apply(Math,_toConsumableArray(impacts));var impactMax=Math.max.apply(Math,_toConsumableArray(impacts));return items.map((function(item){return _objectSpread({},item,{impactRelative:item.impact!==null?getRelativeImpact(item.impact,impactMin,impactMax):null})}))}function useTransactionList(urlParams){var serviceName=urlParams.serviceName,transactionType=urlParams.transactionType,start=urlParams.start,end=urlParams.end;var uiFilters=(0,_UrlParamsContext.useUiFilters)(urlParams);var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end&&transactionType){return callApmApi({pathname:"/api/apm/services/{serviceName}/transaction_groups",params:{path:{serviceName:serviceName},query:{start:start,end:end,transactionType:transactionType,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,transactionType,uiFilters]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?[]:_useFetcher$data,error=_useFetcher.error,status=_useFetcher.status;var memoizedData=(0,_react.useMemo)((function(){return getWithRelativeImpact(data)}),[data]);return{data:memoizedData,status:status,error:error}}},3831:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTransactionCharts=getTransactionCharts;exports.getResponseTimeSeries=getResponseTimeSeries;exports.getAnomalyScoreSeries=getAnomalyScoreSeries;exports.getTpmSeries=getTpmSeries;var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(3);var _lodash2=_interopRequireDefault(__webpack_require__(4247));var _polished=__webpack_require__(149);var _formatters=__webpack_require__(72);var _getEmptySeries=__webpack_require__(3833);var _httpStatusCodeToColor=__webpack_require__(1226);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var INITIAL_DATA={apmTimeseries:{responseTimes:{avg:[],p95:[],p99:[]},tpmBuckets:[],overallAvgDuration:null},anomalyTimeseries:undefined};function getTransactionCharts(_ref){var transactionType=_ref.transactionType;var _ref2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:INITIAL_DATA,apmTimeseries=_ref2.apmTimeseries,anomalyTimeseries=_ref2.anomalyTimeseries;var tpmSeries=getTpmSeries(apmTimeseries,transactionType);var responseTimeSeries=getResponseTimeSeries({apmTimeseries:apmTimeseries,anomalyTimeseries:anomalyTimeseries});return{tpmSeries:tpmSeries,responseTimeSeries:responseTimeSeries}}function getResponseTimeSeries(_ref3){var apmTimeseries=_ref3.apmTimeseries,anomalyTimeseries=_ref3.anomalyTimeseries;var overallAvgDuration=apmTimeseries.overallAvgDuration;var _apmTimeseries$respon=apmTimeseries.responseTimes,avg=_apmTimeseries$respon.avg,p95=_apmTimeseries$respon.p95,p99=_apmTimeseries$respon.p99;var formattedDuration=(0,_formatters.convertTo)({unit:"milliseconds",microseconds:overallAvgDuration}).formatted;var series=[{title:_i18n.i18n.translate("xpack.apm.transactions.chart.averageLabel",{defaultMessage:"Avg."}),data:avg,legendValue:formattedDuration,type:"linemark",color:_eui_theme_light.default.euiColorVis1},{title:_i18n.i18n.translate("xpack.apm.transactions.chart.95thPercentileLabel",{defaultMessage:"95th percentile"}),titleShort:"95th",data:p95,type:"linemark",color:_eui_theme_light.default.euiColorVis5},{title:_i18n.i18n.translate("xpack.apm.transactions.chart.99thPercentileLabel",{defaultMessage:"99th percentile"}),titleShort:"99th",data:p99,type:"linemark",color:_eui_theme_light.default.euiColorVis7}];if(anomalyTimeseries){series.splice(1,0,getAnomalyBoundariesSeries(anomalyTimeseries.anomalyBoundaries),getAnomalyScoreSeries(anomalyTimeseries.anomalyScore))}return series}function getAnomalyScoreSeries(data){return{title:_i18n.i18n.translate("xpack.apm.transactions.chart.anomalyScoreLabel",{defaultMessage:"Anomaly score"}),hideLegend:true,hideTooltipValue:true,data:data,type:"areaMaxHeight",color:"none",areaColor:(0,_polished.rgba)(_eui_theme_light.default.euiColorVis9,.1)}}function getAnomalyBoundariesSeries(data){return{title:_i18n.i18n.translate("xpack.apm.transactions.chart.anomalyBoundariesLabel",{defaultMessage:"Anomaly Boundaries"}),hideLegend:true,hideTooltipValue:true,data:data,type:"area",color:"none",areaColor:(0,_polished.rgba)(_eui_theme_light.default.euiColorVis1,.1)}}function getTpmSeries(apmTimeseries,transactionType){var tpmBuckets=apmTimeseries.tpmBuckets;var bucketKeys=tpmBuckets.map((function(_ref4){var key=_ref4.key;return key}));var getColor=getColorByKey(bucketKeys);var avg=apmTimeseries.responseTimes.avg;if(!tpmBuckets.length&&avg.length){var start=avg[0].x;var end=avg[avg.length-1].x;return(0,_getEmptySeries.getEmptySeries)(start,end)}return tpmBuckets.map((function(bucket){var average=(0,_lodash2.default)(bucket.dataPoints.map((function(p){return p.y})));return{title:bucket.key,data:bucket.dataPoints,legendValue:"".concat((0,_formatters.asDecimal)(average)," ").concat((0,_formatters.tpmUnit)(transactionType||"")),type:"linemark",color:getColor(bucket.key)}}))}function colorMatch(key){if(/ok|success/i.test(key)){return _eui_theme_light.default.euiColorSecondary}else if(/error|fail/i.test(key)){return _eui_theme_light.default.euiColorDanger}}function getColorByKey(keys){var assignedColors=["HTTP 2xx","HTTP 3xx","HTTP 4xx","HTTP 5xx"];var unknownKeys=(0,_lodash.difference)(keys,assignedColors);var unassignedColors=(0,_lodash.zipObject)(unknownKeys,[_eui_theme_light.default.euiColorVis1,_eui_theme_light.default.euiColorVis3,_eui_theme_light.default.euiColorVis4,_eui_theme_light.default.euiColorVis6,_eui_theme_light.default.euiColorVis2,_eui_theme_light.default.euiColorVis8]);return function(key){return colorMatch(key)||(0,_httpStatusCodeToColor.httpStatusCodeToColor)(key)||unassignedColors[key]}}},3833:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEmptySeries=void 0;var _d=_interopRequireDefault(__webpack_require__(45));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getEmptySeries=function getEmptySeries(){var start=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Date.now()-36e5;var end=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Date.now();var dates=_d.default.time.scale().domain([new Date(start),new Date(end)]).ticks();return[{title:"",type:"line",legendValue:"",color:"",data:dates.map((function(x){return{x:x.getTime(),y:null}}))}]};exports.getEmptySeries=getEmptySeries},3834:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BrowserLineChart=BrowserLineChart;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(2);var _TransactionLineChart=__webpack_require__(626);var _=__webpack_require__(624);var _formatters=__webpack_require__(72);var _useAvgDurationByBrowser=__webpack_require__(3835);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function BrowserLineChart(){var _useAvgDurationByBrow=(0,_useAvgDurationByBrowser.useAvgDurationByBrowser)(),data=_useAvgDurationByBrow.data;var maxY=(0,_.getMaxY)(data);var formatter=(0,_formatters.getDurationFormatter)(maxY);var formatTooltipValue=(0,_.getResponseTimeTooltipFormatter)(formatter);var tickFormatY=(0,_.getResponseTimeTickFormatter)(formatter);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("span",null,_i18n.i18n.translate("xpack.apm.metrics.pageLoadCharts.avgPageLoadByBrowser",{defaultMessage:"Avg. page load duration distribution by browser"}))),_react.default.createElement(_TransactionLineChart.TransactionLineChart,{formatTooltipValue:formatTooltipValue,series:data,tickFormatY:tickFormatY}))}},3835:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useAvgDurationByBrowser=useAvgDurationByBrowser;var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _useFetcher2=__webpack_require__(36);var _useUrlParams2=__webpack_require__(35);var _viz_colors=__webpack_require__(3836);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function toTimeSeries(data){if(!data){return[]}return data.map((function(item,index){return _objectSpread({},item,{color:(0,_viz_colors.getVizColorForIndex)(index,_eui_theme_light.default),type:"linemark"})}))}function useAvgDurationByBrowser(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),_useUrlParams$urlPara=_useUrlParams.urlParams,serviceName=_useUrlParams$urlPara.serviceName,start=_useUrlParams$urlPara.start,end=_useUrlParams$urlPara.end,transactionName=_useUrlParams$urlPara.transactionName,uiFilters=_useUrlParams.uiFilters;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end){return callApmApi({pathname:"/api/apm/services/{serviceName}/transaction_groups/avg_duration_by_browser",params:{path:{serviceName:serviceName},query:{start:start,end:end,transactionName:transactionName,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,transactionName,uiFilters]),data=_useFetcher.data,error=_useFetcher.error,status=_useFetcher.status;return{data:toTimeSeries(data),status:status,error:error}}},3836:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getVizColorForIndex=getVizColorForIndex;var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getVizColorsForTheme(){var theme=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_eui_theme_light.default;return[theme.euiColorVis0,theme.euiColorVis1,theme.euiColorVis2,theme.euiColorVis3,theme.euiColorVis4,theme.euiColorVis5,theme.euiColorVis6,theme.euiColorVis7,theme.euiColorVis8,theme.euiColorVis9]}function getVizColorForIndex(){var index=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var theme=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_eui_theme_light.default;var colors=getVizColorsForTheme(theme);return colors[index%colors.length]}},3837:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DurationByCountryMap=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _useAvgDurationByCountry=__webpack_require__(3838);var _ChoroplethMap=__webpack_require__(3839);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DurationByCountryMap=function DurationByCountryMap(){var _useAvgDurationByCoun=(0,_useAvgDurationByCountry.useAvgDurationByCountry)(),data=_useAvgDurationByCoun.data;return _react.default.createElement(_react.default.Fragment,null," ",_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("span",null,_i18n.i18n.translate("xpack.apm.metrics.durationByCountryMap.avgPageLoadByCountryLabel",{defaultMessage:"Avg. page load duration distribution by country"}))),_react.default.createElement(_ChoroplethMap.ChoroplethMap,{items:data}))};exports.DurationByCountryMap=DurationByCountryMap},3838:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useAvgDurationByCountry=useAvgDurationByCountry;var _useFetcher2=__webpack_require__(36);var _useUrlParams2=__webpack_require__(35);function useAvgDurationByCountry(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),_useUrlParams$urlPara=_useUrlParams.urlParams,serviceName=_useUrlParams$urlPara.serviceName,start=_useUrlParams$urlPara.start,end=_useUrlParams$urlPara.end,transactionName=_useUrlParams$urlPara.transactionName,uiFilters=_useUrlParams.uiFilters;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end){return callApmApi({pathname:"/api/apm/services/{serviceName}/transaction_groups/avg_duration_by_country",params:{path:{serviceName:serviceName},query:{start:start,end:end,uiFilters:JSON.stringify(uiFilters),transactionName:transactionName}}})}}),[serviceName,start,end,uiFilters,transactionName]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?[]:_useFetcher$data,error=_useFetcher.error,status=_useFetcher.status;return{data:data,status:status,error:error}}},3839:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getProgressionColor=getProgressionColor;exports.ChoroplethMap=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _mapboxGl=__webpack_require__(4510);__webpack_require__(779);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _polished=__webpack_require__(149);var _ChoroplethToolTip=__webpack_require__(3841);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var CHOROPLETH_LAYER_ID="choropleth_layer";var CHOROPLETH_POLYGONS_SOURCE_ID="choropleth_polygons";var GEOJSON_KEY_PROPERTY="iso2";var MAPBOX_STYLE="https://tiles.maps.elastic.co/styles/osm-bright-desaturated/style.json";var GEOJSON_SOURCE="https://vector.maps.elastic.co/files/world_countries_v1.geo.json?elastic_tile_service_tos=agree&my_app_name=ems-landing&my_app_version=7.2.0";function getProgressionColor(scale){var baseColor=_eui_theme_light.default.euiColorPrimary;var adjustedScale=.75*scale+.05;if(adjustedScale<.5){return(0,_polished.tint)(adjustedScale*2,baseColor)}if(adjustedScale>.5){return(0,_polished.shade)(1-(adjustedScale-.5)*2,baseColor)}return baseColor}var getMin=function getMin(items){return Math.min.apply(Math,_toConsumableArray(items.map((function(item){return item.value}))))};var getMax=function getMax(items){return Math.max.apply(Math,_toConsumableArray(items.map((function(item){return item.value}))))};var ChoroplethMap=function ChoroplethMap(props){var items=props.items;var containerRef=(0,_react.useRef)(null);var _useState=(0,_react.useState)(null),_useState2=_slicedToArray(_useState,2),map=_useState2[0],setMap=_useState2[1];var popupRef=(0,_react.useRef)(null);var popupContainerRef=(0,_react.useRef)(null);var _useState3=(0,_react.useState)(null),_useState4=_slicedToArray(_useState3,2),tooltipState=_useState4[0],setTooltipState=_useState4[1];var _useMemo=(0,_react.useMemo)((function(){return[getMin(items),getMax(items)]}),[items]),_useMemo2=_slicedToArray(_useMemo,2),min=_useMemo2[0],max=_useMemo2[1];var getValueScale=(0,_react.useCallback)((function(value){return(value-min)/(max-min)}),[max,min]);var controlScrollZoomOnWheel=(0,_react.useCallback)((function(event){if(event.ctrlKey||event.metaKey){event.preventDefault()}else{event.stopPropagation()}}),[]);(0,_react.useEffect)((function(){var updateTooltipStateOnMousemove=function updateTooltipStateOnMousemove(event){var isMapQueryable=map&&popupRef.current&&items.length&&map.getLayer(CHOROPLETH_LAYER_ID);if(!isMapQueryable){return}popupRef.current.setLngLat(event.lngLat);var hoverFeatures=map.queryRenderedFeatures(event.point,{layers:[CHOROPLETH_LAYER_ID]});if(tooltipState&&hoverFeatures.length===0){return setTooltipState(null)}var featureProperties=hoverFeatures[0].properties;if(tooltipState&&tooltipState.name===featureProperties.name){return}var item=items.find((function(_ref){var key=_ref.key;return featureProperties&&key===featureProperties[GEOJSON_KEY_PROPERTY]}));if(item){return setTooltipState({name:featureProperties.name,value:item.value,docCount:item.docCount})}setTooltipState(null)};updateTooltipStateOnMousemoveRef.current=updateTooltipStateOnMousemove}),[map,items,tooltipState]);var updateTooltipStateOnMousemoveRef=(0,_react.useRef)((function(event){}));(0,_react.useEffect)((function(){if(containerRef.current===null){return}var mapboxMap=new _mapboxGl.Map({attributionControl:false,container:containerRef.current,dragRotate:false,touchZoomRotate:false,zoom:.85,center:{lng:0,lat:30},style:MAPBOX_STYLE});mapboxMap.addControl(new _mapboxGl.NavigationControl({showCompass:false}),"top-left");popupRef.current=new _mapboxGl.Popup({closeButton:false,closeOnClick:false});mapboxMap.on("mousemove",(function(){return updateTooltipStateOnMousemoveRef.current.apply(updateTooltipStateOnMousemoveRef,arguments)}));mapboxMap.on("mouseout",(function(){setTooltipState(null)}));var canvasElement=mapboxMap.getCanvas();canvasElement.addEventListener("wheel",controlScrollZoomOnWheel);mapboxMap.on("load",(function(){mapboxMap.addSource(CHOROPLETH_POLYGONS_SOURCE_ID,{type:"geojson",data:GEOJSON_SOURCE});setMap(mapboxMap)}));return function(){canvasElement.removeEventListener("wheel",controlScrollZoomOnWheel)}}),[controlScrollZoomOnWheel]);(0,_react.useEffect)((function(){if(!map){return}var symbolLayer=(map.getStyle().layers||[]).find((function(_ref2){var type=_ref2.type;return type==="symbol"}));if(map.getLayer(CHOROPLETH_LAYER_ID)){map.removeLayer(CHOROPLETH_LAYER_ID)}if(items.length===0){return}var stops=items.map((function(_ref3){var key=_ref3.key,value=_ref3.value;return[key,getProgressionColor(getValueScale(value))]}));var fillColor={property:GEOJSON_KEY_PROPERTY,stops:stops,type:"categorical",default:"transparent"};map.addLayer({id:CHOROPLETH_LAYER_ID,type:"fill",source:CHOROPLETH_POLYGONS_SOURCE_ID,layout:{},paint:{"fill-opacity":.75,"fill-color":fillColor}},symbolLayer?symbolLayer.id:undefined)}),[map,items,getValueScale]);(0,_react.useEffect)((function(){if(!(popupContainerRef.current&&map&&popupRef.current)){return}if(tooltipState){popupRef.current.setDOMContent(popupContainerRef.current).addTo(map);if(popupContainerRef.current.parentElement){popupContainerRef.current.parentElement.style.pointerEvents="none"}}else{popupRef.current.remove()}}),[map,tooltipState]);return _react.default.createElement("div",null,_react.default.createElement("div",{ref:containerRef,style:{height:256}}),_react.default.createElement("div",{style:{display:"none"}},_react.default.createElement("div",{ref:popupContainerRef},tooltipState?_react.default.createElement(_ChoroplethToolTip.ChoroplethToolTip,tooltipState):null)))};exports.ChoroplethMap=ChoroplethMap},3841:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ChoroplethToolTip=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _formatters=__webpack_require__(72);var _variables=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ChoroplethToolTip=function ChoroplethToolTip(_ref){var name=_ref.name,value=_ref.value,docCount=_ref.docCount;return _react.default.createElement("div",{style:{textAlign:"center"}},_react.default.createElement("div",{style:{fontSize:_variables.fontSizes.large}},name),_react.default.createElement("div",null,_i18n.i18n.translate("xpack.apm.metrics.durationByCountryMap.RegionMapChart.ToolTip.avgPageLoadDuration",{defaultMessage:"Avg. page load duration:"})),_react.default.createElement("div",{style:{fontWeight:"bold",fontSize:_variables.fontSizes.large}},(0,_formatters.asDuration)(value)),_react.default.createElement("div",null,"(",_i18n.i18n.translate("xpack.apm.metrics.durationByCountryMap.RegionMapChart.ToolTip.countPageLoads",{values:{docCount:(0,_formatters.asInteger)(docCount)},defaultMessage:"{docCount} page loads"}),")"))};exports.ChoroplethToolTip=ChoroplethToolTip},3842:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TRANSACTION_ROUTE_CHANGE=exports.TRANSACTION_REQUEST=exports.TRANSACTION_PAGE_LOAD=void 0;var TRANSACTION_PAGE_LOAD="page-load";exports.TRANSACTION_PAGE_LOAD=TRANSACTION_PAGE_LOAD;var TRANSACTION_REQUEST="request";exports.TRANSACTION_REQUEST=TRANSACTION_REQUEST;var TRANSACTION_ROUTE_CHANGE="route-change";exports.TRANSACTION_ROUTE_CHANGE=TRANSACTION_ROUTE_CHANGE},3843:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useTransactionBreakdown=useTransactionBreakdown;var _useFetcher2=__webpack_require__(36);var _useUrlParams2=__webpack_require__(35);function useTransactionBreakdown(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),_useUrlParams$urlPara=_useUrlParams.urlParams,serviceName=_useUrlParams$urlPara.serviceName,start=_useUrlParams$urlPara.start,end=_useUrlParams$urlPara.end,transactionName=_useUrlParams$urlPara.transactionName,transactionType=_useUrlParams$urlPara.transactionType,uiFilters=_useUrlParams.uiFilters;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end&&transactionType){return callApmApi({pathname:"/api/apm/services/{serviceName}/transaction_groups/breakdown",params:{path:{serviceName:serviceName},query:{start:start,end:end,transactionName:transactionName,transactionType:transactionType,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,transactionType,transactionName,uiFilters]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?{kpis:[],timeseries:[]}:_useFetcher$data,error=_useFetcher.error,status=_useFetcher.status;return{data:data,status:status,error:error}}},3844:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionBreakdownHeader=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TransactionBreakdownHeader=function TransactionBreakdownHeader(_ref){var showChart=_ref.showChart,onToggleClick=_ref.onToggleClick;return _react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h3",null,_i18n.i18n.translate("xpack.apm.transactionBreakdown.chartTitle",{defaultMessage:"Time spent by span type"})))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{size:"xs",iconType:showChart?"arrowDown":"arrowRight",onClick:function onClick(){return onToggleClick()}},showChart?_i18n.i18n.translate("xpack.apm.transactionBreakdown.hideChart",{defaultMessage:"Hide chart"}):_i18n.i18n.translate("xpack.apm.transactionBreakdown.showChart",{defaultMessage:"Show chart"}))))};exports.TransactionBreakdownHeader=TransactionBreakdownHeader},3845:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionBreakdownKpiList=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _public=__webpack_require__(3846);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Description=_styledComponents.default.span.withConfig({displayName:"Description",componentId:"sc-6o4j5i-0"})(["{white-space:nowrap;}"]);var KpiDescription=function KpiDescription(_ref){var name=_ref.name,color=_ref.color;return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"s",direction:"row",wrap:false},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiIcon,{type:"dot",color:color})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs"},_react.default.createElement(Description,null,name))))};var TransactionBreakdownKpiList=function TransactionBreakdownKpiList(_ref2){var kpis=_ref2.kpis;return _react.default.createElement(_eui.EuiFlexGrid,null,kpis.map((function(kpi){return _react.default.createElement(_eui.EuiFlexItem,{key:kpi.name,grow:false},_react.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(KpiDescription,{name:kpi.name,color:kpi.color})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("span",null,_public.FORMATTERS[_public.InfraFormatterType.percent](kpi.percentage))))))})))};exports.TransactionBreakdownKpiList=TransactionBreakdownKpiList},3846:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FORMATTERS",{enumerable:true,get:function get(){return _formatters.FORMATTERS}});Object.defineProperty(exports,"InfraFormatterType",{enumerable:true,get:function get(){return _lib.InfraFormatterType}});exports.plugin=void 0;var _plugin=__webpack_require__(3847);var _formatters=__webpack_require__(1440);var _lib=__webpack_require__(473);var plugin=function plugin(context){return new _plugin.Plugin(context)};exports.plugin=plugin},3847:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Plugin=void 0;var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(3);var _utils=__webpack_require__(112);var _legacy_singletons=__webpack_require__(1420);var _register_feature=__webpack_require__(3848);var _metric_threshold_alert_type=__webpack_require__(3849);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var getMergedPlugins=function getMergedPlugins(setup,start){return(0,_lodash.merge)({},setup,start)};var Plugin=function(){function Plugin(context){_classCallCheck(this,Plugin)}_createClass(Plugin,[{key:"setup",value:function setup(core,pluginsSetup){var _this=this;(0,_register_feature.registerFeatures)(pluginsSetup.home);pluginsSetup.triggers_actions_ui.alertTypeRegistry.register((0,_metric_threshold_alert_type.getAlertType)());core.application.register({id:"logs",title:_i18n.i18n.translate("xpack.infra.logs.pluginTitle",{defaultMessage:"Logs"}),euiIconType:"logsApp",order:8001,appRoute:"/app/logs",category:_utils.DEFAULT_APP_CATEGORIES.observability,mount:function(){var _mount=_asyncToGenerator(regeneratorRuntime.mark((function _callee(params){var _ref,_ref2,coreStart,pluginsStart,plugins,_ref3,startApp,composeLibs,LogsRouter;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return core.getStartServices();case 2:_ref=_context.sent;_ref2=_slicedToArray(_ref,2);coreStart=_ref2[0];pluginsStart=_ref2[1];plugins=getMergedPlugins(pluginsSetup,pluginsStart);_context.next=9;return _this.downloadAssets();case 9:_ref3=_context.sent;startApp=_ref3.startApp;composeLibs=_ref3.composeLibs;LogsRouter=_ref3.LogsRouter;return _context.abrupt("return",startApp(composeLibs(coreStart),coreStart,plugins,params,LogsRouter,pluginsSetup.triggers_actions_ui));case 14:case"end":return _context.stop()}}}),_callee)})));function mount(_x){return _mount.apply(this,arguments)}return mount}()});core.application.register({id:"metrics",title:_i18n.i18n.translate("xpack.infra.metrics.pluginTitle",{defaultMessage:"Metrics"}),euiIconType:"metricsApp",order:8e3,appRoute:"/app/metrics",category:_utils.DEFAULT_APP_CATEGORIES.observability,mount:function(){var _mount2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(params){var _ref4,_ref5,coreStart,pluginsStart,plugins,_ref6,startApp,composeLibs,MetricsRouter;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return core.getStartServices();case 2:_ref4=_context2.sent;_ref5=_slicedToArray(_ref4,2);coreStart=_ref5[0];pluginsStart=_ref5[1];plugins=getMergedPlugins(pluginsSetup,pluginsStart);_context2.next=9;return _this.downloadAssets();case 9:_ref6=_context2.sent;startApp=_ref6.startApp;composeLibs=_ref6.composeLibs;MetricsRouter=_ref6.MetricsRouter;return _context2.abrupt("return",startApp(composeLibs(coreStart),coreStart,plugins,params,MetricsRouter,pluginsSetup.triggers_actions_ui));case 14:case"end":return _context2.stop()}}}),_callee2)})));function mount(_x2){return _mount2.apply(this,arguments)}return mount}()});core.application.register({id:"infra",appRoute:"/app/infra",title:"infra",navLinkStatus:3,mount:function(){var _mount3=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(params){var _ref7,startLegacyApp;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return __webpack_require__.e(31).then(__webpack_require__.t.bind(null,5220,7));case 2:_ref7=_context3.sent;startLegacyApp=_ref7.startLegacyApp;return _context3.abrupt("return",startLegacyApp(params));case 5:case"end":return _context3.stop()}}}),_callee3)})));function mount(_x3){return _mount3.apply(this,arguments)}return mount}()})}},{key:"start",value:function start(core,plugins){(0,_legacy_singletons.registerStartSingleton)(core)}},{key:"downloadAssets",value:function(){var _downloadAssets=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var _ref8,_ref9,startApp,composeLibs,_ref9$,LogsRouter,MetricsRouter;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return Promise.all([__webpack_require__.e(1).then(__webpack_require__.t.bind(null,5212,7)),__webpack_require__.e(28).then(__webpack_require__.t.bind(null,5221,7)),Promise.all([__webpack_require__.e(1),__webpack_require__.e(17)]).then(__webpack_require__.t.bind(null,5222,7))]);case 2:_ref8=_context4.sent;_ref9=_slicedToArray(_ref8,3);startApp=_ref9[0].startApp;composeLibs=_ref9[1].composeLibs;_ref9$=_ref9[2];LogsRouter=_ref9$.LogsRouter;MetricsRouter=_ref9$.MetricsRouter;return _context4.abrupt("return",{startApp:startApp,composeLibs:composeLibs,LogsRouter:LogsRouter,MetricsRouter:MetricsRouter});case 10:case"end":return _context4.stop()}}}),_callee4)})));function downloadAssets(){return _downloadAssets.apply(this,arguments)}return downloadAssets}()}]);return Plugin}();exports.Plugin=Plugin},3848:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.registerFeatures=void 0;var _i18n=__webpack_require__(1);var _public=__webpack_require__(85);var registerFeatures=function registerFeatures(homePlugin){homePlugin.featureCatalogue.register({id:"metrics",title:_i18n.i18n.translate("xpack.infra.registerFeatures.infraOpsTitle",{defaultMessage:"Metrics"}),description:_i18n.i18n.translate("xpack.infra.registerFeatures.infraOpsDescription",{defaultMessage:"Explore infrastructure metrics and logs for common servers, containers, and services."}),icon:"metricsApp",path:"/app/metrics",showOnHomePage:true,category:_public.FeatureCatalogueCategory.DATA});homePlugin.featureCatalogue.register({id:"logs",title:_i18n.i18n.translate("xpack.infra.registerFeatures.logsTitle",{defaultMessage:"Logs"}),description:_i18n.i18n.translate("xpack.infra.registerFeatures.logsDescription",{defaultMessage:"Stream logs in real time or scroll through historical views in a console-like experience."}),icon:"logsApp",path:"/app/logs",showOnHomePage:true,category:_public.FeatureCatalogueCategory.DATA})};exports.registerFeatures=registerFeatures},3849:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAlertType=getAlertType;var _i18n=__webpack_require__(1);var _expression=__webpack_require__(3850);var _validation=__webpack_require__(3855);var _types=__webpack_require__(797);function getAlertType(){return{id:_types.METRIC_THRESHOLD_ALERT_TYPE_ID,name:_i18n.i18n.translate("xpack.infra.metrics.alertFlyout.alertName",{defaultMessage:"Metric threshold"}),iconClass:"bell",alertParamsExpression:_expression.Expressions,validate:_validation.validateMetricThreshold,defaultActionMessage:_i18n.i18n.translate("xpack.infra.metrics.alerting.threshold.defaultActionMessage",{defaultMessage:"\\{\\{alertName\\}\\} - \\{\\{context.group\\}\\}\n\n\\{\\{context.metricOf.condition0\\}\\} has crossed a threshold of \\{\\{context.thresholdOf.condition0\\}\\}\nCurrent value is \\{\\{context.valueOf.condition0\\}\\}\n"})}}},3850:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.aggregationType=exports.ExpressionRow=exports.Expressions=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _react2=__webpack_require__(4);var _i18n=__webpack_require__(1);var _types=__webpack_require__(797);var _public=__webpack_require__(78);var _common=__webpack_require__(787);var _kuery_bar=__webpack_require__(1852);var _group_by=__webpack_require__(1853);var _use_source_via_http=__webpack_require__(3853);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _templateObject2(){var data=_taggedTemplateLiteral(["\n  padding: 0 4px;\n"]);_templateObject2=function _templateObject2(){return data};return data}function _templateObject(){var data=_taggedTemplateLiteral(["\n  display: flex;\n  flex-wrap: wrap;\n  margin: 0 -4px;\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var AGGREGATION_TYPES;(function(AGGREGATION_TYPES){AGGREGATION_TYPES["COUNT"]="count";AGGREGATION_TYPES["AVERAGE"]="avg";AGGREGATION_TYPES["SUM"]="sum";AGGREGATION_TYPES["MIN"]="min";AGGREGATION_TYPES["MAX"]="max";AGGREGATION_TYPES["RATE"]="rate";AGGREGATION_TYPES["CARDINALITY"]="cardinality"})(AGGREGATION_TYPES||(AGGREGATION_TYPES={}));var defaultExpression={aggType:AGGREGATION_TYPES.AVERAGE,comparator:_types.Comparator.GT,threshold:[],timeSize:1,timeUnit:"m"};var Expressions=function Expressions(props){var setAlertParams=props.setAlertParams,alertParams=props.alertParams,errors=props.errors,alertsContext=props.alertsContext;var _useSourceViaHttp=(0,_use_source_via_http.useSourceViaHttp)({sourceId:"default",type:"metrics",fetch:alertsContext.http.fetch,toastWarning:alertsContext.toastNotifications.addWarning}),source=_useSourceViaHttp.source,createDerivedIndexPattern=_useSourceViaHttp.createDerivedIndexPattern;var _useState=(0,_react.useState)(1),_useState2=_slicedToArray(_useState,2),timeSize=_useState2[0],setTimeSize=_useState2[1];var _useState3=(0,_react.useState)("m"),_useState4=_slicedToArray(_useState3,2),timeUnit=_useState4[0],setTimeUnit=_useState4[1];var derivedIndexPattern=(0,_react.useMemo)((function(){return createDerivedIndexPattern("metrics")}),[createDerivedIndexPattern]);var options=(0,_react.useMemo)((function(){var _alertsContext$metada,_alertsContext$metada2;if((_alertsContext$metada=alertsContext.metadata)===null||_alertsContext$metada===void 0?void 0:(_alertsContext$metada2=_alertsContext$metada.currentOptions)===null||_alertsContext$metada2===void 0?void 0:_alertsContext$metada2.metrics){return alertsContext.metadata.currentOptions}else{return{metrics:[],aggregation:"avg"}}}),[alertsContext.metadata]);var updateParams=(0,_react.useCallback)((function(id,e){var exp=alertParams.criteria?alertParams.criteria.slice():[];exp[id]=_objectSpread({},exp[id],{},e);setAlertParams("criteria",exp)}),[setAlertParams,alertParams.criteria]);var addExpression=(0,_react.useCallback)((function(){var exp=alertParams.criteria.slice();exp.push(defaultExpression);setAlertParams("criteria",exp)}),[setAlertParams,alertParams.criteria]);var removeExpression=(0,_react.useCallback)((function(id){var exp=alertParams.criteria.slice();if(exp.length>1){exp.splice(id,1);setAlertParams("criteria",exp)}}),[setAlertParams,alertParams.criteria]);var onFilterChange=(0,_react.useCallback)((function(filter){setAlertParams("filterQuery",filter)}),[setAlertParams]);var onGroupByChange=(0,_react.useCallback)((function(group){setAlertParams("groupBy",group||"")}),[setAlertParams]);var emptyError=(0,_react.useMemo)((function(){return{aggField:[],timeSizeUnit:[],timeWindowSize:[]}}),[]);var updateTimeSize=(0,_react.useCallback)((function(ts){var criteria=alertParams.criteria.map((function(c){return _objectSpread({},c,{timeSize:ts})}));setTimeSize(ts||undefined);setAlertParams("criteria",criteria)}),[alertParams.criteria,setAlertParams]);var updateTimeUnit=(0,_react.useCallback)((function(tu){var criteria=alertParams.criteria.map((function(c){return _objectSpread({},c,{timeUnit:tu})}));setTimeUnit(tu);setAlertParams("criteria",criteria)}),[alertParams.criteria,setAlertParams]);(0,_react.useEffect)((function(){var md=alertsContext.metadata;if(md){var _md$currentOptions;if((_md$currentOptions=md.currentOptions)===null||_md$currentOptions===void 0?void 0:_md$currentOptions.metrics){setAlertParams("criteria",md.currentOptions.metrics.map((function(metric){return{metric:metric.field,comparator:_types.Comparator.GT,threshold:[],timeSize:timeSize,timeUnit:timeUnit,aggType:metric.aggregation}})))}else{setAlertParams("criteria",[defaultExpression])}if(md.currentOptions){if(md.currentOptions.filterQuery){setAlertParams("filterQuery",md.currentOptions.filterQuery)}else if(md.currentOptions.groupBy&&md.series){var filter="".concat(md.currentOptions.groupBy,': "').concat(md.series.id,'"');setAlertParams("filterQuery",filter)}setAlertParams("groupBy",md.currentOptions.groupBy)}setAlertParams("sourceId",source===null||source===void 0?void 0:source.id)}else{if(!alertParams.criteria){setAlertParams("criteria",[defaultExpression])}if(!alertParams.sourceId){setAlertParams("sourceId",(source===null||source===void 0?void 0:source.id)||"default")}}}),[alertsContext.metadata,defaultExpression,source]);var handleFieldSearchChange=(0,_react.useCallback)((function(e){return onFilterChange(e.target.value)}),[onFilterChange]);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("h4",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.conditions",defaultMessage:"Conditions"}))),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),alertParams.criteria&&alertParams.criteria.map((function(e,idx){return _react.default.createElement(ExpressionRow,{canDelete:alertParams.criteria.length>1,fields:derivedIndexPattern.fields,remove:removeExpression,addExpression:addExpression,key:idx,expressionId:idx,setAlertParams:updateParams,errors:errors[idx]||emptyError,expression:e||{}})})),_react.default.createElement(_common.ForLastExpression,{timeWindowSize:timeSize,timeWindowUnit:timeUnit,errors:emptyError,onChangeWindowSize:updateTimeSize,onChangeWindowUnit:updateTimeUnit}),_react.default.createElement("div",null,_react.default.createElement(_eui.EuiButtonEmpty,{color:"primary",iconSide:"left",flush:"left",iconType:"plusInCircleFilled",onClick:addExpression},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.addCondition",defaultMessage:"Add condition"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.infra.metrics.alertFlyout.filterLabel",{defaultMessage:"Filter (optional)"}),helpText:_i18n.i18n.translate("xpack.infra.metrics.alertFlyout.filterHelpText",{defaultMessage:"Use a KQL expression to limit the scope of your alert trigger."}),fullWidth:true,compressed:true},alertsContext.metadata&&_react.default.createElement(_kuery_bar.MetricsExplorerKueryBar,{derivedIndexPattern:derivedIndexPattern,onChange:onFilterChange,onSubmit:onFilterChange,value:alertParams.filterQuery})||_react.default.createElement(_eui.EuiFieldSearch,{onChange:handleFieldSearchChange,value:alertParams.filterQuery,fullWidth:true})),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.infra.metrics.alertFlyout.createAlertPerText",{defaultMessage:"Create alert per (optional)"}),helpText:_i18n.i18n.translate("xpack.infra.metrics.alertFlyout.createAlertPerHelpText",{defaultMessage:'Create an alert for every unique value. For example: "host.id" or "cloud.region".'}),fullWidth:true,compressed:true},_react.default.createElement(_group_by.MetricsExplorerGroupBy,{onChange:onGroupByChange,fields:derivedIndexPattern.fields,options:_objectSpread({},options,{groupBy:alertParams.groupBy||undefined})})))};exports.Expressions=Expressions;var StyledExpressionRow=(0,_public.euiStyled)(_eui.EuiFlexGroup)(_templateObject());var StyledExpression=_public.euiStyled.div(_templateObject2());var ExpressionRow=function ExpressionRow(props){var setAlertParams=props.setAlertParams,expression=props.expression,errors=props.errors,expressionId=props.expressionId,remove=props.remove,fields=props.fields,canDelete=props.canDelete;var _expression$aggType=expression.aggType,aggType=_expression$aggType===void 0?AGGREGATION_TYPES.MAX:_expression$aggType,metric=expression.metric,_expression$comparato=expression.comparator,comparator=_expression$comparato===void 0?_types.Comparator.GT:_expression$comparato,_expression$threshold=expression.threshold,threshold=_expression$threshold===void 0?[]:_expression$threshold;var updateAggType=(0,_react.useCallback)((function(at){setAlertParams(expressionId,_objectSpread({},expression,{aggType:at,metric:at==="count"?undefined:expression.metric}))}),[expressionId,expression,setAlertParams]);var updateMetric=(0,_react.useCallback)((function(m){setAlertParams(expressionId,_objectSpread({},expression,{metric:m}))}),[expressionId,expression,setAlertParams]);var updateComparator=(0,_react.useCallback)((function(c){setAlertParams(expressionId,_objectSpread({},expression,{comparator:c}))}),[expressionId,expression,setAlertParams]);var updateThreshold=(0,_react.useCallback)((function(t){if(t.join()!==expression.threshold.join()){setAlertParams(expressionId,_objectSpread({},expression,{threshold:t}))}}),[expressionId,expression,setAlertParams]);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"xs"},_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(StyledExpressionRow,null,_react.default.createElement(StyledExpression,null,_react.default.createElement(_common.WhenExpression,{customAggTypesOptions:aggregationType,aggType:aggType,onChangeSelectedAggType:updateAggType})),aggType!=="count"&&_react.default.createElement(StyledExpression,null,_react.default.createElement(_common.OfExpression,{customAggTypesOptions:aggregationType,aggField:metric,fields:fields.map((function(f){return{normalizedType:f.type,name:f.name}})),aggType:aggType,errors:errors,onChangeSelectedAggField:updateMetric})),_react.default.createElement(StyledExpression,null,_react.default.createElement(_common.ThresholdExpression,{thresholdComparator:comparator||_types.Comparator.GT,threshold:threshold,onChangeSelectedThresholdComparator:updateComparator,onChangeSelectedThreshold:updateThreshold,errors:errors})))),canDelete&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonIcon,{"aria-label":_i18n.i18n.translate("xpack.infra.metrics.alertFlyout.removeCondition",{defaultMessage:"Remove condition"}),color:"danger",iconType:"trash",onClick:function onClick(){return remove(expressionId)}}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}))};exports.ExpressionRow=ExpressionRow;var aggregationType={avg:{text:_i18n.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.avg",{defaultMessage:"Average"}),fieldRequired:true,validNormalizedTypes:["number"],value:AGGREGATION_TYPES.AVERAGE},max:{text:_i18n.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.max",{defaultMessage:"Max"}),fieldRequired:true,validNormalizedTypes:["number","date"],value:AGGREGATION_TYPES.MAX},min:{text:_i18n.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.min",{defaultMessage:"Min"}),fieldRequired:true,validNormalizedTypes:["number","date"],value:AGGREGATION_TYPES.MIN},cardinality:{text:_i18n.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.cardinality",{defaultMessage:"Cardinality"}),fieldRequired:false,value:AGGREGATION_TYPES.CARDINALITY,validNormalizedTypes:["number"]},rate:{text:_i18n.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.rate",{defaultMessage:"Rate"}),fieldRequired:false,value:AGGREGATION_TYPES.RATE,validNormalizedTypes:["number"]},count:{text:_i18n.i18n.translate("xpack.infra.metrics.alertFlyout.aggregationText.count",{defaultMessage:"Document count"}),fieldRequired:false,value:AGGREGATION_TYPES.COUNT,validNormalizedTypes:["number"]}};exports.aggregationType=aggregationType},3851:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.AutocompleteField=void 0;var _eui=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _public=__webpack_require__(78);var _typed_react=__webpack_require__(1438);var _suggestion_item=__webpack_require__(3852);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _templateObject2(){var data=_taggedTemplateLiteral(["\n  position: absolute;\n  width: 100%;\n  margin-top: 2px;\n  overflow-x: hidden;\n  overflow-y: scroll;\n  z-index: ",";\n  max-height: 322px;\n"]);_templateObject2=function _templateObject2(){return data};return data}function _templateObject(){var data=_taggedTemplateLiteral(["\n  position: relative;\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AutocompleteField=function(_React$Component){_inherits(AutocompleteField,_React$Component);function AutocompleteField(){var _getPrototypeOf2;var _this;_classCallCheck(this,AutocompleteField);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(AutocompleteField)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{areSuggestionsVisible:false,isFocused:false,selectedIndex:null});_defineProperty(_assertThisInitialized(_this),"inputElement",null);_defineProperty(_assertThisInitialized(_this),"handleChangeInputRef",(function(element){_this.inputElement=element}));_defineProperty(_assertThisInitialized(_this),"handleChange",(function(evt){_this.changeValue(evt.currentTarget.value)}));_defineProperty(_assertThisInitialized(_this),"handleKeyDown",(function(evt){var suggestions=_this.props.suggestions;switch(evt.key){case"ArrowUp":evt.preventDefault();if(suggestions.length>0){_this.setState((0,_typed_react.composeStateUpdaters)(withSuggestionsVisible,withPreviousSuggestionSelected))}break;case"ArrowDown":evt.preventDefault();if(suggestions.length>0){_this.setState((0,_typed_react.composeStateUpdaters)(withSuggestionsVisible,withNextSuggestionSelected))}else{_this.updateSuggestions()}break;case"Enter":evt.preventDefault();if(_this.state.selectedIndex!==null){_this.applySelectedSuggestion()}else{_this.submit()}break;case"Escape":evt.preventDefault();_this.setState(withSuggestionsHidden);break}}));_defineProperty(_assertThisInitialized(_this),"handleKeyUp",(function(evt){switch(evt.key){case"ArrowLeft":case"ArrowRight":case"Home":case"End":_this.updateSuggestions();break}}));_defineProperty(_assertThisInitialized(_this),"handleFocus",(function(){_this.setState((0,_typed_react.composeStateUpdaters)(withSuggestionsVisible,withFocused))}));_defineProperty(_assertThisInitialized(_this),"handleBlur",(function(){_this.setState((0,_typed_react.composeStateUpdaters)(withSuggestionsHidden,withUnfocused))}));_defineProperty(_assertThisInitialized(_this),"selectSuggestionAt",(function(index){return function(){_this.setState(withSuggestionAtIndexSelected(index))}}));_defineProperty(_assertThisInitialized(_this),"applySelectedSuggestion",(function(){if(_this.state.selectedIndex!==null){_this.applySuggestionAt(_this.state.selectedIndex)()}}));_defineProperty(_assertThisInitialized(_this),"applySuggestionAt",(function(index){return function(){var _this$props=_this.props,value=_this$props.value,suggestions=_this$props.suggestions;var selectedSuggestion=suggestions[index];if(!selectedSuggestion){return}var newValue=value.substr(0,selectedSuggestion.start)+selectedSuggestion.text+value.substr(selectedSuggestion.end);_this.setState(withSuggestionsHidden);_this.changeValue(newValue);_this.focusInputElement()}}));_defineProperty(_assertThisInitialized(_this),"changeValue",(function(value){var onChange=_this.props.onChange;if(onChange){onChange(value)}}));_defineProperty(_assertThisInitialized(_this),"focusInputElement",(function(){if(_this.inputElement){_this.inputElement.focus()}}));_defineProperty(_assertThisInitialized(_this),"showSuggestions",(function(){_this.setState(withSuggestionsVisible)}));_defineProperty(_assertThisInitialized(_this),"submit",(function(){var _this$props2=_this.props,isValid=_this$props2.isValid,onSubmit=_this$props2.onSubmit,value=_this$props2.value;if(isValid&&onSubmit){onSubmit(value)}_this.setState(withSuggestionsHidden)}));_defineProperty(_assertThisInitialized(_this),"updateSuggestions",(function(){var inputCursorPosition=_this.inputElement?_this.inputElement.selectionStart||0:0;_this.props.loadSuggestions(_this.props.value,inputCursorPosition,200)}));return _this}_createClass(AutocompleteField,[{key:"render",value:function render(){var _this2=this;var _this$props3=this.props,suggestions=_this$props3.suggestions,isLoadingSuggestions=_this$props3.isLoadingSuggestions,isValid=_this$props3.isValid,placeholder=_this$props3.placeholder,value=_this$props3.value,ariaLabel=_this$props3["aria-label"];var _this$state=this.state,areSuggestionsVisible=_this$state.areSuggestionsVisible,selectedIndex=_this$state.selectedIndex;return _react.default.createElement(_eui.EuiOutsideClickDetector,{onOutsideClick:this.handleBlur},_react.default.createElement(AutocompleteContainer,null,_react.default.createElement(FixedEuiFieldSearch,{fullWidth:true,inputRef:this.handleChangeInputRef,isLoading:isLoadingSuggestions,isInvalid:!isValid,onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onSearch:this.submit,placeholder:placeholder,value:value,"aria-label":ariaLabel}),areSuggestionsVisible&&!isLoadingSuggestions&&suggestions.length>0?_react.default.createElement(SuggestionsPanel,null,suggestions.map((function(suggestion,suggestionIndex){return _react.default.createElement(_suggestion_item.SuggestionItem,{key:suggestion.text,suggestion:suggestion,isSelected:suggestionIndex===selectedIndex,onMouseEnter:_this2.selectSuggestionAt(suggestionIndex),onClick:_this2.applySuggestionAt(suggestionIndex)})}))):null))}},{key:"componentDidMount",value:function componentDidMount(){if(this.inputElement&&this.props.autoFocus){this.inputElement.focus()}}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var hasNewValue=prevProps.value!==this.props.value;var hasNewSuggestions=prevProps.suggestions!==this.props.suggestions;if(hasNewValue){this.updateSuggestions()}if(hasNewValue&&this.props.value===""){this.submit()}if(hasNewSuggestions&&this.state.isFocused){this.showSuggestions()}}}]);return AutocompleteField}(_react.default.Component);exports.AutocompleteField=AutocompleteField;var withPreviousSuggestionSelected=function withPreviousSuggestionSelected(state,props){return _objectSpread({},state,{selectedIndex:props.suggestions.length===0?null:state.selectedIndex!==null?(state.selectedIndex+props.suggestions.length-1)%props.suggestions.length:Math.max(props.suggestions.length-1,0)})};var withNextSuggestionSelected=function withNextSuggestionSelected(state,props){return _objectSpread({},state,{selectedIndex:props.suggestions.length===0?null:state.selectedIndex!==null?(state.selectedIndex+1)%props.suggestions.length:0})};var withSuggestionAtIndexSelected=function withSuggestionAtIndexSelected(suggestionIndex){return function(state,props){return _objectSpread({},state,{selectedIndex:props.suggestions.length===0?null:suggestionIndex>=0&&suggestionIndex<props.suggestions.length?suggestionIndex:0})}};var withSuggestionsVisible=function withSuggestionsVisible(state){return _objectSpread({},state,{areSuggestionsVisible:true})};var withSuggestionsHidden=function withSuggestionsHidden(state){return _objectSpread({},state,{areSuggestionsVisible:false,selectedIndex:null})};var withFocused=function withFocused(state){return _objectSpread({},state,{isFocused:true})};var withUnfocused=function withUnfocused(state){return _objectSpread({},state,{isFocused:false})};var FixedEuiFieldSearch=_eui.EuiFieldSearch;var AutocompleteContainer=_public.euiStyled.div(_templateObject());var SuggestionsPanel=(0,_public.euiStyled)(_eui.EuiPanel).attrs((function(){return{paddingSize:"none",hasShadow:true}}))(_templateObject2(),(function(props){return props.theme.eui.euiZLevel1}))},3852:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SuggestionItem=void 0;var _eui=__webpack_require__(2);var _polished=__webpack_require__(149);var _react=_interopRequireDefault(__webpack_require__(0));var _public=__webpack_require__(78);var _public2=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _templateObject5(){var data=_taggedTemplateLiteral(["\n  flex: 3 0 0;\n\n  p {\n    display: inline;\n\n    span {\n      font-family: ",";\n    }\n  }\n"]);_templateObject5=function _templateObject5(){return data};return data}function _templateObject4(){var data=_taggedTemplateLiteral(["\n  flex: 2 0 0;\n  font-family: ",";\n"]);_templateObject4=function _templateObject4(){return data};return data}function _templateObject3(){var data=_taggedTemplateLiteral(["\n  background-color: ",";\n  color: ",";\n  flex: 0 0 auto;\n  justify-content: center;\n  width: ",";\n"]);_templateObject3=function _templateObject3(){return data};return data}function _templateObject2(){var data=_taggedTemplateLiteral(["\n  align-items: center;\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  height: ",";\n  padding: ",";\n"]);_templateObject2=function _templateObject2(){return data};return data}function _templateObject(){var data=_taggedTemplateLiteral(["\n  display: flex;\n  flex-direction: row;\n  font-size: ",";\n  height: ",";\n  white-space: nowrap;\n  background-color: ",";\n"]);_templateObject=function _templateObject(){return data};return data}function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0)}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var SuggestionItem=function SuggestionItem(props){var isSelected=props.isSelected,onClick=props.onClick,onMouseEnter=props.onMouseEnter,suggestion=props.suggestion;return _react.default.createElement(SuggestionItemContainer,{isSelected:isSelected,onClick:onClick,onMouseEnter:onMouseEnter},_react.default.createElement(SuggestionItemIconField,{suggestionType:suggestion.type},_react.default.createElement(_eui.EuiIcon,{type:getEuiIconType(suggestion.type)})),_react.default.createElement(SuggestionItemTextField,null,suggestion.text),_react.default.createElement(SuggestionItemDescriptionField,null,suggestion.description))};exports.SuggestionItem=SuggestionItem;SuggestionItem.defaultProps={isSelected:false};var SuggestionItemContainer=_public.euiStyled.div(_templateObject(),(function(props){return props.theme.eui.euiFontSizeS}),(function(props){return props.theme.eui.euiSizeXL}),(function(props){return props.isSelected?props.theme.eui.euiColorLightestShade:"transparent"}));var SuggestionItemField=_public.euiStyled.div(_templateObject2(),(function(props){return props.theme.eui.euiSizeXL}),(function(props){return props.theme.eui.euiSizeXS}));var SuggestionItemIconField=(0,_public.euiStyled)(SuggestionItemField)(_templateObject3(),(function(props){return(0,_polished.transparentize)(.9,getEuiIconColor(props.theme,props.suggestionType))}),(function(props){return getEuiIconColor(props.theme,props.suggestionType)}),(function(props){return props.theme.eui.euiSizeXL}));var SuggestionItemTextField=(0,_public.euiStyled)(SuggestionItemField)(_templateObject4(),(function(props){return props.theme.eui.euiCodeFontFamily}));var SuggestionItemDescriptionField=(0,_public.euiStyled)(SuggestionItemField)(_templateObject5(),(function(props){return props.theme.eui.euiCodeFontFamily}));var getEuiIconType=function getEuiIconType(suggestionType){switch(suggestionType){case _public2.QuerySuggestionTypes.Field:return"kqlField";case _public2.QuerySuggestionTypes.Value:return"kqlValue";case _public2.QuerySuggestionTypes.RecentSearch:return"search";case _public2.QuerySuggestionTypes.Conjunction:return"kqlSelector";case _public2.QuerySuggestionTypes.Operator:return"kqlOperand";default:return"empty"}};var getEuiIconColor=function getEuiIconColor(theme,suggestionType){switch(suggestionType){case _public2.QuerySuggestionTypes.Field:return theme.eui.euiColorVis7;case _public2.QuerySuggestionTypes.Value:return theme.eui.euiColorVis0;case _public2.QuerySuggestionTypes.Operator:return theme.eui.euiColorVis1;case _public2.QuerySuggestionTypes.Conjunction:return theme.eui.euiColorVis2;case _public2.QuerySuggestionTypes.RecentSearch:default:return theme.eui.euiColorMediumShade}}},3853:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useSourceViaHttpContext=exports.SourceViaHttpProvider=exports.SourceViaHttp=exports.useSourceViaHttp=exports.pickIndexPattern=void 0;var _react=__webpack_require__(0);var _Either=__webpack_require__(135);var _function=__webpack_require__(379);var _pipeable=__webpack_require__(265);var _constate=_interopRequireDefault(__webpack_require__(1443));var _source_api=__webpack_require__(3854);var _use_http_request=__webpack_require__(1439);var _runtime_types=__webpack_require__(1418);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var pickIndexPattern=function pickIndexPattern(source,type){if(!source){return"unknown-index"}if(type==="logs"){return source.configuration.logAlias}if(type==="metrics"){return source.configuration.metricAlias}return"".concat(source.configuration.logAlias,",").concat(source.configuration.metricAlias)};exports.pickIndexPattern=pickIndexPattern;var useSourceViaHttp=function useSourceViaHttp(_ref){var _ref$sourceId=_ref.sourceId,sourceId=_ref$sourceId===void 0?"default":_ref$sourceId,_ref$type=_ref.type,type=_ref$type===void 0?"both":_ref$type,fetch=_ref.fetch,toastWarning=_ref.toastWarning;var decodeResponse=function decodeResponse(response){return(0,_pipeable.pipe)(_source_api.SourceResponseRuntimeType.decode(response),(0,_Either.fold)((0,_runtime_types.throwErrors)(_runtime_types.createPlainError),_function.identity))};var _useHTTPRequest=(0,_use_http_request.useHTTPRequest)("/api/metrics/source/".concat(sourceId,"/").concat(type),"GET",null,decodeResponse,fetch,toastWarning),error=_useHTTPRequest.error,loading=_useHTTPRequest.loading,response=_useHTTPRequest.response,makeRequest=_useHTTPRequest.makeRequest;(0,_react.useEffect)((function(){_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return makeRequest();case 2:case"end":return _context.stop()}}}),_callee)})))()}),[makeRequest]);var createDerivedIndexPattern=function createDerivedIndexPattern(){var indexType=arguments.length>0&&arguments[0]!==undefined?arguments[0]:type;return{fields:(response===null||response===void 0?void 0:response.source)?response.status.indexFields:[],title:pickIndexPattern(response===null||response===void 0?void 0:response.source,indexType)}};var source=(0,_react.useMemo)((function(){return response?_objectSpread({},response.source,{status:response.status}):null}),[response]);return{createDerivedIndexPattern:createDerivedIndexPattern,source:source,loading:loading,error:error}};exports.useSourceViaHttp=useSourceViaHttp;var SourceViaHttp=(0,_constate.default)(useSourceViaHttp);exports.SourceViaHttp=SourceViaHttp;var _SourceViaHttp=_slicedToArray(SourceViaHttp,2),SourceViaHttpProvider=_SourceViaHttp[0],useSourceViaHttpContext=_SourceViaHttp[1];exports.useSourceViaHttpContext=useSourceViaHttpContext;exports.SourceViaHttpProvider=SourceViaHttpProvider},3854:function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.SourceConfigurationSavedObjectRuntimeType=exports.SourceResponseRuntimeType=exports.SourceRuntimeType=exports.SourceConfigurationRuntimeType=exports.StaticSourceConfigurationRuntimeType=exports.pickSavedSourceConfiguration=exports.SavedSourceConfigurationRuntimeType=exports.SavedSourceConfigurationColumnRuntimeType=exports.SavedSourceConfigurationFieldColumnRuntimeType=exports.SavedSourceConfigurationMessageColumnRuntimeType=exports.SavedSourceConfigurationTimestampColumnRuntimeType=exports.TimestampFromString=void 0;var rt=_interopRequireWildcard(__webpack_require__(110));var _moment=_interopRequireDefault(__webpack_require__(15));var _pipeable=__webpack_require__(265);var _Either=__webpack_require__(135);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var TimestampFromString=new rt.Type("TimestampFromString",(function(input){return typeof input==="number"}),(function(input,context){return(0,_pipeable.pipe)(rt.string.validate(input,context),(0,_Either.chain)((function(stringInput){var momentValue=(0,_moment.default)(stringInput);return momentValue.isValid()?rt.success(momentValue.valueOf()):rt.failure(stringInput,context)})))}),(function(output){return new Date(output).toISOString()}));exports.TimestampFromString=TimestampFromString;var SavedSourceConfigurationFieldsRuntimeType=rt.partial({container:rt.string,host:rt.string,pod:rt.string,tiebreaker:rt.string,timestamp:rt.string});var SavedSourceConfigurationTimestampColumnRuntimeType=rt.type({timestampColumn:rt.type({id:rt.string})});exports.SavedSourceConfigurationTimestampColumnRuntimeType=SavedSourceConfigurationTimestampColumnRuntimeType;var SavedSourceConfigurationMessageColumnRuntimeType=rt.type({messageColumn:rt.type({id:rt.string})});exports.SavedSourceConfigurationMessageColumnRuntimeType=SavedSourceConfigurationMessageColumnRuntimeType;var SavedSourceConfigurationFieldColumnRuntimeType=rt.type({fieldColumn:rt.type({id:rt.string,field:rt.string})});exports.SavedSourceConfigurationFieldColumnRuntimeType=SavedSourceConfigurationFieldColumnRuntimeType;var SavedSourceConfigurationColumnRuntimeType=rt.union([SavedSourceConfigurationTimestampColumnRuntimeType,SavedSourceConfigurationMessageColumnRuntimeType,SavedSourceConfigurationFieldColumnRuntimeType]);exports.SavedSourceConfigurationColumnRuntimeType=SavedSourceConfigurationColumnRuntimeType;var SavedSourceConfigurationRuntimeType=rt.partial({name:rt.string,description:rt.string,metricAlias:rt.string,logAlias:rt.string,fields:SavedSourceConfigurationFieldsRuntimeType,logColumns:rt.array(SavedSourceConfigurationColumnRuntimeType)});exports.SavedSourceConfigurationRuntimeType=SavedSourceConfigurationRuntimeType;var pickSavedSourceConfiguration=function pickSavedSourceConfiguration(value){var name=value.name,description=value.description,metricAlias=value.metricAlias,logAlias=value.logAlias,fields=value.fields,logColumns=value.logColumns;var container=fields.container,host=fields.host,pod=fields.pod,tiebreaker=fields.tiebreaker,timestamp=fields.timestamp;return{name:name,description:description,metricAlias:metricAlias,logAlias:logAlias,fields:{container:container,host:host,pod:pod,tiebreaker:tiebreaker,timestamp:timestamp},logColumns:logColumns}};exports.pickSavedSourceConfiguration=pickSavedSourceConfiguration;var StaticSourceConfigurationFieldsRuntimeType=rt.partial(_objectSpread({},SavedSourceConfigurationFieldsRuntimeType.props,{message:rt.array(rt.string)}));var StaticSourceConfigurationRuntimeType=rt.partial({name:rt.string,description:rt.string,metricAlias:rt.string,logAlias:rt.string,fields:StaticSourceConfigurationFieldsRuntimeType,logColumns:rt.array(SavedSourceConfigurationColumnRuntimeType)});exports.StaticSourceConfigurationRuntimeType=StaticSourceConfigurationRuntimeType;var SourceConfigurationFieldsRuntimeType=rt.type(_objectSpread({},StaticSourceConfigurationFieldsRuntimeType.props));var SourceConfigurationRuntimeType=rt.type(_objectSpread({},SavedSourceConfigurationRuntimeType.props,{fields:SourceConfigurationFieldsRuntimeType,logColumns:rt.array(SavedSourceConfigurationColumnRuntimeType)}));exports.SourceConfigurationRuntimeType=SourceConfigurationRuntimeType;var SourceRuntimeType=rt.intersection([rt.type({id:rt.string,origin:rt.keyof({fallback:null,internal:null,stored:null}),configuration:SourceConfigurationRuntimeType}),rt.partial({version:rt.string,updatedAt:rt.number})]);exports.SourceRuntimeType=SourceRuntimeType;var SourceStatusFieldRuntimeType=rt.type({name:rt.string,type:rt.string,searchable:rt.boolean,aggregatable:rt.boolean,displayable:rt.boolean});var SourceStatusRuntimeType=rt.type({logIndicesExist:rt.boolean,metricIndicesExist:rt.boolean,indexFields:rt.array(SourceStatusFieldRuntimeType)});var SourceResponseRuntimeType=rt.type({source:SourceRuntimeType,status:SourceStatusRuntimeType});exports.SourceResponseRuntimeType=SourceResponseRuntimeType;var SourceConfigurationSavedObjectRuntimeType=rt.intersection([rt.type({id:rt.string,attributes:SavedSourceConfigurationRuntimeType}),rt.partial({version:rt.string,updated_at:TimestampFromString})]);exports.SourceConfigurationSavedObjectRuntimeType=SourceConfigurationSavedObjectRuntimeType},3855:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateMetricThreshold=validateMetricThreshold;var _i18n=__webpack_require__(1);function validateMetricThreshold(_ref){var criteria=_ref.criteria;var validationResult={errors:{}};var errors={};validationResult.errors=errors;if(!criteria||!criteria.length){return validationResult}criteria.forEach((function(c,idx){var id=idx.toString();errors[id]=errors[id]||{aggField:[],timeSizeUnit:[],timeWindowSize:[],threshold0:[],threshold1:[],metric:[]};if(!c.aggType){errors[id].aggField.push(_i18n.i18n.translate("xpack.infra.metrics.alertFlyout.error.aggregationRequired",{defaultMessage:"Aggreation is required."}))}if(!c.threshold||!c.threshold.length){errors[id].threshold0.push(_i18n.i18n.translate("xpack.infra.metrics.alertFlyout.error.thresholdRequired",{defaultMessage:"Threshold is required."}))}if(c.comparator==="between"&&(!c.threshold||c.threshold.length<2)){errors[id].threshold1.push(_i18n.i18n.translate("xpack.infra.metrics.alertFlyout.error.thresholdRequired",{defaultMessage:"Threshold is required."}))}if(!c.timeSize){errors[id].timeWindowSize.push(_i18n.i18n.translate("xpack.infra.metrics.alertFlyout.error.timeRequred",{defaultMessage:"Time size is Required."}))}if(!c.metric&&c.aggType!=="count"){errors[id].metric.push(_i18n.i18n.translate("xpack.infra.metrics.alertFlyout.error.metricRequired",{defaultMessage:"Metric is required."}))}}));return validationResult}},3856:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createBytesFormatter=void 0;var _lib=__webpack_require__(473);var _number=__webpack_require__(627);var _LABELS,_BASES;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var LABELS=(_LABELS={},_defineProperty(_LABELS,_lib.InfraWaffleMapDataFormat.bytesDecimal,["B","kB","MB","GB","TB","PB","EB","ZB","YB"]),_defineProperty(_LABELS,_lib.InfraWaffleMapDataFormat.bitsDecimal,["bit","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"]),_defineProperty(_LABELS,_lib.InfraWaffleMapDataFormat.abbreviatedNumber,["","K","M","B","T"]),_LABELS);var BASES=(_BASES={},_defineProperty(_BASES,_lib.InfraWaffleMapDataFormat.bytesDecimal,1e3),_defineProperty(_BASES,_lib.InfraWaffleMapDataFormat.bitsDecimal,1e3),_defineProperty(_BASES,_lib.InfraWaffleMapDataFormat.abbreviatedNumber,1e3),_BASES);var createBytesFormatter=function createBytesFormatter(format){return function(bytes){var labels=LABELS[format];var base=BASES[format];var value=format===_lib.InfraWaffleMapDataFormat.bitsDecimal?bytes*8:bytes;var power=Math.min(Math.floor(Math.log(Math.abs(value))/Math.log(base)),labels.length-1);if(power<0){return"".concat((0,_number.formatNumber)(value)).concat(labels[0])}return"".concat((0,_number.formatNumber)(value/Math.pow(base,power))).concat(labels[power])}};exports.createBytesFormatter=createBytesFormatter},3857:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatPercent=void 0;var _number=__webpack_require__(627);var formatPercent=function formatPercent(val){return"".concat((0,_number.formatNumber)(val*100),"%")};exports.formatPercent=formatPercent},3858:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatHighPercision=void 0;var formatHighPercision=function formatHighPercision(val){return Number(val).toLocaleString("en",{maximumFractionDigits:5})};exports.formatHighPercision=formatHighPercision},3859:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionBreakdownGraph=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _numeral=_interopRequireDefault(__webpack_require__(164));var _lodash=__webpack_require__(3);var _i18n=__webpack_require__(160);var _TransactionLineChart=__webpack_require__(626);var _formatters=__webpack_require__(72);var _variables=__webpack_require__(26);var _isValidCoordinateValue=__webpack_require__(347);var _public=__webpack_require__(78);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var tickFormatY=function tickFormatY(y){return(0,_numeral.default)(y||0).format("0 %")};var formatTooltipValue=function formatTooltipValue(coordinate){return(0,_isValidCoordinateValue.isValidCoordinateValue)(coordinate.y)?(0,_formatters.asPercent)(coordinate.y,1):_i18n.NOT_AVAILABLE_LABEL};var TransactionBreakdownGraph=function TransactionBreakdownGraph(props){var timeseries=props.timeseries;var trackApmEvent=(0,_public.useUiTracker)({app:"apm"});var handleHover=(0,_react.useMemo)((function(){return(0,_lodash.throttle)((function(){return trackApmEvent({metric:"hover_breakdown_chart"})}),6e4)}),[trackApmEvent]);return _react.default.createElement(_TransactionLineChart.TransactionLineChart,{series:timeseries,tickFormatY:tickFormatY,formatTooltipValue:formatTooltipValue,yMax:1,height:_variables.unit*12,stacked:true,onHover:handleHover})};exports.TransactionBreakdownGraph=TransactionBreakdownGraph},3860:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionList=TransactionList;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _i18n2=__webpack_require__(160);var _variables=__webpack_require__(26);var _formatters=__webpack_require__(72);var _ImpactBar=__webpack_require__(1247);var _ManagedTable=__webpack_require__(239);var _LoadingStatePrompt=__webpack_require__(209);var _EmptyMessage=__webpack_require__(343);var _TransactionDetailLink=__webpack_require__(288);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var TransactionNameLink=(0,_styledComponents.default)(_TransactionDetailLink.TransactionDetailLink).withConfig({displayName:"TransactionNameLink",componentId:"sc-1p719lf-0"})(["",";font-family:",";"],(0,_variables.truncate)("100%"),_variables.fontFamilyCode);var toMilliseconds=function toMilliseconds(time){return(0,_formatters.convertTo)({unit:"milliseconds",microseconds:time}).formatted};function TransactionList(_ref){var items=_ref.items,isLoading=_ref.isLoading;var columns=(0,_react.useMemo)((function(){return[{field:"name",name:_i18n.i18n.translate("xpack.apm.transactionsTable.nameColumnLabel",{defaultMessage:"Name"}),width:"50%",sortable:true,render:function render(transactionName,_ref2){var sample=_ref2.sample;return _react.default.createElement(_eui.EuiToolTip,{id:"transaction-name-link-tooltip",content:transactionName||_i18n2.NOT_AVAILABLE_LABEL},_react.default.createElement(TransactionNameLink,{serviceName:sample.service.name,transactionId:sample.transaction.id,traceId:sample.trace.id,transactionName:sample.transaction.name,transactionType:sample.transaction.type},transactionName||_i18n2.NOT_AVAILABLE_LABEL))}},{field:"averageResponseTime",name:_i18n.i18n.translate("xpack.apm.transactionsTable.avgDurationColumnLabel",{defaultMessage:"Avg. duration"}),sortable:true,dataType:"number",render:function render(time){return toMilliseconds(time)}},{field:"p95",name:_i18n.i18n.translate("xpack.apm.transactionsTable.95thPercentileColumnLabel",{defaultMessage:"95th percentile"}),sortable:true,dataType:"number",render:function render(time){return toMilliseconds(time)}},{field:"transactionsPerMinute",name:_i18n.i18n.translate("xpack.apm.transactionsTable.transactionsPerMinuteColumnLabel",{defaultMessage:"Trans. per minute"}),sortable:true,dataType:"number",render:function render(value){return"".concat((0,_formatters.asDecimal)(value)," ").concat(_i18n.i18n.translate("xpack.apm.transactionsTable.transactionsPerMinuteUnitLabel",{defaultMessage:"tpm"}))}},{field:"impact",name:_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.transactionsTable.impactColumnDescription",{defaultMessage:"The most used and slowest endpoints in your service. It's calculated by taking the relative average duration times the number of transactions per minute."})},_react.default.createElement(_react.default.Fragment,null,_i18n.i18n.translate("xpack.apm.transactionsTable.impactColumnLabel",{defaultMessage:"Impact"})," ",_react.default.createElement(_eui.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),sortable:true,dataType:"number",render:function render(value){return _react.default.createElement(_ImpactBar.ImpactBar,{value:value})}}]}),[]);var noItemsMessage=_react.default.createElement(_EmptyMessage.EmptyMessage,{heading:_i18n.i18n.translate("xpack.apm.transactionsTable.notFoundLabel",{defaultMessage:"No transactions were found."})});return _react.default.createElement(_ManagedTable.ManagedTable,{noItemsMessage:isLoading?_react.default.createElement(_LoadingStatePrompt.LoadingStatePrompt,null):noItemsMessage,columns:columns,items:items,initialSortField:"impact",initialSortDirection:"desc",initialPageSize:25})}},3861:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useRedirect=useRedirect;var _react=__webpack_require__(0);function useRedirect(history,redirectLocation){(0,_react.useEffect)((function(){if(redirectLocation){history.replace(redirectLocation)}}))}},3862:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionTypeFilter=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _useUrlParams2=__webpack_require__(35);var _history=__webpack_require__(82);var _url_helpers=__webpack_require__(71);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TransactionTypeFilter=function TransactionTypeFilter(_ref){var transactionTypes=_ref.transactionTypes;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),transactionType=_useUrlParams.urlParams.transactionType;var options=transactionTypes.map((function(type){return{text:type,value:type}}));return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"xxxs",textTransform:"uppercase"},_react.default.createElement("h4",null,_i18n.i18n.translate("xpack.apm.localFilters.titles.transactionType",{defaultMessage:"Transaction type"}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"none"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiSelect,{options:options,value:transactionType,compressed:true,onChange:function onChange(event){var newLocation=_objectSpread({},_history.history.location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(_history.history.location.search),{transactionType:event.target.value}))});_history.history.push(newLocation)}}))};exports.TransactionTypeFilter=TransactionTypeFilter},3863:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceIntegrations=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(3);var _react=_interopRequireWildcard(__webpack_require__(0));var _LicenseContext=__webpack_require__(440);var _MachineLearningFlyout=__webpack_require__(3864);var _WatcherFlyout=__webpack_require__(3867);var _ApmPluginContext=__webpack_require__(340);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ServiceIntegrations=function(_React$Component){_inherits(ServiceIntegrations,_React$Component);function ServiceIntegrations(){var _getPrototypeOf2;var _this;_classCallCheck(this,ServiceIntegrations);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ServiceIntegrations)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"context",void 0);_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false,activeFlyout:null});_defineProperty(_assertThisInitialized(_this),"getPanelItems",(0,_lodash.memoize)((function(mlAvailable){var panelItems=[];if(mlAvailable){panelItems=panelItems.concat(_this.getMLPanelItems())}return panelItems.concat(_this.getWatcherPanelItems())})));_defineProperty(_assertThisInitialized(_this),"getMLPanelItems",(function(){return[{name:_i18n.i18n.translate("xpack.apm.serviceDetails.integrationsMenu.enableMLAnomalyDetectionButtonLabel",{defaultMessage:"Enable ML anomaly detection"}),icon:"machineLearningApp",toolTipContent:_i18n.i18n.translate("xpack.apm.serviceDetails.integrationsMenu.enableMLAnomalyDetectionButtonTooltip",{defaultMessage:"Set up a machine learning job for this service"}),onClick:function onClick(){_this.closePopover();_this.openFlyout("ML")}}]}));_defineProperty(_assertThisInitialized(_this),"getWatcherPanelItems",(function(){var core=_this.context.core;return[{name:_i18n.i18n.translate("xpack.apm.serviceDetails.integrationsMenu.enableWatcherErrorReportsButtonLabel",{defaultMessage:"Enable watcher error reports"}),icon:"watchesApp",onClick:function onClick(){_this.closePopover();_this.openFlyout("Watcher")}},{name:_i18n.i18n.translate("xpack.apm.serviceDetails.integrationsMenu.viewWatchesButtonLabel",{defaultMessage:"View existing watches"}),icon:"watchesApp",href:core.http.basePath.prepend("/app/kibana#/management/elasticsearch/watcher"),target:"_blank",onClick:function onClick(){return _this.closePopover()}}]}));_defineProperty(_assertThisInitialized(_this),"openPopover",(function(){return _this.setState({isPopoverOpen:true})}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){return _this.setState({isPopoverOpen:false})}));_defineProperty(_assertThisInitialized(_this),"openFlyout",(function(name){return _this.setState({activeFlyout:name})}));_defineProperty(_assertThisInitialized(_this),"closeFlyouts",(function(){return _this.setState({activeFlyout:null})}));return _this}_createClass(ServiceIntegrations,[{key:"render",value:function render(){var _this2=this;var button=_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"arrowDown",iconSide:"right",onClick:this.openPopover},_i18n.i18n.translate("xpack.apm.serviceDetails.integrationsMenu.integrationsButtonLabel",{defaultMessage:"Integrations"}));return _react.default.createElement(_LicenseContext.LicenseContext.Consumer,null,(function(license){return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiPopover,{id:"integrations-menu",button:button,isOpen:_this2.state.isPopoverOpen,closePopover:_this2.closePopover,panelPaddingSize:"none",anchorPosition:"downRight"},_react.default.createElement(_eui.EuiContextMenu,{initialPanelId:0,panels:[{id:0,items:_this2.getPanelItems(license===null||license===void 0?void 0:license.getFeature("ml").isAvailable)}]})),_react.default.createElement(_MachineLearningFlyout.MachineLearningFlyout,{isOpen:_this2.state.activeFlyout==="ML",onClose:_this2.closeFlyouts,urlParams:_this2.props.urlParams}),_react.default.createElement(_WatcherFlyout.WatcherFlyout,{isOpen:_this2.state.activeFlyout==="Watcher",onClose:_this2.closeFlyouts,urlParams:_this2.props.urlParams}))}))}}]);return ServiceIntegrations}(_react.default.Component);exports.ServiceIntegrations=ServiceIntegrations;_defineProperty(ServiceIntegrations,"contextType",_ApmPluginContext.ApmPluginContext)},3864:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.MachineLearningFlyout=void 0;var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _public=__webpack_require__(14);var _ml=__webpack_require__(628);var _MLJobLink=__webpack_require__(625);var _view=__webpack_require__(3865);var _ApmPluginContext=__webpack_require__(340);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MachineLearningFlyout=function(_Component){_inherits(MachineLearningFlyout,_Component);function MachineLearningFlyout(){var _getPrototypeOf2;var _this;_classCallCheck(this,MachineLearningFlyout);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(MachineLearningFlyout)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isCreatingJob:false});_defineProperty(_assertThisInitialized(_this),"onClickCreate",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref2){var transactionType,http,serviceName,res,didSucceed;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:transactionType=_ref2.transactionType;_this.setState({isCreatingJob:true});_context.prev=2;http=_this.context.core.http;serviceName=_this.props.urlParams.serviceName;if(serviceName){_context.next=7;break}throw new Error("Service name is required to create this ML job");case 7:_context.next=9;return(0,_ml.startMLJob)({http:http,serviceName:serviceName,transactionType:transactionType});case 9:res=_context.sent;didSucceed=res.datafeeds[0].success&&res.jobs[0].success;if(didSucceed){_context.next=13;break}throw new Error("Creating ML job failed");case 13:_this.addSuccessToast({transactionType:transactionType});_context.next=19;break;case 16:_context.prev=16;_context.t0=_context["catch"](2);_this.addErrorToast();case 19:_this.setState({isCreatingJob:false});_this.props.onClose();case 21:case"end":return _context.stop()}}}),_callee,null,[[2,16]])})));return function(_x){return _ref.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"addErrorToast",(function(){var core=_this.context;var urlParams=_this.props.urlParams;var serviceName=urlParams.serviceName;if(!serviceName){return}core.notifications.toasts.addWarning({title:_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.jobCreationFailedNotificationTitle",{defaultMessage:"Job creation failed"}),text:(0,_public.toMountPoint)(_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.jobCreationFailedNotificationText",{defaultMessage:"Your current license may not allow for creating machine learning jobs, or this job may already exist."})))})}));_defineProperty(_assertThisInitialized(_this),"addSuccessToast",(function(_ref3){var transactionType=_ref3.transactionType;var core=_this.context.core;var urlParams=_this.props.urlParams;var serviceName=urlParams.serviceName;if(!serviceName){return}core.notifications.toasts.addSuccess({title:_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.jobCreatedNotificationTitle",{defaultMessage:"Job successfully created"}),text:(0,_public.toMountPoint)(_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.jobCreatedNotificationText",{defaultMessage:"The analysis is now running for {serviceName} ({transactionType}). It might take a while before results are added to the response times graph.",values:{serviceName:serviceName,transactionType:transactionType}})," ",_react.default.createElement(_ApmPluginContext.ApmPluginContext.Provider,{value:_this.context},_react.default.createElement(_MLJobLink.MLJobLink,{serviceName:serviceName,transactionType:transactionType},_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.jobCreatedNotificationText.viewJobLinkText",{defaultMessage:"View job"})))))})}));return _this}_createClass(MachineLearningFlyout,[{key:"render",value:function render(){var _this$props=this.props,isOpen=_this$props.isOpen,onClose=_this$props.onClose,urlParams=_this$props.urlParams;var serviceName=urlParams.serviceName;var isCreatingJob=this.state.isCreatingJob;if(!isOpen||!serviceName){return null}return _react.default.createElement(_view.MachineLearningFlyoutView,{isCreatingJob:isCreatingJob,onClickCreate:this.onClickCreate,onClose:onClose,urlParams:urlParams})}}]);return MachineLearningFlyout}(_react.Component);exports.MachineLearningFlyout=MachineLearningFlyout;_defineProperty(MachineLearningFlyout,"contextType",_ApmPluginContext.ApmPluginContext)},3865:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MachineLearningFlyoutView=MachineLearningFlyoutView;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=__webpack_require__(4);var _react2=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(3);var _useFetcher2=__webpack_require__(36);var _ml=__webpack_require__(628);var _MLJobLink=__webpack_require__(625);var _MLLink=__webpack_require__(1245);var _TransactionSelect=__webpack_require__(3866);var _useServiceTransactionTypes=__webpack_require__(629);var _useApmPluginContext=__webpack_require__(62);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function MachineLearningFlyoutView(_ref){var isCreatingJob=_ref.isCreatingJob,onClickCreate=_ref.onClickCreate,onClose=_ref.onClose,urlParams=_ref.urlParams;var serviceName=urlParams.serviceName;var transactionTypes=(0,_useServiceTransactionTypes.useServiceTransactionTypes)(urlParams);var _useState=(0,_react2.useState)(undefined),_useState2=_slicedToArray(_useState,2),selectedTransactionType=_useState2[0],setSelectedTransactionType=_useState2[1];var http=(0,_useApmPluginContext.useApmPluginContext)().core.http;var _useFetcher=(0,_useFetcher2.useFetcher)((function(){if(serviceName&&selectedTransactionType){return(0,_ml.getHasMLJob)({serviceName:serviceName,transactionType:selectedTransactionType,http:http})}}),[serviceName,selectedTransactionType,http]),_useFetcher$data=_useFetcher.data,hasMLJob=_useFetcher$data===void 0?false:_useFetcher$data,status=_useFetcher.status;(0,_react2.useEffect)((function(){setSelectedTransactionType(transactionTypes[0])}),[transactionTypes]);if(!serviceName||!selectedTransactionType||(0,_lodash.isEmpty)(transactionTypes)){return null}var isLoadingMLJob=status===_useFetcher2.FETCH_STATUS.LOADING;return _react2.default.createElement(_eui.EuiFlyout,{onClose:onClose,size:"s"},_react2.default.createElement(_eui.EuiFlyoutHeader,null,_react2.default.createElement(_eui.EuiTitle,null,_react2.default.createElement("h2",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.enableAnomalyDetectionTitle",{defaultMessage:"Enable anomaly detection"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"s"})),_react2.default.createElement(_eui.EuiFlyoutBody,null,hasMLJob&&_react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiCallOut,{title:_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.callout.jobExistsTitle",{defaultMessage:"Job already exists"}),color:"success",iconType:"check"},_react2.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.callout.jobExistsDescription",{defaultMessage:"There is currently a job running for {serviceName} ({transactionType}).",values:{serviceName:serviceName,transactionType:selectedTransactionType}})," ",_react2.default.createElement(_MLJobLink.MLJobLink,{serviceName:serviceName,transactionType:selectedTransactionType},_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.callout.jobExistsDescription.viewJobLinkText",{defaultMessage:"View existing job"})))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"})),_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.apm.serviceDetails.enableAnomalyDetectionPanel.createMLJobDescription",defaultMessage:"Here you can create a machine learning job to calculate anomaly scores on durations for APM transactions within the {serviceName} service. Once enabled, {transactionDurationGraphText} will show the expected bounds and annotate the graph once the anomaly score is >=75.",values:{serviceName:serviceName,transactionDurationGraphText:_react2.default.createElement("b",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.createMLJobDescription.transactionDurationGraphText",{defaultMessage:"the transaction duration graph"}))}})),_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.apm.serviceDetails.enableAnomalyDetectionPanel.manageMLJobDescription",defaultMessage:"Jobs can be created for each service + transaction type combination. Once a job is created, you can manage it and see more details in the {mlJobsPageLink}.",values:{mlJobsPageLink:_react2.default.createElement(_MLLink.MLLink,null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.manageMLJobDescription.mlJobsPageLinkText",{defaultMessage:"Machine Learning jobs management page"}))}})," ",_react2.default.createElement("em",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.manageMLJobDescription.noteText",{defaultMessage:"Note: It might take a few minutes for the job to begin calculating results."})))),_react2.default.createElement(_eui.EuiSpacer,null)),_react2.default.createElement(_eui.EuiFlyoutFooter,null,_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexEnd"},_react2.default.createElement(_eui.EuiFlexItem,null,transactionTypes.length>1?_react2.default.createElement(_TransactionSelect.TransactionSelect,{selectedTransactionType:selectedTransactionType,transactionTypes:transactionTypes,onChange:function onChange(value){setSelectedTransactionType(value)}}):null),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_eui.EuiButton,{onClick:function onClick(){return onClickCreate({transactionType:selectedTransactionType})},fill:true,disabled:isCreatingJob||hasMLJob||isLoadingMLJob},_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.createNewJobButtonLabel",{defaultMessage:"Create job"})))))))}},3866:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionSelect=TransactionSelect;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TransactionSelect(_ref){var transactionTypes=_ref.transactionTypes,onChange=_ref.onChange,selectedTransactionType=_ref.selectedTransactionType;return _react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.apm.serviceDetails.enableAnomalyDetectionPanel.selectTransactionTypeLabel",{defaultMessage:"Select a transaction type for this job"})},_react.default.createElement(_eui.EuiSuperSelect,{valueOfSelected:selectedTransactionType,onChange:onChange,options:transactionTypes.map((function(transactionType){return{value:transactionType,inputDisplay:transactionType,dropdownDisplay:_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,null,transactionType)))}}))}))}},3867:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.WatcherFlyout=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=__webpack_require__(4);var _lodash=__webpack_require__(3);var _momentTimezone=_interopRequireDefault(__webpack_require__(39));var _react2=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _public=__webpack_require__(14);var _KibanaLink=__webpack_require__(612);var _createErrorGroupWatch=__webpack_require__(3868);var _ElasticDocsLink=__webpack_require__(238);var _ApmPluginContext=__webpack_require__(340);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SmallInput=_styledComponents.default.div.withConfig({displayName:"SmallInput",componentId:"dlifd9-0"})([".euiFormRow{max-width:85px;}.euiFormHelpText{width:200px;}"]);var WatcherFlyout=function(_Component){_inherits(WatcherFlyout,_Component);function WatcherFlyout(){var _getPrototypeOf2;var _this;_classCallCheck(this,WatcherFlyout);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(WatcherFlyout)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"context",void 0);_defineProperty(_assertThisInitialized(_this),"state",{schedule:"daily",threshold:10,actions:{slack:false,email:false},interval:{value:10,unit:"m"},daily:"08:00",emails:"",slackUrl:""});_defineProperty(_assertThisInitialized(_this),"onChangeSchedule",(function(schedule){_this.setState({schedule:schedule})}));_defineProperty(_assertThisInitialized(_this),"onChangeThreshold",(function(event){_this.setState({threshold:parseInt(event.target.value,10)})}));_defineProperty(_assertThisInitialized(_this),"onChangeDailyUnit",(function(event){_this.setState({daily:event.target.value})}));_defineProperty(_assertThisInitialized(_this),"onChangeIntervalValue",(function(event){_this.setState({interval:{value:parseInt(event.target.value,10),unit:_this.state.interval.unit}})}));_defineProperty(_assertThisInitialized(_this),"onChangeIntervalUnit",(function(event){_this.setState({interval:{value:_this.state.interval.value,unit:event.target.value}})}));_defineProperty(_assertThisInitialized(_this),"onChangeAction",(function(actionName){_this.setState({actions:_objectSpread({},_this.state.actions,_defineProperty({},actionName,!_this.state.actions[actionName]))})}));_defineProperty(_assertThisInitialized(_this),"onChangeEmails",(function(event){_this.setState({emails:event.target.value})}));_defineProperty(_assertThisInitialized(_this),"onChangeSlackUrl",(function(event){_this.setState({slackUrl:event.target.value})}));_defineProperty(_assertThisInitialized(_this),"createWatch",(function(_ref){var indexPatternTitle=_ref.indexPatternTitle;return function(){var serviceName=_this.props.urlParams.serviceName;var core=_this.context.core;if(!serviceName){return}var emails=_this.state.actions.email?_this.state.emails.split(",").map((function(email){return email.trim()})).filter((function(email){return!!email})):[];var slackUrl=_this.state.actions.slack?_this.state.slackUrl:"";var schedule=_this.state.schedule==="interval"?{interval:"".concat(_this.state.interval.value).concat(_this.state.interval.unit)}:{daily:{at:"".concat(_this.state.daily)}};var timeRange=_this.state.schedule==="interval"?{value:_this.state.interval.value,unit:_this.state.interval.unit}:{value:24,unit:"h"};return(0,_createErrorGroupWatch.createErrorGroupWatch)({http:core.http,emails:emails,schedule:schedule,serviceName:serviceName,slackUrl:slackUrl,threshold:_this.state.threshold,timeRange:timeRange,apmIndexPatternTitle:indexPatternTitle}).then((function(id){_this.props.onClose();_this.addSuccessToast(id)})).catch((function(e){console.error(e);_this.addErrorToast()}))}}));_defineProperty(_assertThisInitialized(_this),"addErrorToast",(function(){var core=_this.context.core;core.notifications.toasts.addWarning({title:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.watchCreationFailedNotificationTitle",{defaultMessage:"Watch creation failed"}),text:(0,_public.toMountPoint)(_react2.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.watchCreationFailedNotificationText",{defaultMessage:"Make sure your user has permission to create watches."})))})}));_defineProperty(_assertThisInitialized(_this),"addSuccessToast",(function(id){var core=_this.context.core;core.notifications.toasts.addSuccess({title:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.watchCreatedNotificationTitle",{defaultMessage:"New watch created!"}),text:(0,_public.toMountPoint)(_react2.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.watchCreatedNotificationText",{defaultMessage:"The watch is now ready and will send error reports for {serviceName}.",values:{serviceName:_this.props.urlParams.serviceName}})," ",_react2.default.createElement(_ApmPluginContext.ApmPluginContext.Provider,{value:_this.context},_react2.default.createElement(_KibanaLink.KibanaLink,{path:"/management/elasticsearch/watcher/watches/watch/".concat(id)},_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.watchCreatedNotificationText.viewWatchLinkText",{defaultMessage:"View watch"})))))})}));return _this}_createClass(WatcherFlyout,[{key:"render",value:function render(){var _this2=this;if(!this.props.isOpen){return null}var dailyTime=this.state.daily;var inputTime="".concat(dailyTime,"Z");var inputFormat="HH:mmZ";var dailyTimeFormatted=(0,_momentTimezone.default)(inputTime,inputFormat).format("HH:mm");var dailyTime12HourFormatted=(0,_momentTimezone.default)(inputTime,inputFormat).format("hh:mm A (z)");var intervalHours=(0,_lodash.range)(24).map((function(i){var hour=(0,_lodash.padLeft)(i.toString(),2,"0");return{value:"".concat(hour,":00"),text:"".concat(hour,":00 UTC")}}));var flyoutBody=_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.apm.serviceDetails.enableErrorReportsPanel.formDescription",defaultMessage:"This form will assist in creating a Watch that can notify you of error occurrences from this service. To learn more about Watcher, please read our {documentationLink}.",values:{documentationLink:_react2.default.createElement(_ElasticDocsLink.ElasticDocsLink,{target:"_blank",section:"/x-pack",path:"/watcher-getting-started.html"},_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.formDescription.documentationLinkText",{defaultMessage:"documentation"}))}})),_react2.default.createElement(_eui.EuiForm,null,_react2.default.createElement("h4",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.conditionTitle",{defaultMessage:"Condition"})),_react2.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.occurrencesThresholdLabel",{defaultMessage:"Occurrences threshold per error group"}),helpText:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.occurrencesThresholdHelpText",{defaultMessage:"Threshold to be met for error group to be included in report."}),compressed:true},_react2.default.createElement(_eui.EuiFieldNumber,{icon:"number",min:1,value:this.state.threshold,onChange:this.onChangeThreshold})),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement("h4",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.triggerScheduleTitle",{defaultMessage:"Trigger schedule"})),_react2.default.createElement(_eui.EuiText,{size:"xs",color:"subdued"},_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.triggerScheduleDescription",{defaultMessage:"Choose the time interval for the report, when the threshold is exceeded."})),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiRadio,{id:"daily",label:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.dailyReportRadioButtonLabel",{defaultMessage:"Daily report"}),onChange:function onChange(){return _this2.onChangeSchedule("daily")},checked:this.state.schedule==="daily"}),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFormRow,{helpText:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.dailyReportHelpText",{defaultMessage:"The daily report will be sent at {dailyTimeFormatted} / {dailyTime12HourFormatted}.",values:{dailyTimeFormatted:dailyTimeFormatted,dailyTime12HourFormatted:dailyTime12HourFormatted}}),compressed:true},_react2.default.createElement(_eui.EuiSelect,{value:dailyTime,onChange:this.onChangeDailyUnit,options:intervalHours,disabled:this.state.schedule!=="daily"})),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiRadio,{id:"interval",label:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.intervalRadioButtonLabel",{defaultMessage:"Interval"}),onChange:function onChange(){return _this2.onChangeSchedule("interval")},checked:this.state.schedule==="interval"}),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(SmallInput,null,_react2.default.createElement(_eui.EuiFormRow,{helpText:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.intervalHelpText",{defaultMessage:"Time interval between reports."}),compressed:true},_react2.default.createElement(_eui.EuiFieldNumber,{compressed:true,icon:"clock",min:1,value:this.state.interval.value,onChange:this.onChangeIntervalValue,disabled:this.state.schedule!=="interval"})))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{compressed:true},_react2.default.createElement(_eui.EuiSelect,{value:this.state.interval.unit,onChange:this.onChangeIntervalUnit,compressed:true,options:[{value:"m",text:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.intervalUnit.minsLabel",{defaultMessage:"mins"})},{value:"h",text:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.intervalUnit.hrsLabel",{defaultMessage:"hrs"})}],disabled:this.state.schedule!=="interval"})))),_react2.default.createElement("h4",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.actionsTitle",{defaultMessage:"Actions"})),_react2.default.createElement(_eui.EuiText,{size:"xs",color:"subdued"},_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.actionsDescription",{defaultMessage:"Reports can be sent by email or posted to a Slack channel. Each report will include the top 10 errors sorted by occurrence."})),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiSwitch,{label:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.sendEmailLabel",{defaultMessage:"Send email"}),checked:this.state.actions.email,onChange:function onChange(){return _this2.onChangeAction("email")}}),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),this.state.actions.email&&_react2.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.recipientsLabel",{defaultMessage:"Recipients (separated with comma)"}),compressed:true,helpText:_react2.default.createElement("span",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.apm.serviceDetails.enableErrorReportsPanel.recipientsHelpText",defaultMessage:"If you have not configured email, please see the {documentationLink}.",values:{documentationLink:_react2.default.createElement(_ElasticDocsLink.ElasticDocsLink,{target:"_blank",section:"/x-pack",path:"/actions-email.html#configuring-email"},_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.recipientsHelpText.documentationLinkText",{defaultMessage:"documentation"}))}}))},_react2.default.createElement(_eui.EuiFieldText,{compressed:true,icon:"user",value:this.state.emails,onChange:this.onChangeEmails})),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiSwitch,{label:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.sendSlackNotificationLabel",{defaultMessage:"Send Slack notification"}),checked:this.state.actions.slack,onChange:function onChange(){return _this2.onChangeAction("slack")}}),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),this.state.actions.slack&&_react2.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.slackWebhookURLLabel",{defaultMessage:"Slack Webhook URL"}),compressed:true,helpText:_react2.default.createElement("span",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.apm.serviceDetails.enableErrorReportsPanel.slackWebhookURLHelpText",defaultMessage:"To get a Slack webhook, please see the {documentationLink}.",values:{documentationLink:_react2.default.createElement(_eui.EuiLink,{target:"_blank",href:"https://get.slack.help/hc/en-us/articles/115005265063-Incoming-WebHooks-for-Slack"},_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.slackWebhookURLHelpText.documentationLinkText",{defaultMessage:"documentation"}))}}))},_react2.default.createElement(_eui.EuiFieldText,{compressed:true,icon:"link",value:this.state.slackUrl,onChange:this.onChangeSlackUrl}))));return _react2.default.createElement(_eui.EuiFlyout,{onClose:this.props.onClose,size:"s"},_react2.default.createElement(_eui.EuiFlyoutHeader,null,_react2.default.createElement(_eui.EuiTitle,null,_react2.default.createElement("h2",null,_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.enableErrorReportsTitle",{defaultMessage:"Enable error reports"})))),_react2.default.createElement(_eui.EuiFlyoutBody,null,flyoutBody),_react2.default.createElement(_eui.EuiFlyoutFooter,null,_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_ApmPluginContext.ApmPluginContext.Consumer,null,(function(_ref2){var config=_ref2.config;return _react2.default.createElement(_eui.EuiButton,{onClick:_this2.createWatch(config),fill:true,disabled:!_this2.state.actions.email&&!_this2.state.actions.slack},_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.createWatchButtonLabel",{defaultMessage:"Create watch"}))}))))))}}]);return WatcherFlyout}(_react2.Component);exports.WatcherFlyout=WatcherFlyout;_defineProperty(WatcherFlyout,"contextType",_ApmPluginContext.ApmPluginContext)},3868:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createErrorGroupWatch=createErrorGroupWatch;var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(3);var _url=_interopRequireDefault(__webpack_require__(84));var _uuid=_interopRequireDefault(__webpack_require__(111));var _elasticsearch_fieldnames=__webpack_require__(81);var _watcher=__webpack_require__(3869);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function getSlackPathUrl(slackUrl){if(slackUrl){var _url$parse=_url.default.parse(slackUrl),path=_url$parse.path;return path}}function createErrorGroupWatch(_x){return _createErrorGroupWatch.apply(this,arguments)}function _createErrorGroupWatch(){_createErrorGroupWatch=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var http,_ref$emails,emails,schedule,serviceName,slackUrl,threshold,timeRange,apmIndexPatternTitle,id,slackUrlPath,emailTemplate,slackTemplate,actions,body;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:http=_ref.http,_ref$emails=_ref.emails,emails=_ref$emails===void 0?[]:_ref$emails,schedule=_ref.schedule,serviceName=_ref.serviceName,slackUrl=_ref.slackUrl,threshold=_ref.threshold,timeRange=_ref.timeRange,apmIndexPatternTitle=_ref.apmIndexPatternTitle;id="apm-".concat(_uuid.default.v4());slackUrlPath=getSlackPathUrl(slackUrl);emailTemplate=_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.emailTemplateText",{defaultMessage:"Your service {serviceName} has error groups which exceeds {threshold} occurrences within {timeRange}{br}"+"{br}"+"{errorGroupsBuckets}{br}"+"{errorLogMessage}{br}"+"{errorCulprit}N/A{slashErrorCulprit}{br}"+"{docCountParam} occurrences{br}"+"{slashErrorGroupsBucket}",values:{serviceName:'"{{ctx.metadata.serviceName}}"',threshold:"{{ctx.metadata.threshold}}",timeRange:'"{{ctx.metadata.timeRangeValue}}{{ctx.metadata.timeRangeUnit}}"',errorGroupsBuckets:"{{#ctx.payload.aggregations.error_groups.buckets}}",errorLogMessage:"<strong>{{sample.hits.hits.0._source.error.log.message}}{{^sample.hits.hits.0._source.error.log.message}}{{sample.hits.hits.0._source.error.exception.0.message}}{{/sample.hits.hits.0._source.error.log.message}}</strong>",errorCulprit:"{{sample.hits.hits.0._source.error.culprit}}{{^sample.hits.hits.0._source.error.culprit}}",slashErrorCulprit:"{{/sample.hits.hits.0._source.error.culprit}}",docCountParam:"{{doc_count}}",slashErrorGroupsBucket:"{{/ctx.payload.aggregations.error_groups.buckets}}",br:"<br/>"}});slackTemplate=_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.slackTemplateText",{defaultMessage:"Your service {serviceName} has error groups which exceeds {threshold} occurrences within {timeRange}\n{errorGroupsBuckets}\n{errorLogMessage}\n{errorCulprit}N/A{slashErrorCulprit}\n{docCountParam} occurrences\n{slashErrorGroupsBucket}",values:{serviceName:'"{{ctx.metadata.serviceName}}"',threshold:"{{ctx.metadata.threshold}}",timeRange:'"{{ctx.metadata.timeRangeValue}}{{ctx.metadata.timeRangeUnit}}"',errorGroupsBuckets:"{{#ctx.payload.aggregations.error_groups.buckets}}",errorLogMessage:">*{{sample.hits.hits.0._source.error.log.message}}{{^sample.hits.hits.0._source.error.log.message}}{{sample.hits.hits.0._source.error.exception.0.message}}{{/sample.hits.hits.0._source.error.log.message}}*",errorCulprit:">{{#sample.hits.hits.0._source.error.culprit}}`{{sample.hits.hits.0._source.error.culprit}}`{{/sample.hits.hits.0._source.error.culprit}}{{^sample.hits.hits.0._source.error.culprit}}",slashErrorCulprit:"{{/sample.hits.hits.0._source.error.culprit}}",docCountParam:">{{doc_count}}",slashErrorGroupsBucket:"{{/ctx.payload.aggregations.error_groups.buckets}}"}});actions={log_error:{logging:{text:emailTemplate}}};body={metadata:{emails:emails,trigger:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.triggerText",{defaultMessage:"This value must be changed in trigger section"}),serviceName:serviceName,threshold:threshold,timeRangeValue:timeRange.value,timeRangeUnit:timeRange.unit,slackUrlPath:slackUrlPath},trigger:{schedule:schedule},input:{search:{request:{indices:[apmIndexPatternTitle],body:{size:0,query:{bool:{filter:[{term:_defineProperty({},_elasticsearch_fieldnames.SERVICE_NAME,"{{ctx.metadata.serviceName}}")},{term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"error")},{range:{"@timestamp":{gte:"now-{{ctx.metadata.timeRangeValue}}{{ctx.metadata.timeRangeUnit}}"}}}]}},aggs:{error_groups:{terms:{min_doc_count:"{{ctx.metadata.threshold}}",field:_elasticsearch_fieldnames.ERROR_GROUP_ID,size:10,order:{_count:"desc"}},aggs:{sample:{top_hits:{_source:[_elasticsearch_fieldnames.ERROR_LOG_MESSAGE,_elasticsearch_fieldnames.ERROR_EXC_MESSAGE,_elasticsearch_fieldnames.ERROR_EXC_HANDLED,_elasticsearch_fieldnames.ERROR_CULPRIT,_elasticsearch_fieldnames.ERROR_GROUP_ID,"@timestamp"],sort:[{"@timestamp":"desc"}],size:1}}}}}}}}},condition:{script:{source:"return ctx.payload.aggregations.error_groups.buckets.length > 0"}},actions:actions};if(slackUrlPath){body.actions.slack_webhook={webhook:{scheme:"https",host:"hooks.slack.com",port:443,method:"POST",path:"{{ctx.metadata.slackUrlPath}}",headers:{"Content-Type":"application/json"},body:"__json__::".concat(JSON.stringify({text:slackTemplate}))}}}if(!(0,_lodash.isEmpty)(emails)){body.actions.email={email:{to:"{{#join}}ctx.metadata.emails{{/join}}",subject:_i18n.i18n.translate("xpack.apm.serviceDetails.enableErrorReportsPanel.emailSubjectText",{defaultMessage:"{serviceName} has error groups which exceeds the threshold",values:{serviceName:'"{{ctx.metadata.serviceName}}"'}}),body:{html:emailTemplate}}}}_context.next=11;return(0,_watcher.createWatch)({http:http,id:id,watch:body});case 11:return _context.abrupt("return",id);case 12:case"end":return _context.stop()}}}),_callee)})));return _createErrorGroupWatch.apply(this,arguments)}},3869:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createWatch=createWatch;var _callApi=__webpack_require__(286);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function createWatch(_x){return _createWatch.apply(this,arguments)}function _createWatch(){_createWatch=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var id,watch,http;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=_ref.id,watch=_ref.watch,http=_ref.http;return _context.abrupt("return",(0,_callApi.callApi)(http,{method:"PUT",pathname:"/api/watcher/watch/".concat(id),body:{type:"json",id:id,watch:watch}}));case 2:case"end":return _context.stop()}}}),_callee)})));return _createWatch.apply(this,arguments)}},3870:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AlertIntegrations=AlertIntegrations;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _alert_types=__webpack_require__(435);var _AlertingFlyout=__webpack_require__(3871);var _useApmPluginContext=__webpack_require__(62);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var alertLabel=_i18n.i18n.translate("xpack.apm.serviceDetails.alertsMenu.alerts",{defaultMessage:"Alerts"});var createThresholdAlertLabel=_i18n.i18n.translate("xpack.apm.serviceDetails.alertsMenu.createThresholdAlert",{defaultMessage:"Create threshold alert"});var CREATE_THRESHOLD_ALERT_PANEL_ID="create_threshold";function AlertIntegrations(props){var canSaveAlerts=props.canSaveAlerts,canReadAlerts=props.canReadAlerts;var plugin=(0,_useApmPluginContext.useApmPluginContext)();var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),popoverOpen=_useState2[0],setPopoverOpen=_useState2[1];var _useState3=(0,_react.useState)(null),_useState4=_slicedToArray(_useState3,2),alertType=_useState4[0],setAlertType=_useState4[1];var button=_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"arrowDown",iconSide:"right",onClick:function onClick(){return setPopoverOpen(true)}},_i18n.i18n.translate("xpack.apm.serviceDetails.alertsMenu.alerts",{defaultMessage:"Alerts"}));var panels=[{id:0,title:alertLabel,items:[].concat(_toConsumableArray(canSaveAlerts?[{name:createThresholdAlertLabel,panel:CREATE_THRESHOLD_ALERT_PANEL_ID,icon:"bell"}]:[]),_toConsumableArray(canReadAlerts?[{name:_i18n.i18n.translate("xpack.apm.serviceDetails.alertsMenu.viewActiveAlerts",{defaultMessage:"View active alerts"}),href:plugin.core.http.basePath.prepend("/app/kibana#/management/kibana/triggersActions/alerts"),icon:"tableOfContents"}]:[]))},{id:CREATE_THRESHOLD_ALERT_PANEL_ID,title:createThresholdAlertLabel,items:[{name:_i18n.i18n.translate("xpack.apm.serviceDetails.alertsMenu.transactionDuration",{defaultMessage:"Transaction duration"}),onClick:function onClick(){setAlertType(_alert_types.AlertType.TransactionDuration)}},{name:_i18n.i18n.translate("xpack.apm.serviceDetails.alertsMenu.errorRate",{defaultMessage:"Error rate"}),onClick:function onClick(){setAlertType(_alert_types.AlertType.ErrorRate)}}]}];return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiPopover,{id:"integrations-menu",button:button,isOpen:popoverOpen,closePopover:function closePopover(){return setPopoverOpen(false)},panelPaddingSize:"none",anchorPosition:"downRight"},_react.default.createElement(_eui.EuiContextMenu,{initialPanelId:0,panels:panels})),_react.default.createElement(_AlertingFlyout.AlertingFlyout,{alertType:alertType,addFlyoutVisible:!!alertType,setAddFlyoutVisibility:function setAddFlyoutVisibility(visible){if(!visible){setAlertType(null)}}}))}},3871:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AlertingFlyout=AlertingFlyout;var _react=_interopRequireDefault(__webpack_require__(0));var _public=__webpack_require__(261);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function AlertingFlyout(props){var addFlyoutVisible=props.addFlyoutVisible,setAddFlyoutVisibility=props.setAddFlyoutVisibility,alertType=props.alertType;return alertType?_react.default.createElement(_public.AlertAdd,{addFlyoutVisible:addFlyoutVisible,setAddFlyoutVisibility:setAddFlyoutVisibility,consumer:"apm",alertTypeId:alertType,canChangeTrigger:false}):null}},3872:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionDetails=TransactionDetails;var _eui=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _useTransactionCharts2=__webpack_require__(1243);var _useTransactionDistribution=__webpack_require__(3873);var _useWaterfall2=__webpack_require__(3874);var _TransactionCharts=__webpack_require__(624);var _ApmHeader=__webpack_require__(341);var _Distribution=__webpack_require__(3876);var _WaterfallWithSummmary=__webpack_require__(3877);var _useLocation=__webpack_require__(132);var _useUrlParams2=__webpack_require__(35);var _useFetcher=__webpack_require__(36);var _TransactionBreakdown=__webpack_require__(1246);var _ChartsSyncContext=__webpack_require__(348);var _public=__webpack_require__(78);var _typings=__webpack_require__(240);var _LocalUIFilters=__webpack_require__(241);var _HeightRetainer=__webpack_require__(1221);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function TransactionDetails(){var _distributionData$buc;var location=(0,_useLocation.useLocation)();var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var _useTransactionDistri=(0,_useTransactionDistribution.useTransactionDistribution)(urlParams),distributionData=_useTransactionDistri.data,distributionStatus=_useTransactionDistri.status;var _useTransactionCharts=(0,_useTransactionCharts2.useTransactionCharts)(),transactionChartsData=_useTransactionCharts.data;var _useWaterfall=(0,_useWaterfall2.useWaterfall)(urlParams),waterfall=_useWaterfall.waterfall,exceedsMax=_useWaterfall.exceedsMax,waterfallStatus=_useWaterfall.status;var transactionName=urlParams.transactionName,transactionType=urlParams.transactionType,serviceName=urlParams.serviceName;(0,_public.useTrackPageview)({app:"apm",path:"transaction_details"});(0,_public.useTrackPageview)({app:"apm",path:"transaction_details",delay:15e3});var localUIFiltersConfig=(0,_react.useMemo)((function(){var config={filterNames:["transactionResult","serviceVersion"],projection:_typings.PROJECTION.TRANSACTIONS,params:{transactionName:transactionName,transactionType:transactionType,serviceName:serviceName}};return config}),[transactionName,transactionType,serviceName]);var bucketIndex=distributionData.buckets.findIndex((function(bucket){return bucket.samples.some((function(sample){return sample.transactionId===urlParams.transactionId&&sample.traceId===urlParams.traceId}))}));var traceSamples=(_distributionData$buc=distributionData.buckets[bucketIndex])===null||_distributionData$buc===void 0?void 0:_distributionData$buc.samples;return _react.default.createElement("div",null,_react.default.createElement(_ApmHeader.ApmHeader,null,_react.default.createElement(_eui.EuiTitle,{size:"l"},_react.default.createElement("h1",null,transactionName))),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_LocalUIFilters.LocalUIFilters,localUIFiltersConfig)),_react.default.createElement(_eui.EuiFlexItem,{grow:7},_react.default.createElement(_ChartsSyncContext.ChartsSyncContextProvider,null,_react.default.createElement(_TransactionBreakdown.TransactionBreakdown,null),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_TransactionCharts.TransactionCharts,{hasMLJob:false,charts:transactionChartsData,urlParams:urlParams,location:location})),_react.default.createElement(_eui.EuiHorizontalRule,{size:"full",margin:"l"}),_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_Distribution.TransactionDistribution,{distribution:distributionData,isLoading:distributionStatus===_useFetcher.FETCH_STATUS.LOADING,urlParams:urlParams,bucketIndex:bucketIndex})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_HeightRetainer.HeightRetainer,null,_react.default.createElement(_WaterfallWithSummmary.WaterfallWithSummmary,{location:location,urlParams:urlParams,waterfall:waterfall,isLoading:waterfallStatus===_useFetcher.FETCH_STATUS.LOADING,exceedsMax:exceedsMax,traceSamples:traceSamples})))))}},3873:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useTransactionDistribution=useTransactionDistribution;var _useFetcher2=__webpack_require__(36);var _UrlParamsContext=__webpack_require__(342);var INITIAL_DATA={buckets:[],noHits:true,bucketSize:0};function useTransactionDistribution(urlParams){var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,transactionType=urlParams.transactionType,transactionId=urlParams.transactionId,traceId=urlParams.traceId,transactionName=urlParams.transactionName;var uiFilters=(0,_UrlParamsContext.useUiFilters)(urlParams);var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end&&transactionType&&transactionName){return callApmApi({pathname:"/api/apm/services/{serviceName}/transaction_groups/distribution",params:{path:{serviceName:serviceName},query:{start:start,end:end,transactionType:transactionType,transactionName:transactionName,transactionId:transactionId,traceId:traceId,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,start,end,transactionType,transactionName,uiFilters]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?INITIAL_DATA:_useFetcher$data,status=_useFetcher.status,error=_useFetcher.error;return{data:data,status:status,error:error}}},3874:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useWaterfall=useWaterfall;var _react=__webpack_require__(0);var _useFetcher2=__webpack_require__(36);var _waterfall_helpers=__webpack_require__(3875);var INITIAL_DATA={root:undefined,trace:{items:[],exceedsMax:false,errorDocs:[]},errorsPerTransaction:{}};function useWaterfall(urlParams){var traceId=urlParams.traceId,start=urlParams.start,end=urlParams.end,transactionId=urlParams.transactionId;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(traceId&&start&&end){return callApmApi({pathname:"/api/apm/traces/{traceId}",params:{path:{traceId:traceId},query:{start:start,end:end}}})}}),[traceId,start,end]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?INITIAL_DATA:_useFetcher$data,status=_useFetcher.status,error=_useFetcher.error;var waterfall=(0,_react.useMemo)((function(){return(0,_waterfall_helpers.getWaterfall)(data,transactionId)}),[data,transactionId]);return{waterfall:waterfall,status:status,error:error,exceedsMax:data.trace.exceedsMax}}},3875:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getClockSkew=getClockSkew;exports.getOrderedWaterfallItems=getOrderedWaterfallItems;exports.getWaterfall=getWaterfall;var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _lodash=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ROOT_ID="root";function getTransactionItem(transaction){var _transaction$parent;return{docType:"transaction",doc:transaction,id:transaction.transaction.id,parentId:(_transaction$parent=transaction.parent)===null||_transaction$parent===void 0?void 0:_transaction$parent.id,duration:transaction.transaction.duration.us,offset:0,skew:0}}function getSpanItem(span){var _span$parent;return{docType:"span",doc:span,id:span.span.id,parentId:(_span$parent=span.parent)===null||_span$parent===void 0?void 0:_span$parent.id,duration:span.span.duration.us,offset:0,skew:0}}function getErrorItem(error,items,entryWaterfallTransaction){var _ref;var entryTimestamp=(_ref=entryWaterfallTransaction===null||entryWaterfallTransaction===void 0?void 0:entryWaterfallTransaction.doc.timestamp.us)!==null&&_ref!==void 0?_ref:0;var parent=items.find((function(waterfallItem){var _error$parent;return waterfallItem.id===((_error$parent=error.parent)===null||_error$parent===void 0?void 0:_error$parent.id)}));var errorItem={docType:"error",doc:error,id:error.error.id,parent:parent,parentId:parent===null||parent===void 0?void 0:parent.id,offset:error.timestamp.us-entryTimestamp,skew:0,duration:0};return _objectSpread({},errorItem,{skew:getClockSkew(errorItem,parent)})}function getClockSkew(item,parentItem){if(!parentItem){return 0}switch(item.docType){case"error":case"span":return parentItem.skew;case"transaction":{var parentStart=parentItem.doc.timestamp.us+parentItem.skew;var offsetStart=parentStart-item.doc.timestamp.us;if(offsetStart>0){var latency=Math.max(parentItem.duration-item.duration,0)/2;return offsetStart+latency}return 0}}}function getOrderedWaterfallItems(childrenByParentId,entryWaterfallTransaction){if(!entryWaterfallTransaction){return[]}var entryTimestamp=entryWaterfallTransaction.doc.timestamp.us;var visitedWaterfallItemSet=new Set;function getSortedChildren(item,parentItem){if(visitedWaterfallItemSet.has(item)){return[]}visitedWaterfallItemSet.add(item);var children=(0,_lodash.sortBy)(childrenByParentId[item.id]||[],"doc.timestamp.us");item.parent=parentItem;item.offset=item.doc.timestamp.us-entryTimestamp;item.skew=getClockSkew(item,parentItem);var deepChildren=(0,_lodash.flatten)(children.map((function(child){return getSortedChildren(child,item)})));return[item].concat(_toConsumableArray(deepChildren))}return getSortedChildren(entryWaterfallTransaction)}function getRootTransaction(childrenByParentId){var item=(0,_lodash.first)(childrenByParentId.root);if(item&&item.docType==="transaction"){return item.doc}}function getServiceColors(waterfallItems){var services=(0,_lodash.uniq)(waterfallItems.map((function(item){return item.doc.service.name})));var assignedColors=[_eui_theme_light.default.euiColorVis1,_eui_theme_light.default.euiColorVis0,_eui_theme_light.default.euiColorVis3,_eui_theme_light.default.euiColorVis2,_eui_theme_light.default.euiColorVis6,_eui_theme_light.default.euiColorVis7,_eui_theme_light.default.euiColorVis5];return(0,_lodash.zipObject)(services,assignedColors)}var getWaterfallDuration=function getWaterfallDuration(waterfallItems){return Math.max.apply(Math,_toConsumableArray(waterfallItems.map((function(item){return item.offset+item.skew+item.duration}))).concat([0]))};var getWaterfallItems=function getWaterfallItems(items){return items.map((function(item){var docType=item.processor.event;switch(docType){case"span":return getSpanItem(item);case"transaction":return getTransactionItem(item)}}))};var getChildrenGroupedByParentId=function getChildrenGroupedByParentId(waterfallItems){return(0,_lodash.groupBy)(waterfallItems,(function(item){return item.parentId?item.parentId:ROOT_ID}))};var getEntryWaterfallTransaction=function getEntryWaterfallTransaction(entryTransactionId,waterfallItems){return waterfallItems.find((function(item){return item.docType==="transaction"&&item.id===entryTransactionId}))};function isInEntryTransaction(parentIdLookup,entryTransactionId,currentId){if(currentId===entryTransactionId){return true}var parentId=parentIdLookup.get(currentId);if(parentId){return isInEntryTransaction(parentIdLookup,entryTransactionId,parentId)}return false}function getWaterfallErrors(errorDocs,items,entryWaterfallTransaction){var errorItems=errorDocs.map((function(errorDoc){return getErrorItem(errorDoc,items,entryWaterfallTransaction)}));if(!entryWaterfallTransaction){return errorItems}var parentIdLookup=[].concat(_toConsumableArray(items),_toConsumableArray(errorItems)).reduce((function(map,_ref2){var id=_ref2.id,parentId=_ref2.parentId;map.set(id,parentId!==null&&parentId!==void 0?parentId:ROOT_ID);return map}),new Map);return errorItems.filter((function(errorItem){return isInEntryTransaction(parentIdLookup,entryWaterfallTransaction===null||entryWaterfallTransaction===void 0?void 0:entryWaterfallTransaction.id,errorItem.id)}))}function getWaterfall(_ref3,entryTransactionId){var trace=_ref3.trace,errorsPerTransaction=_ref3.errorsPerTransaction;if((0,_lodash.isEmpty)(trace.items)||!entryTransactionId){return{duration:0,items:[],errorsPerTransaction:errorsPerTransaction,errorsCount:(0,_lodash.sum)(Object.values(errorsPerTransaction)),serviceColors:{},errorItems:[]}}var waterfallItems=getWaterfallItems(trace.items);var childrenByParentId=getChildrenGroupedByParentId(waterfallItems);var entryWaterfallTransaction=getEntryWaterfallTransaction(entryTransactionId,waterfallItems);var items=getOrderedWaterfallItems(childrenByParentId,entryWaterfallTransaction);var errorItems=getWaterfallErrors(trace.errorDocs,items,entryWaterfallTransaction);var rootTransaction=getRootTransaction(childrenByParentId);var duration=getWaterfallDuration(items);var serviceColors=getServiceColors(items);var entryTransaction=entryWaterfallTransaction===null||entryWaterfallTransaction===void 0?void 0:entryWaterfallTransaction.doc;return{entryTransaction:entryTransaction,rootTransaction:rootTransaction,duration:duration,items:items,errorsPerTransaction:errorsPerTransaction,errorsCount:errorItems.length,serviceColors:serviceColors,errorItems:errorItems}}},3876:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFormattedBuckets=getFormattedBuckets;exports.TransactionDistribution=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _d=_interopRequireDefault(__webpack_require__(45));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(3);var _formatters=__webpack_require__(72);var _Histogram=_interopRequireDefault(__webpack_require__(1229));var _EmptyMessage=__webpack_require__(343);var _url_helpers=__webpack_require__(71);var _history=__webpack_require__(82);var _LoadingStatePrompt=__webpack_require__(209);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getFormattedBuckets(buckets,bucketSize){if(!buckets){return[]}return buckets.map((function(_ref){var samples=_ref.samples,count=_ref.count,key=_ref.key;return{samples:samples,x0:key,x:key+bucketSize,y:count,style:{cursor:(0,_lodash.isEmpty)(samples)?"default":"pointer"}}}))}var getFormatYShort=function getFormatYShort(transactionType){return function(t){return _i18n.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChart.unitShortLabel",{defaultMessage:"{transCount} {transType, select, request {req.} other {trans.}}",values:{transCount:t,transType:transactionType}})}};var getFormatYLong=function getFormatYLong(transactionType){return function(t){return transactionType==="request"?_i18n.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChart.requestTypeUnitLongLabel",{defaultMessage:"{transCount, plural, =0 {# request} one {# request} other {# requests}}",values:{transCount:t}}):_i18n.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChart.transactionTypeUnitLongLabel",{defaultMessage:"{transCount, plural, =0 {# transaction} one {# transaction} other {# transactions}}",values:{transCount:t}})}};var TransactionDistribution=function TransactionDistribution(props){var distribution=props.distribution,transactionType=props.urlParams.transactionType,isLoading=props.isLoading,bucketIndex=props.bucketIndex;var formatYShort=(0,_react.useCallback)(getFormatYShort(transactionType),[transactionType]);var formatYLong=(0,_react.useCallback)(getFormatYLong(transactionType),[transactionType]);if(!distribution||distribution.noHits){if(isLoading){return _react.default.createElement(_LoadingStatePrompt.LoadingStatePrompt,null)}return _react.default.createElement(_EmptyMessage.EmptyMessage,{heading:_i18n.i18n.translate("xpack.apm.transactionDetails.notFoundLabel",{defaultMessage:"No transactions were found."})})}var buckets=getFormattedBuckets(distribution.buckets,distribution.bucketSize);var xMax=_d.default.max(buckets,(function(d){return d.x}))||0;var timeFormatter=(0,_formatters.getDurationFormatter)(xMax);return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h5",null,_i18n.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChartTitle",{defaultMessage:"Transactions duration distribution"})," ",_react.default.createElement(_eui.EuiIconTip,{title:_i18n.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChartTooltip.samplingLabel",{defaultMessage:"Sampling"}),content:_i18n.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChartTooltip.samplingDescription",{defaultMessage:"Each bucket will show a sample transaction. If there's no sample available, it's most likely because of the sampling limit set in the agent configuration."}),position:"top"}))),_react.default.createElement(_Histogram.default,{buckets:buckets,bucketSize:distribution.bucketSize,bucketIndex:bucketIndex,onClick:function onClick(bucket){if(!(0,_lodash.isEmpty)(bucket.samples)){var sample=bucket.samples[0];_history.history.push(_objectSpread({},_history.history.location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(_history.history.location.search),{transactionId:sample.transactionId,traceId:sample.traceId}))}))}},formatX:function formatX(time){return timeFormatter(time).formatted},formatYShort:formatYShort,formatYLong:formatYLong,verticalLineHover:function verticalLineHover(bucket){return(0,_lodash.isEmpty)(bucket.samples)},backgroundHover:function backgroundHover(bucket){return!(0,_lodash.isEmpty)(bucket.samples)},tooltipHeader:function tooltipHeader(bucket){var xFormatted=timeFormatter(bucket.x);var x0Formatted=timeFormatter(bucket.x0);return"".concat(x0Formatted.value," - ").concat(xFormatted.value," ").concat(xFormatted.unit)},tooltipFooter:function tooltipFooter(bucket){return(0,_lodash.isEmpty)(bucket.samples)&&_i18n.i18n.translate("xpack.apm.transactionDetails.transactionsDurationDistributionChart.noSampleTooltip",{defaultMessage:"No sample available for this bucket"})}}))};exports.TransactionDistribution=TransactionDistribution},3877:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WaterfallWithSummmary=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _history=__webpack_require__(82);var _url_helpers=__webpack_require__(71);var _LoadingStatePrompt=__webpack_require__(209);var _TransactionSummary=__webpack_require__(1248);var _TransactionActionMenu=__webpack_require__(1250);var _MaybeViewTraceLink=__webpack_require__(3893);var _TransactionTabs=__webpack_require__(3894);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var WaterfallWithSummmary=function WaterfallWithSummmary(_ref){var _waterfall$rootTransa;var urlParams=_ref.urlParams,location=_ref.location,waterfall=_ref.waterfall,exceedsMax=_ref.exceedsMax,isLoading=_ref.isLoading,traceSamples=_ref.traceSamples;var _useState=(0,_react.useState)(0),_useState2=_slicedToArray(_useState,2),sampleActivePage=_useState2[0],setSampleActivePage=_useState2[1];(0,_react.useEffect)((function(){setSampleActivePage(0)}),[traceSamples]);var goToSample=function goToSample(index){setSampleActivePage(index);var sample=traceSamples[index];_history.history.push(_objectSpread({},_history.history.location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(_history.history.location.search),{transactionId:sample.transactionId,traceId:sample.traceId}))}))};var entryTransaction=waterfall.entryTransaction;if(!entryTransaction){var content=isLoading?_react.default.createElement(_LoadingStatePrompt.LoadingStatePrompt,null):_react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement("div",null,_i18n.i18n.translate("xpack.apm.transactionDetails.traceNotFound",{defaultMessage:"The selected trace cannot be found"})),titleSize:"s"});return _react.default.createElement(_eui.EuiPanel,{paddingSize:"m"},content)}return _react.default.createElement(_eui.EuiPanel,{paddingSize:"m"},_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{style:{flexDirection:"row",alignItems:"center"}},_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h5",null,_i18n.i18n.translate("xpack.apm.transactionDetails.traceSampleTitle",{defaultMessage:"Trace sample"}))),traceSamples&&_react.default.createElement(_eui.EuiPagination,{pageCount:traceSamples.length,activePage:sampleActivePage,onPageClick:goToSample,compressed:true})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_TransactionActionMenu.TransactionActionMenu,{transaction:entryTransaction})),_react.default.createElement(_MaybeViewTraceLink.MaybeViewTraceLink,{transaction:entryTransaction,waterfall:waterfall})))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_TransactionSummary.TransactionSummary,{errorCount:waterfall.errorsCount,totalDuration:(_waterfall$rootTransa=waterfall.rootTransaction)===null||_waterfall$rootTransa===void 0?void 0:_waterfall$rootTransa.transaction.duration.us,transaction:entryTransaction}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_TransactionTabs.TransactionTabs,{transaction:entryTransaction,location:location,urlParams:urlParams,waterfall:waterfall,exceedsMax:exceedsMax}))};exports.WaterfallWithSummmary=WaterfallWithSummmary},3878:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PercentOfParent=PercentOfParent;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(2);var _formatters=__webpack_require__(72);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PercentOfParent(_ref){var duration=_ref.duration,totalDuration=_ref.totalDuration,parentType=_ref.parentType;totalDuration=totalDuration||duration;var isOver100=duration>totalDuration;var percentOfParent=isOver100?">100%":(0,_formatters.asPercent)(duration,totalDuration,"");var percentOfParentText=_i18n.i18n.translate("xpack.apm.percentOfParent",{defaultMessage:"({value} of {parentType, select, transaction { transaction } trace {trace} })",values:{value:percentOfParent,parentType:parentType}});var childType=parentType==="trace"?"transaction":"span";return _react.default.createElement(_react.default.Fragment,null,isOver100?_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.transactionDetails.percentOfTraceLabelExplanation",{defaultMessage:"The % of {parentType, select, transaction {transaction} trace {trace} } exceeds 100% because this {childType, select, span {span} transaction {transaction} } takes longer than the root transaction.",values:{parentType:parentType,childType:childType}})},_react.default.createElement(_react.default.Fragment,null,percentOfParentText)):percentOfParentText)}},3879:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorCountSummaryItemBadge=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _eui=__webpack_require__(2);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _variables=__webpack_require__(26);var _variables2=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Badge=(0,_styledComponents.default)(_eui.EuiBadge).withConfig({displayName:"Badge",componentId:"sc-1evs9np-0"})(["margin-top:",";"],(0,_variables.px)(_variables2.units.eighth));var ErrorCountSummaryItemBadge=function ErrorCountSummaryItemBadge(_ref){var count=_ref.count;return _react.default.createElement(Badge,{color:_eui_theme_light.default.euiColorDanger},_i18n.i18n.translate("xpack.apm.transactionDetails.errorCount",{defaultMessage:"{errorCount, number} {errorCount, plural, one {Error} other {Errors}}",values:{errorCount:count}}))};exports.ErrorCountSummaryItemBadge=ErrorCountSummaryItemBadge},3880:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionResultSummaryItem=TransactionResultSummaryItem;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TransactionResultSummaryItem(_ref){var transactionResult=_ref.transactionResult;return _react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.transactionDetails.resultLabel",{defaultMessage:"Result"})},_react.default.createElement(_eui.EuiBadge,{color:"default",title:undefined},transactionResult))}},3881:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FiltersSection=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(3);var _react=_interopRequireDefault(__webpack_require__(0));var _helper=__webpack_require__(630);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var FiltersSection=function FiltersSection(_ref){var filters=_ref.filters,onChangeFilters=_ref.onChangeFilters;var onChangeFilter=function onChangeFilter(key,value,idx){var newFilters=_toConsumableArray(filters);newFilters[idx]={key:key,value:value};onChangeFilters(newFilters)};var onRemoveFilter=function onRemoveFilter(idx){var newFilters=_toConsumableArray(filters);newFilters.splice(idx,1);if((0,_lodash.isEmpty)(newFilters)){onChangeFilters([{key:"",value:""}])}else{onChangeFilters(newFilters)}};var handleAddFilter=function handleAddFilter(){onChangeFilters([].concat(_toConsumableArray(filters),[{key:"",value:""}]))};return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h3",null,_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyout.filters.title",{defaultMessage:"Filters"}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiText,{size:"s"},_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyout.filters.subtitle",{defaultMessage:"Use the filter options to scope them to only appear for specific services."})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),filters.map((function(filter,idx){var key=filter.key,value=filter.value;var filterId="filter-".concat(idx);var selectOptions=(0,_helper.getSelectOptions)(filters,key);return _react.default.createElement(_eui.EuiFlexGroup,{key:filterId,gutterSize:"s",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiSelect,{"data-test-subj":filterId,id:filterId,fullWidth:true,options:selectOptions,value:key,prepend:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyout.filters.prepend",{defaultMessage:"Field"}),onChange:function onChange(e){return onChangeFilter(e.target.value,value,idx)},isInvalid:!(0,_lodash.isEmpty)(value)&&((0,_lodash.isEmpty)(key)||key===_helper.DEFAULT_OPTION.value)})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldText,{"data-test-subj":"".concat(key,".value"),fullWidth:true,placeholder:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyOut.filters.defaultOption.value",{defaultMessage:"Value"}),onChange:function onChange(e){return onChangeFilter(key,e.target.value,idx)},value:value,isInvalid:!(0,_lodash.isEmpty)(key)&&(0,_lodash.isEmpty)(value)})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"trash",onClick:function onClick(){return onRemoveFilter(idx)},disabled:!value&&!key&&filters.length===1})))})),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react.default.createElement(AddFilterButton,{onClick:handleAddFilter,isDisabled:filters.length===_helper.FILTER_SELECT_OPTIONS.length-1}))};exports.FiltersSection=FiltersSection;var AddFilterButton=function AddFilterButton(_ref2){var onClick=_ref2.onClick,isDisabled=_ref2.isDisabled;return _react.default.createElement(_eui.EuiButtonEmpty,{iconType:"plusInCircle",onClick:onClick,disabled:isDisabled},_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyout.filters.addAnotherFilter",{defaultMessage:"Add another filter"}))}},3882:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FILTER_OPTIONS=void 0;var _elasticsearch_fieldnames=__webpack_require__(81);var FILTER_OPTIONS=[_elasticsearch_fieldnames.SERVICE_NAME,_elasticsearch_fieldnames.SERVICE_ENVIRONMENT,_elasticsearch_fieldnames.TRANSACTION_TYPE,_elasticsearch_fieldnames.TRANSACTION_NAME];exports.FILTER_OPTIONS=FILTER_OPTIONS},3883:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FlyoutFooter=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _DeleteButton=__webpack_require__(3884);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FlyoutFooter=function FlyoutFooter(_ref){var onClose=_ref.onClose,isSaving=_ref.isSaving,onDelete=_ref.onDelete,customLinkId=_ref.customLinkId,isSaveButtonEnabled=_ref.isSaveButtonEnabled;return _react.default.createElement(_eui.EuiFlyoutFooter,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"cross",onClick:onClose,flush:"left"},_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyout.close",{defaultMessage:"Close"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{display:"block"}},customLinkId&&_react.default.createElement(_DeleteButton.DeleteButton,{customLinkId:customLinkId,onDelete:onDelete}),_react.default.createElement(_eui.EuiButton,{fill:true,type:"submit",isLoading:isSaving,isDisabled:!isSaveButtonEnabled},_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyout.save",{defaultMessage:"Save"})))))};exports.FlyoutFooter=FlyoutFooter},3884:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DeleteButton=DeleteButton;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _variables=__webpack_require__(26);var _createCallApmApi=__webpack_require__(159);var _useApmPluginContext=__webpack_require__(62);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function DeleteButton(_ref){var onDelete=_ref.onDelete,customLinkId=_ref.customLinkId;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isDeleting=_useState2[0],setIsDeleting=_useState2[1];var toasts=(0,_useApmPluginContext.useApmPluginContext)().core.notifications.toasts;return _react.default.createElement(_eui.EuiButtonEmpty,{color:"danger",isLoading:isDeleting,iconSide:"right",onClick:_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsDeleting(true);_context.next=3;return deleteConfig(customLinkId,toasts);case 3:setIsDeleting(false);onDelete();case 5:case"end":return _context.stop()}}}),_callee)}))),style:{marginRight:(0,_variables.px)(_variables.unit)}},_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.delete",{defaultMessage:"Delete"}))}function deleteConfig(_x,_x2){return _deleteConfig.apply(this,arguments)}function _deleteConfig(){_deleteConfig=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(customLinkId,toasts){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return(0,_createCallApmApi.callApmApi)({pathname:"/api/apm/settings/custom_links/{id}",method:"DELETE",params:{path:{id:customLinkId}}});case 3:toasts.addSuccess({iconType:"trash",title:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.delete.successed",{defaultMessage:"Deleted custom link."})});_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2["catch"](0);toasts.addDanger({iconType:"cross",title:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.delete.failed",{defaultMessage:"Custom link could not be deleted"})});case 9:case"end":return _context2.stop()}}}),_callee2,null,[[0,6]])})));return _deleteConfig.apply(this,arguments)}},3885:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LinkSection=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _Documentation=__webpack_require__(1252);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LinkSection=function LinkSection(_ref){var label=_ref.label,onChangeLabel=_ref.onChangeLabel,url=_ref.url,onChangeUrl=_ref.onChangeUrl;var inputFields=[{name:"label",label:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyout.link.label",{defaultMessage:"Label"}),helpText:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyout.link.label.helpText",{defaultMessage:"This is the label shown in the actions context menu. Keep it as short as possible."}),placeholder:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyout.link.label.placeholder",{defaultMessage:"e.g. Support tickets"}),value:label,onChange:onChangeLabel},{name:"url",label:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyout.link.url",{defaultMessage:"URL"}),helpText:_react.default.createElement(_react.default.Fragment,null,_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyout.link.url.helpText",{defaultMessage:"Add field name variables to your URL to apply values e.g. {sample}.",values:{sample:"{{trace.id}}"}})," ",_react.default.createElement(_Documentation.Documentation,{label:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyout.link.url.doc",{defaultMessage:"Learn more in the docs."})})),placeholder:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyout.link.url.placeholder",{defaultMessage:"e.g. https://www.elastic.co/"}),value:url,onChange:onChangeUrl}];return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h3",null,_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyout.action.title",{defaultMessage:"Link"}))),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),inputFields.map((function(field){return _react.default.createElement(_eui.EuiFormRow,{fullWidth:true,key:field.name,label:field.label,helpText:field.helpText,labelAppend:_react.default.createElement(_eui.EuiText,{size:"xs"},_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyout.required",{defaultMessage:"Required"}))},_react.default.createElement(_eui.EuiFieldText,{placeholder:field.placeholder,name:field.name,fullWidth:true,value:field.value,onChange:function onChange(e){return field.onChange(e.target.value)},"data-test-subj":field.name}))})))};exports.LinkSection=LinkSection},3886:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.saveCustomLink=saveCustomLink;var _i18n=__webpack_require__(1);var _createCallApmApi=__webpack_require__(159);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function saveCustomLink(_x){return _saveCustomLink.apply(this,arguments)}function _saveCustomLink(){_saveCustomLink=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var id,label,url,filters,toasts,customLink;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=_ref.id,label=_ref.label,url=_ref.url,filters=_ref.filters,toasts=_ref.toasts;_context.prev=1;customLink={label:label,url:url,filters:filters.filter((function(_ref2){var key=_ref2.key,value=_ref2.value;return key&&value}))};if(!id){_context.next=8;break}_context.next=6;return(0,_createCallApmApi.callApmApi)({pathname:"/api/apm/settings/custom_links/{id}",method:"PUT",params:{path:{id:id},body:customLink}});case 6:_context.next=10;break;case 8:_context.next=10;return(0,_createCallApmApi.callApmApi)({pathname:"/api/apm/settings/custom_links",method:"POST",params:{body:customLink}});case 10:toasts.addSuccess({iconType:"check",title:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.create.successed",{defaultMessage:"Link saved!"})});_context.next=16;break;case 13:_context.prev=13;_context.t0=_context["catch"](1);toasts.addDanger({title:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.create.failed",{defaultMessage:"Link could not be saved!"}),text:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.create.failed.message",{defaultMessage:'Something went wrong when saving the link. Error: "{errorMessage}"',values:{errorMessage:_context.t0.message}})});case 16:case"end":return _context.stop()}}}),_callee,null,[[1,13]])})));return _saveCustomLink.apply(this,arguments)}},3887:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LinkPreview=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(3);var _createCallApmApi=__webpack_require__(159);var _helper=__webpack_require__(630);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var fetchTransaction=(0,_lodash.debounce)(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(filters,callback){var transaction;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_createCallApmApi.callApmApi)({pathname:"/api/apm/settings/custom_links/transaction",params:{query:(0,_helper.convertFiltersToQuery)(filters)}});case 2:transaction=_context.sent;callback(transaction);case 4:case"end":return _context.stop()}}}),_callee)})));return function(_x,_x2){return _ref.apply(this,arguments)}}(),1e3);var getTextColor=function getTextColor(value){return value?"default":"subdued"};var LinkPreview=function LinkPreview(_ref2){var label=_ref2.label,url=_ref2.url,filters=_ref2.filters;var _useState=(0,_react.useState)(),_useState2=_slicedToArray(_useState,2),transaction=_useState2[0],setTransaction=_useState2[1];(0,_react.useEffect)((function(){var isUnmounted=false;fetchTransaction(filters,(function(_transaction){if(!isUnmounted){setTransaction(_transaction)}}));return function(){isUnmounted=true}}),[filters]);var _replaceTemplateVaria=(0,_helper.replaceTemplateVariables)(url,transaction),formattedUrl=_replaceTemplateVaria.formattedUrl,error=_replaceTemplateVaria.error;return _react.default.createElement(_eui.EuiPanel,{betaBadgeLabel:"Preview",paddingSize:"l"},_react.default.createElement(_eui.EuiText,{size:"s",color:getTextColor(label),className:"eui-textBreakWord","data-test-subj":"preview-label"},label?label:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.default.label",{defaultMessage:"Elastic.co"})),_react.default.createElement(_eui.EuiText,{size:"s",color:getTextColor(url),className:"eui-textBreakWord","data-test-subj":"preview-url"},url?_react.default.createElement(_eui.EuiLink,{href:formattedUrl,target:"_blank","data-test-subj":"preview-link"},formattedUrl):_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.default.url",{defaultMessage:"https://www.elastic.co"})),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{size:"s",color:"subdued"},_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.linkPreview.descrition",{defaultMessage:"Test your link with values from an example transaction document based on the filters above."}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},error&&_react.default.createElement(_eui.EuiToolTip,{position:"top",content:error},_react.default.createElement(_eui.EuiIcon,{type:"alert",color:"warning","data-test-subj":"preview-warning"})))))};exports.LinkPreview=LinkPreview},3888:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CustomLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _lodash=__webpack_require__(3);var _public=__webpack_require__(78);var _CustomLinkSection=__webpack_require__(1253);var _ManageCustomLink=__webpack_require__(1254);var _useFetcher=__webpack_require__(36);var _LoadingStatePrompt=__webpack_require__(209);var _variables=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SeeMoreButton=_styledComponents.default.button.withConfig({displayName:"SeeMoreButton",componentId:"sc-1arfajx-0"})(["display:",";align-items:center;width:100%;justify-content:space-between;&:hover{text-decoration:underline;}"],(function(props){return props.show?"flex":"none"}));var CustomLink=function CustomLink(_ref){var customLinks=_ref.customLinks,status=_ref.status,onCreateCustomLinkClick=_ref.onCreateCustomLinkClick,onSeeMoreClick=_ref.onSeeMoreClick,transaction=_ref.transaction;var renderEmptyPrompt=_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"xs",grow:false,style:{width:(0,_variables.px)(300)}},_i18n.i18n.translate("xpack.apm.customLink.empty",{defaultMessage:"No custom links found. Set up your own custom links, e.g., a link to a specific Dashboard or external link."})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"plusInCircle",size:"xs",onClick:onCreateCustomLinkClick},_i18n.i18n.translate("xpack.apm.customLink.buttom.create",{defaultMessage:"Create custom link"})));var renderCustomLinkBottomSection=(0,_lodash.isEmpty)(customLinks)?renderEmptyPrompt:_react.default.createElement(SeeMoreButton,{onClick:onSeeMoreClick,show:customLinks.length>3},_react.default.createElement(_eui.EuiText,{size:"s"},_i18n.i18n.translate("xpack.apm.transactionActionMenu.customLink.seeMore",{defaultMessage:"See more"})),_react.default.createElement(_eui.EuiIcon,{type:"arrowRight"}));return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_public.ActionMenuDivider,null),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{style:{justifyContent:"center"}},_react.default.createElement(_eui.EuiText,{size:"s",grow:false},_react.default.createElement("h5",null,_i18n.i18n.translate("xpack.apm.transactionActionMenu.customLink.section",{defaultMessage:"Custom Links"})))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_ManageCustomLink.ManageCustomLink,{onCreateCustomLinkClick:onCreateCustomLinkClick,showCreateCustomLinkButton:!!customLinks.length}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_public.SectionSubtitle,null,_i18n.i18n.translate("xpack.apm.transactionActionMenu.customLink.subtitle",{defaultMessage:"Links will open in a new window."})),_react.default.createElement(_CustomLinkSection.CustomLinkSection,{customLinks:customLinks.slice(0,3),transaction:transaction}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),status===_useFetcher.FETCH_STATUS.LOADING?_react.default.createElement(_LoadingStatePrompt.LoadingStatePrompt,null):renderCustomLinkBottomSection)};exports.CustomLink=CustomLink},3889:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CustomLinkPopover=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _CustomLinkSection=__webpack_require__(1253);var _ManageCustomLink=__webpack_require__(1254);var _variables=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ScrollableContainer=_styledComponents.default.div.withConfig({displayName:"ScrollableContainer",componentId:"sc-3spf5d-0"})(["-ms-overflow-style:none;max-height:",";overflow:scroll;"],(0,_variables.px)(535));var CustomLinkPopover=function CustomLinkPopover(_ref){var customLinks=_ref.customLinks,onCreateCustomLinkClick=_ref.onCreateCustomLinkClick,onClose=_ref.onClose,transaction=_ref.transaction;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiPopoverTitle,null,_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{style:{alignItems:"flex-start"}},_react.default.createElement(_eui.EuiButtonEmpty,{color:"text",size:"xs",onClick:onClose,iconType:"arrowLeft",style:{fontWeight:"bold"},flush:"left"},_i18n.i18n.translate("xpack.apm.transactionActionMenu.customLink.popover.title",{defaultMessage:"CUSTOM LINKS"}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_ManageCustomLink.ManageCustomLink,{onCreateCustomLinkClick:onCreateCustomLinkClick})))),_react.default.createElement(ScrollableContainer,null,_react.default.createElement(_CustomLinkSection.CustomLinkSection,{customLinks:customLinks,transaction:transaction})))};exports.CustomLinkPopover=CustomLinkPopover},3890:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSections=void 0;var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(3);var _moment=_interopRequireDefault(__webpack_require__(15));var _url=_interopRequireDefault(__webpack_require__(84));var _DiscoverLink=__webpack_require__(436);var _DiscoverTransactionLink=__webpack_require__(3891);var _InfraLink=__webpack_require__(3892);var _url_helpers=__webpack_require__(71);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getInfraMetricsQuery(transaction){var timestamp=new Date(transaction["@timestamp"]).getTime();var fiveMinutes=_moment.default.duration(5,"minutes").asMilliseconds();return{from:timestamp-fiveMinutes,to:timestamp+fiveMinutes}}var getSections=function getSections(_ref){var _transaction$host,_transaction$kubernet,_transaction$containe,_transaction$url,_transaction$url2;var transaction=_ref.transaction,basePath=_ref.basePath,location=_ref.location,urlParams=_ref.urlParams;var hostName=(_transaction$host=transaction.host)===null||_transaction$host===void 0?void 0:_transaction$host.hostname;var podId=(_transaction$kubernet=transaction.kubernetes)===null||_transaction$kubernet===void 0?void 0:_transaction$kubernet.pod.uid;var containerId=(_transaction$containe=transaction.container)===null||_transaction$containe===void 0?void 0:_transaction$containe.id;var time=Math.round(transaction.timestamp.us/1e3);var infraMetricsQuery=getInfraMetricsQuery(transaction);var uptimeLink=_url.default.format({pathname:basePath.prepend("/app/uptime"),hash:"/?".concat((0,_url_helpers.fromQuery)((0,_lodash.pick)({dateRangeStart:urlParams.rangeFrom,dateRangeEnd:urlParams.rangeTo,search:'url.domain:"'.concat((_transaction$url=transaction.url)===null||_transaction$url===void 0?void 0:_transaction$url.domain,'"')},(function(val){return!(0,_lodash.isEmpty)(val)}))))});var podActions=[{key:"podLogs",label:_i18n.i18n.translate("xpack.apm.transactionActionMenu.showPodLogsLinkLabel",{defaultMessage:"Pod logs"}),href:(0,_InfraLink.getInfraHref)({app:"logs",basePath:basePath,path:"/link-to/pod-logs/".concat(podId),query:{time:time}}),condition:!!podId},{key:"podMetrics",label:_i18n.i18n.translate("xpack.apm.transactionActionMenu.showPodMetricsLinkLabel",{defaultMessage:"Pod metrics"}),href:(0,_InfraLink.getInfraHref)({app:"metrics",basePath:basePath,path:"/link-to/pod-detail/".concat(podId),query:infraMetricsQuery}),condition:!!podId}];var containerActions=[{key:"containerLogs",label:_i18n.i18n.translate("xpack.apm.transactionActionMenu.showContainerLogsLinkLabel",{defaultMessage:"Container logs"}),href:(0,_InfraLink.getInfraHref)({app:"logs",basePath:basePath,path:"/link-to/container-logs/".concat(containerId),query:{time:time}}),condition:!!containerId},{key:"containerMetrics",label:_i18n.i18n.translate("xpack.apm.transactionActionMenu.showContainerMetricsLinkLabel",{defaultMessage:"Container metrics"}),href:(0,_InfraLink.getInfraHref)({app:"metrics",basePath:basePath,path:"/link-to/container-detail/".concat(containerId),query:infraMetricsQuery}),condition:!!containerId}];var hostActions=[{key:"hostLogs",label:_i18n.i18n.translate("xpack.apm.transactionActionMenu.showHostLogsLinkLabel",{defaultMessage:"Host logs"}),href:(0,_InfraLink.getInfraHref)({app:"logs",basePath:basePath,path:"/link-to/host-logs/".concat(hostName),query:{time:time}}),condition:!!hostName},{key:"hostMetrics",label:_i18n.i18n.translate("xpack.apm.transactionActionMenu.showHostMetricsLinkLabel",{defaultMessage:"Host metrics"}),href:(0,_InfraLink.getInfraHref)({app:"metrics",basePath:basePath,path:"/link-to/host-detail/".concat(hostName),query:infraMetricsQuery}),condition:!!hostName}];var logActions=[{key:"traceLogs",label:_i18n.i18n.translate("xpack.apm.transactionActionMenu.showTraceLogsLinkLabel",{defaultMessage:"Trace logs"}),href:(0,_InfraLink.getInfraHref)({app:"logs",basePath:basePath,path:"/link-to/logs",query:{time:time,filter:'trace.id:"'.concat(transaction.trace.id,'" OR ').concat(transaction.trace.id)}}),condition:true}];var uptimeActions=[{key:"monitorStatus",label:_i18n.i18n.translate("xpack.apm.transactionActionMenu.viewInUptime",{defaultMessage:"Status"}),href:uptimeLink,condition:!!((_transaction$url2=transaction.url)===null||_transaction$url2===void 0?void 0:_transaction$url2.domain)}];var kibanaActions=[{key:"sampleDocument",label:_i18n.i18n.translate("xpack.apm.transactionActionMenu.viewSampleDocumentLinkLabel",{defaultMessage:"View sample document"}),href:(0,_DiscoverLink.getDiscoverHref)({basePath:basePath,query:(0,_DiscoverTransactionLink.getDiscoverQuery)(transaction),location:location}),condition:true}];var sectionRecord={observability:[{key:"podDetails",title:_i18n.i18n.translate("xpack.apm.transactionActionMenu.pod.title",{defaultMessage:"Pod details"}),subtitle:_i18n.i18n.translate("xpack.apm.transactionActionMenu.pod.subtitle",{defaultMessage:"View logs and metrics for this pod to get further details."}),actions:podActions},{key:"containerDetails",title:_i18n.i18n.translate("xpack.apm.transactionActionMenu.container.title",{defaultMessage:"Container details"}),subtitle:_i18n.i18n.translate("xpack.apm.transactionActionMenu.container.subtitle",{defaultMessage:"View logs and metrics for this container to get further details."}),actions:containerActions},{key:"hostDetails",title:_i18n.i18n.translate("xpack.apm.transactionActionMenu.host.title",{defaultMessage:"Host details"}),subtitle:_i18n.i18n.translate("xpack.apm.transactionActionMenu.host.subtitle",{defaultMessage:"View host logs and metrics to get further details."}),actions:hostActions},{key:"traceDetails",title:_i18n.i18n.translate("xpack.apm.transactionActionMenu.trace.title",{defaultMessage:"Trace details"}),subtitle:_i18n.i18n.translate("xpack.apm.transactionActionMenu.trace.subtitle",{defaultMessage:"View trace logs to get further details."}),actions:logActions},{key:"statusDetails",title:_i18n.i18n.translate("xpack.apm.transactionActionMenu.status.title",{defaultMessage:"Status details"}),subtitle:_i18n.i18n.translate("xpack.apm.transactionActionMenu.status.subtitle",{defaultMessage:"View status to get further details."}),actions:uptimeActions}],kibana:[{key:"kibana",actions:kibanaActions}]};return Object.values(sectionRecord).map((function(sections){return sections.map((function(section){return _objectSpread({},section,{actions:section.actions.filter((function(action){return action.condition}))})})).filter((function(section){return!(0,_lodash.isEmpty)(section.actions)}))})).filter((function(sections){return!(0,_lodash.isEmpty)(sections)}))};exports.getSections=getSections},3891:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDiscoverQuery=getDiscoverQuery;exports.DiscoverTransactionLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _elasticsearch_fieldnames=__webpack_require__(81);var _DiscoverLink=__webpack_require__(436);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getDiscoverQuery(transaction){var transactionId=transaction.transaction.id;var traceId=transaction.trace.id;var query="".concat(_elasticsearch_fieldnames.PROCESSOR_EVENT,':"transaction" AND ').concat(_elasticsearch_fieldnames.TRANSACTION_ID,':"').concat(transactionId,'"');if(traceId){query+=" AND ".concat(_elasticsearch_fieldnames.TRACE_ID,':"').concat(traceId,'"')}return{_a:{interval:"auto",query:{language:"kuery",query:query}}}}var DiscoverTransactionLink=function DiscoverTransactionLink(_ref){var transaction=_ref.transaction,children=_ref.children;return _react.default.createElement(_DiscoverLink.DiscoverLink,{query:getDiscoverQuery(transaction),children:children})};exports.DiscoverTransactionLink=DiscoverTransactionLink},3892:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InfraLink=InfraLink;exports.getInfraHref=void 0;var _eui=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _url=_interopRequireDefault(__webpack_require__(84));var _url_helpers=__webpack_require__(71);var _useApmPluginContext2=__webpack_require__(62);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var getInfraHref=function getInfraHref(_ref){var app=_ref.app,basePath=_ref.basePath,query=_ref.query,path=_ref.path;var nextSearch=(0,_url_helpers.fromQuery)(query);return _url.default.format({pathname:basePath.prepend("/app/".concat(app).concat(path||"")),search:nextSearch})};exports.getInfraHref=getInfraHref;function InfraLink(_ref2){var app=_ref2.app,path=_ref2.path,_ref2$query=_ref2.query,query=_ref2$query===void 0?{}:_ref2$query,rest=_objectWithoutProperties(_ref2,["app","path","query"]);var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),core=_useApmPluginContext.core;var href=getInfraHref({app:app,basePath:core.http.basePath,query:query,path:path});return _react.default.createElement(_eui.EuiLink,_extends({},rest,{href:href}))}},3893:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MaybeViewTraceLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _TransactionDetailLink=__webpack_require__(288);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MaybeViewTraceLink=function MaybeViewTraceLink(_ref){var transaction=_ref.transaction,waterfall=_ref.waterfall;var viewFullTraceButtonLabel=_i18n.i18n.translate("xpack.apm.transactionDetails.viewFullTraceButtonLabel",{defaultMessage:"View full trace"});var rootTransaction=waterfall.rootTransaction;if(!rootTransaction){return _react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.transactionDetails.noTraceParentButtonTooltip",{defaultMessage:"The trace parent cannot be found"})},_react.default.createElement(_eui.EuiButton,{iconType:"apmTrace",disabled:true},viewFullTraceButtonLabel)))}var isRoot=transaction.transaction.id===rootTransaction.transaction.id;if(isRoot){return _react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.transactionDetails.viewingFullTraceButtonTooltip",{defaultMessage:"Currently viewing the full trace"})},_react.default.createElement(_eui.EuiButton,{iconType:"apmTrace",disabled:true},viewFullTraceButtonLabel)))}else{return _react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_TransactionDetailLink.TransactionDetailLink,{serviceName:rootTransaction.service.name,transactionId:rootTransaction.transaction.id,traceId:rootTransaction.trace.id,transactionName:rootTransaction.transaction.name,transactionType:rootTransaction.transaction.type},_react.default.createElement(_eui.EuiButton,{iconType:"apmTrace"},viewFullTraceButtonLabel)))}};exports.MaybeViewTraceLink=MaybeViewTraceLink},3894:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionTabs=TransactionTabs;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _url_helpers=__webpack_require__(71);var _history=__webpack_require__(82);var _TransactionMetadata=__webpack_require__(1255);var _WaterfallContainer=__webpack_require__(3896);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var timelineTab={key:"timeline",label:_i18n.i18n.translate("xpack.apm.propertiesTable.tabs.timelineLabel",{defaultMessage:"Timeline"})};var metadataTab={key:"metadata",label:_i18n.i18n.translate("xpack.apm.propertiesTable.tabs.metadataLabel",{defaultMessage:"Metadata"})};function TransactionTabs(_ref){var location=_ref.location,transaction=_ref.transaction,urlParams=_ref.urlParams,waterfall=_ref.waterfall,exceedsMax=_ref.exceedsMax;var tabs=[timelineTab,metadataTab];var currentTab=urlParams.detailTab===metadataTab.key?metadataTab:timelineTab;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTabs,null,tabs.map((function(_ref2){var key=_ref2.key,label=_ref2.label;return _react.default.createElement(_eui.EuiTab,{onClick:function onClick(){_history.history.replace(_objectSpread({},location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(location.search),{detailTab:key}))}))},isSelected:currentTab.key===key,key:key},label)}))),_react.default.createElement(_eui.EuiSpacer,null),currentTab.key===timelineTab.key?_react.default.createElement(_WaterfallContainer.WaterfallContainer,{location:location,urlParams:urlParams,waterfall:waterfall,exceedsMax:exceedsMax}):_react.default.createElement(_TransactionMetadata.TransactionMetadata,{transaction:transaction}))}},3895:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TRANSACTION_METADATA_SECTIONS=void 0;var _sections=__webpack_require__(617);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TRANSACTION_METADATA_SECTIONS=[_objectSpread({},_sections.LABELS,{required:true}),_sections.TRANSACTION,_sections.HTTP,_sections.HOST,_sections.CLIENT,_sections.CONTAINER,_sections.SERVICE,_sections.PROCESS,_sections.MESSAGE_TRANSACTION,_sections.AGENT,_sections.URL,_objectSpread({},_sections.PAGE,{key:"transaction.page"}),_objectSpread({},_sections.USER,{required:true}),_sections.USER_AGENT,_sections.CUSTOM_TRANSACTION];exports.TRANSACTION_METADATA_SECTIONS=TRANSACTION_METADATA_SECTIONS},3896:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WaterfallContainer=WaterfallContainer;var _react=_interopRequireDefault(__webpack_require__(0));var _ServiceLegends=__webpack_require__(3897);var _Waterfall=__webpack_require__(3898);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function WaterfallContainer(_ref){var location=_ref.location,urlParams=_ref.urlParams,waterfall=_ref.waterfall,exceedsMax=_ref.exceedsMax;if(!waterfall){return null}return _react.default.createElement("div",null,_react.default.createElement(_ServiceLegends.ServiceLegends,{serviceColors:waterfall.serviceColors}),_react.default.createElement(_Waterfall.Waterfall,{location:location,waterfallItemId:urlParams.waterfallItemId,waterfall:waterfall,exceedsMax:exceedsMax}))}},3897:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceLegends=ServiceLegends;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _variables=__webpack_require__(26);var _Legend=__webpack_require__(344);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var Legends=_styledComponents.default.div.withConfig({displayName:"Legends",componentId:"am8gae-0"})(["display:flex;> *{margin-right:",";&:last-child{margin-right:0;}}"],(0,_variables.px)(_variables.unit));function ServiceLegends(_ref){var serviceColors=_ref.serviceColors;return _react.default.createElement(Legends,null,_react.default.createElement(_eui.EuiTitle,{size:"xxxs"},_react.default.createElement("span",null,_i18n.i18n.translate("xpack.apm.transactionDetails.servicesTitle",{defaultMessage:"Services"}))),Object.entries(serviceColors).map((function(_ref2){var _ref3=_slicedToArray(_ref2,2),label=_ref3[0],color=_ref3[1];return _react.default.createElement(_Legend.Legend,{key:color,color:color,text:label})})))}},3898:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Waterfall=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _reactSticky=__webpack_require__(715);var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _variables=__webpack_require__(26);var _history=__webpack_require__(82);var _Timeline=__webpack_require__(3899);var _url_helpers=__webpack_require__(71);var _get_agent_marks=__webpack_require__(3907);var _get_error_marks=__webpack_require__(3908);var _WaterfallFlyout=__webpack_require__(3909);var _WaterfallItem=__webpack_require__(3921);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Container=_styledComponents.default.div.withConfig({displayName:"Container",componentId:"c399qo-0"})(["transition:0.1s padding ease;position:relative;overflow:hidden;"]);var TIMELINE_MARGINS={top:40,left:50,right:50,bottom:0};var toggleFlyout=function toggleFlyout(_ref){var item=_ref.item,location=_ref.location;_history.history.replace(_objectSpread({},location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(location.search),{flyoutDetailTab:undefined,waterfallItemId:item===null||item===void 0?void 0:item.id}))}))};var WaterfallItemsContainer=_styledComponents.default.div.withConfig({displayName:"WaterfallItemsContainer",componentId:"c399qo-1"})(["padding-top:",";"],(function(props){return(0,_variables.px)(props.paddingTop)}));var Waterfall=function Waterfall(_ref2){var waterfall=_ref2.waterfall,exceedsMax=_ref2.exceedsMax,waterfallItemId=_ref2.waterfallItemId,location=_ref2.location;var itemContainerHeight=58;var waterfallHeight=itemContainerHeight*waterfall.items.length;var serviceColors=waterfall.serviceColors,duration=waterfall.duration;var agentMarks=(0,_get_agent_marks.getAgentMarks)(waterfall.entryTransaction);var errorMarks=(0,_get_error_marks.getErrorMarks)(waterfall.errorItems,serviceColors);var renderWaterfallItem=function renderWaterfallItem(item){var errorCount=item.docType==="transaction"?waterfall.errorsPerTransaction[item.doc.transaction.id]:0;return _react.default.createElement(_WaterfallItem.WaterfallItem,{key:item.id,timelineMargins:TIMELINE_MARGINS,color:serviceColors[item.doc.service.name],item:item,totalDuration:duration,isSelected:item.id===waterfallItemId,errorCount:errorCount,onClick:function onClick(){return toggleFlyout({item:item,location:location})}})};return _react.default.createElement(Container,null,exceedsMax&&_react.default.createElement(_eui.EuiCallOut,{color:"warning",size:"s",iconType:"alert",title:_i18n.i18n.translate("xpack.apm.waterfall.exceedsMax",{defaultMessage:"Number of items in this trace exceed what is displayed"})}),_react.default.createElement(_reactSticky.StickyContainer,null,_react.default.createElement(_Timeline.Timeline,{marks:[].concat(_toConsumableArray(agentMarks),_toConsumableArray(errorMarks)),xMax:duration,height:waterfallHeight,margins:TIMELINE_MARGINS}),_react.default.createElement(WaterfallItemsContainer,{paddingTop:TIMELINE_MARGINS.top},waterfall.items.map(renderWaterfallItem))),_react.default.createElement(_WaterfallFlyout.WaterfallFlyout,{waterfallItemId:waterfallItemId,waterfall:waterfall,location:location,toggleFlyout:toggleFlyout}))};exports.Waterfall=Waterfall},3899:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.Timeline=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(5));var _react=_interopRequireWildcard(__webpack_require__(0));var _reactVis=__webpack_require__(191);var _plotUtils=__webpack_require__(3900);var _TimelineAxis=__webpack_require__(3901);var _VerticalLines=__webpack_require__(3906);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TL=function(_PureComponent){_inherits(TL,_PureComponent);function TL(){_classCallCheck(this,TL);return _possibleConstructorReturn(this,_getPrototypeOf(TL).apply(this,arguments))}_createClass(TL,[{key:"render",value:function render(){var _this$props=this.props,width=_this$props.width,xMin=_this$props.xMin,xMax=_this$props.xMax,marks=_this$props.marks,height=_this$props.height,margins=_this$props.margins;if(xMax==null||!width){return null}var plotValues=(0,_plotUtils.getPlotValues)({width:width,xMin:xMin,xMax:xMax,height:height,margins:margins});var topTraceDuration=xMax-(xMin!==null&&xMin!==void 0?xMin:0);return _react.default.createElement("div",null,_react.default.createElement(_TimelineAxis.TimelineAxis,{plotValues:plotValues,marks:marks,topTraceDuration:topTraceDuration}),_react.default.createElement(_VerticalLines.VerticalLines,{plotValues:plotValues,marks:marks,topTraceDuration:topTraceDuration}))}}]);return TL}(_react.PureComponent);_defineProperty(TL,"propTypes",{marks:_propTypes.default.array,xMin:_propTypes.default.number,xMax:_propTypes.default.number,height:_propTypes.default.number.isRequired,header:_propTypes.default.node,margins:_propTypes.default.object.isRequired,width:_propTypes.default.number});var Timeline=(0,_reactVis.makeWidthFlexible)(TL);exports.Timeline=Timeline},39:function(module,exports){module.exports=__kbnSharedDeps__.MomentTimezone},3900:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPlotValues=getPlotValues;var _d3Scale=__webpack_require__(329);function getPlotValues(_ref){var width=_ref.width,_ref$xMin=_ref.xMin,xMin=_ref$xMin===void 0?0:_ref$xMin,xMax=_ref.xMax,height=_ref.height,margins=_ref.margins;var xScale=(0,_d3Scale.scaleLinear)().domain([xMin,xMax]).range([margins.left,width-margins.right]);return{height:height,margins:margins,tickValues:xScale.ticks(7),width:width,xDomain:xScale.domain(),xMax:xMax,xScale:xScale}}},3901:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimelineAxis=TimelineAxis;var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _lodash=__webpack_require__(3);var _react=_interopRequireDefault(__webpack_require__(0));var _reactSticky=__webpack_require__(715);var _reactVis=__webpack_require__(191);var _variables=__webpack_require__(26);var _formatters=__webpack_require__(72);var _LastTickValue=__webpack_require__(3902);var _Marker=__webpack_require__(3903);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getXAxisTickValues=function getXAxisTickValues(tickValues,topTraceDuration){if(topTraceDuration==null){return tickValues}var padding=(tickValues[1]-tickValues[0])/2;var lowerBound=topTraceDuration-padding;var upperBound=topTraceDuration+padding;return tickValues.filter((function(value){var isInRange=(0,_lodash.inRange)(value,lowerBound,upperBound);return!isInRange&&value!==topTraceDuration}))};function TimelineAxis(_ref){var plotValues=_ref.plotValues,_ref$marks=_ref.marks,marks=_ref$marks===void 0?[]:_ref$marks,topTraceDuration=_ref.topTraceDuration;var margins=plotValues.margins,tickValues=plotValues.tickValues,width=plotValues.width,xDomain=plotValues.xDomain,xMax=plotValues.xMax,xScale=plotValues.xScale;var tickFormatter=(0,_formatters.getDurationFormatter)(xMax);var xAxisTickValues=getXAxisTickValues(tickValues,topTraceDuration);var topTraceDurationFormatted=tickFormatter(topTraceDuration).formatted;return _react.default.createElement(_reactSticky.Sticky,{disableCompensation:true},(function(_ref2){var style=_ref2.style;return _react.default.createElement("div",{style:_objectSpread({position:"absolute",borderBottom:"1px solid ".concat(_eui_theme_light.default.euiColorMediumShade),height:(0,_variables.px)(margins.top),zIndex:2,width:"100%"},style)},_react.default.createElement(_reactVis.XYPlot,{dontCheckIfEmpty:true,width:width,height:margins.top,margin:{top:margins.top,left:margins.left,right:margins.right},xDomain:xDomain},_react.default.createElement(_reactVis.XAxis,{hideLine:true,orientation:"top",tickSize:0,tickValues:xAxisTickValues,tickFormat:function tickFormat(time){return tickFormatter(time).formatted},tickPadding:20,style:{text:{fill:_eui_theme_light.default.euiColorDarkShade}}}),topTraceDuration>0&&_react.default.createElement(_LastTickValue.LastTickValue,{x:xScale(topTraceDuration),value:topTraceDurationFormatted,marginTop:28}),marks.map((function(mark){return _react.default.createElement(_Marker.Marker,{key:mark.id,mark:mark,x:xScale(mark.offset)})}))))}))}},3902:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LastTickValue=LastTickValue;var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function LastTickValue(_ref){var x=_ref.x,marginTop=_ref.marginTop,value=_ref.value;return _react.default.createElement("g",{transform:"translate(".concat(x,", ").concat(marginTop,")")},_react.default.createElement("text",{textAnchor:"middle",dy:"0",transform:"translate(0, -8)"},value))}LastTickValue.requiresSVG=true},3903:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Marker=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _variables=__webpack_require__(26);var _AgentMarker=__webpack_require__(3904);var _ErrorMarker=__webpack_require__(3905);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MarkerContainer=_styledComponents.default.div.withConfig({displayName:"MarkerContainer",componentId:"sc-1ggwr5-0"})(["position:absolute;bottom:0;"]);var Marker=function Marker(_ref){var mark=_ref.mark,x=_ref.x;var legendWidth=11;return _react.default.createElement(MarkerContainer,{style:{left:(0,_variables.px)(x-legendWidth/2)}},mark.type==="errorMark"?_react.default.createElement(_ErrorMarker.ErrorMarker,{mark:mark}):_react.default.createElement(_AgentMarker.AgentMarker,{mark:mark}))};exports.Marker=Marker},3904:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AgentMarker=void 0;var _eui=__webpack_require__(2);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _variables=__webpack_require__(26);var _formatters=__webpack_require__(72);var _Legend=__webpack_require__(344);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var NameContainer=_styledComponents.default.div.withConfig({displayName:"NameContainer",componentId:"sc-15edmj9-0"})(["border-bottom:1px solid ",";padding-bottom:",";"],_eui_theme_light.default.euiColorMediumShade,(0,_variables.px)(_variables.units.half));var TimeContainer=_styledComponents.default.div.withConfig({displayName:"TimeContainer",componentId:"sc-15edmj9-1"})(["color:",";padding-top:",";"],_eui_theme_light.default.euiColorMediumShade,(0,_variables.px)(_variables.units.half));var AgentMarker=function AgentMarker(_ref){var mark=_ref.mark;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiToolTip,{id:mark.id,position:"top",content:_react.default.createElement("div",null,_react.default.createElement(NameContainer,null,mark.id),_react.default.createElement(TimeContainer,null,(0,_formatters.asDuration)(mark.offset)))},_react.default.createElement(_Legend.Legend,{clickable:true,color:_eui_theme_light.default.euiColorMediumShade})))};exports.AgentMarker=AgentMarker},3905:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorMarker=void 0;var _eui=__webpack_require__(2);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _react=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _elasticsearch_fieldnames=__webpack_require__(81);var _useUrlParams2=__webpack_require__(35);var _variables=__webpack_require__(26);var _formatters=__webpack_require__(72);var _ErrorDetailLink=__webpack_require__(1236);var _Legend=__webpack_require__(344);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var Popover=_styledComponents.default.div.withConfig({displayName:"Popover",componentId:"nug8b5-0"})(["max-width:",";"],(0,_variables.px)(280));var TimeLegend=(0,_styledComponents.default)(_Legend.Legend).withConfig({displayName:"TimeLegend",componentId:"nug8b5-1"})(["margin-bottom:",";"],(0,_variables.px)(_variables.unit));var ErrorLink=(0,_styledComponents.default)(_ErrorDetailLink.ErrorDetailLink).withConfig({displayName:"ErrorLink",componentId:"nug8b5-2"})(["display:block;margin:"," 0 "," 0;"],(0,_variables.px)(_variables.units.half),(0,_variables.px)(_variables.units.half));var Button=(0,_styledComponents.default)(_Legend.Legend).withConfig({displayName:"Button",componentId:"nug8b5-3"})(["height:20px;display:flex;align-items:flex-end;"]);var ErrorMarker=function ErrorMarker(_ref){var _error$trace,_error$transaction,_error$error$log,_error$error$exceptio,_error$error$exceptio2;var mark=_ref.mark;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isPopoverOpen=_useState2[0],showPopover=_useState2[1];var togglePopover=function togglePopover(){return showPopover(!isPopoverOpen)};var button=_react.default.createElement(Button,{clickable:true,color:_eui_theme_light.default.euiColorDanger,shape:_Legend.Shape.square,onClick:togglePopover});var error=mark.error;var rangeTo=urlParams.rangeTo,rangeFrom=urlParams.rangeFrom;var query={kuery:encodeURIComponent("".concat(_elasticsearch_fieldnames.TRACE_ID,' : "').concat((_error$trace=error.trace)===null||_error$trace===void 0?void 0:_error$trace.id,'" and ').concat(_elasticsearch_fieldnames.TRANSACTION_ID,' : "').concat((_error$transaction=error.transaction)===null||_error$transaction===void 0?void 0:_error$transaction.id,'"')),rangeFrom:rangeFrom,rangeTo:rangeTo};return _react.default.createElement(_eui.EuiPopover,{id:"popover",button:button,isOpen:isPopoverOpen,closePopover:togglePopover,anchorPosition:"upCenter"},_react.default.createElement(Popover,null,_react.default.createElement(TimeLegend,{text:(0,_formatters.asDuration)(mark.offset),indicator:function indicator(){return _react.default.createElement("div",{style:{marginRight:(0,_variables.px)(_variables.units.quarter)}},"@")}}),_react.default.createElement(_Legend.Legend,{key:mark.serviceColor,color:mark.serviceColor,text:error.service.name}),_react.default.createElement(_eui.EuiText,{size:"s"},_react.default.createElement(ErrorLink,{serviceName:error.service.name,errorGroupId:error.error.grouping_key,query:query},((_error$error$log=error.error.log)===null||_error$error$log===void 0?void 0:_error$error$log.message)||((_error$error$exceptio=error.error.exception)===null||_error$error$exceptio===void 0?void 0:(_error$error$exceptio2=_error$error$exceptio[0])===null||_error$error$exceptio2===void 0?void 0:_error$error$exceptio2.message)))))};exports.ErrorMarker=ErrorMarker},3906:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.VerticalLines=void 0;var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _react=_interopRequireWildcard(__webpack_require__(0));var _reactVis=__webpack_require__(191);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var VerticalLines=function(_PureComponent){_inherits(VerticalLines,_PureComponent);function VerticalLines(){_classCallCheck(this,VerticalLines);return _possibleConstructorReturn(this,_getPrototypeOf(VerticalLines).apply(this,arguments))}_createClass(VerticalLines,[{key:"render",value:function render(){var _this$props=this.props,topTraceDuration=_this$props.topTraceDuration,_this$props$marks=_this$props.marks,marks=_this$props$marks===void 0?[]:_this$props$marks;var _this$props$plotValue=this.props.plotValues,width=_this$props$plotValue.width,height=_this$props$plotValue.height,margins=_this$props$plotValue.margins,xDomain=_this$props$plotValue.xDomain,tickValues=_this$props$plotValue.tickValues;var markTimes=marks.filter((function(mark){return mark.verticalLine})).map((function(_ref){var offset=_ref.offset;return offset}));return _react.default.createElement("div",{style:{position:"absolute",top:0,left:0}},_react.default.createElement(_reactVis.XYPlot,{dontCheckIfEmpty:true,width:width,height:height+margins.top,margin:margins,xDomain:xDomain},_react.default.createElement(_reactVis.VerticalGridLines,{tickValues:tickValues,style:{stroke:_eui_theme_light.default.euiColorLightestShade}}),_react.default.createElement(_reactVis.VerticalGridLines,{tickValues:markTimes,style:{stroke:_eui_theme_light.default.euiColorMediumShade}}),topTraceDuration>0&&_react.default.createElement(_reactVis.VerticalGridLines,{tickValues:[topTraceDuration],style:{stroke:_eui_theme_light.default.euiColorMediumShade}})))}}]);return VerticalLines}(_react.PureComponent);exports.VerticalLines=VerticalLines},3907:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAgentMarks=getAgentMarks;var _lodash=__webpack_require__(3);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function getAgentMarks(transaction){var _transaction$transact;var agent=transaction===null||transaction===void 0?void 0:(_transaction$transact=transaction.transaction.marks)===null||_transaction$transact===void 0?void 0:_transaction$transact.agent;if(!agent){return[]}return(0,_lodash.sortBy)(Object.entries(agent).map((function(_ref){var _ref2=_slicedToArray(_ref,2),name=_ref2[0],ms=_ref2[1];return{type:"agentMark",id:name,offset:ms*1e3,verticalLine:true}})),"offset")}},3908:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getErrorMarks=void 0;var _lodash=__webpack_require__(3);var getErrorMarks=function getErrorMarks(errorItems,serviceColors){if((0,_lodash.isEmpty)(errorItems)){return[]}return errorItems.map((function(error){return{type:"errorMark",offset:error.offset+error.skew,verticalLine:false,id:error.doc.error.id,error:error.doc,serviceColor:serviceColors[error.doc.service.name]}}))};exports.getErrorMarks=getErrorMarks},3909:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WaterfallFlyout=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _SpanFlyout=__webpack_require__(3910);var _TransactionFlyout=__webpack_require__(3918);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var WaterfallFlyout=function WaterfallFlyout(_ref){var _currentItem$parent,_currentItem$parent2,_waterfall$rootTransa;var waterfallItemId=_ref.waterfallItemId,waterfall=_ref.waterfall,location=_ref.location,toggleFlyout=_ref.toggleFlyout;var currentItem=waterfall.items.find((function(item){return item.id===waterfallItemId}));if(!currentItem){return null}switch(currentItem.docType){case"span":var parentTransaction=((_currentItem$parent=currentItem.parent)===null||_currentItem$parent===void 0?void 0:_currentItem$parent.docType)==="transaction"?(_currentItem$parent2=currentItem.parent)===null||_currentItem$parent2===void 0?void 0:_currentItem$parent2.doc:undefined;return _react.default.createElement(_SpanFlyout.SpanFlyout,{totalDuration:waterfall.duration,span:currentItem.doc,parentTransaction:parentTransaction,onClose:function onClose(){return toggleFlyout({location:location})}});case"transaction":return _react.default.createElement(_TransactionFlyout.TransactionFlyout,{transaction:currentItem.doc,onClose:function onClose(){return toggleFlyout({location:location})},rootTransactionDuration:(_waterfall$rootTransa=waterfall.rootTransaction)===null||_waterfall$rootTransa===void 0?void 0:_waterfall$rootTransa.transaction.duration.us,errorCount:waterfall.errorsPerTransaction[currentItem.id]});default:return null}};exports.WaterfallFlyout=WaterfallFlyout},3910:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SpanFlyout=SpanFlyout;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _variables=__webpack_require__(26);var _Summary=__webpack_require__(619);var _TimestampTooltip=__webpack_require__(287);var _DurationSummaryItem=__webpack_require__(1249);var _DiscoverSpanLink=__webpack_require__(3911);var _Stacktrace=__webpack_require__(438);var _ResponsiveFlyout=__webpack_require__(1256);var _DatabaseContext=__webpack_require__(3912);var _StickySpanProperties=__webpack_require__(3915);var _HttpInfoSummaryItem=__webpack_require__(621);var _SpanMetadata=__webpack_require__(3916);var _SyncBadge=__webpack_require__(1258);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function formatType(type){switch(type){case"db":return"DB";case"hard-navigation":return _i18n.i18n.translate("xpack.apm.transactionDetails.spanFlyout.spanType.navigationTimingLabel",{defaultMessage:"Navigation timing"});default:return type}}function formatSubtype(subtype){switch(subtype){case"mysql":return"MySQL";default:return subtype}}function getSpanTypes(span){var _span$span=span.span,type=_span$span.type,subtype=_span$span.subtype,action=_span$span.action;return{spanType:formatType(type),spanSubtype:formatSubtype(subtype),spanAction:action}}var SpanBadge=(0,_styledComponents.default)(_eui.EuiBadge).withConfig({displayName:"SpanBadge",componentId:"sc-1hu9fl2-0"})(["display:inline-block;margin-right:",";"],(0,_variables.px)(_variables.units.quarter));var HttpInfoContainer=(0,_styledComponents.default)("div").withConfig({displayName:"HttpInfoContainer",componentId:"sc-1hu9fl2-1"})(["margin-right:",";"],(0,_variables.px)(_variables.units.quarter));function SpanFlyout(_ref){var _parentTransaction$se,_httpContext$response,_httpContext$url;var span=_ref.span,parentTransaction=_ref.parentTransaction,totalDuration=_ref.totalDuration,onClose=_ref.onClose;if(!span){return null}var stackframes=span.span.stacktrace;var codeLanguage=parentTransaction===null||parentTransaction===void 0?void 0:(_parentTransaction$se=parentTransaction.service.language)===null||_parentTransaction$se===void 0?void 0:_parentTransaction$se.name;var dbContext=span.span.db;var httpContext=span.span.http;var spanTypes=getSpanTypes(span);var spanHttpStatusCode=httpContext===null||httpContext===void 0?void 0:(_httpContext$response=httpContext.response)===null||_httpContext$response===void 0?void 0:_httpContext$response.status_code;var spanHttpUrl=httpContext===null||httpContext===void 0?void 0:(_httpContext$url=httpContext.url)===null||_httpContext$url===void 0?void 0:_httpContext$url.original;var spanHttpMethod=httpContext===null||httpContext===void 0?void 0:httpContext.method;return _react.default.createElement(_eui.EuiPortal,null,_react.default.createElement(_ResponsiveFlyout.ResponsiveFlyout,{onClose:onClose,size:"m",ownFocus:true},_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.apm.transactionDetails.spanFlyout.spanDetailsTitle",{defaultMessage:"Span details"})))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_DiscoverSpanLink.DiscoverSpanLink,{span:span},_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"discoverApp"},_i18n.i18n.translate("xpack.apm.transactionDetails.spanFlyout.viewSpanInDiscoverButtonLabel",{defaultMessage:"View span in Discover"})))))),_react.default.createElement(_eui.EuiFlyoutBody,null,_react.default.createElement(_StickySpanProperties.StickySpanProperties,{span:span,transaction:parentTransaction}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_Summary.Summary,{items:[_react.default.createElement(_TimestampTooltip.TimestampTooltip,{time:span.timestamp.us/1e3}),_react.default.createElement(_DurationSummaryItem.DurationSummaryItem,{duration:span.span.duration.us,totalDuration:totalDuration,parentType:"transaction"}),_react.default.createElement(_react.default.Fragment,null,spanHttpUrl&&_react.default.createElement(HttpInfoContainer,null,_react.default.createElement(_HttpInfoSummaryItem.HttpInfoSummaryItem,{method:spanHttpMethod,url:spanHttpUrl,status:spanHttpStatusCode})),_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.transactionDetails.spanFlyout.spanType",{defaultMessage:"Type"})},_react.default.createElement(SpanBadge,{color:"hollow"},spanTypes.spanType)),spanTypes.spanSubtype&&_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.transactionDetails.spanFlyout.spanSubtype",{defaultMessage:"Subtype"})},_react.default.createElement(SpanBadge,{color:"hollow"},spanTypes.spanSubtype)),spanTypes.spanAction&&_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.transactionDetails.spanFlyout.spanAction",{defaultMessage:"Action"})},_react.default.createElement(SpanBadge,{color:"hollow"},spanTypes.spanAction)),_react.default.createElement(_SyncBadge.SyncBadge,{sync:span.span.sync}))]}),_react.default.createElement(_eui.EuiHorizontalRule,null),_react.default.createElement(_DatabaseContext.DatabaseContext,{dbContext:dbContext}),_react.default.createElement(_eui.EuiTabbedContent,{tabs:[{id:"stack-trace",name:_i18n.i18n.translate("xpack.apm.transactionDetails.spanFlyout.stackTraceTabLabel",{defaultMessage:"Stack Trace"}),content:_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_Stacktrace.Stacktrace,{stackframes:stackframes,codeLanguage:codeLanguage}))},{id:"metadata",name:_i18n.i18n.translate("xpack.apm.propertiesTable.tabs.metadataLabel",{defaultMessage:"Metadata"}),content:_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_SpanMetadata.SpanMetadata,{span:span}))}]}))))}},3911:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiscoverSpanLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _elasticsearch_fieldnames=__webpack_require__(81);var _DiscoverLink=__webpack_require__(436);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getDiscoverQuery(span){var query="".concat(_elasticsearch_fieldnames.SPAN_ID,':"').concat(span.span.id,'"');return{_a:{interval:"auto",query:{language:"kuery",query:query}}}}var DiscoverSpanLink=function DiscoverSpanLink(_ref){var span=_ref.span,children=_ref.children;return _react.default.createElement(_DiscoverLink.DiscoverLink,{query:getDiscoverQuery(span),children:children})};exports.DiscoverSpanLink=DiscoverSpanLink},3912:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DatabaseContext=DatabaseContext;var _eui=__webpack_require__(2);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _i18n=__webpack_require__(1);var _polished=__webpack_require__(149);var _react=_interopRequireWildcard(__webpack_require__(0));var _sql=_interopRequireDefault(__webpack_require__(4705));var _light=_interopRequireWildcard(__webpack_require__(1415));var _styles=__webpack_require__(1423);var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _variables=__webpack_require__(26);var _TruncateHeightSection=__webpack_require__(3914);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(0,_light.registerLanguage)("sql",_sql.default);var DatabaseStatement=_styledComponents.default.div.withConfig({displayName:"DatabaseStatement",componentId:"sc-5mz4ii-0"})(["padding:"," ",";background:",";border-radius:",";border:1px solid ",";font-family:",";font-size:",";"],(0,_variables.px)(_variables.units.half),(0,_variables.px)(_variables.unit),(0,_polished.tint)(.1,_eui_theme_light.default.euiColorWarning),_variables.borderRadius,_eui_theme_light.default.euiColorLightShade,_variables.fontFamilyCode,_variables.fontSize);var dbSyntaxLineHeight=_variables.unit*1.5;function DatabaseContext(_ref){var dbContext=_ref.dbContext;if(!dbContext||!dbContext.statement){return null}if(dbContext.type!=="sql"){return _react.default.createElement(DatabaseStatement,null,dbContext.statement)}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h3",null,_i18n.i18n.translate("xpack.apm.transactionDetails.spanFlyout.databaseStatementTitle",{defaultMessage:"Database statement"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(DatabaseStatement,null,_react.default.createElement(_TruncateHeightSection.TruncateHeightSection,{previewHeight:10*dbSyntaxLineHeight},_react.default.createElement(_light.default,{language:"sql",style:_styles.xcode,customStyle:{color:null,background:null,padding:null,lineHeight:(0,_variables.px)(dbSyntaxLineHeight),whiteSpace:"pre-wrap",overflowX:"scroll"}},dbContext.statement))),_react.default.createElement(_eui.EuiSpacer,{size:"l"}))}},3914:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TruncateHeightSection=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _variables=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var ToggleButtonContainer=_styledComponents.default.div.withConfig({displayName:"ToggleButtonContainer",componentId:"sc-1mcx3ay-0"})(["margin-top:",";user-select:none;"],(0,_variables.px)(_variables.units.half));var TruncateHeightSection=function TruncateHeightSection(_ref){var children=_ref.children,previewHeight=_ref.previewHeight;var contentContainerEl=(0,_react.useRef)(null);var _useState=(0,_react.useState)(true),_useState2=_slicedToArray(_useState,2),showToggle=_useState2[0],setShowToggle=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),isOpen=_useState4[0],setIsOpen=_useState4[1];(0,_react.useEffect)((function(){if(contentContainerEl.current){var shouldShow=contentContainerEl.current.scrollHeight>previewHeight;setShowToggle(shouldShow)}}),[children,previewHeight]);return _react.default.createElement(_react.Fragment,null,_react.default.createElement("div",{ref:contentContainerEl,style:{overflow:"hidden",maxHeight:isOpen?"initial":(0,_variables.px)(previewHeight)}},children),showToggle?_react.default.createElement(ToggleButtonContainer,null,_react.default.createElement(_eui.EuiLink,{onClick:function onClick(){setIsOpen(!isOpen)}},_react.default.createElement(_eui.EuiIcon,{style:{transition:"transform 0.1s",transform:"rotate(".concat(isOpen?90:0,"deg)")},type:"arrowRight"})," ",isOpen?_i18n.i18n.translate("xpack.apm.toggleHeight.showLessButtonLabel",{defaultMessage:"Show fewer lines"}):_i18n.i18n.translate("xpack.apm.toggleHeight.showMoreButtonLabel",{defaultMessage:"Show more lines"}))):null)};exports.TruncateHeightSection=TruncateHeightSection},3915:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StickySpanProperties=StickySpanProperties;var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _elasticsearch_fieldnames=__webpack_require__(81);var _i18n2=__webpack_require__(160);var _StickyProperties=__webpack_require__(1257);var _TransactionOverviewLink=__webpack_require__(439);var _TransactionDetailLink=__webpack_require__(288);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function StickySpanProperties(_ref){var span=_ref.span,transaction=_ref.transaction;var spanName=span.span.name;var transactionStickyProperties=transaction?[{label:_i18n.i18n.translate("xpack.apm.transactionDetails.serviceLabel",{defaultMessage:"Service"}),fieldName:_elasticsearch_fieldnames.SERVICE_NAME,val:_react.default.createElement(_TransactionOverviewLink.TransactionOverviewLink,{serviceName:transaction.service.name},transaction.service.name),width:"25%"},{label:_i18n.i18n.translate("xpack.apm.transactionDetails.transactionLabel",{defaultMessage:"Transaction"}),fieldName:_elasticsearch_fieldnames.TRANSACTION_NAME,val:_react.default.createElement(_TransactionDetailLink.TransactionDetailLink,{serviceName:transaction.service.name,transactionId:transaction.transaction.id,traceId:transaction.trace.id,transactionName:transaction.transaction.name,transactionType:transaction.transaction.type},transaction.transaction.name),width:"25%"}]:[];var stickyProperties=[{label:_i18n.i18n.translate("xpack.apm.transactionDetails.spanFlyout.nameLabel",{defaultMessage:"Name"}),fieldName:_elasticsearch_fieldnames.SPAN_NAME,val:spanName||_i18n2.NOT_AVAILABLE_LABEL,truncated:true,width:"25%"}].concat(transactionStickyProperties);return _react.default.createElement(_StickyProperties.StickyProperties,{stickyProperties:stickyProperties})}},3916:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SpanMetadata=SpanMetadata;var _react=_interopRequireWildcard(__webpack_require__(0));var _sections=__webpack_require__(3917);var _helper=__webpack_require__(437);var _=__webpack_require__(618);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function SpanMetadata(_ref){var span=_ref.span;var sectionsWithRows=(0,_react.useMemo)((function(){return(0,_helper.getSectionsWithRows)(_sections.SPAN_METADATA_SECTIONS,span)}),[span]);return _react.default.createElement(_.MetadataTable,{sections:sectionsWithRows})}},3917:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SPAN_METADATA_SECTIONS=void 0;var _sections=__webpack_require__(617);var SPAN_METADATA_SECTIONS=[_sections.LABELS,_sections.SPAN,_sections.TRANSACTION,_sections.TRACE,_sections.SERVICE,_sections.MESSAGE_SPAN,_sections.AGENT];exports.SPAN_METADATA_SECTIONS=SPAN_METADATA_SECTIONS},3918:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionFlyout=TransactionFlyout;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _TransactionActionMenu=__webpack_require__(1250);var _TransactionSummary=__webpack_require__(1248);var _FlyoutTopLevelProperties=__webpack_require__(3919);var _ResponsiveFlyout=__webpack_require__(1256);var _TransactionMetadata=__webpack_require__(1255);var _DroppedSpansWarning=__webpack_require__(3920);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TransactionPropertiesTable(_ref){var transaction=_ref.transaction;return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h4",null,"Metadata")),_react.default.createElement(_TransactionMetadata.TransactionMetadata,{transaction:transaction}))}function TransactionFlyout(_ref2){var transactionDoc=_ref2.transaction,onClose=_ref2.onClose,_ref2$errorCount=_ref2.errorCount,errorCount=_ref2$errorCount===void 0?0:_ref2$errorCount,rootTransactionDuration=_ref2.rootTransactionDuration;if(!transactionDoc){return null}return _react.default.createElement(_eui.EuiPortal,null,_react.default.createElement(_ResponsiveFlyout.ResponsiveFlyout,{onClose:onClose,ownFocus:true,maxWidth:false},_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h4",null,_i18n.i18n.translate("xpack.apm.transactionDetails.transFlyout.transactionDetailsTitle",{defaultMessage:"Transaction details"})))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_TransactionActionMenu.TransactionActionMenu,{transaction:transactionDoc})))),_react.default.createElement(_eui.EuiFlyoutBody,null,_react.default.createElement(_FlyoutTopLevelProperties.FlyoutTopLevelProperties,{transaction:transactionDoc}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_TransactionSummary.TransactionSummary,{transaction:transactionDoc,totalDuration:rootTransactionDuration,errorCount:errorCount}),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"m"}),_react.default.createElement(_DroppedSpansWarning.DroppedSpansWarning,{transactionDoc:transactionDoc}),_react.default.createElement(TransactionPropertiesTable,{transaction:transactionDoc}))))}},3919:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FlyoutTopLevelProperties=FlyoutTopLevelProperties;var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _elasticsearch_fieldnames=__webpack_require__(81);var _TransactionDetailLink=__webpack_require__(288);var _StickyProperties=__webpack_require__(1257);var _TransactionOverviewLink=__webpack_require__(439);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FlyoutTopLevelProperties(_ref){var transaction=_ref.transaction;if(!transaction){return null}var stickyProperties=[{label:_i18n.i18n.translate("xpack.apm.transactionDetails.serviceLabel",{defaultMessage:"Service"}),fieldName:_elasticsearch_fieldnames.SERVICE_NAME,val:_react.default.createElement(_TransactionOverviewLink.TransactionOverviewLink,{serviceName:transaction.service.name},transaction.service.name),width:"25%"},{label:_i18n.i18n.translate("xpack.apm.transactionDetails.transactionLabel",{defaultMessage:"Transaction"}),fieldName:_elasticsearch_fieldnames.TRANSACTION_NAME,val:_react.default.createElement(_TransactionDetailLink.TransactionDetailLink,{serviceName:transaction.service.name,transactionId:transaction.transaction.id,traceId:transaction.trace.id,transactionName:transaction.transaction.name,transactionType:transaction.transaction.type},transaction.transaction.name),width:"25%"}];return _react.default.createElement(_StickyProperties.StickyProperties,{stickyProperties:stickyProperties})}},3920:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DroppedSpansWarning=DroppedSpansWarning;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _ElasticDocsLink=__webpack_require__(238);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DroppedSpansWarning(_ref){var _transactionDoc$trans;var transactionDoc=_ref.transactionDoc;var dropped=(_transactionDoc$trans=transactionDoc.transaction.span_count)===null||_transactionDoc$trans===void 0?void 0:_transactionDoc$trans.dropped;if(!dropped){return null}return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiCallOut,{size:"s"},_i18n.i18n.translate("xpack.apm.transactionDetails.transFlyout.callout.agentDroppedSpansMessage",{defaultMessage:"The APM agent that reported this transaction dropped {dropped} spans or more based on its configuration.",values:{dropped:dropped}})," ",_react.default.createElement(_ElasticDocsLink.ElasticDocsLink,{section:"/apm/get-started",path:"/transaction-spans.html#dropped-spans",target:"_blank"},_i18n.i18n.translate("xpack.apm.transactionDetails.transFlyout.callout.learnMoreAboutDroppedSpansLinkText",{defaultMessage:"Learn more about dropped spans."}))),_react.default.createElement(_eui.EuiHorizontalRule,null))}},3921:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WaterfallItem=WaterfallItem;var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _eui=__webpack_require__(2);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _i18n=__webpack_require__(1);var _agent_name=__webpack_require__(345);var _variables=__webpack_require__(26);var _formatters=__webpack_require__(72);var _ErrorCount=__webpack_require__(3922);var _ErrorOverviewLink=__webpack_require__(1234);var _elasticsearch_fieldnames=__webpack_require__(81);var _SyncBadge=__webpack_require__(1258);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Container=_styledComponents.default.div.withConfig({displayName:"Container",componentId:"sc-1vw3f18-0"})(["position:relative;display:block;user-select:none;padding-top:",";padding-bottom:",";margin-right:",";margin-left:",";border-top:1px solid ",";background-color:",";cursor:pointer;&:hover{background-color:",";}"],(0,_variables.px)(_variables.units.half),(0,_variables.px)(_variables.units.plus),(function(props){return(0,_variables.px)(props.timelineMargins.right)}),(function(props){return(0,_variables.px)(props.timelineMargins.left)}),_eui_theme_light.default.euiColorLightShade,(function(props){return props.isSelected?_eui_theme_light.default.euiColorLightestShade:"initial"}),_eui_theme_light.default.euiColorLightestShade);var ItemBar=_styledComponents.default.div.withConfig({displayName:"ItemBar",componentId:"sc-1vw3f18-1"})(["box-sizing:border-box;position:relative;height:",";min-width:2px;background-color:",";"],(0,_variables.px)(_variables.unit),(function(props){return props.color}));var ItemText=_styledComponents.default.span.withConfig({displayName:"ItemText",componentId:"sc-1vw3f18-2"})(["position:absolute;right:0;display:flex;align-items:center;height:",";& > *{margin-right:",";white-space:nowrap;}"],(0,_variables.px)(_variables.units.plus),(0,_variables.px)(_variables.units.half));function PrefixIcon(_ref){var item=_ref.item;switch(item.docType){case"span":{var isDbType=item.doc.span.type.startsWith("db");if(isDbType){return _react.default.createElement(_eui.EuiIcon,{type:"database"})}return null}case"transaction":{if((0,_agent_name.isRumAgentName)(item.doc.agent.name)){return _react.default.createElement(_eui.EuiIcon,{type:"globe"})}return _react.default.createElement(_eui.EuiIcon,{type:"merge"})}default:return null}}var SpanActionToolTip=function SpanActionToolTip(_ref2){var item=_ref2.item,children=_ref2.children;if((item===null||item===void 0?void 0:item.docType)==="span"){return _react.default.createElement(_eui.EuiToolTip,{content:"".concat(item.doc.span.subtype,".").concat(item.doc.span.action)},_react.default.createElement(_react.default.Fragment,null,children))}return _react.default.createElement(_react.default.Fragment,null,children)};function Duration(_ref3){var item=_ref3.item;return _react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs"},(0,_formatters.asDuration)(item.duration))}function HttpStatusCode(_ref4){var item=_ref4.item;var httpStatusCode=item.docType==="transaction"&&item.doc.transaction.type==="request"?item.doc.transaction.result:undefined;if(!httpStatusCode){return null}return _react.default.createElement(_eui.EuiText,{size:"xs"},httpStatusCode)}function NameLabel(_ref5){var item=_ref5.item;switch(item.docType){case"span":return _react.default.createElement(_eui.EuiText,{size:"s"},item.doc.span.name);case"transaction":return _react.default.createElement(_eui.EuiTitle,{size:"xxs"},_react.default.createElement("h5",null,item.doc.transaction.name));default:return null}}function WaterfallItem(_ref6){var timelineMargins=_ref6.timelineMargins,totalDuration=_ref6.totalDuration,item=_ref6.item,color=_ref6.color,isSelected=_ref6.isSelected,errorCount=_ref6.errorCount,onClick=_ref6.onClick;if(!totalDuration){return null}var width=item.duration/totalDuration*100;var left=(item.offset+item.skew)/totalDuration*100;var tooltipContent=_i18n.i18n.translate("xpack.apm.transactionDetails.errorsOverviewLinkTooltip",{values:{errorCount:errorCount},defaultMessage:"{errorCount, plural, one {View 1 related error} other {View # related errors}}"});return _react.default.createElement(Container,{type:item.docType,timelineMargins:timelineMargins,isSelected:isSelected,onClick:onClick},_react.default.createElement(ItemBar,{style:{left:"".concat(left,"%"),width:"".concat(width,"%")},color:color,type:item.docType}),_react.default.createElement(ItemText,{style:{minWidth:"".concat(Math.max(100-left,0),"%")}},_react.default.createElement(SpanActionToolTip,{item:item},_react.default.createElement(PrefixIcon,{item:item})),_react.default.createElement(HttpStatusCode,{item:item}),_react.default.createElement(NameLabel,{item:item}),errorCount>0&&item.docType==="transaction"?_react.default.createElement(_ErrorOverviewLink.ErrorOverviewLink,{serviceName:item.doc.service.name,query:{kuery:encodeURIComponent("".concat(_elasticsearch_fieldnames.TRACE_ID,' : "').concat(item.doc.trace.id,'" and transaction.id : "').concat(item.doc.transaction.id,'"'))},color:"danger",style:{textDecoration:"none"}},_react.default.createElement(_eui.EuiToolTip,{content:tooltipContent},_react.default.createElement(_ErrorCount.ErrorCount,{count:errorCount}))):null,_react.default.createElement(Duration,{item:item}),item.docType==="span"&&_react.default.createElement(_SyncBadge.SyncBadge,{sync:item.doc.span.sync})))}},3922:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorCount=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ErrorCount=function ErrorCount(_ref){var count=_ref.count;return _react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("h4",null,_react.default.createElement(_eui.EuiTextColor,{color:"danger",onClick:function onClick(e){e.stopPropagation()}},_i18n.i18n.translate("xpack.apm.transactionDetails.errorCount",{defaultMessage:"{errorCount, number} {errorCount, plural, one {Error} other {Errors}}",values:{errorCount:count}}))))};exports.ErrorCount=ErrorCount},3923:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Home=Home;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _useApmPluginContext2=__webpack_require__(62);var _ApmHeader=__webpack_require__(341);var _EuiTabLink=__webpack_require__(1233);var _ServiceMapLink=__webpack_require__(1235);var _ServiceOverviewLink=__webpack_require__(3924);var _SettingsLink=__webpack_require__(3925);var _TraceOverviewLink=__webpack_require__(3926);var _SetupInstructionsLink=__webpack_require__(611);var _ServiceMap=__webpack_require__(1237);var _ServiceOverview=__webpack_require__(3927);var _TraceOverview=__webpack_require__(3932);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getHomeTabs(_ref){var _ref$serviceMapEnable=_ref.serviceMapEnabled,serviceMapEnabled=_ref$serviceMapEnable===void 0?true:_ref$serviceMapEnable;var homeTabs=[{link:_react.default.createElement(_ServiceOverviewLink.ServiceOverviewLink,null,_i18n.i18n.translate("xpack.apm.home.servicesTabLabel",{defaultMessage:"Services"})),render:function render(){return _react.default.createElement(_ServiceOverview.ServiceOverview,null)},name:"services"},{link:_react.default.createElement(_TraceOverviewLink.TraceOverviewLink,null,_i18n.i18n.translate("xpack.apm.home.tracesTabLabel",{defaultMessage:"Traces"})),render:function render(){return _react.default.createElement(_TraceOverview.TraceOverview,null)},name:"traces"}];if(serviceMapEnabled){homeTabs.push({link:_react.default.createElement(_ServiceMapLink.ServiceMapLink,null,_i18n.i18n.translate("xpack.apm.home.serviceMapTabLabel",{defaultMessage:"Service Map"})),render:function render(){return _react.default.createElement(_ServiceMap.ServiceMap,null)},name:"service-map"})}return homeTabs}var SETTINGS_LINK_LABEL=_i18n.i18n.translate("xpack.apm.settingsLinkLabel",{defaultMessage:"Settings"});function Home(_ref2){var tab=_ref2.tab;var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),config=_useApmPluginContext.config;var homeTabs=getHomeTabs(config);var selectedTab=homeTabs.find((function(homeTab){return homeTab.name===tab}));return _react.default.createElement("div",null,_react.default.createElement(_ApmHeader.ApmHeader,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"l"},_react.default.createElement("h1",null,"APM"))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_SettingsLink.SettingsLink,null,_react.default.createElement(_eui.EuiButtonEmpty,{size:"s",color:"primary",iconType:"gear"},SETTINGS_LINK_LABEL))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_SetupInstructionsLink.SetupInstructionsLink,null)))),_react.default.createElement(_eui.EuiTabs,null,homeTabs.map((function(homeTab){return _react.default.createElement(_EuiTabLink.EuiTabLink,{isSelected:homeTab===selectedTab,key:homeTab.name},homeTab.link)}))),selectedTab.render())}},3924:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceOverviewLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(83);var _useUrlParams2=__webpack_require__(35);var _pickKeys=__webpack_require__(161);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var ServiceOverviewLink=function ServiceOverviewLink(props){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var persistedFilters=(0,_pickKeys.pickKeys)(urlParams,"host","agentName");return _react.default.createElement(_APMLink.APMLink,_extends({path:"/services",query:persistedFilters},props))};exports.ServiceOverviewLink=ServiceOverviewLink},3925:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SettingsLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(83);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var SettingsLink=function SettingsLink(props){return _react.default.createElement(_APMLink.APMLink,_extends({path:"/settings"},props))};exports.SettingsLink=SettingsLink},3926:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TraceOverviewLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(83);var _useUrlParams2=__webpack_require__(35);var _pickKeys=__webpack_require__(161);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var TraceOverviewLink=function TraceOverviewLink(props){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var persistedFilters=(0,_pickKeys.pickKeys)(urlParams,"transactionResult","host","containerId","podName");return _react.default.createElement(_APMLink.APMLink,_extends({path:"/traces",query:persistedFilters},props))};exports.TraceOverviewLink=TraceOverviewLink},3927:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceOverview=ServiceOverview;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _url=_interopRequireDefault(__webpack_require__(84));var _public=__webpack_require__(14);var _useFetcher2=__webpack_require__(36);var _NoServicesMessage=__webpack_require__(3928);var _ServiceList=__webpack_require__(3930);var _useUrlParams2=__webpack_require__(35);var _public2=__webpack_require__(78);var _typings=__webpack_require__(240);var _LocalUIFilters=__webpack_require__(241);var _useApmPluginContext2=__webpack_require__(62);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var initalData={items:[],hasHistoricalData:true,hasLegacyData:false};var hasDisplayedToast=false;function ServiceOverview(){var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),core=_useApmPluginContext.core;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),_useUrlParams$urlPara=_useUrlParams.urlParams,start=_useUrlParams$urlPara.start,end=_useUrlParams$urlPara.end,uiFilters=_useUrlParams.uiFilters;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(start&&end){return callApmApi({pathname:"/api/apm/services",params:{query:{start:start,end:end,uiFilters:JSON.stringify(uiFilters)}}})}}),[start,end,uiFilters]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?initalData:_useFetcher$data,status=_useFetcher.status;(0,_react.useEffect)((function(){if(data.hasLegacyData&&!hasDisplayedToast){hasDisplayedToast=true;core.notifications.toasts.addWarning({title:_i18n.i18n.translate("xpack.apm.serviceOverview.toastTitle",{defaultMessage:"Legacy data was detected within the selected time range"}),text:(0,_public.toMountPoint)(_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.serviceOverview.toastText",{defaultMessage:"You're running Elastic Stack 7.0+ and we've detected incompatible data from a previous 6.x version. If you want to view this data in APM, you should migrate it. See more in "}),_react.default.createElement(_eui.EuiLink,{href:_url.default.format({pathname:core.http.basePath.prepend("/app/kibana"),hash:"/management/elasticsearch/upgrade_assistant"})},_i18n.i18n.translate("xpack.apm.serviceOverview.upgradeAssistantLink",{defaultMessage:"the upgrade assistant"}))))})}}),[data.hasLegacyData,core.http.basePath,core.notifications.toasts]);(0,_public2.useTrackPageview)({app:"apm",path:"services_overview"});(0,_public2.useTrackPageview)({app:"apm",path:"services_overview",delay:15e3});var localFiltersConfig=(0,_react.useMemo)((function(){return{filterNames:["host","agentName"],projection:_typings.PROJECTION.SERVICES}}),[]);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_LocalUIFilters.LocalUIFilters,localFiltersConfig)),_react.default.createElement(_eui.EuiFlexItem,{grow:7},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_ServiceList.ServiceList,{items:data.items,noItemsMessage:_react.default.createElement(_NoServicesMessage.NoServicesMessage,{historicalDataFound:data.hasHistoricalData,status:status})})))))}},3928:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoServicesMessage=NoServicesMessage;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _KibanaLink=__webpack_require__(612);var _SetupInstructionsLink=__webpack_require__(611);var _LoadingStatePrompt=__webpack_require__(209);var _ErrorStatePrompt=__webpack_require__(3929);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function NoServicesMessage(_ref){var historicalDataFound=_ref.historicalDataFound,status=_ref.status;if(status==="loading"){return _react.default.createElement(_LoadingStatePrompt.LoadingStatePrompt,null)}if(status==="failure"){return _react.default.createElement(_ErrorStatePrompt.ErrorStatePrompt,null)}if(historicalDataFound){return _react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement("div",null,_i18n.i18n.translate("xpack.apm.servicesTable.notFoundLabel",{defaultMessage:"No services found"})),titleSize:"s"})}return _react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement("div",null,_i18n.i18n.translate("xpack.apm.servicesTable.noServicesLabel",{defaultMessage:"Looks like you don't have any APM services installed. Let's add some!"})),titleSize:"s",body:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.servicesTable.7xUpgradeServerMessage",{defaultMessage:"Upgrading from a pre-7.x version? Make sure you've also upgraded\n              your APM Server instance(s) to at least 7.0."})),_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.servicesTable.7xOldDataMessage",{defaultMessage:"You may also have old data that needs to be migrated."})," ",_react.default.createElement(_KibanaLink.KibanaLink,{path:"/management/elasticsearch/upgrade_assistant"},_i18n.i18n.translate("xpack.apm.servicesTable.UpgradeAssistantLink",{defaultMessage:"Learn more by visiting the Kibana Upgrade Assistant"})),".")),actions:_react.default.createElement(_SetupInstructionsLink.SetupInstructionsLink,{buttonFill:true})})}},3929:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorStatePrompt=ErrorStatePrompt;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ErrorStatePrompt(){return _react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement("div",null,_i18n.i18n.translate("xpack.apm.error.prompt.title",{defaultMessage:"Sorry, an error occured :("})),body:_i18n.i18n.translate("xpack.apm.error.prompt.body",{defaultMessage:"Please inspect your browser's developer console for details."}),titleSize:"s"})}},3930:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceList=ServiceList;exports.SERVICE_COLUMNS=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _i18n2=__webpack_require__(160);var _variables=__webpack_require__(26);var _formatters=__webpack_require__(72);var _ManagedTable=__webpack_require__(239);var _EnvironmentBadge=__webpack_require__(3931);var _TransactionOverviewLink=__webpack_require__(439);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function formatNumber(value){if(value===0){return"0"}else if(value<=.1){return"< 0.1"}else{return(0,_formatters.asDecimal)(value)}}function formatString(value){return value||_i18n2.NOT_AVAILABLE_LABEL}var AppLink=(0,_styledComponents.default)(_TransactionOverviewLink.TransactionOverviewLink).withConfig({displayName:"AppLink",componentId:"sc-1axllds-0"})(["font-size:",";",";"],_variables.fontSizes.large,(0,_variables.truncate)("100%"));var SERVICE_COLUMNS=[{field:"serviceName",name:_i18n.i18n.translate("xpack.apm.servicesTable.nameColumnLabel",{defaultMessage:"Name"}),width:"40%",sortable:true,render:function render(serviceName){return _react.default.createElement(_eui.EuiToolTip,{content:formatString(serviceName),id:"service-name-tooltip"},_react.default.createElement(AppLink,{serviceName:serviceName},formatString(serviceName)))}},{field:"environments",name:_i18n.i18n.translate("xpack.apm.servicesTable.environmentColumnLabel",{defaultMessage:"Environment"}),width:"20%",sortable:true,render:function render(environments){return _react.default.createElement(_EnvironmentBadge.EnvironmentBadge,{environments:environments})}},{field:"agentName",name:_i18n.i18n.translate("xpack.apm.servicesTable.agentColumnLabel",{defaultMessage:"Agent"}),sortable:true,render:function render(agentName){return formatString(agentName)}},{field:"avgResponseTime",name:_i18n.i18n.translate("xpack.apm.servicesTable.avgResponseTimeColumnLabel",{defaultMessage:"Avg. response time"}),sortable:true,dataType:"number",render:function render(time){return(0,_formatters.convertTo)({unit:"milliseconds",microseconds:time}).formatted}},{field:"transactionsPerMinute",name:_i18n.i18n.translate("xpack.apm.servicesTable.transactionsPerMinuteColumnLabel",{defaultMessage:"Trans. per minute"}),sortable:true,dataType:"number",render:function render(value){return"".concat(formatNumber(value)," ").concat(_i18n.i18n.translate("xpack.apm.servicesTable.transactionsPerMinuteUnitLabel",{defaultMessage:"tpm"}))}},{field:"errorsPerMinute",name:_i18n.i18n.translate("xpack.apm.servicesTable.errorsPerMinuteColumnLabel",{defaultMessage:"Errors per minute"}),sortable:true,dataType:"number",render:function render(value){return"".concat(formatNumber(value)," ").concat(_i18n.i18n.translate("xpack.apm.servicesTable.errorsPerMinuteUnitLabel",{defaultMessage:"err."}))}}];exports.SERVICE_COLUMNS=SERVICE_COLUMNS;function ServiceList(_ref){var items=_ref.items,noItemsMessage=_ref.noItemsMessage;return _react.default.createElement(_ManagedTable.ManagedTable,{columns:SERVICE_COLUMNS,items:items,noItemsMessage:noItemsMessage,initialSortField:"serviceName",initialPageSize:50})}},3931:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EnvironmentBadge=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EnvironmentBadge=function EnvironmentBadge(_ref){var _ref$environments=_ref.environments,environments=_ref$environments===void 0?[]:_ref$environments;if(environments.length<3){return _react.default.createElement(_react.default.Fragment,null,environments.map((function(env){return _react.default.createElement(_eui.EuiBadge,{color:"hollow",key:env},env)})))}return _react.default.createElement(_eui.EuiToolTip,{position:"right",content:environments.map((function(env){return _react.default.createElement(_react.default.Fragment,{key:env},env,_react.default.createElement("br",null))}))},_react.default.createElement(_eui.EuiBadge,null,_i18n.i18n.translate("xpack.apm.servicesTable.environmentCount",{values:{environmentCount:environments.length},defaultMessage:"{environmentCount, plural, one {1 environment} other {# environments}}"})))};exports.EnvironmentBadge=EnvironmentBadge},3932:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TraceOverview=TraceOverview;var _eui=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _useFetcher2=__webpack_require__(36);var _TraceList=__webpack_require__(3933);var _useUrlParams2=__webpack_require__(35);var _public=__webpack_require__(78);var _LocalUIFilters=__webpack_require__(241);var _typings=__webpack_require__(240);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function TraceOverview(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;var start=urlParams.start,end=urlParams.end;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(start&&end){return callApmApi({pathname:"/api/apm/traces",params:{query:{start:start,end:end,uiFilters:JSON.stringify(uiFilters)}}})}}),[start,end,uiFilters]),status=_useFetcher.status,_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?[]:_useFetcher$data;(0,_public.useTrackPageview)({app:"apm",path:"traces_overview"});(0,_public.useTrackPageview)({app:"apm",path:"traces_overview",delay:15e3});var localUIFiltersConfig=(0,_react.useMemo)((function(){var config={filterNames:["transactionResult","host","containerId","podName"],projection:_typings.PROJECTION.TRACES};return config}),[]);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_LocalUIFilters.LocalUIFilters,_extends({},localUIFiltersConfig,{showCount:false}))),_react.default.createElement(_eui.EuiFlexItem,{grow:7},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_TraceList.TraceList,{items:data,isLoading:status===_useFetcher2.FETCH_STATUS.LOADING})))))}},3933:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TraceList=TraceList;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _variables=__webpack_require__(26);var _formatters=__webpack_require__(72);var _EmptyMessage=__webpack_require__(343);var _ImpactBar=__webpack_require__(1247);var _TransactionDetailLink=__webpack_require__(288);var _ManagedTable=__webpack_require__(239);var _LoadingStatePrompt=__webpack_require__(209);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StyledTransactionLink=(0,_styledComponents.default)(_TransactionDetailLink.TransactionDetailLink).withConfig({displayName:"StyledTransactionLink",componentId:"sc-137e0tc-0"})(["font-size:",";",";"],_variables.fontSizes.large,(0,_variables.truncate)("100%"));var traceListColumns=[{field:"name",name:_i18n.i18n.translate("xpack.apm.tracesTable.nameColumnLabel",{defaultMessage:"Name"}),width:"40%",sortable:true,render:function render(name,_ref){var sample=_ref.sample;return _react.default.createElement(_eui.EuiToolTip,{id:"trace-transaction-link-tooltip",content:name},_react.default.createElement(StyledTransactionLink,{serviceName:sample.service.name,transactionId:sample.transaction.id,traceId:sample.trace.id,transactionName:sample.transaction.name,transactionType:sample.transaction.type},name))}},{field:"sample.service.name",name:_i18n.i18n.translate("xpack.apm.tracesTable.originatingServiceColumnLabel",{defaultMessage:"Originating service"}),sortable:true},{field:"averageResponseTime",name:_i18n.i18n.translate("xpack.apm.tracesTable.avgResponseTimeColumnLabel",{defaultMessage:"Avg. response time"}),sortable:true,dataType:"number",render:function render(time){return(0,_formatters.convertTo)({unit:"milliseconds",microseconds:time}).formatted}},{field:"transactionsPerMinute",name:_i18n.i18n.translate("xpack.apm.tracesTable.tracesPerMinuteColumnLabel",{defaultMessage:"Traces per minute"}),sortable:true,dataType:"number",render:function render(value){return"".concat(value.toLocaleString()," ").concat(_i18n.i18n.translate("xpack.apm.tracesTable.tracesPerMinuteUnitLabel",{defaultMessage:"tpm"}))}},{field:"impact",name:_react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.apm.tracesTable.impactColumnDescription",{defaultMessage:"The most used and slowest endpoints in your service. It's calculated by taking the relative average duration times the number of transactions per minute."})},_react.default.createElement(_react.default.Fragment,null,_i18n.i18n.translate("xpack.apm.tracesTable.impactColumnLabel",{defaultMessage:"Impact"})," ",_react.default.createElement(_eui.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),width:"20%",align:"left",sortable:true,render:function render(value){return _react.default.createElement(_ImpactBar.ImpactBar,{value:value})}}];var noItemsMessage=_react.default.createElement(_EmptyMessage.EmptyMessage,{heading:_i18n.i18n.translate("xpack.apm.tracesTable.notFoundLabel",{defaultMessage:"No traces found for this query"})});function TraceList(_ref2){var _ref2$items=_ref2.items,items=_ref2$items===void 0?[]:_ref2$items,isLoading=_ref2.isLoading;var noItems=isLoading?_react.default.createElement(_LoadingStatePrompt.LoadingStatePrompt,null):noItemsMessage;return _react.default.createElement(_ManagedTable.ManagedTable,{columns:traceListColumns,items:items,initialSortField:"impact",initialSortDirection:"desc",noItemsMessage:noItems,initialPageSize:25})}},3934:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RouteName=void 0;var RouteName;exports.RouteName=RouteName;(function(RouteName){RouteName["HOME"]="home";RouteName["SERVICES"]="services";RouteName["SERVICE_MAP"]="service-map";RouteName["SINGLE_SERVICE_MAP"]="single-service-map";RouteName["TRACES"]="traces";RouteName["SERVICE"]="service";RouteName["TRANSACTIONS"]="transactions";RouteName["ERRORS"]="errors";RouteName["ERROR"]="error";RouteName["METRICS"]="metrics";RouteName["SERVICE_NODE_METRICS"]="node_metrics";RouteName["TRANSACTION_TYPE"]="transaction_type";RouteName["TRANSACTION_NAME"]="transaction_name";RouteName["SETTINGS"]="settings";RouteName["AGENT_CONFIGURATION"]="agent_configuration";RouteName["AGENT_CONFIGURATION_CREATE"]="agent_configuration_create";RouteName["AGENT_CONFIGURATION_EDIT"]="agent_configuration_edit";RouteName["INDICES"]="indices";RouteName["SERVICE_NODES"]="nodes";RouteName["LINK_TO_TRACE"]="link_to_trace";RouteName["CUSTOMIZE_UI"]="customize_ui"})(RouteName||(exports.RouteName=RouteName={}))},3935:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HomeLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(83);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var HomeLink=function HomeLink(props){return _react.default.createElement(_APMLink.APMLink,_extends({path:"/"},props))};exports.HomeLink=HomeLink},3936:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AgentConfigurations=AgentConfigurations;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(2);var _lodash=__webpack_require__(3);var _useFetcher2=__webpack_require__(36);var _List=__webpack_require__(3937);var _public=__webpack_require__(78);var _agentConfigurationLinks=__webpack_require__(1260);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function AgentConfigurations(){var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){return callApmApi({pathname:"/api/apm/settings/agent-configuration"})}),[],{preservePreviousData:false}),refetch=_useFetcher.refetch,_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?[]:_useFetcher$data,status=_useFetcher.status;(0,_public.useTrackPageview)({app:"apm",path:"agent_configuration"});(0,_public.useTrackPageview)({app:"apm",path:"agent_configuration",delay:15e3});var hasConfigurations=!(0,_lodash.isEmpty)(data);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.apm.agentConfig.configurationsPanelTitle",{defaultMessage:"Agent remote configuration"})))),hasConfigurations?_react.default.createElement(CreateConfigurationButton,null):null),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_List.AgentConfigurationList,{status:status,data:data,refetch:refetch})))}function CreateConfigurationButton(){var href=(0,_agentConfigurationLinks.createAgentConfigurationHref)();return _react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{color:"primary",fill:true,iconType:"plusInCircle",href:href},_i18n.i18n.translate("xpack.apm.agentConfig.createConfigButtonLabel",{defaultMessage:"Create configuration"})))))}},3937:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AgentConfigurationList=AgentConfigurationList;var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(2);var _lodash=__webpack_require__(3);var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _useFetcher=__webpack_require__(36);var _ManagedTable=__webpack_require__(239);var _LoadingStatePrompt=__webpack_require__(209);var _TimestampTooltip=__webpack_require__(287);var _variables=__webpack_require__(26);var _all_option=__webpack_require__(350);var _agentConfigurationLinks=__webpack_require__(1260);var _ConfirmDeleteModal=__webpack_require__(3938);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function AgentConfigurationList(_ref){var status=_ref.status,data=_ref.data,refetch=_ref.refetch;var _useState=(0,_react.useState)(null),_useState2=_slicedToArray(_useState,2),configToBeDeleted=_useState2[0],setConfigToBeDeleted=_useState2[1];var emptyStatePrompt=_react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"controlsHorizontal",title:_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.apm.agentConfig.configTable.emptyPromptTitle",{defaultMessage:"No configurations found."})),body:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.agentConfig.configTable.emptyPromptText",{defaultMessage:"Let's change that! You can fine-tune agent configuration directly from Kibana without having to redeploy. Get started by creating your first configuration."}))),actions:_react.default.createElement(_eui.EuiButton,{color:"primary",fill:true,href:(0,_agentConfigurationLinks.createAgentConfigurationHref)()},_i18n.i18n.translate("xpack.apm.agentConfig.configTable.createConfigButtonLabel",{defaultMessage:"Create configuration"}))});var failurePrompt=_react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"alert",body:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.agentConfig.configTable.configTable.failurePromptText",{defaultMessage:"The list of agent configurations could not be fetched. Your user may not have the sufficient permissions."})))});if(status===_useFetcher.FETCH_STATUS.FAILURE){return failurePrompt}if(status===_useFetcher.FETCH_STATUS.SUCCESS&&(0,_lodash.isEmpty)(data)){return emptyStatePrompt}var columns=[{field:"applied_by_agent",align:"center",width:(0,_variables.px)(_variables.units.double),name:"",sortable:true,render:function render(isApplied){return _react.default.createElement(_eui.EuiToolTip,{content:isApplied?_i18n.i18n.translate("xpack.apm.agentConfig.configTable.appliedTooltipMessage",{defaultMessage:"Applied by at least one agent"}):_i18n.i18n.translate("xpack.apm.agentConfig.configTable.notAppliedTooltipMessage",{defaultMessage:"Not yet applied by any agents"})},_react.default.createElement(_eui.EuiHealth,{color:isApplied?"success":_eui_theme_light.default.euiColorLightShade}))}},{field:"service.name",name:_i18n.i18n.translate("xpack.apm.agentConfig.configTable.serviceNameColumnLabel",{defaultMessage:"Service name"}),sortable:true,render:function render(_,config){return _react.default.createElement(_eui.EuiButtonEmpty,{flush:"left",size:"s",color:"primary",href:(0,_agentConfigurationLinks.editAgentConfigurationHref)(config.service)},(0,_all_option.getOptionLabel)(config.service.name))}},{field:"service.environment",name:_i18n.i18n.translate("xpack.apm.agentConfig.configTable.environmentColumnLabel",{defaultMessage:"Service environment"}),sortable:true,render:function render(environment){return(0,_all_option.getOptionLabel)(environment)}},{align:"right",field:"@timestamp",name:_i18n.i18n.translate("xpack.apm.agentConfig.configTable.lastUpdatedColumnLabel",{defaultMessage:"Last updated"}),sortable:true,render:function render(value){return _react.default.createElement(_TimestampTooltip.TimestampTooltip,{time:value,timeUnit:"minutes"})}},{width:(0,_variables.px)(_variables.units.double),name:"",render:function render(config){return _react.default.createElement(_eui.EuiButtonIcon,{"aria-label":"Edit",iconType:"pencil",href:(0,_agentConfigurationLinks.editAgentConfigurationHref)(config.service)})}},{width:(0,_variables.px)(_variables.units.double),name:"",render:function render(config){return _react.default.createElement(_eui.EuiButtonIcon,{"aria-label":"Delete",iconType:"trash",onClick:function onClick(){return setConfigToBeDeleted(config)}})}}];return _react.default.createElement(_react.default.Fragment,null,configToBeDeleted&&_react.default.createElement(_ConfirmDeleteModal.ConfirmDeleteModal,{config:configToBeDeleted,onCancel:function onCancel(){return setConfigToBeDeleted(null)},onConfirm:function onConfirm(){setConfigToBeDeleted(null);refetch()}}),_react.default.createElement(_ManagedTable.ManagedTable,{noItemsMessage:_react.default.createElement(_LoadingStatePrompt.LoadingStatePrompt,null),columns:columns,items:data,initialSortField:"service.name",initialSortDirection:"asc",initialPageSize:20}))}},3938:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ConfirmDeleteModal=ConfirmDeleteModal;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _all_option=__webpack_require__(350);var _createCallApmApi=__webpack_require__(159);var _useApmPluginContext=__webpack_require__(62);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ConfirmDeleteModal(_ref){var config=_ref.config,onCancel=_ref.onCancel,onConfirm=_ref.onConfirm;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isDeleting=_useState2[0],setIsDeleting=_useState2[1];var toasts=(0,_useApmPluginContext.useApmPluginContext)().core.notifications.toasts;return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:_i18n.i18n.translate("xpack.apm.agentConfig.deleteModal.title",{defaultMessage:"Delete configuration"}),onCancel:onCancel,onConfirm:_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsDeleting(true);_context.next=3;return deleteConfig(config,toasts);case 3:setIsDeleting(false);onConfirm();case 5:case"end":return _context.stop()}}}),_callee)}))),cancelButtonText:_i18n.i18n.translate("xpack.apm.agentConfig.deleteModal.cancel",{defaultMessage:"Cancel"}),confirmButtonText:_i18n.i18n.translate("xpack.apm.agentConfig.deleteModal.confirm",{defaultMessage:"Delete"}),confirmButtonDisabled:isDeleting,buttonColor:"danger",defaultFocusedButton:"confirm"},_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.agentConfig.deleteModal.text",{defaultMessage:'You are about to delete the configuration for service "{serviceName}" and environment "{environment}".',values:{serviceName:(0,_all_option.getOptionLabel)(config.service.name),environment:(0,_all_option.getOptionLabel)(config.service.environment)}}))))}function deleteConfig(_x,_x2){return _deleteConfig.apply(this,arguments)}function _deleteConfig(){_deleteConfig=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(config,toasts){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return(0,_createCallApmApi.callApmApi)({pathname:"/api/apm/settings/agent-configuration",method:"DELETE",params:{body:{service:{name:config.service.name,environment:config.service.environment}}}});case 3:toasts.addSuccess({title:_i18n.i18n.translate("xpack.apm.agentConfig.deleteSection.deleteConfigSucceededTitle",{defaultMessage:"Configuration was deleted"}),text:_i18n.i18n.translate("xpack.apm.agentConfig.deleteSection.deleteConfigSucceededText",{defaultMessage:'You have successfully deleted a configuration for "{serviceName}". It will take some time to propagate to the agents.',values:{serviceName:(0,_all_option.getOptionLabel)(config.service.name)}})});_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2["catch"](0);toasts.addDanger({title:_i18n.i18n.translate("xpack.apm.agentConfig.deleteSection.deleteConfigFailedTitle",{defaultMessage:"Configuration could not be deleted"}),text:_i18n.i18n.translate("xpack.apm.agentConfig.deleteSection.deleteConfigFailedText",{defaultMessage:'Something went wrong when deleting a configuration for "{serviceName}". Error: "{errorMessage}"',values:{serviceName:(0,_all_option.getOptionLabel)(config.service.name),errorMessage:_context2.t0.message}})});case 9:case"end":return _context2.stop()}}}),_callee2,null,[[0,6]])})));return _deleteConfig.apply(this,arguments)}},3939:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ApmIndices=ApmIndices;var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(2);var _useFetcher2=__webpack_require__(36);var _createCallApmApi=__webpack_require__(159);var _callApi=__webpack_require__(286);var _useApmPluginContext=__webpack_require__(62);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var APM_INDEX_LABELS=[{configurationName:"apm_oss.sourcemapIndices",label:_i18n.i18n.translate("xpack.apm.settings.apmIndices.sourcemapIndicesLabel",{defaultMessage:"Sourcemap Indices"})},{configurationName:"apm_oss.errorIndices",label:_i18n.i18n.translate("xpack.apm.settings.apmIndices.errorIndicesLabel",{defaultMessage:"Error Indices"})},{configurationName:"apm_oss.onboardingIndices",label:_i18n.i18n.translate("xpack.apm.settings.apmIndices.onboardingIndicesLabel",{defaultMessage:"Onboarding Indices"})},{configurationName:"apm_oss.spanIndices",label:_i18n.i18n.translate("xpack.apm.settings.apmIndices.spanIndicesLabel",{defaultMessage:"Span Indices"})},{configurationName:"apm_oss.transactionIndices",label:_i18n.i18n.translate("xpack.apm.settings.apmIndices.transactionIndicesLabel",{defaultMessage:"Transaction Indices"})},{configurationName:"apm_oss.metricsIndices",label:_i18n.i18n.translate("xpack.apm.settings.apmIndices.metricsIndicesLabel",{defaultMessage:"Metrics Indices"})}];function saveApmIndices(_x){return _saveApmIndices.apply(this,arguments)}function _saveApmIndices(){_saveApmIndices=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(_ref6){var apmIndices;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:apmIndices=_ref6.apmIndices;_context3.next=3;return(0,_createCallApmApi.callApmApi)({method:"POST",pathname:"/api/apm/settings/apm-indices/save",params:{body:apmIndices}});case 3:(0,_callApi.clearCache)();case 4:case"end":return _context3.stop()}}}),_callee3)})));return _saveApmIndices.apply(this,arguments)}var INITIAL_STATE=[];function ApmIndices(){var toasts=(0,_useApmPluginContext.useApmPluginContext)().core.notifications.toasts;var _useState=(0,_react.useState)({}),_useState2=_slicedToArray(_useState,2),apmIndices=_useState2[0],setApmIndices=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),isSaving=_useState4[0],setIsSaving=_useState4[1];var _useFetcher=(0,_useFetcher2.useFetcher)((function(_callApmApi){return _callApmApi({pathname:"/api/apm/settings/apm-index-settings"})}),[]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?INITIAL_STATE:_useFetcher$data,status=_useFetcher.status,refetch=_useFetcher.refetch;(0,_react.useEffect)((function(){setApmIndices(data.reduce((function(acc,_ref){var configurationName=_ref.configurationName,savedValue=_ref.savedValue;return _objectSpread({},acc,_defineProperty({},configurationName,savedValue))}),{}))}),[data]);var handleApplyChangesEvent=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(event){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();setIsSaving(true);_context.prev=2;_context.next=5;return saveApmIndices({apmIndices:apmIndices});case 5:toasts.addSuccess({title:_i18n.i18n.translate("xpack.apm.settings.apmIndices.applyChanges.succeeded.title",{defaultMessage:"Indices applied"}),text:_i18n.i18n.translate("xpack.apm.settings.apmIndices.applyChanges.succeeded.text",{defaultMessage:"The indices changes were successfully applied. These changes are reflected immediately in the APM UI"})});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](2);toasts.addDanger({title:_i18n.i18n.translate("xpack.apm.settings.apmIndices.applyChanges.failed.title",{defaultMessage:"Indices could not be applied."}),text:_i18n.i18n.translate("xpack.apm.settings.apmIndices.applyChanges.failed.text",{defaultMessage:"Something went wrong when applying indices. Error: {errorMessage}",values:{errorMessage:_context.t0.message}})});case 11:setIsSaving(false);case 12:case"end":return _context.stop()}}}),_callee,null,[[2,8]])})));return function handleApplyChangesEvent(_x2){return _ref2.apply(this,arguments)}}();var handleChangeIndexConfigurationEvent=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(event){var _event$target,name,value;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_event$target=event.target,name=_event$target.name,value=_event$target.value;setApmIndices(_objectSpread({},apmIndices,_defineProperty({},name,value)));case 2:case"end":return _context2.stop()}}}),_callee2)})));return function handleChangeIndexConfigurationEvent(_x3){return _ref3.apply(this,arguments)}}();return _react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.apm.settings.apmIndices.title",{defaultMessage:"Indices"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiText,{size:"s",grow:false},_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.settings.apmIndices.description",{defaultMessage:"The APM UI uses index patterns to query your APM indices. If you've customized the index names that APM Server writes events to, you may need to update these patterns for the APM UI to work. Settings here take precedence over those set in kibana.yml."})),_react.default.createElement(_eui.EuiForm,null,APM_INDEX_LABELS.map((function(_ref4){var configurationName=_ref4.configurationName,label=_ref4.label;var matchedConfiguration=data.find((function(_ref5){var configName=_ref5.configurationName;return configName===configurationName}));var defaultValue=matchedConfiguration?matchedConfiguration.defaultValue:"";var savedUiIndexValue=apmIndices[configurationName]||"";return _react.default.createElement(_eui.EuiFormRow,{key:configurationName,label:label,helpText:_i18n.i18n.translate("xpack.apm.settings.apmIndices.helpText",{defaultMessage:"Overrides {configurationName}: {defaultValue}",values:{configurationName:configurationName,defaultValue:defaultValue}}),fullWidth:true},_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,name:configurationName,placeholder:defaultValue,value:savedUiIndexValue,onChange:handleChangeIndexConfigurationEvent}))})),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{onClick:refetch},_i18n.i18n.translate("xpack.apm.settings.apmIndices.cancelButton",{defaultMessage:"Cancel"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{fill:true,onClick:handleApplyChangesEvent,isLoading:isSaving,disabled:status!=="success"},_i18n.i18n.translate("xpack.apm.settings.apmIndices.applyButton",{defaultMessage:"Apply changes"})))))))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}))}},3940:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceNodeMetrics=ServiceNodeMetrics;var _eui=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _react2=__webpack_require__(4);var _service_nodes=__webpack_require__(613);var _ApmHeader=__webpack_require__(341);var _useUrlParams2=__webpack_require__(35);var _useAgentName2=__webpack_require__(1232);var _useServiceMetricCharts=__webpack_require__(1239);var _ChartsSyncContext=__webpack_require__(348);var _MetricsChart=__webpack_require__(1240);var _useFetcher2=__webpack_require__(36);var _variables=__webpack_require__(26);var _ElasticDocsLink=__webpack_require__(238);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var INITIAL_DATA={host:"",containerId:""};var Truncate=_styledComponents.default.span.withConfig({displayName:"Truncate",componentId:"sc-1e367jm-0"})(["display:block;",""],(0,_variables.truncate)((0,_variables.px)(_variables.unit*12)));function ServiceNodeMetrics(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams,uiFilters=_useUrlParams.uiFilters;var serviceName=urlParams.serviceName,serviceNodeName=urlParams.serviceNodeName;var _useAgentName=(0,_useAgentName2.useAgentName)(),agentName=_useAgentName.agentName;var _useServiceMetricChar=(0,_useServiceMetricCharts.useServiceMetricCharts)(urlParams,agentName),data=_useServiceMetricChar.data;var start=urlParams.start,end=urlParams.end;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&serviceNodeName&&start&&end){return callApmApi({pathname:"/api/apm/services/{serviceName}/node/{serviceNodeName}/metadata",params:{path:{serviceName:serviceName,serviceNodeName:serviceNodeName},query:{start:start,end:end,uiFilters:JSON.stringify(uiFilters)}}})}}),[serviceName,serviceNodeName,start,end,uiFilters]),_useFetcher$data=_useFetcher.data;_useFetcher$data=_useFetcher$data===void 0?INITIAL_DATA:_useFetcher$data;var host=_useFetcher$data.host,containerId=_useFetcher$data.containerId,status=_useFetcher.status;var isLoading=status===_useFetcher2.FETCH_STATUS.LOADING;var isAggregatedData=serviceNodeName===_service_nodes.SERVICE_NODE_NAME_MISSING;return _react.default.createElement("div",null,_react.default.createElement(_ApmHeader.ApmHeader,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"l"},_react.default.createElement("h1",null,serviceName))))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"m"}),isAggregatedData?_react.default.createElement(_eui.EuiCallOut,{title:_i18n.i18n.translate("xpack.apm.serviceNodeMetrics.unidentifiedServiceNodesWarningTitle",{defaultMessage:"Could not identify JVMs"}),iconType:"help",color:"warning"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.apm.serviceNodeMetrics.unidentifiedServiceNodesWarningText",defaultMessage:"We could not identify which JVMs these metrics belong to. This is likely caused by running a version of APM Server that is older than 7.5. Upgrading to APM Server 7.5 or higher should resolve this issue. For more information on upgrading, see the {link}. As an alternative, you can use the Kibana Query bar to filter by hostname, container ID or other fields.",values:{link:_react.default.createElement(_ElasticDocsLink.ElasticDocsLink,{target:"_blank",section:"/apm/server",path:"/upgrading.html"},_i18n.i18n.translate("xpack.apm.serviceNodeMetrics.unidentifiedServiceNodesWarningDocumentationLink",{defaultMessage:"documentation of APM Server"}))}})):_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"xl"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiStat,{titleSize:"s",description:_i18n.i18n.translate("xpack.apm.serviceNodeMetrics.serviceName",{defaultMessage:"Service name"}),title:_react.default.createElement(_eui.EuiToolTip,{content:serviceName},_react.default.createElement(Truncate,null,serviceName))})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiStat,{titleSize:"s",isLoading:isLoading,description:_i18n.i18n.translate("xpack.apm.serviceNodeMetrics.host",{defaultMessage:"Host"}),title:_react.default.createElement(_eui.EuiToolTip,{content:host},_react.default.createElement(Truncate,null,host))})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiStat,{titleSize:"s",isLoading:isLoading,description:_i18n.i18n.translate("xpack.apm.serviceNodeMetrics.containerId",{defaultMessage:"Container ID"}),title:_react.default.createElement(_eui.EuiToolTip,{content:containerId},_react.default.createElement(Truncate,null,containerId))}))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"m"}),agentName&&serviceNodeName&&_react.default.createElement(_ChartsSyncContext.ChartsSyncContextProvider,null,_react.default.createElement(_eui.EuiFlexGrid,{columns:2,gutterSize:"s"},data.charts.map((function(chart){return _react.default.createElement(_eui.EuiFlexItem,{key:chart.key},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_MetricsChart.MetricsChart,{start:start,end:end,chart:chart})))}))),_react.default.createElement(_eui.EuiSpacer,{size:"xxl"})))}},3941:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TraceLink=void 0;var _eui=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _reactRouterDom=__webpack_require__(33);var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _url=_interopRequireDefault(__webpack_require__(84));var _elasticsearch_fieldnames=__webpack_require__(81);var _useFetcher2=__webpack_require__(36);var _useUrlParams2=__webpack_require__(35);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CentralizedContainer=_styledComponents.default.div.withConfig({displayName:"CentralizedContainer",componentId:"p7bj0u-0"})(["height:100%;display:flex;"]);var redirectToTransactionDetailPage=function redirectToTransactionDetailPage(_ref){var transaction=_ref.transaction,rangeFrom=_ref.rangeFrom,rangeTo=_ref.rangeTo;return _url.default.format({pathname:"/services/".concat(transaction.service.name,"/transactions/view"),query:{traceId:transaction.trace.id,transactionId:transaction.transaction.id,transactionName:transaction.transaction.name,transactionType:transaction.transaction.type,rangeFrom:rangeFrom,rangeTo:rangeTo}})};var redirectToTracePage=function redirectToTracePage(_ref2){var traceId=_ref2.traceId,rangeFrom=_ref2.rangeFrom,rangeTo=_ref2.rangeTo;return _url.default.format({pathname:"/traces",query:{kuery:encodeURIComponent("".concat(_elasticsearch_fieldnames.TRACE_ID,' : "').concat(traceId,'"')),rangeFrom:rangeFrom,rangeTo:rangeTo}})};var TraceLink=function TraceLink(){var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var traceId=urlParams.traceIdLink,rangeFrom=urlParams.rangeFrom,rangeTo=urlParams.rangeTo;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(traceId){return callApmApi({pathname:"/api/apm/transaction/{traceId}",params:{path:{traceId:traceId}}})}}),[traceId]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?{transaction:null}:_useFetcher$data,status=_useFetcher.status;if(traceId&&status===_useFetcher2.FETCH_STATUS.SUCCESS){var to=data.transaction?redirectToTransactionDetailPage({transaction:data.transaction,rangeFrom:rangeFrom,rangeTo:rangeTo}):redirectToTracePage({traceId:traceId,rangeFrom:rangeFrom,rangeTo:rangeTo});return _react.default.createElement(_reactRouterDom.Redirect,{to:to})}return _react.default.createElement(CentralizedContainer,null,_react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"apmTrace",title:_react.default.createElement("h2",null,"Fetching trace...")}))};exports.TraceLink=TraceLink},3942:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CustomizeUI=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _CustomLink=__webpack_require__(3943);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CustomizeUI=function CustomizeUI(){return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"l"},_react.default.createElement("h1",null,_i18n.i18n.translate("xpack.apm.settings.customizeApp",{defaultMessage:"Customize app"}))),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_CustomLink.CustomLinkOverview,null))};exports.CustomizeUI=CustomizeUI},3943:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CustomLinkOverview=void 0;var _eui=__webpack_require__(2);var _lodash=__webpack_require__(3);var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(1);var _useLicense=__webpack_require__(623);var _useFetcher2=__webpack_require__(36);var _CustomLinkFlyout=__webpack_require__(1251);var _CustomLinkTable=__webpack_require__(3944);var _EmptyPrompt=__webpack_require__(3945);var _Title=__webpack_require__(3946);var _CreateCustomLinkButton=__webpack_require__(1261);var _LicensePrompt=__webpack_require__(1238);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var CustomLinkOverview=function CustomLinkOverview(){var license=(0,_useLicense.useLicense)();var hasValidLicense=(license===null||license===void 0?void 0:license.isActive)&&(license===null||license===void 0?void 0:license.hasAtLeast("gold"));var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isFlyoutOpen=_useState2[0],setIsFlyoutOpen=_useState2[1];var _useState3=(0,_react.useState)(),_useState4=_slicedToArray(_useState3,2),customLinkSelected=_useState4[0],setCustomLinkSelected=_useState4[1];var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){return callApmApi({pathname:"/api/apm/settings/custom_links"})}),[]),customLinks=_useFetcher.data,status=_useFetcher.status,refetch=_useFetcher.refetch;(0,_react.useEffect)((function(){if(customLinkSelected){setIsFlyoutOpen(true)}}),[customLinkSelected]);var onCloseFlyout=function onCloseFlyout(){setCustomLinkSelected(undefined);setIsFlyoutOpen(false)};var onCreateCustomLinkClick=function onCreateCustomLinkClick(){setIsFlyoutOpen(true)};var showEmptyPrompt=status===_useFetcher2.FETCH_STATUS.SUCCESS&&(0,_lodash.isEmpty)(customLinks);return _react.default.createElement(_react.default.Fragment,null,isFlyoutOpen&&_react.default.createElement(_CustomLinkFlyout.CustomLinkFlyout,{onClose:onCloseFlyout,defaults:customLinkSelected,customLinkId:customLinkSelected===null||customLinkSelected===void 0?void 0:customLinkSelected.id,onSave:function onSave(){onCloseFlyout();refetch()},onDelete:function onDelete(){onCloseFlyout();refetch()}}),_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_Title.Title,null)),hasValidLicense&&!showEmptyPrompt&&_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_CreateCustomLinkButton.CreateCustomLinkButton,{onClick:onCreateCustomLinkClick}))))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),hasValidLicense?showEmptyPrompt?_react.default.createElement(_EmptyPrompt.EmptyPrompt,{onCreateCustomLinkClick:onCreateCustomLinkClick}):_react.default.createElement(_CustomLinkTable.CustomLinkTable,{items:customLinks,onCustomLinkSelected:setCustomLinkSelected}):_react.default.createElement(_LicensePrompt.LicensePrompt,{text:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.license.text",{defaultMessage:"To create custom links, you must be subscribed to an Elastic Gold license or above. With it, you'll have the ability to create custom links to improve your workflow when analyzing your services."})})))};exports.CustomLinkOverview=CustomLinkOverview},3944:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CustomLinkTable=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(2);var _lodash=__webpack_require__(3);var _variables=__webpack_require__(26);var _ManagedTable=__webpack_require__(239);var _TimestampTooltip=__webpack_require__(287);var _LoadingStatePrompt=__webpack_require__(209);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var CustomLinkTable=function CustomLinkTable(_ref){var _ref$items=_ref.items,items=_ref$items===void 0?[]:_ref$items,onCustomLinkSelected=_ref.onCustomLinkSelected;var _useState=(0,_react.useState)(""),_useState2=_slicedToArray(_useState,2),searchTerm=_useState2[0],setSearchTerm=_useState2[1];var columns=[{field:"label",name:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.table.name",{defaultMessage:"Name"}),truncateText:true},{field:"url",name:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.table.url",{defaultMessage:"URL"}),truncateText:true},{width:(0,_variables.px)(160),align:"right",field:"@timestamp",name:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.table.lastUpdated",{defaultMessage:"Last updated"}),sortable:true,render:function render(value){return _react.default.createElement(_TimestampTooltip.TimestampTooltip,{time:value,timeUnit:"minutes"})}},{width:(0,_variables.px)(_variables.units.triple),name:"",actions:[{name:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.table.editButtonLabel",{defaultMessage:"Edit"}),description:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.table.editButtonDescription",{defaultMessage:"Edit this custom link"}),icon:"pencil",color:"primary",type:"icon",onClick:function onClick(customLink){onCustomLinkSelected(customLink)}}]}];var filteredItems=items.filter((function(_ref2){var label=_ref2.label,url=_ref2.url;return label.toLowerCase().includes(searchTerm)||url.toLowerCase().includes(searchTerm)}));return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFieldSearch,{fullWidth:true,onChange:function onChange(e){return setSearchTerm(e.target.value)},placeholder:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.searchInput.filter",{defaultMessage:"Filter links by Name and URL..."})}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_ManagedTable.ManagedTable,{noItemsMessage:(0,_lodash.isEmpty)(items)?_react.default.createElement(_LoadingStatePrompt.LoadingStatePrompt,null):_react.default.createElement(NoResultFound,{value:searchTerm}),items:filteredItems,columns:columns,initialPageSize:10,initialSortField:"@timestamp",initialSortDirection:"desc"}))};exports.CustomLinkTable=CustomLinkTable;var NoResultFound=function NoResultFound(_ref3){var value=_ref3.value;return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceAround"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{size:"s"},_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.table.noResultFound",{defaultMessage:'No results for "{value}".',values:{value:value}}))))}},3945:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmptyPrompt=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _CreateCustomLinkButton=__webpack_require__(1261);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EmptyPrompt=function EmptyPrompt(_ref){var onCreateCustomLinkClick=_ref.onCreateCustomLinkClick;return _react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"link",iconColor:"",title:_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.emptyPromptTitle",{defaultMessage:"No links found."})),body:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.emptyPromptText",{defaultMessage:"Let's change that! You can add custom links to the Actions context menu by the transaction details for each service. Create a helpful link to your company's support portal or open a new bug report. Learn more about it in our docs."}))),actions:_react.default.createElement(_CreateCustomLinkButton.CreateCustomLinkButton,{onClick:onCreateCustomLinkClick})})};exports.EmptyPrompt=EmptyPrompt},3946:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Title=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Title=function Title(){return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:false},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement("h1",null,_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink",{defaultMessage:"Custom Links"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiIconTip,{type:"iInCircle",position:"top",content:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.info",{defaultMessage:"These links will be shown in the Actions context menu for transactions."})}))))))};exports.Title=Title},3947:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EditAgentConfigurationRouteHandler=EditAgentConfigurationRouteHandler;exports.CreateAgentConfigurationRouteHandler=CreateAgentConfigurationRouteHandler;var _react=_interopRequireDefault(__webpack_require__(0));var _useFetcher=__webpack_require__(36);var _history=__webpack_require__(82);var _Settings=__webpack_require__(1259);var _AgentConfigurationCreateEdit=__webpack_require__(3948);var _url_helpers=__webpack_require__(71);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function EditAgentConfigurationRouteHandler(){var search=_history.history.location.search;var _toQuery=(0,_url_helpers.toQuery)(search),name=_toQuery.name,environment=_toQuery.environment,pageStep=_toQuery.pageStep;var res=(0,_useFetcher.useFetcher)((function(callApmApi){return callApmApi({pathname:"/api/apm/settings/agent-configuration/view",params:{query:{name:name,environment:environment}}})}),[name,environment]);return _react.default.createElement(_Settings.Settings,null,_react.default.createElement(_AgentConfigurationCreateEdit.AgentConfigurationCreateEdit,{pageStep:pageStep||"choose-settings-step",existingConfigResult:res}))}function CreateAgentConfigurationRouteHandler(){var search=_history.history.location.search;var _toQuery2=(0,_url_helpers.toQuery)(search),pageStep=_toQuery2.pageStep;return _react.default.createElement(_Settings.Settings,null,_react.default.createElement(_AgentConfigurationCreateEdit.AgentConfigurationCreateEdit,{pageStep:pageStep||"choose-service-step"}))}},3948:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AgentConfigurationCreateEdit=AgentConfigurationCreateEdit;var _lodash=__webpack_require__(3);var _eui=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(1);var _history=__webpack_require__(82);var _ServicePage=__webpack_require__(3949);var _SettingsPage=__webpack_require__(3951);var _url_helpers=__webpack_require__(71);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getInitialNewConfig(existingConfig){return{agent_name:existingConfig===null||existingConfig===void 0?void 0:existingConfig.agent_name,service:(existingConfig===null||existingConfig===void 0?void 0:existingConfig.service)||{},settings:(existingConfig===null||existingConfig===void 0?void 0:existingConfig.settings)||{}}}function setPage(pageStep){_history.history.push(_objectSpread({},_history.history.location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(_history.history.location.search),{pageStep:pageStep}))}))}function getUnsavedChanges(_ref){var newConfig=_ref.newConfig,existingConfig=_ref.existingConfig;return Object.fromEntries(Object.entries(newConfig.settings).filter((function(_ref2){var _existingConfig$setti;var _ref3=_slicedToArray(_ref2,2),key=_ref3[0],value=_ref3[1];var existingValue=existingConfig===null||existingConfig===void 0?void 0:(_existingConfig$setti=existingConfig.settings)===null||_existingConfig$setti===void 0?void 0:_existingConfig$setti[key];if(value===""&&existingValue==null){return false}return existingValue!==value})))}function AgentConfigurationCreateEdit(_ref4){var pageStep=_ref4.pageStep,existingConfigResult=_ref4.existingConfigResult;var existingConfig=existingConfigResult===null||existingConfigResult===void 0?void 0:existingConfigResult.data;var isEditMode=Boolean(existingConfigResult);var _useState=(0,_react.useState)(getInitialNewConfig(existingConfig)),_useState2=_slicedToArray(_useState,2),newConfig=_useState2[0],setNewConfig=_useState2[1];var resetSettings=(0,_react.useCallback)((function(){setNewConfig((function(_newConfig){return _objectSpread({},_newConfig,{settings:(existingConfig===null||existingConfig===void 0?void 0:existingConfig.settings)||{}})}))}),[existingConfig]);(0,_react.useEffect)((function(){setNewConfig(getInitialNewConfig(existingConfig))}),[existingConfig]);(0,_react.useEffect)((function(){if(pageStep==="choose-service-step"&&isEditMode){setPage("choose-settings-step")}if(pageStep==="choose-settings-step"&&!isEditMode&&(0,_lodash.isEmpty)(newConfig.service)){setPage("choose-service-step")}}),[isEditMode,newConfig,pageStep]);var unsavedChanges=getUnsavedChanges({newConfig:newConfig,existingConfig:existingConfig});return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h2",null,isEditMode?_i18n.i18n.translate("xpack.apm.agentConfig.editConfigTitle",{defaultMessage:"Edit configuration"}):_i18n.i18n.translate("xpack.apm.agentConfig.createConfigTitle",{defaultMessage:"Create configuration"}))),_react.default.createElement(_eui.EuiText,{size:"s"},_i18n.i18n.translate("xpack.apm.agentConfig.newConfig.description",{defaultMessage:"This allows you to fine-tune your agent configuration directly in\n        Kibana. Best of all, changes are automatically propagated to your APM\n        agents so there’s no need to redeploy."})),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),pageStep==="choose-service-step"&&_react.default.createElement(_ServicePage.ServicePage,{newConfig:newConfig,setNewConfig:setNewConfig,onClickNext:function onClickNext(){return setPage("choose-settings-step")}}),pageStep==="choose-settings-step"&&_react.default.createElement(_SettingsPage.SettingsPage,{status:existingConfigResult===null||existingConfigResult===void 0?void 0:existingConfigResult.status,unsavedChanges:unsavedChanges,onClickEdit:function onClickEdit(){return setPage("choose-service-step")},newConfig:newConfig,setNewConfig:setNewConfig,resetSettings:resetSettings,isEditMode:isEditMode}))}},3949:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ServicePage=ServicePage;var _eui=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(3);var _all_option=__webpack_require__(350);var _useFetcher4=__webpack_require__(36);var _FormRowSelect=__webpack_require__(3950);var _APMLink=__webpack_require__(83);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ServicePage(_ref){var newConfig=_ref.newConfig,setNewConfig=_ref.setNewConfig,onClickNext=_ref.onClickNext;var _useFetcher=(0,_useFetcher4.useFetcher)((function(callApmApi){return callApmApi({pathname:"/api/apm/settings/agent-configuration/services",isCachable:true})}),[],{preservePreviousData:false}),_useFetcher$data=_useFetcher.data,serviceNames=_useFetcher$data===void 0?[]:_useFetcher$data,serviceNamesStatus=_useFetcher.status;var _useFetcher2=(0,_useFetcher4.useFetcher)((function(callApmApi){if(newConfig.service.name){return callApmApi({pathname:"/api/apm/settings/agent-configuration/environments",params:{query:{serviceName:(0,_all_option.omitAllOption)(newConfig.service.name)}}})}}),[newConfig.service.name],{preservePreviousData:false}),_useFetcher2$data=_useFetcher2.data,environments=_useFetcher2$data===void 0?[]:_useFetcher2$data,environmentStatus=_useFetcher2.status;var _useFetcher3=(0,_useFetcher4.useFetcher)(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(callApmApi){var serviceName,_ref3,agentName;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:serviceName=newConfig.service.name;if(!(!(0,_lodash.isString)(serviceName)||serviceName.length===0)){_context.next=3;break}return _context.abrupt("return");case 3:_context.next=5;return callApmApi({pathname:"/api/apm/settings/agent-configuration/agent_name",params:{query:{serviceName:serviceName}}});case 5:_ref3=_context.sent;agentName=_ref3.agentName;setNewConfig((function(prev){return _objectSpread({},prev,{agent_name:agentName})}));case 8:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}(),[newConfig.service.name,setNewConfig]),agentNameStatus=_useFetcher3.status;var ALREADY_CONFIGURED_TRANSLATED=_i18n.i18n.translate("xpack.apm.agentConfig.servicePage.alreadyConfiguredOption",{defaultMessage:"already configured"});var serviceNameOptions=serviceNames.map((function(name){return{text:(0,_all_option.getOptionLabel)(name),value:name}}));var environmentOptions=environments.map((function(_ref4){var name=_ref4.name,alreadyConfigured=_ref4.alreadyConfigured;return{disabled:alreadyConfigured,text:"".concat((0,_all_option.getOptionLabel)(name)," ").concat(alreadyConfigured?"(".concat(ALREADY_CONFIGURED_TRANSLATED,")"):""),value:name}}));return _react.default.createElement(_eui.EuiPanel,{paddingSize:"m"},_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h3",null,_i18n.i18n.translate("xpack.apm.agentConfig.servicePage.title",{defaultMessage:"Choose service"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_FormRowSelect.FormRowSelect,{title:_i18n.i18n.translate("xpack.apm.agentConfig.servicePage.service.title",{defaultMessage:"Service"}),description:_i18n.i18n.translate("xpack.apm.agentConfig.servicePage.service.description",{defaultMessage:"Choose the service you want to configure."}),fieldLabel:_i18n.i18n.translate("xpack.apm.agentConfig.servicePage.service.fieldLabel",{defaultMessage:"Service name"}),isLoading:serviceNamesStatus===_useFetcher4.FETCH_STATUS.LOADING,options:serviceNameOptions,value:newConfig.service.name,disabled:serviceNamesStatus===_useFetcher4.FETCH_STATUS.LOADING,onChange:function onChange(e){e.preventDefault();var name=e.target.value;setNewConfig((function(prev){return _objectSpread({},prev,{service:{name:name,environment:""}})}))}}),_react.default.createElement(_FormRowSelect.FormRowSelect,{title:_i18n.i18n.translate("xpack.apm.agentConfig.servicePage.environment.title",{defaultMessage:"Environment"}),description:_i18n.i18n.translate("xpack.apm.agentConfig.servicePage.environment.description",{defaultMessage:"Only a single environment per configuration is supported."}),fieldLabel:_i18n.i18n.translate("xpack.apm.agentConfig.servicePage.environment.fieldLabel",{defaultMessage:"Service environment"}),isLoading:environmentStatus===_useFetcher4.FETCH_STATUS.LOADING,options:environmentOptions,value:newConfig.service.environment,disabled:!newConfig.service.name||environmentStatus===_useFetcher4.FETCH_STATUS.LOADING,onChange:function onChange(e){e.preventDefault();var environment=e.target.value;setNewConfig((function(prev){return _objectSpread({},prev,{service:{name:prev.service.name,environment:environment}})}))}}),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_APMLink.APMLink,{path:"/settings/agent-configuration"},_react.default.createElement(_eui.EuiButtonEmpty,{color:"primary"},_i18n.i18n.translate("xpack.apm.agentConfig.servicePage.cancelButton",{defaultMessage:"Cancel"})))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{type:"submit",fill:true,onClick:onClickNext,isLoading:agentNameStatus===_useFetcher4.FETCH_STATUS.LOADING,isDisabled:!newConfig.service.name||!newConfig.service.environment||agentNameStatus===_useFetcher4.FETCH_STATUS.LOADING},_i18n.i18n.translate("xpack.apm.agentConfig.saveConfigurationButtonLabel",{defaultMessage:"Next step"})))))}},3950:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FormRowSelect=FormRowSelect;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _SelectWithPlaceholder=__webpack_require__(1262);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FormRowSelect(_ref){var title=_ref.title,description=_ref.description,fieldLabel=_ref.fieldLabel,isLoading=_ref.isLoading,options=_ref.options,value=_ref.value,disabled=_ref.disabled,onChange=_ref.onChange;return _react.default.createElement(_eui.EuiDescribedFormGroup,{fullWidth:true,title:_react.default.createElement("h3",null,title),description:description},_react.default.createElement(_eui.EuiFormRow,{label:fieldLabel},_react.default.createElement(_SelectWithPlaceholder.SelectWithPlaceholder,{isLoading:isLoading,options:options,value:value,disabled:disabled,onChange:onChange})))}},3951:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SettingsPage=SettingsPage;var _eui=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(1);var _useFetcher=__webpack_require__(36);var _history=__webpack_require__(82);var _setting_definitions=__webpack_require__(1263);var _saveConfig=__webpack_require__(3958);var _useApmPluginContext=__webpack_require__(62);var _public=__webpack_require__(78);var _SettingFormRow=__webpack_require__(3959);var _all_option=__webpack_require__(350);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function removeEmpty(obj){return Object.fromEntries(Object.entries(obj).filter((function(_ref){var _ref2=_slicedToArray(_ref,2),k=_ref2[0],v=_ref2[1];return v!=null&&v!==""})))}function SettingsPage(_ref3){var status=_ref3.status,unsavedChanges=_ref3.unsavedChanges,newConfig=_ref3.newConfig,setNewConfig=_ref3.setNewConfig,resetSettings=_ref3.resetSettings,isEditMode=_ref3.isEditMode,onClickEdit=_ref3.onClickEdit;var trackApmEvent=(0,_public.useUiTracker)({app:"apm"});var toasts=(0,_useApmPluginContext.useApmPluginContext)().core.notifications.toasts;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isSaving=_useState2[0],setIsSaving=_useState2[1];var unsavedChangesCount=Object.keys(unsavedChanges).length;var isLoading=status===_useFetcher.FETCH_STATUS.LOADING;var isFormValid=(0,_react.useMemo)((function(){return _setting_definitions.settingDefinitions.filter((function(_ref4){var key=_ref4.key;var value=newConfig.settings[key];return value!=null&&value!==""})).every((function(def){var value=newConfig.settings[def.key];return(0,_setting_definitions.isValid)(def,value)}))}),[newConfig.settings]);var handleSubmitEvent=function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var config;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:trackApmEvent({metric:"save_agent_configuration"});config=_objectSpread({},newConfig,{settings:removeEmpty(newConfig.settings)});setIsSaving(true);_context.next=5;return(0,_saveConfig.saveConfig)({config:config,isEditMode:isEditMode,toasts:toasts});case 5:setIsSaving(false);_history.history.push({pathname:"/settings/agent-configuration",search:_history.history.location.search});case 7:case"end":return _context.stop()}}}),_callee)})));return function handleSubmitEvent(){return _ref5.apply(this,arguments)}}();if(status===_useFetcher.FETCH_STATUS.FAILURE){return _react.default.createElement(_eui.EuiCallOut,{title:_i18n.i18n.translate("xpack.apm.agentConfig.settingsPage.notFound.title",{defaultMessage:"Sorry, there was an error"}),color:"danger",iconType:"alert"},_react.default.createElement("p",null,_i18n.i18n.translate("xpack.apm.agentConfig.settingsPage.notFound.message",{defaultMessage:"The requested configuration does not exist"})))}return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiForm,null,_react.default.createElement("form",{onKeyPress:function onKeyPress(e){var didClickEnter=e.which===13;if(didClickEnter&&isFormValid){e.preventDefault();handleSubmitEvent()}}},_react.default.createElement(_eui.EuiPanel,{paddingSize:"m"},_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h3",null,_i18n.i18n.translate("xpack.apm.agentConfig.chooseService.title",{defaultMessage:"Choose service"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiStat,{titleSize:"xs",title:isLoading?"-":(0,_all_option.getOptionLabel)(newConfig.service.name),description:_i18n.i18n.translate("xpack.apm.agentConfig.chooseService.service.name.label",{defaultMessage:"Service name"})})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiStat,{titleSize:"xs",title:isLoading?"-":(0,_all_option.getOptionLabel)(newConfig.service.environment),description:_i18n.i18n.translate("xpack.apm.agentConfig.chooseService.service.environment.label",{defaultMessage:"Environment"})})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},!isEditMode&&_react.default.createElement(_eui.EuiButton,{onClick:onClickEdit,iconType:"pencil"},_i18n.i18n.translate("xpack.apm.agentConfig.chooseService.editButton",{defaultMessage:"Edit"}))))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiPanel,{paddingSize:"m"},_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h3",null,_i18n.i18n.translate("xpack.apm.agentConfig.settings.title",{defaultMessage:"Configuration options"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),isLoading?_react.default.createElement("div",{style:{textAlign:"center"}},_react.default.createElement(_eui.EuiLoadingSpinner,{size:"m"})):renderSettings({unsavedChanges:unsavedChanges,newConfig:newConfig,setNewConfig:setNewConfig})))),_react.default.createElement(_eui.EuiSpacer,{size:"xxl"}),unsavedChangesCount>0&&_react.default.createElement(_eui.EuiBottomBar,{paddingSize:"s"},_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{flexDirection:"row",alignItems:"center"}},_react.default.createElement(_eui.EuiHealth,{color:"warning"}),_react.default.createElement(_eui.EuiText,null,_i18n.i18n.translate("xpack.apm.unsavedChanges",{defaultMessage:"{unsavedChangesCount, plural, =0{0 unsaved changes} one {1 unsaved change} other {# unsaved changes}} ",values:{unsavedChangesCount:unsavedChangesCount}}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{color:"ghost",onClick:resetSettings},_i18n.i18n.translate("xpack.apm.agentConfig.settingsPage.discardChangesButton",{defaultMessage:"Discard changes"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{onClick:handleSubmitEvent,fill:true,isLoading:isSaving,isDisabled:!isFormValid,color:"secondary",iconType:"check"},_i18n.i18n.translate("xpack.apm.agentConfig.settingsPage.saveButton",{defaultMessage:"Save configuration"}))))))))}function renderSettings(_ref6){var newConfig=_ref6.newConfig,unsavedChanges=_ref6.unsavedChanges,setNewConfig=_ref6.setNewConfig;return _setting_definitions.settingDefinitions.filter((0,_setting_definitions.filterByAgent)(newConfig.agent_name)).map((function(setting){return _react.default.createElement(_SettingFormRow.SettingFormRow,{isUnsaved:unsavedChanges.hasOwnProperty(setting.key),key:setting.key,setting:setting,value:newConfig.settings[setting.key],onChange:function onChange(key,value){setNewConfig((function(prev){return _objectSpread({},prev,{settings:_objectSpread({},prev.settings,_defineProperty({},key,value))})}))}})}))}},3952:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.booleanRt=void 0;var t=_interopRequireWildcard(__webpack_require__(110));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var booleanRt=t.union([t.literal("true"),t.literal("false")]);exports.booleanRt=booleanRt},3953:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getNumberFloatRt=getNumberFloatRt;exports.numberFloatRt=void 0;var t=_interopRequireWildcard(__webpack_require__(110));var _Either=__webpack_require__(135);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function getNumberFloatRt(_ref){var min=_ref.min,max=_ref.max;return new t.Type("numberFloatRt",t.string.is,(function(input,context){return _Either.either.chain(t.string.validate(input,context),(function(inputAsString){var inputAsFloat=parseFloat(inputAsString);var maxThreeDecimals=parseFloat(inputAsFloat.toFixed(3))===inputAsFloat;var isValid=inputAsFloat>=min&&inputAsFloat<=max&&maxThreeDecimals;return isValid?t.success(inputAsString):t.failure(input,context,"Number must be between ".concat(min," and ").concat(max))}))}),t.identity)}var numberFloatRt=getNumberFloatRt({min:0,max:1});exports.numberFloatRt=numberFloatRt},3954:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bytesRt=exports.BYTE_UNITS=void 0;var t=_interopRequireWildcard(__webpack_require__(110));var _Either=__webpack_require__(135);var _amount_and_unit=__webpack_require__(631);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var BYTE_UNITS=["b","kb","mb"];exports.BYTE_UNITS=BYTE_UNITS;var bytesRt=new t.Type("bytesRt",t.string.is,(function(input,context){return _Either.either.chain(t.string.validate(input,context),(function(inputAsString){var _ref=(0,_amount_and_unit.amountAndUnitToObject)(inputAsString),amount=_ref.amount,unit=_ref.unit;var amountAsInt=parseInt(amount,10);var isValidUnit=BYTE_UNITS.includes(unit);var isValid=amountAsInt>0&&isValidUnit;return isValid?t.success(inputAsString):t.failure(input,context,"Must have numeric amount and a valid unit (".concat(BYTE_UNITS,")"))}))}),t.identity);exports.bytesRt=bytesRt},3955:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.generalSettings=void 0;var _i18n=__webpack_require__(1);var _integer_rt=__webpack_require__(1264);var _capture_body_rt=__webpack_require__(3956);var _duration_rt=__webpack_require__(1265);var generalSettings=[{key:"api_request_size",type:"bytes",defaultValue:"768kb",label:_i18n.i18n.translate("xpack.apm.agentConfig.apiRequestSize.label",{defaultMessage:"API Request Size"}),description:_i18n.i18n.translate("xpack.apm.agentConfig.apiRequestSize.description",{defaultMessage:"The maximum total compressed size of the request body which is sent to the APM Server intake api via a chunked encoding (HTTP streaming).\nNote that a small overshoot is possible.\n\nAllowed byte units are `b`, `kb` and `mb`. `1kb` is equal to `1024b`."}),excludeAgents:["js-base","rum-js","dotnet","go","nodejs"]},{key:"api_request_time",type:"duration",defaultValue:"10s",label:_i18n.i18n.translate("xpack.apm.agentConfig.apiRequestTime.label",{defaultMessage:"API Request Time"}),description:_i18n.i18n.translate("xpack.apm.agentConfig.apiRequestTime.description",{defaultMessage:"Maximum time to keep an HTTP request to the APM Server open for.\n\nNOTE: This value has to be lower than the APM Server's `read_timeout` setting."}),excludeAgents:["js-base","rum-js","dotnet","go","nodejs"]},{key:"capture_body",validation:_capture_body_rt.captureBodyRt,type:"select",defaultValue:"off",label:_i18n.i18n.translate("xpack.apm.agentConfig.captureBody.label",{defaultMessage:"Capture body"}),description:_i18n.i18n.translate("xpack.apm.agentConfig.captureBody.description",{defaultMessage:"For transactions that are HTTP requests, the agent can optionally capture the request body (e.g. POST variables).\nFor transactions that are initiated by receiving a message from a message broker, the agent can capture the textual message body."}),options:[{text:"off",value:"off"},{text:"errors",value:"errors"},{text:"transactions",value:"transactions"},{text:"all",value:"all"}],excludeAgents:["js-base","rum-js"]},{key:"capture_headers",type:"boolean",defaultValue:"true",label:_i18n.i18n.translate("xpack.apm.agentConfig.captureHeaders.label",{defaultMessage:"Capture Headers"}),description:_i18n.i18n.translate("xpack.apm.agentConfig.captureHeaders.description",{defaultMessage:"If set to `true`, the agent will capture HTTP request and response headers (including cookies), as well as message headers/properties when using messaging frameworks (like Kafka).\n\nNOTE: Setting this to `false` reduces network bandwidth, disk space and object allocations."}),excludeAgents:["js-base","rum-js","nodejs"]},{key:"log_level",type:"text",defaultValue:"info",label:_i18n.i18n.translate("xpack.apm.agentConfig.logLevel.label",{defaultMessage:"Log level"}),description:_i18n.i18n.translate("xpack.apm.agentConfig.logLevel.description",{defaultMessage:"Sets the logging level for the agent"}),includeAgents:["dotnet","ruby"]},{key:"recording",type:"boolean",defaultValue:"true",label:_i18n.i18n.translate("xpack.apm.agentConfig.recording.label",{defaultMessage:"Recording"}),description:_i18n.i18n.translate("xpack.apm.agentConfig.recording.description",{defaultMessage:"When recording, the agent instruments incoming HTTP requests, tracks errors, and collects and sends metrics. When set to non-recording, the agent works as a noop, not collecting data and not communicating with the APM Server except for polling for updated configuration. As this is a reversible switch, agent threads are not being killed when set to non-recording, but they will be mostly idle in this state, so the overhead should be negligible. You can use this setting to dynamically control whether Elastic APM is enabled or disabled."}),excludeAgents:["nodejs"]},{key:"server_timeout",type:"duration",defaultValue:"5s",label:_i18n.i18n.translate("xpack.apm.agentConfig.serverTimeout.label",{defaultMessage:"Server Timeout"}),description:_i18n.i18n.translate("xpack.apm.agentConfig.serverTimeout.description",{defaultMessage:"If a request to the APM Server takes longer than the configured timeout,\nthe request is cancelled and the event (exception or transaction) is discarded.\nSet to 0 to disable timeouts.\n\nWARNING: If timeouts are disabled or set to a high value, your app could experience memory issues if the APM Server times out."}),includeAgents:["java"]},{key:"span_frames_min_duration",type:"duration",validation:(0,_duration_rt.getDurationRt)({min:-1}),defaultValue:"5ms",label:_i18n.i18n.translate("xpack.apm.agentConfig.spanFramesMinDuration.label",{defaultMessage:"Span frames minimum duration"}),description:_i18n.i18n.translate("xpack.apm.agentConfig.spanFramesMinDuration.description",{defaultMessage:"In its default settings, the APM agent will collect a stack trace with every recorded span.\nWhile this is very helpful to find the exact place in your code that causes the span, collecting this stack trace does have some overhead. \nWhen setting this option to a negative value, like `-1ms`, stack traces will be collected for all spans. Setting it to a positive value, e.g. `5ms`, will limit stack trace collection to spans with durations equal to or longer than the given value, e.g. 5 milliseconds.\n\nTo disable stack trace collection for spans completely, set the value to `0ms`."}),excludeAgents:["js-base","rum-js","nodejs"],min:-1},{key:"stack_trace_limit",type:"integer",defaultValue:"50",label:_i18n.i18n.translate("xpack.apm.agentConfig.stackTraceLimit.label",{defaultMessage:"Stack trace limit"}),description:_i18n.i18n.translate("xpack.apm.agentConfig.stackTraceLimit.description",{defaultMessage:"Setting it to 0 will disable stack trace collection. Any positive integer value will be used as the maximum number of frames to collect. Setting it -1 means that all frames will be collected."}),includeAgents:["java","dotnet","go"]},{key:"transaction_max_spans",type:"integer",validation:(0,_integer_rt.getIntegerRt)({min:0,max:32e3}),validationError:_i18n.i18n.translate("xpack.apm.agentConfig.transactionMaxSpans.errorText",{defaultMessage:"Must be between 0 and 32000"}),defaultValue:"500",label:_i18n.i18n.translate("xpack.apm.agentConfig.transactionMaxSpans.label",{defaultMessage:"Transaction max spans"}),description:_i18n.i18n.translate("xpack.apm.agentConfig.transactionMaxSpans.description",{defaultMessage:"Limits the amount of spans that are recorded per transaction."}),min:0,max:32e3,excludeAgents:["js-base","rum-js"]},{key:"transaction_sample_rate",type:"float",defaultValue:"1.0",label:_i18n.i18n.translate("xpack.apm.agentConfig.transactionSampleRate.label",{defaultMessage:"Transaction sample rate"}),description:_i18n.i18n.translate("xpack.apm.agentConfig.transactionSampleRate.description",{defaultMessage:"By default, the agent will sample every transaction (e.g. request to your service). To reduce overhead and storage requirements, you can set the sample rate to a value between 0.0 and 1.0. We still record overall time and the result for unsampled transactions, but not context information, labels, or spans."})}];exports.generalSettings=generalSettings},3956:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.captureBodyRt=void 0;var t=_interopRequireWildcard(__webpack_require__(110));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var captureBodyRt=t.union([t.literal("off"),t.literal("errors"),t.literal("transactions"),t.literal("all")]);exports.captureBodyRt=captureBodyRt},3957:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.javaSettings=void 0;var _i18n=__webpack_require__(1);var javaSettings=[{key:"enable_log_correlation",type:"boolean",defaultValue:"false",label:_i18n.i18n.translate("xpack.apm.agentConfig.enableLogCorrelation.label",{defaultMessage:"Enable log correlation"}),description:_i18n.i18n.translate("xpack.apm.agentConfig.enableLogCorrelation.description",{defaultMessage:"A boolean specifying if the agent should integrate into SLF4J's MDC to enable trace-log correlation. If set to `true`, the agent will set the `trace.id` and `transaction.id` for the currently active spans and transactions to the MDC. Since Java agent version 1.16.0, the agent also adds `error.id` of captured error to the MDC just before the error message is logged. NOTE: While it's allowed to enable this setting at runtime, you can't disable it without a restart."}),includeAgents:["java"]},{key:"circuit_breaker_enabled",label:_i18n.i18n.translate("xpack.apm.agentConfig.circuitBreakerEnabled.label",{defaultMessage:"Cirtcuit breaker enabled"}),type:"boolean",category:"Circuit-Breaker",defaultValue:"false",description:_i18n.i18n.translate("xpack.apm.agentConfig.circuitBreakerEnabled.description",{defaultMessage:"A boolean specifying whether the circuit breaker should be enabled or not.  When enabled, the agent periodically polls stress monitors to detect system/process/JVM stress state. If ANY of the monitors detects a stress indication, the agent will pause, as if the `recording` configuration option has been set to `false`, thus reducing resource consumption to a minimum. When paused, the agent continues polling the same monitors in order to detect whether the stress state has been relieved. If ALL monitors approve that the system/process/JVM is not under stress anymore, the agent will resume and become fully functional."}),includeAgents:["java"]},{key:"stress_monitor_gc_stress_threshold",label:_i18n.i18n.translate("xpack.apm.agentConfig.stressMonitorGcStressThreshold.label",{defaultMessage:"Stress monitor gc stress threshold"}),type:"float",category:"Circuit-Breaker",defaultValue:"0.95",description:_i18n.i18n.translate("xpack.apm.agentConfig.stressMonitorGcStressThreshold.description",{defaultMessage:"The threshold used by the GC monitor to rely on for identifying heap stress. The same threshold will be used for all heap pools, so that if ANY has a usage percentage that crosses it, the agent will consider it as a heap stress. The GC monitor relies only on memory consumption measured after a recent GC."}),includeAgents:["java"]},{key:"stress_monitor_gc_relief_threshold",label:_i18n.i18n.translate("xpack.apm.agentConfig.stressMonitorGcReliefThreshold.label",{defaultMessage:"Stress monitor gc relief threshold"}),type:"float",category:"Circuit-Breaker",defaultValue:"0.75",description:_i18n.i18n.translate("xpack.apm.agentConfig.stressMonitorGcReliefThreshold.description",{defaultMessage:"The threshold used by the GC monitor to rely on for identifying when the heap is not under stress. If `stress_monitor_gc_stress_threshold` has been crossed, the agent will consider it a heap-stress state. In order to determine that the stress state is over, percentage of occupied memory in ALL heap pools should be lower than this threshold. The GC monitor relies only on memory consumption measured after a recent GC."}),includeAgents:["java"]},{key:"stress_monitor_cpu_duration_threshold",label:_i18n.i18n.translate("xpack.apm.agentConfig.stressMonitorCpuDurationThreshold.label",{defaultMessage:"Stress monitor cpu duration threshold"}),type:"duration",category:"Circuit-Breaker",defaultValue:"1m",description:_i18n.i18n.translate("xpack.apm.agentConfig.stressMonitorCpuDurationThreshold.description",{defaultMessage:"The minimal time required in order to determine whether the system is either currently under stress, or that the stress detected previously has been relieved. All measurements during this time must be consistent in comparison to the relevant threshold in order to detect a change of stress state. Must be at least `1m`."}),includeAgents:["java"]},{key:"stress_monitor_system_cpu_stress_threshold",label:_i18n.i18n.translate("xpack.apm.agentConfig.stressMonitorSystemCpuStressThreshold.label",{defaultMessage:"Stress monitor system cpu stress threshold"}),type:"float",category:"Circuit-Breaker",defaultValue:"0.95",description:_i18n.i18n.translate("xpack.apm.agentConfig.stressMonitorSystemCpuStressThreshold.description",{defaultMessage:"The threshold used by the system CPU monitor to detect system CPU stress. If the system CPU crosses this threshold for a duration of at least `stress_monitor_cpu_duration_threshold`, the monitor considers this as a stress state."}),includeAgents:["java"]},{key:"stress_monitor_system_cpu_relief_threshold",label:_i18n.i18n.translate("xpack.apm.agentConfig.stressMonitorSystemCpuReliefThreshold.label",{defaultMessage:"Stress monitor system cpu relief threshold"}),type:"float",category:"Circuit-Breaker",defaultValue:"0.8",description:_i18n.i18n.translate("xpack.apm.agentConfig.stressMonitorSystemCpuReliefThreshold.description",{defaultMessage:"The threshold used by the system CPU monitor to determine that the system is not under CPU stress. If the monitor detected a CPU stress, the measured system CPU needs to be below this threshold for a duration of at least `stress_monitor_cpu_duration_threshold` in order for the monitor to decide that the CPU stress has been relieved."}),includeAgents:["java"]},{key:"profiling_inferred_spans_enabled",label:_i18n.i18n.translate("xpack.apm.agentConfig.profilingInferredSpansEnabled.label",{defaultMessage:"Profiling inferred spans enabled"}),type:"boolean",category:"Profiling",defaultValue:"false",description:_i18n.i18n.translate("xpack.apm.agentConfig.profilingInferredSpansEnabled.description",{defaultMessage:"Set to `true` to make the agent create spans for method executions based on async-profiler, a sampling aka statistical profiler. Due to the nature of how sampling profilers work, the duration of the inferred spans are not exact, but only estimations. The `profiling_inferred_spans_sampling_interval` lets you fine tune the trade-off between accuracy and overhead. The inferred spans are created after a profiling session has ended. This means there is a delay between the regular and the inferred spans being visible in the UI. NOTE: This feature is not available on Windows."}),includeAgents:["java"]},{key:"profiling_inferred_spans_sampling_interval",label:_i18n.i18n.translate("xpack.apm.agentConfig.profilingInferredSpansSamplingInterval.label",{defaultMessage:"Profiling inferred spans sampling interval"}),type:"duration",category:"Profiling",defaultValue:"50ms",description:_i18n.i18n.translate("xpack.apm.agentConfig.profilingInferredSpansSamplingInterval.description",{defaultMessage:"The frequency at which stack traces are gathered within a profiling session. The lower you set it, the more accurate the durations will be. This comes at the expense of higher overhead and more spans for potentially irrelevant operations. The minimal duration of a profiling-inferred span is the same as the value of this setting."}),includeAgents:["java"]},{key:"profiling_inferred_spans_min_duration",label:_i18n.i18n.translate("xpack.apm.agentConfig.profilingInferredSpansMinDuration.label",{defaultMessage:"Profiling inferred spans min duration"}),type:"duration",category:"Profiling",defaultValue:"0ms",description:_i18n.i18n.translate("xpack.apm.agentConfig.profilingInferredSpansMinDuration.description",{defaultMessage:"The minimum duration of an inferred span. Note that the min duration is also implicitly set by the sampling interval. However, increasing the sampling interval also decreases the accuracy of the duration of inferred spans."}),includeAgents:["java"]},{key:"profiling_inferred_spans_included_classes",label:_i18n.i18n.translate("xpack.apm.agentConfig.profilingInferredSpansIncludedClasses.label",{defaultMessage:"Profiling inferred spans included classes"}),type:"text",category:"Profiling",defaultValue:"*",description:_i18n.i18n.translate("xpack.apm.agentConfig.profilingInferredSpansIncludedClasses.description",{defaultMessage:"If set, the agent will only create inferred spans for methods which match this list. Setting a value may slightly reduce overhead and can reduce clutter by only creating spans for the classes you are interested in. This option supports the wildcard `*`, which matches zero or more characters. Example: `org.example.myapp.*`. Matching is case insensitive by default. Prepending an element with `(?-i)` makes the matching case sensitive."}),includeAgents:["java"]},{key:"profiling_inferred_spans_excluded_classes",label:_i18n.i18n.translate("xpack.apm.agentConfig.profilingInferredSpansExcludedClasses.label",{defaultMessage:"Profiling inferred spans excluded classes"}),type:"text",category:"Profiling",defaultValue:"(?-i)java.*,(?-i)javax.*,(?-i)sun.*,(?-i)com.sun.*,(?-i)jdk.*,(?-i)org.apache.tomcat.*,(?-i)org.apache.catalina.*,(?-i)org.apache.coyote.*,(?-i)org.jboss.as.*,(?-i)org.glassfish.*,(?-i)org.eclipse.jetty.*,(?-i)com.ibm.websphere.*,(?-i)io.undertow.*",description:_i18n.i18n.translate("xpack.apm.agentConfig.profilingInferredSpansExcludedClasses.description",{defaultMessage:"Excludes classes for which no profiler-inferred spans should be created. This option supports the wildcard `*`, which matches zero or more characters. Matching is case insensitive by default. Prepending an element with `(?-i)` makes the matching case sensitive."}),includeAgents:["java"]}];exports.javaSettings=javaSettings},3958:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.saveConfig=saveConfig;var _i18n=__webpack_require__(1);var _all_option=__webpack_require__(350);var _createCallApmApi=__webpack_require__(159);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function saveConfig(_x){return _saveConfig.apply(this,arguments)}function _saveConfig(){_saveConfig=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var config,isEditMode,toasts;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config=_ref.config,isEditMode=_ref.isEditMode,toasts=_ref.toasts;_context.prev=1;_context.next=4;return(0,_createCallApmApi.callApmApi)({pathname:"/api/apm/settings/agent-configuration",method:"PUT",params:{query:{overwrite:isEditMode},body:_objectSpread({},config,{service:{name:(0,_all_option.omitAllOption)(config.service.name),environment:(0,_all_option.omitAllOption)(config.service.environment)}})}});case 4:toasts.addSuccess({title:_i18n.i18n.translate("xpack.apm.agentConfig.saveConfig.succeeded.title",{defaultMessage:"Configuration saved"}),text:_i18n.i18n.translate("xpack.apm.agentConfig.saveConfig.succeeded.text",{defaultMessage:'The configuration for "{serviceName}" was saved. It will take some time to propagate to the agents.',values:{serviceName:(0,_all_option.getOptionLabel)(config.service.name)}})});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context["catch"](1);toasts.addDanger({title:_i18n.i18n.translate("xpack.apm.agentConfig.saveConfig.failed.title",{defaultMessage:"Configuration could not be saved"}),text:_i18n.i18n.translate("xpack.apm.agentConfig.saveConfig.failed.text",{defaultMessage:'Something went wrong when saving the configuration for "{serviceName}". Error: "{errorMessage}"',values:{serviceName:(0,_all_option.getOptionLabel)(config.service.name),errorMessage:_context.t0.message}})});case 10:case"end":return _context.stop()}}}),_callee,null,[[1,7]])})));return _saveConfig.apply(this,arguments)}},3959:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SettingFormRow=SettingFormRow;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _setting_definitions=__webpack_require__(1263);var _amount_and_unit=__webpack_require__(631);var _SelectWithPlaceholder=__webpack_require__(1262);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function FormRow(_ref){var setting=_ref.setting,value=_ref.value,_onChange=_ref.onChange;switch(setting.type){case"float":case"text":{return _react.default.createElement(_eui.EuiFieldText,{placeholder:setting.placeholder,value:value||"",onChange:function onChange(e){return _onChange(setting.key,e.target.value)}})}case"integer":{return _react.default.createElement(_eui.EuiFieldNumber,{placeholder:setting.placeholder,value:value||"",min:setting.min,max:setting.max,onChange:function onChange(e){return _onChange(setting.key,e.target.value)}})}case"select":{return _react.default.createElement(_SelectWithPlaceholder.SelectWithPlaceholder,{placeholder:setting.placeholder,options:setting.options,value:value,onChange:function onChange(e){return _onChange(setting.key,e.target.value)}})}case"boolean":{return _react.default.createElement(_SelectWithPlaceholder.SelectWithPlaceholder,{placeholder:setting.placeholder,options:[{text:"true",value:"true"},{text:"false",value:"false"}],value:value,onChange:function onChange(e){return _onChange(setting.key,e.target.value)}})}case"bytes":case"duration":{var _setting$units;var _amountAndUnitToObjec=(0,_amount_and_unit.amountAndUnitToObject)(value!==null&&value!==void 0?value:""),amount=_amountAndUnitToObjec.amount,unit=_amountAndUnitToObjec.unit;return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFieldNumber,{placeholder:setting.placeholder,value:amount,min:"min"in setting?setting.min:1,onChange:function onChange(e){return _onChange(setting.key,(0,_amount_and_unit.amountAndUnitToString)({amount:e.target.value,unit:unit}))}})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_SelectWithPlaceholder.SelectWithPlaceholder,{placeholder:_i18n.i18n.translate("xpack.apm.unitLabel",{defaultMessage:"Select unit"}),value:unit,options:(_setting$units=setting.units)===null||_setting$units===void 0?void 0:_setting$units.map((function(text){return{text:text,value:text}})),onChange:function onChange(e){return _onChange(setting.key,(0,_amount_and_unit.amountAndUnitToString)({amount:amount,unit:e.target.value}))}})))}default:throw new Error('Unknown type "'.concat(setting.type,'"'))}}function SettingFormRow(_ref2){var isUnsaved=_ref2.isUnsaved,setting=_ref2.setting,value=_ref2.value,onChange=_ref2.onChange;var isInvalid=value!=null&&value!==""&&!(0,_setting_definitions.isValid)(setting,value);return _react.default.createElement(_eui.EuiDescribedFormGroup,{fullWidth:true,title:_react.default.createElement("h3",null,setting.label," ",isUnsaved&&_react.default.createElement(_eui.EuiIconTip,{type:"dot",color:"warning",content:_i18n.i18n.translate("xpack.apm.agentConfig.unsavedSetting.tooltip",{defaultMessage:"Unsaved"})})),description:_react.default.createElement(_react.default.Fragment,null,setting.description,setting.defaultValue&&_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiCode,null,"Default: ",setting.defaultValue)))},_react.default.createElement(_eui.EuiFormRow,{label:setting.key,error:setting.validationError,isInvalid:isInvalid},_react.default.createElement(FormRow,{onChange:onChange,setting:setting,value:value})))}},3960:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ScrollToTopOnPathChange=void 0;var _react=__webpack_require__(0);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ScrollToTopOnPathChange=function(_Component){_inherits(ScrollToTopOnPathChange,_Component);function ScrollToTopOnPathChange(){_classCallCheck(this,ScrollToTopOnPathChange);return _possibleConstructorReturn(this,_getPrototypeOf(ScrollToTopOnPathChange).apply(this,arguments))}_createClass(ScrollToTopOnPathChange,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(this.props.location.pathname!==prevProps.location.pathname){window.scrollTo(0,0)}}},{key:"render",value:function render(){return null}}]);return ScrollToTopOnPathChange}(_react.Component);exports.ScrollToTopOnPathChange=ScrollToTopOnPathChange},3961:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.UpdateBreadcrumbs=UpdateBreadcrumbs;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(83);var _ProvideBreadcrumbs=__webpack_require__(3962);var _useApmPluginContext2=__webpack_require__(62);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function getTitleFromBreadCrumbs(breadcrumbs){return breadcrumbs.map((function(_ref){var value=_ref.value;return value})).reverse().join(" | ")}var UpdateBreadcrumbsComponent=function(_React$Component){_inherits(UpdateBreadcrumbsComponent,_React$Component);function UpdateBreadcrumbsComponent(){_classCallCheck(this,UpdateBreadcrumbsComponent);return _possibleConstructorReturn(this,_getPrototypeOf(UpdateBreadcrumbsComponent).apply(this,arguments))}_createClass(UpdateBreadcrumbsComponent,[{key:"updateHeaderBreadcrumbs",value:function updateHeaderBreadcrumbs(){var _this=this;var breadcrumbs=this.props.breadcrumbs.map((function(_ref2){var value=_ref2.value,match=_ref2.match;return{text:value,href:(0,_APMLink.getAPMHref)(match.url,_this.props.location.search)}}));document.title=getTitleFromBreadCrumbs(this.props.breadcrumbs);this.props.core.chrome.setBreadcrumbs(breadcrumbs)}},{key:"componentDidMount",value:function componentDidMount(){this.updateHeaderBreadcrumbs()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.updateHeaderBreadcrumbs()}},{key:"render",value:function render(){return null}}]);return UpdateBreadcrumbsComponent}(_react.default.Component);function UpdateBreadcrumbs(_ref3){var routes=_ref3.routes;var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),core=_useApmPluginContext.core;return _react.default.createElement(_ProvideBreadcrumbs.ProvideBreadcrumbs,{routes:routes,render:function render(_ref4){var breadcrumbs=_ref4.breadcrumbs,location=_ref4.location;return _react.default.createElement(UpdateBreadcrumbsComponent,{breadcrumbs:breadcrumbs,location:location,core:core})}})}},3962:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getBreadcrumb=getBreadcrumb;exports.getBreadcrumbs=getBreadcrumbs;exports.ProvideBreadcrumbs=void 0;var _reactRouterDom=__webpack_require__(33);function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var parse=function parse(options){var breadcrumb=options.breadcrumb,match=options.match,location=options.location;var value;if(typeof breadcrumb==="function"){value=breadcrumb({match:match,location:location})}else{value=breadcrumb}return{value:value,match:match,location:location}};function getBreadcrumb(_ref){var location=_ref.location,currentPath=_ref.currentPath,routes=_ref.routes;return routes.reduce((function(found,_ref2){var breadcrumb=_ref2.breadcrumb,route=_objectWithoutProperties(_ref2,["breadcrumb"]);if(found){return found}if(!breadcrumb){return null}var match=(0,_reactRouterDom.matchPath)(currentPath,route);if(match){return parse({breadcrumb:breadcrumb,match:match,location:location})}return null}),null)}function getBreadcrumbs(_ref3){var routes=_ref3.routes,location=_ref3.location;var breadcrumbs=[];var pathname=location.pathname;pathname.split("?")[0].replace(/\/$/,"").split("/").reduce((function(acc,next){var currentPath=!next?"/":"".concat(acc,"/").concat(next);var breadcrumb=getBreadcrumb({location:location,currentPath:currentPath,routes:routes});if(breadcrumb){breadcrumbs.push(breadcrumb)}return currentPath==="/"?"":currentPath}),"");return breadcrumbs}function ProvideBreadcrumbsComponent(_ref4){var _ref4$routes=_ref4.routes,routes=_ref4$routes===void 0?[]:_ref4$routes,render=_ref4.render,location=_ref4.location,match=_ref4.match,history=_ref4.history;var breadcrumbs=getBreadcrumbs({routes:routes,location:location});return render({breadcrumbs:breadcrumbs,location:location,match:match,history:history})}var ProvideBreadcrumbs=(0,_reactRouterDom.withRouter)(ProvideBreadcrumbsComponent);exports.ProvideBreadcrumbs=ProvideBreadcrumbs},3963:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ErrorRateAlertTrigger=ErrorRateAlertTrigger;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(3);var _public=__webpack_require__(261);var _alert_types=__webpack_require__(435);var _ServiceAlertTrigger=__webpack_require__(1266);var _PopoverExpression=__webpack_require__(1267);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ErrorRateAlertTrigger(props){var setAlertParams=props.setAlertParams,setAlertProperty=props.setAlertProperty,alertParams=props.alertParams;var defaults={threshold:25,windowSize:1,windowUnit:"m"};var params=_objectSpread({},defaults,{},alertParams);var threshold=(0,_lodash.isFinite)(params.threshold)?params.threshold:"";var fields=[_react.default.createElement(_PopoverExpression.PopoverExpression,{title:_i18n.i18n.translate("xpack.apm.errorRateAlertTrigger.isAbove",{defaultMessage:"is above"}),value:threshold.toString()},_react.default.createElement(_eui.EuiFieldNumber,{value:threshold,step:0,onChange:function onChange(e){return setAlertParams("threshold",parseInt(e.target.value,10))},compressed:true,append:_i18n.i18n.translate("xpack.apm.errorRateAlertTrigger.errors",{defaultMessage:"errors"})})),_react.default.createElement(_public.ForLastExpression,{onChangeWindowSize:function onChangeWindowSize(windowSize){return setAlertParams("windowSize",windowSize||"")},onChangeWindowUnit:function onChangeWindowUnit(windowUnit){return setAlertParams("windowUnit",windowUnit)},timeWindowSize:params.windowSize,timeWindowUnit:params.windowUnit,errors:{timeWindowSize:[],timeWindowUnit:[]}})];return _react.default.createElement(_ServiceAlertTrigger.ServiceAlertTrigger,{alertTypeName:_alert_types.ALERT_TYPES_CONFIG["apm.error_rate"].name,defaults:defaults,fields:fields,setAlertParams:setAlertParams,setAlertProperty:setAlertProperty})}},3964:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionDurationAlertTrigger=TransactionDurationAlertTrigger;var _react=_interopRequireDefault(__webpack_require__(0));var _lodash=__webpack_require__(3);var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _public=__webpack_require__(261);var _alert_types=__webpack_require__(435);var _ServiceAlertTrigger=__webpack_require__(1266);var _useUrlParams2=__webpack_require__(35);var _useServiceTransactionTypes=__webpack_require__(629);var _PopoverExpression=__webpack_require__(1267);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function TransactionDurationAlertTrigger(props){var _params$threshold;var setAlertParams=props.setAlertParams,alertParams=props.alertParams,setAlertProperty=props.setAlertProperty;var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var transactionTypes=(0,_useServiceTransactionTypes.useServiceTransactionTypes)(urlParams);if(!transactionTypes.length){return null}var defaults={threshold:1500,aggregationType:"avg",windowSize:5,windowUnit:"m",transactionType:transactionTypes[0]};var params=_objectSpread({},defaults,{},alertParams);var fields=[_react.default.createElement(_PopoverExpression.PopoverExpression,{value:params.transactionType,title:_i18n.i18n.translate("xpack.apm.transactionDurationAlertTrigger.type",{defaultMessage:"Type"})},_react.default.createElement(_eui.EuiSelect,{value:params.transactionType,options:transactionTypes.map((function(key){return{text:key,value:key}})),onChange:function onChange(e){return setAlertParams("transactionType",e.target.value)},compressed:true})),_react.default.createElement(_PopoverExpression.PopoverExpression,{value:params.aggregationType,title:_i18n.i18n.translate("xpack.apm.transactionDurationAlertTrigger.when",{defaultMessage:"When"})},_react.default.createElement(_eui.EuiSelect,{value:params.aggregationType,options:(0,_lodash.map)(_alert_types.TRANSACTION_ALERT_AGGREGATION_TYPES,(function(label,key){return{text:label,value:key}})),onChange:function onChange(e){return setAlertParams("aggregationType",e.target.value)},compressed:true})),_react.default.createElement(_PopoverExpression.PopoverExpression,{value:params.threshold?"".concat(params.threshold,"ms"):"",title:_i18n.i18n.translate("xpack.apm.transactionDurationAlertTrigger.isAbove",{defaultMessage:"is above"})},_react.default.createElement(_eui.EuiFieldNumber,{value:(_params$threshold=params.threshold)!==null&&_params$threshold!==void 0?_params$threshold:"",onChange:function onChange(e){return setAlertParams("threshold",e.target.value)},append:_i18n.i18n.translate("xpack.apm.transactionDurationAlertTrigger.ms",{defaultMessage:"ms"}),compressed:true})),_react.default.createElement(_public.ForLastExpression,{onChangeWindowSize:function onChangeWindowSize(timeWindowSize){return setAlertParams("windowSize",timeWindowSize||"")},onChangeWindowUnit:function onChangeWindowUnit(timeWindowUnit){return setAlertParams("windowUnit",timeWindowUnit)},timeWindowSize:params.windowSize,timeWindowUnit:params.windowUnit,errors:{timeWindowSize:[],timeWindowUnit:[]}})];return _react.default.createElement(_ServiceAlertTrigger.ServiceAlertTrigger,{alertTypeName:_alert_types.ALERT_TYPES_CONFIG["apm.transaction_duration"].name,fields:fields,defaults:defaults,setAlertParams:setAlertParams,setAlertProperty:setAlertProperty})}},3965:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MatchedRouteProvider=MatchedRouteProvider;exports.MatchedRouteContext=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _reactRouterDom=__webpack_require__(33);var _useLocation2=__webpack_require__(132);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var MatchedRouteContext=_react.default.createContext([]);exports.MatchedRouteContext=MatchedRouteContext;function MatchedRouteProvider(_ref){var children=_ref.children,routes=_ref.routes;var _useLocation=(0,_useLocation2.useLocation)(),pathname=_useLocation.pathname;var contextValue=(0,_react.useMemo)((function(){return routes.filter((function(route){return(0,_reactRouterDom.matchPath)(pathname,{path:route.path})}))}),[pathname,routes]);return _react.default.createElement(MatchedRouteContext.Provider,{value:contextValue,children:children})}},3966:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createStaticIndexPattern=void 0;var _createCallApmApi=__webpack_require__(159);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var createStaticIndexPattern=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_createCallApmApi.callApmApi)({method:"POST",pathname:"/api/apm/index_pattern/static"});case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}}),_callee)})));return function createStaticIndexPattern(){return _ref.apply(this,arguments)}}();exports.createStaticIndexPattern=createStaticIndexPattern},3967:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getConfigFromInjectedMetadata=getConfigFromInjectedMetadata;var _new_platform=__webpack_require__(9);var core=_new_platform.npStart.core;function getConfigFromInjectedMetadata(){var _core$injectedMetadat=core.injectedMetadata.getInjectedVars(),apmIndexPatternTitle=_core$injectedMetadat.apmIndexPatternTitle,apmServiceMapEnabled=_core$injectedMetadat.apmServiceMapEnabled,apmUiEnabled=_core$injectedMetadat.apmUiEnabled;return{indexPatternTitle:"".concat(apmIndexPatternTitle),serviceMapEnabled:!!apmServiceMapEnabled,ui:{enabled:!!apmUiEnabled}}}},3968:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setHelpExtension=setHelpExtension;var _url=_interopRequireDefault(__webpack_require__(84));var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function setHelpExtension(_ref){var chrome=_ref.chrome,http=_ref.http;chrome.setHelpExtension({appName:_i18n.i18n.translate("xpack.apm.feedbackMenu.appName",{defaultMessage:"APM"}),links:[{linkType:"discuss",href:"https://discuss.elastic.co/c/apm"},{linkType:"custom",href:_url.default.format({pathname:http.basePath.prepend("/app/kibana"),hash:"/management/elasticsearch/upgrade_assistant"}),content:_i18n.i18n.translate("xpack.apm.helpMenu.upgradeAssistantLink",{defaultMessage:"Upgrade assistant"})}]})}},3969:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toggleAppLinkInNav=toggleAppLinkInNav;function toggleAppLinkInNav(core,_ref){var ui=_ref.ui;if(ui.enabled===false){core.chrome.navLinks.update("apm",{hidden:true})}}},3970:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setReadonlyBadge=setReadonlyBadge;var _i18n=__webpack_require__(1);function setReadonlyBadge(_ref){var application=_ref.application,chrome=_ref.chrome;var canSave=application.capabilities.apm.save;var setBadge=chrome.setBadge;setBadge(!canSave?{text:_i18n.i18n.translate("xpack.apm.header.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:_i18n.i18n.translate("xpack.apm.header.badge.readOnly.tooltip",{defaultMessage:"Unable to save"}),iconType:"glasses"}:undefined)}},3971:function(module,exports,__webpack_require__){},3972:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div id="react-apm-root" class="apmReactRoot"></div>\n'},4:function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},40:function(module,exports){module.exports=vendors_1},4031:function(module,exports,__webpack_require__){module.exports=__webpack_require__(40)(1398)},4035:function(module,exports,__webpack_require__){module.exports=__webpack_require__(41)(1139)},4036:function(module,exports,__webpack_require__){module.exports=__webpack_require__(32)(2059)},4037:function(module,exports,__webpack_require__){module.exports=__webpack_require__(41)(1142)},4049:function(module,exports,__webpack_require__){module.exports=__webpack_require__(37)(1777)},41:function(module,exports){module.exports=vendors_0},4123:function(module,exports,__webpack_require__){module.exports=__webpack_require__(40)(1207)},42:function(module,exports){module.exports=__kbnSharedDeps__.Angular},4247:function(module,exports,__webpack_require__){module.exports=__webpack_require__(41)(1176)},435:function(module,exports,__webpack_require__){"use strict";var _ALERT_TYPES_CONFIG;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.TRANSACTION_ALERT_AGGREGATION_TYPES=exports.ALERT_TYPES_CONFIG=exports.AlertType=void 0;var _i18n=__webpack_require__(1);var AlertType;exports.AlertType=AlertType;(function(AlertType){AlertType["ErrorRate"]="apm.error_rate";AlertType["TransactionDuration"]="apm.transaction_duration"})(AlertType||(exports.AlertType=AlertType={}));var ALERT_TYPES_CONFIG=(_ALERT_TYPES_CONFIG={},_defineProperty(_ALERT_TYPES_CONFIG,AlertType.ErrorRate,{name:_i18n.i18n.translate("xpack.apm.errorRateAlert.name",{defaultMessage:"Error rate"}),actionGroups:[{id:"threshold_met",name:_i18n.i18n.translate("xpack.apm.errorRateAlert.thresholdMet",{defaultMessage:"Threshold met"})}],defaultActionGroupId:"threshold_met"}),_defineProperty(_ALERT_TYPES_CONFIG,AlertType.TransactionDuration,{name:_i18n.i18n.translate("xpack.apm.transactionDurationAlert.name",{defaultMessage:"Transaction duration"}),actionGroups:[{id:"threshold_met",name:_i18n.i18n.translate("xpack.apm.transactionDurationAlert.thresholdMet",{defaultMessage:"Threshold met"})}],defaultActionGroupId:"threshold_met"}),_ALERT_TYPES_CONFIG);exports.ALERT_TYPES_CONFIG=ALERT_TYPES_CONFIG;var TRANSACTION_ALERT_AGGREGATION_TYPES={avg:_i18n.i18n.translate("xpack.apm.transactionDurationAlert.aggregationType.avg",{defaultMessage:"Average"}),"95th":_i18n.i18n.translate("xpack.apm.transactionDurationAlert.aggregationType.95th",{defaultMessage:"95th percentile"}),"99th":_i18n.i18n.translate("xpack.apm.transactionDurationAlert.aggregationType.99th",{defaultMessage:"99th percentile"})};exports.TRANSACTION_ALERT_AGGREGATION_TYPES=TRANSACTION_ALERT_AGGREGATION_TYPES},436:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiscoverLink=DiscoverLink;exports.getDiscoverHref=void 0;var _eui=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _url=_interopRequireDefault(__webpack_require__(84));var _risonNode=_interopRequireDefault(__webpack_require__(295));var _useLocation=__webpack_require__(132);var _rison_helpers=__webpack_require__(1219);var _index_pattern_constants=__webpack_require__(3754);var _useApmPluginContext2=__webpack_require__(62);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getDiscoverHref=function getDiscoverHref(_ref){var basePath=_ref.basePath,location=_ref.location,query=_ref.query;var risonQuery={_g:(0,_rison_helpers.getTimepickerRisonData)(location.search),_a:_objectSpread({},query._a,{index:_index_pattern_constants.APM_STATIC_INDEX_PATTERN_ID})};var href=_url.default.format({pathname:basePath.prepend("/app/kibana"),hash:"/discover?_g=".concat(_risonNode.default.encode(risonQuery._g),"&_a=").concat(_risonNode.default.encode(risonQuery._a))});return href};exports.getDiscoverHref=getDiscoverHref;function DiscoverLink(_ref2){var _ref2$query=_ref2.query,query=_ref2$query===void 0?{}:_ref2$query,rest=_objectWithoutProperties(_ref2,["query"]);var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),core=_useApmPluginContext.core;var location=(0,_useLocation.useLocation)();var href=getDiscoverHref({basePath:core.http.basePath,query:query,location:location});return _react.default.createElement(_eui.EuiLink,_extends({},rest,{href:href}))}},437:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterSectionsByTerm=exports.getSectionsWithRows=void 0;var _lodash=__webpack_require__(3);var _flattenObject=__webpack_require__(1220);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getSectionsWithRows=function getSectionsWithRows(sections,apmDoc){return sections.map((function(section){var sectionData=(0,_lodash.get)(apmDoc,section.key);var filteredData=section.properties?(0,_lodash.pick)(sectionData,section.properties):sectionData;var rows=(0,_flattenObject.flattenObject)(filteredData,section.key);return _objectSpread({},section,{rows:rows})})).filter((function(_ref){var required=_ref.required,rows=_ref.rows;return required||!(0,_lodash.isEmpty)(rows)}))};exports.getSectionsWithRows=getSectionsWithRows;var filterSectionsByTerm=function filterSectionsByTerm(sections,searchTerm){if(!searchTerm){return sections}return sections.map((function(section){var _section$rows=section.rows,rows=_section$rows===void 0?[]:_section$rows;var filteredRows=rows.filter((function(_ref2){var key=_ref2.key,value=_ref2.value;var valueAsString=String(value).toLowerCase();return key.toLowerCase().includes(searchTerm)||valueAsString.includes(searchTerm)}));return _objectSpread({},section,{rows:filteredRows})})).filter((function(_ref3){var rows=_ref3.rows;return!(0,_lodash.isEmpty)(rows)}))};exports.filterSectionsByTerm=filterSectionsByTerm},438:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Stacktrace=Stacktrace;exports.getGroupedStackframes=getGroupedStackframes;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(3);var _react=_interopRequireWildcard(__webpack_require__(0));var _EmptyMessage=__webpack_require__(343);var _LibraryStacktrace=__webpack_require__(3759);var _Stackframe=__webpack_require__(1223);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function Stacktrace(_ref){var _ref$stackframes=_ref.stackframes,stackframes=_ref$stackframes===void 0?[]:_ref$stackframes,codeLanguage=_ref.codeLanguage;if((0,_lodash.isEmpty)(stackframes)){return _react.default.createElement(_EmptyMessage.EmptyMessage,{heading:_i18n.i18n.translate("xpack.apm.stacktraceTab.noStacktraceAvailableLabel",{defaultMessage:"No stack trace available."}),hideSubheading:true})}var groups=getGroupedStackframes(stackframes);return _react.default.createElement(_react.Fragment,null,groups.map((function(group,i){if(group.isLibraryFrame&&groups.length>1){return _react.default.createElement(_react.Fragment,{key:i},_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_LibraryStacktrace.LibraryStacktrace,{id:i.toString(),stackframes:group.stackframes,codeLanguage:codeLanguage}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}))}return group.stackframes.map((function(stackframe,idx){return _react.default.createElement(_react.Fragment,{key:"".concat(i,"-").concat(idx)},idx>0&&_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_Stackframe.Stackframe,{codeLanguage:codeLanguage,id:"".concat(i,"-").concat(idx),initialIsOpen:i===0&&groups.length>1,stackframe:stackframe}))}))})),_react.default.createElement(_eui.EuiSpacer,{size:"m"}))}function getGroupedStackframes(stackframes){return stackframes.reduce((function(acc,stackframe){var prevGroup=(0,_lodash.last)(acc);var shouldAppend=prevGroup&&prevGroup.isLibraryFrame===stackframe.library_frame&&!prevGroup.excludeFromGrouping&&!stackframe.exclude_from_grouping;if(shouldAppend){prevGroup.stackframes.push(stackframe);return acc}acc.push({isLibraryFrame:Boolean(stackframe.library_frame),excludeFromGrouping:Boolean(stackframe.exclude_from_grouping),stackframes:[stackframe]});return acc}),[])}},439:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionOverviewLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _APMLink=__webpack_require__(83);var _useUrlParams2=__webpack_require__(35);var _pickKeys=__webpack_require__(161);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var TransactionOverviewLink=function TransactionOverviewLink(_ref){var serviceName=_ref.serviceName,rest=_objectWithoutProperties(_ref,["serviceName"]);var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var persistedFilters=(0,_pickKeys.pickKeys)(urlParams,"transactionResult","host","containerId","podName","serviceVersion");return _react.default.createElement(_APMLink.APMLink,_extends({path:"/services/".concat(serviceName,"/transactions"),query:persistedFilters},rest))};exports.TransactionOverviewLink=TransactionOverviewLink},440:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LicenseProvider=LicenseProvider;exports.LicenseContext=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactUse=__webpack_require__(397);var _useApmPluginContext=__webpack_require__(62);var _InvalidLicenseNotification=__webpack_require__(3792);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LicenseContext=_react.default.createContext(undefined);exports.LicenseContext=LicenseContext;function LicenseProvider(_ref){var children=_ref.children;var license$=(0,_useApmPluginContext.useApmPluginContext)().plugins.licensing.license$;var license=(0,_reactUse.useObservable)(license$);var hasInvalidLicense=(license===null||license===void 0?void 0:license.isActive)===false;if(hasInvalidLicense){return _react.default.createElement(_InvalidLicenseNotification.InvalidLicenseNotification,null)}return _react.default.createElement(LicenseContext.Provider,{value:license,children:children})}},441:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Cytoscape=Cytoscape;exports.CytoscapeContext=void 0;var _cytoscape=_interopRequireDefault(__webpack_require__(4123));var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(3);var _cytoscapeOptions=__webpack_require__(442);var _public=__webpack_require__(78);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var CytoscapeContext=(0,_react.createContext)(undefined);exports.CytoscapeContext=CytoscapeContext;function useCytoscape(options){var _useState=(0,_react.useState)(undefined),_useState2=_slicedToArray(_useState,2),cy=_useState2[0],setCy=_useState2[1];var ref=(0,_react.useRef)(null);(0,_react.useEffect)((function(){if(!cy){setCy((0,_cytoscape.default)(_objectSpread({},options,{container:ref.current})))}}),[options,cy]);(0,_react.useEffect)((function(){return function(){if(cy){cy.destroy()}}}),[cy]);return[ref,cy]}function rotatePoint(_ref,degreesRotated){var x=_ref.x,y=_ref.y;var radiansPerDegree=Math.PI/180;var θ=radiansPerDegree*degreesRotated;var cosθ=Math.cos(θ);var sinθ=Math.sin(θ);return{x:x*cosθ-y*sinθ,y:x*sinθ+y*cosθ}}function getLayoutOptions(selectedRoots,height,width){return{name:"breadthfirst",roots:selectedRoots.length?selectedRoots:undefined,fit:true,padding:_cytoscapeOptions.nodeHeight,spacingFactor:.85,animate:true,animationEasing:_cytoscapeOptions.animationOptions.easing,animationDuration:_cytoscapeOptions.animationOptions.duration,transform:function transform(node,pos){return rotatePoint(pos,-95)},boundingBox:{x1:0,y1:0,w:height,h:width}}}function selectRoots(cy){var bfs=cy.elements().bfs({roots:cy.elements().leaves()});var furthestNodeFromLeaves=bfs.path.last();return cy.elements().roots().union(furthestNodeFromLeaves).map((function(el){return el.id()}))}function Cytoscape(_ref2){var children=_ref2.children,elements=_ref2.elements,height=_ref2.height,width=_ref2.width,serviceName=_ref2.serviceName,style=_ref2.style;var _useCytoscape=useCytoscape(_objectSpread({},_cytoscapeOptions.cytoscapeOptions,{elements:elements})),_useCytoscape2=_slicedToArray(_useCytoscape,2),ref=_useCytoscape2[0],cy=_useCytoscape2[1];var divStyle=_objectSpread({},style,{height:height});var trackApmEvent=(0,_public.useUiTracker)({app:"apm"});(0,_react.useEffect)((function(){if(cy&&elements.length>0){var renderedElements=cy.elements("node,edge");var latestElementIds=elements.map((function(el){return el.data.id}));var absentElements=renderedElements.filter((function(el){return!latestElementIds.includes(el.id())}));cy.remove(absentElements);cy.add(elements);cy.trigger("data")}}),[cy,elements]);(0,_react.useEffect)((function(){var resetConnectedEdgeStyle=function resetConnectedEdgeStyle(node){if(cy){cy.edges().removeClass("highlight");if(node){node.connectedEdges().addClass("highlight")}}};var dataHandler=function dataHandler(event){if(cy){if(serviceName){resetConnectedEdgeStyle(cy.getElementById(serviceName));if(cy.nodes().length>0){cy.nodes().removeClass("primary");cy.getElementById(serviceName).addClass("primary")}}else{resetConnectedEdgeStyle()}var selectedRoots=selectRoots(event.cy);var layout=cy.layout(getLayoutOptions(selectedRoots,height,width));layout.run()}};var layoutstopDelayTimeout;var layoutstopHandler=function layoutstopHandler(event){layoutstopDelayTimeout=setTimeout((function(){if(serviceName){event.cy.animate(_objectSpread({},_cytoscapeOptions.animationOptions,{fit:{eles:event.cy.elements(),padding:_cytoscapeOptions.nodeHeight},center:{eles:event.cy.getElementById(serviceName)}}))}else{event.cy.fit(undefined,_cytoscapeOptions.nodeHeight)}}),0)};var trackNodeEdgeHover=(0,_lodash.debounce)((function(){return trackApmEvent({metric:"service_map_node_or_edge_hover"})}),1e3);var mouseoverHandler=function mouseoverHandler(event){trackNodeEdgeHover();event.target.addClass("hover");event.target.connectedEdges().addClass("nodeHover")};var mouseoutHandler=function mouseoutHandler(event){event.target.removeClass("hover");event.target.connectedEdges().removeClass("nodeHover")};var selectHandler=function selectHandler(event){trackApmEvent({metric:"service_map_node_select"});resetConnectedEdgeStyle(event.target)};var unselectHandler=function unselectHandler(event){resetConnectedEdgeStyle()};var debugHandler=function debugHandler(event){var debugEnabled=sessionStorage.getItem("apm_debug")==="true";if(debugEnabled){console.debug("cytoscape:",event)}};if(cy){cy.on("data layoutstop select unselect",debugHandler);cy.on("data",dataHandler);cy.on("layoutstop",layoutstopHandler);cy.on("mouseover","edge, node",mouseoverHandler);cy.on("mouseout","edge, node",mouseoutHandler);cy.on("select","node",selectHandler);cy.on("unselect","node",unselectHandler)}return function(){if(cy){cy.removeListener("data layoutstop select unselect",undefined,debugHandler);cy.removeListener("data",undefined,dataHandler);cy.removeListener("layoutstop",undefined,layoutstopHandler);cy.removeListener("mouseover","edge, node",mouseoverHandler);cy.removeListener("mouseout","edge, node",mouseoutHandler);cy.removeListener("select","node",selectHandler);cy.removeListener("unselect","node",unselectHandler)}clearTimeout(layoutstopDelayTimeout)}}),[cy,height,serviceName,trackApmEvent,width]);return _react.default.createElement(CytoscapeContext.Provider,{value:cy},_react.default.createElement("div",{ref:ref,style:divStyle},children))}},442:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.cytoscapeOptions=exports.cytoscapeDivStyle=exports.nodeHeight=exports.animationOptions=void 0;var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _elasticsearch_fieldnames=__webpack_require__(81);var _icons=__webpack_require__(3797);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var isIE11=!!window.MSInputMethodContext&&!!document.documentMode;var animationOptions={duration:parseInt(_eui_theme_light.default.euiAnimSpeedNormal,10),easing:_eui_theme_light.default.euiAnimSlightBounce};exports.animationOptions=animationOptions;var lineColor="#C5CCD7";var zIndexNode=200;var zIndexEdge=100;var zIndexEdgeHighlight=110;var zIndexEdgeHover=120;var nodeHeight=parseInt(_eui_theme_light.default.avatarSizing.l.size,10);exports.nodeHeight=nodeHeight;function isService(el){return el.data(_elasticsearch_fieldnames.SERVICE_NAME)!==undefined}var style=[{selector:"node",style:{"background-color":"white","background-image":isIE11?undefined:function(el){var _iconForNode;return(_iconForNode=(0,_icons.iconForNode)(el))!==null&&_iconForNode!==void 0?_iconForNode:_icons.defaultIcon},"background-height":function backgroundHeight(el){return isService(el)?"60%":"40%"},"background-width":function backgroundWidth(el){return isService(el)?"60%":"40%"},"border-color":function borderColor(el){return el.hasClass("primary")||el.selected()?_eui_theme_light.default.euiColorPrimary:_eui_theme_light.default.euiColorMediumShade},"border-width":2,color:_eui_theme_light.default.textColors.default,"font-family":"Inter UI, Segoe UI, Helvetica, Arial, sans-serif","font-size":_eui_theme_light.default.euiFontSizeXS,ghost:"yes","ghost-offset-x":0,"ghost-offset-y":2,"ghost-opacity":.15,height:nodeHeight,label:function label(el){return isService(el)?el.data(_elasticsearch_fieldnames.SERVICE_NAME):el.data(_elasticsearch_fieldnames.SPAN_DESTINATION_SERVICE_RESOURCE)},"min-zoomed-font-size":parseInt(_eui_theme_light.default.euiSizeL,10),"overlay-opacity":0,shape:function shape(el){return isService(el)?isIE11?"rectangle":"ellipse":"diamond"},"text-background-color":_eui_theme_light.default.euiColorLightestShade,"text-background-opacity":0,"text-background-padding":_eui_theme_light.default.paddingSizes.xs,"text-background-shape":"roundrectangle","text-margin-y":parseInt(_eui_theme_light.default.paddingSizes.s,10),"text-max-width":"200px","text-valign":"bottom","text-wrap":"ellipsis",width:_eui_theme_light.default.avatarSizing.l.size,"z-index":zIndexNode}},{selector:"edge",style:{"curve-style":"taxi","taxi-direction":"auto","line-color":lineColor,"overlay-opacity":0,"target-arrow-color":lineColor,"target-arrow-shape":isIE11?"none":"triangle","target-distance-from-node":isIE11?undefined:_eui_theme_light.default.paddingSizes.xs,width:1,"source-arrow-shape":"none","z-index":zIndexEdge}},{selector:"edge[bidirectional]",style:{"source-arrow-shape":isIE11?"none":"triangle","source-arrow-color":lineColor,"target-arrow-shape":isIE11?"none":"triangle","source-distance-from-node":isIE11?undefined:parseInt(_eui_theme_light.default.paddingSizes.xs,10),"target-distance-from-node":isIE11?undefined:parseInt(_eui_theme_light.default.paddingSizes.xs,10)}},{selector:"edge[isInverseEdge]",style:{visibility:"hidden"}},{selector:"edge.nodeHover",style:{width:2,"z-index":zIndexEdgeHover,"line-color":_eui_theme_light.default.euiColorDarkShade,"source-arrow-color":_eui_theme_light.default.euiColorDarkShade,"target-arrow-color":_eui_theme_light.default.euiColorDarkShade}},{selector:"node.hover",style:{"border-width":2}},{selector:"edge.highlight",style:{width:2,"line-color":_eui_theme_light.default.euiColorPrimary,"source-arrow-color":_eui_theme_light.default.euiColorPrimary,"target-arrow-color":_eui_theme_light.default.euiColorPrimary,"z-index":zIndexEdgeHighlight}}];var cytoscapeDivStyle={background:"linear-gradient(\n  90deg,\n  ".concat(_eui_theme_light.default.euiPageBackgroundColor,"\n    calc(").concat(_eui_theme_light.default.euiSizeL," - calc(").concat(_eui_theme_light.default.euiSizeXS," / 2)),\n  transparent 1%\n)\ncenter,\nlinear-gradient(\n  ").concat(_eui_theme_light.default.euiPageBackgroundColor,"\n    calc(").concat(_eui_theme_light.default.euiSizeL," - calc(").concat(_eui_theme_light.default.euiSizeXS," / 2)),\n  transparent 1%\n)\ncenter,\n").concat(_eui_theme_light.default.euiColorLightShade),backgroundSize:"".concat(_eui_theme_light.default.euiSizeL," ").concat(_eui_theme_light.default.euiSizeL),margin:"-".concat(_eui_theme_light.default.gutterTypes.gutterLarge),marginTop:0};exports.cytoscapeDivStyle=cytoscapeDivStyle;var cytoscapeOptions={autoungrabify:true,boxSelectionEnabled:false,maxZoom:3,minZoom:.2,style:style};exports.cytoscapeOptions=cytoscapeOptions},4510:function(module,exports,__webpack_require__){module.exports=__webpack_require__(41)(1175)},4705:function(module,exports,__webpack_require__){module.exports=__webpack_require__(32)(2245)},473:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InfraWaffleMapDataFormat=exports.InfraFormatterType=exports.InfraWaffleMapRuleOperator=exports.InfraWaffleMapLegendMode=void 0;var InfraWaffleMapLegendMode;exports.InfraWaffleMapLegendMode=InfraWaffleMapLegendMode;(function(InfraWaffleMapLegendMode){InfraWaffleMapLegendMode["step"]="step";InfraWaffleMapLegendMode["gradient"]="gradient"})(InfraWaffleMapLegendMode||(exports.InfraWaffleMapLegendMode=InfraWaffleMapLegendMode={}));var InfraWaffleMapRuleOperator;exports.InfraWaffleMapRuleOperator=InfraWaffleMapRuleOperator;(function(InfraWaffleMapRuleOperator){InfraWaffleMapRuleOperator["gt"]="gt";InfraWaffleMapRuleOperator["gte"]="gte";InfraWaffleMapRuleOperator["lt"]="lt";InfraWaffleMapRuleOperator["lte"]="lte";InfraWaffleMapRuleOperator["eq"]="eq"})(InfraWaffleMapRuleOperator||(exports.InfraWaffleMapRuleOperator=InfraWaffleMapRuleOperator={}));var InfraFormatterType;exports.InfraFormatterType=InfraFormatterType;(function(InfraFormatterType){InfraFormatterType["number"]="number";InfraFormatterType["abbreviatedNumber"]="abbreviatedNumber";InfraFormatterType["bytes"]="bytes";InfraFormatterType["bits"]="bits";InfraFormatterType["percent"]="percent"})(InfraFormatterType||(exports.InfraFormatterType=InfraFormatterType={}));var InfraWaffleMapDataFormat;exports.InfraWaffleMapDataFormat=InfraWaffleMapDataFormat;(function(InfraWaffleMapDataFormat){InfraWaffleMapDataFormat["bytesDecimal"]="bytesDecimal";InfraWaffleMapDataFormat["bitsDecimal"]="bitsDecimal";InfraWaffleMapDataFormat["abbreviatedNumber"]="abbreviatedNumber"})(InfraWaffleMapDataFormat||(exports.InfraWaffleMapDataFormat=InfraWaffleMapDataFormat={}))},48:function(module,exports){module.exports=__kbnSharedDeps__.ElasticCharts},557:function(module,exports,__webpack_require__){module.exports=__webpack_require__(40)(1378)},610:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.LoadingIndicatorProvider=LoadingIndicatorProvider;exports.LoadingIndicatorContext=void 0;var _eui=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _useDelayedVisibility=__webpack_require__(3733);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key)}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var LoadingIndicatorContext=_react.default.createContext({statuses:{},dispatchStatus:function dispatchStatus(action){return undefined}});exports.LoadingIndicatorContext=LoadingIndicatorContext;function reducer(statuses,action){if(action.isLoading){return _objectSpread({},statuses,_defineProperty({},action.id,true))}var _action$id=action.id,statusToRemove=statuses[_action$id],restStatuses=_objectWithoutProperties(statuses,[_action$id].map(_toPropertyKey));return restStatuses}function getIsAnyLoading(statuses){return Object.values(statuses).some((function(isLoading){return isLoading}))}function LoadingIndicatorProvider(_ref){var children=_ref.children;var _useReducer=(0,_react.useReducer)(reducer,{}),_useReducer2=_slicedToArray(_useReducer,2),statuses=_useReducer2[0],dispatchStatus=_useReducer2[1];var isLoading=(0,_react.useMemo)((function(){return getIsAnyLoading(statuses)}),[statuses]);var shouldShowLoadingIndicator=(0,_useDelayedVisibility.useDelayedVisibility)(isLoading);var contextValue=_react.default.useMemo((function(){return{statuses:statuses,dispatchStatus:dispatchStatus}}),[statuses]);return _react.default.createElement(_react.Fragment,null,shouldShowLoadingIndicator&&_react.default.createElement(_eui.EuiPortal,null,_react.default.createElement(_eui.EuiProgress,{size:"xs",position:"fixed"})),_react.default.createElement(LoadingIndicatorContext.Provider,{value:contextValue,children:children}))}},611:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SetupInstructionsLink=SetupInstructionsLink;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _KibanaLink=__webpack_require__(612);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SETUP_INSTRUCTIONS_LABEL=_i18n.i18n.translate("xpack.apm.setupInstructionsButtonLabel",{defaultMessage:"Setup Instructions"});function SetupInstructionsLink(_ref){var _ref$buttonFill=_ref.buttonFill,buttonFill=_ref$buttonFill===void 0?false:_ref$buttonFill;return _react.default.createElement(_KibanaLink.KibanaLink,{path:"/home/tutorial/apm"},buttonFill?_react.default.createElement(_eui.EuiButton,{size:"s",color:"primary",fill:buttonFill,iconType:"help"},SETUP_INSTRUCTIONS_LABEL):_react.default.createElement(_eui.EuiButtonEmpty,{size:"s",color:"primary",iconType:"help"},SETUP_INSTRUCTIONS_LABEL))}},612:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KibanaLink=KibanaLink;var _eui=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _url=_interopRequireDefault(__webpack_require__(84));var _useApmPluginContext2=__webpack_require__(62);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function KibanaLink(_ref){var path=_ref.path,rest=_objectWithoutProperties(_ref,["path"]);var _useApmPluginContext=(0,_useApmPluginContext2.useApmPluginContext)(),core=_useApmPluginContext.core;var href=_url.default.format({pathname:core.http.basePath.prepend("/app/kibana"),hash:path});return _react.default.createElement(_eui.EuiLink,_extends({},rest,{href:href}))}},613:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SERVICE_NODE_NAME_MISSING=void 0;var SERVICE_NODE_NAME_MISSING="_service_node_name_missing_";exports.SERVICE_NODE_NAME_MISSING=SERVICE_NODE_NAME_MISSING},614:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getParsedDate=getParsedDate;exports.getStart=getStart;exports.getEnd=getEnd;exports.toNumber=toNumber;exports.toString=toString;exports.toBoolean=toBoolean;exports.getPathAsArray=getPathAsArray;exports.removeUndefinedProps=removeUndefinedProps;exports.getPathParams=getPathParams;var _lodash=__webpack_require__(3);var _datemath=_interopRequireDefault(__webpack_require__(117));var _processor_event=__webpack_require__(3746);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getParsedDate(rawDate){var opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(rawDate){var parsed=_datemath.default.parse(rawDate,opts);if(parsed){return parsed.toISOString()}}}function getStart(prevState,rangeFrom){if(prevState.rangeFrom!==rangeFrom){return getParsedDate(rangeFrom)}return prevState.start}function getEnd(prevState,rangeTo){if(prevState.rangeTo!==rangeTo){return getParsedDate(rangeTo,{roundUp:true})}return prevState.end}function toNumber(value){if(value!==undefined){return parseInt(value,10)}}function toString(value){if(value===""||value==="null"||value==="undefined"){return}return value}function toBoolean(value){return value==="true"}function getPathAsArray(){var pathname=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return(0,_lodash.compact)(pathname.split("/"))}function removeUndefinedProps(obj){return(0,_lodash.pick)(obj,(function(value){return value!==undefined}))}function getPathParams(){var pathname=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var paths=getPathAsArray(pathname);var pageName=paths[0];switch(pageName){case"services":var servicePageName=paths[2];var serviceName=paths[1];var serviceNodeName=paths[3];if(servicePageName==="nodes"&&paths.length>3){servicePageName="metrics"}switch(servicePageName){case"transactions":return{processorEvent:_processor_event.ProcessorEvent.transaction,serviceName:serviceName};case"errors":return{processorEvent:_processor_event.ProcessorEvent.error,serviceName:serviceName,errorGroupId:paths[3]};case"metrics":return{processorEvent:_processor_event.ProcessorEvent.metric,serviceName:serviceName,serviceNodeName:serviceNodeName};case"nodes":return{processorEvent:_processor_event.ProcessorEvent.metric,serviceName:serviceName};case"service-map":return{serviceName:serviceName};default:return{}}case"traces":return{processorEvent:_processor_event.ProcessorEvent.transaction};case"link-to":var link=paths[1];switch(link){case"trace":return{traceId:paths[2]};default:return{}}default:return{}}}},615:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TIMEPICKER_DEFAULTS=exports.LOCATION_UPDATE=exports.TIME_RANGE_REFRESH=void 0;var TIME_RANGE_REFRESH="TIME_RANGE_REFRESH";exports.TIME_RANGE_REFRESH=TIME_RANGE_REFRESH;var LOCATION_UPDATE="LOCATION_UPDATE";exports.LOCATION_UPDATE=LOCATION_UPDATE;var TIMEPICKER_DEFAULTS={rangeFrom:"now-24h",rangeTo:"now",refreshPaused:"true",refreshInterval:"0"};exports.TIMEPICKER_DEFAULTS=TIMEPICKER_DEFAULTS},616:function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.localUIFilters=exports.localUIFilterNames=void 0;var _i18n=__webpack_require__(1);var _elasticsearch_fieldnames=__webpack_require__(81);var filtersByName={host:{title:_i18n.i18n.translate("xpack.apm.localFilters.titles.host",{defaultMessage:"Host"}),fieldName:_elasticsearch_fieldnames.HOST_NAME},agentName:{title:_i18n.i18n.translate("xpack.apm.localFilters.titles.agentName",{defaultMessage:"Agent name"}),fieldName:_elasticsearch_fieldnames.AGENT_NAME},containerId:{title:_i18n.i18n.translate("xpack.apm.localFilters.titles.containerId",{defaultMessage:"Container ID"}),fieldName:_elasticsearch_fieldnames.CONTAINER_ID},podName:{title:_i18n.i18n.translate("xpack.apm.localFilters.titles.podName",{defaultMessage:"Kubernetes pod"}),fieldName:_elasticsearch_fieldnames.POD_NAME},transactionResult:{title:_i18n.i18n.translate("xpack.apm.localFilters.titles.transactionResult",{defaultMessage:"Transaction result"}),fieldName:_elasticsearch_fieldnames.TRANSACTION_RESULT},serviceVersion:{title:_i18n.i18n.translate("xpack.apm.localFilters.titles.serviceVersion",{defaultMessage:"Service version"}),fieldName:_elasticsearch_fieldnames.SERVICE_VERSION}};var localUIFilterNames=Object.keys(filtersByName);exports.localUIFilterNames=localUIFilterNames;var localUIFilters=localUIFilterNames.reduce((function(acc,key){var field=filtersByName[key];return _objectSpread({},acc,_defineProperty({},key,_objectSpread({},field,{name:key})))}),{});exports.localUIFilters=localUIFilters},617:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MESSAGE_SPAN=exports.MESSAGE_TRANSACTION=exports.CUSTOM_TRANSACTION=exports.CUSTOM_ERROR=exports.ERROR=exports.TRACE=exports.TRANSACTION=exports.SPAN=exports.PAGE=exports.USER_AGENT=exports.USER=exports.URL=exports.AGENT=exports.PROCESS=exports.SERVICE=exports.CONTAINER=exports.CLIENT=exports.HOST=exports.HTTP=exports.LABELS=void 0;var _i18n=__webpack_require__(1);var LABELS={key:"labels",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.labelsLabel",{defaultMessage:"Labels"})};exports.LABELS=LABELS;var HTTP={key:"http",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.httpLabel",{defaultMessage:"HTTP"})};exports.HTTP=HTTP;var HOST={key:"host",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.hostLabel",{defaultMessage:"Host"})};exports.HOST=HOST;var CLIENT={key:"client",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.clientLabel",{defaultMessage:"Client"}),properties:["ip"]};exports.CLIENT=CLIENT;var CONTAINER={key:"container",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.containerLabel",{defaultMessage:"Container"})};exports.CONTAINER=CONTAINER;var SERVICE={key:"service",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.serviceLabel",{defaultMessage:"Service"})};exports.SERVICE=SERVICE;var PROCESS={key:"process",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.processLabel",{defaultMessage:"Process"})};exports.PROCESS=PROCESS;var AGENT={key:"agent",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.agentLabel",{defaultMessage:"Agent"})};exports.AGENT=AGENT;var URL={key:"url",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.urlLabel",{defaultMessage:"URL"})};exports.URL=URL;var USER={key:"user",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.userLabel",{defaultMessage:"User"})};exports.USER=USER;var USER_AGENT={key:"user_agent",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.userAgentLabel",{defaultMessage:"User agent"})};exports.USER_AGENT=USER_AGENT;var PAGE={key:"page",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.pageLabel",{defaultMessage:"Page"})};exports.PAGE=PAGE;var SPAN={key:"span",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.spanLabel",{defaultMessage:"Span"}),properties:["id"]};exports.SPAN=SPAN;var TRANSACTION={key:"transaction",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.transactionLabel",{defaultMessage:"Transaction"}),properties:["id"]};exports.TRANSACTION=TRANSACTION;var TRACE={key:"trace",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.traceLabel",{defaultMessage:"Trace"})};exports.TRACE=TRACE;var ERROR={key:"error",label:_i18n.i18n.translate("xpack.apm.metadataTable.section.errorLabel",{defaultMessage:"Error"}),properties:["id"]};exports.ERROR=ERROR;var customLabel=_i18n.i18n.translate("xpack.apm.metadataTable.section.customLabel",{defaultMessage:"Custom"});var CUSTOM_ERROR={key:"error.custom",label:customLabel};exports.CUSTOM_ERROR=CUSTOM_ERROR;var CUSTOM_TRANSACTION={key:"transaction.custom",label:customLabel};exports.CUSTOM_TRANSACTION=CUSTOM_TRANSACTION;var messageLabel=_i18n.i18n.translate("xpack.apm.metadataTable.section.messageLabel",{defaultMessage:"Message"});var MESSAGE_TRANSACTION={key:"transaction.message",label:messageLabel};exports.MESSAGE_TRANSACTION=MESSAGE_TRANSACTION;var MESSAGE_SPAN={key:"span.message",label:messageLabel};exports.MESSAGE_SPAN=MESSAGE_SPAN},618:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetadataTable=MetadataTable;var _eui=__webpack_require__(2);var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(3);var _ElasticDocsLink=__webpack_require__(238);var _HeightRetainer=__webpack_require__(1221);var _Section=__webpack_require__(3757);var _history=__webpack_require__(82);var _url_helpers=__webpack_require__(71);var _useLocation=__webpack_require__(132);var _useUrlParams2=__webpack_require__(35);var _helper=__webpack_require__(437);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function MetadataTable(_ref){var sections=_ref.sections;var location=(0,_useLocation.useLocation)();var _useUrlParams=(0,_useUrlParams2.useUrlParams)(),urlParams=_useUrlParams.urlParams;var _urlParams$searchTerm=urlParams.searchTerm,searchTerm=_urlParams$searchTerm===void 0?"":_urlParams$searchTerm;var filteredSections=(0,_helper.filterSectionsByTerm)(sections,searchTerm);var onSearchChange=(0,_react.useCallback)((function(e){var value=e.target.value.trim().toLowerCase();_history.history.replace(_objectSpread({},location,{search:(0,_url_helpers.fromQuery)(_objectSpread({},(0,_url_helpers.toQuery)(location.search),{searchTerm:value}))}))}),[location]);var noResultFound=Boolean(searchTerm)&&(0,_lodash.isEmpty)(filteredSections);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_ElasticDocsLink.ElasticDocsLink,{section:"/apm/get-started",path:"/metadata.html"},_react.default.createElement(_eui.EuiText,{size:"s"},_react.default.createElement(_eui.EuiIcon,{type:"help"})," How to add labels and other data"))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFieldSearch,{onChange:onSearchChange,placeholder:_i18n.i18n.translate("xpack.apm.searchInput.filter",{defaultMessage:"Filter..."}),style:{width:400},isInvalid:noResultFound,value:searchTerm}))),_react.default.createElement(_HeightRetainer.HeightRetainer,null,filteredSections.map((function(section){return _react.default.createElement("div",{key:section.key},_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h6",null,section.label)),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_Section.Section,{keyValuePairs:section.rows}),_react.default.createElement(_eui.EuiSpacer,{size:"xl"}))})),noResultFound&&_react.default.createElement(NoResultFound,{value:searchTerm})))}var NoResultFound=function NoResultFound(_ref2){var value=_ref2.value;return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceAround"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{size:"s"},_i18n.i18n.translate("xpack.apm.propertiesTable.agentFeature.noResultFound",{defaultMessage:'No results for "{value}".',values:{value:value}}))))}},619:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Summary=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _eui_theme_light=_interopRequireDefault(__webpack_require__(21));var _variables=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var theme=_eui_theme_light.default;var Item=(0,_styledComponents.default)(_eui.EuiFlexItem).withConfig({displayName:"Item",componentId:"sc-11nr6pd-0"})(["flex-wrap:nowrap;border-right:1px solid ",";padding-right:",";flex-flow:row nowrap;line-height:1.5;align-items:center !important;&:last-child{border-right:none;padding-right:0;}"],theme.euiColorLightShade,(0,_variables.px)(_variables.units.half));var Summary=function Summary(_ref){var items=_ref.items;var filteredItems=items.filter(Boolean);return _react.default.createElement(_eui.EuiFlexGrid,{gutterSize:"s"},filteredItems.map((function(item,index){return _react.default.createElement(Item,{key:index,grow:false},item)})))};exports.Summary=Summary},62:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useApmPluginContext=useApmPluginContext;var _react=__webpack_require__(0);var _ApmPluginContext=__webpack_require__(340);function useApmPluginContext(){return(0,_react.useContext)(_ApmPluginContext.ApmPluginContext)}},620:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.asDecimal=asDecimal;exports.asInteger=asInteger;exports.tpmUnit=tpmUnit;exports.asPercent=asPercent;var _numeral=_interopRequireDefault(__webpack_require__(164));var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asDecimal(value){return(0,_numeral.default)(value).format("0,0.0")}function asInteger(value){return(0,_numeral.default)(value).format("0,0")}function tpmUnit(type){return type==="request"?_i18n.i18n.translate("xpack.apm.formatters.requestsPerMinLabel",{defaultMessage:"rpm"}):_i18n.i18n.translate("xpack.apm.formatters.transactionsPerMinLabel",{defaultMessage:"tpm"})}function asPercent(numerator,denominator){var fallbackResult=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";if(!denominator||isNaN(numerator)){return fallbackResult}var decimal=numerator/denominator;return(0,_numeral.default)(decimal).format("0.0%")}},621:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HttpInfoSummaryItem=HttpInfoSummaryItem;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _variables=__webpack_require__(26);var _HttpStatusBadge=__webpack_require__(3770);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var HttpInfoBadge=(0,_styledComponents.default)(_eui.EuiBadge).withConfig({displayName:"HttpInfoBadge",componentId:"zm7v59-0"})(["margin-right:",";"],(0,_variables.px)(_variables.units.quarter));var Url=(0,_styledComponents.default)("span").withConfig({displayName:"Url",componentId:"zm7v59-1"})(["display:inline-block;vertical-align:bottom;",";"],(0,_variables.truncate)((0,_variables.px)(_variables.unit*24)));var Span=(0,_styledComponents.default)("span").withConfig({displayName:"Span",componentId:"zm7v59-2"})(["white-space:nowrap;"]);function HttpInfoSummaryItem(_ref){var status=_ref.status,method=_ref.method,url=_ref.url;if(!url){return null}var methodLabel=_i18n.i18n.translate("xpack.apm.transactionDetails.requestMethodLabel",{defaultMessage:"Request method"});return _react.default.createElement(Span,null,_react.default.createElement(HttpInfoBadge,{title:undefined},method&&_react.default.createElement(_eui.EuiToolTip,{content:methodLabel},_react.default.createElement(_react.default.Fragment,null,method.toUpperCase()))," ",_react.default.createElement(_eui.EuiToolTip,{content:url},_react.default.createElement(Url,null,url))),status&&_react.default.createElement(_HttpStatusBadge.HttpStatusBadge,{status:status}))}},622:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTimezoneOffsetInMs=getTimezoneOffsetInMs;var _momentTimezone=_interopRequireDefault(__webpack_require__(39));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getTimezoneOffsetInMs(time){var zone=_momentTimezone.default.defaultZone?_momentTimezone.default.defaultZone.name:_momentTimezone.default.tz.guess();return _momentTimezone.default.tz.zone(zone).parse(time)*6e4}},623:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useLicense=useLicense;var _react=__webpack_require__(0);var _LicenseContext=__webpack_require__(440);function useLicense(){return(0,_react.useContext)(_LicenseContext.LicenseContext)}},624:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getResponseTimeTickFormatter=getResponseTimeTickFormatter;exports.getResponseTimeTooltipFormatter=getResponseTimeTooltipFormatter;exports.getMaxY=getMaxY;exports.TransactionCharts=void 0;var _eui=__webpack_require__(2);var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=__webpack_require__(3);var _styledComponents=_interopRequireDefault(__webpack_require__(12));var _i18n2=__webpack_require__(160);var _formatters=__webpack_require__(72);var _MLJobLink=__webpack_require__(625);var _LicenseContext=__webpack_require__(440);var _TransactionLineChart=__webpack_require__(626);var _isValidCoordinateValue=__webpack_require__(347);var _BrowserLineChart=__webpack_require__(3834);var _DurationByCountryMap=__webpack_require__(3837);var _transaction_types=__webpack_require__(3842);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var ShiftedIconWrapper=_styledComponents.default.span.withConfig({displayName:"ShiftedIconWrapper",componentId:"afb4wy-0"})(["padding-right:5px;position:relative;top:-1px;display:inline-block;"]);var ShiftedEuiText=(0,_styledComponents.default)(_eui.EuiText).withConfig({displayName:"ShiftedEuiText",componentId:"afb4wy-1"})(["position:relative;top:5px;"]);function getResponseTimeTickFormatter(formatter){return function(t){return formatter(t).formatted}}function getResponseTimeTooltipFormatter(formatter){return function(p){return(0,_isValidCoordinateValue.isValidCoordinateValue)(p.y)?formatter(p.y).formatted:_i18n2.NOT_AVAILABLE_LABEL}}function getMaxY(responseTimeSeries){var coordinates=(0,_lodash.flatten)(responseTimeSeries.map((function(serie){return serie.data})));var numbers=coordinates.map((function(c){return c.y?c.y:0}));return Math.max.apply(Math,_toConsumableArray(numbers).concat([0]))}var TransactionCharts=function(_Component){_inherits(TransactionCharts,_Component);function TransactionCharts(){var _getPrototypeOf2;var _this;_classCallCheck(this,TransactionCharts);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TransactionCharts)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"getTPMFormatter",(function(t){var urlParams=_this.props.urlParams;var unit=(0,_formatters.tpmUnit)(urlParams.transactionType);return"".concat((0,_formatters.asInteger)(t)," ").concat(unit)}));_defineProperty(_assertThisInitialized(_this),"getTPMTooltipFormatter",(function(p){return(0,_isValidCoordinateValue.isValidCoordinateValue)(p.y)?_this.getTPMFormatter(p.y):_i18n2.NOT_AVAILABLE_LABEL}));return _this}_createClass(TransactionCharts,[{key:"renderMLHeader",value:function renderMLHeader(hasValidMlLicense){var hasMLJob=this.props.hasMLJob;if(!hasValidMlLicense||!hasMLJob){return null}var _this$props$urlParams=this.props.urlParams,serviceName=_this$props$urlParams.serviceName,transactionType=_this$props$urlParams.transactionType,kuery=_this$props$urlParams.kuery;if(!serviceName){return null}var hasKuery=!(0,_lodash.isEmpty)(kuery);var icon=hasKuery?_react.default.createElement(_eui.EuiIconTip,{"aria-label":"Warning",type:"alert",color:"warning",content:"The Machine learning results are hidden when the search bar is used for filtering"}):_react.default.createElement(_eui.EuiIconTip,{content:_i18n.i18n.translate("xpack.apm.metrics.transactionChart.machineLearningTooltip",{defaultMessage:"The stream around the average duration shows the expected bounds. An annotation is shown for anomaly scores >= 75."})});return _react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(ShiftedEuiText,{size:"xs"},_react.default.createElement(ShiftedIconWrapper,null,icon),_react.default.createElement("span",null,_i18n.i18n.translate("xpack.apm.metrics.transactionChart.machineLearningLabel",{defaultMessage:"Machine learning:"})," "),_react.default.createElement(_MLJobLink.MLJobLink,{serviceName:serviceName,transactionType:transactionType},"View Job")))}},{key:"render",value:function render(){var _this2=this;var _this$props=this.props,charts=_this$props.charts,urlParams=_this$props.urlParams;var responseTimeSeries=charts.responseTimeSeries,tpmSeries=charts.tpmSeries;var transactionType=urlParams.transactionType;var maxY=getMaxY(responseTimeSeries);var formatter=(0,_formatters.getDurationFormatter)(maxY);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexGrid,{columns:2,gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{"data-cy":"transaction-duration-charts"},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("span",null,responseTimeLabel(transactionType)))),_react.default.createElement(_LicenseContext.LicenseContext.Consumer,null,(function(license){return _this2.renderMLHeader(license===null||license===void 0?void 0:license.getFeature("ml").isAvailable)}))),_react.default.createElement(_TransactionLineChart.TransactionLineChart,{series:responseTimeSeries,tickFormatY:getResponseTimeTickFormatter(formatter),formatTooltipValue:getResponseTimeTooltipFormatter(formatter)})))),_react.default.createElement(_eui.EuiFlexItem,{style:{flexShrink:1}},_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("span",null,tpmLabel(transactionType))),_react.default.createElement(_TransactionLineChart.TransactionLineChart,{series:tpmSeries,tickFormatY:this.getTPMFormatter,formatTooltipValue:this.getTPMTooltipFormatter,truncateLegends:true}))))),transactionType===_transaction_types.TRANSACTION_PAGE_LOAD&&_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiFlexGrid,{columns:2,gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_DurationByCountryMap.DurationByCountryMap,null))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_BrowserLineChart.BrowserLineChart,null))))))}}]);return TransactionCharts}(_react.Component);exports.TransactionCharts=TransactionCharts;function tpmLabel(type){return type===_transaction_types.TRANSACTION_REQUEST?_i18n.i18n.translate("xpack.apm.metrics.transactionChart.requestsPerMinuteLabel",{defaultMessage:"Requests per minute"}):_i18n.i18n.translate("xpack.apm.metrics.transactionChart.transactionsPerMinuteLabel",{defaultMessage:"Transactions per minute"})}function responseTimeLabel(type){switch(type){case _transaction_types.TRANSACTION_PAGE_LOAD:return _i18n.i18n.translate("xpack.apm.metrics.transactionChart.pageLoadTimesLabel",{defaultMessage:"Page load times"});case _transaction_types.TRANSACTION_ROUTE_CHANGE:return _i18n.i18n.translate("xpack.apm.metrics.transactionChart.routeChangeTimesLabel",{defaultMessage:"Route change times"});default:return _i18n.i18n.translate("xpack.apm.metrics.transactionChart.transactionDurationLabel",{defaultMessage:"Transaction duration"})}}},625:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MLJobLink=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _ml_job_constants=__webpack_require__(1244);var _MLLink=__webpack_require__(1245);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MLJobLink=function MLJobLink(_ref){var serviceName=_ref.serviceName,transactionType=_ref.transactionType,children=_ref.children;var jobId=(0,_ml_job_constants.getMlJobId)(serviceName,transactionType);var query={ml:{jobIds:[jobId]}};return _react.default.createElement(_MLLink.MLLink,{children:children,query:query,path:"/timeseriesexplorer"})};exports.MLJobLink=MLJobLink},626:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransactionLineChart=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _useChartsSync=__webpack_require__(1242);var _CustomPlot=_interopRequireDefault(__webpack_require__(1241));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var TransactionLineChart=function TransactionLineChart(props){var series=props.series,tickFormatY=props.tickFormatY,formatTooltipValue=props.formatTooltipValue,_props$yMax=props.yMax,yMax=_props$yMax===void 0?"max":_props$yMax,height=props.height,truncateLegends=props.truncateLegends,_props$stacked=props.stacked,stacked=_props$stacked===void 0?false:_props$stacked,onHover=props.onHover;var syncedChartsProps=(0,_useChartsSync.useChartsSync)();var combinedOnHover=(0,_react.useCallback)((function(hoverX){if(onHover){onHover()}return syncedChartsProps.onHover(hoverX)}),[syncedChartsProps,onHover]);return _react.default.createElement(_CustomPlot.default,_extends({series:series},syncedChartsProps,{onHover:combinedOnHover,tickFormatY:tickFormatY,formatTooltipValue:formatTooltipValue,yMax:yMax,height:height,truncateLegends:truncateLegends},stacked?{stackBy:"y"}:{}))};exports.TransactionLineChart=TransactionLineChart},627:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatNumber=void 0;var formatNumber=function formatNumber(val){return Number(val).toLocaleString("en",{maximumFractionDigits:1})};exports.formatNumber=formatNumber},628:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.startMLJob=startMLJob;exports.getHasMLJob=getHasMLJob;var _elasticsearch_fieldnames=__webpack_require__(81);var _ml_job_constants=__webpack_require__(1244);var _callApi=__webpack_require__(286);var _createCallApmApi=__webpack_require__(159);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function getTransactionIndices(_x){return _getTransactionIndices.apply(this,arguments)}function _getTransactionIndices(){_getTransactionIndices=_asyncToGenerator(regeneratorRuntime.mark((function _callee(http){var indices;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_createCallApmApi.callApmApi)({method:"GET",pathname:"/api/apm/settings/apm-indices"});case 2:indices=_context.sent;return _context.abrupt("return",indices["apm_oss.transactionIndices"]);case 4:case"end":return _context.stop()}}}),_callee)})));return _getTransactionIndices.apply(this,arguments)}function startMLJob(_x2){return _startMLJob.apply(this,arguments)}function _startMLJob(){_startMLJob=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(_ref){var serviceName,transactionType,http,transactionIndices,groups,filter;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:serviceName=_ref.serviceName,transactionType=_ref.transactionType,http=_ref.http;_context2.next=3;return getTransactionIndices(http);case 3:transactionIndices=_context2.sent;groups=["apm",serviceName.toLowerCase()];filter=[{term:_defineProperty({},_elasticsearch_fieldnames.SERVICE_NAME,serviceName)},{term:_defineProperty({},_elasticsearch_fieldnames.PROCESSOR_EVENT,"transaction")},{term:_defineProperty({},_elasticsearch_fieldnames.TRANSACTION_TYPE,transactionType)}];groups.push(transactionType.toLowerCase());return _context2.abrupt("return",(0,_callApi.callApi)(http,{method:"POST",pathname:"/api/ml/modules/setup/apm_transaction",body:{prefix:(0,_ml_job_constants.getMlPrefix)(serviceName,transactionType),groups:groups,indexPatternName:transactionIndices,startDatafeed:true,query:{bool:{filter:filter}}}}));case 8:case"end":return _context2.stop()}}}),_callee2)})));return _startMLJob.apply(this,arguments)}function getHasMLJob(_x3){return _getHasMLJob.apply(this,arguments)}function _getHasMLJob(){_getHasMLJob=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(_ref2){var serviceName,transactionType,http;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:serviceName=_ref2.serviceName,transactionType=_ref2.transactionType,http=_ref2.http;_context3.prev=1;_context3.next=4;return(0,_callApi.callApi)(http,{method:"GET",pathname:"/api/ml/anomaly_detectors/".concat((0,_ml_job_constants.getMlJobId)(serviceName,transactionType))});case 4:return _context3.abrupt("return",true);case 7:_context3.prev=7;_context3.t0=_context3["catch"](1);return _context3.abrupt("return",false);case 10:case"end":return _context3.stop()}}}),_callee3,null,[[1,7]])})));return _getHasMLJob.apply(this,arguments)}},629:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useServiceTransactionTypes=useServiceTransactionTypes;var _useFetcher2=__webpack_require__(36);var INITIAL_DATA={transactionTypes:[]};function useServiceTransactionTypes(urlParams){var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end;var _useFetcher=(0,_useFetcher2.useFetcher)((function(callApmApi){if(serviceName&&start&&end){return callApmApi({pathname:"/api/apm/services/{serviceName}/transaction_types",params:{path:{serviceName:serviceName},query:{start:start,end:end}}})}}),[serviceName,start,end]),_useFetcher$data=_useFetcher.data,data=_useFetcher$data===void 0?INITIAL_DATA:_useFetcher$data;return data.transactionTypes}},630:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertFiltersToQuery=exports.replaceTemplateVariables=exports.getSelectOptions=exports.FILTER_SELECT_OPTIONS=exports.DEFAULT_OPTION=void 0;var _i18n=__webpack_require__(1);var _mustache=_interopRequireDefault(__webpack_require__(557));var _lodash=__webpack_require__(3);var _custom_link_filter_options=__webpack_require__(3882);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var DEFAULT_OPTION={value:"DEFAULT",text:_i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.flyOut.filters.defaultOption",{defaultMessage:"Select field..."})};exports.DEFAULT_OPTION=DEFAULT_OPTION;var FILTER_SELECT_OPTIONS=[DEFAULT_OPTION].concat(_toConsumableArray(_custom_link_filter_options.FILTER_OPTIONS.map((function(filter){return{value:filter,text:filter}}))));exports.FILTER_SELECT_OPTIONS=FILTER_SELECT_OPTIONS;var getSelectOptions=function getSelectOptions(filters,selectedKey){return FILTER_SELECT_OPTIONS.filter((function(_ref){var value=_ref.value;return!filters.some((function(_ref2){var key=_ref2.key;return key===value&&key!==selectedKey}))}))};exports.getSelectOptions=getSelectOptions;var getInvalidTemplateVariables=function getInvalidTemplateVariables(template,transaction){return _mustache.default.parse(template).filter((function(_ref3){var _ref4=_slicedToArray(_ref3,1),type=_ref4[0];return type==="name"})).map((function(_ref5){var _ref6=_slicedToArray(_ref5,2),value=_ref6[1];return value})).filter((function(templateVar){return(0,_lodash.get)(transaction,templateVar)==null}))};var validateUrl=function validateUrl(url,transaction){if(!transaction||(0,_lodash.isEmpty)(transaction)){return _i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.preview.transaction.notFound",{defaultMessage:"We couldn't find a matching transaction document based on the defined filters."})}try{var invalidVariables=getInvalidTemplateVariables(url,transaction);if(!(0,_lodash.isEmpty)(invalidVariables)){return _i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.preview.contextVariable.noMatch",{defaultMessage:"We couldn't find a value match for {variables} in the example transaction document.",values:{variables:invalidVariables.map((function(variable){return"{{".concat(variable,"}}")})).join(", ")}})}}catch(e){return _i18n.i18n.translate("xpack.apm.settings.customizeUI.customLink.preview.contextVariable.invalid",{defaultMessage:"We couldn't find an example transaction document due to invalid variable(s) defined."})}};var replaceTemplateVariables=function replaceTemplateVariables(url,transaction){var error=validateUrl(url,transaction);try{return{formattedUrl:_mustache.default.render(url,transaction),error:error}}catch(e){return{formattedUrl:url,error:error}}};exports.replaceTemplateVariables=replaceTemplateVariables;var convertFiltersToQuery=function convertFiltersToQuery(filters){return filters.reduce((function(acc,_ref7){var key=_ref7.key,value=_ref7.value;if(key&&value){acc[key]=value}return acc}),{})};exports.convertFiltersToQuery=convertFiltersToQuery},631:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});exports.amountAndUnitToObject=amountAndUnitToObject;exports.amountAndUnitToString=amountAndUnitToString;function amountAndUnitToObject(value){var _ref=value.match(/(^-?\d+)?(\w+)?/)||[],_ref2=_slicedToArray(_ref,3),_ref2$=_ref2[1],amount=_ref2$===void 0?"":_ref2$,_ref2$2=_ref2[2],unit=_ref2$2===void 0?"":_ref2$2;return{amount:amount,unit:unit}}function amountAndUnitToString(_ref3){var amount=_ref3.amount,unit=_ref3.unit;return"".concat(amount).concat(unit)}},71:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toQuery=toQuery;exports.fromQuery=fromQuery;var _queryString=__webpack_require__(158);var _public=__webpack_require__(24);function toQuery(search){return search?(0,_queryString.parse)(search.slice(1),{sort:false}):{}}function fromQuery(query){var encodedQuery=_public.url.encodeQuery(query,(function(value){return encodeURIComponent(value).replace(/%3A/g,":")}));return(0,_queryString.stringify)(encodedQuery,{sort:false,encode:false})}},715:function(module,exports,__webpack_require__){module.exports=__webpack_require__(32)(2124)},72:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _formatters=__webpack_require__(620);Object.keys(_formatters).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _formatters[key]}})}));var _datetime=__webpack_require__(3767);Object.keys(_datetime).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _datetime[key]}})}));var _duration=__webpack_require__(3768);Object.keys(_duration).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _duration[key]}})}));var _size=__webpack_require__(3769);Object.keys(_size).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _size[key]}})}))},77:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiLibServices},797:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AlertStates=exports.Comparator=exports.METRIC_THRESHOLD_ALERT_TYPE_ID=void 0;var METRIC_THRESHOLD_ALERT_TYPE_ID="metrics.alert.threshold";exports.METRIC_THRESHOLD_ALERT_TYPE_ID=METRIC_THRESHOLD_ALERT_TYPE_ID;var Comparator;exports.Comparator=Comparator;(function(Comparator){Comparator["GT"]=">";Comparator["LT"]="<";Comparator["GT_OR_EQ"]=">=";Comparator["LT_OR_EQ"]="<=";Comparator["BETWEEN"]="between"})(Comparator||(exports.Comparator=Comparator={}));var AlertStates;exports.AlertStates=AlertStates;(function(AlertStates){AlertStates[AlertStates["OK"]=0]="OK";AlertStates[AlertStates["ALERT"]=1]="ALERT";AlertStates[AlertStates["NO_DATA"]=2]="NO_DATA";AlertStates[AlertStates["ERROR"]=3]="ERROR"})(AlertStates||(exports.AlertStates=AlertStates={}))},81:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CLIENT_GEO_COUNTRY_ISO_CODE=exports.POD_NAME=exports.CONTAINER_ID=exports.HOST_NAME=exports.LABEL_NAME=exports.METRIC_JAVA_GC_TIME=exports.METRIC_JAVA_GC_COUNT=exports.METRIC_JAVA_THREAD_COUNT=exports.METRIC_JAVA_NON_HEAP_MEMORY_USED=exports.METRIC_JAVA_NON_HEAP_MEMORY_COMMITTED=exports.METRIC_JAVA_NON_HEAP_MEMORY_MAX=exports.METRIC_JAVA_HEAP_MEMORY_USED=exports.METRIC_JAVA_HEAP_MEMORY_COMMITTED=exports.METRIC_JAVA_HEAP_MEMORY_MAX=exports.METRIC_PROCESS_CPU_PERCENT=exports.METRIC_SYSTEM_CPU_PERCENT=exports.METRIC_SYSTEM_TOTAL_MEMORY=exports.METRIC_SYSTEM_FREE_MEMORY=exports.ERROR_PAGE_URL=exports.ERROR_EXC_HANDLED=exports.ERROR_EXC_MESSAGE=exports.ERROR_LOG_MESSAGE=exports.ERROR_LOG_LEVEL=exports.ERROR_CULPRIT=exports.ERROR_GROUP_ID=exports.PARENT_ID=exports.SPAN_DESTINATION_SERVICE_RESOURCE=exports.SPAN_ID=exports.SPAN_NAME=exports.SPAN_ACTION=exports.SPAN_SELF_TIME_SUM=exports.SPAN_SUBTYPE=exports.SPAN_TYPE=exports.SPAN_DURATION=exports.TRACE_ID=exports.TRANSACTION_PAGE_URL=exports.TRANSACTION_BREAKDOWN_COUNT=exports.TRANSACTION_SAMPLED=exports.TRANSACTION_ID=exports.TRANSACTION_NAME=exports.TRANSACTION_RESULT=exports.TRANSACTION_TYPE=exports.TRANSACTION_DURATION=exports.PROCESSOR_EVENT=exports.OBSERVER_LISTENING=exports.OBSERVER_VERSION_MAJOR=exports.DESTINATION_ADDRESS=exports.USER_AGENT_NAME=exports.USER_AGENT_ORIGINAL=exports.USER_ID=exports.HTTP_REQUEST_METHOD=exports.URL_FULL=exports.AGENT_VERSION=exports.AGENT_NAME=exports.SERVICE_VERSION=exports.SERVICE_NODE_NAME=exports.SERVICE_RUNTIME_VERSION=exports.SERVICE_RUNTIME_NAME=exports.SERVICE_LANGUAGE_VERSION=exports.SERVICE_LANGUAGE_NAME=exports.SERVICE_FRAMEWORK_VERSION=exports.SERVICE_FRAMEWORK_NAME=exports.SERVICE_ENVIRONMENT=exports.SERVICE_NAME=void 0;var SERVICE_NAME="service.name";exports.SERVICE_NAME=SERVICE_NAME;var SERVICE_ENVIRONMENT="service.environment";exports.SERVICE_ENVIRONMENT=SERVICE_ENVIRONMENT;var SERVICE_FRAMEWORK_NAME="service.framework.name";exports.SERVICE_FRAMEWORK_NAME=SERVICE_FRAMEWORK_NAME;var SERVICE_FRAMEWORK_VERSION="service.framework.version";exports.SERVICE_FRAMEWORK_VERSION=SERVICE_FRAMEWORK_VERSION;var SERVICE_LANGUAGE_NAME="service.language.name";exports.SERVICE_LANGUAGE_NAME=SERVICE_LANGUAGE_NAME;var SERVICE_LANGUAGE_VERSION="service.language.version";exports.SERVICE_LANGUAGE_VERSION=SERVICE_LANGUAGE_VERSION;var SERVICE_RUNTIME_NAME="service.runtime.name";exports.SERVICE_RUNTIME_NAME=SERVICE_RUNTIME_NAME;var SERVICE_RUNTIME_VERSION="service.runtime.version";exports.SERVICE_RUNTIME_VERSION=SERVICE_RUNTIME_VERSION;var SERVICE_NODE_NAME="service.node.name";exports.SERVICE_NODE_NAME=SERVICE_NODE_NAME;var SERVICE_VERSION="service.version";exports.SERVICE_VERSION=SERVICE_VERSION;var AGENT_NAME="agent.name";exports.AGENT_NAME=AGENT_NAME;var AGENT_VERSION="agent.version";exports.AGENT_VERSION=AGENT_VERSION;var URL_FULL="url.full";exports.URL_FULL=URL_FULL;var HTTP_REQUEST_METHOD="http.request.method";exports.HTTP_REQUEST_METHOD=HTTP_REQUEST_METHOD;var USER_ID="user.id";exports.USER_ID=USER_ID;var USER_AGENT_ORIGINAL="user_agent.original";exports.USER_AGENT_ORIGINAL=USER_AGENT_ORIGINAL;var USER_AGENT_NAME="user_agent.name";exports.USER_AGENT_NAME=USER_AGENT_NAME;var DESTINATION_ADDRESS="destination.address";exports.DESTINATION_ADDRESS=DESTINATION_ADDRESS;var OBSERVER_VERSION_MAJOR="observer.version_major";exports.OBSERVER_VERSION_MAJOR=OBSERVER_VERSION_MAJOR;var OBSERVER_LISTENING="observer.listening";exports.OBSERVER_LISTENING=OBSERVER_LISTENING;var PROCESSOR_EVENT="processor.event";exports.PROCESSOR_EVENT=PROCESSOR_EVENT;var TRANSACTION_DURATION="transaction.duration.us";exports.TRANSACTION_DURATION=TRANSACTION_DURATION;var TRANSACTION_TYPE="transaction.type";exports.TRANSACTION_TYPE=TRANSACTION_TYPE;var TRANSACTION_RESULT="transaction.result";exports.TRANSACTION_RESULT=TRANSACTION_RESULT;var TRANSACTION_NAME="transaction.name";exports.TRANSACTION_NAME=TRANSACTION_NAME;var TRANSACTION_ID="transaction.id";exports.TRANSACTION_ID=TRANSACTION_ID;var TRANSACTION_SAMPLED="transaction.sampled";exports.TRANSACTION_SAMPLED=TRANSACTION_SAMPLED;var TRANSACTION_BREAKDOWN_COUNT="transaction.breakdown.count";exports.TRANSACTION_BREAKDOWN_COUNT=TRANSACTION_BREAKDOWN_COUNT;var TRANSACTION_PAGE_URL="transaction.page.url";exports.TRANSACTION_PAGE_URL=TRANSACTION_PAGE_URL;var TRACE_ID="trace.id";exports.TRACE_ID=TRACE_ID;var SPAN_DURATION="span.duration.us";exports.SPAN_DURATION=SPAN_DURATION;var SPAN_TYPE="span.type";exports.SPAN_TYPE=SPAN_TYPE;var SPAN_SUBTYPE="span.subtype";exports.SPAN_SUBTYPE=SPAN_SUBTYPE;var SPAN_SELF_TIME_SUM="span.self_time.sum.us";exports.SPAN_SELF_TIME_SUM=SPAN_SELF_TIME_SUM;var SPAN_ACTION="span.action";exports.SPAN_ACTION=SPAN_ACTION;var SPAN_NAME="span.name";exports.SPAN_NAME=SPAN_NAME;var SPAN_ID="span.id";exports.SPAN_ID=SPAN_ID;var SPAN_DESTINATION_SERVICE_RESOURCE="span.destination.service.resource";exports.SPAN_DESTINATION_SERVICE_RESOURCE=SPAN_DESTINATION_SERVICE_RESOURCE;var PARENT_ID="parent.id";exports.PARENT_ID=PARENT_ID;var ERROR_GROUP_ID="error.grouping_key";exports.ERROR_GROUP_ID=ERROR_GROUP_ID;var ERROR_CULPRIT="error.culprit";exports.ERROR_CULPRIT=ERROR_CULPRIT;var ERROR_LOG_LEVEL="error.log.level";exports.ERROR_LOG_LEVEL=ERROR_LOG_LEVEL;var ERROR_LOG_MESSAGE="error.log.message";exports.ERROR_LOG_MESSAGE=ERROR_LOG_MESSAGE;var ERROR_EXC_MESSAGE="error.exception.message";exports.ERROR_EXC_MESSAGE=ERROR_EXC_MESSAGE;var ERROR_EXC_HANDLED="error.exception.handled";exports.ERROR_EXC_HANDLED=ERROR_EXC_HANDLED;var ERROR_PAGE_URL="error.page.url";exports.ERROR_PAGE_URL=ERROR_PAGE_URL;var METRIC_SYSTEM_FREE_MEMORY="system.memory.actual.free";exports.METRIC_SYSTEM_FREE_MEMORY=METRIC_SYSTEM_FREE_MEMORY;var METRIC_SYSTEM_TOTAL_MEMORY="system.memory.total";exports.METRIC_SYSTEM_TOTAL_MEMORY=METRIC_SYSTEM_TOTAL_MEMORY;var METRIC_SYSTEM_CPU_PERCENT="system.cpu.total.norm.pct";exports.METRIC_SYSTEM_CPU_PERCENT=METRIC_SYSTEM_CPU_PERCENT;var METRIC_PROCESS_CPU_PERCENT="system.process.cpu.total.norm.pct";exports.METRIC_PROCESS_CPU_PERCENT=METRIC_PROCESS_CPU_PERCENT;var METRIC_JAVA_HEAP_MEMORY_MAX="jvm.memory.heap.max";exports.METRIC_JAVA_HEAP_MEMORY_MAX=METRIC_JAVA_HEAP_MEMORY_MAX;var METRIC_JAVA_HEAP_MEMORY_COMMITTED="jvm.memory.heap.committed";exports.METRIC_JAVA_HEAP_MEMORY_COMMITTED=METRIC_JAVA_HEAP_MEMORY_COMMITTED;var METRIC_JAVA_HEAP_MEMORY_USED="jvm.memory.heap.used";exports.METRIC_JAVA_HEAP_MEMORY_USED=METRIC_JAVA_HEAP_MEMORY_USED;var METRIC_JAVA_NON_HEAP_MEMORY_MAX="jvm.memory.non_heap.max";exports.METRIC_JAVA_NON_HEAP_MEMORY_MAX=METRIC_JAVA_NON_HEAP_MEMORY_MAX;var METRIC_JAVA_NON_HEAP_MEMORY_COMMITTED="jvm.memory.non_heap.committed";exports.METRIC_JAVA_NON_HEAP_MEMORY_COMMITTED=METRIC_JAVA_NON_HEAP_MEMORY_COMMITTED;var METRIC_JAVA_NON_HEAP_MEMORY_USED="jvm.memory.non_heap.used";exports.METRIC_JAVA_NON_HEAP_MEMORY_USED=METRIC_JAVA_NON_HEAP_MEMORY_USED;var METRIC_JAVA_THREAD_COUNT="jvm.thread.count";exports.METRIC_JAVA_THREAD_COUNT=METRIC_JAVA_THREAD_COUNT;var METRIC_JAVA_GC_COUNT="jvm.gc.count";exports.METRIC_JAVA_GC_COUNT=METRIC_JAVA_GC_COUNT;var METRIC_JAVA_GC_TIME="jvm.gc.time";exports.METRIC_JAVA_GC_TIME=METRIC_JAVA_GC_TIME;var LABEL_NAME="labels.name";exports.LABEL_NAME=LABEL_NAME;var HOST_NAME="host.hostname";exports.HOST_NAME=HOST_NAME;var CONTAINER_ID="container.id";exports.CONTAINER_ID=CONTAINER_ID;var POD_NAME="kubernetes.pod.name";exports.POD_NAME=POD_NAME;var CLIENT_GEO_COUNTRY_ISO_CODE="client.geo.country_iso_code";exports.CLIENT_GEO_COUNTRY_ISO_CODE=CLIENT_GEO_COUNTRY_ISO_CODE},82:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.history=void 0;var _history=__webpack_require__(172);var history=(0,_history.createHashHistory)();exports.history=history},83:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAPMHref=getAPMHref;exports.APMLink=APMLink;exports.PERSISTENT_APM_PARAMS=void 0;var _eui=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _url=_interopRequireDefault(__webpack_require__(84));var _lodash=__webpack_require__(3);var _useLocation2=__webpack_require__(132);var _url_helpers=__webpack_require__(71);var _constants=__webpack_require__(615);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PERSISTENT_APM_PARAMS=["kuery","rangeFrom","rangeTo","refreshPaused","refreshInterval","environment"];exports.PERSISTENT_APM_PARAMS=PERSISTENT_APM_PARAMS;function getAPMHref(path,currentSearch){var query=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var currentQuery=(0,_url_helpers.toQuery)(currentSearch);var nextQuery=_objectSpread({},_constants.TIMEPICKER_DEFAULTS,{},(0,_lodash.pick)(currentQuery,PERSISTENT_APM_PARAMS),{},query);var nextSearch=(0,_url_helpers.fromQuery)(nextQuery);return _url.default.format({pathname:"",hash:"".concat(path,"?").concat(nextSearch)})}function APMLink(_ref){var _ref$path=_ref.path,path=_ref$path===void 0?"":_ref$path,query=_ref.query,rest=_objectWithoutProperties(_ref,["path","query"]);var _useLocation=(0,_useLocation2.useLocation)(),search=_useLocation.search;var href=getAPMHref(path,search,query);return _react.default.createElement(_eui.EuiLink,_extends({},rest,{href:href}))}},95:function(module,exports){module.exports=__kbnSharedDeps__.Monaco}});