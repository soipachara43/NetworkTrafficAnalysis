var __kbnBundles__=typeof __kbnBundles__==="object"?__kbnBundles__:{};__kbnBundles__["plugin/telemetry"]=function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="__REPLACE_WITH_PUBLIC_PATH__";return __webpack_require__(__webpack_require__.s=6)}([function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KIBANA_STATS_TYPE=exports.KIBANA_USAGE_TYPE=exports.KIBANA_STACK_MANAGEMENT_STATS_TYPE=exports.APPLICATION_USAGE_TYPE=exports.UI_METRIC_USAGE_TYPE=exports.ENDPOINT_VERSION=exports.TELEMETRY_STATS_TYPE=exports.PRIVACY_STATEMENT_URL=exports.PATH_TO_ADVANCED_SETTINGS=exports.LOCALSTORAGE_KEY=exports.REPORT_INTERVAL_MS=exports.getConfigTelemetryDesc=exports.CONFIG_TELEMETRY=void 0;var _i18n=__webpack_require__(2);var CONFIG_TELEMETRY="telemetry:optIn";exports.CONFIG_TELEMETRY=CONFIG_TELEMETRY;var getConfigTelemetryDesc=function getConfigTelemetryDesc(){return _i18n.i18n.translate("telemetry.telemetryConfigDescription",{defaultMessage:"Help us improve the Elastic Stack by providing usage statistics for basic features. We will not share this data outside of Elastic."})};exports.getConfigTelemetryDesc=getConfigTelemetryDesc;var REPORT_INTERVAL_MS=864e5;exports.REPORT_INTERVAL_MS=REPORT_INTERVAL_MS;var LOCALSTORAGE_KEY="telemetry.data";exports.LOCALSTORAGE_KEY=LOCALSTORAGE_KEY;var PATH_TO_ADVANCED_SETTINGS="kibana#/management/kibana/settings";exports.PATH_TO_ADVANCED_SETTINGS=PATH_TO_ADVANCED_SETTINGS;var PRIVACY_STATEMENT_URL="https://www.elastic.co/legal/privacy-statement";exports.PRIVACY_STATEMENT_URL=PRIVACY_STATEMENT_URL;var TELEMETRY_STATS_TYPE="telemetry";exports.TELEMETRY_STATS_TYPE=TELEMETRY_STATS_TYPE;var ENDPOINT_VERSION="v2";exports.ENDPOINT_VERSION=ENDPOINT_VERSION;var UI_METRIC_USAGE_TYPE="ui_metric";exports.UI_METRIC_USAGE_TYPE=UI_METRIC_USAGE_TYPE;var APPLICATION_USAGE_TYPE="application_usage";exports.APPLICATION_USAGE_TYPE=APPLICATION_USAGE_TYPE;var KIBANA_STACK_MANAGEMENT_STATS_TYPE="stack_management";exports.KIBANA_STACK_MANAGEMENT_STATS_TYPE=KIBANA_STACK_MANAGEMENT_STATS_TYPE;var KIBANA_USAGE_TYPE="kibana";exports.KIBANA_USAGE_TYPE=KIBANA_USAGE_TYPE;var KIBANA_STATS_TYPE="kibana_stats";exports.KIBANA_STATS_TYPE=KIBANA_STATS_TYPE},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,exports){module.exports=__kbnBundles__["plugin/kibanaReact"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;Object.defineProperty(exports,"TelemetryPluginStart",{enumerable:true,get:function get(){return _plugin.TelemetryPluginStart}});Object.defineProperty(exports,"TelemetryPluginSetup",{enumerable:true,get:function get(){return _plugin.TelemetryPluginSetup}});var _plugin=__webpack_require__(7);function plugin(initializerContext){return new _plugin.TelemetryPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TelemetryPlugin=void 0;var _services=__webpack_require__(8);var _telemetry_config=__webpack_require__(20);var _get_telemetry_notify_user_about_optin_default=__webpack_require__(27);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TelemetryPlugin=function(){function TelemetryPlugin(initializerContext){_classCallCheck(this,TelemetryPlugin);_defineProperty(this,"currentKibanaVersion",void 0);_defineProperty(this,"config",void 0);_defineProperty(this,"telemetrySender",void 0);_defineProperty(this,"telemetryNotifications",void 0);_defineProperty(this,"telemetryService",void 0);this.currentKibanaVersion=initializerContext.env.packageInfo.version;this.config=initializerContext.config.get()}_createClass(TelemetryPlugin,[{key:"setup",value:function setup(_ref){var http=_ref.http,notifications=_ref.notifications;var config=this.config;this.telemetryService=new _services.TelemetryService({config:config,http:http,notifications:notifications});this.telemetrySender=new _services.TelemetrySender(this.telemetryService);return{telemetryService:this.telemetryService}}},{key:"start",value:function start(_ref2){var _this=this;var http=_ref2.http,overlays=_ref2.overlays,application=_ref2.application,savedObjects=_ref2.savedObjects;if(!this.telemetryService){throw Error("Telemetry plugin failed to initialize properly.")}this.telemetryNotifications=new _services.TelemetryNotifications({overlays:overlays,telemetryService:this.telemetryService});application.currentAppId$.subscribe(_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var isUnauthenticated,telemetrySavedObject,updatedConfig,telemetryBanner;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isUnauthenticated=_this.getIsUnauthenticated(http);if(!isUnauthenticated){_context.next=3;break}return _context.abrupt("return");case 3:_context.next=5;return _this.getTelemetrySavedObject(savedObjects.client);case 5:telemetrySavedObject=_context.sent;_context.next=8;return _this.updateConfigsBasedOnSavedObjects(telemetrySavedObject);case 8:updatedConfig=_context.sent;_this.telemetryService.config=updatedConfig;telemetryBanner=updatedConfig.banner;_this.maybeStartTelemetryPoller();if(telemetryBanner){_this.maybeShowOptedInNotificationBanner();_this.maybeShowOptInBanner()}case 13:case"end":return _context.stop()}}}),_callee)}))));return{telemetryService:this.telemetryService,telemetryNotifications:this.telemetryNotifications}}},{key:"getIsUnauthenticated",value:function getIsUnauthenticated(http){var anonymousPaths=http.anonymousPaths;return anonymousPaths.isAnonymous(window.location.pathname)}},{key:"maybeStartTelemetryPoller",value:function maybeStartTelemetryPoller(){if(!this.telemetrySender){return}this.telemetrySender.startChecking()}},{key:"maybeShowOptedInNotificationBanner",value:function maybeShowOptedInNotificationBanner(){if(!this.telemetryNotifications){return}var shouldShowBanner=this.telemetryNotifications.shouldShowOptedInNoticeBanner();if(shouldShowBanner){this.telemetryNotifications.renderOptedInNoticeBanner()}}},{key:"maybeShowOptInBanner",value:function maybeShowOptInBanner(){if(!this.telemetryNotifications){return}var shouldShowBanner=this.telemetryNotifications.shouldShowOptInBanner();if(shouldShowBanner){this.telemetryNotifications.renderOptInBanner()}}},{key:"updateConfigsBasedOnSavedObjects",value:function(){var _updateConfigsBasedOnSavedObjects=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(telemetrySavedObject){var configTelemetrySendUsageFrom,configTelemetryOptIn,configTelemetryAllowChangingOptInStatus,currentKibanaVersion,allowChangingOptInStatus,optIn,sendUsageFrom,telemetryNotifyUserAboutOptInDefault;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:configTelemetrySendUsageFrom=this.config.sendUsageFrom;configTelemetryOptIn=this.config.optIn;configTelemetryAllowChangingOptInStatus=this.config.allowChangingOptInStatus;currentKibanaVersion=this.currentKibanaVersion;allowChangingOptInStatus=(0,_telemetry_config.getTelemetryAllowChangingOptInStatus)({configTelemetryAllowChangingOptInStatus:configTelemetryAllowChangingOptInStatus,telemetrySavedObject:telemetrySavedObject});optIn=(0,_telemetry_config.getTelemetryOptIn)({configTelemetryOptIn:configTelemetryOptIn,allowChangingOptInStatus:allowChangingOptInStatus,telemetrySavedObject:telemetrySavedObject,currentKibanaVersion:currentKibanaVersion});sendUsageFrom=(0,_telemetry_config.getTelemetrySendUsageFrom)({configTelemetrySendUsageFrom:configTelemetrySendUsageFrom,telemetrySavedObject:telemetrySavedObject});telemetryNotifyUserAboutOptInDefault=(0,_get_telemetry_notify_user_about_optin_default.getNotifyUserAboutOptInDefault)({telemetrySavedObject:telemetrySavedObject,allowChangingOptInStatus:allowChangingOptInStatus,configTelemetryOptIn:configTelemetryOptIn,telemetryOptedIn:optIn});return _context2.abrupt("return",_objectSpread({},this.config,{optIn:optIn,sendUsageFrom:sendUsageFrom,telemetryNotifyUserAboutOptInDefault:telemetryNotifyUserAboutOptInDefault}));case 9:case"end":return _context2.stop()}}}),_callee2,this)})));function updateConfigsBasedOnSavedObjects(_x){return _updateConfigsBasedOnSavedObjects.apply(this,arguments)}return updateConfigsBasedOnSavedObjects}()},{key:"getTelemetrySavedObject",value:function(){var _getTelemetrySavedObject=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(savedObjectsClient){var _ref4,attributes,errorCode;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return savedObjectsClient.get("telemetry","telemetry");case 3:_ref4=_context3.sent;attributes=_ref4.attributes;return _context3.abrupt("return",attributes);case 8:_context3.prev=8;_context3.t0=_context3["catch"](0);errorCode=_context3.t0[Symbol("SavedObjectsClientErrorCode")];if(!(errorCode==="SavedObjectsClient/notFound")){_context3.next=13;break}return _context3.abrupt("return",null);case 13:if(!(errorCode==="SavedObjectsClient/forbidden")){_context3.next=15;break}return _context3.abrupt("return",false);case 15:throw _context3.t0;case 16:case"end":return _context3.stop()}}}),_callee3,null,[[0,8]])})));function getTelemetrySavedObject(_x2){return _getTelemetrySavedObject.apply(this,arguments)}return getTelemetrySavedObject}()}]);return TelemetryPlugin}();exports.TelemetryPlugin=TelemetryPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TelemetrySender",{enumerable:true,get:function get(){return _telemetry_sender.TelemetrySender}});Object.defineProperty(exports,"TelemetryService",{enumerable:true,get:function get(){return _telemetry_service.TelemetryService}});Object.defineProperty(exports,"TelemetryNotifications",{enumerable:true,get:function get(){return _telemetry_notifications.TelemetryNotifications}});var _telemetry_sender=__webpack_require__(9);var _telemetry_service=__webpack_require__(11);var _telemetry_notifications=__webpack_require__(13)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TelemetrySender=void 0;var _constants=__webpack_require__(1);var _public=__webpack_require__(10);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TelemetrySender=function TelemetrySender(telemetryService){var _this=this;_classCallCheck(this,TelemetrySender);_defineProperty(this,"telemetryService",void 0);_defineProperty(this,"isSending",false);_defineProperty(this,"lastReported",void 0);_defineProperty(this,"storage",void 0);_defineProperty(this,"intervalId",void 0);_defineProperty(this,"saveToBrowser",(function(){_this.storage.set(_constants.LOCALSTORAGE_KEY,{lastReport:_this.lastReported})}));_defineProperty(this,"shouldSendReport",(function(){if(_this.telemetryService.getIsOptedIn()){if(!_this.lastReported){return true}var lastReported=parseInt(_this.lastReported,10);if(isNaN(lastReported)||Date.now()-lastReported>_constants.REPORT_INTERVAL_MS){return true}}return false}));_defineProperty(this,"sendIfDue",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var telemetryUrl,telemetryData,clusters;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(_this.isSending||!_this.shouldSendReport())){_context2.next=2;break}return _context2.abrupt("return");case 2:_this.isSending=true;_context2.prev=3;telemetryUrl=_this.telemetryService.getTelemetryUrl();_context2.next=7;return _this.telemetryService.fetchTelemetry();case 7:telemetryData=_context2.sent;clusters=[].concat(telemetryData);_context2.next=11;return Promise.all(clusters.map(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(cluster){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(telemetryUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:cluster});case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}()));case 11:_this.lastReported="".concat(Date.now());_this.saveToBrowser();_context2.next=17;break;case 15:_context2.prev=15;_context2.t0=_context2["catch"](3);case 17:_context2.prev=17;_this.isSending=false;return _context2.finish(17);case 20:case"end":return _context2.stop()}}}),_callee2,null,[[3,15,17,20]])}))));_defineProperty(this,"startChecking",(function(){if(typeof _this.intervalId==="undefined"){_this.intervalId=window.setInterval(_this.sendIfDue,6e4)}}));this.telemetryService=telemetryService;this.storage=new _public.Storage(window.localStorage);var attributes=this.storage.get(_constants.LOCALSTORAGE_KEY);if(attributes){this.lastReported=attributes.lastReport}};exports.TelemetrySender=TelemetrySender},function(module,exports){module.exports=__kbnBundles__["plugin/kibanaUtils"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TelemetryService=void 0;var _moment=_interopRequireDefault(__webpack_require__(12));var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TelemetryService=function(){function TelemetryService(_ref){var _this=this;var config=_ref.config,http=_ref.http,notifications=_ref.notifications,_ref$reportOptInStatu=_ref.reportOptInStatusChange,reportOptInStatusChange=_ref$reportOptInStatu===void 0?true:_ref$reportOptInStatu;_classCallCheck(this,TelemetryService);_defineProperty(this,"http",void 0);_defineProperty(this,"reportOptInStatusChange",void 0);_defineProperty(this,"notifications",void 0);_defineProperty(this,"defaultConfig",void 0);_defineProperty(this,"updatedConfig",void 0);_defineProperty(this,"getCanChangeOptInStatus",(function(){var allowChangingOptInStatus=_this.config.allowChangingOptInStatus;return allowChangingOptInStatus}));_defineProperty(this,"getOptInStatusUrl",(function(){var telemetryOptInStatusUrl=_this.config.optInStatusUrl;return telemetryOptInStatusUrl}));_defineProperty(this,"getTelemetryUrl",(function(){var telemetryUrl=_this.config.url;return telemetryUrl}));_defineProperty(this,"getUserHasSeenOptedInNotice",(function(){return _this.config.telemetryNotifyUserAboutOptInDefault||false}));_defineProperty(this,"getIsOptedIn",(function(){return _this.isOptedIn}));_defineProperty(this,"fetchExample",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.fetchTelemetry({unencrypted:true});case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}}),_callee)}))));_defineProperty(this,"fetchTelemetry",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _ref4,_ref4$unencrypted,unencrypted,now,_args2=arguments;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_ref4=_args2.length>0&&_args2[0]!==undefined?_args2[0]:{},_ref4$unencrypted=_ref4.unencrypted,unencrypted=_ref4$unencrypted===void 0?false:_ref4$unencrypted;now=(0,_moment.default)();return _context2.abrupt("return",_this.http.post("/api/telemetry/v2/clusters/_stats",{body:JSON.stringify({unencrypted:unencrypted,timeRange:{min:now.clone().subtract(20,"minutes").toISOString(),max:now.toISOString()}})}));case 3:case"end":return _context2.stop()}}}),_callee2)})));return function(){return _ref3.apply(this,arguments)}}());_defineProperty(this,"setOptIn",function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(optedIn){var canChangeOptInStatus,optInPayload;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:canChangeOptInStatus=_this.getCanChangeOptInStatus();if(canChangeOptInStatus){_context3.next=3;break}return _context3.abrupt("return",false);case 3:_context3.prev=3;_context3.next=6;return _this.http.post("/api/telemetry/v2/optIn",{body:JSON.stringify({enabled:optedIn})});case 6:optInPayload=_context3.sent;if(!_this.reportOptInStatusChange){_context3.next=10;break}_context3.next=10;return _this.reportOptInStatus(optInPayload);case 10:_this.isOptedIn=optedIn;_context3.next=17;break;case 13:_context3.prev=13;_context3.t0=_context3["catch"](3);_this.notifications.toasts.addError(_context3.t0,{title:_i18n.i18n.translate("telemetry.optInErrorToastTitle",{defaultMessage:"Error"}),toastMessage:_i18n.i18n.translate("telemetry.optInErrorToastText",{defaultMessage:"An error occurred while trying to set the usage statistics preference."})});return _context3.abrupt("return",false);case 17:return _context3.abrupt("return",true);case 18:case"end":return _context3.stop()}}}),_callee3,null,[[3,13]])})));return function(_x){return _ref5.apply(this,arguments)}}());_defineProperty(this,"setUserHasSeenNotice",_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return _this.http.put("/api/telemetry/v2/userHasSeenNotice");case 3:_this.userHasSeenOptedInNotice=true;_context4.next=10;break;case 6:_context4.prev=6;_context4.t0=_context4["catch"](0);_this.notifications.toasts.addError(_context4.t0,{title:_i18n.i18n.translate("telemetry.optInNoticeSeenErrorTitle",{defaultMessage:"Error"}),toastMessage:_i18n.i18n.translate("telemetry.optInNoticeSeenErrorToastText",{defaultMessage:"An error occurred dismissing the notice"})});_this.userHasSeenOptedInNotice=false;case 10:case"end":return _context4.stop()}}}),_callee4,null,[[0,6]])}))));_defineProperty(this,"reportOptInStatus",function(){var _ref7=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(optInPayload){var telemetryOptInStatusUrl;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:telemetryOptInStatusUrl=_this.getOptInStatusUrl();_context5.prev=1;_context5.next=4;return fetch(telemetryOptInStatusUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(optInPayload)});case 4:_context5.next=8;break;case 6:_context5.prev=6;_context5.t0=_context5["catch"](1);case 8:case"end":return _context5.stop()}}}),_callee5,null,[[1,6]])})));return function(_x2){return _ref7.apply(this,arguments)}}());this.defaultConfig=config;this.reportOptInStatusChange=reportOptInStatusChange;this.notifications=notifications;this.http=http}_createClass(TelemetryService,[{key:"config",set:function set(updatedConfig){this.updatedConfig=updatedConfig},get:function get(){return _objectSpread({},this.defaultConfig,{},this.updatedConfig)}},{key:"isOptedIn",get:function get(){return this.config.optIn},set:function set(optIn){this.config=_objectSpread({},this.config,{optIn:optIn})}},{key:"userHasSeenOptedInNotice",get:function get(){return this.config.telemetryNotifyUserAboutOptInDefault},set:function set(telemetryNotifyUserAboutOptInDefault){this.config=_objectSpread({},this.config,{telemetryNotifyUserAboutOptInDefault:telemetryNotifyUserAboutOptInDefault})}}]);return TelemetryService}();exports.TelemetryService=TelemetryService},function(module,exports){module.exports=__kbnSharedDeps__.Moment},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TelemetryNotifications",{enumerable:true,get:function get(){return _telemetry_notifications.TelemetryNotifications}});var _telemetry_notifications=__webpack_require__(14)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TelemetryNotifications=void 0;var _render_opted_in_notice_banner=__webpack_require__(15);var _render_opt_in_banner=__webpack_require__(17);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TelemetryNotifications=function TelemetryNotifications(_ref){var _this=this;var overlays=_ref.overlays,telemetryService=_ref.telemetryService;_classCallCheck(this,TelemetryNotifications);_defineProperty(this,"overlays",void 0);_defineProperty(this,"telemetryService",void 0);_defineProperty(this,"optedInNoticeBannerId",void 0);_defineProperty(this,"optInBannerId",void 0);_defineProperty(this,"shouldShowOptedInNoticeBanner",(function(){var userHasSeenOptedInNotice=_this.telemetryService.getUserHasSeenOptedInNotice();var bannerOnScreen=typeof _this.optedInNoticeBannerId!=="undefined";return!bannerOnScreen&&userHasSeenOptedInNotice}));_defineProperty(this,"renderOptedInNoticeBanner",(function(){var bannerId=(0,_render_opted_in_notice_banner.renderOptedInNoticeBanner)({onSeen:_this.setOptedInNoticeSeen,overlays:_this.overlays});_this.optedInNoticeBannerId=bannerId}));_defineProperty(this,"shouldShowOptInBanner",(function(){var isOptedIn=_this.telemetryService.getIsOptedIn();var bannerOnScreen=typeof _this.optInBannerId!=="undefined";return!bannerOnScreen&&isOptedIn===null}));_defineProperty(this,"renderOptInBanner",(function(){var bannerId=(0,_render_opt_in_banner.renderOptInBanner)({setOptIn:_this.onSetOptInClick,overlays:_this.overlays});_this.optInBannerId=bannerId}));_defineProperty(this,"onSetOptInClick",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(isOptIn){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(_this.optInBannerId){_this.overlays.banners.remove(_this.optInBannerId);_this.optInBannerId=undefined}_context.next=3;return _this.telemetryService.setOptIn(isOptIn);case 3:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}());_defineProperty(this,"setOptedInNoticeSeen",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(_this.optedInNoticeBannerId){_this.overlays.banners.remove(_this.optedInNoticeBannerId);_this.optedInNoticeBannerId=undefined}_context2.next=3;return _this.telemetryService.setUserHasSeenNotice();case 3:case"end":return _context2.stop()}}}),_callee2)}))));this.telemetryService=telemetryService;this.overlays=overlays};exports.TelemetryNotifications=TelemetryNotifications},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renderOptedInNoticeBanner=renderOptedInNoticeBanner;var _react=_interopRequireDefault(__webpack_require__(0));var _opted_in_notice_banner=__webpack_require__(16);var _public=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function renderOptedInNoticeBanner(_ref){var onSeen=_ref.onSeen,overlays=_ref.overlays;var mount=(0,_public.toMountPoint)(_react.default.createElement(_opted_in_notice_banner.OptedInNoticeBanner,{onSeenBanner:onSeen}));var bannerId=overlays.banners.add(mount,1e4);return bannerId}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.OptedInNoticeBanner=void 0;var React=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);var _i18n=__webpack_require__(2);var _constants=__webpack_require__(1);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var OptedInNoticeBanner=function(_React$PureComponent){_inherits(OptedInNoticeBanner,_React$PureComponent);function OptedInNoticeBanner(){_classCallCheck(this,OptedInNoticeBanner);return _possibleConstructorReturn(this,_getPrototypeOf(OptedInNoticeBanner).apply(this,arguments))}_createClass(OptedInNoticeBanner,[{key:"render",value:function render(){var onSeenBanner=this.props.onSeenBanner;var bannerTitle=_i18n.i18n.translate("telemetry.telemetryOptedInNoticeTitle",{defaultMessage:"Help us improve the Elastic Stack"});return React.createElement(_eui.EuiCallOut,{title:bannerTitle},React.createElement(_react2.FormattedMessage,{id:"telemetry.telemetryOptedInNoticeDescription",defaultMessage:"To learn about how usage data helps us manage and improve our products and services, see our {privacyStatementLink}. To stop collection, {disableLink}.",values:{privacyStatementLink:React.createElement(_eui.EuiLink,{onClick:onSeenBanner,href:_constants.PRIVACY_STATEMENT_URL,target:"_blank",rel:"noopener"},React.createElement(_react2.FormattedMessage,{id:"telemetry.telemetryOptedInPrivacyStatement",defaultMessage:"Privacy Statement"})),disableLink:React.createElement(_eui.EuiLink,{href:_constants.PATH_TO_ADVANCED_SETTINGS,onClick:onSeenBanner},React.createElement(_react2.FormattedMessage,{id:"telemetry.telemetryOptedInDisableUsage",defaultMessage:"disable usage data here"}))}}),React.createElement(_eui.EuiSpacer,{size:"s"}),React.createElement(_eui.EuiButton,{size:"s",onClick:onSeenBanner},React.createElement(_react2.FormattedMessage,{id:"telemetry.telemetryOptedInDismissMessage",defaultMessage:"Dismiss"})))}}]);return OptedInNoticeBanner}(React.PureComponent);exports.OptedInNoticeBanner=OptedInNoticeBanner},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renderOptInBanner=renderOptInBanner;var _react=_interopRequireDefault(__webpack_require__(0));var _opt_in_banner=__webpack_require__(18);var _public=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function renderOptInBanner(_ref){var setOptIn=_ref.setOptIn,overlays=_ref.overlays;var mount=(0,_public.toMountPoint)(_react.default.createElement(_opt_in_banner.OptInBanner,{onChangeOptInClick:setOptIn}));var bannerId=overlays.banners.add(mount,1e4);return bannerId}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.OptInBanner=void 0;var React=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);var _opt_in_message=__webpack_require__(19);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var OptInBanner=function(_React$PureComponent){_inherits(OptInBanner,_React$PureComponent);function OptInBanner(){_classCallCheck(this,OptInBanner);return _possibleConstructorReturn(this,_getPrototypeOf(OptInBanner).apply(this,arguments))}_createClass(OptInBanner,[{key:"render",value:function render(){var onChangeOptInClick=this.props.onChangeOptInClick;var title=React.createElement(_react2.FormattedMessage,{id:"telemetry.welcomeBanner.title",defaultMessage:"Help us improve the Elastic Stack"});return React.createElement(_eui.EuiCallOut,{iconType:"questionInCircle",title:title},React.createElement(_opt_in_message.OptInMessage,null),React.createElement(_eui.EuiSpacer,{size:"s"}),React.createElement(_eui.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},React.createElement(_eui.EuiFlexItem,{grow:false},React.createElement(_eui.EuiButton,{size:"s","data-test-subj":"enable",onClick:function onClick(){return onChangeOptInClick(true)}},React.createElement(_react2.FormattedMessage,{id:"telemetry.welcomeBanner.enableButtonLabel",defaultMessage:"Enable"}))),React.createElement(_eui.EuiFlexItem,{grow:false},React.createElement(_eui.EuiButton,{size:"s","data-test-subj":"disable",onClick:function onClick(){return onChangeOptInClick(false)}},React.createElement(_react2.FormattedMessage,{id:"telemetry.welcomeBanner.disableButtonLabel",defaultMessage:"Disable"})))))}}]);return OptInBanner}(React.PureComponent);exports.OptInBanner=OptInBanner},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.OptInMessage=void 0;var React=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);var _constants=__webpack_require__(1);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var OptInMessage=function(_React$PureComponent){_inherits(OptInMessage,_React$PureComponent);function OptInMessage(){_classCallCheck(this,OptInMessage);return _possibleConstructorReturn(this,_getPrototypeOf(OptInMessage).apply(this,arguments))}_createClass(OptInMessage,[{key:"render",value:function render(){return React.createElement(React.Fragment,null,React.createElement(_react2.FormattedMessage,{id:"telemetry.telemetryBannerDescription",defaultMessage:"Want to help us improve the Elastic Stack? Data usage collection is currently disabled. Enabling data usage collection helps us manage and improve our products and services. See our {privacyStatementLink} for more details.",values:{privacyStatementLink:React.createElement(_eui.EuiLink,{href:_constants.PRIVACY_STATEMENT_URL,target:"_blank",rel:"noopener"},React.createElement(_react2.FormattedMessage,{id:"telemetry.welcomeBanner.telemetryConfigDetailsDescription.telemetryPrivacyStatementLinkText",defaultMessage:"Privacy Statement"}))}}))}}]);return OptInMessage}(React.PureComponent);exports.OptInMessage=OptInMessage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getTelemetryOptIn",{enumerable:true,get:function get(){return _get_telemetry_opt_in.getTelemetryOptIn}});Object.defineProperty(exports,"getTelemetrySendUsageFrom",{enumerable:true,get:function get(){return _get_telemetry_send_usage_from.getTelemetrySendUsageFrom}});Object.defineProperty(exports,"getTelemetryAllowChangingOptInStatus",{enumerable:true,get:function get(){return _get_telemetry_allow_changing_opt_in_status.getTelemetryAllowChangingOptInStatus}});Object.defineProperty(exports,"getTelemetryFailureDetails",{enumerable:true,get:function get(){return _get_telemetry_failure_details.getTelemetryFailureDetails}});Object.defineProperty(exports,"TelemetryFailureDetails",{enumerable:true,get:function get(){return _get_telemetry_failure_details.TelemetryFailureDetails}});var _get_telemetry_opt_in=__webpack_require__(21);var _get_telemetry_send_usage_from=__webpack_require__(24);var _get_telemetry_allow_changing_opt_in_status=__webpack_require__(25);var _get_telemetry_failure_details=__webpack_require__(26)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTelemetryOptIn=void 0;var _semver=_interopRequireDefault(__webpack_require__(22));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getTelemetryOptIn=function getTelemetryOptIn(_ref){var telemetrySavedObject=_ref.telemetrySavedObject,currentKibanaVersion=_ref.currentKibanaVersion,allowChangingOptInStatus=_ref.allowChangingOptInStatus,configTelemetryOptIn=_ref.configTelemetryOptIn;if(typeof configTelemetryOptIn==="boolean"&&!allowChangingOptInStatus){return configTelemetryOptIn}if(telemetrySavedObject===false){return false}if(telemetrySavedObject===null||typeof telemetrySavedObject.enabled!=="boolean"){return configTelemetryOptIn}var savedOptIn=telemetrySavedObject.enabled;if(savedOptIn===true)return savedOptIn;var lastKibanaVersion=telemetrySavedObject.lastVersionChecked;if(typeof lastKibanaVersion!=="string")return null;if(lastKibanaVersion===currentKibanaVersion)return savedOptIn;var lastSemver=parseSemver(lastKibanaVersion);var currentSemver=parseSemver(currentKibanaVersion);if(lastSemver==null||currentSemver==null)return null;if(currentSemver.major>lastSemver.major)return null;if(currentSemver.major===lastSemver.major){if(currentSemver.minor>lastSemver.minor)return null}return savedOptIn};exports.getTelemetryOptIn=getTelemetryOptIn;function parseSemver(version){try{return _semver.default.parse(version)}catch(err){return null}}},function(module,exports,__webpack_require__){(function(process){exports=module.exports=SemVer;var debug;if(typeof process==="object"&&Object({IS_KIBANA_DISTRIBUTABLE:"true"})&&Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG)){debug=function(){var args=Array.prototype.slice.call(arguments,0);args.unshift("SEMVER");console.log.apply(console,args)}}else{debug=function(){}}exports.SEMVER_SPEC_VERSION="2.0.0";var MAX_LENGTH=256;var MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;var MAX_SAFE_COMPONENT_LENGTH=16;var re=exports.re=[];var src=exports.src=[];var R=0;var NUMERICIDENTIFIER=R++;src[NUMERICIDENTIFIER]="0|[1-9]\\d*";var NUMERICIDENTIFIERLOOSE=R++;src[NUMERICIDENTIFIERLOOSE]="[0-9]+";var NONNUMERICIDENTIFIER=R++;src[NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var MAINVERSION=R++;src[MAINVERSION]="("+src[NUMERICIDENTIFIER]+")\\."+"("+src[NUMERICIDENTIFIER]+")\\."+"("+src[NUMERICIDENTIFIER]+")";var MAINVERSIONLOOSE=R++;src[MAINVERSIONLOOSE]="("+src[NUMERICIDENTIFIERLOOSE]+")\\."+"("+src[NUMERICIDENTIFIERLOOSE]+")\\."+"("+src[NUMERICIDENTIFIERLOOSE]+")";var PRERELEASEIDENTIFIER=R++;src[PRERELEASEIDENTIFIER]="(?:"+src[NUMERICIDENTIFIER]+"|"+src[NONNUMERICIDENTIFIER]+")";var PRERELEASEIDENTIFIERLOOSE=R++;src[PRERELEASEIDENTIFIERLOOSE]="(?:"+src[NUMERICIDENTIFIERLOOSE]+"|"+src[NONNUMERICIDENTIFIER]+")";var PRERELEASE=R++;src[PRERELEASE]="(?:-("+src[PRERELEASEIDENTIFIER]+"(?:\\."+src[PRERELEASEIDENTIFIER]+")*))";var PRERELEASELOOSE=R++;src[PRERELEASELOOSE]="(?:-?("+src[PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+src[PRERELEASEIDENTIFIERLOOSE]+")*))";var BUILDIDENTIFIER=R++;src[BUILDIDENTIFIER]="[0-9A-Za-z-]+";var BUILD=R++;src[BUILD]="(?:\\+("+src[BUILDIDENTIFIER]+"(?:\\."+src[BUILDIDENTIFIER]+")*))";var FULL=R++;var FULLPLAIN="v?"+src[MAINVERSION]+src[PRERELEASE]+"?"+src[BUILD]+"?";src[FULL]="^"+FULLPLAIN+"$";var LOOSEPLAIN="[v=\\s]*"+src[MAINVERSIONLOOSE]+src[PRERELEASELOOSE]+"?"+src[BUILD]+"?";var LOOSE=R++;src[LOOSE]="^"+LOOSEPLAIN+"$";var GTLT=R++;src[GTLT]="((?:<|>)?=?)";var XRANGEIDENTIFIERLOOSE=R++;src[XRANGEIDENTIFIERLOOSE]=src[NUMERICIDENTIFIERLOOSE]+"|x|X|\\*";var XRANGEIDENTIFIER=R++;src[XRANGEIDENTIFIER]=src[NUMERICIDENTIFIER]+"|x|X|\\*";var XRANGEPLAIN=R++;src[XRANGEPLAIN]="[v=\\s]*("+src[XRANGEIDENTIFIER]+")"+"(?:\\.("+src[XRANGEIDENTIFIER]+")"+"(?:\\.("+src[XRANGEIDENTIFIER]+")"+"(?:"+src[PRERELEASE]+")?"+src[BUILD]+"?"+")?)?";var XRANGEPLAINLOOSE=R++;src[XRANGEPLAINLOOSE]="[v=\\s]*("+src[XRANGEIDENTIFIERLOOSE]+")"+"(?:\\.("+src[XRANGEIDENTIFIERLOOSE]+")"+"(?:\\.("+src[XRANGEIDENTIFIERLOOSE]+")"+"(?:"+src[PRERELEASELOOSE]+")?"+src[BUILD]+"?"+")?)?";var XRANGE=R++;src[XRANGE]="^"+src[GTLT]+"\\s*"+src[XRANGEPLAIN]+"$";var XRANGELOOSE=R++;src[XRANGELOOSE]="^"+src[GTLT]+"\\s*"+src[XRANGEPLAINLOOSE]+"$";var COERCE=R++;src[COERCE]="(?:^|[^\\d])"+"(\\d{1,"+MAX_SAFE_COMPONENT_LENGTH+"})"+"(?:\\.(\\d{1,"+MAX_SAFE_COMPONENT_LENGTH+"}))?"+"(?:\\.(\\d{1,"+MAX_SAFE_COMPONENT_LENGTH+"}))?"+"(?:$|[^\\d])";var LONETILDE=R++;src[LONETILDE]="(?:~>?)";var TILDETRIM=R++;src[TILDETRIM]="(\\s*)"+src[LONETILDE]+"\\s+";re[TILDETRIM]=new RegExp(src[TILDETRIM],"g");var tildeTrimReplace="$1~";var TILDE=R++;src[TILDE]="^"+src[LONETILDE]+src[XRANGEPLAIN]+"$";var TILDELOOSE=R++;src[TILDELOOSE]="^"+src[LONETILDE]+src[XRANGEPLAINLOOSE]+"$";var LONECARET=R++;src[LONECARET]="(?:\\^)";var CARETTRIM=R++;src[CARETTRIM]="(\\s*)"+src[LONECARET]+"\\s+";re[CARETTRIM]=new RegExp(src[CARETTRIM],"g");var caretTrimReplace="$1^";var CARET=R++;src[CARET]="^"+src[LONECARET]+src[XRANGEPLAIN]+"$";var CARETLOOSE=R++;src[CARETLOOSE]="^"+src[LONECARET]+src[XRANGEPLAINLOOSE]+"$";var COMPARATORLOOSE=R++;src[COMPARATORLOOSE]="^"+src[GTLT]+"\\s*("+LOOSEPLAIN+")$|^$";var COMPARATOR=R++;src[COMPARATOR]="^"+src[GTLT]+"\\s*("+FULLPLAIN+")$|^$";var COMPARATORTRIM=R++;src[COMPARATORTRIM]="(\\s*)"+src[GTLT]+"\\s*("+LOOSEPLAIN+"|"+src[XRANGEPLAIN]+")";re[COMPARATORTRIM]=new RegExp(src[COMPARATORTRIM],"g");var comparatorTrimReplace="$1$2$3";var HYPHENRANGE=R++;src[HYPHENRANGE]="^\\s*("+src[XRANGEPLAIN]+")"+"\\s+-\\s+"+"("+src[XRANGEPLAIN]+")"+"\\s*$";var HYPHENRANGELOOSE=R++;src[HYPHENRANGELOOSE]="^\\s*("+src[XRANGEPLAINLOOSE]+")"+"\\s+-\\s+"+"("+src[XRANGEPLAINLOOSE]+")"+"\\s*$";var STAR=R++;src[STAR]="(<|>)?=?\\s*\\*";for(var i=0;i<R;i++){debug(i,src[i]);if(!re[i]){re[i]=new RegExp(src[i])}}exports.parse=parse;function parse(version,options){if(!options||typeof options!=="object"){options={loose:!!options,includePrerelease:false}}if(version instanceof SemVer){return version}if(typeof version!=="string"){return null}if(version.length>MAX_LENGTH){return null}var r=options.loose?re[LOOSE]:re[FULL];if(!r.test(version)){return null}try{return new SemVer(version,options)}catch(er){return null}}exports.valid=valid;function valid(version,options){var v=parse(version,options);return v?v.version:null}exports.clean=clean;function clean(version,options){var s=parse(version.trim().replace(/^[=v]+/,""),options);return s?s.version:null}exports.SemVer=SemVer;function SemVer(version,options){if(!options||typeof options!=="object"){options={loose:!!options,includePrerelease:false}}if(version instanceof SemVer){if(version.loose===options.loose){return version}else{version=version.version}}else if(typeof version!=="string"){throw new TypeError("Invalid Version: "+version)}if(version.length>MAX_LENGTH){throw new TypeError("version is longer than "+MAX_LENGTH+" characters")}if(!(this instanceof SemVer)){return new SemVer(version,options)}debug("SemVer",version,options);this.options=options;this.loose=!!options.loose;var m=version.trim().match(options.loose?re[LOOSE]:re[FULL]);if(!m){throw new TypeError("Invalid Version: "+version)}this.raw=version;this.major=+m[1];this.minor=+m[2];this.patch=+m[3];if(this.major>MAX_SAFE_INTEGER||this.major<0){throw new TypeError("Invalid major version")}if(this.minor>MAX_SAFE_INTEGER||this.minor<0){throw new TypeError("Invalid minor version")}if(this.patch>MAX_SAFE_INTEGER||this.patch<0){throw new TypeError("Invalid patch version")}if(!m[4]){this.prerelease=[]}else{this.prerelease=m[4].split(".").map((function(id){if(/^[0-9]+$/.test(id)){var num=+id;if(num>=0&&num<MAX_SAFE_INTEGER){return num}}return id}))}this.build=m[5]?m[5].split("."):[];this.format()}SemVer.prototype.format=function(){this.version=this.major+"."+this.minor+"."+this.patch;if(this.prerelease.length){this.version+="-"+this.prerelease.join(".")}return this.version};SemVer.prototype.toString=function(){return this.version};SemVer.prototype.compare=function(other){debug("SemVer.compare",this.version,this.options,other);if(!(other instanceof SemVer)){other=new SemVer(other,this.options)}return this.compareMain(other)||this.comparePre(other)};SemVer.prototype.compareMain=function(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options)}return compareIdentifiers(this.major,other.major)||compareIdentifiers(this.minor,other.minor)||compareIdentifiers(this.patch,other.patch)};SemVer.prototype.comparePre=function(other){if(!(other instanceof SemVer)){other=new SemVer(other,this.options)}if(this.prerelease.length&&!other.prerelease.length){return-1}else if(!this.prerelease.length&&other.prerelease.length){return 1}else if(!this.prerelease.length&&!other.prerelease.length){return 0}var i=0;do{var a=this.prerelease[i];var b=other.prerelease[i];debug("prerelease compare",i,a,b);if(a===undefined&&b===undefined){return 0}else if(b===undefined){return 1}else if(a===undefined){return-1}else if(a===b){continue}else{return compareIdentifiers(a,b)}}while(++i)};SemVer.prototype.inc=function(release,identifier){switch(release){case"premajor":this.prerelease.length=0;this.patch=0;this.minor=0;this.major++;this.inc("pre",identifier);break;case"preminor":this.prerelease.length=0;this.patch=0;this.minor++;this.inc("pre",identifier);break;case"prepatch":this.prerelease.length=0;this.inc("patch",identifier);this.inc("pre",identifier);break;case"prerelease":if(this.prerelease.length===0){this.inc("patch",identifier)}this.inc("pre",identifier);break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0){this.major++}this.minor=0;this.patch=0;this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0){this.minor++}this.patch=0;this.prerelease=[];break;case"patch":if(this.prerelease.length===0){this.patch++}this.prerelease=[];break;case"pre":if(this.prerelease.length===0){this.prerelease=[0]}else{var i=this.prerelease.length;while(--i>=0){if(typeof this.prerelease[i]==="number"){this.prerelease[i]++;i=-2}}if(i===-1){this.prerelease.push(0)}}if(identifier){if(this.prerelease[0]===identifier){if(isNaN(this.prerelease[1])){this.prerelease=[identifier,0]}}else{this.prerelease=[identifier,0]}}break;default:throw new Error("invalid increment argument: "+release)}this.format();this.raw=this.version;return this};exports.inc=inc;function inc(version,release,loose,identifier){if(typeof loose==="string"){identifier=loose;loose=undefined}try{return new SemVer(version,loose).inc(release,identifier).version}catch(er){return null}}exports.diff=diff;function diff(version1,version2){if(eq(version1,version2)){return null}else{var v1=parse(version1);var v2=parse(version2);var prefix="";if(v1.prerelease.length||v2.prerelease.length){prefix="pre";var defaultResult="prerelease"}for(var key in v1){if(key==="major"||key==="minor"||key==="patch"){if(v1[key]!==v2[key]){return prefix+key}}}return defaultResult}}exports.compareIdentifiers=compareIdentifiers;var numeric=/^[0-9]+$/;function compareIdentifiers(a,b){var anum=numeric.test(a);var bnum=numeric.test(b);if(anum&&bnum){a=+a;b=+b}return a===b?0:anum&&!bnum?-1:bnum&&!anum?1:a<b?-1:1}exports.rcompareIdentifiers=rcompareIdentifiers;function rcompareIdentifiers(a,b){return compareIdentifiers(b,a)}exports.major=major;function major(a,loose){return new SemVer(a,loose).major}exports.minor=minor;function minor(a,loose){return new SemVer(a,loose).minor}exports.patch=patch;function patch(a,loose){return new SemVer(a,loose).patch}exports.compare=compare;function compare(a,b,loose){return new SemVer(a,loose).compare(new SemVer(b,loose))}exports.compareLoose=compareLoose;function compareLoose(a,b){return compare(a,b,true)}exports.rcompare=rcompare;function rcompare(a,b,loose){return compare(b,a,loose)}exports.sort=sort;function sort(list,loose){return list.sort((function(a,b){return exports.compare(a,b,loose)}))}exports.rsort=rsort;function rsort(list,loose){return list.sort((function(a,b){return exports.rcompare(a,b,loose)}))}exports.gt=gt;function gt(a,b,loose){return compare(a,b,loose)>0}exports.lt=lt;function lt(a,b,loose){return compare(a,b,loose)<0}exports.eq=eq;function eq(a,b,loose){return compare(a,b,loose)===0}exports.neq=neq;function neq(a,b,loose){return compare(a,b,loose)!==0}exports.gte=gte;function gte(a,b,loose){return compare(a,b,loose)>=0}exports.lte=lte;function lte(a,b,loose){return compare(a,b,loose)<=0}exports.cmp=cmp;function cmp(a,op,b,loose){switch(op){case"===":if(typeof a==="object")a=a.version;if(typeof b==="object")b=b.version;return a===b;case"!==":if(typeof a==="object")a=a.version;if(typeof b==="object")b=b.version;return a!==b;case"":case"=":case"==":return eq(a,b,loose);case"!=":return neq(a,b,loose);case">":return gt(a,b,loose);case">=":return gte(a,b,loose);case"<":return lt(a,b,loose);case"<=":return lte(a,b,loose);default:throw new TypeError("Invalid operator: "+op)}}exports.Comparator=Comparator;function Comparator(comp,options){if(!options||typeof options!=="object"){options={loose:!!options,includePrerelease:false}}if(comp instanceof Comparator){if(comp.loose===!!options.loose){return comp}else{comp=comp.value}}if(!(this instanceof Comparator)){return new Comparator(comp,options)}debug("comparator",comp,options);this.options=options;this.loose=!!options.loose;this.parse(comp);if(this.semver===ANY){this.value=""}else{this.value=this.operator+this.semver.version}debug("comp",this)}var ANY={};Comparator.prototype.parse=function(comp){var r=this.options.loose?re[COMPARATORLOOSE]:re[COMPARATOR];var m=comp.match(r);if(!m){throw new TypeError("Invalid comparator: "+comp)}this.operator=m[1];if(this.operator==="="){this.operator=""}if(!m[2]){this.semver=ANY}else{this.semver=new SemVer(m[2],this.options.loose)}};Comparator.prototype.toString=function(){return this.value};Comparator.prototype.test=function(version){debug("Comparator.test",version,this.options.loose);if(this.semver===ANY){return true}if(typeof version==="string"){version=new SemVer(version,this.options)}return cmp(version,this.operator,this.semver,this.options)};Comparator.prototype.intersects=function(comp,options){if(!(comp instanceof Comparator)){throw new TypeError("a Comparator is required")}if(!options||typeof options!=="object"){options={loose:!!options,includePrerelease:false}}var rangeTmp;if(this.operator===""){rangeTmp=new Range(comp.value,options);return satisfies(this.value,rangeTmp,options)}else if(comp.operator===""){rangeTmp=new Range(this.value,options);return satisfies(comp.semver,rangeTmp,options)}var sameDirectionIncreasing=(this.operator===">="||this.operator===">")&&(comp.operator===">="||comp.operator===">");var sameDirectionDecreasing=(this.operator==="<="||this.operator==="<")&&(comp.operator==="<="||comp.operator==="<");var sameSemVer=this.semver.version===comp.semver.version;var differentDirectionsInclusive=(this.operator===">="||this.operator==="<=")&&(comp.operator===">="||comp.operator==="<=");var oppositeDirectionsLessThan=cmp(this.semver,"<",comp.semver,options)&&((this.operator===">="||this.operator===">")&&(comp.operator==="<="||comp.operator==="<"));var oppositeDirectionsGreaterThan=cmp(this.semver,">",comp.semver,options)&&((this.operator==="<="||this.operator==="<")&&(comp.operator===">="||comp.operator===">"));return sameDirectionIncreasing||sameDirectionDecreasing||sameSemVer&&differentDirectionsInclusive||oppositeDirectionsLessThan||oppositeDirectionsGreaterThan};exports.Range=Range;function Range(range,options){if(!options||typeof options!=="object"){options={loose:!!options,includePrerelease:false}}if(range instanceof Range){if(range.loose===!!options.loose&&range.includePrerelease===!!options.includePrerelease){return range}else{return new Range(range.raw,options)}}if(range instanceof Comparator){return new Range(range.value,options)}if(!(this instanceof Range)){return new Range(range,options)}this.options=options;this.loose=!!options.loose;this.includePrerelease=!!options.includePrerelease;this.raw=range;this.set=range.split(/\s*\|\|\s*/).map((function(range){return this.parseRange(range.trim())}),this).filter((function(c){return c.length}));if(!this.set.length){throw new TypeError("Invalid SemVer Range: "+range)}this.format()}Range.prototype.format=function(){this.range=this.set.map((function(comps){return comps.join(" ").trim()})).join("||").trim();return this.range};Range.prototype.toString=function(){return this.range};Range.prototype.parseRange=function(range){var loose=this.options.loose;range=range.trim();var hr=loose?re[HYPHENRANGELOOSE]:re[HYPHENRANGE];range=range.replace(hr,hyphenReplace);debug("hyphen replace",range);range=range.replace(re[COMPARATORTRIM],comparatorTrimReplace);debug("comparator trim",range,re[COMPARATORTRIM]);range=range.replace(re[TILDETRIM],tildeTrimReplace);range=range.replace(re[CARETTRIM],caretTrimReplace);range=range.split(/\s+/).join(" ");var compRe=loose?re[COMPARATORLOOSE]:re[COMPARATOR];var set=range.split(" ").map((function(comp){return parseComparator(comp,this.options)}),this).join(" ").split(/\s+/);if(this.options.loose){set=set.filter((function(comp){return!!comp.match(compRe)}))}set=set.map((function(comp){return new Comparator(comp,this.options)}),this);return set};Range.prototype.intersects=function(range,options){if(!(range instanceof Range)){throw new TypeError("a Range is required")}return this.set.some((function(thisComparators){return thisComparators.every((function(thisComparator){return range.set.some((function(rangeComparators){return rangeComparators.every((function(rangeComparator){return thisComparator.intersects(rangeComparator,options)}))}))}))}))};exports.toComparators=toComparators;function toComparators(range,options){return new Range(range,options).set.map((function(comp){return comp.map((function(c){return c.value})).join(" ").trim().split(" ")}))}function parseComparator(comp,options){debug("comp",comp,options);comp=replaceCarets(comp,options);debug("caret",comp);comp=replaceTildes(comp,options);debug("tildes",comp);comp=replaceXRanges(comp,options);debug("xrange",comp);comp=replaceStars(comp,options);debug("stars",comp);return comp}function isX(id){return!id||id.toLowerCase()==="x"||id==="*"}function replaceTildes(comp,options){return comp.trim().split(/\s+/).map((function(comp){return replaceTilde(comp,options)})).join(" ")}function replaceTilde(comp,options){var r=options.loose?re[TILDELOOSE]:re[TILDE];return comp.replace(r,(function(_,M,m,p,pr){debug("tilde",comp,_,M,m,p,pr);var ret;if(isX(M)){ret=""}else if(isX(m)){ret=">="+M+".0.0 <"+(+M+1)+".0.0"}else if(isX(p)){ret=">="+M+"."+m+".0 <"+M+"."+(+m+1)+".0"}else if(pr){debug("replaceTilde pr",pr);ret=">="+M+"."+m+"."+p+"-"+pr+" <"+M+"."+(+m+1)+".0"}else{ret=">="+M+"."+m+"."+p+" <"+M+"."+(+m+1)+".0"}debug("tilde return",ret);return ret}))}function replaceCarets(comp,options){return comp.trim().split(/\s+/).map((function(comp){return replaceCaret(comp,options)})).join(" ")}function replaceCaret(comp,options){debug("caret",comp,options);var r=options.loose?re[CARETLOOSE]:re[CARET];return comp.replace(r,(function(_,M,m,p,pr){debug("caret",comp,_,M,m,p,pr);var ret;if(isX(M)){ret=""}else if(isX(m)){ret=">="+M+".0.0 <"+(+M+1)+".0.0"}else if(isX(p)){if(M==="0"){ret=">="+M+"."+m+".0 <"+M+"."+(+m+1)+".0"}else{ret=">="+M+"."+m+".0 <"+(+M+1)+".0.0"}}else if(pr){debug("replaceCaret pr",pr);if(M==="0"){if(m==="0"){ret=">="+M+"."+m+"."+p+"-"+pr+" <"+M+"."+m+"."+(+p+1)}else{ret=">="+M+"."+m+"."+p+"-"+pr+" <"+M+"."+(+m+1)+".0"}}else{ret=">="+M+"."+m+"."+p+"-"+pr+" <"+(+M+1)+".0.0"}}else{debug("no pr");if(M==="0"){if(m==="0"){ret=">="+M+"."+m+"."+p+" <"+M+"."+m+"."+(+p+1)}else{ret=">="+M+"."+m+"."+p+" <"+M+"."+(+m+1)+".0"}}else{ret=">="+M+"."+m+"."+p+" <"+(+M+1)+".0.0"}}debug("caret return",ret);return ret}))}function replaceXRanges(comp,options){debug("replaceXRanges",comp,options);return comp.split(/\s+/).map((function(comp){return replaceXRange(comp,options)})).join(" ")}function replaceXRange(comp,options){comp=comp.trim();var r=options.loose?re[XRANGELOOSE]:re[XRANGE];return comp.replace(r,(function(ret,gtlt,M,m,p,pr){debug("xRange",comp,ret,gtlt,M,m,p,pr);var xM=isX(M);var xm=xM||isX(m);var xp=xm||isX(p);var anyX=xp;if(gtlt==="="&&anyX){gtlt=""}if(xM){if(gtlt===">"||gtlt==="<"){ret="<0.0.0"}else{ret="*"}}else if(gtlt&&anyX){if(xm){m=0}p=0;if(gtlt===">"){gtlt=">=";if(xm){M=+M+1;m=0;p=0}else{m=+m+1;p=0}}else if(gtlt==="<="){gtlt="<";if(xm){M=+M+1}else{m=+m+1}}ret=gtlt+M+"."+m+"."+p}else if(xm){ret=">="+M+".0.0 <"+(+M+1)+".0.0"}else if(xp){ret=">="+M+"."+m+".0 <"+M+"."+(+m+1)+".0"}debug("xRange return",ret);return ret}))}function replaceStars(comp,options){debug("replaceStars",comp,options);return comp.trim().replace(re[STAR],"")}function hyphenReplace($0,from,fM,fm,fp,fpr,fb,to,tM,tm,tp,tpr,tb){if(isX(fM)){from=""}else if(isX(fm)){from=">="+fM+".0.0"}else if(isX(fp)){from=">="+fM+"."+fm+".0"}else{from=">="+from}if(isX(tM)){to=""}else if(isX(tm)){to="<"+(+tM+1)+".0.0"}else if(isX(tp)){to="<"+tM+"."+(+tm+1)+".0"}else if(tpr){to="<="+tM+"."+tm+"."+tp+"-"+tpr}else{to="<="+to}return(from+" "+to).trim()}Range.prototype.test=function(version){if(!version){return false}if(typeof version==="string"){version=new SemVer(version,this.options)}for(var i=0;i<this.set.length;i++){if(testSet(this.set[i],version,this.options)){return true}}return false};function testSet(set,version,options){for(var i=0;i<set.length;i++){if(!set[i].test(version)){return false}}if(version.prerelease.length&&!options.includePrerelease){for(i=0;i<set.length;i++){debug(set[i].semver);if(set[i].semver===ANY){continue}if(set[i].semver.prerelease.length>0){var allowed=set[i].semver;if(allowed.major===version.major&&allowed.minor===version.minor&&allowed.patch===version.patch){return true}}}return false}return true}exports.satisfies=satisfies;function satisfies(version,range,options){try{range=new Range(range,options)}catch(er){return false}return range.test(version)}exports.maxSatisfying=maxSatisfying;function maxSatisfying(versions,range,options){var max=null;var maxSV=null;try{var rangeObj=new Range(range,options)}catch(er){return null}versions.forEach((function(v){if(rangeObj.test(v)){if(!max||maxSV.compare(v)===-1){max=v;maxSV=new SemVer(max,options)}}}));return max}exports.minSatisfying=minSatisfying;function minSatisfying(versions,range,options){var min=null;var minSV=null;try{var rangeObj=new Range(range,options)}catch(er){return null}versions.forEach((function(v){if(rangeObj.test(v)){if(!min||minSV.compare(v)===1){min=v;minSV=new SemVer(min,options)}}}));return min}exports.minVersion=minVersion;function minVersion(range,loose){range=new Range(range,loose);var minver=new SemVer("0.0.0");if(range.test(minver)){return minver}minver=new SemVer("0.0.0-0");if(range.test(minver)){return minver}minver=null;for(var i=0;i<range.set.length;++i){var comparators=range.set[i];comparators.forEach((function(comparator){var compver=new SemVer(comparator.semver.version);switch(comparator.operator){case">":if(compver.prerelease.length===0){compver.patch++}else{compver.prerelease.push(0)}compver.raw=compver.format();case"":case">=":if(!minver||gt(minver,compver)){minver=compver}break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+comparator.operator)}}))}if(minver&&range.test(minver)){return minver}return null}exports.validRange=validRange;function validRange(range,options){try{return new Range(range,options).range||"*"}catch(er){return null}}exports.ltr=ltr;function ltr(version,range,options){return outside(version,range,"<",options)}exports.gtr=gtr;function gtr(version,range,options){return outside(version,range,">",options)}exports.outside=outside;function outside(version,range,hilo,options){version=new SemVer(version,options);range=new Range(range,options);var gtfn,ltefn,ltfn,comp,ecomp;switch(hilo){case">":gtfn=gt;ltefn=lte;ltfn=lt;comp=">";ecomp=">=";break;case"<":gtfn=lt;ltefn=gte;ltfn=gt;comp="<";ecomp="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(version,range,options)){return false}for(var i=0;i<range.set.length;++i){var comparators=range.set[i];var high=null;var low=null;comparators.forEach((function(comparator){if(comparator.semver===ANY){comparator=new Comparator(">=0.0.0")}high=high||comparator;low=low||comparator;if(gtfn(comparator.semver,high.semver,options)){high=comparator}else if(ltfn(comparator.semver,low.semver,options)){low=comparator}}));if(high.operator===comp||high.operator===ecomp){return false}if((!low.operator||low.operator===comp)&&ltefn(version,low.semver)){return false}else if(low.operator===ecomp&&ltfn(version,low.semver)){return false}}return true}exports.prerelease=prerelease;function prerelease(version,options){var parsed=parse(version,options);return parsed&&parsed.prerelease.length?parsed.prerelease:null}exports.intersects=intersects;function intersects(r1,r2,options){r1=new Range(r1,options);r2=new Range(r2,options);return r1.intersects(r2)}exports.coerce=coerce;function coerce(version){if(version instanceof SemVer){return version}if(typeof version!=="string"){return null}var match=version.match(re[COERCE]);if(match==null){return null}return parse(match[1]+"."+(match[2]||"0")+"."+(match[3]||"0"))}}).call(this,__webpack_require__(23))},function(module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTelemetrySendUsageFrom=getTelemetrySendUsageFrom;function getTelemetrySendUsageFrom(_ref){var telemetrySavedObject=_ref.telemetrySavedObject,configTelemetrySendUsageFrom=_ref.configTelemetrySendUsageFrom;if(!telemetrySavedObject){return configTelemetrySendUsageFrom}if(typeof telemetrySavedObject.sendUsageFrom==="undefined"){return configTelemetrySendUsageFrom}return telemetrySavedObject.sendUsageFrom}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTelemetryAllowChangingOptInStatus=getTelemetryAllowChangingOptInStatus;function getTelemetryAllowChangingOptInStatus(_ref){var telemetrySavedObject=_ref.telemetrySavedObject,configTelemetryAllowChangingOptInStatus=_ref.configTelemetryAllowChangingOptInStatus;if(!telemetrySavedObject){return configTelemetryAllowChangingOptInStatus}if(typeof telemetrySavedObject.allowChangingOptInStatus==="undefined"){return configTelemetryAllowChangingOptInStatus}return telemetrySavedObject.allowChangingOptInStatus}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTelemetryFailureDetails=getTelemetryFailureDetails;function getTelemetryFailureDetails(_ref){var telemetrySavedObject=_ref.telemetrySavedObject;if(!telemetrySavedObject){return{failureVersion:undefined,failureCount:0}}var reportFailureCount=telemetrySavedObject.reportFailureCount,reportFailureVersion=telemetrySavedObject.reportFailureVersion;return{failureCount:typeof reportFailureCount==="number"?reportFailureCount:0,failureVersion:typeof reportFailureVersion==="string"?reportFailureVersion:undefined}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getNotifyUserAboutOptInDefault=getNotifyUserAboutOptInDefault;function getNotifyUserAboutOptInDefault(_ref){var allowChangingOptInStatus=_ref.allowChangingOptInStatus,telemetrySavedObject=_ref.telemetrySavedObject,telemetryOptedIn=_ref.telemetryOptedIn,configTelemetryOptIn=_ref.configTelemetryOptIn;if(allowChangingOptInStatus===false){return false}if(telemetrySavedObject&&telemetrySavedObject.userHasSeenNotice===true){return false}return telemetryOptedIn===true&&configTelemetryOptIn===true}}]);