var __kbnBundles__=typeof __kbnBundles__==="object"?__kbnBundles__:{};__kbnBundles__["plugin/share"]=function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}}var installedModules={};var installedChunks={0:0};function jsonpScriptSrc(chunkId){return __webpack_require__.p+""+({}[chunkId]||chunkId)+".plugin.js"}function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="__REPLACE_WITH_PUBLIC_PATH__";__webpack_require__.oe=function(err){console.error(err);throw err};var jsonpArray=window["share_bundle_jsonpfunction"]=window["share_bundle_jsonpfunction"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;return __webpack_require__(__webpack_require__.s=8)}([function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";var punycode=__webpack_require__(16);var util=__webpack_require__(19);exports.parse=urlParse;exports.resolve=urlResolve;exports.resolveObject=urlResolveObject;exports.format=urlFormat;exports.Url=Url;function Url(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:true,"javascript:":true},hostlessProtocol={javascript:true,"javascript:":true},slashedProtocol={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},querystring=__webpack_require__(20);function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&util.isObject(url)&&url instanceof Url)return url;var u=new Url;u.parse(url,parseQueryString,slashesDenoteHost);return u}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!util.isString(url)){throw new TypeError("Parameter 'url' must be a string, not "+typeof url)}var queryIndex=url.indexOf("?"),splitter=queryIndex!==-1&&queryIndex<url.indexOf("#")?"?":"#",uSplit=url.split(splitter),slashRegex=/\\/g;uSplit[0]=uSplit[0].replace(slashRegex,"/");url=uSplit.join(splitter);var rest=url;rest=rest.trim();if(!slashesDenoteHost&&url.split("#").length===1){var simplePath=simplePathPattern.exec(rest);if(simplePath){this.path=rest;this.href=rest;this.pathname=simplePath[1];if(simplePath[2]){this.search=simplePath[2];if(parseQueryString){this.query=querystring.parse(this.search.substr(1))}else{this.query=this.search.substr(1)}}else if(parseQueryString){this.search="";this.query={}}return this}}var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto;rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes=rest.substr(0,2)==="//";if(slashes&&!(proto&&hostlessProtocol[proto])){rest=rest.substr(2);this.slashes=true}}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){var hostEnd=-1;for(var i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}var auth,atSign;if(hostEnd===-1){atSign=rest.lastIndexOf("@")}else{atSign=rest.lastIndexOf("@",hostEnd)}if(atSign!==-1){auth=rest.slice(0,atSign);rest=rest.slice(atSign+1);this.auth=decodeURIComponent(auth)}hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}if(hostEnd===-1)hostEnd=rest.length;this.host=rest.slice(0,hostEnd);rest=rest.slice(hostEnd);this.parseHost();this.hostname=this.hostname||"";var ipv6Hostname=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ipv6Hostname){var hostparts=this.hostname.split(/\./);for(var i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(!part)continue;if(!part.match(hostnamePartPattern)){var newpart="";for(var j=0,k=part.length;j<k;j++){if(part.charCodeAt(j)>127){newpart+="x"}else{newpart+=part[j]}}if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i);var notHost=hostparts.slice(i+1);var bit=part.match(hostnamePartStart);if(bit){validParts.push(bit[1]);notHost.unshift(bit[2])}if(notHost.length){rest="/"+notHost.join(".")+rest}this.hostname=validParts.join(".");break}}}}if(this.hostname.length>hostnameMaxLen){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!ipv6Hostname){this.hostname=punycode.toASCII(this.hostname)}var p=this.port?":"+this.port:"";var h=this.hostname||"";this.host=h+p;this.href+=this.host;if(ipv6Hostname){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(rest[0]!=="/"){rest="/"+rest}}}if(!unsafeProtocol[lowerProto]){for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];if(rest.indexOf(ae)===-1)continue;var esc=encodeURIComponent(ae);if(esc===ae){esc=escape(ae)}rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");if(hash!==-1){this.hash=rest.substr(hash);rest=rest.slice(0,hash)}var qm=rest.indexOf("?");if(qm!==-1){this.search=rest.substr(qm);this.query=rest.substr(qm+1);if(parseQueryString){this.query=querystring.parse(this.query)}rest=rest.slice(0,qm)}else if(parseQueryString){this.search="";this.query={}}if(rest)this.pathname=rest;if(slashedProtocol[lowerProto]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var p=this.pathname||"";var s=this.search||"";this.path=p+s}this.href=this.format();return this};function urlFormat(obj){if(util.isString(obj))obj=urlParse(obj);if(!(obj instanceof Url))return Url.prototype.format.call(obj);return obj.format()}Url.prototype.format=function(){var auth=this.auth||"";if(auth){auth=encodeURIComponent(auth);auth=auth.replace(/%3A/i,":");auth+="@"}var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=false,query="";if(this.host){host=auth+this.host}else if(this.hostname){host=auth+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){host+=":"+this.port}}if(this.query&&util.isObject(this.query)&&Object.keys(this.query).length){query=querystring.stringify(this.query)}var search=this.search||query&&"?"+query||"";if(protocol&&protocol.substr(-1)!==":")protocol+=":";if(this.slashes||(!protocol||slashedProtocol[protocol])&&host!==false){host="//"+(host||"");if(pathname&&pathname.charAt(0)!=="/")pathname="/"+pathname}else if(!host){host=""}if(hash&&hash.charAt(0)!=="#")hash="#"+hash;if(search&&search.charAt(0)!=="?")search="?"+search;pathname=pathname.replace(/[?#]/g,(function(match){return encodeURIComponent(match)}));search=search.replace("#","%23");return protocol+host+pathname+search+hash};function urlResolve(source,relative){return urlParse(source,false,true).resolve(relative)}Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,false,true)).format()};function urlResolveObject(source,relative){if(!source)return relative;return urlParse(source,false,true).resolveObject(relative)}Url.prototype.resolveObject=function(relative){if(util.isString(relative)){var rel=new Url;rel.parse(relative,false,true);relative=rel}var result=new Url;var tkeys=Object.keys(this);for(var tk=0;tk<tkeys.length;tk++){var tkey=tkeys[tk];result[tkey]=this[tkey]}result.hash=relative.hash;if(relative.href===""){result.href=result.format();return result}if(relative.slashes&&!relative.protocol){var rkeys=Object.keys(relative);for(var rk=0;rk<rkeys.length;rk++){var rkey=rkeys[rk];if(rkey!=="protocol")result[rkey]=relative[rkey]}if(slashedProtocol[result.protocol]&&result.hostname&&!result.pathname){result.path=result.pathname="/"}result.href=result.format();return result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){var keys=Object.keys(relative);for(var v=0;v<keys.length;v++){var k=keys[v];result[k]=relative[k]}result.href=result.format();return result}result.protocol=relative.protocol;if(!relative.host&&!hostlessProtocol[relative.protocol]){var relPath=(relative.pathname||"").split("/");while(relPath.length&&!(relative.host=relPath.shift()));if(!relative.host)relative.host="";if(!relative.hostname)relative.hostname="";if(relPath[0]!=="")relPath.unshift("");if(relPath.length<2)relPath.unshift("");result.pathname=relPath.join("/")}else{result.pathname=relative.pathname}result.search=relative.search;result.query=relative.query;result.host=relative.host||"";result.auth=relative.auth;result.hostname=relative.hostname||relative.host;result.port=relative.port;if(result.pathname||result.search){var p=result.pathname||"";var s=result.search||"";result.path=p+s}result.slashes=result.slashes||relative.slashes;result.href=result.format();return result}var isSourceAbs=result.pathname&&result.pathname.charAt(0)==="/",isRelAbs=relative.host||relative.pathname&&relative.pathname.charAt(0)==="/",mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic){result.hostname="";result.port=null;if(result.host){if(srcPath[0]==="")srcPath[0]=result.host;else srcPath.unshift(result.host)}result.host="";if(relative.protocol){relative.hostname=null;relative.port=null;if(relative.host){if(relPath[0]==="")relPath[0]=relative.host;else relPath.unshift(relative.host)}relative.host=null}mustEndAbs=mustEndAbs&&(relPath[0]===""||srcPath[0]==="")}if(isRelAbs){result.host=relative.host||relative.host===""?relative.host:result.host;result.hostname=relative.hostname||relative.hostname===""?relative.hostname:result.hostname;result.search=relative.search;result.query=relative.query;srcPath=relPath}else if(relPath.length){if(!srcPath)srcPath=[];srcPath.pop();srcPath=srcPath.concat(relPath);result.search=relative.search;result.query=relative.query}else if(!util.isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}result.search=relative.search;result.query=relative.query;if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.href=result.format();return result}if(!srcPath.length){result.pathname=null;if(result.search){result.path="/"+result.search}else{result.path=null}result.href=result.format();return result}var last=srcPath.slice(-1)[0];var hasTrailingSlash=(result.host||relative.host||srcPath.length>1)&&(last==="."||last==="..")||last==="";var up=0;for(var i=srcPath.length;i>=0;i--){last=srcPath[i];if(last==="."){srcPath.splice(i,1)}else if(last===".."){srcPath.splice(i,1);up++}else if(up){srcPath.splice(i,1);up--}}if(!mustEndAbs&&!removeAllDots){for(;up--;up){srcPath.unshift("..")}}if(mustEndAbs&&srcPath[0]!==""&&(!srcPath[0]||srcPath[0].charAt(0)!=="/")){srcPath.unshift("")}if(hasTrailingSlash&&srcPath.join("/").substr(-1)!=="/"){srcPath.push("")}var isAbsolute=srcPath[0]===""||srcPath[0]&&srcPath[0].charAt(0)==="/";if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}mustEndAbs=mustEndAbs||result.host&&srcPath.length;if(mustEndAbs&&!isAbsolute){srcPath.unshift("")}if(!srcPath.length){result.pathname=null;result.path=null}else{result.pathname=srcPath.join("/")}if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.auth=relative.auth||result.auth;result.slashes=result.slashes||relative.slashes;result.href=result.format();return result};Url.prototype.parseHost=function(){var host=this.host;var port=portPattern.exec(host);if(port){port=port[0];if(port!==":"){this.port=port.substr(1)}host=host.substr(0,host.length-port.length)}if(host)this.hostname=host}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CREATE_PATH=exports.getUrlPath=exports.GETTER_PREFIX=exports.getGotoPath=exports.getUrlIdFromGotoRoute=exports.GOTO_PREFIX=void 0;var GOTO_PREFIX="/goto";exports.GOTO_PREFIX=GOTO_PREFIX;var getUrlIdFromGotoRoute=function getUrlIdFromGotoRoute(path){var _path$match;return(_path$match=path.match(new RegExp("".concat(GOTO_PREFIX,"/(.*)$"))))===null||_path$match===void 0?void 0:_path$match[1]};exports.getUrlIdFromGotoRoute=getUrlIdFromGotoRoute;var getGotoPath=function getGotoPath(urlId){return"".concat(GOTO_PREFIX,"/").concat(urlId)};exports.getGotoPath=getGotoPath;var GETTER_PREFIX="/api/short_url";exports.GETTER_PREFIX=GETTER_PREFIX;var getUrlPath=function getUrlPath(urlId){return"".concat(GETTER_PREFIX,"/").concat(urlId)};exports.getUrlPath=getUrlPath;var CREATE_PATH="/api/shorten_url";exports.CREATE_PATH=CREATE_PATH},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlGeneratorsService=void 0;var _i18n=__webpack_require__(0);var _url_generator_internal=__webpack_require__(25);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var UrlGeneratorsService=function(){function UrlGeneratorsService(){var _this=this;_classCallCheck(this,UrlGeneratorsService);_defineProperty(this,"urlGenerators",new Map);_defineProperty(this,"getUrlGenerator",(function(id){var generator=_this.urlGenerators.get(id);if(!generator){throw new Error(_i18n.i18n.translate("share.urlGenerators.errors.noGeneratorWithId",{defaultMessage:"No generator found with id {id}",values:{id:id}}))}return generator.getPublicContract()}))}_createClass(UrlGeneratorsService,[{key:"setup",value:function setup(core){var _this2=this;var setup={registerUrlGenerator:function registerUrlGenerator(generatorOptions){_this2.urlGenerators.set(generatorOptions.id,new _url_generator_internal.UrlGeneratorInternal(generatorOptions,_this2.getUrlGenerator))}};return setup}},{key:"start",value:function start(core){var start={getUrlGenerator:this.getUrlGenerator};return start}},{key:"stop",value:function stop(){}}]);return UrlGeneratorsService}();exports.UrlGeneratorsService=UrlGeneratorsService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"UrlGeneratorStateMapping",{enumerable:true,get:function get(){return _url_generator_definition.UrlGeneratorStateMapping}});Object.defineProperty(exports,"SharePluginSetup",{enumerable:true,get:function get(){return _plugin.SharePluginSetup}});Object.defineProperty(exports,"SharePluginStart",{enumerable:true,get:function get(){return _plugin.SharePluginStart}});Object.defineProperty(exports,"ShareContext",{enumerable:true,get:function get(){return _types.ShareContext}});Object.defineProperty(exports,"ShareMenuProvider",{enumerable:true,get:function get(){return _types.ShareMenuProvider}});Object.defineProperty(exports,"ShareMenuItem",{enumerable:true,get:function get(){return _types.ShareMenuItem}});Object.defineProperty(exports,"ShowShareMenuOptions",{enumerable:true,get:function get(){return _types.ShowShareMenuOptions}});Object.defineProperty(exports,"ShareContextMenuPanelItem",{enumerable:true,get:function get(){return _types.ShareContextMenuPanelItem}});Object.defineProperty(exports,"UrlGeneratorId",{enumerable:true,get:function get(){return _url_generators.UrlGeneratorId}});Object.defineProperty(exports,"UrlGeneratorState",{enumerable:true,get:function get(){return _url_generators.UrlGeneratorState}});Object.defineProperty(exports,"UrlGeneratorsDefinition",{enumerable:true,get:function get(){return _url_generators.UrlGeneratorsDefinition}});Object.defineProperty(exports,"UrlGeneratorContract",{enumerable:true,get:function get(){return _url_generators.UrlGeneratorContract}});Object.defineProperty(exports,"UrlGeneratorsService",{enumerable:true,get:function get(){return _url_generators.UrlGeneratorsService}});exports.plugin=void 0;var _url_generator_definition=__webpack_require__(4);var _plugin=__webpack_require__(9);var _types=__webpack_require__(26);var _url_generators=__webpack_require__(27);var plugin=function plugin(){return new _plugin.SharePlugin};exports.plugin=plugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SharePlugin=void 0;var _services=__webpack_require__(10);var _short_url_redirect_app=__webpack_require__(24);var _url_generator_service=__webpack_require__(7);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SharePlugin=function(){function SharePlugin(){_classCallCheck(this,SharePlugin);_defineProperty(this,"shareMenuRegistry",new _services.ShareMenuRegistry);_defineProperty(this,"shareContextMenu",new _services.ShareMenuManager);_defineProperty(this,"urlGeneratorsService",new _url_generator_service.UrlGeneratorsService)}_createClass(SharePlugin,[{key:"setup",value:function setup(core){core.application.register((0,_short_url_redirect_app.createShortUrlRedirectApp)(core,window.location));return _objectSpread({},this.shareMenuRegistry.setup(),{urlGenerators:this.urlGeneratorsService.setup(core)})}},{key:"start",value:function start(core){return _objectSpread({},this.shareContextMenu.start(core,this.shareMenuRegistry.start()),{urlGenerators:this.urlGeneratorsService.start(core)})}}]);return SharePlugin}();exports.SharePlugin=SharePlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _share_menu_registry=__webpack_require__(11);Object.keys(_share_menu_registry).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _share_menu_registry[key]}})}));var _share_menu_manager=__webpack_require__(12);Object.keys(_share_menu_manager).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _share_menu_manager[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShareMenuRegistry=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ShareMenuRegistry=function(){function ShareMenuRegistry(){_classCallCheck(this,ShareMenuRegistry);_defineProperty(this,"shareMenuProviders",new Map)}_createClass(ShareMenuRegistry,[{key:"setup",value:function setup(){var _this=this;return{register:function register(shareMenuProvider){if(_this.shareMenuProviders.has(shareMenuProvider.id)){throw new Error("Share menu provider with id [".concat(shareMenuProvider.id,"] has already been registered. Use a unique id."))}_this.shareMenuProviders.set(shareMenuProvider.id,shareMenuProvider)}}}},{key:"start",value:function start(){var _this2=this;return{getShareMenuItems:function getShareMenuItems(context){return Array.from(_this2.shareMenuProviders.values()).flatMap((function(shareActionProvider){return shareActionProvider.getShareMenuItems(context)}))}}}}]);return ShareMenuRegistry}();exports.ShareMenuRegistry=ShareMenuRegistry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShareMenuManager=void 0;var _react=_interopRequireDefault(__webpack_require__(1));var _reactDom=_interopRequireDefault(__webpack_require__(13));var _react2=__webpack_require__(2);var _eui=__webpack_require__(3);var _share_context_menu=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ShareMenuManager=function(){function ShareMenuManager(){var _this=this;_classCallCheck(this,ShareMenuManager);_defineProperty(this,"isOpen",false);_defineProperty(this,"container",document.createElement("div"));_defineProperty(this,"onClose",(function(){_reactDom.default.unmountComponentAtNode(_this.container);_this.isOpen=false}))}_createClass(ShareMenuManager,[{key:"start",value:function start(core,shareRegistry){var _this2=this;return{toggleShareContextMenu:function toggleShareContextMenu(options){var menuItems=shareRegistry.getShareMenuItems(_objectSpread({},options,{onClose:_this2.onClose}));_this2.toggleShareContextMenu(_objectSpread({},options,{menuItems:menuItems,post:core.http.post,basePath:core.http.basePath.get()}))}}}},{key:"toggleShareContextMenu",value:function toggleShareContextMenu(_ref){var anchorElement=_ref.anchorElement,allowEmbed=_ref.allowEmbed,allowShortUrl=_ref.allowShortUrl,objectId=_ref.objectId,objectType=_ref.objectType,sharingData=_ref.sharingData,menuItems=_ref.menuItems,shareableUrl=_ref.shareableUrl,post=_ref.post,basePath=_ref.basePath;if(this.isOpen){this.onClose();return}this.isOpen=true;document.body.appendChild(this.container);var element=_react.default.createElement(_react2.I18nProvider,null,_react.default.createElement(_eui.EuiWrappingPopover,{id:"sharePopover",button:anchorElement,isOpen:true,closePopover:this.onClose,panelPaddingSize:"none",withTitle:true,anchorPosition:"downLeft"},_react.default.createElement(_share_context_menu.ShareContextMenu,{allowEmbed:allowEmbed,allowShortUrl:allowShortUrl,objectId:objectId,objectType:objectType,shareMenuItems:menuItems,sharingData:sharingData,shareableUrl:shareableUrl,onClose:this.onClose,post:post,basePath:basePath})));_reactDom.default.render(element,this.container)}}]);return ShareMenuManager}();exports.ShareMenuManager=ShareMenuManager},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ShareContextMenu=void 0;var _react=_interopRequireWildcard(__webpack_require__(1));var _react2=__webpack_require__(2);var _i18n=__webpack_require__(0);var _eui=__webpack_require__(3);var _url_panel_content=__webpack_require__(15);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ShareContextMenu=function(_Component){_inherits(ShareContextMenu,_Component);function ShareContextMenu(){var _getPrototypeOf2;var _this;_classCallCheck(this,ShareContextMenu);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ShareContextMenu)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"getPanels",(function(){var panels=[];var menuItems=[];var permalinkPanel={id:panels.length+1,title:_i18n.i18n.translate("share.contextMenu.permalinkPanelTitle",{defaultMessage:"Permalink"}),content:_react.default.createElement(_url_panel_content.UrlPanelContent,{allowShortUrl:_this.props.allowShortUrl,objectId:_this.props.objectId,objectType:_this.props.objectType,basePath:_this.props.basePath,post:_this.props.post,shareableUrl:_this.props.shareableUrl})};menuItems.push({name:_i18n.i18n.translate("share.contextMenu.permalinksLabel",{defaultMessage:"Permalinks"}),icon:"link",panel:permalinkPanel.id,sortOrder:0});panels.push(permalinkPanel);if(_this.props.allowEmbed){var embedPanel={id:panels.length+1,title:_i18n.i18n.translate("share.contextMenu.embedCodePanelTitle",{defaultMessage:"Embed Code"}),content:_react.default.createElement(_url_panel_content.UrlPanelContent,{allowShortUrl:_this.props.allowShortUrl,isEmbedded:true,objectId:_this.props.objectId,objectType:_this.props.objectType,basePath:_this.props.basePath,post:_this.props.post,shareableUrl:_this.props.shareableUrl})};panels.push(embedPanel);menuItems.push({name:_i18n.i18n.translate("share.contextMenu.embedCodeLabel",{defaultMessage:"Embed code"}),icon:"console",panel:embedPanel.id,sortOrder:0})}_this.props.shareMenuItems.forEach((function(_ref){var shareMenuItem=_ref.shareMenuItem,panel=_ref.panel;var panelId=panels.length+1;panels.push(_objectSpread({},panel,{id:panelId}));menuItems.push(_objectSpread({},shareMenuItem,{panel:panelId}))}));if(menuItems.length>1){var topLevelMenuPanel={id:panels.length+1,title:_i18n.i18n.translate("share.contextMenuTitle",{defaultMessage:"Share this {objectType}",values:{objectType:_this.props.objectType}}),items:menuItems.sort((function(a,b){var aSortOrder=a.sortOrder||0;var bSortOrder=b.sortOrder||0;if(aSortOrder>bSortOrder){return 1}if(aSortOrder<bSortOrder){return-1}if(a.name.toLowerCase().localeCompare(b.name.toLowerCase())>0){return 1}return-1})).map((function(menuItem){menuItem["data-test-subj"]="sharePanel-".concat(menuItem.name.replace(" ",""));delete menuItem.sortOrder;return menuItem}))};panels.push(topLevelMenuPanel)}var lastPanelIndex=panels.length-1;var initialPanelId=panels[lastPanelIndex].id;return{panels:panels,initialPanelId:initialPanelId}}));return _this}_createClass(ShareContextMenu,[{key:"render",value:function render(){var _this$getPanels=this.getPanels(),panels=_this$getPanels.panels,initialPanelId=_this$getPanels.initialPanelId;return _react.default.createElement(_react2.I18nProvider,null,_react.default.createElement(_eui.EuiContextMenu,{initialPanelId:initialPanelId,panels:panels,"data-test-subj":"shareContextMenu"}))}}]);return ShareContextMenu}(_react.Component);exports.ShareContextMenu=ShareContextMenu},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.UrlPanelContent=void 0;var _react=_interopRequireWildcard(__webpack_require__(1));var _eui=__webpack_require__(3);var _url=__webpack_require__(5);var _react2=__webpack_require__(2);var _i18n=__webpack_require__(0);var _url_shortener=__webpack_require__(23);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ExportUrlAsType;(function(ExportUrlAsType){ExportUrlAsType["EXPORT_URL_AS_SAVED_OBJECT"]="savedObject";ExportUrlAsType["EXPORT_URL_AS_SNAPSHOT"]="snapshot"})(ExportUrlAsType||(ExportUrlAsType={}));var UrlPanelContent=function(_Component){_inherits(UrlPanelContent,_Component);function UrlPanelContent(props){var _this;_classCallCheck(this,UrlPanelContent);_this=_possibleConstructorReturn(this,_getPrototypeOf(UrlPanelContent).call(this,props));_defineProperty(_assertThisInitialized(_this),"mounted",void 0);_defineProperty(_assertThisInitialized(_this),"shortUrlCache",void 0);_defineProperty(_assertThisInitialized(_this),"isNotSaved",(function(){return _this.props.objectId===undefined||_this.props.objectId===""}));_defineProperty(_assertThisInitialized(_this),"resetUrl",(function(){if(_this.mounted){_this.shortUrlCache=undefined;_this.setState({useShortUrl:false},_this.setUrl)}}));_defineProperty(_assertThisInitialized(_this),"getSavedObjectUrl",(function(){if(_this.isNotSaved()){return}var url=_this.getSnapshotUrl();var parsedUrl=(0,_url.parse)(url);if(!parsedUrl||!parsedUrl.hash){return}var parsedAppUrl=(0,_url.parse)(parsedUrl.hash.slice(1),true);var formattedUrl=(0,_url.format)({protocol:parsedUrl.protocol,auth:parsedUrl.auth,host:parsedUrl.host,pathname:parsedUrl.pathname,hash:(0,_url.format)({pathname:parsedAppUrl.pathname,query:{_g:parsedAppUrl.query._g}})});if(_this.props.isEmbedded){formattedUrl=_this.makeUrlEmbeddable(url)}return formattedUrl}));_defineProperty(_assertThisInitialized(_this),"getSnapshotUrl",(function(){var url=_this.props.shareableUrl||window.location.href;if(_this.props.isEmbedded){url=_this.makeUrlEmbeddable(url)}return url}));_defineProperty(_assertThisInitialized(_this),"makeUrlEmbeddable",(function(url){var embedQueryParam="?embed=true";var urlHasQueryString=url.indexOf("?")!==-1;if(urlHasQueryString){return url.replace("?","".concat(embedQueryParam,"&"))}return"".concat(url).concat(embedQueryParam)}));_defineProperty(_assertThisInitialized(_this),"makeIframeTag",(function(url){if(!url){return}return'<iframe src="'.concat(url,'" height="600" width="800"></iframe>')}));_defineProperty(_assertThisInitialized(_this),"setUrl",(function(){var url;if(_this.state.exportUrlAs===ExportUrlAsType.EXPORT_URL_AS_SAVED_OBJECT){url=_this.getSavedObjectUrl()}else if(_this.state.useShortUrl){url=_this.shortUrlCache}else{url=_this.getSnapshotUrl()}if(_this.props.isEmbedded){url=_this.makeIframeTag(url)}_this.setState({url:url})}));_defineProperty(_assertThisInitialized(_this),"handleExportUrlAs",(function(optionId){_this.setState({exportUrlAs:optionId},_this.setUrl)}));_defineProperty(_assertThisInitialized(_this),"handleShortUrlChange",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(evt){var isChecked,shortUrl;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isChecked=evt.target.checked;if(!(!isChecked||_this.shortUrlCache!==undefined)){_context.next=4;break}_this.setState({useShortUrl:isChecked},_this.setUrl);return _context.abrupt("return");case 4:_this.setState({isCreatingShortUrl:true,shortUrlErrorMsg:undefined});_context.prev=5;_context.next=8;return(0,_url_shortener.shortenUrl)(_this.getSnapshotUrl(),{basePath:_this.props.basePath,post:_this.props.post});case 8:shortUrl=_context.sent;if(_this.mounted){_this.shortUrlCache=shortUrl;_this.setState({isCreatingShortUrl:false,useShortUrl:isChecked},_this.setUrl)}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context["catch"](5);if(_this.mounted){_this.shortUrlCache=undefined;_this.setState({useShortUrl:false,isCreatingShortUrl:false,shortUrlErrorMsg:_i18n.i18n.translate("share.urlPanel.unableCreateShortUrlErrorMessage",{defaultMessage:"Unable to create short URL. Error: {errorMessage}",values:{errorMessage:_context.t0.message}})},_this.setUrl)}case 15:case"end":return _context.stop()}}}),_callee,null,[[5,12]])})));return function(_x){return _ref.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"renderExportUrlAsOptions",(function(){return[_defineProperty({id:ExportUrlAsType.EXPORT_URL_AS_SNAPSHOT,label:_this.renderWithIconTip(_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.snapshotLabel",defaultMessage:"Snapshot"}),_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.snapshotDescription",defaultMessage:"Snapshot URLs encode the current state of the {objectType} in the URL itself. Edits to the saved {objectType} won't be visible via this URL.",values:{objectType:_this.props.objectType}}))},"data-test-subj","exportAsSnapshot"),_defineProperty({id:ExportUrlAsType.EXPORT_URL_AS_SAVED_OBJECT,disabled:_this.isNotSaved(),label:_this.renderWithIconTip(_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.savedObjectLabel",defaultMessage:"Saved object"}),_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.savedObjectDescription",defaultMessage:"You can share this URL with people to let them load the most recent saved version of this {objectType}.",values:{objectType:_this.props.objectType}}))},"data-test-subj","exportAsSavedObject")]}));_defineProperty(_assertThisInitialized(_this),"renderWithIconTip",(function(child,tipContent){return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none",responsive:false},_react.default.createElement(_eui.EuiFlexItem,null,child),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiIconTip,{content:tipContent,position:"bottom"})))}));_defineProperty(_assertThisInitialized(_this),"renderExportAsRadioGroup",(function(){var generateLinkAsHelp=_this.isNotSaved()?_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.canNotShareAsSavedObjectHelpText",defaultMessage:"Can't share as saved object until the {objectType} has been saved.",values:{objectType:_this.props.objectType}}):undefined;return _react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.generateLinkAsLabel",defaultMessage:"Generate the link as"}),helpText:generateLinkAsHelp},_react.default.createElement(_eui.EuiRadioGroup,{options:_this.renderExportUrlAsOptions(),idSelected:_this.state.exportUrlAs,onChange:_this.handleExportUrlAs}))}));_defineProperty(_assertThisInitialized(_this),"renderShortUrlSwitch",(function(){if(_this.state.exportUrlAs===ExportUrlAsType.EXPORT_URL_AS_SAVED_OBJECT||!_this.props.allowShortUrl){return}var shortUrlLabel=_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.shortUrlLabel",defaultMessage:"Short URL"});var switchLabel=_this.state.isCreatingShortUrl?_react.default.createElement("span",null,_react.default.createElement(_eui.EuiLoadingSpinner,{size:"s"})," ",shortUrlLabel):shortUrlLabel;var switchComponent=_react.default.createElement(_eui.EuiSwitch,{label:switchLabel,checked:_this.state.useShortUrl,onChange:_this.handleShortUrlChange,"data-test-subj":"useShortUrl"});var tipContent=_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.shortUrlHelpText",defaultMessage:"We recommend sharing shortened snapshot URLs for maximum compatibility. Internet Explorer has URL length restrictions, and some wiki and markup parsers don't do well with the full-length version of the snapshot URL, but the short URL should work great."});return _react.default.createElement(_eui.EuiFormRow,{helpText:_this.state.shortUrlErrorMsg,"data-test-subj":"createShortUrl"},_this.renderWithIconTip(switchComponent,tipContent))}));_this.shortUrlCache=undefined;_this.state={exportUrlAs:ExportUrlAsType.EXPORT_URL_AS_SNAPSHOT,useShortUrl:false,isCreatingShortUrl:false,url:""};return _this}_createClass(UrlPanelContent,[{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("hashchange",this.resetUrl);this.mounted=false}},{key:"componentDidMount",value:function componentDidMount(){this.mounted=true;this.setUrl();window.addEventListener("hashchange",this.resetUrl,false)}},{key:"render",value:function render(){var _this2=this;return _react.default.createElement(_react2.I18nProvider,null,_react.default.createElement(_eui.EuiForm,{className:"kbnShareContextMenu__finalPanel","data-test-subj":"shareUrlForm"},this.renderExportAsRadioGroup(),this.renderShortUrlSwitch(),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiCopy,{textToCopy:this.state.url||"",anchorClassName:"eui-displayBlock"},(function(copy){return _react.default.createElement(_eui.EuiButton,{fill:true,fullWidth:true,onClick:copy,disabled:_this2.state.isCreatingShortUrl||_this2.state.url==="","data-share-url":_this2.state.url,"data-test-subj":"copyShareUrlButton",size:"s"},_this2.props.isEmbedded?_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.copyIframeCodeButtonLabel",defaultMessage:"Copy iFrame code"}):_react.default.createElement(_react2.FormattedMessage,{id:"share.urlPanel.copyLinkButtonLabel",defaultMessage:"Copy link"}))}))))}}]);return UrlPanelContent}(_react.Component);exports.UrlPanelContent=UrlPanelContent},function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(root){var freeExports=true&&exports&&!exports.nodeType&&exports;var freeModule=true&&module&&!module.nodeType&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal){root=freeGlobal}var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw new RangeError(errors[type])}function map(array,fn){var length=array.length;var result=[];while(length--){result[length]=fn(array[length])}return result}function mapDomain(string,fn){var parts=string.split("@");var result="";if(parts.length>1){result=parts[0]+"@";string=parts[1]}string=string.replace(regexSeparators,".");var labels=string.split(".");var encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){return map(array,(function(value){var output="";if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value);return output})).join("")}function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error("not-basic")}output.push(input.charCodeAt(j))}for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error("invalid-input")}digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error("overflow")}i+=digit*w;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error("overflow")}w*=baseMinusT}out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<128){output.push(stringFromCharCode(currentValue))}}handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue}}handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error("overflow")}if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}++delta;++n}return output.join("")}function toUnicode(input){return mapDomain(input,(function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string}))}function toASCII(input){return mapDomain(input,(function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string}))}punycode={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode};if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return punycode}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})(this)}).call(this,__webpack_require__(17)(module),__webpack_require__(18))},function(module,exports){module.exports=function(module){if(!module.webpackPolyfill){module.deprecate=function(){};module.paths=[];if(!module.children)module.children=[];Object.defineProperty(module,"loaded",{enumerable:true,get:function(){return module.l}});Object.defineProperty(module,"id",{enumerable:true,get:function(){return module.i}});module.webpackPolyfill=1}return module}},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){if(typeof window==="object")g=window}module.exports=g},function(module,exports,__webpack_require__){"use strict";module.exports={isString:function(arg){return typeof arg==="string"},isObject:function(arg){return typeof arg==="object"&&arg!==null},isNull:function(arg){return arg===null},isNullOrUndefined:function(arg){return arg==null}}},function(module,exports,__webpack_require__){"use strict";exports.decode=exports.parse=__webpack_require__(21);exports.encode=exports.stringify=__webpack_require__(22)},function(module,exports,__webpack_require__){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&";eq=eq||"=";var obj={};if(typeof qs!=="string"||qs.length===0){return obj}var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;if(options&&typeof options.maxKeys==="number"){maxKeys=options.maxKeys}var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys}for(var i=0;i<len;++i){var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1)}else{kstr=x;vstr=""}k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty(obj,k)){obj[k]=v}else if(isArray(obj[k])){obj[k].push(v)}else{obj[k]=[obj[k],v]}}return obj};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},function(module,exports,__webpack_require__){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){sep=sep||"&";eq=eq||"=";if(obj===null){obj=undefined}if(typeof obj==="object"){return map(objectKeys(obj),(function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(isArray(obj[k])){return map(obj[k],(function(v){return ks+encodeURIComponent(stringifyPrimitive(v))})).join(sep)}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]))}})).join(sep)}if(!name)return"";return encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj))};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};function map(xs,f){if(xs.map)return xs.map(f);var res=[];for(var i=0;i<xs.length;i++){res.push(f(xs[i],i))}return res}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))res.push(key)}return res}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.shortenUrl=shortenUrl;var _url=_interopRequireDefault(__webpack_require__(5));var _short_url_routes=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function shortenUrl(_x,_x2){return _shortenUrl.apply(this,arguments)}function _shortenUrl(){_shortenUrl=_asyncToGenerator(regeneratorRuntime.mark((function _callee(absoluteUrl,_ref){var basePath,post,parsedUrl,path,hash,relativeUrl,body,resp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:basePath=_ref.basePath,post=_ref.post;parsedUrl=_url.default.parse(absoluteUrl);if(!(!parsedUrl||!parsedUrl.path)){_context.next=4;break}return _context.abrupt("return");case 4:path=parsedUrl.path.replace(basePath,"");hash=parsedUrl.hash?parsedUrl.hash:"";relativeUrl=path+hash;body=JSON.stringify({url:relativeUrl});_context.next=10;return post(_short_url_routes.CREATE_PATH,{body:body});case 10:resp=_context.sent;return _context.abrupt("return",_url.default.format({protocol:parsedUrl.protocol,host:parsedUrl.host,pathname:"".concat(basePath).concat((0,_short_url_routes.getGotoPath)(resp.urlId))}));case 12:case"end":return _context.stop()}}}),_callee)})));return _shortenUrl.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createShortUrlRedirectApp=void 0;var _short_url_routes=__webpack_require__(6);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var createShortUrlRedirectApp=function createShortUrlRedirectApp(core,location){return{id:"short_url_redirect",appRoute:_short_url_routes.GOTO_PREFIX,chromeless:true,title:"Short URL Redirect",mount:function mount(){return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){var urlId,response,redirectUrl,_ref,hashUrl,hashedUrl,url;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:urlId=(0,_short_url_routes.getUrlIdFromGotoRoute)(location.pathname);if(urlId){_context.next=3;break}throw new Error("Url id not present in path");case 3:_context.next=5;return core.http.get((0,_short_url_routes.getUrlPath)(urlId));case 5:response=_context.sent;redirectUrl=response.url;_context.next=9;return Promise.resolve().then(__webpack_require__.t.bind(null,29,7));case 9:_ref=_context.sent;hashUrl=_ref.hashUrl;hashedUrl=hashUrl(redirectUrl);url=core.http.basePath.prepend(hashedUrl);location.href=url;return _context.abrupt("return",(function(){}));case 15:case"end":return _context.stop()}}}),_callee)})))()}}};exports.createShortUrlRedirectApp=createShortUrlRedirectApp},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlGeneratorInternal=void 0;var _i18n=__webpack_require__(0);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var UrlGeneratorInternal=function(){function UrlGeneratorInternal(spec,getGenerator){_classCallCheck(this,UrlGeneratorInternal);this.spec=spec;this.getGenerator=getGenerator;if(spec.isDeprecated&&!spec.migrate){throw new Error(_i18n.i18n.translate("share.urlGenerators.error.noMigrationFnProvided",{defaultMessage:"If the access link generator is marked as deprecated, you must provide a migration function."}))}if(!spec.isDeprecated&&spec.migrate){throw new Error(_i18n.i18n.translate("share.urlGenerators.error.migrationFnGivenNotDeprecated",{defaultMessage:"If you provide a migration function, you must mark this generator as deprecated"}))}if(!spec.createUrl&&!spec.isDeprecated){throw new Error(_i18n.i18n.translate("share.urlGenerators.error.noCreateUrlFnProvided",{defaultMessage:"This generator is not marked as deprecated. Please provide a createUrl fn."}))}if(spec.createUrl&&spec.isDeprecated){throw new Error(_i18n.i18n.translate("share.urlGenerators.error.createUrlFnProvided",{defaultMessage:"This generator is marked as deprecated. Do not supply a createUrl fn."}))}}_createClass(UrlGeneratorInternal,[{key:"getPublicContract",value:function getPublicContract(){var _this=this;return{id:this.spec.id,createUrl:function(){var _createUrl=_asyncToGenerator(regeneratorRuntime.mark((function _callee(state){var _ref,id,newState;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(_this.spec.migrate&&!_this.spec.createUrl)){_context.next=8;break}_context.next=3;return _this.spec.migrate(state);case 3:_ref=_context.sent;id=_ref.id;newState=_ref.state;console.warn("URL generator is deprecated and may not work in future versions. Please migrate your data.");return _context.abrupt("return",_this.getGenerator(id).createUrl(newState));case 8:return _context.abrupt("return",_this.spec.createUrl(state));case 9:case"end":return _context.stop()}}}),_callee)})));function createUrl(_x){return _createUrl.apply(this,arguments)}return createUrl}(),isDeprecated:!!this.spec.isDeprecated,migrate:function(){var _migrate=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(state){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(_this.spec.isDeprecated){_context2.next=2;break}throw new Error(_i18n.i18n.translate("share.urlGenerators.error.migrateCalledNotDeprecated",{defaultMessage:"You cannot call migrate on a non-deprecated generator."}));case 2:return _context2.abrupt("return",_this.spec.migrate(state));case 3:case"end":return _context2.stop()}}}),_callee2)})));function migrate(_x2){return _migrate.apply(this,arguments)}return migrate}()}}}]);return UrlGeneratorInternal}();exports.UrlGeneratorInternal=UrlGeneratorInternal},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _url_generator_service=__webpack_require__(7);Object.keys(_url_generator_service).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _url_generator_service[key]}})}));var _url_generator_definition=__webpack_require__(4);Object.keys(_url_generator_definition).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _url_generator_definition[key]}})}));var _url_generator_contract=__webpack_require__(28);Object.keys(_url_generator_contract).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _url_generator_contract[key]}})}))},function(module,exports,__webpack_require__){"use strict"},function(module,exports){module.exports=__kbnBundles__["plugin/kibanaUtils"]}]);