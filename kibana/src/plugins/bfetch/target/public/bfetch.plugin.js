var __kbnBundles__=typeof __kbnBundles__==="object"?__kbnBundles__:{};__kbnBundles__["plugin/bfetch"]=function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="__REPLACE_WITH_PUBLIC_PATH__";return __webpack_require__(__webpack_require__.s=6)}([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _split=__webpack_require__(8);Object.keys(_split).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _split[key]}})}));var _from_streaming_xhr=__webpack_require__(2);Object.keys(_from_streaming_xhr).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _from_streaming_xhr[key]}})}));var _fetch_streaming=__webpack_require__(10);Object.keys(_fetch_streaming).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _fetch_streaming[key]}})}))},function(module,exports){module.exports=__kbnSharedDeps__.Rxjs},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fromStreamingXhr=void 0;var _rxjs=__webpack_require__(1);var fromStreamingXhr=function fromStreamingXhr(xhr){var subject=new _rxjs.Subject;var index=0;var processBatch=function processBatch(){var responseText=xhr.responseText;if(index>=responseText.length)return;subject.next(responseText.substr(index));index=responseText.length};xhr.onprogress=processBatch;xhr.onreadystatechange=function(){processBatch();if(xhr.readyState===4){if(xhr.status===0||xhr.status>=400){subject.error(new Error("Batch request failed with status ".concat(xhr.status)))}else{subject.complete()}}};return subject};exports.fromStreamingXhr=fromStreamingXhr},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _util=__webpack_require__(11);Object.keys(_util).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _util[key]}})}));var _streaming=__webpack_require__(14);Object.keys(_streaming).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _streaming[key]}})}));var _buffer=__webpack_require__(16);Object.keys(_buffer).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _buffer[key]}})}));var _batch=__webpack_require__(18);Object.keys(_batch).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _batch[key]}})}))},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.ItemBuffer=void 0;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ItemBuffer=function(){function ItemBuffer(params){_classCallCheck(this,ItemBuffer);this.params=params;_defineProperty(this,"list",[])}_createClass(ItemBuffer,[{key:"write",value:function write(item){this.list.push(item);var flushOnMaxItems=this.params.flushOnMaxItems;if(flushOnMaxItems){if(this.list.length>=flushOnMaxItems){this.flush()}}}},{key:"clear",value:function clear(){this.list=[]}},{key:"flush",value:function flush(){var list;var _ref=[this.list,[]];list=_ref[0];this.list=_ref[1];this.params.onFlush(list)}},{key:"length",get:function get(){return this.list.length}}]);return ItemBuffer}();exports.ItemBuffer=ItemBuffer},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.TimedItemBuffer=void 0;var _item_buffer=__webpack_require__(4);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TimedItemBuffer=function(_item_buffer$ItemBuff){_inherits(TimedItemBuffer,_item_buffer$ItemBuff);function TimedItemBuffer(params){var _this;_classCallCheck(this,TimedItemBuffer);_this=_possibleConstructorReturn(this,_getPrototypeOf(TimedItemBuffer).call(this,params));_this.params=params;_defineProperty(_assertThisInitialized(_this),"timer",void 0);_defineProperty(_assertThisInitialized(_this),"onTimeout",(function(){_this.flush()}));return _this}_createClass(TimedItemBuffer,[{key:"write",value:function write(item){_get(_getPrototypeOf(TimedItemBuffer.prototype),"write",this).call(this,item);if(this.params.maxItemAge&&this.length===1){this.timer=setTimeout(this.onTimeout,this.params.maxItemAge)}}},{key:"clear",value:function clear(){clearTimeout(this.timer);_get(_getPrototypeOf(TimedItemBuffer.prototype),"clear",this).call(this)}},{key:"flush",value:function flush(){clearTimeout(this.timer);_get(_getPrototypeOf(TimedItemBuffer.prototype),"flush",this).call(this)}}]);return TimedItemBuffer}(_item_buffer.ItemBuffer);exports.TimedItemBuffer=TimedItemBuffer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;Object.defineProperty(exports,"BfetchPublicSetup",{enumerable:true,get:function get(){return _plugin.BfetchPublicSetup}});Object.defineProperty(exports,"BfetchPublicStart",{enumerable:true,get:function get(){return _plugin.BfetchPublicStart}});Object.defineProperty(exports,"BfetchPublicContract",{enumerable:true,get:function get(){return _plugin.BfetchPublicContract}});Object.defineProperty(exports,"split",{enumerable:true,get:function get(){return _streaming.split}});var _plugin=__webpack_require__(7);var _streaming=__webpack_require__(0);function plugin(initializerContext){return new _plugin.BfetchPublicPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BfetchPublicPlugin=void 0;var _streaming=__webpack_require__(0);var _common=__webpack_require__(3);var _create_streaming_batched_function=__webpack_require__(19);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var BfetchPublicPlugin=function(){function BfetchPublicPlugin(initializerContext){_classCallCheck(this,BfetchPublicPlugin);this.initializerContext=initializerContext;_defineProperty(this,"contract",void 0);_defineProperty(this,"fetchStreaming",(function(version,basePath){return function(params){return(0,_streaming.fetchStreaming)(_objectSpread({},params,{url:"".concat(basePath,"/").concat((0,_common.removeLeadingSlash)(params.url)),headers:_objectSpread({"Content-Type":"application/json","kbn-version":version},params.headers||{})}))}}));_defineProperty(this,"batchedFunction",(function(fetchStreaming){return function(params){return(0,_create_streaming_batched_function.createStreamingBatchedFunction)(_objectSpread({},params,{fetchStreaming:params.fetchStreaming||fetchStreaming}))}}))}_createClass(BfetchPublicPlugin,[{key:"setup",value:function setup(core,plugins){var version=this.initializerContext.env.packageInfo.version;var basePath=core.http.basePath.get();var fetchStreaming=this.fetchStreaming(version,basePath);var batchedFunction=this.batchedFunction(fetchStreaming);this.contract={fetchStreaming:fetchStreaming,batchedFunction:batchedFunction};return this.contract}},{key:"start",value:function start(core,plugins){return this.contract}},{key:"stop",value:function stop(){}}]);return BfetchPublicPlugin}();exports.BfetchPublicPlugin=BfetchPublicPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.split=void 0;var _rxjs=__webpack_require__(1);var _operators=__webpack_require__(9);var split=function split(){var delimiter=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"\n";return function(in$){var out$=new _rxjs.Subject;var startingText="";in$.subscribe((function(chunk){var messages=(startingText+chunk).split(delimiter);messages.slice(0,-1).forEach(out$.next.bind(out$));startingText=messages.length?messages[messages.length-1]:""}),out$.error.bind(out$),(function(){out$.next(startingText);out$.complete()}));return out$.pipe((0,_operators.filter)(Boolean))}};exports.split=split},function(module,exports){module.exports=__kbnSharedDeps__.RxjsOperators},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchStreaming=fetchStreaming;var _from_streaming_xhr=__webpack_require__(2);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function fetchStreaming(_ref){var url=_ref.url,_ref$headers=_ref.headers,headers=_ref$headers===void 0?{}:_ref$headers,_ref$method=_ref.method,method=_ref$method===void 0?"POST":_ref$method,_ref$body=_ref.body,body=_ref$body===void 0?"":_ref$body;var xhr=new window.XMLHttpRequest;xhr.open(method,url);xhr.withCredentials=true;Object.entries(headers).forEach((function(_ref2){var _ref3=_slicedToArray(_ref2,2),k=_ref3[0],v=_ref3[1];return xhr.setRequestHeader(k,v)}));var stream=(0,_from_streaming_xhr.fromStreamingXhr)(xhr);xhr.send(body);return{xhr:xhr,stream:stream}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _normalize_error=__webpack_require__(12);Object.keys(_normalize_error).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _normalize_error[key]}})}));var _remove_leading_slash=__webpack_require__(13);Object.keys(_remove_leading_slash).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _remove_leading_slash[key]}})}))},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.normalizeError=void 0;var normalizeError=function normalizeError(err){if(!err){return{message:"Unknown error."}}if(err instanceof Error){return{message:err.message}}if(_typeof(err)==="object"){return _objectSpread({},err,{message:err.message||"Unknown error."})}return{message:String(err)}};exports.normalizeError=normalizeError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.removeLeadingSlash=void 0;var removeLeadingSlash=function removeLeadingSlash(text){return text[0]==="/"?text.substr(1):text};exports.removeLeadingSlash=removeLeadingSlash},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _types=__webpack_require__(15);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}))},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _item_buffer=__webpack_require__(4);Object.keys(_item_buffer).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _item_buffer[key]}})}));var _timed_item_buffer=__webpack_require__(5);Object.keys(_timed_item_buffer).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _timed_item_buffer[key]}})}));var _create_batched_function=__webpack_require__(17);Object.keys(_create_batched_function).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _create_batched_function[key]}})}))},function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});exports.createBatchedFunction=void 0;var _timed_item_buffer=__webpack_require__(5);var createBatchedFunction=function createBatchedFunction(params){var onCall=params.onCall,onBatch=params.onBatch,_params$maxItemAge=params.maxItemAge,maxItemAge=_params$maxItemAge===void 0?10:_params$maxItemAge,_params$flushOnMaxIte=params.flushOnMaxItems,flushOnMaxItems=_params$flushOnMaxIte===void 0?25:_params$flushOnMaxIte;var buffer=new _timed_item_buffer.TimedItemBuffer({onFlush:onBatch,maxItemAge:maxItemAge,flushOnMaxItems:flushOnMaxItems});var fn=function fn(){var _onCall=onCall.apply(void 0,arguments),_onCall2=_slicedToArray(_onCall,2),result=_onCall2[0],batchEntry=_onCall2[1];buffer.write(batchEntry);return result};return[fn,buffer]};exports.createBatchedFunction=createBatchedFunction},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createStreamingBatchedFunction=void 0;var _public=__webpack_require__(20);var _common=__webpack_require__(3);var _streaming=__webpack_require__(0);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var createStreamingBatchedFunction=function createStreamingBatchedFunction(params){var url=params.url,_params$fetchStreamin=params.fetchStreaming,fetchStreamingInjected=_params$fetchStreamin===void 0?_streaming.fetchStreaming:_params$fetchStreamin,_params$flushOnMaxIte=params.flushOnMaxItems,flushOnMaxItems=_params$flushOnMaxIte===void 0?25:_params$flushOnMaxIte,_params$maxItemAge=params.maxItemAge,maxItemAge=_params$maxItemAge===void 0?10:_params$maxItemAge;var _createBatchedFunctio=(0,_common.createBatchedFunction)({onCall:function onCall(payload){var future=(0,_public.defer)();var entry={payload:payload,future:future};return[future.promise,entry]},onBatch:function(){var _onBatch=_asyncToGenerator(regeneratorRuntime.mark((function _callee(items){var responsesReceived,batch,_fetchStreamingInject,stream,_iteratorNormalCompletion3,_didIteratorError3,_iteratorError3,_iterator3,_step3,item;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;responsesReceived=0;batch=items.map((function(_ref){var payload=_ref.payload;return payload}));_fetchStreamingInject=fetchStreamingInjected({url:url,body:JSON.stringify({batch:batch}),method:"POST"}),stream=_fetchStreamingInject.stream;stream.pipe((0,_streaming.split)("\n")).subscribe({next:function next(json){var response=JSON.parse(json);if(response.error){responsesReceived++;items[response.id].future.reject(response.error)}else if(response.result){responsesReceived++;items[response.id].future.resolve(response.result)}},error:function error(_error){var normalizedError=(0,_common.normalizeError)(_error);normalizedError.code="STREAM";var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=items[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var future=_step.value.future;future.reject(normalizedError)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}},complete:function complete(){var streamTerminatedPrematurely=responsesReceived!==items.length;if(streamTerminatedPrematurely){var error={message:"Connection terminated prematurely.",code:"CONNECTION"};var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=items[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var future=_step2.value.future;future.reject(error)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return!=null){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}}});_context.next=7;return stream.toPromise();case 7:_context.next=30;break;case 9:_context.prev=9;_context.t0=_context["catch"](0);_iteratorNormalCompletion3=true;_didIteratorError3=false;_iteratorError3=undefined;_context.prev=14;for(_iterator3=items[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){item=_step3.value;item.future.reject(_context.t0)}_context.next=22;break;case 18:_context.prev=18;_context.t1=_context["catch"](14);_didIteratorError3=true;_iteratorError3=_context.t1;case 22:_context.prev=22;_context.prev=23;if(!_iteratorNormalCompletion3&&_iterator3.return!=null){_iterator3.return()}case 25:_context.prev=25;if(!_didIteratorError3){_context.next=28;break}throw _iteratorError3;case 28:return _context.finish(25);case 29:return _context.finish(22);case 30:case"end":return _context.stop()}}}),_callee,null,[[0,9],[14,18,22,30],[23,,25,29]])})));function onBatch(_x){return _onBatch.apply(this,arguments)}return onBatch}(),flushOnMaxItems:flushOnMaxItems,maxItemAge:maxItemAge}),_createBatchedFunctio2=_slicedToArray(_createBatchedFunctio,1),fn=_createBatchedFunctio2[0];return fn};exports.createStreamingBatchedFunction=createStreamingBatchedFunction},function(module,exports){module.exports=__kbnBundles__["plugin/kibanaUtils"]}]);