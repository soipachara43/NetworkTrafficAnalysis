(window["advancedSettings_bundle_jsonpfunction"]=window["advancedSettings_bundle_jsonpfunction"]||[]).push([[1],{33:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mountManagementSection=mountManagementSection;var _react=_interopRequireDefault(__webpack_require__(2));var _reactDom=_interopRequireDefault(__webpack_require__(34));var _reactRouterDom=__webpack_require__(32);var _i18n=__webpack_require__(0);var _react2=__webpack_require__(4);var _advanced_settings=__webpack_require__(36);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var title=_i18n.i18n.translate("advancedSettings.advancedSettingsLabel",{defaultMessage:"Advanced Settings"});var crumb=[{text:title}];var readOnlyBadge={text:_i18n.i18n.translate("advancedSettings.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:_i18n.i18n.translate("advancedSettings.badge.readOnly.tooltip",{defaultMessage:"Unable to save advanced settings"}),iconType:"glasses"};function mountManagementSection(_x,_x2,_x3){return _mountManagementSection.apply(this,arguments)}function _mountManagementSection(){_mountManagementSection=_asyncToGenerator(regeneratorRuntime.mark((function _callee(getStartServices,params,componentRegistry){var _ref,_ref2,_ref2$,uiSettings,notifications,docLinks,application,chrome,canSave;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:params.setBreadcrumbs(crumb);_context.next=3;return getStartServices();case 3:_ref=_context.sent;_ref2=_slicedToArray(_ref,1);_ref2$=_ref2[0];uiSettings=_ref2$.uiSettings;notifications=_ref2$.notifications;docLinks=_ref2$.docLinks;application=_ref2$.application;chrome=_ref2$.chrome;canSave=application.capabilities.advancedSettings.save;if(!canSave){chrome.setBadge(readOnlyBadge)}_reactDom.default.render(_react.default.createElement(_react2.I18nProvider,null,_react.default.createElement(_reactRouterDom.HashRouter,{basename:params.basePath},_react.default.createElement(_reactRouterDom.Switch,null,_react.default.createElement(_reactRouterDom.Route,{path:["/:query","/"]},_react.default.createElement(_advanced_settings.AdvancedSettings,{enableSaving:canSave,toasts:notifications.toasts,dockLinks:docLinks.links,uiSettings:uiSettings,componentRegistry:componentRegistry}))))),params.element);return _context.abrupt("return",(function(){_reactDom.default.unmountComponentAtNode(params.element)}));case 15:case"end":return _context.stop()}}}),_callee)})));return _mountManagementSection.apply(this,arguments)}},36:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.AdvancedSettings=exports.AdvancedSettingsComponent=void 0;var _react=_interopRequireWildcard(__webpack_require__(2));var _eui=__webpack_require__(3);var _reactRouterDom=__webpack_require__(32);var _call_outs=__webpack_require__(37);var _search=__webpack_require__(39);var _form=__webpack_require__(41);var _advanced_settings_voice_announcement=__webpack_require__(43);var _lib=__webpack_require__(7);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AdvancedSettingsComponent=function(_Component){_inherits(AdvancedSettingsComponent,_Component);function AdvancedSettingsComponent(props){var _this;_classCallCheck(this,AdvancedSettingsComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(AdvancedSettingsComponent).call(this,props));_defineProperty(_assertThisInitialized(_this),"settings",void 0);_defineProperty(_assertThisInitialized(_this),"groupedSettings",void 0);_defineProperty(_assertThisInitialized(_this),"categoryCounts",void 0);_defineProperty(_assertThisInitialized(_this),"categories",[]);_defineProperty(_assertThisInitialized(_this),"uiSettingsSubscription",void 0);_defineProperty(_assertThisInitialized(_this),"initSettings",_this.mapConfig);_defineProperty(_assertThisInitialized(_this),"initGroupedSettings",_this.mapSettings);_defineProperty(_assertThisInitialized(_this),"onQueryChange",(function(_ref){var query=_ref.query;_this.setState({query:query,filteredSettings:_this.mapSettings(_eui.Query.execute(query,_this.settings))})}));_defineProperty(_assertThisInitialized(_this),"clearQuery",(function(){_this.setState({query:_eui.Query.parse(""),footerQueryMatched:false,filteredSettings:_this.groupedSettings})}));_defineProperty(_assertThisInitialized(_this),"onFooterQueryMatchChange",(function(matched){_this.setState({footerQueryMatched:matched})}));_defineProperty(_assertThisInitialized(_this),"saveConfig",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(changes){var arr;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:arr=Object.entries(changes).map((function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];return _this.props.uiSettings.set(key,value)}));return _context.abrupt("return",Promise.all(arr));case 2:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}());_this.settings=_this.initSettings(_this.props.uiSettings);_this.groupedSettings=_this.initGroupedSettings(_this.settings);_this.categories=_this.initCategories(_this.groupedSettings);_this.categoryCounts=_this.initCategoryCounts(_this.groupedSettings);var parsedQuery=_eui.Query.parse(_this.props.queryText?(0,_lib.getAriaName)(_this.props.queryText):"");_this.state={query:parsedQuery,footerQueryMatched:false,filteredSettings:_this.mapSettings(_eui.Query.execute(parsedQuery,_this.settings))};return _this}_createClass(AdvancedSettingsComponent,[{key:"init",value:function init(config){this.settings=this.initSettings(config);this.groupedSettings=this.initGroupedSettings(this.settings);this.categories=this.initCategories(this.groupedSettings);this.categoryCounts=this.initCategoryCounts(this.groupedSettings)}},{key:"initCategories",value:function initCategories(groupedSettings){return Object.keys(groupedSettings).sort((function(a,b){if(a===_lib.DEFAULT_CATEGORY)return-1;if(b===_lib.DEFAULT_CATEGORY)return 1;if(a>b)return 1;return a===b?0:-1}))}},{key:"initCategoryCounts",value:function initCategoryCounts(groupedSettings){return Object.keys(groupedSettings).reduce((function(counts,category){counts[category]=groupedSettings[category].length;return counts}),{})}},{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.uiSettingsSubscription=this.props.uiSettings.getUpdate$().subscribe((function(){var query=_this2.state.query;_this2.init(_this2.props.uiSettings);_this2.setState({filteredSettings:_this2.mapSettings(_eui.Query.execute(query,_this2.settings))})}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.uiSettingsSubscription){this.uiSettingsSubscription.unsubscribe()}}},{key:"mapConfig",value:function mapConfig(config){var all=config.getAll();return Object.entries(all).map((function(setting){return(0,_lib.toEditableConfig)({def:setting[1],name:setting[0],value:setting[1].userValue,isCustom:config.isCustom(setting[0]),isOverridden:config.isOverridden(setting[0])})})).filter((function(c){return!c.readonly})).sort(_eui.Comparators.property("name",_eui.Comparators.default("asc")))}},{key:"mapSettings",value:function mapSettings(settings){return settings.reduce((function(groupedSettings,setting){var category=setting.category[0];(groupedSettings[category]=groupedSettings[category]||[]).push(setting);return groupedSettings}),{})}},{key:"render",value:function render(){var _this$state=this.state,filteredSettings=_this$state.filteredSettings,query=_this$state.query,footerQueryMatched=_this$state.footerQueryMatched;var componentRegistry=this.props.componentRegistry;var PageTitle=componentRegistry.get(componentRegistry.componentType.PAGE_TITLE_COMPONENT);var PageSubtitle=componentRegistry.get(componentRegistry.componentType.PAGE_SUBTITLE_COMPONENT);var PageFooter=componentRegistry.get(componentRegistry.componentType.PAGE_FOOTER_COMPONENT);return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(PageTitle,null)),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_search.Search,{query:query,categories:this.categories,onQueryChange:this.onQueryChange}))),_react.default.createElement(PageSubtitle,null),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_call_outs.CallOuts,null),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_advanced_settings_voice_announcement.AdvancedSettingsVoiceAnnouncement,{queryText:query.text,settings:filteredSettings}),_react.default.createElement(_form.Form,{settings:this.groupedSettings,visibleSettings:filteredSettings,categories:this.categories,categoryCounts:this.categoryCounts,clearQuery:this.clearQuery,save:this.saveConfig,showNoResultsMessage:!footerQueryMatched,enableSaving:this.props.enableSaving,dockLinks:this.props.dockLinks,toasts:this.props.toasts}),_react.default.createElement(PageFooter,{toasts:this.props.toasts,query:query,onQueryMatchChange:this.onFooterQueryMatchChange,enableSaving:this.props.enableSaving}))}}]);return AdvancedSettingsComponent}(_react.Component);exports.AdvancedSettingsComponent=AdvancedSettingsComponent;var AdvancedSettings=function AdvancedSettings(props){var _useParams=(0,_reactRouterDom.useParams)(),query=_useParams.query;return _react.default.createElement(AdvancedSettingsComponent,{queryText:query||"",enableSaving:props.enableSaving,uiSettings:props.uiSettings,dockLinks:props.dockLinks,toasts:props.toasts,componentRegistry:props.componentRegistry})};exports.AdvancedSettings=AdvancedSettings},37:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CallOuts",{enumerable:true,get:function get(){return _call_outs.CallOuts}});var _call_outs=__webpack_require__(38)},38:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CallOuts=void 0;var _react=_interopRequireDefault(__webpack_require__(2));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CallOuts=function CallOuts(){return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"advancedSettings.callOutCautionTitle",defaultMessage:"Caution: You can break stuff here"}),color:"warning",iconType:"bolt"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"advancedSettings.callOutCautionDescription",defaultMessage:"Be careful in here, these settings are for very advanced users only. Tweaks you make here can break large portions of Kibana. Some of these settings may be undocumented, unsupported or experimental. If a field has a default value, blanking the field will reset it to its default which may be unacceptable given other configuration directives. Deleting a custom setting will permanently remove it from Kibana's config."}))))};exports.CallOuts=CallOuts},39:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Search",{enumerable:true,get:function get(){return _search.Search}});var _search=__webpack_require__(40)},40:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.Search=void 0;var _react=_interopRequireWildcard(__webpack_require__(2));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(3);var _lib=__webpack_require__(7);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Search=function(_PureComponent){_inherits(Search,_PureComponent);function Search(props){var _this;_classCallCheck(this,Search);_this=_possibleConstructorReturn(this,_getPrototypeOf(Search).call(this,props));_defineProperty(_assertThisInitialized(_this),"categories",[]);_defineProperty(_assertThisInitialized(_this),"state",{isSearchTextValid:true,parseErrorMessage:null});_defineProperty(_assertThisInitialized(_this),"onChange",(function(_ref){var query=_ref.query,error=_ref.error;if(error){_this.setState({isSearchTextValid:false,parseErrorMessage:error.message});return}_this.setState({isSearchTextValid:true,parseErrorMessage:null});_this.props.onQueryChange({query:query})}));var categories=props.categories;_this.categories=categories.map((function(category){return{value:category,name:(0,_lib.getCategoryName)(category)}}));return _this}_createClass(Search,[{key:"render",value:function render(){var query=this.props.query;var box={incremental:true,"data-test-subj":"settingsSearchBar","aria-label":_i18n.i18n.translate("advancedSettings.searchBarAriaLabel",{defaultMessage:"Search advanced settings"})};var filters=[{type:"field_value_selection",field:"category",name:_i18n.i18n.translate("advancedSettings.categorySearchLabel",{defaultMessage:"Category"}),multiSelect:"or",options:this.categories}];var queryParseError;if(!this.state.isSearchTextValid){var parseErrorMsg=_i18n.i18n.translate("advancedSettings.searchBar.unableToParseQueryErrorMessage",{defaultMessage:"Unable to parse query"});queryParseError=_react.default.createElement(_eui.EuiFormErrorText,null,"".concat(parseErrorMsg,". ").concat(this.state.parseErrorMessage))}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSearchBar,{box:box,filters:filters,onChange:this.onChange,query:query}),queryParseError)}}]);return Search}(_react.PureComponent);exports.Search=Search},41:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Form",{enumerable:true,get:function get(){return _form.Form}});var _form=__webpack_require__(42)},42:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.Form=void 0;var _react=_interopRequireWildcard(__webpack_require__(2));var _classnames=_interopRequireDefault(__webpack_require__(9));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);var _lodash=__webpack_require__(10);var _i18n=__webpack_require__(0);var _public=__webpack_require__(35);var _lib=__webpack_require__(7);var _field=__webpack_require__(8);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NAV_IS_LOCKED_KEY="core.chrome.isLocked";var Form=function(_PureComponent){_inherits(Form,_PureComponent);function Form(){var _getPrototypeOf2;var _this;_classCallCheck(this,Form);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Form)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{unsavedChanges:{},loading:false});_defineProperty(_assertThisInitialized(_this),"getSettingByKey",(function(key){return Object.values(_this.props.settings).flat().find((function(el){return el.name===key}))}));_defineProperty(_assertThisInitialized(_this),"getCountOfUnsavedChanges",(function(){return Object.keys(_this.state.unsavedChanges).length}));_defineProperty(_assertThisInitialized(_this),"getCountOfHiddenUnsavedChanges",(function(){var shownSettings=Object.values(_this.props.visibleSettings).flat().map((function(setting){return setting.name}));return Object.keys(_this.state.unsavedChanges).filter((function(key){return!shownSettings.includes(key)})).length}));_defineProperty(_assertThisInitialized(_this),"areChangesInvalid",(function(){var unsavedChanges=_this.state.unsavedChanges;return Object.values(unsavedChanges).some((function(_ref){var isInvalid=_ref.isInvalid;return isInvalid}))}));_defineProperty(_assertThisInitialized(_this),"handleChange",(function(key,change){var setting=_this.getSettingByKey(key);if(!setting){return}var type=setting.type,defVal=setting.defVal,value=setting.value;var savedValue=(0,_field.getEditableValue)(type,value,defVal);if(change.value===savedValue){return _this.clearChange(key)}_this.setState({unsavedChanges:_objectSpread({},_this.state.unsavedChanges,_defineProperty({},key,change))})}));_defineProperty(_assertThisInitialized(_this),"clearChange",(function(key){if(!_this.state.unsavedChanges[key]){return}var unsavedChanges=_objectSpread({},_this.state.unsavedChanges);delete unsavedChanges[key];_this.setState({unsavedChanges:unsavedChanges})}));_defineProperty(_assertThisInitialized(_this),"clearAllUnsaved",(function(){_this.setState({unsavedChanges:{}})}));_defineProperty(_assertThisInitialized(_this),"saveAll",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var unsavedChanges,configToSave,requiresReload;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setLoading(true);unsavedChanges=_this.state.unsavedChanges;if(!(0,_lodash.isEmpty)(unsavedChanges)){_context.next=4;break}return _context.abrupt("return");case 4:configToSave={};requiresReload=false;Object.entries(unsavedChanges).forEach((function(_ref3){var _ref4=_slicedToArray(_ref3,2),name=_ref4[0],value=_ref4[1].value;var setting=_this.getSettingByKey(name);if(!setting){return}var defVal=setting.defVal,type=setting.type,requiresPageReload=setting.requiresPageReload;var valueToSave=value;var equalsToDefault=false;switch(type){case"array":valueToSave=valueToSave.split(",").map((function(val){return val.trim()}));equalsToDefault=valueToSave.join(",")===defVal.join(",");break;case"json":var isArray=Array.isArray(JSON.parse(defVal||"{}"));valueToSave=valueToSave.trim();valueToSave=valueToSave||(isArray?"[]":"{}");default:equalsToDefault=valueToSave===defVal}if(requiresPageReload){requiresReload=true}configToSave[name]=equalsToDefault?null:valueToSave}));_context.prev=7;_context.next=10;return _this.props.save(configToSave);case 10:_this.clearAllUnsaved();if(requiresReload){_this.renderPageReloadToast()}_context.next=17;break;case 14:_context.prev=14;_context.t0=_context["catch"](7);_this.props.toasts.addDanger(_i18n.i18n.translate("advancedSettings.form.saveErrorMessage",{defaultMessage:"Unable to save"}));case 17:_this.setLoading(false);case 18:case"end":return _context.stop()}}}),_callee,null,[[7,14]])}))));_defineProperty(_assertThisInitialized(_this),"renderPageReloadToast",(function(){_this.props.toasts.add({title:_i18n.i18n.translate("advancedSettings.form.requiresPageReloadToastDescription",{defaultMessage:"One or more settings require you to reload the page to take effect."}),text:(0,_public.toMountPoint)(_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",onClick:function onClick(){return window.location.reload()}},_i18n.i18n.translate("advancedSettings.form.requiresPageReloadToastButtonLabel",{defaultMessage:"Reload page"})))))),color:"success"})}));_defineProperty(_assertThisInitialized(_this),"renderCountOfUnsaved",(function(){var unsavedCount=_this.getCountOfUnsavedChanges();var hiddenUnsavedCount=_this.getCountOfHiddenUnsavedChanges();return _react.default.createElement(_eui.EuiTextColor,{className:"mgtAdvancedSettingsForm__unsavedCountMessage",color:"ghost"},_react.default.createElement(_react2.FormattedMessage,{id:"advancedSettings.form.countOfSettingsChanged",defaultMessage:"{unsavedCount} unsaved {unsavedCount, plural, one {setting} other {settings} }{hiddenCount, plural, =0 {} other {, # hidden} }",values:{unsavedCount:unsavedCount,hiddenCount:hiddenUnsavedCount}}))}));_defineProperty(_assertThisInitialized(_this),"renderBottomBar",(function(){var areChangesInvalid=_this.areChangesInvalid();var bottomBarClasses=(0,_classnames.default)("mgtAdvancedSettingsForm__bottomBar",{"mgtAdvancedSettingsForm__bottomBar--pushForNav":localStorage.getItem(NAV_IS_LOCKED_KEY)==="true"});return _react.default.createElement(_eui.EuiBottomBar,{className:bottomBarClasses,"data-test-subj":"advancedSetting-bottomBar"},_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center",responsive:false,gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false,className:"mgtAdvancedSettingsForm__unsavedCount"},_react.default.createElement("p",{id:"aria-describedby.countOfUnsavedSettings"},_this.renderCountOfUnsaved())),_react.default.createElement(_eui.EuiFlexItem,null),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{color:"ghost",size:"s",iconType:"cross",onClick:_this.clearAllUnsaved,"aria-describedby":"aria-describedby.countOfUnsavedSettings","data-test-subj":"advancedSetting-cancelButton"},_i18n.i18n.translate("advancedSettings.form.cancelButtonLabel",{defaultMessage:"Cancel changes"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiToolTip,{content:areChangesInvalid&&_i18n.i18n.translate("advancedSettings.form.saveButtonTooltipWithInvalidChanges",{defaultMessage:"Fix invalid settings before saving."})},_react.default.createElement(_eui.EuiButton,{className:"mgtAdvancedSettingsForm__button",disabled:areChangesInvalid,color:"secondary",fill:true,size:"s",iconType:"check",onClick:_this.saveAll,"aria-describedby":"aria-describedby.countOfUnsavedSettings",isLoading:_this.state.loading,"data-test-subj":"advancedSetting-saveButton"},_i18n.i18n.translate("advancedSettings.form.saveButtonLabel",{defaultMessage:"Save changes"}))))))}));return _this}_createClass(Form,[{key:"setLoading",value:function setLoading(loading){this.setState({loading:loading})}},{key:"renderClearQueryLink",value:function renderClearQueryLink(totalSettings,currentSettings){var clearQuery=this.props.clearQuery;if(totalSettings!==currentSettings){return _react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement("em",null,_react.default.createElement(_react2.FormattedMessage,{id:"advancedSettings.form.searchResultText",defaultMessage:"Search terms are hiding {settingsCount} settings {clearSearch}",values:{settingsCount:totalSettings-currentSettings,clearSearch:_react.default.createElement(_eui.EuiLink,{onClick:clearQuery},_react.default.createElement("em",null,_react.default.createElement(_react2.FormattedMessage,{id:"advancedSettings.form.clearSearchResultText",defaultMessage:"(clear search)"})))}})))}return null}},{key:"renderCategory",value:function renderCategory(category,settings,totalSettings){var _this2=this;return _react.default.createElement(_react.Fragment,{key:category},_react.default.createElement(_eui.EuiPanel,{paddingSize:"l"},_react.default.createElement(_eui.EuiForm,null,_react.default.createElement(_eui.EuiText,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"baseline"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement("h2",null,(0,_lib.getCategoryName)(category))),this.renderClearQueryLink(totalSettings,settings.length))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),settings.map((function(setting){return _react.default.createElement(_field.Field,{key:setting.name,setting:setting,handleChange:_this2.handleChange,unsavedChanges:_this2.state.unsavedChanges[setting.name],clearChange:_this2.clearChange,enableSaving:_this2.props.enableSaving,dockLinks:_this2.props.dockLinks,toasts:_this2.props.toasts})})))),_react.default.createElement(_eui.EuiSpacer,{size:"l"}))}},{key:"maybeRenderNoSettings",value:function maybeRenderNoSettings(clearQuery){if(this.props.showNoResultsMessage){return _react.default.createElement(_eui.EuiPanel,{paddingSize:"l"},_react.default.createElement(_react2.FormattedMessage,{id:"advancedSettings.form.noSearchResultText",defaultMessage:"No settings found {clearSearch}",values:{clearSearch:_react.default.createElement(_eui.EuiLink,{onClick:clearQuery},_react.default.createElement(_react2.FormattedMessage,{id:"advancedSettings.form.clearNoSearchResultText",defaultMessage:"(clear search)"}))}}))}return null}},{key:"render",value:function render(){var _this3=this;var unsavedChanges=this.state.unsavedChanges;var _this$props=this.props,visibleSettings=_this$props.visibleSettings,categories=_this$props.categories,categoryCounts=_this$props.categoryCounts,clearQuery=_this$props.clearQuery;var currentCategories=[];categories.forEach((function(category){if(visibleSettings[category]&&visibleSettings[category].length){currentCategories.push(category)}}));return _react.default.createElement(_react.Fragment,null,_react.default.createElement("div",null,currentCategories.length?currentCategories.map((function(category){return _this3.renderCategory(category,visibleSettings[category],categoryCounts[category])})):this.maybeRenderNoSettings(clearQuery)),!(0,_lodash.isEmpty)(unsavedChanges)&&this.renderBottomBar())}}]);return Form}(_react.PureComponent);exports.Form=Form},43:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AdvancedSettingsVoiceAnnouncement",{enumerable:true,get:function get(){return _advanced_settings_voice_announcement.AdvancedSettingsVoiceAnnouncement}});var _advanced_settings_voice_announcement=__webpack_require__(44)},44:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.AdvancedSettingsVoiceAnnouncement=void 0;var _react=_interopRequireWildcard(__webpack_require__(2));var _react2=__webpack_require__(4);var _eui=__webpack_require__(3);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AdvancedSettingsVoiceAnnouncement=function(_Component){_inherits(AdvancedSettingsVoiceAnnouncement,_Component);function AdvancedSettingsVoiceAnnouncement(){var _getPrototypeOf2;var _this;_classCallCheck(this,AdvancedSettingsVoiceAnnouncement);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(AdvancedSettingsVoiceAnnouncement)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"shouldComponentUpdate",(function(nextProps){return nextProps.queryText!==_this.props.queryText}));return _this}_createClass(AdvancedSettingsVoiceAnnouncement,[{key:"render",value:function render(){var filteredSections=Object.values(this.props.settings).map((function(setting){return setting.map((function(option){return option.ariaName}))}));var filteredOptions=_toConsumableArray(filteredSections);return _react.default.createElement(_eui.EuiScreenReaderOnly,null,_react.default.createElement("div",{role:"region","aria-live":"polite"},_react.default.createElement(_eui.EuiDelayRender,null,_react.default.createElement(_react2.FormattedMessage,{id:"advancedSettings.voiceAnnouncement.searchResultScreenReaderMessage",defaultMessage:"You searched for {query}. There {optionLenght, plural, one {is # option} other {are # options}} in {sectionLenght, plural, one {# section} other {# sections}}",values:{query:this.props.queryText,sectionLenght:filteredSections.length,optionLenght:filteredOptions.length}}))))}}]);return AdvancedSettingsVoiceAnnouncement}(_react.Component);exports.AdvancedSettingsVoiceAnnouncement=AdvancedSettingsVoiceAnnouncement}}]);