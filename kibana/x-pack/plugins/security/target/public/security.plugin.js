var __kbnBundles__=typeof __kbnBundles__==="object"?__kbnBundles__:{};__kbnBundles__["plugin/security"]=function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}}var installedModules={};var installedChunks={0:0};function jsonpScriptSrc(chunkId){return __webpack_require__.p+""+({}[chunkId]||chunkId)+".plugin.js"}function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(chunkId){var promises=[];var installedChunkData=installedChunks[chunkId];if(installedChunkData!==0){if(installedChunkData){promises.push(installedChunkData[2])}else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var script=document.createElement("script");var onScriptComplete;script.charset="utf-8";script.timeout=120;if(__webpack_require__.nc){script.setAttribute("nonce",__webpack_require__.nc)}script.src=jsonpScriptSrc(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null;clearTimeout(timeout);var chunk=installedChunks[chunkId];if(chunk!==0){if(chunk){var errorType=event&&(event.type==="load"?"missing":event.type);var realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")";error.name="ChunkLoadError";error.type=errorType;error.request=realSrc;chunk[1](error)}installedChunks[chunkId]=undefined}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete;document.head.appendChild(script)}}return Promise.all(promises)};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="__REPLACE_WITH_PUBLIC_PATH__";__webpack_require__.oe=function(err){console.error(err);throw err};var jsonpArray=window["security_bundle_jsonpfunction"]=window["security_bundle_jsonpfunction"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;return __webpack_require__(__webpack_require__.s=90)}([function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,exports){(function(){var undefined;var VERSION="3.10.1";var BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_BOUND_FLAG=4,CURRY_FLAG=8,CURRY_RIGHT_FLAG=16,PARTIAL_FLAG=32,PARTIAL_RIGHT_FLAG=64,ARY_FLAG=128,REARG_FLAG=256;var DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...";var HOT_COUNT=150,HOT_SPAN=16;var LARGE_ARRAY_SIZE=200;var LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2;var FUNC_ERROR_TEXT="Expected a function";var PLACEHOLDER="__lodash_placeholder__";var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEscapedHtml=/&(?:amp|lt|gt|quot|#39|#96);/g,reUnescapedHtml=/[&<>"'`]/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source);var reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g;var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g;var reRegExpChars=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,reHasRegExpChars=RegExp(reRegExpChars.source);var reComboMark=/[\u0300-\u036f\ufe20-\ufe23]/g;var reEscapeChar=/\\(\\)?/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reHasHexPrefix=/^0[xX]/;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^\d+$/;var reLatin1=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g;var reNoMatch=/($^)/;var reUnescapedString=/['\n\r\u2028\u2029\\]/g;var reWords=function(){var upper="[A-Z\\xc0-\\xd6\\xd8-\\xde]",lower="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(upper+"+(?="+upper+lower+")|"+upper+"?"+lower+"|"+upper+"+|[0-9]+","g")}();var contextProps=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"];var templateCounter=-1;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[stringTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[mapTag]=cloneableTags[setTag]=cloneableTags[weakMapTag]=false;var deburredLetters={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"};var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};var htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"};var objectTypes={function:true,object:true};var regexpEscapes={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"};var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module;var freeGlobal=freeExports&&freeModule&&typeof global=="object"&&global&&global.Object&&global;var freeSelf=objectTypes[typeof self]&&self&&self.Object&&self;var freeWindow=objectTypes[typeof window]&&window&&window.Object&&window;var moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports;var root=freeGlobal||freeWindow!==(this&&this.window)&&freeWindow||freeSelf||this;function baseCompareAscending(value,other){if(value!==other){var valIsNull=value===null,valIsUndef=value===undefined,valIsReflexive=value===value;var othIsNull=other===null,othIsUndef=other===undefined,othIsReflexive=other===other;if(value>other&&!othIsNull||!valIsReflexive||valIsNull&&!othIsUndef&&othIsReflexive||valIsUndef&&othIsReflexive){return 1}if(value<other&&!valIsNull||!othIsReflexive||othIsNull&&!valIsUndef&&valIsReflexive||othIsUndef&&valIsReflexive){return-1}}return 0}function baseFindIndex(array,predicate,fromRight){var length=array.length,index=fromRight?length:-1;while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index}}return-1}function baseIndexOf(array,value,fromIndex){if(value!==value){return indexOfNaN(array,fromIndex)}var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index}}return-1}function baseIsFunction(value){return typeof value=="function"||false}function baseToString(value){return value==null?"":value+""}function charsLeftIndex(string,chars){var index=-1,length=string.length;while(++index<length&&chars.indexOf(string.charAt(index))>-1){}return index}function charsRightIndex(string,chars){var index=string.length;while(index--&&chars.indexOf(string.charAt(index))>-1){}return index}function compareAscending(object,other){return baseCompareAscending(object.criteria,other.criteria)||object.index-other.index}function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index<length){var result=baseCompareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength){return result}var order=orders[index];return result*(order==="asc"||order===true?1:-1)}}return object.index-other.index}function deburrLetter(letter){return deburredLetters[letter]}function escapeHtmlChar(chr){return htmlEscapes[chr]}function escapeRegExpChar(chr,leadingChar,whitespaceChar){if(leadingChar){chr=regexpEscapes[chr]}else if(whitespaceChar){chr=stringEscapes[chr]}return"\\"+chr}function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function indexOfNaN(array,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?0:-1);while(fromRight?index--:++index<length){var other=array[index];if(other!==other){return index}}return-1}function isObjectLike(value){return!!value&&typeof value=="object"}function isSpace(charCode){return charCode<=160&&(charCode>=9&&charCode<=13)||charCode==32||charCode==160||charCode==5760||charCode==6158||charCode>=8192&&(charCode<=8202||charCode==8232||charCode==8233||charCode==8239||charCode==8287||charCode==12288||charCode==65279)}function replaceHolders(array,placeholder){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){if(array[index]===placeholder){array[index]=PLACEHOLDER;result[++resIndex]=index}}return result}function safeGet(object,key){if(key==="constructor"&&typeof object[key]==="function"){return}return key=="__proto__"?undefined:object[key]}function sortedUniq(array,iteratee){var seen,index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(!index||seen!==computed){seen=computed;result[++resIndex]=value}}return result}function trimmedLeftIndex(string){var index=-1,length=string.length;while(++index<length&&isSpace(string.charCodeAt(index))){}return index}function trimmedRightIndex(string){var index=string.length;while(index--&&isSpace(string.charCodeAt(index))){}return index}function unescapeHtmlChar(chr){return htmlUnescapes[chr]}function runInContext(context){context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayProto=Array.prototype,objectProto=Object.prototype,stringProto=String.prototype;var fnToString=Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var idCounter=0;var objToString=objectProto.toString;var oldDash=root._;var reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ArrayBuffer=context.ArrayBuffer,clearTimeout=context.clearTimeout,parseFloat=context.parseFloat,pow=Math.pow,propertyIsEnumerable=objectProto.propertyIsEnumerable,Set=getNative(context,"Set"),setTimeout=context.setTimeout,splice=arrayProto.splice,Uint8Array=context.Uint8Array,WeakMap=getNative(context,"WeakMap");var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();var nativeCeil=Math.ceil,nativeCreate=getNative(Object,"create"),nativeFloor=Math.floor,nativeIsArray=getNative(Array,"isArray"),nativeIsFinite=context.isFinite,nativeKeys=getNative(Object,"keys"),nativeMax=Math.max,nativeMin=Math.min,nativeNow=getNative(Date,"now"),nativeParseInt=context.parseInt,nativeRandom=Math.random;var NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,POSITIVE_INFINITY=Number.POSITIVE_INFINITY;var MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1;var MAX_SAFE_INTEGER=9007199254740991;var metaMap=WeakMap&&new WeakMap;var realNames={};function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper){return value}if(hasOwnProperty.call(value,"__chain__")&&hasOwnProperty.call(value,"__wrapped__")){return wrapperClone(value)}}return new LodashWrapper(value)}function baseLodash(){}function LodashWrapper(value,chainAll,actions){this.__wrapped__=value;this.__actions__=actions||[];this.__chain__=!!chainAll}var support=lodash.support={};lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}};function LazyWrapper(value){this.__wrapped__=value;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=POSITIVE_INFINITY;this.__views__=[]}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);result.__actions__=arrayCopy(this.__actions__);result.__dir__=this.__dir__;result.__filtered__=this.__filtered__;result.__iteratees__=arrayCopy(this.__iteratees__);result.__takeCount__=this.__takeCount__;result.__views__=arrayCopy(this.__views__);return result}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1;result.__filtered__=true}else{result=this.clone();result.__dir__*=-1}return result}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||arrLength<LARGE_ARRAY_SIZE||arrLength==length&&takeCount==length){return baseWrapperValue(isRight&&isArr?array.reverse():array,this.__actions__)}var result=[];outer:while(length--&&resIndex<takeCount){index+=dir;var iterIndex=-1,value=array[index];while(++iterIndex<iterLength){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type==LAZY_MAP_FLAG){value=computed}else if(!computed){if(type==LAZY_FILTER_FLAG){continue outer}else{break outer}}}result[resIndex++]=value}return result}function MapCache(){this.__data__={}}function mapDelete(key){return this.has(key)&&delete this.__data__[key]}function mapGet(key){return key=="__proto__"?undefined:this.__data__[key]}function mapHas(key){return key!="__proto__"&&hasOwnProperty.call(this.__data__,key)}function mapSet(key,value){if(key!="__proto__"){this.__data__[key]=value}return this}function SetCache(values){var length=values?values.length:0;this.data={hash:nativeCreate(null),set:new Set};while(length--){this.push(values[length])}}function cacheIndexOf(cache,value){var data=cache.data,result=typeof value=="string"||isObject(value)?data.set.has(value):data.hash[value];return result?0:-1}function cachePush(value){var data=this.data;if(typeof value=="string"||isObject(value)){data.set.add(value)}else{data.hash[value]=true}}function arrayConcat(array,other){var index=-1,length=array.length,othIndex=-1,othLength=other.length,result=Array(length+othLength);while(++index<length){result[index]=array[index]}while(++othIndex<othLength){result[index++]=other[othIndex]}return result}function arrayCopy(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}function arrayEach(array,iteratee){var index=-1,length=array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}function arrayEachRight(array,iteratee){var length=array.length;while(length--){if(iteratee(array[length],length,array)===false){break}}return array}function arrayEvery(array,predicate){var index=-1,length=array.length;while(++index<length){if(!predicate(array[index],index,array)){return false}}return true}function arrayExtremum(array,iteratee,comparator,exValue){var index=-1,length=array.length,computed=exValue,result=computed;while(++index<length){var value=array[index],current=+iteratee(value);if(comparator(current,computed)){computed=current;result=value}}return result}function arrayFilter(array,predicate){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[++resIndex]=value}}return result}function arrayMap(array,iteratee){var index=-1,length=array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}function arrayReduce(array,iteratee,accumulator,initFromArray){var index=-1,length=array.length;if(initFromArray&&length){accumulator=array[++index]}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array)}return accumulator}function arrayReduceRight(array,iteratee,accumulator,initFromArray){var length=array.length;if(initFromArray&&length){accumulator=array[--length]}while(length--){accumulator=iteratee(accumulator,array[length],length,array)}return accumulator}function arraySome(array,predicate){var index=-1,length=array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}function arraySum(array,iteratee){var length=array.length,result=0;while(length--){result+=+iteratee(array[length])||0}return result}function assignDefaults(objectValue,sourceValue){return objectValue===undefined?sourceValue:objectValue}function assignOwnDefaults(objectValue,sourceValue,key,object){return objectValue===undefined||!hasOwnProperty.call(object,key)?sourceValue:objectValue}function assignWith(object,source,customizer){var index=-1,props=keys(source),length=props.length;while(++index<length){var key=props[index],value=object[key],result=customizer(value,source[key],key,object,source);if((result===result?result!==value:value===value)||value===undefined&&!(key in object)){object[key]=result}}return object}function baseAssign(object,source){return source==null?object:baseCopy(source,keys(source),object)}function baseAt(collection,props){var index=-1,isNil=collection==null,isArr=!isNil&&isArrayLike(collection),length=isArr?collection.length:0,propsLength=props.length,result=Array(propsLength);while(++index<propsLength){var key=props[index];if(isArr){result[index]=isIndex(key,length)?collection[key]:undefined}else{result[index]=isNil?undefined:collection[key]}}return result}function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty){defineProperty(object,key,{configurable:true,enumerable:true,value:value,writable:true})}else{object[key]=value}}function baseCopy(source,props,object){object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];object[key]=source[key]}return object}function baseCallback(func,thisArg,argCount){var type=typeof func;if(type=="function"){return thisArg===undefined?func:bindCallback(func,thisArg,argCount)}if(func==null){return identity}if(type=="object"){return baseMatches(func)}return thisArg===undefined?property(func):baseMatchesProperty(func,thisArg)}function baseClone(value,isDeep,customizer,key,object,stackA,stackB){var result;if(customizer){result=object?customizer(value,key,object):customizer(value)}if(result!==undefined){return result}if(!isObject(value)){return value}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return arrayCopy(value,result)}}else{var tag=objToString.call(value),isFunc=tag==funcTag;if(tag==objectTag||tag==argsTag||isFunc&&!object){result=initCloneObject(isFunc?{}:value);if(!isDeep){return baseAssign(result,value)}}else{return cloneableTags[tag]?initCloneByTag(value,tag,isDeep):object?value:{}}}stackA||(stackA=[]);stackB||(stackB=[]);var length=stackA.length;while(length--){if(stackA[length]==value){return stackB[length]}}stackA.push(value);stackB.push(result);(isArr?arrayEach:baseForOwn)(value,(function(subValue,key){result[key]=baseClone(subValue,isDeep,customizer,key,value,stackA,stackB)}));return result}var baseCreate=function(){function object(){}return function(prototype){if(isObject(prototype)){object.prototype=prototype;var result=new object;object.prototype=undefined}return result||{}}}();function baseDelay(func,wait,args){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return setTimeout((function(){func.apply(undefined,args)}),wait)}function baseDifference(array,values){var length=array?array.length:0,result=[];if(!length){return result}var index=-1,indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,cache=isCommon&&values.length>=LARGE_ARRAY_SIZE?createCache(values):null,valuesLength=values.length;if(cache){indexOf=cacheIndexOf;isCommon=false;values=cache}outer:while(++index<length){var value=array[index];if(isCommon&&value===value){var valuesIndex=valuesLength;while(valuesIndex--){if(values[valuesIndex]===value){continue outer}}result.push(value)}else if(indexOf(values,value,0)<0){result.push(value)}}return result}var baseEach=createBaseEach(baseForOwn);var baseEachRight=createBaseEach(baseForOwnRight,true);function baseEvery(collection,predicate){var result=true;baseEach(collection,(function(value,index,collection){result=!!predicate(value,index,collection);return result}));return result}function baseExtremum(collection,iteratee,comparator,exValue){var computed=exValue,result=computed;baseEach(collection,(function(value,index,collection){var current=+iteratee(value,index,collection);if(comparator(current,computed)||current===exValue&&current===result){computed=current;result=value}}));return result}function baseFill(array,value,start,end){var length=array.length;start=start==null?0:+start||0;if(start<0){start=-start>length?0:length+start}end=end===undefined||end>length?length:+end||0;if(end<0){end+=length}length=start>end?0:end>>>0;start>>>=0;while(start<length){array[start++]=value}return array}function baseFilter(collection,predicate){var result=[];baseEach(collection,(function(value,index,collection){if(predicate(value,index,collection)){result.push(value)}}));return result}function baseFind(collection,predicate,eachFunc,retKey){var result;eachFunc(collection,(function(value,key,collection){if(predicate(value,key,collection)){result=retKey?key:value;return false}}));return result}function baseFlatten(array,isDeep,isStrict,result){result||(result=[]);var index=-1,length=array.length;while(++index<length){var value=array[index];if(isObjectLike(value)&&isArrayLike(value)&&(isStrict||isArray(value)||isArguments(value))){if(isDeep){baseFlatten(value,isDeep,isStrict,result)}else{arrayPush(result,value)}}else if(!isStrict){result[result.length]=value}}return result}var baseFor=createBaseFor();var baseForRight=createBaseFor(true);function baseForIn(object,iteratee){return baseFor(object,iteratee,keysIn)}function baseForOwn(object,iteratee){return baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return baseForRight(object,iteratee,keys)}function baseFunctions(object,props){var index=-1,length=props.length,resIndex=-1,result=[];while(++index<length){var key=props[index];if(isFunction(object[key])){result[++resIndex]=key}}return result}function baseGet(object,path,pathKey){if(object==null){return}if(pathKey!==undefined&&pathKey in toObject(object)){path=[pathKey]}var index=0,length=path.length;while(object!=null&&index<length){object=object[path[index++]]}return index&&index==length?object:undefined}function baseIsEqual(value,other,customizer,isLoose,stackA,stackB){if(value===other){return true}if(value==null||other==null||!isObject(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,baseIsEqual,customizer,isLoose,stackA,stackB)}function baseIsEqualDeep(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;if(!objIsArr){objTag=objToString.call(object);if(objTag==argsTag){objTag=objectTag}else if(objTag!=objectTag){objIsArr=isTypedArray(object)}}if(!othIsArr){othTag=objToString.call(other);if(othTag==argsTag){othTag=objectTag}else if(othTag!=objectTag){othIsArr=isTypedArray(other)}}var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&!(objIsArr||objIsObj)){return equalByTag(object,other,objTag)}if(!isLoose){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,customizer,isLoose,stackA,stackB)}}if(!isSameTag){return false}stackA||(stackA=[]);stackB||(stackB=[]);var length=stackA.length;while(length--){if(stackA[length]==object){return stackB[length]==other}}stackA.push(object);stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,isLoose,stackA,stackB);stackA.pop();stackB.pop();return result}function baseIsMatch(object,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length}object=toObject(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false}}else{var result=customizer?customizer(objValue,srcValue,key):undefined;if(!(result===undefined?baseIsEqual(srcValue,objValue,customizer,true):result)){return false}}}return true}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,(function(value,key,collection){result[++index]=iteratee(value,key,collection)}));return result}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){var key=matchData[0][0],value=matchData[0][1];return function(object){if(object==null){return false}return object[key]===value&&(value!==undefined||key in toObject(object))}}return function(object){return baseIsMatch(object,matchData)}}function baseMatchesProperty(path,srcValue){var isArr=isArray(path),isCommon=isKey(path)&&isStrictComparable(srcValue),pathKey=path+"";path=toPath(path);return function(object){if(object==null){return false}var key=pathKey;object=toObject(object);if((isArr||!isCommon)&&!(key in object)){object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));if(object==null){return false}key=last(path);object=toObject(object)}return object[key]===srcValue?srcValue!==undefined||key in object:baseIsEqual(srcValue,object[key],undefined,true)}}function baseMerge(object,source,customizer,stackA,stackB){if(!isObject(object)){return object}var isSrcArr=isArrayLike(source)&&(isArray(source)||isTypedArray(source)),props=isSrcArr?undefined:keys(source);arrayEach(props||source,(function(srcValue,key){if(props){key=srcValue;srcValue=safeGet(source,key)}if(isObjectLike(srcValue)){stackA||(stackA=[]);stackB||(stackB=[]);baseMergeDeep(object,source,key,baseMerge,customizer,stackA,stackB)}else{var value=safeGet(object,key),result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;if(isCommon){result=srcValue}if((result!==undefined||isSrcArr&&!(key in object))&&(isCommon||(result===result?result!==value:value===value))){baseAssignValue(object,key,result)}}}));return object}function baseMergeDeep(object,source,key,mergeFunc,customizer,stackA,stackB){var length=stackA.length,srcValue=safeGet(source,key);while(length--){if(stackA[length]==srcValue){baseAssignValue(object,key,stackB[length]);return}}var value=safeGet(object,key),result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;if(isCommon){result=srcValue;if(isArrayLike(srcValue)&&(isArray(srcValue)||isTypedArray(srcValue))){result=isArray(value)?value:isArrayLike(value)?arrayCopy(value):[]}else if(isPlainObject(srcValue)||isArguments(srcValue)){result=isArguments(value)?toPlainObject(value):isPlainObject(value)?value:{}}else{isCommon=false}}stackA.push(srcValue);stackB.push(result);if(isCommon){baseAssignValue(object,key,mergeFunc(result,srcValue,customizer,stackA,stackB))}else if(result===result?result!==value:value===value){baseAssignValue(object,key,result)}}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}function basePropertyDeep(path){var pathKey=path+"";path=toPath(path);return function(object){return baseGet(object,path,pathKey)}}function basePullAt(array,indexes){var length=array?indexes.length:0;while(length--){var index=indexes[length];if(index!=previous&&isIndex(index)){var previous=index;splice.call(array,index,1)}}return array}function baseRandom(min,max){return min+nativeFloor(nativeRandom()*(max-min+1))}function baseReduce(collection,iteratee,accumulator,initFromCollection,eachFunc){eachFunc(collection,(function(value,index,collection){accumulator=initFromCollection?(initFromCollection=false,value):iteratee(accumulator,value,index,collection)}));return accumulator}var baseSetData=!metaMap?identity:function(func,data){metaMap.set(func,data);return func};function baseSlice(array,start,end){var index=-1,length=array.length;start=start==null?0:+start||0;if(start<0){start=-start>length?0:length+start}end=end===undefined||end>length?length:+end||0;if(end<0){end+=length}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start]}return result}function baseSome(collection,predicate){var result;baseEach(collection,(function(value,index,collection){result=predicate(value,index,collection);return!result}));return!!result}function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--){array[length]=array[length].value}return array}function baseSortByOrder(collection,iteratees,orders){var callback=getCallback(),index=-1;iteratees=arrayMap(iteratees,(function(iteratee){return callback(iteratee)}));var result=baseMap(collection,(function(value){var criteria=arrayMap(iteratees,(function(iteratee){return iteratee(value)}));return{criteria:criteria,index:++index,value:value}}));return baseSortBy(result,(function(object,other){return compareMultiple(object,other,orders)}))}function baseSum(collection,iteratee){var result=0;baseEach(collection,(function(value,index,collection){result+=+iteratee(value,index,collection)||0}));return result}function baseUniq(array,iteratee){var index=-1,indexOf=getIndexOf(),length=array.length,isCommon=indexOf==baseIndexOf,isLarge=isCommon&&length>=LARGE_ARRAY_SIZE,seen=isLarge?createCache():null,result=[];if(seen){indexOf=cacheIndexOf;isCommon=false}else{isLarge=false;seen=iteratee?[]:result}outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(isCommon&&value===value){var seenIndex=seen.length;while(seenIndex--){if(seen[seenIndex]===computed){continue outer}}if(iteratee){seen.push(computed)}result.push(value)}else if(indexOf(seen,computed,0)<0){if(iteratee||isLarge){seen.push(computed)}result.push(value)}}return result}function baseValues(object,props){var index=-1,length=props.length,result=Array(length);while(++index<length){result[index]=object[props[index]]}return result}function baseWhile(array,predicate,isDrop,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index<length)&&predicate(array[index],index,array)){}return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;if(result instanceof LazyWrapper){result=result.value()}var index=-1,length=actions.length;while(++index<length){var action=actions[index];result=action.func.apply(action.thisArg,arrayPush([result],action.args))}return result}function binaryIndex(array,value,retHighest){var low=0,high=array?array.length:low;if(typeof value=="number"&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){while(low<high){var mid=low+high>>>1,computed=array[mid];if((retHighest?computed<=value:computed<value)&&computed!==null){low=mid+1}else{high=mid}}return high}return binaryIndexBy(array,value,identity,retHighest)}function binaryIndexBy(array,value,iteratee,retHighest){value=iteratee(value);var low=0,high=array?array.length:0,valIsNaN=value!==value,valIsNull=value===null,valIsUndef=value===undefined;while(low<high){var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),isDef=computed!==undefined,isReflexive=computed===computed;if(valIsNaN){var setLow=isReflexive||retHighest}else if(valIsNull){setLow=isReflexive&&isDef&&(retHighest||computed!=null)}else if(valIsUndef){setLow=isReflexive&&(retHighest||isDef)}else if(computed==null){setLow=false}else{setLow=retHighest?computed<=value:computed<value}if(setLow){low=mid+1}else{high=mid}}return nativeMin(high,MAX_ARRAY_INDEX)}function bindCallback(func,thisArg,argCount){if(typeof func!="function"){return identity}if(thisArg===undefined){return func}switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}function bufferClone(buffer){var result=new ArrayBuffer(buffer.byteLength),view=new Uint8Array(result);view.set(new Uint8Array(buffer));return result}function composeArgs(args,partials,holders){var holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),leftIndex=-1,leftLength=partials.length,result=Array(leftLength+argsLength);while(++leftIndex<leftLength){result[leftIndex]=partials[leftIndex]}while(++argsIndex<holdersLength){result[holders[argsIndex]]=args[argsIndex]}while(argsLength--){result[leftIndex++]=args[argsIndex++]}return result}function composeArgsRight(args,partials,holders){var holdersIndex=-1,holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),rightIndex=-1,rightLength=partials.length,result=Array(argsLength+rightLength);while(++argsIndex<argsLength){result[argsIndex]=args[argsIndex]}var offset=argsIndex;while(++rightIndex<rightLength){result[offset+rightIndex]=partials[rightIndex]}while(++holdersIndex<holdersLength){result[offset+holders[holdersIndex]]=args[argsIndex++]}return result}function createAggregator(setter,initializer){return function(collection,iteratee,thisArg){var result=initializer?initializer():{};iteratee=getCallback(iteratee,thisArg,3);if(isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];setter(result,value,iteratee(value,index,collection),collection)}}else{baseEach(collection,(function(value,key,collection){setter(result,value,iteratee(value,key,collection),collection)}))}return result}}function createAssigner(assigner){return restParam((function(object,sources){var index=-1,length=object==null?0:sources.length,customizer=length>2?sources[length-2]:undefined,guard=length>2?sources[2]:undefined,thisArg=length>1?sources[length-1]:undefined;if(typeof customizer=="function"){customizer=bindCallback(customizer,thisArg,5);length-=2}else{customizer=typeof thisArg=="function"?thisArg:undefined;length-=customizer?1:0}if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}while(++index<length){var source=sources[index];if(source){assigner(object,source,customizer)}}return object}))}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){var length=collection?getLength(collection):0;if(!isLength(length)){return eachFunc(collection,iteratee)}var index=fromRight?length:-1,iterable=toObject(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break}}return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var iterable=toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;while(fromRight?index--:++index<length){var key=props[index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}function createBindWrapper(func,thisArg){var Ctor=createCtorWrapper(func);function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(thisArg,arguments)}return wrapper}function createCache(values){return nativeCreate&&Set?new SetCache(values):null}function createCompounder(callback){return function(string){var index=-1,array=words(deburr(string)),length=array.length,result="";while(++index<length){result=callback(result,array[index],index)}return result}}function createCtorWrapper(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}function createCurry(flag){function curryFunc(func,arity,guard){if(guard&&isIterateeCall(func,arity,guard)){arity=undefined}var result=createWrapper(func,flag,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder=curryFunc.placeholder;return result}return curryFunc}function createDefaults(assigner,customizer){return restParam((function(args){var object=args[0];if(object==null){return object}args.push(customizer);return assigner.apply(undefined,args)}))}function createExtremum(comparator,exValue){return function(collection,iteratee,thisArg){if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=undefined}iteratee=getCallback(iteratee,thisArg,3);if(iteratee.length==1){collection=isArray(collection)?collection:toIterable(collection);var result=arrayExtremum(collection,iteratee,comparator,exValue);if(!(collection.length&&result===exValue)){return result}}return baseExtremum(collection,iteratee,comparator,exValue)}}function createFind(eachFunc,fromRight){return function(collection,predicate,thisArg){predicate=getCallback(predicate,thisArg,3);if(isArray(collection)){var index=baseFindIndex(collection,predicate,fromRight);return index>-1?collection[index]:undefined}return baseFind(collection,predicate,eachFunc)}}function createFindIndex(fromRight){return function(array,predicate,thisArg){if(!(array&&array.length)){return-1}predicate=getCallback(predicate,thisArg,3);return baseFindIndex(array,predicate,fromRight)}}function createFindKey(objectFunc){return function(object,predicate,thisArg){predicate=getCallback(predicate,thisArg,3);return baseFind(object,predicate,objectFunc,true)}}function createFlow(fromRight){return function(){var wrapper,length=arguments.length,index=fromRight?length:-1,leftIndex=0,funcs=Array(length);while(fromRight?index--:++index<length){var func=funcs[leftIndex++]=arguments[index];if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(!wrapper&&LodashWrapper.prototype.thru&&getFuncName(func)=="wrapper"){wrapper=new LodashWrapper([],true)}}index=wrapper?-1:length;while(++index<length){func=funcs[index];var funcName=getFuncName(func),data=funcName=="wrapper"?getData(func):undefined;if(data&&isLaziable(data[0])&&data[1]==(ARY_FLAG|CURRY_FLAG|PARTIAL_FLAG|REARG_FLAG)&&!data[4].length&&data[9]==1){wrapper=wrapper[getFuncName(data[0])].apply(wrapper,data[3])}else{wrapper=func.length==1&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func)}}return function(){var args=arguments,value=args[0];if(wrapper&&args.length==1&&isArray(value)&&value.length>=LARGE_ARRAY_SIZE){return wrapper.plant(value).value()}var index=0,result=length?funcs[index].apply(this,args):value;while(++index<length){result=funcs[index].call(this,result)}return result}}}function createForEach(arrayFunc,eachFunc){return function(collection,iteratee,thisArg){return typeof iteratee=="function"&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee):eachFunc(collection,bindCallback(iteratee,thisArg,3))}}function createForIn(objectFunc){return function(object,iteratee,thisArg){if(typeof iteratee!="function"||thisArg!==undefined){iteratee=bindCallback(iteratee,thisArg,3)}return objectFunc(object,iteratee,keysIn)}}function createForOwn(objectFunc){return function(object,iteratee,thisArg){if(typeof iteratee!="function"||thisArg!==undefined){iteratee=bindCallback(iteratee,thisArg,3)}return objectFunc(object,iteratee)}}function createObjectMapper(isMapKeys){return function(object,iteratee,thisArg){var result={};iteratee=getCallback(iteratee,thisArg,3);baseForOwn(object,(function(value,key,object){var mapped=iteratee(value,key,object);key=isMapKeys?mapped:key;value=isMapKeys?value:mapped;result[key]=value}));return result}}function createPadDir(fromRight){return function(string,length,chars){string=baseToString(string);return(fromRight?string:"")+createPadding(string,length,chars)+(fromRight?"":string)}}function createPartial(flag){var partialFunc=restParam((function(func,partials){var holders=replaceHolders(partials,partialFunc.placeholder);return createWrapper(func,flag,undefined,partials,holders)}));return partialFunc}function createReduce(arrayFunc,eachFunc){return function(collection,iteratee,accumulator,thisArg){var initFromArray=arguments.length<3;return typeof iteratee=="function"&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee,accumulator,initFromArray):baseReduce(collection,getCallback(iteratee,thisArg,4),accumulator,initFromArray,eachFunc)}}function createHybridWrapper(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&ARY_FLAG,isBind=bitmask&BIND_FLAG,isBindKey=bitmask&BIND_KEY_FLAG,isCurry=bitmask&CURRY_FLAG,isCurryBound=bitmask&CURRY_BOUND_FLAG,isCurryRight=bitmask&CURRY_RIGHT_FLAG,Ctor=isBindKey?undefined:createCtorWrapper(func);function wrapper(){var length=arguments.length,index=length,args=Array(length);while(index--){args[index]=arguments[index]}if(partials){args=composeArgs(args,partials,holders)}if(partialsRight){args=composeArgsRight(args,partialsRight,holdersRight)}if(isCurry||isCurryRight){var placeholder=wrapper.placeholder,argsHolders=replaceHolders(args,placeholder);length-=argsHolders.length;if(length<arity){var newArgPos=argPos?arrayCopy(argPos):undefined,newArity=nativeMax(arity-length,0),newsHolders=isCurry?argsHolders:undefined,newHoldersRight=isCurry?undefined:argsHolders,newPartials=isCurry?args:undefined,newPartialsRight=isCurry?undefined:args;bitmask|=isCurry?PARTIAL_FLAG:PARTIAL_RIGHT_FLAG;bitmask&=~(isCurry?PARTIAL_RIGHT_FLAG:PARTIAL_FLAG);if(!isCurryBound){bitmask&=~(BIND_FLAG|BIND_KEY_FLAG)}var newData=[func,bitmask,thisArg,newPartials,newsHolders,newPartialsRight,newHoldersRight,newArgPos,ary,newArity],result=createHybridWrapper.apply(undefined,newData);if(isLaziable(func)){setData(result,newData)}result.placeholder=placeholder;return result}}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;if(argPos){args=reorder(args,argPos)}if(isAry&&ary<args.length){args.length=ary}if(this&&this!==root&&this instanceof wrapper){fn=Ctor||createCtorWrapper(func)}return fn.apply(thisBinding,args)}return wrapper}function createPadding(string,length,chars){var strLength=string.length;length=+length;if(strLength>=length||!nativeIsFinite(length)){return""}var padLength=length-strLength;chars=chars==null?" ":chars+"";return repeat(chars,nativeCeil(padLength/chars.length)).slice(0,padLength)}function createPartialWrapper(func,bitmask,thisArg,partials){var isBind=bitmask&BIND_FLAG,Ctor=createCtorWrapper(func);function wrapper(){var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength);while(++leftIndex<leftLength){args[leftIndex]=partials[leftIndex]}while(argsLength--){args[leftIndex++]=arguments[++argsIndex]}var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,args)}return wrapper}function createRound(methodName){var func=Math[methodName];return function(number,precision){precision=precision===undefined?0:+precision||0;if(precision){precision=pow(10,precision);return func(number*precision)/precision}return func(number)}}function createSortedIndex(retHighest){return function(array,value,iteratee,thisArg){var callback=getCallback(iteratee);return iteratee==null&&callback===baseCallback?binaryIndex(array,value,retHighest):binaryIndexBy(array,value,callback(iteratee,thisArg,1),retHighest)}}function createWrapper(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&BIND_KEY_FLAG;if(!isBindKey&&typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var length=partials?partials.length:0;if(!length){bitmask&=~(PARTIAL_FLAG|PARTIAL_RIGHT_FLAG);partials=holders=undefined}length-=holders?holders.length:0;if(bitmask&PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined}var data=isBindKey?undefined:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data){mergeData(newData,data);bitmask=newData[1];arity=newData[9]}newData[9]=arity==null?isBindKey?0:func.length:nativeMax(arity-length,0)||0;if(bitmask==BIND_FLAG){var result=createBindWrapper(newData[0],newData[2])}else if((bitmask==PARTIAL_FLAG||bitmask==(BIND_FLAG|PARTIAL_FLAG))&&!newData[4].length){result=createPartialWrapper.apply(undefined,newData)}else{result=createHybridWrapper.apply(undefined,newData)}var setter=data?baseSetData:setData;return setter(result,newData)}function equalArrays(array,other,equalFunc,customizer,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isLoose&&othLength>arrLength)){return false}while(++index<arrLength){var arrValue=array[index],othValue=other[index],result=customizer?customizer(isLoose?othValue:arrValue,isLoose?arrValue:othValue,index):undefined;if(result!==undefined){if(result){continue}return false}if(isLoose){if(!arraySome(other,(function(othValue){return arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB)}))){return false}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB))){return false}}return true}function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object==+other;case errorTag:return object.name==other.name&&object.message==other.message;case numberTag:return object!=+object?other!=+other:object==+other;case regexpTag:case stringTag:return object==other+""}return false}function equalObjects(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isLoose){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isLoose?key in other:hasOwnProperty.call(other,key))){return false}}var skipCtor=isLoose;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key],result=customizer?customizer(isLoose?othValue:objValue,isLoose?objValue:othValue,key):undefined;if(!(result===undefined?equalFunc(objValue,othValue,customizer,isLoose,stackA,stackB):result)){return false}skipCtor||(skipCtor=key=="constructor")}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){return false}}return true}function getCallback(func,thisArg,argCount){var result=lodash.callback||callback;result=result===callback?baseCallback:result;return argCount?result(func,thisArg,argCount):result}var getData=!metaMap?noop:function(func){return metaMap.get(func)};function getFuncName(func){var result=func.name,array=realNames[result],length=array?array.length:0;while(length--){var data=array[length],otherFunc=data.func;if(otherFunc==null||otherFunc==func){return data.name}}return result}function getIndexOf(collection,target,fromIndex){var result=lodash.indexOf||indexOf;result=result===indexOf?baseIndexOf:result;return collection?result(collection,target,fromIndex):result}var getLength=baseProperty("length");function getMatchData(object){var result=pairs(object),length=result.length;while(length--){result[length][2]=isStrictComparable(result[length][1])}return result}function getNative(object,key){var value=object==null?undefined:object[key];return isNative(value)?value:undefined}function getView(start,end,transforms){var index=-1,length=transforms.length;while(++index<length){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size);break}}return{start:start,end:end}}function initCloneArray(array){var length=array.length,result=new array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty.call(array,"index")){result.index=array.index;result.input=array.input}return result}function initCloneObject(object){var Ctor=object.constructor;if(!(typeof Ctor=="function"&&Ctor instanceof Ctor)){Ctor=Object}return new Ctor}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return bufferClone(object);case boolTag:case dateTag:return new Ctor(+object);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:var buffer=object.buffer;return new Ctor(isDeep?bufferClone(buffer):buffer,object.byteOffset,object.length);case numberTag:case stringTag:return new Ctor(object);case regexpTag:var result=new Ctor(object.source,reFlags.exec(object));result.lastIndex=object.lastIndex}return result}function invokePath(object,path,args){if(object!=null&&!isKey(path,object)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));path=last(path)}var func=object==null?object:object[path];return func==null?undefined:func.apply(object,args)}function isArrayLike(value){return value!=null&&isLength(getLength(value))}function isIndex(value,length){value=typeof value=="number"||reIsUint.test(value)?+value:-1;length=length==null?MAX_SAFE_INTEGER:length;return value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){var other=object[index];return value===value?value===other:other!==other}return false}function isKey(value,object){var type=typeof value;if(type=="string"&&reIsPlainProp.test(value)||type=="number"){return true}if(isArray(value)){return false}var result=!reIsDeepProp.test(value);return result||object!=null&&value in toObject(object)}function isLaziable(func){var funcName=getFuncName(func);if(!(funcName in LazyWrapper.prototype)){return false}var other=lodash[funcName];if(func===other){return true}var data=getData(other);return!!data&&func===data[0]}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isStrictComparable(value){return value===value&&!isObject(value)}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<ARY_FLAG;var isCombo=srcBitmask==ARY_FLAG&&bitmask==CURRY_FLAG||srcBitmask==ARY_FLAG&&bitmask==REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(ARY_FLAG|REARG_FLAG)&&bitmask==CURRY_FLAG;if(!(isCommon||isCombo)){return data}if(srcBitmask&BIND_FLAG){data[2]=source[2];newBitmask|=bitmask&BIND_FLAG?0:CURRY_BOUND_FLAG}var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):arrayCopy(value);data[4]=partials?replaceHolders(data[3],PLACEHOLDER):arrayCopy(source[4])}value=source[5];if(value){partials=data[5];data[5]=partials?composeArgsRight(partials,value,source[6]):arrayCopy(value);data[6]=partials?replaceHolders(data[5],PLACEHOLDER):arrayCopy(source[6])}value=source[7];if(value){data[7]=arrayCopy(value)}if(srcBitmask&ARY_FLAG){data[8]=data[8]==null?source[8]:nativeMin(data[8],source[8])}if(data[9]==null){data[9]=source[9]}data[0]=source[0];data[1]=newBitmask;return data}function mergeDefaults(objectValue,sourceValue){return objectValue===undefined?sourceValue:merge(objectValue,sourceValue,mergeDefaults)}function pickByArray(object,props){object=toObject(object);var index=-1,length=props.length,result={};while(++index<length){var key=props[index];if(key in object){result[key]=object[key]}}return result}function pickByCallback(object,predicate){var result={};baseForIn(object,(function(value,key,object){if(predicate(value,key,object)){result[key]=value}}));return result}function reorder(array,indexes){var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=arrayCopy(array);while(length--){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}var setData=function(){var count=0,lastCalled=0;return function(key,value){var stamp=now(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return key}}else{count=0}return baseSetData(key,value)}}();function shimKeys(object){var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length;var allowIndexes=!!length&&isLength(length)&&(isArray(object)||isArguments(object));var index=-1,result=[];while(++index<propsLength){var key=props[index];if(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key)){result.push(key)}}return result}function toIterable(value){if(value==null){return[]}if(!isArrayLike(value)){return values(value)}return isObject(value)?value:Object(value)}function toObject(value){return isObject(value)?value:Object(value)}function toPath(value){if(isArray(value)){return value}var result=[];baseToString(value).replace(rePropName,(function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)}));return result}function wrapperClone(wrapper){return wrapper instanceof LazyWrapper?wrapper.clone():new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__,arrayCopy(wrapper.__actions__))}function chunk(array,size,guard){if(guard?isIterateeCall(array,size,guard):size==null){size=1}else{size=nativeMax(nativeFloor(size)||1,1)}var index=0,length=array?array.length:0,resIndex=-1,result=Array(nativeCeil(length/size));while(index<length){result[++resIndex]=baseSlice(array,index,index+=size)}return result}function compact(array){var index=-1,length=array?array.length:0,resIndex=-1,result=[];while(++index<length){var value=array[index];if(value){result[++resIndex]=value}}return result}var difference=restParam((function(array,values){return isObjectLike(array)&&isArrayLike(array)?baseDifference(array,baseFlatten(values,false,true)):[]}));function drop(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}return baseSlice(array,n<0?0:n)}function dropRight(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}n=length-(+n||0);return baseSlice(array,0,n<0?0:n)}function dropRightWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),true,true):[]}function dropWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),true):[]}function fill(array,value,start,end){var length=array?array.length:0;if(!length){return[]}if(start&&typeof start!="number"&&isIterateeCall(array,value,start)){start=0;end=length}return baseFill(array,value,start,end)}var findIndex=createFindIndex();var findLastIndex=createFindIndex(true);function first(array){return array?array[0]:undefined}function flatten(array,isDeep,guard){var length=array?array.length:0;if(guard&&isIterateeCall(array,isDeep,guard)){isDeep=false}return length?baseFlatten(array,isDeep):[]}function flattenDeep(array){var length=array?array.length:0;return length?baseFlatten(array,true):[]}function indexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return-1}if(typeof fromIndex=="number"){fromIndex=fromIndex<0?nativeMax(length+fromIndex,0):fromIndex}else if(fromIndex){var index=binaryIndex(array,value);if(index<length&&(value===value?value===array[index]:array[index]!==array[index])){return index}return-1}return baseIndexOf(array,value,fromIndex||0)}function initial(array){return dropRight(array,1)}var intersection=restParam((function(arrays){var othLength=arrays.length,othIndex=othLength,caches=Array(length),indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,result=[];while(othIndex--){var value=arrays[othIndex]=isArrayLike(value=arrays[othIndex])?value:[];caches[othIndex]=isCommon&&value.length>=120?createCache(othIndex&&value):null}var array=arrays[0],index=-1,length=array?array.length:0,seen=caches[0];outer:while(++index<length){value=array[index];if((seen?cacheIndexOf(seen,value):indexOf(result,value,0))<0){var othIndex=othLength;while(--othIndex){var cache=caches[othIndex];if((cache?cacheIndexOf(cache,value):indexOf(arrays[othIndex],value,0))<0){continue outer}}if(seen){seen.push(value)}result.push(value)}}return result}));function last(array){var length=array?array.length:0;return length?array[length-1]:undefined}function lastIndexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return-1}var index=length;if(typeof fromIndex=="number"){index=(fromIndex<0?nativeMax(length+fromIndex,0):nativeMin(fromIndex||0,length-1))+1}else if(fromIndex){index=binaryIndex(array,value,true)-1;var other=array[index];if(value===value?value===other:other!==other){return index}return-1}if(value!==value){return indexOfNaN(array,index,true)}while(index--){if(array[index]===value){return index}}return-1}function pull(){var args=arguments,array=args[0];if(!(array&&array.length)){return array}var index=0,indexOf=getIndexOf(),length=args.length;while(++index<length){var fromIndex=0,value=args[index];while((fromIndex=indexOf(array,value,fromIndex))>-1){splice.call(array,fromIndex,1)}}return array}var pullAt=restParam((function(array,indexes){indexes=baseFlatten(indexes);var result=baseAt(array,indexes);basePullAt(array,indexes.sort(baseCompareAscending));return result}));function remove(array,predicate,thisArg){var result=[];if(!(array&&array.length)){return result}var index=-1,indexes=[],length=array.length;predicate=getCallback(predicate,thisArg,3);while(++index<length){var value=array[index];if(predicate(value,index,array)){result.push(value);indexes.push(index)}}basePullAt(array,indexes);return result}function rest(array){return drop(array,1)}function slice(array,start,end){var length=array?array.length:0;if(!length){return[]}if(end&&typeof end!="number"&&isIterateeCall(array,start,end)){start=0;end=length}return baseSlice(array,start,end)}var sortedIndex=createSortedIndex();var sortedLastIndex=createSortedIndex(true);function take(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}return baseSlice(array,0,n<0?0:n)}function takeRight(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}n=length-(+n||0);return baseSlice(array,n<0?0:n)}function takeRightWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),false,true):[]}function takeWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3)):[]}var union=restParam((function(arrays){return baseUniq(baseFlatten(arrays,false,true))}));function uniq(array,isSorted,iteratee,thisArg){var length=array?array.length:0;if(!length){return[]}if(isSorted!=null&&typeof isSorted!="boolean"){thisArg=iteratee;iteratee=isIterateeCall(array,isSorted,thisArg)?undefined:isSorted;isSorted=false}var callback=getCallback();if(!(iteratee==null&&callback===baseCallback)){iteratee=callback(iteratee,thisArg,3)}return isSorted&&getIndexOf()==baseIndexOf?sortedUniq(array,iteratee):baseUniq(array,iteratee)}function unzip(array){if(!(array&&array.length)){return[]}var index=-1,length=0;array=arrayFilter(array,(function(group){if(isArrayLike(group)){length=nativeMax(group.length,length);return true}}));var result=Array(length);while(++index<length){result[index]=arrayMap(array,baseProperty(index))}return result}function unzipWith(array,iteratee,thisArg){var length=array?array.length:0;if(!length){return[]}var result=unzip(array);if(iteratee==null){return result}iteratee=bindCallback(iteratee,thisArg,4);return arrayMap(result,(function(group){return arrayReduce(group,iteratee,undefined,true)}))}var without=restParam((function(array,values){return isArrayLike(array)?baseDifference(array,values):[]}));function xor(){var index=-1,length=arguments.length;while(++index<length){var array=arguments[index];if(isArrayLike(array)){var result=result?arrayPush(baseDifference(result,array),baseDifference(array,result)):array}}return result?baseUniq(result):[]}var zip=restParam(unzip);function zipObject(props,values){var index=-1,length=props?props.length:0,result={};if(length&&!values&&!isArray(props[0])){values=[]}while(++index<length){var key=props[index];if(values){result[key]=values[index]}else if(key){result[key[0]]=key[1]}}return result}var zipWith=restParam((function(arrays){var length=arrays.length,iteratee=length>2?arrays[length-2]:undefined,thisArg=length>1?arrays[length-1]:undefined;if(length>2&&typeof iteratee=="function"){length-=2}else{iteratee=length>1&&typeof thisArg=="function"?(--length,thisArg):undefined;thisArg=undefined}arrays.length=length;return unzipWith(arrays,iteratee,thisArg)}));function chain(value){var result=lodash(value);result.__chain__=true;return result}function tap(value,interceptor,thisArg){interceptor.call(thisArg,value);return value}function thru(value,interceptor,thisArg){return interceptor.call(thisArg,value)}function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}var wrapperConcat=restParam((function(values){values=baseFlatten(values);return this.thru((function(array){return arrayConcat(isArray(array)?array:[toObject(array)],values)}))}));function wrapperPlant(value){var result,parent=this;while(parent instanceof baseLodash){var clone=wrapperClone(parent);if(result){previous.__wrapped__=clone}else{result=clone}var previous=clone;parent=parent.__wrapped__}previous.__wrapped__=value;return result}function wrapperReverse(){var value=this.__wrapped__;var interceptor=function(value){return wrapped&&wrapped.__dir__<0?value:value.reverse()};if(value instanceof LazyWrapper){var wrapped=value;if(this.__actions__.length){wrapped=new LazyWrapper(this)}wrapped=wrapped.reverse();wrapped.__actions__.push({func:thru,args:[interceptor],thisArg:undefined});return new LodashWrapper(wrapped,this.__chain__)}return this.thru(interceptor)}function wrapperToString(){return this.value()+""}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}var at=restParam((function(collection,props){return baseAt(collection,baseFlatten(props))}));var countBy=createAggregator((function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:result[key]=1}));function every(collection,predicate,thisArg){var func=isArray(collection)?arrayEvery:baseEvery;if(thisArg&&isIterateeCall(collection,predicate,thisArg)){predicate=undefined}if(typeof predicate!="function"||thisArg!==undefined){predicate=getCallback(predicate,thisArg,3)}return func(collection,predicate)}function filter(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;predicate=getCallback(predicate,thisArg,3);return func(collection,predicate)}var find=createFind(baseEach);var findLast=createFind(baseEachRight,true);function findWhere(collection,source){return find(collection,baseMatches(source))}var forEach=createForEach(arrayEach,baseEach);var forEachRight=createForEach(arrayEachRight,baseEachRight);var groupBy=createAggregator((function(result,value,key){if(hasOwnProperty.call(result,key)){result[key].push(value)}else{result[key]=[value]}}));function includes(collection,target,fromIndex,guard){var length=collection?getLength(collection):0;if(!isLength(length)){collection=values(collection);length=collection.length}if(typeof fromIndex!="number"||guard&&isIterateeCall(target,fromIndex,guard)){fromIndex=0}else{fromIndex=fromIndex<0?nativeMax(length+fromIndex,0):fromIndex||0}return typeof collection=="string"||!isArray(collection)&&isString(collection)?fromIndex<=length&&collection.indexOf(target,fromIndex)>-1:!!length&&getIndexOf(collection,target,fromIndex)>-1}var indexBy=createAggregator((function(result,value,key){result[key]=value}));var invoke=restParam((function(collection,path,args){var index=-1,isFunc=typeof path=="function",isProp=isKey(path),result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,(function(value){var func=isFunc?path:isProp&&value!=null?value[path]:undefined;result[++index]=func?func.apply(value,args):invokePath(value,path,args)}));return result}));function map(collection,iteratee,thisArg){var func=isArray(collection)?arrayMap:baseMap;iteratee=getCallback(iteratee,thisArg,3);return func(collection,iteratee)}var partition=createAggregator((function(result,value,key){result[key?0:1].push(value)}),(function(){return[[],[]]}));function pluck(collection,path){return map(collection,property(path))}var reduce=createReduce(arrayReduce,baseEach);var reduceRight=createReduce(arrayReduceRight,baseEachRight);function reject(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;predicate=getCallback(predicate,thisArg,3);return func(collection,(function(value,index,collection){return!predicate(value,index,collection)}))}function sample(collection,n,guard){if(guard?isIterateeCall(collection,n,guard):n==null){collection=toIterable(collection);var length=collection.length;return length>0?collection[baseRandom(0,length-1)]:undefined}var index=-1,result=toArray(collection),length=result.length,lastIndex=length-1;n=nativeMin(n<0?0:+n||0,length);while(++index<n){var rand=baseRandom(index,lastIndex),value=result[rand];result[rand]=result[index];result[index]=value}result.length=n;return result}function shuffle(collection){return sample(collection,POSITIVE_INFINITY)}function size(collection){var length=collection?getLength(collection):0;return isLength(length)?length:keys(collection).length}function some(collection,predicate,thisArg){var func=isArray(collection)?arraySome:baseSome;if(thisArg&&isIterateeCall(collection,predicate,thisArg)){predicate=undefined}if(typeof predicate!="function"||thisArg!==undefined){predicate=getCallback(predicate,thisArg,3)}return func(collection,predicate)}function sortBy(collection,iteratee,thisArg){if(collection==null){return[]}if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=undefined}var index=-1;iteratee=getCallback(iteratee,thisArg,3);var result=baseMap(collection,(function(value,key,collection){return{criteria:iteratee(value,key,collection),index:++index,value:value}}));return baseSortBy(result,compareAscending)}var sortByAll=restParam((function(collection,iteratees){if(collection==null){return[]}var guard=iteratees[2];if(guard&&isIterateeCall(iteratees[0],iteratees[1],guard)){iteratees.length=1}return baseSortByOrder(collection,baseFlatten(iteratees),[])}));function sortByOrder(collection,iteratees,orders,guard){if(collection==null){return[]}if(guard&&isIterateeCall(iteratees,orders,guard)){orders=undefined}if(!isArray(iteratees)){iteratees=iteratees==null?[]:[iteratees]}if(!isArray(orders)){orders=orders==null?[]:[orders]}return baseSortByOrder(collection,iteratees,orders)}function where(collection,source){return filter(collection,baseMatches(source))}var now=nativeNow||function(){return(new Date).getTime()};function after(n,func){if(typeof func!="function"){if(typeof n=="function"){var temp=n;n=func;func=temp}else{throw new TypeError(FUNC_ERROR_TEXT)}}n=nativeIsFinite(n=+n)?n:0;return function(){if(--n<1){return func.apply(this,arguments)}}}function ary(func,n,guard){if(guard&&isIterateeCall(func,n,guard)){n=undefined}n=func&&n==null?func.length:nativeMax(+n||0,0);return createWrapper(func,ARY_FLAG,undefined,undefined,undefined,undefined,n)}function before(n,func){var result;if(typeof func!="function"){if(typeof n=="function"){var temp=n;n=func;func=temp}else{throw new TypeError(FUNC_ERROR_TEXT)}}return function(){if(--n>0){result=func.apply(this,arguments)}if(n<=1){func=undefined}return result}}var bind=restParam((function(func,thisArg,partials){var bitmask=BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,bind.placeholder);bitmask|=PARTIAL_FLAG}return createWrapper(func,bitmask,thisArg,partials,holders)}));var bindAll=restParam((function(object,methodNames){methodNames=methodNames.length?baseFlatten(methodNames):functions(object);var index=-1,length=methodNames.length;while(++index<length){var key=methodNames[index];object[key]=createWrapper(object[key],BIND_FLAG,object)}return object}));var bindKey=restParam((function(object,key,partials){var bitmask=BIND_FLAG|BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,bindKey.placeholder);bitmask|=PARTIAL_FLAG}return createWrapper(key,bitmask,object,partials,holders)}));var curry=createCurry(CURRY_FLAG);var curryRight=createCurry(CURRY_RIGHT_FLAG);function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}wait=wait<0?0:+wait||0;if(options===true){var leading=true;trailing=false}else if(isObject(options)){leading=!!options.leading;maxWait="maxWait"in options&&nativeMax(+options.maxWait||0,wait);trailing="trailing"in options?!!options.trailing:trailing}function cancel(){if(timeoutId){clearTimeout(timeoutId)}if(maxTimeoutId){clearTimeout(maxTimeoutId)}lastCalled=0;maxTimeoutId=timeoutId=trailingCall=undefined}function complete(isCalled,id){if(id){clearTimeout(id)}maxTimeoutId=timeoutId=trailingCall=undefined;if(isCalled){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=undefined}}}function delayed(){var remaining=wait-(now()-stamp);if(remaining<=0||remaining>wait){complete(trailingCall,maxTimeoutId)}else{timeoutId=setTimeout(delayed,remaining)}}function maxDelayed(){complete(trailing,timeoutId)}function debounced(){args=arguments;stamp=now();thisArg=this;trailingCall=trailing&&(timeoutId||!leading);if(maxWait===false){var leadingCall=leading&&!timeoutId}else{if(!maxTimeoutId&&!leading){lastCalled=stamp}var remaining=maxWait-(stamp-lastCalled),isCalled=remaining<=0||remaining>maxWait;if(isCalled){if(maxTimeoutId){maxTimeoutId=clearTimeout(maxTimeoutId)}lastCalled=stamp;result=func.apply(thisArg,args)}else if(!maxTimeoutId){maxTimeoutId=setTimeout(maxDelayed,remaining)}}if(isCalled&&timeoutId){timeoutId=clearTimeout(timeoutId)}else if(!timeoutId&&wait!==maxWait){timeoutId=setTimeout(delayed,wait)}if(leadingCall){isCalled=true;result=func.apply(thisArg,args)}if(isCalled&&!timeoutId&&!maxTimeoutId){args=thisArg=undefined}return result}debounced.cancel=cancel;return debounced}var defer=restParam((function(func,args){return baseDelay(func,1,args)}));var delay=restParam((function(func,wait,args){return baseDelay(func,wait,args)}));var flow=createFlow();var flowRight=createFlow(true);function memoize(func,resolver){if(typeof func!="function"||resolver&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result);return result};memoized.cache=new memoize.Cache;return memoized}var modArgs=restParam((function(func,transforms){transforms=baseFlatten(transforms);if(typeof func!="function"||!arrayEvery(transforms,baseIsFunction)){throw new TypeError(FUNC_ERROR_TEXT)}var length=transforms.length;return restParam((function(args){var index=nativeMin(args.length,length);while(index--){args[index]=transforms[index](args[index])}return func.apply(this,args)}))}));function negate(predicate){if(typeof predicate!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return function(){return!predicate.apply(this,arguments)}}function once(func){return before(2,func)}var partial=createPartial(PARTIAL_FLAG);var partialRight=createPartial(PARTIAL_RIGHT_FLAG);var rearg=restParam((function(func,indexes){return createWrapper(func,REARG_FLAG,undefined,undefined,undefined,baseFlatten(indexes))}));function restParam(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=nativeMax(start===undefined?func.length-1:+start||0,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);while(++index<length){rest[index]=args[start+index]}switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);index=-1;while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=rest;return func.apply(this,otherArgs)}}function spread(func){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return function(array){return func.apply(this,array)}}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(options===false){leading=false}else if(isObject(options)){leading="leading"in options?!!options.leading:leading;trailing="trailing"in options?!!options.trailing:trailing}return debounce(func,wait,{leading:leading,maxWait:+wait,trailing:trailing})}function wrap(value,wrapper){wrapper=wrapper==null?identity:wrapper;return createWrapper(wrapper,PARTIAL_FLAG,undefined,[value],[])}function clone(value,isDeep,customizer,thisArg){if(isDeep&&typeof isDeep!="boolean"&&isIterateeCall(value,isDeep,customizer)){isDeep=false}else if(typeof isDeep=="function"){thisArg=customizer;customizer=isDeep;isDeep=false}return typeof customizer=="function"?baseClone(value,isDeep,bindCallback(customizer,thisArg,1)):baseClone(value,isDeep)}function cloneDeep(value,customizer,thisArg){return typeof customizer=="function"?baseClone(value,true,bindCallback(customizer,thisArg,1)):baseClone(value,true)}function gt(value,other){return value>other}function gte(value,other){return value>=other}function isArguments(value){return isObjectLike(value)&&isArrayLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")}var isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag};function isBoolean(value){return value===true||value===false||isObjectLike(value)&&objToString.call(value)==boolTag}function isDate(value){return isObjectLike(value)&&objToString.call(value)==dateTag}function isElement(value){return!!value&&value.nodeType===1&&isObjectLike(value)&&!isPlainObject(value)}function isEmpty(value){if(value==null){return true}if(isArrayLike(value)&&(isArray(value)||isString(value)||isArguments(value)||isObjectLike(value)&&isFunction(value.splice))){return!value.length}return!keys(value).length}function isEqual(value,other,customizer,thisArg){customizer=typeof customizer=="function"?bindCallback(customizer,thisArg,3):undefined;var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,customizer):!!result}function isError(value){return isObjectLike(value)&&typeof value.message=="string"&&objToString.call(value)==errorTag}function isFinite(value){return typeof value=="number"&&nativeIsFinite(value)}function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}function isMatch(object,source,customizer,thisArg){customizer=typeof customizer=="function"?bindCallback(customizer,thisArg,3):undefined;return baseIsMatch(object,getMatchData(source),customizer)}function isNaN(value){return isNumber(value)&&value!=+value}function isNative(value){if(value==null){return false}if(isFunction(value)){return reIsNative.test(fnToString.call(value))}return isObjectLike(value)&&reIsHostCtor.test(value)}function isNull(value){return value===null}function isNumber(value){return typeof value=="number"||isObjectLike(value)&&objToString.call(value)==numberTag}function isPlainObject(value){var Ctor;if(!(isObjectLike(value)&&objToString.call(value)==objectTag&&!isArguments(value))||!hasOwnProperty.call(value,"constructor")&&(Ctor=value.constructor,typeof Ctor=="function"&&!(Ctor instanceof Ctor))){return false}var result;baseForIn(value,(function(subValue,key){result=key}));return result===undefined||hasOwnProperty.call(value,result)}function isRegExp(value){return isObject(value)&&objToString.call(value)==regexpTag}function isString(value){return typeof value=="string"||isObjectLike(value)&&objToString.call(value)==stringTag}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)]}function isUndefined(value){return value===undefined}function lt(value,other){return value<other}function lte(value,other){return value<=other}function toArray(value){var length=value?getLength(value):0;if(!isLength(length)){return values(value)}if(!length){return[]}return arrayCopy(value)}function toPlainObject(value){return baseCopy(value,keysIn(value))}var merge=createAssigner(baseMerge);var assign=createAssigner((function(object,source,customizer){return customizer?assignWith(object,source,customizer):baseAssign(object,source)}));function create(prototype,properties,guard){var result=baseCreate(prototype);if(guard&&isIterateeCall(prototype,properties,guard)){properties=undefined}return properties?baseAssign(result,properties):result}var defaults=createDefaults(assign,assignDefaults);var defaultsDeep=createDefaults(merge,mergeDefaults);var findKey=createFindKey(baseForOwn);var findLastKey=createFindKey(baseForOwnRight);var forIn=createForIn(baseFor);var forInRight=createForIn(baseForRight);var forOwn=createForOwn(baseForOwn);var forOwnRight=createForOwn(baseForOwnRight);function functions(object){return baseFunctions(object,keysIn(object))}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,toPath(path),path+"");return result===undefined?defaultValue:result}function has(object,path){if(object==null){return false}var result=hasOwnProperty.call(object,path);if(!result&&!isKey(path)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));if(object==null){return false}path=last(path);result=hasOwnProperty.call(object,path)}return result||isLength(object.length)&&isIndex(path,object.length)&&(isArray(object)||isArguments(object))}function invert(object,multiValue,guard){if(guard&&isIterateeCall(object,multiValue,guard)){multiValue=undefined}var index=-1,props=keys(object),length=props.length,result={};while(++index<length){var key=props[index],value=object[key];if(multiValue){if(hasOwnProperty.call(result,value)){result[value].push(key)}else{result[value]=[key]}}else{result[value]=key}}return result}var keys=!nativeKeys?shimKeys:function(object){var Ctor=object==null?undefined:object.constructor;if(typeof Ctor=="function"&&Ctor.prototype===object||typeof object!="function"&&isArrayLike(object)){return shimKeys(object)}return isObject(object)?nativeKeys(object):[]};function keysIn(object){if(object==null){return[]}if(!isObject(object)){object=Object(object)}var length=object.length;length=length&&isLength(length)&&(isArray(object)||isArguments(object))&&length||0;var Ctor=object.constructor,index=-1,isProto=typeof Ctor=="function"&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;while(++index<length){result[index]=index+""}for(var key in object){if(!(skipIndexes&&isIndex(key,length))&&!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}var mapKeys=createObjectMapper(true);var mapValues=createObjectMapper();var omit=restParam((function(object,props){if(object==null){return{}}if(typeof props[0]!="function"){var props=arrayMap(baseFlatten(props),String);return pickByArray(object,baseDifference(keysIn(object),props))}var predicate=bindCallback(props[0],props[1],3);return pickByCallback(object,(function(value,key,object){return!predicate(value,key,object)}))}));function pairs(object){object=toObject(object);var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){var key=props[index];result[index]=[key,object[key]]}return result}var pick=restParam((function(object,props){if(object==null){return{}}return typeof props[0]=="function"?pickByCallback(object,bindCallback(props[0],props[1],3)):pickByArray(object,baseFlatten(props))}));function result(object,path,defaultValue){var result=object==null?undefined:object[path];if(result===undefined){if(object!=null&&!isKey(path,object)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));result=object==null?undefined:object[last(path)]}result=result===undefined?defaultValue:result}return isFunction(result)?result.call(object):result}function set(object,path,value){if(object==null){return object}var pathKey=path+"";path=object[pathKey]!=null||isKey(path,object)?[pathKey]:toPath(path);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=path[index];if(isObject(nested)){if(index==lastIndex){nested[key]=value}else if(nested[key]==null){nested[key]=isIndex(path[index+1])?[]:{}}}nested=nested[key]}return object}function transform(object,iteratee,accumulator,thisArg){var isArr=isArray(object)||isTypedArray(object);iteratee=getCallback(iteratee,thisArg,4);if(accumulator==null){if(isArr||isObject(object)){var Ctor=object.constructor;if(isArr){accumulator=isArray(object)?new Ctor:[]}else{accumulator=baseCreate(isFunction(Ctor)?Ctor.prototype:undefined)}}else{accumulator={}}}(isArr?arrayEach:baseForOwn)(object,(function(value,index,object){return iteratee(accumulator,value,index,object)}));return accumulator}function values(object){return baseValues(object,keys(object))}function valuesIn(object){return baseValues(object,keysIn(object))}function inRange(value,start,end){start=+start||0;if(end===undefined){end=start;start=0}else{end=+end||0}return value>=nativeMin(start,end)&&value<nativeMax(start,end)}function random(min,max,floating){if(floating&&isIterateeCall(min,max,floating)){max=floating=undefined}var noMin=min==null,noMax=max==null;if(floating==null){if(noMax&&typeof min=="boolean"){floating=min;min=1}else if(typeof max=="boolean"){floating=max;noMax=true}}if(noMin&&noMax){max=1;noMax=false}min=+min||0;if(noMax){max=min;min=0}else{max=+max||0}if(floating||min%1||max%1){var rand=nativeRandom();return nativeMin(min+rand*(max-min+parseFloat("1e-"+((rand+"").length-1))),max)}return baseRandom(min,max)}var camelCase=createCompounder((function(result,word,index){word=word.toLowerCase();return result+(index?word.charAt(0).toUpperCase()+word.slice(1):word)}));function capitalize(string){string=baseToString(string);return string&&string.charAt(0).toUpperCase()+string.slice(1)}function deburr(string){string=baseToString(string);return string&&string.replace(reLatin1,deburrLetter).replace(reComboMark,"")}function endsWith(string,target,position){string=baseToString(string);target=target+"";var length=string.length;position=position===undefined?length:nativeMin(position<0?0:+position||0,length);position-=target.length;return position>=0&&string.indexOf(target,position)==position}function escape(string){string=baseToString(string);return string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}function escapeRegExp(string){string=baseToString(string);return string&&reHasRegExpChars.test(string)?string.replace(reRegExpChars,escapeRegExpChar):string||"(?:)"}var kebabCase=createCompounder((function(result,word,index){return result+(index?"-":"")+word.toLowerCase()}));function pad(string,length,chars){string=baseToString(string);length=+length;var strLength=string.length;if(strLength>=length||!nativeIsFinite(length)){return string}var mid=(length-strLength)/2,leftLength=nativeFloor(mid),rightLength=nativeCeil(mid);chars=createPadding("",rightLength,chars);return chars.slice(0,leftLength)+string+chars}var padLeft=createPadDir();var padRight=createPadDir(true);function parseInt(string,radix,guard){if(guard?isIterateeCall(string,radix,guard):radix==null){radix=0}else if(radix){radix=+radix}string=trim(string);return nativeParseInt(string,radix||(reHasHexPrefix.test(string)?16:10))}function repeat(string,n){var result="";string=baseToString(string);n=+n;if(n<1||!string||!nativeIsFinite(n)){return result}do{if(n%2){result+=string}n=nativeFloor(n/2);string+=string}while(n);return result}var snakeCase=createCompounder((function(result,word,index){return result+(index?"_":"")+word.toLowerCase()}));var startCase=createCompounder((function(result,word,index){return result+(index?" ":"")+(word.charAt(0).toUpperCase()+word.slice(1))}));function startsWith(string,target,position){string=baseToString(string);position=position==null?0:nativeMin(position<0?0:+position||0,string.length);return string.lastIndexOf(target,position)==position}function template(string,options,otherOptions){var settings=lodash.templateSettings;if(otherOptions&&isIterateeCall(string,options,otherOptions)){options=otherOptions=undefined}string=baseToString(string);options=assignWith(baseAssign({},otherOptions||options),settings,assignOwnDefaults);var imports=assignWith(baseAssign({},options.imports),settings.imports,assignOwnDefaults),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys);var isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");var sourceURL="//# sourceURL="+(hasOwnProperty.call(options,"sourceURL")?(options.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++templateCounter+"]")+"\n";string.replace(reDelimiters,(function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){isEscaping=true;source+="' +\n__e("+escapeValue+") +\n'"}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '"}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"}index=offset+match.length;return match}));source+="';\n";var variable=hasOwnProperty.call(options,"variable")&&options.variable;if(!variable){source="with (obj) {\n"+source+"\n}\n"}source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;");source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt((function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)}));result.source=source;if(isError(result)){throw result}return result}function trim(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(trimmedLeftIndex(string),trimmedRightIndex(string)+1)}chars=chars+"";return string.slice(charsLeftIndex(string,chars),charsRightIndex(string,chars)+1)}function trimLeft(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(trimmedLeftIndex(string))}return string.slice(charsLeftIndex(string,chars+""))}function trimRight(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(0,trimmedRightIndex(string)+1)}return string.slice(0,charsRightIndex(string,chars+"")+1)}function trunc(string,options,guard){if(guard&&isIterateeCall(string,options,guard)){options=undefined}var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(options!=null){if(isObject(options)){var separator="separator"in options?options.separator:separator;length="length"in options?+options.length||0:length;omission="omission"in options?baseToString(options.omission):omission}else{length=+options||0}}string=baseToString(string);if(length>=string.length){return string}var end=length-omission.length;if(end<1){return omission}var result=string.slice(0,end);if(separator==null){return result+omission}if(isRegExp(separator)){if(string.slice(end).search(separator)){var match,newEnd,substring=string.slice(0,end);if(!separator.global){separator=RegExp(separator.source,(reFlags.exec(separator)||"")+"g")}separator.lastIndex=0;while(match=separator.exec(substring)){newEnd=match.index}result=result.slice(0,newEnd==null?end:newEnd)}}else if(string.indexOf(separator,end)!=end){var index=result.lastIndexOf(separator);if(index>-1){result=result.slice(0,index)}}return result+omission}function unescape(string){string=baseToString(string);return string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}function words(string,pattern,guard){if(guard&&isIterateeCall(string,pattern,guard)){pattern=undefined}string=baseToString(string);return string.match(pattern||reWords)||[]}var attempt=restParam((function(func,args){try{return func.apply(undefined,args)}catch(e){return isError(e)?e:new Error(e)}}));function callback(func,thisArg,guard){if(guard&&isIterateeCall(func,thisArg,guard)){thisArg=undefined}return isObjectLike(func)?matches(func):baseCallback(func,thisArg)}function constant(value){return function(){return value}}function identity(value){return value}function matches(source){return baseMatches(baseClone(source,true))}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,true))}var method=restParam((function(path,args){return function(object){return invokePath(object,path,args)}}));var methodOf=restParam((function(object,args){return function(path){return invokePath(object,path,args)}}));function mixin(object,source,options){if(options==null){var isObj=isObject(source),props=isObj?keys(source):undefined,methodNames=props&&props.length?baseFunctions(source,props):undefined;if(!(methodNames?methodNames.length:isObj)){methodNames=false;options=source;source=object;object=this}}if(!methodNames){methodNames=baseFunctions(source,keys(source))}var chain=true,index=-1,isFunc=isFunction(object),length=methodNames.length;if(options===false){chain=false}else if(isObject(options)&&"chain"in options){chain=options.chain}while(++index<length){var methodName=methodNames[index],func=source[methodName];object[methodName]=func;if(isFunc){object.prototype[methodName]=function(func){return function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=arrayCopy(this.__actions__);actions.push({func:func,args:arguments,thisArg:object});result.__chain__=chainAll;return result}return func.apply(object,arrayPush([this.value()],arguments))}}(func)}}return object}function noConflict(){root._=oldDash;return this}function noop(){}function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path)}function propertyOf(object){return function(path){return baseGet(object,toPath(path),path+"")}}function range(start,end,step){if(step&&isIterateeCall(start,end,step)){end=step=undefined}start=+start||0;step=step==null?1:+step||0;if(end==null){end=start;start=0}else{end=+end||0}var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);while(++index<length){result[index]=start;start+=step}return result}function times(n,iteratee,thisArg){n=nativeFloor(n);if(n<1||!nativeIsFinite(n)){return[]}var index=-1,result=Array(nativeMin(n,MAX_ARRAY_LENGTH));iteratee=bindCallback(iteratee,thisArg,1);while(++index<n){if(index<MAX_ARRAY_LENGTH){result[index]=iteratee(index)}else{iteratee(index)}}return result}function uniqueId(prefix){var id=++idCounter;return baseToString(prefix)+id}function add(augend,addend){return(+augend||0)+(+addend||0)}var ceil=createRound("ceil");var floor=createRound("floor");var max=createExtremum(gt,NEGATIVE_INFINITY);var min=createExtremum(lt,POSITIVE_INFINITY);var round=createRound("round");function sum(collection,iteratee,thisArg){if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=undefined}iteratee=getCallback(iteratee,thisArg,3);return iteratee.length==1?arraySum(isArray(collection)?collection:toIterable(collection),iteratee):baseSum(collection,iteratee)}lodash.prototype=baseLodash.prototype;LodashWrapper.prototype=baseCreate(baseLodash.prototype);LodashWrapper.prototype.constructor=LodashWrapper;LazyWrapper.prototype=baseCreate(baseLodash.prototype);LazyWrapper.prototype.constructor=LazyWrapper;MapCache.prototype["delete"]=mapDelete;MapCache.prototype.get=mapGet;MapCache.prototype.has=mapHas;MapCache.prototype.set=mapSet;SetCache.prototype.push=cachePush;memoize.Cache=MapCache;lodash.after=after;lodash.ary=ary;lodash.assign=assign;lodash.at=at;lodash.before=before;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.callback=callback;lodash.chain=chain;lodash.chunk=chunk;lodash.compact=compact;lodash.constant=constant;lodash.countBy=countBy;lodash.create=create;lodash.curry=curry;lodash.curryRight=curryRight;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defaultsDeep=defaultsDeep;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.drop=drop;lodash.dropRight=dropRight;lodash.dropRightWhile=dropRightWhile;lodash.dropWhile=dropWhile;lodash.fill=fill;lodash.filter=filter;lodash.flatten=flatten;lodash.flattenDeep=flattenDeep;lodash.flow=flow;lodash.flowRight=flowRight;lodash.forEach=forEach;lodash.forEachRight=forEachRight;lodash.forIn=forIn;lodash.forInRight=forInRight;lodash.forOwn=forOwn;lodash.forOwnRight=forOwnRight;lodash.functions=functions;lodash.groupBy=groupBy;lodash.indexBy=indexBy;lodash.initial=initial;lodash.intersection=intersection;lodash.invert=invert;lodash.invoke=invoke;lodash.keys=keys;lodash.keysIn=keysIn;lodash.map=map;lodash.mapKeys=mapKeys;lodash.mapValues=mapValues;lodash.matches=matches;lodash.matchesProperty=matchesProperty;lodash.memoize=memoize;lodash.merge=merge;lodash.method=method;lodash.methodOf=methodOf;lodash.mixin=mixin;lodash.modArgs=modArgs;lodash.negate=negate;lodash.omit=omit;lodash.once=once;lodash.pairs=pairs;lodash.partial=partial;lodash.partialRight=partialRight;lodash.partition=partition;lodash.pick=pick;lodash.pluck=pluck;lodash.property=property;lodash.propertyOf=propertyOf;lodash.pull=pull;lodash.pullAt=pullAt;lodash.range=range;lodash.rearg=rearg;lodash.reject=reject;lodash.remove=remove;lodash.rest=rest;lodash.restParam=restParam;lodash.set=set;lodash.shuffle=shuffle;lodash.slice=slice;lodash.sortBy=sortBy;lodash.sortByAll=sortByAll;lodash.sortByOrder=sortByOrder;lodash.spread=spread;lodash.take=take;lodash.takeRight=takeRight;lodash.takeRightWhile=takeRightWhile;lodash.takeWhile=takeWhile;lodash.tap=tap;lodash.throttle=throttle;lodash.thru=thru;lodash.times=times;lodash.toArray=toArray;lodash.toPlainObject=toPlainObject;lodash.transform=transform;lodash.union=union;lodash.uniq=uniq;lodash.unzip=unzip;lodash.unzipWith=unzipWith;lodash.values=values;lodash.valuesIn=valuesIn;lodash.where=where;lodash.without=without;lodash.wrap=wrap;lodash.xor=xor;lodash.zip=zip;lodash.zipObject=zipObject;lodash.zipWith=zipWith;lodash.backflow=flowRight;lodash.collect=map;lodash.compose=flowRight;lodash.each=forEach;lodash.eachRight=forEachRight;lodash.extend=assign;lodash.iteratee=callback;lodash.methods=functions;lodash.object=zipObject;lodash.select=filter;lodash.tail=rest;lodash.unique=uniq;mixin(lodash,lodash);lodash.add=add;lodash.attempt=attempt;lodash.camelCase=camelCase;lodash.capitalize=capitalize;lodash.ceil=ceil;lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.deburr=deburr;lodash.endsWith=endsWith;lodash.escape=escape;lodash.escapeRegExp=escapeRegExp;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.findLast=findLast;lodash.findLastIndex=findLastIndex;lodash.findLastKey=findLastKey;lodash.findWhere=findWhere;lodash.first=first;lodash.floor=floor;lodash.get=get;lodash.gt=gt;lodash.gte=gte;lodash.has=has;lodash.identity=identity;lodash.includes=includes;lodash.indexOf=indexOf;lodash.inRange=inRange;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isBoolean=isBoolean;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isError=isError;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isMatch=isMatch;lodash.isNaN=isNaN;lodash.isNative=isNative;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isString=isString;lodash.isTypedArray=isTypedArray;lodash.isUndefined=isUndefined;lodash.kebabCase=kebabCase;lodash.last=last;lodash.lastIndexOf=lastIndexOf;lodash.lt=lt;lodash.lte=lte;lodash.max=max;lodash.min=min;lodash.noConflict=noConflict;lodash.noop=noop;lodash.now=now;lodash.pad=pad;lodash.padLeft=padLeft;lodash.padRight=padRight;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.repeat=repeat;lodash.result=result;lodash.round=round;lodash.runInContext=runInContext;lodash.size=size;lodash.snakeCase=snakeCase;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.sortedLastIndex=sortedLastIndex;lodash.startCase=startCase;lodash.startsWith=startsWith;lodash.sum=sum;lodash.template=template;lodash.trim=trim;lodash.trimLeft=trimLeft;lodash.trimRight=trimRight;lodash.trunc=trunc;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.words=words;lodash.all=every;lodash.any=some;lodash.contains=includes;lodash.eq=isEqual;lodash.detect=find;lodash.foldl=reduce;lodash.foldr=reduceRight;lodash.head=first;lodash.include=includes;lodash.inject=reduce;mixin(lodash,function(){var source={};baseForOwn(lodash,(function(func,methodName){if(!lodash.prototype[methodName]){source[methodName]=func}}));return source}(),false);lodash.sample=sample;lodash.prototype.sample=function(n){if(!this.__chain__&&n==null){return sample(this.value())}return this.thru((function(value){return sample(value,n)}))};lodash.VERSION=VERSION;arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(methodName){lodash[methodName].placeholder=lodash}));arrayEach(["drop","take"],(function(methodName,index){LazyWrapper.prototype[methodName]=function(n){var filtered=this.__filtered__;if(filtered&&!index){return new LazyWrapper(this)}n=n==null?1:nativeMax(nativeFloor(n)||0,0);var result=this.clone();if(filtered){result.__takeCount__=nativeMin(result.__takeCount__,n)}else{result.__views__.push({size:n,type:methodName+(result.__dir__<0?"Right":"")})}return result};LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()}}));arrayEach(["filter","map","takeWhile"],(function(methodName,index){var type=index+1,isFilter=type!=LAZY_MAP_FLAG;LazyWrapper.prototype[methodName]=function(iteratee,thisArg){var result=this.clone();result.__iteratees__.push({iteratee:getCallback(iteratee,thisArg,1),type:type});result.__filtered__=result.__filtered__||isFilter;return result}}));arrayEach(["first","last"],(function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}}));arrayEach(["initial","rest"],(function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1)}}));arrayEach(["pluck","where"],(function(methodName,index){var operationName=index?"filter":"map",createCallback=index?baseMatches:property;LazyWrapper.prototype[methodName]=function(value){return this[operationName](createCallback(value))}}));LazyWrapper.prototype.compact=function(){return this.filter(identity)};LazyWrapper.prototype.reject=function(predicate,thisArg){predicate=getCallback(predicate,thisArg,1);return this.filter((function(value){return!predicate(value)}))};LazyWrapper.prototype.slice=function(start,end){start=start==null?0:+start||0;var result=this;if(result.__filtered__&&(start>0||end<0)){return new LazyWrapper(result)}if(start<0){result=result.takeRight(-start)}else if(start){result=result.drop(start)}if(end!==undefined){end=+end||0;result=end<0?result.dropRight(-end):result.take(end-start)}return result};LazyWrapper.prototype.takeRightWhile=function(predicate,thisArg){return this.reverse().takeWhile(predicate,thisArg).reverse()};LazyWrapper.prototype.toArray=function(){return this.take(POSITIVE_INFINITY)};baseForOwn(LazyWrapper.prototype,(function(func,methodName){var checkIteratee=/^(?:filter|map|reject)|While$/.test(methodName),retUnwrapped=/^(?:first|last)$/.test(methodName),lodashFunc=lodash[retUnwrapped?"take"+(methodName=="last"?"Right":""):methodName];if(!lodashFunc){return}lodash.prototype[methodName]=function(){var args=retUnwrapped?[1]:arguments,chainAll=this.__chain__,value=this.__wrapped__,isHybrid=!!this.__actions__.length,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value);if(useLazy&&checkIteratee&&typeof iteratee=="function"&&iteratee.length!=1){isLazy=useLazy=false}var interceptor=function(value){return retUnwrapped&&chainAll?lodashFunc(value,1)[0]:lodashFunc.apply(undefined,arrayPush([value],args))};var action={func:thru,args:[interceptor],thisArg:undefined},onlyLazy=isLazy&&!isHybrid;if(retUnwrapped&&!chainAll){if(onlyLazy){value=value.clone();value.__actions__.push(action);return func.call(value)}return lodashFunc.call(undefined,this.value())[0]}if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);result.__actions__.push(action);return new LodashWrapper(result,chainAll)}return this.thru(interceptor)}}));arrayEach(["join","pop","push","replace","shift","sort","splice","split","unshift"],(function(methodName){var func=(/^(?:replace|split)$/.test(methodName)?stringProto:arrayProto)[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:join|pop|replace|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){return func.apply(this.value(),args)}return this[chainName]((function(value){return func.apply(value,args)}))}}));baseForOwn(LazyWrapper.prototype,(function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name,names=realNames[key]||(realNames[key]=[]);names.push({name:methodName,func:lodashFunc})}}));realNames[createHybridWrapper(undefined,BIND_KEY_FLAG).name]=[{name:"wrapper",func:undefined}];LazyWrapper.prototype.clone=lazyClone;LazyWrapper.prototype.reverse=lazyReverse;LazyWrapper.prototype.value=lazyValue;lodash.prototype.chain=wrapperChain;lodash.prototype.commit=wrapperCommit;lodash.prototype.concat=wrapperConcat;lodash.prototype.plant=wrapperPlant;lodash.prototype.reverse=wrapperReverse;lodash.prototype.toString=wrapperToString;lodash.prototype.run=lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue;lodash.prototype.collect=lodash.prototype.map;lodash.prototype.head=lodash.prototype.first;lodash.prototype.select=lodash.prototype.filter;lodash.prototype.tail=lodash.prototype.rest;return lodash}var _=runInContext();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){root._=_;define((function(){return _}))}else if(freeExports&&freeModule){if(moduleExports){(freeModule.exports=_)._=_}else{freeExports._=_}}else{root._=_}}).call(this)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ApiKey",{enumerable:true,get:function get(){return _api_key.ApiKey}});Object.defineProperty(exports,"ApiKeyToInvalidate",{enumerable:true,get:function get(){return _api_key.ApiKeyToInvalidate}});Object.defineProperty(exports,"User",{enumerable:true,get:function get(){return _user.User}});Object.defineProperty(exports,"EditUser",{enumerable:true,get:function get(){return _user.EditUser}});Object.defineProperty(exports,"getUserDisplayName",{enumerable:true,get:function get(){return _user.getUserDisplayName}});Object.defineProperty(exports,"AuthenticatedUser",{enumerable:true,get:function get(){return _authenticated_user.AuthenticatedUser}});Object.defineProperty(exports,"canUserChangePassword",{enumerable:true,get:function get(){return _authenticated_user.canUserChangePassword}});Object.defineProperty(exports,"BuiltinESPrivileges",{enumerable:true,get:function get(){return _builtin_es_privileges.BuiltinESPrivileges}});Object.defineProperty(exports,"RawKibanaPrivileges",{enumerable:true,get:function get(){return _raw_kibana_privileges.RawKibanaPrivileges}});Object.defineProperty(exports,"RawKibanaFeaturePrivileges",{enumerable:true,get:function get(){return _raw_kibana_privileges.RawKibanaFeaturePrivileges}});Object.defineProperty(exports,"FeaturesPrivileges",{enumerable:true,get:function get(){return _features_privileges.FeaturesPrivileges}});Object.defineProperty(exports,"Role",{enumerable:true,get:function get(){return _role.Role}});Object.defineProperty(exports,"RoleIndexPrivilege",{enumerable:true,get:function get(){return _role.RoleIndexPrivilege}});Object.defineProperty(exports,"RoleKibanaPrivilege",{enumerable:true,get:function get(){return _role.RoleKibanaPrivilege}});Object.defineProperty(exports,"copyRole",{enumerable:true,get:function get(){return _role.copyRole}});Object.defineProperty(exports,"isRoleDeprecated",{enumerable:true,get:function get(){return _role.isRoleDeprecated}});Object.defineProperty(exports,"isRoleReadOnly",{enumerable:true,get:function get(){return _role.isRoleReadOnly}});Object.defineProperty(exports,"isRoleReserved",{enumerable:true,get:function get(){return _role.isRoleReserved}});Object.defineProperty(exports,"isRoleEnabled",{enumerable:true,get:function get(){return _role.isRoleEnabled}});Object.defineProperty(exports,"prepareRoleClone",{enumerable:true,get:function get(){return _role.prepareRoleClone}});Object.defineProperty(exports,"getExtendedRoleDeprecationNotice",{enumerable:true,get:function get(){return _role.getExtendedRoleDeprecationNotice}});Object.defineProperty(exports,"InlineRoleTemplate",{enumerable:true,get:function get(){return _role_mapping.InlineRoleTemplate}});Object.defineProperty(exports,"StoredRoleTemplate",{enumerable:true,get:function get(){return _role_mapping.StoredRoleTemplate}});Object.defineProperty(exports,"InvalidRoleTemplate",{enumerable:true,get:function get(){return _role_mapping.InvalidRoleTemplate}});Object.defineProperty(exports,"RoleTemplate",{enumerable:true,get:function get(){return _role_mapping.RoleTemplate}});Object.defineProperty(exports,"RoleMapping",{enumerable:true,get:function get(){return _role_mapping.RoleMapping}});var _api_key=__webpack_require__(176);var _user=__webpack_require__(177);var _authenticated_user=__webpack_require__(178);var _builtin_es_privileges=__webpack_require__(179);var _raw_kibana_privileges=__webpack_require__(180);var _features_privileges=__webpack_require__(181);var _role=__webpack_require__(182);var _role_mapping=__webpack_require__(183)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={SpaceAvatar:true};Object.defineProperty(exports,"SpaceAvatar",{enumerable:true,get:function get(){return _space_avatar.SpaceAvatar}});var _space_avatar=__webpack_require__(224);var _space_attributes=__webpack_require__(54);Object.keys(_space_attributes).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _space_attributes[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"isReservedSpace",{enumerable:true,get:function get(){return _is_reserved_space.isReservedSpace}});Object.defineProperty(exports,"MAX_SPACE_INITIALS",{enumerable:true,get:function get(){return _constants.MAX_SPACE_INITIALS}});Object.defineProperty(exports,"SPACE_SEARCH_COUNT_THRESHOLD",{enumerable:true,get:function get(){return _constants.SPACE_SEARCH_COUNT_THRESHOLD}});Object.defineProperty(exports,"ENTER_SPACE_PATH",{enumerable:true,get:function get(){return _constants.ENTER_SPACE_PATH}});Object.defineProperty(exports,"addSpaceIdToPath",{enumerable:true,get:function get(){return _spaces_url_parser.addSpaceIdToPath}});Object.defineProperty(exports,"getSpaceIdFromPath",{enumerable:true,get:function get(){return _spaces_url_parser.getSpaceIdFromPath}});var _is_reserved_space=__webpack_require__(53);var _constants=__webpack_require__(22);var _spaces_url_parser=__webpack_require__(225)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AllRule",{enumerable:true,get:function get(){return _all_rule.AllRule}});Object.defineProperty(exports,"AnyRule",{enumerable:true,get:function get(){return _any_rule.AnyRule}});Object.defineProperty(exports,"Rule",{enumerable:true,get:function get(){return _rule.Rule}});Object.defineProperty(exports,"RuleGroup",{enumerable:true,get:function get(){return _rule_group.RuleGroup}});Object.defineProperty(exports,"ExceptAllRule",{enumerable:true,get:function get(){return _except_all_rule.ExceptAllRule}});Object.defineProperty(exports,"ExceptAnyRule",{enumerable:true,get:function get(){return _except_any_rule.ExceptAnyRule}});Object.defineProperty(exports,"FieldRule",{enumerable:true,get:function get(){return _field_rule.FieldRule}});Object.defineProperty(exports,"FieldRuleValue",{enumerable:true,get:function get(){return _field_rule.FieldRuleValue}});Object.defineProperty(exports,"generateRulesFromRaw",{enumerable:true,get:function get(){return _rule_builder.generateRulesFromRaw}});Object.defineProperty(exports,"RuleBuilderError",{enumerable:true,get:function get(){return _rule_builder_error.RuleBuilderError}});var _all_rule=__webpack_require__(78);var _any_rule=__webpack_require__(79);var _rule=__webpack_require__(33);var _rule_group=__webpack_require__(15);var _except_all_rule=__webpack_require__(21);var _except_any_rule=__webpack_require__(34);var _field_rule=__webpack_require__(80);var _rule_builder=__webpack_require__(330);var _rule_builder_error=__webpack_require__(331)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isGlobalPrivilegeDefinition=isGlobalPrivilegeDefinition;function isGlobalPrivilegeDefinition(privilegeSpec){if(!privilegeSpec.spaces||privilegeSpec.spaces.length===0){return true}return privilegeSpec.spaces.includes("*")}},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,exports,__webpack_require__){"use strict";(function(process){Object.defineProperty(exports,"__esModule",{value:true});exports.isPromise=isPromise;exports.sleep=sleep;exports.randomInt=randomInt;exports.randomToken=randomToken;exports.microSeconds=microSeconds;exports.isNode=void 0;function isPromise(obj){if(obj&&typeof obj.then==="function"){return true}else{return false}}function sleep(time){if(!time)time=0;return new Promise((function(res){return setTimeout(res,time)}))}function randomInt(min,max){return Math.floor(Math.random()*(max-min+1)+min)}function randomToken(){return Math.random().toString(36).substring(2)}var lastMs=0;var additional=0;function microSeconds(){var ms=(new Date).getTime();if(ms===lastMs){additional++;return ms*1e3+additional}else{lastMs=ms;additional=0;return ms*1e3}}var isNode=Object.prototype.toString.call(typeof process!=="undefined"?process:0)==="[object process]";exports.isNode=isNode}).call(this,__webpack_require__(85))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CUSTOM_PRIVILEGE_VALUE=exports.NO_PRIVILEGE_VALUE=void 0;var NO_PRIVILEGE_VALUE="none";exports.NO_PRIVILEGE_VALUE=NO_PRIVILEGE_VALUE;var CUSTOM_PRIVILEGE_VALUE="custom";exports.CUSTOM_PRIVILEGE_VALUE=CUSTOM_PRIVILEGE_VALUE},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEditRoleMappingHref=exports.getCreateRoleMappingHref=exports.getEditRoleHref=exports.ROLE_MAPPINGS_PATH=exports.EDIT_USERS_PATH=exports.USERS_PATH=exports.CLONE_ROLES_PATH=exports.EDIT_ROLES_PATH=exports.ROLES_PATH=void 0;var MANAGEMENT_PATH="/management";var SECURITY_PATH="".concat(MANAGEMENT_PATH,"/security");var ROLES_PATH="".concat(SECURITY_PATH,"/roles");exports.ROLES_PATH=ROLES_PATH;var EDIT_ROLES_PATH="".concat(ROLES_PATH,"/edit");exports.EDIT_ROLES_PATH=EDIT_ROLES_PATH;var CLONE_ROLES_PATH="".concat(ROLES_PATH,"/clone");exports.CLONE_ROLES_PATH=CLONE_ROLES_PATH;var USERS_PATH="".concat(SECURITY_PATH,"/users");exports.USERS_PATH=USERS_PATH;var EDIT_USERS_PATH="".concat(USERS_PATH,"/edit");exports.EDIT_USERS_PATH=EDIT_USERS_PATH;var ROLE_MAPPINGS_PATH="".concat(SECURITY_PATH,"/role_mappings");exports.ROLE_MAPPINGS_PATH=ROLE_MAPPINGS_PATH;var CREATE_ROLE_MAPPING_PATH="".concat(ROLE_MAPPINGS_PATH,"/edit");var getEditRoleHref=function getEditRoleHref(roleName){return"#".concat(ROLES_PATH,"/edit/").concat(encodeURIComponent(roleName))};exports.getEditRoleHref=getEditRoleHref;var getCreateRoleMappingHref=function getCreateRoleMappingHref(){return"#".concat(CREATE_ROLE_MAPPING_PATH)};exports.getCreateRoleMappingHref=getCreateRoleMappingHref;var getEditRoleMappingHref=function getEditRoleMappingHref(roleMappingName){return"#".concat(CREATE_ROLE_MAPPING_PATH,"/").concat(encodeURIComponent(roleMappingName))};exports.getEditRoleMappingHref=getEditRoleMappingHref},function(module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=_interopRequireDefault},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RuleGroup=void 0;var _rule=__webpack_require__(33);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var RuleGroup=function(_Rule){_inherits(RuleGroup,_Rule);function RuleGroup(){_classCallCheck(this,RuleGroup);return _possibleConstructorReturn(this,_getPrototypeOf(RuleGroup).apply(this,arguments))}return RuleGroup}(_rule.Rule);exports.RuleGroup=RuleGroup},function(module,exports){module.exports=__kbnSharedDeps__.ReactRouterDom},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={plugin:true,FeatureCatalogueSetup:true,EnvironmentSetup:true,TutorialSetup:true,HomePublicPluginSetup:true,FeatureCatalogueEntry:true,FeatureCatalogueCategory:true,Environment:true,TutorialVariables:true};Object.defineProperty(exports,"FeatureCatalogueSetup",{enumerable:true,get:function get(){return _plugin.FeatureCatalogueSetup}});Object.defineProperty(exports,"EnvironmentSetup",{enumerable:true,get:function get(){return _plugin.EnvironmentSetup}});Object.defineProperty(exports,"TutorialSetup",{enumerable:true,get:function get(){return _plugin.TutorialSetup}});Object.defineProperty(exports,"HomePublicPluginSetup",{enumerable:true,get:function get(){return _plugin.HomePublicPluginSetup}});Object.defineProperty(exports,"FeatureCatalogueEntry",{enumerable:true,get:function get(){return _services.FeatureCatalogueEntry}});Object.defineProperty(exports,"FeatureCatalogueCategory",{enumerable:true,get:function get(){return _services.FeatureCatalogueCategory}});Object.defineProperty(exports,"Environment",{enumerable:true,get:function get(){return _services.Environment}});Object.defineProperty(exports,"TutorialVariables",{enumerable:true,get:function get(){return _services.TutorialVariables}});exports.plugin=void 0;var _plugin=__webpack_require__(101);var _services=__webpack_require__(36);var _instruction_variant=__webpack_require__(87);Object.keys(_instruction_variant).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _instruction_variant[key]}})}));var plugin=function plugin(initializerContext){return new _plugin.HomePublicPlugin(initializerContext)};exports.plugin=plugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OptionalToolTip=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var OptionalToolTip=function OptionalToolTip(props){if(props.tooltipContent){return _react.default.createElement(_eui.EuiToolTip,{content:props.tooltipContent},props.children)}return props.children};exports.OptionalToolTip=OptionalToolTip},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SpacesPluginSetup",{enumerable:true,get:function get(){return _plugin.SpacesPluginSetup}});Object.defineProperty(exports,"SpacesPluginStart",{enumerable:true,get:function get(){return _plugin.SpacesPluginStart}});Object.defineProperty(exports,"Space",{enumerable:true,get:function get(){return _space.Space}});Object.defineProperty(exports,"SpaceAvatar",{enumerable:true,get:function get(){return _space_avatar.SpaceAvatar}});Object.defineProperty(exports,"getSpaceColor",{enumerable:true,get:function get(){return _space_avatar.getSpaceColor}});Object.defineProperty(exports,"getSpaceImageUrl",{enumerable:true,get:function get(){return _space_avatar.getSpaceImageUrl}});Object.defineProperty(exports,"getSpaceInitials",{enumerable:true,get:function get(){return _space_avatar.getSpaceInitials}});exports.plugin=void 0;var _plugin=__webpack_require__(218);var _space=__webpack_require__(288);var _space_avatar=__webpack_require__(6);var plugin=function plugin(){return new _plugin.SpacesPlugin};exports.plugin=plugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KibanaPrivilege=void 0;var _lodash=_interopRequireDefault(__webpack_require__(4));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var KibanaPrivilege=function(){function KibanaPrivilege(id){var actions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];_classCallCheck(this,KibanaPrivilege);this.id=id;this.actions=actions}_createClass(KibanaPrivilege,[{key:"grantsPrivilege",value:function grantsPrivilege(candidatePrivilege){return this.checkActions(this.actions,candidatePrivilege.actions).hasAllRequested}},{key:"checkActions",value:function checkActions(knownActions,candidateActions){var missing=candidateActions.filter((function(action){return!knownActions.includes(action)}));var hasAllRequested=knownActions.length>0&&candidateActions.length>0&&missing.length===0;return{missing:missing,hasAllRequested:hasAllRequested}}},{key:"name",get:function get(){return _lodash.default.capitalize(this.id)}}]);return KibanaPrivilege}();exports.KibanaPrivilege=KibanaPrivilege},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ExceptAllRule=void 0;var _i18n=__webpack_require__(3);var _rule_group=__webpack_require__(15);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ExceptAllRule=function(_RuleGroup){_inherits(ExceptAllRule,_RuleGroup);function ExceptAllRule(){var _this;var rules=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];_classCallCheck(this,ExceptAllRule);_this=_possibleConstructorReturn(this,_getPrototypeOf(ExceptAllRule).call(this));_this.rules=rules;return _this}_createClass(ExceptAllRule,[{key:"getRules",value:function getRules(){return _toConsumableArray(this.rules)}},{key:"getDisplayTitle",value:function getDisplayTitle(){return _i18n.i18n.translate("xpack.security.management.editRoleMapping.exceptAllRule.displayTitle",{defaultMessage:"Any are false"})}},{key:"replaceRule",value:function replaceRule(ruleIndex,rule){this.rules.splice(ruleIndex,1,rule)}},{key:"removeRule",value:function removeRule(ruleIndex){this.rules.splice(ruleIndex,1)}},{key:"addRule",value:function addRule(rule){this.rules.push(rule)}},{key:"canContainRules",value:function canContainRules(){return true}},{key:"clone",value:function clone(){return new ExceptAllRule(this.rules.map((function(r){return r.clone()})))}},{key:"toRaw",value:function toRaw(){var rawRule={all:_toConsumableArray(this.rules.map((function(rule){return rule.toRaw()})))};return{except:rawRule}}}]);return ExceptAllRule}(_rule_group.RuleGroup);exports.ExceptAllRule=ExceptAllRule},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ENTER_SPACE_PATH=exports.KIBANA_SPACES_STATS_TYPE=exports.MAX_SPACE_INITIALS=exports.SPACE_SEARCH_COUNT_THRESHOLD=exports.DEFAULT_SPACE_ID=void 0;var DEFAULT_SPACE_ID="default";exports.DEFAULT_SPACE_ID=DEFAULT_SPACE_ID;var SPACE_SEARCH_COUNT_THRESHOLD=8;exports.SPACE_SEARCH_COUNT_THRESHOLD=SPACE_SEARCH_COUNT_THRESHOLD;var MAX_SPACE_INITIALS=2;exports.MAX_SPACE_INITIALS=MAX_SPACE_INITIALS;var KIBANA_SPACES_STATS_TYPE="spaces";exports.KIBANA_SPACES_STATS_TYPE=KIBANA_SPACES_STATS_TYPE;var ENTER_SPACE_PATH="/spaces/enter";exports.ENTER_SPACE_PATH=ENTER_SPACE_PATH},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fillOptionsWithDefaults=fillOptionsWithDefaults;function fillOptionsWithDefaults(){var originalOptions=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var options=JSON.parse(JSON.stringify(originalOptions));if(typeof options.webWorkerSupport==="undefined")options.webWorkerSupport=true;if(!options.idb)options.idb={};if(!options.idb.ttl)options.idb.ttl=1e3*45;if(!options.idb.fallbackInterval)options.idb.fallbackInterval=150;if(!options.localstorage)options.localstorage={};if(!options.localstorage.removeTimeout)options.localstorage.removeTimeout=1e3*60;if(originalOptions.methods)options.methods=originalOptions.methods;if(!options.node)options.node={};if(!options.node.ttl)options.node.ttl=1e3*60*2;if(typeof options.node.useFastPath==="undefined")options.node.useFastPath=true;return options}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"rolesManagementApp",{enumerable:true,get:function get(){return _roles_management_app.rolesManagementApp}});Object.defineProperty(exports,"RolesAPIClient",{enumerable:true,get:function get(){return _roles_api_client.RolesAPIClient}});var _roles_management_app=__webpack_require__(163);var _roles_api_client=__webpack_require__(49)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UserAPIClient=void 0;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var usersUrl="/internal/security/users";var UserAPIClient=function(){function UserAPIClient(http){_classCallCheck(this,UserAPIClient);this.http=http}_createClass(UserAPIClient,[{key:"getUsers",value:function(){var _getUsers=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.http.get(usersUrl);case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}}),_callee,this)})));function getUsers(){return _getUsers.apply(this,arguments)}return getUsers}()},{key:"getUser",value:function(){var _getUser=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(username){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.http.get("".concat(usersUrl,"/").concat(encodeURIComponent(username)));case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}}),_callee2,this)})));function getUser(_x){return _getUser.apply(this,arguments)}return getUser}()},{key:"deleteUser",value:function(){var _deleteUser=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(username){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.http.delete("".concat(usersUrl,"/").concat(encodeURIComponent(username)));case 2:case"end":return _context3.stop()}}}),_callee3,this)})));function deleteUser(_x2){return _deleteUser.apply(this,arguments)}return deleteUser}()},{key:"saveUser",value:function(){var _saveUser=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(user){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.http.post("".concat(usersUrl,"/").concat(encodeURIComponent(user.username)),{body:JSON.stringify(user)});case 2:case"end":return _context4.stop()}}}),_callee4,this)})));function saveUser(_x3){return _saveUser.apply(this,arguments)}return saveUser}()},{key:"changePassword",value:function(){var _changePassword=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(username,password,currentPassword){var data;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:data={newPassword:password};if(currentPassword){data.password=currentPassword}_context5.next=4;return this.http.post("".concat(usersUrl,"/").concat(encodeURIComponent(username),"/password"),{body:JSON.stringify(data)});case 4:case"end":return _context5.stop()}}}),_callee5,this)})));function changePassword(_x4,_x5,_x6){return _changePassword.apply(this,arguments)}return changePassword}()}]);return UserAPIClient}();exports.UserAPIClient=UserAPIClient},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DeprecatedBadge",{enumerable:true,get:function get(){return _deprecated_badge.DeprecatedBadge}});Object.defineProperty(exports,"DisabledBadge",{enumerable:true,get:function get(){return _disabled_badge.DisabledBadge}});Object.defineProperty(exports,"EnabledBadge",{enumerable:true,get:function get(){return _enabled_badge.EnabledBadge}});Object.defineProperty(exports,"ReservedBadge",{enumerable:true,get:function get(){return _reserved_badge.ReservedBadge}});var _deprecated_badge=__webpack_require__(171);var _disabled_badge=__webpack_require__(172);var _enabled_badge=__webpack_require__(173);var _reserved_badge=__webpack_require__(174)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PrivilegeFormCalculator",{enumerable:true,get:function get(){return _privilege_form_calculator.PrivilegeFormCalculator}});var _privilege_form_calculator=__webpack_require__(214)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSpacesFeatureDescription=void 0;var _i18n=__webpack_require__(3);var spacesFeatureDescription;var getSpacesFeatureDescription=function getSpacesFeatureDescription(){if(!spacesFeatureDescription){spacesFeatureDescription=_i18n.i18n.translate("xpack.spaces.featureDescription",{defaultMessage:"Organize your dashboards and other saved objects into meaningful categories."})}return spacesFeatureDescription};exports.getSpacesFeatureDescription=getSpacesFeatureDescription},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _saved_objects_management_action_registry=__webpack_require__(61);Object.keys(_saved_objects_management_action_registry).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _saved_objects_management_action_registry[key]}})}));var _saved_objects_management_action=__webpack_require__(240);Object.keys(_saved_objects_management_action).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _saved_objects_management_action[key]}})}));var _saved_objects_management_service=__webpack_require__(241);Object.keys(_saved_objects_management_service).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _saved_objects_management_service[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ConfirmDeleteModal",{enumerable:true,get:function get(){return _confirm_delete_modal.ConfirmDeleteModal}});var _confirm_delete_modal=__webpack_require__(265)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"toSpaceIdentifier",{enumerable:true,get:function get(){return _space_identifier_utils.toSpaceIdentifier}});Object.defineProperty(exports,"isValidSpaceIdentifier",{enumerable:true,get:function get(){return _space_identifier_utils.isValidSpaceIdentifier}});Object.defineProperty(exports,"SpaceValidator",{enumerable:true,get:function get(){return _validate_space.SpaceValidator}});var _space_identifier_utils=__webpack_require__(65);var _validate_space=__webpack_require__(66)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SubFeaturePrivilege=void 0;var _kibana_privilege=__webpack_require__(20);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var SubFeaturePrivilege=function(_KibanaPrivilege){_inherits(SubFeaturePrivilege,_KibanaPrivilege);function SubFeaturePrivilege(subPrivilegeConfig){var _this;var actions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];_classCallCheck(this,SubFeaturePrivilege);_this=_possibleConstructorReturn(this,_getPrototypeOf(SubFeaturePrivilege).call(this,subPrivilegeConfig.id,actions));_this.subPrivilegeConfig=subPrivilegeConfig;_this.actions=actions;return _this}_createClass(SubFeaturePrivilege,[{key:"name",get:function get(){return this.subPrivilegeConfig.name}}]);return SubFeaturePrivilege}(_kibana_privilege.KibanaPrivilege);exports.SubFeaturePrivilege=SubFeaturePrivilege},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Rule=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Rule=function Rule(){_classCallCheck(this,Rule)};exports.Rule=Rule},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ExceptAnyRule=void 0;var _i18n=__webpack_require__(3);var _rule_group=__webpack_require__(15);var _except_all_rule=__webpack_require__(21);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ExceptAnyRule=function(_RuleGroup){_inherits(ExceptAnyRule,_RuleGroup);function ExceptAnyRule(){var _this;var rules=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];_classCallCheck(this,ExceptAnyRule);_this=_possibleConstructorReturn(this,_getPrototypeOf(ExceptAnyRule).call(this));_this.rules=rules;return _this}_createClass(ExceptAnyRule,[{key:"getRules",value:function getRules(){return _toConsumableArray(this.rules)}},{key:"getDisplayTitle",value:function getDisplayTitle(){return _i18n.i18n.translate("xpack.security.management.editRoleMapping.exceptAnyRule.displayTitle",{defaultMessage:"All are false"})}},{key:"replaceRule",value:function replaceRule(ruleIndex,rule){this.rules.splice(ruleIndex,1,rule)}},{key:"removeRule",value:function removeRule(ruleIndex){this.rules.splice(ruleIndex,1)}},{key:"addRule",value:function addRule(rule){this.rules.push(rule)}},{key:"canContainRules",value:function canContainRules(rules){var forbiddenRules=[_except_all_rule.ExceptAllRule,ExceptAnyRule];return rules.every((function(candidate){return!forbiddenRules.some((function(forbidden){return candidate instanceof forbidden}))}))}},{key:"clone",value:function clone(){return new ExceptAnyRule(this.rules.map((function(r){return r.clone()})))}},{key:"toRaw",value:function toRaw(){var rawRule={any:_toConsumableArray(this.rules.map((function(rule){return rule.toRaw()})))};return{except:rawRule}}}]);return ExceptAnyRule}(_rule_group.RuleGroup);exports.ExceptAnyRule=ExceptAnyRule},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateRoleMappingName=validateRoleMappingName;exports.validateRoleMappingRoles=validateRoleMappingRoles;exports.validateRoleMappingRoleTemplates=validateRoleMappingRoleTemplates;exports.validateRoleMappingRules=validateRoleMappingRules;exports.validateRoleMappingForSave=validateRoleMappingForSave;var _i18n=__webpack_require__(3);var _model=__webpack_require__(8);function validateRoleMappingName(_ref){var name=_ref.name;if(!name){return invalid(_i18n.i18n.translate("xpack.security.role_mappings.validation.invalidName",{defaultMessage:"Name is required."}))}return valid()}function validateRoleMappingRoles(_ref2){var roles=_ref2.roles;if(roles&&!roles.length){return invalid(_i18n.i18n.translate("xpack.security.role_mappings.validation.invalidRoles",{defaultMessage:"At least one role is required."}))}return valid()}function validateRoleMappingRoleTemplates(_ref3){var roleTemplates=_ref3.role_templates;if(roleTemplates&&!roleTemplates.length){return invalid(_i18n.i18n.translate("xpack.security.role_mappings.validation.invalidRoleTemplates",{defaultMessage:"At least one role template is required."}))}return valid()}function validateRoleMappingRules(_ref4){var rules=_ref4.rules;try{var _generateRulesFromRaw=(0,_model.generateRulesFromRaw)(rules),parsedRules=_generateRulesFromRaw.rules;if(!parsedRules){return invalid(_i18n.i18n.translate("xpack.security.role_mappings.validation.invalidRoleRule",{defaultMessage:"At least one rule is required."}))}}catch(e){return invalid(e.message)}return valid()}function validateRoleMappingForSave(roleMapping){var _validateRoleMappingN=validateRoleMappingName(roleMapping),isNameInvalid=_validateRoleMappingN.isInvalid,nameError=_validateRoleMappingN.error;var _validateRoleMappingR=validateRoleMappingRoles(roleMapping),areRolesInvalid=_validateRoleMappingR.isInvalid,rolesError=_validateRoleMappingR.error;var _validateRoleMappingR2=validateRoleMappingRoleTemplates(roleMapping),areRoleTemplatesInvalid=_validateRoleMappingR2.isInvalid,roleTemplatesError=_validateRoleMappingR2.error;var _validateRoleMappingR3=validateRoleMappingRules(roleMapping),areRulesInvalid=_validateRoleMappingR3.isInvalid,rulesError=_validateRoleMappingR3.error;var canSave=!isNameInvalid&&(!areRolesInvalid||!areRoleTemplatesInvalid)&&!areRulesInvalid;if(canSave){return valid()}return invalid(nameError||rulesError||rolesError||roleTemplatesError)}function valid(){return{isInvalid:false}}function invalid(error){return{isInvalid:true,error:error}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _feature_catalogue=__webpack_require__(102);Object.keys(_feature_catalogue).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _feature_catalogue[key]}})}));var _environment=__webpack_require__(104);Object.keys(_environment).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _environment[key]}})}));var _tutorials=__webpack_require__(106);Object.keys(_tutorials).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _tutorials[key]}})}))},function(module,exports){module.exports=__kbnBundles__["plugin/kibanaReact"]},function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&btoa){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(useSourceMap){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item,useSourceMap);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list};function cssWithMappingToString(item,useSourceMap){var content=item[1]||"";var cssMapping=item[3];if(!cssMapping){return content}if(useSourceMap&&typeof btoa==="function"){var sourceMapping=toComment(cssMapping);var sourceURLs=cssMapping.sources.map((function(source){return"/*# sourceURL=".concat(cssMapping.sourceRoot||"").concat(source," */")}));return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}function toComment(sourceMap){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));var data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);return"/*# ".concat(data," */")}},function(module,exports,__webpack_require__){"use strict";module.exports=function(url,options){if(!options){options={}}url=url&&url.__esModule?url.default:url;if(typeof url!=="string"){return url}if(/^['"].*['"]$/.test(url)){url=url.slice(1,-1)}if(options.hash){url+=options.hash}if(/["'() \t\n]/.test(url)||options.needQuotes){return'"'.concat(url.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"')}return url}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var ObliviousSet=function ObliviousSet(ttl){var set=new Set;var timeMap=new Map;this.has=set.has.bind(set);this.add=function(value){timeMap.set(value,now());set.add(value);_removeTooOldValues()};this.clear=function(){set.clear();timeMap.clear()};function _removeTooOldValues(){var olderThen=now()-ttl;var iterator=set[Symbol.iterator]();while(true){var value=iterator.next().value;if(!value)return;var time=timeMap.get(value);if(time<olderThen){timeMap["delete"](value);set["delete"](value)}else{return}}}};function now(){return(new Date).getTime()}var _default=ObliviousSet;exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SecurityLicenseService",{enumerable:true,get:function get(){return _license_service.SecurityLicenseService}});Object.defineProperty(exports,"SecurityLicense",{enumerable:true,get:function get(){return _license_service.SecurityLicense}});Object.defineProperty(exports,"LoginLayout",{enumerable:true,get:function get(){return _license_features.LoginLayout}});Object.defineProperty(exports,"SecurityLicenseFeatures",{enumerable:true,get:function get(){return _license_features.SecurityLicenseFeatures}});var _license_service=__webpack_require__(129);var _license_features=__webpack_require__(130)},function(module,exports){module.exports=__kbnSharedDeps__.RxjsOperators},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ManagementService",{enumerable:true,get:function get(){return _management_service.ManagementService}});Object.defineProperty(exports,"UserAPIClient",{enumerable:true,get:function get(){return _user_api_client.UserAPIClient}});var _management_service=__webpack_require__(144);var _user_api_client=__webpack_require__(25)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"UserAPIClient",{enumerable:true,get:function get(){return _user_api_client.UserAPIClient}});Object.defineProperty(exports,"usersManagementApp",{enumerable:true,get:function get(){return _users_management_app.usersManagementApp}});var _user_api_client=__webpack_require__(25);var _users_management_app=__webpack_require__(164)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ChangePasswordForm",{enumerable:true,get:function get(){return _change_password_form.ChangePasswordForm}});Object.defineProperty(exports,"ConfirmDeleteUsers",{enumerable:true,get:function get(){return _confirm_delete_users.ConfirmDeleteUsers}});var _change_password_form=__webpack_require__(88);var _confirm_delete_users=__webpack_require__(168)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RoleTableDisplay",{enumerable:true,get:function get(){return _role_table_display.RoleTableDisplay}});var _role_table_display=__webpack_require__(175)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RoleComboBox",{enumerable:true,get:function get(){return _role_combo_box.RoleComboBox}});var _role_combo_box=__webpack_require__(187)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RolesAPIClient=void 0;var _model=__webpack_require__(5);var _privilege_utils=__webpack_require__(9);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var RolesAPIClient=function(){function RolesAPIClient(http){_classCallCheck(this,RolesAPIClient);this.http=http}_createClass(RolesAPIClient,[{key:"getRoles",value:function(){var _getRoles=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.http.get("/api/security/role");case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}}),_callee,this)})));function getRoles(){return _getRoles.apply(this,arguments)}return getRoles}()},{key:"getRole",value:function(){var _getRole=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(roleName){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.http.get("/api/security/role/".concat(encodeURIComponent(roleName)));case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}}),_callee2,this)})));function getRole(_x){return _getRole.apply(this,arguments)}return getRole}()},{key:"deleteRole",value:function(){var _deleteRole=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(roleName){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.http.delete("/api/security/role/".concat(encodeURIComponent(roleName)));case 2:case"end":return _context3.stop()}}}),_callee3,this)})));function deleteRole(_x2){return _deleteRole.apply(this,arguments)}return deleteRole}()},{key:"saveRole",value:function(){var _saveRole=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(_ref){var role,spacesEnabled;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:role=_ref.role,spacesEnabled=_ref.spacesEnabled;_context4.next=3;return this.http.put("/api/security/role/".concat(encodeURIComponent(role.name)),{body:JSON.stringify(this.transformRoleForSave((0,_model.copyRole)(role),spacesEnabled))});case 3:case"end":return _context4.stop()}}}),_callee4,this)})));function saveRole(_x3){return _saveRole.apply(this,arguments)}return saveRole}()},{key:"transformRoleForSave",value:function transformRoleForSave(role,spacesEnabled){var isPlaceholderPrivilege=function isPlaceholderPrivilege(indexPrivilege){return indexPrivilege.names.length===0};role.elasticsearch.indices=role.elasticsearch.indices.filter((function(indexPrivilege){return!isPlaceholderPrivilege(indexPrivilege)}));role.elasticsearch.indices.forEach((function(index){return index.query||delete index.query}));if(!spacesEnabled){role.kibana=role.kibana.filter(_privilege_utils.isGlobalPrivilegeDefinition)}role.kibana.forEach((function(kibanaPrivilege){if(kibanaPrivilege.base.length>0){kibanaPrivilege.feature={}}}));delete role.name;delete role.transient_metadata;delete role._unrecognized_applications;delete role._transform_error;return role}}]);return RolesAPIClient}();exports.RolesAPIClient=RolesAPIClient},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CollapsiblePanel",{enumerable:true,get:function get(){return _collapsible_panel.CollapsiblePanel}});var _collapsible_panel=__webpack_require__(201)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FeatureTable",{enumerable:true,get:function get(){return _feature_table.FeatureTable}});var _feature_table=__webpack_require__(208)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FeatureTableCell",{enumerable:true,get:function get(){return _feature_table_cell.FeatureTableCell}});var _feature_table_cell=__webpack_require__(212)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isReservedSpace=isReservedSpace;var _lodash=__webpack_require__(4);function isReservedSpace(space){return(0,_lodash.get)(space,"_reserved",false)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSpaceColor=getSpaceColor;exports.getSpaceInitials=getSpaceInitials;exports.getSpaceImageUrl=getSpaceImageUrl;var _eui=__webpack_require__(1);var _common=__webpack_require__(7);var FALLBACK_CODE_POINT=97;function getSpaceColor(){var space=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var color=space.color,_space$name=space.name,name=_space$name===void 0?"":_space$name;if(color){return color}var firstCodePoint=name.codePointAt(0)||FALLBACK_CODE_POINT;return _eui.VISUALIZATION_COLORS[firstCodePoint%_eui.VISUALIZATION_COLORS.length]}function getSpaceInitials(){var space=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var initials=space.initials,_space$name2=space.name,name=_space$name2===void 0?"":_space$name2;if(initials){return initials}var words=name.split(" ");var numInitials=Math.min(_common.MAX_SPACE_INITIALS,words.length);words.splice(numInitials,words.length);return words.map((function(word){return word.substring(0,1)})).join("")}function getSpaceImageUrl(){var space=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var imageUrl=space.imageUrl;if(imageUrl){return imageUrl}return""}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ManageSpacesButton=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ManageSpacesButton=function(_Component){_inherits(ManageSpacesButton,_Component);function ManageSpacesButton(){var _getPrototypeOf2;var _this;_classCallCheck(this,ManageSpacesButton);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ManageSpacesButton)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"navigateToManageSpaces",(function(){if(_this.props.onClick){_this.props.onClick()}_this.props.navigateToApp("kibana",{path:"#/management/kibana/spaces"})}));return _this}_createClass(ManageSpacesButton,[{key:"render",value:function render(){if(!this.props.capabilities.spaces.manage){return null}return _react2.default.createElement(_eui.EuiButton,{size:this.props.size||"s",className:this.props.className,isDisabled:this.props.isDisabled,onClick:this.navigateToManageSpaces,style:this.props.style},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.manageSpacesButton.manageSpacesButtonLabel",defaultMessage:"Manage spaces"}))}}]);return ManageSpacesButton}(_react2.Component);exports.ManageSpacesButton=ManageSpacesButton},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={CopySavedObjectsToSpaceService:true};Object.defineProperty(exports,"CopySavedObjectsToSpaceService",{enumerable:true,get:function get(){return _copy_saved_objects_to_space_service.CopySavedObjectsToSpaceService}});var _summarize_copy_result=__webpack_require__(229);Object.keys(_summarize_copy_result).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _summarize_copy_result[key]}})}));var _copy_saved_objects_to_space_service=__webpack_require__(230)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ManagementSetup",{enumerable:true,get:function get(){return _np_ready.ManagementSetup}});Object.defineProperty(exports,"ManagementStart",{enumerable:true,get:function get(){return _np_ready.ManagementStart}});Object.defineProperty(exports,"plugin",{enumerable:true,get:function get(){return _np_ready.plugin}});Object.defineProperty(exports,"IndexPatternCreationConfig",{enumerable:true,get:function get(){return _np_ready.IndexPatternCreationConfig}});Object.defineProperty(exports,"IndexPatternListConfig",{enumerable:true,get:function get(){return _np_ready.IndexPatternListConfig}});Object.defineProperty(exports,"SavedObjectsManagementAction",{enumerable:true,get:function get(){return _np_ready.SavedObjectsManagementAction}});Object.defineProperty(exports,"SavedObjectsManagementRecord",{enumerable:true,get:function get(){return _np_ready.SavedObjectsManagementRecord}});Object.defineProperty(exports,"processImportResponse",{enumerable:true,get:function get(){return _process_import_response.processImportResponse}});Object.defineProperty(exports,"ProcessedImportResponse",{enumerable:true,get:function get(){return _process_import_response.ProcessedImportResponse}});var _np_ready=__webpack_require__(232);var _process_import_response=__webpack_require__(242)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={IndexPatternCreationConfig:true,IndexPatternListConfig:true};Object.defineProperty(exports,"IndexPatternCreationConfig",{enumerable:true,get:function get(){return _creation.IndexPatternCreationConfig}});Object.defineProperty(exports,"IndexPatternListConfig",{enumerable:true,get:function get(){return _list.IndexPatternListConfig}});var _index_pattern_management_service=__webpack_require__(235);Object.keys(_index_pattern_management_service).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_pattern_management_service[key]}})}));var _creation=__webpack_require__(59);var _list=__webpack_require__(60)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IndexPatternCreationConfig",{enumerable:true,get:function get(){return _config.IndexPatternCreationConfig}});Object.defineProperty(exports,"IndexPatternCreationManager",{enumerable:true,get:function get(){return _manager.IndexPatternCreationManager}});var _config=__webpack_require__(236);var _manager=__webpack_require__(237)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IndexPatternListConfig",{enumerable:true,get:function get(){return _config.IndexPatternListConfig}});Object.defineProperty(exports,"IndexPatternListManager",{enumerable:true,get:function get(){return _manager.IndexPatternListManager}});var _config=__webpack_require__(238);var _manager=__webpack_require__(239)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectsManagementActionRegistry=void 0;var actions=new Map;var SavedObjectsManagementActionRegistry={register:function register(action){if(!action.id){throw new TypeError("Saved Objects Management Actions must have an id")}if(actions.has(action.id)){throw new Error("Saved Objects Management Action with id '".concat(action.id,"' already exists"))}actions.set(action.id,action)},has:function has(actionId){return actions.has(actionId)},get:function get(){return Array.from(actions.values())}};exports.SavedObjectsManagementActionRegistry=SavedObjectsManagementActionRegistry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SecureSpaceMessage",{enumerable:true,get:function get(){return _secure_space_message.SecureSpaceMessage}});var _secure_space_message=__webpack_require__(266)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"UnauthorizedPrompt",{enumerable:true,get:function get(){return _unauthorized_prompt.UnauthorizedPrompt}});var _unauthorized_prompt=__webpack_require__(267)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEnabledFeatures=getEnabledFeatures;function getEnabledFeatures(features,space){return features.filter((function(feature){return!(space.disabledFeatures||[]).includes(feature.id)}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toSpaceIdentifier=toSpaceIdentifier;exports.isValidSpaceIdentifier=isValidSpaceIdentifier;function toSpaceIdentifier(){var value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return value.toLowerCase().replace(/[^a-z0-9_]/g,"-")}function isValidSpaceIdentifier(){var value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return value===toSpaceIdentifier(value)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SpaceValidator=void 0;var _i18n=__webpack_require__(3);var _is_reserved_space=__webpack_require__(53);var _space_identifier_utils=__webpack_require__(65);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SpaceValidator=function(){function SpaceValidator(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,SpaceValidator);_defineProperty(this,"shouldValidate",void 0);this.shouldValidate=options.shouldValidate||false}_createClass(SpaceValidator,[{key:"enableValidation",value:function enableValidation(){this.shouldValidate=true}},{key:"disableValidation",value:function disableValidation(){this.shouldValidate=false}},{key:"validateSpaceName",value:function validateSpaceName(space){if(!this.shouldValidate){return valid()}if(!space.name||!space.name.trim()){return invalid(_i18n.i18n.translate("xpack.spaces.management.validateSpace.requiredNameErrorMessage",{defaultMessage:"Name is required."}))}if(space.name.length>1024){return invalid(_i18n.i18n.translate("xpack.spaces.management.validateSpace.nameMaxLengthErrorMessage",{defaultMessage:"Name must not exceed 1024 characters."}))}return valid()}},{key:"validateSpaceDescription",value:function validateSpaceDescription(space){if(!this.shouldValidate){return valid()}if(space.description&&space.description.length>2e3){return invalid(_i18n.i18n.translate("xpack.spaces.management.validateSpace.describeMaxLengthErrorMessage",{defaultMessage:"Description must not exceed 2000 characters."}))}return valid()}},{key:"validateURLIdentifier",value:function validateURLIdentifier(space){if(!this.shouldValidate){return valid()}if((0,_is_reserved_space.isReservedSpace)(space)){return valid()}if(!space.id){return invalid(_i18n.i18n.translate("xpack.spaces.management.validateSpace.urlIdentifierRequiredErrorMessage",{defaultMessage:"URL identifier is required."}))}if(!(0,_space_identifier_utils.isValidSpaceIdentifier)(space.id)){return invalid(_i18n.i18n.translate("xpack.spaces.management.validateSpace.urlIdentifierAllowedCharactersErrorMessage",{defaultMessage:'URL identifier can only contain a-z, 0-9, and the characters "_" and "-".'}))}return valid()}},{key:"validateEnabledFeatures",value:function validateEnabledFeatures(space){return valid()}},{key:"validateForSave",value:function validateForSave(space){var _this$validateSpaceNa=this.validateSpaceName(space),isNameInvalid=_this$validateSpaceNa.isInvalid;var _this$validateSpaceDe=this.validateSpaceDescription(space),isDescriptionInvalid=_this$validateSpaceDe.isInvalid;var _this$validateURLIden=this.validateURLIdentifier(space),isIdentifierInvalid=_this$validateURLIden.isInvalid;var _this$validateEnabled=this.validateEnabledFeatures(space),areFeaturesInvalid=_this$validateEnabled.isInvalid;if(isNameInvalid||isDescriptionInvalid||isIdentifierInvalid||areFeaturesInvalid){return invalid()}return valid()}}]);return SpaceValidator}();exports.SpaceValidator=SpaceValidator;function invalid(){var error=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return{isInvalid:true,error:error}}function valid(){return{isInvalid:false}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SectionPanel",{enumerable:true,get:function get(){return _section_panel.SectionPanel}});var _section_panel=__webpack_require__(275)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SpacesPopoverList",{enumerable:true,get:function get(){return _spaces_popover_list.SpacesPopoverList}});var _spaces_popover_list=__webpack_require__(289)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SecuredFeature=void 0;var _common=__webpack_require__(70);var _primary_feature_privilege=__webpack_require__(72);var _secured_sub_feature=__webpack_require__(73);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SecuredFeature=function(_Feature){_inherits(SecuredFeature,_Feature);function SecuredFeature(config){var _ref3,_this$config$subFeatu,_ref6,_this$config$subFeatu2;var _this;var actionMapping=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,SecuredFeature);_this=_possibleConstructorReturn(this,_getPrototypeOf(SecuredFeature).call(this,config));_defineProperty(_assertThisInitialized(_this),"primaryFeaturePrivileges",void 0);_defineProperty(_assertThisInitialized(_this),"minimalPrimaryFeaturePrivileges",void 0);_defineProperty(_assertThisInitialized(_this),"subFeaturePrivileges",void 0);_defineProperty(_assertThisInitialized(_this),"securedSubFeatures",void 0);_this.primaryFeaturePrivileges=Object.entries(_this.config.privileges||{}).map((function(_ref){var _ref2=_slicedToArray(_ref,2),id=_ref2[0],privilege=_ref2[1];return new _primary_feature_privilege.PrimaryFeaturePrivilege(id,privilege,actionMapping[id])}));if((_ref3=(_this$config$subFeatu=_this.config.subFeatures)===null||_this$config$subFeatu===void 0?void 0:_this$config$subFeatu.length)!==null&&_ref3!==void 0?_ref3:0>0){_this.minimalPrimaryFeaturePrivileges=Object.entries(_this.config.privileges||{}).map((function(_ref4){var _ref5=_slicedToArray(_ref4,2),id=_ref5[0],privilege=_ref5[1];return new _primary_feature_privilege.PrimaryFeaturePrivilege("minimal_".concat(id),privilege,actionMapping["minimal_".concat(id)])}))}else{_this.minimalPrimaryFeaturePrivileges=[]}_this.securedSubFeatures=(_ref6=(_this$config$subFeatu2=_this.config.subFeatures)===null||_this$config$subFeatu2===void 0?void 0:_this$config$subFeatu2.map((function(sf){return new _secured_sub_feature.SecuredSubFeature(sf,actionMapping)})))!==null&&_ref6!==void 0?_ref6:[];_this.subFeaturePrivileges=_this.securedSubFeatures.reduce((function(acc,subFeature){return[].concat(_toConsumableArray(acc),_toConsumableArray(subFeature.privilegeIterator()))}),[]);return _this}_createClass(SecuredFeature,[{key:"getPrivilegesTooltip",value:function getPrivilegesTooltip(){return this.config.privilegesTooltip}},{key:"getAllPrivileges",value:function getAllPrivileges(){return[].concat(_toConsumableArray(this.primaryFeaturePrivileges),_toConsumableArray(this.minimalPrimaryFeaturePrivileges),_toConsumableArray(this.subFeaturePrivileges))}},{key:"getPrimaryFeaturePrivileges",value:function getPrimaryFeaturePrivileges(){var _ref7=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeMinimalFeaturePrivileges:false},includeMinimalFeaturePrivileges=_ref7.includeMinimalFeaturePrivileges;return includeMinimalFeaturePrivileges?[this.primaryFeaturePrivileges,this.minimalPrimaryFeaturePrivileges].flat():_toConsumableArray(this.primaryFeaturePrivileges)}},{key:"getMinimalFeaturePrivileges",value:function getMinimalFeaturePrivileges(){return _toConsumableArray(this.minimalPrimaryFeaturePrivileges)}},{key:"getSubFeaturePrivileges",value:function getSubFeaturePrivileges(){return _toConsumableArray(this.subFeaturePrivileges)}},{key:"getSubFeatures",value:function getSubFeatures(){return _toConsumableArray(this.securedSubFeatures)}}]);return SecuredFeature}(_common.Feature);exports.SecuredFeature=SecuredFeature},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FeatureKibanaPrivileges",{enumerable:true,get:function get(){return _feature_kibana_privileges.FeatureKibanaPrivileges}});Object.defineProperty(exports,"Feature",{enumerable:true,get:function get(){return _feature.Feature}});Object.defineProperty(exports,"FeatureConfig",{enumerable:true,get:function get(){return _feature.FeatureConfig}});Object.defineProperty(exports,"SubFeature",{enumerable:true,get:function get(){return _sub_feature.SubFeature}});Object.defineProperty(exports,"SubFeatureConfig",{enumerable:true,get:function get(){return _sub_feature.SubFeatureConfig}});Object.defineProperty(exports,"SubFeaturePrivilegeConfig",{enumerable:true,get:function get(){return _sub_feature.SubFeaturePrivilegeConfig}});Object.defineProperty(exports,"SubFeaturePrivilegeGroupConfig",{enumerable:true,get:function get(){return _sub_feature.SubFeaturePrivilegeGroupConfig}});Object.defineProperty(exports,"SubFeaturePrivilegeGroupType",{enumerable:true,get:function get(){return _sub_feature.SubFeaturePrivilegeGroupType}});var _feature_kibana_privileges=__webpack_require__(303);var _feature=__webpack_require__(304);var _sub_feature=__webpack_require__(71)},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.SubFeature=void 0;var SubFeature=function(){function SubFeature(config){_classCallCheck(this,SubFeature);this.config=config}_createClass(SubFeature,[{key:"toRaw",value:function toRaw(){return _objectSpread({},this.config)}},{key:"name",get:function get(){return this.config.name}},{key:"privilegeGroups",get:function get(){return this.config.privilegeGroups}}]);return SubFeature}();exports.SubFeature=SubFeature},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.PrimaryFeaturePrivilege=void 0;var _kibana_privilege=__webpack_require__(20);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var PrimaryFeaturePrivilege=function(_KibanaPrivilege){_inherits(PrimaryFeaturePrivilege,_KibanaPrivilege);function PrimaryFeaturePrivilege(id,config){var _this;var actions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];_classCallCheck(this,PrimaryFeaturePrivilege);_this=_possibleConstructorReturn(this,_getPrototypeOf(PrimaryFeaturePrivilege).call(this,id,actions));_this.config=config;_this.actions=actions;return _this}_createClass(PrimaryFeaturePrivilege,[{key:"isMinimalFeaturePrivilege",value:function isMinimalFeaturePrivilege(){return this.id.startsWith("minimal_")}},{key:"getMinimalPrivilegeId",value:function getMinimalPrivilegeId(){if(this.isMinimalFeaturePrivilege()){return this.id}return"minimal_".concat(this.id)}}]);return PrimaryFeaturePrivilege}(_kibana_privilege.KibanaPrivilege);exports.PrimaryFeaturePrivilege=PrimaryFeaturePrivilege},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SecuredSubFeature=void 0;var _common=__webpack_require__(70);var _sub_feature_privilege=__webpack_require__(32);var _sub_feature_privilege_group=__webpack_require__(74);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SecuredSubFeature=function(_SubFeature){_inherits(SecuredSubFeature,_SubFeature);function SecuredSubFeature(config){var _this;var actionMapping=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,SecuredSubFeature);_this=_possibleConstructorReturn(this,_getPrototypeOf(SecuredSubFeature).call(this,config));_this.actionMapping=actionMapping;_defineProperty(_assertThisInitialized(_this),"privileges",void 0);_this.privileges=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=_this.privilegeIterator()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _privilege=_step.value;_this.privileges.push(_privilege)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return _this}_createClass(SecuredSubFeature,[{key:"getPrivilegeGroups",value:function getPrivilegeGroups(){var _this2=this;return this.privilegeGroups.map((function(pg){return new _sub_feature_privilege_group.SubFeaturePrivilegeGroup(pg,_this2.actionMapping)}))}},{key:"privilegeIterator",value:regeneratorRuntime.mark((function privilegeIterator(){var _this3=this;var _ref,_ref$predicate,predicate,_iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,group,_args=arguments;return regeneratorRuntime.wrap((function privilegeIterator$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref=_args.length>0&&_args[0]!==undefined?_args[0]:{},_ref$predicate=_ref.predicate,predicate=_ref$predicate===void 0?function(){return true}:_ref$predicate;_iteratorNormalCompletion2=true;_didIteratorError2=false;_iteratorError2=undefined;_context.prev=4;_iterator2=this.privilegeGroups[Symbol.iterator]();case 6:if(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done){_context.next=12;break}group=_step2.value;return _context.delegateYield(group.privileges.map((function(gp){return new _sub_feature_privilege.SubFeaturePrivilege(gp,_this3.actionMapping[gp.id])})).filter((function(privilege){return predicate(privilege,_this3)})),"t0",9);case 9:_iteratorNormalCompletion2=true;_context.next=6;break;case 12:_context.next=18;break;case 14:_context.prev=14;_context.t1=_context["catch"](4);_didIteratorError2=true;_iteratorError2=_context.t1;case 18:_context.prev=18;_context.prev=19;if(!_iteratorNormalCompletion2&&_iterator2.return!=null){_iterator2.return()}case 21:_context.prev=21;if(!_didIteratorError2){_context.next=24;break}throw _iteratorError2;case 24:return _context.finish(21);case 25:return _context.finish(18);case 26:case"end":return _context.stop()}}}),privilegeIterator,this,[[4,14,18,26],[19,,21,25]])}))}]);return SecuredSubFeature}(_common.SubFeature);exports.SecuredSubFeature=SecuredSubFeature},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SubFeaturePrivilegeGroup=void 0;var _sub_feature_privilege=__webpack_require__(32);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var SubFeaturePrivilegeGroup=function(){function SubFeaturePrivilegeGroup(config){var actionMapping=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,SubFeaturePrivilegeGroup);this.config=config;this.actionMapping=actionMapping}_createClass(SubFeaturePrivilegeGroup,[{key:"groupType",get:function get(){return this.config.groupType}},{key:"privileges",get:function get(){var _this=this;return this.config.privileges.map((function(p){return new _sub_feature_privilege.SubFeaturePrivilege(p,_this.actionMapping[p.id]||[])}))}}]);return SubFeaturePrivilegeGroup}();exports.SubFeaturePrivilegeGroup=SubFeaturePrivilegeGroup},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PrivilegeCollection=void 0;function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PrivilegeCollection=function(){function PrivilegeCollection(privileges){_classCallCheck(this,PrivilegeCollection);_defineProperty(this,"actions",void 0);this.actions=new Set(privileges.reduce((function(acc,priv){return[].concat(_toConsumableArray(acc),_toConsumableArray(priv.actions))}),[]))}_createClass(PrivilegeCollection,[{key:"grantsPrivilege",value:function grantsPrivilege(privilege){return this.checkActions(this.actions,privilege.actions).hasAllRequested}},{key:"checkActions",value:function checkActions(knownActions,candidateActions){var missing=candidateActions.filter((function(action){return!knownActions.has(action)}));var hasAllRequested=knownActions.size>0&&candidateActions.length>0&&missing.length===0;return{missing:missing,hasAllRequested:hasAllRequested}}}]);return PrivilegeCollection}();exports.PrivilegeCollection=PrivilegeCollection},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _delete_provider=__webpack_require__(317);Object.keys(_delete_provider).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _delete_provider[key]}})}));var _no_compatible_realms=__webpack_require__(319);Object.keys(_no_compatible_realms).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _no_compatible_realms[key]}})}));var _permission_denied=__webpack_require__(321);Object.keys(_permission_denied).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _permission_denied[key]}})}));var _section_loading=__webpack_require__(323);Object.keys(_section_loading).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _section_loading[key]}})}))},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FieldRuleEditor=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _model=__webpack_require__(8);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var userFields=[{name:"username"},{name:"dn"},{name:"groups"},{name:"realm.name"}];var fieldOptions=userFields.map((function(f){return{label:f.name}}));var comparisonOptions={text:{id:"text",defaultValue:"*"},number:{id:"number",defaultValue:0},null:{id:"null",defaultValue:null},boolean:{id:"boolean",defaultValue:true}};var FieldRuleEditor=function(_Component){_inherits(FieldRuleEditor,_Component);function FieldRuleEditor(){var _getPrototypeOf2;var _this;_classCallCheck(this,FieldRuleEditor);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(FieldRuleEditor)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"renderFieldRow",(function(field,ruleValue,valueIndex){var isPrimaryRow=valueIndex===0;var renderAddValueButton=true;var rowRuleValue=ruleValue;if(Array.isArray(ruleValue)){renderAddValueButton=ruleValue.length-1===valueIndex;rowRuleValue=ruleValue[valueIndex]}var comparisonType=_this.getComparisonType(rowRuleValue);return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:1},isPrimaryRow?_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.security.management.editRoleMapping.fieldRuleEditor.userFieldLabel",{defaultMessage:"User field"})},_react.default.createElement(_eui.EuiComboBox,{isClearable:false,selectedOptions:[{label:field}],singleSelection:{asPlainText:true},onChange:_this.onFieldChange,onCreateOption:_this.onAddField,options:fieldOptions,"data-test-subj":"fieldRuleEditorField-".concat(valueIndex," fieldRuleEditorField-").concat(valueIndex,"-combo")})):_react.default.createElement(_eui.EuiFormRow,{hasEmptyLabelSpace:true},_react.default.createElement(_eui.EuiExpression,{description:_i18n.i18n.translate("xpack.security.management.editRoleMapping.fieldRuleEditor.orLabel",{defaultMessage:"or"}),value:field,"data-test-subj":"fieldRuleEditorField-".concat(valueIndex," fieldRuleEditorField-").concat(valueIndex,"-expression")}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_this.renderFieldTypeInput(comparisonType.id,valueIndex)),_react.default.createElement(_eui.EuiFlexItem,{grow:1},_this.renderFieldValueInput(comparisonType.id,rowRuleValue,valueIndex)),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{hasEmptyLabelSpace:true},renderAddValueButton?_react.default.createElement(_eui.EuiButtonIcon,{iconSize:"s",iconType:"plusInCircle",onClick:_this.onAddAlternateValue,color:"primary","data-test-subj":"addAlternateValueButton","aria-label":_i18n.i18n.translate("xpack.security.management.editRoleMapping.fieldRuleEditor.addAlternateValueButton",{defaultMessage:"Add alternate value"})}):_react.default.createElement(_eui.EuiIcon,{size:"l",type:"empty","aria-hidden":true}))),_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_eui.EuiFormRow,{hasEmptyLabelSpace:true},_react.default.createElement(_eui.EuiButtonIcon,{iconType:"trash",color:"danger",iconSize:"s","data-test-subj":"fieldRuleEditorDeleteValue fieldRuleEditorDeleteValue-".concat(valueIndex),"aria-label":_i18n.i18n.translate("xpack.security.management.editRoleMapping.fieldRuleEditor.deleteValueLabel",{defaultMessage:"Delete value"}),onClick:function onClick(){return _this.onRemoveAlternateValue(valueIndex)}}))))}));_defineProperty(_assertThisInitialized(_this),"renderFieldTypeInput",(function(inputType,valueIndex){return _react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.security.management.editRoleMapping.fieldRuleEditor.typeFormRow",{defaultMessage:"Type"}),key:valueIndex},_react.default.createElement(_eui.EuiSelect,{options:[{value:"text",text:"text"},{value:"number",text:"number"},{value:"null",text:"is null"},{value:"boolean",text:"boolean"}],"data-test-subj":"fieldRuleEditorValueType-".concat(valueIndex),value:inputType,onChange:function onChange(e){return _this.onComparisonTypeChange(valueIndex,e.target.value)}}))}));_defineProperty(_assertThisInitialized(_this),"renderFieldValueInput",(function(fieldType,rowRuleValue,valueIndex){var inputField=_this.getInputFieldForType(fieldType,rowRuleValue,valueIndex);return _react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.security.management.editRoleMapping.fieldRuleEditor.valueFormRow",{defaultMessage:"Value"}),key:valueIndex},inputField)}));_defineProperty(_assertThisInitialized(_this),"getInputFieldForType",(function(fieldType,rowRuleValue,valueIndex){var isNullValue=rowRuleValue===null;var commonProps={"data-test-subj":"fieldRuleEditorValue-".concat(valueIndex)};switch(fieldType){case"boolean":return _react.default.createElement(_eui.EuiSelect,_extends({},commonProps,{value:rowRuleValue===null||rowRuleValue===void 0?void 0:rowRuleValue.toString(),onChange:_this.onBooleanValueChange(valueIndex),options:[{value:"true",text:"true"},{value:"false",text:"false"}]}));case"text":case"null":return _react.default.createElement(_eui.EuiFieldText,_extends({},commonProps,{value:isNullValue?"-- null --":rowRuleValue,onChange:_this.onValueChange(valueIndex),disabled:isNullValue}));case"number":return _react.default.createElement(_eui.EuiFieldNumber,{"data-test-subj":"fieldRuleEditorValue-".concat(valueIndex),value:rowRuleValue,onChange:_this.onNumericValueChange(valueIndex)});default:throw new Error("Unsupported input field type: ".concat(fieldType))}}));_defineProperty(_assertThisInitialized(_this),"onAddAlternateValue",(function(){var _this$props$rule=_this.props.rule,field=_this$props$rule.field,value=_this$props$rule.value;var nextValue=Array.isArray(value)?_toConsumableArray(value):[value];nextValue.push("*");_this.props.onChange(new _model.FieldRule(field,nextValue))}));_defineProperty(_assertThisInitialized(_this),"onRemoveAlternateValue",(function(index){var _this$props$rule2=_this.props.rule,field=_this$props$rule2.field,value=_this$props$rule2.value;if(!Array.isArray(value)||value.length===1){_this.props.onDelete();return}var nextValue=_toConsumableArray(value);nextValue.splice(index,1);_this.props.onChange(new _model.FieldRule(field,nextValue))}));_defineProperty(_assertThisInitialized(_this),"onFieldChange",(function(_ref){var _ref2=_slicedToArray(_ref,1),newField=_ref2[0];if(!newField){return}var value=_this.props.rule.value;_this.props.onChange(new _model.FieldRule(newField.label,value))}));_defineProperty(_assertThisInitialized(_this),"onAddField",(function(newField){var value=_this.props.rule.value;_this.props.onChange(new _model.FieldRule(newField,value))}));_defineProperty(_assertThisInitialized(_this),"onValueChange",(function(index){return function(e){var _this$props$rule3=_this.props.rule,field=_this$props$rule3.field,value=_this$props$rule3.value;var nextValue;if(Array.isArray(value)){nextValue=_toConsumableArray(value);nextValue.splice(index,1,e.target.value)}else{nextValue=e.target.value}_this.props.onChange(new _model.FieldRule(field,nextValue))}}));_defineProperty(_assertThisInitialized(_this),"onNumericValueChange",(function(index){return function(e){var _this$props$rule4=_this.props.rule,field=_this$props$rule4.field,value=_this$props$rule4.value;var nextValue;if(Array.isArray(value)){nextValue=_toConsumableArray(value);nextValue.splice(index,1,parseFloat(e.target.value))}else{nextValue=parseFloat(e.target.value)}_this.props.onChange(new _model.FieldRule(field,nextValue))}}));_defineProperty(_assertThisInitialized(_this),"onBooleanValueChange",(function(index){return function(e){var boolValue=e.target.value==="true";var _this$props$rule5=_this.props.rule,field=_this$props$rule5.field,value=_this$props$rule5.value;var nextValue;if(Array.isArray(value)){nextValue=_toConsumableArray(value);nextValue.splice(index,1,boolValue)}else{nextValue=boolValue}_this.props.onChange(new _model.FieldRule(field,nextValue))}}));_defineProperty(_assertThisInitialized(_this),"onComparisonTypeChange",(function(index,newType){var comparison=comparisonOptions[newType];if(!comparison){throw new Error("Unexpected comparison type: ".concat(newType))}var _this$props$rule6=_this.props.rule,field=_this$props$rule6.field,value=_this$props$rule6.value;var nextValue=value;if(Array.isArray(value)){nextValue=_toConsumableArray(value);nextValue.splice(index,1,comparison.defaultValue)}else{nextValue=comparison.defaultValue}_this.props.onChange(new _model.FieldRule(field,nextValue))}));return _this}_createClass(FieldRuleEditor,[{key:"render",value:function render(){var _this2=this;var _this$props$rule7=this.props.rule,field=_this$props$rule7.field,value=_this$props$rule7.value;var content=Array.isArray(value)?value.map((function(v,index){return _this2.renderFieldRow(field,value,index)})):[this.renderFieldRow(field,value,0)];return _react.default.createElement(_eui.EuiFlexGroup,{direction:"column"},content.map((function(row,index){return _react.default.createElement(_eui.EuiFlexItem,{key:index},row)})))}},{key:"getComparisonType",value:function getComparisonType(ruleValue){var valueType=_typeof(ruleValue);if(valueType==="string"||valueType==="undefined"){return comparisonOptions.text}if(valueType==="number"){return comparisonOptions.number}if(valueType==="boolean"){return comparisonOptions.boolean}if(ruleValue===null){return comparisonOptions.null}throw new Error("Unable to detect comparison type for rule value [".concat(ruleValue,"]"))}}]);return FieldRuleEditor}(_react.Component);exports.FieldRuleEditor=FieldRuleEditor},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.AllRule=void 0;var _i18n=__webpack_require__(3);var _rule_group=__webpack_require__(15);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var AllRule=function(_RuleGroup){_inherits(AllRule,_RuleGroup);function AllRule(){var _this;var rules=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];_classCallCheck(this,AllRule);_this=_possibleConstructorReturn(this,_getPrototypeOf(AllRule).call(this));_this.rules=rules;return _this}_createClass(AllRule,[{key:"getRules",value:function getRules(){return _toConsumableArray(this.rules)}},{key:"getDisplayTitle",value:function getDisplayTitle(){return _i18n.i18n.translate("xpack.security.management.editRoleMapping.allRule.displayTitle",{defaultMessage:"All are true"})}},{key:"replaceRule",value:function replaceRule(ruleIndex,rule){this.rules.splice(ruleIndex,1,rule)}},{key:"removeRule",value:function removeRule(ruleIndex){this.rules.splice(ruleIndex,1)}},{key:"addRule",value:function addRule(rule){this.rules.push(rule)}},{key:"canContainRules",value:function canContainRules(){return true}},{key:"clone",value:function clone(){return new AllRule(this.rules.map((function(r){return r.clone()})))}},{key:"toRaw",value:function toRaw(){return{all:_toConsumableArray(this.rules.map((function(rule){return rule.toRaw()})))}}}]);return AllRule}(_rule_group.RuleGroup);exports.AllRule=AllRule},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.AnyRule=void 0;var _i18n=__webpack_require__(3);var _rule_group=__webpack_require__(15);var _except_all_rule=__webpack_require__(21);var _except_any_rule=__webpack_require__(34);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var AnyRule=function(_RuleGroup){_inherits(AnyRule,_RuleGroup);function AnyRule(){var _this;var rules=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];_classCallCheck(this,AnyRule);_this=_possibleConstructorReturn(this,_getPrototypeOf(AnyRule).call(this));_this.rules=rules;return _this}_createClass(AnyRule,[{key:"getRules",value:function getRules(){return _toConsumableArray(this.rules)}},{key:"getDisplayTitle",value:function getDisplayTitle(){return _i18n.i18n.translate("xpack.security.management.editRoleMapping.anyRule.displayTitle",{defaultMessage:"Any are true"})}},{key:"replaceRule",value:function replaceRule(ruleIndex,rule){this.rules.splice(ruleIndex,1,rule)}},{key:"removeRule",value:function removeRule(ruleIndex){this.rules.splice(ruleIndex,1)}},{key:"addRule",value:function addRule(rule){this.rules.push(rule)}},{key:"canContainRules",value:function canContainRules(rules){var forbiddenRules=[_except_all_rule.ExceptAllRule,_except_any_rule.ExceptAnyRule];return rules.every((function(candidate){return!forbiddenRules.some((function(forbidden){return candidate instanceof forbidden}))}))}},{key:"clone",value:function clone(){return new AnyRule(this.rules.map((function(r){return r.clone()})))}},{key:"toRaw",value:function toRaw(){return{any:_toConsumableArray(this.rules.map((function(rule){return rule.toRaw()})))}}}]);return AnyRule}(_rule_group.RuleGroup);exports.AnyRule=AnyRule},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FieldRule=void 0;var _i18n=__webpack_require__(3);var _rule=__webpack_require__(33);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var FieldRule=function(_Rule){_inherits(FieldRule,_Rule);function FieldRule(field,value){var _this;_classCallCheck(this,FieldRule);_this=_possibleConstructorReturn(this,_getPrototypeOf(FieldRule).call(this));_this.field=field;_this.value=value;return _this}_createClass(FieldRule,[{key:"getDisplayTitle",value:function getDisplayTitle(){return _i18n.i18n.translate("xpack.security.management.editRoleMapping.fieldRule.displayTitle",{defaultMessage:"The following is true"})}},{key:"clone",value:function clone(){return new FieldRule(this.field,Array.isArray(this.value)?_toConsumableArray(this.value):this.value)}},{key:"toRaw",value:function toRaw(){return{field:_defineProperty({},this.field,Array.isArray(this.value)?_toConsumableArray(this.value):this.value)}}}]);return FieldRule}(_rule.Rule);exports.FieldRule=FieldRule},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isRuleGroup=isRuleGroup;var _model=__webpack_require__(8);function isRuleGroup(rule){return!(rule instanceof _model.FieldRule)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VISUAL_MAX_RULE_DEPTH=void 0;var VISUAL_MAX_RULE_DEPTH=5;exports.VISUAL_MAX_RULE_DEPTH=VISUAL_MAX_RULE_DEPTH},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isStoredRoleTemplate=isStoredRoleTemplate;exports.isInlineRoleTemplate=isInlineRoleTemplate;exports.isInvalidRoleTemplate=isInvalidRoleTemplate;function isStoredRoleTemplate(roleMappingTemplate){return roleMappingTemplate.template!=null&&roleMappingTemplate.template.hasOwnProperty("id")&&typeof roleMappingTemplate.template.id==="string"}function isInlineRoleTemplate(roleMappingTemplate){return roleMappingTemplate.template!=null&&roleMappingTemplate.template.hasOwnProperty("source")&&typeof roleMappingTemplate.template.source==="string"}function isInvalidRoleTemplate(roleMappingTemplate){return!isStoredRoleTemplate(roleMappingTemplate)&&!isInlineRoleTemplate(roleMappingTemplate)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setServices=setServices;exports.getServices=getServices;var services=null;function setServices(newServices){services=newServices}function getServices(){if(!services){throw new Error("Kibana services not set - are you trying to import this module from outside of the home app?")}return services}},function(module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},function(module,exports){module.exports=__kbnSharedDeps__.MomentTimezone},function(module,exports,__webpack_require__){"use strict";var _DISPLAY_MAP;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.getDisplayText=getDisplayText;exports.INSTRUCTION_VARIANT=void 0;var INSTRUCTION_VARIANT={ESC:"esc",OSX:"osx",DEB:"deb",RPM:"rpm",DOCKER:"docker",WINDOWS:"windows",NODE:"node",DJANGO:"django",FLASK:"flask",RAILS:"rails",RACK:"rack",JS:"js",GO:"go",JAVA:"java",DOTNET:"dotnet",LINUX:"linux"};exports.INSTRUCTION_VARIANT=INSTRUCTION_VARIANT;var DISPLAY_MAP=(_DISPLAY_MAP={},_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.ESC,"Elastic Cloud"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.OSX,"macOS"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.DEB,"DEB"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.RPM,"RPM"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.DOCKER,"Docker"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.WINDOWS,"Windows"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.NODE,"Node.js"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.DJANGO,"Django"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.FLASK,"Flask"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.RAILS,"Ruby on Rails"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.RACK,"Rack"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.JS,"RUM (JS)"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.GO,"Go"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.JAVA,"Java"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.DOTNET,".NET"),_defineProperty(_DISPLAY_MAP,INSTRUCTION_VARIANT.LINUX,"Linux"),_DISPLAY_MAP);function getDisplayText(id){if(id in DISPLAY_MAP){return DISPLAY_MAP[id]}return id}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ChangePasswordForm",{enumerable:true,get:function get(){return _change_password_form.ChangePasswordForm}});var _change_password_form=__webpack_require__(167)},function(module,exports){module.exports=__kbnSharedDeps__.Rxjs},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SecurityPluginSetup",{enumerable:true,get:function get(){return _plugin.SecurityPluginSetup}});Object.defineProperty(exports,"SecurityPluginStart",{enumerable:true,get:function get(){return _plugin.SecurityPluginStart}});Object.defineProperty(exports,"SessionInfo",{enumerable:true,get:function get(){return _types.SessionInfo}});Object.defineProperty(exports,"AuthenticatedUser",{enumerable:true,get:function get(){return _model.AuthenticatedUser}});Object.defineProperty(exports,"SecurityLicense",{enumerable:true,get:function get(){return _licensing.SecurityLicense}});Object.defineProperty(exports,"SecurityLicenseFeatures",{enumerable:true,get:function get(){return _licensing.SecurityLicenseFeatures}});exports.plugin=void 0;__webpack_require__(91);var _plugin=__webpack_require__(100);var _types=__webpack_require__(348);var _model=__webpack_require__(5);var _licensing=__webpack_require__(42);var plugin=function plugin(initializerContext){return new _plugin.SecurityPlugin(initializerContext)};exports.plugin=plugin},function(module,exports,__webpack_require__){if(window.__kbnDarkMode__){__webpack_require__(92)}else{__webpack_require__(96)}},function(module,exports,__webpack_require__){var api=__webpack_require__(38);var content=__webpack_require__(93);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(39);var ___CSS_LOADER_GET_URL_IMPORT___=__webpack_require__(40);var ___CSS_LOADER_URL_IMPORT_0___=__webpack_require__(94);var ___CSS_LOADER_URL_IMPORT_1___=__webpack_require__(95);exports=___CSS_LOADER_API_IMPORT___(false);var ___CSS_LOADER_URL_REPLACEMENT_0___=___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);var ___CSS_LOADER_URL_REPLACEMENT_1___=___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);exports.push([module.i,".secAuthenticationStatePage {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 10000;\n  background: inherit;\n  background-color: #1a1b20;\n  opacity: 0;\n  overflow: auto;\n  -webkit-animation: kibanaFullScreenGraphics_FadeIn 500ms cubic-bezier(0.694, 0.0482, 0.335, 1) 0s forwards;\n          animation: kibanaFullScreenGraphics_FadeIn 500ms cubic-bezier(0.694, 0.0482, 0.335, 1) 0s forwards; }\n  .secAuthenticationStatePage::before {\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 1;\n    width: 310px;\n    height: 477px;\n    content: url("+___CSS_LOADER_URL_REPLACEMENT_0___+"); }\n  .secAuthenticationStatePage::after {\n    position: fixed;\n    bottom: 0;\n    right: 0;\n    z-index: 1;\n    width: 313px;\n    height: 461px;\n    content: url("+___CSS_LOADER_URL_REPLACEMENT_1___+"); }\n\n@-webkit-keyframes kibanaFullScreenGraphics_FadeIn {\n  from {\n    opacity: 0;\n    -webkit-transform: translateY(200px), scale(0.75);\n            transform: translateY(200px), scale(0.75); }\n  to {\n    opacity: 1;\n    -webkit-transform: translateY(0), scale(1);\n            transform: translateY(0), scale(1); } }\n\n@keyframes kibanaFullScreenGraphics_FadeIn {\n  from {\n    opacity: 0;\n    -webkit-transform: translateY(200px), scale(0.75);\n            transform: translateY(200px), scale(0.75); }\n  to {\n    opacity: 1;\n    -webkit-transform: translateY(0), scale(1);\n            transform: translateY(0), scale(1); } }\n\n.secAuthenticationStatePage__header {\n  position: relative;\n  padding: 32px;\n  z-index: 10; }\n\n.secAuthenticationStatePage__logo {\n  display: inline-block;\n  width: 80px;\n  height: 80px;\n  line-height: 80px;\n  text-align: center;\n  background-color: #1D1E24;\n  border-radius: 100%;\n  padding: 16px;\n  -webkit-box-shadow: 0 6px 12px -1px rgba(0, 0, 0, 0.2), 0 4px 4px -1px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.2);\n          box-shadow: 0 6px 12px -1px rgba(0, 0, 0, 0.2), 0 4px 4px -1px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.2);\n  margin-bottom: 32px; }\n  .secAuthenticationStatePage__logo .euiIcon {\n    vertical-align: baseline; }\n\n.secAuthenticationStatePage__content {\n  position: relative;\n  margin: auto;\n  max-width: 460px;\n  padding-left: 32px;\n  padding-right: 32px;\n  z-index: 10; }\n\n.loginWelcome {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 10000;\n  background: inherit;\n  background-color: #1a1b20;\n  opacity: 0;\n  overflow: auto;\n  -webkit-animation: kibanaFullScreenGraphics_FadeIn 500ms cubic-bezier(0.694, 0.0482, 0.335, 1) 0s forwards;\n          animation: kibanaFullScreenGraphics_FadeIn 500ms cubic-bezier(0.694, 0.0482, 0.335, 1) 0s forwards; }\n  .loginWelcome::before {\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 1;\n    width: 310px;\n    height: 477px;\n    content: url("+___CSS_LOADER_URL_REPLACEMENT_0___+"); }\n  .loginWelcome::after {\n    position: fixed;\n    bottom: 0;\n    right: 0;\n    z-index: 1;\n    width: 313px;\n    height: 461px;\n    content: url("+___CSS_LOADER_URL_REPLACEMENT_1___+"); }\n\n@keyframes kibanaFullScreenGraphics_FadeIn {\n  from {\n    opacity: 0;\n    -webkit-transform: translateY(200px), scale(0.75);\n            transform: translateY(200px), scale(0.75); }\n  to {\n    opacity: 1;\n    -webkit-transform: translateY(0), scale(1);\n            transform: translateY(0), scale(1); } }\n\n.loginWelcome__header {\n  position: relative;\n  padding: 32px;\n  z-index: 10; }\n\n.loginWelcome__logo {\n  display: inline-block;\n  width: 80px;\n  height: 80px;\n  line-height: 80px;\n  text-align: center;\n  background-color: #1D1E24;\n  border-radius: 100%;\n  padding: 16px;\n  -webkit-box-shadow: 0 6px 12px -1px rgba(0, 0, 0, 0.2), 0 4px 4px -1px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.2);\n          box-shadow: 0 6px 12px -1px rgba(0, 0, 0, 0.2), 0 4px 4px -1px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.2);\n  margin-bottom: 32px; }\n  .loginWelcome__logo .euiIcon {\n    vertical-align: baseline; }\n\n.loginWelcome__content {\n  position: relative;\n  margin: auto;\n  max-width: 460px;\n  padding-left: 32px;\n  padding-right: 32px;\n  z-index: 10; }\n  .loginWelcome__content.loginWelcome__contentDisabledForm {\n    max-width: 700px; }\n\n.collapsiblePanel__logo {\n  margin-right: 8px;\n  vertical-align: text-bottom; }\n\n.secSpacesPopoverList__buttonText {\n  font-size: 12px; }\n\n.secPrivilegeFeatureIcon {\n  -webkit-flex-shrink: 0;\n      -ms-flex-negative: 0;\n          flex-shrink: 0;\n  margin-right: 8px; }\n\n.secPrivilegeFeatureChangeAllLink {\n  margin-left: 8px; }\n\n/**\n * 1. Allow table to scroll both directions\n */\n.secPrivilegeMatrix__modal,\n.secPrivilegeMatrix__modal .euiModal__flex {\n  overflow: hidden;\n  /* 1 */ }\n\n.secPrivilegeMatrix__row--isBasePrivilege,\n.secPrivilegeMatrix__cell--isGlobalPrivilege,\n.secPrivilegeTable__row--isGlobalSpace {\n  background-color: #25262E; }\n\n.secUsersEditPage__content {\n  max-width: 460px;\n  margin-left: auto;\n  margin-right: auto;\n  -webkit-box-flex: 0;\n  -webkit-flex-grow: 0;\n      -ms-flex-positive: 0;\n          flex-grow: 0; }\n\n.secRoleMapping__ruleEditorGroup--even {\n  background-color: #25262E; }\n\n.secRoleMapping__ruleEditorGroup--odd {\n  background-color: #1D1E24; }\n",""]);module.exports=exports},function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMTAiIGhlaWdodD0iNDc3IiB2aWV3Qm94PSIwIDAgMzEwIDQ3NyI+CiAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgIDxwYXRoIGZpbGw9IiMxODE5MUUiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTS04NC44MTkyLDQyOS4zNjIgQzc5LjMwOTMsNDI5LjM2MiAyMTIuMzYyLDI5Ni4zMDkgMjEyLjM2MiwxMzIuMTgxIEMyMTIuMzYyLC0zMS45NDc2IDc5LjMwOTMsLTE2NSAtODQuODE5MiwtMTY1IEMtMjQ4Ljk0OCwtMTY1IC0zODIsLTMxLjk0NzYgLTM4MiwxMzIuMTgxIEMtMzgyLDI5Ni4zMDkgLTI0OC45NDgsNDI5LjM2MiAtODQuODE5Miw0MjkuMzYyIFoiLz4KICAgIDxwYXRoIGZpbGw9IiMxNTE2MUIiIGQ9Ik0xOTEuNzY1LDIwOC42ODMgTDE5MS43NjUsMjIzLjM5NSBMMTc3LjA1MywyMjMuMzk1IEwxNzcuMDUzLDIwOC42ODMgTDE5MS43NjUsMjA4LjY4MyBaIE0yMzAuOTk3LDIwOC42ODMgTDIzMC45OTcsMjIzLjM5NSBMMjE2LjI4NSwyMjMuMzk1IEwyMTYuMjg1LDIwOC42ODMgTDIzMC45OTcsMjA4LjY4MyBaIE0xNTIuNTMzLDIwOC42ODMgTDE1Mi41MzMsMjIzLjM5NSBMMTM3LjgyMSwyMjMuMzk1IEwxMzcuODIxLDIwOC42ODMgTDE1Mi41MzMsMjA4LjY4MyBaIE0xMTMuMzAxLDIwOC42ODMgTDExMy4zMDEsMjIzLjM5NSBMOTguNTg5MywyMjMuMzk1IEw5OC41ODkzLDIwOC42ODMgTDExMy4zMDEsMjA4LjY4MyBaIE03NS4wNTA0LDIwOC42ODMgTDc1LjA1MDQsMjIzLjM5NSBMNjAuMzM4NSwyMjMuMzk1IEw2MC4zMzg1LDIwOC42ODMgTDc1LjA1MDQsMjA4LjY4MyBaIE0zNC44Mzc1LDIwOC42ODMgTDM0LjgzNzUsMjIzLjM5NSBMMjAuMTI1NiwyMjMuMzk1IEwyMC4xMjU2LDIwOC42ODMgTDM0LjgzNzUsMjA4LjY4MyBaIE0yMzAuOTk3LDE2OS40NTEgTDIzMC45OTcsMTg0LjE2MyBMMjE2LjI4NSwxODQuMTYzIEwyMTYuMjg1LDE2OS40NTEgTDIzMC45OTcsMTY5LjQ1MSBaIE0yNzAuMjI4LDE2OS40NTEgTDI3MC4yMjgsMTg0LjE2MyBMMjU1LjUxNiwxODQuMTYzIEwyNTUuNTE2LDE2OS40NTEgTDI3MC4yMjgsMTY5LjQ1MSBaIE0xOTEuNzY1LDE2OS40NTEgTDE5MS43NjUsMTg0LjE2MyBMMTc3LjA1MywxODQuMTYzIEwxNzcuMDUzLDE2OS40NTEgTDE5MS43NjUsMTY5LjQ1MSBaIE0xNTIuNTMzLDE2OS40NTEgTDE1Mi41MzMsMTg0LjE2MyBMMTM3LjgyMSwxODQuMTYzIEwxMzcuODIxLDE2OS40NTEgTDE1Mi41MzMsMTY5LjQ1MSBaIE0xMTQuMjgyLDE2OS40NTEgTDExNC4yODIsMTg0LjE2MyBMOTkuNTcwMSwxODQuMTYzIEw5OS41NzAxLDE2OS40NTEgTDExNC4yODIsMTY5LjQ1MSBaIE03NC4wNjk3LDE2OS40NTEgTDc0LjA2OTcsMTg0LjE2MyBMNTkuMzU3OCwxODQuMTYzIEw1OS4zNTc4LDE2OS40NTEgTDc0LjA2OTcsMTY5LjQ1MSBaIE0zMy44NTY4LDE2OS40NTEgTDMzLjg1NjgsMTg0LjE2MyBMMTkuMTQ0OSwxODQuMTYzIEwxOS4xNDQ5LDE2OS40NTEgTDMzLjg1NjgsMTY5LjQ1MSBaIE0yNzAuMjI4LDEzMC4yMTkgTDI3MC4yMjgsMTQ0LjkzMSBMMjU1LjUxNiwxNDQuOTMxIEwyNTUuNTE2LDEzMC4yMTkgTDI3MC4yMjgsMTMwLjIxOSBaIE0zMDkuNDYsMTMwLjIxOSBMMzA5LjQ2LDE0NC45MzEgTDI5NC43NDgsMTQ0LjkzMSBMMjk0Ljc0OCwxMzAuMjE5IEwzMDkuNDYsMTMwLjIxOSBaIE0yMzAuOTk3LDEzMC4yMTkgTDIzMC45OTcsMTQ0LjkzMSBMMjE2LjI4NSwxNDQuOTMxIEwyMTYuMjg1LDEzMC4yMTkgTDIzMC45OTcsMTMwLjIxOSBaIE0xOTEuNzY1LDEzMC4yMTkgTDE5MS43NjUsMTQ0LjkzMSBMMTc3LjA1MywxNDQuOTMxIEwxNzcuMDUzLDEzMC4yMTkgTDE5MS43NjUsMTMwLjIxOSBaIE0xNTMuNTE0LDEzMC4yMTkgTDE1My41MTQsMTQ0LjkzMSBMMTM4LjgwMiwxNDQuOTMxIEwxMzguODAyLDEzMC4yMTkgTDE1My41MTQsMTMwLjIxOSBaIE0xMTMuMzAxLDEzMC4yMTkgTDExMy4zMDEsMTQ0LjkzMSBMOTguNTg5MywxNDQuOTMxIEw5OC41ODkzLDEzMC4yMTkgTDExMy4zMDEsMTMwLjIxOSBaIE03My4wODg5LDEzMC4yMTkgTDczLjA4ODksMTQ0LjkzMSBMNTguMzc2OSwxNDQuOTMxIEw1OC4zNzY5LDEzMC4yMTkgTDczLjA4ODksMTMwLjIxOSBaIE0zNS44MTg0LDEzMC4yMTkgTDM1LjgxODQsMTQ0LjkzMSBMMjEuMTA2NCwxNDQuOTMxIEwyMS4xMDY0LDEzMC4yMTkgTDM1LjgxODQsMTMwLjIxOSBaIi8+CiAgICA8cGF0aCBmaWxsPSIjMTgxOTFFIiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik02NS45MDgxLDQzMC45MDggQzc2LjQ1MjMsNDIwLjM2NCA5My41NDc3LDQyMC4zNjQgMTA0LjA5Miw0MzAuOTA4IEMxMTQuNjM2LDQ0MS40NTIgMTE0LjYzNiw0NTguNTQ4IDEwNC4wOTIsNDY5LjA5MiBDOTMuNTQ3Nyw0NzkuNjM2IDc2LjQ1MjMsNDc5LjYzNiA2NS45MDgxLDQ2OS4wOTIgQzU1LjM2NCw0NTguNTQ4IDU1LjM2NCw0NDEuNDUyIDY1LjkwODEsNDMwLjkwOCBaIE05Ni4zMTM3LDQzOC42ODYgQzkwLjA2NTMsNDMyLjQzOCA3OS45MzQ3LDQzMi40MzggNzMuNjg2Myw0MzguNjg2IEM2Ny40Mzc5LDQ0NC45MzUgNjcuNDM3OSw0NTUuMDY1IDczLjY4NjMsNDYxLjMxNCBDNzkuOTM0Nyw0NjcuNTYyIDkwLjA2NTMsNDY3LjU2MiA5Ni4zMTM3LDQ2MS4zMTQgQzEwMi41NjIsNDU1LjA2NSAxMDIuNTYyLDQ0NC45MzUgOTYuMzEzNyw0MzguNjg2IFoiLz4KICAgIDxwYXRoIGZpbGw9IiMxNTE2MUIiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTY1LjkwODIsNDMwLjkwOCBDNTUuMzY0LDQ0MS40NTIgNTUuMzY0LDQ1OC41NDggNjUuOTA4Miw0NjkuMDkyIEw3My42ODY0LDQ2MS4zMTQgQzY3LjQzOCw0NTUuMDY1IDY3LjQzOCw0NDQuOTM1IDczLjY4NjQsNDM4LjY4NiBMNjUuOTA4Miw0MzAuOTA4IFoiLz4KICA8L2c+Cjwvc3ZnPgo="},function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMTMiIGhlaWdodD0iNDYxIiB2aWV3Qm94PSIwIDAgMzEzIDQ2MSI+CiAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgIDxwYXRoIGZpbGw9IiMxODE5MUUiIGQ9Ik0yOTQuMDA5LDE4NC4xMzcgQzQ1Ni4zODYsMTg0LjEzNyA1ODguMDE4LDMxNS43NyA1ODguMDE4LDQ3OC4xNDYgQzU4OC4wMTgsNjQwLjUyMyA0NTYuMzg2LDc3Mi4xNTYgMjk0LjAwOSw3NzIuMTU2IEMxMzEuNjMyLDc3Mi4xNTYgMCw2NDAuNTIzIDAsNDc4LjE0NiBDMCwzMTUuNzcgMTMxLjYzMiwxODQuMTM3IDI5NC4wMDksMTg0LjEzNyBaIE0yOTQuMDA5LDM4NC41NTIgQzI0Mi4zMTgsMzg0LjU1MiAyMDAuNDE1LDQyNi40NTYgMjAwLjQxNSw0NzguMTQ2IEMyMDAuNDE1LDUyOS44MzcgMjQyLjMxOCw1NzEuNzQxIDI5NC4wMDksNTcxLjc0MSBDMzQ1LjcsNTcxLjc0MSAzODcuNjA0LDUyOS44MzcgMzg3LjYwNCw0NzguMTQ2IEMzODcuNjA0LDQyNi40NTYgMzQ1LjcsMzg0LjU1MiAyOTQuMDA5LDM4NC41NTIgWiIvPgogICAgPHBhdGggZmlsbD0iIzE1MTYxQiIgZD0iTTIwMi45NTgsMzY1LjczMSBMMjAyLjk1OCwzODAuOTkxIEwxODcuNjk4LDM4MC45OTEgTDE4Ny42OTgsMzY1LjczMSBMMjAyLjk1OCwzNjUuNzMxIFogTTIwMi45NTgsMzI3LjA3MyBMMjAyLjk1OCwzNDIuMzMzIEwxODcuNjk4LDM0Mi4zMzMgTDE4Ny42OTgsMzI3LjA3MyBMMjAyLjk1OCwzMjcuMDczIFogTTI0My42NTEsMzI1LjAzOCBMMjQzLjY1MSwzNDAuMjk4IEwyMjguMzkxLDM0MC4yOTggTDIyOC4zOTEsMzI1LjAzOCBMMjQzLjY1MSwzMjUuMDM4IFogTTI0My42NTEsMjg2LjM3OSBMMjQzLjY1MSwzMDEuNjM5IEwyMjguMzkxLDMwMS42MzkgTDIyOC4zOTEsMjg2LjM3OSBMMjQzLjY1MSwyODYuMzc5IFogTTIwMi45NTgsMjg1LjM2MiBMMjAyLjk1OCwzMDAuNjIyIEwxODcuNjk4LDMwMC42MjIgTDE4Ny42OTgsMjg1LjM2MiBMMjAyLjk1OCwyODUuMzYyIFogTTI4NC4zNDUsMjg0LjM0NSBMMjg0LjM0NSwyOTkuNjA1IEwyNjkuMDg1LDI5OS42MDUgTDI2OS4wODUsMjg0LjM0NSBMMjg0LjM0NSwyODQuMzQ1IFogTTI4NC4zNDUsMjQ1LjY4NiBMMjg0LjM0NSwyNjAuOTQ2IEwyNjkuMDg1LDI2MC45NDYgTDI2OS4wODUsMjQ1LjY4NiBMMjg0LjM0NSwyNDUuNjg2IFogTTI0My42NTEsMjQ0LjY2OSBMMjQzLjY1MSwyNTkuOTI5IEwyMjguMzkxLDI1OS45MjkgTDIyOC4zOTEsMjQ0LjY2OSBMMjQzLjY1MSwyNDQuNjY5IFogTTIwMi45NTgsMjQzLjY1MSBMMjAyLjk1OCwyNTguOTExIEwxODcuNjk4LDI1OC45MTEgTDE4Ny42OTgsMjQzLjY1MSBMMjAyLjk1OCwyNDMuNjUxIFogTTI4NC4zNDUsMjAzLjk3NSBMMjg0LjM0NSwyMTkuMjM1IEwyNjkuMDg1LDIxOS4yMzUgTDI2OS4wODUsMjAzLjk3NSBMMjg0LjM0NSwyMDMuOTc1IFogTTIwMi45NTgsMjAzLjk3NSBMMjAyLjk1OCwyMTkuMjM1IEwxODcuNjk4LDIxOS4yMzUgTDE4Ny42OTgsMjAzLjk3NSBMMjAyLjk1OCwyMDMuOTc1IFogTTI0My42NTEsMjAyLjk1OCBMMjQzLjY1MSwyMTguMjE4IEwyMjguMzkxLDIxOC4yMTggTDIyOC4zOTEsMjAyLjk1OCBMMjQzLjY1MSwyMDIuOTU4IFogTTI0My42NTEsMTYzLjI4MiBMMjQzLjY1MSwxNzguNTQyIEwyMjguMzkxLDE3OC41NDIgTDIyOC4zOTEsMTYzLjI4MiBMMjQzLjY1MSwxNjMuMjgyIFogTTIwMi45NTgsMTYzLjI4MiBMMjAyLjk1OCwxNzguNTQyIEwxODcuNjk4LDE3OC41NDIgTDE4Ny42OTgsMTYzLjI4MiBMMjAyLjk1OCwxNjMuMjgyIFogTTI4NC4zNDUsMTYyLjI2NSBMMjg0LjM0NSwxNzcuNTI1IEwyNjkuMDg1LDE3Ny41MjUgTDI2OS4wODUsMTYyLjI2NSBMMjg0LjM0NSwxNjIuMjY1IFogTTI4NC4zNDUsMTIyLjU4OSBMMjg0LjM0NSwxMzcuODQ5IEwyNjkuMDg1LDEzNy44NDkgTDI2OS4wODUsMTIyLjU4OSBMMjg0LjM0NSwxMjIuNTg5IFogTTI0My42NTEsMTIyLjU4OSBMMjQzLjY1MSwxMzcuODQ5IEwyMjguMzkxLDEzNy44NDkgTDIyOC4zOTEsMTIyLjU4OSBMMjQzLjY1MSwxMjIuNTg5IFogTTIwMi45NTgsMTIyLjU4OSBMMjAyLjk1OCwxMzcuODQ5IEwxODcuNjk4LDEzNy44NDkgTDE4Ny42OTgsMTIyLjU4OSBMMjAyLjk1OCwxMjIuNTg5IFogTTI4NC4zNDUsODEuODk1NCBMMjg0LjM0NSw5Ny4xNTU0IEwyNjkuMDg1LDk3LjE1NTQgTDI2OS4wODUsODEuODk1NCBMMjg0LjM0NSw4MS44OTU0IFogTTI0My42NTEsODEuODk1NCBMMjQzLjY1MSw5Ny4xNTU0IEwyMjguMzkxLDk3LjE1NTQgTDIyOC4zOTEsODEuODk1NCBMMjQzLjY1MSw4MS44OTU0IFogTTIwMi45NTgsODEuODk1NCBMMjAyLjk1OCw5Ny4xNTU0IEwxODcuNjk4LDk3LjE1NTQgTDE4Ny42OTgsODEuODk1NCBMMjAyLjk1OCw4MS44OTU0IFogTTI4NC4zNDUsNDEuMjAyIEwyODQuMzQ1LDU2LjQ2MiBMMjY5LjA4NSw1Ni40NjIgTDI2OS4wODUsNDEuMjAyIEwyODQuMzQ1LDQxLjIwMiBaIE0yNDMuNjUxLDQxLjIwMiBMMjQzLjY1MSw1Ni40NjIgTDIyOC4zOTEsNTYuNDYyIEwyMjguMzkxLDQxLjIwMiBMMjQzLjY1MSw0MS4yMDIgWiBNMjg0LjM0NSwwLjUwODc4OSBMMjg0LjM0NSwxNS43Njg4IEwyNjkuMDg1LDE1Ljc2ODggTDI2OS4wODUsMC41MDg3ODkgTDI4NC4zNDUsMC41MDg3ODkgWiIvPgogIDwvZz4KPC9zdmc+Cg=="},function(module,exports,__webpack_require__){var api=__webpack_require__(38);var content=__webpack_require__(97);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(39);var ___CSS_LOADER_GET_URL_IMPORT___=__webpack_require__(40);var ___CSS_LOADER_URL_IMPORT_0___=__webpack_require__(98);var ___CSS_LOADER_URL_IMPORT_1___=__webpack_require__(99);exports=___CSS_LOADER_API_IMPORT___(false);var ___CSS_LOADER_URL_REPLACEMENT_0___=___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);var ___CSS_LOADER_URL_REPLACEMENT_1___=___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);exports.push([module.i,".secAuthenticationStatePage {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 10000;\n  background: inherit;\n  background-color: #fafbfd;\n  opacity: 0;\n  overflow: auto;\n  -webkit-animation: kibanaFullScreenGraphics_FadeIn 500ms cubic-bezier(0.694, 0.0482, 0.335, 1) 0s forwards;\n          animation: kibanaFullScreenGraphics_FadeIn 500ms cubic-bezier(0.694, 0.0482, 0.335, 1) 0s forwards; }\n  .secAuthenticationStatePage::before {\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 1;\n    width: 310px;\n    height: 477px;\n    content: url("+___CSS_LOADER_URL_REPLACEMENT_0___+"); }\n  .secAuthenticationStatePage::after {\n    position: fixed;\n    bottom: 0;\n    right: 0;\n    z-index: 1;\n    width: 313px;\n    height: 461px;\n    content: url("+___CSS_LOADER_URL_REPLACEMENT_1___+"); }\n\n@-webkit-keyframes kibanaFullScreenGraphics_FadeIn {\n  from {\n    opacity: 0;\n    -webkit-transform: translateY(200px), scale(0.75);\n            transform: translateY(200px), scale(0.75); }\n  to {\n    opacity: 1;\n    -webkit-transform: translateY(0), scale(1);\n            transform: translateY(0), scale(1); } }\n\n@keyframes kibanaFullScreenGraphics_FadeIn {\n  from {\n    opacity: 0;\n    -webkit-transform: translateY(200px), scale(0.75);\n            transform: translateY(200px), scale(0.75); }\n  to {\n    opacity: 1;\n    -webkit-transform: translateY(0), scale(1);\n            transform: translateY(0), scale(1); } }\n\n.secAuthenticationStatePage__header {\n  position: relative;\n  padding: 32px;\n  z-index: 10; }\n\n.secAuthenticationStatePage__logo {\n  display: inline-block;\n  width: 80px;\n  height: 80px;\n  line-height: 80px;\n  text-align: center;\n  background-color: #FFF;\n  border-radius: 100%;\n  padding: 16px;\n  -webkit-box-shadow: 0 6px 12px -1px rgba(152, 162, 179, 0.2), 0 4px 4px -1px rgba(152, 162, 179, 0.2), 0 2px 2px 0 rgba(152, 162, 179, 0.2);\n          box-shadow: 0 6px 12px -1px rgba(152, 162, 179, 0.2), 0 4px 4px -1px rgba(152, 162, 179, 0.2), 0 2px 2px 0 rgba(152, 162, 179, 0.2);\n  margin-bottom: 32px; }\n  .secAuthenticationStatePage__logo .euiIcon {\n    vertical-align: baseline; }\n\n.secAuthenticationStatePage__content {\n  position: relative;\n  margin: auto;\n  max-width: 460px;\n  padding-left: 32px;\n  padding-right: 32px;\n  z-index: 10; }\n\n.loginWelcome {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 10000;\n  background: inherit;\n  background-color: #fafbfd;\n  opacity: 0;\n  overflow: auto;\n  -webkit-animation: kibanaFullScreenGraphics_FadeIn 500ms cubic-bezier(0.694, 0.0482, 0.335, 1) 0s forwards;\n          animation: kibanaFullScreenGraphics_FadeIn 500ms cubic-bezier(0.694, 0.0482, 0.335, 1) 0s forwards; }\n  .loginWelcome::before {\n    position: absolute;\n    top: 0;\n    left: 0;\n    z-index: 1;\n    width: 310px;\n    height: 477px;\n    content: url("+___CSS_LOADER_URL_REPLACEMENT_0___+"); }\n  .loginWelcome::after {\n    position: fixed;\n    bottom: 0;\n    right: 0;\n    z-index: 1;\n    width: 313px;\n    height: 461px;\n    content: url("+___CSS_LOADER_URL_REPLACEMENT_1___+"); }\n\n@keyframes kibanaFullScreenGraphics_FadeIn {\n  from {\n    opacity: 0;\n    -webkit-transform: translateY(200px), scale(0.75);\n            transform: translateY(200px), scale(0.75); }\n  to {\n    opacity: 1;\n    -webkit-transform: translateY(0), scale(1);\n            transform: translateY(0), scale(1); } }\n\n.loginWelcome__header {\n  position: relative;\n  padding: 32px;\n  z-index: 10; }\n\n.loginWelcome__logo {\n  display: inline-block;\n  width: 80px;\n  height: 80px;\n  line-height: 80px;\n  text-align: center;\n  background-color: #FFF;\n  border-radius: 100%;\n  padding: 16px;\n  -webkit-box-shadow: 0 6px 12px -1px rgba(152, 162, 179, 0.2), 0 4px 4px -1px rgba(152, 162, 179, 0.2), 0 2px 2px 0 rgba(152, 162, 179, 0.2);\n          box-shadow: 0 6px 12px -1px rgba(152, 162, 179, 0.2), 0 4px 4px -1px rgba(152, 162, 179, 0.2), 0 2px 2px 0 rgba(152, 162, 179, 0.2);\n  margin-bottom: 32px; }\n  .loginWelcome__logo .euiIcon {\n    vertical-align: baseline; }\n\n.loginWelcome__content {\n  position: relative;\n  margin: auto;\n  max-width: 460px;\n  padding-left: 32px;\n  padding-right: 32px;\n  z-index: 10; }\n  .loginWelcome__content.loginWelcome__contentDisabledForm {\n    max-width: 700px; }\n\n.collapsiblePanel__logo {\n  margin-right: 8px;\n  vertical-align: text-bottom; }\n\n.secSpacesPopoverList__buttonText {\n  font-size: 12px; }\n\n.secPrivilegeFeatureIcon {\n  -webkit-flex-shrink: 0;\n      -ms-flex-negative: 0;\n          flex-shrink: 0;\n  margin-right: 8px; }\n\n.secPrivilegeFeatureChangeAllLink {\n  margin-left: 8px; }\n\n/**\n * 1. Allow table to scroll both directions\n */\n.secPrivilegeMatrix__modal,\n.secPrivilegeMatrix__modal .euiModal__flex {\n  overflow: hidden;\n  /* 1 */ }\n\n.secPrivilegeMatrix__row--isBasePrivilege,\n.secPrivilegeMatrix__cell--isGlobalPrivilege,\n.secPrivilegeTable__row--isGlobalSpace {\n  background-color: #F5F7FA; }\n\n.secUsersEditPage__content {\n  max-width: 460px;\n  margin-left: auto;\n  margin-right: auto;\n  -webkit-box-flex: 0;\n  -webkit-flex-grow: 0;\n      -ms-flex-positive: 0;\n          flex-grow: 0; }\n\n.secRoleMapping__ruleEditorGroup--even {\n  background-color: #F5F7FA; }\n\n.secRoleMapping__ruleEditorGroup--odd {\n  background-color: #FFF; }\n",""]);module.exports=exports},function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMTAiIGhlaWdodD0iNDc3IiB2aWV3Qm94PSIwIDAgMzEwIDQ3NyI+CiAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgIDxwYXRoIGZpbGw9IiNGNUY3RkEiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTS04NC44MTkyLDQyOS4zNjIgQzc5LjMwOTMsNDI5LjM2MiAyMTIuMzYyLDI5Ni4zMDkgMjEyLjM2MiwxMzIuMTgxIEMyMTIuMzYyLC0zMS45NDc2IDc5LjMwOTMsLTE2NSAtODQuODE5MiwtMTY1IEMtMjQ4Ljk0OCwtMTY1IC0zODIsLTMxLjk0NzYgLTM4MiwxMzIuMTgxIEMtMzgyLDI5Ni4zMDkgLTI0OC45NDgsNDI5LjM2MiAtODQuODE5Miw0MjkuMzYyIFoiLz4KICAgIDxwYXRoIGZpbGw9IiNFNkVCRjIiIGQ9Ik0xOTEuNzY1LDIwOC42ODMgTDE5MS43NjUsMjIzLjM5NSBMMTc3LjA1MywyMjMuMzk1IEwxNzcuMDUzLDIwOC42ODMgTDE5MS43NjUsMjA4LjY4MyBaIE0yMzAuOTk3LDIwOC42ODMgTDIzMC45OTcsMjIzLjM5NSBMMjE2LjI4NSwyMjMuMzk1IEwyMTYuMjg1LDIwOC42ODMgTDIzMC45OTcsMjA4LjY4MyBaIE0xNTIuNTMzLDIwOC42ODMgTDE1Mi41MzMsMjIzLjM5NSBMMTM3LjgyMSwyMjMuMzk1IEwxMzcuODIxLDIwOC42ODMgTDE1Mi41MzMsMjA4LjY4MyBaIE0xMTMuMzAxLDIwOC42ODMgTDExMy4zMDEsMjIzLjM5NSBMOTguNTg5MywyMjMuMzk1IEw5OC41ODkzLDIwOC42ODMgTDExMy4zMDEsMjA4LjY4MyBaIE03NS4wNTA0LDIwOC42ODMgTDc1LjA1MDQsMjIzLjM5NSBMNjAuMzM4NSwyMjMuMzk1IEw2MC4zMzg1LDIwOC42ODMgTDc1LjA1MDQsMjA4LjY4MyBaIE0zNC44Mzc1LDIwOC42ODMgTDM0LjgzNzUsMjIzLjM5NSBMMjAuMTI1NiwyMjMuMzk1IEwyMC4xMjU2LDIwOC42ODMgTDM0LjgzNzUsMjA4LjY4MyBaIE0yMzAuOTk3LDE2OS40NTEgTDIzMC45OTcsMTg0LjE2MyBMMjE2LjI4NSwxODQuMTYzIEwyMTYuMjg1LDE2OS40NTEgTDIzMC45OTcsMTY5LjQ1MSBaIE0yNzAuMjI4LDE2OS40NTEgTDI3MC4yMjgsMTg0LjE2MyBMMjU1LjUxNiwxODQuMTYzIEwyNTUuNTE2LDE2OS40NTEgTDI3MC4yMjgsMTY5LjQ1MSBaIE0xOTEuNzY1LDE2OS40NTEgTDE5MS43NjUsMTg0LjE2MyBMMTc3LjA1MywxODQuMTYzIEwxNzcuMDUzLDE2OS40NTEgTDE5MS43NjUsMTY5LjQ1MSBaIE0xNTIuNTMzLDE2OS40NTEgTDE1Mi41MzMsMTg0LjE2MyBMMTM3LjgyMSwxODQuMTYzIEwxMzcuODIxLDE2OS40NTEgTDE1Mi41MzMsMTY5LjQ1MSBaIE0xMTQuMjgyLDE2OS40NTEgTDExNC4yODIsMTg0LjE2MyBMOTkuNTcwMSwxODQuMTYzIEw5OS41NzAxLDE2OS40NTEgTDExNC4yODIsMTY5LjQ1MSBaIE03NC4wNjk3LDE2OS40NTEgTDc0LjA2OTcsMTg0LjE2MyBMNTkuMzU3OCwxODQuMTYzIEw1OS4zNTc4LDE2OS40NTEgTDc0LjA2OTcsMTY5LjQ1MSBaIE0zMy44NTY4LDE2OS40NTEgTDMzLjg1NjgsMTg0LjE2MyBMMTkuMTQ0OSwxODQuMTYzIEwxOS4xNDQ5LDE2OS40NTEgTDMzLjg1NjgsMTY5LjQ1MSBaIE0yNzAuMjI4LDEzMC4yMTkgTDI3MC4yMjgsMTQ0LjkzMSBMMjU1LjUxNiwxNDQuOTMxIEwyNTUuNTE2LDEzMC4yMTkgTDI3MC4yMjgsMTMwLjIxOSBaIE0zMDkuNDYsMTMwLjIxOSBMMzA5LjQ2LDE0NC45MzEgTDI5NC43NDgsMTQ0LjkzMSBMMjk0Ljc0OCwxMzAuMjE5IEwzMDkuNDYsMTMwLjIxOSBaIE0yMzAuOTk3LDEzMC4yMTkgTDIzMC45OTcsMTQ0LjkzMSBMMjE2LjI4NSwxNDQuOTMxIEwyMTYuMjg1LDEzMC4yMTkgTDIzMC45OTcsMTMwLjIxOSBaIE0xOTEuNzY1LDEzMC4yMTkgTDE5MS43NjUsMTQ0LjkzMSBMMTc3LjA1MywxNDQuOTMxIEwxNzcuMDUzLDEzMC4yMTkgTDE5MS43NjUsMTMwLjIxOSBaIE0xNTMuNTE0LDEzMC4yMTkgTDE1My41MTQsMTQ0LjkzMSBMMTM4LjgwMiwxNDQuOTMxIEwxMzguODAyLDEzMC4yMTkgTDE1My41MTQsMTMwLjIxOSBaIE0xMTMuMzAxLDEzMC4yMTkgTDExMy4zMDEsMTQ0LjkzMSBMOTguNTg5MywxNDQuOTMxIEw5OC41ODkzLDEzMC4yMTkgTDExMy4zMDEsMTMwLjIxOSBaIE03My4wODg5LDEzMC4yMTkgTDczLjA4ODksMTQ0LjkzMSBMNTguMzc2OSwxNDQuOTMxIEw1OC4zNzY5LDEzMC4yMTkgTDczLjA4ODksMTMwLjIxOSBaIE0zNS44MTg0LDEzMC4yMTkgTDM1LjgxODQsMTQ0LjkzMSBMMjEuMTA2NCwxNDQuOTMxIEwyMS4xMDY0LDEzMC4yMTkgTDM1LjgxODQsMTMwLjIxOSBaIi8+CiAgICA8cGF0aCBmaWxsPSIjRjVGN0ZBIiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik02NS45MDgxLDQzMC45MDggQzc2LjQ1MjMsNDIwLjM2NCA5My41NDc3LDQyMC4zNjQgMTA0LjA5Miw0MzAuOTA4IEMxMTQuNjM2LDQ0MS40NTIgMTE0LjYzNiw0NTguNTQ4IDEwNC4wOTIsNDY5LjA5MiBDOTMuNTQ3Nyw0NzkuNjM2IDc2LjQ1MjMsNDc5LjYzNiA2NS45MDgxLDQ2OS4wOTIgQzU1LjM2NCw0NTguNTQ4IDU1LjM2NCw0NDEuNDUyIDY1LjkwODEsNDMwLjkwOCBaIE05Ni4zMTM3LDQzOC42ODYgQzkwLjA2NTMsNDMyLjQzOCA3OS45MzQ3LDQzMi40MzggNzMuNjg2Myw0MzguNjg2IEM2Ny40Mzc5LDQ0NC45MzUgNjcuNDM3OSw0NTUuMDY1IDczLjY4NjMsNDYxLjMxNCBDNzkuOTM0Nyw0NjcuNTYyIDkwLjA2NTMsNDY3LjU2MiA5Ni4zMTM3LDQ2MS4zMTQgQzEwMi41NjIsNDU1LjA2NSAxMDIuNTYyLDQ0NC45MzUgOTYuMzEzNyw0MzguNjg2IFoiLz4KICAgIDxwYXRoIGZpbGw9IiNFNkVCRjIiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTY1LjkwODIsNDMwLjkwOCBDNTUuMzY0LDQ0MS40NTIgNTUuMzY0LDQ1OC41NDggNjUuOTA4Miw0NjkuMDkyIEw3My42ODY0LDQ2MS4zMTQgQzY3LjQzOCw0NTUuMDY1IDY3LjQzOCw0NDQuOTM1IDczLjY4NjQsNDM4LjY4NiBMNjUuOTA4Miw0MzAuOTA4IFoiLz4KICA8L2c+Cjwvc3ZnPgo="},function(module,exports){module.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMTMiIGhlaWdodD0iNDYxIiB2aWV3Qm94PSIwIDAgMzEzIDQ2MSI+CiAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgIDxwYXRoIGZpbGw9IiNGNUY3RkEiIGQ9Ik0yOTQuMDA5LDE4NC4xMzcgQzQ1Ni4zODYsMTg0LjEzNyA1ODguMDE4LDMxNS43NyA1ODguMDE4LDQ3OC4xNDYgQzU4OC4wMTgsNjQwLjUyMyA0NTYuMzg2LDc3Mi4xNTYgMjk0LjAwOSw3NzIuMTU2IEMxMzEuNjMyLDc3Mi4xNTYgMCw2NDAuNTIzIDAsNDc4LjE0NiBDMCwzMTUuNzcgMTMxLjYzMiwxODQuMTM3IDI5NC4wMDksMTg0LjEzNyBaIE0yOTQuMDA5LDM4NC41NTIgQzI0Mi4zMTgsMzg0LjU1MiAyMDAuNDE1LDQyNi40NTYgMjAwLjQxNSw0NzguMTQ2IEMyMDAuNDE1LDUyOS44MzcgMjQyLjMxOCw1NzEuNzQxIDI5NC4wMDksNTcxLjc0MSBDMzQ1LjcsNTcxLjc0MSAzODcuNjA0LDUyOS44MzcgMzg3LjYwNCw0NzguMTQ2IEMzODcuNjA0LDQyNi40NTYgMzQ1LjcsMzg0LjU1MiAyOTQuMDA5LDM4NC41NTIgWiIvPgogICAgPHBhdGggZmlsbD0iI0U2RUJGMiIgZD0iTTIwMi45NTgsMzY1LjczMSBMMjAyLjk1OCwzODAuOTkxIEwxODcuNjk4LDM4MC45OTEgTDE4Ny42OTgsMzY1LjczMSBMMjAyLjk1OCwzNjUuNzMxIFogTTIwMi45NTgsMzI3LjA3MyBMMjAyLjk1OCwzNDIuMzMzIEwxODcuNjk4LDM0Mi4zMzMgTDE4Ny42OTgsMzI3LjA3MyBMMjAyLjk1OCwzMjcuMDczIFogTTI0My42NTEsMzI1LjAzOCBMMjQzLjY1MSwzNDAuMjk4IEwyMjguMzkxLDM0MC4yOTggTDIyOC4zOTEsMzI1LjAzOCBMMjQzLjY1MSwzMjUuMDM4IFogTTI0My42NTEsMjg2LjM3OSBMMjQzLjY1MSwzMDEuNjM5IEwyMjguMzkxLDMwMS42MzkgTDIyOC4zOTEsMjg2LjM3OSBMMjQzLjY1MSwyODYuMzc5IFogTTIwMi45NTgsMjg1LjM2MiBMMjAyLjk1OCwzMDAuNjIyIEwxODcuNjk4LDMwMC42MjIgTDE4Ny42OTgsMjg1LjM2MiBMMjAyLjk1OCwyODUuMzYyIFogTTI4NC4zNDUsMjg0LjM0NSBMMjg0LjM0NSwyOTkuNjA1IEwyNjkuMDg1LDI5OS42MDUgTDI2OS4wODUsMjg0LjM0NSBMMjg0LjM0NSwyODQuMzQ1IFogTTI4NC4zNDUsMjQ1LjY4NiBMMjg0LjM0NSwyNjAuOTQ2IEwyNjkuMDg1LDI2MC45NDYgTDI2OS4wODUsMjQ1LjY4NiBMMjg0LjM0NSwyNDUuNjg2IFogTTI0My42NTEsMjQ0LjY2OSBMMjQzLjY1MSwyNTkuOTI5IEwyMjguMzkxLDI1OS45MjkgTDIyOC4zOTEsMjQ0LjY2OSBMMjQzLjY1MSwyNDQuNjY5IFogTTIwMi45NTgsMjQzLjY1MSBMMjAyLjk1OCwyNTguOTExIEwxODcuNjk4LDI1OC45MTEgTDE4Ny42OTgsMjQzLjY1MSBMMjAyLjk1OCwyNDMuNjUxIFogTTI4NC4zNDUsMjAzLjk3NSBMMjg0LjM0NSwyMTkuMjM1IEwyNjkuMDg1LDIxOS4yMzUgTDI2OS4wODUsMjAzLjk3NSBMMjg0LjM0NSwyMDMuOTc1IFogTTIwMi45NTgsMjAzLjk3NSBMMjAyLjk1OCwyMTkuMjM1IEwxODcuNjk4LDIxOS4yMzUgTDE4Ny42OTgsMjAzLjk3NSBMMjAyLjk1OCwyMDMuOTc1IFogTTI0My42NTEsMjAyLjk1OCBMMjQzLjY1MSwyMTguMjE4IEwyMjguMzkxLDIxOC4yMTggTDIyOC4zOTEsMjAyLjk1OCBMMjQzLjY1MSwyMDIuOTU4IFogTTI0My42NTEsMTYzLjI4MiBMMjQzLjY1MSwxNzguNTQyIEwyMjguMzkxLDE3OC41NDIgTDIyOC4zOTEsMTYzLjI4MiBMMjQzLjY1MSwxNjMuMjgyIFogTTIwMi45NTgsMTYzLjI4MiBMMjAyLjk1OCwxNzguNTQyIEwxODcuNjk4LDE3OC41NDIgTDE4Ny42OTgsMTYzLjI4MiBMMjAyLjk1OCwxNjMuMjgyIFogTTI4NC4zNDUsMTYyLjI2NSBMMjg0LjM0NSwxNzcuNTI1IEwyNjkuMDg1LDE3Ny41MjUgTDI2OS4wODUsMTYyLjI2NSBMMjg0LjM0NSwxNjIuMjY1IFogTTI4NC4zNDUsMTIyLjU4OSBMMjg0LjM0NSwxMzcuODQ5IEwyNjkuMDg1LDEzNy44NDkgTDI2OS4wODUsMTIyLjU4OSBMMjg0LjM0NSwxMjIuNTg5IFogTTI0My42NTEsMTIyLjU4OSBMMjQzLjY1MSwxMzcuODQ5IEwyMjguMzkxLDEzNy44NDkgTDIyOC4zOTEsMTIyLjU4OSBMMjQzLjY1MSwxMjIuNTg5IFogTTIwMi45NTgsMTIyLjU4OSBMMjAyLjk1OCwxMzcuODQ5IEwxODcuNjk4LDEzNy44NDkgTDE4Ny42OTgsMTIyLjU4OSBMMjAyLjk1OCwxMjIuNTg5IFogTTI4NC4zNDUsODEuODk1NCBMMjg0LjM0NSw5Ny4xNTU0IEwyNjkuMDg1LDk3LjE1NTQgTDI2OS4wODUsODEuODk1NCBMMjg0LjM0NSw4MS44OTU0IFogTTI0My42NTEsODEuODk1NCBMMjQzLjY1MSw5Ny4xNTU0IEwyMjguMzkxLDk3LjE1NTQgTDIyOC4zOTEsODEuODk1NCBMMjQzLjY1MSw4MS44OTU0IFogTTIwMi45NTgsODEuODk1NCBMMjAyLjk1OCw5Ny4xNTU0IEwxODcuNjk4LDk3LjE1NTQgTDE4Ny42OTgsODEuODk1NCBMMjAyLjk1OCw4MS44OTU0IFogTTI4NC4zNDUsNDEuMjAyIEwyODQuMzQ1LDU2LjQ2MiBMMjY5LjA4NSw1Ni40NjIgTDI2OS4wODUsNDEuMjAyIEwyODQuMzQ1LDQxLjIwMiBaIE0yNDMuNjUxLDQxLjIwMiBMMjQzLjY1MSw1Ni40NjIgTDIyOC4zOTEsNTYuNDYyIEwyMjguMzkxLDQxLjIwMiBMMjQzLjY1MSw0MS4yMDIgWiBNMjg0LjM0NSwwLjUwODc4OSBMMjg0LjM0NSwxNS43Njg4IEwyNjkuMDg1LDE1Ljc2ODggTDI2OS4wODUsMC41MDg3ODkgTDI4NC4zNDUsMC41MDg3ODkgWiIvPgogIDwvZz4KPC9zdmc+Cg=="},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SecurityPlugin=void 0;var _i18n=__webpack_require__(3);var _public=__webpack_require__(17);var _session=__webpack_require__(108);var _licensing=__webpack_require__(42);var _nav_control=__webpack_require__(131);var _authentication=__webpack_require__(134);var _management=__webpack_require__(44);var _account_management=__webpack_require__(346);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SecurityPlugin=function(){function SecurityPlugin(initializerContext){_classCallCheck(this,SecurityPlugin);this.initializerContext=initializerContext;_defineProperty(this,"sessionTimeout",void 0);_defineProperty(this,"authenticationService",new _authentication.AuthenticationService);_defineProperty(this,"navControlService",new _nav_control.SecurityNavControlService);_defineProperty(this,"securityLicenseService",new _licensing.SecurityLicenseService);_defineProperty(this,"managementService",new _management.ManagementService);_defineProperty(this,"authc",void 0);_defineProperty(this,"config",void 0);this.config=this.initializerContext.config.get()}_createClass(SecurityPlugin,[{key:"setup",value:function setup(core,_ref){var home=_ref.home,licensing=_ref.licensing,management=_ref.management;var http=core.http,notifications=core.notifications;var anonymousPaths=http.anonymousPaths;var logoutUrl="".concat(core.http.basePath.serverBasePath,"/logout");var tenant=core.http.basePath.serverBasePath;var sessionExpired=new _session.SessionExpired(logoutUrl,tenant);http.intercept(new _session.UnauthorizedResponseHttpInterceptor(sessionExpired,anonymousPaths));this.sessionTimeout=new _session.SessionTimeout(notifications,sessionExpired,http,tenant);http.intercept(new _session.SessionTimeoutHttpInterceptor(this.sessionTimeout,anonymousPaths));var _this$securityLicense=this.securityLicenseService.setup({license$:licensing.license$}),license=_this$securityLicense.license;this.authc=this.authenticationService.setup({application:core.application,config:this.config,getStartServices:core.getStartServices,http:core.http});this.navControlService.setup({securityLicense:license,authc:this.authc,logoutUrl:logoutUrl});_account_management.accountManagementApp.create({authc:this.authc,application:core.application,getStartServices:core.getStartServices});if(management){this.managementService.setup({license:license,management:management,authc:this.authc,fatalErrors:core.fatalErrors,getStartServices:core.getStartServices})}if(management&&home){home.featureCatalogue.register({id:"security",title:_i18n.i18n.translate("xpack.security.registerFeature.securitySettingsTitle",{defaultMessage:"Security Settings"}),description:_i18n.i18n.translate("xpack.security.registerFeature.securitySettingsDescription",{defaultMessage:"Protect your data and easily manage who has access to what with users and roles."}),icon:"securityApp",path:"/app/kibana#/management/security/users",showOnHomePage:true,category:_public.FeatureCatalogueCategory.ADMIN})}return{authc:this.authc,sessionTimeout:this.sessionTimeout,license:license,__legacyCompat:{logoutUrl:logoutUrl,tenant:tenant}}}},{key:"start",value:function start(core,_ref2){var management=_ref2.management;this.sessionTimeout.start();this.navControlService.start({core:core});if(management){this.managementService.start({management:management})}}},{key:"stop",value:function stop(){this.sessionTimeout.stop();this.navControlService.stop();this.securityLicenseService.stop();this.managementService.stop()}}]);return SecurityPlugin}();exports.SecurityPlugin=SecurityPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HomePublicPlugin=void 0;var _services=__webpack_require__(36);var _kibana_services=__webpack_require__(84);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var HomePublicPlugin=function(){function HomePublicPlugin(initializerContext){_classCallCheck(this,HomePublicPlugin);this.initializerContext=initializerContext;_defineProperty(this,"featuresCatalogueRegistry",new _services.FeatureCatalogueRegistry);_defineProperty(this,"environmentService",new _services.EnvironmentService);_defineProperty(this,"tutorialService",new _services.TutorialService)}_createClass(HomePublicPlugin,[{key:"setup",value:function setup(core,_ref){var _this=this;var kibanaLegacy=_ref.kibanaLegacy,usageCollection=_ref.usageCollection;kibanaLegacy.registerLegacyApp({id:"home",title:"Home",mount:function(){var _mount=_asyncToGenerator(regeneratorRuntime.mark((function _callee(params){var trackUiMetric,_ref2,_ref3,coreStart,_ref3$,telemetry,data,_ref4,renderApp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:trackUiMetric=usageCollection?usageCollection.reportUiStats.bind(usageCollection,"Kibana_home"):function(){};_context.next=3;return core.getStartServices();case 3:_ref2=_context.sent;_ref3=_slicedToArray(_ref2,2);coreStart=_ref3[0];_ref3$=_ref3[1];telemetry=_ref3$.telemetry;data=_ref3$.data;(0,_kibana_services.setServices)({trackUiMetric:trackUiMetric,kibanaVersion:_this.initializerContext.env.packageInfo.version,http:coreStart.http,toastNotifications:core.notifications.toasts,banners:coreStart.overlays.banners,docLinks:coreStart.docLinks,savedObjectsClient:coreStart.savedObjects.client,chrome:coreStart.chrome,telemetry:telemetry,uiSettings:core.uiSettings,addBasePath:core.http.basePath.prepend,getBasePath:core.http.basePath.get,indexPatternService:data.indexPatterns,environmentService:_this.environmentService,config:kibanaLegacy.config,homeConfig:_this.initializerContext.config.get(),tutorialService:_this.tutorialService,featureCatalogue:_this.featuresCatalogueRegistry});_context.next=12;return Promise.all([__webpack_require__.e(3),__webpack_require__.e(2)]).then(__webpack_require__.t.bind(null,349,7));case 12:_ref4=_context.sent;renderApp=_ref4.renderApp;_context.next=16;return renderApp(params.element);case 16:return _context.abrupt("return",_context.sent);case 17:case"end":return _context.stop()}}}),_callee)})));function mount(_x){return _mount.apply(this,arguments)}return mount}()});return{featureCatalogue:_objectSpread({},this.featuresCatalogueRegistry.setup()),environment:_objectSpread({},this.environmentService.setup()),tutorials:_objectSpread({},this.tutorialService.setup())}}},{key:"start",value:function start(_ref5){var capabilities=_ref5.application.capabilities;this.featuresCatalogueRegistry.start({capabilities:capabilities})}}]);return HomePublicPlugin}();exports.HomePublicPlugin=HomePublicPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FeatureCatalogueCategory",{enumerable:true,get:function get(){return _feature_catalogue_registry.FeatureCatalogueCategory}});Object.defineProperty(exports,"FeatureCatalogueEntry",{enumerable:true,get:function get(){return _feature_catalogue_registry.FeatureCatalogueEntry}});Object.defineProperty(exports,"FeatureCatalogueRegistry",{enumerable:true,get:function get(){return _feature_catalogue_registry.FeatureCatalogueRegistry}});Object.defineProperty(exports,"FeatureCatalogueRegistrySetup",{enumerable:true,get:function get(){return _feature_catalogue_registry.FeatureCatalogueRegistrySetup}});var _feature_catalogue_registry=__webpack_require__(103)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FeatureCatalogueRegistry=exports.FeatureCatalogueCategory=void 0;function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FeatureCatalogueCategory;exports.FeatureCatalogueCategory=FeatureCatalogueCategory;(function(FeatureCatalogueCategory){FeatureCatalogueCategory["ADMIN"]="admin";FeatureCatalogueCategory["DATA"]="data";FeatureCatalogueCategory["OTHER"]="other"})(FeatureCatalogueCategory||(exports.FeatureCatalogueCategory=FeatureCatalogueCategory={}));var FeatureCatalogueRegistry=function(){function FeatureCatalogueRegistry(){_classCallCheck(this,FeatureCatalogueRegistry);_defineProperty(this,"capabilities",null);_defineProperty(this,"features",new Map)}_createClass(FeatureCatalogueRegistry,[{key:"setup",value:function setup(){var _this=this;return{register:function register(feature){if(_this.features.has(feature.id)){throw new Error("Feature with id [".concat(feature.id,"] has already been registered. Use a unique id."))}_this.features.set(feature.id,feature)}}}},{key:"start",value:function start(_ref){var capabilities=_ref.capabilities;this.capabilities=capabilities}},{key:"get",value:function get(){if(this.capabilities===null){throw new Error("Catalogue entries are only available after start phase")}var capabilities=this.capabilities;return _toConsumableArray(this.features.values()).filter((function(entry){return capabilities.catalogue[entry.id]!==false})).sort(compareByKey("title"))}}]);return FeatureCatalogueRegistry}();exports.FeatureCatalogueRegistry=FeatureCatalogueRegistry;var compareByKey=function compareByKey(key){return function(left,right){if(left[key]<right[key]){return-1}else if(left[key]>right[key]){return 1}else{return 0}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"EnvironmentService",{enumerable:true,get:function get(){return _environment.EnvironmentService}});Object.defineProperty(exports,"Environment",{enumerable:true,get:function get(){return _environment.Environment}});Object.defineProperty(exports,"EnvironmentServiceSetup",{enumerable:true,get:function get(){return _environment.EnvironmentServiceSetup}});var _environment=__webpack_require__(105)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EnvironmentService=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EnvironmentService=function(){function EnvironmentService(){_classCallCheck(this,EnvironmentService);_defineProperty(this,"environment",{cloud:false,apmUi:false,ml:false})}_createClass(EnvironmentService,[{key:"setup",value:function setup(){var _this=this;return{update:function update(_update){_this.environment=Object.assign({},_this.environment,_update)}}}},{key:"getEnvironment",value:function getEnvironment(){return this.environment}}]);return EnvironmentService}();exports.EnvironmentService=EnvironmentService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TutorialService",{enumerable:true,get:function get(){return _tutorial_service.TutorialService}});Object.defineProperty(exports,"TutorialVariables",{enumerable:true,get:function get(){return _tutorial_service.TutorialVariables}});Object.defineProperty(exports,"TutorialServiceSetup",{enumerable:true,get:function get(){return _tutorial_service.TutorialServiceSetup}});var _tutorial_service=__webpack_require__(107)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TutorialService=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TutorialService=function(){function TutorialService(){_classCallCheck(this,TutorialService);_defineProperty(this,"tutorialVariables",{})}_createClass(TutorialService,[{key:"setup",value:function setup(){var _this=this;return{setVariable:function setVariable(key,value){if(_this.tutorialVariables[key]){throw new Error("variable already set")}_this.tutorialVariables[key]=value}}}},{key:"getVariables",value:function getVariables(){return this.tutorialVariables}}]);return TutorialService}();exports.TutorialService=TutorialService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SessionExpired",{enumerable:true,get:function get(){return _session_expired.SessionExpired}});Object.defineProperty(exports,"SessionTimeout",{enumerable:true,get:function get(){return _session_timeout.SessionTimeout}});Object.defineProperty(exports,"ISessionTimeout",{enumerable:true,get:function get(){return _session_timeout.ISessionTimeout}});Object.defineProperty(exports,"SessionTimeoutHttpInterceptor",{enumerable:true,get:function get(){return _session_timeout_http_interceptor.SessionTimeoutHttpInterceptor}});Object.defineProperty(exports,"UnauthorizedResponseHttpInterceptor",{enumerable:true,get:function get(){return _unauthorized_response_http_interceptor.UnauthorizedResponseHttpInterceptor}});var _session_expired=__webpack_require__(109);var _session_timeout=__webpack_require__(110);var _session_timeout_http_interceptor=__webpack_require__(127);var _unauthorized_response_http_interceptor=__webpack_require__(128)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SessionExpired=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var getNextParameter=function getNextParameter(){var _window=window,location=_window.location;var next=encodeURIComponent("".concat(location.pathname).concat(location.search).concat(location.hash));return"&next=".concat(next)};var getProviderParameter=function getProviderParameter(tenant){var key="".concat(tenant,"/session_provider");var providerName=sessionStorage.getItem(key);return providerName?"&provider=".concat(encodeURIComponent(providerName)):""};var SessionExpired=function(){function SessionExpired(logoutUrl,tenant){_classCallCheck(this,SessionExpired);this.logoutUrl=logoutUrl;this.tenant=tenant}_createClass(SessionExpired,[{key:"logout",value:function logout(){var next=getNextParameter();var provider=getProviderParameter(this.tenant);window.location.assign("".concat(this.logoutUrl,"?msg=SESSION_EXPIRED").concat(next).concat(provider))}}]);return SessionExpired}();exports.SessionExpired=SessionExpired},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SessionTimeout=void 0;var _broadcastChannel=__webpack_require__(111);var _session_idle_timeout_warning=__webpack_require__(125);var _session_lifespan_warning=__webpack_require__(126);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var GRACE_PERIOD_MS=5*1e3;var WARNING_MS=60*1e3;var SESSION_CHECK_MS=1e3;var SESSION_ROUTE="/internal/security/session";var SessionTimeout=function(){function SessionTimeout(notifications,sessionExpired,http,tenant){var _this=this;_classCallCheck(this,SessionTimeout);this.notifications=notifications;this.sessionExpired=sessionExpired;this.http=http;this.tenant=tenant;_defineProperty(this,"channel",void 0);_defineProperty(this,"sessionInfo",void 0);_defineProperty(this,"fetchTimer",void 0);_defineProperty(this,"warningTimer",void 0);_defineProperty(this,"expirationTimer",void 0);_defineProperty(this,"warningToast",void 0);_defineProperty(this,"fetchSessionInfoAndResetTimers",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var extend,method,result,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:extend=_args.length>0&&_args[0]!==undefined?_args[0]:false;method=extend?"POST":"GET";_context.prev=2;_context.next=5;return _this.http.fetch(SESSION_ROUTE,{method:method,asSystemRequest:!extend});case 5:result=_context.sent;_this.handleSessionInfoAndResetTimers(result);if(_this.channel){_this.channel.postMessage(result)}_context.next=12;break;case 10:_context.prev=10;_context.t0=_context["catch"](2);case 12:case"end":return _context.stop()}}}),_callee,null,[[2,10]])})));return function(){return _ref.apply(this,arguments)}}());_defineProperty(this,"handleSessionInfoAndResetTimers",(function(sessionInfo){_this.sessionInfo=sessionInfo;var key="".concat(_this.tenant,"/session_provider");sessionStorage.setItem(key,sessionInfo.provider);var _this$getTimeout=_this.getTimeout(),timeout=_this$getTimeout.timeout,isLifespanTimeout=_this$getTimeout.isLifespanTimeout;if(timeout==null){return}_this.cleanup();var timeoutVal=timeout-WARNING_MS-GRACE_PERIOD_MS-SESSION_CHECK_MS;if(timeoutVal>0&&!isLifespanTimeout){_this.fetchTimer=window.setTimeout(_this.fetchSessionInfoAndResetTimers,timeoutVal)}_this.warningTimer=window.setTimeout(_this.showWarning,Math.max(timeout-WARNING_MS-GRACE_PERIOD_MS,0));_this.expirationTimer=window.setTimeout((function(){return _this.sessionExpired.logout()}),Math.max(timeout-GRACE_PERIOD_MS,0))}));_defineProperty(this,"cleanup",(function(){if(_this.fetchTimer){window.clearTimeout(_this.fetchTimer)}if(_this.warningTimer){window.clearTimeout(_this.warningTimer)}if(_this.expirationTimer){window.clearTimeout(_this.expirationTimer)}if(_this.warningToast){_this.notifications.toasts.remove(_this.warningToast);_this.warningToast=undefined}}));_defineProperty(this,"getTimeout",(function(){var timeout=null;var isLifespanTimeout=false;if(_this.sessionInfo){var _this$sessionInfo=_this.sessionInfo,now=_this$sessionInfo.now,idleTimeoutExpiration=_this$sessionInfo.idleTimeoutExpiration,lifespanExpiration=_this$sessionInfo.lifespanExpiration;if(idleTimeoutExpiration){timeout=idleTimeoutExpiration-now}if(lifespanExpiration&&(idleTimeoutExpiration===null||lifespanExpiration<=idleTimeoutExpiration)){timeout=lifespanExpiration-now;isLifespanTimeout=true}}return{timeout:timeout,isLifespanTimeout:isLifespanTimeout}}));_defineProperty(this,"showWarning",(function(){var _this$getTimeout2=_this.getTimeout(),timeout=_this$getTimeout2.timeout,isLifespanTimeout=_this$getTimeout2.isLifespanTimeout;var toastLifeTimeMs=Math.min(timeout-GRACE_PERIOD_MS,WARNING_MS);var toast;if(!isLifespanTimeout){var refresh=function refresh(){return _this.fetchSessionInfoAndResetTimers(true)};toast=(0,_session_idle_timeout_warning.createToast)(toastLifeTimeMs,refresh)}else{toast=(0,_session_lifespan_warning.createToast)(toastLifeTimeMs)}_this.warningToast=_this.notifications.toasts.add(toast)}))}_createClass(SessionTimeout,[{key:"start",value:function start(){if(this.http.anonymousPaths.isAnonymous(window.location.pathname)){return}var name="".concat(this.tenant,"/session_timeout");this.channel=new _broadcastChannel.BroadcastChannel(name,{webWorkerSupport:false});this.channel.onmessage=this.handleSessionInfoAndResetTimers;return this.fetchSessionInfoAndResetTimers()}},{key:"stop",value:function stop(){if(this.channel){this.channel.close()}this.cleanup()}},{key:"extend",value:function extend(url){if(url.endsWith(SESSION_ROUTE)){return}var _this$getTimeout3=this.getTimeout(),isLifespanTimeout=_this$getTimeout3.isLifespanTimeout;if(this.warningToast&&!isLifespanTimeout){return this.fetchSessionInfoAndResetTimers()}}}]);return SessionTimeout}();exports.SessionTimeout=SessionTimeout},function(module,exports,__webpack_require__){"use strict";var _index=__webpack_require__(112);module.exports={BroadcastChannel:_index.BroadcastChannel,createLeaderElection:_index.createLeaderElection,clearNodeFolder:_index.clearNodeFolder,enforceOptions:_index.enforceOptions}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"BroadcastChannel",{enumerable:true,get:function get(){return _broadcastChannel.BroadcastChannel}});Object.defineProperty(exports,"clearNodeFolder",{enumerable:true,get:function get(){return _broadcastChannel.clearNodeFolder}});Object.defineProperty(exports,"enforceOptions",{enumerable:true,get:function get(){return _broadcastChannel.enforceOptions}});Object.defineProperty(exports,"createLeaderElection",{enumerable:true,get:function get(){return _leaderElection.createLeaderElection}});var _broadcastChannel=__webpack_require__(113);var _leaderElection=__webpack_require__(120)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.clearNodeFolder=clearNodeFolder;exports.enforceOptions=enforceOptions;exports.BroadcastChannel=void 0;var _util=__webpack_require__(11);var _methodChooser=__webpack_require__(114);var _options=__webpack_require__(23);var BroadcastChannel=function BroadcastChannel(name,options){this.name=name;if(ENFORCED_OPTIONS){options=ENFORCED_OPTIONS}this.options=(0,_options.fillOptionsWithDefaults)(options);this.method=(0,_methodChooser.chooseMethod)(this.options);this._iL=false;this._onML=null;this._addEL={message:[],internal:[]};this._befC=[];this._prepP=null;_prepareChannel(this)};exports.BroadcastChannel=BroadcastChannel;BroadcastChannel._pubkey=true;function clearNodeFolder(options){options=(0,_options.fillOptionsWithDefaults)(options);var method=(0,_methodChooser.chooseMethod)(options);if(method.type==="node"){return method.clearNodeFolder().then((function(){return true}))}else{return Promise.resolve(false)}}var ENFORCED_OPTIONS;function enforceOptions(options){ENFORCED_OPTIONS=options}BroadcastChannel.prototype={postMessage:function postMessage(msg){if(this.closed){throw new Error("BroadcastChannel.postMessage(): "+"Cannot post message after channel has closed")}return _post(this,"message",msg)},postInternal:function postInternal(msg){return _post(this,"internal",msg)},set onmessage(fn){var time=this.method.microSeconds();var listenObj={time:time,fn:fn};_removeListenerObject(this,"message",this._onML);if(fn&&typeof fn==="function"){this._onML=listenObj;_addListenerObject(this,"message",listenObj)}else{this._onML=null}},addEventListener:function addEventListener(type,fn){var time=this.method.microSeconds();var listenObj={time:time,fn:fn};_addListenerObject(this,type,listenObj)},removeEventListener:function removeEventListener(type,fn){var obj=this._addEL[type].find((function(obj){return obj.fn===fn}));_removeListenerObject(this,type,obj)},close:function close(){var _this=this;if(this.closed)return;this.closed=true;var awaitPrepare=this._prepP?this._prepP:Promise.resolve();this._onML=null;this._addEL.message=[];return awaitPrepare.then((function(){return Promise.all(_this._befC.map((function(fn){return fn()})))})).then((function(){return _this.method.close(_this._state)}))},get type(){return this.method.type}};function _post(broadcastChannel,type,msg){var time=broadcastChannel.method.microSeconds();var msgObj={time:time,type:type,data:msg};var awaitPrepare=broadcastChannel._prepP?broadcastChannel._prepP:Promise.resolve();return awaitPrepare.then((function(){return broadcastChannel.method.postMessage(broadcastChannel._state,msgObj)}))}function _prepareChannel(channel){var maybePromise=channel.method.create(channel.name,channel.options);if((0,_util.isPromise)(maybePromise)){channel._prepP=maybePromise;maybePromise.then((function(s){channel._state=s}))}else{channel._state=maybePromise}}function _hasMessageListeners(channel){if(channel._addEL.message.length>0)return true;if(channel._addEL.internal.length>0)return true;return false}function _addListenerObject(channel,type,obj){channel._addEL[type].push(obj);_startListening(channel)}function _removeListenerObject(channel,type,obj){channel._addEL[type]=channel._addEL[type].filter((function(o){return o!==obj}));_stopListening(channel)}function _startListening(channel){if(!channel._iL&&_hasMessageListeners(channel)){var listenerFn=function listenerFn(msgObj){channel._addEL[msgObj.type].forEach((function(obj){if(msgObj.time>=obj.time){obj.fn(msgObj.data)}}))};var time=channel.method.microSeconds();if(channel._prepP){channel._prepP.then((function(){channel._iL=true;channel.method.onMessage(channel._state,listenerFn,time)}))}else{channel._iL=true;channel.method.onMessage(channel._state,listenerFn,time)}}}function _stopListening(channel){if(channel._iL&&!_hasMessageListeners(channel)){channel._iL=false;var time=channel.method.microSeconds();channel.method.onMessage(channel._state,null,time)}}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(14);Object.defineProperty(exports,"__esModule",{value:true});exports.chooseMethod=chooseMethod;var _native=_interopRequireDefault(__webpack_require__(115));var _indexedDb=_interopRequireDefault(__webpack_require__(116));var _localstorage=_interopRequireDefault(__webpack_require__(117));var _simulate=_interopRequireDefault(__webpack_require__(118));var _util=__webpack_require__(11);var METHODS=[_native["default"],_indexedDb["default"],_localstorage["default"]];if(_util.isNode){var NodeMethod=__webpack_require__(119);if(typeof NodeMethod.canBeUsed==="function"){METHODS.push(NodeMethod)}}function chooseMethod(options){var chooseMethods=[].concat(options.methods,METHODS).filter(Boolean);if(options.type){if(options.type==="simulate"){return _simulate["default"]}var ret=chooseMethods.find((function(m){return m.type===options.type}));if(!ret)throw new Error("method-type "+options.type+" not found");else return ret}if(!options.webWorkerSupport&&!_util.isNode){chooseMethods=chooseMethods.filter((function(m){return m.type!=="idb"}))}var useMethod=chooseMethods.find((function(method){return method.canBeUsed()}));if(!useMethod)throw new Error("No useable methode found:"+JSON.stringify(METHODS.map((function(m){return m.type}))));else return useMethod}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.create=create;exports.close=close;exports.postMessage=postMessage;exports.onMessage=onMessage;exports.canBeUsed=canBeUsed;exports.averageResponseTime=averageResponseTime;exports["default"]=exports.type=exports.microSeconds=void 0;var _util=__webpack_require__(11);var microSeconds=_util.microSeconds;exports.microSeconds=microSeconds;var type="native";exports.type=type;function create(channelName){var state={messagesCallback:null,bc:new BroadcastChannel(channelName),subFns:[]};state.bc.onmessage=function(msg){if(state.messagesCallback){state.messagesCallback(msg.data)}};return state}function close(channelState){channelState.bc.close();channelState.subFns=[]}function postMessage(channelState,messageJson){channelState.bc.postMessage(messageJson,false)}function onMessage(channelState,fn){channelState.messagesCallback=fn}function canBeUsed(){if(_util.isNode&&typeof window==="undefined")return false;if(typeof BroadcastChannel==="function"){if(BroadcastChannel._pubkey){throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill")}return true}else return false}function averageResponseTime(){return 150}var _default={create:create,close:close,onMessage:onMessage,postMessage:postMessage,canBeUsed:canBeUsed,type:type,averageResponseTime:averageResponseTime,microSeconds:microSeconds};exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(14);Object.defineProperty(exports,"__esModule",{value:true});exports.getIdb=getIdb;exports.createDatabase=createDatabase;exports.writeMessage=writeMessage;exports.getAllMessages=getAllMessages;exports.getMessagesHigherThen=getMessagesHigherThen;exports.removeMessageById=removeMessageById;exports.getOldMessages=getOldMessages;exports.cleanOldMessages=cleanOldMessages;exports.create=create;exports.close=close;exports.postMessage=postMessage;exports.onMessage=onMessage;exports.canBeUsed=canBeUsed;exports.averageResponseTime=averageResponseTime;exports["default"]=exports.type=exports.microSeconds=void 0;var _util=__webpack_require__(11);var _obliviousSet=_interopRequireDefault(__webpack_require__(41));var _options=__webpack_require__(23);var microSeconds=_util.microSeconds;exports.microSeconds=microSeconds;var DB_PREFIX="pubkey.broadcast-channel-0-";var OBJECT_STORE_ID="messages";var type="idb";exports.type=type;function getIdb(){if(typeof indexedDB!=="undefined")return indexedDB;if(typeof window.mozIndexedDB!=="undefined")return window.mozIndexedDB;if(typeof window.webkitIndexedDB!=="undefined")return window.webkitIndexedDB;if(typeof window.msIndexedDB!=="undefined")return window.msIndexedDB;return false}function createDatabase(channelName){var IndexedDB=getIdb();var dbName=DB_PREFIX+channelName;var openRequest=IndexedDB.open(dbName,1);openRequest.onupgradeneeded=function(ev){var db=ev.target.result;db.createObjectStore(OBJECT_STORE_ID,{keyPath:"id",autoIncrement:true})};var dbPromise=new Promise((function(res,rej){openRequest.onerror=function(ev){return rej(ev)};openRequest.onsuccess=function(){res(openRequest.result)}}));return dbPromise}function writeMessage(db,readerUuid,messageJson){var time=(new Date).getTime();var writeObject={uuid:readerUuid,time:time,data:messageJson};var transaction=db.transaction([OBJECT_STORE_ID],"readwrite");return new Promise((function(res,rej){transaction.oncomplete=function(){return res()};transaction.onerror=function(ev){return rej(ev)};var objectStore=transaction.objectStore(OBJECT_STORE_ID);objectStore.add(writeObject)}))}function getAllMessages(db){var objectStore=db.transaction(OBJECT_STORE_ID).objectStore(OBJECT_STORE_ID);var ret=[];return new Promise((function(res){objectStore.openCursor().onsuccess=function(ev){var cursor=ev.target.result;if(cursor){ret.push(cursor.value);cursor["continue"]()}else{res(ret)}}}))}function getMessagesHigherThen(db,lastCursorId){var objectStore=db.transaction(OBJECT_STORE_ID).objectStore(OBJECT_STORE_ID);var ret=[];var keyRangeValue=IDBKeyRange.bound(lastCursorId+1,Infinity);return new Promise((function(res){objectStore.openCursor(keyRangeValue).onsuccess=function(ev){var cursor=ev.target.result;if(cursor){ret.push(cursor.value);cursor["continue"]()}else{res(ret)}}}))}function removeMessageById(db,id){var request=db.transaction([OBJECT_STORE_ID],"readwrite").objectStore(OBJECT_STORE_ID)["delete"](id);return new Promise((function(res){request.onsuccess=function(){return res()}}))}function getOldMessages(db,ttl){var olderThen=(new Date).getTime()-ttl;var objectStore=db.transaction(OBJECT_STORE_ID).objectStore(OBJECT_STORE_ID);var ret=[];return new Promise((function(res){objectStore.openCursor().onsuccess=function(ev){var cursor=ev.target.result;if(cursor){var msgObk=cursor.value;if(msgObk.time<olderThen){ret.push(msgObk);cursor["continue"]()}else{res(ret);return}}else{res(ret)}}}))}function cleanOldMessages(db,ttl){return getOldMessages(db,ttl).then((function(tooOld){return Promise.all(tooOld.map((function(msgObj){return removeMessageById(db,msgObj.id)})))}))}function create(channelName,options){options=(0,_options.fillOptionsWithDefaults)(options);return createDatabase(channelName).then((function(db){var state={closed:false,lastCursorId:0,channelName:channelName,options:options,uuid:(0,_util.randomToken)(),eMIs:new _obliviousSet["default"](options.idb.ttl*2),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:db};_readLoop(state);return state}))}function _readLoop(state){if(state.closed)return;return readNewMessages(state).then((function(){return(0,_util.sleep)(state.options.idb.fallbackInterval)})).then((function(){return _readLoop(state)}))}function _filterMessage(msgObj,state){if(msgObj.uuid===state.uuid)return false;if(state.eMIs.has(msgObj.id))return false;if(msgObj.data.time<state.messagesCallbackTime)return false;return true}function readNewMessages(state){if(state.closed)return Promise.resolve();if(!state.messagesCallback)return Promise.resolve();return getMessagesHigherThen(state.db,state.lastCursorId).then((function(newerMessages){var useMessages=newerMessages.filter((function(msgObj){return!!msgObj})).map((function(msgObj){if(msgObj.id>state.lastCursorId){state.lastCursorId=msgObj.id}return msgObj})).filter((function(msgObj){return _filterMessage(msgObj,state)})).sort((function(msgObjA,msgObjB){return msgObjA.time-msgObjB.time}));useMessages.forEach((function(msgObj){if(state.messagesCallback){state.eMIs.add(msgObj.id);state.messagesCallback(msgObj.data)}}));return Promise.resolve()}))}function close(channelState){channelState.closed=true;channelState.db.close()}function postMessage(channelState,messageJson){channelState.writeBlockPromise=channelState.writeBlockPromise.then((function(){return writeMessage(channelState.db,channelState.uuid,messageJson)})).then((function(){if((0,_util.randomInt)(0,10)===0){cleanOldMessages(channelState.db,channelState.options.idb.ttl)}}));return channelState.writeBlockPromise}function onMessage(channelState,fn,time){channelState.messagesCallbackTime=time;channelState.messagesCallback=fn;readNewMessages(channelState)}function canBeUsed(){if(_util.isNode)return false;var idb=getIdb();if(!idb)return false;return true}function averageResponseTime(options){return options.idb.fallbackInterval*2}var _default={create:create,close:close,onMessage:onMessage,postMessage:postMessage,canBeUsed:canBeUsed,type:type,averageResponseTime:averageResponseTime,microSeconds:microSeconds};exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(14);Object.defineProperty(exports,"__esModule",{value:true});exports.getLocalStorage=getLocalStorage;exports.storageKey=storageKey;exports.postMessage=postMessage;exports.addStorageEventListener=addStorageEventListener;exports.removeStorageEventListener=removeStorageEventListener;exports.create=create;exports.close=close;exports.onMessage=onMessage;exports.canBeUsed=canBeUsed;exports.averageResponseTime=averageResponseTime;exports["default"]=exports.type=exports.microSeconds=void 0;var _obliviousSet=_interopRequireDefault(__webpack_require__(41));var _options=__webpack_require__(23);var _util=__webpack_require__(11);var microSeconds=_util.microSeconds;exports.microSeconds=microSeconds;var KEY_PREFIX="pubkey.broadcastChannel-";var type="localstorage";exports.type=type;function getLocalStorage(){var localStorage;if(typeof window==="undefined")return null;try{localStorage=window.localStorage;localStorage=window["ie8-eventlistener/storage"]||window.localStorage}catch(e){}return localStorage}function storageKey(channelName){return KEY_PREFIX+channelName}function postMessage(channelState,messageJson){return new Promise((function(res){(0,_util.sleep)().then((function(){var key=storageKey(channelState.channelName);var writeObj={token:(0,_util.randomToken)(),time:(new Date).getTime(),data:messageJson,uuid:channelState.uuid};var value=JSON.stringify(writeObj);getLocalStorage().setItem(key,value);var ev=document.createEvent("Event");ev.initEvent("storage",true,true);ev.key=key;ev.newValue=value;window.dispatchEvent(ev);res()}))}))}function addStorageEventListener(channelName,fn){var key=storageKey(channelName);var listener=function listener(ev){if(ev.key===key){fn(JSON.parse(ev.newValue))}};window.addEventListener("storage",listener);return listener}function removeStorageEventListener(listener){window.removeEventListener("storage",listener)}function create(channelName,options){options=(0,_options.fillOptionsWithDefaults)(options);if(!canBeUsed()){throw new Error("BroadcastChannel: localstorage cannot be used")}var uuid=(0,_util.randomToken)();var eMIs=new _obliviousSet["default"](options.localstorage.removeTimeout);var state={channelName:channelName,uuid:uuid,eMIs:eMIs};state.listener=addStorageEventListener(channelName,(function(msgObj){if(!state.messagesCallback)return;if(msgObj.uuid===uuid)return;if(!msgObj.token||eMIs.has(msgObj.token))return;if(msgObj.data.time&&msgObj.data.time<state.messagesCallbackTime)return;eMIs.add(msgObj.token);state.messagesCallback(msgObj.data)}));return state}function close(channelState){removeStorageEventListener(channelState.listener)}function onMessage(channelState,fn,time){channelState.messagesCallbackTime=time;channelState.messagesCallback=fn}function canBeUsed(){if(_util.isNode)return false;var ls=getLocalStorage();if(!ls)return false;try{var key="__broadcastchannel_check";ls.setItem(key,"works");ls.removeItem(key)}catch(e){return false}return true}function averageResponseTime(){var defaultTime=120;var userAgent=navigator.userAgent.toLowerCase();if(userAgent.includes("safari")&&!userAgent.includes("chrome")){return defaultTime*2}return defaultTime}var _default={create:create,close:close,onMessage:onMessage,postMessage:postMessage,canBeUsed:canBeUsed,type:type,averageResponseTime:averageResponseTime,microSeconds:microSeconds};exports["default"]=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.create=create;exports.close=close;exports.postMessage=postMessage;exports.onMessage=onMessage;exports.canBeUsed=canBeUsed;exports.averageResponseTime=averageResponseTime;exports["default"]=exports.type=exports.microSeconds=void 0;var _util=__webpack_require__(11);var microSeconds=_util.microSeconds;exports.microSeconds=microSeconds;var type="simulate";exports.type=type;var SIMULATE_CHANNELS=new Set;function create(channelName){var state={name:channelName,messagesCallback:null};SIMULATE_CHANNELS.add(state);return state}function close(channelState){SIMULATE_CHANNELS["delete"](channelState)}function postMessage(channelState,messageJson){return new Promise((function(res){return setTimeout((function(){var channelArray=Array.from(SIMULATE_CHANNELS);channelArray.filter((function(channel){return channel.name===channelState.name})).filter((function(channel){return channel!==channelState})).filter((function(channel){return!!channel.messagesCallback})).forEach((function(channel){return channel.messagesCallback(messageJson)}));res()}),5)}))}function onMessage(channelState,fn){channelState.messagesCallback=fn}function canBeUsed(){return true}function averageResponseTime(){return 5}var _default={create:create,close:close,onMessage:onMessage,postMessage:postMessage,canBeUsed:canBeUsed,type:type,averageResponseTime:averageResponseTime,microSeconds:microSeconds};exports["default"]=_default},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(14);Object.defineProperty(exports,"__esModule",{value:true});exports.createLeaderElection=createLeaderElection;var _util=__webpack_require__(11);var _unload=_interopRequireDefault(__webpack_require__(121));var LeaderElection=function LeaderElection(channel,options){this._channel=channel;this._options=options;this.isLeader=false;this.isDead=false;this.token=(0,_util.randomToken)();this._isApl=false;this._reApply=false;this._unl=[];this._lstns=[];this._invs=[]};LeaderElection.prototype={applyOnce:function applyOnce(){var _this=this;if(this.isLeader)return Promise.resolve(false);if(this.isDead)return Promise.resolve(false);if(this._isApl){this._reApply=true;return Promise.resolve(false)}this._isApl=true;var stopCriteria=false;var recieved=[];var handleMessage=function handleMessage(msg){if(msg.context==="leader"&&msg.token!=_this.token){recieved.push(msg);if(msg.action==="apply"){if(msg.token>_this.token){stopCriteria=true}}if(msg.action==="tell"){stopCriteria=true}}};this._channel.addEventListener("internal",handleMessage);var ret=_sendMessage(this,"apply").then((function(){return(0,_util.sleep)(_this._options.responseTime)})).then((function(){if(stopCriteria)return Promise.reject(new Error);else return _sendMessage(_this,"apply")})).then((function(){return(0,_util.sleep)(_this._options.responseTime)})).then((function(){if(stopCriteria)return Promise.reject(new Error);else return _sendMessage(_this)})).then((function(){return _beLeader(_this)})).then((function(){return true}))["catch"]((function(){return false})).then((function(success){_this._channel.removeEventListener("internal",handleMessage);_this._isApl=false;if(!success&&_this._reApply){_this._reApply=false;return _this.applyOnce()}else return success}));return ret},awaitLeadership:function awaitLeadership(){if(!this._aLP){this._aLP=_awaitLeadershipOnce(this)}return this._aLP},die:function die(){var _this2=this;if(this.isDead)return;this.isDead=true;this._lstns.forEach((function(listener){return _this2._channel.removeEventListener("internal",listener)}));this._invs.forEach((function(interval){return clearInterval(interval)}));this._unl.forEach((function(uFn){uFn.remove()}));return _sendMessage(this,"death")}};function _awaitLeadershipOnce(leaderElector){if(leaderElector.isLeader)return Promise.resolve();return new Promise((function(res){var resolved=false;var finish=function finish(){if(resolved)return;resolved=true;clearInterval(interval);leaderElector._channel.removeEventListener("internal",whenDeathListener);res(true)};leaderElector.applyOnce().then((function(){if(leaderElector.isLeader)finish()}));var interval=setInterval((function(){leaderElector.applyOnce().then((function(){if(leaderElector.isLeader)finish()}))}),leaderElector._options.fallbackInterval);leaderElector._invs.push(interval);var whenDeathListener=function whenDeathListener(msg){if(msg.context==="leader"&&msg.action==="death"){leaderElector.applyOnce().then((function(){if(leaderElector.isLeader)finish()}))}};leaderElector._channel.addEventListener("internal",whenDeathListener);leaderElector._lstns.push(whenDeathListener)}))}function _sendMessage(leaderElector,action){var msgJson={context:"leader",action:action,token:leaderElector.token};return leaderElector._channel.postInternal(msgJson)}function _beLeader(leaderElector){leaderElector.isLeader=true;var unloadFn=_unload["default"].add((function(){return leaderElector.die()}));leaderElector._unl.push(unloadFn);var isLeaderListener=function isLeaderListener(msg){if(msg.context==="leader"&&msg.action==="apply"){_sendMessage(leaderElector,"tell")}};leaderElector._channel.addEventListener("internal",isLeaderListener);leaderElector._lstns.push(isLeaderListener);return _sendMessage(leaderElector,"tell")}function fillOptionsWithDefaults(options,channel){if(!options)options={};options=JSON.parse(JSON.stringify(options));if(!options.fallbackInterval){options.fallbackInterval=3e3}if(!options.responseTime){options.responseTime=channel.method.averageResponseTime(channel.options)}return options}function createLeaderElection(channel,options){if(channel._leaderElector){throw new Error("BroadcastChannel already has a leader-elector")}options=fillOptionsWithDefaults(options,channel);var elector=new LeaderElection(channel,options);channel._befC.push((function(){return elector.die()}));channel._leaderElector=elector;return elector}},function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(14);Object.defineProperty(exports,"__esModule",{value:true});exports.add=add;exports.runAll=runAll;exports.removeAll=removeAll;exports.getSize=getSize;exports["default"]=void 0;var _detectNode=_interopRequireDefault(__webpack_require__(122));var _browser=_interopRequireDefault(__webpack_require__(123));var _node=_interopRequireDefault(__webpack_require__(124));var USE_METHOD=_detectNode["default"]?_node["default"]:_browser["default"];var LISTENERS=new Set;var startedListening=false;function startListening(){if(startedListening)return;startedListening=true;USE_METHOD.add(runAll)}function add(fn){startListening();if(typeof fn!=="function")throw new Error("Listener is no function");LISTENERS.add(fn);var addReturn={remove:function remove(){return LISTENERS["delete"](fn)},run:function run(){LISTENERS["delete"](fn);return fn()}};return addReturn}function runAll(){var promises=[];LISTENERS.forEach((function(fn){promises.push(fn());LISTENERS["delete"](fn)}));return Promise.all(promises)}function removeAll(){LISTENERS.clear()}function getSize(){return LISTENERS.size}var _default={add:add,runAll:runAll,removeAll:removeAll,getSize:getSize};exports["default"]=_default},function(module,exports){module.exports=false},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;function add(fn){if(typeof WorkerGlobalScope==="function"&&self instanceof WorkerGlobalScope){}else{if(typeof window.addEventListener!=="function")return;window.addEventListener("beforeunload",(function(){fn()}),true);window.addEventListener("unload",(function(){fn()}),true)}}var _default={add:add};exports["default"]=_default},function(module,exports){},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createToast=exports.SessionIdleTimeoutWarning=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(3);var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);var _public=__webpack_require__(37);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SessionIdleTimeoutWarning=function SessionIdleTimeoutWarning(props){return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiProgress,{size:"xs",color:"danger",position:"absolute"}),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.components.sessionIdleTimeoutWarning.message",defaultMessage:"You will be logged out {timeout} due to inactivity. Click OK to resume.",values:{timeout:_react.default.createElement(_react2.FormattedRelative,{value:props.timeout,units:"second",updateInterval:1e3})}})),_react.default.createElement("div",{className:"eui-textRight"},_react.default.createElement(_eui.EuiButton,{size:"s",color:"warning",onClick:props.onRefreshSession,"data-test-subj":"refreshSessionButton"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.components.sessionIdleTimeoutWarning.okButtonText",defaultMessage:"OK"}))))};exports.SessionIdleTimeoutWarning=SessionIdleTimeoutWarning;var createToast=function createToast(toastLifeTimeMs,onRefreshSession){var timeout=toastLifeTimeMs+Date.now();return{color:"warning",text:(0,_public.toMountPoint)(_react.default.createElement(SessionIdleTimeoutWarning,{onRefreshSession:onRefreshSession,timeout:timeout})),title:_i18n.i18n.translate("xpack.security.components.sessionIdleTimeoutWarning.title",{defaultMessage:"Warning"}),iconType:"clock",toastLifeTimeMs:toastLifeTimeMs}};exports.createToast=createToast},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createToast=exports.SessionLifespanWarning=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(3);var _react2=__webpack_require__(2);var _eui=__webpack_require__(1);var _public=__webpack_require__(37);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SessionLifespanWarning=function SessionLifespanWarning(props){return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiProgress,{size:"xs",color:"danger",position:"absolute"}),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.components.sessionLifespanWarning.message",defaultMessage:"Your session will reach the maximum time limit {timeout}. You will need to log in again.",values:{timeout:_react.default.createElement(_react2.FormattedRelative,{value:props.timeout,units:"second",updateInterval:1e3})}})))};exports.SessionLifespanWarning=SessionLifespanWarning;var createToast=function createToast(toastLifeTimeMs){var timeout=toastLifeTimeMs+Date.now();return{color:"danger",text:(0,_public.toMountPoint)(_react.default.createElement(SessionLifespanWarning,{timeout:timeout})),title:_i18n.i18n.translate("xpack.security.components.sessionLifespanWarning.title",{defaultMessage:"Warning"}),iconType:"alert",toastLifeTimeMs:toastLifeTimeMs}};exports.createToast=createToast},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SessionTimeoutHttpInterceptor=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var SessionTimeoutHttpInterceptor=function(){function SessionTimeoutHttpInterceptor(sessionTimeout,anonymousPaths){_classCallCheck(this,SessionTimeoutHttpInterceptor);this.sessionTimeout=sessionTimeout;this.anonymousPaths=anonymousPaths}_createClass(SessionTimeoutHttpInterceptor,[{key:"response",value:function response(httpResponse){if(this.anonymousPaths.isAnonymous(window.location.pathname)){return}if(httpResponse.fetchOptions.asSystemRequest){return}this.sessionTimeout.extend(httpResponse.request.url)}},{key:"responseError",value:function responseError(httpErrorResponse){if(this.anonymousPaths.isAnonymous(window.location.pathname)){return}if(httpErrorResponse.fetchOptions.asSystemRequest){return}var response=httpErrorResponse.response;if(!response){return}this.sessionTimeout.extend(httpErrorResponse.request.url)}}]);return SessionTimeoutHttpInterceptor}();exports.SessionTimeoutHttpInterceptor=SessionTimeoutHttpInterceptor},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UnauthorizedResponseHttpInterceptor=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var UnauthorizedResponseHttpInterceptor=function(){function UnauthorizedResponseHttpInterceptor(sessionExpired,anonymousPaths){_classCallCheck(this,UnauthorizedResponseHttpInterceptor);this.sessionExpired=sessionExpired;this.anonymousPaths=anonymousPaths}_createClass(UnauthorizedResponseHttpInterceptor,[{key:"responseError",value:function responseError(httpErrorResponse,controller){if(this.anonymousPaths.isAnonymous(window.location.pathname)){return}if(httpErrorResponse.request.credentials==="omit"){return}var response=httpErrorResponse.response;if(!response){return}if(response.status===401){this.sessionExpired.logout();controller.halt()}}}]);return UnauthorizedResponseHttpInterceptor}();exports.UnauthorizedResponseHttpInterceptor=UnauthorizedResponseHttpInterceptor},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.SecurityLicenseService=void 0;var _operators=__webpack_require__(43);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SecurityLicenseService=function(){function SecurityLicenseService(){_classCallCheck(this,SecurityLicenseService);_defineProperty(this,"licenseSubscription",void 0)}_createClass(SecurityLicenseService,[{key:"setup",value:function setup(_ref){var _this=this;var license$=_ref.license$;var rawLicense;this.licenseSubscription=license$.subscribe((function(nextRawLicense){rawLicense=nextRawLicense}));return{license:Object.freeze({isEnabled:function isEnabled(){return _this.isSecurityEnabledFromRawLicense(rawLicense)},getFeatures:function getFeatures(){return _this.calculateFeaturesFromRawLicense(rawLicense)},features$:license$.pipe((0,_operators.map)((function(nextRawLicense){return _this.calculateFeaturesFromRawLicense(nextRawLicense)})))})}}},{key:"stop",value:function stop(){if(this.licenseSubscription){this.licenseSubscription.unsubscribe();this.licenseSubscription=undefined}}},{key:"isSecurityEnabledFromRawLicense",value:function isSecurityEnabledFromRawLicense(rawLicense){if(!rawLicense){return false}var securityFeature=rawLicense.getFeature("security");return securityFeature!==undefined&&securityFeature.isAvailable&&securityFeature.isEnabled}},{key:"calculateFeaturesFromRawLicense",value:function calculateFeaturesFromRawLicense(rawLicense){if(!(rawLicense===null||rawLicense===void 0?void 0:rawLicense.isAvailable)){return{showLogin:true,allowLogin:false,showLinks:false,showRoleMappingsManagement:false,allowRoleDocumentLevelSecurity:false,allowRoleFieldLevelSecurity:false,allowRbac:false,allowSubFeaturePrivileges:false,layout:rawLicense!==undefined&&!(rawLicense===null||rawLicense===void 0?void 0:rawLicense.isAvailable)?"error-xpack-unavailable":"error-es-unavailable"}}if(!this.isSecurityEnabledFromRawLicense(rawLicense)){return{showLogin:false,allowLogin:false,showLinks:false,showRoleMappingsManagement:false,allowRoleDocumentLevelSecurity:false,allowRoleFieldLevelSecurity:false,allowRbac:false,allowSubFeaturePrivileges:false}}var isLicenseGoldOrBetter=rawLicense.hasAtLeast("gold");var isLicensePlatinumOrBetter=rawLicense.hasAtLeast("platinum");return{showLogin:true,allowLogin:true,showLinks:true,showRoleMappingsManagement:isLicenseGoldOrBetter,allowSubFeaturePrivileges:isLicenseGoldOrBetter,allowRoleDocumentLevelSecurity:isLicensePlatinumOrBetter,allowRoleFieldLevelSecurity:isLicensePlatinumOrBetter,allowRbac:true}}}]);return SecurityLicenseService}();exports.SecurityLicenseService=SecurityLicenseService},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SecurityNavControlService",{enumerable:true,get:function get(){return _nav_control_service.SecurityNavControlService}});var _nav_control_service=__webpack_require__(132)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SecurityNavControlService=void 0;var _reactDom=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _nav_control_component=__webpack_require__(133);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SecurityNavControlService=function(){function SecurityNavControlService(){_classCallCheck(this,SecurityNavControlService);_defineProperty(this,"securityLicense",void 0);_defineProperty(this,"authc",void 0);_defineProperty(this,"logoutUrl",void 0);_defineProperty(this,"navControlRegistered",void 0);_defineProperty(this,"securityFeaturesSubscription",void 0)}_createClass(SecurityNavControlService,[{key:"setup",value:function setup(_ref){var securityLicense=_ref.securityLicense,authc=_ref.authc,logoutUrl=_ref.logoutUrl;this.securityLicense=securityLicense;this.authc=authc;this.logoutUrl=logoutUrl}},{key:"start",value:function start(_ref2){var _this=this;var core=_ref2.core;this.securityFeaturesSubscription=this.securityLicense.features$.subscribe((function(_ref3){var showLinks=_ref3.showLinks;var isAnonymousPath=core.http.anonymousPaths.isAnonymous(window.location.pathname);var shouldRegisterNavControl=!isAnonymousPath&&showLinks&&!_this.navControlRegistered;if(shouldRegisterNavControl){_this.registerSecurityNavControl(core)}}))}},{key:"stop",value:function stop(){if(this.securityFeaturesSubscription){this.securityFeaturesSubscription.unsubscribe();this.securityFeaturesSubscription=undefined}this.navControlRegistered=false}},{key:"registerSecurityNavControl",value:function registerSecurityNavControl(core){var _this2=this;var currentUserPromise=this.authc.getCurrentUser();core.chrome.navControls.registerRight({order:2e3,mount:function mount(el){var I18nContext=core.i18n.Context;var props={user:currentUserPromise,editProfileUrl:core.http.basePath.prepend("/security/account"),logoutUrl:_this2.logoutUrl};_reactDom.default.render(_react.default.createElement(I18nContext,null,_react.default.createElement(_nav_control_component.SecurityNavControl,props)),el);return function(){return _reactDom.default.unmountComponentAtNode(el)}}});this.navControlRegistered=true}}]);return SecurityNavControlService}();exports.SecurityNavControlService=SecurityNavControlService},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SecurityNavControl=void 0;var _i18n=__webpack_require__(3);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SecurityNavControl=function(_Component){_inherits(SecurityNavControl,_Component);function SecurityNavControl(props){var _this;_classCallCheck(this,SecurityNavControl);_this=_possibleConstructorReturn(this,_getPrototypeOf(SecurityNavControl).call(this,props));_defineProperty(_assertThisInitialized(_this),"onMenuButtonClick",(function(){if(!_this.state.authenticatedUser){return}_this.setState({isOpen:!_this.state.isOpen})}));_defineProperty(_assertThisInitialized(_this),"closeMenu",(function(){_this.setState({isOpen:false})}));_this.state={isOpen:false,authenticatedUser:null};props.user.then((function(authenticatedUser){_this.setState({authenticatedUser:authenticatedUser})}));return _this}_createClass(SecurityNavControl,[{key:"render",value:function render(){var _this$props=this.props,editProfileUrl=_this$props.editProfileUrl,logoutUrl=_this$props.logoutUrl;var authenticatedUser=this.state.authenticatedUser;var name=authenticatedUser&&(authenticatedUser.full_name||authenticatedUser.username)||"";var buttonContents=authenticatedUser?_react2.default.createElement(_eui.EuiAvatar,{name:name,size:"s"}):_react2.default.createElement(_eui.EuiLoadingSpinner,{size:"m"});var button=_react2.default.createElement(_eui.EuiHeaderSectionItemButton,{"aria-controls":"headerUserMenu","aria-expanded":this.state.isOpen,"aria-haspopup":"true","aria-label":_i18n.i18n.translate("xpack.security.navControlComponent.accountMenuAriaLabel",{defaultMessage:"Account menu"}),onClick:this.onMenuButtonClick,"data-test-subj":"userMenuButton"},buttonContents);return _react2.default.createElement(_eui.EuiPopover,{id:"headerUserMenu",ownFocus:true,button:button,isOpen:this.state.isOpen,anchorPosition:"downRight",repositionOnScroll:true,closePopover:this.closeMenu,panelPaddingSize:"none"},_react2.default.createElement("div",{style:{width:320},"data-test-subj":"userMenu"},_react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"m",className:"euiHeaderProfile",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiAvatar,{name:name,size:"xl"})),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",{className:"eui-textBreakWord"},name)),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiLink,{href:editProfileUrl,"data-test-subj":"profileLink"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.navControlComponent.editProfileLinkText",defaultMessage:"Edit profile"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiLink,{href:logoutUrl,"data-test-subj":"logoutLink"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.navControlComponent.logoutLinkText",defaultMessage:"Log out"}))))))))))}}]);return SecurityNavControl}(_react2.Component);exports.SecurityNavControl=SecurityNavControl},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AuthenticationService",{enumerable:true,get:function get(){return _authentication_service.AuthenticationService}});Object.defineProperty(exports,"AuthenticationServiceSetup",{enumerable:true,get:function get(){return _authentication_service.AuthenticationServiceSetup}});var _authentication_service=__webpack_require__(135)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AuthenticationService=void 0;var _login=__webpack_require__(136);var _logout=__webpack_require__(138);var _logged_out=__webpack_require__(140);var _overwritten_session=__webpack_require__(142);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var AuthenticationService=function(){function AuthenticationService(){_classCallCheck(this,AuthenticationService)}_createClass(AuthenticationService,[{key:"setup",value:function setup(_ref){var application=_ref.application,config=_ref.config,getStartServices=_ref.getStartServices,http=_ref.http;var getCurrentUser=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return http.get("/internal/security/me",{asSystemRequest:true});case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}}),_callee)})));return function getCurrentUser(){return _ref2.apply(this,arguments)}}();_login.loginApp.create({application:application,config:config,getStartServices:getStartServices,http:http});_logout.logoutApp.create({application:application,http:http});_logged_out.loggedOutApp.create({application:application,getStartServices:getStartServices,http:http});_overwritten_session.overwrittenSessionApp.create({application:application,authc:{getCurrentUser:getCurrentUser},getStartServices:getStartServices});return{getCurrentUser:getCurrentUser}}}]);return AuthenticationService}();exports.AuthenticationService=AuthenticationService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"loginApp",{enumerable:true,get:function get(){return _login_app.loginApp}});var _login_app=__webpack_require__(137)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.loginApp=void 0;var _i18n=__webpack_require__(3);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var loginApp=Object.freeze({id:"security_login",create:function create(_ref){var application=_ref.application,http=_ref.http,getStartServices=_ref.getStartServices,config=_ref.config;http.anonymousPaths.register("/login");application.register({id:this.id,title:_i18n.i18n.translate("xpack.security.loginAppTitle",{defaultMessage:"Login"}),chromeless:true,appRoute:"/login",mount:function mount(_ref2){var element=_ref2.element;return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _ref3,_ref4,_ref4$,coreStart,renderLoginPage;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([getStartServices(),Promise.all([__webpack_require__.e(1),__webpack_require__.e(4)]).then(__webpack_require__.t.bind(null,350,7))]);case 2:_ref3=_context.sent;_ref4=_slicedToArray(_ref3,2);_ref4$=_slicedToArray(_ref4[0],1);coreStart=_ref4$[0];renderLoginPage=_ref4[1].renderLoginPage;return _context.abrupt("return",renderLoginPage(coreStart.i18n,element,{http:coreStart.http,notifications:coreStart.notifications,fatalErrors:coreStart.fatalErrors,loginAssistanceMessage:config.loginAssistanceMessage}));case 8:case"end":return _context.stop()}}}),_callee)})))()}})}});exports.loginApp=loginApp},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"logoutApp",{enumerable:true,get:function get(){return _logout_app.logoutApp}});var _logout_app=__webpack_require__(139)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.logoutApp=void 0;var _i18n=__webpack_require__(3);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var logoutApp=Object.freeze({id:"security_logout",create:function create(_ref){var application=_ref.application,http=_ref.http;http.anonymousPaths.register("/logout");application.register({id:this.id,title:_i18n.i18n.translate("xpack.security.logoutAppTitle",{defaultMessage:"Logout"}),chromeless:true,appRoute:"/logout",mount:function mount(){return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:window.sessionStorage.clear();window.location.href=http.basePath.prepend("/api/security/logout".concat(window.location.search));return _context.abrupt("return",(function(){}));case 3:case"end":return _context.stop()}}}),_callee)})))()}})}});exports.logoutApp=logoutApp},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"loggedOutApp",{enumerable:true,get:function get(){return _logged_out_app.loggedOutApp}});var _logged_out_app=__webpack_require__(141)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.loggedOutApp=void 0;var _i18n=__webpack_require__(3);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var loggedOutApp=Object.freeze({id:"security_logged_out",create:function create(_ref){var application=_ref.application,http=_ref.http,getStartServices=_ref.getStartServices;http.anonymousPaths.register("/security/logged_out");application.register({id:this.id,title:_i18n.i18n.translate("xpack.security.loggedOutAppTitle",{defaultMessage:"Logged out"}),chromeless:true,appRoute:"/security/logged_out",mount:function mount(_ref2){var element=_ref2.element;return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _ref3,_ref4,_ref4$,coreStart,renderLoggedOutPage;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([getStartServices(),__webpack_require__.e(6).then(__webpack_require__.t.bind(null,351,7))]);case 2:_ref3=_context.sent;_ref4=_slicedToArray(_ref3,2);_ref4$=_slicedToArray(_ref4[0],1);coreStart=_ref4$[0];renderLoggedOutPage=_ref4[1].renderLoggedOutPage;return _context.abrupt("return",renderLoggedOutPage(coreStart.i18n,element,{basePath:coreStart.http.basePath}));case 8:case"end":return _context.stop()}}}),_callee)})))()}})}});exports.loggedOutApp=loggedOutApp},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"overwrittenSessionApp",{enumerable:true,get:function get(){return _overwritten_session_app.overwrittenSessionApp}});var _overwritten_session_app=__webpack_require__(143)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.overwrittenSessionApp=void 0;var _i18n=__webpack_require__(3);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var overwrittenSessionApp=Object.freeze({id:"security_overwritten_session",create:function create(_ref){var application=_ref.application,authc=_ref.authc,getStartServices=_ref.getStartServices;application.register({id:this.id,title:_i18n.i18n.translate("xpack.security.overwrittenSessionAppTitle",{defaultMessage:"Overwritten Session"}),chromeless:true,appRoute:"/security/overwritten_session",mount:function mount(_ref2){var element=_ref2.element;return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _ref3,_ref4,_ref4$,coreStart,renderOverwrittenSessionPage;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([getStartServices(),__webpack_require__.e(7).then(__webpack_require__.t.bind(null,352,7))]);case 2:_ref3=_context.sent;_ref4=_slicedToArray(_ref3,2);_ref4$=_slicedToArray(_ref4[0],1);coreStart=_ref4$[0];renderOverwrittenSessionPage=_ref4[1].renderOverwrittenSessionPage;return _context.abrupt("return",renderOverwrittenSessionPage(coreStart.i18n,element,{authc:authc,basePath:coreStart.http.basePath}));case 8:case"end":return _context.stop()}}}),_callee)})))()}})}});exports.overwrittenSessionApp=overwrittenSessionApp},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ManagementService=void 0;var _i18n=__webpack_require__(3);var _api_keys=__webpack_require__(145);var _role_mappings=__webpack_require__(161);var _roles=__webpack_require__(24);var _users=__webpack_require__(45);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ManagementService=function(){function ManagementService(){_classCallCheck(this,ManagementService);_defineProperty(this,"license",void 0);_defineProperty(this,"licenseFeaturesSubscription",void 0)}_createClass(ManagementService,[{key:"setup",value:function setup(_ref){var getStartServices=_ref.getStartServices,management=_ref.management,authc=_ref.authc,license=_ref.license,fatalErrors=_ref.fatalErrors;this.license=license;var securitySection=management.sections.register({id:"security",title:_i18n.i18n.translate("xpack.security.management.securityTitle",{defaultMessage:"Security"}),order:100,euiIconType:"securityApp"});securitySection.registerApp(_users.usersManagementApp.create({authc:authc,getStartServices:getStartServices}));securitySection.registerApp(_roles.rolesManagementApp.create({fatalErrors:fatalErrors,license:license,getStartServices:getStartServices}));securitySection.registerApp(_api_keys.apiKeysManagementApp.create({getStartServices:getStartServices}));securitySection.registerApp(_role_mappings.roleMappingsManagementApp.create({getStartServices:getStartServices}))}},{key:"start",value:function start(_ref2){var management=_ref2.management;this.licenseFeaturesSubscription=this.license.features$.subscribe(function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee(features){var securitySection,securityManagementAppsStatuses,_i,_securityManagementAp,_securityManagementAp2,app,enableStatus;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:securitySection=management.sections.getSection("security");securityManagementAppsStatuses=[[securitySection.getApp(_users.usersManagementApp.id),features.showLinks],[securitySection.getApp(_roles.rolesManagementApp.id),features.showLinks],[securitySection.getApp(_api_keys.apiKeysManagementApp.id),features.showLinks],[securitySection.getApp(_role_mappings.roleMappingsManagementApp.id),features.showLinks&&features.showRoleMappingsManagement]];_i=0,_securityManagementAp=securityManagementAppsStatuses;case 3:if(!(_i<_securityManagementAp.length)){_context.next=11;break}_securityManagementAp2=_slicedToArray(_securityManagementAp[_i],2),app=_securityManagementAp2[0],enableStatus=_securityManagementAp2[1];if(!(app.enabled===enableStatus)){_context.next=7;break}return _context.abrupt("continue",8);case 7:if(enableStatus){app.enable()}else{app.disable()}case 8:_i++;_context.next=3;break;case 11:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref3.apply(this,arguments)}}())}},{key:"stop",value:function stop(){if(this.licenseFeaturesSubscription){this.licenseFeaturesSubscription.unsubscribe();this.licenseFeaturesSubscription=undefined}}}]);return ManagementService}();exports.ManagementService=ManagementService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"apiKeysManagementApp",{enumerable:true,get:function get(){return _api_keys_management_app.apiKeysManagementApp}});var _api_keys_management_app=__webpack_require__(146)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.apiKeysManagementApp=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(10);var _i18n=__webpack_require__(3);var _api_keys_grid=__webpack_require__(147);var _api_keys_api_client=__webpack_require__(159);var _documentation_links=__webpack_require__(160);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var apiKeysManagementApp=Object.freeze({id:"api_keys",create:function create(_ref){var getStartServices=_ref.getStartServices;return{id:this.id,order:30,title:_i18n.i18n.translate("xpack.security.management.apiKeysTitle",{defaultMessage:"API Keys"}),mount:function mount(_ref2){var basePath=_ref2.basePath,element=_ref2.element,setBreadcrumbs=_ref2.setBreadcrumbs;return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _ref3,_ref4,_ref4$,docLinks,http,notifications,i18nStart;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getStartServices();case 2:_ref3=_context.sent;_ref4=_slicedToArray(_ref3,1);_ref4$=_ref4[0];docLinks=_ref4$.docLinks;http=_ref4$.http;notifications=_ref4$.notifications;i18nStart=_ref4$.i18n;setBreadcrumbs([{text:_i18n.i18n.translate("xpack.security.apiKeys.breadcrumb",{defaultMessage:"API Keys"}),href:"#".concat(basePath)}]);(0,_reactDom.render)(_react.default.createElement(i18nStart.Context,null,_react.default.createElement(_api_keys_grid.APIKeysGridPage,{notifications:notifications,docLinks:new _documentation_links.DocumentationLinksService(docLinks),apiKeysAPIClient:new _api_keys_api_client.APIKeysAPIClient(http)})),element);return _context.abrupt("return",(function(){(0,_reactDom.unmountComponentAtNode)(element)}));case 12:case"end":return _context.stop()}}}),_callee)})))()}}}});exports.apiKeysManagementApp=apiKeysManagementApp},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"APIKeysGridPage",{enumerable:true,get:function get(){return _api_keys_grid_page.APIKeysGridPage}});var _api_keys_grid_page=__webpack_require__(148)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.APIKeysGridPage=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react2=__webpack_require__(2);var _momentTimezone=_interopRequireDefault(__webpack_require__(86));var _lodash=_interopRequireDefault(__webpack_require__(4));var _section_loading=__webpack_require__(149);var _permission_denied=__webpack_require__(151);var _empty_prompt=__webpack_require__(153);var _not_enabled=__webpack_require__(155);var _invalidate_provider=__webpack_require__(157);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DATE_FORMAT="MMMM Do YYYY HH:mm:ss";var APIKeysGridPage=function(_Component){_inherits(APIKeysGridPage,_Component);function APIKeysGridPage(props){var _this;_classCallCheck(this,APIKeysGridPage);_this=_possibleConstructorReturn(this,_getPrototypeOf(APIKeysGridPage).call(this,props));_defineProperty(_assertThisInitialized(_this),"renderTable",(function(){var _this$state=_this.state,apiKeys=_this$state.apiKeys,selectedItems=_this$state.selectedItems,isLoadingTable=_this$state.isLoadingTable,isAdmin=_this$state.isAdmin;var message=isLoadingTable?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.apiKeys.table.apiKeysTableLoadingMessage",defaultMessage:"Loading API keys…"}):undefined;var sorting={sort:{field:"expiration",direction:"asc"}};var pagination={initialPageSize:20,pageSizeOptions:[10,20,50]};var selection={onSelectionChange:function onSelectionChange(newSelectedItems){_this.setState({selectedItems:newSelectedItems})}};var search={toolsLeft:selectedItems.length?_react.default.createElement(_invalidate_provider.InvalidateProvider,{isAdmin:isAdmin,notifications:_this.props.notifications,apiKeysAPIClient:_this.props.apiKeysAPIClient},(function(invalidateApiKeyPrompt){return _react.default.createElement(_eui.EuiButton,{onClick:function onClick(){return invalidateApiKeyPrompt(selectedItems.map((function(_ref){var name=_ref.name,id=_ref.id;return{name:name,id:id}})),_this.onApiKeysInvalidated)},color:"danger","data-test-subj":"bulkInvalidateActionButton"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.apiKeys.table.invalidateApiKeyButton",defaultMessage:"Invalidate {count, plural, one {API key} other {API keys}}",values:{count:selectedItems.length}}))})):undefined,toolsRight:_react.default.createElement(_eui.EuiButton,{color:"secondary",iconType:"refresh",onClick:function onClick(){return _this.reloadApiKeys()},"data-test-subj":"reloadButton"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.apiKeys.table.reloadApiKeysButton",defaultMessage:"Reload"})),box:{incremental:true},filters:isAdmin?[{type:"field_value_selection",field:"username",name:_i18n.i18n.translate("xpack.security.management.apiKeys.table.userFilterLabel",{defaultMessage:"User"}),multiSelect:false,options:Object.keys(apiKeys.reduce((function(apiKeysMap,apiKey){apiKeysMap[apiKey.username]=true;return apiKeysMap}),{})).map((function(username){return{value:username,view:username}}))},{type:"field_value_selection",field:"realm",name:_i18n.i18n.translate("xpack.security.management.apiKeys.table.realmFilterLabel",{defaultMessage:"Realm"}),multiSelect:false,options:Object.keys(apiKeys.reduce((function(apiKeysMap,apiKey){apiKeysMap[apiKey.realm]=true;return apiKeysMap}),{})).map((function(realm){return{value:realm,view:realm}}))}]:undefined};return _react.default.createElement(_react.default.Fragment,null,isAdmin?_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.apiKeys.table.adminText",defaultMessage:"You are an API Key administrator."}),color:"success",iconType:"user",size:"s","data-test-subj":"apiKeyAdminDescriptionCallOut"}),_react.default.createElement(_eui.EuiSpacer,{size:"m"})):undefined,_react.default.createElement(_eui.EuiInMemoryTable,{items:apiKeys,itemId:"id",columns:_this.getColumnConfig(),search:search,sorting:sorting,selection:selection,pagination:pagination,loading:isLoadingTable,message:message,isSelectable:true,rowProps:function rowProps(){return{"data-test-subj":"apiKeyRow"}}}))}));_defineProperty(_assertThisInitialized(_this),"getColumnConfig",(function(){var isAdmin=_this.state.isAdmin;var config=[{field:"name",name:_i18n.i18n.translate("xpack.security.management.apiKeys.table.nameColumnName",{defaultMessage:"Name"}),sortable:true}];if(isAdmin){config=config.concat([{field:"username",name:_i18n.i18n.translate("xpack.security.management.apiKeys.table.userNameColumnName",{defaultMessage:"User"}),sortable:true},{field:"realm",name:_i18n.i18n.translate("xpack.security.management.apiKeys.table.realmColumnName",{defaultMessage:"Realm"}),sortable:true}])}config=config.concat([{field:"creation",name:_i18n.i18n.translate("xpack.security.management.apiKeys.table.creationDateColumnName",{defaultMessage:"Created"}),sortable:true,render:function render(creationDateMs){return(0,_momentTimezone.default)(creationDateMs).format(DATE_FORMAT)}},{field:"expiration",name:_i18n.i18n.translate("xpack.security.management.apiKeys.table.expirationDateColumnName",{defaultMessage:"Expires"}),sortable:true,render:function render(expirationDateMs){if(expirationDateMs===undefined){return _react.default.createElement(_eui.EuiText,{color:"subdued"},_i18n.i18n.translate("xpack.security.management.apiKeys.table.expirationDateNeverMessage",{defaultMessage:"Never"}))}return(0,_momentTimezone.default)(expirationDateMs).format(DATE_FORMAT)}},{name:_i18n.i18n.translate("xpack.security.management.apiKeys.table.statusColumnName",{defaultMessage:"Status"}),render:function render(_ref2){var expiration=_ref2.expiration;var now=Date.now();if(now>expiration){return _react.default.createElement(_eui.EuiBadge,{color:"hollow"},"Expired")}return _react.default.createElement(_eui.EuiBadge,{color:"secondary"},"Active")}},{name:_i18n.i18n.translate("xpack.security.management.apiKeys.table.actionsColumnName",{defaultMessage:"Actions"}),actions:[{render:function render(_ref3){var name=_ref3.name,id=_ref3.id;return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_invalidate_provider.InvalidateProvider,{isAdmin:isAdmin,notifications:_this.props.notifications,apiKeysAPIClient:_this.props.apiKeysAPIClient},(function(invalidateApiKeyPrompt){return _react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.security.management.apiKeys.table.actionDeleteTooltip",{defaultMessage:"Invalidate"})},_react.default.createElement(_eui.EuiButtonIcon,{"aria-label":_i18n.i18n.translate("xpack.security.management.apiKeys.table.actionDeleteAriaLabel",{defaultMessage:"Invalidate '{name}'",values:{name:name}}),iconType:"minusInCircle",color:"danger","data-test-subj":"invalidateApiKeyButton",onClick:function onClick(){return invalidateApiKeyPrompt([{id:id,name:name}],_this.onApiKeysInvalidated)}}))}))))}}]}]);return config}));_defineProperty(_assertThisInitialized(_this),"onApiKeysInvalidated",(function(apiKeysInvalidated){if(apiKeysInvalidated.length){_this.reloadApiKeys()}}));_defineProperty(_assertThisInitialized(_this),"initiallyLoadApiKeys",(function(){_this.setState({isLoadingApp:true,isLoadingTable:false});_this.loadApiKeys()}));_defineProperty(_assertThisInitialized(_this),"reloadApiKeys",(function(){_this.setState({apiKeys:[],isLoadingApp:false,isLoadingTable:true});_this.loadApiKeys()}));_defineProperty(_assertThisInitialized(_this),"loadApiKeys",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var isAdmin,_ref5,apiKeys;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;isAdmin=_this.state.isAdmin;_context.next=4;return _this.props.apiKeysAPIClient.getApiKeys(isAdmin);case 4:_ref5=_context.sent;apiKeys=_ref5.apiKeys;_this.setState({apiKeys:apiKeys});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](0);_this.setState({error:_context.t0});case 12:_this.setState({isLoadingApp:false,isLoadingTable:false});case 13:case"end":return _context.stop()}}}),_callee,null,[[0,9]])}))));_this.state={isLoadingApp:true,isLoadingTable:false,isAdmin:false,areApiKeysEnabled:false,apiKeys:[],permissionDenied:false,selectedItems:[],error:undefined};return _this}_createClass(APIKeysGridPage,[{key:"componentDidMount",value:function componentDidMount(){this.checkPrivileges()}},{key:"render",value:function render(){var _this$state2=this.state,permissionDenied=_this$state2.permissionDenied,isLoadingApp=_this$state2.isLoadingApp,isLoadingTable=_this$state2.isLoadingTable,areApiKeysEnabled=_this$state2.areApiKeysEnabled,isAdmin=_this$state2.isAdmin,error=_this$state2.error,apiKeys=_this$state2.apiKeys;if(permissionDenied){return _react.default.createElement(_permission_denied.PermissionDenied,null)}if(isLoadingApp){return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_section_loading.SectionLoading,{"data-test-subj":"apiKeysSectionLoading"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.apiKeys.table.loadingApiKeysDescription",defaultMessage:"Loading API keys…"})))}if(error){var _error$body=error.body,errorTitle=_error$body.error,message=_error$body.message,statusCode=_error$body.statusCode;return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.apiKeys.table.loadingApiKeysErrorTitle",defaultMessage:"Error loading API keys"}),color:"danger",iconType:"alert","data-test-subj":"apiKeysError"},statusCode,": ",errorTitle," - ",message))}if(!areApiKeysEnabled){return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_not_enabled.NotEnabled,{docLinks:this.props.docLinks}))}if(!isLoadingTable&&apiKeys&&apiKeys.length===0){return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_empty_prompt.EmptyPrompt,{isAdmin:isAdmin,docLinks:this.props.docLinks}))}var description=_react.default.createElement(_eui.EuiText,{color:"subdued",size:"s","data-test-subj":"apiKeysDescriptionText"},_react.default.createElement("p",null,isAdmin?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.apiKeys.table.apiKeysAllDescription",defaultMessage:"View and invalidate API keys. An API key sends requests on behalf of a user."}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.apiKeys.table.apiKeysOwnDescription",defaultMessage:"View and invalidate your API keys. An API key sends requests on your behalf."})));return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_eui.EuiPageContentHeader,null,_react.default.createElement(_eui.EuiPageContentHeaderSection,null,_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.apiKeys.table.apiKeysTitle",defaultMessage:"API Keys"}))),description)),_react.default.createElement(_eui.EuiPageContentBody,null,this.renderTable()))}},{key:"checkPrivileges",value:function(){var _checkPrivileges=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _ref6,isAdmin,areApiKeysEnabled;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return this.props.apiKeysAPIClient.checkPrivileges();case 3:_ref6=_context2.sent;isAdmin=_ref6.isAdmin;areApiKeysEnabled=_ref6.areApiKeysEnabled;this.setState({isAdmin:isAdmin,areApiKeysEnabled:areApiKeysEnabled});if(areApiKeysEnabled){this.initiallyLoadApiKeys()}else{this.setState({isLoadingApp:false})}_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2["catch"](0);if(_lodash.default.get(_context2.t0,"body.statusCode")===403){this.setState({permissionDenied:true,isLoadingApp:false})}else{this.props.notifications.toasts.addDanger(_i18n.i18n.translate("xpack.security.management.apiKeys.table.fetchingApiKeysErrorMessage",{defaultMessage:"Error checking privileges: {message}",values:{message:_lodash.default.get(_context2.t0,"body.message","")}}))}case 13:case"end":return _context2.stop()}}}),_callee2,this,[[0,10]])})));function checkPrivileges(){return _checkPrivileges.apply(this,arguments)}return checkPrivileges}()}]);return APIKeysGridPage}(_react.Component);exports.APIKeysGridPage=APIKeysGridPage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SectionLoading",{enumerable:true,get:function get(){return _section_loading.SectionLoading}});var _section_loading=__webpack_require__(150)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SectionLoading=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var SectionLoading=function SectionLoading(_ref){var inline=_ref.inline,children=_ref.children,rest=_objectWithoutProperties(_ref,["inline","children"]);if(inline){return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexStart",alignItems:"center",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiLoadingSpinner,{size:"m"})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,rest,_react.default.createElement(_eui.EuiTextColor,{color:"subdued"},children))))}return _react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement(_eui.EuiLoadingSpinner,{size:"xl"}),body:_react.default.createElement(_eui.EuiText,{color:"subdued"},children),"data-test-subj":"sectionLoading"})};exports.SectionLoading=SectionLoading},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PermissionDenied",{enumerable:true,get:function get(){return _permission_denied.PermissionDenied}});var _permission_denied=__webpack_require__(152)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PermissionDenied=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _react2=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PermissionDenied=function PermissionDenied(){return _react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none"},_react2.default.createElement(_eui.EuiPageContent,{horizontalPosition:"center"},_react2.default.createElement(_eui.EuiEmptyPrompt,{iconType:"securityApp",title:_react2.default.createElement("h2",{"data-test-subj":"apiKeysPermissionDeniedMessage"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.apiKeys.deniedPermissionTitle",defaultMessage:"You need permission to manage API keys"})),body:_react2.default.createElement("p",{"data-test-subj":"permissionDeniedMessage"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.apiKeys.noPermissionToManageRolesDescription",defaultMessage:"Contact your system administrator."}))})))};exports.PermissionDenied=PermissionDenied},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"EmptyPrompt",{enumerable:true,get:function get(){return _empty_prompt.EmptyPrompt}});var _empty_prompt=__webpack_require__(154)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmptyPrompt=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var EmptyPrompt=function EmptyPrompt(_ref){var isAdmin=_ref.isAdmin,docLinks=_ref.docLinks;return _react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"managementApp",title:_react.default.createElement("h1",{"data-test-subj":"noApiKeysHeader"},isAdmin?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.apiKeys.table.emptyPromptAdminTitle",defaultMessage:"No API keys"}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.apiKeys.table.emptyPromptNonAdminTitle",defaultMessage:"You don't have any API keys"})),body:_react.default.createElement(_react.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.apiKeys.table.emptyPromptDescription",defaultMessage:"You can create an {link} from Console.",values:{link:_react.default.createElement(_eui.EuiLink,{href:"".concat(docLinks.getCreateApiKeyDocUrl()),target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.apiKeys.table.emptyPromptDocsLinkMessage",defaultMessage:"API key"}))}}))),actions:_react.default.createElement(_eui.EuiButton,{type:"primary",href:"#/dev_tools","data-test-subj":"goToConsoleButton"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.apiKeys.table.emptyPromptConsoleButtonMessage",defaultMessage:"Go to Console"})),"data-test-subj":"emptyPrompt"})};exports.EmptyPrompt=EmptyPrompt},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"NotEnabled",{enumerable:true,get:function get(){return _not_enabled.NotEnabled}});var _not_enabled=__webpack_require__(156)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NotEnabled=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var NotEnabled=function NotEnabled(_ref){var docLinks=_ref.docLinks;return _react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.apiKeys.table.apiKeysDisabledErrorTitle",defaultMessage:"API keys not enabled in Elasticsearch"}),color:"danger",iconType:"alert"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.apiKeys.table.apiKeysDisabledErrorDescription",defaultMessage:"Contact your system administrator and refer to the {link} to enable API keys.",values:{link:_react.default.createElement(_eui.EuiLink,{href:"".concat(docLinks.getApiKeyServiceSettingsDocUrl()),target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.apiKeys.table.apiKeysDisabledErrorLinkText",defaultMessage:"docs"}))}}))};exports.NotEnabled=NotEnabled},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"InvalidateProvider",{enumerable:true,get:function get(){return _invalidate_provider.InvalidateProvider}});var _invalidate_provider=__webpack_require__(158)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InvalidateProvider=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var InvalidateProvider=function InvalidateProvider(_ref){var isAdmin=_ref.isAdmin,children=_ref.children,notifications=_ref.notifications,apiKeysAPIClient=_ref.apiKeysAPIClient;var _useState=(0,_react.useState)([]),_useState2=_slicedToArray(_useState,2),apiKeys=_useState2[0],setApiKeys=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),isModalOpen=_useState4[0],setIsModalOpen=_useState4[1];var onSuccessCallback=(0,_react.useRef)(null);var invalidateApiKeyPrompt=function invalidateApiKeyPrompt(keys){var onSuccess=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){return undefined};if(!keys||!keys.length){throw new Error("No API key IDs specified for invalidation")}setIsModalOpen(true);setApiKeys(keys);onSuccessCallback.current=onSuccess};var closeModal=function closeModal(){setIsModalOpen(false);setApiKeys([])};var invalidateApiKey=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var result,error,errors,_result,itemsInvalidated,_result2,hasMultipleSuccesses,successMessage,hasMultipleErrors,errorMessage;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return apiKeysAPIClient.invalidateApiKeys(apiKeys,isAdmin);case 3:result=_context.sent;_context.next=9;break;case 6:_context.prev=6;_context.t0=_context["catch"](0);error=_context.t0;case 9:closeModal();if(result){_result=result,itemsInvalidated=_result.itemsInvalidated;_result2=result;errors=_result2.errors;if(itemsInvalidated&&itemsInvalidated.length){hasMultipleSuccesses=itemsInvalidated.length>1;successMessage=hasMultipleSuccesses?_i18n.i18n.translate("xpack.security.management.apiKeys.invalidateApiKey.successMultipleNotificationTitle",{defaultMessage:"Invalidated {count} API keys",values:{count:itemsInvalidated.length}}):_i18n.i18n.translate("xpack.security.management.apiKeys.invalidateApiKey.successSingleNotificationTitle",{defaultMessage:"Invalidated API key '{name}'",values:{name:itemsInvalidated[0].name}});notifications.toasts.addSuccess(successMessage);if(onSuccessCallback.current){onSuccessCallback.current(_toConsumableArray(itemsInvalidated))}}}if(error||errors&&errors.length){hasMultipleErrors=errors&&errors.length>1||error&&apiKeys.length>1;errorMessage=hasMultipleErrors?_i18n.i18n.translate("xpack.security.management.apiKeys.invalidateApiKey.errorMultipleNotificationTitle",{defaultMessage:"Error deleting {count} apiKeys",values:{count:errors&&errors.length||apiKeys.length}}):_i18n.i18n.translate("xpack.security.management.apiKeys.invalidateApiKey.errorSingleNotificationTitle",{defaultMessage:"Error deleting API key '{name}'",values:{name:errors&&errors[0].name||apiKeys[0].name}});notifications.toasts.addDanger(errorMessage)}case 12:case"end":return _context.stop()}}}),_callee,null,[[0,6]])})));return function invalidateApiKey(){return _ref2.apply(this,arguments)}}();var renderModal=function renderModal(){if(!isModalOpen){return null}var isSingle=apiKeys.length===1;return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:isSingle?_i18n.i18n.translate("xpack.security.management.apiKeys.invalidateApiKey.confirmModal.invalidateSingleTitle",{defaultMessage:"Invalidate API key '{name}'?",values:{name:apiKeys[0].name}}):_i18n.i18n.translate("xpack.security.management.apiKeys.invalidateApiKey.confirmModal.invalidateMultipleTitle",{defaultMessage:"Invalidate {count} API keys?",values:{count:apiKeys.length}}),onCancel:closeModal,onConfirm:invalidateApiKey,cancelButtonText:_i18n.i18n.translate("xpack.security.management.apiKeys.invalidateApiKey.confirmModal.cancelButtonLabel",{defaultMessage:"Cancel"}),confirmButtonText:_i18n.i18n.translate("xpack.security.management.apiKeys.invalidateApiKey.confirmModal.confirmButtonLabel",{defaultMessage:"Invalidate {count, plural, one {API key} other {API keys}}",values:{count:apiKeys.length}}),buttonColor:"danger","data-test-subj":"invalidateApiKeyConfirmationModal"},!isSingle?_react.default.createElement(_react.Fragment,null,_react.default.createElement("p",null,_i18n.i18n.translate("xpack.security.management.apiKeys.invalidateApiKey.confirmModal.invalidateMultipleListDescription",{defaultMessage:"You are about to invalidate these API keys:"})),_react.default.createElement("ul",null,apiKeys.map((function(_ref3){var name=_ref3.name,id=_ref3.id;return _react.default.createElement("li",{key:id},name)})))):null))};return _react.default.createElement(_react.Fragment,null,children(invalidateApiKeyPrompt),renderModal())};exports.InvalidateProvider=InvalidateProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.APIKeysAPIClient=void 0;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var apiKeysUrl="/internal/security/api_key";var APIKeysAPIClient=function(){function APIKeysAPIClient(http){_classCallCheck(this,APIKeysAPIClient);this.http=http}_createClass(APIKeysAPIClient,[{key:"checkPrivileges",value:function(){var _checkPrivileges=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.http.get("".concat(apiKeysUrl,"/privileges"));case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}}),_callee,this)})));function checkPrivileges(){return _checkPrivileges.apply(this,arguments)}return checkPrivileges}()},{key:"getApiKeys",value:function(){var _getApiKeys=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var isAdmin,_args2=arguments;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:isAdmin=_args2.length>0&&_args2[0]!==undefined?_args2[0]:false;_context2.next=3;return this.http.get(apiKeysUrl,{query:{isAdmin:isAdmin}});case 3:return _context2.abrupt("return",_context2.sent);case 4:case"end":return _context2.stop()}}}),_callee2,this)})));function getApiKeys(){return _getApiKeys.apply(this,arguments)}return getApiKeys}()},{key:"invalidateApiKeys",value:function(){var _invalidateApiKeys=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(apiKeys){var isAdmin,_args3=arguments;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:isAdmin=_args3.length>1&&_args3[1]!==undefined?_args3[1]:false;_context3.next=3;return this.http.post("".concat(apiKeysUrl,"/invalidate"),{body:JSON.stringify({apiKeys:apiKeys,isAdmin:isAdmin})});case 3:return _context3.abrupt("return",_context3.sent);case 4:case"end":return _context3.stop()}}}),_callee3,this)})));function invalidateApiKeys(_x){return _invalidateApiKeys.apply(this,arguments)}return invalidateApiKeys}()}]);return APIKeysAPIClient}();exports.APIKeysAPIClient=APIKeysAPIClient},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocumentationLinksService=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DocumentationLinksService=function(){function DocumentationLinksService(docLinks){_classCallCheck(this,DocumentationLinksService);_defineProperty(this,"esDocBasePath",void 0);this.esDocBasePath="".concat(docLinks.ELASTIC_WEBSITE_URL,"guide/en/elasticsearch/reference/").concat(docLinks.DOC_LINK_VERSION,"/")}_createClass(DocumentationLinksService,[{key:"getApiKeyServiceSettingsDocUrl",value:function getApiKeyServiceSettingsDocUrl(){return"".concat(this.esDocBasePath,"security-settings.html#api-key-service-settings")}},{key:"getCreateApiKeyDocUrl",value:function getCreateApiKeyDocUrl(){return"".concat(this.esDocBasePath,"security-api-create-api-key.html")}}]);return DocumentationLinksService}();exports.DocumentationLinksService=DocumentationLinksService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"roleMappingsManagementApp",{enumerable:true,get:function get(){return _role_mappings_management_app.roleMappingsManagementApp}});var _role_mappings_management_app=__webpack_require__(162)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.roleMappingsManagementApp=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(10);var _reactRouterDom=__webpack_require__(16);var _i18n=__webpack_require__(3);var _roles=__webpack_require__(24);var _role_mappings_api_client=__webpack_require__(309);var _documentation_links=__webpack_require__(310);var _role_mappings_grid=__webpack_require__(311);var _edit_role_mapping=__webpack_require__(325);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var roleMappingsManagementApp=Object.freeze({id:"role_mappings",create:function create(_ref){var getStartServices=_ref.getStartServices;return{id:this.id,order:40,title:_i18n.i18n.translate("xpack.security.management.roleMappingsTitle",{defaultMessage:"Role Mappings"}),mount:function mount(_ref2){var basePath=_ref2.basePath,element=_ref2.element,setBreadcrumbs=_ref2.setBreadcrumbs;return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _ref3,_ref4,_ref4$,docLinks,http,notifications,i18nStart,roleMappingsBreadcrumbs,roleMappingsAPIClient,dockLinksService,RoleMappingsGridPageWithBreadcrumbs,EditRoleMappingsPageWithBreadcrumbs;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getStartServices();case 2:_ref3=_context.sent;_ref4=_slicedToArray(_ref3,1);_ref4$=_ref4[0];docLinks=_ref4$.docLinks;http=_ref4$.http;notifications=_ref4$.notifications;i18nStart=_ref4$.i18n;roleMappingsBreadcrumbs=[{text:_i18n.i18n.translate("xpack.security.roleMapping.breadcrumb",{defaultMessage:"Role Mappings"}),href:"#".concat(basePath)}];roleMappingsAPIClient=new _role_mappings_api_client.RoleMappingsAPIClient(http);dockLinksService=new _documentation_links.DocumentationLinksService(docLinks);RoleMappingsGridPageWithBreadcrumbs=function RoleMappingsGridPageWithBreadcrumbs(){setBreadcrumbs(roleMappingsBreadcrumbs);return _react.default.createElement(_role_mappings_grid.RoleMappingsGridPage,{notifications:notifications,rolesAPIClient:new _roles.RolesAPIClient(http),roleMappingsAPI:roleMappingsAPIClient,docLinks:dockLinksService})};EditRoleMappingsPageWithBreadcrumbs=function EditRoleMappingsPageWithBreadcrumbs(){var _useParams=(0,_reactRouterDom.useParams)(),name=_useParams.name;setBreadcrumbs([].concat(roleMappingsBreadcrumbs,[name?{text:name,href:"#".concat(basePath,"/edit/").concat(encodeURIComponent(name))}:{text:_i18n.i18n.translate("xpack.security.roleMappings.createBreadcrumb",{defaultMessage:"Create"})}]));return _react.default.createElement(_edit_role_mapping.EditRoleMappingPage,{name:name,roleMappingsAPI:roleMappingsAPIClient,rolesAPIClient:new _roles.RolesAPIClient(http),notifications:notifications,docLinks:dockLinksService})};(0,_reactDom.render)(_react.default.createElement(i18nStart.Context,null,_react.default.createElement(_reactRouterDom.HashRouter,{basename:basePath},_react.default.createElement(_reactRouterDom.Switch,null,_react.default.createElement(_reactRouterDom.Route,{path:"/",exact:true},_react.default.createElement(RoleMappingsGridPageWithBreadcrumbs,null)),_react.default.createElement(_reactRouterDom.Route,{path:"/edit/:name?"},_react.default.createElement(EditRoleMappingsPageWithBreadcrumbs,null))))),element);return _context.abrupt("return",(function(){(0,_reactDom.unmountComponentAtNode)(element)}));case 16:case"end":return _context.stop()}}}),_callee)})))()}}}});exports.roleMappingsManagementApp=roleMappingsManagementApp},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.rolesManagementApp=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(10);var _reactRouterDom=__webpack_require__(16);var _i18n=__webpack_require__(3);var _users=__webpack_require__(45);var _roles_api_client=__webpack_require__(49);var _roles_grid=__webpack_require__(189);var _edit_role=__webpack_require__(195);var _documentation_links=__webpack_require__(306);var _indices_api_client=__webpack_require__(307);var _privileges_api_client=__webpack_require__(308);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var rolesManagementApp=Object.freeze({id:"roles",create:function create(_ref){var license=_ref.license,fatalErrors=_ref.fatalErrors,getStartServices=_ref.getStartServices;return{id:this.id,order:20,title:_i18n.i18n.translate("xpack.security.management.rolesTitle",{defaultMessage:"Roles"}),mount:function mount(_ref2){var basePath=_ref2.basePath,element=_ref2.element,setBreadcrumbs=_ref2.setBreadcrumbs;return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _ref3,_ref4,_ref4$,application,docLinks,http,i18nStart,injectedMetadata,notifications,_ref4$2,data,features,rolesBreadcrumbs,rolesAPIClient,RolesGridPageWithBreadcrumbs,EditRolePageWithBreadcrumbs;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getStartServices();case 2:_ref3=_context.sent;_ref4=_slicedToArray(_ref3,2);_ref4$=_ref4[0];application=_ref4$.application;docLinks=_ref4$.docLinks;http=_ref4$.http;i18nStart=_ref4$.i18n;injectedMetadata=_ref4$.injectedMetadata;notifications=_ref4$.notifications;_ref4$2=_ref4[1];data=_ref4$2.data;features=_ref4$2.features;rolesBreadcrumbs=[{text:_i18n.i18n.translate("xpack.security.roles.breadcrumb",{defaultMessage:"Roles"}),href:"#".concat(basePath)}];rolesAPIClient=new _roles_api_client.RolesAPIClient(http);RolesGridPageWithBreadcrumbs=function RolesGridPageWithBreadcrumbs(){setBreadcrumbs(rolesBreadcrumbs);return _react.default.createElement(_roles_grid.RolesGridPage,{notifications:notifications,rolesAPIClient:rolesAPIClient})};EditRolePageWithBreadcrumbs=function EditRolePageWithBreadcrumbs(_ref5){var action=_ref5.action;var _useParams=(0,_reactRouterDom.useParams)(),roleName=_useParams.roleName;setBreadcrumbs([].concat(rolesBreadcrumbs,[action==="edit"&&roleName?{text:roleName,href:"#".concat(basePath,"/edit/").concat(encodeURIComponent(roleName))}:{text:_i18n.i18n.translate("xpack.security.roles.createBreadcrumb",{defaultMessage:"Create"})}]));return _react.default.createElement(_edit_role.EditRolePage,{action:action,roleName:roleName,spacesEnabled:injectedMetadata.getInjectedVar("enableSpaceAwarePrivileges"),rolesAPIClient:rolesAPIClient,userAPIClient:new _users.UserAPIClient(http),indicesAPIClient:new _indices_api_client.IndicesAPIClient(http),privilegesAPIClient:new _privileges_api_client.PrivilegesAPIClient(http),getFeatures:features.getFeatures,http:http,notifications:notifications,fatalErrors:fatalErrors,license:license,docLinks:new _documentation_links.DocumentationLinksService(docLinks),uiCapabilities:application.capabilities,indexPatterns:data.indexPatterns})};(0,_reactDom.render)(_react.default.createElement(i18nStart.Context,null,_react.default.createElement(_reactRouterDom.HashRouter,{basename:basePath},_react.default.createElement(_reactRouterDom.Switch,null,_react.default.createElement(_reactRouterDom.Route,{path:"/",exact:true},_react.default.createElement(RolesGridPageWithBreadcrumbs,null)),_react.default.createElement(_reactRouterDom.Route,{path:"/edit/:roleName?"},_react.default.createElement(EditRolePageWithBreadcrumbs,{action:"edit"})),_react.default.createElement(_reactRouterDom.Route,{path:"/clone/:roleName"},_react.default.createElement(EditRolePageWithBreadcrumbs,{action:"clone"}))))),element);return _context.abrupt("return",(function(){(0,_reactDom.unmountComponentAtNode)(element)}));case 20:case"end":return _context.stop()}}}),_callee)})))()}}}});exports.rolesManagementApp=rolesManagementApp},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.usersManagementApp=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(10);var _reactRouterDom=__webpack_require__(16);var _i18n=__webpack_require__(3);var _roles=__webpack_require__(24);var _user_api_client=__webpack_require__(25);var _users_grid=__webpack_require__(165);var _edit_user=__webpack_require__(184);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var usersManagementApp=Object.freeze({id:"users",create:function create(_ref){var authc=_ref.authc,getStartServices=_ref.getStartServices;return{id:this.id,order:10,title:_i18n.i18n.translate("xpack.security.management.usersTitle",{defaultMessage:"Users"}),mount:function mount(_ref2){var basePath=_ref2.basePath,element=_ref2.element,setBreadcrumbs=_ref2.setBreadcrumbs;return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _ref3,_ref4,_ref4$,http,notifications,i18nStart,usersBreadcrumbs,userAPIClient,rolesAPIClient,UsersGridPageWithBreadcrumbs,EditUserPageWithBreadcrumbs;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getStartServices();case 2:_ref3=_context.sent;_ref4=_slicedToArray(_ref3,1);_ref4$=_ref4[0];http=_ref4$.http;notifications=_ref4$.notifications;i18nStart=_ref4$.i18n;usersBreadcrumbs=[{text:_i18n.i18n.translate("xpack.security.users.breadcrumb",{defaultMessage:"Users"}),href:"#".concat(basePath)}];userAPIClient=new _user_api_client.UserAPIClient(http);rolesAPIClient=new _roles.RolesAPIClient(http);UsersGridPageWithBreadcrumbs=function UsersGridPageWithBreadcrumbs(){setBreadcrumbs(usersBreadcrumbs);return _react.default.createElement(_users_grid.UsersGridPage,{notifications:notifications,userAPIClient:userAPIClient,rolesAPIClient:rolesAPIClient})};EditUserPageWithBreadcrumbs=function EditUserPageWithBreadcrumbs(){var _useParams=(0,_reactRouterDom.useParams)(),username=_useParams.username;setBreadcrumbs([].concat(usersBreadcrumbs,[username?{text:username,href:"#".concat(basePath,"/edit/").concat(encodeURIComponent(username))}:{text:_i18n.i18n.translate("xpack.security.users.createBreadcrumb",{defaultMessage:"Create"})}]));return _react.default.createElement(_edit_user.EditUserPage,{authc:authc,userAPIClient:userAPIClient,rolesAPIClient:new _roles.RolesAPIClient(http),notifications:notifications,username:username})};(0,_reactDom.render)(_react.default.createElement(i18nStart.Context,null,_react.default.createElement(_reactRouterDom.HashRouter,{basename:basePath},_react.default.createElement(_reactRouterDom.Switch,null,_react.default.createElement(_reactRouterDom.Route,{path:"/",exact:true},_react.default.createElement(UsersGridPageWithBreadcrumbs,null)),_react.default.createElement(_reactRouterDom.Route,{path:"/edit/:username?"},_react.default.createElement(EditUserPageWithBreadcrumbs,null))))),element);return _context.abrupt("return",(function(){(0,_reactDom.unmountComponentAtNode)(element)}));case 15:case"end":return _context.stop()}}}),_callee)})))()}}}});exports.usersManagementApp=usersManagementApp},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"UsersGridPage",{enumerable:true,get:function get(){return _users_grid_page.UsersGridPage}});var _users_grid_page=__webpack_require__(166)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.UsersGridPage=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react2=__webpack_require__(2);var _components=__webpack_require__(46);var _user_utils=__webpack_require__(170);var _badges=__webpack_require__(26);var _role_table_display=__webpack_require__(47);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var UsersGridPage=function(_Component){_inherits(UsersGridPage,_Component);function UsersGridPage(props){var _this;_classCallCheck(this,UsersGridPage);_this=_possibleConstructorReturn(this,_getPrototypeOf(UsersGridPage).call(this,props));_defineProperty(_assertThisInitialized(_this),"handleDelete",(function(usernames,errors){var users=_this.state.users;_this.setState({selection:[],showDeleteConfirmation:false,users:users.filter((function(_ref){var username=_ref.username;return!usernames.includes(username)||errors.includes(username)}))})}));_defineProperty(_assertThisInitialized(_this),"getVisibleUsers",(function(users,filter,includeReservedUsers){return users.filter((function(_ref2){var username=_ref2.username,userRoles=_ref2.roles,_ref2$full_name=_ref2.full_name,fullName=_ref2$full_name===void 0?"":_ref2$full_name,_ref2$email=_ref2.email,email=_ref2$email===void 0?"":_ref2$email,_ref2$metadata=_ref2.metadata,metadata=_ref2$metadata===void 0?{}:_ref2$metadata;var normalized="".concat(username," ").concat(userRoles.join(" ")," ").concat(fullName," ").concat(email).toLowerCase();var normalizedQuery=filter.toLowerCase();return normalized.indexOf(normalizedQuery)!==-1&&(includeReservedUsers||!metadata._reserved)}))}));_defineProperty(_assertThisInitialized(_this),"onIncludeReservedUsersChange",(function(e){_this.setState({includeReservedUsers:e.target.checked,visibleUsers:_this.getVisibleUsers(_this.state.users,_this.state.filter,e.target.checked)})}));_defineProperty(_assertThisInitialized(_this),"getUserStatusBadges",(function(user){var enabled=user.enabled;var reserved=(0,_user_utils.isUserReserved)(user);var badges=[];if(!enabled){badges.push(_react.default.createElement(_badges.DisabledBadge,{"data-test-subj":"userDisabled"}))}if(reserved){badges.push(_react.default.createElement(_badges.ReservedBadge,{"data-test-subj":"userReserved",tooltipContent:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.reservedUserBadgeTooltip",defaultMessage:"Reserved users are built-in and cannot be edited or removed."})}))}return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},badges.map((function(badge,index){return _react.default.createElement(_eui.EuiFlexItem,{key:index,grow:false},badge)})))}));_defineProperty(_assertThisInitialized(_this),"onCancelDelete",(function(){_this.setState({showDeleteConfirmation:false})}));_this.state={users:[],visibleUsers:[],roles:[],selection:[],showDeleteConfirmation:false,permissionDenied:false,filter:"",includeReservedUsers:true};return _this}_createClass(UsersGridPage,[{key:"componentDidMount",value:function componentDidMount(){this.loadUsersAndRoles()}},{key:"render",value:function render(){var _this2=this;var _this$state=this.state,users=_this$state.users,roles=_this$state.roles,permissionDenied=_this$state.permissionDenied,showDeleteConfirmation=_this$state.showDeleteConfirmation,selection=_this$state.selection;if(permissionDenied){return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none"},_react.default.createElement(_eui.EuiPageContent,{horizontalPosition:"center"},_react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"securityApp",title:_react.default.createElement("h1",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.deniedPermissionTitle",defaultMessage:"You need permission to manage users"})),body:_react.default.createElement("p",{"data-test-subj":"permissionDeniedMessage"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.permissionDeniedToManageUsersDescription",defaultMessage:"Contact your system administrator."}))})))}var path="#/management/security/";var columns=[{field:"username",name:_i18n.i18n.translate("xpack.security.management.users.userNameColumnName",{defaultMessage:"User Name"}),sortable:true,truncateText:true,render:function render(username){return _react.default.createElement(_eui.EuiLink,{"data-test-subj":"userRowUserName",href:"".concat(path,"users/edit/").concat(username)},username)}},{field:"full_name",name:_i18n.i18n.translate("xpack.security.management.users.fullNameColumnName",{defaultMessage:"Full Name"}),sortable:true,truncateText:true,render:function render(fullName){return _react.default.createElement("div",{"data-test-subj":"userRowFullName"},fullName)}},{field:"email",name:_i18n.i18n.translate("xpack.security.management.users.emailAddressColumnName",{defaultMessage:"Email Address"}),sortable:true,truncateText:true,render:function render(email){return _react.default.createElement("div",{"data-test-subj":"userRowEmail"},email)}},{field:"roles",name:_i18n.i18n.translate("xpack.security.management.users.rolesColumnName",{defaultMessage:"Roles"}),width:"30%",render:function render(rolenames){var roleLinks=rolenames.map((function(rolename,index){var _ref3;var roleDefinition=(_ref3=roles===null||roles===void 0?void 0:roles.find((function(role){return role.name===rolename})))!==null&&_ref3!==void 0?_ref3:rolename;return _react.default.createElement(_role_table_display.RoleTableDisplay,{role:roleDefinition,key:rolename})}));return _react.default.createElement("div",{"data-test-subj":"userRowRoles"},roleLinks)}},{field:"metadata",name:_i18n.i18n.translate("xpack.security.management.users.statusColumnName",{defaultMessage:"Status"}),width:"10%",sortable:function sortable(_ref4){var metadata=_ref4.metadata;return Boolean(metadata&&metadata._reserved)},description:_i18n.i18n.translate("xpack.security.management.users.reservedColumnDescription",{defaultMessage:"Reserved users are built-in and cannot be removed. Only the password can be changed."}),render:function render(metadata,record){return _this2.getUserStatusBadges(record)}}];var pagination={initialPageSize:20,pageSizeOptions:[10,20,50,100]};var selectionConfig={itemId:"username",selectable:function selectable(user){return!(user.metadata&&user.metadata._reserved)},selectableMessage:function selectableMessage(selectable){return!selectable?"User is a system user":""},onSelectionChange:function onSelectionChange(updatedSelection){return _this2.setState({selection:updatedSelection})}};var search={toolsLeft:this.renderToolsLeft(),toolsRight:this.renderToolsRight(),box:{incremental:true},onChange:function onChange(query){_this2.setState({filter:query.queryText,visibleUsers:_this2.getVisibleUsers(_this2.state.users,query.queryText,_this2.state.includeReservedUsers)})}};var sorting={sort:{field:"username",direction:"asc"}};var rowProps=function rowProps(){return{"data-test-subj":"userRow"}};return _react.default.createElement("div",{className:"secUsersListingPage"},_react.default.createElement(_eui.EuiPageContent,{className:"secUsersListingPage__content"},_react.default.createElement(_eui.EuiPageContentHeader,null,_react.default.createElement(_eui.EuiPageContentHeaderSection,null,_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h1",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.usersTitle",defaultMessage:"Users"})))),_react.default.createElement(_eui.EuiPageContentHeaderSection,null,_react.default.createElement(_eui.EuiButton,{"data-test-subj":"createUserButton",href:"#/management/security/users/edit"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.createNewUserButtonLabel",defaultMessage:"Create user"})))),_react.default.createElement(_eui.EuiPageContentBody,null,showDeleteConfirmation?_react.default.createElement(_components.ConfirmDeleteUsers,{onCancel:this.onCancelDelete,usersToDelete:selection.map((function(user){return user.username})),callback:this.handleDelete,userAPIClient:this.props.userAPIClient,notifications:this.props.notifications}):null,_react.default.createElement(_eui.EuiInMemoryTable,{itemId:"username",columns:columns,selection:selectionConfig,pagination:pagination,items:this.state.visibleUsers,loading:users.length===0,search:search,sorting:sorting,rowProps:rowProps,isSelectable:true}))))}},{key:"loadUsersAndRoles",value:function(){var _loadUsersAndRoles=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _ref5,_ref6,users,roles;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Promise.all([this.props.userAPIClient.getUsers(),this.props.rolesAPIClient.getRoles()]);case 3:_ref5=_context.sent;_ref6=_slicedToArray(_ref5,2);users=_ref6[0];roles=_ref6[1];this.setState({users:users,roles:roles,visibleUsers:this.getVisibleUsers(users,this.state.filter,this.state.includeReservedUsers)});_context.next=13;break;case 10:_context.prev=10;_context.t0=_context["catch"](0);if(_context.t0.body.statusCode===403){this.setState({permissionDenied:true})}else{this.props.notifications.toasts.addDanger(_i18n.i18n.translate("xpack.security.management.users.fetchingUsersErrorMessage",{defaultMessage:"Error fetching users: {message}",values:{message:_context.t0.body.message}}))}case 13:case"end":return _context.stop()}}}),_callee,this,[[0,10]])})));function loadUsersAndRoles(){return _loadUsersAndRoles.apply(this,arguments)}return loadUsersAndRoles}()},{key:"renderToolsLeft",value:function renderToolsLeft(){var _this3=this;var selection=this.state.selection;if(selection.length===0){return}var numSelected=selection.length;return _react.default.createElement(_eui.EuiButton,{"data-test-subj":"deleteUserButton",color:"danger",onClick:function onClick(){return _this3.setState({showDeleteConfirmation:true})}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.deleteUsersButtonLabel",defaultMessage:"Delete {numSelected} user{numSelected, plural, one { } other {s}}",values:{numSelected:numSelected}}))}},{key:"renderToolsRight",value:function renderToolsRight(){return _react.default.createElement(_eui.EuiSwitch,{"data-test-subj":"showReservedUsersSwitch",label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.showReservedUsersLabel",defaultMessage:"Show reserved users"}),checked:this.state.includeReservedUsers,onChange:this.onIncludeReservedUsersChange})}}]);return UsersGridPage}(_react.Component);exports.UsersGridPage=UsersGridPage},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ChangePasswordForm=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getInitialState(){return{shouldValidate:false,currentPassword:"",newPassword:"",confirmPassword:"",currentPasswordError:false,changeInProgress:false}}var ChangePasswordForm=function(_Component){_inherits(ChangePasswordForm,_Component);function ChangePasswordForm(props){var _this;_classCallCheck(this,ChangePasswordForm);_this=_possibleConstructorReturn(this,_getPrototypeOf(ChangePasswordForm).call(this,props));_defineProperty(_assertThisInitialized(_this),"getForm",(function(){return _react2.default.createElement(_eui.EuiForm,null,_this.props.isUserChangingOwnPassword&&_react2.default.createElement(_eui.EuiFormRow,_extends({},_this.validateCurrentPassword(),{fullWidth:true,label:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.account.changePasswordForm.currentPasswordLabel",defaultMessage:"Current password"})}),_react2.default.createElement(_eui.EuiFieldText,{autoComplete:"off","data-test-subj":"currentPassword",type:"password",value:_this.state.currentPassword,onChange:_this.onCurrentPasswordChange,disabled:_this.state.changeInProgress,fullWidth:true})),_react2.default.createElement(_eui.EuiFormRow,_extends({helpText:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.account.changePasswordForm.passwordRequirements",defaultMessage:"Use at least 6 characters."})},_this.validateNewPassword(),{fullWidth:true,label:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.account.changePasswordForm.newPasswordLabel",defaultMessage:"New password"})}),_react2.default.createElement(_eui.EuiFieldText,{autoComplete:"new-password","data-test-subj":"newPassword",type:"password",value:_this.state.newPassword,onChange:_this.onNewPasswordChange,disabled:_this.state.changeInProgress,fullWidth:true})),_react2.default.createElement(_eui.EuiFormRow,_extends({},_this.validateConfirmPassword(),{fullWidth:true,label:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.account.changePasswordForm.confirmPasswordLabel",defaultMessage:"Confirm new password"})}),_react2.default.createElement(_eui.EuiFieldText,{autoComplete:"new-password","data-test-subj":"confirmNewPassword",type:"password",value:_this.state.confirmPassword,onChange:_this.onConfirmPasswordChange,disabled:_this.state.changeInProgress,fullWidth:true})),_react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{onClick:_this.onChangePasswordClick,fill:true,isLoading:_this.state.changeInProgress,"data-test-subj":"changePasswordButton"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.account.changePasswordForm.saveChangesButtonLabel",defaultMessage:"Change password"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{onClick:_this.onCancelClick,isDisabled:_this.state.changeInProgress},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.account.changePasswordForm.cancelButtonLabel",defaultMessage:"Reset"}))))))}));_defineProperty(_assertThisInitialized(_this),"onCurrentPasswordChange",(function(e){_this.setState({currentPassword:e.target.value,currentPasswordError:false})}));_defineProperty(_assertThisInitialized(_this),"onNewPasswordChange",(function(e){_this.setState({newPassword:e.target.value})}));_defineProperty(_assertThisInitialized(_this),"onConfirmPasswordChange",(function(e){_this.setState({confirmPassword:e.target.value})}));_defineProperty(_assertThisInitialized(_this),"onCancelClick",(function(){_this.setState(getInitialState())}));_defineProperty(_assertThisInitialized(_this),"onChangePasswordClick",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({shouldValidate:true,currentPasswordError:false},(function(){var _this$validateForm=_this.validateForm(),isInvalid=_this$validateForm.isInvalid;if(isInvalid){return}_this.setState({changeInProgress:true},(function(){return _this.performPasswordChange()}))}));case 1:case"end":return _context.stop()}}}),_callee)}))));_defineProperty(_assertThisInitialized(_this),"validateCurrentPassword",(function(){var shouldValidate=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_this.state.shouldValidate;if(!shouldValidate||!_this.props.isUserChangingOwnPassword){return{isInvalid:false}}if(_this.state.currentPasswordError){return{isInvalid:true,error:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.account.changePasswordForm.invalidPassword",defaultMessage:"Current password is incorrect."})}}if(!_this.state.currentPassword){return{isInvalid:true,error:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.account.currentPasswordRequired",defaultMessage:"Current password is required."})}}return{isInvalid:false}}));_defineProperty(_assertThisInitialized(_this),"validateNewPassword",(function(){var shouldValidate=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_this.state.shouldValidate;var newPassword=_this.state.newPassword;var minPasswordLength=6;if(shouldValidate&&newPassword.length<minPasswordLength){return{isInvalid:true,error:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.account.passwordLengthDescription",defaultMessage:"Password is too short."})}}return{isInvalid:false}}));_defineProperty(_assertThisInitialized(_this),"validateConfirmPassword",(function(){var shouldValidate=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_this.state.shouldValidate;var _this$state=_this.state,newPassword=_this$state.newPassword,confirmPassword=_this$state.confirmPassword;if(shouldValidate&&newPassword!==confirmPassword){return{isInvalid:true,error:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.account.passwordsDoNotMatch",defaultMessage:"Passwords do not match."})}}return{isInvalid:false}}));_defineProperty(_assertThisInitialized(_this),"validateForm",(function(){var validation=[_this.validateCurrentPassword(true),_this.validateNewPassword(true),_this.validateConfirmPassword(true)];var firstFailure=validation.find((function(result){return result.isInvalid}));if(firstFailure){return firstFailure}return{isInvalid:false}}));_defineProperty(_assertThisInitialized(_this),"performPasswordChange",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return _this.props.userAPIClient.changePassword(_this.props.user.username,_this.state.newPassword,_this.state.currentPassword);case 3:_this.handleChangePasswordSuccess();_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2["catch"](0);_this.handleChangePasswordFailure(_context2.t0);case 9:_context2.prev=9;_this.setState({changeInProgress:false});return _context2.finish(9);case 12:case"end":return _context2.stop()}}}),_callee2,null,[[0,6,9,12]])}))));_defineProperty(_assertThisInitialized(_this),"handleChangePasswordSuccess",(function(){_this.props.notifications.toasts.addSuccess({title:_i18n.i18n.translate("xpack.security.account.changePasswordSuccess",{defaultMessage:"Your password has been changed."}),"data-test-subj":"passwordUpdateSuccess"});_this.setState({currentPasswordError:false,shouldValidate:false,newPassword:"",currentPassword:"",confirmPassword:""});if(_this.props.onChangePassword){_this.props.onChangePassword()}}));_defineProperty(_assertThisInitialized(_this),"handleChangePasswordFailure",(function(error){if(error.body&&error.body.statusCode===403){_this.setState({currentPasswordError:true})}else{_this.props.notifications.toasts.addDanger(_i18n.i18n.translate("xpack.security.management.users.editUser.settingPasswordErrorMessage",{defaultMessage:"Error setting password: {message}",values:{message:_.get(error,"body.message")}}))}}));_this.state=getInitialState();return _this}_createClass(ChangePasswordForm,[{key:"render",value:function render(){return this.getForm()}}]);return ChangePasswordForm}(_react2.Component);exports.ChangePasswordForm=ChangePasswordForm},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ConfirmDeleteUsers",{enumerable:true,get:function get(){return _confirm_delete_users.ConfirmDeleteUsers}});var _confirm_delete_users=__webpack_require__(169)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ConfirmDeleteUsers=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react2=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ConfirmDeleteUsers=function(_Component){_inherits(ConfirmDeleteUsers,_Component);function ConfirmDeleteUsers(){var _getPrototypeOf2;var _this;_classCallCheck(this,ConfirmDeleteUsers);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ConfirmDeleteUsers)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"deleteUsers",(function(){var _this$props=_this.props,usersToDelete=_this$props.usersToDelete,callback=_this$props.callback,userAPIClient=_this$props.userAPIClient,notifications=_this$props.notifications;var errors=[];usersToDelete.forEach(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(username){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return userAPIClient.deleteUser(username);case 3:notifications.toasts.addSuccess(_i18n.i18n.translate("xpack.security.management.users.confirmDelete.userSuccessfullyDeletedNotificationMessage",{defaultMessage:"Deleted user {username}",values:{username:username}}));_context.next=10;break;case 6:_context.prev=6;_context.t0=_context["catch"](0);errors.push(username);notifications.toasts.addDanger(_i18n.i18n.translate("xpack.security.management.users.confirmDelete.userDeletingErrorNotificationMessage",{defaultMessage:"Error deleting user {username}",values:{username:username}}));case 10:if(callback){callback(usersToDelete,errors)}case 11:case"end":return _context.stop()}}}),_callee,null,[[0,6]])})));return function(_x){return _ref.apply(this,arguments)}}())}));return _this}_createClass(ConfirmDeleteUsers,[{key:"render",value:function render(){var _this$props2=this.props,usersToDelete=_this$props2.usersToDelete,onCancel=_this$props2.onCancel;var moreThanOne=usersToDelete.length>1;var title=moreThanOne?_i18n.i18n.translate("xpack.security.management.users.confirmDelete.deleteMultipleUsersTitle",{defaultMessage:"Delete {userLength} users",values:{userLength:usersToDelete.length}}):_i18n.i18n.translate("xpack.security.management.users.confirmDelete.deleteOneUserTitle",{defaultMessage:"Delete user {userLength}",values:{userLength:usersToDelete[0]}});return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:title,onCancel:onCancel,onConfirm:this.deleteUsers,cancelButtonText:_i18n.i18n.translate("xpack.security.management.users.confirmDelete.cancelButtonLabel",{defaultMessage:"Cancel"}),confirmButtonText:_i18n.i18n.translate("xpack.security.management.users.confirmDelete.confirmButtonLabel",{defaultMessage:"Delete"}),buttonColor:"danger"},_react.default.createElement("div",null,moreThanOne?_react.default.createElement(_react.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.confirmDelete.removingUsersDescription",defaultMessage:"You are about to delete these users:"})),_react.default.createElement("ul",null,usersToDelete.map((function(username){return _react.default.createElement("li",{key:username},username)})))):null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.confirmDelete.removingUsersWarningMessage",defaultMessage:"This operation cannot be undone."})))))}}]);return ConfirmDeleteUsers}(_react.Component);exports.ConfirmDeleteUsers=ConfirmDeleteUsers},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isUserReserved=void 0;var isUserReserved=function isUserReserved(user){var _ref,_user$metadata;return(_ref=(_user$metadata=user.metadata)===null||_user$metadata===void 0?void 0:_user$metadata._reserved)!==null&&_ref!==void 0?_ref:false};exports.isUserReserved=isUserReserved},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DeprecatedBadge=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _react2=__webpack_require__(2);var _eui=__webpack_require__(1);var _optional_tooltip=__webpack_require__(18);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DeprecatedBadge=function DeprecatedBadge(props){return _react.default.createElement(_optional_tooltip.OptionalToolTip,{tooltipContent:props.tooltipContent},_react.default.createElement(_eui.EuiBadge,{"data-test-subj":props["data-test-subj"],color:"warning"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.deprecatedBadge",defaultMessage:"Deprecated"})))};exports.DeprecatedBadge=DeprecatedBadge},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DisabledBadge=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _react2=__webpack_require__(2);var _eui=__webpack_require__(1);var _optional_tooltip=__webpack_require__(18);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DisabledBadge=function DisabledBadge(props){return _react.default.createElement(_optional_tooltip.OptionalToolTip,{tooltipContent:props.tooltipContent},_react.default.createElement(_eui.EuiBadge,{"data-test-subj":props["data-test-subj"],color:"hollow"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.disabledBadge",defaultMessage:"Disabled"})))};exports.DisabledBadge=DisabledBadge},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EnabledBadge=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _react2=__webpack_require__(2);var _eui=__webpack_require__(1);var _optional_tooltip=__webpack_require__(18);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EnabledBadge=function EnabledBadge(props){return _react.default.createElement(_optional_tooltip.OptionalToolTip,{tooltipContent:props.tooltipContent},_react.default.createElement(_eui.EuiBadge,{"data-test-subj":props["data-test-subj"],color:"secondary"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.enabledBadge",defaultMessage:"Enabled"})))};exports.EnabledBadge=EnabledBadge},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ReservedBadge=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _react2=__webpack_require__(2);var _eui=__webpack_require__(1);var _optional_tooltip=__webpack_require__(18);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ReservedBadge=function ReservedBadge(props){return _react.default.createElement(_optional_tooltip.OptionalToolTip,{tooltipContent:props.tooltipContent},_react.default.createElement(_eui.EuiBadge,{"data-test-subj":props["data-test-subj"],color:"primary"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.reservedBadge",defaultMessage:"Reserved"})))};exports.ReservedBadge=ReservedBadge},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RoleTableDisplay=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _model=__webpack_require__(5);var _management_urls=__webpack_require__(13);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var RoleTableDisplay=function RoleTableDisplay(_ref){var role=_ref.role;var content;var href;if(typeof role==="string"){content=_react.default.createElement("div",null,role);href=(0,_management_urls.getEditRoleHref)(role)}else if((0,_model.isRoleDeprecated)(role)){content=_react.default.createElement(_eui.EuiToolTip,{content:(0,_model.getExtendedRoleDeprecationNotice)(role),"data-test-subj":"roleDeprecationTooltip"},_react.default.createElement("div",null,role.name," ",_react.default.createElement(_eui.EuiIcon,{type:"alert",color:"warning",size:"s",className:"eui-alignTop"})));href=(0,_management_urls.getEditRoleHref)(role.name)}else{content=_react.default.createElement("div",null,role.name);href=(0,_management_urls.getEditRoleHref)(role.name)}return _react.default.createElement(_eui.EuiLink,{href:href},content)};exports.RoleTableDisplay=RoleTableDisplay},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getUserDisplayName=getUserDisplayName;function getUserDisplayName(user){return user.full_name||user.username}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.canUserChangePassword=canUserChangePassword;var REALMS_ELIGIBLE_FOR_PASSWORD_CHANGE=["reserved","native"];function canUserChangePassword(user){return REALMS_ELIGIBLE_FOR_PASSWORD_CHANGE.includes(user.authentication_realm.type)}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isRoleEnabled=isRoleEnabled;exports.isRoleReserved=isRoleReserved;exports.isRoleDeprecated=isRoleDeprecated;exports.getExtendedRoleDeprecationNotice=getExtendedRoleDeprecationNotice;exports.isRoleReadOnly=isRoleReadOnly;exports.copyRole=copyRole;exports.prepareRoleClone=prepareRoleClone;var _lodash=__webpack_require__(4);var _i18n=__webpack_require__(3);function isRoleEnabled(role){var _ref,_role$transient_metad;return(_ref=(_role$transient_metad=role.transient_metadata)===null||_role$transient_metad===void 0?void 0:_role$transient_metad.enabled)!==null&&_ref!==void 0?_ref:true}function isRoleReserved(role){var _ref2,_role$metadata;return(_ref2=(_role$metadata=role.metadata)===null||_role$metadata===void 0?void 0:_role$metadata._reserved)!==null&&_ref2!==void 0?_ref2:false}function isRoleDeprecated(role){var _ref3,_role$metadata2;return(_ref3=(_role$metadata2=role.metadata)===null||_role$metadata2===void 0?void 0:_role$metadata2._deprecated)!==null&&_ref3!==void 0?_ref3:false}function getExtendedRoleDeprecationNotice(role){return _i18n.i18n.translate("xpack.security.common.extendedRoleDeprecationNotice",{defaultMessage:"The {roleName} role is deprecated. {reason}",values:{roleName:role.name,reason:getRoleDeprecatedReason(role)}})}function isRoleReadOnly(role){var _ref4,_role$_transform_erro;return isRoleReserved(role)||((_ref4=(_role$_transform_erro=role._transform_error)===null||_role$_transform_erro===void 0?void 0:_role$_transform_erro.length)!==null&&_ref4!==void 0?_ref4:0)>0}function copyRole(role){return(0,_lodash.cloneDeep)(role)}function prepareRoleClone(role){var clone=copyRole(role);clone.name="";return clone}function getRoleDeprecatedReason(role){var _ref5,_role$metadata3;return(_ref5=(_role$metadata3=role.metadata)===null||_role$metadata3===void 0?void 0:_role$metadata3._deprecated_reason)!==null&&_ref5!==void 0?_ref5:""}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"EditUserPage",{enumerable:true,get:function get(){return _edit_user_page.EditUserPage}});var _edit_user_page=__webpack_require__(185)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.EditUserPage=void 0;var _lodash=__webpack_require__(4);var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react2=__webpack_require__(2);var _model=__webpack_require__(5);var _management_urls=__webpack_require__(13);var _components=__webpack_require__(46);var _validate_user=__webpack_require__(186);var _role_combo_box=__webpack_require__(48);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function backToUserList(){window.location.hash=_management_urls.USERS_PATH}var EditUserPage=function(_Component){_inherits(EditUserPage,_Component);function EditUserPage(props){var _this;_classCallCheck(this,EditUserPage);_this=_possibleConstructorReturn(this,_getPrototypeOf(EditUserPage).call(this,props));_defineProperty(_assertThisInitialized(_this),"validator",void 0);_defineProperty(_assertThisInitialized(_this),"handleDelete",(function(usernames,errors){if(errors.length===0){backToUserList()}}));_defineProperty(_assertThisInitialized(_this),"saveUser",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var result,userAPIClient,_this$state,user,isNewUser,selectedRoles,userToSave;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.validator.enableValidation();result=_this.validator.validateForSave(_this.state.user,_this.state.isNewUser);if(!result.isInvalid){_context.next=6;break}_this.setState({formError:result});_context.next=23;break;case 6:_this.setState({formError:null});userAPIClient=_this.props.userAPIClient;_this$state=_this.state,user=_this$state.user,isNewUser=_this$state.isNewUser,selectedRoles=_this$state.selectedRoles;userToSave=_objectSpread({},user);if(!isNewUser){delete userToSave.password}delete userToSave.confirmPassword;userToSave.roles=_toConsumableArray(selectedRoles);_context.prev=13;_context.next=16;return userAPIClient.saveUser(userToSave);case 16:_this.props.notifications.toasts.addSuccess(_i18n.i18n.translate("xpack.security.management.users.editUser.userSuccessfullySavedNotificationMessage",{defaultMessage:"Saved user {message}",values:{message:user.username}}));backToUserList();_context.next=23;break;case 20:_context.prev=20;_context.t0=_context["catch"](13);_this.props.notifications.toasts.addDanger(_i18n.i18n.translate("xpack.security.management.users.editUser.savingUserErrorMessage",{defaultMessage:"Error saving user: {message}",values:{message:(0,_lodash.get)(_context.t0,"body.message","Unknown error")}}));case 23:case"end":return _context.stop()}}}),_callee,null,[[13,20]])}))));_defineProperty(_assertThisInitialized(_this),"passwordFields",(function(){return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFormRow,_extends({label:_i18n.i18n.translate("xpack.security.management.users.editUser.passwordFormRowLabel",{defaultMessage:"Password"})},_this.validator.validatePassword(_this.state.user)),_react.default.createElement(_eui.EuiFieldText,{autoComplete:"new-password","data-test-subj":"passwordInput",name:"password",type:"password",onChange:_this.onPasswordChange})),_react.default.createElement(_eui.EuiFormRow,_extends({label:_i18n.i18n.translate("xpack.security.management.users.editUser.confirmPasswordFormRowLabel",{defaultMessage:"Confirm password"})},_this.validator.validateConfirmPassword(_this.state.user)),_react.default.createElement(_eui.EuiFieldText,{autoComplete:"new-password","data-test-subj":"passwordConfirmationInput",onChange:_this.onConfirmPasswordChange,name:"confirm_password",type:"password"})))}));_defineProperty(_assertThisInitialized(_this),"changePasswordForm",(function(){var _this$state2=_this.state,showChangePasswordForm=_this$state2.showChangePasswordForm,user=_this$state2.user,currentUser=_this$state2.currentUser;var userIsLoggedInUser=Boolean(currentUser&&user.username&&user.username===currentUser.username);if(!showChangePasswordForm){return null}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiHorizontalRule,null),user.username==="kibana"?_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiCallOut,{title:_i18n.i18n.translate("xpack.security.management.users.editUser.changePasswordExtraStepTitle",{defaultMessage:"Extra step needed"}),color:"warning",iconType:"help"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.editUser.changePasswordUpdateKibanaTitle",defaultMessage:"After you change the password for the kibana user, you must update the {kibana} file and restart Kibana.",values:{kibana:"kibana.yml"}}))),_react.default.createElement(_eui.EuiSpacer,null)):null,_react.default.createElement(_components.ChangePasswordForm,{user:_this.state.user,isUserChangingOwnPassword:userIsLoggedInUser,onChangePassword:_this.toggleChangePasswordForm,userAPIClient:_this.props.userAPIClient,notifications:_this.props.notifications}))}));_defineProperty(_assertThisInitialized(_this),"toggleChangePasswordForm",(function(){var showChangePasswordForm=_this.state.showChangePasswordForm;_this.setState({showChangePasswordForm:!showChangePasswordForm})}));_defineProperty(_assertThisInitialized(_this),"onUsernameChange",(function(e){var user=_objectSpread({},_this.state.user,{username:e.target.value||""});var formError=_this.validator.validateForSave(user,_this.state.isNewUser);_this.setState({user:user,formError:formError})}));_defineProperty(_assertThisInitialized(_this),"onEmailChange",(function(e){var user=_objectSpread({},_this.state.user,{email:e.target.value||""});var formError=_this.validator.validateForSave(user,_this.state.isNewUser);_this.setState({user:user,formError:formError})}));_defineProperty(_assertThisInitialized(_this),"onFullNameChange",(function(e){var user=_objectSpread({},_this.state.user,{full_name:e.target.value||""});var formError=_this.validator.validateForSave(user,_this.state.isNewUser);_this.setState({user:user,formError:formError})}));_defineProperty(_assertThisInitialized(_this),"onPasswordChange",(function(e){var user=_objectSpread({},_this.state.user,{password:e.target.value||""});var formError=_this.validator.validateForSave(user,_this.state.isNewUser);_this.setState({user:user,formError:formError})}));_defineProperty(_assertThisInitialized(_this),"onConfirmPasswordChange",(function(e){var user=_objectSpread({},_this.state.user,{confirmPassword:e.target.value||""});var formError=_this.validator.validateForSave(user,_this.state.isNewUser);_this.setState({user:user,formError:formError})}));_defineProperty(_assertThisInitialized(_this),"onRolesChange",(function(selectedRoles){_this.setState({selectedRoles:selectedRoles})}));_defineProperty(_assertThisInitialized(_this),"cannotSaveUser",(function(){var _this$state3=_this.state,user=_this$state3.user,isNewUser=_this$state3.isNewUser;var result=_this.validator.validateForSave(user,isNewUser);return result.isInvalid}));_defineProperty(_assertThisInitialized(_this),"onCancelDelete",(function(){_this.setState({showDeleteConfirmation:false})}));_this.validator=new _validate_user.UserValidator({shouldValidate:false});_this.state={isLoaded:false,isNewUser:true,currentUser:null,showChangePasswordForm:false,showDeleteConfirmation:false,user:{email:"",username:"",full_name:"",roles:[],enabled:true,password:"",confirmPassword:""},roles:[],selectedRoles:[],formError:null};return _this}_createClass(EditUserPage,[{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.setCurrentUser();case 2:case"end":return _context2.stop()}}}),_callee2,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"componentDidUpdate",value:function(){var _componentDidUpdate=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(prevProps){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(prevProps.username!==this.props.username)){_context3.next=3;break}_context3.next=3;return this.setCurrentUser();case 3:case"end":return _context3.stop()}}}),_callee3,this)})));function componentDidUpdate(_x){return _componentDidUpdate.apply(this,arguments)}return componentDidUpdate}()},{key:"setCurrentUser",value:function(){var _setCurrentUser=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var _this$props,username,userAPIClient,rolesAPIClient,notifications,authc,_this$state4,user,currentUser,roles;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this$props=this.props,username=_this$props.username,userAPIClient=_this$props.userAPIClient,rolesAPIClient=_this$props.rolesAPIClient,notifications=_this$props.notifications,authc=_this$props.authc;_this$state4=this.state,user=_this$state4.user,currentUser=_this$state4.currentUser;if(!username){_context4.next=20;break}_context4.prev=3;_context4.t0=_objectSpread;_context4.t1={};_context4.next=8;return userAPIClient.getUser(username);case 8:_context4.t2=_context4.sent;_context4.t3={password:"",confirmPassword:""};user=(0,_context4.t0)(_context4.t1,_context4.t2,_context4.t3);_context4.next=13;return authc.getCurrentUser();case 13:currentUser=_context4.sent;_context4.next=20;break;case 16:_context4.prev=16;_context4.t4=_context4["catch"](3);notifications.toasts.addDanger({title:_i18n.i18n.translate("xpack.security.management.users.editUser.errorLoadingUserTitle",{defaultMessage:"Error loading user"}),text:(0,_lodash.get)(_context4.t4,"body.message")||_context4.t4.message});return _context4.abrupt("return",backToUserList());case 20:roles=[];_context4.prev=21;_context4.next=24;return rolesAPIClient.getRoles();case 24:roles=_context4.sent;_context4.next=30;break;case 27:_context4.prev=27;_context4.t5=_context4["catch"](21);notifications.toasts.addDanger({title:_i18n.i18n.translate("xpack.security.management.users.editUser.errorLoadingRolesTitle",{defaultMessage:"Error loading roles"}),text:(0,_lodash.get)(_context4.t5,"body.message")||_context4.t5.message});case 30:this.setState({isLoaded:true,isNewUser:!username,currentUser:currentUser,user:user,roles:roles,selectedRoles:user.roles||[]});case 31:case"end":return _context4.stop()}}}),_callee4,this,[[3,16],[21,27]])})));function setCurrentUser(){return _setCurrentUser.apply(this,arguments)}return setCurrentUser}()},{key:"render",value:function render(){var _this2=this;var _this$state5=this.state,user=_this$state5.user,selectedRoles=_this$state5.selectedRoles,roles=_this$state5.roles,showChangePasswordForm=_this$state5.showChangePasswordForm,isNewUser=_this$state5.isNewUser,showDeleteConfirmation=_this$state5.showDeleteConfirmation;var reserved=user.metadata&&user.metadata._reserved;if(!user||!roles){return null}if(!this.state.isLoaded){return null}var hasAnyDeprecatedRolesAssigned=selectedRoles.some((function(selected){var role=roles.find((function(r){return r.name===selected}));return role&&(0,_model.isRoleDeprecated)(role)}));var roleHelpText=hasAnyDeprecatedRolesAssigned?_react.default.createElement("span",{"data-test-subj":"hasDeprecatedRolesAssignedHelpText"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.editUser.deprecatedRolesAssignedWarning",defaultMessage:"This user is assigned a deprecated role. Please migrate to a supported role."})):undefined;return _react.default.createElement("div",{className:"secUsersEditPage"},_react.default.createElement(_eui.EuiPageContent,{className:"secUsersEditPage__content"},_react.default.createElement(_eui.EuiPageContentHeader,null,_react.default.createElement(_eui.EuiPageContentHeaderSection,null,_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h1",null,isNewUser?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.editUser.newUserTitle",defaultMessage:"New user"}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.editUser.editUserTitle",defaultMessage:"Edit {userName} user",values:{userName:user.username}})))),reserved&&_react.default.createElement(_eui.EuiPageContentHeaderSection,null,_react.default.createElement(_eui.EuiIcon,{type:"lock",size:"l",color:"subdued"}))),_react.default.createElement(_eui.EuiPageContentBody,null,reserved&&_react.default.createElement(_eui.EuiText,{size:"s",color:"subdued"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.editUser.modifyingReservedUsersDescription",defaultMessage:"Reserved users are built-in and cannot be removed or modified. Only the password may be changed."}))),showDeleteConfirmation?_react.default.createElement(_components.ConfirmDeleteUsers,{onCancel:this.onCancelDelete,usersToDelete:[user.username],callback:this.handleDelete,userAPIClient:this.props.userAPIClient,notifications:this.props.notifications}):null,_react.default.createElement(_eui.EuiForm,this.state.formError,_react.default.createElement(_eui.EuiFormRow,_extends({},this.validator.validateUsername(this.state.user),{helpText:!isNewUser&&!reserved?_i18n.i18n.translate("xpack.security.management.users.editUser.changingUserNameAfterCreationDescription",{defaultMessage:"Usernames can't be changed after creation."}):null,label:_i18n.i18n.translate("xpack.security.management.users.editUser.usernameFormRowLabel",{defaultMessage:"Username"})}),_react.default.createElement(_eui.EuiFieldText,{value:user.username||"",name:"username","data-test-subj":"userFormUserNameInput",disabled:!isNewUser,onChange:this.onUsernameChange})),isNewUser?this.passwordFields():null,reserved?null:_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.security.management.users.editUser.fullNameFormRowLabel",{defaultMessage:"Full name"})},_react.default.createElement(_eui.EuiFieldText,{"data-test-subj":"userFormFullNameInput",name:"full_name",value:user.full_name||"",onChange:this.onFullNameChange})),_react.default.createElement(_eui.EuiFormRow,_extends({},this.validator.validateEmail(this.state.user),{label:_i18n.i18n.translate("xpack.security.management.users.editUser.emailAddressFormRowLabel",{defaultMessage:"Email address"})}),_react.default.createElement(_eui.EuiFieldText,{"data-test-subj":"userFormEmailInput",name:"email",value:user.email||"",onChange:this.onEmailChange}))),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.security.management.users.editUser.rolesFormRowLabel",{defaultMessage:"Roles"}),helpText:roleHelpText},_react.default.createElement(_role_combo_box.RoleComboBox,{availableRoles:roles,selectedRoleNames:selectedRoles,onChange:this.onRolesChange,isDisabled:reserved})),isNewUser||showChangePasswordForm?null:_react.default.createElement(_eui.EuiFormRow,{label:"Password"},_react.default.createElement(_eui.EuiLink,{onClick:this.toggleChangePasswordForm},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.editUser.changePasswordButtonLabel",defaultMessage:"Change password"}))),this.changePasswordForm(),_react.default.createElement(_eui.EuiHorizontalRule,null),reserved&&_react.default.createElement(_eui.EuiButton,{onClick:backToUserList},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.editUser.returnToUserListButtonLabel",defaultMessage:"Return to user list"})),reserved?null:_react.default.createElement(_eui.EuiFlexGroup,{responsive:false},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{disabled:this.cannotSaveUser(),fill:true,"data-test-subj":"userFormSaveButton",onClick:function onClick(){return _this2.saveUser()}},isNewUser?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.editUser.createUserButtonLabel",defaultMessage:"Create user"}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.editUser.updateUserButtonLabel",defaultMessage:"Update user"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"userFormCancelButton",onClick:backToUserList},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.editUser.cancelButtonLabel",defaultMessage:"Cancel"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:true}),isNewUser||reserved?null:_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{onClick:function onClick(){_this2.setState({showDeleteConfirmation:true})},"data-test-subj":"userFormDeleteButton",color:"danger"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.users.editUser.deleteUserButtonLabel",defaultMessage:"Delete user"}))))))))}}]);return EditUserPage}(_react.Component);exports.EditUserPage=EditUserPage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UserValidator=void 0;var _i18n=__webpack_require__(3);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var validEmailRegex=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;var validUsernameRegex=/[a-zA-Z_][a-zA-Z0-9_@\-\$\.]*/;var UserValidator=function(){function UserValidator(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,UserValidator);_defineProperty(this,"shouldValidate",void 0);this.shouldValidate=options.shouldValidate}_createClass(UserValidator,[{key:"enableValidation",value:function enableValidation(){this.shouldValidate=true}},{key:"disableValidation",value:function disableValidation(){this.shouldValidate=false}},{key:"validateUsername",value:function validateUsername(user){if(!this.shouldValidate){return valid()}var username=user.username;if(!username){return invalid(_i18n.i18n.translate("xpack.security.management.users.editUser.requiredUsernameErrorMessage",{defaultMessage:"Username is required"}))}else if(username&&!username.match(validUsernameRegex)){return invalid(_i18n.i18n.translate("xpack.security.management.users.editUser.usernameAllowedCharactersErrorMessage",{defaultMessage:"Username must begin with a letter or underscore and contain only letters, underscores, and numbers"}))}return valid()}},{key:"validateEmail",value:function validateEmail(user){if(!this.shouldValidate){return valid()}var email=user.email;if(email&&!email.match(validEmailRegex)){return invalid(_i18n.i18n.translate("xpack.security.management.users.editUser.validEmailRequiredErrorMessage",{defaultMessage:"Email address is invalid"}))}return valid()}},{key:"validatePassword",value:function validatePassword(user){if(!this.shouldValidate){return valid()}var password=user.password;if(!password||password.length<6){return invalid(_i18n.i18n.translate("xpack.security.management.users.editUser.passwordLengthErrorMessage",{defaultMessage:"Password must be at least 6 characters"}))}return valid()}},{key:"validateConfirmPassword",value:function validateConfirmPassword(user){if(!this.shouldValidate){return valid()}var password=user.password,confirmPassword=user.confirmPassword;if(password&&confirmPassword!==null&&password!==confirmPassword){return invalid(_i18n.i18n.translate("xpack.security.management.users.editUser.passwordDoNotMatchErrorMessage",{defaultMessage:"Passwords do not match"}))}return valid()}},{key:"validateForSave",value:function validateForSave(user,isNewUser){var _this$validateUsernam=this.validateUsername(user),isUsernameInvalid=_this$validateUsernam.isInvalid;var _this$validateEmail=this.validateEmail(user),isEmailInvalid=_this$validateEmail.isInvalid;var isPasswordInvalid=false;var isConfirmPasswordInvalid=false;if(isNewUser){isPasswordInvalid=this.validatePassword(user).isInvalid;isConfirmPasswordInvalid=this.validateConfirmPassword(user).isInvalid}if(isUsernameInvalid||isEmailInvalid||isPasswordInvalid||isConfirmPasswordInvalid){return invalid()}return valid()}}]);return UserValidator}();exports.UserValidator=UserValidator;function invalid(error){return{isInvalid:true,error:error}}function valid(){return{isInvalid:false}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RoleComboBox=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(3);var _eui=__webpack_require__(1);var _model=__webpack_require__(5);var _role_combo_box_option=__webpack_require__(188);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var RoleComboBox=function RoleComboBox(props){var onRolesChange=function onRolesChange(selectedItems){props.onChange(selectedItems.map((function(item){return item.label})))};var roleNameToOption=function roleNameToOption(roleName){var _ref;var roleDefinition=props.availableRoles.find((function(role){return role.name===roleName}));var isDeprecated=(_ref=roleDefinition&&(0,_model.isRoleDeprecated)(roleDefinition))!==null&&_ref!==void 0?_ref:false;return{color:isDeprecated?"warning":"default","data-test-subj":"roleOption-".concat(roleName),label:roleName,value:{isDeprecated:isDeprecated}}};var options=props.availableRoles.map((function(role){return roleNameToOption(role.name)}));var selectedOptions=props.selectedRoleNames.map(roleNameToOption);return _react.default.createElement(_eui.EuiComboBox,{"data-test-subj":"rolesDropdown",placeholder:props.placeholder||_i18n.i18n.translate("xpack.security.management.users.editUser.addRolesPlaceholder",{defaultMessage:"Add roles"}),onChange:onRolesChange,isLoading:props.isLoading,isDisabled:props.isDisabled,options:options,selectedOptions:selectedOptions,renderOption:function renderOption(option){return _react.default.createElement(_role_combo_box_option.RoleComboBoxOption,{option:option})}})};exports.RoleComboBox=RoleComboBox},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RoleComboBoxOption=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(3);var _eui=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var RoleComboBoxOption=function RoleComboBoxOption(_ref){var _ref2,_option$value;var option=_ref.option;var isDeprecated=(_ref2=(_option$value=option.value)===null||_option$value===void 0?void 0:_option$value.isDeprecated)!==null&&_ref2!==void 0?_ref2:false;var deprecatedLabel=_i18n.i18n.translate("xpack.security.management.users.editUser.deprecatedRoleText",{defaultMessage:"(deprecated)"});return _react.default.createElement(_eui.EuiText,{color:option.color,"data-test-subj":"rolesDropdown-renderOption"},option.label," ",isDeprecated?deprecatedLabel:"")};exports.RoleComboBoxOption=RoleComboBoxOption},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RolesGridPage",{enumerable:true,get:function get(){return _roles_grid_page.RolesGridPage}});var _roles_grid_page=__webpack_require__(190)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RolesGridPage=void 0;var _lodash=_interopRequireDefault(__webpack_require__(4));var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react2=__webpack_require__(2);var _model=__webpack_require__(5);var _confirm_delete=__webpack_require__(191);var _permission_denied=__webpack_require__(193);var _badges=__webpack_require__(26);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getRoleManagementHref=function getRoleManagementHref(action,roleName){return"#/management/security/roles/".concat(action).concat(roleName?"/".concat(roleName):"")};var RolesGridPage=function(_Component){_inherits(RolesGridPage,_Component);function RolesGridPage(props){var _this;_classCallCheck(this,RolesGridPage);_this=_possibleConstructorReturn(this,_getPrototypeOf(RolesGridPage).call(this,props));_defineProperty(_assertThisInitialized(_this),"getPageContent",(function(){var roles=_this.state.roles;return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_eui.EuiPageContentHeader,null,_react.default.createElement(_eui.EuiPageContentHeaderSection,null,_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h1",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roles.roleTitle",defaultMessage:"Roles"}))),_react.default.createElement(_eui.EuiText,{color:"subdued",size:"s"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roles.subtitle",defaultMessage:"Apply roles to groups of users and manage permissions across the stack."})))),_react.default.createElement(_eui.EuiPageContentHeaderSection,null,_react.default.createElement(_eui.EuiButton,{"data-test-subj":"createRoleButton",href:getRoleManagementHref("edit")},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roles.createRoleButtonLabel",defaultMessage:"Create role"})))),_react.default.createElement(_eui.EuiPageContentBody,null,_this.state.showDeleteConfirmation?_react.default.createElement(_confirm_delete.ConfirmDelete,{onCancel:_this.onCancelDelete,rolesToDelete:_this.state.selection.map((function(role){return role.name})),callback:_this.handleDelete,notifications:_this.props.notifications,rolesAPIClient:_this.props.rolesAPIClient}):null,_react.default.createElement(_eui.EuiInMemoryTable,{itemId:"name",responsive:false,columns:_this.getColumnConfig(),hasActions:true,selection:{selectable:function selectable(role){return!role.metadata||!role.metadata._reserved},selectableMessage:function selectableMessage(selectable){return!selectable?"Role is reserved":""},onSelectionChange:function onSelectionChange(selection){return _this.setState({selection:selection})}},pagination:{initialPageSize:20,pageSizeOptions:[10,20,30,50,100]},items:_this.state.visibleRoles,loading:roles.length===0,search:{toolsLeft:_this.renderToolsLeft(),toolsRight:_this.renderToolsRight(),box:{incremental:true},onChange:function onChange(query){_this.setState({filter:query.queryText,visibleRoles:_this.getVisibleRoles(_this.state.roles,query.queryText,_this.state.includeReservedRoles)})}},sorting:{sort:{field:"name",direction:"asc"}},rowProps:function rowProps(){return{"data-test-subj":"roleRow"}},isSelectable:true})))}));_defineProperty(_assertThisInitialized(_this),"getColumnConfig",(function(){return[{field:"name",name:_i18n.i18n.translate("xpack.security.management.roles.nameColumnName",{defaultMessage:"Role"}),sortable:true,truncateText:true,render:function render(name,record){return _react.default.createElement(_eui.EuiText,{color:"subdued",size:"s"},_react.default.createElement(_eui.EuiLink,{"data-test-subj":"roleRowName",href:getRoleManagementHref("edit",name)},name))}},{field:"metadata",name:_i18n.i18n.translate("xpack.security.management.roles.statusColumnName",{defaultMessage:"Status"}),sortable:function sortable(role){return(0,_model.isRoleEnabled)(role)&&!(0,_model.isRoleDeprecated)(role)},render:function render(metadata,record){return _this.getRoleStatusBadges(record)}},{name:_i18n.i18n.translate("xpack.security.management.roles.actionsColumnName",{defaultMessage:"Actions"}),width:"150px",actions:[{available:function available(role){return!(0,_model.isRoleReadOnly)(role)},render:function render(role){var title=_i18n.i18n.translate("xpack.security.management.roles.editRoleActionName",{defaultMessage:"Edit {roleName}",values:{roleName:role.name}});return _react.default.createElement(_eui.EuiButtonIcon,{"aria-label":title,"data-test-subj":"edit-role-action-".concat(role.name),title:title,color:"primary",iconType:"pencil",href:getRoleManagementHref("edit",role.name)})}},{available:function available(role){return!(0,_model.isRoleReserved)(role)},render:function render(role){var title=_i18n.i18n.translate("xpack.security.management.roles.cloneRoleActionName",{defaultMessage:"Clone {roleName}",values:{roleName:role.name}});return _react.default.createElement(_eui.EuiButtonIcon,{"aria-label":title,"data-test-subj":"clone-role-action-".concat(role.name),title:title,color:"primary",iconType:"copy",href:getRoleManagementHref("clone",role.name)})}}]}]}));_defineProperty(_assertThisInitialized(_this),"getVisibleRoles",(function(roles,filter,includeReservedRoles){return roles.filter((function(role){var normalized="".concat(role.name).toLowerCase();var normalizedQuery=filter.toLowerCase();return normalized.indexOf(normalizedQuery)!==-1&&(includeReservedRoles||!(0,_model.isRoleReserved)(role))}))}));_defineProperty(_assertThisInitialized(_this),"onIncludeReservedRolesChange",(function(e){_this.setState({includeReservedRoles:e.target.checked,visibleRoles:_this.getVisibleRoles(_this.state.roles,_this.state.filter,e.target.checked)})}));_defineProperty(_assertThisInitialized(_this),"getRoleStatusBadges",(function(role){var enabled=(0,_model.isRoleEnabled)(role);var deprecated=(0,_model.isRoleDeprecated)(role);var reserved=(0,_model.isRoleReserved)(role);var badges=[];if(!enabled){badges.push(_react.default.createElement(_badges.DisabledBadge,{"data-test-subj":"roleDisabled"}))}if(reserved){badges.push(_react.default.createElement(_badges.ReservedBadge,{"data-test-subj":"roleReserved",tooltipContent:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roles.reservedRoleBadgeTooltip",defaultMessage:"Reserved roles are built-in and cannot be edited or removed."})}))}if(deprecated){badges.push(_react.default.createElement(_badges.DeprecatedBadge,{"data-test-subj":"roleDeprecated",tooltipContent:(0,_model.getExtendedRoleDeprecationNotice)(role)}))}return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},badges.map((function(badge,index){return _react.default.createElement(_eui.EuiFlexItem,{key:index,grow:false},badge)})))}));_defineProperty(_assertThisInitialized(_this),"handleDelete",(function(){_this.setState({selection:[],showDeleteConfirmation:false});_this.loadRoles()}));_defineProperty(_assertThisInitialized(_this),"onCancelDelete",(function(){_this.setState({showDeleteConfirmation:false})}));_this.state={roles:[],visibleRoles:[],selection:[],filter:"",showDeleteConfirmation:false,permissionDenied:false,includeReservedRoles:true};return _this}_createClass(RolesGridPage,[{key:"componentDidMount",value:function componentDidMount(){this.loadRoles()}},{key:"render",value:function render(){var permissionDenied=this.state.permissionDenied;return permissionDenied?_react.default.createElement(_permission_denied.PermissionDenied,null):this.getPageContent()}},{key:"loadRoles",value:function(){var _loadRoles=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var roles;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return this.props.rolesAPIClient.getRoles();case 3:roles=_context.sent;this.setState({roles:roles,visibleRoles:this.getVisibleRoles(roles,this.state.filter,this.state.includeReservedRoles)});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context["catch"](0);if(_lodash.default.get(_context.t0,"body.statusCode")===403){this.setState({permissionDenied:true})}else{this.props.notifications.toasts.addDanger(_i18n.i18n.translate("xpack.security.management.roles.fetchingRolesErrorMessage",{defaultMessage:"Error fetching roles: {message}",values:{message:_lodash.default.get(_context.t0,"body.message","")}}))}case 10:case"end":return _context.stop()}}}),_callee,this,[[0,7]])})));function loadRoles(){return _loadRoles.apply(this,arguments)}return loadRoles}()},{key:"renderToolsLeft",value:function renderToolsLeft(){var _this2=this;var selection=this.state.selection;if(selection.length===0){return}var numSelected=selection.length;return _react.default.createElement(_eui.EuiButton,{"data-test-subj":"deleteRoleButton",color:"danger",onClick:function onClick(){return _this2.setState({showDeleteConfirmation:true})}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roles.deleteSelectedRolesButtonLabel",defaultMessage:"Delete {numSelected} role{numSelected, plural, one { } other {s}}",values:{numSelected:numSelected}}))}},{key:"renderToolsRight",value:function renderToolsRight(){return _react.default.createElement(_eui.EuiSwitch,{"data-test-subj":"showReservedRolesSwitch",label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roles.showReservedRolesLabel",defaultMessage:"Show reserved roles"}),checked:this.state.includeReservedRoles,onChange:this.onIncludeReservedRolesChange})}}]);return RolesGridPage}(_react.Component);exports.RolesGridPage=RolesGridPage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ConfirmDelete",{enumerable:true,get:function get(){return _confirm_delete.ConfirmDelete}});var _confirm_delete=__webpack_require__(192)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ConfirmDelete=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react2=__webpack_require__(2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ConfirmDelete=function(_Component){_inherits(ConfirmDelete,_Component);function ConfirmDelete(props){var _this;_classCallCheck(this,ConfirmDelete);_this=_possibleConstructorReturn(this,_getPrototypeOf(ConfirmDelete).call(this,props));_defineProperty(_assertThisInitialized(_this),"onConfirmDelete",(function(){_this.setState({deleteInProgress:true},(function(){_this.deleteRoles()}))}));_defineProperty(_assertThisInitialized(_this),"deleteRoles",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _this$props,rolesToDelete,callback,rolesAPIClient,notifications,errors,deleteOperations;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props=_this.props,rolesToDelete=_this$props.rolesToDelete,callback=_this$props.callback,rolesAPIClient=_this$props.rolesAPIClient,notifications=_this$props.notifications;errors=[];deleteOperations=rolesToDelete.map((function(roleName){var deleteRoleTask=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return rolesAPIClient.deleteRole(roleName);case 3:notifications.toasts.addSuccess(_i18n.i18n.translate("xpack.security.management.roles.confirmDelete.roleSuccessfullyDeletedNotificationMessage",{defaultMessage:"Deleted role {roleName}",values:{roleName:roleName}}));_context.next=10;break;case 6:_context.prev=6;_context.t0=_context["catch"](0);errors.push(roleName);notifications.toasts.addDanger(_i18n.i18n.translate("xpack.security.management.roles.confirmDelete.roleDeletingErrorNotificationMessage",{defaultMessage:"Error deleting role {roleName}",values:{roleName:roleName}}));case 10:case"end":return _context.stop()}}}),_callee,null,[[0,6]])})));return function deleteRoleTask(){return _ref2.apply(this,arguments)}}();return deleteRoleTask()}));_context2.next=5;return Promise.all(deleteOperations);case 5:callback(rolesToDelete,errors);case 6:case"end":return _context2.stop()}}}),_callee2)}))));_this.state={deleteInProgress:false};return _this}_createClass(ConfirmDelete,[{key:"render",value:function render(){var rolesToDelete=this.props.rolesToDelete;var moreThanOne=rolesToDelete.length>1;var title=_i18n.i18n.translate("xpack.security.management.roles.deleteRoleTitle",{defaultMessage:"Delete role{value, plural, one {{roleName}} other {s}}",values:{value:rolesToDelete.length,roleName:" ".concat(rolesToDelete[0])}});return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiModal,{onClose:this.props.onCancel},_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,{"data-test-subj":"confirmModalTitleText"},title)),_react.default.createElement(_eui.EuiModalBody,null,_react.default.createElement(_eui.EuiText,null,moreThanOne?_react.default.createElement(_react.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roles.confirmDelete.removingRolesDescription",defaultMessage:"You are about to delete these roles:"})),_react.default.createElement("ul",null,rolesToDelete.map((function(roleName){return _react.default.createElement("li",{key:roleName},roleName)})))):null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roles.deletingRolesWarningMessage",defaultMessage:"You can't undo this operation."})))),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"confirmModalCancelButton",onClick:this.props.onCancel,isDisabled:this.state.deleteInProgress},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roles.confirmDelete.cancelButtonLabel",defaultMessage:"Cancel"})),_react.default.createElement(_eui.EuiButton,{"data-test-subj":"confirmModalConfirmButton",onClick:this.onConfirmDelete,fill:true,color:"danger",isLoading:this.state.deleteInProgress},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roles.confirmDelete.deleteButtonLabel",defaultMessage:"Delete"})))))}}]);return ConfirmDelete}(_react.Component);exports.ConfirmDelete=ConfirmDelete},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PermissionDenied",{enumerable:true,get:function get(){return _permission_denied.PermissionDenied}});var _permission_denied=__webpack_require__(194)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PermissionDenied=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _react2=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PermissionDenied=function PermissionDenied(){return _react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none"},_react2.default.createElement(_eui.EuiPageContent,{horizontalPosition:"center"},_react2.default.createElement(_eui.EuiEmptyPrompt,{iconType:"securityApp",title:_react2.default.createElement("h2",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.roles.deniedPermissionTitle",defaultMessage:"You need permission to manage roles"})),body:_react2.default.createElement("p",{"data-test-subj":"permissionDeniedMessage"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.roles.noPermissionToManageRolesDescription",defaultMessage:"Contact your system administrator."}))})))};exports.PermissionDenied=PermissionDenied},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"EditRolePage",{enumerable:true,get:function get(){return _edit_role_page.EditRolePage}});var _edit_role_page=__webpack_require__(196)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EditRolePage=void 0;var _lodash=__webpack_require__(4);var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));var _model=__webpack_require__(5);var _management_urls=__webpack_require__(13);var _validate_role=__webpack_require__(197);var _delete_role_button=__webpack_require__(198);var _privileges2=__webpack_require__(199);var _reserved_role_badge=__webpack_require__(301);var _model2=__webpack_require__(302);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function useRunAsUsers(userAPIClient,fatalErrors){var _useState=(0,_react2.useState)(null),_useState2=_slicedToArray(_useState,2),userNames=_useState2[0],setUserNames=_useState2[1];(0,_react2.useEffect)((function(){userAPIClient.getUsers().then((function(users){return setUserNames(users.map((function(user){return user.username})))}),(function(err){return fatalErrors.add(err)}))}),[fatalErrors,userAPIClient]);return userNames}function useIndexPatternsTitles(indexPatterns,fatalErrors,notifications){var _useState3=(0,_react2.useState)(null),_useState4=_slicedToArray(_useState3,2),indexPatternsTitles=_useState4[0],setIndexPatternsTitles=_useState4[1];(0,_react2.useEffect)((function(){indexPatterns.getTitles().catch((function(err){var _err$response;if(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===403){notifications.toasts.addDanger({title:_i18n.i18n.translate("xpack.security.management.roles.noIndexPatternsPermission",{defaultMessage:"You need permission to access the list of available index patterns."})});return[]}fatalErrors.add(err);throw err})).then(setIndexPatternsTitles)}),[fatalErrors,indexPatterns,notifications]);return indexPatternsTitles}function usePrivileges(privilegesAPIClient,fatalErrors){var _useState5=(0,_react2.useState)(null),_useState6=_slicedToArray(_useState5,2),privileges=_useState6[0],setPrivileges=_useState6[1];(0,_react2.useEffect)((function(){Promise.all([privilegesAPIClient.getAll({includeActions:true}),privilegesAPIClient.getBuiltIn()]).then((function(_ref){var _ref2=_slicedToArray(_ref,2),kibanaPrivileges=_ref2[0],builtInESPrivileges=_ref2[1];return setPrivileges([kibanaPrivileges,builtInESPrivileges])}),(function(err){return fatalErrors.add(err)}))}),[privilegesAPIClient,fatalErrors]);return privileges}function useRole(rolesAPIClient,fatalErrors,notifications,license,action,roleName){var _useState7=(0,_react2.useState)(null),_useState8=_slicedToArray(_useState7,2),role=_useState8[0],setRole=_useState8[1];(0,_react2.useEffect)((function(){var rolePromise=roleName?rolesAPIClient.getRole(roleName):Promise.resolve({name:"",elasticsearch:{cluster:[],indices:[],run_as:[]},kibana:[],_unrecognized_applications:[]});rolePromise.then((function(fetchedRole){if(action==="clone"&&(0,_model.isRoleReserved)(fetchedRole)){backToRoleList();return}if(fetchedRole.elasticsearch.indices.length===0){var emptyOption={names:[],privileges:[]};var _license$getFeatures=license.getFeatures(),allowRoleDocumentLevelSecurity=_license$getFeatures.allowRoleDocumentLevelSecurity,allowRoleFieldLevelSecurity=_license$getFeatures.allowRoleFieldLevelSecurity;if(allowRoleFieldLevelSecurity){emptyOption.field_security={grant:["*"],except:[]}}if(allowRoleDocumentLevelSecurity){emptyOption.query=""}fetchedRole.elasticsearch.indices.push(emptyOption)}setRole(action==="clone"?(0,_model.prepareRoleClone)(fetchedRole):(0,_model.copyRole)(fetchedRole))})).catch((function(err){var _err$response2;if(((_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.status)===404){notifications.toasts.addDanger({title:_i18n.i18n.translate("xpack.security.management.roles.roleNotFound",{defaultMessage:'No "{roleName}" role found.',values:{roleName:roleName}})});backToRoleList()}else{fatalErrors.add(err)}}))}),[roleName,action,fatalErrors,rolesAPIClient,notifications,license]);return[role,setRole]}function useSpaces(http,fatalErrors,spacesEnabled){var _useState9=(0,_react2.useState)(null),_useState10=_slicedToArray(_useState9,2),spaces=_useState10[0],setSpaces=_useState10[1];(0,_react2.useEffect)((function(){(spacesEnabled?http.get("/api/spaces/space"):Promise.resolve([])).then((function(fetchedSpaces){return setSpaces(fetchedSpaces)}),(function(err){return fatalErrors.add(err)}))}),[http,fatalErrors,spacesEnabled]);return spaces}function useFeatures(getFeatures,fatalErrors){var _useState11=(0,_react2.useState)(null),_useState12=_slicedToArray(_useState11,2),features=_useState12[0],setFeatures=_useState12[1];(0,_react2.useEffect)((function(){getFeatures().catch((function(err){var _err$response3;var unauthorizedForFeatures=((_err$response3=err.response)===null||_err$response3===void 0?void 0:_err$response3.status)===404;if(unauthorizedForFeatures){return[]}fatalErrors.add(err)})).then((function(retrievedFeatures){setFeatures(retrievedFeatures)}))}),[fatalErrors,getFeatures]);return features}function backToRoleList(){window.location.hash=_management_urls.ROLES_PATH}var EditRolePage=function EditRolePage(_ref3){var userAPIClient=_ref3.userAPIClient,indexPatterns=_ref3.indexPatterns,rolesAPIClient=_ref3.rolesAPIClient,indicesAPIClient=_ref3.indicesAPIClient,privilegesAPIClient=_ref3.privilegesAPIClient,getFeatures=_ref3.getFeatures,http=_ref3.http,roleName=_ref3.roleName,action=_ref3.action,fatalErrors=_ref3.fatalErrors,spacesEnabled=_ref3.spacesEnabled,license=_ref3.license,docLinks=_ref3.docLinks,uiCapabilities=_ref3.uiCapabilities,notifications=_ref3.notifications;var _useRef=(0,_react2.useRef)(new _validate_role.RoleValidator({shouldValidate:false})),validator=_useRef.current;var _useState13=(0,_react2.useState)(null),_useState14=_slicedToArray(_useState13,2),formError=_useState14[0],setFormError=_useState14[1];var runAsUsers=useRunAsUsers(userAPIClient,fatalErrors);var indexPatternsTitles=useIndexPatternsTitles(indexPatterns,fatalErrors,notifications);var privileges=usePrivileges(privilegesAPIClient,fatalErrors);var spaces=useSpaces(http,fatalErrors,spacesEnabled);var features=useFeatures(getFeatures,fatalErrors);var _useRole=useRole(rolesAPIClient,fatalErrors,notifications,license,action,roleName),_useRole2=_slicedToArray(_useRole,2),role=_useRole2[0],setRole=_useRole2[1];if(!role||!runAsUsers||!indexPatternsTitles||!privileges||!spaces||!features){return null}var isEditingExistingRole=!!roleName&&action==="edit";var isRoleReadOnly=(0,_model.isRoleReadOnly)(role);var isRoleReserved=(0,_model.isRoleReserved)(role);var isDeprecatedRole=(0,_model.isRoleDeprecated)(role);var _privileges=_slicedToArray(privileges,2),kibanaPrivileges=_privileges[0],builtInESPrivileges=_privileges[1];var getFormTitle=function getFormTitle(){var titleText;var props={tabIndex:0};if(isRoleReserved){titleText=_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.viewingRoleTitle",defaultMessage:"Viewing role"});props["aria-describedby"]="reservedRoleDescription"}else if(isEditingExistingRole){titleText=_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.editRoleTitle",defaultMessage:"Edit role"})}else{titleText=_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.createRoleTitle",defaultMessage:"Create role"})}return _react2.default.createElement(_eui.EuiTitle,{size:"l"},_react2.default.createElement("h1",props,titleText," ",_react2.default.createElement(_reserved_role_badge.ReservedRoleBadge,{role:role})))};var getActionButton=function getActionButton(){if(isEditingExistingRole&&!isRoleReadOnly){return _react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_delete_role_button.DeleteRoleButton,{canDelete:true,onDelete:handleDeleteRole}))}return null};var getRoleName=function getRoleName(){return _react2.default.createElement(_eui.EuiPanel,null,_react2.default.createElement(_eui.EuiFormRow,_extends({label:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.roleNameFormRowTitle",defaultMessage:"Role name"}),helpText:!isRoleReserved&&isEditingExistingRole?_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.roleNameFormRowHelpText",defaultMessage:"A role's name cannot be changed once it has been created."}):undefined},validator.validateRoleName(role)),_react2.default.createElement(_eui.EuiFieldText,{name:"name",value:role.name||"",onChange:onNameChange,"data-test-subj":"roleFormNameInput",readOnly:isRoleReserved||isEditingExistingRole})))};var onNameChange=function onNameChange(e){return setRole(_objectSpread({},role,{name:e.target.value.replace(/\s/g,"_")}))};var getElasticsearchPrivileges=function getElasticsearchPrivileges(){return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_privileges2.ElasticsearchPrivileges,{role:role,editable:!isRoleReadOnly,indicesAPIClient:indicesAPIClient,onChange:onRoleChange,runAsUsers:runAsUsers,validator:validator,indexPatterns:indexPatternsTitles,builtinESPrivileges:builtInESPrivileges,license:license,docLinks:docLinks}))};var onRoleChange=function onRoleChange(newRole){return setRole(newRole)};var getKibanaPrivileges=function getKibanaPrivileges(){return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_privileges2.KibanaPrivilegesRegion,{kibanaPrivileges:new _model2.KibanaPrivileges(kibanaPrivileges,features),spaces:spaces,spacesEnabled:spacesEnabled,uiCapabilities:uiCapabilities,canCustomizeSubFeaturePrivileges:license.getFeatures().allowSubFeaturePrivileges,editable:!isRoleReadOnly,role:role,onChange:onRoleChange,validator:validator}))};var getFormButtons=function getFormButtons(){if(isRoleReadOnly){return getReturnToRoleListButton()}return _react2.default.createElement(_eui.EuiFlexGroup,{responsive:false},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},getSaveButton()),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},getCancelButton()),_react2.default.createElement(_eui.EuiFlexItem,{grow:true}),getActionButton())};var getReturnToRoleListButton=function getReturnToRoleListButton(){return _react2.default.createElement(_eui.EuiButton,{onClick:backToRoleList,"data-test-subj":"roleFormReturnButton"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.returnToRoleListButtonLabel",defaultMessage:"Return to role list"}))};var getSaveButton=function getSaveButton(){var saveText=isEditingExistingRole?_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.updateRoleText",defaultMessage:"Update role"}):_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.createRoleText",defaultMessage:"Create role"});return _react2.default.createElement(_eui.EuiButton,{"data-test-subj":"roleFormSaveButton",fill:true,onClick:saveRole,disabled:isRoleReserved},saveText)};var getCancelButton=function getCancelButton(){return _react2.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"roleFormCancelButton",onClick:backToRoleList},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.cancelButtonLabel",defaultMessage:"Cancel"}))};var saveRole=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var result;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:validator.enableValidation();result=validator.validateForSave(role);if(!result.isInvalid){_context.next=6;break}setFormError(result);_context.next=18;break;case 6:setFormError(null);_context.prev=7;_context.next=10;return rolesAPIClient.saveRole({role:role,spacesEnabled:spacesEnabled});case 10:_context.next=16;break;case 12:_context.prev=12;_context.t0=_context["catch"](7);notifications.toasts.addDanger((0,_lodash.get)(_context.t0,"data.message"));return _context.abrupt("return");case 16:notifications.toasts.addSuccess(_i18n.i18n.translate("xpack.security.management.editRole.roleSuccessfullySavedNotificationMessage",{defaultMessage:"Saved role"}));backToRoleList();case 18:case"end":return _context.stop()}}}),_callee,null,[[7,12]])})));return function saveRole(){return _ref4.apply(this,arguments)}}();var handleDeleteRole=function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return rolesAPIClient.deleteRole(role.name);case 3:_context2.next=9;break;case 5:_context2.prev=5;_context2.t0=_context2["catch"](0);notifications.toasts.addDanger((0,_lodash.get)(_context2.t0,"data.message"));return _context2.abrupt("return");case 9:notifications.toasts.addSuccess(_i18n.i18n.translate("xpack.security.management.editRole.roleSuccessfullyDeletedNotificationMessage",{defaultMessage:"Deleted role"}));backToRoleList();case 11:case"end":return _context2.stop()}}}),_callee2,null,[[0,5]])})));return function handleDeleteRole(){return _ref5.apply(this,arguments)}}();var description=spacesEnabled?_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.setPrivilegesToKibanaSpacesDescription",defaultMessage:"Set privileges on your Elasticsearch data and control access to your Kibana spaces."}):_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.setPrivilegesToKibanaDescription",defaultMessage:"Set privileges on your Elasticsearch data and control access to Kibana."});return _react2.default.createElement("div",{className:"editRolePage"},_react2.default.createElement(_eui.EuiForm,formError,getFormTitle(),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiText,{size:"s"},description),isRoleReserved&&_react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiText,{size:"s",color:"subdued"},_react2.default.createElement("p",{id:"reservedRoleDescription",tabIndex:0},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.modifyingReversedRolesDescription",defaultMessage:"Reserved roles are built-in and cannot be removed or modified."})))),isDeprecatedRole&&_react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiCallOut,{title:(0,_model.getExtendedRoleDeprecationNotice)(role),color:"warning",iconType:"alert"})),_react2.default.createElement(_eui.EuiSpacer,null),getRoleName(),getElasticsearchPrivileges(),getKibanaPrivileges(),_react2.default.createElement(_eui.EuiSpacer,null),getFormButtons()))};exports.EditRolePage=EditRolePage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RoleValidator=void 0;var _i18n=__webpack_require__(3);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RoleValidator=function(){function RoleValidator(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,RoleValidator);_defineProperty(this,"shouldValidate",void 0);this.shouldValidate=options.shouldValidate}_createClass(RoleValidator,[{key:"enableValidation",value:function enableValidation(){this.shouldValidate=true}},{key:"disableValidation",value:function disableValidation(){this.shouldValidate=false}},{key:"validateRoleName",value:function validateRoleName(role){if(!this.shouldValidate){return valid()}if(!role.name){return invalid(_i18n.i18n.translate("xpack.security.management.editRole.validateRole.provideRoleNameWarningMessage",{defaultMessage:"Please provide a role name"}))}if(role.name.length>1024){return invalid(_i18n.i18n.translate("xpack.security.management.editRole.validateRole.nameLengthWarningMessage",{defaultMessage:"Name must not exceed 1024 characters"}))}if(!role.name.match(/^[a-zA-Z_][a-zA-Z0-9_@\-\$\.]*$/)){return invalid(_i18n.i18n.translate("xpack.security.management.editRole.validateRole.nameAllowedCharactersWarningMessage",{defaultMessage:"Name must begin with a letter or underscore and contain only letters, underscores, and numbers."}))}return valid()}},{key:"validateIndexPrivileges",value:function validateIndexPrivileges(role){var _this=this;if(!this.shouldValidate){return valid()}if(!Array.isArray(role.elasticsearch.indices)){throw new TypeError(_i18n.i18n.translate("xpack.security.management.editRole.validateRole.indicesTypeErrorMessage",{defaultMessage:"Expected {elasticIndices} to be an array",values:{elasticIndices:'"role.elasticsearch.indices"'}}))}var areIndicesValid=role.elasticsearch.indices.map((function(indexPriv){return _this.validateIndexPrivilege(indexPriv)})).find((function(result){return result.isInvalid}))==null;if(areIndicesValid){return valid()}return invalid()}},{key:"validateIndexPrivilege",value:function validateIndexPrivilege(indexPrivilege){if(!this.shouldValidate){return valid()}if(indexPrivilege.names.length&&!indexPrivilege.privileges.length){return invalid(_i18n.i18n.translate("xpack.security.management.editRole.validateRole.onePrivilegeRequiredWarningMessage",{defaultMessage:"At least one privilege is required"}))}return valid()}},{key:"validateSelectedSpaces",value:function validateSelectedSpaces(spaceIds,privilege){if(!this.shouldValidate){return valid()}if(!privilege){return valid()}if(Array.isArray(spaceIds)&&spaceIds.length>0){return valid()}return invalid(_i18n.i18n.translate("xpack.security.management.editRole.validateRole.oneSpaceRequiredWarningMessage",{defaultMessage:"At least one space is required"}))}},{key:"validateSelectedPrivilege",value:function validateSelectedPrivilege(spaceIds,privilege){if(!this.shouldValidate){return valid()}if(!spaceIds||spaceIds.length===0){return valid()}if(privilege){return valid()}return invalid(_i18n.i18n.translate("xpack.security.management.editRole.validateRole.privilegeRequiredWarningMessage",{defaultMessage:"Privilege is required"}))}},{key:"validateSpacePrivileges",value:function validateSpacePrivileges(role){if(!this.shouldValidate){return valid()}var privileges=role.kibana||[];var arePrivilegesValid=privileges.every((function(assignedPrivilege){return assignedPrivilege.base.length>0||Object.keys(assignedPrivilege.feature).length>0}));if(arePrivilegesValid){return valid()}return invalid()}},{key:"validateForSave",value:function validateForSave(role){var _this$validateRoleNam=this.validateRoleName(role),isNameInvalid=_this$validateRoleNam.isInvalid;var _this$validateIndexPr=this.validateIndexPrivileges(role),areIndicesInvalid=_this$validateIndexPr.isInvalid;var _this$validateSpacePr=this.validateSpacePrivileges(role),areSpacePrivilegesInvalid=_this$validateSpacePr.isInvalid;if(isNameInvalid||areIndicesInvalid||areSpacePrivilegesInvalid){return invalid()}return valid()}}]);return RoleValidator}();exports.RoleValidator=RoleValidator;function invalid(error){return{isInvalid:true,error:error}}function valid(){return{isInvalid:false}}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DeleteRoleButton=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DeleteRoleButton=function(_Component){_inherits(DeleteRoleButton,_Component);function DeleteRoleButton(){var _getPrototypeOf2;var _this;_classCallCheck(this,DeleteRoleButton);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DeleteRoleButton)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{showModal:false});_defineProperty(_assertThisInitialized(_this),"maybeShowModal",(function(){if(!_this.state.showModal){return null}return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiConfirmModal,{title:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.deleteRoleButton.deleteRoleTitle",defaultMessage:"Delete Role"}),onCancel:_this.closeModal,onConfirm:_this.onConfirmDelete,cancelButtonText:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.deleteRoleButton.cancelButtonLabel",defaultMessage:"No, don't delete"}),confirmButtonText:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.deleteRoleButton.confirmButtonLabel",defaultMessage:"Yes, delete role"}),buttonColor:"danger"},_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.deleteRoleButton.deletingRoleConfirmationText",defaultMessage:"Are you sure you want to delete this role?"})),_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.deleteRoleButton.deletingRoleWarningText",defaultMessage:"This action cannot be undone!"}))))}));_defineProperty(_assertThisInitialized(_this),"closeModal",(function(){_this.setState({showModal:false})}));_defineProperty(_assertThisInitialized(_this),"showModal",(function(){_this.setState({showModal:true})}));_defineProperty(_assertThisInitialized(_this),"onConfirmDelete",(function(){_this.closeModal();_this.props.onDelete()}));return _this}_createClass(DeleteRoleButton,[{key:"render",value:function render(){if(!this.props.canDelete){return null}return _react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_eui.EuiButtonEmpty,{color:"danger",onClick:this.showModal},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.deleteRoleButton.deleteRoleButtonLabel",defaultMessage:"Delete role"})),this.maybeShowModal())}}]);return DeleteRoleButton}(_react2.Component);exports.DeleteRoleButton=DeleteRoleButton},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ElasticsearchPrivileges",{enumerable:true,get:function get(){return _elasticsearch_privileges.ElasticsearchPrivileges}});Object.defineProperty(exports,"KibanaPrivilegesRegion",{enumerable:true,get:function get(){return _kibana_privileges_region.KibanaPrivilegesRegion}});var _elasticsearch_privileges=__webpack_require__(200);var _kibana_privileges_region=__webpack_require__(205)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ElasticsearchPrivileges=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));var _collapsible_panel=__webpack_require__(50);var _cluster_privileges=__webpack_require__(202);var _index_privileges=__webpack_require__(203);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ElasticsearchPrivileges=function(_Component){_inherits(ElasticsearchPrivileges,_Component);function ElasticsearchPrivileges(){var _getPrototypeOf2;var _this;_classCallCheck(this,ElasticsearchPrivileges);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ElasticsearchPrivileges)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"getForm",(function(){var _this$props=_this.props,role=_this$props.role,indicesAPIClient=_this$props.indicesAPIClient,docLinks=_this$props.docLinks,validator=_this$props.validator,onChange=_this$props.onChange,editable=_this$props.editable,indexPatterns=_this$props.indexPatterns,license=_this$props.license,builtinESPrivileges=_this$props.builtinESPrivileges;var indexProps={role:role,indicesAPIClient:indicesAPIClient,validator:validator,indexPatterns:indexPatterns,license:license,onChange:onChange,availableIndexPrivileges:builtinESPrivileges.index};return _react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_eui.EuiDescribedFormGroup,{title:_react2.default.createElement("h3",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.elasticSearchPrivileges.clusterPrivilegesTitle",defaultMessage:"Cluster privileges"})),description:_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.elasticSearchPrivileges.manageRoleActionsDescription",defaultMessage:"Manage the actions this role can perform against your cluster. "}),_this.learnMore(docLinks.getESClusterPrivilegesDocUrl()))},_react2.default.createElement(_eui.EuiFormRow,{fullWidth:true,hasEmptyLabelSpace:true},_react2.default.createElement(_cluster_privileges.ClusterPrivileges,{role:_this.props.role,onChange:_this.onClusterPrivilegesChange,builtinClusterPrivileges:builtinESPrivileges.cluster}))),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiDescribedFormGroup,{title:_react2.default.createElement("h3",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.elasticSearchPrivileges.runAsPrivilegesTitle",defaultMessage:"Run As privileges"})),description:_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.elasticSearchPrivileges.howToBeSubmittedOnBehalfOfOtherUsersDescription",defaultMessage:"Allow requests to be submitted on the behalf of other users. "}),_this.learnMore(docLinks.getESRunAsPrivilegesDocUrl()))},_react2.default.createElement(_eui.EuiFormRow,{hasEmptyLabelSpace:true},_react2.default.createElement(_eui.EuiComboBox,{placeholder:_this.props.editable?_i18n.i18n.translate("xpack.security.management.editRole.elasticSearchPrivileges.addUserTitle",{defaultMessage:"Add a user…"}):undefined,options:_this.props.runAsUsers.map((function(username){return{id:username,label:username,isGroupLabelOption:false}})),selectedOptions:_this.props.role.elasticsearch.run_as.map((function(u){return{label:u}})),onCreateOption:_this.onCreateRunAsOption,onChange:_this.onRunAsUserChange,isDisabled:!editable}))),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiTitle,{size:"xs"},_react2.default.createElement("h3",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.elasticSearchPrivileges.indexPrivilegesTitle",defaultMessage:"Index privileges"}))),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiText,{size:"s",color:"subdued"},_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.elasticSearchPrivileges.controlAccessToClusterDataDescription",defaultMessage:"Control access to the data in your cluster. "}),_this.learnMore(docLinks.getESIndicesPrivilegesDocUrl()))),_react2.default.createElement(_index_privileges.IndexPrivileges,indexProps),_react2.default.createElement(_eui.EuiHorizontalRule,null),_this.props.editable&&_react2.default.createElement(_eui.EuiButton,{iconType:"plusInCircleFilled",onClick:_this.addIndexPrivilege},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.elasticSearchPrivileges.addIndexPrivilegesButtonLabel",defaultMessage:"Add index privilege"})))}));_defineProperty(_assertThisInitialized(_this),"learnMore",(function(href){return _react2.default.createElement(_eui.EuiLink,{className:"editRole__learnMore",href:href,target:"_blank"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.elasticSearchPrivileges.learnMoreLinkText",defaultMessage:"Learn more"}))}));_defineProperty(_assertThisInitialized(_this),"addIndexPrivilege",(function(){var role=_this.props.role;var newIndices=[].concat(_toConsumableArray(role.elasticsearch.indices),[{names:[],privileges:[],field_security:{grant:["*"]}}]);_this.props.onChange(_objectSpread({},_this.props.role,{elasticsearch:_objectSpread({},_this.props.role.elasticsearch,{indices:newIndices})}))}));_defineProperty(_assertThisInitialized(_this),"onClusterPrivilegesChange",(function(cluster){var role=_objectSpread({},_this.props.role,{elasticsearch:_objectSpread({},_this.props.role.elasticsearch,{cluster:cluster})});_this.props.onChange(role)}));_defineProperty(_assertThisInitialized(_this),"onRunAsUserChange",(function(users){var role=_objectSpread({},_this.props.role,{elasticsearch:_objectSpread({},_this.props.role.elasticsearch,{run_as:users.map((function(u){return u.label}))})});_this.props.onChange(role)}));_defineProperty(_assertThisInitialized(_this),"onCreateRunAsOption",(function(option){var newRunAsUsers=_this.props.role.elasticsearch.run_as.concat(option);var role=_objectSpread({},_this.props.role,{elasticsearch:_objectSpread({},_this.props.role.elasticsearch,{run_as:newRunAsUsers})});_this.props.onChange(role)}));return _this}_createClass(ElasticsearchPrivileges,[{key:"render",value:function render(){return _react2.default.createElement(_collapsible_panel.CollapsiblePanel,{iconType:"logoElasticsearch",title:"Elasticsearch"},this.getForm())}}]);return ElasticsearchPrivileges}(_react2.Component);exports.ElasticsearchPrivileges=ElasticsearchPrivileges},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.CollapsiblePanel=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var CollapsiblePanel=function(_Component){_inherits(CollapsiblePanel,_Component);function CollapsiblePanel(props){var _this;_classCallCheck(this,CollapsiblePanel);_this=_possibleConstructorReturn(this,_getPrototypeOf(CollapsiblePanel).call(this,props));_defineProperty(_assertThisInitialized(_this),"state",{collapsed:false});_defineProperty(_assertThisInitialized(_this),"getTitle",(function(){return _react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"baseline",gutterSize:"s",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiTitle,null,_react2.default.createElement("h2",null,_this.props.iconType&&_react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_eui.EuiIcon,{type:_this.props.iconType,size:"xl",className:"collapsiblePanel__logo"})," "),_this.props.title))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiLink,{onClick:_this.toggleCollapsed},_this.state.collapsed?_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.collapsiblePanel.showLinkText",defaultMessage:"show"}):_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.collapsiblePanel.hideLinkText",defaultMessage:"hide"}))))}));_defineProperty(_assertThisInitialized(_this),"getForm",(function(){if(_this.state.collapsed){return null}return _react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_eui.EuiSpacer,null),_this.props.children)}));_defineProperty(_assertThisInitialized(_this),"toggleCollapsed",(function(){_this.setState({collapsed:!_this.state.collapsed})}));_this.state={collapsed:props.initiallyCollapsed||false};return _this}_createClass(CollapsiblePanel,[{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiPanel,null,this.getTitle(),this.getForm())}}]);return CollapsiblePanel}(_react2.Component);exports.CollapsiblePanel=CollapsiblePanel},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ClusterPrivileges=void 0;var _eui=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _lodash=_interopRequireDefault(__webpack_require__(4));var _model=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ClusterPrivileges=function(_Component){_inherits(ClusterPrivileges,_Component);function ClusterPrivileges(){var _getPrototypeOf2;var _this;_classCallCheck(this,ClusterPrivileges);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ClusterPrivileges)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"buildComboBox",(function(items){var role=_this.props.role;var options=items.map((function(i){return{label:i}}));var selectedOptions=(role.elasticsearch.cluster||[]).map((function(k){return{label:k}}));return _react.default.createElement(_eui.EuiFlexItem,{key:"clusterPrivs"},_react.default.createElement(_eui.EuiComboBox,{"data-test-subj":"cluster-privileges-combobox",options:options,selectedOptions:selectedOptions,onChange:_this.onClusterPrivilegesChange,onCreateOption:_this.onCreateCustomPrivilege,isDisabled:(0,_model.isRoleReadOnly)(role)}))}));_defineProperty(_assertThisInitialized(_this),"onClusterPrivilegesChange",(function(selectedPrivileges){_this.props.onChange(selectedPrivileges.map((function(priv){return priv.label})))}));_defineProperty(_assertThisInitialized(_this),"onCreateCustomPrivilege",(function(customPrivilege){_this.props.onChange([].concat(_toConsumableArray(_this.props.role.elasticsearch.cluster),[customPrivilege]))}));_defineProperty(_assertThisInitialized(_this),"getAvailableClusterPrivileges",(function(){var availableClusterPrivileges=[].concat(_toConsumableArray(_this.props.builtinClusterPrivileges),_toConsumableArray(_this.props.role.elasticsearch.cluster));return _lodash.default.uniq(availableClusterPrivileges)}));return _this}_createClass(ClusterPrivileges,[{key:"render",value:function render(){var availableClusterPrivileges=this.getAvailableClusterPrivileges();return _react.default.createElement(_eui.EuiFlexGroup,null,this.buildComboBox(availableClusterPrivileges))}}]);return ClusterPrivileges}(_react.Component);exports.ClusterPrivileges=ClusterPrivileges},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPrivileges=void 0;var _lodash=_interopRequireDefault(__webpack_require__(4));var _react=_interopRequireWildcard(__webpack_require__(0));var _model=__webpack_require__(5);var _index_privilege_form=__webpack_require__(204);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IndexPrivileges=function(_Component){_inherits(IndexPrivileges,_Component);function IndexPrivileges(props){var _this;_classCallCheck(this,IndexPrivileges);_this=_possibleConstructorReturn(this,_getPrototypeOf(IndexPrivileges).call(this,props));_defineProperty(_assertThisInitialized(_this),"addIndexPrivilege",(function(){var role=_this.props.role;var newIndices=[].concat(_toConsumableArray(role.elasticsearch.indices),[{names:[],privileges:[],field_security:{grant:["*"]}}]);_this.props.onChange(_objectSpread({},_this.props.role,{elasticsearch:_objectSpread({},_this.props.role.elasticsearch,{indices:newIndices})}))}));_defineProperty(_assertThisInitialized(_this),"onIndexPrivilegeChange",(function(privilegeIndex){return function(updatedPrivilege){var role=_this.props.role;var indices=role.elasticsearch.indices;var newIndices=_toConsumableArray(indices);newIndices[privilegeIndex]=updatedPrivilege;_this.props.onChange(_objectSpread({},_this.props.role,{elasticsearch:_objectSpread({},_this.props.role.elasticsearch,{indices:newIndices})}));_this.loadAvailableFields(newIndices)}}));_defineProperty(_assertThisInitialized(_this),"onIndexPrivilegeDelete",(function(privilegeIndex){return function(){var role=_this.props.role;var newIndices=_toConsumableArray(role.elasticsearch.indices);newIndices.splice(privilegeIndex,1);_this.props.onChange(_objectSpread({},_this.props.role,{elasticsearch:_objectSpread({},_this.props.role.elasticsearch,{indices:newIndices})}))}}));_defineProperty(_assertThisInitialized(_this),"isPlaceholderPrivilege",(function(indexPrivilege){return indexPrivilege.names.length===0}));_defineProperty(_assertThisInitialized(_this),"loadFieldsForPattern",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(pattern){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(pattern){_context.next=2;break}return _context.abrupt("return",_defineProperty({},pattern,[]));case 2:_context.prev=2;_context.t0=_defineProperty;_context.t1={};_context.t2=pattern;_context.next=8;return _this.props.indicesAPIClient.getFields(pattern);case 8:_context.t3=_context.sent;return _context.abrupt("return",(0,_context.t0)(_context.t1,_context.t2,_context.t3));case 12:_context.prev=12;_context.t4=_context["catch"](2);return _context.abrupt("return",_defineProperty({},pattern,[]));case 15:case"end":return _context.stop()}}}),_callee,null,[[2,12]])})));return function(_x){return _ref.apply(this,arguments)}}());_this.state={availableFields:{}};return _this}_createClass(IndexPrivileges,[{key:"componentDidMount",value:function componentDidMount(){this.loadAvailableFields(this.props.role.elasticsearch.indices)}},{key:"render",value:function render(){var _this2=this;var _this$props$role$elas=this.props.role.elasticsearch.indices,indices=_this$props$role$elas===void 0?[]:_this$props$role$elas;var _this$props=this.props,indexPatterns=_this$props.indexPatterns,license=_this$props.license,availableIndexPrivileges=_this$props.availableIndexPrivileges;var _license$getFeatures=license.getFeatures(),allowRoleDocumentLevelSecurity=_license$getFeatures.allowRoleDocumentLevelSecurity,allowRoleFieldLevelSecurity=_license$getFeatures.allowRoleFieldLevelSecurity;var props={indexPatterns:indexPatterns,allowDocumentLevelSecurity:allowRoleDocumentLevelSecurity||!(0,_model.isRoleEnabled)(this.props.role),allowFieldLevelSecurity:allowRoleFieldLevelSecurity||!(0,_model.isRoleEnabled)(this.props.role),isRoleReadOnly:(0,_model.isRoleReadOnly)(this.props.role)};var forms=indices.map((function(indexPrivilege,idx){return _react.default.createElement(_index_privilege_form.IndexPrivilegeForm,_extends({key:idx},props,{formIndex:idx,validator:_this2.props.validator,availableIndexPrivileges:availableIndexPrivileges,indexPrivilege:indexPrivilege,availableFields:_this2.state.availableFields[indexPrivilege.names.join(",")],onChange:_this2.onIndexPrivilegeChange(idx),onDelete:_this2.onIndexPrivilegeDelete(idx)}))}));return _react.default.createElement(_react.Fragment,null,forms)}},{key:"loadAvailableFields",value:function loadAvailableFields(privileges){var _this3=this;if((0,_model.isRoleReadOnly)(this.props.role)){return}var patterns=privileges.map((function(index){return index.names.join(",")}));var cachedPatterns=Object.keys(this.state.availableFields);var patternsToFetch=_lodash.default.difference(patterns,cachedPatterns);var fetchRequests=patternsToFetch.map(this.loadFieldsForPattern);Promise.all(fetchRequests).then((function(response){_this3.setState({availableFields:_objectSpread({},_this3.state.availableFields,{},response.reduce((function(acc,o){return _objectSpread({},acc,{},o)}),{}))})}))}}]);return IndexPrivileges}(_react.Component);exports.IndexPrivileges=IndexPrivileges},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPrivilegeForm=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react=__webpack_require__(2);var _lodash=_interopRequireDefault(__webpack_require__(4));var _react2=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var fromOption=function fromOption(option){return option.label};var toOption=function toOption(value){return{label:value}};var IndexPrivilegeForm=function(_Component){_inherits(IndexPrivilegeForm,_Component);function IndexPrivilegeForm(props){var _this;_classCallCheck(this,IndexPrivilegeForm);_this=_possibleConstructorReturn(this,_getPrototypeOf(IndexPrivilegeForm).call(this,props));_defineProperty(_assertThisInitialized(_this),"getPrivilegeForm",(function(){return _react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,_extends({label:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.indexPrivilegeForm.indicesFormRowLabel",defaultMessage:"Indices"}),fullWidth:true},_this.props.validator.validateIndexPrivilege(_this.props.indexPrivilege)),_react2.default.createElement(_eui.EuiComboBox,{"data-test-subj":"indicesInput".concat(_this.props.formIndex),options:_this.props.indexPatterns.map(toOption),selectedOptions:_this.props.indexPrivilege.names.map(toOption),onCreateOption:_this.onCreateIndexPatternOption,onChange:_this.onIndexPatternsChange,isDisabled:_this.props.isRoleReadOnly}))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.indexPrivilegeForm.privilegesFormRowLabel",defaultMessage:"Privileges"}),fullWidth:true},_react2.default.createElement(_eui.EuiComboBox,{"data-test-subj":"privilegesInput".concat(_this.props.formIndex),options:_this.props.availableIndexPrivileges.map(toOption),selectedOptions:_this.props.indexPrivilege.privileges.map(toOption),onChange:_this.onPrivilegeChange,isDisabled:_this.props.isRoleReadOnly})))),_react2.default.createElement(_eui.EuiSpacer,null),_this.getFieldLevelControls(),_this.getGrantedDocumentsControl())}));_defineProperty(_assertThisInitialized(_this),"getFieldLevelControls",(function(){var _this$props=_this.props,allowFieldLevelSecurity=_this$props.allowFieldLevelSecurity,allowDocumentLevelSecurity=_this$props.allowDocumentLevelSecurity,availableFields=_this$props.availableFields,indexPrivilege=_this$props.indexPrivilege,isRoleReadOnly=_this$props.isRoleReadOnly;if(!allowFieldLevelSecurity){return null}var _this$getFieldSecurit=_this.getFieldSecurity(indexPrivilege),grant=_this$getFieldSecurit.grant,except=_this$getFieldSecurit.except;return _react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement(_eui.EuiFlexGroup,{direction:"column"},!isRoleReadOnly&&_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiSwitch,{"data-test-subj":"restrictFieldsQuery".concat(_this.props.formIndex),label:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRoles.indexPrivilegeForm.grantFieldPrivilegesLabel",defaultMessage:"Grant access to specific fields"}),compressed:true,checked:_this.state.fieldSecurityExpanded,onChange:_this.toggleFieldSecurity})),_this.state.fieldSecurityExpanded&&_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRoles.indexPrivilegeForm.grantedFieldsFormRowLabel",defaultMessage:"Granted fields"}),fullWidth:true,className:"indexPrivilegeForm__grantedFieldsRow",helpText:!isRoleReadOnly&&grant.length===0?_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRoles.indexPrivilegeForm.grantedFieldsFormRowHelpText",defaultMessage:"If no fields are granted, then users assigned to this role will not be able to see any data for this index."}):undefined},_react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_eui.EuiComboBox,{"data-test-subj":"fieldInput".concat(_this.props.formIndex),options:availableFields?availableFields.map(toOption):[],selectedOptions:grant.map(toOption),onCreateOption:_this.onCreateGrantedField,onChange:_this.onGrantedFieldsChange,isDisabled:_this.props.isRoleReadOnly})))),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRoles.indexPrivilegeForm.deniedFieldsFormRowLabel",defaultMessage:"Denied fields"}),fullWidth:true,className:"indexPrivilegeForm__deniedFieldsRow"},_react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_eui.EuiComboBox,{"data-test-subj":"deniedFieldInput".concat(_this.props.formIndex),options:availableFields?availableFields.map(toOption):[],selectedOptions:except.map(toOption),onCreateOption:_this.onCreateDeniedField,onChange:_this.onDeniedFieldsChange,isDisabled:isRoleReadOnly}))))))),allowDocumentLevelSecurity&&_react2.default.createElement(_eui.EuiSpacer,null))}));_defineProperty(_assertThisInitialized(_this),"getGrantedDocumentsControl",(function(){var _this$props2=_this.props,allowDocumentLevelSecurity=_this$props2.allowDocumentLevelSecurity,indexPrivilege=_this$props2.indexPrivilege,isRoleReadOnly=_this$props2.isRoleReadOnly;if(!allowDocumentLevelSecurity){return null}return _react2.default.createElement(_eui.EuiFlexGroup,{direction:"column"},!_this.props.isRoleReadOnly&&_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiSwitch,{"data-test-subj":"restrictDocumentsQuery".concat(_this.props.formIndex),label:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.indexPrivilegeForm.grantReadPrivilegesLabel",defaultMessage:"Grant read privileges to specific documents"}),compressed:true,checked:_this.state.queryExpanded,onChange:_this.toggleDocumentQuery,disabled:isRoleReadOnly})),_this.state.queryExpanded&&_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{label:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.indexPrivilegeForm.grantedDocumentsQueryFormRowLabel",defaultMessage:"Granted documents query"}),fullWidth:true},_react2.default.createElement(_eui.EuiTextArea,{"data-test-subj":"queryInput".concat(_this.props.formIndex),style:{resize:"none"},fullWidth:true,value:indexPrivilege.query,onChange:_this.onQueryChange,readOnly:_this.props.isRoleReadOnly}))))}));_defineProperty(_assertThisInitialized(_this),"toggleDocumentQuery",(function(){var willToggleOff=_this.state.queryExpanded;var willToggleOn=!willToggleOff;_this.setState({queryExpanded:!_this.state.queryExpanded,documentQuery:willToggleOff?_this.props.indexPrivilege.query:_this.state.documentQuery});if(willToggleOff){_this.props.onChange(_objectSpread({},_this.props.indexPrivilege,{query:""}))}if(willToggleOn&&!_this.props.indexPrivilege.query&&_this.state.documentQuery){_this.props.onChange(_objectSpread({},_this.props.indexPrivilege,{query:_this.state.documentQuery}))}}));_defineProperty(_assertThisInitialized(_this),"toggleFieldSecurity",(function(){var willToggleOff=_this.state.fieldSecurityExpanded;var willToggleOn=!willToggleOff;var _this$getFieldSecurit2=_this.getFieldSecurity(_this.props.indexPrivilege),grant=_this$getFieldSecurit2.grant,except=_this$getFieldSecurit2.except;_this.setState({fieldSecurityExpanded:!_this.state.fieldSecurityExpanded,grantedFields:willToggleOff?grant:_this.state.grantedFields,exceptedFields:willToggleOff?except:_this.state.exceptedFields});if(willToggleOff){_this.props.onChange(_objectSpread({},_this.props.indexPrivilege,{field_security:{grant:["*"],except:[]}}))}var hasConfiguredFieldSecurity=_this.isFieldSecurityConfigured(_this.props.indexPrivilege);var hasSavedFieldSecurity=_this.state.exceptedFields.length>0||_this.state.grantedFields.length>0;if(willToggleOn&&!hasConfiguredFieldSecurity&&hasSavedFieldSecurity){_this.props.onChange(_objectSpread({},_this.props.indexPrivilege,{field_security:{grant:_this.state.grantedFields,except:_this.state.exceptedFields}}))}}));_defineProperty(_assertThisInitialized(_this),"onCreateIndexPatternOption",(function(option){var newIndexPatterns=_this.props.indexPrivilege.names.concat([option]);_this.props.onChange(_objectSpread({},_this.props.indexPrivilege,{names:newIndexPatterns}))}));_defineProperty(_assertThisInitialized(_this),"onIndexPatternsChange",(function(newPatterns){_this.props.onChange(_objectSpread({},_this.props.indexPrivilege,{names:newPatterns.map(fromOption)}))}));_defineProperty(_assertThisInitialized(_this),"onPrivilegeChange",(function(newPrivileges){_this.props.onChange(_objectSpread({},_this.props.indexPrivilege,{privileges:newPrivileges.map(fromOption)}))}));_defineProperty(_assertThisInitialized(_this),"onQueryChange",(function(e){_this.props.onChange(_objectSpread({},_this.props.indexPrivilege,{query:e.target.value}))}));_defineProperty(_assertThisInitialized(_this),"onCreateGrantedField",(function(grant){if(!_this.props.indexPrivilege.field_security||!_this.props.indexPrivilege.field_security.grant){return}var newGrants=_this.props.indexPrivilege.field_security.grant.concat([grant]);_this.props.onChange(_objectSpread({},_this.props.indexPrivilege,{field_security:_objectSpread({},_this.props.indexPrivilege.field_security,{grant:newGrants})}))}));_defineProperty(_assertThisInitialized(_this),"onGrantedFieldsChange",(function(grantedFields){_this.props.onChange(_objectSpread({},_this.props.indexPrivilege,{field_security:_objectSpread({},_this.props.indexPrivilege.field_security,{grant:grantedFields.map(fromOption)})}))}));_defineProperty(_assertThisInitialized(_this),"onCreateDeniedField",(function(except){if(!_this.props.indexPrivilege.field_security||!_this.props.indexPrivilege.field_security.except){return}var newExcepts=_this.props.indexPrivilege.field_security.except.concat([except]);_this.props.onChange(_objectSpread({},_this.props.indexPrivilege,{field_security:_objectSpread({},_this.props.indexPrivilege.field_security,{except:newExcepts})}))}));_defineProperty(_assertThisInitialized(_this),"onDeniedFieldsChange",(function(deniedFields){_this.props.onChange(_objectSpread({},_this.props.indexPrivilege,{field_security:_objectSpread({},_this.props.indexPrivilege.field_security,{except:deniedFields.map(fromOption)})}))}));_defineProperty(_assertThisInitialized(_this),"getFieldSecurity",(function(indexPrivilege){var _ref=indexPrivilege.field_security||{},_ref$grant=_ref.grant,grant=_ref$grant===void 0?[]:_ref$grant,_ref$except=_ref.except,except=_ref$except===void 0?[]:_ref$except;return{grant:grant,except:except}}));_defineProperty(_assertThisInitialized(_this),"isFieldSecurityConfigured",(function(indexPrivilege){var _this$getFieldSecurit3=_this.getFieldSecurity(indexPrivilege),grant=_this$getFieldSecurit3.grant,except=_this$getFieldSecurit3.except;return except.length>0||grant.length>0&&!_lodash.default.isEqual(grant,["*"])}));var _this$getFieldSecurit4=_this.getFieldSecurity(props.indexPrivilege),_grant=_this$getFieldSecurit4.grant,_except=_this$getFieldSecurit4.except;_this.state={queryExpanded:!!props.indexPrivilege.query,fieldSecurityExpanded:_this.isFieldSecurityConfigured(props.indexPrivilege),grantedFields:_grant,exceptedFields:_except,documentQuery:props.indexPrivilege.query};return _this}_createClass(IndexPrivilegeForm,[{key:"render",value:function render(){return _react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_eui.EuiHorizontalRule,null),_react2.default.createElement(_eui.EuiFlexGroup,{className:"index-privilege-form"},_react2.default.createElement(_eui.EuiFlexItem,null,this.getPrivilegeForm()),!this.props.isRoleReadOnly&&_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{hasEmptyLabelSpace:true},_react2.default.createElement(_eui.EuiButtonIcon,{"aria-label":_i18n.i18n.translate("xpack.security.management.editRole.indexPrivilegeForm.deleteSpacePrivilegeAriaLabel",{defaultMessage:"Delete index privilege"}),color:"danger",onClick:this.props.onDelete,iconType:"trash"})))))}}]);return IndexPrivilegeForm}(_react2.Component);exports.IndexPrivilegeForm=IndexPrivilegeForm},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.KibanaPrivilegesRegion=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _collapsible_panel=__webpack_require__(50);var _simple_privilege_section=__webpack_require__(206);var _space_aware_privilege_section=__webpack_require__(215);var _transform_error_section=__webpack_require__(299);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var KibanaPrivilegesRegion=function(_Component){_inherits(KibanaPrivilegesRegion,_Component);function KibanaPrivilegesRegion(){var _getPrototypeOf2;var _this;_classCallCheck(this,KibanaPrivilegesRegion);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(KibanaPrivilegesRegion)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"getForm",(function(){var _this$props=_this.props,kibanaPrivileges=_this$props.kibanaPrivileges,role=_this$props.role,spacesEnabled=_this$props.spacesEnabled,canCustomizeSubFeaturePrivileges=_this$props.canCustomizeSubFeaturePrivileges,_this$props$spaces=_this$props.spaces,spaces=_this$props$spaces===void 0?[]:_this$props$spaces,uiCapabilities=_this$props.uiCapabilities,onChange=_this$props.onChange,editable=_this$props.editable,validator=_this$props.validator;if(role._transform_error&&role._transform_error.includes("kibana")){return _react.default.createElement(_transform_error_section.TransformErrorSection,null)}if(spacesEnabled){return _react.default.createElement(_space_aware_privilege_section.SpaceAwarePrivilegeSection,{kibanaPrivileges:kibanaPrivileges,role:role,spaces:spaces,uiCapabilities:uiCapabilities,onChange:onChange,editable:editable,canCustomizeSubFeaturePrivileges:canCustomizeSubFeaturePrivileges,validator:validator})}else{return _react.default.createElement(_simple_privilege_section.SimplePrivilegeSection,{kibanaPrivileges:kibanaPrivileges,role:role,onChange:onChange,editable:editable,canCustomizeSubFeaturePrivileges:canCustomizeSubFeaturePrivileges})}}));return _this}_createClass(KibanaPrivilegesRegion,[{key:"render",value:function render(){return _react.default.createElement(_collapsible_panel.CollapsiblePanel,{iconType:"logoKibana",title:"Kibana"},this.getForm())}}]);return KibanaPrivilegesRegion}(_react.Component);exports.KibanaPrivilegesRegion=KibanaPrivilegesRegion},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SimplePrivilegeSection",{enumerable:true,get:function get(){return _simple_privilege_section.SimplePrivilegeSection}});var _simple_privilege_section=__webpack_require__(207)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SimplePrivilegeSection=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));var _model=__webpack_require__(5);var _privilege_utils=__webpack_require__(9);var _constants=__webpack_require__(12);var _feature_table=__webpack_require__(51);var _unsupported_space_privileges_warning=__webpack_require__(213);var _privilege_form_calculator=__webpack_require__(27);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SimplePrivilegeSection=function(_Component){_inherits(SimplePrivilegeSection,_Component);function SimplePrivilegeSection(props){var _this;_classCallCheck(this,SimplePrivilegeSection);_this=_possibleConstructorReturn(this,_getPrototypeOf(SimplePrivilegeSection).call(this,props));_defineProperty(_assertThisInitialized(_this),"getDisplayedBasePrivilege",(function(){if(_this.state.isCustomizingGlobalPrivilege){return _constants.CUSTOM_PRIVILEGE_VALUE}var role=_this.props.role;var form=_this.locateGlobalPrivilege(role);return form&&form.base.length>0?form.base[0]:_constants.NO_PRIVILEGE_VALUE}));_defineProperty(_assertThisInitialized(_this),"onKibanaPrivilegeChange",(function(privilege){var role=(0,_model.copyRole)(_this.props.role);var form=_this.locateGlobalPrivilege(role)||_this.createGlobalPrivilegeEntry(role);if(privilege===_constants.NO_PRIVILEGE_VALUE){role.kibana=role.kibana.filter((function(entry){return!(0,_privilege_utils.isGlobalPrivilegeDefinition)(entry)}))}else if(privilege===_constants.CUSTOM_PRIVILEGE_VALUE){form.base=[]}else{form.base=[privilege];form.feature={}}_this.props.onChange(role);_this.setState({isCustomizingGlobalPrivilege:privilege===_constants.CUSTOM_PRIVILEGE_VALUE,globalPrivsIndex:role.kibana.indexOf(form)})}));_defineProperty(_assertThisInitialized(_this),"onFeaturePrivilegeChange",(function(featureId,privileges){var role=(0,_model.copyRole)(_this.props.role);var form=_this.locateGlobalPrivilege(role)||_this.createGlobalPrivilegeEntry(role);if(privileges.length>0){form.feature[featureId]=_toConsumableArray(privileges)}else{delete form.feature[featureId]}_this.props.onChange(role)}));_defineProperty(_assertThisInitialized(_this),"onChangeAllFeaturePrivileges",(function(privileges){var role=(0,_model.copyRole)(_this.props.role);var form=_this.locateGlobalPrivilege(role)||_this.createGlobalPrivilegeEntry(role);if(privileges.length>0){_this.props.kibanaPrivileges.getSecuredFeatures().forEach((function(feature){form.feature[feature.id]=_toConsumableArray(privileges)}))}else{form.feature={}}_this.props.onChange(role)}));_defineProperty(_assertThisInitialized(_this),"maybeRenderSpacePrivilegeWarning",(function(){var kibanaPrivileges=_this.props.role.kibana;var hasSpacePrivileges=kibanaPrivileges.some((function(privilege){return!(0,_privilege_utils.isGlobalPrivilegeDefinition)(privilege)}));if(hasSpacePrivileges){return _react2.default.createElement(_eui.EuiFormRow,{fullWidth:true},_react2.default.createElement(_unsupported_space_privileges_warning.UnsupportedSpacePrivilegesWarning,null))}return null}));_defineProperty(_assertThisInitialized(_this),"locateGlobalPrivilegeIndex",(function(role){return role.kibana.findIndex((function(privileges){return(0,_privilege_utils.isGlobalPrivilegeDefinition)(privileges)}))}));_defineProperty(_assertThisInitialized(_this),"locateGlobalPrivilege",(function(role){var spacePrivileges=role.kibana;return spacePrivileges.find((function(privileges){return(0,_privilege_utils.isGlobalPrivilegeDefinition)(privileges)}))}));var globalPrivs=_this.locateGlobalPrivilege(props.role);var globalPrivsIndex=_this.locateGlobalPrivilegeIndex(props.role);_this.state={isCustomizingGlobalPrivilege:Boolean(globalPrivs&&Object.keys(globalPrivs.feature).length>0),globalPrivsIndex:globalPrivsIndex};return _this}_createClass(SimplePrivilegeSection,[{key:"render",value:function render(){var _ref,_this$props$role$kiba;var kibanaPrivilege=this.getDisplayedBasePrivilege();var reservedPrivileges=(_ref=(_this$props$role$kiba=this.props.role.kibana[this.state.globalPrivsIndex])===null||_this$props$role$kiba===void 0?void 0:_this$props$role$kiba._reserved)!==null&&_ref!==void 0?_ref:[];var title=_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.simplePrivilegeForm.kibanaPrivilegesTitle",defaultMessage:"Kibana privileges"});var description=_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.simplePrivilegeForm.specifyPrivilegeForRoleDescription",defaultMessage:"Specifies the Kibana privilege for this role."}));return _react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_eui.EuiFlexGroup,{direction:"column"},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiText,{size:"s",color:"subdued"},description)),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{label:title},reservedPrivileges.length>0?_react2.default.createElement(_eui.EuiComboBox,{fullWidth:true,selectedOptions:reservedPrivileges.map((function(rp){return{label:rp}})),isDisabled:true}):_react2.default.createElement(_eui.EuiSuperSelect,{disabled:!this.props.editable,onChange:this.onKibanaPrivilegeChange,options:[{value:_constants.NO_PRIVILEGE_VALUE,inputDisplay:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.simplePrivilegeForm.noPrivilegeInput",defaultMessage:"None"})),dropdownDisplay:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("strong",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.simplePrivilegeForm.noPrivilegeDropdown",defaultMessage:"None"})),_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.simplePrivilegeForm.noPrivilegeDropdownDescription",defaultMessage:"No access to Kibana"})))},{value:_constants.CUSTOM_PRIVILEGE_VALUE,inputDisplay:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.simplePrivilegeForm.customPrivilegeInput",defaultMessage:"Custom"})),dropdownDisplay:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("strong",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.simplePrivilegeForm.customPrivilegeDropdown",defaultMessage:"Custom"})),_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.simplePrivilegeForm.customPrivilegeDropdownDescription",defaultMessage:"Customize access to Kibana"})))},{value:"read",inputDisplay:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.simplePrivilegeForm.readPrivilegeInput",defaultMessage:"Read"})),dropdownDisplay:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("strong",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.simplePrivilegeForm.readPrivilegeDropdown",defaultMessage:"Read"})),_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.simplePrivilegeForm.readPrivilegeDropdownDescription",defaultMessage:"Grants read-only access to all of Kibana"})))},{value:"all",inputDisplay:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.simplePrivilegeForm.allPrivilegeInput",defaultMessage:"All"})),dropdownDisplay:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("strong",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.simplePrivilegeForm.allPrivilegeDropdown",defaultMessage:"All"})),_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.simplePrivilegeForm.allPrivilegeDropdownDescription",defaultMessage:"Grants full access to all of Kibana"})))}],hasDividers:true,valueOfSelected:kibanaPrivilege})),this.state.isCustomizingGlobalPrivilege&&_react2.default.createElement(_eui.EuiFormRow,{fullWidth:true},_react2.default.createElement(_feature_table.FeatureTable,{role:this.props.role,kibanaPrivileges:this.props.kibanaPrivileges,privilegeCalculator:new _privilege_form_calculator.PrivilegeFormCalculator(this.props.kibanaPrivileges,this.props.role),onChange:this.onFeaturePrivilegeChange,onChangeAll:this.onChangeAllFeaturePrivileges,privilegeIndex:this.props.role.kibana.findIndex((function(k){return(0,_privilege_utils.isGlobalPrivilegeDefinition)(k)})),canCustomizeSubFeaturePrivileges:this.props.canCustomizeSubFeaturePrivileges})),this.maybeRenderSpacePrivilegeWarning())))}},{key:"createGlobalPrivilegeEntry",value:function createGlobalPrivilegeEntry(role){var newEntry={spaces:["*"],base:[],feature:{}};role.kibana.push(newEntry);return newEntry}}]);return SimplePrivilegeSection}(_react2.Component);exports.SimplePrivilegeSection=SimplePrivilegeSection},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FeatureTable=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _i18n=__webpack_require__(3);var _react2=_interopRequireWildcard(__webpack_require__(0));var _change_all_privileges=__webpack_require__(209);var _feature_table_expanded_row=__webpack_require__(210);var _constants=__webpack_require__(12);var _feature_table_cell=__webpack_require__(52);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FeatureTable=function(_Component){_inherits(FeatureTable,_Component);function FeatureTable(props){var _this;_classCallCheck(this,FeatureTable);_this=_possibleConstructorReturn(this,_getPrototypeOf(FeatureTable).call(this,props));_defineProperty(_assertThisInitialized(_this),"onChange",(function(featureId){return function(featurePrivilegeId){var privilege=featurePrivilegeId.substr("".concat(featureId,"_").length);if(privilege===_constants.NO_PRIVILEGE_VALUE){_this.props.onChange(featureId,[])}else{_this.props.onChange(featureId,[privilege])}}}));_defineProperty(_assertThisInitialized(_this),"getColumns",(function(){var basePrivileges=_this.props.kibanaPrivileges.getBasePrivileges(_this.props.role.kibana[_this.props.privilegeIndex]);var columns=[];if(_this.props.canCustomizeSubFeaturePrivileges){columns.push({width:"30px",isExpander:true,field:"featureId",name:"",render:function render(featureId,record){var feature=record.feature;var hasSubFeaturePrivileges=feature.getSubFeaturePrivileges().length>0;if(!hasSubFeaturePrivileges){return null}return _react2.default.createElement(_eui.EuiButtonIcon,{onClick:function onClick(){return _this.toggleExpandedFeature(featureId)},"data-test-subj":"expandFeaturePrivilegeRow expandFeaturePrivilegeRow-".concat(featureId),"aria-label":_this.state.expandedFeatures.includes(featureId)?"Collapse":"Expand",iconType:_this.state.expandedFeatures.includes(featureId)?"arrowUp":"arrowDown"})}})}columns.push({field:"feature",width:"200px",name:_i18n.i18n.translate("xpack.security.management.editRole.featureTable.enabledRoleFeaturesFeatureColumnTitle",{defaultMessage:"Feature"}),render:function render(feature){return _react2.default.createElement(_feature_table_cell.FeatureTableCell,{feature:feature})}},{field:"privilege",width:"200px",name:_react2.default.createElement("span",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.featureTable.enabledRoleFeaturesEnabledColumnTitle",defaultMessage:"Privilege"}),!_this.props.disabled&&_react2.default.createElement(_change_all_privileges.ChangeAllPrivilegesControl,{privileges:basePrivileges,onChange:_this.onChangeAllFeaturePrivileges})),mobileOptions:{header:false},render:function render(roleEntry,record){var feature=record.feature;if(feature.reserved){return _react2.default.createElement(_eui.EuiText,{size:"s"},feature.reserved.description)}var primaryFeaturePrivileges=feature.getPrimaryFeaturePrivileges();if(primaryFeaturePrivileges.length===0){return null}var selectedPrivilegeId=_this.props.privilegeCalculator.getDisplayedPrimaryFeaturePrivilegeId(feature.id,_this.props.privilegeIndex);var options=primaryFeaturePrivileges.map((function(privilege){return{id:"".concat(feature.id,"_").concat(privilege.id),label:privilege.name,isDisabled:_this.props.disabled}}));options.push({id:"".concat(feature.id,"_").concat(_constants.NO_PRIVILEGE_VALUE),label:"None",isDisabled:_this.props.disabled});var warningIcon=_react2.default.createElement(_eui.EuiIconTip,{type:"empty",content:null});if(_this.props.privilegeCalculator.hasCustomizedSubFeaturePrivileges(feature.id,_this.props.privilegeIndex)){warningIcon=_react2.default.createElement(_eui.EuiIconTip,{type:"iInCircle",content:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.featureTable.privilegeCustomizationTooltip",defaultMessage:"Feature has customized sub-feature privileges. Expand this row for more information."})})}return _react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},warningIcon),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiButtonGroup,{name:"featurePrivilege_".concat(feature.id),"data-test-subj":"primaryFeaturePrivilegeControl",buttonSize:"compressed",color:"primary",isFullWidth:true,options:options,idSelected:"".concat(feature.id,"_").concat(selectedPrivilegeId!==null&&selectedPrivilegeId!==void 0?selectedPrivilegeId:_constants.NO_PRIVILEGE_VALUE),onChange:_this.onChange(feature.id)})))}});return columns}));_defineProperty(_assertThisInitialized(_this),"toggleExpandedFeature",(function(featureId){if(_this.state.expandedFeatures.includes(featureId)){_this.setState({expandedFeatures:_this.state.expandedFeatures.filter((function(ef){return ef!==featureId}))})}else{_this.setState({expandedFeatures:[].concat(_toConsumableArray(_this.state.expandedFeatures),[featureId])})}}));_defineProperty(_assertThisInitialized(_this),"onChangeAllFeaturePrivileges",(function(privilege){if(privilege===_constants.NO_PRIVILEGE_VALUE){_this.props.onChangeAll([])}else{_this.props.onChangeAll([privilege])}}));_this.state={expandedFeatures:[]};return _this}_createClass(FeatureTable,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,role=_this$props.role,kibanaPrivileges=_this$props.kibanaPrivileges;var featurePrivileges=kibanaPrivileges.getSecuredFeatures();var items=featurePrivileges.sort((function(feature1,feature2){if(feature1.reserved&&!feature2.reserved){return 1}if(feature2.reserved&&!feature1.reserved){return-1}return 0})).map((function(feature){return{featureId:feature.id,feature:feature,inherited:[],effective:[],role:role}}));return _react2.default.createElement(_eui.EuiInMemoryTable,{responsive:false,columns:this.getColumns(),itemId:"featureId",itemIdToExpandedRowMap:this.state.expandedFeatures.reduce((function(acc,featureId){var _this2$props$role$kib;return _objectSpread({},acc,_defineProperty({},featureId,_react2.default.createElement(_feature_table_expanded_row.FeatureTableExpandedRow,{feature:featurePrivileges.find((function(f){return f.id===featureId})),privilegeIndex:_this2.props.privilegeIndex,onChange:_this2.props.onChange,privilegeCalculator:_this2.props.privilegeCalculator,selectedFeaturePrivileges:(_this2$props$role$kib=_this2.props.role.kibana[_this2.props.privilegeIndex].feature[featureId])!==null&&_this2$props$role$kib!==void 0?_this2$props$role$kib:[],disabled:_this2.props.disabled})))}),{}),items:items})}}]);return FeatureTable}(_react2.Component);exports.FeatureTable=FeatureTable;_defineProperty(FeatureTable,"defaultProps",{privilegeIndex:-1,showLocks:true})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ChangeAllPrivilegesControl=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _lodash=_interopRequireDefault(__webpack_require__(4));var _react2=_interopRequireWildcard(__webpack_require__(0));var _constants=__webpack_require__(12);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ChangeAllPrivilegesControl=function(_Component){_inherits(ChangeAllPrivilegesControl,_Component);function ChangeAllPrivilegesControl(){var _getPrototypeOf2;var _this;_classCallCheck(this,ChangeAllPrivilegesControl);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ChangeAllPrivilegesControl)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"onSelectPrivilege",(function(privilege){_this.props.onChange(privilege);_this.setState({isPopoverOpen:false})}));_defineProperty(_assertThisInitialized(_this),"onButtonClick",(function(){_this.setState({isPopoverOpen:!_this.state.isPopoverOpen})}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({isPopoverOpen:false})}));return _this}_createClass(ChangeAllPrivilegesControl,[{key:"render",value:function render(){var _this2=this;var button=_react2.default.createElement(_eui.EuiLink,{onClick:this.onButtonClick,className:"secPrivilegeFeatureChangeAllLink","data-test-subj":"changeAllPrivilegesButton"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.changeAllPrivilegesLink",defaultMessage:"(change all)"}));var items=this.props.privileges.map((function(privilege){return _react2.default.createElement(_eui.EuiContextMenuItem,{key:privilege.id,"data-test-subj":"changeAllPrivileges-".concat(privilege.id),onClick:function onClick(){_this2.onSelectPrivilege(privilege.id)},disabled:_this2.props.disabled},_lodash.default.capitalize(privilege.id))}));items.push(_react2.default.createElement(_eui.EuiContextMenuItem,{key:_constants.NO_PRIVILEGE_VALUE,"data-test-subj":"changeAllPrivileges-".concat(_constants.NO_PRIVILEGE_VALUE),onClick:function onClick(){_this2.onSelectPrivilege(_constants.NO_PRIVILEGE_VALUE)},disabled:this.props.disabled},_lodash.default.capitalize(_constants.NO_PRIVILEGE_VALUE)));return _react2.default.createElement(_eui.EuiPopover,{id:"changeAllFeaturePrivilegesPopover",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft"},_react2.default.createElement(_eui.EuiContextMenuPanel,{items:items}))}}]);return ChangeAllPrivilegesControl}(_react2.Component);exports.ChangeAllPrivilegesControl=ChangeAllPrivilegesControl},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FeatureTableExpandedRow=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(2);var _eui=__webpack_require__(1);var _sub_feature_form=__webpack_require__(211);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var FeatureTableExpandedRow=function FeatureTableExpandedRow(_ref){var feature=_ref.feature,_onChange=_ref.onChange,privilegeIndex=_ref.privilegeIndex,privilegeCalculator=_ref.privilegeCalculator,selectedFeaturePrivileges=_ref.selectedFeaturePrivileges,disabled=_ref.disabled;var _useState=(0,_react.useState)((function(){return feature.getMinimalFeaturePrivileges().some((function(p){return selectedFeaturePrivileges.includes(p.id)}))})),_useState2=_slicedToArray(_useState,2),isCustomizing=_useState2[0],setIsCustomizing=_useState2[1];(0,_react.useEffect)((function(){var hasMinimalFeaturePrivilegeSelected=feature.getMinimalFeaturePrivileges().some((function(p){return selectedFeaturePrivileges.includes(p.id)}));if(!hasMinimalFeaturePrivilegeSelected&&isCustomizing){setIsCustomizing(false)}}),[feature,isCustomizing,selectedFeaturePrivileges]);var onCustomizeSubFeatureChange=function onCustomizeSubFeatureChange(e){_onChange(feature.id,privilegeCalculator.updateSelectedFeaturePrivilegesForCustomization(feature.id,privilegeIndex,e.target.checked));setIsCustomizing(e.target.checked)};return _react.default.createElement(_eui.EuiFlexGroup,{direction:"column"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiSwitch,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRole.featureTable.customizeSubFeaturePrivilegesSwitchLabel",defaultMessage:"Customize sub-feature privileges"}),checked:isCustomizing,onChange:onCustomizeSubFeatureChange,"data-test-subj":"customizeSubFeaturePrivileges",disabled:disabled||!privilegeCalculator.canCustomizeSubFeaturePrivileges(feature.id,privilegeIndex)})),feature.getSubFeatures().map((function(subFeature){return _react.default.createElement(_eui.EuiFlexItem,{key:subFeature.name},_react.default.createElement(_sub_feature_form.SubFeatureForm,{privilegeCalculator:privilegeCalculator,privilegeIndex:privilegeIndex,featureId:feature.id,subFeature:subFeature,onChange:function onChange(updatedPrivileges){return _onChange(feature.id,updatedPrivileges)},selectedFeaturePrivileges:selectedFeaturePrivileges,disabled:disabled||!isCustomizing}))})))};exports.FeatureTableExpandedRow=FeatureTableExpandedRow},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SubFeatureForm=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _constants=__webpack_require__(12);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var SubFeatureForm=function SubFeatureForm(props){return _react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"s"},props.subFeature.name)),_react.default.createElement(_eui.EuiFlexItem,null,props.subFeature.getPrivilegeGroups().map(renderPrivilegeGroup)));function renderPrivilegeGroup(privilegeGroup,index){switch(privilegeGroup.groupType){case"independent":return renderIndependentPrivilegeGroup(privilegeGroup,index);case"mutually_exclusive":return renderMutuallyExclusivePrivilegeGroup(privilegeGroup,index);default:throw new Error("Unsupported privilege group type: ".concat(privilegeGroup.groupType))}}function renderIndependentPrivilegeGroup(privilegeGroup,index){return _react.default.createElement("div",{key:index},privilegeGroup.privileges.map((function(privilege){var isGranted=props.privilegeCalculator.isIndependentSubFeaturePrivilegeGranted(props.featureId,privilege.id,props.privilegeIndex);return _react.default.createElement(_eui.EuiCheckbox,{key:privilege.id,id:"".concat(props.featureId,"_").concat(privilege.id),label:privilege.name,"data-test-subj":"independentSubFeaturePrivilegeControl",onChange:function onChange(e){var checked=e.target.checked;if(checked){props.onChange([].concat(_toConsumableArray(props.selectedFeaturePrivileges),[privilege.id]))}else{props.onChange(props.selectedFeaturePrivileges.filter((function(sp){return sp!==privilege.id})))}},checked:isGranted,disabled:props.disabled,compressed:true})})))}function renderMutuallyExclusivePrivilegeGroup(privilegeGroup,index){var _ref;var firstSelectedPrivilege=props.privilegeCalculator.getSelectedMutuallyExclusiveSubFeaturePrivilege(props.featureId,privilegeGroup,props.privilegeIndex);var options=_toConsumableArray(privilegeGroup.privileges.map((function(privilege,privilegeIndex){return{id:privilege.id,label:privilege.name,isDisabled:props.disabled}})));options.push({id:_constants.NO_PRIVILEGE_VALUE,label:"None",isDisabled:props.disabled});return _react.default.createElement(_eui.EuiButtonGroup,{key:index,buttonSize:"compressed","data-test-subj":"mutexSubFeaturePrivilegeControl",options:options,idSelected:(_ref=firstSelectedPrivilege===null||firstSelectedPrivilege===void 0?void 0:firstSelectedPrivilege.id)!==null&&_ref!==void 0?_ref:_constants.NO_PRIVILEGE_VALUE,isDisabled:props.disabled,onChange:function onChange(selectedPrivilegeId){var privilegesWithoutGroupEntries=props.selectedFeaturePrivileges.filter((function(sp){return!privilegeGroup.privileges.some((function(privilege){return privilege.id===sp}))}));if(selectedPrivilegeId===_constants.NO_PRIVILEGE_VALUE){props.onChange(privilegesWithoutGroupEntries)}else{props.onChange([].concat(_toConsumableArray(privilegesWithoutGroupEntries),[selectedPrivilegeId]))}}})}};exports.SubFeatureForm=SubFeatureForm},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FeatureTableCell=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FeatureTableCell=function FeatureTableCell(_ref){var feature=_ref.feature;var tooltipElement=null;if(feature.getPrivilegesTooltip()){var tooltipContent=_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,feature.getPrivilegesTooltip()));tooltipElement=_react.default.createElement(_eui.EuiIconTip,{iconProps:{className:"eui-alignTop"},type:"iInCircle",color:"subdued",content:tooltipContent})}return _react.default.createElement("span",null,_react.default.createElement(_eui.EuiIcon,{size:"m",type:feature.icon,className:"secPrivilegeFeatureIcon"}),feature.name," ",tooltipElement)};exports.FeatureTableCell=FeatureTableCell},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.UnsupportedSpacePrivilegesWarning=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var UnsupportedSpacePrivilegesWarning=function(_Component){_inherits(UnsupportedSpacePrivilegesWarning,_Component);function UnsupportedSpacePrivilegesWarning(){var _getPrototypeOf2;var _this;_classCallCheck(this,UnsupportedSpacePrivilegesWarning);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(UnsupportedSpacePrivilegesWarning)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"getMessage",(function(){return _react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.simplePrivilegeForm.unsupportedSpacePrivilegesWarning",defaultMessage:"This role contains privilege definitions for spaces, but spaces are not enabled in Kibana. Saving this role will remove these privileges."})}));return _this}_createClass(UnsupportedSpacePrivilegesWarning,[{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiCallOut,{iconType:"alert",color:"warning",title:this.getMessage()})}}]);return UnsupportedSpacePrivilegesWarning}(_react2.Component);exports.UnsupportedSpacePrivilegesWarning=UnsupportedSpacePrivilegesWarning},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PrivilegeFormCalculator=void 0;var _privilege_utils=__webpack_require__(9);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var PrivilegeFormCalculator=function(){function PrivilegeFormCalculator(kibanaPrivileges,role){_classCallCheck(this,PrivilegeFormCalculator);this.kibanaPrivileges=kibanaPrivileges;this.role=role}_createClass(PrivilegeFormCalculator,[{key:"getBasePrivilege",value:function getBasePrivilege(privilegeIndex){var entry=this.role.kibana[privilegeIndex];var basePrivileges=this.kibanaPrivileges.getBasePrivileges(entry);return basePrivileges.find((function(bp){return entry.base.includes(bp.id)}))}},{key:"getDisplayedPrimaryFeaturePrivilegeId",value:function getDisplayedPrimaryFeaturePrivilegeId(featureId,privilegeIndex){var _this$getDisplayedPri;return(_this$getDisplayedPri=this.getDisplayedPrimaryFeaturePrivilege(featureId,privilegeIndex))===null||_this$getDisplayedPri===void 0?void 0:_this$getDisplayedPri.id}},{key:"hasCustomizedSubFeaturePrivileges",value:function hasCustomizedSubFeaturePrivileges(featureId,privilegeIndex){var feature=this.kibanaPrivileges.getSecuredFeature(featureId);var displayedPrimary=this.getDisplayedPrimaryFeaturePrivilege(featureId,privilegeIndex);var formPrivileges=this.kibanaPrivileges.createCollectionFromRoleKibanaPrivileges([this.role.kibana[privilegeIndex]]);return feature.getSubFeaturePrivileges().some((function(sfp){var _ref;var isGranted=formPrivileges.grantsPrivilege(sfp);var isGrantedByDisplayedPrimary=(_ref=displayedPrimary===null||displayedPrimary===void 0?void 0:displayedPrimary.grantsPrivilege(sfp))!==null&&_ref!==void 0?_ref:isGranted;return isGranted!==isGrantedByDisplayedPrimary}))}},{key:"getEffectivePrimaryFeaturePrivilege",value:function getEffectivePrimaryFeaturePrivilege(featureId,privilegeIndex){var feature=this.kibanaPrivileges.getSecuredFeature(featureId);var basePrivilege=this.getBasePrivilege(privilegeIndex);var selectedFeaturePrivileges=this.getSelectedFeaturePrivileges(featureId,privilegeIndex);return feature.getPrimaryFeaturePrivileges({includeMinimalFeaturePrivileges:true}).find((function(fp){return selectedFeaturePrivileges.includes(fp.id)||(basePrivilege===null||basePrivilege===void 0?void 0:basePrivilege.grantsPrivilege(fp))}))}},{key:"isIndependentSubFeaturePrivilegeGranted",value:function isIndependentSubFeaturePrivilegeGranted(featureId,privilegeId,privilegeIndex){var kibanaPrivilege=this.role.kibana[privilegeIndex];var feature=this.kibanaPrivileges.getSecuredFeature(featureId);var subFeaturePrivilege=feature.getSubFeaturePrivileges().find((function(ap){return ap.id===privilegeId}));var assignedPrivileges=this.kibanaPrivileges.createCollectionFromRoleKibanaPrivileges([kibanaPrivilege]);return assignedPrivileges.grantsPrivilege(subFeaturePrivilege)}},{key:"getSelectedMutuallyExclusiveSubFeaturePrivilege",value:function getSelectedMutuallyExclusiveSubFeaturePrivilege(featureId,subFeatureGroup,privilegeIndex){var kibanaPrivilege=this.role.kibana[privilegeIndex];var assignedPrivileges=this.kibanaPrivileges.createCollectionFromRoleKibanaPrivileges([kibanaPrivilege]);return subFeatureGroup.privileges.find((function(p){return assignedPrivileges.grantsPrivilege(p)}))}},{key:"canCustomizeSubFeaturePrivileges",value:function canCustomizeSubFeaturePrivileges(featureId,privilegeIndex){var selectedFeaturePrivileges=this.getSelectedFeaturePrivileges(featureId,privilegeIndex);var feature=this.kibanaPrivileges.getSecuredFeature(featureId);return feature.getPrimaryFeaturePrivileges({includeMinimalFeaturePrivileges:true}).some((function(apfp){return selectedFeaturePrivileges.includes(apfp.id)}))}},{key:"updateSelectedFeaturePrivilegesForCustomization",value:function updateSelectedFeaturePrivilegesForCustomization(featureId,privilegeIndex,willBeCustomizing){var primary=this.getDisplayedPrimaryFeaturePrivilege(featureId,privilegeIndex);var selectedFeaturePrivileges=this.getSelectedFeaturePrivileges(featureId,privilegeIndex);if(!primary){return selectedFeaturePrivileges}var nextPrivileges=[];if(willBeCustomizing){var feature=this.kibanaPrivileges.getSecuredFeature(featureId);var startingPrivileges=feature.getSubFeaturePrivileges().filter((function(ap){return primary.grantsPrivilege(ap)})).map((function(p){return p.id}));nextPrivileges.push.apply(nextPrivileges,[primary.getMinimalPrivilegeId()].concat(_toConsumableArray(startingPrivileges)))}else{nextPrivileges.push(primary.id)}return nextPrivileges}},{key:"hasSupersededInheritedPrivileges",value:function hasSupersededInheritedPrivileges(privilegeIndex){var global=this.locateGlobalPrivilege(this.role);var entry=this.role.kibana[privilegeIndex];if((0,_privilege_utils.isGlobalPrivilegeDefinition)(entry)||!global){return false}var globalPrivileges=this.kibanaPrivileges.createCollectionFromRoleKibanaPrivileges([global]);var formPrivileges=this.kibanaPrivileges.createCollectionFromRoleKibanaPrivileges([entry]);var hasAssignedBasePrivileges=this.kibanaPrivileges.getBasePrivileges(entry).some((function(base){return entry.base.includes(base.id)}));var featuresWithDirectlyAssignedPrivileges=this.kibanaPrivileges.getSecuredFeatures().filter((function(feature){return feature.getAllPrivileges().some((function(privilege){var _entry$feature$featur;return(_entry$feature$featur=entry.feature[feature.id])===null||_entry$feature$featur===void 0?void 0:_entry$feature$featur.includes(privilege.id)}))}));var hasSupersededBasePrivileges=hasAssignedBasePrivileges&&this.kibanaPrivileges.getBasePrivileges(entry).some((function(privilege){return globalPrivileges.grantsPrivilege(privilege)&&!formPrivileges.grantsPrivilege(privilege)}));var hasSupersededFeaturePrivileges=featuresWithDirectlyAssignedPrivileges.some((function(feature){return feature.getAllPrivileges().some((function(fp){return globalPrivileges.grantsPrivilege(fp)&&!formPrivileges.grantsPrivilege(fp)}))}));return hasSupersededBasePrivileges||hasSupersededFeaturePrivileges}},{key:"getDisplayedPrimaryFeaturePrivilege",value:function getDisplayedPrimaryFeaturePrivilege(featureId,privilegeIndex){var feature=this.kibanaPrivileges.getSecuredFeature(featureId);var basePrivilege=this.getBasePrivilege(privilegeIndex);var selectedFeaturePrivileges=this.getSelectedFeaturePrivileges(featureId,privilegeIndex);return feature.getPrimaryFeaturePrivileges().find((function(fp){var correspondingMinimalPrivilegeId=fp.getMinimalPrivilegeId();var correspendingMinimalPrivilege=feature.getMinimalFeaturePrivileges().find((function(mp){return mp.id===correspondingMinimalPrivilegeId}));var hasMinimalPrivileges=feature.subFeatures.length>0&&fp.grantsPrivilege(correspendingMinimalPrivilege);return selectedFeaturePrivileges.includes(fp.id)||hasMinimalPrivileges&&selectedFeaturePrivileges.includes(correspondingMinimalPrivilegeId)||(basePrivilege===null||basePrivilege===void 0?void 0:basePrivilege.grantsPrivilege(fp))}))}},{key:"getSelectedFeaturePrivileges",value:function getSelectedFeaturePrivileges(featureId,privilegeIndex){var _this$role$kibana$pri;return(_this$role$kibana$pri=this.role.kibana[privilegeIndex].feature[featureId])!==null&&_this$role$kibana$pri!==void 0?_this$role$kibana$pri:[]}},{key:"locateGlobalPrivilege",value:function locateGlobalPrivilege(role){return role.kibana.find((function(entry){return(0,_privilege_utils.isGlobalPrivilegeDefinition)(entry)}))}}]);return PrivilegeFormCalculator}();exports.PrivilegeFormCalculator=PrivilegeFormCalculator},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SpaceAwarePrivilegeSection",{enumerable:true,get:function get(){return _space_aware_privilege_section.SpaceAwarePrivilegeSection}});var _space_aware_privilege_section=__webpack_require__(216)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SpaceAwarePrivilegeSection=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react=__webpack_require__(2);var _lodash=_interopRequireDefault(__webpack_require__(4));var _react2=_interopRequireWildcard(__webpack_require__(0));var _model=__webpack_require__(5);var _privilege_space_table=__webpack_require__(217);var _privilege_space_form=__webpack_require__(291);var _privilege_form_calculator=__webpack_require__(27);var _privilege_summary=__webpack_require__(293);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SpaceAwarePrivilegeSection=function(_Component){_inherits(SpaceAwarePrivilegeSection,_Component);function SpaceAwarePrivilegeSection(props){var _this;_classCallCheck(this,SpaceAwarePrivilegeSection);_this=_possibleConstructorReturn(this,_getPrototypeOf(SpaceAwarePrivilegeSection).call(this,props));_defineProperty(_assertThisInitialized(_this),"globalSpaceEntry",{id:"*",name:_i18n.i18n.translate("xpack.security.management.editRole.spaceAwarePrivilegeForm.globalSpacesName",{defaultMessage:"* Global (all spaces)"}),color:"#D3DAE6",initials:"*",disabledFeatures:[]});_defineProperty(_assertThisInitialized(_this),"renderKibanaPrivileges",(function(){var role=_this.props.role;var spacePrivileges=role.kibana;var hasAnyPrivileges=spacePrivileges.length>0;if(hasAnyPrivileges){var table=_react2.default.createElement(_privilege_space_table.PrivilegeSpaceTable,{role:_this.props.role,displaySpaces:_this.getDisplaySpaces(),privilegeCalculator:new _privilege_form_calculator.PrivilegeFormCalculator(_this.props.kibanaPrivileges,_this.props.role),onChange:_this.props.onChange,onEdit:_this.onEditSpacesPrivileges,disabled:!_this.props.editable});return _react2.default.createElement("div",null,table,_react2.default.createElement(_eui.EuiSpacer,null),_this.getAvailablePrivilegeButtons(true))}return _react2.default.createElement(_eui.EuiEmptyPrompt,{iconType:"lock",title:_react2.default.createElement("h2",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeSection.noAccessToKibanaTitle",defaultMessage:"This role does not grant access to Kibana"})),titleSize:"s",actions:_this.getAvailablePrivilegeButtons(false)})}));_defineProperty(_assertThisInitialized(_this),"getAvailablePrivilegeButtons",(function(hasPrivilegesAssigned){var hasAvailableSpaces=_this.getAvailableSpaces().length>0;if(!hasAvailableSpaces&&!hasPrivilegesAssigned){return null}var addPrivilegeButton=_react2.default.createElement(_eui.EuiButton,{color:"primary",onClick:_this.addSpacePrivilege,iconType:"plusInCircleFilled","data-test-subj":"addSpacePrivilegeButton",isDisabled:!hasAvailableSpaces||!_this.props.editable},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeSection.addSpacePrivilegeButton",defaultMessage:"Add space privilege"}));if(!hasPrivilegesAssigned){return addPrivilegeButton}var viewMatrixButton=_react2.default.createElement(_privilege_summary.PrivilegeSummary,{role:_this.props.role,spaces:_this.getDisplaySpaces(),kibanaPrivileges:_this.props.kibanaPrivileges,canCustomizeSubFeaturePrivileges:_this.props.canCustomizeSubFeaturePrivileges});return _react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},addPrivilegeButton),hasPrivilegesAssigned&&!(0,_model.isRoleReserved)(_this.props.role)&&_react2.default.createElement(_eui.EuiFlexItem,{grow:false},viewMatrixButton))}));_defineProperty(_assertThisInitialized(_this),"getDisplaySpaces",(function(){return[_this.globalSpaceEntry].concat(_toConsumableArray(_this.props.spaces))}));_defineProperty(_assertThisInitialized(_this),"getAvailableSpaces",(function(){var includeSpacesFromPrivilegeIndex=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-1;var spacesToExclude=_lodash.default.uniq(_lodash.default.flatten(_this.props.role.kibana.map((function(entry,index){if(includeSpacesFromPrivilegeIndex===index){return[]}return entry.spaces}))));return _this.getDisplaySpaces().filter((function(displaySpace){return!spacesToExclude.includes(displaySpace.id)}))}));_defineProperty(_assertThisInitialized(_this),"addSpacePrivilege",(function(){_this.setState({showSpacePrivilegeEditor:true,privilegeIndex:-1})}));_defineProperty(_assertThisInitialized(_this),"onSpacesPrivilegeChange",(function(role){_this.setState({showSpacePrivilegeEditor:false,privilegeIndex:-1});_this.props.onChange(role)}));_defineProperty(_assertThisInitialized(_this),"onEditSpacesPrivileges",(function(privilegeIndex){_this.setState({privilegeIndex:privilegeIndex,showSpacePrivilegeEditor:true})}));_defineProperty(_assertThisInitialized(_this),"onCancelEditPrivileges",(function(){_this.setState({showSpacePrivilegeEditor:false})}));_this.state={showSpacePrivilegeEditor:false,showPrivilegeMatrix:false,role:null,privilegeIndex:-1};return _this}_createClass(SpaceAwarePrivilegeSection,[{key:"render",value:function render(){var uiCapabilities=this.props.uiCapabilities;if(!uiCapabilities.spaces.manage){return _react2.default.createElement(_eui.EuiCallOut,{title:_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spaceAwarePrivilegeForm.insufficientPrivilegesDescription",defaultMessage:"Insufficient Privileges"})),iconType:"alert",color:"danger","data-test-subj":"userCannotManageSpacesCallout"},_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spaceAwarePrivilegeForm.howToViewAllAvailableSpacesDescription",defaultMessage:"You are not authorized to view all available spaces."})),_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spaceAwarePrivilegeForm.ensureAccountHasAllPrivilegesGrantedDescription",defaultMessage:"Please ensure your account has all privileges granted by the {kibanaAdmin} role, and try again.",values:{kibanaAdmin:_react2.default.createElement("strong",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spaceAwarePrivilegeForm.kibanaAdminTitle",defaultMessage:"kibana_admin"}))}})))}return _react2.default.createElement(_eui.EuiErrorBoundary,null,_react2.default.createElement(_react2.Fragment,null,this.renderKibanaPrivileges(),this.state.showSpacePrivilegeEditor&&_react2.default.createElement(_privilege_space_form.PrivilegeSpaceForm,{role:this.props.role,kibanaPrivileges:this.props.kibanaPrivileges,onChange:this.onSpacesPrivilegeChange,onCancel:this.onCancelEditPrivileges,spaces:this.getAvailableSpaces(this.state.privilegeIndex),privilegeIndex:this.state.privilegeIndex,canCustomizeSubFeaturePrivileges:this.props.canCustomizeSubFeaturePrivileges})))}}]);return SpaceAwarePrivilegeSection}(_react2.Component);exports.SpaceAwarePrivilegeSection=SpaceAwarePrivilegeSection},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.PrivilegeSpaceTable=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));var _public=__webpack_require__(19);var _model=__webpack_require__(5);var _spaces_popover_list=__webpack_require__(68);var _privilege_display=__webpack_require__(290);var _privilege_utils=__webpack_require__(9);var _constants=__webpack_require__(12);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SPACES_DISPLAY_COUNT=4;var PrivilegeSpaceTable=function(_Component){_inherits(PrivilegeSpaceTable,_Component);function PrivilegeSpaceTable(){var _getPrototypeOf2;var _this;_classCallCheck(this,PrivilegeSpaceTable);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PrivilegeSpaceTable)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{expandedSpacesGroups:[]});_defineProperty(_assertThisInitialized(_this),"renderKibanaPrivileges",(function(){var _this$props=_this.props,privilegeCalculator=_this$props.privilegeCalculator,displaySpaces=_this$props.displaySpaces;var spacePrivileges=_this.getSortedPrivileges();var rows=spacePrivileges.map((function(spacePrivs,privilegeIndex){var spaces=spacePrivs.spaces.map((function(spaceId){return displaySpaces.find((function(space){return space.id===spaceId}))||{id:spaceId,name:spaceId,disabledFeatures:[],deleted:true}}));return{spaces:spaces,privilegeIndex:privilegeIndex,isGlobal:(0,_privilege_utils.isGlobalPrivilegeDefinition)(spacePrivs),privileges:{spaces:spacePrivs.spaces,base:spacePrivs.base||[],feature:spacePrivs.feature||{},reserved:spacePrivs._reserved||[]}}}));var getExtraBadgeProps=function getExtraBadgeProps(space){if(space.deleted){return{iconType:"trash"}}return{}};var columns=[{field:"spaces",name:"Spaces",width:"60%",render:function render(spaces,record){var isExpanded=_this.state.expandedSpacesGroups.includes(record.privilegeIndex);var displayedSpaces=isExpanded?spaces:spaces.slice(0,SPACES_DISPLAY_COUNT);var button=null;if(record.isGlobal){button=_react2.default.createElement(_spaces_popover_list.SpacesPopoverList,{spaces:_this.props.displaySpaces.filter((function(s){return s.id!=="*"})),buttonText:_i18n.i18n.translate("xpack.security.management.editRole.spacePrivilegeTable.showAllSpacesLink",{defaultMessage:"show spaces"})})}else if(spaces.length>displayedSpaces.length){button=_react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:function onClick(){return _this.toggleExpandSpacesGroup(record.privilegeIndex)}},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeTable.showNMoreSpacesLink",defaultMessage:"+{count} more",values:{count:spaces.length-displayedSpaces.length}}))}else if(isExpanded){button=_react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:function onClick(){return _this.toggleExpandSpacesGroup(record.privilegeIndex)}},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeTable.showLessSpacesLink",defaultMessage:"show less"}))}return _react2.default.createElement("div",null,_react2.default.createElement("span",{"data-test-subj":"spacesColumn"},displayedSpaces.map((function(space){return _react2.default.createElement(_eui.EuiBadge,_extends({key:space.id},getExtraBadgeProps(space),{color:(0,_public.getSpaceColor)(space)}),space.name)}))),button)}},{field:"privileges",name:"Privileges",render:function render(privileges,record){var _ref,_privilegeCalculator$;if(privileges.reserved.length>0){return _react2.default.createElement(_privilege_display.PrivilegeDisplay,{privilege:privileges.reserved,"data-test-subj":"privilegeColumn"})}var icon=_react2.default.createElement(_eui.EuiIcon,{type:"empty",size:"s"});if(privilegeCalculator.hasSupersededInheritedPrivileges(record.privilegeIndex)){icon=_react2.default.createElement("span",{"data-test-subj":"spaceTablePrivilegeSupersededWarning"},_react2.default.createElement(_eui.EuiIconTip,{type:"alert",size:"s",content:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeTable.supersededPrivilegeWarning",defaultMessage:"Privileges are superseded by configured global privilege. View the privilege summary to see effective privileges."})}))}return _react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},icon),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_privilege_display.PrivilegeDisplay,{privilege:(_ref=(_privilegeCalculator$=privilegeCalculator.getBasePrivilege(record.privilegeIndex))===null||_privilegeCalculator$===void 0?void 0:_privilegeCalculator$.id)!==null&&_ref!==void 0?_ref:_constants.CUSTOM_PRIVILEGE_VALUE,"data-test-subj":"privilegeColumn"})))}}];if(!_this.props.disabled){columns.push({name:"Actions",actions:[{render:function render(record){return _react2.default.createElement(_eui.EuiButtonIcon,{"aria-label":_i18n.i18n.translate("xpack.security.management.editRole.spacePrivilegeTable.editPrivilegesLabel",{defaultMessage:"Edit privileges for the following spaces: {spaceNames}.",values:{spaceNames:record.spaces.map((function(s){return s.name})).join(", ")}}),color:"primary",iconType:"pencil",onClick:function onClick(){return _this.props.onEdit(record.privilegeIndex)}})}},{render:function render(record){return _react2.default.createElement(_eui.EuiButtonIcon,{"aria-label":_i18n.i18n.translate("xpack.security.management.editRole.spacePrivilegeTable.deletePrivilegesLabel",{defaultMessage:"Delete privileges for the following spaces: {spaceNames}.",values:{spaceNames:record.spaces.map((function(s){return s.name})).join(", ")}}),color:"danger",iconType:"trash",onClick:function onClick(){return _this.onDeleteSpacePrivilege(record)}})}}]})}return _react2.default.createElement(_eui.EuiInMemoryTable,{columns:columns,items:rows,hasActions:true,rowProps:function rowProps(item){return{className:(0,_privilege_utils.isGlobalPrivilegeDefinition)(item.privileges)?"secPrivilegeTable__row--isGlobalSpace":""}}})}));_defineProperty(_assertThisInitialized(_this),"getSortedPrivileges",(function(){var spacePrivileges=_this.props.role.kibana;return spacePrivileges.sort((function(priv1,priv2){return(0,_privilege_utils.isGlobalPrivilegeDefinition)(priv1)?-1:(0,_privilege_utils.isGlobalPrivilegeDefinition)(priv2)?1:0}))}));_defineProperty(_assertThisInitialized(_this),"toggleExpandSpacesGroup",(function(privilegeIndex){if(_this.state.expandedSpacesGroups.includes(privilegeIndex)){_this.setState({expandedSpacesGroups:_this.state.expandedSpacesGroups.filter((function(i){return i!==privilegeIndex}))})}else{_this.setState({expandedSpacesGroups:[].concat(_toConsumableArray(_this.state.expandedSpacesGroups),[privilegeIndex])})}}));_defineProperty(_assertThisInitialized(_this),"onDeleteSpacePrivilege",(function(item){var roleCopy=(0,_model.copyRole)(_this.props.role);roleCopy.kibana.splice(item.privilegeIndex,1);_this.props.onChange(roleCopy);_this.setState({expandedSpacesGroups:_this.state.expandedSpacesGroups.filter((function(i){return i!==item.privilegeIndex}))})}));return _this}_createClass(PrivilegeSpaceTable,[{key:"render",value:function render(){return this.renderKibanaPrivileges()}}]);return PrivilegeSpaceTable}(_react2.Component);exports.PrivilegeSpaceTable=PrivilegeSpaceTable},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SpacesPlugin=void 0;var _spaces_manager=__webpack_require__(219);var _nav_control=__webpack_require__(221);var _create_feature_catalogue_entry=__webpack_require__(228);var _copy_saved_objects_to_space=__webpack_require__(56);var _advanced_settings=__webpack_require__(253);var _management=__webpack_require__(260);var _space_selector=__webpack_require__(286);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SpacesPlugin=function(){function SpacesPlugin(){_classCallCheck(this,SpacesPlugin);_defineProperty(this,"spacesManager",void 0);_defineProperty(this,"managementService",void 0)}_createClass(SpacesPlugin,[{key:"setup",value:function setup(core,plugins){var _this=this;this.spacesManager=new _spaces_manager.SpacesManager(core.http);if(plugins.home){plugins.home.featureCatalogue.register((0,_create_feature_catalogue_entry.createSpacesFeatureCatalogueEntry)())}if(plugins.management){var _plugins$security;this.managementService=new _management.ManagementService;this.managementService.setup({management:plugins.management,getStartServices:core.getStartServices,spacesManager:this.spacesManager,securityLicense:(_plugins$security=plugins.security)===null||_plugins$security===void 0?void 0:_plugins$security.license})}if(plugins.advancedSettings){var advancedSettingsService=new _advanced_settings.AdvancedSettingsService;advancedSettingsService.setup({getActiveSpace:function getActiveSpace(){return _this.spacesManager.getActiveSpace()},componentRegistry:plugins.advancedSettings.component})}_space_selector.spaceSelectorApp.create({getStartServices:core.getStartServices,application:core.application,spacesManager:this.spacesManager});return{registerLegacyAPI:function registerLegacyAPI(legacyAPI){var copySavedObjectsToSpaceService=new _copy_saved_objects_to_space.CopySavedObjectsToSpaceService;copySavedObjectsToSpaceService.setup({spacesManager:_this.spacesManager,managementSetup:{savedObjects:{registry:{register:function register(action){return legacyAPI.registerSavedObjectsManagementAction(action)},has:function has(){throw new Error("not available in legacy shim")},get:function get(){throw new Error("not available in legacy shim")}}}},notificationsSetup:core.notifications})}}}},{key:"start",value:function start(core,plugins){var _this2=this;(0,_nav_control.initSpacesNavControl)(this.spacesManager,core);if(this.managementService){this.managementService.start({capabilities:core.application.capabilities})}return{activeSpace$:this.spacesManager.onActiveSpaceChange$,getActiveSpace:function getActiveSpace(){return _this2.spacesManager.getActiveSpace()}}}},{key:"stop",value:function stop(){if(this.managementService){this.managementService.stop();this.managementService=undefined}}}]);return SpacesPlugin}();exports.SpacesPlugin=SpacesPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SpacesManager",{enumerable:true,get:function get(){return _spaces_manager.SpacesManager}});var _spaces_manager=__webpack_require__(220)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SpacesManager=void 0;var _rxjs=__webpack_require__(89);var _operators=__webpack_require__(43);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SpacesManager=function(){function SpacesManager(http){_classCallCheck(this,SpacesManager);this.http=http;_defineProperty(this,"activeSpace$",new _rxjs.BehaviorSubject(null));_defineProperty(this,"serverBasePath",void 0);_defineProperty(this,"onActiveSpaceChange$",void 0);this.serverBasePath=http.basePath.serverBasePath;this.onActiveSpaceChange$=this.activeSpace$.asObservable().pipe((0,_operators.skipWhile)((function(v){return v==null})));this.refreshActiveSpace()}_createClass(SpacesManager,[{key:"getSpaces",value:function(){var _getSpaces=_asyncToGenerator(regeneratorRuntime.mark((function _callee(purpose){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.http.get("/api/spaces/space",{query:{purpose:purpose}});case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}}),_callee,this)})));function getSpaces(_x){return _getSpaces.apply(this,arguments)}return getSpaces}()},{key:"getSpace",value:function(){var _getSpace=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(id){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.http.get("/api/spaces/space/".concat(encodeURIComponent(id)));case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}}),_callee2,this)})));function getSpace(_x2){return _getSpace.apply(this,arguments)}return getSpace}()},{key:"getActiveSpace",value:function getActiveSpace(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$forceRefresh=_ref.forceRefresh,forceRefresh=_ref$forceRefresh===void 0?false:_ref$forceRefresh;if(this.isAnonymousPath()){throw new Error("Cannot retrieve the active space for anonymous paths")}if(!forceRefresh&&this.activeSpace$.value){return Promise.resolve(this.activeSpace$.value)}return this.http.get("/internal/spaces/_active_space")}},{key:"createSpace",value:function(){var _createSpace=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(space){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.http.post("/api/spaces/space",{body:JSON.stringify(space)});case 2:case"end":return _context3.stop()}}}),_callee3,this)})));function createSpace(_x3){return _createSpace.apply(this,arguments)}return createSpace}()},{key:"updateSpace",value:function(){var _updateSpace=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(space){var activeSpaceId;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.http.put("/api/spaces/space/".concat(encodeURIComponent(space.id)),{query:{overwrite:true},body:JSON.stringify(space)});case 2:_context4.next=4;return this.getActiveSpace();case 4:activeSpaceId=_context4.sent.id;if(space.id===activeSpaceId){this.refreshActiveSpace()}case 6:case"end":return _context4.stop()}}}),_callee4,this)})));function updateSpace(_x4){return _updateSpace.apply(this,arguments)}return updateSpace}()},{key:"deleteSpace",value:function(){var _deleteSpace=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(space){return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.http.delete("/api/spaces/space/".concat(encodeURIComponent(space.id)));case 2:case"end":return _context5.stop()}}}),_callee5,this)})));function deleteSpace(_x5){return _deleteSpace.apply(this,arguments)}return deleteSpace}()},{key:"copySavedObjects",value:function(){var _copySavedObjects=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(objects,spaces,includeReferences,overwrite){return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:return _context6.abrupt("return",this.http.post("/api/spaces/_copy_saved_objects",{body:JSON.stringify({objects:objects,spaces:spaces,includeReferences:includeReferences,overwrite:overwrite})}));case 1:case"end":return _context6.stop()}}}),_callee6,this)})));function copySavedObjects(_x6,_x7,_x8,_x9){return _copySavedObjects.apply(this,arguments)}return copySavedObjects}()},{key:"resolveCopySavedObjectsErrors",value:function(){var _resolveCopySavedObjectsErrors=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(objects,retries,includeReferences){return regeneratorRuntime.wrap((function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:return _context7.abrupt("return",this.http.post("/api/spaces/_resolve_copy_saved_objects_errors",{body:JSON.stringify({objects:objects,includeReferences:includeReferences,retries:retries})}));case 1:case"end":return _context7.stop()}}}),_callee7,this)})));function resolveCopySavedObjectsErrors(_x10,_x11,_x12){return _resolveCopySavedObjectsErrors.apply(this,arguments)}return resolveCopySavedObjectsErrors}()},{key:"redirectToSpaceSelector",value:function redirectToSpaceSelector(){window.location.href="".concat(this.serverBasePath,"/spaces/space_selector")}},{key:"refreshActiveSpace",value:function(){var _refreshActiveSpace=_asyncToGenerator(regeneratorRuntime.mark((function _callee8(){var activeSpace;return regeneratorRuntime.wrap((function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(!this.isAnonymousPath()){_context8.next=2;break}return _context8.abrupt("return");case 2:_context8.next=4;return this.getActiveSpace({forceRefresh:true});case 4:activeSpace=_context8.sent;this.activeSpace$.next(activeSpace);case 6:case"end":return _context8.stop()}}}),_callee8,this)})));function refreshActiveSpace(){return _refreshActiveSpace.apply(this,arguments)}return refreshActiveSpace}()},{key:"isAnonymousPath",value:function isAnonymousPath(){return this.http.anonymousPaths.isAnonymous(window.location.pathname)}}]);return SpacesManager}();exports.SpacesManager=SpacesManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"initSpacesNavControl",{enumerable:true,get:function get(){return _nav_control.initSpacesNavControl}});var _nav_control=__webpack_require__(222)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initSpacesNavControl=initSpacesNavControl;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=_interopRequireDefault(__webpack_require__(10));var _nav_control_popover=__webpack_require__(223);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function initSpacesNavControl(spacesManager,core){var I18nContext=core.i18n.Context;core.chrome.navControls.registerLeft({order:1e3,mount:function mount(targetDomElement){if(core.http.anonymousPaths.isAnonymous(window.location.pathname)){return function(){return null}}_reactDom.default.render(_react.default.createElement(I18nContext,null,_react.default.createElement(_nav_control_popover.NavControlPopover,{spacesManager:spacesManager,serverBasePath:core.http.basePath.serverBasePath,anchorPosition:"downLeft",capabilities:core.application.capabilities,navigateToApp:core.application.navigateToApp})),targetDomElement);return function(){_reactDom.default.unmountComponentAtNode(targetDomElement)}}})}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.NavControlPopover=void 0;var _eui=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(0));var _space_avatar=__webpack_require__(6);var _spaces_description=__webpack_require__(226);var _spaces_menu=__webpack_require__(227);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var popoutContentId="headerSpacesMenuContent";var NavControlPopover=function(_Component){_inherits(NavControlPopover,_Component);function NavControlPopover(props){var _this;_classCallCheck(this,NavControlPopover);_this=_possibleConstructorReturn(this,_getPrototypeOf(NavControlPopover).call(this,props));_defineProperty(_assertThisInitialized(_this),"activeSpace$",void 0);_defineProperty(_assertThisInitialized(_this),"getActiveSpaceButton",(function(){var activeSpace=_this.state.activeSpace;if(!activeSpace){return _this.getButton(_react.default.createElement(_eui.EuiLoadingSpinner,{size:"m"}),"loading")}return _this.getButton(_react.default.createElement(_space_avatar.SpaceAvatar,{space:activeSpace,size:"s",className:"spaceNavGraphic"}),activeSpace.name)}));_defineProperty(_assertThisInitialized(_this),"getButton",(function(linkIcon,linkTitle){return _react.default.createElement(_eui.EuiHeaderSectionItemButton,{"aria-controls":popoutContentId,"aria-expanded":_this.state.showSpaceSelector,"aria-haspopup":"true","aria-label":linkTitle,title:linkTitle,onClick:_this.toggleSpaceSelector},linkIcon)}));_defineProperty(_assertThisInitialized(_this),"toggleSpaceSelector",(function(){var isOpening=!_this.state.showSpaceSelector;if(isOpening){_this.loadSpaces()}_this.setState({showSpaceSelector:!_this.state.showSpaceSelector})}));_defineProperty(_assertThisInitialized(_this),"closeSpaceSelector",(function(){_this.setState({showSpaceSelector:false})}));_this.state={showSpaceSelector:false,loading:false,activeSpace:null,spaces:[]};return _this}_createClass(NavControlPopover,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.activeSpace$=this.props.spacesManager.onActiveSpaceChange$.subscribe({next:function next(activeSpace){_this2.setState({activeSpace:activeSpace})}})}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.activeSpace$){this.activeSpace$.unsubscribe()}}},{key:"render",value:function render(){var button=this.getActiveSpaceButton();if(!button){return null}var element;if(!this.state.loading&&this.state.spaces.length<2){element=_react.default.createElement(_spaces_description.SpacesDescription,{id:popoutContentId,onManageSpacesClick:this.toggleSpaceSelector,capabilities:this.props.capabilities,navigateToApp:this.props.navigateToApp})}else{element=_react.default.createElement(_spaces_menu.SpacesMenu,{id:popoutContentId,spaces:this.state.spaces,isLoading:this.state.loading,serverBasePath:this.props.serverBasePath,onManageSpacesClick:this.toggleSpaceSelector,capabilities:this.props.capabilities,navigateToApp:this.props.navigateToApp})}return _react.default.createElement(_eui.EuiPopover,{id:"spcMenuPopover","data-test-subj":"spacesNavSelector",button:button,isOpen:this.state.showSpaceSelector,closePopover:this.closeSpaceSelector,anchorPosition:this.props.anchorPosition,panelPaddingSize:"none",repositionOnScroll:true,withTitle:this.props.anchorPosition.includes("down"),ownFocus:true},element)}},{key:"loadSpaces",value:function(){var _loadSpaces=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var spacesManager,spaces;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:spacesManager=this.props.spacesManager;if(!this.state.loading){_context.next=3;break}return _context.abrupt("return");case 3:this.setState({loading:true});_context.next=6;return spacesManager.getSpaces();case 6:spaces=_context.sent;this.setState({spaces:spaces,loading:false});case 8:case"end":return _context.stop()}}}),_callee,this)})));function loadSpaces(){return _loadSpaces.apply(this,arguments)}return loadSpaces}()}]);return NavControlPopover}(_react.Component);exports.NavControlPopover=NavControlPopover},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SpaceAvatar=void 0;var _eui=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _common=__webpack_require__(7);var _space_attributes=__webpack_require__(54);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var SpaceAvatar=function SpaceAvatar(props){var space=props.space,size=props.size,announceSpaceName=props.announceSpaceName,rest=_objectWithoutProperties(props,["space","size","announceSpaceName"]);var spaceName=space.name?space.name.trim():"";var spaceColor=(0,_space_attributes.getSpaceColor)(space);return _react.default.createElement(_eui.EuiAvatar,_extends({type:"space","data-test-subj":"space-avatar-".concat(space.id),name:spaceName},!announceSpaceName&&{"aria-label":"","aria-hidden":true},{size:size||"m",initialsLength:_common.MAX_SPACE_INITIALS,initials:(0,_space_attributes.getSpaceInitials)(space),color:(0,_eui.isValidHex)(spaceColor)?spaceColor:"",imageUrl:(0,_space_attributes.getSpaceImageUrl)(space)},rest))};exports.SpaceAvatar=SpaceAvatar;SpaceAvatar.defaultProps={announceSpaceName:true}},function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});exports.getSpaceIdFromPath=getSpaceIdFromPath;exports.addSpaceIdToPath=addSpaceIdToPath;var _constants=__webpack_require__(22);function getSpaceIdFromPath(){var requestBasePath=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"/";var serverBasePath=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"/";var pathToCheck=requestBasePath;if(serverBasePath&&serverBasePath!=="/"&&requestBasePath.startsWith(serverBasePath)){pathToCheck=requestBasePath.substr(serverBasePath.length)}var matchResult=pathToCheck.match(/^\/s\/([a-z0-9_\-]+)/);if(!matchResult||matchResult.length===0){return _constants.DEFAULT_SPACE_ID}var _matchResult=_slicedToArray(matchResult,2),spaceId=_matchResult[1];if(!spaceId){throw new Error("Unable to determine Space ID from request path: ".concat(requestBasePath))}return spaceId}function addSpaceIdToPath(){var basePath=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"/";var spaceId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var requestedPath=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";if(requestedPath&&!requestedPath.startsWith("/")){throw new Error("path must start with a /")}if(spaceId&&spaceId!==_constants.DEFAULT_SPACE_ID){return"".concat(basePath,"/s/").concat(spaceId).concat(requestedPath)}return"".concat(basePath).concat(requestedPath)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SpacesDescription=void 0;var _eui=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(0));var _manage_spaces_button=__webpack_require__(55);var _constants=__webpack_require__(28);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SpacesDescription=function SpacesDescription(props){var panelProps={id:props.id,className:"spcDescription",title:"Spaces"};return _react.default.createElement(_eui.EuiContextMenuPanel,panelProps,_react.default.createElement(_eui.EuiText,{className:"spcDescription__text"},_react.default.createElement("p",null,(0,_constants.getSpacesFeatureDescription)())),_react.default.createElement("div",{key:"manageSpacesButton",className:"spcDescription__manageButtonWrapper"},_react.default.createElement(_manage_spaces_button.ManageSpacesButton,{size:"s",style:{width:"100%"},onClick:props.onManageSpacesClick,capabilities:props.capabilities,navigateToApp:props.navigateToApp})))};exports.SpacesDescription=SpacesDescription},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SpacesMenu=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));var _common=__webpack_require__(7);var _manage_spaces_button=__webpack_require__(55);var _space_avatar=__webpack_require__(6);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SpacesMenuUI=function(_Component){_inherits(SpacesMenuUI,_Component);function SpacesMenuUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,SpacesMenuUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SpacesMenuUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{searchTerm:"",allowSpacesListFocus:false});_defineProperty(_assertThisInitialized(_this),"getVisibleSpaces",(function(searchTerm){var spaces=_this.props.spaces;var filteredSpaces=spaces;if(searchTerm){filteredSpaces=spaces.filter((function(space){var name=space.name,_space$description=space.description,description=_space$description===void 0?"":_space$description;return name.toLowerCase().indexOf(searchTerm)>=0||description.toLowerCase().indexOf(searchTerm)>=0}))}return filteredSpaces}));_defineProperty(_assertThisInitialized(_this),"renderSpacesListPanel",(function(items,searchTerm){if(items.length===0){return _react2.default.createElement(_eui.EuiText,{color:"subdued",className:"eui-textCenter"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.navControl.spacesMenu.noSpacesFoundTitle",defaultMessage:" no spaces found "}))}return _react2.default.createElement(_eui.EuiContextMenuPanel,{key:"spcMenuList","data-search-term":searchTerm,className:"spcMenu__spacesList",hasFocus:_this.state.allowSpacesListFocus,initialFocusedItemIndex:_this.state.allowSpacesListFocus?0:undefined,items:items})}));_defineProperty(_assertThisInitialized(_this),"renderSearchField",(function(){var intl=_this.props.intl;return _react2.default.createElement("div",{key:"manageSpacesSearchField",className:"spcMenu__searchFieldWrapper"},_react2.default.createElement(_eui.EuiFieldSearch,{placeholder:intl.formatMessage({id:"xpack.spaces.navControl.spacesMenu.findSpacePlaceholder",defaultMessage:"Find a space"}),incremental:true,onSearch:_this.onSearch,onKeyDown:_this.onSearchKeyDown,onFocus:_this.onSearchFocus,compressed:true}))}));_defineProperty(_assertThisInitialized(_this),"onSearchKeyDown",(function(e){var focusableKeyCodes=[9,13,40];var keyCode=e.keyCode;if(focusableKeyCodes.includes(keyCode)){_this.setState({allowSpacesListFocus:true})}}));_defineProperty(_assertThisInitialized(_this),"onSearchFocus",(function(){_this.setState({allowSpacesListFocus:false})}));_defineProperty(_assertThisInitialized(_this),"renderManageButton",(function(){return _react2.default.createElement(_manage_spaces_button.ManageSpacesButton,{key:"manageSpacesButton",className:"spcMenu__manageButton",size:"s",onClick:_this.props.onManageSpacesClick,capabilities:_this.props.capabilities,navigateToApp:_this.props.navigateToApp})}));_defineProperty(_assertThisInitialized(_this),"onSearch",(function(searchTerm){_this.setState({searchTerm:searchTerm.trim().toLowerCase()})}));_defineProperty(_assertThisInitialized(_this),"renderSpaceMenuItem",(function(space){var icon=_react2.default.createElement(_space_avatar.SpaceAvatar,{space:space,size:"s"});return _react2.default.createElement(_eui.EuiContextMenuItem,{key:space.id,icon:icon,href:(0,_common.addSpaceIdToPath)(_this.props.serverBasePath,space.id,_common.ENTER_SPACE_PATH),toolTipTitle:space.description&&space.name,toolTipContent:space.description},space.name)}));_defineProperty(_assertThisInitialized(_this),"renderPlaceholderMenuItem",(function(key){return _react2.default.createElement(_eui.EuiContextMenuItem,{key:key,disabled:true},_react2.default.createElement(_eui.EuiLoadingContent,{lines:1}))}));return _this}_createClass(SpacesMenuUI,[{key:"render",value:function render(){var _this$props=this.props,intl=_this$props.intl,isLoading=_this$props.isLoading;var searchTerm=this.state.searchTerm;var items=isLoading?[1,2,3].map(this.renderPlaceholderMenuItem):this.getVisibleSpaces(searchTerm).map(this.renderSpaceMenuItem);var panelProps={id:this.props.id,className:"spcMenu",title:intl.formatMessage({id:"xpack.spaces.navControl.spacesMenu.changeCurrentSpaceTitle",defaultMessage:"Change current space"}),watchedItemProps:["data-search-term"]};if(this.props.spaces.length>=_common.SPACE_SEARCH_COUNT_THRESHOLD){return _react2.default.createElement(_eui.EuiContextMenuPanel,panelProps,this.renderSearchField(),this.renderSpacesListPanel(items,searchTerm),this.renderManageButton())}items.push(this.renderManageButton());return _react2.default.createElement(_eui.EuiContextMenuPanel,_extends({},panelProps,{items:items}))}}]);return SpacesMenuUI}(_react2.Component);var SpacesMenu=(0,_react.injectI18n)(SpacesMenuUI);exports.SpacesMenu=SpacesMenu},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSpacesFeatureCatalogueEntry=void 0;var _i18n=__webpack_require__(3);var _public=__webpack_require__(17);var _constants=__webpack_require__(28);var createSpacesFeatureCatalogueEntry=function createSpacesFeatureCatalogueEntry(){return{id:"spaces",title:_i18n.i18n.translate("xpack.spaces.spacesTitle",{defaultMessage:"Spaces"}),description:(0,_constants.getSpacesFeatureDescription)(),icon:"spacesApp",path:"/app/kibana#/management/kibana/spaces",showOnHomePage:true,category:_public.FeatureCatalogueCategory.ADMIN}};exports.createSpacesFeatureCatalogueEntry=createSpacesFeatureCatalogueEntry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.summarizeCopyResult=summarizeCopyResult;function summarizeCopyResult(savedObject,copyResult,includeRelated){var successful=Boolean(copyResult&&copyResult.failedImports.length===0);var conflicts=copyResult?copyResult.failedImports.filter((function(failed){return failed.error.type==="conflict"})):[];var unresolvableErrors=copyResult?copyResult.failedImports.filter((function(failed){return failed.error.type!=="conflict"})):[];var hasConflicts=conflicts.length>0;var hasUnresolvableErrors=Boolean(copyResult&&copyResult.failedImports.some((function(failed){return failed.error.type!=="conflict"})));var objectMap=new Map;objectMap.set("".concat(savedObject.type,":").concat(savedObject.id),{type:savedObject.type,id:savedObject.id,name:savedObject.meta.title,conflicts:conflicts.filter((function(c){return c.obj.type===savedObject.type&&c.obj.id===savedObject.id})),hasUnresolvableErrors:unresolvableErrors.some((function(e){return e.obj.type===savedObject.type&&e.obj.id===savedObject.id}))});if(includeRelated){savedObject.references.forEach((function(ref){objectMap.set("".concat(ref.type,":").concat(ref.id),{type:ref.type,id:ref.id,name:ref.name,conflicts:conflicts.filter((function(c){return c.obj.type===ref.type&&c.obj.id===ref.id})),hasUnresolvableErrors:unresolvableErrors.some((function(e){return e.obj.type===ref.type&&e.obj.id===ref.id}))})}));var transitiveConflicts=conflicts.filter((function(c){return!objectMap.has("".concat(c.obj.type,":").concat(c.obj.id))}));transitiveConflicts.forEach((function(conflict){objectMap.set("".concat(conflict.obj.type,":").concat(conflict.obj.id),{type:conflict.obj.type,id:conflict.obj.id,name:conflict.obj.title||conflict.obj.id,conflicts:conflicts.filter((function(c){return c.obj.type===conflict.obj.type&&conflict.obj.id})),hasUnresolvableErrors:unresolvableErrors.some((function(e){return e.obj.type===conflict.obj.type&&e.obj.id===conflict.obj.id}))})}))}if(typeof copyResult==="undefined"){return{processing:true,objects:Array.from(objectMap.values())}}if(successful){return{successful:successful,hasConflicts:false,objects:Array.from(objectMap.values()),hasUnresolvableErrors:false,processing:false}}return{successful:successful,hasConflicts:hasConflicts,objects:Array.from(objectMap.values()),hasUnresolvableErrors:hasUnresolvableErrors,processing:false}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CopySavedObjectsToSpaceService=void 0;var _copy_saved_objects_to_space_action=__webpack_require__(231);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var CopySavedObjectsToSpaceService=function(){function CopySavedObjectsToSpaceService(){_classCallCheck(this,CopySavedObjectsToSpaceService)}_createClass(CopySavedObjectsToSpaceService,[{key:"setup",value:function setup(_ref){var spacesManager=_ref.spacesManager,managementSetup=_ref.managementSetup,notificationsSetup=_ref.notificationsSetup;var action=new _copy_saved_objects_to_space_action.CopyToSpaceSavedObjectsManagementAction(spacesManager,notificationsSetup);managementSetup.savedObjects.registry.register(action)}}]);return CopySavedObjectsToSpaceService}();exports.CopySavedObjectsToSpaceService=CopySavedObjectsToSpaceService},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.CopyToSpaceSavedObjectsManagementAction=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(3);var _public=__webpack_require__(57);var _components=__webpack_require__(243);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var CopyToSpaceSavedObjectsManagementAction=function(_SavedObjectsManageme){_inherits(CopyToSpaceSavedObjectsManagementAction,_SavedObjectsManageme);function CopyToSpaceSavedObjectsManagementAction(spacesManager,notifications){var _this;_classCallCheck(this,CopyToSpaceSavedObjectsManagementAction);_this=_possibleConstructorReturn(this,_getPrototypeOf(CopyToSpaceSavedObjectsManagementAction).call(this));_this.spacesManager=spacesManager;_this.notifications=notifications;_defineProperty(_assertThisInitialized(_this),"id","copy_saved_objects_to_space");_defineProperty(_assertThisInitialized(_this),"euiAction",{name:_i18n.i18n.translate("xpack.spaces.management.copyToSpace.actionTitle",{defaultMessage:"Copy to space"}),description:_i18n.i18n.translate("xpack.spaces.management.copyToSpace.actionDescription",{defaultMessage:"Copy this saved object to one or more spaces"}),icon:"spacesApp",type:"icon",onClick:function onClick(object){_this.start(object)}});_defineProperty(_assertThisInitialized(_this),"render",(function(){if(!_this.record){throw new Error("No record available! `render()` was likely called before `start()`.")}return _react.default.createElement(_components.CopySavedObjectsToSpaceFlyout,{onClose:_this.onClose,savedObject:_this.record,spacesManager:_this.spacesManager,toastNotifications:_this.notifications.toasts})}));_defineProperty(_assertThisInitialized(_this),"onClose",(function(){_this.finish()}));return _this}return CopyToSpaceSavedObjectsManagementAction}(_public.SavedObjectsManagementAction);exports.CopyToSpaceSavedObjectsManagementAction=CopyToSpaceSavedObjectsManagementAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;Object.defineProperty(exports,"ManagementSetup",{enumerable:true,get:function get(){return _plugin.ManagementSetup}});Object.defineProperty(exports,"ManagementStart",{enumerable:true,get:function get(){return _plugin.ManagementStart}});Object.defineProperty(exports,"IndexPatternCreationConfig",{enumerable:true,get:function get(){return _index_pattern_management.IndexPatternCreationConfig}});Object.defineProperty(exports,"IndexPatternListConfig",{enumerable:true,get:function get(){return _index_pattern_management.IndexPatternListConfig}});Object.defineProperty(exports,"SavedObjectsManagementAction",{enumerable:true,get:function get(){return _saved_objects_management.SavedObjectsManagementAction}});Object.defineProperty(exports,"SavedObjectsManagementRecord",{enumerable:true,get:function get(){return _saved_objects_management.SavedObjectsManagementRecord}});var _plugin=__webpack_require__(233);var _index_pattern_management=__webpack_require__(58);var _saved_objects_management=__webpack_require__(29);function plugin(initializerContext){return new _plugin.ManagementPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ManagementPlugin=void 0;var _services=__webpack_require__(234);var _saved_objects_management=__webpack_require__(29);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ManagementPlugin=function(){function ManagementPlugin(initializerContext){_classCallCheck(this,ManagementPlugin);_defineProperty(this,"indexPattern",new _services.IndexPatternManagementService);_defineProperty(this,"savedObjects",new _saved_objects_management.SavedObjectsManagementService)}_createClass(ManagementPlugin,[{key:"setup",value:function setup(core,_ref){var home=_ref.home;return{indexPattern:this.indexPattern.setup({httpClient:core.http,home:home}),savedObjects:this.savedObjects.setup({home:home})}}},{key:"start",value:function start(core,plugins){return{}}},{key:"stop",value:function stop(){this.indexPattern.stop()}}]);return ManagementPlugin}();exports.ManagementPlugin=ManagementPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _index_pattern_management=__webpack_require__(58);Object.keys(_index_pattern_management).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_pattern_management[key]}})}));var _saved_objects_management=__webpack_require__(29);Object.keys(_saved_objects_management).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _saved_objects_management[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternManagementService=void 0;var _i18n=__webpack_require__(3);var _public=__webpack_require__(17);var _creation=__webpack_require__(59);var _list=__webpack_require__(60);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var IndexPatternManagementService=function(){function IndexPatternManagementService(){_classCallCheck(this,IndexPatternManagementService)}_createClass(IndexPatternManagementService,[{key:"setup",value:function setup(_ref){var httpClient=_ref.httpClient,home=_ref.home;var creation=new _creation.IndexPatternCreationManager(httpClient);var list=new _list.IndexPatternListManager;creation.add(_creation.IndexPatternCreationConfig);list.add(_list.IndexPatternListConfig);home.featureCatalogue.register({id:"index_patterns",title:_i18n.i18n.translate("management.indexPatternHeader",{defaultMessage:"Index Patterns"}),description:_i18n.i18n.translate("management.indexPatternLabel",{defaultMessage:"Manage the index patterns that help retrieve your data from Elasticsearch."}),icon:"indexPatternApp",path:"/app/kibana#/management/kibana/index_patterns",showOnHomePage:true,category:_public.FeatureCatalogueCategory.ADMIN});return{creation:creation,list:list}}},{key:"stop",value:function stop(){}}]);return IndexPatternManagementService}();exports.IndexPatternManagementService=IndexPatternManagementService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternCreationConfig=void 0;var _i18n=__webpack_require__(3);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var indexPatternTypeName=_i18n.i18n.translate("management.editIndexPattern.createIndex.defaultTypeName",{defaultMessage:"index pattern"});var indexPatternButtonText=_i18n.i18n.translate("management.editIndexPattern.createIndex.defaultButtonText",{defaultMessage:"Standard index pattern"});var indexPatternButtonDescription=_i18n.i18n.translate("management.editIndexPattern.createIndex.defaultButtonDescription",{defaultMessage:"Perform full aggregations against any data"});var IndexPatternCreationConfig=function(){function IndexPatternCreationConfig(_ref){var _ref$type=_ref.type,type=_ref$type===void 0?undefined:_ref$type,_ref$name=_ref.name,name=_ref$name===void 0?indexPatternTypeName:_ref$name,_ref$showSystemIndice=_ref.showSystemIndices,showSystemIndices=_ref$showSystemIndice===void 0?true:_ref$showSystemIndice,_ref$httpClient=_ref.httpClient,httpClient=_ref$httpClient===void 0?null:_ref$httpClient,_ref$isBeta=_ref.isBeta,isBeta=_ref$isBeta===void 0?false:_ref$isBeta;_classCallCheck(this,IndexPatternCreationConfig);_defineProperty(this,"key","default");_defineProperty(this,"type",void 0);_defineProperty(this,"name",void 0);_defineProperty(this,"showSystemIndices",void 0);_defineProperty(this,"httpClient",void 0);_defineProperty(this,"isBeta",void 0);this.type=type;this.name=name;this.showSystemIndices=showSystemIndices;this.httpClient=httpClient;this.isBeta=isBeta}_createClass(IndexPatternCreationConfig,[{key:"getIndexPatternCreationOption",value:function(){var _getIndexPatternCreationOption=_asyncToGenerator(regeneratorRuntime.mark((function _callee(urlHandler){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",{text:indexPatternButtonText,description:indexPatternButtonDescription,testSubj:"createStandardIndexPatternButton",onClick:function onClick(){urlHandler("/management/kibana/index_pattern")}});case 1:case"end":return _context.stop()}}}),_callee)})));function getIndexPatternCreationOption(_x){return _getIndexPatternCreationOption.apply(this,arguments)}return getIndexPatternCreationOption}()},{key:"getIndexPatternType",value:function getIndexPatternType(){return this.type}},{key:"getIndexPatternName",value:function getIndexPatternName(){return this.name}},{key:"getIsBeta",value:function getIsBeta(){return this.isBeta}},{key:"getShowSystemIndices",value:function getShowSystemIndices(){return this.showSystemIndices}},{key:"getIndexTags",value:function getIndexTags(indexName){return[]}},{key:"checkIndicesForErrors",value:function checkIndicesForErrors(indices){return undefined}},{key:"getIndexPatternMappings",value:function getIndexPatternMappings(){return{}}},{key:"renderPrompt",value:function renderPrompt(){return null}},{key:"getFetchForWildcardOptions",value:function getFetchForWildcardOptions(){return{}}}]);return IndexPatternCreationConfig}();exports.IndexPatternCreationConfig=IndexPatternCreationConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternCreationManager=void 0;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IndexPatternCreationManager=function(){function IndexPatternCreationManager(httpClient){_classCallCheck(this,IndexPatternCreationManager);this.httpClient=httpClient;_defineProperty(this,"configs",void 0);this.configs=[]}_createClass(IndexPatternCreationManager,[{key:"add",value:function add(Config){var config=new Config({httpClient:this.httpClient});if(this.configs.findIndex((function(c){return c.key===config.key}))!==-1){throw new Error("".concat(config.key," exists in IndexPatternCreationManager."))}this.configs.push(config)}},{key:"getType",value:function getType(key){if(key){var index=this.configs.findIndex((function(config){return config.key===key}));return this.configs[index]||null}else{return this.getType("default")}}},{key:"getIndexPatternCreationOptions",value:function(){var _getIndexPatternCreationOptions=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(urlHandler){var options;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:options=[];_context2.next=3;return Promise.all(this.configs.map(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(config){var option;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!config.getIndexPatternCreationOption){_context.next=6;break}_context.next=3;return config.getIndexPatternCreationOption(urlHandler);case 3:_context.t0=_context.sent;_context.next=7;break;case 6:_context.t0=null;case 7:option=_context.t0;if(option){options.push(option)}case 9:case"end":return _context.stop()}}}),_callee)})));return function(_x2){return _ref.apply(this,arguments)}}()));case 3:return _context2.abrupt("return",options);case 4:case"end":return _context2.stop()}}}),_callee2,this)})));function getIndexPatternCreationOptions(_x){return _getIndexPatternCreationOptions.apply(this,arguments)}return getIndexPatternCreationOptions}()}]);return IndexPatternCreationManager}();exports.IndexPatternCreationManager=IndexPatternCreationManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternListConfig=void 0;var _i18n=__webpack_require__(3);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IndexPatternListConfig=function(){function IndexPatternListConfig(){_classCallCheck(this,IndexPatternListConfig);_defineProperty(this,"key","default")}_createClass(IndexPatternListConfig,[{key:"getIndexPatternTags",value:function getIndexPatternTags(indexPattern,isDefault){return isDefault?[{key:"default",name:_i18n.i18n.translate("management.editIndexPattern.list.defaultIndexPatternListName",{defaultMessage:"Default"})}]:[]}},{key:"getFieldInfo",value:function getFieldInfo(indexPattern,field){return[]}},{key:"areScriptedFieldsEnabled",value:function areScriptedFieldsEnabled(indexPattern){return true}}]);return IndexPatternListConfig}();exports.IndexPatternListConfig=IndexPatternListConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternListManager=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IndexPatternListManager=function(){function IndexPatternListManager(){_classCallCheck(this,IndexPatternListManager);_defineProperty(this,"configs",void 0);this.configs=[]}_createClass(IndexPatternListManager,[{key:"add",value:function add(Config){var config=new Config;if(this.configs.findIndex((function(c){return c.key===config.key}))!==-1){throw new Error("".concat(config.key," exists in IndexPatternListManager."))}this.configs.push(config)}},{key:"getIndexPatternTags",value:function getIndexPatternTags(indexPattern,isDefault){return this.configs.reduce((function(tags,config){return config.getIndexPatternTags?tags.concat(config.getIndexPatternTags(indexPattern,isDefault)):tags}),[])}},{key:"getFieldInfo",value:function getFieldInfo(indexPattern,field){return this.configs.reduce((function(info,config){return config.getFieldInfo?info.concat(config.getFieldInfo(indexPattern,field)):info}),[])}},{key:"areScriptedFieldsEnabled",value:function areScriptedFieldsEnabled(indexPattern){return this.configs.every((function(config){return config.areScriptedFieldsEnabled?config.areScriptedFieldsEnabled(indexPattern):true}))}}]);return IndexPatternListManager}();exports.IndexPatternListManager=IndexPatternListManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectsManagementAction=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SavedObjectsManagementAction=function(){function SavedObjectsManagementAction(){_classCallCheck(this,SavedObjectsManagementAction);_defineProperty(this,"render",void 0);_defineProperty(this,"id",void 0);_defineProperty(this,"euiAction",void 0);_defineProperty(this,"callbacks",[]);_defineProperty(this,"record",null)}_createClass(SavedObjectsManagementAction,[{key:"registerOnFinishCallback",value:function registerOnFinishCallback(callback){this.callbacks.push(callback)}},{key:"start",value:function start(record){this.record=record}},{key:"finish",value:function finish(){this.record=null;this.callbacks.forEach((function(callback){return callback()}))}}]);return SavedObjectsManagementAction}();exports.SavedObjectsManagementAction=SavedObjectsManagementAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectsManagementService=void 0;var _i18n=__webpack_require__(3);var _public=__webpack_require__(17);var _saved_objects_management_action_registry=__webpack_require__(61);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var SavedObjectsManagementService=function(){function SavedObjectsManagementService(){_classCallCheck(this,SavedObjectsManagementService)}_createClass(SavedObjectsManagementService,[{key:"setup",value:function setup(_ref){var home=_ref.home;home.featureCatalogue.register({id:"saved_objects",title:_i18n.i18n.translate("management.objects.savedObjectsTitle",{defaultMessage:"Saved Objects"}),description:_i18n.i18n.translate("management.objects.savedObjectsDescription",{defaultMessage:"Import, export, and manage your saved searches, visualizations, and dashboards."}),icon:"savedObjectsApp",path:"/app/kibana#/management/kibana/objects",showOnHomePage:true,category:_public.FeatureCatalogueCategory.ADMIN});return{registry:_saved_objects_management_action_registry.SavedObjectsManagementActionRegistry}}},{key:"stop",value:function stop(){}}]);return SavedObjectsManagementService}();exports.SavedObjectsManagementService=SavedObjectsManagementService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.processImportResponse=processImportResponse;function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function processImportResponse(response){var failedImports=[];var unmatchedReferences=new Map;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=(response.errors||[])[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _ref2=_step.value;var error=_ref2.error,obj=_objectWithoutProperties(_ref2,["error"]);failedImports.push({obj:obj,error:error});if(error.type!=="missing_references"){continue}var indexPatternRefs=error.references.filter((function(ref){return ref.type==="index-pattern"}));var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=indexPatternRefs[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var missingReference=_step2.value;var conflict=unmatchedReferences.get("".concat(missingReference.type,":").concat(missingReference.id))||{existingIndexPatternId:missingReference.id,list:[],newIndexPatternId:undefined};conflict.list.push(obj);unmatchedReferences.set("".concat(missingReference.type,":").concat(missingReference.id),conflict)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return!=null){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return{failedImports:failedImports,unmatchedReferences:Array.from(unmatchedReferences.values()),status:unmatchedReferences.size===0&&!failedImports.some((function(issue){return issue.error.type==="conflict"}))?"success":"idle",importCount:response.successCount,conflictedSavedObjectsLinkedToSavedSearches:undefined,conflictedSearchDocs:undefined}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CopySavedObjectsToSpaceFlyout",{enumerable:true,get:function get(){return _copy_to_space_flyout.CopySavedObjectsToSpaceFlyout}});var _copy_to_space_flyout=__webpack_require__(244)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CopySavedObjectsToSpaceFlyout=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _lodash=__webpack_require__(4);var _i18n=__webpack_require__(3);var _react2=__webpack_require__(2);var _public=__webpack_require__(57);var _processing_copy_to_space=__webpack_require__(245);var _copy_to_space_flyout_footer=__webpack_require__(250);var _copy_to_space_form=__webpack_require__(251);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var CopySavedObjectsToSpaceFlyout=function CopySavedObjectsToSpaceFlyout(props){var onClose=props.onClose,savedObject=props.savedObject,spacesManager=props.spacesManager,toastNotifications=props.toastNotifications;var _useState=(0,_react.useState)({includeRelated:true,overwrite:true,selectedSpaceIds:[]}),_useState2=_slicedToArray(_useState,2),copyOptions=_useState2[0],setCopyOptions=_useState2[1];var _useState3=(0,_react.useState)({isLoading:true,spaces:[]}),_useState4=_slicedToArray(_useState3,2),_useState4$=_useState4[0],isLoading=_useState4$.isLoading,spaces=_useState4$.spaces,setSpacesState=_useState4[1];(0,_react.useEffect)((function(){var getSpaces=spacesManager.getSpaces("copySavedObjectsIntoSpace");var getActiveSpace=spacesManager.getActiveSpace();Promise.all([getSpaces,getActiveSpace]).then((function(_ref){var _ref2=_slicedToArray(_ref,2),allSpaces=_ref2[0],activeSpace=_ref2[1];setSpacesState({isLoading:false,spaces:allSpaces.filter((function(space){return space.id!==activeSpace.id}))})})).catch((function(e){toastNotifications.addError(e,{title:_i18n.i18n.translate("xpack.spaces.management.copyToSpace.spacesLoadErrorTitle",{defaultMessage:"Error loading available spaces"})})}))}),[spacesManager,toastNotifications]);var _useState5=(0,_react.useState)(false),_useState6=_slicedToArray(_useState5,2),copyInProgress=_useState6[0],setCopyInProgress=_useState6[1];var _useState7=(0,_react.useState)(false),_useState8=_slicedToArray(_useState7,2),conflictResolutionInProgress=_useState8[0],setConflictResolutionInProgress=_useState8[1];var _useState9=(0,_react.useState)({}),_useState10=_slicedToArray(_useState9,2),copyResult=_useState10[0],setCopyResult=_useState10[1];var _useState11=(0,_react.useState)({}),_useState12=_slicedToArray(_useState11,2),retries=_useState12[0],setRetries=_useState12[1];var initialCopyFinished=Object.values(copyResult).length>0;var onRetriesChange=function onRetriesChange(updatedRetries){setRetries(updatedRetries)};function startCopy(){return _startCopy.apply(this,arguments)}function _startCopy(){_startCopy=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var copySavedObjectsResult,processedResult;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setCopyInProgress(true);setCopyResult({});_context.prev=2;_context.next=5;return spacesManager.copySavedObjects([{type:savedObject.type,id:savedObject.id}],copyOptions.selectedSpaceIds,copyOptions.includeRelated,copyOptions.overwrite);case 5:copySavedObjectsResult=_context.sent;processedResult=(0,_lodash.mapValues)(copySavedObjectsResult,_public.processImportResponse);setCopyResult(processedResult);_context.next=14;break;case 10:_context.prev=10;_context.t0=_context["catch"](2);setCopyInProgress(false);toastNotifications.addError(_context.t0,{title:_i18n.i18n.translate("xpack.spaces.management.copyToSpace.copyErrorTitle",{defaultMessage:"Error copying saved object"})});case 14:case"end":return _context.stop()}}}),_callee,null,[[2,10]])})));return _startCopy.apply(this,arguments)}function finishCopy(){return _finishCopy.apply(this,arguments)}function _finishCopy(){_finishCopy=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var needsConflictResolution;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:needsConflictResolution=Object.values(retries).some((function(spaceRetry){return spaceRetry.some((function(retry){return retry.overwrite}))}));if(!needsConflictResolution){_context2.next=16;break}setConflictResolutionInProgress(true);_context2.prev=3;_context2.next=6;return spacesManager.resolveCopySavedObjectsErrors([{type:savedObject.type,id:savedObject.id}],retries,copyOptions.includeRelated);case 6:toastNotifications.addSuccess(_i18n.i18n.translate("xpack.spaces.management.copyToSpace.resolveCopySuccessTitle",{defaultMessage:"Overwrite successful"}));onClose();_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2["catch"](3);setCopyInProgress(false);toastNotifications.addError(_context2.t0,{title:_i18n.i18n.translate("xpack.spaces.management.copyToSpace.resolveCopyErrorTitle",{defaultMessage:"Error resolving saved object conflicts"})});case 14:_context2.next=17;break;case 16:onClose();case 17:case"end":return _context2.stop()}}}),_callee2,null,[[3,10]])})));return _finishCopy.apply(this,arguments)}var getFlyoutBody=function getFlyoutBody(){if(isLoading){return _react.default.createElement(_eui.EuiLoadingSpinner,null)}if(spaces.length===0){return _react.default.createElement(_eui.EuiEmptyPrompt,{body:_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.noSpacesBody",defaultMessage:"There are no eligible spaces to copy into."})),title:_react.default.createElement("h3",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.noSpacesTitle",defaultMessage:"No spaces available"}))})}if(!copyInProgress){return _react.default.createElement(_copy_to_space_form.CopyToSpaceForm,{spaces:spaces,copyOptions:copyOptions,onUpdate:setCopyOptions})}return _react.default.createElement(_processing_copy_to_space.ProcessingCopyToSpace,{savedObject:savedObject,copyInProgress:copyInProgress,conflictResolutionInProgress:conflictResolutionInProgress,copyResult:copyResult,spaces:spaces,copyOptions:copyOptions,retries:retries,onRetriesChange:onRetriesChange})};return _react.default.createElement(_eui.EuiFlyout,{onClose:onClose,maxWidth:600,"data-test-subj":"copy-to-space-flyout"},_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiIcon,{size:"m",type:"spacesApp"})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiTitle,{size:"m"},_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpaceFlyoutHeader",defaultMessage:"Copy saved object to space"})))))),_react.default.createElement(_eui.EuiFlyoutBody,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiIcon,{type:savedObject.meta.icon||"apps"})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,savedObject.meta.title)))),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"m"}),getFlyoutBody()),_react.default.createElement(_eui.EuiFlyoutFooter,null,_react.default.createElement(_copy_to_space_flyout_footer.CopyToSpaceFlyoutFooter,{copyInProgress:copyInProgress,conflictResolutionInProgress:conflictResolutionInProgress,initialCopyFinished:initialCopyFinished,copyResult:copyResult,numberOfSelectedSpaces:copyOptions.selectedSpaceIds.length,retries:retries,onCopyStart:startCopy,onCopyFinish:finishCopy})))};exports.CopySavedObjectsToSpaceFlyout=CopySavedObjectsToSpaceFlyout},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ProcessingCopyToSpace=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);var _space_result=__webpack_require__(246);var _=__webpack_require__(56);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ProcessingCopyToSpace=function ProcessingCopyToSpace(props){function updateRetries(spaceId,updatedRetries){props.onRetriesChange(_objectSpread({},props.retries,_defineProperty({},spaceId,updatedRetries)))}return _react.default.createElement("div",{"data-test-subj":"copy-to-space-processing"},_react.default.createElement(_eui.EuiListGroup,{className:"spcCopyToSpaceOptionsView",flush:true},_react.default.createElement(_eui.EuiListGroupItem,{iconType:props.copyOptions.includeRelated?"check":"cross",label:props.copyOptions.includeRelated?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.includeRelatedLabel",defaultMessage:"Including related saved objects"}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.dontIncludeRelatedLabel",defaultMessage:"Not including related saved objects"})}),_react.default.createElement(_eui.EuiListGroupItem,{iconType:props.copyOptions.overwrite?"check":"cross",label:props.copyOptions.overwrite?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.overwriteLabel",defaultMessage:"Automatically overwriting saved objects"}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.dontOverwriteLabel",defaultMessage:"Not overwriting saved objects"})})),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"m"}),_react.default.createElement(_eui.EuiText,{size:"s"},_react.default.createElement("h5",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.copyResultsLabel",defaultMessage:"Copy results"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),props.copyOptions.selectedSpaceIds.map((function(id){var space=props.spaces.find((function(s){return s.id===id}));var spaceCopyResult=props.copyResult[space.id];var summarizedSpaceCopyResult=(0,_.summarizeCopyResult)(props.savedObject,spaceCopyResult,props.copyOptions.includeRelated);return _react.default.createElement(_react.Fragment,{key:id},_react.default.createElement(_space_result.SpaceResult,{savedObject:props.savedObject,space:space,summarizedCopyResult:summarizedSpaceCopyResult,retries:props.retries[space.id]||[],onRetriesChange:function onRetriesChange(retries){return updateRetries(space.id,retries)},conflictResolutionInProgress:props.conflictResolutionInProgress}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}))})))};exports.ProcessingCopyToSpace=ProcessingCopyToSpace},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SpaceResult=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _space_avatar=__webpack_require__(6);var _copy_status_summary_indicator=__webpack_require__(247);var _space_result_details=__webpack_require__(248);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SpaceResult=function SpaceResult(props){var space=props.space,summarizedCopyResult=props.summarizedCopyResult,retries=props.retries,onRetriesChange=props.onRetriesChange,savedObject=props.savedObject,conflictResolutionInProgress=props.conflictResolutionInProgress;var spaceHasPendingOverwrites=retries.some((function(r){return r.overwrite}));return _react.default.createElement(_eui.EuiAccordion,{id:"copyToSpace-".concat(space.id),"data-test-subj":"cts-space-result-".concat(space.id),className:"spcCopyToSpaceResult",buttonContent:_react.default.createElement(_eui.EuiFlexGroup,{responsive:false},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_space_avatar.SpaceAvatar,{space:space,size:"s"})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,null,space.name))),extraAction:_react.default.createElement(_copy_status_summary_indicator.CopyStatusSummaryIndicator,{space:space,summarizedCopyResult:summarizedCopyResult,conflictResolutionInProgress:conflictResolutionInProgress&&spaceHasPendingOverwrites})},_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_space_result_details.SpaceCopyResultDetails,{savedObject:savedObject,summarizedCopyResult:summarizedCopyResult,space:space,retries:retries,onRetriesChange:onRetriesChange,conflictResolutionInProgress:conflictResolutionInProgress&&spaceHasPendingOverwrites}))};exports.SpaceResult=SpaceResult},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CopyStatusSummaryIndicator=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CopyStatusSummaryIndicator=function CopyStatusSummaryIndicator(props){var summarizedCopyResult=props.summarizedCopyResult;var getDataTestSubj=function getDataTestSubj(status){return"cts-summary-indicator-".concat(status,"-").concat(props.space.id)};if(summarizedCopyResult.processing||props.conflictResolutionInProgress){return _react.default.createElement(_eui.EuiLoadingSpinner,{"data-test-subj":getDataTestSubj("loading")})}if(summarizedCopyResult.successful){return _react.default.createElement(_eui.EuiIconTip,{type:"check",color:"success",iconProps:{"data-test-subj":getDataTestSubj("success")},content:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.copyStatusSummary.successMessage",defaultMessage:"Copied successfully to the {space} space.",values:{space:props.space.name}})})}if(summarizedCopyResult.hasUnresolvableErrors){return _react.default.createElement(_eui.EuiIconTip,{type:"cross",color:"danger",iconProps:{"data-test-subj":getDataTestSubj("failed")},content:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.copyStatusSummary.failedMessage",defaultMessage:"Copy to the {space} space failed. Expand this section for details.",values:{space:props.space.name}})})}if(summarizedCopyResult.hasConflicts){return _react.default.createElement(_eui.EuiIconTip,{type:"alert",color:"warning",iconProps:{"data-test-subj":getDataTestSubj("conflicts")},content:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.copyStatusSummary.conflictsMessage",defaultMessage:"One or more conflicts detected in the {space} space. Expand this section to resolve.",values:{space:props.space.name}})})}return null};exports.CopyStatusSummaryIndicator=CopyStatusSummaryIndicator},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SpaceCopyResultDetails=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);var _copy_status_indicator=__webpack_require__(249);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var SpaceCopyResultDetails=function SpaceCopyResultDetails(props){var onOverwriteClick=function onOverwriteClick(object){var retry=props.retries.find((function(r){return r.type===object.type&&r.id===object.id}));props.onRetriesChange([].concat(_toConsumableArray(props.retries.filter((function(r){return r!==retry}))),[{type:object.type,id:object.id,overwrite:retry?!retry.overwrite:true}]))};var hasPendingOverwrite=function hasPendingOverwrite(object){var retry=props.retries.find((function(r){return r.type===object.type&&r.id===object.id}));return Boolean(retry&&retry.overwrite)};var objects=props.summarizedCopyResult.objects;return _react.default.createElement("div",{className:"spcCopyToSpaceResultDetails"},objects.map((function(object,index){var objectOverwritePending=hasPendingOverwrite(object);var showOverwriteButton=object.conflicts.length>0&&!objectOverwritePending&&!props.conflictResolutionInProgress;var showSkipButton=!showOverwriteButton&&objectOverwritePending&&!props.conflictResolutionInProgress;return _react.default.createElement(_eui.EuiFlexGroup,{responsive:false,key:index,alignItems:"center",gutterSize:"s",className:"spcCopyToSpaceResultDetails__row"},_react.default.createElement(_eui.EuiFlexItem,{grow:5,className:"spcCopyToSpaceResultDetails__savedObjectName"},_react.default.createElement(_eui.EuiText,{size:"s"},_react.default.createElement("p",{className:"eui-textTruncate",title:object.name||object.id},object.type,": ",object.name||object.id))),showOverwriteButton&&_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_eui.EuiText,{size:"s"},_react.default.createElement(_eui.EuiButtonEmpty,{onClick:function onClick(){return onOverwriteClick(object)},size:"xs","data-test-subj":"cts-overwrite-conflict-".concat(object.id)},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.copyDetail.overwriteButton",defaultMessage:"Overwrite"})))),showSkipButton&&_react.default.createElement(_eui.EuiFlexItem,{grow:1},_react.default.createElement(_eui.EuiText,{size:"s"},_react.default.createElement(_eui.EuiButtonEmpty,{onClick:function onClick(){return onOverwriteClick(object)},size:"xs","data-test-subj":"cts-skip-conflict-".concat(object.id)},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.copyDetail.skipOverwriteButton",defaultMessage:"Skip"})))),_react.default.createElement(_eui.EuiFlexItem,{className:"spcCopyToSpaceResultDetails__statusIndicator",grow:1},_react.default.createElement("div",{className:"eui-textRight"},_react.default.createElement(_copy_status_indicator.CopyStatusIndicator,{summarizedCopyResult:props.summarizedCopyResult,object:object,overwritePending:hasPendingOverwrite(object),conflictResolutionInProgress:props.conflictResolutionInProgress&&objectOverwritePending}))))})))};exports.SpaceCopyResultDetails=SpaceCopyResultDetails},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CopyStatusIndicator=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CopyStatusIndicator=function CopyStatusIndicator(props){var summarizedCopyResult=props.summarizedCopyResult,conflictResolutionInProgress=props.conflictResolutionInProgress;if(summarizedCopyResult.processing||conflictResolutionInProgress){return _react.default.createElement(_eui.EuiLoadingSpinner,null)}var objectResult=summarizedCopyResult.objects.find((function(o){return o.type===props.object.type&&o.id===props.object.id}));var successful=!objectResult.hasUnresolvableErrors&&(objectResult.conflicts.length===0||props.overwritePending===true);var successColor=props.overwritePending?"warning":"success";var hasConflicts=objectResult.conflicts.length>0;var hasUnresolvableErrors=objectResult.hasUnresolvableErrors;if(successful){var message=props.overwritePending?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.copyStatus.pendingOverwriteMessage",defaultMessage:"Saved object will be overwritten. Click 'Skip' to cancel this operation."}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.copyStatus.successMessage",defaultMessage:"Saved object copied successfully."});return _react.default.createElement(_eui.EuiIconTip,{type:"check",color:successColor,content:message})}if(hasUnresolvableErrors){return _react.default.createElement(_eui.EuiIconTip,{type:"cross",color:"danger","data-test-subj":"cts-object-result-error-".concat(objectResult.id),content:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.copyStatus.unresolvableErrorMessage",defaultMessage:"There was an error copying this saved object."})})}if(hasConflicts){return _react.default.createElement(_eui.EuiIconTip,{type:"alert",color:"warning",content:_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.copyStatus.conflictsMessage",defaultMessage:"A saved object with a matching id ({id}) already exists in this space.",values:{id:objectResult.conflicts[0].obj.id}})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.copyStatus.conflictsOverwriteMessage",defaultMessage:"Click 'Overwrite' to replace this version with the copied one."})))})}return null};exports.CopyStatusIndicator=CopyStatusIndicator},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CopyToSpaceFlyoutFooter=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);var _i18n=__webpack_require__(3);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var CopyToSpaceFlyoutFooter=function CopyToSpaceFlyoutFooter(props){var copyInProgress=props.copyInProgress,initialCopyFinished=props.initialCopyFinished,copyResult=props.copyResult,retries=props.retries;var summarizedResults={successCount:0,overwriteConflictCount:0,conflictCount:0,unresolvableErrorCount:0};if(copyResult){summarizedResults=Object.entries(copyResult).reduce((function(acc,result){var _result=_slicedToArray(result,2),spaceId=_result[0],spaceResult=_result[1];var overwriteCount=(retries[spaceId]||[]).filter((function(c){return c.overwrite})).length;return{loading:false,successCount:acc.successCount+spaceResult.importCount,overwriteConflictCount:acc.overwriteConflictCount+overwriteCount,conflictCount:acc.conflictCount+spaceResult.failedImports.filter((function(i){return i.error.type==="conflict"})).length-overwriteCount,unresolvableErrorCount:acc.unresolvableErrorCount+spaceResult.failedImports.filter((function(i){return i.error.type!=="conflict"})).length}}),summarizedResults)}var getButton=function getButton(){var actionButton;if(initialCopyFinished){var hasPendingOverwrites=summarizedResults.overwriteConflictCount>0;var buttonText=hasPendingOverwrites?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.finishPendingOverwritesCopyToSpacesButton",defaultMessage:"Overwrite {overwriteCount} objects",values:{overwriteCount:summarizedResults.overwriteConflictCount}}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.finishCopyToSpacesButton",defaultMessage:"Finish"});actionButton=_react.default.createElement(_eui.EuiButton,{fill:true,isLoading:props.conflictResolutionInProgress,"aria-live":"assertive","aria-label":props.conflictResolutionInProgress?_i18n.i18n.translate("xpack.spaces.management.copyToSpace.inProgressButtonLabel",{defaultMessage:"Copy is in progress. Please wait."}):_i18n.i18n.translate("xpack.spaces.management.copyToSpace.finishedButtonLabel",{defaultMessage:"Copy finished."}),onClick:function onClick(){return props.onCopyFinish()},"data-test-subj":"cts-finish-button"},buttonText)}else{actionButton=_react.default.createElement(_eui.EuiButton,{fill:true,isLoading:copyInProgress,onClick:function onClick(){return props.onCopyStart()},"data-test-subj":"cts-initiate-button",disabled:props.numberOfSelectedSpaces===0||copyInProgress},props.numberOfSelectedSpaces>0?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.copyToSpacesButton",defaultMessage:"Copy to {spaceCount} {spaceCount, plural, one {space} other {spaces}}",values:{spaceCount:props.numberOfSelectedSpaces}}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.disabledCopyToSpacesButton",defaultMessage:"Copy"}))}return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},actionButton))};if(!copyInProgress){return getButton()}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiStat,{"data-test-subj":"cts-summary-success-count",title:summarizedResults.successCount,titleSize:"s",titleColor:initialCopyFinished?"secondary":"subdued",isLoading:!initialCopyFinished,textAlign:"center",description:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpaceFlyoutFooter.successCount",defaultMessage:"Copied"})})),summarizedResults.overwriteConflictCount>0&&_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiStat,{"data-test-subj":"cts-summary-overwrite-count",title:summarizedResults.overwriteConflictCount,titleSize:"s",titleColor:summarizedResults.overwriteConflictCount>0?"primary":"subdued",isLoading:!initialCopyFinished,textAlign:"center",description:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpaceFlyoutFooter.pendingCount",defaultMessage:"Pending"})})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiStat,{"data-test-subj":"cts-summary-conflict-count",title:summarizedResults.conflictCount,titleSize:"s",titleColor:summarizedResults.conflictCount>0?"primary":"subdued",isLoading:!initialCopyFinished,textAlign:"center",description:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpaceFlyoutFooter.conflictCount",defaultMessage:"Skipped"})})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiStat,{"data-test-subj":"cts-summary-error-count",title:summarizedResults.unresolvableErrorCount,titleSize:"s",titleColor:summarizedResults.unresolvableErrorCount>0?"danger":"subdued",isLoading:!initialCopyFinished,textAlign:"center",description:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpaceFlyoutFooter.errorCount",defaultMessage:"Errors"})}))),_react.default.createElement(_eui.EuiHorizontalRule,null),getButton())};exports.CopyToSpaceFlyoutFooter=CopyToSpaceFlyoutFooter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CopyToSpaceForm=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);var _selectable_spaces_control=__webpack_require__(252);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var CopyToSpaceForm=function CopyToSpaceForm(props){var setOverwrite=function setOverwrite(overwrite){return props.onUpdate(_objectSpread({},props.copyOptions,{overwrite:overwrite}))};var setSelectedSpaceIds=function setSelectedSpaceIds(selectedSpaceIds){return props.onUpdate(_objectSpread({},props.copyOptions,{selectedSpaceIds:selectedSpaceIds}))};return _react.default.createElement("div",{"data-test-subj":"copy-to-space-form"},_react.default.createElement(_eui.EuiListGroup,{className:"spcCopyToSpaceOptionsView",flush:true},_react.default.createElement(_eui.EuiListGroupItem,{className:"spcCopyToSpaceIncludeRelated",iconType:"check",label:_react.default.createElement("span",{className:"spcCopyToSpaceIncludeRelated__label"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.includeRelatedFormLabel",defaultMessage:"Including related saved objects"}))})),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiSwitch,{"data-test-subj":"cts-form-overwrite",label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.automaticallyOverwrite",defaultMessage:"Automatically overwrite all saved objects"}),checked:props.copyOptions.overwrite,onChange:function onChange(e){return setOverwrite(e.target.checked)}}),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"m"}),_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.copyToSpace.selectSpacesLabel",defaultMessage:"Select spaces to copy into"}),fullWidth:true},_react.default.createElement(_selectable_spaces_control.SelectableSpacesControl,{spaces:props.spaces,selectedSpaceIds:props.copyOptions.selectedSpaceIds,onChange:function onChange(selection){return setSelectedSpaceIds(selection)}})))};exports.CopyToSpaceForm=CopyToSpaceForm},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SelectableSpacesControl=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _space_avatar=__webpack_require__(6);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var SelectableSpacesControl=function SelectableSpacesControl(props){var _useState=(0,_react.useState)([]),_useState2=_slicedToArray(_useState,2),options=_useState2[0],setOptions=_useState2[1];if(options.length===0){setOptions(props.spaces.map((function(space){var _ref;return _ref={label:space.name,prepend:_react.default.createElement(_space_avatar.SpaceAvatar,{space:space,size:"s"}),checked:props.selectedSpaceIds.includes(space.id)?"on":null},_defineProperty(_ref,"data-space-id",space.id),_defineProperty(_ref,"data-test-subj","cts-space-selector-row-".concat(space.id)),_ref})))}function updateSelectedSpaces(selectedOptions){if(props.disabled)return;var selectedSpaceIds=selectedOptions.filter((function(opt){return opt.checked})).map((function(opt){return opt["data-space-id"]}));props.onChange(selectedSpaceIds);setOptions(selectedOptions)}if(options.length===0){return _react.default.createElement(_eui.EuiLoadingSpinner,null)}return _react.default.createElement(_eui.EuiSelectable,{options:options,onChange:function onChange(newOptions){return updateSelectedSpaces(newOptions)},listProps:{bordered:true,rowHeight:40,className:"spcCopyToSpace__spacesList","data-test-subj":"cts-form-space-selector"},searchable:true},(function(list,search){return _react.default.createElement(_react.Fragment,null,search,list)}))};exports.SelectableSpacesControl=SelectableSpacesControl},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AdvancedSettingsService",{enumerable:true,get:function get(){return _advanced_settings_service.AdvancedSettingsService}});var _advanced_settings_service=__webpack_require__(254)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AdvancedSettingsService=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _components=__webpack_require__(255);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var AdvancedSettingsService=function(){function AdvancedSettingsService(){_classCallCheck(this,AdvancedSettingsService)}_createClass(AdvancedSettingsService,[{key:"setup",value:function setup(_ref){var getActiveSpace=_ref.getActiveSpace,componentRegistry=_ref.componentRegistry;var PageTitle=function PageTitle(){return _react.default.createElement(_components.AdvancedSettingsTitle,{getActiveSpace:getActiveSpace})};var SubTitle=function SubTitle(){return _react.default.createElement(_components.AdvancedSettingsSubtitle,{getActiveSpace:getActiveSpace})};componentRegistry.register(componentRegistry.componentType.PAGE_TITLE_COMPONENT,PageTitle,true);componentRegistry.register(componentRegistry.componentType.PAGE_SUBTITLE_COMPONENT,SubTitle,true)}}]);return AdvancedSettingsService}();exports.AdvancedSettingsService=AdvancedSettingsService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AdvancedSettingsSubtitle",{enumerable:true,get:function get(){return _advanced_settings_subtitle.AdvancedSettingsSubtitle}});Object.defineProperty(exports,"AdvancedSettingsTitle",{enumerable:true,get:function get(){return _advanced_settings_title.AdvancedSettingsTitle}});var _advanced_settings_subtitle=__webpack_require__(256);var _advanced_settings_title=__webpack_require__(258)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AdvancedSettingsSubtitle",{enumerable:true,get:function get(){return _advanced_settings_subtitle.AdvancedSettingsSubtitle}});var _advanced_settings_subtitle=__webpack_require__(257)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AdvancedSettingsSubtitle=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var AdvancedSettingsSubtitle=function AdvancedSettingsSubtitle(props){var _useState=(0,_react2.useState)(null),_useState2=_slicedToArray(_useState,2),activeSpace=_useState2[0],setActiveSpace=_useState2[1];(0,_react2.useEffect)((function(){props.getActiveSpace().then((function(space){return setActiveSpace(space)}))}),[props]);if(!activeSpace)return null;return _react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiCallOut,{color:"primary",iconType:"spacesApp",title:_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.advancedSettingsSubtitle.applyingSettingsOnPageToSpaceDescription",defaultMessage:"The settings on this page apply to the {spaceName} space, unless otherwise specified.",values:{spaceName:_react2.default.createElement("strong",null,activeSpace.name)}}))}))};exports.AdvancedSettingsSubtitle=AdvancedSettingsSubtitle},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AdvancedSettingsTitle",{enumerable:true,get:function get(){return _advanced_settings_title.AdvancedSettingsTitle}});var _advanced_settings_title=__webpack_require__(259)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AdvancedSettingsTitle=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));var _space_avatar=__webpack_require__(6);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var AdvancedSettingsTitle=function AdvancedSettingsTitle(props){var _useState=(0,_react2.useState)(null),_useState2=_slicedToArray(_useState,2),activeSpace=_useState2[0],setActiveSpace=_useState2[1];(0,_react2.useEffect)((function(){props.getActiveSpace().then((function(space){return setActiveSpace(space)}))}),[props]);if(!activeSpace)return null;return _react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",responsive:false,alignItems:"center"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_space_avatar.SpaceAvatar,{space:activeSpace})),_react2.default.createElement(_eui.EuiFlexItem,{style:{marginLeft:"10px"}},_react2.default.createElement(_eui.EuiTitle,{size:"m"},_react2.default.createElement("h1",{"data-test-subj":"managementSettingsTitle"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.advancedSettingsTitle.settingsTitle",defaultMessage:"Settings"})))))};exports.AdvancedSettingsTitle=AdvancedSettingsTitle},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ManagementService",{enumerable:true,get:function get(){return _management_service.ManagementService}});var _management_service=__webpack_require__(261)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ManagementService=void 0;var _spaces_management_app=__webpack_require__(262);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ManagementService=function(){function ManagementService(){_classCallCheck(this,ManagementService);_defineProperty(this,"registeredSpacesManagementApp",void 0)}_createClass(ManagementService,[{key:"setup",value:function setup(_ref){var getStartServices=_ref.getStartServices,management=_ref.management,spacesManager=_ref.spacesManager,securityLicense=_ref.securityLicense;var kibanaSection=management.sections.getSection("kibana");if(kibanaSection){this.registeredSpacesManagementApp=kibanaSection.registerApp(_spaces_management_app.spacesManagementApp.create({getStartServices:getStartServices,spacesManager:spacesManager,securityLicense:securityLicense}))}}},{key:"start",value:function start(_ref2){var capabilities=_ref2.capabilities;if(!capabilities.spaces.manage){this.disableSpacesApp()}}},{key:"stop",value:function stop(){this.disableSpacesApp()}},{key:"disableSpacesApp",value:function disableSpacesApp(){if(this.registeredSpacesManagementApp){this.registeredSpacesManagementApp.disable()}}}]);return ManagementService}();exports.ManagementService=ManagementService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.spacesManagementApp=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(10);var _reactRouterDom=__webpack_require__(16);var _i18n=__webpack_require__(3);var _spaces_grid=__webpack_require__(263);var _edit_space=__webpack_require__(268);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var spacesManagementApp=Object.freeze({id:"spaces",create:function create(_ref){var getStartServices=_ref.getStartServices,spacesManager=_ref.spacesManager,securityLicense=_ref.securityLicense;return{id:this.id,order:10,title:_i18n.i18n.translate("xpack.spaces.displayName",{defaultMessage:"Spaces"}),mount:function mount(_ref2){var basePath=_ref2.basePath,element=_ref2.element,setBreadcrumbs=_ref2.setBreadcrumbs;return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _ref3,_ref4,_ref4$,notifications,i18nStart,application,features,spacesBreadcrumbs,SpacesGridPageWithBreadcrumbs,CreateSpacePageWithBreadcrumbs,EditSpacePageWithBreadcrumbs;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getStartServices();case 2:_ref3=_context.sent;_ref4=_slicedToArray(_ref3,2);_ref4$=_ref4[0];notifications=_ref4$.notifications;i18nStart=_ref4$.i18n;application=_ref4$.application;features=_ref4[1].features;spacesBreadcrumbs=[{text:_i18n.i18n.translate("xpack.spaces.management.breadcrumb",{defaultMessage:"Spaces"}),href:"#".concat(basePath)}];SpacesGridPageWithBreadcrumbs=function SpacesGridPageWithBreadcrumbs(){var _ref5;setBreadcrumbs(spacesBreadcrumbs);return _react.default.createElement(_spaces_grid.SpacesGridPage,{capabilities:application.capabilities,getFeatures:features.getFeatures,notifications:notifications,spacesManager:spacesManager,securityEnabled:(_ref5=securityLicense===null||securityLicense===void 0?void 0:securityLicense.getFeatures().showLinks)!==null&&_ref5!==void 0?_ref5:false})};CreateSpacePageWithBreadcrumbs=function CreateSpacePageWithBreadcrumbs(){var _ref6;setBreadcrumbs([].concat(spacesBreadcrumbs,[{text:_i18n.i18n.translate("xpack.spaces.management.createSpaceBreadcrumb",{defaultMessage:"Create"})}]));return _react.default.createElement(_edit_space.ManageSpacePage,{capabilities:application.capabilities,getFeatures:features.getFeatures,notifications:notifications,spacesManager:spacesManager,securityEnabled:(_ref6=securityLicense===null||securityLicense===void 0?void 0:securityLicense.getFeatures().showLinks)!==null&&_ref6!==void 0?_ref6:false})};EditSpacePageWithBreadcrumbs=function EditSpacePageWithBreadcrumbs(){var _ref7;var _useParams=(0,_reactRouterDom.useParams)(),spaceId=_useParams.spaceId;var onLoadSpace=function onLoadSpace(space){setBreadcrumbs([].concat(spacesBreadcrumbs,[{text:space.name,href:"#".concat(basePath,"/edit/").concat(encodeURIComponent(space.id))}]))};return _react.default.createElement(_edit_space.ManageSpacePage,{capabilities:application.capabilities,getFeatures:features.getFeatures,notifications:notifications,spacesManager:spacesManager,spaceId:spaceId,onLoadSpace:onLoadSpace,securityEnabled:(_ref7=securityLicense===null||securityLicense===void 0?void 0:securityLicense.getFeatures().showLinks)!==null&&_ref7!==void 0?_ref7:false})};(0,_reactDom.render)(_react.default.createElement(i18nStart.Context,null,_react.default.createElement(_reactRouterDom.HashRouter,{basename:basePath},_react.default.createElement(_reactRouterDom.Switch,null,_react.default.createElement(_reactRouterDom.Route,{path:"/",exact:true},_react.default.createElement(SpacesGridPageWithBreadcrumbs,null)),_react.default.createElement(_reactRouterDom.Route,{path:"/create"},_react.default.createElement(CreateSpacePageWithBreadcrumbs,null)),_react.default.createElement(_reactRouterDom.Route,{path:"/edit/:spaceId"},_react.default.createElement(EditSpacePageWithBreadcrumbs,null))))),element);return _context.abrupt("return",(function(){(0,_reactDom.unmountComponentAtNode)(element)}));case 15:case"end":return _context.stop()}}}),_callee)})))()}}}});exports.spacesManagementApp=spacesManagementApp},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SpacesGridPage",{enumerable:true,get:function get(){return _spaces_grid_page.SpacesGridPage}});var _spaces_grid_page=__webpack_require__(264)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SpacesGridPage=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react2=__webpack_require__(2);var _common=__webpack_require__(7);var _constants=__webpack_require__(22);var _space_avatar=__webpack_require__(6);var _constants2=__webpack_require__(28);var _confirm_delete_modal=__webpack_require__(30);var _secure_space_message=__webpack_require__(62);var _unauthorized_prompt=__webpack_require__(63);var _feature_utils=__webpack_require__(64);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SpacesGridPage=function(_Component){_inherits(SpacesGridPage,_Component);function SpacesGridPage(props){var _this;_classCallCheck(this,SpacesGridPage);_this=_possibleConstructorReturn(this,_getPrototypeOf(SpacesGridPage).call(this,props));_defineProperty(_assertThisInitialized(_this),"getConfirmDeleteModal",(function(){if(!_this.state.showConfirmDeleteModal||!_this.state.selectedSpace){return null}var spacesManager=_this.props.spacesManager;return _react.default.createElement(_confirm_delete_modal.ConfirmDeleteModal,{space:_this.state.selectedSpace,spacesManager:spacesManager,onCancel:function onCancel(){_this.setState({showConfirmDeleteModal:false})},onConfirm:_this.deleteSpace})}));_defineProperty(_assertThisInitialized(_this),"deleteSpace",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var spacesManager,space,_ref2,_ref2$message,errorMessage,message;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:spacesManager=_this.props.spacesManager;space=_this.state.selectedSpace;if(space){_context.next=4;break}return _context.abrupt("return");case 4:_context.prev=4;_context.next=7;return spacesManager.deleteSpace(space);case 7:_context.next=13;break;case 9:_context.prev=9;_context.t0=_context["catch"](4);_ref2=_context.t0.data||{},_ref2$message=_ref2.message,errorMessage=_ref2$message===void 0?"":_ref2$message;_this.props.notifications.toasts.addDanger(_i18n.i18n.translate("xpack.spaces.management.spacesGridPage.errorDeletingSpaceErrorMessage",{defaultMessage:"Error deleting space: {errorMessage}",values:{errorMessage:errorMessage}}));case 13:_this.setState({showConfirmDeleteModal:false});_this.loadGrid();message=_i18n.i18n.translate("xpack.spaces.management.spacesGridPage.spaceSuccessfullyDeletedNotificationMessage",{defaultMessage:'Deleted "{spaceName}" space.',values:{spaceName:space.name}});_this.props.notifications.toasts.addSuccess(message);case 17:case"end":return _context.stop()}}}),_callee,null,[[4,9]])}))));_defineProperty(_assertThisInitialized(_this),"loadGrid",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _this$props,spacesManager,getFeatures,notifications,getSpaces,_ref4,_ref5,spaces,features;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props=_this.props,spacesManager=_this$props.spacesManager,getFeatures=_this$props.getFeatures,notifications=_this$props.notifications;_this.setState({loading:true,spaces:[],features:[]});getSpaces=spacesManager.getSpaces();_context2.prev=3;_context2.next=6;return Promise.all([getSpaces,getFeatures()]);case 6:_ref4=_context2.sent;_ref5=_slicedToArray(_ref4,2);spaces=_ref5[0];features=_ref5[1];_this.setState({loading:false,spaces:spaces,features:features});_context2.next=17;break;case 13:_context2.prev=13;_context2.t0=_context2["catch"](3);_this.setState({loading:false});notifications.toasts.addError(_context2.t0,{title:_i18n.i18n.translate("xpack.spaces.management.spacesGridPage.errorTitle",{defaultMessage:"Error loading spaces"})});case 17:case"end":return _context2.stop()}}}),_callee2,null,[[3,13]])}))));_defineProperty(_assertThisInitialized(_this),"getEditSpacePath",(function(space){return"#/management/kibana/spaces/edit/".concat(encodeURIComponent(space.id))}));_defineProperty(_assertThisInitialized(_this),"onDeleteSpaceClick",(function(space){_this.setState({selectedSpace:space,showConfirmDeleteModal:true})}));_this.state={spaces:[],features:[],loading:true,showConfirmDeleteModal:false,selectedSpace:null};return _this}_createClass(SpacesGridPage,[{key:"componentDidMount",value:function componentDidMount(){if(this.props.capabilities.spaces.manage){this.loadGrid()}}},{key:"render",value:function render(){return _react.default.createElement("div",{className:"spcGridPage","data-test-subj":"spaces-grid-page"},_react.default.createElement(_eui.EuiPageContent,{horizontalPosition:"center"},this.getPageContent()),this.props.securityEnabled&&_react.default.createElement(_secure_space_message.SecureSpaceMessage,null),this.getConfirmDeleteModal())}},{key:"getPageContent",value:function getPageContent(){if(!this.props.capabilities.spaces.manage){return _react.default.createElement(_unauthorized_prompt.UnauthorizedPrompt,null)}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"m"},_react.default.createElement("h1",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.spacesGridPage.spacesTitle",defaultMessage:"Spaces"}))),_react.default.createElement(_eui.EuiText,{color:"subdued",size:"s"},_react.default.createElement("p",null,(0,_constants2.getSpacesFeatureDescription)()))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},this.getPrimaryActionButton())),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_eui.EuiInMemoryTable,{itemId:"id",items:this.state.spaces,columns:this.getColumnConfig(),hasActions:true,pagination:true,sorting:true,search:{box:{placeholder:_i18n.i18n.translate("xpack.spaces.management.spacesGridPage.searchPlaceholder",{defaultMessage:"Search"})}},loading:this.state.loading,message:this.state.loading?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.spacesGridPage.loadingTitle",defaultMessage:"loading…"}):undefined}))}},{key:"getPrimaryActionButton",value:function getPrimaryActionButton(){return _react.default.createElement(_eui.EuiButton,{fill:true,href:"#/management/kibana/spaces/create"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.spacesGridPage.createSpaceButtonLabel",defaultMessage:"Create a space"}))}},{key:"getColumnConfig",value:function getColumnConfig(){var _this2=this;return[{field:"initials",name:"",width:"50px",render:function render(value,record){return _react.default.createElement(_eui.EuiLink,{href:_this2.getEditSpacePath(record)},_react.default.createElement(_space_avatar.SpaceAvatar,{space:record,size:"s"}))}},{field:"name",name:_i18n.i18n.translate("xpack.spaces.management.spacesGridPage.spaceColumnName",{defaultMessage:"Space"}),sortable:true,render:function render(value,record){return _react.default.createElement(_eui.EuiLink,{href:_this2.getEditSpacePath(record)},value)}},{field:"description",name:_i18n.i18n.translate("xpack.spaces.management.spacesGridPage.descriptionColumnName",{defaultMessage:"Description"}),sortable:true},{field:"disabledFeatures",name:_i18n.i18n.translate("xpack.spaces.management.spacesGridPage.featuresColumnName",{defaultMessage:"Features"}),sortable:function sortable(space){return(0,_feature_utils.getEnabledFeatures)(_this2.state.features,space).length},render:function render(disabledFeatures,record){var enabledFeatureCount=(0,_feature_utils.getEnabledFeatures)(_this2.state.features,record).length;if(enabledFeatureCount===_this2.state.features.length){return _react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.spacesGridPage.allFeaturesEnabled",defaultMessage:"All features visible"})}if(enabledFeatureCount===0){return _react.default.createElement(_eui.EuiText,{color:"danger"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.spacesGridPage.noFeaturesEnabled",defaultMessage:"No features visible"}))}return _react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.spacesGridPage.someFeaturesEnabled",defaultMessage:"{enabledFeatureCount} / {totalFeatureCount} features visible",values:{enabledFeatureCount:enabledFeatureCount,totalFeatureCount:_this2.state.features.length}})}},{field:"id",name:_i18n.i18n.translate("xpack.spaces.management.spacesGridPage.identifierColumnName",{defaultMessage:"Identifier"}),sortable:true,render:function render(id){if(id===_constants.DEFAULT_SPACE_ID){return""}return id}},{name:_i18n.i18n.translate("xpack.spaces.management.spacesGridPage.actionsColumnName",{defaultMessage:"Actions"}),actions:[{render:function render(record){return _react.default.createElement(_eui.EuiButtonIcon,{"aria-label":_i18n.i18n.translate("xpack.spaces.management.spacesGridPage.editSpaceActionName",{defaultMessage:"Edit {spaceName}.",values:{spaceName:record.name}}),color:"primary",iconType:"pencil",href:_this2.getEditSpacePath(record)})}},{available:function available(record){return!(0,_common.isReservedSpace)(record)},render:function render(record){return _react.default.createElement(_eui.EuiButtonIcon,{"aria-label":_i18n.i18n.translate("xpack.spaces.management.spacesGridPage.deleteActionName",{defaultMessage:"Delete {spaceName}.",values:{spaceName:record.name}}),color:"danger",iconType:"trash",onClick:function onClick(){return _this2.onDeleteSpaceClick(record)}})}}]}]}}]);return SpacesGridPage}(_react.Component);exports.SpacesGridPage=SpacesGridPage},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ConfirmDeleteModal=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ConfirmDeleteModalUI=function(_Component){_inherits(ConfirmDeleteModalUI,_Component);function ConfirmDeleteModalUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,ConfirmDeleteModalUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ConfirmDeleteModalUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{confirmSpaceName:"",error:null,deleteInProgress:false,isDeletingCurrentSpace:false});_defineProperty(_assertThisInitialized(_this),"onSpaceNameChange",(function(e){if(typeof _this.state.error==="boolean"){_this.setState({confirmSpaceName:e.target.value,error:e.target.value!==_this.props.space.name})}else{_this.setState({confirmSpaceName:e.target.value})}}));_defineProperty(_assertThisInitialized(_this),"onConfirm",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var needsRedirect,spacesManager;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(_this.state.confirmSpaceName===_this.props.space.name)){_context.next=10;break}needsRedirect=_this.state.isDeletingCurrentSpace;spacesManager=_this.props.spacesManager;_this.setState({deleteInProgress:true});_context.next=6;return _this.props.onConfirm();case 6:_this.setState({deleteInProgress:false});if(needsRedirect){spacesManager.redirectToSpaceSelector()}_context.next=11;break;case 10:_this.setState({error:true});case 11:case"end":return _context.stop()}}}),_callee)}))));return _this}_createClass(ConfirmDeleteModalUI,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;isCurrentSpace(this.props.space,this.props.spacesManager).then((function(result){_this2.setState({isDeletingCurrentSpace:result})}))}},{key:"render",value:function render(){var _this$props=this.props,space=_this$props.space,onCancel=_this$props.onCancel,intl=_this$props.intl;var isDeletingCurrentSpace=this.state.isDeletingCurrentSpace;var warning=null;if(isDeletingCurrentSpace){var name=_react2.default.createElement("span",null,"(",_react2.default.createElement("strong",null,space.name),")");warning=_react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiCallOut,{color:"warning"},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.confirmDeleteModal.redirectAfterDeletingCurrentSpaceWarningMessage",defaultMessage:"You are about to delete your current space {name}. You will be redirected to choose a different space if you continue.",values:{name:name}}))))}var modalProps={onClose:onCancel,className:"spcConfirmDeleteModal",initialFocus:'input[name="confirmDeleteSpaceInput"]'};return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiModal,modalProps,_react2.default.createElement(_eui.EuiModalHeader,null,_react2.default.createElement(_eui.EuiModalHeaderTitle,{"data-test-subj":"confirmModalTitleText"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.confirmDeleteModal.confirmDeleteSpaceButtonLabel",defaultMessage:"Delete space {spaceName}",values:{spaceName:"'"+space.name+"'"}}))),_react2.default.createElement(_eui.EuiModalBody,null,_react2.default.createElement(_eui.EuiText,{"data-test-subj":"confirmModalBodyText"},_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.confirmDeleteModal.deletingSpaceWarningMessage",defaultMessage:"Deleting a space permanently removes the space and {allContents}. You can't undo this action.",values:{allContents:_react2.default.createElement("strong",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.confirmDeleteModal.allContentsText",defaultMessage:"all of its contents"}))}})),_react2.default.createElement(_eui.EuiFormRow,{label:intl.formatMessage({id:"xpack.spaces.management.confirmDeleteModal.confirmSpaceNameFormRowLabel",defaultMessage:"Confirm space name to delete"}),isInvalid:!!this.state.error,error:intl.formatMessage({id:"xpack.spaces.management.confirmDeleteModal.spaceNamesDoNoMatchErrorMessage",defaultMessage:"Space names do not match."})},_react2.default.createElement(_eui.EuiFieldText,{name:"confirmDeleteSpaceInput",value:this.state.confirmSpaceName,onChange:this.onSpaceNameChange,disabled:this.state.deleteInProgress})),warning)),_react2.default.createElement(_eui.EuiModalFooter,null,_react2.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"confirmModalCancelButton",onClick:onCancel,isDisabled:this.state.deleteInProgress},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.confirmDeleteModal.cancelButtonLabel",defaultMessage:"Cancel"})),_react2.default.createElement(_eui.EuiButton,{"data-test-subj":"confirmModalConfirmButton",onClick:this.onConfirm,fill:true,color:"danger",isLoading:this.state.deleteInProgress},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.confirmDeleteModal.deleteSpaceAndAllContentsButtonLabel",defaultMessage:" Delete space and all contents"})))))}}]);return ConfirmDeleteModalUI}(_react2.Component);function isCurrentSpace(_x,_x2){return _isCurrentSpace.apply(this,arguments)}function _isCurrentSpace(){_isCurrentSpace=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(space,spacesManager){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=space.id;_context2.next=3;return spacesManager.getActiveSpace();case 3:_context2.t1=_context2.sent.id;return _context2.abrupt("return",_context2.t0===_context2.t1);case 5:case"end":return _context2.stop()}}}),_callee2)})));return _isCurrentSpace.apply(this,arguments)}var ConfirmDeleteModal=(0,_react.injectI18n)(ConfirmDeleteModalUI);exports.ConfirmDeleteModal=ConfirmDeleteModal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SecureSpaceMessage=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _i18n=__webpack_require__(3);var _react2=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var SecureSpaceMessage=function SecureSpaceMessage(){var rolesLinkTextAriaLabel=_i18n.i18n.translate("xpack.spaces.management.secureSpaceMessage.rolesLinkTextAriaLabel",{defaultMessage:"Roles management page"});return _react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_eui.EuiHorizontalRule,null),_react2.default.createElement(_eui.EuiText,{className:"eui-textCenter"},_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.secureSpaceMessage.howToAssignRoleToSpaceDescription",defaultMessage:"Want to assign a role to a space? Go to {rolesLink}.",values:{rolesLink:_react2.default.createElement(_eui.EuiLink,{href:"#/management/security/roles","aria-label":rolesLinkTextAriaLabel},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.secureSpaceMessage.rolesLinkText",defaultMessage:"Roles"}))}}))))};exports.SecureSpaceMessage=SecureSpaceMessage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UnauthorizedPrompt=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _react2=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var UnauthorizedPrompt=function UnauthorizedPrompt(){return _react2.default.createElement(_eui.EuiEmptyPrompt,{iconType:"spacesApp",iconColor:"danger",title:_react2.default.createElement("h2",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.unauthorizedPrompt.permissionDeniedTitle",defaultMessage:"Permission denied"})),body:_react2.default.createElement("p",{"data-test-subj":"permissionDeniedMessage"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.unauthorizedPrompt.permissionDeniedDescription",defaultMessage:"You do not have permission to manage spaces."}))})};exports.UnauthorizedPrompt=UnauthorizedPrompt},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ManageSpacePage",{enumerable:true,get:function get(){return _manage_space_page.ManageSpacePage}});var _manage_space_page=__webpack_require__(269)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ManageSpacePage=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _i18n=__webpack_require__(3);var _lodash=_interopRequireDefault(__webpack_require__(4));var _react2=_interopRequireWildcard(__webpack_require__(0));var _common=__webpack_require__(7);var _components=__webpack_require__(270);var _lib=__webpack_require__(31);var _validate_space=__webpack_require__(66);var _confirm_alter_active_space_modal=__webpack_require__(271);var _customize_space=__webpack_require__(273);var _delete_spaces_button=__webpack_require__(280);var _enabled_features=__webpack_require__(281);var _reserved_space_badge=__webpack_require__(285);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ManageSpacePage=function(_Component){_inherits(ManageSpacePage,_Component);function ManageSpacePage(props){var _this;_classCallCheck(this,ManageSpacePage);_this=_possibleConstructorReturn(this,_getPrototypeOf(ManageSpacePage).call(this,props));_defineProperty(_assertThisInitialized(_this),"validator",void 0);_defineProperty(_assertThisInitialized(_this),"getLoadingIndicator",(function(){return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiLoadingSpinner,{size:"xl"})," ",_react2.default.createElement(_eui.EuiTitle,null,_react2.default.createElement("h1",null,"Loading...")))}));_defineProperty(_assertThisInitialized(_this),"getForm",(function(){if(!_this.props.capabilities.spaces.manage){return _react2.default.createElement(_components.UnauthorizedPrompt,null)}var showAlteringActiveSpaceDialog=_this.state.showAlteringActiveSpaceDialog;return _react2.default.createElement("div",{"data-test-subj":"spaces-edit-page"},_this.getFormHeading(),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiText,{size:"s"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.manageSpacePage.manageDescription",defaultMessage:"Organize your saved objects into meaningful categories."})),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_customize_space.CustomizeSpace,{space:_this.state.space,onChange:_this.onSpaceChange,editingExistingSpace:_this.editingExistingSpace(),validator:_this.validator}),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_enabled_features.EnabledFeatures,{space:_this.state.space,features:_this.state.features,onChange:_this.onSpaceChange,securityEnabled:_this.props.securityEnabled}),_react2.default.createElement(_eui.EuiSpacer,null),_this.getFormButtons(),showAlteringActiveSpaceDialog&&_react2.default.createElement(_confirm_alter_active_space_modal.ConfirmAlterActiveSpaceModal,{onConfirm:function onConfirm(){return _this.performSave(true)},onCancel:function onCancel(){_this.setState({showAlteringActiveSpaceDialog:false})}}))}));_defineProperty(_assertThisInitialized(_this),"getFormHeading",(function(){return _react2.default.createElement(_eui.EuiTitle,{size:"m"},_react2.default.createElement("h1",null,_this.getTitle()," ",_react2.default.createElement(_reserved_space_badge.ReservedSpaceBadge,{space:_this.state.space})))}));_defineProperty(_assertThisInitialized(_this),"getTitle",(function(){if(_this.editingExistingSpace()){return"Edit space"}return _react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.manageSpacePage.createSpaceTitle",defaultMessage:"Create a space"})}));_defineProperty(_assertThisInitialized(_this),"maybeGetSecureSpacesMessage",(function(){if(_this.editingExistingSpace()&&_this.props.securityEnabled){return _react2.default.createElement(_components.SecureSpaceMessage,null)}return null}));_defineProperty(_assertThisInitialized(_this),"getFormButtons",(function(){var createSpaceText=_i18n.i18n.translate("xpack.spaces.management.manageSpacePage.createSpaceButton",{defaultMessage:"Create space"});var updateSpaceText=_i18n.i18n.translate("xpack.spaces.management.manageSpacePage.updateSpaceButton",{defaultMessage:"Update space"});var cancelButtonText=_i18n.i18n.translate("xpack.spaces.management.manageSpacePage.cancelSpaceButton",{defaultMessage:"Cancel"});var saveText=_this.editingExistingSpace()?updateSpaceText:createSpaceText;return _react2.default.createElement(_eui.EuiFlexGroup,{responsive:false},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{fill:true,onClick:_this.saveSpace,"data-test-subj":"save-space-button",isLoading:_this.state.saveInProgress},saveText)),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{onClick:_this.backToSpacesList,"data-test-subj":"cancel-space-button"},cancelButtonText)),_react2.default.createElement(_eui.EuiFlexItem,{grow:true}),_this.getActionButton())}));_defineProperty(_assertThisInitialized(_this),"getActionButton",(function(){if(_this.state.space&&_this.editingExistingSpace()&&!(0,_common.isReservedSpace)(_this.state.space)){return _react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_delete_spaces_button.DeleteSpacesButton,{"data-test-subj":"delete-space-button",space:_this.state.space,spacesManager:_this.props.spacesManager,onDelete:_this.backToSpacesList,notifications:_this.props.notifications}))}return null}));_defineProperty(_assertThisInitialized(_this),"onSpaceChange",(function(updatedSpace){_this.setState({space:updatedSpace})}));_defineProperty(_assertThisInitialized(_this),"saveSpace",(function(){_this.validator.enableValidation();var result=_this.validator.validateForSave(_this.state.space);if(result.isInvalid){_this.setState({formError:result});return}if(_this.editingExistingSpace()){var spacesManager=_this.props.spacesManager;var originalSpace=_this.state.originalSpace;var _space=_this.state.space;spacesManager.getActiveSpace().then((function(activeSpace){var editingActiveSpace=activeSpace.id===originalSpace.id;var haveDisabledFeaturesChanged=_space.disabledFeatures.length!==originalSpace.disabledFeatures.length||_lodash.default.difference(_space.disabledFeatures,originalSpace.disabledFeatures).length>0;if(editingActiveSpace&&haveDisabledFeaturesChanged){_this.setState({showAlteringActiveSpaceDialog:true});return}_this.performSave()}))}else{_this.performSave()}}));_defineProperty(_assertThisInitialized(_this),"loadSpace",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(spaceId,featuresPromise){var _this$props,spacesManager,onLoadSpace,_ref2,_ref3,_space2,features,_ref4,_error$body,message;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,spacesManager=_this$props.spacesManager,onLoadSpace=_this$props.onLoadSpace;_context.prev=1;_context.next=4;return Promise.all([spacesManager.getSpace(spaceId),featuresPromise]);case 4:_ref2=_context.sent;_ref3=_slicedToArray(_ref2,2);_space2=_ref3[0];features=_ref3[1];if(_space2){if(onLoadSpace){onLoadSpace(_space2)}_this.setState({space:_space2,features:features,originalSpace:_space2,isLoading:false})}_context.next=16;break;case 11:_context.prev=11;_context.t0=_context["catch"](1);message=(_ref4=_context.t0===null||_context.t0===void 0?void 0:(_error$body=_context.t0.body)===null||_error$body===void 0?void 0:_error$body.message)!==null&&_ref4!==void 0?_ref4:"";_this.props.notifications.toasts.addDanger(_i18n.i18n.translate("xpack.spaces.management.manageSpacePage.errorLoadingSpaceTitle",{defaultMessage:"Error loading space: {message}",values:{message:message}}));_this.backToSpacesList();case 16:case"end":return _context.stop()}}}),_callee,null,[[1,11]])})));return function(_x,_x2){return _ref.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"performSave",(function(){var requireRefresh=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!_this.state.space){return}var name=_this.state.space.name||"";var _this$state$space=_this.state.space,_this$state$space$id=_this$state$space.id,id=_this$state$space$id===void 0?(0,_lib.toSpaceIdentifier)(name):_this$state$space$id,description=_this$state$space.description,initials=_this$state$space.initials,color=_this$state$space.color,_this$state$space$dis=_this$state$space.disabledFeatures,disabledFeatures=_this$state$space$dis===void 0?[]:_this$state$space$dis,imageUrl=_this$state$space.imageUrl;var params={name:name,id:id,description:description,initials:initials,color:color,disabledFeatures:disabledFeatures,imageUrl:imageUrl};var action;if(_this.editingExistingSpace()){action=_this.props.spacesManager.updateSpace(params)}else{action=_this.props.spacesManager.createSpace(params)}_this.setState({saveInProgress:true});action.then((function(){_this.props.notifications.toasts.addSuccess(_i18n.i18n.translate("xpack.spaces.management.manageSpacePage.spaceSuccessfullySavedNotificationMessage",{defaultMessage:"Space {name} was saved.",values:{name:"'".concat(name,"'")}}));window.location.hash="#/management/kibana/spaces";if(requireRefresh){setTimeout((function(){window.location.reload()}))}})).catch((function(error){var _ref5,_error$body2;var message=(_ref5=error===null||error===void 0?void 0:(_error$body2=error.body)===null||_error$body2===void 0?void 0:_error$body2.message)!==null&&_ref5!==void 0?_ref5:"";_this.setState({saveInProgress:false});_this.props.notifications.toasts.addDanger(_i18n.i18n.translate("xpack.spaces.management.manageSpacePage.errorSavingSpaceTitle",{defaultMessage:"Error saving space: {message}",values:{message:message}}))}))}));_defineProperty(_assertThisInitialized(_this),"backToSpacesList",(function(){window.location.hash="#/management/kibana/spaces"}));_defineProperty(_assertThisInitialized(_this),"editingExistingSpace",(function(){return!!_this.props.spaceId}));_this.validator=new _validate_space.SpaceValidator({shouldValidate:false});_this.state={isLoading:true,showAlteringActiveSpaceDialog:false,saveInProgress:false,space:{},features:[]};return _this}_createClass(ManageSpacePage,[{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _this$props2,spaceId,getFeatures,notifications,features;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(this.props.capabilities.spaces.manage){_context2.next=2;break}return _context2.abrupt("return");case 2:_this$props2=this.props,spaceId=_this$props2.spaceId,getFeatures=_this$props2.getFeatures,notifications=_this$props2.notifications;_context2.prev=3;if(!spaceId){_context2.next=9;break}_context2.next=7;return this.loadSpace(spaceId,getFeatures());case 7:_context2.next=13;break;case 9:_context2.next=11;return getFeatures();case 11:features=_context2.sent;this.setState({isLoading:false,features:features});case 13:_context2.next=18;break;case 15:_context2.prev=15;_context2.t0=_context2["catch"](3);notifications.toasts.addError(_context2.t0,{title:_i18n.i18n.translate("xpack.spaces.management.manageSpacePage.loadErrorTitle",{defaultMessage:"Error loading available features"})});case 18:case"end":return _context2.stop()}}}),_callee2,this,[[3,15]])})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"componentDidUpdate",value:function(){var _componentDidUpdate=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(previousProps){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(this.props.spaceId!==previousProps.spaceId&&this.props.spaceId)){_context3.next=3;break}_context3.next=3;return this.loadSpace(this.props.spaceId,Promise.resolve(this.state.features));case 3:case"end":return _context3.stop()}}}),_callee3,this)})));function componentDidUpdate(_x3){return _componentDidUpdate.apply(this,arguments)}return componentDidUpdate}()},{key:"render",value:function render(){var content=this.state.isLoading?this.getLoadingIndicator():this.getForm();return _react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_eui.EuiPageContentBody,null,content),this.maybeGetSecureSpacesMessage())}}]);return ManageSpacePage}(_react2.Component);exports.ManageSpacePage=ManageSpacePage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ConfirmDeleteModal",{enumerable:true,get:function get(){return _confirm_delete_modal.ConfirmDeleteModal}});Object.defineProperty(exports,"UnauthorizedPrompt",{enumerable:true,get:function get(){return _unauthorized_prompt.UnauthorizedPrompt}});Object.defineProperty(exports,"SecureSpaceMessage",{enumerable:true,get:function get(){return _secure_space_message.SecureSpaceMessage}});var _confirm_delete_modal=__webpack_require__(30);var _unauthorized_prompt=__webpack_require__(63);var _secure_space_message=__webpack_require__(62)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ConfirmAlterActiveSpaceModal",{enumerable:true,get:function get(){return _confirm_alter_active_space_modal.ConfirmAlterActiveSpaceModal}});var _confirm_alter_active_space_modal=__webpack_require__(272)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ConfirmAlterActiveSpaceModal=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _react2=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ConfirmAlterActiveSpaceModalUI=function ConfirmAlterActiveSpaceModalUI(props){return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiConfirmModal,{onConfirm:props.onConfirm,onCancel:props.onCancel,title:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.confirmAlterActiveSpaceModal.title",defaultMessage:"Confirm update space"}),defaultFocusedButton:"confirm",cancelButtonText:props.intl.formatMessage({id:"xpack.spaces.management.confirmAlterActiveSpaceModal.cancelButton",defaultMessage:"Cancel"}),confirmButtonText:props.intl.formatMessage({id:"xpack.spaces.management.confirmAlterActiveSpaceModal.updateSpaceButton",defaultMessage:"Update space"})},_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.confirmAlterActiveSpaceModal.reloadWarningMessage",defaultMessage:"You have updated the visible features in this space. Your page will reload after saving."}))))};var ConfirmAlterActiveSpaceModal=(0,_react.injectI18n)(ConfirmAlterActiveSpaceModalUI);exports.ConfirmAlterActiveSpaceModal=ConfirmAlterActiveSpaceModal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CustomizeSpace",{enumerable:true,get:function get(){return _customize_space.CustomizeSpace}});var _customize_space=__webpack_require__(274)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.CustomizeSpace=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _i18n=__webpack_require__(3);var _react2=_interopRequireWildcard(__webpack_require__(0));var _common=__webpack_require__(7);var _space_avatar=__webpack_require__(6);var _lib=__webpack_require__(31);var _section_panel=__webpack_require__(67);var _customize_space_avatar=__webpack_require__(276);var _space_identifier=__webpack_require__(279);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var CustomizeSpace=function(_Component){_inherits(CustomizeSpace,_Component);function CustomizeSpace(){var _getPrototypeOf2;var _this;_classCallCheck(this,CustomizeSpace);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(CustomizeSpace)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{customizingAvatar:false,usingCustomIdentifier:false});_defineProperty(_assertThisInitialized(_this),"togglePopover",(function(){_this.setState({customizingAvatar:!_this.state.customizingAvatar})}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({customizingAvatar:false})}));_defineProperty(_assertThisInitialized(_this),"getPanelDescription",(function(){return _this.props.editingExistingSpace?_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.manageSpacePage.customizeSpacePanelUrlIdentifierNotEditable",defaultMessage:"The url identifier cannot be changed."})):_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.manageSpacePage.customizeSpacePanelUrlIdentifierEditable",defaultMessage:"Note the URL identifier. You cannot change it after you create the space."}))}));_defineProperty(_assertThisInitialized(_this),"onNameChange",(function(e){if(!_this.props.space){return}var canUpdateId=!_this.props.editingExistingSpace&&!_this.state.usingCustomIdentifier;var id=_this.props.space.id;if(canUpdateId){id=(0,_lib.toSpaceIdentifier)(e.target.value)}_this.props.onChange(_objectSpread({},_this.props.space,{name:e.target.value,id:id}))}));_defineProperty(_assertThisInitialized(_this),"onDescriptionChange",(function(e){_this.props.onChange(_objectSpread({},_this.props.space,{description:e.target.value}))}));_defineProperty(_assertThisInitialized(_this),"onSpaceIdentifierChange",(function(updatedIdentifier){var usingCustomIdentifier=updatedIdentifier!==(0,_lib.toSpaceIdentifier)(_this.props.space.name);_this.setState({usingCustomIdentifier:usingCustomIdentifier});_this.props.onChange(_objectSpread({},_this.props.space,{id:(0,_lib.toSpaceIdentifier)(updatedIdentifier)}))}));_defineProperty(_assertThisInitialized(_this),"onAvatarChange",(function(space){_this.props.onChange(space)}));return _this}_createClass(CustomizeSpace,[{key:"render",value:function render(){var _this$props=this.props,validator=_this$props.validator,editingExistingSpace=_this$props.editingExistingSpace;var _this$props$space=this.props.space,_this$props$space$nam=_this$props$space.name,name=_this$props$space$nam===void 0?"":_this$props$space$nam,_this$props$space$des=_this$props$space.description,description=_this$props$space$des===void 0?"":_this$props$space$des;var panelTitle=_i18n.i18n.translate("xpack.spaces.management.manageSpacePage.customizeSpaceTitle",{defaultMessage:"Customize your space"});var extraPopoverProps={initialFocus:'input[name="spaceInitials"]'};return _react2.default.createElement(_section_panel.SectionPanel,{collapsible:false,title:panelTitle,description:panelTitle},_react2.default.createElement(_eui.EuiDescribedFormGroup,{title:_react2.default.createElement(_eui.EuiTitle,{size:"xs"},_react2.default.createElement("h3",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.manageSpacePage.customizeSpacePanelDescription",defaultMessage:"Name your space and customize its avatar."}))),description:this.getPanelDescription(),fullWidth:true},_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,_extends({label:_i18n.i18n.translate("xpack.spaces.management.manageSpacePage.nameFormRowLabel",{defaultMessage:"Name"})},validator.validateSpaceName(this.props.space),{fullWidth:true}),_react2.default.createElement(_eui.EuiFieldText,{name:"name",placeholder:_i18n.i18n.translate("xpack.spaces.management.manageSpacePage.awesomeSpacePlaceholder",{defaultMessage:"Awesome space"}),value:name,onChange:this.onNameChange,fullWidth:true}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.spaces.management.manageSpacePage.avatarFormRowLabel",{defaultMessage:"Avatar"})},_react2.default.createElement(_eui.EuiPopover,_extends({id:"customizeAvatarPopover",button:_react2.default.createElement("button",{title:_i18n.i18n.translate("xpack.spaces.management.manageSpacePage.clickToCustomizeTooltip",{defaultMessage:"Click to customize this space avatar"}),onClick:this.togglePopover},_react2.default.createElement(_space_avatar.SpaceAvatar,{space:this.props.space,size:"l"})),closePopover:this.closePopover},extraPopoverProps,{ownFocus:true,isOpen:this.state.customizingAvatar}),_react2.default.createElement("div",{style:{maxWidth:240}},_react2.default.createElement(_customize_space_avatar.CustomizeSpaceAvatar,{space:this.props.space,onChange:this.onAvatarChange})))))),_react2.default.createElement(_eui.EuiSpacer,null),this.props.space&&(0,_common.isReservedSpace)(this.props.space)?null:_react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_space_identifier.SpaceIdentifier,{space:this.props.space,editable:!editingExistingSpace,onChange:this.onSpaceIdentifierChange,validator:validator})),_react2.default.createElement(_eui.EuiFormRow,_extends({label:_i18n.i18n.translate("xpack.spaces.management.manageSpacePage.spaceDescriptionFormRowLabel",{defaultMessage:"Description (optional)"}),helpText:_i18n.i18n.translate("xpack.spaces.management.manageSpacePage.spaceDescriptionHelpText",{defaultMessage:"The description appears on the Space selection screen."})},validator.validateSpaceDescription(this.props.space),{fullWidth:true}),_react2.default.createElement(_eui.EuiTextArea,{name:"description",value:description,onChange:this.onDescriptionChange,fullWidth:true,rows:2}))))}}]);return CustomizeSpace}(_react2.Component);exports.CustomizeSpace=CustomizeSpace},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SectionPanel=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SectionPanel=function(_Component){_inherits(SectionPanel,_Component);function SectionPanel(props){var _this;_classCallCheck(this,SectionPanel);_this=_possibleConstructorReturn(this,_getPrototypeOf(SectionPanel).call(this,props));_defineProperty(_assertThisInitialized(_this),"state",{collapsed:false});_defineProperty(_assertThisInitialized(_this),"getTitle",(function(){var showLinkText=_i18n.i18n.translate("xpack.spaces.management.collapsiblePanel.showLinkText",{defaultMessage:"show"});var hideLinkText=_i18n.i18n.translate("xpack.spaces.management.collapsiblePanel.hideLinkText",{defaultMessage:"hide"});var showLinkDescription=_i18n.i18n.translate("xpack.spaces.management.collapsiblePanel.showLinkDescription",{defaultMessage:"show {title}",values:{title:_this.props.description}});var hideLinkDescription=_i18n.i18n.translate("xpack.spaces.management.collapsiblePanel.hideLinkDescription",{defaultMessage:"hide {title}",values:{title:_this.props.description}});return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"baseline",gutterSize:"s",responsive:false},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"m"},_react.default.createElement("h2",null,_this.props.iconType&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiIcon,{type:_this.props.iconType,size:"xl",className:"collapsiblePanel__logo"})," "),_this.props.title))),_this.props.collapsible&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiLink,{"data-test-subj":"show-hide-section-link",onClick:_this.toggleCollapsed,"aria-label":_this.state.collapsed?showLinkDescription:hideLinkDescription},_this.state.collapsed?showLinkText:hideLinkText)))}));_defineProperty(_assertThisInitialized(_this),"getForm",(function(){if(_this.state.collapsed){return null}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,null),_this.props.children)}));_defineProperty(_assertThisInitialized(_this),"toggleCollapsed",(function(){_this.setState({collapsed:!_this.state.collapsed})}));_this.state={collapsed:props.initiallyCollapsed||false};return _this}_createClass(SectionPanel,[{key:"render",value:function render(){return _react.default.createElement(_eui.EuiPanel,null,this.getTitle(),this.getForm())}}]);return SectionPanel}(_react.Component);exports.SectionPanel=SectionPanel},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.CustomizeSpaceAvatar=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _dataurl=__webpack_require__(277);var _space_avatar=__webpack_require__(6);var _common=__webpack_require__(7);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var CustomizeSpaceAvatar=function(_Component){_inherits(CustomizeSpaceAvatar,_Component);function CustomizeSpaceAvatar(props){var _this;_classCallCheck(this,CustomizeSpaceAvatar);_this=_possibleConstructorReturn(this,_getPrototypeOf(CustomizeSpaceAvatar).call(this,props));_defineProperty(_assertThisInitialized(_this),"initialsRef",null);_defineProperty(_assertThisInitialized(_this),"handleImageUpload",(function(imgUrl){var thisInstance=_assertThisInitialized(_this);var image=new Image;image.addEventListener("load",(function(){var MAX_IMAGE_SIZE=64;var imgDimx=image.width;var imgDimy=image.height;if(imgDimx<=MAX_IMAGE_SIZE&&imgDimy<=MAX_IMAGE_SIZE){thisInstance.storeImageChanges(imgUrl)}else{var imageCanvas=document.createElement("canvas");var canvasContext=imageCanvas.getContext("2d");if(imgDimx>=imgDimy){imageCanvas.width=MAX_IMAGE_SIZE;imageCanvas.height=Math.floor(imgDimy*MAX_IMAGE_SIZE/imgDimx);if(canvasContext){canvasContext.drawImage(image,0,0,imageCanvas.width,imageCanvas.height);var resizedImageUrl=imageCanvas.toDataURL();thisInstance.storeImageChanges(resizedImageUrl)}}else{imageCanvas.height=MAX_IMAGE_SIZE;imageCanvas.width=Math.floor(imgDimx*MAX_IMAGE_SIZE/imgDimy);if(canvasContext){canvasContext.drawImage(image,0,0,imageCanvas.width,imageCanvas.height);var _resizedImageUrl=imageCanvas.toDataURL();thisInstance.storeImageChanges(_resizedImageUrl)}}}}),false);image.src=imgUrl}));_defineProperty(_assertThisInitialized(_this),"onFileUpload",(function(files){if(files==null)return;var file=files[0];if(_dataurl.imageTypes.indexOf(file.type)>-1){(0,_dataurl.encode)(file).then((function(dataurl){return _this.handleImageUpload(dataurl)}))}}));_defineProperty(_assertThisInitialized(_this),"initialsInputRef",(function(ref){if(ref){_this.initialsRef=ref;_this.initialsRef.addEventListener("focus",_this.onInitialsFocus);_this.initialsRef.addEventListener("blur",_this.onInitialsBlur)}else{if(_this.initialsRef){_this.initialsRef.removeEventListener("focus",_this.onInitialsFocus);_this.initialsRef.removeEventListener("blur",_this.onInitialsBlur);_this.initialsRef=null}}}));_defineProperty(_assertThisInitialized(_this),"onInitialsFocus",(function(){_this.setState({initialsHasFocus:true,pendingInitials:(0,_space_avatar.getSpaceInitials)(_this.props.space)})}));_defineProperty(_assertThisInitialized(_this),"onInitialsBlur",(function(){_this.setState({initialsHasFocus:false,pendingInitials:null})}));_defineProperty(_assertThisInitialized(_this),"onInitialsChange",(function(e){var initials=(e.target.value||"").substring(0,_common.MAX_SPACE_INITIALS);_this.setState({pendingInitials:initials});_this.props.onChange(_objectSpread({},_this.props.space,{initials:initials}))}));_defineProperty(_assertThisInitialized(_this),"onColorChange",(function(color){_this.props.onChange(_objectSpread({},_this.props.space,{color:color}))}));_this.state={initialsHasFocus:false};return _this}_createClass(CustomizeSpaceAvatar,[{key:"storeImageChanges",value:function storeImageChanges(imageUrl){this.props.onChange(_objectSpread({},this.props.space,{imageUrl:imageUrl}))}},{key:"render",value:function render(){var space=this.props.space;var _this$state=this.state,initialsHasFocus=_this$state.initialsHasFocus,pendingInitials=_this$state.pendingInitials;var spaceColor=(0,_space_avatar.getSpaceColor)(space);var isInvalidSpaceColor=!(0,_eui.isValidHex)(spaceColor)&&spaceColor!=="";return _react.default.createElement("form",{onSubmit:function onSubmit(){return false}},_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.spaces.management.customizeSpaceAvatar.initialItemsFormRowLabel",{defaultMessage:"Initials (2 max)"})},_react.default.createElement(_eui.EuiFieldText,{inputRef:this.initialsInputRef,name:"spaceInitials",value:initialsHasFocus?pendingInitials||"":(0,_space_avatar.getSpaceInitials)(space),onChange:this.onInitialsChange,disabled:this.props.space.imageUrl&&this.props.space.imageUrl!==""?true:false})),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.spaces.management.customizeSpaceAvatar.colorFormRowLabel",{defaultMessage:"Color"}),isInvalid:isInvalidSpaceColor},_react.default.createElement(_eui.EuiColorPicker,{color:spaceColor,onChange:this.onColorChange,isInvalid:isInvalidSpaceColor})),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),this.filePickerOrImage())}},{key:"removeImageUrl",value:function removeImageUrl(){this.props.onChange(_objectSpread({},this.props.space,{imageUrl:""}))}},{key:"filePickerOrImage",value:function filePickerOrImage(){var _this2=this;if(!this.props.space.imageUrl){return _react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.spaces.management.customizeSpaceAvatar.imageUrl",{defaultMessage:"Custom image"})},_react.default.createElement(_eui.EuiFilePicker,{display:"default",initialPromptText:_i18n.i18n.translate("xpack.spaces.management.customizeSpaceAvatar.selectImageUrl",{defaultMessage:"Select image file"}),onChange:this.onFileUpload,accept:_dataurl.imageTypes.join(",")}))}else{return _react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_eui.EuiButton,{onClick:function onClick(){return _this2.removeImageUrl()},color:"danger",iconType:"trash"},_i18n.i18n.translate("xpack.spaces.management.customizeSpaceAvatar.removeImage",{defaultMessage:"Remove custom image"})))}}}]);return CustomizeSpaceAvatar}(_react.Component);exports.CustomizeSpaceAvatar=CustomizeSpaceAvatar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.encode=encode;exports.imageTypes=void 0;var _base64Js=__webpack_require__(278);var imageTypes=["image/svg+xml","image/jpeg","image/png","image/gif"];exports.imageTypes=imageTypes;function encode(data){var type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"text/plain";if(FileReader){return new Promise((function(resolve,reject){var reader=new FileReader;reader.onloadend=function(){return resolve(reader.result)};reader.onerror=function(err){return reject(err)};reader.readAsDataURL(data)}))}return Promise.resolve("data:".concat(type,";base64,").concat((0,_base64Js.fromByteArray)(data)))}},function(module,exports,__webpack_require__){"use strict";exports.byteLength=byteLength;exports.toByteArray=toByteArray;exports.fromByteArray=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function placeHoldersCount(b64){var len=b64.length;if(len%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}return b64[len-2]==="="?2:b64[len-1]==="="?1:0}function byteLength(b64){return b64.length*3/4-placeHoldersCount(b64)}function toByteArray(b64){var i,l,tmp,placeHolders,arr;var len=b64.length;placeHolders=placeHoldersCount(b64);arr=new Arr(len*3/4-placeHolders);l=placeHolders>0?len-4:len;var L=0;for(i=0;i<l;i+=4){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[L++]=tmp>>16&255;arr[L++]=tmp>>8&255;arr[L++]=tmp&255}if(placeHolders===2){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[L++]=tmp&255}else if(placeHolders===1){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[L++]=tmp>>8&255;arr[L++]=tmp&255}return arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[num&63]}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3){tmp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2];output.push(tripletToBase64(tmp))}return output.join("")}function fromByteArray(uint8){var tmp;var len=uint8.length;var extraBytes=len%3;var output="";var parts=[];var maxChunkLength=16383;for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength){parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength))}if(extraBytes===1){tmp=uint8[len-1];output+=lookup[tmp>>2];output+=lookup[tmp<<4&63];output+="=="}else if(extraBytes===2){tmp=(uint8[len-2]<<8)+uint8[len-1];output+=lookup[tmp>>10];output+=lookup[tmp>>4&63];output+=lookup[tmp<<2&63];output+="="}parts.push(output);return parts.join("")}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SpaceIdentifier=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));var _lib=__webpack_require__(31);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SpaceIdentifierUI=function(_Component){_inherits(SpaceIdentifierUI,_Component);function SpaceIdentifierUI(props){var _this;_classCallCheck(this,SpaceIdentifierUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(SpaceIdentifierUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"textFieldRef",null);_defineProperty(_assertThisInitialized(_this),"getLabel",(function(){if(!_this.props.editable){return _react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.spaceIdentifier.urlIdentifierTitle",defaultMessage:"URL identifier"}))}var editLinkText=_this.state.editing?_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.spaceIdentifier.resetSpaceNameLinkText",defaultMessage:"[reset]"}):_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.spaceIdentifier.customizeSpaceLinkText",defaultMessage:"[customize]"});var editLinkLabel=_this.state.editing?_this.props.intl.formatMessage({id:"xpack.spaces.management.spaceIdentifier.resetSpaceNameLinkLabel",defaultMessage:"Reset the URL identifier"}):_this.props.intl.formatMessage({id:"xpack.spaces.management.spaceIdentifier.customizeSpaceNameLinkLabel",defaultMessage:"Customize the URL identifier"});return _react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.spaceIdentifier.urlIdentifierLabel",defaultMessage:"URL identifier "}),_react2.default.createElement(_eui.EuiLink,{onClick:_this.onEditClick,"aria-label":editLinkLabel},editLinkText))}));_defineProperty(_assertThisInitialized(_this),"getHelpText",(function(){var identifier=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_this.props.intl.formatMessage({id:"xpack.spaces.management.spaceIdentifier.emptySpaceIdentifierText",defaultMessage:"awesome-space"});return _react2.default.createElement("p",{className:"eui-textBreakAll"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.spaceIdentifier.kibanaURLForSpaceIdentifierDescription",defaultMessage:"Example: https://my-kibana.example{spaceIdentifier}/app/kibana.",values:{spaceIdentifier:_react2.default.createElement("strong",null,"/s/",identifier)}}))}));_defineProperty(_assertThisInitialized(_this),"onEditClick",(function(){var currentlyEditing=_this.state.editing;if(currentlyEditing){var resetIdentifier=(0,_lib.toSpaceIdentifier)(_this.props.space.name);_this.setState({editing:false});_this.props.onChange(resetIdentifier)}else{_this.setState({editing:true},(function(){if(_this.textFieldRef){_this.textFieldRef.focus()}}))}}));_defineProperty(_assertThisInitialized(_this),"onChange",(function(e){if(!_this.state.editing){return}_this.props.onChange(e.target.value)}));_this.state={editing:false};return _this}_createClass(SpaceIdentifierUI,[{key:"render",value:function render(){var _this2=this;var intl=this.props.intl;var _this$props$space$id=this.props.space.id,id=_this$props$space$id===void 0?"":_this$props$space$id;return _react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_eui.EuiFormRow,_extends({label:this.getLabel(),helpText:this.getHelpText(id)},this.props.validator.validateURLIdentifier(this.props.space),{fullWidth:true}),_react2.default.createElement(_eui.EuiFieldText,{readOnly:!this.state.editing,placeholder:this.state.editing||!this.props.editable?undefined:intl.formatMessage({id:"xpack.spaces.management.spaceIdentifier.urlIdentifierGeneratedFromSpaceNameTooltip",defaultMessage:"awesome-space"}),value:id,onChange:this.onChange,inputRef:function inputRef(ref){return _this2.textFieldRef=ref},fullWidth:true})))}}]);return SpaceIdentifierUI}(_react2.Component);var SpaceIdentifier=(0,_react.injectI18n)(SpaceIdentifierUI);exports.SpaceIdentifier=SpaceIdentifier},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DeleteSpacesButton=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));var _confirm_delete_modal=__webpack_require__(30);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DeleteSpacesButton=function(_Component){_inherits(DeleteSpacesButton,_Component);function DeleteSpacesButton(){var _getPrototypeOf2;var _this;_classCallCheck(this,DeleteSpacesButton);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DeleteSpacesButton)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{showConfirmDeleteModal:false,showConfirmRedirectModal:false});_defineProperty(_assertThisInitialized(_this),"onDeleteClick",(function(){_this.setState({showConfirmDeleteModal:true})}));_defineProperty(_assertThisInitialized(_this),"getConfirmDeleteModal",(function(){if(!_this.state.showConfirmDeleteModal){return null}var spacesManager=_this.props.spacesManager;return _react2.default.createElement(_confirm_delete_modal.ConfirmDeleteModal,{space:_this.props.space,spacesManager:spacesManager,onCancel:function onCancel(){_this.setState({showConfirmDeleteModal:false})},onConfirm:_this.deleteSpaces})}));_defineProperty(_assertThisInitialized(_this),"deleteSpaces",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _this$props,spacesManager,space,_ref2,_ref2$message,errorMessage,message;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,spacesManager=_this$props.spacesManager,space=_this$props.space;_context.prev=1;_context.next=4;return spacesManager.deleteSpace(space);case 4:_context.next=10;break;case 6:_context.prev=6;_context.t0=_context["catch"](1);_ref2=_context.t0.data||{},_ref2$message=_ref2.message,errorMessage=_ref2$message===void 0?"":_ref2$message;_this.props.notifications.toasts.addDanger(_i18n.i18n.translate("xpack.spaces.management.deleteSpacesButton.deleteSpaceErrorTitle",{defaultMessage:"Error deleting space: {errorMessage}",values:{errorMessage:errorMessage}}));case 10:_this.setState({showConfirmDeleteModal:false});message=_i18n.i18n.translate("xpack.spaces.management.deleteSpacesButton.spaceSuccessfullyDeletedNotificationMessage",{defaultMessage:"Deleted {spaceName} space.",values:{spaceName:space.name}});_this.props.notifications.toasts.addSuccess(message);if(_this.props.onDelete){_this.props.onDelete()}case 14:case"end":return _context.stop()}}}),_callee,null,[[1,6]])}))));return _this}_createClass(DeleteSpacesButton,[{key:"render",value:function render(){var buttonText=_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.deleteSpacesButton.deleteSpaceButtonLabel",defaultMessage:"Delete space"});var ButtonComponent=_eui.EuiButton;var extraProps={};if(this.props.style==="icon"){ButtonComponent=_eui.EuiButtonIcon;extraProps.iconType="trash"}return _react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(ButtonComponent,_extends({color:"danger",onClick:this.onDeleteClick,"aria-label":_i18n.i18n.translate("xpack.spaces.management.deleteSpacesButton.deleteSpaceAriaLabel",{defaultMessage:"Delete this space"})},extraProps),buttonText),this.getConfirmDeleteModal())}}]);return DeleteSpacesButton}(_react2.Component);exports.DeleteSpacesButton=DeleteSpacesButton},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"EnabledFeatures",{enumerable:true,get:function get(){return _enabled_features.EnabledFeatures}});var _enabled_features=__webpack_require__(282)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.EnabledFeatures=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));var _feature_utils=__webpack_require__(64);var _section_panel=__webpack_require__(67);var _feature_table=__webpack_require__(283);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EnabledFeatures=function(_Component){_inherits(EnabledFeatures,_Component);function EnabledFeatures(){var _getPrototypeOf2;var _this;_classCallCheck(this,EnabledFeatures);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(EnabledFeatures)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"getPanelTitle",(function(){var featureCount=_this.props.features.length;var enabledCount=(0,_feature_utils.getEnabledFeatures)(_this.props.features,_this.props.space).length;var details=null;if(enabledCount===featureCount){details=_react2.default.createElement(_eui.EuiText,{size:"s",style:{display:"inline-block"}},_react2.default.createElement("em",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.enabledSpaceFeatures.allFeaturesEnabledMessage",defaultMessage:"(all features visible)"})))}else if(enabledCount===0){details=_react2.default.createElement(_eui.EuiText,{color:"danger",size:"s",style:{display:"inline-block"}},_react2.default.createElement("em",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.enabledSpaceFeatures.noFeaturesEnabledMessage",defaultMessage:"(no features visible)"})))}else{details=_react2.default.createElement(_eui.EuiText,{size:"s",style:{display:"inline-block"}},_react2.default.createElement("em",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.enabledSpaceFeatures.someFeaturesEnabledMessage",defaultMessage:"({enabledCount} / {featureCount} features visible)",values:{enabledCount:enabledCount,featureCount:featureCount}})))}return _react2.default.createElement("span",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.enabledSpaceFeatures.enabledFeaturesSectionMessage",defaultMessage:"Customize feature display"})," ",details)}));_defineProperty(_assertThisInitialized(_this),"getDescription",(function(){return _react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_eui.EuiText,{size:"s",color:"subdued"},_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.enabledSpaceFeatures.notASecurityMechanismMessage",defaultMessage:"The feature is hidden in the UI, but is not disabled."})),_this.props.securityEnabled&&_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.enabledSpaceFeatures.goToRolesLink",defaultMessage:"Want to secure access? Go to {rolesLink}.",values:{rolesLink:_react2.default.createElement(_eui.EuiLink,{href:"#/management/security/roles"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.enabledSpaceFeatures.rolesLinkText",defaultMessage:"Roles"}))}}))))}));return _this}_createClass(EnabledFeatures,[{key:"render",value:function render(){var description=_i18n.i18n.translate("xpack.spaces.management.manageSpacePage.customizeVisibleFeatures",{defaultMessage:"Customize visible features"});return _react2.default.createElement(_section_panel.SectionPanel,{collapsible:true,initiallyCollapsed:true,title:this.getPanelTitle(),description:description,"data-test-subj":"enabled-features-panel"},_react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiTitle,{size:"xs"},_react2.default.createElement("h3",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.enabledSpaceFeatures.enableFeaturesInSpaceMessage",defaultMessage:"Control which features are visible in this space."}))),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),this.getDescription()),_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_feature_table.FeatureTable,{features:this.props.features,space:this.props.space,onChange:this.props.onChange}))))}}]);return EnabledFeatures}(_react2.Component);exports.EnabledFeatures=EnabledFeatures},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FeatureTable=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react=__webpack_require__(2);var _lodash=_interopRequireDefault(__webpack_require__(4));var _react2=_interopRequireWildcard(__webpack_require__(0));var _toggle_all_features=__webpack_require__(284);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FeatureTable=function(_Component){_inherits(FeatureTable,_Component);function FeatureTable(){var _getPrototypeOf2;var _this;_classCallCheck(this,FeatureTable);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(FeatureTable)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"onChange",(function(featureId){return function(e){var updatedSpace=_objectSpread({},_this.props.space);var disabledFeatures=updatedSpace.disabledFeatures||[];var isFeatureEnabled=e.target.checked;if(isFeatureEnabled){disabledFeatures=disabledFeatures.filter((function(feature){return feature!==featureId}))}else{disabledFeatures=_lodash.default.uniq([].concat(_toConsumableArray(disabledFeatures),[featureId]))}updatedSpace.disabledFeatures=disabledFeatures;_this.props.onChange(updatedSpace)}}));_defineProperty(_assertThisInitialized(_this),"onChangeAll",(function(visible){var updatedSpace=_objectSpread({},_this.props.space);if(visible){updatedSpace.disabledFeatures=[]}else{updatedSpace.disabledFeatures=_this.props.features.map((function(feature){return feature.id}))}_this.props.onChange(updatedSpace)}));_defineProperty(_assertThisInitialized(_this),"getColumns",(function(){return[{field:"feature",name:_i18n.i18n.translate("xpack.spaces.management.enabledSpaceFeaturesFeatureColumnTitle",{defaultMessage:"Feature"}),render:function render(feature,_item){return _react2.default.createElement(_eui.EuiText,null,_react2.default.createElement(_eui.EuiIcon,{size:"m",type:feature.icon}),"  ",feature.name)}},{field:"space",width:"150",name:_react2.default.createElement("span",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.enabledSpaceFeaturesEnabledColumnTitle",defaultMessage:"Show?"}),_react2.default.createElement(_toggle_all_features.ToggleAllFeatures,{onChange:_this.onChangeAll})),render:function render(spaceEntry,record){var checked=!(spaceEntry.disabledFeatures&&spaceEntry.disabledFeatures.includes(record.feature.id));return _react2.default.createElement(_eui.EuiSwitch,{id:record.feature.id,checked:checked,onChange:_this.onChange(record.feature.id),label:"".concat(record.feature.name," visible"),showLabel:false})}}]}));return _this}_createClass(FeatureTable,[{key:"render",value:function render(){var _this$props=this.props,space=_this$props.space,features=_this$props.features;var items=features.map((function(feature){return{feature:feature,space:space}}));return _react2.default.createElement(_eui.EuiInMemoryTable,{columns:this.getColumns(),items:items})}}]);return FeatureTable}(_react2.Component);exports.FeatureTable=FeatureTable},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ToggleAllFeatures=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var options=[{id:"show",text:_i18n.i18n.translate("xpack.spaces.management.showAllFeaturesText",{defaultMessage:"Show all"})},{id:"hide",text:_i18n.i18n.translate("xpack.spaces.management.hideAllFeaturesText",{defaultMessage:"Hide all"})}];var ToggleAllFeatures=function(_Component){_inherits(ToggleAllFeatures,_Component);function ToggleAllFeatures(){var _getPrototypeOf2;var _this;_classCallCheck(this,ToggleAllFeatures);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ToggleAllFeatures)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"onSelect",(function(selection){_this.props.onChange(selection==="show");_this.setState({isPopoverOpen:false})}));_defineProperty(_assertThisInitialized(_this),"onButtonClick",(function(){_this.setState({isPopoverOpen:!_this.state.isPopoverOpen})}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({isPopoverOpen:false})}));return _this}_createClass(ToggleAllFeatures,[{key:"render",value:function render(){var _this2=this;var button=_react2.default.createElement(_eui.EuiLink,{onClick:this.onButtonClick,className:"spcToggleAllFeatures__changeAllLink"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.spaces.management.toggleAllFeaturesLink",defaultMessage:"(change all)"}));var items=options.map((function(item){return _react2.default.createElement(_eui.EuiContextMenuItem,{"data-test-subj":"spc-toggle-all-features-".concat(item.id),key:item.id,onClick:function onClick(){_this2.onSelect(item.id)},disabled:_this2.props.disabled},item.text)}));return _react2.default.createElement(_eui.EuiPopover,{id:"changeAllFeatureVisibilityPopover",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft"},_react2.default.createElement(_eui.EuiContextMenuPanel,{items:items}))}}]);return ToggleAllFeatures}(_react2.Component);exports.ToggleAllFeatures=ToggleAllFeatures},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ReservedSpaceBadge=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);var _common=__webpack_require__(7);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ReservedSpaceBadge=function ReservedSpaceBadge(props){var space=props.space;if(space&&(0,_common.isReservedSpace)(space)){return _react.default.createElement(_eui.EuiToolTip,{content:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.spaces.management.reversedSpaceBadge.reversedSpacesCanBePartiallyModifiedTooltip",defaultMessage:"Reserved spaces are built-in and can only be partially modified."})},_react.default.createElement(_eui.EuiIcon,{style:{verticalAlign:"super"},type:"lock"}))}return null};exports.ReservedSpaceBadge=ReservedSpaceBadge},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"spaceSelectorApp",{enumerable:true,get:function get(){return _space_selector_app.spaceSelectorApp}});var _space_selector_app=__webpack_require__(287)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.spaceSelectorApp=void 0;var _i18n=__webpack_require__(3);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var spaceSelectorApp=Object.freeze({id:"space_selector",create:function create(_ref){var application=_ref.application,getStartServices=_ref.getStartServices,spacesManager=_ref.spacesManager;application.register({id:this.id,title:_i18n.i18n.translate("xpack.spaces.spaceSelector.appTitle",{defaultMessage:"Select a space"}),chromeless:true,appRoute:"/spaces/space_selector",mount:function(){var _mount=_asyncToGenerator(regeneratorRuntime.mark((function _callee(params){var _ref2,_ref3,_ref3$,coreStart,renderSpaceSelectorApp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([getStartServices(),__webpack_require__.e(8).then(__webpack_require__.t.bind(null,353,7))]);case 2:_ref2=_context.sent;_ref3=_slicedToArray(_ref2,2);_ref3$=_slicedToArray(_ref3[0],1);coreStart=_ref3$[0];renderSpaceSelectorApp=_ref3[1].renderSpaceSelectorApp;return _context.abrupt("return",renderSpaceSelectorApp(coreStart.i18n,params.element,{spacesManager:spacesManager,serverBasePath:coreStart.http.basePath.serverBasePath}));case 8:case"end":return _context.stop()}}}),_callee)})));function mount(_x){return _mount.apply(this,arguments)}return mount}()})}});exports.spaceSelectorApp=spaceSelectorApp},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SpacesPopoverList=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _i18n=__webpack_require__(3);var _react2=_interopRequireWildcard(__webpack_require__(0));var _public=__webpack_require__(19);var _common=__webpack_require__(7);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SpacesPopoverList=function(_Component){_inherits(SpacesPopoverList,_Component);function SpacesPopoverList(){var _getPrototypeOf2;var _this;_classCallCheck(this,SpacesPopoverList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SpacesPopoverList)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{searchTerm:"",allowSpacesListFocus:false,isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"getMenuPanel",(function(){var searchTerm=_this.state.searchTerm;var items=_this.getVisibleSpaces(searchTerm).map(_this.renderSpaceMenuItem);var panelProps={className:"spcMenu",title:_i18n.i18n.translate("xpack.security.management.editRole.spacesPopoverList.popoverTitle",{defaultMessage:"Spaces"}),watchedItemProps:["data-search-term"]};if(_this.props.spaces.length>=_common.SPACE_SEARCH_COUNT_THRESHOLD){return _react2.default.createElement(_eui.EuiContextMenuPanel,panelProps,_this.renderSearchField(),_this.renderSpacesListPanel(items,searchTerm))}return _react2.default.createElement(_eui.EuiContextMenuPanel,_extends({},panelProps,{items:items}))}));_defineProperty(_assertThisInitialized(_this),"onButtonClick",(function(){_this.setState({isPopoverOpen:!_this.state.isPopoverOpen,searchTerm:""})}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({isPopoverOpen:false,searchTerm:""})}));_defineProperty(_assertThisInitialized(_this),"getVisibleSpaces",(function(searchTerm){var spaces=_this.props.spaces;var filteredSpaces=spaces;if(searchTerm){filteredSpaces=spaces.filter((function(space){var name=space.name,_space$description=space.description,description=_space$description===void 0?"":_space$description;return name.toLowerCase().indexOf(searchTerm)>=0||description.toLowerCase().indexOf(searchTerm)>=0}))}return filteredSpaces}));_defineProperty(_assertThisInitialized(_this),"renderSpacesListPanel",(function(items,searchTerm){if(items.length===0){return _react2.default.createElement(_eui.EuiText,{color:"subdued",className:"eui-textCenter"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacesPopoverList.noSpacesFoundTitle",defaultMessage:" no spaces found "}))}return _react2.default.createElement(_eui.EuiContextMenuPanel,{key:"spcMenuList","data-search-term":searchTerm,className:"spcMenu__spacesList",hasFocus:_this.state.allowSpacesListFocus,initialFocusedItemIndex:_this.state.allowSpacesListFocus?0:undefined,items:items})}));_defineProperty(_assertThisInitialized(_this),"renderSearchField",(function(){return _react2.default.createElement("div",{key:"manageSpacesSearchField",className:"spcMenu__searchFieldWrapper"},_react2.default.createElement(_eui.EuiFieldSearch,{placeholder:_i18n.i18n.translate("xpack.security.management.editRole.spacesPopoverList.findSpacePlaceholder",{defaultMessage:"Find a space"}),incremental:true,onSearch:_this.onSearch,onKeyDown:_this.onSearchKeyDown,onFocus:_this.onSearchFocus,compressed:true}))}));_defineProperty(_assertThisInitialized(_this),"onSearchKeyDown",(function(e){var focusableKeyCodes=[9,13,40];var keyCode=e.keyCode;if(focusableKeyCodes.includes(keyCode)){_this.setState({allowSpacesListFocus:true})}}));_defineProperty(_assertThisInitialized(_this),"onSearchFocus",(function(){_this.setState({allowSpacesListFocus:false})}));_defineProperty(_assertThisInitialized(_this),"onSearch",(function(searchTerm){_this.setState({searchTerm:searchTerm.trim().toLowerCase()})}));_defineProperty(_assertThisInitialized(_this),"renderSpaceMenuItem",(function(space){var icon=_react2.default.createElement(_public.SpaceAvatar,{space:space,size:"s"});return _react2.default.createElement(_eui.EuiContextMenuItem,{key:space.id,icon:icon,toolTipTitle:space.description&&space.name,toolTipContent:space.description},space.name)}));return _this}_createClass(SpacesPopoverList,[{key:"render",value:function render(){var button=_react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:this.onButtonClick},_react2.default.createElement("span",{className:"secSpacesPopoverList__buttonText"},this.props.buttonText));return _react2.default.createElement(_eui.EuiPopover,{id:"spacesPopoverList",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft",ownFocus:true},this.getMenuPanel())}}]);return SpacesPopoverList}(_react2.Component);exports.SpacesPopoverList=SpacesPopoverList},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PrivilegeDisplay=void 0;var _eui=__webpack_require__(1);var _lodash=_interopRequireDefault(__webpack_require__(4));var _react=_interopRequireDefault(__webpack_require__(0));var _constants=__webpack_require__(12);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var PrivilegeDisplay=function PrivilegeDisplay(props){return _react.default.createElement(SimplePrivilegeDisplay,props)};exports.PrivilegeDisplay=PrivilegeDisplay;var SimplePrivilegeDisplay=function SimplePrivilegeDisplay(props){var privilege=props.privilege,rest=_objectWithoutProperties(props,["privilege"]);var text=_react.default.createElement(_eui.EuiText,rest,getDisplayValue(privilege));return text};PrivilegeDisplay.defaultProps={privilege:[]};function getDisplayValue(privilege){var privileges=coerceToArray(privilege);var displayValue;var isPrivilegeMissing=privileges.length===0||privileges.length===1&&privileges.includes(_constants.NO_PRIVILEGE_VALUE);if(isPrivilegeMissing){displayValue=_react.default.createElement(_eui.EuiIcon,{color:"subdued",type:"minusInCircle"})}else{displayValue=privileges.map((function(p){return _lodash.default.capitalize(p)})).join(", ")}return displayValue}function coerceToArray(privilege){if(privilege===undefined){return[]}if(Array.isArray(privilege)){return privilege}return[privilege]}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.PrivilegeSpaceForm=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));var _model=__webpack_require__(5);var _space_selector=__webpack_require__(292);var _feature_table=__webpack_require__(51);var _constants=__webpack_require__(12);var _privilege_form_calculator=__webpack_require__(27);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PrivilegeSpaceForm=function(_Component){_inherits(PrivilegeSpaceForm,_Component);function PrivilegeSpaceForm(props){var _this;_classCallCheck(this,PrivilegeSpaceForm);_this=_possibleConstructorReturn(this,_getPrototypeOf(PrivilegeSpaceForm).call(this,props));_defineProperty(_assertThisInitialized(_this),"getForm",(function(){var spaces=_this.props.spaces;var hasSelectedSpaces=_this.state.selectedSpaceIds.length>0;return _react2.default.createElement(_eui.EuiForm,null,_react2.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_i18n.i18n.translate("xpack.security.management.editRole.spacePrivilegeForm.spaceSelectorFormLabel",{defaultMessage:"Spaces"})},_react2.default.createElement(_space_selector.SpaceSelector,{selectedSpaceIds:_this.state.selectedSpaceIds,onChange:_this.onSelectedSpacesChange,spaces:spaces})),_this.getPrivilegeCallout(),_react2.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_i18n.i18n.translate("xpack.security.management.editRole.spacePrivilegeForm.privilegeSelectorFormLabel",{defaultMessage:"Privilege"})},_react2.default.createElement(_eui.EuiSuperSelect,{"data-test-subj":"basePrivilegeComboBox",fullWidth:true,onChange:_this.onSpaceBasePrivilegeChange,options:[{value:"basePrivilege_custom",inputDisplay:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeForm.customPrivilegeDisplay",defaultMessage:"Custom"})),dropdownDisplay:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("strong",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeForm.customPrivilegeDropdownDisplay",defaultMessage:"Custom"})),_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeForm.customPrivilegeDetails",defaultMessage:"Customize access by feature in selected spaces."})))},{value:"basePrivilege_read",inputDisplay:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeForm.readPrivilegeDisplay",defaultMessage:"Read"})),dropdownDisplay:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("strong",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeForm.readPrivilegeDropdownDisplay",defaultMessage:"Read"})),_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeForm.readPrivilegeDetails",defaultMessage:"Grant read-only access to all features in selected spaces."})))},{value:"basePrivilege_all",inputDisplay:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeForm.allPrivilegeDisplay",defaultMessage:"All"})),dropdownDisplay:_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("strong",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeForm.allPrivilegeDropdownDisplay",defaultMessage:"All"})),_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeForm.allPrivilegeDetails",defaultMessage:"Grant full access to all features in selected spaces."})))}],hasDividers:true,valueOfSelected:_this.getDisplayedBasePrivilege(),disabled:!hasSelectedSpaces})),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiTitle,{size:"xxs"},_react2.default.createElement("h3",null,_this.getFeatureListLabel(_this.state.selectedBasePrivilege.length>0))),_react2.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react2.default.createElement(_eui.EuiText,{size:"s"},_react2.default.createElement("p",null,_this.getFeatureListDescription(_this.state.selectedBasePrivilege.length>0))),_react2.default.createElement(_eui.EuiSpacer,{size:"l"}),_react2.default.createElement(_feature_table.FeatureTable,{role:_this.state.role,privilegeCalculator:_this.state.privilegeCalculator,onChange:_this.onFeaturePrivilegesChange,onChangeAll:_this.onChangeAllFeaturePrivileges,kibanaPrivileges:_this.props.kibanaPrivileges,privilegeIndex:_this.state.privilegeIndex,canCustomizeSubFeaturePrivileges:_this.props.canCustomizeSubFeaturePrivileges,disabled:_this.state.selectedBasePrivilege.length>0||!hasSelectedSpaces}),_this.requiresGlobalPrivilegeWarning()&&_react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_eui.EuiSpacer,{size:"l"}),_react2.default.createElement(_eui.EuiCallOut,{color:"warning",iconType:"alert","data-test-subj":"globalPrivilegeWarning",title:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeForm.globalPrivilegeWarning",defaultMessage:"Creating a global privilege might impact your other space privileges."})})))}));_defineProperty(_assertThisInitialized(_this),"getSaveButton",(function(){var mode=_this.state.mode;var isGlobal=_this.isDefiningGlobalPrivilege();var buttonText;switch(mode){case"create":if(isGlobal){buttonText=_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRolespacePrivilegeForm.createGlobalPrivilegeButton",defaultMessage:"Create global privilege"})}else{buttonText=_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRolespacePrivilegeForm.createPrivilegeButton",defaultMessage:"Create space privilege"})}break;case"update":if(isGlobal){buttonText=_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRolespacePrivilegeForm.updateGlobalPrivilegeButton",defaultMessage:"Update global privilege"})}else{buttonText=_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRolespacePrivilegeForm.updatePrivilegeButton",defaultMessage:"Update space privilege"})}break;default:throw new Error("Unsupported mode: ".concat(mode))}var buttonColor="primary";if(_this.requiresGlobalPrivilegeWarning()){buttonColor="warning"}return _react2.default.createElement(_eui.EuiButton,{onClick:_this.onSaveClick,fill:true,disabled:!_this.canSave(),color:buttonColor,"data-test-subj":"createSpacePrivilegeButton"},buttonText)}));_defineProperty(_assertThisInitialized(_this),"getFeatureListLabel",(function(disabled){if(disabled){return _i18n.i18n.translate("xpack.security.management.editRole.spacePrivilegeForm.summaryOfFeaturePrivileges",{defaultMessage:"Summary of feature privileges"})}else{return _i18n.i18n.translate("xpack.security.management.editRole.spacePrivilegeForm.customizeFeaturePrivileges",{defaultMessage:"Customize by feature"})}}));_defineProperty(_assertThisInitialized(_this),"getFeatureListDescription",(function(disabled){if(disabled){return _i18n.i18n.translate("xpack.security.management.editRole.spacePrivilegeForm.featurePrivilegeSummaryDescription",{defaultMessage:"Some features might be hidden by the space or affected by a global space privilege."})}else{return _i18n.i18n.translate("xpack.security.management.editRole.spacePrivilegeForm.customizeFeaturePrivilegeDescription",{defaultMessage:"Increase privilege levels on a per feature basis. Some features might be hidden by the space or affected by a global space privilege."})}}));_defineProperty(_assertThisInitialized(_this),"getPrivilegeCallout",(function(){if(_this.isDefiningGlobalPrivilege()){return _react2.default.createElement(_eui.EuiFormRow,{fullWidth:true},_react2.default.createElement(_eui.EuiCallOut,{color:"primary",iconType:"iInCircle",title:_i18n.i18n.translate("xpack.security.management.editRole.spacePrivilegeForm.globalPrivilegeNotice",{defaultMessage:"These privileges will apply to all current and future spaces."})}))}return null}));_defineProperty(_assertThisInitialized(_this),"closeFlyout",(function(){_this.props.onCancel()}));_defineProperty(_assertThisInitialized(_this),"onSaveClick",(function(){var role=(0,_model.copyRole)(_this.state.role);var form=role.kibana[_this.state.privilegeIndex];if(!_this.isDefiningGlobalPrivilege()){form.spaces=form.spaces.filter((function(spaceId){return _this.props.spaces.find((function(space){return space.id===spaceId}))}))}_this.props.onChange(role)}));_defineProperty(_assertThisInitialized(_this),"onSelectedSpacesChange",(function(selectedSpaceIds){var role=(0,_model.copyRole)(_this.state.role);var form=role.kibana[_this.state.privilegeIndex];form.spaces=_toConsumableArray(selectedSpaceIds);_this.setState({selectedSpaceIds:selectedSpaceIds,role:role,privilegeCalculator:new _privilege_form_calculator.PrivilegeFormCalculator(_this.props.kibanaPrivileges,role)})}));_defineProperty(_assertThisInitialized(_this),"onSpaceBasePrivilegeChange",(function(basePrivilege){var role=(0,_model.copyRole)(_this.state.role);var form=role.kibana[_this.state.privilegeIndex];var privilegeName=basePrivilege.split("basePrivilege_")[1];var isCustomizingFeaturePrivileges=false;if(privilegeName===_constants.CUSTOM_PRIVILEGE_VALUE){form.base=[];isCustomizingFeaturePrivileges=true}else{form.base=[privilegeName];form.feature={}}_this.setState({selectedBasePrivilege:privilegeName===_constants.CUSTOM_PRIVILEGE_VALUE?[]:[privilegeName],role:role,isCustomizingFeaturePrivileges:isCustomizingFeaturePrivileges,privilegeCalculator:new _privilege_form_calculator.PrivilegeFormCalculator(_this.props.kibanaPrivileges,role)})}));_defineProperty(_assertThisInitialized(_this),"getDisplayedBasePrivilege",(function(){var basePrivilege=_this.state.privilegeCalculator.getBasePrivilege(_this.state.privilegeIndex);if(basePrivilege){return"basePrivilege_".concat(basePrivilege.id)}return"basePrivilege_".concat(_constants.CUSTOM_PRIVILEGE_VALUE)}));_defineProperty(_assertThisInitialized(_this),"onFeaturePrivilegesChange",(function(featureId,privileges){var role=(0,_model.copyRole)(_this.state.role);var form=role.kibana[_this.state.privilegeIndex];if(privileges.length===0){delete form.feature[featureId]}else{form.feature[featureId]=_toConsumableArray(privileges)}_this.setState({role:role,privilegeCalculator:new _privilege_form_calculator.PrivilegeFormCalculator(_this.props.kibanaPrivileges,role)})}));_defineProperty(_assertThisInitialized(_this),"onChangeAllFeaturePrivileges",(function(privileges){var role=(0,_model.copyRole)(_this.state.role);var entry=role.kibana[_this.state.privilegeIndex];if(privileges.length===0){entry.feature={}}else{_this.props.kibanaPrivileges.getSecuredFeatures().forEach((function(feature){var nextFeaturePrivilege=feature.getPrimaryFeaturePrivileges().find((function(pfp){return privileges.includes(pfp.id)}));if(nextFeaturePrivilege){entry.feature[feature.id]=[nextFeaturePrivilege.id]}}))}_this.setState({role:role,privilegeCalculator:new _privilege_form_calculator.PrivilegeFormCalculator(_this.props.kibanaPrivileges,role)})}));_defineProperty(_assertThisInitialized(_this),"canSave",(function(){if(_this.state.selectedSpaceIds.length===0){return false}var form=_this.state.role.kibana[_this.state.privilegeIndex];if(form.base.length===0&&Object.keys(form.feature).length===0){return false}return true}));_defineProperty(_assertThisInitialized(_this),"isDefiningGlobalPrivilege",(function(){return _this.state.selectedSpaceIds.includes("*")}));_defineProperty(_assertThisInitialized(_this),"requiresGlobalPrivilegeWarning",(function(){var hasOtherSpacePrivilegesDefined=_this.props.role.kibana.length>0;return _this.state.mode==="create"&&_this.isDefiningGlobalPrivilege()&&hasOtherSpacePrivilegesDefined}));var _role=(0,_model.copyRole)(props.role);var privilegeIndex=props.privilegeIndex;if(privilegeIndex<0){privilegeIndex=_role.kibana.push({spaces:[],base:[],feature:{}})-1}_this.state={role:_role,privilegeIndex:privilegeIndex,selectedSpaceIds:_toConsumableArray(_role.kibana[privilegeIndex].spaces),selectedBasePrivilege:_toConsumableArray(_role.kibana[privilegeIndex].base||[]),mode:props.privilegeIndex<0?"create":"update",isCustomizingFeaturePrivileges:false,privilegeCalculator:new _privilege_form_calculator.PrivilegeFormCalculator(props.kibanaPrivileges,_role)};return _this}_createClass(PrivilegeSpaceForm,[{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement(_eui.EuiFlyout,{onClose:this.closeFlyout,size:"m",maxWidth:true},_react2.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react2.default.createElement(_eui.EuiTitle,{size:"m"},_react2.default.createElement("h2",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeForm.modalTitle",defaultMessage:"Space privileges"})))),_react2.default.createElement(_eui.EuiFlyoutBody,null,_react2.default.createElement(_eui.EuiErrorBoundary,null,this.getForm())),_react2.default.createElement(_eui.EuiFlyoutFooter,null,this.state.privilegeCalculator.hasSupersededInheritedPrivileges(this.state.privilegeIndex)&&_react2.default.createElement(_react2.Fragment,null,_react2.default.createElement(_eui.EuiCallOut,{color:"warning",iconType:"alert","data-test-subj":"spaceFormGlobalPermissionsSupersedeWarning",title:_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeForm.supersededWarningTitle",defaultMessage:"Superseded by global privileges"})},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeForm.supersededWarning",defaultMessage:"Declared privileges are less permissive than configured global privileges. View the privilege summary to see effective privileges."})),_react2.default.createElement(_eui.EuiSpacer,{size:"s"})),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{iconType:"cross",onClick:this.closeFlyout,flush:"left","data-test-subj":"cancelSpacePrivilegeButton"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeForm.cancelButton",defaultMessage:"Cancel"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},this.getSaveButton())))))}}]);return PrivilegeSpaceForm}(_react2.Component);exports.PrivilegeSpaceForm=PrivilegeSpaceForm;_defineProperty(PrivilegeSpaceForm,"defaultProps",{privilegeIndex:-1})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SpaceSelector=void 0;var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react=_interopRequireWildcard(__webpack_require__(0));var _public=__webpack_require__(19);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var spaceToOption=function spaceToOption(space,currentSelection){if(!space){return}return{id:"spaceOption_".concat(space.id),label:space.name,color:(0,_public.getSpaceColor)(space),disabled:currentSelection==="global"&&space.id!=="*"||currentSelection==="spaces"&&space.id==="*"}};var spaceIdToOption=function spaceIdToOption(spaces){return function(s){return spaceToOption(spaces.find((function(space){return space.id===s})))}};var SpaceSelector=function(_Component){_inherits(SpaceSelector,_Component);function SpaceSelector(){var _getPrototypeOf2;var _this;_classCallCheck(this,SpaceSelector);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SpaceSelector)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"onChange",(function(selectedSpaces){_this.props.onChange(selectedSpaces.map((function(s){return s.id.split("spaceOption_")[1]})))}));_defineProperty(_assertThisInitialized(_this),"getOptions",(function(){var options=_this.props.spaces.map((function(space){return spaceToOption(space,_this.props.selectedSpaceIds.includes("*")?"global":_this.props.selectedSpaceIds.length>0?"spaces":undefined)}));return options.filter(Boolean)}));_defineProperty(_assertThisInitialized(_this),"getSelectedOptions",(function(){var options=_this.props.selectedSpaceIds.map(spaceIdToOption(_this.props.spaces));return options.filter(Boolean)}));return _this}_createClass(SpaceSelector,[{key:"render",value:function render(){var renderOption=function renderOption(option,searchValue,contentClassName){var color=option.color,label=option.label;return _react.default.createElement(_eui.EuiHealth,{color:color},_react.default.createElement("span",{className:contentClassName},_react.default.createElement(_eui.EuiHighlight,{search:searchValue},label)))};return _react.default.createElement(_eui.EuiComboBox,{"data-test-subj":"spaceSelectorComboBox","aria-label":_i18n.i18n.translate("xpack.security.management.editRole.spaceSelectorLabel",{defaultMessage:"Spaces"}),fullWidth:true,options:this.getOptions(),renderOption:renderOption,selectedOptions:this.getSelectedOptions(),isDisabled:this.props.disabled,onChange:this.onChange})}}]);return SpaceSelector}(_react.Component);exports.SpaceSelector=SpaceSelector},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PrivilegeSummary",{enumerable:true,get:function get(){return _privilege_summary.PrivilegeSummary}});var _privilege_summary=__webpack_require__(294)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PrivilegeSummary=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(2);var _eui=__webpack_require__(1);var _privilege_summary_table=__webpack_require__(295);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var PrivilegeSummary=function PrivilegeSummary(props){var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiButtonEmpty,{onClick:function onClick(){return setIsOpen(true)},"data-test-subj":"viewPrivilegeSummaryButton"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRole.privilegeSummary.viewSummaryButtonText",defaultMessage:"View privilege summary"})),isOpen&&_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiModal,{onClose:function onClose(){return setIsOpen(false)},maxWidth:false},_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRole.privilegeSummary.modalHeaderTitle",defaultMessage:"Privilege summary"}))),_react.default.createElement(_eui.EuiModalBody,null,_react.default.createElement(_privilege_summary_table.PrivilegeSummaryTable,{role:props.role,spaces:props.spaces,kibanaPrivileges:props.kibanaPrivileges,canCustomizeSubFeaturePrivileges:props.canCustomizeSubFeaturePrivileges})),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiButton,{onClick:function onClick(){return setIsOpen(false)}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRole.privilegeSummary.closeSummaryButtonText",defaultMessage:"Close"}))))))};exports.PrivilegeSummary=PrivilegeSummary},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PrivilegeSummaryTable=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(2);var _eui=__webpack_require__(1);var _privilege_utils=__webpack_require__(9);var _feature_table_cell=__webpack_require__(52);var _space_column_header=__webpack_require__(296);var _privilege_summary_expanded_row=__webpack_require__(297);var _privilege_summary_calculator=__webpack_require__(298);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function getColumnKey(entry){return"privilege_entry_".concat(entry.spaces.join("|"))}var PrivilegeSummaryTable=function PrivilegeSummaryTable(props){var _useState=(0,_react.useState)([]),_useState2=_slicedToArray(_useState,2),expandedFeatures=_useState2[0],setExpandedFeatures=_useState2[1];var calculator=new _privilege_summary_calculator.PrivilegeSummaryCalculator(props.kibanaPrivileges,props.role);var toggleExpandedFeature=function toggleExpandedFeature(featureId){if(expandedFeatures.includes(featureId)){setExpandedFeatures(expandedFeatures.filter((function(ef){return ef!==featureId})))}else{setExpandedFeatures([].concat(_toConsumableArray(expandedFeatures),[featureId]))}};var featureColumn={name:"Feature",field:"feature",render:function render(feature){return _react.default.createElement(_feature_table_cell.FeatureTableCell,{feature:feature})}};var rowExpanderColumn={align:"right",width:"40px",isExpander:true,field:"featureId",name:"",render:function render(featureId,record){var feature=record.feature;var hasSubFeaturePrivileges=feature.getSubFeaturePrivileges().length>0;if(!hasSubFeaturePrivileges){return null}return _react.default.createElement(_eui.EuiButtonIcon,{onClick:function onClick(){return toggleExpandedFeature(featureId)},"data-test-subj":"expandPrivilegeSummaryRow","aria-label":expandedFeatures.includes(featureId)?"Collapse":"Expand",iconType:expandedFeatures.includes(featureId)?"arrowUp":"arrowDown"})}};var rawKibanaPrivileges=_toConsumableArray(props.role.kibana).sort((function(entry1,entry2){if((0,_privilege_utils.isGlobalPrivilegeDefinition)(entry1)){return-1}if((0,_privilege_utils.isGlobalPrivilegeDefinition)(entry2)){return 1}return 0}));var privilegeColumns=rawKibanaPrivileges.map((function(entry){var key=getColumnKey(entry);return{name:_react.default.createElement(_space_column_header.SpaceColumnHeader,{entry:entry,spaces:props.spaces}),field:key,render:function render(kibanaPrivilege,record){var _ref;var _kibanaPrivilege$reco=kibanaPrivilege[record.featureId],primary=_kibanaPrivilege$reco.primary,hasCustomizedSubFeaturePrivileges=_kibanaPrivilege$reco.hasCustomizedSubFeaturePrivileges;var iconTip=null;if(hasCustomizedSubFeaturePrivileges){iconTip=_react.default.createElement(_eui.EuiIconTip,{size:"s",type:"iInCircle",content:_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRole.privilegeSummary.additionalPrivilegesGrantedIconTip",defaultMessage:"Additional privileges granted. Expand this row for more information."}))})}else{iconTip=_react.default.createElement(_eui.EuiIcon,{size:"s",type:"empty"})}return _react.default.createElement("span",{"data-test-subj":"privilegeColumn ".concat(hasCustomizedSubFeaturePrivileges?"additionalPrivilegesGranted":"")},(_ref=primary===null||primary===void 0?void 0:primary.name)!==null&&_ref!==void 0?_ref:"None"," ",iconTip)}}}));var columns=[];if(props.canCustomizeSubFeaturePrivileges){columns.push(rowExpanderColumn)}columns.push.apply(columns,[featureColumn].concat(_toConsumableArray(privilegeColumns)));var privileges=rawKibanaPrivileges.reduce((function(acc,entry){return _objectSpread({},acc,_defineProperty({},getColumnKey(entry),calculator.getEffectiveFeaturePrivileges(entry)))}),{});var items=props.kibanaPrivileges.getSecuredFeatures().map((function(feature){return _objectSpread({feature:feature,featureId:feature.id},privileges)}));return _react.default.createElement(_eui.EuiInMemoryTable,{columns:columns,items:items,itemId:"featureId",rowProps:function rowProps(record){return{"data-test-subj":"summaryTableRow-".concat(record.featureId)}},itemIdToExpandedRowMap:expandedFeatures.reduce((function(acc,featureId){return _objectSpread({},acc,_defineProperty({},featureId,_react.default.createElement(_privilege_summary_expanded_row.PrivilegeSummaryExpandedRow,{feature:props.kibanaPrivileges.getSecuredFeature(featureId),effectiveFeaturePrivileges:Object.values(privileges).map((function(p){return p[featureId]}))})))}),{})})};exports.PrivilegeSummaryTable=PrivilegeSummaryTable},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SpaceColumnHeader=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(2);var _i18n=__webpack_require__(3);var _public=__webpack_require__(19);var _privilege_utils=__webpack_require__(9);var _spaces_popover_list=__webpack_require__(68);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var SPACES_DISPLAY_COUNT=4;var SpaceColumnHeader=function SpaceColumnHeader(props){var isGlobal=(0,_privilege_utils.isGlobalPrivilegeDefinition)(props.entry);var entrySpaces=props.entry.spaces.map((function(spaceId){var _props$spaces$find;return(_props$spaces$find=props.spaces.find((function(s){return s.id===spaceId})))!==null&&_props$spaces$find!==void 0?_props$spaces$find:{id:spaceId,name:spaceId,disabledFeatures:[]}}));return _react.default.createElement("div",null,entrySpaces.slice(0,SPACES_DISPLAY_COUNT).map((function(space){return _react.default.createElement("span",{key:space.id},_react.default.createElement(_public.SpaceAvatar,{size:"s",space:space})," ",isGlobal&&_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRole.spacePrivilegeMatrix.globalSpaceName",defaultMessage:"Global"}),_react.default.createElement("br",null),_react.default.createElement(_spaces_popover_list.SpacesPopoverList,{spaces:props.spaces.filter((function(s){return s.id!=="*"})),buttonText:_i18n.i18n.translate("xpack.security.management.editRole.spacePrivilegeMatrix.showAllSpacesLink",{defaultMessage:"(all spaces)"})})))})),entrySpaces.length>SPACES_DISPLAY_COUNT&&_react.default.createElement(_react.Fragment,null,_react.default.createElement("br",null),_react.default.createElement(_spaces_popover_list.SpacesPopoverList,{spaces:entrySpaces,buttonText:_i18n.i18n.translate("xpack.security.management.editRole.spacePrivilegeMatrix.showNMoreSpacesLink",{defaultMessage:"+{count} more",values:{count:entrySpaces.length-SPACES_DISPLAY_COUNT}})})))};exports.SpaceColumnHeader=SpaceColumnHeader},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PrivilegeSummaryExpandedRow=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(3);var _eui=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PrivilegeSummaryExpandedRow=function PrivilegeSummaryExpandedRow(props){return _react.default.createElement(_eui.EuiFlexGroup,{direction:"column"},props.feature.getSubFeatures().map((function(subFeature){return _react.default.createElement(_eui.EuiFlexItem,{key:subFeature.name,"data-test-subj":"subFeatureEntry"},_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"s","data-test-subj":"subFeatureName"},subFeature.name)),props.effectiveFeaturePrivileges.map((function(privs,index){return _react.default.createElement(_eui.EuiFlexItem,{key:index,"data-test-subj":"entry-".concat(index)},subFeature.getPrivilegeGroups().map(renderPrivilegeGroup(privs.subFeature)))}))))})));function renderPrivilegeGroup(effectiveSubFeaturePrivileges){return function(privilegeGroup,index){switch(privilegeGroup.groupType){case"independent":return renderIndependentPrivilegeGroup(effectiveSubFeaturePrivileges,privilegeGroup,index);case"mutually_exclusive":return renderMutuallyExclusivePrivilegeGroup(effectiveSubFeaturePrivileges,privilegeGroup,index);default:throw new Error("Unsupported privilege group type: ".concat(privilegeGroup.groupType))}}}function renderIndependentPrivilegeGroup(effectiveSubFeaturePrivileges,privilegeGroup,index){return _react.default.createElement("div",{key:index},privilegeGroup.privileges.map((function(privilege){var isGranted=effectiveSubFeaturePrivileges.includes(privilege.id);return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s","data-test-subj":"independentPrivilege",key:privilege.id},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiIconTip,{type:isGranted?"check":"cross",color:isGranted?"primary":"danger",content:isGranted?_i18n.i18n.translate("xpack.security.management.editRole.privilegeSummary.privilegeGrantedIconTip",{defaultMessage:"Privilege is granted"}):_i18n.i18n.translate("xpack.security.management.editRole.privilegeSummary.privilegeNotGrantedIconTip",{defaultMessage:"Privilege is not granted"})})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"s","data-test-subj":"privilegeName"},privilege.name)))})))}function renderMutuallyExclusivePrivilegeGroup(effectiveSubFeaturePrivileges,privilegeGroup,index){var _privilegeGroup$privi;var firstSelectedPrivilege=(_privilegeGroup$privi=privilegeGroup.privileges.find((function(p){return effectiveSubFeaturePrivileges.includes(p.id)})))===null||_privilegeGroup$privi===void 0?void 0:_privilegeGroup$privi.name;return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",key:index,"data-test-subj":"mutexPrivilege"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiIconTip,{type:firstSelectedPrivilege?"check":"cross",color:firstSelectedPrivilege?"primary":"danger",content:firstSelectedPrivilege?"Privilege is granted":"Privilege is not granted"})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"s","data-test-subj":"privilegeName"},firstSelectedPrivilege!==null&&firstSelectedPrivilege!==void 0?firstSelectedPrivilege:"None")))}};exports.PrivilegeSummaryExpandedRow=PrivilegeSummaryExpandedRow},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PrivilegeSummaryCalculator=void 0;var _privilege_utils=__webpack_require__(9);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var PrivilegeSummaryCalculator=function(){function PrivilegeSummaryCalculator(kibanaPrivileges,role){_classCallCheck(this,PrivilegeSummaryCalculator);this.kibanaPrivileges=kibanaPrivileges;this.role=role}_createClass(PrivilegeSummaryCalculator,[{key:"getEffectiveFeaturePrivileges",value:function getEffectiveFeaturePrivileges(entry){var _this=this;var assignedPrivileges=this.collectAssignedPrivileges(entry);var features=this.kibanaPrivileges.getSecuredFeatures();return features.reduce((function(acc,feature){var displayedPrimaryFeaturePrivilege=_this.getDisplayedPrimaryFeaturePrivilege(assignedPrivileges,feature);var effectiveSubPrivileges=feature.getSubFeaturePrivileges().filter((function(ap){return assignedPrivileges.grantsPrivilege(ap)}));var hasCustomizedSubFeaturePrivileges=_this.hasCustomizedSubFeaturePrivileges(feature,displayedPrimaryFeaturePrivilege,entry);return _objectSpread({},acc,_defineProperty({},feature.id,{primary:displayedPrimaryFeaturePrivilege,hasCustomizedSubFeaturePrivileges:hasCustomizedSubFeaturePrivileges,subFeature:effectiveSubPrivileges.map((function(p){return p.id}))}))}),{})}},{key:"hasCustomizedSubFeaturePrivileges",value:function hasCustomizedSubFeaturePrivileges(feature,displayedPrimaryFeaturePrivilege,entry){var formPrivileges=this.collectAssignedPrivileges(entry);return feature.getSubFeaturePrivileges().some((function(sfp){var _ref;var isGranted=formPrivileges.grantsPrivilege(sfp);var isGrantedByDisplayedPrimary=(_ref=displayedPrimaryFeaturePrivilege===null||displayedPrimaryFeaturePrivilege===void 0?void 0:displayedPrimaryFeaturePrivilege.grantsPrivilege(sfp))!==null&&_ref!==void 0?_ref:isGranted;return isGranted!==isGrantedByDisplayedPrimary}))}},{key:"getDisplayedPrimaryFeaturePrivilege",value:function getDisplayedPrimaryFeaturePrivilege(assignedPrivileges,feature){var primaryFeaturePrivileges=feature.getPrimaryFeaturePrivileges();var minimalPrimaryFeaturePrivileges=feature.getMinimalFeaturePrivileges();var hasMinimalPrivileges=feature.subFeatures.length>0;var effectivePrivilege=primaryFeaturePrivileges.find((function(pfp){var isPrimaryGranted=assignedPrivileges.grantsPrivilege(pfp);if(!isPrimaryGranted&&hasMinimalPrivileges){var correspondingMinimal=minimalPrimaryFeaturePrivileges.find((function(mpfp){return mpfp.id===pfp.getMinimalPrivilegeId()}));return assignedPrivileges.grantsPrivilege(correspondingMinimal)}return isPrimaryGranted}));return effectivePrivilege}},{key:"collectAssignedPrivileges",value:function collectAssignedPrivileges(entry){if((0,_privilege_utils.isGlobalPrivilegeDefinition)(entry)){return this.kibanaPrivileges.createCollectionFromRoleKibanaPrivileges([entry])}var globalPrivilege=this.locateGlobalPrivilege(this.role);return this.kibanaPrivileges.createCollectionFromRoleKibanaPrivileges(globalPrivilege?[globalPrivilege,entry]:[entry])}},{key:"locateGlobalPrivilege",value:function locateGlobalPrivilege(role){return role.kibana.find((function(entry){return(0,_privilege_utils.isGlobalPrivilegeDefinition)(entry)}))}}]);return PrivilegeSummaryCalculator}();exports.PrivilegeSummaryCalculator=PrivilegeSummaryCalculator},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TransformErrorSection",{enumerable:true,get:function get(){return _transform_error_section.TransformErrorSection}});var _transform_error_section=__webpack_require__(300)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.TransformErrorSection=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _react2=_interopRequireWildcard(__webpack_require__(0));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var TransformErrorSection=function(_PureComponent){_inherits(TransformErrorSection,_PureComponent);function TransformErrorSection(){_classCallCheck(this,TransformErrorSection);return _possibleConstructorReturn(this,_getPrototypeOf(TransformErrorSection).apply(this,arguments))}_createClass(TransformErrorSection,[{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiEmptyPrompt,{color:"danger",iconType:"alert",title:_react2.default.createElement("h2",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.transformErrorSectionTitle",defaultMessage:"Malformed role"})),body:_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.editRole.transformErrorSectionDescription",defaultMessage:"This role definition is invalid, and cannot be edited through this screen."}))})}}]);return TransformErrorSection}(_react2.PureComponent);exports.TransformErrorSection=TransformErrorSection},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ReservedRoleBadge=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);var _model=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ReservedRoleBadge=function ReservedRoleBadge(props){var role=props.role;if((0,_model.isRoleReserved)(role)){return _react.default.createElement(_eui.EuiToolTip,{"data-test-subj":"reservedRoleBadgeTooltip",content:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRole.reversedRoleBadge.reservedRolesCanNotBeModifiedTooltip",defaultMessage:"Reserved roles are built-in and cannot be removed or modified."})},_react.default.createElement(_eui.EuiIcon,{style:{verticalAlign:"super"},type:"lock"}))}return null};exports.ReservedRoleBadge=ReservedRoleBadge},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SecuredFeature",{enumerable:true,get:function get(){return _secured_feature.SecuredFeature}});Object.defineProperty(exports,"SecuredSubFeature",{enumerable:true,get:function get(){return _secured_sub_feature.SecuredSubFeature}});Object.defineProperty(exports,"SubFeaturePrivilegeGroup",{enumerable:true,get:function get(){return _sub_feature_privilege_group.SubFeaturePrivilegeGroup}});Object.defineProperty(exports,"SubFeaturePrivilege",{enumerable:true,get:function get(){return _sub_feature_privilege.SubFeaturePrivilege}});Object.defineProperty(exports,"PrimaryFeaturePrivilege",{enumerable:true,get:function get(){return _primary_feature_privilege.PrimaryFeaturePrivilege}});Object.defineProperty(exports,"KibanaPrivileges",{enumerable:true,get:function get(){return _kibana_privileges.KibanaPrivileges}});Object.defineProperty(exports,"KibanaPrivilege",{enumerable:true,get:function get(){return _kibana_privilege.KibanaPrivilege}});Object.defineProperty(exports,"PrivilegeCollection",{enumerable:true,get:function get(){return _privilege_collection.PrivilegeCollection}});var _secured_feature=__webpack_require__(69);var _secured_sub_feature=__webpack_require__(73);var _sub_feature_privilege_group=__webpack_require__(74);var _sub_feature_privilege=__webpack_require__(32);var _primary_feature_privilege=__webpack_require__(72);var _kibana_privileges=__webpack_require__(305);var _kibana_privilege=__webpack_require__(20);var _privilege_collection=__webpack_require__(75)},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty2(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.Feature=void 0;var _sub_feature=__webpack_require__(71);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Feature=function(){function Feature(config){_classCallCheck(this,Feature);var _config$subFeatures;this.config=config;_defineProperty(this,"subFeatures",void 0);this.subFeatures=((_config$subFeatures=config.subFeatures)!==null&&_config$subFeatures!==void 0?_config$subFeatures:[]).map((function(subFeatureConfig){return new _sub_feature.SubFeature(subFeatureConfig)}))}_createClass(Feature,[{key:"toRaw",value:function toRaw(){return _objectSpread({},this.config)}},{key:"id",get:function get(){return this.config.id}},{key:"name",get:function get(){return this.config.name}},{key:"order",get:function get(){return this.config.order}},{key:"navLinkId",get:function get(){return this.config.navLinkId}},{key:"app",get:function get(){return this.config.app}},{key:"catalogue",get:function get(){return this.config.catalogue}},{key:"management",get:function get(){return this.config.management}},{key:"icon",get:function get(){return this.config.icon}},{key:"validLicenses",get:function get(){return this.config.validLicenses}},{key:"privileges",get:function get(){return this.config.privileges}},{key:"excludeFromBasePrivileges",get:function get(){var _this$config$excludeF;return(_this$config$excludeF=this.config.excludeFromBasePrivileges)!==null&&_this$config$excludeF!==void 0?_this$config$excludeF:false}},{key:"reserved",get:function get(){return this.config.reserved}}]);return Feature}();exports.Feature=Feature},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KibanaPrivileges=void 0;var _kibana_privilege=__webpack_require__(20);var _privilege_collection=__webpack_require__(75);var _secured_feature=__webpack_require__(69);var _privilege_utils=__webpack_require__(9);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function toBasePrivilege(entry){var _entry=_slicedToArray(entry,2),privilegeId=_entry[0],actions=_entry[1];return[privilegeId,new _kibana_privilege.KibanaPrivilege(privilegeId,actions)]}function recordsToBasePrivilegeMap(record){return new Map(Object.entries(record).map((function(entry){return toBasePrivilege(entry)})))}var KibanaPrivileges=function(){function KibanaPrivileges(rawKibanaPrivileges,features){_classCallCheck(this,KibanaPrivileges);_defineProperty(this,"global",void 0);_defineProperty(this,"spaces",void 0);_defineProperty(this,"feature",void 0);this.global=recordsToBasePrivilegeMap(rawKibanaPrivileges.global);this.spaces=recordsToBasePrivilegeMap(rawKibanaPrivileges.space);this.feature=new Map(features.map((function(feature){var rawPrivs=rawKibanaPrivileges.features[feature.id];return[feature.id,new _secured_feature.SecuredFeature(feature.toRaw(),rawPrivs)]})))}_createClass(KibanaPrivileges,[{key:"getBasePrivileges",value:function getBasePrivileges(entry){if((0,_privilege_utils.isGlobalPrivilegeDefinition)(entry)){return Array.from(this.global.values())}return Array.from(this.spaces.values())}},{key:"getSecuredFeature",value:function getSecuredFeature(featureId){return this.feature.get(featureId)}},{key:"getSecuredFeatures",value:function getSecuredFeatures(){return Array.from(this.feature.values())}},{key:"createCollectionFromRoleKibanaPrivileges",value:function createCollectionFromRoleKibanaPrivileges(roleKibanaPrivileges){var _this=this;var filterAssigned=function filterAssigned(assignedPrivileges){return function(privilege){return assignedPrivileges.includes(privilege.id)}};var privileges=roleKibanaPrivileges.map((function(entry){var assignedBasePrivileges=_this.getBasePrivileges(entry).filter(filterAssigned(entry.base));var assignedFeaturePrivileges=Object.entries(entry.feature).map((function(_ref){var _ref2=_slicedToArray(_ref,2),featureId=_ref2[0],assignedFeaturePrivs=_ref2[1];return _this.getFeaturePrivileges(featureId).filter(filterAssigned(assignedFeaturePrivs))}));return[assignedBasePrivileges,assignedFeaturePrivileges].flat(2)})).flat();return new _privilege_collection.PrivilegeCollection(privileges)}},{key:"getFeaturePrivileges",value:function getFeaturePrivileges(featureId){var _ref3,_this$getSecuredFeatu;return(_ref3=(_this$getSecuredFeatu=this.getSecuredFeature(featureId))===null||_this$getSecuredFeatu===void 0?void 0:_this$getSecuredFeatu.getAllPrivileges())!==null&&_ref3!==void 0?_ref3:[]}}]);return KibanaPrivileges}();exports.KibanaPrivileges=KibanaPrivileges},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocumentationLinksService=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DocumentationLinksService=function(){function DocumentationLinksService(docLinks){_classCallCheck(this,DocumentationLinksService);_defineProperty(this,"esDocBasePath",void 0);this.esDocBasePath="".concat(docLinks.ELASTIC_WEBSITE_URL,"guide/en/elasticsearch/reference/").concat(docLinks.DOC_LINK_VERSION,"/")}_createClass(DocumentationLinksService,[{key:"getESClusterPrivilegesDocUrl",value:function getESClusterPrivilegesDocUrl(){return"".concat(this.esDocBasePath,"security-privileges.html#privileges-list-cluster")}},{key:"getESRunAsPrivilegesDocUrl",value:function getESRunAsPrivilegesDocUrl(){return"".concat(this.esDocBasePath,"security-privileges.html#_run_as_privilege")}},{key:"getESIndicesPrivilegesDocUrl",value:function getESIndicesPrivilegesDocUrl(){return"".concat(this.esDocBasePath,"security-privileges.html#privileges-list-indices")}}]);return DocumentationLinksService}();exports.DocumentationLinksService=DocumentationLinksService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndicesAPIClient=void 0;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var IndicesAPIClient=function(){function IndicesAPIClient(http){_classCallCheck(this,IndicesAPIClient);this.http=http}_createClass(IndicesAPIClient,[{key:"getFields",value:function(){var _getFields=_asyncToGenerator(regeneratorRuntime.mark((function _callee(query){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.http.get("/internal/security/fields/".concat(encodeURIComponent(query)));case 2:_context.t0=_context.sent;if(_context.t0){_context.next=5;break}_context.t0=[];case 5:return _context.abrupt("return",_context.t0);case 6:case"end":return _context.stop()}}}),_callee,this)})));function getFields(_x){return _getFields.apply(this,arguments)}return getFields}()}]);return IndicesAPIClient}();exports.IndicesAPIClient=IndicesAPIClient},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PrivilegesAPIClient=void 0;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var PrivilegesAPIClient=function(){function PrivilegesAPIClient(http){_classCallCheck(this,PrivilegesAPIClient);this.http=http}_createClass(PrivilegesAPIClient,[{key:"getAll",value:function(){var _getAll=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var includeActions;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:includeActions=_ref.includeActions;_context.next=3;return this.http.get("/api/security/privileges",{query:{includeActions:includeActions}});case 3:return _context.abrupt("return",_context.sent);case 4:case"end":return _context.stop()}}}),_callee,this)})));function getAll(_x){return _getAll.apply(this,arguments)}return getAll}()},{key:"getBuiltIn",value:function(){var _getBuiltIn=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.http.get("/internal/security/esPrivileges/builtin");case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}}),_callee2,this)})));function getBuiltIn(){return _getBuiltIn.apply(this,arguments)}return getBuiltIn}()}]);return PrivilegesAPIClient}();exports.PrivilegesAPIClient=PrivilegesAPIClient},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RoleMappingsAPIClient=void 0;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var RoleMappingsAPIClient=function(){function RoleMappingsAPIClient(http){_classCallCheck(this,RoleMappingsAPIClient);this.http=http}_createClass(RoleMappingsAPIClient,[{key:"checkRoleMappingFeatures",value:function(){var _checkRoleMappingFeatures=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",this.http.get("/internal/security/_check_role_mapping_features"));case 1:case"end":return _context.stop()}}}),_callee,this)})));function checkRoleMappingFeatures(){return _checkRoleMappingFeatures.apply(this,arguments)}return checkRoleMappingFeatures}()},{key:"getRoleMappings",value:function(){var _getRoleMappings=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",this.http.get("/internal/security/role_mapping"));case 1:case"end":return _context2.stop()}}}),_callee2,this)})));function getRoleMappings(){return _getRoleMappings.apply(this,arguments)}return getRoleMappings}()},{key:"getRoleMapping",value:function(){var _getRoleMapping=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(name){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return",this.http.get("/internal/security/role_mapping/".concat(encodeURIComponent(name))));case 1:case"end":return _context3.stop()}}}),_callee3,this)})));function getRoleMapping(_x){return _getRoleMapping.apply(this,arguments)}return getRoleMapping}()},{key:"saveRoleMapping",value:function(){var _saveRoleMapping=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(roleMapping){var payload;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:payload=_objectSpread({},roleMapping);delete payload.name;return _context4.abrupt("return",this.http.post("/internal/security/role_mapping/".concat(encodeURIComponent(roleMapping.name)),{body:JSON.stringify(payload)}));case 3:case"end":return _context4.stop()}}}),_callee4,this)})));function saveRoleMapping(_x2){return _saveRoleMapping.apply(this,arguments)}return saveRoleMapping}()},{key:"deleteRoleMappings",value:function(){var _deleteRoleMappings=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(names){var _this=this;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:return _context5.abrupt("return",Promise.all(names.map((function(name){return _this.http.delete("/internal/security/role_mapping/".concat(encodeURIComponent(name))).then((function(){return{success:true,name:name}})).catch((function(error){return{success:false,name:name,error:error}}))}))));case 1:case"end":return _context5.stop()}}}),_callee5)})));function deleteRoleMappings(_x3){return _deleteRoleMappings.apply(this,arguments)}return deleteRoleMappings}()}]);return RoleMappingsAPIClient}();exports.RoleMappingsAPIClient=RoleMappingsAPIClient},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocumentationLinksService=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DocumentationLinksService=function(){function DocumentationLinksService(docLinks){_classCallCheck(this,DocumentationLinksService);_defineProperty(this,"esDocBasePath",void 0);this.esDocBasePath="".concat(docLinks.ELASTIC_WEBSITE_URL,"guide/en/elasticsearch/reference/").concat(docLinks.DOC_LINK_VERSION,"/")}_createClass(DocumentationLinksService,[{key:"getRoleMappingDocUrl",value:function getRoleMappingDocUrl(){return"".concat(this.esDocBasePath,"/mapping-roles.html")}},{key:"getRoleMappingAPIDocUrl",value:function getRoleMappingAPIDocUrl(){return"".concat(this.esDocBasePath,"/security-api-put-role-mapping.html")}},{key:"getRoleMappingTemplateDocUrl",value:function getRoleMappingTemplateDocUrl(){return"".concat(this.esDocBasePath,"/security-api-put-role-mapping.html#_role_templates")}},{key:"getRoleMappingFieldRulesDocUrl",value:function getRoleMappingFieldRulesDocUrl(){return"".concat(this.esDocBasePath,"/role-mapping-resources.html#mapping-roles-rule-field")}}]);return DocumentationLinksService}();exports.DocumentationLinksService=DocumentationLinksService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RoleMappingsGridPage",{enumerable:true,get:function get(){return _role_mappings_grid_page.RoleMappingsGridPage}});var _role_mappings_grid_page=__webpack_require__(312)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RoleMappingsGridPage=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react2=__webpack_require__(2);var _empty_prompt=__webpack_require__(313);var _components=__webpack_require__(76);var _management_urls=__webpack_require__(13);var _role_table_display=__webpack_require__(47);var _badges=__webpack_require__(26);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RoleMappingsGridPage=function(_Component){_inherits(RoleMappingsGridPage,_Component);function RoleMappingsGridPage(props){var _this;_classCallCheck(this,RoleMappingsGridPage);_this=_possibleConstructorReturn(this,_getPrototypeOf(RoleMappingsGridPage).call(this,props));_defineProperty(_assertThisInitialized(_this),"renderTable",(function(){var _this$state=_this.state,roleMappings=_this$state.roleMappings,selectedItems=_this$state.selectedItems,loadState=_this$state.loadState;var message=loadState==="loadingTable"?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roleMappings.roleMappingTableLoadingMessage",defaultMessage:"Loading role mappings…"}):undefined;var sorting={sort:{field:"name",direction:"asc"}};var pagination={initialPageSize:20,pageSizeOptions:[10,20,50]};var selection={onSelectionChange:function onSelectionChange(newSelectedItems){_this.setState({selectedItems:newSelectedItems})}};var search={toolsLeft:selectedItems.length?_react.default.createElement(_components.DeleteProvider,{roleMappingsAPI:_this.props.roleMappingsAPI,notifications:_this.props.notifications},(function(deleteRoleMappingsPrompt){return _react.default.createElement(_eui.EuiButton,{onClick:function onClick(){return deleteRoleMappingsPrompt(selectedItems,_this.onRoleMappingsDeleted)},color:"danger","data-test-subj":"bulkDeleteActionButton"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roleMappings.deleteRoleMappingButton",defaultMessage:"Delete {count, plural, one {role mapping} other {role mappings}}",values:{count:selectedItems.length}}))})):undefined,toolsRight:_react.default.createElement(_eui.EuiButton,{color:"secondary",iconType:"refresh",onClick:function onClick(){return _this.reloadRoleMappings()},"data-test-subj":"reloadButton"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roleMappings.reloadRoleMappingsButton",defaultMessage:"Reload"})),box:{incremental:true},filters:undefined};return _react.default.createElement(_eui.EuiInMemoryTable,{items:roleMappings,itemId:"name",columns:_this.getColumnConfig(),search:search,sorting:sorting,selection:selection,pagination:pagination,loading:loadState==="loadingTable",message:message,isSelectable:true,rowProps:function rowProps(){return{"data-test-subj":"roleMappingRow"}}})}));_defineProperty(_assertThisInitialized(_this),"getColumnConfig",(function(){var config=[{field:"name",name:_i18n.i18n.translate("xpack.security.management.roleMappings.nameColumnName",{defaultMessage:"Name"}),sortable:true,render:function render(roleMappingName){return _react.default.createElement(_eui.EuiLink,{href:(0,_management_urls.getEditRoleMappingHref)(roleMappingName),"data-test-subj":"roleMappingName"},roleMappingName)}},{field:"roles",name:_i18n.i18n.translate("xpack.security.management.roleMappings.rolesColumnName",{defaultMessage:"Roles"}),sortable:true,render:function render(entry,record){var _record$roles=record.roles,assignedRoleNames=_record$roles===void 0?[]:_record$roles,_record$role_template=record.role_templates,roleTemplates=_record$role_template===void 0?[]:_record$role_template;if(roleTemplates.length>0){return _react.default.createElement("span",{"data-test-subj":"roleMappingRoles"},_i18n.i18n.translate("xpack.security.management.roleMappings.roleTemplates",{defaultMessage:"{templateCount, plural, one{# role template} other {# role templates}} defined",values:{templateCount:roleTemplates.length}}))}var roleLinks=assignedRoleNames.map((function(rolename,index){var _ref,_this$state$roles;var role=(_ref=(_this$state$roles=_this.state.roles)===null||_this$state$roles===void 0?void 0:_this$state$roles.find((function(r){return r.name===rolename})))!==null&&_ref!==void 0?_ref:rolename;return _react.default.createElement(_role_table_display.RoleTableDisplay,{role:role,key:rolename})}));return _react.default.createElement("div",{"data-test-subj":"roleMappingRoles"},roleLinks)}},{field:"enabled",name:_i18n.i18n.translate("xpack.security.management.roleMappings.enabledColumnName",{defaultMessage:"Enabled"}),sortable:true,render:function render(enabled){if(enabled){return _react.default.createElement(_badges.EnabledBadge,{"data-test-subj":"roleMappingEnabled"})}return _react.default.createElement(_badges.DisabledBadge,{"data-test-subj":"roleMappingEnabled"})}},{name:_i18n.i18n.translate("xpack.security.management.roleMappings.actionsColumnName",{defaultMessage:"Actions"}),actions:[{render:function render(record){return _react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.security.management.roleMappings.actionEditTooltip",{defaultMessage:"Edit"})},_react.default.createElement(_eui.EuiButtonIcon,{"aria-label":_i18n.i18n.translate("xpack.security.management.roleMappings.actionEditAriaLabel",{defaultMessage:"Edit '{name}'",values:{name:record.name}}),iconType:"pencil",color:"primary","data-test-subj":"editRoleMappingButton-".concat(record.name),href:(0,_management_urls.getEditRoleMappingHref)(record.name)}))}},{render:function render(record){return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_components.DeleteProvider,{roleMappingsAPI:_this.props.roleMappingsAPI,notifications:_this.props.notifications},(function(deleteRoleMappingPrompt){return _react.default.createElement(_eui.EuiToolTip,{content:_i18n.i18n.translate("xpack.security.management.roleMappings.actionDeleteTooltip",{defaultMessage:"Delete"})},_react.default.createElement(_eui.EuiButtonIcon,{"aria-label":_i18n.i18n.translate("xpack.security.management.roleMappings.actionDeleteAriaLabel",{defaultMessage:"Delete '{name}'",values:{name:name}}),iconType:"trash",color:"danger","data-test-subj":"deleteRoleMappingButton-".concat(record.name),onClick:function onClick(){return deleteRoleMappingPrompt([record],_this.onRoleMappingsDeleted)}}))}))))}}]}];return config}));_defineProperty(_assertThisInitialized(_this),"onRoleMappingsDeleted",(function(roleMappings){if(roleMappings.length){_this.reloadRoleMappings()}}));_defineProperty(_assertThisInitialized(_this),"performInitialLoad",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _ref3,_ref4,roleMappings,roles;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Promise.all([_this.props.roleMappingsAPI.getRoleMappings(),_this.props.rolesAPIClient.getRoles()]);case 3:_ref3=_context.sent;_ref4=_slicedToArray(_ref3,2);roleMappings=_ref4[0];roles=_ref4[1];_this.setState({roleMappings:roleMappings,roles:roles});_context.next=13;break;case 10:_context.prev=10;_context.t0=_context["catch"](0);_this.setState({error:_context.t0});case 13:_this.setState({loadState:"finished"});case 14:case"end":return _context.stop()}}}),_callee,null,[[0,10]])}))));_defineProperty(_assertThisInitialized(_this),"reloadRoleMappings",(function(){_this.setState({roleMappings:[],loadState:"loadingTable"});_this.loadRoleMappings()}));_defineProperty(_assertThisInitialized(_this),"loadRoleMappings",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var roleMappings;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return _this.props.roleMappingsAPI.getRoleMappings();case 3:roleMappings=_context2.sent;_this.setState({roleMappings:roleMappings});_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2["catch"](0);_this.setState({error:_context2.t0});case 10:_this.setState({loadState:"finished"});case 11:case"end":return _context2.stop()}}}),_callee2,null,[[0,7]])}))));_this.state={loadState:"loadingApp",roleMappings:null,roles:null,hasCompatibleRealms:true,selectedItems:[],error:undefined};return _this}_createClass(RoleMappingsGridPage,[{key:"componentDidMount",value:function componentDidMount(){this.checkPrivileges()}},{key:"render",value:function render(){var _this$state2=this.state,loadState=_this$state2.loadState,error=_this$state2.error,roleMappings=_this$state2.roleMappings;if(loadState==="permissionDenied"){return _react.default.createElement(_components.PermissionDenied,null)}if(loadState==="loadingApp"){return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_components.SectionLoading,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roleMappings.loadingRoleMappingsDescription",defaultMessage:"Loading role mappings…"})))}if(error){var _error$body=error.body,errorTitle=_error$body.error,message=_error$body.message,statusCode=_error$body.statusCode;return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roleMappings.loadingRoleMappingsErrorTitle",defaultMessage:"Error loading Role mappings"}),color:"danger",iconType:"alert"},statusCode,": ",errorTitle," - ",message))}if(loadState==="finished"&&roleMappings&&roleMappings.length===0){return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_empty_prompt.EmptyPrompt,null))}return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_eui.EuiPageContentHeader,null,_react.default.createElement(_eui.EuiPageContentHeaderSection,null,_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roleMappings.roleMappingTitle",defaultMessage:"Role Mappings"}))),_react.default.createElement(_eui.EuiText,{color:"subdued",size:"s"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roleMappings.roleMappingDescription",defaultMessage:"Role mappings define which roles are assigned to users from an external identity provider. {learnMoreLink}",values:{learnMoreLink:_react.default.createElement(_eui.EuiLink,{href:this.props.docLinks.getRoleMappingDocUrl(),external:true,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roleMappings.learnMoreLinkText",defaultMessage:"Learn more."}))}})))),_react.default.createElement(_eui.EuiPageContentHeaderSection,null,_react.default.createElement(_eui.EuiButton,{"data-test-subj":"createRoleMappingButton",href:(0,_management_urls.getCreateRoleMappingHref)()},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roleMappings.createRoleMappingButtonLabel",defaultMessage:"Create role mapping"})))),_react.default.createElement(_eui.EuiPageContentBody,null,_react.default.createElement(_react.Fragment,null,!this.state.hasCompatibleRealms&&_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_components.NoCompatibleRealms,{docLinks:this.props.docLinks}),_react.default.createElement(_eui.EuiSpacer,null)),this.renderTable())))}},{key:"checkPrivileges",value:function(){var _checkPrivileges=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var _ref6,canManageRoleMappings,hasCompatibleRealms;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return this.props.roleMappingsAPI.checkRoleMappingFeatures();case 3:_ref6=_context3.sent;canManageRoleMappings=_ref6.canManageRoleMappings;hasCompatibleRealms=_ref6.hasCompatibleRealms;this.setState({loadState:canManageRoleMappings?this.state.loadState:"permissionDenied",hasCompatibleRealms:hasCompatibleRealms});if(canManageRoleMappings){this.performInitialLoad()}_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3["catch"](0);this.setState({error:_context3.t0,loadState:"finished"});case 13:case"end":return _context3.stop()}}}),_callee3,this,[[0,10]])})));function checkPrivileges(){return _checkPrivileges.apply(this,arguments)}return checkPrivileges}()}]);return RoleMappingsGridPage}(_react.Component);exports.RoleMappingsGridPage=RoleMappingsGridPage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"EmptyPrompt",{enumerable:true,get:function get(){return _empty_prompt.EmptyPrompt}});var _empty_prompt=__webpack_require__(314)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmptyPrompt=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);var _create_role_mapping_button=__webpack_require__(315);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var EmptyPrompt=function EmptyPrompt(){return _react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"managementApp",title:_react.default.createElement("h1",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roleMappings.emptyPromptTitle",defaultMessage:"Create your first role mapping"})),body:_react.default.createElement(_react.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roleMappings.emptyPromptDescription",defaultMessage:"Role mappings control which roles are assigned to your users."}))),actions:_react.default.createElement(_create_role_mapping_button.CreateRoleMappingButton,null),"data-test-subj":"roleMappingsEmptyPrompt"})};exports.EmptyPrompt=EmptyPrompt},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CreateRoleMappingButton",{enumerable:true,get:function get(){return _create_role_mapping_button.CreateRoleMappingButton}});var _create_role_mapping_button=__webpack_require__(316)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CreateRoleMappingButton=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);var _management_urls=__webpack_require__(13);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CreateRoleMappingButton=function CreateRoleMappingButton(){return _react.default.createElement(_eui.EuiButton,{"data-test-subj":"createRoleMappingButton",href:(0,_management_urls.getCreateRoleMappingHref)(),fill:true},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roleMappings.createRoleMappingButton",defaultMessage:"Create role mapping"}))};exports.CreateRoleMappingButton=CreateRoleMappingButton},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DeleteProvider",{enumerable:true,get:function get(){return _delete_provider.DeleteProvider}});var _delete_provider=__webpack_require__(318)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DeleteProvider=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var DeleteProvider=function DeleteProvider(_ref){var roleMappingsAPI=_ref.roleMappingsAPI,children=_ref.children,notifications=_ref.notifications;var _useState=(0,_react.useState)([]),_useState2=_slicedToArray(_useState,2),roleMappings=_useState2[0],setRoleMappings=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),isModalOpen=_useState4[0],setIsModalOpen=_useState4[1];var _useState5=(0,_react.useState)(false),_useState6=_slicedToArray(_useState5,2),isDeleteInProgress=_useState6[0],setIsDeleteInProgress=_useState6[1];var onSuccessCallback=(0,_react.useRef)(null);var deleteRoleMappingsPrompt=function deleteRoleMappingsPrompt(roleMappingsToDelete){var onSuccess=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){return undefined};if(!roleMappingsToDelete||!roleMappingsToDelete.length){throw new Error("No Role Mappings specified for delete")}setIsModalOpen(true);setRoleMappings(roleMappingsToDelete);onSuccessCallback.current=onSuccess};var closeModal=function closeModal(){setIsModalOpen(false);setRoleMappings([])};var deleteRoleMappings=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var result,successfulDeletes,erroredDeletes,hasMultipleSuccesses,successMessage,hasMultipleErrors,errorMessage;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsDeleteInProgress(true);_context.prev=1;_context.next=4;return roleMappingsAPI.deleteRoleMappings(roleMappings.map((function(rm){return rm.name})));case 4:result=_context.sent;_context.next=12;break;case 7:_context.prev=7;_context.t0=_context["catch"](1);notifications.toasts.addError(_context.t0,{title:_i18n.i18n.translate("xpack.security.management.roleMappings.deleteRoleMapping.unknownError",{defaultMessage:"Error deleting role mappings"})});setIsDeleteInProgress(false);return _context.abrupt("return");case 12:setIsDeleteInProgress(false);closeModal();successfulDeletes=result.filter((function(res){return res.success}));erroredDeletes=result.filter((function(res){return!res.success}));if(successfulDeletes.length>0){hasMultipleSuccesses=successfulDeletes.length>1;successMessage=hasMultipleSuccesses?_i18n.i18n.translate("xpack.security.management.roleMappings.deleteRoleMapping.successMultipleNotificationTitle",{defaultMessage:"Deleted {count} role mappings",values:{count:successfulDeletes.length}}):_i18n.i18n.translate("xpack.security.management.roleMappings.deleteRoleMapping.successSingleNotificationTitle",{defaultMessage:"Deleted role mapping '{name}'",values:{name:successfulDeletes[0].name}});notifications.toasts.addSuccess({title:successMessage,"data-test-subj":"deletedRoleMappingSuccessToast"});if(onSuccessCallback.current){onSuccessCallback.current(successfulDeletes.map((function(_ref3){var name=_ref3.name;return name})))}}if(erroredDeletes.length>0){hasMultipleErrors=erroredDeletes.length>1;errorMessage=hasMultipleErrors?_i18n.i18n.translate("xpack.security.management.roleMappings.deleteRoleMapping.errorMultipleNotificationTitle",{defaultMessage:"Error deleting {count} role mappings",values:{count:erroredDeletes.length}}):_i18n.i18n.translate("xpack.security.management.roleMappings.deleteRoleMapping.errorSingleNotificationTitle",{defaultMessage:"Error deleting role mapping '{name}'",values:{name:erroredDeletes[0].name}});notifications.toasts.addDanger(errorMessage)}case 18:case"end":return _context.stop()}}}),_callee,null,[[1,7]])})));return function deleteRoleMappings(){return _ref2.apply(this,arguments)}}();var renderModal=function renderModal(){if(!isModalOpen){return null}var isSingle=roleMappings.length===1;return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:isSingle?_i18n.i18n.translate("xpack.security.management.roleMappings.deleteRoleMapping.confirmModal.deleteSingleTitle",{defaultMessage:"Delete role mapping '{name}'?",values:{name:roleMappings[0].name}}):_i18n.i18n.translate("xpack.security.management.roleMappings.deleteRoleMapping.confirmModal.deleteMultipleTitle",{defaultMessage:"Delete {count} role mappings?",values:{count:roleMappings.length}}),onCancel:closeModal,onConfirm:deleteRoleMappings,cancelButtonText:_i18n.i18n.translate("xpack.security.management.roleMappings.deleteRoleMapping.confirmModal.cancelButtonLabel",{defaultMessage:"Cancel"}),confirmButtonText:_i18n.i18n.translate("xpack.security.management.roleMappings.deleteRoleMapping.confirmModal.confirmButtonLabel",{defaultMessage:"Delete {count, plural, one {role mapping} other {role mappings}}",values:{count:roleMappings.length}}),confirmButtonDisabled:isDeleteInProgress,buttonColor:"danger","data-test-subj":"deleteRoleMappingConfirmationModal"},!isSingle?_react.default.createElement(_react.Fragment,null,_react.default.createElement("p",null,_i18n.i18n.translate("xpack.security.management.roleMappings.deleteRoleMapping.confirmModal.deleteMultipleListDescription",{defaultMessage:"You are about to delete these role mappings:"})),_react.default.createElement("ul",null,roleMappings.map((function(_ref4){var name=_ref4.name;return _react.default.createElement("li",{key:name},name)})))):null))};return _react.default.createElement(_react.Fragment,null,children(deleteRoleMappingsPrompt),renderModal())};exports.DeleteProvider=DeleteProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"NoCompatibleRealms",{enumerable:true,get:function get(){return _no_compatible_realms.NoCompatibleRealms}});var _no_compatible_realms=__webpack_require__(320)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NoCompatibleRealms=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var NoCompatibleRealms=function NoCompatibleRealms(_ref){var docLinks=_ref.docLinks;return _react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roleMappings.noCompatibleRealmsErrorTitle",defaultMessage:"No compatible realms are enabled in Elasticsearch"}),color:"warning",iconType:"alert"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roleMappings.noCompatibleRealmsErrorDescription",defaultMessage:"Role mappings will not be applied to any users. Contact your system administrator and refer to the {link} for more information.",values:{link:_react.default.createElement(_eui.EuiLink,{href:docLinks.getRoleMappingDocUrl(),external:true,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.roleMappings.noCompatibleRealmsErrorLinkText",defaultMessage:"docs"}))}}))};exports.NoCompatibleRealms=NoCompatibleRealms},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PermissionDenied",{enumerable:true,get:function get(){return _permission_denied.PermissionDenied}});var _permission_denied=__webpack_require__(322)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PermissionDenied=void 0;var _eui=__webpack_require__(1);var _react=__webpack_require__(2);var _react2=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PermissionDenied=function PermissionDenied(){return _react2.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none"},_react2.default.createElement(_eui.EuiPageContent,{horizontalPosition:"center"},_react2.default.createElement(_eui.EuiEmptyPrompt,{iconType:"securityApp",title:_react2.default.createElement("h2",null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.roleMappings.deniedPermissionTitle",defaultMessage:"You need permission to manage role mappings"})),body:_react2.default.createElement("p",{"data-test-subj":"permissionDeniedMessage"},_react2.default.createElement(_react.FormattedMessage,{id:"xpack.security.management.roleMappings.deniedPermissionDescription",defaultMessage:"Contact your system administrator."}))})))};exports.PermissionDenied=PermissionDenied},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SectionLoading",{enumerable:true,get:function get(){return _section_loading.SectionLoading}});var _section_loading=__webpack_require__(324)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SectionLoading=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SectionLoading=function SectionLoading(props){return _react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement(_eui.EuiLoadingSpinner,{size:"xl"}),body:_react.default.createElement(_eui.EuiText,{color:"subdued"},props.children||_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.loadingRoleMappingDescription",defaultMessage:"Loading…"})),"data-test-subj":"sectionLoading"})};exports.SectionLoading=SectionLoading},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"EditRoleMappingPage",{enumerable:true,get:function get(){return _edit_role_mapping_page.EditRoleMappingPage}});var _edit_role_mapping_page=__webpack_require__(326)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.EditRoleMappingPage=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react2=__webpack_require__(2);var _rule_editor_panel=__webpack_require__(327);var _components=__webpack_require__(76);var _management_urls=__webpack_require__(13);var _role_mapping_validation=__webpack_require__(35);var _mapping_info_panel=__webpack_require__(339);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EditRoleMappingPage=function(_Component){_inherits(EditRoleMappingPage,_Component);function EditRoleMappingPage(props){var _this;_classCallCheck(this,EditRoleMappingPage);_this=_possibleConstructorReturn(this,_getPrototypeOf(EditRoleMappingPage).call(this,props));_defineProperty(_assertThisInitialized(_this),"getFormTitle",(function(){return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"l"},_react.default.createElement("h1",null,_this.editingExistingRoleMapping()?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.editRoleMappingTitle",defaultMessage:"Edit role mapping"}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.createRoleMappingTitle",defaultMessage:"Create role mapping"}))),_react.default.createElement(_eui.EuiText,{color:"subdued",size:"s"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleMappingDescription",defaultMessage:"Use role mappings to control which roles are assigned to your users. {learnMoreLink}",values:{learnMoreLink:_react.default.createElement(_eui.EuiLink,{href:_this.props.docLinks.getRoleMappingDocUrl(),external:true,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.learnMoreLinkText",defaultMessage:"Learn more."}))}}))),!_this.state.hasCompatibleRealms&&_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_components.NoCompatibleRealms,{docLinks:_this.props.docLinks})))}));_defineProperty(_assertThisInitialized(_this),"getFormButtons",(function(){return _react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{fill:true,onClick:_this.saveRoleMapping,isLoading:_this.state.loadState==="saveInProgress",disabled:!_this.state.rulesValid||_this.state.loadState==="saveInProgress","data-test-subj":"saveRoleMappingButton"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.saveRoleMappingButton",defaultMessage:"Save role mapping"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false,onClick:_this.backToRoleMappingsList},_react.default.createElement(_eui.EuiButton,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.cancelButton",defaultMessage:"Cancel"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:true}),_this.editingExistingRoleMapping()&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_components.DeleteProvider,{roleMappingsAPI:_this.props.roleMappingsAPI,notifications:_this.props.notifications},(function(deleteRoleMappingsPrompt){return _react.default.createElement(_eui.EuiButtonEmpty,{onClick:function onClick(){return deleteRoleMappingsPrompt([_this.state.roleMapping],(function(){return _this.backToRoleMappingsList()}))},color:"danger"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.deleteRoleMappingButton",defaultMessage:"Delete role mapping"}))}))))}));_defineProperty(_assertThisInitialized(_this),"onRuleValidityChange",(function(rulesValid){_this.setState({rulesValid:rulesValid})}));_defineProperty(_assertThisInitialized(_this),"saveRoleMapping",(function(){if(!_this.state.roleMapping){return}var _validateRoleMappingF=(0,_role_mapping_validation.validateRoleMappingForSave)(_this.state.roleMapping),isInvalid=_validateRoleMappingF.isInvalid;if(isInvalid){_this.setState({validateForm:true});return}var roleMappingName=_this.state.roleMapping.name;_this.setState({loadState:"saveInProgress"});_this.props.roleMappingsAPI.saveRoleMapping(_this.state.roleMapping).then((function(){_this.props.notifications.toasts.addSuccess({title:_i18n.i18n.translate("xpack.security.management.editRoleMapping.saveSuccess",{defaultMessage:"Saved role mapping '{roleMappingName}'",values:{roleMappingName:roleMappingName}}),"data-test-subj":"savedRoleMappingSuccessToast"});_this.backToRoleMappingsList()})).catch((function(e){var _e$body;_this.props.notifications.toasts.addError(e,{title:_i18n.i18n.translate("xpack.security.management.editRoleMapping.saveError",{defaultMessage:"Error saving role mapping"}),toastMessage:e===null||e===void 0?void 0:(_e$body=e.body)===null||_e$body===void 0?void 0:_e$body.message});_this.setState({loadState:"saveInProgress"})}))}));_defineProperty(_assertThisInitialized(_this),"editingExistingRoleMapping",(function(){return typeof _this.props.name==="string"}));_defineProperty(_assertThisInitialized(_this),"backToRoleMappingsList",(function(){window.location.hash=_management_urls.ROLE_MAPPINGS_PATH}));_this.state={loadState:"loading",roleMapping:null,hasCompatibleRealms:true,canUseStoredScripts:true,canUseInlineScripts:true,rulesValid:true,validateForm:false,formError:{isInvalid:false}};return _this}_createClass(EditRoleMappingPage,[{key:"componentDidMount",value:function componentDidMount(){this.loadAppData()}},{key:"componentDidUpdate",value:function(){var _componentDidUpdate=_asyncToGenerator(regeneratorRuntime.mark((function _callee(prevProps){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(prevProps.name!==this.props.name)){_context.next=3;break}_context.next=3;return this.loadAppData();case 3:case"end":return _context.stop()}}}),_callee,this)})));function componentDidUpdate(_x){return _componentDidUpdate.apply(this,arguments)}return componentDidUpdate}()},{key:"render",value:function render(){var _this2=this;var loadState=this.state.loadState;if(loadState==="permissionDenied"){return _react.default.createElement(_components.PermissionDenied,null)}if(loadState==="loading"){return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_components.SectionLoading,null))}return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiForm,{isInvalid:this.state.formError.isInvalid,error:this.state.formError.error},this.getFormTitle(),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_mapping_info_panel.MappingInfoPanel,{roleMapping:this.state.roleMapping,onChange:function onChange(roleMapping){return _this2.setState({roleMapping:roleMapping})},mode:this.editingExistingRoleMapping()?"edit":"create",validateForm:this.state.validateForm,canUseInlineScripts:this.state.canUseInlineScripts,canUseStoredScripts:this.state.canUseStoredScripts,rolesAPIClient:this.props.rolesAPIClient,docLinks:this.props.docLinks}),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_rule_editor_panel.RuleEditorPanel,{rawRules:this.state.roleMapping.rules,validateForm:this.state.validateForm,onValidityChange:this.onRuleValidityChange,onChange:function onChange(rules){return _this2.setState({roleMapping:_objectSpread({},_this2.state.roleMapping,{rules:rules})})},docLinks:this.props.docLinks}),_react.default.createElement(_eui.EuiSpacer,null),this.getFormButtons()))}},{key:"loadAppData",value:function(){var _loadAppData=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _ref,_ref2,features,roleMapping,canManageRoleMappings,canUseStoredScripts,canUseInlineScripts,hasCompatibleRealms,loadState,_ref3,_e$body2;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return Promise.all([this.props.roleMappingsAPI.checkRoleMappingFeatures(),this.editingExistingRoleMapping()?this.props.roleMappingsAPI.getRoleMapping(this.props.name):Promise.resolve({name:"",enabled:true,metadata:{},role_templates:[],roles:[],rules:{}})]);case 3:_ref=_context2.sent;_ref2=_slicedToArray(_ref,2);features=_ref2[0];roleMapping=_ref2[1];canManageRoleMappings=features.canManageRoleMappings,canUseStoredScripts=features.canUseStoredScripts,canUseInlineScripts=features.canUseInlineScripts,hasCompatibleRealms=features.hasCompatibleRealms;loadState=canManageRoleMappings?"ready":"permissionDenied";this.setState({loadState:loadState,hasCompatibleRealms:hasCompatibleRealms,canUseStoredScripts:canUseStoredScripts,canUseInlineScripts:canUseInlineScripts,roleMapping:roleMapping});_context2.next=16;break;case 12:_context2.prev=12;_context2.t0=_context2["catch"](0);this.props.notifications.toasts.addDanger({title:_i18n.i18n.translate("xpack.security.management.editRoleMapping.table.fetchingRoleMappingsErrorMessage",{defaultMessage:"Error loading role mapping editor: {message}",values:{message:(_ref3=_context2.t0===null||_context2.t0===void 0?void 0:(_e$body2=_context2.t0.body)===null||_e$body2===void 0?void 0:_e$body2.message)!==null&&_ref3!==void 0?_ref3:""}}),"data-test-subj":"errorLoadingRoleMappingEditorToast"});this.backToRoleMappingsList();case 16:case"end":return _context2.stop()}}}),_callee2,this,[[0,12]])})));function loadAppData(){return _loadAppData.apply(this,arguments)}return loadAppData}()}]);return EditRoleMappingPage}(_react.Component);exports.EditRoleMappingPage=EditRoleMappingPage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RuleEditorPanel",{enumerable:true,get:function get(){return _rule_editor_panel.RuleEditorPanel}});var _rule_editor_panel=__webpack_require__(328)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RuleEditorPanel=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);var _i18n=__webpack_require__(3);var _visual_rule_editor=__webpack_require__(329);var _json_rule_editor=__webpack_require__(335);var _role_mapping_constants=__webpack_require__(82);var _model=__webpack_require__(8);var _role_mapping_validation=__webpack_require__(35);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RuleEditorPanel=function(_Component){_inherits(RuleEditorPanel,_Component);function RuleEditorPanel(props){var _this;_classCallCheck(this,RuleEditorPanel);_this=_possibleConstructorReturn(this,_getPrototypeOf(RuleEditorPanel).call(this,props));_defineProperty(_assertThisInitialized(_this),"initializeFromRawRules",(function(rawRules){var _generateRulesFromRaw=(0,_model.generateRulesFromRaw)(rawRules),rules=_generateRulesFromRaw.rules,maxDepth=_generateRulesFromRaw.maxDepth;var mode=maxDepth>=_role_mapping_constants.VISUAL_MAX_RULE_DEPTH?"json":"visual";return{rules:rules,mode:mode,maxDepth:maxDepth}}));_defineProperty(_assertThisInitialized(_this),"getConfirmModeChangePrompt",(function(){if(!_this.state.showConfirmModeChange){return null}return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.confirmModeChangePromptTitle",defaultMessage:"Switch with invalid rules?"}),onCancel:function onCancel(){return _this.setState({showConfirmModeChange:false})},onConfirm:function onConfirm(){_this.setState({mode:"visual",showConfirmModeChange:false});_this.onValidityChange(true)},cancelButtonText:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.confirmModeChangePromptCancelButton",defaultMessage:"Cancel"}),confirmButtonText:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.confirmModeChangePromptConfirmButton",defaultMessage:"Switch anyway"})},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.confirmModeChangePromptBody",defaultMessage:"The rules defined are not valid, and cannot be translated to the visual editor. You may lose some or all of your changes during the conversion. Do you wish to continue?"}))))}));_defineProperty(_assertThisInitialized(_this),"onRuleChange",(function(updatedRule){var raw=updatedRule?updatedRule.toRaw():{};_this.props.onChange(raw);_this.setState(_objectSpread({},(0,_model.generateRulesFromRaw)(raw)))}));_defineProperty(_assertThisInitialized(_this),"onValidityChange",(function(isRuleValid){_this.setState({isRuleValid:isRuleValid});_this.props.onValidityChange(isRuleValid)}));_defineProperty(_assertThisInitialized(_this),"trySwitchEditorMode",(function(newMode){switch(newMode){case"visual":{if(_this.state.isRuleValid){_this.setState({mode:newMode});_this.onValidityChange(true)}else{_this.setState({showConfirmModeChange:true})}break}case"json":_this.setState({mode:newMode});_this.onValidityChange(true);break;default:throw new Error("Unexpected rule editor mode: ".concat(_this.state.mode))}}));_this.state=_objectSpread({},_this.initializeFromRawRules(props.rawRules),{isRuleValid:true,showConfirmModeChange:false,showVisualEditorDisabledAlert:false});return _this}_createClass(RuleEditorPanel,[{key:"render",value:function render(){var validationResult=this.props.validateForm&&(0,_role_mapping_validation.validateRoleMappingRules)({rules:this.state.rules?this.state.rules.toRaw():{}});var validationWarning=null;if(validationResult&&validationResult.error){validationWarning=_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiCallOut,{color:"danger",title:validationResult.error,size:"s"}))}return _react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.mappingRulesPanelTitle",defaultMessage:"Mapping rules"}))),_react.default.createElement(_eui.EuiFlexGroup,{direction:"column"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"s",color:"subdued"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleMappingRulesFormRowHelpText",defaultMessage:"Assign roles to users who match these rules. {learnMoreLink}",values:{learnMoreLink:_react.default.createElement(_eui.EuiLink,{href:this.props.docLinks.getRoleMappingFieldRulesDocUrl(),target:"_blank",external:true},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.fieldRuleEditor.fieldValueHelp",defaultMessage:"Learn about supported field values."}))}})))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,isInvalid:validationResult&&validationResult.isInvalid},_react.default.createElement(_eui.EuiErrorBoundary,null,_react.default.createElement(_react.Fragment,null,validationWarning,this.getEditor(),_react.default.createElement(_eui.EuiSpacer,{size:"xl"}),this.getModeToggle(),this.getConfirmModeChangePrompt()))))))}},{key:"getModeToggle",value:function getModeToggle(){var _this2=this;if(this.state.mode==="json"&&this.state.maxDepth>_role_mapping_constants.VISUAL_MAX_RULE_DEPTH){return _react.default.createElement(_eui.EuiCallOut,{size:"s",title:_i18n.i18n.translate("xpack.security.management.editRoleMapping.visualEditorUnavailableTitle",{defaultMessage:"Visual editor unavailable"})},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.visualEditorUnavailableMessage",defaultMessage:"Rule definition is too complex for the visual editor."}))}if(this.state.mode==="visual"&&this.state.rules===null){return null}switch(this.state.mode){case"visual":return _react.default.createElement(_eui.EuiLink,{"data-test-subj":"roleMappingsJSONRuleEditorButton",onClick:function onClick(){_this2.trySwitchEditorMode("json")}},_react.default.createElement(_react.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.switchToJSONEditorLink",defaultMessage:"Switch to JSON editor"})," ",_react.default.createElement(_eui.EuiIcon,{type:"inputOutput",size:"s"})));case"json":return _react.default.createElement(_eui.EuiLink,{"data-test-subj":"roleMappingsVisualRuleEditorButton",onClick:function onClick(){_this2.trySwitchEditorMode("visual")}},_react.default.createElement(_react.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.switchToVisualEditorLink",defaultMessage:"Switch to visual editor"})," ",_react.default.createElement(_eui.EuiIcon,{type:"inputOutput",size:"s"})));default:throw new Error("Unexpected rule editor mode: ".concat(this.state.mode))}}},{key:"getEditor",value:function getEditor(){var _this3=this;switch(this.state.mode){case"visual":return _react.default.createElement(_visual_rule_editor.VisualRuleEditor,{rules:this.state.rules,maxDepth:this.state.maxDepth,onChange:this.onRuleChange,onSwitchEditorMode:function onSwitchEditorMode(){return _this3.trySwitchEditorMode("json")}});case"json":return _react.default.createElement(_json_rule_editor.JSONRuleEditor,{rules:this.state.rules,onChange:this.onRuleChange,onValidityChange:this.onValidityChange,docLinks:this.props.docLinks});default:throw new Error("Unexpected rule editor mode: ".concat(this.state.mode))}}}]);return RuleEditorPanel}(_react.Component);exports.RuleEditorPanel=RuleEditorPanel},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.VisualRuleEditor=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);var _field_rule_editor=__webpack_require__(77);var _rule_group_editor=__webpack_require__(332);var _role_mapping_constants=__webpack_require__(82);var _model=__webpack_require__(8);var _is_rule_group=__webpack_require__(81);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VisualRuleEditor=function(_Component){_inherits(VisualRuleEditor,_Component);function VisualRuleEditor(){var _getPrototypeOf2;var _this;_classCallCheck(this,VisualRuleEditor);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(VisualRuleEditor)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"canUseVisualEditor",(function(){return _this.props.maxDepth<_role_mapping_constants.VISUAL_MAX_RULE_DEPTH}));_defineProperty(_assertThisInitialized(_this),"getRuleDepthWarning",(function(){if(_this.canUseVisualEditor()){return null}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiCallOut,{iconType:"alert",title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.visualRuleEditor.switchToJSONEditorTitle",defaultMessage:"Switch to JSON editor"}),"data-test-subj":"roleMappingsRulesTooComplex"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.visualRuleEditor.switchToJSONEditorMessage",defaultMessage:"Role mapping rules are too complex for the visual editor. Switch to the JSON editor to continue editing this rule."})),_react.default.createElement(_eui.EuiButton,{onClick:_this.props.onSwitchEditorMode,size:"s"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.visualRuleEditor.switchToJSONEditorButton",defaultMessage:"Use JSON editor"}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}))}));_defineProperty(_assertThisInitialized(_this),"onRuleChange",(function(updatedRule){_this.props.onChange(updatedRule)}));_defineProperty(_assertThisInitialized(_this),"onRuleDelete",(function(){_this.props.onChange(null)}));_defineProperty(_assertThisInitialized(_this),"renderRule",(function(rule,onChange){return _this.getEditorForRuleType(rule,onChange)}));return _this}_createClass(VisualRuleEditor,[{key:"render",value:function render(){var _this2=this;if(this.props.rules){var _rules=this.renderRule(this.props.rules,this.onRuleChange);return _react.default.createElement(_react.Fragment,null,this.getRuleDepthWarning(),_rules)}return _react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement("h3",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.visualRuleEditor.noRulesDefinedTitle",defaultMessage:"No rules defined"})),titleSize:"s",body:_react.default.createElement("div",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.visualRuleEditor.noRulesDefinedMessage",defaultMessage:"Rules control which users should be assigned roles."})),"data-test-subj":"roleMappingsNoRulesDefined",actions:_react.default.createElement(_eui.EuiButton,{color:"primary",iconType:"plusInCircle","data-test-subj":"roleMappingsAddRuleButton",onClick:function onClick(){_this2.props.onChange(new _model.AllRule([new _model.FieldRule("username","*")]))}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.addFirstRuleButton",defaultMessage:"Add rules"}))})}},{key:"getEditorForRuleType",value:function getEditorForRuleType(rule,_onChange){if((0,_is_rule_group.isRuleGroup)(rule)){return _react.default.createElement(_rule_group_editor.RuleGroupEditor,{rule:rule,ruleDepth:0,allowAdd:this.canUseVisualEditor(),onChange:function onChange(value){return _onChange(value)},onDelete:this.onRuleDelete})}return _react.default.createElement(_field_rule_editor.FieldRuleEditor,{rule:rule,onChange:function onChange(value){return _onChange(value)},onDelete:this.onRuleDelete})}}]);return VisualRuleEditor}(_react.Component);exports.VisualRuleEditor=VisualRuleEditor},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.generateRulesFromRaw=generateRulesFromRaw;var _i18n=__webpack_require__(3);var _field_rule=__webpack_require__(80);var _all_rule=__webpack_require__(78);var _any_rule=__webpack_require__(79);var _except_all_rule=__webpack_require__(21);var _except_any_rule=__webpack_require__(34);var _=__webpack_require__(8);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function generateRulesFromRaw(){var rawRules=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return parseRawRules(rawRules,null,[],0)}function parseRawRules(rawRules,parentRuleType,ruleTrace,depth){var entries=Object.entries(rawRules);if(!entries.length){return{rules:null,maxDepth:0}}if(entries.length>1){throw new _.RuleBuilderError(_i18n.i18n.translate("xpack.security.management.editRoleMapping.ruleBuilder.expectSingleRule",{defaultMessage:"Expected a single rule definition, but found {numberOfRules}.",values:{numberOfRules:entries.length}}),ruleTrace)}var rule=entries[0];var _rule=_slicedToArray(rule,2),ruleType=_rule[0],ruleDefinition=_rule[1];return createRuleForType(ruleType,ruleDefinition,parentRuleType,ruleTrace,depth+1)}function createRuleForType(ruleType,ruleDefinition,parentRuleType){var ruleTrace=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];var depth=arguments.length>4?arguments[4]:undefined;var isRuleNegated=parentRuleType==="except";var currentRuleTrace=[].concat(_toConsumableArray(ruleTrace),[ruleType]);switch(ruleType){case"field":{assertIsObject(ruleDefinition,currentRuleTrace);var entries=Object.entries(ruleDefinition);if(entries.length!==1){throw new _.RuleBuilderError(_i18n.i18n.translate("xpack.security.management.editRoleMapping.ruleBuilder.expectedSingleFieldRule",{defaultMessage:"Expected a single field, but found {count}.",values:{count:entries.length}}),currentRuleTrace)}var _ref=entries[0],_ref2=_slicedToArray(_ref,2),field=_ref2[0],value=_ref2[1];var values=Array.isArray(value)?value:[value];values.forEach((function(fieldValue){var valueType=_typeof(fieldValue);if(fieldValue!==null&&!["string","number","boolean"].includes(valueType)){throw new _.RuleBuilderError(_i18n.i18n.translate("xpack.security.management.editRoleMapping.ruleBuilder.invalidFieldValueType",{defaultMessage:"Invalid value type for field. Expected one of null, string, number, or boolean, but found {valueType} ({value}).",values:{valueType:valueType,value:JSON.stringify(value)}}),currentRuleTrace)}}));var fieldRule=new _field_rule.FieldRule(field,value);return{rules:isRuleNegated?new _except_all_rule.ExceptAllRule([fieldRule]):fieldRule,maxDepth:depth}}case"any":case"all":{if(ruleDefinition!=null&&!Array.isArray(ruleDefinition)){throw new _.RuleBuilderError(_i18n.i18n.translate("xpack.security.management.editRoleMapping.ruleBuilder.expectedArrayForGroupRule",{defaultMessage:"Expected an array of rules, but found {type}.",values:{type:_typeof(ruleDefinition)}}),currentRuleTrace)}var subRulesResults=(ruleDefinition||[]).map((function(definition,index){return parseRawRules(definition,ruleType,[].concat(_toConsumableArray(currentRuleTrace),["[".concat(index,"]")]),depth)}));var _subRulesResults$redu=subRulesResults.reduce((function(acc,result){return{subRules:[].concat(_toConsumableArray(acc.subRules),[result.rules]),maxDepth:Math.max(acc.maxDepth,result.maxDepth)}}),{subRules:[],maxDepth:0}),subRules=_subRulesResults$redu.subRules,maxDepth=_subRulesResults$redu.maxDepth;if(ruleType==="all"){return{rules:isRuleNegated?new _except_all_rule.ExceptAllRule(subRules):new _all_rule.AllRule(subRules),maxDepth:maxDepth}}else{return{rules:isRuleNegated?new _except_any_rule.ExceptAnyRule(subRules):new _any_rule.AnyRule(subRules),maxDepth:maxDepth}}}case"except":{assertIsObject(ruleDefinition,currentRuleTrace);if(parentRuleType!=="all"){throw new _.RuleBuilderError(_i18n.i18n.translate("xpack.security.management.editRoleMapping.ruleBuilder.exceptOnlyInAllRule",{defaultMessage:'"except" rule can only exist within an "all" rule.'}),currentRuleTrace)}return parseRawRules(ruleDefinition||{},ruleType,currentRuleTrace,depth-1)}default:throw new _.RuleBuilderError(_i18n.i18n.translate("xpack.security.management.editRoleMapping.ruleBuilder.unknownRuleType",{defaultMessage:"Unknown rule type: {ruleType}.",values:{ruleType:ruleType}}),currentRuleTrace)}}function assertIsObject(ruleDefinition,ruleTrace){var fieldType=_typeof(ruleDefinition);if(Array.isArray(ruleDefinition)){fieldType="array"}if(ruleDefinition&&fieldType!=="object"){throw new _.RuleBuilderError(_i18n.i18n.translate("xpack.security.management.editRoleMapping.ruleBuilder.expectedObjectError",{defaultMessage:"Expected an object, but found {type}.",values:{type:fieldType}}),ruleTrace)}}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RuleBuilderError=void 0;function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var RuleBuilderError=function(_Error){_inherits(RuleBuilderError,_Error);function RuleBuilderError(message,ruleTrace){var _this;_classCallCheck(this,RuleBuilderError);_this=_possibleConstructorReturn(this,_getPrototypeOf(RuleBuilderError).call(this,message));_this.ruleTrace=ruleTrace;Object.setPrototypeOf(_assertThisInitialized(_this),RuleBuilderError.prototype);return _this}return RuleBuilderError}(_wrapNativeSuper(Error));exports.RuleBuilderError=RuleBuilderError},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RuleGroupEditor=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);var _add_rule_button=__webpack_require__(333);var _rule_group_title=__webpack_require__(334);var _field_rule_editor=__webpack_require__(77);var _is_rule_group=__webpack_require__(81);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RuleGroupEditor=function(_Component){_inherits(RuleGroupEditor,_Component);function RuleGroupEditor(){var _getPrototypeOf2;var _this;_classCallCheck(this,RuleGroupEditor);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RuleGroupEditor)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"renderSubRules",(function(){return _this.props.rule.getRules().map((function(subRule,subRuleIndex,rules){var isLastRule=subRuleIndex===rules.length-1;var divider=isLastRule?null:_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiHorizontalRule,{margin:"m"}));if((0,_is_rule_group.isRuleGroup)(subRule)){return _react.default.createElement(_react.Fragment,{key:subRuleIndex},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(RuleGroupEditor,{rule:subRule,parentRule:_this.props.rule,allowAdd:_this.props.allowAdd,ruleDepth:_this.props.ruleDepth+1,onChange:function onChange(updatedSubRule){var updatedRule=_this.props.rule.clone();updatedRule.replaceRule(subRuleIndex,updatedSubRule);_this.props.onChange(updatedRule)},onDelete:function onDelete(){var updatedRule=_this.props.rule.clone();updatedRule.removeRule(subRuleIndex);_this.props.onChange(updatedRule)}})),divider)}return _react.default.createElement(_react.Fragment,{key:subRuleIndex},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_field_rule_editor.FieldRuleEditor,{rule:subRule,onChange:function onChange(updatedSubRule){var updatedRule=_this.props.rule.clone();updatedRule.replaceRule(subRuleIndex,updatedSubRule);_this.props.onChange(updatedRule)},onDelete:function onDelete(){var updatedRule=_this.props.rule.clone();updatedRule.removeRule(subRuleIndex);_this.props.onChange(updatedRule)}})),divider)}))}));_defineProperty(_assertThisInitialized(_this),"onAddRuleClick",(function(newRule){var updatedRule=_this.props.rule.clone();updatedRule.addRule(newRule);_this.props.onChange(updatedRule)}));return _this}_createClass(RuleGroupEditor,[{key:"render",value:function render(){return _react.default.createElement(_eui.EuiPanel,{className:"secRoleMapping__ruleEditorGroup--".concat(this.props.ruleDepth%2?"odd":"even")},_react.default.createElement(_eui.EuiFlexGroup,{direction:"column"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_rule_group_title.RuleGroupTitle,{rule:this.props.rule,onChange:this.props.onChange,parentRule:this.props.parentRule})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{color:"danger",onClick:this.props.onDelete,size:"s",iconType:"trash","data-test-subj":"deleteRuleGroupButton"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.deleteRuleGroupButton",defaultMessage:"Delete"}))))),this.renderSubRules(),this.props.allowAdd&&_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_add_rule_button.AddRuleButton,{onClick:this.onAddRuleClick}))))}}]);return RuleGroupEditor}(_react.Component);exports.RuleGroupEditor=RuleGroupEditor},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AddRuleButton=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);var _model=__webpack_require__(8);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var AddRuleButton=function AddRuleButton(props){var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isMenuOpen=_useState2[0],setIsMenuOpen=_useState2[1];var button=_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"plusInCircle","data-test-subj":"roleMappingsAddRuleButton",onClick:function onClick(){setIsMenuOpen(!isMenuOpen)}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.addRuleButton",defaultMessage:"Add"}));var options=[_react.default.createElement(_eui.EuiContextMenuItem,{id:"addRuleOption",key:"rule",name:"Add rule",icon:"user",onClick:function onClick(){setIsMenuOpen(false);props.onClick(new _model.FieldRule("username","*"))}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.addRuleOption",defaultMessage:"Add rule"})),_react.default.createElement(_eui.EuiContextMenuItem,{id:"addRuleGroupOption",key:"ruleGroup",name:"Add rule group",icon:"list",onClick:function onClick(){setIsMenuOpen(false);props.onClick(new _model.AllRule([new _model.FieldRule("username","*")]))}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.addRuleGroupOption",defaultMessage:"Add rule group"}))];return _react.default.createElement(_eui.EuiPopover,{id:"addRuleContextMenu","data-test-subj":"addRuleContextMenu",button:button,isOpen:isMenuOpen,closePopover:function closePopover(){return setIsMenuOpen(false)},panelPaddingSize:"none",withTitle:true,anchorPosition:"downLeft"},_react.default.createElement(_eui.EuiContextMenuPanel,{title:"Add rule",items:options}))};exports.AddRuleButton=AddRuleButton},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RuleGroupTitle=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);var _model=__webpack_require__(8);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var rules=[new _model.AllRule,new _model.AnyRule];var exceptRules=[new _model.ExceptAllRule,new _model.ExceptAnyRule];var RuleGroupTitle=function RuleGroupTitle(props){var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isMenuOpen=_useState2[0],setIsMenuOpen=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),showConfirmChangeModal=_useState4[0],setShowConfirmChangeModal=_useState4[1];var _useState5=(0,_react.useState)(null),_useState6=_slicedToArray(_useState5,2),pendingNewRule=_useState6[0],setPendingNewRule=_useState6[1];var canUseExcept=props.parentRule&&props.parentRule.canContainRules(exceptRules);var availableRuleTypes=[].concat(rules,_toConsumableArray(canUseExcept?exceptRules:[]));var onChange=function onChange(newRule){var currentSubRules=props.rule.getRules();var areSubRulesValid=newRule.canContainRules(currentSubRules);if(areSubRulesValid){var clone=newRule.clone();currentSubRules.forEach((function(subRule){return clone.addRule(subRule)}));props.onChange(clone);setIsMenuOpen(false)}else{setPendingNewRule(newRule);setShowConfirmChangeModal(true)}};var changeRuleDiscardingSubRules=function changeRuleDiscardingSubRules(newRule){var newRuleInstance=newRule.clone();if(newRuleInstance.getRules().length===0){newRuleInstance.addRule(new _model.FieldRule("username","*"))}props.onChange(newRuleInstance);setIsMenuOpen(false)};var ruleButton=_react.default.createElement(_eui.EuiLink,{onClick:function onClick(){return setIsMenuOpen(!isMenuOpen)},"data-test-subj":"ruleGroupTitle"},props.rule.getDisplayTitle()," ",_react.default.createElement(_eui.EuiIcon,{type:"arrowDown"}));var ruleTypeSelector=_react.default.createElement(_eui.EuiPopover,{button:ruleButton,isOpen:isMenuOpen,closePopover:function closePopover(){return setIsMenuOpen(false)}},_react.default.createElement(_eui.EuiContextMenuPanel,{items:availableRuleTypes.map((function(rt,index){var isSelected=rt.getDisplayTitle()===props.rule.getDisplayTitle();var icon=isSelected?"check":"empty";return _react.default.createElement(_eui.EuiContextMenuItem,{key:index,icon:icon,onClick:function onClick(){return onChange(rt)}},rt.getDisplayTitle())}))}));var confirmChangeModal=showConfirmChangeModal?_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{"data-test-subj":"confirmRuleChangeModal",title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.confirmGroupChangePromptTitle",defaultMessage:"Change group type?"}),onCancel:function onCancel(){setShowConfirmChangeModal(false);setPendingNewRule(null)},onConfirm:function onConfirm(){setShowConfirmChangeModal(false);changeRuleDiscardingSubRules(pendingNewRule);setPendingNewRule(null)},cancelButtonText:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.confirmGroupChangeCancelButton",defaultMessage:"Cancel"}),confirmButtonText:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.confirmGroupChangeConfirmButton",defaultMessage:"Change anyway"})},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.switchWithIncompatibleRulesMessage",defaultMessage:"This group contains rules that are not compatible with the new type. If you change types, you will lose all rules within this group."})))):null;return _react.default.createElement("h3",null,ruleTypeSelector,confirmChangeModal)};exports.RuleGroupTitle=RuleGroupTitle},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JSONRuleEditor=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));__webpack_require__(336);__webpack_require__(338);var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);var _i18n=__webpack_require__(3);var _model=__webpack_require__(8);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var JSONRuleEditor=function JSONRuleEditor(props){var _useState=(0,_react.useState)(JSON.stringify(props.rules?props.rules.toRaw():{},null,2)),_useState2=_slicedToArray(_useState,2),rawRules=_useState2[0],setRawRules=_useState2[1];var _useState3=(0,_react.useState)(null),_useState4=_slicedToArray(_useState3,2),ruleBuilderError=_useState4[0],setRuleBuilderError=_useState4[1];function onRulesChange(updatedRules){setRawRules(updatedRules);try{var ruleJSON=JSON.parse(updatedRules);props.onChange((0,_model.generateRulesFromRaw)(ruleJSON).rules);props.onValidityChange(true);setRuleBuilderError(null)}catch(e){if(e instanceof _model.RuleBuilderError){setRuleBuilderError(e)}else{setRuleBuilderError(null)}props.onValidityChange(false)}}function reformatRules(){try{var ruleJSON=JSON.parse(rawRules);setRawRules(JSON.stringify(ruleJSON,null,2))}catch(ignore){}}return _react.default.createElement(_eui.EuiFormRow,{isInvalid:Boolean(ruleBuilderError),error:ruleBuilderError&&_i18n.i18n.translate("xpack.security.management.editRoleMapping.JSONEditorRuleError",{defaultMessage:"Invalid rule definition at {ruleLocation}: {errorMessage}",values:{ruleLocation:ruleBuilderError.ruleTrace.join("."),errorMessage:ruleBuilderError.message}}),fullWidth:true,"data-test-subj":"roleMappingsJSONEditor"},_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiCodeEditor,{"aria-label":"",mode:"json",theme:"github",value:rawRules,onChange:onRulesChange,width:"100%",height:"auto",minLines:6,maxLines:30,isReadOnly:false,setOptions:{showLineNumbers:true,tabSize:2},editorProps:{$blockScrolling:Infinity},showGutter:true}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiButton,{iconType:"broom",onClick:reformatRules,size:"s"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.autoFormatRuleText",defaultMessage:"Reformat"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiText,{size:"s"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.JSONEditorHelpText",defaultMessage:"Specify your rules in JSON format consistent with the {roleMappingAPI}",values:{roleMappingAPI:_react.default.createElement(_eui.EuiLink,{href:props.docLinks.getRoleMappingAPIDocUrl(),external:true,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.JSONEditorEsApi",defaultMessage:"Elasticsearch role mapping API."}))}})))))};exports.JSONRuleEditor=JSONRuleEditor},function(module,exports,__webpack_require__){ace.define("ace/mode/json_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(acequire,exports,module){"use strict";var oop=acequire("../lib/oop");var TextHighlightRules=acequire("./text_highlight_rules").TextHighlightRules;var JsonHighlightRules=function(){this.$rules={start:[{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"string",regex:'"',next:"string"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"text",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"comment",regex:"\\/\\/.*$"},{token:"comment.start",regex:"\\/\\*",next:"comment"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],string:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\\\/bfnrt])/},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],comment:[{token:"comment.end",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]}};oop.inherits(JsonHighlightRules,TextHighlightRules);exports.JsonHighlightRules=JsonHighlightRules}));ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],(function(acequire,exports,module){"use strict";var Range=acequire("../range").Range;var MatchingBraceOutdent=function(){};(function(){this.checkOutdent=function(line,input){if(!/^\s+$/.test(line))return false;return/^\s*\}/.test(input)};this.autoOutdent=function(doc,row){var line=doc.getLine(row);var match=line.match(/^(\s*\})/);if(!match)return 0;var column=match[1].length;var openBracePos=doc.findMatchingBracket({row:row,column:column});if(!openBracePos||openBracePos.row==row)return 0;var indent=this.$getIndent(doc.getLine(openBracePos.row));doc.replace(new Range(row,0,row,column-1),indent)};this.$getIndent=function(line){return line.match(/^\s*/)[0]}}).call(MatchingBraceOutdent.prototype);exports.MatchingBraceOutdent=MatchingBraceOutdent}));ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(acequire,exports,module){"use strict";var oop=acequire("../../lib/oop");var Range=acequire("../../range").Range;var BaseFoldMode=acequire("./fold_mode").FoldMode;var FoldMode=exports.FoldMode=function(commentRegex){if(commentRegex){this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+commentRegex.start));this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+commentRegex.end))}};oop.inherits(FoldMode,BaseFoldMode);(function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/;this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/;this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/;this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/;this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/;this._getFoldWidgetBase=this.getFoldWidget;this.getFoldWidget=function(session,foldStyle,row){var line=session.getLine(row);if(this.singleLineBlockCommentRe.test(line)){if(!this.startRegionRe.test(line)&&!this.tripleStarBlockCommentRe.test(line))return""}var fw=this._getFoldWidgetBase(session,foldStyle,row);if(!fw&&this.startRegionRe.test(line))return"start";return fw};this.getFoldWidgetRange=function(session,foldStyle,row,forceMultiline){var line=session.getLine(row);if(this.startRegionRe.test(line))return this.getCommentRegionBlock(session,line,row);var match=line.match(this.foldingStartMarker);if(match){var i=match.index;if(match[1])return this.openingBracketBlock(session,match[1],row,i);var range=session.getCommentFoldRange(row,i+match[0].length,1);if(range&&!range.isMultiLine()){if(forceMultiline){range=this.getSectionRange(session,row)}else if(foldStyle!="all")range=null}return range}if(foldStyle==="markbegin")return;var match=line.match(this.foldingStopMarker);if(match){var i=match.index+match[0].length;if(match[1])return this.closingBracketBlock(session,match[1],row,i);return session.getCommentFoldRange(row,i,-1)}};this.getSectionRange=function(session,row){var line=session.getLine(row);var startIndent=line.search(/\S/);var startRow=row;var startColumn=line.length;row=row+1;var endRow=row;var maxRow=session.getLength();while(++row<maxRow){line=session.getLine(row);var indent=line.search(/\S/);if(indent===-1)continue;if(startIndent>indent)break;var subRange=this.getFoldWidgetRange(session,"all",row);if(subRange){if(subRange.start.row<=startRow){break}else if(subRange.isMultiLine()){row=subRange.end.row}else if(startIndent==indent){break}}endRow=row}return new Range(startRow,startColumn,endRow,session.getLine(endRow).length)};this.getCommentRegionBlock=function(session,line,row){var startColumn=line.search(/\s*$/);var maxRow=session.getLength();var startRow=row;var re=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/;var depth=1;while(++row<maxRow){line=session.getLine(row);var m=re.exec(line);if(!m)continue;if(m[1])depth--;else depth++;if(!depth)break}var endRow=row;if(endRow>startRow){return new Range(startRow,startColumn,endRow,line.length)}}}).call(FoldMode.prototype)}));ace.define("ace/mode/json",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/json_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle","ace/worker/worker_client"],(function(acequire,exports,module){"use strict";var oop=acequire("../lib/oop");var TextMode=acequire("./text").Mode;var HighlightRules=acequire("./json_highlight_rules").JsonHighlightRules;var MatchingBraceOutdent=acequire("./matching_brace_outdent").MatchingBraceOutdent;var CstyleBehaviour=acequire("./behaviour/cstyle").CstyleBehaviour;var CStyleFoldMode=acequire("./folding/cstyle").FoldMode;var WorkerClient=acequire("../worker/worker_client").WorkerClient;var Mode=function(){this.HighlightRules=HighlightRules;this.$outdent=new MatchingBraceOutdent;this.$behaviour=new CstyleBehaviour;this.foldingRules=new CStyleFoldMode};oop.inherits(Mode,TextMode);(function(){this.getNextLineIndent=function(state,line,tab){var indent=this.$getIndent(line);if(state=="start"){var match=line.match(/^.*[\{\(\[]\s*$/);if(match){indent+=tab}}return indent};this.checkOutdent=function(state,line,input){return this.$outdent.checkOutdent(line,input)};this.autoOutdent=function(state,doc,row){this.$outdent.autoOutdent(doc,row)};this.createWorker=function(session){var worker=new WorkerClient(["ace"],__webpack_require__(337),"JsonWorker");worker.attachToDocument(session.getDocument());worker.on("annotate",(function(e){session.setAnnotations(e.data)}));worker.on("terminate",(function(){session.clearAnnotations()}));return worker};this.$id="ace/mode/json"}).call(Mode.prototype);exports.Mode=Mode}))},function(module,exports){module.exports.id="ace/mode/json_worker";module.exports.src='"no use strict";!function(window){function resolveModuleId(id,paths){for(var testPath=id,tail="";testPath;){var alias=paths[testPath];if("string"==typeof alias)return alias+tail;if(alias)return alias.location.replace(/\\/*$/,"/")+(tail||alias.main||alias.name);if(alias===!1)return"";var i=testPath.lastIndexOf("/");if(-1===i)break;tail=testPath.substr(i)+tail,testPath=testPath.slice(0,i)}return id}if(!(void 0!==window.window&&window.document||window.acequire&&window.define)){window.console||(window.console=function(){var msgs=Array.prototype.slice.call(arguments,0);postMessage({type:"log",data:msgs})},window.console.error=window.console.warn=window.console.log=window.console.trace=window.console),window.window=window,window.ace=window,window.onerror=function(message,file,line,col,err){postMessage({type:"error",data:{message:message,data:err.data,file:file,line:line,col:col,stack:err.stack}})},window.normalizeModule=function(parentId,moduleName){if(-1!==moduleName.indexOf("!")){var chunks=moduleName.split("!");return window.normalizeModule(parentId,chunks[0])+"!"+window.normalizeModule(parentId,chunks[1])}if("."==moduleName.charAt(0)){var base=parentId.split("/").slice(0,-1).join("/");for(moduleName=(base?base+"/":"")+moduleName;-1!==moduleName.indexOf(".")&&previous!=moduleName;){var previous=moduleName;moduleName=moduleName.replace(/^\\.\\//,"").replace(/\\/\\.\\//,"/").replace(/[^\\/]+\\/\\.\\.\\//,"")}}return moduleName},window.acequire=function acequire(parentId,id){if(id||(id=parentId,parentId=null),!id.charAt)throw Error("worker.js acequire() accepts only (parentId, id) as arguments");id=window.normalizeModule(parentId,id);var module=window.acequire.modules[id];if(module)return module.initialized||(module.initialized=!0,module.exports=module.factory().exports),module.exports;if(!window.acequire.tlns)return console.log("unable to load "+id);var path=resolveModuleId(id,window.acequire.tlns);return".js"!=path.slice(-3)&&(path+=".js"),window.acequire.id=id,window.acequire.modules[id]={},importScripts(path),window.acequire(parentId,id)},window.acequire.modules={},window.acequire.tlns={},window.define=function(id,deps,factory){if(2==arguments.length?(factory=deps,"string"!=typeof id&&(deps=id,id=window.acequire.id)):1==arguments.length&&(factory=id,deps=[],id=window.acequire.id),"function"!=typeof factory)return window.acequire.modules[id]={exports:factory,initialized:!0},void 0;deps.length||(deps=["require","exports","module"]);var req=function(childId){return window.acequire(id,childId)};window.acequire.modules[id]={exports:{},factory:function(){var module=this,returnExports=factory.apply(this,deps.map(function(dep){switch(dep){case"require":return req;case"exports":return module.exports;case"module":return module;default:return req(dep)}}));return returnExports&&(module.exports=returnExports),module}}},window.define.amd={},acequire.tlns={},window.initBaseUrls=function(topLevelNamespaces){for(var i in topLevelNamespaces)acequire.tlns[i]=topLevelNamespaces[i]},window.initSender=function(){var EventEmitter=window.acequire("ace/lib/event_emitter").EventEmitter,oop=window.acequire("ace/lib/oop"),Sender=function(){};return function(){oop.implement(this,EventEmitter),this.callback=function(data,callbackId){postMessage({type:"call",id:callbackId,data:data})},this.emit=function(name,data){postMessage({type:"event",name:name,data:data})}}.call(Sender.prototype),new Sender};var main=window.main=null,sender=window.sender=null;window.onmessage=function(e){var msg=e.data;if(msg.event&&sender)sender._signal(msg.event,msg.data);else if(msg.command)if(main[msg.command])main[msg.command].apply(main,msg.args);else{if(!window[msg.command])throw Error("Unknown command:"+msg.command);window[msg.command].apply(window,msg.args)}else if(msg.init){window.initBaseUrls(msg.tlns),acequire("ace/lib/es5-shim"),sender=window.sender=window.initSender();var clazz=acequire(msg.module)[msg.classname];main=window.main=new clazz(sender)}}}}(this),ace.define("ace/lib/oop",["require","exports","module"],function(acequire,exports){"use strict";exports.inherits=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})},exports.mixin=function(obj,mixin){for(var key in mixin)obj[key]=mixin[key];return obj},exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}}),ace.define("ace/range",["require","exports","module"],function(acequire,exports){"use strict";var comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},Range=function(startRow,startColumn,endRow,endColumn){this.start={row:startRow,column:startColumn},this.end={row:endRow,column:endColumn}};(function(){this.isEqual=function(range){return this.start.row===range.start.row&&this.end.row===range.end.row&&this.start.column===range.start.column&&this.end.column===range.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(row,column){return 0==this.compare(row,column)},this.compareRange=function(range){var cmp,end=range.end,start=range.start;return cmp=this.compare(end.row,end.column),1==cmp?(cmp=this.compare(start.row,start.column),1==cmp?2:0==cmp?1:0):-1==cmp?-2:(cmp=this.compare(start.row,start.column),-1==cmp?-1:1==cmp?42:0)},this.comparePoint=function(p){return this.compare(p.row,p.column)},this.containsRange=function(range){return 0==this.comparePoint(range.start)&&0==this.comparePoint(range.end)},this.intersects=function(range){var cmp=this.compareRange(range);return-1==cmp||0==cmp||1==cmp},this.isEnd=function(row,column){return this.end.row==row&&this.end.column==column},this.isStart=function(row,column){return this.start.row==row&&this.start.column==column},this.setStart=function(row,column){"object"==typeof row?(this.start.column=row.column,this.start.row=row.row):(this.start.row=row,this.start.column=column)},this.setEnd=function(row,column){"object"==typeof row?(this.end.column=row.column,this.end.row=row.row):(this.end.row=row,this.end.column=column)},this.inside=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)||this.isStart(row,column)?!1:!0:!1},this.insideStart=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)?!1:!0:!1},this.insideEnd=function(row,column){return 0==this.compare(row,column)?this.isStart(row,column)?!1:!0:!1},this.compare=function(row,column){return this.isMultiLine()||row!==this.start.row?this.start.row>row?-1:row>this.end.row?1:this.start.row===row?column>=this.start.column?0:-1:this.end.row===row?this.end.column>=column?0:1:0:this.start.column>column?-1:column>this.end.column?1:0},this.compareStart=function(row,column){return this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.compareEnd=function(row,column){return this.end.row==row&&this.end.column==column?1:this.compare(row,column)},this.compareInside=function(row,column){return this.end.row==row&&this.end.column==column?1:this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.clipRows=function(firstRow,lastRow){if(this.end.row>lastRow)var end={row:lastRow+1,column:0};else if(firstRow>this.end.row)var end={row:firstRow,column:0};if(this.start.row>lastRow)var start={row:lastRow+1,column:0};else if(firstRow>this.start.row)var start={row:firstRow,column:0};return Range.fromPoints(start||this.start,end||this.end)},this.extend=function(row,column){var cmp=this.compare(row,column);if(0==cmp)return this;if(-1==cmp)var start={row:row,column:column};else var end={row:row,column:column};return Range.fromPoints(start||this.start,end||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return Range.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new Range(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new Range(this.start.row,0,this.end.row,0)},this.toScreenRange=function(session){var screenPosStart=session.documentToScreenPosition(this.start),screenPosEnd=session.documentToScreenPosition(this.end);return new Range(screenPosStart.row,screenPosStart.column,screenPosEnd.row,screenPosEnd.column)},this.moveBy=function(row,column){this.start.row+=row,this.start.column+=column,this.end.row+=row,this.end.column+=column}}).call(Range.prototype),Range.fromPoints=function(start,end){return new Range(start.row,start.column,end.row,end.column)},Range.comparePoints=comparePoints,Range.comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},exports.Range=Range}),ace.define("ace/apply_delta",["require","exports","module"],function(acequire,exports){"use strict";exports.applyDelta=function(docLines,delta){var row=delta.start.row,startColumn=delta.start.column,line=docLines[row]||"";switch(delta.action){case"insert":var lines=delta.lines;if(1===lines.length)docLines[row]=line.substring(0,startColumn)+delta.lines[0]+line.substring(startColumn);else{var args=[row,1].concat(delta.lines);docLines.splice.apply(docLines,args),docLines[row]=line.substring(0,startColumn)+docLines[row],docLines[row+delta.lines.length-1]+=line.substring(startColumn)}break;case"remove":var endColumn=delta.end.column,endRow=delta.end.row;row===endRow?docLines[row]=line.substring(0,startColumn)+line.substring(endColumn):docLines.splice(row,endRow-row+1,line.substring(0,startColumn)+docLines[endRow].substring(endColumn))}}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(acequire,exports){"use strict";var EventEmitter={},stopPropagation=function(){this.propagationStopped=!0},preventDefault=function(){this.defaultPrevented=!0};EventEmitter._emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var listeners=this._eventRegistry[eventName]||[],defaultHandler=this._defaultHandlers[eventName];if(listeners.length||defaultHandler){"object"==typeof e&&e||(e={}),e.type||(e.type=eventName),e.stopPropagation||(e.stopPropagation=stopPropagation),e.preventDefault||(e.preventDefault=preventDefault),listeners=listeners.slice();for(var i=0;listeners.length>i&&(listeners[i](e,this),!e.propagationStopped);i++);return defaultHandler&&!e.defaultPrevented?defaultHandler(e,this):void 0}},EventEmitter._signal=function(eventName,e){var listeners=(this._eventRegistry||{})[eventName];if(listeners){listeners=listeners.slice();for(var i=0;listeners.length>i;i++)listeners[i](e,this)}},EventEmitter.once=function(eventName,callback){var _self=this;callback&&this.addEventListener(eventName,function newCallback(){_self.removeEventListener(eventName,newCallback),callback.apply(null,arguments)})},EventEmitter.setDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers||(handlers=this._defaultHandlers={_disabled_:{}}),handlers[eventName]){var old=handlers[eventName],disabled=handlers._disabled_[eventName];disabled||(handlers._disabled_[eventName]=disabled=[]),disabled.push(old);var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}handlers[eventName]=callback},EventEmitter.removeDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers){var disabled=handlers._disabled_[eventName];if(handlers[eventName]==callback)handlers[eventName],disabled&&this.setDefaultHandler(eventName,disabled.pop());else if(disabled){var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}}},EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback,capturing){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];return listeners||(listeners=this._eventRegistry[eventName]=[]),-1==listeners.indexOf(callback)&&listeners[capturing?"unshift":"push"](callback),callback},EventEmitter.off=EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(listeners){var index=listeners.indexOf(callback);-1!==index&&listeners.splice(index,1)}},EventEmitter.removeAllListeners=function(eventName){this._eventRegistry&&(this._eventRegistry[eventName]=[])},exports.EventEmitter=EventEmitter}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(acequire,exports){"use strict";var oop=acequire("./lib/oop"),EventEmitter=acequire("./lib/event_emitter").EventEmitter,Anchor=exports.Anchor=function(doc,row,column){this.$onChange=this.onChange.bind(this),this.attach(doc),column===void 0?this.setPosition(row.row,row.column):this.setPosition(row,column)};(function(){function $pointsInOrder(point1,point2,equalPointsInOrder){var bColIsAfter=equalPointsInOrder?point1.column<=point2.column:point1.column<point2.column;return point1.row<point2.row||point1.row==point2.row&&bColIsAfter}function $getTransformedPoint(delta,point,moveIfEqual){var deltaIsInsert="insert"==delta.action,deltaRowShift=(deltaIsInsert?1:-1)*(delta.end.row-delta.start.row),deltaColShift=(deltaIsInsert?1:-1)*(delta.end.column-delta.start.column),deltaStart=delta.start,deltaEnd=deltaIsInsert?deltaStart:delta.end;return $pointsInOrder(point,deltaStart,moveIfEqual)?{row:point.row,column:point.column}:$pointsInOrder(deltaEnd,point,!moveIfEqual)?{row:point.row+deltaRowShift,column:point.column+(point.row==deltaEnd.row?deltaColShift:0)}:{row:deltaStart.row,column:deltaStart.column}}oop.implement(this,EventEmitter),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(delta){if(!(delta.start.row==delta.end.row&&delta.start.row!=this.row||delta.start.row>this.row)){var point=$getTransformedPoint(delta,{row:this.row,column:this.column},this.$insertRight);this.setPosition(point.row,point.column,!0)}},this.setPosition=function(row,column,noClip){var pos;if(pos=noClip?{row:row,column:column}:this.$clipPositionToDocument(row,column),this.row!=pos.row||this.column!=pos.column){var old={row:this.row,column:this.column};this.row=pos.row,this.column=pos.column,this._signal("change",{old:old,value:pos})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(doc){this.document=doc||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(row,column){var pos={};return row>=this.document.getLength()?(pos.row=Math.max(0,this.document.getLength()-1),pos.column=this.document.getLine(pos.row).length):0>row?(pos.row=0,pos.column=0):(pos.row=row,pos.column=Math.min(this.document.getLine(pos.row).length,Math.max(0,column))),0>column&&(pos.column=0),pos}}).call(Anchor.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(acequire,exports){"use strict";var oop=acequire("./lib/oop"),applyDelta=acequire("./apply_delta").applyDelta,EventEmitter=acequire("./lib/event_emitter").EventEmitter,Range=acequire("./range").Range,Anchor=acequire("./anchor").Anchor,Document=function(textOrLines){this.$lines=[""],0===textOrLines.length?this.$lines=[""]:Array.isArray(textOrLines)?this.insertMergedLines({row:0,column:0},textOrLines):this.insert({row:0,column:0},textOrLines)};(function(){oop.implement(this,EventEmitter),this.setValue=function(text){var len=this.getLength()-1;this.remove(new Range(0,0,len,this.getLine(len).length)),this.insert({row:0,column:0},text)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(row,column){return new Anchor(this,row,column)},this.$split=0==="aaa".split(/a/).length?function(text){return text.replace(/\\r\\n|\\r/g,"\\n").split("\\n")}:function(text){return text.split(/\\r\\n|\\r|\\n/)},this.$detectNewLine=function(text){var match=text.match(/^.*?(\\r\\n|\\r|\\n)/m);this.$autoNewLine=match?match[1]:"\\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\\r\\n";case"unix":return"\\n";default:return this.$autoNewLine||"\\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(newLineMode){this.$newLineMode!==newLineMode&&(this.$newLineMode=newLineMode,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(text){return"\\r\\n"==text||"\\r"==text||"\\n"==text},this.getLine=function(row){return this.$lines[row]||""},this.getLines=function(firstRow,lastRow){return this.$lines.slice(firstRow,lastRow+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(range){return this.getLinesForRange(range).join(this.getNewLineCharacter())},this.getLinesForRange=function(range){var lines;if(range.start.row===range.end.row)lines=[this.getLine(range.start.row).substring(range.start.column,range.end.column)];else{lines=this.getLines(range.start.row,range.end.row),lines[0]=(lines[0]||"").substring(range.start.column);var l=lines.length-1;range.end.row-range.start.row==l&&(lines[l]=lines[l].substring(0,range.end.column))}return lines},this.insertLines=function(row,lines){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(row,lines)},this.removeLines=function(firstRow,lastRow){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(firstRow,lastRow)},this.insertNewLine=function(position){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\'\', \'\']) instead."),this.insertMergedLines(position,["",""])},this.insert=function(position,text){return 1>=this.getLength()&&this.$detectNewLine(text),this.insertMergedLines(position,this.$split(text))},this.insertInLine=function(position,text){var start=this.clippedPos(position.row,position.column),end=this.pos(position.row,position.column+text.length);return this.applyDelta({start:start,end:end,action:"insert",lines:[text]},!0),this.clonePos(end)},this.clippedPos=function(row,column){var length=this.getLength();void 0===row?row=length:0>row?row=0:row>=length&&(row=length-1,column=void 0);var line=this.getLine(row);return void 0==column&&(column=line.length),column=Math.min(Math.max(column,0),line.length),{row:row,column:column}},this.clonePos=function(pos){return{row:pos.row,column:pos.column}},this.pos=function(row,column){return{row:row,column:column}},this.$clipPosition=function(position){var length=this.getLength();return position.row>=length?(position.row=Math.max(0,length-1),position.column=this.getLine(length-1).length):(position.row=Math.max(0,position.row),position.column=Math.min(Math.max(position.column,0),this.getLine(position.row).length)),position},this.insertFullLines=function(row,lines){row=Math.min(Math.max(row,0),this.getLength());var column=0;this.getLength()>row?(lines=lines.concat([""]),column=0):(lines=[""].concat(lines),row--,column=this.$lines[row].length),this.insertMergedLines({row:row,column:column},lines)},this.insertMergedLines=function(position,lines){var start=this.clippedPos(position.row,position.column),end={row:start.row+lines.length-1,column:(1==lines.length?start.column:0)+lines[lines.length-1].length};return this.applyDelta({start:start,end:end,action:"insert",lines:lines}),this.clonePos(end)},this.remove=function(range){var start=this.clippedPos(range.start.row,range.start.column),end=this.clippedPos(range.end.row,range.end.column);return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})}),this.clonePos(start)},this.removeInLine=function(row,startColumn,endColumn){var start=this.clippedPos(row,startColumn),end=this.clippedPos(row,endColumn);return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})},!0),this.clonePos(start)},this.removeFullLines=function(firstRow,lastRow){firstRow=Math.min(Math.max(0,firstRow),this.getLength()-1),lastRow=Math.min(Math.max(0,lastRow),this.getLength()-1);var deleteFirstNewLine=lastRow==this.getLength()-1&&firstRow>0,deleteLastNewLine=this.getLength()-1>lastRow,startRow=deleteFirstNewLine?firstRow-1:firstRow,startCol=deleteFirstNewLine?this.getLine(startRow).length:0,endRow=deleteLastNewLine?lastRow+1:lastRow,endCol=deleteLastNewLine?0:this.getLine(endRow).length,range=new Range(startRow,startCol,endRow,endCol),deletedLines=this.$lines.slice(firstRow,lastRow+1);return this.applyDelta({start:range.start,end:range.end,action:"remove",lines:this.getLinesForRange(range)}),deletedLines},this.removeNewLine=function(row){this.getLength()-1>row&&row>=0&&this.applyDelta({start:this.pos(row,this.getLine(row).length),end:this.pos(row+1,0),action:"remove",lines:["",""]})},this.replace=function(range,text){if(range instanceof Range||(range=Range.fromPoints(range.start,range.end)),0===text.length&&range.isEmpty())return range.start;if(text==this.getTextRange(range))return range.end;this.remove(range);var end;return end=text?this.insert(range.start,text):range.start},this.applyDeltas=function(deltas){for(var i=0;deltas.length>i;i++)this.applyDelta(deltas[i])},this.revertDeltas=function(deltas){for(var i=deltas.length-1;i>=0;i--)this.revertDelta(deltas[i])},this.applyDelta=function(delta,doNotValidate){var isInsert="insert"==delta.action;(isInsert?1>=delta.lines.length&&!delta.lines[0]:!Range.comparePoints(delta.start,delta.end))||(isInsert&&delta.lines.length>2e4&&this.$splitAndapplyLargeDelta(delta,2e4),applyDelta(this.$lines,delta,doNotValidate),this._signal("change",delta))},this.$splitAndapplyLargeDelta=function(delta,MAX){for(var lines=delta.lines,l=lines.length,row=delta.start.row,column=delta.start.column,from=0,to=0;;){from=to,to+=MAX-1;var chunk=lines.slice(from,to);if(to>l){delta.lines=chunk,delta.start.row=row+from,delta.start.column=column;break}chunk.push(""),this.applyDelta({start:this.pos(row+from,column),end:this.pos(row+to,column=0),action:delta.action,lines:chunk},!0)}},this.revertDelta=function(delta){this.applyDelta({start:this.clonePos(delta.start),end:this.clonePos(delta.end),action:"insert"==delta.action?"remove":"insert",lines:delta.lines.slice()})},this.indexToPosition=function(index,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,i=startRow||0,l=lines.length;l>i;i++)if(index-=lines[i].length+newlineLength,0>index)return{row:i,column:index+lines[i].length+newlineLength};return{row:l-1,column:lines[l-1].length}},this.positionToIndex=function(pos,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,index=0,row=Math.min(pos.row,lines.length),i=startRow||0;row>i;++i)index+=lines[i].length+newlineLength;return index+pos.column}}).call(Document.prototype),exports.Document=Document}),ace.define("ace/lib/lang",["require","exports","module"],function(acequire,exports){"use strict";exports.last=function(a){return a[a.length-1]},exports.stringReverse=function(string){return string.split("").reverse().join("")},exports.stringRepeat=function(string,count){for(var result="";count>0;)1&count&&(result+=string),(count>>=1)&&(string+=string);return result};var trimBeginRegexp=/^\\s\\s*/,trimEndRegexp=/\\s\\s*$/;exports.stringTrimLeft=function(string){return string.replace(trimBeginRegexp,"")},exports.stringTrimRight=function(string){return string.replace(trimEndRegexp,"")},exports.copyObject=function(obj){var copy={};for(var key in obj)copy[key]=obj[key];return copy},exports.copyArray=function(array){for(var copy=[],i=0,l=array.length;l>i;i++)copy[i]=array[i]&&"object"==typeof array[i]?this.copyObject(array[i]):array[i];return copy},exports.deepCopy=function deepCopy(obj){if("object"!=typeof obj||!obj)return obj;var copy;if(Array.isArray(obj)){copy=[];for(var key=0;obj.length>key;key++)copy[key]=deepCopy(obj[key]);return copy}if("[object Object]"!==Object.prototype.toString.call(obj))return obj;copy={};for(var key in obj)copy[key]=deepCopy(obj[key]);return copy},exports.arrayToMap=function(arr){for(var map={},i=0;arr.length>i;i++)map[arr[i]]=1;return map},exports.createMap=function(props){var map=Object.create(null);for(var i in props)map[i]=props[i];return map},exports.arrayRemove=function(array,value){for(var i=0;array.length>=i;i++)value===array[i]&&array.splice(i,1)},exports.escapeRegExp=function(str){return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g,"\\\\$1")},exports.escapeHTML=function(str){return str.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/\'/g,"&#39;").replace(/</g,"&#60;")},exports.getMatchOffsets=function(string,regExp){var matches=[];return string.replace(regExp,function(str){matches.push({offset:arguments[arguments.length-2],length:str.length})}),matches},exports.deferredCall=function(fcn){var timer=null,callback=function(){timer=null,fcn()},deferred=function(timeout){return deferred.cancel(),timer=setTimeout(callback,timeout||0),deferred};return deferred.schedule=deferred,deferred.call=function(){return this.cancel(),fcn(),deferred},deferred.cancel=function(){return clearTimeout(timer),timer=null,deferred},deferred.isPending=function(){return timer},deferred},exports.delayedCall=function(fcn,defaultTimeout){var timer=null,callback=function(){timer=null,fcn()},_self=function(timeout){null==timer&&(timer=setTimeout(callback,timeout||defaultTimeout))};return _self.delay=function(timeout){timer&&clearTimeout(timer),timer=setTimeout(callback,timeout||defaultTimeout)},_self.schedule=_self,_self.call=function(){this.cancel(),fcn()},_self.cancel=function(){timer&&clearTimeout(timer),timer=null},_self.isPending=function(){return timer},_self}}),ace.define("ace/worker/mirror",["require","exports","module","ace/range","ace/document","ace/lib/lang"],function(acequire,exports){"use strict";acequire("../range").Range;var Document=acequire("../document").Document,lang=acequire("../lib/lang"),Mirror=exports.Mirror=function(sender){this.sender=sender;var doc=this.doc=new Document(""),deferredUpdate=this.deferredUpdate=lang.delayedCall(this.onUpdate.bind(this)),_self=this;sender.on("change",function(e){var data=e.data;if(data[0].start)doc.applyDeltas(data);else for(var i=0;data.length>i;i+=2){if(Array.isArray(data[i+1]))var d={action:"insert",start:data[i],lines:data[i+1]};else var d={action:"remove",start:data[i],end:data[i+1]};doc.applyDelta(d,!0)}return _self.$timeout?deferredUpdate.schedule(_self.$timeout):(_self.onUpdate(),void 0)})};(function(){this.$timeout=500,this.setTimeout=function(timeout){this.$timeout=timeout},this.setValue=function(value){this.doc.setValue(value),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(callbackId){this.sender.callback(this.doc.getValue(),callbackId)},this.onUpdate=function(){},this.isPending=function(){return this.deferredUpdate.isPending()}}).call(Mirror.prototype)}),ace.define("ace/mode/json/json_parse",["require","exports","module"],function(){"use strict";var at,ch,text,value,escapee={\'"\':\'"\',"\\\\":"\\\\","/":"/",b:"\\b",f:"\\f",n:"\\n",r:"\\r",t:"\t"},error=function(m){throw{name:"SyntaxError",message:m,at:at,text:text}},next=function(c){return c&&c!==ch&&error("Expected \'"+c+"\' instead of \'"+ch+"\'"),ch=text.charAt(at),at+=1,ch},number=function(){var number,string="";for("-"===ch&&(string="-",next("-"));ch>="0"&&"9">=ch;)string+=ch,next();if("."===ch)for(string+=".";next()&&ch>="0"&&"9">=ch;)string+=ch;if("e"===ch||"E"===ch)for(string+=ch,next(),("-"===ch||"+"===ch)&&(string+=ch,next());ch>="0"&&"9">=ch;)string+=ch,next();return number=+string,isNaN(number)?(error("Bad number"),void 0):number},string=function(){var hex,i,uffff,string="";if(\'"\'===ch)for(;next();){if(\'"\'===ch)return next(),string;if("\\\\"===ch)if(next(),"u"===ch){for(uffff=0,i=0;4>i&&(hex=parseInt(next(),16),isFinite(hex));i+=1)uffff=16*uffff+hex;string+=String.fromCharCode(uffff)}else{if("string"!=typeof escapee[ch])break;string+=escapee[ch]}else string+=ch}error("Bad string")},white=function(){for(;ch&&" ">=ch;)next()},word=function(){switch(ch){case"t":return next("t"),next("r"),next("u"),next("e"),!0;case"f":return next("f"),next("a"),next("l"),next("s"),next("e"),!1;case"n":return next("n"),next("u"),next("l"),next("l"),null}error("Unexpected \'"+ch+"\'")},array=function(){var array=[];if("["===ch){if(next("["),white(),"]"===ch)return next("]"),array;for(;ch;){if(array.push(value()),white(),"]"===ch)return next("]"),array;next(","),white()}}error("Bad array")},object=function(){var key,object={};if("{"===ch){if(next("{"),white(),"}"===ch)return next("}"),object;for(;ch;){if(key=string(),white(),next(":"),Object.hasOwnProperty.call(object,key)&&error(\'Duplicate key "\'+key+\'"\'),object[key]=value(),white(),"}"===ch)return next("}"),object;next(","),white()}}error("Bad object")};return value=function(){switch(white(),ch){case"{":return object();case"[":return array();case\'"\':return string();case"-":return number();default:return ch>="0"&&"9">=ch?number():word()}},function(source,reviver){var result;return text=source,at=0,ch=" ",result=value(),white(),ch&&error("Syntax error"),"function"==typeof reviver?function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}({"":result},""):result}}),ace.define("ace/mode/json_worker",["require","exports","module","ace/lib/oop","ace/worker/mirror","ace/mode/json/json_parse"],function(acequire,exports){"use strict";var oop=acequire("../lib/oop"),Mirror=acequire("../worker/mirror").Mirror,parse=acequire("./json/json_parse"),JsonWorker=exports.JsonWorker=function(sender){Mirror.call(this,sender),this.setTimeout(200)};oop.inherits(JsonWorker,Mirror),function(){this.onUpdate=function(){var value=this.doc.getValue(),errors=[];try{value&&parse(value)}catch(e){var pos=this.doc.indexToPosition(e.at-1);errors.push({row:pos.row,column:pos.column,text:e.message,type:"error"})}this.sender.emit("annotate",errors)}}.call(JsonWorker.prototype)}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(){function Empty(){}function doesDefinePropertyWork(object){try{return Object.defineProperty(object,"sentinel",{}),"sentinel"in object}catch(exception){}}function toInteger(n){return n=+n,n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n}Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if("function"!=typeof target)throw new TypeError("Function.prototype.bind called on incompatible "+target);var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))};return target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound});var defineGetter,defineSetter,lookupGetter,lookupSetter,supportsAccessors,call=Function.prototype.call,prototypeOfArray=Array.prototype,prototypeOfObject=Object.prototype,slice=prototypeOfArray.slice,_toString=call.bind(prototypeOfObject.toString),owns=call.bind(prototypeOfObject.hasOwnProperty);if((supportsAccessors=owns(prototypeOfObject,"__defineGetter__"))&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function makeArray(l){var a=Array(l+2);return a[0]=a[1]=0,a}var lengthBefore,array=[];return array.splice.apply(array,makeArray(20)),array.splice.apply(array,makeArray(26)),lengthBefore=array.length,array.splice(5,0,"XXX"),lengthBefore+1==array.length,lengthBefore+1==array.length?!0:void 0\n}()){var array_splice=Array.prototype.splice;Array.prototype.splice=function(start,deleteCount){return arguments.length?array_splice.apply(this,[void 0===start?0:start,void 0===deleteCount?this.length-start:deleteCount].concat(slice.call(arguments,2))):[]}}else Array.prototype.splice=function(pos,removeCount){var length=this.length;pos>0?pos>length&&(pos=length):void 0==pos?pos=0:0>pos&&(pos=Math.max(length+pos,0)),length>pos+removeCount||(removeCount=length-pos);var removed=this.slice(pos,pos+removeCount),insert=slice.call(arguments,2),add=insert.length;if(pos===length)add&&this.push.apply(this,insert);else{var remove=Math.min(removeCount,length-pos),tailOldPos=pos+remove,tailNewPos=tailOldPos+add-remove,tailCount=length-tailOldPos,lengthAfterRemove=length-remove;if(tailOldPos>tailNewPos)for(var i=0;tailCount>i;++i)this[tailNewPos+i]=this[tailOldPos+i];else if(tailNewPos>tailOldPos)for(i=tailCount;i--;)this[tailNewPos+i]=this[tailOldPos+i];if(add&&pos===lengthAfterRemove)this.length=lengthAfterRemove,this.push.apply(this,insert);else for(this.length=lengthAfterRemove+add,i=0;add>i;++i)this[pos+i]=insert[i]}return removed};Array.isArray||(Array.isArray=function(obj){return"[object Array]"==_toString(obj)});var boxedString=Object("a"),splitString="a"!=boxedString[0]||!(0 in boxedString);if(Array.prototype.forEach||(Array.prototype.forEach=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,thisp=arguments[1],i=-1,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError;for(;length>++i;)i in self&&fun.call(thisp,self[i],i,object)}),Array.prototype.map||(Array.prototype.map=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=Array(length),thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(result[i]=fun.call(thisp,self[i],i,object));return result}),Array.prototype.filter||(Array.prototype.filter=function(fun){var value,object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=[],thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(value=self[i],fun.call(thisp,value,i,object)&&result.push(value));return result}),Array.prototype.every||(Array.prototype.every=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&!fun.call(thisp,self[i],i,object))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&fun.call(thisp,self[i],i,object))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");if(!length&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError("reduce of empty array with no initial value")}for(;length>i;i++)i in self&&(result=fun.call(void 0,result,self[i],i,object));return result}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");if(!length&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var result,i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(0>--i)throw new TypeError("reduceRight of empty array with no initial value")}do i in this&&(result=fun.call(void 0,result,self[i],i,object));while(i--);return result}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(sought){var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=0;for(arguments.length>1&&(i=toInteger(arguments[1])),i=i>=0?i:Math.max(0,length+i);length>i;i++)if(i in self&&self[i]===sought)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(sought){var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=length-1;for(arguments.length>1&&(i=Math.min(i,toInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&sought===self[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(object){return object.__proto__||(object.constructor?object.constructor.prototype:prototypeOfObject)}),!Object.getOwnPropertyDescriptor){var ERR_NON_OBJECT="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(object,property){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT+object);if(owns(object,property)){var descriptor,getter,setter;if(descriptor={enumerable:!0,configurable:!0},supportsAccessors){var prototype=object.__proto__;object.__proto__=prototypeOfObject;var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(object.__proto__=prototype,getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(object){return Object.keys(object)}),!Object.create){var createEmpty;createEmpty=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var empty={};for(var i in empty)empty[i]=null;return empty.constructor=empty.hasOwnProperty=empty.propertyIsEnumerable=empty.isPrototypeOf=empty.toLocaleString=empty.toString=empty.valueOf=empty.__proto__=null,empty},Object.create=function(prototype,properties){var object;if(null===prototype)object=createEmpty();else{if("object"!=typeof prototype)throw new TypeError("typeof prototype["+typeof prototype+"] != \'object\'");var Type=function(){};Type.prototype=prototype,object=new Type,object.__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom="undefined"==typeof document||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR="Property description must be an object: ",ERR_NON_OBJECT_TARGET="Object.defineProperty called on non-object: ",ERR_ACCESSORS_NOT_SUPPORTED="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(object,property,descriptor){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT_TARGET+object);if("object"!=typeof descriptor&&"function"!=typeof descriptor||null===descriptor)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if(owns(descriptor,"value"))if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);owns(descriptor,"get")&&defineGetter(object,property,descriptor.get),owns(descriptor,"set")&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties||(Object.defineProperties=function(object,properties){for(var property in properties)owns(properties,property)&&Object.defineProperty(object,property,properties[property]);return object}),Object.seal||(Object.seal=function(object){return object}),Object.freeze||(Object.freeze=function(object){return object});try{Object.freeze(function(){})}catch(exception){Object.freeze=function(freezeObject){return function(object){return"function"==typeof object?object:freezeObject(object)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(object){return object}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(object){if(Object(object)===object)throw new TypeError;for(var name="";owns(object,name);)name+="?";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue}),!Object.keys){var hasDontEnumBug=!0,dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;for(var key in{toString:null})hasDontEnumBug=!1;Object.keys=function(object){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError("Object.keys called on a non-object");var keys=[];for(var name in object)owns(object,name)&&keys.push(name);if(hasDontEnumBug)for(var i=0,ii=dontEnumsLength;ii>i;i++){var dontEnum=dontEnums[i];owns(object,dontEnum)&&keys.push(dontEnum)}return keys}}Date.now||(Date.now=function(){return(new Date).getTime()});var ws="\t\\n\v\\f\\r   ᠎             　\\u2028\\u2029\ufeff";if(!String.prototype.trim||ws.trim()){ws="["+ws+"]";var trimBeginRegexp=RegExp("^"+ws+ws+"*"),trimEndRegexp=RegExp(ws+ws+"*$");String.prototype.trim=function(){return(this+"").replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}}var toObject=function(o){if(null==o)throw new TypeError("can\'t convert "+o+" to object");return Object(o)}});'},function(module,exports){ace.define("ace/theme/github",["require","exports","module","ace/lib/dom"],(function(acequire,exports,module){exports.isDark=false;exports.cssClass="ace-github";exports.cssText='.ace-github .ace_gutter {background: #e8e8e8;color: #AAA;}.ace-github  {background: #fff;color: #000;}.ace-github .ace_keyword {font-weight: bold;}.ace-github .ace_string {color: #D14;}.ace-github .ace_variable.ace_class {color: teal;}.ace-github .ace_constant.ace_numeric {color: #099;}.ace-github .ace_constant.ace_buildin {color: #0086B3;}.ace-github .ace_support.ace_function {color: #0086B3;}.ace-github .ace_comment {color: #998;font-style: italic;}.ace-github .ace_variable.ace_language  {color: #0086B3;}.ace-github .ace_paren {font-weight: bold;}.ace-github .ace_boolean {font-weight: bold;}.ace-github .ace_string.ace_regexp {color: #009926;font-weight: normal;}.ace-github .ace_variable.ace_instance {color: teal;}.ace-github .ace_constant.ace_language {font-weight: bold;}.ace-github .ace_cursor {color: black;}.ace-github.ace_focus .ace_marker-layer .ace_active-line {background: rgb(255, 255, 204);}.ace-github .ace_marker-layer .ace_active-line {background: rgb(245, 245, 245);}.ace-github .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-github.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-github.ace_nobold .ace_line > span {font-weight: normal !important;}.ace-github .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-github .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-github .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-github .ace_gutter-active-line {background-color : rgba(0, 0, 0, 0.07);}.ace-github .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-github .ace_invisible {color: #BFBFBF}.ace-github .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-github .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';var dom=acequire("../lib/dom");dom.importCssString(exports.cssText,exports.cssClass)}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"MappingInfoPanel",{enumerable:true,get:function get(){return _mapping_info_panel.MappingInfoPanel}});var _mapping_info_panel=__webpack_require__(340)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.MappingInfoPanel=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _react2=__webpack_require__(2);var _role_mapping_validation=__webpack_require__(35);var _role_selector=__webpack_require__(341);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MappingInfoPanel=function(_Component){_inherits(MappingInfoPanel,_Component);function MappingInfoPanel(props){var _this;_classCallCheck(this,MappingInfoPanel);_this=_possibleConstructorReturn(this,_getPrototypeOf(MappingInfoPanel).call(this,props));_defineProperty(_assertThisInitialized(_this),"getRoleMappingName",(function(){return _react.default.createElement(_eui.EuiDescribedFormGroup,{title:_react.default.createElement("h3",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleMappingNameFormGroupTitle",defaultMessage:"Mapping name"})),description:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleMappingNameFormGroupHelpText",defaultMessage:"A unique name used to identify this role mapping."}),fullWidth:true},_react.default.createElement(_eui.EuiFormRow,_extends({label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleMappingNameFormRowTitle",defaultMessage:"Name"}),fullWidth:true},_this.props.validateForm&&(0,_role_mapping_validation.validateRoleMappingName)(_this.props.roleMapping)),_react.default.createElement(_eui.EuiFieldText,{name:"name",value:_this.props.roleMapping.name||"",onChange:_this.onNameChange,"data-test-subj":"roleMappingFormNameInput",readOnly:_this.props.mode==="edit"})))}));_defineProperty(_assertThisInitialized(_this),"getRolesOrRoleTemplatesSelector",(function(){if(_this.state.rolesMode==="roles"){return _this.getRolesSelector()}return _this.getRoleTemplatesSelector()}));_defineProperty(_assertThisInitialized(_this),"getRolesSelector",(function(){var validationFunction=function validationFunction(){if(!_this.props.validateForm){return{}}return(0,_role_mapping_validation.validateRoleMappingRoles)(_this.props.roleMapping)};return _react.default.createElement(_eui.EuiDescribedFormGroup,{title:_react.default.createElement("h3",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleMappingRolesFormRowTitle",defaultMessage:"Roles"})),description:_react.default.createElement(_eui.EuiText,{size:"s",color:"subdued"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleMappingRolesFormRowHelpText",defaultMessage:"Assign roles to your users."})),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiLink,{"data-test-subj":"switchToRoleTemplatesButton",onClick:function onClick(){_this.onRolesModeChange("templates")}},_react.default.createElement(_react.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.switchToRoleTemplates",defaultMessage:"Switch to role templates"})," ",_react.default.createElement(_eui.EuiIcon,{size:"s",type:"inputOutput"})))),fullWidth:true},_react.default.createElement(_eui.EuiFormRow,_extends({fullWidth:true},validationFunction()),_react.default.createElement(_role_selector.RoleSelector,{rolesAPIClient:_this.props.rolesAPIClient,roleMapping:_this.props.roleMapping,mode:_this.state.rolesMode,canUseInlineScripts:_this.props.canUseInlineScripts,canUseStoredScripts:_this.props.canUseStoredScripts,onChange:function onChange(roleMapping){return _this.props.onChange(roleMapping)}})))}));_defineProperty(_assertThisInitialized(_this),"getRoleTemplatesSelector",(function(){var validationFunction=function validationFunction(){if(!_this.props.validateForm){return{}}return(0,_role_mapping_validation.validateRoleMappingRoleTemplates)(_this.props.roleMapping)};return _react.default.createElement(_eui.EuiDescribedFormGroup,{title:_react.default.createElement("h3",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleMappingRoleTemplatesFormRowTitle",defaultMessage:"Role templates"})),description:_react.default.createElement(_eui.EuiText,{size:"s",color:"subdued"},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleMappingRoleTemplatesFormRowHelpText",defaultMessage:"Create templates that describe the roles to assign to your users."})," ",_react.default.createElement(_eui.EuiLink,{href:_this.props.docLinks.getRoleMappingTemplateDocUrl(),external:true,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleMappingRoleTemplatesFormRowLearnMore",defaultMessage:"Learn about role templates"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiLink,{onClick:function onClick(){_this.onRolesModeChange("roles")},"data-test-subj":"switchToRolesButton"},_react.default.createElement(_react.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.switchToRoles",defaultMessage:"Switch to roles"})," ",_react.default.createElement(_eui.EuiIcon,{size:"s",type:"inputOutput"})))),fullWidth:true},_react.default.createElement(_eui.EuiFormRow,_extends({fullWidth:true},validationFunction()),_react.default.createElement(_role_selector.RoleSelector,{rolesAPIClient:_this.props.rolesAPIClient,roleMapping:_this.props.roleMapping,mode:_this.state.rolesMode,canUseInlineScripts:_this.props.canUseInlineScripts,canUseStoredScripts:_this.props.canUseStoredScripts,onChange:function onChange(roleMapping){return _this.props.onChange(roleMapping)}})))}));_defineProperty(_assertThisInitialized(_this),"getEnabledSwitch",(function(){return _react.default.createElement(_eui.EuiDescribedFormGroup,{title:_react.default.createElement("h3",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleMappingEnabledFormRowTitle",defaultMessage:"Enable mapping"})),description:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleMappingEnabledFormRowHelpText",defaultMessage:"Map roles to users based on their username, groups, and other metadata. When false, ignore mappings."}),fullWidth:true},_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleMappingEnabledFormRowLabel",defaultMessage:"Enable mapping"}),fullWidth:true},_react.default.createElement(_eui.EuiSwitch,{name:"enabled",label:_i18n.i18n.translate("xpack.security.management.editRoleMapping.roleMappingEnabledLabel",{defaultMessage:"Enable mapping"}),showLabel:false,"data-test-subj":"roleMappingsEnabledSwitch",checked:_this.props.roleMapping.enabled,onChange:function onChange(e){_this.props.onChange(_objectSpread({},_this.props.roleMapping,{enabled:e.target.checked}))}})))}));_defineProperty(_assertThisInitialized(_this),"onNameChange",(function(e){var name=e.target.value;_this.props.onChange(_objectSpread({},_this.props.roleMapping,{name:name}))}));_defineProperty(_assertThisInitialized(_this),"onRolesModeChange",(function(rolesMode){var canUseTemplates=_this.props.canUseInlineScripts||_this.props.canUseStoredScripts;if(rolesMode==="templates"&&canUseTemplates){var defaultTemplate=_this.props.canUseInlineScripts?{template:{source:""}}:{template:{id:""}};_this.props.onChange(_objectSpread({},_this.props.roleMapping,{roles:[],role_templates:[defaultTemplate]}))}_this.setState({rolesMode:rolesMode})}));_this.state={rolesMode:props.roleMapping.role_templates&&props.roleMapping.role_templates.length>0?"templates":"roles"};return _this}_createClass(MappingInfoPanel,[{key:"render",value:function render(){return _react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleMappingTitle",defaultMessage:"Role mapping"}))),_react.default.createElement(_eui.EuiSpacer,null),this.getRoleMappingName(),this.getEnabledSwitch(),this.getRolesOrRoleTemplatesSelector())}}]);return MappingInfoPanel}(_react.Component);exports.MappingInfoPanel=MappingInfoPanel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RoleSelector",{enumerable:true,get:function get(){return _role_selector.RoleSelector}});var _role_selector=__webpack_require__(342)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RoleSelector=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _i18n=__webpack_require__(3);var _react2=__webpack_require__(2);var _eui=__webpack_require__(1);var _model=__webpack_require__(5);var _add_role_template_button=__webpack_require__(343);var _role_template_editor=__webpack_require__(344);var _role_combo_box=__webpack_require__(48);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RoleSelector=function(_React$Component){_inherits(RoleSelector,_React$Component);function RoleSelector(props){var _this;_classCallCheck(this,RoleSelector);_this=_possibleConstructorReturn(this,_getPrototypeOf(RoleSelector).call(this,props));_defineProperty(_assertThisInitialized(_this),"getRoleComboBox",(function(){var _this$props$roleMappi=_this.props.roleMapping.roles,roles=_this$props$roleMappi===void 0?[]:_this$props$roleMappi;return _react.default.createElement(_role_combo_box.RoleComboBox,{placeholder:_i18n.i18n.translate("xpack.security.management.editRoleMapping.selectRolesPlaceholder",{defaultMessage:"Select one or more roles"}),isLoading:_this.state.roles.length===0,availableRoles:_this.state.roles,selectedRoleNames:roles,onChange:function onChange(selectedRoles){_this.props.onChange(_objectSpread({},_this.props.roleMapping,{roles:selectedRoles,role_templates:[]}))}})}));_defineProperty(_assertThisInitialized(_this),"getRoleTemplates",(function(){var _this$props$roleMappi2=_this.props.roleMapping.role_templates,roleTemplates=_this$props$roleMappi2===void 0?[]:_this$props$roleMappi2;return _react.default.createElement("div",null,roleTemplates.map((function(rt,index){return _react.default.createElement(_react.Fragment,{key:index},_react.default.createElement(_role_template_editor.RoleTemplateEditor,{canUseStoredScripts:_this.props.canUseStoredScripts,canUseInlineScripts:_this.props.canUseInlineScripts,roleTemplate:rt,onChange:function onChange(updatedTemplate){var templates=_toConsumableArray(_this.props.roleMapping.role_templates||[]);templates.splice(index,1,updatedTemplate);_this.props.onChange(_objectSpread({},_this.props.roleMapping,{role_templates:templates}))},onDelete:function onDelete(){var templates=_toConsumableArray(_this.props.roleMapping.role_templates||[]);templates.splice(index,1);_this.props.onChange(_objectSpread({},_this.props.roleMapping,{role_templates:templates}))}}),_react.default.createElement(_eui.EuiHorizontalRule,null))})),_react.default.createElement(_add_role_template_button.AddRoleTemplateButton,{canUseStoredScripts:_this.props.canUseStoredScripts,canUseInlineScripts:_this.props.canUseInlineScripts,onClick:function onClick(type){switch(type){case"inline":{var templates=_this.props.roleMapping.role_templates||[];_this.props.onChange(_objectSpread({},_this.props.roleMapping,{roles:[],role_templates:[].concat(_toConsumableArray(templates),[{template:{source:""}}])}));break}case"stored":{var _templates=_this.props.roleMapping.role_templates||[];_this.props.onChange(_objectSpread({},_this.props.roleMapping,{roles:[],role_templates:[].concat(_toConsumableArray(_templates),[{template:{id:""}}])}));break}default:throw new Error("Unsupported template type: ".concat(type))}}}))}));_defineProperty(_assertThisInitialized(_this),"getHelpText",(function(){if(_this.props.mode==="roles"&&_this.hasDeprecatedRolesAssigned()){return _react.default.createElement("span",{"data-test-subj":"deprecatedRolesAssigned"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.deprecatedRolesAssigned",defaultMessage:"This mapping is assigned a deprecated role. Please migrate to a supported role."}))}}));_defineProperty(_assertThisInitialized(_this),"hasDeprecatedRolesAssigned",(function(){var _ref,_this$props$roleMappi3;return(_ref=(_this$props$roleMappi3=_this.props.roleMapping.roles)===null||_this$props$roleMappi3===void 0?void 0:_this$props$roleMappi3.some((function(r){return _this.state.roles.some((function(role){return role.name===r&&(0,_model.isRoleDeprecated)(role)}))})))!==null&&_ref!==void 0?_ref:false}));_this.state={roles:[]};return _this}_createClass(RoleSelector,[{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var roles;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.props.rolesAPIClient.getRoles();case 2:roles=_context.sent;this.setState({roles:roles});case 4:case"end":return _context.stop()}}}),_callee,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"render",value:function render(){var mode=this.props.mode;return _react.default.createElement(_eui.EuiFormRow,{fullWidth:true,helpText:this.getHelpText()},mode==="roles"?this.getRoleComboBox():this.getRoleTemplates())}}]);return RoleSelector}(_react.default.Component);exports.RoleSelector=RoleSelector},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AddRoleTemplateButton=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(1);var _react2=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AddRoleTemplateButton=function AddRoleTemplateButton(props){if(!props.canUseStoredScripts&&!props.canUseInlineScripts){return _react.default.createElement(_eui.EuiCallOut,{iconType:"alert",color:"danger",title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleTemplatesUnavailableTitle",defaultMessage:"Role templates unavailable"})},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleTemplatesUnavailable",defaultMessage:"Role templates cannot be used when scripts are disabled in Elasticsearch."})))}var addRoleTemplate=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.addRoleTemplate",defaultMessage:"Add template"});if(props.canUseInlineScripts){return _react.default.createElement(_eui.EuiButtonEmpty,{iconType:"plusInCircle",onClick:function onClick(){return props.onClick("inline")},"data-test-subj":"addRoleTemplateButton"},addRoleTemplate)}return _react.default.createElement(_eui.EuiButtonEmpty,{iconType:"plusInCircle",onClick:function onClick(){return props.onClick("stored")},"data-test-subj":"addRoleTemplateButton"},addRoleTemplate)};exports.AddRoleTemplateButton=AddRoleTemplateButton},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RoleTemplateEditor=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(2);var _eui=__webpack_require__(1);var _i18n=__webpack_require__(3);var _role_template_type=__webpack_require__(83);var _role_template_type_select=__webpack_require__(345);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RoleTemplateEditor=function RoleTemplateEditor(_ref){var roleTemplate=_ref.roleTemplate,_onChange=_ref.onChange,onDelete=_ref.onDelete,canUseInlineScripts=_ref.canUseInlineScripts,canUseStoredScripts=_ref.canUseStoredScripts;return _react.default.createElement(_eui.EuiFlexGroup,{direction:"column",gutterSize:"s"},getTemplateConfigurationFields(),getEditorForTemplate(),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"trash",color:"danger",size:"xs",onClick:function onClick(){return onDelete(roleTemplate)},"data-test-subj":"deleteRoleTemplateButton"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.deleteRoleTemplateButton",defaultMessage:"Delete template"}))))));function getTemplateFormatSwitch(){var returnsJsonLabel=_i18n.i18n.translate("xpack.security.management.editRoleMapping.roleTemplateReturnsJson",{defaultMessage:"Returns JSON"});return _react.default.createElement(_eui.EuiFormRow,{label:returnsJsonLabel},_react.default.createElement(_eui.EuiSwitch,{checked:roleTemplate.format==="json",label:returnsJsonLabel,showLabel:false,onChange:function onChange(e){_onChange(_objectSpread({},roleTemplate,{format:e.target.checked?"json":"string"}))}}))}function getTemplateConfigurationFields(){var templateTypeComboBox=_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleTemplateType",defaultMessage:"Template type"})},_react.default.createElement(_role_template_type_select.RoleTemplateTypeSelect,{roleTemplate:roleTemplate,canUseStoredScripts:canUseStoredScripts,canUseInlineScripts:canUseInlineScripts,onChange:_onChange})));var templateFormatSwitch=_react.default.createElement(_eui.EuiFlexItem,null,getTemplateFormatSwitch());return _react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},templateTypeComboBox,templateFormatSwitch))}function getEditorForTemplate(){if((0,_role_template_type.isInlineRoleTemplate)(roleTemplate)){var extraProps={};if(!canUseInlineScripts){extraProps.isInvalid=true;extraProps.error=_react.default.createElement(_eui.EuiText,{size:"xs",color:"danger","data-test-subj":"roleMappingInlineScriptsDisabled"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleTemplateInlineScriptsDisabled",defaultMessage:"Template uses inline scripts, which are disabled in Elasticsearch."}))}var example="{{username}}_role";return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexItem,{grow:1,style:{maxWidth:"400px"}},_react.default.createElement(_eui.EuiFormRow,_extends({label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleTemplateLabel",defaultMessage:"Template"}),helpText:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleTemplateHelpText",defaultMessage:"Mustache templates are allowed. Example: {example}",values:{example:example}})},extraProps),_react.default.createElement(_eui.EuiFieldText,{"data-test-subj":"roleTemplateSourceEditor",value:roleTemplate.template.source,onChange:function onChange(e){_onChange(_objectSpread({},roleTemplate,{template:{source:e.target.value}}))}}))))}if((0,_role_template_type.isStoredRoleTemplate)(roleTemplate)){var _extraProps={};if(!canUseStoredScripts){_extraProps.isInvalid=true;_extraProps.error=_react.default.createElement(_eui.EuiText,{size:"xs",color:"danger","data-test-subj":"roleMappingStoredScriptsDisabled"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.roleTemplateStoredScriptsDisabled",defaultMessage:"Template uses stored scripts, which are disabled in Elasticsearch."}))}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexItem,{grow:1,style:{maxWidth:"400px"}},_react.default.createElement(_eui.EuiFormRow,_extends({label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.storedScriptLabel",defaultMessage:"Stored script ID"}),helpText:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.storedScriptHelpText",defaultMessage:"ID of a previously stored Painless or Mustache script."})},_extraProps),_react.default.createElement(_eui.EuiFieldText,{"data-test-subj":"roleTemplateScriptIdEditor",value:roleTemplate.template.id,onChange:function onChange(e){_onChange(_objectSpread({},roleTemplate,{template:{id:e.target.value}}))}}))))}if((0,_role_template_type.isInvalidRoleTemplate)(roleTemplate)){return _react.default.createElement(_eui.EuiFlexItem,{grow:1,"data-test-subj":"roleMappingInvalidRoleTemplate"},_react.default.createElement(_eui.EuiCallOut,{color:"warning",title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.invalidRoleTemplateTitle",defaultMessage:"Invalid role template"})},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.security.management.editRoleMapping.invalidRoleTemplateMessage",defaultMessage:"Role template is invalid, and cannot be edited here. Please delete and recreate, or fix via the Role Mapping API."})))}throw new Error("Unable to determine role template type")}};exports.RoleTemplateEditor=RoleTemplateEditor},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RoleTemplateTypeSelect=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(3);var _eui=__webpack_require__(1);var _role_template_type=__webpack_require__(83);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var templateTypeOptions=[{id:"inline",label:_i18n.i18n.translate("xpack.security.management.editRoleMapping.roleTemplate.inlineTypeLabel",{defaultMessage:"Role template"})},{id:"stored",label:_i18n.i18n.translate("xpack.security.management.editRoleMapping.roleTemplate.storedTypeLabel",{defaultMessage:"Stored script"})}];var RoleTemplateTypeSelect=function RoleTemplateTypeSelect(props){var availableOptions=templateTypeOptions.filter((function(_ref){var id=_ref.id;return id==="inline"&&props.canUseInlineScripts||id==="stored"&&props.canUseStoredScripts}));var selectedOptions=templateTypeOptions.filter((function(_ref2){var id=_ref2.id;return id==="inline"&&(0,_role_template_type.isInlineRoleTemplate)(props.roleTemplate)||id==="stored"&&(0,_role_template_type.isStoredRoleTemplate)(props.roleTemplate)}));return _react.default.createElement(_eui.EuiComboBox,{options:availableOptions,singleSelection:{asPlainText:true},selectedOptions:selectedOptions,"data-test-subj":"roleMappingsFormTemplateType",onChange:function onChange(selected){var _selected=_slicedToArray(selected,1),id=_selected[0].id;if(id==="inline"){props.onChange(_objectSpread({},props.roleTemplate,{template:{source:""}}))}else{props.onChange(_objectSpread({},props.roleTemplate,{template:{id:""}}))}},isClearable:false})};exports.RoleTemplateTypeSelect=RoleTemplateTypeSelect},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"accountManagementApp",{enumerable:true,get:function get(){return _account_management_app.accountManagementApp}});var _account_management_app=__webpack_require__(347)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.accountManagementApp=void 0;var _i18n=__webpack_require__(3);var _management=__webpack_require__(44);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var accountManagementApp=Object.freeze({id:"security_account",create:function create(_ref){var application=_ref.application,authc=_ref.authc,getStartServices=_ref.getStartServices;var title=_i18n.i18n.translate("xpack.security.account.breadcrumb",{defaultMessage:"Account Management"});application.register({id:this.id,title:title,navLinkStatus:3,appRoute:"/security/account",mount:function mount(_ref2){var element=_ref2.element;return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _ref3,_ref4,_ref4$,coreStart,renderAccountManagementPage;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([getStartServices(),__webpack_require__.e(5).then(__webpack_require__.t.bind(null,354,7))]);case 2:_ref3=_context.sent;_ref4=_slicedToArray(_ref3,2);_ref4$=_slicedToArray(_ref4[0],1);coreStart=_ref4$[0];renderAccountManagementPage=_ref4[1].renderAccountManagementPage;coreStart.chrome.setBreadcrumbs([{text:title}]);return _context.abrupt("return",renderAccountManagementPage(coreStart.i18n,element,{authc:authc,notifications:coreStart.notifications,userAPIClient:new _management.UserAPIClient(coreStart.http)}));case 9:case"end":return _context.stop()}}}),_callee)})))()}})}});exports.accountManagementApp=accountManagementApp},function(module,exports,__webpack_require__){"use strict"}]);