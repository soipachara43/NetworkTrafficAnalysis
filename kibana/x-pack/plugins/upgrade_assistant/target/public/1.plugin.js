(window["upgradeAssistant_bundle_jsonpfunction"]=window["upgradeAssistant_bundle_jsonpfunction"]||[]).push([[1],[,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mountManagementSection=mountManagementSection;var _render_app=__webpack_require__(29);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function mountManagementSection(_x,_x2,_x3){return _mountManagementSection.apply(this,arguments)}function _mountManagementSection(){_mountManagementSection=_asyncToGenerator(regeneratorRuntime.mark((function _callee(coreSetup,isCloudEnabled,params){var _ref,_ref2,_ref2$,i18n,docLinks;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return coreSetup.getStartServices();case 2:_ref=_context.sent;_ref2=_slicedToArray(_ref,1);_ref2$=_ref2[0];i18n=_ref2$.i18n;docLinks=_ref2$.docLinks;return _context.abrupt("return",(0,_render_app.renderApp)({element:params.element,isCloudEnabled:isCloudEnabled,http:coreSetup.http,i18n:i18n,docLinks:docLinks}));case 8:case"end":return _context.stop()}}}),_callee)})));return _mountManagementSection.apply(this,arguments)}},,,function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.TelemetryState=exports.GroupByOption=exports.LevelFilterOption=exports.LoadingState=exports.UpgradeAssistantTabComponent=void 0;var _react=_interopRequireDefault(__webpack_require__(14));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var UpgradeAssistantTabComponent=function(_React$Component){_inherits(UpgradeAssistantTabComponent,_React$Component);function UpgradeAssistantTabComponent(){_classCallCheck(this,UpgradeAssistantTabComponent);return _possibleConstructorReturn(this,_getPrototypeOf(UpgradeAssistantTabComponent).apply(this,arguments))}return UpgradeAssistantTabComponent}(_react.default.Component);exports.UpgradeAssistantTabComponent=UpgradeAssistantTabComponent;var LoadingState;exports.LoadingState=LoadingState;(function(LoadingState){LoadingState[LoadingState["Loading"]=0]="Loading";LoadingState[LoadingState["Success"]=1]="Success";LoadingState[LoadingState["Error"]=2]="Error"})(LoadingState||(exports.LoadingState=LoadingState={}));var LevelFilterOption;exports.LevelFilterOption=LevelFilterOption;(function(LevelFilterOption){LevelFilterOption["all"]="all";LevelFilterOption["critical"]="critical"})(LevelFilterOption||(exports.LevelFilterOption=LevelFilterOption={}));var GroupByOption;exports.GroupByOption=GroupByOption;(function(GroupByOption){GroupByOption["message"]="message";GroupByOption["index"]="index";GroupByOption["node"]="node"})(GroupByOption||(exports.GroupByOption=GroupByOption={}));var TelemetryState;exports.TelemetryState=TelemetryState;(function(TelemetryState){TelemetryState[TelemetryState["Running"]=0]="Running";TelemetryState[TelemetryState["Complete"]=1]="Complete"})(TelemetryState||(exports.TelemetryState=TelemetryState={}))},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UPGRADE_ASSISTANT_DOC_ID=exports.UPGRADE_ASSISTANT_TYPE=exports.IndexGroup=exports.ReindexWarning=exports.REINDEX_OP_TYPE=exports.ReindexStatus=exports.ReindexStep=void 0;var ReindexStep;exports.ReindexStep=ReindexStep;(function(ReindexStep){ReindexStep[ReindexStep["created"]=0]="created";ReindexStep[ReindexStep["indexGroupServicesStopped"]=10]="indexGroupServicesStopped";ReindexStep[ReindexStep["readonly"]=20]="readonly";ReindexStep[ReindexStep["newIndexCreated"]=30]="newIndexCreated";ReindexStep[ReindexStep["reindexStarted"]=40]="reindexStarted";ReindexStep[ReindexStep["reindexCompleted"]=50]="reindexCompleted";ReindexStep[ReindexStep["aliasCreated"]=60]="aliasCreated";ReindexStep[ReindexStep["indexGroupServicesStarted"]=70]="indexGroupServicesStarted"})(ReindexStep||(exports.ReindexStep=ReindexStep={}));var ReindexStatus;exports.ReindexStatus=ReindexStatus;(function(ReindexStatus){ReindexStatus[ReindexStatus["inProgress"]=0]="inProgress";ReindexStatus[ReindexStatus["completed"]=1]="completed";ReindexStatus[ReindexStatus["failed"]=2]="failed";ReindexStatus[ReindexStatus["paused"]=3]="paused";ReindexStatus[ReindexStatus["cancelled"]=4]="cancelled"})(ReindexStatus||(exports.ReindexStatus=ReindexStatus={}));var REINDEX_OP_TYPE="upgrade-assistant-reindex-operation";exports.REINDEX_OP_TYPE=REINDEX_OP_TYPE;var ReindexWarning;exports.ReindexWarning=ReindexWarning;(function(ReindexWarning){ReindexWarning[ReindexWarning["allField"]=0]="allField";ReindexWarning[ReindexWarning["booleanFields"]=1]="booleanFields";ReindexWarning[ReindexWarning["apmReindex"]=2]="apmReindex";ReindexWarning[ReindexWarning["customTypeName"]=3]="customTypeName"})(ReindexWarning||(exports.ReindexWarning=ReindexWarning={}));var IndexGroup;exports.IndexGroup=IndexGroup;(function(IndexGroup){IndexGroup["ml"]="___ML_REINDEX_LOCK___";IndexGroup["watcher"]="___WATCHER_REINDEX_LOCK___"})(IndexGroup||(exports.IndexGroup=IndexGroup={}));var UPGRADE_ASSISTANT_TYPE="upgrade-assistant-telemetry";exports.UPGRADE_ASSISTANT_TYPE=UPGRADE_ASSISTANT_TYPE;var UPGRADE_ASSISTANT_DOC_ID="upgrade-assistant-telemetry";exports.UPGRADE_ASSISTANT_DOC_ID=UPGRADE_ASSISTANT_DOC_ID},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useAppContext=exports.AppContextProvider=exports.AppContext=void 0;var _react=_interopRequireWildcard(__webpack_require__(14));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var AppContext=(0,_react.createContext)({});exports.AppContext=AppContext;var AppContextProvider=function AppContextProvider(_ref){var children=_ref.children,value=_ref.value;return _react.default.createElement(AppContext.Provider,{value:value},children)};exports.AppContextProvider=AppContextProvider;var useAppContext=function useAppContext(){var ctx=(0,_react.useContext)(AppContext);if(!ctx){throw new Error("useAppContext must be called from inside AppContext")}return ctx};exports.useAppContext=useAppContext},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LoadingErrorBanner=void 0;var _lodash=__webpack_require__(21);var _react=_interopRequireDefault(__webpack_require__(14));var _eui=__webpack_require__(15);var _react2=__webpack_require__(16);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LoadingErrorBanner=function LoadingErrorBanner(_ref){var loadingError=_ref.loadingError;if((0,_lodash.get)(loadingError,"response.status")===403){return _react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.forbiddenErrorCallout.calloutTitle",defaultMessage:"You do not have sufficient privileges to view this page."}),color:"danger",iconType:"cross"})}return _react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.genericErrorCallout.calloutTitle",defaultMessage:"An error occurred while retrieving the checkup results."}),color:"danger",iconType:"cross"},loadingError?loadingError.message:null)};exports.LoadingErrorBanner=LoadingErrorBanner},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.COLOR_MAP=exports.REVERSE_LEVEL_MAP=exports.LEVEL_MAP=void 0;var _lodash=__webpack_require__(21);var LEVEL_MAP={warning:0,critical:1};exports.LEVEL_MAP=LEVEL_MAP;var REVERSE_LEVEL_MAP=(0,_lodash.invert)(LEVEL_MAP);exports.REVERSE_LEVEL_MAP=REVERSE_LEVEL_MAP;var COLOR_MAP={warning:"default",critical:"danger"};exports.COLOR_MAP=COLOR_MAP},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FixDefaultFieldsButton=void 0;var _react=_interopRequireDefault(__webpack_require__(14));var _eui=__webpack_require__(15);var _react2=__webpack_require__(16);var _types=__webpack_require__(20);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var BEAT_DEFAULT_FIELD_TYPES=new Set(["keyword","text","ip"]);var BEAT_OTHER_DEFAULT_FIELDS=new Set(["fields.*"]);var FixDefaultFieldsButton=function(_React$Component){_inherits(FixDefaultFieldsButton,_React$Component);function FixDefaultFieldsButton(props){var _this;_classCallCheck(this,FixDefaultFieldsButton);_this=_possibleConstructorReturn(this,_getPrototypeOf(FixDefaultFieldsButton).call(this,props));_defineProperty(_assertThisInitialized(_this),"isBeatsIndex",(function(){var indexName=_this.props.indexName;return indexName.startsWith("metricbeat-")||indexName.startsWith("filebeat-")}));_defineProperty(_assertThisInitialized(_this),"fixBeatsIndex",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(_this.isBeatsIndex()){_context.next=2;break}return _context.abrupt("return");case 2:_this.setState({fixLoadingState:_types.LoadingState.Loading});_context.prev=3;_context.next=6;return _this.props.http.post("/api/upgrade_assistant/add_query_default_field/".concat(_this.props.indexName),{body:JSON.stringify({fieldTypes:_toConsumableArray(BEAT_DEFAULT_FIELD_TYPES),otherFields:_toConsumableArray(BEAT_OTHER_DEFAULT_FIELDS)})});case 6:_this.setState({fixLoadingState:_types.LoadingState.Success});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](3);_this.setState({fixLoadingState:_types.LoadingState.Error});case 12:case"end":return _context.stop()}}}),_callee,null,[[3,9]])}))));_this.state={};return _this}_createClass(FixDefaultFieldsButton,[{key:"render",value:function render(){var fixLoadingState=this.state.fixLoadingState;if(!this.isBeatsIndex()){return null}var buttonProps={size:"s",onClick:this.fixBeatsIndex};var buttonContent;switch(fixLoadingState){case _types.LoadingState.Loading:buttonProps.disabled=true;buttonProps.isLoading=true;buttonContent=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.fixMetricbeatIndexButton.fixingLabel",defaultMessage:"Fixingâ€¦"});break;case _types.LoadingState.Success:buttonProps.iconSide="left";buttonProps.iconType="check";buttonProps.disabled=true;buttonContent=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.fixMetricbeatIndexButton.fixedLabel",defaultMessage:"Fixed"});break;case _types.LoadingState.Error:buttonProps.color="danger";buttonProps.iconSide="left";buttonProps.iconType="cross";buttonContent=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.fixMetricbeatIndexButton.failedLabel",defaultMessage:"Failed"});break;default:buttonContent=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.fixMetricbeatIndexButton.reindexLabel",defaultMessage:"Fix"})}return _react.default.createElement(_eui.EuiButton,buttonProps,buttonContent)}}]);return FixDefaultFieldsButton}(_react.default.Component);exports.FixDefaultFieldsButton=FixDefaultFieldsButton},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ReindexButton",{enumerable:true,get:function get(){return _button.ReindexButton}});var _button=__webpack_require__(47)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renderApp=void 0;var _react=_interopRequireDefault(__webpack_require__(14));var _reactDom=__webpack_require__(18);var _app=__webpack_require__(30);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var renderApp=function renderApp(deps){var element=deps.element,appDependencies=_objectWithoutProperties(deps,["element"]);(0,_reactDom.render)(_react.default.createElement(_app.RootComponent,appDependencies),element);return function(){(0,_reactDom.unmountComponentAtNode)(element)}};exports.renderApp=renderApp},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RootComponent=void 0;var _react=_interopRequireDefault(__webpack_require__(14));var _eui=__webpack_require__(15);var _react2=__webpack_require__(16);var _version=__webpack_require__(3);var _tabs=__webpack_require__(31);var _app_context=__webpack_require__(23);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var RootComponent=function RootComponent(_ref){var i18n=_ref.i18n,contexValue=_objectWithoutProperties(_ref,["i18n"]);return _react.default.createElement(i18n.Context,null,_react.default.createElement(_app_context.AppContextProvider,{value:contexValue},_react.default.createElement("div",{"data-test-subj":"upgradeAssistantRoot"},_react.default.createElement(_eui.EuiPageHeader,null,_react.default.createElement(_eui.EuiPageHeaderSection,null,_react.default.createElement(_eui.EuiTitle,{size:"l"},_react.default.createElement("h1",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.appTitle",defaultMessage:"{version} Upgrade Assistant",values:{version:"".concat(_version.NEXT_MAJOR_VERSION,".0")}}))))),_react.default.createElement(_app_context.AppContext.Consumer,null,(function(_ref2){var http=_ref2.http;return _react.default.createElement(_tabs.UpgradeAssistantTabs,{http:http})})))))};exports.RootComponent=RootComponent},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.UpgradeAssistantTabs=void 0;var _lodash=__webpack_require__(21);var _react=_interopRequireDefault(__webpack_require__(14));var _eui=__webpack_require__(15);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(16);var _latest_minor_banner=__webpack_require__(32);var _checkup=__webpack_require__(33);var _overview=__webpack_require__(57);var _types=__webpack_require__(20);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ClusterUpgradeState;(function(ClusterUpgradeState){ClusterUpgradeState[ClusterUpgradeState["needsUpgrade"]=0]="needsUpgrade";ClusterUpgradeState[ClusterUpgradeState["partiallyUpgraded"]=1]="partiallyUpgraded";ClusterUpgradeState[ClusterUpgradeState["upgraded"]=2]="upgraded"})(ClusterUpgradeState||(ClusterUpgradeState={}));var UpgradeAssistantTabs=function(_React$Component){_inherits(UpgradeAssistantTabs,_React$Component);function UpgradeAssistantTabs(props){var _this;_classCallCheck(this,UpgradeAssistantTabs);_this=_possibleConstructorReturn(this,_getPrototypeOf(UpgradeAssistantTabs).call(this,props));_defineProperty(_assertThisInitialized(_this),"onTabClick",(function(selectedTab){var selectedTabIndex=(0,_lodash.findIndex)(_this.tabs,{id:selectedTab.id});if(selectedTabIndex===-1){throw new Error("Clicked tab did not exist in tabs array")}if(_this.tabs[_this.state.selectedTabIndex].id!==selectedTab.id){_this.sendTelemetryInfo(selectedTab.id)}_this.setSelectedTabIndex(selectedTabIndex)}));_defineProperty(_assertThisInitialized(_this),"setSelectedTabIndex",(function(selectedTabIndex){_this.setState({selectedTabIndex:selectedTabIndex})}));_defineProperty(_assertThisInitialized(_this),"loadData",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var resp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_this.setState({loadingState:_types.LoadingState.Loading});_context.next=4;return _this.props.http.get("/api/upgrade_assistant/status");case 4:resp=_context.sent;_this.setState({loadingState:_types.LoadingState.Success,checkupData:resp});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](0);if((0,_lodash.get)(_context.t0,"response.status")===426){_this.setState({loadingState:_types.LoadingState.Success,clusterUpgradeState:(0,_lodash.get)(_context.t0,"response.data.attributes.allNodesUpgraded",false)?ClusterUpgradeState.upgraded:ClusterUpgradeState.partiallyUpgraded})}else{_this.setState({loadingState:_types.LoadingState.Error,loadingError:_context.t0})}case 11:case"end":return _context.stop()}}}),_callee,null,[[0,8]])}))));_this.state={loadingState:_types.LoadingState.Loading,clusterUpgradeState:ClusterUpgradeState.needsUpgrade,selectedTabIndex:0,telemetryState:_types.TelemetryState.Complete};return _this}_createClass(UpgradeAssistantTabs,[{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.loadData();case 2:this.sendTelemetryInfo(this.tabs[this.state.selectedTabIndex].id);case 3:case"end":return _context2.stop()}}}),_callee2,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"render",value:function render(){var _this$state=this.state,selectedTabIndex=_this$state.selectedTabIndex,telemetryState=_this$state.telemetryState,clusterUpgradeState=_this$state.clusterUpgradeState;var tabs=this.tabs;if(clusterUpgradeState===ClusterUpgradeState.partiallyUpgraded){return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_eui.EuiPageContentBody,null,_react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"logoElasticsearch",title:_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.tabs.upgradingInterstitial.upgradingTitle",defaultMessage:"Your cluster is upgrading"})),body:_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.tabs.upgradingInterstitial.upgradingDescription",defaultMessage:"One or more Elasticsearch nodes have a newer version of Elasticsearch than Kibana. Once all your nodes are upgraded, upgrade Kibana."}))})))}else if(clusterUpgradeState===ClusterUpgradeState.upgraded){return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_eui.EuiPageContentBody,null,_react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"logoElasticsearch",title:_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.tabs.upgradingInterstitial.upgradeCompleteTitle",defaultMessage:"Your cluster has been upgraded"})),body:_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.tabs.upgradingInterstitial.upgradeCompleteDescription",defaultMessage:"All Elasticsearch nodes have been upgraded. You may now upgrade Kibana."}))})))}return _react.default.createElement(_eui.EuiTabbedContent,{"data-test-subj":telemetryState===_types.TelemetryState.Running?"upgradeAssistantTelemetryRunning":undefined,tabs:tabs,onTabClick:this.onTabClick,selectedTab:tabs[selectedTabIndex]})}},{key:"sendTelemetryInfo",value:function(){var _sendTelemetryInfo=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(tabName){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(this.state.loadingState!==_types.LoadingState.Success)){_context3.next=2;break}return _context3.abrupt("return");case 2:this.setState({telemetryState:_types.TelemetryState.Running});_context3.next=5;return this.props.http.fetch("/api/upgrade_assistant/telemetry/ui_open",{method:"PUT",body:JSON.stringify((0,_lodash.set)({},tabName,true))});case 5:this.setState({telemetryState:_types.TelemetryState.Complete});case 6:case"end":return _context3.stop()}}}),_callee3,this)})));function sendTelemetryInfo(_x){return _sendTelemetryInfo.apply(this,arguments)}return sendTelemetryInfo}()},{key:"tabs",get:function get(){var _this$state2=this.state,loadingError=_this$state2.loadingError,loadingState=_this$state2.loadingState,checkupData=_this$state2.checkupData;var commonProps={loadingError:loadingError,loadingState:loadingState,refreshCheckupData:this.loadData,setSelectedTabIndex:this.setSelectedTabIndex,alertBanner:_react.default.createElement(_latest_minor_banner.LatestMinorBanner,null)};return[{id:"overview",name:_i18n.i18n.translate("xpack.upgradeAssistant.overviewTab.overviewTabTitle",{defaultMessage:"Overview"}),content:_react.default.createElement(_overview.OverviewTab,_extends({checkupData:checkupData},commonProps))},{id:"cluster",name:_i18n.i18n.translate("xpack.upgradeAssistant.checkupTab.clusterTabLabel",{defaultMessage:"Cluster"}),content:_react.default.createElement(_checkup.CheckupTab,_extends({key:"cluster",deprecations:checkupData?checkupData.cluster:undefined,checkupLabel:_i18n.i18n.translate("xpack.upgradeAssistant.tabs.checkupTab.clusterLabel",{defaultMessage:"cluster"})},commonProps))},{id:"indices",name:_i18n.i18n.translate("xpack.upgradeAssistant.checkupTab.indicesTabLabel",{defaultMessage:"Indices"}),content:_react.default.createElement(_checkup.CheckupTab,_extends({key:"indices",deprecations:checkupData?checkupData.indices:undefined,checkupLabel:_i18n.i18n.translate("xpack.upgradeAssistant.checkupTab.indexLabel",{defaultMessage:"index"}),showBackupWarning:true},commonProps))}]}}]);return UpgradeAssistantTabs}(_react.default.Component);exports.UpgradeAssistantTabs=UpgradeAssistantTabs},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LatestMinorBanner=void 0;var _react=_interopRequireDefault(__webpack_require__(14));var _eui=__webpack_require__(15);var _react2=__webpack_require__(16);var _version=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LatestMinorBanner=function LatestMinorBanner(){return _react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.tabs.incompleteCallout.calloutTitle",defaultMessage:"Issues list might be incomplete"}),color:"warning",iconType:"help"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.tabs.incompleteCallout.calloutBody.calloutDetail",defaultMessage:"The complete list of {breakingChangesDocButton} in Elasticsearch {nextEsVersion} will be available in the final {currentEsVersion} minor release. When the list is complete, this warning will go away.",values:{breakingChangesDocButton:_react.default.createElement(_eui.EuiLink,{href:"https://www.elastic.co/guide/en/elasticsearch/reference/master/breaking-changes.html",target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.tabs.incompleteCallout.calloutBody.breackingChangesDocButtonLabel",defaultMessage:"deprecations and breaking changes"})),nextEsVersion:"".concat(_version.NEXT_MAJOR_VERSION,".x"),currentEsVersion:"".concat(_version.CURRENT_MAJOR_VERSION,".x")}})))};exports.LatestMinorBanner=LatestMinorBanner},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CheckupTab",{enumerable:true,get:function get(){return _checkup_tab.CheckupTab}});var _checkup_tab=__webpack_require__(34)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.CheckupTab=void 0;var _lodash=__webpack_require__(21);var _react=_interopRequireWildcard(__webpack_require__(14));var _eui=__webpack_require__(15);var _react2=__webpack_require__(16);var _version=__webpack_require__(3);var _error_banner=__webpack_require__(24);var _types=__webpack_require__(20);var _controls=__webpack_require__(35);var _grouped=__webpack_require__(42);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var CheckupTab=function(_UpgradeAssistantTabC){_inherits(CheckupTab,_UpgradeAssistantTabC);function CheckupTab(props){var _this;_classCallCheck(this,CheckupTab);_this=_possibleConstructorReturn(this,_getPrototypeOf(CheckupTab).call(this,props));_defineProperty(_assertThisInitialized(_this),"changeFilter",(function(filter){_this.setState({currentFilter:filter})}));_defineProperty(_assertThisInitialized(_this),"changeSearch",(function(search){_this.setState({search:search})}));_defineProperty(_assertThisInitialized(_this),"changeGroupBy",(function(groupBy){_this.setState({currentGroupBy:groupBy})}));_this.state={currentFilter:_types.LevelFilterOption.all,search:"",currentGroupBy:_types.GroupByOption.message};return _this}_createClass(CheckupTab,[{key:"render",value:function render(){var _this$props=this.props,alertBanner=_this$props.alertBanner,checkupLabel=_this$props.checkupLabel,deprecations=_this$props.deprecations,loadingError=_this$props.loadingError,loadingState=_this$props.loadingState,refreshCheckupData=_this$props.refreshCheckupData,setSelectedTabIndex=_this$props.setSelectedTabIndex,_this$props$showBacku=_this$props.showBackupWarning,showBackupWarning=_this$props$showBacku===void 0?false:_this$props$showBacku;var _this$state=this.state,currentFilter=_this$state.currentFilter,currentGroupBy=_this$state.currentGroupBy;return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiText,{grow:false},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.tabDetail",defaultMessage:"These {strongCheckupLabel} issues need your attention. Resolve them before upgrading to Elasticsearch {nextEsVersion}.",values:{strongCheckupLabel:_react.default.createElement("strong",null,checkupLabel),nextEsVersion:"".concat(_version.NEXT_MAJOR_VERSION,".x")}}))),_react.default.createElement(_eui.EuiSpacer,null),alertBanner&&_react.default.createElement(_react.Fragment,null,alertBanner,_react.default.createElement(_eui.EuiSpacer,null)),showBackupWarning&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.backUpCallout.calloutTitle",defaultMessage:"Back up your indices now"}),color:"warning",iconType:"help"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.backUpCallout.calloutBody.calloutDetail",defaultMessage:"Back up your data using the {snapshotRestoreDocsButton}.",values:{snapshotRestoreDocsButton:_react.default.createElement(_eui.EuiLink,{href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.0/modules-snapshots.html",target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.backUpCallout.calloutBody.snapshotRestoreDocsButtonLabel",defaultMessage:"snapshot and restore APIs"}))}}))),_react.default.createElement(_eui.EuiSpacer,null)),_react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_eui.EuiPageContentBody,null,loadingState===_types.LoadingState.Error?_react.default.createElement(_error_banner.LoadingErrorBanner,{loadingError:loadingError}):deprecations&&deprecations.length>0?_react.default.createElement(_react.Fragment,null,_react.default.createElement(_controls.CheckupControls,{allDeprecations:deprecations,loadingState:loadingState,loadData:refreshCheckupData,currentFilter:currentFilter,onFilterChange:this.changeFilter,onSearchChange:this.changeSearch,availableGroupByOptions:this.availableGroupByOptions(),currentGroupBy:currentGroupBy,onGroupByChange:this.changeGroupBy}),_react.default.createElement(_eui.EuiSpacer,null),this.renderCheckupData()):_react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"faceHappy",title:_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.noIssues.noIssuesTitle",defaultMessage:"All clear!"})),body:_react.default.createElement(_react.Fragment,null,_react.default.createElement("p",{"data-test-subj":"upgradeAssistantIssueSummary"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.noIssues.noIssuesLabel",defaultMessage:"You have no {strongCheckupLabel} issues.",values:{strongCheckupLabel:_react.default.createElement("strong",null,checkupLabel)}})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.noIssues.nextStepsDetail",defaultMessage:"Check the {overviewTabButton} for next steps.",values:{overviewTabButton:_react.default.createElement(_eui.EuiLink,{onClick:function onClick(){return setSelectedTabIndex(0)}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.noIssues.nextStepsDetail.overviewTabButtonLabel",defaultMessage:"Overview tab"}))}})))}))))}},{key:"availableGroupByOptions",value:function availableGroupByOptions(){var deprecations=this.props.deprecations;if(!deprecations){return[]}return Object.keys(_types.GroupByOption).filter((function(opt){return(0,_lodash.find)(deprecations,opt)}))}},{key:"renderCheckupData",value:function renderCheckupData(){var deprecations=this.props.deprecations;var _this$state2=this.state,currentFilter=_this$state2.currentFilter,currentGroupBy=_this$state2.currentGroupBy,search=_this$state2.search;return _react.default.createElement(_grouped.GroupedDeprecations,{currentGroupBy:currentGroupBy,currentFilter:currentFilter,search:search,allDeprecations:deprecations})}}]);return CheckupTab}(_types.UpgradeAssistantTabComponent);exports.CheckupTab=CheckupTab},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CheckupControls=void 0;var _react=_interopRequireWildcard(__webpack_require__(14));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(15);var _react2=__webpack_require__(16);var _types=__webpack_require__(20);var _filter_bar=__webpack_require__(36);var _group_by_bar=__webpack_require__(37);var _utils=__webpack_require__(38);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var CheckupControls=function CheckupControls(_ref){var allDeprecations=_ref.allDeprecations,loadingState=_ref.loadingState,loadData=_ref.loadData,currentFilter=_ref.currentFilter,onFilterChange=_ref.onFilterChange,onSearchChange=_ref.onSearchChange,availableGroupByOptions=_ref.availableGroupByOptions,currentGroupBy=_ref.currentGroupBy,onGroupByChange=_ref.onGroupByChange;var _useState=(0,_react.useState)(null),_useState2=_slicedToArray(_useState,2),searchTermError=_useState2[0],setSearchTermError=_useState2[1];var filterInvalid=Boolean(searchTermError);return _react.default.createElement(_eui.EuiFlexGroup,{direction:"column",responsive:false},_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",wrap:true,responsive:false},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFieldSearch,{isInvalid:filterInvalid,"aria-label":_i18n.i18n.translate("xpack.upgradeAssistant.checkupTab.controls.searchBarPlaceholderAriaLabel",{defaultMessage:"Filter"}),placeholder:_i18n.i18n.translate("xpack.upgradeAssistant.checkupTab.controls.searchBarPlaceholder",{defaultMessage:"Filter"}),onChange:function onChange(e){var string=e.target.value;var errorMessage=(0,_utils.validateRegExpString)(string);if(errorMessage){onSearchChange("");setSearchTermError(errorMessage)}else{onSearchChange(e.target.value);if(searchTermError){setSearchTermError(null)}}}})),_react.default.createElement(_filter_bar.FilterBar,{allDeprecations:allDeprecations,currentFilter:currentFilter,onFilterChange:onFilterChange}),_react.default.createElement(_group_by_bar.GroupByBar,{availableGroupByOptions:availableGroupByOptions,currentGroupBy:currentGroupBy,onGroupByChange:onGroupByChange}),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{fill:true,onClick:loadData,iconType:"refresh",isLoading:loadingState===_types.LoadingState.Loading},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.controls.refreshButtonLabel",defaultMessage:"Refresh"}))))),filterInvalid&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiCallOut,{color:"danger",title:_i18n.i18n.translate("xpack.upgradeAssistant.checkupTab.controls.filterErrorMessageLabel",{defaultMessage:"Filter invalid: {searchTermError}",values:{searchTermError:searchTermError}}),iconType:"faceSad"})))};exports.CheckupControls=CheckupControls},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBar=void 0;var _lodash=__webpack_require__(21);var _react=_interopRequireDefault(__webpack_require__(14));var _eui=__webpack_require__(15);var _i18n=__webpack_require__(2);var _types=__webpack_require__(20);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LocalizedOptions={all:_i18n.i18n.translate("xpack.upgradeAssistant.checkupTab.controls.filterBar.allButtonLabel",{defaultMessage:"all"}),critical:_i18n.i18n.translate("xpack.upgradeAssistant.checkupTab.controls.filterBar.criticalButtonLabel",{defaultMessage:"critical"})};var allFilterOptions=Object.keys(_types.LevelFilterOption);var FilterBar=function FilterBar(_ref){var _ref$allDeprecations=_ref.allDeprecations,allDeprecations=_ref$allDeprecations===void 0?[]:_ref$allDeprecations,currentFilter=_ref.currentFilter,onFilterChange=_ref.onFilterChange;var levelGroups=(0,_lodash.groupBy)(allDeprecations,"level");var levelCounts=Object.keys(levelGroups).reduce((function(counts,level){counts[level]=levelGroups[level].length;return counts}),{});var allCount=allDeprecations.length;return _react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFilterGroup,null,allFilterOptions.map((function(option){return _react.default.createElement(_eui.EuiFilterButton,{key:option,onClick:onFilterChange.bind(null,option),hasActiveFilters:currentFilter===option,numFilters:option===_types.LevelFilterOption.all?allCount:levelCounts[option]||undefined},LocalizedOptions[option])}))))};exports.FilterBar=FilterBar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GroupByBar=void 0;var _react=_interopRequireDefault(__webpack_require__(14));var _eui=__webpack_require__(15);var _i18n=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LocalizedOptions={message:_i18n.i18n.translate("xpack.upgradeAssistant.checkupTab.controls.groupByBar.byIssueLabel",{defaultMessage:"by issue"}),index:_i18n.i18n.translate("xpack.upgradeAssistant.checkupTab.controls.groupByBar.byIndexLabel",{defaultMessage:"by index"})};var GroupByBar=function GroupByBar(_ref){var availableGroupByOptions=_ref.availableGroupByOptions,currentGroupBy=_ref.currentGroupBy,onGroupByChange=_ref.onGroupByChange;if(availableGroupByOptions.length<=1){return null}return _react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFilterGroup,null,availableGroupByOptions.map((function(option){return _react.default.createElement(_eui.EuiFilterButton,{key:option,onClick:onGroupByChange.bind(null,option),hasActiveFilters:currentGroupBy===option},LocalizedOptions[option])}))))};exports.GroupByBar=GroupByBar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateRegExpString=void 0;var _pipeable=__webpack_require__(25);var _Either=__webpack_require__(40);var validateRegExpString=function validateRegExpString(s){return(0,_pipeable.pipe)((0,_Either.tryCatch)((function(){return new RegExp(s)}),(function(e){return e.message})),(0,_Either.fold)((function(errorMessage){return errorMessage}),(function(){return""})))};exports.validateRegExpString=validateRegExpString},,,,function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.GroupedDeprecations=exports.DeprecationAccordion=exports.filterDeps=void 0;var _lodash=__webpack_require__(21);var _react=_interopRequireWildcard(__webpack_require__(14));var _eui=__webpack_require__(15);var _react2=__webpack_require__(16);var _types=__webpack_require__(20);var _count_summary=__webpack_require__(43);var _health=__webpack_require__(44);var _list=__webpack_require__(45);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var filterDeps=function filterDeps(level){var search=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var conditions=[];if(level!==_types.LevelFilterOption.all){conditions.push((function(dep){return dep.level===level}))}if(search.length>0){conditions.push((function(dep){try{var searchReg=new RegExp(search.toLowerCase());return Boolean(dep.message.toLowerCase().match(searchReg)||dep.details&&dep.details.toLowerCase().match(searchReg)||dep.index&&dep.index.toLowerCase().match(searchReg)||dep.node&&dep.node.toLowerCase().match(searchReg))}catch(e){return true}}))}return function(dep){return conditions.map((function(c){return c(dep)})).every((function(t){return t}))}};exports.filterDeps=filterDeps;var DeprecationAccordion=function DeprecationAccordion(_ref){var id=_ref.id,deprecations=_ref.deprecations,title=_ref.title,currentGroupBy=_ref.currentGroupBy,forceExpand=_ref.forceExpand;var hasIndices=Boolean(currentGroupBy===_types.GroupByOption.message&&deprecations.filter((function(d){return d.index})).length);var numIndices=hasIndices?deprecations.length:null;return _react.default.createElement(_eui.EuiAccordion,{id:id,className:"upgDeprecations__item",initialIsOpen:forceExpand,buttonContent:_react.default.createElement("span",{className:"upgDeprecations__itemName"},title),extraAction:_react.default.createElement("div",null,hasIndices&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiBadge,{color:"hollow"},_react.default.createElement("span",{"data-test-subj":"indexCount"},numIndices)," ",_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.indicesBadgeLabel",defaultMessage:"{numIndices, plural, one {index} other {indices}}",values:{numIndices:numIndices}})),"â€ƒ"),_react.default.createElement(_health.DeprecationHealth,{single:currentGroupBy===_types.GroupByOption.message,deprecations:deprecations}))},_react.default.createElement(_list.DeprecationList,{deprecations:deprecations,currentGroupBy:currentGroupBy}))};exports.DeprecationAccordion=DeprecationAccordion;var PER_PAGE=25;var CalcFields={filteredDeprecations:function filteredDeprecations(props){var _props$allDeprecation=props.allDeprecations,allDeprecations=_props$allDeprecation===void 0?[]:_props$allDeprecation,currentFilter=props.currentFilter,search=props.search;return allDeprecations.filter(filterDeps(currentFilter,search))},groups:function groups(props){var currentGroupBy=props.currentGroupBy;return(0,_lodash.groupBy)(CalcFields.filteredDeprecations(props),currentGroupBy)},numPages:function numPages(props){return Math.ceil(Object.keys(CalcFields.groups(props)).length/PER_PAGE)}};var GroupedDeprecations=function(_React$Component){_inherits(GroupedDeprecations,_React$Component);function GroupedDeprecations(){var _getPrototypeOf2;var _this;_classCallCheck(this,GroupedDeprecations);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(GroupedDeprecations)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{forceExpand:false,expandNumber:0,currentPage:0});_defineProperty(_assertThisInitialized(_this),"setExpand",(function(forceExpand){_this.setState({forceExpand:forceExpand,expandNumber:_this.state.expandNumber+1})}));_defineProperty(_assertThisInitialized(_this),"setPage",(function(currentPage){return _this.setState({currentPage:currentPage})}));return _this}_createClass(GroupedDeprecations,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,currentGroupBy=_this$props.currentGroupBy,_this$props$allDeprec=_this$props.allDeprecations,allDeprecations=_this$props$allDeprec===void 0?[]:_this$props$allDeprec;var _this$state=this.state,forceExpand=_this$state.forceExpand,expandNumber=_this$state.expandNumber,currentPage=_this$state.currentPage;var filteredDeprecations=CalcFields.filteredDeprecations(this.props);var groups=CalcFields.groups(this.props);return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{flush:"left",size:"s",onClick:function onClick(){return _this2.setExpand(true)},"data-test-subj":"expandAll"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.controls.expandAllButtonLabel",defaultMessage:"Expand all"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{flush:"left",size:"s",onClick:function onClick(){return _this2.setExpand(false)},"data-test-subj":"collapseAll"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.controls.collapseAllButtonLabel",defaultMessage:"Collapse all"}))),_react.default.createElement(_eui.EuiFlexItem,null),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_count_summary.DeprecationCountSummary,{allDeprecations:allDeprecations,deprecations:filteredDeprecations}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement("div",{className:"upgDeprecations"},Object.keys(groups).sort().slice(currentPage*PER_PAGE,(currentPage+1)*PER_PAGE).map((function(groupName){return[_react.default.createElement(DeprecationAccordion,_extends({key:expandNumber,id:"depgroup-".concat(groupName),title:groupName,deprecations:groups[groupName]},{currentGroupBy:currentGroupBy,forceExpand:forceExpand}))]})),Object.keys(groups).length>PER_PAGE&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceAround"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiPagination,{pageCount:CalcFields.numPages(this.props),activePage:currentPage,onPageClick:this.setPage}))))))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,_ref2){var currentPage=_ref2.currentPage;if(currentPage>=CalcFields.numPages(nextProps)){return{currentPage:0}}else{return null}}}]);return GroupedDeprecations}(_react.default.Component);exports.GroupedDeprecations=GroupedDeprecations},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DeprecationCountSummary=void 0;var _react=_interopRequireWildcard(__webpack_require__(14));var _eui=__webpack_require__(15);var _react2=__webpack_require__(16);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var DeprecationCountSummary=function DeprecationCountSummary(_ref){var deprecations=_ref.deprecations,allDeprecations=_ref.allDeprecations;return _react.default.createElement(_eui.EuiText,{size:"s"},allDeprecations.length?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.numDeprecationsShownLabel",defaultMessage:"Showing {numShown} of {total}",values:{numShown:deprecations.length,total:allDeprecations.length}}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.noDeprecationsLabel",defaultMessage:"No deprecations"}),deprecations.length!==allDeprecations.length&&_react.default.createElement(_react.Fragment,null,". ",_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.changeFiltersShowMoreLabel",description:"Explains how to show all deprecations if there are more available.",defaultMessage:"Change filter to show more."})))};exports.DeprecationCountSummary=DeprecationCountSummary},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DeprecationHealth=exports.LocalizedActions=void 0;var _lodash=__webpack_require__(21);var _react=_interopRequireDefault(__webpack_require__(14));var _eui=__webpack_require__(15);var _i18n=__webpack_require__(2);var _constants=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var LocalizedLevels={warning:_i18n.i18n.translate("xpack.upgradeAssistant.checkupTab.deprecations.warningLabel",{defaultMessage:"warning"}),critical:_i18n.i18n.translate("xpack.upgradeAssistant.checkupTab.deprecations.criticalLabel",{defaultMessage:"critical"})};var LocalizedActions={warning:_i18n.i18n.translate("xpack.upgradeAssistant.checkupTab.deprecations.warningActionTooltip",{defaultMessage:"Resolving this issue before upgrading is advised, but not required."}),critical:_i18n.i18n.translate("xpack.upgradeAssistant.checkupTab.deprecations.criticalActionTooltip",{defaultMessage:"Resolve this issue before upgrading."})};exports.LocalizedActions=LocalizedActions;var SingleHealth=function SingleHealth(_ref){var level=_ref.level,label=_ref.label;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiToolTip,{content:LocalizedActions[level]},_react.default.createElement(_eui.EuiBadge,{color:_constants.COLOR_MAP[level]},label)),"â€ƒ")};var DeprecationHealth=function DeprecationHealth(_ref2){var deprecations=_ref2.deprecations,_ref2$single=_ref2.single,single=_ref2$single===void 0?false:_ref2$single;if(deprecations.length===0){return _react.default.createElement("span",null)}var levels=deprecations.map((function(d){return _constants.LEVEL_MAP[d.level]}));if(single){var highest=Math.max.apply(Math,_toConsumableArray(levels));var highestLevel=_constants.REVERSE_LEVEL_MAP[highest];return _react.default.createElement(SingleHealth,{level:highestLevel,label:LocalizedLevels[highestLevel]})}var countByLevel=(0,_lodash.countBy)(levels);return _react.default.createElement(_react.default.Fragment,null,Object.keys(countByLevel).map((function(k){return parseInt(k,10)})).sort().map((function(level){return[level,_constants.REVERSE_LEVEL_MAP[level]]})).map((function(_ref3){var _ref4=_slicedToArray(_ref3,2),numLevel=_ref4[0],stringLevel=_ref4[1];return _react.default.createElement(SingleHealth,{key:stringLevel,level:stringLevel,label:"".concat(countByLevel[numLevel]," ").concat(LocalizedLevels[stringLevel])})})))};exports.DeprecationHealth=DeprecationHealth},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DeprecationList=void 0;var _react=_interopRequireDefault(__webpack_require__(14));var _types=__webpack_require__(20);var _constants=__webpack_require__(26);var _cell=__webpack_require__(46);var _index_table=__webpack_require__(56);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var sortByLevelDesc=function sortByLevelDesc(a,b){return-1*(_constants.LEVEL_MAP[a.level]-_constants.LEVEL_MAP[b.level])};var MessageDeprecation=function MessageDeprecation(_ref){var deprecation=_ref.deprecation;var items=[];if(deprecation.details){items.push({body:deprecation.details})}return _react.default.createElement(_cell.DeprecationCell,{reindexBlocker:deprecation.blockerForReindexing,headline:deprecation.message,healthColor:_constants.COLOR_MAP[deprecation.level],indexName:deprecation.index,reindex:deprecation.reindex,needsDefaultFields:deprecation.needsDefaultFields,docUrl:deprecation.url,items:items})};var SimpleMessageDeprecation=function SimpleMessageDeprecation(_ref2){var deprecation=_ref2.deprecation;var items=[];if(deprecation.details){items.push({body:deprecation.details})}return _react.default.createElement(_cell.DeprecationCell,{reindexBlocker:deprecation.blockerForReindexing,items:items,docUrl:deprecation.url})};var IndexDeprecation=function IndexDeprecation(_ref3){var deprecation=_ref3.deprecation,indices=_ref3.indices;return _react.default.createElement(_cell.DeprecationCell,{docUrl:deprecation.url},_react.default.createElement(_index_table.IndexDeprecationTable,{indices:indices}))};var DeprecationList=function DeprecationList(_ref4){var deprecations=_ref4.deprecations,currentGroupBy=_ref4.currentGroupBy;if(currentGroupBy===_types.GroupByOption.message&&deprecations[0].index!==undefined){var indices=deprecations.map((function(dep){return{index:dep.index,details:dep.details,reindex:dep.reindex===true,needsDefaultFields:dep.needsDefaultFields===true,blockerForReindexing:dep.blockerForReindexing}}));return _react.default.createElement(IndexDeprecation,{indices:indices,deprecation:deprecations[0]})}else if(currentGroupBy===_types.GroupByOption.index){return _react.default.createElement("div",null,deprecations.sort(sortByLevelDesc).map((function(dep){return _react.default.createElement(MessageDeprecation,{deprecation:dep,key:dep.message})})))}else{return _react.default.createElement("div",null,deprecations.sort(sortByLevelDesc).map((function(dep){return _react.default.createElement(SimpleMessageDeprecation,{deprecation:dep,key:dep.message})})))}};exports.DeprecationList=DeprecationList},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DeprecationCell=void 0;var _react=_interopRequireDefault(__webpack_require__(14));var _eui=__webpack_require__(15);var _react2=__webpack_require__(16);var _button=__webpack_require__(27);var _reindex=__webpack_require__(28);var _app_context=__webpack_require__(23);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DeprecationCell=function DeprecationCell(_ref){var headline=_ref.headline,healthColor=_ref.healthColor,indexName=_ref.indexName,reindex=_ref.reindex,needsDefaultFields=_ref.needsDefaultFields,docUrl=_ref.docUrl,_ref$items=_ref.items,items=_ref$items===void 0?[]:_ref$items,children=_ref.children,reindexBlocker=_ref.reindexBlocker;return _react.default.createElement("div",{className:"upgDeprecationCell"},_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,wrap:true,alignItems:"baseline"},healthColor&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiIcon,{type:"dot",color:healthColor})),_react.default.createElement(_eui.EuiFlexItem,{grow:true},headline&&_react.default.createElement(_eui.EuiTitle,{size:"xxs"},_react.default.createElement("h2",null,headline)),docUrl&&_react.default.createElement("div",null,_react.default.createElement(_eui.EuiLink,{href:docUrl,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.deprecations.documentationButtonLabel",defaultMessage:"Documentation"})),_react.default.createElement(_eui.EuiSpacer,{size:"s"})),items.map((function(item){return _react.default.createElement("div",{key:item.title||item.body},_react.default.createElement(_eui.EuiText,null,item.title&&_react.default.createElement("h6",null,item.title),_react.default.createElement("p",null,item.body)))}))),reindex&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_app_context.AppContext.Consumer,null,(function(_ref2){var http=_ref2.http,docLinks=_ref2.docLinks;return _react.default.createElement(_reindex.ReindexButton,{docLinks:docLinks,reindexBlocker:reindexBlocker,indexName:indexName,http:http})}))),needsDefaultFields&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_app_context.AppContext.Consumer,null,(function(_ref3){var http=_ref3.http;return _react.default.createElement(_button.FixDefaultFieldsButton,{indexName:indexName,http:http})})))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),children)};exports.DeprecationCell=DeprecationCell},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ReindexButton=void 0;var _lodash=__webpack_require__(21);var _react=_interopRequireWildcard(__webpack_require__(14));var _i18n=__webpack_require__(2);var _eui=__webpack_require__(15);var _react2=__webpack_require__(16);var _types=__webpack_require__(22);var _types2=__webpack_require__(20);var _flyout=__webpack_require__(48);var _polling_service=__webpack_require__(55);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ReindexButton=function(_React$Component){_inherits(ReindexButton,_React$Component);function ReindexButton(props){var _this;_classCallCheck(this,ReindexButton);_this=_possibleConstructorReturn(this,_getPrototypeOf(ReindexButton).call(this,props));_defineProperty(_assertThisInitialized(_this),"service",void 0);_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_defineProperty(_assertThisInitialized(_this),"startReindex",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!_this.state.reindexState.status){_this.sendUIReindexTelemetryInfo("start")}_context.next=3;return _this.service.startReindex();case 3:case"end":return _context.stop()}}}),_callee)}))));_defineProperty(_assertThisInitialized(_this),"cancelReindex",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.sendUIReindexTelemetryInfo("stop");_context2.next=3;return _this.service.cancelReindex();case 3:case"end":return _context2.stop()}}}),_callee2)}))));_defineProperty(_assertThisInitialized(_this),"showFlyout",(function(){_this.sendUIReindexTelemetryInfo("open");_this.setState({flyoutVisible:true})}));_defineProperty(_assertThisInitialized(_this),"closeFlyout",(function(){_this.sendUIReindexTelemetryInfo("close");_this.setState({flyoutVisible:false})}));_this.service=_this.newService();_this.state={flyoutVisible:false,reindexState:_this.service.status$.value};return _this}_createClass(ReindexButton,[{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.subscribeToUpdates();case 1:case"end":return _context3.stop()}}}),_callee3,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"componentWillUnmount",value:function(){var _componentWillUnmount=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this.unsubscribeToUpdates();case 1:case"end":return _context4.stop()}}}),_callee4,this)})));function componentWillUnmount(){return _componentWillUnmount.apply(this,arguments)}return componentWillUnmount}()},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(prevProps.indexName!==this.props.indexName){this.unsubscribeToUpdates();this.service=this.newService();this.subscribeToUpdates()}}},{key:"render",value:function render(){var _this$props=this.props,indexName=_this$props.indexName,reindexBlocker=_this$props.reindexBlocker,docLinks=_this$props.docLinks;var _this$state=this.state,flyoutVisible=_this$state.flyoutVisible,reindexState=_this$state.reindexState;var buttonProps={size:"s",onClick:this.showFlyout};var buttonContent=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.reindexLabel",defaultMessage:"Reindex"});if(reindexState.loadingState===_types2.LoadingState.Loading){buttonProps.disabled=true;buttonContent=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.loadingLabel",defaultMessage:"Loadingâ€¦"})}else{switch(reindexState.status){case _types.ReindexStatus.inProgress:buttonContent=_react.default.createElement("span",null,_react.default.createElement(_eui.EuiLoadingSpinner,{className:"upgReindexButton__spinner",size:"m"})," Reindexingâ€¦");break;case _types.ReindexStatus.completed:buttonProps.color="secondary";buttonProps.iconSide="left";buttonProps.iconType="check";buttonContent=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.doneLabel",defaultMessage:"Done"});break;case _types.ReindexStatus.failed:buttonProps.color="danger";buttonProps.iconSide="left";buttonProps.iconType="cross";buttonContent=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.failedLabel",defaultMessage:"Failed"});break;case _types.ReindexStatus.paused:buttonProps.color="warning";buttonProps.iconSide="left";buttonProps.iconType="pause";buttonContent=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.pausedLabel",defaultMessage:"Paused"});case _types.ReindexStatus.cancelled:buttonProps.color="danger";buttonProps.iconSide="left";buttonProps.iconType="cross";buttonContent=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.cancelledLabel",defaultMessage:"Cancelled"});break}}var showIndexedClosedWarning=reindexBlocker==="index-closed"&&reindexState.status!==_types.ReindexStatus.completed;if(showIndexedClosedWarning){buttonProps.color="warning";buttonProps.iconType="alert"}var button=_react.default.createElement(_eui.EuiButton,buttonProps,buttonContent);return _react.default.createElement(_react.Fragment,null,showIndexedClosedWarning?_react.default.createElement(_eui.EuiToolTip,{position:"top",content:_react.default.createElement(_eui.EuiText,{size:"s"},_i18n.i18n.translate("xpack.upgradeAssistant.checkupTab.reindexing.reindexButton.indexClosedToolTipDetails",{defaultMessage:'"{indexName}" needs to be reindexed, but it is currently closed. The Upgrade Assistant will open, reindex and then close the index. Reindexing may take longer than usual.',values:{indexName:indexName}}))},button):button,flyoutVisible&&_react.default.createElement(_flyout.ReindexFlyout,{http:this.props.http,reindexBlocker:reindexBlocker,docLinks:docLinks,indexName:indexName,closeFlyout:this.closeFlyout,reindexState:reindexState,startReindex:this.startReindex,cancelReindex:this.cancelReindex}))}},{key:"newService",value:function newService(){var _this$props2=this.props,indexName=_this$props2.indexName,http=_this$props2.http;return new _polling_service.ReindexPollingService(indexName,http)}},{key:"subscribeToUpdates",value:function subscribeToUpdates(){var _this2=this;this.service.updateStatus();this.subscription=this.service.status$.subscribe((function(reindexState){return _this2.setState({reindexState:reindexState})}))}},{key:"unsubscribeToUpdates",value:function unsubscribeToUpdates(){if(this.subscription){this.subscription.unsubscribe();delete this.subscription}if(this.service){this.service.stopPolling()}}},{key:"sendUIReindexTelemetryInfo",value:function(){var _sendUIReindexTelemetryInfo=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(uiReindexAction){return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.props.http.fetch("/api/upgrade_assistant/telemetry/ui_reindex",{method:"PUT",body:JSON.stringify((0,_lodash.set)({},uiReindexAction,true))});case 2:case"end":return _context5.stop()}}}),_callee5,this)})));function sendUIReindexTelemetryInfo(_x){return _sendUIReindexTelemetryInfo.apply(this,arguments)}return sendUIReindexTelemetryInfo}()}]);return ReindexButton}(_react.default.Component);exports.ReindexButton=ReindexButton},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ReindexFlyout",{enumerable:true,get:function get(){return _container.ReindexFlyout}});var _container=__webpack_require__(49)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ReindexFlyout=void 0;var _react=_interopRequireDefault(__webpack_require__(14));var _i18n=__webpack_require__(2);var _react2=__webpack_require__(16);var _eui=__webpack_require__(15);var _types=__webpack_require__(22);var _checklist_step=__webpack_require__(50);var _warnings_step=__webpack_require__(54);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ReindexFlyoutStep;(function(ReindexFlyoutStep){ReindexFlyoutStep[ReindexFlyoutStep["reindexWarnings"]=0]="reindexWarnings";ReindexFlyoutStep[ReindexFlyoutStep["checklist"]=1]="checklist"})(ReindexFlyoutStep||(ReindexFlyoutStep={}));var getOpenAndCloseIndexDocLink=function getOpenAndCloseIndexDocLink(_ref){var ELASTIC_WEBSITE_URL=_ref.ELASTIC_WEBSITE_URL,DOC_LINK_VERSION=_ref.DOC_LINK_VERSION;return _react.default.createElement(_eui.EuiLink,{target:"_blank",href:"".concat(ELASTIC_WEBSITE_URL,"/guide/en/elasticsearch/reference/").concat(DOC_LINK_VERSION,"/indices-open-close.html")},_i18n.i18n.translate("xpack.upgradeAssistant.checkupTab.reindexing.flyout.openAndCloseDocumentation",{defaultMessage:"documentation"}))};var getIndexClosedCallout=function getIndexClosedCallout(docLinks){return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiCallOut,{title:_i18n.i18n.translate("xpack.upgradeAssistant.checkupTab.reindexing.flyout.indexClosedCallout.calloutTitle",{defaultMessage:"Index closed"}),color:"warning",iconType:"alert"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.indexClosedCallout.calloutDetails",defaultMessage:"This index is currently closed. The Upgrade Assistant will open, reindex and then close the index. {reindexingMayTakeLongerEmph}. Please see the {docs} for more information.",values:{docs:getOpenAndCloseIndexDocLink(docLinks),reindexingMayTakeLongerEmph:_react.default.createElement("b",null,_i18n.i18n.translate("xpack.upgradeAssistant.checkupTab.reindexing.flyout.indexClosedCallout.calloutDetails.reindexingTakesLongerEmphasis",{defaultMessage:"Reindexing may take longer than usual"}))}}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}))};var ReindexFlyout=function(_React$Component){_inherits(ReindexFlyout,_React$Component);function ReindexFlyout(props){var _this;_classCallCheck(this,ReindexFlyout);_this=_possibleConstructorReturn(this,_getPrototypeOf(ReindexFlyout).call(this,props));_defineProperty(_assertThisInitialized(_this),"advanceNextStep",(function(){_this.setState({currentFlyoutStep:ReindexFlyoutStep.checklist})}));var _props$reindexState=props.reindexState,status=_props$reindexState.status,reindexWarnings=_props$reindexState.reindexWarnings;_this.state={currentFlyoutStep:reindexWarnings&&reindexWarnings.length>0&&status===undefined?ReindexFlyoutStep.reindexWarnings:ReindexFlyoutStep.checklist};return _this}_createClass(ReindexFlyout,[{key:"render",value:function render(){var _this$props=this.props,closeFlyout=_this$props.closeFlyout,indexName=_this$props.indexName,reindexState=_this$props.reindexState,startReindex=_this$props.startReindex,cancelReindex=_this$props.cancelReindex,reindexBlocker=_this$props.reindexBlocker,docLinks=_this$props.docLinks;var currentFlyoutStep=this.state.currentFlyoutStep;var flyoutContents;var globalCallout=reindexBlocker==="index-closed"&&reindexState.status!==_types.ReindexStatus.completed?getIndexClosedCallout(docLinks):undefined;switch(currentFlyoutStep){case ReindexFlyoutStep.reindexWarnings:flyoutContents=_react.default.createElement(_warnings_step.WarningsFlyoutStep,{renderGlobalCallouts:function renderGlobalCallouts(){return globalCallout},closeFlyout:closeFlyout,warnings:reindexState.reindexWarnings,advanceNextStep:this.advanceNextStep});break;case ReindexFlyoutStep.checklist:flyoutContents=_react.default.createElement(_checklist_step.ChecklistFlyoutStep,{http:this.props.http,renderGlobalCallouts:function renderGlobalCallouts(){return globalCallout},closeFlyout:closeFlyout,reindexState:reindexState,startReindex:startReindex,cancelReindex:cancelReindex});break;default:throw new Error("Invalid flyout step: ".concat(currentFlyoutStep))}return _react.default.createElement(_eui.EuiPortal,null,_react.default.createElement(_eui.EuiFlyout,{onClose:closeFlyout,"aria-labelledby":"Reindex",ownFocus:true,size:"m",maxWidth:true},_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.flyoutHeader",defaultMessage:"Reindex {indexName}",values:{indexName:indexName}})))),flyoutContents))}}]);return ReindexFlyout}(_react.default.Component);exports.ReindexFlyout=ReindexFlyout},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ChecklistFlyoutStep=void 0;var _react=_interopRequireWildcard(__webpack_require__(14));var _eui=__webpack_require__(15);var _react2=__webpack_require__(16);var _types=__webpack_require__(22);var _types2=__webpack_require__(20);var _progress=__webpack_require__(51);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var buttonLabel=function buttonLabel(status){switch(status){case _types.ReindexStatus.failed:return _react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.tryAgainLabel",defaultMessage:"Try again"});case _types.ReindexStatus.inProgress:return _react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.reindexingLabel",defaultMessage:"Reindexingâ€¦"});case _types.ReindexStatus.completed:return _react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.doneLabel",defaultMessage:"Done!"});case _types.ReindexStatus.paused:return _react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.resumeLabel",defaultMessage:"Resume"});default:return _react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexButton.runReindexLabel",defaultMessage:"Run reindex"})}};var ChecklistFlyoutStep=function ChecklistFlyoutStep(_ref){var closeFlyout=_ref.closeFlyout,reindexState=_ref.reindexState,startReindex=_ref.startReindex,cancelReindex=_ref.cancelReindex,http=_ref.http,renderGlobalCallouts=_ref.renderGlobalCallouts;var loadingState=reindexState.loadingState,status=reindexState.status,hasRequiredPrivileges=reindexState.hasRequiredPrivileges,reindexWarnings=reindexState.reindexWarnings;var loading=loadingState===_types2.LoadingState.Loading||status===_types.ReindexStatus.inProgress;return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlyoutBody,null,renderGlobalCallouts(),_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.readonlyCallout.calloutTitle",defaultMessage:"Index is unable to ingest, update, or delete documents while reindexing"}),color:"warning",iconType:"alert"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.readonlyCallout.cantStopDetail",defaultMessage:"If you canâ€™t stop document updates or need to reindex into a new cluster, consider using a different upgrade strategy."})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.readonlyCallout.backgroundResumeDetail",defaultMessage:"Reindexing will continue in the background, but if Kibana shuts down or restarts you will need to return to this page to resume reindexing."}))),!hasRequiredPrivileges&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.insufficientPrivilegeCallout.calloutTitle",defaultMessage:"You do not have sufficient privileges to reindex this index"}),color:"danger",iconType:"alert"})),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h3",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklistTitle",defaultMessage:"Reindexing process"}))),_react.default.createElement(_progress.ReindexProgress,{reindexState:reindexState,cancelReindex:cancelReindex}),reindexWarnings&&reindexWarnings.includes(_types.ReindexWarning.apmReindex)&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.apmIndexPatternCallout.calloutTitle",defaultMessage:"After reindexing APM indices, return to the {apmSetupLink} to reload Kibana objects. You only need to do this once.",values:{apmSetupLink:_react.default.createElement(_eui.EuiLink,{href:http.basePath.prepend("/app/kibana#/home/tutorial/apm"),target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.apmIndexPatternCallout.apmSetupLinkLabel",defaultMessage:"APM Setup Instructions"}))}}),color:"warning",iconType:"alert"}))),_react.default.createElement(_eui.EuiFlyoutFooter,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"cross",onClick:closeFlyout,flush:"left"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.closeButtonLabel",defaultMessage:"Close"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{fill:true,color:status===_types.ReindexStatus.paused?"warning":"primary",iconType:status===_types.ReindexStatus.paused?"play":undefined,onClick:startReindex,isLoading:loading,disabled:loading||status===_types.ReindexStatus.completed||!hasRequiredPrivileges},buttonLabel(status))))))};exports.ChecklistFlyoutStep=ChecklistFlyoutStep},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ReindexProgress=void 0;var _react=_interopRequireDefault(__webpack_require__(14));var _eui=__webpack_require__(15);var _react2=__webpack_require__(16);var _types=__webpack_require__(22);var _types2=__webpack_require__(20);var _step_progress=__webpack_require__(52);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ErrorCallout=function ErrorCallout(_ref){var errorMessage=_ref.errorMessage;return _react.default.createElement(_eui.EuiCallOut,{color:"danger",title:"There was an error"},_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,errorMessage)))};var PausedCallout=function PausedCallout(){return _react.default.createElement(_eui.EuiCallOut,{color:"warning",title:"This step was paused due to a Kibana restart. Click 'Resume' below to continue."})};var ReindexProgressBar=function ReindexProgressBar(_ref2){var _ref2$reindexState=_ref2.reindexState,lastCompletedStep=_ref2$reindexState.lastCompletedStep,status=_ref2$reindexState.status,reindexTaskPercComplete=_ref2$reindexState.reindexTaskPercComplete,cancelLoadingState=_ref2$reindexState.cancelLoadingState,cancelReindex=_ref2.cancelReindex;var progressBar=reindexTaskPercComplete?_react.default.createElement(_eui.EuiProgress,{size:"s",value:reindexTaskPercComplete,max:1}):_react.default.createElement(_eui.EuiProgress,{size:"s"});var cancelText;switch(cancelLoadingState){case _types2.LoadingState.Loading:cancelText=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.cancellingLabel",defaultMessage:"Cancellingâ€¦"});break;case _types2.LoadingState.Success:cancelText=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.cancelledLabel",defaultMessage:"Cancelled"});break;case _types2.LoadingState.Error:cancelText="Could not cancel";cancelText=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.errorLabel",defaultMessage:"Could not cancel"});break;default:cancelText=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.cancelButton.cancelLabel",defaultMessage:"Cancel"})}return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,null,progressBar),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{onClick:cancelReindex,disabled:cancelLoadingState===_types2.LoadingState.Loading||status!==_types.ReindexStatus.inProgress||lastCompletedStep!==_types.ReindexStep.reindexStarted,isLoading:cancelLoadingState===_types2.LoadingState.Loading},cancelText)))};var orderedSteps=Object.values(_types.ReindexStep).sort();var ReindexProgress=function ReindexProgress(props){var _props$reindexState=props.reindexState,errorMessage=_props$reindexState.errorMessage,indexGroup=_props$reindexState.indexGroup,_props$reindexState$l=_props$reindexState.lastCompletedStep,lastCompletedStep=_props$reindexState$l===void 0?-1:_props$reindexState$l,status=_props$reindexState.status;var stepDetails=function stepDetails(thisStep){var previousStep=orderedSteps[orderedSteps.indexOf(thisStep)-1];if(status===_types.ReindexStatus.failed&&lastCompletedStep===previousStep){return{status:"failed",children:_react.default.createElement(ErrorCallout,{errorMessage:errorMessage})}}else if(status===_types.ReindexStatus.paused&&lastCompletedStep===previousStep){return{status:"paused",children:_react.default.createElement(PausedCallout,null)}}else if(status===_types.ReindexStatus.cancelled&&lastCompletedStep===previousStep){return{status:"cancelled"}}else if(status===undefined||lastCompletedStep<previousStep){return{status:"incomplete"}}else if(lastCompletedStep===previousStep){return{status:"inProgress"}}else{return{status:"complete"}}};var reindexingDocsStep={title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.reindexingDocumentsStepTitle",defaultMessage:"Reindexing documents"})};if(status===_types.ReindexStatus.failed&&(lastCompletedStep===_types.ReindexStep.newIndexCreated||lastCompletedStep===_types.ReindexStep.reindexStarted)){reindexingDocsStep.status="failed";reindexingDocsStep.children=_react.default.createElement(ErrorCallout,{errorMessage:errorMessage})}else if(status===_types.ReindexStatus.paused&&(lastCompletedStep===_types.ReindexStep.newIndexCreated||lastCompletedStep===_types.ReindexStep.reindexStarted)){reindexingDocsStep.status="paused";reindexingDocsStep.children=_react.default.createElement(PausedCallout,null)}else if(status===_types.ReindexStatus.cancelled&&(lastCompletedStep===_types.ReindexStep.newIndexCreated||lastCompletedStep===_types.ReindexStep.reindexStarted)){reindexingDocsStep.status="cancelled"}else if(status===undefined||lastCompletedStep<_types.ReindexStep.newIndexCreated){reindexingDocsStep.status="incomplete"}else if(lastCompletedStep===_types.ReindexStep.newIndexCreated||lastCompletedStep===_types.ReindexStep.reindexStarted){reindexingDocsStep.status="inProgress";reindexingDocsStep.children=_react.default.createElement(ReindexProgressBar,props)}else{reindexingDocsStep.status="complete"}var steps=[_objectSpread({title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.readonlyStepTitle",defaultMessage:"Setting old index to read-only"})},stepDetails(_types.ReindexStep.readonly)),_objectSpread({title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.createIndexStepTitle",defaultMessage:"Creating new index"})},stepDetails(_types.ReindexStep.newIndexCreated)),reindexingDocsStep,_objectSpread({title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.aliasSwapStepTitle",defaultMessage:"Swapping original index with alias"})},stepDetails(_types.ReindexStep.aliasCreated))];if(indexGroup===_types.IndexGroup.ml){steps.unshift(_objectSpread({title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.pauseMlStepTitle",defaultMessage:"Pausing Machine Learning jobs"})},stepDetails(_types.ReindexStep.indexGroupServicesStopped)));steps.push(_objectSpread({title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.resumeMlStepTitle",defaultMessage:"Resuming Machine Learning jobs"})},stepDetails(_types.ReindexStep.indexGroupServicesStarted)))}else if(indexGroup===_types.IndexGroup.watcher){steps.unshift(_objectSpread({title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.stopWatcherStepTitle",defaultMessage:"Stopping Watcher"})},stepDetails(_types.ReindexStep.indexGroupServicesStopped)));steps.push(_objectSpread({title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.reindexingChecklist.resumeWatcherStepTitle",defaultMessage:"Resuming Watcher"})},stepDetails(_types.ReindexStep.indexGroupServicesStarted)))}return _react.default.createElement(_step_progress.StepProgress,{steps:steps})};exports.ReindexProgress=ReindexProgress},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StepProgress=void 0;var _classnames=_interopRequireDefault(__webpack_require__(53));var _react=_interopRequireWildcard(__webpack_require__(14));var _eui=__webpack_require__(15);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var StepStatus=function StepStatus(_ref){var status=_ref.status,idx=_ref.idx;if(status==="incomplete"){return _react.default.createElement("span",{className:"upgStepProgress__status"},idx+1,".")}else if(status==="inProgress"){return _react.default.createElement(_eui.EuiLoadingSpinner,{size:"m",className:"upgStepProgress__status"})}else if(status==="complete"){return _react.default.createElement("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-complete"},_react.default.createElement(_eui.EuiIcon,{type:"check",size:"s"}))}else if(status==="paused"){return _react.default.createElement("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-paused"},_react.default.createElement(_eui.EuiIcon,{type:"pause",size:"s"}))}else if(status==="cancelled"){return _react.default.createElement("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-cancelled"},_react.default.createElement(_eui.EuiIcon,{type:"cross",size:"s"}))}else if(status==="failed"){return _react.default.createElement("span",{className:"upgStepProgress__status upgStepProgress__status--circle upgStepProgress__status--circle-failed"},_react.default.createElement(_eui.EuiIcon,{type:"cross",size:"s"}))}throw new Error("Unsupported status: ".concat(status))};var Step=function Step(_ref2){var title=_ref2.title,status=_ref2.status,children=_ref2.children,idx=_ref2.idx;var titleClassName=(0,_classnames.default)("upgStepProgress__title",{"upgStepProgress__title--currentStep":status==="inProgress"||status==="paused"||status==="failed"||status==="cancelled"});return _react.default.createElement(_react.Fragment,null,_react.default.createElement("div",{className:"upgStepProgress__step"},_react.default.createElement(StepStatus,{status:status,idx:idx}),_react.default.createElement("p",{className:titleClassName},title)),children&&_react.default.createElement("div",{className:"upgStepProgress__content"},children))};var StepProgress=function StepProgress(_ref3){var steps=_ref3.steps;return _react.default.createElement("div",{className:"upgStepProgress__container"},steps.map((function(step,idx){return _react.default.createElement(Step,_extends({key:idx},step,{idx:idx}))})))};exports.StepProgress=StepProgress},,function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.WarningsFlyoutStep=exports.idForWarning=void 0;var _react=_interopRequireWildcard(__webpack_require__(14));var _eui=__webpack_require__(15);var _react2=__webpack_require__(16);var _types=__webpack_require__(22);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var idForWarning=function idForWarning(warning){return"reindexWarning-".concat(warning)};exports.idForWarning=idForWarning;var WarningCheckbox=function WarningCheckbox(_ref){var checkedIds=_ref.checkedIds,warning=_ref.warning,label=_ref.label,onChange=_ref.onChange,description=_ref.description,documentationUrl=_ref.documentationUrl;return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiText,null,_react.default.createElement(_eui.EuiCheckbox,{id:idForWarning(warning),label:_react.default.createElement("strong",null,label),checked:checkedIds[idForWarning(warning)],onChange:onChange}),_react.default.createElement("p",{className:"upgWarningsStep__warningDescription"},description,_react.default.createElement("br",null),_react.default.createElement(_eui.EuiLink,{href:documentationUrl,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.documentationLinkLabel",defaultMessage:"Documentation"})))),_react.default.createElement(_eui.EuiSpacer,null))};var WarningsFlyoutStep=function(_React$Component){_inherits(WarningsFlyoutStep,_React$Component);function WarningsFlyoutStep(props){var _this;_classCallCheck(this,WarningsFlyoutStep);_this=_possibleConstructorReturn(this,_getPrototypeOf(WarningsFlyoutStep).call(this,props));_defineProperty(_assertThisInitialized(_this),"onChange",(function(e){var optionId=e.target.id;var nextCheckedIds=_objectSpread({},_this.state.checkedIds,{},_defineProperty({},optionId,!_this.state.checkedIds[optionId]));_this.setState({checkedIds:nextCheckedIds})}));_this.state={checkedIds:props.warnings.reduce((function(checkedIds,warning){checkedIds[idForWarning(warning)]=false;return checkedIds}),{})};return _this}_createClass(WarningsFlyoutStep,[{key:"render",value:function render(){var _this$props=this.props,warnings=_this$props.warnings,closeFlyout=_this$props.closeFlyout,advanceNextStep=_this$props.advanceNextStep,renderGlobalCallouts=_this$props.renderGlobalCallouts;var checkedIds=this.state.checkedIds;var blockAdvance=Object.values(checkedIds).filter((function(v){return v})).length<warnings.length;return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlyoutBody,null,renderGlobalCallouts(),_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.destructiveCallout.calloutTitle",defaultMessage:"This index requires destructive changes that can't be undone"}),color:"danger",iconType:"alert"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.destructiveCallout.calloutDetail",defaultMessage:"Back up your index, then proceed with the reindex by accepting each breaking change."}))),_react.default.createElement(_eui.EuiSpacer,null),warnings.includes(_types.ReindexWarning.customTypeName)&&_react.default.createElement(WarningCheckbox,{checkedIds:checkedIds,onChange:this.onChange,warning:_types.ReindexWarning.customTypeName,label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.customTypeNameWarningTitle",defaultMessage:"Mapping type will be changed to {defaultType}",values:{defaultType:_react.default.createElement(_eui.EuiCode,null,"_doc")}}),description:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.customTypeNameWarningDetail",defaultMessage:"Mapping types are no longer supported in 8.x. This index mapping does not use the default type name, {defaultType}, and will be updated when reindexed. Ensure no application code or scripts rely on a different type.",values:{defaultType:_react.default.createElement(_eui.EuiCode,null,"_doc")}}),documentationUrl:"https://www.elastic.co/guide/en/elasticsearch/reference/7.0/removal-of-types.html"}),warnings.includes(_types.ReindexWarning.apmReindex)&&_react.default.createElement(WarningCheckbox,{checkedIds:checkedIds,onChange:this.onChange,warning:_types.ReindexWarning.apmReindex,label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.apmReindexWarningTitle",defaultMessage:"This index will be converted to ECS format"}),description:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.warningsStep.apmReindexWarningDetail",defaultMessage:"Starting in version 7.0.0, APM data will be represented in the Elastic Common Schema. Historical APM data will not visible until it's reindexed."}),documentationUrl:"https://www.elastic.co/guide/en/apm/get-started/master/apm-release-notes.html"})),_react.default.createElement(_eui.EuiFlyoutFooter,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"cross",onClick:closeFlyout,flush:"left"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.cancelButtonLabel",defaultMessage:"Cancel"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{fill:true,color:"danger",onClick:advanceNextStep,disabled:blockAdvance},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.checkupTab.reindexing.flyout.checklistStep.continueButtonLabel",defaultMessage:"Continue with reindex"}))))))}}]);return WarningsFlyoutStep}(_react.default.Component);exports.WarningsFlyoutStep=WarningsFlyoutStep},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ReindexPollingService=void 0;var _rxjs=__webpack_require__(19);var _types=__webpack_require__(22);var _types2=__webpack_require__(20);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var POLL_INTERVAL=1e3;var ReindexPollingService=function ReindexPollingService(indexName,http){var _this=this;_classCallCheck(this,ReindexPollingService);this.indexName=indexName;this.http=http;_defineProperty(this,"status$",void 0);_defineProperty(this,"pollTimeout",void 0);_defineProperty(this,"updateStatus",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var data;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.stopPolling();_context.prev=1;_context.next=4;return _this.http.get("/api/upgrade_assistant/reindex/".concat(_this.indexName));case 4:data=_context.sent;_this.updateWithResponse(data);if(data.reindexOp&&data.reindexOp.status===_types.ReindexStatus.inProgress){_this.pollTimeout=setTimeout(_this.updateStatus,POLL_INTERVAL)}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](1);_this.status$.next(_objectSpread({},_this.status$.value,{status:_types.ReindexStatus.failed}));case 12:case"end":return _context.stop()}}}),_callee,null,[[1,9]])}))));_defineProperty(this,"stopPolling",(function(){if(_this.pollTimeout){clearTimeout(_this.pollTimeout)}}));_defineProperty(this,"startReindex",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var currentValue,data;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;currentValue=_this.status$.value;_this.status$.next(_objectSpread({},currentValue,{lastCompletedStep:currentValue.status===_types.ReindexStatus.paused?currentValue.lastCompletedStep:undefined,status:_types.ReindexStatus.inProgress,reindexTaskPercComplete:null,errorMessage:null,cancelLoadingState:undefined}));_context2.next=5;return _this.http.post("/api/upgrade_assistant/reindex/".concat(_this.indexName));case 5:data=_context2.sent;_this.updateWithResponse({reindexOp:data});_this.updateStatus();_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2["catch"](0);_this.status$.next(_objectSpread({},_this.status$.value,{status:_types.ReindexStatus.failed}));case 13:case"end":return _context2.stop()}}}),_callee2,null,[[0,10]])}))));_defineProperty(this,"cancelReindex",_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_this.status$.next(_objectSpread({},_this.status$.value,{cancelLoadingState:_types2.LoadingState.Loading}));_context3.next=4;return _this.http.post("/api/upgrade_assistant/reindex/".concat(_this.indexName,"/cancel"));case 4:_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3["catch"](0);_this.status$.next(_objectSpread({},_this.status$.value,{cancelLoadingState:_types2.LoadingState.Error}));case 9:case"end":return _context3.stop()}}}),_callee3,null,[[0,6]])}))));_defineProperty(this,"updateWithResponse",(function(_ref4){var reindexOp=_ref4.reindexOp,warnings=_ref4.warnings,hasRequiredPrivileges=_ref4.hasRequiredPrivileges,indexGroup=_ref4.indexGroup;var currentValue=_this.status$.value;var nextValue=_objectSpread({},currentValue,{loadingState:_types2.LoadingState.Success});if(warnings){nextValue.reindexWarnings=warnings}if(hasRequiredPrivileges!==undefined){nextValue.hasRequiredPrivileges=hasRequiredPrivileges}if(indexGroup){nextValue.indexGroup=indexGroup}if(reindexOp){nextValue.lastCompletedStep=reindexOp.lastCompletedStep;nextValue.status=reindexOp.status;nextValue.reindexTaskPercComplete=reindexOp.reindexTaskPercComplete;nextValue.errorMessage=reindexOp.errorMessage;if(reindexOp.status===_types.ReindexStatus.cancelled){nextValue.cancelLoadingState=_types2.LoadingState.Success}}_this.status$.next(nextValue)}));this.status$=new _rxjs.BehaviorSubject({loadingState:_types2.LoadingState.Loading,errorMessage:null,reindexTaskPercComplete:null})};exports.ReindexPollingService=ReindexPollingService},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.IndexDeprecationTable=exports.IndexDeprecationTableUI=void 0;var _lodash=__webpack_require__(21);var _react=_interopRequireDefault(__webpack_require__(14));var _eui=__webpack_require__(15);var _react2=__webpack_require__(16);var _button=__webpack_require__(27);var _reindex=__webpack_require__(28);var _app_context=__webpack_require__(23);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PAGE_SIZES=[10,25,50,100,250,500,1e3];var IndexDeprecationTableUI=function(_React$Component){_inherits(IndexDeprecationTableUI,_React$Component);function IndexDeprecationTableUI(props){var _this;_classCallCheck(this,IndexDeprecationTableUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(IndexDeprecationTableUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"onTableChange",(function(tableProps){_this.setState({sortField:tableProps.sort.field,sortDirection:tableProps.sort.direction,pageIndex:tableProps.page.index,pageSize:tableProps.page.size})}));_this.state={sortField:"index",sortDirection:"asc",pageIndex:0,pageSize:10};return _this}_createClass(IndexDeprecationTableUI,[{key:"render",value:function render(){var intl=this.props.intl;var _this$state=this.state,pageIndex=_this$state.pageIndex,pageSize=_this$state.pageSize,sortField=_this$state.sortField,sortDirection=_this$state.sortDirection;var columns=[{field:"index",name:intl.formatMessage({id:"xpack.upgradeAssistant.checkupTab.deprecations.indexTable.indexColumnLabel",defaultMessage:"Index"}),sortable:true},{field:"details",name:intl.formatMessage({id:"xpack.upgradeAssistant.checkupTab.deprecations.indexTable.detailsColumnLabel",defaultMessage:"Details"})}];var actionsColumn=this.generateActionsColumn();if(actionsColumn){columns.push(actionsColumn)}var sorting={sort:{field:sortField,direction:sortDirection}};var pagination=_objectSpread({pageIndex:pageIndex,pageSize:pageSize},this.pageSizeOptions());return _react.default.createElement(_eui.EuiBasicTable,{items:this.getRows(),columns:columns,sorting:sorting,pagination:pagination,onChange:this.onTableChange,hasActions:false})}},{key:"getRows",value:function getRows(){var _this$state2=this.state,sortField=_this$state2.sortField,sortDirection=_this$state2.sortDirection,pageIndex=_this$state2.pageIndex,pageSize=_this$state2.pageSize;var indices=this.props.indices;var sorted=(0,_lodash.sortBy)(indices,sortField);if(sortDirection==="desc"){sorted=sorted.reverse()}var start=pageIndex*pageSize;return sorted.slice(start,start+pageSize)}},{key:"pageSizeOptions",value:function pageSizeOptions(){var indices=this.props.indices;var totalItemCount=indices.length;if(totalItemCount<=PAGE_SIZES[0]){return{totalItemCount:totalItemCount,pageSizeOptions:[],hidePerPageOptions:true}}var pageSizeOptions=PAGE_SIZES.filter((function(perPage,idx){return idx===0||totalItemCount>PAGE_SIZES[idx-1]}));return{totalItemCount:totalItemCount,pageSizeOptions:pageSizeOptions,hidePerPageOptions:false}}},{key:"generateActionsColumn",value:function generateActionsColumn(){var indices=this.props.indices;var showReindexButton=indices.find((function(i){return i.reindex===true}));var showNeedsDefaultFieldsButton=indices.find((function(i){return i.needsDefaultFields===true}));if(!showReindexButton&&!showNeedsDefaultFieldsButton){return null}return{actions:[{render:function render(indexDep){if(showReindexButton){return _react.default.createElement(_app_context.AppContext.Consumer,null,(function(_ref){var http=_ref.http,docLinks=_ref.docLinks;return _react.default.createElement(_reindex.ReindexButton,{docLinks:docLinks,reindexBlocker:indexDep.blockerForReindexing,indexName:indexDep.index,http:http})}))}else{return _react.default.createElement(_app_context.AppContext.Consumer,null,(function(_ref2){var http=_ref2.http;return _react.default.createElement(_button.FixDefaultFieldsButton,{indexName:indexDep.index,http:http})}))}}}]}}}]);return IndexDeprecationTableUI}(_react.default.Component);exports.IndexDeprecationTableUI=IndexDeprecationTableUI;var IndexDeprecationTable=(0,_react2.injectI18n)(IndexDeprecationTableUI);exports.IndexDeprecationTable=IndexDeprecationTable},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OverviewTab=void 0;var _react=_interopRequireWildcard(__webpack_require__(14));var _eui=__webpack_require__(15);var _react2=__webpack_require__(16);var _version=__webpack_require__(3);var _error_banner=__webpack_require__(24);var _types=__webpack_require__(20);var _steps=__webpack_require__(58);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var OverviewTab=function OverviewTab(props){return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiText,{grow:false},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.overviewTab.tabDetail",defaultMessage:"This assistant helps you prepare your cluster and indices for Elasticsearch {nextEsVersion} For other issues that need your attention, see the Elasticsearch logs.",values:{nextEsVersion:"".concat(_version.NEXT_MAJOR_VERSION,".x")}}))),_react.default.createElement(_eui.EuiSpacer,null),props.alertBanner&&_react.default.createElement(_react.Fragment,null,props.alertBanner,_react.default.createElement(_eui.EuiSpacer,null)),_react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_eui.EuiPageContentBody,null,props.loadingState===_types.LoadingState.Success&&_react.default.createElement(_steps.Steps,props),props.loadingState===_types.LoadingState.Loading&&_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiLoadingSpinner,null))),props.loadingState===_types.LoadingState.Error&&_react.default.createElement(_error_banner.LoadingErrorBanner,{loadingError:props.loadingError}))))};exports.OverviewTab=OverviewTab},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Steps=exports.StepsUI=void 0;var _react=_interopRequireWildcard(__webpack_require__(14));var _eui=__webpack_require__(15);var _i18n=__webpack_require__(2);var _react2=__webpack_require__(16);var _version=__webpack_require__(3);var _deprecation_logging_toggle=__webpack_require__(59);var _app_context=__webpack_require__(23);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var WAIT_FOR_RELEASE_STEP={title:_i18n.i18n.translate("xpack.upgradeAssistant.overviewTab.steps.waitForReleaseStep.stepTitle",{defaultMessage:"Wait for the Elasticsearch {nextEsVersion} release",values:{nextEsVersion:"".concat(_version.NEXT_MAJOR_VERSION,".0")}}),children:_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiText,{grow:false},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.overviewTab.steps.waitForReleaseStep.stepDetail",defaultMessage:"Once the release is out, upgrade to the latest {currentEsMajorVersion} version, and then return here to proceed with your {nextEsMajorVersion} upgrade.",values:{currentEsMajorVersion:"".concat(_version.CURRENT_MAJOR_VERSION,".x"),nextEsMajorVersion:"".concat(_version.NEXT_MAJOR_VERSION,".0")}}))))};var START_UPGRADE_STEP=function START_UPGRADE_STEP(isCloudEnabled){return{title:_i18n.i18n.translate("xpack.upgradeAssistant.overviewTab.steps.startUpgradeStep.stepTitle",{defaultMessage:"Start your upgrade"}),children:_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiText,{grow:false},_react.default.createElement("p",null,isCloudEnabled?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.overviewTab.steps.startUpgradeStepCloud.stepDetail.goToCloudDashboardDetail",defaultMessage:"Go to the Deployments section on the Elastic Cloud dashboard to start your upgrade."}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.overviewTab.steps.startUpgradeStepOnPrem.stepDetail.followInstructionsDetail",defaultMessage:"Follow {instructionButton} to start your upgrade.",values:{instructionButton:_react.default.createElement(_eui.EuiLink,{href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.0/setup-upgrade.html",target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.overviewTab.steps.startUpgradeStepOnPrem.stepDetail.instructionButtonLabel",defaultMessage:"these instructions"}))}}))))}};var StepsUI=function StepsUI(_ref){var checkupData=_ref.checkupData,setSelectedTabIndex=_ref.setSelectedTabIndex,intl=_ref.intl;var checkupDataTyped=checkupData;var countByType=Object.keys(checkupDataTyped).reduce((function(counts,checkupType){counts[checkupType]=checkupDataTyped[checkupType].length;return counts}),{});var _useAppContext=(0,_app_context.useAppContext)(),http=_useAppContext.http;return _react.default.createElement(_eui.EuiSteps,{className:"upgSteps",headingElement:"h2",steps:[{title:countByType.cluster?intl.formatMessage({id:"xpack.upgradeAssistant.overviewTab.steps.clusterStep.issuesRemainingStepTitle",defaultMessage:"Check for issues with your cluster"}):intl.formatMessage({id:"xpack.upgradeAssistant.overviewTab.steps.clusterStep.noIssuesRemainingStepTitle",defaultMessage:"Your cluster settings are ready"}),status:countByType.cluster?"warning":"complete",children:_react.default.createElement(_eui.EuiText,null,countByType.cluster?_react.default.createElement(_react.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.overviewTab.steps.clusterStep.todo.todoDetail",defaultMessage:"Go to the {clusterTabButton} to update the deprecated settings.",values:{clusterTabButton:_react.default.createElement(_eui.EuiLink,{onClick:function onClick(){return setSelectedTabIndex(1)}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.overviewTab.steps.clusterStep.todo.clusterTabButtonLabel",defaultMessage:"Cluster tab"}))}})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.overviewTab.steps.clusterStep.remainingIssuesDetail",defaultMessage:"{numIssues} issues must be resolved.",values:{numIssues:_react.default.createElement(_eui.EuiNotificationBadge,null,countByType.cluster)}}))):_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.overviewTab.steps.clusterStep.noRemainingIssuesLabel",defaultMessage:"No remaining deprecated settings."})))},{title:countByType.indices?intl.formatMessage({id:"xpack.upgradeAssistant.overviewTab.steps.indicesStep.issuesRemainingStepTitle",defaultMessage:"Check for issues with your indices"}):intl.formatMessage({id:"xpack.upgradeAssistant.overviewTab.steps.indicesStep.noIssuesRemainingStepTitle",defaultMessage:"Your index settings are ready"}),status:countByType.indices?"warning":"complete",children:_react.default.createElement(_eui.EuiText,null,countByType.indices?_react.default.createElement(_react.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.overviewTab.steps.indicesStep.todo.todoDetail",defaultMessage:"Go to the {indicesTabButton} to update the deprecated settings.",values:{indicesTabButton:_react.default.createElement(_eui.EuiLink,{onClick:function onClick(){return setSelectedTabIndex(2)}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.overviewTab.steps.indicesStep.todo.indicesTabButtonLabel",defaultMessage:"Indices tab"}))}})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.overviewTab.steps.indicesStep.remainingIssuesDetail",defaultMessage:"{numIssues} issues must be resolved.",values:{numIssues:_react.default.createElement(_eui.EuiNotificationBadge,null,countByType.indices)}}))):_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.overviewTab.steps.indicesStep.noRemainingIssuesLabel",defaultMessage:"No remaining deprecated settings."})))},{title:intl.formatMessage({id:"xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.stepTitle",defaultMessage:"Review the Elasticsearch deprecation logs"}),children:_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiText,{grow:false},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.deprecationLogs.logsDetail",defaultMessage:"Read the {deprecationLogsDocButton} to see if your applications are using functionality that is not available in {nextEsVersion}. You may need to enable deprecation logging.",values:{deprecationLogsDocButton:_react.default.createElement(_eui.EuiLink,{href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.0/logging.html#deprecation-logging",target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.deprecationLogs.deprecationLogsDocButtonLabel",defaultMessage:"deprecation logs"})),nextEsVersion:"".concat(_version.NEXT_MAJOR_VERSION,".0")}}))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiFormRow,{label:intl.formatMessage({id:"xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.enableDeprecationLoggingLabel",defaultMessage:"Enable deprecation logging?"}),describedByIds:["deprecation-logging"]},_react.default.createElement(_deprecation_logging_toggle.DeprecationLoggingToggle,{http:http})))},WAIT_FOR_RELEASE_STEP]})};exports.StepsUI=StepsUI;var Steps=(0,_react2.injectI18n)(StepsUI);exports.Steps=Steps},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DeprecationLoggingToggle=exports.DeprecationLoggingToggleUI=void 0;var _react=_interopRequireDefault(__webpack_require__(14));var _eui=__webpack_require__(15);var _react2=__webpack_require__(16);var _types=__webpack_require__(20);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DeprecationLoggingToggleUI=function(_React$Component){_inherits(DeprecationLoggingToggleUI,_React$Component);function DeprecationLoggingToggleUI(props){var _this;_classCallCheck(this,DeprecationLoggingToggleUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(DeprecationLoggingToggleUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"loadData",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var resp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_this.setState({loadingState:_types.LoadingState.Loading});_context.next=4;return _this.props.http.get("/api/upgrade_assistant/deprecation_logging");case 4:resp=_context.sent;_this.setState({loadingState:_types.LoadingState.Success,loggingEnabled:resp.isEnabled});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](0);_this.setState({loadingState:_types.LoadingState.Error});case 11:case"end":return _context.stop()}}}),_callee,null,[[0,8]])}))));_defineProperty(_assertThisInitialized(_this),"toggleLogging",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var newEnabled,resp;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;newEnabled=!_this.state.loggingEnabled;_this.setState({loadingState:_types.LoadingState.Loading,loggingEnabled:newEnabled});_context2.next=5;return _this.props.http.put("/api/upgrade_assistant/deprecation_logging",{body:JSON.stringify({isEnabled:newEnabled})});case 5:resp=_context2.sent;_this.setState({loadingState:_types.LoadingState.Success,loggingEnabled:resp.isEnabled});_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2["catch"](0);_this.setState({loadingState:_types.LoadingState.Error});case 12:case"end":return _context2.stop()}}}),_callee2,null,[[0,9]])}))));_this.state={loadingState:_types.LoadingState.Loading};return _this}_createClass(DeprecationLoggingToggleUI,[{key:"UNSAFE_componentWillMount",value:function UNSAFE_componentWillMount(){this.loadData()}},{key:"render",value:function render(){var _this$state=this.state,loggingEnabled=_this$state.loggingEnabled,loadingState=_this$state.loadingState;if(loadingState===_types.LoadingState.Loading&&loggingEnabled===undefined){return _react.default.createElement(_eui.EuiLoadingSpinner,{size:"l"})}return _react.default.createElement(_eui.EuiSwitch,{id:"xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.enableDeprecationLoggingToggleSwitch","data-test-subj":"upgradeAssistantDeprecationToggle",label:this.renderLoggingState(),checked:loggingEnabled||false,onChange:this.toggleLogging,disabled:loadingState===_types.LoadingState.Loading||loadingState===_types.LoadingState.Error})}},{key:"renderLoggingState",value:function renderLoggingState(){var intl=this.props.intl;var _this$state2=this.state,loggingEnabled=_this$state2.loggingEnabled,loadingState=_this$state2.loadingState;if(loadingState===_types.LoadingState.Error){return intl.formatMessage({id:"xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.enableDeprecationLoggingToggleSwitch.errorLabel",defaultMessage:"Could not load logging state"})}else if(loggingEnabled){return intl.formatMessage({id:"xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.enableDeprecationLoggingToggleSwitch.enabledLabel",defaultMessage:"On"})}else{return intl.formatMessage({id:"xpack.upgradeAssistant.overviewTab.steps.deprecationLogsStep.enableDeprecationLoggingToggleSwitch.disabledLabel",defaultMessage:"Off"})}}}]);return DeprecationLoggingToggleUI}(_react.default.Component);exports.DeprecationLoggingToggleUI=DeprecationLoggingToggleUI;var DeprecationLoggingToggle=(0,_react2.injectI18n)(DeprecationLoggingToggleUI);exports.DeprecationLoggingToggle=DeprecationLoggingToggle}]]);