(window["transform_bundle_jsonpfunction"]=window["transform_bundle_jsonpfunction"]||[]).push([[2],Array(35).concat([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mountManagementSection=mountManagementSection;var _public=__webpack_require__(26);var _navigation=__webpack_require__(81);var _text=__webpack_require__(97);var _app=__webpack_require__(259);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var localStorage=new _public.Storage(window.localStorage);function mountManagementSection(_x,_x2){return _mountManagementSection.apply(this,arguments)}function _mountManagementSection(){_mountManagementSection=_asyncToGenerator(regeneratorRuntime.mark((function _callee(coreSetup,params){var element,setBreadcrumbs,http,notifications,getStartServices,startServices,_startServices,core,plugins,chrome,docLinks,i18n,overlays,savedObjects,uiSettings,data,docTitle,appDependencies;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:element=params.element,setBreadcrumbs=params.setBreadcrumbs;http=coreSetup.http,notifications=coreSetup.notifications,getStartServices=coreSetup.getStartServices;_context.next=4;return getStartServices();case 4:startServices=_context.sent;_startServices=_slicedToArray(startServices,2),core=_startServices[0],plugins=_startServices[1];chrome=core.chrome,docLinks=core.docLinks,i18n=core.i18n,overlays=core.overlays,savedObjects=core.savedObjects,uiSettings=core.uiSettings;data=plugins.data;docTitle=chrome.docTitle;_text.textService.init();_navigation.docTitleService.init(docTitle.change);_navigation.breadcrumbService.setup(setBreadcrumbs);appDependencies={chrome:chrome,data:data,docLinks:docLinks,http:http,i18n:i18n,notifications:notifications,overlays:overlays,savedObjects:savedObjects,storage:localStorage,uiSettings:uiSettings};return _context.abrupt("return",(0,_app.renderApp)(element,appDependencies));case 14:case"end":return _context.stop()}}}),_callee)})));return _mountManagementSection.apply(this,arguments)}},,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _constants=__webpack_require__(280);Object.keys(_constants).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _constants[key]}})}));var _es_query=__webpack_require__(281);Object.keys(_es_query).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _es_query[key]}})}));var _field_formats=__webpack_require__(104);Object.keys(_field_formats).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _field_formats[key]}})}));var _index_patterns=__webpack_require__(347);Object.keys(_index_patterns).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_patterns[key]}})}));var _kbn_field_types=__webpack_require__(150);Object.keys(_kbn_field_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _kbn_field_types[key]}})}));var _query=__webpack_require__(353);Object.keys(_query).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _query[key]}})}));var _search=__webpack_require__(82);Object.keys(_search).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _search[key]}})}));var _aggs=__webpack_require__(358);Object.keys(_aggs).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _aggs[key]}})}));var _types=__webpack_require__(366);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _utils=__webpack_require__(74);Object.keys(_utils).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _utils[key]}})}))},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AggName",{enumerable:true,get:function get(){return _aggregations.AggName}});Object.defineProperty(exports,"isAggName",{enumerable:true,get:function get(){return _aggregations.isAggName}});Object.defineProperty(exports,"euiDataGridStyle",{enumerable:true,get:function get(){return _data_grid.euiDataGridStyle}});Object.defineProperty(exports,"euiDataGridToolbarSettings",{enumerable:true,get:function get(){return _data_grid.euiDataGridToolbarSettings}});Object.defineProperty(exports,"INIT_MAX_COLUMNS",{enumerable:true,get:function get(){return _data_grid.INIT_MAX_COLUMNS}});Object.defineProperty(exports,"getDefaultSelectableFields",{enumerable:true,get:function get(){return _fields.getDefaultSelectableFields}});Object.defineProperty(exports,"getFlattenedFields",{enumerable:true,get:function get(){return _fields.getFlattenedFields}});Object.defineProperty(exports,"getSelectableFields",{enumerable:true,get:function get(){return _fields.getSelectableFields}});Object.defineProperty(exports,"toggleSelectedField",{enumerable:true,get:function get(){return _fields.toggleSelectedField}});Object.defineProperty(exports,"EsDoc",{enumerable:true,get:function get(){return _fields.EsDoc}});Object.defineProperty(exports,"EsDocSource",{enumerable:true,get:function get(){return _fields.EsDocSource}});Object.defineProperty(exports,"EsFieldName",{enumerable:true,get:function get(){return _fields.EsFieldName}});Object.defineProperty(exports,"DropDownLabel",{enumerable:true,get:function get(){return _dropdown.DropDownLabel}});Object.defineProperty(exports,"DropDownOption",{enumerable:true,get:function get(){return _dropdown.DropDownOption}});Object.defineProperty(exports,"Label",{enumerable:true,get:function get(){return _dropdown.Label}});Object.defineProperty(exports,"isTransformIdValid",{enumerable:true,get:function get(){return _transform.isTransformIdValid}});Object.defineProperty(exports,"refreshTransformList$",{enumerable:true,get:function get(){return _transform.refreshTransformList$}});Object.defineProperty(exports,"useRefreshTransformList",{enumerable:true,get:function get(){return _transform.useRefreshTransformList}});Object.defineProperty(exports,"CreateRequestBody",{enumerable:true,get:function get(){return _transform.CreateRequestBody}});Object.defineProperty(exports,"PreviewRequestBody",{enumerable:true,get:function get(){return _transform.PreviewRequestBody}});Object.defineProperty(exports,"TransformPivotConfig",{enumerable:true,get:function get(){return _transform.TransformPivotConfig}});Object.defineProperty(exports,"IndexName",{enumerable:true,get:function get(){return _transform.IndexName}});Object.defineProperty(exports,"IndexPattern",{enumerable:true,get:function get(){return _transform.IndexPattern}});Object.defineProperty(exports,"REFRESH_TRANSFORM_LIST_STATE",{enumerable:true,get:function get(){return _transform.REFRESH_TRANSFORM_LIST_STATE}});Object.defineProperty(exports,"TRANSFORM_LIST_COLUMN",{enumerable:true,get:function get(){return _transform_list.TRANSFORM_LIST_COLUMN}});Object.defineProperty(exports,"TransformListRow",{enumerable:true,get:function get(){return _transform_list.TransformListRow}});Object.defineProperty(exports,"getTransformProgress",{enumerable:true,get:function get(){return _transform_stats.getTransformProgress}});Object.defineProperty(exports,"isCompletedBatchTransform",{enumerable:true,get:function get(){return _transform_stats.isCompletedBatchTransform}});Object.defineProperty(exports,"isTransformStats",{enumerable:true,get:function get(){return _transform_stats.isTransformStats}});Object.defineProperty(exports,"TransformStats",{enumerable:true,get:function get(){return _transform_stats.TransformStats}});Object.defineProperty(exports,"TRANSFORM_MODE",{enumerable:true,get:function get(){return _transform_stats.TRANSFORM_MODE}});Object.defineProperty(exports,"getDiscoverUrl",{enumerable:true,get:function get(){return _navigation.getDiscoverUrl}});Object.defineProperty(exports,"GetTransformsResponse",{enumerable:true,get:function get(){return _pivot_preview.GetTransformsResponse}});Object.defineProperty(exports,"PreviewData",{enumerable:true,get:function get(){return _pivot_preview.PreviewData}});Object.defineProperty(exports,"PreviewMappings",{enumerable:true,get:function get(){return _pivot_preview.PreviewMappings}});Object.defineProperty(exports,"getEsAggFromAggConfig",{enumerable:true,get:function get(){return _pivot_aggs.getEsAggFromAggConfig}});Object.defineProperty(exports,"isPivotAggsConfigWithUiSupport",{enumerable:true,get:function get(){return _pivot_aggs.isPivotAggsConfigWithUiSupport}});Object.defineProperty(exports,"isPivotAggsConfigPercentiles",{enumerable:true,get:function get(){return _pivot_aggs.isPivotAggsConfigPercentiles}});Object.defineProperty(exports,"PERCENTILES_AGG_DEFAULT_PERCENTS",{enumerable:true,get:function get(){return _pivot_aggs.PERCENTILES_AGG_DEFAULT_PERCENTS}});Object.defineProperty(exports,"PivotAgg",{enumerable:true,get:function get(){return _pivot_aggs.PivotAgg}});Object.defineProperty(exports,"PivotAggDict",{enumerable:true,get:function get(){return _pivot_aggs.PivotAggDict}});Object.defineProperty(exports,"PivotAggsConfig",{enumerable:true,get:function get(){return _pivot_aggs.PivotAggsConfig}});Object.defineProperty(exports,"PivotAggsConfigDict",{enumerable:true,get:function get(){return _pivot_aggs.PivotAggsConfigDict}});Object.defineProperty(exports,"PivotAggsConfigBase",{enumerable:true,get:function get(){return _pivot_aggs.PivotAggsConfigBase}});Object.defineProperty(exports,"PivotAggsConfigWithUiSupport",{enumerable:true,get:function get(){return _pivot_aggs.PivotAggsConfigWithUiSupport}});Object.defineProperty(exports,"PivotAggsConfigWithUiSupportDict",{enumerable:true,get:function get(){return _pivot_aggs.PivotAggsConfigWithUiSupportDict}});Object.defineProperty(exports,"pivotAggsFieldSupport",{enumerable:true,get:function get(){return _pivot_aggs.pivotAggsFieldSupport}});Object.defineProperty(exports,"PIVOT_SUPPORTED_AGGS",{enumerable:true,get:function get(){return _pivot_aggs.PIVOT_SUPPORTED_AGGS}});Object.defineProperty(exports,"dateHistogramIntervalFormatRegex",{enumerable:true,get:function get(){return _pivot_group_by.dateHistogramIntervalFormatRegex}});Object.defineProperty(exports,"getEsAggFromGroupByConfig",{enumerable:true,get:function get(){return _pivot_group_by.getEsAggFromGroupByConfig}});Object.defineProperty(exports,"histogramIntervalFormatRegex",{enumerable:true,get:function get(){return _pivot_group_by.histogramIntervalFormatRegex}});Object.defineProperty(exports,"isPivotGroupByConfigWithUiSupport",{enumerable:true,get:function get(){return _pivot_group_by.isPivotGroupByConfigWithUiSupport}});Object.defineProperty(exports,"isGroupByDateHistogram",{enumerable:true,get:function get(){return _pivot_group_by.isGroupByDateHistogram}});Object.defineProperty(exports,"isGroupByHistogram",{enumerable:true,get:function get(){return _pivot_group_by.isGroupByHistogram}});Object.defineProperty(exports,"isGroupByTerms",{enumerable:true,get:function get(){return _pivot_group_by.isGroupByTerms}});Object.defineProperty(exports,"pivotGroupByFieldSupport",{enumerable:true,get:function get(){return _pivot_group_by.pivotGroupByFieldSupport}});Object.defineProperty(exports,"DateHistogramAgg",{enumerable:true,get:function get(){return _pivot_group_by.DateHistogramAgg}});Object.defineProperty(exports,"GenericAgg",{enumerable:true,get:function get(){return _pivot_group_by.GenericAgg}});Object.defineProperty(exports,"GroupByConfigWithInterval",{enumerable:true,get:function get(){return _pivot_group_by.GroupByConfigWithInterval}});Object.defineProperty(exports,"GroupByConfigWithUiSupport",{enumerable:true,get:function get(){return _pivot_group_by.GroupByConfigWithUiSupport}});Object.defineProperty(exports,"HistogramAgg",{enumerable:true,get:function get(){return _pivot_group_by.HistogramAgg}});Object.defineProperty(exports,"PivotGroupBy",{enumerable:true,get:function get(){return _pivot_group_by.PivotGroupBy}});Object.defineProperty(exports,"PivotGroupByConfig",{enumerable:true,get:function get(){return _pivot_group_by.PivotGroupByConfig}});Object.defineProperty(exports,"PivotGroupByDict",{enumerable:true,get:function get(){return _pivot_group_by.PivotGroupByDict}});Object.defineProperty(exports,"PivotGroupByConfigDict",{enumerable:true,get:function get(){return _pivot_group_by.PivotGroupByConfigDict}});Object.defineProperty(exports,"PivotGroupByConfigWithUiSupportDict",{enumerable:true,get:function get(){return _pivot_group_by.PivotGroupByConfigWithUiSupportDict}});Object.defineProperty(exports,"PivotSupportedGroupByAggs",{enumerable:true,get:function get(){return _pivot_group_by.PivotSupportedGroupByAggs}});Object.defineProperty(exports,"PivotSupportedGroupByAggsWithInterval",{enumerable:true,get:function get(){return _pivot_group_by.PivotSupportedGroupByAggsWithInterval}});Object.defineProperty(exports,"PIVOT_SUPPORTED_GROUP_BY_AGGS",{enumerable:true,get:function get(){return _pivot_group_by.PIVOT_SUPPORTED_GROUP_BY_AGGS}});Object.defineProperty(exports,"TermsAgg",{enumerable:true,get:function get(){return _pivot_group_by.TermsAgg}});Object.defineProperty(exports,"defaultQuery",{enumerable:true,get:function get(){return _request.defaultQuery}});Object.defineProperty(exports,"getPreviewRequestBody",{enumerable:true,get:function get(){return _request.getPreviewRequestBody}});Object.defineProperty(exports,"getCreateRequestBody",{enumerable:true,get:function get(){return _request.getCreateRequestBody}});Object.defineProperty(exports,"getPivotQuery",{enumerable:true,get:function get(){return _request.getPivotQuery}});Object.defineProperty(exports,"isDefaultQuery",{enumerable:true,get:function get(){return _request.isDefaultQuery}});Object.defineProperty(exports,"isMatchAllQuery",{enumerable:true,get:function get(){return _request.isMatchAllQuery}});Object.defineProperty(exports,"isSimpleQuery",{enumerable:true,get:function get(){return _request.isSimpleQuery}});Object.defineProperty(exports,"matchAllQuery",{enumerable:true,get:function get(){return _request.matchAllQuery}});Object.defineProperty(exports,"PivotQuery",{enumerable:true,get:function get(){return _request.PivotQuery}});Object.defineProperty(exports,"SimpleQuery",{enumerable:true,get:function get(){return _request.SimpleQuery}});var _aggregations=__webpack_require__(268);var _data_grid=__webpack_require__(271);var _fields=__webpack_require__(272);var _dropdown=__webpack_require__(273);var _transform=__webpack_require__(274);var _transform_list=__webpack_require__(275);var _transform_stats=__webpack_require__(276);var _navigation=__webpack_require__(99);var _pivot_preview=__webpack_require__(278);var _pivot_aggs=__webpack_require__(279);var _pivot_group_by=__webpack_require__(368);var _request=__webpack_require__(369)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setSearchService=exports.getSearchService=exports.setInjectedMetadata=exports.getInjectedMetadata=exports.setQueryService=exports.getQueryService=exports.setIndexPatterns=exports.getIndexPatterns=exports.setOverlays=exports.getOverlays=exports.setFieldFormats=exports.getFieldFormats=exports.setHttp=exports.getHttp=exports.setUiSettings=exports.getUiSettings=exports.setNotifications=exports.getNotifications=void 0;var _public=__webpack_require__(26);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var _createGetterSetter=(0,_public.createGetterSetter)("Notifications"),_createGetterSetter2=_slicedToArray(_createGetterSetter,2),getNotifications=_createGetterSetter2[0],setNotifications=_createGetterSetter2[1];exports.setNotifications=setNotifications;exports.getNotifications=getNotifications;var _createGetterSetter3=(0,_public.createGetterSetter)("UiSettings"),_createGetterSetter4=_slicedToArray(_createGetterSetter3,2),getUiSettings=_createGetterSetter4[0],setUiSettings=_createGetterSetter4[1];exports.setUiSettings=setUiSettings;exports.getUiSettings=getUiSettings;var _createGetterSetter5=(0,_public.createGetterSetter)("Http"),_createGetterSetter6=_slicedToArray(_createGetterSetter5,2),getHttp=_createGetterSetter6[0],setHttp=_createGetterSetter6[1];exports.setHttp=setHttp;exports.getHttp=getHttp;var _createGetterSetter7=(0,_public.createGetterSetter)("FieldFormats"),_createGetterSetter8=_slicedToArray(_createGetterSetter7,2),getFieldFormats=_createGetterSetter8[0],setFieldFormats=_createGetterSetter8[1];exports.setFieldFormats=setFieldFormats;exports.getFieldFormats=getFieldFormats;var _createGetterSetter9=(0,_public.createGetterSetter)("Overlays"),_createGetterSetter10=_slicedToArray(_createGetterSetter9,2),getOverlays=_createGetterSetter10[0],setOverlays=_createGetterSetter10[1];exports.setOverlays=setOverlays;exports.getOverlays=getOverlays;var _createGetterSetter11=(0,_public.createGetterSetter)("IndexPatterns"),_createGetterSetter12=_slicedToArray(_createGetterSetter11,2),getIndexPatterns=_createGetterSetter12[0],setIndexPatterns=_createGetterSetter12[1];exports.setIndexPatterns=setIndexPatterns;exports.getIndexPatterns=getIndexPatterns;var _createGetterSetter13=(0,_public.createGetterSetter)("Query"),_createGetterSetter14=_slicedToArray(_createGetterSetter13,2),getQueryService=_createGetterSetter14[0],setQueryService=_createGetterSetter14[1];exports.setQueryService=setQueryService;exports.getQueryService=getQueryService;var _createGetterSetter15=(0,_public.createGetterSetter)("InjectedMetadata"),_createGetterSetter16=_slicedToArray(_createGetterSetter15,2),getInjectedMetadata=_createGetterSetter16[0],setInjectedMetadata=_createGetterSetter16[1];exports.setInjectedMetadata=setInjectedMetadata;exports.getInjectedMetadata=getInjectedMetadata;var _createGetterSetter17=(0,_public.createGetterSetter)("Search"),_createGetterSetter18=_slicedToArray(_createGetterSetter17,2),getSearchService=_createGetterSetter18[0],setSearchService=_createGetterSetter18[1];exports.setSearchService=setSearchService;exports.getSearchService=getSearchService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.METRIC_TYPES=void 0;var METRIC_TYPES;exports.METRIC_TYPES=METRIC_TYPES;(function(METRIC_TYPES){METRIC_TYPES["AVG"]="avg";METRIC_TYPES["CARDINALITY"]="cardinality";METRIC_TYPES["AVG_BUCKET"]="avg_bucket";METRIC_TYPES["MAX_BUCKET"]="max_bucket";METRIC_TYPES["MIN_BUCKET"]="min_bucket";METRIC_TYPES["SUM_BUCKET"]="sum_bucket";METRIC_TYPES["COUNT"]="count";METRIC_TYPES["CUMULATIVE_SUM"]="cumulative_sum";METRIC_TYPES["DERIVATIVE"]="derivative";METRIC_TYPES["GEO_BOUNDS"]="geo_bounds";METRIC_TYPES["GEO_CENTROID"]="geo_centroid";METRIC_TYPES["MEDIAN"]="median";METRIC_TYPES["MIN"]="min";METRIC_TYPES["MAX"]="max";METRIC_TYPES["MOVING_FN"]="moving_avg";METRIC_TYPES["SERIAL_DIFF"]="serial_diff";METRIC_TYPES["SUM"]="sum";METRIC_TYPES["TOP_HITS"]="top_hits";METRIC_TYPES["PERCENTILES"]="percentiles";METRIC_TYPES["PERCENTILE_RANKS"]="percentile_ranks";METRIC_TYPES["STD_DEV"]="std_dev"})(METRIC_TYPES||(exports.METRIC_TYPES=METRIC_TYPES={}))},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.isMetricAggType=isMetricAggType;exports.MetricAggType=void 0;var _i18n=__webpack_require__(0);var _agg_type=__webpack_require__(91);var _metric_agg_types=__webpack_require__(46);var _common=__webpack_require__(42);var _services=__webpack_require__(45);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var metricType="metrics";var MetricAggType=function(_AggType){_inherits(MetricAggType,_AggType);function MetricAggType(config){var _this;_classCallCheck(this,MetricAggType);_this=_possibleConstructorReturn(this,_getPrototypeOf(MetricAggType).call(this,config));_defineProperty(_assertThisInitialized(_this),"subtype",void 0);_defineProperty(_assertThisInitialized(_this),"isScalable",void 0);_defineProperty(_assertThisInitialized(_this),"type",metricType);_defineProperty(_assertThisInitialized(_this),"getKey",(function(){}));_this.getValue=config.getValue||function(agg,bucket){var isSettableToZero=[_metric_agg_types.METRIC_TYPES.CARDINALITY,_metric_agg_types.METRIC_TYPES.SUM].includes(agg.type.name);if(!bucket[agg.id]&&isSettableToZero)return 0;return bucket[agg.id]&&bucket[agg.id].value};_this.getFormat=config.getFormat||function(agg){var fieldFormatsService=(0,_services.getFieldFormats)();var field=agg.getField();return field?field.format:fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.NUMBER)};_this.subtype=config.subtype||_i18n.i18n.translate("data.search.aggs.metrics.metricAggregationsSubtypeTitle",{defaultMessage:"Metric Aggregations"});_this.isScalable=config.isScalable||function(){return false};return _this}return MetricAggType}(_agg_type.AggType);exports.MetricAggType=MetricAggType;function isMetricAggType(aggConfig){return aggConfig&&aggConfig.type===metricType}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FieldFormat",{enumerable:true,get:function get(){return _field_format.FieldFormat}});exports.FIELD_FORMAT_IDS=void 0;var _field_format=__webpack_require__(49);var FIELD_FORMAT_IDS;exports.FIELD_FORMAT_IDS=FIELD_FORMAT_IDS;(function(FIELD_FORMAT_IDS){FIELD_FORMAT_IDS["_SOURCE"]="_source";FIELD_FORMAT_IDS["BOOLEAN"]="boolean";FIELD_FORMAT_IDS["BYTES"]="bytes";FIELD_FORMAT_IDS["COLOR"]="color";FIELD_FORMAT_IDS["CUSTOM"]="custom";FIELD_FORMAT_IDS["DATE"]="date";FIELD_FORMAT_IDS["DATE_NANOS"]="date_nanos";FIELD_FORMAT_IDS["DURATION"]="duration";FIELD_FORMAT_IDS["IP"]="ip";FIELD_FORMAT_IDS["NUMBER"]="number";FIELD_FORMAT_IDS["PERCENT"]="percent";FIELD_FORMAT_IDS["RELATIVE_DATE"]="relative_date";FIELD_FORMAT_IDS["STATIC_LOOKUP"]="static_lookup";FIELD_FORMAT_IDS["STRING"]="string";FIELD_FORMAT_IDS["TRUNCATE"]="truncate";FIELD_FORMAT_IDS["URL"]="url"})(FIELD_FORMAT_IDS||(exports.FIELD_FORMAT_IDS=FIELD_FORMAT_IDS={}))},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.FieldFormat=void 0;var _lodash=__webpack_require__(41);var _custom=__webpack_require__(316);var _content_types=__webpack_require__(145);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DEFAULT_CONTEXT_TYPE=_content_types.TEXT_CONTEXT_TYPE;var FieldFormat=function(){function FieldFormat(){var _params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var getConfig=arguments.length>1?arguments[1]:undefined;_classCallCheck(this,FieldFormat);_defineProperty(this,"convertObject",void 0);_defineProperty(this,"htmlConvert",void 0);_defineProperty(this,"textConvert",void 0);_defineProperty(this,"type",this.constructor);_defineProperty(this,"_params",void 0);_defineProperty(this,"getConfig",void 0);this._params=_params;if(getConfig){this.getConfig=getConfig}}_createClass(FieldFormat,[{key:"convert",value:function convert(value){var contentType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:DEFAULT_CONTEXT_TYPE;var options=arguments.length>2?arguments[2]:undefined;var converter=this.getConverterFor(contentType);if(converter){return converter.call(this,value,options)}return value}},{key:"getConverterFor",value:function getConverterFor(){var contentType=arguments.length>0&&arguments[0]!==undefined?arguments[0]:DEFAULT_CONTEXT_TYPE;if(!this.convertObject){this.convertObject=this.setupContentType()}return this.convertObject[contentType]||null}},{key:"getParamDefaults",value:function getParamDefaults(){return{}}},{key:"param",value:function param(name){var val=(0,_lodash.get)(this._params,name);if(val||val===false||val===0){return val}return(0,_lodash.get)(this.getParamDefaults(),name)}},{key:"params",value:function params(){return(0,_lodash.cloneDeep)((0,_lodash.defaults)({},this._params,this.getParamDefaults()))}},{key:"toJSON",value:function toJSON(){var id=(0,_lodash.get)(this.type,"id");var defaultsParams=this.getParamDefaults()||{};var params=(0,_lodash.transform)(this._params,(function(uniqParams,val,param){if(param&&val!==(0,_lodash.get)(defaultsParams,param)){uniqParams[param]=val}}),{});return{id:id,params:(0,_lodash.size)(params)?params:undefined}}},{key:"setupContentType",value:function setupContentType(){return{text:(0,_content_types.textContentTypeSetup)(this,this.textConvert),html:(0,_content_types.htmlContentTypeSetup)(this,this.htmlConvert)}}}],[{key:"from",value:function from(convertFn){return(0,_custom.createCustomFieldFormat)(convertFn)}},{key:"isInstanceOfFieldFormat",value:function isInstanceOfFieldFormat(fieldFormat){return Boolean(fieldFormat&&fieldFormat.convert)}}]);return FieldFormat}();exports.FieldFormat=FieldFormat;_defineProperty(FieldFormat,"id",void 0);_defineProperty(FieldFormat,"title",void 0);_defineProperty(FieldFormat,"fieldType",void 0)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KBN_FIELD_TYPES=exports.ES_FIELD_TYPES=void 0;var ES_FIELD_TYPES;exports.ES_FIELD_TYPES=ES_FIELD_TYPES;(function(ES_FIELD_TYPES){ES_FIELD_TYPES["_ID"]="_id";ES_FIELD_TYPES["_INDEX"]="_index";ES_FIELD_TYPES["_SOURCE"]="_source";ES_FIELD_TYPES["_TYPE"]="_type";ES_FIELD_TYPES["STRING"]="string";ES_FIELD_TYPES["TEXT"]="text";ES_FIELD_TYPES["KEYWORD"]="keyword";ES_FIELD_TYPES["BOOLEAN"]="boolean";ES_FIELD_TYPES["OBJECT"]="object";ES_FIELD_TYPES["DATE"]="date";ES_FIELD_TYPES["DATE_NANOS"]="date_nanos";ES_FIELD_TYPES["GEO_POINT"]="geo_point";ES_FIELD_TYPES["GEO_SHAPE"]="geo_shape";ES_FIELD_TYPES["FLOAT"]="float";ES_FIELD_TYPES["HALF_FLOAT"]="half_float";ES_FIELD_TYPES["SCALED_FLOAT"]="scaled_float";ES_FIELD_TYPES["DOUBLE"]="double";ES_FIELD_TYPES["INTEGER"]="integer";ES_FIELD_TYPES["LONG"]="long";ES_FIELD_TYPES["SHORT"]="short";ES_FIELD_TYPES["NESTED"]="nested";ES_FIELD_TYPES["BYTE"]="byte";ES_FIELD_TYPES["IP"]="ip";ES_FIELD_TYPES["ATTACHMENT"]="attachment";ES_FIELD_TYPES["TOKEN_COUNT"]="token_count";ES_FIELD_TYPES["MURMUR3"]="murmur3";ES_FIELD_TYPES["HISTOGRAM"]="histogram"})(ES_FIELD_TYPES||(exports.ES_FIELD_TYPES=ES_FIELD_TYPES={}));var KBN_FIELD_TYPES;exports.KBN_FIELD_TYPES=KBN_FIELD_TYPES;(function(KBN_FIELD_TYPES){KBN_FIELD_TYPES["_SOURCE"]="_source";KBN_FIELD_TYPES["ATTACHMENT"]="attachment";KBN_FIELD_TYPES["BOOLEAN"]="boolean";KBN_FIELD_TYPES["DATE"]="date";KBN_FIELD_TYPES["GEO_POINT"]="geo_point";KBN_FIELD_TYPES["GEO_SHAPE"]="geo_shape";KBN_FIELD_TYPES["IP"]="ip";KBN_FIELD_TYPES["MURMUR3"]="murmur3";KBN_FIELD_TYPES["NUMBER"]="number";KBN_FIELD_TYPES["STRING"]="string";KBN_FIELD_TYPES["UNKNOWN"]="unknown";KBN_FIELD_TYPES["CONFLICT"]="conflict";KBN_FIELD_TYPES["OBJECT"]="object";KBN_FIELD_TYPES["NESTED"]="nested";KBN_FIELD_TYPES["HISTOGRAM"]="histogram"})(KBN_FIELD_TYPES||(exports.KBN_FIELD_TYPES=KBN_FIELD_TYPES={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useToastNotifications=exports.useAppDependencies=void 0;var _public=__webpack_require__(25);var useAppDependencies=function useAppDependencies(){return(0,_public.useKibana)().services};exports.useAppDependencies=useAppDependencies;var useToastNotifications=function useToastNotifications(){var _useAppDependencies=useAppDependencies(),toastNotifications=_useAppDependencies.notifications.toasts;return toastNotifications};exports.useToastNotifications=useToastNotifications},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BUCKET_TYPES=void 0;var BUCKET_TYPES;exports.BUCKET_TYPES=BUCKET_TYPES;(function(BUCKET_TYPES){BUCKET_TYPES["FILTER"]="filter";BUCKET_TYPES["FILTERS"]="filters";BUCKET_TYPES["HISTOGRAM"]="histogram";BUCKET_TYPES["IP_RANGE"]="ip_range";BUCKET_TYPES["DATE_RANGE"]="date_range";BUCKET_TYPES["RANGE"]="range";BUCKET_TYPES["TERMS"]="terms";BUCKET_TYPES["SIGNIFICANT_TERMS"]="significant_terms";BUCKET_TYPES["GEOHASH_GRID"]="geohash_grid";BUCKET_TYPES["GEOTILE_GRID"]="geotile_grid";BUCKET_TYPES["DATE_HISTOGRAM"]="date_histogram"})(BUCKET_TYPES||(exports.BUCKET_TYPES=BUCKET_TYPES={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useApi=void 0;var _constants=__webpack_require__(64);var _app_dependencies=__webpack_require__(51);var useApi=function useApi(){var _useAppDependencies=(0,_app_dependencies.useAppDependencies)(),http=_useAppDependencies.http;return{getTransforms:function getTransforms(transformId){var transformIdString=transformId!==undefined?"/".concat(transformId):"";return http.get("".concat(_constants.API_BASE_PATH,"transforms").concat(transformIdString))},getTransformsStats:function getTransformsStats(transformId){if(transformId!==undefined){return http.get("".concat(_constants.API_BASE_PATH,"transforms/").concat(transformId,"/_stats"))}return http.get("".concat(_constants.API_BASE_PATH,"transforms/_stats"))},createTransform:function createTransform(transformId,transformConfig){return http.put("".concat(_constants.API_BASE_PATH,"transforms/").concat(transformId),{body:JSON.stringify(transformConfig)})},deleteTransforms:function deleteTransforms(transformsInfo){return http.post("".concat(_constants.API_BASE_PATH,"delete_transforms"),{body:JSON.stringify(transformsInfo)})},getTransformsPreview:function getTransformsPreview(obj){return http.post("".concat(_constants.API_BASE_PATH,"transforms/_preview"),{body:JSON.stringify(obj)})},startTransforms:function startTransforms(transformsInfo){return http.post("".concat(_constants.API_BASE_PATH,"start_transforms"),{body:JSON.stringify(transformsInfo)})},stopTransforms:function stopTransforms(transformsInfo){return http.post("".concat(_constants.API_BASE_PATH,"stop_transforms"),{body:JSON.stringify(transformsInfo)})},getTransformAuditMessages:function getTransformAuditMessages(transformId){return http.get("".concat(_constants.API_BASE_PATH,"transforms/").concat(transformId,"/messages"))},esSearch:function esSearch(payload){return http.post("".concat(_constants.API_BASE_PATH,"es_search"),{body:JSON.stringify(payload)})},getIndices:function getIndices(){return http.get("/api/index_management/indices")}}};exports.useApi=useApi},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={cleanFilter:true,isFilterDisabled:true};exports.isFilterDisabled=exports.cleanFilter=void 0;var _lodash=__webpack_require__(41);var _build_filters=__webpack_require__(288);Object.keys(_build_filters).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _build_filters[key]}})}));var _custom_filter=__webpack_require__(289);Object.keys(_custom_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _custom_filter[key]}})}));var _exists_filter=__webpack_require__(133);Object.keys(_exists_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _exists_filter[key]}})}));var _geo_bounding_box_filter=__webpack_require__(134);Object.keys(_geo_bounding_box_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _geo_bounding_box_filter[key]}})}));var _geo_polygon_filter=__webpack_require__(135);Object.keys(_geo_polygon_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _geo_polygon_filter[key]}})}));var _get_display_value=__webpack_require__(290);Object.keys(_get_display_value).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_display_value[key]}})}));var _get_filter_field=__webpack_require__(291);Object.keys(_get_filter_field).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_filter_field[key]}})}));var _get_filter_params=__webpack_require__(292);Object.keys(_get_filter_params).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_filter_params[key]}})}));var _get_index_pattern_from_filter=__webpack_require__(136);Object.keys(_get_index_pattern_from_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_index_pattern_from_filter[key]}})}));var _match_all_filter=__webpack_require__(293);Object.keys(_match_all_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _match_all_filter[key]}})}));var _meta_filter=__webpack_require__(294);Object.keys(_meta_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _meta_filter[key]}})}));var _missing_filter=__webpack_require__(139);Object.keys(_missing_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _missing_filter[key]}})}));var _phrase_filter=__webpack_require__(100);Object.keys(_phrase_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _phrase_filter[key]}})}));var _phrases_filter=__webpack_require__(137);Object.keys(_phrases_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _phrases_filter[key]}})}));var _query_string_filter=__webpack_require__(295);Object.keys(_query_string_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _query_string_filter[key]}})}));var _range_filter=__webpack_require__(138);Object.keys(_range_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _range_filter[key]}})}));var _types=__webpack_require__(296);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var cleanFilter=function cleanFilter(filter){return(0,_lodash.omit)(filter,["meta","$state"])};exports.cleanFilter=cleanFilter;var isFilterDisabled=function isFilterDisabled(filter){return(0,_lodash.get)(filter,"meta.disabled",false)};exports.isFilterDisabled=isFilterDisabled},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.isBucketAggType=isBucketAggType;exports.BucketAggType=void 0;var _agg_type=__webpack_require__(91);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var bucketType="buckets";var BucketAggType=function(_AggType){_inherits(BucketAggType,_AggType);function BucketAggType(config){var _this;_classCallCheck(this,BucketAggType);_this=_possibleConstructorReturn(this,_getPrototypeOf(BucketAggType).call(this,config));_defineProperty(_assertThisInitialized(_this),"getKey",void 0);_defineProperty(_assertThisInitialized(_this),"type",bucketType);_this.getKey=config.getKey||function(bucket,key){return key||bucket.key};return _this}return BucketAggType}(_agg_type.AggType);exports.BucketAggType=BucketAggType;function isBucketAggType(aggConfig){return aggConfig&&aggConfig.type===bucketType}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _components=__webpack_require__(266);Object.keys(_components).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _components[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _ast=__webpack_require__(140);Object.keys(_ast).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _ast[key]}})}))},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;Object.defineProperty(exports,"RangeFilter",{enumerable:true,get:function get(){return _common.RangeFilter}});Object.defineProperty(exports,"RangeFilterMeta",{enumerable:true,get:function get(){return _common.RangeFilterMeta}});Object.defineProperty(exports,"RangeFilterParams",{enumerable:true,get:function get(){return _common.RangeFilterParams}});Object.defineProperty(exports,"ExistsFilter",{enumerable:true,get:function get(){return _common.ExistsFilter}});Object.defineProperty(exports,"PhrasesFilter",{enumerable:true,get:function get(){return _common.PhrasesFilter}});Object.defineProperty(exports,"PhraseFilter",{enumerable:true,get:function get(){return _common.PhraseFilter}});Object.defineProperty(exports,"CustomFilter",{enumerable:true,get:function get(){return _common.CustomFilter}});Object.defineProperty(exports,"MatchAllFilter",{enumerable:true,get:function get(){return _common.MatchAllFilter}});Object.defineProperty(exports,"EsQueryConfig",{enumerable:true,get:function get(){return _common.EsQueryConfig}});Object.defineProperty(exports,"KueryNode",{enumerable:true,get:function get(){return _common.KueryNode}});Object.defineProperty(exports,"IFieldFormat",{enumerable:true,get:function get(){return _common.IFieldFormat}});Object.defineProperty(exports,"IFieldFormatsRegistry",{enumerable:true,get:function get(){return _common.IFieldFormatsRegistry}});Object.defineProperty(exports,"FieldFormatsContentType",{enumerable:true,get:function get(){return _common.FieldFormatsContentType}});Object.defineProperty(exports,"FieldFormatsGetConfigFn",{enumerable:true,get:function get(){return _common.FieldFormatsGetConfigFn}});Object.defineProperty(exports,"FieldFormatConfig",{enumerable:true,get:function get(){return _common.FieldFormatConfig}});Object.defineProperty(exports,"FieldFormatId",{enumerable:true,get:function get(){return _common.FieldFormatId}});Object.defineProperty(exports,"IIndexPattern",{enumerable:true,get:function get(){return _common.IIndexPattern}});Object.defineProperty(exports,"IFieldType",{enumerable:true,get:function get(){return _common.IFieldType}});Object.defineProperty(exports,"IFieldSubType",{enumerable:true,get:function get(){return _common.IFieldSubType}});Object.defineProperty(exports,"ES_FIELD_TYPES",{enumerable:true,get:function get(){return _common.ES_FIELD_TYPES}});Object.defineProperty(exports,"KBN_FIELD_TYPES",{enumerable:true,get:function get(){return _common.KBN_FIELD_TYPES}});Object.defineProperty(exports,"IndexPatternAttributes",{enumerable:true,get:function get(){return _common.IndexPatternAttributes}});Object.defineProperty(exports,"ParsedInterval",{enumerable:true,get:function get(){return _common.ParsedInterval}});Object.defineProperty(exports,"Filter",{enumerable:true,get:function get(){return _common.Filter}});Object.defineProperty(exports,"Query",{enumerable:true,get:function get(){return _common.Query}});Object.defineProperty(exports,"RefreshInterval",{enumerable:true,get:function get(){return _common.RefreshInterval}});Object.defineProperty(exports,"TimeRange",{enumerable:true,get:function get(){return _common.TimeRange}});Object.defineProperty(exports,"castEsToKbnFieldTypeName",{enumerable:true,get:function get(){return _common.castEsToKbnFieldTypeName}});Object.defineProperty(exports,"getKbnTypeNames",{enumerable:true,get:function get(){return _common.getKbnTypeNames}});Object.defineProperty(exports,"createSavedQueryService",{enumerable:true,get:function get(){return _query.createSavedQueryService}});Object.defineProperty(exports,"connectToQueryState",{enumerable:true,get:function get(){return _query.connectToQueryState}});Object.defineProperty(exports,"syncQueryStateWithUrl",{enumerable:true,get:function get(){return _query.syncQueryStateWithUrl}});Object.defineProperty(exports,"QueryState",{enumerable:true,get:function get(){return _query.QueryState}});Object.defineProperty(exports,"getTime",{enumerable:true,get:function get(){return _query.getTime}});Object.defineProperty(exports,"getQueryLog",{enumerable:true,get:function get(){return _query.getQueryLog}});Object.defineProperty(exports,"getDefaultQuery",{enumerable:true,get:function get(){return _query.getDefaultQuery}});Object.defineProperty(exports,"FilterManager",{enumerable:true,get:function get(){return _query.FilterManager}});Object.defineProperty(exports,"SavedQuery",{enumerable:true,get:function get(){return _query.SavedQuery}});Object.defineProperty(exports,"SavedQueryService",{enumerable:true,get:function get(){return _query.SavedQueryService}});Object.defineProperty(exports,"SavedQueryTimeFilter",{enumerable:true,get:function get(){return _query.SavedQueryTimeFilter}});Object.defineProperty(exports,"InputTimeRange",{enumerable:true,get:function get(){return _query.InputTimeRange}});Object.defineProperty(exports,"TimeHistory",{enumerable:true,get:function get(){return _query.TimeHistory}});Object.defineProperty(exports,"TimefilterContract",{enumerable:true,get:function get(){return _query.TimefilterContract}});Object.defineProperty(exports,"TimeHistoryContract",{enumerable:true,get:function get(){return _query.TimeHistoryContract}});Object.defineProperty(exports,"baseFormattersPublic",{enumerable:true,get:function get(){return _field_formats2.baseFormattersPublic}});Object.defineProperty(exports,"IndexPatternsContract",{enumerable:true,get:function get(){return _index_patterns.IndexPatternsContract}});Object.defineProperty(exports,"IndexPattern",{enumerable:true,get:function get(){return _index_patterns.IndexPattern}});Object.defineProperty(exports,"IndexPatternField",{enumerable:true,get:function get(){return _index_patterns.Field}});Object.defineProperty(exports,"IndexPatternTypeMeta",{enumerable:true,get:function get(){return _index_patterns.TypeMeta}});Object.defineProperty(exports,"IndexPatternAggRestrictions",{enumerable:true,get:function get(){return _index_patterns.AggregationRestrictions}});Object.defineProperty(exports,"IndexPatternFieldList",{enumerable:true,get:function get(){return _index_patterns.FieldList}});Object.defineProperty(exports,"QuerySuggestion",{enumerable:true,get:function get(){return _autocomplete.QuerySuggestion}});Object.defineProperty(exports,"QuerySuggestionTypes",{enumerable:true,get:function get(){return _autocomplete.QuerySuggestionTypes}});Object.defineProperty(exports,"QuerySuggestionGetFn",{enumerable:true,get:function get(){return _autocomplete.QuerySuggestionGetFn}});Object.defineProperty(exports,"QuerySuggestionGetFnArgs",{enumerable:true,get:function get(){return _autocomplete.QuerySuggestionGetFnArgs}});Object.defineProperty(exports,"QuerySuggestionBasic",{enumerable:true,get:function get(){return _autocomplete.QuerySuggestionBasic}});Object.defineProperty(exports,"QuerySuggestionField",{enumerable:true,get:function get(){return _autocomplete.QuerySuggestionField}});Object.defineProperty(exports,"AggGroupNames",{enumerable:true,get:function get(){return _search.AggGroupNames}});Object.defineProperty(exports,"AggParam",{enumerable:true,get:function get(){return _search.AggParam}});Object.defineProperty(exports,"AggParamOption",{enumerable:true,get:function get(){return _search.AggParamOption}});Object.defineProperty(exports,"AggParamType",{enumerable:true,get:function get(){return _search.AggParamType}});Object.defineProperty(exports,"AggTypeFieldFilters",{enumerable:true,get:function get(){return _search.AggTypeFieldFilters}});Object.defineProperty(exports,"AggTypeFilters",{enumerable:true,get:function get(){return _search.AggTypeFilters}});Object.defineProperty(exports,"AggConfigOptions",{enumerable:true,get:function get(){return _search.AggConfigOptions}});Object.defineProperty(exports,"BUCKET_TYPES",{enumerable:true,get:function get(){return _search.BUCKET_TYPES}});Object.defineProperty(exports,"DateRangeKey",{enumerable:true,get:function get(){return _search.DateRangeKey}});Object.defineProperty(exports,"IAggConfig",{enumerable:true,get:function get(){return _search.IAggConfig}});Object.defineProperty(exports,"IAggConfigs",{enumerable:true,get:function get(){return _search.IAggConfigs}});Object.defineProperty(exports,"IAggGroupNames",{enumerable:true,get:function get(){return _search.IAggGroupNames}});Object.defineProperty(exports,"IAggType",{enumerable:true,get:function get(){return _search.IAggType}});Object.defineProperty(exports,"IFieldParamType",{enumerable:true,get:function get(){return _search.IFieldParamType}});Object.defineProperty(exports,"IMetricAggType",{enumerable:true,get:function get(){return _search.IMetricAggType}});Object.defineProperty(exports,"IpRangeKey",{enumerable:true,get:function get(){return _search.IpRangeKey}});Object.defineProperty(exports,"METRIC_TYPES",{enumerable:true,get:function get(){return _search.METRIC_TYPES}});Object.defineProperty(exports,"OptionedParamEditorProps",{enumerable:true,get:function get(){return _search.OptionedParamEditorProps}});Object.defineProperty(exports,"OptionedParamType",{enumerable:true,get:function get(){return _search.OptionedParamType}});Object.defineProperty(exports,"OptionedValueProp",{enumerable:true,get:function get(){return _search.OptionedValueProp}});Object.defineProperty(exports,"ES_SEARCH_STRATEGY",{enumerable:true,get:function get(){return _search.ES_SEARCH_STRATEGY}});Object.defineProperty(exports,"SYNC_SEARCH_STRATEGY",{enumerable:true,get:function get(){return _search.SYNC_SEARCH_STRATEGY}});Object.defineProperty(exports,"getEsPreference",{enumerable:true,get:function get(){return _search.getEsPreference}});Object.defineProperty(exports,"getSearchErrorType",{enumerable:true,get:function get(){return _search.getSearchErrorType}});Object.defineProperty(exports,"ISearchContext",{enumerable:true,get:function get(){return _search.ISearchContext}});Object.defineProperty(exports,"TSearchStrategyProvider",{enumerable:true,get:function get(){return _search.TSearchStrategyProvider}});Object.defineProperty(exports,"ISearchStrategy",{enumerable:true,get:function get(){return _search.ISearchStrategy}});Object.defineProperty(exports,"ISearch",{enumerable:true,get:function get(){return _search.ISearch}});Object.defineProperty(exports,"ISearchOptions",{enumerable:true,get:function get(){return _search.ISearchOptions}});Object.defineProperty(exports,"IRequestTypesMap",{enumerable:true,get:function get(){return _search.IRequestTypesMap}});Object.defineProperty(exports,"IResponseTypesMap",{enumerable:true,get:function get(){return _search.IResponseTypesMap}});Object.defineProperty(exports,"ISearchGeneric",{enumerable:true,get:function get(){return _search.ISearchGeneric}});Object.defineProperty(exports,"IEsSearchResponse",{enumerable:true,get:function get(){return _search.IEsSearchResponse}});Object.defineProperty(exports,"IEsSearchRequest",{enumerable:true,get:function get(){return _search.IEsSearchRequest}});Object.defineProperty(exports,"ISyncSearchRequest",{enumerable:true,get:function get(){return _search.ISyncSearchRequest}});Object.defineProperty(exports,"IKibanaSearchResponse",{enumerable:true,get:function get(){return _search.IKibanaSearchResponse}});Object.defineProperty(exports,"IKibanaSearchRequest",{enumerable:true,get:function get(){return _search.IKibanaSearchRequest}});Object.defineProperty(exports,"SearchRequest",{enumerable:true,get:function get(){return _search.SearchRequest}});Object.defineProperty(exports,"SearchResponse",{enumerable:true,get:function get(){return _search.SearchResponse}});Object.defineProperty(exports,"SearchError",{enumerable:true,get:function get(){return _search.SearchError}});Object.defineProperty(exports,"SearchStrategyProvider",{enumerable:true,get:function get(){return _search.SearchStrategyProvider}});Object.defineProperty(exports,"ISearchSource",{enumerable:true,get:function get(){return _search.ISearchSource}});Object.defineProperty(exports,"SearchSource",{enumerable:true,get:function get(){return _search.SearchSource}});Object.defineProperty(exports,"SearchSourceFields",{enumerable:true,get:function get(){return _search.SearchSourceFields}});Object.defineProperty(exports,"EsQuerySortValue",{enumerable:true,get:function get(){return _search.EsQuerySortValue}});Object.defineProperty(exports,"SortDirection",{enumerable:true,get:function get(){return _search.SortDirection}});Object.defineProperty(exports,"FetchOptions",{enumerable:true,get:function get(){return _search.FetchOptions}});Object.defineProperty(exports,"TabbedAggColumn",{enumerable:true,get:function get(){return _search.TabbedAggColumn}});Object.defineProperty(exports,"TabbedAggRow",{enumerable:true,get:function get(){return _search.TabbedAggRow}});Object.defineProperty(exports,"TabbedTable",{enumerable:true,get:function get(){return _search.TabbedTable}});Object.defineProperty(exports,"SearchInterceptor",{enumerable:true,get:function get(){return _search.SearchInterceptor}});Object.defineProperty(exports,"RequestTimeoutError",{enumerable:true,get:function get(){return _search.RequestTimeoutError}});Object.defineProperty(exports,"SearchBar",{enumerable:true,get:function get(){return _ui.SearchBar}});Object.defineProperty(exports,"SearchBarProps",{enumerable:true,get:function get(){return _ui.SearchBarProps}});Object.defineProperty(exports,"StatefulSearchBarProps",{enumerable:true,get:function get(){return _ui.StatefulSearchBarProps}});Object.defineProperty(exports,"FilterBar",{enumerable:true,get:function get(){return _ui.FilterBar}});Object.defineProperty(exports,"QueryStringInput",{enumerable:true,get:function get(){return _ui.QueryStringInput}});Object.defineProperty(exports,"IndexPatternSelect",{enumerable:true,get:function get(){return _ui.IndexPatternSelect}});Object.defineProperty(exports,"Plugin",{enumerable:true,get:function get(){return _plugin.DataPublicPlugin}});Object.defineProperty(exports,"DataPublicPluginSetup",{enumerable:true,get:function get(){return _types.DataPublicPluginSetup}});Object.defineProperty(exports,"DataPublicPluginStart",{enumerable:true,get:function get(){return _types.DataPublicPluginStart}});Object.defineProperty(exports,"IDataPluginServices",{enumerable:true,get:function get(){return _types.IDataPluginServices}});exports.search=exports.indexPatterns=exports.fieldFormats=exports.esQuery=exports.esKuery=exports.esFilters=void 0;__webpack_require__(465);var _common=__webpack_require__(42);var _filter_bar=__webpack_require__(108);var _query=__webpack_require__(67);var _field_formats=__webpack_require__(104);var _field_formats2=__webpack_require__(183);var _index_patterns=__webpack_require__(112);var _autocomplete=__webpack_require__(113);var _search=__webpack_require__(537);var _ui=__webpack_require__(93);var _plugin=__webpack_require__(679);var _types=__webpack_require__(699);var esFilters={FilterLabel:_filter_bar.FilterLabel,FILTERS:_common.FILTERS,FilterStateStore:_common.FilterStateStore,buildEmptyFilter:_common.buildEmptyFilter,buildPhrasesFilter:_common.buildPhrasesFilter,buildExistsFilter:_common.buildExistsFilter,buildPhraseFilter:_common.buildPhraseFilter,buildQueryFilter:_common.buildQueryFilter,buildRangeFilter:_common.buildRangeFilter,isPhraseFilter:_common.isPhraseFilter,isExistsFilter:_common.isExistsFilter,isPhrasesFilter:_common.isPhrasesFilter,isRangeFilter:_common.isRangeFilter,isMatchAllFilter:_common.isMatchAllFilter,isMissingFilter:_common.isMissingFilter,isQueryStringFilter:_common.isQueryStringFilter,isFilterPinned:_common.isFilterPinned,toggleFilterNegated:_common.toggleFilterNegated,disableFilter:_common.disableFilter,getPhraseFilterField:_common.getPhraseFilterField,getPhraseFilterValue:_common.getPhraseFilterValue,getDisplayValueFromFilter:_common.getDisplayValueFromFilter,compareFilters:_common.compareFilters,COMPARE_ALL_OPTIONS:_common.COMPARE_ALL_OPTIONS,generateFilters:_query.generateFilters,onlyDisabledFiltersChanged:_query.onlyDisabledFiltersChanged,changeTimeFilter:_query.changeTimeFilter,mapAndFlattenFilters:_query.mapAndFlattenFilters,extractTimeFilter:_query.extractTimeFilter};exports.esFilters=esFilters;var esKuery={nodeTypes:_common.nodeTypes,fromKueryExpression:_common.fromKueryExpression,toElasticsearchQuery:_common.toElasticsearchQuery};exports.esKuery=esKuery;var esQuery={buildEsQuery:_common.buildEsQuery,getEsQueryConfig:_common.getEsQueryConfig,buildQueryFromFilters:_common.buildQueryFromFilters,luceneStringToDsl:_common.luceneStringToDsl,decorateQuery:_common.decorateQuery};exports.esQuery=esQuery;var fieldFormats={FieldFormat:_field_formats.FieldFormat,FieldFormatsRegistry:_field_formats.FieldFormatsRegistry,serialize:_field_formats.serializeFieldFormat,DEFAULT_CONVERTER_COLOR:_field_formats.DEFAULT_CONVERTER_COLOR,HTML_CONTEXT_TYPE:_field_formats.HTML_CONTEXT_TYPE,TEXT_CONTEXT_TYPE:_field_formats.TEXT_CONTEXT_TYPE,FIELD_FORMAT_IDS:_field_formats.FIELD_FORMAT_IDS,BoolFormat:_field_formats.BoolFormat,BytesFormat:_field_formats.BytesFormat,ColorFormat:_field_formats.ColorFormat,DateFormat:_field_formats2.DateFormat,DateNanosFormat:_field_formats.DateNanosFormat,DurationFormat:_field_formats.DurationFormat,IpFormat:_field_formats.IpFormat,NumberFormat:_field_formats.NumberFormat,PercentFormat:_field_formats.PercentFormat,RelativeDateFormat:_field_formats.RelativeDateFormat,SourceFormat:_field_formats.SourceFormat,StaticLookupFormat:_field_formats.StaticLookupFormat,UrlFormat:_field_formats.UrlFormat,StringFormat:_field_formats.StringFormat,TruncateFormat:_field_formats.TruncateFormat};exports.fieldFormats=fieldFormats;var indexPatterns={ILLEGAL_CHARACTERS_KEY:_index_patterns.ILLEGAL_CHARACTERS_KEY,CONTAINS_SPACES_KEY:_index_patterns.CONTAINS_SPACES_KEY,ILLEGAL_CHARACTERS_VISIBLE:_index_patterns.ILLEGAL_CHARACTERS_VISIBLE,ILLEGAL_CHARACTERS:_index_patterns.ILLEGAL_CHARACTERS,isDefault:_index_patterns.isDefault,isFilterable:_common.isFilterable,isNestedField:_common.isNestedField,validate:_index_patterns.validateIndexPattern,getFromSavedObject:_index_patterns.getFromSavedObject,flattenHitWrapper:_index_patterns.flattenHitWrapper,getRoutes:_index_patterns.getRoutes,formatHitProvider:_index_patterns.formatHitProvider};exports.indexPatterns=indexPatterns;var search={aggs:{AggConfigs:_search.AggConfigs,aggGroupNamesMap:_search.aggGroupNamesMap,aggTypeFilters:_search.aggTypeFilters,CidrMask:_search.CidrMask,convertDateRangeToString:_search.convertDateRangeToString,convertIPRangeToString:_search.convertIPRangeToString,dateHistogramInterval:_common.dateHistogramInterval,intervalOptions:_search.intervalOptions,InvalidEsCalendarIntervalError:_common.InvalidEsCalendarIntervalError,InvalidEsIntervalFormatError:_common.InvalidEsIntervalFormatError,isDateHistogramBucketAggConfig:_search.isDateHistogramBucketAggConfig,isStringType:_search.isStringType,isType:_search.isType,isValidEsInterval:_common.isValidEsInterval,isValidInterval:_common.isValidInterval,parentPipelineType:_search.parentPipelineType,parseEsInterval:_common.parseEsInterval,parseInterval:_common.parseInterval,propFilter:_search.propFilter,siblingPipelineType:_search.siblingPipelineType,termsAggFilter:_search.termsAggFilter,toAbsoluteDates:_common.toAbsoluteDates},getRequestInspectorStats:_search.getRequestInspectorStats,getResponseInspectorStats:_search.getResponseInspectorStats,tabifyAggResponse:_search.tabifyAggResponse,tabifyGetColumns:_search.tabifyGetColumns};exports.search=search;function plugin(initializerContext){return new _plugin.DataPublicPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TRANSFORM_STATE=void 0;var TRANSFORM_STATE;exports.TRANSFORM_STATE=TRANSFORM_STATE;(function(TRANSFORM_STATE){TRANSFORM_STATE["ABORTING"]="aborting";TRANSFORM_STATE["FAILED"]="failed";TRANSFORM_STATE["INDEXING"]="indexing";TRANSFORM_STATE["STARTED"]="started";TRANSFORM_STATE["STOPPED"]="stopped";TRANSFORM_STATE["STOPPING"]="stopping"})(TRANSFORM_STATE||(exports.TRANSFORM_STATE=TRANSFORM_STATE={}))},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BaseParamType=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var BaseParamType=function BaseParamType(config){var _this=this;_classCallCheck(this,BaseParamType);_defineProperty(this,"name",void 0);_defineProperty(this,"type",void 0);_defineProperty(this,"displayName",void 0);_defineProperty(this,"required",void 0);_defineProperty(this,"advanced",void 0);_defineProperty(this,"default",void 0);_defineProperty(this,"write",void 0);_defineProperty(this,"serialize",void 0);_defineProperty(this,"deserialize",void 0);_defineProperty(this,"options",void 0);_defineProperty(this,"valueType",void 0);_defineProperty(this,"modifyAggConfigOnSearchRequestStart",void 0);this.name=config.name;this.type=config.type;this.displayName=config.displayName||this.name;this.required=config.required===true;this.advanced=config.advanced||false;this.onChange=config.onChange;this.shouldShow=config.shouldShow;this.default=config.default;var defaultWrite=function defaultWrite(aggConfig,output){if(aggConfig.params[_this.name]){output.params[_this.name]=aggConfig.params[_this.name]||_this.default}};this.write=config.write||defaultWrite;this.serialize=config.serialize;this.deserialize=config.deserialize;this.options=config.options;this.modifyAggConfigOnSearchRequestStart=config.modifyAggConfigOnSearchRequestStart||function(){};this.valueType=config.valueType||config.type};exports.BaseParamType=BaseParamType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.makeNestedLabel=void 0;var _lodash=__webpack_require__(41);var makeNestedLabel=function makeNestedLabel(aggConfig,label){var uppercaseLabel=(0,_lodash.startCase)(label);var customMetric=aggConfig.getParam("customMetric");var metricAgg=aggConfig.getParam("metricAgg");if(customMetric){var metricLabel=customMetric.makeLabel();if(metricLabel.includes("".concat(uppercaseLabel," of "))){metricLabel=metricLabel.substring("".concat(uppercaseLabel," of ").length);metricLabel="2. ".concat(label," of ").concat(metricLabel)}else if(metricLabel.includes("".concat(label," of "))){metricLabel=parseInt(metricLabel.substring(0,1),10)+1+metricLabel.substring(1)}else{metricLabel="".concat(uppercaseLabel," of ").concat(metricLabel)}return metricLabel}var metric=aggConfig.aggConfigs.byId(metricAgg);if(!metric){return""}return"".concat(uppercaseLabel," of ").concat(metric.makeLabel())};exports.makeNestedLabel=makeNestedLabel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.APP_INDEX_PRIVILEGES=exports.APP_CREATE_TRANSFORM_CLUSTER_PRIVILEGES=exports.APP_GET_TRANSFORM_CLUSTER_PRIVILEGES=exports.APP_CLUSTER_PRIVILEGES=exports.API_BASE_PATH=exports.PLUGIN=exports.PROGRESS_REFRESH_INTERVAL_MS=exports.MINIMUM_REFRESH_INTERVAL_MS=exports.DEFAULT_REFRESH_INTERVAL_MS=void 0;var _i18n=__webpack_require__(0);var _constants=__webpack_require__(260);var DEFAULT_REFRESH_INTERVAL_MS=3e4;exports.DEFAULT_REFRESH_INTERVAL_MS=DEFAULT_REFRESH_INTERVAL_MS;var MINIMUM_REFRESH_INTERVAL_MS=1e3;exports.MINIMUM_REFRESH_INTERVAL_MS=MINIMUM_REFRESH_INTERVAL_MS;var PROGRESS_REFRESH_INTERVAL_MS=2e3;exports.PROGRESS_REFRESH_INTERVAL_MS=PROGRESS_REFRESH_INTERVAL_MS;var PLUGIN={ID:"transform",MINIMUM_LICENSE_REQUIRED:_constants.LICENSE_TYPE_BASIC,getI18nName:function getI18nName(){return _i18n.i18n.translate("xpack.transform.appName",{defaultMessage:"Transforms"})}};exports.PLUGIN=PLUGIN;var API_BASE_PATH="/api/transform/";exports.API_BASE_PATH=API_BASE_PATH;var APP_CLUSTER_PRIVILEGES=["cluster:monitor/transform/get","cluster:monitor/transform/stats/get","cluster:admin/transform/delete","cluster:admin/transform/preview","cluster:admin/transform/put","cluster:admin/transform/start","cluster:admin/transform/start_task","cluster:admin/transform/stop"];exports.APP_CLUSTER_PRIVILEGES=APP_CLUSTER_PRIVILEGES;var APP_GET_TRANSFORM_CLUSTER_PRIVILEGES=["cluster.cluster:monitor/transform/get","cluster.cluster:monitor/transform/stats/get"];exports.APP_GET_TRANSFORM_CLUSTER_PRIVILEGES=APP_GET_TRANSFORM_CLUSTER_PRIVILEGES;var APP_CREATE_TRANSFORM_CLUSTER_PRIVILEGES=["cluster.cluster:monitor/transform/get","cluster.cluster:monitor/transform/stats/get","cluster.cluster:admin/transform/preview","cluster.cluster:admin/transform/put","cluster.cluster:admin/transform/start","cluster.cluster:admin/transform/start_task"];exports.APP_CREATE_TRANSFORM_CLUSTER_PRIVILEGES=APP_CREATE_TRANSFORM_CLUSTER_PRIVILEGES;var APP_INDEX_PRIVILEGES=["monitor"];exports.APP_INDEX_PRIVILEGES=APP_INDEX_PRIVILEGES},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"NodeTypes",{enumerable:true,get:function get(){return _types.NodeTypes}});exports.nodeTypes=void 0;var functionType=_interopRequireWildcard(__webpack_require__(285));var literal=_interopRequireWildcard(__webpack_require__(73));var namedArg=_interopRequireWildcard(__webpack_require__(306));var wildcard=_interopRequireWildcard(__webpack_require__(102));var _types=__webpack_require__(307);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var nodeTypes={function:functionType,literal:literal,namedArg:namedArg,wildcard:wildcard};exports.nodeTypes=nodeTypes},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"asPrettyString",{enumerable:true,get:function get(){return _as_pretty_string.asPrettyString}});Object.defineProperty(exports,"getHighlightHtml",{enumerable:true,get:function get(){return _highlight.getHighlightHtml}});Object.defineProperty(exports,"getHighlightRequest",{enumerable:true,get:function get(){return _highlight.getHighlightRequest}});Object.defineProperty(exports,"serializeFieldFormat",{enumerable:true,get:function get(){return _serialize.serializeFieldFormat}});var _as_pretty_string=__webpack_require__(318);var _highlight=__webpack_require__(319);var _serialize=__webpack_require__(323)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lib=__webpack_require__(477);Object.keys(_lib).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _lib[key]}})}));var _query_service=__webpack_require__(484);Object.keys(_query_service).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _query_service[key]}})}));var _filter_manager=__webpack_require__(177);Object.keys(_filter_manager).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _filter_manager[key]}})}));var _timefilter=__webpack_require__(111);Object.keys(_timefilter).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _timefilter[key]}})}));var _saved_query=__webpack_require__(514);Object.keys(_saved_query).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _saved_query[key]}})}));var _persisted_log=__webpack_require__(110);Object.keys(_persisted_log).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _persisted_log[key]}})}));var _state_sync=__webpack_require__(516);Object.keys(_state_sync).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _state_sync[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dictionaryToArray=dictionaryToArray;function dictionaryToArray(dict){return Object.keys(dict).map((function(key){return dict[key]}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"createSavedSearchesLoader",{enumerable:true,get:function get(){return _public.createSavedSearchesLoader}});Object.defineProperty(exports,"XJsonMode",{enumerable:true,get:function get(){return _x_json.XJsonMode}});Object.defineProperty(exports,"collapseLiteralStrings",{enumerable:true,get:function get(){return _lib.collapseLiteralStrings}});Object.defineProperty(exports,"expandLiteralStrings",{enumerable:true,get:function get(){return _lib.expandLiteralStrings}});Object.defineProperty(exports,"UseRequestConfig",{enumerable:true,get:function get(){return _np_ready_request.UseRequestConfig}});Object.defineProperty(exports,"useRequest",{enumerable:true,get:function get(){return _np_ready_request.useRequest}});Object.defineProperty(exports,"getErrorMessage",{enumerable:true,get:function get(){return _errors.getErrorMessage}});var _public=__webpack_require__(371);var _x_json=__webpack_require__(714);var _lib=__webpack_require__(725);var _np_ready_request=__webpack_require__(727);var _errors=__webpack_require__(728)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UIM_TRANSFORM_SHOW_DETAILS_CLICK=exports.UIM_TRANSFORM_DELETE_MANY=exports.UIM_TRANSFORM_DELETE=exports.UIM_TRANSFORM_CREATE=exports.UIM_TRANSFORM_LIST_LOAD=exports.UIM_APP_NAME=exports.TRANSFORM_DOC_PATHS=exports.SECTION_SLUG=exports.CLIENT_BASE_PATH=void 0;var CLIENT_BASE_PATH="/management/elasticsearch/transform/";exports.CLIENT_BASE_PATH=CLIENT_BASE_PATH;var SECTION_SLUG;exports.SECTION_SLUG=SECTION_SLUG;(function(SECTION_SLUG){SECTION_SLUG["HOME"]="transform_management";SECTION_SLUG["CLONE_TRANSFORM"]="clone_transform";SECTION_SLUG["CREATE_TRANSFORM"]="create_transform"})(SECTION_SLUG||(exports.SECTION_SLUG=SECTION_SLUG={}));var TRANSFORM_DOC_PATHS;exports.TRANSFORM_DOC_PATHS=TRANSFORM_DOC_PATHS;(function(TRANSFORM_DOC_PATHS){TRANSFORM_DOC_PATHS["default"]="docs.html";TRANSFORM_DOC_PATHS["plugins"]="plugins.html";TRANSFORM_DOC_PATHS["transforms"]="transforms.html"})(TRANSFORM_DOC_PATHS||(exports.TRANSFORM_DOC_PATHS=TRANSFORM_DOC_PATHS={}));var UIM_APP_NAME="transform";exports.UIM_APP_NAME=UIM_APP_NAME;var UIM_TRANSFORM_LIST_LOAD="transform_list_load";exports.UIM_TRANSFORM_LIST_LOAD=UIM_TRANSFORM_LIST_LOAD;var UIM_TRANSFORM_CREATE="transform_create";exports.UIM_TRANSFORM_CREATE=UIM_TRANSFORM_CREATE;var UIM_TRANSFORM_DELETE="transform_delete";exports.UIM_TRANSFORM_DELETE=UIM_TRANSFORM_DELETE;var UIM_TRANSFORM_DELETE_MANY="transform_delete_many";exports.UIM_TRANSFORM_DELETE_MANY=UIM_TRANSFORM_DELETE_MANY;var UIM_TRANSFORM_SHOW_DETAILS_CLICK="transform_show_details_click";exports.UIM_TRANSFORM_SHOW_DETAILS_CLICK=UIM_TRANSFORM_SHOW_DETAILS_CLICK},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SectionError",{enumerable:true,get:function get(){return _section_error.SectionError}});Object.defineProperty(exports,"SectionLoading",{enumerable:true,get:function get(){return _section_loading.SectionLoading}});Object.defineProperty(exports,"ToastNotificationText",{enumerable:true,get:function get(){return _toast_notification_text.ToastNotificationText}});var _section_error=__webpack_require__(263);var _section_loading=__webpack_require__(264);var _toast_notification_text=__webpack_require__(265)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"useApi",{enumerable:true,get:function get(){return _use_api.useApi}});Object.defineProperty(exports,"useGetTransforms",{enumerable:true,get:function get(){return _use_get_transforms.useGetTransforms}});Object.defineProperty(exports,"useDeleteTransforms",{enumerable:true,get:function get(){return _use_delete_transform.useDeleteTransforms}});Object.defineProperty(exports,"useStartTransforms",{enumerable:true,get:function get(){return _use_start_transform.useStartTransforms}});Object.defineProperty(exports,"useStopTransforms",{enumerable:true,get:function get(){return _use_stop_transform.useStopTransforms}});Object.defineProperty(exports,"useRequest",{enumerable:true,get:function get(){return _use_request.useRequest}});var _use_api=__webpack_require__(53);var _use_get_transforms=__webpack_require__(267);var _use_delete_transform=__webpack_require__(370);var _use_start_transform=__webpack_require__(730);var _use_stop_transform=__webpack_require__(731);var _use_request=__webpack_require__(732)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNode=buildNode;exports.toElasticsearchQuery=toElasticsearchQuery;function buildNode(value){return{type:"literal",value:value}}function toElasticsearchQuery(node){return node.value}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"shortenDottedString",{enumerable:true,get:function get(){return _shorten_dotted_string.shortenDottedString}});Object.defineProperty(exports,"AbortError",{enumerable:true,get:function get(){return _abort_utils.AbortError}});Object.defineProperty(exports,"toPromise",{enumerable:true,get:function get(){return _abort_utils.toPromise}});Object.defineProperty(exports,"getCombinedSignal",{enumerable:true,get:function get(){return _abort_utils.getCombinedSignal}});var _shorten_dotted_string=__webpack_require__(340);var _abort_utils=__webpack_require__(341)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parentPipelineType=exports.parentPipelineAggHelper=void 0;var _i18n=__webpack_require__(0);var _lodash=__webpack_require__(41);var _nested_agg_helpers=__webpack_require__(201);var _parent_pipeline_agg_writer=__webpack_require__(556);var _common=__webpack_require__(42);var metricAggFilter=["!top_hits","!percentiles","!percentile_ranks","!median","!std_dev","!geo_bounds","!geo_centroid"];var parentPipelineType=_i18n.i18n.translate("data.search.aggs.metrics.parentPipelineAggregationsSubtypeTitle",{defaultMessage:"Parent Pipeline Aggregations"});exports.parentPipelineType=parentPipelineType;var parentPipelineAggHelper={subtype:parentPipelineType,params:function params(){return[{name:"metricAgg",default:"custom",write:_parent_pipeline_agg_writer.parentPipelineAggWriter},{name:"customMetric",type:"agg",allowedAggs:metricAggFilter,makeAgg:function makeAgg(termsAgg,state){state=state||{type:"count"};var metricAgg=termsAgg.aggConfigs.createAggConfig(state,{addToAggConfigs:false});metricAgg.id=termsAgg.id+"-metric";return metricAgg},modifyAggConfigOnSearchRequestStart:(0,_nested_agg_helpers.forwardModifyAggConfigOnSearchRequestStart)("customMetric"),write:_lodash.noop},{name:"buckets_path",write:_lodash.noop}]},getFormat:function getFormat(agg){var subAgg;var customMetric=agg.getParam("customMetric");if(customMetric){subAgg=customMetric}else{subAgg=agg.aggConfigs.byId(agg.getParam("metricAgg"))}return subAgg?subAgg.type.getFormat(subAgg):new(_common.FieldFormat.from(_lodash.identity))}};exports.parentPipelineAggHelper=parentPipelineAggHelper},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.siblingPipelineType=exports.siblingPipelineAggHelper=void 0;var _lodash=__webpack_require__(41);var _i18n=__webpack_require__(0);var _sibling_pipeline_agg_writer=__webpack_require__(663);var _nested_agg_helpers=__webpack_require__(201);var _common=__webpack_require__(42);var metricAggFilter=["!top_hits","!percentiles","!percentile_ranks","!median","!std_dev","!sum_bucket","!avg_bucket","!min_bucket","!max_bucket","!derivative","!moving_avg","!serial_diff","!cumulative_sum","!geo_bounds","!geo_centroid"];var bucketAggFilter=[];var siblingPipelineType=_i18n.i18n.translate("data.search.aggs.metrics.siblingPipelineAggregationsSubtypeTitle",{defaultMessage:"Sibling pipeline aggregations"});exports.siblingPipelineType=siblingPipelineType;var siblingPipelineAggHelper={subtype:siblingPipelineType,params:function params(){return[{name:"customBucket",type:"agg",allowedAggs:bucketAggFilter,default:null,makeAgg:function makeAgg(agg,state){state=state||{type:"date_histogram"};var orderAgg=agg.aggConfigs.createAggConfig(state,{addToAggConfigs:false});orderAgg.id=agg.id+"-bucket";return orderAgg},modifyAggConfigOnSearchRequestStart:(0,_nested_agg_helpers.forwardModifyAggConfigOnSearchRequestStart)("customBucket"),write:function write(){}},{name:"customMetric",type:"agg",allowedAggs:metricAggFilter,default:null,makeAgg:function makeAgg(agg,state){state=state||{type:"count"};var orderAgg=agg.aggConfigs.createAggConfig(state,{addToAggConfigs:false});orderAgg.id=agg.id+"-metric";return orderAgg},modifyAggConfigOnSearchRequestStart:(0,_nested_agg_helpers.forwardModifyAggConfigOnSearchRequestStart)("customMetric"),write:_sibling_pipeline_agg_writer.siblingPipelineAggWriter}]},getFormat:function getFormat(agg){var customMetric=agg.getParam("customMetric");return customMetric?customMetric.type.getFormat(customMetric):new(_common.FieldFormat.from(_lodash.identity))}};exports.siblingPipelineAggHelper=siblingPipelineAggHelper},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SAVE_DUPLICATE_REJECTED=exports.OVERWRITE_REJECTED=void 0;var _i18n=__webpack_require__(0);var OVERWRITE_REJECTED=_i18n.i18n.translate("savedObjects.overwriteRejectedDescription",{defaultMessage:"Overwrite confirmation was rejected"});exports.OVERWRITE_REJECTED=OVERWRITE_REJECTED;var SAVE_DUPLICATE_REJECTED=_i18n.i18n.translate("savedObjects.saveDuplicateRejectedDescription",{defaultMessage:"Save with duplicate title confirmation was rejected"});exports.SAVE_DUPLICATE_REJECTED=SAVE_DUPLICATE_REJECTED},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useDocumentationLinks=void 0;var _app_dependencies=__webpack_require__(51);var _constants=__webpack_require__(70);var useDocumentationLinks=function useDocumentationLinks(){var deps=(0,_app_dependencies.useAppDependencies)();var _deps$docLinks=deps.docLinks,ELASTIC_WEBSITE_URL=_deps$docLinks.ELASTIC_WEBSITE_URL,DOC_LINK_VERSION=_deps$docLinks.DOC_LINK_VERSION;return{esDocBasePath:"".concat(ELASTIC_WEBSITE_URL,"guide/en/elasticsearch/reference/").concat(DOC_LINK_VERSION,"/"),esIndicesCreateIndex:"".concat(ELASTIC_WEBSITE_URL,"guide/en/elasticsearch/reference/").concat(DOC_LINK_VERSION,"/indices-create-index.html#indices-create-index"),esPluginDocBasePath:"".concat(ELASTIC_WEBSITE_URL,"guide/en/elasticsearch/plugins/").concat(DOC_LINK_VERSION,"/"),esQueryDsl:"".concat(ELASTIC_WEBSITE_URL,"guide/en/elasticsearch/reference/").concat(DOC_LINK_VERSION,"/query-dsl.html"),esStackOverviewDocBasePath:"".concat(ELASTIC_WEBSITE_URL,"guide/en/elastic-stack-overview/").concat(DOC_LINK_VERSION,"/"),esTransform:"".concat(ELASTIC_WEBSITE_URL,"guide/en/elasticsearch/reference/").concat(DOC_LINK_VERSION,"/").concat(_constants.TRANSFORM_DOC_PATHS.transforms),esTransformPivot:"".concat(ELASTIC_WEBSITE_URL,"guide/en/elasticsearch/reference/").concat(DOC_LINK_VERSION,"/put-transform.html#put-transform-request-body"),mlDocBasePath:"".concat(ELASTIC_WEBSITE_URL,"guide/en/machine-learning/").concat(DOC_LINK_VERSION,"/")}};exports.useDocumentationLinks=useDocumentationLinks},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={breadcrumbService:true,BREADCRUMB_SECTION:true,docTitleService:true};Object.defineProperty(exports,"breadcrumbService",{enumerable:true,get:function get(){return _breadcrumb.breadcrumbService}});Object.defineProperty(exports,"BREADCRUMB_SECTION",{enumerable:true,get:function get(){return _breadcrumb.BREADCRUMB_SECTION}});Object.defineProperty(exports,"docTitleService",{enumerable:true,get:function get(){return _doc_title.docTitleService}});var _breadcrumb=__webpack_require__(256);var _doc_title=__webpack_require__(258);var _links=__webpack_require__(129);Object.keys(_links).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _links[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IEsSearchRequest",{enumerable:true,get:function get(){return _es_search.IEsSearchRequest}});Object.defineProperty(exports,"IEsSearchResponse",{enumerable:true,get:function get(){return _es_search.IEsSearchResponse}});Object.defineProperty(exports,"ES_SEARCH_STRATEGY",{enumerable:true,get:function get(){return _es_search.ES_SEARCH_STRATEGY}});Object.defineProperty(exports,"IKibanaSearchResponse",{enumerable:true,get:function get(){return _types.IKibanaSearchResponse}});Object.defineProperty(exports,"IKibanaSearchRequest",{enumerable:true,get:function get(){return _types.IKibanaSearchRequest}});exports.DEFAULT_SEARCH_STRATEGY=void 0;var _es_search=__webpack_require__(156);var _types=__webpack_require__(357);var DEFAULT_SEARCH_STRATEGY=_es_search.ES_SEARCH_STRATEGY;exports.DEFAULT_SEARCH_STRATEGY=DEFAULT_SEARCH_STRATEGY},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseEsInterval=parseEsInterval;var _datemath=_interopRequireDefault(__webpack_require__(61));var _invalid_es_calendar_interval_error=__webpack_require__(157);var _invalid_es_interval_format_error=__webpack_require__(158);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ES_INTERVAL_STRING_REGEX=new RegExp("^([1-9][0-9]*)\\s*("+_datemath.default.units.join("|")+")$");function parseEsInterval(interval){var matches=String(interval).trim().match(ES_INTERVAL_STRING_REGEX);if(!matches){throw new _invalid_es_interval_format_error.InvalidEsIntervalFormatError(interval)}var value=parseFloat(matches[1]);var unit=matches[2];var type=_datemath.default.unitsMap[unit].type;if(type==="calendar"&&value!==1){throw new _invalid_es_calendar_interval_error.InvalidEsCalendarIntervalError(interval,value,unit,type)}return{value:value,unit:unit,type:type==="mixed"&&value===1||type==="calendar"?"calendar":"fixed"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _assert_never=__webpack_require__(390);Object.keys(_assert_never).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _assert_never[key]}})}));var _context=__webpack_require__(391);Object.keys(_context).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _context[key]}})}));var _deep_freeze=__webpack_require__(392);Object.keys(_deep_freeze).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _deep_freeze[key]}})}));var _get=__webpack_require__(162);Object.keys(_get).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get[key]}})}));var _map_to_object=__webpack_require__(393);Object.keys(_map_to_object).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _map_to_object[key]}})}));var _merge=__webpack_require__(394);Object.keys(_merge).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _merge[key]}})}));var _pick=__webpack_require__(395);Object.keys(_pick).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _pick[key]}})}));var _promise=__webpack_require__(396);Object.keys(_promise).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _promise[key]}})}));var _url=__webpack_require__(397);Object.keys(_url).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _url[key]}})}));var _unset=__webpack_require__(405);Object.keys(_unset).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _unset[key]}})}));var _get_flattened_object=__webpack_require__(406);Object.keys(_get_flattened_object).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_flattened_object[key]}})}));var _default_app_categories=__webpack_require__(407);Object.keys(_default_app_categories).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _default_app_categories[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertDateRangeToString=convertDateRangeToString;function convertDateRangeToString(_ref,format){var from=_ref.from,to=_ref.to;if(!from){return"Before "+format(to)}else if(!to){return"After "+format(from)}else{return format(from)+" to "+format(to)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertIPRangeToString=void 0;var convertIPRangeToString=function convertIPRangeToString(range,format){if(range.type==="mask"){return format(range.mask)}var from=range.from?format(range.from):"-Infinity";var to=range.to?format(range.to):"Infinity";return"".concat(from," to ").concat(to)};exports.convertIPRangeToString=convertIPRangeToString},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={getTitle:true,validateIndexPattern:true,IndexPatternMissingIndices:true,getFromSavedObject:true,isDefault:true};Object.defineProperty(exports,"getTitle",{enumerable:true,get:function get(){return _get_title.getTitle}});Object.defineProperty(exports,"validateIndexPattern",{enumerable:true,get:function get(){return _validate_index_pattern.validateIndexPattern}});Object.defineProperty(exports,"IndexPatternMissingIndices",{enumerable:true,get:function get(){return _errors.IndexPatternMissingIndices}});Object.defineProperty(exports,"getFromSavedObject",{enumerable:true,get:function get(){return _get_from_saved_object.getFromSavedObject}});Object.defineProperty(exports,"isDefault",{enumerable:true,get:function get(){return _is_default.isDefault}});var _get_title=__webpack_require__(522);var _types=__webpack_require__(186);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _validate_index_pattern=__webpack_require__(523);var _errors=__webpack_require__(524);var _get_from_saved_object=__webpack_require__(525);var _is_default=__webpack_require__(526)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _agg_config=__webpack_require__(89);Object.keys(_agg_config).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg_config[key]}})}));var _agg_configs=__webpack_require__(199);Object.keys(_agg_configs).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg_configs[key]}})}));var _agg_groups=__webpack_require__(115);Object.keys(_agg_groups).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg_groups[key]}})}));var _agg_type=__webpack_require__(91);Object.keys(_agg_type).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg_type[key]}})}));var _agg_types=__webpack_require__(540);Object.keys(_agg_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg_types[key]}})}));var _agg_types_registry=__webpack_require__(667);Object.keys(_agg_types_registry).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg_types_registry[key]}})}));var _buckets=__webpack_require__(668);Object.keys(_buckets).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _buckets[key]}})}));var _filter=__webpack_require__(196);Object.keys(_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _filter[key]}})}));var _metrics=__webpack_require__(669);Object.keys(_metrics).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _metrics[key]}})}));var _param_types=__webpack_require__(222);Object.keys(_param_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _param_types[key]}})}));var _types=__webpack_require__(672);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _utils=__webpack_require__(221);Object.keys(_utils).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _utils[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggConfig=void 0;var _lodash=_interopRequireDefault(__webpack_require__(41));var _i18n=__webpack_require__(0);var _agg_params=__webpack_require__(90);var _common=__webpack_require__(42);var _services=__webpack_require__(45);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggConfig=function(){_createClass(AggConfig,null,[{key:"ensureIds",value:function ensureIds(list){var have=[];var haveNot=[];list.forEach((function(obj){(obj.id?have:haveNot).push(obj)}));var nextId=AggConfig.nextId(have);haveNot.forEach((function(obj){obj.id=String(nextId++)}));return list}},{key:"nextId",value:function nextId(list){return 1+list.reduce((function(max,obj){return Math.max(max,+obj.id||0)}),0)}}]);function AggConfig(aggConfigs,opts){_classCallCheck(this,AggConfig);_defineProperty(this,"aggConfigs",void 0);_defineProperty(this,"id",void 0);_defineProperty(this,"enabled",void 0);_defineProperty(this,"params",void 0);_defineProperty(this,"parent",void 0);_defineProperty(this,"brandNew",void 0);_defineProperty(this,"schema",void 0);_defineProperty(this,"__type",void 0);_defineProperty(this,"__typeDecorations",void 0);_defineProperty(this,"subAggs",[]);this.aggConfigs=aggConfigs;this.id=String(opts.id||AggConfig.nextId(aggConfigs.aggs));this.enabled=typeof opts.enabled==="boolean"?opts.enabled:true;this.params={};this.setType(opts.type);if(opts.schema){this.schema=opts.schema}this.setParams(opts.params||{});this.__type=this.__type}_createClass(AggConfig,[{key:"setParams",value:function setParams(from){var _this=this;from=from||this.params||{};var to=this.params={};this.getAggParams().forEach((function(aggParam){var val=from[aggParam.name];if(val==null){if(aggParam.default==null)return;if(!_lodash.default.isFunction(aggParam.default)){val=aggParam.default}else{val=aggParam.default(_this);if(val==null)return}}if(aggParam.deserialize){var isTyped=_lodash.default.isFunction(aggParam.valueType);var isType=isTyped&&val instanceof aggParam.valueType;var isObject=!isTyped&&_lodash.default.isObject(val);var isDeserialized=isType||isObject;if(!isDeserialized){val=aggParam.deserialize(val,_this)}to[aggParam.name]=val;return}to[aggParam.name]=_lodash.default.cloneDeep(val)}))}},{key:"getParam",value:function getParam(key){return _lodash.default.get(this.params,key)}},{key:"write",value:function write(aggs){return(0,_agg_params.writeParams)(this.type.params,this,aggs)}},{key:"isFilterable",value:function isFilterable(){return _lodash.default.isFunction(this.type.createFilter)}},{key:"createFilter",value:function createFilter(key){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var createFilter=this.type.createFilter;if(!createFilter){throw new TypeError('The "'.concat(this.type.title,'" aggregation does not support filtering.'))}var field=this.getField();var label=this.getFieldDisplayName();if(field&&!field.filterable){var message='The "'.concat(label,'" field can not be used for filtering.');if(field.scripted){message='The "'.concat(label,'" field is scripted and can not be used for filtering.')}throw new TypeError(message)}return createFilter(this,key,params)}},{key:"onSearchRequestStart",value:function onSearchRequestStart(searchSource,options){var _this2=this;if(!this.type){return Promise.resolve()}return Promise.all(this.type.params.map((function(param){return param.modifyAggConfigOnSearchRequestStart(_this2,searchSource,options)})))}},{key:"toDsl",value:function toDsl(aggConfigs){if(this.type.hasNoDsl)return;var output=this.write(aggConfigs);var configDsl={};configDsl[this.type.dslName||this.type.name]=output.params;if(this.subAggs.length&&!output.subAggs)output.subAggs=this.subAggs;if(output.subAggs){var subDslLvl=configDsl.aggs||(configDsl.aggs={});output.subAggs.forEach((function nestAdhocSubAggs(subAggConfig){subDslLvl[subAggConfig.id]=subAggConfig.toDsl(aggConfigs)}))}if(output.parentAggs){var _subDslLvl=configDsl.parentAggs||(configDsl.parentAggs={});output.parentAggs.forEach((function nestAdhocSubAggs(subAggConfig){_subDslLvl[subAggConfig.id]=subAggConfig.toDsl(aggConfigs)}))}return configDsl}},{key:"toJSON",value:function toJSON(){var _this3=this;var params=this.params;var outParams=_lodash.default.transform(this.getAggParams(),(function(out,aggParam){var val=params[aggParam.name];if(val==null)return;if(aggParam.serialize)val=aggParam.serialize(val,_this3);if(val==null)return;out[aggParam.name]=_lodash.default.cloneDeep(val)}),{});return{id:this.id,enabled:this.enabled,type:this.type&&this.type.name,schema:this.schema,params:outParams}}},{key:"getAggParams",value:function getAggParams(){return _toConsumableArray(_lodash.default.has(this,"type.params")?this.type.params:[])}},{key:"getRequestAggs",value:function getRequestAggs(){return this.type&&this.type.getRequestAggs(this)||[this]}},{key:"getResponseAggs",value:function getResponseAggs(){return this.type&&this.type.getResponseAggs(this)||[this]}},{key:"getValue",value:function getValue(bucket){return this.type.getValue(this,bucket)}},{key:"getKey",value:function getKey(bucket,key){if(this.type.getKey){return this.type.getKey(bucket,key,this)}else{return""}}},{key:"getFieldDisplayName",value:function getFieldDisplayName(){var field=this.getField();return field?field.displayName||this.fieldName():""}},{key:"getField",value:function getField(){return this.params.field}},{key:"makeLabel",value:function makeLabel(){var percentageMode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.params.customLabel){return this.params.customLabel}if(!this.type)return"";return percentageMode?_i18n.i18n.translate("data.search.aggs.percentageOfLabel",{defaultMessage:"Percentage of {label}",values:{label:this.type.makeLabel(this)}}):"".concat(this.type.makeLabel(this))}},{key:"getIndexPattern",value:function getIndexPattern(){return this.aggConfigs.indexPattern}},{key:"getTimeRange",value:function getTimeRange(){return this.aggConfigs.timeRange}},{key:"fieldFormatter",value:function fieldFormatter(contentType,defaultFormat){var format=this.type&&this.type.getFormat(this);if(format){return format.getConverterFor(contentType)}return this.fieldOwnFormatter(contentType,defaultFormat)}},{key:"fieldOwnFormatter",value:function fieldOwnFormatter(contentType,defaultFormat){var fieldFormatsService=(0,_services.getFieldFormats)();var field=this.getField();var format=field&&field.format;if(!format)format=defaultFormat;if(!format)format=fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.STRING);return format.getConverterFor(contentType)}},{key:"fieldName",value:function fieldName(){var field=this.getField();return field?field.name:""}},{key:"fieldIsTimeField",value:function fieldIsTimeField(){var indexPattern=this.getIndexPattern();if(!indexPattern)return false;var timeFieldName=indexPattern.timeFieldName;return timeFieldName&&this.fieldName()===timeFieldName}},{key:"setType",value:function setType(type){this.type=type}},{key:"type",get:function get(){return this.__type},set:function set(type){var _this4=this;if(this.__typeDecorations){_lodash.default.forOwn(this.__typeDecorations,(function(prop,name){delete this[name]}),this)}if(type&&_lodash.default.isFunction(type.decorateAggConfig)){this.__typeDecorations=type.decorateAggConfig();Object.defineProperties(this,this.__typeDecorations)}this.__type=type;var availableFields=[];var fieldParam=this.type&&this.type.params.find((function(p){return p.type==="field"}));if(fieldParam){availableFields=fieldParam.getAvailableFields(this)}this.setParams({field:availableFields.find((function(field){return field.name===_this4.getField()}))})}}]);return AggConfig}();exports.AggConfig=AggConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.writeParams=exports.initParams=void 0;var _agg=__webpack_require__(194);var _field=__webpack_require__(195);var _optioned=__webpack_require__(114);var _string=__webpack_require__(197);var _json=__webpack_require__(198);var _base=__webpack_require__(62);var paramTypeMap={field:_field.FieldParamType,optioned:_optioned.OptionedParamType,string:_string.StringParamType,json:_json.JsonParamType,agg:_agg.AggParamType,_default:_base.BaseParamType};var initParams=function initParams(params){return params.map((function(config){var Class=paramTypeMap[config.type]||paramTypeMap._default;return new Class(config)}))};exports.initParams=initParams;var writeParams=function writeParams(){var params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var aggConfig=arguments.length>1?arguments[1]:undefined;var aggs=arguments.length>2?arguments[2]:undefined;var locals=arguments.length>3?arguments[3]:undefined;var output={params:{}};locals=locals||{};params.forEach((function(param){if(param.write){param.write(aggConfig,output,aggs,locals)}else{if(param&&param.name){output.params[param.name]=aggConfig.params[param.name]}}}));return output};exports.writeParams=writeParams},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggType=void 0;var _lodash=__webpack_require__(41);var _i18n=__webpack_require__(0);var _agg_params=__webpack_require__(90);var _base=__webpack_require__(62);var _common=__webpack_require__(42);var _services=__webpack_require__(45);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getFormat=function getFormat(agg){var field=agg.getField();var fieldFormatsService=(0,_services.getFieldFormats)();return field?field.format:fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.STRING)};var AggType=function AggType(config){var _this=this;_classCallCheck(this,AggType);_defineProperty(this,"name",void 0);_defineProperty(this,"type",void 0);_defineProperty(this,"subtype",void 0);_defineProperty(this,"dslName",void 0);_defineProperty(this,"title",void 0);_defineProperty(this,"makeLabel",void 0);_defineProperty(this,"ordered",void 0);_defineProperty(this,"hasNoDsl",void 0);_defineProperty(this,"createFilter",void 0);_defineProperty(this,"params",void 0);_defineProperty(this,"getRequestAggs",void 0);_defineProperty(this,"getResponseAggs",void 0);_defineProperty(this,"decorateAggConfig",void 0);_defineProperty(this,"postFlightRequest",void 0);_defineProperty(this,"getFormat",void 0);_defineProperty(this,"getValue",void 0);_defineProperty(this,"getKey",void 0);_defineProperty(this,"paramByName",(function(name){return _this.params.find((function(p){return p.name===name}))}));this.name=config.name;this.type=config.type||"metrics";this.dslName=config.dslName||config.name;this.title=config.title;this.makeLabel=config.makeLabel||(0,_lodash.constant)(this.name);this.ordered=config.ordered;this.hasNoDsl=!!config.hasNoDsl;if(config.createFilter){this.createFilter=config.createFilter}if(config.params&&config.params.length&&config.params[0]instanceof _base.BaseParamType){this.params=config.params}else{var _params=config.params?_toConsumableArray(config.params):[];_params.push({name:"json",type:"json",advanced:true});if(config.customLabels!==false){_params.push({name:"customLabel",displayName:_i18n.i18n.translate("data.search.aggs.string.customLabel",{defaultMessage:"Custom label"}),type:"string",write:_lodash.noop})}this.params=(0,_agg_params.initParams)(_params)}this.getRequestAggs=config.getRequestAggs||_lodash.noop;this.getResponseAggs=config.getResponseAggs||function(){};this.decorateAggConfig=config.decorateAggConfig||function(){return{}};this.postFlightRequest=config.postFlightRequest||_lodash.identity;this.getFormat=config.getFormat||getFormat;this.getValue=config.getValue||function(agg,bucket){}};exports.AggType=AggType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _esaggs=__webpack_require__(571);Object.keys(_esaggs).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _esaggs[key]}})}));var _utils=__webpack_require__(121);Object.keys(_utils).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _utils[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SuggestionsComponent",{enumerable:true,get:function get(){return _typeahead.SuggestionsComponent}});Object.defineProperty(exports,"IndexPatternSelect",{enumerable:true,get:function get(){return _index_pattern_select.IndexPatternSelect}});Object.defineProperty(exports,"FilterBar",{enumerable:true,get:function get(){return _filter_bar.FilterBar}});Object.defineProperty(exports,"QueryStringInput",{enumerable:true,get:function get(){return _query_string_input.QueryStringInput}});Object.defineProperty(exports,"SearchBar",{enumerable:true,get:function get(){return _search_bar.SearchBar}});Object.defineProperty(exports,"SearchBarProps",{enumerable:true,get:function get(){return _search_bar.SearchBarProps}});Object.defineProperty(exports,"StatefulSearchBarProps",{enumerable:true,get:function get(){return _search_bar.StatefulSearchBarProps}});Object.defineProperty(exports,"ShardFailureOpenModalButton",{enumerable:true,get:function get(){return _shard_failure_modal.ShardFailureOpenModalButton}});Object.defineProperty(exports,"ShardFailureRequest",{enumerable:true,get:function get(){return _shard_failure_modal.ShardFailureRequest}});Object.defineProperty(exports,"ShardFailureResponse",{enumerable:true,get:function get(){return _shard_failure_modal.ShardFailureResponse}});Object.defineProperty(exports,"SavedQueryManagementComponent",{enumerable:true,get:function get(){return _saved_query_management.SavedQueryManagementComponent}});Object.defineProperty(exports,"SaveQueryForm",{enumerable:true,get:function get(){return _saved_query_form.SaveQueryForm}});Object.defineProperty(exports,"SavedQueryMeta",{enumerable:true,get:function get(){return _saved_query_form.SavedQueryMeta}});var _typeahead=__webpack_require__(578);var _index_pattern_select=__webpack_require__(213);var _filter_bar=__webpack_require__(108);var _query_string_input=__webpack_require__(214);var _search_bar=__webpack_require__(584);var _shard_failure_modal=__webpack_require__(592);var _saved_query_management=__webpack_require__(598);var _saved_query_form=__webpack_require__(601)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.syncSearchStrategyProvider=exports.SYNC_SEARCH_STRATEGY=void 0;var _rxjs=__webpack_require__(28);var _operators=__webpack_require__(31);var SYNC_SEARCH_STRATEGY="SYNC_SEARCH_STRATEGY";exports.SYNC_SEARCH_STRATEGY=SYNC_SEARCH_STRATEGY;var syncSearchStrategyProvider=function syncSearchStrategyProvider(context){var loadingCount$=new _rxjs.BehaviorSubject(0);context.core.http.addLoadingCountSource(loadingCount$);var search=function search(request){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};loadingCount$.next(loadingCount$.getValue()+1);return(0,_rxjs.from)(context.core.http.fetch({path:"/internal/search/".concat(request.serverStrategy),method:"POST",body:JSON.stringify(request),signal:options.signal})).pipe((0,_operators.finalize)((function(){return loadingCount$.next(loadingCount$.getValue()-1)})))};return{search:search}};exports.syncSearchStrategyProvider=syncSearchStrategyProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;Object.defineProperty(exports,"UiActionsSetup",{enumerable:true,get:function get(){return _plugin.UiActionsSetup}});Object.defineProperty(exports,"UiActionsStart",{enumerable:true,get:function get(){return _plugin.UiActionsStart}});Object.defineProperty(exports,"UiActionsServiceParams",{enumerable:true,get:function get(){return _service.UiActionsServiceParams}});Object.defineProperty(exports,"UiActionsService",{enumerable:true,get:function get(){return _service.UiActionsService}});Object.defineProperty(exports,"Action",{enumerable:true,get:function get(){return _actions.Action}});Object.defineProperty(exports,"createAction",{enumerable:true,get:function get(){return _actions.createAction}});Object.defineProperty(exports,"IncompatibleActionError",{enumerable:true,get:function get(){return _actions.IncompatibleActionError}});Object.defineProperty(exports,"ActionByType",{enumerable:true,get:function get(){return _actions.ActionByType}});Object.defineProperty(exports,"buildContextMenuForActions",{enumerable:true,get:function get(){return _context_menu.buildContextMenuForActions}});Object.defineProperty(exports,"Trigger",{enumerable:true,get:function get(){return _triggers.Trigger}});Object.defineProperty(exports,"TriggerContext",{enumerable:true,get:function get(){return _triggers.TriggerContext}});Object.defineProperty(exports,"SELECT_RANGE_TRIGGER",{enumerable:true,get:function get(){return _triggers.SELECT_RANGE_TRIGGER}});Object.defineProperty(exports,"selectRangeTrigger",{enumerable:true,get:function get(){return _triggers.selectRangeTrigger}});Object.defineProperty(exports,"VALUE_CLICK_TRIGGER",{enumerable:true,get:function get(){return _triggers.VALUE_CLICK_TRIGGER}});Object.defineProperty(exports,"valueClickTrigger",{enumerable:true,get:function get(){return _triggers.valueClickTrigger}});Object.defineProperty(exports,"APPLY_FILTER_TRIGGER",{enumerable:true,get:function get(){return _triggers.APPLY_FILTER_TRIGGER}});Object.defineProperty(exports,"applyFilterTrigger",{enumerable:true,get:function get(){return _triggers.applyFilterTrigger}});Object.defineProperty(exports,"TriggerContextMapping",{enumerable:true,get:function get(){return _types.TriggerContextMapping}});Object.defineProperty(exports,"TriggerId",{enumerable:true,get:function get(){return _types.TriggerId}});Object.defineProperty(exports,"ActionContextMapping",{enumerable:true,get:function get(){return _types.ActionContextMapping}});Object.defineProperty(exports,"ActionType",{enumerable:true,get:function get(){return _types.ActionType}});var _plugin=__webpack_require__(681);var _service=__webpack_require__(228);var _actions=__webpack_require__(689);var _context_menu=__webpack_require__(231);var _triggers=__webpack_require__(122);var _types=__webpack_require__(693);function plugin(initializerContext){return new _plugin.UiActionsPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"textService",{enumerable:true,get:function get(){return _text.textService}});var _text=__webpack_require__(257)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.createCapabilityFailureMessage=createCapabilityFailureMessage;exports.hasPrivilegeFactory=exports.toArray=void 0;var _i18n=__webpack_require__(0);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function isPrivileges(arg){return _typeof(arg)==="object"&&arg!==null&&arg.hasOwnProperty("hasAllPrivileges")&&typeof arg.hasAllPrivileges==="boolean"&&arg.hasOwnProperty("missingPrivileges")&&_typeof(arg.missingPrivileges)==="object"&&arg.missingPrivileges!==null}var toArray=function toArray(value){return Array.isArray(value)?value:[value]};exports.toArray=toArray;var hasPrivilegeFactory=function hasPrivilegeFactory(privileges){return function(privilege){var _privilege=_slicedToArray(privilege,2),section=_privilege[0],requiredPrivilege=_privilege[1];if(isPrivileges(privileges)&&!privileges.missingPrivileges[section]){return true}if(isPrivileges(privileges)&&privileges.missingPrivileges[section].length===0){return true}if(requiredPrivilege==="*"){return false}return isPrivileges(privileges)&&!privileges.missingPrivileges[section].includes(requiredPrivilege)}};exports.hasPrivilegeFactory=hasPrivilegeFactory;function createCapabilityFailureMessage(capability){var message="";switch(capability){case"canCreateTransform":message=_i18n.i18n.translate("xpack.transform.capability.noPermission.createTransformTooltip",{defaultMessage:"You do not have permission to create transforms."});break;case"canStartStopTransform":message=_i18n.i18n.translate("xpack.transform.capability.noPermission.startOrStopTransformTooltip",{defaultMessage:"You do not have permission to start or stop transforms."});break;case"canDeleteTransform":message=_i18n.i18n.translate("xpack.transform.capability.noPermission.deleteTransformTooltip",{defaultMessage:"You do not have permission to delete transforms."});break}return _i18n.i18n.translate("xpack.transform.capability.pleaseContactAdministratorTooltip",{defaultMessage:"{message} Please contact your administrator.",values:{message:message}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDiscoverUrl=getDiscoverUrl;exports.RedirectToCreateTransform=exports.RedirectToTransformManagement=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _reactRouterDom=__webpack_require__(33);var _risonNode=_interopRequireDefault(__webpack_require__(277));var _constants=__webpack_require__(70);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getDiscoverUrl(indexPatternId,baseUrl){var _g=_risonNode.default.encode({});var _a=_risonNode.default.encode({index:indexPatternId});var hash="#/discover?_g=".concat(_g,"&_a=").concat(_a);return"".concat(baseUrl).concat(hash)}var RedirectToTransformManagement=function RedirectToTransformManagement(){return _react.default.createElement(_reactRouterDom.Redirect,{from:_constants.CLIENT_BASE_PATH,to:_constants.CLIENT_BASE_PATH+_constants.SECTION_SLUG.HOME})};exports.RedirectToTransformManagement=RedirectToTransformManagement;var RedirectToCreateTransform=function RedirectToCreateTransform(_ref){var savedObjectId=_ref.savedObjectId;return _react.default.createElement(_reactRouterDom.Redirect,{to:"".concat(_constants.CLIENT_BASE_PATH).concat(_constants.SECTION_SLUG.CREATE_TRANSFORM,"/").concat(savedObjectId)})};exports.RedirectToCreateTransform=RedirectToCreateTransform},function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.buildInlineScriptForPhraseFilter=exports.getConvertedValueForField=exports.getPhraseScript=exports.buildPhraseFilter=exports.getPhraseFilterValue=exports.getPhraseFilterField=exports.isScriptedPhraseFilter=exports.isPhraseFilter=void 0;var _lodash=__webpack_require__(41);var isPhraseFilter=function isPhraseFilter(filter){var isMatchPhraseQuery=filter&&filter.query&&filter.query.match_phrase;var isDeprecatedMatchPhraseQuery=filter&&filter.query&&filter.query.match&&Object.values(filter.query.match).find((function(params){return params.type==="phrase"}));return Boolean(isMatchPhraseQuery||isDeprecatedMatchPhraseQuery)};exports.isPhraseFilter=isPhraseFilter;var isScriptedPhraseFilter=function isScriptedPhraseFilter(filter){return Boolean((0,_lodash.get)(filter,"script.script.params.value"))};exports.isScriptedPhraseFilter=isScriptedPhraseFilter;var getPhraseFilterField=function getPhraseFilterField(filter){var queryConfig=filter.query.match_phrase||filter.query.match;return Object.keys(queryConfig)[0]};exports.getPhraseFilterField=getPhraseFilterField;var getPhraseFilterValue=function getPhraseFilterValue(filter){var queryConfig=filter.query.match_phrase||filter.query.match;var queryValue=Object.values(queryConfig)[0];return(0,_lodash.isPlainObject)(queryValue)?queryValue.query:queryValue};exports.getPhraseFilterValue=getPhraseFilterValue;var buildPhraseFilter=function buildPhraseFilter(field,value,indexPattern){var convertedValue=getConvertedValueForField(field,value);if(field.scripted){return{meta:{index:indexPattern.id,field:field.name},script:getPhraseScript(field,value)}}else{return{meta:{index:indexPattern.id},query:{match_phrase:_defineProperty({},field.name,convertedValue)}}}};exports.buildPhraseFilter=buildPhraseFilter;var getPhraseScript=function getPhraseScript(field,value){var convertedValue=getConvertedValueForField(field,value);var script=buildInlineScriptForPhraseFilter(field);return{script:{source:script,lang:field.lang,params:{value:convertedValue}}}};exports.getPhraseScript=getPhraseScript;var getConvertedValueForField=function getConvertedValueForField(field,value){if(typeof value!=="boolean"&&field.type==="boolean"){if([1,"true"].includes(value)){return true}else if([0,"false"].includes(value)){return false}else{throw new Error("".concat(value," is not a valid boolean value for boolean field ").concat(field.name))}}return value};exports.getConvertedValueForField=getConvertedValueForField;var buildInlineScriptForPhraseFilter=function buildInlineScriptForPhraseFilter(scriptedField){if(scriptedField.lang==="painless"){return"boolean compare(Supplier s, def v) {return s.get() == v;}"+"compare(() -> { ".concat(scriptedField.script," }, params.value);")}else{return"(".concat(scriptedField.script,") == value")}};exports.buildInlineScriptForPhraseFilter=buildInlineScriptForPhraseFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFields=getFields;var literal=_interopRequireWildcard(__webpack_require__(73));var wildcard=_interopRequireWildcard(__webpack_require__(102));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function getFields(node,indexPattern){if(!indexPattern)return[];if(node.type==="literal"){var fieldName=literal.toElasticsearchQuery(node);var field=indexPattern.fields.find((function(fld){return fld.name===fieldName}));if(!field){return[]}return[field]}else if(node.type==="wildcard"){var fields=indexPattern.fields.filter((function(fld){return wildcard.test(node,fld.name)}));return fields}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNode=buildNode;exports.test=test;exports.toElasticsearchQuery=toElasticsearchQuery;exports.toQueryStringQuery=toQueryStringQuery;exports.hasLeadingWildcard=hasLeadingWildcard;exports.wildcardSymbol=void 0;var _ast=__webpack_require__(140);var wildcardSymbol="@kuery-wildcard@";exports.wildcardSymbol=wildcardSymbol;function escapeRegExp(str){return str.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function escapeQueryString(str){return str.replace(/[+-=&|><!(){}[\]^"~*?:\\/]/g,"\\$&")}function buildNode(value){if(!value.includes(wildcardSymbol)){return(0,_ast.fromLiteralExpression)(value)}return{type:"wildcard",value:value}}function test(node,str){var value=node.value;var regex=value.split(wildcardSymbol).map(escapeRegExp).join("[\\s\\S]*");var regexp=new RegExp("^".concat(regex,"$"));return regexp.test(str)}function toElasticsearchQuery(node){var value=node.value;return value.split(wildcardSymbol).join("*")}function toQueryStringQuery(node){var value=node.value;return value.split(wildcardSymbol).map(escapeQueryString).join("*")}function hasLeadingWildcard(node){var value=node.value;return value.startsWith(wildcardSymbol)&&value.replace(wildcardSymbol,"").length>0}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTimeZoneFromSettings=getTimeZoneFromSettings;var _momentTimezone=_interopRequireDefault(__webpack_require__(32));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getTimeZoneFromSettings(dateFormatTZ){var detectedTimezone=_momentTimezone.default.tz.guess();return dateFormatTZ==="Browser"?detectedTimezone:dateFormatTZ}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FieldFormatsRegistry",{enumerable:true,get:function get(){return _field_formats_registry.FieldFormatsRegistry}});Object.defineProperty(exports,"FieldFormat",{enumerable:true,get:function get(){return _field_format.FieldFormat}});Object.defineProperty(exports,"baseFormatters",{enumerable:true,get:function get(){return _base_formatters.baseFormatters}});Object.defineProperty(exports,"BoolFormat",{enumerable:true,get:function get(){return _converters.BoolFormat}});Object.defineProperty(exports,"BytesFormat",{enumerable:true,get:function get(){return _converters.BytesFormat}});Object.defineProperty(exports,"ColorFormat",{enumerable:true,get:function get(){return _converters.ColorFormat}});Object.defineProperty(exports,"DateNanosFormat",{enumerable:true,get:function get(){return _converters.DateNanosFormat}});Object.defineProperty(exports,"DurationFormat",{enumerable:true,get:function get(){return _converters.DurationFormat}});Object.defineProperty(exports,"IpFormat",{enumerable:true,get:function get(){return _converters.IpFormat}});Object.defineProperty(exports,"NumberFormat",{enumerable:true,get:function get(){return _converters.NumberFormat}});Object.defineProperty(exports,"PercentFormat",{enumerable:true,get:function get(){return _converters.PercentFormat}});Object.defineProperty(exports,"RelativeDateFormat",{enumerable:true,get:function get(){return _converters.RelativeDateFormat}});Object.defineProperty(exports,"SourceFormat",{enumerable:true,get:function get(){return _converters.SourceFormat}});Object.defineProperty(exports,"StaticLookupFormat",{enumerable:true,get:function get(){return _converters.StaticLookupFormat}});Object.defineProperty(exports,"UrlFormat",{enumerable:true,get:function get(){return _converters.UrlFormat}});Object.defineProperty(exports,"StringFormat",{enumerable:true,get:function get(){return _converters.StringFormat}});Object.defineProperty(exports,"TruncateFormat",{enumerable:true,get:function get(){return _converters.TruncateFormat}});Object.defineProperty(exports,"getHighlightRequest",{enumerable:true,get:function get(){return _utils.getHighlightRequest}});Object.defineProperty(exports,"serializeFieldFormat",{enumerable:true,get:function get(){return _utils.serializeFieldFormat}});Object.defineProperty(exports,"DEFAULT_CONVERTER_COLOR",{enumerable:true,get:function get(){return _color_default.DEFAULT_CONVERTER_COLOR}});Object.defineProperty(exports,"FIELD_FORMAT_IDS",{enumerable:true,get:function get(){return _types.FIELD_FORMAT_IDS}});Object.defineProperty(exports,"FieldFormatsGetConfigFn",{enumerable:true,get:function get(){return _types.FieldFormatsGetConfigFn}});Object.defineProperty(exports,"FieldFormatsContentType",{enumerable:true,get:function get(){return _types.FieldFormatsContentType}});Object.defineProperty(exports,"FieldFormatConfig",{enumerable:true,get:function get(){return _types.FieldFormatConfig}});Object.defineProperty(exports,"FieldFormatId",{enumerable:true,get:function get(){return _types.FieldFormatId}});Object.defineProperty(exports,"IFieldFormatType",{enumerable:true,get:function get(){return _types.IFieldFormatType}});Object.defineProperty(exports,"IFieldFormat",{enumerable:true,get:function get(){return _types.IFieldFormat}});Object.defineProperty(exports,"HTML_CONTEXT_TYPE",{enumerable:true,get:function get(){return _content_types.HTML_CONTEXT_TYPE}});Object.defineProperty(exports,"TEXT_CONTEXT_TYPE",{enumerable:true,get:function get(){return _content_types.TEXT_CONTEXT_TYPE}});var _field_formats_registry=__webpack_require__(315);var _field_format=__webpack_require__(49);var _base_formatters=__webpack_require__(147);var _converters=__webpack_require__(148);var _utils=__webpack_require__(66);var _color_default=__webpack_require__(149);var _types=__webpack_require__(48);var _content_types=__webpack_require__(145)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.NumeralFormat=void 0;var _numeral=_interopRequireDefault(__webpack_require__(327));var _languages=_interopRequireDefault(__webpack_require__(328));var _types=__webpack_require__(50);var _field_format=__webpack_require__(49);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var numeralInst=(0,_numeral.default)();_languages.default.forEach((function(numeralLanguage){_numeral.default.language(numeralLanguage.id,numeralLanguage.lang)}));var NumeralFormat=function(_field_format$FieldFo){_inherits(NumeralFormat,_field_format$FieldFo);function NumeralFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,NumeralFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(NumeralFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"id",void 0);_defineProperty(_assertThisInitialized(_this),"title",void 0);_defineProperty(_assertThisInitialized(_this),"getParamDefaults",(function(){return{pattern:_this.getConfig("format:".concat(_this.id,":defaultPattern"))}}));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){return _this.getConvertedValue(val)}));return _this}_createClass(NumeralFormat,[{key:"getConvertedValue",value:function getConvertedValue(val){if(val===-Infinity)return"-∞";if(val===+Infinity)return"+∞";if(typeof val!=="number"){val=parseFloat(val)}if(isNaN(val))return"";var previousLocale=_numeral.default.language();var defaultLocale=this.getConfig&&this.getConfig("format:number:defaultLocale")||"en";_numeral.default.language(defaultLocale);var formatted=numeralInst.set(val).format(this.param("pattern"));_numeral.default.language(previousLocale);return formatted}}]);return NumeralFormat}(_field_format.FieldFormat);exports.NumeralFormat=NumeralFormat;_defineProperty(NumeralFormat,"fieldType",_types.KBN_FIELD_TYPES.NUMBER)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"OnSaveProps",{enumerable:true,get:function get(){return _save_modal.OnSaveProps}});Object.defineProperty(exports,"SavedObjectSaveModal",{enumerable:true,get:function get(){return _save_modal.SavedObjectSaveModal}});Object.defineProperty(exports,"SaveResult",{enumerable:true,get:function get(){return _save_modal.SaveResult}});Object.defineProperty(exports,"showSaveModal",{enumerable:true,get:function get(){return _save_modal.showSaveModal}});Object.defineProperty(exports,"getSavedObjectFinder",{enumerable:true,get:function get(){return _finder.getSavedObjectFinder}});Object.defineProperty(exports,"SavedObjectFinderUi",{enumerable:true,get:function get(){return _finder.SavedObjectFinderUi}});Object.defineProperty(exports,"SavedObjectMetaData",{enumerable:true,get:function get(){return _finder.SavedObjectMetaData}});Object.defineProperty(exports,"SavedObjectLoader",{enumerable:true,get:function get(){return _saved_object.SavedObjectLoader}});Object.defineProperty(exports,"createSavedObjectClass",{enumerable:true,get:function get(){return _saved_object.createSavedObjectClass}});Object.defineProperty(exports,"checkForDuplicateTitle",{enumerable:true,get:function get(){return _saved_object.checkForDuplicateTitle}});Object.defineProperty(exports,"saveWithConfirmation",{enumerable:true,get:function get(){return _saved_object.saveWithConfirmation}});Object.defineProperty(exports,"isErrorNonFatal",{enumerable:true,get:function get(){return _saved_object.isErrorNonFatal}});Object.defineProperty(exports,"SavedObjectSaveOpts",{enumerable:true,get:function get(){return _types.SavedObjectSaveOpts}});Object.defineProperty(exports,"SavedObjectKibanaServices",{enumerable:true,get:function get(){return _types.SavedObjectKibanaServices}});Object.defineProperty(exports,"SavedObject",{enumerable:true,get:function get(){return _types.SavedObject}});exports.plugin=void 0;var _plugin=__webpack_require__(447);var _save_modal=__webpack_require__(453);var _finder=__webpack_require__(456);var _saved_object=__webpack_require__(462);var _types=__webpack_require__(711);var plugin=function plugin(){return new _plugin.SavedObjectsPublicPlugin};exports.plugin=plugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FilterBar",{enumerable:true,get:function get(){return _filter_bar.FilterBar}});Object.defineProperty(exports,"FilterLabel",{enumerable:true,get:function get(){return _filter_label.FilterLabel}});var _filter_bar=__webpack_require__(470);var _filter_label=__webpack_require__(176)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GenericComboBox=GenericComboBox;var _eui=__webpack_require__(23);var _react=_interopRequireDefault(__webpack_require__(22));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function GenericComboBox(props){var options=props.options,selectedOptions=props.selectedOptions,getLabel=props.getLabel,onChange=props.onChange,otherProps=_objectWithoutProperties(props,["options","selectedOptions","getLabel","onChange"]);var labels=options.map(getLabel);var euiOptions=labels.map((function(label){return{label:label}}));var selectedEuiOptions=selectedOptions.filter((function(option){return options.indexOf(option)!==-1})).map((function(option){return euiOptions[options.indexOf(option)]}));var onComboBoxChange=function onComboBoxChange(newOptions){var newValues=newOptions.map((function(_ref){var label=_ref.label;return options[labels.indexOf(label)]}));onChange(newValues)};return _react.default.createElement(_eui.EuiComboBox,_extends({options:euiOptions,selectedOptions:selectedEuiOptions,onChange:onComboBoxChange},otherProps))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _persisted_log=__webpack_require__(482);Object.keys(_persisted_log).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _persisted_log[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={TimefilterService:true,TimefilterSetup:true,Timefilter:true,TimefilterContract:true,TimeHistory:true,TimeHistoryContract:true,getTime:true,changeTimeFilter:true,extractTimeFilter:true};Object.defineProperty(exports,"TimefilterService",{enumerable:true,get:function get(){return _timefilter_service.TimefilterService}});Object.defineProperty(exports,"TimefilterSetup",{enumerable:true,get:function get(){return _timefilter_service.TimefilterSetup}});Object.defineProperty(exports,"Timefilter",{enumerable:true,get:function get(){return _timefilter.Timefilter}});Object.defineProperty(exports,"TimefilterContract",{enumerable:true,get:function get(){return _timefilter.TimefilterContract}});Object.defineProperty(exports,"TimeHistory",{enumerable:true,get:function get(){return _time_history.TimeHistory}});Object.defineProperty(exports,"TimeHistoryContract",{enumerable:true,get:function get(){return _time_history.TimeHistoryContract}});Object.defineProperty(exports,"getTime",{enumerable:true,get:function get(){return _get_time.getTime}});Object.defineProperty(exports,"changeTimeFilter",{enumerable:true,get:function get(){return _change_time_filter.changeTimeFilter}});Object.defineProperty(exports,"extractTimeFilter",{enumerable:true,get:function get(){return _extract_time_filter.extractTimeFilter}});var _timefilter_service=__webpack_require__(501);var _types=__webpack_require__(502);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _timefilter=__webpack_require__(503);var _time_history=__webpack_require__(510);var _get_time=__webpack_require__(180);var _change_time_filter=__webpack_require__(511);var _extract_time_filter=__webpack_require__(512)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ILLEGAL_CHARACTERS_KEY",{enumerable:true,get:function get(){return _lib.ILLEGAL_CHARACTERS_KEY}});Object.defineProperty(exports,"CONTAINS_SPACES_KEY",{enumerable:true,get:function get(){return _lib.CONTAINS_SPACES_KEY}});Object.defineProperty(exports,"ILLEGAL_CHARACTERS_VISIBLE",{enumerable:true,get:function get(){return _lib.ILLEGAL_CHARACTERS_VISIBLE}});Object.defineProperty(exports,"ILLEGAL_CHARACTERS",{enumerable:true,get:function get(){return _lib.ILLEGAL_CHARACTERS}});Object.defineProperty(exports,"validateIndexPattern",{enumerable:true,get:function get(){return _lib.validateIndexPattern}});Object.defineProperty(exports,"getFromSavedObject",{enumerable:true,get:function get(){return _lib.getFromSavedObject}});Object.defineProperty(exports,"isDefault",{enumerable:true,get:function get(){return _lib.isDefault}});Object.defineProperty(exports,"getRoutes",{enumerable:true,get:function get(){return _utils.getRoutes}});Object.defineProperty(exports,"flattenHitWrapper",{enumerable:true,get:function get(){return _index_patterns.flattenHitWrapper}});Object.defineProperty(exports,"formatHitProvider",{enumerable:true,get:function get(){return _index_patterns.formatHitProvider}});Object.defineProperty(exports,"IndexPatternsService",{enumerable:true,get:function get(){return _index_patterns.IndexPatternsService}});Object.defineProperty(exports,"IndexPatternsContract",{enumerable:true,get:function get(){return _index_patterns.IndexPatternsContract}});Object.defineProperty(exports,"IndexPattern",{enumerable:true,get:function get(){return _index_patterns.IndexPattern}});Object.defineProperty(exports,"TypeMeta",{enumerable:true,get:function get(){return _index_patterns.TypeMeta}});Object.defineProperty(exports,"AggregationRestrictions",{enumerable:true,get:function get(){return _index_patterns.AggregationRestrictions}});Object.defineProperty(exports,"Field",{enumerable:true,get:function get(){return _fields.Field}});Object.defineProperty(exports,"FieldList",{enumerable:true,get:function get(){return _fields.FieldList}});var _lib=__webpack_require__(87);var _utils=__webpack_require__(187);var _index_patterns=__webpack_require__(527);var _fields=__webpack_require__(191)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"QuerySuggestion",{enumerable:true,get:function get(){return _query_suggestion_provider.QuerySuggestion}});Object.defineProperty(exports,"QuerySuggestionTypes",{enumerable:true,get:function get(){return _query_suggestion_provider.QuerySuggestionTypes}});Object.defineProperty(exports,"QuerySuggestionGetFn",{enumerable:true,get:function get(){return _query_suggestion_provider.QuerySuggestionGetFn}});Object.defineProperty(exports,"QuerySuggestionGetFnArgs",{enumerable:true,get:function get(){return _query_suggestion_provider.QuerySuggestionGetFnArgs}});Object.defineProperty(exports,"QuerySuggestionBasic",{enumerable:true,get:function get(){return _query_suggestion_provider.QuerySuggestionBasic}});Object.defineProperty(exports,"QuerySuggestionField",{enumerable:true,get:function get(){return _query_suggestion_provider.QuerySuggestionField}});Object.defineProperty(exports,"AutocompleteService",{enumerable:true,get:function get(){return _autocomplete_service.AutocompleteService}});Object.defineProperty(exports,"AutocompleteSetup",{enumerable:true,get:function get(){return _autocomplete_service.AutocompleteSetup}});Object.defineProperty(exports,"AutocompleteStart",{enumerable:true,get:function get(){return _autocomplete_service.AutocompleteStart}});var _query_suggestion_provider=__webpack_require__(534);var _autocomplete_service=__webpack_require__(535)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.OptionedParamType=void 0;var _base=__webpack_require__(62);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var OptionedParamType=function(_BaseParamType){_inherits(OptionedParamType,_BaseParamType);function OptionedParamType(config){var _this;_classCallCheck(this,OptionedParamType);_this=_possibleConstructorReturn(this,_getPrototypeOf(OptionedParamType).call(this,config));_defineProperty(_assertThisInitialized(_this),"options",void 0);if(!config.write){_this.write=function(aggConfig,output){output.params[_this.name]=aggConfig.params[_this.name].value}}if(!config.serialize){_this.serialize=function(selected){return selected.value}}if(!config.deserialize){_this.deserialize=function(value){return _this.options.find((function(option){return option.value===value}))}}_this.options=config.options||[];return _this}return OptionedParamType}(_base.BaseParamType);exports.OptionedParamType=OptionedParamType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.aggGroupNamesMap=exports.AggGroupNames=void 0;var _i18n=__webpack_require__(0);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggGroupNames=Object.freeze({Buckets:"buckets",Metrics:"metrics",None:"none"});exports.AggGroupNames=AggGroupNames;var aggGroupNamesMap=function aggGroupNamesMap(){var _ref;return _ref={},_defineProperty(_ref,AggGroupNames.Metrics,_i18n.i18n.translate("data.search.aggs.aggGroups.metricsText",{defaultMessage:"Metrics"})),_defineProperty(_ref,AggGroupNames.Buckets,_i18n.i18n.translate("data.search.aggs.aggGroups.bucketsText",{defaultMessage:"Buckets"})),_ref};exports.aggGroupNamesMap=aggGroupNamesMap},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.create=exports.getResponseAggConfigClass=void 0;var _lodash=__webpack_require__(41);var getResponseAggConfigClass=function getResponseAggConfigClass(agg,props){if(agg.$$_ResponseAggConfigClass){return agg.$$_ResponseAggConfigClass}else{return agg.$$_ResponseAggConfigClass=create(agg,props)}};exports.getResponseAggConfigClass=getResponseAggConfigClass;var create=function create(parentAgg,props){function ResponseAggConfig(key){var parentId=parentAgg.id;var id;var subId=String(key);if(subId.indexOf(".")>-1){id=parentId+"['"+subId.replace(/'/g,"\\'")+"']"}else{id=parentId+"."+subId}this.id=id;this.key=key;this.parentId=parentId}ResponseAggConfig.prototype=Object.create(parentAgg);ResponseAggConfig.prototype.constructor=ResponseAggConfig;(0,_lodash.assign)(ResponseAggConfig.prototype,props);return ResponseAggConfig};exports.create=create},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.migrateIncludeExcludeFormat=exports.isStringType=exports.isType=void 0;var _lodash=__webpack_require__(41);var isType=function isType(type){return function(agg){var field=agg.params.field;return field&&field.type===type}};exports.isType=isType;var isStringType=isType("string");exports.isStringType=isStringType;var migrateIncludeExcludeFormat={serialize:function serialize(value,agg){if(this.shouldShow&&!this.shouldShow(agg))return;if(!value||(0,_lodash.isString)(value))return value;else return value.pattern},write:function write(aggConfig,output){var value=aggConfig.getParam(this.name);if((0,_lodash.isObject)(value)){output.params[this.name]=value.pattern}else if(value&&isStringType(aggConfig)){output.params[this.name]=value}}};exports.migrateIncludeExcludeFormat=migrateIncludeExcludeFormat},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DataAdapter",{enumerable:true,get:function get(){return _data.DataAdapter}});Object.defineProperty(exports,"FormattedData",{enumerable:true,get:function get(){return _data.FormattedData}});Object.defineProperty(exports,"RequestAdapter",{enumerable:true,get:function get(){return _request.RequestAdapter}});Object.defineProperty(exports,"RequestStatus",{enumerable:true,get:function get(){return _request.RequestStatus}});var _data=__webpack_require__(634);var _request=__webpack_require__(637)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestStatus=void 0;var RequestStatus;exports.RequestStatus=RequestStatus;(function(RequestStatus){RequestStatus[RequestStatus["PENDING"]=0]="PENDING";RequestStatus[RequestStatus["OK"]=1]="OK";RequestStatus[RequestStatus["ERROR"]=2]="ERROR"})(RequestStatus||(exports.RequestStatus=RequestStatus={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _courier_inspector_stats=__webpack_require__(651);Object.keys(_courier_inspector_stats).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _courier_inspector_stats[key]}})}));var _serialize_agg_config=__webpack_require__(652);Object.keys(_serialize_agg_config).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _serialize_agg_config[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _trigger=__webpack_require__(685);Object.keys(_trigger).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _trigger[key]}})}));var _trigger_contract=__webpack_require__(230);Object.keys(_trigger_contract).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _trigger_contract[key]}})}));var _trigger_internal=__webpack_require__(229);Object.keys(_trigger_internal).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _trigger_internal[key]}})}));var _select_range_trigger=__webpack_require__(686);Object.keys(_select_range_trigger).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _select_range_trigger[key]}})}));var _value_click_trigger=__webpack_require__(687);Object.keys(_value_click_trigger).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _value_click_trigger[key]}})}));var _apply_filter_trigger=__webpack_require__(688);Object.keys(_apply_filter_trigger).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _apply_filter_trigger[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.confirmModalPromise=confirmModalPromise;var _react=_interopRequireDefault(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _public=__webpack_require__(25);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function confirmModalPromise(){var message=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var title=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var confirmBtnText=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var overlays=arguments.length>3?arguments[3]:undefined;return new Promise((function(resolve,reject){var cancelButtonText=_i18n.i18n.translate("savedObjects.confirmModal.cancelButtonLabel",{defaultMessage:"Cancel"});var modal=overlays.openModal((0,_public.toMountPoint)(_react.default.createElement(_eui.EuiConfirmModal,{onCancel:function onCancel(){modal.close();reject()},onConfirm:function onConfirm(){modal.close();resolve(true)},confirmButtonText:confirmBtnText,cancelButtonText:cancelButtonText,title:title},message)))}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PivotPreview",{enumerable:true,get:function get(){return _pivot_preview.PivotPreview}});var _pivot_preview=__webpack_require__(739)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatHumanReadableDate=formatHumanReadableDate;exports.formatHumanReadableDateTime=formatHumanReadableDateTime;exports.formatHumanReadableDateTimeSeconds=formatHumanReadableDateTimeSeconds;var _format=__webpack_require__(34);function formatHumanReadableDate(ts){return(0,_format.formatDate)(ts,"MMMM Do YYYY")}function formatHumanReadableDateTime(ts){return(0,_format.formatDate)(ts,"MMMM Do YYYY, HH:mm")}function formatHumanReadableDateTimeSeconds(ts){return(0,_format.formatDate)(ts,"MMMM Do YYYY, HH:mm:ss")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getNestedProperty=void 0;var getNestedProperty=function getNestedProperty(obj,accessor,defaultValue){var value=accessor.split(".").reduce((function(o,i){return o===null||o===void 0?void 0:o[i]}),obj);if(value===undefined)return defaultValue;return value};exports.getNestedProperty=getNestedProperty},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.linkToHome=linkToHome;var _constants=__webpack_require__(70);function linkToHome(){return"#".concat(_constants.CLIENT_BASE_PATH)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AuthorizationProvider=exports.AuthorizationContext=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _hooks=__webpack_require__(72);var _common=__webpack_require__(98);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var initialCapabalities={canGetTransform:false,canDeleteTransform:false,canPreviewTransform:false,canCreateTransform:false,canStartStopTransform:false};var initialValue={isLoading:true,apiError:null,privileges:{hasAllPrivileges:false,missingPrivileges:{}},capabilities:initialCapabalities};var AuthorizationContext=(0,_react.createContext)(_objectSpread({},initialValue));exports.AuthorizationContext=AuthorizationContext;var AuthorizationProvider=function AuthorizationProvider(_ref){var privilegesEndpoint=_ref.privilegesEndpoint,children=_ref.children;var _useRequest=(0,_hooks.useRequest)({path:privilegesEndpoint,method:"get"}),isLoading=_useRequest.isLoading,error=_useRequest.error,privilegesData=_useRequest.data;var value={isLoading:isLoading,privileges:isLoading?_objectSpread({},initialValue.privileges):privilegesData,capabilities:_objectSpread({},initialCapabalities),apiError:error?error:null};var hasPrivilege=(0,_common.hasPrivilegeFactory)(value.privileges);value.capabilities.canGetTransform=hasPrivilege(["cluster","cluster:monitor/transform/get"])&&hasPrivilege(["cluster","cluster:monitor/transform/stats/get"]);value.capabilities.canCreateTransform=hasPrivilege(["cluster","cluster:admin/transform/put"]);value.capabilities.canDeleteTransform=hasPrivilege(["cluster","cluster:admin/transform/delete"]);value.capabilities.canPreviewTransform=hasPrivilege(["cluster","cluster:admin/transform/preview"]);value.capabilities.canStartStopTransform=hasPrivilege(["cluster","cluster:admin/transform/start"])&&hasPrivilege(["cluster","cluster:admin/transform/start_task"])&&hasPrivilege(["cluster","cluster:admin/transform/stop"]);return _react.default.createElement(AuthorizationContext.Provider,{value:_objectSpread({},value)},children)};exports.AuthorizationProvider=AuthorizationProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={KQLSyntaxError:true,nodeTypes:true};Object.defineProperty(exports,"KQLSyntaxError",{enumerable:true,get:function get(){return _kuery_syntax_error.KQLSyntaxError}});Object.defineProperty(exports,"nodeTypes",{enumerable:true,get:function get(){return _node_types.nodeTypes}});var _kuery_syntax_error=__webpack_require__(132);var _node_types=__webpack_require__(65);var _ast=__webpack_require__(57);Object.keys(_ast).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _ast[key]}})}));var _types=__webpack_require__(308);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}))},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}Object.defineProperty(exports,"__esModule",{value:true});exports.KQLSyntaxError=void 0;var _lodash=__webpack_require__(41);var _i18n=__webpack_require__(0);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var endOfInputText=_i18n.i18n.translate("data.common.kql.errors.endOfInputText",{defaultMessage:"end of input"});var grammarRuleTranslations={fieldName:_i18n.i18n.translate("data.common.kql.errors.fieldNameText",{defaultMessage:"field name"}),value:_i18n.i18n.translate("data.common.kql.errors.valueText",{defaultMessage:"value"}),literal:_i18n.i18n.translate("data.common.kql.errors.literalText",{defaultMessage:"literal"}),whitespace:_i18n.i18n.translate("data.common.kql.errors.whitespaceText",{defaultMessage:"whitespace"})};var KQLSyntaxError=function(_Error){_inherits(KQLSyntaxError,_Error);function KQLSyntaxError(error,expression){var _this;_classCallCheck(this,KQLSyntaxError);var message=error.message;if(error.expected){var translatedExpectations=error.expected.map((function(expected){return grammarRuleTranslations[expected.description]||expected.description}));var translatedExpectationText=translatedExpectations.join(", ");message=_i18n.i18n.translate("data.common.kql.errors.syntaxError",{defaultMessage:"Expected {expectedList} but {foundInput} found.",values:{expectedList:translatedExpectationText,foundInput:error.found?'"'.concat(error.found,'"'):endOfInputText}})}var fullMessage=[message,expression,(0,_lodash.repeat)("-",error.location.start.offset)+"^"].join("\n");_this=_possibleConstructorReturn(this,_getPrototypeOf(KQLSyntaxError).call(this,fullMessage));_defineProperty(_assertThisInitialized(_this),"shortMessage",void 0);_this.name="KQLSyntaxError";_this.shortMessage=message;return _this}return KQLSyntaxError}(_wrapNativeSuper(Error));exports.KQLSyntaxError=KQLSyntaxError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildExistsFilter=exports.getExistsFilterField=exports.isExistsFilter=void 0;var isExistsFilter=function isExistsFilter(filter){return filter&&filter.exists};exports.isExistsFilter=isExistsFilter;var getExistsFilterField=function getExistsFilterField(filter){return filter.exists&&filter.exists.field};exports.getExistsFilterField=getExistsFilterField;var buildExistsFilter=function buildExistsFilter(field,indexPattern){return{meta:{index:indexPattern.id},exists:{field:field.name}}};exports.buildExistsFilter=buildExistsFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getGeoBoundingBoxFilterField=exports.isGeoBoundingBoxFilter=void 0;var isGeoBoundingBoxFilter=function isGeoBoundingBoxFilter(filter){return filter&&filter.geo_bounding_box};exports.isGeoBoundingBoxFilter=isGeoBoundingBoxFilter;var getGeoBoundingBoxFilterField=function getGeoBoundingBoxFilterField(filter){return filter.geo_bounding_box&&Object.keys(filter.geo_bounding_box).find((function(key){return key!=="ignore_unmapped"}))};exports.getGeoBoundingBoxFilterField=getGeoBoundingBoxFilterField},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getGeoPolygonFilterField=exports.isGeoPolygonFilter=void 0;var isGeoPolygonFilter=function isGeoPolygonFilter(filter){return filter&&filter.geo_polygon};exports.isGeoPolygonFilter=isGeoPolygonFilter;var getGeoPolygonFilterField=function getGeoPolygonFilterField(filter){return filter.geo_polygon&&Object.keys(filter.geo_polygon).find((function(key){return key!=="ignore_unmapped"}))};exports.getGeoPolygonFilterField=getGeoPolygonFilterField},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getIndexPatternFromFilter=getIndexPatternFromFilter;function getIndexPatternFromFilter(filter,indexPatterns){return indexPatterns.find((function(indexPattern){return indexPattern.id===filter.meta.index}))}},function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.buildPhrasesFilter=exports.getPhrasesFilterField=exports.isPhrasesFilter=void 0;var _phrase_filter=__webpack_require__(100);var _index=__webpack_require__(54);var isPhrasesFilter=function isPhrasesFilter(filter){var _filter$meta;return(filter===null||filter===void 0?void 0:(_filter$meta=filter.meta)===null||_filter$meta===void 0?void 0:_filter$meta.type)===_index.FILTERS.PHRASES};exports.isPhrasesFilter=isPhrasesFilter;var getPhrasesFilterField=function getPhrasesFilterField(filter){return filter.meta.key};exports.getPhrasesFilterField=getPhrasesFilterField;var buildPhrasesFilter=function buildPhrasesFilter(field,params,indexPattern){var index=indexPattern.id;var type=_index.FILTERS.PHRASES;var key=field.name;var format=function format(f,value){return f&&f.format&&f.format.convert?f.format.convert(value):value};var value=params.map((function(v){return format(field,v)})).join(", ");var should;if(field.scripted){should=params.map((function(v){return{script:(0,_phrase_filter.getPhraseScript)(field,v)}}))}else{should=params.map((function(v){return{match_phrase:_defineProperty({},field.name,v)}}))}return{meta:{index:index,type:type,key:key,value:value,params:params},query:{bool:{should:should,minimum_should_match:1}}}};exports.buildPhrasesFilter=buildPhrasesFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRangeScript=exports.buildRangeFilter=exports.getRangeFilterField=exports.isScriptedRangeFilter=exports.isRangeFilter=void 0;var _lodash=__webpack_require__(41);var OPERANDS_IN_RANGE=2;var operators={gt:">",gte:">=",lte:"<=",lt:"<"};var comparators={gt:"boolean gt(Supplier s, def v) {return s.get() > v}",gte:"boolean gte(Supplier s, def v) {return s.get() >= v}",lte:"boolean lte(Supplier s, def v) {return s.get() <= v}",lt:"boolean lt(Supplier s, def v) {return s.get() < v}"};var dateComparators={gt:"boolean gt(Supplier s, def v) {return s.get().toInstant().isAfter(Instant.parse(v))}",gte:"boolean gte(Supplier s, def v) {return !s.get().toInstant().isBefore(Instant.parse(v))}",lte:"boolean lte(Supplier s, def v) {return !s.get().toInstant().isAfter(Instant.parse(v))}",lt:"boolean lt(Supplier s, def v) {return s.get().toInstant().isBefore(Instant.parse(v))}"};var hasRangeKeys=function hasRangeKeys(params){return Boolean((0,_lodash.keys)(params).find((function(key){return["gte","gt","lte","lt","from","to"].includes(key)})))};var isRangeFilter=function isRangeFilter(filter){return filter&&filter.range};exports.isRangeFilter=isRangeFilter;var isScriptedRangeFilter=function isScriptedRangeFilter(filter){var params=(0,_lodash.get)(filter,"script.script.params",{});return hasRangeKeys(params)};exports.isScriptedRangeFilter=isScriptedRangeFilter;var getRangeFilterField=function getRangeFilterField(filter){return filter.range&&Object.keys(filter.range)[0]};exports.getRangeFilterField=getRangeFilterField;var formatValue=function formatValue(field,params){return(0,_lodash.map)(params,(function(val,key){return(0,_lodash.get)(operators,key)+format(field,val)})).join(" ")};var format=function format(field,value){return field&&field.format&&field.format.convert?field.format.convert(value):value};var buildRangeFilter=function buildRangeFilter(field,params,indexPattern,formattedValue){var filter={meta:{index:indexPattern.id,params:{}}};if(formattedValue){filter.meta.formattedValue=formattedValue}params=(0,_lodash.mapValues)(params,(function(value){return field.type==="number"?parseFloat(value):value}));if("gte"in params&&"gt"in params)throw new Error("gte and gt are mutually exclusive");if("lte"in params&&"lt"in params)throw new Error("lte and lt are mutually exclusive");var totalInfinite=["gt","lt"].reduce((function(acc,op){var key=op in params?op:"".concat(op,"e");var isInfinite=Math.abs((0,_lodash.get)(params,key))===Infinity;if(isInfinite){acc++;delete params[key]}return acc}),0);if(totalInfinite===OPERANDS_IN_RANGE){filter.match_all={};filter.meta.field=field.name}else if(field.scripted){filter.script=getRangeScript(field,params);filter.script.script.params.value=formatValue(field,filter.script.script.params);filter.meta.field=field.name}else{filter.range={};filter.range[field.name]=params}return filter};exports.buildRangeFilter=buildRangeFilter;var getRangeScript=function getRangeScript(field,params){var knownParams=(0,_lodash.pick)(params,(function(val,key){return key in operators}));var script=(0,_lodash.map)(knownParams,(function(val,key){return"("+field.script+")"+(0,_lodash.get)(operators,key)+key})).join(" && ");if(field.lang==="painless"){var comp=field.type==="date"?dateComparators:comparators;var currentComparators=(0,_lodash.reduce)(knownParams,(function(acc,val,key){return acc.concat((0,_lodash.get)(comp,key))}),[]).join(" ");var comparisons=(0,_lodash.map)(knownParams,(function(val,key){return"".concat(key,"(() -> { ").concat(field.script," }, params.").concat(key,")")})).join(" && ");script="".concat(currentComparators).concat(comparisons)}return{script:{source:script,params:knownParams,lang:field.lang}}};exports.getRangeScript=getRangeScript},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getMissingFilterField=exports.isMissingFilter=void 0;var isMissingFilter=function isMissingFilter(filter){return filter&&filter.missing};exports.isMissingFilter=isMissingFilter;var getMissingFilterField=function getMissingFilterField(filter){return filter.missing&&filter.missing.field};exports.getMissingFilterField=getMissingFilterField},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.toElasticsearchQuery=exports.doesKueryExpressionHaveLuceneSyntaxError=exports.fromKueryExpression=exports.fromLiteralExpression=void 0;var _index=__webpack_require__(65);var _kuery_syntax_error=__webpack_require__(132);var _kuery=__webpack_require__(297);var fromExpression=function fromExpression(expression){var parseOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var parse=arguments.length>2&&arguments[2]!==undefined?arguments[2]:_kuery.parse;if(typeof expression==="undefined"){throw new Error("expression must be a string, got undefined instead")}return parse(expression,_objectSpread({},parseOptions,{helpers:{nodeTypes:_index.nodeTypes}}))};var fromLiteralExpression=function fromLiteralExpression(expression){var parseOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return fromExpression(expression,_objectSpread({},parseOptions,{startRule:"Literal"}),_kuery.parse)};exports.fromLiteralExpression=fromLiteralExpression;var fromKueryExpression=function fromKueryExpression(expression){var parseOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};try{return fromExpression(expression,parseOptions,_kuery.parse)}catch(error){if(error.name==="SyntaxError"){throw new _kuery_syntax_error.KQLSyntaxError(error,expression)}else{throw error}}};exports.fromKueryExpression=fromKueryExpression;var doesKueryExpressionHaveLuceneSyntaxError=function doesKueryExpressionHaveLuceneSyntaxError(expression){try{fromExpression(expression,{errorOnLuceneSyntax:true},_kuery.parse);return false}catch(e){return e.message.startsWith("Lucene")}};exports.doesKueryExpressionHaveLuceneSyntaxError=doesKueryExpressionHaveLuceneSyntaxError;var toElasticsearchQuery=function toElasticsearchQuery(node,indexPattern,config,context){if(!node||!node.type||!_index.nodeTypes[node.type]){return toElasticsearchQuery(_index.nodeTypes.function.buildNode("and",[]),indexPattern)}var nodeType=_index.nodeTypes[node.type];return nodeType.toElasticsearchQuery(node,indexPattern,config,context)};exports.toElasticsearchQuery=toElasticsearchQuery},function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.getFullFieldNameNode=getFullFieldNameNode;var _get_fields=__webpack_require__(101);function getFullFieldNameNode(rootNameNode,indexPattern,nestedPath){var fullFieldNameNode=_objectSpread({},rootNameNode,{value:nestedPath?"".concat(nestedPath,".").concat(rootNameNode.value):rootNameNode.value});if(!indexPattern||fullFieldNameNode.type==="wildcard"&&!nestedPath){return fullFieldNameNode}var fields=(0,_get_fields.getFields)(fullFieldNameNode,indexPattern);var errors=fields.reduce((function(acc,field){var nestedPathFromField=field.subType&&field.subType.nested?field.subType.nested.path:undefined;if(nestedPath&&!nestedPathFromField){return[].concat(_toConsumableArray(acc),["".concat(field.name,' is not a nested field but is in nested group "').concat(nestedPath,'" in the KQL expression.')])}if(nestedPathFromField&&!nestedPath){return[].concat(_toConsumableArray(acc),["".concat(field.name," is a nested field, but is not in a nested group in the KQL expression.")])}if(nestedPathFromField!==nestedPath){return[].concat(_toConsumableArray(acc),["Nested field ".concat(field.name," is being queried with the incorrect nested path. The correct path is ").concat(field.subType.nested.path,".")])}return acc}),[]);if(errors.length>0){throw new Error(errors.join("\n"))}return fullFieldNameNode}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildQueryFromFilters=void 0;var _lodash=__webpack_require__(41);var _migrate_filter=__webpack_require__(309);var _filter_matches_index=__webpack_require__(310);var _filters=__webpack_require__(54);var _handle_nested_filter=__webpack_require__(311);var filterNegate=function filterNegate(reverse){return function(filter){if((0,_lodash.isUndefined)(filter.meta)||(0,_lodash.isUndefined)(filter.meta.negate)){return!reverse}return filter.meta&&filter.meta.negate===reverse}};var translateToQuery=function translateToQuery(filter){if(!filter)return;if(filter.query){return filter.query}return filter};var buildQueryFromFilters=function buildQueryFromFilters(){var filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var indexPattern=arguments.length>1?arguments[1]:undefined;var ignoreFilterIfFieldNotInIndex=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;filters=filters.filter((function(filter){return filter&&!(0,_filters.isFilterDisabled)(filter)}));var filtersToESQueries=function filtersToESQueries(negate){return filters.filter(filterNegate(negate)).filter((function(filter){return!ignoreFilterIfFieldNotInIndex||(0,_filter_matches_index.filterMatchesIndex)(filter,indexPattern)})).map((function(filter){return(0,_migrate_filter.migrateFilter)(filter,indexPattern)})).map((function(filter){return(0,_handle_nested_filter.handleNestedFilter)(filter,indexPattern)})).map(translateToQuery).map(_filters.cleanFilter)};return{must:[],filter:filtersToESQueries(false),should:[],must_not:filtersToESQueries(true)}};exports.buildQueryFromFilters=buildQueryFromFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.decorateQuery=decorateQuery;var _lodash=__webpack_require__(41);var _utils=__webpack_require__(103);var _es_query_dsl=__webpack_require__(313);function decorateQuery(query,queryStringOptions,dateFormatTZ){if((0,_es_query_dsl.isEsQueryString)(query)){(0,_lodash.extend)(query.query_string,queryStringOptions);if(dateFormatTZ){(0,_lodash.defaults)(query.query_string,{time_zone:(0,_utils.getTimeZoneFromSettings)(dateFormatTZ)})}}return query}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.luceneStringToDsl=luceneStringToDsl;var _lodash=__webpack_require__(41);function luceneStringToDsl(query){if((0,_lodash.isString)(query)){if(query.trim()===""){return{match_all:{}}}return{query_string:{query:query}}}return query}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"textContentTypeSetup",{enumerable:true,get:function get(){return _text_content_type.setup}});Object.defineProperty(exports,"TEXT_CONTEXT_TYPE",{enumerable:true,get:function get(){return _text_content_type.TEXT_CONTEXT_TYPE}});Object.defineProperty(exports,"htmlContentTypeSetup",{enumerable:true,get:function get(){return _html_content_type.setup}});Object.defineProperty(exports,"HTML_CONTEXT_TYPE",{enumerable:true,get:function get(){return _html_content_type.HTML_CONTEXT_TYPE}});var _text_content_type=__webpack_require__(317);var _html_content_type=__webpack_require__(324)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.highlightTags=void 0;var highlightTags={pre:"@kibana-highlighted-field@",post:"@/kibana-highlighted-field@"};exports.highlightTags=highlightTags},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.baseFormatters=void 0;var _converters=__webpack_require__(148);var baseFormatters=[_converters.BoolFormat,_converters.BytesFormat,_converters.ColorFormat,_converters.DateNanosFormat,_converters.DurationFormat,_converters.IpFormat,_converters.NumberFormat,_converters.PercentFormat,_converters.RelativeDateFormat,_converters.SourceFormat,_converters.StaticLookupFormat,_converters.StringFormat,_converters.TruncateFormat,_converters.UrlFormat];exports.baseFormatters=baseFormatters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"UrlFormat",{enumerable:true,get:function get(){return _url.UrlFormat}});Object.defineProperty(exports,"BytesFormat",{enumerable:true,get:function get(){return _bytes.BytesFormat}});Object.defineProperty(exports,"DateNanosFormat",{enumerable:true,get:function get(){return _date_nanos.DateNanosFormat}});Object.defineProperty(exports,"RelativeDateFormat",{enumerable:true,get:function get(){return _relative_date.RelativeDateFormat}});Object.defineProperty(exports,"DurationFormat",{enumerable:true,get:function get(){return _duration.DurationFormat}});Object.defineProperty(exports,"IpFormat",{enumerable:true,get:function get(){return _ip.IpFormat}});Object.defineProperty(exports,"NumberFormat",{enumerable:true,get:function get(){return _number.NumberFormat}});Object.defineProperty(exports,"PercentFormat",{enumerable:true,get:function get(){return _percent.PercentFormat}});Object.defineProperty(exports,"StringFormat",{enumerable:true,get:function get(){return _string.StringFormat}});Object.defineProperty(exports,"SourceFormat",{enumerable:true,get:function get(){return _source.SourceFormat}});Object.defineProperty(exports,"ColorFormat",{enumerable:true,get:function get(){return _color.ColorFormat}});Object.defineProperty(exports,"TruncateFormat",{enumerable:true,get:function get(){return _truncate.TruncateFormat}});Object.defineProperty(exports,"BoolFormat",{enumerable:true,get:function get(){return _boolean.BoolFormat}});Object.defineProperty(exports,"StaticLookupFormat",{enumerable:true,get:function get(){return _static_lookup.StaticLookupFormat}});var _url=__webpack_require__(325);var _bytes=__webpack_require__(326);var _date_nanos=__webpack_require__(329);var _relative_date=__webpack_require__(330);var _duration=__webpack_require__(331);var _ip=__webpack_require__(332);var _number=__webpack_require__(333);var _percent=__webpack_require__(334);var _string=__webpack_require__(335);var _source=__webpack_require__(342);var _color=__webpack_require__(343);var _truncate=__webpack_require__(344);var _boolean=__webpack_require__(345);var _static_lookup=__webpack_require__(346)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_CONVERTER_COLOR=void 0;var DEFAULT_CONVERTER_COLOR={range:"".concat(Number.NEGATIVE_INFINITY,":").concat(Number.POSITIVE_INFINITY),regex:"<insert regex>",text:"#000000",background:"#ffffff"};exports.DEFAULT_CONVERTER_COLOR=DEFAULT_CONVERTER_COLOR},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"KbnFieldType",{enumerable:true,get:function get(){return _kbn_field_type.KbnFieldType}});Object.defineProperty(exports,"castEsToKbnFieldTypeName",{enumerable:true,get:function get(){return _kbn_field_types.castEsToKbnFieldTypeName}});Object.defineProperty(exports,"getKbnFieldType",{enumerable:true,get:function get(){return _kbn_field_types.getKbnFieldType}});Object.defineProperty(exports,"getKbnTypeNames",{enumerable:true,get:function get(){return _kbn_field_types.getKbnTypeNames}});Object.defineProperty(exports,"getFilterableKbnTypeNames",{enumerable:true,get:function get(){return _kbn_field_types.getFilterableKbnTypeNames}});var _kbn_field_type=__webpack_require__(151);var _kbn_field_types=__webpack_require__(351)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(exports,"__esModule",{value:true});exports.KbnFieldType=void 0;var _types=__webpack_require__(50);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var KbnFieldType=function KbnFieldType(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,KbnFieldType);_defineProperty(this,"name",void 0);_defineProperty(this,"sortable",void 0);_defineProperty(this,"filterable",void 0);_defineProperty(this,"esTypes",void 0);this.name=options.name||_types.KBN_FIELD_TYPES.UNKNOWN;this.sortable=options.sortable||false;this.filterable=options.filterable||false;this.esTypes=Object.freeze((options.esTypes||[]).slice())};exports.KbnFieldType=KbnFieldType},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dedupFilters=void 0;var _lodash=__webpack_require__(41);var _compare_filters=__webpack_require__(154);var dedupFilters=function dedupFilters(existingFilters,filters){var comparatorOptions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!Array.isArray(filters)){filters=[filters]}return(0,_lodash.filter)(filters,(function(f){return!(0,_lodash.find)(existingFilters,(function(existingFilter){return(0,_compare_filters.compareFilters)(existingFilter,f,comparatorOptions)}))}))};exports.dedupFilters=dedupFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.compareFilters=exports.COMPARE_ALL_OPTIONS=void 0;var _lodash=__webpack_require__(41);var COMPARE_ALL_OPTIONS={disabled:true,negate:true,state:true,alias:true};exports.COMPARE_ALL_OPTIONS=COMPARE_ALL_OPTIONS;var mapFilter=function mapFilter(filter,comparators,excludedAttributes){var _filter$meta;var cleaned=(0,_lodash.omit)(filter,excludedAttributes);if(comparators.negate)cleaned.negate=filter.meta&&Boolean(filter.meta.negate);if(comparators.disabled)cleaned.disabled=filter.meta&&Boolean(filter.meta.disabled);if(comparators.alias)cleaned.alias=(_filter$meta=filter.meta)===null||_filter$meta===void 0?void 0:_filter$meta.alias;return cleaned};var mapFilterArray=function mapFilterArray(filters,comparators,excludedAttributes){return(0,_lodash.map)(filters,(function(filter){return mapFilter(filter,comparators,excludedAttributes)}))};var compareFilters=function compareFilters(first,second){var comparatorOptions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!first||!second)return false;var comparators={};var excludedAttributes=["$$hashKey","meta"];comparators=(0,_lodash.defaults)(comparatorOptions||{},{state:false,negate:false,disabled:false,alias:false});if(!comparators.state)excludedAttributes.push("$state");if(Array.isArray(first)&&Array.isArray(second)){return(0,_lodash.isEqual)(mapFilterArray(first,comparators,excludedAttributes),mapFilterArray(second,comparators,excludedAttributes))}else if(!Array.isArray(first)&&!Array.isArray(second)){return(0,_lodash.isEqual)(mapFilter(first,comparators,excludedAttributes),mapFilter(second,comparators,excludedAttributes))}else{return false}};exports.compareFilters=compareFilters},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IEsSearchRequest",{enumerable:true,get:function get(){return _types.IEsSearchRequest}});Object.defineProperty(exports,"IEsSearchResponse",{enumerable:true,get:function get(){return _types.IEsSearchResponse}});Object.defineProperty(exports,"ES_SEARCH_STRATEGY",{enumerable:true,get:function get(){return _types.ES_SEARCH_STRATEGY}});var _types=__webpack_require__(356)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}Object.defineProperty(exports,"__esModule",{value:true});exports.InvalidEsCalendarIntervalError=void 0;var _i18n=__webpack_require__(0);var InvalidEsCalendarIntervalError=function(_Error){_inherits(InvalidEsCalendarIntervalError,_Error);function InvalidEsCalendarIntervalError(interval,value,unit,type){var _this;_classCallCheck(this,InvalidEsCalendarIntervalError);_this=_possibleConstructorReturn(this,_getPrototypeOf(InvalidEsCalendarIntervalError).call(this,_i18n.i18n.translate("data.parseEsInterval.invalidEsCalendarIntervalErrorMessage",{defaultMessage:"Invalid calendar interval: {interval}, value must be 1",values:{interval:interval}})));_this.interval=interval;_this.value=value;_this.unit=unit;_this.type=type;_this.name="InvalidEsCalendarIntervalError";_this.value=value;_this.unit=unit;_this.type=type;if(Error.captureStackTrace){Error.captureStackTrace(_assertThisInitialized(_this),InvalidEsCalendarIntervalError)}Object.setPrototypeOf(_assertThisInitialized(_this),InvalidEsCalendarIntervalError.prototype);return _this}return InvalidEsCalendarIntervalError}(_wrapNativeSuper(Error));exports.InvalidEsCalendarIntervalError=InvalidEsCalendarIntervalError},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}Object.defineProperty(exports,"__esModule",{value:true});exports.InvalidEsIntervalFormatError=void 0;var _i18n=__webpack_require__(0);var InvalidEsIntervalFormatError=function(_Error){_inherits(InvalidEsIntervalFormatError,_Error);function InvalidEsIntervalFormatError(interval){var _this;_classCallCheck(this,InvalidEsIntervalFormatError);_this=_possibleConstructorReturn(this,_getPrototypeOf(InvalidEsIntervalFormatError).call(this,_i18n.i18n.translate("data.parseEsInterval.invalidEsIntervalFormatErrorMessage",{defaultMessage:"Invalid interval format: {interval}",values:{interval:interval}})));_this.interval=interval;_this.name="InvalidEsIntervalFormatError";if(Error.captureStackTrace){Error.captureStackTrace(_assertThisInitialized(_this),InvalidEsIntervalFormatError)}Object.setPrototypeOf(_assertThisInitialized(_this),InvalidEsIntervalFormatError.prototype);return _this}return InvalidEsIntervalFormatError}(_wrapNativeSuper(Error));exports.InvalidEsIntervalFormatError=InvalidEsIntervalFormatError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isValidEsInterval=isValidEsInterval;var _parse_es_interval=__webpack_require__(83);function isValidEsInterval(interval){try{(0,_parse_es_interval.parseEsInterval)(interval);return true}catch(_unused){return false}}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DocViewerError=DocViewerError;var _react=_interopRequireDefault(__webpack_require__(22));var _eui=__webpack_require__(23);var _public=__webpack_require__(161);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function DocViewerError(_ref){var error=_ref.error;var errMsg=(0,_public.formatMsg)(error);var errStack=_typeof(error)==="object"?(0,_public.formatStack)(error):"";return _react.default.createElement(_eui.EuiCallOut,{title:errMsg,color:"danger",iconType:"cross","data-test-subj":"docViewerError"},errStack&&_react.default.createElement(_eui.EuiCodeBlock,null,errStack))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={plugin:true,kbnBaseUrl:true,initAngularBootstrap:true,PaginateDirectiveProvider:true,PaginateControlsDirectiveProvider:true};Object.defineProperty(exports,"kbnBaseUrl",{enumerable:true,get:function get(){return _kbn_base_url.kbnBaseUrl}});Object.defineProperty(exports,"initAngularBootstrap",{enumerable:true,get:function get(){return _angular_bootstrap.initAngularBootstrap}});Object.defineProperty(exports,"PaginateDirectiveProvider",{enumerable:true,get:function get(){return _paginate.PaginateDirectiveProvider}});Object.defineProperty(exports,"PaginateControlsDirectiveProvider",{enumerable:true,get:function get(){return _paginate.PaginateControlsDirectiveProvider}});exports.plugin=void 0;var _plugin=__webpack_require__(375);Object.keys(_plugin).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _plugin[key]}})}));var _kbn_base_url=__webpack_require__(377);var _angular_bootstrap=__webpack_require__(378);var _paginate=__webpack_require__(384);var _angular=__webpack_require__(386);Object.keys(_angular).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _angular[key]}})}));var _notify=__webpack_require__(420);Object.keys(_notify).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _notify[key]}})}));var _utils=__webpack_require__(163);Object.keys(_utils).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _utils[key]}})}));var plugin=function plugin(initializerContext){return new _plugin.KibanaLegacyPlugin(initializerContext)};exports.plugin=plugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.get=get;function get(obj,path){if(typeof path==="string"){if(path.includes(".")){throw new Error("Using dots in `get` with a string is not allowed, use array instead")}return obj[path]}var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=path[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var key=_step.value;obj=obj[key]}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return obj}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={KbnAccessibleClickProvider:true,PrivateProvider:true,IPrivate:true,registerListenEventListener:true};Object.defineProperty(exports,"KbnAccessibleClickProvider",{enumerable:true,get:function get(){return _kbn_accessible_click.KbnAccessibleClickProvider}});Object.defineProperty(exports,"PrivateProvider",{enumerable:true,get:function get(){return _private.PrivateProvider}});Object.defineProperty(exports,"IPrivate",{enumerable:true,get:function get(){return _private.IPrivate}});Object.defineProperty(exports,"registerListenEventListener",{enumerable:true,get:function get(){return _register_listen_event_listener.registerListenEventListener}});var _migrate_legacy_query=__webpack_require__(408);Object.keys(_migrate_legacy_query).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _migrate_legacy_query[key]}})}));var _system_api=__webpack_require__(409);Object.keys(_system_api).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _system_api[key]}})}));var _url_overflow_service=__webpack_require__(410);Object.keys(_url_overflow_service).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _url_overflow_service[key]}})}));var _kbn_accessible_click=__webpack_require__(411);var _private=__webpack_require__(412);var _register_listen_event_listener=__webpack_require__(413)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"formatESMsg",{enumerable:true,get:function get(){return _format_es_msg.formatESMsg}});Object.defineProperty(exports,"formatMsg",{enumerable:true,get:function get(){return _format_msg.formatMsg}});Object.defineProperty(exports,"formatStack",{enumerable:true,get:function get(){return _format_stack.formatStack}});Object.defineProperty(exports,"isAngularHttpError",{enumerable:true,get:function get(){return _format_angular_http_error.isAngularHttpError}});Object.defineProperty(exports,"formatAngularHttpError",{enumerable:true,get:function get(){return _format_angular_http_error.formatAngularHttpError}});Object.defineProperty(exports,"AngularHttpError",{enumerable:true,get:function get(){return _format_angular_http_error.AngularHttpError}});Object.defineProperty(exports,"addFatalError",{enumerable:true,get:function get(){return _add_fatal_error.addFatalError}});var _format_es_msg=__webpack_require__(165);var _format_msg=__webpack_require__(414);var _format_stack=__webpack_require__(415);var _format_angular_http_error=__webpack_require__(166);var _add_fatal_error=__webpack_require__(416)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatESMsg=void 0;var _lodash=_interopRequireDefault(__webpack_require__(41));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getRootCause=function getRootCause(err){return _lodash.default.get(err,"resp.error.root_cause")};var formatESMsg=function formatESMsg(err){var rootCause=getRootCause(err);if(!Array.isArray(rootCause)){return}return rootCause.map((function(cause){return cause.reason})).join("\n")};exports.formatESMsg=formatESMsg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isAngularHttpError=isAngularHttpError;exports.formatAngularHttpError=formatAngularHttpError;var _i18n=__webpack_require__(0);function isAngularHttpError(error){return error&&typeof error.status==="number"&&typeof error.statusText==="string"&&error.data&&typeof error.data.message==="string"}function formatAngularHttpError(error){if(error.status===-1){return _i18n.i18n.translate("kibana_legacy.notify.fatalError.unavailableServerErrorMessage",{defaultMessage:"An HTTP request has failed to connect. "+"Please check if the Kibana server is running and that your browser has a working connection, "+"or contact your system administrator."})}return _i18n.i18n.translate("kibana_legacy.notify.fatalError.errorStatusMessage",{defaultMessage:"Error {errStatus} {errStatusText}: {errMessage}",values:{errStatus:error.status,errStatusText:error.statusText,errMessage:error.data.message}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocViewTable=DocViewTable;var _react=_interopRequireWildcard(__webpack_require__(22));var _lodash=__webpack_require__(41);var _table_row=__webpack_require__(425);var _table_helper=__webpack_require__(436);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var COLLAPSE_LINE_LENGTH=350;function DocViewTable(_ref){var hit=_ref.hit,indexPattern=_ref.indexPattern,filter=_ref.filter,columns=_ref.columns,onAddColumn=_ref.onAddColumn,onRemoveColumn=_ref.onRemoveColumn;var mapping=indexPattern.fields.getByName;var flattened=indexPattern.flattenHit(hit);var formatted=indexPattern.formatHit(hit,"html");var _useState=(0,_react.useState)({}),_useState2=_slicedToArray(_useState,2),fieldRowOpen=_useState2[0],setFieldRowOpen=_useState2[1];function toggleValueCollapse(field){fieldRowOpen[field]=fieldRowOpen[field]!==true;setFieldRowOpen(_objectSpread({},fieldRowOpen))}return _react.default.createElement("table",{className:"table table-condensed kbnDocViewerTable"},_react.default.createElement("tbody",null,Object.keys(flattened).sort().map((function(field){var _indexPattern$fields$;var valueRaw=flattened[field];var value=(0,_table_helper.trimAngularSpan)(String(formatted[field]));var isCollapsible=value.length>COLLAPSE_LINE_LENGTH;var isCollapsed=isCollapsible&&!fieldRowOpen[field];var toggleColumn=onRemoveColumn&&onAddColumn&&Array.isArray(columns)?function(){if(columns.includes(field)){onRemoveColumn(field)}else{onAddColumn(field)}}:undefined;var isArrayOfObjects=Array.isArray(flattened[field])&&(0,_table_helper.arrayContainsObjects)(flattened[field]);var displayUnderscoreWarning=!mapping(field)&&field.indexOf("_")===0;var displayNoMappingWarning=!mapping(field)&&!displayUnderscoreWarning&&!isArrayOfObjects;var isNestedField=!indexPattern.fields.find((function(patternField){return patternField.name===field}))&&!!indexPattern.fields.find((function(patternField){var _ref2,_patternField$subType,_patternField$subType2;var nestedRootRegex=new RegExp((0,_lodash.escapeRegExp)(field)+"(\\.|$)");return nestedRootRegex.test((_ref2=(_patternField$subType=patternField.subType)===null||_patternField$subType===void 0?void 0:(_patternField$subType2=_patternField$subType.nested)===null||_patternField$subType2===void 0?void 0:_patternField$subType2.path)!==null&&_ref2!==void 0?_ref2:"")}));var fieldType=isNestedField?"nested":(_indexPattern$fields$=indexPattern.fields.find((function(patternField){return patternField.name===field})))===null||_indexPattern$fields$===void 0?void 0:_indexPattern$fields$.type;return _react.default.createElement(_table_row.DocViewTableRow,{key:field,field:field,fieldMapping:mapping(field),fieldType:fieldType,displayUnderscoreWarning:displayUnderscoreWarning,displayNoMappingWarning:displayNoMappingWarning,isCollapsed:isCollapsed,isCollapsible:isCollapsible,isColumnActive:Array.isArray(columns)&&columns.includes(field),onFilter:filter,onToggleCollapse:function onToggleCollapse(){return toggleValueCollapse(field)},onToggleColumn:toggleColumn,value:value,valueRaw:valueRaw})}))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldName=FieldName;var _react=_interopRequireDefault(__webpack_require__(22));var _classnames=_interopRequireDefault(__webpack_require__(58));var _eui=__webpack_require__(23);var _public=__webpack_require__(25);var _helpers=__webpack_require__(433);var _field_type_name=__webpack_require__(435);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function FieldName(_ref){var field=_ref.field,fieldName=_ref.fieldName,fieldType=_ref.fieldType,useShortDots=_ref.useShortDots,fieldIconProps=_ref.fieldIconProps;var type=field?String(field.type):String(fieldType);var typeName=(0,_field_type_name.getFieldTypeName)(type);var name=field?String(field.name):String(fieldName);var displayName=useShortDots?(0,_helpers.shortenDottedString)(name):name;var noResults=field?!field.rowCount&&!field.scripted:false;var className=(0,_classnames.default)("dscFieldName",{"dscFieldName--noResults":noResults});return _react.default.createElement(_eui.EuiFlexGroup,{className:className,alignItems:"center",gutterSize:"s",responsive:false},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_public.FieldIcon,_extends({type:type,label:typeName,scripted:field?field.scripted:false},fieldIconProps))),_react.default.createElement(_eui.EuiFlexItem,{className:"eui-textTruncate"},_react.default.createElement(_eui.EuiToolTip,{position:"top",content:displayName,delay:"long",anchorClassName:"eui-textTruncate"},_react.default.createElement("span",null,displayName))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JsonCodeBlock=JsonCodeBlock;var _react=_interopRequireDefault(__webpack_require__(22));var _eui=__webpack_require__(23);var _i18n=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function JsonCodeBlock(_ref){var hit=_ref.hit;var label=_i18n.i18n.translate("discover.docViews.json.codeEditorAriaLabel",{defaultMessage:"Read only JSON view of an elasticsearch document"});return _react.default.createElement(_eui.EuiCodeBlock,{"aria-label":label,language:"json",isCopyable:true,paddingSize:"s"},JSON.stringify(hit,null,2))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setDocViewsRegistry=exports.getDocViewsRegistry=void 0;var _public=__webpack_require__(26);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var _createGetterSetter=(0,_public.createGetterSetter)("DocViewsRegistry"),_createGetterSetter2=_slicedToArray(_createGetterSetter,2),getDocViewsRegistry=_createGetterSetter2[0],setDocViewsRegistry=_createGetterSetter2[1];exports.setDocViewsRegistry=setDocViewsRegistry;exports.getDocViewsRegistry=getDocViewsRegistry},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FilterEditor=void 0;var _eui=__webpack_require__(23);var _i18n=__webpack_require__(0);var _react=__webpack_require__(24);var _lodash=__webpack_require__(41);var _react2=_interopRequireWildcard(__webpack_require__(22));var _generic_combo_box=__webpack_require__(109);var _filter_editor_utils=__webpack_require__(172);var _phrase_value_input=__webpack_require__(471);var _phrases_values_input=__webpack_require__(472);var _range_value_input=__webpack_require__(473);var _common=__webpack_require__(42);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterEditorUI=function(_Component){_inherits(FilterEditorUI,_Component);function FilterEditorUI(props){var _this;_classCallCheck(this,FilterEditorUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(FilterEditorUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"toggleCustomEditor",(function(){var isCustomEditorOpen=!_this.state.isCustomEditorOpen;_this.setState({isCustomEditorOpen:isCustomEditorOpen})}));_defineProperty(_assertThisInitialized(_this),"onIndexPatternChange",(function(_ref){var _ref2=_slicedToArray(_ref,1),selectedIndexPattern=_ref2[0];var selectedField=undefined;var selectedOperator=undefined;var params=undefined;_this.setState({selectedIndexPattern:selectedIndexPattern,selectedField:selectedField,selectedOperator:selectedOperator,params:params})}));_defineProperty(_assertThisInitialized(_this),"onFieldChange",(function(_ref3){var _ref4=_slicedToArray(_ref3,1),selectedField=_ref4[0];var selectedOperator=undefined;var params=undefined;_this.setState({selectedField:selectedField,selectedOperator:selectedOperator,params:params})}));_defineProperty(_assertThisInitialized(_this),"onOperatorChange",(function(_ref5){var _ref6=_slicedToArray(_ref5,1),selectedOperator=_ref6[0];var params=(0,_lodash.get)(_this.state.selectedOperator,"type")===(0,_lodash.get)(selectedOperator,"type")?_this.state.params:undefined;_this.setState({selectedOperator:selectedOperator,params:params})}));_defineProperty(_assertThisInitialized(_this),"onCustomLabelSwitchChange",(function(event){var useCustomLabel=event.target.checked;var customLabel=event.target.checked?"":null;_this.setState({useCustomLabel:useCustomLabel,customLabel:customLabel})}));_defineProperty(_assertThisInitialized(_this),"onCustomLabelChange",(function(event){var customLabel=event.target.value;_this.setState({customLabel:customLabel})}));_defineProperty(_assertThisInitialized(_this),"onParamsChange",(function(params){_this.setState({params:params})}));_defineProperty(_assertThisInitialized(_this),"onQueryDslChange",(function(queryDsl){_this.setState({queryDsl:queryDsl})}));_defineProperty(_assertThisInitialized(_this),"onSubmit",(function(){var _this$state=_this.state,indexPattern=_this$state.selectedIndexPattern,field=_this$state.selectedField,operator=_this$state.selectedOperator,params=_this$state.params,useCustomLabel=_this$state.useCustomLabel,customLabel=_this$state.customLabel,isCustomEditorOpen=_this$state.isCustomEditorOpen,queryDsl=_this$state.queryDsl;var $state=_this.props.filter.$state;if(!$state||!$state.store){return}var alias=useCustomLabel?customLabel:null;if(isCustomEditorOpen){var _this$props$filter$me=_this.props.filter.meta,index=_this$props$filter$me.index,disabled=_this$props$filter$me.disabled,negate=_this$props$filter$me.negate;var newIndex=index||_this.props.indexPatterns[0].id;var body=JSON.parse(queryDsl);var _filter=(0,_common.buildCustomFilter)(newIndex,body,disabled,negate,alias,$state.store);_this.props.onSubmit(_filter)}else if(indexPattern&&field&&operator){var _filter2=(0,_common.buildFilter)(indexPattern,field,operator.type,operator.negate,_this.props.filter.meta.disabled,params!==null&&params!==void 0?params:"",alias,$state.store);_this.props.onSubmit(_filter2)}}));_this.state={selectedIndexPattern:_this.getIndexPatternFromFilter(),selectedField:_this.getFieldFromFilter(),selectedOperator:_this.getSelectedOperator(),params:(0,_common.getFilterParams)(props.filter),useCustomLabel:props.filter.meta.alias!==null,customLabel:props.filter.meta.alias,queryDsl:JSON.stringify((0,_common.cleanFilter)(props.filter),null,2),isCustomEditorOpen:_this.isUnknownFilterType()};return _this}_createClass(FilterEditorUI,[{key:"render",value:function render(){return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiPopoverTitle,null,_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"baseline",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.editFilterPopupTitle",defaultMessage:"Edit filter"})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false,className:"filterEditor__hiddenItem"}),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:this.toggleCustomEditor},this.state.isCustomEditorOpen?_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.editFilterValuesButtonLabel",defaultMessage:"Edit filter values"}):_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.editQueryDslButtonLabel",defaultMessage:"Edit as Query DSL"}))))),_react2.default.createElement("div",{className:"globalFilterItem__editorForm"},_react2.default.createElement(_eui.EuiForm,null,this.renderIndexPatternInput(),this.state.isCustomEditorOpen?this.renderCustomEditor():this.renderRegularEditor(),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiSwitch,{id:"filterEditorCustomLabelSwitch",label:this.props.intl.formatMessage({id:"data.filter.filterEditor.createCustomLabelSwitchLabel",defaultMessage:"Create custom label?"}),checked:this.state.useCustomLabel,onChange:this.onCustomLabelSwitchChange}),this.state.useCustomLabel&&_react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.createCustomLabelInputLabel",defaultMessage:"Custom label"})},_react2.default.createElement(_eui.EuiFieldText,{value:"".concat(this.state.customLabel),onChange:this.onCustomLabelChange}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,{direction:"rowReverse",alignItems:"center",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{fill:true,onClick:this.onSubmit,isDisabled:!this.isFilterValid(),"data-test-subj":"saveFilter"},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.saveButtonLabel",defaultMessage:"Save"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{flush:"right",onClick:this.props.onCancel,"data-test-subj":"cancelSaveFilter"},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.cancelButtonLabel",defaultMessage:"Cancel"}))),_react2.default.createElement(_eui.EuiFlexItem,null)))))}},{key:"renderIndexPatternInput",value:function renderIndexPatternInput(){var _this2=this;if(this.props.indexPatterns.length<=1&&this.props.indexPatterns.find((function(indexPattern){return indexPattern===_this2.state.selectedIndexPattern}))){return""}var selectedIndexPattern=this.state.selectedIndexPattern;return _react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.indexPatternSelectLabel",defaultMessage:"Index Pattern"})},_react2.default.createElement(IndexPatternComboBox,{placeholder:this.props.intl.formatMessage({id:"data.filter.filterBar.indexPatternSelectPlaceholder",defaultMessage:"Select an index pattern"}),options:this.props.indexPatterns,selectedOptions:selectedIndexPattern?[selectedIndexPattern]:[],getLabel:function getLabel(indexPattern){return indexPattern.title},onChange:this.onIndexPatternChange,singleSelection:{asPlainText:true},isClearable:false,"data-test-subj":"filterIndexPatternsSelect"}))))}},{key:"renderRegularEditor",value:function renderRegularEditor(){return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:2},this.renderFieldInput()),_react2.default.createElement(_eui.EuiFlexItem,{grow:false,style:{flexBasis:160}},this.renderOperatorInput())),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement("div",{"data-test-subj":"filterParams"},this.renderParamsEditor()))}},{key:"renderFieldInput",value:function renderFieldInput(){var _this$state2=this.state,selectedIndexPattern=_this$state2.selectedIndexPattern,selectedField=_this$state2.selectedField;var fields=selectedIndexPattern?(0,_filter_editor_utils.getFilterableFields)(selectedIndexPattern):[];return _react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.fieldSelectLabel",defaultMessage:"Field"})},_react2.default.createElement(FieldComboBox,{id:"fieldInput",isDisabled:!selectedIndexPattern,placeholder:this.props.intl.formatMessage({id:"data.filter.filterEditor.fieldSelectPlaceholder",defaultMessage:"Select a field first"}),options:fields,selectedOptions:selectedField?[selectedField]:[],getLabel:function getLabel(field){return field.name},onChange:this.onFieldChange,singleSelection:{asPlainText:true},isClearable:false,className:"globalFilterEditor__fieldInput","data-test-subj":"filterFieldSuggestionList"}))}},{key:"renderOperatorInput",value:function renderOperatorInput(){var _this$state3=this.state,selectedField=_this$state3.selectedField,selectedOperator=_this$state3.selectedOperator;var operators=selectedField?(0,_filter_editor_utils.getOperatorOptions)(selectedField):[];return _react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectLabel",defaultMessage:"Operator"})},_react2.default.createElement(OperatorComboBox,{isDisabled:!selectedField,placeholder:selectedField?this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectPlaceholderSelect",defaultMessage:"Select"}):this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectPlaceholderWaiting",defaultMessage:"Waiting"}),options:operators,selectedOptions:selectedOperator?[selectedOperator]:[],getLabel:function getLabel(_ref7){var message=_ref7.message;return message},onChange:this.onOperatorChange,singleSelection:{asPlainText:true},isClearable:false,"data-test-subj":"filterOperatorList"}))}},{key:"renderCustomEditor",value:function renderCustomEditor(){return _react2.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("data.filter.filterEditor.queryDslLabel",{defaultMessage:"Elasticsearch Query DSL"})},_react2.default.createElement(_eui.EuiCodeEditor,{value:this.state.queryDsl,onChange:this.onQueryDslChange,mode:"json",width:"100%",height:"250px"}))}},{key:"renderParamsEditor",value:function renderParamsEditor(){var indexPattern=this.state.selectedIndexPattern;if(!indexPattern||!this.state.selectedOperator){return""}switch(this.state.selectedOperator.type){case"exists":return"";case"phrase":return _react2.default.createElement(_phrase_value_input.PhraseValueInput,{indexPattern:indexPattern,field:this.state.selectedField,value:this.state.params,onChange:this.onParamsChange,"data-test-subj":"phraseValueInput"});case"phrases":return _react2.default.createElement(_phrases_values_input.PhrasesValuesInput,{indexPattern:indexPattern,field:this.state.selectedField,values:this.state.params,onChange:this.onParamsChange});case"range":return _react2.default.createElement(_range_value_input.RangeValueInput,{field:this.state.selectedField,value:this.state.params,onChange:this.onParamsChange})}}},{key:"isUnknownFilterType",value:function isUnknownFilterType(){var type=this.props.filter.meta.type;return!!type&&!["phrase","phrases","range","exists"].includes(type)}},{key:"getIndexPatternFromFilter",value:function getIndexPatternFromFilter(){return(0,_common.getIndexPatternFromFilter)(this.props.filter,this.props.indexPatterns)}},{key:"getFieldFromFilter",value:function getFieldFromFilter(){var indexPattern=this.getIndexPatternFromFilter();return indexPattern&&(0,_filter_editor_utils.getFieldFromFilter)(this.props.filter,indexPattern)}},{key:"getSelectedOperator",value:function getSelectedOperator(){return(0,_filter_editor_utils.getOperatorFromFilter)(this.props.filter)}},{key:"isFilterValid",value:function isFilterValid(){var _this$state4=this.state,isCustomEditorOpen=_this$state4.isCustomEditorOpen,queryDsl=_this$state4.queryDsl,indexPattern=_this$state4.selectedIndexPattern,field=_this$state4.selectedField,operator=_this$state4.selectedOperator,params=_this$state4.params;if(isCustomEditorOpen){try{return Boolean(JSON.parse(queryDsl))}catch(e){return false}}return(0,_filter_editor_utils.isFilterValid)(indexPattern,field,operator,params)}}]);return FilterEditorUI}(_react2.Component);function IndexPatternComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}function FieldComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}function OperatorComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}var FilterEditor=(0,_react.injectI18n)(FilterEditorUI);exports.FilterEditor=FilterEditor},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getFieldFromFilter=getFieldFromFilter;exports.getOperatorFromFilter=getOperatorFromFilter;exports.getFilterableFields=getFilterableFields;exports.getOperatorOptions=getOperatorOptions;exports.validateParams=validateParams;exports.isFilterValid=isFilterValid;var _datemath=_interopRequireDefault(__webpack_require__(61));var _public=__webpack_require__(26);var _filter_operators=__webpack_require__(173);var _common=__webpack_require__(42);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function getFieldFromFilter(filter,indexPattern){return indexPattern.fields.find((function(field){return field.name===filter.meta.key}))}function getOperatorFromFilter(filter){return _filter_operators.FILTER_OPERATORS.find((function(operator){return filter.meta.type===operator.type&&filter.meta.negate===operator.negate}))}function getFilterableFields(indexPattern){return indexPattern.fields.filter(_common.isFilterable)}function getOperatorOptions(field){return _filter_operators.FILTER_OPERATORS.filter((function(operator){return!operator.fieldTypes||operator.fieldTypes.includes(field.type)}))}function validateParams(params,type){switch(type){case"date":var moment=typeof params==="string"?_datemath.default.parse(params):null;return Boolean(typeof params==="string"&&moment&&moment.isValid());case"ip":try{return Boolean(new _public.Ipv4Address(params))}catch(e){return false}default:return true}}function isFilterValid(indexPattern,field,operator,params){if(!indexPattern||!field||!operator){return false}switch(operator.type){case"phrase":return validateParams(params,field.type);case"phrases":if(!Array.isArray(params)||!params.length){return false}return params.every((function(phrase){return validateParams(phrase,field.type)}));case"range":if(_typeof(params)!=="object"){return false}return validateParams(params.from,field.type)||validateParams(params.to,field.type);case"exists":return true;default:throw new Error("Unknown operator type: ".concat(operator.type))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FILTER_OPERATORS=exports.doesNotExistOperator=exports.existsOperator=exports.isNotBetweenOperator=exports.isBetweenOperator=exports.isNotOneOfOperator=exports.isOneOfOperator=exports.isNotOperator=exports.isOperator=void 0;var _i18n=__webpack_require__(0);var _filters=__webpack_require__(54);var isOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isOperatorOptionLabel",{defaultMessage:"is"}),type:_filters.FILTERS.PHRASE,negate:false};exports.isOperator=isOperator;var isNotOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isNotOperatorOptionLabel",{defaultMessage:"is not"}),type:_filters.FILTERS.PHRASE,negate:true};exports.isNotOperator=isNotOperator;var isOneOfOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isOneOfOperatorOptionLabel",{defaultMessage:"is one of"}),type:_filters.FILTERS.PHRASES,negate:false,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]};exports.isOneOfOperator=isOneOfOperator;var isNotOneOfOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isNotOneOfOperatorOptionLabel",{defaultMessage:"is not one of"}),type:_filters.FILTERS.PHRASES,negate:true,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]};exports.isNotOneOfOperator=isNotOneOfOperator;var isBetweenOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isBetweenOperatorOptionLabel",{defaultMessage:"is between"}),type:_filters.FILTERS.RANGE,negate:false,fieldTypes:["number","date","ip"]};exports.isBetweenOperator=isBetweenOperator;var isNotBetweenOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isNotBetweenOperatorOptionLabel",{defaultMessage:"is not between"}),type:_filters.FILTERS.RANGE,negate:true,fieldTypes:["number","date","ip"]};exports.isNotBetweenOperator=isNotBetweenOperator;var existsOperator={message:_i18n.i18n.translate("data.filter.filterEditor.existsOperatorOptionLabel",{defaultMessage:"exists"}),type:_filters.FILTERS.EXISTS,negate:false};exports.existsOperator=existsOperator;var doesNotExistOperator={message:_i18n.i18n.translate("data.filter.filterEditor.doesNotExistOperatorOptionLabel",{defaultMessage:"does not exist"}),type:_filters.FILTERS.EXISTS,negate:true};exports.doesNotExistOperator=doesNotExistOperator;var FILTER_OPERATORS=[isOperator,isNotOperator,isOneOfOperator,isNotOneOfOperator,isBetweenOperator,isNotBetweenOperator,existsOperator,doesNotExistOperator];exports.FILTER_OPERATORS=FILTER_OPERATORS},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.PhraseSuggestor=exports.PhraseSuggestorUI=void 0;var _react=__webpack_require__(22);var _lodash=__webpack_require__(41);var _public=__webpack_require__(25);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PhraseSuggestorUI=function(_Component){_inherits(PhraseSuggestorUI,_Component);function PhraseSuggestorUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,PhraseSuggestorUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PhraseSuggestorUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"services",_this.props.kibana.services);_defineProperty(_assertThisInitialized(_this),"state",{suggestions:[],isLoading:false});_defineProperty(_assertThisInitialized(_this),"onSearchChange",(function(value){_this.updateSuggestions("".concat(value))}));_defineProperty(_assertThisInitialized(_this),"updateSuggestions",(0,_lodash.debounce)(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var query,_ref2,indexPattern,field,suggestions,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:query=_args.length>0&&_args[0]!==undefined?_args[0]:"";_ref2=_this.props,indexPattern=_ref2.indexPattern,field=_ref2.field;if(!(!field||!_this.isSuggestingValues())){_context.next=4;break}return _context.abrupt("return");case 4:_this.setState({isLoading:true});_context.next=7;return _this.services.data.autocomplete.getValueSuggestions({indexPattern:indexPattern,field:field,query:query});case 7:suggestions=_context.sent;_this.setState({suggestions:suggestions,isLoading:false});case 9:case"end":return _context.stop()}}}),_callee)})));return function(){return _ref.apply(this,arguments)}}(),500));return _this}_createClass(PhraseSuggestorUI,[{key:"componentDidMount",value:function componentDidMount(){this.updateSuggestions()}},{key:"isSuggestingValues",value:function isSuggestingValues(){var shouldSuggestValues=this.services.uiSettings.get("filterEditor:suggestValues");var field=this.props.field;return shouldSuggestValues&&field&&field.aggregatable&&field.type==="string"}}]);return PhraseSuggestorUI}(_react.Component);exports.PhraseSuggestorUI=PhraseSuggestorUI;var PhraseSuggestor=(0,_public.withKibana)(PhraseSuggestorUI);exports.PhraseSuggestor=PhraseSuggestor},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ValueInputType=void 0;var _eui=__webpack_require__(23);var _react=__webpack_require__(24);var _lodash=__webpack_require__(41);var _react2=_interopRequireWildcard(__webpack_require__(22));var _filter_editor_utils=__webpack_require__(172);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ValueInputTypeUI=function(_Component){_inherits(ValueInputTypeUI,_Component);function ValueInputTypeUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,ValueInputTypeUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ValueInputTypeUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"onBoolChange",(function(event){var boolValue=event.target.value==="true";_this.props.onChange(boolValue)}));_defineProperty(_assertThisInitialized(_this),"onChange",(function(event){var params=event.target.value;_this.props.onChange(params)}));return _this}_createClass(ValueInputTypeUI,[{key:"render",value:function render(){var value=this.props.value;var inputElement;switch(this.props.type){case"string":inputElement=_react2.default.createElement(_eui.EuiFieldText,{placeholder:this.props.placeholder,value:value,onChange:this.onChange,controlOnly:this.props.controlOnly,className:this.props.className});break;case"number":inputElement=_react2.default.createElement(_eui.EuiFieldNumber,{placeholder:this.props.placeholder,value:typeof value==="string"?parseFloat(value):value,onChange:this.onChange,controlOnly:this.props.controlOnly,className:this.props.className});break;case"date":inputElement=_react2.default.createElement(_eui.EuiFieldText,{placeholder:this.props.placeholder,value:value,onChange:this.onChange,isInvalid:!(0,_lodash.isEmpty)(value)&&!(0,_filter_editor_utils.validateParams)(value,this.props.type),controlOnly:this.props.controlOnly,className:this.props.className});break;case"ip":inputElement=_react2.default.createElement(_eui.EuiFieldText,{placeholder:this.props.placeholder,value:value,onChange:this.onChange,isInvalid:!(0,_lodash.isEmpty)(value)&&!(0,_filter_editor_utils.validateParams)(value,this.props.type),controlOnly:this.props.controlOnly,className:this.props.className});break;case"boolean":inputElement=_react2.default.createElement(_eui.EuiSelect,{options:[{value:undefined,text:this.props.placeholder},{value:"true",text:this.props.intl.formatMessage({id:"data.filter.filterEditor.trueOptionLabel",defaultMessage:"true"})},{value:"false",text:this.props.intl.formatMessage({id:"data.filter.filterEditor.falseOptionLabel",defaultMessage:"false"})}],value:value,onChange:this.onBoolChange,className:this.props.className});break;default:break}return inputElement}}]);return ValueInputTypeUI}(_react2.Component);var ValueInputType=(0,_react.injectI18n)(ValueInputTypeUI);exports.ValueInputType=ValueInputType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterLabel=FilterLabel;var _react=_interopRequireWildcard(__webpack_require__(22));var _eui=__webpack_require__(23);var _i18n=__webpack_require__(0);var _filter_operators=__webpack_require__(173);var _common=__webpack_require__(42);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function FilterLabel(_ref){var filter=_ref.filter,valueLabel=_ref.valueLabel;var prefixText=filter.meta.negate?" ".concat(_i18n.i18n.translate("data.filter.filterBar.negatedFilterPrefix",{defaultMessage:"NOT "})):"";var prefix=filter.meta.negate&&!filter.meta.disabled?_react.default.createElement(_eui.EuiTextColor,{color:"danger"},prefixText):prefixText;var getValue=function getValue(text){return _react.default.createElement("span",{className:"globalFilterLabel__value"},text)};if(filter.meta.alias!==null){return _react.default.createElement(_react.Fragment,null,prefix,filter.meta.alias)}switch(filter.meta.type){case _common.FILTERS.EXISTS:return _react.default.createElement(_react.Fragment,null,prefix,filter.meta.key,": ",getValue("".concat(_filter_operators.existsOperator.message)));case _common.FILTERS.GEO_BOUNDING_BOX:return _react.default.createElement(_react.Fragment,null,prefix,filter.meta.key,": ",getValue(valueLabel));case _common.FILTERS.GEO_POLYGON:return _react.default.createElement(_react.Fragment,null,prefix,filter.meta.key,": ",getValue(valueLabel));case _common.FILTERS.PHRASES:return _react.default.createElement(_react.Fragment,null,prefix,filter.meta.key,": ",getValue("".concat(_filter_operators.isOneOfOperator.message," ").concat(valueLabel)));case _common.FILTERS.QUERY_STRING:return _react.default.createElement(_react.Fragment,null,prefix,getValue("".concat(valueLabel)));case _common.FILTERS.PHRASE:case _common.FILTERS.RANGE:return _react.default.createElement(_react.Fragment,null,prefix,filter.meta.key,": ",getValue(valueLabel));default:return _react.default.createElement(_react.Fragment,null,prefix,getValue("".concat(JSON.stringify(filter.query)||filter.meta.value)))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FilterManager",{enumerable:true,get:function get(){return _filter_manager.FilterManager}});Object.defineProperty(exports,"mapAndFlattenFilters",{enumerable:true,get:function get(){return _map_and_flatten_filters.mapAndFlattenFilters}});Object.defineProperty(exports,"onlyDisabledFiltersChanged",{enumerable:true,get:function get(){return _only_disabled.onlyDisabledFiltersChanged}});Object.defineProperty(exports,"generateFilters",{enumerable:true,get:function get(){return _generate_filters.generateFilters}});var _filter_manager=__webpack_require__(485);var _map_and_flatten_filters=__webpack_require__(178);var _only_disabled=__webpack_require__(179);var _generate_filters=__webpack_require__(500)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapAndFlattenFilters=void 0;var _lodash=__webpack_require__(41);var _map_filter=__webpack_require__(487);var mapAndFlattenFilters=function mapAndFlattenFilters(filters){return(0,_lodash.compact)((0,_lodash.flatten)(filters)).map((function(item){return(0,_map_filter.mapFilter)(item)}))};exports.mapAndFlattenFilters=mapAndFlattenFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.onlyDisabledFiltersChanged=void 0;var _lodash=__webpack_require__(41);var _common=__webpack_require__(42);var isEnabled=function isEnabled(f){return f&&f.meta&&!f.meta.disabled};var onlyDisabledFiltersChanged=function onlyDisabledFiltersChanged(newFilters,oldFilters){var newEnabledFilters=(0,_lodash.filter)(newFilters||[],isEnabled);var oldEnabledFilters=(0,_lodash.filter)(oldFilters||[],isEnabled);return(0,_common.compareFilters)(oldEnabledFilters,newEnabledFilters,_common.COMPARE_ALL_OPTIONS)};exports.onlyDisabledFiltersChanged=onlyDisabledFiltersChanged},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calculateBounds=calculateBounds;exports.getTime=getTime;var _datemath=_interopRequireDefault(__webpack_require__(61));var _common=__webpack_require__(42);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function calculateBounds(timeRange){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return{min:_datemath.default.parse(timeRange.from,{forceNow:options.forceNow}),max:_datemath.default.parse(timeRange.to,{roundUp:true,forceNow:options.forceNow})}}function getTime(indexPattern,timeRange,forceNow){if(!indexPattern){return}var timefield=indexPattern.fields.find((function(field){return field.name===indexPattern.timeFieldName}));if(!timefield){return}var bounds=calculateBounds(timeRange,{forceNow:forceNow});if(!bounds){return}return(0,_common.buildRangeFilter)(timefield,_objectSpread({},bounds.min&&{gte:bounds.min.toISOString()},{},bounds.max&&{lte:bounds.max.toISOString()},{format:"strict_date_optional_time"}),indexPattern)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSavedQueryService=void 0;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var createSavedQueryService=function createSavedQueryService(savedObjectsClient){var saveQuery=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(attributes){var _ref2,_ref2$overwrite,overwrite,query,queryObject,rawQueryResponse,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref2=_args.length>1&&_args[1]!==undefined?_args[1]:{},_ref2$overwrite=_ref2.overwrite,overwrite=_ref2$overwrite===void 0?false:_ref2$overwrite;if(attributes.title.length){_context.next=3;break}throw new Error("Cannot create saved query without a title");case 3:query={query:typeof attributes.query.query==="string"?attributes.query.query:JSON.stringify(attributes.query.query),language:attributes.query.language};queryObject={title:attributes.title.trim(),description:attributes.description,query:query};if(attributes.filters){queryObject.filters=attributes.filters}if(attributes.timefilter){queryObject.timefilter=attributes.timefilter}if(overwrite){_context.next=13;break}_context.next=10;return savedObjectsClient.create("query",queryObject,{id:attributes.title});case 10:rawQueryResponse=_context.sent;_context.next=16;break;case 13:_context.next=15;return savedObjectsClient.create("query",queryObject,{id:attributes.title,overwrite:true});case 15:rawQueryResponse=_context.sent;case 16:if(!rawQueryResponse.error){_context.next=18;break}throw new Error(rawQueryResponse.error.message);case 18:return _context.abrupt("return",parseSavedQueryObject(rawQueryResponse));case 19:case"end":return _context.stop()}}}),_callee)})));return function saveQuery(_x){return _ref.apply(this,arguments)}}();var getAllSavedQueries=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var count,response;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getSavedQueryCount();case 2:count=_context2.sent;_context2.next=5;return savedObjectsClient.find({type:"query",perPage:count,page:1});case 5:response=_context2.sent;return _context2.abrupt("return",response.savedObjects.map((function(savedObject){return parseSavedQueryObject(savedObject)})));case 7:case"end":return _context2.stop()}}}),_callee2)})));return function getAllSavedQueries(){return _ref3.apply(this,arguments)}}();var findSavedQueries=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var searchText,perPage,activePage,response,_args3=arguments;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:searchText=_args3.length>0&&_args3[0]!==undefined?_args3[0]:"";perPage=_args3.length>1&&_args3[1]!==undefined?_args3[1]:50;activePage=_args3.length>2&&_args3[2]!==undefined?_args3[2]:1;_context3.next=5;return savedObjectsClient.find({type:"query",search:searchText,searchFields:["title^5","description"],sortField:"_score",perPage:perPage,page:activePage});case 5:response=_context3.sent;return _context3.abrupt("return",{total:response.total,queries:response.savedObjects.map((function(savedObject){return parseSavedQueryObject(savedObject)}))});case 7:case"end":return _context3.stop()}}}),_callee3)})));return function findSavedQueries(){return _ref4.apply(this,arguments)}}();var getSavedQuery=function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(id){var savedObject;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return savedObjectsClient.get("query",id);case 2:savedObject=_context4.sent;if(!savedObject.error){_context4.next=5;break}throw new Error(savedObject.error.message);case 5:return _context4.abrupt("return",parseSavedQueryObject(savedObject));case 6:case"end":return _context4.stop()}}}),_callee4)})));return function getSavedQuery(_x2){return _ref5.apply(this,arguments)}}();var deleteSavedQuery=function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(id){return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return savedObjectsClient.delete("query",id);case 2:return _context5.abrupt("return",_context5.sent);case 3:case"end":return _context5.stop()}}}),_callee5)})));return function deleteSavedQuery(_x3){return _ref6.apply(this,arguments)}}();var parseSavedQueryObject=function parseSavedQueryObject(savedQuery){var queryString;try{queryString=JSON.parse(savedQuery.attributes.query.query)}catch(error){queryString=savedQuery.attributes.query.query}var savedQueryItems={title:savedQuery.attributes.title||"",description:savedQuery.attributes.description||"",query:{query:queryString,language:savedQuery.attributes.query.language}};if(savedQuery.attributes.filters){savedQueryItems.filters=savedQuery.attributes.filters}if(savedQuery.attributes.timefilter){savedQueryItems.timefilter=savedQuery.attributes.timefilter}return{id:savedQuery.id,attributes:savedQueryItems}};var getSavedQueryCount=function(){var _ref7=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(){var response;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return savedObjectsClient.find({type:"query",perPage:0,page:1});case 2:response=_context6.sent;return _context6.abrupt("return",response.total);case 4:case"end":return _context6.stop()}}}),_callee6)})));return function getSavedQueryCount(){return _ref7.apply(this,arguments)}}();return{saveQuery:saveQuery,getAllSavedQueries:getAllSavedQueries,findSavedQueries:findSavedQueries,getSavedQuery:getSavedQuery,deleteSavedQuery:deleteSavedQuery,getSavedQueryCount:getSavedQueryCount}};exports.createSavedQueryService=createSavedQueryService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.connectToQueryState=void 0;var _operators=__webpack_require__(31);var _lodash=_interopRequireDefault(__webpack_require__(41));var _common=__webpack_require__(42);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var connectToQueryState=function connectToQueryState(_ref,stateContainer,syncConfig){var timefilter=_ref.timefilter.timefilter,filterManager=_ref.filterManager,state$=_ref.state$;var syncKeys=[];if(syncConfig.time){syncKeys.push("time")}if(syncConfig.refreshInterval){syncKeys.push("refreshInterval")}if(syncConfig.filters){switch(syncConfig.filters){case true:syncKeys.push("filters");break;case _common.FilterStateStore.APP_STATE:syncKeys.push("appFilters");break;case _common.FilterStateStore.GLOBAL_STATE:syncKeys.push("globalFilters");break}}var initialState=_objectSpread({},stateContainer.get());var initialDirty=false;if(syncConfig.time&&!_lodash.default.isEqual(initialState.time,timefilter.getTime())){initialState.time=timefilter.getTime();initialDirty=true}if(syncConfig.refreshInterval&&!_lodash.default.isEqual(initialState.refreshInterval,timefilter.getRefreshInterval())){initialState.refreshInterval=timefilter.getRefreshInterval();initialDirty=true}if(syncConfig.filters){if(syncConfig.filters===true){if(!initialState.filters||!(0,_common.compareFilters)(initialState.filters,filterManager.getFilters(),_common.COMPARE_ALL_OPTIONS)){initialState.filters=filterManager.getFilters();initialDirty=true}}else if(syncConfig.filters===_common.FilterStateStore.GLOBAL_STATE){if(!initialState.filters||!(0,_common.compareFilters)(initialState.filters,filterManager.getGlobalFilters(),_common.COMPARE_ALL_OPTIONS)){initialState.filters=filterManager.getGlobalFilters();initialDirty=true}}else if(syncConfig.filters===_common.FilterStateStore.APP_STATE){if(!initialState.filters||!(0,_common.compareFilters)(initialState.filters,filterManager.getAppFilters(),_common.COMPARE_ALL_OPTIONS)){initialState.filters=filterManager.getAppFilters();initialDirty=true}}}if(initialDirty){stateContainer.set(_objectSpread({},stateContainer.get(),{},initialState))}var updateInProgress=false;var subs=[state$.pipe((0,_operators.filter)((function(_ref2){var changes=_ref2.changes,state=_ref2.state;if(updateInProgress)return false;return syncKeys.some((function(syncKey){return changes[syncKey]}))})),(0,_operators.map)((function(_ref3){var changes=_ref3.changes;var newState={};if(syncConfig.time&&changes.time){newState.time=timefilter.getTime()}if(syncConfig.refreshInterval&&changes.refreshInterval){newState.refreshInterval=timefilter.getRefreshInterval()}if(syncConfig.filters){if(syncConfig.filters===true&&changes.filters){newState.filters=filterManager.getFilters()}else if(syncConfig.filters===_common.FilterStateStore.GLOBAL_STATE&&changes.globalFilters){newState.filters=filterManager.getGlobalFilters()}else if(syncConfig.filters===_common.FilterStateStore.APP_STATE&&changes.appFilters){newState.filters=filterManager.getAppFilters()}}return newState}))).subscribe((function(newState){stateContainer.set(_objectSpread({},stateContainer.get(),{},newState))})),stateContainer.state$.subscribe((function(state){updateInProgress=true;if(syncConfig.time){var time=state.time||timefilter.getTimeDefaults();if(!_lodash.default.isEqual(time,timefilter.getTime())){timefilter.setTime(_lodash.default.cloneDeep(time))}}if(syncConfig.refreshInterval){var refreshInterval=state.refreshInterval||timefilter.getRefreshIntervalDefaults();if(!_lodash.default.isEqual(refreshInterval,timefilter.getRefreshInterval())){timefilter.setRefreshInterval(_lodash.default.cloneDeep(refreshInterval))}}if(syncConfig.filters){var filters=state.filters||[];if(syncConfig.filters===true){if(!(0,_common.compareFilters)(filters,filterManager.getFilters(),_common.COMPARE_ALL_OPTIONS)){filterManager.setFilters(_lodash.default.cloneDeep(filters))}}else if(syncConfig.filters===_common.FilterStateStore.APP_STATE){if(!(0,_common.compareFilters)(filters,filterManager.getAppFilters(),_common.COMPARE_ALL_OPTIONS)){filterManager.setAppFilters(_lodash.default.cloneDeep(filters))}}else if(syncConfig.filters===_common.FilterStateStore.GLOBAL_STATE){if(!(0,_common.compareFilters)(filters,filterManager.getGlobalFilters(),_common.COMPARE_ALL_OPTIONS)){filterManager.setGlobalFilters(_lodash.default.cloneDeep(filters))}}}updateInProgress=false}))];return function(){subs.forEach((function(s){return s.unsubscribe()}))}};exports.connectToQueryState=connectToQueryState},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FieldFormatsService",{enumerable:true,get:function get(){return _field_formats_service.FieldFormatsService}});Object.defineProperty(exports,"FieldFormatsSetup",{enumerable:true,get:function get(){return _field_formats_service.FieldFormatsSetup}});Object.defineProperty(exports,"FieldFormatsStart",{enumerable:true,get:function get(){return _field_formats_service.FieldFormatsStart}});Object.defineProperty(exports,"DateFormat",{enumerable:true,get:function get(){return _converters.DateFormat}});Object.defineProperty(exports,"baseFormattersPublic",{enumerable:true,get:function get(){return _constants.baseFormattersPublic}});var _field_formats_service=__webpack_require__(519);var _converters=__webpack_require__(521);var _constants=__webpack_require__(184)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.baseFormattersPublic=void 0;var _common=__webpack_require__(42);var _date=__webpack_require__(185);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var baseFormattersPublic=[_date.DateFormat].concat(_toConsumableArray(_common.baseFormatters));exports.baseFormattersPublic=baseFormattersPublic},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DateFormat=void 0;var _i18n=__webpack_require__(0);var _lodash=__webpack_require__(41);var _moment=_interopRequireDefault(__webpack_require__(27));var _common=__webpack_require__(42);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DateFormat=function(_FieldFormat){_inherits(DateFormat,_FieldFormat);function DateFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,DateFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DateFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"memoizedConverter",_lodash.noop);_defineProperty(_assertThisInitialized(_this),"memoizedPattern","");_defineProperty(_assertThisInitialized(_this),"timeZone","");_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){var pattern=_this.param("pattern");var timezone=_this.param("timezone");var timezoneChanged=_this.timeZone!==timezone;var datePatternChanged=_this.memoizedPattern!==pattern;if(timezoneChanged||datePatternChanged){_this.timeZone=timezone;_this.memoizedPattern=pattern;_this.memoizedConverter=(0,_lodash.memoize)((function converter(value){if(value===null||value===undefined){return"-"}var date=(0,_moment.default)(value);if(date.isValid()){return date.format(pattern)}else{return value}}))}return _this.memoizedConverter(val)}));return _this}_createClass(DateFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{pattern:this.getConfig("dateFormat"),timezone:this.getConfig("dateFormat:tz")}}}]);return DateFormat}(_common.FieldFormat);exports.DateFormat=DateFormat;_defineProperty(DateFormat,"id",_common.FIELD_FORMAT_IDS.DATE);_defineProperty(DateFormat,"title",_i18n.i18n.translate("data.fieldFormats.date.title",{defaultMessage:"Date"}));_defineProperty(DateFormat,"fieldType",_common.KBN_FIELD_TYPES.DATE)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ILLEGAL_CHARACTERS=exports.ILLEGAL_CHARACTERS_VISIBLE=exports.CONTAINS_SPACES_KEY=exports.ILLEGAL_CHARACTERS_KEY=void 0;var ILLEGAL_CHARACTERS_KEY="ILLEGAL_CHARACTERS";exports.ILLEGAL_CHARACTERS_KEY=ILLEGAL_CHARACTERS_KEY;var CONTAINS_SPACES_KEY="CONTAINS_SPACES";exports.CONTAINS_SPACES_KEY=CONTAINS_SPACES_KEY;var ILLEGAL_CHARACTERS_VISIBLE=["\\","/","?",'"',"<",">","|"];exports.ILLEGAL_CHARACTERS_VISIBLE=ILLEGAL_CHARACTERS_VISIBLE;var ILLEGAL_CHARACTERS=ILLEGAL_CHARACTERS_VISIBLE.concat(" ");exports.ILLEGAL_CHARACTERS=ILLEGAL_CHARACTERS},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.findByTitle=findByTitle;exports.getRoutes=getRoutes;var _lodash=__webpack_require__(41);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function findByTitle(_x,_x2){return _findByTitle.apply(this,arguments)}function _findByTitle(){_findByTitle=_asyncToGenerator(regeneratorRuntime.mark((function _callee(client,title){var _ref,savedObjects;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(title){_context.next=2;break}return _context.abrupt("return",Promise.resolve());case 2:_context.next=4;return client.find({type:"index-pattern",perPage:10,search:'"'.concat(title,'"'),searchFields:["title"],fields:["title"]});case 4:_ref=_context.sent;savedObjects=_ref.savedObjects;return _context.abrupt("return",(0,_lodash.find)(savedObjects,(function(obj){return obj.get("title").toLowerCase()===title.toLowerCase()})));case 7:case"end":return _context.stop()}}}),_callee)})));return _findByTitle.apply(this,arguments)}function getRoutes(){return{edit:"/management/kibana/index_patterns/{{id}}",addField:"/management/kibana/index_patterns/{{id}}/create-field",indexedFields:"/management/kibana/index_patterns/{{id}}?_a=(tab:indexedFields)",scriptedFields:"/management/kibana/index_patterns/{{id}}?_a=(tab:scriptedFields)",sourceFilters:"/management/kibana/index_patterns/{{id}}?_a=(tab:sourceFilters)"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.flattenHitWrapper=flattenHitWrapper;exports.createFlattenHitWrapper=createFlattenHitWrapper;var _lodash=_interopRequireDefault(__webpack_require__(41));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function flattenHit(indexPattern,hit,deep){var flat={};var fields=indexPattern.fields.getByName;(function flatten(obj){var keyPrefix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";keyPrefix=keyPrefix?keyPrefix+".":"";_lodash.default.forOwn(obj,(function(val,key){key=keyPrefix+key;if(deep){var _field=fields(key);var isNestedField=_field&&_field.type==="nested";var isArrayOfObjects=Array.isArray(val)&&_lodash.default.isPlainObject(_lodash.default.first(val));if(isArrayOfObjects&&!isNestedField){_lodash.default.each(val,(function(v){return flatten(v,key)}));return}}else if(flat[key]!==void 0){return}var field=fields(key);var hasValidMapping=field&&field.type!=="conflict";var isValue=!_lodash.default.isPlainObject(val);if(hasValidMapping||isValue){if(!flat[key]){flat[key]=val}else if(Array.isArray(flat[key])){flat[key].push(val)}else{flat[key]=[flat[key],val]}return}flatten(val,key)}))})(hit._source);return flat}function decorateFlattenedWrapper(hit,metaFields){return function(flattened){_lodash.default.each(metaFields,(function(meta){if(meta==="_source")return;flattened[meta]=hit[meta]}));_lodash.default.forOwn(hit.fields,(function(val,key){if(key[0]==="_"&&!_lodash.default.contains(metaFields,key))return;flattened[key]=Array.isArray(val)&&val.length===1?val[0]:val}));return flattened}}function flattenHitWrapper(indexPattern){var metaFields=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var cache=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new WeakMap;return function cachedFlatten(hit){var deep=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var decorateFlattened=decorateFlattenedWrapper(hit,metaFields);var cached=cache.get(hit);var flattened=cached||flattenHit(indexPattern,hit,deep);if(!cached){cache.set(hit,_objectSpread({},flattened))}return decorateFlattened(flattened)}}function createFlattenHitWrapper(){var cache=new WeakMap;return _lodash.default.partial(flattenHitWrapper,_lodash.default,_lodash.default,cache)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatHitProvider=formatHitProvider;var _lodash=_interopRequireDefault(__webpack_require__(41));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var formattedCache=new WeakMap;var partialFormattedCache=new WeakMap;function formatHitProvider(indexPattern,defaultFormat){function convert(hit,val,fieldName){var type=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"html";var field=indexPattern.fields.getByName(fieldName);var format=field?field.format:defaultFormat;return format.convert(val,type,{field:field,hit:hit})}function formatHit(hit){var type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"html";if(type==="text"){var flattened=indexPattern.flattenHit(hit);var result={};for(var _i=0,_Object$entries=Object.entries(flattened);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];result[key]=convert(hit,value,key,type)}return result}var cached=formattedCache.get(hit);if(cached){return cached}var partials=partialFormattedCache.get(hit)||{};partialFormattedCache.set(hit,partials);var cache={};formattedCache.set(hit,cache);_lodash.default.forOwn(indexPattern.flattenHit(hit),(function(val,fieldName){if(!fieldName){return}var formatted=partials[fieldName]==null?convert(hit,val,fieldName):partials[fieldName];cache[fieldName]=partials[fieldName]=formatted}));return cache}formatHit.formatField=function(hit,fieldName){var partials=partialFormattedCache.get(hit);if(partials&&partials[fieldName]!=null){return partials[fieldName]}if(!partials){partials={};partialFormattedCache.set(hit,partials)}var val=fieldName==="_source"?hit._source:indexPattern.flattenHit(hit)[fieldName];return convert(hit,val,fieldName)};return formatHit}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPattern=void 0;var _lodash=_interopRequireWildcard(__webpack_require__(41));var _i18n=__webpack_require__(0);var _react=__webpack_require__(24);var _eui=__webpack_require__(23);var _react2=_interopRequireDefault(__webpack_require__(22));var _public=__webpack_require__(26);var _public2=__webpack_require__(25);var _common=__webpack_require__(42);var _utils=__webpack_require__(187);var _lib=__webpack_require__(87);var _fields=__webpack_require__(191);var _fields_fetcher=__webpack_require__(530);var _format_hit=__webpack_require__(189);var _flatten_hit=__webpack_require__(188);var _services=__webpack_require__(45);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MAX_ATTEMPTS_TO_RESOLVE_CONFLICTS=3;var type="index-pattern";var IndexPattern=function(){function IndexPattern(id,getConfig,savedObjectsClient,apiClient,patternCache){var _this=this;_classCallCheck(this,IndexPattern);_defineProperty(this,"id",void 0);_defineProperty(this,"title","");_defineProperty(this,"type",void 0);_defineProperty(this,"fieldFormatMap",void 0);_defineProperty(this,"typeMeta",void 0);_defineProperty(this,"fields",void 0);_defineProperty(this,"timeFieldName",void 0);_defineProperty(this,"intervalName",void 0);_defineProperty(this,"formatHit",void 0);_defineProperty(this,"formatField",void 0);_defineProperty(this,"flattenHit",void 0);_defineProperty(this,"metaFields",void 0);_defineProperty(this,"version",void 0);_defineProperty(this,"savedObjectsClient",void 0);_defineProperty(this,"patternCache",void 0);_defineProperty(this,"getConfig",void 0);_defineProperty(this,"sourceFilters",void 0);_defineProperty(this,"originalBody",{});_defineProperty(this,"fieldsFetcher",void 0);_defineProperty(this,"shortDotsEnable",false);_defineProperty(this,"mapping",(0,_public.expandShorthand)({title:_common.ES_FIELD_TYPES.TEXT,timeFieldName:_common.ES_FIELD_TYPES.KEYWORD,intervalName:_common.ES_FIELD_TYPES.KEYWORD,fields:"json",sourceFilters:"json",fieldFormatMap:{type:_common.ES_FIELD_TYPES.TEXT,_serialize:function _serialize(){var map=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var serialized=_lodash.default.transform(map,_this.serializeFieldFormatMap);return _lodash.default.isEmpty(serialized)?undefined:JSON.stringify(serialized)},_deserialize:function _deserialize(){var map=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"{}";return _lodash.default.mapValues(JSON.parse(map),(function(mapping){return _this.deserializeFieldFormatMap(mapping)}))}},type:_common.ES_FIELD_TYPES.KEYWORD,typeMeta:"json"}));this.id=id;this.savedObjectsClient=savedObjectsClient;this.patternCache=patternCache;this.getConfig=getConfig;this.shortDotsEnable=this.getConfig("shortDots:enable");this.metaFields=this.getConfig("metaFields");this.fields=new _fields.FieldList(this,[],this.shortDotsEnable);this.fieldsFetcher=(0,_fields_fetcher.createFieldsFetcher)(this,apiClient,this.getConfig("metaFields"));this.flattenHit=(0,_flatten_hit.flattenHitWrapper)(this,this.getConfig("metaFields"));this.formatHit=(0,_format_hit.formatHitProvider)(this,(0,_services.getFieldFormats)().getDefaultInstance(_common.KBN_FIELD_TYPES.STRING));this.formatField=this.formatHit.formatField}_createClass(IndexPattern,[{key:"serializeFieldFormatMap",value:function serializeFieldFormatMap(flat,format,field){if(format&&field){flat[field]=format}}},{key:"deserializeFieldFormatMap",value:function deserializeFieldFormatMap(mapping){var FieldFormat=(0,_services.getFieldFormats)().getType(mapping.id);return FieldFormat&&new FieldFormat(mapping.params,this.getConfig)}},{key:"initFields",value:function initFields(input){var newValue=input||this.fields;this.fields=new _fields.FieldList(this,newValue,this.shortDotsEnable)}},{key:"isFieldRefreshRequired",value:function isFieldRefreshRequired(){if(!this.fields){return true}return this.fields.every((function(field){var hasFieldCaps="aggregatable"in field&&"searchable"in field;var hasDocValuesFlag="readFromDocValues"in field;return!hasFieldCaps||!hasDocValuesFlag}))}},{key:"indexFields",value:function(){var _indexFields=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var forceFieldRefresh,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:forceFieldRefresh=_args.length>0&&_args[0]!==undefined?_args[0]:false;if(this.id){_context.next=3;break}return _context.abrupt("return");case 3:if(!(forceFieldRefresh||this.isFieldRefreshRequired())){_context.next=6;break}_context.next=6;return this.refreshFields();case 6:this.initFields();case 7:case"end":return _context.stop()}}}),_callee,this)})));function indexFields(){return _indexFields.apply(this,arguments)}return indexFields}()},{key:"updateFromElasticSearch",value:function(){var _updateFromElasticSearch=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(response){var forceFieldRefresh,warningTitle,warningText,editUrlTemplate,editUrl,_getNotifications,toasts,_args2=arguments;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:forceFieldRefresh=_args2.length>1&&_args2[1]!==undefined?_args2[1]:false;if(response.found){_context2.next=3;break}throw new _public.SavedObjectNotFound(type,this.id,"#/management/kibana/index_pattern");case 3:_lodash.default.forOwn(this.mapping,(function(fieldMapping,name){if(!fieldMapping._deserialize||!name){return}response._source[name]=fieldMapping._deserialize(response._source[name])}));_lodash.default.assign(this,response._source);if(!this.title&&this.id){this.title=this.id}if(this.isUnsupportedTimePattern()){warningTitle=_i18n.i18n.translate("data.indexPatterns.warningTitle",{defaultMessage:"Support for time interval index patterns removed"});warningText=_i18n.i18n.translate("data.indexPatterns.warningText",{defaultMessage:"Currently querying all indices matching {index}. {title} should be migrated to a wildcard-based index pattern.",values:{title:this.title,index:this.getIndex()}});editUrlTemplate=(0,_utils.getRoutes)().edit;editUrl="/app/kibana#"+editUrlTemplate.replace("{{id}}",this.id);_getNotifications=(0,_services.getNotifications)(),toasts=_getNotifications.toasts;toasts.addWarning({title:warningTitle,text:(0,_public2.toMountPoint)(_react2.default.createElement("div",null,_react2.default.createElement("p",null,warningText),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{size:"s",href:(0,_services.getHttp)().basePath.prepend(editUrl)},_react2.default.createElement(_react.FormattedMessage,{id:"data.indexPatterns.editIndexPattern",defaultMessage:"Edit index pattern"}))))))})}return _context2.abrupt("return",this.indexFields(forceFieldRefresh));case 8:case"end":return _context2.stop()}}}),_callee2,this)})));function updateFromElasticSearch(_x){return _updateFromElasticSearch.apply(this,arguments)}return updateFromElasticSearch}()},{key:"getComputedFields",value:function getComputedFields(){var scriptFields={};if(!this.fields){return{storedFields:["*"],scriptFields:scriptFields,docvalueFields:[]}}var docvalueFields=(0,_lodash.reject)(this.fields.getByType("date"),"scripted").map((function(dateField){return{field:dateField.name,format:dateField.esTypes&&dateField.esTypes.indexOf("date_nanos")!==-1?"strict_date_time":"date_time"}}));(0,_lodash.each)(this.getScriptedFields(),(function(field){scriptFields[field.name]={script:{source:field.script,lang:field.lang}}}));return{storedFields:["*"],scriptFields:scriptFields,docvalueFields:docvalueFields}}},{key:"init",value:function(){var _init=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var forceFieldRefresh,savedObject,response,_args3=arguments;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:forceFieldRefresh=_args3.length>0&&_args3[0]!==undefined?_args3[0]:false;if(this.id){_context3.next=3;break}return _context3.abrupt("return",this);case 3:_context3.next=5;return this.savedObjectsClient.get(type,this.id);case 5:savedObject=_context3.sent;this.version=savedObject._version;response={_id:savedObject.id,_type:savedObject.type,_source:_lodash.default.cloneDeep(savedObject.attributes),found:savedObject._version?true:false};this.originalBody=this.prepBody();_context3.next=11;return this.updateFromElasticSearch(response,forceFieldRefresh);case 11:this.originalBody=this.prepBody();return _context3.abrupt("return",this);case 13:case"end":return _context3.stop()}}}),_callee3,this)})));function init(){return _init.apply(this,arguments)}return init}()},{key:"migrate",value:function migrate(newTitle){var _this2=this;return this.savedObjectsClient.update(type,this.id,{title:newTitle,intervalName:null}).then((function(_ref){var _ref$attributes=_ref.attributes,title=_ref$attributes.title,intervalName=_ref$attributes.intervalName;_this2.title=title;_this2.intervalName=intervalName})).then((function(){return _this2}))}},{key:"getSourceFiltering",value:function getSourceFiltering(){return{excludes:this.sourceFilters&&this.sourceFilters.map((function(filter){return filter.value}))||[]}}},{key:"addScriptedField",value:function(){var _addScriptedField=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(name,script){var fieldType,lang,scriptedFields,names,_args4=arguments;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:fieldType=_args4.length>2&&_args4[2]!==undefined?_args4[2]:"string";lang=_args4.length>3?_args4[3]:undefined;scriptedFields=this.getScriptedFields();names=_lodash.default.pluck(scriptedFields,"name");if(!_lodash.default.contains(names,name)){_context4.next=6;break}throw new _public.DuplicateField(name);case 6:this.fields.add(new _fields.Field(this,{name:name,script:script,fieldType:fieldType,scripted:true,lang:lang,aggregatable:true,filterable:true,searchable:true},false));_context4.next=9;return this.save();case 9:case"end":return _context4.stop()}}}),_callee4,this)})));function addScriptedField(_x2,_x3){return _addScriptedField.apply(this,arguments)}return addScriptedField}()},{key:"removeScriptedField",value:function removeScriptedField(field){this.fields.remove(field);return this.save()}},{key:"popularizeField",value:function(){var _popularizeField=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(fieldName){var unit,field,count,_args5=arguments;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:unit=_args5.length>1&&_args5[1]!==undefined?_args5[1]:1;field=this.fields.getByName(fieldName);if(field){_context5.next=4;break}return _context5.abrupt("return");case 4:count=Math.max((field.count||0)+unit,0);if(!(field.count===count)){_context5.next=7;break}return _context5.abrupt("return");case 7:field.count=count;_context5.next=10;return this.save();case 10:case"end":return _context5.stop()}}}),_callee5,this)})));function popularizeField(_x4){return _popularizeField.apply(this,arguments)}return popularizeField}()},{key:"getNonScriptedFields",value:function getNonScriptedFields(){return _lodash.default.where(this.fields,{scripted:false})}},{key:"getScriptedFields",value:function getScriptedFields(){return _lodash.default.where(this.fields,{scripted:true})}},{key:"getIndex",value:function getIndex(){if(!this.isUnsupportedTimePattern()){return this.title}var regex=/\[[^\]]*]/g;var splits=this.title.split(regex);var matches=this.title.match(regex)||[];return splits.map((function(split,i){var match=i>=matches.length?"":matches[i].replace(/[\[\]]/g,"");return"".concat(split.length?"*":"").concat(match)})).join("")}},{key:"isUnsupportedTimePattern",value:function isUnsupportedTimePattern(){return!!this.intervalName}},{key:"isTimeBased",value:function isTimeBased(){return!!this.timeFieldName&&(!this.fields||!!this.getTimeField())}},{key:"isTimeNanosBased",value:function isTimeNanosBased(){var timeField=this.getTimeField();return timeField&&timeField.esTypes&&timeField.esTypes.indexOf("date_nanos")!==-1}},{key:"isTimeBasedWildcard",value:function isTimeBasedWildcard(){return this.isTimeBased()&&this.isWildcard()}},{key:"getTimeField",value:function getTimeField(){if(!this.timeFieldName||!this.fields||!this.fields.getByName)return;return this.fields.getByName(this.timeFieldName)}},{key:"getFieldByName",value:function getFieldByName(name){if(!this.fields||!this.fields.getByName)return;return this.fields.getByName(name)}},{key:"getAggregationRestrictions",value:function getAggregationRestrictions(){var _this$typeMeta;return(_this$typeMeta=this.typeMeta)===null||_this$typeMeta===void 0?void 0:_this$typeMeta.aggs}},{key:"isWildcard",value:function isWildcard(){return _lodash.default.includes(this.title,"*")}},{key:"prepBody",value:function prepBody(){var _this3=this;var body={};_lodash.default.forOwn(this.mapping,(function(fieldMapping,fieldName){if(!fieldName||_this3[fieldName]==null)return;body[fieldName]=fieldMapping._serialize?fieldMapping._serialize(_this3[fieldName]):_this3[fieldName]}));return body}},{key:"create",value:function(){var _create2=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(){var _this4=this;var allowOverride,_create,potentialDuplicateByTitle,_args7=arguments;return regeneratorRuntime.wrap((function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:allowOverride=_args7.length>0&&_args7[0]!==undefined?_args7[0]:false;_create=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(duplicateId){var duplicatePattern,body,response;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!duplicateId){_context6.next=4;break}duplicatePattern=new IndexPattern(duplicateId,_this4.getConfig,_this4.savedObjectsClient,_this4.patternCache,_this4.fieldsFetcher);_context6.next=4;return duplicatePattern.destroy();case 4:body=_this4.prepBody();_context6.next=7;return _this4.savedObjectsClient.create(type,body,{id:_this4.id});case 7:response=_context6.sent;_this4.id=response.id;return _context6.abrupt("return",response.id);case 10:case"end":return _context6.stop()}}}),_callee6)})));return function _create(_x5){return _ref2.apply(this,arguments)}}();_context7.next=4;return(0,_utils.findByTitle)(this.savedObjectsClient,this.title);case 4:potentialDuplicateByTitle=_context7.sent;if(potentialDuplicateByTitle){_context7.next=9;break}_context7.next=8;return _create();case 8:return _context7.abrupt("return",_context7.sent);case 9:if(allowOverride){_context7.next=11;break}return _context7.abrupt("return",false);case 11:_context7.next=13;return _create(potentialDuplicateByTitle.id);case 13:return _context7.abrupt("return",_context7.sent);case 14:case"end":return _context7.stop()}}}),_callee7,this)})));function create(){return _create2.apply(this,arguments)}return create}()},{key:"save",value:function(){var _save=_asyncToGenerator(regeneratorRuntime.mark((function _callee8(){var _this5=this;var saveAttempts,body,originalChangedKeys,_args8=arguments;return regeneratorRuntime.wrap((function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:saveAttempts=_args8.length>0&&_args8[0]!==undefined?_args8[0]:0;if(this.id){_context8.next=3;break}return _context8.abrupt("return");case 3:body=this.prepBody();originalChangedKeys=Object.keys(body).filter((function(key){return body[key]!==_this5.originalBody[key]}));return _context8.abrupt("return",this.savedObjectsClient.update(type,this.id,body,{version:this.version}).then((function(resp){_this5.id=resp.id;_this5.version=resp._version})).catch((function(err){if(_lodash.default.get(err,"res.status")===409&&saveAttempts++<MAX_ATTEMPTS_TO_RESOLVE_CONFLICTS){var samePattern=new IndexPattern(_this5.id,_this5.getConfig,_this5.savedObjectsClient,_this5.patternCache,_this5.fieldsFetcher);return samePattern.init().then((function(){var updatedBody=samePattern.prepBody();var serverChangedKeys=Object.keys(updatedBody).filter((function(key){return updatedBody[key]!==body[key]&&_this5.originalBody[key]!==updatedBody[key]}));var unresolvedCollision=false;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=originalChangedKeys[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var originalKey=_step.value;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=serverChangedKeys[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var serverKey=_step2.value;if(originalKey===serverKey){unresolvedCollision=true;break}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return!=null){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}if(unresolvedCollision){var message=_i18n.i18n.translate("data.indexPatterns.unableWriteLabel",{defaultMessage:"Unable to write index pattern! Refresh the page to get the most up to date changes for this index pattern."});var _getNotifications2=(0,_services.getNotifications)(),toasts=_getNotifications2.toasts;toasts.addDanger(message);throw err}serverChangedKeys.forEach((function(key){_this5[key]=samePattern[key]}));_this5.version=samePattern.version;_this5.patternCache.clear(_this5.id);return _this5.save(saveAttempts)}))}throw err})));case 6:case"end":return _context8.stop()}}}),_callee8,this)})));function save(){return _save.apply(this,arguments)}return save}()},{key:"_fetchFields",value:function(){var _fetchFields2=_asyncToGenerator(regeneratorRuntime.mark((function _callee9(){var fields,scripted,all;return regeneratorRuntime.wrap((function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.fieldsFetcher.fetch(this);case 2:fields=_context9.sent;scripted=this.getScriptedFields();all=fields.concat(scripted);_context9.next=7;return this.initFields(all);case 7:case"end":return _context9.stop()}}}),_callee9,this)})));function _fetchFields(){return _fetchFields2.apply(this,arguments)}return _fetchFields}()},{key:"refreshFields",value:function refreshFields(){var _this6=this;return this._fetchFields().then((function(){return _this6.save()})).catch((function(err){var _getNotifications3=(0,_services.getNotifications)(),toasts=_getNotifications3.toasts;if(err instanceof _lib.IndexPatternMissingIndices){toasts.addDanger(err.message);return[]}toasts.addError(err,{title:_i18n.i18n.translate("data.indexPatterns.fetchFieldErrorTitle",{defaultMessage:"Error fetching fields for index pattern {title} (ID: {id})",values:{id:_this6.id,title:_this6.title}})})}))}},{key:"toJSON",value:function toJSON(){return this.id}},{key:"toString",value:function toString(){return""+this.toJSON()}},{key:"destroy",value:function destroy(){this.patternCache.clear(this.id);if(this.id){return this.savedObjectsClient.delete(type,this.id)}}},{key:"routes",get:function get(){return(0,_utils.getRoutes)()}}]);return IndexPattern}();exports.IndexPattern=IndexPattern},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _field_list=__webpack_require__(528);Object.keys(_field_list).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _field_list[key]}})}));var _field=__webpack_require__(192);Object.keys(_field).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _field[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Field=void 0;var _i18n=__webpack_require__(0);var _obj_define=__webpack_require__(529);var _services=__webpack_require__(45);var _common=__webpack_require__(42);var _utils=__webpack_require__(74);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Field=function Field(indexPattern,spec){var shortDotsEnable=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_classCallCheck(this,Field);_defineProperty(this,"name",void 0);_defineProperty(this,"type",void 0);_defineProperty(this,"script",void 0);_defineProperty(this,"lang",void 0);_defineProperty(this,"count",void 0);_defineProperty(this,"esTypes",void 0);_defineProperty(this,"aggregatable",void 0);_defineProperty(this,"filterable",void 0);_defineProperty(this,"searchable",void 0);_defineProperty(this,"sortable",void 0);_defineProperty(this,"visualizable",void 0);_defineProperty(this,"scripted",void 0);_defineProperty(this,"subType",void 0);_defineProperty(this,"displayName",void 0);_defineProperty(this,"format",void 0);_defineProperty(this,"routes",{edit:"/management/kibana/index_patterns/{{indexPattern.id}}/field/{{name}}"});_defineProperty(this,"$$spec",void 0);if(spec instanceof Field)spec=spec.$$spec;var obj=new _obj_define.ObjDefine(spec,Field.prototype);if(spec.name==="_source"){spec.type="_source"}var type=(0,_common.getKbnFieldType)(spec.type);if(spec.type&&!type){var title=_i18n.i18n.translate("data.indexPatterns.unknownFieldHeader",{values:{type:spec.type},defaultMessage:"Unknown field type {type}"});var text=_i18n.i18n.translate("data.indexPatterns.unknownFieldErrorMessage",{values:{name:spec.name,title:indexPattern.title},defaultMessage:"Field {name} in indexPattern {title} is using an unknown field type."});var _getNotifications=(0,_services.getNotifications)(),toasts=_getNotifications.toasts;toasts.addDanger({title:title,text:text})}if(!type)type=(0,_common.getKbnFieldType)("unknown");var format=spec.format;if(!_common.FieldFormat.isInstanceOfFieldFormat(format)){var fieldFormatsService=(0,_services.getFieldFormats)();format=indexPattern.fieldFormatMap[spec.name]||fieldFormatsService.getDefaultInstance(spec.type,spec.esTypes)}var indexed=!!spec.indexed;var scripted=!!spec.scripted;var searchable=!!spec.searchable||scripted;var aggregatable=!!spec.aggregatable||scripted;var readFromDocValues=!!spec.readFromDocValues&&!scripted;var sortable=spec.name==="_score"||(indexed||aggregatable)&&type&&type.sortable;var filterable=spec.name==="_id"||scripted||(indexed||searchable)&&type&&type.filterable;var visualizable=aggregatable;this.name="";obj.fact("name");this.type="";obj.fact("type");obj.fact("esTypes");obj.writ("count",spec.count||0);obj.fact("scripted",scripted);obj.writ("script",scripted?spec.script:null);obj.writ("lang",scripted?spec.lang||"painless":null);obj.fact("searchable",searchable);obj.fact("aggregatable",aggregatable);obj.fact("readFromDocValues",readFromDocValues);obj.comp("format",format);obj.comp("sortable",sortable);obj.comp("filterable",filterable);obj.comp("visualizable",visualizable);obj.comp("indexPattern",indexPattern);obj.comp("displayName",shortDotsEnable?(0,_utils.shortenDottedString)(spec.name):spec.name);this.$$spec=spec;obj.comp("$$spec",spec);obj.writ("conflictDescriptions");obj.fact("subType");return obj.create()};exports.Field=Field;Field.prototype.routes={edit:"/management/kibana/index_patterns/{{indexPattern.id}}/field/{{name}}"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternsApiClient=void 0;var _lib=__webpack_require__(87);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var API_BASE_URL="/api/index_patterns/";var IndexPatternsApiClient=function(){function IndexPatternsApiClient(http){_classCallCheck(this,IndexPatternsApiClient);_defineProperty(this,"http",void 0);this.http=http}_createClass(IndexPatternsApiClient,[{key:"_request",value:function _request(url,query){return this.http.fetch(url,{query:query}).catch((function(resp){var _resp$body$attributes;if(resp.body.statusCode===404&&((_resp$body$attributes=resp.body.attributes)===null||_resp$body$attributes===void 0?void 0:_resp$body$attributes.code)==="no_matching_indices"){throw new _lib.IndexPatternMissingIndices(resp.body.message)}throw new Error(resp.body.message||resp.body.error||"".concat(resp.body.statusCode," Response"))}))}},{key:"_getUrl",value:function _getUrl(path){return API_BASE_URL+path.filter(Boolean).map(encodeURIComponent).join("/")}},{key:"getFieldsForTimePattern",value:function getFieldsForTimePattern(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var pattern=options.pattern,lookBack=options.lookBack,metaFields=options.metaFields;var url=this._getUrl(["_fields_for_time_pattern"]);return this._request(url,{pattern:pattern,look_back:lookBack,meta_fields:metaFields}).then((function(resp){return resp.fields}))}},{key:"getFieldsForWildcard",value:function getFieldsForWildcard(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var pattern=options.pattern,metaFields=options.metaFields,type=options.type,params=options.params;var url;var query;if(type){url=this._getUrl([type,"_fields_for_wildcard"]);query={pattern:pattern,meta_fields:metaFields,params:JSON.stringify(params)}}else{url=this._getUrl(["_fields_for_wildcard"]);query={pattern:pattern,meta_fields:metaFields}}return this._request(url,query).then((function(resp){return resp.fields}))}}]);return IndexPatternsApiClient}();exports.IndexPatternsApiClient=IndexPatternsApiClient},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.AggParamType=void 0;var _agg_config=__webpack_require__(89);var _base=__webpack_require__(62);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggParamType=function(_BaseParamType){_inherits(AggParamType,_BaseParamType);function AggParamType(config){var _this;_classCallCheck(this,AggParamType);_this=_possibleConstructorReturn(this,_getPrototypeOf(AggParamType).call(this,config));_defineProperty(_assertThisInitialized(_this),"makeAgg",void 0);_defineProperty(_assertThisInitialized(_this),"allowedAggs",[]);if(config.allowedAggs){_this.allowedAggs=config.allowedAggs}if(!config.write){_this.write=function(aggConfig,output){if(aggConfig.params[_this.name]&&aggConfig.params[_this.name].length){output.params[_this.name]=aggConfig.params[_this.name]}}}if(!config.serialize){_this.serialize=function(agg){return agg.toJSON()}}if(!config.deserialize){_this.deserialize=function(state,agg){if(!agg){throw new Error("aggConfig was not provided to AggParamType deserialize function")}return _this.makeAgg(agg,state)}}_this.makeAgg=config.makeAgg;_this.valueType=_agg_config.AggConfig;return _this}return AggParamType}(_base.BaseParamType);exports.AggParamType=AggParamType},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FieldParamType=void 0;var _i18n=__webpack_require__(0);var _public=__webpack_require__(26);var _base=__webpack_require__(62);var _filter=__webpack_require__(196);var _common=__webpack_require__(42);var _services=__webpack_require__(45);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var filterByType=(0,_filter.propFilter)("type");var FieldParamType=function(_BaseParamType){_inherits(FieldParamType,_BaseParamType);function FieldParamType(config){var _this;_classCallCheck(this,FieldParamType);_this=_possibleConstructorReturn(this,_getPrototypeOf(FieldParamType).call(this,config));_defineProperty(_assertThisInitialized(_this),"required",true);_defineProperty(_assertThisInitialized(_this),"scriptable",true);_defineProperty(_assertThisInitialized(_this),"filterFieldTypes",void 0);_defineProperty(_assertThisInitialized(_this),"onlyAggregatable",void 0);_defineProperty(_assertThisInitialized(_this),"getAvailableFields",(function(aggConfig){var fields=aggConfig.getIndexPattern().fields;var filteredFields=fields.filter((function(field){var _assertThisInitialize=_assertThisInitialized(_this),onlyAggregatable=_assertThisInitialize.onlyAggregatable,scriptable=_assertThisInitialize.scriptable,filterFieldTypes=_assertThisInitialize.filterFieldTypes;if(onlyAggregatable&&(!field.aggregatable||(0,_common.isNestedField)(field))||!scriptable&&field.scripted){return false}return filterByType([field],filterFieldTypes).length!==0}));return filteredFields}));_this.filterFieldTypes=config.filterFieldTypes||"*";_this.onlyAggregatable=config.onlyAggregatable!==false;if(!config.write){_this.write=function(aggConfig,output){var field=aggConfig.getField();if(!field){throw new TypeError(_i18n.i18n.translate("data.search.aggs.paramTypes.field.requiredFieldParameterErrorMessage",{defaultMessage:"{fieldParameter} is a required parameter",values:{fieldParameter:'"field"'}}))}if(field.scripted){output.params.script={source:field.script,lang:field.lang}}else{output.params.field=field.name}}}_this.serialize=function(field){return field.name};_this.deserialize=function(fieldName,aggConfig){if(!aggConfig){throw new Error("aggConfig was not provided to FieldParamType deserialize function")}var field=aggConfig.getIndexPattern().fields.getByName(fieldName);if(!field){throw new _public.SavedObjectNotFound("index-pattern-field",fieldName)}var validField=_this.getAvailableFields(aggConfig).find((function(f){return f.name===fieldName}));if(!validField){(0,_services.getNotifications)().toasts.addDanger(_i18n.i18n.translate("data.search.aggs.paramTypes.field.invalidSavedFieldParameterErrorMessage",{defaultMessage:"Saved {fieldParameter} parameter is now invalid. Please select a new field.",values:{fieldParameter:'"field"'}}))}return validField};return _this}return FieldParamType}(_base.BaseParamType);exports.FieldParamType=FieldParamType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"aggTypeFilters",{enumerable:true,get:function get(){return _agg_type_filters.aggTypeFilters}});Object.defineProperty(exports,"AggTypeFilters",{enumerable:true,get:function get(){return _agg_type_filters.AggTypeFilters}});Object.defineProperty(exports,"propFilter",{enumerable:true,get:function get(){return _prop_filter.propFilter}});var _agg_type_filters=__webpack_require__(538);var _prop_filter=__webpack_require__(539)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.StringParamType=void 0;var _base=__webpack_require__(62);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var StringParamType=function(_BaseParamType){_inherits(StringParamType,_BaseParamType);function StringParamType(config){var _this;_classCallCheck(this,StringParamType);_this=_possibleConstructorReturn(this,_getPrototypeOf(StringParamType).call(this,config));if(!config.write){_this.write=function(aggConfig,output){if(aggConfig.params[_this.name]&&aggConfig.params[_this.name].length){output.params[_this.name]=aggConfig.params[_this.name]}}}return _this}return StringParamType}(_base.BaseParamType);exports.StringParamType=StringParamType},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.JsonParamType=void 0;var _lodash=_interopRequireDefault(__webpack_require__(41));var _base=__webpack_require__(62);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var JsonParamType=function(_BaseParamType){_inherits(JsonParamType,_BaseParamType);function JsonParamType(config){var _this;_classCallCheck(this,JsonParamType);_this=_possibleConstructorReturn(this,_getPrototypeOf(JsonParamType).call(this,config));_this.name=config.name||"json";if(!config.write){_this.write=function(aggConfig,output){var paramJson;var param=aggConfig.params[_this.name];if(!param){return}try{paramJson=JSON.parse(param)}catch(err){return}function filteredCombine(srcA,srcB){function mergeObjs(a,b){return(0,_lodash.default)(a).keys().union(_lodash.default.keys(b)).transform((function(dest,key){var val=compare(a[key],b[key]);if(val!==undefined)dest[key]=val}),{}).value()}function mergeArrays(a,b){return _lodash.default.times(Math.max(a.length,b.length),(function(i){return compare(a[i],b[i])}))}function compare(a,b){if(_lodash.default.isPlainObject(a)&&_lodash.default.isPlainObject(b))return mergeObjs(a,b);if(Array.isArray(a)&&Array.isArray(b))return mergeArrays(a,b);if(b===null)return undefined;if(b!==undefined)return b;return a}return compare(srcA,srcB)}output.params=filteredCombine(output.params,paramJson);return}}return _this}return JsonParamType}(_base.BaseParamType);exports.JsonParamType=JsonParamType},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.AggConfigs=void 0;var _lodash=_interopRequireDefault(__webpack_require__(41));var _agg_config=__webpack_require__(89);var _agg_groups=__webpack_require__(115);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function removeParentAggs(obj){for(var prop in obj){if(prop==="parentAggs")delete obj[prop];else if(_typeof(obj[prop])==="object")removeParentAggs(obj[prop])}}function parseParentAggs(dslLvlCursor,dsl){if(dsl.parentAggs){_lodash.default.each(dsl.parentAggs,(function(agg,key){dslLvlCursor[key]=agg;parseParentAggs(dslLvlCursor,agg)}))}}var AggConfigs=function(){function AggConfigs(indexPattern){var _this=this;var configStates=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var opts=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,AggConfigs);_defineProperty(this,"indexPattern",void 0);_defineProperty(this,"timeRange",void 0);_defineProperty(this,"typesRegistry",void 0);_defineProperty(this,"aggs",void 0);_defineProperty(this,"createAggConfig",(function(params){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$addToAggConfigs=_ref.addToAggConfigs,addToAggConfigs=_ref$addToAggConfigs===void 0?true:_ref$addToAggConfigs;var type=params.type;var aggConfig;if(params instanceof _agg_config.AggConfig){aggConfig=params;params.parent=_this}else{aggConfig=new _agg_config.AggConfig(_this,_objectSpread({},params,{type:typeof type==="string"?_this.typesRegistry.get(type):type}))}if(addToAggConfigs){_this.aggs.push(aggConfig)}return aggConfig}));this.typesRegistry=opts.typesRegistry;configStates=_agg_config.AggConfig.ensureIds(configStates);this.aggs=[];this.indexPattern=indexPattern;configStates.forEach((function(params){return _this.createAggConfig(params)}))}_createClass(AggConfigs,[{key:"setTimeRange",value:function setTimeRange(timeRange){this.timeRange=timeRange;var updateAggTimeRange=function updateAggTimeRange(agg){_lodash.default.each(agg.params,(function(param){if(param instanceof _agg_config.AggConfig){updateAggTimeRange(param)}}));if(_lodash.default.get(agg,"type.name")==="date_histogram"){agg.params.timeRange=timeRange}};this.aggs.forEach(updateAggTimeRange)}},{key:"clone",value:function clone(){var _ref2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref2$enabledOnly=_ref2.enabledOnly,enabledOnly=_ref2$enabledOnly===void 0?true:_ref2$enabledOnly;var filterAggs=function filterAggs(agg){if(!enabledOnly)return true;return agg.enabled};var aggConfigs=new AggConfigs(this.indexPattern,this.aggs.filter(filterAggs),{typesRegistry:this.typesRegistry});return aggConfigs}},{key:"jsonDataEquals",value:function jsonDataEquals(aggConfigs){if(aggConfigs.length!==this.aggs.length){return false}for(var i=0;i<this.aggs.length;i+=1){if(!_lodash.default.isEqual(aggConfigs[i].toJSON(),this.aggs[i].toJSON())){return false}}return true}},{key:"toDsl",value:function toDsl(){var _this2=this;var hierarchical=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var dslTopLvl={};var dslLvlCursor;var nestedMetrics;if(hierarchical){nestedMetrics=this.aggs.filter((function(agg){return agg.type.type==="metrics"&&agg.type.name!=="count"})).map((function(agg){return{config:agg,dsl:agg.toDsl(_this2)}}))}this.getRequestAggs().filter((function(config){return!config.type.hasNoDsl})).forEach((function(config,i,list){if(!dslLvlCursor){dslLvlCursor=dslTopLvl}else{var prevConfig=list[i-1];var prevDsl=dslLvlCursor[prevConfig.id];dslLvlCursor=prevDsl.aggs||dslLvlCursor}var dsl=dslLvlCursor[config.id]=config.toDsl(_this2);var subAggs;parseParentAggs(dslLvlCursor,dsl);if(config.type.type===_agg_groups.AggGroupNames.Buckets&&i<list.length-1){subAggs=dsl.aggs||(dsl.aggs={})}if(subAggs&&nestedMetrics){nestedMetrics.forEach((function(agg){subAggs[agg.config.id]=agg.dsl;if(agg.dsl.parentAggs){Object.entries(agg.dsl.parentAggs).forEach((function(_ref3){var _ref4=_slicedToArray(_ref3,2),parentAggId=_ref4[0],parentAgg=_ref4[1];subAggs[parentAggId]=parentAgg}))}}))}}));removeParentAggs(dslTopLvl);return dslTopLvl}},{key:"getAll",value:function getAll(){return _toConsumableArray(this.aggs)}},{key:"byIndex",value:function byIndex(index){return this.aggs[index]}},{key:"byId",value:function byId(id){return this.aggs.find((function(agg){return agg.id===id}))}},{key:"byName",value:function byName(name){return this.aggs.filter((function(agg){var _agg$type;return((_agg$type=agg.type)===null||_agg$type===void 0?void 0:_agg$type.name)===name}))}},{key:"byType",value:function byType(type){return this.aggs.filter((function(agg){var _agg$type2;return((_agg$type2=agg.type)===null||_agg$type2===void 0?void 0:_agg$type2.type)===type}))}},{key:"byTypeName",value:function byTypeName(type){return this.byName(type)}},{key:"bySchemaName",value:function bySchemaName(schema){return this.aggs.filter((function(agg){return agg.schema===schema}))}},{key:"getRequestAggs",value:function getRequestAggs(){var aggregations=this.aggs.filter((function(agg){return agg.enabled&&agg.type})).reduce((function(requestValuesAggs,agg){var aggs=agg.getRequestAggs();return aggs?requestValuesAggs.concat(aggs):requestValuesAggs}),[]);return _lodash.default.sortBy(aggregations,(function(agg){return agg.type.type===_agg_groups.AggGroupNames.Metrics?1:0}))}},{key:"getRequestAggById",value:function getRequestAggById(id){return this.aggs.find((function(agg){return agg.id===id}))}},{key:"getResponseAggs",value:function getResponseAggs(){return this.getRequestAggs().reduce((function(responseValuesAggs,agg){var aggs=agg.getResponseAggs();return aggs?responseValuesAggs.concat(aggs):responseValuesAggs}),[])}},{key:"getResponseAggById",value:function getResponseAggById(id){id=String(id);var reqAgg=_lodash.default.find(this.getRequestAggs(),(function(agg){return id.substr(0,String(agg.id).length)===agg.id}));if(!reqAgg)return;return _lodash.default.find(reqAgg.getResponseAggs(),{id:id})}},{key:"onSearchRequestStart",value:function onSearchRequestStart(searchSource,options){return Promise.all(this.getRequestAggs().map((function(agg){return agg.onSearchRequestStart(searchSource,options)})))}}]);return AggConfigs}();exports.AggConfigs=AggConfigs},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPercentileValue=void 0;var _lodash=__webpack_require__(41);var getPercentileValue=function getPercentileValue(agg,bucket){var values=bucket[agg.parentId].values;var percentile=(0,_lodash.find)(values,(function(_ref){var key=_ref.key;return key===agg.key}));return percentile?percentile.value:NaN};exports.getPercentileValue=getPercentileValue},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.forwardModifyAggConfigOnSearchRequestStart=void 0;var forwardModifyAggConfigOnSearchRequestStart=function forwardModifyAggConfigOnSearchRequestStart(paramName){return function(aggConfig,searchSource,request){if(!aggConfig||!aggConfig.params){return}var nestedAggConfig=aggConfig.getParam(paramName);if(nestedAggConfig&&nestedAggConfig.type&&nestedAggConfig.type.params){nestedAggConfig.type.params.forEach((function(param){if(param.modifyAggConfigOnSearchRequestStart){param.modifyAggConfigOnSearchRequestStart(nestedAggConfig,searchSource,request)}}))}}};exports.forwardModifyAggConfigOnSearchRequestStart=forwardModifyAggConfigOnSearchRequestStart},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isDateHistogramBucketAggConfig=isDateHistogramBucketAggConfig;exports.dateHistogramBucketAgg=void 0;var _lodash=_interopRequireDefault(__webpack_require__(41));var _momentTimezone=_interopRequireDefault(__webpack_require__(32));var _i18n=__webpack_require__(0);var _time_buckets=__webpack_require__(203);var _bucket_agg_type=__webpack_require__(55);var _bucket_agg_types=__webpack_require__(52);var _date_histogram=__webpack_require__(563);var _interval_options=__webpack_require__(204);var _common=__webpack_require__(42);var _agg_params=__webpack_require__(90);var _metric_agg_type=__webpack_require__(47);var _services=__webpack_require__(45);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var detectedTimezone=_momentTimezone.default.tz.guess();var tzOffset=(0,_momentTimezone.default)().format("Z");var updateTimeBuckets=function updateTimeBuckets(agg,timefilter,customBuckets){var bounds=agg.params.timeRange?timefilter.calculateBounds(agg.params.timeRange):null;var buckets=customBuckets||agg.buckets;buckets.setBounds(agg.fieldIsTimeField()&&bounds);buckets.setInterval(agg.params.interval)};function isDateHistogramBucketAggConfig(agg){return Boolean(agg.buckets)}var dateHistogramBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.DATE_HISTOGRAM,title:_i18n.i18n.translate("data.search.aggs.buckets.dateHistogramTitle",{defaultMessage:"Date Histogram"}),ordered:{date:true},makeLabel:function makeLabel(agg){var output={};if(this.params){output=(0,_agg_params.writeParams)(this.params,agg)}var field=agg.getFieldDisplayName();return _i18n.i18n.translate("data.search.aggs.buckets.dateHistogramLabel",{defaultMessage:"{fieldName} per {intervalDescription}",values:{fieldName:field,intervalDescription:output.metricScaleText||output.bucketInterval.description}})},createFilter:_date_histogram.createFilterDateHistogram,decorateAggConfig:function decorateAggConfig(){var uiSettings=(0,_services.getUiSettings)();var buckets;return{buckets:{configurable:true,get:function get(){if(buckets)return buckets;var timefilter=(0,_services.getQueryService)().timefilter.timefilter;buckets=new _time_buckets.TimeBuckets({uiSettings:uiSettings});updateTimeBuckets(this,timefilter,buckets);return buckets}}}},getFormat:function getFormat(agg){var DateFieldFormat=(0,_services.getFieldFormats)().getType(_common.FIELD_FORMAT_IDS.DATE);if(!DateFieldFormat){throw new Error("Unable to retrieve Date Field Format")}return new DateFieldFormat({pattern:agg.buckets.getScaledDateFormat()},(function(key){return(0,_services.getUiSettings)().get(key)}))},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.DATE,default:function _default(agg){return agg.getIndexPattern().timeFieldName},onChange:function onChange(agg){if(_lodash.default.get(agg,"params.interval")==="auto"&&!agg.fieldIsTimeField()){delete agg.params.interval}}},{name:"timeRange",default:null,write:_lodash.default.noop},{name:"useNormalizedEsInterval",default:true,write:_lodash.default.noop},{name:"scaleMetricValues",default:false,write:_lodash.default.noop,advanced:true},{name:"interval",deserialize:function deserialize(state,agg){if(state==="custom"){return _lodash.default.get(agg,"params.customInterval")}var interval=_lodash.default.find(_interval_options.intervalOptions,{val:state});if(!interval&&state==="year"){return"y"}return state},default:"auto",options:_interval_options.intervalOptions,write:function write(agg,output,aggs){var timefilter=(0,_services.getQueryService)().timefilter.timefilter;updateTimeBuckets(agg,timefilter);var _agg$params=agg.params,useNormalizedEsInterval=_agg$params.useNormalizedEsInterval,scaleMetricValues=_agg$params.scaleMetricValues;var interval=agg.buckets.getInterval(useNormalizedEsInterval);output.bucketInterval=interval;if(interval.expression==="0ms"){return}output.params=_objectSpread({},output.params,{},(0,_common.dateHistogramInterval)(interval.expression));var scaleMetrics=scaleMetricValues&&interval.scaled&&interval.scale<1;if(scaleMetrics&&aggs){var metrics=aggs.aggs.filter((function(a){return(0,_metric_agg_type.isMetricAggType)(a.type)}));var all=_lodash.default.every(metrics,(function(a){var type=a.type;if((0,_metric_agg_type.isMetricAggType)(type)){return type.isScalable()}}));if(all){output.metricScale=interval.scale;output.metricScaleText=interval.preScaled.description}}}},{name:"time_zone",default:undefined,serialize:_lodash.default.noop,write:function write(agg,output){var tz=agg.params.time_zone;if(!tz&&agg.params.field){tz=_lodash.default.get(agg.getIndexPattern(),["typeMeta","aggs","date_histogram",agg.params.field.name,"time_zone"])}if(!tz){var config=(0,_services.getUiSettings)();var isDefaultTimezone=config.isDefault("dateFormat:tz");tz=isDefaultTimezone?detectedTimezone||tzOffset:config.get("dateFormat:tz")}output.params.time_zone=tz}},{name:"drop_partials",default:false,write:_lodash.default.noop,shouldShow:function shouldShow(agg){var field=agg.params.field;return field&&field.name&&field.name===agg.getIndexPattern().timeFieldName}},{name:"format"},{name:"min_doc_count",default:1},{name:"extended_bounds",default:{},write:function write(agg,output){var val=agg.params.extended_bounds;if(val.min!=null||val.max!=null){output.params.extended_bounds={min:(0,_momentTimezone.default)(val.min).valueOf(),max:(0,_momentTimezone.default)(val.max).valueOf()};return}}}]});exports.dateHistogramBucketAgg=dateHistogramBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TimeBuckets",{enumerable:true,get:function get(){return _time_buckets.TimeBuckets}});var _time_buckets=__webpack_require__(560)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.intervalOptions=void 0;var _i18n=__webpack_require__(0);var intervalOptions=[{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.autoDisplayName",{defaultMessage:"Auto"}),val:"auto",enabled:function enabled(agg){return agg.fieldIsTimeField()}},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.millisecondDisplayName",{defaultMessage:"Millisecond"}),val:"ms"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.secondDisplayName",{defaultMessage:"Second"}),val:"s"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.minuteDisplayName",{defaultMessage:"Minute"}),val:"m"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.hourlyDisplayName",{defaultMessage:"Hourly"}),val:"h"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.dailyDisplayName",{defaultMessage:"Daily"}),val:"d"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.weeklyDisplayName",{defaultMessage:"Weekly"}),val:"w"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.monthlyDisplayName",{defaultMessage:"Monthly"}),val:"M"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.yearlyDisplayName",{defaultMessage:"Yearly"}),val:"y"}];exports.intervalOptions=intervalOptions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dateRangeBucketAgg=void 0;var _lodash=__webpack_require__(41);var _momentTimezone=_interopRequireDefault(__webpack_require__(32));var _i18n=__webpack_require__(0);var _bucket_agg_types=__webpack_require__(52);var _bucket_agg_type=__webpack_require__(55);var _date_range=__webpack_require__(569);var _date_range2=__webpack_require__(85);var _common=__webpack_require__(42);var _services=__webpack_require__(45);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var dateRangeTitle=_i18n.i18n.translate("data.search.aggs.buckets.dateRangeTitle",{defaultMessage:"Date Range"});var dateRangeBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.DATE_RANGE,title:dateRangeTitle,createFilter:_date_range.createFilterDateRange,getKey:function getKey(_ref){var from=_ref.from,to=_ref.to;return{from:from,to:to}},getFormat:function getFormat(agg){var fieldFormatsService=(0,_services.getFieldFormats)();var formatter=agg.fieldOwnFormatter(_common.TEXT_CONTEXT_TYPE,fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.DATE));var DateRangeFormat=_common.FieldFormat.from((function(range){return(0,_date_range2.convertDateRangeToString)(range,formatter)}));return new DateRangeFormat},makeLabel:function makeLabel(aggConfig){return aggConfig.getFieldDisplayName()+" date ranges"},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.DATE,default:function _default(agg){return agg.getIndexPattern().timeFieldName}},{name:"ranges",default:[{from:"now-1w/w",to:"now"}]},{name:"time_zone",default:undefined,serialize:function serialize(){return undefined},write:function write(agg,output){var field=agg.getParam("field");var tz=agg.getParam("time_zone");if(!tz&&field){tz=(0,_lodash.get)(agg.getIndexPattern(),["typeMeta","aggs","date_range",field.name,"time_zone"])}if(!tz){var config=(0,_services.getUiSettings)();var detectedTimezone=_momentTimezone.default.tz.guess();var tzOffset=(0,_momentTimezone.default)().format("Z");var isDefaultTimezone=config.isDefault("dateFormat:tz");tz=isDefaultTimezone?detectedTimezone||tzOffset:config.get("dateFormat:tz")}output.params.time_zone=tz}}]});exports.dateRangeBucketAgg=dateRangeBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ipRangeBucketAgg=void 0;var _lodash=__webpack_require__(41);var _i18n=__webpack_require__(0);var _bucket_agg_type=__webpack_require__(55);var _bucket_agg_types=__webpack_require__(52);var _ip_range=__webpack_require__(570);var _ip_range2=__webpack_require__(86);var _common=__webpack_require__(42);var _services=__webpack_require__(45);var ipRangeTitle=_i18n.i18n.translate("data.search.aggs.buckets.ipRangeTitle",{defaultMessage:"IPv4 Range"});var ipRangeBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.IP_RANGE,title:ipRangeTitle,createFilter:_ip_range.createFilterIpRange,getKey:function getKey(bucket,key,agg){if(agg.params.ipRangeType==="mask"){return{type:"mask",mask:key}}return{type:"range",from:bucket.from,to:bucket.to}},getFormat:function getFormat(agg){var fieldFormatsService=(0,_services.getFieldFormats)();var formatter=agg.fieldOwnFormatter(_common.TEXT_CONTEXT_TYPE,fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.IP));var IpRangeFormat=_common.FieldFormat.from((function(range){return(0,_ip_range2.convertIPRangeToString)(range,formatter)}));return new IpRangeFormat},makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.buckets.ipRangeLabel",{defaultMessage:"{fieldName} IP ranges",values:{fieldName:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.IP},{name:"ipRangeType",default:"fromTo",write:_lodash.noop},{name:"ranges",default:{fromTo:[{from:"0.0.0.0",to:"127.255.255.255"},{from:"128.0.0.0",to:"191.255.255.255"}],mask:[{mask:"0.0.0.0/1"},{mask:"128.0.0.0/2"}]},write:function write(aggConfig,output){var ipRangeType=aggConfig.params.ipRangeType;var ranges=aggConfig.params.ranges[ipRangeType];if(ipRangeType==="fromTo"){ranges=(0,_lodash.map)(ranges,(function(range){return(0,_lodash.omit)(range,_lodash.isNull)}))}output.params.ranges=ranges}}]});exports.ipRangeBucketAgg=ipRangeBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CidrMask=void 0;var _public=__webpack_require__(26);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NUM_BITS=32;function throwError(mask){throw Error("Invalid CIDR mask: "+mask)}var CidrMask=function(){function CidrMask(mask){_classCallCheck(this,CidrMask);_defineProperty(this,"initialAddress",void 0);_defineProperty(this,"prefixLength",void 0);var splits=mask.split("/");if(splits.length!==2){throwError(mask)}this.initialAddress=new _public.Ipv4Address(splits[0]);this.prefixLength=Number(splits[1]);if(isNaN(this.prefixLength)||this.prefixLength<1||this.prefixLength>NUM_BITS){throwError(mask)}}_createClass(CidrMask,[{key:"getRange",value:function getRange(){var variableBits=NUM_BITS-this.prefixLength;var fromAddress=this.initialAddress.valueOf()>>variableBits<<variableBits>>>0;var numAddresses=Math.pow(2,variableBits);return{from:new _public.Ipv4Address(fromAddress).toString(),to:new _public.Ipv4Address(fromAddress+numAddresses-1).toString()}}},{key:"toString",value:function toString(){return this.initialAddress.toString()+"/"+this.prefixLength}}]);return CidrMask}();exports.CidrMask=CidrMask},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.termsBucketAgg=exports.termsAggFilter=void 0;var _lodash=__webpack_require__(41);var _i18n=__webpack_require__(0);var _bucket_agg_type=__webpack_require__(55);var _bucket_agg_types=__webpack_require__(52);var _terms=__webpack_require__(209);var _migrate_include_exclude_format=__webpack_require__(117);var _common=__webpack_require__(42);var _expressions=__webpack_require__(92);var _terms_other_bucket_helper=__webpack_require__(653);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var termsAggFilter=["!top_hits","!percentiles","!median","!std_dev","!derivative","!moving_avg","!serial_diff","!cumulative_sum","!avg_bucket","!max_bucket","!min_bucket","!sum_bucket"];exports.termsAggFilter=termsAggFilter;var termsTitle=_i18n.i18n.translate("data.search.aggs.buckets.termsTitle",{defaultMessage:"Terms"});var termsBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.TERMS,title:termsTitle,makeLabel:function makeLabel(agg){var params=agg.params;return agg.getFieldDisplayName()+": "+params.order.text},getFormat:function getFormat(bucket){return{getConverterFor:function getConverterFor(type){return function(val){if(val==="__other__"){return bucket.params.otherBucketLabel}if(val==="__missing__"){return bucket.params.missingBucketLabel}return bucket.params.field.format.convert(val,type)}}}},createFilter:_terms.createFilterTerms,postFlightRequest:function(){var _postFlightRequest=_asyncToGenerator(regeneratorRuntime.mark((function _callee(resp,aggConfigs,aggConfig,searchSource,inspectorAdapters,abortSignal){var nestedSearchSource,filterAgg,request,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(resp.aggregations){_context.next=2;break}return _context.abrupt("return",resp);case 2:nestedSearchSource=searchSource.createChild();if(!aggConfig.params.otherBucket){_context.next=16;break}filterAgg=(0,_terms_other_bucket_helper.buildOtherBucketAgg)(aggConfigs,aggConfig,resp);if(filterAgg){_context.next=7;break}return _context.abrupt("return",resp);case 7:nestedSearchSource.setField("aggs",filterAgg);request=inspectorAdapters.requests.start(_i18n.i18n.translate("data.search.aggs.buckets.terms.otherBucketTitle",{defaultMessage:"Other bucket"}),{description:_i18n.i18n.translate("data.search.aggs.buckets.terms.otherBucketDescription",{defaultMessage:"This request counts the number of documents that fall "+"outside the criterion of the data buckets."})});nestedSearchSource.getSearchRequestBody().then((function(body){request.json(body)}));request.stats((0,_expressions.getRequestInspectorStats)(nestedSearchSource));_context.next=13;return nestedSearchSource.fetch({abortSignal:abortSignal});case 13:response=_context.sent;request.stats((0,_expressions.getResponseInspectorStats)(nestedSearchSource,response)).ok({json:response});resp=(0,_terms_other_bucket_helper.mergeOtherBucketAggResponse)(aggConfigs,resp,response,aggConfig,filterAgg());case 16:if(aggConfig.params.missingBucket){resp=(0,_terms_other_bucket_helper.updateMissingBucket)(resp,aggConfigs,aggConfig)}return _context.abrupt("return",resp);case 18:case"end":return _context.stop()}}}),_callee)})));function postFlightRequest(_x,_x2,_x3,_x4,_x5,_x6){return _postFlightRequest.apply(this,arguments)}return postFlightRequest}(),params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.BOOLEAN,_common.KBN_FIELD_TYPES.DATE,_common.KBN_FIELD_TYPES.IP,_common.KBN_FIELD_TYPES.STRING]},{name:"orderBy",write:_lodash.noop},{name:"orderAgg",type:"agg",allowedAggs:termsAggFilter,default:null,makeAgg:function makeAgg(termsAgg,state){state=state||{};state.schema="orderAgg";var orderAgg=termsAgg.aggConfigs.createAggConfig(state,{addToAggConfigs:false});orderAgg.id=termsAgg.id+"-orderAgg";return orderAgg},write:function write(agg,output,aggs){var dir=agg.params.order.value;var order=output.params.order={};var orderAgg=agg.params.orderAgg||aggs.getResponseAggById(agg.params.orderBy);if(output.params.script){output.params.value_type=agg.getField().type==="number"?"float":agg.getField().type}if(agg.params.missingBucket&&agg.params.field.type==="string"){output.params.missing="__missing__"}if(!orderAgg){order[agg.params.orderBy||"_count"]=dir;return}if(orderAgg.type.name==="count"){order._count=dir;return}var orderAggId=orderAgg.id;if(orderAgg.parentId&&aggs){orderAgg=aggs.byId(orderAgg.parentId)}output.subAggs=(output.subAggs||[]).concat(orderAgg);order[orderAggId]=dir}},{name:"order",type:"optioned",default:"desc",options:[{text:_i18n.i18n.translate("data.search.aggs.buckets.terms.orderDescendingTitle",{defaultMessage:"Descending"}),value:"desc"},{text:_i18n.i18n.translate("data.search.aggs.buckets.terms.orderAscendingTitle",{defaultMessage:"Ascending"}),value:"asc"}],write:_lodash.noop},{name:"size",default:5},{name:"otherBucket",default:false,write:_lodash.noop},{name:"otherBucketLabel",type:"string",default:_i18n.i18n.translate("data.search.aggs.buckets.terms.otherBucketLabel",{defaultMessage:"Other"}),displayName:_i18n.i18n.translate("data.search.aggs.otherBucket.labelForOtherBucketLabel",{defaultMessage:"Label for other bucket"}),shouldShow:function shouldShow(agg){return agg.getParam("otherBucket")},write:_lodash.noop},{name:"missingBucket",default:false,write:_lodash.noop},{name:"missingBucketLabel",default:_i18n.i18n.translate("data.search.aggs.buckets.terms.missingBucketLabel",{defaultMessage:"Missing",description:'Default label used in charts when documents are missing a field.\n          Visible when you create a chart with a terms aggregation and enable "Show missing values"'}),type:"string",displayName:_i18n.i18n.translate("data.search.aggs.otherBucket.labelForMissingValuesLabel",{defaultMessage:"Label for missing values"}),shouldShow:function shouldShow(agg){return agg.getParam("missingBucket")},write:_lodash.noop},_objectSpread({name:"exclude",displayName:_i18n.i18n.translate("data.search.aggs.buckets.terms.excludeLabel",{defaultMessage:"Exclude"}),type:"string",advanced:true,shouldShow:_migrate_include_exclude_format.isStringType},_migrate_include_exclude_format.migrateIncludeExcludeFormat),_objectSpread({name:"include",displayName:_i18n.i18n.translate("data.search.aggs.buckets.terms.includeLabel",{defaultMessage:"Include"}),type:"string",advanced:true,shouldShow:_migrate_include_exclude_format.isStringType},_migrate_include_exclude_format.migrateIncludeExcludeFormat)]});exports.termsBucketAgg=termsBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterTerms=void 0;var _common=__webpack_require__(42);var createFilterTerms=function createFilterTerms(aggConfig,key,params){var field=aggConfig.params.field;var indexPattern=field.indexPattern;if(key==="__other__"){var terms=params.terms;var phraseFilter=(0,_common.buildPhrasesFilter)(field,terms,indexPattern);phraseFilter.meta.negate=true;var filters=[phraseFilter];if(terms.some((function(term){return term==="__missing__"}))){filters.push((0,_common.buildExistsFilter)(field,indexPattern))}return filters}else if(key==="__missing__"){var existsFilter=(0,_common.buildExistsFilter)(field,indexPattern);existsFilter.meta.negate=true;return existsFilter}return(0,_common.buildPhraseFilter)(field,key,indexPattern)};exports.createFilterTerms=createFilterTerms},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={SortDirection:true,EsQuerySortValue:true,SearchSourceFields:true};Object.defineProperty(exports,"SortDirection",{enumerable:true,get:function get(){return _types.SortDirection}});Object.defineProperty(exports,"EsQuerySortValue",{enumerable:true,get:function get(){return _types.EsQuerySortValue}});Object.defineProperty(exports,"SearchSourceFields",{enumerable:true,get:function get(){return _types.SearchSourceFields}});var _search_source=__webpack_require__(211);Object.keys(_search_source).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _search_source[key]}})}));var _types=__webpack_require__(608)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchSource=void 0;var _lodash=_interopRequireDefault(__webpack_require__(41));var _normalize_sort_request=__webpack_require__(572);var _filter_docvalue_fields=__webpack_require__(573);var _public=__webpack_require__(26);var _fetch2=__webpack_require__(212);var _services=__webpack_require__(45);var _common=__webpack_require__(42);var _field_formats=__webpack_require__(104);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchSource=function(){function SearchSource(){var fields=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,SearchSource);this.fields=fields;_defineProperty(this,"id",_lodash.default.uniqueId("data_source"));_defineProperty(this,"searchStrategyId",void 0);_defineProperty(this,"parent",void 0);_defineProperty(this,"requestStartHandlers",[]);_defineProperty(this,"inheritOptions",{});_defineProperty(this,"history",[])}_createClass(SearchSource,[{key:"setPreferredSearchStrategyId",value:function setPreferredSearchStrategyId(searchStrategyId){this.searchStrategyId=searchStrategyId}},{key:"setFields",value:function setFields(newFields){this.fields=newFields;return this}},{key:"setField",value:function setField(field,value){if(value==null){delete this.fields[field]}else{this.fields[field]=value}return this}},{key:"getId",value:function getId(){return this.id}},{key:"getFields",value:function getFields(){return _objectSpread({},this.fields)}},{key:"getField",value:function getField(field){var recurse=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(!recurse||this.fields[field]!==void 0){return this.fields[field]}var parent=this.getParent();return parent&&parent.getField(field)}},{key:"getOwnField",value:function getOwnField(field){return this.getField(field,false)}},{key:"create",value:function create(){return new SearchSource}},{key:"createCopy",value:function createCopy(){var newSearchSource=new SearchSource;newSearchSource.setFields(_objectSpread({},this.fields));newSearchSource.setField("index",this.getField("index"));newSearchSource.setParent(this.getParent());return newSearchSource}},{key:"createChild",value:function createChild(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var childSearchSource=new SearchSource;childSearchSource.setParent(this,options);return childSearchSource}},{key:"setParent",value:function setParent(parent){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.parent=parent;this.inheritOptions=options;return this}},{key:"getParent",value:function getParent(){return this.parent}},{key:"fetch",value:function(){var _fetch=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var options,searchRequest,esShardTimeout,response,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:options=_args.length>0&&_args[0]!==undefined?_args[0]:{};_context.next=3;return this.requestIsStarting(options);case 3:_context.next=5;return this.flatten();case 5:searchRequest=_context.sent;this.history=[searchRequest];esShardTimeout=(0,_services.getInjectedMetadata)().getInjectedVar("esShardTimeout");_context.next=10;return(0,_fetch2.fetchSoon)(searchRequest,_objectSpread({},this.searchStrategyId&&{searchStrategyId:this.searchStrategyId},{},options),{searchService:(0,_services.getSearchService)(),config:(0,_services.getUiSettings)(),esShardTimeout:esShardTimeout});case 10:response=_context.sent;if(!response.error){_context.next=13;break}throw new _fetch2.RequestFailure(null,response);case 13:return _context.abrupt("return",response);case 14:case"end":return _context.stop()}}}),_callee,this)})));function fetch(){return _fetch.apply(this,arguments)}return fetch}()},{key:"onRequestStart",value:function onRequestStart(handler){this.requestStartHandlers.push(handler)}},{key:"getSearchRequestBody",value:function(){var _getSearchRequestBody=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var searchRequest;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.flatten();case 2:searchRequest=_context2.sent;return _context2.abrupt("return",searchRequest.body);case 4:case"end":return _context2.stop()}}}),_callee2,this)})));function getSearchRequestBody(){return _getSearchRequestBody.apply(this,arguments)}return getSearchRequestBody}()},{key:"destroy",value:function destroy(){this.requestStartHandlers.length=0}},{key:"requestIsStarting",value:function requestIsStarting(){var _this=this;var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var handlers=_toConsumableArray(this.requestStartHandlers);if(this.inheritOptions.callParentStartHandlers){var _searchSource=this.getParent();while(_searchSource){handlers.push.apply(handlers,_toConsumableArray(_searchSource.requestStartHandlers));_searchSource=_searchSource.getParent()}}return Promise.all(handlers.map((function(fn){return fn(_this,options)})))}},{key:"mergeProp",value:function mergeProp(data,val,key){val=typeof val==="function"?val(this):val;if(val==null||!key)return;var addToRoot=function addToRoot(rootKey,value){data[rootKey]=value};var addToBody=function addToBody(bodyKey,value){if(data.body[bodyKey]==null){data.body[bodyKey]=value}};switch(key){case"filter":return addToRoot("filters",(data.filters||[]).concat(val));case"query":return addToRoot(key,(data[key]||[]).concat(val));case"fields":var _fields=_lodash.default.uniq((data[key]||[]).concat(val));return addToRoot(key,_fields);case"index":case"type":case"highlightAll":return key&&data[key]==null&&addToRoot(key,val);case"searchAfter":return addToBody("search_after",val);case"source":return addToBody("_source",val);case"sort":var sort=(0,_normalize_sort_request.normalizeSortRequest)(val,this.getField("index"),(0,_services.getUiSettings)().get("sort:options"));return addToBody(key,sort);default:return addToBody(key,val)}}},{key:"mergeProps",value:function mergeProps(){var _this2=this;var root=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this;var searchRequest=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{body:{}};Object.entries(this.fields).forEach((function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];_this2.mergeProp(searchRequest,value,key)}));if(this.parent){this.parent.mergeProps(root,searchRequest)}return searchRequest}},{key:"getIndexType",value:function getIndexType(index){if(this.searchStrategyId){return this.searchStrategyId==="default"?undefined:this.searchStrategyId}else{return index===null||index===void 0?void 0:index.type}}},{key:"flatten",value:function flatten(){var searchRequest=this.mergeProps();searchRequest.body=searchRequest.body||{};var body=searchRequest.body,index=searchRequest.index,fields=searchRequest.fields,query=searchRequest.query,filters=searchRequest.filters,highlightAll=searchRequest.highlightAll;searchRequest.indexType=this.getIndexType(index);var computedFields=index?index.getComputedFields():{};body.stored_fields=computedFields.storedFields;body.script_fields=body.script_fields||{};_lodash.default.extend(body.script_fields,computedFields.scriptFields);var defaultDocValueFields=computedFields.docvalueFields?computedFields.docvalueFields:[];body.docvalue_fields=body.docvalue_fields||defaultDocValueFields;if(!body.hasOwnProperty("_source")&&index){body._source=index.getSourceFiltering()}if(body._source){var filter=(0,_public.fieldWildcardFilter)(body._source.excludes,(0,_services.getUiSettings)().get("metaFields"));body.docvalue_fields=body.docvalue_fields.filter((function(docvalueField){return filter(docvalueField.field)}))}if(fields){body.docvalue_fields=(0,_filter_docvalue_fields.filterDocvalueFields)(body.docvalue_fields,fields);body.script_fields=_lodash.default.pick(body.script_fields,fields);var remainingFields=_lodash.default.difference(fields,_lodash.default.keys(body.script_fields));body.stored_fields=remainingFields;_lodash.default.set(body,"_source.includes",remainingFields)}var esQueryConfigs=(0,_common.getEsQueryConfig)((0,_services.getUiSettings)());body.query=(0,_common.buildEsQuery)(index,query,filters,esQueryConfigs);if(highlightAll&&body.query){body.highlight=(0,_field_formats.getHighlightRequest)(body.query,(0,_services.getUiSettings)().get("doc_table:highlight"));delete searchRequest.highlightAll}var translateToQuery=function translateToQuery(filter){return filter&&(filter.query||filter)};(function recurse(aggBranch){if(!aggBranch)return;Object.keys(aggBranch).forEach((function(id){var agg=aggBranch[id];if(agg.filters){var aggFilters=agg.filters.filters;Object.keys(aggFilters).forEach((function(filterId){aggFilters[filterId]=translateToQuery(aggFilters[filterId])}))}recurse(agg.aggs||agg.aggregations)}))})(body.aggs||body.aggregations);return searchRequest}}]);return SearchSource}();exports.SearchSource=SearchSource},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={fetchSoon:true,RequestFailure:true};Object.defineProperty(exports,"fetchSoon",{enumerable:true,get:function get(){return _fetch_soon.fetchSoon}});Object.defineProperty(exports,"RequestFailure",{enumerable:true,get:function get(){return _errors.RequestFailure}});var _types=__webpack_require__(574);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _fetch_soon=__webpack_require__(575);var _errors=__webpack_require__(607)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _index_pattern_select=__webpack_require__(581);Object.keys(_index_pattern_select).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_pattern_select[key]}})}))},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.QueryStringInput=exports.QueryStringInputUI=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _react2=__webpack_require__(24);var _lodash=__webpack_require__(41);var _autocomplete=__webpack_require__(113);var _public=__webpack_require__(25);var _fetch_index_patterns=__webpack_require__(582);var _language_switcher=__webpack_require__(583);var _query=__webpack_require__(67);var _=__webpack_require__(93);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var KEY_CODES={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,ESC:27,TAB:9,HOME:36,END:35};var QueryStringInputUI=function(_Component){_inherits(QueryStringInputUI,_Component);function QueryStringInputUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,QueryStringInputUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(QueryStringInputUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isSuggestionsVisible:false,index:null,suggestions:[],suggestionLimit:50,selectionStart:null,selectionEnd:null,indexPatterns:[]});_defineProperty(_assertThisInitialized(_this),"inputRef",null);_defineProperty(_assertThisInitialized(_this),"persistedLog",void 0);_defineProperty(_assertThisInitialized(_this),"abortController",void 0);_defineProperty(_assertThisInitialized(_this),"services",_this.props.kibana.services);_defineProperty(_assertThisInitialized(_this),"componentIsUnmounting",false);_defineProperty(_assertThisInitialized(_this),"getQueryString",(function(){return(0,_query.toUser)(_this.props.query.query)}));_defineProperty(_assertThisInitialized(_this),"fetchIndexPatterns",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var stringPatterns,objectPatterns,objectPatternsFromStrings;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:stringPatterns=_this.props.indexPatterns.filter((function(indexPattern){return typeof indexPattern==="string"}));objectPatterns=_this.props.indexPatterns.filter((function(indexPattern){return typeof indexPattern!=="string"}));_context.next=4;return(0,_fetch_index_patterns.fetchIndexPatterns)(_this.services.savedObjects.client,stringPatterns,_this.services.uiSettings);case 4:objectPatternsFromStrings=_context.sent;_this.setState({indexPatterns:[].concat(_toConsumableArray(objectPatterns),_toConsumableArray(objectPatternsFromStrings))});case 6:case"end":return _context.stop()}}}),_callee)}))));_defineProperty(_assertThisInitialized(_this),"getSuggestions",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var language,queryString,recentSearchSuggestions,hasQuerySuggestions,indexPatterns,_this$inputRef,selectionStart,selectionEnd,suggestions;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(_this.inputRef){_context2.next=2;break}return _context2.abrupt("return");case 2:language=_this.props.query.language;queryString=_this.getQueryString();recentSearchSuggestions=_this.getRecentSearchSuggestions(queryString);hasQuerySuggestions=_this.services.data.autocomplete.hasQuerySuggestions(language);if(!(!hasQuerySuggestions||!Array.isArray(_this.state.indexPatterns)||(0,_lodash.compact)(_this.state.indexPatterns).length===0)){_context2.next=8;break}return _context2.abrupt("return",recentSearchSuggestions);case 8:indexPatterns=_this.state.indexPatterns;_this$inputRef=_this.inputRef,selectionStart=_this$inputRef.selectionStart,selectionEnd=_this$inputRef.selectionEnd;if(!(selectionStart===null||selectionEnd===null)){_context2.next=12;break}return _context2.abrupt("return");case 12:_context2.prev=12;if(_this.abortController)_this.abortController.abort();_this.abortController=new AbortController;_context2.next=17;return _this.services.data.autocomplete.getQuerySuggestions({language:language,indexPatterns:indexPatterns,query:queryString,selectionStart:selectionStart,selectionEnd:selectionEnd,signal:_this.abortController.signal});case 17:_context2.t0=_context2.sent;if(_context2.t0){_context2.next=20;break}_context2.t0=[];case 20:suggestions=_context2.t0;return _context2.abrupt("return",[].concat(_toConsumableArray(suggestions),_toConsumableArray(recentSearchSuggestions)));case 24:_context2.prev=24;_context2.t1=_context2["catch"](12);if(!(_context2.t1.message==="The user aborted a request.")){_context2.next=28;break}return _context2.abrupt("return");case 28:throw _context2.t1;case 29:case"end":return _context2.stop()}}}),_callee2,null,[[12,24]])}))));_defineProperty(_assertThisInitialized(_this),"getRecentSearchSuggestions",(function(query){if(!_this.persistedLog){return[]}var recentSearches=_this.persistedLog.get();var matchingRecentSearches=recentSearches.filter((function(recentQuery){var recentQueryString=_typeof(recentQuery)==="object"?(0,_query.toUser)(recentQuery):recentQuery;return recentQueryString.includes(query)}));return matchingRecentSearches.map((function(recentSearch){var text=(0,_query.toUser)(recentSearch);var start=0;var end=query.length;return{type:_autocomplete.QuerySuggestionTypes.RecentSearch,text:text,start:start,end:end}}))}));_defineProperty(_assertThisInitialized(_this),"updateSuggestions",(0,_lodash.debounce)(_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var suggestions;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.getSuggestions();case 2:_context3.t0=_context3.sent;if(_context3.t0){_context3.next=5;break}_context3.t0=[];case 5:suggestions=_context3.t0;if(!_this.componentIsUnmounting){_this.setState({suggestions:suggestions})}case 7:case"end":return _context3.stop()}}}),_callee3)}))),100));_defineProperty(_assertThisInitialized(_this),"onSubmit",(function(query){if(_this.props.onSubmit){if(_this.persistedLog){_this.persistedLog.add(query.query)}_this.props.onSubmit({query:(0,_query.fromUser)(query.query),language:query.language})}}));_defineProperty(_assertThisInitialized(_this),"onChange",(function(query){_this.updateSuggestions();if(_this.props.onChange){_this.props.onChange({query:(0,_query.fromUser)(query.query),language:query.language})}}));_defineProperty(_assertThisInitialized(_this),"onQueryStringChange",(function(value){_this.setState({isSuggestionsVisible:true,index:null,suggestionLimit:50});_this.onChange({query:value,language:_this.props.query.language})}));_defineProperty(_assertThisInitialized(_this),"onInputChange",(function(event){_this.onQueryStringChange(event.target.value)}));_defineProperty(_assertThisInitialized(_this),"onClickInput",(function(event){if(event.target instanceof HTMLInputElement){_this.onQueryStringChange(event.target.value)}}));_defineProperty(_assertThisInitialized(_this),"onKeyUp",(function(event){if([KEY_CODES.LEFT,KEY_CODES.RIGHT,KEY_CODES.HOME,KEY_CODES.END].includes(event.keyCode)){_this.setState({isSuggestionsVisible:true});if(event.target instanceof HTMLInputElement){_this.onQueryStringChange(event.target.value)}}}));_defineProperty(_assertThisInitialized(_this),"onKeyDown",(function(event){if(event.target instanceof HTMLInputElement){var _this$state=_this.state,isSuggestionsVisible=_this$state.isSuggestionsVisible,index=_this$state.index;var preventDefault=event.preventDefault.bind(event);var target=event.target,key=event.key,metaKey=event.metaKey;var value=target.value,selectionStart=target.selectionStart,selectionEnd=target.selectionEnd;var updateQuery=function updateQuery(query,newSelectionStart,newSelectionEnd){_this.onQueryStringChange(query);_this.setState({selectionStart:newSelectionStart,selectionEnd:newSelectionEnd})};switch(event.keyCode){case KEY_CODES.DOWN:event.preventDefault();if(isSuggestionsVisible&&index!==null){_this.incrementIndex(index)}else{_this.setState({isSuggestionsVisible:true,index:0})}break;case KEY_CODES.UP:event.preventDefault();if(isSuggestionsVisible&&index!==null){_this.decrementIndex(index)}break;case KEY_CODES.ENTER:if(!_this.props.bubbleSubmitEvent){event.preventDefault()}if(isSuggestionsVisible&&index!==null&&_this.state.suggestions[index]){event.preventDefault();_this.selectSuggestion(_this.state.suggestions[index])}else{_this.onSubmit(_this.props.query);_this.setState({isSuggestionsVisible:false})}break;case KEY_CODES.ESC:event.preventDefault();_this.setState({isSuggestionsVisible:false,index:null});break;case KEY_CODES.TAB:_this.setState({isSuggestionsVisible:false,index:null});break;default:if(selectionStart!==null&&selectionEnd!==null){(0,_query.matchPairs)({value:value,selectionStart:selectionStart,selectionEnd:selectionEnd,key:key,metaKey:metaKey,updateQuery:updateQuery,preventDefault:preventDefault})}break}}}));_defineProperty(_assertThisInitialized(_this),"selectSuggestion",(function(suggestion){if(!_this.inputRef){return}var type=suggestion.type,text=suggestion.text,start=suggestion.start,end=suggestion.end,cursorIndex=suggestion.cursorIndex;_this.handleNestedFieldSyntaxNotification(suggestion);var query=_this.getQueryString();var _this$inputRef2=_this.inputRef,selectionStart=_this$inputRef2.selectionStart,selectionEnd=_this$inputRef2.selectionEnd;if(selectionStart===null||selectionEnd===null){return}var value=query.substr(0,selectionStart)+query.substr(selectionEnd);var newQueryString=value.substr(0,start)+text+value.substr(end);_this.onQueryStringChange(newQueryString);_this.setState({selectionStart:start+(cursorIndex?cursorIndex:text.length),selectionEnd:start+(cursorIndex?cursorIndex:text.length)});if(type===_autocomplete.QuerySuggestionTypes.RecentSearch){_this.setState({isSuggestionsVisible:false,index:null});_this.onSubmit({query:newQueryString,language:_this.props.query.language})}}));_defineProperty(_assertThisInitialized(_this),"handleNestedFieldSyntaxNotification",(function(suggestion){if("field"in suggestion&&suggestion.field.subType&&suggestion.field.subType.nested&&!_this.services.storage.get("kibana.KQLNestedQuerySyntaxInfoOptOut")){var _this$services=_this.services,notifications=_this$services.notifications,docLinks=_this$services.docLinks;var onKQLNestedQuerySyntaxInfoOptOut=function onKQLNestedQuerySyntaxInfoOptOut(toast){if(!_this.services.storage)return;_this.services.storage.set("kibana.KQLNestedQuerySyntaxInfoOptOut",true);notifications.toasts.remove(toast)};if(notifications&&docLinks){var toast=notifications.toasts.add({title:_i18n.i18n.translate("data.query.queryBar.KQLNestedQuerySyntaxInfoTitle",{defaultMessage:"KQL nested query syntax"}),text:(0,_public.toMountPoint)(_react.default.createElement("div",null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.KQLNestedQuerySyntaxInfoText",defaultMessage:"It looks like you're querying on a nested field. You can construct KQL syntax for nested queries in different ways, depending on the results you want. Learn more in our {link}.",values:{link:_react.default.createElement(_eui.EuiLink,{href:docLinks.links.query.kueryQuerySyntax,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.KQLNestedQuerySyntaxInfoDocLinkText",defaultMessage:"docs"}))}})),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",onClick:function onClick(){return onKQLNestedQuerySyntaxInfoOptOut(toast)}},_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.KQLNestedQuerySyntaxInfoOptOutText",defaultMessage:"Don't show again"}))))))})}}}));_defineProperty(_assertThisInitialized(_this),"increaseLimit",(function(){_this.setState({suggestionLimit:_this.state.suggestionLimit+50})}));_defineProperty(_assertThisInitialized(_this),"incrementIndex",(function(currentIndex){var nextIndex=currentIndex+1;if(currentIndex===null||nextIndex>=_this.state.suggestions.length){nextIndex=0}_this.setState({index:nextIndex})}));_defineProperty(_assertThisInitialized(_this),"decrementIndex",(function(currentIndex){var previousIndex=currentIndex-1;if(previousIndex<0){_this.setState({index:_this.state.suggestions.length-1})}else{_this.setState({index:previousIndex})}}));_defineProperty(_assertThisInitialized(_this),"onSelectLanguage",(function(language){_this.services.http.post("/api/kibana/kql_opt_in_telemetry",{body:JSON.stringify({opt_in:language==="kuery"})});_this.services.storage.set("kibana.userQueryLanguage",language);var newQuery={query:"",language:language};_this.onChange(newQuery);_this.onSubmit(newQuery)}));_defineProperty(_assertThisInitialized(_this),"onOutsideClick",(function(){if(_this.state.isSuggestionsVisible){_this.setState({isSuggestionsVisible:false,index:null})}}));_defineProperty(_assertThisInitialized(_this),"onClickSuggestion",(function(suggestion){if(!_this.inputRef){return}_this.selectSuggestion(suggestion);_this.inputRef.focus()}));_defineProperty(_assertThisInitialized(_this),"initPersistedLog",(function(){var _this$services2=_this.services,uiSettings=_this$services2.uiSettings,storage=_this$services2.storage,appName=_this$services2.appName;_this.persistedLog=_this.props.persistedLog?_this.props.persistedLog:(0,_query.getQueryLog)(uiSettings,storage,appName,_this.props.query.language)}));_defineProperty(_assertThisInitialized(_this),"onMouseEnterSuggestion",(function(index){_this.setState({index:index})}));return _this}_createClass(QueryStringInputUI,[{key:"componentDidMount",value:function componentDidMount(){var parsedQuery=(0,_query.fromUser)((0,_query.toUser)(this.props.query.query));if(!(0,_lodash.isEqual)(this.props.query.query,parsedQuery)){this.onChange(_objectSpread({},this.props.query,{query:parsedQuery}))}this.initPersistedLog();this.fetchIndexPatterns().then(this.updateSuggestions)}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var parsedQuery=(0,_query.fromUser)((0,_query.toUser)(this.props.query.query));if(!(0,_lodash.isEqual)(this.props.query.query,parsedQuery)){this.onChange(_objectSpread({},this.props.query,{query:parsedQuery}))}this.initPersistedLog();if(!(0,_lodash.isEqual)(prevProps.indexPatterns,this.props.indexPatterns)){this.fetchIndexPatterns().then(this.updateSuggestions)}else if(!(0,_lodash.isEqual)(prevProps.query,this.props.query)){this.updateSuggestions()}if(this.state.selectionStart!==null&&this.state.selectionEnd!==null){if(this.inputRef){this.inputRef.setSelectionRange(this.state.selectionStart,this.state.selectionEnd)}this.setState({selectionStart:null,selectionEnd:null})}}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.updateSuggestions.cancel();this.componentIsUnmounting=true}},{key:"render",value:function render(){var _this2=this;var isSuggestionsVisible=this.state.isSuggestionsVisible&&{"aria-controls":"kbnTypeahead__items","aria-owns":"kbnTypeahead__items"};var ariaCombobox=_objectSpread({},isSuggestionsVisible,{role:"combobox"});return _react.default.createElement(_eui.EuiOutsideClickDetector,{onOutsideClick:this.onOutsideClick},_react.default.createElement("div",_extends({},ariaCombobox,{style:{position:"relative"},"aria-label":_i18n.i18n.translate("data.query.queryBar.comboboxAriaLabel",{defaultMessage:"Search and filter the {pageType} page",values:{pageType:this.services.appName}}),"aria-haspopup":"true","aria-expanded":this.state.isSuggestionsVisible}),_react.default.createElement("div",{role:"search"},_react.default.createElement("div",{className:"kuiLocalSearchAssistedInput"},_react.default.createElement(_eui.EuiFieldText,{placeholder:this.props.placeholder||_i18n.i18n.translate("data.query.queryBar.searchInputPlaceholder",{defaultMessage:"Search"}),value:this.getQueryString(),onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onChange:this.onInputChange,onClick:this.onClickInput,fullWidth:true,autoFocus:!this.props.disableAutoFocus,inputRef:function inputRef(node){if(node){_this2.inputRef=node}},autoComplete:"off",spellCheck:false,"aria-label":_i18n.i18n.translate("data.query.queryBar.searchInputAriaLabel",{defaultMessage:"Start typing to search and filter the {pageType} page",values:{pageType:this.services.appName}}),type:"text","aria-autocomplete":"list","aria-controls":this.state.isSuggestionsVisible?"kbnTypeahead__items":undefined,"aria-activedescendant":this.state.isSuggestionsVisible&&typeof this.state.index==="number"?"suggestion-".concat(this.state.index):undefined,role:"textbox",prepend:this.props.prepend,append:_react.default.createElement(_language_switcher.QueryLanguageSwitcher,{language:this.props.query.language,anchorPosition:this.props.languageSwitcherPopoverAnchorPosition,onSelectLanguage:this.onSelectLanguage}),"data-test-subj":this.props.dataTestSubj||"queryInput"}))),_react.default.createElement(_.SuggestionsComponent,{show:this.state.isSuggestionsVisible,suggestions:this.state.suggestions.slice(0,this.state.suggestionLimit),index:this.state.index,onClick:this.onClickSuggestion,onMouseEnter:this.onMouseEnterSuggestion,loadMore:this.increaseLimit})))}}]);return QueryStringInputUI}(_react.Component);exports.QueryStringInputUI=QueryStringInputUI;var QueryStringInput=(0,_public.withKibana)(QueryStringInputUI);exports.QueryStringInput=QueryStringInput},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SearchBar=void 0;var _lodash=__webpack_require__(41);var _react=__webpack_require__(24);var _classnames=_interopRequireDefault(__webpack_require__(58));var _react2=_interopRequireWildcard(__webpack_require__(22));var _resizeObserverPolyfill=_interopRequireDefault(__webpack_require__(585));var _public=__webpack_require__(25);var _query_bar_top_row=__webpack_require__(586);var _=__webpack_require__(93);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchBarUI=function(_Component){_inherits(SearchBarUI,_Component);function SearchBarUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,SearchBarUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SearchBarUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"services",_this.props.kibana.services);_defineProperty(_assertThisInitialized(_this),"savedQueryService",_this.services.data.query.savedQueries);_defineProperty(_assertThisInitialized(_this),"filterBarRef",null);_defineProperty(_assertThisInitialized(_this),"filterBarWrapperRef",null);_defineProperty(_assertThisInitialized(_this),"state",{isFiltersVisible:true,showSaveQueryModal:false,showSaveNewQueryModal:false,showSavedQueryPopover:false,currentProps:_this.props,query:_this.props.query?_objectSpread({},_this.props.query):undefined,dateRangeFrom:(0,_lodash.get)(_this.props,"dateRangeFrom","now-15m"),dateRangeTo:(0,_lodash.get)(_this.props,"dateRangeTo","now")});_defineProperty(_assertThisInitialized(_this),"isDirty",(function(){if(!_this.props.showDatePicker&&_this.state.query&&_this.props.query){return _this.state.query.query!==_this.props.query.query}return _this.state.query&&_this.props.query&&_this.state.query.query!==_this.props.query.query||_this.state.dateRangeFrom!==_this.props.dateRangeFrom||_this.state.dateRangeTo!==_this.props.dateRangeTo}));_defineProperty(_assertThisInitialized(_this),"setFilterBarHeight",(function(){requestAnimationFrame((function(){var height=_this.filterBarRef&&_this.state.isFiltersVisible?_this.filterBarRef.clientHeight:0;if(_this.filterBarWrapperRef){_this.filterBarWrapperRef.setAttribute("style","height: ".concat(height,"px"))}}))}));_defineProperty(_assertThisInitialized(_this),"ro",new _resizeObserverPolyfill.default(_this.setFilterBarHeight));_defineProperty(_assertThisInitialized(_this),"onSave",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedQueryMeta){var saveAsNew,savedQueryAttributes,response,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:saveAsNew=_args.length>1&&_args[1]!==undefined?_args[1]:false;if(_this.state.query){_context.next=3;break}return _context.abrupt("return");case 3:savedQueryAttributes={title:savedQueryMeta.title,description:savedQueryMeta.description,query:_this.state.query};if(savedQueryMeta.shouldIncludeFilters){savedQueryAttributes.filters=_this.props.filters}if(savedQueryMeta.shouldIncludeTimefilter&&_this.state.dateRangeTo!==undefined&&_this.state.dateRangeFrom!==undefined&&_this.props.refreshInterval!==undefined&&_this.props.isRefreshPaused!==undefined){savedQueryAttributes.timefilter={from:_this.state.dateRangeFrom,to:_this.state.dateRangeTo,refreshInterval:{value:_this.props.refreshInterval,pause:_this.props.isRefreshPaused}}}_context.prev=6;if(!(_this.props.savedQuery&&!saveAsNew)){_context.next=13;break}_context.next=10;return _this.savedQueryService.saveQuery(savedQueryAttributes,{overwrite:true});case 10:response=_context.sent;_context.next=16;break;case 13:_context.next=15;return _this.savedQueryService.saveQuery(savedQueryAttributes);case 15:response=_context.sent;case 16:_this.services.notifications.toasts.addSuccess('Your query "'.concat(response.attributes.title,'" was saved'));_this.setState({showSaveQueryModal:false,showSaveNewQueryModal:false});if(_this.props.onSaved){_this.props.onSaved(response)}_context.next=25;break;case 21:_context.prev=21;_context.t0=_context["catch"](6);_this.services.notifications.toasts.addDanger("An error occured while saving your query: ".concat(_context.t0.message));throw _context.t0;case 25:case"end":return _context.stop()}}}),_callee,null,[[6,21]])})));return function(_x){return _ref.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"onInitiateSave",(function(){_this.setState({showSaveQueryModal:true})}));_defineProperty(_assertThisInitialized(_this),"onInitiateSaveNew",(function(){_this.setState({showSaveNewQueryModal:true})}));_defineProperty(_assertThisInitialized(_this),"onQueryBarChange",(function(queryAndDateRange){_this.setState({query:queryAndDateRange.query,dateRangeFrom:queryAndDateRange.dateRange.from,dateRangeTo:queryAndDateRange.dateRange.to});if(_this.props.onQueryChange){_this.props.onQueryChange(queryAndDateRange)}}));_defineProperty(_assertThisInitialized(_this),"onQueryBarSubmit",(function(queryAndDateRange){_this.setState({query:queryAndDateRange.query,dateRangeFrom:queryAndDateRange.dateRange&&queryAndDateRange.dateRange.from||_this.state.dateRangeFrom,dateRangeTo:queryAndDateRange.dateRange&&queryAndDateRange.dateRange.to||_this.state.dateRangeTo},(function(){if(_this.props.onQuerySubmit){_this.props.onQuerySubmit({query:_this.state.query,dateRange:{from:_this.state.dateRangeFrom,to:_this.state.dateRangeTo}})}}))}));_defineProperty(_assertThisInitialized(_this),"onLoadSavedQuery",(function(savedQuery){var dateRangeFrom=(0,_lodash.get)(savedQuery,"attributes.timefilter.from",_this.state.dateRangeFrom);var dateRangeTo=(0,_lodash.get)(savedQuery,"attributes.timefilter.to",_this.state.dateRangeTo);_this.setState({query:savedQuery.attributes.query,dateRangeFrom:dateRangeFrom,dateRangeTo:dateRangeTo});if(_this.props.onSavedQueryUpdated){_this.props.onSavedQueryUpdated(savedQuery)}}));return _this}_createClass(SearchBarUI,[{key:"shouldRenderQueryBar",value:function shouldRenderQueryBar(){var showDatePicker=this.props.showDatePicker||this.props.showAutoRefreshOnly;var showQueryInput=this.props.showQueryInput&&this.props.indexPatterns&&this.state.query;return this.props.showQueryBar&&(showDatePicker||showQueryInput)}},{key:"shouldRenderFilterBar",value:function shouldRenderFilterBar(){return this.props.showFilterBar&&this.props.filters&&this.props.indexPatterns&&(0,_lodash.compact)(this.props.indexPatterns).length>0}},{key:"shouldRenderTimeFilterInSavedQueryForm",value:function shouldRenderTimeFilterInSavedQueryForm(){var _this$props=this.props,dateRangeFrom=_this$props.dateRangeFrom,dateRangeTo=_this$props.dateRangeTo,showDatePicker=_this$props.showDatePicker;return showDatePicker||!showDatePicker&&dateRangeFrom!==undefined&&dateRangeTo!==undefined}},{key:"componentDidMount",value:function componentDidMount(){if(this.filterBarRef){this.setFilterBarHeight();this.ro.observe(this.filterBarRef)}}},{key:"componentDidUpdate",value:function componentDidUpdate(){if(this.filterBarRef){this.setFilterBarHeight();this.ro.unobserve(this.filterBarRef)}}},{key:"render",value:function render(){var _this2=this;var savedQueryManagement=this.state.query&&this.props.onClearSavedQuery&&_react2.default.createElement(_.SavedQueryManagementComponent,{showSaveQuery:this.props.showSaveQuery,loadedSavedQuery:this.props.savedQuery,onSave:this.onInitiateSave,onSaveAsNew:this.onInitiateSaveNew,onLoad:this.onLoadSavedQuery,savedQueryService:this.savedQueryService,onClearSavedQuery:this.props.onClearSavedQuery});var queryBar;if(this.shouldRenderQueryBar()){queryBar=_react2.default.createElement(_query_bar_top_row.QueryBarTopRow,{timeHistory:this.props.timeHistory,query:this.state.query,screenTitle:this.props.screenTitle,onSubmit:this.onQueryBarSubmit,indexPatterns:this.props.indexPatterns,isLoading:this.props.isLoading,prepend:this.props.showFilterBar?savedQueryManagement:undefined,showDatePicker:this.props.showDatePicker,dateRangeFrom:this.state.dateRangeFrom,dateRangeTo:this.state.dateRangeTo,isRefreshPaused:this.props.isRefreshPaused,refreshInterval:this.props.refreshInterval,showAutoRefreshOnly:this.props.showAutoRefreshOnly,showQueryInput:this.props.showQueryInput,onRefresh:this.props.onRefresh,onRefreshChange:this.props.onRefreshChange,onChange:this.onQueryBarChange,isDirty:this.isDirty(),customSubmitButton:this.props.customSubmitButton?this.props.customSubmitButton:undefined,dataTestSubj:this.props.dataTestSubj})}var filterBar;if(this.shouldRenderFilterBar()){var filterGroupClasses=(0,_classnames.default)("globalFilterGroup__wrapper",{"globalFilterGroup__wrapper-isVisible":this.state.isFiltersVisible});filterBar=_react2.default.createElement("div",{id:"GlobalFilterGroup",ref:function ref(node){_this2.filterBarWrapperRef=node},className:filterGroupClasses},_react2.default.createElement("div",{ref:function ref(node){_this2.filterBarRef=node}},_react2.default.createElement(_.FilterBar,{className:"globalFilterGroup__filterBar",filters:this.props.filters,onFiltersUpdated:this.props.onFiltersUpdated,indexPatterns:this.props.indexPatterns})))}return _react2.default.createElement("div",{className:"globalQueryBar"},queryBar,filterBar,this.state.showSaveQueryModal?_react2.default.createElement(_.SaveQueryForm,{savedQuery:this.props.savedQuery?this.props.savedQuery.attributes:undefined,savedQueryService:this.savedQueryService,onSave:this.onSave,onClose:function onClose(){return _this2.setState({showSaveQueryModal:false})},showFilterOption:this.props.showFilterBar,showTimeFilterOption:this.shouldRenderTimeFilterInSavedQueryForm()}):null,this.state.showSaveNewQueryModal?_react2.default.createElement(_.SaveQueryForm,{savedQueryService:this.savedQueryService,onSave:function onSave(savedQueryMeta){return _this2.onSave(savedQueryMeta,true)},onClose:function onClose(){return _this2.setState({showSaveNewQueryModal:false})},showFilterOption:this.props.showFilterBar,showTimeFilterOption:this.shouldRenderTimeFilterInSavedQueryForm()}):null)}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){if((0,_lodash.isEqual)(prevState.currentProps,nextProps)){return null}var nextQuery=null;if(nextProps.query&&nextProps.query.query!==(0,_lodash.get)(prevState,"currentProps.query.query")){nextQuery={query:nextProps.query.query,language:nextProps.query.language}}else if(nextProps.query&&prevState.query&&nextProps.query.language!==prevState.query.language){nextQuery={query:"",language:nextProps.query.language}}var nextDateRange=null;if(nextProps.dateRangeFrom!==(0,_lodash.get)(prevState,"currentProps.dateRangeFrom")||nextProps.dateRangeTo!==(0,_lodash.get)(prevState,"currentProps.dateRangeTo")){nextDateRange={dateRangeFrom:nextProps.dateRangeFrom,dateRangeTo:nextProps.dateRangeTo}}var nextState={currentProps:nextProps};if(nextQuery){nextState.query=nextQuery}if(nextDateRange){nextState.dateRangeFrom=nextDateRange.dateRangeFrom;nextState.dateRangeTo=nextDateRange.dateRangeTo}return nextState}}]);return SearchBarUI}(_react2.Component);_defineProperty(SearchBarUI,"defaultProps",{showQueryBar:true,showFilterBar:true,showDatePicker:true,showAutoRefreshOnly:false});var SearchBar=(0,_react.injectI18n)((0,_public.withKibana)(SearchBarUI));exports.SearchBar=SearchBar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSearchBar=createSearchBar;var _react=_interopRequireWildcard(__webpack_require__(22));var _public=__webpack_require__(25);var _search_bar=__webpack_require__(215);var _use_filter_manager=__webpack_require__(587);var _use_timefilter=__webpack_require__(588);var _use_saved_query=__webpack_require__(589);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var defaultFiltersUpdated=function defaultFiltersUpdated(queryService){return function(filters){queryService.filterManager.setFilters(filters)}};var defaultOnRefreshChange=function defaultOnRefreshChange(queryService){var timefilter=queryService.timefilter.timefilter;return function(options){timefilter.setRefreshInterval({value:options.refreshInterval,pause:options.isPaused})}};var defaultOnQuerySubmit=function defaultOnQuerySubmit(props,queryService,currentQuery,setQueryStringState){if(!props.useDefaultBehaviors)return props.onQuerySubmit;var timefilter=queryService.timefilter.timefilter;return function(payload){var isUpdate=!_.isEqual(timefilter.getTime(),payload.dateRange)||!_.isEqual(payload.query,currentQuery);if(isUpdate){timefilter.setTime(payload.dateRange);setQueryStringState(payload.query)}else{if(props.onQuerySubmit)props.onQuerySubmit({dateRange:timefilter.getTime(),query:currentQuery},false)}}};var defaultOnClearSavedQuery=function defaultOnClearSavedQuery(props,clearSavedQuery){if(!props.useDefaultBehaviors)return props.onClearSavedQuery;return function(){clearSavedQuery();if(props.onSavedQueryIdChange)props.onSavedQueryIdChange()}};var defaultOnSavedQueryUpdated=function defaultOnSavedQueryUpdated(props,setSavedQuery){if(!props.useDefaultBehaviors)return props.onSavedQueryUpdated;return function(savedQuery){setSavedQuery(savedQuery);if(props.onSavedQueryIdChange)props.onSavedQueryIdChange(savedQuery.id)}};var overrideDefaultBehaviors=function overrideDefaultBehaviors(props){return props.useDefaultBehaviors?{}:props};function createSearchBar(_ref){var core=_ref.core,storage=_ref.storage,data=_ref.data;return function(props){var useDefaultBehaviors=props.useDefaultBehaviors;var queryRef=(0,_react.useRef)(props.query);var onQuerySubmitRef=(0,_react.useRef)(props.onQuerySubmit);var defaultQuery={query:"",language:storage.get("kibana.userQueryLanguage")||core.uiSettings.get("search:queryLanguage")};var _useState=(0,_react.useState)(props.query||defaultQuery),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];(0,_react.useEffect)((function(){if(props.query!==queryRef.current){queryRef.current=props.query;setQuery(props.query||defaultQuery)}}),[defaultQuery,props.query]);(0,_react.useEffect)((function(){if(props.onQuerySubmit!==onQuerySubmitRef.current){onQuerySubmitRef.current=props.onQuerySubmit}}),[props.onQuerySubmit]);var _useFilterManager=(0,_use_filter_manager.useFilterManager)({filters:props.filters,filterManager:data.query.filterManager}),filters=_useFilterManager.filters;var _useTimefilter=(0,_use_timefilter.useTimefilter)({dateRangeFrom:props.dateRangeFrom,dateRangeTo:props.dateRangeTo,refreshInterval:props.refreshInterval,isRefreshPaused:props.isRefreshPaused,timefilter:data.query.timefilter.timefilter}),timeRange=_useTimefilter.timeRange,refreshInterval=_useTimefilter.refreshInterval;var _useSavedQuery=(0,_use_saved_query.useSavedQuery)({queryService:data.query,setQuery:setQuery,savedQueryId:props.savedQueryId,notifications:core.notifications,defaultLanguage:defaultQuery.language}),savedQuery=_useSavedQuery.savedQuery,setSavedQuery=_useSavedQuery.setSavedQuery,clearSavedQuery=_useSavedQuery.clearSavedQuery;(0,_react.useEffect)((function(){if(!useDefaultBehaviors||!onQuerySubmitRef.current)return;onQuerySubmitRef.current({dateRange:timeRange,query:query},true)}),[query,timeRange,useDefaultBehaviors]);return _react.default.createElement(_public.KibanaContextProvider,{services:_objectSpread({appName:props.appName,data:data,storage:storage},core)},_react.default.createElement(_search_bar.SearchBar,_extends({showAutoRefreshOnly:props.showAutoRefreshOnly,showDatePicker:props.showDatePicker,showFilterBar:props.showFilterBar,showQueryBar:props.showQueryBar,showQueryInput:props.showQueryInput,showSaveQuery:props.showSaveQuery,screenTitle:props.screenTitle,indexPatterns:props.indexPatterns,timeHistory:data.query.timefilter.history,dateRangeFrom:timeRange.from,dateRangeTo:timeRange.to,refreshInterval:refreshInterval.value,isRefreshPaused:refreshInterval.pause,filters:filters,query:query,onFiltersUpdated:defaultFiltersUpdated(data.query),onRefreshChange:defaultOnRefreshChange(data.query),savedQuery:savedQuery,onQuerySubmit:defaultOnQuerySubmit(props,data.query,query,setQuery),onClearSavedQuery:defaultOnClearSavedQuery(props,clearSavedQuery),onSavedQueryUpdated:defaultOnSavedQueryUpdated(props,setSavedQuery),onSaved:defaultOnSavedQueryUpdated(props,setSavedQuery)},overrideDefaultBehaviors(props))))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFailurePropsForSummary=getFailurePropsForSummary;exports.getFailureSummaryText=getFailureSummaryText;exports.getFailureSummaryDetailsText=getFailureSummaryDetailsText;exports.ShardFailureDescriptionHeader=ShardFailureDescriptionHeader;var _react=_interopRequireDefault(__webpack_require__(22));var _eui=__webpack_require__(23);var _i18n=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getFailurePropsForSummary(failure){var failureDetailProps=["shard","index","node"];return failureDetailProps.filter((function(key){return typeof failure[key]==="number"||typeof failure[key]==="string"})).map((function(key){return{key:key,value:String(failure[key])}}))}function getFailureSummaryText(failure,failureDetails){var failureName=failure.reason.type;var displayDetails=typeof failureDetails==="string"?failureDetails:getFailureSummaryDetailsText(failure);return _i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.failureHeader",{defaultMessage:"{failureName} at {failureDetails}",values:{failureName:failureName,failureDetails:displayDetails},description:'Summary of shard failures, e.g. "IllegalArgumentException at shard 0 node xyz"'})}function getFailureSummaryDetailsText(failure){return getFailurePropsForSummary(failure).map((function(_ref){var key=_ref.key,value=_ref.value;return"".concat(key,": ").concat(value)})).join(", ")}function ShardFailureDescriptionHeader(props){var failureDetails=getFailurePropsForSummary(props).map((function(kv){return _react.default.createElement("span",{className:"shardFailureModal__keyValueTitle",key:kv.key},_react.default.createElement(_eui.EuiCode,null,kv.key)," ",kv.value)}));return _react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h2",null,getFailureSummaryText(props,""),failureDetails))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SearchError",{enumerable:true,get:function get(){return _search_error.SearchError}});Object.defineProperty(exports,"getSearchErrorType",{enumerable:true,get:function get(){return _search_error.getSearchErrorType}});Object.defineProperty(exports,"SearchStrategyProvider",{enumerable:true,get:function get(){return _types.SearchStrategyProvider}});Object.defineProperty(exports,"SearchStrategySearchParams",{enumerable:true,get:function get(){return _types.SearchStrategySearchParams}});Object.defineProperty(exports,"defaultSearchStrategy",{enumerable:true,get:function get(){return _default_search_strategy.defaultSearchStrategy}});var _search_error=__webpack_require__(603);var _types=__webpack_require__(604);var _default_search_strategy=__webpack_require__(605)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"tabifyAggResponse",{enumerable:true,get:function get(){return _tabify.tabifyAggResponse}});Object.defineProperty(exports,"tabifyGetColumns",{enumerable:true,get:function get(){return _get_columns.tabifyGetColumns}});Object.defineProperty(exports,"TabbedTable",{enumerable:true,get:function get(){return _types.TabbedTable}});Object.defineProperty(exports,"TabbedAggRow",{enumerable:true,get:function get(){return _types.TabbedAggRow}});Object.defineProperty(exports,"TabbedAggColumn",{enumerable:true,get:function get(){return _types.TabbedAggColumn}});var _tabify=__webpack_require__(609);var _get_columns=__webpack_require__(220);var _types=__webpack_require__(612)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tabifyGetColumns=tabifyGetColumns;var _lodash=__webpack_require__(41);var getColumn=function getColumn(agg,i){return{aggConfig:agg,id:"col-".concat(i,"-").concat(agg.id),name:agg.makeLabel()}};function tabifyGetColumns(aggs,minimalColumns){if(minimalColumns){return aggs.map((function(agg,i){return getColumn(agg,i)}))}var columns=[];var grouped=(0,_lodash.groupBy)(aggs,(function(agg){return agg.type.type}));if(!grouped.buckets){return grouped.metrics.map((function(agg,i){return getColumn(agg,i)}))}var columnIndex=0;grouped.buckets.forEach((function(agg){columns.push(getColumn(agg,columnIndex++));grouped.metrics.forEach((function(metric){columns.push(getColumn(metric,columnIndex++))}))}));return columns}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _calculate_auto_time_expression=__webpack_require__(657);Object.keys(_calculate_auto_time_expression).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _calculate_auto_time_expression[key]}})}));var _to_angular_json=__webpack_require__(658);Object.keys(_to_angular_json).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _to_angular_json[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _agg=__webpack_require__(194);Object.keys(_agg).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg[key]}})}));var _base=__webpack_require__(62);Object.keys(_base).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _base[key]}})}));var _field=__webpack_require__(195);Object.keys(_field).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _field[key]}})}));var _filter=__webpack_require__(670);Object.keys(_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _filter[key]}})}));var _json=__webpack_require__(198);Object.keys(_json).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _json[key]}})}));var _optioned=__webpack_require__(114);Object.keys(_optioned).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _optioned[key]}})}));var _string=__webpack_require__(197);Object.keys(_string).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _string[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.esSearchStrategyProvider=void 0;var _search2=__webpack_require__(82);var _sync_search_strategy=__webpack_require__(95);var _get_es_preference=__webpack_require__(224);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var esSearchStrategyProvider=function esSearchStrategyProvider(context){var syncStrategyProvider=context.getSearchStrategy(_sync_search_strategy.SYNC_SEARCH_STRATEGY);var _syncStrategyProvider=syncStrategyProvider(context),_search=_syncStrategyProvider.search;return{search:function search(request,options){request.params=_objectSpread({preference:(0,_get_es_preference.getEsPreference)(context.core.uiSettings)},request.params);return _search(_objectSpread({},request,{serverStrategy:_search2.ES_SEARCH_STRATEGY}),options)}}};exports.esSearchStrategyProvider=esSearchStrategyProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEsPreference=getEsPreference;var defaultSessionId="".concat(Date.now());function getEsPreference(uiSettings){var sessionId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:defaultSessionId;var setPreference=uiSettings.get("courier:setRequestPreference");if(setPreference==="sessionId")return"".concat(sessionId);var customPreference=uiSettings.get("courier:customRequestPreference");return setPreference==="custom"?customPreference:undefined}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getEsClient",{enumerable:true,get:function get(){return _get_es_client.getEsClient}});Object.defineProperty(exports,"SearchRequest",{enumerable:true,get:function get(){return _types.SearchRequest}});Object.defineProperty(exports,"SearchResponse",{enumerable:true,get:function get(){return _types.SearchResponse}});Object.defineProperty(exports,"LegacyApiCaller",{enumerable:true,get:function get(){return _types.LegacyApiCaller}});var _get_es_client=__webpack_require__(676);var _types=__webpack_require__(677)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchInterceptor=void 0;var _rxjs=__webpack_require__(28);var _operators=__webpack_require__(31);var _utils=__webpack_require__(74);var _request_timeout_error=__webpack_require__(227);var _long_query_notification=__webpack_require__(678);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchInterceptor=function SearchInterceptor(toasts,application,requestTimeout){var _this=this;_classCallCheck(this,SearchInterceptor);this.toasts=toasts;this.application=application;this.requestTimeout=requestTimeout;_defineProperty(this,"abortController",new AbortController);_defineProperty(this,"pendingCount",0);_defineProperty(this,"pendingCount$",new _rxjs.BehaviorSubject(this.pendingCount));_defineProperty(this,"timeoutSubscriptions",new Set);_defineProperty(this,"longRunningToast",void 0);_defineProperty(this,"getPendingCount$",(function(){return _this.pendingCount$.asObservable()}));_defineProperty(this,"search",(function(search,request,options){return(0,_rxjs.defer)((function(){_this.pendingCount$.next(++_this.pendingCount);var timeoutController=new AbortController;var timeoutSignal=timeoutController.signal;var timeout$=(0,_rxjs.timer)(_this.requestTimeout);var subscription=timeout$.subscribe((function(){return timeoutController.abort()}));_this.timeoutSubscriptions.add(subscription);var timeoutError$=(0,_rxjs.fromEvent)(timeoutSignal,"abort").pipe((0,_operators.mergeMapTo)((0,_rxjs.throwError)(new _request_timeout_error.RequestTimeoutError)));var notificationSubscription=(0,_rxjs.timer)(1e4).subscribe(_this.showToast);var signals=[_this.abortController.signal,timeoutSignal].concat(_toConsumableArray((options===null||options===void 0?void 0:options.signal)?[options.signal]:[]));var combinedSignal=(0,_utils.getCombinedSignal)(signals);return search(request,_objectSpread({},options,{signal:combinedSignal})).pipe((0,_operators.takeUntil)(timeoutError$),(0,_operators.finalize)((function(){_this.pendingCount$.next(--_this.pendingCount);_this.timeoutSubscriptions.delete(subscription);notificationSubscription.unsubscribe()})))}))}));_defineProperty(this,"showToast",(function(){if(_this.longRunningToast)return;_this.longRunningToast=_this.toasts.addInfo({title:"Your query is taking awhile",text:(0,_long_query_notification.getLongQueryNotification)({application:_this.application})},{toastLifeTimeMs:1e6})}));_defineProperty(this,"hideToast",(function(){if(_this.longRunningToast){_this.toasts.remove(_this.longRunningToast);delete _this.longRunningToast}}));this.getPendingCount$().pipe((0,_operators.filter)((function(count){return count===0}))).subscribe(this.hideToast)};exports.SearchInterceptor=SearchInterceptor},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestTimeoutError=void 0;function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var RequestTimeoutError=function(_Error){_inherits(RequestTimeoutError,_Error);function RequestTimeoutError(){var _this;var message=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"Request timed out";_classCallCheck(this,RequestTimeoutError);_this=_possibleConstructorReturn(this,_getPrototypeOf(RequestTimeoutError).call(this,message));_this.message=message;_this.name="RequestTimeoutError";return _this}return RequestTimeoutError}(_wrapNativeSuper(Error));exports.RequestTimeoutError=RequestTimeoutError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _ui_actions_service=__webpack_require__(682);Object.keys(_ui_actions_service).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _ui_actions_service[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TriggerInternal=void 0;var _trigger_contract=__webpack_require__(230);var _context_menu=__webpack_require__(231);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TriggerInternal=function(){function TriggerInternal(service,trigger){_classCallCheck(this,TriggerInternal);this.service=service;this.trigger=trigger;_defineProperty(this,"contract",new _trigger_contract.TriggerContract(this))}_createClass(TriggerInternal,[{key:"execute",value:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee(context){var triggerId,actions;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:triggerId=this.trigger.id;_context.next=3;return this.service.getTriggerCompatibleActions(triggerId,context);case 3:actions=_context.sent;if(actions.length){_context.next=6;break}throw new Error("No compatible actions found to execute for trigger [triggerId = ".concat(triggerId,"]."));case 6:if(!(actions.length===1)){_context.next=10;break}_context.next=9;return this.executeSingleAction(actions[0],context);case 9:return _context.abrupt("return");case 10:_context.next=12;return this.executeMultipleActions(actions,context);case 12:case"end":return _context.stop()}}}),_callee,this)})));function execute(_x){return _execute.apply(this,arguments)}return execute}()},{key:"executeSingleAction",value:function(){var _executeSingleAction=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(action,context){var href;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:href=action.getHref&&action.getHref(context);if(!href){_context2.next=4;break}window.location.href=href;return _context2.abrupt("return");case 4:_context2.next=6;return action.execute(context);case 6:case"end":return _context2.stop()}}}),_callee2)})));function executeSingleAction(_x2,_x3){return _executeSingleAction.apply(this,arguments)}return executeSingleAction}()},{key:"executeMultipleActions",value:function(){var _executeMultipleActions=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(actions,context){var panel,session;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return(0,_context_menu.buildContextMenuForActions)({actions:actions,actionContext:context,closeMenu:function closeMenu(){return session.close()}});case 2:panel=_context3.sent;session=(0,_context_menu.openContextMenu)([panel]);case 4:case"end":return _context3.stop()}}}),_callee3)})));function executeMultipleActions(_x4,_x5){return _executeMultipleActions.apply(this,arguments)}return executeMultipleActions}()}]);return TriggerInternal}();exports.TriggerInternal=TriggerInternal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TriggerContract=void 0;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TriggerContract=function TriggerContract(internal){var _this=this;_classCallCheck(this,TriggerContract);this.internal=internal;_defineProperty(this,"id",void 0);_defineProperty(this,"title",void 0);_defineProperty(this,"description",void 0);_defineProperty(this,"exec",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(context){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.internal.execute(context);case 2:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}());this.id=this.internal.trigger.id;this.title=this.internal.trigger.title;this.description=this.internal.trigger.description};exports.TriggerContract=TriggerContract},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"buildContextMenuForActions",{enumerable:true,get:function get(){return _build_eui_context_menu_panels.buildContextMenuForActions}});Object.defineProperty(exports,"openContextMenu",{enumerable:true,get:function get(){return _open_context_menu.openContextMenu}});var _build_eui_context_menu_panels=__webpack_require__(683);var _open_context_menu=__webpack_require__(684)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"applyFiltersPopover",{enumerable:true,get:function get(){return _apply_filters_popover.applyFiltersPopover}});var _apply_filters_popover=__webpack_require__(696)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFiltersFromEvent=void 0;var _expressions=__webpack_require__(92);var _public=__webpack_require__(59);var _services=__webpack_require__(45);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var getOtherBucketFilterTerms=function getOtherBucketFilterTerms(table,columnIndex,rowIndex){if(rowIndex===-1){return[]}var rows=table.rows.filter((function(row){return table.columns.every((function(column,i){return row[column.id]===table.rows[rowIndex][column.id]||i>=columnIndex}))}));var terms=rows.map((function(row){return row[table.columns[columnIndex].id]}));return _toConsumableArray(new Set(terms.filter((function(term){var notOther=term!=="__other__";var notMissing=term!=="__missing__";return notOther&&notMissing}))))};var createFilter=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(table,columnIndex,rowIndex){var column,aggConfig,filter,value,terms;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!table||!table.columns||!table.columns[columnIndex])){_context.next=2;break}return _context.abrupt("return");case 2:column=table.columns[columnIndex];if(!(!column.meta||!column.meta.indexPatternId)){_context.next=5;break}return _context.abrupt("return");case 5:_context.t0=_expressions.deserializeAggConfig;_context.t1=column.meta.type;_context.t2=column.meta.aggConfigParams?column.meta.aggConfigParams:{};_context.next=10;return(0,_services.getIndexPatterns)().get(column.meta.indexPatternId);case 10:_context.t3=_context.sent;_context.t4={type:_context.t1,aggConfigParams:_context.t2,indexPattern:_context.t3};aggConfig=(0,_context.t0)(_context.t4);filter=[];value=rowIndex>-1?table.rows[rowIndex][column.id]:null;if(!(value===null||value===undefined||!aggConfig.isFilterable())){_context.next=17;break}return _context.abrupt("return");case 17:if(aggConfig.type.name==="terms"&&aggConfig.params.otherBucket){terms=getOtherBucketFilterTerms(table,columnIndex,rowIndex);filter=aggConfig.createFilter(value,{terms:terms})}else{filter=aggConfig.createFilter(value)}if(filter){_context.next=20;break}return _context.abrupt("return");case 20:if(!Array.isArray(filter)){filter=[filter]}return _context.abrupt("return",filter);case 22:case"end":return _context.stop()}}}),_callee)})));return function createFilter(_x,_x2,_x3){return _ref.apply(this,arguments)}}();var createFiltersFromEvent=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(dataPoints,negate){var filters;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:filters=[];_context3.next=3;return Promise.all(dataPoints.filter((function(point){return point})).map(function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(val){var table,column,row,filter;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:table=val.table,column=val.column,row=val.row;_context2.next=3;return createFilter(table,column,row);case 3:_context2.t0=_context2.sent;if(_context2.t0){_context2.next=6;break}_context2.t0=[];case 6:filter=_context2.t0;if(filter){filter.forEach((function(f){if(negate){f=_public.esFilters.toggleFilterNegated(f)}filters.push(f)}))}case 8:case"end":return _context2.stop()}}}),_callee2)})));return function(_x6){return _ref3.apply(this,arguments)}}()));case 3:return _context3.abrupt("return",filters);case 4:case"end":return _context3.stop()}}}),_callee3)})));return function createFiltersFromEvent(_x4,_x5){return _ref2.apply(this,arguments)}}();exports.createFiltersFromEvent=createFiltersFromEvent},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.selectRangeAction=selectRangeAction;exports.ACTION_SELECT_RANGE=void 0;var _i18n=__webpack_require__(0);var _public=__webpack_require__(96);var _brush_event=__webpack_require__(698);var _=__webpack_require__(59);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var ACTION_SELECT_RANGE="ACTION_SELECT_RANGE";exports.ACTION_SELECT_RANGE=ACTION_SELECT_RANGE;function isCompatible(_x){return _isCompatible.apply(this,arguments)}function _isCompatible(){_isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(context){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.t0=Boolean;_context2.next=4;return(0,_brush_event.onBrushEvent)(context.data);case 4:_context2.t1=_context2.sent;return _context2.abrupt("return",(0,_context2.t0)(_context2.t1));case 8:_context2.prev=8;_context2.t2=_context2["catch"](0);return _context2.abrupt("return",false);case 11:case"end":return _context2.stop()}}}),_callee2,null,[[0,8]])})));return _isCompatible.apply(this,arguments)}function selectRangeAction(filterManager,timeFilter){return(0,_public.createAction)({type:ACTION_SELECT_RANGE,id:ACTION_SELECT_RANGE,getDisplayName:function getDisplayName(){return _i18n.i18n.translate("data.filter.applyFilterActionTitle",{defaultMessage:"Apply filter to current view"})},isCompatible:isCompatible,execute:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var timeFieldName,data,filter,selectedFilters,_esFilters$extractTim,timeRangeFilter,restOfFilters;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:timeFieldName=_ref.timeFieldName,data=_ref.data;_context.next=3;return isCompatible({timeFieldName:timeFieldName,data:data});case 3:if(_context.sent){_context.next=5;break}throw new _public.IncompatibleActionError;case 5:_context.next=7;return(0,_brush_event.onBrushEvent)(data);case 7:filter=_context.sent;if(filter){_context.next=10;break}return _context.abrupt("return");case 10:selectedFilters=_.esFilters.mapAndFlattenFilters([filter]);if(timeFieldName){_esFilters$extractTim=_.esFilters.extractTimeFilter(timeFieldName,selectedFilters),timeRangeFilter=_esFilters$extractTim.timeRangeFilter,restOfFilters=_esFilters$extractTim.restOfFilters;filterManager.addFilters(restOfFilters);if(timeRangeFilter){_.esFilters.changeTimeFilter(timeFilter,timeRangeFilter)}}else{filterManager.addFilters(selectedFilters)}case 12:case"end":return _context.stop()}}}),_callee)})));function execute(_x2){return _execute.apply(this,arguments)}return execute}()})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.valueClickAction=valueClickAction;exports.ACTION_VALUE_CLICK=void 0;var _i18n=__webpack_require__(0);var _public=__webpack_require__(25);var _public2=__webpack_require__(96);var _services=__webpack_require__(45);var _apply_filters=__webpack_require__(232);var _create_filters_from_event=__webpack_require__(233);var _=__webpack_require__(59);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var ACTION_VALUE_CLICK="ACTION_VALUE_CLICK";exports.ACTION_VALUE_CLICK=ACTION_VALUE_CLICK;function isCompatible(_x){return _isCompatible.apply(this,arguments)}function _isCompatible(){_isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(context){var filters;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return(0,_create_filters_from_event.createFiltersFromEvent)(context.data.data||[context.data],context.data.negate);case 3:_context2.t0=_context2.sent;if(_context2.t0){_context2.next=6;break}_context2.t0=[];case 6:filters=_context2.t0;return _context2.abrupt("return",filters.length>0);case 10:_context2.prev=10;_context2.t1=_context2["catch"](0);return _context2.abrupt("return",false);case 13:case"end":return _context2.stop()}}}),_callee2,null,[[0,10]])})));return _isCompatible.apply(this,arguments)}function valueClickAction(filterManager,timeFilter){return(0,_public2.createAction)({type:ACTION_VALUE_CLICK,id:ACTION_VALUE_CLICK,getDisplayName:function getDisplayName(){return _i18n.i18n.translate("data.filter.applyFilterActionTitle",{defaultMessage:"Apply filter to current view"})},isCompatible:isCompatible,execute:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var timeFieldName,data,filters,selectedFilters,indexPatterns,filterSelectionPromise,_esFilters$extractTim,timeRangeFilter,restOfFilters;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:timeFieldName=_ref.timeFieldName,data=_ref.data;_context.next=3;return isCompatible({timeFieldName:timeFieldName,data:data});case 3:if(_context.sent){_context.next=5;break}throw new _public2.IncompatibleActionError;case 5:_context.next=7;return(0,_create_filters_from_event.createFiltersFromEvent)(data.data||[data],data.negate);case 7:_context.t0=_context.sent;if(_context.t0){_context.next=10;break}_context.t0=[];case 10:filters=_context.t0;selectedFilters=_.esFilters.mapAndFlattenFilters(filters);if(!(selectedFilters.length>1)){_context.next=20;break}_context.next=15;return Promise.all(filters.map((function(filter){return(0,_services.getIndexPatterns)().get(filter.meta.index)})));case 15:indexPatterns=_context.sent;filterSelectionPromise=new Promise((function(resolve){var overlay=(0,_services.getOverlays)().openModal((0,_public.toMountPoint)((0,_apply_filters.applyFiltersPopover)(filters,indexPatterns,(function(){overlay.close();resolve([])}),(function(filterSelection){overlay.close();resolve(filterSelection)}))),{"data-test-subj":"selectFilterOverlay"})}));_context.next=19;return filterSelectionPromise;case 19:selectedFilters=_context.sent;case 20:if(timeFieldName){_esFilters$extractTim=_.esFilters.extractTimeFilter(timeFieldName,selectedFilters),timeRangeFilter=_esFilters$extractTim.timeRangeFilter,restOfFilters=_esFilters$extractTim.restOfFilters;filterManager.addFilters(restOfFilters);if(timeRangeFilter){_.esFilters.changeTimeFilter(timeFilter,timeRangeFilter)}}else{filterManager.addFilters(selectedFilters)}case 21:case"end":return _context.stop()}}}),_callee)})));function execute(_x2){return _execute.apply(this,arguments)}return execute}()})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isErrorNonFatal=isErrorNonFatal;exports.saveSavedObject=saveSavedObject;var _constants=__webpack_require__(77);var _create_source=__webpack_require__(705);var _check_for_duplicate_title=__webpack_require__(237);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function isErrorNonFatal(error){if(!error)return false;return error.message===_constants.OVERWRITE_REJECTED||error.message===_constants.SAVE_DUPLICATE_REJECTED}function saveSavedObject(_x,_x2){return _saveSavedObject.apply(this,arguments)}function _saveSavedObject(){_saveSavedObject=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObject,config){var _ref,_ref$confirmOverwrite,confirmOverwrite,_ref$isTitleDuplicate,isTitleDuplicateConfirmed,onTitleDuplicate,services,savedObjectsClient,chrome,esType,extractReferences,originalId,_savedObject$_seriali,attributes,references,_extractReferences,resp,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref=_args.length>2&&_args[2]!==undefined?_args[2]:{},_ref$confirmOverwrite=_ref.confirmOverwrite,confirmOverwrite=_ref$confirmOverwrite===void 0?false:_ref$confirmOverwrite,_ref$isTitleDuplicate=_ref.isTitleDuplicateConfirmed,isTitleDuplicateConfirmed=_ref$isTitleDuplicate===void 0?false:_ref$isTitleDuplicate,onTitleDuplicate=_ref.onTitleDuplicate;services=_args.length>3?_args[3]:undefined;savedObjectsClient=services.savedObjectsClient,chrome=services.chrome;esType=config.type||"";extractReferences=config.extractReferences;originalId=savedObject.id;if(savedObject.copyOnSave){delete savedObject.id}_savedObject$_seriali=savedObject._serialize(),attributes=_savedObject$_seriali.attributes,references=_savedObject$_seriali.references;if(extractReferences){_extractReferences=extractReferences({attributes:attributes,references:references});attributes=_extractReferences.attributes;references=_extractReferences.references}if(references){_context.next=11;break}throw new Error("References not returned from extractReferences");case 11:_context.prev=11;_context.next=14;return(0,_check_for_duplicate_title.checkForDuplicateTitle)(savedObject,isTitleDuplicateConfirmed,onTitleDuplicate,services);case 14:savedObject.isSaving=true;if(!confirmOverwrite){_context.next=21;break}_context.next=18;return(0,_create_source.createSource)(attributes,savedObject,esType,savedObject.creationOpts({references:references}),services);case 18:_context.t0=_context.sent;_context.next=24;break;case 21:_context.next=23;return savedObjectsClient.create(esType,attributes,savedObject.creationOpts({references:references,overwrite:true}));case 23:_context.t0=_context.sent;case 24:resp=_context.t0;savedObject.id=resp.id;if(savedObject.showInRecentlyAccessed&&savedObject.getFullPath){chrome.recentlyAccessed.add(savedObject.getFullPath(),savedObject.title,String(savedObject.id))}savedObject.isSaving=false;savedObject.lastSavedTitle=savedObject.title;return _context.abrupt("return",savedObject.id);case 32:_context.prev=32;_context.t1=_context["catch"](11);savedObject.isSaving=false;savedObject.id=originalId;if(!isErrorNonFatal(_context.t1)){_context.next=38;break}return _context.abrupt("return","");case 38:return _context.abrupt("return",Promise.reject(_context.t1));case 39:case"end":return _context.stop()}}}),_callee,null,[[11,32]])})));return _saveSavedObject.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.checkForDuplicateTitle=checkForDuplicateTitle;var _find_object_by_title=__webpack_require__(706);var _constants=__webpack_require__(77);var _display_duplicate_title_confirm_modal=__webpack_require__(707);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function checkForDuplicateTitle(_x,_x2,_x3,_x4){return _checkForDuplicateTitle.apply(this,arguments)}function _checkForDuplicateTitle(){_checkForDuplicateTitle=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObject,isTitleDuplicateConfirmed,onTitleDuplicate,services){var savedObjectsClient,overlays,duplicate;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:savedObjectsClient=services.savedObjectsClient,overlays=services.overlays;if(!isTitleDuplicateConfirmed){_context.next=3;break}return _context.abrupt("return",true);case 3:if(!(savedObject.title===savedObject.lastSavedTitle&&!savedObject.copyOnSave)){_context.next=5;break}return _context.abrupt("return",true);case 5:_context.next=7;return(0,_find_object_by_title.findObjectByTitle)(savedObjectsClient,savedObject.getEsType(),savedObject.title);case 7:duplicate=_context.sent;if(!(!duplicate||duplicate.id===savedObject.id)){_context.next=10;break}return _context.abrupt("return",true);case 10:if(!onTitleDuplicate){_context.next=13;break}onTitleDuplicate();return _context.abrupt("return",Promise.reject(new Error(_constants.SAVE_DUPLICATE_REJECTED)));case 13:return _context.abrupt("return",(0,_display_duplicate_title_confirm_modal.displayDuplicateTitleConfirmModal)(savedObject,overlays));case 14:case"end":return _context.stop()}}}),_callee)})));return _checkForDuplicateTitle.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ElasticsearchSqlHighlightRules",{enumerable:true,get:function get(){return _lexer_rules.ElasticsearchSqlHighlightRules}});Object.defineProperty(exports,"ScriptHighlightRules",{enumerable:true,get:function get(){return _lexer_rules.ScriptHighlightRules}});Object.defineProperty(exports,"XJsonHighlightRules",{enumerable:true,get:function get(){return _lexer_rules.XJsonHighlightRules}});Object.defineProperty(exports,"addXJsonToRules",{enumerable:true,get:function get(){return _lexer_rules.addXJsonToRules}});Object.defineProperty(exports,"XJsonMode",{enumerable:true,get:function get(){return _x_json.XJsonMode}});Object.defineProperty(exports,"installXJsonMode",{enumerable:true,get:function get(){return _x_json.installXJsonMode}});var _lexer_rules=__webpack_require__(717);var _x_json=__webpack_require__(721)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ElasticsearchSqlHighlightRules=void 0;var _brace=_interopRequireDefault(__webpack_require__(78));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _brace$default$acequi=_brace.default.acequire("ace/mode/text_highlight_rules"),TextHighlightRules=_brace$default$acequi.TextHighlightRules;var oop=_brace.default.acequire("ace/lib/oop");var ElasticsearchSqlHighlightRules=function ElasticsearchSqlHighlightRules(){var keywords="describe|between|in|like|not|and|or|desc|select|from|where|having|group|by|order"+"asc|desc|pivot|for|in|as|show|columns|include|frozen|tables|escape|limit|rlike|all|distinct|is";var builtinConstants="true|false";var builtinFunctions="avg|count|first|first_value|last|last_value|max|min|sum|kurtosis|mad|percentile|percentile_rank|skewness"+"|stddev_pop|sum_of_squares|var_pop|histogram|case|coalesce|greatest|ifnull|iif|isnull|least|nullif|nvl"+"|curdate|current_date|current_time|current_timestamp|curtime|dateadd|datediff|datepart|datetrunc|date_add"+"|date_diff|date_part|date_trunc|day|dayname|dayofmonth|dayofweek|dayofyear|day_name|day_of_month|day_of_week"+"|day_of_year|dom|dow|doy|hour|hour_of_day|idow|isodayofweek|isodow|isoweek|isoweekofyear|iso_day_of_week|iso_week_of_year"+"|iw|iwoy|minute|minute_of_day|minute_of_hour|month|monthname|month_name|month_of_year|now|quarter|second|second_of_minute"+"|timestampadd|timestampdiff|timestamp_add|timestamp_diff|today|week|week_of_year|year|abs|acos|asin|atan|atan2|cbrt"+"|ceil|ceiling|cos|cosh|cot|degrees|e|exp|expm1|floor|log|log10|mod|pi|power|radians|rand|random|round|sign|signum|sin"+"|sinh|sqrt|tan|truncate|ascii|bit_length|char|character_length|char_length|concat|insert|lcase|left|length|locate"+"|ltrim|octet_length|position|repeat|replace|right|rtrim|space|substring|ucase|cast|convert|database|user|st_astext|st_aswkt"+"|st_distance|st_geometrytype|st_geomfromtext|st_wkttosql|st_x|st_y|st_z|score";var dataTypes="null|boolean|byte|short|integer|long|double|float|half_float|scaled_float|keyword|text|binary|date|ip|object|nested|time"+"|interval_year|interval_month|interval_day|interval_hour|interval_minute|interval_second|interval_year_to_month"+"inteval_day_to_hour|interval_day_to_minute|interval_day_to_second|interval_hour_to_minute|interval_hour_to_second"+"interval_minute_to_second|geo_point|geo_shape|shape";var keywordMapper=this.createKeywordMapper({keyword:[keywords,builtinFunctions,builtinConstants,dataTypes].join("|")},"identifier",true);this.$rules={start:[{token:"comment",regex:"--.*$"},{token:"comment",start:"/\\*",end:"\\*/"},{token:"string",regex:'".*?"'},{token:"constant",regex:"'.*?'"},{token:"string",regex:"`.*?`"},{token:"entity.name.function",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:keywordMapper,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"⇐|<⇒|\\*|\\.|\\:\\:|\\+|\\-|\\/|\\/\\/|%|&|\\^|~|<|>|<=|=>|==|!=|<>|="},{token:"paren.lparen",regex:"[\\(]"},{token:"paren.rparen",regex:"[\\)]"},{token:"text",regex:"\\s+"}]};this.normalizeRules()};exports.ElasticsearchSqlHighlightRules=ElasticsearchSqlHighlightRules;oop.inherits(ElasticsearchSqlHighlightRules,TextHighlightRules)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptHighlightRules=ScriptHighlightRules;var ace=__webpack_require__(78);var oop=ace.acequire("ace/lib/oop");var _ace$acequire=ace.acequire("ace/mode/text_highlight_rules"),TextHighlightRules=_ace$acequire.TextHighlightRules;var painlessKeywords="def|int|long|byte|String|float|double|char|null|if|else|while|do|for|continue|break|new|try|catch|throw|this|instanceof|return|ctx";function ScriptHighlightRules(){this.name="ScriptHighlightRules";this.$rules={start:[{token:"script.comment",regex:"\\/\\/.*$"},{token:"script.string.regexp",regex:"[/](?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/]\\w*\\s*(?=[).,;]|$)"},{token:"script.string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"script.constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"script.constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"script.constant.language.boolean",regex:"(?:true|false)\\b"},{token:"script.keyword",regex:painlessKeywords},{token:"script.text",regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"script.keyword.operator",regex:"\\?\\.|\\*\\.|=~|==~|!|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|->|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|typeof|void)"},{token:"script.lparen",regex:"[[({]"},{token:"script.rparen",regex:"[\\])}]"},{token:"script.text",regex:"\\s+"}]}}oop.inherits(ScriptHighlightRules,TextHighlightRules)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NotAuthorizedSection=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _eui=__webpack_require__(23);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var NotAuthorizedSection=function NotAuthorizedSection(_ref){var title=_ref.title,message=_ref.message;return _react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"securityApp",title:_react.default.createElement("h2",null,title),body:_react.default.createElement("p",null,message)})};exports.NotAuthorizedSection=NotAuthorizedSection},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SavedSearchQuery",{enumerable:true,get:function get(){return _common.SavedSearchQuery}});Object.defineProperty(exports,"SearchItems",{enumerable:true,get:function get(){return _common.SearchItems}});Object.defineProperty(exports,"useSearchItems",{enumerable:true,get:function get(){return _use_search_items.useSearchItems}});var _common=__webpack_require__(243);var _use_search_items=__webpack_require__(736)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.loadIndexPatterns=loadIndexPatterns;exports.getIndexPatternIdByTitle=getIndexPatternIdByTitle;exports.loadCurrentIndexPattern=loadCurrentIndexPattern;exports.loadCurrentSavedSearch=loadCurrentSavedSearch;exports.createSearchItems=createSearchItems;exports.refreshIndexPatterns=void 0;var _public=__webpack_require__(59);var _common=__webpack_require__(44);var indexPatternCache=[];var fullIndexPatterns;var currentIndexPattern=null;var currentSavedSearch=null;var refreshIndexPatterns;exports.refreshIndexPatterns=refreshIndexPatterns;function loadIndexPatterns(savedObjectsClient,indexPatterns){fullIndexPatterns=indexPatterns;return savedObjectsClient.find({type:"index-pattern",fields:["id","title","type","fields"],perPage:1e4}).then((function(response){indexPatternCache=response.savedObjects;if(refreshIndexPatterns===null){exports.refreshIndexPatterns=refreshIndexPatterns=function refreshIndexPatterns(){return new Promise((function(resolve,reject){loadIndexPatterns(savedObjectsClient,indexPatterns).then((function(resp){resolve(resp)})).catch((function(error){reject(error)}))}))}}return indexPatternCache}))}function getIndexPatternIdByTitle(indexPatternTitle){var _indexPatternCache$fi;return(_indexPatternCache$fi=indexPatternCache.find((function(d){var _d$attributes;return(d===null||d===void 0?void 0:(_d$attributes=d.attributes)===null||_d$attributes===void 0?void 0:_d$attributes.title)===indexPatternTitle})))===null||_indexPatternCache$fi===void 0?void 0:_indexPatternCache$fi.id}function loadCurrentIndexPattern(indexPatterns,indexPatternId){fullIndexPatterns=indexPatterns;currentIndexPattern=fullIndexPatterns.get(indexPatternId);return currentIndexPattern}function loadCurrentSavedSearch(savedSearches,savedSearchId){currentSavedSearch=savedSearches.get(savedSearchId);return currentSavedSearch}function isIndexPattern(arg){return arg!==undefined}function createSearchItems(indexPattern,savedSearch,config){var query={query:"",language:"lucene"};var combinedQuery={bool:{must:[_common.matchAllQuery]}};if(!isIndexPattern(indexPattern)&&savedSearch!==null&&savedSearch.id!==undefined){var searchSource=savedSearch.searchSource;indexPattern=searchSource.getField("index");query=searchSource.getField("query");var fs=searchSource.getField("filter");var filters=fs.length?fs:[];var esQueryConfigs=_public.esQuery.getEsQueryConfig(config);combinedQuery=_public.esQuery.buildEsQuery(indexPattern,[query],filters,esQueryConfigs)}if(!isIndexPattern(indexPattern)){throw new Error("Index Pattern is not defined.")}return{indexPattern:indexPattern,savedSearch:savedSearch,query:query,combinedQuery:combinedQuery}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Wizard",{enumerable:true,get:function get(){return _wizard.Wizard}});var _wizard=__webpack_require__(737)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"applyTransformConfigToDefineState",{enumerable:true,get:function get(){return _step_define_form.applyTransformConfigToDefineState}});Object.defineProperty(exports,"getDefaultStepDefineState",{enumerable:true,get:function get(){return _step_define_form.getDefaultStepDefineState}});Object.defineProperty(exports,"StepDefineExposedState",{enumerable:true,get:function get(){return _step_define_form.StepDefineExposedState}});Object.defineProperty(exports,"StepDefineForm",{enumerable:true,get:function get(){return _step_define_form.StepDefineForm}});Object.defineProperty(exports,"StepDefineSummary",{enumerable:true,get:function get(){return _step_define_summary.StepDefineSummary}});var _step_define_form=__webpack_require__(738);var _step_define_summary=__webpack_require__(760)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AggListForm",{enumerable:true,get:function get(){return _list_form.AggListForm}});Object.defineProperty(exports,"AggListProps",{enumerable:true,get:function get(){return _list_form.AggListProps}});Object.defineProperty(exports,"AggListSummary",{enumerable:true,get:function get(){return _list_summary.AggListSummary}});Object.defineProperty(exports,"AggListSummaryProps",{enumerable:true,get:function get(){return _list_summary.AggListSummaryProps}});var _list_form=__webpack_require__(745);var _list_summary=__webpack_require__(748)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"GroupByListForm",{enumerable:true,get:function get(){return _list_form.GroupByListForm}});Object.defineProperty(exports,"GroupByListSummary",{enumerable:true,get:function get(){return _list_summary.GroupByListSummary}});var _list_form=__webpack_require__(749);var _list_summary=__webpack_require__(752)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StartAction=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _common=__webpack_require__(60);var _hooks=__webpack_require__(72);var _authorization=__webpack_require__(56);var _common2=__webpack_require__(44);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var StartAction=function StartAction(_ref){var items=_ref.items,forceDisable=_ref.forceDisable;var isBulkAction=items.length>1;var canStartStopTransform=(0,_react.useContext)(_authorization.AuthorizationContext).capabilities.canStartStopTransform;var startTransforms=(0,_hooks.useStartTransforms)();var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isModalVisible=_useState2[0],setModalVisible=_useState2[1];var closeModal=function closeModal(){return setModalVisible(false)};var startAndCloseModal=function startAndCloseModal(){setModalVisible(false);startTransforms(items)};var openModal=function openModal(){return setModalVisible(true)};var buttonStartText=_i18n.i18n.translate("xpack.transform.transformList.startActionName",{defaultMessage:"Start"});var completedBatchTransform=items.some((function(i){return(0,_common2.isCompletedBatchTransform)(i)}));var startedTransform=items.some((function(i){return i.stats.state===_common.TRANSFORM_STATE.STARTED}));var startedTransformMessage;var completedBatchTransformMessage;if(isBulkAction===true){startedTransformMessage=_i18n.i18n.translate("xpack.transform.transformList.startedTransformBulkToolTip",{defaultMessage:"One or more transforms are already started."});completedBatchTransformMessage=_i18n.i18n.translate("xpack.transform.transformList.completeBatchTransformBulkActionToolTip",{defaultMessage:"One or more transforms are completed batch transforms and cannot be restarted."})}else{startedTransformMessage=_i18n.i18n.translate("xpack.transform.transformList.startedTransformToolTip",{defaultMessage:"{transformId} is already started.",values:{transformId:items[0]&&items[0].config.id}});completedBatchTransformMessage=_i18n.i18n.translate("xpack.transform.transformList.completeBatchTransformToolTip",{defaultMessage:"{transformId} is a completed batch transform and cannot be restarted.",values:{transformId:items[0]&&items[0].config.id}})}var actionIsDisabled=!canStartStopTransform||completedBatchTransform||startedTransform;var startButton=_react.default.createElement(_eui.EuiButtonEmpty,{size:"xs",color:"text",disabled:forceDisable===true||actionIsDisabled,iconType:"play",onClick:openModal,"aria-label":buttonStartText},buttonStartText);if(actionIsDisabled){var content;if(!canStartStopTransform){content=(0,_authorization.createCapabilityFailureMessage)("canStartStopTransform")}else if(completedBatchTransform){content=completedBatchTransformMessage}else if(startedTransform){content=startedTransformMessage}startButton=_react.default.createElement(_eui.EuiToolTip,{position:"top",content:content},startButton)}var bulkStartModalTitle=_i18n.i18n.translate("xpack.transform.transformList.bulkStartModalTitle",{defaultMessage:"Start {count} {count, plural, one {transform} other {transforms}}?",values:{count:items&&items.length}});var startModalTitle=_i18n.i18n.translate("xpack.transform.transformList.startModalTitle",{defaultMessage:"Start {transformId}",values:{transformId:items[0]&&items[0].config.id}});return _react.default.createElement(_react.Fragment,null,startButton,isModalVisible&&_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:isBulkAction===true?bulkStartModalTitle:startModalTitle,onCancel:closeModal,onConfirm:startAndCloseModal,cancelButtonText:_i18n.i18n.translate("xpack.transform.transformList.startModalCancelButton",{defaultMessage:"Cancel"}),confirmButtonText:_i18n.i18n.translate("xpack.transform.transformList.startModalStartButton",{defaultMessage:"Start"}),defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON,buttonColor:"primary"},_react.default.createElement("p",null,_i18n.i18n.translate("xpack.transform.transformList.startModalBody",{defaultMessage:"A transform will increase search and indexing load in your cluster. Please stop the transform if excessive load is experienced. Are you sure you want to start {count, plural, one {this} other {these}} {count} {count, plural, one {transform} other {transforms}}?",values:{count:items.length}})))))};exports.StartAction=StartAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StopAction=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _common=__webpack_require__(60);var _authorization=__webpack_require__(56);var _hooks=__webpack_require__(72);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var StopAction=function StopAction(_ref){var items=_ref.items,forceDisable=_ref.forceDisable;var isBulkAction=items.length>1;var canStartStopTransform=(0,_react.useContext)(_authorization.AuthorizationContext).capabilities.canStartStopTransform;var stopTransforms=(0,_hooks.useStopTransforms)();var buttonStopText=_i18n.i18n.translate("xpack.transform.transformList.stopActionName",{defaultMessage:"Stop"});var stoppedTransform=items.some((function(i){return i.stats.state===_common.TRANSFORM_STATE.STOPPED}));var stoppedTransformMessage;if(isBulkAction===true){stoppedTransformMessage=_i18n.i18n.translate("xpack.transform.transformList.stoppedTransformBulkToolTip",{defaultMessage:"One or more transforms are already stopped."})}else{stoppedTransformMessage=_i18n.i18n.translate("xpack.transform.transformList.stoppedTransformToolTip",{defaultMessage:"{transformId} is already stopped.",values:{transformId:items[0]&&items[0].config.id}})}var handleStop=function handleStop(){stopTransforms(items)};var stopButton=_react.default.createElement(_eui.EuiButtonEmpty,{size:"xs",color:"text",disabled:forceDisable===true||!canStartStopTransform||stoppedTransform===true,iconType:"stop",onClick:handleStop,"aria-label":buttonStopText},buttonStopText);if(!canStartStopTransform||stoppedTransform){return _react.default.createElement(_eui.EuiToolTip,{position:"top",content:!canStartStopTransform?(0,_authorization.createCapabilityFailureMessage)("canStartStopTransform"):stoppedTransformMessage},stopButton)}return stopButton};exports.StopAction=StopAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DeleteAction=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _common=__webpack_require__(60);var _hooks=__webpack_require__(72);var _authorization=__webpack_require__(56);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var DeleteAction=function DeleteAction(_ref){var items=_ref.items,forceDisable=_ref.forceDisable;var isBulkAction=items.length>1;var disabled=items.some((function(i){return i.stats.state!==_common.TRANSFORM_STATE.STOPPED}));var canDeleteTransform=(0,_react.useContext)(_authorization.AuthorizationContext).capabilities.canDeleteTransform;var deleteTransforms=(0,_hooks.useDeleteTransforms)();var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isModalVisible=_useState2[0],setModalVisible=_useState2[1];var closeModal=function closeModal(){return setModalVisible(false)};var deleteAndCloseModal=function deleteAndCloseModal(){setModalVisible(false);deleteTransforms(items)};var openModal=function openModal(){return setModalVisible(true)};var buttonDeleteText=_i18n.i18n.translate("xpack.transform.transformList.deleteActionName",{defaultMessage:"Delete"});var bulkDeleteButtonDisabledText=_i18n.i18n.translate("xpack.transform.transformList.deleteBulkActionDisabledToolTipContent",{defaultMessage:"One or more selected transforms must be stopped in order to be deleted."});var deleteButtonDisabledText=_i18n.i18n.translate("xpack.transform.transformList.deleteActionDisabledToolTipContent",{defaultMessage:"Stop the transform in order to delete it."});var bulkDeleteModalTitle=_i18n.i18n.translate("xpack.transform.transformList.bulkDeleteModalTitle",{defaultMessage:"Delete {count} {count, plural, one {transform} other {transforms}}?",values:{count:items.length}});var deleteModalTitle=_i18n.i18n.translate("xpack.transform.transformList.deleteModalTitle",{defaultMessage:"Delete {transformId}",values:{transformId:items[0]&&items[0].config.id}});var bulkDeleteModalMessage=_i18n.i18n.translate("xpack.transform.transformList.bulkDeleteModalBody",{defaultMessage:"Are you sure you want to delete {count, plural, one {this} other {these}} {count} {count, plural, one {transform} other {transforms}}? The transform's destination index and optional Kibana index pattern will not be deleted.",values:{count:items.length}});var deleteModalMessage=_i18n.i18n.translate("xpack.transform.transformList.deleteModalBody",{defaultMessage:"Are you sure you want to delete this transform? The transform's destination index and optional Kibana index pattern will not be deleted."});var deleteButton=_react.default.createElement(_eui.EuiButtonEmpty,{size:"xs",color:"text",disabled:forceDisable===true||disabled||!canDeleteTransform,iconType:"trash",onClick:openModal,"aria-label":buttonDeleteText},buttonDeleteText);if(disabled||!canDeleteTransform){var content;if(disabled){content=isBulkAction===true?bulkDeleteButtonDisabledText:deleteButtonDisabledText}else{content=(0,_authorization.createCapabilityFailureMessage)("canDeleteTransform")}deleteButton=_react.default.createElement(_eui.EuiToolTip,{position:"top",content:content},deleteButton)}return _react.default.createElement(_react.Fragment,null,deleteButton,isModalVisible&&_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:isBulkAction===true?bulkDeleteModalTitle:deleteModalTitle,onCancel:closeModal,onConfirm:deleteAndCloseModal,cancelButtonText:_i18n.i18n.translate("xpack.transform.transformList.deleteModalCancelButton",{defaultMessage:"Cancel"}),confirmButtonText:_i18n.i18n.translate("xpack.transform.transformList.deleteModalDeleteButton",{defaultMessage:"Delete"}),defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON,buttonColor:"danger"},_react.default.createElement("p",null,isBulkAction===true?bulkDeleteModalMessage:deleteModalMessage))))};exports.DeleteAction=DeleteAction},,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.breadcrumbService=exports.BREADCRUMB_SECTION=void 0;var _text=__webpack_require__(97);var _links=__webpack_require__(129);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var BREADCRUMB_SECTION;exports.BREADCRUMB_SECTION=BREADCRUMB_SECTION;(function(BREADCRUMB_SECTION){BREADCRUMB_SECTION["HOME"]="home";BREADCRUMB_SECTION["CLONE_TRANSFORM"]="cloneTransform";BREADCRUMB_SECTION["CREATE_TRANSFORM"]="createTransform"})(BREADCRUMB_SECTION||(exports.BREADCRUMB_SECTION=BREADCRUMB_SECTION={}));var BreadcrumbService=function(){function BreadcrumbService(){_classCallCheck(this,BreadcrumbService);_defineProperty(this,"breadcrumbs",{home:[],cloneTransform:[],createTransform:[]});_defineProperty(this,"setBreadcrumbsHandler",void 0)}_createClass(BreadcrumbService,[{key:"setup",value:function setup(setBreadcrumbsHandler){this.setBreadcrumbsHandler=setBreadcrumbsHandler;this.breadcrumbs.home=[{text:_text.textService.breadcrumbs.home,href:(0,_links.linkToHome)()}];this.breadcrumbs.cloneTransform=[].concat(_toConsumableArray(this.breadcrumbs.home),[{text:_text.textService.breadcrumbs.cloneTransform}]);this.breadcrumbs.createTransform=[].concat(_toConsumableArray(this.breadcrumbs.home),[{text:_text.textService.breadcrumbs.createTransform}])}},{key:"setBreadcrumbs",value:function setBreadcrumbs(type){if(!this.setBreadcrumbsHandler){throw new Error("BreadcrumbService#setup() must be called first!")}var newBreadcrumbs=this.breadcrumbs[type]?_toConsumableArray(this.breadcrumbs[type]):_toConsumableArray(this.breadcrumbs.home);var lastBreadcrumb=newBreadcrumbs.pop();newBreadcrumbs.push(_objectSpread({},lastBreadcrumb,{href:undefined}));this.setBreadcrumbsHandler(newBreadcrumbs)}}]);return BreadcrumbService}();var breadcrumbService=new BreadcrumbService;exports.breadcrumbService=breadcrumbService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.textService=void 0;var _i18n=__webpack_require__(0);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TextService=function(){function TextService(){_classCallCheck(this,TextService);_defineProperty(this,"breadcrumbs",{})}_createClass(TextService,[{key:"init",value:function init(){this.breadcrumbs={home:_i18n.i18n.translate("xpack.transform.home.breadcrumbTitle",{defaultMessage:"Transforms"}),cloneTransform:_i18n.i18n.translate("xpack.transform.cloneTransform.breadcrumbTitle",{defaultMessage:"Clone transform"}),createTransform:_i18n.i18n.translate("xpack.transform.createTransform.breadcrumbTitle",{defaultMessage:"Create transform"})}}},{key:"getSizeNotationHelpText",value:function getSizeNotationHelpText(){return _i18n.i18n.translate("xpack.transform.transformForm.sizeNotationPlaceholder",{defaultMessage:"Examples: {example1}, {example2}, {example3}, {example4}",values:{example1:"1g",example2:"10mb",example3:"5k",example4:"1024B"}})}}]);return TextService}();var textService=new TextService;exports.textService=textService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.docTitleService=void 0;var _text=__webpack_require__(97);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DocTitleService=function(){function DocTitleService(){_classCallCheck(this,DocTitleService);_defineProperty(this,"changeDocTitle",(function(){}))}_createClass(DocTitleService,[{key:"init",value:function init(changeDocTitle){this.changeDocTitle=changeDocTitle}},{key:"setTitle",value:function setTitle(page){if(!page||page==="home"){this.changeDocTitle("".concat(_text.textService.breadcrumbs.home))}else if(_text.textService.breadcrumbs[page]){this.changeDocTitle("".concat(_text.textService.breadcrumbs[page]," - ").concat(_text.textService.breadcrumbs.home))}}}]);return DocTitleService}();var docTitleService=new DocTitleService;exports.docTitleService=docTitleService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renderApp=exports.App=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _reactDom=__webpack_require__(30);var _reactRouterDom=__webpack_require__(33);var _react2=__webpack_require__(24);var _public=__webpack_require__(25);var _constants=__webpack_require__(64);var _components=__webpack_require__(71);var _constants2=__webpack_require__(70);var _authorization=__webpack_require__(56);var _clone_transform=__webpack_require__(734);var _create_transform=__webpack_require__(771);var _transform_management=__webpack_require__(773);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var App=function App(){var _useContext=(0,_react.useContext)(_authorization.AuthorizationContext),apiError=_useContext.apiError;if(apiError!==null){return _react.default.createElement(_components.SectionError,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.transform.app.checkingPrivilegesErrorMessage",defaultMessage:"Error fetching user privileges from the server."}),error:apiError})}return _react.default.createElement("div",{"data-test-subj":"transformApp"},_react.default.createElement(_reactRouterDom.HashRouter,null,_react.default.createElement(_reactRouterDom.Switch,null,_react.default.createElement(_reactRouterDom.Route,{path:"".concat(_constants2.CLIENT_BASE_PATH).concat(_constants2.SECTION_SLUG.CLONE_TRANSFORM,"/:transformId"),component:_clone_transform.CloneTransformSection}),_react.default.createElement(_reactRouterDom.Route,{path:"".concat(_constants2.CLIENT_BASE_PATH).concat(_constants2.SECTION_SLUG.CREATE_TRANSFORM,"/:savedObjectId"),component:_create_transform.CreateTransformSection}),_react.default.createElement(_reactRouterDom.Route,{exact:true,path:_constants2.CLIENT_BASE_PATH+_constants2.SECTION_SLUG.HOME,component:_transform_management.TransformManagementSection}),_react.default.createElement(_reactRouterDom.Redirect,{from:_constants2.CLIENT_BASE_PATH,to:_constants2.CLIENT_BASE_PATH+_constants2.SECTION_SLUG.HOME}))))};exports.App=App;var renderApp=function renderApp(element,appDependencies){var I18nContext=appDependencies.i18n.Context;(0,_reactDom.render)(_react.default.createElement(_public.KibanaContextProvider,{services:appDependencies},_react.default.createElement(_authorization.AuthorizationProvider,{privilegesEndpoint:"".concat(_constants.API_BASE_PATH,"privileges")},_react.default.createElement(I18nContext,null,_react.default.createElement(App,null)))),element);return function(){(0,_reactDom.unmountComponentAtNode)(element)}};exports.renderApp=renderApp},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"LICENSE_STATUS_UNAVAILABLE",{enumerable:true,get:function get(){return _license_status.LICENSE_STATUS_UNAVAILABLE}});Object.defineProperty(exports,"LICENSE_STATUS_INVALID",{enumerable:true,get:function get(){return _license_status.LICENSE_STATUS_INVALID}});Object.defineProperty(exports,"LICENSE_STATUS_EXPIRED",{enumerable:true,get:function get(){return _license_status.LICENSE_STATUS_EXPIRED}});Object.defineProperty(exports,"LICENSE_STATUS_VALID",{enumerable:true,get:function get(){return _license_status.LICENSE_STATUS_VALID}});Object.defineProperty(exports,"LICENSE_TYPE_BASIC",{enumerable:true,get:function get(){return _license_types.LICENSE_TYPE_BASIC}});Object.defineProperty(exports,"LICENSE_TYPE_STANDARD",{enumerable:true,get:function get(){return _license_types.LICENSE_TYPE_STANDARD}});Object.defineProperty(exports,"LICENSE_TYPE_GOLD",{enumerable:true,get:function get(){return _license_types.LICENSE_TYPE_GOLD}});Object.defineProperty(exports,"LICENSE_TYPE_PLATINUM",{enumerable:true,get:function get(){return _license_types.LICENSE_TYPE_PLATINUM}});Object.defineProperty(exports,"LICENSE_TYPE_ENTERPRISE",{enumerable:true,get:function get(){return _license_types.LICENSE_TYPE_ENTERPRISE}});Object.defineProperty(exports,"LICENSE_TYPE_TRIAL",{enumerable:true,get:function get(){return _license_types.LICENSE_TYPE_TRIAL}});Object.defineProperty(exports,"RANKED_LICENSE_TYPES",{enumerable:true,get:function get(){return _license_types.RANKED_LICENSE_TYPES}});Object.defineProperty(exports,"LicenseType",{enumerable:true,get:function get(){return _license_types.LicenseType}});var _license_status=__webpack_require__(261);var _license_types=__webpack_require__(262)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LICENSE_STATUS_VALID=exports.LICENSE_STATUS_EXPIRED=exports.LICENSE_STATUS_INVALID=exports.LICENSE_STATUS_UNAVAILABLE=void 0;var LICENSE_STATUS_UNAVAILABLE="UNAVAILABLE";exports.LICENSE_STATUS_UNAVAILABLE=LICENSE_STATUS_UNAVAILABLE;var LICENSE_STATUS_INVALID="INVALID";exports.LICENSE_STATUS_INVALID=LICENSE_STATUS_INVALID;var LICENSE_STATUS_EXPIRED="EXPIRED";exports.LICENSE_STATUS_EXPIRED=LICENSE_STATUS_EXPIRED;var LICENSE_STATUS_VALID="VALID";exports.LICENSE_STATUS_VALID=LICENSE_STATUS_VALID},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RANKED_LICENSE_TYPES=exports.LICENSE_TYPE_TRIAL=exports.LICENSE_TYPE_ENTERPRISE=exports.LICENSE_TYPE_PLATINUM=exports.LICENSE_TYPE_GOLD=exports.LICENSE_TYPE_STANDARD=exports.LICENSE_TYPE_BASIC=void 0;var LICENSE_TYPE_BASIC="basic";exports.LICENSE_TYPE_BASIC=LICENSE_TYPE_BASIC;var LICENSE_TYPE_STANDARD="standard";exports.LICENSE_TYPE_STANDARD=LICENSE_TYPE_STANDARD;var LICENSE_TYPE_GOLD="gold";exports.LICENSE_TYPE_GOLD=LICENSE_TYPE_GOLD;var LICENSE_TYPE_PLATINUM="platinum";exports.LICENSE_TYPE_PLATINUM=LICENSE_TYPE_PLATINUM;var LICENSE_TYPE_ENTERPRISE="enterprise";exports.LICENSE_TYPE_ENTERPRISE=LICENSE_TYPE_ENTERPRISE;var LICENSE_TYPE_TRIAL="trial";exports.LICENSE_TYPE_TRIAL=LICENSE_TYPE_TRIAL;var RANKED_LICENSE_TYPES=[LICENSE_TYPE_BASIC,LICENSE_TYPE_STANDARD,LICENSE_TYPE_GOLD,LICENSE_TYPE_PLATINUM,LICENSE_TYPE_ENTERPRISE,LICENSE_TYPE_TRIAL];exports.RANKED_LICENSE_TYPES=RANKED_LICENSE_TYPES},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SectionError=void 0;var _eui=__webpack_require__(23);var _react=_interopRequireDefault(__webpack_require__(22));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var SectionError=function SectionError(_ref){var _ref2;var title=_ref.title,error=_ref.error,actions=_ref.actions,rest=_objectWithoutProperties(_ref,["title","error","actions"]);var errorMessage=(_ref2=error===null||error===void 0?void 0:error.message)!==null&&_ref2!==void 0?_ref2:JSON.stringify(error,null,2);return _react.default.createElement(_eui.EuiCallOut,_extends({title:title,color:"danger",iconType:"alert"},rest),_react.default.createElement("pre",null,errorMessage),actions?actions:null)};exports.SectionError=SectionError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SectionLoading=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _eui=__webpack_require__(23);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var SectionLoading=function SectionLoading(_ref){var inline=_ref.inline,children=_ref.children,rest=_objectWithoutProperties(_ref,["inline","children"]);if(inline){return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexStart",alignItems:"center",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiLoadingSpinner,{size:"m"})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,rest,_react.default.createElement(_eui.EuiTextColor,{color:"subdued"},children))))}return _react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement(_eui.EuiLoadingSpinner,{size:"xl"}),body:_react.default.createElement(_eui.EuiText,{color:"subdued"},children),"data-test-subj":"sectionLoading"})};exports.SectionLoading=SectionLoading},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ToastNotificationText=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _eui=__webpack_require__(23);var _i18n=__webpack_require__(0);var _public=__webpack_require__(25);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}var MAX_SIMPLE_MESSAGE_LENGTH=140;var ToastNotificationText=function ToastNotificationText(_ref){var overlays=_ref.overlays,text=_ref.text;if(typeof text==="string"&&text.length<=MAX_SIMPLE_MESSAGE_LENGTH){return text}if(_typeof(text)==="object"&&typeof text.message==="string"&&text.message.length<=MAX_SIMPLE_MESSAGE_LENGTH){return text.message}var unformattedText=text.message?text.message:text;var formattedText=_typeof(unformattedText)==="object"?JSON.stringify(text,null,2):text;var previewText="".concat(formattedText.substring(0,140)).concat(formattedText.length>140?" ...":"");var openModal=function openModal(){var modal=overlays.openModal((0,_public.toMountPoint)(_react.default.createElement(_eui.EuiModal,{onClose:function onClose(){return modal.close()}},_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,_i18n.i18n.translate("xpack.transform.toastText.modalTitle",{defaultMessage:"Error details"}))),_react.default.createElement(_eui.EuiModalBody,null,_react.default.createElement(_eui.EuiCodeBlock,{language:"json",fontSize:"m",paddingSize:"s",isCopyable:true},formattedText)),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiButtonEmpty,{onClick:function onClick(){return modal.close()}},_i18n.i18n.translate("xpack.transform.toastText.closeModalButtonText",{defaultMessage:"Close"}))))))};return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement("pre",null,previewText),_react.default.createElement(_eui.EuiButtonEmpty,{onClick:openModal},_i18n.i18n.translate("xpack.transform.toastText.openModalButtonText",{defaultMessage:"View details"})))};exports.ToastNotificationText=ToastNotificationText},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"createCapabilityFailureMessage",{enumerable:true,get:function get(){return _common.createCapabilityFailureMessage}});Object.defineProperty(exports,"AuthorizationProvider",{enumerable:true,get:function get(){return _authorization_provider.AuthorizationProvider}});Object.defineProperty(exports,"AuthorizationContext",{enumerable:true,get:function get(){return _authorization_provider.AuthorizationContext}});Object.defineProperty(exports,"PrivilegesWrapper",{enumerable:true,get:function get(){return _with_privileges.PrivilegesWrapper}});Object.defineProperty(exports,"NotAuthorizedSection",{enumerable:true,get:function get(){return _not_authorized_section.NotAuthorizedSection}});var _common=__webpack_require__(98);var _authorization_provider=__webpack_require__(130);var _with_privileges=__webpack_require__(733);var _not_authorized_section=__webpack_require__(241)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useGetTransforms=void 0;var _common=__webpack_require__(44);var _use_api=__webpack_require__(53);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var isGetTransformsStatsResponseOk=function isGetTransformsStatsResponseOk(arg){return{}.hasOwnProperty.call(arg,"count")&&{}.hasOwnProperty.call(arg,"transforms")&&Array.isArray(arg.transforms)};var useGetTransforms=function useGetTransforms(setTransforms,setErrorMessage,setIsInitialized,blockRefresh){var api=(0,_use_api.useApi)();var concurrentLoads=0;var getTransforms=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var forceRefresh,transformConfigs,transformStats,tableRows,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:forceRefresh=_args.length>0&&_args[0]!==undefined?_args[0]:false;if(!(forceRefresh===true||blockRefresh===false)){_context.next=32;break}_common.refreshTransformList$.next(_common.REFRESH_TRANSFORM_LIST_STATE.LOADING);concurrentLoads++;if(!(concurrentLoads>1)){_context.next=6;break}return _context.abrupt("return");case 6:_context.prev=6;_context.next=9;return api.getTransforms();case 9:transformConfigs=_context.sent;_context.next=12;return api.getTransformsStats();case 12:transformStats=_context.sent;tableRows=transformConfigs.transforms.reduce((function(reducedtableRows,config){var stats=isGetTransformsStatsResponseOk(transformStats)?transformStats.transforms.find((function(d){return config.id===d.id})):undefined;if(!(0,_common.isTransformStats)(stats)){return reducedtableRows}reducedtableRows.push({id:config.id,config:config,mode:typeof config.sync!=="undefined"?_common.TRANSFORM_MODE.CONTINUOUS:_common.TRANSFORM_MODE.BATCH,stats:stats});return reducedtableRows}),[]);setTransforms(tableRows);setErrorMessage(undefined);setIsInitialized(true);_common.refreshTransformList$.next(_common.REFRESH_TRANSFORM_LIST_STATE.IDLE);_context.next=27;break;case 20:_context.prev=20;_context.t0=_context["catch"](6);_common.refreshTransformList$.next(_common.REFRESH_TRANSFORM_LIST_STATE.ERROR);_common.refreshTransformList$.next(_common.REFRESH_TRANSFORM_LIST_STATE.IDLE);setTransforms([]);setErrorMessage(_context.t0);setIsInitialized(true);case 27:concurrentLoads--;if(!(concurrentLoads>0)){_context.next=32;break}concurrentLoads=0;getTransforms(true);return _context.abrupt("return");case 32:case"end":return _context.stop()}}}),_callee,null,[[6,20]])})));return function getTransforms(){return _ref.apply(this,arguments)}}();return getTransforms};exports.useGetTransforms=useGetTransforms},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isAggName=isAggName;var _validators=__webpack_require__(269);function isAggName(arg){var validatorFn=(0,_validators.composeValidators)((0,_validators.patternValidator)(/^[^\s]/),(0,_validators.patternValidator)(/[^\s]$/),(0,_validators.patternValidator)(/^[^\[\]>]+$/));return validatorFn(arg)===null}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.maxLengthValidator=maxLengthValidator;exports.patternValidator=patternValidator;exports.composeValidators=composeValidators;exports.requiredValidator=requiredValidator;exports.memoryInputValidator=memoryInputValidator;var _validation=__webpack_require__(270);function maxLengthValidator(maxLength){return function(value){return value&&value.length>maxLength?{maxLength:{requiredLength:maxLength,actualLength:value.length}}:null}}function patternValidator(pattern){return function(value){return pattern.test(value)?null:{pattern:{matchPattern:pattern.toString()}}}}function composeValidators(){for(var _len=arguments.length,validators=new Array(_len),_key=0;_key<_len;_key++){validators[_key]=arguments[_key]}return function(value){var validationResult=validators.reduce((function(acc,validator){return _objectSpread({},acc,{},validator(value)||{})}),{});return Object.keys(validationResult).length>0?validationResult:null}}function requiredValidator(){return function(value){return value===""||value===undefined||value===null?{required:true}:null}}function memoryInputValidator(){var allowedUnits=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_validation.ALLOWED_DATA_UNITS;return function(value){if(typeof value!=="string"||value===""){return null}var regexp=new RegExp("\\d+(".concat(allowedUnits.join("|"),")$"),"i");return regexp.test(value.trim())?null:{invalidUnits:{allowedUnits:allowedUnits.join(", ")}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JOB_ID_MAX_LENGTH=exports.ALLOWED_DATA_UNITS=exports.SKIP_BUCKET_SPAN_ESTIMATION=exports.VALIDATION_STATUS=void 0;var VALIDATION_STATUS;exports.VALIDATION_STATUS=VALIDATION_STATUS;(function(VALIDATION_STATUS){VALIDATION_STATUS["ERROR"]="error";VALIDATION_STATUS["INFO"]="info";VALIDATION_STATUS["SUCCESS"]="success";VALIDATION_STATUS["WARNING"]="warning"})(VALIDATION_STATUS||(exports.VALIDATION_STATUS=VALIDATION_STATUS={}));var SKIP_BUCKET_SPAN_ESTIMATION=true;exports.SKIP_BUCKET_SPAN_ESTIMATION=SKIP_BUCKET_SPAN_ESTIMATION;var ALLOWED_DATA_UNITS=["B","KB","MB","GB","TB","PB"];exports.ALLOWED_DATA_UNITS=ALLOWED_DATA_UNITS;var JOB_ID_MAX_LENGTH=64;exports.JOB_ID_MAX_LENGTH=JOB_ID_MAX_LENGTH},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.euiDataGridToolbarSettings=exports.euiDataGridStyle=exports.INIT_MAX_COLUMNS=void 0;var INIT_MAX_COLUMNS=20;exports.INIT_MAX_COLUMNS=INIT_MAX_COLUMNS;var euiDataGridStyle={border:"all",fontSize:"s",cellPadding:"s",stripes:false,rowHover:"highlight",header:"shade"};exports.euiDataGridStyle=euiDataGridStyle;var euiDataGridToolbarSettings={showColumnSelector:true,showStyleSelector:false,showSortSelector:true,showFullScreenSelector:false};exports.euiDataGridToolbarSettings=euiDataGridToolbarSettings},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getFlattenedFields=getFlattenedFields;exports.toggleSelectedField=exports.getDefaultSelectableFields=exports.getSelectableFields=void 0;function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function getFlattenedFields(obj){var flatDocFields=[];var newDocFields=Object.keys(obj);newDocFields.forEach((function(f){var fieldValue=obj[f];if(_typeof(fieldValue)!=="object"||fieldValue===null||Array.isArray(fieldValue)){flatDocFields.push(f)}else{var innerFields=getFlattenedFields(fieldValue);var flattenedFields=innerFields.map((function(d){return"".concat(f,".").concat(d)}));flatDocFields.push.apply(flatDocFields,_toConsumableArray(flattenedFields))}}));return flatDocFields}var getSelectableFields=function getSelectableFields(docs){if(docs.length===0){return[]}var newDocFields=getFlattenedFields(docs[0]);newDocFields.sort();return newDocFields};exports.getSelectableFields=getSelectableFields;var getDefaultSelectableFields=function getDefaultSelectableFields(docs){if(docs.length===0){return[]}var newDocFields=getFlattenedFields(docs[0]);newDocFields.sort();return newDocFields.filter((function(k){var value=false;docs.forEach((function(row){var source=row;if(source[k]!==null){value=true}}));return value}))};exports.getDefaultSelectableFields=getDefaultSelectableFields;var toggleSelectedField=function toggleSelectedField(selectedFields,column){var index=selectedFields.indexOf(column);if(index===-1){selectedFields.push(column)}else{selectedFields.splice(index,1)}selectedFields.sort();return selectedFields};exports.toggleSelectedField=toggleSelectedField},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isTransformIdValid=isTransformIdValid;exports.useRefreshTransformList=exports.refreshTransformList$=exports.REFRESH_TRANSFORM_LIST_STATE=void 0;var _react=__webpack_require__(22);var _rxjs=__webpack_require__(28);var _operators=__webpack_require__(31);function isTransformIdValid(transformId){return/^[a-z0-9\-\_]+$/g.test(transformId)&&!/^([_-].*)?(.*[_-])?$/g.test(transformId)}var REFRESH_TRANSFORM_LIST_STATE;exports.REFRESH_TRANSFORM_LIST_STATE=REFRESH_TRANSFORM_LIST_STATE;(function(REFRESH_TRANSFORM_LIST_STATE){REFRESH_TRANSFORM_LIST_STATE["ERROR"]="error";REFRESH_TRANSFORM_LIST_STATE["IDLE"]="idle";REFRESH_TRANSFORM_LIST_STATE["LOADING"]="loading";REFRESH_TRANSFORM_LIST_STATE["REFRESH"]="refresh"})(REFRESH_TRANSFORM_LIST_STATE||(exports.REFRESH_TRANSFORM_LIST_STATE=REFRESH_TRANSFORM_LIST_STATE={}));var refreshTransformList$=new _rxjs.BehaviorSubject(REFRESH_TRANSFORM_LIST_STATE.IDLE);exports.refreshTransformList$=refreshTransformList$;var useRefreshTransformList=function useRefreshTransformList(){var callback=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};(0,_react.useEffect)((function(){var distinct$=refreshTransformList$.pipe((0,_operators.distinctUntilChanged)());var subscriptions=[];if(typeof callback.onRefresh==="function"){callback.onRefresh();subscriptions.push(distinct$.pipe((0,_operators.filter)((function(state){return state===REFRESH_TRANSFORM_LIST_STATE.REFRESH}))).subscribe((function(){return typeof callback.onRefresh==="function"&&callback.onRefresh()})))}if(typeof callback.isLoading==="function"){subscriptions.push(distinct$.subscribe((function(state){return typeof callback.isLoading==="function"&&callback.isLoading(state===REFRESH_TRANSFORM_LIST_STATE.LOADING)})))}return function(){subscriptions.map((function(sub){return sub.unsubscribe()}))}}),[]);return{refresh:function refresh(){refreshTransformList$.next(REFRESH_TRANSFORM_LIST_STATE.REFRESH);refreshTransformList$.next(REFRESH_TRANSFORM_LIST_STATE.LOADING)}}};exports.useRefreshTransformList=useRefreshTransformList},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TRANSFORM_LIST_COLUMN=void 0;var TRANSFORM_LIST_COLUMN;exports.TRANSFORM_LIST_COLUMN=TRANSFORM_LIST_COLUMN;(function(TRANSFORM_LIST_COLUMN){TRANSFORM_LIST_COLUMN["CONFIG_DEST_INDEX"]="config.dest.index";TRANSFORM_LIST_COLUMN["CONFIG_SOURCE_INDEX"]="config.source.index";TRANSFORM_LIST_COLUMN["DESCRIPTION"]="config.description";TRANSFORM_LIST_COLUMN["ID"]="id"})(TRANSFORM_LIST_COLUMN||(exports.TRANSFORM_LIST_COLUMN=TRANSFORM_LIST_COLUMN={}))},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.isTransformStats=isTransformStats;exports.getTransformProgress=getTransformProgress;exports.isCompletedBatchTransform=isCompletedBatchTransform;exports.TRANSFORM_MODE=void 0;var _common=__webpack_require__(60);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}var TRANSFORM_MODE;exports.TRANSFORM_MODE=TRANSFORM_MODE;(function(TRANSFORM_MODE){TRANSFORM_MODE["BATCH"]="batch";TRANSFORM_MODE["CONTINUOUS"]="continuous"})(TRANSFORM_MODE||(exports.TRANSFORM_MODE=TRANSFORM_MODE={}));function isTransformStats(arg){return _typeof(arg)==="object"&&arg!==null&&{}.hasOwnProperty.call(arg,"state")&&Object.values(_common.TRANSFORM_STATE).includes(arg.state)}function getTransformProgress(item){var _item$stats,_item$stats$checkpoin,_item$stats$checkpoin2,_item$stats$checkpoin3;if(isCompletedBatchTransform(item)){return 100}var progress=item===null||item===void 0?void 0:(_item$stats=item.stats)===null||_item$stats===void 0?void 0:(_item$stats$checkpoin=_item$stats.checkpointing)===null||_item$stats$checkpoin===void 0?void 0:(_item$stats$checkpoin2=_item$stats$checkpoin.next)===null||_item$stats$checkpoin2===void 0?void 0:(_item$stats$checkpoin3=_item$stats$checkpoin2.checkpoint_progress)===null||_item$stats$checkpoin3===void 0?void 0:_item$stats$checkpoin3.percent_complete;return progress!==undefined?Math.round(progress):undefined}function isCompletedBatchTransform(item){return item.stats.checkpointing.last.checkpoint===1&&item.config.sync===undefined&&item.stats.state===_common.TRANSFORM_STATE.STOPPED}},,function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isPivotAggsConfigWithUiSupport=isPivotAggsConfigWithUiSupport;exports.isPivotAggsConfigPercentiles=isPivotAggsConfigPercentiles;exports.getEsAggFromAggConfig=getEsAggFromAggConfig;exports.pivotAggsFieldSupport=exports.PERCENTILES_AGG_DEFAULT_PERCENTS=exports.PIVOT_SUPPORTED_AGGS=void 0;var _common=__webpack_require__(42);var _pivotAggsFieldSuppor;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PIVOT_SUPPORTED_AGGS;exports.PIVOT_SUPPORTED_AGGS=PIVOT_SUPPORTED_AGGS;(function(PIVOT_SUPPORTED_AGGS){PIVOT_SUPPORTED_AGGS["AVG"]="avg";PIVOT_SUPPORTED_AGGS["CARDINALITY"]="cardinality";PIVOT_SUPPORTED_AGGS["MAX"]="max";PIVOT_SUPPORTED_AGGS["MIN"]="min";PIVOT_SUPPORTED_AGGS["PERCENTILES"]="percentiles";PIVOT_SUPPORTED_AGGS["SUM"]="sum";PIVOT_SUPPORTED_AGGS["VALUE_COUNT"]="value_count"})(PIVOT_SUPPORTED_AGGS||(exports.PIVOT_SUPPORTED_AGGS=PIVOT_SUPPORTED_AGGS={}));var PERCENTILES_AGG_DEFAULT_PERCENTS=[1,5,25,50,75,95,99];exports.PERCENTILES_AGG_DEFAULT_PERCENTS=PERCENTILES_AGG_DEFAULT_PERCENTS;var pivotAggsFieldSupport=(_pivotAggsFieldSuppor={},_defineProperty(_pivotAggsFieldSuppor,_common.KBN_FIELD_TYPES.ATTACHMENT,[PIVOT_SUPPORTED_AGGS.VALUE_COUNT]),_defineProperty(_pivotAggsFieldSuppor,_common.KBN_FIELD_TYPES.BOOLEAN,[PIVOT_SUPPORTED_AGGS.VALUE_COUNT]),_defineProperty(_pivotAggsFieldSuppor,_common.KBN_FIELD_TYPES.DATE,[PIVOT_SUPPORTED_AGGS.MAX,PIVOT_SUPPORTED_AGGS.MIN,PIVOT_SUPPORTED_AGGS.VALUE_COUNT]),_defineProperty(_pivotAggsFieldSuppor,_common.KBN_FIELD_TYPES.GEO_POINT,[PIVOT_SUPPORTED_AGGS.VALUE_COUNT]),_defineProperty(_pivotAggsFieldSuppor,_common.KBN_FIELD_TYPES.GEO_SHAPE,[PIVOT_SUPPORTED_AGGS.VALUE_COUNT]),_defineProperty(_pivotAggsFieldSuppor,_common.KBN_FIELD_TYPES.IP,[PIVOT_SUPPORTED_AGGS.CARDINALITY,PIVOT_SUPPORTED_AGGS.VALUE_COUNT]),_defineProperty(_pivotAggsFieldSuppor,_common.KBN_FIELD_TYPES.MURMUR3,[PIVOT_SUPPORTED_AGGS.VALUE_COUNT]),_defineProperty(_pivotAggsFieldSuppor,_common.KBN_FIELD_TYPES.NUMBER,[PIVOT_SUPPORTED_AGGS.AVG,PIVOT_SUPPORTED_AGGS.CARDINALITY,PIVOT_SUPPORTED_AGGS.MAX,PIVOT_SUPPORTED_AGGS.MIN,PIVOT_SUPPORTED_AGGS.PERCENTILES,PIVOT_SUPPORTED_AGGS.SUM,PIVOT_SUPPORTED_AGGS.VALUE_COUNT]),_defineProperty(_pivotAggsFieldSuppor,_common.KBN_FIELD_TYPES.STRING,[PIVOT_SUPPORTED_AGGS.CARDINALITY,PIVOT_SUPPORTED_AGGS.VALUE_COUNT]),_defineProperty(_pivotAggsFieldSuppor,_common.KBN_FIELD_TYPES._SOURCE,[PIVOT_SUPPORTED_AGGS.VALUE_COUNT]),_defineProperty(_pivotAggsFieldSuppor,_common.KBN_FIELD_TYPES.UNKNOWN,[PIVOT_SUPPORTED_AGGS.VALUE_COUNT]),_defineProperty(_pivotAggsFieldSuppor,_common.KBN_FIELD_TYPES.CONFLICT,[PIVOT_SUPPORTED_AGGS.VALUE_COUNT]),_pivotAggsFieldSuppor);exports.pivotAggsFieldSupport=pivotAggsFieldSupport;function isPivotAggsConfigWithUiSupport(arg){return arg.hasOwnProperty("agg")&&arg.hasOwnProperty("aggName")&&arg.hasOwnProperty("dropDownName")&&arg.hasOwnProperty("field")&&Object.values(PIVOT_SUPPORTED_AGGS).includes(arg.agg)}function isPivotAggsConfigPercentiles(arg){return arg.hasOwnProperty("agg")&&arg.hasOwnProperty("field")&&arg.hasOwnProperty("percents")&&arg.agg===PIVOT_SUPPORTED_AGGS.PERCENTILES}function getEsAggFromAggConfig(groupByConfig){var esAgg=_objectSpread({},groupByConfig);delete esAgg.agg;delete esAgg.aggName;delete esAgg.dropDownName;return _defineProperty({},groupByConfig.agg,esAgg)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_QUERY_LANGUAGE=void 0;var DEFAULT_QUERY_LANGUAGE="kuery";exports.DEFAULT_QUERY_LANGUAGE=DEFAULT_QUERY_LANGUAGE},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _es_query=__webpack_require__(282);Object.keys(_es_query).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _es_query[key]}})}));var _filters=__webpack_require__(54);Object.keys(_filters).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _filters[key]}})}));var _kuery=__webpack_require__(131);Object.keys(_kuery).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _kuery[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"buildEsQuery",{enumerable:true,get:function get(){return _build_es_query.buildEsQuery}});Object.defineProperty(exports,"EsQueryConfig",{enumerable:true,get:function get(){return _build_es_query.EsQueryConfig}});Object.defineProperty(exports,"buildQueryFromFilters",{enumerable:true,get:function get(){return _from_filters.buildQueryFromFilters}});Object.defineProperty(exports,"luceneStringToDsl",{enumerable:true,get:function get(){return _lucene_string_to_dsl.luceneStringToDsl}});Object.defineProperty(exports,"decorateQuery",{enumerable:true,get:function get(){return _decorate_query.decorateQuery}});Object.defineProperty(exports,"getEsQueryConfig",{enumerable:true,get:function get(){return _get_es_query_config.getEsQueryConfig}});var _build_es_query=__webpack_require__(283);var _from_filters=__webpack_require__(142);var _lucene_string_to_dsl=__webpack_require__(144);var _decorate_query=__webpack_require__(143);var _get_es_query_config=__webpack_require__(314)},function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}Object.defineProperty(exports,"__esModule",{value:true});exports.buildEsQuery=buildEsQuery;var _lodash=__webpack_require__(41);var _from_kuery=__webpack_require__(284);var _from_filters=__webpack_require__(142);var _from_lucene=__webpack_require__(312);function buildEsQuery(indexPattern,queries,filters){var config=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{allowLeadingWildcards:false,queryStringOptions:{},ignoreFilterIfFieldNotInIndex:false};queries=Array.isArray(queries)?queries:[queries];filters=Array.isArray(filters)?filters:[filters];var validQueries=queries.filter((function(query){return(0,_lodash.has)(query,"query")}));var queriesByLanguage=(0,_lodash.groupBy)(validQueries,"language");var kueryQuery=(0,_from_kuery.buildQueryFromKuery)(indexPattern,queriesByLanguage.kuery,config.allowLeadingWildcards,config.dateFormatTZ);var luceneQuery=(0,_from_lucene.buildQueryFromLucene)(queriesByLanguage.lucene,config.queryStringOptions,config.dateFormatTZ);var filterQuery=(0,_from_filters.buildQueryFromFilters)(filters,indexPattern,config.ignoreFilterIfFieldNotInIndex);return{bool:{must:[].concat(_toConsumableArray(kueryQuery.must),_toConsumableArray(luceneQuery.must),_toConsumableArray(filterQuery.must)),filter:[].concat(_toConsumableArray(kueryQuery.filter),_toConsumableArray(luceneQuery.filter),_toConsumableArray(filterQuery.filter)),should:[].concat(_toConsumableArray(kueryQuery.should),_toConsumableArray(luceneQuery.should),_toConsumableArray(filterQuery.should)),must_not:[].concat(_toConsumableArray(kueryQuery.must_not),_toConsumableArray(luceneQuery.must_not),_toConsumableArray(filterQuery.must_not))}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildQueryFromKuery=buildQueryFromKuery;var _kuery=__webpack_require__(131);function buildQueryFromKuery(indexPattern){var queries=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var allowLeadingWildcards=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var dateFormatTZ=arguments.length>3?arguments[3]:undefined;var queryASTs=queries.map((function(query){return(0,_kuery.fromKueryExpression)(query.query,{allowLeadingWildcards:allowLeadingWildcards})}));return buildQuery(indexPattern,queryASTs,{dateFormatTZ:dateFormatTZ})}function buildQuery(indexPattern,queryASTs){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var compoundQueryAST=_kuery.nodeTypes.function.buildNode("and",queryASTs);var kueryQuery=(0,_kuery.toElasticsearchQuery)(compoundQueryAST,indexPattern,config);return Object.assign({must:[],filter:[],should:[],must_not:[]},kueryQuery.bool)}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNode=buildNode;exports.buildNodeWithArgumentNodes=buildNodeWithArgumentNodes;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=_interopRequireDefault(__webpack_require__(41));var _functions=__webpack_require__(286);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function buildNode(functionName){var kueryFunction=_functions.functions[functionName];if(_lodash.default.isUndefined(kueryFunction)){throw new Error('Unknown function "'.concat(functionName,'"'))}for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}return _objectSpread({type:"function",function:functionName},kueryFunction.buildNodeParams.apply(kueryFunction,args))}function buildNodeWithArgumentNodes(functionName,args){if(_lodash.default.isUndefined(_functions.functions[functionName])){throw new Error('Unknown function "'.concat(functionName,'"'))}return{type:"function",function:functionName,arguments:args}}function toElasticsearchQuery(node,indexPattern,config,context){var kueryFunction=_functions.functions[node.function];return kueryFunction.toElasticsearchQuery(node,indexPattern,config,context)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.functions=void 0;var is=_interopRequireWildcard(__webpack_require__(287));var and=_interopRequireWildcard(__webpack_require__(298));var or=_interopRequireWildcard(__webpack_require__(299));var not=_interopRequireWildcard(__webpack_require__(300));var range=_interopRequireWildcard(__webpack_require__(301));var exists=_interopRequireWildcard(__webpack_require__(302));var geoBoundingBox=_interopRequireWildcard(__webpack_require__(303));var geoPolygon=_interopRequireWildcard(__webpack_require__(304));var nested=_interopRequireWildcard(__webpack_require__(305));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var functions={is:is,and:and,or:or,not:not,range:range,exists:exists,geoBoundingBox:geoBoundingBox,geoPolygon:geoPolygon,nested:nested};exports.functions=functions},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=__webpack_require__(41);var _filters=__webpack_require__(54);var _get_fields=__webpack_require__(101);var _utils=__webpack_require__(103);var _get_full_field_name_node=__webpack_require__(141);var ast=_interopRequireWildcard(__webpack_require__(57));var literal=_interopRequireWildcard(__webpack_require__(73));var wildcard=_interopRequireWildcard(__webpack_require__(102));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(fieldName,value){var isPhrase=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if((0,_lodash.isUndefined)(fieldName)){throw new Error("fieldName is a required argument")}if((0,_lodash.isUndefined)(value)){throw new Error("value is a required argument")}var fieldNode=typeof fieldName==="string"?ast.fromLiteralExpression(fieldName):literal.buildNode(fieldName);var valueNode=typeof value==="string"?ast.fromLiteralExpression(value):literal.buildNode(value);var isPhraseNode=literal.buildNode(isPhrase);return{arguments:[fieldNode,valueNode,isPhraseNode]}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _node$arguments=_slicedToArray(node.arguments,3),fieldNameArg=_node$arguments[0],valueArg=_node$arguments[1],isPhraseArg=_node$arguments[2];var fullFieldNameArg=(0,_get_full_field_name_node.getFullFieldNameNode)(fieldNameArg,indexPattern,(context===null||context===void 0?void 0:context.nested)?context.nested.path:undefined);var fieldName=ast.toElasticsearchQuery(fullFieldNameArg);var value=!(0,_lodash.isUndefined)(valueArg)?ast.toElasticsearchQuery(valueArg):valueArg;var type=isPhraseArg.value?"phrase":"best_fields";if(fullFieldNameArg.value===null){if(valueArg.type==="wildcard"){return{query_string:{query:wildcard.toQueryStringQuery(valueArg)}}}return{multi_match:{type:type,query:value,lenient:true}}}var fields=indexPattern?(0,_get_fields.getFields)(fullFieldNameArg,indexPattern):[];if(fields&&fields.length===0){fields.push({name:ast.toElasticsearchQuery(fullFieldNameArg),scripted:false,type:""})}var isExistsQuery=valueArg.type==="wildcard"&&value==="*";var isAllFieldsQuery=fullFieldNameArg.type==="wildcard"&&fieldName==="*"||fields&&indexPattern&&fields.length===indexPattern.fields.length;var isMatchAllQuery=isExistsQuery&&isAllFieldsQuery;if(isMatchAllQuery){return{match_all:{}}}var queries=fields.reduce((function(accumulator,field){var wrapWithNestedQuery=function wrapWithNestedQuery(query){if(!(fullFieldNameArg.type==="wildcard")||!(0,_lodash.get)(field,"subType.nested")||(context===null||context===void 0?void 0:context.nested)){return query}else{return{nested:{path:field.subType.nested.path,query:query,score_mode:"none"}}}};if(field.scripted){if(!isExistsQuery){return[].concat(_toConsumableArray(accumulator),[{script:_objectSpread({},(0,_filters.getPhraseScript)(field,value))}])}}else if(isExistsQuery){return[].concat(_toConsumableArray(accumulator),[wrapWithNestedQuery({exists:{field:field.name}})])}else if(valueArg.type==="wildcard"){return[].concat(_toConsumableArray(accumulator),[wrapWithNestedQuery({query_string:{fields:[field.name],query:wildcard.toQueryStringQuery(valueArg)}})])}else if(field.type==="date"){var timeZoneParam=config.dateFormatTZ?{time_zone:(0,_utils.getTimeZoneFromSettings)(config.dateFormatTZ)}:{};return[].concat(_toConsumableArray(accumulator),[wrapWithNestedQuery({range:_defineProperty({},field.name,_objectSpread({gte:value,lte:value},timeZoneParam))})])}else{var queryType=type==="phrase"?"match_phrase":"match";return[].concat(_toConsumableArray(accumulator),[wrapWithNestedQuery(_defineProperty({},queryType,_defineProperty({},field.name,value)))])}}),[]);return{bool:{should:queries||[],minimum_should_match:1}}}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.buildFilter=buildFilter;exports.buildCustomFilter=buildCustomFilter;var _=__webpack_require__(54);function buildFilter(indexPattern,field,type,negate,disabled,params,alias,store){var filter=buildBaseFilter(indexPattern,field,type,params);filter.meta.alias=alias;filter.meta.negate=negate;filter.meta.disabled=disabled;filter.$state={store:store};return filter}function buildCustomFilter(indexPatternString,queryDsl,disabled,negate,alias,store){var meta={index:indexPatternString,type:_.FILTERS.CUSTOM,disabled:disabled,negate:negate,alias:alias};var filter=_objectSpread({},queryDsl,{meta:meta});filter.$state={store:store};return filter}function buildBaseFilter(indexPattern,field,type,params){switch(type){case"phrase":return(0,_.buildPhraseFilter)(field,params,indexPattern);case"phrases":return(0,_.buildPhrasesFilter)(field,params,indexPattern);case"range":var newParams={gte:params.from,lt:params.to};return(0,_.buildRangeFilter)(field,newParams,indexPattern);case"exists":return(0,_.buildExistsFilter)(field,indexPattern);default:throw new Error("Unknown filter type: ".concat(type))}}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDisplayValueFromFilter=getDisplayValueFromFilter;var _lodash=__webpack_require__(41);var _i18n=__webpack_require__(0);var _get_index_pattern_from_filter=__webpack_require__(136);function getValueFormatter(indexPattern,key){if(!indexPattern||!key)return;var format=(0,_lodash.get)(indexPattern,["fields","byName",key,"format"]);if(!format&&indexPattern.fields.getByName){var field=indexPattern.fields.getByName(key);if(!field){throw new Error(_i18n.i18n.translate("data.filter.filterBar.fieldNotFound",{defaultMessage:"Field {key} not found in index pattern {indexPattern}",values:{key:key,indexPattern:indexPattern.title}}))}format=field.format}return format}function getDisplayValueFromFilter(filter,indexPatterns){var indexPattern=(0,_get_index_pattern_from_filter.getIndexPatternFromFilter)(filter,indexPatterns);if(typeof filter.meta.value==="function"){var valueFormatter=getValueFormatter(indexPattern,filter.meta.key);return filter.meta.value(valueFormatter)}else{return filter.meta.value||""}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFilterField=void 0;var _exists_filter=__webpack_require__(133);var _geo_bounding_box_filter=__webpack_require__(134);var _geo_polygon_filter=__webpack_require__(135);var _phrase_filter=__webpack_require__(100);var _phrases_filter=__webpack_require__(137);var _range_filter=__webpack_require__(138);var _missing_filter=__webpack_require__(139);var getFilterField=function getFilterField(filter){if((0,_exists_filter.isExistsFilter)(filter)){return(0,_exists_filter.getExistsFilterField)(filter)}if((0,_geo_bounding_box_filter.isGeoBoundingBoxFilter)(filter)){return(0,_geo_bounding_box_filter.getGeoBoundingBoxFilterField)(filter)}if((0,_geo_polygon_filter.isGeoPolygonFilter)(filter)){return(0,_geo_polygon_filter.getGeoPolygonFilterField)(filter)}if((0,_phrase_filter.isPhraseFilter)(filter)){return(0,_phrase_filter.getPhraseFilterField)(filter)}if((0,_phrases_filter.isPhrasesFilter)(filter)){return(0,_phrases_filter.getPhrasesFilterField)(filter)}if((0,_range_filter.isRangeFilter)(filter)){return(0,_range_filter.getRangeFilterField)(filter)}if((0,_missing_filter.isMissingFilter)(filter)){return(0,_missing_filter.getMissingFilterField)(filter)}return};exports.getFilterField=getFilterField},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFilterParams=getFilterParams;var _=__webpack_require__(54);function getFilterParams(filter){switch(filter.meta.type){case _.FILTERS.PHRASE:return filter.meta.params.query;case _.FILTERS.PHRASES:return filter.meta.params;case _.FILTERS.RANGE:return{from:filter.meta.params.gte,to:filter.meta.params.lt}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isMatchAllFilter=void 0;var isMatchAllFilter=function isMatchAllFilter(filter){return filter&&filter.match_all};exports.isMatchAllFilter=isMatchAllFilter},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.unpinFilter=exports.pinFilter=exports.disableFilter=exports.enableFilter=exports.toggleFilterPinned=exports.toggleFilterNegated=exports.toggleFilterDisabled=exports.isFilterPinned=exports.buildEmptyFilter=exports.FilterStateStore=void 0;var FilterStateStore;exports.FilterStateStore=FilterStateStore;(function(FilterStateStore){FilterStateStore["APP_STATE"]="appState";FilterStateStore["GLOBAL_STATE"]="globalState"})(FilterStateStore||(exports.FilterStateStore=FilterStateStore={}));var buildEmptyFilter=function buildEmptyFilter(isPinned,index){var meta={disabled:false,negate:false,alias:null,index:index};var $state={store:isPinned?FilterStateStore.GLOBAL_STATE:FilterStateStore.APP_STATE};return{meta:meta,$state:$state}};exports.buildEmptyFilter=buildEmptyFilter;var isFilterPinned=function isFilterPinned(filter){return filter.$state&&filter.$state.store===FilterStateStore.GLOBAL_STATE};exports.isFilterPinned=isFilterPinned;var toggleFilterDisabled=function toggleFilterDisabled(filter){var disabled=!filter.meta.disabled;var meta=_objectSpread({},filter.meta,{disabled:disabled});return _objectSpread({},filter,{meta:meta})};exports.toggleFilterDisabled=toggleFilterDisabled;var toggleFilterNegated=function toggleFilterNegated(filter){var negate=!filter.meta.negate;var meta=_objectSpread({},filter.meta,{negate:negate});return _objectSpread({},filter,{meta:meta})};exports.toggleFilterNegated=toggleFilterNegated;var toggleFilterPinned=function toggleFilterPinned(filter){var store=isFilterPinned(filter)?FilterStateStore.APP_STATE:FilterStateStore.GLOBAL_STATE;var $state=_objectSpread({},filter.$state,{store:store});return _objectSpread({},filter,{$state:$state})};exports.toggleFilterPinned=toggleFilterPinned;var enableFilter=function enableFilter(filter){return!filter.meta.disabled?filter:toggleFilterDisabled(filter)};exports.enableFilter=enableFilter;var disableFilter=function disableFilter(filter){return filter.meta.disabled?filter:toggleFilterDisabled(filter)};exports.disableFilter=disableFilter;var pinFilter=function pinFilter(filter){return isFilterPinned(filter)?filter:toggleFilterPinned(filter)};exports.pinFilter=pinFilter;var unpinFilter=function unpinFilter(filter){return!isFilterPinned(filter)?filter:toggleFilterPinned(filter)};exports.unpinFilter=unpinFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildQueryFilter=exports.isQueryStringFilter=void 0;var isQueryStringFilter=function isQueryStringFilter(filter){return filter&&filter.query&&filter.query.query_string};exports.isQueryStringFilter=isQueryStringFilter;var buildQueryFilter=function buildQueryFilter(query,index,alias){return{query:query,meta:{index:index,alias:alias}}};exports.buildQueryFilter=buildQueryFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FILTERS=void 0;var FILTERS;exports.FILTERS=FILTERS;(function(FILTERS){FILTERS["CUSTOM"]="custom";FILTERS["PHRASES"]="phrases";FILTERS["PHRASE"]="phrase";FILTERS["EXISTS"]="exists";FILTERS["MATCH_ALL"]="match_all";FILTERS["MISSING"]="missing";FILTERS["QUERY_STRING"]="query_string";FILTERS["RANGE"]="range";FILTERS["GEO_BOUNDING_BOX"]="geo_bounding_box";FILTERS["GEO_POLYGON"]="geo_polygon";FILTERS["SPATIAL_FILTER"]="spatial_filter"})(FILTERS||(exports.FILTERS=FILTERS={}))},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}module.exports=function(){"use strict";function peg$subclass(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor}function peg$SyntaxError(message,expected,found,location){this.message=message;this.expected=expected;this.found=found;this.location=location;this.name="SyntaxError";if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,peg$SyntaxError)}}peg$subclass(peg$SyntaxError,Error);function peg$parse(input){var options=arguments.length>1?arguments[1]:{},parser=this,peg$FAILED={},peg$startRuleFunctions={start:peg$parsestart,Literal:peg$parseLiteral},peg$startRuleFunction=peg$parsestart,peg$c0=function peg$c0(query,trailing){if(trailing.type==="cursor"){return _objectSpread({},trailing,{suggestionTypes:["conjunction"]})}if(query!==null)return query;return nodeTypes.function.buildNode("is","*","*")},peg$c1=function peg$c1(){return errorOnLuceneSyntax},peg$c2=function peg$c2(left,right){var cursor=[left,right].find((function(node){return node.type==="cursor"}));if(cursor)return cursor;return buildFunctionNode("or",[left,right])},peg$c3=function peg$c3(left,right){var cursor=[left,right].find((function(node){return node.type==="cursor"}));if(cursor)return cursor;return buildFunctionNode("and",[left,right])},peg$c4=function peg$c4(query){if(query.type==="cursor")return query;return buildFunctionNode("not",[query])},peg$c5="(",peg$c6={type:"literal",value:"(",description:'"("'},peg$c7=")",peg$c8={type:"literal",value:")",description:'")"'},peg$c9=function peg$c9(query,trailing){if(trailing.type==="cursor"){return _objectSpread({},trailing,{suggestionTypes:["conjunction"]})}return query},peg$c10=":",peg$c11={type:"literal",value:":",description:'":"'},peg$c12="{",peg$c13={type:"literal",value:"{",description:'"{"'},peg$c14="}",peg$c15={type:"literal",value:"}",description:'"}"'},peg$c16=function peg$c16(field,query,trailing){if(query.type==="cursor"){return _objectSpread({},query,{nestedPath:query.nestedPath?"".concat(field.value,".").concat(query.nestedPath):field.value})}if(trailing.type==="cursor"){return _objectSpread({},trailing,{suggestionTypes:["conjunction"]})}return buildFunctionNode("nested",[field,query])},peg$c17={type:"other",description:"fieldName"},peg$c18=function peg$c18(field,operator,value){if(value.type==="cursor"){return _objectSpread({},value,{suggestionTypes:["conjunction"]})}var range=buildNamedArgNode(operator,value);return buildFunctionNode("range",[field,range])},peg$c19=function peg$c19(field,partial){if(partial.type==="cursor"){return _objectSpread({},partial,{fieldName:field.value,suggestionTypes:["value","conjunction"]})}return partial(field)},peg$c20=function peg$c20(partial){if(partial.type==="cursor"){var fieldName="".concat(partial.prefix).concat(partial.suffix).trim();return _objectSpread({},partial,{fieldName:fieldName,suggestionTypes:["field","operator","conjunction"]})}var field=buildLiteralNode(null);return partial(field)},peg$c21=function peg$c21(partial,trailing){if(trailing.type==="cursor"){return _objectSpread({},trailing,{suggestionTypes:["conjunction"]})}return partial},peg$c22=function peg$c22(partialLeft,partialRight){var cursor=[partialLeft,partialRight].find((function(node){return node.type==="cursor"}));if(cursor){return _objectSpread({},cursor,{suggestionTypes:["value"]})}return function(field){return buildFunctionNode("or",[partialLeft(field),partialRight(field)])}},peg$c23=function peg$c23(partialLeft,partialRight){var cursor=[partialLeft,partialRight].find((function(node){return node.type==="cursor"}));if(cursor){return _objectSpread({},cursor,{suggestionTypes:["value"]})}return function(field){return buildFunctionNode("and",[partialLeft(field),partialRight(field)])}},peg$c24=function peg$c24(partial){if(partial.type==="cursor"){return _objectSpread({},list,{suggestionTypes:["value"]})}return function(field){return buildFunctionNode("not",[partial(field)])}},peg$c25={type:"other",description:"value"},peg$c26=function peg$c26(value){if(value.type==="cursor")return value;var isPhrase=buildLiteralNode(true);return function(field){return buildFunctionNode("is",[field,value,isPhrase])}},peg$c27=function peg$c27(value){if(value.type==="cursor")return value;if(!allowLeadingWildcards&&value.type==="wildcard"&&nodeTypes.wildcard.hasLeadingWildcard(value)){error("Leading wildcards are disabled. See query:allowLeadingWildcards in Advanced Settings.")}var isPhrase=buildLiteralNode(false);return function(field){return buildFunctionNode("is",[field,value,isPhrase])}},peg$c28={type:"other",description:"OR"},peg$c29="or",peg$c30={type:"literal",value:"or",description:'"or"'},peg$c31={type:"other",description:"AND"},peg$c32="and",peg$c33={type:"literal",value:"and",description:'"and"'},peg$c34={type:"other",description:"NOT"},peg$c35="not",peg$c36={type:"literal",value:"not",description:'"not"'},peg$c37={type:"other",description:"literal"},peg$c38='"',peg$c39={type:"literal",value:'"',description:'"\\""'},peg$c40=function peg$c40(prefix,cursor,suffix){var _location=location(),start=_location.start,end=_location.end;return{type:"cursor",start:start.offset,end:end.offset-cursor.length,prefix:prefix.join(""),suffix:suffix.join(""),text:text().replace(cursor,"")}},peg$c41=function peg$c41(chars){return buildLiteralNode(chars.join(""))},peg$c42="\\",peg$c43={type:"literal",value:"\\",description:'"\\\\"'},peg$c44=/^[\\"]/,peg$c45={type:"class",value:'[\\\\"]',description:'[\\\\"]'},peg$c46=function peg$c46(char){return char},peg$c47=/^[^"]/,peg$c48={type:"class",value:'[^"]',description:'[^"]'},peg$c49=function peg$c49(chars){var sequence=chars.join("").trim();if(sequence==="null")return buildLiteralNode(null);if(sequence==="true")return buildLiteralNode(true);if(sequence==="false")return buildLiteralNode(false);if(chars.includes(wildcardSymbol))return buildWildcardNode(sequence);var number=Number(sequence);var value=isNaN(number)?sequence:number;return buildLiteralNode(value)},peg$c50={type:"any",description:"any character"},peg$c51="*",peg$c52={type:"literal",value:"*",description:'"*"'},peg$c53=function peg$c53(){return wildcardSymbol},peg$c54="\\t",peg$c55={type:"literal",value:"\\t",description:'"\\\\t"'},peg$c56=function peg$c56(){return"\t"},peg$c57="\\r",peg$c58={type:"literal",value:"\\r",description:'"\\\\r"'},peg$c59=function peg$c59(){return"\r"},peg$c60="\\n",peg$c61={type:"literal",value:"\\n",description:'"\\\\n"'},peg$c62=function peg$c62(){return"\n"},peg$c63=function peg$c63(keyword){return keyword},peg$c64=/^[\\():<>"*{}]/,peg$c65={type:"class",value:'[\\\\():<>"*{}]',description:'[\\\\():<>"*{}]'},peg$c66="<=",peg$c67={type:"literal",value:"<=",description:'"<="'},peg$c68=function peg$c68(){return"lte"},peg$c69=">=",peg$c70={type:"literal",value:">=",description:'">="'},peg$c71=function peg$c71(){return"gte"},peg$c72="<",peg$c73={type:"literal",value:"<",description:'"<"'},peg$c74=function peg$c74(){return"lt"},peg$c75=">",peg$c76={type:"literal",value:">",description:'">"'},peg$c77=function peg$c77(){return"gt"},peg$c78={type:"other",description:"whitespace"},peg$c79=/^[ \t\r\n]/,peg$c80={type:"class",value:"[\\ \\t\\r\\n]",description:"[\\ \\t\\r\\n]"},peg$c81=function peg$c81(){return parseCursor},peg$c82="@kuery-cursor@",peg$c83={type:"literal",value:"@kuery-cursor@",description:'"@kuery-cursor@"'},peg$c84=function peg$c84(){return cursorSymbol},peg$c85="||",peg$c86={type:"literal",value:"||",description:'"||"'},peg$c87=function peg$c87(){error("LuceneOr")},peg$c88="&&",peg$c89={type:"literal",value:"&&",description:'"&&"'},peg$c90=function peg$c90(){error("LuceneAnd")},peg$c91="+",peg$c92={type:"literal",value:"+",description:'"+"'},peg$c93="-",peg$c94={type:"literal",value:"-",description:'"-"'},peg$c95=function peg$c95(){error("LuceneNot")},peg$c96="!",peg$c97={type:"literal",value:"!",description:'"!"'},peg$c98="_exists_",peg$c99={type:"literal",value:"_exists_",description:'"_exists_"'},peg$c100=function peg$c100(){error("LuceneExists")},peg$c101=function peg$c101(){error("LuceneRange")},peg$c102="?",peg$c103={type:"literal",value:"?",description:'"?"'},peg$c104=function peg$c104(){error("LuceneWildcard")},peg$c105="/",peg$c106={type:"literal",value:"/",description:'"/"'},peg$c107=/^[^\/]/,peg$c108={type:"class",value:"[^/]",description:"[^/]"},peg$c109=function peg$c109(){error("LuceneRegex")},peg$c110="~",peg$c111={type:"literal",value:"~",description:'"~"'},peg$c112=/^[0-9]/,peg$c113={type:"class",value:"[0-9]",description:"[0-9]"},peg$c114=function peg$c114(){error("LuceneFuzzy")},peg$c115=function peg$c115(){error("LuceneProximity")},peg$c116="^",peg$c117={type:"literal",value:"^",description:'"^"'},peg$c118=function peg$c118(){error("LuceneBoost")},peg$c119=function peg$c119(){return char},peg$c120="=",peg$c121={type:"literal",value:"=",description:'"="'},peg$c122="[",peg$c123={type:"literal",value:"[",description:'"["'},peg$c124="]",peg$c125={type:"literal",value:"]",description:'"]"'},peg$c126="TO",peg$c127={type:"literal",value:"TO",description:'"TO"'},peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1,seenCR:false}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0,peg$result;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions)){throw new Error("Can't start parsing from rule \""+options.startRule+'".')}peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function text(){return input.substring(peg$savedPos,peg$currPos)}function location(){return peg$computeLocation(peg$savedPos,peg$currPos)}function expected(description){throw peg$buildException(null,[{type:"other",description:description}],input.substring(peg$savedPos,peg$currPos),peg$computeLocation(peg$savedPos,peg$currPos))}function error(message){throw peg$buildException(message,null,input.substring(peg$savedPos,peg$currPos),peg$computeLocation(peg$savedPos,peg$currPos))}function peg$computePosDetails(pos){var details=peg$posDetailsCache[pos],p,ch;if(details){return details}else{p=pos-1;while(!peg$posDetailsCache[p]){p--}details=peg$posDetailsCache[p];details={line:details.line,column:details.column,seenCR:details.seenCR};while(p<pos){ch=input.charAt(p);if(ch==="\n"){if(!details.seenCR){details.line++}details.column=1;details.seenCR=false}else if(ch==="\r"||ch==="\u2028"||ch==="\u2029"){details.line++;details.column=1;details.seenCR=true}else{details.column++;details.seenCR=false}p++}peg$posDetailsCache[pos]=details;return details}}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){if(peg$currPos<peg$maxFailPos){return}if(peg$currPos>peg$maxFailPos){peg$maxFailPos=peg$currPos;peg$maxFailExpected=[]}peg$maxFailExpected.push(expected)}function peg$buildException(message,expected,found,location){function cleanupExpected(expected){var i=1;expected.sort((function(a,b){if(a.description<b.description){return-1}else if(a.description>b.description){return 1}else{return 0}}));while(i<expected.length){if(expected[i-1]===expected[i]){expected.splice(i,1)}else{i++}}}function buildMessage(expected,found){function stringEscape(s){function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(ch){return"\\x0"+hex(ch)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(ch){return"\\x"+hex(ch)})).replace(/[\u0100-\u0FFF]/g,(function(ch){return"\\u0"+hex(ch)})).replace(/[\u1000-\uFFFF]/g,(function(ch){return"\\u"+hex(ch)}))}var expectedDescs=new Array(expected.length),expectedDesc,foundDesc,i;for(i=0;i<expected.length;i++){expectedDescs[i]=expected[i].description}expectedDesc=expected.length>1?expectedDescs.slice(0,-1).join(", ")+" or "+expectedDescs[expected.length-1]:expectedDescs[0];foundDesc=found?'"'+stringEscape(found)+'"':"end of input";return"Expected "+expectedDesc+" but "+foundDesc+" found."}if(expected!==null){cleanupExpected(expected)}return new peg$SyntaxError(message!==null?message:buildMessage(expected,found),expected,found,location)}function peg$parsestart(){var s0,s1,s2,s3;s0=peg$currPos;s1=[];s2=peg$parseSpace();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}if(s1!==peg$FAILED){s2=peg$parseOrQuery();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){s3=peg$parseOptionalSpace();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c0(s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseOrQuery(){var s0,s1,s2,s3;s0=peg$currPos;peg$savedPos=peg$currPos;s1=peg$c1();if(s1){s1=void 0}else{s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$parseLuceneQuery();if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseAndQuery();if(s1!==peg$FAILED){s2=peg$parseOr();if(s2!==peg$FAILED){s3=peg$parseOrQuery();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c2(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseAndQuery()}}return s0}function peg$parseAndQuery(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseNotQuery();if(s1!==peg$FAILED){s2=peg$parseAnd();if(s2!==peg$FAILED){s3=peg$parseAndQuery();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c3(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseNotQuery()}return s0}function peg$parseNotQuery(){var s0,s1,s2;s0=peg$currPos;s1=peg$parseNot();if(s1!==peg$FAILED){s2=peg$parseSubQuery();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c4(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseSubQuery()}return s0}function peg$parseSubQuery(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===40){s1=peg$c5;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c6)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){s3=peg$parseOrQuery();if(s3!==peg$FAILED){s4=peg$parseOptionalSpace();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s5=peg$c7;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c8)}}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c9(s3,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseNestedQuery()}return s0}function peg$parseNestedQuery(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9;s0=peg$currPos;s1=peg$parseField();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s3=peg$c10;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s3!==peg$FAILED){s4=[];s5=peg$parseSpace();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseSpace()}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===123){s5=peg$c12;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}if(s5!==peg$FAILED){s6=[];s7=peg$parseSpace();while(s7!==peg$FAILED){s6.push(s7);s7=peg$parseSpace()}if(s6!==peg$FAILED){s7=peg$parseOrQuery();if(s7!==peg$FAILED){s8=peg$parseOptionalSpace();if(s8!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s9=peg$c14;peg$currPos++}else{s9=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c15)}}if(s9!==peg$FAILED){peg$savedPos=s0;s1=peg$c16(s1,s7,s8);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseExpression()}return s0}function peg$parseExpression(){var s0;s0=peg$parseFieldRangeExpression();if(s0===peg$FAILED){s0=peg$parseFieldValueExpression();if(s0===peg$FAILED){s0=peg$parseValueExpression()}}return s0}function peg$parseField(){var s0,s1;peg$silentFails++;s0=peg$parseLiteral();peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c17)}}return s0}function peg$parseFieldRangeExpression(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseField();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){s3=peg$parseRangeOperator();if(s3!==peg$FAILED){s4=[];s5=peg$parseSpace();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseSpace()}if(s4!==peg$FAILED){s5=peg$parseLiteral();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c18(s1,s3,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseFieldValueExpression(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseField();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s3=peg$c10;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s3!==peg$FAILED){s4=[];s5=peg$parseSpace();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseSpace()}if(s4!==peg$FAILED){s5=peg$parseListOfValues();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c19(s1,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseValueExpression(){var s0,s1;s0=peg$currPos;s1=peg$parseValue();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c20(s1)}s0=s1;return s0}function peg$parseListOfValues(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===40){s1=peg$c5;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c6)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){s3=peg$parseOrListOfValues();if(s3!==peg$FAILED){s4=peg$parseOptionalSpace();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s5=peg$c7;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c8)}}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c21(s3,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseValue()}return s0}function peg$parseOrListOfValues(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseAndListOfValues();if(s1!==peg$FAILED){s2=peg$parseOr();if(s2!==peg$FAILED){s3=peg$parseOrListOfValues();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c22(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseAndListOfValues()}return s0}function peg$parseAndListOfValues(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseNotListOfValues();if(s1!==peg$FAILED){s2=peg$parseAnd();if(s2!==peg$FAILED){s3=peg$parseAndListOfValues();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c23(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseNotListOfValues()}return s0}function peg$parseNotListOfValues(){var s0,s1,s2;s0=peg$currPos;s1=peg$parseNot();if(s1!==peg$FAILED){s2=peg$parseListOfValues();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c24(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseListOfValues()}return s0}function peg$parseValue(){var s0,s1;peg$silentFails++;s0=peg$currPos;s1=peg$parseQuotedString();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c26(s1)}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseUnquotedLiteral();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c27(s1)}s0=s1}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c25)}}return s0}function peg$parseOr(){var s0,s1,s2,s3,s4;peg$silentFails++;s0=peg$currPos;s1=[];s2=peg$parseSpace();if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}}else{s1=peg$FAILED}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2).toLowerCase()===peg$c29){s2=input.substr(peg$currPos,2);peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c30)}}if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();if(s4!==peg$FAILED){while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}}else{s3=peg$FAILED}if(s3!==peg$FAILED){s1=[s1,s2,s3];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;peg$savedPos=peg$currPos;s1=peg$c1();if(s1){s1=void 0}else{s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$parseLuceneOr();if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c28)}}return s0}function peg$parseAnd(){var s0,s1,s2,s3,s4;peg$silentFails++;s0=peg$currPos;s1=[];s2=peg$parseSpace();if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}}else{s1=peg$FAILED}if(s1!==peg$FAILED){if(input.substr(peg$currPos,3).toLowerCase()===peg$c32){s2=input.substr(peg$currPos,3);peg$currPos+=3}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c33)}}if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();if(s4!==peg$FAILED){while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}}else{s3=peg$FAILED}if(s3!==peg$FAILED){s1=[s1,s2,s3];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;peg$savedPos=peg$currPos;s1=peg$c1();if(s1){s1=void 0}else{s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$parseLuceneAnd();if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c31)}}return s0}function peg$parseNot(){var s0,s1,s2,s3;peg$silentFails++;s0=peg$currPos;if(input.substr(peg$currPos,3).toLowerCase()===peg$c35){s1=input.substr(peg$currPos,3);peg$currPos+=3}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c36)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();if(s3!==peg$FAILED){while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}}else{s2=peg$FAILED}if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;peg$savedPos=peg$currPos;s1=peg$c1();if(s1){s1=void 0}else{s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$parseLuceneNot();if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c34)}}return s0}function peg$parseLiteral(){var s0,s1;peg$silentFails++;s0=peg$parseQuotedString();if(s0===peg$FAILED){s0=peg$parseUnquotedLiteral()}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c37)}}return s0}function peg$parseQuotedString(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===34){s1=peg$c38;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c39)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseQuotedCharacter();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseQuotedCharacter()}if(s2!==peg$FAILED){s3=peg$parseCursor();if(s3!==peg$FAILED){s4=[];s5=peg$parseQuotedCharacter();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseQuotedCharacter()}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===34){s5=peg$c38;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c39)}}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c40(s2,s3,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===34){s1=peg$c38;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c39)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseQuotedCharacter();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseQuotedCharacter()}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===34){s3=peg$c38;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c39)}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c41(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}return s0}function peg$parseQuotedCharacter(){var s0,s1,s2;s0=peg$parseEscapedWhitespace();if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s1=peg$c42;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}if(s1!==peg$FAILED){if(peg$c44.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c45)}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c46(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$currPos;peg$silentFails++;s2=peg$parseCursor();peg$silentFails--;if(s2===peg$FAILED){s1=void 0}else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){if(peg$c47.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c48)}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c46(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}}return s0}function peg$parseUnquotedLiteral(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseUnquotedCharacter();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseUnquotedCharacter()}if(s1!==peg$FAILED){s2=peg$parseCursor();if(s2!==peg$FAILED){s3=[];s4=peg$parseUnquotedCharacter();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseUnquotedCharacter()}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c40(s1,s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=[];s2=peg$parseUnquotedCharacter();if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseUnquotedCharacter()}}else{s1=peg$FAILED}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c49(s1)}s0=s1}return s0}function peg$parseUnquotedCharacter(){var s0,s1,s2,s3,s4;s0=peg$parseEscapedWhitespace();if(s0===peg$FAILED){s0=peg$parseEscapedSpecialCharacter();if(s0===peg$FAILED){s0=peg$parseEscapedKeyword();if(s0===peg$FAILED){s0=peg$parseWildcard();if(s0===peg$FAILED){s0=peg$currPos;s1=peg$currPos;peg$silentFails++;s2=peg$parseSpecialCharacter();peg$silentFails--;if(s2===peg$FAILED){s1=void 0}else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$currPos;peg$silentFails++;s3=peg$parseKeyword();peg$silentFails--;if(s3===peg$FAILED){s2=void 0}else{peg$currPos=s2;s2=peg$FAILED}if(s2!==peg$FAILED){s3=peg$currPos;peg$silentFails++;s4=peg$parseCursor();peg$silentFails--;if(s4===peg$FAILED){s3=void 0}else{peg$currPos=s3;s3=peg$FAILED}if(s3!==peg$FAILED){if(input.length>peg$currPos){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c50)}}if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c46(s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}}}}return s0}function peg$parseWildcard(){var s0,s1;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===42){s1=peg$c51;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c52)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c53()}s0=s1;return s0}function peg$parseOptionalSpace(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseSpace();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}if(s1!==peg$FAILED){s2=peg$parseCursor();if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c40(s1,s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=[];s1=peg$parseSpace();while(s1!==peg$FAILED){s0.push(s1);s1=peg$parseSpace()}}return s0}function peg$parseEscapedWhitespace(){var s0,s1;s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c54){s1=peg$c54;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c55)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c56()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c57){s1=peg$c57;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c58)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c59()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c60){s1=peg$c60;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c61)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c62()}s0=s1}}return s0}function peg$parseEscapedSpecialCharacter(){var s0,s1,s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s1=peg$c42;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}if(s1!==peg$FAILED){s2=peg$parseSpecialCharacter();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c46(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseEscapedKeyword(){var s0,s1,s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s1=peg$c42;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2).toLowerCase()===peg$c29){s2=input.substr(peg$currPos,2);peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c30)}}if(s2===peg$FAILED){if(input.substr(peg$currPos,3).toLowerCase()===peg$c32){s2=input.substr(peg$currPos,3);peg$currPos+=3}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c33)}}if(s2===peg$FAILED){if(input.substr(peg$currPos,3).toLowerCase()===peg$c35){s2=input.substr(peg$currPos,3);peg$currPos+=3}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c36)}}}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c63(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseKeyword(){var s0;s0=peg$parseOr();if(s0===peg$FAILED){s0=peg$parseAnd();if(s0===peg$FAILED){s0=peg$parseNot()}}return s0}function peg$parseSpecialCharacter(){var s0;if(peg$c64.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c65)}}return s0}function peg$parseRangeOperator(){var s0,s1;s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c66){s1=peg$c66;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c67)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c68()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c69){s1=peg$c69;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c70)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c71()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===60){s1=peg$c72;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c73)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c74()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===62){s1=peg$c75;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c76)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c77()}s0=s1}}}return s0}function peg$parseSpace(){var s0,s1;peg$silentFails++;if(peg$c79.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c80)}}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c78)}}return s0}function peg$parseCursor(){var s0,s1,s2;s0=peg$currPos;peg$savedPos=peg$currPos;s1=peg$c81();if(s1){s1=void 0}else{s1=peg$FAILED}if(s1!==peg$FAILED){if(input.substr(peg$currPos,14)===peg$c82){s2=peg$c82;peg$currPos+=14}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c83)}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c84();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneOr(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseSpace();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c85){s2=peg$c85;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c86)}}if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c87();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneAnd(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseSpace();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c88){s2=peg$c88;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c89)}}if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c90();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===43){s1=peg$c91;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c92)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c90()}s0=s1}return s0}function peg$parseLuceneNot(){var s0,s1;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===45){s1=peg$c93;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c94)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c95()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===33){s1=peg$c96;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c97)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c95()}s0=s1}return s0}function peg$parseLuceneQuery(){var s0;s0=peg$parseLuceneFieldQuery();if(s0===peg$FAILED){s0=peg$parseLuceneValue();if(s0===peg$FAILED){s0=peg$parseLuceneExists()}}return s0}function peg$parseLuceneFieldQuery(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseLuceneLiteral();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s3=peg$c10;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s3!==peg$FAILED){s4=[];s5=peg$parseSpace();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseSpace()}if(s4!==peg$FAILED){s5=peg$parseLuceneValue();if(s5!==peg$FAILED){s1=[s1,s2,s3,s4,s5];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneValue(){var s0;s0=peg$parseLuceneRange();if(s0===peg$FAILED){s0=peg$parseLuceneWildcard();if(s0===peg$FAILED){s0=peg$parseLuceneRegex();if(s0===peg$FAILED){s0=peg$parseLuceneFuzzy();if(s0===peg$FAILED){s0=peg$parseLuceneProximity();if(s0===peg$FAILED){s0=peg$parseLuceneBoost()}}}}}return s0}function peg$parseLuceneExists(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.substr(peg$currPos,8)===peg$c98){s1=peg$c98;peg$currPos+=8}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c99)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s3=peg$c10;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s3!==peg$FAILED){s4=[];s5=peg$parseSpace();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseSpace()}if(s4!==peg$FAILED){s5=peg$parseLuceneLiteral();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c100();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneRange(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;s1=peg$parseRangeOperator();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){s3=peg$parseLuceneLiteral();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c101();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseLuceneRangeStart();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){s3=peg$parseLuceneLiteral();if(s3!==peg$FAILED){s4=peg$parseLuceneTo();if(s4!==peg$FAILED){s5=peg$parseLuceneLiteral();if(s5!==peg$FAILED){s6=peg$parseLuceneRangeEnd();if(s6!==peg$FAILED){peg$savedPos=s0;s1=peg$c101();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}return s0}function peg$parseLuceneWildcard(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseLuceneUnquotedCharacter();if(s2===peg$FAILED){if(input.charCodeAt(peg$currPos)===42){s2=peg$c51;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c52)}}}while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseLuceneUnquotedCharacter();if(s2===peg$FAILED){if(input.charCodeAt(peg$currPos)===42){s2=peg$c51;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c52)}}}}if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===63){s2=peg$c102;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c103)}}if(s2!==peg$FAILED){s3=[];s4=peg$parseLuceneWildcard();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseLuceneWildcard()}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c104();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneRegex(){var s0,s1,s2,s3;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===47){s1=peg$c105;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c106)}}if(s1!==peg$FAILED){s2=[];if(peg$c107.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c108)}}while(s3!==peg$FAILED){s2.push(s3);if(peg$c107.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c108)}}}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===47){s3=peg$c105;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c106)}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c109();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneFuzzy(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseLuceneUnquotedLiteral();if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===126){s2=peg$c110;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c111)}}if(s2!==peg$FAILED){s3=[];if(peg$c112.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c113)}}while(s4!==peg$FAILED){s3.push(s4);if(peg$c112.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c113)}}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c114();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneProximity(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseQuotedString();if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===126){s2=peg$c110;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c111)}}if(s2!==peg$FAILED){s3=[];if(peg$c112.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c113)}}while(s4!==peg$FAILED){s3.push(s4);if(peg$c112.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c113)}}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c115();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneBoost(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseLuceneLiteral();if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===94){s2=peg$c116;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c117)}}if(s2!==peg$FAILED){s3=[];if(peg$c112.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c113)}}while(s4!==peg$FAILED){s3.push(s4);if(peg$c112.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c113)}}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c118();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneLiteral(){var s0;s0=peg$parseQuotedString();if(s0===peg$FAILED){s0=peg$parseLuceneUnquotedLiteral()}return s0}function peg$parseLuceneUnquotedLiteral(){var s0,s1;s0=[];s1=peg$parseLuceneUnquotedCharacter();if(s1!==peg$FAILED){while(s1!==peg$FAILED){s0.push(s1);s1=peg$parseLuceneUnquotedCharacter()}}else{s0=peg$FAILED}return s0}function peg$parseLuceneUnquotedCharacter(){var s0,s1,s2,s3;s0=peg$parseEscapedWhitespace();if(s0===peg$FAILED){s0=peg$parseEscapedLuceneSpecialCharacter();if(s0===peg$FAILED){s0=peg$currPos;s1=peg$currPos;peg$silentFails++;s2=peg$parseLuceneSpecialCharacter();peg$silentFails--;if(s2===peg$FAILED){s1=void 0}else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$currPos;peg$silentFails++;s3=peg$parseLuceneKeyword();peg$silentFails--;if(s3===peg$FAILED){s2=void 0}else{peg$currPos=s2;s2=peg$FAILED}if(s2!==peg$FAILED){if(input.length>peg$currPos){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c50)}}if(s3!==peg$FAILED){s1=[s1,s2,s3];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}}return s0}function peg$parseLuceneKeyword(){var s0;s0=peg$parseOr();if(s0===peg$FAILED){s0=peg$parseAnd();if(s0===peg$FAILED){s0=peg$parseLuceneOr();if(s0===peg$FAILED){s0=peg$parseLuceneAnd();if(s0===peg$FAILED){s0=peg$parseLuceneNot();if(s0===peg$FAILED){s0=peg$parseLuceneTo()}}}}}return s0}function peg$parseEscapedLuceneSpecialCharacter(){var s0,s1,s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s1=peg$c42;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}if(s1!==peg$FAILED){s2=peg$parseLuceneSpecialCharacter();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c119();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneSpecialCharacter(){var s0;if(input.charCodeAt(peg$currPos)===43){s0=peg$c91;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c92)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===45){s0=peg$c93;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c94)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===61){s0=peg$c120;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c121)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===62){s0=peg$c75;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c76)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===60){s0=peg$c72;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c73)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===33){s0=peg$c96;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c97)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===40){s0=peg$c5;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c6)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s0=peg$c7;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c8)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===123){s0=peg$c12;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s0=peg$c14;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c15)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===91){s0=peg$c122;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c123)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===93){s0=peg$c124;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c125)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===94){s0=peg$c116;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c117)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===34){s0=peg$c38;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c39)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===126){s0=peg$c110;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c111)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===42){s0=peg$c51;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c52)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===63){s0=peg$c102;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c103)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s0=peg$c10;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===92){s0=peg$c42;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===47){s0=peg$c105;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c106)}}}}}}}}}}}}}}}}}}}}}return s0}function peg$parseLuceneTo(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseSpace();if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}}else{s1=peg$FAILED}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c126){s2=peg$c126;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c127)}}if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();if(s4!==peg$FAILED){while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}}else{s3=peg$FAILED}if(s3!==peg$FAILED){s1=[s1,s2,s3];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneRangeStart(){var s0;if(input.charCodeAt(peg$currPos)===91){s0=peg$c122;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c123)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===123){s0=peg$c12;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}}return s0}function peg$parseLuceneRangeEnd(){var s0;if(input.charCodeAt(peg$currPos)===93){s0=peg$c124;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c125)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s0=peg$c14;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c15)}}}return s0}var errorOnLuceneSyntax=options.errorOnLuceneSyntax,parseCursor=options.parseCursor,cursorSymbol=options.cursorSymbol,_options$allowLeading=options.allowLeadingWildcards,allowLeadingWildcards=_options$allowLeading===void 0?true:_options$allowLeading,nodeTypes=options.helpers.nodeTypes;var buildFunctionNode=nodeTypes.function.buildNodeWithArgumentNodes;var buildLiteralNode=nodeTypes.literal.buildNode;var buildWildcardNode=nodeTypes.wildcard.buildNode;var buildNamedArgNode=nodeTypes.namedArg.buildNode;var wildcardSymbol=nodeTypes.wildcard.wildcardSymbol;peg$result=peg$startRuleFunction();if(peg$result!==peg$FAILED&&peg$currPos===input.length){return peg$result}else{if(peg$result!==peg$FAILED&&peg$currPos<input.length){peg$fail({type:"end",description:"end of input"})}throw peg$buildException(null,peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}}return{SyntaxError:peg$SyntaxError,parse:peg$parse}}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var ast=_interopRequireWildcard(__webpack_require__(57));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(children){return{arguments:children}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var children=node.arguments||[];return{bool:{filter:children.map((function(child){return ast.toElasticsearchQuery(child,indexPattern,config,context)}))}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var ast=_interopRequireWildcard(__webpack_require__(57));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(children){return{arguments:children}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var children=node.arguments||[];return{bool:{should:children.map((function(child){return ast.toElasticsearchQuery(child,indexPattern,config,context)})),minimum_should_match:1}}}},function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var ast=_interopRequireWildcard(__webpack_require__(57));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(child){return{arguments:[child]}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _node$arguments=_slicedToArray(node.arguments,1),argument=_node$arguments[0];return{bool:{must_not:ast.toElasticsearchQuery(argument,indexPattern,config,context)}}}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=_interopRequireDefault(__webpack_require__(41));var _node_types=__webpack_require__(65);var ast=_interopRequireWildcard(__webpack_require__(57));var _filters=__webpack_require__(54);var _get_fields=__webpack_require__(101);var _utils=__webpack_require__(103);var _get_full_field_name_node=__webpack_require__(141);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function buildNodeParams(fieldName,params){var paramsToMap=_lodash.default.pick(params,"gt","lt","gte","lte","format");var fieldNameArg=typeof fieldName==="string"?ast.fromLiteralExpression(fieldName):_node_types.nodeTypes.literal.buildNode(fieldName);var args=_lodash.default.map(paramsToMap,(function(value,key){return _node_types.nodeTypes.namedArg.buildNode(key,value)}));return{arguments:[fieldNameArg].concat(_toConsumableArray(args))}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _node$arguments=_toArray(node.arguments),fieldNameArg=_node$arguments[0],args=_node$arguments.slice(1);var fullFieldNameArg=(0,_get_full_field_name_node.getFullFieldNameNode)(fieldNameArg,indexPattern,(context===null||context===void 0?void 0:context.nested)?context.nested.path:undefined);var fields=indexPattern?(0,_get_fields.getFields)(fullFieldNameArg,indexPattern):[];var namedArgs=extractArguments(args);var queryParams=_lodash.default.mapValues(namedArgs,(function(arg){return ast.toElasticsearchQuery(arg)}));if(fields&&fields.length===0){fields.push({name:ast.toElasticsearchQuery(fullFieldNameArg),scripted:false,type:""})}var queries=fields.map((function(field){var wrapWithNestedQuery=function wrapWithNestedQuery(query){if(!(fullFieldNameArg.type==="wildcard")||!_lodash.default.get(field,"subType.nested")||context.nested){return query}else{return{nested:{path:field.subType.nested.path,query:query,score_mode:"none"}}}};if(field.scripted){return{script:(0,_filters.getRangeScript)(field,queryParams)}}else if(field.type==="date"){var timeZoneParam=config.dateFormatTZ?{time_zone:(0,_utils.getTimeZoneFromSettings)(config.dateFormatTZ)}:{};return wrapWithNestedQuery({range:_defineProperty({},field.name,_objectSpread({},queryParams,{},timeZoneParam))})}return wrapWithNestedQuery({range:_defineProperty({},field.name,queryParams)})}));return{bool:{should:queries,minimum_should_match:1}}}function extractArguments(args){if(args.gt&&args.gte||args.lt&&args.lte){throw new Error("range ends cannot be both inclusive and exclusive")}var unnamedArgOrder=["gte","lte","format"];return args.reduce((function(acc,arg,index){if(arg.type==="namedArg"){acc[arg.name]=arg.value}else{acc[unnamedArgOrder[index]]=arg}return acc}),{})}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=__webpack_require__(41);var literal=_interopRequireWildcard(__webpack_require__(73));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(fieldName){return{arguments:[literal.buildNode(fieldName)]}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _node$arguments=_slicedToArray(node.arguments,1),fieldNameArg=_node$arguments[0];var fullFieldNameArg=_objectSpread({},fieldNameArg,{value:(context===null||context===void 0?void 0:context.nested)?"".concat(context.nested.path,".").concat(fieldNameArg.value):fieldNameArg.value});var fieldName=literal.toElasticsearchQuery(fullFieldNameArg);var field=(0,_lodash.get)(indexPattern,"fields",[]).find((function(fld){return fld.name===fieldName}));if(field&&field.scripted){throw new Error("Exists query does not support scripted fields")}return{exists:{field:fieldName}}}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=_interopRequireDefault(__webpack_require__(41));var _node_types=__webpack_require__(65);var ast=_interopRequireWildcard(__webpack_require__(57));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function buildNodeParams(fieldName,params){params=_lodash.default.pick(params,"topLeft","bottomRight");var fieldNameArg=_node_types.nodeTypes.literal.buildNode(fieldName);var args=_lodash.default.map(params,(function(value,key){var latLon="".concat(value.lat,", ").concat(value.lon);return _node_types.nodeTypes.namedArg.buildNode(key,latLon)}));return{arguments:[fieldNameArg].concat(_toConsumableArray(args))}}function toElasticsearchQuery(node,indexPattern){var _geo_bounding_box;var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _ref;var _node$arguments=_toArray(node.arguments),fieldNameArg=_node$arguments[0],args=_node$arguments.slice(1);var fullFieldNameArg=_objectSpread({},fieldNameArg,{value:(context===null||context===void 0?void 0:context.nested)?"".concat(context.nested.path,".").concat(fieldNameArg.value):fieldNameArg.value});var fieldName=_node_types.nodeTypes.literal.toElasticsearchQuery(fullFieldNameArg);var fieldList=(_ref=indexPattern===null||indexPattern===void 0?void 0:indexPattern.fields)!==null&&_ref!==void 0?_ref:[];var field=fieldList.find((function(fld){return fld.name===fieldName}));var queryParams=args.reduce((function(acc,arg){var snakeArgName=_lodash.default.snakeCase(arg.name);return _objectSpread({},acc,_defineProperty({},snakeArgName,ast.toElasticsearchQuery(arg)))}),{});if(field===null||field===void 0?void 0:field.scripted){throw new Error("Geo bounding box query does not support scripted fields")}return{geo_bounding_box:(_geo_bounding_box={},_defineProperty(_geo_bounding_box,fieldName,queryParams),_defineProperty(_geo_bounding_box,"ignore_unmapped",true),_geo_bounding_box)}}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _node_types=__webpack_require__(65);var ast=_interopRequireWildcard(__webpack_require__(57));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(fieldName,points){var fieldNameArg=_node_types.nodeTypes.literal.buildNode(fieldName);var args=points.map((function(point){var latLon="".concat(point.lat,", ").concat(point.lon);return _node_types.nodeTypes.literal.buildNode(latLon)}));return{arguments:[fieldNameArg].concat(_toConsumableArray(args))}}function toElasticsearchQuery(node,indexPattern){var _geo_polygon;var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _ref;var _node$arguments=_toArray(node.arguments),fieldNameArg=_node$arguments[0],points=_node$arguments.slice(1);var fullFieldNameArg=_objectSpread({},fieldNameArg,{value:(context===null||context===void 0?void 0:context.nested)?"".concat(context.nested.path,".").concat(fieldNameArg.value):fieldNameArg.value});var fieldName=_node_types.nodeTypes.literal.toElasticsearchQuery(fullFieldNameArg);var fieldList=(_ref=indexPattern===null||indexPattern===void 0?void 0:indexPattern.fields)!==null&&_ref!==void 0?_ref:[];var field=fieldList.find((function(fld){return fld.name===fieldName}));var queryParams={points:points.map((function(point){return ast.toElasticsearchQuery(point,indexPattern,config,context)}))};if(field===null||field===void 0?void 0:field.scripted){throw new Error("Geo polygon query does not support scripted fields")}return{geo_polygon:(_geo_polygon={},_defineProperty(_geo_polygon,fieldName,queryParams),_defineProperty(_geo_polygon,"ignore_unmapped",true),_geo_polygon)}}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var ast=_interopRequireWildcard(__webpack_require__(57));var literal=_interopRequireWildcard(__webpack_require__(73));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(path,child){var pathNode=typeof path==="string"?ast.fromLiteralExpression(path):literal.buildNode(path);return{arguments:[pathNode,child]}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _context$nested;var _node$arguments=_slicedToArray(node.arguments,2),path=_node$arguments[0],child=_node$arguments[1];var stringPath=ast.toElasticsearchQuery(path);var fullPath=(context===null||context===void 0?void 0:(_context$nested=context.nested)===null||_context$nested===void 0?void 0:_context$nested.path)?"".concat(context.nested.path,".").concat(stringPath):stringPath;return{nested:{path:fullPath,query:ast.toElasticsearchQuery(child,indexPattern,config,_objectSpread({},context,{nested:{path:fullPath}})),score_mode:"none"}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNode=buildNode;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=_interopRequireDefault(__webpack_require__(41));var ast=_interopRequireWildcard(__webpack_require__(57));var _node_types=__webpack_require__(65);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function buildNode(name,value){var argumentNode=_lodash.default.get(value,"type")==="literal"?value:_node_types.nodeTypes.literal.buildNode(value);return{type:"namedArg",name:name,value:argumentNode}}function toElasticsearchQuery(node){return ast.toElasticsearchQuery(node.value)}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"nodeTypes",{enumerable:true,get:function get(){return _node_types.nodeTypes}});var _node_types=__webpack_require__(65)},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.migrateFilter=migrateFilter;var _lodash=__webpack_require__(41);var _filters=__webpack_require__(54);function isDeprecatedMatchPhraseFilter(filter){var fieldName=filter.query&&filter.query.match&&Object.keys(filter.query.match)[0];return Boolean(fieldName&&(0,_lodash.get)(filter,["query","match",fieldName,"type"])==="phrase")}function migrateFilter(filter,indexPattern){if(isDeprecatedMatchPhraseFilter(filter)){var fieldName=Object.keys(filter.query.match)[0];var params=(0,_lodash.get)(filter,["query","match",fieldName]);if(indexPattern){var field=indexPattern.fields.find((function(f){return f.name===fieldName}));if(field){params.query=(0,_filters.getConvertedValueForField)(field,params.query)}}return _objectSpread({},filter,{query:{match_phrase:_defineProperty({},fieldName,(0,_lodash.omit)(params,"type"))}})}return filter}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterMatchesIndex=filterMatchesIndex;function filterMatchesIndex(filter,indexPattern){var _filter$meta;if(!((_filter$meta=filter.meta)===null||_filter$meta===void 0?void 0:_filter$meta.key)||!indexPattern){return true}return indexPattern.fields.some((function(field){return field.name===filter.meta.key}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.handleNestedFilter=void 0;var _filters=__webpack_require__(54);var handleNestedFilter=function handleNestedFilter(filter,indexPattern){if(!indexPattern)return filter;var fieldName=(0,_filters.getFilterField)(filter);if(!fieldName){return filter}var field=indexPattern.fields.find((function(indexPatternField){return indexPatternField.name===fieldName}));if(!field||!field.subType||!field.subType.nested||!field.subType.nested.path){return filter}var query=(0,_filters.cleanFilter)(filter);return{meta:filter.meta,nested:{path:field.subType.nested.path,query:query.query||query}}};exports.handleNestedFilter=handleNestedFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildQueryFromLucene=buildQueryFromLucene;var _decorate_query=__webpack_require__(143);var _lucene_string_to_dsl=__webpack_require__(144);function buildQueryFromLucene(queries,queryStringOptions,dateFormatTZ){var combinedQueries=(queries||[]).map((function(query){var queryDsl=(0,_lucene_string_to_dsl.luceneStringToDsl)(query.query);return(0,_decorate_query.decorateQuery)(queryDsl,queryStringOptions,dateFormatTZ)}));return{must:combinedQueries,filter:[],should:[],must_not:[]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isEsQueryString=void 0;var _lodash=__webpack_require__(41);var isEsQueryString=function isEsQueryString(query){return(0,_lodash.has)(query,"query_string.query")};exports.isEsQueryString=isEsQueryString},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEsQueryConfig=getEsQueryConfig;function getEsQueryConfig(config){var allowLeadingWildcards=config.get("query:allowLeadingWildcards");var queryStringOptions=config.get("query:queryString:options");var ignoreFilterIfFieldNotInIndex=config.get("courier:ignoreFilterIfFieldNotInIndex");var dateFormatTZ=config.get("dateFormat:tz");return{allowLeadingWildcards:allowLeadingWildcards,queryStringOptions:queryStringOptions,ignoreFilterIfFieldNotInIndex:ignoreFilterIfFieldNotInIndex,dateFormatTZ:dateFormatTZ}}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty2(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.FieldFormatsRegistry=void 0;var _lodash=__webpack_require__(41);var _types=__webpack_require__(48);var _base_formatters=__webpack_require__(147);var _field_format=__webpack_require__(49);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FieldFormatsRegistry=function(){function FieldFormatsRegistry(){var _this=this;_classCallCheck(this,FieldFormatsRegistry);_defineProperty(this,"fieldFormats",new Map);_defineProperty(this,"defaultMap",{});_defineProperty(this,"metaParamsOptions",{});_defineProperty(this,"getConfig",void 0);_defineProperty(this,"deserialize",(function(){return new(_field_format.FieldFormat.from(_lodash.identity))}));_defineProperty(this,"getDefaultConfig",(function(fieldType,esTypes){var type=_this.getDefaultTypeName(fieldType,esTypes);return _this.defaultMap&&_this.defaultMap[type]||{id:_types.FIELD_FORMAT_IDS.STRING,params:{}}}));_defineProperty(this,"getType",(function(formatId){var fieldFormat=_this.fieldFormats.get(formatId);if(fieldFormat){var decoratedFieldFormat=_this.fieldFormatMetaParamsDecorator(fieldFormat);if(decoratedFieldFormat){return decoratedFieldFormat}}return undefined}));_defineProperty(this,"getTypeWithoutMetaParams",(function(formatId){return _this.fieldFormats.get(formatId)}));_defineProperty(this,"getDefaultType",(function(fieldType,esTypes){var config=_this.getDefaultConfig(fieldType,esTypes);return _this.getType(config.id)}));_defineProperty(this,"getTypeNameByEsTypes",(function(esTypes){if(!Array.isArray(esTypes)){return undefined}return esTypes.find((function(type){return _this.defaultMap[type]&&_this.defaultMap[type].es}))}));_defineProperty(this,"getDefaultTypeName",(function(fieldType,esTypes){var esType=_this.getTypeNameByEsTypes(esTypes);return esType||fieldType}));_defineProperty(this,"getInstance",(0,_lodash.memoize)((function(formatId){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var ConcreteFieldFormat=_this.getType(formatId);if(!ConcreteFieldFormat){throw new Error("Field Format '".concat(formatId,"' not found!"))}return new ConcreteFieldFormat(params,_this.getConfig)}),(function(formatId,params){return JSON.stringify(_objectSpread({formatId:formatId},params))})));_defineProperty(this,"getDefaultInstance",(0,_lodash.memoize)(this.getDefaultInstancePlain,this.getDefaultInstanceCacheResolver));_defineProperty(this,"fieldFormatMetaParamsDecorator",(function(fieldFormat){var getMetaParams=function getMetaParams(customParams){return _this.buildMetaParams(customParams)};if(fieldFormat){var _class,_temp;return _temp=_class=function(_fieldFormat){_inherits(DecoratedFieldFormat,_fieldFormat);function DecoratedFieldFormat(){var params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var getConfig=arguments.length>1?arguments[1]:undefined;_classCallCheck(this,DecoratedFieldFormat);return _possibleConstructorReturn(this,_getPrototypeOf(DecoratedFieldFormat).call(this,getMetaParams(params),getConfig))}return DecoratedFieldFormat}(fieldFormat),_defineProperty(_class,"id",fieldFormat.id),_defineProperty(_class,"fieldType",fieldFormat.fieldType),_temp}return undefined}));_defineProperty(this,"buildMetaParams",(function(customParams){return _objectSpread({},_this.metaParamsOptions,{},customParams)}))}_createClass(FieldFormatsRegistry,[{key:"init",value:function init(getConfig){var metaParamsOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var defaultFieldConverters=arguments.length>2&&arguments[2]!==undefined?arguments[2]:_base_formatters.baseFormatters;var defaultTypeMap=getConfig("format:defaultTypeMap");this.register(defaultFieldConverters);this.parseDefaultTypeMap(defaultTypeMap);this.getConfig=getConfig;this.metaParamsOptions=metaParamsOptions}},{key:"getDefaultInstancePlain",value:function getDefaultInstancePlain(fieldType,esTypes){var conf=this.getDefaultConfig(fieldType,esTypes);return this.getInstance(conf.id,conf.params)}},{key:"getDefaultInstanceCacheResolver",value:function getDefaultInstanceCacheResolver(fieldType,esTypes){return Array.isArray(esTypes)&&esTypes.indexOf(fieldType)===-1?[fieldType].concat(_toConsumableArray(esTypes)).join("-"):fieldType}},{key:"getByFieldType",value:function getByFieldType(fieldType){var _this2=this;return _toConsumableArray(this.fieldFormats.values()).filter((function(format){return format&&format.fieldType.indexOf(fieldType)!==-1})).map((function(format){return _this2.fieldFormatMetaParamsDecorator(format)}))}},{key:"parseDefaultTypeMap",value:function parseDefaultTypeMap(value){this.defaultMap=value;(0,_lodash.forOwn)(this,(function(fn){if((0,_lodash.isFunction)(fn)&&fn.cache){fn.cache=new _lodash.memoize.Cache}}))}},{key:"register",value:function register(fieldFormats){var _this3=this;fieldFormats.forEach((function(fieldFormat){return _this3.fieldFormats.set(fieldFormat.id,fieldFormat)}))}}]);return FieldFormatsRegistry}();exports.FieldFormatsRegistry=FieldFormatsRegistry},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.createCustomFieldFormat=void 0;var _field_format=__webpack_require__(49);var _types=__webpack_require__(48);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var createCustomFieldFormat=function createCustomFieldFormat(convert){var _class,_temp;return _temp=_class=function(_field_format$FieldFo){_inherits(CustomFieldFormat,_field_format$FieldFo);function CustomFieldFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,CustomFieldFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(CustomFieldFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",convert);return _this}return CustomFieldFormat}(_field_format.FieldFormat),_defineProperty(_class,"id",_types.FIELD_FORMAT_IDS.CUSTOM),_temp};exports.createCustomFieldFormat=createCustomFieldFormat},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setup=exports.TEXT_CONTEXT_TYPE=void 0;var _lodash=__webpack_require__(41);var _utils=__webpack_require__(66);var TEXT_CONTEXT_TYPE="text";exports.TEXT_CONTEXT_TYPE=TEXT_CONTEXT_TYPE;var setup=function setup(format){var convert=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_utils.asPrettyString;var recurse=function recurse(value){if(!value||!(0,_lodash.isFunction)(value.map)){return convert.call(format,value)}return JSON.stringify(value.map(recurse))};return recurse};exports.setup=setup},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.asPrettyString=asPrettyString;function asPrettyString(val){if(val===null||val===undefined)return" - ";switch(_typeof(val)){case"string":return val;case"object":return JSON.stringify(val,null,"  ");default:return""+val}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getHighlightHtml",{enumerable:true,get:function get(){return _highlight_html.getHighlightHtml}});Object.defineProperty(exports,"getHighlightRequest",{enumerable:true,get:function get(){return _highlight_request.getHighlightRequest}});var _highlight_html=__webpack_require__(320);var _highlight_request=__webpack_require__(322)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getHighlightHtml=getHighlightHtml;var _lodash=_interopRequireDefault(__webpack_require__(41));var _highlight_tags=__webpack_require__(146);var _html_tags=__webpack_require__(321);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getHighlightHtml(fieldValue,highlights){var highlightHtml=_typeof(fieldValue)==="object"?JSON.stringify(fieldValue):fieldValue;_lodash.default.each(highlights,(function(highlight){var escapedHighlight=_lodash.default.escape(highlight);var untaggedHighlight=escapedHighlight.split(_highlight_tags.highlightTags.pre).join("").split(_highlight_tags.highlightTags.post).join("");var taggedHighlight=escapedHighlight.split(_highlight_tags.highlightTags.pre).join(_html_tags.htmlTags.pre).split(_highlight_tags.highlightTags.post).join(_html_tags.htmlTags.post);highlightHtml=highlightHtml.split(untaggedHighlight).join(taggedHighlight)}));return highlightHtml}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.htmlTags=void 0;var htmlTags={pre:"<mark>",post:"</mark>"};exports.htmlTags=htmlTags},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getHighlightRequest=getHighlightRequest;var _highlight_tags=__webpack_require__(146);var FRAGMENT_SIZE=Math.pow(2,31)-1;function getHighlightRequest(query,shouldHighlight){if(!shouldHighlight)return;return{pre_tags:[_highlight_tags.highlightTags.pre],post_tags:[_highlight_tags.highlightTags.post],fields:{"*":{}},fragment_size:FRAGMENT_SIZE}}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.serializeFieldFormat=void 0;var serializeFieldFormat=function serializeFieldFormat(agg){var format=agg.params.field?agg.params.field.format.toJSON():{};var formats={date_range:function date_range(){return{id:"date_range",params:format}},ip_range:function ip_range(){return{id:"ip_range",params:format}},percentile_ranks:function percentile_ranks(){return{id:"percent"}},count:function count(){return{id:"number"}},cardinality:function cardinality(){return{id:"number"}},date_histogram:function date_histogram(){return{id:"date",params:{pattern:agg.buckets.getScaledDateFormat()}}},terms:function terms(){return{id:"terms",params:_objectSpread({id:format.id,otherBucketLabel:agg.params.otherBucketLabel,missingBucketLabel:agg.params.missingBucketLabel},format.params)}},range:function range(){return{id:"range",params:_objectSpread({id:format.id},format.params)}}};return formats[agg.type.name]?formats[agg.type.name]():format};exports.serializeFieldFormat=serializeFieldFormat},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setup=exports.HTML_CONTEXT_TYPE=void 0;var _lodash=__webpack_require__(41);var _utils=__webpack_require__(66);var HTML_CONTEXT_TYPE="html";exports.HTML_CONTEXT_TYPE=HTML_CONTEXT_TYPE;var getConvertFn=function getConvertFn(format,convert){var fallbackHtml=function fallbackHtml(value){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var field=options.field,hit=options.hit;var formatted=(0,_lodash.escape)(format.convert(value,"text"));return!field||!hit||!hit.highlight||!hit.highlight[field.name]?formatted:(0,_utils.getHighlightHtml)(formatted,hit.highlight[field.name])};return convert||fallbackHtml};var setup=function setup(format,htmlContextTypeConvert){var convert=getConvertFn(format,htmlContextTypeConvert);var recurse=function recurse(value){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(value==null){return(0,_utils.asPrettyString)(value)}if(!value||!(0,_lodash.isFunction)(value.map)){return convert.call(format,value,options)}var subValues=value.map((function(v){return recurse(v,options)}));var useMultiLine=subValues.some((function(sub){return sub.indexOf("\n")>-1}));return subValues.join(","+(useMultiLine?"\n":" "))};var wrap=function wrap(value,options){return"<span ng-non-bindable>".concat(recurse(value,options),"</span>")};return wrap};exports.setup=setup},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.UrlFormat=void 0;var _i18n=__webpack_require__(0);var _lodash=__webpack_require__(41);var _utils=__webpack_require__(66);var _types=__webpack_require__(50);var _field_format=__webpack_require__(49);var _types2=__webpack_require__(48);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var templateMatchRE=/{{([\s\S]+?)}}/g;var whitelistUrlSchemes=["http://","https://"];var URL_TYPES=[{kind:"a",text:_i18n.i18n.translate("data.fieldFormats.url.types.link",{defaultMessage:"Link"})},{kind:"img",text:_i18n.i18n.translate("data.fieldFormats.url.types.img",{defaultMessage:"Image"})},{kind:"audio",text:_i18n.i18n.translate("data.fieldFormats.url.types.audio",{defaultMessage:"Audio"})}];var DEFAULT_URL_TYPE="a";var UrlFormat=function(_field_format$FieldFo){_inherits(UrlFormat,_field_format$FieldFo);function UrlFormat(params){var _this;_classCallCheck(this,UrlFormat);_this=_possibleConstructorReturn(this,_getPrototypeOf(UrlFormat).call(this,params));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(value){return _this.formatLabel(value)}));_defineProperty(_assertThisInitialized(_this),"htmlConvert",(function(rawValue){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var field=options.field,hit=options.hit;var parsedUrl=_this._params.parsedUrl;var _ref=parsedUrl||{},basePath=_ref.basePath,pathname=_ref.pathname,origin=_ref.origin;var url=(0,_lodash.escape)(_this.formatUrl(rawValue));var label=(0,_lodash.escape)(_this.formatLabel(rawValue,url));switch(_this.param("type")){case"audio":return'<audio controls preload="none" src="'.concat(url,'">');case"img":var imageLabel=label===url?"A dynamically-specified image located at ".concat(url):label;return _this.generateImgHtml(url,imageLabel);default:var inWhitelist=whitelistUrlSchemes.some((function(scheme){return url.indexOf(scheme)===0}));if(!inWhitelist&&!parsedUrl){return url}var prefix="";if(!inWhitelist){if(url[0]==="#"){prefix="".concat(origin).concat(pathname)}else if(url.indexOf(basePath||"/")===0){prefix="".concat(origin)}else{var prefixEnd=url[0]==="/"?"":"/";prefix="".concat(origin).concat(basePath||"","/app").concat(prefixEnd)}}var linkLabel;if(hit&&hit.highlight&&hit.highlight[field.name]){linkLabel=(0,_utils.getHighlightHtml)(label,hit.highlight[field.name])}else{linkLabel=label}var linkTarget=_this.param("openLinkInCurrentTab")?"_self":"_blank";return'<a href="'.concat(prefix).concat(url,'" target="').concat(linkTarget,'" rel="noopener noreferrer">').concat(linkLabel,"</a>")}}));_this.compileTemplate=(0,_lodash.memoize)(_this.compileTemplate);return _this}_createClass(UrlFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{type:DEFAULT_URL_TYPE,urlTemplate:null,labelTemplate:null,width:null,height:null}}},{key:"formatLabel",value:function formatLabel(value,url){var template=this.param("labelTemplate");if(url==null)url=this.formatUrl(value);if(!template)return url;return this.compileTemplate(template)({value:value,url:url})}},{key:"formatUrl",value:function formatUrl(value){var template=this.param("urlTemplate");if(!template)return value;return this.compileTemplate(template)({value:encodeURIComponent(value),rawValue:value})}},{key:"compileTemplate",value:function compileTemplate(template){var parts=template.split(templateMatchRE).map((function(part,i){return i%2?part.trim():part}));return function(locals){var output="";var i=-1;while(++i<parts.length){if(i%2){if(locals.hasOwnProperty(parts[i])){var local=locals[parts[i]];output+=local==null?"":local}}else{output+=parts[i]}}return output}}},{key:"generateImgHtml",value:function generateImgHtml(url,imageLabel){var isValidWidth=!isNaN(parseInt(this.param("width"),10));var isValidHeight=!isNaN(parseInt(this.param("height"),10));var maxWidth=isValidWidth?"".concat(this.param("width"),"px"):"none";var maxHeight=isValidHeight?"".concat(this.param("height"),"px"):"none";return'<img src="'.concat(url,'" alt="').concat(imageLabel,'" style="width:auto; height:auto; max-width:').concat(maxWidth,"; max-height:").concat(maxHeight,';">')}}]);return UrlFormat}(_field_format.FieldFormat);exports.UrlFormat=UrlFormat;_defineProperty(UrlFormat,"id",_types2.FIELD_FORMAT_IDS.URL);_defineProperty(UrlFormat,"title",_i18n.i18n.translate("data.fieldFormats.url.title",{defaultMessage:"Url"}));_defineProperty(UrlFormat,"fieldType",[_types.KBN_FIELD_TYPES.NUMBER,_types.KBN_FIELD_TYPES.BOOLEAN,_types.KBN_FIELD_TYPES.DATE,_types.KBN_FIELD_TYPES.IP,_types.KBN_FIELD_TYPES.STRING,_types.KBN_FIELD_TYPES.MURMUR3,_types.KBN_FIELD_TYPES.UNKNOWN,_types.KBN_FIELD_TYPES.CONFLICT]);_defineProperty(UrlFormat,"urlTypes",URL_TYPES)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.BytesFormat=void 0;var _i18n=__webpack_require__(0);var _numeral=__webpack_require__(105);var _types=__webpack_require__(48);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var BytesFormat=function(_numeral$NumeralForma){_inherits(BytesFormat,_numeral$NumeralForma);function BytesFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,BytesFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(BytesFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"id",BytesFormat.id);_defineProperty(_assertThisInitialized(_this),"title",BytesFormat.title);_defineProperty(_assertThisInitialized(_this),"allowsNumericalAggregations",true);return _this}return BytesFormat}(_numeral.NumeralFormat);exports.BytesFormat=BytesFormat;_defineProperty(BytesFormat,"id",_types.FIELD_FORMAT_IDS.BYTES);_defineProperty(BytesFormat,"title",_i18n.i18n.translate("data.fieldFormats.bytes.title",{defaultMessage:"Bytes"}))},,,function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.analysePatternForFract=analysePatternForFract;exports.formatWithNanos=formatWithNanos;exports.DateNanosFormat=void 0;var _i18n=__webpack_require__(0);var _moment=_interopRequireDefault(__webpack_require__(27));var _lodash=__webpack_require__(41);var _types=__webpack_require__(50);var _field_format=__webpack_require__(49);var _types2=__webpack_require__(48);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function analysePatternForFract(pattern){var fracSecMatch=pattern.match("S+");var fracSecMatchStr=fracSecMatch?fracSecMatch[0]:"";return{length:fracSecMatchStr.length,patternNanos:fracSecMatchStr,pattern:pattern,patternEscaped:fracSecMatchStr?pattern.replace(fracSecMatch,"[".concat(fracSecMatch,"]")):""}}function formatWithNanos(dateMomentObj,valRaw,fracPatternObj){if(fracPatternObj.length<=3){return dateMomentObj.format(fracPatternObj.pattern)}else{var valFormatted=dateMomentObj.format(fracPatternObj.patternEscaped);var valNanos=valRaw.substr(20,valRaw.length-21).padEnd(9,"0").substr(0,fracPatternObj.patternNanos.length);return valFormatted.replace(fracPatternObj.patternNanos,valNanos)}}var DateNanosFormat=function(_field_format$FieldFo){_inherits(DateNanosFormat,_field_format$FieldFo);function DateNanosFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,DateNanosFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DateNanosFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"memoizedConverter",_lodash.noop);_defineProperty(_assertThisInitialized(_this),"memoizedPattern","");_defineProperty(_assertThisInitialized(_this),"timeZone","");_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){var pattern=_this.param("pattern");var timezone=_this.param("timezone");var fractPattern=analysePatternForFract(pattern);var fallbackPattern=_this.param("patternFallback");var timezoneChanged=_this.timeZone!==timezone;var datePatternChanged=_this.memoizedPattern!==pattern;if(timezoneChanged||datePatternChanged){_this.timeZone=timezone;_this.memoizedPattern=pattern;_this.memoizedConverter=(0,_lodash.memoize)((function converter(value){if(value===null||value===undefined){return"-"}var date=(0,_moment.default)(value);if(typeof value!=="string"&&date.isValid()){return date.format(fallbackPattern)}else if(date.isValid()){return formatWithNanos(date,value,fractPattern)}else{return value}}))}return _this.memoizedConverter(val)}));return _this}_createClass(DateNanosFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{pattern:this.getConfig("dateNanosFormat"),fallbackPattern:this.getConfig("dateFormat"),timezone:this.getConfig("dateFormat:tz")}}}]);return DateNanosFormat}(_field_format.FieldFormat);exports.DateNanosFormat=DateNanosFormat;_defineProperty(DateNanosFormat,"id",_types2.FIELD_FORMAT_IDS.DATE_NANOS);_defineProperty(DateNanosFormat,"title",_i18n.i18n.translate("data.fieldFormats.date_nanos.title",{defaultMessage:"Date nanos"}));_defineProperty(DateNanosFormat,"fieldType",_types.KBN_FIELD_TYPES.DATE)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.RelativeDateFormat=void 0;var _i18n=__webpack_require__(0);var _moment=_interopRequireDefault(__webpack_require__(27));var _types=__webpack_require__(50);var _field_format=__webpack_require__(49);var _types2=__webpack_require__(48);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RelativeDateFormat=function(_field_format$FieldFo){_inherits(RelativeDateFormat,_field_format$FieldFo);function RelativeDateFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,RelativeDateFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RelativeDateFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){if(val===null||val===undefined){return"-"}var date=(0,_moment.default)(val);if(date.isValid()){return date.fromNow()}else{return val}}));return _this}return RelativeDateFormat}(_field_format.FieldFormat);exports.RelativeDateFormat=RelativeDateFormat;_defineProperty(RelativeDateFormat,"id",_types2.FIELD_FORMAT_IDS.RELATIVE_DATE);_defineProperty(RelativeDateFormat,"title",_i18n.i18n.translate("data.fieldFormats.relative_date.title",{defaultMessage:"Relative date"}));_defineProperty(RelativeDateFormat,"fieldType",_types.KBN_FIELD_TYPES.DATE)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty2(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.DurationFormat=void 0;var _i18n=__webpack_require__(0);var _moment=_interopRequireDefault(__webpack_require__(27));var _types=__webpack_require__(50);var _field_format=__webpack_require__(49);var _types2=__webpack_require__(48);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ratioToSeconds={picoseconds:1e-12,nanoseconds:1e-9,microseconds:1e-6};var HUMAN_FRIENDLY="humanize";var DEFAULT_OUTPUT_PRECISION=2;var DEFAULT_INPUT_FORMAT={text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.seconds",{defaultMessage:"Seconds"}),kind:"seconds"};var inputFormats=[{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.picoseconds",{defaultMessage:"Picoseconds"}),kind:"picoseconds"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.nanoseconds",{defaultMessage:"Nanoseconds"}),kind:"nanoseconds"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.microseconds",{defaultMessage:"Microseconds"}),kind:"microseconds"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.milliseconds",{defaultMessage:"Milliseconds"}),kind:"milliseconds"},_objectSpread({},DEFAULT_INPUT_FORMAT),{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.minutes",{defaultMessage:"Minutes"}),kind:"minutes"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.hours",{defaultMessage:"Hours"}),kind:"hours"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.days",{defaultMessage:"Days"}),kind:"days"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.weeks",{defaultMessage:"Weeks"}),kind:"weeks"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.months",{defaultMessage:"Months"}),kind:"months"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.years",{defaultMessage:"Years"}),kind:"years"}];var DEFAULT_OUTPUT_FORMAT={text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.humanize",{defaultMessage:"Human Readable"}),method:"humanize"};var outputFormats=[_objectSpread({},DEFAULT_OUTPUT_FORMAT),{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asMilliseconds",{defaultMessage:"Milliseconds"}),method:"asMilliseconds"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asSeconds",{defaultMessage:"Seconds"}),method:"asSeconds"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asMinutes",{defaultMessage:"Minutes"}),method:"asMinutes"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asHours",{defaultMessage:"Hours"}),method:"asHours"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asDays",{defaultMessage:"Days"}),method:"asDays"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asWeeks",{defaultMessage:"Weeks"}),method:"asWeeks"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asMonths",{defaultMessage:"Months"}),method:"asMonths"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asYears",{defaultMessage:"Years"}),method:"asYears"}];function parseInputAsDuration(val,inputFormat){var ratio=ratioToSeconds[inputFormat]||1;var kind=inputFormat in ratioToSeconds?"seconds":inputFormat;return _moment.default.duration(val*ratio,kind)}var DurationFormat=function(_field_format$FieldFo){_inherits(DurationFormat,_field_format$FieldFo);function DurationFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,DurationFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DurationFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"allowsNumericalAggregations",true);_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){var inputFormat=_this.param("inputFormat");var outputFormat=_this.param("outputFormat");var outputPrecision=_this.param("outputPrecision");var human=_this.isHuman();var prefix=val<0&&human?_i18n.i18n.translate("data.fieldFormats.duration.negativeLabel",{defaultMessage:"minus"})+" ":"";var duration=parseInputAsDuration(val,inputFormat);var formatted=duration[outputFormat]();var precise=human?formatted:formatted.toFixed(outputPrecision);return prefix+precise}));return _this}_createClass(DurationFormat,[{key:"isHuman",value:function isHuman(){return this.param("outputFormat")===HUMAN_FRIENDLY}},{key:"getParamDefaults",value:function getParamDefaults(){return{inputFormat:DEFAULT_INPUT_FORMAT.kind,outputFormat:DEFAULT_OUTPUT_FORMAT.method,outputPrecision:DEFAULT_OUTPUT_PRECISION}}}]);return DurationFormat}(_field_format.FieldFormat);exports.DurationFormat=DurationFormat;_defineProperty(DurationFormat,"id",_types2.FIELD_FORMAT_IDS.DURATION);_defineProperty(DurationFormat,"title",_i18n.i18n.translate("data.fieldFormats.duration.title",{defaultMessage:"Duration"}));_defineProperty(DurationFormat,"fieldType",_types.KBN_FIELD_TYPES.NUMBER);_defineProperty(DurationFormat,"inputFormats",inputFormats);_defineProperty(DurationFormat,"outputFormats",outputFormats)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.IpFormat=void 0;var _i18n=__webpack_require__(0);var _types=__webpack_require__(50);var _field_format=__webpack_require__(49);var _types2=__webpack_require__(48);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IpFormat=function(_field_format$FieldFo){_inherits(IpFormat,_field_format$FieldFo);function IpFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,IpFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(IpFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){if(val===undefined||val===null)return"-";if(!isFinite(val))return val;return[val>>>24,val>>>16&255,val>>>8&255,val&255].join(".")}));return _this}return IpFormat}(_field_format.FieldFormat);exports.IpFormat=IpFormat;_defineProperty(IpFormat,"id",_types2.FIELD_FORMAT_IDS.IP);_defineProperty(IpFormat,"title",_i18n.i18n.translate("data.fieldFormats.ip.title",{defaultMessage:"IP address"}));_defineProperty(IpFormat,"fieldType",_types.KBN_FIELD_TYPES.IP)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.NumberFormat=void 0;var _i18n=__webpack_require__(0);var _numeral=__webpack_require__(105);var _types=__webpack_require__(48);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NumberFormat=function(_numeral$NumeralForma){_inherits(NumberFormat,_numeral$NumeralForma);function NumberFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,NumberFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(NumberFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"id",NumberFormat.id);_defineProperty(_assertThisInitialized(_this),"title",NumberFormat.title);_defineProperty(_assertThisInitialized(_this),"allowsNumericalAggregations",true);return _this}return NumberFormat}(_numeral.NumeralFormat);exports.NumberFormat=NumberFormat;_defineProperty(NumberFormat,"id",_types.FIELD_FORMAT_IDS.NUMBER);_defineProperty(NumberFormat,"title",_i18n.i18n.translate("data.fieldFormats.number.title",{defaultMessage:"Number"}))},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}Object.defineProperty(exports,"__esModule",{value:true});exports.PercentFormat=void 0;var _i18n=__webpack_require__(0);var _numeral=__webpack_require__(105);var _types=__webpack_require__(48);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PercentFormat=function(_numeral$NumeralForma){_inherits(PercentFormat,_numeral$NumeralForma);function PercentFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,PercentFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PercentFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"id",PercentFormat.id);_defineProperty(_assertThisInitialized(_this),"title",PercentFormat.title);_defineProperty(_assertThisInitialized(_this),"allowsNumericalAggregations",true);_defineProperty(_assertThisInitialized(_this),"getParamDefaults",(function(){return{pattern:_this.getConfig("format:percent:defaultPattern"),fractional:true}}));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){var formatted=_get(_getPrototypeOf(PercentFormat.prototype),"getConvertedValue",_assertThisInitialized(_this)).call(_assertThisInitialized(_this),val);if(_this.param("fractional")){return formatted}return String(Number(formatted)/100)}));return _this}return PercentFormat}(_numeral.NumeralFormat);exports.PercentFormat=PercentFormat;_defineProperty(PercentFormat,"id",_types.FIELD_FORMAT_IDS.PERCENT);_defineProperty(PercentFormat,"title",_i18n.i18n.translate("data.fieldFormats.percent.title",{defaultMessage:"Percentage"}))},function(module,exports,__webpack_require__){"use strict";(function(Buffer){function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.StringFormat=void 0;var _i18n=__webpack_require__(0);var _utils=__webpack_require__(66);var _types=__webpack_require__(50);var _field_format=__webpack_require__(49);var _types2=__webpack_require__(48);var _utils2=__webpack_require__(74);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TRANSFORM_OPTIONS=[{kind:false,text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.none",{defaultMessage:"- None -"})},{kind:"lower",text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.lower",{defaultMessage:"Lower Case"})},{kind:"upper",text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.upper",{defaultMessage:"Upper Case"})},{kind:"title",text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.title",{defaultMessage:"Title Case"})},{kind:"short",text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.short",{defaultMessage:"Short Dots"})},{kind:"base64",text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.base64",{defaultMessage:"Base64 Decode"})},{kind:"urlparam",text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.url",{defaultMessage:"URL Param Decode"})}];var DEFAULT_TRANSFORM_OPTION=false;var StringFormat=function(_field_format$FieldFo){_inherits(StringFormat,_field_format$FieldFo);function StringFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,StringFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(StringFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){switch(_this.param("transform")){case"lower":return String(val).toLowerCase();case"upper":return String(val).toUpperCase();case"title":return _this.toTitleCase(val);case"short":return(0,_utils2.shortenDottedString)(val);case"base64":return _this.base64Decode(val);case"urlparam":return decodeURIComponent(val);default:return(0,_utils.asPrettyString)(val)}}));return _this}_createClass(StringFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{transform:DEFAULT_TRANSFORM_OPTION}}},{key:"base64Decode",value:function base64Decode(val){try{return Buffer.from(val,"base64").toString("utf8")}catch(e){return(0,_utils.asPrettyString)(val)}}},{key:"toTitleCase",value:function toTitleCase(val){return val.replace(/\w\S*/g,(function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()}))}}]);return StringFormat}(_field_format.FieldFormat);exports.StringFormat=StringFormat;_defineProperty(StringFormat,"id",_types2.FIELD_FORMAT_IDS.STRING);_defineProperty(StringFormat,"title",_i18n.i18n.translate("data.fieldFormats.string.title",{defaultMessage:"String"}));_defineProperty(StringFormat,"fieldType",[_types.KBN_FIELD_TYPES.NUMBER,_types.KBN_FIELD_TYPES.BOOLEAN,_types.KBN_FIELD_TYPES.DATE,_types.KBN_FIELD_TYPES.IP,_types.KBN_FIELD_TYPES.ATTACHMENT,_types.KBN_FIELD_TYPES.GEO_POINT,_types.KBN_FIELD_TYPES.GEO_SHAPE,_types.KBN_FIELD_TYPES.STRING,_types.KBN_FIELD_TYPES.MURMUR3,_types.KBN_FIELD_TYPES.UNKNOWN,_types.KBN_FIELD_TYPES.CONFLICT]);_defineProperty(StringFormat,"transformOptions",TRANSFORM_OPTIONS)}).call(this,__webpack_require__(336).Buffer)},,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.shortenDottedString=shortenDottedString;var DOT_PREFIX_RE=/(.).+?\./g;function shortenDottedString(input){return typeof input!=="string"?input:input.replace(DOT_PREFIX_RE,"$1.")}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}Object.defineProperty(exports,"__esModule",{value:true});exports.toPromise=toPromise;exports.getCombinedSignal=getCombinedSignal;exports.AbortError=void 0;var AbortError=function(_Error){_inherits(AbortError,_Error);function AbortError(){var _this;var message=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"Aborted";_classCallCheck(this,AbortError);_this=_possibleConstructorReturn(this,_getPrototypeOf(AbortError).call(this,message));_this.message=message;_this.name="AbortError";return _this}return AbortError}(_wrapNativeSuper(Error));exports.AbortError=AbortError;function toPromise(signal){var shouldReject=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return new Promise((function(resolve,reject){var action=shouldReject?reject:resolve;if(signal.aborted)action();signal.addEventListener("abort",action)}))}function getCombinedSignal(signals){var promises=signals.map((function(signal){return toPromise(signal)}));var controller=new AbortController;Promise.race(promises).then((function(){return controller.abort()}));return controller.signal}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.SourceFormat=void 0;var _lodash=__webpack_require__(41);var _utils=__webpack_require__(74);var _types=__webpack_require__(50);var _field_format=__webpack_require__(49);var _types2=__webpack_require__(48);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function noWhiteSpace(html){var TAGS_WITH_WS=/>\s+</g;return html.replace(TAGS_WITH_WS,"><")}var templateHtml="\n  <dl class=\"source truncate-by-height\">\n    <% defPairs.forEach(function (def) { %>\n      <dt><%- def[0] %>:</dt>\n      <dd><%= def[1] %></dd>\n      <%= ' ' %>\n    <% }); %>\n  </dl>";var doTemplate=(0,_lodash.template)(noWhiteSpace(templateHtml));var SourceFormat=function(_field_format$FieldFo){_inherits(SourceFormat,_field_format$FieldFo);function SourceFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,SourceFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SourceFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(value){return JSON.stringify(value)}));_defineProperty(_assertThisInitialized(_this),"htmlConvert",(function(value){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var field=options.field,hit=options.hit;if(!field){var converter=_this.getConverterFor("text");return(0,_lodash.escape)(converter(value))}var highlights=hit&&hit.highlight||{};var formatted=field.indexPattern.formatHit(hit);var highlightPairs=[];var sourcePairs=[];var isShortDots=_this.getConfig("shortDots:enable");(0,_lodash.keys)(formatted).forEach((function(key){var pairs=highlights[key]?highlightPairs:sourcePairs;var newField=isShortDots?(0,_utils.shortenDottedString)(key):key;var val=formatted[key];pairs.push([newField,val])}),[]);return doTemplate({defPairs:highlightPairs.concat(sourcePairs)})}));return _this}return SourceFormat}(_field_format.FieldFormat);exports.SourceFormat=SourceFormat;_defineProperty(SourceFormat,"id",_types2.FIELD_FORMAT_IDS._SOURCE);_defineProperty(SourceFormat,"title","_source");_defineProperty(SourceFormat,"fieldType",_types.KBN_FIELD_TYPES._SOURCE)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.ColorFormat=void 0;var _i18n=__webpack_require__(0);var _lodash=__webpack_require__(41);var _types=__webpack_require__(50);var _field_format=__webpack_require__(49);var _types2=__webpack_require__(48);var _utils=__webpack_require__(66);var _color_default=__webpack_require__(149);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var convertTemplate=(0,_lodash.template)('<span style="<%- style %>"><%- val %></span>');var ColorFormat=function(_field_format$FieldFo){_inherits(ColorFormat,_field_format$FieldFo);function ColorFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,ColorFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ColorFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"htmlConvert",(function(val){var color=_this.findColorRuleForVal(val);if(!color)return(0,_lodash.escape)((0,_utils.asPrettyString)(val));var style="";if(color.text)style+="color: ".concat(color.text,";");if(color.background)style+="background-color: ".concat(color.background,";");return convertTemplate({val:val,style:style})}));return _this}_createClass(ColorFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{fieldType:null,colors:[(0,_lodash.cloneDeep)(_color_default.DEFAULT_CONVERTER_COLOR)]}}},{key:"findColorRuleForVal",value:function findColorRuleForVal(val){switch(this.param("fieldType")){case"string":return(0,_lodash.findLast)(this.param("colors"),(function(colorParam){return new RegExp(colorParam.regex).test(val)}));case"number":return(0,_lodash.findLast)(this.param("colors"),(function(_ref){var range=_ref.range;if(!range)return;var _range$split=range.split(":"),_range$split2=_slicedToArray(_range$split,2),start=_range$split2[0],end=_range$split2[1];return val>=Number(start)&&val<=Number(end)}));default:return null}}}]);return ColorFormat}(_field_format.FieldFormat);exports.ColorFormat=ColorFormat;_defineProperty(ColorFormat,"id",_types2.FIELD_FORMAT_IDS.COLOR);_defineProperty(ColorFormat,"title",_i18n.i18n.translate("data.fieldFormats.color.title",{defaultMessage:"Color"}));_defineProperty(ColorFormat,"fieldType",[_types.KBN_FIELD_TYPES.NUMBER,_types.KBN_FIELD_TYPES.STRING])},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.TruncateFormat=void 0;var _i18n=__webpack_require__(0);var _lodash=__webpack_require__(41);var _types=__webpack_require__(50);var _field_format=__webpack_require__(49);var _types2=__webpack_require__(48);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var omission="...";var TruncateFormat=function(_field_format$FieldFo){_inherits(TruncateFormat,_field_format$FieldFo);function TruncateFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,TruncateFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TruncateFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){var length=_this.param("fieldLength");if(length>0){return(0,_lodash.trunc)(val,{length:length+omission.length,omission:omission})}return val}));return _this}return TruncateFormat}(_field_format.FieldFormat);exports.TruncateFormat=TruncateFormat;_defineProperty(TruncateFormat,"id",_types2.FIELD_FORMAT_IDS.TRUNCATE);_defineProperty(TruncateFormat,"title",_i18n.i18n.translate("data.fieldFormats.truncated_string.title",{defaultMessage:"Truncated string"}));_defineProperty(TruncateFormat,"fieldType",_types.KBN_FIELD_TYPES.STRING)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.BoolFormat=void 0;var _i18n=__webpack_require__(0);var _types=__webpack_require__(50);var _field_format=__webpack_require__(49);var _types2=__webpack_require__(48);var _utils=__webpack_require__(66);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var BoolFormat=function(_field_format$FieldFo){_inherits(BoolFormat,_field_format$FieldFo);function BoolFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,BoolFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(BoolFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(value){if(typeof value==="string"){value=value.trim().toLowerCase()}switch(value){case false:case 0:case"false":case"no":return"false";case true:case 1:case"true":case"yes":return"true";default:return(0,_utils.asPrettyString)(value)}}));return _this}return BoolFormat}(_field_format.FieldFormat);exports.BoolFormat=BoolFormat;_defineProperty(BoolFormat,"id",_types2.FIELD_FORMAT_IDS.BOOLEAN);_defineProperty(BoolFormat,"title",_i18n.i18n.translate("data.fieldFormats.boolean.title",{defaultMessage:"Boolean"}));_defineProperty(BoolFormat,"fieldType",[_types.KBN_FIELD_TYPES.BOOLEAN,_types.KBN_FIELD_TYPES.NUMBER,_types.KBN_FIELD_TYPES.STRING])},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.StaticLookupFormat=void 0;var _i18n=__webpack_require__(0);var _types=__webpack_require__(50);var _field_format=__webpack_require__(49);var _types2=__webpack_require__(48);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function convertLookupEntriesToMap(lookupEntries){return lookupEntries.reduce((function(lookupMap,lookupEntry){lookupMap[lookupEntry.key]=lookupEntry.value;return lookupMap}),{})}var StaticLookupFormat=function(_field_format$FieldFo){_inherits(StaticLookupFormat,_field_format$FieldFo);function StaticLookupFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,StaticLookupFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(StaticLookupFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){var lookupEntries=_this.param("lookupEntries");var unknownKeyValue=_this.param("unknownKeyValue");var lookupMap=convertLookupEntriesToMap(lookupEntries);return lookupMap[val]||unknownKeyValue||val}));return _this}_createClass(StaticLookupFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{lookupEntries:[{}],unknownKeyValue:null}}}]);return StaticLookupFormat}(_field_format.FieldFormat);exports.StaticLookupFormat=StaticLookupFormat;_defineProperty(StaticLookupFormat,"id",_types2.FIELD_FORMAT_IDS.STATIC_LOOKUP);_defineProperty(StaticLookupFormat,"title",_i18n.i18n.translate("data.fieldFormats.static_lookup.title",{defaultMessage:"Static lookup"}));_defineProperty(StaticLookupFormat,"fieldType",[_types.KBN_FIELD_TYPES.STRING,_types.KBN_FIELD_TYPES.NUMBER,_types.KBN_FIELD_TYPES.IP,_types.KBN_FIELD_TYPES.BOOLEAN])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _fields=__webpack_require__(348);Object.keys(_fields).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _fields[key]}})}));var _types=__webpack_require__(152);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={isFilterable:true,isNestedField:true};Object.defineProperty(exports,"isFilterable",{enumerable:true,get:function get(){return _utils.isFilterable}});Object.defineProperty(exports,"isNestedField",{enumerable:true,get:function get(){return _utils.isNestedField}});var _types=__webpack_require__(349);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _utils=__webpack_require__(350)},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isFilterable=isFilterable;exports.isNestedField=isNestedField;var _kbn_field_types=__webpack_require__(150);var filterableTypes=(0,_kbn_field_types.getFilterableKbnTypeNames)();function isFilterable(field){return field.name==="_id"||field.scripted||Boolean(field.searchable&&filterableTypes.includes(field.type))}function isNestedField(field){var _field$subType;return!!((_field$subType=field.subType)===null||_field$subType===void 0?void 0:_field$subType.nested)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFilterableKbnTypeNames=exports.castEsToKbnFieldTypeName=exports.getKbnTypeNames=exports.getKbnFieldType=void 0;var _kbn_field_types_factory=__webpack_require__(352);var _types=__webpack_require__(50);var registeredKbnTypes=(0,_kbn_field_types_factory.createKbnFieldTypes)();var getKbnFieldType=function getKbnFieldType(typeName){return registeredKbnTypes.find((function(t){return t.name===typeName}))};exports.getKbnFieldType=getKbnFieldType;var getKbnTypeNames=function getKbnTypeNames(){return registeredKbnTypes.filter((function(type){return type.name})).map((function(type){return type.name}))};exports.getKbnTypeNames=getKbnTypeNames;var castEsToKbnFieldTypeName=function castEsToKbnFieldTypeName(esType){var type=registeredKbnTypes.find((function(t){return t.esTypes.includes(esType)}));return type&&type.name?type.name:_types.KBN_FIELD_TYPES.UNKNOWN};exports.castEsToKbnFieldTypeName=castEsToKbnFieldTypeName;var getFilterableKbnTypeNames=function getFilterableKbnTypeNames(){return registeredKbnTypes.filter((function(type){return type.filterable})).map((function(type){return type.name}))};exports.getFilterableKbnTypeNames=getFilterableKbnTypeNames},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createKbnFieldTypes=void 0;var _kbn_field_type=__webpack_require__(151);var _types=__webpack_require__(50);var createKbnFieldTypes=function createKbnFieldTypes(){return[new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.STRING,sortable:true,filterable:true,esTypes:[_types.ES_FIELD_TYPES.STRING,_types.ES_FIELD_TYPES.TEXT,_types.ES_FIELD_TYPES.KEYWORD,_types.ES_FIELD_TYPES._TYPE,_types.ES_FIELD_TYPES._ID]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.NUMBER,sortable:true,filterable:true,esTypes:[_types.ES_FIELD_TYPES.FLOAT,_types.ES_FIELD_TYPES.HALF_FLOAT,_types.ES_FIELD_TYPES.SCALED_FLOAT,_types.ES_FIELD_TYPES.DOUBLE,_types.ES_FIELD_TYPES.INTEGER,_types.ES_FIELD_TYPES.LONG,_types.ES_FIELD_TYPES.SHORT,_types.ES_FIELD_TYPES.BYTE,_types.ES_FIELD_TYPES.TOKEN_COUNT]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.DATE,sortable:true,filterable:true,esTypes:[_types.ES_FIELD_TYPES.DATE,_types.ES_FIELD_TYPES.DATE_NANOS]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.IP,sortable:true,filterable:true,esTypes:[_types.ES_FIELD_TYPES.IP]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.BOOLEAN,sortable:true,filterable:true,esTypes:[_types.ES_FIELD_TYPES.BOOLEAN]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.OBJECT,esTypes:[_types.ES_FIELD_TYPES.OBJECT]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.NESTED,esTypes:[_types.ES_FIELD_TYPES.NESTED]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.GEO_POINT,esTypes:[_types.ES_FIELD_TYPES.GEO_POINT]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.GEO_SHAPE,esTypes:[_types.ES_FIELD_TYPES.GEO_SHAPE]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.ATTACHMENT,esTypes:[_types.ES_FIELD_TYPES.ATTACHMENT]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.MURMUR3,esTypes:[_types.ES_FIELD_TYPES.MURMUR3]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES._SOURCE,esTypes:[_types.ES_FIELD_TYPES._SOURCE]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.HISTOGRAM,filterable:true,esTypes:[_types.ES_FIELD_TYPES.HISTOGRAM]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.CONFLICT}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.UNKNOWN})]};exports.createKbnFieldTypes=createKbnFieldTypes},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _filter_manager=__webpack_require__(354);Object.keys(_filter_manager).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _filter_manager[key]}})}));var _types=__webpack_require__(155);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"dedupFilters",{enumerable:true,get:function get(){return _dedup_filters.dedupFilters}});Object.defineProperty(exports,"uniqFilters",{enumerable:true,get:function get(){return _uniq_filters.uniqFilters}});Object.defineProperty(exports,"compareFilters",{enumerable:true,get:function get(){return _compare_filters.compareFilters}});Object.defineProperty(exports,"COMPARE_ALL_OPTIONS",{enumerable:true,get:function get(){return _compare_filters.COMPARE_ALL_OPTIONS}});Object.defineProperty(exports,"FilterCompareOptions",{enumerable:true,get:function get(){return _compare_filters.FilterCompareOptions}});var _dedup_filters=__webpack_require__(153);var _uniq_filters=__webpack_require__(355);var _compare_filters=__webpack_require__(154)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.uniqFilters=void 0;var _lodash=__webpack_require__(41);var _dedup_filters=__webpack_require__(153);var uniqFilters=function uniqFilters(filters){var comparatorOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var results=[];(0,_lodash.each)(filters,(function(filter){results=(0,_lodash.union)(results,(0,_dedup_filters.dedupFilters)(results,[filter]),comparatorOptions)}));return results};exports.uniqFilters=uniqFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ES_SEARCH_STRATEGY=void 0;var ES_SEARCH_STRATEGY="es";exports.ES_SEARCH_STRATEGY=ES_SEARCH_STRATEGY},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _date_interval_utils=__webpack_require__(359);Object.keys(_date_interval_utils).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _date_interval_utils[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _date_histogram_interval=__webpack_require__(360);Object.keys(_date_histogram_interval).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _date_histogram_interval[key]}})}));var _invalid_es_calendar_interval_error=__webpack_require__(157);Object.keys(_invalid_es_calendar_interval_error).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _invalid_es_calendar_interval_error[key]}})}));var _invalid_es_interval_format_error=__webpack_require__(158);Object.keys(_invalid_es_interval_format_error).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _invalid_es_interval_format_error[key]}})}));var _is_valid_es_interval=__webpack_require__(159);Object.keys(_is_valid_es_interval).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _is_valid_es_interval[key]}})}));var _is_valid_interval=__webpack_require__(361);Object.keys(_is_valid_interval).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _is_valid_interval[key]}})}));var _parse_interval=__webpack_require__(364);Object.keys(_parse_interval).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _parse_interval[key]}})}));var _parse_es_interval=__webpack_require__(83);Object.keys(_parse_es_interval).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _parse_es_interval[key]}})}));var _to_absolute_dates=__webpack_require__(365);Object.keys(_to_absolute_dates).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _to_absolute_dates[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dateHistogramInterval=dateHistogramInterval;var _parse_es_interval=__webpack_require__(83);function dateHistogramInterval(interval){var _ref=(0,_parse_es_interval.parseEsInterval)(interval),type=_ref.type;if(type==="calendar"){return{calendar_interval:interval}}else{return{fixed_interval:interval}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isValidInterval=isValidInterval;var _is_valid_es_interval=__webpack_require__(159);var _least_common_interval=__webpack_require__(362);function _parseWithBase(value,baseInterval){try{var interval=(0,_least_common_interval.leastCommonInterval)(baseInterval,value);return interval===value.replace(/\s/g,"")}catch(e){return false}}function isValidInterval(value,baseInterval){if(baseInterval){return _parseWithBase(value,baseInterval)}else{return(0,_is_valid_es_interval.isValidEsInterval)(value)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.leastCommonInterval=leastCommonInterval;var _datemath=_interopRequireDefault(__webpack_require__(61));var _least_common_multiple=__webpack_require__(363);var _parse_es_interval=__webpack_require__(83);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function leastCommonInterval(a,b){var _datemath$default=_datemath.default,unitsMap=_datemath$default.unitsMap,unitsDesc=_datemath$default.unitsDesc;var aInt=(0,_parse_es_interval.parseEsInterval)(a);var bInt=(0,_parse_es_interval.parseEsInterval)(b);if(a===b){return a}var aUnit=unitsMap[aInt.unit];var bUnit=unitsMap[bInt.unit];if(aInt.type!==bInt.type){throw Error("Incompatible intervals: ".concat(a," (").concat(aInt.type,"), ").concat(b," (").concat(bInt.type,")"))}if(aInt.type==="calendar"||bInt.type==="calendar"){return aUnit.weight>bUnit.weight?"".concat(aInt.value).concat(aInt.unit):"".concat(bInt.value).concat(bInt.unit)}var aMs=aInt.value*aUnit.base;var bMs=bInt.value*bUnit.base;var lcmMs=(0,_least_common_multiple.leastCommonMultiple)(aMs,bMs);if(lcmMs===bMs){return b.replace(/\s/g,"")}if(lcmMs===aMs){return a.replace(/\s/g,"")}var lcmUnit=unitsDesc.find((function(unit){var unitInfo=unitsMap[unit];return!!(unitInfo.type!=="calendar"&&lcmMs%unitInfo.base===0)}));if(!lcmUnit){throw Error("Unable to find common interval for: ".concat(a,", ").concat(b))}return"".concat(lcmMs/unitsMap[lcmUnit].base).concat(lcmUnit)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.leastCommonMultiple=leastCommonMultiple;function greatestCommonDivisor(a,b){return a===0?Math.abs(b):greatestCommonDivisor(b%a,a)}function leastCommonMultiple(a,b){return Math.abs(a*b/greatestCommonDivisor(a,b))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseInterval=parseInterval;var _lodash=__webpack_require__(41);var _moment=_interopRequireDefault(__webpack_require__(27));var _datemath=_interopRequireDefault(__webpack_require__(61));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var INTERVAL_STRING_RE=new RegExp("^([0-9\\.]*)\\s*("+_datemath.default.units.join("|")+")$");function parseInterval(interval){var matches=String(interval).trim().match(INTERVAL_STRING_RE);if(!matches)return null;try{var value=parseFloat(matches[1])||1;var unit=matches[2];var duration=_moment.default.duration(value,unit);var selectedUnit=(0,_lodash.find)(_datemath.default.units,(function(u){return Math.abs(duration.as(u))>=1}));if(_datemath.default.units.indexOf(selectedUnit)<_datemath.default.units.indexOf(unit)){return duration}return _moment.default.duration(duration.as(selectedUnit),selectedUnit)}catch(e){return null}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toAbsoluteDates=toAbsoluteDates;var _datemath=_interopRequireDefault(__webpack_require__(61));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function toAbsoluteDates(range){var fromDate=_datemath.default.parse(range.from);var toDate=_datemath.default.parse(range.to,{roundUp:true});if(!fromDate||!toDate){return}return{from:fromDate.toDate(),to:toDate.toDate()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={TextContextTypeConvert:true,IFieldFormatMetaParams:true};Object.defineProperty(exports,"TextContextTypeConvert",{enumerable:true,get:function get(){return _types5.TextContextTypeConvert}});Object.defineProperty(exports,"IFieldFormatMetaParams",{enumerable:true,get:function get(){return _types5.IFieldFormatMetaParams}});var _types=__webpack_require__(367);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _types2=__webpack_require__(155);Object.keys(_types2).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types2[key]}})}));var _types3=__webpack_require__(50);Object.keys(_types3).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types3[key]}})}));var _types4=__webpack_require__(152);Object.keys(_types4).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types4[key]}})}));var _types5=__webpack_require__(48)},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isGroupByDateHistogram=isGroupByDateHistogram;exports.isGroupByHistogram=isGroupByHistogram;exports.isGroupByTerms=isGroupByTerms;exports.isPivotGroupByConfigWithUiSupport=isPivotGroupByConfigWithUiSupport;exports.getEsAggFromGroupByConfig=getEsAggFromGroupByConfig;exports.dateHistogramIntervalFormatRegex=exports.histogramIntervalFormatRegex=exports.pivotGroupByFieldSupport=exports.PIVOT_SUPPORTED_GROUP_BY_AGGS=void 0;var _common=__webpack_require__(42);var _pivotGroupByFieldSup;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PIVOT_SUPPORTED_GROUP_BY_AGGS;exports.PIVOT_SUPPORTED_GROUP_BY_AGGS=PIVOT_SUPPORTED_GROUP_BY_AGGS;(function(PIVOT_SUPPORTED_GROUP_BY_AGGS){PIVOT_SUPPORTED_GROUP_BY_AGGS["DATE_HISTOGRAM"]="date_histogram";PIVOT_SUPPORTED_GROUP_BY_AGGS["HISTOGRAM"]="histogram";PIVOT_SUPPORTED_GROUP_BY_AGGS["TERMS"]="terms"})(PIVOT_SUPPORTED_GROUP_BY_AGGS||(exports.PIVOT_SUPPORTED_GROUP_BY_AGGS=PIVOT_SUPPORTED_GROUP_BY_AGGS={}));var pivotGroupByFieldSupport=(_pivotGroupByFieldSup={},_defineProperty(_pivotGroupByFieldSup,_common.KBN_FIELD_TYPES.ATTACHMENT,[]),_defineProperty(_pivotGroupByFieldSup,_common.KBN_FIELD_TYPES.BOOLEAN,[]),_defineProperty(_pivotGroupByFieldSup,_common.KBN_FIELD_TYPES.DATE,[PIVOT_SUPPORTED_GROUP_BY_AGGS.DATE_HISTOGRAM]),_defineProperty(_pivotGroupByFieldSup,_common.KBN_FIELD_TYPES.GEO_POINT,[]),_defineProperty(_pivotGroupByFieldSup,_common.KBN_FIELD_TYPES.GEO_SHAPE,[]),_defineProperty(_pivotGroupByFieldSup,_common.KBN_FIELD_TYPES.IP,[PIVOT_SUPPORTED_GROUP_BY_AGGS.TERMS]),_defineProperty(_pivotGroupByFieldSup,_common.KBN_FIELD_TYPES.MURMUR3,[]),_defineProperty(_pivotGroupByFieldSup,_common.KBN_FIELD_TYPES.NUMBER,[PIVOT_SUPPORTED_GROUP_BY_AGGS.HISTOGRAM]),_defineProperty(_pivotGroupByFieldSup,_common.KBN_FIELD_TYPES.STRING,[PIVOT_SUPPORTED_GROUP_BY_AGGS.TERMS]),_defineProperty(_pivotGroupByFieldSup,_common.KBN_FIELD_TYPES._SOURCE,[]),_defineProperty(_pivotGroupByFieldSup,_common.KBN_FIELD_TYPES.UNKNOWN,[]),_defineProperty(_pivotGroupByFieldSup,_common.KBN_FIELD_TYPES.CONFLICT,[]),_pivotGroupByFieldSup);exports.pivotGroupByFieldSupport=pivotGroupByFieldSupport;var histogramIntervalFormatRegex=/^([1-9][0-9]*((\.)([0-9]+))?|([0](\.)([0-9]+)))$/;exports.histogramIntervalFormatRegex=histogramIntervalFormatRegex;var dateHistogramIntervalFormatRegex=/^[1-9][0-9]*(ms|s|m|h|d|w|M|q|y)$/;exports.dateHistogramIntervalFormatRegex=dateHistogramIntervalFormatRegex;function isGroupByDateHistogram(arg){return arg.hasOwnProperty("agg")&&arg.hasOwnProperty("field")&&arg.hasOwnProperty("calendar_interval")&&arg.agg===PIVOT_SUPPORTED_GROUP_BY_AGGS.DATE_HISTOGRAM}function isGroupByHistogram(arg){return arg.hasOwnProperty("agg")&&arg.hasOwnProperty("field")&&arg.hasOwnProperty("interval")&&arg.agg===PIVOT_SUPPORTED_GROUP_BY_AGGS.HISTOGRAM}function isGroupByTerms(arg){return arg.hasOwnProperty("agg")&&arg.hasOwnProperty("field")&&arg.agg===PIVOT_SUPPORTED_GROUP_BY_AGGS.TERMS}function isPivotGroupByConfigWithUiSupport(arg){return isGroupByDateHistogram(arg)||isGroupByHistogram(arg)||isGroupByTerms(arg)}function getEsAggFromGroupByConfig(groupByConfig){var esAgg=_objectSpread({},groupByConfig);delete esAgg.agg;delete esAgg.aggName;delete esAgg.dropDownName;return _defineProperty({},groupByConfig.agg,esAgg)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPivotQuery=getPivotQuery;exports.isSimpleQuery=isSimpleQuery;exports.isMatchAllQuery=isMatchAllQuery;exports.isDefaultQuery=isDefaultQuery;exports.getPreviewRequestBody=getPreviewRequestBody;exports.getCreateRequestBody=getCreateRequestBody;exports.defaultQuery=exports.matchAllQuery=void 0;var _common=__webpack_require__(68);var _common2=__webpack_require__(44);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getPivotQuery(search){if(typeof search==="string"){return{query_string:{query:search,default_operator:"AND"}}}return search}function isSimpleQuery(arg){return arg.query_string!==undefined}var matchAllQuery={match_all:{}};exports.matchAllQuery=matchAllQuery;function isMatchAllQuery(query){return query.match_all!==undefined&&Object.keys(query.match_all).length===0}var defaultQuery={query_string:{query:"*"}};exports.defaultQuery=defaultQuery;function isDefaultQuery(query){return isSimpleQuery(query)&&query.query_string.query==="*"}function getPreviewRequestBody(indexPatternTitle,query,groupBy,aggs){var index=indexPatternTitle.split(",").map((function(name){return name.trim()}));var request={source:{index:index},pivot:{group_by:{},aggregations:{}}};if(!isDefaultQuery(query)&&!isMatchAllQuery(query)){request.source.query=query}groupBy.forEach((function(g){if((0,_common2.isGroupByTerms)(g)){var termsAgg={terms:{field:g.field}};request.pivot.group_by[g.aggName]=termsAgg}else if((0,_common2.isGroupByHistogram)(g)){var histogramAgg={histogram:{field:g.field,interval:g.interval}};request.pivot.group_by[g.aggName]=histogramAgg}else if((0,_common2.isGroupByDateHistogram)(g)){var dateHistogramAgg={date_histogram:{field:g.field,calendar_interval:g.calendar_interval}};request.pivot.group_by[g.aggName]=dateHistogramAgg}else{request.pivot.group_by[g.aggName]=(0,_common2.getEsAggFromGroupByConfig)(g)}}));aggs.forEach((function(agg){request.pivot.aggregations[agg.aggName]=(0,_common2.getEsAggFromAggConfig)(agg)}));return request}function getCreateRequestBody(indexPatternTitle,pivotState,transformDetailsState){var request=_objectSpread({},getPreviewRequestBody(indexPatternTitle,getPivotQuery(pivotState.searchQuery),(0,_common.dictionaryToArray)(pivotState.groupByList),(0,_common.dictionaryToArray)(pivotState.aggList)),{},transformDetailsState.transformDescription!==""?{description:transformDetailsState.transformDescription}:{},{dest:{index:transformDetailsState.destinationIndex}},transformDetailsState.isContinuousModeEnabled?{sync:{time:{field:transformDetailsState.continuousModeDateField,delay:transformDetailsState.continuousModeDelay}}}:{});return request}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useDeleteTransforms=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _i18n=__webpack_require__(0);var _public=__webpack_require__(25);var _shared_imports=__webpack_require__(69);var _app_dependencies=__webpack_require__(51);var _common=__webpack_require__(44);var _components=__webpack_require__(71);var _use_api=__webpack_require__(53);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var useDeleteTransforms=function useDeleteTransforms(){var _useAppDependencies=(0,_app_dependencies.useAppDependencies)(),overlays=_useAppDependencies.overlays;var toastNotifications=(0,_app_dependencies.useToastNotifications)();var api=(0,_use_api.useApi)();return(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(transforms){var transformsInfo,results,transformId;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:transformsInfo=transforms.map((function(tf){return{id:tf.config.id,state:tf.stats.state}}));_context.prev=1;_context.next=4;return api.deleteTransforms(transformsInfo);case 4:results=_context.sent;for(transformId in results){if(results.hasOwnProperty(transformId)){if(results[transformId].success===true){toastNotifications.addSuccess(_i18n.i18n.translate("xpack.transform.transformList.deleteTransformSuccessMessage",{defaultMessage:"Request to delete transform {transformId} acknowledged.",values:{transformId:transformId}}))}else{toastNotifications.addDanger(_i18n.i18n.translate("xpack.transform.transformList.deleteTransformErrorMessage",{defaultMessage:"An error occurred deleting the transform {transformId}",values:{transformId:transformId}}))}}}_common.refreshTransformList$.next(_common.REFRESH_TRANSFORM_LIST_STATE.REFRESH);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](1);toastNotifications.addDanger({title:_i18n.i18n.translate("xpack.transform.transformList.deleteTransformGenericErrorMessage",{defaultMessage:"An error occurred calling the API endpoint to delete transforms."}),text:(0,_public.toMountPoint)(_react.default.createElement(_components.ToastNotificationText,{overlays:overlays,text:(0,_shared_imports.getErrorMessage)(_context.t0)}))});case 12:case"end":return _context.stop()}}}),_callee,null,[[1,9]])})));return function(_x){return _ref.apply(this,arguments)}}())};exports.useDeleteTransforms=useDeleteTransforms},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={plugin:true,DiscoverSetup:true,DiscoverStart:true,DocViewTable:true,JsonCodeBlock:true,DocViewInput:true,DocViewInputFn:true,DocViewerComponent:true,FieldName:true,createSavedSearchesLoader:true,SavedSearchLoader:true,SavedSearch:true};exports.plugin=plugin;Object.defineProperty(exports,"DiscoverSetup",{enumerable:true,get:function get(){return _plugin.DiscoverSetup}});Object.defineProperty(exports,"DiscoverStart",{enumerable:true,get:function get(){return _plugin.DiscoverStart}});Object.defineProperty(exports,"DocViewTable",{enumerable:true,get:function get(){return _table.DocViewTable}});Object.defineProperty(exports,"JsonCodeBlock",{enumerable:true,get:function get(){return _json_code_block.JsonCodeBlock}});Object.defineProperty(exports,"DocViewInput",{enumerable:true,get:function get(){return _doc_views_types.DocViewInput}});Object.defineProperty(exports,"DocViewInputFn",{enumerable:true,get:function get(){return _doc_views_types.DocViewInputFn}});Object.defineProperty(exports,"DocViewerComponent",{enumerable:true,get:function get(){return _doc_views_types.DocViewerComponent}});Object.defineProperty(exports,"FieldName",{enumerable:true,get:function get(){return _field_name.FieldName}});Object.defineProperty(exports,"createSavedSearchesLoader",{enumerable:true,get:function get(){return _saved_searches.createSavedSearchesLoader}});Object.defineProperty(exports,"SavedSearchLoader",{enumerable:true,get:function get(){return _types.SavedSearchLoader}});Object.defineProperty(exports,"SavedSearch",{enumerable:true,get:function get(){return _types.SavedSearch}});var _plugin=__webpack_require__(372);var _table=__webpack_require__(167);var _json_code_block=__webpack_require__(169);var _doc_views_types=__webpack_require__(445);Object.keys(_doc_views_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _doc_views_types[key]}})}));var _field_name=__webpack_require__(168);var _saved_searches=__webpack_require__(446);var _types=__webpack_require__(713);function plugin(){return new _plugin.DiscoverPlugin}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DiscoverPlugin=void 0;var _i18n=__webpack_require__(0);var _doc_views_registry=__webpack_require__(373);var _table=__webpack_require__(167);var _json_code_block=__webpack_require__(169);var _doc_viewer=__webpack_require__(437);var _services=__webpack_require__(170);__webpack_require__(440);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DiscoverPlugin=function(){function DiscoverPlugin(){_classCallCheck(this,DiscoverPlugin);_defineProperty(this,"docViewsRegistry",null)}_createClass(DiscoverPlugin,[{key:"setup",value:function setup(core){this.docViewsRegistry=new _doc_views_registry.DocViewsRegistry;(0,_services.setDocViewsRegistry)(this.docViewsRegistry);this.docViewsRegistry.addDocView({title:_i18n.i18n.translate("discover.docViews.table.tableTitle",{defaultMessage:"Table"}),order:10,component:_table.DocViewTable});this.docViewsRegistry.addDocView({title:_i18n.i18n.translate("discover.docViews.json.jsonTitle",{defaultMessage:"JSON"}),order:20,component:_json_code_block.JsonCodeBlock});return{docViews:{addDocView:this.docViewsRegistry.addDocView.bind(this.docViewsRegistry),setAngularInjectorGetter:this.docViewsRegistry.setAngularInjectorGetter.bind(this.docViewsRegistry)}}}},{key:"start",value:function start(){return{docViews:{DocViewer:_doc_viewer.DocViewer}}}}]);return DiscoverPlugin}();exports.DiscoverPlugin=DiscoverPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocViewsRegistry=void 0;var _doc_views_helpers=__webpack_require__(374);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DocViewsRegistry=function(){function DocViewsRegistry(){_classCallCheck(this,DocViewsRegistry);_defineProperty(this,"docViews",[]);_defineProperty(this,"angularInjectorGetter",null)}_createClass(DocViewsRegistry,[{key:"setAngularInjectorGetter",value:function setAngularInjectorGetter(injectorGetter){this.angularInjectorGetter=injectorGetter}},{key:"addDocView",value:function addDocView(docViewRaw){var _this=this;var docView=typeof docViewRaw==="function"?docViewRaw():docViewRaw;if(docView.directive){docView.render=(0,_doc_views_helpers.convertDirectiveToRenderFn)(docView.directive,(function(){if(!_this.angularInjectorGetter){throw new Error("Angular was not initialized")}return _this.angularInjectorGetter()}))}if(typeof docView.shouldShow!=="function"){docView.shouldShow=function(){return true}}this.docViews.push(docView)}},{key:"getDocViewsSorted",value:function getDocViewsSorted(hit){return this.docViews.filter((function(docView){return docView.shouldShow(hit)})).sort((function(a,b){return Number(a.order)>Number(b.order)?1:-1}))}}]);return DocViewsRegistry}();exports.DocViewsRegistry=DocViewsRegistry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.injectAngularElement=injectAngularElement;exports.convertDirectiveToRenderFn=convertDirectiveToRenderFn;var _react=_interopRequireDefault(__webpack_require__(22));var _reactDom=__webpack_require__(30);var _angular=_interopRequireDefault(__webpack_require__(29));var _doc_viewer_render_error=__webpack_require__(160);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function injectAngularElement(_x,_x2,_x3,_x4,_x5){return _injectAngularElement.apply(this,arguments)}function _injectAngularElement(){_injectAngularElement=_asyncToGenerator(regeneratorRuntime.mark((function _callee(domNode,template,scopeProps,Controller,getInjector){var $injector,rootScope,$compile,newScope,$target,$element;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getInjector();case 2:$injector=_context.sent;rootScope=$injector.get("$rootScope");$compile=$injector.get("$compile");newScope=Object.assign(rootScope.$new(),scopeProps);if(typeof Controller==="function"){newScope.$ctrl=$injector.instantiate(Controller,{$scope:newScope})}$target=_angular.default.element(domNode);$element=_angular.default.element(template);newScope.$apply((function(){var linkFn=$compile($element);$target.empty().append($element);linkFn(newScope)}));return _context.abrupt("return",(function(){newScope.$destroy()}));case 11:case"end":return _context.stop()}}}),_callee)})));return _injectAngularElement.apply(this,arguments)}function convertDirectiveToRenderFn(directive,getInjector){return function(domNode,props){var rejected=false;var cleanupFnPromise=injectAngularElement(domNode,directive.template,props,directive.controller,getInjector);cleanupFnPromise.catch((function(e){rejected=true;(0,_reactDom.render)(_react.default.createElement(_doc_viewer_render_error.DocViewerError,{error:e}),domNode)}));return function(){if(!rejected){cleanupFnPromise.then((function(cleanup){return cleanup()}))}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KibanaLegacyPlugin=void 0;var _dashboard_config=__webpack_require__(376);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var KibanaLegacyPlugin=function(){function KibanaLegacyPlugin(initializerContext){_classCallCheck(this,KibanaLegacyPlugin);this.initializerContext=initializerContext;_defineProperty(this,"apps",[]);_defineProperty(this,"forwards",[])}_createClass(KibanaLegacyPlugin,[{key:"setup",value:function setup(){var _this=this;return{registerLegacyApp:function registerLegacyApp(app){_this.apps.push(app)},forwardApp:function forwardApp(legacyAppId,newAppId){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{keepPrefix:false};_this.forwards.push(_objectSpread({legacyAppId:legacyAppId,newAppId:newAppId},options))},config:this.initializerContext.config.get(),env:this.initializerContext.env}}},{key:"start",value:function start(_ref){var _this2=this;var application=_ref.application;return{getApps:function getApps(){return _this2.apps},getForwards:function getForwards(){return _this2.forwards},config:this.initializerContext.config.get(),dashboardConfig:(0,_dashboard_config.getDashboardConfig)(!application.capabilities.dashboard.showWriteControls)}}}]);return KibanaLegacyPlugin}();exports.KibanaLegacyPlugin=KibanaLegacyPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDashboardConfig=getDashboardConfig;function getDashboardConfig(hideWriteControls){var _hideWriteControls=hideWriteControls;return{turnHideWriteControlsOn:function turnHideWriteControlsOn(){_hideWriteControls=true},getHideWriteControls:function getHideWriteControls(){return _hideWriteControls}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.kbnBaseUrl=void 0;var kbnBaseUrl="/app/kibana";exports.kbnBaseUrl=kbnBaseUrl},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initAngularBootstrap=void 0;var _lodash=__webpack_require__(41);var _angular=_interopRequireDefault(__webpack_require__(29));var _bind_html=__webpack_require__(379);var _tooltip=__webpack_require__(380);var _tooltip_popup=_interopRequireDefault(__webpack_require__(382));var _tooltip_html_unsafe_popup=_interopRequireDefault(__webpack_require__(383));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var initAngularBootstrap=(0,_lodash.once)((function(){_angular.default.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.bindHtml","ui.bootstrap.tooltip"]);_angular.default.module("ui.bootstrap.tpls",["template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html"]);(0,_bind_html.initBindHtml)();(0,_tooltip.initBootstrapTooltip)();_angular.default.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-html-unsafe-popup.html",_tooltip_html_unsafe_popup.default)}]);_angular.default.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-popup.html",_tooltip_popup.default)}])}));exports.initAngularBootstrap=initAngularBootstrap},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initBindHtml=initBindHtml;var _angular=_interopRequireDefault(__webpack_require__(29));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function initBindHtml(){_angular.default.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",(function(){return function(scope,element,attr){element.addClass("ng-binding").data("$binding",attr.bindHtmlUnsafe);scope.$watch(attr.bindHtmlUnsafe,(function bindHtmlUnsafeWatchAction(value){element.html(value||"")}))}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initBootstrapTooltip=initBootstrapTooltip;var _angular=_interopRequireDefault(__webpack_require__(29));var _position=__webpack_require__(381);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function initBootstrapTooltip(){(0,_position.initBootstrapPosition)();_angular.default.module("ui.bootstrap.tooltip",["ui.bootstrap.position"]).provider("$tooltip",(function(){var defaultOptions={placement:"top",animation:true,popupDelay:0};var triggerMap={mouseenter:"mouseleave",click:"click",focus:"blur"};var globalOptions={};this.options=function(value){_angular.default.extend(globalOptions,value)};this.setTriggers=function setTriggers(triggers){_angular.default.extend(triggerMap,triggers)};function snake_case(name){var regexp=/[A-Z]/g;var separator="-";return name.replace(regexp,(function(letter,pos){return(pos?separator:"")+letter.toLowerCase()}))}this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function($window,$compile,$timeout,$document,$position,$interpolate){return function $tooltip(type,prefix,defaultTriggerShow){var options=_angular.default.extend({},defaultOptions,globalOptions);function getTriggers(trigger){var show=trigger||options.trigger||defaultTriggerShow;var hide=triggerMap[show]||show;return{show:show,hide:hide}}var directiveName=snake_case(type);var startSym=$interpolate.startSymbol();var endSym=$interpolate.endSymbol();var template="<div "+directiveName+"-popup "+'title="'+startSym+"title"+endSym+'" '+'content="'+startSym+"content"+endSym+'" '+'placement="'+startSym+"placement"+endSym+'" '+'animation="animation" '+'is-open="isOpen"'+">"+"</div>";return{restrict:"EA",compile:function compile(tElem,tAttrs){var tooltipLinker=$compile(template);return function link(scope,element,attrs){var tooltip;var tooltipLinkedScope;var transitionTimeout;var popupTimeout;var appendToBody=_angular.default.isDefined(options.appendToBody)?options.appendToBody:false;var triggers=getTriggers(undefined);var hasEnableExp=_angular.default.isDefined(attrs[prefix+"Enable"]);var ttScope=scope.$new(true);var positionTooltip=function positionTooltip(){var ttPosition=$position.positionElements(element,tooltip,ttScope.placement,appendToBody);ttPosition.top+="px";ttPosition.left+="px";tooltip.css(ttPosition)};ttScope.isOpen=false;function toggleTooltipBind(){if(!ttScope.isOpen){showTooltipBind()}else{hideTooltipBind()}}function showTooltipBind(){if(hasEnableExp&&!scope.$eval(attrs[prefix+"Enable"])){return}prepareTooltip();if(ttScope.popupDelay){if(!popupTimeout){popupTimeout=$timeout(show,ttScope.popupDelay,false);popupTimeout.then((function(reposition){return reposition()})).catch((function(error){if(error!=="canceled"){throw error}}))}}else{show()()}}function hideTooltipBind(){scope.$evalAsync((function(){hide()}))}function show(){popupTimeout=null;if(transitionTimeout){$timeout.cancel(transitionTimeout);transitionTimeout=null}if(!ttScope.content){return _angular.default.noop}createTooltip();tooltip.css({top:0,left:0,display:"block"});ttScope.$digest();positionTooltip();ttScope.isOpen=true;ttScope.$digest();return positionTooltip}function hide(){ttScope.isOpen=false;$timeout.cancel(popupTimeout);popupTimeout=null;if(ttScope.animation){if(!transitionTimeout){transitionTimeout=$timeout(removeTooltip,500)}}else{removeTooltip()}}function createTooltip(){if(tooltip){removeTooltip()}tooltipLinkedScope=ttScope.$new();tooltip=tooltipLinker(tooltipLinkedScope,(function(tooltip){if(appendToBody){$document.find("body").append(tooltip)}else{element.after(tooltip)}}))}function removeTooltip(){transitionTimeout=null;if(tooltip){tooltip.remove();tooltip=null}if(tooltipLinkedScope){tooltipLinkedScope.$destroy();tooltipLinkedScope=null}}function prepareTooltip(){prepPlacement();prepPopupDelay()}attrs.$observe(type,(function(val){ttScope.content=val;if(!val&&ttScope.isOpen){hide()}}));attrs.$observe(prefix+"Title",(function(val){ttScope.title=val}));function prepPlacement(){var val=attrs[prefix+"Placement"];ttScope.placement=_angular.default.isDefined(val)?val:options.placement}function prepPopupDelay(){var val=attrs[prefix+"PopupDelay"];var delay=parseInt(val,10);ttScope.popupDelay=!isNaN(delay)?delay:options.popupDelay}var unregisterTriggers=function unregisterTriggers(){element.unbind(triggers.show,showTooltipBind);element.unbind(triggers.hide,hideTooltipBind)};function prepTriggers(){var val=attrs[prefix+"Trigger"];unregisterTriggers();triggers=getTriggers(val);if(triggers.show===triggers.hide){element.bind(triggers.show,toggleTooltipBind)}else{element.bind(triggers.show,showTooltipBind);element.bind(triggers.hide,hideTooltipBind)}}prepTriggers();var animation=scope.$eval(attrs[prefix+"Animation"]);ttScope.animation=_angular.default.isDefined(animation)?!!animation:options.animation;var appendToBodyVal=scope.$eval(attrs[prefix+"AppendToBody"]);appendToBody=_angular.default.isDefined(appendToBodyVal)?appendToBodyVal:appendToBody;if(appendToBody){scope.$on("$locationChangeSuccess",(function closeTooltipOnLocationChangeSuccess(){if(ttScope.isOpen){hide()}}))}scope.$on("$destroy",(function onDestroyTooltip(){$timeout.cancel(transitionTimeout);$timeout.cancel(popupTimeout);unregisterTriggers();removeTooltip();ttScope=null}))}}}}}]})).directive("tooltip",["$tooltip",function($tooltip){return $tooltip("tooltip","tooltip","mouseenter")}]).directive("tooltipPopup",(function(){return{restrict:"EA",replace:true,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}})).directive("tooltipHtmlUnsafe",["$tooltip",function($tooltip){return $tooltip("tooltipHtmlUnsafe","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",(function(){return{restrict:"EA",replace:true,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initBootstrapPosition=initBootstrapPosition;var _angular=_interopRequireDefault(__webpack_require__(29));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function initBootstrapPosition(){_angular.default.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function($document,$window){function getStyle(el,cssprop){if(el.currentStyle){return el.currentStyle[cssprop]}else if($window.getComputedStyle){return $window.getComputedStyle(el)[cssprop]}return el.style[cssprop]}function isStaticPositioned(element){return(getStyle(element,"position")||"static")==="static"}var parentOffsetEl=function parentOffsetEl(element){var docDomEl=$document[0];var offsetParent=element.offsetParent||docDomEl;while(offsetParent&&offsetParent!==docDomEl&&isStaticPositioned(offsetParent)){offsetParent=offsetParent.offsetParent}return offsetParent||docDomEl};return{position:function position(element){var elBCR=this.offset(element);var offsetParentBCR={top:0,left:0};var offsetParentEl=parentOffsetEl(element[0]);if(offsetParentEl!=$document[0]){offsetParentBCR=this.offset(_angular.default.element(offsetParentEl));offsetParentBCR.top+=offsetParentEl.clientTop-offsetParentEl.scrollTop;offsetParentBCR.left+=offsetParentEl.clientLeft-offsetParentEl.scrollLeft}var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:elBCR.top-offsetParentBCR.top,left:elBCR.left-offsetParentBCR.left}},offset:function offset(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:boundingClientRect.top+($window.pageYOffset||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].documentElement.scrollLeft)}},positionElements:function positionElements(hostEl,targetEl,positionStr,appendToBody){var positionStrParts=positionStr.split("-");var pos0=positionStrParts[0];var pos1=positionStrParts[1]||"center";var hostElPos;var targetElWidth;var targetElHeight;var targetElPos;hostElPos=appendToBody?this.offset(hostEl):this.position(hostEl);targetElWidth=targetEl.prop("offsetWidth");targetElHeight=targetEl.prop("offsetHeight");var shiftWidth={center:function center(){return hostElPos.left+hostElPos.width/2-targetElWidth/2},left:function left(){return hostElPos.left},right:function right(){return hostElPos.left+hostElPos.width}};var shiftHeight={center:function center(){return hostElPos.top+hostElPos.height/2-targetElHeight/2},top:function top(){return hostElPos.top},bottom:function bottom(){return hostElPos.top+hostElPos.height}};switch(pos0){case"right":targetElPos={top:shiftHeight[pos1](),left:shiftWidth[pos0]()};break;case"left":targetElPos={top:shiftHeight[pos1](),left:hostElPos.left-targetElWidth};break;case"bottom":targetElPos={top:shiftHeight[pos0](),left:shiftWidth[pos1]()};break;default:targetElPos={top:hostElPos.top-targetElHeight,left:shiftWidth[pos1]()};break}return targetElPos}}}])}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="bsTooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\t\n    <div class="bsTooltip-arrow"></div>\t\n    <div class="bsTooltip-inner" ng-bind="content"></div>\t\n  </div>'},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="bsTooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\t\n    <div class="bsTooltip-arrow"></div>\t\n    <div class="bsTooltip-inner" bind-html-unsafe="content"></div>\t\n  </div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PaginateDirectiveProvider=PaginateDirectiveProvider;exports.PaginateControlsDirectiveProvider=PaginateControlsDirectiveProvider;var _lodash=_interopRequireDefault(__webpack_require__(41));var _i18n=__webpack_require__(0);var _paginate_controls=_interopRequireDefault(__webpack_require__(385));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PaginateDirectiveProvider($parse,$compile){return{restrict:"E",scope:true,link:{pre:function pre($scope,$el,attrs){if(_lodash.default.isUndefined(attrs.bottomControls))attrs.bottomControls=true;if($el.find("paginate-controls.paginate-bottom").length===0&&attrs.bottomControls){$el.append($compile('<paginate-controls class="paginate-bottom">')($scope))}},post:function post($scope,$el,attrs){if(_lodash.default.isUndefined(attrs.topControls))attrs.topControls=false;if($el.find("paginate-controls.paginate-top").length===0&&attrs.topControls){$el.prepend($compile('<paginate-controls class="paginate-top">')($scope))}var paginate=$scope.paginate;paginate.getList=$parse(attrs.list);paginate.perPageProp=attrs.perPageProp;if(attrs.perPage){paginate.perPage=attrs.perPage;$scope.showSelector=false}else{$scope.showSelector=true}paginate.otherWidthGetter=$parse(attrs.otherWidth);paginate.init()}},controllerAs:"paginate",controller:function controller($scope,$document){var self=this;var ALL=0;var allSizeTitle=_i18n.i18n.translate("kibana_legacy.paginate.size.allDropDownOptionLabel",{defaultMessage:"All"});self.sizeOptions=[{title:"10",value:10},{title:"25",value:25},{title:"100",value:100},{title:allSizeTitle,value:ALL}];self.init=function(){self.perPage=_lodash.default.parseInt(self.perPage)||$scope[self.perPageProp];$scope.$watchMulti(["paginate.perPage",self.perPageProp,self.otherWidthGetter],(function(vals,oldVals){var intChanges=vals[0]!==oldVals[0];if(intChanges){if(!setPerPage(self.perPage)){self.renderList()}return}self.perPage=_lodash.default.parseInt(self.perPage)||$scope[self.perPageProp];if(self.perPage==null){self.perPage=ALL;return}self.renderList()}));$scope.$watch("page",self.changePage);$scope.$watchCollection(self.getList,(function(list){$scope.list=list;self.renderList()}))};self.goToPage=function(number){if(number){if(number.hasOwnProperty("number"))number=number.number;$scope.page=$scope.pages[number-1]||$scope.pages[0]}};self.goToTop=function goToTop(){$document.scrollTop(0)};self.renderList=function(){$scope.pages=[];if(!$scope.list)return;var perPage=_lodash.default.parseInt(self.perPage);var count=perPage?Math.ceil($scope.list.length/perPage):1;_lodash.default.times(count,(function(i){var page;if(perPage){var start=perPage*i;page=$scope.list.slice(start,start+perPage)}else{page=$scope.list.slice(0)}page.number=i+1;page.i=i;page.count=count;page.first=page.number===1;page.last=page.number===count;page.firstItem=(page.number-1)*perPage+1;page.lastItem=Math.min(page.number*perPage,$scope.list.length);page.prev=$scope.pages[i-1];if(page.prev)page.prev.next=page;$scope.pages.push(page)}));if($scope.page&&$scope.page.i<$scope.pages.length){$scope.page=$scope.pages[$scope.page.i]}else{$scope.page=$scope.pages[0]}if($scope.page&&$scope.onPageChanged){$scope.onPageChanged($scope.page)}};self.changePage=function(page){if(!page){$scope.otherPages=null;return}$scope.otherPages=[];var width=+self.otherWidthGetter($scope)||5;var left=page.i-Math.round((width-1)/2);var right=left+width-1;if(left<0){right+=0-left;left=0}var lastI=page.count-1;if(right>lastI){right=lastI;left=right-width+1}for(var i=left;i<=right;i++){var other=$scope.pages[i];if(!other)continue;$scope.otherPages.push(other);if(other.last)$scope.otherPages.containsLast=true;if(other.first)$scope.otherPages.containsFirst=true}if($scope.onPageChanged){$scope.onPageChanged($scope.page)}};function setPerPage(val){var $ppParent=$scope;while($ppParent&&!_lodash.default.has($ppParent,self.perPageProp)){$ppParent=$ppParent.$parent}if($ppParent){$ppParent[self.perPageProp]=val;return true}}}}}function PaginateControlsDirectiveProvider(){return{restrict:"E",template:_paginate_controls.default}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<button\n  class="kuiLink"\n  ng-if="linkToTop"\n  ng-click="paginate.goToTop()"\n  data-test-subj="paginateControlsLinkToTop"\n  i18n-id="kibana_legacy.paginate.controls.scrollTopButtonLabel"\n  i18n-default-message="Scroll to top"\n></button>\n\n<div\n  class="pagination-other-pages"\n  data-test-subj="paginationControls"\n>\n  <ul class="pagination-other-pages-list pagination-sm" ng-if="page.count > 1">\n    <li ng-style="{\'visibility\':\'hidden\'}" ng-if="page.first">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-click="paginate.goToPage(page.prev)"\n      >\n        <span class="euiButtonEmpty__content">«</span>\n      </button>\n    </li>\n    <li ng-style="{\'visibility\':\'visible\'}" ng-if="!page.first">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-click="paginate.goToPage(page.prev)"\n      >\n        <span class="euiButtonEmpty__content">«</span>\n      </button>\n    </li>\n\n    <li ng-if="!otherPages.containsFirst">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-click="paginate.goToPage(1)"\n      >\n        <span class="euiButtonEmpty__content">1</span>\n      </button>\n      ...\n    </li>\n\n    <li\n      ng-repeat="other in otherPages"\n      ng-class="{ active: other.number === page.number }"\n    >\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-class="{ \'euiPaginationButton-isActive\': other.number === page.number }"\n        ng-click="paginate.goToPage(other)"\n      >\n        <span class="euiButtonEmpty__content">{{other.number}}</span>\n      </button>\n    </li>\n\n    <li ng-if="!otherPages.containsLast">\n      ...\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-click="paginate.goToPage(page.count)"\n      >\n        <span class="euiButtonEmpty__content">{{page.count}}</span>\n      </button>\n    </li>\n\n    <li ng-style="{\'visibility\':\'hidden\'}" ng-if="page.last">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        data-test-subj="paginateNext"\n        ng-click="paginate.goToPage(page.next)"\n      >\n        <span class="euiButtonEmpty__content">»</span>\n      </button>\n    </li>\n    <li ng-style="{\'visibility\':\'visible\'}" ng-if="!page.last">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        data-test-subj="paginateNext"\n        ng-click="paginate.goToPage(page.next)"\n      >\n        <span class="euiButtonEmpty__content">»</span>\n      </button>\n    </li>\n  </ul>\n</div>\n\n<form class="form-inline pagination-size" ng-if="showSelector">\n  <div class="form-group">\n    <label\n      i18n-id="kibana_legacy.paginate.controls.pageSizeLabel"\n      i18n-default-message="Page Size"\n    ></label>\n    <select\n      ng-model="paginate.perPage"\n      ng-options="opt.value as opt.title for opt in paginate.sizeOptions"\n      data-test-subj="paginateControlsPageSizeSelect"\n    ></select>\n  </div>\n</form>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={PromiseServiceCreator:true,watchMultiDecorator:true,createTopNavDirective:true,createTopNavHelper:true,loadKbnTopNavDirectives:true,subscribeWithScope:true};Object.defineProperty(exports,"PromiseServiceCreator",{enumerable:true,get:function get(){return _promises.PromiseServiceCreator}});Object.defineProperty(exports,"watchMultiDecorator",{enumerable:true,get:function get(){return _watch_multi.watchMultiDecorator}});Object.defineProperty(exports,"createTopNavDirective",{enumerable:true,get:function get(){return _kbn_top_nav.createTopNavDirective}});Object.defineProperty(exports,"createTopNavHelper",{enumerable:true,get:function get(){return _kbn_top_nav.createTopNavHelper}});Object.defineProperty(exports,"loadKbnTopNavDirectives",{enumerable:true,get:function get(){return _kbn_top_nav.loadKbnTopNavDirectives}});Object.defineProperty(exports,"subscribeWithScope",{enumerable:true,get:function get(){return _subscribe_with_scope.subscribeWithScope}});var _promises=__webpack_require__(387);var _watch_multi=__webpack_require__(388);var _angular_config=__webpack_require__(389);Object.keys(_angular_config).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _angular_config[key]}})}));var _kbn_top_nav=__webpack_require__(417);var _subscribe_with_scope=__webpack_require__(419)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PromiseServiceCreator=PromiseServiceCreator;var _lodash=_interopRequireDefault(__webpack_require__(41));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PromiseServiceCreator($q,$timeout){function Promise(fn){if(typeof this==="undefined")throw new Error('Promise constructor must be called with "new"');var defer=$q.defer();try{fn(defer.resolve,defer.reject)}catch(e){defer.reject(e)}return defer.promise}Promise.all=Promise.props=$q.all;Promise.resolve=function(val){var defer=$q.defer();defer.resolve(val);return defer.promise};Promise.reject=function(reason){var defer=$q.defer();defer.reject(reason);return defer.promise};Promise.cast=$q.when;Promise.delay=function(ms){return $timeout(_lodash.default.noop,ms)};Promise.method=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return Promise.try(fn,args,this)}};Promise.nodeify=function(promise,cb){promise.then((function(val){cb(void 0,val)}),cb)};Promise.map=function(arr,fn){return Promise.all(arr.map((function(i,el,list){return Promise.try(fn,[i,el,list])})))};Promise.each=function(arr,fn){var queue=arr.slice(0);var i=0;return function next(){if(!queue.length)return arr;return Promise.try(fn,[arr.shift(),i++]).then(next)}()};Promise.is=function(obj){return obj&&typeof obj.then==="function"};Promise.halt=_lodash.default.once((function(){var promise=new Promise((function(){}));promise.then=_lodash.default.constant(promise);promise.catch=_lodash.default.constant(promise);return promise}));Promise.try=function(fn,args,ctx){if(typeof fn!=="function"){return Promise.reject(new TypeError("fn must be a function"))}var value;if(Array.isArray(args)){try{value=fn.apply(ctx,args)}catch(e){return Promise.reject(e)}}else{try{value=fn.call(ctx,args)}catch(e){return Promise.reject(e)}}return Promise.resolve(value)};Promise.fromNode=function(takesCbFn){return new Promise((function(resolve,reject){takesCbFn((function(err){for(var _len=arguments.length,results=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){results[_key-1]=arguments[_key]}if(err)reject(err);else if(results.length>1)resolve(results);else resolve(results[0])}))}))};Promise.race=function(iterable){return new Promise((function(resolve,reject){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=iterable[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var i=_step.value;Promise.resolve(i).then(resolve,reject)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}))};return Promise}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.watchMultiDecorator=watchMultiDecorator;var _lodash=_interopRequireDefault(__webpack_require__(41));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function watchMultiDecorator($provide){$provide.decorator("$rootScope",(function($delegate){$delegate.constructor.prototype.$watchMulti=function(expressions,fn){if(!Array.isArray(expressions)){throw new TypeError("expected an array of expressions to watch")}if(!_lodash.default.isFunction(fn)){throw new TypeError("expected a function that is triggered on each watch")}var $scope=this;var vals=new Array(expressions.length);var prev=new Array(expressions.length);var fire=false;var init=0;var neededInits=expressions.length;var unwatchers=expressions.map((function(expr,i){expr=normalizeExpression($scope,expr);if(!expr)return;return expr.fn.call($scope,expr.get,(function(newVal,oldVal){if(newVal===oldVal){init+=1}vals[i]=newVal;prev[i]=oldVal;fire=true}),expr.deep)}));var flip=false;unwatchers.push($scope.$watch((function(){if(init<neededInits)return init;if(fire){fire=false;flip=!flip}return flip}),(function(){if(init<neededInits)return false;fn(vals.slice(0),prev.slice(0));vals.forEach((function(v,i){prev[i]=v}))})));return function(){unwatchers.forEach((function(listener){return listener()}))}};function normalizeExpression($scope,expr){if(!expr)return;var norm={fn:$scope.$watch,deep:false};if(_lodash.default.isFunction(expr))return _lodash.default.assign(norm,{get:expr});if(_lodash.default.isObject(expr))return _lodash.default.assign(norm,expr);if(!_lodash.default.isString(expr))return;if(expr.substr(0,2)==="[]"){return _lodash.default.assign(norm,{fn:$scope.$watchCollection,get:expr.substr(2)})}if(expr.charAt(0)==="="){return _lodash.default.assign(norm,{deep:true,get:expr.substr(1)})}return _lodash.default.assign(norm,{get:expr})}return $delegate}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.$setupXsrfRequestInterceptor=exports.configureAppAngularModule=void 0;var _jquery=_interopRequireDefault(__webpack_require__(36));var _lodash=__webpack_require__(41);var _react=_interopRequireWildcard(__webpack_require__(22));var Rx=_interopRequireWildcard(__webpack_require__(28));var _i18n=__webpack_require__(0);var _react2=__webpack_require__(24);var _utils=__webpack_require__(84);var _public=__webpack_require__(25);var _utils2=__webpack_require__(163);var _lib=__webpack_require__(164);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var URL_LIMIT_WARN_WITHIN=1e3;function isDummyRoute($route,isLocalAngular){return $route.current&&$route.current.$$route&&$route.current.$$route.outerAngularWrapperRoute||!$route.current&&isLocalAngular}var configureAppAngularModule=function configureAppAngularModule(angularModule,newPlatform,isLocalAngular){var core="core"in newPlatform?newPlatform.core:newPlatform;var packageInfo="injectedMetadata"in newPlatform?newPlatform.injectedMetadata.getLegacyMetadata():newPlatform.env.packageInfo;if("injectedMetadata"in newPlatform){(0,_lodash.forOwn)(newPlatform.injectedMetadata.getInjectedVars(),(function(val,name){if(name!==undefined){angularModule.value(name,(0,_lodash.cloneDeep)(val))}}))}angularModule.value("kbnVersion",packageInfo.version).value("buildNum",packageInfo.buildNum).value("buildSha",packageInfo.buildSha).value("esUrl",getEsUrl(core)).value("uiCapabilities",core.application.capabilities).config(setupCompileProvider("injectedMetadata"in newPlatform?newPlatform.injectedMetadata.getLegacyMetadata().devMode:newPlatform.env.mode.dev)).config(setupLocationProvider()).config($setupXsrfRequestInterceptor(packageInfo.version)).run(capture$httpLoadingCount(core)).run($setupBreadcrumbsAutoClear(core,isLocalAngular)).run($setupBadgeAutoClear(core,isLocalAngular)).run($setupHelpExtensionAutoClear(core,isLocalAngular)).run($setupUrlOverflowHandling(core,isLocalAngular)).run($setupUICapabilityRedirect(core))};exports.configureAppAngularModule=configureAppAngularModule;var getEsUrl=function getEsUrl(newPlatform){var a=document.createElement("a");a.href=newPlatform.http.basePath.prepend("/elasticsearch");var protocolPort=/https/.test(a.protocol)?443:80;var port=a.port||protocolPort;return{host:a.hostname,port:port,protocol:a.protocol,pathname:a.pathname}};var setupCompileProvider=function setupCompileProvider(devMode){return function($compileProvider){if(!devMode){$compileProvider.debugInfoEnabled(false)}}};var setupLocationProvider=function setupLocationProvider(){return function($locationProvider){$locationProvider.html5Mode({enabled:false,requireBase:false,rewriteLinks:false});$locationProvider.hashPrefix("")}};var $setupXsrfRequestInterceptor=function $setupXsrfRequestInterceptor(version){_jquery.default.ajaxPrefilter((function(_ref,originalOptions,jqXHR){var _ref$kbnXsrfToken=_ref.kbnXsrfToken,kbnXsrfToken=_ref$kbnXsrfToken===void 0?true:_ref$kbnXsrfToken;if(kbnXsrfToken){jqXHR.setRequestHeader("kbn-version",version)}}));return function($httpProvider){$httpProvider.interceptors.push((function(){return{request:function request(opts){var _ref2=opts,_ref2$kbnXsrfToken=_ref2.kbnXsrfToken,kbnXsrfToken=_ref2$kbnXsrfToken===void 0?true:_ref2$kbnXsrfToken;if(kbnXsrfToken){(0,_lodash.set)(opts,["headers","kbn-version"],version)}return opts}}}))}};exports.$setupXsrfRequestInterceptor=$setupXsrfRequestInterceptor;var capture$httpLoadingCount=function capture$httpLoadingCount(newPlatform){return function($rootScope,$http){newPlatform.http.addLoadingCountSource(new Rx.Observable((function(observer){var unwatch=$rootScope.$watch((function(){var reqs=$http.pendingRequests||[];observer.next(reqs.filter((function(req){return!(0,_utils2.isSystemApiRequest)(req)})).length)}));return unwatch})))}};var $setupUICapabilityRedirect=function $setupUICapabilityRedirect(newPlatform){return function($rootScope,$injector){var isKibanaAppRoute=window.location.pathname.endsWith("/app/kibana");if(!isKibanaAppRoute){return}$rootScope.$on("$routeChangeStart",(function(event){var _ref3=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},route=_ref3.$$route;if(!route||!route.requireUICapability){return}if(!(0,_lodash.get)(newPlatform.application.capabilities,route.requireUICapability)){$injector.get("$location").url("/home");event.preventDefault()}}))}};var $setupBreadcrumbsAutoClear=function $setupBreadcrumbsAutoClear(newPlatform,isLocalAngular){return function($rootScope,$injector){var breadcrumbSetSinceRouteChange=false;var $route=$injector.has("$route")?$injector.get("$route"):{};newPlatform.chrome.getBreadcrumbs$().subscribe({next:function next(){breadcrumbSetSinceRouteChange=true}});$rootScope.$on("$routeChangeStart",(function(){breadcrumbSetSinceRouteChange=false}));$rootScope.$on("$routeChangeSuccess",(function(){if(isDummyRoute($route,isLocalAngular)){return}var current=$route.current||{};if(breadcrumbSetSinceRouteChange||current.$$route&&current.$$route.redirectTo){return}var k7BreadcrumbsProvider=current.k7Breadcrumbs;if(!k7BreadcrumbsProvider){newPlatform.chrome.setBreadcrumbs([]);return}try{newPlatform.chrome.setBreadcrumbs($injector.invoke(k7BreadcrumbsProvider))}catch(error){if((0,_lib.isAngularHttpError)(error)){error=(0,_lib.formatAngularHttpError)(error)}newPlatform.fatalErrors.add(error,"location")}}))}};var $setupBadgeAutoClear=function $setupBadgeAutoClear(newPlatform,isLocalAngular){return function($rootScope,$injector){var badgeSetSinceRouteChange=false;var $route=$injector.has("$route")?$injector.get("$route"):{};$rootScope.$on("$routeChangeStart",(function(){badgeSetSinceRouteChange=false}));$rootScope.$on("$routeChangeSuccess",(function(){if(isDummyRoute($route,isLocalAngular)){return}var current=$route.current||{};if(badgeSetSinceRouteChange||current.$$route&&current.$$route.redirectTo){return}var badgeProvider=current.badge;if(!badgeProvider){newPlatform.chrome.setBadge(undefined);return}try{newPlatform.chrome.setBadge($injector.invoke(badgeProvider))}catch(error){if((0,_lib.isAngularHttpError)(error)){error=(0,_lib.formatAngularHttpError)(error)}newPlatform.fatalErrors.add(error,"location")}}))}};var $setupHelpExtensionAutoClear=function $setupHelpExtensionAutoClear(newPlatform,isLocalAngular){return function($rootScope,$injector){var helpExtensionSetSinceRouteChange=false;newPlatform.chrome.getHelpExtension$().subscribe({next:function next(){helpExtensionSetSinceRouteChange=true}});var $route=$injector.has("$route")?$injector.get("$route"):{};$rootScope.$on("$routeChangeStart",(function(){if(isDummyRoute($route,isLocalAngular)){return}helpExtensionSetSinceRouteChange=false}));$rootScope.$on("$routeChangeSuccess",(function(){if(isDummyRoute($route,isLocalAngular)){return}var current=$route.current||{};if(helpExtensionSetSinceRouteChange||current.$$route&&current.$$route.redirectTo){return}newPlatform.chrome.setHelpExtension(current.helpExtension)}))}};var $setupUrlOverflowHandling=function $setupUrlOverflowHandling(newPlatform,isLocalAngular){return function($location,$rootScope,$injector){var $route=$injector.has("$route")?$injector.get("$route"):{};var urlOverflow=new _utils2.UrlOverflowService;var check=function check(){if(isDummyRoute($route,isLocalAngular)){return}if(newPlatform.uiSettings.get("state:storeInSessionStorage")){return}if($location.path()==="/error/url-overflow"){return}try{if(urlOverflow.check($location.absUrl())<=URL_LIMIT_WARN_WITHIN){newPlatform.notifications.toasts.addWarning({title:_i18n.i18n.translate("kibana_legacy.bigUrlWarningNotificationTitle",{defaultMessage:"The URL is big and Kibana might stop working"}),text:(0,_public.toMountPoint)(_react.default.createElement(_react.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"kibana_legacy.bigUrlWarningNotificationMessage",defaultMessage:"Either enable the {storeInSessionStorageParam} option in {advancedSettingsLink} or simplify the onscreen visuals.",values:{storeInSessionStorageParam:_react.default.createElement("code",null,"state:storeInSessionStorage"),advancedSettingsLink:_react.default.createElement("a",{href:"#/management/kibana/settings"},_react.default.createElement(_react2.FormattedMessage,{id:"kibana_legacy.bigUrlWarningNotificationMessage.advancedSettingsLinkText",defaultMessage:"advanced settings"}))}})))})}}catch(e){window.location.href=(0,_utils.modifyUrl)(window.location.href,(function(parts){parts.hash="#/error/url-overflow"}));window.location.reload()}};$rootScope.$on("$routeUpdate",check);$rootScope.$on("$routeChangeStart",check)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.assertNever=assertNever;function assertNever(x){throw new Error("Unexpected object: ".concat(x))}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty2(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.ContextContainer=void 0;var _lodash=__webpack_require__(41);var _=__webpack_require__(84);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ContextContainer=function(){function ContextContainer(pluginDependencies,coreId){var _this=this;_classCallCheck(this,ContextContainer);this.pluginDependencies=pluginDependencies;this.coreId=coreId;_defineProperty(this,"contextProviders",new Map);_defineProperty(this,"contextNamesBySource",void 0);_defineProperty(this,"registerContext",(function(source,contextName,provider){if(_this.contextProviders.has(contextName)){throw new Error("Context provider for ".concat(contextName," has already been registered."))}if(source!==_this.coreId&&!_this.pluginDependencies.has(source)){throw new Error("Cannot register context for unknown plugin: ".concat(source.toString()))}_this.contextProviders.set(contextName,{provider:provider,source:source});_this.contextNamesBySource.set(source,[].concat(_toConsumableArray(_this.contextNamesBySource.get(source)||[]),[contextName]));return _this}));_defineProperty(this,"createHandler",(function(source,handler){if(source!==_this.coreId&&!_this.pluginDependencies.has(source)){throw new Error("Cannot create handler for unknown plugin: ".concat(source.toString()))}return(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _len,args,_key,context,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:for(_len=_args.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=_args[_key]}_context.next=3;return _this.buildContext.apply(_this,[source].concat(args));case 3:context=_context.sent;return _context.abrupt("return",handler.apply(void 0,[context].concat(args)));case 5:case"end":return _context.stop()}}}),_callee)})));return function(){return _ref.apply(this,arguments)}}())}));this.contextNamesBySource=new Map([[coreId,[]]])}_createClass(ContextContainer,[{key:"buildContext",value:function(){var _buildContext=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(source){var _this2=this;var _len2,contextArgs,_key2,contextsToBuild,_args3=arguments;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:for(_len2=_args3.length,contextArgs=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){contextArgs[_key2-1]=_args3[_key2]}contextsToBuild=new Set(this.getContextNamesForSource(source));return _context3.abrupt("return",_toConsumableArray(this.contextProviders).sort(sortByCoreFirst(this.coreId)).filter((function(_ref2){var _ref3=_slicedToArray(_ref2,1),contextName=_ref3[0];return contextsToBuild.has(contextName)})).reduce(function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(contextPromise,_ref5){var _ref6,contextName,_ref6$,provider,providerSource,resolvedContext,exposedContext;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_ref6=_slicedToArray(_ref5,2),contextName=_ref6[0],_ref6$=_ref6[1],provider=_ref6$.provider,providerSource=_ref6$.source;_context2.next=3;return contextPromise;case 3:resolvedContext=_context2.sent;exposedContext=(0,_.pick)(resolvedContext,_toConsumableArray(_this2.getContextNamesForSource(providerSource)));_context2.t0=_objectSpread;_context2.t1={};_context2.t2=resolvedContext;_context2.t3=_defineProperty2;_context2.t4={};_context2.t5=contextName;_context2.next=13;return provider.apply(void 0,[exposedContext].concat(contextArgs));case 13:_context2.t6=_context2.sent;_context2.t7=(0,_context2.t3)(_context2.t4,_context2.t5,_context2.t6);return _context2.abrupt("return",(0,_context2.t0)(_context2.t1,_context2.t2,_context2.t7));case 16:case"end":return _context2.stop()}}}),_callee2)})));return function(_x2,_x3){return _ref4.apply(this,arguments)}}(),Promise.resolve({})));case 3:case"end":return _context3.stop()}}}),_callee3,this)})));function buildContext(_x){return _buildContext.apply(this,arguments)}return buildContext}()},{key:"getContextNamesForSource",value:function getContextNamesForSource(source){if(source===this.coreId){return this.getContextNamesForCore()}else{return this.getContextNamesForPluginId(source)}}},{key:"getContextNamesForCore",value:function getContextNamesForCore(){return new Set(this.contextNamesBySource.get(this.coreId))}},{key:"getContextNamesForPluginId",value:function getContextNamesForPluginId(pluginId){var _this3=this;var pluginDeps=this.pluginDependencies.get(pluginId);if(!pluginDeps){throw new Error("Cannot create context for unknown plugin: ".concat(pluginId.toString()))}return new Set([].concat(_toConsumableArray(this.contextNamesBySource.get(this.coreId)),_toConsumableArray(this.contextNamesBySource.get(pluginId)||[]),_toConsumableArray((0,_lodash.flatten)(pluginDeps.map((function(p){return _this3.contextNamesBySource.get(p)||[]}))))))}}]);return ContextContainer}();exports.ContextContainer=ContextContainer;var sortByCoreFirst=function sortByCoreFirst(coreId){return function(_ref7,_ref8){var _ref9=_slicedToArray(_ref7,2),leftName=_ref9[0],leftProvider=_ref9[1];var _ref10=_slicedToArray(_ref8,2),rightName=_ref10[0],rightProvider=_ref10[1];if(leftProvider.source===coreId){return rightProvider.source===coreId?0:-1}else{return rightProvider.source===coreId?1:0}}}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.deepFreeze=deepFreeze;function deepFreeze(object){for(var _i=0,_Object$values=Object.values(object);_i<_Object$values.length;_i++){var value=_Object$values[_i];if(value!==null&&_typeof(value)==="object"){deepFreeze(value)}}return Object.freeze(object)}},function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});exports.mapToObject=mapToObject;function mapToObject(map){var result=Object.create(null);var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=map[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step$value=_slicedToArray(_step.value,2),key=_step$value[0],value=_step$value[1];result[key]=value}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return result}},function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}Object.defineProperty(exports,"__esModule",{value:true});exports.merge=merge;var _lodash=__webpack_require__(41);function merge(baseObj){for(var _len=arguments.length,sources=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){sources[_key-1]=arguments[_key]}var firstSource=sources[0];if(firstSource===undefined){return baseObj}return sources.slice(1).reduce((function(merged,nextSource){return mergeObjects(merged,nextSource)}),mergeObjects(baseObj,firstSource))}var isMergable=function isMergable(obj){return(0,_lodash.isPlainObject)(obj)};var mergeObjects=function mergeObjects(baseObj,overrideObj){return _toConsumableArray(new Set([].concat(_toConsumableArray(Object.keys(baseObj)),_toConsumableArray(Object.keys(overrideObj))))).reduce((function(merged,key){var baseVal=baseObj[key];var overrideVal=overrideObj[key];if(isMergable(baseVal)&&isMergable(overrideVal)){merged[key]=mergeObjects(baseVal,overrideVal)}else if(overrideVal!==undefined){merged[key]=overrideVal}else if(baseVal!==undefined){merged[key]=baseVal}return merged}),{})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.pick=pick;function pick(obj,keys){return keys.reduce((function(acc,key){if(obj.hasOwnProperty(key)){acc[key]=obj[key]}return acc}),{})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.withTimeout=withTimeout;function withTimeout(_ref){var promise=_ref.promise,timeout=_ref.timeout,errorMessage=_ref.errorMessage;return Promise.race([promise,new Promise((function(resolve,reject){return setTimeout((function(){return reject(new Error(errorMessage))}),timeout)}))])}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.modifyUrl=modifyUrl;exports.isRelativeUrl=isRelativeUrl;var _url=__webpack_require__(398);function modifyUrl(url,urlModifier){var parsed=(0,_url.parse)(url,true);var meaningfulParts={auth:parsed.auth,hash:parsed.hash,hostname:parsed.hostname,pathname:parsed.pathname,port:parsed.port,protocol:parsed.protocol,query:parsed.query||{},slashes:parsed.slashes};var modifiedParts=urlModifier(meaningfulParts)||meaningfulParts;return(0,_url.format)({auth:modifiedParts.auth,hash:modifiedParts.hash,hostname:modifiedParts.hostname,pathname:modifiedParts.pathname,port:modifiedParts.port,protocol:modifiedParts.protocol,query:modifiedParts.query,slashes:modifiedParts.slashes})}function isRelativeUrl(candidatePath){var all=(0,_url.parse)(candidatePath,false,true);var protocol=all.protocol,hostname=all.hostname,port=all.port;if(protocol!==null||hostname!==null||port!==null){return false}return true}},,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.unset=unset;var _get=__webpack_require__(162);function unset(obj,atPath){var paths=atPath.split(".").map((function(s){return s.trim()})).filter((function(v){return v!==""}));if(paths.length===0){return}if(paths.length===1){delete obj[paths[0]];return}var property=paths.pop();var parent=(0,_get.get)(obj,paths);if(parent!==undefined){delete parent[property]}}},function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getFlattenedObject=getFlattenedObject;function shouldReadKeys(value){return _typeof(value)==="object"&&value!==null&&!Array.isArray(value)}function getFlattenedObject(rootValue){if(!shouldReadKeys(rootValue)){throw new TypeError("Root value is not flatten-able, received ".concat(rootValue))}var result={};(function flatten(prefix,object){for(var _i=0,_Object$entries=Object.entries(object);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];var path=prefix?"".concat(prefix,".").concat(key):key;if(shouldReadKeys(value)){flatten(path,value)}else{result[path]=value}}})("",rootValue);return result}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_APP_CATEGORIES=void 0;var _i18n=__webpack_require__(0);var DEFAULT_APP_CATEGORIES=Object.freeze({analyze:{label:_i18n.i18n.translate("core.ui.analyzeNavList.label",{defaultMessage:"Analyze"}),order:1e3},observability:{label:_i18n.i18n.translate("core.ui.observabilityNavList.label",{defaultMessage:"Observability"}),euiIconType:"logoObservability",order:2e3},security:{label:_i18n.i18n.translate("core.ui.securityNavList.label",{defaultMessage:"Security"}),order:3e3,euiIconType:"logoSecurity"},management:{label:_i18n.i18n.translate("core.ui.managementNavList.label",{defaultMessage:"Management"}),euiIconType:"managementApp"}});exports.DEFAULT_APP_CATEGORIES=DEFAULT_APP_CATEGORIES},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.migrateLegacyQuery=migrateLegacyQuery;var _lodash=__webpack_require__(41);function migrateLegacyQuery(query){if(!(0,_lodash.has)(query,"language")){return{query:query,language:"lucene"}}return query}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addSystemApiHeader=addSystemApiHeader;exports.isSystemApiRequest=isSystemApiRequest;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SYSTEM_REQUEST_HEADER_NAME="kbn-system-request";var LEGACY_SYSTEM_API_HEADER_NAME="kbn-system-api";function addSystemApiHeader(originalHeaders){var systemApiHeaders=_defineProperty({},SYSTEM_REQUEST_HEADER_NAME,true);return _objectSpread({},originalHeaders,{},systemApiHeaders)}function isSystemApiRequest(request){var headers=request.headers;return headers&&(!!headers[SYSTEM_REQUEST_HEADER_NAME]||!!headers[LEGACY_SYSTEM_API_HEADER_NAME])}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlOverflowService=exports.IE_REGEX=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var URL_MAX_IE=2e3;var URL_MAX_OTHERS=25e3;var IE_REGEX=/(; ?MSIE |Edge\/\d|Trident\/[\d+\.]+;.*rv:*11\.\d+)/;exports.IE_REGEX=IE_REGEX;var UrlOverflowService=function(){function UrlOverflowService(){var _this=this;_classCallCheck(this,UrlOverflowService);_defineProperty(this,"_ieLike",void 0);_defineProperty(this,"_val",void 0);_defineProperty(this,"_sync",void 0);var key="error/url-overflow/url";var store=window.sessionStorage||{getItem:function getItem(){},setItem:function setItem(){},removeItem:function removeItem(){}};this._ieLike=IE_REGEX.test(window.navigator.userAgent);this._val=store.getItem(key);this._sync=function(){if(typeof _this._val==="string"){store.setItem(key,_this._val)}else{store.removeItem(key)}}}_createClass(UrlOverflowService,[{key:"failLength",value:function failLength(){return this._ieLike?URL_MAX_IE:URL_MAX_OTHERS}},{key:"set",value:function set(v){this._val=v;this._sync()}},{key:"get",value:function get(){return this._val}},{key:"check",value:function check(absUrl){if(!this.get()){var urlLength=absUrl.length;var remaining=this.failLength()-urlLength;if(remaining>0){return remaining}this.set(absUrl)}throw new Error("\n      The URL has gotten too big and kibana can no longer\n      continue. Please refresh to return to your previous state.\n    ")}},{key:"clear",value:function clear(){this._val=undefined;this._sync()}}]);return UrlOverflowService}();exports.UrlOverflowService=UrlOverflowService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KbnAccessibleClickProvider=KbnAccessibleClickProvider;var _eui=__webpack_require__(23);function KbnAccessibleClickProvider(){return{restrict:"A",controller:function controller($element){$element.on("keydown",(function(e){if(e.keyCode===_eui.keyCodes.SPACE){e.preventDefault()}}))},link:function link(scope,element,attrs){var elementType=element.prop("tagName");if(elementType==="BUTTON"){throw new Error("kbnAccessibleClick doesn't need to be used on a button.")}if(elementType==="A"&&attrs.href!==undefined){throw new Error("kbnAccessibleClick doesn't need to be used on a link if it has a href attribute.")}if(!attrs.ngClick){throw new Error("kbnAccessibleClick requires ng-click to be defined on its element.")}if(attrs.tabindex===undefined){element.attr("tabindex","0")}if(attrs.role===undefined){element.attr("role","button")}element.on("keyup",(function(e){if(_eui.accessibleClickKeys[e.keyCode]){element.click()}}))}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PrivateProvider=PrivateProvider;var _lodash=_interopRequireDefault(__webpack_require__(41));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var nextId=_lodash.default.partial(_lodash.default.uniqueId,"privateProvider#");function name(fn){return fn.name||fn.toString().split("\n").shift()}function PrivateProvider(){var provider=this;var cache={};var swaps={};function identify(fn){if(typeof fn!=="function"){throw new TypeError('Expected private module "'+fn+'" to be a function')}if(fn.$$id)return fn.$$id;else return fn.$$id=nextId()}provider.stub=function(fn,instance){cache[identify(fn)]=instance;return instance};provider.swap=function(fn,prov){var id=identify(fn);swaps[id]=prov};provider.$get=["$injector",function PrivateFactory($injector){var privPath=[];var pathToString=function pathToString(){return privPath.map(name).join(" -> ")};function instantiate(prov,locals){if(~privPath.indexOf(prov)){throw new Error('Circular reference to "'+name(prov)+'"'+" found while resolving private deps: "+pathToString())}privPath.push(prov);var context={};var instance=$injector.invoke(prov,context,locals);if(!_lodash.default.isObject(instance))instance=context;privPath.pop();return instance}function get(id,prov,$delegateId,$delegateProv){if(cache[id])return cache[id];var instance;if($delegateId!=null&&$delegateProv!=null){instance=instantiate(prov,{$decorate:_lodash.default.partial(get,$delegateId,$delegateProv)})}else{instance=instantiate(prov)}return cache[id]=instance}function Private(prov){var id=identify(prov);var $delegateId;var $delegateProv;if(swaps[id]){$delegateId=id;$delegateProv=prov;prov=swaps[$delegateId];id=identify(prov)}return get(id,prov,$delegateId,$delegateProv)}Private.stub=provider.stub;Private.swap=provider.swap;return Private}]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.registerListenEventListener=registerListenEventListener;function registerListenEventListener($rootScope){$rootScope.constructor.prototype.$listen=function(emitter,eventName,handler){emitter.on(eventName,handler);this.$on("$destroy",(function(){emitter.off(eventName,handler)}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatMsg=formatMsg;var _lodash=_interopRequireDefault(__webpack_require__(41));var _i18n=__webpack_require__(0);var _format_es_msg=__webpack_require__(165);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var has=_lodash.default.has;function formatMsg(err){var source=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var message="";if(source){message+=source+": "}var esMsg=(0,_format_es_msg.formatESMsg)(err);if(typeof err==="string"){message+=err}else if(esMsg){message+=esMsg}else if(err instanceof Error){message+=formatMsg.describeError(err)}else if(has(err,"status")&&has(err,"data")){if(err.status===-1){message+=_i18n.i18n.translate("kibana_legacy.notify.toaster.unavailableServerErrorMessage",{defaultMessage:"An HTTP request has failed to connect. "+"Please check if the Kibana server is running and that your browser has a working connection, "+"or contact your system administrator."})}else{message+=_i18n.i18n.translate("kibana_legacy.notify.toaster.errorStatusMessage",{defaultMessage:"Error {errStatus} {errStatusText}: {errMessage}",values:{errStatus:err.status,errStatusText:err.statusText,errMessage:err.data.message}})}}return message}formatMsg.describeError=function(err){if(!err)return undefined;if(err.shortMessage)return err.shortMessage;if(err.body&&err.body.message)return err.body.message;if(err.message)return err.message;return""+err}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatStack=formatStack;var _i18n=__webpack_require__(0);function formatStack(err){if(err.stack&&err.stack.indexOf(err.message)===-1){return _i18n.i18n.translate("kibana_legacy.notify.toaster.errorMessage",{defaultMessage:"Error: {errorMessage}\n      {errorStack}",values:{errorMessage:err.message,errorStack:err.stack}})}return err.stack}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addFatalError=addFatalError;var _format_angular_http_error=__webpack_require__(166);function addFatalError(fatalErrors,error,location){if((0,_format_angular_http_error.isAngularHttpError)(error)){error=(0,_format_angular_http_error.formatAngularHttpError)(error)}fatalErrors.add(error,location)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createTopNavDirective=createTopNavDirective;exports.loadKbnTopNavDirectives=loadKbnTopNavDirectives;exports.createTopNavHelper=void 0;var _angular=_interopRequireDefault(__webpack_require__(29));__webpack_require__(418);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createTopNavDirective(){return{restrict:"E",template:"",compile:function compile(elem){var child=document.createElement("kbn-top-nav-helper");var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=elem[0].attributes[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var attr=_step.value;child.setAttribute(attr.name,attr.value)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}child.setAttribute("disabled-buttons","disabledButtons");elem.append(child);var linkFn=function linkFn($scope,_,$attr){$scope.$watch((function(){var config=$scope.$eval($attr.config)||[];return config.map((function(item){if(item.key&&!item.id){item.id=item.key}if(typeof item.disableButton==="function"){return item.disableButton()}return item.disableButton}))}),(function(newVal){$scope.disabledButtons=newVal}),true)};return linkFn}}}var createTopNavHelper=function createTopNavHelper(_ref){var TopNavMenu=_ref.TopNavMenu;return function(reactDirective){return reactDirective(TopNavMenu,[["config",{watchDepth:"value"}],["disabledButtons",{watchDepth:"reference"}],["query",{watchDepth:"reference"}],["savedQuery",{watchDepth:"reference"}],["intl",{watchDepth:"reference"}],["onQuerySubmit",{watchDepth:"reference"}],["onFiltersUpdated",{watchDepth:"reference"}],["onRefreshChange",{watchDepth:"reference"}],["onClearSavedQuery",{watchDepth:"reference"}],["onSaved",{watchDepth:"reference"}],["onSavedQueryUpdated",{watchDepth:"reference"}],["onSavedQueryIdChange",{watchDepth:"reference"}],["indexPatterns",{watchDepth:"collection"}],["filters",{watchDepth:"collection"}],"showSearchBar","showFilterBar","showQueryBar","showQueryInput","showDatePicker","showSaveQuery","appName","screenTitle","dateRangeFrom","dateRangeTo","savedQueryId","isRefreshPaused","refreshInterval","disableAutoFocus","showAutoRefreshOnly","useDefaultBehaviors"])}};exports.createTopNavHelper=createTopNavHelper;var isLoaded=false;function loadKbnTopNavDirectives(navUi){if(!isLoaded){isLoaded=true;_angular.default.module("kibana").directive("kbnTopNav",createTopNavDirective).directive("kbnTopNavHelper",createTopNavHelper(navUi))}}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.subscribeWithScope=subscribeWithScope;function callInDigest($scope,fn,fatalError){try{if($scope.$root.$$phase){fn()}else{$scope.$apply((function(){return fn()}))}}catch(error){if(fatalError){fatalError(error)}}}function subscribeWithScope($scope,observable,observer,fatalError){return observable.subscribe({next:function next(value){if(observer&&observer.next){callInDigest($scope,(function(){return observer.next(value)}),fatalError)}},error:function(_error){function error(_x){return _error.apply(this,arguments)}error.toString=function(){return _error.toString()};return error}((function(error){callInDigest($scope,(function(){if(observer&&observer.error){observer.error(error)}else{throw new Error("Uncaught error in subscribeWithScope(): ".concat(error?error.stack||error.message:error))}}),fatalError)})),complete:function complete(){if(observer&&observer.complete){callInDigest($scope,(function(){return observer.complete()}),fatalError)}}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={addAppRedirectMessageToUrl:true,showAppRedirectNotification:true};Object.defineProperty(exports,"addAppRedirectMessageToUrl",{enumerable:true,get:function get(){return _app_redirect.addAppRedirectMessageToUrl}});Object.defineProperty(exports,"showAppRedirectNotification",{enumerable:true,get:function get(){return _app_redirect.showAppRedirectNotification}});var _toasts=__webpack_require__(421);Object.keys(_toasts).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _toasts[key]}})}));var _lib=__webpack_require__(164);Object.keys(_lib).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _lib[key]}})}));var _app_redirect=__webpack_require__(423)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ToastNotifications",{enumerable:true,get:function get(){return _toast_notifications.ToastNotifications}});var _toast_notifications=__webpack_require__(422)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ToastNotifications=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ToastNotifications=function ToastNotifications(toasts){var _this=this;_classCallCheck(this,ToastNotifications);this.toasts=toasts;_defineProperty(this,"list",[]);_defineProperty(this,"onChangeCallback",void 0);_defineProperty(this,"onChange",(function(callback){_this.onChangeCallback=callback}));_defineProperty(this,"add",(function(toastOrTitle){return _this.toasts.add(toastOrTitle)}));_defineProperty(this,"remove",(function(toast){return _this.toasts.remove(toast)}));_defineProperty(this,"addSuccess",(function(toastOrTitle){return _this.toasts.addSuccess(toastOrTitle)}));_defineProperty(this,"addWarning",(function(toastOrTitle){return _this.toasts.addWarning(toastOrTitle)}));_defineProperty(this,"addDanger",(function(toastOrTitle){return _this.toasts.addDanger(toastOrTitle)}));_defineProperty(this,"addError",(function(error,options){return _this.toasts.addError(error,options)}));toasts.get$().subscribe((function(list){_this.list=list;if(_this.onChangeCallback){_this.onChangeCallback()}}))};exports.ToastNotifications=ToastNotifications},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"addAppRedirectMessageToUrl",{enumerable:true,get:function get(){return _app_redirect.addAppRedirectMessageToUrl}});Object.defineProperty(exports,"showAppRedirectNotification",{enumerable:true,get:function get(){return _app_redirect.showAppRedirectNotification}});var _app_redirect=__webpack_require__(424)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addAppRedirectMessageToUrl=addAppRedirectMessageToUrl;exports.showAppRedirectNotification=showAppRedirectNotification;var _utils=__webpack_require__(84);var APP_REDIRECT_MESSAGE_PARAM="app_redirect_message";function addAppRedirectMessageToUrl(url,message){return(0,_utils.modifyUrl)(url,(function(urlParts){urlParts.hash=(0,_utils.modifyUrl)(urlParts.hash||"",(function(hashParts){hashParts.query[APP_REDIRECT_MESSAGE_PARAM]=message}))}))}function showAppRedirectNotification($location,toasts){var queryString=$location.search();if(!queryString[APP_REDIRECT_MESSAGE_PARAM]){return}var message=queryString[APP_REDIRECT_MESSAGE_PARAM];$location.search(APP_REDIRECT_MESSAGE_PARAM,null);toasts.addDanger(message)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocViewTableRow=DocViewTableRow;var _classnames=_interopRequireDefault(__webpack_require__(58));var _react=_interopRequireDefault(__webpack_require__(22));var _table_row_btn_filter_add=__webpack_require__(426);var _table_row_btn_filter_remove=__webpack_require__(427);var _table_row_btn_toggle_column=__webpack_require__(428);var _table_row_btn_collapse=__webpack_require__(429);var _table_row_btn_filter_exists=__webpack_require__(430);var _table_row_icon_no_mapping=__webpack_require__(431);var _table_row_icon_underscore=__webpack_require__(432);var _field_name=__webpack_require__(168);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DocViewTableRow(_ref){var field=_ref.field,fieldMapping=_ref.fieldMapping,fieldType=_ref.fieldType,displayNoMappingWarning=_ref.displayNoMappingWarning,displayUnderscoreWarning=_ref.displayUnderscoreWarning,isCollapsible=_ref.isCollapsible,isCollapsed=_ref.isCollapsed,isColumnActive=_ref.isColumnActive,onFilter=_ref.onFilter,onToggleCollapse=_ref.onToggleCollapse,onToggleColumn=_ref.onToggleColumn,value=_ref.value,valueRaw=_ref.valueRaw;var valueClassName=(0,_classnames.default)({kbnDocViewer__value:true,"truncate-by-height":isCollapsible&&isCollapsed});return _react.default.createElement("tr",{key:field,"data-test-subj":"tableDocViewRow-".concat(field)},typeof onFilter==="function"&&_react.default.createElement("td",{className:"kbnDocViewer__buttons"},_react.default.createElement(_table_row_btn_filter_add.DocViewTableRowBtnFilterAdd,{disabled:!fieldMapping||!fieldMapping.filterable,onClick:function onClick(){return onFilter(fieldMapping,valueRaw,"+")}}),_react.default.createElement(_table_row_btn_filter_remove.DocViewTableRowBtnFilterRemove,{disabled:!fieldMapping||!fieldMapping.filterable,onClick:function onClick(){return onFilter(fieldMapping,valueRaw,"-")}}),typeof onToggleColumn==="function"&&_react.default.createElement(_table_row_btn_toggle_column.DocViewTableRowBtnToggleColumn,{active:isColumnActive,onClick:onToggleColumn}),_react.default.createElement(_table_row_btn_filter_exists.DocViewTableRowBtnFilterExists,{disabled:!fieldMapping||!fieldMapping.filterable,onClick:function onClick(){return onFilter("_exists_",field,"+")},scripted:fieldMapping&&fieldMapping.scripted})),_react.default.createElement("td",{className:"kbnDocViewer__field"},_react.default.createElement(_field_name.FieldName,{field:fieldMapping,fieldName:field,fieldType:fieldType,fieldIconProps:{fill:"none",color:"gray"}})),_react.default.createElement("td",null,isCollapsible&&_react.default.createElement(_table_row_btn_collapse.DocViewTableRowBtnCollapse,{onClick:onToggleCollapse,isCollapsed:isCollapsed}),displayUnderscoreWarning&&_react.default.createElement(_table_row_icon_underscore.DocViewTableRowIconUnderscore,null),displayNoMappingWarning&&_react.default.createElement(_table_row_icon_no_mapping.DocViewTableRowIconNoMapping,null),_react.default.createElement("div",{className:valueClassName,"data-test-subj":"tableDocViewRow-".concat(field,"-value"),dangerouslySetInnerHTML:{__html:value}})))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocViewTableRowBtnFilterAdd=DocViewTableRowBtnFilterAdd;var _react=_interopRequireDefault(__webpack_require__(22));var _react2=__webpack_require__(24);var _eui=__webpack_require__(23);var _i18n=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DocViewTableRowBtnFilterAdd(_ref){var onClick=_ref.onClick,_ref$disabled=_ref.disabled,disabled=_ref$disabled===void 0?false:_ref$disabled;var tooltipContent=disabled?_react.default.createElement(_react2.FormattedMessage,{id:"discover.docViews.table.unindexedFieldsCanNotBeSearchedTooltip",defaultMessage:"Unindexed fields can not be searched"}):_react.default.createElement(_react2.FormattedMessage,{id:"discover.docViews.table.filterForValueButtonTooltip",defaultMessage:"Filter for value"});return _react.default.createElement(_eui.EuiToolTip,{content:tooltipContent},_react.default.createElement(_eui.EuiButtonIcon,{"aria-label":_i18n.i18n.translate("discover.docViews.table.filterForValueButtonAriaLabel",{defaultMessage:"Filter for value"}),className:"kbnDocViewer__actionButton","data-test-subj":"addInclusiveFilterButton",disabled:disabled,onClick:onClick,iconType:"magnifyWithPlus",iconSize:"s"}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocViewTableRowBtnFilterRemove=DocViewTableRowBtnFilterRemove;var _react=_interopRequireDefault(__webpack_require__(22));var _react2=__webpack_require__(24);var _eui=__webpack_require__(23);var _i18n=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DocViewTableRowBtnFilterRemove(_ref){var onClick=_ref.onClick,_ref$disabled=_ref.disabled,disabled=_ref$disabled===void 0?false:_ref$disabled;var tooltipContent=disabled?_react.default.createElement(_react2.FormattedMessage,{id:"discover.docViews.table.unindexedFieldsCanNotBeSearchedTooltip",defaultMessage:"Unindexed fields can not be searched"}):_react.default.createElement(_react2.FormattedMessage,{id:"discover.docViews.table.filterOutValueButtonTooltip",defaultMessage:"Filter out value"});return _react.default.createElement(_eui.EuiToolTip,{content:tooltipContent},_react.default.createElement(_eui.EuiButtonIcon,{"aria-label":_i18n.i18n.translate("discover.docViews.table.filterOutValueButtonAriaLabel",{defaultMessage:"Filter out value"}),className:"kbnDocViewer__actionButton","data-test-subj":"removeInclusiveFilterButton",disabled:disabled,onClick:onClick,iconType:"magnifyWithMinus",iconSize:"s"}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocViewTableRowBtnToggleColumn=DocViewTableRowBtnToggleColumn;var _react=_interopRequireDefault(__webpack_require__(22));var _react2=__webpack_require__(24);var _eui=__webpack_require__(23);var _i18n=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DocViewTableRowBtnToggleColumn(_ref){var onClick=_ref.onClick,active=_ref.active,_ref$disabled=_ref.disabled,disabled=_ref$disabled===void 0?false:_ref$disabled;if(disabled){return _react.default.createElement(_eui.EuiButtonIcon,{"aria-label":_i18n.i18n.translate("discover.docViews.table.toggleColumnInTableButtonAriaLabel",{defaultMessage:"Toggle column in table"}),className:"kbnDocViewer__actionButton","data-test-subj":"toggleColumnButton",disabled:true,iconType:"tableOfContents",iconSize:"s"})}return _react.default.createElement(_eui.EuiToolTip,{content:_react.default.createElement(_react2.FormattedMessage,{id:"discover.docViews.table.toggleColumnInTableButtonTooltip",defaultMessage:"Toggle column in table"})},_react.default.createElement(_eui.EuiButtonIcon,{"aria-label":_i18n.i18n.translate("discover.docViews.table.toggleColumnInTableButtonAriaLabel",{defaultMessage:"Toggle column in table"}),"aria-pressed":active,onClick:onClick,className:"kbnDocViewer__actionButton","data-test-subj":"toggleColumnButton",iconType:"tableOfContents",iconSize:"s"}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocViewTableRowBtnCollapse=DocViewTableRowBtnCollapse;var _react=_interopRequireDefault(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DocViewTableRowBtnCollapse(_ref){var _onClick=_ref.onClick,isCollapsed=_ref.isCollapsed;var label=_i18n.i18n.translate("discover.docViews.table.toggleFieldDetails",{defaultMessage:"Toggle field details"});return _react.default.createElement(_eui.EuiToolTip,{content:label},_react.default.createElement(_eui.EuiButtonIcon,{"aria-expanded":!isCollapsed,"aria-label":label,"data-test-subj":"collapseBtn",onClick:function onClick(){return _onClick()},iconType:isCollapsed?"arrowRight":"arrowDown",iconSize:"s"}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocViewTableRowBtnFilterExists=DocViewTableRowBtnFilterExists;var _react=_interopRequireDefault(__webpack_require__(22));var _react2=__webpack_require__(24);var _eui=__webpack_require__(23);var _i18n=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DocViewTableRowBtnFilterExists(_ref){var onClick=_ref.onClick,_ref$disabled=_ref.disabled,disabled=_ref$disabled===void 0?false:_ref$disabled,_ref$scripted=_ref.scripted,scripted=_ref$scripted===void 0?false:_ref$scripted;var tooltipContent=disabled?scripted?_react.default.createElement(_react2.FormattedMessage,{id:"discover.docViews.table.unableToFilterForPresenceOfScriptedFieldsTooltip",defaultMessage:"Unable to filter for presence of scripted fields"}):_react.default.createElement(_react2.FormattedMessage,{id:"discover.docViews.table.unableToFilterForPresenceOfMetaFieldsTooltip",defaultMessage:"Unable to filter for presence of meta fields"}):_react.default.createElement(_react2.FormattedMessage,{id:"discover.docViews.table.filterForFieldPresentButtonTooltip",defaultMessage:"Filter for field present"});return _react.default.createElement(_eui.EuiToolTip,{content:tooltipContent},_react.default.createElement(_eui.EuiButtonIcon,{"aria-label":_i18n.i18n.translate("discover.docViews.table.filterForFieldPresentButtonAriaLabel",{defaultMessage:"Filter for field present"}),onClick:onClick,className:"kbnDocViewer__actionButton","data-test-subj":"addExistsFilterButton",disabled:disabled,iconType:"indexOpen",iconSize:"s"}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocViewTableRowIconNoMapping=DocViewTableRowIconNoMapping;var _react=_interopRequireDefault(__webpack_require__(22));var _eui=__webpack_require__(23);var _i18n=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DocViewTableRowIconNoMapping(){var ariaLabel=_i18n.i18n.translate("discover.docViews.table.noCachedMappingForThisFieldAriaLabel",{defaultMessage:"Warning"});var tooltipContent=_i18n.i18n.translate("discover.docViews.table.noCachedMappingForThisFieldTooltip",{defaultMessage:"No cached mapping for this field. Refresh field list from the Management > Index Patterns page"});return _react.default.createElement(_eui.EuiIconTip,{"aria-label":ariaLabel,color:"warning",content:tooltipContent,iconProps:{className:"kbnDocViewer__warning","data-test-subj":"noMappingWarning"},size:"s",type:"alert"})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocViewTableRowIconUnderscore=DocViewTableRowIconUnderscore;var _react=_interopRequireDefault(__webpack_require__(22));var _eui=__webpack_require__(23);var _i18n=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DocViewTableRowIconUnderscore(){var ariaLabel=_i18n.i18n.translate("discover.docViews.table.fieldNamesBeginningWithUnderscoreUnsupportedAriaLabel",{defaultMessage:"Warning"});var tooltipContent=_i18n.i18n.translate("discover.docViews.table.fieldNamesBeginningWithUnderscoreUnsupportedTooltip",{defaultMessage:"Field names beginning with {underscoreSign} are not supported",values:{underscoreSign:"_"}});return _react.default.createElement(_eui.EuiIconTip,{"aria-label":ariaLabel,content:tooltipContent,color:"warning",iconProps:{className:"kbnDocViewer__warning","data-test-subj":"underscoreWarning"},size:"s",type:"alert"})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"shortenDottedString",{enumerable:true,get:function get(){return _shorten_dotted_string.shortenDottedString}});var _shorten_dotted_string=__webpack_require__(434)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.shortenDottedString=void 0;var DOT_PREFIX_RE=/(.).+?\./g;var shortenDottedString=function shortenDottedString(input){return input.replace(DOT_PREFIX_RE,"$1.")};exports.shortenDottedString=shortenDottedString},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFieldTypeName=getFieldTypeName;var _i18n=__webpack_require__(0);function getFieldTypeName(type){switch(type){case"boolean":return _i18n.i18n.translate("discover.fieldNameIcons.booleanAriaLabel",{defaultMessage:"Boolean field"});case"conflict":return _i18n.i18n.translate("discover.fieldNameIcons.conflictFieldAriaLabel",{defaultMessage:"Conflicting field"});case"date":return _i18n.i18n.translate("discover.fieldNameIcons.dateFieldAriaLabel",{defaultMessage:"Date field"});case"geo_point":return _i18n.i18n.translate("discover.fieldNameIcons.geoPointFieldAriaLabel",{defaultMessage:"Geo point field"});case"geo_shape":return _i18n.i18n.translate("discover.fieldNameIcons.geoShapeFieldAriaLabel",{defaultMessage:"Geo shape field"});case"ip":return _i18n.i18n.translate("discover.fieldNameIcons.ipAddressFieldAriaLabel",{defaultMessage:"IP address field"});case"murmur3":return _i18n.i18n.translate("discover.fieldNameIcons.murmur3FieldAriaLabel",{defaultMessage:"Murmur3 field"});case"number":return _i18n.i18n.translate("discover.fieldNameIcons.numberFieldAriaLabel",{defaultMessage:"Number field"});case"source":return _i18n.i18n.translate("discover.fieldNameIcons.sourceFieldAriaLabel",{defaultMessage:"Source field"});case"string":return _i18n.i18n.translate("discover.fieldNameIcons.stringFieldAriaLabel",{defaultMessage:"String field"});case"nested":return _i18n.i18n.translate("discover.fieldNameIcons.nestedFieldAriaLabel",{defaultMessage:"Nested field"});default:return _i18n.i18n.translate("discover.fieldNameIcons.unknownFieldAriaLabel",{defaultMessage:"Unknown field"})}}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.arrayContainsObjects=arrayContainsObjects;exports.trimAngularSpan=trimAngularSpan;function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function arrayContainsObjects(value){return Array.isArray(value)&&value.some((function(v){return _typeof(v)==="object"&&v!==null}))}function trimAngularSpan(text){return text.replace(/^<span ng-non-bindable>/,"").replace(/<\/span>$/,"")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocViewer=DocViewer;var _react=_interopRequireDefault(__webpack_require__(22));var _eui=__webpack_require__(23);var _services=__webpack_require__(170);var _doc_viewer_tab=__webpack_require__(438);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function DocViewer(renderProps){var docViewsRegistry=(0,_services.getDocViewsRegistry)();var tabs=docViewsRegistry.getDocViewsSorted(renderProps.hit).map((function(_ref,idx){var title=_ref.title,render=_ref.render,component=_ref.component;return{id:title,name:title,content:_react.default.createElement(_doc_viewer_tab.DocViewerTab,{id:idx,title:title,component:component,renderProps:renderProps,render:render})}}));if(!tabs.length){return null}return _react.default.createElement("div",{className:"kbnDocViewer"},_react.default.createElement(_eui.EuiTabbedContent,{tabs:tabs}))}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DocViewerTab=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _react2=__webpack_require__(24);var _doc_viewer_render_tab=__webpack_require__(439);var _doc_viewer_render_error=__webpack_require__(160);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DocViewerTab=function(_React$Component){_inherits(DocViewerTab,_React$Component);function DocViewerTab(){var _getPrototypeOf2;var _this;_classCallCheck(this,DocViewerTab);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DocViewerTab)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{hasError:false,error:""});return _this}_createClass(DocViewerTab,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps,nextState){return nextProps.renderProps.hit._id!==this.props.renderProps.hit._id||nextProps.id!==this.props.id||nextState.hasError}},{key:"render",value:function render(){var _this$props=this.props,component=_this$props.component,render=_this$props.render,renderProps=_this$props.renderProps,title=_this$props.title;var _this$state=this.state,hasError=_this$state.hasError,error=_this$state.error;if(hasError&&error){return _react.default.createElement(_doc_viewer_render_error.DocViewerError,{error:error})}else if(!render&&!component){return _react.default.createElement(_doc_viewer_render_error.DocViewerError,{error:"Invalid plugin ".concat(title,", there is neither a (react) component nor a render function provided")})}if(render){return _react.default.createElement(_doc_viewer_render_tab.DocViewRenderTab,{render:render,renderProps:renderProps})}var Component=component;return _react.default.createElement(_react2.I18nProvider,null,_react.default.createElement(Component,renderProps))}}],[{key:"getDerivedStateFromError",value:function getDerivedStateFromError(error){return{hasError:true,error:error}}}]);return DocViewerTab}(_react.default.Component);exports.DocViewerTab=DocViewerTab},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DocViewRenderTab=DocViewRenderTab;var _react=_interopRequireWildcard(__webpack_require__(22));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function DocViewRenderTab(_ref){var render=_ref.render,renderProps=_ref.renderProps;var ref=(0,_react.useRef)(null);(0,_react.useEffect)((function(){if(ref&&ref.current){return render(ref.current,renderProps)}}),[render,renderProps]);return _react.default.createElement("div",{ref:ref})}},function(module,exports,__webpack_require__){if(window.__kbnDarkMode__){__webpack_require__(441)}else{__webpack_require__(443)}},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(442);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'.kbnDocViewerTable {\n  margin-top: 8px; }\n\n.kbnDocViewer pre,\n.kbnDocViewer .kbnDocViewer__value {\n  display: inline-block;\n  word-break: break-all;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  color: #FFF;\n  vertical-align: top;\n  padding-top: 2px; }\n\n.kbnDocViewer .kbnDocViewer__field {\n  padding-top: 8px; }\n\n.kbnDocViewer .dscFieldName {\n  color: #98A2B3; }\n\n.kbnDocViewer td,\n.kbnDocViewer pre {\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace; }\n\n.kbnDocViewer tr:first-child td {\n  border-top-color: transparent; }\n\n.kbnDocViewer tr:hover .kbnDocViewer__actionButton {\n  opacity: 1; }\n\n.kbnDocViewer__buttons,\n.kbnDocViewer__field {\n  white-space: nowrap; }\n\n.kbnDocViewer__buttons {\n  width: 60px; }\n\n.kbnDocViewer__field {\n  width: 160px; }\n\n.kbnDocViewer__actionButton {\n  opacity: 0; }\n\n.kbnDocViewer__warning {\n  margin-right: 8px; }\n',""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(444);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'.kbnDocViewerTable {\n  margin-top: 8px; }\n\n.kbnDocViewer pre,\n.kbnDocViewer .kbnDocViewer__value {\n  display: inline-block;\n  word-break: break-all;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  color: #000;\n  vertical-align: top;\n  padding-top: 2px; }\n\n.kbnDocViewer .kbnDocViewer__field {\n  padding-top: 8px; }\n\n.kbnDocViewer .dscFieldName {\n  color: #69707D; }\n\n.kbnDocViewer td,\n.kbnDocViewer pre {\n  font-family: "Roboto Mono", Consolas, Menlo, Courier, monospace; }\n\n.kbnDocViewer tr:first-child td {\n  border-top-color: transparent; }\n\n.kbnDocViewer tr:hover .kbnDocViewer__actionButton {\n  opacity: 1; }\n\n.kbnDocViewer__buttons,\n.kbnDocViewer__field {\n  white-space: nowrap; }\n\n.kbnDocViewer__buttons {\n  width: 60px; }\n\n.kbnDocViewer__field {\n  width: 160px; }\n\n.kbnDocViewer__actionButton {\n  opacity: 0; }\n\n.kbnDocViewer__warning {\n  margin-right: 8px; }\n',""]);module.exports=exports},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSavedSearchesLoader=createSavedSearchesLoader;var _public=__webpack_require__(107);var _saved_search=__webpack_require__(712);function createSavedSearchesLoader(services){var SavedSearchClass=(0,_saved_search.createSavedSearchClass)(services);var savedSearchLoader=new _public.SavedObjectLoader(SavedSearchClass,services.savedObjectsClient,services.chrome);savedSearchLoader.loaderProperties={name:"searches",noun:"Saved Search",nouns:"saved searches"};savedSearchLoader.urlFor=function(id){return"#/discover/".concat(encodeURIComponent(id))};return savedSearchLoader}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectsPublicPlugin=void 0;__webpack_require__(448);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var SavedObjectsPublicPlugin=function(){function SavedObjectsPublicPlugin(){_classCallCheck(this,SavedObjectsPublicPlugin)}_createClass(SavedObjectsPublicPlugin,[{key:"setup",value:function setup(){}},{key:"start",value:function start(){}}]);return SavedObjectsPublicPlugin}();exports.SavedObjectsPublicPlugin=SavedObjectsPublicPlugin},function(module,exports,__webpack_require__){if(window.__kbnDarkMode__){__webpack_require__(449)}else{__webpack_require__(451)}},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(450);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".kbnSavedObjectSaveModal {\n  width: 400px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(452);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".kbnSavedObjectSaveModal {\n  width: 400px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SavedObjectSaveModal",{enumerable:true,get:function get(){return _saved_object_save_modal.SavedObjectSaveModal}});Object.defineProperty(exports,"OnSaveProps",{enumerable:true,get:function get(){return _saved_object_save_modal.OnSaveProps}});Object.defineProperty(exports,"showSaveModal",{enumerable:true,get:function get(){return _show_saved_object_save_modal.showSaveModal}});Object.defineProperty(exports,"SaveResult",{enumerable:true,get:function get(){return _show_saved_object_save_modal.SaveResult}});var _saved_object_save_modal=__webpack_require__(454);var _show_saved_object_save_modal=__webpack_require__(455)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectSaveModal=void 0;var _eui=__webpack_require__(23);var _react=__webpack_require__(24);var _react2=_interopRequireDefault(__webpack_require__(22));var _i18n=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var generateId=(0,_eui.htmlIdGenerator)();var SavedObjectSaveModal=function(_React$Component){_inherits(SavedObjectSaveModal,_React$Component);function SavedObjectSaveModal(){var _getPrototypeOf2;var _this;_classCallCheck(this,SavedObjectSaveModal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SavedObjectSaveModal)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"warning",_react2.default.createRef());_defineProperty(_assertThisInitialized(_this),"state",{title:_this.props.title,copyOnSave:false,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false,isLoading:false,visualizationDescription:_this.props.description?_this.props.description:""});_defineProperty(_assertThisInitialized(_this),"renderViewDescription",(function(){if(!_this.props.showDescription){return}return _react2.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.descriptionLabel",defaultMessage:"Description"})},_react2.default.createElement(_eui.EuiTextArea,{"data-test-subj":"viewDescription",value:_this.state.visualizationDescription,onChange:_this.onDescriptionChange}))}));_defineProperty(_assertThisInitialized(_this),"onDescriptionChange",(function(event){_this.setState({visualizationDescription:event.target.value})}));_defineProperty(_assertThisInitialized(_this),"onTitleDuplicate",(function(){_this.setState({isLoading:false,isTitleDuplicateConfirmed:true,hasTitleDuplicate:true});if(_this.warning.current){_this.warning.current.focus()}}));_defineProperty(_assertThisInitialized(_this),"saveSavedObject",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!_this.state.isLoading){_context.next=2;break}return _context.abrupt("return");case 2:_this.setState({isLoading:true});_context.next=5;return _this.props.onSave({newTitle:_this.state.title,newCopyOnSave:_this.state.copyOnSave,isTitleDuplicateConfirmed:_this.state.isTitleDuplicateConfirmed,onTitleDuplicate:_this.onTitleDuplicate,newDescription:_this.state.visualizationDescription});case 5:case"end":return _context.stop()}}}),_callee)}))));_defineProperty(_assertThisInitialized(_this),"onTitleChange",(function(event){_this.setState({title:event.target.value,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false})}));_defineProperty(_assertThisInitialized(_this),"onCopyOnSaveChange",(function(event){_this.setState({copyOnSave:event.target.checked})}));_defineProperty(_assertThisInitialized(_this),"onFormSubmit",(function(event){event.preventDefault();_this.saveSavedObject()}));_defineProperty(_assertThisInitialized(_this),"renderConfirmButton",(function(){var _this$state=_this.state,isLoading=_this$state.isLoading,title=_this$state.title;var confirmLabel=_i18n.i18n.translate("savedObjects.saveModal.saveButtonLabel",{defaultMessage:"Save"});if(_this.props.confirmButtonLabel){confirmLabel=_this.props.confirmButtonLabel}return _react2.default.createElement(_eui.EuiButton,{fill:true,"data-test-subj":"confirmSaveSavedObjectButton",isLoading:isLoading,isDisabled:title.length===0,type:"submit"},confirmLabel)}));_defineProperty(_assertThisInitialized(_this),"renderDuplicateTitleCallout",(function(duplicateWarningId){if(!_this.state.hasTitleDuplicate){return}return _react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("div",{ref:_this.warning,tabIndex:-1},_react2.default.createElement(_eui.EuiCallOut,{title:_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.duplicateTitleLabel",defaultMessage:"A {objectType} with the title '{title}' already exists",values:{objectType:_this.props.objectType,title:_this.state.title}}),color:"warning","data-test-subj":"titleDupicateWarnMsg",id:duplicateWarningId},_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.duplicateTitleDescription",defaultMessage:"Clicking {confirmSaveLabel} will save the {objectType} with this duplicate title.",values:{objectType:_this.props.objectType,confirmSaveLabel:_react2.default.createElement("strong",null,_this.props.confirmButtonLabel?_this.props.confirmButtonLabel:_i18n.i18n.translate("savedObjects.saveModal.saveButtonLabel",{defaultMessage:"Save"}))}})))),_react2.default.createElement(_eui.EuiSpacer,null))}));_defineProperty(_assertThisInitialized(_this),"renderCopyOnSave",(function(){if(!_this.props.showCopyOnSave){return}return _react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement(_eui.EuiSwitch,{"data-test-subj":"saveAsNewCheckbox",checked:_this.state.copyOnSave,onChange:_this.onCopyOnSaveChange,label:_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.saveAsNewLabel",defaultMessage:"Save as new {objectType}",values:{objectType:_this.props.objectType}})}),_react2.default.createElement(_eui.EuiSpacer,null))}));return _this}_createClass(SavedObjectSaveModal,[{key:"render",value:function render(){var _this$state2=this.state,isTitleDuplicateConfirmed=_this$state2.isTitleDuplicateConfirmed,hasTitleDuplicate=_this$state2.hasTitleDuplicate,title=_this$state2.title;var duplicateWarningId=generateId();return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement("form",{onSubmit:this.onFormSubmit},_react2.default.createElement(_eui.EuiModal,{"data-test-subj":"savedObjectSaveModal",className:"kbnSavedObjectSaveModal",onClose:this.props.onClose},_react2.default.createElement(_eui.EuiModalHeader,null,_react2.default.createElement(_eui.EuiModalHeaderTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.saveTitle",defaultMessage:"Save {objectType}",values:{objectType:this.props.objectType}}))),_react2.default.createElement(_eui.EuiModalBody,null,this.renderDuplicateTitleCallout(duplicateWarningId),_react2.default.createElement(_eui.EuiForm,null,!this.props.showDescription&&this.props.description&&_react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_eui.EuiText,{color:"subdued"},this.props.description)),this.renderCopyOnSave(),_react2.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.titleLabel",defaultMessage:"Title"})},_react2.default.createElement(_eui.EuiFieldText,{fullWidth:true,autoFocus:true,"data-test-subj":"savedObjectTitle",value:title,onChange:this.onTitleChange,isInvalid:!isTitleDuplicateConfirmed&&hasTitleDuplicate||title.length===0,"aria-describedby":this.state.hasTitleDuplicate?duplicateWarningId:undefined})),this.renderViewDescription(),this.props.options)),_react2.default.createElement(_eui.EuiModalFooter,null,_react2.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"saveCancelButton",onClick:this.props.onClose},_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.cancelButtonLabel",defaultMessage:"Cancel"})),this.renderConfirmButton()))))}}]);return SavedObjectSaveModal}(_react2.default.Component);exports.SavedObjectSaveModal=SavedObjectSaveModal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showSaveModal=showSaveModal;var _react=_interopRequireDefault(__webpack_require__(22));var _reactDom=_interopRequireDefault(__webpack_require__(30));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function isSuccess(result){return"id"in result}function showSaveModal(saveModal,I18nContext){var container=document.createElement("div");var closeModal=function closeModal(){_reactDom.default.unmountComponentAtNode(container);document.body.removeChild(container)};var onSave=saveModal.props.onSave;var onSaveConfirmed=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var response,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return onSave.apply(void 0,_args);case 2:response=_context.sent;if(Boolean(isSuccess(response)?response.id:response.error)){closeModal()}return _context.abrupt("return",response);case 5:case"end":return _context.stop()}}}),_callee)})));return function onSaveConfirmed(){return _ref.apply(this,arguments)}}();document.body.appendChild(container);var element=_react.default.cloneElement(saveModal,{onSave:onSaveConfirmed,onClose:closeModal});_reactDom.default.render(_react.default.createElement(I18nContext,null,element),container)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SavedObjectMetaData",{enumerable:true,get:function get(){return _saved_object_finder.SavedObjectMetaData}});Object.defineProperty(exports,"SavedObjectFinderUi",{enumerable:true,get:function get(){return _saved_object_finder.SavedObjectFinderUi}});Object.defineProperty(exports,"getSavedObjectFinder",{enumerable:true,get:function get(){return _saved_object_finder.getSavedObjectFinder}});var _saved_object_finder=__webpack_require__(457)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectFinderUi=exports.getSavedObjectFinder=void 0;var _lodash=_interopRequireDefault(__webpack_require__(41));var _propTypes=_interopRequireDefault(__webpack_require__(43));var _react=_interopRequireDefault(__webpack_require__(22));var _eui=__webpack_require__(23);var _i18n=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SavedObjectFinderUi=function(_React$Component){_inherits(SavedObjectFinderUi,_React$Component);function SavedObjectFinderUi(props){var _this;_classCallCheck(this,SavedObjectFinderUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(SavedObjectFinderUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"isComponentMounted",false);_defineProperty(_assertThisInitialized(_this),"debouncedFetch",_lodash.default.debounce(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(query){var metaDataMap,fields,perPage,resp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:metaDataMap=_this.getSavedObjectMetaDataMap();fields=Object.values(metaDataMap).map((function(metaData){return metaData.includeFields||[]})).reduce((function(allFields,currentFields){return allFields.concat(currentFields)}),["title"]);perPage=_this.props.uiSettings.get("savedObjects:listingLimit");_context.next=5;return _this.props.savedObjects.client.find({type:Object.keys(metaDataMap),fields:_toConsumableArray(new Set(fields)),search:query?"".concat(query,"*"):undefined,page:1,perPage:perPage,searchFields:["title^3","description"],defaultSearchOperator:"AND"});case 5:resp=_context.sent;resp.savedObjects=resp.savedObjects.filter((function(savedObject){var metaData=metaDataMap[savedObject.type];if(metaData.showSavedObject){return metaData.showSavedObject(savedObject)}else{return true}}));if(_this.isComponentMounted){_context.next=9;break}return _context.abrupt("return");case 9:if(query===_this.state.query){_this.setState({isFetchingItems:false,page:0,items:resp.savedObjects.map((function(savedObject){var title=savedObject.attributes.title,id=savedObject.id,type=savedObject.type;return{title:typeof title==="string"?title:"",id:id,type:type,savedObject:savedObject}}))})}case 10:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}(),300));_defineProperty(_assertThisInitialized(_this),"getPageOfItems",(function(){var items=_this.state.items.slice();var sortDirection=_this.state.sortDirection;if(sortDirection||!_this.state.query){items.sort((function(_ref2,_ref3){var titleA=_ref2.title;var titleB=_ref3.title;var order=1;if(sortDirection==="desc"){order=-1}return order*(titleA||"").toLowerCase().localeCompare((titleB||"").toLowerCase())}))}var startIndex=_this.state.page*_this.state.perPage;var lastIndex=startIndex+_this.state.perPage;return items.filter((function(item){return _this.state.filteredTypes.length===0||_this.state.filteredTypes.includes(item.type)})).slice(startIndex,lastIndex)}));_defineProperty(_assertThisInitialized(_this),"fetchItems",(function(){_this.setState({isFetchingItems:true},_this.debouncedFetch.bind(null,_this.state.query))}));_this.state={items:[],isFetchingItems:false,page:0,perPage:props.initialPageSize||props.fixedPageSize||10,query:"",filterOpen:false,filteredTypes:[],sortOpen:false};return _this}_createClass(SavedObjectFinderUi,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.isComponentMounted=false;this.debouncedFetch.cancel()}},{key:"componentDidMount",value:function componentDidMount(){this.isComponentMounted=true;this.fetchItems()}},{key:"render",value:function render(){return _react.default.createElement(_react.default.Fragment,null,this.renderSearchBar(),this.renderListing())}},{key:"getSavedObjectMetaDataMap",value:function getSavedObjectMetaDataMap(){return this.props.savedObjectMetaData.reduce((function(map,metaData){return _objectSpread({},map,_defineProperty({},metaData.type,metaData))}),{})}},{key:"getPageCount",value:function getPageCount(){var _this2=this;return Math.ceil((this.state.filteredTypes.length===0?this.state.items.length:this.state.items.filter((function(item){return _this2.state.filteredTypes.length===0||_this2.state.filteredTypes.includes(item.type)})).length)/this.state.perPage)}},{key:"getAvailableSavedObjectMetaData",value:function getAvailableSavedObjectMetaData(){var typesInItems=new Set;this.state.items.forEach((function(item){typesInItems.add(item.type)}));return this.props.savedObjectMetaData.filter((function(metaData){return typesInItems.has(metaData.type)}))}},{key:"getSortOptions",value:function getSortOptions(){var _this3=this;var sortOptions=[_react.default.createElement(_eui.EuiContextMenuItem,{key:"asc",icon:this.state.sortDirection==="asc"||this.state.query===""&&this.state.sortDirection!=="desc"?"check":"empty",onClick:function onClick(){_this3.setState({sortDirection:"asc"})}},_i18n.i18n.translate("savedObjects.finder.sortAsc",{defaultMessage:"Ascending"})),_react.default.createElement(_eui.EuiContextMenuItem,{key:"desc",icon:this.state.sortDirection==="desc"?"check":"empty",onClick:function onClick(){_this3.setState({sortDirection:"desc"})}},_i18n.i18n.translate("savedObjects.finder.sortDesc",{defaultMessage:"Descending"}))];if(this.state.query){sortOptions.push(_react.default.createElement(_eui.EuiContextMenuItem,{key:"auto",icon:!this.state.sortDirection?"check":"empty",onClick:function onClick(){_this3.setState({sortDirection:undefined})}},_i18n.i18n.translate("savedObjects.finder.sortAuto",{defaultMessage:"Best match"})))}return sortOptions}},{key:"renderSearchBar",value:function renderSearchBar(){var _this4=this;var availableSavedObjectMetaData=this.getAvailableSavedObjectMetaData();return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"m"},_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_eui.EuiFieldSearch,{placeholder:_i18n.i18n.translate("savedObjects.finder.searchPlaceholder",{defaultMessage:"Search…"}),"aria-label":_i18n.i18n.translate("savedObjects.finder.searchPlaceholder",{defaultMessage:"Search…"}),fullWidth:true,value:this.state.query,onChange:function onChange(e){_this4.setState({query:e.target.value},_this4.fetchItems)},"data-test-subj":"savedObjectFinderSearchInput",isLoading:this.state.isFetchingItems})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFilterGroup,null,_react.default.createElement(_eui.EuiPopover,{id:"addPanelSortPopover",panelClassName:"euiFilterGroup__popoverPanel",panelPaddingSize:"none",isOpen:this.state.sortOpen,closePopover:function closePopover(){return _this4.setState({sortOpen:false})},button:_react.default.createElement(_eui.EuiFilterButton,{onClick:function onClick(){return _this4.setState((function(_ref4){var sortOpen=_ref4.sortOpen;return{sortOpen:!sortOpen}}))},iconType:"arrowDown",isSelected:this.state.sortOpen,"data-test-subj":"savedObjectFinderSortButton"},_i18n.i18n.translate("savedObjects.finder.sortButtonLabel",{defaultMessage:"Sort"}))},_react.default.createElement(_eui.EuiContextMenuPanel,{watchedItemProps:["icon","disabled"],items:this.getSortOptions()})),this.props.showFilter&&_react.default.createElement(_eui.EuiPopover,{id:"addPanelFilterPopover",panelClassName:"euiFilterGroup__popoverPanel",panelPaddingSize:"none",isOpen:this.state.filterOpen,closePopover:function closePopover(){return _this4.setState({filterOpen:false})},button:_react.default.createElement(_eui.EuiFilterButton,{onClick:function onClick(){return _this4.setState((function(_ref5){var filterOpen=_ref5.filterOpen;return{filterOpen:!filterOpen}}))},iconType:"arrowDown","data-test-subj":"savedObjectFinderFilterButton",isSelected:this.state.filterOpen,numFilters:this.props.savedObjectMetaData.length,hasActiveFilters:this.state.filteredTypes.length>0,numActiveFilters:this.state.filteredTypes.length},_i18n.i18n.translate("savedObjects.finder.filterButtonLabel",{defaultMessage:"Types"}))},_react.default.createElement(_eui.EuiContextMenuPanel,{watchedItemProps:["icon","disabled"],items:this.props.savedObjectMetaData.map((function(metaData){return _react.default.createElement(_eui.EuiContextMenuItem,{key:metaData.type,disabled:!availableSavedObjectMetaData.includes(metaData),icon:_this4.state.filteredTypes.includes(metaData.type)?"check":"empty","data-test-subj":"savedObjectFinderFilter-".concat(metaData.type),onClick:function onClick(){_this4.setState((function(_ref6){var filteredTypes=_ref6.filteredTypes;return{filteredTypes:filteredTypes.includes(metaData.type)?filteredTypes.filter((function(t){return t!==metaData.type})):[].concat(_toConsumableArray(filteredTypes),[metaData.type]),page:0}}))}},metaData.name)}))})))),this.props.children?_react.default.createElement(_eui.EuiFlexItem,{grow:false},this.props.children):null)}},{key:"renderListing",value:function renderListing(){var _this5=this;var items=this.state.items.length===0?[]:this.getPageOfItems();var _this$props=this.props,onChoose=_this$props.onChoose,savedObjectMetaData=_this$props.savedObjectMetaData;return _react.default.createElement(_react.default.Fragment,null,this.state.isFetchingItems&&this.state.items.length===0&&_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiLoadingSpinner,{"data-test-subj":"savedObjectFinderLoadingIndicator"}))),items.length>0?_react.default.createElement(_eui.EuiListGroup,{"data-test-subj":"savedObjectFinderItemList",maxWidth:false},items.map((function(item){var currentSavedObjectMetaData=savedObjectMetaData.find((function(metaData){return metaData.type===item.type}));var fullName=currentSavedObjectMetaData.getTooltipForSavedObject?currentSavedObjectMetaData.getTooltipForSavedObject(item.savedObject):"".concat(item.title," (").concat(currentSavedObjectMetaData.name,")");var iconType=(currentSavedObjectMetaData||{getIconForSavedObject:function getIconForSavedObject(){return"document"}}).getIconForSavedObject(item.savedObject);return _react.default.createElement(_eui.EuiListGroupItem,{key:item.id,iconType:iconType,label:item.title,onClick:onChoose?function(){onChoose(item.id,item.type,fullName,item.savedObject)}:undefined,title:fullName,"data-test-subj":"savedObjectTitle".concat((item.title||"").split(" ").join("-"))})}))):!this.state.isFetchingItems&&_react.default.createElement(_eui.EuiEmptyPrompt,{body:this.props.noItemsMessage}),this.getPageCount()>1&&(this.props.fixedPageSize?_react.default.createElement(_eui.EuiPagination,{activePage:this.state.page,pageCount:this.getPageCount(),onPageClick:function onPageClick(page){_this5.setState({page:page})}}):_react.default.createElement(_eui.EuiTablePagination,{activePage:this.state.page,pageCount:this.getPageCount(),onChangePage:function onChangePage(page){_this5.setState({page:page})},onChangeItemsPerPage:function onChangeItemsPerPage(perPage){_this5.setState({perPage:perPage})},itemsPerPage:this.state.perPage,itemsPerPageOptions:[5,10,15,25]})))}}]);return SavedObjectFinderUi}(_react.default.Component);exports.SavedObjectFinderUi=SavedObjectFinderUi;_defineProperty(SavedObjectFinderUi,"propTypes",{onChoose:_propTypes.default.func,noItemsMessage:_propTypes.default.node,savedObjectMetaData:_propTypes.default.array.isRequired,initialPageSize:_propTypes.default.oneOf([5,10,15,25]),fixedPageSize:_propTypes.default.number,showFilter:_propTypes.default.bool});var getSavedObjectFinder=function getSavedObjectFinder(savedObject,uiSettings){return function(props){return _react.default.createElement(SavedObjectFinderUi,_extends({},props,{savedObjects:savedObject,uiSettings:uiSettings}))}};exports.getSavedObjectFinder=getSavedObjectFinder},,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"createSavedObjectClass",{enumerable:true,get:function get(){return _saved_object.createSavedObjectClass}});Object.defineProperty(exports,"SavedObjectLoader",{enumerable:true,get:function get(){return _saved_object_loader.SavedObjectLoader}});Object.defineProperty(exports,"checkForDuplicateTitle",{enumerable:true,get:function get(){return _check_for_duplicate_title.checkForDuplicateTitle}});Object.defineProperty(exports,"saveWithConfirmation",{enumerable:true,get:function get(){return _save_with_confirmation.saveWithConfirmation}});Object.defineProperty(exports,"isErrorNonFatal",{enumerable:true,get:function get(){return _save_saved_object.isErrorNonFatal}});var _saved_object=__webpack_require__(463);var _saved_object_loader=__webpack_require__(708);var _check_for_duplicate_title=__webpack_require__(237);var _save_with_confirmation=__webpack_require__(710);var _save_saved_object=__webpack_require__(236)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSavedObjectClass=createSavedObjectClass;var _build_saved_object=__webpack_require__(464);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function createSavedObjectClass(services){var SavedObjectClass=function SavedObjectClass(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,SavedObjectClass);var self=this;(0,_build_saved_object.buildSavedObject)(self,config,services)};return SavedObjectClass}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildSavedObject=buildSavedObject;var _lodash=_interopRequireDefault(__webpack_require__(41));var _public=__webpack_require__(59);var _hydrate_index_pattern=__webpack_require__(700);var _initialize_saved_object=__webpack_require__(701);var _serialize_saved_object=__webpack_require__(702);var _apply_es_resp=__webpack_require__(703);var _save_saved_object=__webpack_require__(236);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function buildSavedObject(savedObject){var config=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var services=arguments.length>2?arguments[2]:undefined;var indexPatterns=services.indexPatterns,savedObjectsClient=services.savedObjectsClient;var esType=config.type||"";savedObject.getDisplayName=function(){return esType};savedObject.getEsType=function(){return esType};savedObject.isSaving=false;savedObject.defaults=config.defaults||{};savedObject.searchSource=config.searchSource?new _public.SearchSource:undefined;savedObject.id=config.id||void 0;savedObject.migrationVersion=config.migrationVersion;savedObject.copyOnSave=false;savedObject.hydrateIndexPattern=function(id){return(0,_hydrate_index_pattern.hydrateIndexPattern)(id||"",savedObject,indexPatterns,config)};savedObject.init=_lodash.default.once((function(){return(0,_initialize_saved_object.intializeSavedObject)(savedObject,savedObjectsClient,config)}));savedObject.applyESResp=function(resp){return(0,_apply_es_resp.applyESResp)(resp,savedObject,config)};savedObject._serialize=function(){return(0,_serialize_saved_object.serializeSavedObject)(savedObject,config)};savedObject.isTitleChanged=function(){return savedObject._source&&savedObject._source.title!==savedObject.title};savedObject.creationOpts=function(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return _objectSpread({id:savedObject.id,migrationVersion:savedObject.migrationVersion},opts)};savedObject.save=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(opts){var result;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return(0,_save_saved_object.saveSavedObject)(savedObject,config,opts,services);case 3:result=_context.sent;return _context.abrupt("return",Promise.resolve(result));case 7:_context.prev=7;_context.t0=_context["catch"](0);return _context.abrupt("return",Promise.reject(_context.t0));case 10:case"end":return _context.stop()}}}),_callee,null,[[0,7]])})));return function(_x){return _ref.apply(this,arguments)}}();savedObject.destroy=function(){};savedObject.delete=function(){if(!savedObject.id){return Promise.reject(new Error("Deleting a saved Object requires type and id"))}return savedObjectsClient.delete(esType,savedObject.id)}}},function(module,exports,__webpack_require__){if(window.__kbnDarkMode__){__webpack_require__(466)}else{__webpack_require__(468)}},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(467);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".globalQueryBar {\n  padding: 0px 8px 8px 8px; }\n\n.globalQueryBar:not(:empty) {\n  padding-bottom: 8px; }\n\n.globalFilterGroup__filterBar {\n  margin-top: 4px; }\n\n.globalFilterBar__addButton {\n  min-height: 28px; }\n\n.globalFilterGroup__branch {\n  padding: 8px 12px 0 0;\n  background-repeat: no-repeat;\n  background-position: 12px -8px;\n  background-image: url(\"data:image/svg+xml,%0A%3Csvg width='28px' height='28px' viewBox='0 0 28 28' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='rgb%2852, 55, 65%29'%3E%3Crect x='14' y='27' width='14' height='1'%3E%3C/rect%3E%3C/g%3E%3C/svg%3E\"); }\n\n.globalFilterGroup__wrapper {\n  line-height: 1;\n  overflow: hidden;\n  -webkit-transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n\n.globalFilterGroup__filterFlexItem {\n  overflow: hidden;\n  padding-bottom: 2px; }\n\n.globalFilterBar__flexItem {\n  max-width: calc(100% - 4px); }\n\n@media only screen and (max-width: 574px) {\n  .globalFilterGroup__wrapper-isVisible {\n    margin-top: -16px; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .globalFilterGroup__wrapper-isVisible {\n    margin-top: -16px; } }\n\n/**\n * 1.  Allow wrapping of long filter items\n */\n.globalFilterItem {\n  line-height: 16px;\n  border: none;\n  color: #DFE5EF;\n  padding-top: 6px;\n  padding-bottom: 6px;\n  white-space: normal;\n  /* 1 */ }\n  .globalFilterItem .euiBadge__childButton {\n    -webkit-flex-shrink: 1;\n        -ms-flex-negative: 1;\n            flex-shrink: 1;\n    /* 1 */ }\n  .globalFilterItem:not(.globalFilterItem-isDisabled) {\n    background-color: #16171c;\n    background-repeat: no-repeat;\n    background-size: 0% 100%;\n    -webkit-box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.2), 0 3px 2px -2px rgba(0, 0, 0, 0.2), inset 0 0 0 1px rgba(255, 255, 255, 0.1);\n            box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.2), 0 3px 2px -2px rgba(0, 0, 0, 0.2), inset 0 0 0 1px rgba(255, 255, 255, 0.1);\n    -webkit-transition: background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in, -webkit-box-shadow 150ms ease-in;\n    transition: background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in, -webkit-box-shadow 150ms ease-in;\n    transition: box-shadow 150ms ease-in, background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in;\n    transition: box-shadow 150ms ease-in, background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in, -webkit-box-shadow 150ms ease-in;\n    -webkit-box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.2), 0 3px 2px -2px rgba(0, 0, 0, 0.2), inset 0 0 0 1px #424752;\n            box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.2), 0 3px 2px -2px rgba(0, 0, 0, 0.2), inset 0 0 0 1px #424752; }\n    @supports (-moz-appearance: none) {\n      .globalFilterItem:not(.globalFilterItem-isDisabled) {\n        -webkit-transition-property: background-image, background-size, -webkit-box-shadow;\n        transition-property: background-image, background-size, -webkit-box-shadow;\n        transition-property: box-shadow, background-image, background-size;\n        transition-property: box-shadow, background-image, background-size, -webkit-box-shadow; } }\n  .globalFilterItem:focus-within {\n    -webkit-animation: none !important;\n            animation: none !important; }\n\n.globalFilterItem-isDisabled {\n  color: #98A2B3;\n  background-color: rgba(52, 55, 65, 0.5);\n  text-decoration: line-through;\n  font-weight: 400;\n  font-style: italic; }\n\n.globalFilterItem-isInvalid {\n  text-decoration: none; }\n  .globalFilterItem-isInvalid .globalFilterLabel__value {\n    color: #F66;\n    font-weight: 700; }\n\n.globalFilterItem-isPinned {\n  position: relative; }\n  .globalFilterItem-isPinned::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    width: 4px;\n    background-color: #424752;\n    border-top-left-radius: 2px;\n    border-bottom-left-radius: 2px; }\n\n.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled) {\n  -webkit-box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.2), 0 3px 2px -2px rgba(0, 0, 0, 0.2), inset 0 0 0 1px #803333;\n          box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.2), 0 3px 2px -2px rgba(0, 0, 0, 0.2), inset 0 0 0 1px #803333; }\n  .globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled)::before {\n    background-color: #cc5252; }\n\n.globalFilterItem__editorForm {\n  padding: 12px; }\n\n.globalFilterItem__popover,\n.globalFilterItem__popoverAnchor {\n  display: block; }\n\n.globalFilterEditor__fieldInput {\n  max-width: 208px; }\n\n.kbnTypeahead {\n  position: relative; }\n  .kbnTypeahead .kbnTypeahead__popover {\n    -webkit-box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1), 0 6px 12px 0 rgba(0, 0, 0, 0.1), 0 4px 4px 0 rgba(0, 0, 0, 0.1), 0 2px 2px 0 rgba(0, 0, 0, 0.1);\n            box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1), 0 6px 12px 0 rgba(0, 0, 0, 0.1), 0 4px 4px 0 rgba(0, 0, 0, 0.1), 0 2px 2px 0 rgba(0, 0, 0, 0.1);\n    border: 1px solid;\n    border-color: #343741;\n    color: #DFE5EF;\n    background-color: #1D1E24;\n    position: absolute;\n    top: -1px;\n    z-index: 2000;\n    width: 100%;\n    border-bottom-left-radius: 4px;\n    border-bottom-right-radius: 4px; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items {\n      scrollbar-width: thin;\n      max-height: 60vh;\n      overflow-y: auto; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar-thumb {\n        background-color: rgba(152, 162, 179, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar-corner, .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar-track {\n        background-color: transparent; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item {\n      height: 32px;\n      white-space: nowrap;\n      font-size: 12px;\n      vertical-align: middle;\n      padding: 0;\n      border-bottom: none;\n      line-height: normal; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:hover {\n      cursor: pointer; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:last-child {\n      border-bottom: none;\n      border-radius: 0 0 4px 4px; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:first-child {\n      border-bottom: none;\n      border-radius: 4px 4px 0 0; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active {\n      background-color: #25262E; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__callout {\n        background: #1D1E24; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__text {\n        color: #FFF; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__type {\n        color: #FFF; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--field .kbnSuggestionItem__type {\n        background-color: #665231; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--value .kbnSuggestionItem__type {\n        background-color: #325a54; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--operator .kbnSuggestionItem__type {\n        background-color: #0b4462; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--conjunction .kbnSuggestionItem__type {\n        background-color: #3a2d4a; }\n\n.kbnSuggestionItem {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  font-size: 12px;\n  white-space: nowrap; }\n  .kbnSuggestionItem.kbnSuggestionItem--field .kbnSuggestionItem__type {\n    background-color: #80673d;\n    color: #ffeaca; }\n  .kbnSuggestionItem.kbnSuggestionItem--value .kbnSuggestionItem__type {\n    background-color: #3f7169;\n    color: #c6f2ea; }\n  .kbnSuggestionItem.kbnSuggestionItem--operator .kbnSuggestionItem__type {\n    background-color: #0e557b;\n    color: #8ad3f6; }\n  .kbnSuggestionItem.kbnSuggestionItem--conjunction .kbnSuggestionItem__type {\n    background-color: #49385c;\n    color: #c0aed6; }\n  .kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__type {\n    background-color: #343741;\n    color: #535966; }\n  .kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__text {\n    width: auto; }\n\n.kbnSuggestionItem__text,\n.kbnSuggestionItem__type,\n.kbnSuggestionItem__description {\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n  -webkit-flex-basis: 0%;\n      -ms-flex-preferred-size: 0%;\n          flex-basis: 0%;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n      -ms-flex-direction: column;\n          flex-direction: column; }\n\n.kbnSuggestionItem__type {\n  -webkit-box-flex: 0;\n  -webkit-flex-grow: 0;\n      -ms-flex-positive: 0;\n          flex-grow: 0;\n  -webkit-flex-shrink: 0;\n      -ms-flex-negative: 0;\n          flex-shrink: 0;\n  -webkit-flex-basis: auto;\n      -ms-flex-preferred-size: auto;\n          flex-basis: auto;\n  width: 32px;\n  height: 32px;\n  text-align: center;\n  overflow: hidden;\n  padding: 4px;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n.kbnSuggestionItem__text {\n  -webkit-box-flex: 0;\n  -webkit-flex-grow: 0;\n      -ms-flex-positive: 0;\n          flex-grow: 0;\n  /* 2 */\n  -webkit-flex-basis: auto;\n      -ms-flex-preferred-size: auto;\n          flex-basis: auto;\n  /* 2 */\n  font-family: \"Roboto Mono\", Consolas, Menlo, Courier, monospace;\n  width: 250px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding: 4px 8px;\n  color: #DFE5EF; }\n\n.kbnSuggestionItem__description {\n  color: #98A2B3;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-left: 32px; }\n  .kbnSuggestionItem__description:empty {\n    -webkit-box-flex: 0;\n    -webkit-flex-grow: 0;\n        -ms-flex-positive: 0;\n            flex-grow: 0;\n    margin-left: 0; }\n\n.kbnSuggestionItem__callout {\n  font-family: \"Roboto Mono\", Consolas, Menlo, Courier, monospace;\n  background: #25262E;\n  color: #FFF;\n  padding: 0 4px;\n  display: inline-block; }\n\n.kbnSuggestionItem--value .kbnSuggestionItem__text {\n  -webkit-flex-basis: 50%;\n      -ms-flex-preferred-size: 50%;\n          flex-basis: 50%;\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1; }\n\n.kbnSavedQueryManagement__popover {\n  max-width: 400px; }\n\n.kbnSavedQueryManagement__listWrapper {\n  max-height: 416px;\n  overflow-y: hidden; }\n\n.kbnSavedQueryManagement__pagination {\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  padding: 6px 12px 12px; }\n\n.kbnSavedQueryManagement__text {\n  padding: 12px 12px 6px 12px; }\n\n.kbnSavedQueryManagement__list {\n  scrollbar-width: thin;\n  -webkit-mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n          mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n  height: 100%;\n  overflow-y: auto;\n  max-height: inherit;\n  padding: 6px 4px !important; }\n  .kbnSavedQueryManagement__list::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .kbnSavedQueryManagement__list::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .kbnSavedQueryManagement__list::-webkit-scrollbar-corner, .kbnSavedQueryManagement__list::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.kbnSavedQueryListItem {\n  margin-top: 0;\n  color: #1BA9F5; }\n\n.kbnSavedQueryListItem-selected button {\n  font-weight: 700; }\n\n.kbnSavedQueryListItem__label {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n.kbnSavedQueryListItem__labelText {\n  max-width: 100%;\n  overflow: hidden !important;\n  text-overflow: ellipsis !important;\n  white-space: nowrap !important;\n  word-wrap: normal !important;\n  margin-right: 4px; }\n\n@media only screen and (max-width: 574px) {\n  .kbnQueryBar--withDatePicker > :first-child {\n    -webkit-box-ordinal-group: 2;\n    -webkit-order: 1;\n        -ms-flex-order: 1;\n            order: 1;\n    margin-top: -8px; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .kbnQueryBar--withDatePicker > :first-child {\n    -webkit-box-ordinal-group: 2;\n    -webkit-order: 1;\n        -ms-flex-order: 1;\n            order: 1;\n    margin-top: -8px; } }\n\n@media only screen and (min-width: 768px) and (max-width: 991px) {\n  .kbnQueryBar__datePickerWrapper {\n    max-width: 40vw;\n    -webkit-box-flex: 0 !important;\n    -webkit-flex-grow: 0 !important;\n        -ms-flex-positive: 0 !important;\n            flex-grow: 0 !important;\n    -webkit-flex-basis: auto !important;\n        -ms-flex-preferred-size: auto !important;\n            flex-basis: auto !important; } }\n\n@media only screen and (min-width: 992px) and (max-width: 1199px) {\n  .kbnQueryBar__datePickerWrapper {\n    max-width: 40vw;\n    -webkit-box-flex: 0 !important;\n    -webkit-flex-grow: 0 !important;\n        -ms-flex-positive: 0 !important;\n            flex-grow: 0 !important;\n    -webkit-flex-basis: auto !important;\n        -ms-flex-preferred-size: auto !important;\n            flex-basis: auto !important; } }\n\n@media only screen and (min-width: 1200px) {\n  .kbnQueryBar__datePickerWrapper {\n    max-width: 40vw;\n    -webkit-box-flex: 0 !important;\n    -webkit-flex-grow: 0 !important;\n        -ms-flex-positive: 0 !important;\n            flex-grow: 0 !important;\n    -webkit-flex-basis: auto !important;\n        -ms-flex-preferred-size: auto !important;\n            flex-basis: auto !important; } }\n\n.shardFailureModal {\n  min-height: 75vh;\n  width: 768px; }\n\n.shardFailureModal__desc {\n  max-width: 686px; }\n\n.shardFailureModal__descTitle {\n  width: 20% !important;\n  margin-top: 8px; }\n\n.shardFailureModal__descValue {\n  width: 80% !important;\n  margin-top: 8px; }\n\n.shardFailureModal__keyValueTitle {\n  padding-right: 8px; }\n\n@media only screen and (max-width: 574px) {\n  .shardFailureModal__keyValueTitle {\n    display: block;\n    width: 100%; }\n  .shardFailureModal__descTitle {\n    display: block;\n    width: 100% !important; }\n  .shardFailureModal__descValue {\n    display: block;\n    width: 100% !important; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .shardFailureModal__keyValueTitle {\n    display: block;\n    width: 100%; }\n  .shardFailureModal__descTitle {\n    display: block;\n    width: 100% !important; }\n  .shardFailureModal__descValue {\n    display: block;\n    width: 100% !important; } }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(469);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".globalQueryBar {\n  padding: 0px 8px 8px 8px; }\n\n.globalQueryBar:not(:empty) {\n  padding-bottom: 8px; }\n\n.globalFilterGroup__filterBar {\n  margin-top: 4px; }\n\n.globalFilterBar__addButton {\n  min-height: 28px; }\n\n.globalFilterGroup__branch {\n  padding: 8px 12px 0 0;\n  background-repeat: no-repeat;\n  background-position: 12px -8px;\n  background-image: url(\"data:image/svg+xml,%0A%3Csvg width='28px' height='28px' viewBox='0 0 28 28' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='rgb%28211, 218, 230%29'%3E%3Crect x='14' y='27' width='14' height='1'%3E%3C/rect%3E%3C/g%3E%3C/svg%3E\"); }\n\n.globalFilterGroup__wrapper {\n  line-height: 1;\n  overflow: hidden;\n  -webkit-transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n\n.globalFilterGroup__filterFlexItem {\n  overflow: hidden;\n  padding-bottom: 2px; }\n\n.globalFilterBar__flexItem {\n  max-width: calc(100% - 4px); }\n\n@media only screen and (max-width: 574px) {\n  .globalFilterGroup__wrapper-isVisible {\n    margin-top: -16px; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .globalFilterGroup__wrapper-isVisible {\n    margin-top: -16px; } }\n\n/**\n * 1.  Allow wrapping of long filter items\n */\n.globalFilterItem {\n  line-height: 16px;\n  border: none;\n  color: #343741;\n  padding-top: 6px;\n  padding-bottom: 6px;\n  white-space: normal;\n  /* 1 */ }\n  .globalFilterItem .euiBadge__childButton {\n    -webkit-flex-shrink: 1;\n        -ms-flex-negative: 1;\n            flex-shrink: 1;\n    /* 1 */ }\n  .globalFilterItem:not(.globalFilterItem-isDisabled) {\n    background-color: #fbfcfd;\n    background-repeat: no-repeat;\n    background-size: 0% 100%;\n    -webkit-box-shadow: 0 1px 1px -1px rgba(152, 162, 179, 0.2), 0 3px 2px -2px rgba(152, 162, 179, 0.2), inset 0 0 0 1px rgba(15, 39, 118, 0.1);\n            box-shadow: 0 1px 1px -1px rgba(152, 162, 179, 0.2), 0 3px 2px -2px rgba(152, 162, 179, 0.2), inset 0 0 0 1px rgba(15, 39, 118, 0.1);\n    -webkit-transition: background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in, -webkit-box-shadow 150ms ease-in;\n    transition: background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in, -webkit-box-shadow 150ms ease-in;\n    transition: box-shadow 150ms ease-in, background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in;\n    transition: box-shadow 150ms ease-in, background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in, -webkit-box-shadow 150ms ease-in;\n    -webkit-box-shadow: 0 1px 1px -1px rgba(152, 162, 179, 0.2), 0 3px 2px -2px rgba(152, 162, 179, 0.2), inset 0 0 0 1px #bcc3ce;\n            box-shadow: 0 1px 1px -1px rgba(152, 162, 179, 0.2), 0 3px 2px -2px rgba(152, 162, 179, 0.2), inset 0 0 0 1px #bcc3ce; }\n    @supports (-moz-appearance: none) {\n      .globalFilterItem:not(.globalFilterItem-isDisabled) {\n        -webkit-transition-property: background-image, background-size, -webkit-box-shadow;\n        transition-property: background-image, background-size, -webkit-box-shadow;\n        transition-property: box-shadow, background-image, background-size;\n        transition-property: box-shadow, background-image, background-size, -webkit-box-shadow; } }\n  .globalFilterItem:focus-within {\n    -webkit-animation: none !important;\n            animation: none !important; }\n\n.globalFilterItem-isDisabled {\n  color: #69707D;\n  background-color: rgba(211, 218, 230, 0.5);\n  text-decoration: line-through;\n  font-weight: 400;\n  font-style: italic; }\n\n.globalFilterItem-isInvalid {\n  text-decoration: none; }\n  .globalFilterItem-isInvalid .globalFilterLabel__value {\n    color: #BD271E;\n    font-weight: 700; }\n\n.globalFilterItem-isPinned {\n  position: relative; }\n  .globalFilterItem-isPinned::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    width: 4px;\n    background-color: #bcc3ce;\n    border-top-left-radius: 2px;\n    border-bottom-left-radius: 2px; }\n\n.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled) {\n  -webkit-box-shadow: 0 1px 1px -1px rgba(152, 162, 179, 0.2), 0 3px 2px -2px rgba(152, 162, 179, 0.2), inset 0 0 0 1px #ebbebc;\n          box-shadow: 0 1px 1px -1px rgba(152, 162, 179, 0.2), 0 3px 2px -2px rgba(152, 162, 179, 0.2), inset 0 0 0 1px #ebbebc; }\n  .globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled)::before {\n    background-color: #d16862; }\n\n.globalFilterItem__editorForm {\n  padding: 12px; }\n\n.globalFilterItem__popover,\n.globalFilterItem__popoverAnchor {\n  display: block; }\n\n.globalFilterEditor__fieldInput {\n  max-width: 208px; }\n\n.kbnTypeahead {\n  position: relative; }\n  .kbnTypeahead .kbnTypeahead__popover {\n    -webkit-box-shadow: 0 12px 24px 0 rgba(65, 78, 101, 0.1), 0 6px 12px 0 rgba(65, 78, 101, 0.1), 0 4px 4px 0 rgba(65, 78, 101, 0.1), 0 2px 2px 0 rgba(65, 78, 101, 0.1);\n            box-shadow: 0 12px 24px 0 rgba(65, 78, 101, 0.1), 0 6px 12px 0 rgba(65, 78, 101, 0.1), 0 4px 4px 0 rgba(65, 78, 101, 0.1), 0 2px 2px 0 rgba(65, 78, 101, 0.1);\n    border-color: #d0d3d9;\n    border-top-color: #d9dce0;\n    border-bottom-color: #aaafba;\n    border: 1px solid;\n    border-color: #D3DAE6;\n    color: #343741;\n    background-color: #FFF;\n    position: absolute;\n    top: -1px;\n    z-index: 2000;\n    width: 100%;\n    border-bottom-left-radius: 4px;\n    border-bottom-right-radius: 4px; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items {\n      scrollbar-width: thin;\n      max-height: 60vh;\n      overflow-y: auto; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar-thumb {\n        background-color: rgba(105, 112, 125, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar-corner, .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar-track {\n        background-color: transparent; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item {\n      height: 32px;\n      white-space: nowrap;\n      font-size: 12px;\n      vertical-align: middle;\n      padding: 0;\n      border-bottom: none;\n      line-height: normal; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:hover {\n      cursor: pointer; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:last-child {\n      border-bottom: none;\n      border-radius: 0 0 4px 4px; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:first-child {\n      border-bottom: none;\n      border-radius: 4px 4px 0 0; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active {\n      background-color: #F5F7FA; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__callout {\n        background: #FFF; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__text {\n        color: #000; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__type {\n        color: #000; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--field .kbnSuggestionItem__type {\n        background-color: #fdedcc; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--value .kbnSuggestionItem__type {\n        background-color: #cce5e3; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--operator .kbnSuggestionItem__type {\n        background-color: #cce1f0; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--conjunction .kbnSuggestionItem__type {\n        background-color: #e9e2f1; }\n\n.kbnSuggestionItem {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  font-size: 12px;\n  white-space: nowrap; }\n  .kbnSuggestionItem.kbnSuggestionItem--field .kbnSuggestionItem__type {\n    background-color: #fef6e6;\n    color: #936400; }\n  .kbnSuggestionItem.kbnSuggestionItem--value .kbnSuggestionItem__type {\n    background-color: #e6f2f1;\n    color: #01776d; }\n  .kbnSuggestionItem.kbnSuggestionItem--operator .kbnSuggestionItem__type {\n    background-color: #e6f0f8;\n    color: #006BB4; }\n  .kbnSuggestionItem.kbnSuggestionItem--conjunction .kbnSuggestionItem__type {\n    background-color: #f4f1f8;\n    color: #7c609e; }\n  .kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__type {\n    background-color: #D3DAE6;\n    color: #98A2B3; }\n  .kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__text {\n    width: auto; }\n\n.kbnSuggestionItem__text,\n.kbnSuggestionItem__type,\n.kbnSuggestionItem__description {\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n  -webkit-flex-basis: 0%;\n      -ms-flex-preferred-size: 0%;\n          flex-basis: 0%;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n      -ms-flex-direction: column;\n          flex-direction: column; }\n\n.kbnSuggestionItem__type {\n  -webkit-box-flex: 0;\n  -webkit-flex-grow: 0;\n      -ms-flex-positive: 0;\n          flex-grow: 0;\n  -webkit-flex-shrink: 0;\n      -ms-flex-negative: 0;\n          flex-shrink: 0;\n  -webkit-flex-basis: auto;\n      -ms-flex-preferred-size: auto;\n          flex-basis: auto;\n  width: 32px;\n  height: 32px;\n  text-align: center;\n  overflow: hidden;\n  padding: 4px;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n.kbnSuggestionItem__text {\n  -webkit-box-flex: 0;\n  -webkit-flex-grow: 0;\n      -ms-flex-positive: 0;\n          flex-grow: 0;\n  /* 2 */\n  -webkit-flex-basis: auto;\n      -ms-flex-preferred-size: auto;\n          flex-basis: auto;\n  /* 2 */\n  font-family: \"Roboto Mono\", Consolas, Menlo, Courier, monospace;\n  width: 250px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding: 4px 8px;\n  color: #343741; }\n\n.kbnSuggestionItem__description {\n  color: #69707D;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-left: 32px; }\n  .kbnSuggestionItem__description:empty {\n    -webkit-box-flex: 0;\n    -webkit-flex-grow: 0;\n        -ms-flex-positive: 0;\n            flex-grow: 0;\n    margin-left: 0; }\n\n.kbnSuggestionItem__callout {\n  font-family: \"Roboto Mono\", Consolas, Menlo, Courier, monospace;\n  background: #F5F7FA;\n  color: #000;\n  padding: 0 4px;\n  display: inline-block; }\n\n.kbnSuggestionItem--value .kbnSuggestionItem__text {\n  -webkit-flex-basis: 50%;\n      -ms-flex-preferred-size: 50%;\n          flex-basis: 50%;\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1; }\n\n.kbnSavedQueryManagement__popover {\n  max-width: 400px; }\n\n.kbnSavedQueryManagement__listWrapper {\n  max-height: 416px;\n  overflow-y: hidden; }\n\n.kbnSavedQueryManagement__pagination {\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  padding: 6px 12px 12px; }\n\n.kbnSavedQueryManagement__text {\n  padding: 12px 12px 6px 12px; }\n\n.kbnSavedQueryManagement__list {\n  scrollbar-width: thin;\n  -webkit-mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n          mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n  height: 100%;\n  overflow-y: auto;\n  max-height: inherit;\n  padding: 6px 4px !important; }\n  .kbnSavedQueryManagement__list::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .kbnSavedQueryManagement__list::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .kbnSavedQueryManagement__list::-webkit-scrollbar-corner, .kbnSavedQueryManagement__list::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.kbnSavedQueryListItem {\n  margin-top: 0;\n  color: #006BB4; }\n\n.kbnSavedQueryListItem-selected button {\n  font-weight: 700; }\n\n.kbnSavedQueryListItem__label {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n.kbnSavedQueryListItem__labelText {\n  max-width: 100%;\n  overflow: hidden !important;\n  text-overflow: ellipsis !important;\n  white-space: nowrap !important;\n  word-wrap: normal !important;\n  margin-right: 4px; }\n\n@media only screen and (max-width: 574px) {\n  .kbnQueryBar--withDatePicker > :first-child {\n    -webkit-box-ordinal-group: 2;\n    -webkit-order: 1;\n        -ms-flex-order: 1;\n            order: 1;\n    margin-top: -8px; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .kbnQueryBar--withDatePicker > :first-child {\n    -webkit-box-ordinal-group: 2;\n    -webkit-order: 1;\n        -ms-flex-order: 1;\n            order: 1;\n    margin-top: -8px; } }\n\n@media only screen and (min-width: 768px) and (max-width: 991px) {\n  .kbnQueryBar__datePickerWrapper {\n    max-width: 40vw;\n    -webkit-box-flex: 0 !important;\n    -webkit-flex-grow: 0 !important;\n        -ms-flex-positive: 0 !important;\n            flex-grow: 0 !important;\n    -webkit-flex-basis: auto !important;\n        -ms-flex-preferred-size: auto !important;\n            flex-basis: auto !important; } }\n\n@media only screen and (min-width: 992px) and (max-width: 1199px) {\n  .kbnQueryBar__datePickerWrapper {\n    max-width: 40vw;\n    -webkit-box-flex: 0 !important;\n    -webkit-flex-grow: 0 !important;\n        -ms-flex-positive: 0 !important;\n            flex-grow: 0 !important;\n    -webkit-flex-basis: auto !important;\n        -ms-flex-preferred-size: auto !important;\n            flex-basis: auto !important; } }\n\n@media only screen and (min-width: 1200px) {\n  .kbnQueryBar__datePickerWrapper {\n    max-width: 40vw;\n    -webkit-box-flex: 0 !important;\n    -webkit-flex-grow: 0 !important;\n        -ms-flex-positive: 0 !important;\n            flex-grow: 0 !important;\n    -webkit-flex-basis: auto !important;\n        -ms-flex-preferred-size: auto !important;\n            flex-basis: auto !important; } }\n\n.shardFailureModal {\n  min-height: 75vh;\n  width: 768px; }\n\n.shardFailureModal__desc {\n  max-width: 686px; }\n\n.shardFailureModal__descTitle {\n  width: 20% !important;\n  margin-top: 8px; }\n\n.shardFailureModal__descValue {\n  width: 80% !important;\n  margin-top: 8px; }\n\n.shardFailureModal__keyValueTitle {\n  padding-right: 8px; }\n\n@media only screen and (max-width: 574px) {\n  .shardFailureModal__keyValueTitle {\n    display: block;\n    width: 100%; }\n  .shardFailureModal__descTitle {\n    display: block;\n    width: 100% !important; }\n  .shardFailureModal__descValue {\n    display: block;\n    width: 100% !important; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .shardFailureModal__keyValueTitle {\n    display: block;\n    width: 100%; }\n  .shardFailureModal__descTitle {\n    display: block;\n    width: 100% !important; }\n  .shardFailureModal__descValue {\n    display: block;\n    width: 100% !important; } }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBar=void 0;var _eui=__webpack_require__(23);var _react=__webpack_require__(24);var _classnames=_interopRequireDefault(__webpack_require__(58));var _react2=_interopRequireWildcard(__webpack_require__(22));var _filter_editor=__webpack_require__(171);var _filter_item=__webpack_require__(474);var _filter_options=__webpack_require__(476);var _public=__webpack_require__(25);var _common=__webpack_require__(42);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function FilterBarUI(props){var _useState=(0,_react2.useState)(false),_useState2=_slicedToArray(_useState,2),isAddFilterPopoverOpen=_useState2[0],setIsAddFilterPopoverOpen=_useState2[1];var kibana=(0,_public.useKibana)();var uiSettings=kibana.services.uiSettings;if(!uiSettings)return null;function onFiltersUpdated(filters){if(props.onFiltersUpdated){props.onFiltersUpdated(filters)}}function renderItems(){return props.filters.map((function(filter,i){return _react2.default.createElement(_eui.EuiFlexItem,{key:i,grow:false,className:"globalFilterBar__flexItem"},_react2.default.createElement(_filter_item.FilterItem,{id:"".concat(i),filter:filter,onUpdate:function onUpdate(newFilter){return _onUpdate(i,newFilter)},onRemove:function onRemove(){return _onRemove(i)},indexPatterns:props.indexPatterns,uiSettings:uiSettings}))}))}function renderAddFilter(){var isPinned=uiSettings.get("filters:pinnedByDefault");var _props$indexPatterns=_slicedToArray(props.indexPatterns,1),indexPattern=_props$indexPatterns[0];var index=indexPattern&&indexPattern.id;var newFilter=(0,_common.buildEmptyFilter)(isPinned,index);var button=_react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:function onClick(){return setIsAddFilterPopoverOpen(true)},"data-test-subj":"addFilter",className:"globalFilterBar__addButton"},"+"," ",_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterBar.addFilterButtonLabel",defaultMessage:"Add filter"}));return _react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiPopover,{id:"addFilterPopover",button:button,isOpen:isAddFilterPopoverOpen,closePopover:function closePopover(){return setIsAddFilterPopoverOpen(false)},anchorPosition:"downLeft",withTitle:true,panelPaddingSize:"none",ownFocus:true,initialFocus:".filterEditor__hiddenItem"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement("div",{style:{width:400}},_react2.default.createElement(_filter_editor.FilterEditor,{filter:newFilter,indexPatterns:props.indexPatterns,onSubmit:onAdd,onCancel:function onCancel(){return setIsAddFilterPopoverOpen(false)},key:JSON.stringify(newFilter)})))))}function onAdd(filter){setIsAddFilterPopoverOpen(false);var filters=[].concat(_toConsumableArray(props.filters),[filter]);onFiltersUpdated(filters)}function _onRemove(i){var filters=_toConsumableArray(props.filters);filters.splice(i,1);onFiltersUpdated(filters)}function _onUpdate(i,filter){var filters=_toConsumableArray(props.filters);filters[i]=filter;onFiltersUpdated(filters)}function onEnableAll(){var filters=props.filters.map(_common.enableFilter);onFiltersUpdated(filters)}function onDisableAll(){var filters=props.filters.map(_common.disableFilter);onFiltersUpdated(filters)}function onPinAll(){var filters=props.filters.map(_common.pinFilter);onFiltersUpdated(filters)}function onUnpinAll(){var filters=props.filters.map(_common.unpinFilter);onFiltersUpdated(filters)}function onToggleAllNegated(){var filters=props.filters.map(_common.toggleFilterNegated);onFiltersUpdated(filters)}function onToggleAllDisabled(){var filters=props.filters.map(_common.toggleFilterDisabled);onFiltersUpdated(filters)}function onRemoveAll(){onFiltersUpdated([])}var classes=(0,_classnames.default)("globalFilterBar",props.className);return _react2.default.createElement(_eui.EuiFlexGroup,{className:"globalFilterGroup",gutterSize:"none",alignItems:"flexStart",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,{className:"globalFilterGroup__branch",grow:false},_react2.default.createElement(_filter_options.FilterOptions,{onEnableAll:onEnableAll,onDisableAll:onDisableAll,onPinAll:onPinAll,onUnpinAll:onUnpinAll,onToggleAllNegated:onToggleAllNegated,onToggleAllDisabled:onToggleAllDisabled,onRemoveAll:onRemoveAll})),_react2.default.createElement(_eui.EuiFlexItem,{className:"globalFilterGroup__filterFlexItem"},_react2.default.createElement(_eui.EuiFlexGroup,{className:classes,wrap:true,responsive:false,gutterSize:"xs",alignItems:"center"},renderItems(),renderAddFilter())))}var FilterBar=(0,_react.injectI18n)(FilterBarUI);exports.FilterBar=FilterBar},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.PhraseValueInput=void 0;var _eui=__webpack_require__(23);var _react=__webpack_require__(24);var _lodash=__webpack_require__(41);var _react2=_interopRequireDefault(__webpack_require__(22));var _generic_combo_box=__webpack_require__(109);var _phrase_suggestor=__webpack_require__(174);var _value_input_type=__webpack_require__(175);var _public=__webpack_require__(25);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var PhraseValueInputUI=function(_PhraseSuggestorUI){_inherits(PhraseValueInputUI,_PhraseSuggestorUI);function PhraseValueInputUI(){_classCallCheck(this,PhraseValueInputUI);return _possibleConstructorReturn(this,_getPrototypeOf(PhraseValueInputUI).apply(this,arguments))}_createClass(PhraseValueInputUI,[{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.valueInputLabel",defaultMessage:"Value"})},this.isSuggestingValues()?this.renderWithSuggestions():_react2.default.createElement(_value_input_type.ValueInputType,{placeholder:this.props.intl.formatMessage({id:"data.filter.filterEditor.valueInputPlaceholder",defaultMessage:"Enter a value"}),value:this.props.value,onChange:this.props.onChange,type:this.props.field?this.props.field.type:"string"}))}},{key:"renderWithSuggestions",value:function renderWithSuggestions(){var suggestions=this.state.suggestions;var _this$props=this.props,value=_this$props.value,intl=_this$props.intl,_onChange=_this$props.onChange;var valueAsStr=String(value);var options=value?(0,_lodash.uniq)([valueAsStr].concat(_toConsumableArray(suggestions))):suggestions;return _react2.default.createElement(StringComboBox,{placeholder:intl.formatMessage({id:"data.filter.filterEditor.valueSelectPlaceholder",defaultMessage:"Select a value"}),options:options,getLabel:function getLabel(option){return option},selectedOptions:value?[valueAsStr]:[],onChange:function onChange(_ref){var _ref2=_slicedToArray(_ref,1),_ref2$=_ref2[0],newValue=_ref2$===void 0?"":_ref2$;return _onChange(newValue)},onSearchChange:this.onSearchChange,singleSelection:{asPlainText:true},onCreateOption:_onChange,isClearable:false,"data-test-subj":"filterParamsComboBox phraseParamsComboxBox"})}}]);return PhraseValueInputUI}(_phrase_suggestor.PhraseSuggestorUI);function StringComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}var PhraseValueInput=(0,_react.injectI18n)((0,_public.withKibana)(PhraseValueInputUI));exports.PhraseValueInput=PhraseValueInput},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.PhrasesValuesInput=void 0;var _eui=__webpack_require__(23);var _react=__webpack_require__(24);var _lodash=__webpack_require__(41);var _react2=_interopRequireDefault(__webpack_require__(22));var _generic_combo_box=__webpack_require__(109);var _phrase_suggestor=__webpack_require__(174);var _public=__webpack_require__(25);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var PhrasesValuesInputUI=function(_PhraseSuggestorUI){_inherits(PhrasesValuesInputUI,_PhraseSuggestorUI);function PhrasesValuesInputUI(){_classCallCheck(this,PhrasesValuesInputUI);return _possibleConstructorReturn(this,_getPrototypeOf(PhrasesValuesInputUI).apply(this,arguments))}_createClass(PhrasesValuesInputUI,[{key:"render",value:function render(){var suggestions=this.state.suggestions;var _this$props=this.props,values=_this$props.values,intl=_this$props.intl,onChange=_this$props.onChange;var options=values?(0,_lodash.uniq)([].concat(_toConsumableArray(values),_toConsumableArray(suggestions))):suggestions;return _react2.default.createElement(_eui.EuiFormRow,{label:intl.formatMessage({id:"data.filter.filterEditor.valuesSelectLabel",defaultMessage:"Values"})},_react2.default.createElement(StringComboBox,{placeholder:intl.formatMessage({id:"data.filter.filterEditor.valuesSelectPlaceholder",defaultMessage:"Select values"}),options:options,getLabel:function getLabel(option){return option},selectedOptions:values||[],onSearchChange:this.onSearchChange,onCreateOption:function onCreateOption(option){return onChange([].concat(_toConsumableArray(values||[]),[option]))},onChange:onChange,isClearable:false,"data-test-subj":"filterParamsComboBox phrasesParamsComboxBox"}))}}]);return PhrasesValuesInputUI}(_phrase_suggestor.PhraseSuggestorUI);function StringComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}var PhrasesValuesInput=(0,_react.injectI18n)((0,_public.withKibana)(PhrasesValuesInputUI));exports.PhrasesValuesInput=PhrasesValuesInput},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RangeValueInput=void 0;var _eui=__webpack_require__(23);var _react=__webpack_require__(24);var _lodash=__webpack_require__(41);var _react2=_interopRequireDefault(__webpack_require__(22));var _public=__webpack_require__(25);var _value_input_type=__webpack_require__(175);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function RangeValueInputUI(props){var kibana=(0,_public.useKibana)();var dataMathDocLink=kibana.services.docLinks.links.date.dateMath;var type=props.field?props.field.type:"string";var onFromChange=function onFromChange(value){if(typeof value!=="string"&&typeof value!=="number"){throw new Error("Range params must be a string or number")}props.onChange({from:value,to:(0,_lodash.get)(props,"value.to")})};var onToChange=function onToChange(value){if(typeof value!=="string"&&typeof value!=="number"){throw new Error("Range params must be a string or number")}props.onChange({from:(0,_lodash.get)(props,"value.from"),to:value})};return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiFormControlLayoutDelimited,{"aria-label":props.intl.formatMessage({id:"data.filter.filterEditor.rangeInputLabel",defaultMessage:"Range"}),startControl:_react2.default.createElement(_value_input_type.ValueInputType,{controlOnly:true,type:type,value:props.value?props.value.from:undefined,onChange:onFromChange,placeholder:props.intl.formatMessage({id:"data.filter.filterEditor.rangeStartInputPlaceholder",defaultMessage:"Start of the range"})}),endControl:_react2.default.createElement(_value_input_type.ValueInputType,{controlOnly:true,type:type,value:props.value?props.value.to:undefined,onChange:onToChange,placeholder:props.intl.formatMessage({id:"data.filter.filterEditor.rangeEndInputPlaceholder",defaultMessage:"End of the range"})})}),type==="date"?_react2.default.createElement(_eui.EuiFormHelpText,null,_react2.default.createElement(_eui.EuiLink,{target:"_blank",href:dataMathDocLink},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.dateFormatHelpLinkLabel",defaultMessage:"Accepted date formats"})," ",_react2.default.createElement(_eui.EuiIcon,{type:"popout",size:"s"}))):"")}var RangeValueInput=(0,_react.injectI18n)(RangeValueInputUI);exports.RangeValueInput=RangeValueInput},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FilterItem=void 0;var _eui=__webpack_require__(23);var _react=__webpack_require__(24);var _classnames=_interopRequireDefault(__webpack_require__(58));var _react2=_interopRequireWildcard(__webpack_require__(22));var _filter_editor=__webpack_require__(171);var _filter_view=__webpack_require__(475);var _common=__webpack_require__(42);var _services=__webpack_require__(45);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterItemUI=function(_Component){_inherits(FilterItemUI,_Component);function FilterItemUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,FilterItemUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(FilterItemUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"handleBadgeClick",(function(e){if(e.shiftKey){_this.onToggleDisabled()}else{_this.togglePopover()}}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({isPopoverOpen:false})}));_defineProperty(_assertThisInitialized(_this),"togglePopover",(function(){_this.setState({isPopoverOpen:!_this.state.isPopoverOpen})}));_defineProperty(_assertThisInitialized(_this),"onSubmit",(function(filter){_this.closePopover();_this.props.onUpdate(filter)}));_defineProperty(_assertThisInitialized(_this),"onTogglePinned",(function(){var filter=(0,_common.toggleFilterPinned)(_this.props.filter);_this.props.onUpdate(filter)}));_defineProperty(_assertThisInitialized(_this),"onToggleNegated",(function(){var filter=(0,_common.toggleFilterNegated)(_this.props.filter);_this.props.onUpdate(filter)}));_defineProperty(_assertThisInitialized(_this),"onToggleDisabled",(function(){var filter=(0,_common.toggleFilterDisabled)(_this.props.filter);_this.props.onUpdate(filter)}));return _this}_createClass(FilterItemUI,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,filter=_this$props.filter,id=_this$props.id;var _filter$meta=filter.meta,negate=_filter$meta.negate,disabled=_filter$meta.disabled;var hasError=false;var valueLabel;try{valueLabel=(0,_common.getDisplayValueFromFilter)(filter,this.props.indexPatterns)}catch(e){(0,_services.getNotifications)().toasts.addError(e,{title:this.props.intl.formatMessage({id:"data.filter.filterBar.labelErrorMessage",defaultMessage:"Failed to display filter"})});valueLabel=this.props.intl.formatMessage({id:"data.filter.filterBar.labelErrorText",defaultMessage:"Error"});hasError=true}var dataTestSubjKey=filter.meta.key?"filter-key-".concat(filter.meta.key):"";var dataTestSubjValue=filter.meta.value?"filter-value-".concat(valueLabel):"";var dataTestSubjDisabled="filter-".concat(this.props.filter.meta.disabled?"disabled":"enabled");var dataTestSubjPinned="filter-".concat((0,_common.isFilterPinned)(filter)?"pinned":"unpinned");var classes=(0,_classnames.default)("globalFilterItem",{"globalFilterItem-isDisabled":disabled||hasError,"globalFilterItem-isInvalid":hasError,"globalFilterItem-isPinned":(0,_common.isFilterPinned)(filter),"globalFilterItem-isExcluded":negate},this.props.className);var badge=_react2.default.createElement(_filter_view.FilterView,{filter:filter,valueLabel:valueLabel,className:classes,iconOnClick:function iconOnClick(){return _this2.props.onRemove()},onClick:this.handleBadgeClick,"data-test-subj":"filter ".concat(dataTestSubjDisabled," ").concat(dataTestSubjKey," ").concat(dataTestSubjValue," ").concat(dataTestSubjPinned)});var panelTree=[{id:0,items:[{name:(0,_common.isFilterPinned)(filter)?this.props.intl.formatMessage({id:"data.filter.filterBar.unpinFilterButtonLabel",defaultMessage:"Unpin"}):this.props.intl.formatMessage({id:"data.filter.filterBar.pinFilterButtonLabel",defaultMessage:"Pin across all apps"}),icon:"pin",onClick:function onClick(){_this2.closePopover();_this2.onTogglePinned()},"data-test-subj":"pinFilter"},{name:this.props.intl.formatMessage({id:"data.filter.filterBar.editFilterButtonLabel",defaultMessage:"Edit filter"}),icon:"pencil",panel:1,"data-test-subj":"editFilter"},{name:negate?this.props.intl.formatMessage({id:"data.filter.filterBar.includeFilterButtonLabel",defaultMessage:"Include results"}):this.props.intl.formatMessage({id:"data.filter.filterBar.excludeFilterButtonLabel",defaultMessage:"Exclude results"}),icon:negate?"plusInCircle":"minusInCircle",onClick:function onClick(){_this2.closePopover();_this2.onToggleNegated()},"data-test-subj":"negateFilter"},{name:disabled?this.props.intl.formatMessage({id:"data.filter.filterBar.enableFilterButtonLabel",defaultMessage:"Re-enable"}):this.props.intl.formatMessage({id:"data.filter.filterBar.disableFilterButtonLabel",defaultMessage:"Temporarily disable"}),icon:"".concat(disabled?"eye":"eyeClosed"),onClick:function onClick(){_this2.closePopover();_this2.onToggleDisabled()},"data-test-subj":"disableFilter"},{name:this.props.intl.formatMessage({id:"data.filter.filterBar.deleteFilterButtonLabel",defaultMessage:"Delete"}),icon:"trash",onClick:function onClick(){_this2.closePopover();_this2.props.onRemove()},"data-test-subj":"deleteFilter"}]},{id:1,width:420,content:_react2.default.createElement("div",null,_react2.default.createElement(_filter_editor.FilterEditor,{filter:filter,indexPatterns:this.props.indexPatterns,onSubmit:this.onSubmit,onCancel:this.closePopover}))}];return _react2.default.createElement(_eui.EuiPopover,{id:"popoverFor_filter".concat(id),className:"globalFilterItem__popover",anchorClassName:"globalFilterItem__popoverAnchor",isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,button:badge,anchorPosition:"downLeft",withTitle:true,panelPaddingSize:"none"},_react2.default.createElement(_eui.EuiContextMenu,{initialPanelId:0,panels:panelTree}))}}]);return FilterItemUI}(_react2.Component);var FilterItem=(0,_react.injectI18n)(FilterItemUI);exports.FilterItem=FilterItem},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterView=void 0;var _eui=__webpack_require__(23);var _i18n=__webpack_require__(0);var _react=_interopRequireDefault(__webpack_require__(22));var _filter_label=__webpack_require__(176);var _common=__webpack_require__(42);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var FilterView=function FilterView(_ref){var filter=_ref.filter,iconOnClick=_ref.iconOnClick,onClick=_ref.onClick,valueLabel=_ref.valueLabel,rest=_objectWithoutProperties(_ref,["filter","iconOnClick","onClick","valueLabel"]);var _useInnerText=(0,_eui.useInnerText)(),_useInnerText2=_slicedToArray(_useInnerText,2),ref=_useInnerText2[0],innerText=_useInnerText2[1];var title=_i18n.i18n.translate("data.filter.filterBar.moreFilterActionsMessage",{defaultMessage:"Filter: {innerText}. Select for more filter actions.",values:{innerText:innerText}});if((0,_common.isFilterPinned)(filter)){title="".concat(_i18n.i18n.translate("data.filter.filterBar.pinnedFilterPrefix",{defaultMessage:"Pinned"})," ").concat(title)}if(filter.meta.disabled){title="".concat(_i18n.i18n.translate("data.filter.filterBar.disabledFilterPrefix",{defaultMessage:"Disabled"})," ").concat(title)}return _react.default.createElement(_eui.EuiBadge,_extends({title:title,color:"hollow",iconType:"cross",iconSide:"right",closeButtonProps:{tabIndex:-1},iconOnClick:iconOnClick,iconOnClickAriaLabel:_i18n.i18n.translate("data.filter.filterBar.filterItemBadgeIconAriaLabel",{defaultMessage:"Delete"}),onClick:onClick,onClickAriaLabel:_i18n.i18n.translate("data.filter.filterBar.filterItemBadgeAriaLabel",{defaultMessage:"Filter actions"})},rest),_react.default.createElement("span",{ref:ref},_react.default.createElement(_filter_label.FilterLabel,{filter:filter,valueLabel:valueLabel})))};exports.FilterView=FilterView},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FilterOptions=void 0;var _eui=__webpack_require__(23);var _react=__webpack_require__(24);var _react2=_interopRequireWildcard(__webpack_require__(22));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterOptionsUI=function(_Component){_inherits(FilterOptionsUI,_Component);function FilterOptionsUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,FilterOptionsUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(FilterOptionsUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"togglePopover",(function(){_this.setState((function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}}))}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({isPopoverOpen:false})}));return _this}_createClass(FilterOptionsUI,[{key:"render",value:function render(){var _this2=this;var panelTree={id:0,items:[{name:this.props.intl.formatMessage({id:"data.filter.options.enableAllFiltersButtonLabel",defaultMessage:"Enable all"}),icon:"eye",onClick:function onClick(){_this2.closePopover();_this2.props.onEnableAll()},"data-test-subj":"enableAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.disableAllFiltersButtonLabel",defaultMessage:"Disable all"}),icon:"eyeClosed",onClick:function onClick(){_this2.closePopover();_this2.props.onDisableAll()},"data-test-subj":"disableAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.pinAllFiltersButtonLabel",defaultMessage:"Pin all"}),icon:"pin",onClick:function onClick(){_this2.closePopover();_this2.props.onPinAll()},"data-test-subj":"pinAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.unpinAllFiltersButtonLabel",defaultMessage:"Unpin all"}),icon:"pin",onClick:function onClick(){_this2.closePopover();_this2.props.onUnpinAll()},"data-test-subj":"unpinAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.invertNegatedFiltersButtonLabel",defaultMessage:"Invert inclusion"}),icon:"invert",onClick:function onClick(){_this2.closePopover();_this2.props.onToggleAllNegated()},"data-test-subj":"invertInclusionAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.invertDisabledFiltersButtonLabel",defaultMessage:"Invert enabled/disabled"}),icon:"eye",onClick:function onClick(){_this2.closePopover();_this2.props.onToggleAllDisabled()},"data-test-subj":"invertEnableDisableAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.deleteAllFiltersButtonLabel",defaultMessage:"Remove all"}),icon:"trash",onClick:function onClick(){_this2.closePopover();_this2.props.onRemoveAll()},"data-test-subj":"removeAllFilters"}]};return _react2.default.createElement(_eui.EuiPopover,{id:"popoverForAllFilters",className:"globalFilterGroup__allFiltersPopover",isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,button:_react2.default.createElement(_eui.EuiButtonIcon,{onClick:this.togglePopover,iconType:"filter","aria-label":this.props.intl.formatMessage({id:"data.filter.options.changeAllFiltersButtonLabel",defaultMessage:"Change all filters"}),title:this.props.intl.formatMessage({id:"data.filter.options.changeAllFiltersButtonLabel",defaultMessage:"Change all filters"}),"data-test-subj":"showFilterActions"}),anchorPosition:"rightUp",panelPaddingSize:"none",withTitle:true},_react2.default.createElement(_eui.EuiPopoverTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.searchBar.changeAllFiltersTitle",defaultMessage:"Change all filters"})),_react2.default.createElement(_eui.EuiContextMenu,{initialPanelId:0,panels:[panelTree]}))}}]);return FilterOptionsUI}(_react2.Component);var FilterOptions=(0,_react.injectI18n)(FilterOptionsUI);exports.FilterOptions=FilterOptions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _match_pairs=__webpack_require__(478);Object.keys(_match_pairs).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _match_pairs[key]}})}));var _from_user=__webpack_require__(479);Object.keys(_from_user).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _from_user[key]}})}));var _to_user=__webpack_require__(480);Object.keys(_to_user).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _to_user[key]}})}));var _get_query_log=__webpack_require__(481);Object.keys(_get_query_log).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_query_log[key]}})}));var _get_default_query=__webpack_require__(483);Object.keys(_get_default_query).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_default_query[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.matchPairs=matchPairs;var pairs=["()","[]","{}","''",'""'];var openers=pairs.map((function(pair){return pair[0]}));var closers=pairs.map((function(pair){return pair[1]}));function matchPairs(_ref){var value=_ref.value,selectionStart=_ref.selectionStart,selectionEnd=_ref.selectionEnd,key=_ref.key,metaKey=_ref.metaKey,updateQuery=_ref.updateQuery,preventDefault=_ref.preventDefault;if(shouldMoveCursorForward(key,value,selectionStart,selectionEnd)){preventDefault();updateQuery(value,selectionStart+1,selectionEnd+1)}else if(shouldInsertMatchingCloser(key,value,selectionStart,selectionEnd)){preventDefault();var newValue=value.substr(0,selectionStart)+key+value.substring(selectionStart,selectionEnd)+closers[openers.indexOf(key)]+value.substr(selectionEnd);updateQuery(newValue,selectionStart+1,selectionEnd+1)}else if(shouldRemovePair(key,metaKey,value,selectionStart,selectionEnd)){preventDefault();var _newValue=value.substr(0,selectionEnd-1)+value.substr(selectionEnd+1);updateQuery(_newValue,selectionStart-1,selectionEnd-1)}}function shouldMoveCursorForward(key,value,selectionStart,selectionEnd){if(!closers.includes(key)){return false}if(selectionStart!==selectionEnd){return false}return value.charAt(selectionEnd)===key}function shouldInsertMatchingCloser(key,value,selectionStart,selectionEnd){if(!openers.includes(key)){return false}if(selectionStart!==selectionEnd){return true}var precedingCharacter=value.charAt(selectionStart-1);var followingCharacter=value.charAt(selectionStart+1);if(precedingCharacter==="\\"){return false}return!(['"',"'"].includes(key)&&(isAlphanumeric(precedingCharacter)||isAlphanumeric(followingCharacter)))}function shouldRemovePair(key,metaKey,value,selectionStart,selectionEnd){if(key!=="Backspace"||metaKey){return false}if(selectionStart!==selectionEnd){return false}return pairs.includes(value.substr(selectionEnd-1,2))}function isAlphanumeric(){var value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return value.match(/[a-zA-Z0-9_]/)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fromUser=fromUser;var _lodash=_interopRequireDefault(__webpack_require__(41));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function fromUser(userInput){var matchAll="";if(_lodash.default.isEmpty(userInput)){return""}if(_lodash.default.isObject(userInput)){return userInput}userInput=userInput||"";if(typeof userInput==="string"){var trimmedUserInput=userInput.trim();if(trimmedUserInput.length===0){return matchAll}if(trimmedUserInput[0]==="{"){try{return JSON.parse(trimmedUserInput)}catch(e){return userInput}}else{return userInput}}}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.toUser=toUser;function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function toUser(text){if(text==null){return""}if(_typeof(text)==="object"){if(text.match_all){return""}if(text.query_string){return toUser(text.query_string.query)}return JSON.stringify(text)}return""+text}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getQueryLog=getQueryLog;var _persisted_log=__webpack_require__(110);function getQueryLog(uiSettings,storage,appName,language){return new _persisted_log.PersistedLog("typeahead:".concat(appName,"-").concat(language),{maxLength:uiSettings.get("history:limit"),filterDuplicates:true},storage)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PersistedLog=void 0;var _lodash=_interopRequireDefault(__webpack_require__(41));var Rx=_interopRequireWildcard(__webpack_require__(28));var _operators=__webpack_require__(31);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var defaultIsDuplicate=function defaultIsDuplicate(oldItem,newItem){return _lodash.default.isEqual(oldItem,newItem)};var PersistedLog=function(){function PersistedLog(name){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var storage=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,PersistedLog);_defineProperty(this,"name",void 0);_defineProperty(this,"maxLength",void 0);_defineProperty(this,"filterDuplicates",void 0);_defineProperty(this,"isDuplicate",void 0);_defineProperty(this,"storage",void 0);_defineProperty(this,"items",void 0);_defineProperty(this,"update$",new Rx.BehaviorSubject(undefined));this.name=name;this.maxLength=typeof options.maxLength==="string"?this.maxLength=parseInt(options.maxLength,10):options.maxLength;this.filterDuplicates=options.filterDuplicates||false;this.isDuplicate=options.isDuplicate||defaultIsDuplicate;this.storage=storage;this.items=this.storage.get(this.name)||[];if(this.maxLength!==undefined&&!isNaN(this.maxLength)){this.items=_lodash.default.take(this.items,this.maxLength)}}_createClass(PersistedLog,[{key:"add",value:function add(val){var _this=this;if(val==null){return this.items}if(this.filterDuplicates){_lodash.default.remove(this.items,(function(item){return _this.isDuplicate(item,val)}))}this.items.unshift(val);if(this.maxLength&&!isNaN(this.maxLength)){this.items=_lodash.default.take(this.items,this.maxLength)}this.storage.set(this.name,this.items);this.update$.next(undefined);return this.items}},{key:"get",value:function get(){return _lodash.default.cloneDeep(this.items)}},{key:"get$",value:function get$(){var _this2=this;return this.update$.pipe((0,_operators.map)((function(){return _this2.get()})))}}]);return PersistedLog}();exports.PersistedLog=PersistedLog},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultQuery=getDefaultQuery;function getDefaultQuery(){var language=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"kuery";return{query:"",language:language}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QueryService=void 0;var _operators=__webpack_require__(31);var _filter_manager=__webpack_require__(177);var _timefilter=__webpack_require__(111);var _saved_query_service=__webpack_require__(181);var _create_global_query_observable=__webpack_require__(513);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var QueryService=function(){function QueryService(){_classCallCheck(this,QueryService);_defineProperty(this,"filterManager",void 0);_defineProperty(this,"timefilter",void 0);_defineProperty(this,"state$",void 0)}_createClass(QueryService,[{key:"setup",value:function setup(_ref){var uiSettings=_ref.uiSettings,storage=_ref.storage;this.filterManager=new _filter_manager.FilterManager(uiSettings);var timefilterService=new _timefilter.TimefilterService;this.timefilter=timefilterService.setup({uiSettings:uiSettings,storage:storage});this.state$=(0,_create_global_query_observable.createQueryStateObservable)({filterManager:this.filterManager,timefilter:this.timefilter}).pipe((0,_operators.share)());return{filterManager:this.filterManager,timefilter:this.timefilter,state$:this.state$}}},{key:"start",value:function start(savedObjects){return{filterManager:this.filterManager,timefilter:this.timefilter,state$:this.state$,savedQueries:(0,_saved_query_service.createSavedQueryService)(savedObjects.client)}}},{key:"stop",value:function stop(){}}]);return QueryService}();exports.QueryService=QueryService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterManager=void 0;var _lodash=_interopRequireDefault(__webpack_require__(41));var _rxjs=__webpack_require__(28);var _sort_filters=__webpack_require__(486);var _map_and_flatten_filters=__webpack_require__(178);var _only_disabled=__webpack_require__(179);var _common=__webpack_require__(42);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterManager=function(){function FilterManager(uiSettings){_classCallCheck(this,FilterManager);_defineProperty(this,"filters",[]);_defineProperty(this,"updated$",new _rxjs.Subject);_defineProperty(this,"fetch$",new _rxjs.Subject);_defineProperty(this,"uiSettings",void 0);this.uiSettings=uiSettings}_createClass(FilterManager,[{key:"mergeIncomingFilters",value:function mergeIncomingFilters(partitionedFilters){var globalFilters=partitionedFilters.globalFilters;var appFilters=partitionedFilters.appFilters;var cleanedAppFilters=[];_lodash.default.each(appFilters,(function(filter,i){var match=_lodash.default.find(globalFilters,(function(globalFilter){return(0,_common.compareFilters)(globalFilter,filter)}));if(!match){return cleanedAppFilters.push(filter)}_lodash.default.assign(match.meta,filter.meta)}));return FilterManager.mergeFilters(cleanedAppFilters,globalFilters)}},{key:"handleStateUpdate",value:function handleStateUpdate(newFilters){newFilters.sort(_sort_filters.sortFilters);var filtersUpdated=!(0,_common.compareFilters)(this.filters,newFilters,_common.COMPARE_ALL_OPTIONS);var updatedOnlyDisabledFilters=(0,_only_disabled.onlyDisabledFiltersChanged)(newFilters,this.filters);this.filters=newFilters;if(filtersUpdated){this.updated$.next();if(!updatedOnlyDisabledFilters){this.fetch$.next()}}}},{key:"getFilters",value:function getFilters(){return _lodash.default.cloneDeep(this.filters)}},{key:"getAppFilters",value:function getAppFilters(){var _this$getPartitionedF=this.getPartitionedFilters(),appFilters=_this$getPartitionedF.appFilters;return appFilters}},{key:"getGlobalFilters",value:function getGlobalFilters(){var _this$getPartitionedF2=this.getPartitionedFilters(),globalFilters=_this$getPartitionedF2.globalFilters;return globalFilters}},{key:"getPartitionedFilters",value:function getPartitionedFilters(){return FilterManager.partitionFilters(this.getFilters())}},{key:"getUpdates$",value:function getUpdates$(){return this.updated$.asObservable()}},{key:"getFetches$",value:function getFetches$(){return this.fetch$.asObservable()}},{key:"addFilters",value:function addFilters(filters){var _currentFilters$appFi,_currentFilters$globa;var pinFilterStatus=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.uiSettings.get("filters:pinnedByDefault");if(!Array.isArray(filters)){filters=[filters]}if(filters.length===0){return}var store=pinFilterStatus?_common.FilterStateStore.GLOBAL_STATE:_common.FilterStateStore.APP_STATE;FilterManager.setFiltersStore(filters,store);var mappedFilters=(0,_map_and_flatten_filters.mapAndFlattenFilters)(filters);var newPartitionedFilters=FilterManager.partitionFilters(mappedFilters);var currentFilters=this.getPartitionedFilters();(_currentFilters$appFi=currentFilters.appFilters).push.apply(_currentFilters$appFi,_toConsumableArray(newPartitionedFilters.appFilters));(_currentFilters$globa=currentFilters.globalFilters).push.apply(_currentFilters$globa,_toConsumableArray(newPartitionedFilters.globalFilters));var newFilters=this.mergeIncomingFilters(currentFilters);this.handleStateUpdate(newFilters)}},{key:"setFilters",value:function setFilters(newFilters){var pinFilterStatus=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.uiSettings.get("filters:pinnedByDefault");var store=pinFilterStatus?_common.FilterStateStore.GLOBAL_STATE:_common.FilterStateStore.APP_STATE;FilterManager.setFiltersStore(newFilters,store);var mappedFilters=(0,_map_and_flatten_filters.mapAndFlattenFilters)(newFilters);var newPartitionedFilters=FilterManager.partitionFilters(mappedFilters);var mergedFilters=this.mergeIncomingFilters(newPartitionedFilters);this.handleStateUpdate(mergedFilters)}},{key:"setGlobalFilters",value:function setGlobalFilters(newGlobalFilters){newGlobalFilters=(0,_map_and_flatten_filters.mapAndFlattenFilters)(newGlobalFilters);FilterManager.setFiltersStore(newGlobalFilters,_common.FilterStateStore.GLOBAL_STATE,true);var _this$getPartitionedF3=this.getPartitionedFilters(),appFilters=_this$getPartitionedF3.appFilters;var newFilters=this.mergeIncomingFilters({appFilters:appFilters,globalFilters:newGlobalFilters});this.handleStateUpdate(newFilters)}},{key:"setAppFilters",value:function setAppFilters(newAppFilters){newAppFilters=(0,_map_and_flatten_filters.mapAndFlattenFilters)(newAppFilters);FilterManager.setFiltersStore(newAppFilters,_common.FilterStateStore.APP_STATE,true);var _this$getPartitionedF4=this.getPartitionedFilters(),globalFilters=_this$getPartitionedF4.globalFilters;var newFilters=this.mergeIncomingFilters({globalFilters:globalFilters,appFilters:newAppFilters});this.handleStateUpdate(newFilters)}},{key:"removeFilter",value:function removeFilter(filter){var filterIndex=_lodash.default.findIndex(this.filters,(function(item){return _lodash.default.isEqual(item.meta,filter.meta)&&_lodash.default.isEqual(item.query,filter.query)}));if(filterIndex>=0){var newFilters=_lodash.default.cloneDeep(this.filters);newFilters.splice(filterIndex,1);this.handleStateUpdate(newFilters)}}},{key:"removeAll",value:function removeAll(){this.setFilters([])}}],[{key:"mergeFilters",value:function mergeFilters(appFilters,globalFilters){return(0,_common.uniqFilters)(appFilters.reverse().concat(globalFilters.reverse())).reverse()}},{key:"partitionFilters",value:function partitionFilters(filters){var _$partition=_lodash.default.partition(filters,_common.isFilterPinned),_$partition2=_slicedToArray(_$partition,2),globalFilters=_$partition2[0],appFilters=_$partition2[1];return{globalFilters:globalFilters,appFilters:appFilters}}},{key:"setFiltersStore",value:function setFiltersStore(filters,store){var shouldOverrideStore=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_lodash.default.map(filters,(function(filter){if(shouldOverrideStore||filter.$state===undefined){filter.$state={store:store}}}))}}]);return FilterManager}();exports.FilterManager=FilterManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sortFilters=void 0;var _common=__webpack_require__(42);var sortFilters=function sortFilters(_ref,_ref2){var a=_ref.$state;var b=_ref2.$state;if(a.store===b.store){return 0}else{return a.store===_common.FilterStateStore.GLOBAL_STATE&&b.store!==_common.FilterStateStore.GLOBAL_STATE?-1:1}};exports.sortFilters=sortFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapFilter=mapFilter;var _lodash=__webpack_require__(41);var _map_spatial_filter=__webpack_require__(488);var _map_match_all=__webpack_require__(489);var _map_phrase=__webpack_require__(490);var _map_phrases=__webpack_require__(491);var _map_range=__webpack_require__(492);var _map_exists=__webpack_require__(493);var _map_missing=__webpack_require__(494);var _map_query_string=__webpack_require__(495);var _map_geo_bounding_box=__webpack_require__(496);var _map_geo_polygon=__webpack_require__(497);var _map_default=__webpack_require__(498);var _generate_mapping_chain=__webpack_require__(499);function mapFilter(filter){var mappers=[_map_spatial_filter.mapSpatialFilter,_map_match_all.mapMatchAll,_map_range.mapRange,_map_phrase.mapPhrase,_map_phrases.mapPhrases,_map_exists.mapExists,_map_missing.mapMissing,_map_query_string.mapQueryString,_map_geo_bounding_box.mapGeoBoundingBox,_map_geo_polygon.mapGeoPolygon,_map_default.mapDefault];var noop=function noop(){throw new Error("No mappings have been found for filter.")};var mapFn=(0,_lodash.reduceRight)(mappers,(function(memo,map){return(0,_generate_mapping_chain.generateMappingChain)(map,memo)}),noop);var mapped=mapFn(filter);filter.meta=filter.meta||{};filter.meta.type=mapped.type;filter.meta.key=mapped.key;filter.meta.value=mapped.value;filter.meta.params=mapped.params;filter.meta.disabled=Boolean(filter.meta.disabled);filter.meta.negate=Boolean(filter.meta.negate);filter.meta.alias=filter.meta.alias||null;return filter}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapSpatialFilter=void 0;var _common=__webpack_require__(42);var mapSpatialFilter=function mapSpatialFilter(filter){if(filter.meta&&filter.meta.key&&filter.meta.alias&&filter.meta.type===_common.FILTERS.SPATIAL_FILTER){return{key:filter.meta.key,type:filter.meta.type,value:""}}throw filter};exports.mapSpatialFilter=mapSpatialFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapMatchAll=void 0;var _common=__webpack_require__(42);var mapMatchAll=function mapMatchAll(filter){if((0,_common.isMatchAllFilter)(filter)){return{type:_common.FILTERS.MATCH_ALL,key:filter.meta.field,value:filter.meta.formattedValue||"all"}}throw filter};exports.mapMatchAll=mapMatchAll},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapPhrase=exports.isMapPhraseFilter=void 0;var _lodash=__webpack_require__(41);var _common=__webpack_require__(42);var getScriptedPhraseValue=function getScriptedPhraseValue(filter){return(0,_lodash.get)(filter,["script","script","params","value"])};var getFormattedValueFn=function getFormattedValueFn(value){return function(formatter){return formatter?formatter.convert(value):value}};var getParams=function getParams(filter){var scriptedPhraseValue=getScriptedPhraseValue(filter);var isScriptedFilter=Boolean(scriptedPhraseValue);var key=isScriptedFilter?filter.meta.field||"":(0,_common.getPhraseFilterField)(filter);var query=scriptedPhraseValue||(0,_common.getPhraseFilterValue)(filter);var params={query:query};return{key:key,params:params,type:_common.FILTERS.PHRASE,value:getFormattedValueFn(query)}};var isMapPhraseFilter=function isMapPhraseFilter(filter){return(0,_common.isPhraseFilter)(filter)||(0,_common.isScriptedPhraseFilter)(filter)};exports.isMapPhraseFilter=isMapPhraseFilter;var mapPhrase=function mapPhrase(filter){if(!isMapPhraseFilter(filter)){throw filter}return getParams(filter)};exports.mapPhrase=mapPhrase},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapPhrases=void 0;var _common=__webpack_require__(42);var mapPhrases=function mapPhrases(filter){if(!(0,_common.isPhrasesFilter)(filter)){throw filter}var _filter$meta=filter.meta,type=_filter$meta.type,key=_filter$meta.key,value=_filter$meta.value,params=_filter$meta.params;return{type:type,key:key,value:value,params:params}};exports.mapPhrases=mapPhrases},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapRange=exports.isMapRangeFilter=void 0;var _lodash=__webpack_require__(41);var _common=__webpack_require__(42);var getFormattedValueFn=function getFormattedValueFn(left,right){return function(formatter){var displayValue="".concat(left," to ").concat(right);if(formatter){var convert=formatter.getConverterFor("text");displayValue="".concat(convert(left)," to ").concat(convert(right))}return displayValue}};var getFirstRangeKey=function getFirstRangeKey(filter){return filter.range&&Object.keys(filter.range)[0]};var getRangeByKey=function getRangeByKey(filter,key){return(0,_lodash.get)(filter,["range",key])};function getParams(filter){var isScriptedRange=(0,_common.isScriptedRangeFilter)(filter);var key=(isScriptedRange?filter.meta.field:getFirstRangeKey(filter))||"";var params=isScriptedRange?(0,_lodash.get)(filter,"script.script.params"):getRangeByKey(filter,key);var left=(0,_lodash.has)(params,"gte")?params.gte:params.gt;if(left==null)left=-Infinity;var right=(0,_lodash.has)(params,"lte")?params.lte:params.lt;if(right==null)right=Infinity;var value=getFormattedValueFn(left,right);return{type:_common.FILTERS.RANGE,key:key,value:value,params:params}}var isMapRangeFilter=function isMapRangeFilter(filter){return(0,_common.isRangeFilter)(filter)||(0,_common.isScriptedRangeFilter)(filter)};exports.isMapRangeFilter=isMapRangeFilter;var mapRange=function mapRange(filter){if(!isMapRangeFilter(filter)){throw filter}return getParams(filter)};exports.mapRange=mapRange},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapExists=void 0;var _lodash=__webpack_require__(41);var _common=__webpack_require__(42);var mapExists=function mapExists(filter){if((0,_common.isExistsFilter)(filter)){return{type:_common.FILTERS.EXISTS,value:_common.FILTERS.EXISTS,key:(0,_lodash.get)(filter,"exists.field")}}throw filter};exports.mapExists=mapExists},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapMissing=void 0;var _common=__webpack_require__(42);var mapMissing=function mapMissing(filter){if((0,_common.isMissingFilter)(filter)){return{type:_common.FILTERS.MISSING,value:_common.FILTERS.MISSING,key:filter.missing.field}}throw filter};exports.mapMissing=mapMissing},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapQueryString=void 0;var _common=__webpack_require__(42);var mapQueryString=function mapQueryString(filter){if((0,_common.isQueryStringFilter)(filter)){return{type:_common.FILTERS.QUERY_STRING,key:"query",value:filter.query.query_string.query}}throw filter};exports.mapQueryString=mapQueryString},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapGeoBoundingBox=void 0;var _common=__webpack_require__(42);var getFormattedValueFn=function getFormattedValueFn(params){return function(formatter){var corners=formatter?{topLeft:formatter.convert(params.top_left),bottomRight:formatter.convert(params.bottom_right)}:{topLeft:JSON.stringify(params.top_left),bottomRight:JSON.stringify(params.bottom_right)};return corners.topLeft+" to "+corners.bottomRight}};var getParams=function getParams(filter){var key=Object.keys(filter.geo_bounding_box).filter((function(k){return k!=="ignore_unmapped"}))[0];var params=filter.geo_bounding_box[key];return{key:key,params:params,type:_common.FILTERS.GEO_BOUNDING_BOX,value:getFormattedValueFn(params)}};var mapGeoBoundingBox=function mapGeoBoundingBox(filter){if(!(0,_common.isGeoBoundingBoxFilter)(filter)){throw filter}return getParams(filter)};exports.mapGeoBoundingBox=mapGeoBoundingBox},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapGeoPolygon=mapGeoPolygon;var _common=__webpack_require__(42);var POINTS_SEPARATOR=", ";var getFormattedValueFn=function getFormattedValueFn(points){return function(formatter){return points.map((function(point){return formatter?formatter.convert(point):JSON.stringify(point)})).join(POINTS_SEPARATOR)}};function getParams(filter){var key=Object.keys(filter.geo_polygon).filter((function(k){return k!=="ignore_unmapped"}))[0];var params=filter.geo_polygon[key];return{key:key,params:params,type:_common.FILTERS.GEO_POLYGON,value:getFormattedValueFn(params.points||[])}}function mapGeoPolygon(filter){if(!(0,_common.isGeoPolygonFilter)(filter)){throw filter}return getParams(filter)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapDefault=void 0;var _lodash=__webpack_require__(41);var _common=__webpack_require__(42);var mapDefault=function mapDefault(filter){var metaProperty=/(^\$|meta)/;var key=(0,_lodash.find)((0,_lodash.keys)(filter),(function(item){return!item.match(metaProperty)}));if(key){var type=_common.FILTERS.CUSTOM;var value=JSON.stringify((0,_lodash.get)(filter,key,{}));return{type:type,key:key,value:value}}throw filter};exports.mapDefault=mapDefault},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.generateMappingChain=void 0;var noop=function noop(){throw new Error("No mappings have been found for filter.")};var generateMappingChain=function generateMappingChain(fn){var next=arguments.length>1&&arguments[1]!==undefined?arguments[1]:noop;return function(filter){try{return fn(filter)}catch(result){if(result===filter){return next(filter)}throw result}}};exports.generateMappingChain=generateMappingChain},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.generateFilters=generateFilters;var _lodash=_interopRequireDefault(__webpack_require__(41));var _common=__webpack_require__(42);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getExistingFilter(appFilters,fieldName,value){return _lodash.default.find(appFilters,(function(filter){if(!filter)return;if(fieldName==="_exists_"&&(0,_common.isExistsFilter)(filter)){return filter.exists.field===value}if((0,_common.isPhraseFilter)(filter)){return(0,_common.getPhraseFilterField)(filter)===fieldName&&(0,_common.getPhraseFilterValue)(filter)===value}if((0,_common.isScriptedPhraseFilter)(filter)){return filter.meta.field===fieldName&&filter.script.script.params.value===value}}))}function updateExistingFilter(existingFilter,negate){existingFilter.meta.disabled=false;if(existingFilter.meta.negate!==negate){existingFilter.meta.negate=!existingFilter.meta.negate}}function generateFilters(filterManager,field,values,operation,index){values=Array.isArray(values)?values:[values];var fieldObj=_lodash.default.isObject(field)?field:{name:field};var fieldName=fieldObj.name;var newFilters=[];var appFilters=filterManager.getAppFilters();var negate=operation==="-";var filter;_lodash.default.each(values,(function(value){var existing=getExistingFilter(appFilters,fieldName,value);if(existing){updateExistingFilter(existing,negate);filter=existing}else{var tmpIndexPattern={id:index};var filterType=fieldName==="_exists_"?_common.FILTERS.EXISTS:_common.FILTERS.PHRASE;var actualFieldObj=fieldName==="_exists_"?{name:value}:fieldObj;filter=(0,_common.buildFilter)(tmpIndexPattern,actualFieldObj,filterType,negate,false,value,null,_common.FilterStateStore.APP_STATE)}newFilters.push(filter)}));return newFilters}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimefilterService=void 0;var _index=__webpack_require__(111);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var TimefilterService=function(){function TimefilterService(){_classCallCheck(this,TimefilterService)}_createClass(TimefilterService,[{key:"setup",value:function setup(_ref){var uiSettings=_ref.uiSettings,storage=_ref.storage;var timefilterConfig={timeDefaults:uiSettings.get("timepicker:timeDefaults"),refreshIntervalDefaults:uiSettings.get("timepicker:refreshIntervalDefaults")};var history=new _index.TimeHistory(storage);var timefilter=new _index.Timefilter(timefilterConfig,history);return{timefilter:timefilter,history:history}}},{key:"start",value:function start(){}},{key:"stop",value:function stop(){}}]);return TimefilterService}();exports.TimefilterService=TimefilterService},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Timefilter=void 0;var _lodash=_interopRequireDefault(__webpack_require__(41));var _rxjs=__webpack_require__(28);var _moment=_interopRequireDefault(__webpack_require__(27));var _diff_time_picker_vals=__webpack_require__(504);var _parse_querystring=__webpack_require__(505);var _get_time=__webpack_require__(180);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Timefilter=function(){function Timefilter(config,timeHistory){var _this=this;_classCallCheck(this,Timefilter);_defineProperty(this,"enabledUpdated$",new _rxjs.BehaviorSubject(false));_defineProperty(this,"timeUpdate$",new _rxjs.Subject);_defineProperty(this,"refreshIntervalUpdate$",new _rxjs.Subject);_defineProperty(this,"autoRefreshFetch$",new _rxjs.Subject);_defineProperty(this,"fetch$",new _rxjs.Subject);_defineProperty(this,"_time",void 0);_defineProperty(this,"_refreshInterval",void 0);_defineProperty(this,"_history",void 0);_defineProperty(this,"_isTimeRangeSelectorEnabled",false);_defineProperty(this,"_isAutoRefreshSelectorEnabled",false);_defineProperty(this,"_autoRefreshIntervalId",0);_defineProperty(this,"timeDefaults",void 0);_defineProperty(this,"refreshIntervalDefaults",void 0);_defineProperty(this,"getEnabledUpdated$",(function(){return _this.enabledUpdated$.asObservable()}));_defineProperty(this,"getTimeUpdate$",(function(){return _this.timeUpdate$.asObservable()}));_defineProperty(this,"getRefreshIntervalUpdate$",(function(){return _this.refreshIntervalUpdate$.asObservable()}));_defineProperty(this,"getAutoRefreshFetch$",(function(){return _this.autoRefreshFetch$.asObservable()}));_defineProperty(this,"getFetch$",(function(){return _this.fetch$.asObservable()}));_defineProperty(this,"getTime",(function(){var _this$_time=_this._time,from=_this$_time.from,to=_this$_time.to;return _objectSpread({},_this._time,{from:_moment.default.isMoment(from)?from.toISOString():from,to:_moment.default.isMoment(to)?to.toISOString():to})}));_defineProperty(this,"setTime",(function(time){var newTime=Object.assign(_this.getTime(),time);if((0,_diff_time_picker_vals.areTimeRangesDifferent)(_this.getTime(),newTime)){_this._time={from:newTime.from,to:newTime.to};_this._history.add(_this._time);_this.timeUpdate$.next();_this.fetch$.next()}}));_defineProperty(this,"getRefreshInterval",(function(){return _lodash.default.clone(_this._refreshInterval)}));_defineProperty(this,"setRefreshInterval",(function(refreshInterval){var prevRefreshInterval=_this.getRefreshInterval();var newRefreshInterval=_objectSpread({},prevRefreshInterval,{},refreshInterval);if(newRefreshInterval.value<=0){newRefreshInterval.value=0;newRefreshInterval.pause=true}_this._refreshInterval={value:newRefreshInterval.value,pause:newRefreshInterval.pause};if(prevRefreshInterval&&(0,_diff_time_picker_vals.areRefreshIntervalsDifferent)(prevRefreshInterval,newRefreshInterval)){_this.refreshIntervalUpdate$.next();if(!newRefreshInterval.pause&&newRefreshInterval.value!==0){_this.fetch$.next()}}clearInterval(_this._autoRefreshIntervalId);if(!newRefreshInterval.pause){_this._autoRefreshIntervalId=window.setInterval((function(){return _this.autoRefreshFetch$.next()}),newRefreshInterval.value)}}));_defineProperty(this,"createFilter",(function(indexPattern,timeRange){return(0,_get_time.getTime)(indexPattern,timeRange?timeRange:_this._time,_this.getForceNow())}));_defineProperty(this,"enableTimeRangeSelector",(function(){_this._isTimeRangeSelectorEnabled=true;_this.enabledUpdated$.next(true)}));_defineProperty(this,"disableTimeRangeSelector",(function(){_this._isTimeRangeSelectorEnabled=false;_this.enabledUpdated$.next(false)}));_defineProperty(this,"enableAutoRefreshSelector",(function(){_this._isAutoRefreshSelectorEnabled=true;_this.enabledUpdated$.next(true)}));_defineProperty(this,"disableAutoRefreshSelector",(function(){_this._isAutoRefreshSelectorEnabled=false;_this.enabledUpdated$.next(false)}));_defineProperty(this,"getForceNow",(function(){var forceNow=(0,_parse_querystring.parseQueryString)().forceNow;if(!forceNow){return}var ticks=Date.parse(forceNow);if(isNaN(ticks)){throw new Error("forceNow query parameter, ".concat(forceNow,", can't be parsed by Date.parse"))}return new Date(ticks)}));this._history=timeHistory;this.timeDefaults=config.timeDefaults;this.refreshIntervalDefaults=config.refreshIntervalDefaults;this._time=config.timeDefaults;this.setRefreshInterval(config.refreshIntervalDefaults)}_createClass(Timefilter,[{key:"isTimeRangeSelectorEnabled",value:function isTimeRangeSelectorEnabled(){return this._isTimeRangeSelectorEnabled}},{key:"isAutoRefreshSelectorEnabled",value:function isAutoRefreshSelectorEnabled(){return this._isAutoRefreshSelectorEnabled}},{key:"getBounds",value:function getBounds(){return this.calculateBounds(this._time)}},{key:"calculateBounds",value:function calculateBounds(timeRange){return(0,_get_time.calculateBounds)(timeRange,{forceNow:this.getForceNow()})}},{key:"getActiveBounds",value:function getActiveBounds(){if(this.isTimeRangeSelectorEnabled()){return this.getBounds()}}},{key:"getTimeDefaults",value:function getTimeDefaults(){return _lodash.default.cloneDeep(this.timeDefaults)}},{key:"getRefreshIntervalDefaults",value:function getRefreshIntervalDefaults(){return _lodash.default.cloneDeep(this.refreshIntervalDefaults)}}]);return Timefilter}();exports.Timefilter=Timefilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.areRefreshIntervalsDifferent=areRefreshIntervalsDifferent;exports.areTimeRangesDifferent=areTimeRangesDifferent;var _lodash=_interopRequireDefault(__webpack_require__(41));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var valueOf=function valueOf(o){if(o)return o.valueOf()};function areRefreshIntervalsDifferent(rangeA,rangeB){if(_lodash.default.isObject(rangeA)&&_lodash.default.isObject(rangeB)){if(valueOf(rangeA.value)!==valueOf(rangeB.value)||valueOf(rangeA.pause)!==valueOf(rangeB.pause)){return true}}else{return!_lodash.default.isEqual(rangeA,rangeB)}return false}function areTimeRangesDifferent(rangeA,rangeB){if(rangeA&&rangeB&&_lodash.default.isObject(rangeA)&&_lodash.default.isObject(rangeB)){if(valueOf(rangeA.to)!==valueOf(rangeB.to)||valueOf(rangeA.from)!==valueOf(rangeB.from)){return true}}else{return!_lodash.default.isEqual(rangeA,rangeB)}return false}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseQueryString=parseQueryString;var _queryString=__webpack_require__(506);function parseQueryString(){var hrefSplit=window.location.href.split("?");if(hrefSplit.length<=1){return{}}return(0,_queryString.parse)(hrefSplit[1],{sort:false})}},,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeHistory=void 0;var _moment=_interopRequireDefault(__webpack_require__(27));var _persisted_log=__webpack_require__(110);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TimeHistory=function(){function TimeHistory(storage){_classCallCheck(this,TimeHistory);_defineProperty(this,"history",void 0);var historyOptions={maxLength:10,filterDuplicates:true,isDuplicate:function isDuplicate(oldItem,newItem){return oldItem.from===newItem.from&&oldItem.to===newItem.to}};this.history=new _persisted_log.PersistedLog("kibana.timepicker.timeHistory",historyOptions,storage)}_createClass(TimeHistory,[{key:"add",value:function add(time){if(!time||!time.from||!time.to){return}var justStringsTime={from:_moment.default.isMoment(time.from)?time.from.toISOString():time.from,to:_moment.default.isMoment(time.to)?time.to.toISOString():time.to};this.history.add(justStringsTime)}},{key:"get",value:function get(){return this.history.get()}}]);return TimeHistory}();exports.TimeHistory=TimeHistory},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertRangeFilterToTimeRange=convertRangeFilterToTimeRange;exports.changeTimeFilter=changeTimeFilter;var _moment=_interopRequireDefault(__webpack_require__(27));var _lodash=__webpack_require__(41);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function convertRangeFilterToTimeRange(filter){var key=(0,_lodash.keys)(filter.range)[0];var values=filter.range[key];return{from:(0,_moment.default)(values.gt||values.gte),to:(0,_moment.default)(values.lt||values.lte)}}function changeTimeFilter(timeFilter,filter){timeFilter.setTime(convertRangeFilterToTimeRange(filter))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractTimeFilter=extractTimeFilter;var _lodash=__webpack_require__(41);var _common=__webpack_require__(42);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function extractTimeFilter(timeFieldName,filters){var _partition=(0,_lodash.partition)(filters,(function(obj){var key;if((0,_common.isRangeFilter)(obj)){key=(0,_lodash.keys)(obj.range)[0]}return Boolean(key&&key===timeFieldName)})),_partition2=_slicedToArray(_partition,2),timeRangeFilter=_partition2[0],restOfFilters=_partition2[1];return{restOfFilters:restOfFilters,timeRangeFilter:timeRangeFilter[0]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createQueryStateObservable=createQueryStateObservable;var _rxjs=__webpack_require__(28);var _operators=__webpack_require__(31);var _public=__webpack_require__(26);var _common=__webpack_require__(42);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createQueryStateObservable(_ref){var timefilter=_ref.timefilter.timefilter,filterManager=_ref.filterManager;return new _rxjs.Observable((function(subscriber){var state=(0,_public.createStateContainer)({time:timefilter.getTime(),refreshInterval:timefilter.getRefreshInterval(),filters:filterManager.getFilters()});var currentChange={};var subs=[timefilter.getTimeUpdate$().subscribe((function(){currentChange.time=true;state.set(_objectSpread({},state.get(),{time:timefilter.getTime()}))})),timefilter.getRefreshIntervalUpdate$().subscribe((function(){currentChange.refreshInterval=true;state.set(_objectSpread({},state.get(),{refreshInterval:timefilter.getRefreshInterval()}))})),filterManager.getUpdates$().subscribe((function(){currentChange.filters=true;var _state$get=state.get(),filters=_state$get.filters;var globalOld=filters===null||filters===void 0?void 0:filters.filter((function(f){return(0,_common.isFilterPinned)(f)}));var appOld=filters===null||filters===void 0?void 0:filters.filter((function(f){return!(0,_common.isFilterPinned)(f)}));var globalNew=filterManager.getGlobalFilters();var appNew=filterManager.getAppFilters();if(!globalOld||!(0,_common.compareFilters)(globalOld,globalNew,_common.COMPARE_ALL_OPTIONS)){currentChange.globalFilters=true}if(!appOld||!(0,_common.compareFilters)(appOld,appNew,_common.COMPARE_ALL_OPTIONS)){currentChange.appFilters=true}state.set(_objectSpread({},state.get(),{filters:filterManager.getFilters()}))})),state.state$.pipe((0,_operators.map)((function(newState){return{state:newState,changes:currentChange}})),(0,_operators.tap)((function(){currentChange={}}))).subscribe(subscriber)];return function(){subs.forEach((function(s){return s.unsubscribe()}))}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SavedQuery",{enumerable:true,get:function get(){return _types.SavedQuery}});Object.defineProperty(exports,"SavedQueryAttributes",{enumerable:true,get:function get(){return _types.SavedQueryAttributes}});Object.defineProperty(exports,"SavedQueryService",{enumerable:true,get:function get(){return _types.SavedQueryService}});Object.defineProperty(exports,"SavedQueryTimeFilter",{enumerable:true,get:function get(){return _types.SavedQueryTimeFilter}});Object.defineProperty(exports,"createSavedQueryService",{enumerable:true,get:function get(){return _saved_query_service.createSavedQueryService}});var _types=__webpack_require__(515);var _saved_query_service=__webpack_require__(181)},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"connectToQueryState",{enumerable:true,get:function get(){return _connect_to_query_state.connectToQueryState}});Object.defineProperty(exports,"syncQueryStateWithUrl",{enumerable:true,get:function get(){return _sync_state_with_url.syncQueryStateWithUrl}});Object.defineProperty(exports,"QueryState",{enumerable:true,get:function get(){return _types.QueryState}});Object.defineProperty(exports,"QueryStateChange",{enumerable:true,get:function get(){return _types.QueryStateChange}});var _connect_to_query_state=__webpack_require__(182);var _sync_state_with_url=__webpack_require__(517);var _types=__webpack_require__(518)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.syncQueryStateWithUrl=void 0;var _public=__webpack_require__(26);var _connect_to_query_state=__webpack_require__(182);var _filters=__webpack_require__(54);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var GLOBAL_STATE_STORAGE_KEY="_g";var syncQueryStateWithUrl=function syncQueryStateWithUrl(query,kbnUrlStateStorage){var timefilter=query.timefilter.timefilter,filterManager=query.filterManager;var defaultState={time:timefilter.getTime(),refreshInterval:timefilter.getRefreshInterval(),filters:filterManager.getGlobalFilters()};var initialStateFromUrl=kbnUrlStateStorage.get(GLOBAL_STATE_STORAGE_KEY);var hasInheritedQueryFromUrl=Boolean(initialStateFromUrl&&Object.keys(initialStateFromUrl).length);var initialState=_objectSpread({},defaultState,{},initialStateFromUrl);var globalQueryStateContainer=(0,_public.createStateContainer)(initialState);var stopSyncingWithStateContainer=(0,_connect_to_query_state.connectToQueryState)(query,globalQueryStateContainer,{refreshInterval:true,time:true,filters:_filters.FilterStateStore.GLOBAL_STATE});if(!initialStateFromUrl){kbnUrlStateStorage.set(GLOBAL_STATE_STORAGE_KEY,initialState,{replace:true})}globalQueryStateContainer.set(initialState);var _syncState=(0,_public.syncState)({stateStorage:kbnUrlStateStorage,stateContainer:_objectSpread({},globalQueryStateContainer,{set:function set(state){if(state){globalQueryStateContainer.set(state)}}}),storageKey:GLOBAL_STATE_STORAGE_KEY}),start=_syncState.start,stopSyncingWithUrl=_syncState.stop;start();return{stop:function stop(){stopSyncingWithStateContainer();stopSyncingWithUrl()},hasInheritedQueryFromUrl:hasInheritedQueryFromUrl}};exports.syncQueryStateWithUrl=syncQueryStateWithUrl},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldFormatsService=void 0;var _common=__webpack_require__(42);var _deserialize=__webpack_require__(520);var _constants=__webpack_require__(184);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FieldFormatsService=function(){function FieldFormatsService(){_classCallCheck(this,FieldFormatsService);_defineProperty(this,"fieldFormatsRegistry",new _common.FieldFormatsRegistry)}_createClass(FieldFormatsService,[{key:"setup",value:function setup(core){var _this=this;core.uiSettings.getUpdate$().subscribe((function(_ref){var key=_ref.key,newValue=_ref.newValue;if(key==="format:defaultTypeMap"){_this.fieldFormatsRegistry.parseDefaultTypeMap(newValue)}}));var getConfig=core.uiSettings.get.bind(core.uiSettings);this.fieldFormatsRegistry.init(getConfig,{parsedUrl:{origin:window.location.origin,pathname:window.location.pathname,basePath:core.http.basePath.get()}},_constants.baseFormattersPublic);return this.fieldFormatsRegistry}},{key:"start",value:function start(){this.fieldFormatsRegistry.deserialize=_deserialize.deserializeFieldFormat.bind(this.fieldFormatsRegistry);return this.fieldFormatsRegistry}}]);return FieldFormatsService}();exports.FieldFormatsService=FieldFormatsService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.deserializeFieldFormat=void 0;var _lodash=__webpack_require__(41);var _i18n=__webpack_require__(0);var _date_range=__webpack_require__(85);var _ip_range=__webpack_require__(86);var _common=__webpack_require__(42);var _services=__webpack_require__(45);function isTermsFieldFormat(serializedFieldFormat){return serializedFieldFormat.id==="terms"}var getConfig=function getConfig(key,defaultOverride){return(0,_services.getUiSettings)().get(key,defaultOverride)};var DefaultFieldFormat=_common.FieldFormat.from(_lodash.identity);var getFieldFormat=function getFieldFormat(fieldFormatsService,id){var params=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(id){var Format=fieldFormatsService.getType(id);if(Format){return new Format(params,getConfig)}}return new DefaultFieldFormat};var deserializeFieldFormat=function deserializeFieldFormat(mapping){var _this=this;if(!mapping){return new DefaultFieldFormat}var id=mapping.id;if(id==="range"){var RangeFormat=_common.FieldFormat.from((function(range){var nestedFormatter=mapping.params;var format=getFieldFormat(_this,nestedFormatter.id,nestedFormatter.params);var gte="≥";var lt="<";return _i18n.i18n.translate("data.aggTypes.buckets.ranges.rangesFormatMessage",{defaultMessage:"{gte} {from} and {lt} {to}",values:{gte:gte,from:format.convert(range.gte),lt:lt,to:format.convert(range.lt)}})}));return new RangeFormat}else if(id==="date_range"){var nestedFormatter=mapping.params;var DateRangeFormat=_common.FieldFormat.from((function(range){var format=getFieldFormat(_this,nestedFormatter.id,nestedFormatter.params);return(0,_date_range.convertDateRangeToString)(range,format.convert.bind(format))}));return new DateRangeFormat}else if(id==="ip_range"){var _nestedFormatter=mapping.params;var IpRangeFormat=_common.FieldFormat.from((function(range){var format=getFieldFormat(_this,_nestedFormatter.id,_nestedFormatter.params);return(0,_ip_range.convertIPRangeToString)(range,format.convert.bind(format))}));return new IpRangeFormat}else if(isTermsFieldFormat(mapping)&&mapping.params){var params=mapping.params;var convert=function convert(val,type){var format=getFieldFormat(_this,params.id,mapping.params);if(val==="__other__"){return params.otherBucketLabel}if(val==="__missing__"){return params.missingBucketLabel}return format.convert(val,type)};return{convert:convert,getConverterFor:function getConverterFor(type){return function(val){return convert(val,type)}}}}else{return getFieldFormat(this,id,mapping.params)}};exports.deserializeFieldFormat=deserializeFieldFormat},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DateFormat",{enumerable:true,get:function get(){return _date.DateFormat}});var _date=__webpack_require__(185)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTitle=getTitle;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function getTitle(_x,_x2){return _getTitle.apply(this,arguments)}function _getTitle(){_getTitle=_asyncToGenerator(regeneratorRuntime.mark((function _callee(client,indexPatternId){var savedObject;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return client.get("index-pattern",indexPatternId);case 2:savedObject=_context.sent;if(!savedObject.error){_context.next=5;break}throw new Error("Unable to get index-pattern title: ".concat(savedObject.error.message));case 5:return _context.abrupt("return",savedObject.attributes.title);case 6:case"end":return _context.stop()}}}),_callee)})));return _getTitle.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateIndexPattern=validateIndexPattern;var _types=__webpack_require__(186);function indexPatternContainsSpaces(indexPattern){return indexPattern.includes(" ")}function findIllegalCharacters(indexPattern){var illegalCharacters=_types.ILLEGAL_CHARACTERS_VISIBLE.reduce((function(chars,char){if(indexPattern.includes(char)){chars.push(char)}return chars}),[]);return illegalCharacters}function validateIndexPattern(indexPattern){var errors={};var illegalCharacters=findIllegalCharacters(indexPattern);if(illegalCharacters.length){errors[_types.ILLEGAL_CHARACTERS_KEY]=illegalCharacters}if(indexPatternContainsSpaces(indexPattern)){errors[_types.CONTAINS_SPACES_KEY]=true}return errors}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternMissingIndices=void 0;var _public=__webpack_require__(26);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var IndexPatternMissingIndices=function(_KbnError){_inherits(IndexPatternMissingIndices,_KbnError);function IndexPatternMissingIndices(message){_classCallCheck(this,IndexPatternMissingIndices);var defaultMessage="IndexPattern's configured pattern does not match any indices";return _possibleConstructorReturn(this,_getPrototypeOf(IndexPatternMissingIndices).call(this,message&&message.length?"No matching indices found: ".concat(message):defaultMessage))}return IndexPatternMissingIndices}(_public.KbnError);exports.IndexPatternMissingIndices=IndexPatternMissingIndices},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFromSavedObject=getFromSavedObject;var _lodash=__webpack_require__(41);function getFromSavedObject(savedObject){if((0,_lodash.get)(savedObject,"attributes.fields")===undefined){return}return{id:savedObject.id,fields:JSON.parse(savedObject.attributes.fields),title:savedObject.attributes.title}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isDefault=void 0;var isDefault=function isDefault(indexPattern){return!indexPattern.type};exports.isDefault=isDefault},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _flatten_hit=__webpack_require__(188);Object.keys(_flatten_hit).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _flatten_hit[key]}})}));var _format_hit=__webpack_require__(189);Object.keys(_format_hit).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _format_hit[key]}})}));var _index_pattern=__webpack_require__(190);Object.keys(_index_pattern).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_pattern[key]}})}));var _index_patterns=__webpack_require__(531);Object.keys(_index_patterns).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_patterns[key]}})}));var _index_patterns_api_client=__webpack_require__(193);Object.keys(_index_patterns_api_client).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_patterns_api_client[key]}})}));var _types=__webpack_require__(533);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}))},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FieldList=void 0;var _lodash=__webpack_require__(41);var _field=__webpack_require__(192);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FieldList=function(_Array){_inherits(FieldList,_Array);function FieldList(indexPattern){var _this;var specs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var shortDotsEnable=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_classCallCheck(this,FieldList);_this=_possibleConstructorReturn(this,_getPrototypeOf(FieldList).call(this));_defineProperty(_assertThisInitialized(_this),"byName",new Map);_defineProperty(_assertThisInitialized(_this),"groups",new Map);_defineProperty(_assertThisInitialized(_this),"indexPattern",void 0);_defineProperty(_assertThisInitialized(_this),"shortDotsEnable",void 0);_defineProperty(_assertThisInitialized(_this),"setByName",(function(field){return _this.byName.set(field.name,field)}));_defineProperty(_assertThisInitialized(_this),"setByGroup",(function(field){if(typeof _this.groups.get(field.type)==="undefined"){_this.groups.set(field.type,new Map)}_this.groups.get(field.type).set(field.name,field)}));_defineProperty(_assertThisInitialized(_this),"removeByGroup",(function(field){return _this.groups.get(field.type).delete(field.name)}));_defineProperty(_assertThisInitialized(_this),"getByName",(function(name){return _this.byName.get(name)}));_defineProperty(_assertThisInitialized(_this),"getByType",(function(type){return _toConsumableArray((_this.groups.get(type)||new Map).values())}));_defineProperty(_assertThisInitialized(_this),"add",(function(field){var newField=new _field.Field(_this.indexPattern,field,_this.shortDotsEnable);_this.push(newField);_this.setByName(newField);_this.setByGroup(newField)}));_defineProperty(_assertThisInitialized(_this),"remove",(function(field){_this.removeByGroup(field);_this.byName.delete(field.name);var fieldIndex=(0,_lodash.findIndex)(_assertThisInitialized(_this),{name:field.name});_this.splice(fieldIndex,1)}));_defineProperty(_assertThisInitialized(_this),"update",(function(field){var index=_this.findIndex((function(f){return f.name===field.name}));_this.splice(index,1,field);_this.setByName(field);_this.removeByGroup(field);_this.setByGroup(field)}));_this.indexPattern=indexPattern;_this.shortDotsEnable=shortDotsEnable;specs.map((function(field){return _this.add(field)}));return _this}return FieldList}(_wrapNativeSuper(Array));exports.FieldList=FieldList},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ObjDefine=ObjDefine;var _lodash=_interopRequireDefault(__webpack_require__(41));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ObjDefine(defaults,prototype){this.obj;this.descs={};this.defaults=defaults||{};this.prototype=prototype||Object.prototype}ObjDefine.REDEFINE_SUPPORTED=function(){var a=Object.create(Object.prototype,{prop:{configurable:true,value:1}});Object.defineProperty(a,"prop",{configurable:true,value:2});return a.prop===2}();ObjDefine.prototype.writ=function(name,val){this._define(name,val,true,true)};ObjDefine.prototype.fact=function(name,val){this._define(name,val,true)};ObjDefine.prototype.comp=function(name,val){this._define(name,val)};ObjDefine.prototype.create=function(){var self=this;self.obj=Object.create(this.prototype,self.descs);if(!ObjDefine.REDEFINE_SUPPORTED&&!self.prototype.toJSON){self.obj.toJSON=function(){return _lodash.default.transform(self.obj,(function(json,val,key){var desc=self.descs[key];if(desc&&desc.enumerable&&val==null)return;json[key]=val}),{})}}return self.obj};ObjDefine.prototype._define=function(name,val,exported,changeable){val=val!=null?val:this.defaults[name];this.descs[name]=this._describe(name,val,!!exported,!!changeable)};ObjDefine.prototype._describe=function(name,val,exported,changeable){var self=this;var exists=val!=null;if(exported&&ObjDefine.REDEFINE_SUPPORTED){return{enumerable:exists,configurable:true,get:_lodash.default.constant(val),set:function set(update){if(!changeable)return false;self.descs[name]=self._describe(name,update,exported,changeable);Object.defineProperty(self.obj,name,self.descs[name])}}}if(exported&&!ObjDefine.REDEFINE_SUPPORTED){return{enumerable:true,configurable:true,writable:changeable,value:val}}return{enumerable:false,writable:changeable,configurable:true,value:val}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFieldsFetcher=void 0;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var createFieldsFetcher=function createFieldsFetcher(indexPattern,apiClient,metaFields){var fieldFetcher={fetch:function fetch(options){return fieldFetcher.fetchForWildcard(indexPattern.getIndex(),_objectSpread({},options,{type:indexPattern.type,params:indexPattern.typeMeta&&indexPattern.typeMeta.params}))},fetchForWildcard:function fetchForWildcard(pattern){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return apiClient.getFieldsForWildcard({pattern:pattern,metaFields:metaFields,type:options.type,params:options.params||{}})}};return fieldFetcher};exports.createFieldsFetcher=createFieldsFetcher},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternsService=void 0;var _pattern_cache=__webpack_require__(532);var _index_pattern=__webpack_require__(190);var _index_patterns_api_client=__webpack_require__(193);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var indexPatternCache=(0,_pattern_cache.createIndexPatternCache)();var IndexPatternsService=function(){function IndexPatternsService(config,savedObjectsClient,http){var _this=this;_classCallCheck(this,IndexPatternsService);_defineProperty(this,"config",void 0);_defineProperty(this,"savedObjectsClient",void 0);_defineProperty(this,"savedObjectsCache",void 0);_defineProperty(this,"apiClient",void 0);_defineProperty(this,"getIds",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var refresh,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:refresh=_args.length>0&&_args[0]!==undefined?_args[0]:false;if(!(!_this.savedObjectsCache||refresh)){_context.next=4;break}_context.next=4;return _this.refreshSavedObjectsCache();case 4:if(_this.savedObjectsCache){_context.next=6;break}return _context.abrupt("return",[]);case 6:return _context.abrupt("return",_this.savedObjectsCache.map((function(obj){return obj===null||obj===void 0?void 0:obj.id})));case 7:case"end":return _context.stop()}}}),_callee)})));return function(){return _ref.apply(this,arguments)}}());_defineProperty(this,"getTitles",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var refresh,_args2=arguments;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:refresh=_args2.length>0&&_args2[0]!==undefined?_args2[0]:false;if(!(!_this.savedObjectsCache||refresh)){_context2.next=4;break}_context2.next=4;return _this.refreshSavedObjectsCache();case 4:if(_this.savedObjectsCache){_context2.next=6;break}return _context2.abrupt("return",[]);case 6:return _context2.abrupt("return",_this.savedObjectsCache.map((function(obj){var _obj$attributes;return obj===null||obj===void 0?void 0:(_obj$attributes=obj.attributes)===null||_obj$attributes===void 0?void 0:_obj$attributes.title})));case 7:case"end":return _context2.stop()}}}),_callee2)})));return function(){return _ref2.apply(this,arguments)}}());_defineProperty(this,"getFields",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(fields){var refresh,_args3=arguments;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:refresh=_args3.length>1&&_args3[1]!==undefined?_args3[1]:false;if(!(!_this.savedObjectsCache||refresh)){_context3.next=4;break}_context3.next=4;return _this.refreshSavedObjectsCache();case 4:if(_this.savedObjectsCache){_context3.next=6;break}return _context3.abrupt("return",[]);case 6:return _context3.abrupt("return",_this.savedObjectsCache.map((function(obj){var result={};fields.forEach((function(f){var _obj$attributes2;return result[f]=obj[f]||(obj===null||obj===void 0?void 0:(_obj$attributes2=obj.attributes)===null||_obj$attributes2===void 0?void 0:_obj$attributes2[f])}));return result})));case 7:case"end":return _context3.stop()}}}),_callee3)})));return function(_x){return _ref3.apply(this,arguments)}}());_defineProperty(this,"getFieldsForTimePattern",(function(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return _this.apiClient.getFieldsForTimePattern(options)}));_defineProperty(this,"getFieldsForWildcard",(function(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return _this.apiClient.getFieldsForWildcard(options)}));_defineProperty(this,"clearCache",(function(id){_this.savedObjectsCache=null;if(id){indexPatternCache.clear(id)}else{indexPatternCache.clearAll()}}));_defineProperty(this,"getCache",_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(_this.savedObjectsCache){_context4.next=3;break}_context4.next=3;return _this.refreshSavedObjectsCache();case 3:return _context4.abrupt("return",_this.savedObjectsCache);case 4:case"end":return _context4.stop()}}}),_callee4)}))));_defineProperty(this,"getDefault",_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){var defaultIndexPatternId;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:defaultIndexPatternId=_this.config.get("defaultIndex");if(!defaultIndexPatternId){_context5.next=5;break}_context5.next=4;return _this.get(defaultIndexPatternId);case 4:return _context5.abrupt("return",_context5.sent);case 5:return _context5.abrupt("return",null);case 6:case"end":return _context5.stop()}}}),_callee5)}))));_defineProperty(this,"get",function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(id){var cache,indexPattern;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:cache=indexPatternCache.get(id);if(!cache){_context6.next=3;break}return _context6.abrupt("return",cache);case 3:_context6.next=5;return _this.make(id);case 5:indexPattern=_context6.sent;return _context6.abrupt("return",indexPatternCache.set(id,indexPattern));case 7:case"end":return _context6.stop()}}}),_callee6)})));return function(_x2){return _ref6.apply(this,arguments)}}());_defineProperty(this,"make",(function(id){var indexPattern=new _index_pattern.IndexPattern(id,(function(cfg){return _this.config.get(cfg)}),_this.savedObjectsClient,_this.apiClient,indexPatternCache);return indexPattern.init()}));this.apiClient=new _index_patterns_api_client.IndexPatternsApiClient(http);this.config=config;this.savedObjectsClient=savedObjectsClient}_createClass(IndexPatternsService,[{key:"refreshSavedObjectsCache",value:function(){var _refreshSavedObjectsCache=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(){return regeneratorRuntime.wrap((function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.savedObjectsClient.find({type:"index-pattern",fields:["title"],perPage:1e4});case 2:this.savedObjectsCache=_context7.sent.savedObjects;case 3:case"end":return _context7.stop()}}}),_callee7,this)})));function refreshSavedObjectsCache(){return _refreshSavedObjectsCache.apply(this,arguments)}return refreshSavedObjectsCache}()}]);return IndexPatternsService}();exports.IndexPatternsService=IndexPatternsService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createIndexPatternCache=createIndexPatternCache;function createIndexPatternCache(){var vals={};var cache={get:function get(id){return vals[id]},set:function set(id,prom){vals[id]=prom;return prom},clear:function clear(id){delete vals[id]},clearAll:function clearAll(){for(var _id in vals){if(vals.hasOwnProperty(_id)){delete vals[_id]}}}};return cache}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QuerySuggestionTypes=void 0;var QuerySuggestionTypes;exports.QuerySuggestionTypes=QuerySuggestionTypes;(function(QuerySuggestionTypes){QuerySuggestionTypes["Field"]="field";QuerySuggestionTypes["Value"]="value";QuerySuggestionTypes["Operator"]="operator";QuerySuggestionTypes["Conjunction"]="conjunction";QuerySuggestionTypes["RecentSearch"]="recentSearch"})(QuerySuggestionTypes||(exports.QuerySuggestionTypes=QuerySuggestionTypes={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AutocompleteService=void 0;var _value_suggestion_provider=__webpack_require__(536);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AutocompleteService=function(){function AutocompleteService(){var _this=this;_classCallCheck(this,AutocompleteService);_defineProperty(this,"querySuggestionProviders",new Map);_defineProperty(this,"getValueSuggestions",void 0);_defineProperty(this,"addQuerySuggestionProvider",(function(language,provider){if(language&&provider){_this.querySuggestionProviders.set(language,provider)}}));_defineProperty(this,"getQuerySuggestions",(function(args){var language=args.language;var provider=_this.querySuggestionProviders.get(language);if(provider){return provider(args)}}));_defineProperty(this,"hasQuerySuggestions",(function(language){return _this.querySuggestionProviders.has(language)}))}_createClass(AutocompleteService,[{key:"setup",value:function setup(core){this.getValueSuggestions=(0,_value_suggestion_provider.setupValueSuggestionProvider)(core);return{addQuerySuggestionProvider:this.addQuerySuggestionProvider,getQuerySuggestions:this.getQuerySuggestions}}},{key:"start",value:function start(){return{getQuerySuggestions:this.getQuerySuggestions,hasQuerySuggestions:this.hasQuerySuggestions,getValueSuggestions:this.getValueSuggestions}}},{key:"clearProviders",value:function clearProviders(){this.querySuggestionProviders.clear()}}]);return AutocompleteService}();exports.AutocompleteService=AutocompleteService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setupValueSuggestionProvider=void 0;var _lodash=__webpack_require__(41);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function resolver(title,field,query,boolFilter){var ttl=Math.floor(Date.now()/1e3/60);return[ttl,query,title,field.name,JSON.stringify(boolFilter)].join("|")}var setupValueSuggestionProvider=function setupValueSuggestionProvider(core){var requestSuggestions=(0,_lodash.memoize)((function(index,field,query){var boolFilter=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];var signal=arguments.length>4?arguments[4]:undefined;return core.http.fetch("/api/kibana/suggestions/values/".concat(index),{method:"POST",body:JSON.stringify({query:query,field:field.name,boolFilter:boolFilter}),signal:signal})}),resolver);return(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref2){var indexPattern,field,query,boolFilter,signal,shouldSuggestValues,title;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:indexPattern=_ref2.indexPattern,field=_ref2.field,query=_ref2.query,boolFilter=_ref2.boolFilter,signal=_ref2.signal;shouldSuggestValues=core.uiSettings.get("filterEditor:suggestValues");title=indexPattern.title;if(!(field.type==="boolean")){_context.next=7;break}return _context.abrupt("return",[true,false]);case 7:if(!(!shouldSuggestValues||!field.aggregatable||field.type!=="string")){_context.next=9;break}return _context.abrupt("return",[]);case 9:_context.next=11;return requestSuggestions(title,field,query,boolFilter,signal);case 11:return _context.abrupt("return",_context.sent);case 12:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}())};exports.setupValueSuggestionProvider=setupValueSuggestionProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={ISearchSetup:true,ISearchStart:true,ISearchContext:true,TSearchStrategyProvider:true,ISearchStrategy:true,ISearch:true,ISearchOptions:true,IRequestTypesMap:true,IResponseTypesMap:true,ISearchGeneric:true,IEsSearchResponse:true,IEsSearchRequest:true,ES_SEARCH_STRATEGY:true,IKibanaSearchResponse:true,IKibanaSearchRequest:true,ISyncSearchRequest:true,SYNC_SEARCH_STRATEGY:true,esSearchStrategyProvider:true,getEsPreference:true,LegacyApiCaller:true,SearchRequest:true,SearchResponse:true,SearchError:true,SearchStrategyProvider:true,getSearchErrorType:true,ISearchSource:true,SearchSource:true,SearchSourceFields:true,EsQuerySortValue:true,SortDirection:true,SearchInterceptor:true,RequestTimeoutError:true,FetchOptions:true};Object.defineProperty(exports,"ISearchSetup",{enumerable:true,get:function get(){return _types.ISearchSetup}});Object.defineProperty(exports,"ISearchStart",{enumerable:true,get:function get(){return _types.ISearchStart}});Object.defineProperty(exports,"ISearchContext",{enumerable:true,get:function get(){return _types.ISearchContext}});Object.defineProperty(exports,"TSearchStrategyProvider",{enumerable:true,get:function get(){return _types.TSearchStrategyProvider}});Object.defineProperty(exports,"ISearchStrategy",{enumerable:true,get:function get(){return _types.ISearchStrategy}});Object.defineProperty(exports,"ISearch",{enumerable:true,get:function get(){return _i_search.ISearch}});Object.defineProperty(exports,"ISearchOptions",{enumerable:true,get:function get(){return _i_search.ISearchOptions}});Object.defineProperty(exports,"IRequestTypesMap",{enumerable:true,get:function get(){return _i_search.IRequestTypesMap}});Object.defineProperty(exports,"IResponseTypesMap",{enumerable:true,get:function get(){return _i_search.IResponseTypesMap}});Object.defineProperty(exports,"ISearchGeneric",{enumerable:true,get:function get(){return _i_search.ISearchGeneric}});Object.defineProperty(exports,"IEsSearchResponse",{enumerable:true,get:function get(){return _search.IEsSearchResponse}});Object.defineProperty(exports,"IEsSearchRequest",{enumerable:true,get:function get(){return _search.IEsSearchRequest}});Object.defineProperty(exports,"ES_SEARCH_STRATEGY",{enumerable:true,get:function get(){return _search.ES_SEARCH_STRATEGY}});Object.defineProperty(exports,"IKibanaSearchResponse",{enumerable:true,get:function get(){return _search.IKibanaSearchResponse}});Object.defineProperty(exports,"IKibanaSearchRequest",{enumerable:true,get:function get(){return _search.IKibanaSearchRequest}});Object.defineProperty(exports,"ISyncSearchRequest",{enumerable:true,get:function get(){return _sync_search_strategy.ISyncSearchRequest}});Object.defineProperty(exports,"SYNC_SEARCH_STRATEGY",{enumerable:true,get:function get(){return _sync_search_strategy.SYNC_SEARCH_STRATEGY}});Object.defineProperty(exports,"esSearchStrategyProvider",{enumerable:true,get:function get(){return _es_search.esSearchStrategyProvider}});Object.defineProperty(exports,"getEsPreference",{enumerable:true,get:function get(){return _es_search.getEsPreference}});Object.defineProperty(exports,"LegacyApiCaller",{enumerable:true,get:function get(){return _es_client.LegacyApiCaller}});Object.defineProperty(exports,"SearchRequest",{enumerable:true,get:function get(){return _es_client.SearchRequest}});Object.defineProperty(exports,"SearchResponse",{enumerable:true,get:function get(){return _es_client.SearchResponse}});Object.defineProperty(exports,"SearchError",{enumerable:true,get:function get(){return _search_strategy.SearchError}});Object.defineProperty(exports,"SearchStrategyProvider",{enumerable:true,get:function get(){return _search_strategy.SearchStrategyProvider}});Object.defineProperty(exports,"getSearchErrorType",{enumerable:true,get:function get(){return _search_strategy.getSearchErrorType}});Object.defineProperty(exports,"ISearchSource",{enumerable:true,get:function get(){return _search_source.ISearchSource}});Object.defineProperty(exports,"SearchSource",{enumerable:true,get:function get(){return _search_source.SearchSource}});Object.defineProperty(exports,"SearchSourceFields",{enumerable:true,get:function get(){return _search_source.SearchSourceFields}});Object.defineProperty(exports,"EsQuerySortValue",{enumerable:true,get:function get(){return _search_source.EsQuerySortValue}});Object.defineProperty(exports,"SortDirection",{enumerable:true,get:function get(){return _search_source.SortDirection}});Object.defineProperty(exports,"SearchInterceptor",{enumerable:true,get:function get(){return _search_interceptor.SearchInterceptor}});Object.defineProperty(exports,"RequestTimeoutError",{enumerable:true,get:function get(){return _request_timeout_error.RequestTimeoutError}});Object.defineProperty(exports,"FetchOptions",{enumerable:true,get:function get(){return _fetch.FetchOptions}});var _aggs=__webpack_require__(88);Object.keys(_aggs).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _aggs[key]}})}));var _expressions=__webpack_require__(92);Object.keys(_expressions).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _expressions[key]}})}));var _tabify=__webpack_require__(219);Object.keys(_tabify).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _tabify[key]}})}));var _types=__webpack_require__(673);var _i_search=__webpack_require__(674);var _search=__webpack_require__(82);var _sync_search_strategy=__webpack_require__(95);var _es_search=__webpack_require__(675);var _es_client=__webpack_require__(225);var _search_strategy=__webpack_require__(218);var _search_source=__webpack_require__(210);var _search_interceptor=__webpack_require__(226);var _request_timeout_error=__webpack_require__(227);var _fetch=__webpack_require__(212)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggTypeFilters=exports.aggTypeFilters=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggTypeFilters=function(){function AggTypeFilters(){_classCallCheck(this,AggTypeFilters);_defineProperty(this,"filters",new Set)}_createClass(AggTypeFilters,[{key:"addFilter",value:function addFilter(filter){this.filters.add(filter)}},{key:"filter",value:function filter(aggTypes,indexPattern,aggConfig,aggFilter){var allFilters=Array.from(this.filters);var allowedAggTypes=aggTypes.filter((function(aggType){var isAggTypeAllowed=allFilters.every((function(filter){return filter(aggType,indexPattern,aggConfig,aggFilter)}));return isAggTypeAllowed}));return allowedAggTypes}}]);return AggTypeFilters}();exports.AggTypeFilters=AggTypeFilters;var aggTypeFilters=new AggTypeFilters;exports.aggTypeFilters=aggTypeFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.propFilter=propFilter;var _lodash=__webpack_require__(41);function propFilter(prop){return function filterByName(list){var filters=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if((0,_lodash.isFunction)(filters)){return list.filter((function(item){return filters(item[prop])}))}if(!Array.isArray(filters)){filters=filters.split(",")}if(filters.length===0){return list}if(filters.includes("*")){return list}var options=filters.reduce((function(acc,filter){var type="include";var value=filter;if(filter.charAt(0)==="!"){type="exclude";value=filter.substr(1)}if(!acc[type]){acc[type]=[]}acc[type].push(value);return acc}),{});return list.filter((function(item){var value=item[prop];var excluded=options.exclude&&options.exclude.includes(value);if(excluded){return false}var included=!options.include||options.include.includes(value);if(included){return true}return false}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAggTypes=getAggTypes;var _count=__webpack_require__(541);var _avg=__webpack_require__(542);var _sum=__webpack_require__(543);var _median=__webpack_require__(544);var _min=__webpack_require__(545);var _max=__webpack_require__(546);var _top_hit=__webpack_require__(547);var _std_deviation=__webpack_require__(548);var _cardinality=__webpack_require__(549);var _percentiles=__webpack_require__(550);var _geo_bounds=__webpack_require__(552);var _geo_centroid=__webpack_require__(553);var _percentile_ranks=__webpack_require__(554);var _derivative=__webpack_require__(555);var _cumulative_sum=__webpack_require__(557);var _moving_avg=__webpack_require__(558);var _serial_diff=__webpack_require__(559);var _date_histogram=__webpack_require__(202);var _histogram=__webpack_require__(564);var _range=__webpack_require__(566);var _date_range=__webpack_require__(205);var _ip_range=__webpack_require__(206);var _terms=__webpack_require__(208);var _filter=__webpack_require__(654);var _filters=__webpack_require__(655);var _significant_terms=__webpack_require__(659);var _geo_hash=__webpack_require__(660);var _geo_tile=__webpack_require__(661);var _bucket_sum=__webpack_require__(662);var _bucket_avg=__webpack_require__(664);var _bucket_min=__webpack_require__(665);var _bucket_max=__webpack_require__(666);function getAggTypes(deps){var uiSettings=deps.uiSettings;return{metrics:[_count.countMetricAgg,_avg.avgMetricAgg,_sum.sumMetricAgg,_median.medianMetricAgg,_min.minMetricAgg,_max.maxMetricAgg,_std_deviation.stdDeviationMetricAgg,_cardinality.cardinalityMetricAgg,_percentiles.percentilesMetricAgg,_percentile_ranks.percentileRanksMetricAgg,_top_hit.topHitMetricAgg,_derivative.derivativeMetricAgg,_cumulative_sum.cumulativeSumMetricAgg,_moving_avg.movingAvgMetricAgg,_serial_diff.serialDiffMetricAgg,_bucket_avg.bucketAvgMetricAgg,_bucket_sum.bucketSumMetricAgg,_bucket_min.bucketMinMetricAgg,_bucket_max.bucketMaxMetricAgg,_geo_bounds.geoBoundsMetricAgg,_geo_centroid.geoCentroidMetricAgg],buckets:[_date_histogram.dateHistogramBucketAgg,_histogram.histogramBucketAgg,_range.rangeBucketAgg,_date_range.dateRangeBucketAgg,_ip_range.ipRangeBucketAgg,_terms.termsBucketAgg,_filter.filterBucketAgg,(0,_filters.getFiltersBucketAgg)({uiSettings:uiSettings}),_significant_terms.significantTermsBucketAgg,_geo_hash.geoHashBucketAgg,_geo_tile.geoTileBucketAgg]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.countMetricAgg=void 0;var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _metric_agg_types=__webpack_require__(46);var _common=__webpack_require__(42);var _services=__webpack_require__(45);var countMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.COUNT,title:_i18n.i18n.translate("data.search.aggs.metrics.countTitle",{defaultMessage:"Count"}),hasNoDsl:true,makeLabel:function makeLabel(){return _i18n.i18n.translate("data.search.aggs.metrics.countLabel",{defaultMessage:"Count"})},getFormat:function getFormat(){var fieldFormatsService=(0,_services.getFieldFormats)();return fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.NUMBER)},getValue:function getValue(agg,bucket){return bucket.doc_count},isScalable:function isScalable(){return true}});exports.countMetricAgg=countMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.avgMetricAgg=void 0;var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _metric_agg_types=__webpack_require__(46);var _common=__webpack_require__(42);var averageTitle=_i18n.i18n.translate("data.search.aggs.metrics.averageTitle",{defaultMessage:"Average"});var avgMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.AVG,title:averageTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.metrics.averageLabel",{defaultMessage:"Average {field}",values:{field:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.NUMBER}]});exports.avgMetricAgg=avgMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sumMetricAgg=void 0;var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _metric_agg_types=__webpack_require__(46);var _common=__webpack_require__(42);var sumTitle=_i18n.i18n.translate("data.search.aggs.metrics.sumTitle",{defaultMessage:"Sum"});var sumMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.SUM,title:sumTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.metrics.sumLabel",{defaultMessage:"Sum of {field}",values:{field:aggConfig.getFieldDisplayName()}})},isScalable:function isScalable(){return true},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.NUMBER}]});exports.sumMetricAgg=sumMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.medianMetricAgg=void 0;var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _metric_agg_types=__webpack_require__(46);var _common=__webpack_require__(42);var medianTitle=_i18n.i18n.translate("data.search.aggs.metrics.medianTitle",{defaultMessage:"Median"});var medianMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.MEDIAN,dslName:"percentiles",title:medianTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.metrics.medianLabel",{defaultMessage:"Median {field}",values:{field:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.DATE,_common.KBN_FIELD_TYPES.HISTOGRAM],write:function write(agg,output){output.params.field=agg.getParam("field").name;output.params.percents=[50]}}],getValue:function getValue(agg,bucket){return bucket[agg.id].values["50.0"]}});exports.medianMetricAgg=medianMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.minMetricAgg=void 0;var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _metric_agg_types=__webpack_require__(46);var _common=__webpack_require__(42);var minTitle=_i18n.i18n.translate("data.search.aggs.metrics.minTitle",{defaultMessage:"Min"});var minMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.MIN,title:minTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.metrics.minLabel",{defaultMessage:"Min {field}",values:{field:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.DATE]}]});exports.minMetricAgg=minMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.maxMetricAgg=void 0;var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _metric_agg_types=__webpack_require__(46);var _common=__webpack_require__(42);var maxTitle=_i18n.i18n.translate("data.search.aggs.metrics.maxTitle",{defaultMessage:"Max"});var maxMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.MAX,title:maxTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.metrics.maxLabel",{defaultMessage:"Max {field}",values:{field:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.DATE]}]});exports.maxMetricAgg=maxMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.topHitMetricAgg=void 0;var _lodash=_interopRequireDefault(__webpack_require__(41));var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _metric_agg_types=__webpack_require__(46);var _common=__webpack_require__(42);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var isNumericFieldSelected=function isNumericFieldSelected(agg){var field=agg.getParam("field");return field&&field.type&&field.type===_common.KBN_FIELD_TYPES.NUMBER};var topHitMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.TOP_HITS,title:_i18n.i18n.translate("data.search.aggs.metrics.topHitTitle",{defaultMessage:"Top Hit"}),makeLabel:function makeLabel(aggConfig){var lastPrefixLabel=_i18n.i18n.translate("data.search.aggs.metrics.topHit.lastPrefixLabel",{defaultMessage:"Last"});var firstPrefixLabel=_i18n.i18n.translate("data.search.aggs.metrics.topHit.firstPrefixLabel",{defaultMessage:"First"});var prefix=aggConfig.getParam("sortOrder").value==="desc"?lastPrefixLabel:firstPrefixLabel;var size=aggConfig.getParam("size");if(size!==1){prefix+=" ".concat(size)}var field=aggConfig.getParam("field");return"".concat(prefix," ").concat(field?field.displayName:"")},params:[{name:"field",type:"field",onlyAggregatable:false,filterFieldTypes:Object.values(_common.KBN_FIELD_TYPES).filter((function(type){return type!==_common.KBN_FIELD_TYPES.HISTOGRAM})),write:function write(agg,output){var field=agg.getParam("field");output.params={};if(field.scripted){output.params.script_fields=_defineProperty({},field.name,{script:{source:field.script,lang:field.lang}})}else{if(field.readFromDocValues){var format=field.type===_common.KBN_FIELD_TYPES.DATE?"date_time":"use_field_mapping";output.params.docvalue_fields=[{field:field.name,format:format}]}output.params._source=field.name==="_source"?true:field.name}}},{name:"aggregate",type:"optioned",options:[{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.minLabel",{defaultMessage:"Min"}),isCompatible:isNumericFieldSelected,disabled:true,value:"min"},{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.maxLabel",{defaultMessage:"Max"}),isCompatible:isNumericFieldSelected,disabled:true,value:"max"},{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.sumLabel",{defaultMessage:"Sum"}),isCompatible:isNumericFieldSelected,disabled:true,value:"sum"},{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.averageLabel",{defaultMessage:"Average"}),isCompatible:isNumericFieldSelected,disabled:true,value:"average"},{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.concatenateLabel",{defaultMessage:"Concatenate"}),isCompatible:function isCompatible(aggConfig){return _lodash.default.get(aggConfig.params,"field.filterFieldTypes","*")==="*"},disabled:true,value:"concat"}],write:_lodash.default.noop},{name:"size",default:1},{name:"sortField",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.DATE,_common.KBN_FIELD_TYPES.IP,_common.KBN_FIELD_TYPES.STRING],default:function _default(agg){return agg.getIndexPattern().timeFieldName},write:_lodash.default.noop},{name:"sortOrder",type:"optioned",default:"desc",options:[{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.descendingLabel",{defaultMessage:"Descending"}),value:"desc"},{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.ascendingLabel",{defaultMessage:"Ascending"}),value:"asc"}],write:function write(agg,output){var sortField=agg.params.sortField;var sortOrder=agg.params.sortOrder;if(sortField.scripted){output.params.sort=[{_script:{script:{source:sortField.script,lang:sortField.lang},type:sortField.type,order:sortOrder.value}}]}else{output.params.sort=[_defineProperty({},sortField.name,{order:sortOrder.value})]}}}],getValue:function getValue(agg,bucket){var hits=_lodash.default.get(bucket,"".concat(agg.id,".hits.hits"));if(!hits||!hits.length){return null}var path=agg.getParam("field").name;var values=_lodash.default.flatten(hits.map((function(hit){return path==="_source"?hit._source:agg.getIndexPattern().flattenHit(hit,true)[path]})));if(values.length===1){values=values[0]}if(Array.isArray(values)){if(!_lodash.default.compact(values).length){return null}var aggregate=agg.getParam("aggregate");switch(aggregate.value){case"max":return _lodash.default.max(values);case"min":return _lodash.default.min(values);case"sum":return _lodash.default.sum(values);case"average":return _lodash.default.sum(values)/values.length}}return values}});exports.topHitMetricAgg=topHitMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.stdDeviationMetricAgg=void 0;var _lodash=__webpack_require__(41);var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _metric_agg_types=__webpack_require__(46);var _get_response_agg_config_class=__webpack_require__(116);var _common=__webpack_require__(42);var responseAggConfigProps={valProp:function valProp(){var customLabel=this.getParam("customLabel");var details=this.keyedDetails(customLabel)[this.key];return details.valProp},makeLabel:function makeLabel(){var fieldDisplayName=this.getFieldDisplayName();var customLabel=this.getParam("customLabel");var details=this.keyedDetails(customLabel,fieldDisplayName);return(0,_lodash.get)(details,[this.key,"title"])},keyedDetails:function keyedDetails(customLabel,fieldDisplayName){var label=customLabel||_i18n.i18n.translate("data.search.aggs.metrics.standardDeviation.keyDetailsLabel",{defaultMessage:"Standard Deviation of {fieldDisplayName}",values:{fieldDisplayName:fieldDisplayName}});return{std_lower:{valProp:["std_deviation_bounds","lower"],title:_i18n.i18n.translate("data.search.aggs.metrics.standardDeviation.lowerKeyDetailsTitle",{defaultMessage:"Lower {label}",values:{label:label}})},std_upper:{valProp:["std_deviation_bounds","upper"],title:_i18n.i18n.translate("data.search.aggs.metrics.standardDeviation.upperKeyDetailsTitle",{defaultMessage:"Upper {label}",values:{label:label}})}}}};var stdDeviationMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.STD_DEV,dslName:"extended_stats",title:_i18n.i18n.translate("data.search.aggs.metrics.standardDeviationTitle",{defaultMessage:"Standard Deviation"}),makeLabel:function makeLabel(agg){return _i18n.i18n.translate("data.search.aggs.metrics.standardDeviationLabel",{defaultMessage:"Standard Deviation of {field}",values:{field:agg.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.NUMBER}],getResponseAggs:function getResponseAggs(agg){var ValueAggConfig=(0,_get_response_agg_config_class.getResponseAggConfigClass)(agg,responseAggConfigProps);return[new ValueAggConfig("std_lower"),new ValueAggConfig("std_upper")]},getValue:function getValue(agg,bucket){return(0,_lodash.get)(bucket[agg.parentId],agg.valProp())}});exports.stdDeviationMetricAgg=stdDeviationMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.cardinalityMetricAgg=void 0;var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _metric_agg_types=__webpack_require__(46);var _common=__webpack_require__(42);var _services=__webpack_require__(45);var uniqueCountTitle=_i18n.i18n.translate("data.search.aggs.metrics.uniqueCountTitle",{defaultMessage:"Unique Count"});var cardinalityMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.CARDINALITY,title:uniqueCountTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.metrics.uniqueCountLabel",{defaultMessage:"Unique count of {field}",values:{field:aggConfig.getFieldDisplayName()}})},getFormat:function getFormat(){var fieldFormatsService=(0,_services.getFieldFormats)();return fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.NUMBER)},params:[{name:"field",type:"field",filterFieldTypes:Object.values(_common.KBN_FIELD_TYPES).filter((function(type){return type!==_common.KBN_FIELD_TYPES.HISTOGRAM}))}]});exports.cardinalityMetricAgg=cardinalityMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.percentilesMetricAgg=void 0;var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _metric_agg_types=__webpack_require__(46);var _common=__webpack_require__(42);var _get_response_agg_config_class=__webpack_require__(116);var _percentiles_get_value=__webpack_require__(200);var _ordinal_suffix=__webpack_require__(551);var valueProps={makeLabel:function makeLabel(){var customLabel=this.getParam("customLabel");var label=customLabel||this.getFieldDisplayName();return _i18n.i18n.translate("data.search.aggs.metrics.percentiles.valuePropsLabel",{defaultMessage:"{percentile} percentile of {label}",values:{percentile:(0,_ordinal_suffix.ordinalSuffix)(this.key),label:label}})}};var percentilesMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.PERCENTILES,title:_i18n.i18n.translate("data.search.aggs.metrics.percentilesTitle",{defaultMessage:"Percentiles"}),makeLabel:function makeLabel(agg){return _i18n.i18n.translate("data.search.aggs.metrics.percentilesLabel",{defaultMessage:"Percentiles of {field}",values:{field:agg.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.DATE,_common.KBN_FIELD_TYPES.HISTOGRAM]},{name:"percents",default:[1,5,25,50,75,95,99]},{write:function write(agg,output){output.params.keyed=false}}],getResponseAggs:function getResponseAggs(agg){var ValueAggConfig=(0,_get_response_agg_config_class.getResponseAggConfigClass)(agg,valueProps);return agg.getParam("percents").map((function(percent){return new ValueAggConfig(percent)}))},getValue:_percentiles_get_value.getPercentileValue});exports.percentilesMetricAgg=percentilesMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ordinalSuffix=ordinalSuffix;function ordinalSuffix(num){return num+""+suffix(num)}function suffix(num){var int=Math.floor(parseFloat(num));var hunth=int%100;if(hunth>=11&&hunth<=13)return"th";var tenth=int%10;if(tenth===1)return"st";if(tenth===2)return"nd";if(tenth===3)return"rd";return"th"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoBoundsMetricAgg=void 0;var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _metric_agg_types=__webpack_require__(46);var _common=__webpack_require__(42);var geoBoundsTitle=_i18n.i18n.translate("data.search.aggs.metrics.geoBoundsTitle",{defaultMessage:"Geo Bounds"});var geoBoundsLabel=_i18n.i18n.translate("data.search.aggs.metrics.geoBoundsLabel",{defaultMessage:"Geo Bounds"});var geoBoundsMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.GEO_BOUNDS,title:geoBoundsTitle,makeLabel:function makeLabel(){return geoBoundsLabel},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.GEO_POINT}]});exports.geoBoundsMetricAgg=geoBoundsMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoCentroidMetricAgg=void 0;var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _metric_agg_types=__webpack_require__(46);var _common=__webpack_require__(42);var geoCentroidTitle=_i18n.i18n.translate("data.search.aggs.metrics.geoCentroidTitle",{defaultMessage:"Geo Centroid"});var geoCentroidLabel=_i18n.i18n.translate("data.search.aggs.metrics.geoCentroidLabel",{defaultMessage:"Geo Centroid"});var geoCentroidMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.GEO_CENTROID,title:geoCentroidTitle,makeLabel:function makeLabel(){return geoCentroidLabel},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.GEO_POINT}],getValue:function getValue(agg,bucket){return bucket[agg.id]&&bucket[agg.id].location}});exports.geoCentroidMetricAgg=geoCentroidMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.percentileRanksMetricAgg=void 0;var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _get_response_agg_config_class=__webpack_require__(116);var _percentiles_get_value=__webpack_require__(200);var _metric_agg_types=__webpack_require__(46);var _common=__webpack_require__(42);var _services=__webpack_require__(45);var valueProps={makeLabel:function makeLabel(){var fieldFormatsService=(0,_services.getFieldFormats)();var field=this.getField();var format=field&&field.format||fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.NUMBER);var customLabel=this.getParam("customLabel");var label=customLabel||this.getFieldDisplayName();return _i18n.i18n.translate("data.search.aggs.metrics.percentileRanks.valuePropsLabel",{defaultMessage:'Percentile rank {format} of "{label}"',values:{format:format.convert(this.key,"text"),label:label}})}};var percentileRanksMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.PERCENTILE_RANKS,title:_i18n.i18n.translate("data.search.aggs.metrics.percentileRanksTitle",{defaultMessage:"Percentile Ranks"}),makeLabel:function makeLabel(agg){return _i18n.i18n.translate("data.search.aggs.metrics.percentileRanksLabel",{defaultMessage:"Percentile ranks of {field}",values:{field:agg.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.HISTOGRAM]},{name:"values",default:[]},{write:function write(agg,output){output.params.keyed=false}}],getResponseAggs:function getResponseAggs(agg){var ValueAggConfig=(0,_get_response_agg_config_class.getResponseAggConfigClass)(agg,valueProps);var values=agg.getParam("values");return values.map((function(value){return new ValueAggConfig(value)}))},getFormat:function getFormat(){var fieldFormatsService=(0,_services.getFieldFormats)();return fieldFormatsService.getInstance(_common.FIELD_FORMAT_IDS.PERCENT)||fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.NUMBER)},getValue:function getValue(agg,bucket){return(0,_percentiles_get_value.getPercentileValue)(agg,bucket)/100}});exports.percentileRanksMetricAgg=percentileRanksMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.derivativeMetricAgg=void 0;var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _parent_pipeline_agg_helper=__webpack_require__(75);var _make_nested_label=__webpack_require__(63);var _metric_agg_types=__webpack_require__(46);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var derivativeLabel=_i18n.i18n.translate("data.search.aggs.metrics.derivativeLabel",{defaultMessage:"derivative"});var derivativeTitle=_i18n.i18n.translate("data.search.aggs.metrics.derivativeTitle",{defaultMessage:"Derivative"});var derivativeMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.DERIVATIVE,title:derivativeTitle,subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,derivativeLabel)},params:_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params()),getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat});exports.derivativeMetricAgg=derivativeMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parentPipelineAggWriter=void 0;var parentPipelineAggWriter=function parentPipelineAggWriter(agg,output,aggConfigs){var customMetric=agg.getParam("customMetric");var metricAgg=agg.getParam("metricAgg");var selectedMetric=customMetric||aggConfigs&&aggConfigs.getResponseAggById(metricAgg);if(customMetric&&customMetric.type.name!=="count"){output.parentAggs=(output.parentAggs||[]).concat(selectedMetric)}output.params={buckets_path:selectedMetric.type.name==="count"?"_count":selectedMetric.id}};exports.parentPipelineAggWriter=parentPipelineAggWriter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.cumulativeSumMetricAgg=void 0;var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _parent_pipeline_agg_helper=__webpack_require__(75);var _make_nested_label=__webpack_require__(63);var _metric_agg_types=__webpack_require__(46);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var cumulativeSumLabel=_i18n.i18n.translate("data.search.aggs.metrics.cumulativeSumLabel",{defaultMessage:"cumulative sum"});var cumulativeSumTitle=_i18n.i18n.translate("data.search.aggs.metrics.cumulativeSumTitle",{defaultMessage:"Cumulative Sum"});var cumulativeSumMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.CUMULATIVE_SUM,title:cumulativeSumTitle,subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,cumulativeSumLabel)},params:_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params()),getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat});exports.cumulativeSumMetricAgg=cumulativeSumMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.movingAvgMetricAgg=void 0;var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _parent_pipeline_agg_helper=__webpack_require__(75);var _make_nested_label=__webpack_require__(63);var _metric_agg_types=__webpack_require__(46);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var movingAvgTitle=_i18n.i18n.translate("data.search.aggs.metrics.movingAvgTitle",{defaultMessage:"Moving Avg"});var movingAvgLabel=_i18n.i18n.translate("data.search.aggs.metrics.movingAvgLabel",{defaultMessage:"moving avg"});var movingAvgMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.MOVING_FN,dslName:"moving_fn",title:movingAvgTitle,subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,movingAvgLabel)},params:[].concat(_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params()),[{name:"window",default:5},{name:"script",default:"MovingFunctions.unweightedAvg(values)"}]),getValue:function getValue(agg,bucket){return bucket[agg.id]?bucket[agg.id].value:null},getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat});exports.movingAvgMetricAgg=movingAvgMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.serialDiffMetricAgg=void 0;var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _parent_pipeline_agg_helper=__webpack_require__(75);var _make_nested_label=__webpack_require__(63);var _metric_agg_types=__webpack_require__(46);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var serialDiffTitle=_i18n.i18n.translate("data.search.aggs.metrics.serialDiffTitle",{defaultMessage:"Serial Diff"});var serialDiffLabel=_i18n.i18n.translate("data.search.aggs.metrics.serialDiffLabel",{defaultMessage:"serial diff"});var serialDiffMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.SERIAL_DIFF,title:serialDiffTitle,subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,serialDiffLabel)},params:_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params()),getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat});exports.serialDiffMetricAgg=serialDiffMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeBuckets=void 0;var _lodash=_interopRequireDefault(__webpack_require__(41));var _moment=_interopRequireDefault(__webpack_require__(27));var _common=__webpack_require__(42);var _calc_auto_interval=__webpack_require__(561);var _calc_es_interval=__webpack_require__(562);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function isObject(o){return _lodash.default.isObject(o)}function isString(s){return _lodash.default.isString(s)}function isValidMoment(m){return m&&"isValid"in m&&m.isValid()}var TimeBuckets=function(){_createClass(TimeBuckets,null,[{key:"__cached__",value:function __cached__(self){var cache={};var sameMoment=same(_moment.default.isMoment);var sameDuration=same(_moment.default.isDuration);var desc={__cached__:{value:self}};var breakers={setBounds:"bounds",clearBounds:"bounds",setInterval:"interval"};var resources={bounds:{setup:function setup(){return[self._lb,self._ub]},changes:function changes(prev){return!sameMoment(prev[0],self._lb)||!sameMoment(prev[1],self._ub)}},interval:{setup:function setup(){return self._i},changes:function changes(prev){return!sameDuration(prev,self._i)}}};function cachedGetter(prop){return{value:function value(){if(cache.hasOwnProperty(prop)){return cache[prop]}return cache[prop]=self[prop].apply(self,arguments)}}}function cacheBreaker(prop){var resource=resources[breakers[prop]];var setup=resource.setup;var changes=resource.changes;var fn=self[prop];return{value:function value(){var prev=setup.call(self);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var ret=fn.apply.apply(fn,[self].concat(args));if(changes.call(self,prev)){cache={}}return ret}}}function same(checkType){return function(a,b){if(a===b)return true;if(checkType(a)===checkType(b))return+a===+b;return false}}_lodash.default.forOwn(TimeBuckets.prototype,(function(fn,prop){if(!prop||prop[0]==="_")return;if(breakers.hasOwnProperty(prop)){desc[prop]=cacheBreaker(prop)}else{desc[prop]=cachedGetter(prop)}}));return Object.create(self,desc)}}]);function TimeBuckets(_ref){var uiSettings=_ref.uiSettings;_classCallCheck(this,TimeBuckets);_defineProperty(this,"getConfig",void 0);_defineProperty(this,"_lb",null);_defineProperty(this,"_ub",null);_defineProperty(this,"_originalInterval",null);_defineProperty(this,"_i",void 0);this.getConfig=function(key){return uiSettings.get(key)};return TimeBuckets.__cached__(this)}_createClass(TimeBuckets,[{key:"getDuration",value:function getDuration(){if(this._ub===null||this._lb===null||!this.hasBounds()){return}var difference=this._ub-this._lb;return _moment.default.duration(difference,"ms")}},{key:"setBounds",value:function setBounds(input){if(!input)return this.clearBounds();var bounds;if(_lodash.default.isPlainObject(input)&&!Array.isArray(input)){bounds=[input.min,input.max]}else{bounds=Array.isArray(input)?input:[]}var moments=(0,_lodash.default)(bounds).map(_lodash.default.ary(_moment.default,1)).sortBy(Number);var valid=moments.size()===2&&moments.every(isValidMoment);if(!valid){this.clearBounds();throw new Error("invalid bounds set: "+input)}this._lb=moments.shift();this._ub=moments.pop();var duration=this.getDuration();if(!duration||duration.asSeconds()<0){throw new TypeError("Intervals must be positive")}}},{key:"clearBounds",value:function clearBounds(){this._lb=this._ub=null}},{key:"hasBounds",value:function hasBounds(){return isValidMoment(this._ub)&&isValidMoment(this._lb)}},{key:"getBounds",value:function getBounds(){if(!this.hasBounds())return;return{min:this._lb,max:this._ub}}},{key:"setInterval",value:function setInterval(input){var interval=input;if(isObject(input)&&!_moment.default.isDuration(input)){interval=input.val}if(!interval||interval==="auto"){this._i="auto";return}if(isString(interval)){input=interval;this._originalInterval=input;interval=(0,_common.parseInterval)(interval);if(interval===null||+interval===0){interval=null}}if(!_moment.default.isDuration(interval)){throw new TypeError('"'+input+'" is not a valid interval.')}this._i=interval}},{key:"getInterval",value:function getInterval(){var _this=this;var useNormalizedEsInterval=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var duration=this.getDuration();var readInterval=function readInterval(){var interval=_this._i;if(_moment.default.isDuration(interval))return interval;return(0,_calc_auto_interval.calcAutoIntervalNear)(_this.getConfig("histogram:barTarget"),Number(duration))};var parsedInterval=readInterval();var maybeScaleInterval=function maybeScaleInterval(interval){if(!_this.hasBounds()||!duration){return interval}var maxLength=_this.getConfig("histogram:maxBars");var approxLen=Number(duration)/Number(interval);var scaled;if(approxLen>maxLength){scaled=(0,_calc_auto_interval.calcAutoIntervalLessThan)(maxLength,Number(duration))}else{return interval}if(+scaled===+interval)return interval;interval=decorateInterval(interval);return Object.assign(scaled,{preScaled:interval,scale:Number(interval)/Number(scaled),scaled:true})};var decorateInterval=function decorateInterval(interval){var esInterval=useNormalizedEsInterval?(0,_calc_es_interval.convertDurationToNormalizedEsInterval)(interval):(0,_calc_es_interval.convertIntervalToEsInterval)(String(_this._originalInterval));var prettyUnits=_moment.default.normalizeUnits(esInterval.unit);return Object.assign(interval,{description:esInterval.value===1?prettyUnits:esInterval.value+" "+prettyUnits+"s",esValue:esInterval.value,esUnit:esInterval.unit,expression:esInterval.expression,overflow:Number(duration)>Number(interval)?_moment.default.duration(Number(interval)-Number(duration)):false})};if(useNormalizedEsInterval){return decorateInterval(maybeScaleInterval(parsedInterval))}else{return decorateInterval(parsedInterval)}}},{key:"getScaledDateFormat",value:function getScaledDateFormat(){var interval=this.getInterval();var rules=this.getConfig("dateFormat:scaled");for(var i=rules.length-1;i>=0;i--){var rule=rules[i];if(!rule[0]||interval&&interval>=_moment.default.duration(rule[0])){return rule[1]}}return this.getConfig("dateFormat")}}]);return TimeBuckets}();exports.TimeBuckets=TimeBuckets},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calcAutoIntervalNear=calcAutoIntervalNear;exports.calcAutoIntervalLessThan=calcAutoIntervalLessThan;var _moment=_interopRequireDefault(__webpack_require__(27));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var boundsDescending=[{bound:Infinity,interval:Number(_moment.default.duration(1,"year"))},{bound:Number(_moment.default.duration(1,"year")),interval:Number(_moment.default.duration(1,"month"))},{bound:Number(_moment.default.duration(3,"week")),interval:Number(_moment.default.duration(1,"week"))},{bound:Number(_moment.default.duration(1,"week")),interval:Number(_moment.default.duration(1,"d"))},{bound:Number(_moment.default.duration(24,"hour")),interval:Number(_moment.default.duration(12,"hour"))},{bound:Number(_moment.default.duration(6,"hour")),interval:Number(_moment.default.duration(3,"hour"))},{bound:Number(_moment.default.duration(2,"hour")),interval:Number(_moment.default.duration(1,"hour"))},{bound:Number(_moment.default.duration(45,"minute")),interval:Number(_moment.default.duration(30,"minute"))},{bound:Number(_moment.default.duration(20,"minute")),interval:Number(_moment.default.duration(10,"minute"))},{bound:Number(_moment.default.duration(9,"minute")),interval:Number(_moment.default.duration(5,"minute"))},{bound:Number(_moment.default.duration(3,"minute")),interval:Number(_moment.default.duration(1,"minute"))},{bound:Number(_moment.default.duration(45,"second")),interval:Number(_moment.default.duration(30,"second"))},{bound:Number(_moment.default.duration(15,"second")),interval:Number(_moment.default.duration(10,"second"))},{bound:Number(_moment.default.duration(7.5,"second")),interval:Number(_moment.default.duration(5,"second"))},{bound:Number(_moment.default.duration(5,"second")),interval:Number(_moment.default.duration(1,"second"))},{bound:Number(_moment.default.duration(500,"ms")),interval:Number(_moment.default.duration(100,"ms"))}];function getPerBucketMs(count,duration){var ms=duration/count;return isFinite(ms)?ms:NaN}function normalizeMinimumInterval(targetMs){var value=isNaN(targetMs)?0:Math.max(Math.floor(targetMs),1);return _moment.default.duration(value)}function calcAutoIntervalNear(targetBucketCount,duration){var targetPerBucketMs=getPerBucketMs(targetBucketCount,duration);var lowerBoundIndex=boundsDescending.findIndex((function(_ref){var bound=_ref.bound;var boundMs=Number(bound);return boundMs<=targetPerBucketMs}));if(lowerBoundIndex!==-1){var nearestInterval=boundsDescending[lowerBoundIndex-1].interval;return _moment.default.duration(nearestInterval)}return normalizeMinimumInterval(targetPerBucketMs)}function calcAutoIntervalLessThan(maxBucketCount,duration){var maxPerBucketMs=getPerBucketMs(maxBucketCount,duration);for(var _i=0,_boundsDescending=boundsDescending;_i<_boundsDescending.length;_i++){var interval=_boundsDescending[_i].interval;if(interval<=maxPerBucketMs){return _moment.default.duration(interval)}}return normalizeMinimumInterval(maxPerBucketMs)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertDurationToNormalizedEsInterval=convertDurationToNormalizedEsInterval;exports.convertIntervalToEsInterval=convertIntervalToEsInterval;var _datemath=_interopRequireDefault(__webpack_require__(61));var _common=__webpack_require__(42);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var unitsDesc=_datemath.default.unitsDesc;var largeMax=unitsDesc.indexOf("M");function convertDurationToNormalizedEsInterval(duration){for(var i=0;i<unitsDesc.length;i++){var unit=unitsDesc[i];var val=duration.as(unit);if(val>=1&&Math.floor(val)===val){if(i<=largeMax&&val!==1){continue}return{value:val,unit:unit,expression:val+unit}}}var ms=duration.as("ms");return{value:ms,unit:"ms",expression:ms+"ms"}}function convertIntervalToEsInterval(interval){var _parseEsInterval=(0,_common.parseEsInterval)(interval),value=_parseEsInterval.value,unit=_parseEsInterval.unit;return{value:value,unit:unit,expression:interval}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterDateHistogram=void 0;var _moment=_interopRequireDefault(__webpack_require__(27));var _common=__webpack_require__(42);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var createFilterDateHistogram=function createFilterDateHistogram(agg,key){var start=(0,_moment.default)(key);var interval=agg.buckets.getInterval();return(0,_common.buildRangeFilter)(agg.params.field,{gte:start.toISOString(),lt:start.add(interval).toISOString(),format:"strict_date_optional_time"},agg.getIndexPattern())};exports.createFilterDateHistogram=createFilterDateHistogram},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.histogramBucketAgg=void 0;var _lodash=_interopRequireDefault(__webpack_require__(41));var _i18n=__webpack_require__(0);var _bucket_agg_type=__webpack_require__(55);var _histogram=__webpack_require__(565);var _bucket_agg_types=__webpack_require__(52);var _common=__webpack_require__(42);var _services=__webpack_require__(45);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var histogramBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.HISTOGRAM,title:_i18n.i18n.translate("data.search.aggs.buckets.histogramTitle",{defaultMessage:"Histogram"}),ordered:{},makeLabel:function makeLabel(aggConfig){return aggConfig.getFieldDisplayName()},createFilter:_histogram.createFilterHistogram,decorateAggConfig:function decorateAggConfig(){var autoBounds;return{setAutoBounds:{configurable:true,value:function value(newValue){autoBounds=newValue}},getAutoBounds:{configurable:true,value:function value(){return autoBounds}}}},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.NUMBER},{name:"intervalBase",default:null,write:function write(){}},{name:"interval",modifyAggConfigOnSearchRequestStart:function modifyAggConfigOnSearchRequestStart(aggConfig,searchSource,options){var field=aggConfig.getField();var aggBody=field.scripted?{script:{source:field.script,lang:field.lang}}:{field:field.name};var childSearchSource=searchSource.createChild().setField("size",0).setField("aggs",{maxAgg:{max:aggBody},minAgg:{min:aggBody}});return childSearchSource.fetch(options).then((function(resp){aggConfig.setAutoBounds({min:_lodash.default.get(resp,"aggregations.minAgg.value"),max:_lodash.default.get(resp,"aggregations.maxAgg.value")})})).catch((function(e){if(e.name==="AbortError")return;(0,_services.getNotifications)().toasts.addWarning(_i18n.i18n.translate("data.search.aggs.histogram.missingMaxMinValuesWarning",{defaultMessage:"Unable to retrieve max and min values to auto-scale histogram buckets. This may lead to poor visualization performance."}))}))},write:function write(aggConfig,output){var interval=parseFloat(aggConfig.params.interval);if(interval<=0){interval=1}var autoBounds=aggConfig.getAutoBounds();if(autoBounds){var range=autoBounds.max-autoBounds.min;var bars=range/interval;var config=(0,_services.getUiSettings)();if(bars>config.get("histogram:maxBars")){var minInterval=range/config.get("histogram:maxBars");var orderOfMagnitude=Math.pow(10,Math.floor(Math.log10(minInterval)));var roundInterval=orderOfMagnitude;while(roundInterval<minInterval){roundInterval+=orderOfMagnitude}interval=roundInterval}}var base=aggConfig.params.intervalBase;if(base){if(interval<base){interval=base}else if(interval%base!==0){interval=Math.round(interval/base)*base}}output.params.interval=interval}},{name:"min_doc_count",default:false,write:function write(aggConfig,output){if(aggConfig.params.min_doc_count){output.params.min_doc_count=0}else{output.params.min_doc_count=1}}},{name:"has_extended_bounds",default:false,write:function write(){}},{name:"extended_bounds",default:{min:"",max:""},write:function write(aggConfig,output){var _aggConfig$params$ext=aggConfig.params.extended_bounds,min=_aggConfig$params$ext.min,max=_aggConfig$params$ext.max;if(aggConfig.params.has_extended_bounds&&(min||min===0)&&(max||max===0)){output.params.extended_bounds={min:min,max:max}}},shouldShow:function shouldShow(aggConfig){return aggConfig.params.has_extended_bounds}}]});exports.histogramBucketAgg=histogramBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterHistogram=void 0;var _common=__webpack_require__(42);var createFilterHistogram=function createFilterHistogram(aggConfig,key){var value=parseInt(key,10);var params={gte:value,lt:value+aggConfig.params.interval};return(0,_common.buildRangeFilter)(aggConfig.params.field,params,aggConfig.getIndexPattern(),aggConfig.fieldFormatter()(key))};exports.createFilterHistogram=createFilterHistogram},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.rangeBucketAgg=void 0;var _i18n=__webpack_require__(0);var _bucket_agg_type=__webpack_require__(55);var _common=__webpack_require__(42);var _range_key=__webpack_require__(567);var _range=__webpack_require__(568);var _bucket_agg_types=__webpack_require__(52);var keyCaches=new WeakMap;var formats=new WeakMap;var rangeTitle=_i18n.i18n.translate("data.search.aggs.buckets.rangeTitle",{defaultMessage:"Range"});var rangeBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.RANGE,title:rangeTitle,createFilter:_range.createFilterRange,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.aggTypesLabel",{defaultMessage:"{fieldName} ranges",values:{fieldName:aggConfig.getFieldDisplayName()}})},getKey:function getKey(bucket,key,agg){var keys=keyCaches.get(agg);if(!keys){keys=new Map;keyCaches.set(agg,keys)}var id=_range_key.RangeKey.idBucket(bucket);key=keys.get(id);if(!key){key=new _range_key.RangeKey(bucket);keys.set(id,key)}return key},getFormat:function getFormat(agg){var aggFormat=formats.get(agg);if(aggFormat)return aggFormat;var RangeFormat=_common.FieldFormat.from((function(range){var format=agg.fieldOwnFormatter();var gte="≥";var lt="<";return _i18n.i18n.translate("data.search.aggs.aggTypes.rangesFormatMessage",{defaultMessage:"{gte} {from} and {lt} {to}",values:{gte:gte,from:format(range.gte),lt:lt,to:format(range.lt)}})}));aggFormat=new RangeFormat;formats.set(agg,aggFormat);return aggFormat},params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER]},{name:"ranges",default:[{from:0,to:1e3},{from:1e3,to:2e3}],write:function write(aggConfig,output){output.params.ranges=aggConfig.params.ranges;output.params.keyed=true}}]});exports.rangeBucketAgg=rangeBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RangeKey=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var id=Symbol("id");var RangeKey=function(){function RangeKey(bucket){_classCallCheck(this,RangeKey);_defineProperty(this,id,void 0);_defineProperty(this,"gte",void 0);_defineProperty(this,"lt",void 0);this.gte=bucket.from==null?-Infinity:bucket.from;this.lt=bucket.to==null?+Infinity:bucket.to;this[id]=RangeKey.idBucket(bucket)}_createClass(RangeKey,[{key:"toString",value:function toString(){return this[id]}}],[{key:"idBucket",value:function idBucket(bucket){return"from:".concat(bucket.from,",to:").concat(bucket.to)}}]);return RangeKey}();exports.RangeKey=RangeKey},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterRange=void 0;var _common=__webpack_require__(42);var createFilterRange=function createFilterRange(aggConfig,params){return(0,_common.buildRangeFilter)(aggConfig.params.field,params,aggConfig.getIndexPattern(),aggConfig.fieldFormatter()(params))};exports.createFilterRange=createFilterRange},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterDateRange=void 0;var _moment=_interopRequireDefault(__webpack_require__(27));var _common=__webpack_require__(42);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var createFilterDateRange=function createFilterDateRange(agg,_ref){var from=_ref.from,to=_ref.to;var filter={};if(from)filter.gte=(0,_moment.default)(from).toISOString();if(to)filter.lt=(0,_moment.default)(to).toISOString();if(to&&from)filter.format="strict_date_optional_time";return(0,_common.buildRangeFilter)(agg.params.field,filter,agg.getIndexPattern())};exports.createFilterDateRange=createFilterDateRange},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterIpRange=void 0;var _cidr_mask=__webpack_require__(207);var _common=__webpack_require__(42);var createFilterIpRange=function createFilterIpRange(aggConfig,key){var range;if(key.type==="mask"){range=new _cidr_mask.CidrMask(key.mask).getRange()}else{range={from:key.from?key.from:-Infinity,to:key.to?key.to:Infinity}}return(0,_common.buildRangeFilter)(aggConfig.params.field,{gte:range.from,lte:range.to},aggConfig.getIndexPattern())};exports.createFilterIpRange=createFilterIpRange},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.esaggs=void 0;var _lodash=__webpack_require__(41);var _i18n=__webpack_require__(0);var _public=__webpack_require__(26);var _search_source=__webpack_require__(210);var _tabify=__webpack_require__(219);var _common=__webpack_require__(42);var _query=__webpack_require__(67);var _services=__webpack_require__(45);var _build_tabular_inspector_data=__webpack_require__(613);var _utils=__webpack_require__(121);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var name="esaggs";var handleCourierRequest=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref2){var searchSource,aggs,timeRange,query,filters,forceFetch,partialRows,metricsAtAllLevels,inspectorAdapters,filterManager,abortSignal,timeFilterSearchSource,requestSearchSource,reqBody,queryHash,shouldQuery,request,response,resp,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,agg,parsedTimeRange,tabifyParams,tabifyCacheHash,shouldCalculateNewTabify;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:searchSource=_ref2.searchSource,aggs=_ref2.aggs,timeRange=_ref2.timeRange,query=_ref2.query,filters=_ref2.filters,forceFetch=_ref2.forceFetch,partialRows=_ref2.partialRows,metricsAtAllLevels=_ref2.metricsAtAllLevels,inspectorAdapters=_ref2.inspectorAdapters,filterManager=_ref2.filterManager,abortSignal=_ref2.abortSignal;timeFilterSearchSource=searchSource.createChild({callParentStartHandlers:true});requestSearchSource=timeFilterSearchSource.createChild({callParentStartHandlers:true});aggs.setTimeRange(timeRange);Object.defineProperty(requestSearchSource,"history",{get:function get(){return searchSource.history},set:function set(history){return searchSource.history=history}});requestSearchSource.setField("aggs",(function(){return aggs.toDsl(metricsAtAllLevels)}));requestSearchSource.onRequestStart((function(paramSearchSource,options){return aggs.onSearchRequestStart(paramSearchSource,options)}));if(timeRange){timeFilterSearchSource.setField("filter",(function(){return(0,_query.getTime)(searchSource.getField("index"),timeRange)}))}requestSearchSource.setField("filter",filters);requestSearchSource.setField("query",query);_context.next=12;return requestSearchSource.getSearchRequestBody();case 12:reqBody=_context.sent;queryHash=(0,_public.calculateObjectHash)(reqBody);shouldQuery=forceFetch||searchSource.lastQuery!==queryHash;if(!shouldQuery){_context.next=35;break}inspectorAdapters.requests.reset();request=inspectorAdapters.requests.start(_i18n.i18n.translate("data.functions.esaggs.inspector.dataRequest.title",{defaultMessage:"Data"}),{description:_i18n.i18n.translate("data.functions.esaggs.inspector.dataRequest.description",{defaultMessage:"This request queries Elasticsearch to fetch the data for the visualization."})});request.stats((0,_utils.getRequestInspectorStats)(requestSearchSource));_context.prev=19;_context.next=22;return requestSearchSource.fetch({abortSignal:abortSignal});case 22:response=_context.sent;searchSource.lastQuery=queryHash;request.stats((0,_utils.getResponseInspectorStats)(searchSource,response)).ok({json:response});searchSource.rawResponse=response;_context.next=32;break;case 28:_context.prev=28;_context.t0=_context["catch"](19);request.error({json:_context.t0});throw _context.t0;case 32:_context.prev=32;requestSearchSource.getSearchRequestBody().then((function(req){request.json(req)}));return _context.finish(32);case 35:resp=searchSource.rawResponse;_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=39;_iterator=aggs.aggs[Symbol.iterator]();case 41:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context.next=50;break}agg=_step.value;if(!(0,_lodash.has)(agg,"type.postFlightRequest")){_context.next=47;break}_context.next=46;return agg.type.postFlightRequest(resp,aggs,agg,requestSearchSource,inspectorAdapters,abortSignal);case 46:resp=_context.sent;case 47:_iteratorNormalCompletion=true;_context.next=41;break;case 50:_context.next=56;break;case 52:_context.prev=52;_context.t1=_context["catch"](39);_didIteratorError=true;_iteratorError=_context.t1;case 56:_context.prev=56;_context.prev=57;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}case 59:_context.prev=59;if(!_didIteratorError){_context.next=62;break}throw _iteratorError;case 62:return _context.finish(59);case 63:return _context.finish(56);case 64:searchSource.finalResponse=resp;parsedTimeRange=timeRange?(0,_query.getTime)(aggs.indexPattern,timeRange):null;tabifyParams={metricsAtAllLevels:metricsAtAllLevels,partialRows:partialRows,timeRange:parsedTimeRange?parsedTimeRange.range:undefined};tabifyCacheHash=(0,_public.calculateObjectHash)(_objectSpread({tabifyAggs:aggs},tabifyParams));shouldCalculateNewTabify=shouldQuery||searchSource.lastTabifyHash!==tabifyCacheHash;if(shouldCalculateNewTabify){searchSource.lastTabifyHash=tabifyCacheHash;searchSource.tabifiedResponse=(0,_tabify.tabifyAggResponse)(aggs,searchSource.finalResponse,tabifyParams)}inspectorAdapters.data.setTabularLoader((function(){return(0,_build_tabular_inspector_data.buildTabularInspectorData)(searchSource.tabifiedResponse,filterManager)}),{returnsFormattedValues:true});return _context.abrupt("return",searchSource.tabifiedResponse);case 72:case"end":return _context.stop()}}}),_callee,null,[[19,28,32,35],[39,52,56,64],[57,,59,63]])})));return function handleCourierRequest(_x){return _ref.apply(this,arguments)}}();var esaggs=function esaggs(){return{name:name,type:"kibana_datatable",inputTypes:["kibana_context","null"],help:_i18n.i18n.translate("data.functions.esaggs.help",{defaultMessage:"Run AggConfig aggregation"}),args:{index:{types:["string"],help:""},metricsAtAllLevels:{types:["boolean"],default:false,help:""},partialRows:{types:["boolean"],default:false,help:""},includeFormatHints:{types:["boolean"],default:false,help:""},aggConfigs:{types:["string"],default:'""',help:""}},fn:function fn(input,args,_ref3){var inspectorAdapters=_ref3.inspectorAdapters,abortSignal=_ref3.abortSignal;return _asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var indexPatterns,_getQueryService,filterManager,searchService,aggConfigsState,indexPattern,aggs,searchSource,response,table;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:indexPatterns=(0,_services.getIndexPatterns)();_getQueryService=(0,_services.getQueryService)(),filterManager=_getQueryService.filterManager;searchService=(0,_services.getSearchService)();aggConfigsState=JSON.parse(args.aggConfigs);_context2.next=6;return indexPatterns.get(args.index);case 6:indexPattern=_context2.sent;aggs=searchService.aggs.createAggConfigs(indexPattern,aggConfigsState);searchSource=new _search_source.SearchSource;searchSource.setField("index",indexPattern);searchSource.setField("size",0);_context2.next=13;return handleCourierRequest({searchSource:searchSource,aggs:aggs,timeRange:(0,_lodash.get)(input,"timeRange",undefined),query:(0,_lodash.get)(input,"query",undefined),filters:(0,_lodash.get)(input,"filters",undefined),forceFetch:true,metricsAtAllLevels:args.metricsAtAllLevels,partialRows:args.partialRows,inspectorAdapters:inspectorAdapters,filterManager:filterManager,abortSignal:abortSignal});case 13:response=_context2.sent;table={type:"kibana_datatable",rows:response.rows,columns:response.columns.map((function(column){var cleanedColumn={id:column.id,name:column.name,meta:(0,_utils.serializeAggConfig)(column.aggConfig)};if(args.includeFormatHints){cleanedColumn.formatHint=(0,_common.serializeFieldFormat)(column.aggConfig)}return cleanedColumn}))};return _context2.abrupt("return",table);case 16:case"end":return _context2.stop()}}}),_callee2)})))()}}};exports.esaggs=esaggs},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.normalizeSortRequest=normalizeSortRequest;function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function normalizeSortRequest(sortObject,indexPattern){var defaultSortOptions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var sortArray=Array.isArray(sortObject)?sortObject:[sortObject];return sortArray.map((function(sortable){return normalize(sortable,indexPattern,defaultSortOptions)}))}function normalize(sortable,indexPattern,defaultSortOptions){var _Object$entries=Object.entries(sortable),_Object$entries2=_slicedToArray(_Object$entries,1),_Object$entries2$=_slicedToArray(_Object$entries2[0],2),sortField=_Object$entries2$[0],sortOrder=_Object$entries2$[1];var order=_typeof(sortOrder)==="object"?sortOrder:{order:sortOrder};if(indexPattern&&typeof indexPattern!=="string"){var indexField=indexPattern.fields.find((function(_ref){var name=_ref.name;return name===sortField}));if(indexField&&indexField.scripted&&indexField.sortable){return{_script:_objectSpread({script:{source:indexField.script,lang:indexField.lang},type:castSortType(indexField.type)},order)}}}var unmapped_type=defaultSortOptions.unmapped_type,otherSortOptions=_objectWithoutProperties(defaultSortOptions,["unmapped_type"]);return _defineProperty({},sortField,_objectSpread({},order,{},sortField==="_score"?otherSortOptions:defaultSortOptions))}function castSortType(type){if(["number","string"].includes(type)){return"number"}else if(["string","boolean"].includes(type)){return"string"}throw new Error("Unsupported script sort type: ".concat(type))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterDocvalueFields=filterDocvalueFields;function filterDocvalueFields(docvalueFields,fields){return docvalueFields.filter((function(docValue){var docvalueFieldName=typeof docValue==="string"?docValue:docValue.field;return fields.includes(docvalueFieldName)}))}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchSoon=fetchSoon;var _call_client=__webpack_require__(576);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function fetchSoon(_x,_x2,_x3){return _fetchSoon.apply(this,arguments)}function _fetchSoon(){_fetchSoon=_asyncToGenerator(regeneratorRuntime.mark((function _callee(request,options,fetchHandlers){var msToDelay;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:msToDelay=fetchHandlers.config.get("courier:batchSearches")?50:0;return _context.abrupt("return",delayedFetch(request,options,fetchHandlers,msToDelay));case 2:case"end":return _context.stop()}}}),_callee)})));return _fetchSoon.apply(this,arguments)}function delay(fn,ms){return new Promise((function(resolve){setTimeout((function(){return resolve(fn())}),ms)}))}var requestsToFetch=[];var requestOptions=[];var fetchInProgress=null;function delayedFetch(_x4,_x5,_x6,_x7){return _delayedFetch.apply(this,arguments)}function _delayedFetch(){_delayedFetch=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(request,options,fetchHandlers,ms){var i,responses;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(ms===0)){_context2.next=2;break}return _context2.abrupt("return",(0,_call_client.callClient)([request],[options],fetchHandlers)[0]);case 2:i=requestsToFetch.length;requestsToFetch=[].concat(_toConsumableArray(requestsToFetch),[request]);requestOptions=[].concat(_toConsumableArray(requestOptions),[options]);_context2.next=7;return fetchInProgress=fetchInProgress||delay((function(){var response=(0,_call_client.callClient)(requestsToFetch,requestOptions,fetchHandlers);requestsToFetch=[];requestOptions=[];fetchInProgress=null;return response}),ms);case 7:responses=_context2.sent;return _context2.abrupt("return",responses[i]);case 9:case"end":return _context2.stop()}}}),_callee2)})));return _delayedFetch.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.callClient=callClient;var _handle_response=__webpack_require__(577);var _search_strategy=__webpack_require__(218);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function callClient(searchRequests){var requestsOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var fetchHandlers=arguments.length>2?arguments[2]:undefined;var requestOptionEntries=searchRequests.map((function(request,i){return[request,requestsOptions[i]]}));var requestOptionsMap=new Map(requestOptionEntries);var requestResponseMap=new Map;var _defaultSearchStrateg=_search_strategy.defaultSearchStrategy.search(_objectSpread({searchRequests:searchRequests},fetchHandlers)),searching=_defaultSearchStrateg.searching,abort=_defaultSearchStrateg.abort;searchRequests.forEach((function(request,i){var response=searching.then((function(results){return(0,_handle_response.handleResponse)(request,results[i])}));var _ref=requestOptionsMap.get(request)||{},_ref$abortSignal=_ref.abortSignal,abortSignal=_ref$abortSignal===void 0?null:_ref$abortSignal;if(abortSignal)abortSignal.addEventListener("abort",abort);requestResponseMap.set(request,response)}));return searchRequests.map((function(request){return requestResponseMap.get(request)}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.handleResponse=handleResponse;var _react=_interopRequireDefault(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _ui=__webpack_require__(93);var _public=__webpack_require__(25);var _services=__webpack_require__(45);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function handleResponse(request,response){if(response.timed_out){(0,_services.getNotifications)().toasts.addWarning({title:_i18n.i18n.translate("data.search.searchSource.fetch.requestTimedOutNotificationMessage",{defaultMessage:"Data might be incomplete because your request timed out"})})}if(response._shards&&response._shards.failed){var title=_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedNotificationMessage",{defaultMessage:"{shardsFailed} of {shardsTotal} shards failed",values:{shardsFailed:response._shards.failed,shardsTotal:response._shards.total}});var description=_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedNotificationDescription",{defaultMessage:"The data you are seeing might be incomplete or wrong."});var text=(0,_public.toMountPoint)(_react.default.createElement(_react.default.Fragment,null,description,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_ui.ShardFailureOpenModalButton,{request:request.body,response:response,title:title})));(0,_services.getNotifications)().toasts.addWarning({title:title,text:text})}return response}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SuggestionsComponent",{enumerable:true,get:function get(){return _suggestions_component.SuggestionsComponent}});var _suggestions_component=__webpack_require__(579)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SuggestionsComponent=void 0;var _lodash=__webpack_require__(41);var _react=_interopRequireWildcard(__webpack_require__(22));var _suggestion_component=__webpack_require__(580);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SuggestionsComponent=function(_Component){_inherits(SuggestionsComponent,_Component);function SuggestionsComponent(){var _getPrototypeOf2;var _this;_classCallCheck(this,SuggestionsComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SuggestionsComponent)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"childNodes",[]);_defineProperty(_assertThisInitialized(_this),"parentNode",null);_defineProperty(_assertThisInitialized(_this),"scrollIntoView",(function(){if(_this.props.index===null){return}var parent=_this.parentNode;var child=_this.childNodes[_this.props.index];if(_this.props.index==null||!parent||!child){return}var scrollTop=Math.max(Math.min(parent.scrollTop,child.offsetTop),child.offsetTop+child.offsetHeight-parent.offsetHeight);parent.scrollTop=scrollTop}));_defineProperty(_assertThisInitialized(_this),"handleScroll",(function(){if(!_this.props.loadMore||!_this.parentNode){return}var position=_this.parentNode.scrollTop+_this.parentNode.offsetHeight;var height=_this.parentNode.scrollHeight;var remaining=height-position;var margin=50;if(!height||!position){return}if(remaining<=margin){_this.props.loadMore()}}));return _this}_createClass(SuggestionsComponent,[{key:"render",value:function render(){var _this2=this;if(!this.props.show||(0,_lodash.isEmpty)(this.props.suggestions)){return null}var suggestions=this.props.suggestions.map((function(suggestion,index){return _react.default.createElement(_suggestion_component.SuggestionComponent,{innerRef:function innerRef(node){return _this2.childNodes[index]=node},selected:index===_this2.props.index,suggestion:suggestion,onClick:_this2.props.onClick,onMouseEnter:function onMouseEnter(){return _this2.props.onMouseEnter(index)},ariaId:"suggestion-"+index,key:"".concat(suggestion.type," - ").concat(suggestion.text)})}));return _react.default.createElement("div",{className:"reactSuggestionTypeahead"},_react.default.createElement("div",{className:"kbnTypeahead"},_react.default.createElement("div",{className:"kbnTypeahead__popover"},_react.default.createElement("div",{id:"kbnTypeahead__items",className:"kbnTypeahead__items",role:"listbox",ref:function ref(node){return _this2.parentNode=node},onScroll:this.handleScroll},suggestions))))}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(prevProps.index!==this.props.index){this.scrollIntoView()}}}]);return SuggestionsComponent}(_react.Component);exports.SuggestionsComponent=SuggestionsComponent},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SuggestionComponent=SuggestionComponent;var _eui=__webpack_require__(23);var _classnames=_interopRequireDefault(__webpack_require__(58));var _react=_interopRequireDefault(__webpack_require__(22));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getEuiIconType(type){switch(type){case"field":return"kqlField";case"value":return"kqlValue";case"recentSearch":return"search";case"conjunction":return"kqlSelector";case"operator":return"kqlOperand";default:throw new Error("Unknown type: ".concat(type))}}function SuggestionComponent(props){return _react.default.createElement("div",{className:(0,_classnames.default)({kbnTypeahead__item:true,active:props.selected}),role:"option",onClick:function onClick(){return props.onClick(props.suggestion)},onMouseEnter:props.onMouseEnter,ref:props.innerRef,id:props.ariaId,"aria-selected":props.selected,"data-test-subj":"autocompleteSuggestion-".concat(props.suggestion.type,"-").concat(props.suggestion.text.replace(/\s/g,"-"))},_react.default.createElement("div",{className:"kbnSuggestionItem kbnSuggestionItem--"+props.suggestion.type},_react.default.createElement("div",{className:"kbnSuggestionItem__type"},_react.default.createElement(_eui.EuiIcon,{type:getEuiIconType(props.suggestion.type)})),_react.default.createElement("div",{className:"kbnSuggestionItem__text"},props.suggestion.text),_react.default.createElement("div",{className:"kbnSuggestionItem__description"},props.suggestion.description)))}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.createIndexPatternSelect=createIndexPatternSelect;exports.IndexPatternSelect=void 0;var _lodash=_interopRequireDefault(__webpack_require__(41));var _react=_interopRequireWildcard(__webpack_require__(22));var _eui=__webpack_require__(23);var _lib=__webpack_require__(87);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var getIndexPatterns=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(client,search,fields){var resp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return client.find({type:"index-pattern",fields:fields,search:"".concat(search,"*"),searchFields:["title"],perPage:100});case 2:resp=_context.sent;return _context.abrupt("return",resp.savedObjects);case 4:case"end":return _context.stop()}}}),_callee)})));return function getIndexPatterns(_x,_x2,_x3){return _ref.apply(this,arguments)}}();function createIndexPatternSelect(savedObjectsClient){return function(props){return _react.default.createElement(IndexPatternSelect,_extends({},props,{savedObjectsClient:savedObjectsClient}))}}var IndexPatternSelect=function(_Component){_inherits(IndexPatternSelect,_Component);function IndexPatternSelect(props){var _this;_classCallCheck(this,IndexPatternSelect);_this=_possibleConstructorReturn(this,_getPrototypeOf(IndexPatternSelect).call(this,props));_defineProperty(_assertThisInitialized(_this),"isMounted",false);_defineProperty(_assertThisInitialized(_this),"state",void 0);_defineProperty(_assertThisInitialized(_this),"fetchSelectedIndexPattern",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(indexPatternId){var indexPatternTitle;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(indexPatternId){_context2.next=3;break}_this.setState({selectedIndexPattern:undefined});return _context2.abrupt("return");case 3:_context2.prev=3;_context2.next=6;return(0,_lib.getTitle)(_this.props.savedObjectsClient,indexPatternId);case 6:indexPatternTitle=_context2.sent;_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2["catch"](3);return _context2.abrupt("return");case 12:if(_this.isMounted){_context2.next=14;break}return _context2.abrupt("return");case 14:_this.setState({selectedIndexPattern:{value:indexPatternId,label:indexPatternTitle}});case 15:case"end":return _context2.stop()}}}),_callee2,null,[[3,9]])})));return function(_x4){return _ref2.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"debouncedFetch",_lodash.default.debounce(function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(searchValue){var _this$props,fieldTypes,onNoIndexPatterns,savedObjectsClient,savedObjectFields,savedObjects,options;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this$props=_this.props,fieldTypes=_this$props.fieldTypes,onNoIndexPatterns=_this$props.onNoIndexPatterns,savedObjectsClient=_this$props.savedObjectsClient;savedObjectFields=["title"];if(fieldTypes){savedObjectFields.push("fields")}_context3.next=5;return getIndexPatterns(savedObjectsClient,searchValue,savedObjectFields);case 5:savedObjects=_context3.sent;if(fieldTypes){savedObjects=savedObjects.filter((function(savedObject){try{var indexPatternFields=JSON.parse(savedObject.attributes.fields);return indexPatternFields.some((function(field){return fieldTypes===null||fieldTypes===void 0?void 0:fieldTypes.includes(field.type)}))}catch(err){return false}}))}if(_this.isMounted){_context3.next=9;break}return _context3.abrupt("return");case 9:if(searchValue===_this.state.searchValue){options=savedObjects.map((function(indexPatternSavedObject){return{label:indexPatternSavedObject.attributes.title,value:indexPatternSavedObject.id}}));_this.setState({isLoading:false,options:options});if(onNoIndexPatterns&&searchValue===""&&options.length===0){onNoIndexPatterns()}}case 10:case"end":return _context3.stop()}}}),_callee3)})));return function(_x5){return _ref3.apply(this,arguments)}}(),300));_defineProperty(_assertThisInitialized(_this),"fetchOptions",(function(){var searchValue=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_this.setState({isLoading:true,searchValue:searchValue},_this.debouncedFetch.bind(null,searchValue))}));_defineProperty(_assertThisInitialized(_this),"onChange",(function(selectedOptions){_this.props.onChange(_lodash.default.get(selectedOptions,"0.value"))}));_this.state={isLoading:false,options:[],selectedIndexPattern:undefined,searchValue:undefined};return _this}_createClass(IndexPatternSelect,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.isMounted=false;this.debouncedFetch.cancel()}},{key:"componentDidMount",value:function componentDidMount(){this.isMounted=true;this.fetchOptions();this.fetchSelectedIndexPattern(this.props.indexPatternId)}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.indexPatternId!==this.props.indexPatternId){this.fetchSelectedIndexPattern(nextProps.indexPatternId)}}},{key:"render",value:function render(){var _this$props2=this.props,fieldTypes=_this$props2.fieldTypes,onChange=_this$props2.onChange,indexPatternId=_this$props2.indexPatternId,placeholder=_this$props2.placeholder,onNoIndexPatterns=_this$props2.onNoIndexPatterns,savedObjectsClient=_this$props2.savedObjectsClient,rest=_objectWithoutProperties(_this$props2,["fieldTypes","onChange","indexPatternId","placeholder","onNoIndexPatterns","savedObjectsClient"]);return _react.default.createElement(_eui.EuiComboBox,_extends({},rest,{placeholder:placeholder,singleSelection:true,isLoading:this.state.isLoading,onSearchChange:this.fetchOptions,options:this.state.options,selectedOptions:this.state.selectedIndexPattern?[this.state.selectedIndexPattern]:[],onChange:this.onChange}))}}]);return IndexPatternSelect}(_react.Component);exports.IndexPatternSelect=IndexPatternSelect},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchIndexPatterns=fetchIndexPatterns;var _lodash=__webpack_require__(41);var _=__webpack_require__(59);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function fetchIndexPatterns(_x,_x2,_x3){return _fetchIndexPatterns.apply(this,arguments)}function _fetchIndexPatterns(){_fetchIndexPatterns=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObjectsClient,indexPatternStrings,uiSettings){var searchString,indexPatternsFromSavedObjects,exactMatches,defaultIndex,allMatches;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!indexPatternStrings||(0,_lodash.isEmpty)(indexPatternStrings))){_context.next=2;break}return _context.abrupt("return",[]);case 2:searchString=indexPatternStrings.map((function(string){return'"'.concat(string,'"')})).join(" | ");_context.next=5;return savedObjectsClient.find({type:"index-pattern",fields:["title","fields"],search:searchString,searchFields:["title"]});case 5:indexPatternsFromSavedObjects=_context.sent;exactMatches=indexPatternsFromSavedObjects.savedObjects.filter((function(savedObject){return indexPatternStrings.includes(savedObject.attributes.title)}));defaultIndex=uiSettings.get("defaultIndex");if(!(exactMatches.length===indexPatternStrings.length)){_context.next=12;break}_context.t0=exactMatches;_context.next=19;break;case 12:_context.t1=[];_context.t2=_toConsumableArray(exactMatches);_context.next=16;return savedObjectsClient.get("index-pattern",defaultIndex);case 16:_context.t3=_context.sent;_context.t4=[_context.t3];_context.t0=_context.t1.concat.call(_context.t1,_context.t2,_context.t4);case 19:allMatches=_context.t0;return _context.abrupt("return",allMatches.map(_.indexPatterns.getFromSavedObject));case 21:case"end":return _context.stop()}}}),_callee)})));return _fetchIndexPatterns.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QueryLanguageSwitcher=QueryLanguageSwitcher;var _eui=__webpack_require__(23);var _react=__webpack_require__(24);var _react2=_interopRequireWildcard(__webpack_require__(22));var _public=__webpack_require__(25);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function QueryLanguageSwitcher(props){var kibana=(0,_public.useKibana)();var kueryQuerySyntaxDocs=kibana.services.docLinks.links.query.kueryQuerySyntax;var _useState=(0,_react2.useState)(false),_useState2=_slicedToArray(_useState,2),isPopoverOpen=_useState2[0],setIsPopoverOpen=_useState2[1];var luceneLabel=_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.luceneLanguageName",defaultMessage:"Lucene"});var kqlLabel=_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.kqlLanguageName",defaultMessage:"KQL"});var kqlFullName=_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.kqlFullLanguageName",defaultMessage:"Kibana Query Language"});var button=_react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:function onClick(){return setIsPopoverOpen(!isPopoverOpen)},className:"euiFormControlLayout__append","data-test-subj":"switchQueryLanguageButton"},props.language==="lucene"?luceneLabel:kqlLabel);return _react2.default.createElement(_eui.EuiPopover,{id:"queryLanguageSwitcherPopover",anchorClassName:"euiFormControlLayout__append",ownFocus:true,anchorPosition:props.anchorPosition||"downRight",button:button,isOpen:isPopoverOpen,closePopover:function closePopover(){return setIsPopoverOpen(false)},withTitle:true},_react2.default.createElement(_eui.EuiPopoverTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.syntaxOptionsTitle",defaultMessage:"Syntax options"})),_react2.default.createElement("div",{style:{width:"350px"}},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.syntaxOptionsDescription",defaultMessage:"The {docsLink} (KQL) offers a simplified query syntax and support for scripted fields. KQL also provides autocomplete if you have a Basic license or above. If you turn off KQL, Kibana uses Lucene.",values:{docsLink:_react2.default.createElement(_eui.EuiLink,{href:kueryQuerySyntaxDocs,target:"_blank"},kqlFullName)}}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiForm,null,_react2.default.createElement(_eui.EuiFormRow,{label:kqlFullName},_react2.default.createElement(_eui.EuiSwitch,{id:"queryEnhancementOptIn",name:"popswitch",label:props.language==="kuery"?_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.kqlOnLabel",defaultMessage:"On"}):_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.kqlOffLabel",defaultMessage:"Off"}),checked:props.language==="kuery",onChange:function onChange(){var newLanguage=props.language==="lucene"?"kuery":"lucene";props.onSelectLanguage(newLanguage)},"data-test-subj":"languageToggle"})))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SearchBar",{enumerable:true,get:function get(){return _search_bar.SearchBar}});Object.defineProperty(exports,"SearchBarProps",{enumerable:true,get:function get(){return _search_bar.SearchBarProps}});Object.defineProperty(exports,"StatefulSearchBarProps",{enumerable:true,get:function get(){return _create_search_bar.StatefulSearchBarProps}});var _search_bar=__webpack_require__(215);var _create_search_bar=__webpack_require__(216)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QueryBarTopRow=QueryBarTopRow;var _datemath=_interopRequireDefault(__webpack_require__(61));var _classnames=_interopRequireDefault(__webpack_require__(58));var _react=_interopRequireWildcard(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _react2=__webpack_require__(24);var _public=__webpack_require__(25);var _query_string_input=__webpack_require__(214);var _common=__webpack_require__(42);var _query=__webpack_require__(67);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function QueryBarTopRow(props){var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isDateRangeInvalid=_useState2[0],setIsDateRangeInvalid=_useState2[1];var kibana=(0,_public.useKibana)();var _kibana$services=kibana.services,uiSettings=_kibana$services.uiSettings,notifications=_kibana$services.notifications,storage=_kibana$services.storage,appName=_kibana$services.appName,docLinks=_kibana$services.docLinks;var kueryQuerySyntaxLink=docLinks.links.query.kueryQuerySyntax;var queryLanguage=props.query&&props.query.language;var persistedLog=_react.default.useMemo((function(){return queryLanguage&&uiSettings&&storage&&appName?(0,_query.getQueryLog)(uiSettings,storage,appName,queryLanguage):undefined}),[appName,queryLanguage,uiSettings,storage]);function onClickSubmitButton(event){if(persistedLog&&props.query){persistedLog.add(props.query.query)}event.preventDefault();onSubmit({query:props.query,dateRange:getDateRange()})}function getDateRange(){var defaultTimeSetting=uiSettings.get("timepicker:timeDefaults");return{from:props.dateRangeFrom||defaultTimeSetting.from,to:props.dateRangeTo||defaultTimeSetting.to}}function onQueryChange(query){props.onChange({query:query,dateRange:getDateRange()})}function onTimeChange(_ref){var start=_ref.start,end=_ref.end,isInvalid=_ref.isInvalid,isQuickSelection=_ref.isQuickSelection;setIsDateRangeInvalid(isInvalid);var retVal={query:props.query,dateRange:{from:start,to:end}};if(isQuickSelection){props.onSubmit(retVal)}else{props.onChange(retVal)}}function onRefresh(_ref2){var start=_ref2.start,end=_ref2.end;var retVal={dateRange:{from:start,to:end}};if(props.onRefresh){props.onRefresh(retVal)}}function onSubmit(_ref3){var query=_ref3.query,dateRange=_ref3.dateRange;handleLuceneSyntaxWarning();if(props.timeHistory){props.timeHistory.add(dateRange)}props.onSubmit({query:query,dateRange:dateRange})}function onInputSubmit(query){onSubmit({query:query,dateRange:getDateRange()})}function toAbsoluteString(value){var roundUp=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var valueAsMoment=_datemath.default.parse(value,{roundUp:roundUp});if(!valueAsMoment){return value}return valueAsMoment.toISOString()}function renderQueryInput(){if(!shouldRenderQueryInput())return;return _react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_query_string_input.QueryStringInput,{disableAutoFocus:props.disableAutoFocus,indexPatterns:props.indexPatterns,prepend:props.prepend,query:props.query,screenTitle:props.screenTitle,onChange:onQueryChange,onSubmit:onInputSubmit,persistedLog:persistedLog,dataTestSubj:props.dataTestSubj}))}function renderSharingMetaFields(){var _getDateRange=getDateRange(),from=_getDateRange.from,to=_getDateRange.to;var dateRangePretty=(0,_eui.prettyDuration)(toAbsoluteString(from),toAbsoluteString(to),[],uiSettings.get("dateFormat"));return _react.default.createElement("div",{"data-shared-timefilter-duration":dateRangePretty,"data-test-subj":"dataSharedTimefilterDuration"})}function shouldRenderDatePicker(){return Boolean(props.showDatePicker||props.showAutoRefreshOnly)}function shouldRenderQueryInput(){return Boolean(props.showQueryInput&&props.indexPatterns&&props.query&&storage)}function renderUpdateButton(){var button=props.customSubmitButton?_react.default.cloneElement(props.customSubmitButton,{onClick:onClickSubmitButton}):_react.default.createElement(_eui.EuiSuperUpdateButton,{needsUpdate:props.isDirty,isDisabled:isDateRangeInvalid,isLoading:props.isLoading,onClick:onClickSubmitButton,"data-test-subj":"querySubmitButton"});if(!shouldRenderDatePicker()){return button}return _react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s"},renderDatePicker(),_react.default.createElement(_eui.EuiFlexItem,{grow:false},button))}function renderDatePicker(){if(!shouldRenderDatePicker()){return null}var recentlyUsedRanges;if(props.timeHistory){recentlyUsedRanges=props.timeHistory.get().map((function(_ref4){var from=_ref4.from,to=_ref4.to;return{start:from,end:to}}))}var commonlyUsedRanges=uiSettings.get("timepicker:quickRanges").map((function(_ref5){var from=_ref5.from,to=_ref5.to,display=_ref5.display;return{start:from,end:to,label:display}}));return _react.default.createElement(_eui.EuiFlexItem,{className:"kbnQueryBar__datePickerWrapper"},_react.default.createElement(_eui.EuiSuperDatePicker,{start:props.dateRangeFrom,end:props.dateRangeTo,isPaused:props.isRefreshPaused,refreshInterval:props.refreshInterval,onTimeChange:onTimeChange,onRefresh:onRefresh,onRefreshChange:props.onRefreshChange,showUpdateButton:false,recentlyUsedRanges:recentlyUsedRanges,commonlyUsedRanges:commonlyUsedRanges,dateFormat:uiSettings.get("dateFormat"),isAutoRefreshOnly:props.showAutoRefreshOnly}))}function handleLuceneSyntaxWarning(){if(!props.query)return;var _props$query=props.query,query=_props$query.query,language=_props$query.language;if(language==="kuery"&&typeof query==="string"&&(!storage||!storage.get("kibana.luceneSyntaxWarningOptOut"))&&(0,_common.doesKueryExpressionHaveLuceneSyntaxError)(query)){var toast=notifications.toasts.addWarning({title:_i18n.i18n.translate("data.query.queryBar.luceneSyntaxWarningTitle",{defaultMessage:"Lucene syntax warning"}),text:(0,_public.toMountPoint)(_react.default.createElement("div",null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.luceneSyntaxWarningMessage",defaultMessage:"It looks like you may be trying to use Lucene query syntax, although you have Kibana Query Language (KQL) selected. Please review the KQL docs {link}.",values:{link:_react.default.createElement(_eui.EuiLink,{href:kueryQuerySyntaxLink,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.syntaxOptionsDescription.docsLinkText",defaultMessage:"here"}))}})),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",onClick:function onClick(){return onLuceneSyntaxWarningOptOut(toast)}},_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.luceneSyntaxWarningOptOutText",defaultMessage:"Don't show again"}))))))})}}function onLuceneSyntaxWarningOptOut(toast){if(!storage)return;storage.set("kibana.luceneSyntaxWarningOptOut",true);notifications.toasts.remove(toast)}var classes=(0,_classnames.default)("kbnQueryBar",{"kbnQueryBar--withDatePicker":props.showDatePicker});return _react.default.createElement(_eui.EuiFlexGroup,{className:classes,responsive:!!props.showDatePicker,gutterSize:"s",justifyContent:"flexEnd"},renderQueryInput(),renderSharingMetaFields(),_react.default.createElement(_eui.EuiFlexItem,{grow:false},renderUpdateButton()))}QueryBarTopRow.defaultProps={showQueryInput:true,showDatePicker:true,showAutoRefreshOnly:false}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useFilterManager=void 0;var _react=__webpack_require__(22);var _rxjs=__webpack_require__(28);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var useFilterManager=function useFilterManager(props){var _useState=(0,_react.useState)(props.filters||props.filterManager.getFilters()),_useState2=_slicedToArray(_useState,2),filters=_useState2[0],setFilters=_useState2[1];(0,_react.useEffect)((function(){var subscriptions=new _rxjs.Subscription;subscriptions.add(props.filterManager.getUpdates$().subscribe({next:function next(){var newFilters=props.filterManager.getFilters();setFilters(newFilters)}}));return function(){subscriptions.unsubscribe()}}),[props.filterManager]);return{filters:filters}};exports.useFilterManager=useFilterManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useTimefilter=void 0;var _react=__webpack_require__(22);var _rxjs=__webpack_require__(28);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var useTimefilter=function useTimefilter(props){var initialTimeRange={from:props.dateRangeFrom||props.timefilter.getTime().from,to:props.dateRangeTo||props.timefilter.getTime().to};var initialRefreshInterval={value:props.refreshInterval||props.timefilter.getRefreshInterval().value,pause:props.isRefreshPaused||props.timefilter.getRefreshInterval().pause};var _useState=(0,_react.useState)(initialTimeRange),_useState2=_slicedToArray(_useState,2),timeRange=_useState2[0],setTimerange=_useState2[1];var _useState3=(0,_react.useState)(initialRefreshInterval),_useState4=_slicedToArray(_useState3,2),refreshInterval=_useState4[0],setRefreshInterval=_useState4[1];(0,_react.useEffect)((function(){var subscriptions=new _rxjs.Subscription;subscriptions.add(props.timefilter.getRefreshIntervalUpdate$().subscribe({next:function next(){var newRefreshInterval=props.timefilter.getRefreshInterval();setRefreshInterval(newRefreshInterval)}}));subscriptions.add(props.timefilter.getTimeUpdate$().subscribe({next:function next(){setTimerange(props.timefilter.getTime())}}));return function(){subscriptions.unsubscribe()}}),[props.timefilter]);return{refreshInterval:refreshInterval,timeRange:timeRange}};exports.useTimefilter=useTimefilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useSavedQuery=void 0;var _react=__webpack_require__(22);var _i18n=__webpack_require__(0);var _populate_state_from_saved_query=__webpack_require__(590);var _clear_saved_query=__webpack_require__(591);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var useSavedQuery=function useSavedQuery(props){var defaultLanguage=props.defaultLanguage;var _useState=(0,_react.useState)(),_useState2=_slicedToArray(_useState,2),savedQuery=_useState2[0],_setSavedQuery=_useState2[1];(0,_react.useEffect)((function(){var fetchSavedQuery=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedQueryId){var newSavedQuery;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return props.queryService.savedQueries.getSavedQuery(savedQueryId);case 3:newSavedQuery=_context.sent;if(newSavedQuery&&newSavedQuery.id===savedQueryId){_setSavedQuery(newSavedQuery);(0,_populate_state_from_saved_query.populateStateFromSavedQuery)(props.queryService,props.setQuery,newSavedQuery)}_context.next=12;break;case 7:_context.prev=7;_context.t0=_context["catch"](0);_setSavedQuery(undefined);(0,_clear_saved_query.clearStateFromSavedQuery)(props.queryService,props.setQuery,defaultLanguage);props.notifications.toasts.addWarning({title:_i18n.i18n.translate("data.search.unableToGetSavedQueryToastTitle",{defaultMessage:"Unable to load saved query {savedQueryId}",values:{savedQueryId:savedQueryId}}),text:"".concat(_context.t0.message)});case 12:case"end":return _context.stop()}}}),_callee,null,[[0,7]])})));return function fetchSavedQuery(_x){return _ref.apply(this,arguments)}}();if(props.savedQueryId)fetchSavedQuery(props.savedQueryId);else _setSavedQuery(undefined)}),[defaultLanguage,props.notifications.toasts,props.queryService,props.queryService.savedQueries,props.savedQueryId,props.setQuery]);return{savedQuery:savedQuery,setSavedQuery:function setSavedQuery(q){_setSavedQuery(q);(0,_populate_state_from_saved_query.populateStateFromSavedQuery)(props.queryService,props.setQuery,q)},clearSavedQuery:function clearSavedQuery(){_setSavedQuery(undefined);(0,_clear_saved_query.clearStateFromSavedQuery)(props.queryService,props.setQuery,defaultLanguage)}}};exports.useSavedQuery=useSavedQuery},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.populateStateFromSavedQuery=void 0;function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var populateStateFromSavedQuery=function populateStateFromSavedQuery(queryService,setQueryStringState,savedQuery){var timefilter=queryService.timefilter.timefilter,filterManager=queryService.filterManager;if(savedQuery.attributes.timefilter){timefilter.setTime({from:savedQuery.attributes.timefilter.from,to:savedQuery.attributes.timefilter.to});if(savedQuery.attributes.timefilter.refreshInterval){timefilter.setRefreshInterval(savedQuery.attributes.timefilter.refreshInterval)}}setQueryStringState(savedQuery.attributes.query);var savedQueryFilters=savedQuery.attributes.filters||[];var globalFilters=filterManager.getGlobalFilters();filterManager.setFilters([].concat(_toConsumableArray(globalFilters),_toConsumableArray(savedQueryFilters)))};exports.populateStateFromSavedQuery=populateStateFromSavedQuery},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.clearStateFromSavedQuery=void 0;var clearStateFromSavedQuery=function clearStateFromSavedQuery(queryService,setQueryStringState,defaultLanguage){queryService.filterManager.removeAll();setQueryStringState({query:"",language:defaultLanguage})};exports.clearStateFromSavedQuery=clearStateFromSavedQuery},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ShardFailureRequest",{enumerable:true,get:function get(){return _shard_failure_types.ShardFailureRequest}});Object.defineProperty(exports,"ShardFailureResponse",{enumerable:true,get:function get(){return _shard_failure_types.ShardFailureResponse}});Object.defineProperty(exports,"ShardFailureOpenModalButton",{enumerable:true,get:function get(){return _shard_failure_open_modal_button.ShardFailureOpenModalButton}});var _shard_failure_types=__webpack_require__(593);var _shard_failure_open_modal_button=__webpack_require__(594)},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShardFailureOpenModalButton=ShardFailureOpenModalButton;var _react=_interopRequireDefault(__webpack_require__(22));var _react2=__webpack_require__(24);var _eui=__webpack_require__(23);var _services=__webpack_require__(45);var _public=__webpack_require__(25);var _shard_failure_modal=__webpack_require__(595);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ShardFailureOpenModalButton(_ref){var request=_ref.request,response=_ref.response,title=_ref.title;function onClick(){var modal=(0,_services.getOverlays)().openModal((0,_public.toMountPoint)(_react.default.createElement(_shard_failure_modal.ShardFailureModal,{request:request,response:response,title:title,onClose:function onClose(){return modal.close()}})),{className:"shardFailureModal"})}return _react.default.createElement(_eui.EuiTextAlign,{textAlign:"right"},_react.default.createElement(_eui.EuiButton,{color:"warning",size:"s",onClick:onClick,"data-test-subj":"openShardFailureModalBtn"},_react.default.createElement(_react2.FormattedMessage,{id:"data.search.searchSource.fetch.shardsFailedModal.showDetails",defaultMessage:"Show details",description:"Open the modal to show details"})))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShardFailureModal=ShardFailureModal;var _react=_interopRequireDefault(__webpack_require__(22));var _react2=__webpack_require__(24);var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _shard_failure_table=__webpack_require__(596);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ShardFailureModal(_ref){var request=_ref.request,response=_ref.response,title=_ref.title,onClose=_ref.onClose;if(!response||!response._shards||!Array.isArray(response._shards.failures)||!request){return _react.default.createElement(_eui.EuiCallOut,{title:"Sorry, there was an error",color:"danger",iconType:"alert"},"The ShardFailureModal component received invalid properties")}var requestJSON=JSON.stringify(request,null,2);var responseJSON=JSON.stringify(response,null,2);var failures=response._shards.failures;var tabs=[{id:"table",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tabHeaderShardFailures",{defaultMessage:"Shard failures",description:"Name of the tab displaying shard failures"}),content:_react.default.createElement(_shard_failure_table.ShardFailureTable,{failures:failures})},{id:"json-request",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tabHeaderRequest",{defaultMessage:"Request",description:"Name of the tab displaying the JSON request"}),content:_react.default.createElement(_eui.EuiCodeBlock,{language:"json",isCopyable:true},requestJSON)},{id:"json-response",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tabHeaderResponse",{defaultMessage:"Response",description:"Name of the tab displaying the JSON response"}),content:_react.default.createElement(_eui.EuiCodeBlock,{language:"json",isCopyable:true},responseJSON)}];return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,title)),_react.default.createElement(_eui.EuiModalBody,null,_react.default.createElement(_eui.EuiTabbedContent,{tabs:tabs,initialSelectedTab:tabs[0],autoFocus:"selected"})),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiCopy,{textToCopy:responseJSON},(function(copy){return _react.default.createElement(_eui.EuiButtonEmpty,{onClick:copy},_react.default.createElement(_react2.FormattedMessage,{id:"data.search.searchSource.fetch.shardsFailedModal.copyToClipboard",defaultMessage:"Copy response to clipboard"}))})),_react.default.createElement(_eui.EuiButton,{onClick:function onClick(){return onClose()},fill:true,"data-test-sub":"closeShardFailureModal"},_react.default.createElement(_react2.FormattedMessage,{id:"data.search.searchSource.fetch.shardsFailedModal.close",defaultMessage:"Close",description:"Closing the Modal"}))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShardFailureTable=ShardFailureTable;var _react=_interopRequireWildcard(__webpack_require__(22));var _eui=__webpack_require__(23);var _services=__webpack_require__(37);var _i18n=__webpack_require__(0);var _shard_failure_description=__webpack_require__(597);var _shard_failure_description_header=__webpack_require__(217);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ShardFailureTable(_ref){var failures=_ref.failures;var itemList=failures.map((function(failure,idx){return _objectSpread({},{id:String(idx)},{},failure)}));var initalMap={};var _useState=(0,_react.useState)(initalMap),_useState2=_slicedToArray(_useState,2),expandMap=_useState2[0],setExpandMap=_useState2[1];var columns=[{align:_services.RIGHT_ALIGNMENT,width:"40px",isExpander:true,render:function render(item){var failureSummeryText=(0,_shard_failure_description_header.getFailureSummaryText)(item);var collapseLabel=_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tableRowCollapse",{defaultMessage:"Collapse {rowDescription}",description:"Collapse a row of a table with failures",values:{rowDescription:failureSummeryText}});var expandLabel=_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tableRowExpand",{defaultMessage:"Expand {rowDescription}",description:"Expand a row of a table with failures",values:{rowDescription:failureSummeryText}});return _react.default.createElement(_eui.EuiButtonIcon,{onClick:function onClick(){var map=Object.assign({},expandMap);if(map[item.id]){delete map[item.id]}else{map[item.id]=_react.default.createElement(_shard_failure_description.ShardFailureDescription,item)}setExpandMap(map)},"aria-label":expandMap[item.id]?collapseLabel:expandLabel,iconType:expandMap[item.id]?"arrowUp":"arrowDown"})}},{field:"shard",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tableColShard",{defaultMessage:"Shard"}),sortable:true,truncateText:true,width:"80px"},{field:"index",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tableColIndex",{defaultMessage:"Index"}),sortable:true,truncateText:true},{field:"node",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tableColNode",{defaultMessage:"Node"}),sortable:true,truncateText:true},{field:"reason.type",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tableColReason",{defaultMessage:"Reason"}),truncateText:true}];return _react.default.createElement(_eui.EuiInMemoryTable,{itemId:"id",items:itemList,columns:columns,pagination:true,sorting:{sort:{field:"index",direction:"desc"}},itemIdToExpandedRowMap:expandMap})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatKey=formatKey;exports.formatValueByKey=formatValueByKey;exports.ShardFailureDescription=ShardFailureDescription;var _react=_interopRequireDefault(__webpack_require__(22));var _eui=__webpack_require__(23);var _utils=__webpack_require__(84);var _shard_failure_description_header=__webpack_require__(217);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function formatKey(key){var nameCapitalized=key.charAt(0).toUpperCase()+key.slice(1);return nameCapitalized.replace(/[\._]/g," ")}function formatValueByKey(value,key){if(key==="script"||key==="script_stack"){var valueScript=Array.isArray(value)?value.join("\n"):String(value);return _react.default.createElement(_eui.EuiCodeBlock,{language:"java",paddingSize:"s",isCopyable:true},valueScript)}else{return String(value)}}function ShardFailureDescription(props){var flattendReason=(0,_utils.getFlattenedObject)(props.reason);var listItems=Object.entries(flattendReason).map((function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];return{title:formatKey(key),description:formatValueByKey(value,key)}}));return _react.default.createElement("div",null,_react.default.createElement(_shard_failure_description_header.ShardFailureDescriptionHeader,props),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiDescriptionList,{listItems:listItems,type:"column",compressed:true,className:"shardFailureModal__desc",titleProps:{className:"shardFailureModal__descTitle"},descriptionProps:{className:"shardFailureModal__descValue"}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SavedQueryManagementComponent",{enumerable:true,get:function get(){return _saved_query_management_component.SavedQueryManagementComponent}});var _saved_query_management_component=__webpack_require__(599)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedQueryManagementComponent=SavedQueryManagementComponent;var _eui=__webpack_require__(23);var _i18n=__webpack_require__(0);var _react=_interopRequireWildcard(__webpack_require__(22));var _lodash=__webpack_require__(41);var _saved_query_list_item=__webpack_require__(600);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var perPage=50;function SavedQueryManagementComponent(_ref){var showSaveQuery=_ref.showSaveQuery,loadedSavedQuery=_ref.loadedSavedQuery,onSave=_ref.onSave,onSaveAsNew=_ref.onSaveAsNew,onLoad=_ref.onLoad,onClearSavedQuery=_ref.onClearSavedQuery,savedQueryService=_ref.savedQueryService;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var _useState3=(0,_react.useState)([]),_useState4=_slicedToArray(_useState3,2),savedQueries=_useState4[0],setSavedQueries=_useState4[1];var _useState5=(0,_react.useState)(0),_useState6=_slicedToArray(_useState5,2),count=_useState6[0],setTotalCount=_useState6[1];var _useState7=(0,_react.useState)(0),_useState8=_slicedToArray(_useState7,2),activePage=_useState8[0],setActivePage=_useState8[1];var cancelPendingListingRequest=(0,_react.useRef)((function(){}));(0,_react.useEffect)((function(){var fetchCountAndSavedQueries=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var requestGotCancelled,_ref3,savedQueryCount,savedQueryItems,sortedSavedQueryItems;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:cancelPendingListingRequest.current();requestGotCancelled=false;cancelPendingListingRequest.current=function(){requestGotCancelled=true};_context.next=5;return savedQueryService.findSavedQueries("",perPage,activePage+1);case 5:_ref3=_context.sent;savedQueryCount=_ref3.total;savedQueryItems=_ref3.queries;if(!requestGotCancelled){_context.next=10;break}return _context.abrupt("return");case 10:sortedSavedQueryItems=(0,_lodash.sortBy)(savedQueryItems,"attributes.title");setTotalCount(savedQueryCount);setSavedQueries(sortedSavedQueryItems);case 13:case"end":return _context.stop()}}}),_callee)})));return function fetchCountAndSavedQueries(){return _ref2.apply(this,arguments)}}();if(isOpen){fetchCountAndSavedQueries()}}),[isOpen,activePage,savedQueryService]);var goToPage=function goToPage(pageNumber){setActivePage(pageNumber)};var savedQueryDescriptionText=_i18n.i18n.translate("data.search.searchBar.savedQueryDescriptionText",{defaultMessage:"Save query text and filters that you want to use again."});var noSavedQueriesDescriptionText=_i18n.i18n.translate("data.search.searchBar.savedQueryNoSavedQueriesText",{defaultMessage:"There are no saved queries."})+" "+savedQueryDescriptionText;var savedQueryPopoverTitleText=_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverTitleText",{defaultMessage:"Saved Queries"});var onDeleteSavedQuery=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(savedQuery){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:cancelPendingListingRequest.current();setSavedQueries(savedQueries.filter((function(currentSavedQuery){return currentSavedQuery.id!==savedQuery.id})));if(loadedSavedQuery&&loadedSavedQuery.id===savedQuery.id){onClearSavedQuery()}_context2.next=5;return savedQueryService.deleteSavedQuery(savedQuery.id);case 5:setActivePage(0);case 6:case"end":return _context2.stop()}}}),_callee2)})));return function onDeleteSavedQuery(_x){return _ref4.apply(this,arguments)}}();var savedQueryPopoverButton=_react.default.createElement(_eui.EuiButtonEmpty,{onClick:function onClick(){setIsOpen(!isOpen)},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverButtonText",{defaultMessage:"See saved queries"}),title:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverButtonText",{defaultMessage:"See saved queries"}),"data-test-subj":"saved-query-management-popover-button"},_react.default.createElement(_eui.EuiIcon,{type:"save",className:"euiQuickSelectPopover__buttonText"}),_react.default.createElement(_eui.EuiIcon,{type:"arrowDown"}));var savedQueryRows=function savedQueryRows(){var savedQueriesWithoutCurrent=savedQueries.filter((function(savedQuery){if(!loadedSavedQuery)return true;return savedQuery.id!==loadedSavedQuery.id}));var savedQueriesReordered=loadedSavedQuery&&savedQueriesWithoutCurrent.length!==savedQueries.length?[loadedSavedQuery].concat(_toConsumableArray(savedQueriesWithoutCurrent)):_toConsumableArray(savedQueriesWithoutCurrent);return savedQueriesReordered.map((function(savedQuery){return _react.default.createElement(_saved_query_list_item.SavedQueryListItem,{key:savedQuery.id,savedQuery:savedQuery,isSelected:!!loadedSavedQuery&&loadedSavedQuery.id===savedQuery.id,onSelect:function onSelect(savedQueryToSelect){onLoad(savedQueryToSelect);setIsOpen(false)},onDelete:function onDelete(savedQueryToDelete){return onDeleteSavedQuery(savedQueryToDelete)},showWriteOperations:!!showSaveQuery})}))};return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiPopover,{id:"savedQueryPopover",button:savedQueryPopoverButton,isOpen:isOpen,closePopover:function closePopover(){setIsOpen(false)},anchorPosition:"downLeft",panelPaddingSize:"none",ownFocus:true},_react.default.createElement("div",{className:"kbnSavedQueryManagement__popover","data-test-subj":"saved-query-management-popover"},_react.default.createElement(_eui.EuiPopoverTitle,{id:"savedQueryManagementPopoverTitle"},savedQueryPopoverTitleText),savedQueries.length>0?_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"s",color:"subdued",className:"kbnSavedQueryManagement__text"},_react.default.createElement("p",null,savedQueryDescriptionText)),_react.default.createElement("div",{className:"kbnSavedQueryManagement__listWrapper"},_react.default.createElement(_eui.EuiListGroup,{flush:true,className:"kbnSavedQueryManagement__list","aria-labelledby":"savedQueryManagementPopoverTitle"},savedQueryRows())),_react.default.createElement(_eui.EuiPagination,{className:"kbnSavedQueryManagement__pagination",pageCount:Math.ceil(count/perPage),activePage:activePage,onPageClick:goToPage})):_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"s",color:"subdued",className:"kbnSavedQueryManagement__text"},_react.default.createElement("p",null,noSavedQueriesDescriptionText)),_react.default.createElement(_eui.EuiSpacer,{size:"s"})),_react.default.createElement(_eui.EuiPopoverFooter,null,_react.default.createElement(_eui.EuiFlexGroup,{direction:"rowReverse",gutterSize:"s",alignItems:"center",justifyContent:"flexEnd",responsive:false,wrap:true},showSaveQuery&&loadedSavedQuery&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",fill:true,onClick:function onClick(){return onSave()},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveChangesButtonAriaLabel",{defaultMessage:"Save changes to {title}",values:{title:loadedSavedQuery.attributes.title}}),"data-test-subj":"saved-query-management-save-changes-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveChangesButtonText",{defaultMessage:"Save changes"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",onClick:function onClick(){return onSaveAsNew()},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveAsNewButtonAriaLabel",{defaultMessage:"Save as new saved query"}),"data-test-subj":"saved-query-management-save-as-new-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveAsNewButtonText",{defaultMessage:"Save as new"})))),showSaveQuery&&!loadedSavedQuery&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",fill:true,onClick:function onClick(){return onSave()},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveButtonAriaLabel",{defaultMessage:"Save a new saved query"}),"data-test-subj":"saved-query-management-save-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveButtonText",{defaultMessage:"Save current query"}))),_react.default.createElement(_eui.EuiFlexItem,null),_react.default.createElement(_eui.EuiFlexItem,{grow:false},loadedSavedQuery&&_react.default.createElement(_eui.EuiButtonEmpty,{size:"s",flush:"left",onClick:function onClick(){return onClearSavedQuery()},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverClearButtonAriaLabel",{defaultMessage:"Clear current saved query"}),"data-test-subj":"saved-query-management-clear-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverClearButtonText",{defaultMessage:"Clear"}))))))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedQueryListItem=void 0;var _eui=__webpack_require__(23);var _react=_interopRequireWildcard(__webpack_require__(22));var _classnames=_interopRequireDefault(__webpack_require__(58));var _i18n=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var SavedQueryListItem=function SavedQueryListItem(_ref){var savedQuery=_ref.savedQuery,isSelected=_ref.isSelected,onSelect=_ref.onSelect,onDelete=_ref.onDelete,showWriteOperations=_ref.showWriteOperations;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),showDeletionConfirmationModal=_useState2[0],setShowDeletionConfirmationModal=_useState2[1];var selectButtonAriaLabelText=isSelected?_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSavedQueryListItemSelectedButtonAriaLabel",{defaultMessage:"Saved query button selected {savedQueryName}. Press to clear any changes.",values:{savedQueryName:savedQuery.attributes.title}}):_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSavedQueryListItemButtonAriaLabel",{defaultMessage:"Saved query button {savedQueryName}",values:{savedQueryName:savedQuery.attributes.title}});var selectButtonDataTestSubj=isSelected?"load-saved-query-".concat(savedQuery.attributes.title,"-button saved-query-list-item-selected"):"load-saved-query-".concat(savedQuery.attributes.title,"-button");var classes=(0,_classnames.default)("kbnSavedQueryListItem",{"kbnSavedQueryListItem-selected":isSelected});var label=_react.default.createElement("span",{className:"kbnSavedQueryListItem__label"},_react.default.createElement("span",{className:"kbnSavedQueryListItem__labelText"},savedQuery.attributes.title)," ",savedQuery.attributes.description&&_react.default.createElement(_eui.EuiIconTip,{type:"iInCircle",content:savedQuery.attributes.description,"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSavedQueryListItemDescriptionAriaLabel",{defaultMessage:"{savedQueryName} description",values:{savedQueryName:savedQuery.attributes.title}})}));return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiListGroupItem,{className:classes,key:savedQuery.id,"data-test-subj":"saved-query-list-item ".concat(selectButtonDataTestSubj," ").concat(isSelected?"saved-query-list-item-selected":""),isActive:isSelected,onClick:function onClick(){onSelect(savedQuery)},"aria-label":selectButtonAriaLabelText,label:label,iconType:isSelected?"check":undefined,extraAction:showWriteOperations?{color:"danger",onClick:function onClick(){return setShowDeletionConfirmationModal(true)},iconType:"trash",iconSize:"s","aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverDeleteButtonAriaLabel",{defaultMessage:"Delete saved query {savedQueryName}",values:{savedQueryName:savedQuery.attributes.title}}),title:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverDeleteButtonAriaLabel",{defaultMessage:"Delete saved query {savedQueryName}",values:{savedQueryName:savedQuery.attributes.title}}),"data-test-subj":"delete-saved-query-".concat(savedQuery.attributes.title,"-button")}:undefined}),showDeletionConfirmationModal&&_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverConfirmDeletionTitle",{defaultMessage:'Delete "{savedQueryName}"?',values:{savedQueryName:savedQuery.attributes.title}}),confirmButtonText:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverConfirmDeletionConfirmButtonText",{defaultMessage:"Delete"}),cancelButtonText:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverConfirmDeletionCancelButtonText",{defaultMessage:"Cancel"}),onConfirm:function onConfirm(){onDelete(savedQuery);setShowDeletionConfirmationModal(false)},buttonColor:"danger",onCancel:function onCancel(){setShowDeletionConfirmationModal(false)}})))};exports.SavedQueryListItem=SavedQueryListItem},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SavedQueryMeta",{enumerable:true,get:function get(){return _save_query_form.SavedQueryMeta}});Object.defineProperty(exports,"SaveQueryForm",{enumerable:true,get:function get(){return _save_query_form.SaveQueryForm}});var _save_query_form=__webpack_require__(602)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SaveQueryForm=SaveQueryForm;var _react=_interopRequireWildcard(__webpack_require__(22));var _eui=__webpack_require__(23);var _i18n=__webpack_require__(0);var _lodash=__webpack_require__(41);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function SaveQueryForm(_ref){var savedQuery=_ref.savedQuery,savedQueryService=_ref.savedQueryService,onSave=_ref.onSave,onClose=_ref.onClose,_ref$showFilterOption=_ref.showFilterOption,showFilterOption=_ref$showFilterOption===void 0?true:_ref$showFilterOption,_ref$showTimeFilterOp=_ref.showTimeFilterOption,showTimeFilterOption=_ref$showTimeFilterOp===void 0?true:_ref$showTimeFilterOp;var _useState=(0,_react.useState)(savedQuery?savedQuery.title:""),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=(0,_react.useState)(savedQuery?savedQuery.description:""),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=(0,_react.useState)([]),_useState6=_slicedToArray(_useState5,2),savedQueries=_useState6[0],setSavedQueries=_useState6[1];var _useState7=(0,_react.useState)(savedQuery?!!savedQuery.filters:true),_useState8=_slicedToArray(_useState7,2),shouldIncludeFilters=_useState8[0],setShouldIncludeFilters=_useState8[1];var _useState9=(0,_react.useState)(savedQuery?!!savedQuery.timefilter:false),_useState10=_slicedToArray(_useState9,2),shouldIncludeTimefilter=_useState10[0],setIncludeTimefilter=_useState10[1];var _useState11=(0,_react.useState)([]),_useState12=_slicedToArray(_useState11,2),formErrors=_useState12[0],setFormErrors=_useState12[1];(0,_react.useEffect)((function(){var fetchQueries=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var allSavedQueries,sortedAllSavedQueries;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return savedQueryService.getAllSavedQueries();case 2:allSavedQueries=_context.sent;sortedAllSavedQueries=(0,_lodash.sortBy)(allSavedQueries,"attributes.title");setSavedQueries(sortedAllSavedQueries);case 5:case"end":return _context.stop()}}}),_callee)})));return function fetchQueries(){return _ref2.apply(this,arguments)}}();fetchQueries()}),[savedQueryService]);var savedQueryDescriptionText=_i18n.i18n.translate("data.search.searchBar.savedQueryDescriptionText",{defaultMessage:"Save query text and filters that you want to use again."});var titleConflictErrorText=_i18n.i18n.translate("data.search.searchBar.savedQueryForm.titleConflictText",{defaultMessage:"Name conflicts with an existing saved query"});var titleMissingErrorText=_i18n.i18n.translate("data.search.searchBar.savedQueryForm.titleMissingText",{defaultMessage:"Name is required"});var whitespaceErrorText=_i18n.i18n.translate("data.search.searchBar.savedQueryForm.whitespaceErrorText",{defaultMessage:"Name cannot contain leading or trailing whitespace"});var validate=function validate(){var errors=[];if(!title.length){errors.push(titleMissingErrorText)}if(title.length>title.trim().length){errors.push(whitespaceErrorText)}if(!!savedQueries.find((function(existingSavedQuery){return!savedQuery&&existingSavedQuery.attributes.title===title}))){errors.push(titleConflictErrorText)}if(!(0,_lodash.isEqual)(errors,formErrors)){setFormErrors(errors)}};var hasErrors=formErrors.length>0;if(hasErrors){validate()}var saveQueryForm=_react.default.createElement(_eui.EuiForm,{isInvalid:hasErrors,error:formErrors,"data-test-subj":"saveQueryForm"},_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiText,{color:"subdued"},savedQueryDescriptionText)),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("data.search.searchBar.savedQueryNameLabelText",{defaultMessage:"Name"}),helpText:_i18n.i18n.translate("data.search.searchBar.savedQueryNameHelpText",{defaultMessage:"Name is required. Name cannot contain leading or trailing whitespace. Name must be unique."}),isInvalid:hasErrors},_react.default.createElement(_eui.EuiFieldText,{disabled:!!savedQuery,value:title,name:"title",onChange:function onChange(event){setTitle(event.target.value)},"data-test-subj":"saveQueryFormTitle",isInvalid:hasErrors,onBlur:validate})),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("data.search.searchBar.savedQueryDescriptionLabelText",{defaultMessage:"Description"})},_react.default.createElement(_eui.EuiFieldText,{value:description,name:"description",onChange:function onChange(event){setDescription(event.target.value)},"data-test-subj":"saveQueryFormDescription"})),showFilterOption&&_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiSwitch,{name:"shouldIncludeFilters",label:_i18n.i18n.translate("data.search.searchBar.savedQueryIncludeFiltersLabelText",{defaultMessage:"Include filters"}),checked:shouldIncludeFilters,onChange:function onChange(){setShouldIncludeFilters(!shouldIncludeFilters)},"data-test-subj":"saveQueryFormIncludeFiltersOption"})),showTimeFilterOption&&_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiSwitch,{name:"shouldIncludeTimefilter",label:_i18n.i18n.translate("data.search.searchBar.savedQueryIncludeTimeFilterLabelText",{defaultMessage:"Include time filter"}),checked:shouldIncludeTimefilter,onChange:function onChange(){setIncludeTimefilter(!shouldIncludeTimefilter)},"data-test-subj":"saveQueryFormIncludeTimeFilterOption"})));return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiModal,{onClose:onClose,initialFocus:"[name=title]"},_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,_i18n.i18n.translate("data.search.searchBar.savedQueryFormTitle",{defaultMessage:"Save query"}))),_react.default.createElement(_eui.EuiModalBody,null,saveQueryForm),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiButtonEmpty,{onClick:onClose,"data-test-subj":"savedQueryFormCancelButton"},_i18n.i18n.translate("data.search.searchBar.savedQueryFormCancelButtonText",{defaultMessage:"Cancel"})),_react.default.createElement(_eui.EuiButton,{onClick:function onClick(){return onSave({title:title,description:description,shouldIncludeFilters:shouldIncludeFilters,shouldIncludeTimefilter:shouldIncludeTimefilter})},fill:true,"data-test-subj":"savedQueryFormSaveButton",disabled:hasErrors},_i18n.i18n.translate("data.search.searchBar.savedQueryFormSaveButtonText",{defaultMessage:"Save"})))))}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getSearchErrorType=getSearchErrorType;exports.SearchError=void 0;function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchError=function(_Error){_inherits(SearchError,_Error);function SearchError(_ref){var _this;var status=_ref.status,title=_ref.title,message=_ref.message,path=_ref.path,type=_ref.type;_classCallCheck(this,SearchError);_this=_possibleConstructorReturn(this,_getPrototypeOf(SearchError).call(this,message));_defineProperty(_assertThisInitialized(_this),"name",void 0);_defineProperty(_assertThisInitialized(_this),"status",void 0);_defineProperty(_assertThisInitialized(_this),"title",void 0);_defineProperty(_assertThisInitialized(_this),"message",void 0);_defineProperty(_assertThisInitialized(_this),"path",void 0);_defineProperty(_assertThisInitialized(_this),"type",void 0);_this.name="SearchError";_this.status=status;_this.title=title;_this.message=message;_this.path=path;_this.type=type;if(Error.captureStackTrace){Error.captureStackTrace(_assertThisInitialized(_this),SearchError)}Object.setPrototypeOf(_assertThisInitialized(_this),SearchError.prototype);return _this}return SearchError}(_wrapNativeSuper(Error));exports.SearchError=SearchError;function getSearchErrorType(_ref2){var message=_ref2.message;var msg=message.toLowerCase();if(msg.indexOf("unsupported query")>-1){return"UNSUPPORTED_QUERY"}}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.defaultSearchStrategy=void 0;var _index_patterns=__webpack_require__(112);var _get_search_params=__webpack_require__(606);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var defaultSearchStrategy={id:"default",search:function search(params){return params.config.get("courier:batchSearches")?msearch(params):_search(params)},isViable:function isViable(indexPattern){return indexPattern&&(0,_index_patterns.isDefault)(indexPattern)}};exports.defaultSearchStrategy=defaultSearchStrategy;function msearch(_ref){var searchRequests=_ref.searchRequests,searchService=_ref.searchService,config=_ref.config,esShardTimeout=_ref.esShardTimeout;var es=searchService.__LEGACY.esClient;var inlineRequests=searchRequests.map((function(_ref2){var index=_ref2.index,body=_ref2.body,searchType=_ref2.search_type;var inlineHeader={index:index.title||index,search_type:searchType,ignore_unavailable:true,preference:(0,_get_search_params.getPreference)(config)};var inlineBody=_objectSpread({},body,{timeout:(0,_get_search_params.getTimeout)(esShardTimeout)});return"".concat(JSON.stringify(inlineHeader),"\n").concat(JSON.stringify(inlineBody))}));var searching=es.msearch(_objectSpread({},(0,_get_search_params.getMSearchParams)(config),{body:"".concat(inlineRequests.join("\n"),"\n")}));return{searching:searching.then((function(_ref3){var responses=_ref3.responses;return responses})),abort:searching.abort}}function _search(_ref4){var searchRequests=_ref4.searchRequests,searchService=_ref4.searchService,config=_ref4.config,esShardTimeout=_ref4.esShardTimeout;var abortController=new AbortController;var searchParams=(0,_get_search_params.getSearchParams)(config,esShardTimeout);var promises=searchRequests.map((function(_ref5){var index=_ref5.index,indexType=_ref5.indexType,body=_ref5.body;var params=_objectSpread({index:index.title||index,body:body},searchParams);var signal=abortController.signal;return searchService.search({params:params,indexType:indexType},{signal:signal}).toPromise().then((function(_ref6){var rawResponse=_ref6.rawResponse;return rawResponse}))}));return{searching:Promise.all(promises),abort:function abort(){return abortController.abort()}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getMSearchParams=getMSearchParams;exports.getSearchParams=getSearchParams;exports.getPreference=getPreference;exports.getTimeout=getTimeout;var sessionId=Date.now();function getMSearchParams(config){return{rest_total_hits_as_int:true,ignore_throttled:getIgnoreThrottled(config),max_concurrent_shard_requests:getMaxConcurrentShardRequests(config)}}function getSearchParams(config){var esShardTimeout=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return{rest_total_hits_as_int:true,ignore_unavailable:true,ignore_throttled:getIgnoreThrottled(config),max_concurrent_shard_requests:getMaxConcurrentShardRequests(config),preference:getPreference(config),timeout:getTimeout(esShardTimeout)}}function getIgnoreThrottled(config){return!config.get("search:includeFrozen")}function getMaxConcurrentShardRequests(config){var maxConcurrentShardRequests=config.get("courier:maxConcurrentShardRequests");return maxConcurrentShardRequests>0?maxConcurrentShardRequests:undefined}function getPreference(config){var setRequestPreference=config.get("courier:setRequestPreference");if(setRequestPreference==="sessionId")return sessionId;return setRequestPreference==="custom"?config.get("courier:customRequestPreference"):undefined}function getTimeout(esShardTimeout){return esShardTimeout>0?"".concat(esShardTimeout,"ms"):undefined}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestFailure=void 0;var _public=__webpack_require__(26);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestFailure=function(_KbnError){_inherits(RequestFailure,_KbnError);function RequestFailure(){var _this;var err=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var resp=arguments.length>1?arguments[1]:undefined;_classCallCheck(this,RequestFailure);_this=_possibleConstructorReturn(this,_getPrototypeOf(RequestFailure).call(this,"Request to Elasticsearch failed: ".concat(JSON.stringify(resp||(err===null||err===void 0?void 0:err.message)))));_defineProperty(_assertThisInitialized(_this),"resp",void 0);_this.resp=resp;return _this}return RequestFailure}(_public.KbnError);exports.RequestFailure=RequestFailure},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ISearchSource",{enumerable:true,get:function get(){return _search_source.ISearchSource}});exports.SortDirection=void 0;var _search_source=__webpack_require__(211);var SortDirection;exports.SortDirection=SortDirection;(function(SortDirection){SortDirection["asc"]="asc";SortDirection["desc"]="desc"})(SortDirection||(exports.SortDirection=SortDirection={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tabifyAggResponse=tabifyAggResponse;var _lodash=__webpack_require__(41);var _response_writer=__webpack_require__(610);var _buckets=__webpack_require__(611);var _aggs=__webpack_require__(88);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function tabifyAggResponse(aggConfigs,esResponse,respOpts){function collectBucket(aggs,write,bucket,key,aggScale){var column=write.columns.shift();if(column){var agg=column.aggConfig;var aggInfo=agg.write(aggs);aggScale*=aggInfo.metricScale||1;switch(agg.type.type){case _aggs.AggGroupNames.Buckets:var aggBucket=(0,_lodash.get)(bucket,agg.id);var tabifyBuckets=new _buckets.TabifyBuckets(aggBucket,agg.params,timeRange);if(tabifyBuckets.length){tabifyBuckets.forEach((function(subBucket,tabifyBucketKey){var bucketValue=agg.getKey(subBucket,tabifyBucketKey);var hasBucketValue=typeof bucketValue!=="undefined";if(hasBucketValue){write.bucketBuffer.push({id:column.id,value:bucketValue})}collectBucket(aggs,write,subBucket,agg.getKey(subBucket,tabifyBucketKey),aggScale);if(hasBucketValue){write.bucketBuffer.pop()}}))}else if(respOpts===null||respOpts===void 0?void 0:respOpts.partialRows){write.columns.unshift(column);passEmptyBuckets(aggs,write,bucket,key,aggScale);write.columns.shift()}else{write.row()}break;case _aggs.AggGroupNames.Metrics:var value=agg.getValue(bucket);if(aggScale!==1){value*=aggScale}write.metricBuffer.push({id:column.id,value:value});if(!write.columns.length){write.row()}else{collectBucket(aggs,write,bucket,key,aggScale)}write.metricBuffer.pop();break}write.columns.unshift(column)}}function passEmptyBuckets(aggs,write,bucket,key,aggScale){var column=write.columns.shift();if(column){var agg=column.aggConfig;switch(agg.type.type){case _aggs.AggGroupNames.Metrics:write.columns.unshift(column);collectBucket(aggs,write,bucket,key,aggScale);return;case _aggs.AggGroupNames.Buckets:passEmptyBuckets(aggs,write,bucket,key,aggScale)}write.columns.unshift(column)}}var write=new _response_writer.TabbedAggResponseWriter(aggConfigs,respOpts||{});var topLevelBucket=_objectSpread({},esResponse.aggregations,{doc_count:esResponse.hits.total});var timeRange;if(respOpts&&respOpts.timeRange){var _Object$keys=Object.keys(respOpts.timeRange),_Object$keys2=_slicedToArray(_Object$keys,1),timeRangeKey=_Object$keys2[0];if(timeRangeKey){timeRange=_objectSpread({name:timeRangeKey},respOpts.timeRange[timeRangeKey])}}collectBucket(aggConfigs,write,topLevelBucket,"",1);return write.response()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TabbedAggResponseWriter=void 0;var _lodash=__webpack_require__(41);var _get_columns=__webpack_require__(220);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TabbedAggResponseWriter=function(){function TabbedAggResponseWriter(aggs,_ref){var _ref$metricsAtAllLeve=_ref.metricsAtAllLevels,metricsAtAllLevels=_ref$metricsAtAllLeve===void 0?false:_ref$metricsAtAllLeve,_ref$partialRows=_ref.partialRows,partialRows=_ref$partialRows===void 0?false:_ref$partialRows;_classCallCheck(this,TabbedAggResponseWriter);_defineProperty(this,"columns",void 0);_defineProperty(this,"rows",[]);_defineProperty(this,"bucketBuffer",[]);_defineProperty(this,"metricBuffer",[]);_defineProperty(this,"partialRows",void 0);this.partialRows=partialRows;this.columns=(0,_get_columns.tabifyGetColumns)(aggs.getResponseAggs(),!metricsAtAllLevels);this.rows=[]}_createClass(TabbedAggResponseWriter,[{key:"row",value:function row(){var rowBuffer={};this.bucketBuffer.forEach((function(bucket){rowBuffer[bucket.id]=bucket.value}));this.metricBuffer.forEach((function(metric){rowBuffer[metric.id]=metric.value}));var isPartialRow=!this.columns.every((function(column){return rowBuffer.hasOwnProperty(column.id)}));var removePartial=isPartialRow&&!this.partialRows;if(!(0,_lodash.isEmpty)(rowBuffer)&&!removePartial){this.rows.push(rowBuffer)}}},{key:"response",value:function response(){return{columns:this.columns,rows:this.rows}}}]);return TabbedAggResponseWriter}();exports.TabbedAggResponseWriter=TabbedAggResponseWriter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TabifyBuckets=void 0;var _lodash=__webpack_require__(41);var _moment=_interopRequireDefault(__webpack_require__(27));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var isRangeEqual=function isRangeEqual(range1,range2){return(range1===null||range1===void 0?void 0:range1.from)===(range2===null||range2===void 0?void 0:range2.from)&&(range1===null||range1===void 0?void 0:range1.to)===(range2===null||range2===void 0?void 0:range2.to)};var TabifyBuckets=function(){function TabifyBuckets(aggResp,aggParams,timeRange){_classCallCheck(this,TabifyBuckets);_defineProperty(this,"length",void 0);_defineProperty(this,"objectMode",void 0);_defineProperty(this,"buckets",void 0);_defineProperty(this,"_keys",[]);if(aggResp&&aggResp.buckets){this.buckets=aggResp.buckets}else if(aggResp){this.buckets=[aggResp]}else{this.buckets=[]}this.objectMode=(0,_lodash.isPlainObject)(this.buckets);if(this.objectMode){this._keys=(0,_lodash.keys)(this.buckets);this.length=this._keys.length}else{this.length=this.buckets.length}if(this.length&&aggParams){this.orderBucketsAccordingToParams(aggParams);if(aggParams.drop_partials){this.dropPartials(aggParams,timeRange)}}}_createClass(TabifyBuckets,[{key:"forEach",value:function forEach(fn){var buckets=this.buckets;if(this.objectMode){this._keys.forEach((function(key){fn(buckets[key],key)}))}else{buckets.forEach((function(bucket){fn(bucket,bucket.key)}))}}},{key:"orderBucketsAccordingToParams",value:function orderBucketsAccordingToParams(params){var _this=this;if(params.filters&&this.objectMode){this._keys=params.filters.map((function(filter){var query=(0,_lodash.get)(filter,"input.query.query_string.query",filter.input.query);var queryString=typeof query==="string"?query:JSON.stringify(query);return filter.label||queryString||"*"}))}else if(params.ranges&&this.objectMode){this._keys=params.ranges.map((function(range){return(0,_lodash.findKey)(_this.buckets,(function(el){return isRangeEqual(el,range)}))}))}else if(params.ranges&&params.field.type!=="date"){var ranges=params.ranges;if(params.ipRangeType){ranges=params.ipRangeType==="mask"?ranges.mask:ranges.fromTo}this.buckets=ranges.map((function(range){if(range.mask){return _this.buckets.find((function(el){return el.key===range.mask}))}return _this.buckets.find((function(el){return isRangeEqual(el,range)}))}))}}},{key:"dropPartials",value:function dropPartials(params,timeRange){if(!timeRange||this.buckets.length<=1||this.objectMode||params.field.name!==timeRange.name){return}var interval=this.buckets[1].key-this.buckets[0].key;this.buckets=this.buckets.filter((function(bucket){if((0,_moment.default)(bucket.key).isBefore(timeRange.gte)){return false}if((0,_moment.default)(bucket.key+interval).isAfter(timeRange.lte)){return false}return true}));this.length=this.buckets.length}}]);return TabifyBuckets}();exports.TabifyBuckets=TabifyBuckets},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildTabularInspectorData=buildTabularInspectorData;var _lodash=__webpack_require__(41);var _public=__webpack_require__(614);var _create_filter=__webpack_require__(650);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function buildTabularInspectorData(_x,_x2){return _buildTabularInspectorData.apply(this,arguments)}function _buildTabularInspectorData(){_buildTabularInspectorData=_asyncToGenerator(regeneratorRuntime.mark((function _callee(table,queryFilter){var aggConfigs,rows,columns;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:aggConfigs=table.columns.map((function(column){return column.aggConfig}));rows=table.rows.map((function(row){return table.columns.reduce((function(prev,cur,colIndex){var value=row[cur.id];var fieldFormatter=cur.aggConfig.fieldFormatter("text");prev["col-".concat(colIndex,"-").concat(cur.aggConfig.id)]=new _public.FormattedData(value,fieldFormatter(value));return prev}),{})}));columns=table.columns.map((function(col,colIndex){var field=col.aggConfig.getField();var isCellContentFilterable=col.aggConfig.isFilterable()&&(!field||field.filterable);return{name:col.name,field:"col-".concat(colIndex,"-").concat(col.aggConfig.id),filter:isCellContentFilterable&&function(value){var rowIndex=rows.findIndex((function(row){return row["col-".concat(colIndex,"-").concat(col.aggConfig.id)].raw===value.raw}));var filter=(0,_create_filter.createFilter)(aggConfigs,table,colIndex,rowIndex,value.raw);if(filter){queryFilter.addFilters(filter)}},filterOut:isCellContentFilterable&&function(value){var rowIndex=rows.findIndex((function(row){return row["col-".concat(colIndex,"-").concat(col.aggConfig.id)].raw===value.raw}));var filter=(0,_create_filter.createFilter)(aggConfigs,table,colIndex,rowIndex,value.raw);if(filter){var notOther=value.raw!=="__other__";var notMissing=value.raw!=="__missing__";if(Array.isArray(filter)){filter.forEach((function(f){return(0,_lodash.set)(f,"meta.negate",notOther&&notMissing)}))}else{(0,_lodash.set)(filter,"meta.negate",notOther&&notMissing)}queryFilter.addFilters(filter)}}}}));return _context.abrupt("return",{columns:columns,rows:rows});case 4:case"end":return _context.stop()}}}),_callee)})));return _buildTabularInspectorData.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={plugin:true,Plugin:true,Setup:true,Start:true};exports.plugin=plugin;Object.defineProperty(exports,"Plugin",{enumerable:true,get:function get(){return _plugin.InspectorPublicPlugin}});Object.defineProperty(exports,"Setup",{enumerable:true,get:function get(){return _plugin.Setup}});Object.defineProperty(exports,"Start",{enumerable:true,get:function get(){return _plugin.Start}});__webpack_require__(615);var _plugin=__webpack_require__(620);var _types=__webpack_require__(649);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _adapters=__webpack_require__(119);Object.keys(_adapters).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _adapters[key]}})}));function plugin(initializerContext){return new _plugin.InspectorPublicPlugin(initializerContext)}},function(module,exports,__webpack_require__){if(window.__kbnDarkMode__){__webpack_require__(616)}else{__webpack_require__(618)}},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(617);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".insDataTableFormat__filter {\n  opacity: 0; }\n\n.insDataTableFormat__table tr:hover .insDataTableFormat__filter,\n.insDataTableFormat__filter:focus {\n  opacity: 1; }\n\n.insRequestDetailsStats__icon {\n  margin-right: 8px; }\n\n.insRequestSelector__singleRequest {\n  height: 32px;\n  padding: 0 8px;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n.insRequestSelector__menuSpinner {\n  margin-left: 8px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(1);var content=__webpack_require__(619);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(2);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".insDataTableFormat__filter {\n  opacity: 0; }\n\n.insDataTableFormat__table tr:hover .insDataTableFormat__filter,\n.insDataTableFormat__filter:focus {\n  opacity: 1; }\n\n.insRequestDetailsStats__icon {\n  margin-right: 8px; }\n\n.insRequestSelector__singleRequest {\n  height: 32px;\n  padding: 0 8px;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n.insRequestSelector__menuSpinner {\n  margin-left: 8px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorPublicPlugin=void 0;var _i18n=__webpack_require__(0);var React=_interopRequireWildcard(__webpack_require__(22));var _public=__webpack_require__(25);var _view_registry=__webpack_require__(621);var _inspector_panel=__webpack_require__(622);var _views=__webpack_require__(624);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var InspectorPublicPlugin=function(){function InspectorPublicPlugin(initializerContext){_classCallCheck(this,InspectorPublicPlugin);_defineProperty(this,"views",void 0)}_createClass(InspectorPublicPlugin,[{key:"setup",value:function(){var _setup=_asyncToGenerator(regeneratorRuntime.mark((function _callee(core){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.views=new _view_registry.InspectorViewRegistry;this.views.register((0,_views.getDataViewDescription)(core.uiSettings));this.views.register((0,_views.getRequestsViewDescription)());return _context.abrupt("return",{registerView:this.views.register.bind(this.views),__LEGACY:{views:this.views}});case 4:case"end":return _context.stop()}}}),_callee,this)})));function setup(_x){return _setup.apply(this,arguments)}return setup}()},{key:"start",value:function start(core){var _this=this;var isAvailable=function isAvailable(adapters){return _this.views.getVisible(adapters).length>0};var closeButtonLabel=_i18n.i18n.translate("inspector.closeButton",{defaultMessage:"Close Inspector"});var open=function open(adapters){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var views=_this.views.getVisible(adapters);if(!views||views.length===0){throw new Error("Tried to open an inspector without views being available.\n          Make sure to call Inspector.isAvailable() with the same adapters before to check\n          if an inspector can be shown.")}return core.overlays.openFlyout((0,_public.toMountPoint)(React.createElement(_inspector_panel.InspectorPanel,{views:views,adapters:adapters,title:options.title})),{"data-test-subj":"inspectorPanel",closeButtonAriaLabel:closeButtonLabel})};return{isAvailable:isAvailable,open:open}}},{key:"stop",value:function stop(){}}]);return InspectorPublicPlugin}();exports.InspectorPublicPlugin=InspectorPublicPlugin},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorViewRegistry=void 0;var _events=__webpack_require__(94);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var InspectorViewRegistry=function(_EventEmitter){_inherits(InspectorViewRegistry,_EventEmitter);function InspectorViewRegistry(){var _getPrototypeOf2;var _this;_classCallCheck(this,InspectorViewRegistry);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(InspectorViewRegistry)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"views",[]);return _this}_createClass(InspectorViewRegistry,[{key:"register",value:function register(view){if(!view){return}this.views.push(view);this.views.sort((function(a,b){return(a.order||Number.MAX_VALUE)-(b.order||Number.MAX_VALUE)}));this.emit("change")}},{key:"getAll",value:function getAll(){return this.views}},{key:"getVisible",value:function getVisible(adapters){if(!adapters){return[]}return this.views.filter((function(view){return!view.shouldShow||view.shouldShow(adapters)}))}}]);return InspectorViewRegistry}(_events.EventEmitter);exports.InspectorViewRegistry=InspectorViewRegistry},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorPanel=void 0;var _i18n=__webpack_require__(0);var _react=_interopRequireWildcard(__webpack_require__(22));var _propTypes=_interopRequireDefault(__webpack_require__(43));var _eui=__webpack_require__(23);var _inspector_view_chooser=__webpack_require__(623);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function hasAdaptersChanged(oldAdapters,newAdapters){return Object.keys(oldAdapters).length!==Object.keys(newAdapters).length||Object.keys(oldAdapters).some((function(key){return oldAdapters[key]!==newAdapters[key]}))}var inspectorTitle=_i18n.i18n.translate("inspector.title",{defaultMessage:"Inspector"});var InspectorPanel=function(_Component){_inherits(InspectorPanel,_Component);function InspectorPanel(){var _getPrototypeOf2;var _this;_classCallCheck(this,InspectorPanel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(InspectorPanel)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{selectedView:_this.props.views[0],views:_this.props.views,adapters:_objectSpread({},_this.props.adapters)});_defineProperty(_assertThisInitialized(_this),"onViewSelected",(function(view){if(view!==_this.state.selectedView){_this.setState({selectedView:view})}}));return _this}_createClass(InspectorPanel,[{key:"renderSelectedPanel",value:function renderSelectedPanel(){return _react.default.createElement(this.state.selectedView.component,{adapters:this.props.adapters,title:this.props.title||""})}},{key:"render",value:function render(){var _this$props=this.props,views=_this$props.views,title=_this$props.title;var selectedView=this.state.selectedView;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h1",null,title))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_inspector_view_chooser.InspectorViewChooser,{views:views,onViewSelected:this.onViewSelected,selectedView:selectedView})))),_react.default.createElement(_eui.EuiFlyoutBody,null,this.renderSelectedPanel()))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){if(hasAdaptersChanged(prevState.adapters,nextProps.adapters)){throw new Error("Adapters are not allowed to be changed on an open InspectorPanel.")}var selectedViewMustChange=nextProps.views!==prevState.views&&!nextProps.views.includes(prevState.selectedView);return{views:nextProps.views,selectedView:selectedViewMustChange?nextProps.views[0]:prevState.selectedView}}}]);return InspectorPanel}(_react.Component);exports.InspectorPanel=InspectorPanel;_defineProperty(InspectorPanel,"defaultProps",{title:inspectorTitle});_defineProperty(InspectorPanel,"propTypes",{adapters:_propTypes.default.object.isRequired,views:function views(props,propName,componentName){if(!Array.isArray(props.views)||props.views.length<1){throw new Error("".concat(propName," prop must be an array of at least one element in ").concat(componentName,"."))}},title:_propTypes.default.string})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorViewChooser=void 0;var _react=__webpack_require__(24);var _react2=_interopRequireWildcard(__webpack_require__(22));var _propTypes=_interopRequireDefault(__webpack_require__(43));var _eui=__webpack_require__(23);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var InspectorViewChooser=function(_Component){_inherits(InspectorViewChooser,_Component);function InspectorViewChooser(){var _getPrototypeOf2;var _this;_classCallCheck(this,InspectorViewChooser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(InspectorViewChooser)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isSelectorOpen:false});_defineProperty(_assertThisInitialized(_this),"toggleSelector",(function(){_this.setState((function(prev){return{isSelectorOpen:!prev.isSelectorOpen}}))}));_defineProperty(_assertThisInitialized(_this),"closeSelector",(function(){_this.setState({isSelectorOpen:false})}));_defineProperty(_assertThisInitialized(_this),"renderView",(function(view,index){return _react2.default.createElement(_eui.EuiContextMenuItem,{key:index,onClick:function onClick(){_this.props.onViewSelected(view);_this.closeSelector()},toolTipContent:view.help,toolTipPosition:"left","data-test-subj":"inspectorViewChooser".concat(view.title)},view.title)}));return _this}_createClass(InspectorViewChooser,[{key:"renderViewButton",value:function renderViewButton(){return _react2.default.createElement(_eui.EuiButtonEmpty,{size:"s",iconType:"arrowDown",iconSide:"right",onClick:this.toggleSelector,"data-test-subj":"inspectorViewChooser"},_react2.default.createElement(_react.FormattedMessage,{id:"inspector.view",defaultMessage:"View: {viewName}",values:{viewName:this.props.selectedView.title}}))}},{key:"renderSingleView",value:function renderSingleView(){return _react2.default.createElement(_eui.EuiToolTip,{position:"bottom",content:this.props.selectedView.help},_react2.default.createElement(_react.FormattedMessage,{id:"inspector.view",defaultMessage:"View: {viewName}",values:{viewName:this.props.selectedView.title}}))}},{key:"render",value:function render(){var views=this.props.views;if(views.length<2){return this.renderSingleView()}var triggerButton=this.renderViewButton();return _react2.default.createElement(_eui.EuiPopover,{id:"inspectorViewChooser",ownFocus:true,button:triggerButton,isOpen:this.state.isSelectorOpen,closePopover:this.closeSelector,panelPaddingSize:"none",anchorPosition:"downRight",repositionOnScroll:true},_react2.default.createElement(_eui.EuiContextMenuPanel,{items:views.map(this.renderView)}))}}]);return InspectorViewChooser}(_react2.Component);exports.InspectorViewChooser=InspectorViewChooser;_defineProperty(InspectorViewChooser,"propTypes",{views:_propTypes.default.array.isRequired,onViewSelected:_propTypes.default.func.isRequired,selectedView:_propTypes.default.object.isRequired})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getDataViewDescription",{enumerable:true,get:function get(){return _data.getDataViewDescription}});Object.defineProperty(exports,"getRequestsViewDescription",{enumerable:true,get:function get(){return _requests.getRequestsViewDescription}});var _data=__webpack_require__(625);var _requests=__webpack_require__(632)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDataViewDescription=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _i18n=__webpack_require__(0);var _data_view=__webpack_require__(626);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var getDataViewDescription=function getDataViewDescription(uiSettings){return{title:_i18n.i18n.translate("inspector.data.dataTitle",{defaultMessage:"Data"}),order:10,help:_i18n.i18n.translate("inspector.data.dataDescriptionTooltip",{defaultMessage:"View the data behind the visualization"}),shouldShow:function shouldShow(adapters){return Boolean(adapters.data)},component:function component(props){return _react.default.createElement(_data_view.DataViewComponent,_extends({},props,{uiSettings:uiSettings}))}}};exports.getDataViewDescription=getDataViewDescription},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DataViewComponent=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _propTypes=_interopRequireDefault(__webpack_require__(43));var _react2=__webpack_require__(24);var _eui=__webpack_require__(23);var _data_table=__webpack_require__(627);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataViewComponent=function(_Component){_inherits(DataViewComponent,_Component);function DataViewComponent(){var _getPrototypeOf2;var _this;_classCallCheck(this,DataViewComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DataViewComponent)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{});_defineProperty(_assertThisInitialized(_this),"_isMounted",false);_defineProperty(_assertThisInitialized(_this),"onUpdateData",(function(type){if(type==="tabular"){_this.setState({tabularData:null,tabularOptions:{},tabularPromise:_this.props.adapters.data.getTabular()})}}));return _this}_createClass(DataViewComponent,[{key:"finishLoadingData",value:function(){var _finishLoadingData=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var tabularPromise,tabularData;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:tabularPromise=this.state.tabularPromise;if(!tabularPromise){_context.next=6;break}_context.next=4;return tabularPromise;case 4:tabularData=_context.sent;if(this._isMounted){this.setState({tabularData:tabularData.data,tabularOptions:tabularData.options,tabularPromise:null})}case 6:case"end":return _context.stop()}}}),_callee,this)})));function finishLoadingData(){return _finishLoadingData.apply(this,arguments)}return finishLoadingData}()},{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true;this.props.adapters.data.on("change",this.onUpdateData);this.finishLoadingData()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false;this.props.adapters.data.removeListener("change",this.onUpdateData)}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.finishLoadingData()}},{key:"render",value:function render(){if(this.state.tabularPromise){return DataViewComponent.renderLoading()}else if(!this.state.tabularData){return DataViewComponent.renderNoData()}return _react.default.createElement(_data_table.DataTableFormat,{data:this.state.tabularData,isFormatted:this.state.tabularOptions.returnsFormattedValues,exportTitle:this.props.title,uiSettings:this.props.uiSettings})}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,state){if(state&&nextProps.adapters===state.adapters){return null}return{adapters:nextProps.adapters,tabularData:null,tabularOptions:{},tabularPromise:nextProps.adapters.data.getTabular()}}},{key:"renderNoData",value:function renderNoData(){return _react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.noDataAvailableTitle",defaultMessage:"No data available"})),body:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.noDataAvailableDescription",defaultMessage:"The element did not provide any data."})))})}},{key:"renderLoading",value:function renderLoading(){return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center",alignItems:"center",style:{height:"100%"}},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiPanel,{className:"eui-textCenter"},_react.default.createElement(_eui.EuiLoadingChart,{size:"m"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.gatheringDataLabel",defaultMessage:"Gathering data"}))))))}}]);return DataViewComponent}(_react.Component);exports.DataViewComponent=DataViewComponent;_defineProperty(DataViewComponent,"propTypes",{uiSettings:_propTypes.default.object.isRequired,adapters:_propTypes.default.object.isRequired,title:_propTypes.default.string.isRequired})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DataTableFormat=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _propTypes=_interopRequireDefault(__webpack_require__(43));var _eui=__webpack_require__(23);var _react2=__webpack_require__(24);var _i18n=__webpack_require__(0);var _download_options=__webpack_require__(628);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataTableFormat=function(_Component){_inherits(DataTableFormat,_Component);function DataTableFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,DataTableFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DataTableFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"csvSeparator",_this.props.uiSettings.get("csv:separator",","));_defineProperty(_assertThisInitialized(_this),"quoteValues",_this.props.uiSettings.get("csv:quoteValues",true));_defineProperty(_assertThisInitialized(_this),"state",{});return _this}_createClass(DataTableFormat,[{key:"render",value:function render(){var _this$state=this.state,columns=_this$state.columns,rows=_this$state.rows;var pagination={pageSizeOptions:[10,20,50],initialPageSize:20};return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:true}),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_download_options.DataDownloadOptions,{isFormatted:this.props.isFormatted,title:this.props.exportTitle,csvSeparator:this.csvSeparator,quoteValues:this.quoteValues,columns:columns,rows:rows}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiInMemoryTable,{className:"insDataTableFormat__table","data-test-subj":"inspectorTable",columns:columns,items:rows,sorting:true,pagination:pagination}))}}],[{key:"renderCell",value:function renderCell(dataColumn,value){var isFormatted=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return _react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},isFormatted?value.formatted:value),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"none",alignItems:"center"},dataColumn.filter&&_react.default.createElement(_eui.EuiToolTip,{position:"bottom",content:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.filterForValueButtonTooltip",defaultMessage:"Filter for value"})},_react.default.createElement(_eui.EuiButtonIcon,{iconType:"plusInCircle",color:"text","aria-label":_i18n.i18n.translate("inspector.data.filterForValueButtonAriaLabel",{defaultMessage:"Filter for value"}),"data-test-subj":"filterForInspectorCellValue",className:"insDataTableFormat__filter",onClick:function onClick(){return dataColumn.filter(value)}})),dataColumn.filterOut&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiToolTip,{position:"bottom",content:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.filterOutValueButtonTooltip",defaultMessage:"Filter out value"})},_react.default.createElement(_eui.EuiButtonIcon,{iconType:"minusInCircle",color:"text","aria-label":_i18n.i18n.translate("inspector.data.filterOutValueButtonAriaLabel",{defaultMessage:"Filter out value"}),"data-test-subj":"filterOutInspectorCellValue",className:"insDataTableFormat__filter",onClick:function onClick(){return dataColumn.filterOut(value)}}))))))}},{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(_ref){var data=_ref.data,isFormatted=_ref.isFormatted;if(!data){return{columns:null,rows:null}}var columns=data.columns.map((function(dataColumn){return{name:dataColumn.name,field:dataColumn.field,sortable:isFormatted?function(row){return row[dataColumn.field].raw}:true,render:function render(value){return DataTableFormat.renderCell(dataColumn,value,isFormatted)}}}));return{columns:columns,rows:data.rows}}}]);return DataTableFormat}(_react.Component);exports.DataTableFormat=DataTableFormat;_defineProperty(DataTableFormat,"propTypes",{data:_propTypes.default.object.isRequired,exportTitle:_propTypes.default.string.isRequired,uiSettings:_propTypes.default.object.isRequired,isFormatted:_propTypes.default.bool})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DataDownloadOptions=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _propTypes=_interopRequireDefault(__webpack_require__(43));var _react2=__webpack_require__(24);var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _export_csv=__webpack_require__(629);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataDownloadOptions=function(_Component){_inherits(DataDownloadOptions,_Component);function DataDownloadOptions(){var _getPrototypeOf2;var _this;_classCallCheck(this,DataDownloadOptions);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DataDownloadOptions)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"onTogglePopover",(function(){_this.setState((function(state){return{isPopoverOpen:!state.isPopoverOpen}}))}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({isPopoverOpen:false})}));_defineProperty(_assertThisInitialized(_this),"exportCsv",(function(){var customParams=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var filename=_this.props.title;if(!filename||filename.length===0){filename=_i18n.i18n.translate("inspector.data.downloadOptionsUnsavedFilename",{defaultMessage:"unsaved"})}(0,_export_csv.exportAsCsv)(_objectSpread({filename:"".concat(filename,".csv"),columns:_this.props.columns,rows:_this.props.rows,csvSeparator:_this.props.csvSeparator,quoteValues:_this.props.quoteValues},customParams))}));_defineProperty(_assertThisInitialized(_this),"exportFormattedCsv",(function(){_this.exportCsv({valueFormatter:function valueFormatter(item){return item.formatted}})}));_defineProperty(_assertThisInitialized(_this),"exportFormattedAsRawCsv",(function(){_this.exportCsv({valueFormatter:function valueFormatter(item){return item.raw}})}));return _this}_createClass(DataDownloadOptions,[{key:"renderUnformattedDownload",value:function renderUnformattedDownload(){return _react.default.createElement(_eui.EuiButton,{size:"s",onClick:this.exportCsv},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.downloadCSVButtonLabel",defaultMessage:"Download CSV"}))}},{key:"renderFormattedDownloads",value:function renderFormattedDownloads(){var button=_react.default.createElement(_eui.EuiButton,{iconType:"arrowDown",iconSide:"right",size:"s",onClick:this.onTogglePopover},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.downloadCSVToggleButtonLabel",defaultMessage:"Download CSV"}));var items=[_react.default.createElement(_eui.EuiContextMenuItem,{key:"csv",onClick:this.exportFormattedCsv,toolTipContent:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.formattedCSVButtonTooltip",defaultMessage:"Download the data in table format"}),toolTipPosition:"left"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.formattedCSVButtonLabel",defaultMessage:"Formatted CSV"})),_react.default.createElement(_eui.EuiContextMenuItem,{key:"rawCsv",onClick:this.exportFormattedAsRawCsv,toolTipContent:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.rawCSVButtonTooltip",defaultMessage:"Download the data as provided, for example, dates as timestamps"}),toolTipPosition:"left"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.rawCSVButtonLabel",defaultMessage:"Raw CSV"}))];return _react.default.createElement(_eui.EuiPopover,{id:"inspectorDownloadData",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",repositionOnScroll:true},_react.default.createElement(_eui.EuiContextMenuPanel,{className:"eui-textNoWrap",items:items}))}},{key:"render",value:function render(){return this.props.isFormatted?this.renderFormattedDownloads():this.renderUnformattedDownload()}}]);return DataDownloadOptions}(_react.Component);exports.DataDownloadOptions=DataDownloadOptions;_defineProperty(DataDownloadOptions,"propTypes",{title:_propTypes.default.string.isRequired,csvSeparator:_propTypes.default.string.isRequired,quoteValues:_propTypes.default.bool.isRequired,isFormatted:_propTypes.default.bool,columns:_propTypes.default.array,rows:_propTypes.default.array})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.exportAsCsv=exportAsCsv;var _lodash=__webpack_require__(41);var _filesaver=__webpack_require__(630);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var LINE_FEED_CHARACTER="\r\n";var nonAlphaNumRE=/[^a-zA-Z0-9]/;var allDoubleQuoteRE=/"/g;function escape(val,quoteValues){if((0,_lodash.isObject)(val)){val=val.valueOf()}val=String(val);if(quoteValues&&nonAlphaNumRE.test(val)){val='"'.concat(val.replace(allDoubleQuoteRE,'""'),'"')}return val}function buildCsv(columns,rows,csvSeparator,quoteValues,valueFormatter){var header=columns.map((function(col){return escape(col.name,quoteValues)}));var orderedFieldNames=columns.map((function(col){return col.field}));var csvRows=rows.map((function(row){return orderedFieldNames.map((function(field){return escape(valueFormatter?valueFormatter(row[field]):row[field],quoteValues)}))}));return[header].concat(_toConsumableArray(csvRows)).map((function(row){return row.join(csvSeparator)})).join(LINE_FEED_CHARACTER)+LINE_FEED_CHARACTER}function exportAsCsv(_ref){var filename=_ref.filename,columns=_ref.columns,rows=_ref.rows,valueFormatter=_ref.valueFormatter,csvSeparator=_ref.csvSeparator,quoteValues=_ref.quoteValues;var type="text/plain;charset=utf-8";var csv=new Blob([buildCsv(columns,rows,csvSeparator,quoteValues,valueFormatter)],{type:type});(0,_filesaver.saveAs)(csv,filename)}},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRequestsViewDescription=void 0;var _i18n=__webpack_require__(0);var _requests_view=__webpack_require__(633);var getRequestsViewDescription=function getRequestsViewDescription(){return{title:_i18n.i18n.translate("inspector.requests.requestsTitle",{defaultMessage:"Requests"}),order:20,help:_i18n.i18n.translate("inspector.requests.requestsDescriptionTooltip",{defaultMessage:"View the requests that collected the data"}),shouldShow:function shouldShow(adapters){return Boolean(adapters.requests)},component:_requests_view.RequestsViewComponent}};exports.getRequestsViewDescription=getRequestsViewDescription},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestsViewComponent=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _propTypes=_interopRequireDefault(__webpack_require__(43));var _react2=__webpack_require__(24);var _eui=__webpack_require__(23);var _adapters=__webpack_require__(119);var _request_selector=__webpack_require__(643);var _request_details=__webpack_require__(644);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestsViewComponent=function(_Component){_inherits(RequestsViewComponent,_Component);function RequestsViewComponent(props){var _this;_classCallCheck(this,RequestsViewComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(RequestsViewComponent).call(this,props));_defineProperty(_assertThisInitialized(_this),"_onRequestsChange",(function(){var requests=_this.props.adapters.requests.getRequests();var newState={requests:requests};if(!requests.includes(_this.state.request)){newState.request=requests.length?requests[0]:null}_this.setState(newState)}));_defineProperty(_assertThisInitialized(_this),"selectRequest",(function(request){if(request!==_this.state.request){_this.setState({request:request})}}));props.adapters.requests.on("change",_this._onRequestsChange);var _requests=props.adapters.requests.getRequests();_this.state={requests:_requests,request:_requests.length?_requests[0]:null};return _this}_createClass(RequestsViewComponent,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.adapters.requests.removeListener("change",this._onRequestsChange)}},{key:"render",value:function render(){if(!this.state.requests||!this.state.requests.length){return RequestsViewComponent.renderEmptyRequests()}var failedCount=this.state.requests.filter((function(req){return req.status===_adapters.RequestStatus.ERROR})).length;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("p",{role:"status","aria-live":"polite","aria-atomic":"true"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestWasMadeDescription",defaultMessage:"{requestsCount, plural, one {# request was} other {# requests were} } made{failedRequests}",values:{requestsCount:this.state.requests.length,failedRequests:failedCount>0?_react.default.createElement(_eui.EuiTextColor,{color:"danger"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestWasMadeDescription.requestHadFailureText",defaultMessage:", {failedCount} had a failure",values:{failedCount:failedCount}})):""}}))),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react.default.createElement(_request_selector.RequestSelector,{requests:this.state.requests,selectedRequest:this.state.request,onRequestChanged:this.selectRequest}),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),this.state.request&&this.state.request.description&&_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("p",null,this.state.request.description)),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),this.state.request&&_react.default.createElement(_request_details.RequestDetails,{request:this.state.request}))}}],[{key:"renderEmptyRequests",value:function renderEmptyRequests(){return _react.default.createElement(_eui.EuiEmptyPrompt,{"data-test-subj":"inspectorNoRequestsMessage",title:_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.noRequestsLoggedTitle",defaultMessage:"No requests logged"})),body:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.noRequestsLoggedDescription.elementHasNotLoggedAnyRequestsText",defaultMessage:"The element hasn't logged any requests (yet)."})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.noRequestsLoggedDescription.whatDoesItUsuallyMeanText",defaultMessage:"This usually means that there was no need to fetch any data or that the element has not yet started fetching data."})))})}}]);return RequestsViewComponent}(_react.Component);exports.RequestsViewComponent=RequestsViewComponent;_defineProperty(RequestsViewComponent,"propTypes",{adapters:_propTypes.default.object.isRequired,title:_propTypes.default.string.isRequired})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FormattedData",{enumerable:true,get:function get(){return _formatted_data.FormattedData}});Object.defineProperty(exports,"DataAdapter",{enumerable:true,get:function get(){return _data_adapter.DataAdapter}});var _formatted_data=__webpack_require__(635);var _data_adapter=__webpack_require__(636)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(exports,"__esModule",{value:true});exports.FormattedData=void 0;var FormattedData=function FormattedData(raw,formatted){_classCallCheck(this,FormattedData);this.raw=raw;this.formatted=formatted};exports.FormattedData=FormattedData},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.DataAdapter=void 0;var _events=__webpack_require__(94);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataAdapter=function(_events$EventEmitter){_inherits(DataAdapter,_events$EventEmitter);function DataAdapter(){var _getPrototypeOf2;var _this;_classCallCheck(this,DataAdapter);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DataAdapter)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"tabular",void 0);_defineProperty(_assertThisInitialized(_this),"tabularOptions",void 0);return _this}_createClass(DataAdapter,[{key:"setTabularLoader",value:function setTabularLoader(callback){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.tabular=callback;this.tabularOptions=options;this.emit("change","tabular")}},{key:"getTabular",value:function getTabular(){if(!this.tabular||!this.tabularOptions){return Promise.resolve({data:null,options:{}})}var options=this.tabularOptions;return Promise.resolve(this.tabular()).then((function(data){return{data:data,options:options}}))}}]);return DataAdapter}(_events.EventEmitter);exports.DataAdapter=DataAdapter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RequestStatus",{enumerable:true,get:function get(){return _types.RequestStatus}});Object.defineProperty(exports,"RequestAdapter",{enumerable:true,get:function get(){return _request_adapter.RequestAdapter}});var _types=__webpack_require__(120);var _request_adapter=__webpack_require__(638)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty2(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestAdapter=void 0;var _events=__webpack_require__(94);var _v=_interopRequireDefault(__webpack_require__(639));var _request_responder=__webpack_require__(642);var _types=__webpack_require__(120);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestAdapter=function(_events$EventEmitter){_inherits(RequestAdapter,_events$EventEmitter);function RequestAdapter(){var _this;_classCallCheck(this,RequestAdapter);_this=_possibleConstructorReturn(this,_getPrototypeOf(RequestAdapter).call(this));_defineProperty(_assertThisInitialized(_this),"requests",void 0);_this.requests=new Map;return _this}_createClass(RequestAdapter,[{key:"start",value:function start(name){var _this2=this;var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var _params$id;var req=_objectSpread({},params,{name:name,startTime:Date.now(),status:_types.RequestStatus.PENDING,id:(_params$id=params.id)!==null&&_params$id!==void 0?_params$id:(0,_v.default)()});this.requests.set(req.id,req);this._onChange();return new _request_responder.RequestResponder(req,(function(){return _this2._onChange()}))}},{key:"reset",value:function reset(){this.requests=new Map;this._onChange()}},{key:"resetRequest",value:function resetRequest(id){this.requests.delete(id);this._onChange()}},{key:"getRequests",value:function getRequests(){return Array.from(this.requests.values())}},{key:"_onChange",value:function _onChange(){this.emit("change")}}]);return RequestAdapter}(_events.EventEmitter);exports.RequestAdapter=RequestAdapter},,,,function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty2(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestResponder=void 0;var _i18n=__webpack_require__(0);var _types=__webpack_require__(120);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestResponder=function(){function RequestResponder(request,onChange){_classCallCheck(this,RequestResponder);_defineProperty(this,"request",void 0);_defineProperty(this,"onChange",void 0);this.request=request;this.onChange=onChange}_createClass(RequestResponder,[{key:"json",value:function json(reqJson){this.request.json=reqJson;this.onChange();return this}},{key:"stats",value:function stats(_stats){this.request.stats=_objectSpread({},this.request.stats||{},{},_stats);var startDate=new Date(this.request.startTime);this.request.stats.requestTimestamp={label:_i18n.i18n.translate("inspector.reqTimestampKey",{defaultMessage:"Request timestamp"}),value:startDate.toISOString(),description:_i18n.i18n.translate("inspector.reqTimestampDescription",{defaultMessage:"Time when the start of the request has been logged"})};this.onChange();return this}},{key:"finish",value:function finish(status,response){this.request.time=Date.now()-this.request.startTime;this.request.status=status;this.request.response=response;this.onChange()}},{key:"ok",value:function ok(response){this.finish(_types.RequestStatus.OK,response)}},{key:"error",value:function error(response){this.finish(_types.RequestStatus.ERROR,response)}}]);return RequestResponder}();exports.RequestResponder=RequestResponder},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestSelector=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _react2=__webpack_require__(24);var _propTypes=_interopRequireDefault(__webpack_require__(43));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _adapters=__webpack_require__(119);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestSelector=function(_Component){_inherits(RequestSelector,_Component);function RequestSelector(){var _getPrototypeOf2;var _this;_classCallCheck(this,RequestSelector);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RequestSelector)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"togglePopover",(function(){_this.setState((function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}}))}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({isPopoverOpen:false})}));_defineProperty(_assertThisInitialized(_this),"renderRequestDropdownItem",(function(request,index){var hasFailed=request.status===_adapters.RequestStatus.ERROR;var inProgress=request.status===_adapters.RequestStatus.PENDING;return _react.default.createElement(_eui.EuiContextMenuItem,{key:index,icon:request===_this.props.selectedRequest?"check":"empty",onClick:function onClick(){_this.props.onRequestChanged(request);_this.closePopover()},toolTipContent:request.description,toolTipPosition:"left","data-test-subj":"inspectorRequestChooser".concat(request.name)},_react.default.createElement(_eui.EuiTextColor,{color:hasFailed?"danger":"default"},request.name,hasFailed&&_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.failedLabel",defaultMessage:" (failed)"}),inProgress&&_react.default.createElement(_eui.EuiLoadingSpinner,{size:"s","aria-label":_i18n.i18n.translate("inspector.requests.requestInProgressAriaLabel",{defaultMessage:"Request in progress"}),className:"insRequestSelector__menuSpinner"})))}));return _this}_createClass(RequestSelector,[{key:"renderRequestDropdown",value:function renderRequestDropdown(){var button=_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"arrowDown",iconSide:"right",size:"s",onClick:this.togglePopover,"data-test-subj":"inspectorRequestChooser"},this.props.selectedRequest.name);return _react.default.createElement(_eui.EuiPopover,{id:"inspectorRequestChooser",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft",repositionOnScroll:true},_react.default.createElement(_eui.EuiContextMenuPanel,{items:this.props.requests.map(this.renderRequestDropdownItem),"data-test-subj":"inspectorRequestChooserMenuPanel"}))}},{key:"render",value:function render(){var _this$props=this.props,selectedRequest=_this$props.selectedRequest,requests=_this$props.requests;return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement("strong",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestLabel",defaultMessage:"Request:"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:true},requests.length<=1&&_react.default.createElement("div",{className:"insRequestSelector__singleRequest","data-test-subj":"inspectorRequestName"},selectedRequest.name),requests.length>1&&this.renderRequestDropdown()),_react.default.createElement(_eui.EuiFlexItem,{grow:false},selectedRequest.status!==_adapters.RequestStatus.PENDING&&_react.default.createElement(_eui.EuiToolTip,{position:"left",title:selectedRequest.status===_adapters.RequestStatus.OK?_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestSucceededTooltipTitle",defaultMessage:"Request succeeded"}):_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestFailedTooltipTitle",defaultMessage:"Request failed"}),content:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestTooltipDescription",defaultMessage:"The total time the request took."})},_react.default.createElement(_eui.EuiBadge,{color:selectedRequest.status===_adapters.RequestStatus.OK?"secondary":"danger",iconType:selectedRequest.status===_adapters.RequestStatus.OK?"check":"cross"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestTimeLabel",defaultMessage:"{requestTime}ms",values:{requestTime:selectedRequest.time}}))),selectedRequest.status===_adapters.RequestStatus.PENDING&&_react.default.createElement(_eui.EuiLoadingSpinner,{size:"m","aria-label":_i18n.i18n.translate("inspector.requests.requestInProgressAriaLabel",{defaultMessage:"Request in progress"})})))}}]);return RequestSelector}(_react.Component);exports.RequestSelector=RequestSelector;_defineProperty(RequestSelector,"propTypes",{requests:_propTypes.default.array.isRequired,selectedRequest:_propTypes.default.object.isRequired,onRequestChanged:_propTypes.default.func})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetails=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _propTypes=_interopRequireDefault(__webpack_require__(43));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _details=__webpack_require__(645);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DETAILS=[{name:"Statistics",label:_i18n.i18n.translate("inspector.requests.statisticsTabLabel",{defaultMessage:"Statistics"}),component:_details.RequestDetailsStats},{name:"Request",label:_i18n.i18n.translate("inspector.requests.requestTabLabel",{defaultMessage:"Request"}),component:_details.RequestDetailsRequest},{name:"Response",label:_i18n.i18n.translate("inspector.requests.responseTabLabel",{defaultMessage:"Response"}),component:_details.RequestDetailsResponse}];var RequestDetails=function(_Component){_inherits(RequestDetails,_Component);function RequestDetails(){var _getPrototypeOf2;var _this;_classCallCheck(this,RequestDetails);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RequestDetails)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{availableDetails:[],selectedDetail:null});_defineProperty(_assertThisInitialized(_this),"selectDetailsTab",(function(detail){if(detail!==_this.state.selectedDetail){_this.setState({selectedDetail:detail})}}));_defineProperty(_assertThisInitialized(_this),"renderDetailTab",(function(detail){return _react.default.createElement(_eui.EuiTab,{key:detail.name,isSelected:detail===_this.state.selectedDetail,onClick:function onClick(){return _this.selectDetailsTab(detail)},"data-test-subj":"inspectorRequestDetail".concat(detail.name)},detail.label)}));return _this}_createClass(RequestDetails,[{key:"render",value:function render(){var _this$state=this.state,selectedDetail=_this$state.selectedDetail,availableDetails=_this$state.availableDetails;var DetailComponent=RequestDetails.getSelectedDetailComponent(selectedDetail);if(!availableDetails.length||!DetailComponent){return null}return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTabs,{size:"s"},this.state.availableDetails.map(this.renderDetailTab)),_react.default.createElement(DetailComponent,{request:this.props.request}))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var selectedDetail=prevState&&prevState.selectedDetail;var availableDetails=DETAILS.filter((function(detail){return!detail.component.shouldShow||detail.component.shouldShow(nextProps.request)}));if(selectedDetail&&availableDetails.includes(selectedDetail)){return{availableDetails:availableDetails}}return{availableDetails:availableDetails,selectedDetail:availableDetails[0]}}},{key:"getSelectedDetailComponent",value:function getSelectedDetailComponent(detail){return detail?detail.component:null}}]);return RequestDetails}(_react.Component);exports.RequestDetails=RequestDetails;_defineProperty(RequestDetails,"propTypes",{request:_propTypes.default.object.isRequired})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RequestDetailsRequest",{enumerable:true,get:function get(){return _req_details_request.RequestDetailsRequest}});Object.defineProperty(exports,"RequestDetailsResponse",{enumerable:true,get:function get(){return _req_details_response.RequestDetailsResponse}});Object.defineProperty(exports,"RequestDetailsStats",{enumerable:true,get:function get(){return _req_details_stats.RequestDetailsStats}});var _req_details_request=__webpack_require__(646);var _req_details_response=__webpack_require__(647);var _req_details_stats=__webpack_require__(648)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsRequest=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _propTypes=_interopRequireDefault(__webpack_require__(43));var _eui=__webpack_require__(23);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestDetailsRequest=function(_Component){_inherits(RequestDetailsRequest,_Component);function RequestDetailsRequest(){_classCallCheck(this,RequestDetailsRequest);return _possibleConstructorReturn(this,_getPrototypeOf(RequestDetailsRequest).apply(this,arguments))}_createClass(RequestDetailsRequest,[{key:"render",value:function render(){var json=this.props.request.json;if(!json){return null}return _react.default.createElement(_eui.EuiCodeBlock,{language:"json",paddingSize:"s",isCopyable:true,"data-test-subj":"inspectorRequestBody"},JSON.stringify(json,null,2))}}]);return RequestDetailsRequest}(_react.Component);exports.RequestDetailsRequest=RequestDetailsRequest;_defineProperty(RequestDetailsRequest,"propTypes",{request:_propTypes.default.object.isRequired});_defineProperty(RequestDetailsRequest,"shouldShow",(function(request){return Boolean(request&&request.json)}))},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsResponse=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _propTypes=_interopRequireDefault(__webpack_require__(43));var _eui=__webpack_require__(23);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestDetailsResponse=function(_Component){_inherits(RequestDetailsResponse,_Component);function RequestDetailsResponse(){_classCallCheck(this,RequestDetailsResponse);return _possibleConstructorReturn(this,_getPrototypeOf(RequestDetailsResponse).apply(this,arguments))}_createClass(RequestDetailsResponse,[{key:"render",value:function render(){var responseJSON=RequestDetailsResponse.getResponseJson(this.props.request);if(!responseJSON){return null}return _react.default.createElement(_eui.EuiCodeBlock,{language:"json",paddingSize:"s",isCopyable:true,"data-test-subj":"inspectorResponseBody"},JSON.stringify(responseJSON,null,2))}}]);return RequestDetailsResponse}(_react.Component);exports.RequestDetailsResponse=RequestDetailsResponse;_defineProperty(RequestDetailsResponse,"propTypes",{request:_propTypes.default.object.isRequired});_defineProperty(RequestDetailsResponse,"shouldShow",(function(request){return Boolean(RequestDetailsResponse.getResponseJson(request))}));_defineProperty(RequestDetailsResponse,"getResponseJson",(function(request){return request.response?request.response.json:null}))},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsStats=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _propTypes=_interopRequireDefault(__webpack_require__(43));var _eui=__webpack_require__(23);var _i18n=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestDetailsStats=function(_Component){_inherits(RequestDetailsStats,_Component);function RequestDetailsStats(){var _getPrototypeOf2;var _this;_classCallCheck(this,RequestDetailsStats);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RequestDetailsStats)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"renderStatRow",(function(stat){return[_react.default.createElement(_eui.EuiTableRow,{key:stat.id},_react.default.createElement(_eui.EuiTableRowCell,null,_react.default.createElement("span",{className:"insRequestDetailsStats__icon"},stat.description?_react.default.createElement(_eui.EuiIconTip,{"aria-label":_i18n.i18n.translate("inspector.requests.descriptionRowIconAriaLabel",{defaultMessage:"Description"}),type:"questionInCircle",color:"subdued",content:stat.description}):_react.default.createElement(_eui.EuiIcon,{type:"empty"})),stat.label),_react.default.createElement(_eui.EuiTableRowCell,null,stat.value))]}));return _this}_createClass(RequestDetailsStats,[{key:"render",value:function render(){var stats=this.props.request.stats;if(!stats){return null}var sortedStats=Object.keys(stats).sort().map((function(id){return _objectSpread({id:id},stats[id])}));return _react.default.createElement(_eui.EuiTable,{responsive:false},_react.default.createElement(_eui.EuiTableBody,null,sortedStats.map(this.renderStatRow)))}}]);return RequestDetailsStats}(_react.Component);exports.RequestDetailsStats=RequestDetailsStats;_defineProperty(RequestDetailsStats,"propTypes",{request:_propTypes.default.object.isRequired});_defineProperty(RequestDetailsStats,"shouldShow",(function(request){return Boolean(request.stats&&Object.keys(request.stats).length)}))},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilter=void 0;function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var getOtherBucketFilterTerms=function getOtherBucketFilterTerms(table,columnIndex,rowIndex){if(rowIndex===-1){return[]}var rows=table.rows.filter((function(row){return table.columns.every((function(column,i){return row[column.id]===table.rows[rowIndex][column.id]||i>=columnIndex}))}));var terms=rows.map((function(row){return row[table.columns[columnIndex].id]}));return _toConsumableArray(new Set(terms.filter((function(term){var notOther=term!=="__other__";var notMissing=term!=="__missing__";return notOther&&notMissing}))))};var createFilter=function createFilter(aggConfigs,table,columnIndex,rowIndex,cellValue){var column=table.columns[columnIndex];var aggConfig=aggConfigs[columnIndex];var filter=[];var value=rowIndex>-1?table.rows[rowIndex][column.id]:cellValue;if(value===null||value===undefined||!aggConfig.isFilterable()){return}if(aggConfig.type.name==="terms"&&aggConfig.params.otherBucket){var terms=getOtherBucketFilterTerms(table,columnIndex,rowIndex);filter=aggConfig.createFilter(value,{terms:terms})}else{filter=aggConfig.createFilter(value)}if(!filter){return}if(!Array.isArray(filter)){filter=[filter]}return filter};exports.createFilter=createFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRequestInspectorStats=getRequestInspectorStats;exports.getResponseInspectorStats=getResponseInspectorStats;var _i18n=__webpack_require__(0);function getRequestInspectorStats(searchSource){var stats={};var index=searchSource.getField("index");if(index){stats.indexPattern={label:_i18n.i18n.translate("data.search.searchSource.indexPatternLabel",{defaultMessage:"Index pattern"}),value:index.title,description:_i18n.i18n.translate("data.search.searchSource.indexPatternDescription",{defaultMessage:"The index pattern that connected to the Elasticsearch indices."})};stats.indexPatternId={label:_i18n.i18n.translate("data.search.searchSource.indexPatternIdLabel",{defaultMessage:"Index pattern ID"}),value:index.id,description:_i18n.i18n.translate("data.search.searchSource.indexPatternIdDescription",{defaultMessage:"The ID in the {kibanaIndexPattern} index.",values:{kibanaIndexPattern:".kibana"}})}}return stats}function getResponseInspectorStats(searchSource,resp){var lastRequest=searchSource.history&&searchSource.history[searchSource.history.length-1];var stats={};if(resp&&resp.took){stats.queryTime={label:_i18n.i18n.translate("data.search.searchSource.queryTimeLabel",{defaultMessage:"Query time"}),value:_i18n.i18n.translate("data.search.searchSource.queryTimeValue",{defaultMessage:"{queryTime}ms",values:{queryTime:resp.took}}),description:_i18n.i18n.translate("data.search.searchSource.queryTimeDescription",{defaultMessage:"The time it took to process the query. "+"Does not include the time to send the request or parse it in the browser."})}}if(resp&&resp.hits){stats.hitsTotal={label:_i18n.i18n.translate("data.search.searchSource.hitsTotalLabel",{defaultMessage:"Hits (total)"}),value:"".concat(resp.hits.total),description:_i18n.i18n.translate("data.search.searchSource.hitsTotalDescription",{defaultMessage:"The number of documents that match the query."})};stats.hits={label:_i18n.i18n.translate("data.search.searchSource.hitsLabel",{defaultMessage:"Hits"}),value:"".concat(resp.hits.hits.length),description:_i18n.i18n.translate("data.search.searchSource.hitsDescription",{defaultMessage:"The number of documents returned by the query."})}}if(lastRequest&&(lastRequest.ms===0||lastRequest.ms)){stats.requestTime={label:_i18n.i18n.translate("data.search.searchSource.requestTimeLabel",{defaultMessage:"Request time"}),value:_i18n.i18n.translate("data.search.searchSource.requestTimeValue",{defaultMessage:"{requestTime}ms",values:{requestTime:lastRequest.ms}}),description:_i18n.i18n.translate("data.search.searchSource.requestTimeDescription",{defaultMessage:"The time of the request from the browser to Elasticsearch and back. "+"Does not include the time the requested waited in the queue."})}}return stats}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.deserializeAggConfig=exports.serializeAggConfig=void 0;var _services=__webpack_require__(45);var serializeAggConfig=function serializeAggConfig(aggConfig){return{type:aggConfig.type.name,indexPatternId:aggConfig.getIndexPattern().id,aggConfigParams:aggConfig.toJSON().params}};exports.serializeAggConfig=serializeAggConfig;var deserializeAggConfig=function deserializeAggConfig(_ref){var type=_ref.type,aggConfigParams=_ref.aggConfigParams,indexPattern=_ref.indexPattern;var _getSearchService=(0,_services.getSearchService)(),aggs=_getSearchService.aggs;var aggConfigs=aggs.createAggConfigs(indexPattern);var aggConfig=aggConfigs.createAggConfig({enabled:true,type:type,params:aggConfigParams});return aggConfig};exports.deserializeAggConfig=deserializeAggConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateMissingBucket=exports.mergeOtherBucketAggResponse=exports.buildOtherBucketAgg=void 0;var _lodash=__webpack_require__(41);var _common=__webpack_require__(42);var _agg_groups=__webpack_require__(115);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var getNestedAggDSL=function getNestedAggDSL(aggNestedDsl,startFromAggId){if(aggNestedDsl[startFromAggId]){return aggNestedDsl[startFromAggId]}var nestedAggs=(0,_lodash.values)(aggNestedDsl);var aggs;for(var i=0;i<nestedAggs.length;i++){if(nestedAggs[i].aggs&&(aggs=getNestedAggDSL(nestedAggs[i].aggs,startFromAggId))){return aggs}}};var getAggResultBuckets=function getAggResultBuckets(aggConfigs,response,aggWithOtherBucket,key){var keyParts=key.split("-");var responseAgg=response;var _loop=function _loop(i){if(keyParts[i]){var responseAggs=(0,_lodash.values)(responseAgg);var _loop2=function _loop2(aggId){var aggById=responseAggs[aggId];var aggKey=(0,_lodash.keys)(responseAgg)[aggId];var aggConfig=(0,_lodash.find)(aggConfigs.aggs,(function(agg){return agg.id===aggKey}));if(aggConfig){var aggResultBucket=(0,_lodash.find)(aggById.buckets,(function(bucket,bucketObjKey){var bucketKey=aggConfig.getKey(bucket,(0,_lodash.isNumber)(bucketObjKey)?undefined:bucketObjKey).toString();return bucketKey===keyParts[i]}));if(aggResultBucket){responseAgg=aggResultBucket;return"break"}}};for(var aggId=0;aggId<responseAggs.length;aggId++){var _ret=_loop2(aggId);if(_ret==="break")break}}};for(var i in keyParts){_loop(i)}if(responseAgg[aggWithOtherBucket.id]){return responseAgg[aggWithOtherBucket.id].buckets}return[]};var getAggConfigResultMissingBuckets=function getAggConfigResultMissingBuckets(responseAggs,aggId){var missingKey="__missing__";var resultBuckets=[];if(responseAggs[aggId]){var matchingBucket=responseAggs[aggId].buckets.find((function(bucket){return bucket.key===missingKey}));if(matchingBucket)resultBuckets.push(matchingBucket);return resultBuckets}(0,_lodash.each)(responseAggs,(function(agg){if(agg.buckets){(0,_lodash.each)(agg.buckets,(function(bucket){resultBuckets=[].concat(_toConsumableArray(resultBuckets),_toConsumableArray(getAggConfigResultMissingBuckets(bucket,aggId)))}))}}));return resultBuckets};var getOtherAggTerms=function getOtherAggTerms(requestAgg,key,otherAgg){return requestAgg["other-filter"].filters.filters[key].bool.must_not.filter((function(filter){return filter.match_phrase&&filter.match_phrase[otherAgg.params.field.name]})).map((function(filter){return filter.match_phrase[otherAgg.params.field.name]}))};var buildOtherBucketAgg=function buildOtherBucketAgg(aggConfigs,aggWithOtherBucket,response){var bucketAggs=aggConfigs.aggs.filter((function(agg){return agg.type.type===_agg_groups.AggGroupNames.Buckets}));var index=bucketAggs.findIndex((function(agg){return agg.id===aggWithOtherBucket.id}));var aggs=aggConfigs.toDsl();var indexPattern=aggWithOtherBucket.params.field.indexPattern;var filterAgg=aggConfigs.createAggConfig({type:"filters",id:"other",params:{filters:[]},enabled:false},{addToAggConfigs:false});var resultAgg={aggs:getNestedAggDSL(aggs,aggWithOtherBucket.id).aggs,filters:filterAgg.toDsl()};var noAggBucketResults=false;var walkBucketTree=function walkBucketTree(aggIndex,aggregations,aggId,filters,key){if(aggregations[aggId].buckets.length<1){noAggBucketResults=true;return}var agg=aggregations[aggId];var newAggIndex=aggIndex+1;var newAgg=bucketAggs[newAggIndex];var currentAgg=bucketAggs[aggIndex];if(aggIndex<index){(0,_lodash.each)(agg.buckets,(function(bucket,bucketObjKey){var bucketKey=currentAgg.getKey(bucket,(0,_lodash.isNumber)(bucketObjKey)?undefined:bucketObjKey);var filter=(0,_lodash.cloneDeep)(bucket.filters)||currentAgg.createFilter(bucketKey);var newFilters=(0,_lodash.flatten)([].concat(_toConsumableArray(filters),[filter]));walkBucketTree(newAggIndex,bucket,newAgg.id,newFilters,"".concat(key,"-").concat(bucketKey.toString()))}));return}if(!aggWithOtherBucket.params.missingBucket||agg.buckets.some((function(bucket){return bucket.key==="__missing__"}))){filters.push((0,_common.buildExistsFilter)(aggWithOtherBucket.params.field,aggWithOtherBucket.params.field.indexPattern))}(0,_lodash.each)(agg.buckets,(function(bucket){if(bucket.key==="__missing__")return;var filter=currentAgg.createFilter(bucket.key);filter.meta.negate=true;filters.push(filter)}));resultAgg.filters.filters[key]={bool:(0,_common.buildQueryFromFilters)(filters,indexPattern)}};walkBucketTree(0,response.aggregations,bucketAggs[0].id,[],"");if(noAggBucketResults){return false}return function(){return{"other-filter":resultAgg}}};exports.buildOtherBucketAgg=buildOtherBucketAgg;var mergeOtherBucketAggResponse=function mergeOtherBucketAggResponse(aggsConfig,response,otherResponse,otherAgg,requestAgg){var updatedResponse=(0,_lodash.cloneDeep)(response);(0,_lodash.each)(otherResponse.aggregations["other-filter"].buckets,(function(bucket,key){if(!bucket.doc_count||key===undefined)return;var bucketKey=key.replace(/^-/,"");var aggResultBuckets=getAggResultBuckets(aggsConfig,updatedResponse.aggregations,otherAgg,bucketKey);var requestFilterTerms=getOtherAggTerms(requestAgg,key,otherAgg);var phraseFilter=(0,_common.buildPhrasesFilter)(otherAgg.params.field,requestFilterTerms,otherAgg.params.field.indexPattern);phraseFilter.meta.negate=true;bucket.filters=[phraseFilter];bucket.key="__other__";if(aggResultBuckets.some((function(aggResultBucket){return aggResultBucket.key==="__missing__"}))){bucket.filters.push((0,_common.buildExistsFilter)(otherAgg.params.field,otherAgg.params.field.indexPattern))}aggResultBuckets.push(bucket)}));return updatedResponse};exports.mergeOtherBucketAggResponse=mergeOtherBucketAggResponse;var updateMissingBucket=function updateMissingBucket(response,aggConfigs,agg){var updatedResponse=(0,_lodash.cloneDeep)(response);var aggResultBuckets=getAggConfigResultMissingBuckets(updatedResponse.aggregations,agg.id);aggResultBuckets.forEach((function(bucket){bucket.key="__missing__"}));return updatedResponse};exports.updateMissingBucket=updateMissingBucket},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterBucketAgg=void 0;var _i18n=__webpack_require__(0);var _bucket_agg_type=__webpack_require__(55);var _bucket_agg_types=__webpack_require__(52);var filterTitle=_i18n.i18n.translate("data.search.aggs.buckets.filterTitle",{defaultMessage:"Filter"});var filterBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.FILTER,title:filterTitle,params:[{name:"geo_bounding_box"}]});exports.filterBucketAgg=filterBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFiltersBucketAgg=getFiltersBucketAgg;var _lodash=_interopRequireDefault(__webpack_require__(41));var _i18n=__webpack_require__(0);var _filters=__webpack_require__(656);var _utils=__webpack_require__(221);var _bucket_agg_type=__webpack_require__(55);var _bucket_agg_types=__webpack_require__(52);var _public=__webpack_require__(26);var _common=__webpack_require__(42);var _query=__webpack_require__(67);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var filtersTitle=_i18n.i18n.translate("data.search.aggs.buckets.filtersTitle",{defaultMessage:"Filters",description:"The name of an aggregation, that allows to specify multiple individual filters to group data by."});function getFiltersBucketAgg(deps){var uiSettings=deps.uiSettings;return new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.FILTERS,title:filtersTitle,createFilter:_filters.createFilterFilters,customLabels:false,params:[{name:"filters",default:[{input:{query:"",language:uiSettings.get("search:queryLanguage")},label:""}],write:function write(aggConfig,output){var inFilters=aggConfig.params.filters;if(!_lodash.default.size(inFilters))return;inFilters.forEach((function(filter){var persistedLog=(0,_query.getQueryLog)(uiSettings,new _public.Storage(window.localStorage),"vis_default_editor",filter.input.language);persistedLog.add(filter.input.query)}));var outFilters=_lodash.default.transform(inFilters,(function(filters,filter){var input=_lodash.default.cloneDeep(filter.input);if(!input){console.log('malformed filter agg params, missing "input" query');return}var esQueryConfigs=(0,_common.getEsQueryConfig)(uiSettings);var query=(0,_common.buildEsQuery)(aggConfig.getIndexPattern(),[input],[],esQueryConfigs);if(!query){console.log('malformed filter agg params, missing "query" on input');return}var matchAllLabel=filter.input.query===""?"*":"";var label=filter.label||matchAllLabel||(typeof filter.input.query==="string"?filter.input.query:(0,_utils.toAngularJSON)(filter.input.query));filters[label]={query:query}}),{});if(!_lodash.default.size(outFilters))return;var params=output.params||(output.params={});params.filters=outFilters}}]})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterFilters=void 0;var _lodash=__webpack_require__(41);var _common=__webpack_require__(42);var createFilterFilters=function createFilterFilters(aggConfig,key){var dslFilters=(0,_lodash.get)(aggConfig.toDsl(),"filters.filters");var filter=dslFilters[key];var indexPattern=aggConfig.getIndexPattern();if(filter&&indexPattern&&indexPattern.id){return(0,_common.buildQueryFilter)(filter.query,indexPattern.id,key)}};exports.createFilterFilters=createFilterFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getCalculateAutoTimeExpression=getCalculateAutoTimeExpression;var _time_buckets=__webpack_require__(203);var _common=__webpack_require__(42);function getCalculateAutoTimeExpression(uiSettings){return function calculateAutoTimeExpression(range){var dates=(0,_common.toAbsoluteDates)(range);if(!dates){return}var buckets=new _time_buckets.TimeBuckets({uiSettings:uiSettings});buckets.setInterval("auto");buckets.setBounds({min:dates.from,max:dates.to});return buckets.getInterval().expression}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toAngularJSON=toAngularJSON;function toAngularJSON(obj,pretty){if(obj===undefined)return"";if(typeof pretty==="number"){pretty=pretty?2:null}return JSON.stringify(obj,toJsonReplacer,pretty)}function isWindow(obj){return obj&&obj.window===obj}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function toJsonReplacer(key,value){var val=value;if(typeof key==="string"&&key.charAt(0)==="$"&&key.charAt(1)==="$"){val=undefined}else if(isWindow(value)){val="$WINDOW"}else if(value&&window.document===value){val="$DOCUMENT"}else if(isScope(value)){val="$SCOPE"}return val}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.significantTermsBucketAgg=void 0;var _i18n=__webpack_require__(0);var _bucket_agg_type=__webpack_require__(55);var _terms=__webpack_require__(209);var _migrate_include_exclude_format=__webpack_require__(117);var _bucket_agg_types=__webpack_require__(52);var _common=__webpack_require__(42);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var significantTermsTitle=_i18n.i18n.translate("data.search.aggs.buckets.significantTermsTitle",{defaultMessage:"Significant Terms"});var significantTermsBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.SIGNIFICANT_TERMS,title:significantTermsTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.buckets.significantTermsLabel",{defaultMessage:"Top {size} unusual terms in {fieldName}",values:{size:aggConfig.params.size,fieldName:aggConfig.getFieldDisplayName()}})},createFilter:_terms.createFilterTerms,params:[{name:"field",type:"field",scriptable:false,filterFieldTypes:_common.KBN_FIELD_TYPES.STRING},{name:"size",default:""},_objectSpread({name:"exclude",displayName:_i18n.i18n.translate("data.search.aggs.buckets.significantTerms.excludeLabel",{defaultMessage:"Exclude"}),type:"string",advanced:true,shouldShow:_migrate_include_exclude_format.isStringType},_migrate_include_exclude_format.migrateIncludeExcludeFormat),_objectSpread({name:"include",displayName:_i18n.i18n.translate("data.search.aggs.buckets.significantTerms.includeLabel",{defaultMessage:"Include"}),type:"string",advanced:true,shouldShow:_migrate_include_exclude_format.isStringType},_migrate_include_exclude_format.migrateIncludeExcludeFormat)]});exports.significantTermsBucketAgg=significantTermsBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoHashBucketAgg=void 0;var _i18n=__webpack_require__(0);var _bucket_agg_type=__webpack_require__(55);var _common=__webpack_require__(42);var _bucket_agg_types=__webpack_require__(52);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var defaultBoundingBox={top_left:{lat:1,lon:1},bottom_right:{lat:0,lon:0}};var defaultPrecision=2;var geohashGridTitle=_i18n.i18n.translate("data.search.aggs.buckets.geohashGridTitle",{defaultMessage:"Geohash"});var geoHashBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.GEOHASH_GRID,title:geohashGridTitle,params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.GEO_POINT},{name:"autoPrecision",default:true,write:function write(){}},{name:"precision",default:defaultPrecision,write:function write(aggConfig,output){output.params.precision=aggConfig.params.precision}},{name:"useGeocentroid",default:true,write:function write(){}},{name:"isFilteredByCollar",default:true,write:function write(){}},{name:"boundingBox",default:null,write:function write(){}}],getRequestAggs:function getRequestAggs(agg){var aggs=[];var params=agg.params;if(params.isFilteredByCollar&&agg.getField()){aggs.push(agg.aggConfigs.createAggConfig({type:"filter",id:"filter_agg",enabled:true,params:{geo_bounding_box:_defineProperty({ignore_unmapped:true},agg.getField().name,params.boundingBox||defaultBoundingBox)}},{addToAggConfigs:false}))}aggs.push(agg);if(params.useGeocentroid){aggs.push(agg.aggConfigs.createAggConfig({type:"geo_centroid",enabled:true,params:{field:agg.getField()}},{addToAggConfigs:false}))}return aggs}});exports.geoHashBucketAgg=geoHashBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoTileBucketAgg=void 0;var _i18n=__webpack_require__(0);var _lodash=__webpack_require__(41);var _bucket_agg_type=__webpack_require__(55);var _bucket_agg_types=__webpack_require__(52);var _common=__webpack_require__(42);var _metric_agg_types=__webpack_require__(46);var geotileGridTitle=_i18n.i18n.translate("data.search.aggs.buckets.geotileGridTitle",{defaultMessage:"Geotile"});var geoTileBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.GEOTILE_GRID,title:geotileGridTitle,params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.GEO_POINT},{name:"useGeocentroid",default:true,write:_lodash.noop},{name:"precision",default:0}],getRequestAggs:function getRequestAggs(agg){var aggs=[];var useGeocentroid=agg.getParam("useGeocentroid");aggs.push(agg);if(useGeocentroid){var aggConfig={type:_metric_agg_types.METRIC_TYPES.GEO_CENTROID,enabled:true,params:{field:agg.getField()}};aggs.push(agg.aggConfigs.createAggConfig(aggConfig,{addToAggConfigs:false}))}return aggs}});exports.geoTileBucketAgg=geoTileBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketSumMetricAgg=void 0;var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _make_nested_label=__webpack_require__(63);var _sibling_pipeline_agg_helper=__webpack_require__(76);var _metric_agg_types=__webpack_require__(46);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var overallSumLabel=_i18n.i18n.translate("data.search.aggs.metrics.overallSumLabel",{defaultMessage:"overall sum"});var sumBucketTitle=_i18n.i18n.translate("data.search.aggs.metrics.sumBucketTitle",{defaultMessage:"Sum Bucket"});var bucketSumMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.SUM_BUCKET,title:sumBucketTitle,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,overallSumLabel)},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params()),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat});exports.bucketSumMetricAgg=bucketSumMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.siblingPipelineAggWriter=void 0;var _metric_agg_types=__webpack_require__(46);var siblingPipelineAggWriter=function siblingPipelineAggWriter(agg,output){var customMetric=agg.getParam("customMetric");if(!customMetric)return;var metricAgg=customMetric;var bucketAgg=agg.getParam("customBucket");if(metricAgg.type.name!==_metric_agg_types.METRIC_TYPES.COUNT){bucketAgg.subAggs=(output.subAggs||[]).concat(metricAgg);output.params.buckets_path="".concat(bucketAgg.id,">").concat(metricAgg.id)}else{output.params.buckets_path=bucketAgg.id+">_count"}output.parentAggs=(output.parentAggs||[]).concat(bucketAgg)};exports.siblingPipelineAggWriter=siblingPipelineAggWriter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketAvgMetricAgg=void 0;var _i18n=__webpack_require__(0);var _lodash=__webpack_require__(41);var _metric_agg_type=__webpack_require__(47);var _make_nested_label=__webpack_require__(63);var _sibling_pipeline_agg_helper=__webpack_require__(76);var _metric_agg_types=__webpack_require__(46);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var overallAverageLabel=_i18n.i18n.translate("data.search.aggs.metrics.overallAverageLabel",{defaultMessage:"overall average"});var averageBucketTitle=_i18n.i18n.translate("data.search.aggs.metrics.averageBucketTitle",{defaultMessage:"Average Bucket"});var bucketAvgMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.AVG_BUCKET,title:averageBucketTitle,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,overallAverageLabel)},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params()),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat,getValue:function getValue(agg,bucket){var customMetric=agg.getParam("customMetric");var customBucket=agg.getParam("customBucket");var scaleMetrics=customMetric.type&&customMetric.type.isScalable();var value=bucket[agg.id]&&bucket[agg.id].value;if(scaleMetrics&&customBucket.type.name==="date_histogram"){var aggInfo=customBucket.write();value*=(0,_lodash.get)(aggInfo,"bucketInterval.scale",1)}return value}});exports.bucketAvgMetricAgg=bucketAvgMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketMinMetricAgg=void 0;var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _make_nested_label=__webpack_require__(63);var _sibling_pipeline_agg_helper=__webpack_require__(76);var _metric_agg_types=__webpack_require__(46);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var overallMinLabel=_i18n.i18n.translate("data.search.aggs.metrics.overallMinLabel",{defaultMessage:"overall min"});var minBucketTitle=_i18n.i18n.translate("data.search.aggs.metrics.minBucketTitle",{defaultMessage:"Min Bucket"});var bucketMinMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.MIN_BUCKET,title:minBucketTitle,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,overallMinLabel)},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params()),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat});exports.bucketMinMetricAgg=bucketMinMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketMaxMetricAgg=void 0;var _i18n=__webpack_require__(0);var _metric_agg_type=__webpack_require__(47);var _make_nested_label=__webpack_require__(63);var _sibling_pipeline_agg_helper=__webpack_require__(76);var _metric_agg_types=__webpack_require__(46);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var overallMaxLabel=_i18n.i18n.translate("data.search.aggs.metrics.overallMaxLabel",{defaultMessage:"overall max"});var maxBucketTitle=_i18n.i18n.translate("data.search.aggs.metrics.maxBucketTitle",{defaultMessage:"Max Bucket"});var bucketMaxMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.MAX_BUCKET,title:maxBucketTitle,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,overallMaxLabel)},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params()),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat});exports.bucketMaxMetricAgg=bucketMaxMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggTypesRegistry=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggTypesRegistry=function AggTypesRegistry(){var _this=this;_classCallCheck(this,AggTypesRegistry);_defineProperty(this,"bucketAggs",new Map);_defineProperty(this,"metricAggs",new Map);_defineProperty(this,"setup",(function(){return{registerBucket:function registerBucket(type){var name=type.name;if(_this.bucketAggs.get(name)){throw new Error("Bucket agg has already been registered with name: ".concat(name))}_this.bucketAggs.set(name,type)},registerMetric:function registerMetric(type){var name=type.name;if(_this.metricAggs.get(name)){throw new Error("Metric agg has already been registered with name: ".concat(name))}_this.metricAggs.set(name,type)}}}));_defineProperty(this,"start",(function(){return{get:function get(name){return _this.bucketAggs.get(name)||_this.metricAggs.get(name)},getBuckets:function getBuckets(){return Array.from(_this.bucketAggs.values())},getMetrics:function getMetrics(){return Array.from(_this.metricAggs.values())},getAll:function getAll(){return{buckets:Array.from(_this.bucketAggs.values()),metrics:Array.from(_this.metricAggs.values())}}}}))};exports.AggTypesRegistry=AggTypesRegistry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _interval_options=__webpack_require__(204);Object.keys(_interval_options).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _interval_options[key]}})}));var _bucket_agg_types=__webpack_require__(52);Object.keys(_bucket_agg_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _bucket_agg_types[key]}})}));var _date_histogram=__webpack_require__(202);Object.keys(_date_histogram).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _date_histogram[key]}})}));var _date_range=__webpack_require__(205);Object.keys(_date_range).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _date_range[key]}})}));var _ip_range=__webpack_require__(206);Object.keys(_ip_range).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _ip_range[key]}})}));var _cidr_mask=__webpack_require__(207);Object.keys(_cidr_mask).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _cidr_mask[key]}})}));var _date_range2=__webpack_require__(85);Object.keys(_date_range2).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _date_range2[key]}})}));var _ip_range2=__webpack_require__(86);Object.keys(_ip_range2).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _ip_range2[key]}})}));var _migrate_include_exclude_format=__webpack_require__(117);Object.keys(_migrate_include_exclude_format).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _migrate_include_exclude_format[key]}})}));var _terms=__webpack_require__(208);Object.keys(_terms).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _terms[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _metric_agg_type=__webpack_require__(47);Object.keys(_metric_agg_type).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _metric_agg_type[key]}})}));var _metric_agg_types=__webpack_require__(46);Object.keys(_metric_agg_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _metric_agg_types[key]}})}));var _parent_pipeline_agg_helper=__webpack_require__(75);Object.keys(_parent_pipeline_agg_helper).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _parent_pipeline_agg_helper[key]}})}));var _sibling_pipeline_agg_helper=__webpack_require__(76);Object.keys(_sibling_pipeline_agg_helper).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _sibling_pipeline_agg_helper[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"aggTypeFieldFilters",{enumerable:true,get:function get(){return _field_filters.aggTypeFieldFilters}});Object.defineProperty(exports,"AggTypeFieldFilters",{enumerable:true,get:function get(){return _field_filters.AggTypeFieldFilters}});var _field_filters=__webpack_require__(671)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggTypeFieldFilters=exports.aggTypeFieldFilters=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggTypeFieldFilters=function(){function AggTypeFieldFilters(){_classCallCheck(this,AggTypeFieldFilters);_defineProperty(this,"filters",new Set)}_createClass(AggTypeFieldFilters,[{key:"addFilter",value:function addFilter(filter){this.filters.add(filter)}},{key:"filter",value:function filter(fields,aggConfig){var allFilters=Array.from(this.filters);var allowedAggTypeFields=fields.filter((function(field){var isAggTypeFieldAllowed=allFilters.every((function(filter){return filter(field,aggConfig)}));return isAggTypeFieldAllowed}));return allowedAggTypeFields}}]);return AggTypeFieldFilters}();exports.AggTypeFieldFilters=AggTypeFieldFilters;var aggTypeFieldFilters=new AggTypeFieldFilters;exports.aggTypeFieldFilters=aggTypeFieldFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IAggConfig",{enumerable:true,get:function get(){return _agg_config.IAggConfig}});Object.defineProperty(exports,"CreateAggConfigParams",{enumerable:true,get:function get(){return _agg_configs.CreateAggConfigParams}});Object.defineProperty(exports,"IAggConfigs",{enumerable:true,get:function get(){return _agg_configs.IAggConfigs}});Object.defineProperty(exports,"IAggType",{enumerable:true,get:function get(){return _agg_type.IAggType}});Object.defineProperty(exports,"AggParam",{enumerable:true,get:function get(){return _agg_params.AggParam}});Object.defineProperty(exports,"AggParamOption",{enumerable:true,get:function get(){return _agg_params.AggParamOption}});Object.defineProperty(exports,"IFieldParamType",{enumerable:true,get:function get(){return _param_types.IFieldParamType}});Object.defineProperty(exports,"IMetricAggType",{enumerable:true,get:function get(){return _metric_agg_type.IMetricAggType}});Object.defineProperty(exports,"DateRangeKey",{enumerable:true,get:function get(){return _date_range.DateRangeKey}});Object.defineProperty(exports,"IpRangeKey",{enumerable:true,get:function get(){return _ip_range.IpRangeKey}});Object.defineProperty(exports,"OptionedValueProp",{enumerable:true,get:function get(){return _optioned.OptionedValueProp}});Object.defineProperty(exports,"OptionedParamEditorProps",{enumerable:true,get:function get(){return _optioned.OptionedParamEditorProps}});var _=__webpack_require__(88);var _agg_config=__webpack_require__(89);var _agg_configs=__webpack_require__(199);var _agg_type=__webpack_require__(91);var _agg_params=__webpack_require__(90);var _param_types=__webpack_require__(222);var _metric_agg_type=__webpack_require__(47);var _date_range=__webpack_require__(85);var _ip_range=__webpack_require__(86);var _optioned=__webpack_require__(114)},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";var _sync_search_strategy=__webpack_require__(95);var _es_search=__webpack_require__(156)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"esSearchStrategyProvider",{enumerable:true,get:function get(){return _es_search_strategy.esSearchStrategyProvider}});Object.defineProperty(exports,"getEsPreference",{enumerable:true,get:function get(){return _get_es_preference.getEsPreference}});var _es_search_strategy=__webpack_require__(223);var _get_es_preference=__webpack_require__(224)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEsClient=getEsClient;var _elasticsearch=_interopRequireDefault(__webpack_require__(38));var _rxjs=__webpack_require__(28);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getEsClient(injectedMetadata,http,packageInfo){var esRequestTimeout=injectedMetadata.getInjectedVar("esRequestTimeout");var esApiVersion=injectedMetadata.getInjectedVar("esApiVersion");var client=_elasticsearch.default.Client({host:getEsUrl(http,packageInfo),log:"info",requestTimeout:esRequestTimeout,apiVersion:esApiVersion});var loadingCount$=new _rxjs.BehaviorSubject(0);http.addLoadingCountSource(loadingCount$);return{search:wrapEsClientMethod(client,"search",loadingCount$),msearch:wrapEsClientMethod(client,"msearch",loadingCount$),create:wrapEsClientMethod(client,"create",loadingCount$)}}function wrapEsClientMethod(esClient,method,loadingCount$){return function(args){var customPromiseThingy=esClient[method](args);var abort=customPromiseThingy.abort;var resolved=false;loadingCount$.next(loadingCount$.getValue()+1);customPromiseThingy.abort=function(){abort();if(!resolved){resolved=true;loadingCount$.next(loadingCount$.getValue()-1)}};customPromiseThingy.finally((function(){resolved=true;loadingCount$.next(loadingCount$.getValue()-1)}));return customPromiseThingy}}function getEsUrl(http,packageInfo){var a=document.createElement("a");a.href=http.basePath.prepend("/elasticsearch");var protocolPort=/https/.test(a.protocol)?443:80;var port=a.port||protocolPort;return{host:a.hostname,port:port,protocol:a.protocol,pathname:a.pathname,headers:{"kbn-version":packageInfo.version}}}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLongQueryNotification=getLongQueryNotification;exports.LongQueryNotification=LongQueryNotification;var _eui=__webpack_require__(23);var _react=__webpack_require__(24);var _react2=_interopRequireDefault(__webpack_require__(22));var _public=__webpack_require__(25);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function getLongQueryNotification(props){return(0,_public.toMountPoint)(_react2.default.createElement(LongQueryNotification,{application:props.application}))}function LongQueryNotification(props){return _react2.default.createElement("div",null,_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.longQueryMessage",defaultMessage:"With an upgraded license, you can ensure requests have enough time to complete."}),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{size:"s",onClick:_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return props.application.navigateToApp("kibana#/management/elasticsearch/license_management");case 2:case"end":return _context.stop()}}}),_callee)})))},_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.licenseOptions",defaultMessage:"Go to license options"})))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataPublicPlugin=void 0;var _public=__webpack_require__(26);var _autocomplete=__webpack_require__(113);var _search_service=__webpack_require__(680);var _field_formats=__webpack_require__(183);var _query=__webpack_require__(67);var _index_pattern_select=__webpack_require__(213);var _index_patterns=__webpack_require__(112);var _services=__webpack_require__(45);var _create_search_bar=__webpack_require__(216);var _expressions=__webpack_require__(92);var _public2=__webpack_require__(96);var _actions=__webpack_require__(694);var _select_range_action=__webpack_require__(234);var _value_click_action=__webpack_require__(235);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataPublicPlugin=function(){function DataPublicPlugin(initializerContext){_classCallCheck(this,DataPublicPlugin);_defineProperty(this,"autocomplete",new _autocomplete.AutocompleteService);_defineProperty(this,"searchService",void 0);_defineProperty(this,"fieldFormatsService",void 0);_defineProperty(this,"queryService",void 0);_defineProperty(this,"storage",void 0);_defineProperty(this,"packageInfo",void 0);this.searchService=new _search_service.SearchService;this.queryService=new _query.QueryService;this.fieldFormatsService=new _field_formats.FieldFormatsService;this.storage=new _public.Storage(window.localStorage);this.packageInfo=initializerContext.env.packageInfo}_createClass(DataPublicPlugin,[{key:"setup",value:function setup(core,_ref){var expressions=_ref.expressions,uiActions=_ref.uiActions;(0,_services.setInjectedMetadata)(core.injectedMetadata);expressions.registerFunction(_expressions.esaggs);var queryService=this.queryService.setup({uiSettings:core.uiSettings,storage:this.storage});uiActions.registerAction((0,_actions.createFilterAction)(queryService.filterManager,queryService.timefilter.timefilter));uiActions.attachAction(_public2.SELECT_RANGE_TRIGGER,(0,_select_range_action.selectRangeAction)(queryService.filterManager,queryService.timefilter.timefilter));uiActions.attachAction(_public2.VALUE_CLICK_TRIGGER,(0,_value_click_action.valueClickAction)(queryService.filterManager,queryService.timefilter.timefilter));return{autocomplete:this.autocomplete.setup(core),search:this.searchService.setup(core,this.packageInfo),fieldFormats:this.fieldFormatsService.setup(core),query:queryService}}},{key:"start",value:function start(core,_ref2){var uiActions=_ref2.uiActions;var uiSettings=core.uiSettings,http=core.http,notifications=core.notifications,savedObjects=core.savedObjects,overlays=core.overlays;(0,_services.setHttp)(http);(0,_services.setNotifications)(notifications);(0,_services.setOverlays)(overlays);(0,_services.setUiSettings)(uiSettings);var fieldFormats=this.fieldFormatsService.start();(0,_services.setFieldFormats)(fieldFormats);var indexPatterns=new _index_patterns.IndexPatternsService(uiSettings,savedObjects.client,http);(0,_services.setIndexPatterns)(indexPatterns);var query=this.queryService.start(savedObjects);(0,_services.setQueryService)(query);var search=this.searchService.start(core);(0,_services.setSearchService)(search);uiActions.attachAction(_public2.APPLY_FILTER_TRIGGER,uiActions.getAction(_actions.ACTION_GLOBAL_APPLY_FILTER));var dataServices={actions:{createFiltersFromEvent:_actions.createFiltersFromEvent},autocomplete:this.autocomplete.start(),fieldFormats:fieldFormats,indexPatterns:indexPatterns,query:query,search:search};var SearchBar=(0,_create_search_bar.createSearchBar)({core:core,data:dataServices,storage:this.storage});return _objectSpread({},dataServices,{ui:{IndexPatternSelect:(0,_index_pattern_select.createIndexPatternSelect)(core.savedObjects.client),SearchBar:SearchBar}})}},{key:"stop",value:function stop(){this.autocomplete.clearProviders()}}]);return DataPublicPlugin}();exports.DataPublicPlugin=DataPublicPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchService=void 0;var _sync_search_strategy=__webpack_require__(95);var _es_client=__webpack_require__(225);var _search=__webpack_require__(82);var _es_search_strategy=__webpack_require__(223);var _search_interceptor=__webpack_require__(226);var _aggs=__webpack_require__(88);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchService=function(){function SearchService(){var _this=this;_classCallCheck(this,SearchService);_defineProperty(this,"searchStrategies",{});_defineProperty(this,"esClient",void 0);_defineProperty(this,"aggTypesRegistry",new _aggs.AggTypesRegistry);_defineProperty(this,"searchInterceptor",void 0);_defineProperty(this,"registerSearchStrategyProvider",(function(name,strategyProvider){_this.searchStrategies[name]=strategyProvider}));_defineProperty(this,"getSearchStrategy",(function(name){var strategyProvider=_this.searchStrategies[name];if(!strategyProvider)throw new Error("Search strategy ".concat(name," not found"));return strategyProvider}))}_createClass(SearchService,[{key:"setup",value:function setup(core,packageInfo){this.esClient=(0,_es_client.getEsClient)(core.injectedMetadata,core.http,packageInfo);this.registerSearchStrategyProvider(_sync_search_strategy.SYNC_SEARCH_STRATEGY,_sync_search_strategy.syncSearchStrategyProvider);this.registerSearchStrategyProvider(_search.ES_SEARCH_STRATEGY,_es_search_strategy.esSearchStrategyProvider);var aggTypesSetup=this.aggTypesRegistry.setup();var aggTypes=(0,_aggs.getAggTypes)({uiSettings:core.uiSettings});aggTypes.buckets.forEach((function(b){return aggTypesSetup.registerBucket(b)}));aggTypes.metrics.forEach((function(m){return aggTypesSetup.registerMetric(m)}));return{aggs:{calculateAutoTimeExpression:(0,_aggs.getCalculateAutoTimeExpression)(core.uiSettings),types:aggTypesSetup},registerSearchStrategyProvider:this.registerSearchStrategyProvider}}},{key:"start",value:function start(core){var _this2=this;this.searchInterceptor=new _search_interceptor.SearchInterceptor(core.notifications.toasts,core.application,core.injectedMetadata.getInjectedVar("esRequestTimeout"));var aggTypesStart=this.aggTypesRegistry.start();return{aggs:{calculateAutoTimeExpression:(0,_aggs.getCalculateAutoTimeExpression)(core.uiSettings),createAggConfigs:function createAggConfigs(indexPattern){var configStates=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var schemas=arguments.length>2?arguments[2]:undefined;return new _aggs.AggConfigs(indexPattern,configStates,{typesRegistry:aggTypesStart})},types:aggTypesStart},search:function search(request,options,strategyName){var strategyProvider=_this2.getSearchStrategy(strategyName||_search.DEFAULT_SEARCH_STRATEGY);var _strategyProvider=strategyProvider({core:core,getSearchStrategy:_this2.getSearchStrategy}),search=_strategyProvider.search;return _this2.searchInterceptor.search(search,request,options)},setInterceptor:function setInterceptor(searchInterceptor){_this2.searchInterceptor=searchInterceptor},__LEGACY:{esClient:this.esClient,AggConfig:_aggs.AggConfig,AggType:_aggs.AggType,aggTypeFieldFilters:_aggs.aggTypeFieldFilters,FieldParamType:_aggs.FieldParamType,MetricAggType:_aggs.MetricAggType,parentPipelineAggHelper:_aggs.parentPipelineAggHelper,siblingPipelineAggHelper:_aggs.siblingPipelineAggHelper}}}},{key:"stop",value:function stop(){}}]);return SearchService}();exports.SearchService=SearchService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UiActionsPlugin=void 0;var _service=__webpack_require__(228);var _triggers=__webpack_require__(122);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var UiActionsPlugin=function(){function UiActionsPlugin(initializerContext){_classCallCheck(this,UiActionsPlugin);_defineProperty(this,"service",new _service.UiActionsService)}_createClass(UiActionsPlugin,[{key:"setup",value:function setup(core){this.service.registerTrigger(_triggers.selectRangeTrigger);this.service.registerTrigger(_triggers.valueClickTrigger);this.service.registerTrigger(_triggers.applyFilterTrigger);return this.service}},{key:"start",value:function start(core){return this.service}},{key:"stop",value:function stop(){this.service.clear()}}]);return UiActionsPlugin}();exports.UiActionsPlugin=UiActionsPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UiActionsService=void 0;var _trigger_internal=__webpack_require__(229);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var UiActionsService=function UiActionsService(){var _this=this;var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$triggers=_ref.triggers,_triggers=_ref$triggers===void 0?new Map:_ref$triggers,_ref$actions=_ref.actions,_actions=_ref$actions===void 0?new Map:_ref$actions,_ref$triggerToActions=_ref.triggerToActions,_triggerToActions=_ref$triggerToActions===void 0?new Map:_ref$triggerToActions;_classCallCheck(this,UiActionsService);_defineProperty(this,"triggers",void 0);_defineProperty(this,"actions",void 0);_defineProperty(this,"triggerToActions",void 0);_defineProperty(this,"registerTrigger",(function(trigger){if(_this.triggers.has(trigger.id)){throw new Error("Trigger [trigger.id = ".concat(trigger.id,"] already registered."))}var triggerInternal=new _trigger_internal.TriggerInternal(_this,trigger);_this.triggers.set(trigger.id,triggerInternal);_this.triggerToActions.set(trigger.id,[])}));_defineProperty(this,"getTrigger",(function(triggerId){var trigger=_this.triggers.get(triggerId);if(!trigger){throw new Error("Trigger [triggerId = ".concat(triggerId,"] does not exist."))}return trigger.contract}));_defineProperty(this,"registerAction",(function(action){if(_this.actions.has(action.id)){throw new Error("Action [action.id = ".concat(action.id,"] already registered."))}_this.actions.set(action.id,action)}));_defineProperty(this,"getAction",(function(id){if(!_this.actions.has(id)){throw new Error("Action [action.id = ".concat(id,"] not registered."))}return _this.actions.get(id)}));_defineProperty(this,"attachAction",(function(triggerId,action){if(!_this.actions.has(action.id)){_this.registerAction(action)}else{var registeredAction=_this.actions.get(action.id);if(registeredAction!==action){throw new Error("A different action instance with this id is already registered.")}}var trigger=_this.triggers.get(triggerId);if(!trigger){throw new Error("No trigger [triggerId = ".concat(triggerId,"] exists, for attaching action [actionId = ").concat(action.id,"]."))}var actionIds=_this.triggerToActions.get(triggerId);if(!actionIds.find((function(id){return id===action.id}))){_this.triggerToActions.set(triggerId,[].concat(_toConsumableArray(actionIds),[action.id]))}}));_defineProperty(this,"detachAction",(function(triggerId,actionId){var trigger=_this.triggers.get(triggerId);if(!trigger){throw new Error("No trigger [triggerId = ".concat(triggerId,"] exists, for detaching action [actionId = ").concat(actionId,"]."))}var actionIds=_this.triggerToActions.get(triggerId);_this.triggerToActions.set(triggerId,actionIds.filter((function(id){return id!==actionId})))}));_defineProperty(this,"getTriggerActions",(function(triggerId){_this.getTrigger(triggerId);var actionIds=_this.triggerToActions.get(triggerId);var actions=actionIds.map((function(actionId){return _this.actions.get(actionId)})).filter(Boolean);return actions}));_defineProperty(this,"getTriggerCompatibleActions",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(triggerId,context){var actions,isCompatibles;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:actions=_this.getTriggerActions(triggerId);_context.next=3;return Promise.all(actions.map((function(action){return action.isCompatible(context)})));case 3:isCompatibles=_context.sent;return _context.abrupt("return",actions.reduce((function(acc,action,i){return isCompatibles[i]?[].concat(_toConsumableArray(acc),[action]):acc}),[]));case 5:case"end":return _context.stop()}}}),_callee)})));return function(_x,_x2){return _ref2.apply(this,arguments)}}());_defineProperty(this,"executeTriggerActions",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(triggerId,context){var trigger;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:trigger=_this.getTrigger(triggerId);_context2.next=3;return trigger.exec(context);case 3:case"end":return _context2.stop()}}}),_callee2)})));return function(_x3,_x4){return _ref3.apply(this,arguments)}}());_defineProperty(this,"clear",(function(){_this.actions.clear();_this.triggers.clear();_this.triggerToActions.clear()}));_defineProperty(this,"fork",(function(){var triggers=new Map;var actions=new Map;var triggerToActions=new Map;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=_this.triggers.entries()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step$value=_slicedToArray(_step.value,2),key=_step$value[0],value=_step$value[1];triggers.set(key,value)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=_this.actions.entries()[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _step2$value=_slicedToArray(_step2.value,2),_key=_step2$value[0],_value=_step2$value[1];actions.set(_key,_value)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return!=null){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=_this.triggerToActions.entries()[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _step3$value=_slicedToArray(_step3.value,2),_key2=_step3$value[0],_value2=_step3$value[1];triggerToActions.set(_key2,_toConsumableArray(_value2))}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return!=null){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}return new UiActionsService({triggers:triggers,actions:actions,triggerToActions:triggerToActions})}));this.triggers=_triggers;this.actions=_actions;this.triggerToActions=_triggerToActions};exports.UiActionsService=UiActionsService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildContextMenuForActions=buildContextMenuForActions;var React=_interopRequireWildcard(__webpack_require__(22));var _lodash=_interopRequireDefault(__webpack_require__(41));var _i18n=__webpack_require__(0);var _public=__webpack_require__(25);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function buildContextMenuForActions(_x){return _buildContextMenuForActions.apply(this,arguments)}function _buildContextMenuForActions(){_buildContextMenuForActions=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref2){var actions,actionContext,closeMenu,menuItems;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:actions=_ref2.actions,actionContext=_ref2.actionContext,closeMenu=_ref2.closeMenu;_context.next=3;return buildEuiContextMenuPanelItems({actions:actions,actionContext:actionContext,closeMenu:closeMenu});case 3:menuItems=_context.sent;return _context.abrupt("return",{id:"mainMenu",title:_i18n.i18n.translate("uiActions.actionPanel.title",{defaultMessage:"Options"}),items:menuItems});case 5:case"end":return _context.stop()}}}),_callee)})));return _buildContextMenuForActions.apply(this,arguments)}function buildEuiContextMenuPanelItems(_x2){return _buildEuiContextMenuPanelItems.apply(this,arguments)}function _buildEuiContextMenuPanelItems(){_buildEuiContextMenuPanelItems=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(_ref3){var actions,actionContext,closeMenu,items,promises;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:actions=_ref3.actions,actionContext=_ref3.actionContext,closeMenu=_ref3.closeMenu;items=[];promises=actions.map(function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(action){var isCompatible;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return action.isCompatible(actionContext);case 2:isCompatible=_context2.sent;if(isCompatible){_context2.next=5;break}return _context2.abrupt("return");case 5:items.push(convertPanelActionToContextMenuItem({action:action,actionContext:actionContext,closeMenu:closeMenu}));case 6:case"end":return _context2.stop()}}}),_callee2)})));return function(_x3){return _ref4.apply(this,arguments)}}());_context3.next=5;return Promise.all(promises);case 5:return _context3.abrupt("return",items);case 6:case"end":return _context3.stop()}}}),_callee3)})));return _buildEuiContextMenuPanelItems.apply(this,arguments)}function convertPanelActionToContextMenuItem(_ref){var action=_ref.action,actionContext=_ref.actionContext,closeMenu=_ref.closeMenu;var menuPanelItem={name:action.MenuItem?React.createElement((0,_public.uiToReactComponent)(action.MenuItem),{context:actionContext}):action.getDisplayName(actionContext),icon:action.getIconType(actionContext),panel:_lodash.default.get(action,"childContextMenuPanel.id"),"data-test-subj":"embeddablePanelAction-".concat(action.id)};menuPanelItem.onClick=function(){action.execute(actionContext);closeMenu()};if(action.getHref&&action.getHref(actionContext)){menuPanelItem.href=action.getHref(actionContext)}return menuPanelItem}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.openContextMenu=openContextMenu;exports.ContextMenuSession=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _eui=__webpack_require__(23);var _events=__webpack_require__(94);var _reactDom=_interopRequireDefault(__webpack_require__(30));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var activeSession=null;var CONTAINER_ID="contextMenu-container";var initialized=false;function getOrCreateContainerElement(){var container=document.getElementById(CONTAINER_ID);var y=getMouseY()+document.body.scrollTop;if(!container){container=document.createElement("div");container.style.left=getMouseX()+"px";container.style.top=y+"px";container.style.position="absolute";container.style.zIndex="999";container.id=CONTAINER_ID;document.body.appendChild(container)}else{container.style.left=getMouseX()+"px";container.style.top=y+"px"}return container}var x=0;var y=0;function initialize(){if(!initialized){document.addEventListener("mousemove",onMouseUpdate,false);document.addEventListener("mouseenter",onMouseUpdate,false);initialized=true}}function onMouseUpdate(e){x=e.pageX;y=e.pageY}function getMouseX(){return x}function getMouseY(){return y}initialize();var ContextMenuSession=function(_EventEmitter){_inherits(ContextMenuSession,_EventEmitter);function ContextMenuSession(){_classCallCheck(this,ContextMenuSession);return _possibleConstructorReturn(this,_getPrototypeOf(ContextMenuSession).apply(this,arguments))}_createClass(ContextMenuSession,[{key:"bindToAngularScope",value:function bindToAngularScope(scope){var _this=this;var removeWatch=scope.$on("$destroy",(function(){return _this.close()}));this.on("closed",(function(){return removeWatch()}))}},{key:"close",value:function close(){if(activeSession===this){var container=document.getElementById(CONTAINER_ID);if(container){_reactDom.default.unmountComponentAtNode(container);this.emit("closed")}}}}]);return ContextMenuSession}(_events.EventEmitter);exports.ContextMenuSession=ContextMenuSession;function openContextMenu(panels){var props=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(activeSession){activeSession.close()}var container=getOrCreateContainerElement();var session=activeSession=new ContextMenuSession;var onClose=function onClose(){if(props.onClose){props.onClose()}session.close()};_reactDom.default.render(_react.default.createElement(_eui.EuiPopover,{className:"embPanel__optionsMenuPopover",button:container,isOpen:true,closePopover:onClose,panelPaddingSize:"none",anchorPosition:"downRight",withTitle:true},_react.default.createElement(_eui.EuiContextMenu,{initialPanelId:"mainMenu",panels:panels})),container);return session}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.selectRangeTrigger=exports.SELECT_RANGE_TRIGGER=void 0;var SELECT_RANGE_TRIGGER="SELECT_RANGE_TRIGGER";exports.SELECT_RANGE_TRIGGER=SELECT_RANGE_TRIGGER;var selectRangeTrigger={id:SELECT_RANGE_TRIGGER,title:"Select range",description:"Applies a range filter"};exports.selectRangeTrigger=selectRangeTrigger},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.valueClickTrigger=exports.VALUE_CLICK_TRIGGER=void 0;var VALUE_CLICK_TRIGGER="VALUE_CLICK_TRIGGER";exports.VALUE_CLICK_TRIGGER=VALUE_CLICK_TRIGGER;var valueClickTrigger={id:VALUE_CLICK_TRIGGER,title:"Value clicked",description:"Value was clicked"};exports.valueClickTrigger=valueClickTrigger},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.applyFilterTrigger=exports.APPLY_FILTER_TRIGGER=void 0;var APPLY_FILTER_TRIGGER="FILTER_TRIGGER";exports.APPLY_FILTER_TRIGGER=APPLY_FILTER_TRIGGER;var applyFilterTrigger={id:APPLY_FILTER_TRIGGER,title:"Filter click",description:"Triggered when user applies filter to an embeddable."};exports.applyFilterTrigger=applyFilterTrigger},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _action=__webpack_require__(690);Object.keys(_action).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _action[key]}})}));var _create_action=__webpack_require__(691);Object.keys(_create_action).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _create_action[key]}})}));var _incompatible_action_error=__webpack_require__(692);Object.keys(_incompatible_action_error).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _incompatible_action_error[key]}})}))},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createAction=createAction;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createAction(action){return _objectSpread({getIconType:function getIconType(){return undefined},order:0,id:action.type,isCompatible:function isCompatible(){return Promise.resolve(true)},getDisplayName:function getDisplayName(){return""},getHref:function getHref(){return undefined}},action)}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.IncompatibleActionError=void 0;var _i18n=__webpack_require__(0);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IncompatibleActionError=function(_Error){_inherits(IncompatibleActionError,_Error);function IncompatibleActionError(){var _this;_classCallCheck(this,IncompatibleActionError);_this=_possibleConstructorReturn(this,_getPrototypeOf(IncompatibleActionError).call(this,_i18n.i18n.translate("uiActions.errors.incompatibleAction",{defaultMessage:"Action is incompatible"})));_defineProperty(_assertThisInitialized(_this),"code","INCOMPATIBLE_ACTION");return _this}return IncompatibleActionError}(_wrapNativeSuper(Error));exports.IncompatibleActionError=IncompatibleActionError},function(module,exports,__webpack_require__){"use strict";var _triggers=__webpack_require__(122);var DEFAULT_TRIGGER="";var DEFAULT_ACTION=""},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ACTION_GLOBAL_APPLY_FILTER",{enumerable:true,get:function get(){return _apply_filter_action.ACTION_GLOBAL_APPLY_FILTER}});Object.defineProperty(exports,"createFilterAction",{enumerable:true,get:function get(){return _apply_filter_action.createFilterAction}});Object.defineProperty(exports,"createFiltersFromEvent",{enumerable:true,get:function get(){return _create_filters_from_event.createFiltersFromEvent}});Object.defineProperty(exports,"selectRangeAction",{enumerable:true,get:function get(){return _select_range_action.selectRangeAction}});Object.defineProperty(exports,"valueClickAction",{enumerable:true,get:function get(){return _value_click_action.valueClickAction}});var _apply_filter_action=__webpack_require__(695);var _create_filters_from_event=__webpack_require__(233);var _select_range_action=__webpack_require__(234);var _value_click_action=__webpack_require__(235)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterAction=createFilterAction;exports.ACTION_GLOBAL_APPLY_FILTER=void 0;var _i18n=__webpack_require__(0);var _public=__webpack_require__(25);var _public2=__webpack_require__(96);var _services=__webpack_require__(45);var _apply_filters=__webpack_require__(232);var _=__webpack_require__(59);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var ACTION_GLOBAL_APPLY_FILTER="ACTION_GLOBAL_APPLY_FILTER";exports.ACTION_GLOBAL_APPLY_FILTER=ACTION_GLOBAL_APPLY_FILTER;function isCompatible(_x){return _isCompatible.apply(this,arguments)}function _isCompatible(){_isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(context){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",context.filters!==undefined);case 1:case"end":return _context2.stop()}}}),_callee2)})));return _isCompatible.apply(this,arguments)}function createFilterAction(filterManager,timeFilter){return(0,_public2.createAction)({type:ACTION_GLOBAL_APPLY_FILTER,id:ACTION_GLOBAL_APPLY_FILTER,getDisplayName:function getDisplayName(){return _i18n.i18n.translate("data.filter.applyFilterActionTitle",{defaultMessage:"Apply filter to current view"})},isCompatible:isCompatible,execute:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var filters,timeFieldName,selectedFilters,indexPatterns,filterSelectionPromise,_esFilters$extractTim,timeRangeFilter,restOfFilters;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:filters=_ref.filters,timeFieldName=_ref.timeFieldName;if(filters){_context.next=3;break}throw new Error("Applying a filter requires a filter");case 3:_context.next=5;return isCompatible({filters:filters});case 5:if(_context.sent){_context.next=7;break}throw new _public2.IncompatibleActionError;case 7:selectedFilters=filters;if(!(selectedFilters.length>1)){_context.next=16;break}_context.next=11;return Promise.all(filters.map((function(filter){return(0,_services.getIndexPatterns)().get(filter.meta.index)})));case 11:indexPatterns=_context.sent;filterSelectionPromise=new Promise((function(resolve){var overlay=(0,_services.getOverlays)().openModal((0,_public.toMountPoint)((0,_apply_filters.applyFiltersPopover)(filters,indexPatterns,(function(){overlay.close();resolve([])}),(function(filterSelection){overlay.close();resolve(filterSelection)}))),{"data-test-subj":"test"})}));_context.next=15;return filterSelectionPromise;case 15:selectedFilters=_context.sent;case 16:if(timeFieldName){_esFilters$extractTim=_.esFilters.extractTimeFilter(timeFieldName,selectedFilters),timeRangeFilter=_esFilters$extractTim.timeRangeFilter,restOfFilters=_esFilters$extractTim.restOfFilters;filterManager.addFilters(restOfFilters);if(timeRangeFilter){_.esFilters.changeTimeFilter(timeFilter,timeRangeFilter)}}else{filterManager.addFilters(selectedFilters)}case 17:case"end":return _context.stop()}}}),_callee)})));function execute(_x2){return _execute.apply(this,arguments)}return execute}()})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.applyFiltersPopover=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _apply_filter_popover_content=__webpack_require__(697);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var applyFiltersPopover=function applyFiltersPopover(filters,indexPatterns,onCancel,onSubmit){return _react.default.createElement(_apply_filter_popover_content.ApplyFiltersPopoverContent,{indexPatterns:indexPatterns,filters:filters,onCancel:onCancel,onSubmit:onSubmit})};exports.applyFiltersPopover=applyFiltersPopover},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ApplyFiltersPopoverContent=void 0;var _eui=__webpack_require__(23);var _react=__webpack_require__(24);var _react2=_interopRequireWildcard(__webpack_require__(22));var _common=__webpack_require__(42);var _filter_bar=__webpack_require__(108);var _query=__webpack_require__(67);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ApplyFiltersPopoverContent=function(_Component){_inherits(ApplyFiltersPopoverContent,_Component);function ApplyFiltersPopoverContent(props){var _this;_classCallCheck(this,ApplyFiltersPopoverContent);_this=_possibleConstructorReturn(this,_getPrototypeOf(ApplyFiltersPopoverContent).call(this,props));_defineProperty(_assertThisInitialized(_this),"isFilterSelected",(function(i){return _this.state.isFilterSelected[i]}));_defineProperty(_assertThisInitialized(_this),"toggleFilterSelected",(function(i){var isFilterSelected=_toConsumableArray(_this.state.isFilterSelected);isFilterSelected[i]=!isFilterSelected[i];_this.setState({isFilterSelected:isFilterSelected})}));_defineProperty(_assertThisInitialized(_this),"onSubmit",(function(){var selectedFilters=_this.props.filters.filter((function(filter,i){return _this.state.isFilterSelected[i]}));_this.props.onSubmit(selectedFilters)}));_this.state={isFilterSelected:props.filters.map((function(){return true}))};return _this}_createClass(ApplyFiltersPopoverContent,[{key:"getLabel",value:function getLabel(filter){var valueLabel=(0,_common.getDisplayValueFromFilter)(filter,this.props.indexPatterns);return _react2.default.createElement(_filter_bar.FilterLabel,{filter:filter,valueLabel:valueLabel})}},{key:"render",value:function render(){var _this2=this;if(this.props.filters.length===0){return""}var mappedFilters=(0,_query.mapAndFlattenFilters)(this.props.filters);var form=_react2.default.createElement(_eui.EuiForm,null,mappedFilters.map((function(filter,i){return _react2.default.createElement(_eui.EuiFormRow,{key:i},_react2.default.createElement(_eui.EuiSwitch,{label:_this2.getLabel(filter),checked:_this2.isFilterSelected(i),onChange:function onChange(){return _this2.toggleFilterSelected(i)}}))})));return _react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement(_eui.EuiModalHeader,null,_react2.default.createElement(_eui.EuiModalHeaderTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.applyFilters.popupHeader",defaultMessage:"Select filters to apply"}))),_react2.default.createElement(_eui.EuiModalBody,null,form),_react2.default.createElement(_eui.EuiModalFooter,null,_react2.default.createElement(_eui.EuiButtonEmpty,{onClick:this.props.onCancel},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.applyFiltersPopup.cancelButtonLabel",defaultMessage:"Cancel"})),_react2.default.createElement(_eui.EuiButton,{onClick:this.onSubmit,"data-test-subj":"applyFiltersPopoverButton",fill:true},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.applyFiltersPopup.saveButtonLabel",defaultMessage:"Apply"}))))}}]);return ApplyFiltersPopoverContent}(_react2.Component);exports.ApplyFiltersPopoverContent=ApplyFiltersPopoverContent;_defineProperty(ApplyFiltersPopoverContent,"defaultProps",{filters:[]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.onBrushEvent=onBrushEvent;var _lodash=__webpack_require__(41);var _moment=_interopRequireDefault(__webpack_require__(27));var _public=__webpack_require__(59);var _services=__webpack_require__(45);var _utils=__webpack_require__(121);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function onBrushEvent(_x){return _onBrushEvent.apply(this,arguments)}function _onBrushEvent(){_onBrushEvent=_asyncToGenerator(regeneratorRuntime.mark((function _callee(event){var isDate,xRaw,column,indexPattern,aggConfig,field,min,max,range;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isDate=(0,_lodash.get)(event.data,"ordered.date");xRaw=(0,_lodash.get)(event.data,"series[0].values[0].xRaw");if(xRaw){_context.next=4;break}return _context.abrupt("return");case 4:column=xRaw.table.columns[xRaw.column];if(!(!column||!column.meta)){_context.next=7;break}return _context.abrupt("return");case 7:_context.next=9;return(0,_services.getIndexPatterns)().get(column.meta.indexPatternId);case 9:indexPattern=_context.sent;aggConfig=(0,_utils.deserializeAggConfig)(_objectSpread({},column.meta,{indexPattern:indexPattern}));field=aggConfig.params.field;if(!(!field||event.range.length<=1)){_context.next=14;break}return _context.abrupt("return");case 14:min=event.range[0];max=(0,_lodash.last)(event.range);if(!(min===max)){_context.next=18;break}return _context.abrupt("return");case 18:range={gte:isDate?(0,_moment.default)(min).toISOString():min,lt:isDate?(0,_moment.default)(max).toISOString():max};if(isDate){range.format="strict_date_optional_time"}return _context.abrupt("return",_public.esFilters.buildRangeFilter(field,range,indexPattern));case 21:case"end":return _context.stop()}}}),_callee)})));return _onBrushEvent.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hydrateIndexPattern=hydrateIndexPattern;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function hydrateIndexPattern(_x,_x2,_x3,_x4){return _hydrateIndexPattern.apply(this,arguments)}function _hydrateIndexPattern(){_hydrateIndexPattern=_asyncToGenerator(regeneratorRuntime.mark((function _callee(id,savedObject,indexPatterns,config){var clearSavedIndexPattern,indexPattern,index,indexObj;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:clearSavedIndexPattern=!!config.clearSavedIndexPattern;indexPattern=config.indexPattern;if(savedObject.searchSource){_context.next=4;break}return _context.abrupt("return",null);case 4:if(!clearSavedIndexPattern){_context.next=7;break}savedObject.searchSource.setField("index",undefined);return _context.abrupt("return",null);case 7:index=id||indexPattern||savedObject.searchSource.getOwnField("index");if(!(typeof index!=="string"||!index)){_context.next=10;break}return _context.abrupt("return",null);case 10:_context.next=12;return indexPatterns.get(index);case 12:indexObj=_context.sent;savedObject.searchSource.setField("index",indexObj);return _context.abrupt("return",indexObj);case 15:case"end":return _context.stop()}}}),_callee)})));return _hydrateIndexPattern.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.intializeSavedObject=intializeSavedObject;var _lodash=_interopRequireDefault(__webpack_require__(41));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function intializeSavedObject(_x,_x2,_x3){return _intializeSavedObject.apply(this,arguments)}function _intializeSavedObject(){_intializeSavedObject=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObject,savedObjectsClient,config){var esType,resp,respMapped;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:esType=config.type;if(esType){_context.next=3;break}throw new Error("You must define a type name to use SavedObject objects.");case 3:if(savedObject.id){_context.next=12;break}_lodash.default.assign(savedObject,savedObject.defaults);_context.next=7;return savedObject.hydrateIndexPattern();case 7:if(!(typeof config.afterESResp==="function")){_context.next=11;break}_context.next=10;return config.afterESResp(savedObject);case 10:savedObject=_context.sent;case 11:return _context.abrupt("return",savedObject);case 12:_context.next=14;return savedObjectsClient.get(esType,savedObject.id);case 14:resp=_context.sent;respMapped={_id:resp.id,_type:resp.type,_source:_lodash.default.cloneDeep(resp.attributes),references:resp.references,found:!!resp._version};_context.next=18;return savedObject.applyESResp(respMapped);case 18:if(!(typeof config.init==="function")){_context.next=21;break}_context.next=21;return config.init.call(savedObject);case 21:return _context.abrupt("return",savedObject);case 22:case"end":return _context.stop()}}}),_callee)})));return _intializeSavedObject.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.serializeSavedObject=serializeSavedObject;var _lodash=_interopRequireDefault(__webpack_require__(41));var _angular=_interopRequireDefault(__webpack_require__(29));var _public=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function serializeSavedObject(savedObject,config){var mapping=(0,_public.expandShorthand)(config.mapping);var attributes={};var references=[];_lodash.default.forOwn(mapping,(function(fieldMapping,fieldName){if(typeof fieldName!=="string"){return}var savedObjectFieldVal=savedObject[fieldName];if(savedObjectFieldVal!=null){attributes[fieldName]=fieldMapping._serialize?fieldMapping._serialize(savedObjectFieldVal):savedObjectFieldVal}}));if(savedObject.searchSource){var searchSourceFields=_lodash.default.omit(savedObject.searchSource.getFields(),["sort","size"]);if(searchSourceFields.index){var indexId=typeof searchSourceFields.index==="string"?searchSourceFields.index:searchSourceFields.index.id;var refName="kibanaSavedObjectMeta.searchSourceJSON.index";references.push({name:refName,type:"index-pattern",id:indexId});searchSourceFields=_objectSpread({},searchSourceFields,{indexRefName:refName,index:undefined})}if(searchSourceFields.filter){searchSourceFields=_objectSpread({},searchSourceFields,{filter:searchSourceFields.filter.map((function(filterRow,i){if(!filterRow.meta||!filterRow.meta.index){return filterRow}var refName="kibanaSavedObjectMeta.searchSourceJSON.filter[".concat(i,"].meta.index");references.push({name:refName,type:"index-pattern",id:filterRow.meta.index});return _objectSpread({},filterRow,{meta:_objectSpread({},filterRow.meta,{indexRefName:refName,index:undefined})})}))})}attributes.kibanaSavedObjectMeta={searchSourceJSON:_angular.default.toJson(searchSourceFields)}}return{attributes:attributes,references:references}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.applyESResp=applyESResp;var _lodash=_interopRequireDefault(__webpack_require__(41));var _parse_search_source=__webpack_require__(704);var _public=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function applyESResp(_x,_x2,_x3){return _applyESResp.apply(this,arguments)}function _applyESResp(){_applyESResp=_asyncToGenerator(regeneratorRuntime.mark((function _callee(resp,savedObject,config){var mapping,esType,injectReferences,hydrateIndexPattern,meta;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:mapping=(0,_public.expandShorthand)(config.mapping);esType=config.type||"";savedObject._source=_lodash.default.cloneDeep(resp._source);injectReferences=config.injectReferences;hydrateIndexPattern=savedObject.hydrateIndexPattern;if(!(typeof resp.found==="boolean"&&!resp.found)){_context.next=7;break}throw new _public.SavedObjectNotFound(esType,savedObject.id||"");case 7:meta=resp._source.kibanaSavedObjectMeta||{};delete resp._source.kibanaSavedObjectMeta;if(!config.indexPattern&&savedObject._source.indexPattern){config.indexPattern=savedObject._source.indexPattern;delete savedObject._source.indexPattern}_lodash.default.defaults(savedObject._source,savedObject.defaults);_lodash.default.forOwn(mapping,(function(fieldMapping,fieldName){if(fieldMapping._deserialize&&typeof fieldName==="string"){savedObject._source[fieldName]=fieldMapping._deserialize(savedObject._source[fieldName])}}));_lodash.default.assign(savedObject,savedObject._source);savedObject.lastSavedTitle=savedObject.title;_context.next=16;return(0,_parse_search_source.parseSearchSource)(savedObject,esType,meta.searchSourceJSON,resp.references);case 16:_context.next=18;return hydrateIndexPattern();case 18:if(injectReferences&&resp.references&&resp.references.length>0){injectReferences(savedObject,resp.references)}if(!(typeof config.afterESResp==="function")){_context.next=23;break}_context.next=22;return config.afterESResp(savedObject);case 22:savedObject=_context.sent;case 23:return _context.abrupt("return",savedObject);case 24:case"end":return _context.stop()}}}),_callee)})));return _applyESResp.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.parseSearchSource=parseSearchSource;var _lodash=_interopRequireDefault(__webpack_require__(41));var _public=__webpack_require__(161);var _public2=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function parseSearchSource(savedObject,esType,searchSourceJson,references){if(!savedObject.searchSource)return;var searchSourceValues;try{searchSourceValues=JSON.parse(searchSourceJson)}catch(e){throw new _public2.InvalidJSONProperty("Invalid JSON in ".concat(esType,' "').concat(savedObject.id,'". ').concat(e.message," JSON: ").concat(searchSourceJson))}if(!searchSourceValues||_typeof(searchSourceValues)!=="object"){throw new _public2.InvalidJSONProperty("Invalid searchSourceJSON in ".concat(esType,' "').concat(savedObject.id,'".'))}if(searchSourceValues.indexRefName){var reference=references.find((function(ref){return ref.name===searchSourceValues.indexRefName}));if(!reference){throw new Error("Could not find reference for ".concat(searchSourceValues.indexRefName," on ").concat(savedObject.getEsType()," ").concat(savedObject.id))}searchSourceValues.index=reference.id;delete searchSourceValues.indexRefName}if(searchSourceValues.filter){searchSourceValues.filter.forEach((function(filterRow){if(!filterRow.meta||!filterRow.meta.indexRefName){return}var reference=references.find((function(ref){return ref.name===filterRow.meta.indexRefName}));if(!reference){throw new Error("Could not find reference for ".concat(filterRow.meta.indexRefName," on ").concat(savedObject.getEsType()))}filterRow.meta.index=reference.id;delete filterRow.meta.indexRefName}))}var searchSourceFields=savedObject.searchSource.getFields();var fnProps=_lodash.default.transform(searchSourceFields,(function(dynamic,val,name){if(_lodash.default.isFunction(val)&&name)dynamic[name]=val}),{});savedObject.searchSource.setFields(_lodash.default.defaults(searchSourceValues,fnProps));var query=savedObject.searchSource.getOwnField("query");if(typeof query!=="undefined"){savedObject.searchSource.setField("query",(0,_public.migrateLegacyQuery)(query))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSource=createSource;var _lodash=_interopRequireDefault(__webpack_require__(41));var _i18n=__webpack_require__(0);var _constants=__webpack_require__(77);var _confirm_modal_promise=__webpack_require__(123);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function createSource(_x,_x2,_x3){return _createSource.apply(this,arguments)}function _createSource(){_createSource=_asyncToGenerator(regeneratorRuntime.mark((function _callee(source,savedObject,esType){var options,services,savedObjectsClient,overlays,confirmMessage,title,confirmButtonText,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:options=_args.length>3&&_args[3]!==undefined?_args[3]:{};services=_args.length>4?_args[4]:undefined;savedObjectsClient=services.savedObjectsClient,overlays=services.overlays;_context.prev=3;_context.next=6;return savedObjectsClient.create(esType,source,options);case 6:return _context.abrupt("return",_context.sent);case 9:_context.prev=9;_context.t0=_context["catch"](3);if(!(_lodash.default.get(_context.t0,"res.status")===409)){_context.next=16;break}confirmMessage=_i18n.i18n.translate("savedObjects.confirmModal.overwriteConfirmationMessage",{defaultMessage:"Are you sure you want to overwrite {title}?",values:{title:savedObject.title}});title=_i18n.i18n.translate("savedObjects.confirmModal.overwriteTitle",{defaultMessage:"Overwrite {name}?",values:{name:savedObject.getDisplayName()}});confirmButtonText=_i18n.i18n.translate("savedObjects.confirmModal.overwriteButtonLabel",{defaultMessage:"Overwrite"});return _context.abrupt("return",(0,_confirm_modal_promise.confirmModalPromise)(confirmMessage,title,confirmButtonText,overlays).then((function(){return savedObjectsClient.create(esType,source,savedObject.creationOpts(_objectSpread({overwrite:true},options)))})).catch((function(){return Promise.reject(new Error(_constants.OVERWRITE_REJECTED))})));case 16:_context.next=18;return Promise.reject(_context.t0);case 18:return _context.abrupt("return",_context.sent);case 19:case"end":return _context.stop()}}}),_callee,null,[[3,9]])})));return _createSource.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.findObjectByTitle=findObjectByTitle;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function findObjectByTitle(_x,_x2,_x3){return _findObjectByTitle.apply(this,arguments)}function _findObjectByTitle(){_findObjectByTitle=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObjectsClient,type,title){var response;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(title){_context.next=2;break}return _context.abrupt("return");case 2:_context.next=4;return savedObjectsClient.find({type:type,perPage:10,search:'"'.concat(title,'"'),searchFields:["title"],fields:["title"]});case 4:response=_context.sent;return _context.abrupt("return",response.savedObjects.find((function(obj){return obj.get("title").toLowerCase()===title.toLowerCase()})));case 6:case"end":return _context.stop()}}}),_callee)})));return _findObjectByTitle.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.displayDuplicateTitleConfirmModal=displayDuplicateTitleConfirmModal;var _i18n=__webpack_require__(0);var _constants=__webpack_require__(77);var _confirm_modal_promise=__webpack_require__(123);function displayDuplicateTitleConfirmModal(savedObject,overlays){var confirmMessage=_i18n.i18n.translate("savedObjects.confirmModal.saveDuplicateConfirmationMessage",{defaultMessage:"A {name} with the title '{title}' already exists. Would you like to save anyway?",values:{title:savedObject.title,name:savedObject.getDisplayName()}});var confirmButtonText=_i18n.i18n.translate("savedObjects.confirmModal.saveDuplicateButtonLabel",{defaultMessage:"Save {name}",values:{name:savedObject.getDisplayName()}});try{return(0,_confirm_modal_promise.confirmModalPromise)(confirmMessage,"",confirmButtonText,overlays)}catch(_){return Promise.reject(new Error(_constants.SAVE_DUPLICATE_REJECTED))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectLoader=void 0;var _string_utils=__webpack_require__(709);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SavedObjectLoader=function(){function SavedObjectLoader(SavedObjectClass,savedObjectsClient,chrome){_classCallCheck(this,SavedObjectLoader);this.savedObjectsClient=savedObjectsClient;this.chrome=chrome;_defineProperty(this,"Class",void 0);_defineProperty(this,"type",void 0);_defineProperty(this,"lowercaseType",void 0);_defineProperty(this,"loaderProperties",void 0);this.type=SavedObjectClass.type;this.Class=SavedObjectClass;this.lowercaseType=this.type.toLowerCase();this.loaderProperties={name:"".concat(this.lowercaseType,"s"),noun:_string_utils.StringUtils.upperFirst(this.type),nouns:"".concat(this.lowercaseType,"s")}}_createClass(SavedObjectLoader,[{key:"get",value:function(){var _get=_asyncToGenerator(regeneratorRuntime.mark((function _callee(id){var obj;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:obj=new this.Class(id);return _context.abrupt("return",obj.init());case 2:case"end":return _context.stop()}}}),_callee,this)})));function get(_x){return _get.apply(this,arguments)}return get}()},{key:"urlFor",value:function urlFor(id){return"#/".concat(this.lowercaseType,"/").concat(encodeURIComponent(id))}},{key:"delete",value:function(){var _delete2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(ids){var _this=this;var idsUsed,deletions,coreNavLinks;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:idsUsed=!Array.isArray(ids)?[ids]:ids;deletions=idsUsed.map((function(id){var savedObject=new _this.Class(id);return savedObject.delete()}));_context2.next=4;return Promise.all(deletions);case 4:coreNavLinks=this.chrome.navLinks;coreNavLinks.getAll().filter((function(link){return link.linkToLastSubUrl&&idsUsed.find((function(deletedId){return link.url&&link.url.includes(deletedId)}))!==undefined})).forEach((function(link){return coreNavLinks.update(link.id,{url:link.baseUrl})}));case 6:case"end":return _context2.stop()}}}),_callee2,this)})));function _delete(_x2){return _delete2.apply(this,arguments)}return _delete}()},{key:"mapHitSource",value:function mapHitSource(source,id){source.id=id;source.url=this.urlFor(id);return source}},{key:"mapSavedObjectApiHits",value:function mapSavedObjectApiHits(hit){return this.mapHitSource(hit.attributes,hit.id)}},{key:"findAll",value:function findAll(){var _this2=this;var search=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;var fields=arguments.length>2?arguments[2]:undefined;return this.savedObjectsClient.find({type:this.lowercaseType,search:search?"".concat(search,"*"):undefined,perPage:size,page:1,searchFields:["title^3","description"],defaultSearchOperator:"AND",fields:fields}).then((function(resp){return{total:resp.total,hits:resp.savedObjects.map((function(savedObject){return _this2.mapSavedObjectApiHits(savedObject)}))}}))}},{key:"find",value:function find(){var search=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;return this.findAll(search,size).then((function(resp){return{total:resp.total,hits:resp.hits.filter((function(savedObject){return!savedObject.error}))}}))}}]);return SavedObjectLoader}();exports.SavedObjectLoader=SavedObjectLoader},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StringUtils=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var StringUtils=function(){function StringUtils(){_classCallCheck(this,StringUtils)}_createClass(StringUtils,null,[{key:"upperFirst",value:function upperFirst(){var str=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return str?str.charAt(0).toUpperCase()+str.slice(1):""}}]);return StringUtils}();exports.StringUtils=StringUtils},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.saveWithConfirmation=saveWithConfirmation;var _lodash=__webpack_require__(41);var _i18n=__webpack_require__(0);var _constants=__webpack_require__(77);var _confirm_modal_promise=__webpack_require__(123);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function saveWithConfirmation(_x,_x2,_x3,_x4){return _saveWithConfirmation.apply(this,arguments)}function _saveWithConfirmation(){_saveWithConfirmation=_asyncToGenerator(regeneratorRuntime.mark((function _callee(source,savedObject,options,services){var savedObjectsClient,overlays,confirmMessage,title,confirmButtonText;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:savedObjectsClient=services.savedObjectsClient,overlays=services.overlays;_context.prev=1;_context.next=4;return savedObjectsClient.create(savedObject.getEsType(),source,options);case 4:return _context.abrupt("return",_context.sent);case 7:_context.prev=7;_context.t0=_context["catch"](1);if(!((0,_lodash.get)(_context.t0,"res.status")===409)){_context.next=14;break}confirmMessage=_i18n.i18n.translate("savedObjects.confirmModal.overwriteConfirmationMessage",{defaultMessage:"Are you sure you want to overwrite {title}?",values:{title:savedObject.title}});title=_i18n.i18n.translate("savedObjects.confirmModal.overwriteTitle",{defaultMessage:"Overwrite {name}?",values:{name:savedObject.displayName}});confirmButtonText=_i18n.i18n.translate("savedObjects.confirmModal.overwriteButtonLabel",{defaultMessage:"Overwrite"});return _context.abrupt("return",(0,_confirm_modal_promise.confirmModalPromise)(confirmMessage,title,confirmButtonText,overlays).then((function(){return savedObjectsClient.create(savedObject.getEsType(),source,_objectSpread({overwrite:true},options))})).catch((function(){return Promise.reject(new Error(_constants.OVERWRITE_REJECTED))})));case 14:_context.next=16;return Promise.reject(_context.t0);case 16:return _context.abrupt("return",_context.sent);case 17:case"end":return _context.stop()}}}),_callee,null,[[1,7]])})));return _saveWithConfirmation.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.createSavedSearchClass=createSavedSearchClass;var _public=__webpack_require__(107);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createSavedSearchClass(services){var SavedObjectClass=(0,_public.createSavedObjectClass)(services);var SavedSearch=function(_SavedObjectClass){_inherits(SavedSearch,_SavedObjectClass);function SavedSearch(id){var _this;_classCallCheck(this,SavedSearch);_this=_possibleConstructorReturn(this,_getPrototypeOf(SavedSearch).call(this,{id:id,type:"search",mapping:{title:"text",description:"text",hits:"integer",columns:"keyword",sort:"keyword",version:"integer"},searchSource:true,defaults:{title:"",description:"",columns:[],hits:0,sort:[],version:1}}));_defineProperty(_assertThisInitialized(_this),"id",void 0);_defineProperty(_assertThisInitialized(_this),"showInRecentlyAccessed",void 0);_this.showInRecentlyAccessed=true;_this.id=id;_this.getFullPath=function(){return"/app/kibana#/discover/".concat(String(id))};return _this}return SavedSearch}(SavedObjectClass);_defineProperty(SavedSearch,"type","search");_defineProperty(SavedSearch,"mapping",{title:"text",description:"text",hits:"integer",columns:"keyword",sort:"keyword",version:"integer"});_defineProperty(SavedSearch,"fieldOrder",["title","description"]);_defineProperty(SavedSearch,"searchSource",true);return SavedSearch}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"installXJsonMode",{enumerable:true,get:function get(){return _x_json.installXJsonMode}});Object.defineProperty(exports,"XJsonMode",{enumerable:true,get:function get(){return _x_json.XJsonMode}});var _x_json=__webpack_require__(715)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.installXJsonMode=installXJsonMode;Object.defineProperty(exports,"XJsonMode",{enumerable:true,get:function get(){return _console_lang.XJsonMode}});var _brace=_interopRequireDefault(__webpack_require__(78));var _console_lang=__webpack_require__(716);var _worker=__webpack_require__(723);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _brace$default$acequi=_brace.default.acequire("ace/worker/worker_client"),WorkerClient=_brace$default$acequi.WorkerClient;_console_lang.XJsonMode.prototype.createWorker=function(session){var xJsonWorker=new WorkerClient(["ace"],_worker.workerModule,"JsonWorker");xJsonWorker.attachToDocument(session.getDocument());xJsonWorker.on("annotate",(function(e){session.setAnnotations(e.data)}));xJsonWorker.on("terminate",(function(){session.clearAnnotations()}));return xJsonWorker};function installXJsonMode(editor){var session=editor.getSession();session.setMode(new _console_lang.XJsonMode)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ElasticsearchSqlHighlightRules",{enumerable:true,get:function get(){return _modes.ElasticsearchSqlHighlightRules}});Object.defineProperty(exports,"ScriptHighlightRules",{enumerable:true,get:function get(){return _modes.ScriptHighlightRules}});Object.defineProperty(exports,"XJsonHighlightRules",{enumerable:true,get:function get(){return _modes.XJsonHighlightRules}});Object.defineProperty(exports,"addXJsonToRules",{enumerable:true,get:function get(){return _modes.addXJsonToRules}});Object.defineProperty(exports,"XJsonMode",{enumerable:true,get:function get(){return _modes.XJsonMode}});var _modes=__webpack_require__(238)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ElasticsearchSqlHighlightRules",{enumerable:true,get:function get(){return _elasticsearch_sql_highlight_rules.ElasticsearchSqlHighlightRules}});Object.defineProperty(exports,"ScriptHighlightRules",{enumerable:true,get:function get(){return _script_highlight_rules.ScriptHighlightRules}});Object.defineProperty(exports,"XJsonHighlightRules",{enumerable:true,get:function get(){return _x_json_highlight_rules.XJsonHighlightRules}});Object.defineProperty(exports,"addXJsonToRules",{enumerable:true,get:function get(){return _x_json_highlight_rules.addToRules}});var _elasticsearch_sql_highlight_rules=__webpack_require__(239);var _script_highlight_rules=__webpack_require__(240);var _x_json_highlight_rules=__webpack_require__(718)},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.XJsonHighlightRules=XJsonHighlightRules;exports.addToRules=addToRules;var _=_interopRequireWildcard(__webpack_require__(41));var _brace=_interopRequireDefault(__webpack_require__(78));__webpack_require__(719);var _elasticsearch_sql_highlight_rules=__webpack_require__(239);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var _require=__webpack_require__(240),ScriptHighlightRules=_require.ScriptHighlightRules;var _brace$default$acequi=_brace.default.acequire("ace/mode/json_highlight_rules"),JsonHighlightRules=_brace$default$acequi.JsonHighlightRules;var oop=_brace.default.acequire("ace/lib/oop");var jsonRules=function jsonRules(root){root=root?root:"json";var rules={};var xJsonRules=[{token:["variable","whitespace","ace.punctuation.colon","whitespace","punctuation.start_triple_quote"],regex:'("(?:[^"]*_)?script"|"inline"|"source")(\\s*?)(:)(\\s*?)(""")',next:"script-start",merge:false,push:true},{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"punctuation.start_triple_quote",regex:'"""',next:"string_literal",merge:false,push:true},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"invalid.illegal",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"invalid.illegal",regex:"\\/\\/.*$"},{token:"paren.lparen",merge:false,regex:"{",next:root,push:true},{token:"paren.lparen",merge:false,regex:"[[(]"},{token:"paren.rparen",merge:false,regex:"[\\])]"},{token:"paren.rparen",regex:"}",merge:false,next:"pop"},{token:"punctuation.comma",regex:","},{token:"punctuation.colon",regex:":"},{token:"whitespace",regex:"\\s+"},{token:"text",regex:".+?"}];rules[root]=xJsonRules;rules[root+"-sql"]=[{token:["variable","whitespace","ace.punctuation.colon","whitespace","punctuation.start_triple_quote"],regex:'("query")(\\s*?)(:)(\\s*?)(""")',next:"sql-start",merge:false,push:true}].concat(xJsonRules);rules.string_literal=[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"},{token:"multi_string",regex:"."}];return rules};function XJsonHighlightRules(){this.$rules=_objectSpread({},jsonRules("start"));this.embedRules(ScriptHighlightRules,"script-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}]);this.embedRules(_elasticsearch_sql_highlight_rules.ElasticsearchSqlHighlightRules,"sql-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}])}oop.inherits(XJsonHighlightRules,JsonHighlightRules);function addToRules(otherRules,embedUnder){otherRules.$rules=_.defaultsDeep(otherRules.$rules,jsonRules(embedUnder));otherRules.embedRules(ScriptHighlightRules,"script-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}]);otherRules.embedRules(_elasticsearch_sql_highlight_rules.ElasticsearchSqlHighlightRules,"sql-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}])}},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"XJsonMode",{enumerable:true,get:function get(){return _x_json_mode.XJsonMode}});var _x_json_mode=__webpack_require__(722)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.XJsonMode=XJsonMode;var _brace=_interopRequireDefault(__webpack_require__(78));var _index=__webpack_require__(238);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var oop=_brace.default.acequire("ace/lib/oop");var _brace$default$acequi=_brace.default.acequire("ace/mode/json"),JSONMode=_brace$default$acequi.Mode;var _brace$default$acequi2=_brace.default.acequire("ace/tokenizer"),AceTokenizer=_brace$default$acequi2.Tokenizer;var _brace$default$acequi3=_brace.default.acequire("ace/mode/matching_brace_outdent"),MatchingBraceOutdent=_brace$default$acequi3.MatchingBraceOutdent;var _brace$default$acequi4=_brace.default.acequire("ace/mode/behaviour/cstyle"),CstyleBehaviour=_brace$default$acequi4.CstyleBehaviour;var _brace$default$acequi5=_brace.default.acequire("ace/mode/folding/cstyle"),CStyleFoldMode=_brace$default$acequi5.FoldMode;function XJsonMode(){var ruleset=new _index.XJsonHighlightRules;ruleset.normalizeRules();this.$tokenizer=new AceTokenizer(ruleset.getRules());this.$outdent=new MatchingBraceOutdent;this.$behaviour=new CstyleBehaviour;this.foldingRules=new CStyleFoldMode}oop.inherits(XJsonMode,JSONMode)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.workerModule=void 0;var _worker=_interopRequireDefault(__webpack_require__(724));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var workerModule={id:"ace/mode/json_worker",src:_worker.default};exports.workerModule=workerModule},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='/* eslint-disable */\n/*\n  This file is loaded up as a blob by Brace to hand to Ace to load as Jsonp\n  (hence the redefining of everything).  It is based on the json\n  mode from the brace distro.\n\n  It is very likely that this file will be removed in future but for now it enables\n  extended JSON parsing, like e.g. """{}""" (triple quotes)\n*/\n"no use strict";\n! function(window) {\n  function resolveModuleId(id, paths) {\n    for (var testPath = id, tail = ""; testPath;) {\n      var alias = paths[testPath];\n      if ("string" == typeof alias) return alias + tail;\n      if (alias) return alias.location.replace(/\\/*$/, "/") + (tail || alias.main || alias.name);\n      if (alias === !1) return "";\n      var i = testPath.lastIndexOf("/");\n      if (-1 === i) break;\n      tail = testPath.substr(i) + tail, testPath = testPath.slice(0, i)\n    }\n    return id\n  }\n  if (!(void 0 !== window.window && window.document || window.acequire && window.define)) {\n    window.console || (window.console = function() {\n      var msgs = Array.prototype.slice.call(arguments, 0);\n      postMessage({\n        type: "log",\n        data: msgs\n      })\n    }, window.console.error = window.console.warn = window.console.log = window.console.trace = window.console), window.window = window, window.ace = window, window.onerror = function(message, file, line, col, err) {\n      postMessage({\n        type: "error",\n        data: {\n          message: message,\n          data: err.data,\n          file: file,\n          line: line,\n          col: col,\n          stack: err.stack\n        }\n      })\n    }, window.normalizeModule = function(parentId, moduleName) {\n      if (-1 !== moduleName.indexOf("!")) {\n        var chunks = moduleName.split("!");\n        return window.normalizeModule(parentId, chunks[0]) + "!" + window.normalizeModule(parentId, chunks[1])\n      }\n      if ("." == moduleName.charAt(0)) {\n        var base = parentId.split("/").slice(0, -1).join("/");\n        for (moduleName = (base ? base + "/" : "") + moduleName; - 1 !== moduleName.indexOf(".") && previous != moduleName;) {\n          var previous = moduleName;\n          moduleName = moduleName.replace(/^\\.\\//, "").replace(/\\/\\.\\//, "/").replace(/[^\\/]+\\/\\.\\.\\//, "")\n        }\n      }\n      return moduleName\n    }, window.acequire = function acequire(parentId, id) {\n      if (id || (id = parentId, parentId = null), !id.charAt) throw Error("worker.js acequire() accepts only (parentId, id) as arguments");\n      id = window.normalizeModule(parentId, id);\n      var module = window.acequire.modules[id];\n      if (module) return module.initialized || (module.initialized = !0, module.exports = module.factory().exports), module.exports;\n      if (!window.acequire.tlns) return console.log("unable to load " + id);\n      var path = resolveModuleId(id, window.acequire.tlns);\n      return ".js" != path.slice(-3) && (path += ".js"), window.acequire.id = id, window.acequire.modules[id] = {}, importScripts(path), window.acequire(parentId, id)\n    }, window.acequire.modules = {}, window.acequire.tlns = {}, window.define = function(id, deps, factory) {\n      if (2 == arguments.length ? (factory = deps, "string" != typeof id && (deps = id, id = window.acequire.id)) : 1 == arguments.length && (factory = id, deps = [], id = window.acequire.id), "function" != typeof factory) return window.acequire.modules[id] = {\n        exports: factory,\n        initialized: !0\n      }, void 0;\n      deps.length || (deps = ["require", "exports", "module"]);\n      var req = function(childId) {\n        return window.acequire(id, childId)\n      };\n      window.acequire.modules[id] = {\n        exports: {},\n        factory: function() {\n          var module = this,\n            returnExports = factory.apply(this, deps.map(function(dep) {\n              switch (dep) {\n                case "require":\n                  return req;\n                case "exports":\n                  return module.exports;\n                case "module":\n                  return module;\n                default:\n                  return req(dep)\n              }\n            }));\n          return returnExports && (module.exports = returnExports), module\n        }\n      }\n    }, window.define.amd = {}, acequire.tlns = {}, window.initBaseUrls = function(topLevelNamespaces) {\n      for (var i in topLevelNamespaces) acequire.tlns[i] = topLevelNamespaces[i]\n    }, window.initSender = function() {\n      var EventEmitter = window.acequire("ace/lib/event_emitter").EventEmitter,\n        oop = window.acequire("ace/lib/oop"),\n        Sender = function() {};\n      return function() {\n        oop.implement(this, EventEmitter), this.callback = function(data, callbackId) {\n          postMessage({\n            type: "call",\n            id: callbackId,\n            data: data\n          })\n        }, this.emit = function(name, data) {\n          postMessage({\n            type: "event",\n            name: name,\n            data: data\n          })\n        }\n      }.call(Sender.prototype), new Sender\n    };\n    var main = window.main = null,\n      sender = window.sender = null;\n    window.onmessage = function(e) {\n      var msg = e.data;\n      if (msg.event && sender) sender._signal(msg.event, msg.data);\n      else if (msg.command)\n        if (main[msg.command]) main[msg.command].apply(main, msg.args);\n        else {\n          if (!window[msg.command]) throw Error("Unknown command:" + msg.command);\n          window[msg.command].apply(window, msg.args)\n        }\n      else if (msg.init) {\n        window.initBaseUrls(msg.tlns), acequire("ace/lib/es5-shim"), sender = window.sender = window.initSender();\n        var clazz = acequire(msg.module)[msg.classname];\n        main = window.main = new clazz(sender)\n      }\n    }\n  }\n}(this), ace.define("ace/lib/oop", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  exports.inherits = function(ctor, superCtor) {\n    ctor.super_ = superCtor, ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: !1,\n        writable: !0,\n        configurable: !0\n      }\n    })\n  }, exports.mixin = function(obj, mixin) {\n    for (var key in mixin) obj[key] = mixin[key];\n    return obj\n  }, exports.implement = function(proto, mixin) {\n    exports.mixin(proto, mixin)\n  }\n}), ace.define("ace/range", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  var comparePoints = function(p1, p2) {\n      return p1.row - p2.row || p1.column - p2.column\n    },\n    Range = function(startRow, startColumn, endRow, endColumn) {\n      this.start = {\n        row: startRow,\n        column: startColumn\n      }, this.end = {\n        row: endRow,\n        column: endColumn\n      }\n    };\n  (function() {\n    this.isEqual = function(range) {\n      return this.start.row === range.start.row && this.end.row === range.end.row && this.start.column === range.start.column && this.end.column === range.end.column\n    }, this.toString = function() {\n      return "Range: [" + this.start.row + "/" + this.start.column + "] -> [" + this.end.row + "/" + this.end.column + "]"\n    }, this.contains = function(row, column) {\n      return 0 == this.compare(row, column)\n    }, this.compareRange = function(range) {\n      var cmp, end = range.end,\n        start = range.start;\n      return cmp = this.compare(end.row, end.column), 1 == cmp ? (cmp = this.compare(start.row, start.column), 1 == cmp ? 2 : 0 == cmp ? 1 : 0) : -1 == cmp ? -2 : (cmp = this.compare(start.row, start.column), -1 == cmp ? -1 : 1 == cmp ? 42 : 0)\n    }, this.comparePoint = function(p) {\n      return this.compare(p.row, p.column)\n    }, this.containsRange = function(range) {\n      return 0 == this.comparePoint(range.start) && 0 == this.comparePoint(range.end)\n    }, this.intersects = function(range) {\n      var cmp = this.compareRange(range);\n      return -1 == cmp || 0 == cmp || 1 == cmp\n    }, this.isEnd = function(row, column) {\n      return this.end.row == row && this.end.column == column\n    }, this.isStart = function(row, column) {\n      return this.start.row == row && this.start.column == column\n    }, this.setStart = function(row, column) {\n      "object" == typeof row ? (this.start.column = row.column, this.start.row = row.row) : (this.start.row = row, this.start.column = column)\n    }, this.setEnd = function(row, column) {\n      "object" == typeof row ? (this.end.column = row.column, this.end.row = row.row) : (this.end.row = row, this.end.column = column)\n    }, this.inside = function(row, column) {\n      return 0 == this.compare(row, column) ? this.isEnd(row, column) || this.isStart(row, column) ? !1 : !0 : !1\n    }, this.insideStart = function(row, column) {\n      return 0 == this.compare(row, column) ? this.isEnd(row, column) ? !1 : !0 : !1\n    }, this.insideEnd = function(row, column) {\n      return 0 == this.compare(row, column) ? this.isStart(row, column) ? !1 : !0 : !1\n    }, this.compare = function(row, column) {\n      return this.isMultiLine() || row !== this.start.row ? this.start.row > row ? -1 : row > this.end.row ? 1 : this.start.row === row ? column >= this.start.column ? 0 : -1 : this.end.row === row ? this.end.column >= column ? 0 : 1 : 0 : this.start.column > column ? -1 : column > this.end.column ? 1 : 0\n    }, this.compareStart = function(row, column) {\n      return this.start.row == row && this.start.column == column ? -1 : this.compare(row, column)\n    }, this.compareEnd = function(row, column) {\n      return this.end.row == row && this.end.column == column ? 1 : this.compare(row, column)\n    }, this.compareInside = function(row, column) {\n      return this.end.row == row && this.end.column == column ? 1 : this.start.row == row && this.start.column == column ? -1 : this.compare(row, column)\n    }, this.clipRows = function(firstRow, lastRow) {\n      if (this.end.row > lastRow) var end = {\n        row: lastRow + 1,\n        column: 0\n      };\n      else if (firstRow > this.end.row) var end = {\n        row: firstRow,\n        column: 0\n      };\n      if (this.start.row > lastRow) var start = {\n        row: lastRow + 1,\n        column: 0\n      };\n      else if (firstRow > this.start.row) var start = {\n        row: firstRow,\n        column: 0\n      };\n      return Range.fromPoints(start || this.start, end || this.end)\n    }, this.extend = function(row, column) {\n      var cmp = this.compare(row, column);\n      if (0 == cmp) return this;\n      if (-1 == cmp) var start = {\n        row: row,\n        column: column\n      };\n      else var end = {\n        row: row,\n        column: column\n      };\n      return Range.fromPoints(start || this.start, end || this.end)\n    }, this.isEmpty = function() {\n      return this.start.row === this.end.row && this.start.column === this.end.column\n    }, this.isMultiLine = function() {\n      return this.start.row !== this.end.row\n    }, this.clone = function() {\n      return Range.fromPoints(this.start, this.end)\n    }, this.collapseRows = function() {\n      return 0 == this.end.column ? new Range(this.start.row, 0, Math.max(this.start.row, this.end.row - 1), 0) : new Range(this.start.row, 0, this.end.row, 0)\n    }, this.toScreenRange = function(session) {\n      var screenPosStart = session.documentToScreenPosition(this.start),\n        screenPosEnd = session.documentToScreenPosition(this.end);\n      return new Range(screenPosStart.row, screenPosStart.column, screenPosEnd.row, screenPosEnd.column)\n    }, this.moveBy = function(row, column) {\n      this.start.row += row, this.start.column += column, this.end.row += row, this.end.column += column\n    }\n  }).call(Range.prototype), Range.fromPoints = function(start, end) {\n    return new Range(start.row, start.column, end.row, end.column)\n  }, Range.comparePoints = comparePoints, Range.comparePoints = function(p1, p2) {\n    return p1.row - p2.row || p1.column - p2.column\n  }, exports.Range = Range\n}), ace.define("ace/apply_delta", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  exports.applyDelta = function(docLines, delta) {\n    var row = delta.start.row,\n      startColumn = delta.start.column,\n      line = docLines[row] || "";\n    switch (delta.action) {\n      case "insert":\n        var lines = delta.lines;\n        if (1 === lines.length) docLines[row] = line.substring(0, startColumn) + delta.lines[0] + line.substring(startColumn);\n        else {\n          var args = [row, 1].concat(delta.lines);\n          docLines.splice.apply(docLines, args), docLines[row] = line.substring(0, startColumn) + docLines[row], docLines[row + delta.lines.length - 1] += line.substring(startColumn)\n        }\n        break;\n      case "remove":\n        var endColumn = delta.end.column,\n          endRow = delta.end.row;\n        row === endRow ? docLines[row] = line.substring(0, startColumn) + line.substring(endColumn) : docLines.splice(row, endRow - row + 1, line.substring(0, startColumn) + docLines[endRow].substring(endColumn))\n    }\n  }\n}), ace.define("ace/lib/event_emitter", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  var EventEmitter = {},\n    stopPropagation = function() {\n      this.propagationStopped = !0\n    },\n    preventDefault = function() {\n      this.defaultPrevented = !0\n    };\n  EventEmitter._emit = EventEmitter._dispatchEvent = function(eventName, e) {\n    this._eventRegistry || (this._eventRegistry = {}), this._defaultHandlers || (this._defaultHandlers = {});\n    var listeners = this._eventRegistry[eventName] || [],\n      defaultHandler = this._defaultHandlers[eventName];\n    if (listeners.length || defaultHandler) {\n      "object" == typeof e && e || (e = {}), e.type || (e.type = eventName), e.stopPropagation || (e.stopPropagation = stopPropagation), e.preventDefault || (e.preventDefault = preventDefault), listeners = listeners.slice();\n      for (var i = 0; listeners.length > i && (listeners[i](e, this), !e.propagationStopped); i++);\n      return defaultHandler && !e.defaultPrevented ? defaultHandler(e, this) : void 0\n    }\n  }, EventEmitter._signal = function(eventName, e) {\n    var listeners = (this._eventRegistry || {})[eventName];\n    if (listeners) {\n      listeners = listeners.slice();\n      for (var i = 0; listeners.length > i; i++) listeners[i](e, this)\n    }\n  }, EventEmitter.once = function(eventName, callback) {\n    var _self = this;\n    callback && this.addEventListener(eventName, function newCallback() {\n      _self.removeEventListener(eventName, newCallback), callback.apply(null, arguments)\n    })\n  }, EventEmitter.setDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (handlers || (handlers = this._defaultHandlers = {\n        _disabled_: {}\n      }), handlers[eventName]) {\n      var old = handlers[eventName],\n        disabled = handlers._disabled_[eventName];\n      disabled || (handlers._disabled_[eventName] = disabled = []), disabled.push(old);\n      var i = disabled.indexOf(callback); - 1 != i && disabled.splice(i, 1)\n    }\n    handlers[eventName] = callback\n  }, EventEmitter.removeDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (handlers) {\n      var disabled = handlers._disabled_[eventName];\n      if (handlers[eventName] == callback) handlers[eventName], disabled && this.setDefaultHandler(eventName, disabled.pop());\n      else if (disabled) {\n        var i = disabled.indexOf(callback); - 1 != i && disabled.splice(i, 1)\n      }\n    }\n  }, EventEmitter.on = EventEmitter.addEventListener = function(eventName, callback, capturing) {\n    this._eventRegistry = this._eventRegistry || {};\n    var listeners = this._eventRegistry[eventName];\n    return listeners || (listeners = this._eventRegistry[eventName] = []), -1 == listeners.indexOf(callback) && listeners[capturing ? "unshift" : "push"](callback), callback\n  }, EventEmitter.off = EventEmitter.removeListener = EventEmitter.removeEventListener = function(eventName, callback) {\n    this._eventRegistry = this._eventRegistry || {};\n    var listeners = this._eventRegistry[eventName];\n    if (listeners) {\n      var index = listeners.indexOf(callback); - 1 !== index && listeners.splice(index, 1)\n    }\n  }, EventEmitter.removeAllListeners = function(eventName) {\n    this._eventRegistry && (this._eventRegistry[eventName] = [])\n  }, exports.EventEmitter = EventEmitter\n}), ace.define("ace/anchor", ["require", "exports", "module", "ace/lib/oop", "ace/lib/event_emitter"], function(acequire, exports) {\n  "use strict";\n  var oop = acequire("./lib/oop"),\n    EventEmitter = acequire("./lib/event_emitter").EventEmitter,\n    Anchor = exports.Anchor = function(doc, row, column) {\n      this.$onChange = this.onChange.bind(this), this.attach(doc), column === void 0 ? this.setPosition(row.row, row.column) : this.setPosition(row, column)\n    };\n  (function() {\n    function $pointsInOrder(point1, point2, equalPointsInOrder) {\n      var bColIsAfter = equalPointsInOrder ? point1.column <= point2.column : point1.column < point2.column;\n      return point1.row < point2.row || point1.row == point2.row && bColIsAfter\n    }\n\n    function $getTransformedPoint(delta, point, moveIfEqual) {\n      var deltaIsInsert = "insert" == delta.action,\n        deltaRowShift = (deltaIsInsert ? 1 : -1) * (delta.end.row - delta.start.row),\n        deltaColShift = (deltaIsInsert ? 1 : -1) * (delta.end.column - delta.start.column),\n        deltaStart = delta.start,\n        deltaEnd = deltaIsInsert ? deltaStart : delta.end;\n      return $pointsInOrder(point, deltaStart, moveIfEqual) ? {\n        row: point.row,\n        column: point.column\n      } : $pointsInOrder(deltaEnd, point, !moveIfEqual) ? {\n        row: point.row + deltaRowShift,\n        column: point.column + (point.row == deltaEnd.row ? deltaColShift : 0)\n      } : {\n        row: deltaStart.row,\n        column: deltaStart.column\n      }\n    }\n    oop.implement(this, EventEmitter), this.getPosition = function() {\n      return this.$clipPositionToDocument(this.row, this.column)\n    }, this.getDocument = function() {\n      return this.document\n    }, this.$insertRight = !1, this.onChange = function(delta) {\n      if (!(delta.start.row == delta.end.row && delta.start.row != this.row || delta.start.row > this.row)) {\n        var point = $getTransformedPoint(delta, {\n          row: this.row,\n          column: this.column\n        }, this.$insertRight);\n        this.setPosition(point.row, point.column, !0)\n      }\n    }, this.setPosition = function(row, column, noClip) {\n      var pos;\n      if (pos = noClip ? {\n          row: row,\n          column: column\n        } : this.$clipPositionToDocument(row, column), this.row != pos.row || this.column != pos.column) {\n        var old = {\n          row: this.row,\n          column: this.column\n        };\n        this.row = pos.row, this.column = pos.column, this._signal("change", {\n          old: old,\n          value: pos\n        })\n      }\n    }, this.detach = function() {\n      this.document.removeEventListener("change", this.$onChange)\n    }, this.attach = function(doc) {\n      this.document = doc || this.document, this.document.on("change", this.$onChange)\n    }, this.$clipPositionToDocument = function(row, column) {\n      var pos = {};\n      return row >= this.document.getLength() ? (pos.row = Math.max(0, this.document.getLength() - 1), pos.column = this.document.getLine(pos.row).length) : 0 > row ? (pos.row = 0, pos.column = 0) : (pos.row = row, pos.column = Math.min(this.document.getLine(pos.row).length, Math.max(0, column))), 0 > column && (pos.column = 0), pos\n    }\n  }).call(Anchor.prototype)\n}), ace.define("ace/document", ["require", "exports", "module", "ace/lib/oop", "ace/apply_delta", "ace/lib/event_emitter", "ace/range", "ace/anchor"], function(acequire, exports) {\n  "use strict";\n  var oop = acequire("./lib/oop"),\n    applyDelta = acequire("./apply_delta").applyDelta,\n    EventEmitter = acequire("./lib/event_emitter").EventEmitter,\n    Range = acequire("./range").Range,\n    Anchor = acequire("./anchor").Anchor,\n    Document = function(textOrLines) {\n      this.$lines = [""], 0 === textOrLines.length ? this.$lines = [""] : Array.isArray(textOrLines) ? this.insertMergedLines({\n        row: 0,\n        column: 0\n      }, textOrLines) : this.insert({\n        row: 0,\n        column: 0\n      }, textOrLines)\n    };\n  (function() {\n    oop.implement(this, EventEmitter), this.setValue = function(text) {\n      var len = this.getLength() - 1;\n      this.remove(new Range(0, 0, len, this.getLine(len).length)), this.insert({\n        row: 0,\n        column: 0\n      }, text)\n    }, this.getValue = function() {\n      return this.getAllLines().join(this.getNewLineCharacter())\n    }, this.createAnchor = function(row, column) {\n      return new Anchor(this, row, column)\n    }, this.$split = 0 === "aaa".split(/a/).length ? function(text) {\n      return text.replace(/\\r\\n|\\r/g, "\\n").split("\\n")\n    } : function(text) {\n      return text.split(/\\r\\n|\\r|\\n/)\n    }, this.$detectNewLine = function(text) {\n      var match = text.match(/^.*?(\\r\\n|\\r|\\n)/m);\n      this.$autoNewLine = match ? match[1] : "\\n", this._signal("changeNewLineMode")\n    }, this.getNewLineCharacter = function() {\n      switch (this.$newLineMode) {\n        case "windows":\n          return "\\r\\n";\n        case "unix":\n          return "\\n";\n        default:\n          return this.$autoNewLine || "\\n"\n      }\n    }, this.$autoNewLine = "", this.$newLineMode = "auto", this.setNewLineMode = function(newLineMode) {\n      this.$newLineMode !== newLineMode && (this.$newLineMode = newLineMode, this._signal("changeNewLineMode"))\n    }, this.getNewLineMode = function() {\n      return this.$newLineMode\n    }, this.isNewLine = function(text) {\n      return "\\r\\n" == text || "\\r" == text || "\\n" == text\n    }, this.getLine = function(row) {\n      return this.$lines[row] || ""\n    }, this.getLines = function(firstRow, lastRow) {\n      return this.$lines.slice(firstRow, lastRow + 1)\n    }, this.getAllLines = function() {\n      return this.getLines(0, this.getLength())\n    }, this.getLength = function() {\n      return this.$lines.length\n    }, this.getTextRange = function(range) {\n      return this.getLinesForRange(range).join(this.getNewLineCharacter())\n    }, this.getLinesForRange = function(range) {\n      var lines;\n      if (range.start.row === range.end.row) lines = [this.getLine(range.start.row).substring(range.start.column, range.end.column)];\n      else {\n        lines = this.getLines(range.start.row, range.end.row), lines[0] = (lines[0] || "").substring(range.start.column);\n        var l = lines.length - 1;\n        range.end.row - range.start.row == l && (lines[l] = lines[l].substring(0, range.end.column))\n      }\n      return lines\n    }, this.insertLines = function(row, lines) {\n      return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."), this.insertFullLines(row, lines)\n    }, this.removeLines = function(firstRow, lastRow) {\n      return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."), this.removeFullLines(firstRow, lastRow)\n    }, this.insertNewLine = function(position) {\n      return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\'\', \'\']) instead."), this.insertMergedLines(position, ["", ""])\n    }, this.insert = function(position, text) {\n      return 1 >= this.getLength() && this.$detectNewLine(text), this.insertMergedLines(position, this.$split(text))\n    }, this.insertInLine = function(position, text) {\n      var start = this.clippedPos(position.row, position.column),\n        end = this.pos(position.row, position.column + text.length);\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "insert",\n        lines: [text]\n      }, !0), this.clonePos(end)\n    }, this.clippedPos = function(row, column) {\n      var length = this.getLength();\n      void 0 === row ? row = length : 0 > row ? row = 0 : row >= length && (row = length - 1, column = void 0);\n      var line = this.getLine(row);\n      return void 0 == column && (column = line.length), column = Math.min(Math.max(column, 0), line.length), {\n        row: row,\n        column: column\n      }\n    }, this.clonePos = function(pos) {\n      return {\n        row: pos.row,\n        column: pos.column\n      }\n    }, this.pos = function(row, column) {\n      return {\n        row: row,\n        column: column\n      }\n    }, this.$clipPosition = function(position) {\n      var length = this.getLength();\n      return position.row >= length ? (position.row = Math.max(0, length - 1), position.column = this.getLine(length - 1).length) : (position.row = Math.max(0, position.row), position.column = Math.min(Math.max(position.column, 0), this.getLine(position.row).length)), position\n    }, this.insertFullLines = function(row, lines) {\n      row = Math.min(Math.max(row, 0), this.getLength());\n      var column = 0;\n      this.getLength() > row ? (lines = lines.concat([""]), column = 0) : (lines = [""].concat(lines), row--, column = this.$lines[row].length), this.insertMergedLines({\n        row: row,\n        column: column\n      }, lines)\n    }, this.insertMergedLines = function(position, lines) {\n      var start = this.clippedPos(position.row, position.column),\n        end = {\n          row: start.row + lines.length - 1,\n          column: (1 == lines.length ? start.column : 0) + lines[lines.length - 1].length\n        };\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "insert",\n        lines: lines\n      }), this.clonePos(end)\n    }, this.remove = function(range) {\n      var start = this.clippedPos(range.start.row, range.start.column),\n        end = this.clippedPos(range.end.row, range.end.column);\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "remove",\n        lines: this.getLinesForRange({\n          start: start,\n          end: end\n        })\n      }), this.clonePos(start)\n    }, this.removeInLine = function(row, startColumn, endColumn) {\n      var start = this.clippedPos(row, startColumn),\n        end = this.clippedPos(row, endColumn);\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "remove",\n        lines: this.getLinesForRange({\n          start: start,\n          end: end\n        })\n      }, !0), this.clonePos(start)\n    }, this.removeFullLines = function(firstRow, lastRow) {\n      firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1), lastRow = Math.min(Math.max(0, lastRow), this.getLength() - 1);\n      var deleteFirstNewLine = lastRow == this.getLength() - 1 && firstRow > 0,\n        deleteLastNewLine = this.getLength() - 1 > lastRow,\n        startRow = deleteFirstNewLine ? firstRow - 1 : firstRow,\n        startCol = deleteFirstNewLine ? this.getLine(startRow).length : 0,\n        endRow = deleteLastNewLine ? lastRow + 1 : lastRow,\n        endCol = deleteLastNewLine ? 0 : this.getLine(endRow).length,\n        range = new Range(startRow, startCol, endRow, endCol),\n        deletedLines = this.$lines.slice(firstRow, lastRow + 1);\n      return this.applyDelta({\n        start: range.start,\n        end: range.end,\n        action: "remove",\n        lines: this.getLinesForRange(range)\n      }), deletedLines\n    }, this.removeNewLine = function(row) {\n      this.getLength() - 1 > row && row >= 0 && this.applyDelta({\n        start: this.pos(row, this.getLine(row).length),\n        end: this.pos(row + 1, 0),\n        action: "remove",\n        lines: ["", ""]\n      })\n    }, this.replace = function(range, text) {\n      if (range instanceof Range || (range = Range.fromPoints(range.start, range.end)), 0 === text.length && range.isEmpty()) return range.start;\n      if (text == this.getTextRange(range)) return range.end;\n      this.remove(range);\n      var end;\n      return end = text ? this.insert(range.start, text) : range.start\n    }, this.applyDeltas = function(deltas) {\n      for (var i = 0; deltas.length > i; i++) this.applyDelta(deltas[i])\n    }, this.revertDeltas = function(deltas) {\n      for (var i = deltas.length - 1; i >= 0; i--) this.revertDelta(deltas[i])\n    }, this.applyDelta = function(delta, doNotValidate) {\n      var isInsert = "insert" == delta.action;\n      (isInsert ? 1 >= delta.lines.length && !delta.lines[0] : !Range.comparePoints(delta.start, delta.end)) || (isInsert && delta.lines.length > 2e4 && this.$splitAndapplyLargeDelta(delta, 2e4), applyDelta(this.$lines, delta, doNotValidate), this._signal("change", delta))\n    }, this.$splitAndapplyLargeDelta = function(delta, MAX) {\n      for (var lines = delta.lines, l = lines.length, row = delta.start.row, column = delta.start.column, from = 0, to = 0;;) {\n        from = to, to += MAX - 1;\n        var chunk = lines.slice(from, to);\n        if (to > l) {\n          delta.lines = chunk, delta.start.row = row + from, delta.start.column = column;\n          break\n        }\n        chunk.push(""), this.applyDelta({\n          start: this.pos(row + from, column),\n          end: this.pos(row + to, column = 0),\n          action: delta.action,\n          lines: chunk\n        }, !0)\n      }\n    }, this.revertDelta = function(delta) {\n      this.applyDelta({\n        start: this.clonePos(delta.start),\n        end: this.clonePos(delta.end),\n        action: "insert" == delta.action ? "remove" : "insert",\n        lines: delta.lines.slice()\n      })\n    }, this.indexToPosition = function(index, startRow) {\n      for (var lines = this.$lines || this.getAllLines(), newlineLength = this.getNewLineCharacter().length, i = startRow || 0, l = lines.length; l > i; i++)\n        if (index -= lines[i].length + newlineLength, 0 > index) return {\n          row: i,\n          column: index + lines[i].length + newlineLength\n        };\n      return {\n        row: l - 1,\n        column: lines[l - 1].length\n      }\n    }, this.positionToIndex = function(pos, startRow) {\n      for (var lines = this.$lines || this.getAllLines(), newlineLength = this.getNewLineCharacter().length, index = 0, row = Math.min(pos.row, lines.length), i = startRow || 0; row > i; ++i) index += lines[i].length + newlineLength;\n      return index + pos.column\n    }\n  }).call(Document.prototype), exports.Document = Document\n}), ace.define("ace/lib/lang", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  exports.last = function(a) {\n    return a[a.length - 1]\n  }, exports.stringReverse = function(string) {\n    return string.split("").reverse().join("")\n  }, exports.stringRepeat = function(string, count) {\n    for (var result = ""; count > 0;) 1 & count && (result += string), (count >>= 1) && (string += string);\n    return result\n  };\n  var trimBeginRegexp = /^\\s\\s*/,\n    trimEndRegexp = /\\s\\s*$/;\n  exports.stringTrimLeft = function(string) {\n    return string.replace(trimBeginRegexp, "")\n  }, exports.stringTrimRight = function(string) {\n    return string.replace(trimEndRegexp, "")\n  }, exports.copyObject = function(obj) {\n    var copy = {};\n    for (var key in obj) copy[key] = obj[key];\n    return copy\n  }, exports.copyArray = function(array) {\n    for (var copy = [], i = 0, l = array.length; l > i; i++) copy[i] = array[i] && "object" == typeof array[i] ? this.copyObject(array[i]) : array[i];\n    return copy\n  }, exports.deepCopy = function deepCopy(obj) {\n    if ("object" != typeof obj || !obj) return obj;\n    var copy;\n    if (Array.isArray(obj)) {\n      copy = [];\n      for (var key = 0; obj.length > key; key++) copy[key] = deepCopy(obj[key]);\n      return copy\n    }\n    if ("[object Object]" !== Object.prototype.toString.call(obj)) return obj;\n    copy = {};\n    for (var key in obj) copy[key] = deepCopy(obj[key]);\n    return copy\n  }, exports.arrayToMap = function(arr) {\n    for (var map = {}, i = 0; arr.length > i; i++) map[arr[i]] = 1;\n    return map\n  }, exports.createMap = function(props) {\n    var map = Object.create(null);\n    for (var i in props) map[i] = props[i];\n    return map\n  }, exports.arrayRemove = function(array, value) {\n    for (var i = 0; array.length >= i; i++) value === array[i] && array.splice(i, 1)\n  }, exports.escapeRegExp = function(str) {\n    return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g, "\\\\$1")\n  }, exports.escapeHTML = function(str) {\n    return str.replace(/&/g, "&#38;").replace(/"/g, "&#34;").replace(/\'/g, "&#39;").replace(/</g, "&#60;")\n  }, exports.getMatchOffsets = function(string, regExp) {\n    var matches = [];\n    return string.replace(regExp, function(str) {\n      matches.push({\n        offset: arguments[arguments.length - 2],\n        length: str.length\n      })\n    }), matches\n  }, exports.deferredCall = function(fcn) {\n    var timer = null,\n      callback = function() {\n        timer = null, fcn()\n      },\n      deferred = function(timeout) {\n        return deferred.cancel(), timer = setTimeout(callback, timeout || 0), deferred\n      };\n    return deferred.schedule = deferred, deferred.call = function() {\n      return this.cancel(), fcn(), deferred\n    }, deferred.cancel = function() {\n      return clearTimeout(timer), timer = null, deferred\n    }, deferred.isPending = function() {\n      return timer\n    }, deferred\n  }, exports.delayedCall = function(fcn, defaultTimeout) {\n    var timer = null,\n      callback = function() {\n        timer = null, fcn()\n      },\n      _self = function(timeout) {\n        null == timer && (timer = setTimeout(callback, timeout || defaultTimeout))\n      };\n    return _self.delay = function(timeout) {\n      timer && clearTimeout(timer), timer = setTimeout(callback, timeout || defaultTimeout)\n    }, _self.schedule = _self, _self.call = function() {\n      this.cancel(), fcn()\n    }, _self.cancel = function() {\n      timer && clearTimeout(timer), timer = null\n    }, _self.isPending = function() {\n      return timer\n    }, _self\n  }\n}), ace.define("ace/worker/mirror", ["require", "exports", "module", "ace/range", "ace/document", "ace/lib/lang"], function(acequire, exports) {\n  "use strict";\n  acequire("../range").Range;\n  var Document = acequire("../document").Document,\n    lang = acequire("../lib/lang"),\n    Mirror = exports.Mirror = function(sender) {\n      this.sender = sender;\n      var doc = this.doc = new Document(""),\n        deferredUpdate = this.deferredUpdate = lang.delayedCall(this.onUpdate.bind(this)),\n        _self = this;\n      sender.on("change", function(e) {\n        var data = e.data;\n        if (data[0].start) doc.applyDeltas(data);\n        else\n          for (var i = 0; data.length > i; i += 2) {\n            if (Array.isArray(data[i + 1])) var d = {\n              action: "insert",\n              start: data[i],\n              lines: data[i + 1]\n            };\n            else var d = {\n              action: "remove",\n              start: data[i],\n              end: data[i + 1]\n            };\n            doc.applyDelta(d, !0)\n          }\n        return _self.$timeout ? deferredUpdate.schedule(_self.$timeout) : (_self.onUpdate(), void 0)\n      })\n    };\n  (function() {\n    this.$timeout = 500, this.setTimeout = function(timeout) {\n      this.$timeout = timeout\n    }, this.setValue = function(value) {\n      this.doc.setValue(value), this.deferredUpdate.schedule(this.$timeout)\n    }, this.getValue = function(callbackId) {\n      this.sender.callback(this.doc.getValue(), callbackId)\n    }, this.onUpdate = function() {}, this.isPending = function() {\n      return this.deferredUpdate.isPending()\n    }\n  }).call(Mirror.prototype)\n}), ace.define("ace/mode/json/json_parse", ["require", "exports", "module"], function() {\n  "use strict";\n  var at, ch, text, value, escapee = {\n      \'"\': \'"\',\n      "\\\\": "\\\\",\n      "/": "/",\n      b: "\\b",\n      f: "\\f",\n      n: "\\n",\n      r: "\\r",\n      t: "\t"\n    },\n    error = function(m) {\n      throw {\n        name: "SyntaxError",\n        message: m,\n        at: at,\n        text: text\n      }\n    },\n    reset = function (newAt) {\n      ch = text.charAt(newAt);\n      at = newAt + 1;\n    },\n    next = function(c) {\n      return c && c !== ch && error("Expected \'" + c + "\' instead of \'" + ch + "\'"), ch = text.charAt(at), at += 1, ch\n    },\n    nextUpTo = function (upTo, errorMessage) {\n      let currentAt = at,\n        i = text.indexOf(upTo, currentAt);\n      if (i < 0) {\n        error(errorMessage || \'Expected \\\'\' + upTo + \'\\\'\');\n      }\n      reset(i + upTo.length);\n      return text.substring(currentAt, i);\n    },\n    peek = function (c) {\n      return text.substr(at, c.length) === c; // nocommit - double check\n    },\n    number = function() {\n      var number, string = "";\n      for ("-" === ch && (string = "-", next("-")); ch >= "0" && "9" >= ch;) string += ch, next();\n      if ("." === ch)\n        for (string += "."; next() && ch >= "0" && "9" >= ch;) string += ch;\n      if ("e" === ch || "E" === ch)\n        for (string += ch, next(), ("-" === ch || "+" === ch) && (string += ch, next()); ch >= "0" && "9" >= ch;) string += ch, next();\n      return number = +string, isNaN(number) ? (error("Bad number"), void 0) : number\n    },\n    string = function() {\n      var hex, i, uffff, string = "";\n      if (\'"\' === ch) {\n        if (peek(\'""\')) {\n          // literal\n          next(\'"\');\n          next(\'"\');\n          return nextUpTo(\'"""\', \'failed to find closing \\\'"""\\\'\');\n        } else {\n          for (; next();) {\n            if (\'"\' === ch) return next(), string;\n            if ("\\\\" === ch)\n              if (next(), "u" === ch) {\n                for (uffff = 0, i = 0; 4 > i && (hex = parseInt(next(), 16), isFinite(hex)); i += 1) uffff = 16 * uffff + hex;\n                string += String.fromCharCode(uffff)\n              } else {\n                if ("string" != typeof escapee[ch]) break;\n                string += escapee[ch]\n              }\n            else string += ch\n          }\n        }\n      }\n      error("Bad string")\n    },\n    white = function() {\n      for (; ch && " " >= ch;) next()\n    },\n    word = function() {\n      switch (ch) {\n        case "t":\n          return next("t"), next("r"), next("u"), next("e"), !0;\n        case "f":\n          return next("f"), next("a"), next("l"), next("s"), next("e"), !1;\n        case "n":\n          return next("n"), next("u"), next("l"), next("l"), null\n      }\n      error("Unexpected \'" + ch + "\'")\n    },\n    array = function() {\n      var array = [];\n      if ("[" === ch) {\n        if (next("["), white(), "]" === ch) return next("]"), array;\n        for (; ch;) {\n          if (array.push(value()), white(), "]" === ch) return next("]"), array;\n          next(","), white()\n        }\n      }\n      error("Bad array")\n    },\n    object = function() {\n      var key, object = {};\n      if ("{" === ch) {\n        if (next("{"), white(), "}" === ch) return next("}"), object;\n        for (; ch;) {\n          if (key = string(), white(), next(":"), Object.hasOwnProperty.call(object, key) && error(\'Duplicate key "\' + key + \'"\'), object[key] = value(), white(), "}" === ch) return next("}"), object;\n          next(","), white()\n        }\n      }\n      error("Bad object")\n    };\n  return value = function() {\n      switch (white(), ch) {\n        case "{":\n          return object();\n        case "[":\n          return array();\n        case \'"\':\n          return string();\n        case "-":\n          return number();\n        default:\n          return ch >= "0" && "9" >= ch ? number() : word()\n      }\n    },\n    function(source, reviver) {\n      var result;\n      return text = source, at = 0, ch = " ", result = value(), white(), ch && error("Syntax error"), "function" == typeof reviver ? function walk(holder, key) {\n        var k, v, value = holder[key];\n        if (value && "object" == typeof value)\n          for (k in value) Object.hasOwnProperty.call(value, k) && (v = walk(value, k), void 0 !== v ? value[k] = v : delete value[k]);\n        return reviver.call(holder, key, value)\n      }({\n        "": result\n      }, "") : result\n    }\n}), ace.define("ace/mode/json_worker", ["require", "exports", "module", "ace/lib/oop", "ace/worker/mirror", "ace/mode/json/json_parse"], function(acequire, exports) {\n  "use strict";\n  var oop = acequire("../lib/oop"),\n    Mirror = acequire("../worker/mirror").Mirror,\n    parse = acequire("./json/json_parse"),\n    JsonWorker = exports.JsonWorker = function(sender) {\n      Mirror.call(this, sender), this.setTimeout(200)\n    };\n  oop.inherits(JsonWorker, Mirror),\n    function() {\n      this.onUpdate = function() {\n        var value = this.doc.getValue(),\n          errors = [];\n        try {\n          value && parse(value)\n        } catch (e) {\n          var pos = this.doc.indexToPosition(e.at - 1);\n          errors.push({\n            row: pos.row,\n            column: pos.column,\n            text: e.message,\n            type: "error"\n          })\n        }\n        this.sender.emit("annotate", errors)\n      }\n    }.call(JsonWorker.prototype)\n}), ace.define("ace/lib/es5-shim", ["require", "exports", "module"], function() {\n  function Empty() {}\n\n  function doesDefinePropertyWork(object) {\n    try {\n      return Object.defineProperty(object, "sentinel", {}), "sentinel" in object\n    } catch (exception) {}\n  }\n\n  function toInteger(n) {\n    return n = +n, n !== n ? n = 0 : 0 !== n && n !== 1 / 0 && n !== -(1 / 0) && (n = (n > 0 || -1) * Math.floor(Math.abs(n))), n\n  }\n  Function.prototype.bind || (Function.prototype.bind = function(that) {\n    var target = this;\n    if ("function" != typeof target) throw new TypeError("Function.prototype.bind called on incompatible " + target);\n    var args = slice.call(arguments, 1),\n      bound = function() {\n        if (this instanceof bound) {\n          var result = target.apply(this, args.concat(slice.call(arguments)));\n          return Object(result) === result ? result : this\n        }\n        return target.apply(that, args.concat(slice.call(arguments)))\n      };\n    return target.prototype && (Empty.prototype = target.prototype, bound.prototype = new Empty, Empty.prototype = null), bound\n  });\n  var defineGetter, defineSetter, lookupGetter, lookupSetter, supportsAccessors, call = Function.prototype.call,\n    prototypeOfArray = Array.prototype,\n    prototypeOfObject = Object.prototype,\n    slice = prototypeOfArray.slice,\n    _toString = call.bind(prototypeOfObject.toString),\n    owns = call.bind(prototypeOfObject.hasOwnProperty);\n  if ((supportsAccessors = owns(prototypeOfObject, "__defineGetter__")) && (defineGetter = call.bind(prototypeOfObject.__defineGetter__), defineSetter = call.bind(prototypeOfObject.__defineSetter__), lookupGetter = call.bind(prototypeOfObject.__lookupGetter__), lookupSetter = call.bind(prototypeOfObject.__lookupSetter__)), 2 != [1, 2].splice(0).length)\n    if (function() {\n        function makeArray(l) {\n          var a = Array(l + 2);\n          return a[0] = a[1] = 0, a\n        }\n        var lengthBefore, array = [];\n        return array.splice.apply(array, makeArray(20)), array.splice.apply(array, makeArray(26)), lengthBefore = array.length, array.splice(5, 0, "XXX"), lengthBefore + 1 == array.length, lengthBefore + 1 == array.length ? !0 : void 0\n      }()) {\n      var array_splice = Array.prototype.splice;\n      Array.prototype.splice = function(start, deleteCount) {\n        return arguments.length ? array_splice.apply(this, [void 0 === start ? 0 : start, void 0 === deleteCount ? this.length - start : deleteCount].concat(slice.call(arguments, 2))) : []\n      }\n    } else Array.prototype.splice = function(pos, removeCount) {\n      var length = this.length;\n      pos > 0 ? pos > length && (pos = length) : void 0 == pos ? pos = 0 : 0 > pos && (pos = Math.max(length + pos, 0)), length > pos + removeCount || (removeCount = length - pos);\n      var removed = this.slice(pos, pos + removeCount),\n        insert = slice.call(arguments, 2),\n        add = insert.length;\n      if (pos === length) add && this.push.apply(this, insert);\n      else {\n        var remove = Math.min(removeCount, length - pos),\n          tailOldPos = pos + remove,\n          tailNewPos = tailOldPos + add - remove,\n          tailCount = length - tailOldPos,\n          lengthAfterRemove = length - remove;\n        if (tailOldPos > tailNewPos)\n          for (var i = 0; tailCount > i; ++i) this[tailNewPos + i] = this[tailOldPos + i];\n        else if (tailNewPos > tailOldPos)\n          for (i = tailCount; i--;) this[tailNewPos + i] = this[tailOldPos + i];\n        if (add && pos === lengthAfterRemove) this.length = lengthAfterRemove, this.push.apply(this, insert);\n        else\n          for (this.length = lengthAfterRemove + add, i = 0; add > i; ++i) this[pos + i] = insert[i]\n      }\n      return removed\n    };\n  Array.isArray || (Array.isArray = function(obj) {\n    return "[object Array]" == _toString(obj)\n  });\n  var boxedString = Object("a"),\n    splitString = "a" != boxedString[0] || !(0 in boxedString);\n  if (Array.prototype.forEach || (Array.prototype.forEach = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        thisp = arguments[1],\n        i = -1,\n        length = self.length >>> 0;\n      if ("[object Function]" != _toString(fun)) throw new TypeError;\n      for (; length > ++i;) i in self && fun.call(thisp, self[i], i, object)\n    }), Array.prototype.map || (Array.prototype.map = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        result = Array(length),\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++) i in self && (result[i] = fun.call(thisp, self[i], i, object));\n      return result\n    }), Array.prototype.filter || (Array.prototype.filter = function(fun) {\n      var value, object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        result = [],\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++) i in self && (value = self[i], fun.call(thisp, value, i, object) && result.push(value));\n      return result\n    }), Array.prototype.every || (Array.prototype.every = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++)\n        if (i in self && !fun.call(thisp, self[i], i, object)) return !1;\n      return !0\n    }), Array.prototype.some || (Array.prototype.some = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++)\n        if (i in self && fun.call(thisp, self[i], i, object)) return !0;\n      return !1\n    }), Array.prototype.reduce || (Array.prototype.reduce = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0;\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      if (!length && 1 == arguments.length) throw new TypeError("reduce of empty array with no initial value");\n      var result, i = 0;\n      if (arguments.length >= 2) result = arguments[1];\n      else\n        for (;;) {\n          if (i in self) {\n            result = self[i++];\n            break\n          }\n          if (++i >= length) throw new TypeError("reduce of empty array with no initial value")\n        }\n      for (; length > i; i++) i in self && (result = fun.call(void 0, result, self[i], i, object));\n      return result\n    }), Array.prototype.reduceRight || (Array.prototype.reduceRight = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0;\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      if (!length && 1 == arguments.length) throw new TypeError("reduceRight of empty array with no initial value");\n      var result, i = length - 1;\n      if (arguments.length >= 2) result = arguments[1];\n      else\n        for (;;) {\n          if (i in self) {\n            result = self[i--];\n            break\n          }\n          if (0 > --i) throw new TypeError("reduceRight of empty array with no initial value")\n        }\n      do i in this && (result = fun.call(void 0, result, self[i], i, object)); while (i--);\n      return result\n    }), Array.prototype.indexOf && -1 == [0, 1].indexOf(1, 2) || (Array.prototype.indexOf = function(sought) {\n      var self = splitString && "[object String]" == _toString(this) ? this.split("") : toObject(this),\n        length = self.length >>> 0;\n      if (!length) return -1;\n      var i = 0;\n      for (arguments.length > 1 && (i = toInteger(arguments[1])), i = i >= 0 ? i : Math.max(0, length + i); length > i; i++)\n        if (i in self && self[i] === sought) return i;\n      return -1\n    }), Array.prototype.lastIndexOf && -1 == [0, 1].lastIndexOf(0, -3) || (Array.prototype.lastIndexOf = function(sought) {\n      var self = splitString && "[object String]" == _toString(this) ? this.split("") : toObject(this),\n        length = self.length >>> 0;\n      if (!length) return -1;\n      var i = length - 1;\n      for (arguments.length > 1 && (i = Math.min(i, toInteger(arguments[1]))), i = i >= 0 ? i : length - Math.abs(i); i >= 0; i--)\n        if (i in self && sought === self[i]) return i;\n      return -1\n    }), Object.getPrototypeOf || (Object.getPrototypeOf = function(object) {\n      return object.__proto__ || (object.constructor ? object.constructor.prototype : prototypeOfObject)\n    }), !Object.getOwnPropertyDescriptor) {\n    var ERR_NON_OBJECT = "Object.getOwnPropertyDescriptor called on a non-object: ";\n    Object.getOwnPropertyDescriptor = function(object, property) {\n      if ("object" != typeof object && "function" != typeof object || null === object) throw new TypeError(ERR_NON_OBJECT + object);\n      if (owns(object, property)) {\n        var descriptor, getter, setter;\n        if (descriptor = {\n            enumerable: !0,\n            configurable: !0\n          }, supportsAccessors) {\n          var prototype = object.__proto__;\n          object.__proto__ = prototypeOfObject;\n          var getter = lookupGetter(object, property),\n            setter = lookupSetter(object, property);\n          if (object.__proto__ = prototype, getter || setter) return getter && (descriptor.get = getter), setter && (descriptor.set = setter), descriptor\n        }\n        return descriptor.value = object[property], descriptor\n      }\n    }\n  }\n  if (Object.getOwnPropertyNames || (Object.getOwnPropertyNames = function(object) {\n      return Object.keys(object)\n    }), !Object.create) {\n    var createEmpty;\n    createEmpty = null === Object.prototype.__proto__ ? function() {\n      return {\n        __proto__: null\n      }\n    } : function() {\n      var empty = {};\n      for (var i in empty) empty[i] = null;\n      return empty.constructor = empty.hasOwnProperty = empty.propertyIsEnumerable = empty.isPrototypeOf = empty.toLocaleString = empty.toString = empty.valueOf = empty.__proto__ = null, empty\n    }, Object.create = function(prototype, properties) {\n      var object;\n      if (null === prototype) object = createEmpty();\n      else {\n        if ("object" != typeof prototype) throw new TypeError("typeof prototype[" + typeof prototype + "] != \'object\'");\n        var Type = function() {};\n        Type.prototype = prototype, object = new Type, object.__proto__ = prototype\n      }\n      return void 0 !== properties && Object.defineProperties(object, properties), object\n    }\n  }\n  if (Object.defineProperty) {\n    var definePropertyWorksOnObject = doesDefinePropertyWork({}),\n      definePropertyWorksOnDom = "undefined" == typeof document || doesDefinePropertyWork(document.createElement("div"));\n    if (!definePropertyWorksOnObject || !definePropertyWorksOnDom) var definePropertyFallback = Object.defineProperty\n  }\n  if (!Object.defineProperty || definePropertyFallback) {\n    var ERR_NON_OBJECT_DESCRIPTOR = "Property description must be an object: ",\n      ERR_NON_OBJECT_TARGET = "Object.defineProperty called on non-object: ",\n      ERR_ACCESSORS_NOT_SUPPORTED = "getters & setters can not be defined on this javascript engine";\n    Object.defineProperty = function(object, property, descriptor) {\n      if ("object" != typeof object && "function" != typeof object || null === object) throw new TypeError(ERR_NON_OBJECT_TARGET + object);\n      if ("object" != typeof descriptor && "function" != typeof descriptor || null === descriptor) throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR + descriptor);\n      if (definePropertyFallback) try {\n        return definePropertyFallback.call(Object, object, property, descriptor)\n      } catch (exception) {}\n      if (owns(descriptor, "value"))\n        if (supportsAccessors && (lookupGetter(object, property) || lookupSetter(object, property))) {\n          var prototype = object.__proto__;\n          object.__proto__ = prototypeOfObject, delete object[property], object[property] = descriptor.value, object.__proto__ = prototype\n        } else object[property] = descriptor.value;\n      else {\n        if (!supportsAccessors) throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);\n        owns(descriptor, "get") && defineGetter(object, property, descriptor.get), owns(descriptor, "set") && defineSetter(object, property, descriptor.set)\n      }\n      return object\n    }\n  }\n  Object.defineProperties || (Object.defineProperties = function(object, properties) {\n    for (var property in properties) owns(properties, property) && Object.defineProperty(object, property, properties[property]);\n    return object\n  }), Object.seal || (Object.seal = function(object) {\n    return object\n  }), Object.freeze || (Object.freeze = function(object) {\n    return object\n  });\n  try {\n    Object.freeze(function() {})\n  } catch (exception) {\n    Object.freeze = function(freezeObject) {\n      return function(object) {\n        return "function" == typeof object ? object : freezeObject(object)\n      }\n    }(Object.freeze)\n  }\n  if (Object.preventExtensions || (Object.preventExtensions = function(object) {\n      return object\n    }), Object.isSealed || (Object.isSealed = function() {\n      return !1\n    }), Object.isFrozen || (Object.isFrozen = function() {\n      return !1\n    }), Object.isExtensible || (Object.isExtensible = function(object) {\n      if (Object(object) === object) throw new TypeError;\n      for (var name = ""; owns(object, name);) name += "?";\n      object[name] = !0;\n      var returnValue = owns(object, name);\n      return delete object[name], returnValue\n    }), !Object.keys) {\n    var hasDontEnumBug = !0,\n      dontEnums = ["toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor"],\n      dontEnumsLength = dontEnums.length;\n    for (var key in {\n        toString: null\n      }) hasDontEnumBug = !1;\n    Object.keys = function(object) {\n      if ("object" != typeof object && "function" != typeof object || null === object) throw new TypeError("Object.keys called on a non-object");\n      var keys = [];\n      for (var name in object) owns(object, name) && keys.push(name);\n      if (hasDontEnumBug)\n        for (var i = 0, ii = dontEnumsLength; ii > i; i++) {\n          var dontEnum = dontEnums[i];\n          owns(object, dontEnum) && keys.push(dontEnum)\n        }\n      return keys\n    }\n  }\n  Date.now || (Date.now = function() {\n    return (new Date).getTime()\n  });\n  var ws = "\t\\n\v\\f\\r   ᠎             　\\u2028\\u2029\ufeff";\n  if (!String.prototype.trim || ws.trim()) {\n    ws = "[" + ws + "]";\n    var trimBeginRegexp = RegExp("^" + ws + ws + "*"),\n      trimEndRegexp = RegExp(ws + ws + "*$");\n    String.prototype.trim = function() {\n      return (this + "").replace(trimBeginRegexp, "").replace(trimEndRegexp, "")\n    }\n  }\n  var toObject = function(o) {\n    if (null == o) throw new TypeError("can\'t convert " + o + " to object");\n    return Object(o)\n  }\n});\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"collapseLiteralStrings",{enumerable:true,get:function get(){return _json_xjson_translation_tools.collapseLiteralStrings}});Object.defineProperty(exports,"expandLiteralStrings",{enumerable:true,get:function get(){return _json_xjson_translation_tools.expandLiteralStrings}});var _json_xjson_translation_tools=__webpack_require__(726)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.collapseLiteralStrings=collapseLiteralStrings;exports.expandLiteralStrings=expandLiteralStrings;function collapseLiteralStrings(data){var splitData=data.split('"""');for(var idx=1;idx<splitData.length-1;idx+=2){splitData[idx]=JSON.stringify(splitData[idx])}return splitData.join("")}var LITERAL_STRING_CANDIDATES=/((:[\s\r\n]*)([^\\])"(\\"|[^"\n])*\\?")/g;function expandLiteralStrings(data){return data.replace(LITERAL_STRING_CANDIDATES,(function(match,string){if(string.match(/\\./)){var firstDoubleQuoteIdx=string.indexOf('"');var lastDoubleQuoteIdx=string.lastIndexOf('"');if(string[firstDoubleQuoteIdx+1]==="\\"&&string[firstDoubleQuoteIdx+2]==='"'){return string}if(string[lastDoubleQuoteIdx-1]==='"'&&string[lastDoubleQuoteIdx-2]==="\\"){return string}var colonAndAnySpacing=string.slice(0,firstDoubleQuoteIdx);var rawStringifiedValue=string.slice(firstDoubleQuoteIdx,string.length);var jsonValue=JSON.parse(rawStringifiedValue);return"".concat(colonAndAnySpacing,'"""').concat(jsonValue,'"""')}else{return string}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useRequest=exports.sendRequest=void 0;var _react=__webpack_require__(22);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var sendRequest=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(httpClient,_ref2){var path,method,body,query,stringifiedBody,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:path=_ref2.path,method=_ref2.method,body=_ref2.body,query=_ref2.query;_context.prev=1;stringifiedBody=typeof body==="string"?body:JSON.stringify(body);_context.next=5;return httpClient[method](path,{body:stringifiedBody,query:query});case 5:response=_context.sent;return _context.abrupt("return",{data:response.data?response.data:response,error:null});case 9:_context.prev=9;_context.t0=_context["catch"](1);return _context.abrupt("return",{data:null,error:_context.t0.response&&_context.t0.response.data?_context.t0.response.data:_context.t0.body});case 12:case"end":return _context.stop()}}}),_callee,null,[[1,9]])})));return function sendRequest(_x,_x2){return _ref.apply(this,arguments)}}();exports.sendRequest=sendRequest;var useRequest=function useRequest(httpClient,_ref3){var _sendRequestRef$curre3;var path=_ref3.path,method=_ref3.method,query=_ref3.query,body=_ref3.body,pollIntervalMs=_ref3.pollIntervalMs,initialData=_ref3.initialData,_ref3$deserializer=_ref3.deserializer,deserializer=_ref3$deserializer===void 0?function(data){return data}:_ref3$deserializer;var sendRequestRef=(0,_react.useRef)();var _useState=(0,_react.useState)(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=(0,_react.useState)(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=(0,_react.useState)(initialData),_useState6=_slicedToArray(_useState5,2),data=_useState6[0],setData=_useState6[1];var _useState7=(0,_react.useState)(true),_useState8=_slicedToArray(_useState7,2),isInitialRequest=_useState8[0],setIsInitialRequest=_useState8[1];var pollInterval=(0,_react.useRef)(null);var pollIntervalId=(0,_react.useRef)(null);pollInterval.current=pollIntervalMs;var isOutdatedRequest=false;var scheduleRequest=function scheduleRequest(){if(pollIntervalId.current){clearTimeout(pollIntervalId.current)}if(pollInterval.current){pollIntervalId.current=setTimeout((function(){var _sendRequestRef$curre;return((_sendRequestRef$curre=sendRequestRef.current)!==null&&_sendRequestRef$curre!==void 0?_sendRequestRef$curre:_sendRequest)()}),pollInterval.current)}};var _sendRequest=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var requestBody,response,serializedResponseData,responseError,responseData;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setIsLoading(true);requestBody={path:path,method:method,query:query,body:body};_context2.next=4;return sendRequest(httpClient,requestBody);case 4:response=_context2.sent;serializedResponseData=response.data,responseError=response.error;if(!isOutdatedRequest){_context2.next=8;break}return _context2.abrupt("return",{data:null,error:null});case 8:setError(responseError);if(!responseError){responseData=deserializer(serializedResponseData);setData(responseData)}setIsLoading(false);setIsInitialRequest(false);scheduleRequest();return _context2.abrupt("return",{data:serializedResponseData,error:responseError});case 14:case"end":return _context2.stop()}}}),_callee2)})));return function _sendRequest(){return _ref4.apply(this,arguments)}}();(0,_react.useEffect)((function(){sendRequestRef.current=_sendRequest}),[_sendRequest]);var stringifiedQuery=(0,_react.useMemo)((function(){return JSON.stringify(query)}),[query]);(0,_react.useEffect)((function(){var _sendRequestRef$curre2;((_sendRequestRef$curre2=sendRequestRef.current)!==null&&_sendRequestRef$curre2!==void 0?_sendRequestRef$curre2:_sendRequest)()}),[path,stringifiedQuery]);(0,_react.useEffect)((function(){scheduleRequest();return function(){isOutdatedRequest=true;if(pollIntervalId.current){clearTimeout(pollIntervalId.current)}}}),[pollIntervalMs]);return{isInitialRequest:isInitialRequest,isLoading:isLoading,error:error,data:data,sendRequest:(_sendRequestRef$curre3=sendRequestRef.current)!==null&&_sendRequestRef$curre3!==void 0?_sendRequestRef$curre3:_sendRequest}};exports.useRequest=useRequest},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getErrorMessage=getErrorMessage;var _errors=__webpack_require__(729);function getErrorMessage(error){if((0,_errors.isErrorResponse)(error)){return"".concat(error.body.error,": ").concat(error.body.message)}if(_typeof(error)==="object"&&typeof error.message==="string"){return error.message}return JSON.stringify(error)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isErrorResponse=isErrorResponse;function isErrorResponse(arg){var _arg$body,_arg$body2;return(arg===null||arg===void 0?void 0:(_arg$body=arg.body)===null||_arg$body===void 0?void 0:_arg$body.error)!==undefined&&(arg===null||arg===void 0?void 0:(_arg$body2=arg.body)===null||_arg$body2===void 0?void 0:_arg$body2.message)!==undefined}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useStartTransforms=void 0;var _i18n=__webpack_require__(0);var _app_dependencies=__webpack_require__(51);var _common=__webpack_require__(44);var _use_api=__webpack_require__(53);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var useStartTransforms=function useStartTransforms(){var toastNotifications=(0,_app_dependencies.useToastNotifications)();var api=(0,_use_api.useApi)();return(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(transforms){var transformsInfo,results,transformId;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:transformsInfo=transforms.map((function(tf){return{id:tf.config.id,state:tf.stats.state}}));_context.next=3;return api.startTransforms(transformsInfo);case 3:results=_context.sent;for(transformId in results){if(results.hasOwnProperty(transformId)){if(results[transformId].success===true){toastNotifications.addSuccess(_i18n.i18n.translate("xpack.transform.transformList.startTransformSuccessMessage",{defaultMessage:"Request to start transform {transformId} acknowledged.",values:{transformId:transformId}}))}else{toastNotifications.addDanger(_i18n.i18n.translate("xpack.transform.transformList.startTransformErrorMessage",{defaultMessage:"An error occurred starting the transform {transformId}",values:{transformId:transformId}}))}}}_common.refreshTransformList$.next(_common.REFRESH_TRANSFORM_LIST_STATE.REFRESH);case 6:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}())};exports.useStartTransforms=useStartTransforms},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useStopTransforms=void 0;var _i18n=__webpack_require__(0);var _app_dependencies=__webpack_require__(51);var _common=__webpack_require__(44);var _use_api=__webpack_require__(53);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var useStopTransforms=function useStopTransforms(){var toastNotifications=(0,_app_dependencies.useToastNotifications)();var api=(0,_use_api.useApi)();return(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(transforms){var transformsInfo,results,transformId;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:transformsInfo=transforms.map((function(df){return{id:df.config.id,state:df.stats.state}}));_context.next=3;return api.stopTransforms(transformsInfo);case 3:results=_context.sent;for(transformId in results){if(results.hasOwnProperty(transformId)){if(results[transformId].success===true){toastNotifications.addSuccess(_i18n.i18n.translate("xpack.transform.transformList.stopTransformSuccessMessage",{defaultMessage:"Request to stop data frame transform {transformId} acknowledged.",values:{transformId:transformId}}))}else{toastNotifications.addDanger(_i18n.i18n.translate("xpack.transform.transformList.stopTransformErrorMessage",{defaultMessage:"An error occurred stopping the data frame transform {transformId}",values:{transformId:transformId}}))}}}_common.refreshTransformList$.next(_common.REFRESH_TRANSFORM_LIST_STATE.REFRESH);case 6:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}())};exports.useStopTransforms=useStopTransforms},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useRequest=void 0;var _shared_imports=__webpack_require__(69);var _app_dependencies=__webpack_require__(51);var useRequest=function useRequest(config){var _useAppDependencies=(0,_app_dependencies.useAppDependencies)(),http=_useAppDependencies.http;return(0,_shared_imports.useRequest)(http,config)};exports.useRequest=useRequest},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PrivilegesWrapper=exports.WithPrivileges=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _eui=__webpack_require__(23);var _react2=__webpack_require__(24);var _components=__webpack_require__(71);var _authorization_provider=__webpack_require__(130);var _not_authorized_section=__webpack_require__(241);var _common=__webpack_require__(98);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var WithPrivileges=function WithPrivileges(_ref){var requiredPrivileges=_ref.privileges,children=_ref.children;var _useContext=(0,_react.useContext)(_authorization_provider.AuthorizationContext),isLoading=_useContext.isLoading,privileges=_useContext.privileges;var privilegesToArray=(0,_common.toArray)(requiredPrivileges).map((function(p){var _p$split=p.split("."),_p$split2=_slicedToArray(_p$split,2),section=_p$split2[0],privilege=_p$split2[1];if(!privilege){throw new Error('Required privilege must have the format "section.privilege"')}return[section,privilege]}));var hasPrivilege=(0,_common.hasPrivilegeFactory)(privileges);var hasPrivileges=isLoading?false:privilegesToArray.every(hasPrivilege);var privilegesMissing=privilegesToArray.reduce((function(acc,_ref2){var _ref3=_slicedToArray(_ref2,2),section=_ref3[0],privilege=_ref3[1];if(privilege==="*"){acc[section]=privileges.missingPrivileges[section]||[]}else if(privileges.missingPrivileges[section]&&privileges.missingPrivileges[section].includes(privilege)){var missing=acc[section]||[];acc[section]=[].concat(_toConsumableArray(missing),[privilege])}return acc}),{});return children({isLoading:isLoading,hasPrivileges:hasPrivileges,privilegesMissing:privilegesMissing})};exports.WithPrivileges=WithPrivileges;var MissingClusterPrivileges=function MissingClusterPrivileges(_ref4){var missingPrivileges=_ref4.missingPrivileges,privilegesCount=_ref4.privilegesCount;return _react.default.createElement(_eui.EuiPageContent,null,_react.default.createElement(_not_authorized_section.NotAuthorizedSection,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.transform.app.deniedPrivilegeTitle",defaultMessage:"You're missing cluster privileges"}),message:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.transform.app.deniedPrivilegeDescription",defaultMessage:"To use this section of Transforms, you must have {privilegesCount, plural, one {this cluster privilege} other {these cluster privileges}}: {missingPrivileges}.",values:{missingPrivileges:missingPrivileges,privilegesCount:privilegesCount}})}))};var PrivilegesWrapper=function PrivilegesWrapper(_ref5){var children=_ref5.children,privileges=_ref5.privileges;return _react.default.createElement(WithPrivileges,{privileges:privileges},(function(_ref6){var isLoading=_ref6.isLoading,hasPrivileges=_ref6.hasPrivileges,privilegesMissing=_ref6.privilegesMissing;if(isLoading){return _react.default.createElement(_components.SectionLoading,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.transform.app.checkingPrivilegesDescription",defaultMessage:"Checking privileges…"}))}if(!hasPrivileges){return _react.default.createElement(MissingClusterPrivileges,{missingPrivileges:privilegesMissing.cluster.join(", "),privilegesCount:privilegesMissing.cluster.length})}return _react.default.createElement(_react.default.Fragment,null,children)}))};exports.PrivilegesWrapper=PrivilegesWrapper},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CloneTransformSection",{enumerable:true,get:function get(){return _clone_transform_section.CloneTransformSection}});var _clone_transform_section=__webpack_require__(735)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CloneTransformSection=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _react2=__webpack_require__(24);var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _use_api=__webpack_require__(53);var _use_documentation_links=__webpack_require__(79);var _use_search_items=__webpack_require__(242);var _constants=__webpack_require__(64);var _app_dependencies=__webpack_require__(51);var _navigation=__webpack_require__(81);var _authorization=__webpack_require__(56);var _wizard=__webpack_require__(244);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function isGetTransformsResponseError(arg){return arg.error!==undefined}var CloneTransformSection=function CloneTransformSection(_ref){var match=_ref.match;(0,_react.useEffect)((function(){_navigation.breadcrumbService.setBreadcrumbs(_navigation.BREADCRUMB_SECTION.CLONE_TRANSFORM);_navigation.docTitleService.setTitle("createTransform")}),[]);var api=(0,_use_api.useApi)();var appDeps=(0,_app_dependencies.useAppDependencies)();var savedObjectsClient=appDeps.savedObjects.client;var indexPatterns=appDeps.data.indexPatterns;var _useDocumentationLink=(0,_use_documentation_links.useDocumentationLinks)(),esTransform=_useDocumentationLink.esTransform;var transformId=match.params.transformId;var _useState=(0,_react.useState)(),_useState2=_slicedToArray(_useState,2),transformConfig=_useState2[0],setTransformConfig=_useState2[1];var _useState3=(0,_react.useState)(),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];var _useState5=(0,_react.useState)(false),_useState6=_slicedToArray(_useState5,2),isInitialized=_useState6[0],setIsInitialized=_useState6[1];var _useSearchItems=(0,_use_search_items.useSearchItems)(undefined),getIndexPatternIdByTitle=_useSearchItems.getIndexPatternIdByTitle,loadIndexPatterns=_useSearchItems.loadIndexPatterns,searchItems=_useSearchItems.searchItems,setSavedObjectId=_useSearchItems.setSavedObjectId;var fetchTransformConfig=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var transformConfigs,indexPatternTitle,indexPatternId;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.getTransforms(transformId);case 3:transformConfigs=_context.sent;if(!isGetTransformsResponseError(transformConfigs)){_context.next=9;break}setTransformConfig(undefined);setErrorMessage(transformConfigs.error.msg);setIsInitialized(true);return _context.abrupt("return");case 9:_context.next=11;return loadIndexPatterns(savedObjectsClient,indexPatterns);case 11:indexPatternTitle=Array.isArray(transformConfigs.transforms[0].source.index)?transformConfigs.transforms[0].source.index.join(","):transformConfigs.transforms[0].source.index;indexPatternId=getIndexPatternIdByTitle(indexPatternTitle);if(!(indexPatternId===undefined)){_context.next=15;break}throw new Error(_i18n.i18n.translate("xpack.transform.clone.errorPromptText",{defaultMessage:"Could not fetch the Kibana index pattern ID."}));case 15:setSavedObjectId(indexPatternId);setTransformConfig(transformConfigs.transforms[0]);setErrorMessage(undefined);setIsInitialized(true);_context.next=26;break;case 21:_context.prev=21;_context.t0=_context["catch"](0);setTransformConfig(undefined);if(_context.t0.message!==undefined){setErrorMessage(_context.t0.message)}else{setErrorMessage(JSON.stringify(_context.t0,null,2))}setIsInitialized(true);case 26:case"end":return _context.stop()}}}),_callee,null,[[0,21]])})));return function fetchTransformConfig(){return _ref2.apply(this,arguments)}}();(0,_react.useEffect)((function(){fetchTransformConfig()}),[]);return _react.default.createElement(_authorization.PrivilegesWrapper,{privileges:_constants.APP_CREATE_TRANSFORM_CLUSTER_PRIVILEGES},_react.default.createElement(_eui.EuiPageContent,{"data-test-subj":"transformPageCloneTransform"},_react.default.createElement(_eui.EuiTitle,{size:"l"},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement("h1",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.transform.transformsWizard.cloneTransformTitle",defaultMessage:"Clone transform"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{href:esTransform,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.transform.transformsWizard.transformDocsLinkText",defaultMessage:"Transform docs"}))))),_react.default.createElement(_eui.EuiPageContentBody,null,_react.default.createElement(_eui.EuiSpacer,{size:"l"}),typeof errorMessage!=="undefined"&&_react.default.createElement(_eui.EuiCallOut,{title:_i18n.i18n.translate("xpack.transform.clone.errorPromptTitle",{defaultMessage:"An error occurred getting the transform configuration."}),color:"danger",iconType:"alert"},_react.default.createElement("pre",null,JSON.stringify(errorMessage))),searchItems!==undefined&&isInitialized===true&&transformConfig!==undefined&&_react.default.createElement(_wizard.Wizard,{cloneConfig:transformConfig,searchItems:searchItems}))))};exports.CloneTransformSection=CloneTransformSection},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useSearchItems=void 0;var _react=__webpack_require__(22);var _shared_imports=__webpack_require__(69);var _app_dependencies=__webpack_require__(51);var _common=__webpack_require__(243);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var useSearchItems=function useSearchItems(defaultSavedObjectId){var _useState=(0,_react.useState)(defaultSavedObjectId),_useState2=_slicedToArray(_useState,2),savedObjectId=_useState2[0],setSavedObjectId=_useState2[1];var appDeps=(0,_app_dependencies.useAppDependencies)();var indexPatterns=appDeps.data.indexPatterns;var uiSettings=appDeps.uiSettings;var savedObjectsClient=appDeps.savedObjects.client;var savedSearches=(0,_shared_imports.createSavedSearchesLoader)({savedObjectsClient:savedObjectsClient,indexPatterns:indexPatterns,chrome:appDeps.chrome,overlays:appDeps.overlays});var _useState3=(0,_react.useState)(undefined),_useState4=_slicedToArray(_useState3,2),searchItems=_useState4[0],setSearchItems=_useState4[1];function fetchSavedObject(_x){return _fetchSavedObject.apply(this,arguments)}function _fetchSavedObject(){_fetchSavedObject=_asyncToGenerator(regeneratorRuntime.mark((function _callee(id){var fetchedIndexPattern,fetchedSavedSearch;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return(0,_common.loadIndexPatterns)(savedObjectsClient,indexPatterns);case 2:_context.prev=2;_context.next=5;return(0,_common.loadCurrentIndexPattern)(indexPatterns,id);case 5:fetchedIndexPattern=_context.sent;_context.next=10;break;case 8:_context.prev=8;_context.t0=_context["catch"](2);case 10:_context.prev=10;_context.next=13;return(0,_common.loadCurrentSavedSearch)(savedSearches,id);case 13:fetchedSavedSearch=_context.sent;_context.next=18;break;case 16:_context.prev=16;_context.t1=_context["catch"](10);case 18:setSearchItems((0,_common.createSearchItems)(fetchedIndexPattern,fetchedSavedSearch,uiSettings));case 19:case"end":return _context.stop()}}}),_callee,null,[[2,8],[10,16]])})));return _fetchSavedObject.apply(this,arguments)}(0,_react.useEffect)((function(){if(savedObjectId!==undefined){fetchSavedObject(savedObjectId)}}),[savedObjectId]);return{getIndexPatternIdByTitle:_common.getIndexPatternIdByTitle,loadIndexPatterns:_common.loadIndexPatterns,searchItems:searchItems,setSavedObjectId:setSavedObjectId}};exports.useSearchItems=useSearchItems},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Wizard=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _common=__webpack_require__(44);var _step_define=__webpack_require__(245);var _step_create=__webpack_require__(761);var _step_details=__webpack_require__(764);var _wizard_nav=__webpack_require__(769);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var KBN_MANAGEMENT_PAGE_CLASSNAME;(function(KBN_MANAGEMENT_PAGE_CLASSNAME){KBN_MANAGEMENT_PAGE_CLASSNAME["DEFAULT_BODY"]="mgtPage__body";KBN_MANAGEMENT_PAGE_CLASSNAME["TRANSFORM_BODY_MODIFIER"]="mgtPage__body--transformWizard"})(KBN_MANAGEMENT_PAGE_CLASSNAME||(KBN_MANAGEMENT_PAGE_CLASSNAME={}));var WIZARD_STEPS;(function(WIZARD_STEPS){WIZARD_STEPS[WIZARD_STEPS["DEFINE"]=0]="DEFINE";WIZARD_STEPS[WIZARD_STEPS["DETAILS"]=1]="DETAILS";WIZARD_STEPS[WIZARD_STEPS["CREATE"]=2]="CREATE"})(WIZARD_STEPS||(WIZARD_STEPS={}));var StepDefine=function StepDefine(_ref){var isCurrentStep=_ref.isCurrentStep,stepDefineState=_ref.stepDefineState,setCurrentStep=_ref.setCurrentStep,setStepDefineState=_ref.setStepDefineState,searchItems=_ref.searchItems;var definePivotRef=(0,_react.useRef)(null);return _react.default.createElement(_react.Fragment,null,_react.default.createElement("div",{ref:definePivotRef}),isCurrentStep&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_step_define.StepDefineForm,{onChange:setStepDefineState,overrides:_objectSpread({},stepDefineState),searchItems:searchItems}),_react.default.createElement(_wizard_nav.WizardNav,{next:function next(){return setCurrentStep(WIZARD_STEPS.DETAILS)},nextActive:stepDefineState.valid})),!isCurrentStep&&_react.default.createElement(_step_define.StepDefineSummary,{formState:_objectSpread({},stepDefineState),searchItems:searchItems}))};var Wizard=_react.default.memo((function(_ref2){var cloneConfig=_ref2.cloneConfig,searchItems=_ref2.searchItems;var _useState=(0,_react.useState)(WIZARD_STEPS.DEFINE),_useState2=_slicedToArray(_useState,2),currentStep=_useState2[0],setCurrentStep=_useState2[1];var _useState3=(0,_react.useState)((0,_step_define.applyTransformConfigToDefineState)((0,_step_define.getDefaultStepDefineState)(searchItems),cloneConfig)),_useState4=_slicedToArray(_useState3,2),stepDefineState=_useState4[0],setStepDefineState=_useState4[1];var _useState5=(0,_react.useState)((0,_step_details.applyTransformConfigToDetailsState)((0,_step_details.getDefaultStepDetailsState)(),cloneConfig)),_useState6=_slicedToArray(_useState5,2),stepDetailsState=_useState6[0],setStepDetailsState=_useState6[1];var stepDetails=currentStep===WIZARD_STEPS.DETAILS?_react.default.createElement(_step_details.StepDetailsForm,{onChange:setStepDetailsState,overrides:stepDetailsState,searchItems:searchItems}):_react.default.createElement(_step_details.StepDetailsSummary,stepDetailsState);var _useState7=(0,_react.useState)(_step_create.getDefaultStepCreateState),_useState8=_slicedToArray(_useState7,2),stepCreateState=_useState8[0],setStepCreateState=_useState8[1];(0,_react.useEffect)((function(){var managementBody=document.getElementsByClassName(KBN_MANAGEMENT_PAGE_CLASSNAME.DEFAULT_BODY);if(managementBody.length>0){managementBody[0].classList.add(KBN_MANAGEMENT_PAGE_CLASSNAME.TRANSFORM_BODY_MODIFIER);return function(){managementBody[0].classList.remove(KBN_MANAGEMENT_PAGE_CLASSNAME.TRANSFORM_BODY_MODIFIER)}}}),[]);var indexPattern=searchItems.indexPattern;var transformConfig=(0,_common.getCreateRequestBody)(indexPattern.title,stepDefineState,stepDetailsState);var stepCreate=currentStep===WIZARD_STEPS.CREATE?_react.default.createElement(_step_create.StepCreateForm,{createIndexPattern:stepDetailsState.createIndexPattern,transformId:stepDetailsState.transformId,transformConfig:transformConfig,onChange:setStepCreateState,overrides:stepCreateState}):_react.default.createElement(_step_create.StepCreateSummary,null);var stepsConfig=[{title:_i18n.i18n.translate("xpack.transform.transformsWizard.stepDefineTitle",{defaultMessage:"Define pivot"}),children:_react.default.createElement(StepDefine,{isCurrentStep:currentStep===WIZARD_STEPS.DEFINE,stepDefineState:stepDefineState,setCurrentStep:setCurrentStep,setStepDefineState:setStepDefineState,searchItems:searchItems})},{title:_i18n.i18n.translate("xpack.transform.transformsWizard.stepDetailsTitle",{defaultMessage:"Transform details"}),children:_react.default.createElement(_react.Fragment,null,stepDetails,currentStep===WIZARD_STEPS.DETAILS&&_react.default.createElement(_wizard_nav.WizardNav,{previous:function previous(){setCurrentStep(WIZARD_STEPS.DEFINE)},next:function next(){return setCurrentStep(WIZARD_STEPS.CREATE)},nextActive:stepDetailsState.valid})),status:currentStep>=WIZARD_STEPS.DETAILS?undefined:"incomplete"},{title:_i18n.i18n.translate("xpack.transform.transformsWizard.stepCreateTitle",{defaultMessage:"Create"}),children:_react.default.createElement(_react.Fragment,null,stepCreate,currentStep===WIZARD_STEPS.CREATE&&!stepCreateState.created&&_react.default.createElement(_wizard_nav.WizardNav,{previous:function previous(){return setCurrentStep(WIZARD_STEPS.DETAILS)}})),status:currentStep>=WIZARD_STEPS.CREATE?undefined:"incomplete"}];return _react.default.createElement(_eui.EuiSteps,{className:"transform__steps",steps:stepsConfig})}));exports.Wizard=Wizard},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultStepDefineState=getDefaultStepDefineState;exports.applyTransformConfigToDefineState=applyTransformConfigToDefineState;exports.getAggNameConflictToastMessages=getAggNameConflictToastMessages;exports.StepDefineForm=void 0;var _lodash=__webpack_require__(41);var _react=_interopRequireWildcard(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _public=__webpack_require__(59);var _pivot_preview=__webpack_require__(124);var _use_documentation_links=__webpack_require__(79);var _use_x_json_mode=__webpack_require__(742);var _app_dependencies=__webpack_require__(51);var _common=__webpack_require__(68);var _aggregation_dropdown=__webpack_require__(743);var _aggregation_list=__webpack_require__(246);var _group_by_list=__webpack_require__(247);var _source_index_preview=__webpack_require__(754);var _switch_modal=__webpack_require__(758);var _common2=__webpack_require__(44);var _common3=__webpack_require__(759);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var defaultSearch="*";var QUERY_LANGUAGE_KUERY="kuery";var QUERY_LANGUAGE_LUCENE="lucene";function getDefaultStepDefineState(searchItems){return{aggList:{},groupByList:{},isAdvancedPivotEditorEnabled:false,isAdvancedSourceEditorEnabled:false,searchLanguage:QUERY_LANGUAGE_KUERY,searchString:undefined,searchQuery:searchItems.savedSearch!==undefined?searchItems.combinedQuery:defaultSearch,sourceConfigUpdated:false,valid:false}}function applyTransformConfigToDefineState(state,transformConfig){if(transformConfig!==undefined){state.aggList=Object.keys(transformConfig.pivot.aggregations).reduce((function(aggList,aggName){var aggConfig=transformConfig.pivot.aggregations[aggName];var agg=Object.keys(aggConfig)[0];aggList[aggName]=_objectSpread({},aggConfig[agg],{agg:agg,aggName:aggName,dropDownName:aggName});return aggList}),{});state.groupByList=Object.keys(transformConfig.pivot.group_by).reduce((function(groupByList,groupByName){var groupByConfig=transformConfig.pivot.group_by[groupByName];var groupBy=Object.keys(groupByConfig)[0];groupByList[groupByName]=_objectSpread({agg:groupBy,aggName:groupByName,dropDownName:groupByName},groupByConfig[groupBy]);return groupByList}),{});var query=transformConfig.source.query;if(query!==undefined&&!(0,_lodash.isEqual)(query,_common2.matchAllQuery)){state.isAdvancedSourceEditorEnabled=true;state.searchQuery=query;state.sourceConfigUpdated=true}state.valid=true}return state}function getAggNameConflictToastMessages(aggName,aggList,groupByList){if(aggList[aggName]!==undefined){return[_i18n.i18n.translate("xpack.transform.stepDefineForm.aggExistsErrorMessage",{defaultMessage:"An aggregation configuration with the name '{aggName}' already exists.",values:{aggName:aggName}})]}if(groupByList[aggName]!==undefined){return[_i18n.i18n.translate("xpack.transform.stepDefineForm.groupByExistsErrorMessage",{defaultMessage:"A group by configuration with the name '{aggName}' already exists.",values:{aggName:aggName}})]}var conflicts=[];var aggNameSplit=aggName.split(".");var aggNameCheck;aggNameSplit.forEach((function(aggNamePart){aggNameCheck=aggNameCheck===undefined?aggNamePart:"".concat(aggNameCheck,".").concat(aggNamePart);if(aggList[aggNameCheck]!==undefined||groupByList[aggNameCheck]!==undefined){conflicts.push(_i18n.i18n.translate("xpack.transform.stepDefineForm.nestedConflictErrorMessage",{defaultMessage:"Couldn't add configuration '{aggName}' because of a nesting conflict with '{aggNameCheck}'.",values:{aggName:aggName,aggNameCheck:aggNameCheck}}))}}));if(conflicts.length>0){return conflicts}Object.keys(aggList).some((function(aggListName){var aggListNameSplit=aggListName.split(".");var aggListNameCheck;return aggListNameSplit.some((function(aggListNamePart){aggListNameCheck=aggListNameCheck===undefined?aggListNamePart:"".concat(aggListNameCheck,".").concat(aggListNamePart);if(aggListNameCheck===aggName){conflicts.push(_i18n.i18n.translate("xpack.transform.stepDefineForm.nestedAggListConflictErrorMessage",{defaultMessage:"Couldn't add configuration '{aggName}' because of a nesting conflict with '{aggListName}'.",values:{aggName:aggName,aggListName:aggListName}}));return true}return false}))}));if(conflicts.length>0){return conflicts}Object.keys(groupByList).some((function(groupByListName){var groupByListNameSplit=groupByListName.split(".");var groupByListNameCheck;return groupByListNameSplit.some((function(groupByListNamePart){groupByListNameCheck=groupByListNameCheck===undefined?groupByListNamePart:"".concat(groupByListNameCheck,".").concat(groupByListNamePart);if(groupByListNameCheck===aggName){conflicts.push(_i18n.i18n.translate("xpack.transform.stepDefineForm.nestedGroupByListConflictErrorMessage",{defaultMessage:"Couldn't add configuration '{aggName}' because of a nesting conflict with '{groupByListName}'.",values:{aggName:aggName,groupByListName:groupByListName}}));return true}return false}))}));return conflicts}var StepDefineForm=_react.default.memo((function(_ref){var _ref$overrides=_ref.overrides,overrides=_ref$overrides===void 0?{}:_ref$overrides,onChange=_ref.onChange,searchItems=_ref.searchItems;var toastNotifications=(0,_app_dependencies.useToastNotifications)();var _useDocumentationLink=(0,_use_documentation_links.useDocumentationLinks)(),esQueryDsl=_useDocumentationLink.esQueryDsl,esTransformPivot=_useDocumentationLink.esTransformPivot;var defaults=_objectSpread({},getDefaultStepDefineState(searchItems),{},overrides);var _useState=(0,_react.useState)({query:defaults.searchString||"",language:defaults.searchLanguage}),_useState2=_slicedToArray(_useState,2),searchInput=_useState2[0],setSearchInput=_useState2[1];var _useState3=(0,_react.useState)(undefined),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];var _useState5=(0,_react.useState)(defaults.searchLanguage),_useState6=_slicedToArray(_useState5,2),searchLanguage=_useState6[0],setSearchLanguage=_useState6[1];var _useState7=(0,_react.useState)(defaults.searchString),_useState8=_slicedToArray(_useState7,2),searchString=_useState8[0],setSearchString=_useState8[1];var _useState9=(0,_react.useState)(defaults.searchQuery),_useState10=_slicedToArray(_useState9,2),searchQuery=_useState10[0],setSearchQuery=_useState10[1];var indexPattern=searchItems.indexPattern;var searchChangeHandler=function searchChangeHandler(query){return setSearchInput(query)};var searchSubmitHandler=function searchSubmitHandler(query){setSearchLanguage(query.language);setSearchString(query.query!==""?query.query:undefined);try{switch(query.language){case QUERY_LANGUAGE_KUERY:setSearchQuery(_public.esKuery.toElasticsearchQuery(_public.esKuery.fromKueryExpression(query.query),indexPattern));return;case QUERY_LANGUAGE_LUCENE:setSearchQuery(_public.esQuery.luceneStringToDsl(query.query));return}}catch(e){console.log("Invalid syntax",JSON.stringify(e,null,2));setErrorMessage({query:query.query,message:e.message})}};var _useState11=(0,_react.useState)(defaults.groupByList),_useState12=_slicedToArray(_useState11,2),groupByList=_useState12[0],setGroupByList=_useState12[1];var _getPivotDropdownOpti=(0,_common3.getPivotDropdownOptions)(indexPattern),groupByOptions=_getPivotDropdownOpti.groupByOptions,groupByOptionsData=_getPivotDropdownOpti.groupByOptionsData,aggOptions=_getPivotDropdownOpti.aggOptions,aggOptionsData=_getPivotDropdownOpti.aggOptionsData;var addGroupBy=function addGroupBy(d){var label=d[0].label;var config=groupByOptionsData[label];var aggName=config.aggName;var aggNameConflictMessages=getAggNameConflictToastMessages(aggName,aggList,groupByList);if(aggNameConflictMessages.length>0){aggNameConflictMessages.forEach((function(m){return toastNotifications.addDanger(m)}));return}groupByList[aggName]=config;setGroupByList(_objectSpread({},groupByList))};var updateGroupBy=function updateGroupBy(previousAggName,item){var groupByListWithoutPrevious=_objectSpread({},groupByList);delete groupByListWithoutPrevious[previousAggName];var aggNameConflictMessages=getAggNameConflictToastMessages(item.aggName,aggList,groupByListWithoutPrevious);if(aggNameConflictMessages.length>0){aggNameConflictMessages.forEach((function(m){return toastNotifications.addDanger(m)}));return}groupByListWithoutPrevious[item.aggName]=item;setGroupByList(_objectSpread({},groupByListWithoutPrevious))};var deleteGroupBy=function deleteGroupBy(aggName){delete groupByList[aggName];setGroupByList(_objectSpread({},groupByList))};var _useState13=(0,_react.useState)(defaults.aggList),_useState14=_slicedToArray(_useState13,2),aggList=_useState14[0],setAggList=_useState14[1];var addAggregation=function addAggregation(d){var label=d[0].label;var config=aggOptionsData[label];var aggName=config.aggName;var aggNameConflictMessages=getAggNameConflictToastMessages(aggName,aggList,groupByList);if(aggNameConflictMessages.length>0){aggNameConflictMessages.forEach((function(m){return toastNotifications.addDanger(m)}));return}aggList[aggName]=config;setAggList(_objectSpread({},aggList))};var updateAggregation=function updateAggregation(previousAggName,item){var aggListWithoutPrevious=_objectSpread({},aggList);delete aggListWithoutPrevious[previousAggName];var aggNameConflictMessages=getAggNameConflictToastMessages(item.aggName,aggListWithoutPrevious,groupByList);if(aggNameConflictMessages.length>0){aggNameConflictMessages.forEach((function(m){return toastNotifications.addDanger(m)}));return}aggListWithoutPrevious[item.aggName]=item;setAggList(_objectSpread({},aggListWithoutPrevious))};var deleteAggregation=function deleteAggregation(aggName){delete aggList[aggName];setAggList(_objectSpread({},aggList))};var pivotAggsArr=(0,_common.dictionaryToArray)(aggList);var pivotGroupByArr=(0,_common.dictionaryToArray)(groupByList);var pivotQuery=(0,_common2.getPivotQuery)(searchQuery);var _useState15=(0,_react.useState)(false),_useState16=_slicedToArray(_useState15,2),isAdvancedEditorSwitchModalVisible=_useState16[0],setAdvancedEditorSwitchModalVisible=_useState16[1];var _useState17=(0,_react.useState)(false),_useState18=_slicedToArray(_useState17,2),isAdvancedPivotEditorApplyButtonEnabled=_useState18[0],setAdvancedPivotEditorApplyButtonEnabled=_useState18[1];var _useState19=(0,_react.useState)(defaults.isAdvancedPivotEditorEnabled),_useState20=_slicedToArray(_useState19,2),isAdvancedPivotEditorEnabled=_useState20[0],setAdvancedPivotEditorEnabled=_useState20[1];var _useState21=(0,_react.useState)(defaults.sourceConfigUpdated),_useState22=_slicedToArray(_useState21,2),sourceConfigUpdated=_useState22[0],setSourceConfigUpdated=_useState22[1];var _useState23=(0,_react.useState)(false),_useState24=_slicedToArray(_useState23,2),isAdvancedSourceEditorSwitchModalVisible=_useState24[0],setAdvancedSourceEditorSwitchModalVisible=_useState24[1];var _useState25=(0,_react.useState)(defaults.isAdvancedSourceEditorEnabled),_useState26=_slicedToArray(_useState25,2),isAdvancedSourceEditorEnabled=_useState26[0],setAdvancedSourceEditorEnabled=_useState26[1];var _useState27=(0,_react.useState)(false),_useState28=_slicedToArray(_useState27,2),isAdvancedSourceEditorApplyButtonEnabled=_useState28[0],setAdvancedSourceEditorApplyButtonEnabled=_useState28[1];var previewRequest=(0,_common2.getPreviewRequestBody)(indexPattern.title,pivotQuery,pivotGroupByArr,pivotAggsArr);var stringifiedPivotConfig=JSON.stringify(previewRequest.pivot,null,2);var _useState29=(0,_react.useState)(stringifiedPivotConfig),_useState30=_slicedToArray(_useState29,2),advancedEditorConfigLastApplied=_useState30[0],setAdvancedEditorConfigLastApplied=_useState30[1];var _useXJsonMode=(0,_use_x_json_mode.useXJsonMode)(stringifiedPivotConfig),convertToJson=_useXJsonMode.convertToJson,setAdvancedEditorConfig=_useXJsonMode.setXJson,advancedEditorConfig=_useXJsonMode.xJson;(0,_react.useEffect)((function(){setAdvancedEditorConfig(stringifiedPivotConfig)}),[setAdvancedEditorConfig,stringifiedPivotConfig]);var stringifiedSourceConfig=JSON.stringify(previewRequest.source.query,null,2);var _useState31=(0,_react.useState)(stringifiedSourceConfig),_useState32=_slicedToArray(_useState31,2),advancedEditorSourceConfigLastApplied=_useState32[0],setAdvancedEditorSourceConfigLastApplied=_useState32[1];var _useState33=(0,_react.useState)(stringifiedSourceConfig),_useState34=_slicedToArray(_useState33,2),advancedEditorSourceConfig=_useState34[0],setAdvancedEditorSourceConfig=_useState34[1];var applyAdvancedSourceEditorChanges=function applyAdvancedSourceEditorChanges(){var sourceConfig=JSON.parse(advancedEditorSourceConfig);var prettySourceConfig=JSON.stringify(sourceConfig,null,2);setSearchQuery(sourceConfig);setSourceConfigUpdated(true);setAdvancedEditorSourceConfig(prettySourceConfig);setAdvancedEditorSourceConfigLastApplied(prettySourceConfig);setAdvancedSourceEditorApplyButtonEnabled(false)};var applyAdvancedPivotEditorChanges=function applyAdvancedPivotEditorChanges(){var pivotConfig=JSON.parse(convertToJson(advancedEditorConfig));var newGroupByList={};if(pivotConfig!==undefined&&pivotConfig.group_by!==undefined){Object.entries(pivotConfig.group_by).forEach((function(d){var aggName=d[0];var aggConfig=d[1];var aggConfigKeys=Object.keys(aggConfig);var agg=aggConfigKeys[0];newGroupByList[aggName]=_objectSpread({},aggConfig[agg],{agg:agg,aggName:aggName,dropDownName:""})}))}setGroupByList(newGroupByList);var newAggList={};if(pivotConfig!==undefined&&pivotConfig.aggregations!==undefined){Object.entries(pivotConfig.aggregations).forEach((function(d){var aggName=d[0];var aggConfig=d[1];var aggConfigKeys=Object.keys(aggConfig);var agg=aggConfigKeys[0];newAggList[aggName]=_objectSpread({},aggConfig[agg],{agg:agg,aggName:aggName,dropDownName:""})}))}setAggList(newAggList);setAdvancedEditorConfigLastApplied(advancedEditorConfig);setAdvancedPivotEditorApplyButtonEnabled(false)};var toggleAdvancedEditor=function toggleAdvancedEditor(){setAdvancedEditorConfig(advancedEditorConfig);setAdvancedPivotEditorEnabled(!isAdvancedPivotEditorEnabled);setAdvancedPivotEditorApplyButtonEnabled(false);if(isAdvancedPivotEditorEnabled===false){setAdvancedEditorConfigLastApplied(advancedEditorConfig)}};var toggleAdvancedSourceEditor=function toggleAdvancedSourceEditor(){var reset=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(reset===true){setSearchQuery(defaultSearch);setSourceConfigUpdated(false)}if(isAdvancedSourceEditorEnabled===false){setAdvancedEditorSourceConfigLastApplied(advancedEditorSourceConfig)}setAdvancedSourceEditorEnabled(!isAdvancedSourceEditorEnabled);setAdvancedSourceEditorApplyButtonEnabled(false)};var advancedEditorHelpText=_react.default.createElement(_react.Fragment,null,_i18n.i18n.translate("xpack.transform.stepDefineForm.advancedEditorHelpText",{defaultMessage:"The advanced editor allows you to edit the pivot configuration of the transform."})," ",_react.default.createElement(_eui.EuiLink,{href:esTransformPivot,target:"_blank"},_i18n.i18n.translate("xpack.transform.stepDefineForm.advancedEditorHelpTextLink",{defaultMessage:"Learn more about available options."})));var advancedSourceEditorHelpText=_react.default.createElement(_react.Fragment,null,_i18n.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorHelpText",{defaultMessage:"The advanced editor allows you to edit the source query clause of the transform."})," ",_react.default.createElement(_eui.EuiLink,{href:esQueryDsl,target:"_blank"},_i18n.i18n.translate("xpack.transform.stepDefineForm.advancedEditorHelpTextLink",{defaultMessage:"Learn more about available options."})));var valid=pivotGroupByArr.length>0&&pivotAggsArr.length>0;(0,_react.useEffect)((function(){var previewRequestUpdate=(0,_common2.getPreviewRequestBody)(indexPattern.title,pivotQuery,pivotGroupByArr,pivotAggsArr);var stringifiedSourceConfigUpdate=JSON.stringify(previewRequestUpdate.source.query,null,2);setAdvancedEditorSourceConfig(stringifiedSourceConfigUpdate);onChange({aggList:aggList,groupByList:groupByList,isAdvancedPivotEditorEnabled:isAdvancedPivotEditorEnabled,isAdvancedSourceEditorEnabled:isAdvancedSourceEditorEnabled,searchLanguage:searchLanguage,searchString:searchString,searchQuery:searchQuery,sourceConfigUpdated:sourceConfigUpdated,valid:valid})}),[JSON.stringify(pivotAggsArr),JSON.stringify(pivotGroupByArr),isAdvancedPivotEditorEnabled,isAdvancedSourceEditorEnabled,searchLanguage,searchString,searchQuery,valid]);var maxIndexFields=1024;var numIndexFields=indexPattern.fields.length;var disabledQuery=numIndexFields>maxIndexFields;return _react.default.createElement(_eui.EuiFlexGroup,{className:"transform__stepDefineForm"},_react.default.createElement(_eui.EuiFlexItem,{grow:false,className:"transform__stepDefineFormLeftColumn"},_react.default.createElement("div",{"data-test-subj":"transformStepDefineForm"},_react.default.createElement(_eui.EuiForm,null,searchItems.savedSearch===undefined&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDefineForm.indexPatternLabel",{defaultMessage:"Index pattern"}),helpText:disabledQuery?_i18n.i18n.translate("xpack.transform.stepDefineForm.indexPatternHelpText",{defaultMessage:"An optional query for this index pattern is not supported. The number of supported index fields is {maxIndexFields} whereas this index has {numIndexFields} fields.",values:{maxIndexFields:maxIndexFields,numIndexFields:numIndexFields}}):""},_react.default.createElement("span",null,indexPattern.title)),!disabledQuery&&_react.default.createElement(_react.Fragment,null,!isAdvancedSourceEditorEnabled&&_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDefineForm.queryLabel",{defaultMessage:"Query"}),helpText:_i18n.i18n.translate("xpack.transform.stepDefineForm.queryHelpText",{defaultMessage:"Use a query to filter the source data (optional)."})},_react.default.createElement(_eui.EuiInputPopover,{style:{maxWidth:"100%"},closePopover:function closePopover(){return setErrorMessage(undefined)},input:_react.default.createElement(_public.QueryStringInput,{bubbleSubmitEvent:true,query:searchInput,indexPatterns:[indexPattern],onChange:searchChangeHandler,onSubmit:searchSubmitHandler,placeholder:searchInput.language===QUERY_LANGUAGE_KUERY?_i18n.i18n.translate("xpack.transform.stepDefineForm.queryPlaceholderKql",{defaultMessage:"e.g. {example}",values:{example:'method : "GET" or status : "404"'}}):_i18n.i18n.translate("xpack.transform.stepDefineForm.queryPlaceholderLucene",{defaultMessage:"e.g. {example}",values:{example:"method:GET OR status:404"}}),disableAutoFocus:true,dataTestSubj:"transformQueryInput",languageSwitcherPopoverAnchorPosition:"rightDown"}),isOpen:(errorMessage===null||errorMessage===void 0?void 0:errorMessage.query)===searchInput.query&&(errorMessage===null||errorMessage===void 0?void 0:errorMessage.message)!==""},_react.default.createElement(_eui.EuiCode,null,_i18n.i18n.translate("xpack.transform.stepDefineForm.invalidKuerySyntaxErrorMessageQueryBar",{defaultMessage:"Invalid query"}),": ",errorMessage===null||errorMessage===void 0?void 0:errorMessage.message.split("\n")[0]))))),isAdvancedSourceEditorEnabled&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorLabel",{defaultMessage:"Source query clause"}),helpText:advancedSourceEditorHelpText},_react.default.createElement(_eui.EuiPanel,{grow:false,paddingSize:"none"},_react.default.createElement(_eui.EuiCodeEditor,{mode:"json",width:"100%",value:advancedEditorSourceConfig,onChange:function onChange(d){setSearchString(undefined);setAdvancedEditorSourceConfig(d);if(advancedEditorSourceConfigLastApplied===d){setAdvancedSourceEditorApplyButtonEnabled(false);return}try{JSON.parse(d);setAdvancedSourceEditorApplyButtonEnabled(true)}catch(e){setAdvancedSourceEditorApplyButtonEnabled(false)}},setOptions:{fontSize:"12px"},theme:"textmate","aria-label":_i18n.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorAriaLabel",{defaultMessage:"Advanced query editor"})})))),searchItems.savedSearch===undefined&&_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiSwitch,{label:_i18n.i18n.translate("xpack.transform.stepDefineForm.advancedEditorSourceConfigSwitchLabel",{defaultMessage:"Advanced query editor"}),checked:isAdvancedSourceEditorEnabled,onChange:function onChange(){if(isAdvancedSourceEditorEnabled&&sourceConfigUpdated){setAdvancedSourceEditorSwitchModalVisible(true);return}toggleAdvancedSourceEditor()},"data-test-subj":"transformAdvancedQueryEditorSwitch"}),isAdvancedSourceEditorSwitchModalVisible&&_react.default.createElement(_switch_modal.SwitchModal,{onCancel:function onCancel(){return setAdvancedSourceEditorSwitchModalVisible(false)},onConfirm:function onConfirm(){setAdvancedSourceEditorSwitchModalVisible(false);toggleAdvancedSourceEditor(true)},type:"source"})),isAdvancedSourceEditorEnabled&&_react.default.createElement(_eui.EuiButton,{size:"s",fill:true,onClick:applyAdvancedSourceEditorChanges,disabled:!isAdvancedSourceEditorApplyButtonEnabled},_i18n.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorApplyButtonText",{defaultMessage:"Apply changes"})))),searchItems.savedSearch!==undefined&&searchItems.savedSearch.id!==undefined&&_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDefineForm.savedSearchLabel",{defaultMessage:"Saved search"})},_react.default.createElement("span",null,searchItems.savedSearch.title)),!isAdvancedPivotEditorEnabled&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDefineForm.groupByLabel",{defaultMessage:"Group by"})},_react.default.createElement(_react.Fragment,null,_react.default.createElement(_group_by_list.GroupByListForm,{list:groupByList,options:groupByOptionsData,onChange:updateGroupBy,deleteHandler:deleteGroupBy}),_react.default.createElement(_aggregation_dropdown.DropDown,{changeHandler:addGroupBy,options:groupByOptions,placeholder:_i18n.i18n.translate("xpack.transform.stepDefineForm.groupByPlaceholder",{defaultMessage:"Add a group by field ..."}),testSubj:"transformGroupBySelection"}))),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDefineForm.aggregationsLabel",{defaultMessage:"Aggregations"})},_react.default.createElement(_react.Fragment,null,_react.default.createElement(_aggregation_list.AggListForm,{list:aggList,options:aggOptionsData,onChange:updateAggregation,deleteHandler:deleteAggregation}),_react.default.createElement(_aggregation_dropdown.DropDown,{changeHandler:addAggregation,options:aggOptions,placeholder:_i18n.i18n.translate("xpack.transform.stepDefineForm.aggregationsPlaceholder",{defaultMessage:"Add an aggregation ..."}),testSubj:"transformAggregationSelection"})))),isAdvancedPivotEditorEnabled&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDefineForm.advancedEditorLabel",{defaultMessage:"Pivot configuration object"}),helpText:advancedEditorHelpText},_react.default.createElement(_eui.EuiPanel,{grow:false,paddingSize:"none"},_react.default.createElement(_eui.EuiCodeEditor,{"data-test-subj":"transformAdvancedPivotEditor",mode:_use_x_json_mode.xJsonMode,width:"100%",value:advancedEditorConfig,onChange:function onChange(d){setAdvancedEditorConfig(d);if(advancedEditorConfigLastApplied===d){setAdvancedPivotEditorApplyButtonEnabled(false);return}try{JSON.parse(convertToJson(d));setAdvancedPivotEditorApplyButtonEnabled(true)}catch(e){setAdvancedPivotEditorApplyButtonEnabled(false)}},setOptions:{fontSize:"12px"},theme:"textmate","aria-label":_i18n.i18n.translate("xpack.transform.stepDefineForm.advancedEditorAriaLabel",{defaultMessage:"Advanced pivot editor"})})))),_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiSwitch,{label:_i18n.i18n.translate("xpack.transform.stepDefineForm.advancedEditorSwitchLabel",{defaultMessage:"Advanced pivot editor"}),checked:isAdvancedPivotEditorEnabled,onChange:function onChange(){if(isAdvancedPivotEditorEnabled&&(isAdvancedPivotEditorApplyButtonEnabled||advancedEditorConfig!==advancedEditorConfigLastApplied)){setAdvancedEditorSwitchModalVisible(true);return}toggleAdvancedEditor()},"data-test-subj":"transformAdvancedPivotEditorSwitch"}),isAdvancedEditorSwitchModalVisible&&_react.default.createElement(_switch_modal.SwitchModal,{onCancel:function onCancel(){return setAdvancedEditorSwitchModalVisible(false)},onConfirm:function onConfirm(){setAdvancedEditorSwitchModalVisible(false);toggleAdvancedEditor()},type:"pivot"})),isAdvancedPivotEditorEnabled&&_react.default.createElement(_eui.EuiButton,{size:"s",fill:true,onClick:applyAdvancedPivotEditorChanges,disabled:!isAdvancedPivotEditorApplyButtonEnabled},_i18n.i18n.translate("xpack.transform.stepDefineForm.advancedEditorApplyButtonText",{defaultMessage:"Apply changes"})))),!valid&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFormHelpText,{style:{maxWidth:"320px"}},_i18n.i18n.translate("xpack.transform.stepDefineForm.formHelp",{defaultMessage:"Transforms are scalable and automated processes for pivoting. Choose at least one group-by and aggregation to get started."})))))),_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{maxWidth:"calc(100% - 468px)"}},_react.default.createElement(_source_index_preview.SourceIndexPreview,{indexPattern:searchItems.indexPattern,query:pivotQuery}),_react.default.createElement(_eui.EuiHorizontalRule,null),_react.default.createElement(_pivot_preview.PivotPreview,{aggs:aggList,groupBy:groupByList,indexPatternTitle:searchItems.indexPattern.title,query:pivotQuery})))}));exports.StepDefineForm=StepDefineForm},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.PivotPreview=void 0;var _momentTimezone=_interopRequireDefault(__webpack_require__(32));var _react=_interopRequireWildcard(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _common=__webpack_require__(42);var _common2=__webpack_require__(68);var _date_utils=__webpack_require__(125);var _object_utils=__webpack_require__(126);var _common3=__webpack_require__(44);var _common4=__webpack_require__(740);var _use_pivot_preview_data=__webpack_require__(741);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function sortColumns(groupByArr){return function(a,b){if(groupByArr.some((function(d){return d.aggName===a}))&&groupByArr.some((function(d){return d.aggName===b}))){return a.localeCompare(b)}if(groupByArr.some((function(d){return d.aggName===a}))){return-1}if(groupByArr.some((function(d){return d.aggName===b}))){return 1}return a.localeCompare(b)}}var PreviewTitle=function PreviewTitle(_ref){var previewRequest=_ref.previewRequest;var euiCopyText=_i18n.i18n.translate("xpack.transform.pivotPreview.copyClipboardTooltip",{defaultMessage:"Copy Dev Console statement of the pivot preview to the clipboard."});return _react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("span",null,_i18n.i18n.translate("xpack.transform.pivotPreview.PivotPreviewTitle",{defaultMessage:"Transform pivot preview"})))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiCopy,{beforeMessage:euiCopyText,textToCopy:(0,_common4.getPivotPreviewDevConsoleStatement)(previewRequest)},(function(copy){return _react.default.createElement(_eui.EuiButtonIcon,{onClick:copy,iconType:"copyClipboard","aria-label":euiCopyText})}))))};var ErrorMessage=function ErrorMessage(_ref2){var message=_ref2.message;return _react.default.createElement(_eui.EuiCodeBlock,{language:"json",fontSize:"s",paddingSize:"s",isCopyable:true},message)};var defaultPagination={pageIndex:0,pageSize:5};var PivotPreview=_react.default.memo((function(_ref3){var aggs=_ref3.aggs,groupBy=_ref3.groupBy,indexPatternTitle=_ref3.indexPatternTitle,query=_ref3.query,_ref3$showHeader=_ref3.showHeader,showHeader=_ref3$showHeader===void 0?true:_ref3$showHeader;var _usePivotPreviewData=(0,_use_pivot_preview_data.usePivotPreviewData)(indexPatternTitle,query,aggs,groupBy),data=_usePivotPreviewData.previewData,previewMappings=_usePivotPreviewData.previewMappings,errorMessage=_usePivotPreviewData.errorMessage,previewRequest=_usePivotPreviewData.previewRequest,status=_usePivotPreviewData.status;var groupByArr=(0,_common2.dictionaryToArray)(groupBy);var columnKeys=Object.keys(previewMappings.properties).filter((function(key){return previewMappings.properties[key].type!=="object"}));columnKeys.sort(sortColumns(groupByArr));var _useState=(0,_react.useState)([]),_useState2=_slicedToArray(_useState,2),visibleColumns=_useState2[0],setVisibleColumns=_useState2[1];(0,_react.useEffect)((function(){setVisibleColumns(columnKeys.splice(0,_common3.INIT_MAX_COLUMNS))}),[columnKeys.join()]);var _useState3=(0,_react.useState)(defaultPagination),_useState4=_slicedToArray(_useState3,2),pagination=_useState4[0],setPagination=_useState4[1];(0,_react.useEffect)((function(){setPagination(defaultPagination)}),[data.length]);var dataGridColumns=columnKeys.map((function(id){var field=previewMappings.properties[id];var schema;switch(field===null||field===void 0?void 0:field.type){case _common.ES_FIELD_TYPES.GEO_POINT:case _common.ES_FIELD_TYPES.GEO_SHAPE:schema="json";break;case _common.ES_FIELD_TYPES.BOOLEAN:schema="boolean";break;case _common.ES_FIELD_TYPES.DATE:case _common.ES_FIELD_TYPES.DATE_NANOS:schema="datetime";break;case _common.ES_FIELD_TYPES.BYTE:case _common.ES_FIELD_TYPES.DOUBLE:case _common.ES_FIELD_TYPES.FLOAT:case _common.ES_FIELD_TYPES.HALF_FLOAT:case _common.ES_FIELD_TYPES.INTEGER:case _common.ES_FIELD_TYPES.LONG:case _common.ES_FIELD_TYPES.SCALED_FLOAT:case _common.ES_FIELD_TYPES.SHORT:schema="numeric";break;case _common.ES_FIELD_TYPES.KEYWORD:case _common.ES_FIELD_TYPES.TEXT:break}return{id:id,schema:schema}}));var onChangeItemsPerPage=(0,_react.useCallback)((function(pageSize){setPagination((function(p){var pageIndex=Math.floor(p.pageSize*p.pageIndex/pageSize);return{pageIndex:pageIndex,pageSize:pageSize}}))}),[setPagination]);var onChangePage=(0,_react.useCallback)((function(pageIndex){return setPagination((function(p){return _objectSpread({},p,{pageIndex:pageIndex})}))}),[setPagination]);var _useState5=(0,_react.useState)([]),_useState6=_slicedToArray(_useState5,2),sortingColumns=_useState6[0],setSortingColumns=_useState6[1];var onSort=(0,_react.useCallback)((function(sc){return setSortingColumns(sc)}),[setSortingColumns]);if(sortingColumns.length>0){data.sort((0,_common4.multiColumnSortFactory)(sortingColumns))}var pageData=data.slice(pagination.pageIndex*pagination.pageSize,(pagination.pageIndex+1)*pagination.pageSize);var renderCellValue=(0,_react.useMemo)((function(){return function(_ref4){var rowIndex=_ref4.rowIndex,columnId=_ref4.columnId,setCellProps=_ref4.setCellProps;var adjustedRowIndex=rowIndex-pagination.pageIndex*pagination.pageSize;var cellValue=pageData.hasOwnProperty(adjustedRowIndex)?(0,_object_utils.getNestedProperty)(pageData[adjustedRowIndex],columnId,null):null;if(_typeof(cellValue)==="object"&&cellValue!==null){return JSON.stringify(cellValue)}if(cellValue===undefined||cellValue===null){return null}if([_common.ES_FIELD_TYPES.DATE,_common.ES_FIELD_TYPES.DATE_NANOS].includes(previewMappings.properties[columnId].type)){return(0,_date_utils.formatHumanReadableDateTimeSeconds)((0,_momentTimezone.default)(cellValue).unix()*1e3)}if(previewMappings.properties[columnId].type===_common.ES_FIELD_TYPES.BOOLEAN){return cellValue?"true":"false"}return cellValue}}),[pageData,pagination.pageIndex,pagination.pageSize,previewMappings.properties]);if(status===_use_pivot_preview_data.PIVOT_PREVIEW_STATUS.ERROR){return _react.default.createElement("div",{"data-test-subj":"transformPivotPreview error"},_react.default.createElement(PreviewTitle,{previewRequest:previewRequest}),_react.default.createElement(_eui.EuiCallOut,{title:_i18n.i18n.translate("xpack.transform.pivotPreview.PivotPreviewError",{defaultMessage:"An error occurred loading the pivot preview."}),color:"danger",iconType:"cross"},_react.default.createElement(ErrorMessage,{message:errorMessage})))}if(data.length===0){var noDataMessage=_i18n.i18n.translate("xpack.transform.pivotPreview.PivotPreviewNoDataCalloutBody",{defaultMessage:"The preview request did not return any data. Please ensure the optional query returns data and that values exist for the field used by group-by and aggregation fields."});var aggsArr=(0,_common2.dictionaryToArray)(aggs);if(aggsArr.length===0||groupByArr.length===0){noDataMessage=_i18n.i18n.translate("xpack.transform.pivotPreview.PivotPreviewIncompleteConfigCalloutBody",{defaultMessage:"Please choose at least one group-by field and aggregation."})}return _react.default.createElement("div",{"data-test-subj":"transformPivotPreview empty"},_react.default.createElement(PreviewTitle,{previewRequest:previewRequest}),_react.default.createElement(_eui.EuiCallOut,{title:_i18n.i18n.translate("xpack.transform.pivotPreview.PivotPreviewNoDataCalloutTitle",{defaultMessage:"Pivot preview not available"}),color:"primary"},_react.default.createElement("p",null,noDataMessage)))}if(columnKeys.length===0){return null}return _react.default.createElement("div",{"data-test-subj":"transformPivotPreview loaded"},showHeader&&_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(PreviewTitle,{previewRequest:previewRequest}),_react.default.createElement("div",{className:"transform__progress"},status===_use_pivot_preview_data.PIVOT_PREVIEW_STATUS.LOADING&&_react.default.createElement(_eui.EuiProgress,{size:"xs",color:"accent"}),status!==_use_pivot_preview_data.PIVOT_PREVIEW_STATUS.LOADING&&_react.default.createElement(_eui.EuiProgress,{size:"xs",color:"accent",max:1,value:0}))),dataGridColumns.length>0&&data.length>0&&_react.default.createElement(_eui.EuiDataGrid,{"aria-label":"Source index preview",columns:dataGridColumns,columnVisibility:{visibleColumns:visibleColumns,setVisibleColumns:setVisibleColumns},gridStyle:_common3.euiDataGridStyle,rowCount:data.length,renderCellValue:renderCellValue,sorting:{columns:sortingColumns,onSort:onSort},toolbarVisibility:_common3.euiDataGridToolbarSettings,pagination:_objectSpread({},pagination,{pageSizeOptions:[5,10,25],onChangeItemsPerPage:onChangeItemsPerPage,onChangePage:onChangePage})}))}));exports.PivotPreview=PivotPreview},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPivotPreviewDevConsoleStatement=exports.multiColumnSortFactory=void 0;var _object_utils=__webpack_require__(126);var multiColumnSortFactory=function multiColumnSortFactory(sortingColumns){var isString=function isString(arg){return typeof arg==="string"};var sortFn=function sortFn(a,b){var sortingColumnIndex=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var sort=sortingColumns[sortingColumnIndex];var aValue=(0,_object_utils.getNestedProperty)(a,sort.id,null);var bValue=(0,_object_utils.getNestedProperty)(b,sort.id,null);if(typeof aValue==="number"&&typeof bValue==="number"){if(aValue<bValue){return sort.direction==="asc"?-1:1}if(aValue>bValue){return sort.direction==="asc"?1:-1}}if(isString(aValue)&&isString(bValue)){if(aValue.localeCompare(bValue)===-1){return sort.direction==="asc"?-1:1}if(aValue.localeCompare(bValue)===1){return sort.direction==="asc"?1:-1}}if(sortingColumnIndex+1<sortingColumns.length){return sortFn(a,b,sortingColumnIndex+1)}return 0};return sortFn};exports.multiColumnSortFactory=multiColumnSortFactory;var getPivotPreviewDevConsoleStatement=function getPivotPreviewDevConsoleStatement(request){return"POST _transform/_preview\n".concat(JSON.stringify(request,null,2),"\n")};exports.getPivotPreviewDevConsoleStatement=getPivotPreviewDevConsoleStatement},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.usePivotPreviewData=exports.PIVOT_PREVIEW_STATUS=void 0;var _react=__webpack_require__(22);var _common=__webpack_require__(68);var _use_api=__webpack_require__(53);var _common2=__webpack_require__(44);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var PIVOT_PREVIEW_STATUS;exports.PIVOT_PREVIEW_STATUS=PIVOT_PREVIEW_STATUS;(function(PIVOT_PREVIEW_STATUS){PIVOT_PREVIEW_STATUS[PIVOT_PREVIEW_STATUS["UNUSED"]=0]="UNUSED";PIVOT_PREVIEW_STATUS[PIVOT_PREVIEW_STATUS["LOADING"]=1]="LOADING";PIVOT_PREVIEW_STATUS[PIVOT_PREVIEW_STATUS["LOADED"]=2]="LOADED";PIVOT_PREVIEW_STATUS[PIVOT_PREVIEW_STATUS["ERROR"]=3]="ERROR"})(PIVOT_PREVIEW_STATUS||(exports.PIVOT_PREVIEW_STATUS=PIVOT_PREVIEW_STATUS={}));var usePivotPreviewData=function usePivotPreviewData(indexPatternTitle,query,aggs,groupBy){var _useState=(0,_react.useState)(""),_useState2=_slicedToArray(_useState,2),errorMessage=_useState2[0],setErrorMessage=_useState2[1];var _useState3=(0,_react.useState)(PIVOT_PREVIEW_STATUS.UNUSED),_useState4=_slicedToArray(_useState3,2),status=_useState4[0],setStatus=_useState4[1];var _useState5=(0,_react.useState)([]),_useState6=_slicedToArray(_useState5,2),previewData=_useState6[0],setPreviewData=_useState6[1];var _useState7=(0,_react.useState)({properties:{}}),_useState8=_slicedToArray(_useState7,2),previewMappings=_useState8[0],setPreviewMappings=_useState8[1];var api=(0,_use_api.useApi)();var aggsArr=(0,_common.dictionaryToArray)(aggs);var groupByArr=(0,_common.dictionaryToArray)(groupBy);var previewRequest=(0,_common2.getPreviewRequestBody)(indexPatternTitle,query,groupByArr,aggsArr);var getPreviewData=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var resp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(aggsArr.length===0||groupByArr.length===0)){_context.next=3;break}setPreviewData([]);return _context.abrupt("return");case 3:setErrorMessage("");setStatus(PIVOT_PREVIEW_STATUS.LOADING);_context.prev=5;_context.next=8;return api.getTransformsPreview(previewRequest);case 8:resp=_context.sent;setPreviewData(resp.preview);setPreviewMappings(resp.generated_dest_index.mappings);setStatus(PIVOT_PREVIEW_STATUS.LOADED);_context.next=20;break;case 14:_context.prev=14;_context.t0=_context["catch"](5);setErrorMessage(JSON.stringify(_context.t0,null,2));setPreviewData([]);setPreviewMappings({properties:{}});setStatus(PIVOT_PREVIEW_STATUS.ERROR);case 20:case"end":return _context.stop()}}}),_callee,null,[[5,14]])})));return function getPreviewData(){return _ref.apply(this,arguments)}}();(0,_react.useEffect)((function(){getPreviewData()}),[indexPatternTitle,JSON.stringify(aggsArr),JSON.stringify(groupByArr),JSON.stringify(query)]);return{errorMessage:errorMessage,status:status,previewData:previewData,previewMappings:previewMappings,previewRequest:previewRequest}};exports.usePivotPreviewData=usePivotPreviewData},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useXJsonMode=exports.xJsonMode=void 0;var _react=__webpack_require__(22);var _shared_imports=__webpack_require__(69);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var xJsonMode=new _shared_imports.XJsonMode;exports.xJsonMode=xJsonMode;var useXJsonMode=function useXJsonMode(json){var _useState=(0,_react.useState)((0,_shared_imports.expandLiteralStrings)(json)),_useState2=_slicedToArray(_useState,2),xJson=_useState2[0],setXJson=_useState2[1];return{xJson:xJson,setXJson:setXJson,xJsonMode:xJsonMode,convertToJson:_shared_imports.collapseLiteralStrings}};exports.useXJsonMode=useXJsonMode},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DropDown",{enumerable:true,get:function get(){return _dropdown.DropDown}});var _dropdown=__webpack_require__(744)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DropDown=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _eui=__webpack_require__(23);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DropDown=function DropDown(_ref){var changeHandler=_ref.changeHandler,options=_ref.options,_ref$placeholder=_ref.placeholder,placeholder=_ref$placeholder===void 0?"Search ...":_ref$placeholder,testSubj=_ref.testSubj;return _react.default.createElement(_eui.EuiComboBox,{placeholder:placeholder,singleSelection:{asPlainText:true},options:options,selectedOptions:[],onChange:changeHandler,isClearable:false,"data-test-subj":testSubj})};exports.DropDown=DropDown},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggListForm=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _eui=__webpack_require__(23);var _agg_label_form=__webpack_require__(746);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var AggListForm=function AggListForm(_ref){var deleteHandler=_ref.deleteHandler,list=_ref.list,onChange=_ref.onChange,options=_ref.options;var listKeys=Object.keys(list);return _react.default.createElement(_react.Fragment,null,listKeys.map((function(aggName,i){var otherAggNames=listKeys.filter((function(k){return k!==aggName}));return _react.default.createElement(_react.Fragment,{key:aggName},_react.default.createElement(_eui.EuiPanel,{paddingSize:"s","data-test-subj":"transformAggregationEntry ".concat(i)},_react.default.createElement(_agg_label_form.AggLabelForm,{deleteHandler:deleteHandler,item:list[aggName],onChange:function(_onChange){function onChange(_x){return _onChange.apply(this,arguments)}onChange.toString=function(){return _onChange.toString()};return onChange}((function(item){return onChange(aggName,item)})),otherAggNames:otherAggNames,options:options})),listKeys.length>0&&_react.default.createElement(_eui.EuiSpacer,{size:"s"}))})))};exports.AggListForm=AggListForm},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggLabelForm=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _popover_form=__webpack_require__(747);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var AggLabelForm=function AggLabelForm(_ref){var deleteHandler=_ref.deleteHandler,item=_ref.item,otherAggNames=_ref.otherAggNames,onChange=_ref.onChange,options=_ref.options;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isPopoverVisible=_useState2[0],setPopoverVisibility=_useState2[1];function update(updateItem){onChange(_objectSpread({},updateItem));setPopoverVisibility(false)}return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:false},_react.default.createElement(_eui.EuiFlexItem,{className:"transform__AggregationLabel--text"},_react.default.createElement("span",{className:"eui-textTruncate","data-test-subj":"transformAggregationEntryLabel"},item.aggName)),_react.default.createElement(_eui.EuiFlexItem,{grow:false,className:"transform__GroupByLabel--button"},_react.default.createElement(_eui.EuiPopover,{id:"transformFormPopover",ownFocus:true,button:_react.default.createElement(_eui.EuiButtonIcon,{"aria-label":_i18n.i18n.translate("xpack.transform.aggLabelForm.editAggAriaLabel",{defaultMessage:"Edit aggregation"}),size:"s",iconType:"pencil",onClick:function onClick(){return setPopoverVisibility(!isPopoverVisible)},"data-test-subj":"transformAggregationEntryEditButton"}),isOpen:isPopoverVisible,closePopover:function closePopover(){return setPopoverVisibility(false)}},_react.default.createElement(_popover_form.PopoverForm,{defaultData:item,onChange:update,otherAggNames:otherAggNames,options:options}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false,className:"transform__GroupByLabel--button"},_react.default.createElement(_eui.EuiButtonIcon,{"aria-label":_i18n.i18n.translate("xpack.transform.aggLabelForm.deleteItemAriaLabel",{defaultMessage:"Delete item"}),size:"s",iconType:"cross",onClick:function onClick(){return deleteHandler(item.aggName)},"data-test-subj":"transformAggregationEntryDeleteButton"})))};exports.AggLabelForm=AggLabelForm},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PopoverForm=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _common=__webpack_require__(68);var _common2=__webpack_require__(44);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function getDefaultPercents(defaultData){if((0,_common2.isPivotAggsConfigPercentiles)(defaultData)){return defaultData.percents}}function parsePercentsInput(inputValue){if(inputValue!==undefined){var strVals=inputValue.split(",");var percents=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=strVals[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var str=_step.value;if(str.trim().length>0&&isNaN(str)===false){var val=Number(str);if(val>=0&&val<=100){percents.push(val)}else{return[]}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return percents}return[]}var PopoverForm=function PopoverForm(_ref){var defaultData=_ref.defaultData,otherAggNames=_ref.otherAggNames,onChange=_ref.onChange,options=_ref.options;var isUnsupportedAgg=!(0,_common2.isPivotAggsConfigWithUiSupport)(defaultData);var _useState=(0,_react.useState)(defaultData.aggName),_useState2=_slicedToArray(_useState,2),aggName=_useState2[0],setAggName=_useState2[1];var _useState3=(0,_react.useState)(defaultData.agg),_useState4=_slicedToArray(_useState3,2),agg=_useState4[0],setAgg=_useState4[1];var _useState5=(0,_react.useState)((0,_common2.isPivotAggsConfigWithUiSupport)(defaultData)?defaultData.field:""),_useState6=_slicedToArray(_useState5,2),field=_useState6[0],setField=_useState6[1];var _useState7=(0,_react.useState)(getDefaultPercents(defaultData)),_useState8=_slicedToArray(_useState7,2),percents=_useState8[0],setPercents=_useState8[1];var availableFields=[];var availableAggs=[];function updateAgg(aggVal){setAgg(aggVal);if(aggVal===_common2.PIVOT_SUPPORTED_AGGS.PERCENTILES&&percents===undefined){setPercents(_common2.PERCENTILES_AGG_DEFAULT_PERCENTS)}}function updatePercents(inputValue){setPercents(parsePercentsInput(inputValue))}function getUpdatedItem(){var updatedItem;if(agg!==_common2.PIVOT_SUPPORTED_AGGS.PERCENTILES){updatedItem={agg:agg,aggName:aggName,field:field,dropDownName:defaultData.dropDownName}}else{updatedItem={agg:agg,aggName:aggName,field:field,dropDownName:defaultData.dropDownName,percents:percents}}return updatedItem}if(!isUnsupportedAgg){var optionsArr=(0,_common.dictionaryToArray)(options);optionsArr.filter((function(o){return o.agg===defaultData.agg})).forEach((function(o){availableFields.push({text:o.field})}));optionsArr.filter((function(o){return(0,_common2.isPivotAggsConfigWithUiSupport)(defaultData)&&o.field===defaultData.field})).forEach((function(o){availableAggs.push({text:o.agg})}))}var aggNameError="";var validAggName=(0,_common2.isAggName)(aggName);if(!validAggName){aggNameError=_i18n.i18n.translate("xpack.transform.agg.popoverForm.aggNameInvalidCharError",{defaultMessage:'Invalid name. The characters "[", "]", and ">" are not allowed and the name must not start or end with a space character.'})}if(validAggName){validAggName=!otherAggNames.includes(aggName);aggNameError=_i18n.i18n.translate("xpack.transform.agg.popoverForm.aggNameAlreadyUsedError",{defaultMessage:"Another aggregation already uses that name."})}var percentsText;if(percents!==undefined){percentsText=percents.toString()}var validPercents=agg===_common2.PIVOT_SUPPORTED_AGGS.PERCENTILES&&parsePercentsInput(percentsText).length>0;var formValid=validAggName;if(formValid&&agg===_common2.PIVOT_SUPPORTED_AGGS.PERCENTILES){formValid=validPercents}return _react.default.createElement(_eui.EuiForm,{style:{width:"300px"}},_react.default.createElement(_eui.EuiFormRow,{error:!validAggName&&[aggNameError],isInvalid:!validAggName,helpText:isUnsupportedAgg?_i18n.i18n.translate("xpack.transform.agg.popoverForm.unsupportedAggregationHelpText",{defaultMessage:"Only the aggregation name can be edited in this form. Please use the advanced editor to edit the other parts of the aggregation."}):"",label:_i18n.i18n.translate("xpack.transform.agg.popoverForm.nameLabel",{defaultMessage:"Aggregation name"})},_react.default.createElement(_eui.EuiFieldText,{defaultValue:aggName,isInvalid:!validAggName,onChange:function onChange(e){return setAggName(e.target.value)}})),availableAggs.length>0&&_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.agg.popoverForm.aggLabel",{defaultMessage:"Aggregation"})},_react.default.createElement(_eui.EuiSelect,{options:availableAggs,value:agg,onChange:function onChange(e){return updateAgg(e.target.value)}})),availableFields.length>0&&_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.agg.popoverForm.fieldLabel",{defaultMessage:"Field"})},_react.default.createElement(_eui.EuiSelect,{options:availableFields,value:field,onChange:function onChange(e){return setField(e.target.value)}})),agg===_common2.PIVOT_SUPPORTED_AGGS.PERCENTILES&&_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.agg.popoverForm.percentsLabel",{defaultMessage:"Percents"}),error:!validPercents&&[_i18n.i18n.translate("xpack.transform.groupBy.popoverForm.intervalPercents",{defaultMessage:"Enter a comma-separated list of percentiles"})],isInvalid:!validPercents},_react.default.createElement(_eui.EuiFieldText,{defaultValue:percentsText,onChange:function onChange(e){return updatePercents(e.target.value)}})),isUnsupportedAgg&&_react.default.createElement(_eui.EuiCodeEditor,{mode:"json",theme:"textmate",width:"100%",height:"200px",value:JSON.stringify((0,_common2.getEsAggFromAggConfig)(defaultData),null,2),setOptions:{fontSize:"12px",showLineNumbers:false},isReadOnly:true,"aria-label":"Read only code editor"}),_react.default.createElement(_eui.EuiFormRow,{hasEmptyLabelSpace:true},_react.default.createElement(_eui.EuiButton,{isDisabled:!formValid,onClick:function onClick(){return onChange(getUpdatedItem())}},_i18n.i18n.translate("xpack.transform.agg.popoverForm.submitButtonLabel",{defaultMessage:"Apply"}))))};exports.PopoverForm=PopoverForm},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggListSummary=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _eui=__webpack_require__(23);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var AggListSummary=function AggListSummary(_ref){var list=_ref.list;var aggNames=Object.keys(list);return _react.default.createElement(_eui.EuiForm,null,aggNames.map((function(aggName){return _react.default.createElement(_react.Fragment,{key:aggName},_react.default.createElement(_eui.EuiPanel,{paddingSize:"s"},_react.default.createElement("div",{className:"eui-textTruncate"},aggName)),aggNames.length>0&&_react.default.createElement(_eui.EuiSpacer,{size:"s"}))})))};exports.AggListSummary=AggListSummary},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GroupByListForm=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _eui=__webpack_require__(23);var _group_by_label_form=__webpack_require__(750);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var GroupByListForm=function GroupByListForm(_ref){var deleteHandler=_ref.deleteHandler,list=_ref.list,onChange=_ref.onChange,options=_ref.options;var listKeys=Object.keys(list);return _react.default.createElement(_react.Fragment,null,listKeys.map((function(aggName,i){var otherAggNames=listKeys.filter((function(k){return k!==aggName}));return _react.default.createElement(_react.Fragment,{key:aggName},_react.default.createElement(_eui.EuiPanel,{paddingSize:"s","data-test-subj":"transformGroupByEntry ".concat(i)},_react.default.createElement(_group_by_label_form.GroupByLabelForm,{deleteHandler:deleteHandler,item:list[aggName],otherAggNames:otherAggNames,onChange:function(_onChange){function onChange(_x){return _onChange.apply(this,arguments)}onChange.toString=function(){return _onChange.toString()};return onChange}((function(item){return onChange(aggName,item)})),options:options})),listKeys.length>0&&_react.default.createElement(_eui.EuiSpacer,{size:"s"}))})))};exports.GroupByListForm=GroupByListForm},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GroupByLabelForm=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _common=__webpack_require__(44);var _popover_form=__webpack_require__(751);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var GroupByLabelForm=function GroupByLabelForm(_ref){var deleteHandler=_ref.deleteHandler,item=_ref.item,otherAggNames=_ref.otherAggNames,onChange=_ref.onChange,options=_ref.options;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isPopoverVisible=_useState2[0],setPopoverVisibility=_useState2[1];function update(updateItem){onChange(_objectSpread({},updateItem));setPopoverVisibility(false)}var interval;if((0,_common.isGroupByDateHistogram)(item)){interval=item.calendar_interval}else if((0,_common.isGroupByHistogram)(item)){interval=item.interval}return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:false},_react.default.createElement(_eui.EuiFlexItem,{className:"transform__GroupByLabel--text"},_react.default.createElement("span",{className:"eui-textTruncate","data-test-subj":"transformGroupByEntryLabel"},item.aggName)),interval!==undefined&&_react.default.createElement(_eui.EuiFlexItem,{grow:false,className:"transform__GroupByLabel--text transform__GroupByLabel--interval"},_react.default.createElement(_eui.EuiTextColor,{color:"subdued",className:"eui-textTruncate","data-test-subj":"transformGroupByEntryIntervalLabel"},interval)),_react.default.createElement(_eui.EuiFlexItem,{grow:false,className:"transform__GroupByLabel--button"},_react.default.createElement(_eui.EuiPopover,{id:"transformIntervalFormPopover",ownFocus:true,button:_react.default.createElement(_eui.EuiButtonIcon,{"aria-label":_i18n.i18n.translate("xpack.transform.groupByLabelForm.editIntervalAriaLabel",{defaultMessage:"Edit interval"}),size:"s",iconType:"pencil",onClick:function onClick(){return setPopoverVisibility(!isPopoverVisible)},"data-test-subj":"transformGroupByEntryEditButton"}),isOpen:isPopoverVisible,closePopover:function closePopover(){return setPopoverVisibility(false)}},_react.default.createElement(_popover_form.PopoverForm,{defaultData:item,onChange:update,otherAggNames:otherAggNames,options:options}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false,className:"transform__GroupByLabel--button"},_react.default.createElement(_eui.EuiButtonIcon,{"aria-label":_i18n.i18n.translate("xpack.transform.groupByLabelForm.deleteItemAriaLabel",{defaultMessage:"Delete item"}),size:"s",iconType:"cross",onClick:function onClick(){return deleteHandler(item.aggName)},"data-test-subj":"transformGroupByEntryDeleteButton"})))};exports.GroupByLabelForm=GroupByLabelForm},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isIntervalValid=isIntervalValid;exports.PopoverForm=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _common=__webpack_require__(68);var _common2=__webpack_require__(44);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function isIntervalValid(interval,intervalType){if(interval!==""&&interval!==undefined){if(intervalType===_common2.PIVOT_SUPPORTED_GROUP_BY_AGGS.HISTOGRAM){if(!_common2.histogramIntervalFormatRegex.test(interval)){return false}if(parseFloat(interval)===0&&parseInt(interval,10)===0){return false}return true}else if(intervalType===_common2.PIVOT_SUPPORTED_GROUP_BY_AGGS.DATE_HISTOGRAM){if(!_common2.dateHistogramIntervalFormatRegex.test(interval)){return false}var timeUnitMatch=interval.match(_common2.dateHistogramIntervalFormatRegex);if(timeUnitMatch!==null&&Array.isArray(timeUnitMatch)&&timeUnitMatch.length===2){var timeUnit=timeUnitMatch[1];var intervalNum=parseInt(interval.replace(timeUnit,""),10);if((timeUnit==="w"||timeUnit==="M"||timeUnit==="y")&&intervalNum>1){return false}}return true}}return false}function getDefaultInterval(defaultData){if((0,_common2.isGroupByDateHistogram)(defaultData)){return defaultData.calendar_interval}else if((0,_common2.isGroupByHistogram)(defaultData)){return defaultData.interval}return undefined}var PopoverForm=function PopoverForm(_ref){var defaultData=_ref.defaultData,otherAggNames=_ref.otherAggNames,onChange=_ref.onChange,options=_ref.options;var isUnsupportedAgg=!(0,_common2.isPivotGroupByConfigWithUiSupport)(defaultData);var _useState=(0,_react.useState)(defaultData.agg),_useState2=_slicedToArray(_useState,2),agg=_useState2[0],setAgg=_useState2[1];var _useState3=(0,_react.useState)(defaultData.aggName),_useState4=_slicedToArray(_useState3,2),aggName=_useState4[0],setAggName=_useState4[1];var _useState5=(0,_react.useState)((0,_common2.isPivotGroupByConfigWithUiSupport)(defaultData)?defaultData.field:""),_useState6=_slicedToArray(_useState5,2),field=_useState6[0],setField=_useState6[1];var _useState7=(0,_react.useState)(getDefaultInterval(defaultData)),_useState8=_slicedToArray(_useState7,2),interval=_useState8[0],setInterval=_useState8[1];function getUpdatedItem(){var updatedItem=_objectSpread({},defaultData,{agg:agg,aggName:aggName,field:field});if((0,_common2.isGroupByHistogram)(updatedItem)&&interval!==undefined){updatedItem.interval=interval}else if((0,_common2.isGroupByDateHistogram)(updatedItem)&&interval!==undefined){updatedItem.calendar_interval=interval}return updatedItem}var availableFields=[];var availableAggs=[];if(!isUnsupportedAgg){var optionsArr=(0,_common.dictionaryToArray)(options);optionsArr.filter((function(o){return o.agg===defaultData.agg})).forEach((function(o){availableFields.push({text:o.field})}));optionsArr.filter((function(o){return(0,_common2.isPivotGroupByConfigWithUiSupport)(defaultData)&&o.field===defaultData.field})).forEach((function(o){availableAggs.push({text:o.agg})}))}var aggNameError="";var validAggName=(0,_common2.isAggName)(aggName);if(!validAggName){aggNameError=_i18n.i18n.translate("xpack.transform.groupBy.popoverForm.aggNameInvalidCharError",{defaultMessage:'Invalid name. The characters "[", "]", and ">" are not allowed and the name must not start or end with a space character.'})}if(validAggName){validAggName=!otherAggNames.includes(aggName);aggNameError=_i18n.i18n.translate("xpack.transform.groupBy.popoverForm.aggNameAlreadyUsedError",{defaultMessage:"Another group by configuration already uses that name."})}var validInterval=((0,_common2.isGroupByDateHistogram)(defaultData)||(0,_common2.isGroupByHistogram)(defaultData))&&isIntervalValid(interval,defaultData.agg);var formValid=validAggName;if(formValid&&((0,_common2.isGroupByDateHistogram)(defaultData)||(0,_common2.isGroupByHistogram)(defaultData))){formValid=isIntervalValid(interval,defaultData.agg)}return _react.default.createElement(_eui.EuiForm,{style:{width:"300px"}},_react.default.createElement(_eui.EuiFormRow,{error:!validAggName&&[aggNameError],isInvalid:!validAggName,helpText:isUnsupportedAgg?_i18n.i18n.translate("xpack.transform.groupBy.popoverForm.unsupportedGroupByHelpText",{defaultMessage:"Only the group_by name can be edited in this form. Please use the advanced editor to edit the other parts of the group_by configuration."}):"",label:_i18n.i18n.translate("xpack.transform.groupBy.popoverForm.nameLabel",{defaultMessage:"Group by name"})},_react.default.createElement(_eui.EuiFieldText,{defaultValue:aggName,isInvalid:!validAggName,onChange:function onChange(e){return setAggName(e.target.value)}})),availableAggs.length>0&&_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.groupby.popoverForm.aggLabel",{defaultMessage:"Aggregation"})},_react.default.createElement(_eui.EuiSelect,{options:availableAggs,value:agg,onChange:function onChange(e){return setAgg(e.target.value)}})),availableFields.length>0&&_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.groupBy.popoverForm.fieldLabel",{defaultMessage:"Field"})},_react.default.createElement(_eui.EuiSelect,{options:availableFields,value:field,onChange:function onChange(e){return setField(e.target.value)}})),((0,_common2.isGroupByDateHistogram)(defaultData)||(0,_common2.isGroupByHistogram)(defaultData))&&_react.default.createElement(_eui.EuiFormRow,{error:!validInterval&&[_i18n.i18n.translate("xpack.transform.groupBy.popoverForm.intervalError",{defaultMessage:"Invalid interval."})],isInvalid:!validInterval,label:_i18n.i18n.translate("xpack.transform.groupBy.popoverForm.intervalLabel",{defaultMessage:"Interval"})},_react.default.createElement(_react.Fragment,null,(0,_common2.isGroupByHistogram)(defaultData)&&_react.default.createElement(_eui.EuiFieldText,{defaultValue:interval,isInvalid:!validInterval,onChange:function onChange(e){return setInterval(e.target.value)}}),(0,_common2.isGroupByDateHistogram)(defaultData)&&_react.default.createElement(_eui.EuiSelect,{options:[{value:"1m",text:"1m"},{value:"1h",text:"1h"},{value:"1d",text:"1d"},{value:"1w",text:"1w"},{value:"1M",text:"1M"},{value:"1q",text:"1q"},{value:"1y",text:"1y"}],value:interval,onChange:function onChange(e){return setInterval(e.target.value)}}))),isUnsupportedAgg&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiCodeEditor,{mode:"json",theme:"textmate",width:"100%",height:"200px",value:JSON.stringify((0,_common2.getEsAggFromGroupByConfig)(defaultData),null,2),setOptions:{fontSize:"12px",showLineNumbers:false},isReadOnly:true,"aria-label":"Read only code editor"})),_react.default.createElement(_eui.EuiFormRow,{hasEmptyLabelSpace:true},_react.default.createElement(_eui.EuiButton,{isDisabled:!formValid,onClick:function onClick(){return onChange(getUpdatedItem())}},_i18n.i18n.translate("xpack.transform.groupBy.popoverForm.submitButtonLabel",{defaultMessage:"Apply"}))))};exports.PopoverForm=PopoverForm},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GroupByListSummary=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _eui=__webpack_require__(23);var _group_by_label_summary=__webpack_require__(753);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var GroupByListSummary=function GroupByListSummary(_ref){var list=_ref.list;var listKeys=Object.keys(list);return _react.default.createElement(_react.Fragment,null,listKeys.map((function(optionsDataId){return _react.default.createElement(_react.Fragment,{key:optionsDataId},_react.default.createElement(_eui.EuiPanel,{paddingSize:"s"},_react.default.createElement(_group_by_label_summary.GroupByLabelSummary,{item:list[optionsDataId],optionsDataId:optionsDataId})),listKeys.length>0&&_react.default.createElement(_eui.EuiSpacer,{size:"s"}))})))};exports.GroupByListSummary=GroupByListSummary},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GroupByLabelSummary=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _eui=__webpack_require__(23);var _common=__webpack_require__(44);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GroupByLabelSummary=function GroupByLabelSummary(_ref){var item=_ref.item,optionsDataId=_ref.optionsDataId;var interval;if((0,_common.isGroupByDateHistogram)(item)){interval=item.calendar_interval}else if((0,_common.isGroupByHistogram)(item)){interval=item.interval}return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:false},_react.default.createElement(_eui.EuiFlexItem,{className:"transform__GroupByLabel--text"},_react.default.createElement("span",{className:"eui-textTruncate"},optionsDataId)),interval!==undefined&&_react.default.createElement(_eui.EuiFlexItem,{grow:false,className:"transform__GroupByLabel--text transform__GroupByLabel--interval"},_react.default.createElement(_eui.EuiTextColor,{color:"subdued",className:"eui-textTruncate"},interval)))};exports.GroupByLabelSummary=GroupByLabelSummary},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SourceIndexPreview",{enumerable:true,get:function get(){return _source_index_preview.SourceIndexPreview}});var _source_index_preview=__webpack_require__(755)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SourceIndexPreview=void 0;var _momentTimezone=_interopRequireDefault(__webpack_require__(32));var _react=_interopRequireWildcard(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _common=__webpack_require__(42);var _date_utils=__webpack_require__(125);var _object_utils=__webpack_require__(126);var _common2=__webpack_require__(44);var _app_dependencies=__webpack_require__(51);var _common3=__webpack_require__(756);var _use_source_index_data=__webpack_require__(757);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var SourceIndexPreviewTitle=function SourceIndexPreviewTitle(_ref){var indexPatternTitle=_ref.indexPatternTitle;return _react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("span",null,_i18n.i18n.translate("xpack.transform.sourceIndexPreview.sourceIndexPatternTitle",{defaultMessage:"Source index {indexPatternTitle}",values:{indexPatternTitle:indexPatternTitle}})))};var SourceIndexPreview=_react.default.memo((function(_ref2){var indexPattern=_ref2.indexPattern,query=_ref2.query;var toastNotifications=(0,_app_dependencies.useToastNotifications)();var allFields=indexPattern.fields.map((function(f){return f.name}));var indexPatternFields=allFields.filter((function(f){if(indexPattern.metaFields.includes(f)){return false}var fieldParts=f.split(".");var lastPart=fieldParts.pop();if(lastPart==="keyword"&&allFields.includes(fieldParts.join("."))){return false}return true}));var _useState=(0,_react.useState)([]),_useState2=_slicedToArray(_useState,2),visibleColumns=_useState2[0],setVisibleColumns=_useState2[1];(0,_react.useEffect)((function(){setVisibleColumns(indexPatternFields.splice(0,_common2.INIT_MAX_COLUMNS))}),[indexPatternFields.join()]);var _useSourceIndexData=(0,_use_source_index_data.useSourceIndexData)(indexPattern,query),errorMessage=_useSourceIndexData.errorMessage,pagination=_useSourceIndexData.pagination,setPagination=_useSourceIndexData.setPagination,setSortingColumns=_useSourceIndexData.setSortingColumns,rowCount=_useSourceIndexData.rowCount,sortingColumns=_useSourceIndexData.sortingColumns,status=_useSourceIndexData.status,data=_useSourceIndexData.tableItems;var dataGridColumns=_toConsumableArray(indexPatternFields.map((function(id){var field=indexPattern.fields.getByName(id);var schema;switch(field===null||field===void 0?void 0:field.type){case _common.KBN_FIELD_TYPES.BOOLEAN:schema="boolean";break;case _common.KBN_FIELD_TYPES.DATE:schema="datetime";break;case _common.KBN_FIELD_TYPES.GEO_POINT:case _common.KBN_FIELD_TYPES.GEO_SHAPE:schema="json";break;case _common.KBN_FIELD_TYPES.NUMBER:schema="numeric";break}return{id:id,schema:schema}})));var onSort=(0,_react.useCallback)((function(sc){var invalidSortingColumnns=sc.reduce((function(arr,current){var columnType=dataGridColumns.find((function(dgc){return dgc.id===current.id}));if((columnType===null||columnType===void 0?void 0:columnType.schema)==="json"){arr.push(current.id)}return arr}),[]);if(invalidSortingColumnns.length===0){setSortingColumns(sc)}else{invalidSortingColumnns.forEach((function(columnId){toastNotifications.addDanger(_i18n.i18n.translate("xpack.transform.sourceIndexPreview.invalidSortingColumnError",{defaultMessage:"The column '{columnId}' cannot be used for sorting.",values:{columnId:columnId}}))}))}}),[dataGridColumns,setSortingColumns,toastNotifications]);var onChangeItemsPerPage=(0,_react.useCallback)((function(pageSize){setPagination((function(p){var pageIndex=Math.floor(p.pageSize*p.pageIndex/pageSize);return{pageIndex:pageIndex,pageSize:pageSize}}))}),[setPagination]);var onChangePage=(0,_react.useCallback)((function(pageIndex){return setPagination((function(p){return _objectSpread({},p,{pageIndex:pageIndex})}))}),[setPagination]);var renderCellValue=(0,_react.useMemo)((function(){return function(_ref3){var rowIndex=_ref3.rowIndex,columnId=_ref3.columnId,setCellProps=_ref3.setCellProps;var adjustedRowIndex=rowIndex-pagination.pageIndex*pagination.pageSize;var cellValue=data.hasOwnProperty(adjustedRowIndex)?(0,_object_utils.getNestedProperty)(data[adjustedRowIndex],columnId,null):null;if(_typeof(cellValue)==="object"&&cellValue!==null){return JSON.stringify(cellValue)}if(cellValue===undefined||cellValue===null){return null}var field=indexPattern.fields.getByName(columnId);if((field===null||field===void 0?void 0:field.type)===_common.KBN_FIELD_TYPES.DATE){return(0,_date_utils.formatHumanReadableDateTimeSeconds)((0,_momentTimezone.default)(cellValue).unix()*1e3)}if((field===null||field===void 0?void 0:field.type)===_common.KBN_FIELD_TYPES.BOOLEAN){return cellValue?"true":"false"}return cellValue}}),[data,indexPattern.fields,pagination.pageIndex,pagination.pageSize]);if(status===_use_source_index_data.SOURCE_INDEX_STATUS.LOADED&&data.length===0){return _react.default.createElement("div",{"data-test-subj":"transformSourceIndexPreview empty"},_react.default.createElement(SourceIndexPreviewTitle,{indexPatternTitle:indexPattern.title}),_react.default.createElement(_eui.EuiCallOut,{title:_i18n.i18n.translate("xpack.transform.sourceIndexPreview.SourceIndexNoDataCalloutTitle",{defaultMessage:"Empty source index query result."}),color:"primary"},_react.default.createElement("p",null,_i18n.i18n.translate("xpack.transform.sourceIndexPreview.SourceIndexNoDataCalloutBody",{defaultMessage:"The query for the source index returned no results. Please make sure you have sufficient permissions, the index contains documents and your query is not too restrictive."}))))}var euiCopyText=_i18n.i18n.translate("xpack.transform.sourceIndexPreview.copyClipboardTooltip",{defaultMessage:"Copy Dev Console statement of the source index preview to the clipboard."});return _react.default.createElement("div",{"data-test-subj":"transformSourceIndexPreview ".concat(status===_use_source_index_data.SOURCE_INDEX_STATUS.ERROR?"error":"loaded")},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(SourceIndexPreviewTitle,{indexPatternTitle:indexPattern.title})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiCopy,{beforeMessage:euiCopyText,textToCopy:(0,_common3.getSourceIndexDevConsoleStatement)(query,indexPattern.title)},(function(copy){return _react.default.createElement(_eui.EuiButtonIcon,{onClick:copy,iconType:"copyClipboard","aria-label":euiCopyText})})))),_react.default.createElement("div",{className:"transform__progress"},status===_use_source_index_data.SOURCE_INDEX_STATUS.LOADING&&_react.default.createElement(_eui.EuiProgress,{size:"xs",color:"accent"}),status!==_use_source_index_data.SOURCE_INDEX_STATUS.LOADING&&_react.default.createElement(_eui.EuiProgress,{size:"xs",color:"accent",max:1,value:0})),status===_use_source_index_data.SOURCE_INDEX_STATUS.ERROR&&_react.default.createElement("div",{"data-test-subj":"transformSourceIndexPreview error"},_react.default.createElement(_eui.EuiCallOut,{title:_i18n.i18n.translate("xpack.transform.sourceIndexPreview.sourceIndexPatternError",{defaultMessage:"An error occurred loading the source index data."}),color:"danger",iconType:"cross"},_react.default.createElement(_eui.EuiCodeBlock,{language:"json",fontSize:"s",paddingSize:"s",isCopyable:true},errorMessage)),_react.default.createElement(_eui.EuiSpacer,{size:"m"})),_react.default.createElement(_eui.EuiDataGrid,{"aria-label":"Source index preview",columns:dataGridColumns,columnVisibility:{visibleColumns:visibleColumns,setVisibleColumns:setVisibleColumns},gridStyle:_common2.euiDataGridStyle,rowCount:rowCount,renderCellValue:renderCellValue,sorting:{columns:sortingColumns,onSort:onSort},toolbarVisibility:_common2.euiDataGridToolbarSettings,pagination:_objectSpread({},pagination,{pageSizeOptions:[5,10,25],onChangeItemsPerPage:onChangeItemsPerPage,onChangePage:onChangePage})}))}));exports.SourceIndexPreview=SourceIndexPreview},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSourceIndexDevConsoleStatement=void 0;var getSourceIndexDevConsoleStatement=function getSourceIndexDevConsoleStatement(query,indexPatternTitle){return"GET ".concat(indexPatternTitle,"/_search\n").concat(JSON.stringify({query:query},null,2),"\n")};exports.getSourceIndexDevConsoleStatement=getSourceIndexDevConsoleStatement},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useSourceIndexData=exports.SOURCE_INDEX_STATUS=void 0;var _react=__webpack_require__(22);var _common=__webpack_require__(44);var _use_api=__webpack_require__(53);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var SOURCE_INDEX_STATUS;exports.SOURCE_INDEX_STATUS=SOURCE_INDEX_STATUS;(function(SOURCE_INDEX_STATUS){SOURCE_INDEX_STATUS[SOURCE_INDEX_STATUS["UNUSED"]=0]="UNUSED";SOURCE_INDEX_STATUS[SOURCE_INDEX_STATUS["LOADING"]=1]="LOADING";SOURCE_INDEX_STATUS[SOURCE_INDEX_STATUS["LOADED"]=2]="LOADED";SOURCE_INDEX_STATUS[SOURCE_INDEX_STATUS["ERROR"]=3]="ERROR"})(SOURCE_INDEX_STATUS||(exports.SOURCE_INDEX_STATUS=SOURCE_INDEX_STATUS={}));var isErrorResponse=function isErrorResponse(arg){var _arg$body,_arg$body2;return(arg===null||arg===void 0?void 0:(_arg$body=arg.body)===null||_arg$body===void 0?void 0:_arg$body.error)!==undefined&&(arg===null||arg===void 0?void 0:(_arg$body2=arg.body)===null||_arg$body2===void 0?void 0:_arg$body2.message)!==undefined};var defaultPagination={pageIndex:0,pageSize:5};var useSourceIndexData=function useSourceIndexData(indexPattern,query){var _useState=(0,_react.useState)(""),_useState2=_slicedToArray(_useState,2),errorMessage=_useState2[0],setErrorMessage=_useState2[1];var _useState3=(0,_react.useState)(SOURCE_INDEX_STATUS.UNUSED),_useState4=_slicedToArray(_useState3,2),status=_useState4[0],setStatus=_useState4[1];var _useState5=(0,_react.useState)(defaultPagination),_useState6=_slicedToArray(_useState5,2),pagination=_useState6[0],setPagination=_useState6[1];var _useState7=(0,_react.useState)([]),_useState8=_slicedToArray(_useState7,2),sortingColumns=_useState8[0],setSortingColumns=_useState8[1];var _useState9=(0,_react.useState)(0),_useState10=_slicedToArray(_useState9,2),rowCount=_useState10[0],setRowCount=_useState10[1];var _useState11=(0,_react.useState)([]),_useState12=_slicedToArray(_useState11,2),tableItems=_useState12[0],setTableItems=_useState12[1];var api=(0,_use_api.useApi)();(0,_react.useEffect)((function(){setPagination(defaultPagination)}),[query]);var getSourceIndexData=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var sort,esSearchRequest,resp,docs;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setErrorMessage("");setStatus(SOURCE_INDEX_STATUS.LOADING);sort=sortingColumns.reduce((function(s,column){s[column.id]={order:column.direction};return s}),{});esSearchRequest={index:indexPattern.title,body:_objectSpread({query:(0,_common.isDefaultQuery)(query)?_common.matchAllQuery:query,from:pagination.pageIndex*pagination.pageSize,size:pagination.pageSize},Object.keys(sort).length>0?{sort:sort}:{})};_context.prev=4;_context.next=7;return api.esSearch(esSearchRequest);case 7:resp=_context.sent;docs=resp.hits.hits.map((function(d){return d._source}));setRowCount(resp.hits.total.value);setTableItems(docs);setStatus(SOURCE_INDEX_STATUS.LOADED);_context.next=18;break;case 14:_context.prev=14;_context.t0=_context["catch"](4);if(isErrorResponse(_context.t0)){setErrorMessage("".concat(_context.t0.body.error,": ").concat(_context.t0.body.message))}else{setErrorMessage(JSON.stringify(_context.t0,null,2))}setStatus(SOURCE_INDEX_STATUS.ERROR);case 18:case"end":return _context.stop()}}}),_callee,null,[[4,14]])})));return function getSourceIndexData(){return _ref.apply(this,arguments)}}();(0,_react.useEffect)((function(){getSourceIndexData()}),[indexPattern.title,JSON.stringify([query,pagination,sortingColumns])]);return{errorMessage:errorMessage,pagination:pagination,setPagination:setPagination,setSortingColumns:setSortingColumns,rowCount:rowCount,sortingColumns:sortingColumns,status:status,tableItems:tableItems}};exports.useSourceIndexData=useSourceIndexData},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SwitchModal=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var pivotModalTitle=_i18n.i18n.translate("xpack.transform.stepDefineForm.advancedEditorSwitchModalTitle",{defaultMessage:"Unapplied changes"});var sourceModalTitle=_i18n.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorSwitchModalTitle",{defaultMessage:"Edits will be lost"});var pivotModalMessage=_i18n.i18n.translate("xpack.transform.stepDefineForm.advancedEditorSwitchModalBodyText",{defaultMessage:"The changes in the advanced editor haven't been applied yet. By disabling the advanced editor you will lose your edits."});var sourceModalMessage=_i18n.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorSwitchModalBodyText",{defaultMessage:"By switching back to the query bar you will lose your edits."});var pivotModalConfirmButtonText=_i18n.i18n.translate("xpack.transform.stepDefineForm.advancedEditorSwitchModalConfirmButtonText",{defaultMessage:"Disable advanced editor"});var sourceModalConfirmButtonText=_i18n.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorSwitchModalConfirmButtonText",{defaultMessage:"Switch to query bar"});var cancelButtonText=_i18n.i18n.translate("xpack.transform.stepDefineForm.advancedEditorSwitchModalCancelButtonText",{defaultMessage:"Cancel"});var SwitchModal=function SwitchModal(_ref){var onCancel=_ref.onCancel,onConfirm=_ref.onConfirm,type=_ref.type;return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:type==="pivot"?pivotModalTitle:sourceModalTitle,onCancel:onCancel,onConfirm:onConfirm,cancelButtonText:cancelButtonText,confirmButtonText:type==="pivot"?pivotModalConfirmButtonText:sourceModalConfirmButtonText,buttonColor:"danger",defaultFocusedButton:"confirm"},_react.default.createElement("p",null,type==="pivot"?pivotModalMessage:sourceModalMessage)))};exports.SwitchModal=SwitchModal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPivotDropdownOptions=getPivotDropdownOptions;var _lodash=__webpack_require__(41);var _common=__webpack_require__(44);function getDefaultGroupByConfig(aggName,dropDownName,fieldName,groupByAgg){switch(groupByAgg){case _common.PIVOT_SUPPORTED_GROUP_BY_AGGS.TERMS:return{agg:groupByAgg,aggName:aggName,dropDownName:dropDownName,field:fieldName};case _common.PIVOT_SUPPORTED_GROUP_BY_AGGS.HISTOGRAM:return{agg:groupByAgg,aggName:aggName,dropDownName:dropDownName,field:fieldName,interval:"10"};case _common.PIVOT_SUPPORTED_GROUP_BY_AGGS.DATE_HISTOGRAM:return{agg:groupByAgg,aggName:aggName,dropDownName:dropDownName,field:fieldName,calendar_interval:"1m"}}}function getDefaultAggregationConfig(aggName,dropDownName,fieldName,agg){switch(agg){case _common.PIVOT_SUPPORTED_AGGS.PERCENTILES:return{agg:agg,aggName:aggName,dropDownName:dropDownName,field:fieldName,percents:_common.PERCENTILES_AGG_DEFAULT_PERCENTS};default:return{agg:agg,aggName:aggName,dropDownName:dropDownName,field:fieldName}}}var illegalEsAggNameChars=/[[\]>]/g;function getPivotDropdownOptions(indexPattern){var groupByOptions=[];var groupByOptionsData={};var aggOptions=[];var aggOptionsData={};var ignoreFieldNames=["_id","_index","_type"];var fields=indexPattern.fields.filter((function(field){return field.aggregatable===true&&!ignoreFieldNames.includes(field.name)})).map((function(field){return{name:field.name,type:field.type}}));fields.forEach((function(field){var availableGroupByAggs=(0,_lodash.get)(_common.pivotGroupByFieldSupport,field.type);if(availableGroupByAggs!==undefined){availableGroupByAggs.forEach((function(groupByAgg){var aggName=field.name.replace(illegalEsAggNameChars,"").trim();var dropDownName="".concat(groupByAgg,"(").concat(field.name,")");var groupByOption={label:dropDownName};groupByOptions.push(groupByOption);groupByOptionsData[dropDownName]=getDefaultGroupByConfig(aggName,dropDownName,field.name,groupByAgg)}))}var aggOption={label:field.name,options:[]};var availableAggs=(0,_lodash.get)(_common.pivotAggsFieldSupport,field.type);if(availableAggs!==undefined){availableAggs.forEach((function(agg){var aggName="".concat(field.name.replace(illegalEsAggNameChars,"").trim(),".").concat(agg);var dropDownName="".concat(agg,"(").concat(field.name,")");aggOption.options.push({label:dropDownName});aggOptionsData[dropDownName]=getDefaultAggregationConfig(aggName,dropDownName,field.name,agg)}))}aggOptions.push(aggOption)}));return{groupByOptions:groupByOptions,groupByOptionsData:groupByOptionsData,aggOptions:aggOptions,aggOptionsData:aggOptionsData}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StepDefineSummary=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _common=__webpack_require__(44);var _pivot_preview=__webpack_require__(124);var _aggregation_list=__webpack_require__(246);var _group_by_list=__webpack_require__(247);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var StepDefineSummary=function StepDefineSummary(_ref){var _ref$formState=_ref.formState,searchString=_ref$formState.searchString,searchQuery=_ref$formState.searchQuery,groupByList=_ref$formState.groupByList,aggList=_ref$formState.aggList,searchItems=_ref.searchItems;var pivotQuery=(0,_common.getPivotQuery)(searchQuery);return _react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:{minWidth:"420px"}},_react.default.createElement("div",{"data-test-subj":"transformStepDefineSummary"},_react.default.createElement(_eui.EuiForm,null,searchItems.savedSearch===undefined&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDefineSummary.indexPatternLabel",{defaultMessage:"Index pattern"})},_react.default.createElement("span",null,searchItems.indexPattern.title)),typeof searchString==="string"&&_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDefineSummary.queryLabel",{defaultMessage:"Query"})},_react.default.createElement("span",null,searchString)),typeof searchString==="undefined"&&!(0,_common.isDefaultQuery)(pivotQuery)&&!(0,_common.isMatchAllQuery)(pivotQuery)&&_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDefineSummary.queryCodeBlockLabel",{defaultMessage:"Query"})},_react.default.createElement(_eui.EuiCodeBlock,{language:"js",fontSize:"s",paddingSize:"s",color:"light",overflowHeight:300,isCopyable:true},JSON.stringify(pivotQuery,null,2)))),searchItems.savedSearch!==undefined&&searchItems.savedSearch.id!==undefined&&_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDefineSummary.savedSearchLabel",{defaultMessage:"Saved search"})},_react.default.createElement("span",null,searchItems.savedSearch.title)),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDefineSummary.groupByLabel",{defaultMessage:"Group by"})},_react.default.createElement(_group_by_list.GroupByListSummary,{list:groupByList})),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDefineSummary.aggregationsLabel",{defaultMessage:"Aggregations"})},_react.default.createElement(_aggregation_list.AggListSummary,{list:aggList}))))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,null,_react.default.createElement(_pivot_preview.PivotPreview,{aggs:aggList,groupBy:groupByList,indexPatternTitle:searchItems.indexPattern.title,query:pivotQuery}))))};exports.StepDefineSummary=StepDefineSummary},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"StepCreateForm",{enumerable:true,get:function get(){return _step_create_form.StepCreateForm}});Object.defineProperty(exports,"getDefaultStepCreateState",{enumerable:true,get:function get(){return _step_create_form.getDefaultStepCreateState}});Object.defineProperty(exports,"StepCreateSummary",{enumerable:true,get:function get(){return _step_create_summary.StepCreateSummary}});var _step_create_form=__webpack_require__(762);var _step_create_summary=__webpack_require__(763)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultStepCreateState=getDefaultStepCreateState;exports.StepCreateForm=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _public=__webpack_require__(25);var _constants=__webpack_require__(64);var _shared_imports=__webpack_require__(69);var _common=__webpack_require__(44);var _use_api=__webpack_require__(53);var _app_dependencies=__webpack_require__(51);var _navigation=__webpack_require__(99);var _components=__webpack_require__(71);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getDefaultStepCreateState(){return{created:false,started:false,indexPatternId:undefined}}var StepCreateForm=_react.default.memo((function(_ref){var createIndexPattern=_ref.createIndexPattern,transformConfig=_ref.transformConfig,transformId=_ref.transformId,onChange=_ref.onChange,overrides=_ref.overrides;var defaults=_objectSpread({},getDefaultStepCreateState(),{},overrides);var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),redirectToTransformManagement=_useState2[0],setRedirectToTransformManagement=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=(0,_react.useState)(defaults.created),_useState6=_slicedToArray(_useState5,2),created=_useState6[0],setCreated=_useState6[1];var _useState7=(0,_react.useState)(defaults.started),_useState8=_slicedToArray(_useState7,2),started=_useState8[0],setStarted=_useState8[1];var _useState9=(0,_react.useState)(defaults.indexPatternId),_useState10=_slicedToArray(_useState9,2),indexPatternId=_useState10[0],setIndexPatternId=_useState10[1];var _useState11=(0,_react.useState)(undefined),_useState12=_slicedToArray(_useState11,2),progressPercentComplete=_useState12[0],setProgressPercentComplete=_useState12[1];var deps=(0,_app_dependencies.useAppDependencies)();var indexPatterns=deps.data.indexPatterns;var uiSettings=deps.uiSettings;var toastNotifications=(0,_app_dependencies.useToastNotifications)();(0,_react.useEffect)((function(){onChange({created:created,started:started,indexPatternId:indexPatternId})}),[created,started,indexPatternId]);var api=(0,_use_api.useApi)();function createTransform(){return _createTransform.apply(this,arguments)}function _createTransform(){_createTransform=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var resp;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setLoading(true);_context3.prev=1;_context3.next=4;return api.createTransform(transformId,transformConfig);case 4:resp=_context3.sent;if(!(resp.errors!==undefined&&Array.isArray(resp.errors))){_context3.next=10;break}if(!(resp.errors.length===1)){_context3.next=8;break}throw resp.errors[0];case 8:if(!(resp.errors.length>1)){_context3.next=10;break}throw resp.errors;case 10:toastNotifications.addSuccess(_i18n.i18n.translate("xpack.transform.stepCreateForm.createTransformSuccessMessage",{defaultMessage:"Request to create transform {transformId} acknowledged.",values:{transformId:transformId}}));setCreated(true);setLoading(false);_context3.next=21;break;case 15:_context3.prev=15;_context3.t0=_context3["catch"](1);toastNotifications.addDanger({title:_i18n.i18n.translate("xpack.transform.stepCreateForm.createTransformErrorMessage",{defaultMessage:"An error occurred creating the transform {transformId}:",values:{transformId:transformId}}),text:(0,_public.toMountPoint)(_react.default.createElement(_components.ToastNotificationText,{overlays:deps.overlays,text:(0,_shared_imports.getErrorMessage)(_context3.t0)}))});setCreated(false);setLoading(false);return _context3.abrupt("return",false);case 21:if(createIndexPattern){createKibanaIndexPattern()}return _context3.abrupt("return",true);case 23:case"end":return _context3.stop()}}}),_callee3,null,[[1,15]])})));return _createTransform.apply(this,arguments)}function startTransform(){return _startTransform.apply(this,arguments)}function _startTransform(){_startTransform=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var _resp$transformId,resp,_resp$transformId2,errorMessage;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:setLoading(true);_context4.prev=1;_context4.next=4;return api.startTransforms([{id:transformId}]);case 4:resp=_context4.sent;if(!(_typeof(resp)==="object"&&resp!==null&&((_resp$transformId=resp[transformId])===null||_resp$transformId===void 0?void 0:_resp$transformId.success)===true)){_context4.next=11;break}toastNotifications.addSuccess(_i18n.i18n.translate("xpack.transform.stepCreateForm.startTransformSuccessMessage",{defaultMessage:"Request to start transform {transformId} acknowledged.",values:{transformId:transformId}}));setStarted(true);setLoading(false);_context4.next=13;break;case 11:errorMessage=_typeof(resp)==="object"&&resp!==null&&((_resp$transformId2=resp[transformId])===null||_resp$transformId2===void 0?void 0:_resp$transformId2.success)===false?resp[transformId].error:resp;throw new Error(errorMessage);case 13:_context4.next=20;break;case 15:_context4.prev=15;_context4.t0=_context4["catch"](1);toastNotifications.addDanger({title:_i18n.i18n.translate("xpack.transform.stepCreateForm.startTransformErrorMessage",{defaultMessage:"An error occurred starting the transform {transformId}:",values:{transformId:transformId}}),text:(0,_public.toMountPoint)(_react.default.createElement(_components.ToastNotificationText,{overlays:deps.overlays,text:(0,_shared_imports.getErrorMessage)(_context4.t0)}))});setStarted(false);setLoading(false);case 20:case"end":return _context4.stop()}}}),_callee4,null,[[1,15]])})));return _startTransform.apply(this,arguments)}function createAndStartTransform(){return _createAndStartTransform.apply(this,arguments)}function _createAndStartTransform(){_createAndStartTransform=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){var acknowledged;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return createTransform();case 2:acknowledged=_context5.sent;if(!acknowledged){_context5.next=6;break}_context5.next=6;return startTransform();case 6:case"end":return _context5.stop()}}}),_callee5)})));return _createAndStartTransform.apply(this,arguments)}var createKibanaIndexPattern=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var indexPatternName,newIndexPattern,id;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);indexPatternName=transformConfig.dest.index;_context.prev=2;_context.next=5;return indexPatterns.make();case 5:newIndexPattern=_context.sent;Object.assign(newIndexPattern,{id:"",title:indexPatternName});_context.next=9;return newIndexPattern.create();case 9:id=_context.sent;_context.next=12;return indexPatterns.clearCache();case 12:if(!(id===false)){_context.next=16;break}toastNotifications.addDanger(_i18n.i18n.translate("xpack.transform.stepCreateForm.duplicateIndexPatternErrorMessage",{defaultMessage:"An error occurred creating the Kibana index pattern {indexPatternName}: The index pattern already exists.",values:{indexPatternName:indexPatternName}}));setLoading(false);return _context.abrupt("return");case 16:if(uiSettings.get("defaultIndex")){_context.next=19;break}_context.next=19;return uiSettings.set("defaultIndex",id);case 19:toastNotifications.addSuccess(_i18n.i18n.translate("xpack.transform.stepCreateForm.createIndexPatternSuccessMessage",{defaultMessage:"Kibana index pattern {indexPatternName} created successfully.",values:{indexPatternName:indexPatternName}}));setIndexPatternId(id);setLoading(false);return _context.abrupt("return",true);case 25:_context.prev=25;_context.t0=_context["catch"](2);toastNotifications.addDanger({title:_i18n.i18n.translate("xpack.transform.stepCreateForm.createIndexPatternErrorMessage",{defaultMessage:"An error occurred creating the Kibana index pattern {indexPatternName}:",values:{indexPatternName:indexPatternName}}),text:(0,_public.toMountPoint)(_react.default.createElement(_components.ToastNotificationText,{overlays:deps.overlays,text:(0,_shared_imports.getErrorMessage)(_context.t0)}))});setLoading(false);return _context.abrupt("return",false);case 30:case"end":return _context.stop()}}}),_callee,null,[[2,25]])})));return function createKibanaIndexPattern(){return _ref2.apply(this,arguments)}}();var isBatchTransform=typeof transformConfig.sync==="undefined";if(loading===false&&started===true&&progressPercentComplete===undefined&&isBatchTransform){var startProgressBar=function startProgressBar(){var interval=setInterval(_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var stats,percent;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return api.getTransformsStats(transformId);case 3:stats=_context2.sent;if(stats&&Array.isArray(stats.transforms)&&stats.transforms.length>0){percent=(0,_common.getTransformProgress)({id:transformConfig.id,config:transformConfig,stats:stats.transforms[0]})||0;setProgressPercentComplete(percent);if(percent>=100){clearInterval(interval)}}_context2.next=11;break;case 7:_context2.prev=7;_context2.t0=_context2["catch"](0);toastNotifications.addDanger({title:_i18n.i18n.translate("xpack.transform.stepCreateForm.progressErrorMessage",{defaultMessage:"An error occurred getting the progress percentage:"}),text:(0,_public.toMountPoint)(_react.default.createElement(_components.ToastNotificationText,{overlays:deps.overlays,text:(0,_shared_imports.getErrorMessage)(_context2.t0)}))});clearInterval(interval);case 11:case"end":return _context2.stop()}}}),_callee2,null,[[0,7]])}))),_constants.PROGRESS_REFRESH_INTERVAL_MS);setProgressPercentComplete(0)};startProgressBar()}function getTransformConfigDevConsoleStatement(){return"PUT _transform/".concat(transformId,"\n").concat(JSON.stringify(transformConfig,null,2),"\n\n")}var FLEX_GROUP_STYLE={height:"90px",maxWidth:"800px"};var FLEX_ITEM_STYLE={width:"200px"};var PANEL_ITEM_STYLE={width:"300px"};if(redirectToTransformManagement){return _react.default.createElement(_navigation.RedirectToTransformManagement,null)}return _react.default.createElement("div",{"data-test-subj":"transformStepCreateForm"},_react.default.createElement(_eui.EuiForm,null,!created&&_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",style:FLEX_GROUP_STYLE},_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:FLEX_ITEM_STYLE},_react.default.createElement(_eui.EuiButton,{fill:true,isDisabled:loading||created&&started,onClick:createAndStartTransform,"data-test-subj":"transformWizardCreateAndStartButton"},_i18n.i18n.translate("xpack.transform.stepCreateForm.createAndStartTransformButton",{defaultMessage:"Create and start"}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{color:"subdued",size:"s"},_i18n.i18n.translate("xpack.transform.stepCreateForm.createAndStartTransformDescription",{defaultMessage:"Creates and starts the transform. A transform will increase search and indexing load in your cluster. Please stop the transform if excessive load is experienced. After the transform is started, you will be offered options to continue exploring the transform."})))),created&&_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",style:FLEX_GROUP_STYLE},_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:FLEX_ITEM_STYLE},_react.default.createElement(_eui.EuiButton,{fill:true,isDisabled:loading||created&&started,onClick:startTransform,"data-test-subj":"transformWizardStartButton"},_i18n.i18n.translate("xpack.transform.stepCreateForm.startTransformButton",{defaultMessage:"Start"}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{color:"subdued",size:"s"},_i18n.i18n.translate("xpack.transform.stepCreateForm.startTransformDescription",{defaultMessage:"Starts the transform. A transform will increase search and indexing load in your cluster. Please stop the transform if excessive load is experienced. After the transform is started, you will be offered options to continue exploring the transform."})))),_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",style:FLEX_GROUP_STYLE},_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:FLEX_ITEM_STYLE},_react.default.createElement(_eui.EuiButton,{isDisabled:loading||created,onClick:createTransform,"data-test-subj":"transformWizardCreateButton"},_i18n.i18n.translate("xpack.transform.stepCreateForm.createTransformButton",{defaultMessage:"Create"}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{color:"subdued",size:"s"},_i18n.i18n.translate("xpack.transform.stepCreateForm.createTransformDescription",{defaultMessage:"Create the transform without starting it. You will be able to start the transform later by returning to the transforms list."})))),_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",style:FLEX_GROUP_STYLE},_react.default.createElement(_eui.EuiFlexItem,{grow:false,style:FLEX_ITEM_STYLE},_react.default.createElement(_eui.EuiCopy,{textToCopy:getTransformConfigDevConsoleStatement()},(function(copy){return _react.default.createElement(_eui.EuiButton,{onClick:copy,style:{width:"100%"},"data-test-subj":"transformWizardCopyToClipboardButton"},_i18n.i18n.translate("xpack.transform.stepCreateForm.copyTransformConfigToClipboardButton",{defaultMessage:"Copy to clipboard"}))}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{color:"subdued",size:"s"},_i18n.i18n.translate("xpack.transform.stepCreateForm.copyTransformConfigToClipboardDescription",{defaultMessage:"Copies to the clipboard the Kibana Dev Console command for creating the transform."})))),progressPercentComplete!==undefined&&isBatchTransform&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("strong",null,_i18n.i18n.translate("xpack.transform.stepCreateForm.progressTitle",{defaultMessage:"Progress"}))),_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"xs"},_react.default.createElement(_eui.EuiFlexItem,{style:{width:"400px"},grow:false},_react.default.createElement(_eui.EuiProgress,{size:"l",color:"primary",value:progressPercentComplete,max:100,"data-test-subj":"transformWizardProgressBar"})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiText,{size:"xs"},progressPercentComplete,"%")))),created&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiHorizontalRule,null),_react.default.createElement(_eui.EuiFlexGrid,{gutterSize:"l"},_react.default.createElement(_eui.EuiFlexItem,{style:PANEL_ITEM_STYLE},_react.default.createElement(_eui.EuiCard,{icon:_react.default.createElement(_eui.EuiIcon,{size:"xxl",type:"list"}),title:_i18n.i18n.translate("xpack.transform.stepCreateForm.transformListCardTitle",{defaultMessage:"Transforms"}),description:_i18n.i18n.translate("xpack.transform.stepCreateForm.transformListCardDescription",{defaultMessage:"Return to the transform management page."}),onClick:function onClick(){return setRedirectToTransformManagement(true)},"data-test-subj":"transformWizardCardManagement"})),started===true&&createIndexPattern===true&&indexPatternId===undefined&&_react.default.createElement(_eui.EuiFlexItem,{style:PANEL_ITEM_STYLE},_react.default.createElement(_eui.EuiPanel,{style:{position:"relative"}},_react.default.createElement(_eui.EuiProgress,{size:"xs",color:"primary",position:"absolute"}),_react.default.createElement(_eui.EuiText,{color:"subdued",size:"s"},_react.default.createElement("p",null,_i18n.i18n.translate("xpack.transform.stepCreateForm.creatingIndexPatternMessage",{defaultMessage:"Creating Kibana index pattern ..."}))))),started===true&&indexPatternId!==undefined&&_react.default.createElement(_eui.EuiFlexItem,{style:PANEL_ITEM_STYLE},_react.default.createElement(_eui.EuiCard,{icon:_react.default.createElement(_eui.EuiIcon,{size:"xxl",type:"discoverApp"}),title:_i18n.i18n.translate("xpack.transform.stepCreateForm.discoverCardTitle",{defaultMessage:"Discover"}),description:_i18n.i18n.translate("xpack.transform.stepCreateForm.discoverCardDescription",{defaultMessage:"Use Discover to explore the transform."}),href:(0,_common.getDiscoverUrl)(indexPatternId,deps.http.basePath.get()),"data-test-subj":"transformWizardCardDiscover"}))))))}));exports.StepCreateForm=StepCreateForm},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StepCreateSummary=void 0;var _react=_interopRequireDefault(__webpack_require__(22));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StepCreateSummary=_react.default.memo((function(){return null}));exports.StepCreateSummary=StepCreateSummary},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"applyTransformConfigToDetailsState",{enumerable:true,get:function get(){return _step_details_form.applyTransformConfigToDetailsState}});Object.defineProperty(exports,"getDefaultStepDetailsState",{enumerable:true,get:function get(){return _step_details_form.getDefaultStepDetailsState}});Object.defineProperty(exports,"StepDetailsForm",{enumerable:true,get:function get(){return _step_details_form.StepDetailsForm}});Object.defineProperty(exports,"StepDetailsSummary",{enumerable:true,get:function get(){return _step_details_summary.StepDetailsSummary}});var _step_details_form=__webpack_require__(765);var _step_details_summary=__webpack_require__(768)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultStepDetailsState=getDefaultStepDetailsState;exports.applyTransformConfigToDetailsState=applyTransformConfigToDetailsState;exports.StepDetailsForm=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _common=__webpack_require__(42);var _public=__webpack_require__(25);var _es_utils=__webpack_require__(766);var _shared_imports=__webpack_require__(69);var _app_dependencies=__webpack_require__(51);var _components=__webpack_require__(71);var _use_documentation_links=__webpack_require__(79);var _use_api=__webpack_require__(53);var _common2=__webpack_require__(44);var _validators=__webpack_require__(767);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getDefaultStepDetailsState(){return{continuousModeDateField:"",continuousModeDelay:"60s",createIndexPattern:true,isContinuousModeEnabled:false,transformId:"",transformDescription:"",destinationIndex:"",touched:false,valid:false}}function applyTransformConfigToDetailsState(state,transformConfig){if(transformConfig!==undefined){var _transformConfig$sync;var time=(_transformConfig$sync=transformConfig.sync)===null||_transformConfig$sync===void 0?void 0:_transformConfig$sync.time;if(time!==undefined){state.continuousModeDateField=time.field;state.continuousModeDelay=time.delay;state.isContinuousModeEnabled=true}}return state}var StepDetailsForm=_react.default.memo((function(_ref){var _ref$overrides=_ref.overrides,overrides=_ref$overrides===void 0?{}:_ref$overrides,onChange=_ref.onChange,searchItems=_ref.searchItems;var deps=(0,_app_dependencies.useAppDependencies)();var toastNotifications=(0,_app_dependencies.useToastNotifications)();var _useDocumentationLink=(0,_use_documentation_links.useDocumentationLinks)(),esIndicesCreateIndex=_useDocumentationLink.esIndicesCreateIndex;var defaults=_objectSpread({},getDefaultStepDetailsState(),{},overrides);var _useState=(0,_react.useState)(defaults.transformId),_useState2=_slicedToArray(_useState,2),transformId=_useState2[0],setTransformId=_useState2[1];var _useState3=(0,_react.useState)(defaults.transformDescription),_useState4=_slicedToArray(_useState3,2),transformDescription=_useState4[0],setTransformDescription=_useState4[1];var _useState5=(0,_react.useState)(defaults.destinationIndex),_useState6=_slicedToArray(_useState5,2),destinationIndex=_useState6[0],setDestinationIndex=_useState6[1];var _useState7=(0,_react.useState)([]),_useState8=_slicedToArray(_useState7,2),transformIds=_useState8[0],setTransformIds=_useState8[1];var _useState9=(0,_react.useState)([]),_useState10=_slicedToArray(_useState9,2),indexNames=_useState10[0],setIndexNames=_useState10[1];var _useState11=(0,_react.useState)([]),_useState12=_slicedToArray(_useState11,2),indexPatternTitles=_useState12[0],setIndexPatternTitles=_useState12[1];var _useState13=(0,_react.useState)(defaults.createIndexPattern),_useState14=_slicedToArray(_useState13,2),createIndexPattern=_useState14[0],setCreateIndexPattern=_useState14[1];var _useState15=(0,_react.useState)(defaults.isContinuousModeEnabled),_useState16=_slicedToArray(_useState15,2),isContinuousModeEnabled=_useState16[0],setContinuousModeEnabled=_useState16[1];var api=(0,_use_api.useApi)();(0,_react.useEffect)((function(){_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.t0=setTransformIds;_context.next=4;return api.getTransforms();case 4:_context.t1=function(transform){return transform.id};_context.t2=_context.sent.transforms.map(_context.t1);(0,_context.t0)(_context.t2);_context.next=12;break;case 9:_context.prev=9;_context.t3=_context["catch"](0);toastNotifications.addDanger({title:_i18n.i18n.translate("xpack.transform.stepDetailsForm.errorGettingTransformList",{defaultMessage:"An error occurred getting the existing transform IDs:"}),text:(0,_public.toMountPoint)(_react.default.createElement(_components.ToastNotificationText,{overlays:deps.overlays,text:(0,_shared_imports.getErrorMessage)(_context.t3)}))});case 12:_context.prev=12;_context.t4=setIndexNames;_context.next=16;return api.getIndices();case 16:_context.t5=function(index){return index.name};_context.t6=_context.sent.map(_context.t5);(0,_context.t4)(_context.t6);_context.next=24;break;case 21:_context.prev=21;_context.t7=_context["catch"](12);toastNotifications.addDanger({title:_i18n.i18n.translate("xpack.transform.stepDetailsForm.errorGettingIndexNames",{defaultMessage:"An error occurred getting the existing index names:"}),text:(0,_public.toMountPoint)(_react.default.createElement(_components.ToastNotificationText,{overlays:deps.overlays,text:(0,_shared_imports.getErrorMessage)(_context.t7)}))});case 24:_context.prev=24;_context.t8=setIndexPatternTitles;_context.next=28;return deps.data.indexPatterns.getTitles();case 28:_context.t9=_context.sent;(0,_context.t8)(_context.t9);_context.next=35;break;case 32:_context.prev=32;_context.t10=_context["catch"](24);toastNotifications.addDanger({title:_i18n.i18n.translate("xpack.transform.stepDetailsForm.errorGettingIndexPatternTitles",{defaultMessage:"An error occurred getting the existing index pattern titles:"}),text:(0,_public.toMountPoint)(_react.default.createElement(_components.ToastNotificationText,{overlays:deps.overlays,text:(0,_shared_imports.getErrorMessage)(_context.t10)}))});case 35:case"end":return _context.stop()}}}),_callee,null,[[0,9],[12,21],[24,32]])})))()}),[]);var dateFieldNames=searchItems.indexPattern.fields.filter((function(f){return f.type===_common.KBN_FIELD_TYPES.DATE})).map((function(f){return f.name})).sort();var isContinuousModeAvailable=dateFieldNames.length>0;var _useState17=(0,_react.useState)(isContinuousModeAvailable?dateFieldNames[0]:""),_useState18=_slicedToArray(_useState17,2),continuousModeDateField=_useState18[0],setContinuousModeDateField=_useState18[1];var _useState19=(0,_react.useState)(defaults.continuousModeDelay),_useState20=_slicedToArray(_useState19,2),continuousModeDelay=_useState20[0],setContinuousModeDelay=_useState20[1];var isContinuousModeDelayValid=(0,_validators.delayValidator)(continuousModeDelay);var transformIdExists=transformIds.some((function(id){return transformId===id}));var transformIdEmpty=transformId==="";var transformIdValid=(0,_common2.isTransformIdValid)(transformId);var indexNameExists=indexNames.some((function(name){return destinationIndex===name}));var indexNameEmpty=destinationIndex==="";var indexNameValid=(0,_es_utils.isValidIndexName)(destinationIndex);var indexPatternTitleExists=indexPatternTitles.some((function(name){return destinationIndex===name}));var valid=!transformIdEmpty&&transformIdValid&&!transformIdExists&&!indexNameEmpty&&indexNameValid&&(!indexPatternTitleExists||!createIndexPattern)&&(!isContinuousModeAvailable||isContinuousModeAvailable&&isContinuousModeDelayValid);(0,_react.useEffect)((function(){onChange({continuousModeDateField:continuousModeDateField,continuousModeDelay:continuousModeDelay,createIndexPattern:createIndexPattern,isContinuousModeEnabled:isContinuousModeEnabled,transformId:transformId,transformDescription:transformDescription,destinationIndex:destinationIndex,touched:true,valid:valid})}),[continuousModeDateField,continuousModeDelay,createIndexPattern,isContinuousModeEnabled,transformId,transformDescription,destinationIndex,valid]);return _react.default.createElement("div",{"data-test-subj":"transformStepDetailsForm"},_react.default.createElement(_eui.EuiForm,null,_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDetailsForm.transformIdLabel",{defaultMessage:"Transform ID"}),isInvalid:!transformIdEmpty&&!transformIdValid||transformIdExists,error:[].concat(_toConsumableArray(!transformIdEmpty&&!transformIdValid?[_i18n.i18n.translate("xpack.transform.stepDetailsForm.transformIdInvalidError",{defaultMessage:"Must contain lowercase alphanumeric characters (a-z and 0-9), hyphens, and underscores only and must start and end with alphanumeric characters."})]:[]),_toConsumableArray(transformIdExists?[_i18n.i18n.translate("xpack.transform.stepDetailsForm.transformIdExistsError",{defaultMessage:"A transform with this ID already exists."})]:[]))},_react.default.createElement(_eui.EuiFieldText,{placeholder:"transform ID",value:transformId,onChange:function onChange(e){return setTransformId(e.target.value)},"aria-label":_i18n.i18n.translate("xpack.transform.stepDetailsForm.transformIdInputAriaLabel",{defaultMessage:"Choose a unique transform ID."}),isInvalid:!transformIdEmpty&&!transformIdValid||transformIdExists,"data-test-subj":"transformIdInput"})),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDetailsForm.transformDescriptionLabel",{defaultMessage:"Transform description"}),helpText:_i18n.i18n.translate("xpack.transform.stepDetailsForm.transformDescriptionHelpText",{defaultMessage:"Optional descriptive text."})},_react.default.createElement(_eui.EuiFieldText,{placeholder:"transform description",value:transformDescription,onChange:function onChange(e){return setTransformDescription(e.target.value)},"aria-label":_i18n.i18n.translate("xpack.transform.stepDetailsForm.transformDescriptionInputAriaLabel",{defaultMessage:"Choose an optional transform description."}),"data-test-subj":"transformDescriptionInput"})),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDetailsForm.destinationIndexLabel",{defaultMessage:"Destination index"}),isInvalid:!indexNameEmpty&&!indexNameValid,helpText:indexNameExists&&_i18n.i18n.translate("xpack.transform.stepDetailsForm.destinationIndexHelpText",{defaultMessage:"An index with this name already exists. Be aware that running this transform will modify this destination index."}),error:!indexNameEmpty&&!indexNameValid&&[_react.default.createElement(_react.Fragment,null,_i18n.i18n.translate("xpack.transform.stepDetailsForm.destinationIndexInvalidError",{defaultMessage:"Invalid destination index name."}),_react.default.createElement("br",null),_react.default.createElement(_eui.EuiLink,{href:esIndicesCreateIndex,target:"_blank"},_i18n.i18n.translate("xpack.transform.stepDetailsForm.destinationIndexInvalidErrorLink",{defaultMessage:"Learn more about index name limitations."})))]},_react.default.createElement(_eui.EuiFieldText,{placeholder:"destination index",value:destinationIndex,onChange:function onChange(e){return setDestinationIndex(e.target.value)},"aria-label":_i18n.i18n.translate("xpack.transform.stepDetailsForm.destinationIndexInputAriaLabel",{defaultMessage:"Choose a unique destination index name."}),isInvalid:!indexNameEmpty&&!indexNameValid,"data-test-subj":"transformDestinationIndexInput"})),_react.default.createElement(_eui.EuiFormRow,{isInvalid:createIndexPattern&&indexPatternTitleExists,error:createIndexPattern&&indexPatternTitleExists&&[_i18n.i18n.translate("xpack.transform.stepDetailsForm.indexPatternTitleError",{defaultMessage:"An index pattern with this title already exists."})]},_react.default.createElement(_eui.EuiSwitch,{name:"transformCreateIndexPattern",label:_i18n.i18n.translate("xpack.transform.stepCreateForm.createIndexPatternLabel",{defaultMessage:"Create index pattern"}),checked:createIndexPattern===true,onChange:function onChange(){return setCreateIndexPattern(!createIndexPattern)},"data-test-subj":"transformCreateIndexPatternSwitch"})),_react.default.createElement(_eui.EuiFormRow,{helpText:isContinuousModeAvailable===false?_i18n.i18n.translate("xpack.transform.stepDetailsForm.continuousModeError",{defaultMessage:"Continuous mode is not available for indices without date fields."}):""},_react.default.createElement(_eui.EuiSwitch,{name:"transformContinuousMode",label:_i18n.i18n.translate("xpack.transform.stepCreateForm.continuousModeLabel",{defaultMessage:"Continuous mode"}),checked:isContinuousModeEnabled===true,onChange:function onChange(){return setContinuousModeEnabled(!isContinuousModeEnabled)},disabled:isContinuousModeAvailable===false,"data-test-subj":"transformContinuousModeSwitch"})),isContinuousModeEnabled&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDetailsForm.continuousModeDateFieldLabel",{defaultMessage:"Date field"}),helpText:_i18n.i18n.translate("xpack.transform.stepDetailsForm.continuousModeDateFieldHelpText",{defaultMessage:"Select the date field that can be used to identify new documents."})},_react.default.createElement(_eui.EuiSelect,{options:dateFieldNames.map((function(text){return{text:text}})),value:continuousModeDateField,onChange:function onChange(e){return setContinuousModeDateField(e.target.value)},"data-test-subj":"transformContinuousDateFieldSelect"})),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDetailsForm.continuousModeDelayLabel",{defaultMessage:"Delay"}),isInvalid:!isContinuousModeDelayValid,error:!isContinuousModeDelayValid&&[_i18n.i18n.translate("xpack.transform.stepDetailsForm.continuousModeDelayError",{defaultMessage:"Invalid delay format"})],helpText:_i18n.i18n.translate("xpack.transform.stepDetailsForm.continuousModeDelayHelpText",{defaultMessage:"Time delay between current time and latest input data time."})},_react.default.createElement(_eui.EuiFieldText,{placeholder:"delay",value:continuousModeDelay,onChange:function onChange(e){return setContinuousModeDelay(e.target.value)},"aria-label":_i18n.i18n.translate("xpack.transform.stepDetailsForm.continuousModeAriaLabel",{defaultMessage:"Choose a delay."}),isInvalid:!isContinuousModeDelayValid,"data-test-subj":"transformContinuousDelayInput"})))))}));exports.StepDetailsForm=StepDetailsForm},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isValidIndexName=isValidIndexName;var windowWithTextEncoder=window;function isValidIndexNameLength(indexName){if(windowWithTextEncoder.TextEncoder&&new windowWithTextEncoder.TextEncoder("utf-8").encode(indexName).length>255){return false}return indexName.length<=255}function isValidIndexName(indexName){return indexName===indexName.toLowerCase()&&/^[^\*\\/\?"<>|\s,#:]+$/.test(indexName)&&/^[^-_\+]+$/.test(indexName.charAt(0))&&indexName!=="."&&indexName!==".."&&isValidIndexNameLength(indexName)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.delayValidator=delayValidator;function delayValidator(value){return value.match(/^(0|\d*(nanos|micros|ms|s|m|h|d))$/)!==null}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StepDetailsSummary=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StepDetailsSummary=_react.default.memo((function(_ref){var continuousModeDateField=_ref.continuousModeDateField,createIndexPattern=_ref.createIndexPattern,isContinuousModeEnabled=_ref.isContinuousModeEnabled,transformId=_ref.transformId,transformDescription=_ref.transformDescription,destinationIndex=_ref.destinationIndex,touched=_ref.touched;if(touched===false){return null}var destinationIndexHelpText=createIndexPattern?_i18n.i18n.translate("xpack.transform.stepDetailsSummary.createIndexPatternMessage",{defaultMessage:"A Kibana index pattern will be created for this transform."}):"";return _react.default.createElement("div",{"data-test-subj":"transformStepDetailsSummary"},_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDetailsSummary.transformIdLabel",{defaultMessage:"Transform ID"})},_react.default.createElement(_eui.EuiFieldText,{defaultValue:transformId,disabled:true})),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDetailsSummary.transformDescriptionLabel",{defaultMessage:"Transform description"})},_react.default.createElement(_eui.EuiFieldText,{defaultValue:transformDescription,disabled:true})),_react.default.createElement(_eui.EuiFormRow,{helpText:destinationIndexHelpText,label:_i18n.i18n.translate("xpack.transform.stepDetailsSummary.destinationIndexLabel",{defaultMessage:"Destination index"})},_react.default.createElement(_eui.EuiFieldText,{defaultValue:destinationIndex,disabled:true})),isContinuousModeEnabled&&_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.transform.stepDetailsSummary.continuousModeDateFieldLabel",{defaultMessage:"Continuous mode date field"})},_react.default.createElement(_eui.EuiFieldText,{defaultValue:continuousModeDateField,disabled:true})))}));exports.StepDetailsSummary=StepDetailsSummary},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"WizardNav",{enumerable:true,get:function get(){return _wizard_nav.WizardNav}});var _wizard_nav=__webpack_require__(770)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WizardNav=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var WizardNav=function WizardNav(_ref){var previous=_ref.previous,_ref$previousActive=_ref.previousActive,previousActive=_ref$previousActive===void 0?true:_ref$previousActive,next=_ref.next,_ref$nextActive=_ref.nextActive,nextActive=_ref$nextActive===void 0?true:_ref$nextActive;return _react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null),previous&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{disabled:!previousActive,onClick:previous,iconType:"arrowLeft",size:"s","data-test-subj":"transformWizardNavButtonPrevious"},_i18n.i18n.translate("xpack.transform.wizard.previousStepButton",{defaultMessage:"Previous"}))),next&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{disabled:!nextActive,onClick:next,iconType:"arrowRight",size:"s","data-test-subj":"transformWizardNavButtonNext"},_i18n.i18n.translate("xpack.transform.wizard.nextStepButton",{defaultMessage:"Next"}))))};exports.WizardNav=WizardNav},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CreateTransformSection",{enumerable:true,get:function get(){return _create_transform_section.CreateTransformSection}});var _create_transform_section=__webpack_require__(772)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CreateTransformSection=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _react2=__webpack_require__(24);var _eui=__webpack_require__(23);var _constants=__webpack_require__(64);var _use_documentation_links=__webpack_require__(79);var _use_search_items=__webpack_require__(242);var _navigation=__webpack_require__(81);var _authorization=__webpack_require__(56);var _wizard=__webpack_require__(244);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var CreateTransformSection=function CreateTransformSection(_ref){var match=_ref.match;(0,_react.useEffect)((function(){_navigation.breadcrumbService.setBreadcrumbs(_navigation.BREADCRUMB_SECTION.CREATE_TRANSFORM);_navigation.docTitleService.setTitle("createTransform")}),[]);var _useDocumentationLink=(0,_use_documentation_links.useDocumentationLinks)(),esTransform=_useDocumentationLink.esTransform;var _useSearchItems=(0,_use_search_items.useSearchItems)(match.params.savedObjectId),searchItems=_useSearchItems.searchItems;return _react.default.createElement(_authorization.PrivilegesWrapper,{privileges:_constants.APP_CREATE_TRANSFORM_CLUSTER_PRIVILEGES},_react.default.createElement(_eui.EuiPageContent,{"data-test-subj":"transformPageCreateTransform"},_react.default.createElement(_eui.EuiTitle,{size:"l"},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement("h1",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.transform.transformsWizard.createTransformTitle",defaultMessage:"Create transform"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{href:esTransform,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.transform.transformsWizard.transformDocsLinkText",defaultMessage:"Transform docs"}))))),_react.default.createElement(_eui.EuiPageContentBody,null,_react.default.createElement(_eui.EuiSpacer,{size:"l"}),searchItems!==undefined&&_react.default.createElement(_wizard.Wizard,{searchItems:searchItems}))))};exports.CreateTransformSection=CreateTransformSection},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TransformManagementSection",{enumerable:true,get:function get(){return _transform_management_section.TransformManagementSection}});var _transform_management_section=__webpack_require__(774)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransformManagementSection=exports.TransformManagement=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _react2=__webpack_require__(24);var _eui=__webpack_require__(23);var _constants=__webpack_require__(64);var _common=__webpack_require__(44);var _use_documentation_links=__webpack_require__(79);var _hooks=__webpack_require__(72);var _navigation=__webpack_require__(99);var _authorization=__webpack_require__(56);var _navigation2=__webpack_require__(81);var _use_refresh_interval=__webpack_require__(775);var _search_selection=__webpack_require__(776);var _transform_list=__webpack_require__(778);var _transforms_stats_bar=__webpack_require__(793);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var TransformManagement=function TransformManagement(){var _useDocumentationLink=(0,_use_documentation_links.useDocumentationLinks)(),esTransform=_useDocumentationLink.esTransform;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),transformsLoading=_useState2[0],setTransformsLoading=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),isInitialized=_useState4[0],setIsInitialized=_useState4[1];var _useState5=(0,_react.useState)(false),_useState6=_slicedToArray(_useState5,2),blockRefresh=_useState6[0],setBlockRefresh=_useState6[1];var _useState7=(0,_react.useState)([]),_useState8=_slicedToArray(_useState7,2),transforms=_useState8[0],setTransforms=_useState8[1];var _useState9=(0,_react.useState)(undefined),_useState10=_slicedToArray(_useState9,2),errorMessage=_useState10[0],setErrorMessage=_useState10[1];var getTransforms=(0,_hooks.useGetTransforms)(setTransforms,setErrorMessage,setIsInitialized,blockRefresh);(0,_common.useRefreshTransformList)({isLoading:setTransformsLoading,onRefresh:function onRefresh(){return getTransforms(true)}});(0,_use_refresh_interval.useRefreshInterval)(setBlockRefresh);var _useState11=(0,_react.useState)(false),_useState12=_slicedToArray(_useState11,2),isSearchSelectionVisible=_useState12[0],setIsSearchSelectionVisible=_useState12[1];var _useState13=(0,_react.useState)(null),_useState14=_slicedToArray(_useState13,2),savedObjectId=_useState14[0],setSavedObjectId=_useState14[1];if(savedObjectId!==null){return _react.default.createElement(_navigation.RedirectToCreateTransform,{savedObjectId:savedObjectId})}var onCloseModal=function onCloseModal(){return setIsSearchSelectionVisible(false)};var onOpenModal=function onOpenModal(){return setIsSearchSelectionVisible(true)};var onSearchSelected=function onSearchSelected(id,type){setSavedObjectId(id)};return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiPageContent,{"data-test-subj":"transformPageTransformList"},_react.default.createElement(_eui.EuiTitle,{size:"l"},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement("h1",{"data-test-subj":"transformAppTitle"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.transform.transformList.transformTitle",defaultMessage:"Transforms"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{href:esTransform,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.transform.transformList.transformDocsLinkText",defaultMessage:"Transform docs"}))))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement(_eui.EuiText,{color:"subdued"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.transform.transformList.transformDescription",defaultMessage:"Use transforms to pivot existing Elasticsearch indices into summarized or entity-centric indices."}))),_react.default.createElement(_eui.EuiPageContentBody,null,_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_transforms_stats_bar.TransformStatsBar,{transformsList:transforms}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_transform_list.TransformList,{errorMessage:errorMessage,isInitialized:isInitialized,onCreateTransform:onOpenModal,transforms:transforms,transformsLoading:transformsLoading}))),isSearchSelectionVisible&&_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiModal,{onClose:onCloseModal,className:"transformCreateTransformSearchDialog","data-test-subj":"transformSelectSourceModal"},_react.default.createElement(_search_selection.SearchSelection,{onSearchSelected:onSearchSelected}))))};exports.TransformManagement=TransformManagement;var TransformManagementSection=function TransformManagementSection(){(0,_react.useEffect)((function(){_navigation2.breadcrumbService.setBreadcrumbs(_navigation2.BREADCRUMB_SECTION.HOME);_navigation2.docTitleService.setTitle("home")}),[]);return _react.default.createElement(_authorization.PrivilegesWrapper,{privileges:_constants.APP_GET_TRANSFORM_CLUSTER_PRIVILEGES},_react.default.createElement(TransformManagement,null))};exports.TransformManagementSection=TransformManagementSection},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useRefreshInterval=void 0;var _react=__webpack_require__(22);var _constants=__webpack_require__(64);var _common=__webpack_require__(44);var useRefreshInterval=function useRefreshInterval(setBlockRefresh){var _useRefreshTransformL=(0,_common.useRefreshTransformList)(),refresh=_useRefreshTransformL.refresh;(0,_react.useEffect)((function(){var interval=setInterval(refresh,_constants.DEFAULT_REFRESH_INTERVAL_MS);return function(){clearInterval(interval)}}),[])};exports.useRefreshInterval=useRefreshInterval},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SearchSelection",{enumerable:true,get:function get(){return _search_selection.SearchSelection}});var _search_selection=__webpack_require__(777)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchSelection=void 0;var _eui=__webpack_require__(23);var _i18n=__webpack_require__(0);var _react=__webpack_require__(24);var _react2=_interopRequireDefault(__webpack_require__(22));var _public=__webpack_require__(107);var _app_dependencies=__webpack_require__(51);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var fixedPageSize=8;var SearchSelection=function SearchSelection(_ref){var onSearchSelected=_ref.onSearchSelected;var _useAppDependencies=(0,_app_dependencies.useAppDependencies)(),uiSettings=_useAppDependencies.uiSettings,savedObjects=_useAppDependencies.savedObjects;return _react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement(_eui.EuiModalHeader,null,_react2.default.createElement(_eui.EuiModalHeaderTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"xpack.transform.newTransform.newTransformTitle",defaultMessage:"New transform"})," ","/"," ",_react2.default.createElement(_react.FormattedMessage,{id:"xpack.transform.newTransform.chooseSourceTitle",defaultMessage:"Choose a source"}))),_react2.default.createElement(_eui.EuiModalBody,null,_react2.default.createElement(_public.SavedObjectFinderUi,{key:"searchSavedObjectFinder",onChoose:onSearchSelected,showFilter:true,noItemsMessage:_i18n.i18n.translate("xpack.transform.newTransform.searchSelection.notFoundLabel",{defaultMessage:"No matching indices or saved searches found."}),savedObjectMetaData:[{type:"search",getIconForSavedObject:function getIconForSavedObject(){return"search"},name:_i18n.i18n.translate("xpack.transform.newTransform.searchSelection.savedObjectType.search",{defaultMessage:"Saved search"})},{type:"index-pattern",getIconForSavedObject:function getIconForSavedObject(){return"indexPatternApp"},name:_i18n.i18n.translate("xpack.transform.newTransform.searchSelection.savedObjectType.indexPattern",{defaultMessage:"Index pattern"})}],fixedPageSize:fixedPageSize,uiSettings:uiSettings,savedObjects:savedObjects})))};exports.SearchSelection=SearchSelection},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TransformList",{enumerable:true,get:function get(){return _transform_list.TransformList}});var _transform_list=__webpack_require__(779)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransformList=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _common=__webpack_require__(60);var _common2=__webpack_require__(44);var _authorization=__webpack_require__(56);var _create_transform_button=__webpack_require__(780);var _refresh_transform_list_button=__webpack_require__(782);var _columns=__webpack_require__(784);var _action_delete=__webpack_require__(250);var _action_start=__webpack_require__(248);var _action_stop=__webpack_require__(249);var _expanded_row=__webpack_require__(787);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function getItemIdToExpandedRowMap(itemIds,transforms){return itemIds.reduce((function(m,transformId){var item=transforms.find((function(transform){return transform.config.id===transformId}));if(item!==undefined){m[transformId]=_react.default.createElement(_expanded_row.ExpandedRow,{item:item})}return m}),{})}function stringMatch(str,substr){return typeof str==="string"&&typeof substr==="string"&&str.toLowerCase().match(substr.toLowerCase())===null===false}var TransformList=function TransformList(_ref){var errorMessage=_ref.errorMessage,isInitialized=_ref.isInitialized,onCreateTransform=_ref.onCreateTransform,transforms=_ref.transforms,transformsLoading=_ref.transformsLoading;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useRefreshTransformL=(0,_common2.useRefreshTransformList)({isLoading:setIsLoading}),refresh=_useRefreshTransformL.refresh;var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),filterActive=_useState4[0],setFilterActive=_useState4[1];var _useState5=(0,_react.useState)([]),_useState6=_slicedToArray(_useState5,2),filteredTransforms=_useState6[0],setFilteredTransforms=_useState6[1];var _useState7=(0,_react.useState)([]),_useState8=_slicedToArray(_useState7,2),expandedRowItemIds=_useState8[0],setExpandedRowItemIds=_useState8[1];var _useState9=(0,_react.useState)([]),_useState10=_slicedToArray(_useState9,2),transformSelection=_useState10[0],setTransformSelection=_useState10[1];var _useState11=(0,_react.useState)(false),_useState12=_slicedToArray(_useState11,2),isActionsMenuOpen=_useState12[0],setIsActionsMenuOpen=_useState12[1];var _useState13=(0,_react.useState)(undefined),_useState14=_slicedToArray(_useState13,2),searchError=_useState14[0],setSearchError=_useState14[1];var _useState15=(0,_react.useState)(0),_useState16=_slicedToArray(_useState15,2),pageIndex=_useState16[0],setPageIndex=_useState16[1];var _useState17=(0,_react.useState)(10),_useState18=_slicedToArray(_useState17,2),pageSize=_useState18[0],setPageSize=_useState18[1];var _useState19=(0,_react.useState)(_common2.TRANSFORM_LIST_COLUMN.ID),_useState20=_slicedToArray(_useState19,2),sortField=_useState20[0],setSortField=_useState20[1];var _useState21=(0,_react.useState)("asc"),_useState22=_slicedToArray(_useState21,2),sortDirection=_useState22[0],setSortDirection=_useState22[1];var _useContext=(0,_react.useContext)(_authorization.AuthorizationContext),capabilities=_useContext.capabilities;var disabled=!capabilities.canCreateTransform||!capabilities.canPreviewTransform||!capabilities.canStartStopTransform;var onQueryChange=function onQueryChange(_ref2){var query=_ref2.query,error=_ref2.error;if(error){setSearchError(error.message)}else{var clauses=[];if(query&&query.ast!==undefined&&query.ast.clauses!==undefined){clauses=query.ast.clauses}if(clauses.length>0){setFilterActive(true);filterTransforms(clauses)}else{setFilterActive(false)}setSearchError(undefined)}};var filterTransforms=function filterTransforms(clauses){setIsLoading(true);var matches=transforms.reduce((function(p,c){p[c.id]={transform:c,count:0};return p}),{});clauses.forEach((function(c){var bool=c.match==="must";var ts=[];if(c.type==="term"){if(bool===true){ts=transforms.filter((function(transform){return stringMatch(transform.id,c.value)===bool||stringMatch(transform.config.description,c.value)===bool}))}else{ts=transforms.filter((function(transform){return stringMatch(transform.id,c.value)===bool&&stringMatch(transform.config.description,c.value)===bool}))}}else{if(Array.isArray(c.value)){ts=transforms.filter((function(transform){return c.value.includes(transform.stats.state)}))}else{ts=transforms.filter((function(transform){return transform.mode===c.value}))}}ts.forEach((function(t){return matches[t.id].count++}))}));var filtered=Object.values(matches).filter((function(m){return(m&&m.count)>=clauses.length})).map((function(m){return m.transform}));setFilteredTransforms(filtered);setIsLoading(false)};if(!isInitialized){return null}if(typeof errorMessage!=="undefined"){return _react.default.createElement(_eui.EuiCallOut,{title:_i18n.i18n.translate("xpack.transform.list.errorPromptTitle",{defaultMessage:"An error occurred getting the transform list."}),color:"danger",iconType:"alert"},_react.default.createElement("pre",null,JSON.stringify(errorMessage)))}if(transforms.length===0){return _react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.transform.list.emptyPromptTitle",{defaultMessage:"No transforms found"})),actions:[_react.default.createElement(_eui.EuiButtonEmpty,{onClick:onCreateTransform,isDisabled:disabled,"data-test-subj":"transformCreateFirstButton"},_i18n.i18n.translate("xpack.transform.list.emptyPromptButtonText",{defaultMessage:"Create your first transform"}))],"data-test-subj":"transformNoTransformsFound"})}var columns=(0,_columns.getColumns)(expandedRowItemIds,setExpandedRowItemIds,transformSelection);var sorting={sort:{field:sortField,direction:sortDirection}};var itemIdToExpandedRowMap=getItemIdToExpandedRowMap(expandedRowItemIds,transforms);var pagination={initialPageIndex:pageIndex,initialPageSize:pageSize,totalItemCount:transforms.length,pageSizeOptions:[10,20,50],hidePerPageOptions:false};var bulkActionMenuItems=[_react.default.createElement("div",{key:"startAction",className:"transform__BulkActionItem"},_react.default.createElement(_action_start.StartAction,{items:transformSelection})),_react.default.createElement("div",{key:"stopAction",className:"transform__BulkActionItem"},_react.default.createElement(_action_stop.StopAction,{items:transformSelection})),_react.default.createElement("div",{key:"deleteAction",className:"transform__BulkActionItem"},_react.default.createElement(_action_delete.DeleteAction,{items:transformSelection}))];var renderToolsLeft=function renderToolsLeft(){var buttonIcon=_react.default.createElement(_eui.EuiButtonIcon,{size:"s",iconType:"gear",color:"text",onClick:function onClick(){setIsActionsMenuOpen(true)},"aria-label":_i18n.i18n.translate("xpack.transform.multiTransformActionsMenu.managementActionsAriaLabel",{defaultMessage:"Management actions"})});var bulkActionIcon=_react.default.createElement(_eui.EuiPopover,{key:"bulkActionIcon",id:"transformBulkActionsMenu",button:buttonIcon,isOpen:isActionsMenuOpen,closePopover:function closePopover(){return setIsActionsMenuOpen(false)},panelPaddingSize:"none",anchorPosition:"rightUp"},bulkActionMenuItems);return[_react.default.createElement(_eui.EuiTitle,{key:"selectedText",size:"s"},_react.default.createElement("h3",null,_i18n.i18n.translate("xpack.transform.multiTransformActionsMenu.transformsCount",{defaultMessage:"{count} {count, plural, one {transform} other {transforms}} selected",values:{count:transformSelection.length}}))),_react.default.createElement("div",{key:"bulkActionsBorder",className:"transform__BulkActionsBorder"}),bulkActionIcon]};var renderToolsRight=function renderToolsRight(){return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"m",justifyContent:"spaceAround"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_refresh_transform_list_button.RefreshTransformListButton,{onClick:refresh,isLoading:isLoading})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_create_transform_button.CreateTransformButton,{onClick:onCreateTransform})))};var search={toolsLeft:transformSelection.length>0?renderToolsLeft():undefined,toolsRight:renderToolsRight(),onChange:onQueryChange,box:{incremental:true},filters:[{type:"field_value_selection",field:"state.state",name:_i18n.i18n.translate("xpack.transform.statusFilter",{defaultMessage:"Status"}),multiSelect:"or",options:Object.values(_common.TRANSFORM_STATE).map((function(val){return{value:val,name:val,view:(0,_columns.getTaskStateBadge)(val)}}))},{type:"field_value_selection",field:"mode",name:_i18n.i18n.translate("xpack.transform.modeFilter",{defaultMessage:"Mode"}),multiSelect:false,options:Object.values(_common2.TRANSFORM_MODE).map((function(val){return{value:val,name:val,view:_react.default.createElement(_eui.EuiBadge,{className:"transform__TaskModeBadge",color:"hollow"},val)}}))}]};var onTableChange=function onTableChange(_ref3){var _ref3$page=_ref3.page,page=_ref3$page===void 0?{index:0,size:10}:_ref3$page,_ref3$sort=_ref3.sort,sort=_ref3$sort===void 0?{field:_common2.TRANSFORM_LIST_COLUMN.ID,direction:"asc"}:_ref3$sort;var index=page.index,size=page.size;setPageIndex(index);setPageSize(size);var field=sort.field,direction=sort.direction;setSortField(field);setSortDirection(direction)};var selection={onSelectionChange:function onSelectionChange(selected){return setTransformSelection(selected)}};return _react.default.createElement("div",{"data-test-subj":"transformListTableContainer"},_react.default.createElement(_eui.EuiInMemoryTable,{allowNeutralSort:false,className:"transform__TransformTable",columns:columns,error:searchError,hasActions:false,isExpandable:true,isSelectable:false,items:filterActive?filteredTransforms:transforms,itemId:_common2.TRANSFORM_LIST_COLUMN.ID,itemIdToExpandedRowMap:itemIdToExpandedRowMap,loading:isLoading||transformsLoading,onTableChange:onTableChange,pagination:pagination,rowProps:function rowProps(item){return{"data-test-subj":"transformListRow row-".concat(item.id)}},selection:selection,sorting:sorting,search:search,"data-test-subj":"transformListTable ".concat(isLoading||transformsLoading?"loading":"loaded")}))};exports.TransformList=TransformList},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CreateTransformButton",{enumerable:true,get:function get(){return _create_transform_button.CreateTransformButton}});var _create_transform_button=__webpack_require__(781)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CreateTransformButton=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _eui=__webpack_require__(23);var _react2=__webpack_require__(24);var _authorization=__webpack_require__(56);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var CreateTransformButton=function CreateTransformButton(_ref){var onClick=_ref.onClick;var _useContext=(0,_react.useContext)(_authorization.AuthorizationContext),capabilities=_useContext.capabilities;var disabled=!capabilities.canCreateTransform||!capabilities.canPreviewTransform||!capabilities.canStartStopTransform;var createTransformButton=_react.default.createElement(_eui.EuiButton,{disabled:disabled,fill:true,onClick:onClick,iconType:"plusInCircle","data-test-subj":"transformButtonCreate"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.transform.transformList.createTransformButton",defaultMessage:"Create a transform"}));if(disabled){return _react.default.createElement(_eui.EuiToolTip,{position:"top",content:(0,_authorization.createCapabilityFailureMessage)("canCreateTransform")},createTransformButton)}return createTransformButton};exports.CreateTransformButton=CreateTransformButton},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RefreshTransformListButton",{enumerable:true,get:function get(){return _refresh_transform_list_button.RefreshTransformListButton}});var _refresh_transform_list_button=__webpack_require__(783)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RefreshTransformListButton=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _eui=__webpack_require__(23);var _react2=__webpack_require__(24);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var RefreshTransformListButton=function RefreshTransformListButton(_ref){var onClick=_ref.onClick,isLoading=_ref.isLoading;return _react.default.createElement(_eui.EuiButton,{color:"secondary",iconType:"refresh","data-test-subj":"transformRefreshTransformListButton",onClick:onClick,isLoading:isLoading},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.transform.transformList.refreshButtonLabel",defaultMessage:"Reload"}))};exports.RefreshTransformListButton=RefreshTransformListButton},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getColumns=exports.getTaskStateBadge=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _i18n=__webpack_require__(0);var _react2=__webpack_require__(24);var _eui=__webpack_require__(23);var _common=__webpack_require__(60);var _common2=__webpack_require__(44);var _actions=__webpack_require__(785);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var STATE_COLOR;(function(STATE_COLOR){STATE_COLOR["aborting"]="warning";STATE_COLOR["failed"]="danger";STATE_COLOR["indexing"]="primary";STATE_COLOR["started"]="primary";STATE_COLOR["stopped"]="hollow";STATE_COLOR["stopping"]="hollow"})(STATE_COLOR||(STATE_COLOR={}));var getTaskStateBadge=function getTaskStateBadge(state,reason){var color=STATE_COLOR[state];if(state===_common.TRANSFORM_STATE.FAILED&&reason!==undefined){return _react.default.createElement(_eui.EuiToolTip,{content:reason},_react.default.createElement(_eui.EuiBadge,{className:"transform__TaskStateBadge",color:color},state))}return _react.default.createElement(_eui.EuiBadge,{className:"transform__TaskStateBadge",color:color},state)};exports.getTaskStateBadge=getTaskStateBadge;var getColumns=function getColumns(expandedRowItemIds,setExpandedRowItemIds,transformSelection){var actions=(0,_actions.getActions)({forceDisable:transformSelection.length>0});function toggleDetails(item){var index=expandedRowItemIds.indexOf(item.config.id);if(index!==-1){expandedRowItemIds.splice(index,1);setExpandedRowItemIds(_toConsumableArray(expandedRowItemIds))}else{expandedRowItemIds.push(item.config.id)}setExpandedRowItemIds(_toConsumableArray(expandedRowItemIds))}var columns=[{name:_react.default.createElement(_eui.EuiScreenReaderOnly,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.transform.transformList.showDetailsColumn.screenReaderDescription",defaultMessage:"This column contains clickable controls for showing more details on each transform"}))),align:_eui.RIGHT_ALIGNMENT,width:"40px",isExpander:true,render:function render(item){return _react.default.createElement(_eui.EuiButtonIcon,{onClick:function onClick(){return toggleDetails(item)},"aria-label":expandedRowItemIds.includes(item.config.id)?_i18n.i18n.translate("xpack.transform.transformList.rowCollapse",{defaultMessage:"Hide details for {transformId}",values:{transformId:item.config.id}}):_i18n.i18n.translate("xpack.transform.transformList.rowExpand",{defaultMessage:"Show details for {transformId}",values:{transformId:item.config.id}}),iconType:expandedRowItemIds.includes(item.config.id)?"arrowUp":"arrowDown","data-test-subj":"transformListRowDetailsToggle"})}},{field:_common2.TRANSFORM_LIST_COLUMN.ID,"data-test-subj":"transformListColumnId",name:"ID",sortable:true,truncateText:true,scope:"row"},{field:_common2.TRANSFORM_LIST_COLUMN.DESCRIPTION,"data-test-subj":"transformListColumnDescription",name:_i18n.i18n.translate("xpack.transform.description",{defaultMessage:"Description"}),sortable:true,truncateText:true},{field:_common2.TRANSFORM_LIST_COLUMN.CONFIG_SOURCE_INDEX,"data-test-subj":"transformListColumnSourceIndex",name:_i18n.i18n.translate("xpack.transform.sourceIndex",{defaultMessage:"Source index"}),sortable:true,truncateText:true},{field:_common2.TRANSFORM_LIST_COLUMN.CONFIG_DEST_INDEX,"data-test-subj":"transformListColumnDestinationIndex",name:_i18n.i18n.translate("xpack.transform.destinationIndex",{defaultMessage:"Destination index"}),sortable:true,truncateText:true},{name:_i18n.i18n.translate("xpack.transform.status",{defaultMessage:"Status"}),"data-test-subj":"transformListColumnStatus",sortable:function sortable(item){return item.stats.state},truncateText:true,render:function render(item){return getTaskStateBadge(item.stats.state,item.stats.reason)},width:"100px"},{name:_i18n.i18n.translate("xpack.transform.mode",{defaultMessage:"Mode"}),"data-test-subj":"transformListColumnMode",sortable:function sortable(item){return item.mode},truncateText:true,render:function render(item){var mode=item.mode;var color="hollow";return _react.default.createElement(_eui.EuiBadge,{color:color},mode)},width:"100px"},{name:_i18n.i18n.translate("xpack.transform.progress",{defaultMessage:"Progress"}),"data-test-subj":"transformListColumnProgress",sortable:function sortable(item){return(0,_common2.getTransformProgress)(item)||0},truncateText:true,render:function render(item){var progress=(0,_common2.getTransformProgress)(item);var isBatchTransform=typeof item.config.sync==="undefined";if(progress===undefined&&isBatchTransform===true){return null}return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},isBatchTransform&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexItem,{style:{width:"40px"},grow:false},_react.default.createElement(_eui.EuiProgress,{value:progress,max:100,color:"primary",size:"m","data-test-subj":"transformListProgress"},progress,"%")),_react.default.createElement(_eui.EuiFlexItem,{style:{width:"35px"},grow:false},_react.default.createElement(_eui.EuiText,{size:"xs"},"".concat(progress,"%")))),!isBatchTransform&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexItem,{style:{width:"40px"},grow:false},item.stats.state!==_common.TRANSFORM_STATE.STOPPED&&item.stats.state!==_common.TRANSFORM_STATE.FAILED&&_react.default.createElement(_eui.EuiProgress,{color:"primary",size:"m"}),(item.stats.state===_common.TRANSFORM_STATE.STOPPED||item.stats.state===_common.TRANSFORM_STATE.FAILED)&&_react.default.createElement(_eui.EuiProgress,{value:0,max:100,color:"primary",size:"m"})),_react.default.createElement(_eui.EuiFlexItem,{style:{width:"35px"},grow:false}," ")))},width:"100px"},{name:_i18n.i18n.translate("xpack.transform.tableActionLabel",{defaultMessage:"Actions"}),actions:actions,width:"200px"}];return columns};exports.getColumns=getColumns},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getActions=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _common=__webpack_require__(60);var _action_clone=__webpack_require__(786);var _action_start=__webpack_require__(248);var _action_stop=__webpack_require__(249);var _action_delete=__webpack_require__(250);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getActions=function getActions(_ref){var forceDisable=_ref.forceDisable;return[{isPrimary:true,render:function render(item){if(item.stats.state===_common.TRANSFORM_STATE.STOPPED){return _react.default.createElement(_action_start.StartAction,{items:[item],forceDisable:forceDisable})}return _react.default.createElement(_action_stop.StopAction,{items:[item],forceDisable:forceDisable})}},{render:function render(item){return _react.default.createElement(_action_clone.CloneAction,{itemId:item.id})}},{render:function render(item){return _react.default.createElement(_action_delete.DeleteAction,{items:[item],forceDisable:forceDisable})}}]};exports.getActions=getActions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CloneAction=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _reactRouterDom=__webpack_require__(33);var _i18n=__webpack_require__(0);var _eui=__webpack_require__(23);var _authorization=__webpack_require__(56);var _constants=__webpack_require__(70);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var CloneAction=function CloneAction(_ref){var itemId=_ref.itemId;var history=(0,_reactRouterDom.useHistory)();var canCreateTransform=(0,_react.useContext)(_authorization.AuthorizationContext).capabilities.canCreateTransform;var buttonCloneText=_i18n.i18n.translate("xpack.transform.transformList.cloneActionName",{defaultMessage:"Clone"});function clickHandler(){history.push("".concat(_constants.CLIENT_BASE_PATH).concat(_constants.SECTION_SLUG.CLONE_TRANSFORM,"/").concat(itemId))}var cloneButton=_react.default.createElement(_eui.EuiButtonEmpty,{size:"xs",color:"text",disabled:!canCreateTransform,iconType:"copy",onClick:clickHandler,"aria-label":buttonCloneText},buttonCloneText);if(!canCreateTransform){var content=(0,_authorization.createCapabilityFailureMessage)("canStartStopTransform");return _react.default.createElement(_eui.EuiToolTip,{position:"top",content:content},cloneButton)}return _react.default.createElement(_react.default.Fragment,null,cloneButton)};exports.CloneAction=CloneAction},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ExpandedRow=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _eui=__webpack_require__(23);var _i18n=__webpack_require__(0);var _date_utils=__webpack_require__(125);var _expanded_row_details_pane=__webpack_require__(788);var _expanded_row_json_pane=__webpack_require__(789);var _expanded_row_messages_pane=__webpack_require__(790);var _expanded_row_preview_pane=__webpack_require__(792);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function getItemDescription(value){if(_typeof(value)==="object"){return JSON.stringify(value)}return value.toString()}var ExpandedRow=function ExpandedRow(_ref){var item=_ref.item;var stateValues=_objectSpread({},item.stats);delete stateValues.stats;delete stateValues.checkpointing;var stateItems=[];stateItems.push({title:"ID",description:item.id},{title:"state",description:item.stats.state});if(item.stats.node!==undefined){stateItems.push({title:"node.name",description:item.stats.node.name})}var state={title:"State",items:stateItems,position:"left"};var checkpointingItems=[];if(item.stats.checkpointing.last!==undefined){checkpointingItems.push({title:"last.checkpoint",description:item.stats.checkpointing.last.checkpoint});if(item.stats.checkpointing.last.timestamp_millis!==undefined){checkpointingItems.push({title:"last.timestamp",description:(0,_date_utils.formatHumanReadableDateTimeSeconds)(item.stats.checkpointing.last.timestamp_millis)});checkpointingItems.push({title:"last.timestamp_millis",description:item.stats.checkpointing.last.timestamp_millis})}}if(item.stats.checkpointing.next!==undefined){checkpointingItems.push({title:"next.checkpoint",description:item.stats.checkpointing.next.checkpoint});if(item.stats.checkpointing.next.checkpoint_progress!==undefined){checkpointingItems.push({title:"next.checkpoint_progress.total_docs",description:item.stats.checkpointing.next.checkpoint_progress.total_docs});checkpointingItems.push({title:"next.checkpoint_progress.docs_remaining",description:item.stats.checkpointing.next.checkpoint_progress.docs_remaining});checkpointingItems.push({title:"next.checkpoint_progress.percent_complete",description:item.stats.checkpointing.next.checkpoint_progress.percent_complete})}}var checkpointing={title:"Checkpointing",items:checkpointingItems,position:"left"};var stats={title:"Stats",items:Object.entries(item.stats.stats).map((function(s){return{title:s[0].toString(),description:getItemDescription(s[1])}})),position:"right"};var tabs=[{id:"transform-details-tab-".concat(item.id),"data-test-subj":"transformDetailsTab",name:_i18n.i18n.translate("xpack.transform.transformList.transformDetails.tabs.transformSettingsLabel",{defaultMessage:"Transform details"}),content:_react.default.createElement(_expanded_row_details_pane.ExpandedRowDetailsPane,{sections:[state,checkpointing,stats]})},{id:"transform-json-tab-".concat(item.id),"data-test-subj":"transformJsonTab",name:"JSON",content:_react.default.createElement(_expanded_row_json_pane.ExpandedRowJsonPane,{json:item.config})},{id:"transform-messages-tab-".concat(item.id),"data-test-subj":"transformMessagesTab",name:_i18n.i18n.translate("xpack.transform.transformList.transformDetails.tabs.transformMessagesLabel",{defaultMessage:"Messages"}),content:_react.default.createElement(_expanded_row_messages_pane.ExpandedRowMessagesPane,{transformId:item.id})},{id:"transform-preview-tab-".concat(item.id),"data-test-subj":"transformPreviewTab",name:_i18n.i18n.translate("xpack.transform.transformList.transformDetails.tabs.transformPreviewLabel",{defaultMessage:"Preview"}),content:_react.default.createElement(_expanded_row_preview_pane.ExpandedRowPreviewPane,{transformConfig:item.config})}];return _react.default.createElement(_eui.EuiTabbedContent,{size:"s",tabs:tabs,initialSelectedTab:tabs[0],onTabClick:function onTabClick(){},expand:false,style:{width:"100%"}})};exports.ExpandedRow=ExpandedRow},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExpandedRowDetailsPane=exports.Section=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _eui=__webpack_require__(23);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var Section=function Section(_ref){var section=_ref.section;if(section.items.length===0){return null}return _react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("span",null,section.title)),_react.default.createElement(_eui.EuiDescriptionList,{compressed:true,type:"column",listItems:section.items}))};exports.Section=Section;var ExpandedRowDetailsPane=function ExpandedRowDetailsPane(_ref2){var sections=_ref2.sections;return _react.default.createElement("div",{"data-test-subj":"transformDetailsTabContent"},_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{style:{width:"50%"}},sections.filter((function(s){return s.position==="left"})).map((function(s){return _react.default.createElement(_react.Fragment,{key:s.title},_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(Section,{section:s}))}))),_react.default.createElement(_eui.EuiFlexItem,{style:{width:"50%"}},sections.filter((function(s){return s.position==="right"})).map((function(s){return _react.default.createElement(_react.Fragment,{key:s.title},_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(Section,{section:s}))})))))};exports.ExpandedRowDetailsPane=ExpandedRowDetailsPane},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExpandedRowJsonPane=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _eui=__webpack_require__(23);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ExpandedRowJsonPane=function ExpandedRowJsonPane(_ref){var json=_ref.json;return _react.default.createElement("div",{"data-test-subj":"transformJsonTabContent"},_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiCodeEditor,{value:JSON.stringify(json,null,2),readOnly:true,mode:"json",style:{width:"100%"},theme:"textmate"})),_react.default.createElement(_eui.EuiFlexItem,{grow:false}," ")))};exports.ExpandedRowJsonPane=ExpandedRowJsonPane},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExpandedRowMessagesPane=void 0;var _react=_interopRequireWildcard(__webpack_require__(22));var _eui=__webpack_require__(23);var _format=__webpack_require__(34);var _i18n=__webpack_require__(0);var _eui_theme_light=_interopRequireDefault(__webpack_require__(39));var _use_api=__webpack_require__(53);var _job_icon=__webpack_require__(791);var _common=__webpack_require__(44);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var TIME_FORMAT="YYYY-MM-DD HH:mm:ss";var ExpandedRowMessagesPane=function ExpandedRowMessagesPane(_ref){var transformId=_ref.transformId;var _useState=(0,_react.useState)([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=(0,_react.useState)(""),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];var _useState7=(0,_react.useState)(0),_useState8=_slicedToArray(_useState7,2),pageIndex=_useState8[0],setPageIndex=_useState8[1];var _useState9=(0,_react.useState)(10),_useState10=_slicedToArray(_useState9,2),pageSize=_useState10[0],setPageSize=_useState10[1];var api=(0,_use_api.useApi)();var getMessagesFactory=function getMessagesFactory(){var concurrentLoads=0;return(function(){var _getMessages=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var messagesResp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;concurrentLoads++;if(!(concurrentLoads>1)){_context.next=4;break}return _context.abrupt("return");case 4:setIsLoading(true);_context.next=7;return api.getTransformAuditMessages(transformId);case 7:messagesResp=_context.sent;setIsLoading(false);setMessages(messagesResp);concurrentLoads--;if(concurrentLoads>0){concurrentLoads=0;getMessages()}_context.next=18;break;case 14:_context.prev=14;_context.t0=_context["catch"](0);setIsLoading(false);setErrorMessage(_i18n.i18n.translate("xpack.transform.transformList.transformDetails.messagesPane.errorMessage",{defaultMessage:"Messages could not be loaded"}));case 18:case"end":return _context.stop()}}}),_callee,null,[[0,14]])})));function getMessages(){return _getMessages.apply(this,arguments)}return getMessages}())};(0,_common.useRefreshTransformList)({onRefresh:getMessagesFactory()});var columns=[{name:"",render:function render(message){return _react.default.createElement(_job_icon.JobIcon,{message:message})},width:"".concat(_eui_theme_light.default.euiSizeXL,"px")},{name:_i18n.i18n.translate("xpack.transform.transformList.transformDetails.messagesPane.timeLabel",{defaultMessage:"Time"}),render:function render(message){return(0,_format.formatDate)(message.timestamp,TIME_FORMAT)}},{field:"node_name",name:_i18n.i18n.translate("xpack.transform.transformList.transformDetails.messagesPane.nodeLabel",{defaultMessage:"Node"})},{field:"message",name:_i18n.i18n.translate("xpack.transform.transformList.transformDetails.messagesPane.messageLabel",{defaultMessage:"Message"}),width:"50%"}];var getPageOfMessages=function getPageOfMessages(_ref2){var index=_ref2.index,size=_ref2.size;var list=messages;var listLength=list.length;var pageStart=index*size;return{pageOfMessages:list.slice(pageStart,pageStart+size),totalItemCount:listLength}};var onChange=function onChange(_ref3){var _ref3$page=_ref3.page,page=_ref3$page===void 0?{index:0,size:10}:_ref3$page;var index=page.index,size=page.size;setPageIndex(index);setPageSize(size)};var _getPageOfMessages=getPageOfMessages({index:pageIndex,size:pageSize}),pageOfMessages=_getPageOfMessages.pageOfMessages,totalItemCount=_getPageOfMessages.totalItemCount;var pagination={pageIndex:pageIndex,pageSize:pageSize,totalItemCount:totalItemCount,pageSizeOptions:[10,20,50],hidePerPageOptions:false};return _react.default.createElement("div",{"data-test-subj":"transformMessagesTabContent"},_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiBasicTable,{className:"transform__TransformTable__messagesPaneTable",items:pageOfMessages,columns:columns,compressed:true,loading:isLoading,error:errorMessage,pagination:pagination,onChange:onChange}))};exports.ExpandedRowMessagesPane=ExpandedRowMessagesPane},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JobIcon=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _eui=__webpack_require__(23);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var INFO="info",WARNING="warning",ERROR="error";var JobIcon=function JobIcon(_ref){var message=_ref.message,_ref$showTooltip=_ref.showTooltip,showTooltip=_ref$showTooltip===void 0?false:_ref$showTooltip;if(message===undefined){return _react.default.createElement("span",null)}var color="primary";var icon="alert";if(message.level===INFO){color="primary"}else if(message.level===WARNING){color="warning"}else if(message.level===ERROR){color="danger"}if(showTooltip){return _react.default.createElement(_eui.EuiToolTip,{position:"bottom",content:message.text},_react.default.createElement(_eui.EuiIcon,{type:icon,color:color}))}else{return _react.default.createElement(_eui.EuiIcon,{type:icon,color:color})}};exports.JobIcon=JobIcon},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExpandedRowPreviewPane=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _common=__webpack_require__(44);var _step_define=__webpack_require__(245);var _pivot_preview=__webpack_require__(124);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ExpandedRowPreviewPane=function ExpandedRowPreviewPane(_ref){var transformConfig=_ref.transformConfig;var previewConfig=(0,_step_define.applyTransformConfigToDefineState)((0,_step_define.getDefaultStepDefineState)({}),transformConfig);var indexPatternTitle=Array.isArray(transformConfig.source.index)?transformConfig.source.index.join(","):transformConfig.source.index;return _react.default.createElement(_pivot_preview.PivotPreview,{aggs:previewConfig.aggList,groupBy:previewConfig.groupByList,indexPatternTitle:indexPatternTitle,query:(0,_common.getPivotQuery)(previewConfig.searchQuery),showHeader:false})};exports.ExpandedRowPreviewPane=ExpandedRowPreviewPane},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransformStatsBar=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _i18n=__webpack_require__(0);var _common=__webpack_require__(60);var _common2=__webpack_require__(44);var _stats_bar=__webpack_require__(794);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createTranformStats(transformsList){var transformStats={total:{label:_i18n.i18n.translate("xpack.transform.statsBar.totalTransformsLabel",{defaultMessage:"Total transforms"}),value:0,show:true},batch:{label:_i18n.i18n.translate("xpack.transform.statsBar.batchTransformsLabel",{defaultMessage:"Batch"}),value:0,show:true},continuous:{label:_i18n.i18n.translate("xpack.transform.statsBar.continuousTransformsLabel",{defaultMessage:"Continuous"}),value:0,show:true},failed:{label:_i18n.i18n.translate("xpack.transform.statsBar.failedTransformsLabel",{defaultMessage:"Failed"}),value:0,show:false},started:{label:_i18n.i18n.translate("xpack.transform.statsBar.startedTransformsLabel",{defaultMessage:"Started"}),value:0,show:true}};if(transformsList===undefined){return transformStats}var failedTransforms=0;var startedTransforms=0;transformsList.forEach((function(transform){if(transform.mode===_common2.TRANSFORM_MODE.CONTINUOUS){transformStats.continuous.value++}else if(transform.mode===_common2.TRANSFORM_MODE.BATCH){transformStats.batch.value++}if(transform.stats.state===_common.TRANSFORM_STATE.FAILED){failedTransforms++}else if(transform.stats.state===_common.TRANSFORM_STATE.STARTED){startedTransforms++}}));transformStats.total.value=transformsList.length;transformStats.started.value=startedTransforms;if(failedTransforms!==0){transformStats.failed.value=failedTransforms;transformStats.failed.show=true}else{transformStats.failed.show=false}return transformStats}var TransformStatsBar=function TransformStatsBar(_ref){var transformsList=_ref.transformsList;var transformStats=createTranformStats(transformsList);return _react.default.createElement(_stats_bar.StatsBar,{stats:transformStats,dataTestSub:"transformStatsBar"})};exports.TransformStatsBar=TransformStatsBar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"StatsBar",{enumerable:true,get:function get(){return _stats_bar.StatsBar}});Object.defineProperty(exports,"TransformStatsBarStats",{enumerable:true,get:function get(){return _stats_bar.TransformStatsBarStats}});var _stats_bar=__webpack_require__(795)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StatsBar=void 0;var _react=_interopRequireDefault(__webpack_require__(22));var _stat=__webpack_require__(796);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StatsBar=function StatsBar(_ref){var stats=_ref.stats,dataTestSub=_ref.dataTestSub;var statsList=Object.keys(stats).map((function(k){return stats[k]}));return _react.default.createElement("div",{className:"transformStatsBar","data-test-subj":dataTestSub},statsList.filter((function(s){return s.show})).map((function(s){return _react.default.createElement(_stat.Stat,{key:s.label,stat:s})})))};exports.StatsBar=StatsBar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Stat=void 0;var _react=_interopRequireDefault(__webpack_require__(22));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Stat=function Stat(_ref){var stat=_ref.stat;return _react.default.createElement("span",{className:"transformStat"},_react.default.createElement("span",null,stat.label),": ",_react.default.createElement("strong",null,stat.value))};exports.Stat=Stat}])]);