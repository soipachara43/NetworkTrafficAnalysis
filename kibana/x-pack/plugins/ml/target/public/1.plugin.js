(window["ml_bundle_jsonpfunction"]=window["ml_bundle_jsonpfunction"]||[]).push([[1],Array(51).concat([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.basePath=basePath;exports.ml=void 0;var _http_service=__webpack_require__(116);var _annotations=__webpack_require__(884);var _data_frame_analytics=__webpack_require__(885);var _filters=__webpack_require__(886);var _results=__webpack_require__(887);var _jobs=__webpack_require__(888);var _datavisualizer=__webpack_require__(889);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function basePath(){return"/api/ml"}var ml={getJobs:function getJobs(obj){var jobId=obj&&obj.jobId?"/".concat(obj.jobId):"";return(0,_http_service.http)({path:"".concat(basePath(),"/anomaly_detectors").concat(jobId)})},getJobStats:function getJobStats(obj){var jobId=obj&&obj.jobId?"/".concat(obj.jobId):"";return(0,_http_service.http)({path:"".concat(basePath(),"/anomaly_detectors").concat(jobId,"/_stats")})},addJob:function addJob(_ref){var jobId=_ref.jobId,job=_ref.job;var body=JSON.stringify(job);return(0,_http_service.http)({path:"".concat(basePath(),"/anomaly_detectors/").concat(jobId),method:"PUT",body:body})},openJob:function openJob(_ref2){var jobId=_ref2.jobId;return(0,_http_service.http)({path:"".concat(basePath(),"/anomaly_detectors/").concat(jobId,"/_open"),method:"POST"})},closeJob:function closeJob(_ref3){var jobId=_ref3.jobId;return(0,_http_service.http)({path:"".concat(basePath(),"/anomaly_detectors/").concat(jobId,"/_close"),method:"POST"})},deleteJob:function deleteJob(_ref4){var jobId=_ref4.jobId;return(0,_http_service.http)({path:"".concat(basePath(),"/anomaly_detectors/").concat(jobId),method:"DELETE"})},forceDeleteJob:function forceDeleteJob(_ref5){var jobId=_ref5.jobId;return(0,_http_service.http)({path:"".concat(basePath(),"/anomaly_detectors/").concat(jobId,"?force=true"),method:"DELETE"})},updateJob:function updateJob(_ref6){var jobId=_ref6.jobId,job=_ref6.job;var body=JSON.stringify(job);return(0,_http_service.http)({path:"".concat(basePath(),"/anomaly_detectors/").concat(jobId,"/_update"),method:"POST",body:body})},estimateBucketSpan:function estimateBucketSpan(obj){var body=JSON.stringify(obj);return(0,_http_service.http)({path:"".concat(basePath(),"/validate/estimate_bucket_span"),method:"POST",body:body})},validateJob:function validateJob(payload){var body=JSON.stringify(payload);return(0,_http_service.http)({path:"".concat(basePath(),"/validate/job"),method:"POST",body:body})},validateCardinality$:function validateCardinality$(job){var body=JSON.stringify(job);return(0,_http_service.http$)({path:"".concat(basePath(),"/validate/cardinality"),method:"POST",body:body})},getDatafeeds:function getDatafeeds(obj){var datafeedId=obj&&obj.datafeedId?"/".concat(obj.datafeedId):"";return(0,_http_service.http)({path:"".concat(basePath(),"/datafeeds").concat(datafeedId)})},getDatafeedStats:function getDatafeedStats(obj){var datafeedId=obj&&obj.datafeedId?"/".concat(obj.datafeedId):"";return(0,_http_service.http)({path:"".concat(basePath(),"/datafeeds").concat(datafeedId,"/_stats")})},addDatafeed:function addDatafeed(_ref7){var datafeedId=_ref7.datafeedId,datafeedConfig=_ref7.datafeedConfig;var body=JSON.stringify(datafeedConfig);return(0,_http_service.http)({path:"".concat(basePath(),"/datafeeds/").concat(datafeedId),method:"PUT",body:body})},updateDatafeed:function updateDatafeed(_ref8){var datafeedId=_ref8.datafeedId,datafeedConfig=_ref8.datafeedConfig;var body=JSON.stringify(datafeedConfig);return(0,_http_service.http)({path:"".concat(basePath(),"/datafeeds/").concat(datafeedId,"/_update"),method:"POST",body:body})},deleteDatafeed:function deleteDatafeed(_ref9){var datafeedId=_ref9.datafeedId;return(0,_http_service.http)({path:"".concat(basePath(),"/datafeeds/").concat(datafeedId),method:"DELETE"})},forceDeleteDatafeed:function forceDeleteDatafeed(_ref10){var datafeedId=_ref10.datafeedId;return(0,_http_service.http)({path:"".concat(basePath(),"/datafeeds/").concat(datafeedId,"?force=true"),method:"DELETE"})},startDatafeed:function startDatafeed(_ref11){var datafeedId=_ref11.datafeedId,start=_ref11.start,end=_ref11.end;var body=JSON.stringify(_objectSpread({},start!==undefined?{start:start}:{},{},end!==undefined?{end:end}:{}));return(0,_http_service.http)({path:"".concat(basePath(),"/datafeeds/").concat(datafeedId,"/_start"),method:"POST",body:body})},stopDatafeed:function stopDatafeed(_ref12){var datafeedId=_ref12.datafeedId;return(0,_http_service.http)({path:"".concat(basePath(),"/datafeeds/").concat(datafeedId,"/_stop"),method:"POST"})},datafeedPreview:function datafeedPreview(_ref13){var datafeedId=_ref13.datafeedId;return(0,_http_service.http)({path:"".concat(basePath(),"/datafeeds/").concat(datafeedId,"/_preview"),method:"GET"})},validateDetector:function validateDetector(_ref14){var detector=_ref14.detector;var body=JSON.stringify(detector);return(0,_http_service.http)({path:"".concat(basePath(),"/anomaly_detectors/_validate/detector"),method:"POST",body:body})},forecast:function forecast(_ref15){var jobId=_ref15.jobId,duration=_ref15.duration;var body=JSON.stringify(_objectSpread({},duration!==undefined?{duration:duration}:{}));return(0,_http_service.http)({path:"".concat(basePath(),"/anomaly_detectors/").concat(jobId,"/_forecast"),method:"POST",body:body})},overallBuckets:function overallBuckets(_ref16){var jobId=_ref16.jobId,topN=_ref16.topN,bucketSpan=_ref16.bucketSpan,start=_ref16.start,end=_ref16.end;var body=JSON.stringify({topN:topN,bucketSpan:bucketSpan,start:start,end:end});return(0,_http_service.http)({path:"".concat(basePath(),"/anomaly_detectors/").concat(jobId,"/results/overall_buckets"),method:"POST",body:body})},hasPrivileges:function hasPrivileges(obj){var body=JSON.stringify(obj);return(0,_http_service.http)({path:"".concat(basePath(),"/_has_privileges"),method:"POST",body:body})},checkMlPrivileges:function checkMlPrivileges(){return(0,_http_service.http)({path:"".concat(basePath(),"/ml_capabilities"),method:"GET"})},checkManageMLPrivileges:function checkManageMLPrivileges(){return(0,_http_service.http)({path:"".concat(basePath(),"/ml_capabilities"),method:"GET",query:{ignoreSpaces:true}})},getNotificationSettings:function getNotificationSettings(){return(0,_http_service.http)({path:"".concat(basePath(),"/notification_settings"),method:"GET"})},getFieldCaps:function getFieldCaps(_ref17){var index=_ref17.index,fields=_ref17.fields;var body=JSON.stringify(_objectSpread({},index!==undefined?{index:index}:{},{},fields!==undefined?{fields:fields}:{}));return(0,_http_service.http)({path:"".concat(basePath(),"/indices/field_caps"),method:"POST",body:body})},recognizeIndex:function recognizeIndex(_ref18){var indexPatternTitle=_ref18.indexPatternTitle;return(0,_http_service.http)({path:"".concat(basePath(),"/modules/recognize/").concat(indexPatternTitle),method:"GET"})},listDataRecognizerModules:function listDataRecognizerModules(){return(0,_http_service.http)({path:"".concat(basePath(),"/modules/get_module"),method:"GET"})},getDataRecognizerModule:function getDataRecognizerModule(_ref19){var moduleId=_ref19.moduleId;return(0,_http_service.http)({path:"".concat(basePath(),"/modules/get_module/").concat(moduleId),method:"GET"})},dataRecognizerModuleJobsExist:function dataRecognizerModuleJobsExist(_ref20){var moduleId=_ref20.moduleId;return(0,_http_service.http)({path:"".concat(basePath(),"/modules/jobs_exist/").concat(moduleId),method:"GET"})},setupDataRecognizerConfig:function setupDataRecognizerConfig(_ref21){var moduleId=_ref21.moduleId,prefix=_ref21.prefix,groups=_ref21.groups,indexPatternName=_ref21.indexPatternName,query=_ref21.query,useDedicatedIndex=_ref21.useDedicatedIndex,startDatafeed=_ref21.startDatafeed,start=_ref21.start,end=_ref21.end,jobOverrides=_ref21.jobOverrides,estimateModelMemory=_ref21.estimateModelMemory;var body=JSON.stringify({prefix:prefix,groups:groups,indexPatternName:indexPatternName,query:query,useDedicatedIndex:useDedicatedIndex,startDatafeed:startDatafeed,start:start,end:end,jobOverrides:jobOverrides,estimateModelMemory:estimateModelMemory});return(0,_http_service.http)({path:"".concat(basePath(),"/modules/setup/").concat(moduleId),method:"POST",body:body})},getVisualizerFieldStats:function getVisualizerFieldStats(_ref22){var indexPatternTitle=_ref22.indexPatternTitle,query=_ref22.query,timeFieldName=_ref22.timeFieldName,earliest=_ref22.earliest,latest=_ref22.latest,samplerShardSize=_ref22.samplerShardSize,interval=_ref22.interval,fields=_ref22.fields,maxExamples=_ref22.maxExamples;var body=JSON.stringify({query:query,timeFieldName:timeFieldName,earliest:earliest,latest:latest,samplerShardSize:samplerShardSize,interval:interval,fields:fields,maxExamples:maxExamples});return(0,_http_service.http)({path:"".concat(basePath(),"/data_visualizer/get_field_stats/").concat(indexPatternTitle),method:"POST",body:body})},getVisualizerOverallStats:function getVisualizerOverallStats(_ref23){var indexPatternTitle=_ref23.indexPatternTitle,query=_ref23.query,timeFieldName=_ref23.timeFieldName,earliest=_ref23.earliest,latest=_ref23.latest,samplerShardSize=_ref23.samplerShardSize,aggregatableFields=_ref23.aggregatableFields,nonAggregatableFields=_ref23.nonAggregatableFields;var body=JSON.stringify({query:query,timeFieldName:timeFieldName,earliest:earliest,latest:latest,samplerShardSize:samplerShardSize,aggregatableFields:aggregatableFields,nonAggregatableFields:nonAggregatableFields});return(0,_http_service.http)({path:"".concat(basePath(),"/data_visualizer/get_overall_stats/").concat(indexPatternTitle),method:"POST",body:body})},calendars:function calendars(obj){var _ref24=obj||{},calendarId=_ref24.calendarId,calendarIds=_ref24.calendarIds;var calendarIdsPathComponent="";if(calendarId){calendarIdsPathComponent="/".concat(calendarId)}else if(calendarIds){calendarIdsPathComponent="/".concat(calendarIds.join(","))}return(0,_http_service.http)({path:"".concat(basePath(),"/calendars").concat(calendarIdsPathComponent),method:"GET"})},addCalendar:function addCalendar(obj){var body=JSON.stringify(obj);return(0,_http_service.http)({path:"".concat(basePath(),"/calendars"),method:"PUT",body:body})},updateCalendar:function updateCalendar(obj){var calendarId=obj&&obj.calendarId?"/".concat(obj.calendarId):"";var body=JSON.stringify(obj);return(0,_http_service.http)({path:"".concat(basePath(),"/calendars").concat(calendarId),method:"PUT",body:body})},deleteCalendar:function deleteCalendar(_ref25){var calendarId=_ref25.calendarId;return(0,_http_service.http)({path:"".concat(basePath(),"/calendars/").concat(calendarId),method:"DELETE"})},mlNodeCount:function mlNodeCount(){return(0,_http_service.http)({path:"".concat(basePath(),"/ml_node_count"),method:"GET"})},mlInfo:function mlInfo(){return(0,_http_service.http)({path:"".concat(basePath(),"/info"),method:"GET"})},calculateModelMemoryLimit:function calculateModelMemoryLimit(_ref26){var analysisConfig=_ref26.analysisConfig,indexPattern=_ref26.indexPattern,query=_ref26.query,timeFieldName=_ref26.timeFieldName,earliestMs=_ref26.earliestMs,latestMs=_ref26.latestMs;var body=JSON.stringify({analysisConfig:analysisConfig,indexPattern:indexPattern,query:query,timeFieldName:timeFieldName,earliestMs:earliestMs,latestMs:latestMs});return(0,_http_service.http)({path:"".concat(basePath(),"/validate/calculate_model_memory_limit"),method:"POST",body:body})},getCardinalityOfFields:function getCardinalityOfFields(_ref27){var index=_ref27.index,fieldNames=_ref27.fieldNames,query=_ref27.query,timeFieldName=_ref27.timeFieldName,earliestMs=_ref27.earliestMs,latestMs=_ref27.latestMs;var body=JSON.stringify({index:index,fieldNames:fieldNames,query:query,timeFieldName:timeFieldName,earliestMs:earliestMs,latestMs:latestMs});return(0,_http_service.http)({path:"".concat(basePath(),"/fields_service/field_cardinality"),method:"POST",body:body})},getTimeFieldRange:function getTimeFieldRange(_ref28){var index=_ref28.index,timeFieldName=_ref28.timeFieldName,query=_ref28.query;var body=JSON.stringify({index:index,timeFieldName:timeFieldName,query:query});return(0,_http_service.http)({path:"".concat(basePath(),"/fields_service/time_field_range"),method:"POST",body:body})},esSearch:function esSearch(obj){var body=JSON.stringify(obj);return(0,_http_service.http)({path:"".concat(basePath(),"/es_search"),method:"POST",body:body})},esSearch$:function esSearch$(obj){var body=JSON.stringify(obj);return(0,_http_service.http$)({path:"".concat(basePath(),"/es_search"),method:"POST",body:body})},getIndices:function getIndices(){var tempBasePath="/api";return(0,_http_service.http)({path:"".concat(tempBasePath,"/index_management/indices"),method:"GET"})},annotations:_annotations.annotations,dataFrameAnalytics:_data_frame_analytics.dataFrameAnalytics,filters:_filters.filters,results:_results.results,jobs:_jobs.jobs,fileDatavisualizer:_datavisualizer.fileDatavisualizer};exports.ml=ml},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _constants=__webpack_require__(549);Object.keys(_constants).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _constants[key]}})}));var _es_query=__webpack_require__(550);Object.keys(_es_query).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _es_query[key]}})}));var _field_formats=__webpack_require__(215);Object.keys(_field_formats).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _field_formats[key]}})}));var _index_patterns=__webpack_require__(614);Object.keys(_index_patterns).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_patterns[key]}})}));var _kbn_field_types=__webpack_require__(300);Object.keys(_kbn_field_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _kbn_field_types[key]}})}));var _query=__webpack_require__(620);Object.keys(_query).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _query[key]}})}));var _search=__webpack_require__(169);Object.keys(_search).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _search[key]}})}));var _aggs=__webpack_require__(625);Object.keys(_aggs).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _aggs[key]}})}));var _types=__webpack_require__(633);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _utils=__webpack_require__(146);Object.keys(_utils).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _utils[key]}})}))},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.checkGetManagementMlJobs=checkGetManagementMlJobs;exports.checkGetJobsPrivilege=checkGetJobsPrivilege;exports.checkCreateJobsPrivilege=checkCreateJobsPrivilege;exports.checkFindFileStructurePrivilege=checkFindFileStructurePrivilege;exports.checkPermission=checkPermission;exports.createPermissionFailureMessage=createPermissionFailureMessage;var _i18n=__webpack_require__(1);var _license=__webpack_require__(73);var _privileges=__webpack_require__(882);var _get_privileges=__webpack_require__(883);var _management_urls=__webpack_require__(382);var privileges=(0,_privileges.getDefaultPrivileges)();function checkGetManagementMlJobs(){return new Promise((function(resolve,reject){(0,_get_privileges.getManageMlPrivileges)().then((function(_ref){var capabilities=_ref.capabilities,isPlatinumOrTrialLicense=_ref.isPlatinumOrTrialLicense,mlFeatureEnabledInSpace=_ref.mlFeatureEnabledInSpace;privileges=capabilities;var isManageML=Object.values(privileges).every((function(p){return p===true}));if(isManageML===true&&isPlatinumOrTrialLicense===true){return resolve({mlFeatureEnabledInSpace:mlFeatureEnabledInSpace})}else{window.location.href=_management_urls.ACCESS_DENIED_PATH;return reject()}}))}))}function checkGetJobsPrivilege(){return new Promise((function(resolve,reject){(0,_get_privileges.getPrivileges)().then((function(_ref2){var capabilities=_ref2.capabilities,isPlatinumOrTrialLicense=_ref2.isPlatinumOrTrialLicense;privileges=capabilities;if(privileges.canGetJobs||isPlatinumOrTrialLicense===false){return resolve(privileges)}else{window.location.href="#/access-denied";return reject()}}))}))}function checkCreateJobsPrivilege(){return new Promise((function(resolve,reject){(0,_get_privileges.getPrivileges)().then((function(_ref3){var capabilities=_ref3.capabilities,isPlatinumOrTrialLicense=_ref3.isPlatinumOrTrialLicense;privileges=capabilities;if(privileges.canCreateJob||isPlatinumOrTrialLicense===false){return resolve(privileges)}else{window.location.href="#/jobs";return reject()}}))}))}function checkFindFileStructurePrivilege(){return new Promise((function(resolve,reject){(0,_get_privileges.getPrivileges)().then((function(_ref4){var capabilities=_ref4.capabilities;privileges=capabilities;if(privileges.canFindFileStructure){return resolve(privileges)}else{window.location.href="#/access-denied";return reject()}}))}))}function checkPermission(privilegeType){var licenseHasExpired=(0,_license.hasLicenseExpired)();return privileges[privilegeType]===true&&licenseHasExpired!==true}function createPermissionFailureMessage(privilegeType){var message="";var licenseHasExpired=(0,_license.hasLicenseExpired)();if(licenseHasExpired){message=_i18n.i18n.translate("xpack.ml.privilege.licenseHasExpiredTooltip",{defaultMessage:"Your license has expired."})}else if(privilegeType==="canCreateJob"){message=_i18n.i18n.translate("xpack.ml.privilege.noPermission.createMLJobsTooltip",{defaultMessage:"You do not have permission to create Machine Learning jobs."})}else if(privilegeType==="canStartStopDatafeed"){message=_i18n.i18n.translate("xpack.ml.privilege.noPermission.startOrStopDatafeedsTooltip",{defaultMessage:"You do not have permission to start or stop datafeeds."})}else if(privilegeType==="canUpdateJob"){message=_i18n.i18n.translate("xpack.ml.privilege.noPermission.editJobsTooltip",{defaultMessage:"You do not have permission to edit jobs."})}else if(privilegeType==="canDeleteJob"){message=_i18n.i18n.translate("xpack.ml.privilege.noPermission.deleteJobsTooltip",{defaultMessage:"You do not have permission to delete jobs."})}else if(privilegeType==="canCreateCalendar"){message=_i18n.i18n.translate("xpack.ml.privilege.noPermission.createCalendarsTooltip",{defaultMessage:"You do not have permission to create calendars."})}else if(privilegeType==="canDeleteCalendar"){message=_i18n.i18n.translate("xpack.ml.privilege.noPermission.deleteCalendarsTooltip",{defaultMessage:"You do not have permission to delete calendars."})}else if(privilegeType==="canForecastJob"){message=_i18n.i18n.translate("xpack.ml.privilege.noPermission.runForecastsTooltip",{defaultMessage:"You do not have permission to run forecasts."})}return _i18n.i18n.translate("xpack.ml.privilege.pleaseContactAdministratorTooltip",{defaultMessage:"{message} Please contact your administrator.",values:{message:message}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"useMlKibana",{enumerable:true,get:function get(){return _kibana_context.useMlKibana}});Object.defineProperty(exports,"StartServices",{enumerable:true,get:function get(){return _kibana_context.StartServices}});Object.defineProperty(exports,"MlKibanaReactContextValue",{enumerable:true,get:function get(){return _kibana_context.MlKibanaReactContextValue}});Object.defineProperty(exports,"useUiSettings",{enumerable:true,get:function get(){return _use_ui_settings_context.useUiSettings}});Object.defineProperty(exports,"useTimefilter",{enumerable:true,get:function get(){return _use_timefilter.useTimefilter}});var _kibana_context=__webpack_require__(233);var _use_ui_settings_context=__webpack_require__(150);var _use_timefilter=__webpack_require__(893)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mlJobService=void 0;var _lodash=_interopRequireDefault(__webpack_require__(49));var _moment=_interopRequireDefault(__webpack_require__(32));var _i18n=__webpack_require__(1);var _ml_api_service=__webpack_require__(51);var _messagebar=__webpack_require__(91);var _url_utils=__webpack_require__(907);var _job_utils=__webpack_require__(59);var _parse_interval=__webpack_require__(74);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var msgs=_messagebar.mlMessageBarService;var jobs=[];var datafeedIds={};var JobService=function(){function JobService(){var _this=this;_classCallCheck(this,JobService);_defineProperty(this,"loadJobsWrapper",(function(){return _this.loadJobs().then((function(resp){return resp})).catch((function(error){console.log("Error loading jobs in route resolve.",error);Promise.resolve([])}))}));this.tempJobCloningObjects={job:undefined,skipTimeRangeStep:false,start:undefined,end:undefined,calendars:undefined};this.jobs=[];this.basicJobs={};this.jobDescriptions={};this.detectorsByJob={};this.customUrlsByJob={};this.jobStats={activeNodes:{label:_i18n.i18n.translate("xpack.ml.jobService.activeMLNodesLabel",{defaultMessage:"Active ML nodes"}),value:0,show:true},total:{label:_i18n.i18n.translate("xpack.ml.jobService.totalJobsLabel",{defaultMessage:"Total jobs"}),value:0,show:true},open:{label:_i18n.i18n.translate("xpack.ml.jobService.openJobsLabel",{defaultMessage:"Open jobs"}),value:0,show:true},closed:{label:_i18n.i18n.translate("xpack.ml.jobService.closedJobsLabel",{defaultMessage:"Closed jobs"}),value:0,show:true},failed:{label:_i18n.i18n.translate("xpack.ml.jobService.failedJobsLabel",{defaultMessage:"Failed jobs"}),value:0,show:false},activeDatafeeds:{label:_i18n.i18n.translate("xpack.ml.jobService.activeDatafeedsLabel",{defaultMessage:"Active datafeeds"}),value:0,show:true}}}_createClass(JobService,[{key:"getBlankJob",value:function getBlankJob(){return{job_id:"",description:"",groups:[],analysis_config:{bucket_span:"15m",influencers:[],detectors:[]},data_description:{time_field:"",time_format:"",field_delimiter:"",quote_character:'"',format:"delimited"}}}},{key:"loadJobs",value:function loadJobs(){var _this2=this;return new Promise((function(resolve,reject){jobs=[];datafeedIds={};_ml_api_service.ml.getJobs().then((function(resp){jobs=resp.jobs;_ml_api_service.ml.getJobStats().then((function(statsResp){for(var i=0;i<jobs.length;i++){var job=jobs[i];job.data_counts={};job.model_size_stats={};job.datafeed_config={};for(var j=0;j<statsResp.jobs.length;j++){var jobStats=statsResp.jobs[j];if(job.job_id===jobStats.job_id){job.state=jobStats.state;job.data_counts=_lodash.default.cloneDeep(jobStats.data_counts);job.model_size_stats=_lodash.default.cloneDeep(jobStats.model_size_stats);if(jobStats.node){job.node=_lodash.default.cloneDeep(jobStats.node)}if(jobStats.open_time){job.open_time=jobStats.open_time}}}}_this2.loadDatafeeds().then((function(datafeedsResp){for(var _i=0;_i<jobs.length;_i++){for(var _j=0;_j<datafeedsResp.datafeeds.length;_j++){if(jobs[_i].job_id===datafeedsResp.datafeeds[_j].job_id){jobs[_i].datafeed_config=datafeedsResp.datafeeds[_j];datafeedIds[jobs[_i].job_id]=datafeedsResp.datafeeds[_j].datafeed_id}}}processBasicJobInfo(_this2,jobs);_this2.jobs=jobs;createJobStats(_this2.jobs,_this2.jobStats);resolve({jobs:_this2.jobs})}))})).catch((function(err){error(err)}))})).catch((function(err){error(err)}));function error(err){console.log("jobService error getting list of jobs:",err);msgs.notify.error(_i18n.i18n.translate("xpack.ml.jobService.jobsListCouldNotBeRetrievedErrorMessage",{defaultMessage:"Jobs list could not be retrieved"}));msgs.notify.error("",err);reject({jobs:jobs,err:err})}}))}},{key:"refreshJob",value:function refreshJob(jobId){var _this3=this;return new Promise((function(resolve,reject){_ml_api_service.ml.getJobs({jobId:jobId}).then((function(resp){if(resp.jobs&&resp.jobs.length){var newJob=resp.jobs[0];_ml_api_service.ml.getJobStats({jobId:jobId}).then((function(statsResp){for(var j=0;j<statsResp.jobs.length;j++){if(newJob.job_id===statsResp.jobs[j].job_id){var statsJob=statsResp.jobs[j];newJob.state=statsJob.state;newJob.data_counts={};newJob.model_size_stats={};newJob.data_counts=_lodash.default.cloneDeep(statsJob.data_counts);newJob.model_size_stats=_lodash.default.cloneDeep(statsJob.model_size_stats);if(newJob.node){newJob.node=_lodash.default.cloneDeep(statsJob.node)}if(statsJob.open_time){newJob.open_time=statsJob.open_time}}}for(var i=0;i<jobs.length;i++){if(jobs[i].job_id===newJob.job_id){jobs[i]=newJob}}var datafeedId=_this3.getDatafeedId(jobId);_this3.loadDatafeeds(datafeedId).then((function(datafeedsResp){for(var _i2=0;_i2<jobs.length;_i2++){for(var _j2=0;_j2<datafeedsResp.datafeeds.length;_j2++){if(jobs[_i2].job_id===datafeedsResp.datafeeds[_j2].job_id){jobs[_i2].datafeed_config=datafeedsResp.datafeeds[_j2];datafeedIds[jobs[_i2].job_id]=datafeedsResp.datafeeds[_j2].datafeed_id}}}_this3.jobs=jobs;createJobStats(_this3.jobs,_this3.jobStats);resolve({jobs:_this3.jobs})}))})).catch((function(err){error(err)}))}})).catch((function(err){error(err)}));function error(err){console.log("JobService error getting list of jobs:",err);msgs.notify.error(_i18n.i18n.translate("xpack.ml.jobService.jobsListCouldNotBeRetrievedErrorMessage",{defaultMessage:"Jobs list could not be retrieved"}));msgs.notify.error("",err);reject({jobs:jobs,err:err})}}))}},{key:"loadDatafeeds",value:function loadDatafeeds(datafeedId){return new Promise((function(resolve,reject){var sId=datafeedId!==undefined?{datafeed_id:datafeedId}:undefined;_ml_api_service.ml.getDatafeeds(sId).then((function(resp){var datafeeds=resp.datafeeds;_ml_api_service.ml.getDatafeedStats().then((function(statsResp){for(var i=0;i<datafeeds.length;i++){var datafeed=datafeeds[i];for(var j=0;j<statsResp.datafeeds.length;j++){if(datafeed.datafeed_id===statsResp.datafeeds[j].datafeed_id){datafeed.state=statsResp.datafeeds[j].state}}}resolve({datafeeds:datafeeds})})).catch((function(err){error(err)}))})).catch((function(err){error(err)}));function error(err){console.log("loadDatafeeds error getting list of datafeeds:",err);msgs.notify.error(_i18n.i18n.translate("xpack.ml.jobService.datafeedsListCouldNotBeRetrievedErrorMessage",{defaultMessage:"datafeeds list could not be retrieved"}));msgs.notify.error("",err);reject({jobs:jobs,err:err})}}))}},{key:"updateSingleJobDatafeedState",value:function updateSingleJobDatafeedState(jobId){var _this4=this;return new Promise((function(resolve,reject){var datafeedId=_this4.getDatafeedId(jobId);_ml_api_service.ml.getDatafeedStats({datafeedId:datafeedId}).then((function(resp){var datafeeds=resp.datafeeds;var state="UNKNOWN";if(datafeeds&&datafeeds.length){state=datafeeds[0].state}resolve(state)})).catch((function(resp){reject(resp)}))}))}},{key:"saveNewJob",value:function saveNewJob(job){function func(resp){console.log("Response for job query:",resp);var success=checkSaveResponse(resp,job);return{success:success,job:job,resp:resp}}return _ml_api_service.ml.addJob({jobId:job.job_id,job:job}).then(func).catch(func)}},{key:"cloneJob",value:function cloneJob(job){var tempJob=_lodash.default.cloneDeep(job);delete tempJob.state;delete tempJob.job_version;delete tempJob.data_counts;delete tempJob.create_time;delete tempJob.finished_time;delete tempJob.last_data_time;delete tempJob.model_size_stats;delete tempJob.node;delete tempJob.average_bucket_processing_time_ms;delete tempJob.model_snapshot_id;delete tempJob.open_time;delete tempJob.established_model_memory;delete tempJob.calendars;delete tempJob.analysis_config.use_per_partition_normalization;_lodash.default.each(tempJob.analysis_config.detectors,(function(d){delete d.detector_index}));if(tempJob.datafeed_config){delete tempJob.datafeed_config.datafeed_id;delete tempJob.datafeed_config.job_id;delete tempJob.datafeed_config.state;delete tempJob.datafeed_config.node;delete tempJob.datafeed_config.timing_stats;delete tempJob.datafeed_config.assignment_explanation;if(tempJob.datafeed_config.query_delay){var interval=(0,_parse_interval.parseInterval)(tempJob.datafeed_config.query_delay);if(interval!==null){var queryDelay=interval.asSeconds();if(queryDelay>60&&queryDelay<120){delete tempJob.datafeed_config.query_delay}}}}if(tempJob.custom_settings&&tempJob.custom_settings.created_by){delete tempJob.custom_settings.created_by}return tempJob}},{key:"updateJob",value:function updateJob(jobId,job){return _ml_api_service.ml.updateJob({jobId:jobId,job:job}).then((function(resp){console.log("update job",resp);return{success:true}})).catch((function(err){msgs.notify.error(_i18n.i18n.translate("xpack.ml.jobService.couldNotUpdateJobErrorMessage",{defaultMessage:"Could not update job: {jobId}",values:{jobId:jobId}}));console.log("update job",err);return{success:false,message:err.message}}))}},{key:"validateJob",value:function validateJob(obj){return _ml_api_service.ml.validateJob(obj).then((function(messages){return{success:true,messages:messages}})).catch((function(err){msgs.notify.error(_i18n.i18n.translate("xpack.ml.jobService.jobValidationErrorMessage",{defaultMessage:"Job Validation Error: {errorMessage}",values:{errorMessage:err.message}}));console.log("validate job",err);return{success:false,messages:[{status:"error",text:err.message}]}}))}},{key:"getJob",value:function getJob(jobId){var job=_lodash.default.find(jobs,(function(j){return j.job_id===jobId}));return job}},{key:"searchPreview",value:function searchPreview(job){return new Promise((function(resolve,reject){if(job.datafeed_config){var query={match_all:{}};if(job.datafeed_config.query){query=job.datafeed_config.query}_ml_api_service.ml.getTimeFieldRange({index:job.datafeed_config.indices,timeFieldName:job.data_description.time_field,query:query}).then((function(timeRange){var bucketSpan=(0,_parse_interval.parseInterval)(job.analysis_config.bucket_span);var earliestMs=timeRange.start.epoch;var latestMs=+timeRange.start.epoch+10*bucketSpan.asMilliseconds();var body={query:{bool:{must:[{range:_defineProperty({},job.data_description.time_field,{gte:earliestMs,lt:latestMs,format:"epoch_millis"})},query]}}};var aggregations=job.datafeed_config.aggs||job.datafeed_config.aggregations;if(aggregations&&Object.keys(aggregations).length){body.size=0;body.aggregations=aggregations;var scriptFields=job.datafeed_config.script_fields;if(scriptFields&&Object.keys(scriptFields).length){body.script_fields=scriptFields}}else{body.size=_job_utils.ML_DATA_PREVIEW_COUNT;var _scriptFields=job.datafeed_config.script_fields;if(_scriptFields&&Object.keys(_scriptFields).length){body.script_fields=_scriptFields}var fields={};if(job.analysis_config.detectors){_lodash.default.each(job.analysis_config.detectors,(function(dtr){if(dtr.by_field_name){fields[dtr.by_field_name]={}}if(dtr.field_name){fields[dtr.field_name]={}}if(dtr.over_field_name){fields[dtr.over_field_name]={}}if(dtr.partition_field_name){fields[dtr.partition_field_name]={}}}))}if(job.analysis_config.influencers){_lodash.default.each(job.analysis_config.influencers,(function(inf){fields[inf]={}}))}if(job.analysis_config.categorization_field_name){fields[job.analysis_config.categorization_field_name]={}}if(job.analysis_config.summary_count_field_name){fields[job.analysis_config.summary_count_field_name]={}}if(job.data_description.time_field){fields[job.data_description.time_field]={}}var fieldsList=Object.keys(fields);if(fieldsList.length){body._source=fieldsList}}var data=_objectSpread({index:job.datafeed_config.indices,body:body},job.datafeed_config.indices_options||{});_ml_api_service.ml.esSearch(data).then((function(resp){resolve(resp)})).catch((function(resp){reject(resp)}))})).catch((function(resp){reject(resp)}))}}))}},{key:"openJob",value:function openJob(jobId){return _ml_api_service.ml.openJob({jobId:jobId})}},{key:"closeJob",value:function closeJob(jobId){return _ml_api_service.ml.closeJob({jobId:jobId})}},{key:"saveNewDatafeed",value:function saveNewDatafeed(datafeedConfig,jobId){var datafeedId="datafeed-".concat(jobId);datafeedConfig.job_id=jobId;return _ml_api_service.ml.addDatafeed({datafeedId:datafeedId,datafeedConfig:datafeedConfig})}},{key:"updateDatafeed",value:function updateDatafeed(datafeedId,datafeedConfig){return _ml_api_service.ml.updateDatafeed({datafeedId:datafeedId,datafeedConfig:datafeedConfig}).then((function(resp){console.log("update datafeed",resp);return{success:true}})).catch((function(err){msgs.notify.error(_i18n.i18n.translate("xpack.ml.jobService.couldNotUpdateDatafeedErrorMessage",{defaultMessage:"Could not update datafeed: {datafeedId}",values:{datafeedId:datafeedId}}));console.log("update datafeed",err);return{success:false,message:err.message}}))}},{key:"startDatafeed",value:function startDatafeed(datafeedId,jobId,start,end){return new Promise((function(resolve,reject){if(_lodash.default.isNumber(end)){end++}_ml_api_service.ml.startDatafeed({datafeedId:datafeedId,start:start,end:end}).then((function(resp){resolve(resp)})).catch((function(err){console.log("jobService error starting datafeed:",err);msgs.notify.error(_i18n.i18n.translate("xpack.ml.jobService.couldNotStartDatafeedErrorMessage",{defaultMessage:"Could not start datafeed for {jobId}",values:{jobId:jobId}}),err);reject(err)}))}))}},{key:"stopDatafeed",value:function stopDatafeed(datafeedId,jobId){return new Promise((function(resolve,reject){_ml_api_service.ml.stopDatafeed({datafeedId:datafeedId}).then((function(resp){resolve(resp)})).catch((function(err){console.log("jobService error stopping datafeed:",err);var couldNotStopDatafeedErrorMessage=_i18n.i18n.translate("xpack.ml.jobService.couldNotStopDatafeedErrorMessage",{defaultMessage:"Could not stop datafeed for {jobId}",values:{jobId:jobId}});if(err.statusCode===500){msgs.notify.error(couldNotStopDatafeedErrorMessage);msgs.notify.error(_i18n.i18n.translate("xpack.ml.jobService.requestMayHaveTimedOutErrorMessage",{defaultMessage:"Request may have timed out and may still be running in the background."}))}else{msgs.notify.error(couldNotStopDatafeedErrorMessage,err)}reject(err)}))}))}},{key:"forceStartDatafeeds",value:function forceStartDatafeeds(dIds,start,end){return _ml_api_service.ml.jobs.forceStartDatafeeds(dIds,start,end)}},{key:"stopDatafeeds",value:function stopDatafeeds(dIds){return _ml_api_service.ml.jobs.stopDatafeeds(dIds)}},{key:"deleteJobs",value:function deleteJobs(jIds){return _ml_api_service.ml.jobs.deleteJobs(jIds)}},{key:"closeJobs",value:function closeJobs(jIds){return _ml_api_service.ml.jobs.closeJobs(jIds)}},{key:"validateDetector",value:function validateDetector(detector){return new Promise((function(resolve,reject){if(detector){_ml_api_service.ml.validateDetector({detector:detector}).then((function(resp){resolve(resp)})).catch((function(resp){reject(resp)}))}else{reject({})}}))}},{key:"getDatafeedId",value:function getDatafeedId(jobId){var datafeedId=datafeedIds[jobId];if(datafeedId===undefined){datafeedId="datafeed-".concat(jobId)}return datafeedId}},{key:"getDatafeedPreview",value:function getDatafeedPreview(datafeedId){return _ml_api_service.ml.datafeedPreview({datafeedId:datafeedId})}},{key:"getJobGroups",value:function getJobGroups(){var groups=[];var tempGroups={};this.jobs.forEach((function(job){if(Array.isArray(job.groups)){job.groups.forEach((function(group){if(tempGroups[group]===undefined){tempGroups[group]=[job]}else{tempGroups[group].push(job)}}))}}));_lodash.default.each(tempGroups,(function(js,id){groups.push({id:id,jobs:js})}));return groups}},{key:"createResultsUrlForJobs",value:function createResultsUrlForJobs(jobsList,resultsPage){return _createResultsUrlForJobs(jobsList,resultsPage)}},{key:"createResultsUrl",value:function createResultsUrl(jobIds,from,to,resultsPage){return _createResultsUrl(jobIds,from,to,resultsPage)}},{key:"getJobAndGroupIds",value:function(){var _getJobAndGroupIds=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _ml_api_service.ml.jobs.getAllJobAndGroupIds();case 3:return _context.abrupt("return",_context.sent);case 6:_context.prev=6;_context.t0=_context["catch"](0);return _context.abrupt("return",{jobIds:[],groupIds:[]});case 9:case"end":return _context.stop()}}}),_callee,null,[[0,6]])})));function getJobAndGroupIds(){return _getJobAndGroupIds.apply(this,arguments)}return getJobAndGroupIds}()}]);return JobService}();function checkSaveResponse(resp,origJob){if(resp){if(resp.job_id){if(resp.job_id===origJob.job_id){console.log("checkSaveResponse(): save successful");return true}}else{if(resp.errorCode){console.log("checkSaveResponse(): save failed",resp);return false}}}else{console.log("checkSaveResponse(): response is empty");return false}}function processBasicJobInfo(localJobService,jobsList){var processedJobsList=[];var detectorsByJob={};var customUrlsByJob={};var jobsListCopy=_lodash.default.cloneDeep(jobsList);_lodash.default.each(jobsListCopy,(function(jobObj){var analysisConfig=jobObj.analysis_config;var bucketSpan=(0,_parse_interval.parseInterval)(analysisConfig.bucket_span);var job={id:jobObj.job_id,bucketSpanSeconds:bucketSpan.asSeconds()};if(_lodash.default.has(jobObj,"description")&&/^\s*$/.test(jobObj.description)===false){job.description=jobObj.description}else{job.description=jobObj.job_id}job.detectors=_lodash.default.get(analysisConfig,"detectors",[]);detectorsByJob[job.id]=job.detectors;if(_lodash.default.has(jobObj,"custom_settings.custom_urls")){job.customUrls=[];_lodash.default.each(jobObj.custom_settings.custom_urls,(function(url){if(_lodash.default.has(url,"url_name")&&_lodash.default.has(url,"url_value")&&(0,_url_utils.isWebUrl)(url.url_value)){job.customUrls.push(url)}}));if(job.customUrls.length>0){customUrlsByJob[job.id]=job.customUrls}}localJobService.jobDescriptions[job.id]=job.description;localJobService.basicJobs[job.id]=job;processedJobsList.push(job)}));localJobService.detectorsByJob=detectorsByJob;localJobService.customUrlsByJob=customUrlsByJob;return processedJobsList}function createJobStats(jobsList,jobStats){jobStats.activeNodes.value=0;jobStats.total.value=0;jobStats.open.value=0;jobStats.closed.value=0;jobStats.failed.value=0;jobStats.activeDatafeeds.value=0;var mlNodes={};var failedJobs=0;_lodash.default.each(jobsList,(function(job){if(job.state==="opened"){jobStats.open.value++}else if(job.state==="closed"){jobStats.closed.value++}else if(job.state==="failed"){failedJobs++}if(job.datafeed_config&&job.datafeed_config.state==="started"){jobStats.activeDatafeeds.value++}if(job.node&&job.node.name){mlNodes[job.node.name]={}}}));jobStats.total.value=jobsList.length;if(failedJobs){jobStats.failed.value=failedJobs;jobStats.failed.show=true}else{jobStats.failed.show=false}jobStats.activeNodes.value=Object.keys(mlNodes).length}function _createResultsUrlForJobs(jobsList,resultsPage){var from=undefined;var to=undefined;if(jobsList.length===1){from=jobsList[0].earliestTimestampMs;to=jobsList[0].latestResultsTimestampMs}else{var jobsWithData=jobsList.filter((function(j){return j.earliestTimestampMs!==undefined}));if(jobsWithData.length>0){from=Math.min.apply(Math,_toConsumableArray(jobsWithData.map((function(j){return j.earliestTimestampMs}))));to=Math.max.apply(Math,_toConsumableArray(jobsWithData.map((function(j){return j.latestResultsTimestampMs}))))}}var timeFormat="YYYY-MM-DD HH:mm:ss";var fromString=(0,_moment.default)(from).format(timeFormat);var toString=(0,_moment.default)(to).format(timeFormat);var jobIds=jobsList.map((function(j){return j.id}));return _createResultsUrl(jobIds,fromString,toString,resultsPage)}function _createResultsUrl(jobIds,start,end,resultsPage){var idString=jobIds.map((function(j){return"'".concat(j,"'")})).join(",");var from=(0,_moment.default)(start).toISOString();var to=(0,_moment.default)(end).toISOString();var path="";if(resultsPage!==undefined){path+="#/";path+=resultsPage}path+="?_g=(ml:(jobIds:!(".concat(idString,"))");path+=",refreshInterval:(display:Off,pause:!f,value:0),time:(from:'".concat(from,"'");path+=",mode:absolute,to:'".concat(to,"'");path+="))&_a=(query:(query_string:(analyze_wildcard:!t,query:'*')))";return path}var mlJobService=new JobService;exports.mlJobService=mlJobService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calculateDatafeedFrequencyDefaultSeconds=calculateDatafeedFrequencyDefaultSeconds;exports.isTimeSeriesViewJob=isTimeSeriesViewJob;exports.isTimeSeriesViewDetector=isTimeSeriesViewDetector;exports.isSourceDataChartableForDetector=isSourceDataChartableForDetector;exports.isModelPlotChartableForDetector=isModelPlotChartableForDetector;exports.getPartitioningFieldNames=getPartitioningFieldNames;exports.isModelPlotEnabled=isModelPlotEnabled;exports.isJobVersionGte=isJobVersionGte;exports.mlFunctionToESAggregation=mlFunctionToESAggregation;exports.isJobIdValid=isJobIdValid;exports.prefixDatafeedId=prefixDatafeedId;exports.getSafeAggregationName=getSafeAggregationName;exports.uniqWithIsEqual=uniqWithIsEqual;exports.basicJobValidation=basicJobValidation;exports.basicDatafeedValidation=basicDatafeedValidation;exports.validateModelMemoryLimit=validateModelMemoryLimit;exports.validateModelMemoryLimitUnits=validateModelMemoryLimitUnits;exports.validateGroupNames=validateGroupNames;exports.getLatestDataOrBucketTimestamp=getLatestDataOrBucketTimestamp;exports.processCreatedBy=processCreatedBy;exports.ML_DATA_PREVIEW_COUNT=exports.ML_MEDIAN_PERCENTS=void 0;var _lodash=_interopRequireDefault(__webpack_require__(49));var _semver=_interopRequireDefault(__webpack_require__(908));var _numeral=_interopRequireDefault(__webpack_require__(124));var _validation=__webpack_require__(107);var _parse_interval=__webpack_require__(74);var _validators=__webpack_require__(185);var _new_job=__webpack_require__(60);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function calculateDatafeedFrequencyDefaultSeconds(bucketSpanSeconds){var freq=3600;if(bucketSpanSeconds<=120){freq=60}else if(bucketSpanSeconds<=1200){freq=Math.floor(bucketSpanSeconds/2)}else if(bucketSpanSeconds<=43200){freq=600}return freq}function isTimeSeriesViewJob(job){var isViewable=false;var dtrs=job.analysis_config.detectors;for(var i=0;i<dtrs.length;i++){isViewable=isTimeSeriesViewDetector(job,i);if(isViewable===true){break}}return isViewable}function isTimeSeriesViewDetector(job,dtrIndex){return isSourceDataChartableForDetector(job,dtrIndex)||isModelPlotChartableForDetector(job,dtrIndex)}function isSourceDataChartableForDetector(job,detectorIndex){var isSourceDataChartable=false;var dtrs=job.analysis_config.detectors;if(detectorIndex>=0&&detectorIndex<dtrs.length){var dtr=dtrs[detectorIndex];var functionName=dtr.function;isSourceDataChartable=mlFunctionToESAggregation(functionName)!==null&&dtr.by_field_name!=="mlcategory"&&dtr.partition_field_name!=="mlcategory"&&dtr.over_field_name!=="mlcategory";var usesScriptFields=_lodash.default.has(job,"datafeed_config.script_fields");if(isSourceDataChartable===true&&usesScriptFields===true){var scriptFields=usesScriptFields?_lodash.default.keys(job.datafeed_config.script_fields):[];isSourceDataChartable=scriptFields.indexOf(dtr.field_name)===-1&&scriptFields.indexOf(dtr.partition_field_name)===-1&&scriptFields.indexOf(dtr.by_field_name)===-1&&scriptFields.indexOf(dtr.over_field_name)===-1}}return isSourceDataChartable}function isModelPlotChartableForDetector(job,detectorIndex){var isModelPlotChartable=false;var modelPlotEnabled=_lodash.default.get(job,["model_plot_config","enabled"],false);var dtrs=job.analysis_config.detectors;if(detectorIndex>=0&&detectorIndex<dtrs.length&&modelPlotEnabled===true){var dtr=dtrs[detectorIndex];var functionName=dtr.function;isModelPlotChartable=mlFunctionToESAggregation(functionName)!==null||["varp","high_varp","low_varp","info_content","high_info_content","low_info_content"].includes(functionName)===true}return isModelPlotChartable}function getPartitioningFieldNames(job,detectorIndex){var fieldNames=[];var detector=job.analysis_config.detectors[detectorIndex];if(_lodash.default.has(detector,"partition_field_name")){fieldNames.push(detector.partition_field_name)}if(_lodash.default.has(detector,"by_field_name")){fieldNames.push(detector.by_field_name)}if(_lodash.default.has(detector,"over_field_name")){fieldNames.push(detector.over_field_name)}return fieldNames}function isModelPlotEnabled(job,detectorIndex,entityFields){var isEnabled=_lodash.default.get(job,["model_plot_config","enabled"],false);if(isEnabled===true&&entityFields!==undefined&&entityFields.length>0){var termsStr=_lodash.default.get(job,["model_plot_config","terms"],"");if(termsStr!==""){var detector=job.analysis_config.detectors[detectorIndex];var detectorHasPartitionField=_lodash.default.has(detector,"partition_field_name");var detectorHasByField=_lodash.default.has(detector,"by_field_name");var terms=termsStr.split(",");if(detectorHasPartitionField===true){var partitionEntity=_lodash.default.find(entityFields,{fieldName:detector.partition_field_name});isEnabled=partitionEntity!==undefined&&terms.indexOf(partitionEntity.fieldValue)!==-1}if(isEnabled===true&&detectorHasByField===true){var byEntity=_lodash.default.find(entityFields,{fieldName:detector.by_field_name});isEnabled=byEntity!==undefined&&terms.indexOf(byEntity.fieldValue)!==-1}}}return isEnabled}function isJobVersionGte(job,version){var jobVersion=_lodash.default.get(job,"job_version","0.0.0");return _semver.default.gte(jobVersion,version)}function mlFunctionToESAggregation(functionName){if(functionName==="mean"||functionName==="high_mean"||functionName==="low_mean"||functionName==="metric"){return"avg"}if(functionName==="sum"||functionName==="high_sum"||functionName==="low_sum"||functionName==="non_null_sum"||functionName==="low_non_null_sum"||functionName==="high_non_null_sum"){return"sum"}if(functionName==="count"||functionName==="high_count"||functionName==="low_count"||functionName==="non_zero_count"||functionName==="low_non_zero_count"||functionName==="high_non_zero_count"){return"count"}if(functionName==="distinct_count"||functionName==="low_distinct_count"||functionName==="high_distinct_count"){return"cardinality"}if(functionName==="median"||functionName==="high_median"||functionName==="low_median"){return"percentiles"}if(functionName==="min"||functionName==="max"){return functionName}if(functionName==="rare"){return"count"}return null}function isJobIdValid(jobId){return/^[a-z0-9\-\_]+$/g.test(jobId)&&!/^([_-].*)?(.*[_-])?$/g.test(jobId)}var ML_MEDIAN_PERCENTS="50.0";exports.ML_MEDIAN_PERCENTS=ML_MEDIAN_PERCENTS;var ML_DATA_PREVIEW_COUNT=10;exports.ML_DATA_PREVIEW_COUNT=ML_DATA_PREVIEW_COUNT;function prefixDatafeedId(datafeedId,prefix){return datafeedId.match(/^datafeed-/)?datafeedId.replace(/^datafeed-/,"datafeed-".concat(prefix)):"datafeed-".concat(prefix).concat(datafeedId)}function getSafeAggregationName(fieldName,index){return fieldName.match(/^[a-zA-Z0-9-_.]+$/)?fieldName:"field_".concat(index)}function uniqWithIsEqual(arr){return arr.reduce((function(dedupedArray,value){if(dedupedArray.filter((function(compareValue){return _lodash.default.isEqual(compareValue,value)})).length===0){dedupedArray.push(value)}return dedupedArray}),[])}function basicJobValidation(job,fields,limits){var skipMmlChecks=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var messages=[];var valid=true;if(job){if(_lodash.default.isEmpty(job.job_id)){messages.push({id:"job_id_empty"});valid=false}else if(isJobIdValid(job.job_id)===false){messages.push({id:"job_id_invalid"});valid=false}else if((0,_validators.maxLengthValidator)(_validation.JOB_ID_MAX_LENGTH)(job.job_id)){messages.push({id:"job_id_invalid_max_length",maxLength:_validation.JOB_ID_MAX_LENGTH});valid=false}else{messages.push({id:"job_id_valid"})}var _validateGroupNames=validateGroupNames(job),groupsMessages=_validateGroupNames.messages,groupsValid=_validateGroupNames.valid;messages.push.apply(messages,_toConsumableArray(groupsMessages));valid=valid&&groupsValid;if(job.analysis_config.categorization_filters){var v=true;_lodash.default.each(job.analysis_config.categorization_filters,(function(d){try{new RegExp(d)}catch(e){v=false}if(job.analysis_config.categorization_field_name===undefined||job.analysis_config.categorization_field_name===""){v=false}if(d===""){v=false}}));if(v){messages.push({id:"categorization_filters_valid"})}else{messages.push({id:"categorization_filters_invalid"});valid=false}}if(job.analysis_config.detectors.length===0){messages.push({id:"detectors_empty"});valid=false}else{var _v=true;_lodash.default.each(job.analysis_config.detectors,(function(d){if(_lodash.default.isEmpty(d.function)){_v=false}}));if(_v){messages.push({id:"detectors_function_not_empty"})}else{messages.push({id:"detectors_function_empty"});valid=false}}if(job.analysis_config.detectors.length>=2){var compareSubSet=job.analysis_config.detectors.map((function(d){return _lodash.default.pick(d,["function","field_name","by_field_name","over_field_name","partition_field_name"])}));var dedupedSubSet=uniqWithIsEqual(compareSubSet);if(compareSubSet.length!==dedupedSubSet.length){messages.push({id:"detectors_duplicates"});valid=false}}if(job.analysis_config.bucket_span===""||job.analysis_config.bucket_span===undefined){messages.push({id:"bucket_span_empty"});valid=false}else{if(isValidTimeFormat(job.analysis_config.bucket_span)){messages.push({id:"bucket_span_valid",bucketSpan:job.analysis_config.bucket_span})}else{messages.push({id:"bucket_span_invalid"});valid=false}}if(typeof fields!=="undefined"){var loadedFields=Object.keys(fields);if(loadedFields.length===0){messages.push({id:"index_fields_invalid"});valid=false}else{messages.push({id:"index_fields_valid"})}}if(skipMmlChecks===false){var mml=job.analysis_limits&&job.analysis_limits.model_memory_limit;var _validateModelMemoryL=validateModelMemoryLimitUnits(mml),mmlUnitMessages=_validateModelMemoryL.messages,mmlUnitValid=_validateModelMemoryL.valid;messages.push.apply(messages,_toConsumableArray(mmlUnitMessages));valid=valid&&mmlUnitValid;if(mmlUnitValid){var _validateModelMemoryL2=validateModelMemoryLimit(job,limits),mmlMessages=_validateModelMemoryL2.messages,mmlValid=_validateModelMemoryL2.valid;messages.push.apply(messages,_toConsumableArray(mmlMessages));valid=valid&&mmlValid}}}else{valid=false}return{messages:messages,valid:valid,contains:function contains(id){return messages.some((function(m){return id===m.id}))},find:function find(id){return messages.find((function(m){return id===m.id}))}}}function basicDatafeedValidation(datafeed){var messages=[];var valid=true;if(datafeed){var queryDelayMessage={id:"query_delay_valid"};if(isValidTimeFormat(datafeed.query_delay)===false){queryDelayMessage={id:"query_delay_invalid"};valid=false}messages.push(queryDelayMessage);var frequencyMessage={id:"frequency_valid"};if(isValidTimeFormat(datafeed.frequency)===false){frequencyMessage={id:"frequency_invalid"};valid=false}messages.push(frequencyMessage)}return{messages:messages,valid:valid,contains:function contains(id){return messages.some((function(m){return id===m.id}))},find:function find(id){return messages.find((function(m){return id===m.id}))}}}function validateModelMemoryLimit(job,limits){var messages=[];var valid=true;if(typeof job.analysis_limits!=="undefined"&&typeof job.analysis_limits.model_memory_limit!=="undefined"){if(_typeof(limits)==="object"&&typeof limits.max_model_memory_limit!=="undefined"){var max=limits.max_model_memory_limit.toUpperCase();var mml=job.analysis_limits.model_memory_limit.toUpperCase();var mmlBytes=(0,_numeral.default)(mml).value();var maxBytes=(0,_numeral.default)(max).value();if(mmlBytes>maxBytes){messages.push({id:"model_memory_limit_invalid"});valid=false}else{messages.push({id:"model_memory_limit_valid"})}}}return{valid:valid,messages:messages,contains:function contains(id){return messages.some((function(m){return id===m.id}))},find:function find(id){return messages.find((function(m){return id===m.id}))}}}function validateModelMemoryLimitUnits(modelMemoryLimit){var messages=[];var valid=true;if(modelMemoryLimit!==undefined){var mml=String(modelMemoryLimit).toUpperCase();var mmlSplit=mml.match(/\d+(\w+)$/);var unit=mmlSplit&&mmlSplit.length===2?mmlSplit[1]:null;if(_validation.ALLOWED_DATA_UNITS.indexOf(unit)===-1){messages.push({id:"model_memory_limit_units_invalid"});valid=false}else{messages.push({id:"model_memory_limit_units_valid"})}}return{valid:valid,messages:messages,contains:function contains(id){return messages.some((function(m){return id===m.id}))},find:function find(id){return messages.find((function(m){return id===m.id}))}}}function validateGroupNames(job){var _job$groups=job.groups,groups=_job$groups===void 0?[]:_job$groups;var errorMessages=[].concat(_toConsumableArray(groups.some((function(group){return!isJobIdValid(group)}))?[{id:"job_group_id_invalid"}]:[]),_toConsumableArray(groups.some((function(group){return(0,_validators.maxLengthValidator)(_validation.JOB_ID_MAX_LENGTH)(group)}))?[{id:"job_group_id_invalid_max_length"}]:[]));var valid=errorMessages.length===0;var messages=valid&&groups.length?[{id:"job_group_id_valid"}]:errorMessages;return{valid:valid,messages:messages,contains:function contains(id){return messages.some((function(m){return id===m.id}))},find:function find(id){return messages.find((function(m){return id===m.id}))}}}function isValidTimeFormat(value){if(value===undefined){return true}var interval=(0,_parse_interval.parseInterval)(value,false);return interval!==null&&interval.asMilliseconds()!==0}function getLatestDataOrBucketTimestamp(latestDataTimestamp,latestBucketTimestamp){if(latestDataTimestamp!==undefined&&latestBucketTimestamp!==undefined){return Math.max(latestDataTimestamp,latestBucketTimestamp)}else{return latestDataTimestamp!==undefined?latestDataTimestamp:latestBucketTimestamp}}function processCreatedBy(customSettings){if(Object.values(_new_job.CREATED_BY_LABEL).includes(customSettings.created_by)){delete customSettings.created_by}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SHARED_RESULTS_INDEX_NAME=exports.DEFAULT_QUERY_DELAY=exports.DEFAULT_RARE_BUCKET_SPAN=exports.DEFAULT_BUCKET_SPAN=exports.DEFAULT_MODEL_MEMORY_LIMIT=exports.CREATED_BY_LABEL=exports.JOB_TYPE=void 0;var JOB_TYPE;exports.JOB_TYPE=JOB_TYPE;(function(JOB_TYPE){JOB_TYPE["SINGLE_METRIC"]="single_metric";JOB_TYPE["MULTI_METRIC"]="multi_metric";JOB_TYPE["POPULATION"]="population";JOB_TYPE["ADVANCED"]="advanced";JOB_TYPE["CATEGORIZATION"]="categorization"})(JOB_TYPE||(exports.JOB_TYPE=JOB_TYPE={}));var CREATED_BY_LABEL;exports.CREATED_BY_LABEL=CREATED_BY_LABEL;(function(CREATED_BY_LABEL){CREATED_BY_LABEL["SINGLE_METRIC"]="single-metric-wizard";CREATED_BY_LABEL["MULTI_METRIC"]="multi-metric-wizard";CREATED_BY_LABEL["POPULATION"]="population-wizard";CREATED_BY_LABEL["CATEGORIZATION"]="categorization-wizard"})(CREATED_BY_LABEL||(exports.CREATED_BY_LABEL=CREATED_BY_LABEL={}));var DEFAULT_MODEL_MEMORY_LIMIT="10MB";exports.DEFAULT_MODEL_MEMORY_LIMIT=DEFAULT_MODEL_MEMORY_LIMIT;var DEFAULT_BUCKET_SPAN="15m";exports.DEFAULT_BUCKET_SPAN=DEFAULT_BUCKET_SPAN;var DEFAULT_RARE_BUCKET_SPAN="1h";exports.DEFAULT_RARE_BUCKET_SPAN=DEFAULT_RARE_BUCKET_SPAN;var DEFAULT_QUERY_DELAY="60s";exports.DEFAULT_QUERY_DELAY=DEFAULT_QUERY_DELAY;var SHARED_RESULTS_INDEX_NAME="shared";exports.SHARED_RESULTS_INDEX_NAME=SHARED_RESULTS_INDEX_NAME},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setSearchService=exports.getSearchService=exports.setInjectedMetadata=exports.getInjectedMetadata=exports.setQueryService=exports.getQueryService=exports.setIndexPatterns=exports.getIndexPatterns=exports.setOverlays=exports.getOverlays=exports.setFieldFormats=exports.getFieldFormats=exports.setHttp=exports.getHttp=exports.setUiSettings=exports.getUiSettings=exports.setNotifications=exports.getNotifications=void 0;var _public=__webpack_require__(34);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var _createGetterSetter=(0,_public.createGetterSetter)("Notifications"),_createGetterSetter2=_slicedToArray(_createGetterSetter,2),getNotifications=_createGetterSetter2[0],setNotifications=_createGetterSetter2[1];exports.setNotifications=setNotifications;exports.getNotifications=getNotifications;var _createGetterSetter3=(0,_public.createGetterSetter)("UiSettings"),_createGetterSetter4=_slicedToArray(_createGetterSetter3,2),getUiSettings=_createGetterSetter4[0],setUiSettings=_createGetterSetter4[1];exports.setUiSettings=setUiSettings;exports.getUiSettings=getUiSettings;var _createGetterSetter5=(0,_public.createGetterSetter)("Http"),_createGetterSetter6=_slicedToArray(_createGetterSetter5,2),getHttp=_createGetterSetter6[0],setHttp=_createGetterSetter6[1];exports.setHttp=setHttp;exports.getHttp=getHttp;var _createGetterSetter7=(0,_public.createGetterSetter)("FieldFormats"),_createGetterSetter8=_slicedToArray(_createGetterSetter7,2),getFieldFormats=_createGetterSetter8[0],setFieldFormats=_createGetterSetter8[1];exports.setFieldFormats=setFieldFormats;exports.getFieldFormats=getFieldFormats;var _createGetterSetter9=(0,_public.createGetterSetter)("Overlays"),_createGetterSetter10=_slicedToArray(_createGetterSetter9,2),getOverlays=_createGetterSetter10[0],setOverlays=_createGetterSetter10[1];exports.setOverlays=setOverlays;exports.getOverlays=getOverlays;var _createGetterSetter11=(0,_public.createGetterSetter)("IndexPatterns"),_createGetterSetter12=_slicedToArray(_createGetterSetter11,2),getIndexPatterns=_createGetterSetter12[0],setIndexPatterns=_createGetterSetter12[1];exports.setIndexPatterns=setIndexPatterns;exports.getIndexPatterns=getIndexPatterns;var _createGetterSetter13=(0,_public.createGetterSetter)("Query"),_createGetterSetter14=_slicedToArray(_createGetterSetter13,2),getQueryService=_createGetterSetter14[0],setQueryService=_createGetterSetter14[1];exports.setQueryService=setQueryService;exports.getQueryService=getQueryService;var _createGetterSetter15=(0,_public.createGetterSetter)("InjectedMetadata"),_createGetterSetter16=_slicedToArray(_createGetterSetter15,2),getInjectedMetadata=_createGetterSetter16[0],setInjectedMetadata=_createGetterSetter16[1];exports.setInjectedMetadata=setInjectedMetadata;exports.getInjectedMetadata=getInjectedMetadata;var _createGetterSetter17=(0,_public.createGetterSetter)("Search"),_createGetterSetter18=_slicedToArray(_createGetterSetter17,2),getSearchService=_createGetterSetter18[0],setSearchService=_createGetterSetter18[1];exports.setSearchService=setSearchService;exports.getSearchService=getSearchService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.METRIC_TYPES=void 0;var METRIC_TYPES;exports.METRIC_TYPES=METRIC_TYPES;(function(METRIC_TYPES){METRIC_TYPES["AVG"]="avg";METRIC_TYPES["CARDINALITY"]="cardinality";METRIC_TYPES["AVG_BUCKET"]="avg_bucket";METRIC_TYPES["MAX_BUCKET"]="max_bucket";METRIC_TYPES["MIN_BUCKET"]="min_bucket";METRIC_TYPES["SUM_BUCKET"]="sum_bucket";METRIC_TYPES["COUNT"]="count";METRIC_TYPES["CUMULATIVE_SUM"]="cumulative_sum";METRIC_TYPES["DERIVATIVE"]="derivative";METRIC_TYPES["GEO_BOUNDS"]="geo_bounds";METRIC_TYPES["GEO_CENTROID"]="geo_centroid";METRIC_TYPES["MEDIAN"]="median";METRIC_TYPES["MIN"]="min";METRIC_TYPES["MAX"]="max";METRIC_TYPES["MOVING_FN"]="moving_avg";METRIC_TYPES["SERIAL_DIFF"]="serial_diff";METRIC_TYPES["SUM"]="sum";METRIC_TYPES["TOP_HITS"]="top_hits";METRIC_TYPES["PERCENTILES"]="percentiles";METRIC_TYPES["PERCENTILE_RANKS"]="percentile_ranks";METRIC_TYPES["STD_DEV"]="std_dev"})(METRIC_TYPES||(exports.METRIC_TYPES=METRIC_TYPES={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;Object.defineProperty(exports,"RangeFilter",{enumerable:true,get:function get(){return _common.RangeFilter}});Object.defineProperty(exports,"RangeFilterMeta",{enumerable:true,get:function get(){return _common.RangeFilterMeta}});Object.defineProperty(exports,"RangeFilterParams",{enumerable:true,get:function get(){return _common.RangeFilterParams}});Object.defineProperty(exports,"ExistsFilter",{enumerable:true,get:function get(){return _common.ExistsFilter}});Object.defineProperty(exports,"PhrasesFilter",{enumerable:true,get:function get(){return _common.PhrasesFilter}});Object.defineProperty(exports,"PhraseFilter",{enumerable:true,get:function get(){return _common.PhraseFilter}});Object.defineProperty(exports,"CustomFilter",{enumerable:true,get:function get(){return _common.CustomFilter}});Object.defineProperty(exports,"MatchAllFilter",{enumerable:true,get:function get(){return _common.MatchAllFilter}});Object.defineProperty(exports,"EsQueryConfig",{enumerable:true,get:function get(){return _common.EsQueryConfig}});Object.defineProperty(exports,"KueryNode",{enumerable:true,get:function get(){return _common.KueryNode}});Object.defineProperty(exports,"IFieldFormat",{enumerable:true,get:function get(){return _common.IFieldFormat}});Object.defineProperty(exports,"IFieldFormatsRegistry",{enumerable:true,get:function get(){return _common.IFieldFormatsRegistry}});Object.defineProperty(exports,"FieldFormatsContentType",{enumerable:true,get:function get(){return _common.FieldFormatsContentType}});Object.defineProperty(exports,"FieldFormatsGetConfigFn",{enumerable:true,get:function get(){return _common.FieldFormatsGetConfigFn}});Object.defineProperty(exports,"FieldFormatConfig",{enumerable:true,get:function get(){return _common.FieldFormatConfig}});Object.defineProperty(exports,"FieldFormatId",{enumerable:true,get:function get(){return _common.FieldFormatId}});Object.defineProperty(exports,"IIndexPattern",{enumerable:true,get:function get(){return _common.IIndexPattern}});Object.defineProperty(exports,"IFieldType",{enumerable:true,get:function get(){return _common.IFieldType}});Object.defineProperty(exports,"IFieldSubType",{enumerable:true,get:function get(){return _common.IFieldSubType}});Object.defineProperty(exports,"ES_FIELD_TYPES",{enumerable:true,get:function get(){return _common.ES_FIELD_TYPES}});Object.defineProperty(exports,"KBN_FIELD_TYPES",{enumerable:true,get:function get(){return _common.KBN_FIELD_TYPES}});Object.defineProperty(exports,"IndexPatternAttributes",{enumerable:true,get:function get(){return _common.IndexPatternAttributes}});Object.defineProperty(exports,"ParsedInterval",{enumerable:true,get:function get(){return _common.ParsedInterval}});Object.defineProperty(exports,"Filter",{enumerable:true,get:function get(){return _common.Filter}});Object.defineProperty(exports,"Query",{enumerable:true,get:function get(){return _common.Query}});Object.defineProperty(exports,"RefreshInterval",{enumerable:true,get:function get(){return _common.RefreshInterval}});Object.defineProperty(exports,"TimeRange",{enumerable:true,get:function get(){return _common.TimeRange}});Object.defineProperty(exports,"castEsToKbnFieldTypeName",{enumerable:true,get:function get(){return _common.castEsToKbnFieldTypeName}});Object.defineProperty(exports,"getKbnTypeNames",{enumerable:true,get:function get(){return _common.getKbnTypeNames}});Object.defineProperty(exports,"createSavedQueryService",{enumerable:true,get:function get(){return _query.createSavedQueryService}});Object.defineProperty(exports,"connectToQueryState",{enumerable:true,get:function get(){return _query.connectToQueryState}});Object.defineProperty(exports,"syncQueryStateWithUrl",{enumerable:true,get:function get(){return _query.syncQueryStateWithUrl}});Object.defineProperty(exports,"QueryState",{enumerable:true,get:function get(){return _query.QueryState}});Object.defineProperty(exports,"getTime",{enumerable:true,get:function get(){return _query.getTime}});Object.defineProperty(exports,"getQueryLog",{enumerable:true,get:function get(){return _query.getQueryLog}});Object.defineProperty(exports,"getDefaultQuery",{enumerable:true,get:function get(){return _query.getDefaultQuery}});Object.defineProperty(exports,"FilterManager",{enumerable:true,get:function get(){return _query.FilterManager}});Object.defineProperty(exports,"SavedQuery",{enumerable:true,get:function get(){return _query.SavedQuery}});Object.defineProperty(exports,"SavedQueryService",{enumerable:true,get:function get(){return _query.SavedQueryService}});Object.defineProperty(exports,"SavedQueryTimeFilter",{enumerable:true,get:function get(){return _query.SavedQueryTimeFilter}});Object.defineProperty(exports,"InputTimeRange",{enumerable:true,get:function get(){return _query.InputTimeRange}});Object.defineProperty(exports,"TimeHistory",{enumerable:true,get:function get(){return _query.TimeHistory}});Object.defineProperty(exports,"TimefilterContract",{enumerable:true,get:function get(){return _query.TimefilterContract}});Object.defineProperty(exports,"TimeHistoryContract",{enumerable:true,get:function get(){return _query.TimeHistoryContract}});Object.defineProperty(exports,"baseFormattersPublic",{enumerable:true,get:function get(){return _field_formats2.baseFormattersPublic}});Object.defineProperty(exports,"IndexPatternsContract",{enumerable:true,get:function get(){return _index_patterns.IndexPatternsContract}});Object.defineProperty(exports,"IndexPattern",{enumerable:true,get:function get(){return _index_patterns.IndexPattern}});Object.defineProperty(exports,"IndexPatternField",{enumerable:true,get:function get(){return _index_patterns.Field}});Object.defineProperty(exports,"IndexPatternTypeMeta",{enumerable:true,get:function get(){return _index_patterns.TypeMeta}});Object.defineProperty(exports,"IndexPatternAggRestrictions",{enumerable:true,get:function get(){return _index_patterns.AggregationRestrictions}});Object.defineProperty(exports,"IndexPatternFieldList",{enumerable:true,get:function get(){return _index_patterns.FieldList}});Object.defineProperty(exports,"QuerySuggestion",{enumerable:true,get:function get(){return _autocomplete.QuerySuggestion}});Object.defineProperty(exports,"QuerySuggestionTypes",{enumerable:true,get:function get(){return _autocomplete.QuerySuggestionTypes}});Object.defineProperty(exports,"QuerySuggestionGetFn",{enumerable:true,get:function get(){return _autocomplete.QuerySuggestionGetFn}});Object.defineProperty(exports,"QuerySuggestionGetFnArgs",{enumerable:true,get:function get(){return _autocomplete.QuerySuggestionGetFnArgs}});Object.defineProperty(exports,"QuerySuggestionBasic",{enumerable:true,get:function get(){return _autocomplete.QuerySuggestionBasic}});Object.defineProperty(exports,"QuerySuggestionField",{enumerable:true,get:function get(){return _autocomplete.QuerySuggestionField}});Object.defineProperty(exports,"AggGroupNames",{enumerable:true,get:function get(){return _search.AggGroupNames}});Object.defineProperty(exports,"AggParam",{enumerable:true,get:function get(){return _search.AggParam}});Object.defineProperty(exports,"AggParamOption",{enumerable:true,get:function get(){return _search.AggParamOption}});Object.defineProperty(exports,"AggParamType",{enumerable:true,get:function get(){return _search.AggParamType}});Object.defineProperty(exports,"AggTypeFieldFilters",{enumerable:true,get:function get(){return _search.AggTypeFieldFilters}});Object.defineProperty(exports,"AggTypeFilters",{enumerable:true,get:function get(){return _search.AggTypeFilters}});Object.defineProperty(exports,"AggConfigOptions",{enumerable:true,get:function get(){return _search.AggConfigOptions}});Object.defineProperty(exports,"BUCKET_TYPES",{enumerable:true,get:function get(){return _search.BUCKET_TYPES}});Object.defineProperty(exports,"DateRangeKey",{enumerable:true,get:function get(){return _search.DateRangeKey}});Object.defineProperty(exports,"IAggConfig",{enumerable:true,get:function get(){return _search.IAggConfig}});Object.defineProperty(exports,"IAggConfigs",{enumerable:true,get:function get(){return _search.IAggConfigs}});Object.defineProperty(exports,"IAggGroupNames",{enumerable:true,get:function get(){return _search.IAggGroupNames}});Object.defineProperty(exports,"IAggType",{enumerable:true,get:function get(){return _search.IAggType}});Object.defineProperty(exports,"IFieldParamType",{enumerable:true,get:function get(){return _search.IFieldParamType}});Object.defineProperty(exports,"IMetricAggType",{enumerable:true,get:function get(){return _search.IMetricAggType}});Object.defineProperty(exports,"IpRangeKey",{enumerable:true,get:function get(){return _search.IpRangeKey}});Object.defineProperty(exports,"METRIC_TYPES",{enumerable:true,get:function get(){return _search.METRIC_TYPES}});Object.defineProperty(exports,"OptionedParamEditorProps",{enumerable:true,get:function get(){return _search.OptionedParamEditorProps}});Object.defineProperty(exports,"OptionedParamType",{enumerable:true,get:function get(){return _search.OptionedParamType}});Object.defineProperty(exports,"OptionedValueProp",{enumerable:true,get:function get(){return _search.OptionedValueProp}});Object.defineProperty(exports,"ES_SEARCH_STRATEGY",{enumerable:true,get:function get(){return _search.ES_SEARCH_STRATEGY}});Object.defineProperty(exports,"SYNC_SEARCH_STRATEGY",{enumerable:true,get:function get(){return _search.SYNC_SEARCH_STRATEGY}});Object.defineProperty(exports,"getEsPreference",{enumerable:true,get:function get(){return _search.getEsPreference}});Object.defineProperty(exports,"getSearchErrorType",{enumerable:true,get:function get(){return _search.getSearchErrorType}});Object.defineProperty(exports,"ISearchContext",{enumerable:true,get:function get(){return _search.ISearchContext}});Object.defineProperty(exports,"TSearchStrategyProvider",{enumerable:true,get:function get(){return _search.TSearchStrategyProvider}});Object.defineProperty(exports,"ISearchStrategy",{enumerable:true,get:function get(){return _search.ISearchStrategy}});Object.defineProperty(exports,"ISearch",{enumerable:true,get:function get(){return _search.ISearch}});Object.defineProperty(exports,"ISearchOptions",{enumerable:true,get:function get(){return _search.ISearchOptions}});Object.defineProperty(exports,"IRequestTypesMap",{enumerable:true,get:function get(){return _search.IRequestTypesMap}});Object.defineProperty(exports,"IResponseTypesMap",{enumerable:true,get:function get(){return _search.IResponseTypesMap}});Object.defineProperty(exports,"ISearchGeneric",{enumerable:true,get:function get(){return _search.ISearchGeneric}});Object.defineProperty(exports,"IEsSearchResponse",{enumerable:true,get:function get(){return _search.IEsSearchResponse}});Object.defineProperty(exports,"IEsSearchRequest",{enumerable:true,get:function get(){return _search.IEsSearchRequest}});Object.defineProperty(exports,"ISyncSearchRequest",{enumerable:true,get:function get(){return _search.ISyncSearchRequest}});Object.defineProperty(exports,"IKibanaSearchResponse",{enumerable:true,get:function get(){return _search.IKibanaSearchResponse}});Object.defineProperty(exports,"IKibanaSearchRequest",{enumerable:true,get:function get(){return _search.IKibanaSearchRequest}});Object.defineProperty(exports,"SearchRequest",{enumerable:true,get:function get(){return _search.SearchRequest}});Object.defineProperty(exports,"SearchResponse",{enumerable:true,get:function get(){return _search.SearchResponse}});Object.defineProperty(exports,"SearchError",{enumerable:true,get:function get(){return _search.SearchError}});Object.defineProperty(exports,"SearchStrategyProvider",{enumerable:true,get:function get(){return _search.SearchStrategyProvider}});Object.defineProperty(exports,"ISearchSource",{enumerable:true,get:function get(){return _search.ISearchSource}});Object.defineProperty(exports,"SearchSource",{enumerable:true,get:function get(){return _search.SearchSource}});Object.defineProperty(exports,"SearchSourceFields",{enumerable:true,get:function get(){return _search.SearchSourceFields}});Object.defineProperty(exports,"EsQuerySortValue",{enumerable:true,get:function get(){return _search.EsQuerySortValue}});Object.defineProperty(exports,"SortDirection",{enumerable:true,get:function get(){return _search.SortDirection}});Object.defineProperty(exports,"FetchOptions",{enumerable:true,get:function get(){return _search.FetchOptions}});Object.defineProperty(exports,"TabbedAggColumn",{enumerable:true,get:function get(){return _search.TabbedAggColumn}});Object.defineProperty(exports,"TabbedAggRow",{enumerable:true,get:function get(){return _search.TabbedAggRow}});Object.defineProperty(exports,"TabbedTable",{enumerable:true,get:function get(){return _search.TabbedTable}});Object.defineProperty(exports,"SearchInterceptor",{enumerable:true,get:function get(){return _search.SearchInterceptor}});Object.defineProperty(exports,"RequestTimeoutError",{enumerable:true,get:function get(){return _search.RequestTimeoutError}});Object.defineProperty(exports,"SearchBar",{enumerable:true,get:function get(){return _ui.SearchBar}});Object.defineProperty(exports,"SearchBarProps",{enumerable:true,get:function get(){return _ui.SearchBarProps}});Object.defineProperty(exports,"StatefulSearchBarProps",{enumerable:true,get:function get(){return _ui.StatefulSearchBarProps}});Object.defineProperty(exports,"FilterBar",{enumerable:true,get:function get(){return _ui.FilterBar}});Object.defineProperty(exports,"QueryStringInput",{enumerable:true,get:function get(){return _ui.QueryStringInput}});Object.defineProperty(exports,"IndexPatternSelect",{enumerable:true,get:function get(){return _ui.IndexPatternSelect}});Object.defineProperty(exports,"Plugin",{enumerable:true,get:function get(){return _plugin.DataPublicPlugin}});Object.defineProperty(exports,"DataPublicPluginSetup",{enumerable:true,get:function get(){return _types.DataPublicPluginSetup}});Object.defineProperty(exports,"DataPublicPluginStart",{enumerable:true,get:function get(){return _types.DataPublicPluginStart}});Object.defineProperty(exports,"IDataPluginServices",{enumerable:true,get:function get(){return _types.IDataPluginServices}});exports.search=exports.indexPatterns=exports.fieldFormats=exports.esQuery=exports.esKuery=exports.esFilters=void 0;__webpack_require__(544);var _common=__webpack_require__(52);var _filter_bar=__webpack_require__(218);var _query=__webpack_require__(125);var _field_formats=__webpack_require__(215);var _field_formats2=__webpack_require__(322);var _index_patterns=__webpack_require__(222);var _autocomplete=__webpack_require__(223);var _search=__webpack_require__(701);var _ui=__webpack_require__(179);var _plugin=__webpack_require__(859);var _types=__webpack_require__(879);var esFilters={FilterLabel:_filter_bar.FilterLabel,FILTERS:_common.FILTERS,FilterStateStore:_common.FilterStateStore,buildEmptyFilter:_common.buildEmptyFilter,buildPhrasesFilter:_common.buildPhrasesFilter,buildExistsFilter:_common.buildExistsFilter,buildPhraseFilter:_common.buildPhraseFilter,buildQueryFilter:_common.buildQueryFilter,buildRangeFilter:_common.buildRangeFilter,isPhraseFilter:_common.isPhraseFilter,isExistsFilter:_common.isExistsFilter,isPhrasesFilter:_common.isPhrasesFilter,isRangeFilter:_common.isRangeFilter,isMatchAllFilter:_common.isMatchAllFilter,isMissingFilter:_common.isMissingFilter,isQueryStringFilter:_common.isQueryStringFilter,isFilterPinned:_common.isFilterPinned,toggleFilterNegated:_common.toggleFilterNegated,disableFilter:_common.disableFilter,getPhraseFilterField:_common.getPhraseFilterField,getPhraseFilterValue:_common.getPhraseFilterValue,getDisplayValueFromFilter:_common.getDisplayValueFromFilter,compareFilters:_common.compareFilters,COMPARE_ALL_OPTIONS:_common.COMPARE_ALL_OPTIONS,generateFilters:_query.generateFilters,onlyDisabledFiltersChanged:_query.onlyDisabledFiltersChanged,changeTimeFilter:_query.changeTimeFilter,mapAndFlattenFilters:_query.mapAndFlattenFilters,extractTimeFilter:_query.extractTimeFilter};exports.esFilters=esFilters;var esKuery={nodeTypes:_common.nodeTypes,fromKueryExpression:_common.fromKueryExpression,toElasticsearchQuery:_common.toElasticsearchQuery};exports.esKuery=esKuery;var esQuery={buildEsQuery:_common.buildEsQuery,getEsQueryConfig:_common.getEsQueryConfig,buildQueryFromFilters:_common.buildQueryFromFilters,luceneStringToDsl:_common.luceneStringToDsl,decorateQuery:_common.decorateQuery};exports.esQuery=esQuery;var fieldFormats={FieldFormat:_field_formats.FieldFormat,FieldFormatsRegistry:_field_formats.FieldFormatsRegistry,serialize:_field_formats.serializeFieldFormat,DEFAULT_CONVERTER_COLOR:_field_formats.DEFAULT_CONVERTER_COLOR,HTML_CONTEXT_TYPE:_field_formats.HTML_CONTEXT_TYPE,TEXT_CONTEXT_TYPE:_field_formats.TEXT_CONTEXT_TYPE,FIELD_FORMAT_IDS:_field_formats.FIELD_FORMAT_IDS,BoolFormat:_field_formats.BoolFormat,BytesFormat:_field_formats.BytesFormat,ColorFormat:_field_formats.ColorFormat,DateFormat:_field_formats2.DateFormat,DateNanosFormat:_field_formats.DateNanosFormat,DurationFormat:_field_formats.DurationFormat,IpFormat:_field_formats.IpFormat,NumberFormat:_field_formats.NumberFormat,PercentFormat:_field_formats.PercentFormat,RelativeDateFormat:_field_formats.RelativeDateFormat,SourceFormat:_field_formats.SourceFormat,StaticLookupFormat:_field_formats.StaticLookupFormat,UrlFormat:_field_formats.UrlFormat,StringFormat:_field_formats.StringFormat,TruncateFormat:_field_formats.TruncateFormat};exports.fieldFormats=fieldFormats;var indexPatterns={ILLEGAL_CHARACTERS_KEY:_index_patterns.ILLEGAL_CHARACTERS_KEY,CONTAINS_SPACES_KEY:_index_patterns.CONTAINS_SPACES_KEY,ILLEGAL_CHARACTERS_VISIBLE:_index_patterns.ILLEGAL_CHARACTERS_VISIBLE,ILLEGAL_CHARACTERS:_index_patterns.ILLEGAL_CHARACTERS,isDefault:_index_patterns.isDefault,isFilterable:_common.isFilterable,isNestedField:_common.isNestedField,validate:_index_patterns.validateIndexPattern,getFromSavedObject:_index_patterns.getFromSavedObject,flattenHitWrapper:_index_patterns.flattenHitWrapper,getRoutes:_index_patterns.getRoutes,formatHitProvider:_index_patterns.formatHitProvider};exports.indexPatterns=indexPatterns;var search={aggs:{AggConfigs:_search.AggConfigs,aggGroupNamesMap:_search.aggGroupNamesMap,aggTypeFilters:_search.aggTypeFilters,CidrMask:_search.CidrMask,convertDateRangeToString:_search.convertDateRangeToString,convertIPRangeToString:_search.convertIPRangeToString,dateHistogramInterval:_common.dateHistogramInterval,intervalOptions:_search.intervalOptions,InvalidEsCalendarIntervalError:_common.InvalidEsCalendarIntervalError,InvalidEsIntervalFormatError:_common.InvalidEsIntervalFormatError,isDateHistogramBucketAggConfig:_search.isDateHistogramBucketAggConfig,isStringType:_search.isStringType,isType:_search.isType,isValidEsInterval:_common.isValidEsInterval,isValidInterval:_common.isValidInterval,parentPipelineType:_search.parentPipelineType,parseEsInterval:_common.parseEsInterval,parseInterval:_common.parseInterval,propFilter:_search.propFilter,siblingPipelineType:_search.siblingPipelineType,termsAggFilter:_search.termsAggFilter,toAbsoluteDates:_common.toAbsoluteDates},getRequestInspectorStats:_search.getRequestInspectorStats,getResponseInspectorStats:_search.getResponseInspectorStats,tabifyAggResponse:_search.tabifyAggResponse,tabifyGetColumns:_search.tabifyGetColumns};exports.search=search;function plugin(initializerContext){return new _plugin.DataPublicPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.isMetricAggType=isMetricAggType;exports.MetricAggType=void 0;var _i18n=__webpack_require__(1);var _agg_type=__webpack_require__(177);var _metric_agg_types=__webpack_require__(62);var _common=__webpack_require__(52);var _services=__webpack_require__(61);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var metricType="metrics";var MetricAggType=function(_AggType){_inherits(MetricAggType,_AggType);function MetricAggType(config){var _this;_classCallCheck(this,MetricAggType);_this=_possibleConstructorReturn(this,_getPrototypeOf(MetricAggType).call(this,config));_defineProperty(_assertThisInitialized(_this),"subtype",void 0);_defineProperty(_assertThisInitialized(_this),"isScalable",void 0);_defineProperty(_assertThisInitialized(_this),"type",metricType);_defineProperty(_assertThisInitialized(_this),"getKey",(function(){}));_this.getValue=config.getValue||function(agg,bucket){var isSettableToZero=[_metric_agg_types.METRIC_TYPES.CARDINALITY,_metric_agg_types.METRIC_TYPES.SUM].includes(agg.type.name);if(!bucket[agg.id]&&isSettableToZero)return 0;return bucket[agg.id]&&bucket[agg.id].value};_this.getFormat=config.getFormat||function(agg){var fieldFormatsService=(0,_services.getFieldFormats)();var field=agg.getField();return field?field.format:fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.NUMBER)};_this.subtype=config.subtype||_i18n.i18n.translate("data.search.aggs.metrics.metricAggregationsSubtypeTitle",{defaultMessage:"Metric Aggregations"});_this.isScalable=config.isScalable||function(){return false};return _this}return MetricAggType}(_agg_type.AggType);exports.MetricAggType=MetricAggType;function isMetricAggType(aggConfig){return aggConfig&&aggConfig.type===metricType}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getAnalysisType",{enumerable:true,get:function get(){return _analytics.getAnalysisType}});Object.defineProperty(exports,"getDependentVar",{enumerable:true,get:function get(){return _analytics.getDependentVar}});Object.defineProperty(exports,"getPredictionFieldName",{enumerable:true,get:function get(){return _analytics.getPredictionFieldName}});Object.defineProperty(exports,"isOutlierAnalysis",{enumerable:true,get:function get(){return _analytics.isOutlierAnalysis}});Object.defineProperty(exports,"refreshAnalyticsList$",{enumerable:true,get:function get(){return _analytics.refreshAnalyticsList$}});Object.defineProperty(exports,"useRefreshAnalyticsList",{enumerable:true,get:function get(){return _analytics.useRefreshAnalyticsList}});Object.defineProperty(exports,"DataFrameAnalyticsId",{enumerable:true,get:function get(){return _analytics.DataFrameAnalyticsId}});Object.defineProperty(exports,"DataFrameAnalyticsConfig",{enumerable:true,get:function get(){return _analytics.DataFrameAnalyticsConfig}});Object.defineProperty(exports,"IndexName",{enumerable:true,get:function get(){return _analytics.IndexName}});Object.defineProperty(exports,"IndexPattern",{enumerable:true,get:function get(){return _analytics.IndexPattern}});Object.defineProperty(exports,"REFRESH_ANALYTICS_LIST_STATE",{enumerable:true,get:function get(){return _analytics.REFRESH_ANALYTICS_LIST_STATE}});Object.defineProperty(exports,"ANALYSIS_CONFIG_TYPE",{enumerable:true,get:function get(){return _analytics.ANALYSIS_CONFIG_TYPE}});Object.defineProperty(exports,"RegressionEvaluateResponse",{enumerable:true,get:function get(){return _analytics.RegressionEvaluateResponse}});Object.defineProperty(exports,"getValuesFromResponse",{enumerable:true,get:function get(){return _analytics.getValuesFromResponse}});Object.defineProperty(exports,"loadEvalData",{enumerable:true,get:function get(){return _analytics.loadEvalData}});Object.defineProperty(exports,"loadDocsCount",{enumerable:true,get:function get(){return _analytics.loadDocsCount}});Object.defineProperty(exports,"Eval",{enumerable:true,get:function get(){return _analytics.Eval}});Object.defineProperty(exports,"getPredictedFieldName",{enumerable:true,get:function get(){return _analytics.getPredictedFieldName}});Object.defineProperty(exports,"INDEX_STATUS",{enumerable:true,get:function get(){return _analytics.INDEX_STATUS}});Object.defineProperty(exports,"SEARCH_SIZE",{enumerable:true,get:function get(){return _analytics.SEARCH_SIZE}});Object.defineProperty(exports,"defaultSearchQuery",{enumerable:true,get:function get(){return _analytics.defaultSearchQuery}});Object.defineProperty(exports,"SearchQuery",{enumerable:true,get:function get(){return _analytics.SearchQuery}});Object.defineProperty(exports,"getDefaultSelectableFields",{enumerable:true,get:function get(){return _fields.getDefaultSelectableFields}});Object.defineProperty(exports,"getDefaultRegressionFields",{enumerable:true,get:function get(){return _fields.getDefaultRegressionFields}});Object.defineProperty(exports,"getDefaultClassificationFields",{enumerable:true,get:function get(){return _fields.getDefaultClassificationFields}});Object.defineProperty(exports,"getDefaultFieldsFromJobCaps",{enumerable:true,get:function get(){return _fields.getDefaultFieldsFromJobCaps}});Object.defineProperty(exports,"getFlattenedFields",{enumerable:true,get:function get(){return _fields.getFlattenedFields}});Object.defineProperty(exports,"sortColumns",{enumerable:true,get:function get(){return _fields.sortColumns}});Object.defineProperty(exports,"sortRegressionResultsColumns",{enumerable:true,get:function get(){return _fields.sortRegressionResultsColumns}});Object.defineProperty(exports,"sortRegressionResultsFields",{enumerable:true,get:function get(){return _fields.sortRegressionResultsFields}});Object.defineProperty(exports,"toggleSelectedField",{enumerable:true,get:function get(){return _fields.toggleSelectedField}});Object.defineProperty(exports,"toggleSelectedFieldSimple",{enumerable:true,get:function get(){return _fields.toggleSelectedFieldSimple}});Object.defineProperty(exports,"EsId",{enumerable:true,get:function get(){return _fields.EsId}});Object.defineProperty(exports,"EsDoc",{enumerable:true,get:function get(){return _fields.EsDoc}});Object.defineProperty(exports,"EsDocSource",{enumerable:true,get:function get(){return _fields.EsDocSource}});Object.defineProperty(exports,"EsFieldName",{enumerable:true,get:function get(){return _fields.EsFieldName}});Object.defineProperty(exports,"MAX_COLUMNS",{enumerable:true,get:function get(){return _fields.MAX_COLUMNS}});Object.defineProperty(exports,"euiDataGridStyle",{enumerable:true,get:function get(){return _data_grid.euiDataGridStyle}});Object.defineProperty(exports,"euiDataGridToolbarSettings",{enumerable:true,get:function get(){return _data_grid.euiDataGridToolbarSettings}});var _analytics=__webpack_require__(76);var _fields=__webpack_require__(137);var _data_grid=__webpack_require__(916)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.loadNewJobCapabilities=loadNewJobCapabilities;exports.newJobCapsService=void 0;var _fields=__webpack_require__(118);var _public=__webpack_require__(63);var _ml_api_service=__webpack_require__(51);var _index_utils=__webpack_require__(70);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function loadNewJobCapabilities(indexPatternId,savedSearchId,indexPatterns){return new Promise(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(resolve,reject){var indexPattern,_ref2,_indexPattern;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(indexPatternId!==undefined)){_context.next=9;break}_context.next=3;return indexPatterns.get(indexPatternId);case 3:indexPattern=_context.sent;_context.next=6;return newJobCapsService.initializeFromIndexPattern(indexPattern);case 6:resolve(newJobCapsService.newJobCaps);_context.next=24;break;case 9:if(!(savedSearchId!==undefined)){_context.next=23;break}_context.next=12;return(0,_index_utils.getIndexPatternAndSavedSearch)(savedSearchId);case 12:_ref2=_context.sent;_indexPattern=_ref2.indexPattern;if(!(_indexPattern===null)){_context.next=18;break}console.error("Cannot retrieve index pattern from saved search");reject();return _context.abrupt("return");case 18:_context.next=20;return newJobCapsService.initializeFromIndexPattern(_indexPattern);case 20:resolve(newJobCapsService.newJobCaps);_context.next=24;break;case 23:reject();case 24:case"end":return _context.stop()}}}),_callee)})));return function(_x,_x2){return _ref.apply(this,arguments)}}())}var categoryFieldTypes=[_public.ES_FIELD_TYPES.TEXT,_public.ES_FIELD_TYPES.KEYWORD,_public.ES_FIELD_TYPES.IP];var NewJobCapsService=function(){function NewJobCapsService(){_classCallCheck(this,NewJobCapsService);_defineProperty(this,"_fields",[]);_defineProperty(this,"_catFields",[]);_defineProperty(this,"_dateFields",[]);_defineProperty(this,"_aggs",[]);_defineProperty(this,"_includeEventRateField",true);_defineProperty(this,"_removeTextFields",true)}_createClass(NewJobCapsService,[{key:"initializeFromIndexPattern",value:function(){var _initializeFromIndexPattern=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(indexPattern){var includeEventRateField,removeTextFields,resp,_createObjects,allFields,aggs,_processTextAndKeywor,fieldsPreferringKeyword,fieldsPreferringText,catFields,dateFields,fields,_args2=arguments;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:includeEventRateField=_args2.length>1&&_args2[1]!==undefined?_args2[1]:true;removeTextFields=_args2.length>2&&_args2[2]!==undefined?_args2[2]:true;_context2.prev=2;this._includeEventRateField=includeEventRateField;this._removeTextFields=removeTextFields;_context2.next=7;return _ml_api_service.ml.jobs.newJobCaps(indexPattern.title,indexPattern.type==="rollup");case 7:resp=_context2.sent;_createObjects=createObjects(resp,indexPattern.title),allFields=_createObjects.fields,aggs=_createObjects.aggs;if(this._includeEventRateField===true){addEventRateField(aggs,allFields)}_processTextAndKeywor=processTextAndKeywordFields(allFields),fieldsPreferringKeyword=_processTextAndKeywor.fieldsPreferringKeyword,fieldsPreferringText=_processTextAndKeywor.fieldsPreferringText;catFields=fieldsPreferringText.filter((function(f){return f.type===_public.ES_FIELD_TYPES.KEYWORD||f.type===_public.ES_FIELD_TYPES.TEXT}));dateFields=fieldsPreferringText.filter((function(f){return f.type===_public.ES_FIELD_TYPES.DATE}));fields=this._removeTextFields?fieldsPreferringKeyword:allFields;this._fields=fields;this._catFields=catFields;this._dateFields=dateFields;this._aggs=aggs;_context2.next=23;break;case 20:_context2.prev=20;_context2.t0=_context2["catch"](2);console.error("Unable to load new job capabilities",_context2.t0);case 23:case"end":return _context2.stop()}}}),_callee2,this,[[2,20]])})));function initializeFromIndexPattern(_x3){return _initializeFromIndexPattern.apply(this,arguments)}return initializeFromIndexPattern}()},{key:"getFieldById",value:function getFieldById(id){var field=this._fields.find((function(f){return f.id===id}));return field===undefined?null:field}},{key:"getAggById",value:function getAggById(id){var agg=this._aggs.find((function(f){return f.id===id}));return agg===undefined?null:agg}},{key:"fields",get:function get(){return this._fields}},{key:"catFields",get:function get(){return this._catFields}},{key:"dateFields",get:function get(){return this._dateFields}},{key:"aggs",get:function get(){return this._aggs}},{key:"newJobCaps",get:function get(){return{fields:this._fields,aggs:this._aggs}}},{key:"categoryFields",get:function get(){return this._fields.filter((function(f){return categoryFieldTypes.includes(f.type)}))}}]);return NewJobCapsService}();function createObjects(resp,indexPatternTitle){var results=resp[indexPatternTitle];var fields=[];var aggs=[];var aggMap={};var aggIdMap={};if(results!==undefined){results.aggs.forEach((function(a){var agg=_objectSpread({},a,{},a.fieldIds!==undefined?{fields:[]}:{});aggMap[agg.id]=agg;aggs.push(agg)}));results.fields.forEach((function(f){var field=_objectSpread({},f,{aggs:[]});if(field.aggIds!==undefined){aggIdMap[field.id]=field.aggIds}fields.push(field)}));fields.forEach((function(field){aggIdMap[field.id].forEach((function(aggId){mix(field,aggMap[aggId])}))}))}fields.forEach((function(f){return delete f.aggIds}));aggs.forEach((function(a){return delete a.fieldIds}));return{fields:fields,aggs:aggs}}function mix(field,agg){if(agg.fields===undefined){agg.fields=[]}if(field.aggs===undefined){field.aggs=[]}agg.fields.push(field);field.aggs.push(agg)}function addEventRateField(aggs,fields){var eventRateField={id:_fields.EVENT_RATE_FIELD_ID,name:"Event rate",type:_public.ES_FIELD_TYPES.INTEGER,aggregatable:true,aggs:[]};aggs.forEach((function(a){if(eventRateField.aggs!==undefined&&a.fields===undefined){a.fields=[eventRateField];eventRateField.aggs.push(a)}}));fields.splice(0,0,eventRateField)}function processTextAndKeywordFields(fields){var keywordIds=fields.filter((function(f){return f.type===_public.ES_FIELD_TYPES.KEYWORD})).map((function(f){return f.id}));var textIds=fields.filter((function(f){return f.type===_public.ES_FIELD_TYPES.TEXT})).map((function(f){return f.id}));var fieldsPreferringKeyword=fields.filter((function(f){return f.type!==_public.ES_FIELD_TYPES.TEXT||f.type===_public.ES_FIELD_TYPES.TEXT&&keywordIds.includes("".concat(f.id,".keyword"))===false}));var fieldsPreferringText=fields.filter((function(f){return f.type!==_public.ES_FIELD_TYPES.KEYWORD||f.type===_public.ES_FIELD_TYPES.KEYWORD&&textIds.includes(f.id.replace(/\.keyword$/,""))===false}));return{fieldsPreferringKeyword:fieldsPreferringKeyword,fieldsPreferringText:fieldsPreferringText}}var newJobCapsService=new NewJobCapsService;exports.newJobCapsService=newJobCapsService},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.loadIndexPatterns=loadIndexPatterns;exports.loadSavedSearches=loadSavedSearches;exports.loadSavedSearchById=loadSavedSearchById;exports.getIndexPatterns=getIndexPatterns;exports.getIndexPatternsContract=getIndexPatternsContract;exports.getIndexPatternNames=getIndexPatternNames;exports.getIndexPatternIdFromName=getIndexPatternIdFromName;exports.getIndexPatternAndSavedSearch=getIndexPatternAndSavedSearch;exports.getQueryFromSavedSearch=getQueryFromSavedSearch;exports.getIndexPatternById=getIndexPatternById;exports.getSavedSearchById=getSavedSearchById;exports.timeBasedIndexCheck=timeBasedIndexCheck;var _i18n=__webpack_require__(1);var _dependency_cache=__webpack_require__(5);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var indexPatternCache=[];var savedSearchesCache=[];var indexPatternsContract=null;function loadIndexPatterns(indexPatterns){indexPatternsContract=indexPatterns;var savedObjectsClient=(0,_dependency_cache.getSavedObjectsClient)();return savedObjectsClient.find({type:"index-pattern",fields:["id","title","type","fields"],perPage:1e4}).then((function(response){indexPatternCache=response.savedObjects;return indexPatternCache}))}function loadSavedSearches(){var savedObjectsClient=(0,_dependency_cache.getSavedObjectsClient)();return savedObjectsClient.find({type:"search",perPage:1e4}).then((function(response){savedSearchesCache=response.savedObjects;return savedSearchesCache}))}function loadSavedSearchById(_x){return _loadSavedSearchById.apply(this,arguments)}function _loadSavedSearchById(){_loadSavedSearchById=_asyncToGenerator(regeneratorRuntime.mark((function _callee(id){var savedObjectsClient,ss;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:savedObjectsClient=(0,_dependency_cache.getSavedObjectsClient)();_context.next=3;return savedObjectsClient.get("search",id);case 3:ss=_context.sent;return _context.abrupt("return",ss.error===undefined?ss:null);case 5:case"end":return _context.stop()}}}),_callee)})));return _loadSavedSearchById.apply(this,arguments)}function getIndexPatterns(){return indexPatternCache}function getIndexPatternsContract(){return indexPatternsContract}function getIndexPatternNames(){return indexPatternCache.map((function(i){return i.attributes&&i.attributes.title}))}function getIndexPatternIdFromName(name){for(var j=0;j<indexPatternCache.length;j++){if(indexPatternCache[j].get("title")===name){return indexPatternCache[j].id}}return null}function getIndexPatternAndSavedSearch(_x2){return _getIndexPatternAndSavedSearch.apply(this,arguments)}function _getIndexPatternAndSavedSearch(){_getIndexPatternAndSavedSearch=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(savedSearchId){var _ss$references$find;var resp,ss,indexPatternId;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:resp={savedSearch:null,indexPattern:null};if(!(savedSearchId===undefined)){_context2.next=3;break}return _context2.abrupt("return",resp);case 3:_context2.next=5;return loadSavedSearchById(savedSearchId);case 5:ss=_context2.sent;if(!(ss===null)){_context2.next=8;break}return _context2.abrupt("return",resp);case 8:indexPatternId=(_ss$references$find=ss.references.find((function(r){return r.type==="index-pattern"})))===null||_ss$references$find===void 0?void 0:_ss$references$find.id;_context2.next=11;return getIndexPatternById(indexPatternId);case 11:resp.indexPattern=_context2.sent;resp.savedSearch=ss;return _context2.abrupt("return",resp);case 14:case"end":return _context2.stop()}}}),_callee2)})));return _getIndexPatternAndSavedSearch.apply(this,arguments)}function getQueryFromSavedSearch(savedSearch){var search=savedSearch.attributes.kibanaSavedObjectMeta;return JSON.parse(search.searchSourceJSON)}function getIndexPatternById(id){if(indexPatternsContract!==null){return indexPatternsContract.get(id)}else{throw new Error("Index patterns are not initialized!")}}function getSavedSearchById(id){return savedSearchesCache.find((function(s){return s.id===id}))}function timeBasedIndexCheck(indexPattern){var showNotification=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!indexPattern.isTimeBased()){if(showNotification){var toastNotifications=(0,_dependency_cache.getToastNotifications)();toastNotifications.addWarning({title:_i18n.i18n.translate("xpack.ml.indexPatternNotBasedOnTimeSeriesNotificationTitle",{defaultMessage:"The index pattern {indexPatternTitle} is not based on a time series",values:{indexPatternTitle:indexPattern.title}}),text:_i18n.i18n.translate("xpack.ml.indexPatternNotBasedOnTimeSeriesNotificationDescription",{defaultMessage:"Anomaly detection only runs over time-based indices"})})}return false}else{return true}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FieldFormat",{enumerable:true,get:function get(){return _field_format.FieldFormat}});exports.FIELD_FORMAT_IDS=void 0;var _field_format=__webpack_require__(78);var FIELD_FORMAT_IDS;exports.FIELD_FORMAT_IDS=FIELD_FORMAT_IDS;(function(FIELD_FORMAT_IDS){FIELD_FORMAT_IDS["_SOURCE"]="_source";FIELD_FORMAT_IDS["BOOLEAN"]="boolean";FIELD_FORMAT_IDS["BYTES"]="bytes";FIELD_FORMAT_IDS["COLOR"]="color";FIELD_FORMAT_IDS["CUSTOM"]="custom";FIELD_FORMAT_IDS["DATE"]="date";FIELD_FORMAT_IDS["DATE_NANOS"]="date_nanos";FIELD_FORMAT_IDS["DURATION"]="duration";FIELD_FORMAT_IDS["IP"]="ip";FIELD_FORMAT_IDS["NUMBER"]="number";FIELD_FORMAT_IDS["PERCENT"]="percent";FIELD_FORMAT_IDS["RELATIVE_DATE"]="relative_date";FIELD_FORMAT_IDS["STATIC_LOOKUP"]="static_lookup";FIELD_FORMAT_IDS["STRING"]="string";FIELD_FORMAT_IDS["TRUNCATE"]="truncate";FIELD_FORMAT_IDS["URL"]="url"})(FIELD_FORMAT_IDS||(exports.FIELD_FORMAT_IDS=FIELD_FORMAT_IDS={}))},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"checkBasicLicense",{enumerable:true,get:function get(){return _check_license.checkBasicLicense}});Object.defineProperty(exports,"checkFullLicense",{enumerable:true,get:function get(){return _check_license.checkFullLicense}});Object.defineProperty(exports,"hasLicenseExpired",{enumerable:true,get:function get(){return _check_license.hasLicenseExpired}});Object.defineProperty(exports,"isFullLicense",{enumerable:true,get:function get(){return _check_license.isFullLicense}});Object.defineProperty(exports,"setLicenseCache",{enumerable:true,get:function get(){return _check_license.setLicenseCache}});var _check_license=__webpack_require__(536)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseInterval=parseInterval;var _moment=__webpack_require__(32);var _datemath=_interopRequireDefault(__webpack_require__(95));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var INTERVAL_STRING_RE=new RegExp("^([0-9]*)\\s*("+_datemath.default.units.join("|")+")$");var SUPPORT_ZERO_DURATION_UNITS=["ms","s","m","h"];function parseInterval(interval){var matches=String(interval).trim().match(INTERVAL_STRING_RE);if(!Array.isArray(matches)||matches.length<3){return null}try{var value=parseInt(matches[1],10);var unit=matches[2];if(isNaN(value)||value<1&&SUPPORT_ZERO_DURATION_UNITS.indexOf(unit)===-1){return null}return(0,_moment.duration)(value,unit)}catch(e){return null}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSeverity=getSeverity;exports.getSeverityType=getSeverityType;exports.getSeverityWithLow=getSeverityWithLow;exports.getSeverityColor=getSeverityColor;exports.getMultiBucketImpactLabel=getMultiBucketImpactLabel;exports.getEntityFieldName=getEntityFieldName;exports.getEntityFieldValue=getEntityFieldValue;exports.getEntityFieldList=getEntityFieldList;exports.showActualForFunction=showActualForFunction;exports.showTypicalForFunction=showTypicalForFunction;exports.isRuleSupported=isRuleSupported;exports.aggregationTypeTransform=void 0;var _i18n=__webpack_require__(1);var _detector_rule=__webpack_require__(128);var _multi_bucket_impact=__webpack_require__(188);var _anomalies=__webpack_require__(387);var DISPLAY_ACTUAL_FUNCTIONS=["count","distinct_count","lat_long","mean","max","min","sum","median","varp","info_content","time"];var DISPLAY_TYPICAL_FUNCTIONS=["count","distinct_count","lat_long","mean","max","min","sum","median","varp","info_content","time"];var severityTypes;function getSeverityTypes(){if(severityTypes){return severityTypes}return severityTypes={critical:{id:_anomalies.ANOMALY_SEVERITY.CRITICAL,label:_i18n.i18n.translate("xpack.ml.anomalyUtils.severity.criticalLabel",{defaultMessage:"critical"})},major:{id:_anomalies.ANOMALY_SEVERITY.MAJOR,label:_i18n.i18n.translate("xpack.ml.anomalyUtils.severity.majorLabel",{defaultMessage:"major"})},minor:{id:_anomalies.ANOMALY_SEVERITY.MINOR,label:_i18n.i18n.translate("xpack.ml.anomalyUtils.severity.minorLabel",{defaultMessage:"minor"})},warning:{id:_anomalies.ANOMALY_SEVERITY.WARNING,label:_i18n.i18n.translate("xpack.ml.anomalyUtils.severity.warningLabel",{defaultMessage:"warning"})},unknown:{id:_anomalies.ANOMALY_SEVERITY.UNKNOWN,label:_i18n.i18n.translate("xpack.ml.anomalyUtils.severity.unknownLabel",{defaultMessage:"unknown"})},low:{id:_anomalies.ANOMALY_SEVERITY.LOW,label:_i18n.i18n.translate("xpack.ml.anomalyUtils.severityWithLow.lowLabel",{defaultMessage:"low"})}}}function getSeverity(normalizedScore){var severityTypesList=getSeverityTypes();if(normalizedScore>=_anomalies.ANOMALY_THRESHOLD.CRITICAL){return severityTypesList.critical}else if(normalizedScore>=_anomalies.ANOMALY_THRESHOLD.MAJOR){return severityTypesList.major}else if(normalizedScore>=_anomalies.ANOMALY_THRESHOLD.MINOR){return severityTypesList.minor}else if(normalizedScore>=_anomalies.ANOMALY_THRESHOLD.LOW){return severityTypesList.warning}else{return severityTypesList.unknown}}function getSeverityType(normalizedScore){if(normalizedScore>=75){return _anomalies.ANOMALY_SEVERITY.CRITICAL}else if(normalizedScore>=50){return _anomalies.ANOMALY_SEVERITY.MAJOR}else if(normalizedScore>=25){return _anomalies.ANOMALY_SEVERITY.MINOR}else if(normalizedScore>=3){return _anomalies.ANOMALY_SEVERITY.WARNING}else if(normalizedScore>=0){return _anomalies.ANOMALY_SEVERITY.LOW}else{return _anomalies.ANOMALY_SEVERITY.UNKNOWN}}function getSeverityWithLow(normalizedScore){var severityTypesList=getSeverityTypes();if(normalizedScore>=_anomalies.ANOMALY_THRESHOLD.CRITICAL){return severityTypesList.critical}else if(normalizedScore>=_anomalies.ANOMALY_THRESHOLD.MAJOR){return severityTypesList.major}else if(normalizedScore>=_anomalies.ANOMALY_THRESHOLD.MINOR){return severityTypesList.minor}else if(normalizedScore>=_anomalies.ANOMALY_THRESHOLD.WARNING){return severityTypesList.warning}else if(normalizedScore>=_anomalies.ANOMALY_THRESHOLD.LOW){return severityTypesList.low}else{return severityTypesList.unknown}}function getSeverityColor(normalizedScore){if(normalizedScore>=_anomalies.ANOMALY_THRESHOLD.CRITICAL){return"#fe5050"}else if(normalizedScore>=_anomalies.ANOMALY_THRESHOLD.MAJOR){return"#fba740"}else if(normalizedScore>=_anomalies.ANOMALY_THRESHOLD.MINOR){return"#fdec25"}else if(normalizedScore>=_anomalies.ANOMALY_THRESHOLD.WARNING){return"#8bc8fb"}else if(normalizedScore>=_anomalies.ANOMALY_THRESHOLD.LOW){return"#d2e9f7"}else{return"#ffffff"}}function getMultiBucketImpactLabel(multiBucketImpact){if(multiBucketImpact>=_multi_bucket_impact.MULTI_BUCKET_IMPACT.HIGH){return _i18n.i18n.translate("xpack.ml.anomalyUtils.multiBucketImpact.highLabel",{defaultMessage:"high"})}else if(multiBucketImpact>=_multi_bucket_impact.MULTI_BUCKET_IMPACT.MEDIUM){return _i18n.i18n.translate("xpack.ml.anomalyUtils.multiBucketImpact.mediumLabel",{defaultMessage:"medium"})}else if(multiBucketImpact>=_multi_bucket_impact.MULTI_BUCKET_IMPACT.LOW){return _i18n.i18n.translate("xpack.ml.anomalyUtils.multiBucketImpact.lowLabel",{defaultMessage:"low"})}else{return _i18n.i18n.translate("xpack.ml.anomalyUtils.multiBucketImpact.noneLabel",{defaultMessage:"none"})}}function getEntityFieldName(record){if(record.by_field_name!==undefined&&record.by_field_value!==undefined){return record.by_field_name}if(record.over_field_name!==undefined){return record.over_field_name}if(record.partition_field_name!==undefined){return record.partition_field_name}return undefined}function getEntityFieldValue(record){if(record.by_field_value!==undefined){return record.by_field_value}if(record.over_field_value!==undefined){return record.over_field_value}if(record.partition_field_value!==undefined){return record.partition_field_value}return undefined}function getEntityFieldList(record){var entityFields=[];if(record.partition_field_name!==undefined){entityFields.push({fieldName:record.partition_field_name,fieldValue:record.partition_field_value,fieldType:"partition"})}if(record.over_field_name!==undefined){entityFields.push({fieldName:record.over_field_name,fieldValue:record.over_field_value,fieldType:"over"})}if(record.by_field_name!==undefined&&record.over_field_name===undefined){entityFields.push({fieldName:record.by_field_name,fieldValue:record.by_field_value,fieldType:"by"})}return entityFields}function showActualForFunction(functionDescription){return DISPLAY_ACTUAL_FUNCTIONS.indexOf(functionDescription)>-1}function showTypicalForFunction(functionDescription){return DISPLAY_TYPICAL_FUNCTIONS.indexOf(functionDescription)>-1}function isRuleSupported(record){return _detector_rule.CONDITIONS_NOT_SUPPORTED_FUNCTIONS.indexOf(record.function)===-1||getEntityFieldName(record)!==undefined}var aggregationTypeTransform={toES:function toES(oldAggType){var newAggType=oldAggType;if(newAggType==="mean"){newAggType="avg"}else if(newAggType==="distinct_count"){newAggType="cardinality"}else if(newAggType==="median"){newAggType="percentiles"}return newAggType},toML:function toML(oldAggType){var newAggType=oldAggType;if(newAggType==="avg"){newAggType="mean"}else if(newAggType==="cardinality"){newAggType="distinct_count"}else if(newAggType==="percentiles"){newAggType="median"}return newAggType}};exports.aggregationTypeTransform=aggregationTypeTransform},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getValuesFromResponse=getValuesFromResponse;exports.getEvalQueryBody=getEvalQueryBody;exports.loadDocsCount=exports.loadEvalData=exports.useRefreshAnalyticsList=exports.refreshAnalyticsList$=exports.REFRESH_ANALYTICS_LIST_STATE=exports.isClassificationEvaluateResponse=exports.isRegressionEvaluateResponse=exports.isResultsSearchBoolQuery=exports.isClassificationAnalysis=exports.isRegressionAnalysis=exports.isOutlierAnalysis=exports.getPredictedFieldName=exports.getPredictionFieldName=exports.getTrainingPercent=exports.getDependentVar=exports.getAnalysisType=exports.INDEX_STATUS=exports.defaultSearchQuery=exports.TRAINING_PERCENT_MAX=exports.TRAINING_PERCENT_MIN=exports.SEARCH_SIZE=exports.ANALYSIS_CONFIG_TYPE=void 0;var _react=__webpack_require__(28);var _rxjs=__webpack_require__(33);var _operators=__webpack_require__(6);var _lodash=__webpack_require__(49);var _ml_api_service=__webpack_require__(51);var _errors=__webpack_require__(152);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ANALYSIS_CONFIG_TYPE;exports.ANALYSIS_CONFIG_TYPE=ANALYSIS_CONFIG_TYPE;(function(ANALYSIS_CONFIG_TYPE){ANALYSIS_CONFIG_TYPE["OUTLIER_DETECTION"]="outlier_detection";ANALYSIS_CONFIG_TYPE["REGRESSION"]="regression";ANALYSIS_CONFIG_TYPE["CLASSIFICATION"]="classification"})(ANALYSIS_CONFIG_TYPE||(exports.ANALYSIS_CONFIG_TYPE=ANALYSIS_CONFIG_TYPE={}));var SEARCH_SIZE=1e3;exports.SEARCH_SIZE=SEARCH_SIZE;var TRAINING_PERCENT_MIN=1;exports.TRAINING_PERCENT_MIN=TRAINING_PERCENT_MIN;var TRAINING_PERCENT_MAX=100;exports.TRAINING_PERCENT_MAX=TRAINING_PERCENT_MAX;var defaultSearchQuery={match_all:{}};exports.defaultSearchQuery=defaultSearchQuery;var INDEX_STATUS;exports.INDEX_STATUS=INDEX_STATUS;(function(INDEX_STATUS){INDEX_STATUS[INDEX_STATUS["UNUSED"]=0]="UNUSED";INDEX_STATUS[INDEX_STATUS["LOADING"]=1]="LOADING";INDEX_STATUS[INDEX_STATUS["LOADED"]=2]="LOADED";INDEX_STATUS[INDEX_STATUS["ERROR"]=3]="ERROR"})(INDEX_STATUS||(exports.INDEX_STATUS=INDEX_STATUS={}));var getAnalysisType=function getAnalysisType(analysis){var keys=Object.keys(analysis);if(keys.length===1){return keys[0]}return"unknown"};exports.getAnalysisType=getAnalysisType;var getDependentVar=function getDependentVar(analysis){var depVar="";if(isRegressionAnalysis(analysis)){depVar=analysis.regression.dependent_variable}if(isClassificationAnalysis(analysis)){depVar=analysis.classification.dependent_variable}return depVar};exports.getDependentVar=getDependentVar;var getTrainingPercent=function getTrainingPercent(analysis){var trainingPercent;if(isRegressionAnalysis(analysis)){trainingPercent=analysis.regression.training_percent}if(isClassificationAnalysis(analysis)){trainingPercent=analysis.classification.training_percent}return trainingPercent};exports.getTrainingPercent=getTrainingPercent;var getPredictionFieldName=function getPredictionFieldName(analysis){var predictionFieldName;if(isRegressionAnalysis(analysis)&&analysis.regression.prediction_field_name!==undefined){predictionFieldName=analysis.regression.prediction_field_name}else if(isClassificationAnalysis(analysis)&&analysis.classification.prediction_field_name!==undefined){predictionFieldName=analysis.classification.prediction_field_name}return predictionFieldName};exports.getPredictionFieldName=getPredictionFieldName;var getPredictedFieldName=function getPredictedFieldName(resultsField,analysis,forSort){var predictionFieldName=getPredictionFieldName(analysis);var defaultPredictionField="".concat(getDependentVar(analysis),"_prediction");var predictedField="".concat(resultsField,".").concat(predictionFieldName?predictionFieldName:defaultPredictionField);return predictedField};exports.getPredictedFieldName=getPredictedFieldName;var isOutlierAnalysis=function isOutlierAnalysis(arg){var keys=Object.keys(arg);return keys.length===1&&keys[0]===ANALYSIS_CONFIG_TYPE.OUTLIER_DETECTION};exports.isOutlierAnalysis=isOutlierAnalysis;var isRegressionAnalysis=function isRegressionAnalysis(arg){var keys=Object.keys(arg);return keys.length===1&&keys[0]===ANALYSIS_CONFIG_TYPE.REGRESSION};exports.isRegressionAnalysis=isRegressionAnalysis;var isClassificationAnalysis=function isClassificationAnalysis(arg){var keys=Object.keys(arg);return keys.length===1&&keys[0]===ANALYSIS_CONFIG_TYPE.CLASSIFICATION};exports.isClassificationAnalysis=isClassificationAnalysis;var isResultsSearchBoolQuery=function isResultsSearchBoolQuery(arg){var keys=Object.keys(arg);return keys.length===1&&keys[0]==="bool"};exports.isResultsSearchBoolQuery=isResultsSearchBoolQuery;var isRegressionEvaluateResponse=function isRegressionEvaluateResponse(arg){var _arg$regression,_arg$regression2;var keys=Object.keys(arg);return keys.length===1&&keys[0]===ANALYSIS_CONFIG_TYPE.REGRESSION&&(arg===null||arg===void 0?void 0:(_arg$regression=arg.regression)===null||_arg$regression===void 0?void 0:_arg$regression.mean_squared_error)!==undefined&&(arg===null||arg===void 0?void 0:(_arg$regression2=arg.regression)===null||_arg$regression2===void 0?void 0:_arg$regression2.r_squared)!==undefined};exports.isRegressionEvaluateResponse=isRegressionEvaluateResponse;var isClassificationEvaluateResponse=function isClassificationEvaluateResponse(arg){var _arg$classification;var keys=Object.keys(arg);return keys.length===1&&keys[0]===ANALYSIS_CONFIG_TYPE.CLASSIFICATION&&(arg===null||arg===void 0?void 0:(_arg$classification=arg.classification)===null||_arg$classification===void 0?void 0:_arg$classification.multiclass_confusion_matrix)!==undefined};exports.isClassificationEvaluateResponse=isClassificationEvaluateResponse;var REFRESH_ANALYTICS_LIST_STATE;exports.REFRESH_ANALYTICS_LIST_STATE=REFRESH_ANALYTICS_LIST_STATE;(function(REFRESH_ANALYTICS_LIST_STATE){REFRESH_ANALYTICS_LIST_STATE["ERROR"]="error";REFRESH_ANALYTICS_LIST_STATE["IDLE"]="idle";REFRESH_ANALYTICS_LIST_STATE["LOADING"]="loading";REFRESH_ANALYTICS_LIST_STATE["REFRESH"]="refresh"})(REFRESH_ANALYTICS_LIST_STATE||(exports.REFRESH_ANALYTICS_LIST_STATE=REFRESH_ANALYTICS_LIST_STATE={}));var refreshAnalyticsList$=new _rxjs.BehaviorSubject(REFRESH_ANALYTICS_LIST_STATE.IDLE);exports.refreshAnalyticsList$=refreshAnalyticsList$;var useRefreshAnalyticsList=function useRefreshAnalyticsList(){var callback=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};(0,_react.useEffect)((function(){var distinct$=refreshAnalyticsList$.pipe((0,_operators.distinctUntilChanged)());var subscriptions=[];if(typeof callback.onRefresh==="function"){callback.onRefresh();subscriptions.push(distinct$.pipe((0,_operators.filter)((function(state){return state===REFRESH_ANALYTICS_LIST_STATE.REFRESH}))).subscribe((function(){return typeof callback.onRefresh==="function"&&callback.onRefresh()})))}if(typeof callback.isLoading==="function"){subscriptions.push(distinct$.subscribe((function(state){return typeof callback.isLoading==="function"&&callback.isLoading(state===REFRESH_ANALYTICS_LIST_STATE.LOADING)})))}return function(){subscriptions.map((function(sub){return sub.unsubscribe()}))}}),[]);return{refresh:function refresh(){refreshAnalyticsList$.next(REFRESH_ANALYTICS_LIST_STATE.REFRESH);refreshAnalyticsList$.next(REFRESH_ANALYTICS_LIST_STATE.LOADING)}}};exports.useRefreshAnalyticsList=useRefreshAnalyticsList;var DEFAULT_SIG_FIGS=3;function getValuesFromResponse(response){var _response$regression,_response$regression$,_response$regression2,_response$regression3;var meanSquaredError=response===null||response===void 0?void 0:(_response$regression=response.regression)===null||_response$regression===void 0?void 0:(_response$regression$=_response$regression.mean_squared_error)===null||_response$regression$===void 0?void 0:_response$regression$.error;if(meanSquaredError){meanSquaredError=Number(meanSquaredError.toPrecision(DEFAULT_SIG_FIGS))}var rSquared=response===null||response===void 0?void 0:(_response$regression2=response.regression)===null||_response$regression2===void 0?void 0:(_response$regression3=_response$regression2.r_squared)===null||_response$regression3===void 0?void 0:_response$regression3.value;if(rSquared){rSquared=Number(rSquared.toPrecision(DEFAULT_SIG_FIGS))}return{meanSquaredError:meanSquaredError,rSquared:rSquared}}function getEvalQueryBody(_ref){var resultsField=_ref.resultsField,isTraining=_ref.isTraining,searchQuery=_ref.searchQuery,ignoreDefaultQuery=_ref.ignoreDefaultQuery;var query={term:_defineProperty({},"".concat(resultsField,".is_training"),{value:isTraining})};if(searchQuery!==undefined&&ignoreDefaultQuery===true){query=searchQuery}else if(searchQuery!==undefined&&isResultsSearchBoolQuery(searchQuery)){var searchQueryClone=(0,_lodash.cloneDeep)(searchQuery);searchQueryClone.bool.must.push(query);query=searchQueryClone}return query}var loadEvalData=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref3){var isTraining,index,dependentVariable,resultsField,predictionFieldName,searchQuery,ignoreDefaultQuery,jobType,requiresKeyword,results,defaultPredictionField,predictedField,query,metrics,config,evalResult;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isTraining=_ref3.isTraining,index=_ref3.index,dependentVariable=_ref3.dependentVariable,resultsField=_ref3.resultsField,predictionFieldName=_ref3.predictionFieldName,searchQuery=_ref3.searchQuery,ignoreDefaultQuery=_ref3.ignoreDefaultQuery,jobType=_ref3.jobType,requiresKeyword=_ref3.requiresKeyword;results={success:false,eval:null,error:null};defaultPredictionField="".concat(dependentVariable,"_prediction");predictedField="".concat(resultsField,".").concat(predictionFieldName?predictionFieldName:defaultPredictionField);if(jobType===ANALYSIS_CONFIG_TYPE.CLASSIFICATION&&requiresKeyword===true){predictedField="".concat(predictedField,".keyword")}query=getEvalQueryBody({resultsField:resultsField,isTraining:isTraining,searchQuery:searchQuery,ignoreDefaultQuery:ignoreDefaultQuery});metrics={classification:{multiclass_confusion_matrix:{}},regression:{r_squared:{},mean_squared_error:{}}};config={index:index,query:query,evaluation:_defineProperty({},jobType,{actual_field:dependentVariable,predicted_field:predictedField,metrics:metrics[jobType]})};_context.prev=8;_context.next=11;return _ml_api_service.ml.dataFrameAnalytics.evaluateDataFrameAnalytics(config);case 11:evalResult=_context.sent;results.success=true;results.eval=evalResult;return _context.abrupt("return",results);case 17:_context.prev=17;_context.t0=_context["catch"](8);results.error=(0,_errors.getErrorMessage)(_context.t0);return _context.abrupt("return",results);case 21:case"end":return _context.stop()}}}),_callee,null,[[8,17]])})));return function loadEvalData(_x){return _ref2.apply(this,arguments)}}();exports.loadEvalData=loadEvalData;var loadDocsCount=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(_ref5){var _ref5$ignoreDefaultQu,ignoreDefaultQuery,isTraining,searchQuery,resultsField,destIndex,query,body,resp,docsCount;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_ref5$ignoreDefaultQu=_ref5.ignoreDefaultQuery,ignoreDefaultQuery=_ref5$ignoreDefaultQu===void 0?true:_ref5$ignoreDefaultQu,isTraining=_ref5.isTraining,searchQuery=_ref5.searchQuery,resultsField=_ref5.resultsField,destIndex=_ref5.destIndex;query=getEvalQueryBody({resultsField:resultsField,isTraining:isTraining,ignoreDefaultQuery:ignoreDefaultQuery,searchQuery:searchQuery});_context2.prev=2;body={track_total_hits:true,query:query};_context2.next=6;return _ml_api_service.ml.esSearch({index:destIndex,size:0,body:body});case 6:resp=_context2.sent;docsCount=resp.hits.total&&resp.hits.total.value;return _context2.abrupt("return",{docsCount:docsCount,success:docsCount!==undefined});case 11:_context2.prev=11;_context2.t0=_context2["catch"](2);return _context2.abrupt("return",{docsCount:null,success:false});case 14:case"end":return _context2.stop()}}}),_callee2,null,[[2,11]])})));return function loadDocsCount(_x2){return _ref4.apply(this,arguments)}}();exports.loadDocsCount=loadDocsCount},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"MlContext",{enumerable:true,get:function get(){return _ml_context.MlContext}});Object.defineProperty(exports,"MlContextValue",{enumerable:true,get:function get(){return _ml_context.MlContextValue}});Object.defineProperty(exports,"SavedSearchQuery",{enumerable:true,get:function get(){return _ml_context.SavedSearchQuery}});Object.defineProperty(exports,"useMlContext",{enumerable:true,get:function get(){return _use_ml_context.useMlContext}});var _ml_context=__webpack_require__(280);var _use_ml_context=__webpack_require__(540)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.FieldFormat=void 0;var _lodash=__webpack_require__(49);var _custom=__webpack_require__(585);var _content_types=__webpack_require__(295);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DEFAULT_CONTEXT_TYPE=_content_types.TEXT_CONTEXT_TYPE;var FieldFormat=function(){function FieldFormat(){var _params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var getConfig=arguments.length>1?arguments[1]:undefined;_classCallCheck(this,FieldFormat);_defineProperty(this,"convertObject",void 0);_defineProperty(this,"htmlConvert",void 0);_defineProperty(this,"textConvert",void 0);_defineProperty(this,"type",this.constructor);_defineProperty(this,"_params",void 0);_defineProperty(this,"getConfig",void 0);this._params=_params;if(getConfig){this.getConfig=getConfig}}_createClass(FieldFormat,[{key:"convert",value:function convert(value){var contentType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:DEFAULT_CONTEXT_TYPE;var options=arguments.length>2?arguments[2]:undefined;var converter=this.getConverterFor(contentType);if(converter){return converter.call(this,value,options)}return value}},{key:"getConverterFor",value:function getConverterFor(){var contentType=arguments.length>0&&arguments[0]!==undefined?arguments[0]:DEFAULT_CONTEXT_TYPE;if(!this.convertObject){this.convertObject=this.setupContentType()}return this.convertObject[contentType]||null}},{key:"getParamDefaults",value:function getParamDefaults(){return{}}},{key:"param",value:function param(name){var val=(0,_lodash.get)(this._params,name);if(val||val===false||val===0){return val}return(0,_lodash.get)(this.getParamDefaults(),name)}},{key:"params",value:function params(){return(0,_lodash.cloneDeep)((0,_lodash.defaults)({},this._params,this.getParamDefaults()))}},{key:"toJSON",value:function toJSON(){var id=(0,_lodash.get)(this.type,"id");var defaultsParams=this.getParamDefaults()||{};var params=(0,_lodash.transform)(this._params,(function(uniqParams,val,param){if(param&&val!==(0,_lodash.get)(defaultsParams,param)){uniqParams[param]=val}}),{});return{id:id,params:(0,_lodash.size)(params)?params:undefined}}},{key:"setupContentType",value:function setupContentType(){return{text:(0,_content_types.textContentTypeSetup)(this,this.textConvert),html:(0,_content_types.htmlContentTypeSetup)(this,this.htmlConvert)}}}],[{key:"from",value:function from(convertFn){return(0,_custom.createCustomFieldFormat)(convertFn)}},{key:"isInstanceOfFieldFormat",value:function isInstanceOfFieldFormat(fieldFormat){return Boolean(fieldFormat&&fieldFormat.convert)}}]);return FieldFormat}();exports.FieldFormat=FieldFormat;_defineProperty(FieldFormat,"id",void 0);_defineProperty(FieldFormat,"title",void 0);_defineProperty(FieldFormat,"fieldType",void 0)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KBN_FIELD_TYPES=exports.ES_FIELD_TYPES=void 0;var ES_FIELD_TYPES;exports.ES_FIELD_TYPES=ES_FIELD_TYPES;(function(ES_FIELD_TYPES){ES_FIELD_TYPES["_ID"]="_id";ES_FIELD_TYPES["_INDEX"]="_index";ES_FIELD_TYPES["_SOURCE"]="_source";ES_FIELD_TYPES["_TYPE"]="_type";ES_FIELD_TYPES["STRING"]="string";ES_FIELD_TYPES["TEXT"]="text";ES_FIELD_TYPES["KEYWORD"]="keyword";ES_FIELD_TYPES["BOOLEAN"]="boolean";ES_FIELD_TYPES["OBJECT"]="object";ES_FIELD_TYPES["DATE"]="date";ES_FIELD_TYPES["DATE_NANOS"]="date_nanos";ES_FIELD_TYPES["GEO_POINT"]="geo_point";ES_FIELD_TYPES["GEO_SHAPE"]="geo_shape";ES_FIELD_TYPES["FLOAT"]="float";ES_FIELD_TYPES["HALF_FLOAT"]="half_float";ES_FIELD_TYPES["SCALED_FLOAT"]="scaled_float";ES_FIELD_TYPES["DOUBLE"]="double";ES_FIELD_TYPES["INTEGER"]="integer";ES_FIELD_TYPES["LONG"]="long";ES_FIELD_TYPES["SHORT"]="short";ES_FIELD_TYPES["NESTED"]="nested";ES_FIELD_TYPES["BYTE"]="byte";ES_FIELD_TYPES["IP"]="ip";ES_FIELD_TYPES["ATTACHMENT"]="attachment";ES_FIELD_TYPES["TOKEN_COUNT"]="token_count";ES_FIELD_TYPES["MURMUR3"]="murmur3";ES_FIELD_TYPES["HISTOGRAM"]="histogram"})(ES_FIELD_TYPES||(exports.ES_FIELD_TYPES=ES_FIELD_TYPES={}));var KBN_FIELD_TYPES;exports.KBN_FIELD_TYPES=KBN_FIELD_TYPES;(function(KBN_FIELD_TYPES){KBN_FIELD_TYPES["_SOURCE"]="_source";KBN_FIELD_TYPES["ATTACHMENT"]="attachment";KBN_FIELD_TYPES["BOOLEAN"]="boolean";KBN_FIELD_TYPES["DATE"]="date";KBN_FIELD_TYPES["GEO_POINT"]="geo_point";KBN_FIELD_TYPES["GEO_SHAPE"]="geo_shape";KBN_FIELD_TYPES["IP"]="ip";KBN_FIELD_TYPES["MURMUR3"]="murmur3";KBN_FIELD_TYPES["NUMBER"]="number";KBN_FIELD_TYPES["STRING"]="string";KBN_FIELD_TYPES["UNKNOWN"]="unknown";KBN_FIELD_TYPES["CONFLICT"]="conflict";KBN_FIELD_TYPES["OBJECT"]="object";KBN_FIELD_TYPES["NESTED"]="nested";KBN_FIELD_TYPES["HISTOGRAM"]="histogram"})(KBN_FIELD_TYPES||(exports.KBN_FIELD_TYPES=KBN_FIELD_TYPES={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.replaceStringTokens=replaceStringTokens;exports.detectorToString=detectorToString;exports.sortByKey=sortByKey;exports.guessTimeFormat=guessTimeFormat;exports.toLocaleString=toLocaleString;exports.mlEscape=mlEscape;exports.escapeForElasticsearchQuery=escapeForElasticsearchQuery;exports.calculateTextWidth=calculateTextWidth;var _lodash=_interopRequireDefault(__webpack_require__(49));var _d=_interopRequireDefault(__webpack_require__(97));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function replaceStringTokens(str,valuesByTokenName,encodeForURI){return String(str).replace(/\$([^?&$\'"]+)\$/g,(function(match,name){var tokenValue=_lodash.default.get(valuesByTokenName,name,null);if(encodeForURI===true&&tokenValue!==null){tokenValue=encodeURIComponent(tokenValue)}return tokenValue!==null?tokenValue:match}))}function detectorToString(dtr){var BY_TOKEN=" by ";var OVER_TOKEN=" over ";var USE_NULL_OPTION=" use_null=";var PARTITION_FIELD_OPTION=" partition_field_name=";var EXCLUDE_FREQUENT_OPTION=" exclude_frequent=";var txt="";if(dtr.function!==undefined&&dtr.function!==""){txt+=dtr.function;if(dtr.field_name!==undefined&&dtr.field_name!==""){txt+="("+quoteField(dtr.field_name)+")"}}else if(dtr.field_name!==undefined&&dtr.field_name!==""){txt+=quoteField(dtr.field_name)}if(dtr.by_field_name!==undefined&&dtr.by_field_name!==""){txt+=BY_TOKEN+quoteField(dtr.by_field_name)}if(dtr.over_field_name!==undefined&&dtr.over_field_name!==""){txt+=OVER_TOKEN+quoteField(dtr.over_field_name)}if(dtr.use_null!==undefined){txt+=USE_NULL_OPTION+dtr.use_null}if(dtr.partition_field_name!==undefined&&dtr.partition_field_name!==""){txt+=PARTITION_FIELD_OPTION+quoteField(dtr.partition_field_name)}if(dtr.exclude_frequent!==undefined&&dtr.exclude_frequent!==""){txt+=EXCLUDE_FREQUENT_OPTION+dtr.exclude_frequent}return txt}function quoteField(field){if(field.match(/\W/g)){return'"'+field+'"'}else{return field}}function sortByKey(list,reverse,comparator){var keys=_lodash.default.sortBy(_lodash.default.keys(list),(function(key){return comparator?comparator(list[key],key):key}));if(reverse){keys=keys.reverse()}return _lodash.default.object(keys,_lodash.default.map(keys,(function(key){return list[key]})))}function guessTimeFormat(time){var format="";var matched=false;if(isNaN(time)){var match;if(!matched){var reg="";reg+="(";reg+="(";reg+="(\\d{4})";reg+="([-/.\\s])";reg+="(";reg+="([01]\\d)";reg+="|";reg+="(\\w{3})";reg+=")";reg+="([-/.\\s])";reg+="([0-3]\\d)";reg+=")";reg+="|";reg+="(";reg+="(";reg+="(\\d{1,2})";reg+="|";reg+="(\\w{3})";reg+=")";reg+="([-/.\\s])";reg+="(";reg+="(\\d{1,2})";reg+="|";reg+="(\\w{3})";reg+=")";reg+="([-/.\\s])";reg+="(\\d{4})";reg+=")";reg+=")";reg+="([T\\s])?";reg+="([0-2]\\d)";reg+="([:.])";reg+="([0-5]\\d)";reg+="(";reg+="([:.])";reg+="([0-5]\\d)";reg+=")?";reg+="(";reg+="([:.])";reg+="(\\d{3})";reg+=")?";reg+="(";reg+="([+-]\\d{2}[:.]\\d{2}[:.]\\d{2})";reg+="|";reg+="([+-]\\d{2}[:.]\\d{2})";reg+="|";reg+="([+-]\\d{6})";reg+="|";reg+="([+-]\\d{4})";reg+="|";reg+="(Z)";reg+="|";reg+="([+-]\\d{2})";reg+="|";reg+="(";reg+="(\\s)";reg+="(\\w{1,4})";reg+=")";reg+=")?";console.log("guessTimeFormat: time format regex: "+reg);match=time.match(new RegExp(reg));if(match){if(match[2]!==undefined){format+="yyyy";format+=match[4];if(match[6]!==undefined){format+="MM"}else if(match[7]!==undefined){format+="MMM"}format+=match[8];format+="dd"}else if(match[10]!==undefined){if(match[13]!==undefined){format+="MMM";format+=match[14];format+="dd"}else if(match[17]!==undefined){format+="dd";format+=match[14];format+="MMM"}else{if(match[12]!==undefined&&+match[12]>12){format+="dd";format+=match[14];format+="MM"}else{format+="MM";format+=match[14];format+="dd"}}format+=match[18];format+="yyyy"}format+=match[20]==="T"?"'"+match[20]+"'":match[20];format+="HH";format+=match[22];format+="mm";if(match[24]!==undefined){format+=match[25];format+="ss"}if(match[27]!==undefined){format+=match[28];format+="SSS"}if(match[31]!==undefined){format+="XXXXX"}else if(match[32]!==undefined){format+="XXX"}else if(match[33]!==undefined){format+="XXXX"}else if(match[34]!==undefined){format+="Z"}else if(match[35]!==undefined||match[36]!==undefined){format+="X"}else if(match[37]!==undefined){if(match[38]!==undefined){format+=match[38]}for(var i=0;i<match[39].length;i++){format+="z"}}matched=true}}}else{if(time>1e10){format="epoch_ms"}else{format="epoch"}matched=true}if(matched){console.log("guessTimeFormat: guessed time format: ",format)}else{console.log("guessTimeFormat: time format could not be guessed from: "+time)}return format}function toLocaleString(x){var result=x;if(x&&typeof x==="number"){var parts=x.toString().split(".");parts[0]=parts[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");result=parts.join(".")}return result}function mlEscape(str){var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(str).replace(/[&<>"'\/]/g,(function(s){return entityMap[s]}))}function escapeForElasticsearchQuery(str){return String(str).replace(/[-[\]{}()+!<>=?:\/\\^"~*&|\s]/g,"\\$&")}function calculateTextWidth(txt,isNumber,elementSelection){txt=isNumber?_d.default.format(",")(txt):txt;var svg=elementSelection;var $el;if(elementSelection===undefined){var $body=_d.default.select("body");$el=$body.append("div");svg=$el.append("svg")}var tempLabelText=svg.append("g").attr("class","temp-axis-label tick").selectAll("text.temp.axis").data("a").enter().append("text").text(txt);var width=tempLabelText[0][0].getBBox().width;_d.default.select(".temp-axis-label").remove();if($el!==undefined){$el.remove()}return Math.ceil(width)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.checkMlNodesAvailable=checkMlNodesAvailable;exports.getMlNodeCount=getMlNodeCount;exports.mlNodesAvailable=mlNodesAvailable;exports.permissionToViewMlNodeCount=permissionToViewMlNodeCount;var _ml_api_service=__webpack_require__(51);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var mlNodeCount=0;var userHasPermissionToViewMlNodeCount=false;function checkMlNodesAvailable(){return _checkMlNodesAvailable.apply(this,arguments)}function _checkMlNodesAvailable(){_checkMlNodesAvailable=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var nodes;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getMlNodeCount();case 3:nodes=_context.sent;if(!(nodes.count!==undefined&&nodes.count>0)){_context.next=8;break}Promise.resolve();_context.next=9;break;case 8:throw Error("Cannot load count of ML nodes");case 9:_context.next=16;break;case 11:_context.prev=11;_context.t0=_context["catch"](0);console.error(_context.t0);window.location.href="#/jobs";Promise.reject();case 16:case"end":return _context.stop()}}}),_callee,null,[[0,11]])})));return _checkMlNodesAvailable.apply(this,arguments)}function getMlNodeCount(){return _getMlNodeCount.apply(this,arguments)}function _getMlNodeCount(){_getMlNodeCount=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var nodes;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return _ml_api_service.ml.mlNodeCount();case 3:nodes=_context2.sent;mlNodeCount=nodes.count;userHasPermissionToViewMlNodeCount=true;return _context2.abrupt("return",Promise.resolve(nodes));case 9:_context2.prev=9;_context2.t0=_context2["catch"](0);mlNodeCount=0;if(_context2.t0.statusCode===403){userHasPermissionToViewMlNodeCount=false}return _context2.abrupt("return",Promise.resolve({count:0}));case 14:case"end":return _context2.stop()}}}),_callee2,null,[[0,9]])})));return _getMlNodeCount.apply(this,arguments)}function mlNodesAvailable(){return mlNodeCount!==0}function permissionToViewMlNodeCount(){return userHasPermissionToViewMlNodeCount}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatHumanReadableDate=formatHumanReadableDate;exports.formatHumanReadableDateTime=formatHumanReadableDateTime;exports.formatHumanReadableDateTimeSeconds=formatHumanReadableDateTimeSeconds;var _format=__webpack_require__(39);function formatHumanReadableDate(ts){return(0,_format.formatDate)(ts,"MMMM Do YYYY")}function formatHumanReadableDateTime(ts){return(0,_format.formatDate)(ts,"MMMM Do YYYY, HH:mm")}function formatHumanReadableDateTimeSeconds(ts){return(0,_format.formatDate)(ts,"MMMM Do YYYY, HH:mm:ss")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.loadMlServerInfo=loadMlServerInfo;exports.getNewJobDefaults=getNewJobDefaults;exports.getNewJobLimits=getNewJobLimits;exports.getCloudId=getCloudId;exports.isCloud=isCloud;exports.getCloudDeploymentId=getCloudDeploymentId;var _ml_api_service=__webpack_require__(51);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var defaults={anomaly_detectors:{},datafeeds:{}};var limits={};var cloudInfo={cloudId:null,isCloud:false};function loadMlServerInfo(){return _loadMlServerInfo.apply(this,arguments)}function _loadMlServerInfo(){_loadMlServerInfo=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var resp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _ml_api_service.ml.mlInfo();case 3:resp=_context.sent;defaults=resp.defaults;limits=resp.limits;cloudInfo.cloudId=resp.cloudId||null;cloudInfo.isCloud=resp.cloudId!==undefined;return _context.abrupt("return",{defaults:defaults,limits:limits,cloudId:cloudInfo});case 11:_context.prev=11;_context.t0=_context["catch"](0);return _context.abrupt("return",{defaults:defaults,limits:limits,cloudId:cloudInfo});case 14:case"end":return _context.stop()}}}),_callee,null,[[0,11]])})));return _loadMlServerInfo.apply(this,arguments)}function getNewJobDefaults(){return defaults}function getNewJobLimits(){return limits}function getCloudId(){return cloudInfo.cloudId}function isCloud(){return cloudInfo.isCloud}function getCloudDeploymentId(){if(cloudInfo.cloudId===null){return null}var tempCloudId=cloudInfo.cloudId.replace(/^.+:/,"");try{var matches=atob(tempCloudId).match(/^.+\$(.+)(?=\$)/);return matches!==null&&matches.length===2?matches[1]:null}catch(error){return null}}},,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BUCKET_TYPES=void 0;var BUCKET_TYPES;exports.BUCKET_TYPES=BUCKET_TYPES;(function(BUCKET_TYPES){BUCKET_TYPES["FILTER"]="filter";BUCKET_TYPES["FILTERS"]="filters";BUCKET_TYPES["HISTOGRAM"]="histogram";BUCKET_TYPES["IP_RANGE"]="ip_range";BUCKET_TYPES["DATE_RANGE"]="date_range";BUCKET_TYPES["RANGE"]="range";BUCKET_TYPES["TERMS"]="terms";BUCKET_TYPES["SIGNIFICANT_TERMS"]="significant_terms";BUCKET_TYPES["GEOHASH_GRID"]="geohash_grid";BUCKET_TYPES["GEOTILE_GRID"]="geotile_grid";BUCKET_TYPES["DATE_HISTOGRAM"]="date_histogram"})(BUCKET_TYPES||(exports.BUCKET_TYPES=BUCKET_TYPES={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"mlMessageBarService",{enumerable:true,get:function get(){return _messagebar_service.mlMessageBarService}});var _messagebar_service=__webpack_require__(905)},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={cleanFilter:true,isFilterDisabled:true};exports.isFilterDisabled=exports.cleanFilter=void 0;var _lodash=__webpack_require__(49);var _build_filters=__webpack_require__(557);Object.keys(_build_filters).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _build_filters[key]}})}));var _custom_filter=__webpack_require__(558);Object.keys(_custom_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _custom_filter[key]}})}));var _exists_filter=__webpack_require__(283);Object.keys(_exists_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _exists_filter[key]}})}));var _geo_bounding_box_filter=__webpack_require__(284);Object.keys(_geo_bounding_box_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _geo_bounding_box_filter[key]}})}));var _geo_polygon_filter=__webpack_require__(285);Object.keys(_geo_polygon_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _geo_polygon_filter[key]}})}));var _get_display_value=__webpack_require__(559);Object.keys(_get_display_value).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_display_value[key]}})}));var _get_filter_field=__webpack_require__(560);Object.keys(_get_filter_field).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_filter_field[key]}})}));var _get_filter_params=__webpack_require__(561);Object.keys(_get_filter_params).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_filter_params[key]}})}));var _get_index_pattern_from_filter=__webpack_require__(286);Object.keys(_get_index_pattern_from_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_index_pattern_from_filter[key]}})}));var _match_all_filter=__webpack_require__(562);Object.keys(_match_all_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _match_all_filter[key]}})}));var _meta_filter=__webpack_require__(563);Object.keys(_meta_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _meta_filter[key]}})}));var _missing_filter=__webpack_require__(289);Object.keys(_missing_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _missing_filter[key]}})}));var _phrase_filter=__webpack_require__(211);Object.keys(_phrase_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _phrase_filter[key]}})}));var _phrases_filter=__webpack_require__(287);Object.keys(_phrases_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _phrases_filter[key]}})}));var _query_string_filter=__webpack_require__(564);Object.keys(_query_string_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _query_string_filter[key]}})}));var _range_filter=__webpack_require__(288);Object.keys(_range_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _range_filter[key]}})}));var _types=__webpack_require__(565);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var cleanFilter=function cleanFilter(filter){return(0,_lodash.omit)(filter,["meta","$state"])};exports.cleanFilter=cleanFilter;var isFilterDisabled=function isFilterDisabled(filter){return(0,_lodash.get)(filter,"meta.disabled",false)};exports.isFilterDisabled=isFilterDisabled},,function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.isBucketAggType=isBucketAggType;exports.BucketAggType=void 0;var _agg_type=__webpack_require__(177);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var bucketType="buckets";var BucketAggType=function(_AggType){_inherits(BucketAggType,_AggType);function BucketAggType(config){var _this;_classCallCheck(this,BucketAggType);_this=_possibleConstructorReturn(this,_getPrototypeOf(BucketAggType).call(this,config));_defineProperty(_assertThisInitialized(_this),"getKey",void 0);_defineProperty(_assertThisInitialized(_this),"type",bucketType);_this.getKey=config.getKey||function(bucket,key){return key||bucket.key};return _this}return BucketAggType}(_agg_type.AggType);exports.BucketAggType=BucketAggType;function isBucketAggType(aggConfig){return aggConfig&&aggConfig.type===bucketType}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _ast=__webpack_require__(290);Object.keys(_ast).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _ast[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SEARCH_QUERY_LANGUAGE=exports.ANOMALIES_TABLE_DEFAULT_QUERY_SIZE=exports.ANNOTATIONS_TABLE_DEFAULT_QUERY_SIZE=void 0;var ANNOTATIONS_TABLE_DEFAULT_QUERY_SIZE=500;exports.ANNOTATIONS_TABLE_DEFAULT_QUERY_SIZE=ANNOTATIONS_TABLE_DEFAULT_QUERY_SIZE;var ANOMALIES_TABLE_DEFAULT_QUERY_SIZE=500;exports.ANOMALIES_TABLE_DEFAULT_QUERY_SIZE=ANOMALIES_TABLE_DEFAULT_QUERY_SIZE;var SEARCH_QUERY_LANGUAGE;exports.SEARCH_QUERY_LANGUAGE=SEARCH_QUERY_LANGUAGE;(function(SEARCH_QUERY_LANGUAGE){SEARCH_QUERY_LANGUAGE["KUERY"]="kuery";SEARCH_QUERY_LANGUAGE["LUCENE"]="lucene"})(SEARCH_QUERY_LANGUAGE||(exports.SEARCH_QUERY_LANGUAGE=SEARCH_QUERY_LANGUAGE={}))},,function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.isDataFrameAnalyticsFailed=isDataFrameAnalyticsFailed;exports.isDataFrameAnalyticsRunning=isDataFrameAnalyticsRunning;exports.isDataFrameAnalyticsStopped=isDataFrameAnalyticsStopped;exports.isDataFrameAnalyticsStats=isDataFrameAnalyticsStats;exports.getDataFrameAnalyticsProgress=getDataFrameAnalyticsProgress;exports.isCompletedAnalyticsJob=isCompletedAnalyticsJob;exports.getResultsUrl=getResultsUrl;Object.defineProperty(exports,"Query",{enumerable:true,get:function get(){return _eui.Query}});Object.defineProperty(exports,"DATA_FRAME_TASK_STATE",{enumerable:true,get:function get(){return _data_frame_task_state.DATA_FRAME_TASK_STATE}});exports.DataFrameAnalyticsListColumn=exports.DATA_FRAME_MODE=void 0;var _eui=__webpack_require__(29);var _data_frame_task_state=__webpack_require__(915);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}var DATA_FRAME_MODE;exports.DATA_FRAME_MODE=DATA_FRAME_MODE;(function(DATA_FRAME_MODE){DATA_FRAME_MODE["BATCH"]="batch";DATA_FRAME_MODE["CONTINUOUS"]="continuous"})(DATA_FRAME_MODE||(exports.DATA_FRAME_MODE=DATA_FRAME_MODE={}));function isDataFrameAnalyticsFailed(state){return state===_data_frame_task_state.DATA_FRAME_TASK_STATE.FAILED}function isDataFrameAnalyticsRunning(state){return state===_data_frame_task_state.DATA_FRAME_TASK_STATE.ANALYZING||state===_data_frame_task_state.DATA_FRAME_TASK_STATE.REINDEXING||state===_data_frame_task_state.DATA_FRAME_TASK_STATE.STARTED||state===_data_frame_task_state.DATA_FRAME_TASK_STATE.STARTING}function isDataFrameAnalyticsStopped(state){return state===_data_frame_task_state.DATA_FRAME_TASK_STATE.STOPPED}function isDataFrameAnalyticsStats(arg){return _typeof(arg)==="object"&&arg!==null&&{}.hasOwnProperty.call(arg,"state")&&Object.values(_data_frame_task_state.DATA_FRAME_TASK_STATE).includes(arg.state)&&{}.hasOwnProperty.call(arg,"progress")&&Array.isArray(arg.progress)}function getDataFrameAnalyticsProgress(stats){if(isDataFrameAnalyticsStats(stats)){return Math.round(stats.progress.reduce((function(p,c){return p+c.progress_percent}),0)/stats.progress.length)}return undefined}var DataFrameAnalyticsListColumn;exports.DataFrameAnalyticsListColumn=DataFrameAnalyticsListColumn;(function(DataFrameAnalyticsListColumn){DataFrameAnalyticsListColumn["configDestIndex"]="config.dest.index";DataFrameAnalyticsListColumn["configSourceIndex"]="config.source.index";DataFrameAnalyticsListColumn["configCreateTime"]="config.create_time";DataFrameAnalyticsListColumn["description"]="config.description";DataFrameAnalyticsListColumn["id"]="id"})(DataFrameAnalyticsListColumn||(exports.DataFrameAnalyticsListColumn=DataFrameAnalyticsListColumn={}));function isCompletedAnalyticsJob(stats){var progress=getDataFrameAnalyticsProgress(stats);return stats.state===_data_frame_task_state.DATA_FRAME_TASK_STATE.STOPPED&&progress===100}function getResultsUrl(jobId,analysisType){return"ml#/data_frame_analytics/exploration?_g=(ml:(jobId:".concat(jobId,",analysisType:").concat(analysisType,"))")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.roundToDecimalPlace=roundToDecimalPlace;function roundToDecimalPlace(num){var dp=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;if(num%1===0){return num}if(Math.abs(num)<Math.pow(10,-dp)){return Number.parseFloat(String(num)).toExponential(2)}var m=Math.pow(10,dp);return Math.round(num*m)/m}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"MLJobEditor",{enumerable:true,get:function get(){return _ml_job_editor.MLJobEditor}});Object.defineProperty(exports,"ML_EDITOR_MODE",{enumerable:true,get:function get(){return _ml_job_editor.ML_EDITOR_MODE}});var _ml_job_editor=__webpack_require__(1039)},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JOB_ID_MAX_LENGTH=exports.ALLOWED_DATA_UNITS=exports.SKIP_BUCKET_SPAN_ESTIMATION=exports.VALIDATION_STATUS=void 0;var VALIDATION_STATUS;exports.VALIDATION_STATUS=VALIDATION_STATUS;(function(VALIDATION_STATUS){VALIDATION_STATUS["ERROR"]="error";VALIDATION_STATUS["INFO"]="info";VALIDATION_STATUS["SUCCESS"]="success";VALIDATION_STATUS["WARNING"]="warning"})(VALIDATION_STATUS||(exports.VALIDATION_STATUS=VALIDATION_STATUS={}));var SKIP_BUCKET_SPAN_ESTIMATION=true;exports.SKIP_BUCKET_SPAN_ESTIMATION=SKIP_BUCKET_SPAN_ESTIMATION;var ALLOWED_DATA_UNITS=["B","KB","MB","GB","TB","PB"];exports.ALLOWED_DATA_UNITS=ALLOWED_DATA_UNITS;var JOB_ID_MAX_LENGTH=64;exports.JOB_ID_MAX_LENGTH=JOB_ID_MAX_LENGTH},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JOB_STATE=exports.FORECAST_REQUEST_STATE=exports.DATAFEED_STATE=void 0;var DATAFEED_STATE;exports.DATAFEED_STATE=DATAFEED_STATE;(function(DATAFEED_STATE){DATAFEED_STATE["STARTED"]="started";DATAFEED_STATE["STARTING"]="starting";DATAFEED_STATE["STOPPED"]="stopped";DATAFEED_STATE["STOPPING"]="stopping";DATAFEED_STATE["DELETED"]="deleted"})(DATAFEED_STATE||(exports.DATAFEED_STATE=DATAFEED_STATE={}));var FORECAST_REQUEST_STATE;exports.FORECAST_REQUEST_STATE=FORECAST_REQUEST_STATE;(function(FORECAST_REQUEST_STATE){FORECAST_REQUEST_STATE["FAILED"]="failed";FORECAST_REQUEST_STATE["FINISHED"]="finished";FORECAST_REQUEST_STATE["SCHEDULED"]="scheduled";FORECAST_REQUEST_STATE["STARTED"]="started"})(FORECAST_REQUEST_STATE||(exports.FORECAST_REQUEST_STATE=FORECAST_REQUEST_STATE={}));var JOB_STATE;exports.JOB_STATE=JOB_STATE;(function(JOB_STATE){JOB_STATE["CLOSED"]="closed";JOB_STATE["CLOSING"]="closing";JOB_STATE["FAILED"]="failed";JOB_STATE["OPENED"]="opened";JOB_STATE["OPENING"]="opening";JOB_STATE["DELETED"]="deleted"})(JOB_STATE||(exports.JOB_STATE=JOB_STATE={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DOC_COUNT=exports.MLCATEGORY=exports.ML_JOB_FIELD_TYPES=void 0;var ML_JOB_FIELD_TYPES;exports.ML_JOB_FIELD_TYPES=ML_JOB_FIELD_TYPES;(function(ML_JOB_FIELD_TYPES){ML_JOB_FIELD_TYPES["BOOLEAN"]="boolean";ML_JOB_FIELD_TYPES["DATE"]="date";ML_JOB_FIELD_TYPES["GEO_POINT"]="geo_point";ML_JOB_FIELD_TYPES["IP"]="ip";ML_JOB_FIELD_TYPES["KEYWORD"]="keyword";ML_JOB_FIELD_TYPES["NUMBER"]="number";ML_JOB_FIELD_TYPES["TEXT"]="text";ML_JOB_FIELD_TYPES["UNKNOWN"]="unknown"})(ML_JOB_FIELD_TYPES||(exports.ML_JOB_FIELD_TYPES=ML_JOB_FIELD_TYPES={}));var MLCATEGORY="mlcategory";exports.MLCATEGORY=MLCATEGORY;var DOC_COUNT="doc_count";exports.DOC_COUNT=DOC_COUNT},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.loadFullJob=loadFullJob;exports.isStartable=isStartable;exports.isStoppable=isStoppable;exports.isClosable=isClosable;exports.forceStartDatafeeds=forceStartDatafeeds;exports.stopDatafeeds=stopDatafeeds;exports.cloneJob=cloneJob;exports.closeJobs=closeJobs;exports.deleteJobs=deleteJobs;exports.filterJobs=filterJobs;exports.checkForAutoStartDatafeed=checkForAutoStartDatafeed;exports.getJobIdUrl=getJobIdUrl;exports.getSelectedJobIdFromUrl=getSelectedJobIdFromUrl;exports.clearSelectedJobIdFromUrl=clearSelectedJobIdFromUrl;var _lodash=__webpack_require__(49);var _messagebar=__webpack_require__(91);var _risonNode=_interopRequireDefault(__webpack_require__(100));var _job_service=__webpack_require__(58);var _ml_api_service=__webpack_require__(51);var _dependency_cache=__webpack_require__(5);var _states=__webpack_require__(108);var _parse_interval=__webpack_require__(74);var _i18n=__webpack_require__(1);var _calendar_service=__webpack_require__(407);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function loadFullJob(jobId){return new Promise((function(resolve,reject){_ml_api_service.ml.jobs.jobs(jobId).then((function(jobs){if(jobs.length){resolve(jobs[0])}else{throw new Error("Could not find job ".concat(jobId))}})).catch((function(error){reject(error)}))}))}function isStartable(jobs){return jobs.some((function(j){return j.datafeedState===_states.DATAFEED_STATE.STOPPED}))}function isStoppable(jobs){return jobs.some((function(j){return j.datafeedState===_states.DATAFEED_STATE.STARTED||j.datafeedState===_states.DATAFEED_STATE.STARTING}))}function isClosable(jobs){return jobs.some((function(j){return j.datafeedState===_states.DATAFEED_STATE.STOPPED&&j.jobState!==_states.JOB_STATE.CLOSED}))}function forceStartDatafeeds(jobs,start,end){var finish=arguments.length>3&&arguments[3]!==undefined?arguments[3]:function(){};var datafeedIds=jobs.filter((function(j){return j.hasDatafeed})).map((function(j){return j.datafeedId}));_job_service.mlJobService.forceStartDatafeeds(datafeedIds,start,end).then((function(resp){showResults(resp,_states.DATAFEED_STATE.STARTED);finish()})).catch((function(error){_messagebar.mlMessageBarService.notify.error(error);var toastNotifications=(0,_dependency_cache.getToastNotifications)();toastNotifications.addDanger(_i18n.i18n.translate("xpack.ml.jobsList.startJobErrorMessage",{defaultMessage:"Jobs failed to start"}),error);finish()}))}function stopDatafeeds(jobs){var finish=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};var datafeedIds=jobs.filter((function(j){return j.hasDatafeed})).map((function(j){return j.datafeedId}));_job_service.mlJobService.stopDatafeeds(datafeedIds).then((function(resp){showResults(resp,_states.DATAFEED_STATE.STOPPED);finish()})).catch((function(error){_messagebar.mlMessageBarService.notify.error(error);var toastNotifications=(0,_dependency_cache.getToastNotifications)();toastNotifications.addDanger(_i18n.i18n.translate("xpack.ml.jobsList.stopJobErrorMessage",{defaultMessage:"Jobs failed to stop"}),error);finish()}))}function showResults(resp,action){var successes=[];var failures=[];for(var d in resp){if(resp[d][action]===true||resp[d][action]===false&&resp[d].error.statusCode===409&&action===_states.DATAFEED_STATE.STARTED){successes.push(d)}else{failures.push({id:d,result:resp[d]})}}var actionText="";var actionTextPT="";if(action===_states.DATAFEED_STATE.STARTED){actionText=_i18n.i18n.translate("xpack.ml.jobsList.startActionStatusText",{defaultMessage:"start"});actionTextPT=_i18n.i18n.translate("xpack.ml.jobsList.startedActionStatusText",{defaultMessage:"started"})}else if(action===_states.DATAFEED_STATE.STOPPED){actionText=_i18n.i18n.translate("xpack.ml.jobsList.stopActionStatusText",{defaultMessage:"stop"});actionTextPT=_i18n.i18n.translate("xpack.ml.jobsList.stoppedActionStatusText",{defaultMessage:"stopped"})}else if(action===_states.DATAFEED_STATE.DELETED){actionText=_i18n.i18n.translate("xpack.ml.jobsList.deleteActionStatusText",{defaultMessage:"delete"});actionTextPT=_i18n.i18n.translate("xpack.ml.jobsList.deletedActionStatusText",{defaultMessage:"deleted"})}else if(action===_states.JOB_STATE.CLOSED){actionText=_i18n.i18n.translate("xpack.ml.jobsList.closeActionStatusText",{defaultMessage:"close"});actionTextPT=_i18n.i18n.translate("xpack.ml.jobsList.closedActionStatusText",{defaultMessage:"closed"})}var toastNotifications=(0,_dependency_cache.getToastNotifications)();toastNotifications.addSuccess(_i18n.i18n.translate("xpack.ml.jobsList.actionExecuteSuccessfullyNotificationMessage",{defaultMessage:"{successesJobsCount, plural, one{{successJob}} other{# jobs}} {actionTextPT} successfully",values:{successesJobsCount:successes.length,successJob:successes[0],actionTextPT:actionTextPT}}));if(failures.length>0){failures.forEach((function(f){_messagebar.mlMessageBarService.notify.error(f.result.error);toastNotifications.addDanger(_i18n.i18n.translate("xpack.ml.jobsList.actionFailedNotificationMessage",{defaultMessage:"{failureId} failed to {actionText}",values:{failureId:f.id,actionText:actionText}}))}))}}function cloneJob(_x){return _cloneJob.apply(this,arguments)}function _cloneJob(){_cloneJob=_asyncToGenerator(regeneratorRuntime.mark((function _callee(jobId){var job,start,end,bucketSpanMs,toastNotifications;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return loadFullJob(jobId);case 3:job=_context.sent;if(job.custom_settings&&job.custom_settings.created_by){_job_service.mlJobService.tempJobCloningObjects.job=job;if(job.data_counts.earliest_record_timestamp!==undefined&&job.data_counts.latest_record_timestamp!==undefined&&job.data_counts.latest_bucket_timestamp!==undefined){start=job.data_counts.earliest_record_timestamp;end=job.data_counts.latest_record_timestamp;if(job.datafeed_config.aggregations!==undefined){bucketSpanMs=(0,_parse_interval.parseInterval)(job.analysis_config.bucket_span).asMilliseconds();start=Math.floor(job.data_counts.earliest_record_timestamp/bucketSpanMs)*bucketSpanMs;end=job.data_counts.latest_bucket_timestamp+bucketSpanMs*2-1}_job_service.mlJobService.tempJobCloningObjects.start=start;_job_service.mlJobService.tempJobCloningObjects.end=end}}else{_job_service.mlJobService.tempJobCloningObjects.job=job}if(!job.calendars){_context.next=9;break}_context.next=8;return _calendar_service.mlCalendarService.fetchCalendarsByIds(job.calendars);case 8:_job_service.mlJobService.tempJobCloningObjects.calendars=_context.sent;case 9:window.location.href="#/jobs/new_job";_context.next=17;break;case 12:_context.prev=12;_context.t0=_context["catch"](0);_messagebar.mlMessageBarService.notify.error(_context.t0);toastNotifications=(0,_dependency_cache.getToastNotifications)();toastNotifications.addDanger(_i18n.i18n.translate("xpack.ml.jobsList.cloneJobErrorMessage",{defaultMessage:"Could not clone {jobId}. Job could not be found",values:{jobId:jobId}}));case 17:case"end":return _context.stop()}}}),_callee,null,[[0,12]])})));return _cloneJob.apply(this,arguments)}function closeJobs(jobs){var finish=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};var jobIds=jobs.map((function(j){return j.id}));_job_service.mlJobService.closeJobs(jobIds).then((function(resp){showResults(resp,_states.JOB_STATE.CLOSED);finish()})).catch((function(error){_messagebar.mlMessageBarService.notify.error(error);var toastNotifications=(0,_dependency_cache.getToastNotifications)();toastNotifications.addDanger(_i18n.i18n.translate("xpack.ml.jobsList.closeJobErrorMessage",{defaultMessage:"Jobs failed to close"}),error);finish()}))}function deleteJobs(jobs){var finish=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};var jobIds=jobs.map((function(j){return j.id}));_job_service.mlJobService.deleteJobs(jobIds).then((function(resp){showResults(resp,_states.JOB_STATE.DELETED);finish()})).catch((function(error){_messagebar.mlMessageBarService.notify.error(error);var toastNotifications=(0,_dependency_cache.getToastNotifications)();toastNotifications.addDanger(_i18n.i18n.translate("xpack.ml.jobsList.deleteJobErrorMessage",{defaultMessage:"Jobs failed to delete"}),error);finish()}))}function filterJobs(jobs,clauses){if(clauses.length===0){return jobs}var matches=jobs.reduce((function(p,c){p[c.id]={job:c,count:0};return p}),{});clauses.forEach((function(c){var bool=c.match==="must";var js=[];if(c.type==="term"){if(bool===true){js=jobs.filter((function(job){return stringMatch(job.id,c.value)===bool||stringMatch(job.description,c.value)===bool||stringMatch(job.memory_status,c.value)===bool}))}else{js=jobs.filter((function(job){return stringMatch(job.id,c.value)===bool&&stringMatch(job.description,c.value)===bool&&stringMatch(job.memory_status,c.value)===bool}))}}else{if(Array.isArray(c.value)){js=jobs.filter((function(job){return jobProperty(job,c.field).some((function(g){return c.value.indexOf(g)>=0}))}))}else{js=jobs.filter((function(job){return jobProperty(job,c.field)===c.value}))}}js.forEach((function(j){return matches[j.id].count++}))}));var filteredJobs=[];(0,_lodash.each)(matches,(function(m){if(m.count>=clauses.length){filteredJobs.push(m.job)}}));return filteredJobs}function checkForAutoStartDatafeed(){var job=_job_service.mlJobService.tempJobCloningObjects.job;if(job!==undefined){_job_service.mlJobService.tempJobCloningObjects.job=undefined;var hasDatafeed=_typeof(job.datafeed_config)==="object"&&Object.keys(job.datafeed_config).length>0;var datafeedId=hasDatafeed?job.datafeed_config.datafeed_id:"";return{id:job.job_id,hasDatafeed:hasDatafeed,latestTimestampSortValue:0,datafeedId:datafeedId}}}function stringMatch(str,substr){return typeof str==="string"&&typeof substr==="string"&&str.toLowerCase().match(substr.toLowerCase())===null===false}function jobProperty(job,prop){var propMap={job_state:"jobState",datafeed_state:"datafeedState",groups:"groups"};return job[propMap[prop]]}function getJobIdUrl(jobId){var settings={jobId:jobId};var encoded=_risonNode.default.encode(settings);var url="?mlManagement=".concat(encoded);var basePath=(0,_dependency_cache.getBasePath)();return"".concat(basePath.get(),"/app/ml#/jobs").concat(url)}function getUrlVars(url){var vars={};url.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(_,key,value){vars[key]=value}));return vars}function getSelectedJobIdFromUrl(url){if(typeof url==="string"){url=decodeURIComponent(url);if(url.includes("mlManagement")&&url.includes("jobId")){var urlParams=getUrlVars(url);var decodedJson=_risonNode.default.decode(urlParams.mlManagement);return decodedJson.jobId}}}function clearSelectedJobIdFromUrl(url){if(typeof url==="string"){url=decodeURIComponent(url);if(url.includes("mlManagement")&&url.includes("jobId")){var urlParams=getUrlVars(url);var clearedParams="ml#/jobs?_g=".concat(urlParams._g);window.history.replaceState({},document.title,clearedParams)}}}},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BaseParamType=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var BaseParamType=function BaseParamType(config){var _this=this;_classCallCheck(this,BaseParamType);_defineProperty(this,"name",void 0);_defineProperty(this,"type",void 0);_defineProperty(this,"displayName",void 0);_defineProperty(this,"required",void 0);_defineProperty(this,"advanced",void 0);_defineProperty(this,"default",void 0);_defineProperty(this,"write",void 0);_defineProperty(this,"serialize",void 0);_defineProperty(this,"deserialize",void 0);_defineProperty(this,"options",void 0);_defineProperty(this,"valueType",void 0);_defineProperty(this,"modifyAggConfigOnSearchRequestStart",void 0);this.name=config.name;this.type=config.type;this.displayName=config.displayName||this.name;this.required=config.required===true;this.advanced=config.advanced||false;this.onChange=config.onChange;this.shouldShow=config.shouldShow;this.default=config.default;var defaultWrite=function defaultWrite(aggConfig,output){if(aggConfig.params[_this.name]){output.params[_this.name]=aggConfig.params[_this.name]||_this.default}};this.write=config.write||defaultWrite;this.serialize=config.serialize;this.deserialize=config.deserialize;this.options=config.options;this.modifyAggConfigOnSearchRequestStart=config.modifyAggConfigOnSearchRequestStart||function(){};this.valueType=config.valueType||config.type};exports.BaseParamType=BaseParamType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.makeNestedLabel=void 0;var _lodash=__webpack_require__(49);var makeNestedLabel=function makeNestedLabel(aggConfig,label){var uppercaseLabel=(0,_lodash.startCase)(label);var customMetric=aggConfig.getParam("customMetric");var metricAgg=aggConfig.getParam("metricAgg");if(customMetric){var metricLabel=customMetric.makeLabel();if(metricLabel.includes("".concat(uppercaseLabel," of "))){metricLabel=metricLabel.substring("".concat(uppercaseLabel," of ").length);metricLabel="2. ".concat(label," of ").concat(metricLabel)}else if(metricLabel.includes("".concat(label," of "))){metricLabel=parseInt(metricLabel.substring(0,1),10)+1+metricLabel.substring(1)}else{metricLabel="".concat(uppercaseLabel," of ").concat(metricLabel)}return metricLabel}var metric=aggConfig.aggConfigs.byId(metricAgg);if(!metric){return""}return"".concat(uppercaseLabel," of ").concat(metric.makeLabel())};exports.makeNestedLabel=makeNestedLabel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.http=http;exports.http$=http$;exports.fromHttpHandler=fromHttpHandler;var _rxjs=__webpack_require__(33);var _dependency_cache=__webpack_require__(5);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getResultHeaders(headers){return _objectSpread({asSystemRequest:true,"Content-Type":"application/json"},headers)}function getFetchOptions(options){var _options$headers;if(!options.path){throw new Error("URL path is missing")}return{path:options.path,fetchOptions:_objectSpread({credentials:"same-origin",method:options.method||"GET"},options.body?{body:options.body}:{},{},options.query?{query:options.query}:{},{headers:getResultHeaders((_options$headers=options.headers)!==null&&_options$headers!==void 0?_options$headers:{})})}}function http(_x){return _http.apply(this,arguments)}function _http(){_http=_asyncToGenerator(regeneratorRuntime.mark((function _callee(options){var _getFetchOptions2,path,fetchOptions;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_getFetchOptions2=getFetchOptions(options),path=_getFetchOptions2.path,fetchOptions=_getFetchOptions2.fetchOptions;return _context.abrupt("return",(0,_dependency_cache.getHttp)().fetch(path,fetchOptions));case 2:case"end":return _context.stop()}}}),_callee)})));return _http.apply(this,arguments)}function http$(options){var _getFetchOptions=getFetchOptions(options),path=_getFetchOptions.path,fetchOptions=_getFetchOptions.fetchOptions;return fromHttpHandler(path,fetchOptions)}function fromHttpHandler(input,init){return new _rxjs.Observable((function(subscriber){var controller=new AbortController;var signal=controller.signal;var abortable=true;var unsubscribed=false;if(init===null||init===void 0?void 0:init.signal){if(init.signal.aborted){controller.abort()}else{init.signal.addEventListener("abort",(function(){if(!signal.aborted){controller.abort()}}))}}var perSubscriberInit=_objectSpread({},init?init:{},{signal:signal});(0,_dependency_cache.getHttp)().fetch(input,perSubscriberInit).then((function(response){abortable=false;subscriber.next(response);subscriber.complete()})).catch((function(err){abortable=false;if(!unsubscribed){subscriber.error(err)}}));return function(){unsubscribed=true;if(abortable){controller.abort()}}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getColumns=exports.progressColumn=exports.getTaskStateBadge=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _i18n=__webpack_require__(1);var _react2=__webpack_require__(30);var _eui=__webpack_require__(29);var _common=__webpack_require__(65);var _common2=__webpack_require__(101);var _actions=__webpack_require__(389);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var TASK_STATE_COLOR;(function(TASK_STATE_COLOR){TASK_STATE_COLOR["analyzing"]="primary";TASK_STATE_COLOR["failed"]="danger";TASK_STATE_COLOR["reindexing"]="primary";TASK_STATE_COLOR["started"]="primary";TASK_STATE_COLOR["starting"]="primary";TASK_STATE_COLOR["stopped"]="hollow"})(TASK_STATE_COLOR||(TASK_STATE_COLOR={}));var getTaskStateBadge=function getTaskStateBadge(state,failureReason){var color=TASK_STATE_COLOR[state];if((0,_common2.isDataFrameAnalyticsFailed)(state)&&failureReason!==undefined){return _react.default.createElement(_eui.EuiToolTip,{content:failureReason},_react.default.createElement(_eui.EuiBadge,{className:"mlTaskStateBadge",color:color},state))}return _react.default.createElement(_eui.EuiBadge,{className:"mlTaskStateBadge",color:color},state)};exports.getTaskStateBadge=getTaskStateBadge;var progressColumn={name:_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.progress",{defaultMessage:"Progress"}),sortable:function sortable(item){return(0,_common2.getDataFrameAnalyticsProgress)(item.stats)},truncateText:true,render:function render(item){var progress=(0,_common2.getDataFrameAnalyticsProgress)(item.stats);if(progress===undefined){return null}var isBatchTransform=true;return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},isBatchTransform&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexItem,{style:{width:"40px"},grow:false},_react.default.createElement(_eui.EuiProgress,{value:progress,max:100,color:"primary",size:"m","data-test-subj":"mlAnalyticsTableProgress"},progress,"%")),_react.default.createElement(_eui.EuiFlexItem,{style:{width:"35px"},grow:false},_react.default.createElement(_eui.EuiText,{size:"xs"},"".concat(progress,"%")))),!isBatchTransform&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexItem,{style:{width:"40px"},grow:false},(0,_common2.isDataFrameAnalyticsRunning)(item.stats.state)&&_react.default.createElement(_eui.EuiProgress,{color:"primary",size:"m"}),(0,_common2.isDataFrameAnalyticsStopped)(item.stats.state)&&_react.default.createElement(_eui.EuiProgress,{value:0,max:100,color:"primary",size:"m"})),_react.default.createElement(_eui.EuiFlexItem,{style:{width:"35px"},grow:false},"")))},width:"100px","data-test-subj":"mlAnalyticsTableColumnProgress"};exports.progressColumn=progressColumn;var getColumns=function getColumns(expandedRowItemIds,setExpandedRowItemIds){var isManagementTable=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var isMlEnabledInSpace=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var createAnalyticsForm=arguments.length>4?arguments[4]:undefined;var actions=isManagementTable===true?[_actions.AnalyticsViewAction]:(0,_actions.getActions)(createAnalyticsForm);function toggleDetails(item){var index=expandedRowItemIds.indexOf(item.config.id);if(index!==-1){expandedRowItemIds.splice(index,1);setExpandedRowItemIds(_toConsumableArray(expandedRowItemIds))}else{expandedRowItemIds.push(item.config.id)}setExpandedRowItemIds(_toConsumableArray(expandedRowItemIds))}var columns=[{name:_react.default.createElement(_eui.EuiScreenReaderOnly,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.dataframe.analyticsList.showDetailsColumn.screenReaderDescription",defaultMessage:"This column contains clickable controls for showing more details on each job"}))),align:_eui.RIGHT_ALIGNMENT,width:"40px",isExpander:true,render:function render(item){return _react.default.createElement(_eui.EuiButtonIcon,{onClick:function onClick(){return toggleDetails(item)},"aria-label":expandedRowItemIds.includes(item.config.id)?_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.rowCollapse",{defaultMessage:"Hide details for {analyticsId}",values:{analyticsId:item.config.id}}):_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.rowExpand",{defaultMessage:"Show details for {analyticsId}",values:{analyticsId:item.config.id}}),iconType:expandedRowItemIds.includes(item.config.id)?"arrowUp":"arrowDown"})},"data-test-subj":"mlAnalyticsTableRowDetailsToggle"},{field:_common2.DataFrameAnalyticsListColumn.id,name:"ID",sortable:true,truncateText:true,"data-test-subj":"mlAnalyticsTableColumnId",scope:"row"},{field:_common2.DataFrameAnalyticsListColumn.description,name:_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.description",{defaultMessage:"Description"}),sortable:true,truncateText:true,"data-test-subj":"mlAnalyticsTableColumnJobDescription"},{field:_common2.DataFrameAnalyticsListColumn.configSourceIndex,name:_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.sourceIndex",{defaultMessage:"Source index"}),sortable:true,truncateText:true,"data-test-subj":"mlAnalyticsTableColumnSourceIndex"},{field:_common2.DataFrameAnalyticsListColumn.configDestIndex,name:_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.destinationIndex",{defaultMessage:"Destination index"}),sortable:true,truncateText:true,"data-test-subj":"mlAnalyticsTableColumnDestIndex"},{name:_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.type",{defaultMessage:"Type"}),sortable:function sortable(item){return(0,_common.getAnalysisType)(item.config.analysis)},truncateText:true,render:function render(item){return _react.default.createElement(_eui.EuiBadge,{color:"hollow"},(0,_common.getAnalysisType)(item.config.analysis))},width:"150px","data-test-subj":"mlAnalyticsTableColumnType"},{name:_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.status",{defaultMessage:"Status"}),sortable:function sortable(item){return item.stats.state},truncateText:true,render:function render(item){return getTaskStateBadge(item.stats.state,item.stats.failure_reason)},width:"100px","data-test-subj":"mlAnalyticsTableColumnStatus"},progressColumn,{name:_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.tableActionLabel",{defaultMessage:"Actions"}),actions:actions,width:isManagementTable===true?"100px":"150px"}];if(isManagementTable===true){columns.splice(columns.length-1,0,{name:_i18n.i18n.translate("xpack.ml.jobsList.analyticsSpacesLabel",{defaultMessage:"Spaces"}),render:function render(){return _react.default.createElement(_eui.EuiBadge,{color:"hollow"},"all")},width:"75px"});if(isMlEnabledInSpace===false){columns.pop()}}return columns};exports.getColumns=getColumns},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mlCategory=exports.METRIC_AGG_TYPE=exports.EVENT_RATE_FIELD_ID=void 0;var _common=__webpack_require__(52);var _field_types=__webpack_require__(109);var EVENT_RATE_FIELD_ID="__ml_event_rate_count__";exports.EVENT_RATE_FIELD_ID=EVENT_RATE_FIELD_ID;var METRIC_AGG_TYPE="metrics";exports.METRIC_AGG_TYPE=METRIC_AGG_TYPE;var mlCategory={id:_field_types.MLCATEGORY,name:_field_types.MLCATEGORY,type:_common.ES_FIELD_TYPES.KEYWORD,aggregatable:false};exports.mlCategory=mlCategory},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ML_NOTIFICATION_INDEX_PATTERN=exports.ML_RESULTS_INDEX_PATTERN=exports.ML_ANNOTATIONS_INDEX_PATTERN=exports.ML_ANNOTATIONS_INDEX_ALIAS_WRITE=exports.ML_ANNOTATIONS_INDEX_ALIAS_READ=void 0;var ML_ANNOTATIONS_INDEX_ALIAS_READ=".ml-annotations-read";exports.ML_ANNOTATIONS_INDEX_ALIAS_READ=ML_ANNOTATIONS_INDEX_ALIAS_READ;var ML_ANNOTATIONS_INDEX_ALIAS_WRITE=".ml-annotations-write";exports.ML_ANNOTATIONS_INDEX_ALIAS_WRITE=ML_ANNOTATIONS_INDEX_ALIAS_WRITE;var ML_ANNOTATIONS_INDEX_PATTERN=".ml-annotations-6";exports.ML_ANNOTATIONS_INDEX_PATTERN=ML_ANNOTATIONS_INDEX_PATTERN;var ML_RESULTS_INDEX_PATTERN=".ml-anomalies-*";exports.ML_RESULTS_INDEX_PATTERN=ML_RESULTS_INDEX_PATTERN;var ML_NOTIFICATION_INDEX_PATTERN=".ml-notifications*";exports.ML_NOTIFICATION_INDEX_PATTERN=ML_NOTIFICATION_INDEX_PATTERN},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"NodeTypes",{enumerable:true,get:function get(){return _types.NodeTypes}});exports.nodeTypes=void 0;var functionType=_interopRequireWildcard(__webpack_require__(554));var literal=_interopRequireWildcard(__webpack_require__(145));var namedArg=_interopRequireWildcard(__webpack_require__(575));var wildcard=_interopRequireWildcard(__webpack_require__(213));var _types=__webpack_require__(576);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var nodeTypes={function:functionType,literal:literal,namedArg:namedArg,wildcard:wildcard};exports.nodeTypes=nodeTypes},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"asPrettyString",{enumerable:true,get:function get(){return _as_pretty_string.asPrettyString}});Object.defineProperty(exports,"getHighlightHtml",{enumerable:true,get:function get(){return _highlight.getHighlightHtml}});Object.defineProperty(exports,"getHighlightRequest",{enumerable:true,get:function get(){return _highlight.getHighlightRequest}});Object.defineProperty(exports,"serializeFieldFormat",{enumerable:true,get:function get(){return _serialize.serializeFieldFormat}});var _as_pretty_string=__webpack_require__(587);var _highlight=__webpack_require__(588);var _serialize=__webpack_require__(592)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _lib=__webpack_require__(642);Object.keys(_lib).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _lib[key]}})}));var _query_service=__webpack_require__(649);Object.keys(_query_service).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _query_service[key]}})}));var _filter_manager=__webpack_require__(316);Object.keys(_filter_manager).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _filter_manager[key]}})}));var _timefilter=__webpack_require__(221);Object.keys(_timefilter).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _timefilter[key]}})}));var _saved_query=__webpack_require__(678);Object.keys(_saved_query).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _saved_query[key]}})}));var _persisted_log=__webpack_require__(220);Object.keys(_persisted_log).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _persisted_log[key]}})}));var _state_sync=__webpack_require__(680);Object.keys(_state_sync).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _state_sync[key]}})}))},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={ProgressBar:true,mlInMemoryTableFactory:true};Object.defineProperty(exports,"ProgressBar",{enumerable:true,get:function get(){return _ml_in_memory_table.ProgressBar}});Object.defineProperty(exports,"mlInMemoryTableFactory",{enumerable:true,get:function get(){return _ml_in_memory_table.mlInMemoryTableFactory}});var _ml_in_memory_table=__webpack_require__(901);var _types=__webpack_require__(383);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CONDITIONS_NOT_SUPPORTED_FUNCTIONS=exports.OPERATOR=exports.APPLIES_TO=exports.FILTER_TYPE=exports.ACTION=void 0;var ACTION;exports.ACTION=ACTION;(function(ACTION){ACTION["SKIP_MODEL_UPDATE"]="skip_model_update";ACTION["SKIP_RESULT"]="skip_result"})(ACTION||(exports.ACTION=ACTION={}));var FILTER_TYPE;exports.FILTER_TYPE=FILTER_TYPE;(function(FILTER_TYPE){FILTER_TYPE["EXCLUDE"]="exclude";FILTER_TYPE["INCLUDE"]="include"})(FILTER_TYPE||(exports.FILTER_TYPE=FILTER_TYPE={}));var APPLIES_TO;exports.APPLIES_TO=APPLIES_TO;(function(APPLIES_TO){APPLIES_TO["ACTUAL"]="actual";APPLIES_TO["DIFF_FROM_TYPICAL"]="diff_from_typical";APPLIES_TO["TYPICAL"]="typical"})(APPLIES_TO||(exports.APPLIES_TO=APPLIES_TO={}));var OPERATOR;exports.OPERATOR=OPERATOR;(function(OPERATOR){OPERATOR["LESS_THAN"]="lt";OPERATOR["LESS_THAN_OR_EQUAL"]="lte";OPERATOR["GREATER_THAN"]="gt";OPERATOR["GREATER_THAN_OR_EQUAL"]="gte"})(OPERATOR||(exports.OPERATOR=OPERATOR={}));var CONDITIONS_NOT_SUPPORTED_FUNCTIONS=["freq_rare","lat_long","metric","rare"];exports.CONDITIONS_NOT_SUPPORTED_FUNCTIONS=CONDITIONS_NOT_SUPPORTED_FUNCTIONS},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Adapters",{enumerable:true,get:function get(){return _inspector.Adapters}});exports.ViewMode=void 0;var _inspector=__webpack_require__(1083);var ViewMode;exports.ViewMode=ViewMode;(function(ViewMode){ViewMode["EDIT"]="edit";ViewMode["VIEW"]="view"})(ViewMode||(exports.ViewMode=ViewMode={}))},,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;Object.defineProperty(exports,"UiActionsSetup",{enumerable:true,get:function get(){return _plugin.UiActionsSetup}});Object.defineProperty(exports,"UiActionsStart",{enumerable:true,get:function get(){return _plugin.UiActionsStart}});Object.defineProperty(exports,"UiActionsServiceParams",{enumerable:true,get:function get(){return _service.UiActionsServiceParams}});Object.defineProperty(exports,"UiActionsService",{enumerable:true,get:function get(){return _service.UiActionsService}});Object.defineProperty(exports,"Action",{enumerable:true,get:function get(){return _actions.Action}});Object.defineProperty(exports,"createAction",{enumerable:true,get:function get(){return _actions.createAction}});Object.defineProperty(exports,"IncompatibleActionError",{enumerable:true,get:function get(){return _actions.IncompatibleActionError}});Object.defineProperty(exports,"ActionByType",{enumerable:true,get:function get(){return _actions.ActionByType}});Object.defineProperty(exports,"buildContextMenuForActions",{enumerable:true,get:function get(){return _context_menu.buildContextMenuForActions}});Object.defineProperty(exports,"Trigger",{enumerable:true,get:function get(){return _triggers.Trigger}});Object.defineProperty(exports,"TriggerContext",{enumerable:true,get:function get(){return _triggers.TriggerContext}});Object.defineProperty(exports,"SELECT_RANGE_TRIGGER",{enumerable:true,get:function get(){return _triggers.SELECT_RANGE_TRIGGER}});Object.defineProperty(exports,"selectRangeTrigger",{enumerable:true,get:function get(){return _triggers.selectRangeTrigger}});Object.defineProperty(exports,"VALUE_CLICK_TRIGGER",{enumerable:true,get:function get(){return _triggers.VALUE_CLICK_TRIGGER}});Object.defineProperty(exports,"valueClickTrigger",{enumerable:true,get:function get(){return _triggers.valueClickTrigger}});Object.defineProperty(exports,"APPLY_FILTER_TRIGGER",{enumerable:true,get:function get(){return _triggers.APPLY_FILTER_TRIGGER}});Object.defineProperty(exports,"applyFilterTrigger",{enumerable:true,get:function get(){return _triggers.applyFilterTrigger}});Object.defineProperty(exports,"TriggerContextMapping",{enumerable:true,get:function get(){return _types.TriggerContextMapping}});Object.defineProperty(exports,"TriggerId",{enumerable:true,get:function get(){return _types.TriggerId}});Object.defineProperty(exports,"ActionContextMapping",{enumerable:true,get:function get(){return _types.ActionContextMapping}});Object.defineProperty(exports,"ActionType",{enumerable:true,get:function get(){return _types.ActionType}});var _plugin=__webpack_require__(861);var _service=__webpack_require__(373);var _actions=__webpack_require__(869);var _context_menu=__webpack_require__(376);var _triggers=__webpack_require__(232);var _types=__webpack_require__(873);function plugin(initializerContext){return new _plugin.UiActionsPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getFlattenedFields=getFlattenedFields;exports.toggleSelectedField=exports.toggleSelectedFieldSimple=exports.getDefaultSelectableFields=exports.getDefaultRegressionFields=exports.getDefaultClassificationFields=exports.getDefaultFieldsFromJobCaps=exports.sortRegressionResultsColumns=exports.sortRegressionResultsFields=exports.sortColumns=exports.isKeywordAndTextType=exports.EXTENDED_NUMERICAL_TYPES=exports.BASIC_NUMERICAL_TYPES=exports.DEFAULT_REGRESSION_COLUMNS=exports.MAX_COLUMNS=void 0;var _object_utils=__webpack_require__(149);var _analytics=__webpack_require__(76);var _public=__webpack_require__(63);var _new_job_capabilities_service=__webpack_require__(66);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}var MAX_COLUMNS=20;exports.MAX_COLUMNS=MAX_COLUMNS;var DEFAULT_REGRESSION_COLUMNS=8;exports.DEFAULT_REGRESSION_COLUMNS=DEFAULT_REGRESSION_COLUMNS;var BASIC_NUMERICAL_TYPES=new Set([_public.ES_FIELD_TYPES.LONG,_public.ES_FIELD_TYPES.INTEGER,_public.ES_FIELD_TYPES.SHORT,_public.ES_FIELD_TYPES.BYTE]);exports.BASIC_NUMERICAL_TYPES=BASIC_NUMERICAL_TYPES;var EXTENDED_NUMERICAL_TYPES=new Set([_public.ES_FIELD_TYPES.DOUBLE,_public.ES_FIELD_TYPES.FLOAT,_public.ES_FIELD_TYPES.HALF_FLOAT,_public.ES_FIELD_TYPES.SCALED_FLOAT]);exports.EXTENDED_NUMERICAL_TYPES=EXTENDED_NUMERICAL_TYPES;var ML__ID_COPY="ml__id_copy";var isKeywordAndTextType=function isKeywordAndTextType(fieldName){var _fields$find;var fields=_new_job_capabilities_service.newJobCapsService.fields;var fieldType=(_fields$find=fields.find((function(field){return field.name===fieldName})))===null||_fields$find===void 0?void 0:_fields$find.type;var isBothTypes=false;if(fieldType!==undefined&&fieldType===_public.ES_FIELD_TYPES.KEYWORD){var field=_new_job_capabilities_service.newJobCapsService.getFieldById(fieldName.replace(/\.keyword$/,""));isBothTypes=field!==null&&field.type===_public.ES_FIELD_TYPES.TEXT}else if(fieldType!==undefined&&fieldType===_public.ES_FIELD_TYPES.TEXT){var _field=_new_job_capabilities_service.newJobCapsService.getFieldById("".concat(fieldName,".keyword"));isBothTypes=_field!==null&&_field.type===_public.ES_FIELD_TYPES.KEYWORD}return isBothTypes};exports.isKeywordAndTextType=isKeywordAndTextType;var sortColumns=function sortColumns(obj,resultsField){return function(a,b){var typeofA=_typeof(obj[a]);var typeofB=_typeof(obj[b]);if(typeofA!=="string"&&typeofB==="string"){return 1}if(typeofA==="string"&&typeofB!=="string"){return-1}if(typeofA==="string"&&typeofB==="string"){return a.localeCompare(b)}if(a==="".concat(resultsField,".outlier_score")){return-1}if(b==="".concat(resultsField,".outlier_score")){return 1}var tokensA=a.split(".");var prefixA=tokensA[0];var tokensB=b.split(".");var prefixB=tokensB[0];if(prefixA===resultsField&&tokensA.length>1&&prefixB!==resultsField){tokensA.shift();tokensA.shift();if(tokensA.join(".")===b)return 1;return tokensA.join(".").localeCompare(b)}if(prefixB===resultsField&&tokensB.length>1&&prefixA!==resultsField){tokensB.shift();tokensB.shift();if(tokensB.join(".")===a)return-1;return a.localeCompare(tokensB.join("."))}return a.localeCompare(b)}};exports.sortColumns=sortColumns;var sortRegressionResultsFields=function sortRegressionResultsFields(a,b,jobConfig){var dependentVariable=(0,_analytics.getDependentVar)(jobConfig.analysis);var resultsField=jobConfig.dest.results_field;var predictedField=(0,_analytics.getPredictedFieldName)(resultsField,jobConfig.analysis,true);if(a==="".concat(resultsField,".is_training")){return-1}if(b==="".concat(resultsField,".is_training")){return 1}if(a===predictedField){return-1}if(b===predictedField){return 1}if(a===dependentVariable||a===dependentVariable.replace(/\.keyword$/,"")){return-1}if(b===dependentVariable||b===dependentVariable.replace(/\.keyword$/,"")){return 1}if(a==="".concat(resultsField,".prediction_probability")){return-1}if(b==="".concat(resultsField,".prediction_probability")){return 1}return a.localeCompare(b)};exports.sortRegressionResultsFields=sortRegressionResultsFields;var sortRegressionResultsColumns=function sortRegressionResultsColumns(obj,jobConfig){return function(a,b){var dependentVariable=(0,_analytics.getDependentVar)(jobConfig.analysis);var resultsField=jobConfig.dest.results_field;var predictedField=(0,_analytics.getPredictedFieldName)(resultsField,jobConfig.analysis,true);var typeofA=_typeof(obj[a]);var typeofB=_typeof(obj[b]);if(a==="".concat(resultsField,".is_training")){return-1}if(b==="".concat(resultsField,".is_training")){return 1}if(a===predictedField){return-1}if(b===predictedField){return 1}if(a===dependentVariable){return-1}if(b===dependentVariable){return 1}if(a==="".concat(resultsField,".prediction_probability")){return-1}if(b==="".concat(resultsField,".prediction_probability")){return 1}if(typeofA!=="string"&&typeofB==="string"){return 1}if(typeofA==="string"&&typeofB!=="string"){return-1}if(typeofA==="string"&&typeofB==="string"){return a.localeCompare(b)}var tokensA=a.split(".");var prefixA=tokensA[0];var tokensB=b.split(".");var prefixB=tokensB[0];if(prefixA===resultsField&&tokensA.length>1&&prefixB!==resultsField){tokensA.shift();tokensA.shift();if(tokensA.join(".")===b)return 1;return tokensA.join(".").localeCompare(b)}if(prefixB===resultsField&&tokensB.length>1&&prefixA!==resultsField){tokensB.shift();tokensB.shift();if(tokensB.join(".")===a)return-1;return a.localeCompare(tokensB.join("."))}return a.localeCompare(b)}};exports.sortRegressionResultsColumns=sortRegressionResultsColumns;function getFlattenedFields(obj,resultsField){var flatDocFields=[];var newDocFields=Object.keys(obj);newDocFields.forEach((function(f){var fieldValue=(0,_object_utils.getNestedProperty)(obj,f);if(_typeof(fieldValue)!=="object"||fieldValue===null||Array.isArray(fieldValue)){flatDocFields.push(f)}else{var innerFields=getFlattenedFields(fieldValue,resultsField);var flattenedFields=innerFields.map((function(d){return"".concat(f,".").concat(d)}));flatDocFields.push.apply(flatDocFields,_toConsumableArray(flattenedFields))}}));return flatDocFields.filter((function(f){return f!==ML__ID_COPY}))}var getDefaultFieldsFromJobCaps=function getDefaultFieldsFromJobCaps(fields,jobConfig,needsDestIndexFields){var _newJobCapsService$ge;var fieldsObj={selectedFields:[],docFields:[]};if(fields.length===0){return fieldsObj}var dependentVariable=(0,_analytics.getDependentVar)(jobConfig.analysis);var type=(_newJobCapsService$ge=_new_job_capabilities_service.newJobCapsService.getFieldById(dependentVariable))===null||_newJobCapsService$ge===void 0?void 0:_newJobCapsService$ge.type;var predictionFieldName=(0,_analytics.getPredictionFieldName)(jobConfig.analysis);var resultsField=jobConfig.dest.results_field;var defaultPredictionField="".concat(dependentVariable,"_prediction");var predictedField="".concat(resultsField,".").concat(predictionFieldName?predictionFieldName:defaultPredictionField);var allFields=needsDestIndexFields===true?[{id:"".concat(resultsField,".is_training"),name:"".concat(resultsField,".is_training"),type:_public.ES_FIELD_TYPES.BOOLEAN},{id:predictedField,name:predictedField,type:type}]:[];allFields.push.apply(allFields,_toConsumableArray(fields));allFields.sort((function(_ref,_ref2){var a=_ref.name;var b=_ref2.name;return sortRegressionResultsFields(a,b,jobConfig)}));var selectedFields=allFields.slice(0,DEFAULT_REGRESSION_COLUMNS*2).filter((function(field){return field.name===predictedField||!field.name.includes(".keyword")}));if(selectedFields.length>DEFAULT_REGRESSION_COLUMNS){selectedFields=selectedFields.slice(0,DEFAULT_REGRESSION_COLUMNS)}return{selectedFields:selectedFields,docFields:allFields,depVarType:type}};exports.getDefaultFieldsFromJobCaps=getDefaultFieldsFromJobCaps;var getDefaultClassificationFields=function getDefaultClassificationFields(docs,jobConfig){if(docs.length===0){return[]}var resultsField=jobConfig.dest.results_field;var newDocFields=getFlattenedFields(docs[0]._source,resultsField);return newDocFields.filter((function(k){if(k==="".concat(resultsField,".is_training")){return true}if(k===(0,_analytics.getPredictedFieldName)(resultsField,jobConfig.analysis,true)){return true}if(k===(0,_analytics.getDependentVar)(jobConfig.analysis)){return true}if(k==="".concat(resultsField,".prediction_probability")){return true}if(k.split(".")[0]===resultsField){return false}return docs.some((function(row){return row._source[k]!==null}))})).sort((function(a,b){return sortRegressionResultsFields(a,b,jobConfig)})).slice(0,DEFAULT_REGRESSION_COLUMNS)};exports.getDefaultClassificationFields=getDefaultClassificationFields;var getDefaultRegressionFields=function getDefaultRegressionFields(docs,jobConfig){var resultsField=jobConfig.dest.results_field;if(docs.length===0){return[]}var newDocFields=getFlattenedFields(docs[0]._source,resultsField);return newDocFields.filter((function(k){if(k==="".concat(resultsField,".is_training")){return true}if(k===(0,_analytics.getPredictedFieldName)(resultsField,jobConfig.analysis)){return true}if(k===(0,_analytics.getDependentVar)(jobConfig.analysis)){return true}if(k.split(".")[0]===resultsField){return false}return docs.some((function(row){return row._source[k]!==null}))})).sort((function(a,b){return sortRegressionResultsFields(a,b,jobConfig)})).slice(0,DEFAULT_REGRESSION_COLUMNS)};exports.getDefaultRegressionFields=getDefaultRegressionFields;var getDefaultSelectableFields=function getDefaultSelectableFields(docs,resultsField){if(docs.length===0){return[]}var newDocFields=getFlattenedFields(docs[0]._source,resultsField);return newDocFields.filter((function(k){if(k==="".concat(resultsField,".outlier_score")){return true}if(k.split(".")[0]===resultsField){return false}return docs.some((function(row){return row._source[k]!==null}))}))};exports.getDefaultSelectableFields=getDefaultSelectableFields;var toggleSelectedFieldSimple=function toggleSelectedFieldSimple(selectedFields,column){var index=selectedFields.indexOf(column);if(index===-1){selectedFields.push(column)}else{selectedFields.splice(index,1)}return selectedFields};exports.toggleSelectedFieldSimple=toggleSelectedFieldSimple;var toggleSelectedField=function toggleSelectedField(selectedFields,column,resultsField,depVarType){var index=selectedFields.map((function(field){return field.name})).indexOf(column);if(index===-1){var columnField=_new_job_capabilities_service.newJobCapsService.getFieldById(column);if(columnField!==null){selectedFields.push(columnField)}else{var resultFieldPattern="^".concat(resultsField,".");var regex=new RegExp(resultFieldPattern);var isResultField=column.match(regex)!==null;var newField;if(isResultField&&column.includes("is_training")){newField={id:column,name:column,type:_public.ES_FIELD_TYPES.BOOLEAN}}else if(isResultField&&depVarType!==undefined){newField={id:column,name:column,type:depVarType}}if(newField)selectedFields.push(newField)}}else{selectedFields.splice(index,1)}return selectedFields};exports.toggleSelectedField=toggleSelectedField},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.replaceTokensInUrlValue=replaceTokensInUrlValue;exports.getUrlForRecord=getUrlForRecord;exports.openCustomUrlWindow=openCustomUrlWindow;exports.isValidLabel=isValidLabel;exports.isValidTimeRange=isValidTimeRange;var _lodash=__webpack_require__(49);var _moment=_interopRequireDefault(__webpack_require__(32));var _parse_interval=__webpack_require__(74);var _string_utils=__webpack_require__(80);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TIME_RANGE_AUTO="auto";function replaceTokensInUrlValue(customUrlConfig,jobBucketSpanSecs,doc,timeFieldName){var urlValue=customUrlConfig.url_value;var timestamp=doc[timeFieldName];var timeRangeInterval="time_range"in customUrlConfig?(0,_parse_interval.parseInterval)(customUrlConfig.time_range):null;var record=_objectSpread({},doc);if(urlValue.includes("$earliest$")){var earliestMoment=(0,_moment.default)(timestamp);if(timeRangeInterval!==null){earliestMoment.subtract(timeRangeInterval)}else{earliestMoment.subtract(jobBucketSpanSecs,"s")}record.earliest=earliestMoment.toISOString()}if(urlValue.includes("$latest$")){var latestMoment=(0,_moment.default)(timestamp).add(jobBucketSpanSecs,"s");if(timeRangeInterval!==null){latestMoment.add(timeRangeInterval)}else{latestMoment.add(jobBucketSpanSecs,"s")}record.latest=latestMoment.toISOString()}return getUrlForRecord(customUrlConfig,record)}function getUrlForRecord(urlConfig,record){if(isKibanaUrl(urlConfig)===true){return buildKibanaUrl(urlConfig,record)}else{var urlPath=(0,_string_utils.replaceStringTokens)(urlConfig.url_value,record,false);return urlPath}}function openCustomUrlWindow(fullUrl,urlConfig){if(/^(?:[a-z]+:)?\/\//i.test(urlConfig.url_value)===false){window.open(fullUrl,"_blank")}else{var newWindow=window.open(fullUrl,"_blank","noopener,noreferrer");if(newWindow!==undefined&&newWindow!==null){newWindow.opener=null}}}function isKibanaUrl(urlConfig){var urlValue=urlConfig.url_value;return urlValue.startsWith("kibana#/discover")||urlValue.startsWith("kibana#/dashboard")||urlValue.startsWith("apm#/")}function escapeForKQL(value){return String(value).replace(/\"/g,'\\"')}function buildKibanaUrl(urlConfig,record){var urlValue=urlConfig.url_value;var URL_LENGTH_LIMIT=2e3;var isLuceneQueryLanguage=urlValue.includes("language:lucene");var queryLanguageEscapeCallback=isLuceneQueryLanguage?_string_utils.escapeForElasticsearchQuery:escapeForKQL;var commonEscapeCallback=(0,_lodash.flow)((function(v){return v.replace(/[!']/g,"!$&")}),encodeURIComponent);var replaceSingleTokenValues=function replaceSingleTokenValues(str){var getResultTokenValue=(0,_lodash.flow)(isLuceneQueryLanguage?function(v){return v}:queryLanguageEscapeCallback,commonEscapeCallback);return str.replace(/\$([^?&$\'"]+)\$(\/)?/g,(function(match,name){var slash=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var tokenValue=(0,_lodash.get)(record,name);tokenValue=Array.isArray(tokenValue)?tokenValue[0]:tokenValue;return tokenValue===undefined?"":getResultTokenValue(tokenValue)+slash}))};return(0,_lodash.flow)((function(str){return str.replace("$earliest$",record.earliest).replace("$latest$",record.latest)}),(function(str){var getResultTokenValue=(0,_lodash.flow)(queryLanguageEscapeCallback,commonEscapeCallback);return str.replace(/(.+query:'|.+&kuery=)([^']*)(['&].+)/,(function(fullMatch,prefix,queryString,postfix){var _map=[prefix,postfix].map(replaceSingleTokenValues),_map2=_slicedToArray(_map,2),resultPrefix=_map2[0],resultPostfix=_map2[1];var availableCharactersLeft=URL_LENGTH_LIMIT-resultPrefix.length-resultPostfix.length;var queryFields=queryString.split(/\sand\s/i).map((function(v){return v.split(":")[0]}));var queryParts=[];var joinOperator=" AND ";fieldsLoop:for(var i=0;i<queryFields.length;i++){var field=queryFields[i];var tokenValues=(0,_lodash.get)(record,field)||null;if(tokenValues===null){continue}tokenValues=Array.isArray(tokenValues)?tokenValues:[tokenValues];var result="";for(var j=0;j<tokenValues.length;j++){var part="".concat(j>0?" OR ":"").concat(field,':"').concat(getResultTokenValue(tokenValues[j]),'"');if(availableCharactersLeft<part.length){if(result.length>0){queryParts.push(j>0?"(".concat(result,")"):result)}break fieldsLoop}result+=part;availableCharactersLeft-=result.length}if(result.length>0){queryParts.push(tokenValues.length>1?"(".concat(result,")"):result)}}var resultQuery=queryParts.join(joinOperator);return"".concat(resultPrefix).concat(resultQuery).concat(resultPostfix)}))}),replaceSingleTokenValues)(urlValue)}function isValidLabel(label,savedCustomUrls){var isValid=label!==undefined&&label.trim().length>0;if(isValid===true&&savedCustomUrls!==undefined){var existingLabels=savedCustomUrls.map((function(customUrl){return customUrl.url_name}));isValid=!existingLabels.includes(label)}return isValid}function isValidTimeRange(timeRange){if(timeRange===undefined||timeRange.length===0||timeRange===TIME_RANGE_AUTO){return true}var interval=(0,_parse_interval.parseInterval)(timeRange);return interval!==null}},,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNode=buildNode;exports.toElasticsearchQuery=toElasticsearchQuery;function buildNode(value){return{type:"literal",value:value}}function toElasticsearchQuery(node){return node.value}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"shortenDottedString",{enumerable:true,get:function get(){return _shorten_dotted_string.shortenDottedString}});Object.defineProperty(exports,"AbortError",{enumerable:true,get:function get(){return _abort_utils.AbortError}});Object.defineProperty(exports,"toPromise",{enumerable:true,get:function get(){return _abort_utils.toPromise}});Object.defineProperty(exports,"getCombinedSignal",{enumerable:true,get:function get(){return _abort_utils.getCombinedSignal}});var _shorten_dotted_string=__webpack_require__(607);var _abort_utils=__webpack_require__(608)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parentPipelineType=exports.parentPipelineAggHelper=void 0;var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(49);var _nested_agg_helpers=__webpack_require__(340);var _parent_pipeline_agg_writer=__webpack_require__(720);var _common=__webpack_require__(52);var metricAggFilter=["!top_hits","!percentiles","!percentile_ranks","!median","!std_dev","!geo_bounds","!geo_centroid"];var parentPipelineType=_i18n.i18n.translate("data.search.aggs.metrics.parentPipelineAggregationsSubtypeTitle",{defaultMessage:"Parent Pipeline Aggregations"});exports.parentPipelineType=parentPipelineType;var parentPipelineAggHelper={subtype:parentPipelineType,params:function params(){return[{name:"metricAgg",default:"custom",write:_parent_pipeline_agg_writer.parentPipelineAggWriter},{name:"customMetric",type:"agg",allowedAggs:metricAggFilter,makeAgg:function makeAgg(termsAgg,state){state=state||{type:"count"};var metricAgg=termsAgg.aggConfigs.createAggConfig(state,{addToAggConfigs:false});metricAgg.id=termsAgg.id+"-metric";return metricAgg},modifyAggConfigOnSearchRequestStart:(0,_nested_agg_helpers.forwardModifyAggConfigOnSearchRequestStart)("customMetric"),write:_lodash.noop},{name:"buckets_path",write:_lodash.noop}]},getFormat:function getFormat(agg){var subAgg;var customMetric=agg.getParam("customMetric");if(customMetric){subAgg=customMetric}else{subAgg=agg.aggConfigs.byId(agg.getParam("metricAgg"))}return subAgg?subAgg.type.getFormat(subAgg):new(_common.FieldFormat.from(_lodash.identity))}};exports.parentPipelineAggHelper=parentPipelineAggHelper},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.siblingPipelineType=exports.siblingPipelineAggHelper=void 0;var _lodash=__webpack_require__(49);var _i18n=__webpack_require__(1);var _sibling_pipeline_agg_writer=__webpack_require__(843);var _nested_agg_helpers=__webpack_require__(340);var _common=__webpack_require__(52);var metricAggFilter=["!top_hits","!percentiles","!percentile_ranks","!median","!std_dev","!sum_bucket","!avg_bucket","!min_bucket","!max_bucket","!derivative","!moving_avg","!serial_diff","!cumulative_sum","!geo_bounds","!geo_centroid"];var bucketAggFilter=[];var siblingPipelineType=_i18n.i18n.translate("data.search.aggs.metrics.siblingPipelineAggregationsSubtypeTitle",{defaultMessage:"Sibling pipeline aggregations"});exports.siblingPipelineType=siblingPipelineType;var siblingPipelineAggHelper={subtype:siblingPipelineType,params:function params(){return[{name:"customBucket",type:"agg",allowedAggs:bucketAggFilter,default:null,makeAgg:function makeAgg(agg,state){state=state||{type:"date_histogram"};var orderAgg=agg.aggConfigs.createAggConfig(state,{addToAggConfigs:false});orderAgg.id=agg.id+"-bucket";return orderAgg},modifyAggConfigOnSearchRequestStart:(0,_nested_agg_helpers.forwardModifyAggConfigOnSearchRequestStart)("customBucket"),write:function write(){}},{name:"customMetric",type:"agg",allowedAggs:metricAggFilter,default:null,makeAgg:function makeAgg(agg,state){state=state||{type:"count"};var orderAgg=agg.aggConfigs.createAggConfig(state,{addToAggConfigs:false});orderAgg.id=agg.id+"-metric";return orderAgg},modifyAggConfigOnSearchRequestStart:(0,_nested_agg_helpers.forwardModifyAggConfigOnSearchRequestStart)("customMetric"),write:_sibling_pipeline_agg_writer.siblingPipelineAggWriter}]},getFormat:function getFormat(agg){var customMetric=agg.getParam("customMetric");return customMetric?customMetric.type.getFormat(customMetric):new(_common.FieldFormat.from(_lodash.identity))}};exports.siblingPipelineAggHelper=siblingPipelineAggHelper},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getNestedProperty=void 0;var getNestedProperty=function getNestedProperty(obj,accessor,defaultValue){var value=accessor.split(".").reduce((function(o,i){return o===null||o===void 0?void 0:o[i]}),obj);if(value===undefined)return defaultValue;return value};exports.getNestedProperty=getNestedProperty},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useUiSettings=void 0;var _kibana_context=__webpack_require__(233);var useUiSettings=function useUiSettings(){return(0,_kibana_context.useMlKibana)().services.uiSettings};exports.useUiSettings=useUiSettings},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tabColor=tabColor;var _eui_theme_dark=_interopRequireDefault(__webpack_require__(42));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var COLORS=[_eui_theme_dark.default.euiColorVis0,_eui_theme_dark.default.euiColorVis1,_eui_theme_dark.default.euiColorVis2,_eui_theme_dark.default.euiColorVis3,_eui_theme_dark.default.euiColorVis5,_eui_theme_dark.default.euiColorVis6,_eui_theme_dark.default.euiColorVis7,_eui_theme_dark.default.euiColorVis8,_eui_theme_dark.default.euiColorVis9,_eui_theme_dark.default.euiColorDarkShade,_eui_theme_dark.default.euiColorPrimary];var colorMap={};function tabColor(name){if(colorMap[name]===undefined){var n=stringHash(name);var color=COLORS[n%COLORS.length];colorMap[name]=color;return color}else{return colorMap[name]}}function stringHash(str){var hash=0;var chr=0;if(str.length===0){return hash}for(var i=0;i<str.length;i++){chr=str.charCodeAt(i);hash=(hash<<5)-hash+chr;hash|=0}return hash<0?hash*-2:hash}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getErrorMessage=getErrorMessage;var _errors=__webpack_require__(388);function getErrorMessage(error){if((0,_errors.isErrorResponse)(error)){return"".concat(error.body.error,": ").concat(error.body.message)}if(_typeof(error)==="object"&&typeof error.message==="string"){return error.message}return JSON.stringify(error)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getAnalyticsFactory",{enumerable:true,get:function get(){return _get_analytics.getAnalyticsFactory}});Object.defineProperty(exports,"deleteAnalytics",{enumerable:true,get:function get(){return _delete_analytics.deleteAnalytics}});Object.defineProperty(exports,"startAnalytics",{enumerable:true,get:function get(){return _start_analytics.startAnalytics}});Object.defineProperty(exports,"stopAnalytics",{enumerable:true,get:function get(){return _stop_analytics.stopAnalytics}});var _get_analytics=__webpack_require__(189);var _delete_analytics=__webpack_require__(917);var _start_analytics=__webpack_require__(918);var _stop_analytics=__webpack_require__(919)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"checkMlNodesAvailable",{enumerable:true,get:function get(){return _check_ml_nodes.checkMlNodesAvailable}});Object.defineProperty(exports,"getMlNodeCount",{enumerable:true,get:function get(){return _check_ml_nodes.getMlNodeCount}});Object.defineProperty(exports,"mlNodesAvailable",{enumerable:true,get:function get(){return _check_ml_nodes.mlNodesAvailable}});Object.defineProperty(exports,"permissionToViewMlNodeCount",{enumerable:true,get:function get(){return _check_ml_nodes.permissionToViewMlNodeCount}});var _check_ml_nodes=__webpack_require__(81)},,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.annotationsRefreshed=exports.annotationsRefresh$=exports.annotation$=void 0;var _rxjs=__webpack_require__(33);var annotation$=new _rxjs.BehaviorSubject(null);exports.annotation$=annotation$;var annotationsRefresh$=new _rxjs.BehaviorSubject(Date.now());exports.annotationsRefresh$=annotationsRefresh$;var annotationsRefreshed=function annotationsRefreshed(){return annotationsRefresh$.next(Date.now())};exports.annotationsRefreshed=annotationsRefreshed},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mlForecastService=void 0;var _lodash=_interopRequireDefault(__webpack_require__(49));var _operators=__webpack_require__(6);var _index_patterns=__webpack_require__(120);var _ml_api_service=__webpack_require__(51);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getForecastsSummary(job,query,earliestMs,maxResults){return new Promise((function(resolve,reject){var obj={success:true,forecasts:[]};var filterCriteria=[{term:{result_type:"model_forecast_request_stats"}},{term:{job_id:job.job_id}},{range:{timestamp:{gte:earliestMs,format:"epoch_millis"}}}];if(query){filterCriteria.push(query)}_ml_api_service.ml.esSearch({index:_index_patterns.ML_RESULTS_INDEX_PATTERN,size:maxResults,rest_total_hits_as_int:true,body:{query:{bool:{filter:filterCriteria}},sort:[{forecast_create_timestamp:{order:"desc"}}]}}).then((function(resp){if(resp.hits.total!==0){obj.forecasts=resp.hits.hits.map((function(hit){return hit._source}))}resolve(obj)})).catch((function(resp){reject(resp)}))}))}function getForecastDateRange(job,forecastId){return new Promise((function(resolve,reject){var obj={success:true,earliest:null,latest:null};var filterCriteria=[{query_string:{query:"result_type:model_forecast",analyze_wildcard:true}},{term:{job_id:job.job_id}},{term:{forecast_id:forecastId}}];_ml_api_service.ml.esSearch({index:_index_patterns.ML_RESULTS_INDEX_PATTERN,size:0,body:{query:{bool:{filter:filterCriteria}},aggs:{earliest:{min:{field:"timestamp"}},latest:{max:{field:"timestamp"}}}}}).then((function(resp){obj.earliest=_lodash.default.get(resp,"aggregations.earliest.value",null);obj.latest=_lodash.default.get(resp,"aggregations.latest.value",null);if(obj.earliest===null||obj.latest===null){reject(resp)}else{resolve(obj)}})).catch((function(resp){reject(resp)}))}))}function getForecastData(job,detectorIndex,forecastId,entityFields,earliestMs,latestMs,interval,aggType){var criteriaFields=[];var detector=job.analysis_config.detectors[detectorIndex];if(_lodash.default.has(detector,"partition_field_name")){var partitionEntity=_lodash.default.find(entityFields,{fieldName:detector.partition_field_name});if(partitionEntity!==undefined){criteriaFields.push({fieldName:"partition_field_name",fieldValue:partitionEntity.fieldName},{fieldName:"partition_field_value",fieldValue:partitionEntity.fieldValue})}}if(_lodash.default.has(detector,"over_field_name")){var overEntity=_lodash.default.find(entityFields,{fieldName:detector.over_field_name});if(overEntity!==undefined){criteriaFields.push({fieldName:"over_field_name",fieldValue:overEntity.fieldName},{fieldName:"over_field_value",fieldValue:overEntity.fieldValue})}}if(_lodash.default.has(detector,"by_field_name")){var byEntity=_lodash.default.find(entityFields,{fieldName:detector.by_field_name});if(byEntity!==undefined){criteriaFields.push({fieldName:"by_field_name",fieldValue:byEntity.fieldName},{fieldName:"by_field_value",fieldValue:byEntity.fieldValue})}}var obj={success:true,results:{}};var filterCriteria=[{query_string:{query:"result_type:model_forecast",analyze_wildcard:true}},{term:{job_id:job.job_id}},{term:{forecast_id:forecastId}},{term:{detector_index:detectorIndex}},{range:{timestamp:{gte:earliestMs,lte:latestMs,format:"epoch_millis"}}}];_lodash.default.each(criteriaFields,(function(criteria){filterCriteria.push({term:_defineProperty({},criteria.fieldName,criteria.fieldValue)})}));var forecastAggs=aggType===undefined?{avg:"avg",max:"max",min:"min"}:{avg:aggType.avg,max:aggType.max,min:aggType.min};return _ml_api_service.ml.esSearch$({index:_index_patterns.ML_RESULTS_INDEX_PATTERN,size:0,body:{query:{bool:{filter:filterCriteria}},aggs:{times:{date_histogram:{field:"timestamp",interval:interval,min_doc_count:1},aggs:{prediction:_defineProperty({},forecastAggs.avg,{field:"forecast_prediction"}),forecastUpper:_defineProperty({},forecastAggs.max,{field:"forecast_upper"}),forecastLower:_defineProperty({},forecastAggs.min,{field:"forecast_lower"})}}}}}).pipe((0,_operators.map)((function(resp){var aggregationsByTime=_lodash.default.get(resp,["aggregations","times","buckets"],[]);_lodash.default.each(aggregationsByTime,(function(dataForTime){var time=dataForTime.key;obj.results[time]={prediction:_lodash.default.get(dataForTime,["prediction","value"]),forecastUpper:_lodash.default.get(dataForTime,["forecastUpper","value"]),forecastLower:_lodash.default.get(dataForTime,["forecastLower","value"])}}));return obj})))}function runForecast(jobId,duration){console.log("ML forecast service run forecast with duration:",duration);return new Promise((function(resolve,reject){_ml_api_service.ml.forecast({jobId:jobId,duration:duration}).then((function(resp){resolve(resp)})).catch((function(err){reject(err)}))}))}function getForecastRequestStats(job,forecastId){return new Promise((function(resolve,reject){var obj={success:true,stats:{}};var filterCriteria=[{query_string:{query:"result_type:model_forecast_request_stats",analyze_wildcard:true}},{term:{job_id:job.job_id}},{term:{forecast_id:forecastId}}];_ml_api_service.ml.esSearch({index:_index_patterns.ML_RESULTS_INDEX_PATTERN,size:1,rest_total_hits_as_int:true,body:{query:{bool:{filter:filterCriteria}}}}).then((function(resp){if(resp.hits.total!==0){obj.stats=_lodash.default.first(resp.hits.hits)._source}resolve(obj)})).catch((function(resp){reject(resp)}))}))}var mlForecastService={getForecastsSummary:getForecastsSummary,getForecastDateRange:getForecastDateRange,getForecastData:getForecastData,runForecast:runForecast,getForecastRequestStats:getForecastRequestStats};exports.mlForecastService=mlForecastService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DASHBOARD_CONTAINER_TYPE=exports.DEFAULT_PANEL_HEIGHT=exports.DEFAULT_PANEL_WIDTH=exports.DASHBOARD_GRID_HEIGHT=exports.DASHBOARD_GRID_COLUMN_COUNT=void 0;var DASHBOARD_GRID_COLUMN_COUNT=48;exports.DASHBOARD_GRID_COLUMN_COUNT=DASHBOARD_GRID_COLUMN_COUNT;var DASHBOARD_GRID_HEIGHT=20;exports.DASHBOARD_GRID_HEIGHT=DASHBOARD_GRID_HEIGHT;var DEFAULT_PANEL_WIDTH=DASHBOARD_GRID_COLUMN_COUNT/2;exports.DEFAULT_PANEL_WIDTH=DEFAULT_PANEL_WIDTH;var DEFAULT_PANEL_HEIGHT=15;exports.DEFAULT_PANEL_HEIGHT=DEFAULT_PANEL_HEIGHT;var DASHBOARD_CONTAINER_TYPE="dashboard";exports.DASHBOARD_CONTAINER_TYPE=DASHBOARD_CONTAINER_TYPE},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SAVE_DUPLICATE_REJECTED=exports.OVERWRITE_REJECTED=void 0;var _i18n=__webpack_require__(1);var OVERWRITE_REJECTED=_i18n.i18n.translate("savedObjects.overwriteRejectedDescription",{defaultMessage:"Overwrite confirmation was rejected"});exports.OVERWRITE_REJECTED=OVERWRITE_REJECTED;var SAVE_DUPLICATE_REJECTED=_i18n.i18n.translate("savedObjects.saveDuplicateRejectedDescription",{defaultMessage:"Save with duplicate title confirmation was rejected"});exports.SAVE_DUPLICATE_REJECTED=SAVE_DUPLICATE_REJECTED},,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IEsSearchRequest",{enumerable:true,get:function get(){return _es_search.IEsSearchRequest}});Object.defineProperty(exports,"IEsSearchResponse",{enumerable:true,get:function get(){return _es_search.IEsSearchResponse}});Object.defineProperty(exports,"ES_SEARCH_STRATEGY",{enumerable:true,get:function get(){return _es_search.ES_SEARCH_STRATEGY}});Object.defineProperty(exports,"IKibanaSearchResponse",{enumerable:true,get:function get(){return _types.IKibanaSearchResponse}});Object.defineProperty(exports,"IKibanaSearchRequest",{enumerable:true,get:function get(){return _types.IKibanaSearchRequest}});exports.DEFAULT_SEARCH_STRATEGY=void 0;var _es_search=__webpack_require__(306);var _types=__webpack_require__(624);var DEFAULT_SEARCH_STRATEGY=_es_search.ES_SEARCH_STRATEGY;exports.DEFAULT_SEARCH_STRATEGY=DEFAULT_SEARCH_STRATEGY},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseEsInterval=parseEsInterval;var _datemath=_interopRequireDefault(__webpack_require__(95));var _invalid_es_calendar_interval_error=__webpack_require__(307);var _invalid_es_interval_format_error=__webpack_require__(308);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ES_INTERVAL_STRING_REGEX=new RegExp("^([1-9][0-9]*)\\s*("+_datemath.default.units.join("|")+")$");function parseEsInterval(interval){var matches=String(interval).trim().match(ES_INTERVAL_STRING_REGEX);if(!matches){throw new _invalid_es_interval_format_error.InvalidEsIntervalFormatError(interval)}var value=parseFloat(matches[1]);var unit=matches[2];var type=_datemath.default.unitsMap[unit].type;if(type==="calendar"&&value!==1){throw new _invalid_es_calendar_interval_error.InvalidEsCalendarIntervalError(interval,value,unit,type)}return{value:value,unit:unit,type:type==="mixed"&&value===1||type==="calendar"?"calendar":"fixed"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertDateRangeToString=convertDateRangeToString;function convertDateRangeToString(_ref,format){var from=_ref.from,to=_ref.to;if(!from){return"Before "+format(to)}else if(!to){return"After "+format(from)}else{return format(from)+" to "+format(to)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertIPRangeToString=void 0;var convertIPRangeToString=function convertIPRangeToString(range,format){if(range.type==="mask"){return format(range.mask)}var from=range.from?format(range.from):"-Infinity";var to=range.to?format(range.to):"Infinity";return"".concat(from," to ").concat(to)};exports.convertIPRangeToString=convertIPRangeToString},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={getTitle:true,validateIndexPattern:true,IndexPatternMissingIndices:true,getFromSavedObject:true,isDefault:true};Object.defineProperty(exports,"getTitle",{enumerable:true,get:function get(){return _get_title.getTitle}});Object.defineProperty(exports,"validateIndexPattern",{enumerable:true,get:function get(){return _validate_index_pattern.validateIndexPattern}});Object.defineProperty(exports,"IndexPatternMissingIndices",{enumerable:true,get:function get(){return _errors.IndexPatternMissingIndices}});Object.defineProperty(exports,"getFromSavedObject",{enumerable:true,get:function get(){return _get_from_saved_object.getFromSavedObject}});Object.defineProperty(exports,"isDefault",{enumerable:true,get:function get(){return _is_default.isDefault}});var _get_title=__webpack_require__(686);var _types=__webpack_require__(325);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _validate_index_pattern=__webpack_require__(687);var _errors=__webpack_require__(688);var _get_from_saved_object=__webpack_require__(689);var _is_default=__webpack_require__(690)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _agg_config=__webpack_require__(175);Object.keys(_agg_config).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg_config[key]}})}));var _agg_configs=__webpack_require__(338);Object.keys(_agg_configs).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg_configs[key]}})}));var _agg_groups=__webpack_require__(225);Object.keys(_agg_groups).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg_groups[key]}})}));var _agg_type=__webpack_require__(177);Object.keys(_agg_type).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg_type[key]}})}));var _agg_types=__webpack_require__(704);Object.keys(_agg_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg_types[key]}})}));var _agg_types_registry=__webpack_require__(847);Object.keys(_agg_types_registry).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg_types_registry[key]}})}));var _buckets=__webpack_require__(848);Object.keys(_buckets).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _buckets[key]}})}));var _filter=__webpack_require__(335);Object.keys(_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _filter[key]}})}));var _metrics=__webpack_require__(849);Object.keys(_metrics).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _metrics[key]}})}));var _param_types=__webpack_require__(367);Object.keys(_param_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _param_types[key]}})}));var _types=__webpack_require__(852);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _utils=__webpack_require__(366);Object.keys(_utils).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _utils[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggConfig=void 0;var _lodash=_interopRequireDefault(__webpack_require__(49));var _i18n=__webpack_require__(1);var _agg_params=__webpack_require__(176);var _common=__webpack_require__(52);var _services=__webpack_require__(61);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggConfig=function(){_createClass(AggConfig,null,[{key:"ensureIds",value:function ensureIds(list){var have=[];var haveNot=[];list.forEach((function(obj){(obj.id?have:haveNot).push(obj)}));var nextId=AggConfig.nextId(have);haveNot.forEach((function(obj){obj.id=String(nextId++)}));return list}},{key:"nextId",value:function nextId(list){return 1+list.reduce((function(max,obj){return Math.max(max,+obj.id||0)}),0)}}]);function AggConfig(aggConfigs,opts){_classCallCheck(this,AggConfig);_defineProperty(this,"aggConfigs",void 0);_defineProperty(this,"id",void 0);_defineProperty(this,"enabled",void 0);_defineProperty(this,"params",void 0);_defineProperty(this,"parent",void 0);_defineProperty(this,"brandNew",void 0);_defineProperty(this,"schema",void 0);_defineProperty(this,"__type",void 0);_defineProperty(this,"__typeDecorations",void 0);_defineProperty(this,"subAggs",[]);this.aggConfigs=aggConfigs;this.id=String(opts.id||AggConfig.nextId(aggConfigs.aggs));this.enabled=typeof opts.enabled==="boolean"?opts.enabled:true;this.params={};this.setType(opts.type);if(opts.schema){this.schema=opts.schema}this.setParams(opts.params||{});this.__type=this.__type}_createClass(AggConfig,[{key:"setParams",value:function setParams(from){var _this=this;from=from||this.params||{};var to=this.params={};this.getAggParams().forEach((function(aggParam){var val=from[aggParam.name];if(val==null){if(aggParam.default==null)return;if(!_lodash.default.isFunction(aggParam.default)){val=aggParam.default}else{val=aggParam.default(_this);if(val==null)return}}if(aggParam.deserialize){var isTyped=_lodash.default.isFunction(aggParam.valueType);var isType=isTyped&&val instanceof aggParam.valueType;var isObject=!isTyped&&_lodash.default.isObject(val);var isDeserialized=isType||isObject;if(!isDeserialized){val=aggParam.deserialize(val,_this)}to[aggParam.name]=val;return}to[aggParam.name]=_lodash.default.cloneDeep(val)}))}},{key:"getParam",value:function getParam(key){return _lodash.default.get(this.params,key)}},{key:"write",value:function write(aggs){return(0,_agg_params.writeParams)(this.type.params,this,aggs)}},{key:"isFilterable",value:function isFilterable(){return _lodash.default.isFunction(this.type.createFilter)}},{key:"createFilter",value:function createFilter(key){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var createFilter=this.type.createFilter;if(!createFilter){throw new TypeError('The "'.concat(this.type.title,'" aggregation does not support filtering.'))}var field=this.getField();var label=this.getFieldDisplayName();if(field&&!field.filterable){var message='The "'.concat(label,'" field can not be used for filtering.');if(field.scripted){message='The "'.concat(label,'" field is scripted and can not be used for filtering.')}throw new TypeError(message)}return createFilter(this,key,params)}},{key:"onSearchRequestStart",value:function onSearchRequestStart(searchSource,options){var _this2=this;if(!this.type){return Promise.resolve()}return Promise.all(this.type.params.map((function(param){return param.modifyAggConfigOnSearchRequestStart(_this2,searchSource,options)})))}},{key:"toDsl",value:function toDsl(aggConfigs){if(this.type.hasNoDsl)return;var output=this.write(aggConfigs);var configDsl={};configDsl[this.type.dslName||this.type.name]=output.params;if(this.subAggs.length&&!output.subAggs)output.subAggs=this.subAggs;if(output.subAggs){var subDslLvl=configDsl.aggs||(configDsl.aggs={});output.subAggs.forEach((function nestAdhocSubAggs(subAggConfig){subDslLvl[subAggConfig.id]=subAggConfig.toDsl(aggConfigs)}))}if(output.parentAggs){var _subDslLvl=configDsl.parentAggs||(configDsl.parentAggs={});output.parentAggs.forEach((function nestAdhocSubAggs(subAggConfig){_subDslLvl[subAggConfig.id]=subAggConfig.toDsl(aggConfigs)}))}return configDsl}},{key:"toJSON",value:function toJSON(){var _this3=this;var params=this.params;var outParams=_lodash.default.transform(this.getAggParams(),(function(out,aggParam){var val=params[aggParam.name];if(val==null)return;if(aggParam.serialize)val=aggParam.serialize(val,_this3);if(val==null)return;out[aggParam.name]=_lodash.default.cloneDeep(val)}),{});return{id:this.id,enabled:this.enabled,type:this.type&&this.type.name,schema:this.schema,params:outParams}}},{key:"getAggParams",value:function getAggParams(){return _toConsumableArray(_lodash.default.has(this,"type.params")?this.type.params:[])}},{key:"getRequestAggs",value:function getRequestAggs(){return this.type&&this.type.getRequestAggs(this)||[this]}},{key:"getResponseAggs",value:function getResponseAggs(){return this.type&&this.type.getResponseAggs(this)||[this]}},{key:"getValue",value:function getValue(bucket){return this.type.getValue(this,bucket)}},{key:"getKey",value:function getKey(bucket,key){if(this.type.getKey){return this.type.getKey(bucket,key,this)}else{return""}}},{key:"getFieldDisplayName",value:function getFieldDisplayName(){var field=this.getField();return field?field.displayName||this.fieldName():""}},{key:"getField",value:function getField(){return this.params.field}},{key:"makeLabel",value:function makeLabel(){var percentageMode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.params.customLabel){return this.params.customLabel}if(!this.type)return"";return percentageMode?_i18n.i18n.translate("data.search.aggs.percentageOfLabel",{defaultMessage:"Percentage of {label}",values:{label:this.type.makeLabel(this)}}):"".concat(this.type.makeLabel(this))}},{key:"getIndexPattern",value:function getIndexPattern(){return this.aggConfigs.indexPattern}},{key:"getTimeRange",value:function getTimeRange(){return this.aggConfigs.timeRange}},{key:"fieldFormatter",value:function fieldFormatter(contentType,defaultFormat){var format=this.type&&this.type.getFormat(this);if(format){return format.getConverterFor(contentType)}return this.fieldOwnFormatter(contentType,defaultFormat)}},{key:"fieldOwnFormatter",value:function fieldOwnFormatter(contentType,defaultFormat){var fieldFormatsService=(0,_services.getFieldFormats)();var field=this.getField();var format=field&&field.format;if(!format)format=defaultFormat;if(!format)format=fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.STRING);return format.getConverterFor(contentType)}},{key:"fieldName",value:function fieldName(){var field=this.getField();return field?field.name:""}},{key:"fieldIsTimeField",value:function fieldIsTimeField(){var indexPattern=this.getIndexPattern();if(!indexPattern)return false;var timeFieldName=indexPattern.timeFieldName;return timeFieldName&&this.fieldName()===timeFieldName}},{key:"setType",value:function setType(type){this.type=type}},{key:"type",get:function get(){return this.__type},set:function set(type){var _this4=this;if(this.__typeDecorations){_lodash.default.forOwn(this.__typeDecorations,(function(prop,name){delete this[name]}),this)}if(type&&_lodash.default.isFunction(type.decorateAggConfig)){this.__typeDecorations=type.decorateAggConfig();Object.defineProperties(this,this.__typeDecorations)}this.__type=type;var availableFields=[];var fieldParam=this.type&&this.type.params.find((function(p){return p.type==="field"}));if(fieldParam){availableFields=fieldParam.getAvailableFields(this)}this.setParams({field:availableFields.find((function(field){return field.name===_this4.getField()}))})}}]);return AggConfig}();exports.AggConfig=AggConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.writeParams=exports.initParams=void 0;var _agg=__webpack_require__(333);var _field=__webpack_require__(334);var _optioned=__webpack_require__(224);var _string=__webpack_require__(336);var _json=__webpack_require__(337);var _base=__webpack_require__(114);var paramTypeMap={field:_field.FieldParamType,optioned:_optioned.OptionedParamType,string:_string.StringParamType,json:_json.JsonParamType,agg:_agg.AggParamType,_default:_base.BaseParamType};var initParams=function initParams(params){return params.map((function(config){var Class=paramTypeMap[config.type]||paramTypeMap._default;return new Class(config)}))};exports.initParams=initParams;var writeParams=function writeParams(){var params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var aggConfig=arguments.length>1?arguments[1]:undefined;var aggs=arguments.length>2?arguments[2]:undefined;var locals=arguments.length>3?arguments[3]:undefined;var output={params:{}};locals=locals||{};params.forEach((function(param){if(param.write){param.write(aggConfig,output,aggs,locals)}else{if(param&&param.name){output.params[param.name]=aggConfig.params[param.name]}}}));return output};exports.writeParams=writeParams},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggType=void 0;var _lodash=__webpack_require__(49);var _i18n=__webpack_require__(1);var _agg_params=__webpack_require__(176);var _base=__webpack_require__(114);var _common=__webpack_require__(52);var _services=__webpack_require__(61);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getFormat=function getFormat(agg){var field=agg.getField();var fieldFormatsService=(0,_services.getFieldFormats)();return field?field.format:fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.STRING)};var AggType=function AggType(config){var _this=this;_classCallCheck(this,AggType);_defineProperty(this,"name",void 0);_defineProperty(this,"type",void 0);_defineProperty(this,"subtype",void 0);_defineProperty(this,"dslName",void 0);_defineProperty(this,"title",void 0);_defineProperty(this,"makeLabel",void 0);_defineProperty(this,"ordered",void 0);_defineProperty(this,"hasNoDsl",void 0);_defineProperty(this,"createFilter",void 0);_defineProperty(this,"params",void 0);_defineProperty(this,"getRequestAggs",void 0);_defineProperty(this,"getResponseAggs",void 0);_defineProperty(this,"decorateAggConfig",void 0);_defineProperty(this,"postFlightRequest",void 0);_defineProperty(this,"getFormat",void 0);_defineProperty(this,"getValue",void 0);_defineProperty(this,"getKey",void 0);_defineProperty(this,"paramByName",(function(name){return _this.params.find((function(p){return p.name===name}))}));this.name=config.name;this.type=config.type||"metrics";this.dslName=config.dslName||config.name;this.title=config.title;this.makeLabel=config.makeLabel||(0,_lodash.constant)(this.name);this.ordered=config.ordered;this.hasNoDsl=!!config.hasNoDsl;if(config.createFilter){this.createFilter=config.createFilter}if(config.params&&config.params.length&&config.params[0]instanceof _base.BaseParamType){this.params=config.params}else{var _params=config.params?_toConsumableArray(config.params):[];_params.push({name:"json",type:"json",advanced:true});if(config.customLabels!==false){_params.push({name:"customLabel",displayName:_i18n.i18n.translate("data.search.aggs.string.customLabel",{defaultMessage:"Custom label"}),type:"string",write:_lodash.noop})}this.params=(0,_agg_params.initParams)(_params)}this.getRequestAggs=config.getRequestAggs||_lodash.noop;this.getResponseAggs=config.getResponseAggs||function(){};this.decorateAggConfig=config.decorateAggConfig||function(){return{}};this.postFlightRequest=config.postFlightRequest||_lodash.identity;this.getFormat=config.getFormat||getFormat;this.getValue=config.getValue||function(agg,bucket){}};exports.AggType=AggType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _esaggs=__webpack_require__(735);Object.keys(_esaggs).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _esaggs[key]}})}));var _utils=__webpack_require__(231);Object.keys(_utils).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _utils[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SuggestionsComponent",{enumerable:true,get:function get(){return _typeahead.SuggestionsComponent}});Object.defineProperty(exports,"IndexPatternSelect",{enumerable:true,get:function get(){return _index_pattern_select.IndexPatternSelect}});Object.defineProperty(exports,"FilterBar",{enumerable:true,get:function get(){return _filter_bar.FilterBar}});Object.defineProperty(exports,"QueryStringInput",{enumerable:true,get:function get(){return _query_string_input.QueryStringInput}});Object.defineProperty(exports,"SearchBar",{enumerable:true,get:function get(){return _search_bar.SearchBar}});Object.defineProperty(exports,"SearchBarProps",{enumerable:true,get:function get(){return _search_bar.SearchBarProps}});Object.defineProperty(exports,"StatefulSearchBarProps",{enumerable:true,get:function get(){return _search_bar.StatefulSearchBarProps}});Object.defineProperty(exports,"ShardFailureOpenModalButton",{enumerable:true,get:function get(){return _shard_failure_modal.ShardFailureOpenModalButton}});Object.defineProperty(exports,"ShardFailureRequest",{enumerable:true,get:function get(){return _shard_failure_modal.ShardFailureRequest}});Object.defineProperty(exports,"ShardFailureResponse",{enumerable:true,get:function get(){return _shard_failure_modal.ShardFailureResponse}});Object.defineProperty(exports,"SavedQueryManagementComponent",{enumerable:true,get:function get(){return _saved_query_management.SavedQueryManagementComponent}});Object.defineProperty(exports,"SaveQueryForm",{enumerable:true,get:function get(){return _saved_query_form.SaveQueryForm}});Object.defineProperty(exports,"SavedQueryMeta",{enumerable:true,get:function get(){return _saved_query_form.SavedQueryMeta}});var _typeahead=__webpack_require__(742);var _index_pattern_select=__webpack_require__(352);var _filter_bar=__webpack_require__(218);var _query_string_input=__webpack_require__(353);var _search_bar=__webpack_require__(748);var _shard_failure_modal=__webpack_require__(756);var _saved_query_management=__webpack_require__(778);var _saved_query_form=__webpack_require__(781)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _assert_never=__webpack_require__(762);Object.keys(_assert_never).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _assert_never[key]}})}));var _context=__webpack_require__(763);Object.keys(_context).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _context[key]}})}));var _deep_freeze=__webpack_require__(764);Object.keys(_deep_freeze).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _deep_freeze[key]}})}));var _get=__webpack_require__(356);Object.keys(_get).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get[key]}})}));var _map_to_object=__webpack_require__(765);Object.keys(_map_to_object).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _map_to_object[key]}})}));var _merge=__webpack_require__(766);Object.keys(_merge).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _merge[key]}})}));var _pick=__webpack_require__(767);Object.keys(_pick).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _pick[key]}})}));var _promise=__webpack_require__(768);Object.keys(_promise).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _promise[key]}})}));var _url=__webpack_require__(769);Object.keys(_url).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _url[key]}})}));var _unset=__webpack_require__(775);Object.keys(_unset).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _unset[key]}})}));var _get_flattened_object=__webpack_require__(776);Object.keys(_get_flattened_object).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_flattened_object[key]}})}));var _default_app_categories=__webpack_require__(777);Object.keys(_default_app_categories).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _default_app_categories[key]}})}))},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.syncSearchStrategyProvider=exports.SYNC_SEARCH_STRATEGY=void 0;var _rxjs=__webpack_require__(33);var _operators=__webpack_require__(6);var SYNC_SEARCH_STRATEGY="SYNC_SEARCH_STRATEGY";exports.SYNC_SEARCH_STRATEGY=SYNC_SEARCH_STRATEGY;var syncSearchStrategyProvider=function syncSearchStrategyProvider(context){var loadingCount$=new _rxjs.BehaviorSubject(0);context.core.http.addLoadingCountSource(loadingCount$);var search=function search(request){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};loadingCount$.next(loadingCount$.getValue()+1);return(0,_rxjs.from)(context.core.http.fetch({path:"/internal/search/".concat(request.serverStrategy),method:"POST",body:JSON.stringify(request),signal:options.signal})).pipe((0,_operators.finalize)((function(){return loadingCount$.next(loadingCount$.getValue()-1)})))};return{search:search}};exports.syncSearchStrategyProvider=syncSearchStrategyProvider},,function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.maxLengthValidator=maxLengthValidator;exports.patternValidator=patternValidator;exports.composeValidators=composeValidators;exports.requiredValidator=requiredValidator;exports.memoryInputValidator=memoryInputValidator;var _validation=__webpack_require__(107);function maxLengthValidator(maxLength){return function(value){return value&&value.length>maxLength?{maxLength:{requiredLength:maxLength,actualLength:value.length}}:null}}function patternValidator(pattern){return function(value){return pattern.test(value)?null:{pattern:{matchPattern:pattern.toString()}}}}function composeValidators(){for(var _len=arguments.length,validators=new Array(_len),_key=0;_key<_len;_key++){validators[_key]=arguments[_key]}return function(value){var validationResult=validators.reduce((function(acc,validator){return _objectSpread({},acc,{},validator(value)||{})}),{});return Object.keys(validationResult).length>0?validationResult:null}}function requiredValidator(){return function(value){return value===""||value===undefined||value===null?{required:true}:null}}function memoryInputValidator(){var allowedUnits=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_validation.ALLOWED_DATA_UNITS;return function(value){if(typeof value!=="string"||value===""){return null}var regexp=new RegExp("\\d+(".concat(allowedUnits.join("|"),")$"),"i");return regexp.test(value.trim())?null:{invalidUnits:{allowedUnits:allowedUnits.join(", ")}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"StatsBar",{enumerable:true,get:function get(){return _stats_bar.StatsBar}});Object.defineProperty(exports,"AnalyticStatsBarStats",{enumerable:true,get:function get(){return _stats_bar.AnalyticStatsBarStats}});Object.defineProperty(exports,"JobStatsBarStats",{enumerable:true,get:function get(){return _stats_bar.JobStatsBarStats}});var _stats_bar=__webpack_require__(909)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MULTI_BUCKET_IMPACT=void 0;var MULTI_BUCKET_IMPACT={HIGH:3,MEDIUM:2,LOW:1,NONE:-5};exports.MULTI_BUCKET_IMPACT=MULTI_BUCKET_IMPACT},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getInitialAnalyticsStats=getInitialAnalyticsStats;exports.getAnalyticsJobsStats=getAnalyticsJobsStats;exports.getAnalyticsFactory=exports.isGetDataFrameAnalyticsStatsResponseOk=void 0;var _i18n=__webpack_require__(1);var _ml_api_service=__webpack_require__(51);var _common=__webpack_require__(65);var _common2=__webpack_require__(101);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var isGetDataFrameAnalyticsStatsResponseOk=function isGetDataFrameAnalyticsStatsResponseOk(arg){return{}.hasOwnProperty.call(arg,"count")&&{}.hasOwnProperty.call(arg,"data_frame_analytics")&&Array.isArray(arg.data_frame_analytics)};exports.isGetDataFrameAnalyticsStatsResponseOk=isGetDataFrameAnalyticsStatsResponseOk;function getInitialAnalyticsStats(){return{total:{label:_i18n.i18n.translate("xpack.ml.overview.statsBar.totalAnalyticsLabel",{defaultMessage:"Total analytics jobs"}),value:0,show:true},started:{label:_i18n.i18n.translate("xpack.ml.overview.statsBar.runningAnalyticsLabel",{defaultMessage:"Running"}),value:0,show:true},stopped:{label:_i18n.i18n.translate("xpack.ml.overview.statsBar.stoppedAnalyticsLabel",{defaultMessage:"Stopped"}),value:0,show:true},failed:{label:_i18n.i18n.translate("xpack.ml.overview.statsBar.failedAnalyticsLabel",{defaultMessage:"Failed"}),value:0,show:false}}}function getAnalyticsJobsStats(analyticsStats){var resultStats=analyticsStats.data_frame_analytics.reduce((function(acc,_ref){var state=_ref.state;if((0,_common2.isDataFrameAnalyticsFailed)(state)){acc.failed.value=++acc.failed.value}else if((0,_common2.isDataFrameAnalyticsRunning)(state)){acc.started.value=++acc.started.value}else if((0,_common2.isDataFrameAnalyticsStopped)(state)){acc.stopped.value=++acc.stopped.value}return acc}),getInitialAnalyticsStats());resultStats.failed.show=resultStats.failed.value>0;resultStats.total.value=analyticsStats.count;return resultStats}var getAnalyticsFactory=function getAnalyticsFactory(setAnalytics,setAnalyticsStats,setErrorMessage,setIsInitialized,blockRefresh){var concurrentLoads=0;var getAnalytics=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var forceRefresh,analyticsConfigs,analyticsStats,analyticsStatsResult,tableRows,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:forceRefresh=_args.length>0&&_args[0]!==undefined?_args[0]:false;if(!(forceRefresh===true||blockRefresh===false)){_context.next=35;break}_common.refreshAnalyticsList$.next(_common.REFRESH_ANALYTICS_LIST_STATE.LOADING);concurrentLoads++;if(!(concurrentLoads>1)){_context.next=6;break}return _context.abrupt("return");case 6:_context.prev=6;_context.next=9;return _ml_api_service.ml.dataFrameAnalytics.getDataFrameAnalytics();case 9:analyticsConfigs=_context.sent;_context.next=12;return _ml_api_service.ml.dataFrameAnalytics.getDataFrameAnalyticsStats();case 12:analyticsStats=_context.sent;analyticsStatsResult=isGetDataFrameAnalyticsStatsResponseOk(analyticsStats)?getAnalyticsJobsStats(analyticsStats):undefined;tableRows=analyticsConfigs.data_frame_analytics.reduce((function(reducedtableRows,config){var stats=isGetDataFrameAnalyticsStatsResponseOk(analyticsStats)?analyticsStats.data_frame_analytics.find((function(d){return config.id===d.id})):undefined;if(!(0,_common2.isDataFrameAnalyticsStats)(stats)){return reducedtableRows}reducedtableRows.push({config:config,id:config.id,checkpointing:{},mode:_common2.DATA_FRAME_MODE.BATCH,stats:stats});return reducedtableRows}),[]);setAnalytics(tableRows);setAnalyticsStats(analyticsStatsResult);setErrorMessage(undefined);setIsInitialized(true);_common.refreshAnalyticsList$.next(_common.REFRESH_ANALYTICS_LIST_STATE.IDLE);_context.next=30;break;case 22:_context.prev=22;_context.t0=_context["catch"](6);_common.refreshAnalyticsList$.next(_common.REFRESH_ANALYTICS_LIST_STATE.ERROR);_common.refreshAnalyticsList$.next(_common.REFRESH_ANALYTICS_LIST_STATE.IDLE);setAnalytics([]);setAnalyticsStats(undefined);setErrorMessage(_context.t0);setIsInitialized(true);case 30:concurrentLoads--;if(!(concurrentLoads>0)){_context.next=35;break}concurrentLoads=0;getAnalytics(true);return _context.abrupt("return");case 35:case"end":return _context.stop()}}}),_callee,null,[[6,22]])})));return function getAnalytics(){return _ref2.apply(this,arguments)}}();return getAnalytics};exports.getAnalyticsFactory=getAnalyticsFactory},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PROGRESS_JOBS_REFRESH_INTERVAL_MS=exports.DELETING_JOBS_REFRESH_INTERVAL_MS=exports.MINIMUM_REFRESH_INTERVAL_MS=exports.DEFAULT_REFRESH_INTERVAL_MS=void 0;var DEFAULT_REFRESH_INTERVAL_MS=3e4;exports.DEFAULT_REFRESH_INTERVAL_MS=DEFAULT_REFRESH_INTERVAL_MS;var MINIMUM_REFRESH_INTERVAL_MS=1e3;exports.MINIMUM_REFRESH_INTERVAL_MS=MINIMUM_REFRESH_INTERVAL_MS;var DELETING_JOBS_REFRESH_INTERVAL_MS=2e3;exports.DELETING_JOBS_REFRESH_INTERVAL_MS=DELETING_JOBS_REFRESH_INTERVAL_MS;var PROGRESS_JOBS_REFRESH_INTERVAL_MS=2e3;exports.PROGRESS_JOBS_REFRESH_INTERVAL_MS=PROGRESS_JOBS_REFRESH_INTERVAL_MS},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"XJsonMode",{enumerable:true,get:function get(){return _x_json.XJsonMode}});Object.defineProperty(exports,"collapseLiteralStrings",{enumerable:true,get:function get(){return _lib.collapseLiteralStrings}});Object.defineProperty(exports,"expandLiteralStrings",{enumerable:true,get:function get(){return _lib.expandLiteralStrings}});var _x_json=__webpack_require__(410);var _lib=__webpack_require__(1046)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"usePartialState",{enumerable:true,get:function get(){return _use_partial_state.usePartialState}});Object.defineProperty(exports,"useXJsonMode",{enumerable:true,get:function get(){return _use_x_json_mode.useXJsonMode}});Object.defineProperty(exports,"xJsonMode",{enumerable:true,get:function get(){return _use_x_json_mode.xJsonMode}});var _use_partial_state=__webpack_require__(1047);var _use_x_json_mode=__webpack_require__(1048)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.EmbeddableFactoryNotFoundError=exports.PanelNotFoundError=void 0;var _i18n=__webpack_require__(1);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PanelNotFoundError=function(_Error){_inherits(PanelNotFoundError,_Error);function PanelNotFoundError(){var _this;_classCallCheck(this,PanelNotFoundError);_this=_possibleConstructorReturn(this,_getPrototypeOf(PanelNotFoundError).call(this,_i18n.i18n.translate("embeddableApi.errors.paneldoesNotExist",{defaultMessage:"Panel not found"})));_defineProperty(_assertThisInitialized(_this),"code","PANEL_NOT_FOUND");return _this}return PanelNotFoundError}(_wrapNativeSuper(Error));exports.PanelNotFoundError=PanelNotFoundError;var EmbeddableFactoryNotFoundError=function(_Error2){_inherits(EmbeddableFactoryNotFoundError,_Error2);function EmbeddableFactoryNotFoundError(type){var _this2;_classCallCheck(this,EmbeddableFactoryNotFoundError);_this2=_possibleConstructorReturn(this,_getPrototypeOf(EmbeddableFactoryNotFoundError).call(this,_i18n.i18n.translate("embeddableApi.errors.embeddableFactoryNotFound",{defaultMessage:"{type} can't be loaded. Please upgrade to the default distribution of Elasticsearch and Kibana with the appropriate license.",values:{type:type}})));_defineProperty(_assertThisInitialized(_this2),"code","EMBEDDABLE_FACTORY_NOT_FOUND");return _this2}return EmbeddableFactoryNotFoundError}(_wrapNativeSuper(Error));exports.EmbeddableFactoryNotFoundError=EmbeddableFactoryNotFoundError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _public=__webpack_require__(417);Object.keys(_public).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _public[key]}})}))},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"OnSaveProps",{enumerable:true,get:function get(){return _save_modal.OnSaveProps}});Object.defineProperty(exports,"SavedObjectSaveModal",{enumerable:true,get:function get(){return _save_modal.SavedObjectSaveModal}});Object.defineProperty(exports,"SaveResult",{enumerable:true,get:function get(){return _save_modal.SaveResult}});Object.defineProperty(exports,"showSaveModal",{enumerable:true,get:function get(){return _save_modal.showSaveModal}});Object.defineProperty(exports,"getSavedObjectFinder",{enumerable:true,get:function get(){return _finder.getSavedObjectFinder}});Object.defineProperty(exports,"SavedObjectFinderUi",{enumerable:true,get:function get(){return _finder.SavedObjectFinderUi}});Object.defineProperty(exports,"SavedObjectMetaData",{enumerable:true,get:function get(){return _finder.SavedObjectMetaData}});Object.defineProperty(exports,"SavedObjectLoader",{enumerable:true,get:function get(){return _saved_object.SavedObjectLoader}});Object.defineProperty(exports,"createSavedObjectClass",{enumerable:true,get:function get(){return _saved_object.createSavedObjectClass}});Object.defineProperty(exports,"checkForDuplicateTitle",{enumerable:true,get:function get(){return _saved_object.checkForDuplicateTitle}});Object.defineProperty(exports,"saveWithConfirmation",{enumerable:true,get:function get(){return _saved_object.saveWithConfirmation}});Object.defineProperty(exports,"isErrorNonFatal",{enumerable:true,get:function get(){return _saved_object.isErrorNonFatal}});Object.defineProperty(exports,"SavedObjectSaveOpts",{enumerable:true,get:function get(){return _types.SavedObjectSaveOpts}});Object.defineProperty(exports,"SavedObjectKibanaServices",{enumerable:true,get:function get(){return _types.SavedObjectKibanaServices}});Object.defineProperty(exports,"SavedObject",{enumerable:true,get:function get(){return _types.SavedObject}});exports.plugin=void 0;var _plugin=__webpack_require__(1154);var _save_modal=__webpack_require__(1160);var _finder=__webpack_require__(1163);var _saved_object=__webpack_require__(1165);var _types=__webpack_require__(1212);var plugin=function plugin(){return new _plugin.SavedObjectsPublicPlugin};exports.plugin=plugin},,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.buildInlineScriptForPhraseFilter=exports.getConvertedValueForField=exports.getPhraseScript=exports.buildPhraseFilter=exports.getPhraseFilterValue=exports.getPhraseFilterField=exports.isScriptedPhraseFilter=exports.isPhraseFilter=void 0;var _lodash=__webpack_require__(49);var isPhraseFilter=function isPhraseFilter(filter){var isMatchPhraseQuery=filter&&filter.query&&filter.query.match_phrase;var isDeprecatedMatchPhraseQuery=filter&&filter.query&&filter.query.match&&Object.values(filter.query.match).find((function(params){return params.type==="phrase"}));return Boolean(isMatchPhraseQuery||isDeprecatedMatchPhraseQuery)};exports.isPhraseFilter=isPhraseFilter;var isScriptedPhraseFilter=function isScriptedPhraseFilter(filter){return Boolean((0,_lodash.get)(filter,"script.script.params.value"))};exports.isScriptedPhraseFilter=isScriptedPhraseFilter;var getPhraseFilterField=function getPhraseFilterField(filter){var queryConfig=filter.query.match_phrase||filter.query.match;return Object.keys(queryConfig)[0]};exports.getPhraseFilterField=getPhraseFilterField;var getPhraseFilterValue=function getPhraseFilterValue(filter){var queryConfig=filter.query.match_phrase||filter.query.match;var queryValue=Object.values(queryConfig)[0];return(0,_lodash.isPlainObject)(queryValue)?queryValue.query:queryValue};exports.getPhraseFilterValue=getPhraseFilterValue;var buildPhraseFilter=function buildPhraseFilter(field,value,indexPattern){var convertedValue=getConvertedValueForField(field,value);if(field.scripted){return{meta:{index:indexPattern.id,field:field.name},script:getPhraseScript(field,value)}}else{return{meta:{index:indexPattern.id},query:{match_phrase:_defineProperty({},field.name,convertedValue)}}}};exports.buildPhraseFilter=buildPhraseFilter;var getPhraseScript=function getPhraseScript(field,value){var convertedValue=getConvertedValueForField(field,value);var script=buildInlineScriptForPhraseFilter(field);return{script:{source:script,lang:field.lang,params:{value:convertedValue}}}};exports.getPhraseScript=getPhraseScript;var getConvertedValueForField=function getConvertedValueForField(field,value){if(typeof value!=="boolean"&&field.type==="boolean"){if([1,"true"].includes(value)){return true}else if([0,"false"].includes(value)){return false}else{throw new Error("".concat(value," is not a valid boolean value for boolean field ").concat(field.name))}}return value};exports.getConvertedValueForField=getConvertedValueForField;var buildInlineScriptForPhraseFilter=function buildInlineScriptForPhraseFilter(scriptedField){if(scriptedField.lang==="painless"){return"boolean compare(Supplier s, def v) {return s.get() == v;}"+"compare(() -> { ".concat(scriptedField.script," }, params.value);")}else{return"(".concat(scriptedField.script,") == value")}};exports.buildInlineScriptForPhraseFilter=buildInlineScriptForPhraseFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFields=getFields;var literal=_interopRequireWildcard(__webpack_require__(145));var wildcard=_interopRequireWildcard(__webpack_require__(213));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function getFields(node,indexPattern){if(!indexPattern)return[];if(node.type==="literal"){var fieldName=literal.toElasticsearchQuery(node);var field=indexPattern.fields.find((function(fld){return fld.name===fieldName}));if(!field){return[]}return[field]}else if(node.type==="wildcard"){var fields=indexPattern.fields.filter((function(fld){return wildcard.test(node,fld.name)}));return fields}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNode=buildNode;exports.test=test;exports.toElasticsearchQuery=toElasticsearchQuery;exports.toQueryStringQuery=toQueryStringQuery;exports.hasLeadingWildcard=hasLeadingWildcard;exports.wildcardSymbol=void 0;var _ast=__webpack_require__(290);var wildcardSymbol="@kuery-wildcard@";exports.wildcardSymbol=wildcardSymbol;function escapeRegExp(str){return str.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function escapeQueryString(str){return str.replace(/[+-=&|><!(){}[\]^"~*?:\\/]/g,"\\$&")}function buildNode(value){if(!value.includes(wildcardSymbol)){return(0,_ast.fromLiteralExpression)(value)}return{type:"wildcard",value:value}}function test(node,str){var value=node.value;var regex=value.split(wildcardSymbol).map(escapeRegExp).join("[\\s\\S]*");var regexp=new RegExp("^".concat(regex,"$"));return regexp.test(str)}function toElasticsearchQuery(node){var value=node.value;return value.split(wildcardSymbol).join("*")}function toQueryStringQuery(node){var value=node.value;return value.split(wildcardSymbol).map(escapeQueryString).join("*")}function hasLeadingWildcard(node){var value=node.value;return value.startsWith(wildcardSymbol)&&value.replace(wildcardSymbol,"").length>0}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTimeZoneFromSettings=getTimeZoneFromSettings;var _momentTimezone=_interopRequireDefault(__webpack_require__(36));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getTimeZoneFromSettings(dateFormatTZ){var detectedTimezone=_momentTimezone.default.tz.guess();return dateFormatTZ==="Browser"?detectedTimezone:dateFormatTZ}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FieldFormatsRegistry",{enumerable:true,get:function get(){return _field_formats_registry.FieldFormatsRegistry}});Object.defineProperty(exports,"FieldFormat",{enumerable:true,get:function get(){return _field_format.FieldFormat}});Object.defineProperty(exports,"baseFormatters",{enumerable:true,get:function get(){return _base_formatters.baseFormatters}});Object.defineProperty(exports,"BoolFormat",{enumerable:true,get:function get(){return _converters.BoolFormat}});Object.defineProperty(exports,"BytesFormat",{enumerable:true,get:function get(){return _converters.BytesFormat}});Object.defineProperty(exports,"ColorFormat",{enumerable:true,get:function get(){return _converters.ColorFormat}});Object.defineProperty(exports,"DateNanosFormat",{enumerable:true,get:function get(){return _converters.DateNanosFormat}});Object.defineProperty(exports,"DurationFormat",{enumerable:true,get:function get(){return _converters.DurationFormat}});Object.defineProperty(exports,"IpFormat",{enumerable:true,get:function get(){return _converters.IpFormat}});Object.defineProperty(exports,"NumberFormat",{enumerable:true,get:function get(){return _converters.NumberFormat}});Object.defineProperty(exports,"PercentFormat",{enumerable:true,get:function get(){return _converters.PercentFormat}});Object.defineProperty(exports,"RelativeDateFormat",{enumerable:true,get:function get(){return _converters.RelativeDateFormat}});Object.defineProperty(exports,"SourceFormat",{enumerable:true,get:function get(){return _converters.SourceFormat}});Object.defineProperty(exports,"StaticLookupFormat",{enumerable:true,get:function get(){return _converters.StaticLookupFormat}});Object.defineProperty(exports,"UrlFormat",{enumerable:true,get:function get(){return _converters.UrlFormat}});Object.defineProperty(exports,"StringFormat",{enumerable:true,get:function get(){return _converters.StringFormat}});Object.defineProperty(exports,"TruncateFormat",{enumerable:true,get:function get(){return _converters.TruncateFormat}});Object.defineProperty(exports,"getHighlightRequest",{enumerable:true,get:function get(){return _utils.getHighlightRequest}});Object.defineProperty(exports,"serializeFieldFormat",{enumerable:true,get:function get(){return _utils.serializeFieldFormat}});Object.defineProperty(exports,"DEFAULT_CONVERTER_COLOR",{enumerable:true,get:function get(){return _color_default.DEFAULT_CONVERTER_COLOR}});Object.defineProperty(exports,"FIELD_FORMAT_IDS",{enumerable:true,get:function get(){return _types.FIELD_FORMAT_IDS}});Object.defineProperty(exports,"FieldFormatsGetConfigFn",{enumerable:true,get:function get(){return _types.FieldFormatsGetConfigFn}});Object.defineProperty(exports,"FieldFormatsContentType",{enumerable:true,get:function get(){return _types.FieldFormatsContentType}});Object.defineProperty(exports,"FieldFormatConfig",{enumerable:true,get:function get(){return _types.FieldFormatConfig}});Object.defineProperty(exports,"FieldFormatId",{enumerable:true,get:function get(){return _types.FieldFormatId}});Object.defineProperty(exports,"IFieldFormatType",{enumerable:true,get:function get(){return _types.IFieldFormatType}});Object.defineProperty(exports,"IFieldFormat",{enumerable:true,get:function get(){return _types.IFieldFormat}});Object.defineProperty(exports,"HTML_CONTEXT_TYPE",{enumerable:true,get:function get(){return _content_types.HTML_CONTEXT_TYPE}});Object.defineProperty(exports,"TEXT_CONTEXT_TYPE",{enumerable:true,get:function get(){return _content_types.TEXT_CONTEXT_TYPE}});var _field_formats_registry=__webpack_require__(584);var _field_format=__webpack_require__(78);var _base_formatters=__webpack_require__(297);var _converters=__webpack_require__(298);var _utils=__webpack_require__(123);var _color_default=__webpack_require__(299);var _types=__webpack_require__(71);var _content_types=__webpack_require__(295)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.NumeralFormat=void 0;var _numeral=_interopRequireDefault(__webpack_require__(124));var _languages=_interopRequireDefault(__webpack_require__(596));var _types=__webpack_require__(79);var _field_format=__webpack_require__(78);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var numeralInst=(0,_numeral.default)();_languages.default.forEach((function(numeralLanguage){_numeral.default.language(numeralLanguage.id,numeralLanguage.lang)}));var NumeralFormat=function(_field_format$FieldFo){_inherits(NumeralFormat,_field_format$FieldFo);function NumeralFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,NumeralFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(NumeralFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"id",void 0);_defineProperty(_assertThisInitialized(_this),"title",void 0);_defineProperty(_assertThisInitialized(_this),"getParamDefaults",(function(){return{pattern:_this.getConfig("format:".concat(_this.id,":defaultPattern"))}}));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){return _this.getConvertedValue(val)}));return _this}_createClass(NumeralFormat,[{key:"getConvertedValue",value:function getConvertedValue(val){if(val===-Infinity)return"-";if(val===+Infinity)return"+";if(typeof val!=="number"){val=parseFloat(val)}if(isNaN(val))return"";var previousLocale=_numeral.default.language();var defaultLocale=this.getConfig&&this.getConfig("format:number:defaultLocale")||"en";_numeral.default.language(defaultLocale);var formatted=numeralInst.set(val).format(this.param("pattern"));_numeral.default.language(previousLocale);return formatted}}]);return NumeralFormat}(_field_format.FieldFormat);exports.NumeralFormat=NumeralFormat;_defineProperty(NumeralFormat,"fieldType",_types.KBN_FIELD_TYPES.NUMBER)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FilterBar",{enumerable:true,get:function get(){return _filter_bar.FilterBar}});Object.defineProperty(exports,"FilterLabel",{enumerable:true,get:function get(){return _filter_label.FilterLabel}});var _filter_bar=__webpack_require__(635);var _filter_label=__webpack_require__(315)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GenericComboBox=GenericComboBox;var _eui=__webpack_require__(29);var _react=_interopRequireDefault(__webpack_require__(28));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function GenericComboBox(props){var options=props.options,selectedOptions=props.selectedOptions,getLabel=props.getLabel,onChange=props.onChange,otherProps=_objectWithoutProperties(props,["options","selectedOptions","getLabel","onChange"]);var labels=options.map(getLabel);var euiOptions=labels.map((function(label){return{label:label}}));var selectedEuiOptions=selectedOptions.filter((function(option){return options.indexOf(option)!==-1})).map((function(option){return euiOptions[options.indexOf(option)]}));var onComboBoxChange=function onComboBoxChange(newOptions){var newValues=newOptions.map((function(_ref){var label=_ref.label;return options[labels.indexOf(label)]}));onChange(newValues)};return _react.default.createElement(_eui.EuiComboBox,_extends({options:euiOptions,selectedOptions:selectedEuiOptions,onChange:onComboBoxChange},otherProps))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _persisted_log=__webpack_require__(647);Object.keys(_persisted_log).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _persisted_log[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={TimefilterService:true,TimefilterSetup:true,Timefilter:true,TimefilterContract:true,TimeHistory:true,TimeHistoryContract:true,getTime:true,changeTimeFilter:true,extractTimeFilter:true};Object.defineProperty(exports,"TimefilterService",{enumerable:true,get:function get(){return _timefilter_service.TimefilterService}});Object.defineProperty(exports,"TimefilterSetup",{enumerable:true,get:function get(){return _timefilter_service.TimefilterSetup}});Object.defineProperty(exports,"Timefilter",{enumerable:true,get:function get(){return _timefilter.Timefilter}});Object.defineProperty(exports,"TimefilterContract",{enumerable:true,get:function get(){return _timefilter.TimefilterContract}});Object.defineProperty(exports,"TimeHistory",{enumerable:true,get:function get(){return _time_history.TimeHistory}});Object.defineProperty(exports,"TimeHistoryContract",{enumerable:true,get:function get(){return _time_history.TimeHistoryContract}});Object.defineProperty(exports,"getTime",{enumerable:true,get:function get(){return _get_time.getTime}});Object.defineProperty(exports,"changeTimeFilter",{enumerable:true,get:function get(){return _change_time_filter.changeTimeFilter}});Object.defineProperty(exports,"extractTimeFilter",{enumerable:true,get:function get(){return _extract_time_filter.extractTimeFilter}});var _timefilter_service=__webpack_require__(666);var _types=__webpack_require__(667);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _timefilter=__webpack_require__(668);var _time_history=__webpack_require__(674);var _get_time=__webpack_require__(319);var _change_time_filter=__webpack_require__(675);var _extract_time_filter=__webpack_require__(676)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ILLEGAL_CHARACTERS_KEY",{enumerable:true,get:function get(){return _lib.ILLEGAL_CHARACTERS_KEY}});Object.defineProperty(exports,"CONTAINS_SPACES_KEY",{enumerable:true,get:function get(){return _lib.CONTAINS_SPACES_KEY}});Object.defineProperty(exports,"ILLEGAL_CHARACTERS_VISIBLE",{enumerable:true,get:function get(){return _lib.ILLEGAL_CHARACTERS_VISIBLE}});Object.defineProperty(exports,"ILLEGAL_CHARACTERS",{enumerable:true,get:function get(){return _lib.ILLEGAL_CHARACTERS}});Object.defineProperty(exports,"validateIndexPattern",{enumerable:true,get:function get(){return _lib.validateIndexPattern}});Object.defineProperty(exports,"getFromSavedObject",{enumerable:true,get:function get(){return _lib.getFromSavedObject}});Object.defineProperty(exports,"isDefault",{enumerable:true,get:function get(){return _lib.isDefault}});Object.defineProperty(exports,"getRoutes",{enumerable:true,get:function get(){return _utils.getRoutes}});Object.defineProperty(exports,"flattenHitWrapper",{enumerable:true,get:function get(){return _index_patterns.flattenHitWrapper}});Object.defineProperty(exports,"formatHitProvider",{enumerable:true,get:function get(){return _index_patterns.formatHitProvider}});Object.defineProperty(exports,"IndexPatternsService",{enumerable:true,get:function get(){return _index_patterns.IndexPatternsService}});Object.defineProperty(exports,"IndexPatternsContract",{enumerable:true,get:function get(){return _index_patterns.IndexPatternsContract}});Object.defineProperty(exports,"IndexPattern",{enumerable:true,get:function get(){return _index_patterns.IndexPattern}});Object.defineProperty(exports,"TypeMeta",{enumerable:true,get:function get(){return _index_patterns.TypeMeta}});Object.defineProperty(exports,"AggregationRestrictions",{enumerable:true,get:function get(){return _index_patterns.AggregationRestrictions}});Object.defineProperty(exports,"Field",{enumerable:true,get:function get(){return _fields.Field}});Object.defineProperty(exports,"FieldList",{enumerable:true,get:function get(){return _fields.FieldList}});var _lib=__webpack_require__(173);var _utils=__webpack_require__(326);var _index_patterns=__webpack_require__(691);var _fields=__webpack_require__(330)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"QuerySuggestion",{enumerable:true,get:function get(){return _query_suggestion_provider.QuerySuggestion}});Object.defineProperty(exports,"QuerySuggestionTypes",{enumerable:true,get:function get(){return _query_suggestion_provider.QuerySuggestionTypes}});Object.defineProperty(exports,"QuerySuggestionGetFn",{enumerable:true,get:function get(){return _query_suggestion_provider.QuerySuggestionGetFn}});Object.defineProperty(exports,"QuerySuggestionGetFnArgs",{enumerable:true,get:function get(){return _query_suggestion_provider.QuerySuggestionGetFnArgs}});Object.defineProperty(exports,"QuerySuggestionBasic",{enumerable:true,get:function get(){return _query_suggestion_provider.QuerySuggestionBasic}});Object.defineProperty(exports,"QuerySuggestionField",{enumerable:true,get:function get(){return _query_suggestion_provider.QuerySuggestionField}});Object.defineProperty(exports,"AutocompleteService",{enumerable:true,get:function get(){return _autocomplete_service.AutocompleteService}});Object.defineProperty(exports,"AutocompleteSetup",{enumerable:true,get:function get(){return _autocomplete_service.AutocompleteSetup}});Object.defineProperty(exports,"AutocompleteStart",{enumerable:true,get:function get(){return _autocomplete_service.AutocompleteStart}});var _query_suggestion_provider=__webpack_require__(698);var _autocomplete_service=__webpack_require__(699)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.OptionedParamType=void 0;var _base=__webpack_require__(114);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var OptionedParamType=function(_BaseParamType){_inherits(OptionedParamType,_BaseParamType);function OptionedParamType(config){var _this;_classCallCheck(this,OptionedParamType);_this=_possibleConstructorReturn(this,_getPrototypeOf(OptionedParamType).call(this,config));_defineProperty(_assertThisInitialized(_this),"options",void 0);if(!config.write){_this.write=function(aggConfig,output){output.params[_this.name]=aggConfig.params[_this.name].value}}if(!config.serialize){_this.serialize=function(selected){return selected.value}}if(!config.deserialize){_this.deserialize=function(value){return _this.options.find((function(option){return option.value===value}))}}_this.options=config.options||[];return _this}return OptionedParamType}(_base.BaseParamType);exports.OptionedParamType=OptionedParamType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.aggGroupNamesMap=exports.AggGroupNames=void 0;var _i18n=__webpack_require__(1);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggGroupNames=Object.freeze({Buckets:"buckets",Metrics:"metrics",None:"none"});exports.AggGroupNames=AggGroupNames;var aggGroupNamesMap=function aggGroupNamesMap(){var _ref;return _ref={},_defineProperty(_ref,AggGroupNames.Metrics,_i18n.i18n.translate("data.search.aggs.aggGroups.metricsText",{defaultMessage:"Metrics"})),_defineProperty(_ref,AggGroupNames.Buckets,_i18n.i18n.translate("data.search.aggs.aggGroups.bucketsText",{defaultMessage:"Buckets"})),_ref};exports.aggGroupNamesMap=aggGroupNamesMap},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.create=exports.getResponseAggConfigClass=void 0;var _lodash=__webpack_require__(49);var getResponseAggConfigClass=function getResponseAggConfigClass(agg,props){if(agg.$$_ResponseAggConfigClass){return agg.$$_ResponseAggConfigClass}else{return agg.$$_ResponseAggConfigClass=create(agg,props)}};exports.getResponseAggConfigClass=getResponseAggConfigClass;var create=function create(parentAgg,props){function ResponseAggConfig(key){var parentId=parentAgg.id;var id;var subId=String(key);if(subId.indexOf(".")>-1){id=parentId+"['"+subId.replace(/'/g,"\\'")+"']"}else{id=parentId+"."+subId}this.id=id;this.key=key;this.parentId=parentId}ResponseAggConfig.prototype=Object.create(parentAgg);ResponseAggConfig.prototype.constructor=ResponseAggConfig;(0,_lodash.assign)(ResponseAggConfig.prototype,props);return ResponseAggConfig};exports.create=create},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.migrateIncludeExcludeFormat=exports.isStringType=exports.isType=void 0;var _lodash=__webpack_require__(49);var isType=function isType(type){return function(agg){var field=agg.params.field;return field&&field.type===type}};exports.isType=isType;var isStringType=isType("string");exports.isStringType=isStringType;var migrateIncludeExcludeFormat={serialize:function serialize(value,agg){if(this.shouldShow&&!this.shouldShow(agg))return;if(!value||(0,_lodash.isString)(value))return value;else return value.pattern},write:function write(aggConfig,output){var value=aggConfig.getParam(this.name);if((0,_lodash.isObject)(value)){output.params[this.name]=value.pattern}else if(value&&isStringType(aggConfig)){output.params[this.name]=value}}};exports.migrateIncludeExcludeFormat=migrateIncludeExcludeFormat},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DataAdapter",{enumerable:true,get:function get(){return _data.DataAdapter}});Object.defineProperty(exports,"FormattedData",{enumerable:true,get:function get(){return _data.FormattedData}});Object.defineProperty(exports,"RequestAdapter",{enumerable:true,get:function get(){return _request.RequestAdapter}});Object.defineProperty(exports,"RequestStatus",{enumerable:true,get:function get(){return _request.RequestStatus}});var _data=__webpack_require__(817);var _request=__webpack_require__(820)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestStatus=void 0;var RequestStatus;exports.RequestStatus=RequestStatus;(function(RequestStatus){RequestStatus[RequestStatus["PENDING"]=0]="PENDING";RequestStatus[RequestStatus["OK"]=1]="OK";RequestStatus[RequestStatus["ERROR"]=2]="ERROR"})(RequestStatus||(exports.RequestStatus=RequestStatus={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _courier_inspector_stats=__webpack_require__(831);Object.keys(_courier_inspector_stats).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _courier_inspector_stats[key]}})}));var _serialize_agg_config=__webpack_require__(832);Object.keys(_serialize_agg_config).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _serialize_agg_config[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _trigger=__webpack_require__(865);Object.keys(_trigger).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _trigger[key]}})}));var _trigger_contract=__webpack_require__(375);Object.keys(_trigger_contract).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _trigger_contract[key]}})}));var _trigger_internal=__webpack_require__(374);Object.keys(_trigger_internal).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _trigger_internal[key]}})}));var _select_range_trigger=__webpack_require__(866);Object.keys(_select_range_trigger).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _select_range_trigger[key]}})}));var _value_click_trigger=__webpack_require__(867);Object.keys(_value_click_trigger).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _value_click_trigger[key]}})}));var _apply_filter_trigger=__webpack_require__(868);Object.keys(_apply_filter_trigger).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _apply_filter_trigger[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useMlKibana=void 0;var _public=__webpack_require__(31);var useMlKibana=function useMlKibana(){return(0,_public.useKibana)()};exports.useMlKibana=useMlKibana},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"NodeAvailableWarning",{enumerable:true,get:function get(){return _node_available_warning.NodeAvailableWarning}});var _node_available_warning=__webpack_require__(922)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"UpgradeWarning",{enumerable:true,get:function get(){return _upgrade_warning.UpgradeWarning}});var _upgrade_warning=__webpack_require__(923)},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"JobGroup",{enumerable:true,get:function get(){return _job_group.JobGroup}});var _job_group=__webpack_require__(1032)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AnnotationsTable",{enumerable:true,get:function get(){return _annotations_table.AnnotationsTable}});var _annotations_table=__webpack_require__(1050)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addItemToRecentlyAccessed=addItemToRecentlyAccessed;var _i18n=__webpack_require__(1);var _dependency_cache=__webpack_require__(5);function addItemToRecentlyAccessed(page,itemId,url){var pageLabel="";var id="ml-job-".concat(itemId);switch(page){case"explorer":pageLabel=_i18n.i18n.translate("xpack.ml.anomalyExplorerPageLabel",{defaultMessage:"Anomaly Explorer"});break;case"timeseriesexplorer":pageLabel=_i18n.i18n.translate("xpack.ml.singleMetricViewerPageLabel",{defaultMessage:"Single Metric Viewer"});break;case"jobs/new_job/datavisualizer":pageLabel=_i18n.i18n.translate("xpack.ml.dataVisualizerPageLabel",{defaultMessage:"Data Visualizer"});id="ml-datavisualizer-".concat(itemId);break;default:console.error("addItemToRecentlyAccessed - No page specified");return}url="ml#/".concat(page,"/").concat(url);var recentlyAccessed=(0,_dependency_cache.getRecentlyAccessed)();recentlyAccessed.add(url,"ML - ".concat(itemId," - ").concat(pageLabel),id)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mlTableService=void 0;var _rxjs=__webpack_require__(33);var mlTableService={rowMouseenter$:new _rxjs.Subject,rowMouseleave$:new _rxjs.Subject};exports.mlTableService=mlTableService},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.AnnotationFlyout=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _useObservable=_interopRequireDefault(__webpack_require__(129));var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(30);var _annotations=__webpack_require__(414);var _annotations_service=__webpack_require__(159);var _annotation_description_list=__webpack_require__(1051);var _delete_annotation_modal=__webpack_require__(1052);var _ml_api_service=__webpack_require__(51);var _dependency_cache=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AnnotationFlyoutUI=function(_Component){_inherits(AnnotationFlyoutUI,_Component);function AnnotationFlyoutUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,AnnotationFlyoutUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(AnnotationFlyoutUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isDeleteModalVisible:false});_defineProperty(_assertThisInitialized(_this),"annotationSub",null);_defineProperty(_assertThisInitialized(_this),"annotationTextChangeHandler",(function(e){if(_this.props.annotation===null){return}_annotations_service.annotation$.next(_objectSpread({},_this.props.annotation,{annotation:e.target.value}))}));_defineProperty(_assertThisInitialized(_this),"cancelEditingHandler",(function(){_annotations_service.annotation$.next(null)}));_defineProperty(_assertThisInitialized(_this),"deleteConfirmHandler",(function(){_this.setState({isDeleteModalVisible:true})}));_defineProperty(_assertThisInitialized(_this),"deleteHandler",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var annotation,toastNotifications;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:annotation=_this.props.annotation;toastNotifications=(0,_dependency_cache.getToastNotifications)();if(!(annotation===null||annotation._id===undefined)){_context.next=4;break}return _context.abrupt("return");case 4:_context.prev=4;_context.next=7;return _ml_api_service.ml.annotations.deleteAnnotation(annotation._id);case 7:toastNotifications.addSuccess(_i18n.i18n.translate("xpack.ml.timeSeriesExplorer.timeSeriesChart.deletedAnnotationNotificationMessage",{defaultMessage:"Deleted annotation for job with ID {jobId}.",values:{jobId:annotation.job_id}}));_context.next=13;break;case 10:_context.prev=10;_context.t0=_context["catch"](4);toastNotifications.addDanger(_i18n.i18n.translate("xpack.ml.timeSeriesExplorer.timeSeriesChart.errorWithDeletingAnnotationNotificationErrorMessage",{defaultMessage:"An error occurred deleting the annotation for job with ID {jobId}: {error}",values:{jobId:annotation.job_id,error:JSON.stringify(_context.t0)}}));case 13:_this.closeDeleteModal();_annotations_service.annotation$.next(null);(0,_annotations_service.annotationsRefreshed)();case 16:case"end":return _context.stop()}}}),_callee,null,[[4,10]])}))));_defineProperty(_assertThisInitialized(_this),"closeDeleteModal",(function(){_this.setState({isDeleteModalVisible:false})}));_defineProperty(_assertThisInitialized(_this),"validateAnnotationText",(function(){var annotation=_this.props.annotation;var errors=[];if(annotation===null){return errors}if(annotation.annotation.trim().length===0){errors.push(_i18n.i18n.translate("xpack.ml.timeSeriesExplorer.annotationFlyout.noAnnotationTextError",{defaultMessage:"Enter annotation text"}))}var textLength=annotation.annotation.length;if(textLength>_annotations.ANNOTATION_MAX_LENGTH_CHARS){var charsOver=textLength-_annotations.ANNOTATION_MAX_LENGTH_CHARS;errors.push(_i18n.i18n.translate("xpack.ml.timeSeriesExplorer.annotationFlyout.maxLengthError",{defaultMessage:"{charsOver, number} {charsOver, plural, one {character} other {characters}} above maximum length of {maxChars}",values:{maxChars:_annotations.ANNOTATION_MAX_LENGTH_CHARS,charsOver:charsOver}}))}return errors}));_defineProperty(_assertThisInitialized(_this),"saveOrUpdateAnnotation",(function(){var annotation=_this.props.annotation;if(annotation===null){return}_annotations_service.annotation$.next(null);_ml_api_service.ml.annotations.indexAnnotation(annotation).then((function(){(0,_annotations_service.annotationsRefreshed)();var toastNotifications=(0,_dependency_cache.getToastNotifications)();if(typeof annotation._id==="undefined"){toastNotifications.addSuccess(_i18n.i18n.translate("xpack.ml.timeSeriesExplorer.timeSeriesChart.addedAnnotationNotificationMessage",{defaultMessage:"Added an annotation for job with ID {jobId}.",values:{jobId:annotation.job_id}}))}else{toastNotifications.addSuccess(_i18n.i18n.translate("xpack.ml.timeSeriesExplorer.timeSeriesChart.updatedAnnotationNotificationMessage",{defaultMessage:"Updated annotation for job with ID {jobId}.",values:{jobId:annotation.job_id}}))}})).catch((function(resp){var toastNotifications=(0,_dependency_cache.getToastNotifications)();if(typeof annotation._id==="undefined"){toastNotifications.addDanger(_i18n.i18n.translate("xpack.ml.timeSeriesExplorer.timeSeriesChart.errorWithCreatingAnnotationNotificationErrorMessage",{defaultMessage:"An error occurred creating the annotation for job with ID {jobId}: {error}",values:{jobId:annotation.job_id,error:JSON.stringify(resp)}}))}else{toastNotifications.addDanger(_i18n.i18n.translate("xpack.ml.timeSeriesExplorer.timeSeriesChart.errorWithUpdatingAnnotationNotificationErrorMessage",{defaultMessage:"An error occurred updating the annotation for job with ID {jobId}: {error}",values:{jobId:annotation.job_id,error:JSON.stringify(resp)}}))}}))}));return _this}_createClass(AnnotationFlyoutUI,[{key:"render",value:function render(){var annotation=this.props.annotation;var isDeleteModalVisible=this.state.isDeleteModalVisible;if(annotation===null){return null}var isExistingAnnotation=typeof annotation._id!=="undefined";var validationErrors=this.validateAnnotationText();var isInvalid=validationErrors.length>0;var lengthRatioToShowWarning=.95;var helpText=null;if(isInvalid===false&&annotation.annotation.length>_annotations.ANNOTATION_MAX_LENGTH_CHARS*lengthRatioToShowWarning){helpText=_i18n.i18n.translate("xpack.ml.timeSeriesExplorer.annotationFlyout.approachingMaxLengthWarning",{defaultMessage:"{charsRemaining, number} {charsRemaining, plural, one {character} other {characters}} remaining",values:{charsRemaining:_annotations.ANNOTATION_MAX_LENGTH_CHARS-annotation.annotation.length}})}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlyout,{onClose:this.cancelEditingHandler,size:"s","aria-labelledby":"Add annotation"},_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h2",{id:"mlAnnotationFlyoutTitle"},isExistingAnnotation?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.annotationFlyout.editAnnotationTitle",defaultMessage:"Edit annotation"}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.annotationFlyout.addAnnotationTitle",defaultMessage:"Add annotation"})))),_react.default.createElement(_eui.EuiFlyoutBody,null,_react.default.createElement(_annotation_description_list.AnnotationDescriptionList,{annotation:annotation}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.annotationFlyout.annotationTextLabel",defaultMessage:"Annotation text"}),fullWidth:true,helpText:helpText,isInvalid:isInvalid,error:validationErrors},_react.default.createElement(_eui.EuiTextArea,{fullWidth:true,isInvalid:isInvalid,onChange:this.annotationTextChangeHandler,placeholder:"...",value:annotation.annotation}))),_react.default.createElement(_eui.EuiFlyoutFooter,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"cross",onClick:this.cancelEditingHandler,flush:"left"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.annotationFlyout.cancelButtonLabel",defaultMessage:"Cancel"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},isExistingAnnotation&&_react.default.createElement(_eui.EuiButtonEmpty,{color:"danger",onClick:this.deleteConfirmHandler},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.annotationFlyout.deleteButtonLabel",defaultMessage:"Delete"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{fill:true,isDisabled:isInvalid===true,onClick:this.saveOrUpdateAnnotation},isExistingAnnotation?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.annotationFlyout.updateButtonLabel",defaultMessage:"Update"}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.annotationFlyout.createButtonLabel",defaultMessage:"Create"})))))),_react.default.createElement(_delete_annotation_modal.DeleteAnnotationModal,{cancelAction:this.closeDeleteModal,deleteAction:this.deleteHandler,isVisible:isDeleteModalVisible}))}}]);return AnnotationFlyoutUI}(_react.Component);var AnnotationFlyout=function AnnotationFlyout(props){var annotationProp=(0,_useObservable.default)(_annotations_service.annotation$);if(annotationProp===undefined){return null}return _react.default.createElement(AnnotationFlyoutUI,_extends({annotation:annotationProp},props))};exports.AnnotationFlyout=AnnotationFlyout},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getNewCustomUrlDefaults=getNewCustomUrlDefaults;exports.getQueryEntityFieldNames=getQueryEntityFieldNames;exports.isValidCustomUrlSettingsTimeRange=isValidCustomUrlSettingsTimeRange;exports.isValidCustomUrlSettings=isValidCustomUrlSettings;exports.buildCustomUrlFromSettings=buildCustomUrlFromSettings;exports.getTestUrl=getTestUrl;var _constants=__webpack_require__(245);var _risonNode=_interopRequireDefault(__webpack_require__(100));var _url=_interopRequireDefault(__webpack_require__(357));var _public=__webpack_require__(1068);var _index_patterns=__webpack_require__(120);var _job_utils=__webpack_require__(59);var _parse_interval=__webpack_require__(74);var _custom_url_utils=__webpack_require__(139);var _ml_api_service=__webpack_require__(51);var _job_service=__webpack_require__(58);var _string_utils=__webpack_require__(80);var _dependency_cache=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function getNewCustomUrlDefaults(job,dashboards,indexPatterns){var kibanaSettings={queryFieldNames:[]};var urlType=_constants.URL_TYPE.OTHER;if(dashboards!==undefined&&dashboards.length>0){urlType=_constants.URL_TYPE.KIBANA_DASHBOARD;kibanaSettings.dashboardId=dashboards[0].id}else if(indexPatterns!==undefined&&indexPatterns.length>0){urlType=_constants.URL_TYPE.KIBANA_DISCOVER}var datafeedConfig=job.datafeed_config;if(indexPatterns!==undefined&&indexPatterns.length>0&&datafeedConfig!==undefined&&datafeedConfig.indices!==undefined&&datafeedConfig.indices.length>0){var datafeedIndex=datafeedConfig.indices[0];var defaultIndexPattern=indexPatterns.find((function(indexPattern){return indexPattern.title===datafeedIndex}));if(defaultIndexPattern===undefined){defaultIndexPattern=indexPatterns[0]}kibanaSettings.discoverIndexPatternId=defaultIndexPattern.id}return{label:"",type:urlType,timeRange:{type:_constants.TIME_RANGE_TYPE.AUTO,interval:""},kibanaSettings:kibanaSettings,otherUrlSettings:{urlValue:""}}}function getQueryEntityFieldNames(job){var influencers=job.analysis_config.influencers;var detectors=job.analysis_config.detectors;var entityFieldNames=[];if(influencers!==undefined){entityFieldNames.push.apply(entityFieldNames,_toConsumableArray(influencers))}detectors.forEach((function(detector,detectorIndex){var partitioningFields=(0,_job_utils.getPartitioningFieldNames)(job,detectorIndex);partitioningFields.forEach((function(fieldName){if(entityFieldNames.indexOf(fieldName)===-1){entityFieldNames.push(fieldName)}}))}));return entityFieldNames}function isValidCustomUrlSettingsTimeRange(timeRangeSettings){if(timeRangeSettings.type===_constants.TIME_RANGE_TYPE.INTERVAL){var interval=(0,_parse_interval.parseInterval)(timeRangeSettings.interval);return interval!==null}return true}function isValidCustomUrlSettings(settings,savedCustomUrls){var isValid=(0,_custom_url_utils.isValidLabel)(settings.label,savedCustomUrls);if(isValid===true){isValid=isValidCustomUrlSettingsTimeRange(settings.timeRange)}return isValid}function buildCustomUrlFromSettings(settings){if(settings.type===_constants.URL_TYPE.KIBANA_DASHBOARD){return buildDashboardUrlFromSettings(settings)}else if(settings.type===_constants.URL_TYPE.KIBANA_DISCOVER){return Promise.resolve(buildDiscoverUrlFromSettings(settings))}else{var urlToAdd={url_name:settings.label,url_value:settings.otherUrlSettings.urlValue};return Promise.resolve(urlToAdd)}}function buildDashboardUrlFromSettings(settings){return new Promise((function(resolve,reject){var _settings$kibanaSetti=settings.kibanaSettings,dashboardId=_settings$kibanaSetti.dashboardId,queryFieldNames=_settings$kibanaSetti.queryFieldNames;var savedObjectsClient=(0,_dependency_cache.getSavedObjectsClient)();savedObjectsClient.get("dashboard",dashboardId).then((function(response){var filters=[];var query=undefined;var searchSourceJSON=response.get("kibanaSavedObjectMeta.searchSourceJSON");if(searchSourceJSON!==undefined){var searchSourceData=JSON.parse(searchSourceJSON);if(searchSourceData.filter!==undefined){filters=searchSourceData.filter}query=searchSourceData.query}var queryFromEntityFieldNames=buildAppStateQueryParam(queryFieldNames);if(queryFromEntityFieldNames!==undefined){query=queryFromEntityFieldNames}var getUrlGenerator=(0,_dependency_cache.getGetUrlGenerator)();var generator=getUrlGenerator(_public.DASHBOARD_APP_URL_GENERATOR);return generator.createUrl({dashboardId:dashboardId,timeRange:{from:"$earliest$",to:"$latest$",mode:"absolute"},filters:filters,query:query,useHash:false}).then((function(urlValue){var urlToAdd={url_name:settings.label,url_value:decodeURIComponent("kibana".concat(_url.default.parse(urlValue).hash)),time_range:_constants.TIME_RANGE_TYPE.AUTO};if(settings.timeRange.type===_constants.TIME_RANGE_TYPE.INTERVAL){urlToAdd.time_range=settings.timeRange.interval}resolve(urlToAdd)}))})).catch((function(resp){reject(resp)}))}))}function buildDiscoverUrlFromSettings(settings){var _settings$kibanaSetti2=settings.kibanaSettings,discoverIndexPatternId=_settings$kibanaSetti2.discoverIndexPatternId,queryFieldNames=_settings$kibanaSetti2.queryFieldNames;var _g=_risonNode.default.encode({time:{from:"$earliest$",to:"$latest$",mode:"absolute"}});var appState={index:discoverIndexPatternId};var queryFromEntityFieldNames=buildAppStateQueryParam(queryFieldNames);if(queryFromEntityFieldNames!==undefined){appState.query=queryFromEntityFieldNames}var _a=_risonNode.default.encode(appState);var urlValue="kibana#/discover?_g=".concat(_g,"&_a=").concat(_a);var urlToAdd={url_name:settings.label,url_value:urlValue,time_range:_constants.TIME_RANGE_TYPE.AUTO};if(settings.timeRange.type===_constants.TIME_RANGE_TYPE.INTERVAL){urlToAdd.time_range=settings.timeRange.interval}return urlToAdd}function buildAppStateQueryParam(queryFieldNames){var queryParam;if(queryFieldNames!==undefined&&queryFieldNames.length>0){var queryString="";queryFieldNames.forEach((function(fieldName,i){if(i>0){queryString+=" and "}queryString+="".concat((0,_string_utils.escapeForElasticsearchQuery)(fieldName),':"$').concat(fieldName,'$"')}));queryParam={language:"kuery",query:queryString}}return queryParam}function getTestUrl(job,customUrl){var urlValue=customUrl.url_value;var bucketSpanSecs=(0,_parse_interval.parseInterval)(job.analysis_config.bucket_span).asSeconds();var testUrl=customUrl.url_value;var body={query:{bool:{must:[{term:{job_id:job.job_id}},{term:{result_type:"record"}}]}},size:1,_source:{excludes:[]},sort:[{record_score:{order:"desc"}}]};return new Promise((function(resolve,reject){_ml_api_service.ml.esSearch({index:_index_patterns.ML_RESULTS_INDEX_PATTERN,rest_total_hits_as_int:true,body:body}).then((function(resp){if(resp.hits.total>0){var record=resp.hits.hits[0]._source;testUrl=(0,_custom_url_utils.replaceTokensInUrlValue)(customUrl,bucketSpanSecs,record,"timestamp");resolve(testUrl)}else{_job_service.mlJobService.searchPreview(job).then((function(response){var testDoc;var docTimeFieldName=job.data_description.time_field;if(response.aggregations){var firstBucket=response.aggregations.buckets.buckets[0];testDoc=_defineProperty({},docTimeFieldName,firstBucket.key);urlValue.replace(/\$([^?&$\'"]{1,40})\$/g,(function(match,name){if(name!=="earliest"&&name!=="latest"&&firstBucket[name]!==undefined){var tokenBuckets=firstBucket[name];if(tokenBuckets.buckets){testDoc[name]=tokenBuckets.buckets[0].key}}}))}else{if(response.hits.total.value>0){testDoc=response.hits.hits[0]._source}}if(testDoc!==undefined){testUrl=(0,_custom_url_utils.replaceTokensInUrlValue)(customUrl,bucketSpanSecs,testDoc,docTimeFieldName)}resolve(testUrl)}))}})).catch((function(resp){reject(resp)}))}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TIME_RANGE_TYPE=exports.URL_TYPE=void 0;var URL_TYPE={KIBANA_DASHBOARD:"KIBANA_DASHBOARD",KIBANA_DISCOVER:"KIBANA_DISCOVER",OTHER:"OTHER"};exports.URL_TYPE=URL_TYPE;var TIME_RANGE_TYPE={AUTO:"auto",INTERVAL:"interval"};exports.TIME_RANGE_TYPE=TIME_RANGE_TYPE},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _public=__webpack_require__(136);Object.keys(_public).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _public[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={DashboardContainerFactory:true,DashboardContainer:true,DashboardContainerInput:true,createPanelState:true,DASHBOARD_GRID_COLUMN_COUNT:true,DEFAULT_PANEL_HEIGHT:true,DEFAULT_PANEL_WIDTH:true,DASHBOARD_CONTAINER_TYPE:true};Object.defineProperty(exports,"DashboardContainerFactory",{enumerable:true,get:function get(){return _dashboard_container_factory.DashboardContainerFactory}});Object.defineProperty(exports,"DashboardContainer",{enumerable:true,get:function get(){return _dashboard_container.DashboardContainer}});Object.defineProperty(exports,"DashboardContainerInput",{enumerable:true,get:function get(){return _dashboard_container.DashboardContainerInput}});Object.defineProperty(exports,"createPanelState",{enumerable:true,get:function get(){return _panel.createPanelState}});Object.defineProperty(exports,"DASHBOARD_GRID_COLUMN_COUNT",{enumerable:true,get:function get(){return _dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT}});Object.defineProperty(exports,"DEFAULT_PANEL_HEIGHT",{enumerable:true,get:function get(){return _dashboard_constants.DEFAULT_PANEL_HEIGHT}});Object.defineProperty(exports,"DEFAULT_PANEL_WIDTH",{enumerable:true,get:function get(){return _dashboard_constants.DEFAULT_PANEL_WIDTH}});Object.defineProperty(exports,"DASHBOARD_CONTAINER_TYPE",{enumerable:true,get:function get(){return _dashboard_constants.DASHBOARD_CONTAINER_TYPE}});var _dashboard_container_factory=__webpack_require__(433);var _dashboard_container=__webpack_require__(434);var _panel=__webpack_require__(435);var _types=__webpack_require__(1151);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _dashboard_constants=__webpack_require__(161)},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.confirmModalPromise=confirmModalPromise;var _react=_interopRequireDefault(__webpack_require__(28));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(29);var _public=__webpack_require__(31);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function confirmModalPromise(){var message=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var title=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var confirmBtnText=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var overlays=arguments.length>3?arguments[3]:undefined;return new Promise((function(resolve,reject){var cancelButtonText=_i18n.i18n.translate("savedObjects.confirmModal.cancelButtonLabel",{defaultMessage:"Cancel"});var modal=overlays.openModal((0,_public.toMountPoint)(_react.default.createElement(_eui.EuiConfirmModal,{onCancel:function onCancel(){modal.close();reject()},onConfirm:function onConfirm(){modal.close();resolve(true)},confirmButtonText:confirmBtnText,cancelButtonText:cancelButtonText,title:title},message)))}))}},,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getCloneFormStateFromJobConfig=getCloneFormStateFromJobConfig;exports.getJobConfigFromFormState=exports.getInitialState=exports.DEFAULT_MODEL_MEMORY_LIMIT=void 0;var _check_privilege=__webpack_require__(56);var _ml_nodes_check=__webpack_require__(154);var _analytics=__webpack_require__(76);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DEFAULT_MODEL_MEMORY_LIMIT;exports.DEFAULT_MODEL_MEMORY_LIMIT=DEFAULT_MODEL_MEMORY_LIMIT;(function(DEFAULT_MODEL_MEMORY_LIMIT){DEFAULT_MODEL_MEMORY_LIMIT["regression"]="100mb";DEFAULT_MODEL_MEMORY_LIMIT["outlier_detection"]="50mb";DEFAULT_MODEL_MEMORY_LIMIT["classification"]="100mb"})(DEFAULT_MODEL_MEMORY_LIMIT||(exports.DEFAULT_MODEL_MEMORY_LIMIT=DEFAULT_MODEL_MEMORY_LIMIT={}));var getInitialState=function getInitialState(){return{advancedEditorMessages:[],advancedEditorRawString:"",form:{createIndexPattern:false,dependentVariable:"",dependentVariableFetchFail:false,dependentVariableOptions:[],description:"",destinationIndex:"",destinationIndexNameExists:false,destinationIndexNameEmpty:true,destinationIndexNameValid:false,destinationIndexPatternTitleExists:false,excludes:[],fieldOptionsFetchFail:false,excludesOptions:[],jobId:"",jobIdExists:false,jobIdEmpty:true,jobIdInvalidMaxLength:false,jobIdValid:false,jobType:undefined,loadingDepVarOptions:false,loadingFieldOptions:false,maxDistinctValuesError:undefined,modelMemoryLimit:undefined,modelMemoryLimitUnitValid:true,modelMemoryLimitValidationResult:null,previousJobType:null,previousSourceIndex:undefined,sourceIndex:"",sourceIndexNameEmpty:true,sourceIndexNameValid:false,sourceIndexContainsNumericalFields:true,sourceIndexFieldsCheckFailed:false,trainingPercent:80},jobConfig:{},disabled:!(0,_ml_nodes_check.mlNodesAvailable)()||!(0,_check_privilege.checkPermission)("canCreateDataFrameAnalytics")||!(0,_check_privilege.checkPermission)("canStartStopDataFrameAnalytics"),indexNames:[],indexPatternsMap:{},isAdvancedEditorEnabled:false,isAdvancedEditorValidJson:true,isJobCreated:false,isJobStarted:false,isModalVisible:false,isModalButtonDisabled:false,isValid:false,jobIds:[],requestMessages:[],estimatedModelMemoryLimit:""}};exports.getInitialState=getInitialState;var getJobConfigFromFormState=function getJobConfigFromFormState(formState){var jobConfig={description:formState.description,source:{index:formState.sourceIndex.includes(",")?formState.sourceIndex.split(",").map((function(d){return d.trim()})):formState.sourceIndex},dest:{index:formState.destinationIndex},analyzed_fields:{excludes:formState.excludes},analysis:{outlier_detection:{}},model_memory_limit:formState.modelMemoryLimit};if(formState.jobType===_analytics.ANALYSIS_CONFIG_TYPE.REGRESSION||formState.jobType===_analytics.ANALYSIS_CONFIG_TYPE.CLASSIFICATION){jobConfig.analysis=_defineProperty({},formState.jobType,{dependent_variable:formState.dependentVariable,training_percent:formState.trainingPercent})}return jobConfig};exports.getJobConfigFromFormState=getJobConfigFromFormState;function getCloneFormStateFromJobConfig(analyticsJobConfig){var _analyticsJobConfig$d;var jobType=Object.keys(analyticsJobConfig.analysis)[0];var resultState={jobType:jobType,description:(_analyticsJobConfig$d=analyticsJobConfig.description)!==null&&_analyticsJobConfig$d!==void 0?_analyticsJobConfig$d:"",sourceIndex:Array.isArray(analyticsJobConfig.source.index)?analyticsJobConfig.source.index.join(","):analyticsJobConfig.source.index,modelMemoryLimit:analyticsJobConfig.model_memory_limit,excludes:analyticsJobConfig.analyzed_fields.excludes};if((0,_analytics.isRegressionAnalysis)(analyticsJobConfig.analysis)||(0,_analytics.isClassificationAnalysis)(analyticsJobConfig.analysis)){var analysisConfig=analyticsJobConfig.analysis[jobType];resultState.dependentVariable=analysisConfig.dependent_variable;resultState.trainingPercent=analysisConfig.training_percent}return resultState}},,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MlContext=void 0;var _react=_interopRequireDefault(__webpack_require__(28));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MlContext=_react.default.createContext({});exports.MlContext=MlContext},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={KQLSyntaxError:true,nodeTypes:true};Object.defineProperty(exports,"KQLSyntaxError",{enumerable:true,get:function get(){return _kuery_syntax_error.KQLSyntaxError}});Object.defineProperty(exports,"nodeTypes",{enumerable:true,get:function get(){return _node_types.nodeTypes}});var _kuery_syntax_error=__webpack_require__(282);var _node_types=__webpack_require__(122);var _ast=__webpack_require__(98);Object.keys(_ast).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _ast[key]}})}));var _types=__webpack_require__(577);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}))},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}Object.defineProperty(exports,"__esModule",{value:true});exports.KQLSyntaxError=void 0;var _lodash=__webpack_require__(49);var _i18n=__webpack_require__(1);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var endOfInputText=_i18n.i18n.translate("data.common.kql.errors.endOfInputText",{defaultMessage:"end of input"});var grammarRuleTranslations={fieldName:_i18n.i18n.translate("data.common.kql.errors.fieldNameText",{defaultMessage:"field name"}),value:_i18n.i18n.translate("data.common.kql.errors.valueText",{defaultMessage:"value"}),literal:_i18n.i18n.translate("data.common.kql.errors.literalText",{defaultMessage:"literal"}),whitespace:_i18n.i18n.translate("data.common.kql.errors.whitespaceText",{defaultMessage:"whitespace"})};var KQLSyntaxError=function(_Error){_inherits(KQLSyntaxError,_Error);function KQLSyntaxError(error,expression){var _this;_classCallCheck(this,KQLSyntaxError);var message=error.message;if(error.expected){var translatedExpectations=error.expected.map((function(expected){return grammarRuleTranslations[expected.description]||expected.description}));var translatedExpectationText=translatedExpectations.join(", ");message=_i18n.i18n.translate("data.common.kql.errors.syntaxError",{defaultMessage:"Expected {expectedList} but {foundInput} found.",values:{expectedList:translatedExpectationText,foundInput:error.found?'"'.concat(error.found,'"'):endOfInputText}})}var fullMessage=[message,expression,(0,_lodash.repeat)("-",error.location.start.offset)+"^"].join("\n");_this=_possibleConstructorReturn(this,_getPrototypeOf(KQLSyntaxError).call(this,fullMessage));_defineProperty(_assertThisInitialized(_this),"shortMessage",void 0);_this.name="KQLSyntaxError";_this.shortMessage=message;return _this}return KQLSyntaxError}(_wrapNativeSuper(Error));exports.KQLSyntaxError=KQLSyntaxError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildExistsFilter=exports.getExistsFilterField=exports.isExistsFilter=void 0;var isExistsFilter=function isExistsFilter(filter){return filter&&filter.exists};exports.isExistsFilter=isExistsFilter;var getExistsFilterField=function getExistsFilterField(filter){return filter.exists&&filter.exists.field};exports.getExistsFilterField=getExistsFilterField;var buildExistsFilter=function buildExistsFilter(field,indexPattern){return{meta:{index:indexPattern.id},exists:{field:field.name}}};exports.buildExistsFilter=buildExistsFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getGeoBoundingBoxFilterField=exports.isGeoBoundingBoxFilter=void 0;var isGeoBoundingBoxFilter=function isGeoBoundingBoxFilter(filter){return filter&&filter.geo_bounding_box};exports.isGeoBoundingBoxFilter=isGeoBoundingBoxFilter;var getGeoBoundingBoxFilterField=function getGeoBoundingBoxFilterField(filter){return filter.geo_bounding_box&&Object.keys(filter.geo_bounding_box).find((function(key){return key!=="ignore_unmapped"}))};exports.getGeoBoundingBoxFilterField=getGeoBoundingBoxFilterField},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getGeoPolygonFilterField=exports.isGeoPolygonFilter=void 0;var isGeoPolygonFilter=function isGeoPolygonFilter(filter){return filter&&filter.geo_polygon};exports.isGeoPolygonFilter=isGeoPolygonFilter;var getGeoPolygonFilterField=function getGeoPolygonFilterField(filter){return filter.geo_polygon&&Object.keys(filter.geo_polygon).find((function(key){return key!=="ignore_unmapped"}))};exports.getGeoPolygonFilterField=getGeoPolygonFilterField},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getIndexPatternFromFilter=getIndexPatternFromFilter;function getIndexPatternFromFilter(filter,indexPatterns){return indexPatterns.find((function(indexPattern){return indexPattern.id===filter.meta.index}))}},function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.buildPhrasesFilter=exports.getPhrasesFilterField=exports.isPhrasesFilter=void 0;var _phrase_filter=__webpack_require__(211);var _index=__webpack_require__(94);var isPhrasesFilter=function isPhrasesFilter(filter){var _filter$meta;return(filter===null||filter===void 0?void 0:(_filter$meta=filter.meta)===null||_filter$meta===void 0?void 0:_filter$meta.type)===_index.FILTERS.PHRASES};exports.isPhrasesFilter=isPhrasesFilter;var getPhrasesFilterField=function getPhrasesFilterField(filter){return filter.meta.key};exports.getPhrasesFilterField=getPhrasesFilterField;var buildPhrasesFilter=function buildPhrasesFilter(field,params,indexPattern){var index=indexPattern.id;var type=_index.FILTERS.PHRASES;var key=field.name;var format=function format(f,value){return f&&f.format&&f.format.convert?f.format.convert(value):value};var value=params.map((function(v){return format(field,v)})).join(", ");var should;if(field.scripted){should=params.map((function(v){return{script:(0,_phrase_filter.getPhraseScript)(field,v)}}))}else{should=params.map((function(v){return{match_phrase:_defineProperty({},field.name,v)}}))}return{meta:{index:index,type:type,key:key,value:value,params:params},query:{bool:{should:should,minimum_should_match:1}}}};exports.buildPhrasesFilter=buildPhrasesFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRangeScript=exports.buildRangeFilter=exports.getRangeFilterField=exports.isScriptedRangeFilter=exports.isRangeFilter=void 0;var _lodash=__webpack_require__(49);var OPERANDS_IN_RANGE=2;var operators={gt:">",gte:">=",lte:"<=",lt:"<"};var comparators={gt:"boolean gt(Supplier s, def v) {return s.get() > v}",gte:"boolean gte(Supplier s, def v) {return s.get() >= v}",lte:"boolean lte(Supplier s, def v) {return s.get() <= v}",lt:"boolean lt(Supplier s, def v) {return s.get() < v}"};var dateComparators={gt:"boolean gt(Supplier s, def v) {return s.get().toInstant().isAfter(Instant.parse(v))}",gte:"boolean gte(Supplier s, def v) {return !s.get().toInstant().isBefore(Instant.parse(v))}",lte:"boolean lte(Supplier s, def v) {return !s.get().toInstant().isAfter(Instant.parse(v))}",lt:"boolean lt(Supplier s, def v) {return s.get().toInstant().isBefore(Instant.parse(v))}"};var hasRangeKeys=function hasRangeKeys(params){return Boolean((0,_lodash.keys)(params).find((function(key){return["gte","gt","lte","lt","from","to"].includes(key)})))};var isRangeFilter=function isRangeFilter(filter){return filter&&filter.range};exports.isRangeFilter=isRangeFilter;var isScriptedRangeFilter=function isScriptedRangeFilter(filter){var params=(0,_lodash.get)(filter,"script.script.params",{});return hasRangeKeys(params)};exports.isScriptedRangeFilter=isScriptedRangeFilter;var getRangeFilterField=function getRangeFilterField(filter){return filter.range&&Object.keys(filter.range)[0]};exports.getRangeFilterField=getRangeFilterField;var formatValue=function formatValue(field,params){return(0,_lodash.map)(params,(function(val,key){return(0,_lodash.get)(operators,key)+format(field,val)})).join(" ")};var format=function format(field,value){return field&&field.format&&field.format.convert?field.format.convert(value):value};var buildRangeFilter=function buildRangeFilter(field,params,indexPattern,formattedValue){var filter={meta:{index:indexPattern.id,params:{}}};if(formattedValue){filter.meta.formattedValue=formattedValue}params=(0,_lodash.mapValues)(params,(function(value){return field.type==="number"?parseFloat(value):value}));if("gte"in params&&"gt"in params)throw new Error("gte and gt are mutually exclusive");if("lte"in params&&"lt"in params)throw new Error("lte and lt are mutually exclusive");var totalInfinite=["gt","lt"].reduce((function(acc,op){var key=op in params?op:"".concat(op,"e");var isInfinite=Math.abs((0,_lodash.get)(params,key))===Infinity;if(isInfinite){acc++;delete params[key]}return acc}),0);if(totalInfinite===OPERANDS_IN_RANGE){filter.match_all={};filter.meta.field=field.name}else if(field.scripted){filter.script=getRangeScript(field,params);filter.script.script.params.value=formatValue(field,filter.script.script.params);filter.meta.field=field.name}else{filter.range={};filter.range[field.name]=params}return filter};exports.buildRangeFilter=buildRangeFilter;var getRangeScript=function getRangeScript(field,params){var knownParams=(0,_lodash.pick)(params,(function(val,key){return key in operators}));var script=(0,_lodash.map)(knownParams,(function(val,key){return"("+field.script+")"+(0,_lodash.get)(operators,key)+key})).join(" && ");if(field.lang==="painless"){var comp=field.type==="date"?dateComparators:comparators;var currentComparators=(0,_lodash.reduce)(knownParams,(function(acc,val,key){return acc.concat((0,_lodash.get)(comp,key))}),[]).join(" ");var comparisons=(0,_lodash.map)(knownParams,(function(val,key){return"".concat(key,"(() -> { ").concat(field.script," }, params.").concat(key,")")})).join(" && ");script="".concat(currentComparators).concat(comparisons)}return{script:{source:script,params:knownParams,lang:field.lang}}};exports.getRangeScript=getRangeScript},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getMissingFilterField=exports.isMissingFilter=void 0;var isMissingFilter=function isMissingFilter(filter){return filter&&filter.missing};exports.isMissingFilter=isMissingFilter;var getMissingFilterField=function getMissingFilterField(filter){return filter.missing&&filter.missing.field};exports.getMissingFilterField=getMissingFilterField},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.toElasticsearchQuery=exports.doesKueryExpressionHaveLuceneSyntaxError=exports.fromKueryExpression=exports.fromLiteralExpression=void 0;var _index=__webpack_require__(122);var _kuery_syntax_error=__webpack_require__(282);var _kuery=__webpack_require__(566);var fromExpression=function fromExpression(expression){var parseOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var parse=arguments.length>2&&arguments[2]!==undefined?arguments[2]:_kuery.parse;if(typeof expression==="undefined"){throw new Error("expression must be a string, got undefined instead")}return parse(expression,_objectSpread({},parseOptions,{helpers:{nodeTypes:_index.nodeTypes}}))};var fromLiteralExpression=function fromLiteralExpression(expression){var parseOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return fromExpression(expression,_objectSpread({},parseOptions,{startRule:"Literal"}),_kuery.parse)};exports.fromLiteralExpression=fromLiteralExpression;var fromKueryExpression=function fromKueryExpression(expression){var parseOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};try{return fromExpression(expression,parseOptions,_kuery.parse)}catch(error){if(error.name==="SyntaxError"){throw new _kuery_syntax_error.KQLSyntaxError(error,expression)}else{throw error}}};exports.fromKueryExpression=fromKueryExpression;var doesKueryExpressionHaveLuceneSyntaxError=function doesKueryExpressionHaveLuceneSyntaxError(expression){try{fromExpression(expression,{errorOnLuceneSyntax:true},_kuery.parse);return false}catch(e){return e.message.startsWith("Lucene")}};exports.doesKueryExpressionHaveLuceneSyntaxError=doesKueryExpressionHaveLuceneSyntaxError;var toElasticsearchQuery=function toElasticsearchQuery(node,indexPattern,config,context){if(!node||!node.type||!_index.nodeTypes[node.type]){return toElasticsearchQuery(_index.nodeTypes.function.buildNode("and",[]),indexPattern)}var nodeType=_index.nodeTypes[node.type];return nodeType.toElasticsearchQuery(node,indexPattern,config,context)};exports.toElasticsearchQuery=toElasticsearchQuery},function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.getFullFieldNameNode=getFullFieldNameNode;var _get_fields=__webpack_require__(212);function getFullFieldNameNode(rootNameNode,indexPattern,nestedPath){var fullFieldNameNode=_objectSpread({},rootNameNode,{value:nestedPath?"".concat(nestedPath,".").concat(rootNameNode.value):rootNameNode.value});if(!indexPattern||fullFieldNameNode.type==="wildcard"&&!nestedPath){return fullFieldNameNode}var fields=(0,_get_fields.getFields)(fullFieldNameNode,indexPattern);var errors=fields.reduce((function(acc,field){var nestedPathFromField=field.subType&&field.subType.nested?field.subType.nested.path:undefined;if(nestedPath&&!nestedPathFromField){return[].concat(_toConsumableArray(acc),["".concat(field.name,' is not a nested field but is in nested group "').concat(nestedPath,'" in the KQL expression.')])}if(nestedPathFromField&&!nestedPath){return[].concat(_toConsumableArray(acc),["".concat(field.name," is a nested field, but is not in a nested group in the KQL expression.")])}if(nestedPathFromField!==nestedPath){return[].concat(_toConsumableArray(acc),["Nested field ".concat(field.name," is being queried with the incorrect nested path. The correct path is ").concat(field.subType.nested.path,".")])}return acc}),[]);if(errors.length>0){throw new Error(errors.join("\n"))}return fullFieldNameNode}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildQueryFromFilters=void 0;var _lodash=__webpack_require__(49);var _migrate_filter=__webpack_require__(578);var _filter_matches_index=__webpack_require__(579);var _filters=__webpack_require__(94);var _handle_nested_filter=__webpack_require__(580);var filterNegate=function filterNegate(reverse){return function(filter){if((0,_lodash.isUndefined)(filter.meta)||(0,_lodash.isUndefined)(filter.meta.negate)){return!reverse}return filter.meta&&filter.meta.negate===reverse}};var translateToQuery=function translateToQuery(filter){if(!filter)return;if(filter.query){return filter.query}return filter};var buildQueryFromFilters=function buildQueryFromFilters(){var filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var indexPattern=arguments.length>1?arguments[1]:undefined;var ignoreFilterIfFieldNotInIndex=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;filters=filters.filter((function(filter){return filter&&!(0,_filters.isFilterDisabled)(filter)}));var filtersToESQueries=function filtersToESQueries(negate){return filters.filter(filterNegate(negate)).filter((function(filter){return!ignoreFilterIfFieldNotInIndex||(0,_filter_matches_index.filterMatchesIndex)(filter,indexPattern)})).map((function(filter){return(0,_migrate_filter.migrateFilter)(filter,indexPattern)})).map((function(filter){return(0,_handle_nested_filter.handleNestedFilter)(filter,indexPattern)})).map(translateToQuery).map(_filters.cleanFilter)};return{must:[],filter:filtersToESQueries(false),should:[],must_not:filtersToESQueries(true)}};exports.buildQueryFromFilters=buildQueryFromFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.decorateQuery=decorateQuery;var _lodash=__webpack_require__(49);var _utils=__webpack_require__(214);var _es_query_dsl=__webpack_require__(582);function decorateQuery(query,queryStringOptions,dateFormatTZ){if((0,_es_query_dsl.isEsQueryString)(query)){(0,_lodash.extend)(query.query_string,queryStringOptions);if(dateFormatTZ){(0,_lodash.defaults)(query.query_string,{time_zone:(0,_utils.getTimeZoneFromSettings)(dateFormatTZ)})}}return query}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.luceneStringToDsl=luceneStringToDsl;var _lodash=__webpack_require__(49);function luceneStringToDsl(query){if((0,_lodash.isString)(query)){if(query.trim()===""){return{match_all:{}}}return{query_string:{query:query}}}return query}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"textContentTypeSetup",{enumerable:true,get:function get(){return _text_content_type.setup}});Object.defineProperty(exports,"TEXT_CONTEXT_TYPE",{enumerable:true,get:function get(){return _text_content_type.TEXT_CONTEXT_TYPE}});Object.defineProperty(exports,"htmlContentTypeSetup",{enumerable:true,get:function get(){return _html_content_type.setup}});Object.defineProperty(exports,"HTML_CONTEXT_TYPE",{enumerable:true,get:function get(){return _html_content_type.HTML_CONTEXT_TYPE}});var _text_content_type=__webpack_require__(586);var _html_content_type=__webpack_require__(593)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.highlightTags=void 0;var highlightTags={pre:"@kibana-highlighted-field@",post:"@/kibana-highlighted-field@"};exports.highlightTags=highlightTags},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.baseFormatters=void 0;var _converters=__webpack_require__(298);var baseFormatters=[_converters.BoolFormat,_converters.BytesFormat,_converters.ColorFormat,_converters.DateNanosFormat,_converters.DurationFormat,_converters.IpFormat,_converters.NumberFormat,_converters.PercentFormat,_converters.RelativeDateFormat,_converters.SourceFormat,_converters.StaticLookupFormat,_converters.StringFormat,_converters.TruncateFormat,_converters.UrlFormat];exports.baseFormatters=baseFormatters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"UrlFormat",{enumerable:true,get:function get(){return _url.UrlFormat}});Object.defineProperty(exports,"BytesFormat",{enumerable:true,get:function get(){return _bytes.BytesFormat}});Object.defineProperty(exports,"DateNanosFormat",{enumerable:true,get:function get(){return _date_nanos.DateNanosFormat}});Object.defineProperty(exports,"RelativeDateFormat",{enumerable:true,get:function get(){return _relative_date.RelativeDateFormat}});Object.defineProperty(exports,"DurationFormat",{enumerable:true,get:function get(){return _duration.DurationFormat}});Object.defineProperty(exports,"IpFormat",{enumerable:true,get:function get(){return _ip.IpFormat}});Object.defineProperty(exports,"NumberFormat",{enumerable:true,get:function get(){return _number.NumberFormat}});Object.defineProperty(exports,"PercentFormat",{enumerable:true,get:function get(){return _percent.PercentFormat}});Object.defineProperty(exports,"StringFormat",{enumerable:true,get:function get(){return _string.StringFormat}});Object.defineProperty(exports,"SourceFormat",{enumerable:true,get:function get(){return _source.SourceFormat}});Object.defineProperty(exports,"ColorFormat",{enumerable:true,get:function get(){return _color.ColorFormat}});Object.defineProperty(exports,"TruncateFormat",{enumerable:true,get:function get(){return _truncate.TruncateFormat}});Object.defineProperty(exports,"BoolFormat",{enumerable:true,get:function get(){return _boolean.BoolFormat}});Object.defineProperty(exports,"StaticLookupFormat",{enumerable:true,get:function get(){return _static_lookup.StaticLookupFormat}});var _url=__webpack_require__(594);var _bytes=__webpack_require__(595);var _date_nanos=__webpack_require__(597);var _relative_date=__webpack_require__(598);var _duration=__webpack_require__(599);var _ip=__webpack_require__(600);var _number=__webpack_require__(601);var _percent=__webpack_require__(602);var _string=__webpack_require__(603);var _source=__webpack_require__(609);var _color=__webpack_require__(610);var _truncate=__webpack_require__(611);var _boolean=__webpack_require__(612);var _static_lookup=__webpack_require__(613)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_CONVERTER_COLOR=void 0;var DEFAULT_CONVERTER_COLOR={range:"".concat(Number.NEGATIVE_INFINITY,":").concat(Number.POSITIVE_INFINITY),regex:"<insert regex>",text:"#000000",background:"#ffffff"};exports.DEFAULT_CONVERTER_COLOR=DEFAULT_CONVERTER_COLOR},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"KbnFieldType",{enumerable:true,get:function get(){return _kbn_field_type.KbnFieldType}});Object.defineProperty(exports,"castEsToKbnFieldTypeName",{enumerable:true,get:function get(){return _kbn_field_types.castEsToKbnFieldTypeName}});Object.defineProperty(exports,"getKbnFieldType",{enumerable:true,get:function get(){return _kbn_field_types.getKbnFieldType}});Object.defineProperty(exports,"getKbnTypeNames",{enumerable:true,get:function get(){return _kbn_field_types.getKbnTypeNames}});Object.defineProperty(exports,"getFilterableKbnTypeNames",{enumerable:true,get:function get(){return _kbn_field_types.getFilterableKbnTypeNames}});var _kbn_field_type=__webpack_require__(301);var _kbn_field_types=__webpack_require__(618)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(exports,"__esModule",{value:true});exports.KbnFieldType=void 0;var _types=__webpack_require__(79);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var KbnFieldType=function KbnFieldType(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,KbnFieldType);_defineProperty(this,"name",void 0);_defineProperty(this,"sortable",void 0);_defineProperty(this,"filterable",void 0);_defineProperty(this,"esTypes",void 0);this.name=options.name||_types.KBN_FIELD_TYPES.UNKNOWN;this.sortable=options.sortable||false;this.filterable=options.filterable||false;this.esTypes=Object.freeze((options.esTypes||[]).slice())};exports.KbnFieldType=KbnFieldType},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dedupFilters=void 0;var _lodash=__webpack_require__(49);var _compare_filters=__webpack_require__(304);var dedupFilters=function dedupFilters(existingFilters,filters){var comparatorOptions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!Array.isArray(filters)){filters=[filters]}return(0,_lodash.filter)(filters,(function(f){return!(0,_lodash.find)(existingFilters,(function(existingFilter){return(0,_compare_filters.compareFilters)(existingFilter,f,comparatorOptions)}))}))};exports.dedupFilters=dedupFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.compareFilters=exports.COMPARE_ALL_OPTIONS=void 0;var _lodash=__webpack_require__(49);var COMPARE_ALL_OPTIONS={disabled:true,negate:true,state:true,alias:true};exports.COMPARE_ALL_OPTIONS=COMPARE_ALL_OPTIONS;var mapFilter=function mapFilter(filter,comparators,excludedAttributes){var _filter$meta;var cleaned=(0,_lodash.omit)(filter,excludedAttributes);if(comparators.negate)cleaned.negate=filter.meta&&Boolean(filter.meta.negate);if(comparators.disabled)cleaned.disabled=filter.meta&&Boolean(filter.meta.disabled);if(comparators.alias)cleaned.alias=(_filter$meta=filter.meta)===null||_filter$meta===void 0?void 0:_filter$meta.alias;return cleaned};var mapFilterArray=function mapFilterArray(filters,comparators,excludedAttributes){return(0,_lodash.map)(filters,(function(filter){return mapFilter(filter,comparators,excludedAttributes)}))};var compareFilters=function compareFilters(first,second){var comparatorOptions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!first||!second)return false;var comparators={};var excludedAttributes=["$$hashKey","meta"];comparators=(0,_lodash.defaults)(comparatorOptions||{},{state:false,negate:false,disabled:false,alias:false});if(!comparators.state)excludedAttributes.push("$state");if(Array.isArray(first)&&Array.isArray(second)){return(0,_lodash.isEqual)(mapFilterArray(first,comparators,excludedAttributes),mapFilterArray(second,comparators,excludedAttributes))}else if(!Array.isArray(first)&&!Array.isArray(second)){return(0,_lodash.isEqual)(mapFilter(first,comparators,excludedAttributes),mapFilter(second,comparators,excludedAttributes))}else{return false}};exports.compareFilters=compareFilters},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IEsSearchRequest",{enumerable:true,get:function get(){return _types.IEsSearchRequest}});Object.defineProperty(exports,"IEsSearchResponse",{enumerable:true,get:function get(){return _types.IEsSearchResponse}});Object.defineProperty(exports,"ES_SEARCH_STRATEGY",{enumerable:true,get:function get(){return _types.ES_SEARCH_STRATEGY}});var _types=__webpack_require__(623)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}Object.defineProperty(exports,"__esModule",{value:true});exports.InvalidEsCalendarIntervalError=void 0;var _i18n=__webpack_require__(1);var InvalidEsCalendarIntervalError=function(_Error){_inherits(InvalidEsCalendarIntervalError,_Error);function InvalidEsCalendarIntervalError(interval,value,unit,type){var _this;_classCallCheck(this,InvalidEsCalendarIntervalError);_this=_possibleConstructorReturn(this,_getPrototypeOf(InvalidEsCalendarIntervalError).call(this,_i18n.i18n.translate("data.parseEsInterval.invalidEsCalendarIntervalErrorMessage",{defaultMessage:"Invalid calendar interval: {interval}, value must be 1",values:{interval:interval}})));_this.interval=interval;_this.value=value;_this.unit=unit;_this.type=type;_this.name="InvalidEsCalendarIntervalError";_this.value=value;_this.unit=unit;_this.type=type;if(Error.captureStackTrace){Error.captureStackTrace(_assertThisInitialized(_this),InvalidEsCalendarIntervalError)}Object.setPrototypeOf(_assertThisInitialized(_this),InvalidEsCalendarIntervalError.prototype);return _this}return InvalidEsCalendarIntervalError}(_wrapNativeSuper(Error));exports.InvalidEsCalendarIntervalError=InvalidEsCalendarIntervalError},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}Object.defineProperty(exports,"__esModule",{value:true});exports.InvalidEsIntervalFormatError=void 0;var _i18n=__webpack_require__(1);var InvalidEsIntervalFormatError=function(_Error){_inherits(InvalidEsIntervalFormatError,_Error);function InvalidEsIntervalFormatError(interval){var _this;_classCallCheck(this,InvalidEsIntervalFormatError);_this=_possibleConstructorReturn(this,_getPrototypeOf(InvalidEsIntervalFormatError).call(this,_i18n.i18n.translate("data.parseEsInterval.invalidEsIntervalFormatErrorMessage",{defaultMessage:"Invalid interval format: {interval}",values:{interval:interval}})));_this.interval=interval;_this.name="InvalidEsIntervalFormatError";if(Error.captureStackTrace){Error.captureStackTrace(_assertThisInitialized(_this),InvalidEsIntervalFormatError)}Object.setPrototypeOf(_assertThisInitialized(_this),InvalidEsIntervalFormatError.prototype);return _this}return InvalidEsIntervalFormatError}(_wrapNativeSuper(Error));exports.InvalidEsIntervalFormatError=InvalidEsIntervalFormatError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isValidEsInterval=isValidEsInterval;var _parse_es_interval=__webpack_require__(170);function isValidEsInterval(interval){try{(0,_parse_es_interval.parseEsInterval)(interval);return true}catch(_unused){return false}}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FilterEditor=void 0;var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);var _react=__webpack_require__(30);var _lodash=__webpack_require__(49);var _react2=_interopRequireWildcard(__webpack_require__(28));var _generic_combo_box=__webpack_require__(219);var _filter_editor_utils=__webpack_require__(311);var _phrase_value_input=__webpack_require__(636);var _phrases_values_input=__webpack_require__(637);var _range_value_input=__webpack_require__(638);var _common=__webpack_require__(52);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterEditorUI=function(_Component){_inherits(FilterEditorUI,_Component);function FilterEditorUI(props){var _this;_classCallCheck(this,FilterEditorUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(FilterEditorUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"toggleCustomEditor",(function(){var isCustomEditorOpen=!_this.state.isCustomEditorOpen;_this.setState({isCustomEditorOpen:isCustomEditorOpen})}));_defineProperty(_assertThisInitialized(_this),"onIndexPatternChange",(function(_ref){var _ref2=_slicedToArray(_ref,1),selectedIndexPattern=_ref2[0];var selectedField=undefined;var selectedOperator=undefined;var params=undefined;_this.setState({selectedIndexPattern:selectedIndexPattern,selectedField:selectedField,selectedOperator:selectedOperator,params:params})}));_defineProperty(_assertThisInitialized(_this),"onFieldChange",(function(_ref3){var _ref4=_slicedToArray(_ref3,1),selectedField=_ref4[0];var selectedOperator=undefined;var params=undefined;_this.setState({selectedField:selectedField,selectedOperator:selectedOperator,params:params})}));_defineProperty(_assertThisInitialized(_this),"onOperatorChange",(function(_ref5){var _ref6=_slicedToArray(_ref5,1),selectedOperator=_ref6[0];var params=(0,_lodash.get)(_this.state.selectedOperator,"type")===(0,_lodash.get)(selectedOperator,"type")?_this.state.params:undefined;_this.setState({selectedOperator:selectedOperator,params:params})}));_defineProperty(_assertThisInitialized(_this),"onCustomLabelSwitchChange",(function(event){var useCustomLabel=event.target.checked;var customLabel=event.target.checked?"":null;_this.setState({useCustomLabel:useCustomLabel,customLabel:customLabel})}));_defineProperty(_assertThisInitialized(_this),"onCustomLabelChange",(function(event){var customLabel=event.target.value;_this.setState({customLabel:customLabel})}));_defineProperty(_assertThisInitialized(_this),"onParamsChange",(function(params){_this.setState({params:params})}));_defineProperty(_assertThisInitialized(_this),"onQueryDslChange",(function(queryDsl){_this.setState({queryDsl:queryDsl})}));_defineProperty(_assertThisInitialized(_this),"onSubmit",(function(){var _this$state=_this.state,indexPattern=_this$state.selectedIndexPattern,field=_this$state.selectedField,operator=_this$state.selectedOperator,params=_this$state.params,useCustomLabel=_this$state.useCustomLabel,customLabel=_this$state.customLabel,isCustomEditorOpen=_this$state.isCustomEditorOpen,queryDsl=_this$state.queryDsl;var $state=_this.props.filter.$state;if(!$state||!$state.store){return}var alias=useCustomLabel?customLabel:null;if(isCustomEditorOpen){var _this$props$filter$me=_this.props.filter.meta,index=_this$props$filter$me.index,disabled=_this$props$filter$me.disabled,negate=_this$props$filter$me.negate;var newIndex=index||_this.props.indexPatterns[0].id;var body=JSON.parse(queryDsl);var _filter=(0,_common.buildCustomFilter)(newIndex,body,disabled,negate,alias,$state.store);_this.props.onSubmit(_filter)}else if(indexPattern&&field&&operator){var _filter2=(0,_common.buildFilter)(indexPattern,field,operator.type,operator.negate,_this.props.filter.meta.disabled,params!==null&&params!==void 0?params:"",alias,$state.store);_this.props.onSubmit(_filter2)}}));_this.state={selectedIndexPattern:_this.getIndexPatternFromFilter(),selectedField:_this.getFieldFromFilter(),selectedOperator:_this.getSelectedOperator(),params:(0,_common.getFilterParams)(props.filter),useCustomLabel:props.filter.meta.alias!==null,customLabel:props.filter.meta.alias,queryDsl:JSON.stringify((0,_common.cleanFilter)(props.filter),null,2),isCustomEditorOpen:_this.isUnknownFilterType()};return _this}_createClass(FilterEditorUI,[{key:"render",value:function render(){return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiPopoverTitle,null,_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"baseline",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.editFilterPopupTitle",defaultMessage:"Edit filter"})),_react2.default.createElement(_eui.EuiFlexItem,{grow:false,className:"filterEditor__hiddenItem"}),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:this.toggleCustomEditor},this.state.isCustomEditorOpen?_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.editFilterValuesButtonLabel",defaultMessage:"Edit filter values"}):_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.editQueryDslButtonLabel",defaultMessage:"Edit as Query DSL"}))))),_react2.default.createElement("div",{className:"globalFilterItem__editorForm"},_react2.default.createElement(_eui.EuiForm,null,this.renderIndexPatternInput(),this.state.isCustomEditorOpen?this.renderCustomEditor():this.renderRegularEditor(),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiSwitch,{id:"filterEditorCustomLabelSwitch",label:this.props.intl.formatMessage({id:"data.filter.filterEditor.createCustomLabelSwitchLabel",defaultMessage:"Create custom label?"}),checked:this.state.useCustomLabel,onChange:this.onCustomLabelSwitchChange}),this.state.useCustomLabel&&_react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.createCustomLabelInputLabel",defaultMessage:"Custom label"})},_react2.default.createElement(_eui.EuiFieldText,{value:"".concat(this.state.customLabel),onChange:this.onCustomLabelChange}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiFlexGroup,{direction:"rowReverse",alignItems:"center",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{fill:true,onClick:this.onSubmit,isDisabled:!this.isFilterValid(),"data-test-subj":"saveFilter"},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.saveButtonLabel",defaultMessage:"Save"}))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonEmpty,{flush:"right",onClick:this.props.onCancel,"data-test-subj":"cancelSaveFilter"},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.cancelButtonLabel",defaultMessage:"Cancel"}))),_react2.default.createElement(_eui.EuiFlexItem,null)))))}},{key:"renderIndexPatternInput",value:function renderIndexPatternInput(){var _this2=this;if(this.props.indexPatterns.length<=1&&this.props.indexPatterns.find((function(indexPattern){return indexPattern===_this2.state.selectedIndexPattern}))){return""}var selectedIndexPattern=this.state.selectedIndexPattern;return _react2.default.createElement(_eui.EuiFlexGroup,null,_react2.default.createElement(_eui.EuiFlexItem,null,_react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.indexPatternSelectLabel",defaultMessage:"Index Pattern"})},_react2.default.createElement(IndexPatternComboBox,{placeholder:this.props.intl.formatMessage({id:"data.filter.filterBar.indexPatternSelectPlaceholder",defaultMessage:"Select an index pattern"}),options:this.props.indexPatterns,selectedOptions:selectedIndexPattern?[selectedIndexPattern]:[],getLabel:function getLabel(indexPattern){return indexPattern.title},onChange:this.onIndexPatternChange,singleSelection:{asPlainText:true},isClearable:false,"data-test-subj":"filterIndexPatternsSelect"}))))}},{key:"renderRegularEditor",value:function renderRegularEditor(){return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:2},this.renderFieldInput()),_react2.default.createElement(_eui.EuiFlexItem,{grow:false,style:{flexBasis:160}},this.renderOperatorInput())),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement("div",{"data-test-subj":"filterParams"},this.renderParamsEditor()))}},{key:"renderFieldInput",value:function renderFieldInput(){var _this$state2=this.state,selectedIndexPattern=_this$state2.selectedIndexPattern,selectedField=_this$state2.selectedField;var fields=selectedIndexPattern?(0,_filter_editor_utils.getFilterableFields)(selectedIndexPattern):[];return _react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.fieldSelectLabel",defaultMessage:"Field"})},_react2.default.createElement(FieldComboBox,{id:"fieldInput",isDisabled:!selectedIndexPattern,placeholder:this.props.intl.formatMessage({id:"data.filter.filterEditor.fieldSelectPlaceholder",defaultMessage:"Select a field first"}),options:fields,selectedOptions:selectedField?[selectedField]:[],getLabel:function getLabel(field){return field.name},onChange:this.onFieldChange,singleSelection:{asPlainText:true},isClearable:false,className:"globalFilterEditor__fieldInput","data-test-subj":"filterFieldSuggestionList"}))}},{key:"renderOperatorInput",value:function renderOperatorInput(){var _this$state3=this.state,selectedField=_this$state3.selectedField,selectedOperator=_this$state3.selectedOperator;var operators=selectedField?(0,_filter_editor_utils.getOperatorOptions)(selectedField):[];return _react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectLabel",defaultMessage:"Operator"})},_react2.default.createElement(OperatorComboBox,{isDisabled:!selectedField,placeholder:selectedField?this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectPlaceholderSelect",defaultMessage:"Select"}):this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectPlaceholderWaiting",defaultMessage:"Waiting"}),options:operators,selectedOptions:selectedOperator?[selectedOperator]:[],getLabel:function getLabel(_ref7){var message=_ref7.message;return message},onChange:this.onOperatorChange,singleSelection:{asPlainText:true},isClearable:false,"data-test-subj":"filterOperatorList"}))}},{key:"renderCustomEditor",value:function renderCustomEditor(){return _react2.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("data.filter.filterEditor.queryDslLabel",{defaultMessage:"Elasticsearch Query DSL"})},_react2.default.createElement(_eui.EuiCodeEditor,{value:this.state.queryDsl,onChange:this.onQueryDslChange,mode:"json",width:"100%",height:"250px"}))}},{key:"renderParamsEditor",value:function renderParamsEditor(){var indexPattern=this.state.selectedIndexPattern;if(!indexPattern||!this.state.selectedOperator){return""}switch(this.state.selectedOperator.type){case"exists":return"";case"phrase":return _react2.default.createElement(_phrase_value_input.PhraseValueInput,{indexPattern:indexPattern,field:this.state.selectedField,value:this.state.params,onChange:this.onParamsChange,"data-test-subj":"phraseValueInput"});case"phrases":return _react2.default.createElement(_phrases_values_input.PhrasesValuesInput,{indexPattern:indexPattern,field:this.state.selectedField,values:this.state.params,onChange:this.onParamsChange});case"range":return _react2.default.createElement(_range_value_input.RangeValueInput,{field:this.state.selectedField,value:this.state.params,onChange:this.onParamsChange})}}},{key:"isUnknownFilterType",value:function isUnknownFilterType(){var type=this.props.filter.meta.type;return!!type&&!["phrase","phrases","range","exists"].includes(type)}},{key:"getIndexPatternFromFilter",value:function getIndexPatternFromFilter(){return(0,_common.getIndexPatternFromFilter)(this.props.filter,this.props.indexPatterns)}},{key:"getFieldFromFilter",value:function getFieldFromFilter(){var indexPattern=this.getIndexPatternFromFilter();return indexPattern&&(0,_filter_editor_utils.getFieldFromFilter)(this.props.filter,indexPattern)}},{key:"getSelectedOperator",value:function getSelectedOperator(){return(0,_filter_editor_utils.getOperatorFromFilter)(this.props.filter)}},{key:"isFilterValid",value:function isFilterValid(){var _this$state4=this.state,isCustomEditorOpen=_this$state4.isCustomEditorOpen,queryDsl=_this$state4.queryDsl,indexPattern=_this$state4.selectedIndexPattern,field=_this$state4.selectedField,operator=_this$state4.selectedOperator,params=_this$state4.params;if(isCustomEditorOpen){try{return Boolean(JSON.parse(queryDsl))}catch(e){return false}}return(0,_filter_editor_utils.isFilterValid)(indexPattern,field,operator,params)}}]);return FilterEditorUI}(_react2.Component);function IndexPatternComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}function FieldComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}function OperatorComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}var FilterEditor=(0,_react.injectI18n)(FilterEditorUI);exports.FilterEditor=FilterEditor},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getFieldFromFilter=getFieldFromFilter;exports.getOperatorFromFilter=getOperatorFromFilter;exports.getFilterableFields=getFilterableFields;exports.getOperatorOptions=getOperatorOptions;exports.validateParams=validateParams;exports.isFilterValid=isFilterValid;var _datemath=_interopRequireDefault(__webpack_require__(95));var _public=__webpack_require__(34);var _filter_operators=__webpack_require__(312);var _common=__webpack_require__(52);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function getFieldFromFilter(filter,indexPattern){return indexPattern.fields.find((function(field){return field.name===filter.meta.key}))}function getOperatorFromFilter(filter){return _filter_operators.FILTER_OPERATORS.find((function(operator){return filter.meta.type===operator.type&&filter.meta.negate===operator.negate}))}function getFilterableFields(indexPattern){return indexPattern.fields.filter(_common.isFilterable)}function getOperatorOptions(field){return _filter_operators.FILTER_OPERATORS.filter((function(operator){return!operator.fieldTypes||operator.fieldTypes.includes(field.type)}))}function validateParams(params,type){switch(type){case"date":var moment=typeof params==="string"?_datemath.default.parse(params):null;return Boolean(typeof params==="string"&&moment&&moment.isValid());case"ip":try{return Boolean(new _public.Ipv4Address(params))}catch(e){return false}default:return true}}function isFilterValid(indexPattern,field,operator,params){if(!indexPattern||!field||!operator){return false}switch(operator.type){case"phrase":return validateParams(params,field.type);case"phrases":if(!Array.isArray(params)||!params.length){return false}return params.every((function(phrase){return validateParams(phrase,field.type)}));case"range":if(_typeof(params)!=="object"){return false}return validateParams(params.from,field.type)||validateParams(params.to,field.type);case"exists":return true;default:throw new Error("Unknown operator type: ".concat(operator.type))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FILTER_OPERATORS=exports.doesNotExistOperator=exports.existsOperator=exports.isNotBetweenOperator=exports.isBetweenOperator=exports.isNotOneOfOperator=exports.isOneOfOperator=exports.isNotOperator=exports.isOperator=void 0;var _i18n=__webpack_require__(1);var _filters=__webpack_require__(94);var isOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isOperatorOptionLabel",{defaultMessage:"is"}),type:_filters.FILTERS.PHRASE,negate:false};exports.isOperator=isOperator;var isNotOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isNotOperatorOptionLabel",{defaultMessage:"is not"}),type:_filters.FILTERS.PHRASE,negate:true};exports.isNotOperator=isNotOperator;var isOneOfOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isOneOfOperatorOptionLabel",{defaultMessage:"is one of"}),type:_filters.FILTERS.PHRASES,negate:false,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]};exports.isOneOfOperator=isOneOfOperator;var isNotOneOfOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isNotOneOfOperatorOptionLabel",{defaultMessage:"is not one of"}),type:_filters.FILTERS.PHRASES,negate:true,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]};exports.isNotOneOfOperator=isNotOneOfOperator;var isBetweenOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isBetweenOperatorOptionLabel",{defaultMessage:"is between"}),type:_filters.FILTERS.RANGE,negate:false,fieldTypes:["number","date","ip"]};exports.isBetweenOperator=isBetweenOperator;var isNotBetweenOperator={message:_i18n.i18n.translate("data.filter.filterEditor.isNotBetweenOperatorOptionLabel",{defaultMessage:"is not between"}),type:_filters.FILTERS.RANGE,negate:true,fieldTypes:["number","date","ip"]};exports.isNotBetweenOperator=isNotBetweenOperator;var existsOperator={message:_i18n.i18n.translate("data.filter.filterEditor.existsOperatorOptionLabel",{defaultMessage:"exists"}),type:_filters.FILTERS.EXISTS,negate:false};exports.existsOperator=existsOperator;var doesNotExistOperator={message:_i18n.i18n.translate("data.filter.filterEditor.doesNotExistOperatorOptionLabel",{defaultMessage:"does not exist"}),type:_filters.FILTERS.EXISTS,negate:true};exports.doesNotExistOperator=doesNotExistOperator;var FILTER_OPERATORS=[isOperator,isNotOperator,isOneOfOperator,isNotOneOfOperator,isBetweenOperator,isNotBetweenOperator,existsOperator,doesNotExistOperator];exports.FILTER_OPERATORS=FILTER_OPERATORS},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.PhraseSuggestor=exports.PhraseSuggestorUI=void 0;var _react=__webpack_require__(28);var _lodash=__webpack_require__(49);var _public=__webpack_require__(31);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PhraseSuggestorUI=function(_Component){_inherits(PhraseSuggestorUI,_Component);function PhraseSuggestorUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,PhraseSuggestorUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PhraseSuggestorUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"services",_this.props.kibana.services);_defineProperty(_assertThisInitialized(_this),"state",{suggestions:[],isLoading:false});_defineProperty(_assertThisInitialized(_this),"onSearchChange",(function(value){_this.updateSuggestions("".concat(value))}));_defineProperty(_assertThisInitialized(_this),"updateSuggestions",(0,_lodash.debounce)(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var query,_ref2,indexPattern,field,suggestions,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:query=_args.length>0&&_args[0]!==undefined?_args[0]:"";_ref2=_this.props,indexPattern=_ref2.indexPattern,field=_ref2.field;if(!(!field||!_this.isSuggestingValues())){_context.next=4;break}return _context.abrupt("return");case 4:_this.setState({isLoading:true});_context.next=7;return _this.services.data.autocomplete.getValueSuggestions({indexPattern:indexPattern,field:field,query:query});case 7:suggestions=_context.sent;_this.setState({suggestions:suggestions,isLoading:false});case 9:case"end":return _context.stop()}}}),_callee)})));return function(){return _ref.apply(this,arguments)}}(),500));return _this}_createClass(PhraseSuggestorUI,[{key:"componentDidMount",value:function componentDidMount(){this.updateSuggestions()}},{key:"isSuggestingValues",value:function isSuggestingValues(){var shouldSuggestValues=this.services.uiSettings.get("filterEditor:suggestValues");var field=this.props.field;return shouldSuggestValues&&field&&field.aggregatable&&field.type==="string"}}]);return PhraseSuggestorUI}(_react.Component);exports.PhraseSuggestorUI=PhraseSuggestorUI;var PhraseSuggestor=(0,_public.withKibana)(PhraseSuggestorUI);exports.PhraseSuggestor=PhraseSuggestor},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ValueInputType=void 0;var _eui=__webpack_require__(29);var _react=__webpack_require__(30);var _lodash=__webpack_require__(49);var _react2=_interopRequireWildcard(__webpack_require__(28));var _filter_editor_utils=__webpack_require__(311);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ValueInputTypeUI=function(_Component){_inherits(ValueInputTypeUI,_Component);function ValueInputTypeUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,ValueInputTypeUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ValueInputTypeUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"onBoolChange",(function(event){var boolValue=event.target.value==="true";_this.props.onChange(boolValue)}));_defineProperty(_assertThisInitialized(_this),"onChange",(function(event){var params=event.target.value;_this.props.onChange(params)}));return _this}_createClass(ValueInputTypeUI,[{key:"render",value:function render(){var value=this.props.value;var inputElement;switch(this.props.type){case"string":inputElement=_react2.default.createElement(_eui.EuiFieldText,{placeholder:this.props.placeholder,value:value,onChange:this.onChange,controlOnly:this.props.controlOnly,className:this.props.className});break;case"number":inputElement=_react2.default.createElement(_eui.EuiFieldNumber,{placeholder:this.props.placeholder,value:typeof value==="string"?parseFloat(value):value,onChange:this.onChange,controlOnly:this.props.controlOnly,className:this.props.className});break;case"date":inputElement=_react2.default.createElement(_eui.EuiFieldText,{placeholder:this.props.placeholder,value:value,onChange:this.onChange,isInvalid:!(0,_lodash.isEmpty)(value)&&!(0,_filter_editor_utils.validateParams)(value,this.props.type),controlOnly:this.props.controlOnly,className:this.props.className});break;case"ip":inputElement=_react2.default.createElement(_eui.EuiFieldText,{placeholder:this.props.placeholder,value:value,onChange:this.onChange,isInvalid:!(0,_lodash.isEmpty)(value)&&!(0,_filter_editor_utils.validateParams)(value,this.props.type),controlOnly:this.props.controlOnly,className:this.props.className});break;case"boolean":inputElement=_react2.default.createElement(_eui.EuiSelect,{options:[{value:undefined,text:this.props.placeholder},{value:"true",text:this.props.intl.formatMessage({id:"data.filter.filterEditor.trueOptionLabel",defaultMessage:"true"})},{value:"false",text:this.props.intl.formatMessage({id:"data.filter.filterEditor.falseOptionLabel",defaultMessage:"false"})}],value:value,onChange:this.onBoolChange,className:this.props.className});break;default:break}return inputElement}}]);return ValueInputTypeUI}(_react2.Component);var ValueInputType=(0,_react.injectI18n)(ValueInputTypeUI);exports.ValueInputType=ValueInputType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterLabel=FilterLabel;var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);var _filter_operators=__webpack_require__(312);var _common=__webpack_require__(52);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function FilterLabel(_ref){var filter=_ref.filter,valueLabel=_ref.valueLabel;var prefixText=filter.meta.negate?" ".concat(_i18n.i18n.translate("data.filter.filterBar.negatedFilterPrefix",{defaultMessage:"NOT "})):"";var prefix=filter.meta.negate&&!filter.meta.disabled?_react.default.createElement(_eui.EuiTextColor,{color:"danger"},prefixText):prefixText;var getValue=function getValue(text){return _react.default.createElement("span",{className:"globalFilterLabel__value"},text)};if(filter.meta.alias!==null){return _react.default.createElement(_react.Fragment,null,prefix,filter.meta.alias)}switch(filter.meta.type){case _common.FILTERS.EXISTS:return _react.default.createElement(_react.Fragment,null,prefix,filter.meta.key,": ",getValue("".concat(_filter_operators.existsOperator.message)));case _common.FILTERS.GEO_BOUNDING_BOX:return _react.default.createElement(_react.Fragment,null,prefix,filter.meta.key,": ",getValue(valueLabel));case _common.FILTERS.GEO_POLYGON:return _react.default.createElement(_react.Fragment,null,prefix,filter.meta.key,": ",getValue(valueLabel));case _common.FILTERS.PHRASES:return _react.default.createElement(_react.Fragment,null,prefix,filter.meta.key,": ",getValue("".concat(_filter_operators.isOneOfOperator.message," ").concat(valueLabel)));case _common.FILTERS.QUERY_STRING:return _react.default.createElement(_react.Fragment,null,prefix,getValue("".concat(valueLabel)));case _common.FILTERS.PHRASE:case _common.FILTERS.RANGE:return _react.default.createElement(_react.Fragment,null,prefix,filter.meta.key,": ",getValue(valueLabel));default:return _react.default.createElement(_react.Fragment,null,prefix,getValue("".concat(JSON.stringify(filter.query)||filter.meta.value)))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FilterManager",{enumerable:true,get:function get(){return _filter_manager.FilterManager}});Object.defineProperty(exports,"mapAndFlattenFilters",{enumerable:true,get:function get(){return _map_and_flatten_filters.mapAndFlattenFilters}});Object.defineProperty(exports,"onlyDisabledFiltersChanged",{enumerable:true,get:function get(){return _only_disabled.onlyDisabledFiltersChanged}});Object.defineProperty(exports,"generateFilters",{enumerable:true,get:function get(){return _generate_filters.generateFilters}});var _filter_manager=__webpack_require__(650);var _map_and_flatten_filters=__webpack_require__(317);var _only_disabled=__webpack_require__(318);var _generate_filters=__webpack_require__(665)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapAndFlattenFilters=void 0;var _lodash=__webpack_require__(49);var _map_filter=__webpack_require__(652);var mapAndFlattenFilters=function mapAndFlattenFilters(filters){return(0,_lodash.compact)((0,_lodash.flatten)(filters)).map((function(item){return(0,_map_filter.mapFilter)(item)}))};exports.mapAndFlattenFilters=mapAndFlattenFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.onlyDisabledFiltersChanged=void 0;var _lodash=__webpack_require__(49);var _common=__webpack_require__(52);var isEnabled=function isEnabled(f){return f&&f.meta&&!f.meta.disabled};var onlyDisabledFiltersChanged=function onlyDisabledFiltersChanged(newFilters,oldFilters){var newEnabledFilters=(0,_lodash.filter)(newFilters||[],isEnabled);var oldEnabledFilters=(0,_lodash.filter)(oldFilters||[],isEnabled);return(0,_common.compareFilters)(oldEnabledFilters,newEnabledFilters,_common.COMPARE_ALL_OPTIONS)};exports.onlyDisabledFiltersChanged=onlyDisabledFiltersChanged},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calculateBounds=calculateBounds;exports.getTime=getTime;var _datemath=_interopRequireDefault(__webpack_require__(95));var _common=__webpack_require__(52);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function calculateBounds(timeRange){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return{min:_datemath.default.parse(timeRange.from,{forceNow:options.forceNow}),max:_datemath.default.parse(timeRange.to,{roundUp:true,forceNow:options.forceNow})}}function getTime(indexPattern,timeRange,forceNow){if(!indexPattern){return}var timefield=indexPattern.fields.find((function(field){return field.name===indexPattern.timeFieldName}));if(!timefield){return}var bounds=calculateBounds(timeRange,{forceNow:forceNow});if(!bounds){return}return(0,_common.buildRangeFilter)(timefield,_objectSpread({},bounds.min&&{gte:bounds.min.toISOString()},{},bounds.max&&{lte:bounds.max.toISOString()},{format:"strict_date_optional_time"}),indexPattern)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSavedQueryService=void 0;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var createSavedQueryService=function createSavedQueryService(savedObjectsClient){var saveQuery=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(attributes){var _ref2,_ref2$overwrite,overwrite,query,queryObject,rawQueryResponse,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref2=_args.length>1&&_args[1]!==undefined?_args[1]:{},_ref2$overwrite=_ref2.overwrite,overwrite=_ref2$overwrite===void 0?false:_ref2$overwrite;if(attributes.title.length){_context.next=3;break}throw new Error("Cannot create saved query without a title");case 3:query={query:typeof attributes.query.query==="string"?attributes.query.query:JSON.stringify(attributes.query.query),language:attributes.query.language};queryObject={title:attributes.title.trim(),description:attributes.description,query:query};if(attributes.filters){queryObject.filters=attributes.filters}if(attributes.timefilter){queryObject.timefilter=attributes.timefilter}if(overwrite){_context.next=13;break}_context.next=10;return savedObjectsClient.create("query",queryObject,{id:attributes.title});case 10:rawQueryResponse=_context.sent;_context.next=16;break;case 13:_context.next=15;return savedObjectsClient.create("query",queryObject,{id:attributes.title,overwrite:true});case 15:rawQueryResponse=_context.sent;case 16:if(!rawQueryResponse.error){_context.next=18;break}throw new Error(rawQueryResponse.error.message);case 18:return _context.abrupt("return",parseSavedQueryObject(rawQueryResponse));case 19:case"end":return _context.stop()}}}),_callee)})));return function saveQuery(_x){return _ref.apply(this,arguments)}}();var getAllSavedQueries=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var count,response;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getSavedQueryCount();case 2:count=_context2.sent;_context2.next=5;return savedObjectsClient.find({type:"query",perPage:count,page:1});case 5:response=_context2.sent;return _context2.abrupt("return",response.savedObjects.map((function(savedObject){return parseSavedQueryObject(savedObject)})));case 7:case"end":return _context2.stop()}}}),_callee2)})));return function getAllSavedQueries(){return _ref3.apply(this,arguments)}}();var findSavedQueries=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var searchText,perPage,activePage,response,_args3=arguments;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:searchText=_args3.length>0&&_args3[0]!==undefined?_args3[0]:"";perPage=_args3.length>1&&_args3[1]!==undefined?_args3[1]:50;activePage=_args3.length>2&&_args3[2]!==undefined?_args3[2]:1;_context3.next=5;return savedObjectsClient.find({type:"query",search:searchText,searchFields:["title^5","description"],sortField:"_score",perPage:perPage,page:activePage});case 5:response=_context3.sent;return _context3.abrupt("return",{total:response.total,queries:response.savedObjects.map((function(savedObject){return parseSavedQueryObject(savedObject)}))});case 7:case"end":return _context3.stop()}}}),_callee3)})));return function findSavedQueries(){return _ref4.apply(this,arguments)}}();var getSavedQuery=function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(id){var savedObject;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return savedObjectsClient.get("query",id);case 2:savedObject=_context4.sent;if(!savedObject.error){_context4.next=5;break}throw new Error(savedObject.error.message);case 5:return _context4.abrupt("return",parseSavedQueryObject(savedObject));case 6:case"end":return _context4.stop()}}}),_callee4)})));return function getSavedQuery(_x2){return _ref5.apply(this,arguments)}}();var deleteSavedQuery=function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(id){return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return savedObjectsClient.delete("query",id);case 2:return _context5.abrupt("return",_context5.sent);case 3:case"end":return _context5.stop()}}}),_callee5)})));return function deleteSavedQuery(_x3){return _ref6.apply(this,arguments)}}();var parseSavedQueryObject=function parseSavedQueryObject(savedQuery){var queryString;try{queryString=JSON.parse(savedQuery.attributes.query.query)}catch(error){queryString=savedQuery.attributes.query.query}var savedQueryItems={title:savedQuery.attributes.title||"",description:savedQuery.attributes.description||"",query:{query:queryString,language:savedQuery.attributes.query.language}};if(savedQuery.attributes.filters){savedQueryItems.filters=savedQuery.attributes.filters}if(savedQuery.attributes.timefilter){savedQueryItems.timefilter=savedQuery.attributes.timefilter}return{id:savedQuery.id,attributes:savedQueryItems}};var getSavedQueryCount=function(){var _ref7=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(){var response;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return savedObjectsClient.find({type:"query",perPage:0,page:1});case 2:response=_context6.sent;return _context6.abrupt("return",response.total);case 4:case"end":return _context6.stop()}}}),_callee6)})));return function getSavedQueryCount(){return _ref7.apply(this,arguments)}}();return{saveQuery:saveQuery,getAllSavedQueries:getAllSavedQueries,findSavedQueries:findSavedQueries,getSavedQuery:getSavedQuery,deleteSavedQuery:deleteSavedQuery,getSavedQueryCount:getSavedQueryCount}};exports.createSavedQueryService=createSavedQueryService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.connectToQueryState=void 0;var _operators=__webpack_require__(6);var _lodash=_interopRequireDefault(__webpack_require__(49));var _common=__webpack_require__(52);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var connectToQueryState=function connectToQueryState(_ref,stateContainer,syncConfig){var timefilter=_ref.timefilter.timefilter,filterManager=_ref.filterManager,state$=_ref.state$;var syncKeys=[];if(syncConfig.time){syncKeys.push("time")}if(syncConfig.refreshInterval){syncKeys.push("refreshInterval")}if(syncConfig.filters){switch(syncConfig.filters){case true:syncKeys.push("filters");break;case _common.FilterStateStore.APP_STATE:syncKeys.push("appFilters");break;case _common.FilterStateStore.GLOBAL_STATE:syncKeys.push("globalFilters");break}}var initialState=_objectSpread({},stateContainer.get());var initialDirty=false;if(syncConfig.time&&!_lodash.default.isEqual(initialState.time,timefilter.getTime())){initialState.time=timefilter.getTime();initialDirty=true}if(syncConfig.refreshInterval&&!_lodash.default.isEqual(initialState.refreshInterval,timefilter.getRefreshInterval())){initialState.refreshInterval=timefilter.getRefreshInterval();initialDirty=true}if(syncConfig.filters){if(syncConfig.filters===true){if(!initialState.filters||!(0,_common.compareFilters)(initialState.filters,filterManager.getFilters(),_common.COMPARE_ALL_OPTIONS)){initialState.filters=filterManager.getFilters();initialDirty=true}}else if(syncConfig.filters===_common.FilterStateStore.GLOBAL_STATE){if(!initialState.filters||!(0,_common.compareFilters)(initialState.filters,filterManager.getGlobalFilters(),_common.COMPARE_ALL_OPTIONS)){initialState.filters=filterManager.getGlobalFilters();initialDirty=true}}else if(syncConfig.filters===_common.FilterStateStore.APP_STATE){if(!initialState.filters||!(0,_common.compareFilters)(initialState.filters,filterManager.getAppFilters(),_common.COMPARE_ALL_OPTIONS)){initialState.filters=filterManager.getAppFilters();initialDirty=true}}}if(initialDirty){stateContainer.set(_objectSpread({},stateContainer.get(),{},initialState))}var updateInProgress=false;var subs=[state$.pipe((0,_operators.filter)((function(_ref2){var changes=_ref2.changes,state=_ref2.state;if(updateInProgress)return false;return syncKeys.some((function(syncKey){return changes[syncKey]}))})),(0,_operators.map)((function(_ref3){var changes=_ref3.changes;var newState={};if(syncConfig.time&&changes.time){newState.time=timefilter.getTime()}if(syncConfig.refreshInterval&&changes.refreshInterval){newState.refreshInterval=timefilter.getRefreshInterval()}if(syncConfig.filters){if(syncConfig.filters===true&&changes.filters){newState.filters=filterManager.getFilters()}else if(syncConfig.filters===_common.FilterStateStore.GLOBAL_STATE&&changes.globalFilters){newState.filters=filterManager.getGlobalFilters()}else if(syncConfig.filters===_common.FilterStateStore.APP_STATE&&changes.appFilters){newState.filters=filterManager.getAppFilters()}}return newState}))).subscribe((function(newState){stateContainer.set(_objectSpread({},stateContainer.get(),{},newState))})),stateContainer.state$.subscribe((function(state){updateInProgress=true;if(syncConfig.time){var time=state.time||timefilter.getTimeDefaults();if(!_lodash.default.isEqual(time,timefilter.getTime())){timefilter.setTime(_lodash.default.cloneDeep(time))}}if(syncConfig.refreshInterval){var refreshInterval=state.refreshInterval||timefilter.getRefreshIntervalDefaults();if(!_lodash.default.isEqual(refreshInterval,timefilter.getRefreshInterval())){timefilter.setRefreshInterval(_lodash.default.cloneDeep(refreshInterval))}}if(syncConfig.filters){var filters=state.filters||[];if(syncConfig.filters===true){if(!(0,_common.compareFilters)(filters,filterManager.getFilters(),_common.COMPARE_ALL_OPTIONS)){filterManager.setFilters(_lodash.default.cloneDeep(filters))}}else if(syncConfig.filters===_common.FilterStateStore.APP_STATE){if(!(0,_common.compareFilters)(filters,filterManager.getAppFilters(),_common.COMPARE_ALL_OPTIONS)){filterManager.setAppFilters(_lodash.default.cloneDeep(filters))}}else if(syncConfig.filters===_common.FilterStateStore.GLOBAL_STATE){if(!(0,_common.compareFilters)(filters,filterManager.getGlobalFilters(),_common.COMPARE_ALL_OPTIONS)){filterManager.setGlobalFilters(_lodash.default.cloneDeep(filters))}}}updateInProgress=false}))];return function(){subs.forEach((function(s){return s.unsubscribe()}))}};exports.connectToQueryState=connectToQueryState},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FieldFormatsService",{enumerable:true,get:function get(){return _field_formats_service.FieldFormatsService}});Object.defineProperty(exports,"FieldFormatsSetup",{enumerable:true,get:function get(){return _field_formats_service.FieldFormatsSetup}});Object.defineProperty(exports,"FieldFormatsStart",{enumerable:true,get:function get(){return _field_formats_service.FieldFormatsStart}});Object.defineProperty(exports,"DateFormat",{enumerable:true,get:function get(){return _converters.DateFormat}});Object.defineProperty(exports,"baseFormattersPublic",{enumerable:true,get:function get(){return _constants.baseFormattersPublic}});var _field_formats_service=__webpack_require__(683);var _converters=__webpack_require__(685);var _constants=__webpack_require__(323)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.baseFormattersPublic=void 0;var _common=__webpack_require__(52);var _date=__webpack_require__(324);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var baseFormattersPublic=[_date.DateFormat].concat(_toConsumableArray(_common.baseFormatters));exports.baseFormattersPublic=baseFormattersPublic},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DateFormat=void 0;var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(49);var _moment=_interopRequireDefault(__webpack_require__(32));var _common=__webpack_require__(52);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DateFormat=function(_FieldFormat){_inherits(DateFormat,_FieldFormat);function DateFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,DateFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DateFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"memoizedConverter",_lodash.noop);_defineProperty(_assertThisInitialized(_this),"memoizedPattern","");_defineProperty(_assertThisInitialized(_this),"timeZone","");_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){var pattern=_this.param("pattern");var timezone=_this.param("timezone");var timezoneChanged=_this.timeZone!==timezone;var datePatternChanged=_this.memoizedPattern!==pattern;if(timezoneChanged||datePatternChanged){_this.timeZone=timezone;_this.memoizedPattern=pattern;_this.memoizedConverter=(0,_lodash.memoize)((function converter(value){if(value===null||value===undefined){return"-"}var date=(0,_moment.default)(value);if(date.isValid()){return date.format(pattern)}else{return value}}))}return _this.memoizedConverter(val)}));return _this}_createClass(DateFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{pattern:this.getConfig("dateFormat"),timezone:this.getConfig("dateFormat:tz")}}}]);return DateFormat}(_common.FieldFormat);exports.DateFormat=DateFormat;_defineProperty(DateFormat,"id",_common.FIELD_FORMAT_IDS.DATE);_defineProperty(DateFormat,"title",_i18n.i18n.translate("data.fieldFormats.date.title",{defaultMessage:"Date"}));_defineProperty(DateFormat,"fieldType",_common.KBN_FIELD_TYPES.DATE)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ILLEGAL_CHARACTERS=exports.ILLEGAL_CHARACTERS_VISIBLE=exports.CONTAINS_SPACES_KEY=exports.ILLEGAL_CHARACTERS_KEY=void 0;var ILLEGAL_CHARACTERS_KEY="ILLEGAL_CHARACTERS";exports.ILLEGAL_CHARACTERS_KEY=ILLEGAL_CHARACTERS_KEY;var CONTAINS_SPACES_KEY="CONTAINS_SPACES";exports.CONTAINS_SPACES_KEY=CONTAINS_SPACES_KEY;var ILLEGAL_CHARACTERS_VISIBLE=["\\","/","?",'"',"<",">","|"];exports.ILLEGAL_CHARACTERS_VISIBLE=ILLEGAL_CHARACTERS_VISIBLE;var ILLEGAL_CHARACTERS=ILLEGAL_CHARACTERS_VISIBLE.concat(" ");exports.ILLEGAL_CHARACTERS=ILLEGAL_CHARACTERS},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.findByTitle=findByTitle;exports.getRoutes=getRoutes;var _lodash=__webpack_require__(49);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function findByTitle(_x,_x2){return _findByTitle.apply(this,arguments)}function _findByTitle(){_findByTitle=_asyncToGenerator(regeneratorRuntime.mark((function _callee(client,title){var _ref,savedObjects;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(title){_context.next=2;break}return _context.abrupt("return",Promise.resolve());case 2:_context.next=4;return client.find({type:"index-pattern",perPage:10,search:'"'.concat(title,'"'),searchFields:["title"],fields:["title"]});case 4:_ref=_context.sent;savedObjects=_ref.savedObjects;return _context.abrupt("return",(0,_lodash.find)(savedObjects,(function(obj){return obj.get("title").toLowerCase()===title.toLowerCase()})));case 7:case"end":return _context.stop()}}}),_callee)})));return _findByTitle.apply(this,arguments)}function getRoutes(){return{edit:"/management/kibana/index_patterns/{{id}}",addField:"/management/kibana/index_patterns/{{id}}/create-field",indexedFields:"/management/kibana/index_patterns/{{id}}?_a=(tab:indexedFields)",scriptedFields:"/management/kibana/index_patterns/{{id}}?_a=(tab:scriptedFields)",sourceFilters:"/management/kibana/index_patterns/{{id}}?_a=(tab:sourceFilters)"}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.flattenHitWrapper=flattenHitWrapper;exports.createFlattenHitWrapper=createFlattenHitWrapper;var _lodash=_interopRequireDefault(__webpack_require__(49));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function flattenHit(indexPattern,hit,deep){var flat={};var fields=indexPattern.fields.getByName;(function flatten(obj){var keyPrefix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";keyPrefix=keyPrefix?keyPrefix+".":"";_lodash.default.forOwn(obj,(function(val,key){key=keyPrefix+key;if(deep){var _field=fields(key);var isNestedField=_field&&_field.type==="nested";var isArrayOfObjects=Array.isArray(val)&&_lodash.default.isPlainObject(_lodash.default.first(val));if(isArrayOfObjects&&!isNestedField){_lodash.default.each(val,(function(v){return flatten(v,key)}));return}}else if(flat[key]!==void 0){return}var field=fields(key);var hasValidMapping=field&&field.type!=="conflict";var isValue=!_lodash.default.isPlainObject(val);if(hasValidMapping||isValue){if(!flat[key]){flat[key]=val}else if(Array.isArray(flat[key])){flat[key].push(val)}else{flat[key]=[flat[key],val]}return}flatten(val,key)}))})(hit._source);return flat}function decorateFlattenedWrapper(hit,metaFields){return function(flattened){_lodash.default.each(metaFields,(function(meta){if(meta==="_source")return;flattened[meta]=hit[meta]}));_lodash.default.forOwn(hit.fields,(function(val,key){if(key[0]==="_"&&!_lodash.default.contains(metaFields,key))return;flattened[key]=Array.isArray(val)&&val.length===1?val[0]:val}));return flattened}}function flattenHitWrapper(indexPattern){var metaFields=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var cache=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new WeakMap;return function cachedFlatten(hit){var deep=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var decorateFlattened=decorateFlattenedWrapper(hit,metaFields);var cached=cache.get(hit);var flattened=cached||flattenHit(indexPattern,hit,deep);if(!cached){cache.set(hit,_objectSpread({},flattened))}return decorateFlattened(flattened)}}function createFlattenHitWrapper(){var cache=new WeakMap;return _lodash.default.partial(flattenHitWrapper,_lodash.default,_lodash.default,cache)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatHitProvider=formatHitProvider;var _lodash=_interopRequireDefault(__webpack_require__(49));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var formattedCache=new WeakMap;var partialFormattedCache=new WeakMap;function formatHitProvider(indexPattern,defaultFormat){function convert(hit,val,fieldName){var type=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"html";var field=indexPattern.fields.getByName(fieldName);var format=field?field.format:defaultFormat;return format.convert(val,type,{field:field,hit:hit})}function formatHit(hit){var type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"html";if(type==="text"){var flattened=indexPattern.flattenHit(hit);var result={};for(var _i=0,_Object$entries=Object.entries(flattened);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];result[key]=convert(hit,value,key,type)}return result}var cached=formattedCache.get(hit);if(cached){return cached}var partials=partialFormattedCache.get(hit)||{};partialFormattedCache.set(hit,partials);var cache={};formattedCache.set(hit,cache);_lodash.default.forOwn(indexPattern.flattenHit(hit),(function(val,fieldName){if(!fieldName){return}var formatted=partials[fieldName]==null?convert(hit,val,fieldName):partials[fieldName];cache[fieldName]=partials[fieldName]=formatted}));return cache}formatHit.formatField=function(hit,fieldName){var partials=partialFormattedCache.get(hit);if(partials&&partials[fieldName]!=null){return partials[fieldName]}if(!partials){partials={};partialFormattedCache.set(hit,partials)}var val=fieldName==="_source"?hit._source:indexPattern.flattenHit(hit)[fieldName];return convert(hit,val,fieldName)};return formatHit}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPattern=void 0;var _lodash=_interopRequireWildcard(__webpack_require__(49));var _i18n=__webpack_require__(1);var _react=__webpack_require__(30);var _eui=__webpack_require__(29);var _react2=_interopRequireDefault(__webpack_require__(28));var _public=__webpack_require__(34);var _public2=__webpack_require__(31);var _common=__webpack_require__(52);var _utils=__webpack_require__(326);var _lib=__webpack_require__(173);var _fields=__webpack_require__(330);var _fields_fetcher=__webpack_require__(694);var _format_hit=__webpack_require__(328);var _flatten_hit=__webpack_require__(327);var _services=__webpack_require__(61);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MAX_ATTEMPTS_TO_RESOLVE_CONFLICTS=3;var type="index-pattern";var IndexPattern=function(){function IndexPattern(id,getConfig,savedObjectsClient,apiClient,patternCache){var _this=this;_classCallCheck(this,IndexPattern);_defineProperty(this,"id",void 0);_defineProperty(this,"title","");_defineProperty(this,"type",void 0);_defineProperty(this,"fieldFormatMap",void 0);_defineProperty(this,"typeMeta",void 0);_defineProperty(this,"fields",void 0);_defineProperty(this,"timeFieldName",void 0);_defineProperty(this,"intervalName",void 0);_defineProperty(this,"formatHit",void 0);_defineProperty(this,"formatField",void 0);_defineProperty(this,"flattenHit",void 0);_defineProperty(this,"metaFields",void 0);_defineProperty(this,"version",void 0);_defineProperty(this,"savedObjectsClient",void 0);_defineProperty(this,"patternCache",void 0);_defineProperty(this,"getConfig",void 0);_defineProperty(this,"sourceFilters",void 0);_defineProperty(this,"originalBody",{});_defineProperty(this,"fieldsFetcher",void 0);_defineProperty(this,"shortDotsEnable",false);_defineProperty(this,"mapping",(0,_public.expandShorthand)({title:_common.ES_FIELD_TYPES.TEXT,timeFieldName:_common.ES_FIELD_TYPES.KEYWORD,intervalName:_common.ES_FIELD_TYPES.KEYWORD,fields:"json",sourceFilters:"json",fieldFormatMap:{type:_common.ES_FIELD_TYPES.TEXT,_serialize:function _serialize(){var map=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var serialized=_lodash.default.transform(map,_this.serializeFieldFormatMap);return _lodash.default.isEmpty(serialized)?undefined:JSON.stringify(serialized)},_deserialize:function _deserialize(){var map=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"{}";return _lodash.default.mapValues(JSON.parse(map),(function(mapping){return _this.deserializeFieldFormatMap(mapping)}))}},type:_common.ES_FIELD_TYPES.KEYWORD,typeMeta:"json"}));this.id=id;this.savedObjectsClient=savedObjectsClient;this.patternCache=patternCache;this.getConfig=getConfig;this.shortDotsEnable=this.getConfig("shortDots:enable");this.metaFields=this.getConfig("metaFields");this.fields=new _fields.FieldList(this,[],this.shortDotsEnable);this.fieldsFetcher=(0,_fields_fetcher.createFieldsFetcher)(this,apiClient,this.getConfig("metaFields"));this.flattenHit=(0,_flatten_hit.flattenHitWrapper)(this,this.getConfig("metaFields"));this.formatHit=(0,_format_hit.formatHitProvider)(this,(0,_services.getFieldFormats)().getDefaultInstance(_common.KBN_FIELD_TYPES.STRING));this.formatField=this.formatHit.formatField}_createClass(IndexPattern,[{key:"serializeFieldFormatMap",value:function serializeFieldFormatMap(flat,format,field){if(format&&field){flat[field]=format}}},{key:"deserializeFieldFormatMap",value:function deserializeFieldFormatMap(mapping){var FieldFormat=(0,_services.getFieldFormats)().getType(mapping.id);return FieldFormat&&new FieldFormat(mapping.params,this.getConfig)}},{key:"initFields",value:function initFields(input){var newValue=input||this.fields;this.fields=new _fields.FieldList(this,newValue,this.shortDotsEnable)}},{key:"isFieldRefreshRequired",value:function isFieldRefreshRequired(){if(!this.fields){return true}return this.fields.every((function(field){var hasFieldCaps="aggregatable"in field&&"searchable"in field;var hasDocValuesFlag="readFromDocValues"in field;return!hasFieldCaps||!hasDocValuesFlag}))}},{key:"indexFields",value:function(){var _indexFields=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var forceFieldRefresh,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:forceFieldRefresh=_args.length>0&&_args[0]!==undefined?_args[0]:false;if(this.id){_context.next=3;break}return _context.abrupt("return");case 3:if(!(forceFieldRefresh||this.isFieldRefreshRequired())){_context.next=6;break}_context.next=6;return this.refreshFields();case 6:this.initFields();case 7:case"end":return _context.stop()}}}),_callee,this)})));function indexFields(){return _indexFields.apply(this,arguments)}return indexFields}()},{key:"updateFromElasticSearch",value:function(){var _updateFromElasticSearch=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(response){var forceFieldRefresh,warningTitle,warningText,editUrlTemplate,editUrl,_getNotifications,toasts,_args2=arguments;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:forceFieldRefresh=_args2.length>1&&_args2[1]!==undefined?_args2[1]:false;if(response.found){_context2.next=3;break}throw new _public.SavedObjectNotFound(type,this.id,"#/management/kibana/index_pattern");case 3:_lodash.default.forOwn(this.mapping,(function(fieldMapping,name){if(!fieldMapping._deserialize||!name){return}response._source[name]=fieldMapping._deserialize(response._source[name])}));_lodash.default.assign(this,response._source);if(!this.title&&this.id){this.title=this.id}if(this.isUnsupportedTimePattern()){warningTitle=_i18n.i18n.translate("data.indexPatterns.warningTitle",{defaultMessage:"Support for time interval index patterns removed"});warningText=_i18n.i18n.translate("data.indexPatterns.warningText",{defaultMessage:"Currently querying all indices matching {index}. {title} should be migrated to a wildcard-based index pattern.",values:{title:this.title,index:this.getIndex()}});editUrlTemplate=(0,_utils.getRoutes)().edit;editUrl="/app/kibana#"+editUrlTemplate.replace("{{id}}",this.id);_getNotifications=(0,_services.getNotifications)(),toasts=_getNotifications.toasts;toasts.addWarning({title:warningTitle,text:(0,_public2.toMountPoint)(_react2.default.createElement("div",null,_react2.default.createElement("p",null,warningText),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{size:"s",href:(0,_services.getHttp)().basePath.prepend(editUrl)},_react2.default.createElement(_react.FormattedMessage,{id:"data.indexPatterns.editIndexPattern",defaultMessage:"Edit index pattern"}))))))})}return _context2.abrupt("return",this.indexFields(forceFieldRefresh));case 8:case"end":return _context2.stop()}}}),_callee2,this)})));function updateFromElasticSearch(_x){return _updateFromElasticSearch.apply(this,arguments)}return updateFromElasticSearch}()},{key:"getComputedFields",value:function getComputedFields(){var scriptFields={};if(!this.fields){return{storedFields:["*"],scriptFields:scriptFields,docvalueFields:[]}}var docvalueFields=(0,_lodash.reject)(this.fields.getByType("date"),"scripted").map((function(dateField){return{field:dateField.name,format:dateField.esTypes&&dateField.esTypes.indexOf("date_nanos")!==-1?"strict_date_time":"date_time"}}));(0,_lodash.each)(this.getScriptedFields(),(function(field){scriptFields[field.name]={script:{source:field.script,lang:field.lang}}}));return{storedFields:["*"],scriptFields:scriptFields,docvalueFields:docvalueFields}}},{key:"init",value:function(){var _init=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var forceFieldRefresh,savedObject,response,_args3=arguments;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:forceFieldRefresh=_args3.length>0&&_args3[0]!==undefined?_args3[0]:false;if(this.id){_context3.next=3;break}return _context3.abrupt("return",this);case 3:_context3.next=5;return this.savedObjectsClient.get(type,this.id);case 5:savedObject=_context3.sent;this.version=savedObject._version;response={_id:savedObject.id,_type:savedObject.type,_source:_lodash.default.cloneDeep(savedObject.attributes),found:savedObject._version?true:false};this.originalBody=this.prepBody();_context3.next=11;return this.updateFromElasticSearch(response,forceFieldRefresh);case 11:this.originalBody=this.prepBody();return _context3.abrupt("return",this);case 13:case"end":return _context3.stop()}}}),_callee3,this)})));function init(){return _init.apply(this,arguments)}return init}()},{key:"migrate",value:function migrate(newTitle){var _this2=this;return this.savedObjectsClient.update(type,this.id,{title:newTitle,intervalName:null}).then((function(_ref){var _ref$attributes=_ref.attributes,title=_ref$attributes.title,intervalName=_ref$attributes.intervalName;_this2.title=title;_this2.intervalName=intervalName})).then((function(){return _this2}))}},{key:"getSourceFiltering",value:function getSourceFiltering(){return{excludes:this.sourceFilters&&this.sourceFilters.map((function(filter){return filter.value}))||[]}}},{key:"addScriptedField",value:function(){var _addScriptedField=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(name,script){var fieldType,lang,scriptedFields,names,_args4=arguments;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:fieldType=_args4.length>2&&_args4[2]!==undefined?_args4[2]:"string";lang=_args4.length>3?_args4[3]:undefined;scriptedFields=this.getScriptedFields();names=_lodash.default.pluck(scriptedFields,"name");if(!_lodash.default.contains(names,name)){_context4.next=6;break}throw new _public.DuplicateField(name);case 6:this.fields.add(new _fields.Field(this,{name:name,script:script,fieldType:fieldType,scripted:true,lang:lang,aggregatable:true,filterable:true,searchable:true},false));_context4.next=9;return this.save();case 9:case"end":return _context4.stop()}}}),_callee4,this)})));function addScriptedField(_x2,_x3){return _addScriptedField.apply(this,arguments)}return addScriptedField}()},{key:"removeScriptedField",value:function removeScriptedField(field){this.fields.remove(field);return this.save()}},{key:"popularizeField",value:function(){var _popularizeField=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(fieldName){var unit,field,count,_args5=arguments;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:unit=_args5.length>1&&_args5[1]!==undefined?_args5[1]:1;field=this.fields.getByName(fieldName);if(field){_context5.next=4;break}return _context5.abrupt("return");case 4:count=Math.max((field.count||0)+unit,0);if(!(field.count===count)){_context5.next=7;break}return _context5.abrupt("return");case 7:field.count=count;_context5.next=10;return this.save();case 10:case"end":return _context5.stop()}}}),_callee5,this)})));function popularizeField(_x4){return _popularizeField.apply(this,arguments)}return popularizeField}()},{key:"getNonScriptedFields",value:function getNonScriptedFields(){return _lodash.default.where(this.fields,{scripted:false})}},{key:"getScriptedFields",value:function getScriptedFields(){return _lodash.default.where(this.fields,{scripted:true})}},{key:"getIndex",value:function getIndex(){if(!this.isUnsupportedTimePattern()){return this.title}var regex=/\[[^\]]*]/g;var splits=this.title.split(regex);var matches=this.title.match(regex)||[];return splits.map((function(split,i){var match=i>=matches.length?"":matches[i].replace(/[\[\]]/g,"");return"".concat(split.length?"*":"").concat(match)})).join("")}},{key:"isUnsupportedTimePattern",value:function isUnsupportedTimePattern(){return!!this.intervalName}},{key:"isTimeBased",value:function isTimeBased(){return!!this.timeFieldName&&(!this.fields||!!this.getTimeField())}},{key:"isTimeNanosBased",value:function isTimeNanosBased(){var timeField=this.getTimeField();return timeField&&timeField.esTypes&&timeField.esTypes.indexOf("date_nanos")!==-1}},{key:"isTimeBasedWildcard",value:function isTimeBasedWildcard(){return this.isTimeBased()&&this.isWildcard()}},{key:"getTimeField",value:function getTimeField(){if(!this.timeFieldName||!this.fields||!this.fields.getByName)return;return this.fields.getByName(this.timeFieldName)}},{key:"getFieldByName",value:function getFieldByName(name){if(!this.fields||!this.fields.getByName)return;return this.fields.getByName(name)}},{key:"getAggregationRestrictions",value:function getAggregationRestrictions(){var _this$typeMeta;return(_this$typeMeta=this.typeMeta)===null||_this$typeMeta===void 0?void 0:_this$typeMeta.aggs}},{key:"isWildcard",value:function isWildcard(){return _lodash.default.includes(this.title,"*")}},{key:"prepBody",value:function prepBody(){var _this3=this;var body={};_lodash.default.forOwn(this.mapping,(function(fieldMapping,fieldName){if(!fieldName||_this3[fieldName]==null)return;body[fieldName]=fieldMapping._serialize?fieldMapping._serialize(_this3[fieldName]):_this3[fieldName]}));return body}},{key:"create",value:function(){var _create2=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(){var _this4=this;var allowOverride,_create,potentialDuplicateByTitle,_args7=arguments;return regeneratorRuntime.wrap((function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:allowOverride=_args7.length>0&&_args7[0]!==undefined?_args7[0]:false;_create=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(duplicateId){var duplicatePattern,body,response;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!duplicateId){_context6.next=4;break}duplicatePattern=new IndexPattern(duplicateId,_this4.getConfig,_this4.savedObjectsClient,_this4.patternCache,_this4.fieldsFetcher);_context6.next=4;return duplicatePattern.destroy();case 4:body=_this4.prepBody();_context6.next=7;return _this4.savedObjectsClient.create(type,body,{id:_this4.id});case 7:response=_context6.sent;_this4.id=response.id;return _context6.abrupt("return",response.id);case 10:case"end":return _context6.stop()}}}),_callee6)})));return function _create(_x5){return _ref2.apply(this,arguments)}}();_context7.next=4;return(0,_utils.findByTitle)(this.savedObjectsClient,this.title);case 4:potentialDuplicateByTitle=_context7.sent;if(potentialDuplicateByTitle){_context7.next=9;break}_context7.next=8;return _create();case 8:return _context7.abrupt("return",_context7.sent);case 9:if(allowOverride){_context7.next=11;break}return _context7.abrupt("return",false);case 11:_context7.next=13;return _create(potentialDuplicateByTitle.id);case 13:return _context7.abrupt("return",_context7.sent);case 14:case"end":return _context7.stop()}}}),_callee7,this)})));function create(){return _create2.apply(this,arguments)}return create}()},{key:"save",value:function(){var _save=_asyncToGenerator(regeneratorRuntime.mark((function _callee8(){var _this5=this;var saveAttempts,body,originalChangedKeys,_args8=arguments;return regeneratorRuntime.wrap((function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:saveAttempts=_args8.length>0&&_args8[0]!==undefined?_args8[0]:0;if(this.id){_context8.next=3;break}return _context8.abrupt("return");case 3:body=this.prepBody();originalChangedKeys=Object.keys(body).filter((function(key){return body[key]!==_this5.originalBody[key]}));return _context8.abrupt("return",this.savedObjectsClient.update(type,this.id,body,{version:this.version}).then((function(resp){_this5.id=resp.id;_this5.version=resp._version})).catch((function(err){if(_lodash.default.get(err,"res.status")===409&&saveAttempts++<MAX_ATTEMPTS_TO_RESOLVE_CONFLICTS){var samePattern=new IndexPattern(_this5.id,_this5.getConfig,_this5.savedObjectsClient,_this5.patternCache,_this5.fieldsFetcher);return samePattern.init().then((function(){var updatedBody=samePattern.prepBody();var serverChangedKeys=Object.keys(updatedBody).filter((function(key){return updatedBody[key]!==body[key]&&_this5.originalBody[key]!==updatedBody[key]}));var unresolvedCollision=false;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=originalChangedKeys[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var originalKey=_step.value;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=serverChangedKeys[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var serverKey=_step2.value;if(originalKey===serverKey){unresolvedCollision=true;break}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return!=null){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}if(unresolvedCollision){var message=_i18n.i18n.translate("data.indexPatterns.unableWriteLabel",{defaultMessage:"Unable to write index pattern! Refresh the page to get the most up to date changes for this index pattern."});var _getNotifications2=(0,_services.getNotifications)(),toasts=_getNotifications2.toasts;toasts.addDanger(message);throw err}serverChangedKeys.forEach((function(key){_this5[key]=samePattern[key]}));_this5.version=samePattern.version;_this5.patternCache.clear(_this5.id);return _this5.save(saveAttempts)}))}throw err})));case 6:case"end":return _context8.stop()}}}),_callee8,this)})));function save(){return _save.apply(this,arguments)}return save}()},{key:"_fetchFields",value:function(){var _fetchFields2=_asyncToGenerator(regeneratorRuntime.mark((function _callee9(){var fields,scripted,all;return regeneratorRuntime.wrap((function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.fieldsFetcher.fetch(this);case 2:fields=_context9.sent;scripted=this.getScriptedFields();all=fields.concat(scripted);_context9.next=7;return this.initFields(all);case 7:case"end":return _context9.stop()}}}),_callee9,this)})));function _fetchFields(){return _fetchFields2.apply(this,arguments)}return _fetchFields}()},{key:"refreshFields",value:function refreshFields(){var _this6=this;return this._fetchFields().then((function(){return _this6.save()})).catch((function(err){var _getNotifications3=(0,_services.getNotifications)(),toasts=_getNotifications3.toasts;if(err instanceof _lib.IndexPatternMissingIndices){toasts.addDanger(err.message);return[]}toasts.addError(err,{title:_i18n.i18n.translate("data.indexPatterns.fetchFieldErrorTitle",{defaultMessage:"Error fetching fields for index pattern {title} (ID: {id})",values:{id:_this6.id,title:_this6.title}})})}))}},{key:"toJSON",value:function toJSON(){return this.id}},{key:"toString",value:function toString(){return""+this.toJSON()}},{key:"destroy",value:function destroy(){this.patternCache.clear(this.id);if(this.id){return this.savedObjectsClient.delete(type,this.id)}}},{key:"routes",get:function get(){return(0,_utils.getRoutes)()}}]);return IndexPattern}();exports.IndexPattern=IndexPattern},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _field_list=__webpack_require__(692);Object.keys(_field_list).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _field_list[key]}})}));var _field=__webpack_require__(331);Object.keys(_field).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _field[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Field=void 0;var _i18n=__webpack_require__(1);var _obj_define=__webpack_require__(693);var _services=__webpack_require__(61);var _common=__webpack_require__(52);var _utils=__webpack_require__(146);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Field=function Field(indexPattern,spec){var shortDotsEnable=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_classCallCheck(this,Field);_defineProperty(this,"name",void 0);_defineProperty(this,"type",void 0);_defineProperty(this,"script",void 0);_defineProperty(this,"lang",void 0);_defineProperty(this,"count",void 0);_defineProperty(this,"esTypes",void 0);_defineProperty(this,"aggregatable",void 0);_defineProperty(this,"filterable",void 0);_defineProperty(this,"searchable",void 0);_defineProperty(this,"sortable",void 0);_defineProperty(this,"visualizable",void 0);_defineProperty(this,"scripted",void 0);_defineProperty(this,"subType",void 0);_defineProperty(this,"displayName",void 0);_defineProperty(this,"format",void 0);_defineProperty(this,"routes",{edit:"/management/kibana/index_patterns/{{indexPattern.id}}/field/{{name}}"});_defineProperty(this,"$$spec",void 0);if(spec instanceof Field)spec=spec.$$spec;var obj=new _obj_define.ObjDefine(spec,Field.prototype);if(spec.name==="_source"){spec.type="_source"}var type=(0,_common.getKbnFieldType)(spec.type);if(spec.type&&!type){var title=_i18n.i18n.translate("data.indexPatterns.unknownFieldHeader",{values:{type:spec.type},defaultMessage:"Unknown field type {type}"});var text=_i18n.i18n.translate("data.indexPatterns.unknownFieldErrorMessage",{values:{name:spec.name,title:indexPattern.title},defaultMessage:"Field {name} in indexPattern {title} is using an unknown field type."});var _getNotifications=(0,_services.getNotifications)(),toasts=_getNotifications.toasts;toasts.addDanger({title:title,text:text})}if(!type)type=(0,_common.getKbnFieldType)("unknown");var format=spec.format;if(!_common.FieldFormat.isInstanceOfFieldFormat(format)){var fieldFormatsService=(0,_services.getFieldFormats)();format=indexPattern.fieldFormatMap[spec.name]||fieldFormatsService.getDefaultInstance(spec.type,spec.esTypes)}var indexed=!!spec.indexed;var scripted=!!spec.scripted;var searchable=!!spec.searchable||scripted;var aggregatable=!!spec.aggregatable||scripted;var readFromDocValues=!!spec.readFromDocValues&&!scripted;var sortable=spec.name==="_score"||(indexed||aggregatable)&&type&&type.sortable;var filterable=spec.name==="_id"||scripted||(indexed||searchable)&&type&&type.filterable;var visualizable=aggregatable;this.name="";obj.fact("name");this.type="";obj.fact("type");obj.fact("esTypes");obj.writ("count",spec.count||0);obj.fact("scripted",scripted);obj.writ("script",scripted?spec.script:null);obj.writ("lang",scripted?spec.lang||"painless":null);obj.fact("searchable",searchable);obj.fact("aggregatable",aggregatable);obj.fact("readFromDocValues",readFromDocValues);obj.comp("format",format);obj.comp("sortable",sortable);obj.comp("filterable",filterable);obj.comp("visualizable",visualizable);obj.comp("indexPattern",indexPattern);obj.comp("displayName",shortDotsEnable?(0,_utils.shortenDottedString)(spec.name):spec.name);this.$$spec=spec;obj.comp("$$spec",spec);obj.writ("conflictDescriptions");obj.fact("subType");return obj.create()};exports.Field=Field;Field.prototype.routes={edit:"/management/kibana/index_patterns/{{indexPattern.id}}/field/{{name}}"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternsApiClient=void 0;var _lib=__webpack_require__(173);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var API_BASE_URL="/api/index_patterns/";var IndexPatternsApiClient=function(){function IndexPatternsApiClient(http){_classCallCheck(this,IndexPatternsApiClient);_defineProperty(this,"http",void 0);this.http=http}_createClass(IndexPatternsApiClient,[{key:"_request",value:function _request(url,query){return this.http.fetch(url,{query:query}).catch((function(resp){var _resp$body$attributes;if(resp.body.statusCode===404&&((_resp$body$attributes=resp.body.attributes)===null||_resp$body$attributes===void 0?void 0:_resp$body$attributes.code)==="no_matching_indices"){throw new _lib.IndexPatternMissingIndices(resp.body.message)}throw new Error(resp.body.message||resp.body.error||"".concat(resp.body.statusCode," Response"))}))}},{key:"_getUrl",value:function _getUrl(path){return API_BASE_URL+path.filter(Boolean).map(encodeURIComponent).join("/")}},{key:"getFieldsForTimePattern",value:function getFieldsForTimePattern(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var pattern=options.pattern,lookBack=options.lookBack,metaFields=options.metaFields;var url=this._getUrl(["_fields_for_time_pattern"]);return this._request(url,{pattern:pattern,look_back:lookBack,meta_fields:metaFields}).then((function(resp){return resp.fields}))}},{key:"getFieldsForWildcard",value:function getFieldsForWildcard(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var pattern=options.pattern,metaFields=options.metaFields,type=options.type,params=options.params;var url;var query;if(type){url=this._getUrl([type,"_fields_for_wildcard"]);query={pattern:pattern,meta_fields:metaFields,params:JSON.stringify(params)}}else{url=this._getUrl(["_fields_for_wildcard"]);query={pattern:pattern,meta_fields:metaFields}}return this._request(url,query).then((function(resp){return resp.fields}))}}]);return IndexPatternsApiClient}();exports.IndexPatternsApiClient=IndexPatternsApiClient},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.AggParamType=void 0;var _agg_config=__webpack_require__(175);var _base=__webpack_require__(114);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggParamType=function(_BaseParamType){_inherits(AggParamType,_BaseParamType);function AggParamType(config){var _this;_classCallCheck(this,AggParamType);_this=_possibleConstructorReturn(this,_getPrototypeOf(AggParamType).call(this,config));_defineProperty(_assertThisInitialized(_this),"makeAgg",void 0);_defineProperty(_assertThisInitialized(_this),"allowedAggs",[]);if(config.allowedAggs){_this.allowedAggs=config.allowedAggs}if(!config.write){_this.write=function(aggConfig,output){if(aggConfig.params[_this.name]&&aggConfig.params[_this.name].length){output.params[_this.name]=aggConfig.params[_this.name]}}}if(!config.serialize){_this.serialize=function(agg){return agg.toJSON()}}if(!config.deserialize){_this.deserialize=function(state,agg){if(!agg){throw new Error("aggConfig was not provided to AggParamType deserialize function")}return _this.makeAgg(agg,state)}}_this.makeAgg=config.makeAgg;_this.valueType=_agg_config.AggConfig;return _this}return AggParamType}(_base.BaseParamType);exports.AggParamType=AggParamType},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FieldParamType=void 0;var _i18n=__webpack_require__(1);var _public=__webpack_require__(34);var _base=__webpack_require__(114);var _filter=__webpack_require__(335);var _common=__webpack_require__(52);var _services=__webpack_require__(61);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var filterByType=(0,_filter.propFilter)("type");var FieldParamType=function(_BaseParamType){_inherits(FieldParamType,_BaseParamType);function FieldParamType(config){var _this;_classCallCheck(this,FieldParamType);_this=_possibleConstructorReturn(this,_getPrototypeOf(FieldParamType).call(this,config));_defineProperty(_assertThisInitialized(_this),"required",true);_defineProperty(_assertThisInitialized(_this),"scriptable",true);_defineProperty(_assertThisInitialized(_this),"filterFieldTypes",void 0);_defineProperty(_assertThisInitialized(_this),"onlyAggregatable",void 0);_defineProperty(_assertThisInitialized(_this),"getAvailableFields",(function(aggConfig){var fields=aggConfig.getIndexPattern().fields;var filteredFields=fields.filter((function(field){var _assertThisInitialize=_assertThisInitialized(_this),onlyAggregatable=_assertThisInitialize.onlyAggregatable,scriptable=_assertThisInitialize.scriptable,filterFieldTypes=_assertThisInitialize.filterFieldTypes;if(onlyAggregatable&&(!field.aggregatable||(0,_common.isNestedField)(field))||!scriptable&&field.scripted){return false}return filterByType([field],filterFieldTypes).length!==0}));return filteredFields}));_this.filterFieldTypes=config.filterFieldTypes||"*";_this.onlyAggregatable=config.onlyAggregatable!==false;if(!config.write){_this.write=function(aggConfig,output){var field=aggConfig.getField();if(!field){throw new TypeError(_i18n.i18n.translate("data.search.aggs.paramTypes.field.requiredFieldParameterErrorMessage",{defaultMessage:"{fieldParameter} is a required parameter",values:{fieldParameter:'"field"'}}))}if(field.scripted){output.params.script={source:field.script,lang:field.lang}}else{output.params.field=field.name}}}_this.serialize=function(field){return field.name};_this.deserialize=function(fieldName,aggConfig){if(!aggConfig){throw new Error("aggConfig was not provided to FieldParamType deserialize function")}var field=aggConfig.getIndexPattern().fields.getByName(fieldName);if(!field){throw new _public.SavedObjectNotFound("index-pattern-field",fieldName)}var validField=_this.getAvailableFields(aggConfig).find((function(f){return f.name===fieldName}));if(!validField){(0,_services.getNotifications)().toasts.addDanger(_i18n.i18n.translate("data.search.aggs.paramTypes.field.invalidSavedFieldParameterErrorMessage",{defaultMessage:"Saved {fieldParameter} parameter is now invalid. Please select a new field.",values:{fieldParameter:'"field"'}}))}return validField};return _this}return FieldParamType}(_base.BaseParamType);exports.FieldParamType=FieldParamType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"aggTypeFilters",{enumerable:true,get:function get(){return _agg_type_filters.aggTypeFilters}});Object.defineProperty(exports,"AggTypeFilters",{enumerable:true,get:function get(){return _agg_type_filters.AggTypeFilters}});Object.defineProperty(exports,"propFilter",{enumerable:true,get:function get(){return _prop_filter.propFilter}});var _agg_type_filters=__webpack_require__(702);var _prop_filter=__webpack_require__(703)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.StringParamType=void 0;var _base=__webpack_require__(114);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var StringParamType=function(_BaseParamType){_inherits(StringParamType,_BaseParamType);function StringParamType(config){var _this;_classCallCheck(this,StringParamType);_this=_possibleConstructorReturn(this,_getPrototypeOf(StringParamType).call(this,config));if(!config.write){_this.write=function(aggConfig,output){if(aggConfig.params[_this.name]&&aggConfig.params[_this.name].length){output.params[_this.name]=aggConfig.params[_this.name]}}}return _this}return StringParamType}(_base.BaseParamType);exports.StringParamType=StringParamType},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.JsonParamType=void 0;var _lodash=_interopRequireDefault(__webpack_require__(49));var _base=__webpack_require__(114);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var JsonParamType=function(_BaseParamType){_inherits(JsonParamType,_BaseParamType);function JsonParamType(config){var _this;_classCallCheck(this,JsonParamType);_this=_possibleConstructorReturn(this,_getPrototypeOf(JsonParamType).call(this,config));_this.name=config.name||"json";if(!config.write){_this.write=function(aggConfig,output){var paramJson;var param=aggConfig.params[_this.name];if(!param){return}try{paramJson=JSON.parse(param)}catch(err){return}function filteredCombine(srcA,srcB){function mergeObjs(a,b){return(0,_lodash.default)(a).keys().union(_lodash.default.keys(b)).transform((function(dest,key){var val=compare(a[key],b[key]);if(val!==undefined)dest[key]=val}),{}).value()}function mergeArrays(a,b){return _lodash.default.times(Math.max(a.length,b.length),(function(i){return compare(a[i],b[i])}))}function compare(a,b){if(_lodash.default.isPlainObject(a)&&_lodash.default.isPlainObject(b))return mergeObjs(a,b);if(Array.isArray(a)&&Array.isArray(b))return mergeArrays(a,b);if(b===null)return undefined;if(b!==undefined)return b;return a}return compare(srcA,srcB)}output.params=filteredCombine(output.params,paramJson);return}}return _this}return JsonParamType}(_base.BaseParamType);exports.JsonParamType=JsonParamType},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.AggConfigs=void 0;var _lodash=_interopRequireDefault(__webpack_require__(49));var _agg_config=__webpack_require__(175);var _agg_groups=__webpack_require__(225);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function removeParentAggs(obj){for(var prop in obj){if(prop==="parentAggs")delete obj[prop];else if(_typeof(obj[prop])==="object")removeParentAggs(obj[prop])}}function parseParentAggs(dslLvlCursor,dsl){if(dsl.parentAggs){_lodash.default.each(dsl.parentAggs,(function(agg,key){dslLvlCursor[key]=agg;parseParentAggs(dslLvlCursor,agg)}))}}var AggConfigs=function(){function AggConfigs(indexPattern){var _this=this;var configStates=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var opts=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,AggConfigs);_defineProperty(this,"indexPattern",void 0);_defineProperty(this,"timeRange",void 0);_defineProperty(this,"typesRegistry",void 0);_defineProperty(this,"aggs",void 0);_defineProperty(this,"createAggConfig",(function(params){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$addToAggConfigs=_ref.addToAggConfigs,addToAggConfigs=_ref$addToAggConfigs===void 0?true:_ref$addToAggConfigs;var type=params.type;var aggConfig;if(params instanceof _agg_config.AggConfig){aggConfig=params;params.parent=_this}else{aggConfig=new _agg_config.AggConfig(_this,_objectSpread({},params,{type:typeof type==="string"?_this.typesRegistry.get(type):type}))}if(addToAggConfigs){_this.aggs.push(aggConfig)}return aggConfig}));this.typesRegistry=opts.typesRegistry;configStates=_agg_config.AggConfig.ensureIds(configStates);this.aggs=[];this.indexPattern=indexPattern;configStates.forEach((function(params){return _this.createAggConfig(params)}))}_createClass(AggConfigs,[{key:"setTimeRange",value:function setTimeRange(timeRange){this.timeRange=timeRange;var updateAggTimeRange=function updateAggTimeRange(agg){_lodash.default.each(agg.params,(function(param){if(param instanceof _agg_config.AggConfig){updateAggTimeRange(param)}}));if(_lodash.default.get(agg,"type.name")==="date_histogram"){agg.params.timeRange=timeRange}};this.aggs.forEach(updateAggTimeRange)}},{key:"clone",value:function clone(){var _ref2=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref2$enabledOnly=_ref2.enabledOnly,enabledOnly=_ref2$enabledOnly===void 0?true:_ref2$enabledOnly;var filterAggs=function filterAggs(agg){if(!enabledOnly)return true;return agg.enabled};var aggConfigs=new AggConfigs(this.indexPattern,this.aggs.filter(filterAggs),{typesRegistry:this.typesRegistry});return aggConfigs}},{key:"jsonDataEquals",value:function jsonDataEquals(aggConfigs){if(aggConfigs.length!==this.aggs.length){return false}for(var i=0;i<this.aggs.length;i+=1){if(!_lodash.default.isEqual(aggConfigs[i].toJSON(),this.aggs[i].toJSON())){return false}}return true}},{key:"toDsl",value:function toDsl(){var _this2=this;var hierarchical=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var dslTopLvl={};var dslLvlCursor;var nestedMetrics;if(hierarchical){nestedMetrics=this.aggs.filter((function(agg){return agg.type.type==="metrics"&&agg.type.name!=="count"})).map((function(agg){return{config:agg,dsl:agg.toDsl(_this2)}}))}this.getRequestAggs().filter((function(config){return!config.type.hasNoDsl})).forEach((function(config,i,list){if(!dslLvlCursor){dslLvlCursor=dslTopLvl}else{var prevConfig=list[i-1];var prevDsl=dslLvlCursor[prevConfig.id];dslLvlCursor=prevDsl.aggs||dslLvlCursor}var dsl=dslLvlCursor[config.id]=config.toDsl(_this2);var subAggs;parseParentAggs(dslLvlCursor,dsl);if(config.type.type===_agg_groups.AggGroupNames.Buckets&&i<list.length-1){subAggs=dsl.aggs||(dsl.aggs={})}if(subAggs&&nestedMetrics){nestedMetrics.forEach((function(agg){subAggs[agg.config.id]=agg.dsl;if(agg.dsl.parentAggs){Object.entries(agg.dsl.parentAggs).forEach((function(_ref3){var _ref4=_slicedToArray(_ref3,2),parentAggId=_ref4[0],parentAgg=_ref4[1];subAggs[parentAggId]=parentAgg}))}}))}}));removeParentAggs(dslTopLvl);return dslTopLvl}},{key:"getAll",value:function getAll(){return _toConsumableArray(this.aggs)}},{key:"byIndex",value:function byIndex(index){return this.aggs[index]}},{key:"byId",value:function byId(id){return this.aggs.find((function(agg){return agg.id===id}))}},{key:"byName",value:function byName(name){return this.aggs.filter((function(agg){var _agg$type;return((_agg$type=agg.type)===null||_agg$type===void 0?void 0:_agg$type.name)===name}))}},{key:"byType",value:function byType(type){return this.aggs.filter((function(agg){var _agg$type2;return((_agg$type2=agg.type)===null||_agg$type2===void 0?void 0:_agg$type2.type)===type}))}},{key:"byTypeName",value:function byTypeName(type){return this.byName(type)}},{key:"bySchemaName",value:function bySchemaName(schema){return this.aggs.filter((function(agg){return agg.schema===schema}))}},{key:"getRequestAggs",value:function getRequestAggs(){var aggregations=this.aggs.filter((function(agg){return agg.enabled&&agg.type})).reduce((function(requestValuesAggs,agg){var aggs=agg.getRequestAggs();return aggs?requestValuesAggs.concat(aggs):requestValuesAggs}),[]);return _lodash.default.sortBy(aggregations,(function(agg){return agg.type.type===_agg_groups.AggGroupNames.Metrics?1:0}))}},{key:"getRequestAggById",value:function getRequestAggById(id){return this.aggs.find((function(agg){return agg.id===id}))}},{key:"getResponseAggs",value:function getResponseAggs(){return this.getRequestAggs().reduce((function(responseValuesAggs,agg){var aggs=agg.getResponseAggs();return aggs?responseValuesAggs.concat(aggs):responseValuesAggs}),[])}},{key:"getResponseAggById",value:function getResponseAggById(id){id=String(id);var reqAgg=_lodash.default.find(this.getRequestAggs(),(function(agg){return id.substr(0,String(agg.id).length)===agg.id}));if(!reqAgg)return;return _lodash.default.find(reqAgg.getResponseAggs(),{id:id})}},{key:"onSearchRequestStart",value:function onSearchRequestStart(searchSource,options){return Promise.all(this.getRequestAggs().map((function(agg){return agg.onSearchRequestStart(searchSource,options)})))}}]);return AggConfigs}();exports.AggConfigs=AggConfigs},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPercentileValue=void 0;var _lodash=__webpack_require__(49);var getPercentileValue=function getPercentileValue(agg,bucket){var values=bucket[agg.parentId].values;var percentile=(0,_lodash.find)(values,(function(_ref){var key=_ref.key;return key===agg.key}));return percentile?percentile.value:NaN};exports.getPercentileValue=getPercentileValue},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.forwardModifyAggConfigOnSearchRequestStart=void 0;var forwardModifyAggConfigOnSearchRequestStart=function forwardModifyAggConfigOnSearchRequestStart(paramName){return function(aggConfig,searchSource,request){if(!aggConfig||!aggConfig.params){return}var nestedAggConfig=aggConfig.getParam(paramName);if(nestedAggConfig&&nestedAggConfig.type&&nestedAggConfig.type.params){nestedAggConfig.type.params.forEach((function(param){if(param.modifyAggConfigOnSearchRequestStart){param.modifyAggConfigOnSearchRequestStart(nestedAggConfig,searchSource,request)}}))}}};exports.forwardModifyAggConfigOnSearchRequestStart=forwardModifyAggConfigOnSearchRequestStart},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isDateHistogramBucketAggConfig=isDateHistogramBucketAggConfig;exports.dateHistogramBucketAgg=void 0;var _lodash=_interopRequireDefault(__webpack_require__(49));var _momentTimezone=_interopRequireDefault(__webpack_require__(36));var _i18n=__webpack_require__(1);var _time_buckets=__webpack_require__(342);var _bucket_agg_type=__webpack_require__(96);var _bucket_agg_types=__webpack_require__(90);var _date_histogram=__webpack_require__(727);var _interval_options=__webpack_require__(343);var _common=__webpack_require__(52);var _agg_params=__webpack_require__(176);var _metric_agg_type=__webpack_require__(64);var _services=__webpack_require__(61);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var detectedTimezone=_momentTimezone.default.tz.guess();var tzOffset=(0,_momentTimezone.default)().format("Z");var updateTimeBuckets=function updateTimeBuckets(agg,timefilter,customBuckets){var bounds=agg.params.timeRange?timefilter.calculateBounds(agg.params.timeRange):null;var buckets=customBuckets||agg.buckets;buckets.setBounds(agg.fieldIsTimeField()&&bounds);buckets.setInterval(agg.params.interval)};function isDateHistogramBucketAggConfig(agg){return Boolean(agg.buckets)}var dateHistogramBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.DATE_HISTOGRAM,title:_i18n.i18n.translate("data.search.aggs.buckets.dateHistogramTitle",{defaultMessage:"Date Histogram"}),ordered:{date:true},makeLabel:function makeLabel(agg){var output={};if(this.params){output=(0,_agg_params.writeParams)(this.params,agg)}var field=agg.getFieldDisplayName();return _i18n.i18n.translate("data.search.aggs.buckets.dateHistogramLabel",{defaultMessage:"{fieldName} per {intervalDescription}",values:{fieldName:field,intervalDescription:output.metricScaleText||output.bucketInterval.description}})},createFilter:_date_histogram.createFilterDateHistogram,decorateAggConfig:function decorateAggConfig(){var uiSettings=(0,_services.getUiSettings)();var buckets;return{buckets:{configurable:true,get:function get(){if(buckets)return buckets;var timefilter=(0,_services.getQueryService)().timefilter.timefilter;buckets=new _time_buckets.TimeBuckets({uiSettings:uiSettings});updateTimeBuckets(this,timefilter,buckets);return buckets}}}},getFormat:function getFormat(agg){var DateFieldFormat=(0,_services.getFieldFormats)().getType(_common.FIELD_FORMAT_IDS.DATE);if(!DateFieldFormat){throw new Error("Unable to retrieve Date Field Format")}return new DateFieldFormat({pattern:agg.buckets.getScaledDateFormat()},(function(key){return(0,_services.getUiSettings)().get(key)}))},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.DATE,default:function _default(agg){return agg.getIndexPattern().timeFieldName},onChange:function onChange(agg){if(_lodash.default.get(agg,"params.interval")==="auto"&&!agg.fieldIsTimeField()){delete agg.params.interval}}},{name:"timeRange",default:null,write:_lodash.default.noop},{name:"useNormalizedEsInterval",default:true,write:_lodash.default.noop},{name:"scaleMetricValues",default:false,write:_lodash.default.noop,advanced:true},{name:"interval",deserialize:function deserialize(state,agg){if(state==="custom"){return _lodash.default.get(agg,"params.customInterval")}var interval=_lodash.default.find(_interval_options.intervalOptions,{val:state});if(!interval&&state==="year"){return"y"}return state},default:"auto",options:_interval_options.intervalOptions,write:function write(agg,output,aggs){var timefilter=(0,_services.getQueryService)().timefilter.timefilter;updateTimeBuckets(agg,timefilter);var _agg$params=agg.params,useNormalizedEsInterval=_agg$params.useNormalizedEsInterval,scaleMetricValues=_agg$params.scaleMetricValues;var interval=agg.buckets.getInterval(useNormalizedEsInterval);output.bucketInterval=interval;if(interval.expression==="0ms"){return}output.params=_objectSpread({},output.params,{},(0,_common.dateHistogramInterval)(interval.expression));var scaleMetrics=scaleMetricValues&&interval.scaled&&interval.scale<1;if(scaleMetrics&&aggs){var metrics=aggs.aggs.filter((function(a){return(0,_metric_agg_type.isMetricAggType)(a.type)}));var all=_lodash.default.every(metrics,(function(a){var type=a.type;if((0,_metric_agg_type.isMetricAggType)(type)){return type.isScalable()}}));if(all){output.metricScale=interval.scale;output.metricScaleText=interval.preScaled.description}}}},{name:"time_zone",default:undefined,serialize:_lodash.default.noop,write:function write(agg,output){var tz=agg.params.time_zone;if(!tz&&agg.params.field){tz=_lodash.default.get(agg.getIndexPattern(),["typeMeta","aggs","date_histogram",agg.params.field.name,"time_zone"])}if(!tz){var config=(0,_services.getUiSettings)();var isDefaultTimezone=config.isDefault("dateFormat:tz");tz=isDefaultTimezone?detectedTimezone||tzOffset:config.get("dateFormat:tz")}output.params.time_zone=tz}},{name:"drop_partials",default:false,write:_lodash.default.noop,shouldShow:function shouldShow(agg){var field=agg.params.field;return field&&field.name&&field.name===agg.getIndexPattern().timeFieldName}},{name:"format"},{name:"min_doc_count",default:1},{name:"extended_bounds",default:{},write:function write(agg,output){var val=agg.params.extended_bounds;if(val.min!=null||val.max!=null){output.params.extended_bounds={min:(0,_momentTimezone.default)(val.min).valueOf(),max:(0,_momentTimezone.default)(val.max).valueOf()};return}}}]});exports.dateHistogramBucketAgg=dateHistogramBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TimeBuckets",{enumerable:true,get:function get(){return _time_buckets.TimeBuckets}});var _time_buckets=__webpack_require__(724)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.intervalOptions=void 0;var _i18n=__webpack_require__(1);var intervalOptions=[{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.autoDisplayName",{defaultMessage:"Auto"}),val:"auto",enabled:function enabled(agg){return agg.fieldIsTimeField()}},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.millisecondDisplayName",{defaultMessage:"Millisecond"}),val:"ms"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.secondDisplayName",{defaultMessage:"Second"}),val:"s"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.minuteDisplayName",{defaultMessage:"Minute"}),val:"m"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.hourlyDisplayName",{defaultMessage:"Hourly"}),val:"h"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.dailyDisplayName",{defaultMessage:"Daily"}),val:"d"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.weeklyDisplayName",{defaultMessage:"Weekly"}),val:"w"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.monthlyDisplayName",{defaultMessage:"Monthly"}),val:"M"},{display:_i18n.i18n.translate("data.search.aggs.buckets.intervalOptions.yearlyDisplayName",{defaultMessage:"Yearly"}),val:"y"}];exports.intervalOptions=intervalOptions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dateRangeBucketAgg=void 0;var _lodash=__webpack_require__(49);var _momentTimezone=_interopRequireDefault(__webpack_require__(36));var _i18n=__webpack_require__(1);var _bucket_agg_types=__webpack_require__(90);var _bucket_agg_type=__webpack_require__(96);var _date_range=__webpack_require__(733);var _date_range2=__webpack_require__(171);var _common=__webpack_require__(52);var _services=__webpack_require__(61);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var dateRangeTitle=_i18n.i18n.translate("data.search.aggs.buckets.dateRangeTitle",{defaultMessage:"Date Range"});var dateRangeBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.DATE_RANGE,title:dateRangeTitle,createFilter:_date_range.createFilterDateRange,getKey:function getKey(_ref){var from=_ref.from,to=_ref.to;return{from:from,to:to}},getFormat:function getFormat(agg){var fieldFormatsService=(0,_services.getFieldFormats)();var formatter=agg.fieldOwnFormatter(_common.TEXT_CONTEXT_TYPE,fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.DATE));var DateRangeFormat=_common.FieldFormat.from((function(range){return(0,_date_range2.convertDateRangeToString)(range,formatter)}));return new DateRangeFormat},makeLabel:function makeLabel(aggConfig){return aggConfig.getFieldDisplayName()+" date ranges"},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.DATE,default:function _default(agg){return agg.getIndexPattern().timeFieldName}},{name:"ranges",default:[{from:"now-1w/w",to:"now"}]},{name:"time_zone",default:undefined,serialize:function serialize(){return undefined},write:function write(agg,output){var field=agg.getParam("field");var tz=agg.getParam("time_zone");if(!tz&&field){tz=(0,_lodash.get)(agg.getIndexPattern(),["typeMeta","aggs","date_range",field.name,"time_zone"])}if(!tz){var config=(0,_services.getUiSettings)();var detectedTimezone=_momentTimezone.default.tz.guess();var tzOffset=(0,_momentTimezone.default)().format("Z");var isDefaultTimezone=config.isDefault("dateFormat:tz");tz=isDefaultTimezone?detectedTimezone||tzOffset:config.get("dateFormat:tz")}output.params.time_zone=tz}}]});exports.dateRangeBucketAgg=dateRangeBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ipRangeBucketAgg=void 0;var _lodash=__webpack_require__(49);var _i18n=__webpack_require__(1);var _bucket_agg_type=__webpack_require__(96);var _bucket_agg_types=__webpack_require__(90);var _ip_range=__webpack_require__(734);var _ip_range2=__webpack_require__(172);var _common=__webpack_require__(52);var _services=__webpack_require__(61);var ipRangeTitle=_i18n.i18n.translate("data.search.aggs.buckets.ipRangeTitle",{defaultMessage:"IPv4 Range"});var ipRangeBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.IP_RANGE,title:ipRangeTitle,createFilter:_ip_range.createFilterIpRange,getKey:function getKey(bucket,key,agg){if(agg.params.ipRangeType==="mask"){return{type:"mask",mask:key}}return{type:"range",from:bucket.from,to:bucket.to}},getFormat:function getFormat(agg){var fieldFormatsService=(0,_services.getFieldFormats)();var formatter=agg.fieldOwnFormatter(_common.TEXT_CONTEXT_TYPE,fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.IP));var IpRangeFormat=_common.FieldFormat.from((function(range){return(0,_ip_range2.convertIPRangeToString)(range,formatter)}));return new IpRangeFormat},makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.buckets.ipRangeLabel",{defaultMessage:"{fieldName} IP ranges",values:{fieldName:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.IP},{name:"ipRangeType",default:"fromTo",write:_lodash.noop},{name:"ranges",default:{fromTo:[{from:"0.0.0.0",to:"127.255.255.255"},{from:"128.0.0.0",to:"191.255.255.255"}],mask:[{mask:"0.0.0.0/1"},{mask:"128.0.0.0/2"}]},write:function write(aggConfig,output){var ipRangeType=aggConfig.params.ipRangeType;var ranges=aggConfig.params.ranges[ipRangeType];if(ipRangeType==="fromTo"){ranges=(0,_lodash.map)(ranges,(function(range){return(0,_lodash.omit)(range,_lodash.isNull)}))}output.params.ranges=ranges}}]});exports.ipRangeBucketAgg=ipRangeBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CidrMask=void 0;var _public=__webpack_require__(34);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NUM_BITS=32;function throwError(mask){throw Error("Invalid CIDR mask: "+mask)}var CidrMask=function(){function CidrMask(mask){_classCallCheck(this,CidrMask);_defineProperty(this,"initialAddress",void 0);_defineProperty(this,"prefixLength",void 0);var splits=mask.split("/");if(splits.length!==2){throwError(mask)}this.initialAddress=new _public.Ipv4Address(splits[0]);this.prefixLength=Number(splits[1]);if(isNaN(this.prefixLength)||this.prefixLength<1||this.prefixLength>NUM_BITS){throwError(mask)}}_createClass(CidrMask,[{key:"getRange",value:function getRange(){var variableBits=NUM_BITS-this.prefixLength;var fromAddress=this.initialAddress.valueOf()>>variableBits<<variableBits>>>0;var numAddresses=Math.pow(2,variableBits);return{from:new _public.Ipv4Address(fromAddress).toString(),to:new _public.Ipv4Address(fromAddress+numAddresses-1).toString()}}},{key:"toString",value:function toString(){return this.initialAddress.toString()+"/"+this.prefixLength}}]);return CidrMask}();exports.CidrMask=CidrMask},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.termsBucketAgg=exports.termsAggFilter=void 0;var _lodash=__webpack_require__(49);var _i18n=__webpack_require__(1);var _bucket_agg_type=__webpack_require__(96);var _bucket_agg_types=__webpack_require__(90);var _terms=__webpack_require__(348);var _migrate_include_exclude_format=__webpack_require__(227);var _common=__webpack_require__(52);var _expressions=__webpack_require__(178);var _terms_other_bucket_helper=__webpack_require__(833);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var termsAggFilter=["!top_hits","!percentiles","!median","!std_dev","!derivative","!moving_avg","!serial_diff","!cumulative_sum","!avg_bucket","!max_bucket","!min_bucket","!sum_bucket"];exports.termsAggFilter=termsAggFilter;var termsTitle=_i18n.i18n.translate("data.search.aggs.buckets.termsTitle",{defaultMessage:"Terms"});var termsBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.TERMS,title:termsTitle,makeLabel:function makeLabel(agg){var params=agg.params;return agg.getFieldDisplayName()+": "+params.order.text},getFormat:function getFormat(bucket){return{getConverterFor:function getConverterFor(type){return function(val){if(val==="__other__"){return bucket.params.otherBucketLabel}if(val==="__missing__"){return bucket.params.missingBucketLabel}return bucket.params.field.format.convert(val,type)}}}},createFilter:_terms.createFilterTerms,postFlightRequest:function(){var _postFlightRequest=_asyncToGenerator(regeneratorRuntime.mark((function _callee(resp,aggConfigs,aggConfig,searchSource,inspectorAdapters,abortSignal){var nestedSearchSource,filterAgg,request,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(resp.aggregations){_context.next=2;break}return _context.abrupt("return",resp);case 2:nestedSearchSource=searchSource.createChild();if(!aggConfig.params.otherBucket){_context.next=16;break}filterAgg=(0,_terms_other_bucket_helper.buildOtherBucketAgg)(aggConfigs,aggConfig,resp);if(filterAgg){_context.next=7;break}return _context.abrupt("return",resp);case 7:nestedSearchSource.setField("aggs",filterAgg);request=inspectorAdapters.requests.start(_i18n.i18n.translate("data.search.aggs.buckets.terms.otherBucketTitle",{defaultMessage:"Other bucket"}),{description:_i18n.i18n.translate("data.search.aggs.buckets.terms.otherBucketDescription",{defaultMessage:"This request counts the number of documents that fall "+"outside the criterion of the data buckets."})});nestedSearchSource.getSearchRequestBody().then((function(body){request.json(body)}));request.stats((0,_expressions.getRequestInspectorStats)(nestedSearchSource));_context.next=13;return nestedSearchSource.fetch({abortSignal:abortSignal});case 13:response=_context.sent;request.stats((0,_expressions.getResponseInspectorStats)(nestedSearchSource,response)).ok({json:response});resp=(0,_terms_other_bucket_helper.mergeOtherBucketAggResponse)(aggConfigs,resp,response,aggConfig,filterAgg());case 16:if(aggConfig.params.missingBucket){resp=(0,_terms_other_bucket_helper.updateMissingBucket)(resp,aggConfigs,aggConfig)}return _context.abrupt("return",resp);case 18:case"end":return _context.stop()}}}),_callee)})));function postFlightRequest(_x,_x2,_x3,_x4,_x5,_x6){return _postFlightRequest.apply(this,arguments)}return postFlightRequest}(),params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.BOOLEAN,_common.KBN_FIELD_TYPES.DATE,_common.KBN_FIELD_TYPES.IP,_common.KBN_FIELD_TYPES.STRING]},{name:"orderBy",write:_lodash.noop},{name:"orderAgg",type:"agg",allowedAggs:termsAggFilter,default:null,makeAgg:function makeAgg(termsAgg,state){state=state||{};state.schema="orderAgg";var orderAgg=termsAgg.aggConfigs.createAggConfig(state,{addToAggConfigs:false});orderAgg.id=termsAgg.id+"-orderAgg";return orderAgg},write:function write(agg,output,aggs){var dir=agg.params.order.value;var order=output.params.order={};var orderAgg=agg.params.orderAgg||aggs.getResponseAggById(agg.params.orderBy);if(output.params.script){output.params.value_type=agg.getField().type==="number"?"float":agg.getField().type}if(agg.params.missingBucket&&agg.params.field.type==="string"){output.params.missing="__missing__"}if(!orderAgg){order[agg.params.orderBy||"_count"]=dir;return}if(orderAgg.type.name==="count"){order._count=dir;return}var orderAggId=orderAgg.id;if(orderAgg.parentId&&aggs){orderAgg=aggs.byId(orderAgg.parentId)}output.subAggs=(output.subAggs||[]).concat(orderAgg);order[orderAggId]=dir}},{name:"order",type:"optioned",default:"desc",options:[{text:_i18n.i18n.translate("data.search.aggs.buckets.terms.orderDescendingTitle",{defaultMessage:"Descending"}),value:"desc"},{text:_i18n.i18n.translate("data.search.aggs.buckets.terms.orderAscendingTitle",{defaultMessage:"Ascending"}),value:"asc"}],write:_lodash.noop},{name:"size",default:5},{name:"otherBucket",default:false,write:_lodash.noop},{name:"otherBucketLabel",type:"string",default:_i18n.i18n.translate("data.search.aggs.buckets.terms.otherBucketLabel",{defaultMessage:"Other"}),displayName:_i18n.i18n.translate("data.search.aggs.otherBucket.labelForOtherBucketLabel",{defaultMessage:"Label for other bucket"}),shouldShow:function shouldShow(agg){return agg.getParam("otherBucket")},write:_lodash.noop},{name:"missingBucket",default:false,write:_lodash.noop},{name:"missingBucketLabel",default:_i18n.i18n.translate("data.search.aggs.buckets.terms.missingBucketLabel",{defaultMessage:"Missing",description:'Default label used in charts when documents are missing a field.\n          Visible when you create a chart with a terms aggregation and enable "Show missing values"'}),type:"string",displayName:_i18n.i18n.translate("data.search.aggs.otherBucket.labelForMissingValuesLabel",{defaultMessage:"Label for missing values"}),shouldShow:function shouldShow(agg){return agg.getParam("missingBucket")},write:_lodash.noop},_objectSpread({name:"exclude",displayName:_i18n.i18n.translate("data.search.aggs.buckets.terms.excludeLabel",{defaultMessage:"Exclude"}),type:"string",advanced:true,shouldShow:_migrate_include_exclude_format.isStringType},_migrate_include_exclude_format.migrateIncludeExcludeFormat),_objectSpread({name:"include",displayName:_i18n.i18n.translate("data.search.aggs.buckets.terms.includeLabel",{defaultMessage:"Include"}),type:"string",advanced:true,shouldShow:_migrate_include_exclude_format.isStringType},_migrate_include_exclude_format.migrateIncludeExcludeFormat)]});exports.termsBucketAgg=termsBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterTerms=void 0;var _common=__webpack_require__(52);var createFilterTerms=function createFilterTerms(aggConfig,key,params){var field=aggConfig.params.field;var indexPattern=field.indexPattern;if(key==="__other__"){var terms=params.terms;var phraseFilter=(0,_common.buildPhrasesFilter)(field,terms,indexPattern);phraseFilter.meta.negate=true;var filters=[phraseFilter];if(terms.some((function(term){return term==="__missing__"}))){filters.push((0,_common.buildExistsFilter)(field,indexPattern))}return filters}else if(key==="__missing__"){var existsFilter=(0,_common.buildExistsFilter)(field,indexPattern);existsFilter.meta.negate=true;return existsFilter}return(0,_common.buildPhraseFilter)(field,key,indexPattern)};exports.createFilterTerms=createFilterTerms},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={SortDirection:true,EsQuerySortValue:true,SearchSourceFields:true};Object.defineProperty(exports,"SortDirection",{enumerable:true,get:function get(){return _types.SortDirection}});Object.defineProperty(exports,"EsQuerySortValue",{enumerable:true,get:function get(){return _types.EsQuerySortValue}});Object.defineProperty(exports,"SearchSourceFields",{enumerable:true,get:function get(){return _types.SearchSourceFields}});var _search_source=__webpack_require__(350);Object.keys(_search_source).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _search_source[key]}})}));var _types=__webpack_require__(788)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchSource=void 0;var _lodash=_interopRequireDefault(__webpack_require__(49));var _normalize_sort_request=__webpack_require__(736);var _filter_docvalue_fields=__webpack_require__(737);var _public=__webpack_require__(34);var _fetch2=__webpack_require__(351);var _services=__webpack_require__(61);var _common=__webpack_require__(52);var _field_formats=__webpack_require__(215);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchSource=function(){function SearchSource(){var fields=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,SearchSource);this.fields=fields;_defineProperty(this,"id",_lodash.default.uniqueId("data_source"));_defineProperty(this,"searchStrategyId",void 0);_defineProperty(this,"parent",void 0);_defineProperty(this,"requestStartHandlers",[]);_defineProperty(this,"inheritOptions",{});_defineProperty(this,"history",[])}_createClass(SearchSource,[{key:"setPreferredSearchStrategyId",value:function setPreferredSearchStrategyId(searchStrategyId){this.searchStrategyId=searchStrategyId}},{key:"setFields",value:function setFields(newFields){this.fields=newFields;return this}},{key:"setField",value:function setField(field,value){if(value==null){delete this.fields[field]}else{this.fields[field]=value}return this}},{key:"getId",value:function getId(){return this.id}},{key:"getFields",value:function getFields(){return _objectSpread({},this.fields)}},{key:"getField",value:function getField(field){var recurse=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(!recurse||this.fields[field]!==void 0){return this.fields[field]}var parent=this.getParent();return parent&&parent.getField(field)}},{key:"getOwnField",value:function getOwnField(field){return this.getField(field,false)}},{key:"create",value:function create(){return new SearchSource}},{key:"createCopy",value:function createCopy(){var newSearchSource=new SearchSource;newSearchSource.setFields(_objectSpread({},this.fields));newSearchSource.setField("index",this.getField("index"));newSearchSource.setParent(this.getParent());return newSearchSource}},{key:"createChild",value:function createChild(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var childSearchSource=new SearchSource;childSearchSource.setParent(this,options);return childSearchSource}},{key:"setParent",value:function setParent(parent){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.parent=parent;this.inheritOptions=options;return this}},{key:"getParent",value:function getParent(){return this.parent}},{key:"fetch",value:function(){var _fetch=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var options,searchRequest,esShardTimeout,response,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:options=_args.length>0&&_args[0]!==undefined?_args[0]:{};_context.next=3;return this.requestIsStarting(options);case 3:_context.next=5;return this.flatten();case 5:searchRequest=_context.sent;this.history=[searchRequest];esShardTimeout=(0,_services.getInjectedMetadata)().getInjectedVar("esShardTimeout");_context.next=10;return(0,_fetch2.fetchSoon)(searchRequest,_objectSpread({},this.searchStrategyId&&{searchStrategyId:this.searchStrategyId},{},options),{searchService:(0,_services.getSearchService)(),config:(0,_services.getUiSettings)(),esShardTimeout:esShardTimeout});case 10:response=_context.sent;if(!response.error){_context.next=13;break}throw new _fetch2.RequestFailure(null,response);case 13:return _context.abrupt("return",response);case 14:case"end":return _context.stop()}}}),_callee,this)})));function fetch(){return _fetch.apply(this,arguments)}return fetch}()},{key:"onRequestStart",value:function onRequestStart(handler){this.requestStartHandlers.push(handler)}},{key:"getSearchRequestBody",value:function(){var _getSearchRequestBody=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var searchRequest;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.flatten();case 2:searchRequest=_context2.sent;return _context2.abrupt("return",searchRequest.body);case 4:case"end":return _context2.stop()}}}),_callee2,this)})));function getSearchRequestBody(){return _getSearchRequestBody.apply(this,arguments)}return getSearchRequestBody}()},{key:"destroy",value:function destroy(){this.requestStartHandlers.length=0}},{key:"requestIsStarting",value:function requestIsStarting(){var _this=this;var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var handlers=_toConsumableArray(this.requestStartHandlers);if(this.inheritOptions.callParentStartHandlers){var _searchSource=this.getParent();while(_searchSource){handlers.push.apply(handlers,_toConsumableArray(_searchSource.requestStartHandlers));_searchSource=_searchSource.getParent()}}return Promise.all(handlers.map((function(fn){return fn(_this,options)})))}},{key:"mergeProp",value:function mergeProp(data,val,key){val=typeof val==="function"?val(this):val;if(val==null||!key)return;var addToRoot=function addToRoot(rootKey,value){data[rootKey]=value};var addToBody=function addToBody(bodyKey,value){if(data.body[bodyKey]==null){data.body[bodyKey]=value}};switch(key){case"filter":return addToRoot("filters",(data.filters||[]).concat(val));case"query":return addToRoot(key,(data[key]||[]).concat(val));case"fields":var _fields=_lodash.default.uniq((data[key]||[]).concat(val));return addToRoot(key,_fields);case"index":case"type":case"highlightAll":return key&&data[key]==null&&addToRoot(key,val);case"searchAfter":return addToBody("search_after",val);case"source":return addToBody("_source",val);case"sort":var sort=(0,_normalize_sort_request.normalizeSortRequest)(val,this.getField("index"),(0,_services.getUiSettings)().get("sort:options"));return addToBody(key,sort);default:return addToBody(key,val)}}},{key:"mergeProps",value:function mergeProps(){var _this2=this;var root=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this;var searchRequest=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{body:{}};Object.entries(this.fields).forEach((function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];_this2.mergeProp(searchRequest,value,key)}));if(this.parent){this.parent.mergeProps(root,searchRequest)}return searchRequest}},{key:"getIndexType",value:function getIndexType(index){if(this.searchStrategyId){return this.searchStrategyId==="default"?undefined:this.searchStrategyId}else{return index===null||index===void 0?void 0:index.type}}},{key:"flatten",value:function flatten(){var searchRequest=this.mergeProps();searchRequest.body=searchRequest.body||{};var body=searchRequest.body,index=searchRequest.index,fields=searchRequest.fields,query=searchRequest.query,filters=searchRequest.filters,highlightAll=searchRequest.highlightAll;searchRequest.indexType=this.getIndexType(index);var computedFields=index?index.getComputedFields():{};body.stored_fields=computedFields.storedFields;body.script_fields=body.script_fields||{};_lodash.default.extend(body.script_fields,computedFields.scriptFields);var defaultDocValueFields=computedFields.docvalueFields?computedFields.docvalueFields:[];body.docvalue_fields=body.docvalue_fields||defaultDocValueFields;if(!body.hasOwnProperty("_source")&&index){body._source=index.getSourceFiltering()}if(body._source){var filter=(0,_public.fieldWildcardFilter)(body._source.excludes,(0,_services.getUiSettings)().get("metaFields"));body.docvalue_fields=body.docvalue_fields.filter((function(docvalueField){return filter(docvalueField.field)}))}if(fields){body.docvalue_fields=(0,_filter_docvalue_fields.filterDocvalueFields)(body.docvalue_fields,fields);body.script_fields=_lodash.default.pick(body.script_fields,fields);var remainingFields=_lodash.default.difference(fields,_lodash.default.keys(body.script_fields));body.stored_fields=remainingFields;_lodash.default.set(body,"_source.includes",remainingFields)}var esQueryConfigs=(0,_common.getEsQueryConfig)((0,_services.getUiSettings)());body.query=(0,_common.buildEsQuery)(index,query,filters,esQueryConfigs);if(highlightAll&&body.query){body.highlight=(0,_field_formats.getHighlightRequest)(body.query,(0,_services.getUiSettings)().get("doc_table:highlight"));delete searchRequest.highlightAll}var translateToQuery=function translateToQuery(filter){return filter&&(filter.query||filter)};(function recurse(aggBranch){if(!aggBranch)return;Object.keys(aggBranch).forEach((function(id){var agg=aggBranch[id];if(agg.filters){var aggFilters=agg.filters.filters;Object.keys(aggFilters).forEach((function(filterId){aggFilters[filterId]=translateToQuery(aggFilters[filterId])}))}recurse(agg.aggs||agg.aggregations)}))})(body.aggs||body.aggregations);return searchRequest}}]);return SearchSource}();exports.SearchSource=SearchSource},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={fetchSoon:true,RequestFailure:true};Object.defineProperty(exports,"fetchSoon",{enumerable:true,get:function get(){return _fetch_soon.fetchSoon}});Object.defineProperty(exports,"RequestFailure",{enumerable:true,get:function get(){return _errors.RequestFailure}});var _types=__webpack_require__(738);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _fetch_soon=__webpack_require__(739);var _errors=__webpack_require__(787)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _index_pattern_select=__webpack_require__(745);Object.keys(_index_pattern_select).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_pattern_select[key]}})}))},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.QueryStringInput=exports.QueryStringInputUI=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(29);var _react2=__webpack_require__(30);var _lodash=__webpack_require__(49);var _autocomplete=__webpack_require__(223);var _public=__webpack_require__(31);var _fetch_index_patterns=__webpack_require__(746);var _language_switcher=__webpack_require__(747);var _query=__webpack_require__(125);var _=__webpack_require__(179);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var KEY_CODES={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,ESC:27,TAB:9,HOME:36,END:35};var QueryStringInputUI=function(_Component){_inherits(QueryStringInputUI,_Component);function QueryStringInputUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,QueryStringInputUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(QueryStringInputUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isSuggestionsVisible:false,index:null,suggestions:[],suggestionLimit:50,selectionStart:null,selectionEnd:null,indexPatterns:[]});_defineProperty(_assertThisInitialized(_this),"inputRef",null);_defineProperty(_assertThisInitialized(_this),"persistedLog",void 0);_defineProperty(_assertThisInitialized(_this),"abortController",void 0);_defineProperty(_assertThisInitialized(_this),"services",_this.props.kibana.services);_defineProperty(_assertThisInitialized(_this),"componentIsUnmounting",false);_defineProperty(_assertThisInitialized(_this),"getQueryString",(function(){return(0,_query.toUser)(_this.props.query.query)}));_defineProperty(_assertThisInitialized(_this),"fetchIndexPatterns",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var stringPatterns,objectPatterns,objectPatternsFromStrings;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:stringPatterns=_this.props.indexPatterns.filter((function(indexPattern){return typeof indexPattern==="string"}));objectPatterns=_this.props.indexPatterns.filter((function(indexPattern){return typeof indexPattern!=="string"}));_context.next=4;return(0,_fetch_index_patterns.fetchIndexPatterns)(_this.services.savedObjects.client,stringPatterns,_this.services.uiSettings);case 4:objectPatternsFromStrings=_context.sent;_this.setState({indexPatterns:[].concat(_toConsumableArray(objectPatterns),_toConsumableArray(objectPatternsFromStrings))});case 6:case"end":return _context.stop()}}}),_callee)}))));_defineProperty(_assertThisInitialized(_this),"getSuggestions",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var language,queryString,recentSearchSuggestions,hasQuerySuggestions,indexPatterns,_this$inputRef,selectionStart,selectionEnd,suggestions;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(_this.inputRef){_context2.next=2;break}return _context2.abrupt("return");case 2:language=_this.props.query.language;queryString=_this.getQueryString();recentSearchSuggestions=_this.getRecentSearchSuggestions(queryString);hasQuerySuggestions=_this.services.data.autocomplete.hasQuerySuggestions(language);if(!(!hasQuerySuggestions||!Array.isArray(_this.state.indexPatterns)||(0,_lodash.compact)(_this.state.indexPatterns).length===0)){_context2.next=8;break}return _context2.abrupt("return",recentSearchSuggestions);case 8:indexPatterns=_this.state.indexPatterns;_this$inputRef=_this.inputRef,selectionStart=_this$inputRef.selectionStart,selectionEnd=_this$inputRef.selectionEnd;if(!(selectionStart===null||selectionEnd===null)){_context2.next=12;break}return _context2.abrupt("return");case 12:_context2.prev=12;if(_this.abortController)_this.abortController.abort();_this.abortController=new AbortController;_context2.next=17;return _this.services.data.autocomplete.getQuerySuggestions({language:language,indexPatterns:indexPatterns,query:queryString,selectionStart:selectionStart,selectionEnd:selectionEnd,signal:_this.abortController.signal});case 17:_context2.t0=_context2.sent;if(_context2.t0){_context2.next=20;break}_context2.t0=[];case 20:suggestions=_context2.t0;return _context2.abrupt("return",[].concat(_toConsumableArray(suggestions),_toConsumableArray(recentSearchSuggestions)));case 24:_context2.prev=24;_context2.t1=_context2["catch"](12);if(!(_context2.t1.message==="The user aborted a request.")){_context2.next=28;break}return _context2.abrupt("return");case 28:throw _context2.t1;case 29:case"end":return _context2.stop()}}}),_callee2,null,[[12,24]])}))));_defineProperty(_assertThisInitialized(_this),"getRecentSearchSuggestions",(function(query){if(!_this.persistedLog){return[]}var recentSearches=_this.persistedLog.get();var matchingRecentSearches=recentSearches.filter((function(recentQuery){var recentQueryString=_typeof(recentQuery)==="object"?(0,_query.toUser)(recentQuery):recentQuery;return recentQueryString.includes(query)}));return matchingRecentSearches.map((function(recentSearch){var text=(0,_query.toUser)(recentSearch);var start=0;var end=query.length;return{type:_autocomplete.QuerySuggestionTypes.RecentSearch,text:text,start:start,end:end}}))}));_defineProperty(_assertThisInitialized(_this),"updateSuggestions",(0,_lodash.debounce)(_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var suggestions;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.getSuggestions();case 2:_context3.t0=_context3.sent;if(_context3.t0){_context3.next=5;break}_context3.t0=[];case 5:suggestions=_context3.t0;if(!_this.componentIsUnmounting){_this.setState({suggestions:suggestions})}case 7:case"end":return _context3.stop()}}}),_callee3)}))),100));_defineProperty(_assertThisInitialized(_this),"onSubmit",(function(query){if(_this.props.onSubmit){if(_this.persistedLog){_this.persistedLog.add(query.query)}_this.props.onSubmit({query:(0,_query.fromUser)(query.query),language:query.language})}}));_defineProperty(_assertThisInitialized(_this),"onChange",(function(query){_this.updateSuggestions();if(_this.props.onChange){_this.props.onChange({query:(0,_query.fromUser)(query.query),language:query.language})}}));_defineProperty(_assertThisInitialized(_this),"onQueryStringChange",(function(value){_this.setState({isSuggestionsVisible:true,index:null,suggestionLimit:50});_this.onChange({query:value,language:_this.props.query.language})}));_defineProperty(_assertThisInitialized(_this),"onInputChange",(function(event){_this.onQueryStringChange(event.target.value)}));_defineProperty(_assertThisInitialized(_this),"onClickInput",(function(event){if(event.target instanceof HTMLInputElement){_this.onQueryStringChange(event.target.value)}}));_defineProperty(_assertThisInitialized(_this),"onKeyUp",(function(event){if([KEY_CODES.LEFT,KEY_CODES.RIGHT,KEY_CODES.HOME,KEY_CODES.END].includes(event.keyCode)){_this.setState({isSuggestionsVisible:true});if(event.target instanceof HTMLInputElement){_this.onQueryStringChange(event.target.value)}}}));_defineProperty(_assertThisInitialized(_this),"onKeyDown",(function(event){if(event.target instanceof HTMLInputElement){var _this$state=_this.state,isSuggestionsVisible=_this$state.isSuggestionsVisible,index=_this$state.index;var preventDefault=event.preventDefault.bind(event);var target=event.target,key=event.key,metaKey=event.metaKey;var value=target.value,selectionStart=target.selectionStart,selectionEnd=target.selectionEnd;var updateQuery=function updateQuery(query,newSelectionStart,newSelectionEnd){_this.onQueryStringChange(query);_this.setState({selectionStart:newSelectionStart,selectionEnd:newSelectionEnd})};switch(event.keyCode){case KEY_CODES.DOWN:event.preventDefault();if(isSuggestionsVisible&&index!==null){_this.incrementIndex(index)}else{_this.setState({isSuggestionsVisible:true,index:0})}break;case KEY_CODES.UP:event.preventDefault();if(isSuggestionsVisible&&index!==null){_this.decrementIndex(index)}break;case KEY_CODES.ENTER:if(!_this.props.bubbleSubmitEvent){event.preventDefault()}if(isSuggestionsVisible&&index!==null&&_this.state.suggestions[index]){event.preventDefault();_this.selectSuggestion(_this.state.suggestions[index])}else{_this.onSubmit(_this.props.query);_this.setState({isSuggestionsVisible:false})}break;case KEY_CODES.ESC:event.preventDefault();_this.setState({isSuggestionsVisible:false,index:null});break;case KEY_CODES.TAB:_this.setState({isSuggestionsVisible:false,index:null});break;default:if(selectionStart!==null&&selectionEnd!==null){(0,_query.matchPairs)({value:value,selectionStart:selectionStart,selectionEnd:selectionEnd,key:key,metaKey:metaKey,updateQuery:updateQuery,preventDefault:preventDefault})}break}}}));_defineProperty(_assertThisInitialized(_this),"selectSuggestion",(function(suggestion){if(!_this.inputRef){return}var type=suggestion.type,text=suggestion.text,start=suggestion.start,end=suggestion.end,cursorIndex=suggestion.cursorIndex;_this.handleNestedFieldSyntaxNotification(suggestion);var query=_this.getQueryString();var _this$inputRef2=_this.inputRef,selectionStart=_this$inputRef2.selectionStart,selectionEnd=_this$inputRef2.selectionEnd;if(selectionStart===null||selectionEnd===null){return}var value=query.substr(0,selectionStart)+query.substr(selectionEnd);var newQueryString=value.substr(0,start)+text+value.substr(end);_this.onQueryStringChange(newQueryString);_this.setState({selectionStart:start+(cursorIndex?cursorIndex:text.length),selectionEnd:start+(cursorIndex?cursorIndex:text.length)});if(type===_autocomplete.QuerySuggestionTypes.RecentSearch){_this.setState({isSuggestionsVisible:false,index:null});_this.onSubmit({query:newQueryString,language:_this.props.query.language})}}));_defineProperty(_assertThisInitialized(_this),"handleNestedFieldSyntaxNotification",(function(suggestion){if("field"in suggestion&&suggestion.field.subType&&suggestion.field.subType.nested&&!_this.services.storage.get("kibana.KQLNestedQuerySyntaxInfoOptOut")){var _this$services=_this.services,notifications=_this$services.notifications,docLinks=_this$services.docLinks;var onKQLNestedQuerySyntaxInfoOptOut=function onKQLNestedQuerySyntaxInfoOptOut(toast){if(!_this.services.storage)return;_this.services.storage.set("kibana.KQLNestedQuerySyntaxInfoOptOut",true);notifications.toasts.remove(toast)};if(notifications&&docLinks){var toast=notifications.toasts.add({title:_i18n.i18n.translate("data.query.queryBar.KQLNestedQuerySyntaxInfoTitle",{defaultMessage:"KQL nested query syntax"}),text:(0,_public.toMountPoint)(_react.default.createElement("div",null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.KQLNestedQuerySyntaxInfoText",defaultMessage:"It looks like you're querying on a nested field. You can construct KQL syntax for nested queries in different ways, depending on the results you want. Learn more in our {link}.",values:{link:_react.default.createElement(_eui.EuiLink,{href:docLinks.links.query.kueryQuerySyntax,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.KQLNestedQuerySyntaxInfoDocLinkText",defaultMessage:"docs"}))}})),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",onClick:function onClick(){return onKQLNestedQuerySyntaxInfoOptOut(toast)}},_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.KQLNestedQuerySyntaxInfoOptOutText",defaultMessage:"Don't show again"}))))))})}}}));_defineProperty(_assertThisInitialized(_this),"increaseLimit",(function(){_this.setState({suggestionLimit:_this.state.suggestionLimit+50})}));_defineProperty(_assertThisInitialized(_this),"incrementIndex",(function(currentIndex){var nextIndex=currentIndex+1;if(currentIndex===null||nextIndex>=_this.state.suggestions.length){nextIndex=0}_this.setState({index:nextIndex})}));_defineProperty(_assertThisInitialized(_this),"decrementIndex",(function(currentIndex){var previousIndex=currentIndex-1;if(previousIndex<0){_this.setState({index:_this.state.suggestions.length-1})}else{_this.setState({index:previousIndex})}}));_defineProperty(_assertThisInitialized(_this),"onSelectLanguage",(function(language){_this.services.http.post("/api/kibana/kql_opt_in_telemetry",{body:JSON.stringify({opt_in:language==="kuery"})});_this.services.storage.set("kibana.userQueryLanguage",language);var newQuery={query:"",language:language};_this.onChange(newQuery);_this.onSubmit(newQuery)}));_defineProperty(_assertThisInitialized(_this),"onOutsideClick",(function(){if(_this.state.isSuggestionsVisible){_this.setState({isSuggestionsVisible:false,index:null})}}));_defineProperty(_assertThisInitialized(_this),"onClickSuggestion",(function(suggestion){if(!_this.inputRef){return}_this.selectSuggestion(suggestion);_this.inputRef.focus()}));_defineProperty(_assertThisInitialized(_this),"initPersistedLog",(function(){var _this$services2=_this.services,uiSettings=_this$services2.uiSettings,storage=_this$services2.storage,appName=_this$services2.appName;_this.persistedLog=_this.props.persistedLog?_this.props.persistedLog:(0,_query.getQueryLog)(uiSettings,storage,appName,_this.props.query.language)}));_defineProperty(_assertThisInitialized(_this),"onMouseEnterSuggestion",(function(index){_this.setState({index:index})}));return _this}_createClass(QueryStringInputUI,[{key:"componentDidMount",value:function componentDidMount(){var parsedQuery=(0,_query.fromUser)((0,_query.toUser)(this.props.query.query));if(!(0,_lodash.isEqual)(this.props.query.query,parsedQuery)){this.onChange(_objectSpread({},this.props.query,{query:parsedQuery}))}this.initPersistedLog();this.fetchIndexPatterns().then(this.updateSuggestions)}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var parsedQuery=(0,_query.fromUser)((0,_query.toUser)(this.props.query.query));if(!(0,_lodash.isEqual)(this.props.query.query,parsedQuery)){this.onChange(_objectSpread({},this.props.query,{query:parsedQuery}))}this.initPersistedLog();if(!(0,_lodash.isEqual)(prevProps.indexPatterns,this.props.indexPatterns)){this.fetchIndexPatterns().then(this.updateSuggestions)}else if(!(0,_lodash.isEqual)(prevProps.query,this.props.query)){this.updateSuggestions()}if(this.state.selectionStart!==null&&this.state.selectionEnd!==null){if(this.inputRef){this.inputRef.setSelectionRange(this.state.selectionStart,this.state.selectionEnd)}this.setState({selectionStart:null,selectionEnd:null})}}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.updateSuggestions.cancel();this.componentIsUnmounting=true}},{key:"render",value:function render(){var _this2=this;var isSuggestionsVisible=this.state.isSuggestionsVisible&&{"aria-controls":"kbnTypeahead__items","aria-owns":"kbnTypeahead__items"};var ariaCombobox=_objectSpread({},isSuggestionsVisible,{role:"combobox"});return _react.default.createElement(_eui.EuiOutsideClickDetector,{onOutsideClick:this.onOutsideClick},_react.default.createElement("div",_extends({},ariaCombobox,{style:{position:"relative"},"aria-label":_i18n.i18n.translate("data.query.queryBar.comboboxAriaLabel",{defaultMessage:"Search and filter the {pageType} page",values:{pageType:this.services.appName}}),"aria-haspopup":"true","aria-expanded":this.state.isSuggestionsVisible}),_react.default.createElement("div",{role:"search"},_react.default.createElement("div",{className:"kuiLocalSearchAssistedInput"},_react.default.createElement(_eui.EuiFieldText,{placeholder:this.props.placeholder||_i18n.i18n.translate("data.query.queryBar.searchInputPlaceholder",{defaultMessage:"Search"}),value:this.getQueryString(),onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onChange:this.onInputChange,onClick:this.onClickInput,fullWidth:true,autoFocus:!this.props.disableAutoFocus,inputRef:function inputRef(node){if(node){_this2.inputRef=node}},autoComplete:"off",spellCheck:false,"aria-label":_i18n.i18n.translate("data.query.queryBar.searchInputAriaLabel",{defaultMessage:"Start typing to search and filter the {pageType} page",values:{pageType:this.services.appName}}),type:"text","aria-autocomplete":"list","aria-controls":this.state.isSuggestionsVisible?"kbnTypeahead__items":undefined,"aria-activedescendant":this.state.isSuggestionsVisible&&typeof this.state.index==="number"?"suggestion-".concat(this.state.index):undefined,role:"textbox",prepend:this.props.prepend,append:_react.default.createElement(_language_switcher.QueryLanguageSwitcher,{language:this.props.query.language,anchorPosition:this.props.languageSwitcherPopoverAnchorPosition,onSelectLanguage:this.onSelectLanguage}),"data-test-subj":this.props.dataTestSubj||"queryInput"}))),_react.default.createElement(_.SuggestionsComponent,{show:this.state.isSuggestionsVisible,suggestions:this.state.suggestions.slice(0,this.state.suggestionLimit),index:this.state.index,onClick:this.onClickSuggestion,onMouseEnter:this.onMouseEnterSuggestion,loadMore:this.increaseLimit})))}}]);return QueryStringInputUI}(_react.Component);exports.QueryStringInputUI=QueryStringInputUI;var QueryStringInput=(0,_public.withKibana)(QueryStringInputUI);exports.QueryStringInput=QueryStringInput},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SearchBar=void 0;var _lodash=__webpack_require__(49);var _react=__webpack_require__(30);var _classnames=_interopRequireDefault(__webpack_require__(87));var _react2=_interopRequireWildcard(__webpack_require__(28));var _resizeObserverPolyfill=_interopRequireDefault(__webpack_require__(749));var _public=__webpack_require__(31);var _query_bar_top_row=__webpack_require__(750);var _=__webpack_require__(179);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchBarUI=function(_Component){_inherits(SearchBarUI,_Component);function SearchBarUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,SearchBarUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SearchBarUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"services",_this.props.kibana.services);_defineProperty(_assertThisInitialized(_this),"savedQueryService",_this.services.data.query.savedQueries);_defineProperty(_assertThisInitialized(_this),"filterBarRef",null);_defineProperty(_assertThisInitialized(_this),"filterBarWrapperRef",null);_defineProperty(_assertThisInitialized(_this),"state",{isFiltersVisible:true,showSaveQueryModal:false,showSaveNewQueryModal:false,showSavedQueryPopover:false,currentProps:_this.props,query:_this.props.query?_objectSpread({},_this.props.query):undefined,dateRangeFrom:(0,_lodash.get)(_this.props,"dateRangeFrom","now-15m"),dateRangeTo:(0,_lodash.get)(_this.props,"dateRangeTo","now")});_defineProperty(_assertThisInitialized(_this),"isDirty",(function(){if(!_this.props.showDatePicker&&_this.state.query&&_this.props.query){return _this.state.query.query!==_this.props.query.query}return _this.state.query&&_this.props.query&&_this.state.query.query!==_this.props.query.query||_this.state.dateRangeFrom!==_this.props.dateRangeFrom||_this.state.dateRangeTo!==_this.props.dateRangeTo}));_defineProperty(_assertThisInitialized(_this),"setFilterBarHeight",(function(){requestAnimationFrame((function(){var height=_this.filterBarRef&&_this.state.isFiltersVisible?_this.filterBarRef.clientHeight:0;if(_this.filterBarWrapperRef){_this.filterBarWrapperRef.setAttribute("style","height: ".concat(height,"px"))}}))}));_defineProperty(_assertThisInitialized(_this),"ro",new _resizeObserverPolyfill.default(_this.setFilterBarHeight));_defineProperty(_assertThisInitialized(_this),"onSave",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedQueryMeta){var saveAsNew,savedQueryAttributes,response,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:saveAsNew=_args.length>1&&_args[1]!==undefined?_args[1]:false;if(_this.state.query){_context.next=3;break}return _context.abrupt("return");case 3:savedQueryAttributes={title:savedQueryMeta.title,description:savedQueryMeta.description,query:_this.state.query};if(savedQueryMeta.shouldIncludeFilters){savedQueryAttributes.filters=_this.props.filters}if(savedQueryMeta.shouldIncludeTimefilter&&_this.state.dateRangeTo!==undefined&&_this.state.dateRangeFrom!==undefined&&_this.props.refreshInterval!==undefined&&_this.props.isRefreshPaused!==undefined){savedQueryAttributes.timefilter={from:_this.state.dateRangeFrom,to:_this.state.dateRangeTo,refreshInterval:{value:_this.props.refreshInterval,pause:_this.props.isRefreshPaused}}}_context.prev=6;if(!(_this.props.savedQuery&&!saveAsNew)){_context.next=13;break}_context.next=10;return _this.savedQueryService.saveQuery(savedQueryAttributes,{overwrite:true});case 10:response=_context.sent;_context.next=16;break;case 13:_context.next=15;return _this.savedQueryService.saveQuery(savedQueryAttributes);case 15:response=_context.sent;case 16:_this.services.notifications.toasts.addSuccess('Your query "'.concat(response.attributes.title,'" was saved'));_this.setState({showSaveQueryModal:false,showSaveNewQueryModal:false});if(_this.props.onSaved){_this.props.onSaved(response)}_context.next=25;break;case 21:_context.prev=21;_context.t0=_context["catch"](6);_this.services.notifications.toasts.addDanger("An error occured while saving your query: ".concat(_context.t0.message));throw _context.t0;case 25:case"end":return _context.stop()}}}),_callee,null,[[6,21]])})));return function(_x){return _ref.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"onInitiateSave",(function(){_this.setState({showSaveQueryModal:true})}));_defineProperty(_assertThisInitialized(_this),"onInitiateSaveNew",(function(){_this.setState({showSaveNewQueryModal:true})}));_defineProperty(_assertThisInitialized(_this),"onQueryBarChange",(function(queryAndDateRange){_this.setState({query:queryAndDateRange.query,dateRangeFrom:queryAndDateRange.dateRange.from,dateRangeTo:queryAndDateRange.dateRange.to});if(_this.props.onQueryChange){_this.props.onQueryChange(queryAndDateRange)}}));_defineProperty(_assertThisInitialized(_this),"onQueryBarSubmit",(function(queryAndDateRange){_this.setState({query:queryAndDateRange.query,dateRangeFrom:queryAndDateRange.dateRange&&queryAndDateRange.dateRange.from||_this.state.dateRangeFrom,dateRangeTo:queryAndDateRange.dateRange&&queryAndDateRange.dateRange.to||_this.state.dateRangeTo},(function(){if(_this.props.onQuerySubmit){_this.props.onQuerySubmit({query:_this.state.query,dateRange:{from:_this.state.dateRangeFrom,to:_this.state.dateRangeTo}})}}))}));_defineProperty(_assertThisInitialized(_this),"onLoadSavedQuery",(function(savedQuery){var dateRangeFrom=(0,_lodash.get)(savedQuery,"attributes.timefilter.from",_this.state.dateRangeFrom);var dateRangeTo=(0,_lodash.get)(savedQuery,"attributes.timefilter.to",_this.state.dateRangeTo);_this.setState({query:savedQuery.attributes.query,dateRangeFrom:dateRangeFrom,dateRangeTo:dateRangeTo});if(_this.props.onSavedQueryUpdated){_this.props.onSavedQueryUpdated(savedQuery)}}));return _this}_createClass(SearchBarUI,[{key:"shouldRenderQueryBar",value:function shouldRenderQueryBar(){var showDatePicker=this.props.showDatePicker||this.props.showAutoRefreshOnly;var showQueryInput=this.props.showQueryInput&&this.props.indexPatterns&&this.state.query;return this.props.showQueryBar&&(showDatePicker||showQueryInput)}},{key:"shouldRenderFilterBar",value:function shouldRenderFilterBar(){return this.props.showFilterBar&&this.props.filters&&this.props.indexPatterns&&(0,_lodash.compact)(this.props.indexPatterns).length>0}},{key:"shouldRenderTimeFilterInSavedQueryForm",value:function shouldRenderTimeFilterInSavedQueryForm(){var _this$props=this.props,dateRangeFrom=_this$props.dateRangeFrom,dateRangeTo=_this$props.dateRangeTo,showDatePicker=_this$props.showDatePicker;return showDatePicker||!showDatePicker&&dateRangeFrom!==undefined&&dateRangeTo!==undefined}},{key:"componentDidMount",value:function componentDidMount(){if(this.filterBarRef){this.setFilterBarHeight();this.ro.observe(this.filterBarRef)}}},{key:"componentDidUpdate",value:function componentDidUpdate(){if(this.filterBarRef){this.setFilterBarHeight();this.ro.unobserve(this.filterBarRef)}}},{key:"render",value:function render(){var _this2=this;var savedQueryManagement=this.state.query&&this.props.onClearSavedQuery&&_react2.default.createElement(_.SavedQueryManagementComponent,{showSaveQuery:this.props.showSaveQuery,loadedSavedQuery:this.props.savedQuery,onSave:this.onInitiateSave,onSaveAsNew:this.onInitiateSaveNew,onLoad:this.onLoadSavedQuery,savedQueryService:this.savedQueryService,onClearSavedQuery:this.props.onClearSavedQuery});var queryBar;if(this.shouldRenderQueryBar()){queryBar=_react2.default.createElement(_query_bar_top_row.QueryBarTopRow,{timeHistory:this.props.timeHistory,query:this.state.query,screenTitle:this.props.screenTitle,onSubmit:this.onQueryBarSubmit,indexPatterns:this.props.indexPatterns,isLoading:this.props.isLoading,prepend:this.props.showFilterBar?savedQueryManagement:undefined,showDatePicker:this.props.showDatePicker,dateRangeFrom:this.state.dateRangeFrom,dateRangeTo:this.state.dateRangeTo,isRefreshPaused:this.props.isRefreshPaused,refreshInterval:this.props.refreshInterval,showAutoRefreshOnly:this.props.showAutoRefreshOnly,showQueryInput:this.props.showQueryInput,onRefresh:this.props.onRefresh,onRefreshChange:this.props.onRefreshChange,onChange:this.onQueryBarChange,isDirty:this.isDirty(),customSubmitButton:this.props.customSubmitButton?this.props.customSubmitButton:undefined,dataTestSubj:this.props.dataTestSubj})}var filterBar;if(this.shouldRenderFilterBar()){var filterGroupClasses=(0,_classnames.default)("globalFilterGroup__wrapper",{"globalFilterGroup__wrapper-isVisible":this.state.isFiltersVisible});filterBar=_react2.default.createElement("div",{id:"GlobalFilterGroup",ref:function ref(node){_this2.filterBarWrapperRef=node},className:filterGroupClasses},_react2.default.createElement("div",{ref:function ref(node){_this2.filterBarRef=node}},_react2.default.createElement(_.FilterBar,{className:"globalFilterGroup__filterBar",filters:this.props.filters,onFiltersUpdated:this.props.onFiltersUpdated,indexPatterns:this.props.indexPatterns})))}return _react2.default.createElement("div",{className:"globalQueryBar"},queryBar,filterBar,this.state.showSaveQueryModal?_react2.default.createElement(_.SaveQueryForm,{savedQuery:this.props.savedQuery?this.props.savedQuery.attributes:undefined,savedQueryService:this.savedQueryService,onSave:this.onSave,onClose:function onClose(){return _this2.setState({showSaveQueryModal:false})},showFilterOption:this.props.showFilterBar,showTimeFilterOption:this.shouldRenderTimeFilterInSavedQueryForm()}):null,this.state.showSaveNewQueryModal?_react2.default.createElement(_.SaveQueryForm,{savedQueryService:this.savedQueryService,onSave:function onSave(savedQueryMeta){return _this2.onSave(savedQueryMeta,true)},onClose:function onClose(){return _this2.setState({showSaveNewQueryModal:false})},showFilterOption:this.props.showFilterBar,showTimeFilterOption:this.shouldRenderTimeFilterInSavedQueryForm()}):null)}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){if((0,_lodash.isEqual)(prevState.currentProps,nextProps)){return null}var nextQuery=null;if(nextProps.query&&nextProps.query.query!==(0,_lodash.get)(prevState,"currentProps.query.query")){nextQuery={query:nextProps.query.query,language:nextProps.query.language}}else if(nextProps.query&&prevState.query&&nextProps.query.language!==prevState.query.language){nextQuery={query:"",language:nextProps.query.language}}var nextDateRange=null;if(nextProps.dateRangeFrom!==(0,_lodash.get)(prevState,"currentProps.dateRangeFrom")||nextProps.dateRangeTo!==(0,_lodash.get)(prevState,"currentProps.dateRangeTo")){nextDateRange={dateRangeFrom:nextProps.dateRangeFrom,dateRangeTo:nextProps.dateRangeTo}}var nextState={currentProps:nextProps};if(nextQuery){nextState.query=nextQuery}if(nextDateRange){nextState.dateRangeFrom=nextDateRange.dateRangeFrom;nextState.dateRangeTo=nextDateRange.dateRangeTo}return nextState}}]);return SearchBarUI}(_react2.Component);_defineProperty(SearchBarUI,"defaultProps",{showQueryBar:true,showFilterBar:true,showDatePicker:true,showAutoRefreshOnly:false});var SearchBar=(0,_react.injectI18n)((0,_public.withKibana)(SearchBarUI));exports.SearchBar=SearchBar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSearchBar=createSearchBar;var _react=_interopRequireWildcard(__webpack_require__(28));var _public=__webpack_require__(31);var _search_bar=__webpack_require__(354);var _use_filter_manager=__webpack_require__(751);var _use_timefilter=__webpack_require__(752);var _use_saved_query=__webpack_require__(753);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var defaultFiltersUpdated=function defaultFiltersUpdated(queryService){return function(filters){queryService.filterManager.setFilters(filters)}};var defaultOnRefreshChange=function defaultOnRefreshChange(queryService){var timefilter=queryService.timefilter.timefilter;return function(options){timefilter.setRefreshInterval({value:options.refreshInterval,pause:options.isPaused})}};var defaultOnQuerySubmit=function defaultOnQuerySubmit(props,queryService,currentQuery,setQueryStringState){if(!props.useDefaultBehaviors)return props.onQuerySubmit;var timefilter=queryService.timefilter.timefilter;return function(payload){var isUpdate=!_.isEqual(timefilter.getTime(),payload.dateRange)||!_.isEqual(payload.query,currentQuery);if(isUpdate){timefilter.setTime(payload.dateRange);setQueryStringState(payload.query)}else{if(props.onQuerySubmit)props.onQuerySubmit({dateRange:timefilter.getTime(),query:currentQuery},false)}}};var defaultOnClearSavedQuery=function defaultOnClearSavedQuery(props,clearSavedQuery){if(!props.useDefaultBehaviors)return props.onClearSavedQuery;return function(){clearSavedQuery();if(props.onSavedQueryIdChange)props.onSavedQueryIdChange()}};var defaultOnSavedQueryUpdated=function defaultOnSavedQueryUpdated(props,setSavedQuery){if(!props.useDefaultBehaviors)return props.onSavedQueryUpdated;return function(savedQuery){setSavedQuery(savedQuery);if(props.onSavedQueryIdChange)props.onSavedQueryIdChange(savedQuery.id)}};var overrideDefaultBehaviors=function overrideDefaultBehaviors(props){return props.useDefaultBehaviors?{}:props};function createSearchBar(_ref){var core=_ref.core,storage=_ref.storage,data=_ref.data;return function(props){var useDefaultBehaviors=props.useDefaultBehaviors;var queryRef=(0,_react.useRef)(props.query);var onQuerySubmitRef=(0,_react.useRef)(props.onQuerySubmit);var defaultQuery={query:"",language:storage.get("kibana.userQueryLanguage")||core.uiSettings.get("search:queryLanguage")};var _useState=(0,_react.useState)(props.query||defaultQuery),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];(0,_react.useEffect)((function(){if(props.query!==queryRef.current){queryRef.current=props.query;setQuery(props.query||defaultQuery)}}),[defaultQuery,props.query]);(0,_react.useEffect)((function(){if(props.onQuerySubmit!==onQuerySubmitRef.current){onQuerySubmitRef.current=props.onQuerySubmit}}),[props.onQuerySubmit]);var _useFilterManager=(0,_use_filter_manager.useFilterManager)({filters:props.filters,filterManager:data.query.filterManager}),filters=_useFilterManager.filters;var _useTimefilter=(0,_use_timefilter.useTimefilter)({dateRangeFrom:props.dateRangeFrom,dateRangeTo:props.dateRangeTo,refreshInterval:props.refreshInterval,isRefreshPaused:props.isRefreshPaused,timefilter:data.query.timefilter.timefilter}),timeRange=_useTimefilter.timeRange,refreshInterval=_useTimefilter.refreshInterval;var _useSavedQuery=(0,_use_saved_query.useSavedQuery)({queryService:data.query,setQuery:setQuery,savedQueryId:props.savedQueryId,notifications:core.notifications,defaultLanguage:defaultQuery.language}),savedQuery=_useSavedQuery.savedQuery,setSavedQuery=_useSavedQuery.setSavedQuery,clearSavedQuery=_useSavedQuery.clearSavedQuery;(0,_react.useEffect)((function(){if(!useDefaultBehaviors||!onQuerySubmitRef.current)return;onQuerySubmitRef.current({dateRange:timeRange,query:query},true)}),[query,timeRange,useDefaultBehaviors]);return _react.default.createElement(_public.KibanaContextProvider,{services:_objectSpread({appName:props.appName,data:data,storage:storage},core)},_react.default.createElement(_search_bar.SearchBar,_extends({showAutoRefreshOnly:props.showAutoRefreshOnly,showDatePicker:props.showDatePicker,showFilterBar:props.showFilterBar,showQueryBar:props.showQueryBar,showQueryInput:props.showQueryInput,showSaveQuery:props.showSaveQuery,screenTitle:props.screenTitle,indexPatterns:props.indexPatterns,timeHistory:data.query.timefilter.history,dateRangeFrom:timeRange.from,dateRangeTo:timeRange.to,refreshInterval:refreshInterval.value,isRefreshPaused:refreshInterval.pause,filters:filters,query:query,onFiltersUpdated:defaultFiltersUpdated(data.query),onRefreshChange:defaultOnRefreshChange(data.query),savedQuery:savedQuery,onQuerySubmit:defaultOnQuerySubmit(props,data.query,query,setQuery),onClearSavedQuery:defaultOnClearSavedQuery(props,clearSavedQuery),onSavedQueryUpdated:defaultOnSavedQueryUpdated(props,setSavedQuery),onSaved:defaultOnSavedQueryUpdated(props,setSavedQuery)},overrideDefaultBehaviors(props))))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.get=get;function get(obj,path){if(typeof path==="string"){if(path.includes(".")){throw new Error("Using dots in `get` with a string is not allowed, use array instead")}return obj[path]}var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=path[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var key=_step.value;obj=obj[key]}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return obj}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFailurePropsForSummary=getFailurePropsForSummary;exports.getFailureSummaryText=getFailureSummaryText;exports.getFailureSummaryDetailsText=getFailureSummaryDetailsText;exports.ShardFailureDescriptionHeader=ShardFailureDescriptionHeader;var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getFailurePropsForSummary(failure){var failureDetailProps=["shard","index","node"];return failureDetailProps.filter((function(key){return typeof failure[key]==="number"||typeof failure[key]==="string"})).map((function(key){return{key:key,value:String(failure[key])}}))}function getFailureSummaryText(failure,failureDetails){var failureName=failure.reason.type;var displayDetails=typeof failureDetails==="string"?failureDetails:getFailureSummaryDetailsText(failure);return _i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.failureHeader",{defaultMessage:"{failureName} at {failureDetails}",values:{failureName:failureName,failureDetails:displayDetails},description:'Summary of shard failures, e.g. "IllegalArgumentException at shard 0 node xyz"'})}function getFailureSummaryDetailsText(failure){return getFailurePropsForSummary(failure).map((function(_ref){var key=_ref.key,value=_ref.value;return"".concat(key,": ").concat(value)})).join(", ")}function ShardFailureDescriptionHeader(props){var failureDetails=getFailurePropsForSummary(props).map((function(kv){return _react.default.createElement("span",{className:"shardFailureModal__keyValueTitle",key:kv.key},_react.default.createElement(_eui.EuiCode,null,kv.key)," ",kv.value)}));return _react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h2",null,getFailureSummaryText(props,""),failureDetails))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SearchError",{enumerable:true,get:function get(){return _search_error.SearchError}});Object.defineProperty(exports,"getSearchErrorType",{enumerable:true,get:function get(){return _search_error.getSearchErrorType}});Object.defineProperty(exports,"SearchStrategyProvider",{enumerable:true,get:function get(){return _types.SearchStrategyProvider}});Object.defineProperty(exports,"SearchStrategySearchParams",{enumerable:true,get:function get(){return _types.SearchStrategySearchParams}});Object.defineProperty(exports,"defaultSearchStrategy",{enumerable:true,get:function get(){return _default_search_strategy.defaultSearchStrategy}});var _search_error=__webpack_require__(783);var _types=__webpack_require__(784);var _default_search_strategy=__webpack_require__(785)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"tabifyAggResponse",{enumerable:true,get:function get(){return _tabify.tabifyAggResponse}});Object.defineProperty(exports,"tabifyGetColumns",{enumerable:true,get:function get(){return _get_columns.tabifyGetColumns}});Object.defineProperty(exports,"TabbedTable",{enumerable:true,get:function get(){return _types.TabbedTable}});Object.defineProperty(exports,"TabbedAggRow",{enumerable:true,get:function get(){return _types.TabbedAggRow}});Object.defineProperty(exports,"TabbedAggColumn",{enumerable:true,get:function get(){return _types.TabbedAggColumn}});var _tabify=__webpack_require__(789);var _get_columns=__webpack_require__(361);var _types=__webpack_require__(792)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tabifyGetColumns=tabifyGetColumns;var _lodash=__webpack_require__(49);var getColumn=function getColumn(agg,i){return{aggConfig:agg,id:"col-".concat(i,"-").concat(agg.id),name:agg.makeLabel()}};function tabifyGetColumns(aggs,minimalColumns){if(minimalColumns){return aggs.map((function(agg,i){return getColumn(agg,i)}))}var columns=[];var grouped=(0,_lodash.groupBy)(aggs,(function(agg){return agg.type.type}));if(!grouped.buckets){return grouped.metrics.map((function(agg,i){return getColumn(agg,i)}))}var columnIndex=0;grouped.buckets.forEach((function(agg){columns.push(getColumn(agg,columnIndex++));grouped.metrics.forEach((function(metric){columns.push(getColumn(metric,columnIndex++))}))}));return columns}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={plugin:true,Plugin:true,Setup:true,Start:true};exports.plugin=plugin;Object.defineProperty(exports,"Plugin",{enumerable:true,get:function get(){return _plugin.InspectorPublicPlugin}});Object.defineProperty(exports,"Setup",{enumerable:true,get:function get(){return _plugin.Setup}});Object.defineProperty(exports,"Start",{enumerable:true,get:function get(){return _plugin.Start}});__webpack_require__(794);var _plugin=__webpack_require__(799);var _types=__webpack_require__(829);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _adapters=__webpack_require__(229);Object.keys(_adapters).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _adapters[key]}})}));function plugin(initializerContext){return new _plugin.InspectorPublicPlugin(initializerContext)}},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _calculate_auto_time_expression=__webpack_require__(837);Object.keys(_calculate_auto_time_expression).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _calculate_auto_time_expression[key]}})}));var _to_angular_json=__webpack_require__(838);Object.keys(_to_angular_json).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _to_angular_json[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _agg=__webpack_require__(333);Object.keys(_agg).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _agg[key]}})}));var _base=__webpack_require__(114);Object.keys(_base).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _base[key]}})}));var _field=__webpack_require__(334);Object.keys(_field).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _field[key]}})}));var _filter=__webpack_require__(850);Object.keys(_filter).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _filter[key]}})}));var _json=__webpack_require__(337);Object.keys(_json).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _json[key]}})}));var _optioned=__webpack_require__(224);Object.keys(_optioned).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _optioned[key]}})}));var _string=__webpack_require__(336);Object.keys(_string).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _string[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.esSearchStrategyProvider=void 0;var _search2=__webpack_require__(169);var _sync_search_strategy=__webpack_require__(183);var _get_es_preference=__webpack_require__(369);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var esSearchStrategyProvider=function esSearchStrategyProvider(context){var syncStrategyProvider=context.getSearchStrategy(_sync_search_strategy.SYNC_SEARCH_STRATEGY);var _syncStrategyProvider=syncStrategyProvider(context),_search=_syncStrategyProvider.search;return{search:function search(request,options){request.params=_objectSpread({preference:(0,_get_es_preference.getEsPreference)(context.core.uiSettings)},request.params);return _search(_objectSpread({},request,{serverStrategy:_search2.ES_SEARCH_STRATEGY}),options)}}};exports.esSearchStrategyProvider=esSearchStrategyProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEsPreference=getEsPreference;var defaultSessionId="".concat(Date.now());function getEsPreference(uiSettings){var sessionId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:defaultSessionId;var setPreference=uiSettings.get("courier:setRequestPreference");if(setPreference==="sessionId")return"".concat(sessionId);var customPreference=uiSettings.get("courier:customRequestPreference");return setPreference==="custom"?customPreference:undefined}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getEsClient",{enumerable:true,get:function get(){return _get_es_client.getEsClient}});Object.defineProperty(exports,"SearchRequest",{enumerable:true,get:function get(){return _types.SearchRequest}});Object.defineProperty(exports,"SearchResponse",{enumerable:true,get:function get(){return _types.SearchResponse}});Object.defineProperty(exports,"LegacyApiCaller",{enumerable:true,get:function get(){return _types.LegacyApiCaller}});var _get_es_client=__webpack_require__(856);var _types=__webpack_require__(857)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchInterceptor=void 0;var _rxjs=__webpack_require__(33);var _operators=__webpack_require__(6);var _utils=__webpack_require__(146);var _request_timeout_error=__webpack_require__(372);var _long_query_notification=__webpack_require__(858);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchInterceptor=function SearchInterceptor(toasts,application,requestTimeout){var _this=this;_classCallCheck(this,SearchInterceptor);this.toasts=toasts;this.application=application;this.requestTimeout=requestTimeout;_defineProperty(this,"abortController",new AbortController);_defineProperty(this,"pendingCount",0);_defineProperty(this,"pendingCount$",new _rxjs.BehaviorSubject(this.pendingCount));_defineProperty(this,"timeoutSubscriptions",new Set);_defineProperty(this,"longRunningToast",void 0);_defineProperty(this,"getPendingCount$",(function(){return _this.pendingCount$.asObservable()}));_defineProperty(this,"search",(function(search,request,options){return(0,_rxjs.defer)((function(){_this.pendingCount$.next(++_this.pendingCount);var timeoutController=new AbortController;var timeoutSignal=timeoutController.signal;var timeout$=(0,_rxjs.timer)(_this.requestTimeout);var subscription=timeout$.subscribe((function(){return timeoutController.abort()}));_this.timeoutSubscriptions.add(subscription);var timeoutError$=(0,_rxjs.fromEvent)(timeoutSignal,"abort").pipe((0,_operators.mergeMapTo)((0,_rxjs.throwError)(new _request_timeout_error.RequestTimeoutError)));var notificationSubscription=(0,_rxjs.timer)(1e4).subscribe(_this.showToast);var signals=[_this.abortController.signal,timeoutSignal].concat(_toConsumableArray((options===null||options===void 0?void 0:options.signal)?[options.signal]:[]));var combinedSignal=(0,_utils.getCombinedSignal)(signals);return search(request,_objectSpread({},options,{signal:combinedSignal})).pipe((0,_operators.takeUntil)(timeoutError$),(0,_operators.finalize)((function(){_this.pendingCount$.next(--_this.pendingCount);_this.timeoutSubscriptions.delete(subscription);notificationSubscription.unsubscribe()})))}))}));_defineProperty(this,"showToast",(function(){if(_this.longRunningToast)return;_this.longRunningToast=_this.toasts.addInfo({title:"Your query is taking awhile",text:(0,_long_query_notification.getLongQueryNotification)({application:_this.application})},{toastLifeTimeMs:1e6})}));_defineProperty(this,"hideToast",(function(){if(_this.longRunningToast){_this.toasts.remove(_this.longRunningToast);delete _this.longRunningToast}}));this.getPendingCount$().pipe((0,_operators.filter)((function(count){return count===0}))).subscribe(this.hideToast)};exports.SearchInterceptor=SearchInterceptor},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestTimeoutError=void 0;function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var RequestTimeoutError=function(_Error){_inherits(RequestTimeoutError,_Error);function RequestTimeoutError(){var _this;var message=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"Request timed out";_classCallCheck(this,RequestTimeoutError);_this=_possibleConstructorReturn(this,_getPrototypeOf(RequestTimeoutError).call(this,message));_this.message=message;_this.name="RequestTimeoutError";return _this}return RequestTimeoutError}(_wrapNativeSuper(Error));exports.RequestTimeoutError=RequestTimeoutError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _ui_actions_service=__webpack_require__(862);Object.keys(_ui_actions_service).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _ui_actions_service[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TriggerInternal=void 0;var _trigger_contract=__webpack_require__(375);var _context_menu=__webpack_require__(376);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TriggerInternal=function(){function TriggerInternal(service,trigger){_classCallCheck(this,TriggerInternal);this.service=service;this.trigger=trigger;_defineProperty(this,"contract",new _trigger_contract.TriggerContract(this))}_createClass(TriggerInternal,[{key:"execute",value:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee(context){var triggerId,actions;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:triggerId=this.trigger.id;_context.next=3;return this.service.getTriggerCompatibleActions(triggerId,context);case 3:actions=_context.sent;if(actions.length){_context.next=6;break}throw new Error("No compatible actions found to execute for trigger [triggerId = ".concat(triggerId,"]."));case 6:if(!(actions.length===1)){_context.next=10;break}_context.next=9;return this.executeSingleAction(actions[0],context);case 9:return _context.abrupt("return");case 10:_context.next=12;return this.executeMultipleActions(actions,context);case 12:case"end":return _context.stop()}}}),_callee,this)})));function execute(_x){return _execute.apply(this,arguments)}return execute}()},{key:"executeSingleAction",value:function(){var _executeSingleAction=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(action,context){var href;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:href=action.getHref&&action.getHref(context);if(!href){_context2.next=4;break}window.location.href=href;return _context2.abrupt("return");case 4:_context2.next=6;return action.execute(context);case 6:case"end":return _context2.stop()}}}),_callee2)})));function executeSingleAction(_x2,_x3){return _executeSingleAction.apply(this,arguments)}return executeSingleAction}()},{key:"executeMultipleActions",value:function(){var _executeMultipleActions=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(actions,context){var panel,session;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return(0,_context_menu.buildContextMenuForActions)({actions:actions,actionContext:context,closeMenu:function closeMenu(){return session.close()}});case 2:panel=_context3.sent;session=(0,_context_menu.openContextMenu)([panel]);case 4:case"end":return _context3.stop()}}}),_callee3)})));function executeMultipleActions(_x4,_x5){return _executeMultipleActions.apply(this,arguments)}return executeMultipleActions}()}]);return TriggerInternal}();exports.TriggerInternal=TriggerInternal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TriggerContract=void 0;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TriggerContract=function TriggerContract(internal){var _this=this;_classCallCheck(this,TriggerContract);this.internal=internal;_defineProperty(this,"id",void 0);_defineProperty(this,"title",void 0);_defineProperty(this,"description",void 0);_defineProperty(this,"exec",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(context){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.internal.execute(context);case 2:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}());this.id=this.internal.trigger.id;this.title=this.internal.trigger.title;this.description=this.internal.trigger.description};exports.TriggerContract=TriggerContract},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"buildContextMenuForActions",{enumerable:true,get:function get(){return _build_eui_context_menu_panels.buildContextMenuForActions}});Object.defineProperty(exports,"openContextMenu",{enumerable:true,get:function get(){return _open_context_menu.openContextMenu}});var _build_eui_context_menu_panels=__webpack_require__(863);var _open_context_menu=__webpack_require__(864)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"applyFiltersPopover",{enumerable:true,get:function get(){return _apply_filters_popover.applyFiltersPopover}});var _apply_filters_popover=__webpack_require__(876)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFiltersFromEvent=void 0;var _expressions=__webpack_require__(178);var _public=__webpack_require__(63);var _services=__webpack_require__(61);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var getOtherBucketFilterTerms=function getOtherBucketFilterTerms(table,columnIndex,rowIndex){if(rowIndex===-1){return[]}var rows=table.rows.filter((function(row){return table.columns.every((function(column,i){return row[column.id]===table.rows[rowIndex][column.id]||i>=columnIndex}))}));var terms=rows.map((function(row){return row[table.columns[columnIndex].id]}));return _toConsumableArray(new Set(terms.filter((function(term){var notOther=term!=="__other__";var notMissing=term!=="__missing__";return notOther&&notMissing}))))};var createFilter=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(table,columnIndex,rowIndex){var column,aggConfig,filter,value,terms;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!table||!table.columns||!table.columns[columnIndex])){_context.next=2;break}return _context.abrupt("return");case 2:column=table.columns[columnIndex];if(!(!column.meta||!column.meta.indexPatternId)){_context.next=5;break}return _context.abrupt("return");case 5:_context.t0=_expressions.deserializeAggConfig;_context.t1=column.meta.type;_context.t2=column.meta.aggConfigParams?column.meta.aggConfigParams:{};_context.next=10;return(0,_services.getIndexPatterns)().get(column.meta.indexPatternId);case 10:_context.t3=_context.sent;_context.t4={type:_context.t1,aggConfigParams:_context.t2,indexPattern:_context.t3};aggConfig=(0,_context.t0)(_context.t4);filter=[];value=rowIndex>-1?table.rows[rowIndex][column.id]:null;if(!(value===null||value===undefined||!aggConfig.isFilterable())){_context.next=17;break}return _context.abrupt("return");case 17:if(aggConfig.type.name==="terms"&&aggConfig.params.otherBucket){terms=getOtherBucketFilterTerms(table,columnIndex,rowIndex);filter=aggConfig.createFilter(value,{terms:terms})}else{filter=aggConfig.createFilter(value)}if(filter){_context.next=20;break}return _context.abrupt("return");case 20:if(!Array.isArray(filter)){filter=[filter]}return _context.abrupt("return",filter);case 22:case"end":return _context.stop()}}}),_callee)})));return function createFilter(_x,_x2,_x3){return _ref.apply(this,arguments)}}();var createFiltersFromEvent=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(dataPoints,negate){var filters;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:filters=[];_context3.next=3;return Promise.all(dataPoints.filter((function(point){return point})).map(function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(val){var table,column,row,filter;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:table=val.table,column=val.column,row=val.row;_context2.next=3;return createFilter(table,column,row);case 3:_context2.t0=_context2.sent;if(_context2.t0){_context2.next=6;break}_context2.t0=[];case 6:filter=_context2.t0;if(filter){filter.forEach((function(f){if(negate){f=_public.esFilters.toggleFilterNegated(f)}filters.push(f)}))}case 8:case"end":return _context2.stop()}}}),_callee2)})));return function(_x6){return _ref3.apply(this,arguments)}}()));case 3:return _context3.abrupt("return",filters);case 4:case"end":return _context3.stop()}}}),_callee3)})));return function createFiltersFromEvent(_x4,_x5){return _ref2.apply(this,arguments)}}();exports.createFiltersFromEvent=createFiltersFromEvent},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.selectRangeAction=selectRangeAction;exports.ACTION_SELECT_RANGE=void 0;var _i18n=__webpack_require__(1);var _public=__webpack_require__(136);var _brush_event=__webpack_require__(878);var _=__webpack_require__(63);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var ACTION_SELECT_RANGE="ACTION_SELECT_RANGE";exports.ACTION_SELECT_RANGE=ACTION_SELECT_RANGE;function isCompatible(_x){return _isCompatible.apply(this,arguments)}function _isCompatible(){_isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(context){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.t0=Boolean;_context2.next=4;return(0,_brush_event.onBrushEvent)(context.data);case 4:_context2.t1=_context2.sent;return _context2.abrupt("return",(0,_context2.t0)(_context2.t1));case 8:_context2.prev=8;_context2.t2=_context2["catch"](0);return _context2.abrupt("return",false);case 11:case"end":return _context2.stop()}}}),_callee2,null,[[0,8]])})));return _isCompatible.apply(this,arguments)}function selectRangeAction(filterManager,timeFilter){return(0,_public.createAction)({type:ACTION_SELECT_RANGE,id:ACTION_SELECT_RANGE,getDisplayName:function getDisplayName(){return _i18n.i18n.translate("data.filter.applyFilterActionTitle",{defaultMessage:"Apply filter to current view"})},isCompatible:isCompatible,execute:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var timeFieldName,data,filter,selectedFilters,_esFilters$extractTim,timeRangeFilter,restOfFilters;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:timeFieldName=_ref.timeFieldName,data=_ref.data;_context.next=3;return isCompatible({timeFieldName:timeFieldName,data:data});case 3:if(_context.sent){_context.next=5;break}throw new _public.IncompatibleActionError;case 5:_context.next=7;return(0,_brush_event.onBrushEvent)(data);case 7:filter=_context.sent;if(filter){_context.next=10;break}return _context.abrupt("return");case 10:selectedFilters=_.esFilters.mapAndFlattenFilters([filter]);if(timeFieldName){_esFilters$extractTim=_.esFilters.extractTimeFilter(timeFieldName,selectedFilters),timeRangeFilter=_esFilters$extractTim.timeRangeFilter,restOfFilters=_esFilters$extractTim.restOfFilters;filterManager.addFilters(restOfFilters);if(timeRangeFilter){_.esFilters.changeTimeFilter(timeFilter,timeRangeFilter)}}else{filterManager.addFilters(selectedFilters)}case 12:case"end":return _context.stop()}}}),_callee)})));function execute(_x2){return _execute.apply(this,arguments)}return execute}()})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.valueClickAction=valueClickAction;exports.ACTION_VALUE_CLICK=void 0;var _i18n=__webpack_require__(1);var _public=__webpack_require__(31);var _public2=__webpack_require__(136);var _services=__webpack_require__(61);var _apply_filters=__webpack_require__(377);var _create_filters_from_event=__webpack_require__(378);var _=__webpack_require__(63);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var ACTION_VALUE_CLICK="ACTION_VALUE_CLICK";exports.ACTION_VALUE_CLICK=ACTION_VALUE_CLICK;function isCompatible(_x){return _isCompatible.apply(this,arguments)}function _isCompatible(){_isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(context){var filters;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return(0,_create_filters_from_event.createFiltersFromEvent)(context.data.data||[context.data],context.data.negate);case 3:_context2.t0=_context2.sent;if(_context2.t0){_context2.next=6;break}_context2.t0=[];case 6:filters=_context2.t0;return _context2.abrupt("return",filters.length>0);case 10:_context2.prev=10;_context2.t1=_context2["catch"](0);return _context2.abrupt("return",false);case 13:case"end":return _context2.stop()}}}),_callee2,null,[[0,10]])})));return _isCompatible.apply(this,arguments)}function valueClickAction(filterManager,timeFilter){return(0,_public2.createAction)({type:ACTION_VALUE_CLICK,id:ACTION_VALUE_CLICK,getDisplayName:function getDisplayName(){return _i18n.i18n.translate("data.filter.applyFilterActionTitle",{defaultMessage:"Apply filter to current view"})},isCompatible:isCompatible,execute:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var timeFieldName,data,filters,selectedFilters,indexPatterns,filterSelectionPromise,_esFilters$extractTim,timeRangeFilter,restOfFilters;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:timeFieldName=_ref.timeFieldName,data=_ref.data;_context.next=3;return isCompatible({timeFieldName:timeFieldName,data:data});case 3:if(_context.sent){_context.next=5;break}throw new _public2.IncompatibleActionError;case 5:_context.next=7;return(0,_create_filters_from_event.createFiltersFromEvent)(data.data||[data],data.negate);case 7:_context.t0=_context.sent;if(_context.t0){_context.next=10;break}_context.t0=[];case 10:filters=_context.t0;selectedFilters=_.esFilters.mapAndFlattenFilters(filters);if(!(selectedFilters.length>1)){_context.next=20;break}_context.next=15;return Promise.all(filters.map((function(filter){return(0,_services.getIndexPatterns)().get(filter.meta.index)})));case 15:indexPatterns=_context.sent;filterSelectionPromise=new Promise((function(resolve){var overlay=(0,_services.getOverlays)().openModal((0,_public.toMountPoint)((0,_apply_filters.applyFiltersPopover)(filters,indexPatterns,(function(){overlay.close();resolve([])}),(function(filterSelection){overlay.close();resolve(filterSelection)}))),{"data-test-subj":"selectFilterOverlay"})}));_context.next=19;return filterSelectionPromise;case 19:selectedFilters=_context.sent;case 20:if(timeFieldName){_esFilters$extractTim=_.esFilters.extractTimeFilter(timeFieldName,selectedFilters),timeRangeFilter=_esFilters$extractTim.timeRangeFilter,restOfFilters=_esFilters$extractTim.restOfFilters;filterManager.addFilters(restOfFilters);if(timeRangeFilter){_.esFilters.changeTimeFilter(timeFilter,timeRangeFilter)}}else{filterManager.addFilters(selectedFilters)}case 21:case"end":return _context.stop()}}}),_callee)})));function execute(_x2){return _execute.apply(this,arguments)}return execute}()})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setUpgradeInProgress=setUpgradeInProgress;exports.isUpgradeInProgress=isUpgradeInProgress;var upgradeInProgress=false;function setUpgradeInProgress(show){upgradeInProgress=show}function isUpgradeInProgress(){return upgradeInProgress}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ACCESS_DENIED_PATH=exports.JOBS_LIST_PATH=exports.ML_PATH=exports.MANAGEMENT_PATH=void 0;var MANAGEMENT_PATH="/management";exports.MANAGEMENT_PATH=MANAGEMENT_PATH;var ML_PATH="".concat(MANAGEMENT_PATH,"/ml");exports.ML_PATH=ML_PATH;var JOBS_LIST_PATH="".concat(ML_PATH,"/jobs_list");exports.JOBS_LIST_PATH=JOBS_LIST_PATH;var ACCESS_DENIED_PATH="".concat(ML_PATH,"/access_denied");exports.ACCESS_DENIED_PATH=ACCESS_DENIED_PATH},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mlInMemoryTableBasicFactory=mlInMemoryTableBasicFactory;exports.SORT_DIRECTION=void 0;var _eui=__webpack_require__(29);var SORT_DIRECTION;exports.SORT_DIRECTION=SORT_DIRECTION;(function(SORT_DIRECTION){SORT_DIRECTION["ASC"]="asc";SORT_DIRECTION["DESC"]="desc"})(SORT_DIRECTION||(exports.SORT_DIRECTION=SORT_DIRECTION={}));function mlInMemoryTableBasicFactory(){return _eui.EuiInMemoryTable}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLink=getLink;exports.ResultLinks=ResultLinks;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);var _job_service=__webpack_require__(58);var _i18n=__webpack_require__(1);var _dependency_cache=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getLink(location,jobs){var basePath=(0,_dependency_cache.getBasePath)();var resultsPageUrl=_job_service.mlJobService.createResultsUrlForJobs(jobs,location);return"".concat(basePath.get(),"/app/ml").concat(resultsPageUrl)}function ResultLinks(_ref){var jobs=_ref.jobs;var openJobsInSingleMetricViewerText=_i18n.i18n.translate("xpack.ml.jobsList.resultActions.openJobsInSingleMetricViewerText",{defaultMessage:"Open {jobsCount, plural, one {{jobId}} other {# jobs}} in Single Metric Viewer",values:{jobsCount:jobs.length,jobId:jobs[0].id}});var openJobsInAnomalyExplorerText=_i18n.i18n.translate("xpack.ml.jobsList.resultActions.openJobsInAnomalyExplorerText",{defaultMessage:"Open {jobsCount, plural, one {{jobId}} other {# jobs}} in Anomaly Explorer",values:{jobsCount:jobs.length,jobId:jobs[0].id}});var singleMetricVisible=jobs.length<2;var singleMetricEnabled=jobs.length===1&&jobs[0].isSingleMetricViewerJob;var jobActionsDisabled=jobs.length===1&&jobs[0].deleting===true;return _react.default.createElement(_react.default.Fragment,null,singleMetricVisible&&_react.default.createElement(_eui.EuiToolTip,{position:"bottom",content:openJobsInSingleMetricViewerText},_react.default.createElement(_eui.EuiButtonIcon,{href:getLink("timeseriesexplorer",jobs),iconType:"stats","aria-label":openJobsInSingleMetricViewerText,className:"results-button",isDisabled:singleMetricEnabled===false||jobActionsDisabled===true,"data-test-subj":"openJobsInSingleMetricViewer openJobsInSingleMetricViewer-".concat(jobs[0].id)})),_react.default.createElement(_eui.EuiToolTip,{position:"bottom",content:openJobsInAnomalyExplorerText},_react.default.createElement(_eui.EuiButtonIcon,{href:getLink("explorer",jobs),iconType:"tableOfContents","aria-label":openJobsInAnomalyExplorerText,className:"results-button",isDisabled:jobActionsDisabled===true,"data-test-subj":"openJobsInAnomalyExplorer openJobsInSingleAnomalyExplorer-".concat(jobs[0].id)})),_react.default.createElement("div",{className:"actions-border"}))}ResultLinks.propTypes={jobs:_propTypes.default.array.isRequired}},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ANOMALY_THRESHOLD=exports.ANOMALY_SEVERITY=void 0;var ANOMALY_SEVERITY;exports.ANOMALY_SEVERITY=ANOMALY_SEVERITY;(function(ANOMALY_SEVERITY){ANOMALY_SEVERITY["CRITICAL"]="critical";ANOMALY_SEVERITY["MAJOR"]="major";ANOMALY_SEVERITY["MINOR"]="minor";ANOMALY_SEVERITY["WARNING"]="warning";ANOMALY_SEVERITY["LOW"]="low";ANOMALY_SEVERITY["UNKNOWN"]="unknown"})(ANOMALY_SEVERITY||(exports.ANOMALY_SEVERITY=ANOMALY_SEVERITY={}));var ANOMALY_THRESHOLD;exports.ANOMALY_THRESHOLD=ANOMALY_THRESHOLD;(function(ANOMALY_THRESHOLD){ANOMALY_THRESHOLD[ANOMALY_THRESHOLD["CRITICAL"]=75]="CRITICAL";ANOMALY_THRESHOLD[ANOMALY_THRESHOLD["MAJOR"]=50]="MAJOR";ANOMALY_THRESHOLD[ANOMALY_THRESHOLD["MINOR"]=25]="MINOR";ANOMALY_THRESHOLD[ANOMALY_THRESHOLD["WARNING"]=3]="WARNING";ANOMALY_THRESHOLD[ANOMALY_THRESHOLD["LOW"]=0]="LOW"})(ANOMALY_THRESHOLD||(exports.ANOMALY_THRESHOLD=ANOMALY_THRESHOLD={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isErrorResponse=isErrorResponse;function isErrorResponse(arg){var _arg$body,_arg$body2;return(arg===null||arg===void 0?void 0:(_arg$body=arg.body)===null||_arg$body===void 0?void 0:_arg$body.error)!==undefined&&(arg===null||arg===void 0?void 0:(_arg$body2=arg.body)===null||_arg$body2===void 0?void 0:_arg$body2.message)!==undefined}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getActions=exports.AnalyticsViewAction=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(29);var _check_privilege=__webpack_require__(56);var _analytics=__webpack_require__(76);var _action_clone=__webpack_require__(390);var _common=__webpack_require__(101);var _analytics_service=__webpack_require__(153);var _action_start=__webpack_require__(920);var _action_delete=__webpack_require__(921);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AnalyticsViewAction={isPrimary:true,render:function render(item){var analysisType=(0,_analytics.getAnalysisType)(item.config.analysis);var isDisabled=!(0,_analytics.isRegressionAnalysis)(item.config.analysis)&&!(0,_analytics.isOutlierAnalysis)(item.config.analysis)&&!(0,_analytics.isClassificationAnalysis)(item.config.analysis);var url=(0,_common.getResultsUrl)(item.id,analysisType);return _react.default.createElement(_eui.EuiButtonEmpty,{isDisabled:isDisabled,onClick:function onClick(){return window.location.href=url},size:"xs",color:"text",iconType:"visTable","aria-label":_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.viewAriaLabel",{defaultMessage:"View"}),"data-test-subj":"mlAnalyticsJobViewButton"},_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.viewActionName",{defaultMessage:"View"}))}};exports.AnalyticsViewAction=AnalyticsViewAction;var getActions=function getActions(createAnalyticsForm){var canStartStopDataFrameAnalytics=(0,_check_privilege.checkPermission)("canStartStopDataFrameAnalytics");return[AnalyticsViewAction,{render:function render(item){if(!(0,_common.isDataFrameAnalyticsRunning)(item.stats.state)){return _react.default.createElement(_action_start.StartAction,{item:item})}var buttonStopText=_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.stopActionName",{defaultMessage:"Stop"});var stopButton=_react.default.createElement(_eui.EuiButtonEmpty,{size:"xs",color:"text",disabled:!canStartStopDataFrameAnalytics,iconType:"stop",onClick:function onClick(){return(0,_analytics_service.stopAnalytics)(item)},"aria-label":buttonStopText,"data-test-sub":"mlAnalyticsJobStopButton"},buttonStopText);if(!canStartStopDataFrameAnalytics){return _react.default.createElement(_eui.EuiToolTip,{position:"top",content:(0,_check_privilege.createPermissionFailureMessage)("canStartStopDataFrameAnalytics")},stopButton)}return stopButton}},{render:function render(item){return _react.default.createElement(_action_delete.DeleteAction,{item:item})}},{render:function render(item){return _react.default.createElement(_action_clone.CloneAction,{item:item,createAnalyticsForm:createAnalyticsForm})}}]};exports.getActions=getActions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isAdvancedConfig=isAdvancedConfig;exports.extractCloningConfig=extractCloningConfig;exports.getCloneAction=getCloneAction;exports.CloneAction=void 0;var _eui=__webpack_require__(29);var _react=_interopRequireDefault(__webpack_require__(28));var _lodash=__webpack_require__(49);var _i18n=__webpack_require__(1);var _common=__webpack_require__(65);var _analytics=__webpack_require__(76);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function isPropDefinition(a){return a.hasOwnProperty("optional")}var getAnalyticsJobMeta=function getAnalyticsJobMeta(config){return{allow_lazy_start:{optional:true,defaultValue:false},description:{optional:true,formKey:"description"},analysis:_objectSpread({},(0,_analytics.isClassificationAnalysis)(config.analysis)?{classification:{dependent_variable:{optional:false,formKey:"dependentVariable"},training_percent:{optional:true,formKey:"trainingPercent"},eta:{optional:true},feature_bag_fraction:{optional:true},max_trees:{optional:true},gamma:{optional:true},lambda:{optional:true},num_top_classes:{optional:true,defaultValue:2},prediction_field_name:{optional:true,defaultValue:"".concat(config.analysis.classification.dependent_variable,"_prediction")},randomize_seed:{optional:true,ignore:true},num_top_feature_importance_values:{optional:true},class_assignment_objective:{optional:true,defaultValue:"maximize_minimum_recall"}}}:{},{},(0,_common.isOutlierAnalysis)(config.analysis)?{outlier_detection:{standardization_enabled:{defaultValue:true,optional:true},compute_feature_influence:{defaultValue:true,optional:true},outlier_fraction:{defaultValue:.05,optional:true},feature_influence_threshold:{optional:true},method:{optional:true},n_neighbors:{optional:true}}}:{},{},(0,_analytics.isRegressionAnalysis)(config.analysis)?{regression:{dependent_variable:{optional:false,formKey:"dependentVariable"},training_percent:{optional:true,formKey:"trainingPercent"},eta:{optional:true},feature_bag_fraction:{optional:true},max_trees:{optional:true},gamma:{optional:true},lambda:{optional:true},prediction_field_name:{optional:true,defaultValue:"".concat(config.analysis.regression.dependent_variable,"_prediction")},num_top_feature_importance_values:{optional:true},randomize_seed:{optional:true,ignore:true}}}:{}),analyzed_fields:{excludes:{optional:true,formKey:"excludes",defaultValue:[]},includes:{optional:true,defaultValue:[]}},source:{index:{formKey:"sourceIndex",optional:false},query:{optional:true,defaultValue:{match_all:{}}},_source:{optional:true}},dest:{index:{optional:false,formKey:"destinationIndex"},results_field:{optional:true,defaultValue:"ml"}},model_memory_limit:{optional:true,formKey:"modelMemoryLimit"}}};function isAdvancedConfig(config){var meta=arguments.length>1&&arguments[1]!==undefined?arguments[1]:getAnalyticsJobMeta(config);for(var configKey in config){if(config.hasOwnProperty(configKey)){var fieldConfig=config[configKey];var fieldMeta=meta[configKey];if(!fieldMeta){console.info('Property "'.concat(configKey,'" is unknown.'));return true}if(isPropDefinition(fieldMeta)){var isAdvancedSetting=fieldMeta.formKey===undefined&&fieldMeta.ignore!==true&&!(0,_lodash.isEqual)(fieldMeta.defaultValue,fieldConfig);if(isAdvancedSetting){console.info('Property "'.concat(configKey,'" is not supported by the form or has a different value to the default.'));return true}}else if(isAdvancedConfig(fieldConfig,fieldMeta)){return true}}}return false}function extractCloningConfig(_ref){var id=_ref.id,version=_ref.version,create_time=_ref.create_time,configToClone=_objectWithoutProperties(_ref,["id","version","create_time"]);return(0,_lodash.cloneDeep)(_objectSpread({},configToClone,{dest:_objectSpread({},configToClone.dest,{index:""})}))}function getCloneAction(createAnalyticsForm){var buttonText=_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.cloneJobButtonLabel",{defaultMessage:"Clone job"});var actions=createAnalyticsForm.actions;var onClick=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(item){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return actions.setJobClone(item.config);case 2:case"end":return _context.stop()}}}),_callee)})));return function onClick(_x){return _ref2.apply(this,arguments)}}();return{name:buttonText,description:buttonText,icon:"copy",onClick:onClick,"data-test-subj":"mlAnalyticsJobCloneButton"}}var CloneAction=function CloneAction(_ref3){var createAnalyticsForm=_ref3.createAnalyticsForm,item=_ref3.item;var buttonText=_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.cloneJobButtonLabel",{defaultMessage:"Clone job"});var actions=createAnalyticsForm.actions;var onClick=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return actions.setJobClone(item.config);case 2:case"end":return _context2.stop()}}}),_callee2)})));return function onClick(){return _ref4.apply(this,arguments)}}();return _react.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"mlAnalyticsJobCloneButton",size:"xs",color:"text",iconType:"copy",onClick:onClick,"aria-label":buttonText},buttonText)};exports.CloneAction=CloneAction},,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"JobsListView",{enumerable:true,get:function get(){return _jobs_list_view.JobsListView}});var _jobs_list_view=__webpack_require__(1027)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mlCalendarService=void 0;var _i18n=__webpack_require__(1);var _ml_api_service=__webpack_require__(51);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var CalendarService=function(){function CalendarService(){_classCallCheck(this,CalendarService)}_createClass(CalendarService,[{key:"assignNewJobId",value:function(){var _assignNewJobId=_asyncToGenerator(regeneratorRuntime.mark((function _callee(calendar,jobId){var calendarId;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:calendarId=calendar.calendar_id;_context.prev=1;_context.next=4;return _ml_api_service.ml.updateCalendar(_objectSpread({},calendar,{calendarId:calendarId,job_ids:[].concat(_toConsumableArray(calendar.job_ids),[jobId])}));case 4:_context.next=9;break;case 6:_context.prev=6;_context.t0=_context["catch"](1);throw new Error(_i18n.i18n.translate("xpack.ml.calendarService.assignNewJobIdErrorMessage",{defaultMessage:"Unable to assign {jobId} to {calendarId}",values:{calendarId:calendarId,jobId:jobId}}));case 9:case"end":return _context.stop()}}}),_callee,null,[[1,6]])})));function assignNewJobId(_x,_x2){return _assignNewJobId.apply(this,arguments)}return assignNewJobId}()},{key:"fetchCalendarsByIds",value:function(){var _fetchCalendarsByIds=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(calendarIds){var calendars;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return _ml_api_service.ml.calendars({calendarIds:calendarIds});case 3:calendars=_context2.sent;return _context2.abrupt("return",Array.isArray(calendars)?calendars:[calendars]);case 7:_context2.prev=7;_context2.t0=_context2["catch"](0);throw new Error(_i18n.i18n.translate("xpack.ml.calendarService.fetchCalendarsByIdsErrorMessage",{defaultMessage:"Unable to fetch calendars: {calendarIds}",values:{calendarIds:calendarIds.join(", ")}}));case 10:case"end":return _context2.stop()}}}),_callee2,null,[[0,7]])})));function fetchCalendarsByIds(_x3){return _fetchCalendarsByIds.apply(this,arguments)}return fetchCalendarsByIds}()}]);return CalendarService}();var mlCalendarService=new CalendarService;exports.mlCalendarService=mlCalendarService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"actionsMenuContent",{enumerable:true,get:function get(){return _management.actionsMenuContent}});Object.defineProperty(exports,"ResultLinks",{enumerable:true,get:function get(){return _results.ResultLinks}});var _management=__webpack_require__(1030);var _results=__webpack_require__(384)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"JobIcon",{enumerable:true,get:function get(){return _job_message_icon.JobIcon}});var _job_message_icon=__webpack_require__(1033)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"XJsonMode",{enumerable:true,get:function get(){return _x_json_mode.XJsonMode}});var _x_json_mode=__webpack_require__(1040)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ElasticsearchSqlHighlightRules=void 0;var _brace=_interopRequireDefault(__webpack_require__(195));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _brace$default$acequi=_brace.default.acequire("ace/mode/text_highlight_rules"),TextHighlightRules=_brace$default$acequi.TextHighlightRules;var oop=_brace.default.acequire("ace/lib/oop");var ElasticsearchSqlHighlightRules=function ElasticsearchSqlHighlightRules(){var keywords="describe|between|in|like|not|and|or|desc|select|from|where|having|group|by|order"+"asc|desc|pivot|for|in|as|show|columns|include|frozen|tables|escape|limit|rlike|all|distinct|is";var builtinConstants="true|false";var builtinFunctions="avg|count|first|first_value|last|last_value|max|min|sum|kurtosis|mad|percentile|percentile_rank|skewness"+"|stddev_pop|sum_of_squares|var_pop|histogram|case|coalesce|greatest|ifnull|iif|isnull|least|nullif|nvl"+"|curdate|current_date|current_time|current_timestamp|curtime|dateadd|datediff|datepart|datetrunc|date_add"+"|date_diff|date_part|date_trunc|day|dayname|dayofmonth|dayofweek|dayofyear|day_name|day_of_month|day_of_week"+"|day_of_year|dom|dow|doy|hour|hour_of_day|idow|isodayofweek|isodow|isoweek|isoweekofyear|iso_day_of_week|iso_week_of_year"+"|iw|iwoy|minute|minute_of_day|minute_of_hour|month|monthname|month_name|month_of_year|now|quarter|second|second_of_minute"+"|timestampadd|timestampdiff|timestamp_add|timestamp_diff|today|week|week_of_year|year|abs|acos|asin|atan|atan2|cbrt"+"|ceil|ceiling|cos|cosh|cot|degrees|e|exp|expm1|floor|log|log10|mod|pi|power|radians|rand|random|round|sign|signum|sin"+"|sinh|sqrt|tan|truncate|ascii|bit_length|char|character_length|char_length|concat|insert|lcase|left|length|locate"+"|ltrim|octet_length|position|repeat|replace|right|rtrim|space|substring|ucase|cast|convert|database|user|st_astext|st_aswkt"+"|st_distance|st_geometrytype|st_geomfromtext|st_wkttosql|st_x|st_y|st_z|score";var dataTypes="null|boolean|byte|short|integer|long|double|float|half_float|scaled_float|keyword|text|binary|date|ip|object|nested|time"+"|interval_year|interval_month|interval_day|interval_hour|interval_minute|interval_second|interval_year_to_month"+"inteval_day_to_hour|interval_day_to_minute|interval_day_to_second|interval_hour_to_minute|interval_hour_to_second"+"interval_minute_to_second|geo_point|geo_shape|shape";var keywordMapper=this.createKeywordMapper({keyword:[keywords,builtinFunctions,builtinConstants,dataTypes].join("|")},"identifier",true);this.$rules={start:[{token:"comment",regex:"--.*$"},{token:"comment",start:"/\\*",end:"\\*/"},{token:"string",regex:'".*?"'},{token:"constant",regex:"'.*?'"},{token:"string",regex:"`.*?`"},{token:"entity.name.function",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:keywordMapper,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"|<|\\*|\\.|\\:\\:|\\+|\\-|\\/|\\/\\/|%|&|\\^|~|<|>|<=|=>|==|!=|<>|="},{token:"paren.lparen",regex:"[\\(]"},{token:"paren.rparen",regex:"[\\)]"},{token:"text",regex:"\\s+"}]};this.normalizeRules()};exports.ElasticsearchSqlHighlightRules=ElasticsearchSqlHighlightRules;oop.inherits(ElasticsearchSqlHighlightRules,TextHighlightRules)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptHighlightRules=ScriptHighlightRules;var ace=__webpack_require__(195);var oop=ace.acequire("ace/lib/oop");var _ace$acequire=ace.acequire("ace/mode/text_highlight_rules"),TextHighlightRules=_ace$acequire.TextHighlightRules;var painlessKeywords="def|int|long|byte|String|float|double|char|null|if|else|while|do|for|continue|break|new|try|catch|throw|this|instanceof|return|ctx";function ScriptHighlightRules(){this.name="ScriptHighlightRules";this.$rules={start:[{token:"script.comment",regex:"\\/\\/.*$"},{token:"script.string.regexp",regex:"[/](?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/]\\w*\\s*(?=[).,;]|$)"},{token:"script.string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"script.constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"script.constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"script.constant.language.boolean",regex:"(?:true|false)\\b"},{token:"script.keyword",regex:painlessKeywords},{token:"script.text",regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"script.keyword.operator",regex:"\\?\\.|\\*\\.|=~|==~|!|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|->|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|typeof|void)"},{token:"script.lparen",regex:"[[({]"},{token:"script.rparen",regex:"[\\])}]"},{token:"script.text",regex:"\\s+"}]}}oop.inherits(ScriptHighlightRules,TextHighlightRules)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.collapseLiteralStrings=collapseLiteralStrings;exports.expandLiteralStrings=expandLiteralStrings;function collapseLiteralStrings(data){var splitData=data.split('"""');for(var idx=1;idx<splitData.length-1;idx+=2){splitData[idx]=JSON.stringify(splitData[idx])}return splitData.join("")}var LITERAL_STRING_CANDIDATES=/((:[\s\r\n]*)([^\\])"(\\"|[^"\n])*\\?")/g;function expandLiteralStrings(data){return data.replace(LITERAL_STRING_CANDIDATES,(function(match,string){if(string.match(/\\./)){var firstDoubleQuoteIdx=string.indexOf('"');var lastDoubleQuoteIdx=string.lastIndexOf('"');if(string[firstDoubleQuoteIdx+1]==="\\"&&string[firstDoubleQuoteIdx+2]==='"'){return string}if(string[lastDoubleQuoteIdx-1]==='"'&&string[lastDoubleQuoteIdx-2]==="\\"){return string}var colonAndAnySpacing=string.slice(0,firstDoubleQuoteIdx);var rawStringifiedValue=string.slice(firstDoubleQuoteIdx,string.length);var jsonValue=JSON.parse(rawStringifiedValue);return"".concat(colonAndAnySpacing,'"""').concat(jsonValue,'"""')}else{return string}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ANNOTATION_MAX_LENGTH_CHARS=exports.ANNOTATION_USER_UNKNOWN=exports.ANNOTATION_TYPE=void 0;var ANNOTATION_TYPE;exports.ANNOTATION_TYPE=ANNOTATION_TYPE;(function(ANNOTATION_TYPE){ANNOTATION_TYPE["ANNOTATION"]="annotation";ANNOTATION_TYPE["COMMENT"]="comment"})(ANNOTATION_TYPE||(exports.ANNOTATION_TYPE=ANNOTATION_TYPE={}));var ANNOTATION_USER_UNKNOWN="<user unknown>";exports.ANNOTATION_USER_UNKNOWN=ANNOTATION_USER_UNKNOWN;var ANNOTATION_MAX_LENGTH_CHARS=1e3;exports.ANNOTATION_MAX_LENGTH_CHARS=ANNOTATION_MAX_LENGTH_CHARS},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"JobMessages",{enumerable:true,get:function get(){return _job_messages.JobMessages}});var _job_messages=__webpack_require__(1057)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.CustomUrls=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _react2=__webpack_require__(30);var _i18n=__webpack_require__(1);var _custom_url_editor=__webpack_require__(1066);var _utils=__webpack_require__(244);var _public=__webpack_require__(31);var _edit_utils=__webpack_require__(458);var _custom_url_utils=__webpack_require__(139);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MAX_NUMBER_DASHBOARDS=1e3;var MAX_NUMBER_INDEX_PATTERNS=1e3;var CustomUrlsUI=function(_Component){_inherits(CustomUrlsUI,_Component);function CustomUrlsUI(props){var _this;_classCallCheck(this,CustomUrlsUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(CustomUrlsUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"editNewCustomUrl",(function(){_this.setState((function(prevState){var dashboards=prevState.dashboards,indexPatterns=prevState.indexPatterns;return{editorOpen:true,editorSettings:(0,_utils.getNewCustomUrlDefaults)(_this.props.job,dashboards,indexPatterns)}}))}));_defineProperty(_assertThisInitialized(_this),"setEditCustomUrl",(function(customUrl){_this.setState({editorSettings:customUrl})}));_defineProperty(_assertThisInitialized(_this),"addNewCustomUrl",(function(){(0,_utils.buildCustomUrlFromSettings)(_this.state.editorSettings).then((function(customUrl){var customUrls=[].concat(_toConsumableArray(_this.state.customUrls),[customUrl]);_this.props.setCustomUrls(customUrls);_this.setState({editorOpen:false})})).catch((function(error){console.error("Error building custom URL from settings:",error);var toasts=_this.props.kibana.services.notifications.toasts;toasts.addDanger(_i18n.i18n.translate("xpack.ml.jobsList.editJobFlyout.customUrls.addNewUrlErrorNotificationMessage",{defaultMessage:"An error occurred building the new custom URL from the supplied settings"}))}))}));_defineProperty(_assertThisInitialized(_this),"onTestButtonClick",(function(){var toasts=_this.props.kibana.services.notifications.toasts;var job=_this.props.job;(0,_utils.buildCustomUrlFromSettings)(_this.state.editorSettings).then((function(customUrl){(0,_utils.getTestUrl)(job,customUrl).then((function(testUrl){(0,_custom_url_utils.openCustomUrlWindow)(testUrl,customUrl)})).catch((function(resp){console.error("Error obtaining URL for test:",resp);toasts.addWarning(_i18n.i18n.translate("xpack.ml.jobsList.editJobFlyout.customUrls.getTestUrlErrorNotificationMessage",{defaultMessage:"An error occurred obtaining the URL to test the configuration"}))}))})).catch((function(resp){console.error("Error building custom URL from settings:",resp);toasts.addWarning(_i18n.i18n.translate("xpack.ml.jobsList.editJobFlyout.customUrls.buildUrlErrorNotificationMessage",{defaultMessage:"An error occurred building the custom URL for testing from the supplied settings"}))}))}));_defineProperty(_assertThisInitialized(_this),"closeEditor",(function(){_this.setState({editorOpen:false})}));_this.state={customUrls:[],dashboards:[],indexPatterns:[],queryEntityFieldNames:[],editorOpen:false};return _this}_createClass(CustomUrlsUI,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;var toasts=this.props.kibana.services.notifications.toasts;(0,_edit_utils.loadSavedDashboards)(MAX_NUMBER_DASHBOARDS).then((function(dashboards){_this2.setState({dashboards:dashboards})})).catch((function(resp){console.error("Error loading list of dashboards:",resp);toasts.addDanger(_i18n.i18n.translate("xpack.ml.jobsList.editJobFlyout.customUrls.loadSavedDashboardsErrorNotificationMessage",{defaultMessage:"An error occurred loading the list of saved Kibana dashboards"}))}));(0,_edit_utils.loadIndexPatterns)(MAX_NUMBER_INDEX_PATTERNS).then((function(indexPatterns){_this2.setState({indexPatterns:indexPatterns})})).catch((function(resp){console.error("Error loading list of dashboards:",resp);toasts.addDanger(_i18n.i18n.translate("xpack.ml.jobsList.editJobFlyout.customUrls.loadIndexPatternsErrorNotificationMessage",{defaultMessage:"An error occurred loading the list of saved index patterns"}))}))}},{key:"renderEditor",value:function renderEditor(){var _this$props$editMode;var _this$state=this.state,customUrls=_this$state.customUrls,editorOpen=_this$state.editorOpen,editorSettings=_this$state.editorSettings,dashboards=_this$state.dashboards,indexPatterns=_this$state.indexPatterns,queryEntityFieldNames=_this$state.queryEntityFieldNames;var editMode=(_this$props$editMode=this.props.editMode)!==null&&_this$props$editMode!==void 0?_this$props$editMode:"inline";var editor=_react.default.createElement(_custom_url_editor.CustomUrlEditor,{customUrl:editorSettings,setEditCustomUrl:this.setEditCustomUrl,savedCustomUrls:customUrls,dashboards:dashboards,indexPatterns:indexPatterns,queryEntityFieldNames:queryEntityFieldNames});var isValidEditorSettings=editorOpen&&editorSettings!==undefined?(0,_utils.isValidCustomUrlSettings)(editorSettings,customUrls):true;var addButton=_react.default.createElement(_eui.EuiButton,{onClick:this.addNewCustomUrl,isDisabled:!isValidEditorSettings,"data-test-subj":"mlJobAddCustomUrl"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.customUrls.addButtonLabel",defaultMessage:"Add"}));var testButton=_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"popout",iconSide:"right",onClick:this.onTestButtonClick,isDisabled:!isValidEditorSettings},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.customUrls.testButtonLabel",defaultMessage:"Test"}));return editMode==="inline"?_react.default.createElement(_eui.EuiPanel,{className:"edit-custom-url-panel"},_react.default.createElement(_eui.EuiButtonIcon,{color:"text",onClick:this.closeEditor,iconType:"cross","aria-label":_i18n.i18n.translate("xpack.ml.jobsList.editJobFlyout.customUrls.closeEditorAriaLabel",{defaultMessage:"Close custom URL editor"}),className:"close-editor-button"}),editor,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},addButton),_react.default.createElement(_eui.EuiFlexItem,{grow:false},testButton))):_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiModal,{onClose:this.closeEditor,initialFocus:"[name=label]",style:{width:500},"data-test-subj":"mlJobNewCustomUrlFormModal"},_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.customUrls.addCustomUrlButtonLabel",defaultMessage:"Add custom URL"}))),_react.default.createElement(_eui.EuiModalBody,null,editor),_react.default.createElement(_eui.EuiModalFooter,null,testButton,addButton)))}},{key:"render",value:function render(){var _this$state2=this.state,customUrls=_this$state2.customUrls,editorOpen=_this$state2.editorOpen;var _this$props$editMode2=this.props.editMode,editMode=_this$props$editMode2===void 0?"inline":_this$props$editMode2;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),(!editorOpen||editMode==="modal")&&_react.default.createElement(_eui.EuiButton,{size:"s",onClick:this.editNewCustomUrl,"data-test-subj":"mlJobOpenCustomUrlFormButton"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.customUrls.addCustomUrlButtonLabel",defaultMessage:"Add custom URL"})),editorOpen&&this.renderEditor(),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_custom_url_editor.CustomUrlList,{job:this.props.job,customUrls:customUrls,setCustomUrls:this.props.setCustomUrls}))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props){return{job:props.job,customUrls:props.jobCustomUrls,queryEntityFieldNames:(0,_utils.getQueryEntityFieldNames)(props.job)}}}]);return CustomUrlsUI}(_react.Component);var CustomUrls=(0,_public.withKibana)(CustomUrlsUI);exports.CustomUrls=CustomUrls},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;Object.defineProperty(exports,"EmbeddableSetup",{enumerable:true,get:function get(){return _plugin.EmbeddableSetup}});Object.defineProperty(exports,"EmbeddableStart",{enumerable:true,get:function get(){return _plugin.EmbeddableStart}});Object.defineProperty(exports,"Adapters",{enumerable:true,get:function get(){return _lib.Adapters}});Object.defineProperty(exports,"ACTION_ADD_PANEL",{enumerable:true,get:function get(){return _lib.ACTION_ADD_PANEL}});Object.defineProperty(exports,"AddPanelAction",{enumerable:true,get:function get(){return _lib.AddPanelAction}});Object.defineProperty(exports,"ACTION_APPLY_FILTER",{enumerable:true,get:function get(){return _lib.ACTION_APPLY_FILTER}});Object.defineProperty(exports,"Container",{enumerable:true,get:function get(){return _lib.Container}});Object.defineProperty(exports,"ContainerInput",{enumerable:true,get:function get(){return _lib.ContainerInput}});Object.defineProperty(exports,"ContainerOutput",{enumerable:true,get:function get(){return _lib.ContainerOutput}});Object.defineProperty(exports,"CONTEXT_MENU_TRIGGER",{enumerable:true,get:function get(){return _lib.CONTEXT_MENU_TRIGGER}});Object.defineProperty(exports,"contextMenuTrigger",{enumerable:true,get:function get(){return _lib.contextMenuTrigger}});Object.defineProperty(exports,"ACTION_EDIT_PANEL",{enumerable:true,get:function get(){return _lib.ACTION_EDIT_PANEL}});Object.defineProperty(exports,"EditPanelAction",{enumerable:true,get:function get(){return _lib.EditPanelAction}});Object.defineProperty(exports,"Embeddable",{enumerable:true,get:function get(){return _lib.Embeddable}});Object.defineProperty(exports,"EmbeddableChildPanel",{enumerable:true,get:function get(){return _lib.EmbeddableChildPanel}});Object.defineProperty(exports,"EmbeddableChildPanelProps",{enumerable:true,get:function get(){return _lib.EmbeddableChildPanelProps}});Object.defineProperty(exports,"EmbeddableContext",{enumerable:true,get:function get(){return _lib.EmbeddableContext}});Object.defineProperty(exports,"EmbeddableFactory",{enumerable:true,get:function get(){return _lib.EmbeddableFactory}});Object.defineProperty(exports,"EmbeddableFactoryNotFoundError",{enumerable:true,get:function get(){return _lib.EmbeddableFactoryNotFoundError}});Object.defineProperty(exports,"EmbeddableFactoryRenderer",{enumerable:true,get:function get(){return _lib.EmbeddableFactoryRenderer}});Object.defineProperty(exports,"EmbeddableInput",{enumerable:true,get:function get(){return _lib.EmbeddableInput}});Object.defineProperty(exports,"EmbeddableInstanceConfiguration",{enumerable:true,get:function get(){return _lib.EmbeddableInstanceConfiguration}});Object.defineProperty(exports,"EmbeddableOutput",{enumerable:true,get:function get(){return _lib.EmbeddableOutput}});Object.defineProperty(exports,"EmbeddablePanel",{enumerable:true,get:function get(){return _lib.EmbeddablePanel}});Object.defineProperty(exports,"EmbeddableRoot",{enumerable:true,get:function get(){return _lib.EmbeddableRoot}});Object.defineProperty(exports,"EmbeddableVisTriggerContext",{enumerable:true,get:function get(){return _lib.EmbeddableVisTriggerContext}});Object.defineProperty(exports,"ErrorEmbeddable",{enumerable:true,get:function get(){return _lib.ErrorEmbeddable}});Object.defineProperty(exports,"IContainer",{enumerable:true,get:function get(){return _lib.IContainer}});Object.defineProperty(exports,"IEmbeddable",{enumerable:true,get:function get(){return _lib.IEmbeddable}});Object.defineProperty(exports,"isErrorEmbeddable",{enumerable:true,get:function get(){return _lib.isErrorEmbeddable}});Object.defineProperty(exports,"openAddPanelFlyout",{enumerable:true,get:function get(){return _lib.openAddPanelFlyout}});Object.defineProperty(exports,"OutputSpec",{enumerable:true,get:function get(){return _lib.OutputSpec}});Object.defineProperty(exports,"PANEL_BADGE_TRIGGER",{enumerable:true,get:function get(){return _lib.PANEL_BADGE_TRIGGER}});Object.defineProperty(exports,"panelBadgeTrigger",{enumerable:true,get:function get(){return _lib.panelBadgeTrigger}});Object.defineProperty(exports,"PanelNotFoundError",{enumerable:true,get:function get(){return _lib.PanelNotFoundError}});Object.defineProperty(exports,"PanelState",{enumerable:true,get:function get(){return _lib.PanelState}});Object.defineProperty(exports,"PropertySpec",{enumerable:true,get:function get(){return _lib.PropertySpec}});Object.defineProperty(exports,"ViewMode",{enumerable:true,get:function get(){return _lib.ViewMode}});Object.defineProperty(exports,"withEmbeddableSubscription",{enumerable:true,get:function get(){return _lib.withEmbeddableSubscription}});__webpack_require__(1075);var _plugin=__webpack_require__(1080);var _lib=__webpack_require__(418);function plugin(initializerContext){return new _plugin.EmbeddablePublicPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _errors=__webpack_require__(197);Object.keys(_errors).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _errors[key]}})}));var _embeddables=__webpack_require__(419);Object.keys(_embeddables).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _embeddables[key]}})}));var _types=__webpack_require__(130);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _actions=__webpack_require__(422);Object.keys(_actions).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _actions[key]}})}));var _triggers=__webpack_require__(423);Object.keys(_triggers).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _triggers[key]}})}));var _containers=__webpack_require__(1092);Object.keys(_containers).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _containers[key]}})}));var _panel=__webpack_require__(424);Object.keys(_panel).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _panel[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"EmbeddableOutput",{enumerable:true,get:function get(){return _i_embeddable.EmbeddableOutput}});Object.defineProperty(exports,"EmbeddableInput",{enumerable:true,get:function get(){return _i_embeddable.EmbeddableInput}});Object.defineProperty(exports,"IEmbeddable",{enumerable:true,get:function get(){return _i_embeddable.IEmbeddable}});Object.defineProperty(exports,"Embeddable",{enumerable:true,get:function get(){return _embeddable.Embeddable}});Object.defineProperty(exports,"EmbeddableInstanceConfiguration",{enumerable:true,get:function get(){return _embeddable_factory.EmbeddableInstanceConfiguration}});Object.defineProperty(exports,"EmbeddableFactory",{enumerable:true,get:function get(){return _embeddable_factory.EmbeddableFactory}});Object.defineProperty(exports,"OutputSpec",{enumerable:true,get:function get(){return _embeddable_factory.OutputSpec}});Object.defineProperty(exports,"ErrorEmbeddable",{enumerable:true,get:function get(){return _error_embeddable.ErrorEmbeddable}});Object.defineProperty(exports,"isErrorEmbeddable",{enumerable:true,get:function get(){return _error_embeddable.isErrorEmbeddable}});Object.defineProperty(exports,"withEmbeddableSubscription",{enumerable:true,get:function get(){return _with_subscription.withEmbeddableSubscription}});Object.defineProperty(exports,"EmbeddableFactoryRenderer",{enumerable:true,get:function get(){return _embeddable_factory_renderer.EmbeddableFactoryRenderer}});Object.defineProperty(exports,"EmbeddableRoot",{enumerable:true,get:function get(){return _embeddable_root.EmbeddableRoot}});var _i_embeddable=__webpack_require__(1082);var _embeddable=__webpack_require__(420);var _embeddable_factory=__webpack_require__(1085);var _error_embeddable=__webpack_require__(1086);var _with_subscription=__webpack_require__(1087);var _embeddable_factory_renderer=__webpack_require__(1088);var _embeddable_root=__webpack_require__(421)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Embeddable=void 0;var _lodash=__webpack_require__(49);var Rx=_interopRequireWildcard(__webpack_require__(33));var _types=__webpack_require__(130);var _embeddable_action_storage=__webpack_require__(1084);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getPanelTitle(input,output){return input.hidePanelTitles?"":input.title===undefined?output.defaultTitle:input.title}var Embeddable=function(){_createClass(Embeddable,[{key:"actionStorage",get:function get(){return this.__actionStorage||(this.__actionStorage=new _embeddable_action_storage.EmbeddableActionStorage(this))}}]);function Embeddable(input,output,parent){var _this=this;_classCallCheck(this,Embeddable);_defineProperty(this,"parent",void 0);_defineProperty(this,"isContainer",false);_defineProperty(this,"type",void 0);_defineProperty(this,"id",void 0);_defineProperty(this,"output",void 0);_defineProperty(this,"input",void 0);_defineProperty(this,"input$",void 0);_defineProperty(this,"output$",void 0);_defineProperty(this,"parentSubscription",void 0);_defineProperty(this,"destoyed",false);_defineProperty(this,"__actionStorage",void 0);this.id=input.id;this.output=_objectSpread({title:getPanelTitle(input,output)},output);this.input=_objectSpread({viewMode:_types.ViewMode.EDIT},input);this.parent=parent;this.input$=new Rx.BehaviorSubject(this.input);this.output$=new Rx.BehaviorSubject(this.output);if(parent){this.parentSubscription=Rx.merge(parent.getInput$(),parent.getOutput$()).subscribe((function(){if(!parent.getInput().panels[_this.id])return;var newInput=parent.getInputForChild(_this.id);_this.onResetInput(newInput)}))}}_createClass(Embeddable,[{key:"getIsContainer",value:function getIsContainer(){return this.isContainer===true}},{key:"getInput$",value:function getInput$(){return this.input$.asObservable()}},{key:"getOutput$",value:function getOutput$(){return this.output$.asObservable()}},{key:"getOutput",value:function getOutput(){return this.output}},{key:"getInput",value:function getInput(){return this.input}},{key:"getTitle",value:function getTitle(){return this.output.title}},{key:"getRoot",value:function getRoot(){var root=this;while(root.parent){root=root.parent}return root}},{key:"updateInput",value:function updateInput(changes){if(this.destoyed){throw new Error("Embeddable has been destroyed")}if(this.parent){this.parent.updateInputForChild(this.id,changes)}else{this.onInputChanged(changes)}}},{key:"render",value:function render(domNode){if(this.destoyed){throw new Error("Embeddable has been destroyed")}return}},{key:"getInspectorAdapters",value:function getInspectorAdapters(){return undefined}},{key:"destroy",value:function destroy(){this.destoyed=true;if(this.parentSubscription){this.parentSubscription.unsubscribe()}return}},{key:"updateOutput",value:function updateOutput(outputChanges){var newOutput=_objectSpread({},this.output,{},outputChanges);if(!(0,_lodash.isEqual)(this.output,newOutput)){this.output=newOutput;this.output$.next(this.output)}}},{key:"onResetInput",value:function onResetInput(newInput){if(!(0,_lodash.isEqual)(this.input,newInput)){if(this.input.lastReloadRequestTime!==newInput.lastReloadRequestTime){this.reload()}this.input=newInput;this.input$.next(newInput);this.updateOutput({title:getPanelTitle(this.input,this.output)})}}},{key:"onInputChanged",value:function onInputChanged(changes){var newInput=(0,_lodash.cloneDeep)(_objectSpread({},this.input,{},changes));this.onResetInput(newInput)}},{key:"supportedTriggers",value:function supportedTriggers(){return[]}}]);return Embeddable}();exports.Embeddable=Embeddable},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.EmbeddableRoot=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EmbeddableRoot=function(_React$Component){_inherits(EmbeddableRoot,_React$Component);function EmbeddableRoot(props){var _this;_classCallCheck(this,EmbeddableRoot);_this=_possibleConstructorReturn(this,_getPrototypeOf(EmbeddableRoot).call(this,props));_defineProperty(_assertThisInitialized(_this),"root",void 0);_defineProperty(_assertThisInitialized(_this),"alreadyMounted",false);_this.root=_react.default.createRef();return _this}_createClass(EmbeddableRoot,[{key:"componentDidMount",value:function componentDidMount(){if(this.root&&this.root.current&&this.props.embeddable){this.alreadyMounted=true;this.props.embeddable.render(this.root.current)}}},{key:"componentDidUpdate",value:function componentDidUpdate(){if(this.root&&this.root.current&&this.props.embeddable&&!this.alreadyMounted){this.alreadyMounted=true;this.props.embeddable.render(this.root.current)}}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(newProps){return Boolean(newProps.error!==this.props.error||newProps.loading!==this.props.loading||newProps.embeddable!==this.props.embeddable||this.root&&this.root.current&&newProps.embeddable&&!this.alreadyMounted)}},{key:"render",value:function render(){return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement("div",{ref:this.root}),this.props.loading&&_react.default.createElement(_eui.EuiLoadingSpinner,{"data-test-subj":"embedSpinner"}),this.props.error&&_react.default.createElement(_eui.EuiText,{"data-test-subj":"embedError"},this.props.error))}}]);return EmbeddableRoot}(_react.default.Component);exports.EmbeddableRoot=EmbeddableRoot},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _apply_filter_action=__webpack_require__(1089);Object.keys(_apply_filter_action).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _apply_filter_action[key]}})}));var _edit_panel_action=__webpack_require__(1090);Object.keys(_edit_panel_action).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _edit_panel_action[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _triggers=__webpack_require__(1091);Object.keys(_triggers).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _triggers[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _embeddable_panel=__webpack_require__(1098);Object.keys(_embeddable_panel).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _embeddable_panel[key]}})}));var _panel_header=__webpack_require__(1107);Object.keys(_panel_header).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _panel_header[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _inspect_panel_action=__webpack_require__(426);Object.keys(_inspect_panel_action).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _inspect_panel_action[key]}})}));var _add_panel=__webpack_require__(1099);Object.keys(_add_panel).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _add_panel[key]}})}));var _remove_panel_action=__webpack_require__(1102);Object.keys(_remove_panel_action).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _remove_panel_action[key]}})}));var _customize_title=__webpack_require__(1103);Object.keys(_customize_title).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _customize_title[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InspectPanelAction=exports.ACTION_INSPECT_PANEL=void 0;var _i18n=__webpack_require__(1);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ACTION_INSPECT_PANEL="openInspector";exports.ACTION_INSPECT_PANEL=ACTION_INSPECT_PANEL;var InspectPanelAction=function(){function InspectPanelAction(inspector){_classCallCheck(this,InspectPanelAction);this.inspector=inspector;_defineProperty(this,"type",ACTION_INSPECT_PANEL);_defineProperty(this,"id",ACTION_INSPECT_PANEL);_defineProperty(this,"order",10)}_createClass(InspectPanelAction,[{key:"getDisplayName",value:function getDisplayName(){return _i18n.i18n.translate("embeddableApi.panel.inspectPanel.displayName",{defaultMessage:"Inspect"})}},{key:"getIconType",value:function getIconType(){return"inspect"}},{key:"isCompatible",value:function(){var _isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var embeddable;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref.embeddable;return _context.abrupt("return",this.inspector.isAvailable(embeddable.getInspectorAdapters()));case 2:case"end":return _context.stop()}}}),_callee,this)})));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}()},{key:"execute",value:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(_ref2){var embeddable,adapters,session,originalDestroy;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:embeddable=_ref2.embeddable;adapters=embeddable.getInspectorAdapters();_context2.next=4;return this.isCompatible({embeddable:embeddable});case 4:_context2.t0=!_context2.sent;if(_context2.t0){_context2.next=7;break}_context2.t0=adapters===undefined;case 7:if(!_context2.t0){_context2.next=9;break}throw new Error("Action not compatible with context");case 9:session=this.inspector.open(adapters,{title:embeddable.getTitle()});originalDestroy=embeddable.destroy;embeddable.destroy=function(){session.close();if(originalDestroy){originalDestroy.call(embeddable)}};session.onClose.finally((function(){embeddable.destroy=originalDestroy}));case 13:case"end":return _context2.stop()}}}),_callee2,this)})));function execute(_x2){return _execute.apply(this,arguments)}return execute}()}]);return InspectPanelAction}();exports.InspectPanelAction=InspectPanelAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AddPanelAction=exports.ACTION_ADD_PANEL=void 0;var _i18n=__webpack_require__(1);var _types=__webpack_require__(130);var _open_add_panel_flyout=__webpack_require__(428);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ACTION_ADD_PANEL="ACTION_ADD_PANEL";exports.ACTION_ADD_PANEL=ACTION_ADD_PANEL;var AddPanelAction=function(){function AddPanelAction(getFactory,getAllFactories,overlays,notifications,SavedObjectFinder){_classCallCheck(this,AddPanelAction);this.getFactory=getFactory;this.getAllFactories=getAllFactories;this.overlays=overlays;this.notifications=notifications;this.SavedObjectFinder=SavedObjectFinder;_defineProperty(this,"type",ACTION_ADD_PANEL);_defineProperty(this,"id",ACTION_ADD_PANEL)}_createClass(AddPanelAction,[{key:"getDisplayName",value:function getDisplayName(){return _i18n.i18n.translate("embeddableApi.addPanel.displayName",{defaultMessage:"Add panel"})}},{key:"getIconType",value:function getIconType(){return"plusInCircleFilled"}},{key:"isCompatible",value:function(){var _isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var embeddable;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref.embeddable;return _context.abrupt("return",embeddable.getIsContainer()&&embeddable.getInput().viewMode===_types.ViewMode.EDIT);case 2:case"end":return _context.stop()}}}),_callee)})));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}()},{key:"execute",value:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(_ref2){var embeddable;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:embeddable=_ref2.embeddable;_context2.t0=!embeddable.getIsContainer();if(_context2.t0){_context2.next=6;break}_context2.next=5;return this.isCompatible({embeddable:embeddable});case 5:_context2.t0=!_context2.sent;case 6:if(!_context2.t0){_context2.next=8;break}throw new Error("Context is incompatible");case 8:(0,_open_add_panel_flyout.openAddPanelFlyout)({embeddable:embeddable,getFactory:this.getFactory,getAllFactories:this.getAllFactories,overlays:this.overlays,notifications:this.notifications,SavedObjectFinder:this.SavedObjectFinder});case 9:case"end":return _context2.stop()}}}),_callee2,this)})));function execute(_x2){return _execute.apply(this,arguments)}return execute}()}]);return AddPanelAction}();exports.AddPanelAction=AddPanelAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.openAddPanelFlyout=openAddPanelFlyout;var _react=_interopRequireDefault(__webpack_require__(28));var _public=__webpack_require__(31);var _add_panel_flyout=__webpack_require__(1100);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function openAddPanelFlyout(_x){return _openAddPanelFlyout.apply(this,arguments)}function _openAddPanelFlyout(){_openAddPanelFlyout=_asyncToGenerator(regeneratorRuntime.mark((function _callee(options){var embeddable,getFactory,getAllFactories,overlays,notifications,SavedObjectFinder,flyoutSession;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=options.embeddable,getFactory=options.getFactory,getAllFactories=options.getAllFactories,overlays=options.overlays,notifications=options.notifications,SavedObjectFinder=options.SavedObjectFinder;flyoutSession=overlays.openFlyout((0,_public.toMountPoint)(_react.default.createElement(_add_panel_flyout.AddPanelFlyout,{container:embeddable,onClose:function onClose(){if(flyoutSession){flyoutSession.close()}},getFactory:getFactory,getAllFactories:getAllFactories,notifications:notifications,SavedObjectFinder:SavedObjectFinder})),{"data-test-subj":"addPanelFlyout"});case 2:case"end":return _context.stop()}}}),_callee)})));return _openAddPanelFlyout.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CustomizePanelTitleAction=exports.ACTION_CUSTOMIZE_PANEL=void 0;var _i18n=__webpack_require__(1);var _types=__webpack_require__(130);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ACTION_CUSTOMIZE_PANEL="ACTION_CUSTOMIZE_PANEL";exports.ACTION_CUSTOMIZE_PANEL=ACTION_CUSTOMIZE_PANEL;var CustomizePanelTitleAction=function(){function CustomizePanelTitleAction(getDataFromUser){_classCallCheck(this,CustomizePanelTitleAction);this.getDataFromUser=getDataFromUser;_defineProperty(this,"type",ACTION_CUSTOMIZE_PANEL);_defineProperty(this,"id",ACTION_CUSTOMIZE_PANEL);_defineProperty(this,"order",10);this.order=10}_createClass(CustomizePanelTitleAction,[{key:"getDisplayName",value:function getDisplayName(){return _i18n.i18n.translate("embeddableApi.customizePanel.action.displayName",{defaultMessage:"Customize panel"})}},{key:"getIconType",value:function getIconType(){return"pencil"}},{key:"isCompatible",value:function(){var _isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var embeddable;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref.embeddable;return _context.abrupt("return",embeddable.getInput().viewMode===_types.ViewMode.EDIT?true:false);case 2:case"end":return _context.stop()}}}),_callee)})));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}()},{key:"execute",value:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(_ref2){var embeddable,customTitle;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:embeddable=_ref2.embeddable;_context2.next=3;return this.getDataFromUser({embeddable:embeddable});case 3:customTitle=_context2.sent;embeddable.updateInput(customTitle);case 5:case"end":return _context2.stop()}}}),_callee2,this)})));function execute(_x2){return _execute.apply(this,arguments)}return execute}()}]);return CustomizePanelTitleAction}();exports.CustomizePanelTitleAction=CustomizePanelTitleAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ExpandPanelAction",{enumerable:true,get:function get(){return _expand_panel_action.ExpandPanelAction}});Object.defineProperty(exports,"ACTION_EXPAND_PANEL",{enumerable:true,get:function get(){return _expand_panel_action.ACTION_EXPAND_PANEL}});Object.defineProperty(exports,"ReplacePanelAction",{enumerable:true,get:function get(){return _replace_panel_action.ReplacePanelAction}});Object.defineProperty(exports,"ACTION_REPLACE_PANEL",{enumerable:true,get:function get(){return _replace_panel_action.ACTION_REPLACE_PANEL}});var _expand_panel_action=__webpack_require__(431);var _replace_panel_action=__webpack_require__(447)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExpandPanelAction=exports.ACTION_EXPAND_PANEL=void 0;var _i18n=__webpack_require__(1);var _ui_actions_plugin=__webpack_require__(432);var _embeddable=__webpack_require__(247);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ACTION_EXPAND_PANEL="togglePanel";exports.ACTION_EXPAND_PANEL=ACTION_EXPAND_PANEL;function isDashboard(embeddable){return embeddable.type===_embeddable.DASHBOARD_CONTAINER_TYPE}function isExpanded(embeddable){if(!embeddable.parent||!isDashboard(embeddable.parent)){throw new _ui_actions_plugin.IncompatibleActionError}return embeddable.id===embeddable.parent.getInput().expandedPanelId}var ExpandPanelAction=function(){function ExpandPanelAction(){_classCallCheck(this,ExpandPanelAction);_defineProperty(this,"type",ACTION_EXPAND_PANEL);_defineProperty(this,"id",ACTION_EXPAND_PANEL);_defineProperty(this,"order",7)}_createClass(ExpandPanelAction,[{key:"getDisplayName",value:function getDisplayName(_ref){var embeddable=_ref.embeddable;if(!embeddable.parent||!isDashboard(embeddable.parent)){throw new _ui_actions_plugin.IncompatibleActionError}return isExpanded(embeddable)?_i18n.i18n.translate("dashboard.actions.toggleExpandPanelMenuItem.expandedDisplayName",{defaultMessage:"Minimize"}):_i18n.i18n.translate("dashboard.actions.toggleExpandPanelMenuItem.notExpandedDisplayName",{defaultMessage:"Full screen"})}},{key:"getIconType",value:function getIconType(_ref2){var embeddable=_ref2.embeddable;if(!embeddable.parent||!isDashboard(embeddable.parent)){throw new _ui_actions_plugin.IncompatibleActionError}return isExpanded(embeddable)?"expand":"expand"}},{key:"isCompatible",value:function(){var _isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref3){var embeddable;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref3.embeddable;return _context.abrupt("return",Boolean(embeddable.parent&&isDashboard(embeddable.parent)));case 2:case"end":return _context.stop()}}}),_callee)})));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}()},{key:"execute",value:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(_ref4){var embeddable,newValue;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:embeddable=_ref4.embeddable;if(!(!embeddable.parent||!isDashboard(embeddable.parent))){_context2.next=3;break}throw new _ui_actions_plugin.IncompatibleActionError;case 3:newValue=isExpanded(embeddable)?undefined:embeddable.id;embeddable.parent.updateInput({expandedPanelId:newValue});case 5:case"end":return _context2.stop()}}}),_callee2)})));function execute(_x2){return _execute.apply(this,arguments)}return execute}()}]);return ExpandPanelAction}();exports.ExpandPanelAction=ExpandPanelAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _public=__webpack_require__(136);Object.keys(_public).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _public[key]}})}))},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardContainerFactory=void 0;var _i18n=__webpack_require__(1);var _embeddable_plugin=__webpack_require__(198);var _dashboard_container=__webpack_require__(434);var _dashboard_constants=__webpack_require__(161);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardContainerFactory=function(_EmbeddableFactory){_inherits(DashboardContainerFactory,_EmbeddableFactory);function DashboardContainerFactory(getStartServices){var _this;_classCallCheck(this,DashboardContainerFactory);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardContainerFactory).call(this));_this.getStartServices=getStartServices;_defineProperty(_assertThisInitialized(_this),"isContainerType",true);_defineProperty(_assertThisInitialized(_this),"type",_dashboard_constants.DASHBOARD_CONTAINER_TYPE);return _this}_createClass(DashboardContainerFactory,[{key:"isEditable",value:function(){var _isEditable=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _ref,capabilities;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.getStartServices();case 2:_ref=_context.sent;capabilities=_ref.capabilities;return _context.abrupt("return",!!capabilities.createNew&&!!capabilities.showWriteControls);case 5:case"end":return _context.stop()}}}),_callee,this)})));function isEditable(){return _isEditable.apply(this,arguments)}return isEditable}()},{key:"getDisplayName",value:function getDisplayName(){return _i18n.i18n.translate("dashboard.factory.displayName",{defaultMessage:"dashboard"})}},{key:"getDefaultInput",value:function getDefaultInput(){return{panels:{},isFullScreenMode:false,useMargins:true}}},{key:"create",value:function(){var _create=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(initialInput,parent){var services;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.getStartServices();case 2:services=_context2.sent;return _context2.abrupt("return",new _dashboard_container.DashboardContainer(initialInput,services,parent));case 4:case"end":return _context2.stop()}}}),_callee2,this)})));function create(_x,_x2){return _create.apply(this,arguments)}return create}()}]);return DashboardContainerFactory}(_embeddable_plugin.EmbeddableFactory);exports.DashboardContainerFactory=DashboardContainerFactory},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardContainer=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _reactDom=_interopRequireDefault(__webpack_require__(35));var _react2=__webpack_require__(30);var _embeddable_plugin=__webpack_require__(198);var _dashboard_constants=__webpack_require__(161);var _panel=__webpack_require__(435);var _dashboard_viewport=__webpack_require__(1109);var _public=__webpack_require__(31);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardContainer=function(_Container){_inherits(DashboardContainer,_Container);function DashboardContainer(initialInput,options,parent){var _this;_classCallCheck(this,DashboardContainer);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardContainer).call(this,_objectSpread({panels:{},isFullScreenMode:false,filters:[],useMargins:true},initialInput),{embeddableLoaded:{}},options.embeddable.getEmbeddableFactory,parent));_this.options=options;_defineProperty(_assertThisInitialized(_this),"type",_dashboard_constants.DASHBOARD_CONTAINER_TYPE);_defineProperty(_assertThisInitialized(_this),"renderEmpty",void 0);return _this}_createClass(DashboardContainer,[{key:"createNewPanelState",value:function createNewPanelState(factory){var partial=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var panelState=_get(_getPrototypeOf(DashboardContainer.prototype),"createNewPanelState",this).call(this,factory,partial);return(0,_panel.createPanelState)(panelState,Object.values(this.input.panels))}},{key:"render",value:function render(dom){_reactDom.default.render(_react.default.createElement(_react2.I18nProvider,null,_react.default.createElement(_public.KibanaContextProvider,{services:this.options},_react.default.createElement(_dashboard_viewport.DashboardViewport,{renderEmpty:this.renderEmpty,container:this}))),dom)}},{key:"getInheritedInput",value:function getInheritedInput(id){var _this$input=this.input,viewMode=_this$input.viewMode,refreshConfig=_this$input.refreshConfig,timeRange=_this$input.timeRange,query=_this$input.query,hidePanelTitles=_this$input.hidePanelTitles,filters=_this$input.filters;return{filters:filters,hidePanelTitles:hidePanelTitles,query:query,timeRange:timeRange,refreshConfig:refreshConfig,viewMode:viewMode,id:id}}}]);return DashboardContainer}(_embeddable_plugin.Container);exports.DashboardContainer=DashboardContainer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"createPanelState",{enumerable:true,get:function get(){return _create_panel_state.createPanelState}});var _create_panel_state=__webpack_require__(1108)},,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ReplacePanelAction=exports.ACTION_REPLACE_PANEL=void 0;var _i18n=__webpack_require__(1);var _embeddable_plugin=__webpack_require__(198);var _embeddable=__webpack_require__(247);var _ui_actions_plugin=__webpack_require__(432);var _open_replace_panel_flyout=__webpack_require__(1152);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ACTION_REPLACE_PANEL="replacePanel";exports.ACTION_REPLACE_PANEL=ACTION_REPLACE_PANEL;function isDashboard(embeddable){return embeddable.type===_embeddable.DASHBOARD_CONTAINER_TYPE}var ReplacePanelAction=function(){function ReplacePanelAction(core,savedobjectfinder,notifications,getEmbeddableFactories){_classCallCheck(this,ReplacePanelAction);this.core=core;this.savedobjectfinder=savedobjectfinder;this.notifications=notifications;this.getEmbeddableFactories=getEmbeddableFactories;_defineProperty(this,"type",ACTION_REPLACE_PANEL);_defineProperty(this,"id",ACTION_REPLACE_PANEL);_defineProperty(this,"order",11)}_createClass(ReplacePanelAction,[{key:"getDisplayName",value:function getDisplayName(_ref){var embeddable=_ref.embeddable;if(!embeddable.parent||!isDashboard(embeddable.parent)){throw new _ui_actions_plugin.IncompatibleActionError}return _i18n.i18n.translate("dashboard.panel.removePanel.replacePanel",{defaultMessage:"Replace panel"})}},{key:"getIconType",value:function getIconType(_ref2){var embeddable=_ref2.embeddable;if(!embeddable.parent||!isDashboard(embeddable.parent)){throw new _ui_actions_plugin.IncompatibleActionError}return"kqlOperand"}},{key:"isCompatible",value:function(){var _isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref3){var embeddable;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref3.embeddable;if(!embeddable.getInput().viewMode){_context.next=4;break}if(!(embeddable.getInput().viewMode===_embeddable_plugin.ViewMode.VIEW)){_context.next=4;break}return _context.abrupt("return",false);case 4:return _context.abrupt("return",Boolean(embeddable.parent&&isDashboard(embeddable.parent)));case 5:case"end":return _context.stop()}}}),_callee)})));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}()},{key:"execute",value:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(_ref4){var embeddable,view,dash;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:embeddable=_ref4.embeddable;if(!(!embeddable.parent||!isDashboard(embeddable.parent))){_context2.next=3;break}throw new _ui_actions_plugin.IncompatibleActionError;case 3:view=embeddable;dash=embeddable.parent;(0,_open_replace_panel_flyout.openReplacePanelFlyout)({embeddable:dash,core:this.core,savedObjectFinder:this.savedobjectfinder,notifications:this.notifications,panelToRemove:view,getEmbeddableFactories:this.getEmbeddableFactories});case 6:case"end":return _context2.stop()}}}),_callee2,this)})));function execute(_x2){return _execute.apply(this,arguments)}return execute}()}]);return ReplacePanelAction}();exports.ReplacePanelAction=ReplacePanelAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={KbnAccessibleClickProvider:true,PrivateProvider:true,IPrivate:true,registerListenEventListener:true};Object.defineProperty(exports,"KbnAccessibleClickProvider",{enumerable:true,get:function get(){return _kbn_accessible_click.KbnAccessibleClickProvider}});Object.defineProperty(exports,"PrivateProvider",{enumerable:true,get:function get(){return _private.PrivateProvider}});Object.defineProperty(exports,"IPrivate",{enumerable:true,get:function get(){return _private.IPrivate}});Object.defineProperty(exports,"registerListenEventListener",{enumerable:true,get:function get(){return _register_listen_event_listener.registerListenEventListener}});var _migrate_legacy_query=__webpack_require__(1189);Object.keys(_migrate_legacy_query).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _migrate_legacy_query[key]}})}));var _system_api=__webpack_require__(1190);Object.keys(_system_api).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _system_api[key]}})}));var _url_overflow_service=__webpack_require__(1191);Object.keys(_url_overflow_service).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _url_overflow_service[key]}})}));var _kbn_accessible_click=__webpack_require__(1192);var _private=__webpack_require__(1193);var _register_listen_event_listener=__webpack_require__(1194)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"formatESMsg",{enumerable:true,get:function get(){return _format_es_msg.formatESMsg}});Object.defineProperty(exports,"formatMsg",{enumerable:true,get:function get(){return _format_msg.formatMsg}});Object.defineProperty(exports,"formatStack",{enumerable:true,get:function get(){return _format_stack.formatStack}});Object.defineProperty(exports,"isAngularHttpError",{enumerable:true,get:function get(){return _format_angular_http_error.isAngularHttpError}});Object.defineProperty(exports,"formatAngularHttpError",{enumerable:true,get:function get(){return _format_angular_http_error.formatAngularHttpError}});Object.defineProperty(exports,"AngularHttpError",{enumerable:true,get:function get(){return _format_angular_http_error.AngularHttpError}});Object.defineProperty(exports,"addFatalError",{enumerable:true,get:function get(){return _add_fatal_error.addFatalError}});var _format_es_msg=__webpack_require__(450);var _format_msg=__webpack_require__(1195);var _format_stack=__webpack_require__(1196);var _format_angular_http_error=__webpack_require__(451);var _add_fatal_error=__webpack_require__(1197)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatESMsg=void 0;var _lodash=_interopRequireDefault(__webpack_require__(49));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getRootCause=function getRootCause(err){return _lodash.default.get(err,"resp.error.root_cause")};var formatESMsg=function formatESMsg(err){var rootCause=getRootCause(err);if(!Array.isArray(rootCause)){return}return rootCause.map((function(cause){return cause.reason})).join("\n")};exports.formatESMsg=formatESMsg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isAngularHttpError=isAngularHttpError;exports.formatAngularHttpError=formatAngularHttpError;var _i18n=__webpack_require__(1);function isAngularHttpError(error){return error&&typeof error.status==="number"&&typeof error.statusText==="string"&&error.data&&typeof error.data.message==="string"}function formatAngularHttpError(error){if(error.status===-1){return _i18n.i18n.translate("kibana_legacy.notify.fatalError.unavailableServerErrorMessage",{defaultMessage:"An HTTP request has failed to connect. "+"Please check if the Kibana server is running and that your browser has a working connection, "+"or contact your system administrator."})}return _i18n.i18n.translate("kibana_legacy.notify.fatalError.errorStatusMessage",{defaultMessage:"Error {errStatus} {errStatusText}: {errMessage}",values:{errStatus:error.status,errStatusText:error.statusText,errMessage:error.data.message}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isErrorNonFatal=isErrorNonFatal;exports.saveSavedObject=saveSavedObject;var _constants=__webpack_require__(163);var _create_source=__webpack_require__(1206);var _check_for_duplicate_title=__webpack_require__(453);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function isErrorNonFatal(error){if(!error)return false;return error.message===_constants.OVERWRITE_REJECTED||error.message===_constants.SAVE_DUPLICATE_REJECTED}function saveSavedObject(_x,_x2){return _saveSavedObject.apply(this,arguments)}function _saveSavedObject(){_saveSavedObject=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObject,config){var _ref,_ref$confirmOverwrite,confirmOverwrite,_ref$isTitleDuplicate,isTitleDuplicateConfirmed,onTitleDuplicate,services,savedObjectsClient,chrome,esType,extractReferences,originalId,_savedObject$_seriali,attributes,references,_extractReferences,resp,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref=_args.length>2&&_args[2]!==undefined?_args[2]:{},_ref$confirmOverwrite=_ref.confirmOverwrite,confirmOverwrite=_ref$confirmOverwrite===void 0?false:_ref$confirmOverwrite,_ref$isTitleDuplicate=_ref.isTitleDuplicateConfirmed,isTitleDuplicateConfirmed=_ref$isTitleDuplicate===void 0?false:_ref$isTitleDuplicate,onTitleDuplicate=_ref.onTitleDuplicate;services=_args.length>3?_args[3]:undefined;savedObjectsClient=services.savedObjectsClient,chrome=services.chrome;esType=config.type||"";extractReferences=config.extractReferences;originalId=savedObject.id;if(savedObject.copyOnSave){delete savedObject.id}_savedObject$_seriali=savedObject._serialize(),attributes=_savedObject$_seriali.attributes,references=_savedObject$_seriali.references;if(extractReferences){_extractReferences=extractReferences({attributes:attributes,references:references});attributes=_extractReferences.attributes;references=_extractReferences.references}if(references){_context.next=11;break}throw new Error("References not returned from extractReferences");case 11:_context.prev=11;_context.next=14;return(0,_check_for_duplicate_title.checkForDuplicateTitle)(savedObject,isTitleDuplicateConfirmed,onTitleDuplicate,services);case 14:savedObject.isSaving=true;if(!confirmOverwrite){_context.next=21;break}_context.next=18;return(0,_create_source.createSource)(attributes,savedObject,esType,savedObject.creationOpts({references:references}),services);case 18:_context.t0=_context.sent;_context.next=24;break;case 21:_context.next=23;return savedObjectsClient.create(esType,attributes,savedObject.creationOpts({references:references,overwrite:true}));case 23:_context.t0=_context.sent;case 24:resp=_context.t0;savedObject.id=resp.id;if(savedObject.showInRecentlyAccessed&&savedObject.getFullPath){chrome.recentlyAccessed.add(savedObject.getFullPath(),savedObject.title,String(savedObject.id))}savedObject.isSaving=false;savedObject.lastSavedTitle=savedObject.title;return _context.abrupt("return",savedObject.id);case 32:_context.prev=32;_context.t1=_context["catch"](11);savedObject.isSaving=false;savedObject.id=originalId;if(!isErrorNonFatal(_context.t1)){_context.next=38;break}return _context.abrupt("return","");case 38:return _context.abrupt("return",Promise.reject(_context.t1));case 39:case"end":return _context.stop()}}}),_callee,null,[[11,32]])})));return _saveSavedObject.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.checkForDuplicateTitle=checkForDuplicateTitle;var _find_object_by_title=__webpack_require__(1207);var _constants=__webpack_require__(163);var _display_duplicate_title_confirm_modal=__webpack_require__(1208);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function checkForDuplicateTitle(_x,_x2,_x3,_x4){return _checkForDuplicateTitle.apply(this,arguments)}function _checkForDuplicateTitle(){_checkForDuplicateTitle=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObject,isTitleDuplicateConfirmed,onTitleDuplicate,services){var savedObjectsClient,overlays,duplicate;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:savedObjectsClient=services.savedObjectsClient,overlays=services.overlays;if(!isTitleDuplicateConfirmed){_context.next=3;break}return _context.abrupt("return",true);case 3:if(!(savedObject.title===savedObject.lastSavedTitle&&!savedObject.copyOnSave)){_context.next=5;break}return _context.abrupt("return",true);case 5:_context.next=7;return(0,_find_object_by_title.findObjectByTitle)(savedObjectsClient,savedObject.getEsType(),savedObject.title);case 7:duplicate=_context.sent;if(!(!duplicate||duplicate.id===savedObject.id)){_context.next=10;break}return _context.abrupt("return",true);case 10:if(!onTitleDuplicate){_context.next=13;break}onTitleDuplicate();return _context.abrupt("return",Promise.reject(new Error(_constants.SAVE_DUPLICATE_REJECTED)));case 13:return _context.abrupt("return",(0,_display_duplicate_title_confirm_modal.displayDuplicateTitleConfirmModal)(savedObject,overlays));case 14:case"end":return _context.stop()}}}),_callee)})));return _checkForDuplicateTitle.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createDirectAccessDashboardLinkGenerator=exports.DASHBOARD_APP_URL_GENERATOR=exports.GLOBAL_STATE_STORAGE_KEY=exports.STATE_STORAGE_KEY=void 0;var _public=__webpack_require__(34);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var STATE_STORAGE_KEY="_a";exports.STATE_STORAGE_KEY=STATE_STORAGE_KEY;var GLOBAL_STATE_STORAGE_KEY="_g";exports.GLOBAL_STATE_STORAGE_KEY=GLOBAL_STATE_STORAGE_KEY;var DASHBOARD_APP_URL_GENERATOR="DASHBOARD_APP_URL_GENERATOR";exports.DASHBOARD_APP_URL_GENERATOR=DASHBOARD_APP_URL_GENERATOR;var createDirectAccessDashboardLinkGenerator=function createDirectAccessDashboardLinkGenerator(getStartServices){return{id:DASHBOARD_APP_URL_GENERATOR,createUrl:function(){var _createUrl=_asyncToGenerator(regeneratorRuntime.mark((function _callee(state){var _state$useHash;var startServices,useHash,appBasePath,hash,appStateUrl;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getStartServices();case 2:startServices=_context.sent;useHash=(_state$useHash=state.useHash)!==null&&_state$useHash!==void 0?_state$useHash:startServices.useHashedUrl;appBasePath=startServices.appBasePath;hash=state.dashboardId?"dashboard/".concat(state.dashboardId):"dashboard";appStateUrl=(0,_public.setStateToKbnUrl)(STATE_STORAGE_KEY,{query:state.query,filters:state.filters},{useHash:useHash},"".concat(appBasePath,"#/").concat(hash));return _context.abrupt("return",(0,_public.setStateToKbnUrl)(GLOBAL_STATE_STORAGE_KEY,{time:state.timeRange},{useHash:useHash},appStateUrl));case 8:case"end":return _context.stop()}}}),_callee)})));function createUrl(_x){return _createUrl.apply(this,arguments)}return createUrl}()}};exports.createDirectAccessDashboardLinkGenerator=createDirectAccessDashboardLinkGenerator},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _saved_dashboard_references=__webpack_require__(456);Object.keys(_saved_dashboard_references).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _saved_dashboard_references[key]}})}));var _saved_dashboard=__webpack_require__(457);Object.keys(_saved_dashboard).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _saved_dashboard[key]}})}));var _saved_dashboards=__webpack_require__(1214);Object.keys(_saved_dashboards).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _saved_dashboards[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractReferences=extractReferences;exports.injectReferences=injectReferences;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function extractReferences(_ref){var attributes=_ref.attributes,_ref$references=_ref.references,references=_ref$references===void 0?[]:_ref$references;var panelReferences=[];var panels=JSON.parse(String(attributes.panelsJSON));panels.forEach((function(panel,i){if(!panel.type){throw new Error('"type" attribute is missing from panel "'.concat(i,'"'))}if(!panel.id){return}panel.panelRefName="panel_".concat(i);panelReferences.push({name:"panel_".concat(i),type:panel.type,id:panel.id});delete panel.type;delete panel.id}));return{references:[].concat(_toConsumableArray(references),panelReferences),attributes:_objectSpread({},attributes,{panelsJSON:JSON.stringify(panels)})}}function injectReferences(savedObject,references){if(typeof savedObject.panelsJSON!=="string"){return}var panels=JSON.parse(savedObject.panelsJSON);if(!Array.isArray(panels)){return}panels.forEach((function(panel){if(!panel.panelRefName){return}var reference=references.find((function(ref){return ref.name===panel.panelRefName}));if(!reference){throw new Error('Could not find reference "'.concat(panel.panelRefName,'"'))}panel.id=reference.id;panel.type=reference.type;delete panel.panelRefName}));savedObject.panelsJSON=JSON.stringify(panels)}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.createSavedDashboardClass=createSavedDashboardClass;var _public=__webpack_require__(200);var _saved_dashboard_references=__webpack_require__(456);var _dashboard_constants=__webpack_require__(1213);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createSavedDashboardClass(services){var SavedObjectClass=(0,_public.createSavedObjectClass)(services);var SavedDashboard=function(_SavedObjectClass){_inherits(SavedDashboard,_SavedObjectClass);function SavedDashboard(id){var _this;_classCallCheck(this,SavedDashboard);_this=_possibleConstructorReturn(this,_getPrototypeOf(SavedDashboard).call(this,{type:SavedDashboard.type,mapping:SavedDashboard.mapping,searchSource:SavedDashboard.searchSource,extractReferences:_saved_dashboard_references.extractReferences,injectReferences:_saved_dashboard_references.injectReferences,id:id,defaults:{title:"",hits:0,description:"",panelsJSON:"[]",optionsJSON:JSON.stringify({useMargins:!id,hidePanelTitles:false}),version:1,timeRestore:false,timeTo:undefined,timeFrom:undefined,refreshInterval:undefined}}));_defineProperty(_assertThisInitialized(_this),"showInRecentlyAccessed",true);_this.getFullPath=function(){return"/app/kibana#".concat((0,_dashboard_constants.createDashboardEditUrl)(String(_this.id)))};return _this}_createClass(SavedDashboard,[{key:"getQuery",value:function getQuery(){return this.searchSource.getOwnField("query")||{query:"",language:"kuery"}}},{key:"getFilters",value:function getFilters(){return this.searchSource.getOwnField("filter")||[]}}]);return SavedDashboard}(SavedObjectClass);_defineProperty(SavedDashboard,"type","dashboard");_defineProperty(SavedDashboard,"mapping",{title:"text",hits:"integer",description:"text",panelsJSON:"text",optionsJSON:"text",version:"integer",timeRestore:"boolean",timeTo:"keyword",timeFrom:"keyword",refreshInterval:{type:"object",properties:{display:{type:"keyword"},pause:{type:"boolean"},section:{type:"integer"},value:{type:"integer"}}}});_defineProperty(SavedDashboard,"fieldOrder",["title","description"]);_defineProperty(SavedDashboard,"searchSource",true);return SavedDashboard}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.saveJob=saveJob;exports.loadSavedDashboards=loadSavedDashboards;exports.loadIndexPatterns=loadIndexPatterns;var _lodash=__webpack_require__(49);var _ml_server_info=__webpack_require__(84);var _job_service=__webpack_require__(58);var _job_utils=__webpack_require__(59);var _dependency_cache=__webpack_require__(5);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function saveJob(job,newJobData,finish){return new Promise((function(resolve,reject){var jobData=_objectSpread({},extractDescription(job,newJobData),{},extractGroups(job,newJobData),{},extractMML(job,newJobData),{},extractDetectorDescriptions(job,newJobData),{},extractCustomSettings(job,newJobData));var datafeedData=_objectSpread({},extractDatafeed(job,newJobData));if(jobData.custom_settings!==undefined){jobData.custom_settings=processCustomSettings(jobData,datafeedData)}var saveDatafeedWrapper=function saveDatafeedWrapper(){saveDatafeed(datafeedData,job,finish).then((function(){resolve()})).catch((function(error){reject(error)}))};if(Object.keys(jobData).length){_job_service.mlJobService.updateJob(job.job_id,jobData).then((function(resp){if(resp.success){saveDatafeedWrapper()}else{reject(resp)}})).catch((function(error){reject(error)}))}else{saveDatafeedWrapper()}}))}function saveDatafeed(datafeedData,job){return new Promise((function(resolve,reject){if(Object.keys(datafeedData).length){var datafeedId=job.datafeed_config.datafeed_id;_job_service.mlJobService.updateDatafeed(datafeedId,datafeedData).then((function(resp){if(resp.success){resolve()}else{reject(resp)}}))}else{resolve()}}))}function loadSavedDashboards(maxNumber){return new Promise((function(resolve,reject){var savedObjectsClient=(0,_dependency_cache.getSavedObjectsClient)();savedObjectsClient.find({type:"dashboard",fields:["title"],perPage:maxNumber}).then((function(resp){var savedObjects=resp.savedObjects;if(savedObjects!==undefined){var dashboards=savedObjects.map((function(savedObj){return{id:savedObj.id,title:savedObj.attributes.title}}));dashboards.sort((function(dash1,dash2){return dash1.title.localeCompare(dash2.title)}));resolve(dashboards)}})).catch((function(resp){reject(resp)}))}))}function loadIndexPatterns(maxNumber){return new Promise((function(resolve,reject){var savedObjectsClient=(0,_dependency_cache.getSavedObjectsClient)();savedObjectsClient.find({type:"index-pattern",fields:["title"],perPage:maxNumber}).then((function(resp){var savedObjects=resp.savedObjects;if(savedObjects!==undefined){var indexPatterns=savedObjects.map((function(savedObj){return{id:savedObj.id,title:savedObj.attributes.title}}));indexPatterns.sort((function(dash1,dash2){return dash1.title.localeCompare(dash2.title)}));resolve(indexPatterns)}})).catch((function(resp){reject(resp)}))}))}function extractDescription(job,newJobData){var description=newJobData.description;if(newJobData.description!==job.description){return{description:description}}return{}}function extractGroups(job,newJobData){var groups=newJobData.groups;if(newJobData.groups!==undefined){var diffCount=(0,_lodash.difference)(job.groups,groups).length+(0,_lodash.difference)(groups,job.groups).length;return diffCount===0?{}:{groups:groups}}return{}}function extractMML(job,newJobData){var jobLimits=(0,_ml_server_info.getNewJobLimits)();var mmlData={};if(job.analysis_limits.model_memory_limit!==undefined){var mml=newJobData.mml;if(mml===""){mml=jobLimits.max_model_memory_limit}if(mml!==job.analysis_limits.model_memory_limit){mmlData.analysis_limits={model_memory_limit:mml}}}return mmlData}function extractDetectorDescriptions(job,newJobData){var detectors=[];var descriptions=newJobData.detectorDescriptions.map((function(d,i){return{detector_index:i,description:d}}));var originalDetectors=job.analysis_config.detectors;originalDetectors.forEach((function(d){if(descriptions[d.detector_index].description!==d.detector_description){detectors.push(descriptions[d.detector_index])}}));return detectors.length?{detectors:detectors}:{}}function extractCustomSettings(job,newJobData){var settingsData={};if(newJobData&&newJobData.customUrls){settingsData.custom_settings=job.custom_settings||{};settingsData.custom_settings.custom_urls=newJobData.customUrls}return settingsData}function extractDatafeed(job,newDatafeedData){var datafeedData={};if(job.datafeed_config!==undefined){var origQueryString=JSON.stringify(job.datafeed_config.query);var newQuery=JSON.parse(newDatafeedData.datafeedQuery);var newQueryString=JSON.stringify(newQuery);if(origQueryString!==newQueryString){datafeedData.query=newQuery}if(job.datafeed_config.query_delay!==newDatafeedData.datafeedQueryDelay){datafeedData.query_delay=newDatafeedData.datafeedQueryDelay}if(job.datafeed_config.frequency!==newDatafeedData.datafeedFrequency&&newDatafeedData.datafeedFrequency!==""){datafeedData.frequency=newDatafeedData.datafeedFrequency}if(job.datafeed_config.scroll_size!==newDatafeedData.datafeedScrollSize){datafeedData.scroll_size=newDatafeedData.datafeedScrollSize}}return datafeedData}function processCustomSettings(jobData,datafeedData){var customSettings={};if(jobData.custom_settings!==undefined){customSettings=_objectSpread({},jobData.custom_settings);if(jobData.custom_settings.created_by!==undefined&&(jobData.detectors!==undefined||Object.keys(datafeedData).length)){(0,_job_utils.processCreatedBy)(customSettings)}}return customSettings}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateModelMemoryLimit=validateModelMemoryLimit;exports.validateGroupNames=validateGroupNames;exports.isValidCustomUrls=isValidCustomUrls;var _ml_server_info=__webpack_require__(84);var _util=__webpack_require__(460);var _job_utils=__webpack_require__(59);var _custom_url_utils=__webpack_require__(139);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function validateModelMemoryLimit(mml){var limits=(0,_ml_server_info.getNewJobLimits)();var tempJob={analysis_limits:{model_memory_limit:mml}};var validationResults=(0,_job_utils.validateModelMemoryLimitUnits)(mml);var _validationResults=validationResults,valid=_validationResults.valid;if(valid){validationResults=(0,_job_utils.validateModelMemoryLimit)(tempJob,limits);valid=validationResults.valid}var modelMemoryLimit={valid:valid,message:""};(0,_util.populateValidationMessages)(validationResults,{modelMemoryLimit:modelMemoryLimit});return modelMemoryLimit}function validateGroupNames(groups){var tempJob={groups:groups};var validationResults=(0,_job_utils.validateGroupNames)(tempJob);var valid=validationResults.valid;var groupIds={valid:valid,message:""};(0,_util.populateValidationMessages)(validationResults,{groupIds:groupIds});return groupIds}function isValidCustomUrls(customUrls){if(customUrls===undefined||customUrls.length===0){return true}var isInvalidItem=customUrls.some((function(customUrl,index){var label=customUrl.url_name;var otherUrls=_toConsumableArray(customUrls);otherUrls.splice(index,1);var itemValid=(0,_custom_url_utils.isValidLabel)(label,otherUrls);if(itemValid===true){var timeRange=customUrl.time_range;itemValid=(0,_custom_url_utils.isValidTimeRange)(timeRange)}return!itemValid}));return!isInvalidItem}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.populateValidationMessages=populateValidationMessages;exports.checkForExistingJobAndGroupIds=checkForExistingJobAndGroupIds;var _i18n=__webpack_require__(1);var _validation=__webpack_require__(107);var _ml_server_info=__webpack_require__(84);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function populateValidationMessages(validationResults,basicValidations,jobConfig,datafeedConfig){var limits=(0,_ml_server_info.getNewJobLimits)();if(validationResults.contains("job_id_empty")){basicValidations.jobId.valid=false}else if(validationResults.contains("job_id_invalid")){basicValidations.jobId.valid=false;var msg=_i18n.i18n.translate("xpack.ml.newJob.wizard.validateJob.jobNameAllowedCharactersDescription",{defaultMessage:"Job ID can contain lowercase alphanumeric (a-z and 0-9), hyphens or underscores; "+"must start and end with an alphanumeric character"});basicValidations.jobId.message=msg}else if(validationResults.contains("job_id_invalid_max_length")){basicValidations.jobId.valid=false;basicValidations.jobId.message=_i18n.i18n.translate("xpack.ml.newJob.wizard.validateJob.jobIdInvalidMaxLengthErrorMessage",{defaultMessage:"Job ID must be no more than {maxLength, plural, one {# character} other {# characters}} long.",values:{maxLength:_validation.JOB_ID_MAX_LENGTH}})}else if(validationResults.contains("job_id_already_exists")){basicValidations.jobId.valid=false;var _msg=_i18n.i18n.translate("xpack.ml.newJob.wizard.validateJob.jobNameAlreadyExists",{defaultMessage:"Job ID already exists. A job ID cannot be the same as an existing job or group."});basicValidations.jobId.message=_msg}if(validationResults.contains("job_group_id_invalid")){basicValidations.groupIds.valid=false;var _msg2=_i18n.i18n.translate("xpack.ml.newJob.wizard.validateJob.jobGroupAllowedCharactersDescription",{defaultMessage:"Job group names can contain lowercase alphanumeric (a-z and 0-9), hyphens or underscores; "+"must start and end with an alphanumeric character"});basicValidations.groupIds.message=_msg2}else if(validationResults.contains("job_group_id_invalid_max_length")){basicValidations.groupIds.valid=false;basicValidations.groupIds.message=_i18n.i18n.translate("xpack.ml.newJob.wizard.validateJob.jobGroupMaxLengthDescription",{defaultMessage:"Job group name must be no more than {maxLength, plural, one {# character} other {# characters}} long.",values:{maxLength:_validation.JOB_ID_MAX_LENGTH}})}else if(validationResults.contains("job_group_id_already_exists")){basicValidations.groupIds.valid=false;var _msg3=_i18n.i18n.translate("xpack.ml.newJob.wizard.validateJob.groupNameAlreadyExists",{defaultMessage:"Group ID already exists. A group ID cannot be the same as an existing job or group."});basicValidations.groupIds.message=_msg3}if(validationResults.contains("model_memory_limit_units_invalid")){basicValidations.modelMemoryLimit.valid=false;var str="".concat(_validation.ALLOWED_DATA_UNITS.slice(0,_validation.ALLOWED_DATA_UNITS.length-1).join(", ")," or ").concat(_toConsumableArray(_validation.ALLOWED_DATA_UNITS).pop());var _msg4=_i18n.i18n.translate("xpack.ml.newJob.wizard.validateJob.modelMemoryLimitUnitsInvalidErrorMessage",{defaultMessage:"Model memory limit data unit unrecognized. It must be {str}",values:{str:str}});basicValidations.modelMemoryLimit.message=_msg4}if(validationResults.contains("model_memory_limit_invalid")){basicValidations.modelMemoryLimit.valid=false;var maxModelMemoryLimit=(limits.max_model_memory_limit||"").toUpperCase();var _msg5=_i18n.i18n.translate("xpack.ml.newJob.wizard.validateJob.modelMemoryLimitRangeInvalidErrorMessage",{defaultMessage:"Model memory limit cannot be higher than the maximum value of {maxModelMemoryLimit}",values:{maxModelMemoryLimit:maxModelMemoryLimit}});basicValidations.modelMemoryLimit.message=_msg5}if(validationResults.contains("detectors_duplicates")){basicValidations.duplicateDetectors.valid=false;var _msg6=_i18n.i18n.translate("xpack.ml.newJob.wizard.validateJob.duplicatedDetectorsErrorMessage",{defaultMessage:"Duplicate detectors were found."});basicValidations.duplicateDetectors.message=_msg6}if(validationResults.contains("bucket_span_empty")){basicValidations.bucketSpan.valid=false;var _msg7=_i18n.i18n.translate("xpack.ml.newJob.wizard.validateJob.bucketSpanMustBeSetErrorMessage",{defaultMessage:"Bucket span must be set"});basicValidations.bucketSpan.message=_msg7}else if(validationResults.contains("bucket_span_invalid")){basicValidations.bucketSpan.valid=false;basicValidations.bucketSpan.message=invalidTimeFormatMessage(jobConfig.analysis_config.bucket_span)}if(validationResults.contains("query_empty")){basicValidations.query.valid=false;var _msg8=_i18n.i18n.translate("xpack.ml.newJob.wizard.validateJob.queryCannotBeEmpty",{defaultMessage:"Datafeed query cannot be empty."});basicValidations.query.message=_msg8}else if(validationResults.contains("query_invalid")){basicValidations.query.valid=false;var _msg9=_i18n.i18n.translate("xpack.ml.newJob.wizard.validateJob.queryIsInvalidEsQuery",{defaultMessage:"Datafeed query must be a valid elasticsearch query."});basicValidations.query.message=_msg9}if(validationResults.contains("query_delay_invalid")){basicValidations.queryDelay.valid=false;basicValidations.queryDelay.message=invalidTimeFormatMessage(datafeedConfig.query_delay)}if(validationResults.contains("frequency_invalid")){basicValidations.frequency.valid=false;basicValidations.frequency.message=invalidTimeFormatMessage(datafeedConfig.frequency)}}function checkForExistingJobAndGroupIds(jobId,groupIds,existingJobsAndGroups){var messages=[];if(existingJobsAndGroups.jobIds.includes(jobId)||existingJobsAndGroups.groupIds.includes(jobId)||groupIds.includes(jobId)){messages.push({id:"job_id_already_exists"})}var newGroups=groupIds.filter((function(g){return!existingJobsAndGroups.groupIds.includes(g)}));if(existingJobsAndGroups.jobIds.some((function(g){return newGroups.includes(g)}))){messages.push({id:"job_group_id_already_exists"})}return{messages:messages,valid:messages.length===0,contains:function contains(id){return messages.some((function(m){return id===m.id}))},find:function find(id){return messages.find((function(m){return id===m.id}))}}}function invalidTimeFormatMessage(value){return _i18n.i18n.translate("xpack.ml.newJob.wizard.validateJob.frequencyInvalidTimeIntervalFormatErrorMessage",{defaultMessage:"{value} is not a valid time interval format e.g. {tenMinutes}, {oneHour}. It also needs to be higher than zero.",values:{value:value,tenMinutes:"10m",oneHour:"1h"}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CreateWatchFlyout",{enumerable:true,get:function get(){return _create_watch_flyout.CreateWatchFlyout}});var _create_watch_flyout=__webpack_require__(1230)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mlCreateWatchService=void 0;var _lodash=__webpack_require__(49);var _http_service=__webpack_require__(116);var _email=_interopRequireDefault(__webpack_require__(1231));var _email_influencers=_interopRequireDefault(__webpack_require__(1232));var _select_severity=__webpack_require__(463);var _watch=__webpack_require__(1233);var _i18n=__webpack_require__(1);var _dependency_cache=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var compiledEmailBody=(0,_lodash.template)(_email.default);var compiledEmailInfluencersBody=(0,_lodash.template)(_email_influencers.default);var emailSection={send_email:{throttle_period_in_millis:9e5,email:{profile:"standard",to:[],subject:_i18n.i18n.translate("xpack.ml.newJob.simple.watcher.email.mlWatcherAlertSubjectTitle",{defaultMessage:"ML Watcher Alert"}),body:{html:""}}}};function randomNumber(min,max){return Math.floor(Math.random()*(max-min+1)+min)}function saveWatch(watchModel){var path="/api/watcher/watch/".concat(watchModel.id);return(0,_http_service.http)({path:path,method:"PUT",body:JSON.stringify(watchModel.upstreamJSON)})}var CreateWatchService=function(){function CreateWatchService(){_classCallCheck(this,CreateWatchService);_defineProperty(this,"createNewWatch",(function(jobId){var _this=this;return new Promise((function(resolve,reject){_this.status.watch=_this.STATUS.SAVING;if(jobId!==undefined){var id="ml-".concat(jobId);_this.config.id=id;_watch.watch.input.search.request.body.query.bool.filter[0].term.job_id=jobId;_watch.watch.input.search.request.body.query.bool.filter[1].range.timestamp.gte="now-".concat(_this.config.interval);_watch.watch.input.search.request.body.aggs.bucket_results.filter.range.anomaly_score.gte=_this.config.threshold.val;if(_this.config.includeEmail&&_this.config.email!==""){var _getApplication=(0,_dependency_cache.getApplication)(),getUrlForApp=_getApplication.getUrlForApp;var emails=_this.config.email.split(",");emailSection.send_email.email.to=emails;emailSection.send_email.email.body.html=compiledEmailBody({serverAddress:getUrlForApp("ml",{absolute:true}),influencersSection:_this.config.includeInfluencers===true?compiledEmailInfluencersBody({topInfluencersLabel:_i18n.i18n.translate("xpack.ml.newJob.simple.watcher.email.topInfluencersLabel",{defaultMessage:"Top influencers:"})}):"",elasticStackMachineLearningAlertLabel:_i18n.i18n.translate("xpack.ml.newJob.simple.watcher.email.elasticStackMachineLearningAlertLabel",{defaultMessage:"Elastic Stack Machine Learning Alert"}),jobLabel:_i18n.i18n.translate("xpack.ml.newJob.simple.watcher.email.jobLabel",{defaultMessage:"Job"}),timeLabel:_i18n.i18n.translate("xpack.ml.newJob.simple.watcher.email.timeLabel",{defaultMessage:"Time"}),anomalyScoreLabel:_i18n.i18n.translate("xpack.ml.newJob.simple.watcher.email.anomalyScoreLabel",{defaultMessage:"Anomaly score"}),openInAnomalyExplorerLinkText:_i18n.i18n.translate("xpack.ml.newJob.simple.watcher.email.openInAnomalyExplorerLinkText",{defaultMessage:"Click here to open in Anomaly Explorer."}),topRecordsLabel:_i18n.i18n.translate("xpack.ml.newJob.simple.watcher.email.topRecordsLabel",{defaultMessage:"Top records:"})});_watch.watch.actions.send_email=emailSection.send_email}var triggerInterval=randomNumber(60,120);_watch.watch.trigger.schedule.interval="".concat(triggerInterval,"s");var watchModel={id:id,upstreamJSON:{id:id,type:"json",isNew:false,watch:_watch.watch}};var basePath=(0,_dependency_cache.getBasePath)();if(id!==""){saveWatch(watchModel).then((function(){_this.status.watch=_this.STATUS.SAVED;_this.config.watcherEditURL="".concat(basePath.get(),"/app/kibana#/management/elasticsearch/watcher/watches/watch/").concat(id,"/edit?_g=()");resolve({id:id,url:_this.config.watcherEditURL})})).catch((function(resp){_this.status.watch=_this.STATUS.SAVE_FAILED;reject(resp)}))}}else{_this.status.watch=_this.STATUS.SAVE_FAILED;reject()}}))}));this.config={};this.STATUS={SAVE_FAILED:-1,SAVING:0,SAVED:1};this.status={realtimeJob:null,watch:null}}_createClass(CreateWatchService,[{key:"reset",value:function reset(){this.status.realtimeJob=null;this.status.watch=null;this.config.id="";this.config.includeEmail=false;this.config.email="";this.config.interval="20m";this.config.watcherEditURL="";this.config.includeInfluencers=false;var display=_select_severity.DEFAULT_WATCH_SEVERITY.display,val=_select_severity.DEFAULT_WATCH_SEVERITY.val;this.config.threshold={display:display,val:val}}},{key:"loadWatch",value:function loadWatch(jobId){var id="ml-".concat(jobId);var path="/api/watcher/watch/".concat(id);return(0,_http_service.http)({path:path,method:"GET"})}}]);return CreateWatchService}();var mlCreateWatchService=new CreateWatchService;exports.mlCreateWatchService=mlCreateWatchService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SelectSeverity=exports.DEFAULT_WATCH_SEVERITY=exports.SEVERITY_OPTIONS=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _i18n=__webpack_require__(1);var _react2=__webpack_require__(30);var _eui=__webpack_require__(29);var _anomaly_utils=__webpack_require__(75);var _optionsMap;function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var warningLabel=_i18n.i18n.translate("xpack.ml.controls.selectSeverity.warningLabel",{defaultMessage:"warning"});var minorLabel=_i18n.i18n.translate("xpack.ml.controls.selectSeverity.minorLabel",{defaultMessage:"minor"});var majorLabel=_i18n.i18n.translate("xpack.ml.controls.selectSeverity.majorLabel",{defaultMessage:"major"});var criticalLabel=_i18n.i18n.translate("xpack.ml.controls.selectSeverity.criticalLabel",{defaultMessage:"critical"});var optionsMap=(_optionsMap={},_defineProperty(_optionsMap,warningLabel,0),_defineProperty(_optionsMap,minorLabel,25),_defineProperty(_optionsMap,majorLabel,50),_defineProperty(_optionsMap,criticalLabel,75),_optionsMap);var SEVERITY_OPTIONS=[{val:0,display:warningLabel,color:(0,_anomaly_utils.getSeverityColor)(0)},{val:25,display:minorLabel,color:(0,_anomaly_utils.getSeverityColor)(25)},{val:50,display:majorLabel,color:(0,_anomaly_utils.getSeverityColor)(50)},{val:75,display:criticalLabel,color:(0,_anomaly_utils.getSeverityColor)(75)}];exports.SEVERITY_OPTIONS=SEVERITY_OPTIONS;function optionValueToThreshold(value){var threshold=SEVERITY_OPTIONS.find((function(opt){return opt.val===value}));if(threshold===undefined){threshold=SEVERITY_OPTIONS[0]}return threshold}var DEFAULT_WATCH_SEVERITY=SEVERITY_OPTIONS[3];exports.DEFAULT_WATCH_SEVERITY=DEFAULT_WATCH_SEVERITY;var getSeverityOptions=function getSeverityOptions(){return SEVERITY_OPTIONS.map((function(_ref){var color=_ref.color,display=_ref.display,val=_ref.val;return{value:display,inputDisplay:_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiHealth,{color:color,style:{lineHeight:"inherit"}},display)),dropdownDisplay:_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiHealth,{color:color,style:{lineHeight:"inherit"}},display),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react.default.createElement(_eui.EuiText,{size:"xs",color:"subdued"},_react.default.createElement("p",{className:"euiTextColor--subdued"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.controls.selectSeverity.scoreDetailsDescription",defaultMessage:"score {value} and above",values:{value:val}}))))}}))};var SelectSeverity=function SelectSeverity(_ref2){var onChange=_ref2.onChange;var _useState=(0,_react.useState)(DEFAULT_WATCH_SEVERITY),_useState2=_slicedToArray(_useState,2),severity=_useState2[0],setSeverity=_useState2[1];var onSeverityChange=function onSeverityChange(valueDisplay){var option=optionValueToThreshold(optionsMap[valueDisplay]);setSeverity(option);onChange(option)};return _react.default.createElement(_eui.EuiSuperSelect,{hasDividers:true,options:getSeverityOptions(),valueOfSelected:severity.display,onChange:onSeverityChange})};exports.SelectSeverity=SelectSeverity},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DataFrameAnalyticsList",{enumerable:true,get:function get(){return _analytics_list.DataFrameAnalyticsList}});var _analytics_list=__webpack_require__(1590)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getModelMemoryLimitErrors=getModelMemoryLimitErrors;exports.validateMinMML=validateMinMML;exports.reducer=reducer;exports.validateAdvancedEditor=exports.mmlUnitInvalidErrorMessage=void 0;var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(49);var _numeral=_interopRequireDefault(__webpack_require__(124));var _es_utils=__webpack_require__(1609);var _json_xjson_translation_tools=__webpack_require__(413);var _actions=__webpack_require__(511);var _state=__webpack_require__(266);var _job_utils=__webpack_require__(59);var _validators=__webpack_require__(185);var _validation=__webpack_require__(107);var _analytics=__webpack_require__(76);var _public=__webpack_require__(63);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var mmlAllowedUnitsStr="".concat(_validation.ALLOWED_DATA_UNITS.slice(0,_validation.ALLOWED_DATA_UNITS.length-1).join(", ")," or ").concat(_toConsumableArray(_validation.ALLOWED_DATA_UNITS).pop());var mmlUnitInvalidErrorMessage=_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.modelMemoryUnitsInvalidError",{defaultMessage:"Model memory limit data unit unrecognized. It must be {str}",values:{str:mmlAllowedUnitsStr}});exports.mmlUnitInvalidErrorMessage=mmlUnitInvalidErrorMessage;function getModelMemoryLimitErrors(mmlValidationResult){if(mmlValidationResult===null){return null}return Object.keys(mmlValidationResult).reduce((function(acc,errorKey){if(errorKey==="min"){acc.push(_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.modelMemoryUnitsMinError",{defaultMessage:"Model memory limit cannot be lower than {mml}",values:{mml:mmlValidationResult.min.minValue}}))}if(errorKey==="invalidUnits"){acc.push(_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.modelMemoryUnitsInvalidError",{defaultMessage:"Model memory limit data unit unrecognized. It must be {str}",values:{str:mmlAllowedUnitsStr}}))}return acc}),[])}var getSourceIndexString=function getSourceIndexString(state){var _jobConfig$source;var jobConfig=state.jobConfig;var sourceIndex=jobConfig===null||jobConfig===void 0?void 0:(_jobConfig$source=jobConfig.source)===null||_jobConfig$source===void 0?void 0:_jobConfig$source.index;if(typeof sourceIndex==="string"){return sourceIndex}if(Array.isArray(sourceIndex)){return sourceIndex.join(",")}return""};var validateAdvancedEditor=function validateAdvancedEditor(state){var _jobConfig$source2,_ref,_jobConfig$dest;var _state$form=state.form,jobIdEmpty=_state$form.jobIdEmpty,jobIdValid=_state$form.jobIdValid,jobIdExists=_state$form.jobIdExists,jobType=_state$form.jobType,createIndexPattern=_state$form.createIndexPattern,excludes=_state$form.excludes,maxDistinctValuesError=_state$form.maxDistinctValuesError;var jobConfig=state.jobConfig;state.advancedEditorMessages=[];var sourceIndexName=getSourceIndexString(state);var sourceIndexNameEmpty=sourceIndexName==="";var sourceIndexNameValid=Object.keys(_public.indexPatterns.validate(sourceIndexName)).length===0;var sourceIndex=jobConfig===null||jobConfig===void 0?void 0:(_jobConfig$source2=jobConfig.source)===null||_jobConfig$source2===void 0?void 0:_jobConfig$source2.index;if(sourceIndexNameValid){if(typeof sourceIndex==="string"){sourceIndexNameValid=!sourceIndex.includes(",")}if(Array.isArray(sourceIndex)){sourceIndexNameValid=!sourceIndex.some((function(d){return d===null||d===void 0?void 0:d.includes(",")}))}}var destinationIndexName=(_ref=jobConfig===null||jobConfig===void 0?void 0:(_jobConfig$dest=jobConfig.dest)===null||_jobConfig$dest===void 0?void 0:_jobConfig$dest.index)!==null&&_ref!==void 0?_ref:"";var destinationIndexNameEmpty=destinationIndexName==="";var destinationIndexNameValid=(0,_es_utils.isValidIndexName)(destinationIndexName);var destinationIndexPatternTitleExists=state.indexPatternsMap[destinationIndexName]!==undefined;var mml=jobConfig.model_memory_limit;var modelMemoryLimitEmpty=mml===""||mml===undefined;if(!modelMemoryLimitEmpty&&mml!==undefined){var _validateModelMemoryL=(0,_job_utils.validateModelMemoryLimitUnits)(mml),valid=_validateModelMemoryL.valid;state.form.modelMemoryLimitUnitValid=valid}var dependentVariableEmpty=false;var excludesValid=true;var trainingPercentValid=true;if(jobConfig.analysis===undefined&&(jobType===_analytics.ANALYSIS_CONFIG_TYPE.CLASSIFICATION||jobType===_analytics.ANALYSIS_CONFIG_TYPE.REGRESSION)){dependentVariableEmpty=true}if(jobConfig.analysis!==undefined&&((0,_analytics.isRegressionAnalysis)(jobConfig.analysis)||(0,_analytics.isClassificationAnalysis)(jobConfig.analysis))){var dependentVariableName=(0,_analytics.getDependentVar)(jobConfig.analysis)||"";dependentVariableEmpty=dependentVariableName==="";if(!dependentVariableEmpty&&excludes.includes(dependentVariableName)){excludesValid=false;state.advancedEditorMessages.push({error:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.advancedEditorMessage.excludesInvalid",{defaultMessage:"The dependent variable cannot be excluded."}),message:""})}var trainingPercent=(0,_analytics.getTrainingPercent)(jobConfig.analysis);if(trainingPercent!==undefined&&(isNaN(trainingPercent)||trainingPercent<_analytics.TRAINING_PERCENT_MIN||trainingPercent>_analytics.TRAINING_PERCENT_MAX)){trainingPercentValid=false;state.advancedEditorMessages.push({error:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.advancedEditorMessage.trainingPercentInvalid",{defaultMessage:"The training percent must be a value between {min} and {max}.",values:{min:_analytics.TRAINING_PERCENT_MIN,max:_analytics.TRAINING_PERCENT_MAX}}),message:""})}}if(sourceIndexNameEmpty){state.advancedEditorMessages.push({error:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.advancedEditorMessage.sourceIndexNameEmpty",{defaultMessage:"The source index name must not be empty."}),message:""})}else if(!sourceIndexNameValid){state.advancedEditorMessages.push({error:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.advancedEditorMessage.sourceIndexNameValid",{defaultMessage:"Invalid source index name."}),message:""})}if(destinationIndexNameEmpty){state.advancedEditorMessages.push({error:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.advancedEditorMessage.destinationIndexNameEmpty",{defaultMessage:"The destination index name must not be empty."}),message:""})}else if(destinationIndexPatternTitleExists&&!createIndexPattern){state.advancedEditorMessages.push({error:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.advancedEditorMessage.destinationIndexNameExistsWarn",{defaultMessage:"An index with this destination index name already exists. Be aware that running this analytics job will modify this destination index."}),message:""})}else if(!destinationIndexNameValid){state.advancedEditorMessages.push({error:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.advancedEditorMessage.destinationIndexNameValid",{defaultMessage:"Invalid destination index name."}),message:""})}if(dependentVariableEmpty){state.advancedEditorMessages.push({error:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.advancedEditorMessage.dependentVariableEmpty",{defaultMessage:"The dependent variable field must not be empty."}),message:""})}if(modelMemoryLimitEmpty){state.advancedEditorMessages.push({error:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.advancedEditorMessage.modelMemoryLimitEmpty",{defaultMessage:"The model memory limit field must not be empty."}),message:""})}if(!state.form.modelMemoryLimitUnitValid){state.advancedEditorMessages.push({error:mmlUnitInvalidErrorMessage,message:""})}state.form.destinationIndexPatternTitleExists=destinationIndexPatternTitleExists;state.isValid=maxDistinctValuesError===undefined&&excludesValid&&trainingPercentValid&&state.form.modelMemoryLimitUnitValid&&!jobIdEmpty&&jobIdValid&&!jobIdExists&&!sourceIndexNameEmpty&&sourceIndexNameValid&&!destinationIndexNameEmpty&&destinationIndexNameValid&&!dependentVariableEmpty&&!modelMemoryLimitEmpty&&(!destinationIndexPatternTitleExists||!createIndexPattern);return state};exports.validateAdvancedEditor=validateAdvancedEditor;function validateMinMML(estimatedMml){return function(mml){if(!mml||!estimatedMml){return null}var mmlInBytes=(0,_numeral.default)(mml.toUpperCase()).value();var estimatedMmlInBytes=(0,_numeral.default)(estimatedMml.toUpperCase()).value();return estimatedMmlInBytes>mmlInBytes?{min:{minValue:estimatedMml,actualValue:mml}}:null}}var mmlValidator=(0,_lodash.memoize)((function(estimatedMml){return(0,_validators.composeValidators)((0,_validators.requiredValidator)(),validateMinMML(estimatedMml),(0,_validators.memoryInputValidator)())}));var validateMml=(0,_lodash.memoize)((function(estimatedMml,mml){return mmlValidator(estimatedMml)(mml)}),(function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return args.join("_")}));var validateForm=function validateForm(state){var _state$form2=state.form,jobIdEmpty=_state$form2.jobIdEmpty,jobIdValid=_state$form2.jobIdValid,jobIdExists=_state$form2.jobIdExists,jobType=_state$form2.jobType,sourceIndexNameEmpty=_state$form2.sourceIndexNameEmpty,sourceIndexNameValid=_state$form2.sourceIndexNameValid,destinationIndexNameEmpty=_state$form2.destinationIndexNameEmpty,destinationIndexNameValid=_state$form2.destinationIndexNameValid,destinationIndexPatternTitleExists=_state$form2.destinationIndexPatternTitleExists,createIndexPattern=_state$form2.createIndexPattern,dependentVariable=_state$form2.dependentVariable,maxDistinctValuesError=_state$form2.maxDistinctValuesError,modelMemoryLimit=_state$form2.modelMemoryLimit;var estimatedModelMemoryLimit=state.estimatedModelMemoryLimit;var jobTypeEmpty=jobType===undefined;var dependentVariableEmpty=(jobType===_analytics.ANALYSIS_CONFIG_TYPE.REGRESSION||jobType===_analytics.ANALYSIS_CONFIG_TYPE.CLASSIFICATION)&&dependentVariable==="";var mmlValidationResult=validateMml(estimatedModelMemoryLimit,modelMemoryLimit);state.form.modelMemoryLimitValidationResult=mmlValidationResult;state.isValid=maxDistinctValuesError===undefined&&!jobTypeEmpty&&!mmlValidationResult&&!jobIdEmpty&&jobIdValid&&!jobIdExists&&!sourceIndexNameEmpty&&sourceIndexNameValid&&!destinationIndexNameEmpty&&destinationIndexNameValid&&!dependentVariableEmpty&&(!destinationIndexPatternTitleExists||!createIndexPattern);return state};function reducer(state,action){switch(action.type){case _actions.ACTION.ADD_REQUEST_MESSAGE:var requestMessages=state.requestMessages;requestMessages.push(action.requestMessage);return _objectSpread({},state,{requestMessages:requestMessages});case _actions.ACTION.RESET_REQUEST_MESSAGES:return _objectSpread({},state,{requestMessages:[]});case _actions.ACTION.CLOSE_MODAL:return _objectSpread({},state,{isModalVisible:false});case _actions.ACTION.OPEN_MODAL:return _objectSpread({},state,{isModalVisible:true});case _actions.ACTION.RESET_ADVANCED_EDITOR_MESSAGES:return _objectSpread({},state,{advancedEditorMessages:[]});case _actions.ACTION.RESET_FORM:return(0,_state.getInitialState)();case _actions.ACTION.SET_ADVANCED_EDITOR_RAW_STRING:var resultJobConfig;try{resultJobConfig=JSON.parse((0,_json_xjson_translation_tools.collapseLiteralStrings)(action.advancedEditorRawString))}catch(e){return _objectSpread({},state,{advancedEditorRawString:action.advancedEditorRawString,isAdvancedEditorValidJson:false,advancedEditorMessages:[]})}return _objectSpread({},validateAdvancedEditor(_objectSpread({},state,{jobConfig:resultJobConfig})),{advancedEditorRawString:action.advancedEditorRawString,isAdvancedEditorValidJson:true});case _actions.ACTION.SET_FORM_STATE:var newFormState=_objectSpread({},state.form,{},action.payload);if(action.payload.destinationIndex!==undefined){newFormState.destinationIndexNameExists=state.indexNames.some((function(name){return newFormState.destinationIndex===name}));newFormState.destinationIndexNameEmpty=newFormState.destinationIndex==="";newFormState.destinationIndexNameValid=(0,_es_utils.isValidIndexName)(newFormState.destinationIndex);newFormState.destinationIndexPatternTitleExists=state.indexPatternsMap[newFormState.destinationIndex]!==undefined}if(action.payload.jobId!==undefined){newFormState.jobIdExists=state.jobIds.some((function(id){return newFormState.jobId===id}));newFormState.jobIdEmpty=newFormState.jobId==="";newFormState.jobIdValid=(0,_job_utils.isJobIdValid)(newFormState.jobId);newFormState.jobIdInvalidMaxLength=!!(0,_validators.maxLengthValidator)(_validation.JOB_ID_MAX_LENGTH)(newFormState.jobId)}if(action.payload.sourceIndex!==undefined){newFormState.sourceIndexNameEmpty=newFormState.sourceIndex==="";var validationMessages=_public.indexPatterns.validate(newFormState.sourceIndex);newFormState.sourceIndexNameValid=Object.keys(validationMessages).length===0}return state.isAdvancedEditorEnabled?validateAdvancedEditor(_objectSpread({},state,{form:newFormState})):validateForm(_objectSpread({},state,{form:newFormState}));case _actions.ACTION.SET_INDEX_NAMES:{var newState=_objectSpread({},state,{indexNames:action.indexNames});newState.form.destinationIndexNameExists=newState.indexNames.some((function(name){return newState.form.destinationIndex===name}));return newState}case _actions.ACTION.SET_INDEX_PATTERN_TITLES:{var _newState=_objectSpread({},state,{},action.payload);_newState.form.destinationIndexPatternTitleExists=_newState.indexPatternsMap[_newState.form.destinationIndex]!==undefined;return _newState}case _actions.ACTION.SET_IS_JOB_CREATED:return _objectSpread({},state,{isJobCreated:action.isJobCreated});case _actions.ACTION.SET_IS_JOB_STARTED:return _objectSpread({},state,{isJobStarted:action.isJobStarted});case _actions.ACTION.SET_IS_MODAL_BUTTON_DISABLED:return _objectSpread({},state,{isModalButtonDisabled:action.isModalButtonDisabled});case _actions.ACTION.SET_IS_MODAL_VISIBLE:return _objectSpread({},state,{isModalVisible:action.isModalVisible});case _actions.ACTION.SET_JOB_CONFIG:return validateAdvancedEditor(_objectSpread({},state,{jobConfig:action.payload}));case _actions.ACTION.SET_JOB_IDS:{var _newState2=_objectSpread({},state,{jobIds:action.jobIds});_newState2.form.jobIdExists=_newState2.jobIds.some((function(id){return _newState2.form.jobId===id}));return _newState2}case _actions.ACTION.SWITCH_TO_ADVANCED_EDITOR:var jobConfig=state.jobConfig;var isJobConfigEmpty=(0,_lodash.isEmpty)(state.jobConfig);if(isJobConfigEmpty){jobConfig=(0,_state.getJobConfigFromFormState)(state.form)}return validateAdvancedEditor(_objectSpread({},state,{advancedEditorRawString:JSON.stringify(jobConfig,null,2),isAdvancedEditorEnabled:true,jobConfig:jobConfig}));case _actions.ACTION.SET_ESTIMATED_MODEL_MEMORY_LIMIT:return _objectSpread({},state,{estimatedModelMemoryLimit:action.value});case _actions.ACTION.SET_JOB_CLONE:return _objectSpread({},state,{cloneJob:action.cloneJob})}return state}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ACTION=void 0;var ACTION;exports.ACTION=ACTION;(function(ACTION){ACTION[ACTION["ADD_REQUEST_MESSAGE"]=0]="ADD_REQUEST_MESSAGE";ACTION[ACTION["RESET_REQUEST_MESSAGES"]=1]="RESET_REQUEST_MESSAGES";ACTION[ACTION["CLOSE_MODAL"]=2]="CLOSE_MODAL";ACTION[ACTION["OPEN_MODAL"]=3]="OPEN_MODAL";ACTION[ACTION["RESET_ADVANCED_EDITOR_MESSAGES"]=4]="RESET_ADVANCED_EDITOR_MESSAGES";ACTION[ACTION["RESET_FORM"]=5]="RESET_FORM";ACTION[ACTION["SET_ADVANCED_EDITOR_RAW_STRING"]=6]="SET_ADVANCED_EDITOR_RAW_STRING";ACTION[ACTION["SET_FORM_STATE"]=7]="SET_FORM_STATE";ACTION[ACTION["SET_INDEX_NAMES"]=8]="SET_INDEX_NAMES";ACTION[ACTION["SET_INDEX_PATTERN_TITLES"]=9]="SET_INDEX_PATTERN_TITLES";ACTION[ACTION["SET_IS_JOB_CREATED"]=10]="SET_IS_JOB_CREATED";ACTION[ACTION["SET_IS_JOB_STARTED"]=11]="SET_IS_JOB_STARTED";ACTION[ACTION["SET_IS_MODAL_BUTTON_DISABLED"]=12]="SET_IS_MODAL_BUTTON_DISABLED";ACTION[ACTION["SET_IS_MODAL_VISIBLE"]=13]="SET_IS_MODAL_VISIBLE";ACTION[ACTION["SET_JOB_CONFIG"]=14]="SET_JOB_CONFIG";ACTION[ACTION["SET_JOB_IDS"]=15]="SET_JOB_IDS";ACTION[ACTION["SWITCH_TO_ADVANCED_EDITOR"]=16]="SWITCH_TO_ADVANCED_EDITOR";ACTION[ACTION["SET_ESTIMATED_MODEL_MEMORY_LIMIT"]=17]="SET_ESTIMATED_MODEL_MEMORY_LIMIT";ACTION[ACTION["SET_JOB_CLONE"]=18]="SET_JOB_CLONE"})(ACTION||(exports.ACTION=ACTION={}))},,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setLicenseCache=setLicenseCache;exports.checkFullLicense=checkFullLicense;exports.checkBasicLicense=checkBasicLicense;exports.hasLicenseExpired=hasLicenseExpired;exports.isFullLicense=isFullLicense;var _ml_client_license=__webpack_require__(537);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var mlLicense=null;function setLicenseCache(licensingSetup){mlLicense=new _ml_client_license.MlClientLicense;mlLicense.setup(licensingSetup.license$);return mlLicense}function checkFullLicense(){return _checkFullLicense.apply(this,arguments)}function _checkFullLicense(){_checkFullLicense=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(mlLicense===null)){_context.next=3;break}console.error("ML Licensing not initialized");return _context.abrupt("return",Promise.reject());case 3:return _context.abrupt("return",mlLicense.fullLicenseResolver());case 4:case"end":return _context.stop()}}}),_callee)})));return _checkFullLicense.apply(this,arguments)}function checkBasicLicense(){return _checkBasicLicense.apply(this,arguments)}function _checkBasicLicense(){_checkBasicLicense=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(mlLicense===null)){_context2.next=3;break}console.error("ML Licensing not initialized");return _context2.abrupt("return",Promise.reject());case 3:return _context2.abrupt("return",mlLicense.basicLicenseResolver());case 4:case"end":return _context2.stop()}}}),_callee2)})));return _checkBasicLicense.apply(this,arguments)}function hasLicenseExpired(){return mlLicense!==null&&mlLicense.hasLicenseExpired()}function isFullLicense(){return mlLicense!==null&&mlLicense.isFullLicense()}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.MlClientLicense=void 0;var _license=__webpack_require__(8);var _expired_warning=__webpack_require__(538);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var MlClientLicense=function(_MlLicense){_inherits(MlClientLicense,_MlLicense);function MlClientLicense(){_classCallCheck(this,MlClientLicense);return _possibleConstructorReturn(this,_getPrototypeOf(MlClientLicense).apply(this,arguments))}_createClass(MlClientLicense,[{key:"fullLicenseResolver",value:function fullLicenseResolver(){if(this.isMlEnabled()===false||this.isMinimumLicense()===false){return redirectToKibana()}if(this.isFullLicense()===false){return redirectToBasic()}if(this.hasLicenseExpired()){(0,_expired_warning.showExpiredLicenseWarning)()}return Promise.resolve()}},{key:"basicLicenseResolver",value:function basicLicenseResolver(){if(this.isMlEnabled()===false||this.isMinimumLicense()===false){return redirectToKibana()}if(this.hasLicenseExpired()){(0,_expired_warning.showExpiredLicenseWarning)()}return Promise.resolve()}}]);return MlClientLicense}(_license.MlLicense);exports.MlClientLicense=MlClientLicense;function redirectToKibana(){window.location.href="/";return Promise.reject()}function redirectToBasic(){window.location.href="#/datavisualizer";return Promise.reject()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showExpiredLicenseWarning=showExpiredLicenseWarning;var _react=_interopRequireDefault(__webpack_require__(28));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(29);var _public=__webpack_require__(31);var _dependency_cache=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var expiredLicenseBannerId;function showExpiredLicenseWarning(){if(expiredLicenseBannerId===undefined){var message=_i18n.i18n.translate("xpack.ml.checkLicense.licenseHasExpiredMessage",{defaultMessage:"Your Machine Learning license has expired."});var overlays=(0,_dependency_cache.getOverlays)();expiredLicenseBannerId=overlays.banners.add((0,_public.toMountPoint)(_react.default.createElement(_eui.EuiCallOut,{iconType:"iInCircle",color:"warning",title:message})))}}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useMlContext=void 0;var _react=__webpack_require__(28);var _ml_context=__webpack_require__(280);var useMlContext=function useMlContext(){var context=(0,_react.useContext)(_ml_context.MlContext);if(context.combinedQuery===undefined||context.currentIndexPattern===undefined||context.currentSavedSearch===undefined||context.indexPatterns===undefined||context.kibanaConfig===undefined){throw new Error("required attribute is undefined")}return context};exports.useMlContext=useMlContext},,,,function(module,exports,__webpack_require__){if(window.__kbnDarkMode__){__webpack_require__(545)}else{__webpack_require__(547)}},function(module,exports,__webpack_require__){var api=__webpack_require__(2);var content=__webpack_require__(546);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(3);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".globalQueryBar {\n  padding: 0px 8px 8px 8px; }\n\n.globalQueryBar:not(:empty) {\n  padding-bottom: 8px; }\n\n.globalFilterGroup__filterBar {\n  margin-top: 4px; }\n\n.globalFilterBar__addButton {\n  min-height: 28px; }\n\n.globalFilterGroup__branch {\n  padding: 8px 12px 0 0;\n  background-repeat: no-repeat;\n  background-position: 12px -8px;\n  background-image: url(\"data:image/svg+xml,%0A%3Csvg width='28px' height='28px' viewBox='0 0 28 28' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='rgb%2852, 55, 65%29'%3E%3Crect x='14' y='27' width='14' height='1'%3E%3C/rect%3E%3C/g%3E%3C/svg%3E\"); }\n\n.globalFilterGroup__wrapper {\n  line-height: 1;\n  overflow: hidden;\n  -webkit-transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n\n.globalFilterGroup__filterFlexItem {\n  overflow: hidden;\n  padding-bottom: 2px; }\n\n.globalFilterBar__flexItem {\n  max-width: calc(100% - 4px); }\n\n@media only screen and (max-width: 574px) {\n  .globalFilterGroup__wrapper-isVisible {\n    margin-top: -16px; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .globalFilterGroup__wrapper-isVisible {\n    margin-top: -16px; } }\n\n/**\n * 1.  Allow wrapping of long filter items\n */\n.globalFilterItem {\n  line-height: 16px;\n  border: none;\n  color: #DFE5EF;\n  padding-top: 6px;\n  padding-bottom: 6px;\n  white-space: normal;\n  /* 1 */ }\n  .globalFilterItem .euiBadge__childButton {\n    -webkit-flex-shrink: 1;\n        -ms-flex-negative: 1;\n            flex-shrink: 1;\n    /* 1 */ }\n  .globalFilterItem:not(.globalFilterItem-isDisabled) {\n    background-color: #16171c;\n    background-repeat: no-repeat;\n    background-size: 0% 100%;\n    -webkit-box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.2), 0 3px 2px -2px rgba(0, 0, 0, 0.2), inset 0 0 0 1px rgba(255, 255, 255, 0.1);\n            box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.2), 0 3px 2px -2px rgba(0, 0, 0, 0.2), inset 0 0 0 1px rgba(255, 255, 255, 0.1);\n    -webkit-transition: background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in, -webkit-box-shadow 150ms ease-in;\n    transition: background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in, -webkit-box-shadow 150ms ease-in;\n    transition: box-shadow 150ms ease-in, background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in;\n    transition: box-shadow 150ms ease-in, background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in, -webkit-box-shadow 150ms ease-in;\n    -webkit-box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.2), 0 3px 2px -2px rgba(0, 0, 0, 0.2), inset 0 0 0 1px #424752;\n            box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.2), 0 3px 2px -2px rgba(0, 0, 0, 0.2), inset 0 0 0 1px #424752; }\n    @supports (-moz-appearance: none) {\n      .globalFilterItem:not(.globalFilterItem-isDisabled) {\n        -webkit-transition-property: background-image, background-size, -webkit-box-shadow;\n        transition-property: background-image, background-size, -webkit-box-shadow;\n        transition-property: box-shadow, background-image, background-size;\n        transition-property: box-shadow, background-image, background-size, -webkit-box-shadow; } }\n  .globalFilterItem:focus-within {\n    -webkit-animation: none !important;\n            animation: none !important; }\n\n.globalFilterItem-isDisabled {\n  color: #98A2B3;\n  background-color: rgba(52, 55, 65, 0.5);\n  text-decoration: line-through;\n  font-weight: 400;\n  font-style: italic; }\n\n.globalFilterItem-isInvalid {\n  text-decoration: none; }\n  .globalFilterItem-isInvalid .globalFilterLabel__value {\n    color: #F66;\n    font-weight: 700; }\n\n.globalFilterItem-isPinned {\n  position: relative; }\n  .globalFilterItem-isPinned::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    width: 4px;\n    background-color: #424752;\n    border-top-left-radius: 2px;\n    border-bottom-left-radius: 2px; }\n\n.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled) {\n  -webkit-box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.2), 0 3px 2px -2px rgba(0, 0, 0, 0.2), inset 0 0 0 1px #803333;\n          box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.2), 0 3px 2px -2px rgba(0, 0, 0, 0.2), inset 0 0 0 1px #803333; }\n  .globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled)::before {\n    background-color: #cc5252; }\n\n.globalFilterItem__editorForm {\n  padding: 12px; }\n\n.globalFilterItem__popover,\n.globalFilterItem__popoverAnchor {\n  display: block; }\n\n.globalFilterEditor__fieldInput {\n  max-width: 208px; }\n\n.kbnTypeahead {\n  position: relative; }\n  .kbnTypeahead .kbnTypeahead__popover {\n    -webkit-box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1), 0 6px 12px 0 rgba(0, 0, 0, 0.1), 0 4px 4px 0 rgba(0, 0, 0, 0.1), 0 2px 2px 0 rgba(0, 0, 0, 0.1);\n            box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1), 0 6px 12px 0 rgba(0, 0, 0, 0.1), 0 4px 4px 0 rgba(0, 0, 0, 0.1), 0 2px 2px 0 rgba(0, 0, 0, 0.1);\n    border: 1px solid;\n    border-color: #343741;\n    color: #DFE5EF;\n    background-color: #1D1E24;\n    position: absolute;\n    top: -1px;\n    z-index: 2000;\n    width: 100%;\n    border-bottom-left-radius: 4px;\n    border-bottom-right-radius: 4px; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items {\n      scrollbar-width: thin;\n      max-height: 60vh;\n      overflow-y: auto; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar-thumb {\n        background-color: rgba(152, 162, 179, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar-corner, .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar-track {\n        background-color: transparent; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item {\n      height: 32px;\n      white-space: nowrap;\n      font-size: 12px;\n      vertical-align: middle;\n      padding: 0;\n      border-bottom: none;\n      line-height: normal; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:hover {\n      cursor: pointer; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:last-child {\n      border-bottom: none;\n      border-radius: 0 0 4px 4px; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:first-child {\n      border-bottom: none;\n      border-radius: 4px 4px 0 0; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active {\n      background-color: #25262E; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__callout {\n        background: #1D1E24; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__text {\n        color: #FFF; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__type {\n        color: #FFF; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--field .kbnSuggestionItem__type {\n        background-color: #665231; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--value .kbnSuggestionItem__type {\n        background-color: #325a54; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--operator .kbnSuggestionItem__type {\n        background-color: #0b4462; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--conjunction .kbnSuggestionItem__type {\n        background-color: #3a2d4a; }\n\n.kbnSuggestionItem {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  font-size: 12px;\n  white-space: nowrap; }\n  .kbnSuggestionItem.kbnSuggestionItem--field .kbnSuggestionItem__type {\n    background-color: #80673d;\n    color: #ffeaca; }\n  .kbnSuggestionItem.kbnSuggestionItem--value .kbnSuggestionItem__type {\n    background-color: #3f7169;\n    color: #c6f2ea; }\n  .kbnSuggestionItem.kbnSuggestionItem--operator .kbnSuggestionItem__type {\n    background-color: #0e557b;\n    color: #8ad3f6; }\n  .kbnSuggestionItem.kbnSuggestionItem--conjunction .kbnSuggestionItem__type {\n    background-color: #49385c;\n    color: #c0aed6; }\n  .kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__type {\n    background-color: #343741;\n    color: #535966; }\n  .kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__text {\n    width: auto; }\n\n.kbnSuggestionItem__text,\n.kbnSuggestionItem__type,\n.kbnSuggestionItem__description {\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n  -webkit-flex-basis: 0%;\n      -ms-flex-preferred-size: 0%;\n          flex-basis: 0%;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n      -ms-flex-direction: column;\n          flex-direction: column; }\n\n.kbnSuggestionItem__type {\n  -webkit-box-flex: 0;\n  -webkit-flex-grow: 0;\n      -ms-flex-positive: 0;\n          flex-grow: 0;\n  -webkit-flex-shrink: 0;\n      -ms-flex-negative: 0;\n          flex-shrink: 0;\n  -webkit-flex-basis: auto;\n      -ms-flex-preferred-size: auto;\n          flex-basis: auto;\n  width: 32px;\n  height: 32px;\n  text-align: center;\n  overflow: hidden;\n  padding: 4px;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n.kbnSuggestionItem__text {\n  -webkit-box-flex: 0;\n  -webkit-flex-grow: 0;\n      -ms-flex-positive: 0;\n          flex-grow: 0;\n  /* 2 */\n  -webkit-flex-basis: auto;\n      -ms-flex-preferred-size: auto;\n          flex-basis: auto;\n  /* 2 */\n  font-family: \"Roboto Mono\", Consolas, Menlo, Courier, monospace;\n  width: 250px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding: 4px 8px;\n  color: #DFE5EF; }\n\n.kbnSuggestionItem__description {\n  color: #98A2B3;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-left: 32px; }\n  .kbnSuggestionItem__description:empty {\n    -webkit-box-flex: 0;\n    -webkit-flex-grow: 0;\n        -ms-flex-positive: 0;\n            flex-grow: 0;\n    margin-left: 0; }\n\n.kbnSuggestionItem__callout {\n  font-family: \"Roboto Mono\", Consolas, Menlo, Courier, monospace;\n  background: #25262E;\n  color: #FFF;\n  padding: 0 4px;\n  display: inline-block; }\n\n.kbnSuggestionItem--value .kbnSuggestionItem__text {\n  -webkit-flex-basis: 50%;\n      -ms-flex-preferred-size: 50%;\n          flex-basis: 50%;\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1; }\n\n.kbnSavedQueryManagement__popover {\n  max-width: 400px; }\n\n.kbnSavedQueryManagement__listWrapper {\n  max-height: 416px;\n  overflow-y: hidden; }\n\n.kbnSavedQueryManagement__pagination {\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  padding: 6px 12px 12px; }\n\n.kbnSavedQueryManagement__text {\n  padding: 12px 12px 6px 12px; }\n\n.kbnSavedQueryManagement__list {\n  scrollbar-width: thin;\n  -webkit-mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n          mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n  height: 100%;\n  overflow-y: auto;\n  max-height: inherit;\n  padding: 6px 4px !important; }\n  .kbnSavedQueryManagement__list::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .kbnSavedQueryManagement__list::-webkit-scrollbar-thumb {\n    background-color: rgba(152, 162, 179, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .kbnSavedQueryManagement__list::-webkit-scrollbar-corner, .kbnSavedQueryManagement__list::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.kbnSavedQueryListItem {\n  margin-top: 0;\n  color: #1BA9F5; }\n\n.kbnSavedQueryListItem-selected button {\n  font-weight: 700; }\n\n.kbnSavedQueryListItem__label {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n.kbnSavedQueryListItem__labelText {\n  max-width: 100%;\n  overflow: hidden !important;\n  text-overflow: ellipsis !important;\n  white-space: nowrap !important;\n  word-wrap: normal !important;\n  margin-right: 4px; }\n\n@media only screen and (max-width: 574px) {\n  .kbnQueryBar--withDatePicker > :first-child {\n    -webkit-box-ordinal-group: 2;\n    -webkit-order: 1;\n        -ms-flex-order: 1;\n            order: 1;\n    margin-top: -8px; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .kbnQueryBar--withDatePicker > :first-child {\n    -webkit-box-ordinal-group: 2;\n    -webkit-order: 1;\n        -ms-flex-order: 1;\n            order: 1;\n    margin-top: -8px; } }\n\n@media only screen and (min-width: 768px) and (max-width: 991px) {\n  .kbnQueryBar__datePickerWrapper {\n    max-width: 40vw;\n    -webkit-box-flex: 0 !important;\n    -webkit-flex-grow: 0 !important;\n        -ms-flex-positive: 0 !important;\n            flex-grow: 0 !important;\n    -webkit-flex-basis: auto !important;\n        -ms-flex-preferred-size: auto !important;\n            flex-basis: auto !important; } }\n\n@media only screen and (min-width: 992px) and (max-width: 1199px) {\n  .kbnQueryBar__datePickerWrapper {\n    max-width: 40vw;\n    -webkit-box-flex: 0 !important;\n    -webkit-flex-grow: 0 !important;\n        -ms-flex-positive: 0 !important;\n            flex-grow: 0 !important;\n    -webkit-flex-basis: auto !important;\n        -ms-flex-preferred-size: auto !important;\n            flex-basis: auto !important; } }\n\n@media only screen and (min-width: 1200px) {\n  .kbnQueryBar__datePickerWrapper {\n    max-width: 40vw;\n    -webkit-box-flex: 0 !important;\n    -webkit-flex-grow: 0 !important;\n        -ms-flex-positive: 0 !important;\n            flex-grow: 0 !important;\n    -webkit-flex-basis: auto !important;\n        -ms-flex-preferred-size: auto !important;\n            flex-basis: auto !important; } }\n\n.shardFailureModal {\n  min-height: 75vh;\n  width: 768px; }\n\n.shardFailureModal__desc {\n  max-width: 686px; }\n\n.shardFailureModal__descTitle {\n  width: 20% !important;\n  margin-top: 8px; }\n\n.shardFailureModal__descValue {\n  width: 80% !important;\n  margin-top: 8px; }\n\n.shardFailureModal__keyValueTitle {\n  padding-right: 8px; }\n\n@media only screen and (max-width: 574px) {\n  .shardFailureModal__keyValueTitle {\n    display: block;\n    width: 100%; }\n  .shardFailureModal__descTitle {\n    display: block;\n    width: 100% !important; }\n  .shardFailureModal__descValue {\n    display: block;\n    width: 100% !important; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .shardFailureModal__keyValueTitle {\n    display: block;\n    width: 100%; }\n  .shardFailureModal__descTitle {\n    display: block;\n    width: 100% !important; }\n  .shardFailureModal__descValue {\n    display: block;\n    width: 100% !important; } }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(2);var content=__webpack_require__(548);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(3);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".globalQueryBar {\n  padding: 0px 8px 8px 8px; }\n\n.globalQueryBar:not(:empty) {\n  padding-bottom: 8px; }\n\n.globalFilterGroup__filterBar {\n  margin-top: 4px; }\n\n.globalFilterBar__addButton {\n  min-height: 28px; }\n\n.globalFilterGroup__branch {\n  padding: 8px 12px 0 0;\n  background-repeat: no-repeat;\n  background-position: 12px -8px;\n  background-image: url(\"data:image/svg+xml,%0A%3Csvg width='28px' height='28px' viewBox='0 0 28 28' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='rgb%28211, 218, 230%29'%3E%3Crect x='14' y='27' width='14' height='1'%3E%3C/rect%3E%3C/g%3E%3C/svg%3E\"); }\n\n.globalFilterGroup__wrapper {\n  line-height: 1;\n  overflow: hidden;\n  -webkit-transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  transition: height 250ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n\n.globalFilterGroup__filterFlexItem {\n  overflow: hidden;\n  padding-bottom: 2px; }\n\n.globalFilterBar__flexItem {\n  max-width: calc(100% - 4px); }\n\n@media only screen and (max-width: 574px) {\n  .globalFilterGroup__wrapper-isVisible {\n    margin-top: -16px; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .globalFilterGroup__wrapper-isVisible {\n    margin-top: -16px; } }\n\n/**\n * 1.  Allow wrapping of long filter items\n */\n.globalFilterItem {\n  line-height: 16px;\n  border: none;\n  color: #343741;\n  padding-top: 6px;\n  padding-bottom: 6px;\n  white-space: normal;\n  /* 1 */ }\n  .globalFilterItem .euiBadge__childButton {\n    -webkit-flex-shrink: 1;\n        -ms-flex-negative: 1;\n            flex-shrink: 1;\n    /* 1 */ }\n  .globalFilterItem:not(.globalFilterItem-isDisabled) {\n    background-color: #fbfcfd;\n    background-repeat: no-repeat;\n    background-size: 0% 100%;\n    -webkit-box-shadow: 0 1px 1px -1px rgba(152, 162, 179, 0.2), 0 3px 2px -2px rgba(152, 162, 179, 0.2), inset 0 0 0 1px rgba(15, 39, 118, 0.1);\n            box-shadow: 0 1px 1px -1px rgba(152, 162, 179, 0.2), 0 3px 2px -2px rgba(152, 162, 179, 0.2), inset 0 0 0 1px rgba(15, 39, 118, 0.1);\n    -webkit-transition: background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in, -webkit-box-shadow 150ms ease-in;\n    transition: background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in, -webkit-box-shadow 150ms ease-in;\n    transition: box-shadow 150ms ease-in, background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in;\n    transition: box-shadow 150ms ease-in, background-image 150ms ease-in, background-size 150ms ease-in, background-color 150ms ease-in, -webkit-box-shadow 150ms ease-in;\n    -webkit-box-shadow: 0 1px 1px -1px rgba(152, 162, 179, 0.2), 0 3px 2px -2px rgba(152, 162, 179, 0.2), inset 0 0 0 1px #bcc3ce;\n            box-shadow: 0 1px 1px -1px rgba(152, 162, 179, 0.2), 0 3px 2px -2px rgba(152, 162, 179, 0.2), inset 0 0 0 1px #bcc3ce; }\n    @supports (-moz-appearance: none) {\n      .globalFilterItem:not(.globalFilterItem-isDisabled) {\n        -webkit-transition-property: background-image, background-size, -webkit-box-shadow;\n        transition-property: background-image, background-size, -webkit-box-shadow;\n        transition-property: box-shadow, background-image, background-size;\n        transition-property: box-shadow, background-image, background-size, -webkit-box-shadow; } }\n  .globalFilterItem:focus-within {\n    -webkit-animation: none !important;\n            animation: none !important; }\n\n.globalFilterItem-isDisabled {\n  color: #69707D;\n  background-color: rgba(211, 218, 230, 0.5);\n  text-decoration: line-through;\n  font-weight: 400;\n  font-style: italic; }\n\n.globalFilterItem-isInvalid {\n  text-decoration: none; }\n  .globalFilterItem-isInvalid .globalFilterLabel__value {\n    color: #BD271E;\n    font-weight: 700; }\n\n.globalFilterItem-isPinned {\n  position: relative; }\n  .globalFilterItem-isPinned::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    width: 4px;\n    background-color: #bcc3ce;\n    border-top-left-radius: 2px;\n    border-bottom-left-radius: 2px; }\n\n.globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled) {\n  -webkit-box-shadow: 0 1px 1px -1px rgba(152, 162, 179, 0.2), 0 3px 2px -2px rgba(152, 162, 179, 0.2), inset 0 0 0 1px #ebbebc;\n          box-shadow: 0 1px 1px -1px rgba(152, 162, 179, 0.2), 0 3px 2px -2px rgba(152, 162, 179, 0.2), inset 0 0 0 1px #ebbebc; }\n  .globalFilterItem-isExcluded:not(.globalFilterItem-isDisabled)::before {\n    background-color: #d16862; }\n\n.globalFilterItem__editorForm {\n  padding: 12px; }\n\n.globalFilterItem__popover,\n.globalFilterItem__popoverAnchor {\n  display: block; }\n\n.globalFilterEditor__fieldInput {\n  max-width: 208px; }\n\n.kbnTypeahead {\n  position: relative; }\n  .kbnTypeahead .kbnTypeahead__popover {\n    -webkit-box-shadow: 0 12px 24px 0 rgba(65, 78, 101, 0.1), 0 6px 12px 0 rgba(65, 78, 101, 0.1), 0 4px 4px 0 rgba(65, 78, 101, 0.1), 0 2px 2px 0 rgba(65, 78, 101, 0.1);\n            box-shadow: 0 12px 24px 0 rgba(65, 78, 101, 0.1), 0 6px 12px 0 rgba(65, 78, 101, 0.1), 0 4px 4px 0 rgba(65, 78, 101, 0.1), 0 2px 2px 0 rgba(65, 78, 101, 0.1);\n    border-color: #d0d3d9;\n    border-top-color: #d9dce0;\n    border-bottom-color: #aaafba;\n    border: 1px solid;\n    border-color: #D3DAE6;\n    color: #343741;\n    background-color: #FFF;\n    position: absolute;\n    top: -1px;\n    z-index: 2000;\n    width: 100%;\n    border-bottom-left-radius: 4px;\n    border-bottom-right-radius: 4px; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items {\n      scrollbar-width: thin;\n      max-height: 60vh;\n      overflow-y: auto; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar-thumb {\n        background-color: rgba(105, 112, 125, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar-corner, .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__items::-webkit-scrollbar-track {\n        background-color: transparent; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item {\n      height: 32px;\n      white-space: nowrap;\n      font-size: 12px;\n      vertical-align: middle;\n      padding: 0;\n      border-bottom: none;\n      line-height: normal; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:hover {\n      cursor: pointer; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:last-child {\n      border-bottom: none;\n      border-radius: 0 0 4px 4px; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item:first-child {\n      border-bottom: none;\n      border-radius: 4px 4px 0 0; }\n    .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active {\n      background-color: #F5F7FA; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__callout {\n        background: #FFF; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__text {\n        color: #000; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem__type {\n        color: #000; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--field .kbnSuggestionItem__type {\n        background-color: #fdedcc; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--value .kbnSuggestionItem__type {\n        background-color: #cce5e3; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--operator .kbnSuggestionItem__type {\n        background-color: #cce1f0; }\n      .kbnTypeahead .kbnTypeahead__popover .kbnTypeahead__item.active .kbnSuggestionItem--conjunction .kbnSuggestionItem__type {\n        background-color: #e9e2f1; }\n\n.kbnSuggestionItem {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  font-size: 12px;\n  white-space: nowrap; }\n  .kbnSuggestionItem.kbnSuggestionItem--field .kbnSuggestionItem__type {\n    background-color: #fef6e6;\n    color: #936400; }\n  .kbnSuggestionItem.kbnSuggestionItem--value .kbnSuggestionItem__type {\n    background-color: #e6f2f1;\n    color: #01776d; }\n  .kbnSuggestionItem.kbnSuggestionItem--operator .kbnSuggestionItem__type {\n    background-color: #e6f0f8;\n    color: #006BB4; }\n  .kbnSuggestionItem.kbnSuggestionItem--conjunction .kbnSuggestionItem__type {\n    background-color: #f4f1f8;\n    color: #7c609e; }\n  .kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__type {\n    background-color: #D3DAE6;\n    color: #98A2B3; }\n  .kbnSuggestionItem.kbnSuggestionItem--recentSearch .kbnSuggestionItem__text {\n    width: auto; }\n\n.kbnSuggestionItem__text,\n.kbnSuggestionItem__type,\n.kbnSuggestionItem__description {\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n  -webkit-flex-basis: 0%;\n      -ms-flex-preferred-size: 0%;\n          flex-basis: 0%;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n      -ms-flex-direction: column;\n          flex-direction: column; }\n\n.kbnSuggestionItem__type {\n  -webkit-box-flex: 0;\n  -webkit-flex-grow: 0;\n      -ms-flex-positive: 0;\n          flex-grow: 0;\n  -webkit-flex-shrink: 0;\n      -ms-flex-negative: 0;\n          flex-shrink: 0;\n  -webkit-flex-basis: auto;\n      -ms-flex-preferred-size: auto;\n          flex-basis: auto;\n  width: 32px;\n  height: 32px;\n  text-align: center;\n  overflow: hidden;\n  padding: 4px;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n.kbnSuggestionItem__text {\n  -webkit-box-flex: 0;\n  -webkit-flex-grow: 0;\n      -ms-flex-positive: 0;\n          flex-grow: 0;\n  /* 2 */\n  -webkit-flex-basis: auto;\n      -ms-flex-preferred-size: auto;\n          flex-basis: auto;\n  /* 2 */\n  font-family: \"Roboto Mono\", Consolas, Menlo, Courier, monospace;\n  width: 250px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding: 4px 8px;\n  color: #343741; }\n\n.kbnSuggestionItem__description {\n  color: #69707D;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-left: 32px; }\n  .kbnSuggestionItem__description:empty {\n    -webkit-box-flex: 0;\n    -webkit-flex-grow: 0;\n        -ms-flex-positive: 0;\n            flex-grow: 0;\n    margin-left: 0; }\n\n.kbnSuggestionItem__callout {\n  font-family: \"Roboto Mono\", Consolas, Menlo, Courier, monospace;\n  background: #F5F7FA;\n  color: #000;\n  padding: 0 4px;\n  display: inline-block; }\n\n.kbnSuggestionItem--value .kbnSuggestionItem__text {\n  -webkit-flex-basis: 50%;\n      -ms-flex-preferred-size: 50%;\n          flex-basis: 50%;\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1; }\n\n.kbnSavedQueryManagement__popover {\n  max-width: 400px; }\n\n.kbnSavedQueryManagement__listWrapper {\n  max-height: 416px;\n  overflow-y: hidden; }\n\n.kbnSavedQueryManagement__pagination {\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  padding: 6px 12px 12px; }\n\n.kbnSavedQueryManagement__text {\n  padding: 12px 12px 6px 12px; }\n\n.kbnSavedQueryManagement__list {\n  scrollbar-width: thin;\n  -webkit-mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n          mask-image: linear-gradient(to bottom, rgba(255, 0, 0, 0.1) 0%, red 7.5px, red calc(100% - 7.5px), rgba(255, 0, 0, 0.1) 100%);\n  height: 100%;\n  overflow-y: auto;\n  max-height: inherit;\n  padding: 6px 4px !important; }\n  .kbnSavedQueryManagement__list::-webkit-scrollbar {\n    width: 16px;\n    height: 16px; }\n  .kbnSavedQueryManagement__list::-webkit-scrollbar-thumb {\n    background-color: rgba(105, 112, 125, 0.5);\n    border: 6px solid transparent;\n    background-clip: content-box; }\n  .kbnSavedQueryManagement__list::-webkit-scrollbar-corner, .kbnSavedQueryManagement__list::-webkit-scrollbar-track {\n    background-color: transparent; }\n\n.kbnSavedQueryListItem {\n  margin-top: 0;\n  color: #006BB4; }\n\n.kbnSavedQueryListItem-selected button {\n  font-weight: 700; }\n\n.kbnSavedQueryListItem__label {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n.kbnSavedQueryListItem__labelText {\n  max-width: 100%;\n  overflow: hidden !important;\n  text-overflow: ellipsis !important;\n  white-space: nowrap !important;\n  word-wrap: normal !important;\n  margin-right: 4px; }\n\n@media only screen and (max-width: 574px) {\n  .kbnQueryBar--withDatePicker > :first-child {\n    -webkit-box-ordinal-group: 2;\n    -webkit-order: 1;\n        -ms-flex-order: 1;\n            order: 1;\n    margin-top: -8px; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .kbnQueryBar--withDatePicker > :first-child {\n    -webkit-box-ordinal-group: 2;\n    -webkit-order: 1;\n        -ms-flex-order: 1;\n            order: 1;\n    margin-top: -8px; } }\n\n@media only screen and (min-width: 768px) and (max-width: 991px) {\n  .kbnQueryBar__datePickerWrapper {\n    max-width: 40vw;\n    -webkit-box-flex: 0 !important;\n    -webkit-flex-grow: 0 !important;\n        -ms-flex-positive: 0 !important;\n            flex-grow: 0 !important;\n    -webkit-flex-basis: auto !important;\n        -ms-flex-preferred-size: auto !important;\n            flex-basis: auto !important; } }\n\n@media only screen and (min-width: 992px) and (max-width: 1199px) {\n  .kbnQueryBar__datePickerWrapper {\n    max-width: 40vw;\n    -webkit-box-flex: 0 !important;\n    -webkit-flex-grow: 0 !important;\n        -ms-flex-positive: 0 !important;\n            flex-grow: 0 !important;\n    -webkit-flex-basis: auto !important;\n        -ms-flex-preferred-size: auto !important;\n            flex-basis: auto !important; } }\n\n@media only screen and (min-width: 1200px) {\n  .kbnQueryBar__datePickerWrapper {\n    max-width: 40vw;\n    -webkit-box-flex: 0 !important;\n    -webkit-flex-grow: 0 !important;\n        -ms-flex-positive: 0 !important;\n            flex-grow: 0 !important;\n    -webkit-flex-basis: auto !important;\n        -ms-flex-preferred-size: auto !important;\n            flex-basis: auto !important; } }\n\n.shardFailureModal {\n  min-height: 75vh;\n  width: 768px; }\n\n.shardFailureModal__desc {\n  max-width: 686px; }\n\n.shardFailureModal__descTitle {\n  width: 20% !important;\n  margin-top: 8px; }\n\n.shardFailureModal__descValue {\n  width: 80% !important;\n  margin-top: 8px; }\n\n.shardFailureModal__keyValueTitle {\n  padding-right: 8px; }\n\n@media only screen and (max-width: 574px) {\n  .shardFailureModal__keyValueTitle {\n    display: block;\n    width: 100%; }\n  .shardFailureModal__descTitle {\n    display: block;\n    width: 100% !important; }\n  .shardFailureModal__descValue {\n    display: block;\n    width: 100% !important; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .shardFailureModal__keyValueTitle {\n    display: block;\n    width: 100%; }\n  .shardFailureModal__descTitle {\n    display: block;\n    width: 100% !important; }\n  .shardFailureModal__descValue {\n    display: block;\n    width: 100% !important; } }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_QUERY_LANGUAGE=void 0;var DEFAULT_QUERY_LANGUAGE="kuery";exports.DEFAULT_QUERY_LANGUAGE=DEFAULT_QUERY_LANGUAGE},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _es_query=__webpack_require__(551);Object.keys(_es_query).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _es_query[key]}})}));var _filters=__webpack_require__(94);Object.keys(_filters).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _filters[key]}})}));var _kuery=__webpack_require__(281);Object.keys(_kuery).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _kuery[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"buildEsQuery",{enumerable:true,get:function get(){return _build_es_query.buildEsQuery}});Object.defineProperty(exports,"EsQueryConfig",{enumerable:true,get:function get(){return _build_es_query.EsQueryConfig}});Object.defineProperty(exports,"buildQueryFromFilters",{enumerable:true,get:function get(){return _from_filters.buildQueryFromFilters}});Object.defineProperty(exports,"luceneStringToDsl",{enumerable:true,get:function get(){return _lucene_string_to_dsl.luceneStringToDsl}});Object.defineProperty(exports,"decorateQuery",{enumerable:true,get:function get(){return _decorate_query.decorateQuery}});Object.defineProperty(exports,"getEsQueryConfig",{enumerable:true,get:function get(){return _get_es_query_config.getEsQueryConfig}});var _build_es_query=__webpack_require__(552);var _from_filters=__webpack_require__(292);var _lucene_string_to_dsl=__webpack_require__(294);var _decorate_query=__webpack_require__(293);var _get_es_query_config=__webpack_require__(583)},function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}Object.defineProperty(exports,"__esModule",{value:true});exports.buildEsQuery=buildEsQuery;var _lodash=__webpack_require__(49);var _from_kuery=__webpack_require__(553);var _from_filters=__webpack_require__(292);var _from_lucene=__webpack_require__(581);function buildEsQuery(indexPattern,queries,filters){var config=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{allowLeadingWildcards:false,queryStringOptions:{},ignoreFilterIfFieldNotInIndex:false};queries=Array.isArray(queries)?queries:[queries];filters=Array.isArray(filters)?filters:[filters];var validQueries=queries.filter((function(query){return(0,_lodash.has)(query,"query")}));var queriesByLanguage=(0,_lodash.groupBy)(validQueries,"language");var kueryQuery=(0,_from_kuery.buildQueryFromKuery)(indexPattern,queriesByLanguage.kuery,config.allowLeadingWildcards,config.dateFormatTZ);var luceneQuery=(0,_from_lucene.buildQueryFromLucene)(queriesByLanguage.lucene,config.queryStringOptions,config.dateFormatTZ);var filterQuery=(0,_from_filters.buildQueryFromFilters)(filters,indexPattern,config.ignoreFilterIfFieldNotInIndex);return{bool:{must:[].concat(_toConsumableArray(kueryQuery.must),_toConsumableArray(luceneQuery.must),_toConsumableArray(filterQuery.must)),filter:[].concat(_toConsumableArray(kueryQuery.filter),_toConsumableArray(luceneQuery.filter),_toConsumableArray(filterQuery.filter)),should:[].concat(_toConsumableArray(kueryQuery.should),_toConsumableArray(luceneQuery.should),_toConsumableArray(filterQuery.should)),must_not:[].concat(_toConsumableArray(kueryQuery.must_not),_toConsumableArray(luceneQuery.must_not),_toConsumableArray(filterQuery.must_not))}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildQueryFromKuery=buildQueryFromKuery;var _kuery=__webpack_require__(281);function buildQueryFromKuery(indexPattern){var queries=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var allowLeadingWildcards=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var dateFormatTZ=arguments.length>3?arguments[3]:undefined;var queryASTs=queries.map((function(query){return(0,_kuery.fromKueryExpression)(query.query,{allowLeadingWildcards:allowLeadingWildcards})}));return buildQuery(indexPattern,queryASTs,{dateFormatTZ:dateFormatTZ})}function buildQuery(indexPattern,queryASTs){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var compoundQueryAST=_kuery.nodeTypes.function.buildNode("and",queryASTs);var kueryQuery=(0,_kuery.toElasticsearchQuery)(compoundQueryAST,indexPattern,config);return Object.assign({must:[],filter:[],should:[],must_not:[]},kueryQuery.bool)}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNode=buildNode;exports.buildNodeWithArgumentNodes=buildNodeWithArgumentNodes;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=_interopRequireDefault(__webpack_require__(49));var _functions=__webpack_require__(555);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function buildNode(functionName){var kueryFunction=_functions.functions[functionName];if(_lodash.default.isUndefined(kueryFunction)){throw new Error('Unknown function "'.concat(functionName,'"'))}for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}return _objectSpread({type:"function",function:functionName},kueryFunction.buildNodeParams.apply(kueryFunction,args))}function buildNodeWithArgumentNodes(functionName,args){if(_lodash.default.isUndefined(_functions.functions[functionName])){throw new Error('Unknown function "'.concat(functionName,'"'))}return{type:"function",function:functionName,arguments:args}}function toElasticsearchQuery(node,indexPattern,config,context){var kueryFunction=_functions.functions[node.function];return kueryFunction.toElasticsearchQuery(node,indexPattern,config,context)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.functions=void 0;var is=_interopRequireWildcard(__webpack_require__(556));var and=_interopRequireWildcard(__webpack_require__(567));var or=_interopRequireWildcard(__webpack_require__(568));var not=_interopRequireWildcard(__webpack_require__(569));var range=_interopRequireWildcard(__webpack_require__(570));var exists=_interopRequireWildcard(__webpack_require__(571));var geoBoundingBox=_interopRequireWildcard(__webpack_require__(572));var geoPolygon=_interopRequireWildcard(__webpack_require__(573));var nested=_interopRequireWildcard(__webpack_require__(574));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var functions={is:is,and:and,or:or,not:not,range:range,exists:exists,geoBoundingBox:geoBoundingBox,geoPolygon:geoPolygon,nested:nested};exports.functions=functions},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=__webpack_require__(49);var _filters=__webpack_require__(94);var _get_fields=__webpack_require__(212);var _utils=__webpack_require__(214);var _get_full_field_name_node=__webpack_require__(291);var ast=_interopRequireWildcard(__webpack_require__(98));var literal=_interopRequireWildcard(__webpack_require__(145));var wildcard=_interopRequireWildcard(__webpack_require__(213));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(fieldName,value){var isPhrase=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if((0,_lodash.isUndefined)(fieldName)){throw new Error("fieldName is a required argument")}if((0,_lodash.isUndefined)(value)){throw new Error("value is a required argument")}var fieldNode=typeof fieldName==="string"?ast.fromLiteralExpression(fieldName):literal.buildNode(fieldName);var valueNode=typeof value==="string"?ast.fromLiteralExpression(value):literal.buildNode(value);var isPhraseNode=literal.buildNode(isPhrase);return{arguments:[fieldNode,valueNode,isPhraseNode]}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _node$arguments=_slicedToArray(node.arguments,3),fieldNameArg=_node$arguments[0],valueArg=_node$arguments[1],isPhraseArg=_node$arguments[2];var fullFieldNameArg=(0,_get_full_field_name_node.getFullFieldNameNode)(fieldNameArg,indexPattern,(context===null||context===void 0?void 0:context.nested)?context.nested.path:undefined);var fieldName=ast.toElasticsearchQuery(fullFieldNameArg);var value=!(0,_lodash.isUndefined)(valueArg)?ast.toElasticsearchQuery(valueArg):valueArg;var type=isPhraseArg.value?"phrase":"best_fields";if(fullFieldNameArg.value===null){if(valueArg.type==="wildcard"){return{query_string:{query:wildcard.toQueryStringQuery(valueArg)}}}return{multi_match:{type:type,query:value,lenient:true}}}var fields=indexPattern?(0,_get_fields.getFields)(fullFieldNameArg,indexPattern):[];if(fields&&fields.length===0){fields.push({name:ast.toElasticsearchQuery(fullFieldNameArg),scripted:false,type:""})}var isExistsQuery=valueArg.type==="wildcard"&&value==="*";var isAllFieldsQuery=fullFieldNameArg.type==="wildcard"&&fieldName==="*"||fields&&indexPattern&&fields.length===indexPattern.fields.length;var isMatchAllQuery=isExistsQuery&&isAllFieldsQuery;if(isMatchAllQuery){return{match_all:{}}}var queries=fields.reduce((function(accumulator,field){var wrapWithNestedQuery=function wrapWithNestedQuery(query){if(!(fullFieldNameArg.type==="wildcard")||!(0,_lodash.get)(field,"subType.nested")||(context===null||context===void 0?void 0:context.nested)){return query}else{return{nested:{path:field.subType.nested.path,query:query,score_mode:"none"}}}};if(field.scripted){if(!isExistsQuery){return[].concat(_toConsumableArray(accumulator),[{script:_objectSpread({},(0,_filters.getPhraseScript)(field,value))}])}}else if(isExistsQuery){return[].concat(_toConsumableArray(accumulator),[wrapWithNestedQuery({exists:{field:field.name}})])}else if(valueArg.type==="wildcard"){return[].concat(_toConsumableArray(accumulator),[wrapWithNestedQuery({query_string:{fields:[field.name],query:wildcard.toQueryStringQuery(valueArg)}})])}else if(field.type==="date"){var timeZoneParam=config.dateFormatTZ?{time_zone:(0,_utils.getTimeZoneFromSettings)(config.dateFormatTZ)}:{};return[].concat(_toConsumableArray(accumulator),[wrapWithNestedQuery({range:_defineProperty({},field.name,_objectSpread({gte:value,lte:value},timeZoneParam))})])}else{var queryType=type==="phrase"?"match_phrase":"match";return[].concat(_toConsumableArray(accumulator),[wrapWithNestedQuery(_defineProperty({},queryType,_defineProperty({},field.name,value)))])}}),[]);return{bool:{should:queries||[],minimum_should_match:1}}}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.buildFilter=buildFilter;exports.buildCustomFilter=buildCustomFilter;var _=__webpack_require__(94);function buildFilter(indexPattern,field,type,negate,disabled,params,alias,store){var filter=buildBaseFilter(indexPattern,field,type,params);filter.meta.alias=alias;filter.meta.negate=negate;filter.meta.disabled=disabled;filter.$state={store:store};return filter}function buildCustomFilter(indexPatternString,queryDsl,disabled,negate,alias,store){var meta={index:indexPatternString,type:_.FILTERS.CUSTOM,disabled:disabled,negate:negate,alias:alias};var filter=_objectSpread({},queryDsl,{meta:meta});filter.$state={store:store};return filter}function buildBaseFilter(indexPattern,field,type,params){switch(type){case"phrase":return(0,_.buildPhraseFilter)(field,params,indexPattern);case"phrases":return(0,_.buildPhrasesFilter)(field,params,indexPattern);case"range":var newParams={gte:params.from,lt:params.to};return(0,_.buildRangeFilter)(field,newParams,indexPattern);case"exists":return(0,_.buildExistsFilter)(field,indexPattern);default:throw new Error("Unknown filter type: ".concat(type))}}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDisplayValueFromFilter=getDisplayValueFromFilter;var _lodash=__webpack_require__(49);var _i18n=__webpack_require__(1);var _get_index_pattern_from_filter=__webpack_require__(286);function getValueFormatter(indexPattern,key){if(!indexPattern||!key)return;var format=(0,_lodash.get)(indexPattern,["fields","byName",key,"format"]);if(!format&&indexPattern.fields.getByName){var field=indexPattern.fields.getByName(key);if(!field){throw new Error(_i18n.i18n.translate("data.filter.filterBar.fieldNotFound",{defaultMessage:"Field {key} not found in index pattern {indexPattern}",values:{key:key,indexPattern:indexPattern.title}}))}format=field.format}return format}function getDisplayValueFromFilter(filter,indexPatterns){var indexPattern=(0,_get_index_pattern_from_filter.getIndexPatternFromFilter)(filter,indexPatterns);if(typeof filter.meta.value==="function"){var valueFormatter=getValueFormatter(indexPattern,filter.meta.key);return filter.meta.value(valueFormatter)}else{return filter.meta.value||""}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFilterField=void 0;var _exists_filter=__webpack_require__(283);var _geo_bounding_box_filter=__webpack_require__(284);var _geo_polygon_filter=__webpack_require__(285);var _phrase_filter=__webpack_require__(211);var _phrases_filter=__webpack_require__(287);var _range_filter=__webpack_require__(288);var _missing_filter=__webpack_require__(289);var getFilterField=function getFilterField(filter){if((0,_exists_filter.isExistsFilter)(filter)){return(0,_exists_filter.getExistsFilterField)(filter)}if((0,_geo_bounding_box_filter.isGeoBoundingBoxFilter)(filter)){return(0,_geo_bounding_box_filter.getGeoBoundingBoxFilterField)(filter)}if((0,_geo_polygon_filter.isGeoPolygonFilter)(filter)){return(0,_geo_polygon_filter.getGeoPolygonFilterField)(filter)}if((0,_phrase_filter.isPhraseFilter)(filter)){return(0,_phrase_filter.getPhraseFilterField)(filter)}if((0,_phrases_filter.isPhrasesFilter)(filter)){return(0,_phrases_filter.getPhrasesFilterField)(filter)}if((0,_range_filter.isRangeFilter)(filter)){return(0,_range_filter.getRangeFilterField)(filter)}if((0,_missing_filter.isMissingFilter)(filter)){return(0,_missing_filter.getMissingFilterField)(filter)}return};exports.getFilterField=getFilterField},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFilterParams=getFilterParams;var _=__webpack_require__(94);function getFilterParams(filter){switch(filter.meta.type){case _.FILTERS.PHRASE:return filter.meta.params.query;case _.FILTERS.PHRASES:return filter.meta.params;case _.FILTERS.RANGE:return{from:filter.meta.params.gte,to:filter.meta.params.lt}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isMatchAllFilter=void 0;var isMatchAllFilter=function isMatchAllFilter(filter){return filter&&filter.match_all};exports.isMatchAllFilter=isMatchAllFilter},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.unpinFilter=exports.pinFilter=exports.disableFilter=exports.enableFilter=exports.toggleFilterPinned=exports.toggleFilterNegated=exports.toggleFilterDisabled=exports.isFilterPinned=exports.buildEmptyFilter=exports.FilterStateStore=void 0;var FilterStateStore;exports.FilterStateStore=FilterStateStore;(function(FilterStateStore){FilterStateStore["APP_STATE"]="appState";FilterStateStore["GLOBAL_STATE"]="globalState"})(FilterStateStore||(exports.FilterStateStore=FilterStateStore={}));var buildEmptyFilter=function buildEmptyFilter(isPinned,index){var meta={disabled:false,negate:false,alias:null,index:index};var $state={store:isPinned?FilterStateStore.GLOBAL_STATE:FilterStateStore.APP_STATE};return{meta:meta,$state:$state}};exports.buildEmptyFilter=buildEmptyFilter;var isFilterPinned=function isFilterPinned(filter){return filter.$state&&filter.$state.store===FilterStateStore.GLOBAL_STATE};exports.isFilterPinned=isFilterPinned;var toggleFilterDisabled=function toggleFilterDisabled(filter){var disabled=!filter.meta.disabled;var meta=_objectSpread({},filter.meta,{disabled:disabled});return _objectSpread({},filter,{meta:meta})};exports.toggleFilterDisabled=toggleFilterDisabled;var toggleFilterNegated=function toggleFilterNegated(filter){var negate=!filter.meta.negate;var meta=_objectSpread({},filter.meta,{negate:negate});return _objectSpread({},filter,{meta:meta})};exports.toggleFilterNegated=toggleFilterNegated;var toggleFilterPinned=function toggleFilterPinned(filter){var store=isFilterPinned(filter)?FilterStateStore.APP_STATE:FilterStateStore.GLOBAL_STATE;var $state=_objectSpread({},filter.$state,{store:store});return _objectSpread({},filter,{$state:$state})};exports.toggleFilterPinned=toggleFilterPinned;var enableFilter=function enableFilter(filter){return!filter.meta.disabled?filter:toggleFilterDisabled(filter)};exports.enableFilter=enableFilter;var disableFilter=function disableFilter(filter){return filter.meta.disabled?filter:toggleFilterDisabled(filter)};exports.disableFilter=disableFilter;var pinFilter=function pinFilter(filter){return isFilterPinned(filter)?filter:toggleFilterPinned(filter)};exports.pinFilter=pinFilter;var unpinFilter=function unpinFilter(filter){return!isFilterPinned(filter)?filter:toggleFilterPinned(filter)};exports.unpinFilter=unpinFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildQueryFilter=exports.isQueryStringFilter=void 0;var isQueryStringFilter=function isQueryStringFilter(filter){return filter&&filter.query&&filter.query.query_string};exports.isQueryStringFilter=isQueryStringFilter;var buildQueryFilter=function buildQueryFilter(query,index,alias){return{query:query,meta:{index:index,alias:alias}}};exports.buildQueryFilter=buildQueryFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FILTERS=void 0;var FILTERS;exports.FILTERS=FILTERS;(function(FILTERS){FILTERS["CUSTOM"]="custom";FILTERS["PHRASES"]="phrases";FILTERS["PHRASE"]="phrase";FILTERS["EXISTS"]="exists";FILTERS["MATCH_ALL"]="match_all";FILTERS["MISSING"]="missing";FILTERS["QUERY_STRING"]="query_string";FILTERS["RANGE"]="range";FILTERS["GEO_BOUNDING_BOX"]="geo_bounding_box";FILTERS["GEO_POLYGON"]="geo_polygon";FILTERS["SPATIAL_FILTER"]="spatial_filter"})(FILTERS||(exports.FILTERS=FILTERS={}))},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}module.exports=function(){"use strict";function peg$subclass(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor}function peg$SyntaxError(message,expected,found,location){this.message=message;this.expected=expected;this.found=found;this.location=location;this.name="SyntaxError";if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,peg$SyntaxError)}}peg$subclass(peg$SyntaxError,Error);function peg$parse(input){var options=arguments.length>1?arguments[1]:{},parser=this,peg$FAILED={},peg$startRuleFunctions={start:peg$parsestart,Literal:peg$parseLiteral},peg$startRuleFunction=peg$parsestart,peg$c0=function peg$c0(query,trailing){if(trailing.type==="cursor"){return _objectSpread({},trailing,{suggestionTypes:["conjunction"]})}if(query!==null)return query;return nodeTypes.function.buildNode("is","*","*")},peg$c1=function peg$c1(){return errorOnLuceneSyntax},peg$c2=function peg$c2(left,right){var cursor=[left,right].find((function(node){return node.type==="cursor"}));if(cursor)return cursor;return buildFunctionNode("or",[left,right])},peg$c3=function peg$c3(left,right){var cursor=[left,right].find((function(node){return node.type==="cursor"}));if(cursor)return cursor;return buildFunctionNode("and",[left,right])},peg$c4=function peg$c4(query){if(query.type==="cursor")return query;return buildFunctionNode("not",[query])},peg$c5="(",peg$c6={type:"literal",value:"(",description:'"("'},peg$c7=")",peg$c8={type:"literal",value:")",description:'")"'},peg$c9=function peg$c9(query,trailing){if(trailing.type==="cursor"){return _objectSpread({},trailing,{suggestionTypes:["conjunction"]})}return query},peg$c10=":",peg$c11={type:"literal",value:":",description:'":"'},peg$c12="{",peg$c13={type:"literal",value:"{",description:'"{"'},peg$c14="}",peg$c15={type:"literal",value:"}",description:'"}"'},peg$c16=function peg$c16(field,query,trailing){if(query.type==="cursor"){return _objectSpread({},query,{nestedPath:query.nestedPath?"".concat(field.value,".").concat(query.nestedPath):field.value})}if(trailing.type==="cursor"){return _objectSpread({},trailing,{suggestionTypes:["conjunction"]})}return buildFunctionNode("nested",[field,query])},peg$c17={type:"other",description:"fieldName"},peg$c18=function peg$c18(field,operator,value){if(value.type==="cursor"){return _objectSpread({},value,{suggestionTypes:["conjunction"]})}var range=buildNamedArgNode(operator,value);return buildFunctionNode("range",[field,range])},peg$c19=function peg$c19(field,partial){if(partial.type==="cursor"){return _objectSpread({},partial,{fieldName:field.value,suggestionTypes:["value","conjunction"]})}return partial(field)},peg$c20=function peg$c20(partial){if(partial.type==="cursor"){var fieldName="".concat(partial.prefix).concat(partial.suffix).trim();return _objectSpread({},partial,{fieldName:fieldName,suggestionTypes:["field","operator","conjunction"]})}var field=buildLiteralNode(null);return partial(field)},peg$c21=function peg$c21(partial,trailing){if(trailing.type==="cursor"){return _objectSpread({},trailing,{suggestionTypes:["conjunction"]})}return partial},peg$c22=function peg$c22(partialLeft,partialRight){var cursor=[partialLeft,partialRight].find((function(node){return node.type==="cursor"}));if(cursor){return _objectSpread({},cursor,{suggestionTypes:["value"]})}return function(field){return buildFunctionNode("or",[partialLeft(field),partialRight(field)])}},peg$c23=function peg$c23(partialLeft,partialRight){var cursor=[partialLeft,partialRight].find((function(node){return node.type==="cursor"}));if(cursor){return _objectSpread({},cursor,{suggestionTypes:["value"]})}return function(field){return buildFunctionNode("and",[partialLeft(field),partialRight(field)])}},peg$c24=function peg$c24(partial){if(partial.type==="cursor"){return _objectSpread({},list,{suggestionTypes:["value"]})}return function(field){return buildFunctionNode("not",[partial(field)])}},peg$c25={type:"other",description:"value"},peg$c26=function peg$c26(value){if(value.type==="cursor")return value;var isPhrase=buildLiteralNode(true);return function(field){return buildFunctionNode("is",[field,value,isPhrase])}},peg$c27=function peg$c27(value){if(value.type==="cursor")return value;if(!allowLeadingWildcards&&value.type==="wildcard"&&nodeTypes.wildcard.hasLeadingWildcard(value)){error("Leading wildcards are disabled. See query:allowLeadingWildcards in Advanced Settings.")}var isPhrase=buildLiteralNode(false);return function(field){return buildFunctionNode("is",[field,value,isPhrase])}},peg$c28={type:"other",description:"OR"},peg$c29="or",peg$c30={type:"literal",value:"or",description:'"or"'},peg$c31={type:"other",description:"AND"},peg$c32="and",peg$c33={type:"literal",value:"and",description:'"and"'},peg$c34={type:"other",description:"NOT"},peg$c35="not",peg$c36={type:"literal",value:"not",description:'"not"'},peg$c37={type:"other",description:"literal"},peg$c38='"',peg$c39={type:"literal",value:'"',description:'"\\""'},peg$c40=function peg$c40(prefix,cursor,suffix){var _location=location(),start=_location.start,end=_location.end;return{type:"cursor",start:start.offset,end:end.offset-cursor.length,prefix:prefix.join(""),suffix:suffix.join(""),text:text().replace(cursor,"")}},peg$c41=function peg$c41(chars){return buildLiteralNode(chars.join(""))},peg$c42="\\",peg$c43={type:"literal",value:"\\",description:'"\\\\"'},peg$c44=/^[\\"]/,peg$c45={type:"class",value:'[\\\\"]',description:'[\\\\"]'},peg$c46=function peg$c46(char){return char},peg$c47=/^[^"]/,peg$c48={type:"class",value:'[^"]',description:'[^"]'},peg$c49=function peg$c49(chars){var sequence=chars.join("").trim();if(sequence==="null")return buildLiteralNode(null);if(sequence==="true")return buildLiteralNode(true);if(sequence==="false")return buildLiteralNode(false);if(chars.includes(wildcardSymbol))return buildWildcardNode(sequence);var number=Number(sequence);var value=isNaN(number)?sequence:number;return buildLiteralNode(value)},peg$c50={type:"any",description:"any character"},peg$c51="*",peg$c52={type:"literal",value:"*",description:'"*"'},peg$c53=function peg$c53(){return wildcardSymbol},peg$c54="\\t",peg$c55={type:"literal",value:"\\t",description:'"\\\\t"'},peg$c56=function peg$c56(){return"\t"},peg$c57="\\r",peg$c58={type:"literal",value:"\\r",description:'"\\\\r"'},peg$c59=function peg$c59(){return"\r"},peg$c60="\\n",peg$c61={type:"literal",value:"\\n",description:'"\\\\n"'},peg$c62=function peg$c62(){return"\n"},peg$c63=function peg$c63(keyword){return keyword},peg$c64=/^[\\():<>"*{}]/,peg$c65={type:"class",value:'[\\\\():<>"*{}]',description:'[\\\\():<>"*{}]'},peg$c66="<=",peg$c67={type:"literal",value:"<=",description:'"<="'},peg$c68=function peg$c68(){return"lte"},peg$c69=">=",peg$c70={type:"literal",value:">=",description:'">="'},peg$c71=function peg$c71(){return"gte"},peg$c72="<",peg$c73={type:"literal",value:"<",description:'"<"'},peg$c74=function peg$c74(){return"lt"},peg$c75=">",peg$c76={type:"literal",value:">",description:'">"'},peg$c77=function peg$c77(){return"gt"},peg$c78={type:"other",description:"whitespace"},peg$c79=/^[ \t\r\n]/,peg$c80={type:"class",value:"[\\ \\t\\r\\n]",description:"[\\ \\t\\r\\n]"},peg$c81=function peg$c81(){return parseCursor},peg$c82="@kuery-cursor@",peg$c83={type:"literal",value:"@kuery-cursor@",description:'"@kuery-cursor@"'},peg$c84=function peg$c84(){return cursorSymbol},peg$c85="||",peg$c86={type:"literal",value:"||",description:'"||"'},peg$c87=function peg$c87(){error("LuceneOr")},peg$c88="&&",peg$c89={type:"literal",value:"&&",description:'"&&"'},peg$c90=function peg$c90(){error("LuceneAnd")},peg$c91="+",peg$c92={type:"literal",value:"+",description:'"+"'},peg$c93="-",peg$c94={type:"literal",value:"-",description:'"-"'},peg$c95=function peg$c95(){error("LuceneNot")},peg$c96="!",peg$c97={type:"literal",value:"!",description:'"!"'},peg$c98="_exists_",peg$c99={type:"literal",value:"_exists_",description:'"_exists_"'},peg$c100=function peg$c100(){error("LuceneExists")},peg$c101=function peg$c101(){error("LuceneRange")},peg$c102="?",peg$c103={type:"literal",value:"?",description:'"?"'},peg$c104=function peg$c104(){error("LuceneWildcard")},peg$c105="/",peg$c106={type:"literal",value:"/",description:'"/"'},peg$c107=/^[^\/]/,peg$c108={type:"class",value:"[^/]",description:"[^/]"},peg$c109=function peg$c109(){error("LuceneRegex")},peg$c110="~",peg$c111={type:"literal",value:"~",description:'"~"'},peg$c112=/^[0-9]/,peg$c113={type:"class",value:"[0-9]",description:"[0-9]"},peg$c114=function peg$c114(){error("LuceneFuzzy")},peg$c115=function peg$c115(){error("LuceneProximity")},peg$c116="^",peg$c117={type:"literal",value:"^",description:'"^"'},peg$c118=function peg$c118(){error("LuceneBoost")},peg$c119=function peg$c119(){return char},peg$c120="=",peg$c121={type:"literal",value:"=",description:'"="'},peg$c122="[",peg$c123={type:"literal",value:"[",description:'"["'},peg$c124="]",peg$c125={type:"literal",value:"]",description:'"]"'},peg$c126="TO",peg$c127={type:"literal",value:"TO",description:'"TO"'},peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1,seenCR:false}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0,peg$result;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions)){throw new Error("Can't start parsing from rule \""+options.startRule+'".')}peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function text(){return input.substring(peg$savedPos,peg$currPos)}function location(){return peg$computeLocation(peg$savedPos,peg$currPos)}function expected(description){throw peg$buildException(null,[{type:"other",description:description}],input.substring(peg$savedPos,peg$currPos),peg$computeLocation(peg$savedPos,peg$currPos))}function error(message){throw peg$buildException(message,null,input.substring(peg$savedPos,peg$currPos),peg$computeLocation(peg$savedPos,peg$currPos))}function peg$computePosDetails(pos){var details=peg$posDetailsCache[pos],p,ch;if(details){return details}else{p=pos-1;while(!peg$posDetailsCache[p]){p--}details=peg$posDetailsCache[p];details={line:details.line,column:details.column,seenCR:details.seenCR};while(p<pos){ch=input.charAt(p);if(ch==="\n"){if(!details.seenCR){details.line++}details.column=1;details.seenCR=false}else if(ch==="\r"||ch==="\u2028"||ch==="\u2029"){details.line++;details.column=1;details.seenCR=true}else{details.column++;details.seenCR=false}p++}peg$posDetailsCache[pos]=details;return details}}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){if(peg$currPos<peg$maxFailPos){return}if(peg$currPos>peg$maxFailPos){peg$maxFailPos=peg$currPos;peg$maxFailExpected=[]}peg$maxFailExpected.push(expected)}function peg$buildException(message,expected,found,location){function cleanupExpected(expected){var i=1;expected.sort((function(a,b){if(a.description<b.description){return-1}else if(a.description>b.description){return 1}else{return 0}}));while(i<expected.length){if(expected[i-1]===expected[i]){expected.splice(i,1)}else{i++}}}function buildMessage(expected,found){function stringEscape(s){function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(ch){return"\\x0"+hex(ch)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(ch){return"\\x"+hex(ch)})).replace(/[\u0100-\u0FFF]/g,(function(ch){return"\\u0"+hex(ch)})).replace(/[\u1000-\uFFFF]/g,(function(ch){return"\\u"+hex(ch)}))}var expectedDescs=new Array(expected.length),expectedDesc,foundDesc,i;for(i=0;i<expected.length;i++){expectedDescs[i]=expected[i].description}expectedDesc=expected.length>1?expectedDescs.slice(0,-1).join(", ")+" or "+expectedDescs[expected.length-1]:expectedDescs[0];foundDesc=found?'"'+stringEscape(found)+'"':"end of input";return"Expected "+expectedDesc+" but "+foundDesc+" found."}if(expected!==null){cleanupExpected(expected)}return new peg$SyntaxError(message!==null?message:buildMessage(expected,found),expected,found,location)}function peg$parsestart(){var s0,s1,s2,s3;s0=peg$currPos;s1=[];s2=peg$parseSpace();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}if(s1!==peg$FAILED){s2=peg$parseOrQuery();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){s3=peg$parseOptionalSpace();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c0(s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseOrQuery(){var s0,s1,s2,s3;s0=peg$currPos;peg$savedPos=peg$currPos;s1=peg$c1();if(s1){s1=void 0}else{s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$parseLuceneQuery();if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseAndQuery();if(s1!==peg$FAILED){s2=peg$parseOr();if(s2!==peg$FAILED){s3=peg$parseOrQuery();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c2(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseAndQuery()}}return s0}function peg$parseAndQuery(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseNotQuery();if(s1!==peg$FAILED){s2=peg$parseAnd();if(s2!==peg$FAILED){s3=peg$parseAndQuery();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c3(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseNotQuery()}return s0}function peg$parseNotQuery(){var s0,s1,s2;s0=peg$currPos;s1=peg$parseNot();if(s1!==peg$FAILED){s2=peg$parseSubQuery();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c4(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseSubQuery()}return s0}function peg$parseSubQuery(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===40){s1=peg$c5;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c6)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){s3=peg$parseOrQuery();if(s3!==peg$FAILED){s4=peg$parseOptionalSpace();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s5=peg$c7;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c8)}}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c9(s3,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseNestedQuery()}return s0}function peg$parseNestedQuery(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9;s0=peg$currPos;s1=peg$parseField();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s3=peg$c10;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s3!==peg$FAILED){s4=[];s5=peg$parseSpace();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseSpace()}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===123){s5=peg$c12;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}if(s5!==peg$FAILED){s6=[];s7=peg$parseSpace();while(s7!==peg$FAILED){s6.push(s7);s7=peg$parseSpace()}if(s6!==peg$FAILED){s7=peg$parseOrQuery();if(s7!==peg$FAILED){s8=peg$parseOptionalSpace();if(s8!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s9=peg$c14;peg$currPos++}else{s9=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c15)}}if(s9!==peg$FAILED){peg$savedPos=s0;s1=peg$c16(s1,s7,s8);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseExpression()}return s0}function peg$parseExpression(){var s0;s0=peg$parseFieldRangeExpression();if(s0===peg$FAILED){s0=peg$parseFieldValueExpression();if(s0===peg$FAILED){s0=peg$parseValueExpression()}}return s0}function peg$parseField(){var s0,s1;peg$silentFails++;s0=peg$parseLiteral();peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c17)}}return s0}function peg$parseFieldRangeExpression(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseField();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){s3=peg$parseRangeOperator();if(s3!==peg$FAILED){s4=[];s5=peg$parseSpace();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseSpace()}if(s4!==peg$FAILED){s5=peg$parseLiteral();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c18(s1,s3,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseFieldValueExpression(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseField();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s3=peg$c10;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s3!==peg$FAILED){s4=[];s5=peg$parseSpace();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseSpace()}if(s4!==peg$FAILED){s5=peg$parseListOfValues();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c19(s1,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseValueExpression(){var s0,s1;s0=peg$currPos;s1=peg$parseValue();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c20(s1)}s0=s1;return s0}function peg$parseListOfValues(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===40){s1=peg$c5;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c6)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){s3=peg$parseOrListOfValues();if(s3!==peg$FAILED){s4=peg$parseOptionalSpace();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s5=peg$c7;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c8)}}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c21(s3,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseValue()}return s0}function peg$parseOrListOfValues(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseAndListOfValues();if(s1!==peg$FAILED){s2=peg$parseOr();if(s2!==peg$FAILED){s3=peg$parseOrListOfValues();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c22(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseAndListOfValues()}return s0}function peg$parseAndListOfValues(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseNotListOfValues();if(s1!==peg$FAILED){s2=peg$parseAnd();if(s2!==peg$FAILED){s3=peg$parseAndListOfValues();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c23(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseNotListOfValues()}return s0}function peg$parseNotListOfValues(){var s0,s1,s2;s0=peg$currPos;s1=peg$parseNot();if(s1!==peg$FAILED){s2=peg$parseListOfValues();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c24(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$parseListOfValues()}return s0}function peg$parseValue(){var s0,s1;peg$silentFails++;s0=peg$currPos;s1=peg$parseQuotedString();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c26(s1)}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseUnquotedLiteral();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c27(s1)}s0=s1}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c25)}}return s0}function peg$parseOr(){var s0,s1,s2,s3,s4;peg$silentFails++;s0=peg$currPos;s1=[];s2=peg$parseSpace();if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}}else{s1=peg$FAILED}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2).toLowerCase()===peg$c29){s2=input.substr(peg$currPos,2);peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c30)}}if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();if(s4!==peg$FAILED){while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}}else{s3=peg$FAILED}if(s3!==peg$FAILED){s1=[s1,s2,s3];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;peg$savedPos=peg$currPos;s1=peg$c1();if(s1){s1=void 0}else{s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$parseLuceneOr();if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c28)}}return s0}function peg$parseAnd(){var s0,s1,s2,s3,s4;peg$silentFails++;s0=peg$currPos;s1=[];s2=peg$parseSpace();if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}}else{s1=peg$FAILED}if(s1!==peg$FAILED){if(input.substr(peg$currPos,3).toLowerCase()===peg$c32){s2=input.substr(peg$currPos,3);peg$currPos+=3}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c33)}}if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();if(s4!==peg$FAILED){while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}}else{s3=peg$FAILED}if(s3!==peg$FAILED){s1=[s1,s2,s3];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;peg$savedPos=peg$currPos;s1=peg$c1();if(s1){s1=void 0}else{s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$parseLuceneAnd();if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c31)}}return s0}function peg$parseNot(){var s0,s1,s2,s3;peg$silentFails++;s0=peg$currPos;if(input.substr(peg$currPos,3).toLowerCase()===peg$c35){s1=input.substr(peg$currPos,3);peg$currPos+=3}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c36)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();if(s3!==peg$FAILED){while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}}else{s2=peg$FAILED}if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;peg$savedPos=peg$currPos;s1=peg$c1();if(s1){s1=void 0}else{s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$parseLuceneNot();if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c34)}}return s0}function peg$parseLiteral(){var s0,s1;peg$silentFails++;s0=peg$parseQuotedString();if(s0===peg$FAILED){s0=peg$parseUnquotedLiteral()}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c37)}}return s0}function peg$parseQuotedString(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===34){s1=peg$c38;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c39)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseQuotedCharacter();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseQuotedCharacter()}if(s2!==peg$FAILED){s3=peg$parseCursor();if(s3!==peg$FAILED){s4=[];s5=peg$parseQuotedCharacter();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseQuotedCharacter()}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===34){s5=peg$c38;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c39)}}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c40(s2,s3,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===34){s1=peg$c38;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c39)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseQuotedCharacter();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseQuotedCharacter()}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===34){s3=peg$c38;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c39)}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c41(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}return s0}function peg$parseQuotedCharacter(){var s0,s1,s2;s0=peg$parseEscapedWhitespace();if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s1=peg$c42;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}if(s1!==peg$FAILED){if(peg$c44.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c45)}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c46(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$currPos;peg$silentFails++;s2=peg$parseCursor();peg$silentFails--;if(s2===peg$FAILED){s1=void 0}else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){if(peg$c47.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c48)}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c46(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}}return s0}function peg$parseUnquotedLiteral(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseUnquotedCharacter();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseUnquotedCharacter()}if(s1!==peg$FAILED){s2=peg$parseCursor();if(s2!==peg$FAILED){s3=[];s4=peg$parseUnquotedCharacter();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseUnquotedCharacter()}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c40(s1,s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=[];s2=peg$parseUnquotedCharacter();if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseUnquotedCharacter()}}else{s1=peg$FAILED}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c49(s1)}s0=s1}return s0}function peg$parseUnquotedCharacter(){var s0,s1,s2,s3,s4;s0=peg$parseEscapedWhitespace();if(s0===peg$FAILED){s0=peg$parseEscapedSpecialCharacter();if(s0===peg$FAILED){s0=peg$parseEscapedKeyword();if(s0===peg$FAILED){s0=peg$parseWildcard();if(s0===peg$FAILED){s0=peg$currPos;s1=peg$currPos;peg$silentFails++;s2=peg$parseSpecialCharacter();peg$silentFails--;if(s2===peg$FAILED){s1=void 0}else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$currPos;peg$silentFails++;s3=peg$parseKeyword();peg$silentFails--;if(s3===peg$FAILED){s2=void 0}else{peg$currPos=s2;s2=peg$FAILED}if(s2!==peg$FAILED){s3=peg$currPos;peg$silentFails++;s4=peg$parseCursor();peg$silentFails--;if(s4===peg$FAILED){s3=void 0}else{peg$currPos=s3;s3=peg$FAILED}if(s3!==peg$FAILED){if(input.length>peg$currPos){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c50)}}if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c46(s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}}}}return s0}function peg$parseWildcard(){var s0,s1;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===42){s1=peg$c51;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c52)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c53()}s0=s1;return s0}function peg$parseOptionalSpace(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseSpace();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}if(s1!==peg$FAILED){s2=peg$parseCursor();if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c40(s1,s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=[];s1=peg$parseSpace();while(s1!==peg$FAILED){s0.push(s1);s1=peg$parseSpace()}}return s0}function peg$parseEscapedWhitespace(){var s0,s1;s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c54){s1=peg$c54;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c55)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c56()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c57){s1=peg$c57;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c58)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c59()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c60){s1=peg$c60;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c61)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c62()}s0=s1}}return s0}function peg$parseEscapedSpecialCharacter(){var s0,s1,s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s1=peg$c42;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}if(s1!==peg$FAILED){s2=peg$parseSpecialCharacter();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c46(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseEscapedKeyword(){var s0,s1,s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s1=peg$c42;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2).toLowerCase()===peg$c29){s2=input.substr(peg$currPos,2);peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c30)}}if(s2===peg$FAILED){if(input.substr(peg$currPos,3).toLowerCase()===peg$c32){s2=input.substr(peg$currPos,3);peg$currPos+=3}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c33)}}if(s2===peg$FAILED){if(input.substr(peg$currPos,3).toLowerCase()===peg$c35){s2=input.substr(peg$currPos,3);peg$currPos+=3}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c36)}}}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c63(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseKeyword(){var s0;s0=peg$parseOr();if(s0===peg$FAILED){s0=peg$parseAnd();if(s0===peg$FAILED){s0=peg$parseNot()}}return s0}function peg$parseSpecialCharacter(){var s0;if(peg$c64.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c65)}}return s0}function peg$parseRangeOperator(){var s0,s1;s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c66){s1=peg$c66;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c67)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c68()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c69){s1=peg$c69;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c70)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c71()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===60){s1=peg$c72;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c73)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c74()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===62){s1=peg$c75;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c76)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c77()}s0=s1}}}return s0}function peg$parseSpace(){var s0,s1;peg$silentFails++;if(peg$c79.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c80)}}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c78)}}return s0}function peg$parseCursor(){var s0,s1,s2;s0=peg$currPos;peg$savedPos=peg$currPos;s1=peg$c81();if(s1){s1=void 0}else{s1=peg$FAILED}if(s1!==peg$FAILED){if(input.substr(peg$currPos,14)===peg$c82){s2=peg$c82;peg$currPos+=14}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c83)}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c84();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneOr(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseSpace();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c85){s2=peg$c85;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c86)}}if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c87();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneAnd(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseSpace();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c88){s2=peg$c88;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c89)}}if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c90();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===43){s1=peg$c91;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c92)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c90()}s0=s1}return s0}function peg$parseLuceneNot(){var s0,s1;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===45){s1=peg$c93;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c94)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c95()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===33){s1=peg$c96;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c97)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c95()}s0=s1}return s0}function peg$parseLuceneQuery(){var s0;s0=peg$parseLuceneFieldQuery();if(s0===peg$FAILED){s0=peg$parseLuceneValue();if(s0===peg$FAILED){s0=peg$parseLuceneExists()}}return s0}function peg$parseLuceneFieldQuery(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseLuceneLiteral();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s3=peg$c10;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s3!==peg$FAILED){s4=[];s5=peg$parseSpace();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseSpace()}if(s4!==peg$FAILED){s5=peg$parseLuceneValue();if(s5!==peg$FAILED){s1=[s1,s2,s3,s4,s5];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneValue(){var s0;s0=peg$parseLuceneRange();if(s0===peg$FAILED){s0=peg$parseLuceneWildcard();if(s0===peg$FAILED){s0=peg$parseLuceneRegex();if(s0===peg$FAILED){s0=peg$parseLuceneFuzzy();if(s0===peg$FAILED){s0=peg$parseLuceneProximity();if(s0===peg$FAILED){s0=peg$parseLuceneBoost()}}}}}return s0}function peg$parseLuceneExists(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.substr(peg$currPos,8)===peg$c98){s1=peg$c98;peg$currPos+=8}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c99)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s3=peg$c10;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s3!==peg$FAILED){s4=[];s5=peg$parseSpace();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseSpace()}if(s4!==peg$FAILED){s5=peg$parseLuceneLiteral();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c100();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneRange(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;s1=peg$parseRangeOperator();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){s3=peg$parseLuceneLiteral();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c101();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseLuceneRangeStart();if(s1!==peg$FAILED){s2=[];s3=peg$parseSpace();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSpace()}if(s2!==peg$FAILED){s3=peg$parseLuceneLiteral();if(s3!==peg$FAILED){s4=peg$parseLuceneTo();if(s4!==peg$FAILED){s5=peg$parseLuceneLiteral();if(s5!==peg$FAILED){s6=peg$parseLuceneRangeEnd();if(s6!==peg$FAILED){peg$savedPos=s0;s1=peg$c101();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}return s0}function peg$parseLuceneWildcard(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseLuceneUnquotedCharacter();if(s2===peg$FAILED){if(input.charCodeAt(peg$currPos)===42){s2=peg$c51;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c52)}}}while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseLuceneUnquotedCharacter();if(s2===peg$FAILED){if(input.charCodeAt(peg$currPos)===42){s2=peg$c51;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c52)}}}}if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===63){s2=peg$c102;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c103)}}if(s2!==peg$FAILED){s3=[];s4=peg$parseLuceneWildcard();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseLuceneWildcard()}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c104();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneRegex(){var s0,s1,s2,s3;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===47){s1=peg$c105;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c106)}}if(s1!==peg$FAILED){s2=[];if(peg$c107.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c108)}}while(s3!==peg$FAILED){s2.push(s3);if(peg$c107.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c108)}}}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===47){s3=peg$c105;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c106)}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c109();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneFuzzy(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseLuceneUnquotedLiteral();if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===126){s2=peg$c110;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c111)}}if(s2!==peg$FAILED){s3=[];if(peg$c112.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c113)}}while(s4!==peg$FAILED){s3.push(s4);if(peg$c112.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c113)}}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c114();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneProximity(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseQuotedString();if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===126){s2=peg$c110;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c111)}}if(s2!==peg$FAILED){s3=[];if(peg$c112.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c113)}}while(s4!==peg$FAILED){s3.push(s4);if(peg$c112.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c113)}}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c115();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneBoost(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseLuceneLiteral();if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===94){s2=peg$c116;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c117)}}if(s2!==peg$FAILED){s3=[];if(peg$c112.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c113)}}while(s4!==peg$FAILED){s3.push(s4);if(peg$c112.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c113)}}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c118();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneLiteral(){var s0;s0=peg$parseQuotedString();if(s0===peg$FAILED){s0=peg$parseLuceneUnquotedLiteral()}return s0}function peg$parseLuceneUnquotedLiteral(){var s0,s1;s0=[];s1=peg$parseLuceneUnquotedCharacter();if(s1!==peg$FAILED){while(s1!==peg$FAILED){s0.push(s1);s1=peg$parseLuceneUnquotedCharacter()}}else{s0=peg$FAILED}return s0}function peg$parseLuceneUnquotedCharacter(){var s0,s1,s2,s3;s0=peg$parseEscapedWhitespace();if(s0===peg$FAILED){s0=peg$parseEscapedLuceneSpecialCharacter();if(s0===peg$FAILED){s0=peg$currPos;s1=peg$currPos;peg$silentFails++;s2=peg$parseLuceneSpecialCharacter();peg$silentFails--;if(s2===peg$FAILED){s1=void 0}else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){s2=peg$currPos;peg$silentFails++;s3=peg$parseLuceneKeyword();peg$silentFails--;if(s3===peg$FAILED){s2=void 0}else{peg$currPos=s2;s2=peg$FAILED}if(s2!==peg$FAILED){if(input.length>peg$currPos){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c50)}}if(s3!==peg$FAILED){s1=[s1,s2,s3];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}}return s0}function peg$parseLuceneKeyword(){var s0;s0=peg$parseOr();if(s0===peg$FAILED){s0=peg$parseAnd();if(s0===peg$FAILED){s0=peg$parseLuceneOr();if(s0===peg$FAILED){s0=peg$parseLuceneAnd();if(s0===peg$FAILED){s0=peg$parseLuceneNot();if(s0===peg$FAILED){s0=peg$parseLuceneTo()}}}}}return s0}function peg$parseEscapedLuceneSpecialCharacter(){var s0,s1,s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s1=peg$c42;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}if(s1!==peg$FAILED){s2=peg$parseLuceneSpecialCharacter();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c119();s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneSpecialCharacter(){var s0;if(input.charCodeAt(peg$currPos)===43){s0=peg$c91;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c92)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===45){s0=peg$c93;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c94)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===61){s0=peg$c120;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c121)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===62){s0=peg$c75;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c76)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===60){s0=peg$c72;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c73)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===33){s0=peg$c96;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c97)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===40){s0=peg$c5;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c6)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===41){s0=peg$c7;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c8)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===123){s0=peg$c12;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s0=peg$c14;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c15)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===91){s0=peg$c122;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c123)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===93){s0=peg$c124;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c125)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===94){s0=peg$c116;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c117)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===34){s0=peg$c38;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c39)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===126){s0=peg$c110;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c111)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===42){s0=peg$c51;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c52)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===63){s0=peg$c102;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c103)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s0=peg$c10;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===92){s0=peg$c42;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===47){s0=peg$c105;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c106)}}}}}}}}}}}}}}}}}}}}}return s0}function peg$parseLuceneTo(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=[];s2=peg$parseSpace();if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseSpace()}}else{s1=peg$FAILED}if(s1!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c126){s2=peg$c126;peg$currPos+=2}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c127)}}if(s2!==peg$FAILED){s3=[];s4=peg$parseSpace();if(s4!==peg$FAILED){while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSpace()}}else{s3=peg$FAILED}if(s3!==peg$FAILED){s1=[s1,s2,s3];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseLuceneRangeStart(){var s0;if(input.charCodeAt(peg$currPos)===91){s0=peg$c122;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c123)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===123){s0=peg$c12;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}}return s0}function peg$parseLuceneRangeEnd(){var s0;if(input.charCodeAt(peg$currPos)===93){s0=peg$c124;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c125)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s0=peg$c14;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c15)}}}return s0}var errorOnLuceneSyntax=options.errorOnLuceneSyntax,parseCursor=options.parseCursor,cursorSymbol=options.cursorSymbol,_options$allowLeading=options.allowLeadingWildcards,allowLeadingWildcards=_options$allowLeading===void 0?true:_options$allowLeading,nodeTypes=options.helpers.nodeTypes;var buildFunctionNode=nodeTypes.function.buildNodeWithArgumentNodes;var buildLiteralNode=nodeTypes.literal.buildNode;var buildWildcardNode=nodeTypes.wildcard.buildNode;var buildNamedArgNode=nodeTypes.namedArg.buildNode;var wildcardSymbol=nodeTypes.wildcard.wildcardSymbol;peg$result=peg$startRuleFunction();if(peg$result!==peg$FAILED&&peg$currPos===input.length){return peg$result}else{if(peg$result!==peg$FAILED&&peg$currPos<input.length){peg$fail({type:"end",description:"end of input"})}throw peg$buildException(null,peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}}return{SyntaxError:peg$SyntaxError,parse:peg$parse}}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var ast=_interopRequireWildcard(__webpack_require__(98));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(children){return{arguments:children}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var children=node.arguments||[];return{bool:{filter:children.map((function(child){return ast.toElasticsearchQuery(child,indexPattern,config,context)}))}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var ast=_interopRequireWildcard(__webpack_require__(98));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(children){return{arguments:children}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var children=node.arguments||[];return{bool:{should:children.map((function(child){return ast.toElasticsearchQuery(child,indexPattern,config,context)})),minimum_should_match:1}}}},function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var ast=_interopRequireWildcard(__webpack_require__(98));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(child){return{arguments:[child]}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _node$arguments=_slicedToArray(node.arguments,1),argument=_node$arguments[0];return{bool:{must_not:ast.toElasticsearchQuery(argument,indexPattern,config,context)}}}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=_interopRequireDefault(__webpack_require__(49));var _node_types=__webpack_require__(122);var ast=_interopRequireWildcard(__webpack_require__(98));var _filters=__webpack_require__(94);var _get_fields=__webpack_require__(212);var _utils=__webpack_require__(214);var _get_full_field_name_node=__webpack_require__(291);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function buildNodeParams(fieldName,params){var paramsToMap=_lodash.default.pick(params,"gt","lt","gte","lte","format");var fieldNameArg=typeof fieldName==="string"?ast.fromLiteralExpression(fieldName):_node_types.nodeTypes.literal.buildNode(fieldName);var args=_lodash.default.map(paramsToMap,(function(value,key){return _node_types.nodeTypes.namedArg.buildNode(key,value)}));return{arguments:[fieldNameArg].concat(_toConsumableArray(args))}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _node$arguments=_toArray(node.arguments),fieldNameArg=_node$arguments[0],args=_node$arguments.slice(1);var fullFieldNameArg=(0,_get_full_field_name_node.getFullFieldNameNode)(fieldNameArg,indexPattern,(context===null||context===void 0?void 0:context.nested)?context.nested.path:undefined);var fields=indexPattern?(0,_get_fields.getFields)(fullFieldNameArg,indexPattern):[];var namedArgs=extractArguments(args);var queryParams=_lodash.default.mapValues(namedArgs,(function(arg){return ast.toElasticsearchQuery(arg)}));if(fields&&fields.length===0){fields.push({name:ast.toElasticsearchQuery(fullFieldNameArg),scripted:false,type:""})}var queries=fields.map((function(field){var wrapWithNestedQuery=function wrapWithNestedQuery(query){if(!(fullFieldNameArg.type==="wildcard")||!_lodash.default.get(field,"subType.nested")||context.nested){return query}else{return{nested:{path:field.subType.nested.path,query:query,score_mode:"none"}}}};if(field.scripted){return{script:(0,_filters.getRangeScript)(field,queryParams)}}else if(field.type==="date"){var timeZoneParam=config.dateFormatTZ?{time_zone:(0,_utils.getTimeZoneFromSettings)(config.dateFormatTZ)}:{};return wrapWithNestedQuery({range:_defineProperty({},field.name,_objectSpread({},queryParams,{},timeZoneParam))})}return wrapWithNestedQuery({range:_defineProperty({},field.name,queryParams)})}));return{bool:{should:queries,minimum_should_match:1}}}function extractArguments(args){if(args.gt&&args.gte||args.lt&&args.lte){throw new Error("range ends cannot be both inclusive and exclusive")}var unnamedArgOrder=["gte","lte","format"];return args.reduce((function(acc,arg,index){if(arg.type==="namedArg"){acc[arg.name]=arg.value}else{acc[unnamedArgOrder[index]]=arg}return acc}),{})}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=__webpack_require__(49);var literal=_interopRequireWildcard(__webpack_require__(145));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(fieldName){return{arguments:[literal.buildNode(fieldName)]}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _node$arguments=_slicedToArray(node.arguments,1),fieldNameArg=_node$arguments[0];var fullFieldNameArg=_objectSpread({},fieldNameArg,{value:(context===null||context===void 0?void 0:context.nested)?"".concat(context.nested.path,".").concat(fieldNameArg.value):fieldNameArg.value});var fieldName=literal.toElasticsearchQuery(fullFieldNameArg);var field=(0,_lodash.get)(indexPattern,"fields",[]).find((function(fld){return fld.name===fieldName}));if(field&&field.scripted){throw new Error("Exists query does not support scripted fields")}return{exists:{field:fieldName}}}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=_interopRequireDefault(__webpack_require__(49));var _node_types=__webpack_require__(122);var ast=_interopRequireWildcard(__webpack_require__(98));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function buildNodeParams(fieldName,params){params=_lodash.default.pick(params,"topLeft","bottomRight");var fieldNameArg=_node_types.nodeTypes.literal.buildNode(fieldName);var args=_lodash.default.map(params,(function(value,key){var latLon="".concat(value.lat,", ").concat(value.lon);return _node_types.nodeTypes.namedArg.buildNode(key,latLon)}));return{arguments:[fieldNameArg].concat(_toConsumableArray(args))}}function toElasticsearchQuery(node,indexPattern){var _geo_bounding_box;var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _ref;var _node$arguments=_toArray(node.arguments),fieldNameArg=_node$arguments[0],args=_node$arguments.slice(1);var fullFieldNameArg=_objectSpread({},fieldNameArg,{value:(context===null||context===void 0?void 0:context.nested)?"".concat(context.nested.path,".").concat(fieldNameArg.value):fieldNameArg.value});var fieldName=_node_types.nodeTypes.literal.toElasticsearchQuery(fullFieldNameArg);var fieldList=(_ref=indexPattern===null||indexPattern===void 0?void 0:indexPattern.fields)!==null&&_ref!==void 0?_ref:[];var field=fieldList.find((function(fld){return fld.name===fieldName}));var queryParams=args.reduce((function(acc,arg){var snakeArgName=_lodash.default.snakeCase(arg.name);return _objectSpread({},acc,_defineProperty({},snakeArgName,ast.toElasticsearchQuery(arg)))}),{});if(field===null||field===void 0?void 0:field.scripted){throw new Error("Geo bounding box query does not support scripted fields")}return{geo_bounding_box:(_geo_bounding_box={},_defineProperty(_geo_bounding_box,fieldName,queryParams),_defineProperty(_geo_bounding_box,"ignore_unmapped",true),_geo_bounding_box)}}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var _node_types=__webpack_require__(122);var ast=_interopRequireWildcard(__webpack_require__(98));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(fieldName,points){var fieldNameArg=_node_types.nodeTypes.literal.buildNode(fieldName);var args=points.map((function(point){var latLon="".concat(point.lat,", ").concat(point.lon);return _node_types.nodeTypes.literal.buildNode(latLon)}));return{arguments:[fieldNameArg].concat(_toConsumableArray(args))}}function toElasticsearchQuery(node,indexPattern){var _geo_polygon;var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _ref;var _node$arguments=_toArray(node.arguments),fieldNameArg=_node$arguments[0],points=_node$arguments.slice(1);var fullFieldNameArg=_objectSpread({},fieldNameArg,{value:(context===null||context===void 0?void 0:context.nested)?"".concat(context.nested.path,".").concat(fieldNameArg.value):fieldNameArg.value});var fieldName=_node_types.nodeTypes.literal.toElasticsearchQuery(fullFieldNameArg);var fieldList=(_ref=indexPattern===null||indexPattern===void 0?void 0:indexPattern.fields)!==null&&_ref!==void 0?_ref:[];var field=fieldList.find((function(fld){return fld.name===fieldName}));var queryParams={points:points.map((function(point){return ast.toElasticsearchQuery(point,indexPattern,config,context)}))};if(field===null||field===void 0?void 0:field.scripted){throw new Error("Geo polygon query does not support scripted fields")}return{geo_polygon:(_geo_polygon={},_defineProperty(_geo_polygon,fieldName,queryParams),_defineProperty(_geo_polygon,"ignore_unmapped",true),_geo_polygon)}}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});exports.buildNodeParams=buildNodeParams;exports.toElasticsearchQuery=toElasticsearchQuery;var ast=_interopRequireWildcard(__webpack_require__(98));var literal=_interopRequireWildcard(__webpack_require__(145));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function buildNodeParams(path,child){var pathNode=typeof path==="string"?ast.fromLiteralExpression(path):literal.buildNode(path);return{arguments:[pathNode,child]}}function toElasticsearchQuery(node,indexPattern){var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var context=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _context$nested;var _node$arguments=_slicedToArray(node.arguments,2),path=_node$arguments[0],child=_node$arguments[1];var stringPath=ast.toElasticsearchQuery(path);var fullPath=(context===null||context===void 0?void 0:(_context$nested=context.nested)===null||_context$nested===void 0?void 0:_context$nested.path)?"".concat(context.nested.path,".").concat(stringPath):stringPath;return{nested:{path:fullPath,query:ast.toElasticsearchQuery(child,indexPattern,config,_objectSpread({},context,{nested:{path:fullPath}})),score_mode:"none"}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildNode=buildNode;exports.toElasticsearchQuery=toElasticsearchQuery;var _lodash=_interopRequireDefault(__webpack_require__(49));var ast=_interopRequireWildcard(__webpack_require__(98));var _node_types=__webpack_require__(122);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function buildNode(name,value){var argumentNode=_lodash.default.get(value,"type")==="literal"?value:_node_types.nodeTypes.literal.buildNode(value);return{type:"namedArg",name:name,value:argumentNode}}function toElasticsearchQuery(node){return ast.toElasticsearchQuery(node.value)}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"nodeTypes",{enumerable:true,get:function get(){return _node_types.nodeTypes}});var _node_types=__webpack_require__(122)},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.migrateFilter=migrateFilter;var _lodash=__webpack_require__(49);var _filters=__webpack_require__(94);function isDeprecatedMatchPhraseFilter(filter){var fieldName=filter.query&&filter.query.match&&Object.keys(filter.query.match)[0];return Boolean(fieldName&&(0,_lodash.get)(filter,["query","match",fieldName,"type"])==="phrase")}function migrateFilter(filter,indexPattern){if(isDeprecatedMatchPhraseFilter(filter)){var fieldName=Object.keys(filter.query.match)[0];var params=(0,_lodash.get)(filter,["query","match",fieldName]);if(indexPattern){var field=indexPattern.fields.find((function(f){return f.name===fieldName}));if(field){params.query=(0,_filters.getConvertedValueForField)(field,params.query)}}return _objectSpread({},filter,{query:{match_phrase:_defineProperty({},fieldName,(0,_lodash.omit)(params,"type"))}})}return filter}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterMatchesIndex=filterMatchesIndex;function filterMatchesIndex(filter,indexPattern){var _filter$meta;if(!((_filter$meta=filter.meta)===null||_filter$meta===void 0?void 0:_filter$meta.key)||!indexPattern){return true}return indexPattern.fields.some((function(field){return field.name===filter.meta.key}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.handleNestedFilter=void 0;var _filters=__webpack_require__(94);var handleNestedFilter=function handleNestedFilter(filter,indexPattern){if(!indexPattern)return filter;var fieldName=(0,_filters.getFilterField)(filter);if(!fieldName){return filter}var field=indexPattern.fields.find((function(indexPatternField){return indexPatternField.name===fieldName}));if(!field||!field.subType||!field.subType.nested||!field.subType.nested.path){return filter}var query=(0,_filters.cleanFilter)(filter);return{meta:filter.meta,nested:{path:field.subType.nested.path,query:query.query||query}}};exports.handleNestedFilter=handleNestedFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildQueryFromLucene=buildQueryFromLucene;var _decorate_query=__webpack_require__(293);var _lucene_string_to_dsl=__webpack_require__(294);function buildQueryFromLucene(queries,queryStringOptions,dateFormatTZ){var combinedQueries=(queries||[]).map((function(query){var queryDsl=(0,_lucene_string_to_dsl.luceneStringToDsl)(query.query);return(0,_decorate_query.decorateQuery)(queryDsl,queryStringOptions,dateFormatTZ)}));return{must:combinedQueries,filter:[],should:[],must_not:[]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isEsQueryString=void 0;var _lodash=__webpack_require__(49);var isEsQueryString=function isEsQueryString(query){return(0,_lodash.has)(query,"query_string.query")};exports.isEsQueryString=isEsQueryString},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEsQueryConfig=getEsQueryConfig;function getEsQueryConfig(config){var allowLeadingWildcards=config.get("query:allowLeadingWildcards");var queryStringOptions=config.get("query:queryString:options");var ignoreFilterIfFieldNotInIndex=config.get("courier:ignoreFilterIfFieldNotInIndex");var dateFormatTZ=config.get("dateFormat:tz");return{allowLeadingWildcards:allowLeadingWildcards,queryStringOptions:queryStringOptions,ignoreFilterIfFieldNotInIndex:ignoreFilterIfFieldNotInIndex,dateFormatTZ:dateFormatTZ}}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty2(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.FieldFormatsRegistry=void 0;var _lodash=__webpack_require__(49);var _types=__webpack_require__(71);var _base_formatters=__webpack_require__(297);var _field_format=__webpack_require__(78);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FieldFormatsRegistry=function(){function FieldFormatsRegistry(){var _this=this;_classCallCheck(this,FieldFormatsRegistry);_defineProperty(this,"fieldFormats",new Map);_defineProperty(this,"defaultMap",{});_defineProperty(this,"metaParamsOptions",{});_defineProperty(this,"getConfig",void 0);_defineProperty(this,"deserialize",(function(){return new(_field_format.FieldFormat.from(_lodash.identity))}));_defineProperty(this,"getDefaultConfig",(function(fieldType,esTypes){var type=_this.getDefaultTypeName(fieldType,esTypes);return _this.defaultMap&&_this.defaultMap[type]||{id:_types.FIELD_FORMAT_IDS.STRING,params:{}}}));_defineProperty(this,"getType",(function(formatId){var fieldFormat=_this.fieldFormats.get(formatId);if(fieldFormat){var decoratedFieldFormat=_this.fieldFormatMetaParamsDecorator(fieldFormat);if(decoratedFieldFormat){return decoratedFieldFormat}}return undefined}));_defineProperty(this,"getTypeWithoutMetaParams",(function(formatId){return _this.fieldFormats.get(formatId)}));_defineProperty(this,"getDefaultType",(function(fieldType,esTypes){var config=_this.getDefaultConfig(fieldType,esTypes);return _this.getType(config.id)}));_defineProperty(this,"getTypeNameByEsTypes",(function(esTypes){if(!Array.isArray(esTypes)){return undefined}return esTypes.find((function(type){return _this.defaultMap[type]&&_this.defaultMap[type].es}))}));_defineProperty(this,"getDefaultTypeName",(function(fieldType,esTypes){var esType=_this.getTypeNameByEsTypes(esTypes);return esType||fieldType}));_defineProperty(this,"getInstance",(0,_lodash.memoize)((function(formatId){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var ConcreteFieldFormat=_this.getType(formatId);if(!ConcreteFieldFormat){throw new Error("Field Format '".concat(formatId,"' not found!"))}return new ConcreteFieldFormat(params,_this.getConfig)}),(function(formatId,params){return JSON.stringify(_objectSpread({formatId:formatId},params))})));_defineProperty(this,"getDefaultInstance",(0,_lodash.memoize)(this.getDefaultInstancePlain,this.getDefaultInstanceCacheResolver));_defineProperty(this,"fieldFormatMetaParamsDecorator",(function(fieldFormat){var getMetaParams=function getMetaParams(customParams){return _this.buildMetaParams(customParams)};if(fieldFormat){var _class,_temp;return _temp=_class=function(_fieldFormat){_inherits(DecoratedFieldFormat,_fieldFormat);function DecoratedFieldFormat(){var params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var getConfig=arguments.length>1?arguments[1]:undefined;_classCallCheck(this,DecoratedFieldFormat);return _possibleConstructorReturn(this,_getPrototypeOf(DecoratedFieldFormat).call(this,getMetaParams(params),getConfig))}return DecoratedFieldFormat}(fieldFormat),_defineProperty(_class,"id",fieldFormat.id),_defineProperty(_class,"fieldType",fieldFormat.fieldType),_temp}return undefined}));_defineProperty(this,"buildMetaParams",(function(customParams){return _objectSpread({},_this.metaParamsOptions,{},customParams)}))}_createClass(FieldFormatsRegistry,[{key:"init",value:function init(getConfig){var metaParamsOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var defaultFieldConverters=arguments.length>2&&arguments[2]!==undefined?arguments[2]:_base_formatters.baseFormatters;var defaultTypeMap=getConfig("format:defaultTypeMap");this.register(defaultFieldConverters);this.parseDefaultTypeMap(defaultTypeMap);this.getConfig=getConfig;this.metaParamsOptions=metaParamsOptions}},{key:"getDefaultInstancePlain",value:function getDefaultInstancePlain(fieldType,esTypes){var conf=this.getDefaultConfig(fieldType,esTypes);return this.getInstance(conf.id,conf.params)}},{key:"getDefaultInstanceCacheResolver",value:function getDefaultInstanceCacheResolver(fieldType,esTypes){return Array.isArray(esTypes)&&esTypes.indexOf(fieldType)===-1?[fieldType].concat(_toConsumableArray(esTypes)).join("-"):fieldType}},{key:"getByFieldType",value:function getByFieldType(fieldType){var _this2=this;return _toConsumableArray(this.fieldFormats.values()).filter((function(format){return format&&format.fieldType.indexOf(fieldType)!==-1})).map((function(format){return _this2.fieldFormatMetaParamsDecorator(format)}))}},{key:"parseDefaultTypeMap",value:function parseDefaultTypeMap(value){this.defaultMap=value;(0,_lodash.forOwn)(this,(function(fn){if((0,_lodash.isFunction)(fn)&&fn.cache){fn.cache=new _lodash.memoize.Cache}}))}},{key:"register",value:function register(fieldFormats){var _this3=this;fieldFormats.forEach((function(fieldFormat){return _this3.fieldFormats.set(fieldFormat.id,fieldFormat)}))}}]);return FieldFormatsRegistry}();exports.FieldFormatsRegistry=FieldFormatsRegistry},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.createCustomFieldFormat=void 0;var _field_format=__webpack_require__(78);var _types=__webpack_require__(71);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var createCustomFieldFormat=function createCustomFieldFormat(convert){var _class,_temp;return _temp=_class=function(_field_format$FieldFo){_inherits(CustomFieldFormat,_field_format$FieldFo);function CustomFieldFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,CustomFieldFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(CustomFieldFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",convert);return _this}return CustomFieldFormat}(_field_format.FieldFormat),_defineProperty(_class,"id",_types.FIELD_FORMAT_IDS.CUSTOM),_temp};exports.createCustomFieldFormat=createCustomFieldFormat},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setup=exports.TEXT_CONTEXT_TYPE=void 0;var _lodash=__webpack_require__(49);var _utils=__webpack_require__(123);var TEXT_CONTEXT_TYPE="text";exports.TEXT_CONTEXT_TYPE=TEXT_CONTEXT_TYPE;var setup=function setup(format){var convert=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_utils.asPrettyString;var recurse=function recurse(value){if(!value||!(0,_lodash.isFunction)(value.map)){return convert.call(format,value)}return JSON.stringify(value.map(recurse))};return recurse};exports.setup=setup},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.asPrettyString=asPrettyString;function asPrettyString(val){if(val===null||val===undefined)return" - ";switch(_typeof(val)){case"string":return val;case"object":return JSON.stringify(val,null,"  ");default:return""+val}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getHighlightHtml",{enumerable:true,get:function get(){return _highlight_html.getHighlightHtml}});Object.defineProperty(exports,"getHighlightRequest",{enumerable:true,get:function get(){return _highlight_request.getHighlightRequest}});var _highlight_html=__webpack_require__(589);var _highlight_request=__webpack_require__(591)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getHighlightHtml=getHighlightHtml;var _lodash=_interopRequireDefault(__webpack_require__(49));var _highlight_tags=__webpack_require__(296);var _html_tags=__webpack_require__(590);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getHighlightHtml(fieldValue,highlights){var highlightHtml=_typeof(fieldValue)==="object"?JSON.stringify(fieldValue):fieldValue;_lodash.default.each(highlights,(function(highlight){var escapedHighlight=_lodash.default.escape(highlight);var untaggedHighlight=escapedHighlight.split(_highlight_tags.highlightTags.pre).join("").split(_highlight_tags.highlightTags.post).join("");var taggedHighlight=escapedHighlight.split(_highlight_tags.highlightTags.pre).join(_html_tags.htmlTags.pre).split(_highlight_tags.highlightTags.post).join(_html_tags.htmlTags.post);highlightHtml=highlightHtml.split(untaggedHighlight).join(taggedHighlight)}));return highlightHtml}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.htmlTags=void 0;var htmlTags={pre:"<mark>",post:"</mark>"};exports.htmlTags=htmlTags},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getHighlightRequest=getHighlightRequest;var _highlight_tags=__webpack_require__(296);var FRAGMENT_SIZE=Math.pow(2,31)-1;function getHighlightRequest(query,shouldHighlight){if(!shouldHighlight)return;return{pre_tags:[_highlight_tags.highlightTags.pre],post_tags:[_highlight_tags.highlightTags.post],fields:{"*":{}},fragment_size:FRAGMENT_SIZE}}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.serializeFieldFormat=void 0;var serializeFieldFormat=function serializeFieldFormat(agg){var format=agg.params.field?agg.params.field.format.toJSON():{};var formats={date_range:function date_range(){return{id:"date_range",params:format}},ip_range:function ip_range(){return{id:"ip_range",params:format}},percentile_ranks:function percentile_ranks(){return{id:"percent"}},count:function count(){return{id:"number"}},cardinality:function cardinality(){return{id:"number"}},date_histogram:function date_histogram(){return{id:"date",params:{pattern:agg.buckets.getScaledDateFormat()}}},terms:function terms(){return{id:"terms",params:_objectSpread({id:format.id,otherBucketLabel:agg.params.otherBucketLabel,missingBucketLabel:agg.params.missingBucketLabel},format.params)}},range:function range(){return{id:"range",params:_objectSpread({id:format.id},format.params)}}};return formats[agg.type.name]?formats[agg.type.name]():format};exports.serializeFieldFormat=serializeFieldFormat},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setup=exports.HTML_CONTEXT_TYPE=void 0;var _lodash=__webpack_require__(49);var _utils=__webpack_require__(123);var HTML_CONTEXT_TYPE="html";exports.HTML_CONTEXT_TYPE=HTML_CONTEXT_TYPE;var getConvertFn=function getConvertFn(format,convert){var fallbackHtml=function fallbackHtml(value){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var field=options.field,hit=options.hit;var formatted=(0,_lodash.escape)(format.convert(value,"text"));return!field||!hit||!hit.highlight||!hit.highlight[field.name]?formatted:(0,_utils.getHighlightHtml)(formatted,hit.highlight[field.name])};return convert||fallbackHtml};var setup=function setup(format,htmlContextTypeConvert){var convert=getConvertFn(format,htmlContextTypeConvert);var recurse=function recurse(value){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(value==null){return(0,_utils.asPrettyString)(value)}if(!value||!(0,_lodash.isFunction)(value.map)){return convert.call(format,value,options)}var subValues=value.map((function(v){return recurse(v,options)}));var useMultiLine=subValues.some((function(sub){return sub.indexOf("\n")>-1}));return subValues.join(","+(useMultiLine?"\n":" "))};var wrap=function wrap(value,options){return"<span ng-non-bindable>".concat(recurse(value,options),"</span>")};return wrap};exports.setup=setup},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.UrlFormat=void 0;var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(49);var _utils=__webpack_require__(123);var _types=__webpack_require__(79);var _field_format=__webpack_require__(78);var _types2=__webpack_require__(71);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var templateMatchRE=/{{([\s\S]+?)}}/g;var whitelistUrlSchemes=["http://","https://"];var URL_TYPES=[{kind:"a",text:_i18n.i18n.translate("data.fieldFormats.url.types.link",{defaultMessage:"Link"})},{kind:"img",text:_i18n.i18n.translate("data.fieldFormats.url.types.img",{defaultMessage:"Image"})},{kind:"audio",text:_i18n.i18n.translate("data.fieldFormats.url.types.audio",{defaultMessage:"Audio"})}];var DEFAULT_URL_TYPE="a";var UrlFormat=function(_field_format$FieldFo){_inherits(UrlFormat,_field_format$FieldFo);function UrlFormat(params){var _this;_classCallCheck(this,UrlFormat);_this=_possibleConstructorReturn(this,_getPrototypeOf(UrlFormat).call(this,params));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(value){return _this.formatLabel(value)}));_defineProperty(_assertThisInitialized(_this),"htmlConvert",(function(rawValue){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var field=options.field,hit=options.hit;var parsedUrl=_this._params.parsedUrl;var _ref=parsedUrl||{},basePath=_ref.basePath,pathname=_ref.pathname,origin=_ref.origin;var url=(0,_lodash.escape)(_this.formatUrl(rawValue));var label=(0,_lodash.escape)(_this.formatLabel(rawValue,url));switch(_this.param("type")){case"audio":return'<audio controls preload="none" src="'.concat(url,'">');case"img":var imageLabel=label===url?"A dynamically-specified image located at ".concat(url):label;return _this.generateImgHtml(url,imageLabel);default:var inWhitelist=whitelistUrlSchemes.some((function(scheme){return url.indexOf(scheme)===0}));if(!inWhitelist&&!parsedUrl){return url}var prefix="";if(!inWhitelist){if(url[0]==="#"){prefix="".concat(origin).concat(pathname)}else if(url.indexOf(basePath||"/")===0){prefix="".concat(origin)}else{var prefixEnd=url[0]==="/"?"":"/";prefix="".concat(origin).concat(basePath||"","/app").concat(prefixEnd)}}var linkLabel;if(hit&&hit.highlight&&hit.highlight[field.name]){linkLabel=(0,_utils.getHighlightHtml)(label,hit.highlight[field.name])}else{linkLabel=label}var linkTarget=_this.param("openLinkInCurrentTab")?"_self":"_blank";return'<a href="'.concat(prefix).concat(url,'" target="').concat(linkTarget,'" rel="noopener noreferrer">').concat(linkLabel,"</a>")}}));_this.compileTemplate=(0,_lodash.memoize)(_this.compileTemplate);return _this}_createClass(UrlFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{type:DEFAULT_URL_TYPE,urlTemplate:null,labelTemplate:null,width:null,height:null}}},{key:"formatLabel",value:function formatLabel(value,url){var template=this.param("labelTemplate");if(url==null)url=this.formatUrl(value);if(!template)return url;return this.compileTemplate(template)({value:value,url:url})}},{key:"formatUrl",value:function formatUrl(value){var template=this.param("urlTemplate");if(!template)return value;return this.compileTemplate(template)({value:encodeURIComponent(value),rawValue:value})}},{key:"compileTemplate",value:function compileTemplate(template){var parts=template.split(templateMatchRE).map((function(part,i){return i%2?part.trim():part}));return function(locals){var output="";var i=-1;while(++i<parts.length){if(i%2){if(locals.hasOwnProperty(parts[i])){var local=locals[parts[i]];output+=local==null?"":local}}else{output+=parts[i]}}return output}}},{key:"generateImgHtml",value:function generateImgHtml(url,imageLabel){var isValidWidth=!isNaN(parseInt(this.param("width"),10));var isValidHeight=!isNaN(parseInt(this.param("height"),10));var maxWidth=isValidWidth?"".concat(this.param("width"),"px"):"none";var maxHeight=isValidHeight?"".concat(this.param("height"),"px"):"none";return'<img src="'.concat(url,'" alt="').concat(imageLabel,'" style="width:auto; height:auto; max-width:').concat(maxWidth,"; max-height:").concat(maxHeight,';">')}}]);return UrlFormat}(_field_format.FieldFormat);exports.UrlFormat=UrlFormat;_defineProperty(UrlFormat,"id",_types2.FIELD_FORMAT_IDS.URL);_defineProperty(UrlFormat,"title",_i18n.i18n.translate("data.fieldFormats.url.title",{defaultMessage:"Url"}));_defineProperty(UrlFormat,"fieldType",[_types.KBN_FIELD_TYPES.NUMBER,_types.KBN_FIELD_TYPES.BOOLEAN,_types.KBN_FIELD_TYPES.DATE,_types.KBN_FIELD_TYPES.IP,_types.KBN_FIELD_TYPES.STRING,_types.KBN_FIELD_TYPES.MURMUR3,_types.KBN_FIELD_TYPES.UNKNOWN,_types.KBN_FIELD_TYPES.CONFLICT]);_defineProperty(UrlFormat,"urlTypes",URL_TYPES)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.BytesFormat=void 0;var _i18n=__webpack_require__(1);var _numeral=__webpack_require__(216);var _types=__webpack_require__(71);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var BytesFormat=function(_numeral$NumeralForma){_inherits(BytesFormat,_numeral$NumeralForma);function BytesFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,BytesFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(BytesFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"id",BytesFormat.id);_defineProperty(_assertThisInitialized(_this),"title",BytesFormat.title);_defineProperty(_assertThisInitialized(_this),"allowsNumericalAggregations",true);return _this}return BytesFormat}(_numeral.NumeralFormat);exports.BytesFormat=BytesFormat;_defineProperty(BytesFormat,"id",_types.FIELD_FORMAT_IDS.BYTES);_defineProperty(BytesFormat,"title",_i18n.i18n.translate("data.fieldFormats.bytes.title",{defaultMessage:"Bytes"}))},,function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.analysePatternForFract=analysePatternForFract;exports.formatWithNanos=formatWithNanos;exports.DateNanosFormat=void 0;var _i18n=__webpack_require__(1);var _moment=_interopRequireDefault(__webpack_require__(32));var _lodash=__webpack_require__(49);var _types=__webpack_require__(79);var _field_format=__webpack_require__(78);var _types2=__webpack_require__(71);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function analysePatternForFract(pattern){var fracSecMatch=pattern.match("S+");var fracSecMatchStr=fracSecMatch?fracSecMatch[0]:"";return{length:fracSecMatchStr.length,patternNanos:fracSecMatchStr,pattern:pattern,patternEscaped:fracSecMatchStr?pattern.replace(fracSecMatch,"[".concat(fracSecMatch,"]")):""}}function formatWithNanos(dateMomentObj,valRaw,fracPatternObj){if(fracPatternObj.length<=3){return dateMomentObj.format(fracPatternObj.pattern)}else{var valFormatted=dateMomentObj.format(fracPatternObj.patternEscaped);var valNanos=valRaw.substr(20,valRaw.length-21).padEnd(9,"0").substr(0,fracPatternObj.patternNanos.length);return valFormatted.replace(fracPatternObj.patternNanos,valNanos)}}var DateNanosFormat=function(_field_format$FieldFo){_inherits(DateNanosFormat,_field_format$FieldFo);function DateNanosFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,DateNanosFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DateNanosFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"memoizedConverter",_lodash.noop);_defineProperty(_assertThisInitialized(_this),"memoizedPattern","");_defineProperty(_assertThisInitialized(_this),"timeZone","");_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){var pattern=_this.param("pattern");var timezone=_this.param("timezone");var fractPattern=analysePatternForFract(pattern);var fallbackPattern=_this.param("patternFallback");var timezoneChanged=_this.timeZone!==timezone;var datePatternChanged=_this.memoizedPattern!==pattern;if(timezoneChanged||datePatternChanged){_this.timeZone=timezone;_this.memoizedPattern=pattern;_this.memoizedConverter=(0,_lodash.memoize)((function converter(value){if(value===null||value===undefined){return"-"}var date=(0,_moment.default)(value);if(typeof value!=="string"&&date.isValid()){return date.format(fallbackPattern)}else if(date.isValid()){return formatWithNanos(date,value,fractPattern)}else{return value}}))}return _this.memoizedConverter(val)}));return _this}_createClass(DateNanosFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{pattern:this.getConfig("dateNanosFormat"),fallbackPattern:this.getConfig("dateFormat"),timezone:this.getConfig("dateFormat:tz")}}}]);return DateNanosFormat}(_field_format.FieldFormat);exports.DateNanosFormat=DateNanosFormat;_defineProperty(DateNanosFormat,"id",_types2.FIELD_FORMAT_IDS.DATE_NANOS);_defineProperty(DateNanosFormat,"title",_i18n.i18n.translate("data.fieldFormats.date_nanos.title",{defaultMessage:"Date nanos"}));_defineProperty(DateNanosFormat,"fieldType",_types.KBN_FIELD_TYPES.DATE)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.RelativeDateFormat=void 0;var _i18n=__webpack_require__(1);var _moment=_interopRequireDefault(__webpack_require__(32));var _types=__webpack_require__(79);var _field_format=__webpack_require__(78);var _types2=__webpack_require__(71);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RelativeDateFormat=function(_field_format$FieldFo){_inherits(RelativeDateFormat,_field_format$FieldFo);function RelativeDateFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,RelativeDateFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RelativeDateFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){if(val===null||val===undefined){return"-"}var date=(0,_moment.default)(val);if(date.isValid()){return date.fromNow()}else{return val}}));return _this}return RelativeDateFormat}(_field_format.FieldFormat);exports.RelativeDateFormat=RelativeDateFormat;_defineProperty(RelativeDateFormat,"id",_types2.FIELD_FORMAT_IDS.RELATIVE_DATE);_defineProperty(RelativeDateFormat,"title",_i18n.i18n.translate("data.fieldFormats.relative_date.title",{defaultMessage:"Relative date"}));_defineProperty(RelativeDateFormat,"fieldType",_types.KBN_FIELD_TYPES.DATE)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty2(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.DurationFormat=void 0;var _i18n=__webpack_require__(1);var _moment=_interopRequireDefault(__webpack_require__(32));var _types=__webpack_require__(79);var _field_format=__webpack_require__(78);var _types2=__webpack_require__(71);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ratioToSeconds={picoseconds:1e-12,nanoseconds:1e-9,microseconds:1e-6};var HUMAN_FRIENDLY="humanize";var DEFAULT_OUTPUT_PRECISION=2;var DEFAULT_INPUT_FORMAT={text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.seconds",{defaultMessage:"Seconds"}),kind:"seconds"};var inputFormats=[{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.picoseconds",{defaultMessage:"Picoseconds"}),kind:"picoseconds"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.nanoseconds",{defaultMessage:"Nanoseconds"}),kind:"nanoseconds"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.microseconds",{defaultMessage:"Microseconds"}),kind:"microseconds"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.milliseconds",{defaultMessage:"Milliseconds"}),kind:"milliseconds"},_objectSpread({},DEFAULT_INPUT_FORMAT),{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.minutes",{defaultMessage:"Minutes"}),kind:"minutes"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.hours",{defaultMessage:"Hours"}),kind:"hours"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.days",{defaultMessage:"Days"}),kind:"days"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.weeks",{defaultMessage:"Weeks"}),kind:"weeks"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.months",{defaultMessage:"Months"}),kind:"months"},{text:_i18n.i18n.translate("data.fieldFormats.duration.inputFormats.years",{defaultMessage:"Years"}),kind:"years"}];var DEFAULT_OUTPUT_FORMAT={text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.humanize",{defaultMessage:"Human Readable"}),method:"humanize"};var outputFormats=[_objectSpread({},DEFAULT_OUTPUT_FORMAT),{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asMilliseconds",{defaultMessage:"Milliseconds"}),method:"asMilliseconds"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asSeconds",{defaultMessage:"Seconds"}),method:"asSeconds"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asMinutes",{defaultMessage:"Minutes"}),method:"asMinutes"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asHours",{defaultMessage:"Hours"}),method:"asHours"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asDays",{defaultMessage:"Days"}),method:"asDays"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asWeeks",{defaultMessage:"Weeks"}),method:"asWeeks"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asMonths",{defaultMessage:"Months"}),method:"asMonths"},{text:_i18n.i18n.translate("data.fieldFormats.duration.outputFormats.asYears",{defaultMessage:"Years"}),method:"asYears"}];function parseInputAsDuration(val,inputFormat){var ratio=ratioToSeconds[inputFormat]||1;var kind=inputFormat in ratioToSeconds?"seconds":inputFormat;return _moment.default.duration(val*ratio,kind)}var DurationFormat=function(_field_format$FieldFo){_inherits(DurationFormat,_field_format$FieldFo);function DurationFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,DurationFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DurationFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"allowsNumericalAggregations",true);_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){var inputFormat=_this.param("inputFormat");var outputFormat=_this.param("outputFormat");var outputPrecision=_this.param("outputPrecision");var human=_this.isHuman();var prefix=val<0&&human?_i18n.i18n.translate("data.fieldFormats.duration.negativeLabel",{defaultMessage:"minus"})+" ":"";var duration=parseInputAsDuration(val,inputFormat);var formatted=duration[outputFormat]();var precise=human?formatted:formatted.toFixed(outputPrecision);return prefix+precise}));return _this}_createClass(DurationFormat,[{key:"isHuman",value:function isHuman(){return this.param("outputFormat")===HUMAN_FRIENDLY}},{key:"getParamDefaults",value:function getParamDefaults(){return{inputFormat:DEFAULT_INPUT_FORMAT.kind,outputFormat:DEFAULT_OUTPUT_FORMAT.method,outputPrecision:DEFAULT_OUTPUT_PRECISION}}}]);return DurationFormat}(_field_format.FieldFormat);exports.DurationFormat=DurationFormat;_defineProperty(DurationFormat,"id",_types2.FIELD_FORMAT_IDS.DURATION);_defineProperty(DurationFormat,"title",_i18n.i18n.translate("data.fieldFormats.duration.title",{defaultMessage:"Duration"}));_defineProperty(DurationFormat,"fieldType",_types.KBN_FIELD_TYPES.NUMBER);_defineProperty(DurationFormat,"inputFormats",inputFormats);_defineProperty(DurationFormat,"outputFormats",outputFormats)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.IpFormat=void 0;var _i18n=__webpack_require__(1);var _types=__webpack_require__(79);var _field_format=__webpack_require__(78);var _types2=__webpack_require__(71);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IpFormat=function(_field_format$FieldFo){_inherits(IpFormat,_field_format$FieldFo);function IpFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,IpFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(IpFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){if(val===undefined||val===null)return"-";if(!isFinite(val))return val;return[val>>>24,val>>>16&255,val>>>8&255,val&255].join(".")}));return _this}return IpFormat}(_field_format.FieldFormat);exports.IpFormat=IpFormat;_defineProperty(IpFormat,"id",_types2.FIELD_FORMAT_IDS.IP);_defineProperty(IpFormat,"title",_i18n.i18n.translate("data.fieldFormats.ip.title",{defaultMessage:"IP address"}));_defineProperty(IpFormat,"fieldType",_types.KBN_FIELD_TYPES.IP)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.NumberFormat=void 0;var _i18n=__webpack_require__(1);var _numeral=__webpack_require__(216);var _types=__webpack_require__(71);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NumberFormat=function(_numeral$NumeralForma){_inherits(NumberFormat,_numeral$NumeralForma);function NumberFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,NumberFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(NumberFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"id",NumberFormat.id);_defineProperty(_assertThisInitialized(_this),"title",NumberFormat.title);_defineProperty(_assertThisInitialized(_this),"allowsNumericalAggregations",true);return _this}return NumberFormat}(_numeral.NumeralFormat);exports.NumberFormat=NumberFormat;_defineProperty(NumberFormat,"id",_types.FIELD_FORMAT_IDS.NUMBER);_defineProperty(NumberFormat,"title",_i18n.i18n.translate("data.fieldFormats.number.title",{defaultMessage:"Number"}))},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}Object.defineProperty(exports,"__esModule",{value:true});exports.PercentFormat=void 0;var _i18n=__webpack_require__(1);var _numeral=__webpack_require__(216);var _types=__webpack_require__(71);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PercentFormat=function(_numeral$NumeralForma){_inherits(PercentFormat,_numeral$NumeralForma);function PercentFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,PercentFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PercentFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"id",PercentFormat.id);_defineProperty(_assertThisInitialized(_this),"title",PercentFormat.title);_defineProperty(_assertThisInitialized(_this),"allowsNumericalAggregations",true);_defineProperty(_assertThisInitialized(_this),"getParamDefaults",(function(){return{pattern:_this.getConfig("format:percent:defaultPattern"),fractional:true}}));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){var formatted=_get(_getPrototypeOf(PercentFormat.prototype),"getConvertedValue",_assertThisInitialized(_this)).call(_assertThisInitialized(_this),val);if(_this.param("fractional")){return formatted}return String(Number(formatted)/100)}));return _this}return PercentFormat}(_numeral.NumeralFormat);exports.PercentFormat=PercentFormat;_defineProperty(PercentFormat,"id",_types.FIELD_FORMAT_IDS.PERCENT);_defineProperty(PercentFormat,"title",_i18n.i18n.translate("data.fieldFormats.percent.title",{defaultMessage:"Percentage"}))},function(module,exports,__webpack_require__){"use strict";(function(Buffer){function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.StringFormat=void 0;var _i18n=__webpack_require__(1);var _utils=__webpack_require__(123);var _types=__webpack_require__(79);var _field_format=__webpack_require__(78);var _types2=__webpack_require__(71);var _utils2=__webpack_require__(146);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TRANSFORM_OPTIONS=[{kind:false,text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.none",{defaultMessage:"- None -"})},{kind:"lower",text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.lower",{defaultMessage:"Lower Case"})},{kind:"upper",text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.upper",{defaultMessage:"Upper Case"})},{kind:"title",text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.title",{defaultMessage:"Title Case"})},{kind:"short",text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.short",{defaultMessage:"Short Dots"})},{kind:"base64",text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.base64",{defaultMessage:"Base64 Decode"})},{kind:"urlparam",text:_i18n.i18n.translate("data.fieldFormats.string.transformOptions.url",{defaultMessage:"URL Param Decode"})}];var DEFAULT_TRANSFORM_OPTION=false;var StringFormat=function(_field_format$FieldFo){_inherits(StringFormat,_field_format$FieldFo);function StringFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,StringFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(StringFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){switch(_this.param("transform")){case"lower":return String(val).toLowerCase();case"upper":return String(val).toUpperCase();case"title":return _this.toTitleCase(val);case"short":return(0,_utils2.shortenDottedString)(val);case"base64":return _this.base64Decode(val);case"urlparam":return decodeURIComponent(val);default:return(0,_utils.asPrettyString)(val)}}));return _this}_createClass(StringFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{transform:DEFAULT_TRANSFORM_OPTION}}},{key:"base64Decode",value:function base64Decode(val){try{return Buffer.from(val,"base64").toString("utf8")}catch(e){return(0,_utils.asPrettyString)(val)}}},{key:"toTitleCase",value:function toTitleCase(val){return val.replace(/\w\S*/g,(function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()}))}}]);return StringFormat}(_field_format.FieldFormat);exports.StringFormat=StringFormat;_defineProperty(StringFormat,"id",_types2.FIELD_FORMAT_IDS.STRING);_defineProperty(StringFormat,"title",_i18n.i18n.translate("data.fieldFormats.string.title",{defaultMessage:"String"}));_defineProperty(StringFormat,"fieldType",[_types.KBN_FIELD_TYPES.NUMBER,_types.KBN_FIELD_TYPES.BOOLEAN,_types.KBN_FIELD_TYPES.DATE,_types.KBN_FIELD_TYPES.IP,_types.KBN_FIELD_TYPES.ATTACHMENT,_types.KBN_FIELD_TYPES.GEO_POINT,_types.KBN_FIELD_TYPES.GEO_SHAPE,_types.KBN_FIELD_TYPES.STRING,_types.KBN_FIELD_TYPES.MURMUR3,_types.KBN_FIELD_TYPES.UNKNOWN,_types.KBN_FIELD_TYPES.CONFLICT]);_defineProperty(StringFormat,"transformOptions",TRANSFORM_OPTIONS)}).call(this,__webpack_require__(217).Buffer)},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.shortenDottedString=shortenDottedString;var DOT_PREFIX_RE=/(.).+?\./g;function shortenDottedString(input){return typeof input!=="string"?input:input.replace(DOT_PREFIX_RE,"$1.")}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}Object.defineProperty(exports,"__esModule",{value:true});exports.toPromise=toPromise;exports.getCombinedSignal=getCombinedSignal;exports.AbortError=void 0;var AbortError=function(_Error){_inherits(AbortError,_Error);function AbortError(){var _this;var message=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"Aborted";_classCallCheck(this,AbortError);_this=_possibleConstructorReturn(this,_getPrototypeOf(AbortError).call(this,message));_this.message=message;_this.name="AbortError";return _this}return AbortError}(_wrapNativeSuper(Error));exports.AbortError=AbortError;function toPromise(signal){var shouldReject=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return new Promise((function(resolve,reject){var action=shouldReject?reject:resolve;if(signal.aborted)action();signal.addEventListener("abort",action)}))}function getCombinedSignal(signals){var promises=signals.map((function(signal){return toPromise(signal)}));var controller=new AbortController;Promise.race(promises).then((function(){return controller.abort()}));return controller.signal}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.SourceFormat=void 0;var _lodash=__webpack_require__(49);var _utils=__webpack_require__(146);var _types=__webpack_require__(79);var _field_format=__webpack_require__(78);var _types2=__webpack_require__(71);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function noWhiteSpace(html){var TAGS_WITH_WS=/>\s+</g;return html.replace(TAGS_WITH_WS,"><")}var templateHtml="\n  <dl class=\"source truncate-by-height\">\n    <% defPairs.forEach(function (def) { %>\n      <dt><%- def[0] %>:</dt>\n      <dd><%= def[1] %></dd>\n      <%= ' ' %>\n    <% }); %>\n  </dl>";var doTemplate=(0,_lodash.template)(noWhiteSpace(templateHtml));var SourceFormat=function(_field_format$FieldFo){_inherits(SourceFormat,_field_format$FieldFo);function SourceFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,SourceFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SourceFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(value){return JSON.stringify(value)}));_defineProperty(_assertThisInitialized(_this),"htmlConvert",(function(value){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var field=options.field,hit=options.hit;if(!field){var converter=_this.getConverterFor("text");return(0,_lodash.escape)(converter(value))}var highlights=hit&&hit.highlight||{};var formatted=field.indexPattern.formatHit(hit);var highlightPairs=[];var sourcePairs=[];var isShortDots=_this.getConfig("shortDots:enable");(0,_lodash.keys)(formatted).forEach((function(key){var pairs=highlights[key]?highlightPairs:sourcePairs;var newField=isShortDots?(0,_utils.shortenDottedString)(key):key;var val=formatted[key];pairs.push([newField,val])}),[]);return doTemplate({defPairs:highlightPairs.concat(sourcePairs)})}));return _this}return SourceFormat}(_field_format.FieldFormat);exports.SourceFormat=SourceFormat;_defineProperty(SourceFormat,"id",_types2.FIELD_FORMAT_IDS._SOURCE);_defineProperty(SourceFormat,"title","_source");_defineProperty(SourceFormat,"fieldType",_types.KBN_FIELD_TYPES._SOURCE)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.ColorFormat=void 0;var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(49);var _types=__webpack_require__(79);var _field_format=__webpack_require__(78);var _types2=__webpack_require__(71);var _utils=__webpack_require__(123);var _color_default=__webpack_require__(299);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var convertTemplate=(0,_lodash.template)('<span style="<%- style %>"><%- val %></span>');var ColorFormat=function(_field_format$FieldFo){_inherits(ColorFormat,_field_format$FieldFo);function ColorFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,ColorFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ColorFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"htmlConvert",(function(val){var color=_this.findColorRuleForVal(val);if(!color)return(0,_lodash.escape)((0,_utils.asPrettyString)(val));var style="";if(color.text)style+="color: ".concat(color.text,";");if(color.background)style+="background-color: ".concat(color.background,";");return convertTemplate({val:val,style:style})}));return _this}_createClass(ColorFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{fieldType:null,colors:[(0,_lodash.cloneDeep)(_color_default.DEFAULT_CONVERTER_COLOR)]}}},{key:"findColorRuleForVal",value:function findColorRuleForVal(val){switch(this.param("fieldType")){case"string":return(0,_lodash.findLast)(this.param("colors"),(function(colorParam){return new RegExp(colorParam.regex).test(val)}));case"number":return(0,_lodash.findLast)(this.param("colors"),(function(_ref){var range=_ref.range;if(!range)return;var _range$split=range.split(":"),_range$split2=_slicedToArray(_range$split,2),start=_range$split2[0],end=_range$split2[1];return val>=Number(start)&&val<=Number(end)}));default:return null}}}]);return ColorFormat}(_field_format.FieldFormat);exports.ColorFormat=ColorFormat;_defineProperty(ColorFormat,"id",_types2.FIELD_FORMAT_IDS.COLOR);_defineProperty(ColorFormat,"title",_i18n.i18n.translate("data.fieldFormats.color.title",{defaultMessage:"Color"}));_defineProperty(ColorFormat,"fieldType",[_types.KBN_FIELD_TYPES.NUMBER,_types.KBN_FIELD_TYPES.STRING])},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.TruncateFormat=void 0;var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(49);var _types=__webpack_require__(79);var _field_format=__webpack_require__(78);var _types2=__webpack_require__(71);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var omission="...";var TruncateFormat=function(_field_format$FieldFo){_inherits(TruncateFormat,_field_format$FieldFo);function TruncateFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,TruncateFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TruncateFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){var length=_this.param("fieldLength");if(length>0){return(0,_lodash.trunc)(val,{length:length+omission.length,omission:omission})}return val}));return _this}return TruncateFormat}(_field_format.FieldFormat);exports.TruncateFormat=TruncateFormat;_defineProperty(TruncateFormat,"id",_types2.FIELD_FORMAT_IDS.TRUNCATE);_defineProperty(TruncateFormat,"title",_i18n.i18n.translate("data.fieldFormats.truncated_string.title",{defaultMessage:"Truncated string"}));_defineProperty(TruncateFormat,"fieldType",_types.KBN_FIELD_TYPES.STRING)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.BoolFormat=void 0;var _i18n=__webpack_require__(1);var _types=__webpack_require__(79);var _field_format=__webpack_require__(78);var _types2=__webpack_require__(71);var _utils=__webpack_require__(123);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var BoolFormat=function(_field_format$FieldFo){_inherits(BoolFormat,_field_format$FieldFo);function BoolFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,BoolFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(BoolFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(value){if(typeof value==="string"){value=value.trim().toLowerCase()}switch(value){case false:case 0:case"false":case"no":return"false";case true:case 1:case"true":case"yes":return"true";default:return(0,_utils.asPrettyString)(value)}}));return _this}return BoolFormat}(_field_format.FieldFormat);exports.BoolFormat=BoolFormat;_defineProperty(BoolFormat,"id",_types2.FIELD_FORMAT_IDS.BOOLEAN);_defineProperty(BoolFormat,"title",_i18n.i18n.translate("data.fieldFormats.boolean.title",{defaultMessage:"Boolean"}));_defineProperty(BoolFormat,"fieldType",[_types.KBN_FIELD_TYPES.BOOLEAN,_types.KBN_FIELD_TYPES.NUMBER,_types.KBN_FIELD_TYPES.STRING])},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.StaticLookupFormat=void 0;var _i18n=__webpack_require__(1);var _types=__webpack_require__(79);var _field_format=__webpack_require__(78);var _types2=__webpack_require__(71);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function convertLookupEntriesToMap(lookupEntries){return lookupEntries.reduce((function(lookupMap,lookupEntry){lookupMap[lookupEntry.key]=lookupEntry.value;return lookupMap}),{})}var StaticLookupFormat=function(_field_format$FieldFo){_inherits(StaticLookupFormat,_field_format$FieldFo);function StaticLookupFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,StaticLookupFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(StaticLookupFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"textConvert",(function(val){var lookupEntries=_this.param("lookupEntries");var unknownKeyValue=_this.param("unknownKeyValue");var lookupMap=convertLookupEntriesToMap(lookupEntries);return lookupMap[val]||unknownKeyValue||val}));return _this}_createClass(StaticLookupFormat,[{key:"getParamDefaults",value:function getParamDefaults(){return{lookupEntries:[{}],unknownKeyValue:null}}}]);return StaticLookupFormat}(_field_format.FieldFormat);exports.StaticLookupFormat=StaticLookupFormat;_defineProperty(StaticLookupFormat,"id",_types2.FIELD_FORMAT_IDS.STATIC_LOOKUP);_defineProperty(StaticLookupFormat,"title",_i18n.i18n.translate("data.fieldFormats.static_lookup.title",{defaultMessage:"Static lookup"}));_defineProperty(StaticLookupFormat,"fieldType",[_types.KBN_FIELD_TYPES.STRING,_types.KBN_FIELD_TYPES.NUMBER,_types.KBN_FIELD_TYPES.IP,_types.KBN_FIELD_TYPES.BOOLEAN])},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _fields=__webpack_require__(615);Object.keys(_fields).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _fields[key]}})}));var _types=__webpack_require__(302);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={isFilterable:true,isNestedField:true};Object.defineProperty(exports,"isFilterable",{enumerable:true,get:function get(){return _utils.isFilterable}});Object.defineProperty(exports,"isNestedField",{enumerable:true,get:function get(){return _utils.isNestedField}});var _types=__webpack_require__(616);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _utils=__webpack_require__(617)},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isFilterable=isFilterable;exports.isNestedField=isNestedField;var _kbn_field_types=__webpack_require__(300);var filterableTypes=(0,_kbn_field_types.getFilterableKbnTypeNames)();function isFilterable(field){return field.name==="_id"||field.scripted||Boolean(field.searchable&&filterableTypes.includes(field.type))}function isNestedField(field){var _field$subType;return!!((_field$subType=field.subType)===null||_field$subType===void 0?void 0:_field$subType.nested)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFilterableKbnTypeNames=exports.castEsToKbnFieldTypeName=exports.getKbnTypeNames=exports.getKbnFieldType=void 0;var _kbn_field_types_factory=__webpack_require__(619);var _types=__webpack_require__(79);var registeredKbnTypes=(0,_kbn_field_types_factory.createKbnFieldTypes)();var getKbnFieldType=function getKbnFieldType(typeName){return registeredKbnTypes.find((function(t){return t.name===typeName}))};exports.getKbnFieldType=getKbnFieldType;var getKbnTypeNames=function getKbnTypeNames(){return registeredKbnTypes.filter((function(type){return type.name})).map((function(type){return type.name}))};exports.getKbnTypeNames=getKbnTypeNames;var castEsToKbnFieldTypeName=function castEsToKbnFieldTypeName(esType){var type=registeredKbnTypes.find((function(t){return t.esTypes.includes(esType)}));return type&&type.name?type.name:_types.KBN_FIELD_TYPES.UNKNOWN};exports.castEsToKbnFieldTypeName=castEsToKbnFieldTypeName;var getFilterableKbnTypeNames=function getFilterableKbnTypeNames(){return registeredKbnTypes.filter((function(type){return type.filterable})).map((function(type){return type.name}))};exports.getFilterableKbnTypeNames=getFilterableKbnTypeNames},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createKbnFieldTypes=void 0;var _kbn_field_type=__webpack_require__(301);var _types=__webpack_require__(79);var createKbnFieldTypes=function createKbnFieldTypes(){return[new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.STRING,sortable:true,filterable:true,esTypes:[_types.ES_FIELD_TYPES.STRING,_types.ES_FIELD_TYPES.TEXT,_types.ES_FIELD_TYPES.KEYWORD,_types.ES_FIELD_TYPES._TYPE,_types.ES_FIELD_TYPES._ID]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.NUMBER,sortable:true,filterable:true,esTypes:[_types.ES_FIELD_TYPES.FLOAT,_types.ES_FIELD_TYPES.HALF_FLOAT,_types.ES_FIELD_TYPES.SCALED_FLOAT,_types.ES_FIELD_TYPES.DOUBLE,_types.ES_FIELD_TYPES.INTEGER,_types.ES_FIELD_TYPES.LONG,_types.ES_FIELD_TYPES.SHORT,_types.ES_FIELD_TYPES.BYTE,_types.ES_FIELD_TYPES.TOKEN_COUNT]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.DATE,sortable:true,filterable:true,esTypes:[_types.ES_FIELD_TYPES.DATE,_types.ES_FIELD_TYPES.DATE_NANOS]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.IP,sortable:true,filterable:true,esTypes:[_types.ES_FIELD_TYPES.IP]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.BOOLEAN,sortable:true,filterable:true,esTypes:[_types.ES_FIELD_TYPES.BOOLEAN]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.OBJECT,esTypes:[_types.ES_FIELD_TYPES.OBJECT]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.NESTED,esTypes:[_types.ES_FIELD_TYPES.NESTED]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.GEO_POINT,esTypes:[_types.ES_FIELD_TYPES.GEO_POINT]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.GEO_SHAPE,esTypes:[_types.ES_FIELD_TYPES.GEO_SHAPE]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.ATTACHMENT,esTypes:[_types.ES_FIELD_TYPES.ATTACHMENT]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.MURMUR3,esTypes:[_types.ES_FIELD_TYPES.MURMUR3]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES._SOURCE,esTypes:[_types.ES_FIELD_TYPES._SOURCE]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.HISTOGRAM,filterable:true,esTypes:[_types.ES_FIELD_TYPES.HISTOGRAM]}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.CONFLICT}),new _kbn_field_type.KbnFieldType({name:_types.KBN_FIELD_TYPES.UNKNOWN})]};exports.createKbnFieldTypes=createKbnFieldTypes},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _filter_manager=__webpack_require__(621);Object.keys(_filter_manager).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _filter_manager[key]}})}));var _types=__webpack_require__(305);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"dedupFilters",{enumerable:true,get:function get(){return _dedup_filters.dedupFilters}});Object.defineProperty(exports,"uniqFilters",{enumerable:true,get:function get(){return _uniq_filters.uniqFilters}});Object.defineProperty(exports,"compareFilters",{enumerable:true,get:function get(){return _compare_filters.compareFilters}});Object.defineProperty(exports,"COMPARE_ALL_OPTIONS",{enumerable:true,get:function get(){return _compare_filters.COMPARE_ALL_OPTIONS}});Object.defineProperty(exports,"FilterCompareOptions",{enumerable:true,get:function get(){return _compare_filters.FilterCompareOptions}});var _dedup_filters=__webpack_require__(303);var _uniq_filters=__webpack_require__(622);var _compare_filters=__webpack_require__(304)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.uniqFilters=void 0;var _lodash=__webpack_require__(49);var _dedup_filters=__webpack_require__(303);var uniqFilters=function uniqFilters(filters){var comparatorOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var results=[];(0,_lodash.each)(filters,(function(filter){results=(0,_lodash.union)(results,(0,_dedup_filters.dedupFilters)(results,[filter]),comparatorOptions)}));return results};exports.uniqFilters=uniqFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ES_SEARCH_STRATEGY=void 0;var ES_SEARCH_STRATEGY="es";exports.ES_SEARCH_STRATEGY=ES_SEARCH_STRATEGY},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _date_interval_utils=__webpack_require__(626);Object.keys(_date_interval_utils).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _date_interval_utils[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _date_histogram_interval=__webpack_require__(627);Object.keys(_date_histogram_interval).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _date_histogram_interval[key]}})}));var _invalid_es_calendar_interval_error=__webpack_require__(307);Object.keys(_invalid_es_calendar_interval_error).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _invalid_es_calendar_interval_error[key]}})}));var _invalid_es_interval_format_error=__webpack_require__(308);Object.keys(_invalid_es_interval_format_error).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _invalid_es_interval_format_error[key]}})}));var _is_valid_es_interval=__webpack_require__(309);Object.keys(_is_valid_es_interval).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _is_valid_es_interval[key]}})}));var _is_valid_interval=__webpack_require__(628);Object.keys(_is_valid_interval).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _is_valid_interval[key]}})}));var _parse_interval=__webpack_require__(631);Object.keys(_parse_interval).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _parse_interval[key]}})}));var _parse_es_interval=__webpack_require__(170);Object.keys(_parse_es_interval).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _parse_es_interval[key]}})}));var _to_absolute_dates=__webpack_require__(632);Object.keys(_to_absolute_dates).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _to_absolute_dates[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dateHistogramInterval=dateHistogramInterval;var _parse_es_interval=__webpack_require__(170);function dateHistogramInterval(interval){var _ref=(0,_parse_es_interval.parseEsInterval)(interval),type=_ref.type;if(type==="calendar"){return{calendar_interval:interval}}else{return{fixed_interval:interval}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isValidInterval=isValidInterval;var _is_valid_es_interval=__webpack_require__(309);var _least_common_interval=__webpack_require__(629);function _parseWithBase(value,baseInterval){try{var interval=(0,_least_common_interval.leastCommonInterval)(baseInterval,value);return interval===value.replace(/\s/g,"")}catch(e){return false}}function isValidInterval(value,baseInterval){if(baseInterval){return _parseWithBase(value,baseInterval)}else{return(0,_is_valid_es_interval.isValidEsInterval)(value)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.leastCommonInterval=leastCommonInterval;var _datemath=_interopRequireDefault(__webpack_require__(95));var _least_common_multiple=__webpack_require__(630);var _parse_es_interval=__webpack_require__(170);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function leastCommonInterval(a,b){var _datemath$default=_datemath.default,unitsMap=_datemath$default.unitsMap,unitsDesc=_datemath$default.unitsDesc;var aInt=(0,_parse_es_interval.parseEsInterval)(a);var bInt=(0,_parse_es_interval.parseEsInterval)(b);if(a===b){return a}var aUnit=unitsMap[aInt.unit];var bUnit=unitsMap[bInt.unit];if(aInt.type!==bInt.type){throw Error("Incompatible intervals: ".concat(a," (").concat(aInt.type,"), ").concat(b," (").concat(bInt.type,")"))}if(aInt.type==="calendar"||bInt.type==="calendar"){return aUnit.weight>bUnit.weight?"".concat(aInt.value).concat(aInt.unit):"".concat(bInt.value).concat(bInt.unit)}var aMs=aInt.value*aUnit.base;var bMs=bInt.value*bUnit.base;var lcmMs=(0,_least_common_multiple.leastCommonMultiple)(aMs,bMs);if(lcmMs===bMs){return b.replace(/\s/g,"")}if(lcmMs===aMs){return a.replace(/\s/g,"")}var lcmUnit=unitsDesc.find((function(unit){var unitInfo=unitsMap[unit];return!!(unitInfo.type!=="calendar"&&lcmMs%unitInfo.base===0)}));if(!lcmUnit){throw Error("Unable to find common interval for: ".concat(a,", ").concat(b))}return"".concat(lcmMs/unitsMap[lcmUnit].base).concat(lcmUnit)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.leastCommonMultiple=leastCommonMultiple;function greatestCommonDivisor(a,b){return a===0?Math.abs(b):greatestCommonDivisor(b%a,a)}function leastCommonMultiple(a,b){return Math.abs(a*b/greatestCommonDivisor(a,b))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseInterval=parseInterval;var _lodash=__webpack_require__(49);var _moment=_interopRequireDefault(__webpack_require__(32));var _datemath=_interopRequireDefault(__webpack_require__(95));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var INTERVAL_STRING_RE=new RegExp("^([0-9\\.]*)\\s*("+_datemath.default.units.join("|")+")$");function parseInterval(interval){var matches=String(interval).trim().match(INTERVAL_STRING_RE);if(!matches)return null;try{var value=parseFloat(matches[1])||1;var unit=matches[2];var duration=_moment.default.duration(value,unit);var selectedUnit=(0,_lodash.find)(_datemath.default.units,(function(u){return Math.abs(duration.as(u))>=1}));if(_datemath.default.units.indexOf(selectedUnit)<_datemath.default.units.indexOf(unit)){return duration}return _moment.default.duration(duration.as(selectedUnit),selectedUnit)}catch(e){return null}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toAbsoluteDates=toAbsoluteDates;var _datemath=_interopRequireDefault(__webpack_require__(95));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function toAbsoluteDates(range){var fromDate=_datemath.default.parse(range.from);var toDate=_datemath.default.parse(range.to,{roundUp:true});if(!fromDate||!toDate){return}return{from:fromDate.toDate(),to:toDate.toDate()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={TextContextTypeConvert:true,IFieldFormatMetaParams:true};Object.defineProperty(exports,"TextContextTypeConvert",{enumerable:true,get:function get(){return _types5.TextContextTypeConvert}});Object.defineProperty(exports,"IFieldFormatMetaParams",{enumerable:true,get:function get(){return _types5.IFieldFormatMetaParams}});var _types=__webpack_require__(634);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}));var _types2=__webpack_require__(305);Object.keys(_types2).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types2[key]}})}));var _types3=__webpack_require__(79);Object.keys(_types3).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types3[key]}})}));var _types4=__webpack_require__(302);Object.keys(_types4).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types4[key]}})}));var _types5=__webpack_require__(71)},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBar=void 0;var _eui=__webpack_require__(29);var _react=__webpack_require__(30);var _classnames=_interopRequireDefault(__webpack_require__(87));var _react2=_interopRequireWildcard(__webpack_require__(28));var _filter_editor=__webpack_require__(310);var _filter_item=__webpack_require__(639);var _filter_options=__webpack_require__(641);var _public=__webpack_require__(31);var _common=__webpack_require__(52);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function FilterBarUI(props){var _useState=(0,_react2.useState)(false),_useState2=_slicedToArray(_useState,2),isAddFilterPopoverOpen=_useState2[0],setIsAddFilterPopoverOpen=_useState2[1];var kibana=(0,_public.useKibana)();var uiSettings=kibana.services.uiSettings;if(!uiSettings)return null;function onFiltersUpdated(filters){if(props.onFiltersUpdated){props.onFiltersUpdated(filters)}}function renderItems(){return props.filters.map((function(filter,i){return _react2.default.createElement(_eui.EuiFlexItem,{key:i,grow:false,className:"globalFilterBar__flexItem"},_react2.default.createElement(_filter_item.FilterItem,{id:"".concat(i),filter:filter,onUpdate:function onUpdate(newFilter){return _onUpdate(i,newFilter)},onRemove:function onRemove(){return _onRemove(i)},indexPatterns:props.indexPatterns,uiSettings:uiSettings}))}))}function renderAddFilter(){var isPinned=uiSettings.get("filters:pinnedByDefault");var _props$indexPatterns=_slicedToArray(props.indexPatterns,1),indexPattern=_props$indexPatterns[0];var index=indexPattern&&indexPattern.id;var newFilter=(0,_common.buildEmptyFilter)(isPinned,index);var button=_react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:function onClick(){return setIsAddFilterPopoverOpen(true)},"data-test-subj":"addFilter",className:"globalFilterBar__addButton"},"+"," ",_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterBar.addFilterButtonLabel",defaultMessage:"Add filter"}));return _react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiPopover,{id:"addFilterPopover",button:button,isOpen:isAddFilterPopoverOpen,closePopover:function closePopover(){return setIsAddFilterPopoverOpen(false)},anchorPosition:"downLeft",withTitle:true,panelPaddingSize:"none",ownFocus:true,initialFocus:".filterEditor__hiddenItem"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement("div",{style:{width:400}},_react2.default.createElement(_filter_editor.FilterEditor,{filter:newFilter,indexPatterns:props.indexPatterns,onSubmit:onAdd,onCancel:function onCancel(){return setIsAddFilterPopoverOpen(false)},key:JSON.stringify(newFilter)})))))}function onAdd(filter){setIsAddFilterPopoverOpen(false);var filters=[].concat(_toConsumableArray(props.filters),[filter]);onFiltersUpdated(filters)}function _onRemove(i){var filters=_toConsumableArray(props.filters);filters.splice(i,1);onFiltersUpdated(filters)}function _onUpdate(i,filter){var filters=_toConsumableArray(props.filters);filters[i]=filter;onFiltersUpdated(filters)}function onEnableAll(){var filters=props.filters.map(_common.enableFilter);onFiltersUpdated(filters)}function onDisableAll(){var filters=props.filters.map(_common.disableFilter);onFiltersUpdated(filters)}function onPinAll(){var filters=props.filters.map(_common.pinFilter);onFiltersUpdated(filters)}function onUnpinAll(){var filters=props.filters.map(_common.unpinFilter);onFiltersUpdated(filters)}function onToggleAllNegated(){var filters=props.filters.map(_common.toggleFilterNegated);onFiltersUpdated(filters)}function onToggleAllDisabled(){var filters=props.filters.map(_common.toggleFilterDisabled);onFiltersUpdated(filters)}function onRemoveAll(){onFiltersUpdated([])}var classes=(0,_classnames.default)("globalFilterBar",props.className);return _react2.default.createElement(_eui.EuiFlexGroup,{className:"globalFilterGroup",gutterSize:"none",alignItems:"flexStart",responsive:false},_react2.default.createElement(_eui.EuiFlexItem,{className:"globalFilterGroup__branch",grow:false},_react2.default.createElement(_filter_options.FilterOptions,{onEnableAll:onEnableAll,onDisableAll:onDisableAll,onPinAll:onPinAll,onUnpinAll:onUnpinAll,onToggleAllNegated:onToggleAllNegated,onToggleAllDisabled:onToggleAllDisabled,onRemoveAll:onRemoveAll})),_react2.default.createElement(_eui.EuiFlexItem,{className:"globalFilterGroup__filterFlexItem"},_react2.default.createElement(_eui.EuiFlexGroup,{className:classes,wrap:true,responsive:false,gutterSize:"xs",alignItems:"center"},renderItems(),renderAddFilter())))}var FilterBar=(0,_react.injectI18n)(FilterBarUI);exports.FilterBar=FilterBar},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.PhraseValueInput=void 0;var _eui=__webpack_require__(29);var _react=__webpack_require__(30);var _lodash=__webpack_require__(49);var _react2=_interopRequireDefault(__webpack_require__(28));var _generic_combo_box=__webpack_require__(219);var _phrase_suggestor=__webpack_require__(313);var _value_input_type=__webpack_require__(314);var _public=__webpack_require__(31);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var PhraseValueInputUI=function(_PhraseSuggestorUI){_inherits(PhraseValueInputUI,_PhraseSuggestorUI);function PhraseValueInputUI(){_classCallCheck(this,PhraseValueInputUI);return _possibleConstructorReturn(this,_getPrototypeOf(PhraseValueInputUI).apply(this,arguments))}_createClass(PhraseValueInputUI,[{key:"render",value:function render(){return _react2.default.createElement(_eui.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.valueInputLabel",defaultMessage:"Value"})},this.isSuggestingValues()?this.renderWithSuggestions():_react2.default.createElement(_value_input_type.ValueInputType,{placeholder:this.props.intl.formatMessage({id:"data.filter.filterEditor.valueInputPlaceholder",defaultMessage:"Enter a value"}),value:this.props.value,onChange:this.props.onChange,type:this.props.field?this.props.field.type:"string"}))}},{key:"renderWithSuggestions",value:function renderWithSuggestions(){var suggestions=this.state.suggestions;var _this$props=this.props,value=_this$props.value,intl=_this$props.intl,_onChange=_this$props.onChange;var valueAsStr=String(value);var options=value?(0,_lodash.uniq)([valueAsStr].concat(_toConsumableArray(suggestions))):suggestions;return _react2.default.createElement(StringComboBox,{placeholder:intl.formatMessage({id:"data.filter.filterEditor.valueSelectPlaceholder",defaultMessage:"Select a value"}),options:options,getLabel:function getLabel(option){return option},selectedOptions:value?[valueAsStr]:[],onChange:function onChange(_ref){var _ref2=_slicedToArray(_ref,1),_ref2$=_ref2[0],newValue=_ref2$===void 0?"":_ref2$;return _onChange(newValue)},onSearchChange:this.onSearchChange,singleSelection:{asPlainText:true},onCreateOption:_onChange,isClearable:false,"data-test-subj":"filterParamsComboBox phraseParamsComboxBox"})}}]);return PhraseValueInputUI}(_phrase_suggestor.PhraseSuggestorUI);function StringComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}var PhraseValueInput=(0,_react.injectI18n)((0,_public.withKibana)(PhraseValueInputUI));exports.PhraseValueInput=PhraseValueInput},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.PhrasesValuesInput=void 0;var _eui=__webpack_require__(29);var _react=__webpack_require__(30);var _lodash=__webpack_require__(49);var _react2=_interopRequireDefault(__webpack_require__(28));var _generic_combo_box=__webpack_require__(219);var _phrase_suggestor=__webpack_require__(313);var _public=__webpack_require__(31);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var PhrasesValuesInputUI=function(_PhraseSuggestorUI){_inherits(PhrasesValuesInputUI,_PhraseSuggestorUI);function PhrasesValuesInputUI(){_classCallCheck(this,PhrasesValuesInputUI);return _possibleConstructorReturn(this,_getPrototypeOf(PhrasesValuesInputUI).apply(this,arguments))}_createClass(PhrasesValuesInputUI,[{key:"render",value:function render(){var suggestions=this.state.suggestions;var _this$props=this.props,values=_this$props.values,intl=_this$props.intl,onChange=_this$props.onChange;var options=values?(0,_lodash.uniq)([].concat(_toConsumableArray(values),_toConsumableArray(suggestions))):suggestions;return _react2.default.createElement(_eui.EuiFormRow,{label:intl.formatMessage({id:"data.filter.filterEditor.valuesSelectLabel",defaultMessage:"Values"})},_react2.default.createElement(StringComboBox,{placeholder:intl.formatMessage({id:"data.filter.filterEditor.valuesSelectPlaceholder",defaultMessage:"Select values"}),options:options,getLabel:function getLabel(option){return option},selectedOptions:values||[],onSearchChange:this.onSearchChange,onCreateOption:function onCreateOption(option){return onChange([].concat(_toConsumableArray(values||[]),[option]))},onChange:onChange,isClearable:false,"data-test-subj":"filterParamsComboBox phrasesParamsComboxBox"}))}}]);return PhrasesValuesInputUI}(_phrase_suggestor.PhraseSuggestorUI);function StringComboBox(props){return(0,_generic_combo_box.GenericComboBox)(props)}var PhrasesValuesInput=(0,_react.injectI18n)((0,_public.withKibana)(PhrasesValuesInputUI));exports.PhrasesValuesInput=PhrasesValuesInput},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RangeValueInput=void 0;var _eui=__webpack_require__(29);var _react=__webpack_require__(30);var _lodash=__webpack_require__(49);var _react2=_interopRequireDefault(__webpack_require__(28));var _public=__webpack_require__(31);var _value_input_type=__webpack_require__(314);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function RangeValueInputUI(props){var kibana=(0,_public.useKibana)();var dataMathDocLink=kibana.services.docLinks.links.date.dateMath;var type=props.field?props.field.type:"string";var onFromChange=function onFromChange(value){if(typeof value!=="string"&&typeof value!=="number"){throw new Error("Range params must be a string or number")}props.onChange({from:value,to:(0,_lodash.get)(props,"value.to")})};var onToChange=function onToChange(value){if(typeof value!=="string"&&typeof value!=="number"){throw new Error("Range params must be a string or number")}props.onChange({from:(0,_lodash.get)(props,"value.from"),to:value})};return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiFormControlLayoutDelimited,{"aria-label":props.intl.formatMessage({id:"data.filter.filterEditor.rangeInputLabel",defaultMessage:"Range"}),startControl:_react2.default.createElement(_value_input_type.ValueInputType,{controlOnly:true,type:type,value:props.value?props.value.from:undefined,onChange:onFromChange,placeholder:props.intl.formatMessage({id:"data.filter.filterEditor.rangeStartInputPlaceholder",defaultMessage:"Start of the range"})}),endControl:_react2.default.createElement(_value_input_type.ValueInputType,{controlOnly:true,type:type,value:props.value?props.value.to:undefined,onChange:onToChange,placeholder:props.intl.formatMessage({id:"data.filter.filterEditor.rangeEndInputPlaceholder",defaultMessage:"End of the range"})})}),type==="date"?_react2.default.createElement(_eui.EuiFormHelpText,null,_react2.default.createElement(_eui.EuiLink,{target:"_blank",href:dataMathDocLink},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.filterEditor.dateFormatHelpLinkLabel",defaultMessage:"Accepted date formats"})," ",_react2.default.createElement(_eui.EuiIcon,{type:"popout",size:"s"}))):"")}var RangeValueInput=(0,_react.injectI18n)(RangeValueInputUI);exports.RangeValueInput=RangeValueInput},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FilterItem=void 0;var _eui=__webpack_require__(29);var _react=__webpack_require__(30);var _classnames=_interopRequireDefault(__webpack_require__(87));var _react2=_interopRequireWildcard(__webpack_require__(28));var _filter_editor=__webpack_require__(310);var _filter_view=__webpack_require__(640);var _common=__webpack_require__(52);var _services=__webpack_require__(61);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterItemUI=function(_Component){_inherits(FilterItemUI,_Component);function FilterItemUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,FilterItemUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(FilterItemUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"handleBadgeClick",(function(e){if(e.shiftKey){_this.onToggleDisabled()}else{_this.togglePopover()}}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({isPopoverOpen:false})}));_defineProperty(_assertThisInitialized(_this),"togglePopover",(function(){_this.setState({isPopoverOpen:!_this.state.isPopoverOpen})}));_defineProperty(_assertThisInitialized(_this),"onSubmit",(function(filter){_this.closePopover();_this.props.onUpdate(filter)}));_defineProperty(_assertThisInitialized(_this),"onTogglePinned",(function(){var filter=(0,_common.toggleFilterPinned)(_this.props.filter);_this.props.onUpdate(filter)}));_defineProperty(_assertThisInitialized(_this),"onToggleNegated",(function(){var filter=(0,_common.toggleFilterNegated)(_this.props.filter);_this.props.onUpdate(filter)}));_defineProperty(_assertThisInitialized(_this),"onToggleDisabled",(function(){var filter=(0,_common.toggleFilterDisabled)(_this.props.filter);_this.props.onUpdate(filter)}));return _this}_createClass(FilterItemUI,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,filter=_this$props.filter,id=_this$props.id;var _filter$meta=filter.meta,negate=_filter$meta.negate,disabled=_filter$meta.disabled;var hasError=false;var valueLabel;try{valueLabel=(0,_common.getDisplayValueFromFilter)(filter,this.props.indexPatterns)}catch(e){(0,_services.getNotifications)().toasts.addError(e,{title:this.props.intl.formatMessage({id:"data.filter.filterBar.labelErrorMessage",defaultMessage:"Failed to display filter"})});valueLabel=this.props.intl.formatMessage({id:"data.filter.filterBar.labelErrorText",defaultMessage:"Error"});hasError=true}var dataTestSubjKey=filter.meta.key?"filter-key-".concat(filter.meta.key):"";var dataTestSubjValue=filter.meta.value?"filter-value-".concat(valueLabel):"";var dataTestSubjDisabled="filter-".concat(this.props.filter.meta.disabled?"disabled":"enabled");var dataTestSubjPinned="filter-".concat((0,_common.isFilterPinned)(filter)?"pinned":"unpinned");var classes=(0,_classnames.default)("globalFilterItem",{"globalFilterItem-isDisabled":disabled||hasError,"globalFilterItem-isInvalid":hasError,"globalFilterItem-isPinned":(0,_common.isFilterPinned)(filter),"globalFilterItem-isExcluded":negate},this.props.className);var badge=_react2.default.createElement(_filter_view.FilterView,{filter:filter,valueLabel:valueLabel,className:classes,iconOnClick:function iconOnClick(){return _this2.props.onRemove()},onClick:this.handleBadgeClick,"data-test-subj":"filter ".concat(dataTestSubjDisabled," ").concat(dataTestSubjKey," ").concat(dataTestSubjValue," ").concat(dataTestSubjPinned)});var panelTree=[{id:0,items:[{name:(0,_common.isFilterPinned)(filter)?this.props.intl.formatMessage({id:"data.filter.filterBar.unpinFilterButtonLabel",defaultMessage:"Unpin"}):this.props.intl.formatMessage({id:"data.filter.filterBar.pinFilterButtonLabel",defaultMessage:"Pin across all apps"}),icon:"pin",onClick:function onClick(){_this2.closePopover();_this2.onTogglePinned()},"data-test-subj":"pinFilter"},{name:this.props.intl.formatMessage({id:"data.filter.filterBar.editFilterButtonLabel",defaultMessage:"Edit filter"}),icon:"pencil",panel:1,"data-test-subj":"editFilter"},{name:negate?this.props.intl.formatMessage({id:"data.filter.filterBar.includeFilterButtonLabel",defaultMessage:"Include results"}):this.props.intl.formatMessage({id:"data.filter.filterBar.excludeFilterButtonLabel",defaultMessage:"Exclude results"}),icon:negate?"plusInCircle":"minusInCircle",onClick:function onClick(){_this2.closePopover();_this2.onToggleNegated()},"data-test-subj":"negateFilter"},{name:disabled?this.props.intl.formatMessage({id:"data.filter.filterBar.enableFilterButtonLabel",defaultMessage:"Re-enable"}):this.props.intl.formatMessage({id:"data.filter.filterBar.disableFilterButtonLabel",defaultMessage:"Temporarily disable"}),icon:"".concat(disabled?"eye":"eyeClosed"),onClick:function onClick(){_this2.closePopover();_this2.onToggleDisabled()},"data-test-subj":"disableFilter"},{name:this.props.intl.formatMessage({id:"data.filter.filterBar.deleteFilterButtonLabel",defaultMessage:"Delete"}),icon:"trash",onClick:function onClick(){_this2.closePopover();_this2.props.onRemove()},"data-test-subj":"deleteFilter"}]},{id:1,width:420,content:_react2.default.createElement("div",null,_react2.default.createElement(_filter_editor.FilterEditor,{filter:filter,indexPatterns:this.props.indexPatterns,onSubmit:this.onSubmit,onCancel:this.closePopover}))}];return _react2.default.createElement(_eui.EuiPopover,{id:"popoverFor_filter".concat(id),className:"globalFilterItem__popover",anchorClassName:"globalFilterItem__popoverAnchor",isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,button:badge,anchorPosition:"downLeft",withTitle:true,panelPaddingSize:"none"},_react2.default.createElement(_eui.EuiContextMenu,{initialPanelId:0,panels:panelTree}))}}]);return FilterItemUI}(_react2.Component);var FilterItem=(0,_react.injectI18n)(FilterItemUI);exports.FilterItem=FilterItem},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterView=void 0;var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(28));var _filter_label=__webpack_require__(315);var _common=__webpack_require__(52);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var FilterView=function FilterView(_ref){var filter=_ref.filter,iconOnClick=_ref.iconOnClick,onClick=_ref.onClick,valueLabel=_ref.valueLabel,rest=_objectWithoutProperties(_ref,["filter","iconOnClick","onClick","valueLabel"]);var _useInnerText=(0,_eui.useInnerText)(),_useInnerText2=_slicedToArray(_useInnerText,2),ref=_useInnerText2[0],innerText=_useInnerText2[1];var title=_i18n.i18n.translate("data.filter.filterBar.moreFilterActionsMessage",{defaultMessage:"Filter: {innerText}. Select for more filter actions.",values:{innerText:innerText}});if((0,_common.isFilterPinned)(filter)){title="".concat(_i18n.i18n.translate("data.filter.filterBar.pinnedFilterPrefix",{defaultMessage:"Pinned"})," ").concat(title)}if(filter.meta.disabled){title="".concat(_i18n.i18n.translate("data.filter.filterBar.disabledFilterPrefix",{defaultMessage:"Disabled"})," ").concat(title)}return _react.default.createElement(_eui.EuiBadge,_extends({title:title,color:"hollow",iconType:"cross",iconSide:"right",closeButtonProps:{tabIndex:-1},iconOnClick:iconOnClick,iconOnClickAriaLabel:_i18n.i18n.translate("data.filter.filterBar.filterItemBadgeIconAriaLabel",{defaultMessage:"Delete"}),onClick:onClick,onClickAriaLabel:_i18n.i18n.translate("data.filter.filterBar.filterItemBadgeAriaLabel",{defaultMessage:"Filter actions"})},rest),_react.default.createElement("span",{ref:ref},_react.default.createElement(_filter_label.FilterLabel,{filter:filter,valueLabel:valueLabel})))};exports.FilterView=FilterView},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FilterOptions=void 0;var _eui=__webpack_require__(29);var _react=__webpack_require__(30);var _react2=_interopRequireWildcard(__webpack_require__(28));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterOptionsUI=function(_Component){_inherits(FilterOptionsUI,_Component);function FilterOptionsUI(){var _getPrototypeOf2;var _this;_classCallCheck(this,FilterOptionsUI);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(FilterOptionsUI)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"togglePopover",(function(){_this.setState((function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}}))}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({isPopoverOpen:false})}));return _this}_createClass(FilterOptionsUI,[{key:"render",value:function render(){var _this2=this;var panelTree={id:0,items:[{name:this.props.intl.formatMessage({id:"data.filter.options.enableAllFiltersButtonLabel",defaultMessage:"Enable all"}),icon:"eye",onClick:function onClick(){_this2.closePopover();_this2.props.onEnableAll()},"data-test-subj":"enableAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.disableAllFiltersButtonLabel",defaultMessage:"Disable all"}),icon:"eyeClosed",onClick:function onClick(){_this2.closePopover();_this2.props.onDisableAll()},"data-test-subj":"disableAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.pinAllFiltersButtonLabel",defaultMessage:"Pin all"}),icon:"pin",onClick:function onClick(){_this2.closePopover();_this2.props.onPinAll()},"data-test-subj":"pinAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.unpinAllFiltersButtonLabel",defaultMessage:"Unpin all"}),icon:"pin",onClick:function onClick(){_this2.closePopover();_this2.props.onUnpinAll()},"data-test-subj":"unpinAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.invertNegatedFiltersButtonLabel",defaultMessage:"Invert inclusion"}),icon:"invert",onClick:function onClick(){_this2.closePopover();_this2.props.onToggleAllNegated()},"data-test-subj":"invertInclusionAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.invertDisabledFiltersButtonLabel",defaultMessage:"Invert enabled/disabled"}),icon:"eye",onClick:function onClick(){_this2.closePopover();_this2.props.onToggleAllDisabled()},"data-test-subj":"invertEnableDisableAllFilters"},{name:this.props.intl.formatMessage({id:"data.filter.options.deleteAllFiltersButtonLabel",defaultMessage:"Remove all"}),icon:"trash",onClick:function onClick(){_this2.closePopover();_this2.props.onRemoveAll()},"data-test-subj":"removeAllFilters"}]};return _react2.default.createElement(_eui.EuiPopover,{id:"popoverForAllFilters",className:"globalFilterGroup__allFiltersPopover",isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,button:_react2.default.createElement(_eui.EuiButtonIcon,{onClick:this.togglePopover,iconType:"filter","aria-label":this.props.intl.formatMessage({id:"data.filter.options.changeAllFiltersButtonLabel",defaultMessage:"Change all filters"}),title:this.props.intl.formatMessage({id:"data.filter.options.changeAllFiltersButtonLabel",defaultMessage:"Change all filters"}),"data-test-subj":"showFilterActions"}),anchorPosition:"rightUp",panelPaddingSize:"none",withTitle:true},_react2.default.createElement(_eui.EuiPopoverTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.searchBar.changeAllFiltersTitle",defaultMessage:"Change all filters"})),_react2.default.createElement(_eui.EuiContextMenu,{initialPanelId:0,panels:[panelTree]}))}}]);return FilterOptionsUI}(_react2.Component);var FilterOptions=(0,_react.injectI18n)(FilterOptionsUI);exports.FilterOptions=FilterOptions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _match_pairs=__webpack_require__(643);Object.keys(_match_pairs).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _match_pairs[key]}})}));var _from_user=__webpack_require__(644);Object.keys(_from_user).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _from_user[key]}})}));var _to_user=__webpack_require__(645);Object.keys(_to_user).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _to_user[key]}})}));var _get_query_log=__webpack_require__(646);Object.keys(_get_query_log).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_query_log[key]}})}));var _get_default_query=__webpack_require__(648);Object.keys(_get_default_query).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_default_query[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.matchPairs=matchPairs;var pairs=["()","[]","{}","''",'""'];var openers=pairs.map((function(pair){return pair[0]}));var closers=pairs.map((function(pair){return pair[1]}));function matchPairs(_ref){var value=_ref.value,selectionStart=_ref.selectionStart,selectionEnd=_ref.selectionEnd,key=_ref.key,metaKey=_ref.metaKey,updateQuery=_ref.updateQuery,preventDefault=_ref.preventDefault;if(shouldMoveCursorForward(key,value,selectionStart,selectionEnd)){preventDefault();updateQuery(value,selectionStart+1,selectionEnd+1)}else if(shouldInsertMatchingCloser(key,value,selectionStart,selectionEnd)){preventDefault();var newValue=value.substr(0,selectionStart)+key+value.substring(selectionStart,selectionEnd)+closers[openers.indexOf(key)]+value.substr(selectionEnd);updateQuery(newValue,selectionStart+1,selectionEnd+1)}else if(shouldRemovePair(key,metaKey,value,selectionStart,selectionEnd)){preventDefault();var _newValue=value.substr(0,selectionEnd-1)+value.substr(selectionEnd+1);updateQuery(_newValue,selectionStart-1,selectionEnd-1)}}function shouldMoveCursorForward(key,value,selectionStart,selectionEnd){if(!closers.includes(key)){return false}if(selectionStart!==selectionEnd){return false}return value.charAt(selectionEnd)===key}function shouldInsertMatchingCloser(key,value,selectionStart,selectionEnd){if(!openers.includes(key)){return false}if(selectionStart!==selectionEnd){return true}var precedingCharacter=value.charAt(selectionStart-1);var followingCharacter=value.charAt(selectionStart+1);if(precedingCharacter==="\\"){return false}return!(['"',"'"].includes(key)&&(isAlphanumeric(precedingCharacter)||isAlphanumeric(followingCharacter)))}function shouldRemovePair(key,metaKey,value,selectionStart,selectionEnd){if(key!=="Backspace"||metaKey){return false}if(selectionStart!==selectionEnd){return false}return pairs.includes(value.substr(selectionEnd-1,2))}function isAlphanumeric(){var value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return value.match(/[a-zA-Z0-9_]/)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fromUser=fromUser;var _lodash=_interopRequireDefault(__webpack_require__(49));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function fromUser(userInput){var matchAll="";if(_lodash.default.isEmpty(userInput)){return""}if(_lodash.default.isObject(userInput)){return userInput}userInput=userInput||"";if(typeof userInput==="string"){var trimmedUserInput=userInput.trim();if(trimmedUserInput.length===0){return matchAll}if(trimmedUserInput[0]==="{"){try{return JSON.parse(trimmedUserInput)}catch(e){return userInput}}else{return userInput}}}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.toUser=toUser;function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function toUser(text){if(text==null){return""}if(_typeof(text)==="object"){if(text.match_all){return""}if(text.query_string){return toUser(text.query_string.query)}return JSON.stringify(text)}return""+text}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getQueryLog=getQueryLog;var _persisted_log=__webpack_require__(220);function getQueryLog(uiSettings,storage,appName,language){return new _persisted_log.PersistedLog("typeahead:".concat(appName,"-").concat(language),{maxLength:uiSettings.get("history:limit"),filterDuplicates:true},storage)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PersistedLog=void 0;var _lodash=_interopRequireDefault(__webpack_require__(49));var Rx=_interopRequireWildcard(__webpack_require__(33));var _operators=__webpack_require__(6);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var defaultIsDuplicate=function defaultIsDuplicate(oldItem,newItem){return _lodash.default.isEqual(oldItem,newItem)};var PersistedLog=function(){function PersistedLog(name){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var storage=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,PersistedLog);_defineProperty(this,"name",void 0);_defineProperty(this,"maxLength",void 0);_defineProperty(this,"filterDuplicates",void 0);_defineProperty(this,"isDuplicate",void 0);_defineProperty(this,"storage",void 0);_defineProperty(this,"items",void 0);_defineProperty(this,"update$",new Rx.BehaviorSubject(undefined));this.name=name;this.maxLength=typeof options.maxLength==="string"?this.maxLength=parseInt(options.maxLength,10):options.maxLength;this.filterDuplicates=options.filterDuplicates||false;this.isDuplicate=options.isDuplicate||defaultIsDuplicate;this.storage=storage;this.items=this.storage.get(this.name)||[];if(this.maxLength!==undefined&&!isNaN(this.maxLength)){this.items=_lodash.default.take(this.items,this.maxLength)}}_createClass(PersistedLog,[{key:"add",value:function add(val){var _this=this;if(val==null){return this.items}if(this.filterDuplicates){_lodash.default.remove(this.items,(function(item){return _this.isDuplicate(item,val)}))}this.items.unshift(val);if(this.maxLength&&!isNaN(this.maxLength)){this.items=_lodash.default.take(this.items,this.maxLength)}this.storage.set(this.name,this.items);this.update$.next(undefined);return this.items}},{key:"get",value:function get(){return _lodash.default.cloneDeep(this.items)}},{key:"get$",value:function get$(){var _this2=this;return this.update$.pipe((0,_operators.map)((function(){return _this2.get()})))}}]);return PersistedLog}();exports.PersistedLog=PersistedLog},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultQuery=getDefaultQuery;function getDefaultQuery(){var language=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"kuery";return{query:"",language:language}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QueryService=void 0;var _operators=__webpack_require__(6);var _filter_manager=__webpack_require__(316);var _timefilter=__webpack_require__(221);var _saved_query_service=__webpack_require__(320);var _create_global_query_observable=__webpack_require__(677);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var QueryService=function(){function QueryService(){_classCallCheck(this,QueryService);_defineProperty(this,"filterManager",void 0);_defineProperty(this,"timefilter",void 0);_defineProperty(this,"state$",void 0)}_createClass(QueryService,[{key:"setup",value:function setup(_ref){var uiSettings=_ref.uiSettings,storage=_ref.storage;this.filterManager=new _filter_manager.FilterManager(uiSettings);var timefilterService=new _timefilter.TimefilterService;this.timefilter=timefilterService.setup({uiSettings:uiSettings,storage:storage});this.state$=(0,_create_global_query_observable.createQueryStateObservable)({filterManager:this.filterManager,timefilter:this.timefilter}).pipe((0,_operators.share)());return{filterManager:this.filterManager,timefilter:this.timefilter,state$:this.state$}}},{key:"start",value:function start(savedObjects){return{filterManager:this.filterManager,timefilter:this.timefilter,state$:this.state$,savedQueries:(0,_saved_query_service.createSavedQueryService)(savedObjects.client)}}},{key:"stop",value:function stop(){}}]);return QueryService}();exports.QueryService=QueryService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterManager=void 0;var _lodash=_interopRequireDefault(__webpack_require__(49));var _rxjs=__webpack_require__(33);var _sort_filters=__webpack_require__(651);var _map_and_flatten_filters=__webpack_require__(317);var _only_disabled=__webpack_require__(318);var _common=__webpack_require__(52);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FilterManager=function(){function FilterManager(uiSettings){_classCallCheck(this,FilterManager);_defineProperty(this,"filters",[]);_defineProperty(this,"updated$",new _rxjs.Subject);_defineProperty(this,"fetch$",new _rxjs.Subject);_defineProperty(this,"uiSettings",void 0);this.uiSettings=uiSettings}_createClass(FilterManager,[{key:"mergeIncomingFilters",value:function mergeIncomingFilters(partitionedFilters){var globalFilters=partitionedFilters.globalFilters;var appFilters=partitionedFilters.appFilters;var cleanedAppFilters=[];_lodash.default.each(appFilters,(function(filter,i){var match=_lodash.default.find(globalFilters,(function(globalFilter){return(0,_common.compareFilters)(globalFilter,filter)}));if(!match){return cleanedAppFilters.push(filter)}_lodash.default.assign(match.meta,filter.meta)}));return FilterManager.mergeFilters(cleanedAppFilters,globalFilters)}},{key:"handleStateUpdate",value:function handleStateUpdate(newFilters){newFilters.sort(_sort_filters.sortFilters);var filtersUpdated=!(0,_common.compareFilters)(this.filters,newFilters,_common.COMPARE_ALL_OPTIONS);var updatedOnlyDisabledFilters=(0,_only_disabled.onlyDisabledFiltersChanged)(newFilters,this.filters);this.filters=newFilters;if(filtersUpdated){this.updated$.next();if(!updatedOnlyDisabledFilters){this.fetch$.next()}}}},{key:"getFilters",value:function getFilters(){return _lodash.default.cloneDeep(this.filters)}},{key:"getAppFilters",value:function getAppFilters(){var _this$getPartitionedF=this.getPartitionedFilters(),appFilters=_this$getPartitionedF.appFilters;return appFilters}},{key:"getGlobalFilters",value:function getGlobalFilters(){var _this$getPartitionedF2=this.getPartitionedFilters(),globalFilters=_this$getPartitionedF2.globalFilters;return globalFilters}},{key:"getPartitionedFilters",value:function getPartitionedFilters(){return FilterManager.partitionFilters(this.getFilters())}},{key:"getUpdates$",value:function getUpdates$(){return this.updated$.asObservable()}},{key:"getFetches$",value:function getFetches$(){return this.fetch$.asObservable()}},{key:"addFilters",value:function addFilters(filters){var _currentFilters$appFi,_currentFilters$globa;var pinFilterStatus=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.uiSettings.get("filters:pinnedByDefault");if(!Array.isArray(filters)){filters=[filters]}if(filters.length===0){return}var store=pinFilterStatus?_common.FilterStateStore.GLOBAL_STATE:_common.FilterStateStore.APP_STATE;FilterManager.setFiltersStore(filters,store);var mappedFilters=(0,_map_and_flatten_filters.mapAndFlattenFilters)(filters);var newPartitionedFilters=FilterManager.partitionFilters(mappedFilters);var currentFilters=this.getPartitionedFilters();(_currentFilters$appFi=currentFilters.appFilters).push.apply(_currentFilters$appFi,_toConsumableArray(newPartitionedFilters.appFilters));(_currentFilters$globa=currentFilters.globalFilters).push.apply(_currentFilters$globa,_toConsumableArray(newPartitionedFilters.globalFilters));var newFilters=this.mergeIncomingFilters(currentFilters);this.handleStateUpdate(newFilters)}},{key:"setFilters",value:function setFilters(newFilters){var pinFilterStatus=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.uiSettings.get("filters:pinnedByDefault");var store=pinFilterStatus?_common.FilterStateStore.GLOBAL_STATE:_common.FilterStateStore.APP_STATE;FilterManager.setFiltersStore(newFilters,store);var mappedFilters=(0,_map_and_flatten_filters.mapAndFlattenFilters)(newFilters);var newPartitionedFilters=FilterManager.partitionFilters(mappedFilters);var mergedFilters=this.mergeIncomingFilters(newPartitionedFilters);this.handleStateUpdate(mergedFilters)}},{key:"setGlobalFilters",value:function setGlobalFilters(newGlobalFilters){newGlobalFilters=(0,_map_and_flatten_filters.mapAndFlattenFilters)(newGlobalFilters);FilterManager.setFiltersStore(newGlobalFilters,_common.FilterStateStore.GLOBAL_STATE,true);var _this$getPartitionedF3=this.getPartitionedFilters(),appFilters=_this$getPartitionedF3.appFilters;var newFilters=this.mergeIncomingFilters({appFilters:appFilters,globalFilters:newGlobalFilters});this.handleStateUpdate(newFilters)}},{key:"setAppFilters",value:function setAppFilters(newAppFilters){newAppFilters=(0,_map_and_flatten_filters.mapAndFlattenFilters)(newAppFilters);FilterManager.setFiltersStore(newAppFilters,_common.FilterStateStore.APP_STATE,true);var _this$getPartitionedF4=this.getPartitionedFilters(),globalFilters=_this$getPartitionedF4.globalFilters;var newFilters=this.mergeIncomingFilters({globalFilters:globalFilters,appFilters:newAppFilters});this.handleStateUpdate(newFilters)}},{key:"removeFilter",value:function removeFilter(filter){var filterIndex=_lodash.default.findIndex(this.filters,(function(item){return _lodash.default.isEqual(item.meta,filter.meta)&&_lodash.default.isEqual(item.query,filter.query)}));if(filterIndex>=0){var newFilters=_lodash.default.cloneDeep(this.filters);newFilters.splice(filterIndex,1);this.handleStateUpdate(newFilters)}}},{key:"removeAll",value:function removeAll(){this.setFilters([])}}],[{key:"mergeFilters",value:function mergeFilters(appFilters,globalFilters){return(0,_common.uniqFilters)(appFilters.reverse().concat(globalFilters.reverse())).reverse()}},{key:"partitionFilters",value:function partitionFilters(filters){var _$partition=_lodash.default.partition(filters,_common.isFilterPinned),_$partition2=_slicedToArray(_$partition,2),globalFilters=_$partition2[0],appFilters=_$partition2[1];return{globalFilters:globalFilters,appFilters:appFilters}}},{key:"setFiltersStore",value:function setFiltersStore(filters,store){var shouldOverrideStore=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_lodash.default.map(filters,(function(filter){if(shouldOverrideStore||filter.$state===undefined){filter.$state={store:store}}}))}}]);return FilterManager}();exports.FilterManager=FilterManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sortFilters=void 0;var _common=__webpack_require__(52);var sortFilters=function sortFilters(_ref,_ref2){var a=_ref.$state;var b=_ref2.$state;if(a.store===b.store){return 0}else{return a.store===_common.FilterStateStore.GLOBAL_STATE&&b.store!==_common.FilterStateStore.GLOBAL_STATE?-1:1}};exports.sortFilters=sortFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapFilter=mapFilter;var _lodash=__webpack_require__(49);var _map_spatial_filter=__webpack_require__(653);var _map_match_all=__webpack_require__(654);var _map_phrase=__webpack_require__(655);var _map_phrases=__webpack_require__(656);var _map_range=__webpack_require__(657);var _map_exists=__webpack_require__(658);var _map_missing=__webpack_require__(659);var _map_query_string=__webpack_require__(660);var _map_geo_bounding_box=__webpack_require__(661);var _map_geo_polygon=__webpack_require__(662);var _map_default=__webpack_require__(663);var _generate_mapping_chain=__webpack_require__(664);function mapFilter(filter){var mappers=[_map_spatial_filter.mapSpatialFilter,_map_match_all.mapMatchAll,_map_range.mapRange,_map_phrase.mapPhrase,_map_phrases.mapPhrases,_map_exists.mapExists,_map_missing.mapMissing,_map_query_string.mapQueryString,_map_geo_bounding_box.mapGeoBoundingBox,_map_geo_polygon.mapGeoPolygon,_map_default.mapDefault];var noop=function noop(){throw new Error("No mappings have been found for filter.")};var mapFn=(0,_lodash.reduceRight)(mappers,(function(memo,map){return(0,_generate_mapping_chain.generateMappingChain)(map,memo)}),noop);var mapped=mapFn(filter);filter.meta=filter.meta||{};filter.meta.type=mapped.type;filter.meta.key=mapped.key;filter.meta.value=mapped.value;filter.meta.params=mapped.params;filter.meta.disabled=Boolean(filter.meta.disabled);filter.meta.negate=Boolean(filter.meta.negate);filter.meta.alias=filter.meta.alias||null;return filter}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapSpatialFilter=void 0;var _common=__webpack_require__(52);var mapSpatialFilter=function mapSpatialFilter(filter){if(filter.meta&&filter.meta.key&&filter.meta.alias&&filter.meta.type===_common.FILTERS.SPATIAL_FILTER){return{key:filter.meta.key,type:filter.meta.type,value:""}}throw filter};exports.mapSpatialFilter=mapSpatialFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapMatchAll=void 0;var _common=__webpack_require__(52);var mapMatchAll=function mapMatchAll(filter){if((0,_common.isMatchAllFilter)(filter)){return{type:_common.FILTERS.MATCH_ALL,key:filter.meta.field,value:filter.meta.formattedValue||"all"}}throw filter};exports.mapMatchAll=mapMatchAll},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapPhrase=exports.isMapPhraseFilter=void 0;var _lodash=__webpack_require__(49);var _common=__webpack_require__(52);var getScriptedPhraseValue=function getScriptedPhraseValue(filter){return(0,_lodash.get)(filter,["script","script","params","value"])};var getFormattedValueFn=function getFormattedValueFn(value){return function(formatter){return formatter?formatter.convert(value):value}};var getParams=function getParams(filter){var scriptedPhraseValue=getScriptedPhraseValue(filter);var isScriptedFilter=Boolean(scriptedPhraseValue);var key=isScriptedFilter?filter.meta.field||"":(0,_common.getPhraseFilterField)(filter);var query=scriptedPhraseValue||(0,_common.getPhraseFilterValue)(filter);var params={query:query};return{key:key,params:params,type:_common.FILTERS.PHRASE,value:getFormattedValueFn(query)}};var isMapPhraseFilter=function isMapPhraseFilter(filter){return(0,_common.isPhraseFilter)(filter)||(0,_common.isScriptedPhraseFilter)(filter)};exports.isMapPhraseFilter=isMapPhraseFilter;var mapPhrase=function mapPhrase(filter){if(!isMapPhraseFilter(filter)){throw filter}return getParams(filter)};exports.mapPhrase=mapPhrase},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapPhrases=void 0;var _common=__webpack_require__(52);var mapPhrases=function mapPhrases(filter){if(!(0,_common.isPhrasesFilter)(filter)){throw filter}var _filter$meta=filter.meta,type=_filter$meta.type,key=_filter$meta.key,value=_filter$meta.value,params=_filter$meta.params;return{type:type,key:key,value:value,params:params}};exports.mapPhrases=mapPhrases},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapRange=exports.isMapRangeFilter=void 0;var _lodash=__webpack_require__(49);var _common=__webpack_require__(52);var getFormattedValueFn=function getFormattedValueFn(left,right){return function(formatter){var displayValue="".concat(left," to ").concat(right);if(formatter){var convert=formatter.getConverterFor("text");displayValue="".concat(convert(left)," to ").concat(convert(right))}return displayValue}};var getFirstRangeKey=function getFirstRangeKey(filter){return filter.range&&Object.keys(filter.range)[0]};var getRangeByKey=function getRangeByKey(filter,key){return(0,_lodash.get)(filter,["range",key])};function getParams(filter){var isScriptedRange=(0,_common.isScriptedRangeFilter)(filter);var key=(isScriptedRange?filter.meta.field:getFirstRangeKey(filter))||"";var params=isScriptedRange?(0,_lodash.get)(filter,"script.script.params"):getRangeByKey(filter,key);var left=(0,_lodash.has)(params,"gte")?params.gte:params.gt;if(left==null)left=-Infinity;var right=(0,_lodash.has)(params,"lte")?params.lte:params.lt;if(right==null)right=Infinity;var value=getFormattedValueFn(left,right);return{type:_common.FILTERS.RANGE,key:key,value:value,params:params}}var isMapRangeFilter=function isMapRangeFilter(filter){return(0,_common.isRangeFilter)(filter)||(0,_common.isScriptedRangeFilter)(filter)};exports.isMapRangeFilter=isMapRangeFilter;var mapRange=function mapRange(filter){if(!isMapRangeFilter(filter)){throw filter}return getParams(filter)};exports.mapRange=mapRange},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapExists=void 0;var _lodash=__webpack_require__(49);var _common=__webpack_require__(52);var mapExists=function mapExists(filter){if((0,_common.isExistsFilter)(filter)){return{type:_common.FILTERS.EXISTS,value:_common.FILTERS.EXISTS,key:(0,_lodash.get)(filter,"exists.field")}}throw filter};exports.mapExists=mapExists},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapMissing=void 0;var _common=__webpack_require__(52);var mapMissing=function mapMissing(filter){if((0,_common.isMissingFilter)(filter)){return{type:_common.FILTERS.MISSING,value:_common.FILTERS.MISSING,key:filter.missing.field}}throw filter};exports.mapMissing=mapMissing},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapQueryString=void 0;var _common=__webpack_require__(52);var mapQueryString=function mapQueryString(filter){if((0,_common.isQueryStringFilter)(filter)){return{type:_common.FILTERS.QUERY_STRING,key:"query",value:filter.query.query_string.query}}throw filter};exports.mapQueryString=mapQueryString},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapGeoBoundingBox=void 0;var _common=__webpack_require__(52);var getFormattedValueFn=function getFormattedValueFn(params){return function(formatter){var corners=formatter?{topLeft:formatter.convert(params.top_left),bottomRight:formatter.convert(params.bottom_right)}:{topLeft:JSON.stringify(params.top_left),bottomRight:JSON.stringify(params.bottom_right)};return corners.topLeft+" to "+corners.bottomRight}};var getParams=function getParams(filter){var key=Object.keys(filter.geo_bounding_box).filter((function(k){return k!=="ignore_unmapped"}))[0];var params=filter.geo_bounding_box[key];return{key:key,params:params,type:_common.FILTERS.GEO_BOUNDING_BOX,value:getFormattedValueFn(params)}};var mapGeoBoundingBox=function mapGeoBoundingBox(filter){if(!(0,_common.isGeoBoundingBoxFilter)(filter)){throw filter}return getParams(filter)};exports.mapGeoBoundingBox=mapGeoBoundingBox},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapGeoPolygon=mapGeoPolygon;var _common=__webpack_require__(52);var POINTS_SEPARATOR=", ";var getFormattedValueFn=function getFormattedValueFn(points){return function(formatter){return points.map((function(point){return formatter?formatter.convert(point):JSON.stringify(point)})).join(POINTS_SEPARATOR)}};function getParams(filter){var key=Object.keys(filter.geo_polygon).filter((function(k){return k!=="ignore_unmapped"}))[0];var params=filter.geo_polygon[key];return{key:key,params:params,type:_common.FILTERS.GEO_POLYGON,value:getFormattedValueFn(params.points||[])}}function mapGeoPolygon(filter){if(!(0,_common.isGeoPolygonFilter)(filter)){throw filter}return getParams(filter)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mapDefault=void 0;var _lodash=__webpack_require__(49);var _common=__webpack_require__(52);var mapDefault=function mapDefault(filter){var metaProperty=/(^\$|meta)/;var key=(0,_lodash.find)((0,_lodash.keys)(filter),(function(item){return!item.match(metaProperty)}));if(key){var type=_common.FILTERS.CUSTOM;var value=JSON.stringify((0,_lodash.get)(filter,key,{}));return{type:type,key:key,value:value}}throw filter};exports.mapDefault=mapDefault},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.generateMappingChain=void 0;var noop=function noop(){throw new Error("No mappings have been found for filter.")};var generateMappingChain=function generateMappingChain(fn){var next=arguments.length>1&&arguments[1]!==undefined?arguments[1]:noop;return function(filter){try{return fn(filter)}catch(result){if(result===filter){return next(filter)}throw result}}};exports.generateMappingChain=generateMappingChain},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.generateFilters=generateFilters;var _lodash=_interopRequireDefault(__webpack_require__(49));var _common=__webpack_require__(52);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getExistingFilter(appFilters,fieldName,value){return _lodash.default.find(appFilters,(function(filter){if(!filter)return;if(fieldName==="_exists_"&&(0,_common.isExistsFilter)(filter)){return filter.exists.field===value}if((0,_common.isPhraseFilter)(filter)){return(0,_common.getPhraseFilterField)(filter)===fieldName&&(0,_common.getPhraseFilterValue)(filter)===value}if((0,_common.isScriptedPhraseFilter)(filter)){return filter.meta.field===fieldName&&filter.script.script.params.value===value}}))}function updateExistingFilter(existingFilter,negate){existingFilter.meta.disabled=false;if(existingFilter.meta.negate!==negate){existingFilter.meta.negate=!existingFilter.meta.negate}}function generateFilters(filterManager,field,values,operation,index){values=Array.isArray(values)?values:[values];var fieldObj=_lodash.default.isObject(field)?field:{name:field};var fieldName=fieldObj.name;var newFilters=[];var appFilters=filterManager.getAppFilters();var negate=operation==="-";var filter;_lodash.default.each(values,(function(value){var existing=getExistingFilter(appFilters,fieldName,value);if(existing){updateExistingFilter(existing,negate);filter=existing}else{var tmpIndexPattern={id:index};var filterType=fieldName==="_exists_"?_common.FILTERS.EXISTS:_common.FILTERS.PHRASE;var actualFieldObj=fieldName==="_exists_"?{name:value}:fieldObj;filter=(0,_common.buildFilter)(tmpIndexPattern,actualFieldObj,filterType,negate,false,value,null,_common.FilterStateStore.APP_STATE)}newFilters.push(filter)}));return newFilters}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimefilterService=void 0;var _index=__webpack_require__(221);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var TimefilterService=function(){function TimefilterService(){_classCallCheck(this,TimefilterService)}_createClass(TimefilterService,[{key:"setup",value:function setup(_ref){var uiSettings=_ref.uiSettings,storage=_ref.storage;var timefilterConfig={timeDefaults:uiSettings.get("timepicker:timeDefaults"),refreshIntervalDefaults:uiSettings.get("timepicker:refreshIntervalDefaults")};var history=new _index.TimeHistory(storage);var timefilter=new _index.Timefilter(timefilterConfig,history);return{timefilter:timefilter,history:history}}},{key:"start",value:function start(){}},{key:"stop",value:function stop(){}}]);return TimefilterService}();exports.TimefilterService=TimefilterService},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Timefilter=void 0;var _lodash=_interopRequireDefault(__webpack_require__(49));var _rxjs=__webpack_require__(33);var _moment=_interopRequireDefault(__webpack_require__(32));var _diff_time_picker_vals=__webpack_require__(669);var _parse_querystring=__webpack_require__(670);var _get_time=__webpack_require__(319);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Timefilter=function(){function Timefilter(config,timeHistory){var _this=this;_classCallCheck(this,Timefilter);_defineProperty(this,"enabledUpdated$",new _rxjs.BehaviorSubject(false));_defineProperty(this,"timeUpdate$",new _rxjs.Subject);_defineProperty(this,"refreshIntervalUpdate$",new _rxjs.Subject);_defineProperty(this,"autoRefreshFetch$",new _rxjs.Subject);_defineProperty(this,"fetch$",new _rxjs.Subject);_defineProperty(this,"_time",void 0);_defineProperty(this,"_refreshInterval",void 0);_defineProperty(this,"_history",void 0);_defineProperty(this,"_isTimeRangeSelectorEnabled",false);_defineProperty(this,"_isAutoRefreshSelectorEnabled",false);_defineProperty(this,"_autoRefreshIntervalId",0);_defineProperty(this,"timeDefaults",void 0);_defineProperty(this,"refreshIntervalDefaults",void 0);_defineProperty(this,"getEnabledUpdated$",(function(){return _this.enabledUpdated$.asObservable()}));_defineProperty(this,"getTimeUpdate$",(function(){return _this.timeUpdate$.asObservable()}));_defineProperty(this,"getRefreshIntervalUpdate$",(function(){return _this.refreshIntervalUpdate$.asObservable()}));_defineProperty(this,"getAutoRefreshFetch$",(function(){return _this.autoRefreshFetch$.asObservable()}));_defineProperty(this,"getFetch$",(function(){return _this.fetch$.asObservable()}));_defineProperty(this,"getTime",(function(){var _this$_time=_this._time,from=_this$_time.from,to=_this$_time.to;return _objectSpread({},_this._time,{from:_moment.default.isMoment(from)?from.toISOString():from,to:_moment.default.isMoment(to)?to.toISOString():to})}));_defineProperty(this,"setTime",(function(time){var newTime=Object.assign(_this.getTime(),time);if((0,_diff_time_picker_vals.areTimeRangesDifferent)(_this.getTime(),newTime)){_this._time={from:newTime.from,to:newTime.to};_this._history.add(_this._time);_this.timeUpdate$.next();_this.fetch$.next()}}));_defineProperty(this,"getRefreshInterval",(function(){return _lodash.default.clone(_this._refreshInterval)}));_defineProperty(this,"setRefreshInterval",(function(refreshInterval){var prevRefreshInterval=_this.getRefreshInterval();var newRefreshInterval=_objectSpread({},prevRefreshInterval,{},refreshInterval);if(newRefreshInterval.value<=0){newRefreshInterval.value=0;newRefreshInterval.pause=true}_this._refreshInterval={value:newRefreshInterval.value,pause:newRefreshInterval.pause};if(prevRefreshInterval&&(0,_diff_time_picker_vals.areRefreshIntervalsDifferent)(prevRefreshInterval,newRefreshInterval)){_this.refreshIntervalUpdate$.next();if(!newRefreshInterval.pause&&newRefreshInterval.value!==0){_this.fetch$.next()}}clearInterval(_this._autoRefreshIntervalId);if(!newRefreshInterval.pause){_this._autoRefreshIntervalId=window.setInterval((function(){return _this.autoRefreshFetch$.next()}),newRefreshInterval.value)}}));_defineProperty(this,"createFilter",(function(indexPattern,timeRange){return(0,_get_time.getTime)(indexPattern,timeRange?timeRange:_this._time,_this.getForceNow())}));_defineProperty(this,"enableTimeRangeSelector",(function(){_this._isTimeRangeSelectorEnabled=true;_this.enabledUpdated$.next(true)}));_defineProperty(this,"disableTimeRangeSelector",(function(){_this._isTimeRangeSelectorEnabled=false;_this.enabledUpdated$.next(false)}));_defineProperty(this,"enableAutoRefreshSelector",(function(){_this._isAutoRefreshSelectorEnabled=true;_this.enabledUpdated$.next(true)}));_defineProperty(this,"disableAutoRefreshSelector",(function(){_this._isAutoRefreshSelectorEnabled=false;_this.enabledUpdated$.next(false)}));_defineProperty(this,"getForceNow",(function(){var forceNow=(0,_parse_querystring.parseQueryString)().forceNow;if(!forceNow){return}var ticks=Date.parse(forceNow);if(isNaN(ticks)){throw new Error("forceNow query parameter, ".concat(forceNow,", can't be parsed by Date.parse"))}return new Date(ticks)}));this._history=timeHistory;this.timeDefaults=config.timeDefaults;this.refreshIntervalDefaults=config.refreshIntervalDefaults;this._time=config.timeDefaults;this.setRefreshInterval(config.refreshIntervalDefaults)}_createClass(Timefilter,[{key:"isTimeRangeSelectorEnabled",value:function isTimeRangeSelectorEnabled(){return this._isTimeRangeSelectorEnabled}},{key:"isAutoRefreshSelectorEnabled",value:function isAutoRefreshSelectorEnabled(){return this._isAutoRefreshSelectorEnabled}},{key:"getBounds",value:function getBounds(){return this.calculateBounds(this._time)}},{key:"calculateBounds",value:function calculateBounds(timeRange){return(0,_get_time.calculateBounds)(timeRange,{forceNow:this.getForceNow()})}},{key:"getActiveBounds",value:function getActiveBounds(){if(this.isTimeRangeSelectorEnabled()){return this.getBounds()}}},{key:"getTimeDefaults",value:function getTimeDefaults(){return _lodash.default.cloneDeep(this.timeDefaults)}},{key:"getRefreshIntervalDefaults",value:function getRefreshIntervalDefaults(){return _lodash.default.cloneDeep(this.refreshIntervalDefaults)}}]);return Timefilter}();exports.Timefilter=Timefilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.areRefreshIntervalsDifferent=areRefreshIntervalsDifferent;exports.areTimeRangesDifferent=areTimeRangesDifferent;var _lodash=_interopRequireDefault(__webpack_require__(49));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var valueOf=function valueOf(o){if(o)return o.valueOf()};function areRefreshIntervalsDifferent(rangeA,rangeB){if(_lodash.default.isObject(rangeA)&&_lodash.default.isObject(rangeB)){if(valueOf(rangeA.value)!==valueOf(rangeB.value)||valueOf(rangeA.pause)!==valueOf(rangeB.pause)){return true}}else{return!_lodash.default.isEqual(rangeA,rangeB)}return false}function areTimeRangesDifferent(rangeA,rangeB){if(rangeA&&rangeB&&_lodash.default.isObject(rangeA)&&_lodash.default.isObject(rangeB)){if(valueOf(rangeA.to)!==valueOf(rangeB.to)||valueOf(rangeA.from)!==valueOf(rangeB.from)){return true}}else{return!_lodash.default.isEqual(rangeA,rangeB)}return false}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseQueryString=parseQueryString;var _queryString=__webpack_require__(126);function parseQueryString(){var hrefSplit=window.location.href.split("?");if(hrefSplit.length<=1){return{}}return(0,_queryString.parse)(hrefSplit[1],{sort:false})}},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeHistory=void 0;var _moment=_interopRequireDefault(__webpack_require__(32));var _persisted_log=__webpack_require__(220);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TimeHistory=function(){function TimeHistory(storage){_classCallCheck(this,TimeHistory);_defineProperty(this,"history",void 0);var historyOptions={maxLength:10,filterDuplicates:true,isDuplicate:function isDuplicate(oldItem,newItem){return oldItem.from===newItem.from&&oldItem.to===newItem.to}};this.history=new _persisted_log.PersistedLog("kibana.timepicker.timeHistory",historyOptions,storage)}_createClass(TimeHistory,[{key:"add",value:function add(time){if(!time||!time.from||!time.to){return}var justStringsTime={from:_moment.default.isMoment(time.from)?time.from.toISOString():time.from,to:_moment.default.isMoment(time.to)?time.to.toISOString():time.to};this.history.add(justStringsTime)}},{key:"get",value:function get(){return this.history.get()}}]);return TimeHistory}();exports.TimeHistory=TimeHistory},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertRangeFilterToTimeRange=convertRangeFilterToTimeRange;exports.changeTimeFilter=changeTimeFilter;var _moment=_interopRequireDefault(__webpack_require__(32));var _lodash=__webpack_require__(49);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function convertRangeFilterToTimeRange(filter){var key=(0,_lodash.keys)(filter.range)[0];var values=filter.range[key];return{from:(0,_moment.default)(values.gt||values.gte),to:(0,_moment.default)(values.lt||values.lte)}}function changeTimeFilter(timeFilter,filter){timeFilter.setTime(convertRangeFilterToTimeRange(filter))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractTimeFilter=extractTimeFilter;var _lodash=__webpack_require__(49);var _common=__webpack_require__(52);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function extractTimeFilter(timeFieldName,filters){var _partition=(0,_lodash.partition)(filters,(function(obj){var key;if((0,_common.isRangeFilter)(obj)){key=(0,_lodash.keys)(obj.range)[0]}return Boolean(key&&key===timeFieldName)})),_partition2=_slicedToArray(_partition,2),timeRangeFilter=_partition2[0],restOfFilters=_partition2[1];return{restOfFilters:restOfFilters,timeRangeFilter:timeRangeFilter[0]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createQueryStateObservable=createQueryStateObservable;var _rxjs=__webpack_require__(33);var _operators=__webpack_require__(6);var _public=__webpack_require__(34);var _common=__webpack_require__(52);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createQueryStateObservable(_ref){var timefilter=_ref.timefilter.timefilter,filterManager=_ref.filterManager;return new _rxjs.Observable((function(subscriber){var state=(0,_public.createStateContainer)({time:timefilter.getTime(),refreshInterval:timefilter.getRefreshInterval(),filters:filterManager.getFilters()});var currentChange={};var subs=[timefilter.getTimeUpdate$().subscribe((function(){currentChange.time=true;state.set(_objectSpread({},state.get(),{time:timefilter.getTime()}))})),timefilter.getRefreshIntervalUpdate$().subscribe((function(){currentChange.refreshInterval=true;state.set(_objectSpread({},state.get(),{refreshInterval:timefilter.getRefreshInterval()}))})),filterManager.getUpdates$().subscribe((function(){currentChange.filters=true;var _state$get=state.get(),filters=_state$get.filters;var globalOld=filters===null||filters===void 0?void 0:filters.filter((function(f){return(0,_common.isFilterPinned)(f)}));var appOld=filters===null||filters===void 0?void 0:filters.filter((function(f){return!(0,_common.isFilterPinned)(f)}));var globalNew=filterManager.getGlobalFilters();var appNew=filterManager.getAppFilters();if(!globalOld||!(0,_common.compareFilters)(globalOld,globalNew,_common.COMPARE_ALL_OPTIONS)){currentChange.globalFilters=true}if(!appOld||!(0,_common.compareFilters)(appOld,appNew,_common.COMPARE_ALL_OPTIONS)){currentChange.appFilters=true}state.set(_objectSpread({},state.get(),{filters:filterManager.getFilters()}))})),state.state$.pipe((0,_operators.map)((function(newState){return{state:newState,changes:currentChange}})),(0,_operators.tap)((function(){currentChange={}}))).subscribe(subscriber)];return function(){subs.forEach((function(s){return s.unsubscribe()}))}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SavedQuery",{enumerable:true,get:function get(){return _types.SavedQuery}});Object.defineProperty(exports,"SavedQueryAttributes",{enumerable:true,get:function get(){return _types.SavedQueryAttributes}});Object.defineProperty(exports,"SavedQueryService",{enumerable:true,get:function get(){return _types.SavedQueryService}});Object.defineProperty(exports,"SavedQueryTimeFilter",{enumerable:true,get:function get(){return _types.SavedQueryTimeFilter}});Object.defineProperty(exports,"createSavedQueryService",{enumerable:true,get:function get(){return _saved_query_service.createSavedQueryService}});var _types=__webpack_require__(679);var _saved_query_service=__webpack_require__(320)},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"connectToQueryState",{enumerable:true,get:function get(){return _connect_to_query_state.connectToQueryState}});Object.defineProperty(exports,"syncQueryStateWithUrl",{enumerable:true,get:function get(){return _sync_state_with_url.syncQueryStateWithUrl}});Object.defineProperty(exports,"QueryState",{enumerable:true,get:function get(){return _types.QueryState}});Object.defineProperty(exports,"QueryStateChange",{enumerable:true,get:function get(){return _types.QueryStateChange}});var _connect_to_query_state=__webpack_require__(321);var _sync_state_with_url=__webpack_require__(681);var _types=__webpack_require__(682)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.syncQueryStateWithUrl=void 0;var _public=__webpack_require__(34);var _connect_to_query_state=__webpack_require__(321);var _filters=__webpack_require__(94);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var GLOBAL_STATE_STORAGE_KEY="_g";var syncQueryStateWithUrl=function syncQueryStateWithUrl(query,kbnUrlStateStorage){var timefilter=query.timefilter.timefilter,filterManager=query.filterManager;var defaultState={time:timefilter.getTime(),refreshInterval:timefilter.getRefreshInterval(),filters:filterManager.getGlobalFilters()};var initialStateFromUrl=kbnUrlStateStorage.get(GLOBAL_STATE_STORAGE_KEY);var hasInheritedQueryFromUrl=Boolean(initialStateFromUrl&&Object.keys(initialStateFromUrl).length);var initialState=_objectSpread({},defaultState,{},initialStateFromUrl);var globalQueryStateContainer=(0,_public.createStateContainer)(initialState);var stopSyncingWithStateContainer=(0,_connect_to_query_state.connectToQueryState)(query,globalQueryStateContainer,{refreshInterval:true,time:true,filters:_filters.FilterStateStore.GLOBAL_STATE});if(!initialStateFromUrl){kbnUrlStateStorage.set(GLOBAL_STATE_STORAGE_KEY,initialState,{replace:true})}globalQueryStateContainer.set(initialState);var _syncState=(0,_public.syncState)({stateStorage:kbnUrlStateStorage,stateContainer:_objectSpread({},globalQueryStateContainer,{set:function set(state){if(state){globalQueryStateContainer.set(state)}}}),storageKey:GLOBAL_STATE_STORAGE_KEY}),start=_syncState.start,stopSyncingWithUrl=_syncState.stop;start();return{stop:function stop(){stopSyncingWithStateContainer();stopSyncingWithUrl()},hasInheritedQueryFromUrl:hasInheritedQueryFromUrl}};exports.syncQueryStateWithUrl=syncQueryStateWithUrl},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldFormatsService=void 0;var _common=__webpack_require__(52);var _deserialize=__webpack_require__(684);var _constants=__webpack_require__(323);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FieldFormatsService=function(){function FieldFormatsService(){_classCallCheck(this,FieldFormatsService);_defineProperty(this,"fieldFormatsRegistry",new _common.FieldFormatsRegistry)}_createClass(FieldFormatsService,[{key:"setup",value:function setup(core){var _this=this;core.uiSettings.getUpdate$().subscribe((function(_ref){var key=_ref.key,newValue=_ref.newValue;if(key==="format:defaultTypeMap"){_this.fieldFormatsRegistry.parseDefaultTypeMap(newValue)}}));var getConfig=core.uiSettings.get.bind(core.uiSettings);this.fieldFormatsRegistry.init(getConfig,{parsedUrl:{origin:window.location.origin,pathname:window.location.pathname,basePath:core.http.basePath.get()}},_constants.baseFormattersPublic);return this.fieldFormatsRegistry}},{key:"start",value:function start(){this.fieldFormatsRegistry.deserialize=_deserialize.deserializeFieldFormat.bind(this.fieldFormatsRegistry);return this.fieldFormatsRegistry}}]);return FieldFormatsService}();exports.FieldFormatsService=FieldFormatsService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.deserializeFieldFormat=void 0;var _lodash=__webpack_require__(49);var _i18n=__webpack_require__(1);var _date_range=__webpack_require__(171);var _ip_range=__webpack_require__(172);var _common=__webpack_require__(52);var _services=__webpack_require__(61);function isTermsFieldFormat(serializedFieldFormat){return serializedFieldFormat.id==="terms"}var getConfig=function getConfig(key,defaultOverride){return(0,_services.getUiSettings)().get(key,defaultOverride)};var DefaultFieldFormat=_common.FieldFormat.from(_lodash.identity);var getFieldFormat=function getFieldFormat(fieldFormatsService,id){var params=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(id){var Format=fieldFormatsService.getType(id);if(Format){return new Format(params,getConfig)}}return new DefaultFieldFormat};var deserializeFieldFormat=function deserializeFieldFormat(mapping){var _this=this;if(!mapping){return new DefaultFieldFormat}var id=mapping.id;if(id==="range"){var RangeFormat=_common.FieldFormat.from((function(range){var nestedFormatter=mapping.params;var format=getFieldFormat(_this,nestedFormatter.id,nestedFormatter.params);var gte="";var lt="<";return _i18n.i18n.translate("data.aggTypes.buckets.ranges.rangesFormatMessage",{defaultMessage:"{gte} {from} and {lt} {to}",values:{gte:gte,from:format.convert(range.gte),lt:lt,to:format.convert(range.lt)}})}));return new RangeFormat}else if(id==="date_range"){var nestedFormatter=mapping.params;var DateRangeFormat=_common.FieldFormat.from((function(range){var format=getFieldFormat(_this,nestedFormatter.id,nestedFormatter.params);return(0,_date_range.convertDateRangeToString)(range,format.convert.bind(format))}));return new DateRangeFormat}else if(id==="ip_range"){var _nestedFormatter=mapping.params;var IpRangeFormat=_common.FieldFormat.from((function(range){var format=getFieldFormat(_this,_nestedFormatter.id,_nestedFormatter.params);return(0,_ip_range.convertIPRangeToString)(range,format.convert.bind(format))}));return new IpRangeFormat}else if(isTermsFieldFormat(mapping)&&mapping.params){var params=mapping.params;var convert=function convert(val,type){var format=getFieldFormat(_this,params.id,mapping.params);if(val==="__other__"){return params.otherBucketLabel}if(val==="__missing__"){return params.missingBucketLabel}return format.convert(val,type)};return{convert:convert,getConverterFor:function getConverterFor(type){return function(val){return convert(val,type)}}}}else{return getFieldFormat(this,id,mapping.params)}};exports.deserializeFieldFormat=deserializeFieldFormat},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DateFormat",{enumerable:true,get:function get(){return _date.DateFormat}});var _date=__webpack_require__(324)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTitle=getTitle;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function getTitle(_x,_x2){return _getTitle.apply(this,arguments)}function _getTitle(){_getTitle=_asyncToGenerator(regeneratorRuntime.mark((function _callee(client,indexPatternId){var savedObject;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return client.get("index-pattern",indexPatternId);case 2:savedObject=_context.sent;if(!savedObject.error){_context.next=5;break}throw new Error("Unable to get index-pattern title: ".concat(savedObject.error.message));case 5:return _context.abrupt("return",savedObject.attributes.title);case 6:case"end":return _context.stop()}}}),_callee)})));return _getTitle.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.validateIndexPattern=validateIndexPattern;var _types=__webpack_require__(325);function indexPatternContainsSpaces(indexPattern){return indexPattern.includes(" ")}function findIllegalCharacters(indexPattern){var illegalCharacters=_types.ILLEGAL_CHARACTERS_VISIBLE.reduce((function(chars,char){if(indexPattern.includes(char)){chars.push(char)}return chars}),[]);return illegalCharacters}function validateIndexPattern(indexPattern){var errors={};var illegalCharacters=findIllegalCharacters(indexPattern);if(illegalCharacters.length){errors[_types.ILLEGAL_CHARACTERS_KEY]=illegalCharacters}if(indexPatternContainsSpaces(indexPattern)){errors[_types.CONTAINS_SPACES_KEY]=true}return errors}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternMissingIndices=void 0;var _public=__webpack_require__(34);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var IndexPatternMissingIndices=function(_KbnError){_inherits(IndexPatternMissingIndices,_KbnError);function IndexPatternMissingIndices(message){_classCallCheck(this,IndexPatternMissingIndices);var defaultMessage="IndexPattern's configured pattern does not match any indices";return _possibleConstructorReturn(this,_getPrototypeOf(IndexPatternMissingIndices).call(this,message&&message.length?"No matching indices found: ".concat(message):defaultMessage))}return IndexPatternMissingIndices}(_public.KbnError);exports.IndexPatternMissingIndices=IndexPatternMissingIndices},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFromSavedObject=getFromSavedObject;var _lodash=__webpack_require__(49);function getFromSavedObject(savedObject){if((0,_lodash.get)(savedObject,"attributes.fields")===undefined){return}return{id:savedObject.id,fields:JSON.parse(savedObject.attributes.fields),title:savedObject.attributes.title}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isDefault=void 0;var isDefault=function isDefault(indexPattern){return!indexPattern.type};exports.isDefault=isDefault},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _flatten_hit=__webpack_require__(327);Object.keys(_flatten_hit).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _flatten_hit[key]}})}));var _format_hit=__webpack_require__(328);Object.keys(_format_hit).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _format_hit[key]}})}));var _index_pattern=__webpack_require__(329);Object.keys(_index_pattern).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_pattern[key]}})}));var _index_patterns=__webpack_require__(695);Object.keys(_index_patterns).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_patterns[key]}})}));var _index_patterns_api_client=__webpack_require__(332);Object.keys(_index_patterns_api_client).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_patterns_api_client[key]}})}));var _types=__webpack_require__(697);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}))},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.FieldList=void 0;var _lodash=__webpack_require__(49);var _field=__webpack_require__(331);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FieldList=function(_Array){_inherits(FieldList,_Array);function FieldList(indexPattern){var _this;var specs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var shortDotsEnable=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_classCallCheck(this,FieldList);_this=_possibleConstructorReturn(this,_getPrototypeOf(FieldList).call(this));_defineProperty(_assertThisInitialized(_this),"byName",new Map);_defineProperty(_assertThisInitialized(_this),"groups",new Map);_defineProperty(_assertThisInitialized(_this),"indexPattern",void 0);_defineProperty(_assertThisInitialized(_this),"shortDotsEnable",void 0);_defineProperty(_assertThisInitialized(_this),"setByName",(function(field){return _this.byName.set(field.name,field)}));_defineProperty(_assertThisInitialized(_this),"setByGroup",(function(field){if(typeof _this.groups.get(field.type)==="undefined"){_this.groups.set(field.type,new Map)}_this.groups.get(field.type).set(field.name,field)}));_defineProperty(_assertThisInitialized(_this),"removeByGroup",(function(field){return _this.groups.get(field.type).delete(field.name)}));_defineProperty(_assertThisInitialized(_this),"getByName",(function(name){return _this.byName.get(name)}));_defineProperty(_assertThisInitialized(_this),"getByType",(function(type){return _toConsumableArray((_this.groups.get(type)||new Map).values())}));_defineProperty(_assertThisInitialized(_this),"add",(function(field){var newField=new _field.Field(_this.indexPattern,field,_this.shortDotsEnable);_this.push(newField);_this.setByName(newField);_this.setByGroup(newField)}));_defineProperty(_assertThisInitialized(_this),"remove",(function(field){_this.removeByGroup(field);_this.byName.delete(field.name);var fieldIndex=(0,_lodash.findIndex)(_assertThisInitialized(_this),{name:field.name});_this.splice(fieldIndex,1)}));_defineProperty(_assertThisInitialized(_this),"update",(function(field){var index=_this.findIndex((function(f){return f.name===field.name}));_this.splice(index,1,field);_this.setByName(field);_this.removeByGroup(field);_this.setByGroup(field)}));_this.indexPattern=indexPattern;_this.shortDotsEnable=shortDotsEnable;specs.map((function(field){return _this.add(field)}));return _this}return FieldList}(_wrapNativeSuper(Array));exports.FieldList=FieldList},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ObjDefine=ObjDefine;var _lodash=_interopRequireDefault(__webpack_require__(49));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ObjDefine(defaults,prototype){this.obj;this.descs={};this.defaults=defaults||{};this.prototype=prototype||Object.prototype}ObjDefine.REDEFINE_SUPPORTED=function(){var a=Object.create(Object.prototype,{prop:{configurable:true,value:1}});Object.defineProperty(a,"prop",{configurable:true,value:2});return a.prop===2}();ObjDefine.prototype.writ=function(name,val){this._define(name,val,true,true)};ObjDefine.prototype.fact=function(name,val){this._define(name,val,true)};ObjDefine.prototype.comp=function(name,val){this._define(name,val)};ObjDefine.prototype.create=function(){var self=this;self.obj=Object.create(this.prototype,self.descs);if(!ObjDefine.REDEFINE_SUPPORTED&&!self.prototype.toJSON){self.obj.toJSON=function(){return _lodash.default.transform(self.obj,(function(json,val,key){var desc=self.descs[key];if(desc&&desc.enumerable&&val==null)return;json[key]=val}),{})}}return self.obj};ObjDefine.prototype._define=function(name,val,exported,changeable){val=val!=null?val:this.defaults[name];this.descs[name]=this._describe(name,val,!!exported,!!changeable)};ObjDefine.prototype._describe=function(name,val,exported,changeable){var self=this;var exists=val!=null;if(exported&&ObjDefine.REDEFINE_SUPPORTED){return{enumerable:exists,configurable:true,get:_lodash.default.constant(val),set:function set(update){if(!changeable)return false;self.descs[name]=self._describe(name,update,exported,changeable);Object.defineProperty(self.obj,name,self.descs[name])}}}if(exported&&!ObjDefine.REDEFINE_SUPPORTED){return{enumerable:true,configurable:true,writable:changeable,value:val}}return{enumerable:false,writable:changeable,configurable:true,value:val}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFieldsFetcher=void 0;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var createFieldsFetcher=function createFieldsFetcher(indexPattern,apiClient,metaFields){var fieldFetcher={fetch:function fetch(options){return fieldFetcher.fetchForWildcard(indexPattern.getIndex(),_objectSpread({},options,{type:indexPattern.type,params:indexPattern.typeMeta&&indexPattern.typeMeta.params}))},fetchForWildcard:function fetchForWildcard(pattern){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return apiClient.getFieldsForWildcard({pattern:pattern,metaFields:metaFields,type:options.type,params:options.params||{}})}};return fieldFetcher};exports.createFieldsFetcher=createFieldsFetcher},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternsService=void 0;var _pattern_cache=__webpack_require__(696);var _index_pattern=__webpack_require__(329);var _index_patterns_api_client=__webpack_require__(332);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var indexPatternCache=(0,_pattern_cache.createIndexPatternCache)();var IndexPatternsService=function(){function IndexPatternsService(config,savedObjectsClient,http){var _this=this;_classCallCheck(this,IndexPatternsService);_defineProperty(this,"config",void 0);_defineProperty(this,"savedObjectsClient",void 0);_defineProperty(this,"savedObjectsCache",void 0);_defineProperty(this,"apiClient",void 0);_defineProperty(this,"getIds",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var refresh,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:refresh=_args.length>0&&_args[0]!==undefined?_args[0]:false;if(!(!_this.savedObjectsCache||refresh)){_context.next=4;break}_context.next=4;return _this.refreshSavedObjectsCache();case 4:if(_this.savedObjectsCache){_context.next=6;break}return _context.abrupt("return",[]);case 6:return _context.abrupt("return",_this.savedObjectsCache.map((function(obj){return obj===null||obj===void 0?void 0:obj.id})));case 7:case"end":return _context.stop()}}}),_callee)})));return function(){return _ref.apply(this,arguments)}}());_defineProperty(this,"getTitles",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var refresh,_args2=arguments;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:refresh=_args2.length>0&&_args2[0]!==undefined?_args2[0]:false;if(!(!_this.savedObjectsCache||refresh)){_context2.next=4;break}_context2.next=4;return _this.refreshSavedObjectsCache();case 4:if(_this.savedObjectsCache){_context2.next=6;break}return _context2.abrupt("return",[]);case 6:return _context2.abrupt("return",_this.savedObjectsCache.map((function(obj){var _obj$attributes;return obj===null||obj===void 0?void 0:(_obj$attributes=obj.attributes)===null||_obj$attributes===void 0?void 0:_obj$attributes.title})));case 7:case"end":return _context2.stop()}}}),_callee2)})));return function(){return _ref2.apply(this,arguments)}}());_defineProperty(this,"getFields",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(fields){var refresh,_args3=arguments;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:refresh=_args3.length>1&&_args3[1]!==undefined?_args3[1]:false;if(!(!_this.savedObjectsCache||refresh)){_context3.next=4;break}_context3.next=4;return _this.refreshSavedObjectsCache();case 4:if(_this.savedObjectsCache){_context3.next=6;break}return _context3.abrupt("return",[]);case 6:return _context3.abrupt("return",_this.savedObjectsCache.map((function(obj){var result={};fields.forEach((function(f){var _obj$attributes2;return result[f]=obj[f]||(obj===null||obj===void 0?void 0:(_obj$attributes2=obj.attributes)===null||_obj$attributes2===void 0?void 0:_obj$attributes2[f])}));return result})));case 7:case"end":return _context3.stop()}}}),_callee3)})));return function(_x){return _ref3.apply(this,arguments)}}());_defineProperty(this,"getFieldsForTimePattern",(function(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return _this.apiClient.getFieldsForTimePattern(options)}));_defineProperty(this,"getFieldsForWildcard",(function(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return _this.apiClient.getFieldsForWildcard(options)}));_defineProperty(this,"clearCache",(function(id){_this.savedObjectsCache=null;if(id){indexPatternCache.clear(id)}else{indexPatternCache.clearAll()}}));_defineProperty(this,"getCache",_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(_this.savedObjectsCache){_context4.next=3;break}_context4.next=3;return _this.refreshSavedObjectsCache();case 3:return _context4.abrupt("return",_this.savedObjectsCache);case 4:case"end":return _context4.stop()}}}),_callee4)}))));_defineProperty(this,"getDefault",_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){var defaultIndexPatternId;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:defaultIndexPatternId=_this.config.get("defaultIndex");if(!defaultIndexPatternId){_context5.next=5;break}_context5.next=4;return _this.get(defaultIndexPatternId);case 4:return _context5.abrupt("return",_context5.sent);case 5:return _context5.abrupt("return",null);case 6:case"end":return _context5.stop()}}}),_callee5)}))));_defineProperty(this,"get",function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(id){var cache,indexPattern;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:cache=indexPatternCache.get(id);if(!cache){_context6.next=3;break}return _context6.abrupt("return",cache);case 3:_context6.next=5;return _this.make(id);case 5:indexPattern=_context6.sent;return _context6.abrupt("return",indexPatternCache.set(id,indexPattern));case 7:case"end":return _context6.stop()}}}),_callee6)})));return function(_x2){return _ref6.apply(this,arguments)}}());_defineProperty(this,"make",(function(id){var indexPattern=new _index_pattern.IndexPattern(id,(function(cfg){return _this.config.get(cfg)}),_this.savedObjectsClient,_this.apiClient,indexPatternCache);return indexPattern.init()}));this.apiClient=new _index_patterns_api_client.IndexPatternsApiClient(http);this.config=config;this.savedObjectsClient=savedObjectsClient}_createClass(IndexPatternsService,[{key:"refreshSavedObjectsCache",value:function(){var _refreshSavedObjectsCache=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(){return regeneratorRuntime.wrap((function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.savedObjectsClient.find({type:"index-pattern",fields:["title"],perPage:1e4});case 2:this.savedObjectsCache=_context7.sent.savedObjects;case 3:case"end":return _context7.stop()}}}),_callee7,this)})));function refreshSavedObjectsCache(){return _refreshSavedObjectsCache.apply(this,arguments)}return refreshSavedObjectsCache}()}]);return IndexPatternsService}();exports.IndexPatternsService=IndexPatternsService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createIndexPatternCache=createIndexPatternCache;function createIndexPatternCache(){var vals={};var cache={get:function get(id){return vals[id]},set:function set(id,prom){vals[id]=prom;return prom},clear:function clear(id){delete vals[id]},clearAll:function clearAll(){for(var _id in vals){if(vals.hasOwnProperty(_id)){delete vals[_id]}}}};return cache}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QuerySuggestionTypes=void 0;var QuerySuggestionTypes;exports.QuerySuggestionTypes=QuerySuggestionTypes;(function(QuerySuggestionTypes){QuerySuggestionTypes["Field"]="field";QuerySuggestionTypes["Value"]="value";QuerySuggestionTypes["Operator"]="operator";QuerySuggestionTypes["Conjunction"]="conjunction";QuerySuggestionTypes["RecentSearch"]="recentSearch"})(QuerySuggestionTypes||(exports.QuerySuggestionTypes=QuerySuggestionTypes={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AutocompleteService=void 0;var _value_suggestion_provider=__webpack_require__(700);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AutocompleteService=function(){function AutocompleteService(){var _this=this;_classCallCheck(this,AutocompleteService);_defineProperty(this,"querySuggestionProviders",new Map);_defineProperty(this,"getValueSuggestions",void 0);_defineProperty(this,"addQuerySuggestionProvider",(function(language,provider){if(language&&provider){_this.querySuggestionProviders.set(language,provider)}}));_defineProperty(this,"getQuerySuggestions",(function(args){var language=args.language;var provider=_this.querySuggestionProviders.get(language);if(provider){return provider(args)}}));_defineProperty(this,"hasQuerySuggestions",(function(language){return _this.querySuggestionProviders.has(language)}))}_createClass(AutocompleteService,[{key:"setup",value:function setup(core){this.getValueSuggestions=(0,_value_suggestion_provider.setupValueSuggestionProvider)(core);return{addQuerySuggestionProvider:this.addQuerySuggestionProvider,getQuerySuggestions:this.getQuerySuggestions}}},{key:"start",value:function start(){return{getQuerySuggestions:this.getQuerySuggestions,hasQuerySuggestions:this.hasQuerySuggestions,getValueSuggestions:this.getValueSuggestions}}},{key:"clearProviders",value:function clearProviders(){this.querySuggestionProviders.clear()}}]);return AutocompleteService}();exports.AutocompleteService=AutocompleteService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setupValueSuggestionProvider=void 0;var _lodash=__webpack_require__(49);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function resolver(title,field,query,boolFilter){var ttl=Math.floor(Date.now()/1e3/60);return[ttl,query,title,field.name,JSON.stringify(boolFilter)].join("|")}var setupValueSuggestionProvider=function setupValueSuggestionProvider(core){var requestSuggestions=(0,_lodash.memoize)((function(index,field,query){var boolFilter=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];var signal=arguments.length>4?arguments[4]:undefined;return core.http.fetch("/api/kibana/suggestions/values/".concat(index),{method:"POST",body:JSON.stringify({query:query,field:field.name,boolFilter:boolFilter}),signal:signal})}),resolver);return(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref2){var indexPattern,field,query,boolFilter,signal,shouldSuggestValues,title;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:indexPattern=_ref2.indexPattern,field=_ref2.field,query=_ref2.query,boolFilter=_ref2.boolFilter,signal=_ref2.signal;shouldSuggestValues=core.uiSettings.get("filterEditor:suggestValues");title=indexPattern.title;if(!(field.type==="boolean")){_context.next=7;break}return _context.abrupt("return",[true,false]);case 7:if(!(!shouldSuggestValues||!field.aggregatable||field.type!=="string")){_context.next=9;break}return _context.abrupt("return",[]);case 9:_context.next=11;return requestSuggestions(title,field,query,boolFilter,signal);case 11:return _context.abrupt("return",_context.sent);case 12:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}())};exports.setupValueSuggestionProvider=setupValueSuggestionProvider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={ISearchSetup:true,ISearchStart:true,ISearchContext:true,TSearchStrategyProvider:true,ISearchStrategy:true,ISearch:true,ISearchOptions:true,IRequestTypesMap:true,IResponseTypesMap:true,ISearchGeneric:true,IEsSearchResponse:true,IEsSearchRequest:true,ES_SEARCH_STRATEGY:true,IKibanaSearchResponse:true,IKibanaSearchRequest:true,ISyncSearchRequest:true,SYNC_SEARCH_STRATEGY:true,esSearchStrategyProvider:true,getEsPreference:true,LegacyApiCaller:true,SearchRequest:true,SearchResponse:true,SearchError:true,SearchStrategyProvider:true,getSearchErrorType:true,ISearchSource:true,SearchSource:true,SearchSourceFields:true,EsQuerySortValue:true,SortDirection:true,SearchInterceptor:true,RequestTimeoutError:true,FetchOptions:true};Object.defineProperty(exports,"ISearchSetup",{enumerable:true,get:function get(){return _types.ISearchSetup}});Object.defineProperty(exports,"ISearchStart",{enumerable:true,get:function get(){return _types.ISearchStart}});Object.defineProperty(exports,"ISearchContext",{enumerable:true,get:function get(){return _types.ISearchContext}});Object.defineProperty(exports,"TSearchStrategyProvider",{enumerable:true,get:function get(){return _types.TSearchStrategyProvider}});Object.defineProperty(exports,"ISearchStrategy",{enumerable:true,get:function get(){return _types.ISearchStrategy}});Object.defineProperty(exports,"ISearch",{enumerable:true,get:function get(){return _i_search.ISearch}});Object.defineProperty(exports,"ISearchOptions",{enumerable:true,get:function get(){return _i_search.ISearchOptions}});Object.defineProperty(exports,"IRequestTypesMap",{enumerable:true,get:function get(){return _i_search.IRequestTypesMap}});Object.defineProperty(exports,"IResponseTypesMap",{enumerable:true,get:function get(){return _i_search.IResponseTypesMap}});Object.defineProperty(exports,"ISearchGeneric",{enumerable:true,get:function get(){return _i_search.ISearchGeneric}});Object.defineProperty(exports,"IEsSearchResponse",{enumerable:true,get:function get(){return _search.IEsSearchResponse}});Object.defineProperty(exports,"IEsSearchRequest",{enumerable:true,get:function get(){return _search.IEsSearchRequest}});Object.defineProperty(exports,"ES_SEARCH_STRATEGY",{enumerable:true,get:function get(){return _search.ES_SEARCH_STRATEGY}});Object.defineProperty(exports,"IKibanaSearchResponse",{enumerable:true,get:function get(){return _search.IKibanaSearchResponse}});Object.defineProperty(exports,"IKibanaSearchRequest",{enumerable:true,get:function get(){return _search.IKibanaSearchRequest}});Object.defineProperty(exports,"ISyncSearchRequest",{enumerable:true,get:function get(){return _sync_search_strategy.ISyncSearchRequest}});Object.defineProperty(exports,"SYNC_SEARCH_STRATEGY",{enumerable:true,get:function get(){return _sync_search_strategy.SYNC_SEARCH_STRATEGY}});Object.defineProperty(exports,"esSearchStrategyProvider",{enumerable:true,get:function get(){return _es_search.esSearchStrategyProvider}});Object.defineProperty(exports,"getEsPreference",{enumerable:true,get:function get(){return _es_search.getEsPreference}});Object.defineProperty(exports,"LegacyApiCaller",{enumerable:true,get:function get(){return _es_client.LegacyApiCaller}});Object.defineProperty(exports,"SearchRequest",{enumerable:true,get:function get(){return _es_client.SearchRequest}});Object.defineProperty(exports,"SearchResponse",{enumerable:true,get:function get(){return _es_client.SearchResponse}});Object.defineProperty(exports,"SearchError",{enumerable:true,get:function get(){return _search_strategy.SearchError}});Object.defineProperty(exports,"SearchStrategyProvider",{enumerable:true,get:function get(){return _search_strategy.SearchStrategyProvider}});Object.defineProperty(exports,"getSearchErrorType",{enumerable:true,get:function get(){return _search_strategy.getSearchErrorType}});Object.defineProperty(exports,"ISearchSource",{enumerable:true,get:function get(){return _search_source.ISearchSource}});Object.defineProperty(exports,"SearchSource",{enumerable:true,get:function get(){return _search_source.SearchSource}});Object.defineProperty(exports,"SearchSourceFields",{enumerable:true,get:function get(){return _search_source.SearchSourceFields}});Object.defineProperty(exports,"EsQuerySortValue",{enumerable:true,get:function get(){return _search_source.EsQuerySortValue}});Object.defineProperty(exports,"SortDirection",{enumerable:true,get:function get(){return _search_source.SortDirection}});Object.defineProperty(exports,"SearchInterceptor",{enumerable:true,get:function get(){return _search_interceptor.SearchInterceptor}});Object.defineProperty(exports,"RequestTimeoutError",{enumerable:true,get:function get(){return _request_timeout_error.RequestTimeoutError}});Object.defineProperty(exports,"FetchOptions",{enumerable:true,get:function get(){return _fetch.FetchOptions}});var _aggs=__webpack_require__(174);Object.keys(_aggs).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _aggs[key]}})}));var _expressions=__webpack_require__(178);Object.keys(_expressions).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _expressions[key]}})}));var _tabify=__webpack_require__(360);Object.keys(_tabify).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _tabify[key]}})}));var _types=__webpack_require__(853);var _i_search=__webpack_require__(854);var _search=__webpack_require__(169);var _sync_search_strategy=__webpack_require__(183);var _es_search=__webpack_require__(855);var _es_client=__webpack_require__(370);var _search_strategy=__webpack_require__(359);var _search_source=__webpack_require__(349);var _search_interceptor=__webpack_require__(371);var _request_timeout_error=__webpack_require__(372);var _fetch=__webpack_require__(351)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggTypeFilters=exports.aggTypeFilters=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggTypeFilters=function(){function AggTypeFilters(){_classCallCheck(this,AggTypeFilters);_defineProperty(this,"filters",new Set)}_createClass(AggTypeFilters,[{key:"addFilter",value:function addFilter(filter){this.filters.add(filter)}},{key:"filter",value:function filter(aggTypes,indexPattern,aggConfig,aggFilter){var allFilters=Array.from(this.filters);var allowedAggTypes=aggTypes.filter((function(aggType){var isAggTypeAllowed=allFilters.every((function(filter){return filter(aggType,indexPattern,aggConfig,aggFilter)}));return isAggTypeAllowed}));return allowedAggTypes}}]);return AggTypeFilters}();exports.AggTypeFilters=AggTypeFilters;var aggTypeFilters=new AggTypeFilters;exports.aggTypeFilters=aggTypeFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.propFilter=propFilter;var _lodash=__webpack_require__(49);function propFilter(prop){return function filterByName(list){var filters=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if((0,_lodash.isFunction)(filters)){return list.filter((function(item){return filters(item[prop])}))}if(!Array.isArray(filters)){filters=filters.split(",")}if(filters.length===0){return list}if(filters.includes("*")){return list}var options=filters.reduce((function(acc,filter){var type="include";var value=filter;if(filter.charAt(0)==="!"){type="exclude";value=filter.substr(1)}if(!acc[type]){acc[type]=[]}acc[type].push(value);return acc}),{});return list.filter((function(item){var value=item[prop];var excluded=options.exclude&&options.exclude.includes(value);if(excluded){return false}var included=!options.include||options.include.includes(value);if(included){return true}return false}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAggTypes=getAggTypes;var _count=__webpack_require__(705);var _avg=__webpack_require__(706);var _sum=__webpack_require__(707);var _median=__webpack_require__(708);var _min=__webpack_require__(709);var _max=__webpack_require__(710);var _top_hit=__webpack_require__(711);var _std_deviation=__webpack_require__(712);var _cardinality=__webpack_require__(713);var _percentiles=__webpack_require__(714);var _geo_bounds=__webpack_require__(716);var _geo_centroid=__webpack_require__(717);var _percentile_ranks=__webpack_require__(718);var _derivative=__webpack_require__(719);var _cumulative_sum=__webpack_require__(721);var _moving_avg=__webpack_require__(722);var _serial_diff=__webpack_require__(723);var _date_histogram=__webpack_require__(341);var _histogram=__webpack_require__(728);var _range=__webpack_require__(730);var _date_range=__webpack_require__(344);var _ip_range=__webpack_require__(345);var _terms=__webpack_require__(347);var _filter=__webpack_require__(834);var _filters=__webpack_require__(835);var _significant_terms=__webpack_require__(839);var _geo_hash=__webpack_require__(840);var _geo_tile=__webpack_require__(841);var _bucket_sum=__webpack_require__(842);var _bucket_avg=__webpack_require__(844);var _bucket_min=__webpack_require__(845);var _bucket_max=__webpack_require__(846);function getAggTypes(deps){var uiSettings=deps.uiSettings;return{metrics:[_count.countMetricAgg,_avg.avgMetricAgg,_sum.sumMetricAgg,_median.medianMetricAgg,_min.minMetricAgg,_max.maxMetricAgg,_std_deviation.stdDeviationMetricAgg,_cardinality.cardinalityMetricAgg,_percentiles.percentilesMetricAgg,_percentile_ranks.percentileRanksMetricAgg,_top_hit.topHitMetricAgg,_derivative.derivativeMetricAgg,_cumulative_sum.cumulativeSumMetricAgg,_moving_avg.movingAvgMetricAgg,_serial_diff.serialDiffMetricAgg,_bucket_avg.bucketAvgMetricAgg,_bucket_sum.bucketSumMetricAgg,_bucket_min.bucketMinMetricAgg,_bucket_max.bucketMaxMetricAgg,_geo_bounds.geoBoundsMetricAgg,_geo_centroid.geoCentroidMetricAgg],buckets:[_date_histogram.dateHistogramBucketAgg,_histogram.histogramBucketAgg,_range.rangeBucketAgg,_date_range.dateRangeBucketAgg,_ip_range.ipRangeBucketAgg,_terms.termsBucketAgg,_filter.filterBucketAgg,(0,_filters.getFiltersBucketAgg)({uiSettings:uiSettings}),_significant_terms.significantTermsBucketAgg,_geo_hash.geoHashBucketAgg,_geo_tile.geoTileBucketAgg]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.countMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _metric_agg_types=__webpack_require__(62);var _common=__webpack_require__(52);var _services=__webpack_require__(61);var countMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.COUNT,title:_i18n.i18n.translate("data.search.aggs.metrics.countTitle",{defaultMessage:"Count"}),hasNoDsl:true,makeLabel:function makeLabel(){return _i18n.i18n.translate("data.search.aggs.metrics.countLabel",{defaultMessage:"Count"})},getFormat:function getFormat(){var fieldFormatsService=(0,_services.getFieldFormats)();return fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.NUMBER)},getValue:function getValue(agg,bucket){return bucket.doc_count},isScalable:function isScalable(){return true}});exports.countMetricAgg=countMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.avgMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _metric_agg_types=__webpack_require__(62);var _common=__webpack_require__(52);var averageTitle=_i18n.i18n.translate("data.search.aggs.metrics.averageTitle",{defaultMessage:"Average"});var avgMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.AVG,title:averageTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.metrics.averageLabel",{defaultMessage:"Average {field}",values:{field:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.NUMBER}]});exports.avgMetricAgg=avgMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sumMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _metric_agg_types=__webpack_require__(62);var _common=__webpack_require__(52);var sumTitle=_i18n.i18n.translate("data.search.aggs.metrics.sumTitle",{defaultMessage:"Sum"});var sumMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.SUM,title:sumTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.metrics.sumLabel",{defaultMessage:"Sum of {field}",values:{field:aggConfig.getFieldDisplayName()}})},isScalable:function isScalable(){return true},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.NUMBER}]});exports.sumMetricAgg=sumMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.medianMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _metric_agg_types=__webpack_require__(62);var _common=__webpack_require__(52);var medianTitle=_i18n.i18n.translate("data.search.aggs.metrics.medianTitle",{defaultMessage:"Median"});var medianMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.MEDIAN,dslName:"percentiles",title:medianTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.metrics.medianLabel",{defaultMessage:"Median {field}",values:{field:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.DATE,_common.KBN_FIELD_TYPES.HISTOGRAM],write:function write(agg,output){output.params.field=agg.getParam("field").name;output.params.percents=[50]}}],getValue:function getValue(agg,bucket){return bucket[agg.id].values["50.0"]}});exports.medianMetricAgg=medianMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.minMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _metric_agg_types=__webpack_require__(62);var _common=__webpack_require__(52);var minTitle=_i18n.i18n.translate("data.search.aggs.metrics.minTitle",{defaultMessage:"Min"});var minMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.MIN,title:minTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.metrics.minLabel",{defaultMessage:"Min {field}",values:{field:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.DATE]}]});exports.minMetricAgg=minMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.maxMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _metric_agg_types=__webpack_require__(62);var _common=__webpack_require__(52);var maxTitle=_i18n.i18n.translate("data.search.aggs.metrics.maxTitle",{defaultMessage:"Max"});var maxMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.MAX,title:maxTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.metrics.maxLabel",{defaultMessage:"Max {field}",values:{field:aggConfig.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.DATE]}]});exports.maxMetricAgg=maxMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.topHitMetricAgg=void 0;var _lodash=_interopRequireDefault(__webpack_require__(49));var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _metric_agg_types=__webpack_require__(62);var _common=__webpack_require__(52);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var isNumericFieldSelected=function isNumericFieldSelected(agg){var field=agg.getParam("field");return field&&field.type&&field.type===_common.KBN_FIELD_TYPES.NUMBER};var topHitMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.TOP_HITS,title:_i18n.i18n.translate("data.search.aggs.metrics.topHitTitle",{defaultMessage:"Top Hit"}),makeLabel:function makeLabel(aggConfig){var lastPrefixLabel=_i18n.i18n.translate("data.search.aggs.metrics.topHit.lastPrefixLabel",{defaultMessage:"Last"});var firstPrefixLabel=_i18n.i18n.translate("data.search.aggs.metrics.topHit.firstPrefixLabel",{defaultMessage:"First"});var prefix=aggConfig.getParam("sortOrder").value==="desc"?lastPrefixLabel:firstPrefixLabel;var size=aggConfig.getParam("size");if(size!==1){prefix+=" ".concat(size)}var field=aggConfig.getParam("field");return"".concat(prefix," ").concat(field?field.displayName:"")},params:[{name:"field",type:"field",onlyAggregatable:false,filterFieldTypes:Object.values(_common.KBN_FIELD_TYPES).filter((function(type){return type!==_common.KBN_FIELD_TYPES.HISTOGRAM})),write:function write(agg,output){var field=agg.getParam("field");output.params={};if(field.scripted){output.params.script_fields=_defineProperty({},field.name,{script:{source:field.script,lang:field.lang}})}else{if(field.readFromDocValues){var format=field.type===_common.KBN_FIELD_TYPES.DATE?"date_time":"use_field_mapping";output.params.docvalue_fields=[{field:field.name,format:format}]}output.params._source=field.name==="_source"?true:field.name}}},{name:"aggregate",type:"optioned",options:[{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.minLabel",{defaultMessage:"Min"}),isCompatible:isNumericFieldSelected,disabled:true,value:"min"},{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.maxLabel",{defaultMessage:"Max"}),isCompatible:isNumericFieldSelected,disabled:true,value:"max"},{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.sumLabel",{defaultMessage:"Sum"}),isCompatible:isNumericFieldSelected,disabled:true,value:"sum"},{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.averageLabel",{defaultMessage:"Average"}),isCompatible:isNumericFieldSelected,disabled:true,value:"average"},{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.concatenateLabel",{defaultMessage:"Concatenate"}),isCompatible:function isCompatible(aggConfig){return _lodash.default.get(aggConfig.params,"field.filterFieldTypes","*")==="*"},disabled:true,value:"concat"}],write:_lodash.default.noop},{name:"size",default:1},{name:"sortField",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.DATE,_common.KBN_FIELD_TYPES.IP,_common.KBN_FIELD_TYPES.STRING],default:function _default(agg){return agg.getIndexPattern().timeFieldName},write:_lodash.default.noop},{name:"sortOrder",type:"optioned",default:"desc",options:[{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.descendingLabel",{defaultMessage:"Descending"}),value:"desc"},{text:_i18n.i18n.translate("data.search.aggs.metrics.topHit.ascendingLabel",{defaultMessage:"Ascending"}),value:"asc"}],write:function write(agg,output){var sortField=agg.params.sortField;var sortOrder=agg.params.sortOrder;if(sortField.scripted){output.params.sort=[{_script:{script:{source:sortField.script,lang:sortField.lang},type:sortField.type,order:sortOrder.value}}]}else{output.params.sort=[_defineProperty({},sortField.name,{order:sortOrder.value})]}}}],getValue:function getValue(agg,bucket){var hits=_lodash.default.get(bucket,"".concat(agg.id,".hits.hits"));if(!hits||!hits.length){return null}var path=agg.getParam("field").name;var values=_lodash.default.flatten(hits.map((function(hit){return path==="_source"?hit._source:agg.getIndexPattern().flattenHit(hit,true)[path]})));if(values.length===1){values=values[0]}if(Array.isArray(values)){if(!_lodash.default.compact(values).length){return null}var aggregate=agg.getParam("aggregate");switch(aggregate.value){case"max":return _lodash.default.max(values);case"min":return _lodash.default.min(values);case"sum":return _lodash.default.sum(values);case"average":return _lodash.default.sum(values)/values.length}}return values}});exports.topHitMetricAgg=topHitMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.stdDeviationMetricAgg=void 0;var _lodash=__webpack_require__(49);var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _metric_agg_types=__webpack_require__(62);var _get_response_agg_config_class=__webpack_require__(226);var _common=__webpack_require__(52);var responseAggConfigProps={valProp:function valProp(){var customLabel=this.getParam("customLabel");var details=this.keyedDetails(customLabel)[this.key];return details.valProp},makeLabel:function makeLabel(){var fieldDisplayName=this.getFieldDisplayName();var customLabel=this.getParam("customLabel");var details=this.keyedDetails(customLabel,fieldDisplayName);return(0,_lodash.get)(details,[this.key,"title"])},keyedDetails:function keyedDetails(customLabel,fieldDisplayName){var label=customLabel||_i18n.i18n.translate("data.search.aggs.metrics.standardDeviation.keyDetailsLabel",{defaultMessage:"Standard Deviation of {fieldDisplayName}",values:{fieldDisplayName:fieldDisplayName}});return{std_lower:{valProp:["std_deviation_bounds","lower"],title:_i18n.i18n.translate("data.search.aggs.metrics.standardDeviation.lowerKeyDetailsTitle",{defaultMessage:"Lower {label}",values:{label:label}})},std_upper:{valProp:["std_deviation_bounds","upper"],title:_i18n.i18n.translate("data.search.aggs.metrics.standardDeviation.upperKeyDetailsTitle",{defaultMessage:"Upper {label}",values:{label:label}})}}}};var stdDeviationMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.STD_DEV,dslName:"extended_stats",title:_i18n.i18n.translate("data.search.aggs.metrics.standardDeviationTitle",{defaultMessage:"Standard Deviation"}),makeLabel:function makeLabel(agg){return _i18n.i18n.translate("data.search.aggs.metrics.standardDeviationLabel",{defaultMessage:"Standard Deviation of {field}",values:{field:agg.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.NUMBER}],getResponseAggs:function getResponseAggs(agg){var ValueAggConfig=(0,_get_response_agg_config_class.getResponseAggConfigClass)(agg,responseAggConfigProps);return[new ValueAggConfig("std_lower"),new ValueAggConfig("std_upper")]},getValue:function getValue(agg,bucket){return(0,_lodash.get)(bucket[agg.parentId],agg.valProp())}});exports.stdDeviationMetricAgg=stdDeviationMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.cardinalityMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _metric_agg_types=__webpack_require__(62);var _common=__webpack_require__(52);var _services=__webpack_require__(61);var uniqueCountTitle=_i18n.i18n.translate("data.search.aggs.metrics.uniqueCountTitle",{defaultMessage:"Unique Count"});var cardinalityMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.CARDINALITY,title:uniqueCountTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.metrics.uniqueCountLabel",{defaultMessage:"Unique count of {field}",values:{field:aggConfig.getFieldDisplayName()}})},getFormat:function getFormat(){var fieldFormatsService=(0,_services.getFieldFormats)();return fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.NUMBER)},params:[{name:"field",type:"field",filterFieldTypes:Object.values(_common.KBN_FIELD_TYPES).filter((function(type){return type!==_common.KBN_FIELD_TYPES.HISTOGRAM}))}]});exports.cardinalityMetricAgg=cardinalityMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.percentilesMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _metric_agg_types=__webpack_require__(62);var _common=__webpack_require__(52);var _get_response_agg_config_class=__webpack_require__(226);var _percentiles_get_value=__webpack_require__(339);var _ordinal_suffix=__webpack_require__(715);var valueProps={makeLabel:function makeLabel(){var customLabel=this.getParam("customLabel");var label=customLabel||this.getFieldDisplayName();return _i18n.i18n.translate("data.search.aggs.metrics.percentiles.valuePropsLabel",{defaultMessage:"{percentile} percentile of {label}",values:{percentile:(0,_ordinal_suffix.ordinalSuffix)(this.key),label:label}})}};var percentilesMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.PERCENTILES,title:_i18n.i18n.translate("data.search.aggs.metrics.percentilesTitle",{defaultMessage:"Percentiles"}),makeLabel:function makeLabel(agg){return _i18n.i18n.translate("data.search.aggs.metrics.percentilesLabel",{defaultMessage:"Percentiles of {field}",values:{field:agg.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.DATE,_common.KBN_FIELD_TYPES.HISTOGRAM]},{name:"percents",default:[1,5,25,50,75,95,99]},{write:function write(agg,output){output.params.keyed=false}}],getResponseAggs:function getResponseAggs(agg){var ValueAggConfig=(0,_get_response_agg_config_class.getResponseAggConfigClass)(agg,valueProps);return agg.getParam("percents").map((function(percent){return new ValueAggConfig(percent)}))},getValue:_percentiles_get_value.getPercentileValue});exports.percentilesMetricAgg=percentilesMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ordinalSuffix=ordinalSuffix;function ordinalSuffix(num){return num+""+suffix(num)}function suffix(num){var int=Math.floor(parseFloat(num));var hunth=int%100;if(hunth>=11&&hunth<=13)return"th";var tenth=int%10;if(tenth===1)return"st";if(tenth===2)return"nd";if(tenth===3)return"rd";return"th"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoBoundsMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _metric_agg_types=__webpack_require__(62);var _common=__webpack_require__(52);var geoBoundsTitle=_i18n.i18n.translate("data.search.aggs.metrics.geoBoundsTitle",{defaultMessage:"Geo Bounds"});var geoBoundsLabel=_i18n.i18n.translate("data.search.aggs.metrics.geoBoundsLabel",{defaultMessage:"Geo Bounds"});var geoBoundsMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.GEO_BOUNDS,title:geoBoundsTitle,makeLabel:function makeLabel(){return geoBoundsLabel},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.GEO_POINT}]});exports.geoBoundsMetricAgg=geoBoundsMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoCentroidMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _metric_agg_types=__webpack_require__(62);var _common=__webpack_require__(52);var geoCentroidTitle=_i18n.i18n.translate("data.search.aggs.metrics.geoCentroidTitle",{defaultMessage:"Geo Centroid"});var geoCentroidLabel=_i18n.i18n.translate("data.search.aggs.metrics.geoCentroidLabel",{defaultMessage:"Geo Centroid"});var geoCentroidMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.GEO_CENTROID,title:geoCentroidTitle,makeLabel:function makeLabel(){return geoCentroidLabel},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.GEO_POINT}],getValue:function getValue(agg,bucket){return bucket[agg.id]&&bucket[agg.id].location}});exports.geoCentroidMetricAgg=geoCentroidMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.percentileRanksMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _get_response_agg_config_class=__webpack_require__(226);var _percentiles_get_value=__webpack_require__(339);var _metric_agg_types=__webpack_require__(62);var _common=__webpack_require__(52);var _services=__webpack_require__(61);var valueProps={makeLabel:function makeLabel(){var fieldFormatsService=(0,_services.getFieldFormats)();var field=this.getField();var format=field&&field.format||fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.NUMBER);var customLabel=this.getParam("customLabel");var label=customLabel||this.getFieldDisplayName();return _i18n.i18n.translate("data.search.aggs.metrics.percentileRanks.valuePropsLabel",{defaultMessage:'Percentile rank {format} of "{label}"',values:{format:format.convert(this.key,"text"),label:label}})}};var percentileRanksMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.PERCENTILE_RANKS,title:_i18n.i18n.translate("data.search.aggs.metrics.percentileRanksTitle",{defaultMessage:"Percentile Ranks"}),makeLabel:function makeLabel(agg){return _i18n.i18n.translate("data.search.aggs.metrics.percentileRanksLabel",{defaultMessage:"Percentile ranks of {field}",values:{field:agg.getFieldDisplayName()}})},params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER,_common.KBN_FIELD_TYPES.HISTOGRAM]},{name:"values",default:[]},{write:function write(agg,output){output.params.keyed=false}}],getResponseAggs:function getResponseAggs(agg){var ValueAggConfig=(0,_get_response_agg_config_class.getResponseAggConfigClass)(agg,valueProps);var values=agg.getParam("values");return values.map((function(value){return new ValueAggConfig(value)}))},getFormat:function getFormat(){var fieldFormatsService=(0,_services.getFieldFormats)();return fieldFormatsService.getInstance(_common.FIELD_FORMAT_IDS.PERCENT)||fieldFormatsService.getDefaultInstance(_common.KBN_FIELD_TYPES.NUMBER)},getValue:function getValue(agg,bucket){return(0,_percentiles_get_value.getPercentileValue)(agg,bucket)/100}});exports.percentileRanksMetricAgg=percentileRanksMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.derivativeMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _parent_pipeline_agg_helper=__webpack_require__(147);var _make_nested_label=__webpack_require__(115);var _metric_agg_types=__webpack_require__(62);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var derivativeLabel=_i18n.i18n.translate("data.search.aggs.metrics.derivativeLabel",{defaultMessage:"derivative"});var derivativeTitle=_i18n.i18n.translate("data.search.aggs.metrics.derivativeTitle",{defaultMessage:"Derivative"});var derivativeMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.DERIVATIVE,title:derivativeTitle,subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,derivativeLabel)},params:_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params()),getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat});exports.derivativeMetricAgg=derivativeMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parentPipelineAggWriter=void 0;var parentPipelineAggWriter=function parentPipelineAggWriter(agg,output,aggConfigs){var customMetric=agg.getParam("customMetric");var metricAgg=agg.getParam("metricAgg");var selectedMetric=customMetric||aggConfigs&&aggConfigs.getResponseAggById(metricAgg);if(customMetric&&customMetric.type.name!=="count"){output.parentAggs=(output.parentAggs||[]).concat(selectedMetric)}output.params={buckets_path:selectedMetric.type.name==="count"?"_count":selectedMetric.id}};exports.parentPipelineAggWriter=parentPipelineAggWriter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.cumulativeSumMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _parent_pipeline_agg_helper=__webpack_require__(147);var _make_nested_label=__webpack_require__(115);var _metric_agg_types=__webpack_require__(62);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var cumulativeSumLabel=_i18n.i18n.translate("data.search.aggs.metrics.cumulativeSumLabel",{defaultMessage:"cumulative sum"});var cumulativeSumTitle=_i18n.i18n.translate("data.search.aggs.metrics.cumulativeSumTitle",{defaultMessage:"Cumulative Sum"});var cumulativeSumMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.CUMULATIVE_SUM,title:cumulativeSumTitle,subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,cumulativeSumLabel)},params:_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params()),getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat});exports.cumulativeSumMetricAgg=cumulativeSumMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.movingAvgMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _parent_pipeline_agg_helper=__webpack_require__(147);var _make_nested_label=__webpack_require__(115);var _metric_agg_types=__webpack_require__(62);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var movingAvgTitle=_i18n.i18n.translate("data.search.aggs.metrics.movingAvgTitle",{defaultMessage:"Moving Avg"});var movingAvgLabel=_i18n.i18n.translate("data.search.aggs.metrics.movingAvgLabel",{defaultMessage:"moving avg"});var movingAvgMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.MOVING_FN,dslName:"moving_fn",title:movingAvgTitle,subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,movingAvgLabel)},params:[].concat(_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params()),[{name:"window",default:5},{name:"script",default:"MovingFunctions.unweightedAvg(values)"}]),getValue:function getValue(agg,bucket){return bucket[agg.id]?bucket[agg.id].value:null},getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat});exports.movingAvgMetricAgg=movingAvgMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.serialDiffMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _parent_pipeline_agg_helper=__webpack_require__(147);var _make_nested_label=__webpack_require__(115);var _metric_agg_types=__webpack_require__(62);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var serialDiffTitle=_i18n.i18n.translate("data.search.aggs.metrics.serialDiffTitle",{defaultMessage:"Serial Diff"});var serialDiffLabel=_i18n.i18n.translate("data.search.aggs.metrics.serialDiffLabel",{defaultMessage:"serial diff"});var serialDiffMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.SERIAL_DIFF,title:serialDiffTitle,subtype:_parent_pipeline_agg_helper.parentPipelineAggHelper.subtype,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,serialDiffLabel)},params:_toConsumableArray(_parent_pipeline_agg_helper.parentPipelineAggHelper.params()),getFormat:_parent_pipeline_agg_helper.parentPipelineAggHelper.getFormat});exports.serialDiffMetricAgg=serialDiffMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeBuckets=void 0;var _lodash=_interopRequireDefault(__webpack_require__(49));var _moment=_interopRequireDefault(__webpack_require__(32));var _common=__webpack_require__(52);var _calc_auto_interval=__webpack_require__(725);var _calc_es_interval=__webpack_require__(726);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function isObject(o){return _lodash.default.isObject(o)}function isString(s){return _lodash.default.isString(s)}function isValidMoment(m){return m&&"isValid"in m&&m.isValid()}var TimeBuckets=function(){_createClass(TimeBuckets,null,[{key:"__cached__",value:function __cached__(self){var cache={};var sameMoment=same(_moment.default.isMoment);var sameDuration=same(_moment.default.isDuration);var desc={__cached__:{value:self}};var breakers={setBounds:"bounds",clearBounds:"bounds",setInterval:"interval"};var resources={bounds:{setup:function setup(){return[self._lb,self._ub]},changes:function changes(prev){return!sameMoment(prev[0],self._lb)||!sameMoment(prev[1],self._ub)}},interval:{setup:function setup(){return self._i},changes:function changes(prev){return!sameDuration(prev,self._i)}}};function cachedGetter(prop){return{value:function value(){if(cache.hasOwnProperty(prop)){return cache[prop]}return cache[prop]=self[prop].apply(self,arguments)}}}function cacheBreaker(prop){var resource=resources[breakers[prop]];var setup=resource.setup;var changes=resource.changes;var fn=self[prop];return{value:function value(){var prev=setup.call(self);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var ret=fn.apply.apply(fn,[self].concat(args));if(changes.call(self,prev)){cache={}}return ret}}}function same(checkType){return function(a,b){if(a===b)return true;if(checkType(a)===checkType(b))return+a===+b;return false}}_lodash.default.forOwn(TimeBuckets.prototype,(function(fn,prop){if(!prop||prop[0]==="_")return;if(breakers.hasOwnProperty(prop)){desc[prop]=cacheBreaker(prop)}else{desc[prop]=cachedGetter(prop)}}));return Object.create(self,desc)}}]);function TimeBuckets(_ref){var uiSettings=_ref.uiSettings;_classCallCheck(this,TimeBuckets);_defineProperty(this,"getConfig",void 0);_defineProperty(this,"_lb",null);_defineProperty(this,"_ub",null);_defineProperty(this,"_originalInterval",null);_defineProperty(this,"_i",void 0);this.getConfig=function(key){return uiSettings.get(key)};return TimeBuckets.__cached__(this)}_createClass(TimeBuckets,[{key:"getDuration",value:function getDuration(){if(this._ub===null||this._lb===null||!this.hasBounds()){return}var difference=this._ub-this._lb;return _moment.default.duration(difference,"ms")}},{key:"setBounds",value:function setBounds(input){if(!input)return this.clearBounds();var bounds;if(_lodash.default.isPlainObject(input)&&!Array.isArray(input)){bounds=[input.min,input.max]}else{bounds=Array.isArray(input)?input:[]}var moments=(0,_lodash.default)(bounds).map(_lodash.default.ary(_moment.default,1)).sortBy(Number);var valid=moments.size()===2&&moments.every(isValidMoment);if(!valid){this.clearBounds();throw new Error("invalid bounds set: "+input)}this._lb=moments.shift();this._ub=moments.pop();var duration=this.getDuration();if(!duration||duration.asSeconds()<0){throw new TypeError("Intervals must be positive")}}},{key:"clearBounds",value:function clearBounds(){this._lb=this._ub=null}},{key:"hasBounds",value:function hasBounds(){return isValidMoment(this._ub)&&isValidMoment(this._lb)}},{key:"getBounds",value:function getBounds(){if(!this.hasBounds())return;return{min:this._lb,max:this._ub}}},{key:"setInterval",value:function setInterval(input){var interval=input;if(isObject(input)&&!_moment.default.isDuration(input)){interval=input.val}if(!interval||interval==="auto"){this._i="auto";return}if(isString(interval)){input=interval;this._originalInterval=input;interval=(0,_common.parseInterval)(interval);if(interval===null||+interval===0){interval=null}}if(!_moment.default.isDuration(interval)){throw new TypeError('"'+input+'" is not a valid interval.')}this._i=interval}},{key:"getInterval",value:function getInterval(){var _this=this;var useNormalizedEsInterval=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var duration=this.getDuration();var readInterval=function readInterval(){var interval=_this._i;if(_moment.default.isDuration(interval))return interval;return(0,_calc_auto_interval.calcAutoIntervalNear)(_this.getConfig("histogram:barTarget"),Number(duration))};var parsedInterval=readInterval();var maybeScaleInterval=function maybeScaleInterval(interval){if(!_this.hasBounds()||!duration){return interval}var maxLength=_this.getConfig("histogram:maxBars");var approxLen=Number(duration)/Number(interval);var scaled;if(approxLen>maxLength){scaled=(0,_calc_auto_interval.calcAutoIntervalLessThan)(maxLength,Number(duration))}else{return interval}if(+scaled===+interval)return interval;interval=decorateInterval(interval);return Object.assign(scaled,{preScaled:interval,scale:Number(interval)/Number(scaled),scaled:true})};var decorateInterval=function decorateInterval(interval){var esInterval=useNormalizedEsInterval?(0,_calc_es_interval.convertDurationToNormalizedEsInterval)(interval):(0,_calc_es_interval.convertIntervalToEsInterval)(String(_this._originalInterval));var prettyUnits=_moment.default.normalizeUnits(esInterval.unit);return Object.assign(interval,{description:esInterval.value===1?prettyUnits:esInterval.value+" "+prettyUnits+"s",esValue:esInterval.value,esUnit:esInterval.unit,expression:esInterval.expression,overflow:Number(duration)>Number(interval)?_moment.default.duration(Number(interval)-Number(duration)):false})};if(useNormalizedEsInterval){return decorateInterval(maybeScaleInterval(parsedInterval))}else{return decorateInterval(parsedInterval)}}},{key:"getScaledDateFormat",value:function getScaledDateFormat(){var interval=this.getInterval();var rules=this.getConfig("dateFormat:scaled");for(var i=rules.length-1;i>=0;i--){var rule=rules[i];if(!rule[0]||interval&&interval>=_moment.default.duration(rule[0])){return rule[1]}}return this.getConfig("dateFormat")}}]);return TimeBuckets}();exports.TimeBuckets=TimeBuckets},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.calcAutoIntervalNear=calcAutoIntervalNear;exports.calcAutoIntervalLessThan=calcAutoIntervalLessThan;var _moment=_interopRequireDefault(__webpack_require__(32));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var boundsDescending=[{bound:Infinity,interval:Number(_moment.default.duration(1,"year"))},{bound:Number(_moment.default.duration(1,"year")),interval:Number(_moment.default.duration(1,"month"))},{bound:Number(_moment.default.duration(3,"week")),interval:Number(_moment.default.duration(1,"week"))},{bound:Number(_moment.default.duration(1,"week")),interval:Number(_moment.default.duration(1,"d"))},{bound:Number(_moment.default.duration(24,"hour")),interval:Number(_moment.default.duration(12,"hour"))},{bound:Number(_moment.default.duration(6,"hour")),interval:Number(_moment.default.duration(3,"hour"))},{bound:Number(_moment.default.duration(2,"hour")),interval:Number(_moment.default.duration(1,"hour"))},{bound:Number(_moment.default.duration(45,"minute")),interval:Number(_moment.default.duration(30,"minute"))},{bound:Number(_moment.default.duration(20,"minute")),interval:Number(_moment.default.duration(10,"minute"))},{bound:Number(_moment.default.duration(9,"minute")),interval:Number(_moment.default.duration(5,"minute"))},{bound:Number(_moment.default.duration(3,"minute")),interval:Number(_moment.default.duration(1,"minute"))},{bound:Number(_moment.default.duration(45,"second")),interval:Number(_moment.default.duration(30,"second"))},{bound:Number(_moment.default.duration(15,"second")),interval:Number(_moment.default.duration(10,"second"))},{bound:Number(_moment.default.duration(7.5,"second")),interval:Number(_moment.default.duration(5,"second"))},{bound:Number(_moment.default.duration(5,"second")),interval:Number(_moment.default.duration(1,"second"))},{bound:Number(_moment.default.duration(500,"ms")),interval:Number(_moment.default.duration(100,"ms"))}];function getPerBucketMs(count,duration){var ms=duration/count;return isFinite(ms)?ms:NaN}function normalizeMinimumInterval(targetMs){var value=isNaN(targetMs)?0:Math.max(Math.floor(targetMs),1);return _moment.default.duration(value)}function calcAutoIntervalNear(targetBucketCount,duration){var targetPerBucketMs=getPerBucketMs(targetBucketCount,duration);var lowerBoundIndex=boundsDescending.findIndex((function(_ref){var bound=_ref.bound;var boundMs=Number(bound);return boundMs<=targetPerBucketMs}));if(lowerBoundIndex!==-1){var nearestInterval=boundsDescending[lowerBoundIndex-1].interval;return _moment.default.duration(nearestInterval)}return normalizeMinimumInterval(targetPerBucketMs)}function calcAutoIntervalLessThan(maxBucketCount,duration){var maxPerBucketMs=getPerBucketMs(maxBucketCount,duration);for(var _i=0,_boundsDescending=boundsDescending;_i<_boundsDescending.length;_i++){var interval=_boundsDescending[_i].interval;if(interval<=maxPerBucketMs){return _moment.default.duration(interval)}}return normalizeMinimumInterval(maxPerBucketMs)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.convertDurationToNormalizedEsInterval=convertDurationToNormalizedEsInterval;exports.convertIntervalToEsInterval=convertIntervalToEsInterval;var _datemath=_interopRequireDefault(__webpack_require__(95));var _common=__webpack_require__(52);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var unitsDesc=_datemath.default.unitsDesc;var largeMax=unitsDesc.indexOf("M");function convertDurationToNormalizedEsInterval(duration){for(var i=0;i<unitsDesc.length;i++){var unit=unitsDesc[i];var val=duration.as(unit);if(val>=1&&Math.floor(val)===val){if(i<=largeMax&&val!==1){continue}return{value:val,unit:unit,expression:val+unit}}}var ms=duration.as("ms");return{value:ms,unit:"ms",expression:ms+"ms"}}function convertIntervalToEsInterval(interval){var _parseEsInterval=(0,_common.parseEsInterval)(interval),value=_parseEsInterval.value,unit=_parseEsInterval.unit;return{value:value,unit:unit,expression:interval}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterDateHistogram=void 0;var _moment=_interopRequireDefault(__webpack_require__(32));var _common=__webpack_require__(52);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var createFilterDateHistogram=function createFilterDateHistogram(agg,key){var start=(0,_moment.default)(key);var interval=agg.buckets.getInterval();return(0,_common.buildRangeFilter)(agg.params.field,{gte:start.toISOString(),lt:start.add(interval).toISOString(),format:"strict_date_optional_time"},agg.getIndexPattern())};exports.createFilterDateHistogram=createFilterDateHistogram},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.histogramBucketAgg=void 0;var _lodash=_interopRequireDefault(__webpack_require__(49));var _i18n=__webpack_require__(1);var _bucket_agg_type=__webpack_require__(96);var _histogram=__webpack_require__(729);var _bucket_agg_types=__webpack_require__(90);var _common=__webpack_require__(52);var _services=__webpack_require__(61);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var histogramBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.HISTOGRAM,title:_i18n.i18n.translate("data.search.aggs.buckets.histogramTitle",{defaultMessage:"Histogram"}),ordered:{},makeLabel:function makeLabel(aggConfig){return aggConfig.getFieldDisplayName()},createFilter:_histogram.createFilterHistogram,decorateAggConfig:function decorateAggConfig(){var autoBounds;return{setAutoBounds:{configurable:true,value:function value(newValue){autoBounds=newValue}},getAutoBounds:{configurable:true,value:function value(){return autoBounds}}}},params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.NUMBER},{name:"intervalBase",default:null,write:function write(){}},{name:"interval",modifyAggConfigOnSearchRequestStart:function modifyAggConfigOnSearchRequestStart(aggConfig,searchSource,options){var field=aggConfig.getField();var aggBody=field.scripted?{script:{source:field.script,lang:field.lang}}:{field:field.name};var childSearchSource=searchSource.createChild().setField("size",0).setField("aggs",{maxAgg:{max:aggBody},minAgg:{min:aggBody}});return childSearchSource.fetch(options).then((function(resp){aggConfig.setAutoBounds({min:_lodash.default.get(resp,"aggregations.minAgg.value"),max:_lodash.default.get(resp,"aggregations.maxAgg.value")})})).catch((function(e){if(e.name==="AbortError")return;(0,_services.getNotifications)().toasts.addWarning(_i18n.i18n.translate("data.search.aggs.histogram.missingMaxMinValuesWarning",{defaultMessage:"Unable to retrieve max and min values to auto-scale histogram buckets. This may lead to poor visualization performance."}))}))},write:function write(aggConfig,output){var interval=parseFloat(aggConfig.params.interval);if(interval<=0){interval=1}var autoBounds=aggConfig.getAutoBounds();if(autoBounds){var range=autoBounds.max-autoBounds.min;var bars=range/interval;var config=(0,_services.getUiSettings)();if(bars>config.get("histogram:maxBars")){var minInterval=range/config.get("histogram:maxBars");var orderOfMagnitude=Math.pow(10,Math.floor(Math.log10(minInterval)));var roundInterval=orderOfMagnitude;while(roundInterval<minInterval){roundInterval+=orderOfMagnitude}interval=roundInterval}}var base=aggConfig.params.intervalBase;if(base){if(interval<base){interval=base}else if(interval%base!==0){interval=Math.round(interval/base)*base}}output.params.interval=interval}},{name:"min_doc_count",default:false,write:function write(aggConfig,output){if(aggConfig.params.min_doc_count){output.params.min_doc_count=0}else{output.params.min_doc_count=1}}},{name:"has_extended_bounds",default:false,write:function write(){}},{name:"extended_bounds",default:{min:"",max:""},write:function write(aggConfig,output){var _aggConfig$params$ext=aggConfig.params.extended_bounds,min=_aggConfig$params$ext.min,max=_aggConfig$params$ext.max;if(aggConfig.params.has_extended_bounds&&(min||min===0)&&(max||max===0)){output.params.extended_bounds={min:min,max:max}}},shouldShow:function shouldShow(aggConfig){return aggConfig.params.has_extended_bounds}}]});exports.histogramBucketAgg=histogramBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterHistogram=void 0;var _common=__webpack_require__(52);var createFilterHistogram=function createFilterHistogram(aggConfig,key){var value=parseInt(key,10);var params={gte:value,lt:value+aggConfig.params.interval};return(0,_common.buildRangeFilter)(aggConfig.params.field,params,aggConfig.getIndexPattern(),aggConfig.fieldFormatter()(key))};exports.createFilterHistogram=createFilterHistogram},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.rangeBucketAgg=void 0;var _i18n=__webpack_require__(1);var _bucket_agg_type=__webpack_require__(96);var _common=__webpack_require__(52);var _range_key=__webpack_require__(731);var _range=__webpack_require__(732);var _bucket_agg_types=__webpack_require__(90);var keyCaches=new WeakMap;var formats=new WeakMap;var rangeTitle=_i18n.i18n.translate("data.search.aggs.buckets.rangeTitle",{defaultMessage:"Range"});var rangeBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.RANGE,title:rangeTitle,createFilter:_range.createFilterRange,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.aggTypesLabel",{defaultMessage:"{fieldName} ranges",values:{fieldName:aggConfig.getFieldDisplayName()}})},getKey:function getKey(bucket,key,agg){var keys=keyCaches.get(agg);if(!keys){keys=new Map;keyCaches.set(agg,keys)}var id=_range_key.RangeKey.idBucket(bucket);key=keys.get(id);if(!key){key=new _range_key.RangeKey(bucket);keys.set(id,key)}return key},getFormat:function getFormat(agg){var aggFormat=formats.get(agg);if(aggFormat)return aggFormat;var RangeFormat=_common.FieldFormat.from((function(range){var format=agg.fieldOwnFormatter();var gte="";var lt="<";return _i18n.i18n.translate("data.search.aggs.aggTypes.rangesFormatMessage",{defaultMessage:"{gte} {from} and {lt} {to}",values:{gte:gte,from:format(range.gte),lt:lt,to:format(range.lt)}})}));aggFormat=new RangeFormat;formats.set(agg,aggFormat);return aggFormat},params:[{name:"field",type:"field",filterFieldTypes:[_common.KBN_FIELD_TYPES.NUMBER]},{name:"ranges",default:[{from:0,to:1e3},{from:1e3,to:2e3}],write:function write(aggConfig,output){output.params.ranges=aggConfig.params.ranges;output.params.keyed=true}}]});exports.rangeBucketAgg=rangeBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RangeKey=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var id=Symbol("id");var RangeKey=function(){function RangeKey(bucket){_classCallCheck(this,RangeKey);_defineProperty(this,id,void 0);_defineProperty(this,"gte",void 0);_defineProperty(this,"lt",void 0);this.gte=bucket.from==null?-Infinity:bucket.from;this.lt=bucket.to==null?+Infinity:bucket.to;this[id]=RangeKey.idBucket(bucket)}_createClass(RangeKey,[{key:"toString",value:function toString(){return this[id]}}],[{key:"idBucket",value:function idBucket(bucket){return"from:".concat(bucket.from,",to:").concat(bucket.to)}}]);return RangeKey}();exports.RangeKey=RangeKey},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterRange=void 0;var _common=__webpack_require__(52);var createFilterRange=function createFilterRange(aggConfig,params){return(0,_common.buildRangeFilter)(aggConfig.params.field,params,aggConfig.getIndexPattern(),aggConfig.fieldFormatter()(params))};exports.createFilterRange=createFilterRange},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterDateRange=void 0;var _moment=_interopRequireDefault(__webpack_require__(32));var _common=__webpack_require__(52);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var createFilterDateRange=function createFilterDateRange(agg,_ref){var from=_ref.from,to=_ref.to;var filter={};if(from)filter.gte=(0,_moment.default)(from).toISOString();if(to)filter.lt=(0,_moment.default)(to).toISOString();if(to&&from)filter.format="strict_date_optional_time";return(0,_common.buildRangeFilter)(agg.params.field,filter,agg.getIndexPattern())};exports.createFilterDateRange=createFilterDateRange},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterIpRange=void 0;var _cidr_mask=__webpack_require__(346);var _common=__webpack_require__(52);var createFilterIpRange=function createFilterIpRange(aggConfig,key){var range;if(key.type==="mask"){range=new _cidr_mask.CidrMask(key.mask).getRange()}else{range={from:key.from?key.from:-Infinity,to:key.to?key.to:Infinity}}return(0,_common.buildRangeFilter)(aggConfig.params.field,{gte:range.from,lte:range.to},aggConfig.getIndexPattern())};exports.createFilterIpRange=createFilterIpRange},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.esaggs=void 0;var _lodash=__webpack_require__(49);var _i18n=__webpack_require__(1);var _public=__webpack_require__(34);var _search_source=__webpack_require__(349);var _tabify=__webpack_require__(360);var _common=__webpack_require__(52);var _query=__webpack_require__(125);var _services=__webpack_require__(61);var _build_tabular_inspector_data=__webpack_require__(793);var _utils=__webpack_require__(231);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var name="esaggs";var handleCourierRequest=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref2){var searchSource,aggs,timeRange,query,filters,forceFetch,partialRows,metricsAtAllLevels,inspectorAdapters,filterManager,abortSignal,timeFilterSearchSource,requestSearchSource,reqBody,queryHash,shouldQuery,request,response,resp,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,agg,parsedTimeRange,tabifyParams,tabifyCacheHash,shouldCalculateNewTabify;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:searchSource=_ref2.searchSource,aggs=_ref2.aggs,timeRange=_ref2.timeRange,query=_ref2.query,filters=_ref2.filters,forceFetch=_ref2.forceFetch,partialRows=_ref2.partialRows,metricsAtAllLevels=_ref2.metricsAtAllLevels,inspectorAdapters=_ref2.inspectorAdapters,filterManager=_ref2.filterManager,abortSignal=_ref2.abortSignal;timeFilterSearchSource=searchSource.createChild({callParentStartHandlers:true});requestSearchSource=timeFilterSearchSource.createChild({callParentStartHandlers:true});aggs.setTimeRange(timeRange);Object.defineProperty(requestSearchSource,"history",{get:function get(){return searchSource.history},set:function set(history){return searchSource.history=history}});requestSearchSource.setField("aggs",(function(){return aggs.toDsl(metricsAtAllLevels)}));requestSearchSource.onRequestStart((function(paramSearchSource,options){return aggs.onSearchRequestStart(paramSearchSource,options)}));if(timeRange){timeFilterSearchSource.setField("filter",(function(){return(0,_query.getTime)(searchSource.getField("index"),timeRange)}))}requestSearchSource.setField("filter",filters);requestSearchSource.setField("query",query);_context.next=12;return requestSearchSource.getSearchRequestBody();case 12:reqBody=_context.sent;queryHash=(0,_public.calculateObjectHash)(reqBody);shouldQuery=forceFetch||searchSource.lastQuery!==queryHash;if(!shouldQuery){_context.next=35;break}inspectorAdapters.requests.reset();request=inspectorAdapters.requests.start(_i18n.i18n.translate("data.functions.esaggs.inspector.dataRequest.title",{defaultMessage:"Data"}),{description:_i18n.i18n.translate("data.functions.esaggs.inspector.dataRequest.description",{defaultMessage:"This request queries Elasticsearch to fetch the data for the visualization."})});request.stats((0,_utils.getRequestInspectorStats)(requestSearchSource));_context.prev=19;_context.next=22;return requestSearchSource.fetch({abortSignal:abortSignal});case 22:response=_context.sent;searchSource.lastQuery=queryHash;request.stats((0,_utils.getResponseInspectorStats)(searchSource,response)).ok({json:response});searchSource.rawResponse=response;_context.next=32;break;case 28:_context.prev=28;_context.t0=_context["catch"](19);request.error({json:_context.t0});throw _context.t0;case 32:_context.prev=32;requestSearchSource.getSearchRequestBody().then((function(req){request.json(req)}));return _context.finish(32);case 35:resp=searchSource.rawResponse;_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=39;_iterator=aggs.aggs[Symbol.iterator]();case 41:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context.next=50;break}agg=_step.value;if(!(0,_lodash.has)(agg,"type.postFlightRequest")){_context.next=47;break}_context.next=46;return agg.type.postFlightRequest(resp,aggs,agg,requestSearchSource,inspectorAdapters,abortSignal);case 46:resp=_context.sent;case 47:_iteratorNormalCompletion=true;_context.next=41;break;case 50:_context.next=56;break;case 52:_context.prev=52;_context.t1=_context["catch"](39);_didIteratorError=true;_iteratorError=_context.t1;case 56:_context.prev=56;_context.prev=57;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}case 59:_context.prev=59;if(!_didIteratorError){_context.next=62;break}throw _iteratorError;case 62:return _context.finish(59);case 63:return _context.finish(56);case 64:searchSource.finalResponse=resp;parsedTimeRange=timeRange?(0,_query.getTime)(aggs.indexPattern,timeRange):null;tabifyParams={metricsAtAllLevels:metricsAtAllLevels,partialRows:partialRows,timeRange:parsedTimeRange?parsedTimeRange.range:undefined};tabifyCacheHash=(0,_public.calculateObjectHash)(_objectSpread({tabifyAggs:aggs},tabifyParams));shouldCalculateNewTabify=shouldQuery||searchSource.lastTabifyHash!==tabifyCacheHash;if(shouldCalculateNewTabify){searchSource.lastTabifyHash=tabifyCacheHash;searchSource.tabifiedResponse=(0,_tabify.tabifyAggResponse)(aggs,searchSource.finalResponse,tabifyParams)}inspectorAdapters.data.setTabularLoader((function(){return(0,_build_tabular_inspector_data.buildTabularInspectorData)(searchSource.tabifiedResponse,filterManager)}),{returnsFormattedValues:true});return _context.abrupt("return",searchSource.tabifiedResponse);case 72:case"end":return _context.stop()}}}),_callee,null,[[19,28,32,35],[39,52,56,64],[57,,59,63]])})));return function handleCourierRequest(_x){return _ref.apply(this,arguments)}}();var esaggs=function esaggs(){return{name:name,type:"kibana_datatable",inputTypes:["kibana_context","null"],help:_i18n.i18n.translate("data.functions.esaggs.help",{defaultMessage:"Run AggConfig aggregation"}),args:{index:{types:["string"],help:""},metricsAtAllLevels:{types:["boolean"],default:false,help:""},partialRows:{types:["boolean"],default:false,help:""},includeFormatHints:{types:["boolean"],default:false,help:""},aggConfigs:{types:["string"],default:'""',help:""}},fn:function fn(input,args,_ref3){var inspectorAdapters=_ref3.inspectorAdapters,abortSignal=_ref3.abortSignal;return _asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var indexPatterns,_getQueryService,filterManager,searchService,aggConfigsState,indexPattern,aggs,searchSource,response,table;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:indexPatterns=(0,_services.getIndexPatterns)();_getQueryService=(0,_services.getQueryService)(),filterManager=_getQueryService.filterManager;searchService=(0,_services.getSearchService)();aggConfigsState=JSON.parse(args.aggConfigs);_context2.next=6;return indexPatterns.get(args.index);case 6:indexPattern=_context2.sent;aggs=searchService.aggs.createAggConfigs(indexPattern,aggConfigsState);searchSource=new _search_source.SearchSource;searchSource.setField("index",indexPattern);searchSource.setField("size",0);_context2.next=13;return handleCourierRequest({searchSource:searchSource,aggs:aggs,timeRange:(0,_lodash.get)(input,"timeRange",undefined),query:(0,_lodash.get)(input,"query",undefined),filters:(0,_lodash.get)(input,"filters",undefined),forceFetch:true,metricsAtAllLevels:args.metricsAtAllLevels,partialRows:args.partialRows,inspectorAdapters:inspectorAdapters,filterManager:filterManager,abortSignal:abortSignal});case 13:response=_context2.sent;table={type:"kibana_datatable",rows:response.rows,columns:response.columns.map((function(column){var cleanedColumn={id:column.id,name:column.name,meta:(0,_utils.serializeAggConfig)(column.aggConfig)};if(args.includeFormatHints){cleanedColumn.formatHint=(0,_common.serializeFieldFormat)(column.aggConfig)}return cleanedColumn}))};return _context2.abrupt("return",table);case 16:case"end":return _context2.stop()}}}),_callee2)})))()}}};exports.esaggs=esaggs},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.normalizeSortRequest=normalizeSortRequest;function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function normalizeSortRequest(sortObject,indexPattern){var defaultSortOptions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var sortArray=Array.isArray(sortObject)?sortObject:[sortObject];return sortArray.map((function(sortable){return normalize(sortable,indexPattern,defaultSortOptions)}))}function normalize(sortable,indexPattern,defaultSortOptions){var _Object$entries=Object.entries(sortable),_Object$entries2=_slicedToArray(_Object$entries,1),_Object$entries2$=_slicedToArray(_Object$entries2[0],2),sortField=_Object$entries2$[0],sortOrder=_Object$entries2$[1];var order=_typeof(sortOrder)==="object"?sortOrder:{order:sortOrder};if(indexPattern&&typeof indexPattern!=="string"){var indexField=indexPattern.fields.find((function(_ref){var name=_ref.name;return name===sortField}));if(indexField&&indexField.scripted&&indexField.sortable){return{_script:_objectSpread({script:{source:indexField.script,lang:indexField.lang},type:castSortType(indexField.type)},order)}}}var unmapped_type=defaultSortOptions.unmapped_type,otherSortOptions=_objectWithoutProperties(defaultSortOptions,["unmapped_type"]);return _defineProperty({},sortField,_objectSpread({},order,{},sortField==="_score"?otherSortOptions:defaultSortOptions))}function castSortType(type){if(["number","string"].includes(type)){return"number"}else if(["string","boolean"].includes(type)){return"string"}throw new Error("Unsupported script sort type: ".concat(type))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterDocvalueFields=filterDocvalueFields;function filterDocvalueFields(docvalueFields,fields){return docvalueFields.filter((function(docValue){var docvalueFieldName=typeof docValue==="string"?docValue:docValue.field;return fields.includes(docvalueFieldName)}))}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchSoon=fetchSoon;var _call_client=__webpack_require__(740);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function fetchSoon(_x,_x2,_x3){return _fetchSoon.apply(this,arguments)}function _fetchSoon(){_fetchSoon=_asyncToGenerator(regeneratorRuntime.mark((function _callee(request,options,fetchHandlers){var msToDelay;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:msToDelay=fetchHandlers.config.get("courier:batchSearches")?50:0;return _context.abrupt("return",delayedFetch(request,options,fetchHandlers,msToDelay));case 2:case"end":return _context.stop()}}}),_callee)})));return _fetchSoon.apply(this,arguments)}function delay(fn,ms){return new Promise((function(resolve){setTimeout((function(){return resolve(fn())}),ms)}))}var requestsToFetch=[];var requestOptions=[];var fetchInProgress=null;function delayedFetch(_x4,_x5,_x6,_x7){return _delayedFetch.apply(this,arguments)}function _delayedFetch(){_delayedFetch=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(request,options,fetchHandlers,ms){var i,responses;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(ms===0)){_context2.next=2;break}return _context2.abrupt("return",(0,_call_client.callClient)([request],[options],fetchHandlers)[0]);case 2:i=requestsToFetch.length;requestsToFetch=[].concat(_toConsumableArray(requestsToFetch),[request]);requestOptions=[].concat(_toConsumableArray(requestOptions),[options]);_context2.next=7;return fetchInProgress=fetchInProgress||delay((function(){var response=(0,_call_client.callClient)(requestsToFetch,requestOptions,fetchHandlers);requestsToFetch=[];requestOptions=[];fetchInProgress=null;return response}),ms);case 7:responses=_context2.sent;return _context2.abrupt("return",responses[i]);case 9:case"end":return _context2.stop()}}}),_callee2)})));return _delayedFetch.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.callClient=callClient;var _handle_response=__webpack_require__(741);var _search_strategy=__webpack_require__(359);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function callClient(searchRequests){var requestsOptions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var fetchHandlers=arguments.length>2?arguments[2]:undefined;var requestOptionEntries=searchRequests.map((function(request,i){return[request,requestsOptions[i]]}));var requestOptionsMap=new Map(requestOptionEntries);var requestResponseMap=new Map;var _defaultSearchStrateg=_search_strategy.defaultSearchStrategy.search(_objectSpread({searchRequests:searchRequests},fetchHandlers)),searching=_defaultSearchStrateg.searching,abort=_defaultSearchStrateg.abort;searchRequests.forEach((function(request,i){var response=searching.then((function(results){return(0,_handle_response.handleResponse)(request,results[i])}));var _ref=requestOptionsMap.get(request)||{},_ref$abortSignal=_ref.abortSignal,abortSignal=_ref$abortSignal===void 0?null:_ref$abortSignal;if(abortSignal)abortSignal.addEventListener("abort",abort);requestResponseMap.set(request,response)}));return searchRequests.map((function(request){return requestResponseMap.get(request)}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.handleResponse=handleResponse;var _react=_interopRequireDefault(__webpack_require__(28));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(29);var _ui=__webpack_require__(179);var _public=__webpack_require__(31);var _services=__webpack_require__(61);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function handleResponse(request,response){if(response.timed_out){(0,_services.getNotifications)().toasts.addWarning({title:_i18n.i18n.translate("data.search.searchSource.fetch.requestTimedOutNotificationMessage",{defaultMessage:"Data might be incomplete because your request timed out"})})}if(response._shards&&response._shards.failed){var title=_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedNotificationMessage",{defaultMessage:"{shardsFailed} of {shardsTotal} shards failed",values:{shardsFailed:response._shards.failed,shardsTotal:response._shards.total}});var description=_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedNotificationDescription",{defaultMessage:"The data you are seeing might be incomplete or wrong."});var text=(0,_public.toMountPoint)(_react.default.createElement(_react.default.Fragment,null,description,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_ui.ShardFailureOpenModalButton,{request:request.body,response:response,title:title})));(0,_services.getNotifications)().toasts.addWarning({title:title,text:text})}return response}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SuggestionsComponent",{enumerable:true,get:function get(){return _suggestions_component.SuggestionsComponent}});var _suggestions_component=__webpack_require__(743)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SuggestionsComponent=void 0;var _lodash=__webpack_require__(49);var _react=_interopRequireWildcard(__webpack_require__(28));var _suggestion_component=__webpack_require__(744);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SuggestionsComponent=function(_Component){_inherits(SuggestionsComponent,_Component);function SuggestionsComponent(){var _getPrototypeOf2;var _this;_classCallCheck(this,SuggestionsComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SuggestionsComponent)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"childNodes",[]);_defineProperty(_assertThisInitialized(_this),"parentNode",null);_defineProperty(_assertThisInitialized(_this),"scrollIntoView",(function(){if(_this.props.index===null){return}var parent=_this.parentNode;var child=_this.childNodes[_this.props.index];if(_this.props.index==null||!parent||!child){return}var scrollTop=Math.max(Math.min(parent.scrollTop,child.offsetTop),child.offsetTop+child.offsetHeight-parent.offsetHeight);parent.scrollTop=scrollTop}));_defineProperty(_assertThisInitialized(_this),"handleScroll",(function(){if(!_this.props.loadMore||!_this.parentNode){return}var position=_this.parentNode.scrollTop+_this.parentNode.offsetHeight;var height=_this.parentNode.scrollHeight;var remaining=height-position;var margin=50;if(!height||!position){return}if(remaining<=margin){_this.props.loadMore()}}));return _this}_createClass(SuggestionsComponent,[{key:"render",value:function render(){var _this2=this;if(!this.props.show||(0,_lodash.isEmpty)(this.props.suggestions)){return null}var suggestions=this.props.suggestions.map((function(suggestion,index){return _react.default.createElement(_suggestion_component.SuggestionComponent,{innerRef:function innerRef(node){return _this2.childNodes[index]=node},selected:index===_this2.props.index,suggestion:suggestion,onClick:_this2.props.onClick,onMouseEnter:function onMouseEnter(){return _this2.props.onMouseEnter(index)},ariaId:"suggestion-"+index,key:"".concat(suggestion.type," - ").concat(suggestion.text)})}));return _react.default.createElement("div",{className:"reactSuggestionTypeahead"},_react.default.createElement("div",{className:"kbnTypeahead"},_react.default.createElement("div",{className:"kbnTypeahead__popover"},_react.default.createElement("div",{id:"kbnTypeahead__items",className:"kbnTypeahead__items",role:"listbox",ref:function ref(node){return _this2.parentNode=node},onScroll:this.handleScroll},suggestions))))}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(prevProps.index!==this.props.index){this.scrollIntoView()}}}]);return SuggestionsComponent}(_react.Component);exports.SuggestionsComponent=SuggestionsComponent},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SuggestionComponent=SuggestionComponent;var _eui=__webpack_require__(29);var _classnames=_interopRequireDefault(__webpack_require__(87));var _react=_interopRequireDefault(__webpack_require__(28));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getEuiIconType(type){switch(type){case"field":return"kqlField";case"value":return"kqlValue";case"recentSearch":return"search";case"conjunction":return"kqlSelector";case"operator":return"kqlOperand";default:throw new Error("Unknown type: ".concat(type))}}function SuggestionComponent(props){return _react.default.createElement("div",{className:(0,_classnames.default)({kbnTypeahead__item:true,active:props.selected}),role:"option",onClick:function onClick(){return props.onClick(props.suggestion)},onMouseEnter:props.onMouseEnter,ref:props.innerRef,id:props.ariaId,"aria-selected":props.selected,"data-test-subj":"autocompleteSuggestion-".concat(props.suggestion.type,"-").concat(props.suggestion.text.replace(/\s/g,"-"))},_react.default.createElement("div",{className:"kbnSuggestionItem kbnSuggestionItem--"+props.suggestion.type},_react.default.createElement("div",{className:"kbnSuggestionItem__type"},_react.default.createElement(_eui.EuiIcon,{type:getEuiIconType(props.suggestion.type)})),_react.default.createElement("div",{className:"kbnSuggestionItem__text"},props.suggestion.text),_react.default.createElement("div",{className:"kbnSuggestionItem__description"},props.suggestion.description)))}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.createIndexPatternSelect=createIndexPatternSelect;exports.IndexPatternSelect=void 0;var _lodash=_interopRequireDefault(__webpack_require__(49));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _lib=__webpack_require__(173);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var getIndexPatterns=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(client,search,fields){var resp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return client.find({type:"index-pattern",fields:fields,search:"".concat(search,"*"),searchFields:["title"],perPage:100});case 2:resp=_context.sent;return _context.abrupt("return",resp.savedObjects);case 4:case"end":return _context.stop()}}}),_callee)})));return function getIndexPatterns(_x,_x2,_x3){return _ref.apply(this,arguments)}}();function createIndexPatternSelect(savedObjectsClient){return function(props){return _react.default.createElement(IndexPatternSelect,_extends({},props,{savedObjectsClient:savedObjectsClient}))}}var IndexPatternSelect=function(_Component){_inherits(IndexPatternSelect,_Component);function IndexPatternSelect(props){var _this;_classCallCheck(this,IndexPatternSelect);_this=_possibleConstructorReturn(this,_getPrototypeOf(IndexPatternSelect).call(this,props));_defineProperty(_assertThisInitialized(_this),"isMounted",false);_defineProperty(_assertThisInitialized(_this),"state",void 0);_defineProperty(_assertThisInitialized(_this),"fetchSelectedIndexPattern",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(indexPatternId){var indexPatternTitle;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(indexPatternId){_context2.next=3;break}_this.setState({selectedIndexPattern:undefined});return _context2.abrupt("return");case 3:_context2.prev=3;_context2.next=6;return(0,_lib.getTitle)(_this.props.savedObjectsClient,indexPatternId);case 6:indexPatternTitle=_context2.sent;_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2["catch"](3);return _context2.abrupt("return");case 12:if(_this.isMounted){_context2.next=14;break}return _context2.abrupt("return");case 14:_this.setState({selectedIndexPattern:{value:indexPatternId,label:indexPatternTitle}});case 15:case"end":return _context2.stop()}}}),_callee2,null,[[3,9]])})));return function(_x4){return _ref2.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"debouncedFetch",_lodash.default.debounce(function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(searchValue){var _this$props,fieldTypes,onNoIndexPatterns,savedObjectsClient,savedObjectFields,savedObjects,options;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this$props=_this.props,fieldTypes=_this$props.fieldTypes,onNoIndexPatterns=_this$props.onNoIndexPatterns,savedObjectsClient=_this$props.savedObjectsClient;savedObjectFields=["title"];if(fieldTypes){savedObjectFields.push("fields")}_context3.next=5;return getIndexPatterns(savedObjectsClient,searchValue,savedObjectFields);case 5:savedObjects=_context3.sent;if(fieldTypes){savedObjects=savedObjects.filter((function(savedObject){try{var indexPatternFields=JSON.parse(savedObject.attributes.fields);return indexPatternFields.some((function(field){return fieldTypes===null||fieldTypes===void 0?void 0:fieldTypes.includes(field.type)}))}catch(err){return false}}))}if(_this.isMounted){_context3.next=9;break}return _context3.abrupt("return");case 9:if(searchValue===_this.state.searchValue){options=savedObjects.map((function(indexPatternSavedObject){return{label:indexPatternSavedObject.attributes.title,value:indexPatternSavedObject.id}}));_this.setState({isLoading:false,options:options});if(onNoIndexPatterns&&searchValue===""&&options.length===0){onNoIndexPatterns()}}case 10:case"end":return _context3.stop()}}}),_callee3)})));return function(_x5){return _ref3.apply(this,arguments)}}(),300));_defineProperty(_assertThisInitialized(_this),"fetchOptions",(function(){var searchValue=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_this.setState({isLoading:true,searchValue:searchValue},_this.debouncedFetch.bind(null,searchValue))}));_defineProperty(_assertThisInitialized(_this),"onChange",(function(selectedOptions){_this.props.onChange(_lodash.default.get(selectedOptions,"0.value"))}));_this.state={isLoading:false,options:[],selectedIndexPattern:undefined,searchValue:undefined};return _this}_createClass(IndexPatternSelect,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.isMounted=false;this.debouncedFetch.cancel()}},{key:"componentDidMount",value:function componentDidMount(){this.isMounted=true;this.fetchOptions();this.fetchSelectedIndexPattern(this.props.indexPatternId)}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.indexPatternId!==this.props.indexPatternId){this.fetchSelectedIndexPattern(nextProps.indexPatternId)}}},{key:"render",value:function render(){var _this$props2=this.props,fieldTypes=_this$props2.fieldTypes,onChange=_this$props2.onChange,indexPatternId=_this$props2.indexPatternId,placeholder=_this$props2.placeholder,onNoIndexPatterns=_this$props2.onNoIndexPatterns,savedObjectsClient=_this$props2.savedObjectsClient,rest=_objectWithoutProperties(_this$props2,["fieldTypes","onChange","indexPatternId","placeholder","onNoIndexPatterns","savedObjectsClient"]);return _react.default.createElement(_eui.EuiComboBox,_extends({},rest,{placeholder:placeholder,singleSelection:true,isLoading:this.state.isLoading,onSearchChange:this.fetchOptions,options:this.state.options,selectedOptions:this.state.selectedIndexPattern?[this.state.selectedIndexPattern]:[],onChange:this.onChange}))}}]);return IndexPatternSelect}(_react.Component);exports.IndexPatternSelect=IndexPatternSelect},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchIndexPatterns=fetchIndexPatterns;var _lodash=__webpack_require__(49);var _=__webpack_require__(63);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function fetchIndexPatterns(_x,_x2,_x3){return _fetchIndexPatterns.apply(this,arguments)}function _fetchIndexPatterns(){_fetchIndexPatterns=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObjectsClient,indexPatternStrings,uiSettings){var searchString,indexPatternsFromSavedObjects,exactMatches,defaultIndex,allMatches;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!indexPatternStrings||(0,_lodash.isEmpty)(indexPatternStrings))){_context.next=2;break}return _context.abrupt("return",[]);case 2:searchString=indexPatternStrings.map((function(string){return'"'.concat(string,'"')})).join(" | ");_context.next=5;return savedObjectsClient.find({type:"index-pattern",fields:["title","fields"],search:searchString,searchFields:["title"]});case 5:indexPatternsFromSavedObjects=_context.sent;exactMatches=indexPatternsFromSavedObjects.savedObjects.filter((function(savedObject){return indexPatternStrings.includes(savedObject.attributes.title)}));defaultIndex=uiSettings.get("defaultIndex");if(!(exactMatches.length===indexPatternStrings.length)){_context.next=12;break}_context.t0=exactMatches;_context.next=19;break;case 12:_context.t1=[];_context.t2=_toConsumableArray(exactMatches);_context.next=16;return savedObjectsClient.get("index-pattern",defaultIndex);case 16:_context.t3=_context.sent;_context.t4=[_context.t3];_context.t0=_context.t1.concat.call(_context.t1,_context.t2,_context.t4);case 19:allMatches=_context.t0;return _context.abrupt("return",allMatches.map(_.indexPatterns.getFromSavedObject));case 21:case"end":return _context.stop()}}}),_callee)})));return _fetchIndexPatterns.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QueryLanguageSwitcher=QueryLanguageSwitcher;var _eui=__webpack_require__(29);var _react=__webpack_require__(30);var _react2=_interopRequireWildcard(__webpack_require__(28));var _public=__webpack_require__(31);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function QueryLanguageSwitcher(props){var kibana=(0,_public.useKibana)();var kueryQuerySyntaxDocs=kibana.services.docLinks.links.query.kueryQuerySyntax;var _useState=(0,_react2.useState)(false),_useState2=_slicedToArray(_useState,2),isPopoverOpen=_useState2[0],setIsPopoverOpen=_useState2[1];var luceneLabel=_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.luceneLanguageName",defaultMessage:"Lucene"});var kqlLabel=_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.kqlLanguageName",defaultMessage:"KQL"});var kqlFullName=_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.kqlFullLanguageName",defaultMessage:"Kibana Query Language"});var button=_react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs",onClick:function onClick(){return setIsPopoverOpen(!isPopoverOpen)},className:"euiFormControlLayout__append","data-test-subj":"switchQueryLanguageButton"},props.language==="lucene"?luceneLabel:kqlLabel);return _react2.default.createElement(_eui.EuiPopover,{id:"queryLanguageSwitcherPopover",anchorClassName:"euiFormControlLayout__append",ownFocus:true,anchorPosition:props.anchorPosition||"downRight",button:button,isOpen:isPopoverOpen,closePopover:function closePopover(){return setIsPopoverOpen(false)},withTitle:true},_react2.default.createElement(_eui.EuiPopoverTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.syntaxOptionsTitle",defaultMessage:"Syntax options"})),_react2.default.createElement("div",{style:{width:"350px"}},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.syntaxOptionsDescription",defaultMessage:"The {docsLink} (KQL) offers a simplified query syntax and support for scripted fields. KQL also provides autocomplete if you have a Basic license or above. If you turn off KQL, Kibana uses Lucene.",values:{docsLink:_react2.default.createElement(_eui.EuiLink,{href:kueryQuerySyntaxDocs,target:"_blank"},kqlFullName)}}))),_react2.default.createElement(_eui.EuiSpacer,{size:"m"}),_react2.default.createElement(_eui.EuiForm,null,_react2.default.createElement(_eui.EuiFormRow,{label:kqlFullName},_react2.default.createElement(_eui.EuiSwitch,{id:"queryEnhancementOptIn",name:"popswitch",label:props.language==="kuery"?_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.kqlOnLabel",defaultMessage:"On"}):_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.kqlOffLabel",defaultMessage:"Off"}),checked:props.language==="kuery",onChange:function onChange(){var newLanguage=props.language==="lucene"?"kuery":"lucene";props.onSelectLanguage(newLanguage)},"data-test-subj":"languageToggle"})))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SearchBar",{enumerable:true,get:function get(){return _search_bar.SearchBar}});Object.defineProperty(exports,"SearchBarProps",{enumerable:true,get:function get(){return _search_bar.SearchBarProps}});Object.defineProperty(exports,"StatefulSearchBarProps",{enumerable:true,get:function get(){return _create_search_bar.StatefulSearchBarProps}});var _search_bar=__webpack_require__(354);var _create_search_bar=__webpack_require__(355)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.QueryBarTopRow=QueryBarTopRow;var _datemath=_interopRequireDefault(__webpack_require__(95));var _classnames=_interopRequireDefault(__webpack_require__(87));var _react=_interopRequireWildcard(__webpack_require__(28));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(29);var _react2=__webpack_require__(30);var _public=__webpack_require__(31);var _query_string_input=__webpack_require__(353);var _common=__webpack_require__(52);var _query=__webpack_require__(125);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function QueryBarTopRow(props){var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isDateRangeInvalid=_useState2[0],setIsDateRangeInvalid=_useState2[1];var kibana=(0,_public.useKibana)();var _kibana$services=kibana.services,uiSettings=_kibana$services.uiSettings,notifications=_kibana$services.notifications,storage=_kibana$services.storage,appName=_kibana$services.appName,docLinks=_kibana$services.docLinks;var kueryQuerySyntaxLink=docLinks.links.query.kueryQuerySyntax;var queryLanguage=props.query&&props.query.language;var persistedLog=_react.default.useMemo((function(){return queryLanguage&&uiSettings&&storage&&appName?(0,_query.getQueryLog)(uiSettings,storage,appName,queryLanguage):undefined}),[appName,queryLanguage,uiSettings,storage]);function onClickSubmitButton(event){if(persistedLog&&props.query){persistedLog.add(props.query.query)}event.preventDefault();onSubmit({query:props.query,dateRange:getDateRange()})}function getDateRange(){var defaultTimeSetting=uiSettings.get("timepicker:timeDefaults");return{from:props.dateRangeFrom||defaultTimeSetting.from,to:props.dateRangeTo||defaultTimeSetting.to}}function onQueryChange(query){props.onChange({query:query,dateRange:getDateRange()})}function onTimeChange(_ref){var start=_ref.start,end=_ref.end,isInvalid=_ref.isInvalid,isQuickSelection=_ref.isQuickSelection;setIsDateRangeInvalid(isInvalid);var retVal={query:props.query,dateRange:{from:start,to:end}};if(isQuickSelection){props.onSubmit(retVal)}else{props.onChange(retVal)}}function onRefresh(_ref2){var start=_ref2.start,end=_ref2.end;var retVal={dateRange:{from:start,to:end}};if(props.onRefresh){props.onRefresh(retVal)}}function onSubmit(_ref3){var query=_ref3.query,dateRange=_ref3.dateRange;handleLuceneSyntaxWarning();if(props.timeHistory){props.timeHistory.add(dateRange)}props.onSubmit({query:query,dateRange:dateRange})}function onInputSubmit(query){onSubmit({query:query,dateRange:getDateRange()})}function toAbsoluteString(value){var roundUp=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var valueAsMoment=_datemath.default.parse(value,{roundUp:roundUp});if(!valueAsMoment){return value}return valueAsMoment.toISOString()}function renderQueryInput(){if(!shouldRenderQueryInput())return;return _react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_query_string_input.QueryStringInput,{disableAutoFocus:props.disableAutoFocus,indexPatterns:props.indexPatterns,prepend:props.prepend,query:props.query,screenTitle:props.screenTitle,onChange:onQueryChange,onSubmit:onInputSubmit,persistedLog:persistedLog,dataTestSubj:props.dataTestSubj}))}function renderSharingMetaFields(){var _getDateRange=getDateRange(),from=_getDateRange.from,to=_getDateRange.to;var dateRangePretty=(0,_eui.prettyDuration)(toAbsoluteString(from),toAbsoluteString(to),[],uiSettings.get("dateFormat"));return _react.default.createElement("div",{"data-shared-timefilter-duration":dateRangePretty,"data-test-subj":"dataSharedTimefilterDuration"})}function shouldRenderDatePicker(){return Boolean(props.showDatePicker||props.showAutoRefreshOnly)}function shouldRenderQueryInput(){return Boolean(props.showQueryInput&&props.indexPatterns&&props.query&&storage)}function renderUpdateButton(){var button=props.customSubmitButton?_react.default.cloneElement(props.customSubmitButton,{onClick:onClickSubmitButton}):_react.default.createElement(_eui.EuiSuperUpdateButton,{needsUpdate:props.isDirty,isDisabled:isDateRangeInvalid,isLoading:props.isLoading,onClick:onClickSubmitButton,"data-test-subj":"querySubmitButton"});if(!shouldRenderDatePicker()){return button}return _react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s"},renderDatePicker(),_react.default.createElement(_eui.EuiFlexItem,{grow:false},button))}function renderDatePicker(){if(!shouldRenderDatePicker()){return null}var recentlyUsedRanges;if(props.timeHistory){recentlyUsedRanges=props.timeHistory.get().map((function(_ref4){var from=_ref4.from,to=_ref4.to;return{start:from,end:to}}))}var commonlyUsedRanges=uiSettings.get("timepicker:quickRanges").map((function(_ref5){var from=_ref5.from,to=_ref5.to,display=_ref5.display;return{start:from,end:to,label:display}}));return _react.default.createElement(_eui.EuiFlexItem,{className:"kbnQueryBar__datePickerWrapper"},_react.default.createElement(_eui.EuiSuperDatePicker,{start:props.dateRangeFrom,end:props.dateRangeTo,isPaused:props.isRefreshPaused,refreshInterval:props.refreshInterval,onTimeChange:onTimeChange,onRefresh:onRefresh,onRefreshChange:props.onRefreshChange,showUpdateButton:false,recentlyUsedRanges:recentlyUsedRanges,commonlyUsedRanges:commonlyUsedRanges,dateFormat:uiSettings.get("dateFormat"),isAutoRefreshOnly:props.showAutoRefreshOnly}))}function handleLuceneSyntaxWarning(){if(!props.query)return;var _props$query=props.query,query=_props$query.query,language=_props$query.language;if(language==="kuery"&&typeof query==="string"&&(!storage||!storage.get("kibana.luceneSyntaxWarningOptOut"))&&(0,_common.doesKueryExpressionHaveLuceneSyntaxError)(query)){var toast=notifications.toasts.addWarning({title:_i18n.i18n.translate("data.query.queryBar.luceneSyntaxWarningTitle",{defaultMessage:"Lucene syntax warning"}),text:(0,_public.toMountPoint)(_react.default.createElement("div",null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.luceneSyntaxWarningMessage",defaultMessage:"It looks like you may be trying to use Lucene query syntax, although you have Kibana Query Language (KQL) selected. Please review the KQL docs {link}.",values:{link:_react.default.createElement(_eui.EuiLink,{href:kueryQuerySyntaxLink,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.syntaxOptionsDescription.docsLinkText",defaultMessage:"here"}))}})),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",onClick:function onClick(){return onLuceneSyntaxWarningOptOut(toast)}},_react.default.createElement(_react2.FormattedMessage,{id:"data.query.queryBar.luceneSyntaxWarningOptOutText",defaultMessage:"Don't show again"}))))))})}}function onLuceneSyntaxWarningOptOut(toast){if(!storage)return;storage.set("kibana.luceneSyntaxWarningOptOut",true);notifications.toasts.remove(toast)}var classes=(0,_classnames.default)("kbnQueryBar",{"kbnQueryBar--withDatePicker":props.showDatePicker});return _react.default.createElement(_eui.EuiFlexGroup,{className:classes,responsive:!!props.showDatePicker,gutterSize:"s",justifyContent:"flexEnd"},renderQueryInput(),renderSharingMetaFields(),_react.default.createElement(_eui.EuiFlexItem,{grow:false},renderUpdateButton()))}QueryBarTopRow.defaultProps={showQueryInput:true,showDatePicker:true,showAutoRefreshOnly:false}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useFilterManager=void 0;var _react=__webpack_require__(28);var _rxjs=__webpack_require__(33);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var useFilterManager=function useFilterManager(props){var _useState=(0,_react.useState)(props.filters||props.filterManager.getFilters()),_useState2=_slicedToArray(_useState,2),filters=_useState2[0],setFilters=_useState2[1];(0,_react.useEffect)((function(){var subscriptions=new _rxjs.Subscription;subscriptions.add(props.filterManager.getUpdates$().subscribe({next:function next(){var newFilters=props.filterManager.getFilters();setFilters(newFilters)}}));return function(){subscriptions.unsubscribe()}}),[props.filterManager]);return{filters:filters}};exports.useFilterManager=useFilterManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useTimefilter=void 0;var _react=__webpack_require__(28);var _rxjs=__webpack_require__(33);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var useTimefilter=function useTimefilter(props){var initialTimeRange={from:props.dateRangeFrom||props.timefilter.getTime().from,to:props.dateRangeTo||props.timefilter.getTime().to};var initialRefreshInterval={value:props.refreshInterval||props.timefilter.getRefreshInterval().value,pause:props.isRefreshPaused||props.timefilter.getRefreshInterval().pause};var _useState=(0,_react.useState)(initialTimeRange),_useState2=_slicedToArray(_useState,2),timeRange=_useState2[0],setTimerange=_useState2[1];var _useState3=(0,_react.useState)(initialRefreshInterval),_useState4=_slicedToArray(_useState3,2),refreshInterval=_useState4[0],setRefreshInterval=_useState4[1];(0,_react.useEffect)((function(){var subscriptions=new _rxjs.Subscription;subscriptions.add(props.timefilter.getRefreshIntervalUpdate$().subscribe({next:function next(){var newRefreshInterval=props.timefilter.getRefreshInterval();setRefreshInterval(newRefreshInterval)}}));subscriptions.add(props.timefilter.getTimeUpdate$().subscribe({next:function next(){setTimerange(props.timefilter.getTime())}}));return function(){subscriptions.unsubscribe()}}),[props.timefilter]);return{refreshInterval:refreshInterval,timeRange:timeRange}};exports.useTimefilter=useTimefilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useSavedQuery=void 0;var _react=__webpack_require__(28);var _i18n=__webpack_require__(1);var _populate_state_from_saved_query=__webpack_require__(754);var _clear_saved_query=__webpack_require__(755);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var useSavedQuery=function useSavedQuery(props){var defaultLanguage=props.defaultLanguage;var _useState=(0,_react.useState)(),_useState2=_slicedToArray(_useState,2),savedQuery=_useState2[0],_setSavedQuery=_useState2[1];(0,_react.useEffect)((function(){var fetchSavedQuery=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedQueryId){var newSavedQuery;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return props.queryService.savedQueries.getSavedQuery(savedQueryId);case 3:newSavedQuery=_context.sent;if(newSavedQuery&&newSavedQuery.id===savedQueryId){_setSavedQuery(newSavedQuery);(0,_populate_state_from_saved_query.populateStateFromSavedQuery)(props.queryService,props.setQuery,newSavedQuery)}_context.next=12;break;case 7:_context.prev=7;_context.t0=_context["catch"](0);_setSavedQuery(undefined);(0,_clear_saved_query.clearStateFromSavedQuery)(props.queryService,props.setQuery,defaultLanguage);props.notifications.toasts.addWarning({title:_i18n.i18n.translate("data.search.unableToGetSavedQueryToastTitle",{defaultMessage:"Unable to load saved query {savedQueryId}",values:{savedQueryId:savedQueryId}}),text:"".concat(_context.t0.message)});case 12:case"end":return _context.stop()}}}),_callee,null,[[0,7]])})));return function fetchSavedQuery(_x){return _ref.apply(this,arguments)}}();if(props.savedQueryId)fetchSavedQuery(props.savedQueryId);else _setSavedQuery(undefined)}),[defaultLanguage,props.notifications.toasts,props.queryService,props.queryService.savedQueries,props.savedQueryId,props.setQuery]);return{savedQuery:savedQuery,setSavedQuery:function setSavedQuery(q){_setSavedQuery(q);(0,_populate_state_from_saved_query.populateStateFromSavedQuery)(props.queryService,props.setQuery,q)},clearSavedQuery:function clearSavedQuery(){_setSavedQuery(undefined);(0,_clear_saved_query.clearStateFromSavedQuery)(props.queryService,props.setQuery,defaultLanguage)}}};exports.useSavedQuery=useSavedQuery},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.populateStateFromSavedQuery=void 0;function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var populateStateFromSavedQuery=function populateStateFromSavedQuery(queryService,setQueryStringState,savedQuery){var timefilter=queryService.timefilter.timefilter,filterManager=queryService.filterManager;if(savedQuery.attributes.timefilter){timefilter.setTime({from:savedQuery.attributes.timefilter.from,to:savedQuery.attributes.timefilter.to});if(savedQuery.attributes.timefilter.refreshInterval){timefilter.setRefreshInterval(savedQuery.attributes.timefilter.refreshInterval)}}setQueryStringState(savedQuery.attributes.query);var savedQueryFilters=savedQuery.attributes.filters||[];var globalFilters=filterManager.getGlobalFilters();filterManager.setFilters([].concat(_toConsumableArray(globalFilters),_toConsumableArray(savedQueryFilters)))};exports.populateStateFromSavedQuery=populateStateFromSavedQuery},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.clearStateFromSavedQuery=void 0;var clearStateFromSavedQuery=function clearStateFromSavedQuery(queryService,setQueryStringState,defaultLanguage){queryService.filterManager.removeAll();setQueryStringState({query:"",language:defaultLanguage})};exports.clearStateFromSavedQuery=clearStateFromSavedQuery},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ShardFailureRequest",{enumerable:true,get:function get(){return _shard_failure_types.ShardFailureRequest}});Object.defineProperty(exports,"ShardFailureResponse",{enumerable:true,get:function get(){return _shard_failure_types.ShardFailureResponse}});Object.defineProperty(exports,"ShardFailureOpenModalButton",{enumerable:true,get:function get(){return _shard_failure_open_modal_button.ShardFailureOpenModalButton}});var _shard_failure_types=__webpack_require__(757);var _shard_failure_open_modal_button=__webpack_require__(758)},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShardFailureOpenModalButton=ShardFailureOpenModalButton;var _react=_interopRequireDefault(__webpack_require__(28));var _react2=__webpack_require__(30);var _eui=__webpack_require__(29);var _services=__webpack_require__(61);var _public=__webpack_require__(31);var _shard_failure_modal=__webpack_require__(759);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ShardFailureOpenModalButton(_ref){var request=_ref.request,response=_ref.response,title=_ref.title;function onClick(){var modal=(0,_services.getOverlays)().openModal((0,_public.toMountPoint)(_react.default.createElement(_shard_failure_modal.ShardFailureModal,{request:request,response:response,title:title,onClose:function onClose(){return modal.close()}})),{className:"shardFailureModal"})}return _react.default.createElement(_eui.EuiTextAlign,{textAlign:"right"},_react.default.createElement(_eui.EuiButton,{color:"warning",size:"s",onClick:onClick,"data-test-subj":"openShardFailureModalBtn"},_react.default.createElement(_react2.FormattedMessage,{id:"data.search.searchSource.fetch.shardsFailedModal.showDetails",defaultMessage:"Show details",description:"Open the modal to show details"})))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShardFailureModal=ShardFailureModal;var _react=_interopRequireDefault(__webpack_require__(28));var _react2=__webpack_require__(30);var _i18n=__webpack_require__(1);var _eui=__webpack_require__(29);var _shard_failure_table=__webpack_require__(760);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ShardFailureModal(_ref){var request=_ref.request,response=_ref.response,title=_ref.title,onClose=_ref.onClose;if(!response||!response._shards||!Array.isArray(response._shards.failures)||!request){return _react.default.createElement(_eui.EuiCallOut,{title:"Sorry, there was an error",color:"danger",iconType:"alert"},"The ShardFailureModal component received invalid properties")}var requestJSON=JSON.stringify(request,null,2);var responseJSON=JSON.stringify(response,null,2);var failures=response._shards.failures;var tabs=[{id:"table",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tabHeaderShardFailures",{defaultMessage:"Shard failures",description:"Name of the tab displaying shard failures"}),content:_react.default.createElement(_shard_failure_table.ShardFailureTable,{failures:failures})},{id:"json-request",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tabHeaderRequest",{defaultMessage:"Request",description:"Name of the tab displaying the JSON request"}),content:_react.default.createElement(_eui.EuiCodeBlock,{language:"json",isCopyable:true},requestJSON)},{id:"json-response",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tabHeaderResponse",{defaultMessage:"Response",description:"Name of the tab displaying the JSON response"}),content:_react.default.createElement(_eui.EuiCodeBlock,{language:"json",isCopyable:true},responseJSON)}];return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,title)),_react.default.createElement(_eui.EuiModalBody,null,_react.default.createElement(_eui.EuiTabbedContent,{tabs:tabs,initialSelectedTab:tabs[0],autoFocus:"selected"})),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiCopy,{textToCopy:responseJSON},(function(copy){return _react.default.createElement(_eui.EuiButtonEmpty,{onClick:copy},_react.default.createElement(_react2.FormattedMessage,{id:"data.search.searchSource.fetch.shardsFailedModal.copyToClipboard",defaultMessage:"Copy response to clipboard"}))})),_react.default.createElement(_eui.EuiButton,{onClick:function onClick(){return onClose()},fill:true,"data-test-sub":"closeShardFailureModal"},_react.default.createElement(_react2.FormattedMessage,{id:"data.search.searchSource.fetch.shardsFailedModal.close",defaultMessage:"Close",description:"Closing the Modal"}))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ShardFailureTable=ShardFailureTable;var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _services=__webpack_require__(43);var _i18n=__webpack_require__(1);var _shard_failure_description=__webpack_require__(761);var _shard_failure_description_header=__webpack_require__(358);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ShardFailureTable(_ref){var failures=_ref.failures;var itemList=failures.map((function(failure,idx){return _objectSpread({},{id:String(idx)},{},failure)}));var initalMap={};var _useState=(0,_react.useState)(initalMap),_useState2=_slicedToArray(_useState,2),expandMap=_useState2[0],setExpandMap=_useState2[1];var columns=[{align:_services.RIGHT_ALIGNMENT,width:"40px",isExpander:true,render:function render(item){var failureSummeryText=(0,_shard_failure_description_header.getFailureSummaryText)(item);var collapseLabel=_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tableRowCollapse",{defaultMessage:"Collapse {rowDescription}",description:"Collapse a row of a table with failures",values:{rowDescription:failureSummeryText}});var expandLabel=_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tableRowExpand",{defaultMessage:"Expand {rowDescription}",description:"Expand a row of a table with failures",values:{rowDescription:failureSummeryText}});return _react.default.createElement(_eui.EuiButtonIcon,{onClick:function onClick(){var map=Object.assign({},expandMap);if(map[item.id]){delete map[item.id]}else{map[item.id]=_react.default.createElement(_shard_failure_description.ShardFailureDescription,item)}setExpandMap(map)},"aria-label":expandMap[item.id]?collapseLabel:expandLabel,iconType:expandMap[item.id]?"arrowUp":"arrowDown"})}},{field:"shard",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tableColShard",{defaultMessage:"Shard"}),sortable:true,truncateText:true,width:"80px"},{field:"index",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tableColIndex",{defaultMessage:"Index"}),sortable:true,truncateText:true},{field:"node",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tableColNode",{defaultMessage:"Node"}),sortable:true,truncateText:true},{field:"reason.type",name:_i18n.i18n.translate("data.search.searchSource.fetch.shardsFailedModal.tableColReason",{defaultMessage:"Reason"}),truncateText:true}];return _react.default.createElement(_eui.EuiInMemoryTable,{itemId:"id",items:itemList,columns:columns,pagination:true,sorting:{sort:{field:"index",direction:"desc"}},itemIdToExpandedRowMap:expandMap})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatKey=formatKey;exports.formatValueByKey=formatValueByKey;exports.ShardFailureDescription=ShardFailureDescription;var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);var _utils=__webpack_require__(180);var _shard_failure_description_header=__webpack_require__(358);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function formatKey(key){var nameCapitalized=key.charAt(0).toUpperCase()+key.slice(1);return nameCapitalized.replace(/[\._]/g," ")}function formatValueByKey(value,key){if(key==="script"||key==="script_stack"){var valueScript=Array.isArray(value)?value.join("\n"):String(value);return _react.default.createElement(_eui.EuiCodeBlock,{language:"java",paddingSize:"s",isCopyable:true},valueScript)}else{return String(value)}}function ShardFailureDescription(props){var flattendReason=(0,_utils.getFlattenedObject)(props.reason);var listItems=Object.entries(flattendReason).map((function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];return{title:formatKey(key),description:formatValueByKey(value,key)}}));return _react.default.createElement("div",null,_react.default.createElement(_shard_failure_description_header.ShardFailureDescriptionHeader,props),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiDescriptionList,{listItems:listItems,type:"column",compressed:true,className:"shardFailureModal__desc",titleProps:{className:"shardFailureModal__descTitle"},descriptionProps:{className:"shardFailureModal__descValue"}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.assertNever=assertNever;function assertNever(x){throw new Error("Unexpected object: ".concat(x))}},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty2(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.ContextContainer=void 0;var _lodash=__webpack_require__(49);var _=__webpack_require__(180);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ContextContainer=function(){function ContextContainer(pluginDependencies,coreId){var _this=this;_classCallCheck(this,ContextContainer);this.pluginDependencies=pluginDependencies;this.coreId=coreId;_defineProperty(this,"contextProviders",new Map);_defineProperty(this,"contextNamesBySource",void 0);_defineProperty(this,"registerContext",(function(source,contextName,provider){if(_this.contextProviders.has(contextName)){throw new Error("Context provider for ".concat(contextName," has already been registered."))}if(source!==_this.coreId&&!_this.pluginDependencies.has(source)){throw new Error("Cannot register context for unknown plugin: ".concat(source.toString()))}_this.contextProviders.set(contextName,{provider:provider,source:source});_this.contextNamesBySource.set(source,[].concat(_toConsumableArray(_this.contextNamesBySource.get(source)||[]),[contextName]));return _this}));_defineProperty(this,"createHandler",(function(source,handler){if(source!==_this.coreId&&!_this.pluginDependencies.has(source)){throw new Error("Cannot create handler for unknown plugin: ".concat(source.toString()))}return(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _len,args,_key,context,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:for(_len=_args.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=_args[_key]}_context.next=3;return _this.buildContext.apply(_this,[source].concat(args));case 3:context=_context.sent;return _context.abrupt("return",handler.apply(void 0,[context].concat(args)));case 5:case"end":return _context.stop()}}}),_callee)})));return function(){return _ref.apply(this,arguments)}}())}));this.contextNamesBySource=new Map([[coreId,[]]])}_createClass(ContextContainer,[{key:"buildContext",value:function(){var _buildContext=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(source){var _this2=this;var _len2,contextArgs,_key2,contextsToBuild,_args3=arguments;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:for(_len2=_args3.length,contextArgs=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){contextArgs[_key2-1]=_args3[_key2]}contextsToBuild=new Set(this.getContextNamesForSource(source));return _context3.abrupt("return",_toConsumableArray(this.contextProviders).sort(sortByCoreFirst(this.coreId)).filter((function(_ref2){var _ref3=_slicedToArray(_ref2,1),contextName=_ref3[0];return contextsToBuild.has(contextName)})).reduce(function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(contextPromise,_ref5){var _ref6,contextName,_ref6$,provider,providerSource,resolvedContext,exposedContext;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_ref6=_slicedToArray(_ref5,2),contextName=_ref6[0],_ref6$=_ref6[1],provider=_ref6$.provider,providerSource=_ref6$.source;_context2.next=3;return contextPromise;case 3:resolvedContext=_context2.sent;exposedContext=(0,_.pick)(resolvedContext,_toConsumableArray(_this2.getContextNamesForSource(providerSource)));_context2.t0=_objectSpread;_context2.t1={};_context2.t2=resolvedContext;_context2.t3=_defineProperty2;_context2.t4={};_context2.t5=contextName;_context2.next=13;return provider.apply(void 0,[exposedContext].concat(contextArgs));case 13:_context2.t6=_context2.sent;_context2.t7=(0,_context2.t3)(_context2.t4,_context2.t5,_context2.t6);return _context2.abrupt("return",(0,_context2.t0)(_context2.t1,_context2.t2,_context2.t7));case 16:case"end":return _context2.stop()}}}),_callee2)})));return function(_x2,_x3){return _ref4.apply(this,arguments)}}(),Promise.resolve({})));case 3:case"end":return _context3.stop()}}}),_callee3,this)})));function buildContext(_x){return _buildContext.apply(this,arguments)}return buildContext}()},{key:"getContextNamesForSource",value:function getContextNamesForSource(source){if(source===this.coreId){return this.getContextNamesForCore()}else{return this.getContextNamesForPluginId(source)}}},{key:"getContextNamesForCore",value:function getContextNamesForCore(){return new Set(this.contextNamesBySource.get(this.coreId))}},{key:"getContextNamesForPluginId",value:function getContextNamesForPluginId(pluginId){var _this3=this;var pluginDeps=this.pluginDependencies.get(pluginId);if(!pluginDeps){throw new Error("Cannot create context for unknown plugin: ".concat(pluginId.toString()))}return new Set([].concat(_toConsumableArray(this.contextNamesBySource.get(this.coreId)),_toConsumableArray(this.contextNamesBySource.get(pluginId)||[]),_toConsumableArray((0,_lodash.flatten)(pluginDeps.map((function(p){return _this3.contextNamesBySource.get(p)||[]}))))))}}]);return ContextContainer}();exports.ContextContainer=ContextContainer;var sortByCoreFirst=function sortByCoreFirst(coreId){return function(_ref7,_ref8){var _ref9=_slicedToArray(_ref7,2),leftName=_ref9[0],leftProvider=_ref9[1];var _ref10=_slicedToArray(_ref8,2),rightName=_ref10[0],rightProvider=_ref10[1];if(leftProvider.source===coreId){return rightProvider.source===coreId?0:-1}else{return rightProvider.source===coreId?1:0}}}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.deepFreeze=deepFreeze;function deepFreeze(object){for(var _i=0,_Object$values=Object.values(object);_i<_Object$values.length;_i++){var value=_Object$values[_i];if(value!==null&&_typeof(value)==="object"){deepFreeze(value)}}return Object.freeze(object)}},function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}Object.defineProperty(exports,"__esModule",{value:true});exports.mapToObject=mapToObject;function mapToObject(map){var result=Object.create(null);var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=map[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step$value=_slicedToArray(_step.value,2),key=_step$value[0],value=_step$value[1];result[key]=value}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return result}},function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}Object.defineProperty(exports,"__esModule",{value:true});exports.merge=merge;var _lodash=__webpack_require__(49);function merge(baseObj){for(var _len=arguments.length,sources=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){sources[_key-1]=arguments[_key]}var firstSource=sources[0];if(firstSource===undefined){return baseObj}return sources.slice(1).reduce((function(merged,nextSource){return mergeObjects(merged,nextSource)}),mergeObjects(baseObj,firstSource))}var isMergable=function isMergable(obj){return(0,_lodash.isPlainObject)(obj)};var mergeObjects=function mergeObjects(baseObj,overrideObj){return _toConsumableArray(new Set([].concat(_toConsumableArray(Object.keys(baseObj)),_toConsumableArray(Object.keys(overrideObj))))).reduce((function(merged,key){var baseVal=baseObj[key];var overrideVal=overrideObj[key];if(isMergable(baseVal)&&isMergable(overrideVal)){merged[key]=mergeObjects(baseVal,overrideVal)}else if(overrideVal!==undefined){merged[key]=overrideVal}else if(baseVal!==undefined){merged[key]=baseVal}return merged}),{})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.pick=pick;function pick(obj,keys){return keys.reduce((function(acc,key){if(obj.hasOwnProperty(key)){acc[key]=obj[key]}return acc}),{})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.withTimeout=withTimeout;function withTimeout(_ref){var promise=_ref.promise,timeout=_ref.timeout,errorMessage=_ref.errorMessage;return Promise.race([promise,new Promise((function(resolve,reject){return setTimeout((function(){return reject(new Error(errorMessage))}),timeout)}))])}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.modifyUrl=modifyUrl;exports.isRelativeUrl=isRelativeUrl;var _url=__webpack_require__(357);function modifyUrl(url,urlModifier){var parsed=(0,_url.parse)(url,true);var meaningfulParts={auth:parsed.auth,hash:parsed.hash,hostname:parsed.hostname,pathname:parsed.pathname,port:parsed.port,protocol:parsed.protocol,query:parsed.query||{},slashes:parsed.slashes};var modifiedParts=urlModifier(meaningfulParts)||meaningfulParts;return(0,_url.format)({auth:modifiedParts.auth,hash:modifiedParts.hash,hostname:modifiedParts.hostname,pathname:modifiedParts.pathname,port:modifiedParts.port,protocol:modifiedParts.protocol,query:modifiedParts.query,slashes:modifiedParts.slashes})}function isRelativeUrl(candidatePath){var all=(0,_url.parse)(candidatePath,false,true);var protocol=all.protocol,hostname=all.hostname,port=all.port;if(protocol!==null||hostname!==null||port!==null){return false}return true}},,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.unset=unset;var _get=__webpack_require__(356);function unset(obj,atPath){var paths=atPath.split(".").map((function(s){return s.trim()})).filter((function(v){return v!==""}));if(paths.length===0){return}if(paths.length===1){delete obj[paths[0]];return}var property=paths.pop();var parent=(0,_get.get)(obj,paths);if(parent!==undefined){delete parent[property]}}},function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getFlattenedObject=getFlattenedObject;function shouldReadKeys(value){return _typeof(value)==="object"&&value!==null&&!Array.isArray(value)}function getFlattenedObject(rootValue){if(!shouldReadKeys(rootValue)){throw new TypeError("Root value is not flatten-able, received ".concat(rootValue))}var result={};(function flatten(prefix,object){for(var _i=0,_Object$entries=Object.entries(object);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];var path=prefix?"".concat(prefix,".").concat(key):key;if(shouldReadKeys(value)){flatten(path,value)}else{result[path]=value}}})("",rootValue);return result}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_APP_CATEGORIES=void 0;var _i18n=__webpack_require__(1);var DEFAULT_APP_CATEGORIES=Object.freeze({analyze:{label:_i18n.i18n.translate("core.ui.analyzeNavList.label",{defaultMessage:"Analyze"}),order:1e3},observability:{label:_i18n.i18n.translate("core.ui.observabilityNavList.label",{defaultMessage:"Observability"}),euiIconType:"logoObservability",order:2e3},security:{label:_i18n.i18n.translate("core.ui.securityNavList.label",{defaultMessage:"Security"}),order:3e3,euiIconType:"logoSecurity"},management:{label:_i18n.i18n.translate("core.ui.managementNavList.label",{defaultMessage:"Management"}),euiIconType:"managementApp"}});exports.DEFAULT_APP_CATEGORIES=DEFAULT_APP_CATEGORIES},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SavedQueryManagementComponent",{enumerable:true,get:function get(){return _saved_query_management_component.SavedQueryManagementComponent}});var _saved_query_management_component=__webpack_require__(779)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedQueryManagementComponent=SavedQueryManagementComponent;var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(28));var _lodash=__webpack_require__(49);var _saved_query_list_item=__webpack_require__(780);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var perPage=50;function SavedQueryManagementComponent(_ref){var showSaveQuery=_ref.showSaveQuery,loadedSavedQuery=_ref.loadedSavedQuery,onSave=_ref.onSave,onSaveAsNew=_ref.onSaveAsNew,onLoad=_ref.onLoad,onClearSavedQuery=_ref.onClearSavedQuery,savedQueryService=_ref.savedQueryService;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var _useState3=(0,_react.useState)([]),_useState4=_slicedToArray(_useState3,2),savedQueries=_useState4[0],setSavedQueries=_useState4[1];var _useState5=(0,_react.useState)(0),_useState6=_slicedToArray(_useState5,2),count=_useState6[0],setTotalCount=_useState6[1];var _useState7=(0,_react.useState)(0),_useState8=_slicedToArray(_useState7,2),activePage=_useState8[0],setActivePage=_useState8[1];var cancelPendingListingRequest=(0,_react.useRef)((function(){}));(0,_react.useEffect)((function(){var fetchCountAndSavedQueries=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var requestGotCancelled,_ref3,savedQueryCount,savedQueryItems,sortedSavedQueryItems;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:cancelPendingListingRequest.current();requestGotCancelled=false;cancelPendingListingRequest.current=function(){requestGotCancelled=true};_context.next=5;return savedQueryService.findSavedQueries("",perPage,activePage+1);case 5:_ref3=_context.sent;savedQueryCount=_ref3.total;savedQueryItems=_ref3.queries;if(!requestGotCancelled){_context.next=10;break}return _context.abrupt("return");case 10:sortedSavedQueryItems=(0,_lodash.sortBy)(savedQueryItems,"attributes.title");setTotalCount(savedQueryCount);setSavedQueries(sortedSavedQueryItems);case 13:case"end":return _context.stop()}}}),_callee)})));return function fetchCountAndSavedQueries(){return _ref2.apply(this,arguments)}}();if(isOpen){fetchCountAndSavedQueries()}}),[isOpen,activePage,savedQueryService]);var goToPage=function goToPage(pageNumber){setActivePage(pageNumber)};var savedQueryDescriptionText=_i18n.i18n.translate("data.search.searchBar.savedQueryDescriptionText",{defaultMessage:"Save query text and filters that you want to use again."});var noSavedQueriesDescriptionText=_i18n.i18n.translate("data.search.searchBar.savedQueryNoSavedQueriesText",{defaultMessage:"There are no saved queries."})+" "+savedQueryDescriptionText;var savedQueryPopoverTitleText=_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverTitleText",{defaultMessage:"Saved Queries"});var onDeleteSavedQuery=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(savedQuery){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:cancelPendingListingRequest.current();setSavedQueries(savedQueries.filter((function(currentSavedQuery){return currentSavedQuery.id!==savedQuery.id})));if(loadedSavedQuery&&loadedSavedQuery.id===savedQuery.id){onClearSavedQuery()}_context2.next=5;return savedQueryService.deleteSavedQuery(savedQuery.id);case 5:setActivePage(0);case 6:case"end":return _context2.stop()}}}),_callee2)})));return function onDeleteSavedQuery(_x){return _ref4.apply(this,arguments)}}();var savedQueryPopoverButton=_react.default.createElement(_eui.EuiButtonEmpty,{onClick:function onClick(){setIsOpen(!isOpen)},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverButtonText",{defaultMessage:"See saved queries"}),title:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverButtonText",{defaultMessage:"See saved queries"}),"data-test-subj":"saved-query-management-popover-button"},_react.default.createElement(_eui.EuiIcon,{type:"save",className:"euiQuickSelectPopover__buttonText"}),_react.default.createElement(_eui.EuiIcon,{type:"arrowDown"}));var savedQueryRows=function savedQueryRows(){var savedQueriesWithoutCurrent=savedQueries.filter((function(savedQuery){if(!loadedSavedQuery)return true;return savedQuery.id!==loadedSavedQuery.id}));var savedQueriesReordered=loadedSavedQuery&&savedQueriesWithoutCurrent.length!==savedQueries.length?[loadedSavedQuery].concat(_toConsumableArray(savedQueriesWithoutCurrent)):_toConsumableArray(savedQueriesWithoutCurrent);return savedQueriesReordered.map((function(savedQuery){return _react.default.createElement(_saved_query_list_item.SavedQueryListItem,{key:savedQuery.id,savedQuery:savedQuery,isSelected:!!loadedSavedQuery&&loadedSavedQuery.id===savedQuery.id,onSelect:function onSelect(savedQueryToSelect){onLoad(savedQueryToSelect);setIsOpen(false)},onDelete:function onDelete(savedQueryToDelete){return onDeleteSavedQuery(savedQueryToDelete)},showWriteOperations:!!showSaveQuery})}))};return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiPopover,{id:"savedQueryPopover",button:savedQueryPopoverButton,isOpen:isOpen,closePopover:function closePopover(){setIsOpen(false)},anchorPosition:"downLeft",panelPaddingSize:"none",ownFocus:true},_react.default.createElement("div",{className:"kbnSavedQueryManagement__popover","data-test-subj":"saved-query-management-popover"},_react.default.createElement(_eui.EuiPopoverTitle,{id:"savedQueryManagementPopoverTitle"},savedQueryPopoverTitleText),savedQueries.length>0?_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"s",color:"subdued",className:"kbnSavedQueryManagement__text"},_react.default.createElement("p",null,savedQueryDescriptionText)),_react.default.createElement("div",{className:"kbnSavedQueryManagement__listWrapper"},_react.default.createElement(_eui.EuiListGroup,{flush:true,className:"kbnSavedQueryManagement__list","aria-labelledby":"savedQueryManagementPopoverTitle"},savedQueryRows())),_react.default.createElement(_eui.EuiPagination,{className:"kbnSavedQueryManagement__pagination",pageCount:Math.ceil(count/perPage),activePage:activePage,onPageClick:goToPage})):_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"s",color:"subdued",className:"kbnSavedQueryManagement__text"},_react.default.createElement("p",null,noSavedQueriesDescriptionText)),_react.default.createElement(_eui.EuiSpacer,{size:"s"})),_react.default.createElement(_eui.EuiPopoverFooter,null,_react.default.createElement(_eui.EuiFlexGroup,{direction:"rowReverse",gutterSize:"s",alignItems:"center",justifyContent:"flexEnd",responsive:false,wrap:true},showSaveQuery&&loadedSavedQuery&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",fill:true,onClick:function onClick(){return onSave()},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveChangesButtonAriaLabel",{defaultMessage:"Save changes to {title}",values:{title:loadedSavedQuery.attributes.title}}),"data-test-subj":"saved-query-management-save-changes-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveChangesButtonText",{defaultMessage:"Save changes"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",onClick:function onClick(){return onSaveAsNew()},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveAsNewButtonAriaLabel",{defaultMessage:"Save as new saved query"}),"data-test-subj":"saved-query-management-save-as-new-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveAsNewButtonText",{defaultMessage:"Save as new"})))),showSaveQuery&&!loadedSavedQuery&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",fill:true,onClick:function onClick(){return onSave()},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveButtonAriaLabel",{defaultMessage:"Save a new saved query"}),"data-test-subj":"saved-query-management-save-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSaveButtonText",{defaultMessage:"Save current query"}))),_react.default.createElement(_eui.EuiFlexItem,null),_react.default.createElement(_eui.EuiFlexItem,{grow:false},loadedSavedQuery&&_react.default.createElement(_eui.EuiButtonEmpty,{size:"s",flush:"left",onClick:function onClick(){return onClearSavedQuery()},"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverClearButtonAriaLabel",{defaultMessage:"Clear current saved query"}),"data-test-subj":"saved-query-management-clear-button"},_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverClearButtonText",{defaultMessage:"Clear"}))))))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedQueryListItem=void 0;var _eui=__webpack_require__(29);var _react=_interopRequireWildcard(__webpack_require__(28));var _classnames=_interopRequireDefault(__webpack_require__(87));var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var SavedQueryListItem=function SavedQueryListItem(_ref){var savedQuery=_ref.savedQuery,isSelected=_ref.isSelected,onSelect=_ref.onSelect,onDelete=_ref.onDelete,showWriteOperations=_ref.showWriteOperations;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),showDeletionConfirmationModal=_useState2[0],setShowDeletionConfirmationModal=_useState2[1];var selectButtonAriaLabelText=isSelected?_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSavedQueryListItemSelectedButtonAriaLabel",{defaultMessage:"Saved query button selected {savedQueryName}. Press to clear any changes.",values:{savedQueryName:savedQuery.attributes.title}}):_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSavedQueryListItemButtonAriaLabel",{defaultMessage:"Saved query button {savedQueryName}",values:{savedQueryName:savedQuery.attributes.title}});var selectButtonDataTestSubj=isSelected?"load-saved-query-".concat(savedQuery.attributes.title,"-button saved-query-list-item-selected"):"load-saved-query-".concat(savedQuery.attributes.title,"-button");var classes=(0,_classnames.default)("kbnSavedQueryListItem",{"kbnSavedQueryListItem-selected":isSelected});var label=_react.default.createElement("span",{className:"kbnSavedQueryListItem__label"},_react.default.createElement("span",{className:"kbnSavedQueryListItem__labelText"},savedQuery.attributes.title)," ",savedQuery.attributes.description&&_react.default.createElement(_eui.EuiIconTip,{type:"iInCircle",content:savedQuery.attributes.description,"aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverSavedQueryListItemDescriptionAriaLabel",{defaultMessage:"{savedQueryName} description",values:{savedQueryName:savedQuery.attributes.title}})}));return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiListGroupItem,{className:classes,key:savedQuery.id,"data-test-subj":"saved-query-list-item ".concat(selectButtonDataTestSubj," ").concat(isSelected?"saved-query-list-item-selected":""),isActive:isSelected,onClick:function onClick(){onSelect(savedQuery)},"aria-label":selectButtonAriaLabelText,label:label,iconType:isSelected?"check":undefined,extraAction:showWriteOperations?{color:"danger",onClick:function onClick(){return setShowDeletionConfirmationModal(true)},iconType:"trash",iconSize:"s","aria-label":_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverDeleteButtonAriaLabel",{defaultMessage:"Delete saved query {savedQueryName}",values:{savedQueryName:savedQuery.attributes.title}}),title:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverDeleteButtonAriaLabel",{defaultMessage:"Delete saved query {savedQueryName}",values:{savedQueryName:savedQuery.attributes.title}}),"data-test-subj":"delete-saved-query-".concat(savedQuery.attributes.title,"-button")}:undefined}),showDeletionConfirmationModal&&_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverConfirmDeletionTitle",{defaultMessage:'Delete "{savedQueryName}"?',values:{savedQueryName:savedQuery.attributes.title}}),confirmButtonText:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverConfirmDeletionConfirmButtonText",{defaultMessage:"Delete"}),cancelButtonText:_i18n.i18n.translate("data.search.searchBar.savedQueryPopoverConfirmDeletionCancelButtonText",{defaultMessage:"Cancel"}),onConfirm:function onConfirm(){onDelete(savedQuery);setShowDeletionConfirmationModal(false)},buttonColor:"danger",onCancel:function onCancel(){setShowDeletionConfirmationModal(false)}})))};exports.SavedQueryListItem=SavedQueryListItem},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SavedQueryMeta",{enumerable:true,get:function get(){return _save_query_form.SavedQueryMeta}});Object.defineProperty(exports,"SaveQueryForm",{enumerable:true,get:function get(){return _save_query_form.SaveQueryForm}});var _save_query_form=__webpack_require__(782)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SaveQueryForm=SaveQueryForm;var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(49);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function SaveQueryForm(_ref){var savedQuery=_ref.savedQuery,savedQueryService=_ref.savedQueryService,onSave=_ref.onSave,onClose=_ref.onClose,_ref$showFilterOption=_ref.showFilterOption,showFilterOption=_ref$showFilterOption===void 0?true:_ref$showFilterOption,_ref$showTimeFilterOp=_ref.showTimeFilterOption,showTimeFilterOption=_ref$showTimeFilterOp===void 0?true:_ref$showTimeFilterOp;var _useState=(0,_react.useState)(savedQuery?savedQuery.title:""),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=(0,_react.useState)(savedQuery?savedQuery.description:""),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=(0,_react.useState)([]),_useState6=_slicedToArray(_useState5,2),savedQueries=_useState6[0],setSavedQueries=_useState6[1];var _useState7=(0,_react.useState)(savedQuery?!!savedQuery.filters:true),_useState8=_slicedToArray(_useState7,2),shouldIncludeFilters=_useState8[0],setShouldIncludeFilters=_useState8[1];var _useState9=(0,_react.useState)(savedQuery?!!savedQuery.timefilter:false),_useState10=_slicedToArray(_useState9,2),shouldIncludeTimefilter=_useState10[0],setIncludeTimefilter=_useState10[1];var _useState11=(0,_react.useState)([]),_useState12=_slicedToArray(_useState11,2),formErrors=_useState12[0],setFormErrors=_useState12[1];(0,_react.useEffect)((function(){var fetchQueries=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var allSavedQueries,sortedAllSavedQueries;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return savedQueryService.getAllSavedQueries();case 2:allSavedQueries=_context.sent;sortedAllSavedQueries=(0,_lodash.sortBy)(allSavedQueries,"attributes.title");setSavedQueries(sortedAllSavedQueries);case 5:case"end":return _context.stop()}}}),_callee)})));return function fetchQueries(){return _ref2.apply(this,arguments)}}();fetchQueries()}),[savedQueryService]);var savedQueryDescriptionText=_i18n.i18n.translate("data.search.searchBar.savedQueryDescriptionText",{defaultMessage:"Save query text and filters that you want to use again."});var titleConflictErrorText=_i18n.i18n.translate("data.search.searchBar.savedQueryForm.titleConflictText",{defaultMessage:"Name conflicts with an existing saved query"});var titleMissingErrorText=_i18n.i18n.translate("data.search.searchBar.savedQueryForm.titleMissingText",{defaultMessage:"Name is required"});var whitespaceErrorText=_i18n.i18n.translate("data.search.searchBar.savedQueryForm.whitespaceErrorText",{defaultMessage:"Name cannot contain leading or trailing whitespace"});var validate=function validate(){var errors=[];if(!title.length){errors.push(titleMissingErrorText)}if(title.length>title.trim().length){errors.push(whitespaceErrorText)}if(!!savedQueries.find((function(existingSavedQuery){return!savedQuery&&existingSavedQuery.attributes.title===title}))){errors.push(titleConflictErrorText)}if(!(0,_lodash.isEqual)(errors,formErrors)){setFormErrors(errors)}};var hasErrors=formErrors.length>0;if(hasErrors){validate()}var saveQueryForm=_react.default.createElement(_eui.EuiForm,{isInvalid:hasErrors,error:formErrors,"data-test-subj":"saveQueryForm"},_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiText,{color:"subdued"},savedQueryDescriptionText)),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("data.search.searchBar.savedQueryNameLabelText",{defaultMessage:"Name"}),helpText:_i18n.i18n.translate("data.search.searchBar.savedQueryNameHelpText",{defaultMessage:"Name is required. Name cannot contain leading or trailing whitespace. Name must be unique."}),isInvalid:hasErrors},_react.default.createElement(_eui.EuiFieldText,{disabled:!!savedQuery,value:title,name:"title",onChange:function onChange(event){setTitle(event.target.value)},"data-test-subj":"saveQueryFormTitle",isInvalid:hasErrors,onBlur:validate})),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("data.search.searchBar.savedQueryDescriptionLabelText",{defaultMessage:"Description"})},_react.default.createElement(_eui.EuiFieldText,{value:description,name:"description",onChange:function onChange(event){setDescription(event.target.value)},"data-test-subj":"saveQueryFormDescription"})),showFilterOption&&_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiSwitch,{name:"shouldIncludeFilters",label:_i18n.i18n.translate("data.search.searchBar.savedQueryIncludeFiltersLabelText",{defaultMessage:"Include filters"}),checked:shouldIncludeFilters,onChange:function onChange(){setShouldIncludeFilters(!shouldIncludeFilters)},"data-test-subj":"saveQueryFormIncludeFiltersOption"})),showTimeFilterOption&&_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiSwitch,{name:"shouldIncludeTimefilter",label:_i18n.i18n.translate("data.search.searchBar.savedQueryIncludeTimeFilterLabelText",{defaultMessage:"Include time filter"}),checked:shouldIncludeTimefilter,onChange:function onChange(){setIncludeTimefilter(!shouldIncludeTimefilter)},"data-test-subj":"saveQueryFormIncludeTimeFilterOption"})));return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiModal,{onClose:onClose,initialFocus:"[name=title]"},_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,_i18n.i18n.translate("data.search.searchBar.savedQueryFormTitle",{defaultMessage:"Save query"}))),_react.default.createElement(_eui.EuiModalBody,null,saveQueryForm),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiButtonEmpty,{onClick:onClose,"data-test-subj":"savedQueryFormCancelButton"},_i18n.i18n.translate("data.search.searchBar.savedQueryFormCancelButtonText",{defaultMessage:"Cancel"})),_react.default.createElement(_eui.EuiButton,{onClick:function onClick(){return onSave({title:title,description:description,shouldIncludeFilters:shouldIncludeFilters,shouldIncludeTimefilter:shouldIncludeTimefilter})},fill:true,"data-test-subj":"savedQueryFormSaveButton",disabled:hasErrors},_i18n.i18n.translate("data.search.searchBar.savedQueryFormSaveButtonText",{defaultMessage:"Save"})))))}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getSearchErrorType=getSearchErrorType;exports.SearchError=void 0;function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchError=function(_Error){_inherits(SearchError,_Error);function SearchError(_ref){var _this;var status=_ref.status,title=_ref.title,message=_ref.message,path=_ref.path,type=_ref.type;_classCallCheck(this,SearchError);_this=_possibleConstructorReturn(this,_getPrototypeOf(SearchError).call(this,message));_defineProperty(_assertThisInitialized(_this),"name",void 0);_defineProperty(_assertThisInitialized(_this),"status",void 0);_defineProperty(_assertThisInitialized(_this),"title",void 0);_defineProperty(_assertThisInitialized(_this),"message",void 0);_defineProperty(_assertThisInitialized(_this),"path",void 0);_defineProperty(_assertThisInitialized(_this),"type",void 0);_this.name="SearchError";_this.status=status;_this.title=title;_this.message=message;_this.path=path;_this.type=type;if(Error.captureStackTrace){Error.captureStackTrace(_assertThisInitialized(_this),SearchError)}Object.setPrototypeOf(_assertThisInitialized(_this),SearchError.prototype);return _this}return SearchError}(_wrapNativeSuper(Error));exports.SearchError=SearchError;function getSearchErrorType(_ref2){var message=_ref2.message;var msg=message.toLowerCase();if(msg.indexOf("unsupported query")>-1){return"UNSUPPORTED_QUERY"}}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.defaultSearchStrategy=void 0;var _index_patterns=__webpack_require__(222);var _get_search_params=__webpack_require__(786);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var defaultSearchStrategy={id:"default",search:function search(params){return params.config.get("courier:batchSearches")?msearch(params):_search(params)},isViable:function isViable(indexPattern){return indexPattern&&(0,_index_patterns.isDefault)(indexPattern)}};exports.defaultSearchStrategy=defaultSearchStrategy;function msearch(_ref){var searchRequests=_ref.searchRequests,searchService=_ref.searchService,config=_ref.config,esShardTimeout=_ref.esShardTimeout;var es=searchService.__LEGACY.esClient;var inlineRequests=searchRequests.map((function(_ref2){var index=_ref2.index,body=_ref2.body,searchType=_ref2.search_type;var inlineHeader={index:index.title||index,search_type:searchType,ignore_unavailable:true,preference:(0,_get_search_params.getPreference)(config)};var inlineBody=_objectSpread({},body,{timeout:(0,_get_search_params.getTimeout)(esShardTimeout)});return"".concat(JSON.stringify(inlineHeader),"\n").concat(JSON.stringify(inlineBody))}));var searching=es.msearch(_objectSpread({},(0,_get_search_params.getMSearchParams)(config),{body:"".concat(inlineRequests.join("\n"),"\n")}));return{searching:searching.then((function(_ref3){var responses=_ref3.responses;return responses})),abort:searching.abort}}function _search(_ref4){var searchRequests=_ref4.searchRequests,searchService=_ref4.searchService,config=_ref4.config,esShardTimeout=_ref4.esShardTimeout;var abortController=new AbortController;var searchParams=(0,_get_search_params.getSearchParams)(config,esShardTimeout);var promises=searchRequests.map((function(_ref5){var index=_ref5.index,indexType=_ref5.indexType,body=_ref5.body;var params=_objectSpread({index:index.title||index,body:body},searchParams);var signal=abortController.signal;return searchService.search({params:params,indexType:indexType},{signal:signal}).toPromise().then((function(_ref6){var rawResponse=_ref6.rawResponse;return rawResponse}))}));return{searching:Promise.all(promises),abort:function abort(){return abortController.abort()}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getMSearchParams=getMSearchParams;exports.getSearchParams=getSearchParams;exports.getPreference=getPreference;exports.getTimeout=getTimeout;var sessionId=Date.now();function getMSearchParams(config){return{rest_total_hits_as_int:true,ignore_throttled:getIgnoreThrottled(config),max_concurrent_shard_requests:getMaxConcurrentShardRequests(config)}}function getSearchParams(config){var esShardTimeout=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return{rest_total_hits_as_int:true,ignore_unavailable:true,ignore_throttled:getIgnoreThrottled(config),max_concurrent_shard_requests:getMaxConcurrentShardRequests(config),preference:getPreference(config),timeout:getTimeout(esShardTimeout)}}function getIgnoreThrottled(config){return!config.get("search:includeFrozen")}function getMaxConcurrentShardRequests(config){var maxConcurrentShardRequests=config.get("courier:maxConcurrentShardRequests");return maxConcurrentShardRequests>0?maxConcurrentShardRequests:undefined}function getPreference(config){var setRequestPreference=config.get("courier:setRequestPreference");if(setRequestPreference==="sessionId")return sessionId;return setRequestPreference==="custom"?config.get("courier:customRequestPreference"):undefined}function getTimeout(esShardTimeout){return esShardTimeout>0?"".concat(esShardTimeout,"ms"):undefined}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestFailure=void 0;var _public=__webpack_require__(34);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestFailure=function(_KbnError){_inherits(RequestFailure,_KbnError);function RequestFailure(){var _this;var err=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var resp=arguments.length>1?arguments[1]:undefined;_classCallCheck(this,RequestFailure);_this=_possibleConstructorReturn(this,_getPrototypeOf(RequestFailure).call(this,"Request to Elasticsearch failed: ".concat(JSON.stringify(resp||(err===null||err===void 0?void 0:err.message)))));_defineProperty(_assertThisInitialized(_this),"resp",void 0);_this.resp=resp;return _this}return RequestFailure}(_public.KbnError);exports.RequestFailure=RequestFailure},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ISearchSource",{enumerable:true,get:function get(){return _search_source.ISearchSource}});exports.SortDirection=void 0;var _search_source=__webpack_require__(350);var SortDirection;exports.SortDirection=SortDirection;(function(SortDirection){SortDirection["asc"]="asc";SortDirection["desc"]="desc"})(SortDirection||(exports.SortDirection=SortDirection={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tabifyAggResponse=tabifyAggResponse;var _lodash=__webpack_require__(49);var _response_writer=__webpack_require__(790);var _buckets=__webpack_require__(791);var _aggs=__webpack_require__(174);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function tabifyAggResponse(aggConfigs,esResponse,respOpts){function collectBucket(aggs,write,bucket,key,aggScale){var column=write.columns.shift();if(column){var agg=column.aggConfig;var aggInfo=agg.write(aggs);aggScale*=aggInfo.metricScale||1;switch(agg.type.type){case _aggs.AggGroupNames.Buckets:var aggBucket=(0,_lodash.get)(bucket,agg.id);var tabifyBuckets=new _buckets.TabifyBuckets(aggBucket,agg.params,timeRange);if(tabifyBuckets.length){tabifyBuckets.forEach((function(subBucket,tabifyBucketKey){var bucketValue=agg.getKey(subBucket,tabifyBucketKey);var hasBucketValue=typeof bucketValue!=="undefined";if(hasBucketValue){write.bucketBuffer.push({id:column.id,value:bucketValue})}collectBucket(aggs,write,subBucket,agg.getKey(subBucket,tabifyBucketKey),aggScale);if(hasBucketValue){write.bucketBuffer.pop()}}))}else if(respOpts===null||respOpts===void 0?void 0:respOpts.partialRows){write.columns.unshift(column);passEmptyBuckets(aggs,write,bucket,key,aggScale);write.columns.shift()}else{write.row()}break;case _aggs.AggGroupNames.Metrics:var value=agg.getValue(bucket);if(aggScale!==1){value*=aggScale}write.metricBuffer.push({id:column.id,value:value});if(!write.columns.length){write.row()}else{collectBucket(aggs,write,bucket,key,aggScale)}write.metricBuffer.pop();break}write.columns.unshift(column)}}function passEmptyBuckets(aggs,write,bucket,key,aggScale){var column=write.columns.shift();if(column){var agg=column.aggConfig;switch(agg.type.type){case _aggs.AggGroupNames.Metrics:write.columns.unshift(column);collectBucket(aggs,write,bucket,key,aggScale);return;case _aggs.AggGroupNames.Buckets:passEmptyBuckets(aggs,write,bucket,key,aggScale)}write.columns.unshift(column)}}var write=new _response_writer.TabbedAggResponseWriter(aggConfigs,respOpts||{});var topLevelBucket=_objectSpread({},esResponse.aggregations,{doc_count:esResponse.hits.total});var timeRange;if(respOpts&&respOpts.timeRange){var _Object$keys=Object.keys(respOpts.timeRange),_Object$keys2=_slicedToArray(_Object$keys,1),timeRangeKey=_Object$keys2[0];if(timeRangeKey){timeRange=_objectSpread({name:timeRangeKey},respOpts.timeRange[timeRangeKey])}}collectBucket(aggConfigs,write,topLevelBucket,"",1);return write.response()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TabbedAggResponseWriter=void 0;var _lodash=__webpack_require__(49);var _get_columns=__webpack_require__(361);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TabbedAggResponseWriter=function(){function TabbedAggResponseWriter(aggs,_ref){var _ref$metricsAtAllLeve=_ref.metricsAtAllLevels,metricsAtAllLevels=_ref$metricsAtAllLeve===void 0?false:_ref$metricsAtAllLeve,_ref$partialRows=_ref.partialRows,partialRows=_ref$partialRows===void 0?false:_ref$partialRows;_classCallCheck(this,TabbedAggResponseWriter);_defineProperty(this,"columns",void 0);_defineProperty(this,"rows",[]);_defineProperty(this,"bucketBuffer",[]);_defineProperty(this,"metricBuffer",[]);_defineProperty(this,"partialRows",void 0);this.partialRows=partialRows;this.columns=(0,_get_columns.tabifyGetColumns)(aggs.getResponseAggs(),!metricsAtAllLevels);this.rows=[]}_createClass(TabbedAggResponseWriter,[{key:"row",value:function row(){var rowBuffer={};this.bucketBuffer.forEach((function(bucket){rowBuffer[bucket.id]=bucket.value}));this.metricBuffer.forEach((function(metric){rowBuffer[metric.id]=metric.value}));var isPartialRow=!this.columns.every((function(column){return rowBuffer.hasOwnProperty(column.id)}));var removePartial=isPartialRow&&!this.partialRows;if(!(0,_lodash.isEmpty)(rowBuffer)&&!removePartial){this.rows.push(rowBuffer)}}},{key:"response",value:function response(){return{columns:this.columns,rows:this.rows}}}]);return TabbedAggResponseWriter}();exports.TabbedAggResponseWriter=TabbedAggResponseWriter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TabifyBuckets=void 0;var _lodash=__webpack_require__(49);var _moment=_interopRequireDefault(__webpack_require__(32));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var isRangeEqual=function isRangeEqual(range1,range2){return(range1===null||range1===void 0?void 0:range1.from)===(range2===null||range2===void 0?void 0:range2.from)&&(range1===null||range1===void 0?void 0:range1.to)===(range2===null||range2===void 0?void 0:range2.to)};var TabifyBuckets=function(){function TabifyBuckets(aggResp,aggParams,timeRange){_classCallCheck(this,TabifyBuckets);_defineProperty(this,"length",void 0);_defineProperty(this,"objectMode",void 0);_defineProperty(this,"buckets",void 0);_defineProperty(this,"_keys",[]);if(aggResp&&aggResp.buckets){this.buckets=aggResp.buckets}else if(aggResp){this.buckets=[aggResp]}else{this.buckets=[]}this.objectMode=(0,_lodash.isPlainObject)(this.buckets);if(this.objectMode){this._keys=(0,_lodash.keys)(this.buckets);this.length=this._keys.length}else{this.length=this.buckets.length}if(this.length&&aggParams){this.orderBucketsAccordingToParams(aggParams);if(aggParams.drop_partials){this.dropPartials(aggParams,timeRange)}}}_createClass(TabifyBuckets,[{key:"forEach",value:function forEach(fn){var buckets=this.buckets;if(this.objectMode){this._keys.forEach((function(key){fn(buckets[key],key)}))}else{buckets.forEach((function(bucket){fn(bucket,bucket.key)}))}}},{key:"orderBucketsAccordingToParams",value:function orderBucketsAccordingToParams(params){var _this=this;if(params.filters&&this.objectMode){this._keys=params.filters.map((function(filter){var query=(0,_lodash.get)(filter,"input.query.query_string.query",filter.input.query);var queryString=typeof query==="string"?query:JSON.stringify(query);return filter.label||queryString||"*"}))}else if(params.ranges&&this.objectMode){this._keys=params.ranges.map((function(range){return(0,_lodash.findKey)(_this.buckets,(function(el){return isRangeEqual(el,range)}))}))}else if(params.ranges&&params.field.type!=="date"){var ranges=params.ranges;if(params.ipRangeType){ranges=params.ipRangeType==="mask"?ranges.mask:ranges.fromTo}this.buckets=ranges.map((function(range){if(range.mask){return _this.buckets.find((function(el){return el.key===range.mask}))}return _this.buckets.find((function(el){return isRangeEqual(el,range)}))}))}}},{key:"dropPartials",value:function dropPartials(params,timeRange){if(!timeRange||this.buckets.length<=1||this.objectMode||params.field.name!==timeRange.name){return}var interval=this.buckets[1].key-this.buckets[0].key;this.buckets=this.buckets.filter((function(bucket){if((0,_moment.default)(bucket.key).isBefore(timeRange.gte)){return false}if((0,_moment.default)(bucket.key+interval).isAfter(timeRange.lte)){return false}return true}));this.length=this.buckets.length}}]);return TabifyBuckets}();exports.TabifyBuckets=TabifyBuckets},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildTabularInspectorData=buildTabularInspectorData;var _lodash=__webpack_require__(49);var _public=__webpack_require__(362);var _create_filter=__webpack_require__(830);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function buildTabularInspectorData(_x,_x2){return _buildTabularInspectorData.apply(this,arguments)}function _buildTabularInspectorData(){_buildTabularInspectorData=_asyncToGenerator(regeneratorRuntime.mark((function _callee(table,queryFilter){var aggConfigs,rows,columns;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:aggConfigs=table.columns.map((function(column){return column.aggConfig}));rows=table.rows.map((function(row){return table.columns.reduce((function(prev,cur,colIndex){var value=row[cur.id];var fieldFormatter=cur.aggConfig.fieldFormatter("text");prev["col-".concat(colIndex,"-").concat(cur.aggConfig.id)]=new _public.FormattedData(value,fieldFormatter(value));return prev}),{})}));columns=table.columns.map((function(col,colIndex){var field=col.aggConfig.getField();var isCellContentFilterable=col.aggConfig.isFilterable()&&(!field||field.filterable);return{name:col.name,field:"col-".concat(colIndex,"-").concat(col.aggConfig.id),filter:isCellContentFilterable&&function(value){var rowIndex=rows.findIndex((function(row){return row["col-".concat(colIndex,"-").concat(col.aggConfig.id)].raw===value.raw}));var filter=(0,_create_filter.createFilter)(aggConfigs,table,colIndex,rowIndex,value.raw);if(filter){queryFilter.addFilters(filter)}},filterOut:isCellContentFilterable&&function(value){var rowIndex=rows.findIndex((function(row){return row["col-".concat(colIndex,"-").concat(col.aggConfig.id)].raw===value.raw}));var filter=(0,_create_filter.createFilter)(aggConfigs,table,colIndex,rowIndex,value.raw);if(filter){var notOther=value.raw!=="__other__";var notMissing=value.raw!=="__missing__";if(Array.isArray(filter)){filter.forEach((function(f){return(0,_lodash.set)(f,"meta.negate",notOther&&notMissing)}))}else{(0,_lodash.set)(filter,"meta.negate",notOther&&notMissing)}queryFilter.addFilters(filter)}}}}));return _context.abrupt("return",{columns:columns,rows:rows});case 4:case"end":return _context.stop()}}}),_callee)})));return _buildTabularInspectorData.apply(this,arguments)}},function(module,exports,__webpack_require__){if(window.__kbnDarkMode__){__webpack_require__(795)}else{__webpack_require__(797)}},function(module,exports,__webpack_require__){var api=__webpack_require__(2);var content=__webpack_require__(796);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(3);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".insDataTableFormat__filter {\n  opacity: 0; }\n\n.insDataTableFormat__table tr:hover .insDataTableFormat__filter,\n.insDataTableFormat__filter:focus {\n  opacity: 1; }\n\n.insRequestDetailsStats__icon {\n  margin-right: 8px; }\n\n.insRequestSelector__singleRequest {\n  height: 32px;\n  padding: 0 8px;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n.insRequestSelector__menuSpinner {\n  margin-left: 8px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(2);var content=__webpack_require__(798);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(3);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".insDataTableFormat__filter {\n  opacity: 0; }\n\n.insDataTableFormat__table tr:hover .insDataTableFormat__filter,\n.insDataTableFormat__filter:focus {\n  opacity: 1; }\n\n.insRequestDetailsStats__icon {\n  margin-right: 8px; }\n\n.insRequestSelector__singleRequest {\n  height: 32px;\n  padding: 0 8px;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n\n.insRequestSelector__menuSpinner {\n  margin-left: 8px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorPublicPlugin=void 0;var _i18n=__webpack_require__(1);var React=_interopRequireWildcard(__webpack_require__(28));var _public=__webpack_require__(31);var _view_registry=__webpack_require__(800);var _inspector_panel=__webpack_require__(801);var _views=__webpack_require__(807);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var InspectorPublicPlugin=function(){function InspectorPublicPlugin(initializerContext){_classCallCheck(this,InspectorPublicPlugin);_defineProperty(this,"views",void 0)}_createClass(InspectorPublicPlugin,[{key:"setup",value:function(){var _setup=_asyncToGenerator(regeneratorRuntime.mark((function _callee(core){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.views=new _view_registry.InspectorViewRegistry;this.views.register((0,_views.getDataViewDescription)(core.uiSettings));this.views.register((0,_views.getRequestsViewDescription)());return _context.abrupt("return",{registerView:this.views.register.bind(this.views),__LEGACY:{views:this.views}});case 4:case"end":return _context.stop()}}}),_callee,this)})));function setup(_x){return _setup.apply(this,arguments)}return setup}()},{key:"start",value:function start(core){var _this=this;var isAvailable=function isAvailable(adapters){return _this.views.getVisible(adapters).length>0};var closeButtonLabel=_i18n.i18n.translate("inspector.closeButton",{defaultMessage:"Close Inspector"});var open=function open(adapters){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var views=_this.views.getVisible(adapters);if(!views||views.length===0){throw new Error("Tried to open an inspector without views being available.\n          Make sure to call Inspector.isAvailable() with the same adapters before to check\n          if an inspector can be shown.")}return core.overlays.openFlyout((0,_public.toMountPoint)(React.createElement(_inspector_panel.InspectorPanel,{views:views,adapters:adapters,title:options.title})),{"data-test-subj":"inspectorPanel",closeButtonAriaLabel:closeButtonLabel})};return{isAvailable:isAvailable,open:open}}},{key:"stop",value:function stop(){}}]);return InspectorPublicPlugin}();exports.InspectorPublicPlugin=InspectorPublicPlugin},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorViewRegistry=void 0;var _events=__webpack_require__(181);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var InspectorViewRegistry=function(_EventEmitter){_inherits(InspectorViewRegistry,_EventEmitter);function InspectorViewRegistry(){var _getPrototypeOf2;var _this;_classCallCheck(this,InspectorViewRegistry);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(InspectorViewRegistry)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"views",[]);return _this}_createClass(InspectorViewRegistry,[{key:"register",value:function register(view){if(!view){return}this.views.push(view);this.views.sort((function(a,b){return(a.order||Number.MAX_VALUE)-(b.order||Number.MAX_VALUE)}));this.emit("change")}},{key:"getAll",value:function getAll(){return this.views}},{key:"getVisible",value:function getVisible(adapters){if(!adapters){return[]}return this.views.filter((function(view){return!view.shouldShow||view.shouldShow(adapters)}))}}]);return InspectorViewRegistry}(_events.EventEmitter);exports.InspectorViewRegistry=InspectorViewRegistry},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorPanel=void 0;var _i18n=__webpack_require__(1);var _react=_interopRequireWildcard(__webpack_require__(28));var _propTypes=_interopRequireDefault(__webpack_require__(55));var _eui=__webpack_require__(29);var _inspector_view_chooser=__webpack_require__(806);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function hasAdaptersChanged(oldAdapters,newAdapters){return Object.keys(oldAdapters).length!==Object.keys(newAdapters).length||Object.keys(oldAdapters).some((function(key){return oldAdapters[key]!==newAdapters[key]}))}var inspectorTitle=_i18n.i18n.translate("inspector.title",{defaultMessage:"Inspector"});var InspectorPanel=function(_Component){_inherits(InspectorPanel,_Component);function InspectorPanel(){var _getPrototypeOf2;var _this;_classCallCheck(this,InspectorPanel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(InspectorPanel)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{selectedView:_this.props.views[0],views:_this.props.views,adapters:_objectSpread({},_this.props.adapters)});_defineProperty(_assertThisInitialized(_this),"onViewSelected",(function(view){if(view!==_this.state.selectedView){_this.setState({selectedView:view})}}));return _this}_createClass(InspectorPanel,[{key:"renderSelectedPanel",value:function renderSelectedPanel(){return _react.default.createElement(this.state.selectedView.component,{adapters:this.props.adapters,title:this.props.title||""})}},{key:"render",value:function render(){var _this$props=this.props,views=_this$props.views,title=_this$props.title;var selectedView=this.state.selectedView;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h1",null,title))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_inspector_view_chooser.InspectorViewChooser,{views:views,onViewSelected:this.onViewSelected,selectedView:selectedView})))),_react.default.createElement(_eui.EuiFlyoutBody,null,this.renderSelectedPanel()))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){if(hasAdaptersChanged(prevState.adapters,nextProps.adapters)){throw new Error("Adapters are not allowed to be changed on an open InspectorPanel.")}var selectedViewMustChange=nextProps.views!==prevState.views&&!nextProps.views.includes(prevState.selectedView);return{views:nextProps.views,selectedView:selectedViewMustChange?nextProps.views[0]:prevState.selectedView}}}]);return InspectorPanel}(_react.Component);exports.InspectorPanel=InspectorPanel;_defineProperty(InspectorPanel,"defaultProps",{title:inspectorTitle});_defineProperty(InspectorPanel,"propTypes",{adapters:_propTypes.default.object.isRequired,views:function views(props,propName,componentName){if(!Array.isArray(props.views)||props.views.length<1){throw new Error("".concat(propName," prop must be an array of at least one element in ").concat(componentName,"."))}},title:_propTypes.default.string})},,,,,function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.InspectorViewChooser=void 0;var _react=__webpack_require__(30);var _react2=_interopRequireWildcard(__webpack_require__(28));var _propTypes=_interopRequireDefault(__webpack_require__(55));var _eui=__webpack_require__(29);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var InspectorViewChooser=function(_Component){_inherits(InspectorViewChooser,_Component);function InspectorViewChooser(){var _getPrototypeOf2;var _this;_classCallCheck(this,InspectorViewChooser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(InspectorViewChooser)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isSelectorOpen:false});_defineProperty(_assertThisInitialized(_this),"toggleSelector",(function(){_this.setState((function(prev){return{isSelectorOpen:!prev.isSelectorOpen}}))}));_defineProperty(_assertThisInitialized(_this),"closeSelector",(function(){_this.setState({isSelectorOpen:false})}));_defineProperty(_assertThisInitialized(_this),"renderView",(function(view,index){return _react2.default.createElement(_eui.EuiContextMenuItem,{key:index,onClick:function onClick(){_this.props.onViewSelected(view);_this.closeSelector()},toolTipContent:view.help,toolTipPosition:"left","data-test-subj":"inspectorViewChooser".concat(view.title)},view.title)}));return _this}_createClass(InspectorViewChooser,[{key:"renderViewButton",value:function renderViewButton(){return _react2.default.createElement(_eui.EuiButtonEmpty,{size:"s",iconType:"arrowDown",iconSide:"right",onClick:this.toggleSelector,"data-test-subj":"inspectorViewChooser"},_react2.default.createElement(_react.FormattedMessage,{id:"inspector.view",defaultMessage:"View: {viewName}",values:{viewName:this.props.selectedView.title}}))}},{key:"renderSingleView",value:function renderSingleView(){return _react2.default.createElement(_eui.EuiToolTip,{position:"bottom",content:this.props.selectedView.help},_react2.default.createElement(_react.FormattedMessage,{id:"inspector.view",defaultMessage:"View: {viewName}",values:{viewName:this.props.selectedView.title}}))}},{key:"render",value:function render(){var views=this.props.views;if(views.length<2){return this.renderSingleView()}var triggerButton=this.renderViewButton();return _react2.default.createElement(_eui.EuiPopover,{id:"inspectorViewChooser",ownFocus:true,button:triggerButton,isOpen:this.state.isSelectorOpen,closePopover:this.closeSelector,panelPaddingSize:"none",anchorPosition:"downRight",repositionOnScroll:true},_react2.default.createElement(_eui.EuiContextMenuPanel,{items:views.map(this.renderView)}))}}]);return InspectorViewChooser}(_react2.Component);exports.InspectorViewChooser=InspectorViewChooser;_defineProperty(InspectorViewChooser,"propTypes",{views:_propTypes.default.array.isRequired,onViewSelected:_propTypes.default.func.isRequired,selectedView:_propTypes.default.object.isRequired})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getDataViewDescription",{enumerable:true,get:function get(){return _data.getDataViewDescription}});Object.defineProperty(exports,"getRequestsViewDescription",{enumerable:true,get:function get(){return _requests.getRequestsViewDescription}});var _data=__webpack_require__(808);var _requests=__webpack_require__(815)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDataViewDescription=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _i18n=__webpack_require__(1);var _data_view=__webpack_require__(809);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var getDataViewDescription=function getDataViewDescription(uiSettings){return{title:_i18n.i18n.translate("inspector.data.dataTitle",{defaultMessage:"Data"}),order:10,help:_i18n.i18n.translate("inspector.data.dataDescriptionTooltip",{defaultMessage:"View the data behind the visualization"}),shouldShow:function shouldShow(adapters){return Boolean(adapters.data)},component:function component(props){return _react.default.createElement(_data_view.DataViewComponent,_extends({},props,{uiSettings:uiSettings}))}}};exports.getDataViewDescription=getDataViewDescription},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DataViewComponent=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _propTypes=_interopRequireDefault(__webpack_require__(55));var _react2=__webpack_require__(30);var _eui=__webpack_require__(29);var _data_table=__webpack_require__(810);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataViewComponent=function(_Component){_inherits(DataViewComponent,_Component);function DataViewComponent(){var _getPrototypeOf2;var _this;_classCallCheck(this,DataViewComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DataViewComponent)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{});_defineProperty(_assertThisInitialized(_this),"_isMounted",false);_defineProperty(_assertThisInitialized(_this),"onUpdateData",(function(type){if(type==="tabular"){_this.setState({tabularData:null,tabularOptions:{},tabularPromise:_this.props.adapters.data.getTabular()})}}));return _this}_createClass(DataViewComponent,[{key:"finishLoadingData",value:function(){var _finishLoadingData=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var tabularPromise,tabularData;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:tabularPromise=this.state.tabularPromise;if(!tabularPromise){_context.next=6;break}_context.next=4;return tabularPromise;case 4:tabularData=_context.sent;if(this._isMounted){this.setState({tabularData:tabularData.data,tabularOptions:tabularData.options,tabularPromise:null})}case 6:case"end":return _context.stop()}}}),_callee,this)})));function finishLoadingData(){return _finishLoadingData.apply(this,arguments)}return finishLoadingData}()},{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true;this.props.adapters.data.on("change",this.onUpdateData);this.finishLoadingData()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false;this.props.adapters.data.removeListener("change",this.onUpdateData)}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.finishLoadingData()}},{key:"render",value:function render(){if(this.state.tabularPromise){return DataViewComponent.renderLoading()}else if(!this.state.tabularData){return DataViewComponent.renderNoData()}return _react.default.createElement(_data_table.DataTableFormat,{data:this.state.tabularData,isFormatted:this.state.tabularOptions.returnsFormattedValues,exportTitle:this.props.title,uiSettings:this.props.uiSettings})}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,state){if(state&&nextProps.adapters===state.adapters){return null}return{adapters:nextProps.adapters,tabularData:null,tabularOptions:{},tabularPromise:nextProps.adapters.data.getTabular()}}},{key:"renderNoData",value:function renderNoData(){return _react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.noDataAvailableTitle",defaultMessage:"No data available"})),body:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.noDataAvailableDescription",defaultMessage:"The element did not provide any data."})))})}},{key:"renderLoading",value:function renderLoading(){return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center",alignItems:"center",style:{height:"100%"}},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiPanel,{className:"eui-textCenter"},_react.default.createElement(_eui.EuiLoadingChart,{size:"m"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.gatheringDataLabel",defaultMessage:"Gathering data"}))))))}}]);return DataViewComponent}(_react.Component);exports.DataViewComponent=DataViewComponent;_defineProperty(DataViewComponent,"propTypes",{uiSettings:_propTypes.default.object.isRequired,adapters:_propTypes.default.object.isRequired,title:_propTypes.default.string.isRequired})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DataTableFormat=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _propTypes=_interopRequireDefault(__webpack_require__(55));var _eui=__webpack_require__(29);var _react2=__webpack_require__(30);var _i18n=__webpack_require__(1);var _download_options=__webpack_require__(811);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataTableFormat=function(_Component){_inherits(DataTableFormat,_Component);function DataTableFormat(){var _getPrototypeOf2;var _this;_classCallCheck(this,DataTableFormat);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DataTableFormat)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"csvSeparator",_this.props.uiSettings.get("csv:separator",","));_defineProperty(_assertThisInitialized(_this),"quoteValues",_this.props.uiSettings.get("csv:quoteValues",true));_defineProperty(_assertThisInitialized(_this),"state",{});return _this}_createClass(DataTableFormat,[{key:"render",value:function render(){var _this$state=this.state,columns=_this$state.columns,rows=_this$state.rows;var pagination={pageSizeOptions:[10,20,50],initialPageSize:20};return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:true}),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_download_options.DataDownloadOptions,{isFormatted:this.props.isFormatted,title:this.props.exportTitle,csvSeparator:this.csvSeparator,quoteValues:this.quoteValues,columns:columns,rows:rows}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiInMemoryTable,{className:"insDataTableFormat__table","data-test-subj":"inspectorTable",columns:columns,items:rows,sorting:true,pagination:pagination}))}}],[{key:"renderCell",value:function renderCell(dataColumn,value){var isFormatted=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return _react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"s",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},isFormatted?value.formatted:value),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFlexGroup,{responsive:false,gutterSize:"none",alignItems:"center"},dataColumn.filter&&_react.default.createElement(_eui.EuiToolTip,{position:"bottom",content:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.filterForValueButtonTooltip",defaultMessage:"Filter for value"})},_react.default.createElement(_eui.EuiButtonIcon,{iconType:"plusInCircle",color:"text","aria-label":_i18n.i18n.translate("inspector.data.filterForValueButtonAriaLabel",{defaultMessage:"Filter for value"}),"data-test-subj":"filterForInspectorCellValue",className:"insDataTableFormat__filter",onClick:function onClick(){return dataColumn.filter(value)}})),dataColumn.filterOut&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiToolTip,{position:"bottom",content:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.filterOutValueButtonTooltip",defaultMessage:"Filter out value"})},_react.default.createElement(_eui.EuiButtonIcon,{iconType:"minusInCircle",color:"text","aria-label":_i18n.i18n.translate("inspector.data.filterOutValueButtonAriaLabel",{defaultMessage:"Filter out value"}),"data-test-subj":"filterOutInspectorCellValue",className:"insDataTableFormat__filter",onClick:function onClick(){return dataColumn.filterOut(value)}}))))))}},{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(_ref){var data=_ref.data,isFormatted=_ref.isFormatted;if(!data){return{columns:null,rows:null}}var columns=data.columns.map((function(dataColumn){return{name:dataColumn.name,field:dataColumn.field,sortable:isFormatted?function(row){return row[dataColumn.field].raw}:true,render:function render(value){return DataTableFormat.renderCell(dataColumn,value,isFormatted)}}}));return{columns:columns,rows:data.rows}}}]);return DataTableFormat}(_react.Component);exports.DataTableFormat=DataTableFormat;_defineProperty(DataTableFormat,"propTypes",{data:_propTypes.default.object.isRequired,exportTitle:_propTypes.default.string.isRequired,uiSettings:_propTypes.default.object.isRequired,isFormatted:_propTypes.default.bool})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DataDownloadOptions=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _propTypes=_interopRequireDefault(__webpack_require__(55));var _react2=__webpack_require__(30);var _i18n=__webpack_require__(1);var _eui=__webpack_require__(29);var _export_csv=__webpack_require__(812);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataDownloadOptions=function(_Component){_inherits(DataDownloadOptions,_Component);function DataDownloadOptions(){var _getPrototypeOf2;var _this;_classCallCheck(this,DataDownloadOptions);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DataDownloadOptions)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"onTogglePopover",(function(){_this.setState((function(state){return{isPopoverOpen:!state.isPopoverOpen}}))}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({isPopoverOpen:false})}));_defineProperty(_assertThisInitialized(_this),"exportCsv",(function(){var customParams=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var filename=_this.props.title;if(!filename||filename.length===0){filename=_i18n.i18n.translate("inspector.data.downloadOptionsUnsavedFilename",{defaultMessage:"unsaved"})}(0,_export_csv.exportAsCsv)(_objectSpread({filename:"".concat(filename,".csv"),columns:_this.props.columns,rows:_this.props.rows,csvSeparator:_this.props.csvSeparator,quoteValues:_this.props.quoteValues},customParams))}));_defineProperty(_assertThisInitialized(_this),"exportFormattedCsv",(function(){_this.exportCsv({valueFormatter:function valueFormatter(item){return item.formatted}})}));_defineProperty(_assertThisInitialized(_this),"exportFormattedAsRawCsv",(function(){_this.exportCsv({valueFormatter:function valueFormatter(item){return item.raw}})}));return _this}_createClass(DataDownloadOptions,[{key:"renderUnformattedDownload",value:function renderUnformattedDownload(){return _react.default.createElement(_eui.EuiButton,{size:"s",onClick:this.exportCsv},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.downloadCSVButtonLabel",defaultMessage:"Download CSV"}))}},{key:"renderFormattedDownloads",value:function renderFormattedDownloads(){var button=_react.default.createElement(_eui.EuiButton,{iconType:"arrowDown",iconSide:"right",size:"s",onClick:this.onTogglePopover},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.downloadCSVToggleButtonLabel",defaultMessage:"Download CSV"}));var items=[_react.default.createElement(_eui.EuiContextMenuItem,{key:"csv",onClick:this.exportFormattedCsv,toolTipContent:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.formattedCSVButtonTooltip",defaultMessage:"Download the data in table format"}),toolTipPosition:"left"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.formattedCSVButtonLabel",defaultMessage:"Formatted CSV"})),_react.default.createElement(_eui.EuiContextMenuItem,{key:"rawCsv",onClick:this.exportFormattedAsRawCsv,toolTipContent:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.rawCSVButtonTooltip",defaultMessage:"Download the data as provided, for example, dates as timestamps"}),toolTipPosition:"left"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.data.rawCSVButtonLabel",defaultMessage:"Raw CSV"}))];return _react.default.createElement(_eui.EuiPopover,{id:"inspectorDownloadData",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",repositionOnScroll:true},_react.default.createElement(_eui.EuiContextMenuPanel,{className:"eui-textNoWrap",items:items}))}},{key:"render",value:function render(){return this.props.isFormatted?this.renderFormattedDownloads():this.renderUnformattedDownload()}}]);return DataDownloadOptions}(_react.Component);exports.DataDownloadOptions=DataDownloadOptions;_defineProperty(DataDownloadOptions,"propTypes",{title:_propTypes.default.string.isRequired,csvSeparator:_propTypes.default.string.isRequired,quoteValues:_propTypes.default.bool.isRequired,isFormatted:_propTypes.default.bool,columns:_propTypes.default.array,rows:_propTypes.default.array})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.exportAsCsv=exportAsCsv;var _lodash=__webpack_require__(49);var _filesaver=__webpack_require__(813);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var LINE_FEED_CHARACTER="\r\n";var nonAlphaNumRE=/[^a-zA-Z0-9]/;var allDoubleQuoteRE=/"/g;function escape(val,quoteValues){if((0,_lodash.isObject)(val)){val=val.valueOf()}val=String(val);if(quoteValues&&nonAlphaNumRE.test(val)){val='"'.concat(val.replace(allDoubleQuoteRE,'""'),'"')}return val}function buildCsv(columns,rows,csvSeparator,quoteValues,valueFormatter){var header=columns.map((function(col){return escape(col.name,quoteValues)}));var orderedFieldNames=columns.map((function(col){return col.field}));var csvRows=rows.map((function(row){return orderedFieldNames.map((function(field){return escape(valueFormatter?valueFormatter(row[field]):row[field],quoteValues)}))}));return[header].concat(_toConsumableArray(csvRows)).map((function(row){return row.join(csvSeparator)})).join(LINE_FEED_CHARACTER)+LINE_FEED_CHARACTER}function exportAsCsv(_ref){var filename=_ref.filename,columns=_ref.columns,rows=_ref.rows,valueFormatter=_ref.valueFormatter,csvSeparator=_ref.csvSeparator,quoteValues=_ref.quoteValues;var type="text/plain;charset=utf-8";var csv=new Blob([buildCsv(columns,rows,csvSeparator,quoteValues,valueFormatter)],{type:type});(0,_filesaver.saveAs)(csv,filename)}},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRequestsViewDescription=void 0;var _i18n=__webpack_require__(1);var _requests_view=__webpack_require__(816);var getRequestsViewDescription=function getRequestsViewDescription(){return{title:_i18n.i18n.translate("inspector.requests.requestsTitle",{defaultMessage:"Requests"}),order:20,help:_i18n.i18n.translate("inspector.requests.requestsDescriptionTooltip",{defaultMessage:"View the requests that collected the data"}),shouldShow:function shouldShow(adapters){return Boolean(adapters.requests)},component:_requests_view.RequestsViewComponent}};exports.getRequestsViewDescription=getRequestsViewDescription},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestsViewComponent=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _propTypes=_interopRequireDefault(__webpack_require__(55));var _react2=__webpack_require__(30);var _eui=__webpack_require__(29);var _adapters=__webpack_require__(229);var _request_selector=__webpack_require__(823);var _request_details=__webpack_require__(824);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestsViewComponent=function(_Component){_inherits(RequestsViewComponent,_Component);function RequestsViewComponent(props){var _this;_classCallCheck(this,RequestsViewComponent);_this=_possibleConstructorReturn(this,_getPrototypeOf(RequestsViewComponent).call(this,props));_defineProperty(_assertThisInitialized(_this),"_onRequestsChange",(function(){var requests=_this.props.adapters.requests.getRequests();var newState={requests:requests};if(!requests.includes(_this.state.request)){newState.request=requests.length?requests[0]:null}_this.setState(newState)}));_defineProperty(_assertThisInitialized(_this),"selectRequest",(function(request){if(request!==_this.state.request){_this.setState({request:request})}}));props.adapters.requests.on("change",_this._onRequestsChange);var _requests=props.adapters.requests.getRequests();_this.state={requests:_requests,request:_requests.length?_requests[0]:null};return _this}_createClass(RequestsViewComponent,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.adapters.requests.removeListener("change",this._onRequestsChange)}},{key:"render",value:function render(){if(!this.state.requests||!this.state.requests.length){return RequestsViewComponent.renderEmptyRequests()}var failedCount=this.state.requests.filter((function(req){return req.status===_adapters.RequestStatus.ERROR})).length;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("p",{role:"status","aria-live":"polite","aria-atomic":"true"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestWasMadeDescription",defaultMessage:"{requestsCount, plural, one {# request was} other {# requests were} } made{failedRequests}",values:{requestsCount:this.state.requests.length,failedRequests:failedCount>0?_react.default.createElement(_eui.EuiTextColor,{color:"danger"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestWasMadeDescription.requestHadFailureText",defaultMessage:", {failedCount} had a failure",values:{failedCount:failedCount}})):""}}))),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react.default.createElement(_request_selector.RequestSelector,{requests:this.state.requests,selectedRequest:this.state.request,onRequestChanged:this.selectRequest}),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),this.state.request&&this.state.request.description&&_react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement("p",null,this.state.request.description)),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),this.state.request&&_react.default.createElement(_request_details.RequestDetails,{request:this.state.request}))}}],[{key:"renderEmptyRequests",value:function renderEmptyRequests(){return _react.default.createElement(_eui.EuiEmptyPrompt,{"data-test-subj":"inspectorNoRequestsMessage",title:_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.noRequestsLoggedTitle",defaultMessage:"No requests logged"})),body:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.noRequestsLoggedDescription.elementHasNotLoggedAnyRequestsText",defaultMessage:"The element hasn't logged any requests (yet)."})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.noRequestsLoggedDescription.whatDoesItUsuallyMeanText",defaultMessage:"This usually means that there was no need to fetch any data or that the element has not yet started fetching data."})))})}}]);return RequestsViewComponent}(_react.Component);exports.RequestsViewComponent=RequestsViewComponent;_defineProperty(RequestsViewComponent,"propTypes",{adapters:_propTypes.default.object.isRequired,title:_propTypes.default.string.isRequired})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FormattedData",{enumerable:true,get:function get(){return _formatted_data.FormattedData}});Object.defineProperty(exports,"DataAdapter",{enumerable:true,get:function get(){return _data_adapter.DataAdapter}});var _formatted_data=__webpack_require__(818);var _data_adapter=__webpack_require__(819)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(exports,"__esModule",{value:true});exports.FormattedData=void 0;var FormattedData=function FormattedData(raw,formatted){_classCallCheck(this,FormattedData);this.raw=raw;this.formatted=formatted};exports.FormattedData=FormattedData},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.DataAdapter=void 0;var _events=__webpack_require__(181);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataAdapter=function(_events$EventEmitter){_inherits(DataAdapter,_events$EventEmitter);function DataAdapter(){var _getPrototypeOf2;var _this;_classCallCheck(this,DataAdapter);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DataAdapter)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"tabular",void 0);_defineProperty(_assertThisInitialized(_this),"tabularOptions",void 0);return _this}_createClass(DataAdapter,[{key:"setTabularLoader",value:function setTabularLoader(callback){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.tabular=callback;this.tabularOptions=options;this.emit("change","tabular")}},{key:"getTabular",value:function getTabular(){if(!this.tabular||!this.tabularOptions){return Promise.resolve({data:null,options:{}})}var options=this.tabularOptions;return Promise.resolve(this.tabular()).then((function(data){return{data:data,options:options}}))}}]);return DataAdapter}(_events.EventEmitter);exports.DataAdapter=DataAdapter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RequestStatus",{enumerable:true,get:function get(){return _types.RequestStatus}});Object.defineProperty(exports,"RequestAdapter",{enumerable:true,get:function get(){return _request_adapter.RequestAdapter}});var _types=__webpack_require__(230);var _request_adapter=__webpack_require__(821)},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty2(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestAdapter=void 0;var _events=__webpack_require__(181);var _v=_interopRequireDefault(__webpack_require__(363));var _request_responder=__webpack_require__(822);var _types=__webpack_require__(230);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestAdapter=function(_events$EventEmitter){_inherits(RequestAdapter,_events$EventEmitter);function RequestAdapter(){var _this;_classCallCheck(this,RequestAdapter);_this=_possibleConstructorReturn(this,_getPrototypeOf(RequestAdapter).call(this));_defineProperty(_assertThisInitialized(_this),"requests",void 0);_this.requests=new Map;return _this}_createClass(RequestAdapter,[{key:"start",value:function start(name){var _this2=this;var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var _params$id;var req=_objectSpread({},params,{name:name,startTime:Date.now(),status:_types.RequestStatus.PENDING,id:(_params$id=params.id)!==null&&_params$id!==void 0?_params$id:(0,_v.default)()});this.requests.set(req.id,req);this._onChange();return new _request_responder.RequestResponder(req,(function(){return _this2._onChange()}))}},{key:"reset",value:function reset(){this.requests=new Map;this._onChange()}},{key:"resetRequest",value:function resetRequest(id){this.requests.delete(id);this._onChange()}},{key:"getRequests",value:function getRequests(){return Array.from(this.requests.values())}},{key:"_onChange",value:function _onChange(){this.emit("change")}}]);return RequestAdapter}(_events.EventEmitter);exports.RequestAdapter=RequestAdapter},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty2(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestResponder=void 0;var _i18n=__webpack_require__(1);var _types=__webpack_require__(230);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestResponder=function(){function RequestResponder(request,onChange){_classCallCheck(this,RequestResponder);_defineProperty(this,"request",void 0);_defineProperty(this,"onChange",void 0);this.request=request;this.onChange=onChange}_createClass(RequestResponder,[{key:"json",value:function json(reqJson){this.request.json=reqJson;this.onChange();return this}},{key:"stats",value:function stats(_stats){this.request.stats=_objectSpread({},this.request.stats||{},{},_stats);var startDate=new Date(this.request.startTime);this.request.stats.requestTimestamp={label:_i18n.i18n.translate("inspector.reqTimestampKey",{defaultMessage:"Request timestamp"}),value:startDate.toISOString(),description:_i18n.i18n.translate("inspector.reqTimestampDescription",{defaultMessage:"Time when the start of the request has been logged"})};this.onChange();return this}},{key:"finish",value:function finish(status,response){this.request.time=Date.now()-this.request.startTime;this.request.status=status;this.request.response=response;this.onChange()}},{key:"ok",value:function ok(response){this.finish(_types.RequestStatus.OK,response)}},{key:"error",value:function error(response){this.finish(_types.RequestStatus.ERROR,response)}}]);return RequestResponder}();exports.RequestResponder=RequestResponder},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestSelector=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _react2=__webpack_require__(30);var _propTypes=_interopRequireDefault(__webpack_require__(55));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(29);var _adapters=__webpack_require__(229);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestSelector=function(_Component){_inherits(RequestSelector,_Component);function RequestSelector(){var _getPrototypeOf2;var _this;_classCallCheck(this,RequestSelector);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RequestSelector)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"togglePopover",(function(){_this.setState((function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}}))}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({isPopoverOpen:false})}));_defineProperty(_assertThisInitialized(_this),"renderRequestDropdownItem",(function(request,index){var hasFailed=request.status===_adapters.RequestStatus.ERROR;var inProgress=request.status===_adapters.RequestStatus.PENDING;return _react.default.createElement(_eui.EuiContextMenuItem,{key:index,icon:request===_this.props.selectedRequest?"check":"empty",onClick:function onClick(){_this.props.onRequestChanged(request);_this.closePopover()},toolTipContent:request.description,toolTipPosition:"left","data-test-subj":"inspectorRequestChooser".concat(request.name)},_react.default.createElement(_eui.EuiTextColor,{color:hasFailed?"danger":"default"},request.name,hasFailed&&_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.failedLabel",defaultMessage:" (failed)"}),inProgress&&_react.default.createElement(_eui.EuiLoadingSpinner,{size:"s","aria-label":_i18n.i18n.translate("inspector.requests.requestInProgressAriaLabel",{defaultMessage:"Request in progress"}),className:"insRequestSelector__menuSpinner"})))}));return _this}_createClass(RequestSelector,[{key:"renderRequestDropdown",value:function renderRequestDropdown(){var button=_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"arrowDown",iconSide:"right",size:"s",onClick:this.togglePopover,"data-test-subj":"inspectorRequestChooser"},this.props.selectedRequest.name);return _react.default.createElement(_eui.EuiPopover,{id:"inspectorRequestChooser",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft",repositionOnScroll:true},_react.default.createElement(_eui.EuiContextMenuPanel,{items:this.props.requests.map(this.renderRequestDropdownItem),"data-test-subj":"inspectorRequestChooserMenuPanel"}))}},{key:"render",value:function render(){var _this$props=this.props,selectedRequest=_this$props.selectedRequest,requests=_this$props.requests;return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement("strong",null,_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestLabel",defaultMessage:"Request:"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:true},requests.length<=1&&_react.default.createElement("div",{className:"insRequestSelector__singleRequest","data-test-subj":"inspectorRequestName"},selectedRequest.name),requests.length>1&&this.renderRequestDropdown()),_react.default.createElement(_eui.EuiFlexItem,{grow:false},selectedRequest.status!==_adapters.RequestStatus.PENDING&&_react.default.createElement(_eui.EuiToolTip,{position:"left",title:selectedRequest.status===_adapters.RequestStatus.OK?_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestSucceededTooltipTitle",defaultMessage:"Request succeeded"}):_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestFailedTooltipTitle",defaultMessage:"Request failed"}),content:_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestTooltipDescription",defaultMessage:"The total time the request took."})},_react.default.createElement(_eui.EuiBadge,{color:selectedRequest.status===_adapters.RequestStatus.OK?"secondary":"danger",iconType:selectedRequest.status===_adapters.RequestStatus.OK?"check":"cross"},_react.default.createElement(_react2.FormattedMessage,{id:"inspector.requests.requestTimeLabel",defaultMessage:"{requestTime}ms",values:{requestTime:selectedRequest.time}}))),selectedRequest.status===_adapters.RequestStatus.PENDING&&_react.default.createElement(_eui.EuiLoadingSpinner,{size:"m","aria-label":_i18n.i18n.translate("inspector.requests.requestInProgressAriaLabel",{defaultMessage:"Request in progress"})})))}}]);return RequestSelector}(_react.Component);exports.RequestSelector=RequestSelector;_defineProperty(RequestSelector,"propTypes",{requests:_propTypes.default.array.isRequired,selectedRequest:_propTypes.default.object.isRequired,onRequestChanged:_propTypes.default.func})},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetails=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _propTypes=_interopRequireDefault(__webpack_require__(55));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(29);var _details=__webpack_require__(825);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DETAILS=[{name:"Statistics",label:_i18n.i18n.translate("inspector.requests.statisticsTabLabel",{defaultMessage:"Statistics"}),component:_details.RequestDetailsStats},{name:"Request",label:_i18n.i18n.translate("inspector.requests.requestTabLabel",{defaultMessage:"Request"}),component:_details.RequestDetailsRequest},{name:"Response",label:_i18n.i18n.translate("inspector.requests.responseTabLabel",{defaultMessage:"Response"}),component:_details.RequestDetailsResponse}];var RequestDetails=function(_Component){_inherits(RequestDetails,_Component);function RequestDetails(){var _getPrototypeOf2;var _this;_classCallCheck(this,RequestDetails);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RequestDetails)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{availableDetails:[],selectedDetail:null});_defineProperty(_assertThisInitialized(_this),"selectDetailsTab",(function(detail){if(detail!==_this.state.selectedDetail){_this.setState({selectedDetail:detail})}}));_defineProperty(_assertThisInitialized(_this),"renderDetailTab",(function(detail){return _react.default.createElement(_eui.EuiTab,{key:detail.name,isSelected:detail===_this.state.selectedDetail,onClick:function onClick(){return _this.selectDetailsTab(detail)},"data-test-subj":"inspectorRequestDetail".concat(detail.name)},detail.label)}));return _this}_createClass(RequestDetails,[{key:"render",value:function render(){var _this$state=this.state,selectedDetail=_this$state.selectedDetail,availableDetails=_this$state.availableDetails;var DetailComponent=RequestDetails.getSelectedDetailComponent(selectedDetail);if(!availableDetails.length||!DetailComponent){return null}return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTabs,{size:"s"},this.state.availableDetails.map(this.renderDetailTab)),_react.default.createElement(DetailComponent,{request:this.props.request}))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var selectedDetail=prevState&&prevState.selectedDetail;var availableDetails=DETAILS.filter((function(detail){return!detail.component.shouldShow||detail.component.shouldShow(nextProps.request)}));if(selectedDetail&&availableDetails.includes(selectedDetail)){return{availableDetails:availableDetails}}return{availableDetails:availableDetails,selectedDetail:availableDetails[0]}}},{key:"getSelectedDetailComponent",value:function getSelectedDetailComponent(detail){return detail?detail.component:null}}]);return RequestDetails}(_react.Component);exports.RequestDetails=RequestDetails;_defineProperty(RequestDetails,"propTypes",{request:_propTypes.default.object.isRequired})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RequestDetailsRequest",{enumerable:true,get:function get(){return _req_details_request.RequestDetailsRequest}});Object.defineProperty(exports,"RequestDetailsResponse",{enumerable:true,get:function get(){return _req_details_response.RequestDetailsResponse}});Object.defineProperty(exports,"RequestDetailsStats",{enumerable:true,get:function get(){return _req_details_stats.RequestDetailsStats}});var _req_details_request=__webpack_require__(826);var _req_details_response=__webpack_require__(827);var _req_details_stats=__webpack_require__(828)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsRequest=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _propTypes=_interopRequireDefault(__webpack_require__(55));var _eui=__webpack_require__(29);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestDetailsRequest=function(_Component){_inherits(RequestDetailsRequest,_Component);function RequestDetailsRequest(){_classCallCheck(this,RequestDetailsRequest);return _possibleConstructorReturn(this,_getPrototypeOf(RequestDetailsRequest).apply(this,arguments))}_createClass(RequestDetailsRequest,[{key:"render",value:function render(){var json=this.props.request.json;if(!json){return null}return _react.default.createElement(_eui.EuiCodeBlock,{language:"json",paddingSize:"s",isCopyable:true,"data-test-subj":"inspectorRequestBody"},JSON.stringify(json,null,2))}}]);return RequestDetailsRequest}(_react.Component);exports.RequestDetailsRequest=RequestDetailsRequest;_defineProperty(RequestDetailsRequest,"propTypes",{request:_propTypes.default.object.isRequired});_defineProperty(RequestDetailsRequest,"shouldShow",(function(request){return Boolean(request&&request.json)}))},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsResponse=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _propTypes=_interopRequireDefault(__webpack_require__(55));var _eui=__webpack_require__(29);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestDetailsResponse=function(_Component){_inherits(RequestDetailsResponse,_Component);function RequestDetailsResponse(){_classCallCheck(this,RequestDetailsResponse);return _possibleConstructorReturn(this,_getPrototypeOf(RequestDetailsResponse).apply(this,arguments))}_createClass(RequestDetailsResponse,[{key:"render",value:function render(){var responseJSON=RequestDetailsResponse.getResponseJson(this.props.request);if(!responseJSON){return null}return _react.default.createElement(_eui.EuiCodeBlock,{language:"json",paddingSize:"s",isCopyable:true,"data-test-subj":"inspectorResponseBody"},JSON.stringify(responseJSON,null,2))}}]);return RequestDetailsResponse}(_react.Component);exports.RequestDetailsResponse=RequestDetailsResponse;_defineProperty(RequestDetailsResponse,"propTypes",{request:_propTypes.default.object.isRequired});_defineProperty(RequestDetailsResponse,"shouldShow",(function(request){return Boolean(RequestDetailsResponse.getResponseJson(request))}));_defineProperty(RequestDetailsResponse,"getResponseJson",(function(request){return request.response?request.response.json:null}))},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.RequestDetailsStats=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _propTypes=_interopRequireDefault(__webpack_require__(55));var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RequestDetailsStats=function(_Component){_inherits(RequestDetailsStats,_Component);function RequestDetailsStats(){var _getPrototypeOf2;var _this;_classCallCheck(this,RequestDetailsStats);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RequestDetailsStats)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"renderStatRow",(function(stat){return[_react.default.createElement(_eui.EuiTableRow,{key:stat.id},_react.default.createElement(_eui.EuiTableRowCell,null,_react.default.createElement("span",{className:"insRequestDetailsStats__icon"},stat.description?_react.default.createElement(_eui.EuiIconTip,{"aria-label":_i18n.i18n.translate("inspector.requests.descriptionRowIconAriaLabel",{defaultMessage:"Description"}),type:"questionInCircle",color:"subdued",content:stat.description}):_react.default.createElement(_eui.EuiIcon,{type:"empty"})),stat.label),_react.default.createElement(_eui.EuiTableRowCell,null,stat.value))]}));return _this}_createClass(RequestDetailsStats,[{key:"render",value:function render(){var stats=this.props.request.stats;if(!stats){return null}var sortedStats=Object.keys(stats).sort().map((function(id){return _objectSpread({id:id},stats[id])}));return _react.default.createElement(_eui.EuiTable,{responsive:false},_react.default.createElement(_eui.EuiTableBody,null,sortedStats.map(this.renderStatRow)))}}]);return RequestDetailsStats}(_react.Component);exports.RequestDetailsStats=RequestDetailsStats;_defineProperty(RequestDetailsStats,"propTypes",{request:_propTypes.default.object.isRequired});_defineProperty(RequestDetailsStats,"shouldShow",(function(request){return Boolean(request.stats&&Object.keys(request.stats).length)}))},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilter=void 0;function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var getOtherBucketFilterTerms=function getOtherBucketFilterTerms(table,columnIndex,rowIndex){if(rowIndex===-1){return[]}var rows=table.rows.filter((function(row){return table.columns.every((function(column,i){return row[column.id]===table.rows[rowIndex][column.id]||i>=columnIndex}))}));var terms=rows.map((function(row){return row[table.columns[columnIndex].id]}));return _toConsumableArray(new Set(terms.filter((function(term){var notOther=term!=="__other__";var notMissing=term!=="__missing__";return notOther&&notMissing}))))};var createFilter=function createFilter(aggConfigs,table,columnIndex,rowIndex,cellValue){var column=table.columns[columnIndex];var aggConfig=aggConfigs[columnIndex];var filter=[];var value=rowIndex>-1?table.rows[rowIndex][column.id]:cellValue;if(value===null||value===undefined||!aggConfig.isFilterable()){return}if(aggConfig.type.name==="terms"&&aggConfig.params.otherBucket){var terms=getOtherBucketFilterTerms(table,columnIndex,rowIndex);filter=aggConfig.createFilter(value,{terms:terms})}else{filter=aggConfig.createFilter(value)}if(!filter){return}if(!Array.isArray(filter)){filter=[filter]}return filter};exports.createFilter=createFilter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRequestInspectorStats=getRequestInspectorStats;exports.getResponseInspectorStats=getResponseInspectorStats;var _i18n=__webpack_require__(1);function getRequestInspectorStats(searchSource){var stats={};var index=searchSource.getField("index");if(index){stats.indexPattern={label:_i18n.i18n.translate("data.search.searchSource.indexPatternLabel",{defaultMessage:"Index pattern"}),value:index.title,description:_i18n.i18n.translate("data.search.searchSource.indexPatternDescription",{defaultMessage:"The index pattern that connected to the Elasticsearch indices."})};stats.indexPatternId={label:_i18n.i18n.translate("data.search.searchSource.indexPatternIdLabel",{defaultMessage:"Index pattern ID"}),value:index.id,description:_i18n.i18n.translate("data.search.searchSource.indexPatternIdDescription",{defaultMessage:"The ID in the {kibanaIndexPattern} index.",values:{kibanaIndexPattern:".kibana"}})}}return stats}function getResponseInspectorStats(searchSource,resp){var lastRequest=searchSource.history&&searchSource.history[searchSource.history.length-1];var stats={};if(resp&&resp.took){stats.queryTime={label:_i18n.i18n.translate("data.search.searchSource.queryTimeLabel",{defaultMessage:"Query time"}),value:_i18n.i18n.translate("data.search.searchSource.queryTimeValue",{defaultMessage:"{queryTime}ms",values:{queryTime:resp.took}}),description:_i18n.i18n.translate("data.search.searchSource.queryTimeDescription",{defaultMessage:"The time it took to process the query. "+"Does not include the time to send the request or parse it in the browser."})}}if(resp&&resp.hits){stats.hitsTotal={label:_i18n.i18n.translate("data.search.searchSource.hitsTotalLabel",{defaultMessage:"Hits (total)"}),value:"".concat(resp.hits.total),description:_i18n.i18n.translate("data.search.searchSource.hitsTotalDescription",{defaultMessage:"The number of documents that match the query."})};stats.hits={label:_i18n.i18n.translate("data.search.searchSource.hitsLabel",{defaultMessage:"Hits"}),value:"".concat(resp.hits.hits.length),description:_i18n.i18n.translate("data.search.searchSource.hitsDescription",{defaultMessage:"The number of documents returned by the query."})}}if(lastRequest&&(lastRequest.ms===0||lastRequest.ms)){stats.requestTime={label:_i18n.i18n.translate("data.search.searchSource.requestTimeLabel",{defaultMessage:"Request time"}),value:_i18n.i18n.translate("data.search.searchSource.requestTimeValue",{defaultMessage:"{requestTime}ms",values:{requestTime:lastRequest.ms}}),description:_i18n.i18n.translate("data.search.searchSource.requestTimeDescription",{defaultMessage:"The time of the request from the browser to Elasticsearch and back. "+"Does not include the time the requested waited in the queue."})}}return stats}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.deserializeAggConfig=exports.serializeAggConfig=void 0;var _services=__webpack_require__(61);var serializeAggConfig=function serializeAggConfig(aggConfig){return{type:aggConfig.type.name,indexPatternId:aggConfig.getIndexPattern().id,aggConfigParams:aggConfig.toJSON().params}};exports.serializeAggConfig=serializeAggConfig;var deserializeAggConfig=function deserializeAggConfig(_ref){var type=_ref.type,aggConfigParams=_ref.aggConfigParams,indexPattern=_ref.indexPattern;var _getSearchService=(0,_services.getSearchService)(),aggs=_getSearchService.aggs;var aggConfigs=aggs.createAggConfigs(indexPattern);var aggConfig=aggConfigs.createAggConfig({enabled:true,type:type,params:aggConfigParams});return aggConfig};exports.deserializeAggConfig=deserializeAggConfig},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateMissingBucket=exports.mergeOtherBucketAggResponse=exports.buildOtherBucketAgg=void 0;var _lodash=__webpack_require__(49);var _common=__webpack_require__(52);var _agg_groups=__webpack_require__(225);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var getNestedAggDSL=function getNestedAggDSL(aggNestedDsl,startFromAggId){if(aggNestedDsl[startFromAggId]){return aggNestedDsl[startFromAggId]}var nestedAggs=(0,_lodash.values)(aggNestedDsl);var aggs;for(var i=0;i<nestedAggs.length;i++){if(nestedAggs[i].aggs&&(aggs=getNestedAggDSL(nestedAggs[i].aggs,startFromAggId))){return aggs}}};var getAggResultBuckets=function getAggResultBuckets(aggConfigs,response,aggWithOtherBucket,key){var keyParts=key.split("-");var responseAgg=response;var _loop=function _loop(i){if(keyParts[i]){var responseAggs=(0,_lodash.values)(responseAgg);var _loop2=function _loop2(aggId){var aggById=responseAggs[aggId];var aggKey=(0,_lodash.keys)(responseAgg)[aggId];var aggConfig=(0,_lodash.find)(aggConfigs.aggs,(function(agg){return agg.id===aggKey}));if(aggConfig){var aggResultBucket=(0,_lodash.find)(aggById.buckets,(function(bucket,bucketObjKey){var bucketKey=aggConfig.getKey(bucket,(0,_lodash.isNumber)(bucketObjKey)?undefined:bucketObjKey).toString();return bucketKey===keyParts[i]}));if(aggResultBucket){responseAgg=aggResultBucket;return"break"}}};for(var aggId=0;aggId<responseAggs.length;aggId++){var _ret=_loop2(aggId);if(_ret==="break")break}}};for(var i in keyParts){_loop(i)}if(responseAgg[aggWithOtherBucket.id]){return responseAgg[aggWithOtherBucket.id].buckets}return[]};var getAggConfigResultMissingBuckets=function getAggConfigResultMissingBuckets(responseAggs,aggId){var missingKey="__missing__";var resultBuckets=[];if(responseAggs[aggId]){var matchingBucket=responseAggs[aggId].buckets.find((function(bucket){return bucket.key===missingKey}));if(matchingBucket)resultBuckets.push(matchingBucket);return resultBuckets}(0,_lodash.each)(responseAggs,(function(agg){if(agg.buckets){(0,_lodash.each)(agg.buckets,(function(bucket){resultBuckets=[].concat(_toConsumableArray(resultBuckets),_toConsumableArray(getAggConfigResultMissingBuckets(bucket,aggId)))}))}}));return resultBuckets};var getOtherAggTerms=function getOtherAggTerms(requestAgg,key,otherAgg){return requestAgg["other-filter"].filters.filters[key].bool.must_not.filter((function(filter){return filter.match_phrase&&filter.match_phrase[otherAgg.params.field.name]})).map((function(filter){return filter.match_phrase[otherAgg.params.field.name]}))};var buildOtherBucketAgg=function buildOtherBucketAgg(aggConfigs,aggWithOtherBucket,response){var bucketAggs=aggConfigs.aggs.filter((function(agg){return agg.type.type===_agg_groups.AggGroupNames.Buckets}));var index=bucketAggs.findIndex((function(agg){return agg.id===aggWithOtherBucket.id}));var aggs=aggConfigs.toDsl();var indexPattern=aggWithOtherBucket.params.field.indexPattern;var filterAgg=aggConfigs.createAggConfig({type:"filters",id:"other",params:{filters:[]},enabled:false},{addToAggConfigs:false});var resultAgg={aggs:getNestedAggDSL(aggs,aggWithOtherBucket.id).aggs,filters:filterAgg.toDsl()};var noAggBucketResults=false;var walkBucketTree=function walkBucketTree(aggIndex,aggregations,aggId,filters,key){if(aggregations[aggId].buckets.length<1){noAggBucketResults=true;return}var agg=aggregations[aggId];var newAggIndex=aggIndex+1;var newAgg=bucketAggs[newAggIndex];var currentAgg=bucketAggs[aggIndex];if(aggIndex<index){(0,_lodash.each)(agg.buckets,(function(bucket,bucketObjKey){var bucketKey=currentAgg.getKey(bucket,(0,_lodash.isNumber)(bucketObjKey)?undefined:bucketObjKey);var filter=(0,_lodash.cloneDeep)(bucket.filters)||currentAgg.createFilter(bucketKey);var newFilters=(0,_lodash.flatten)([].concat(_toConsumableArray(filters),[filter]));walkBucketTree(newAggIndex,bucket,newAgg.id,newFilters,"".concat(key,"-").concat(bucketKey.toString()))}));return}if(!aggWithOtherBucket.params.missingBucket||agg.buckets.some((function(bucket){return bucket.key==="__missing__"}))){filters.push((0,_common.buildExistsFilter)(aggWithOtherBucket.params.field,aggWithOtherBucket.params.field.indexPattern))}(0,_lodash.each)(agg.buckets,(function(bucket){if(bucket.key==="__missing__")return;var filter=currentAgg.createFilter(bucket.key);filter.meta.negate=true;filters.push(filter)}));resultAgg.filters.filters[key]={bool:(0,_common.buildQueryFromFilters)(filters,indexPattern)}};walkBucketTree(0,response.aggregations,bucketAggs[0].id,[],"");if(noAggBucketResults){return false}return function(){return{"other-filter":resultAgg}}};exports.buildOtherBucketAgg=buildOtherBucketAgg;var mergeOtherBucketAggResponse=function mergeOtherBucketAggResponse(aggsConfig,response,otherResponse,otherAgg,requestAgg){var updatedResponse=(0,_lodash.cloneDeep)(response);(0,_lodash.each)(otherResponse.aggregations["other-filter"].buckets,(function(bucket,key){if(!bucket.doc_count||key===undefined)return;var bucketKey=key.replace(/^-/,"");var aggResultBuckets=getAggResultBuckets(aggsConfig,updatedResponse.aggregations,otherAgg,bucketKey);var requestFilterTerms=getOtherAggTerms(requestAgg,key,otherAgg);var phraseFilter=(0,_common.buildPhrasesFilter)(otherAgg.params.field,requestFilterTerms,otherAgg.params.field.indexPattern);phraseFilter.meta.negate=true;bucket.filters=[phraseFilter];bucket.key="__other__";if(aggResultBuckets.some((function(aggResultBucket){return aggResultBucket.key==="__missing__"}))){bucket.filters.push((0,_common.buildExistsFilter)(otherAgg.params.field,otherAgg.params.field.indexPattern))}aggResultBuckets.push(bucket)}));return updatedResponse};exports.mergeOtherBucketAggResponse=mergeOtherBucketAggResponse;var updateMissingBucket=function updateMissingBucket(response,aggConfigs,agg){var updatedResponse=(0,_lodash.cloneDeep)(response);var aggResultBuckets=getAggConfigResultMissingBuckets(updatedResponse.aggregations,agg.id);aggResultBuckets.forEach((function(bucket){bucket.key="__missing__"}));return updatedResponse};exports.updateMissingBucket=updateMissingBucket},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filterBucketAgg=void 0;var _i18n=__webpack_require__(1);var _bucket_agg_type=__webpack_require__(96);var _bucket_agg_types=__webpack_require__(90);var filterTitle=_i18n.i18n.translate("data.search.aggs.buckets.filterTitle",{defaultMessage:"Filter"});var filterBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.FILTER,title:filterTitle,params:[{name:"geo_bounding_box"}]});exports.filterBucketAgg=filterBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFiltersBucketAgg=getFiltersBucketAgg;var _lodash=_interopRequireDefault(__webpack_require__(49));var _i18n=__webpack_require__(1);var _filters=__webpack_require__(836);var _utils=__webpack_require__(366);var _bucket_agg_type=__webpack_require__(96);var _bucket_agg_types=__webpack_require__(90);var _public=__webpack_require__(34);var _common=__webpack_require__(52);var _query=__webpack_require__(125);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var filtersTitle=_i18n.i18n.translate("data.search.aggs.buckets.filtersTitle",{defaultMessage:"Filters",description:"The name of an aggregation, that allows to specify multiple individual filters to group data by."});function getFiltersBucketAgg(deps){var uiSettings=deps.uiSettings;return new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.FILTERS,title:filtersTitle,createFilter:_filters.createFilterFilters,customLabels:false,params:[{name:"filters",default:[{input:{query:"",language:uiSettings.get("search:queryLanguage")},label:""}],write:function write(aggConfig,output){var inFilters=aggConfig.params.filters;if(!_lodash.default.size(inFilters))return;inFilters.forEach((function(filter){var persistedLog=(0,_query.getQueryLog)(uiSettings,new _public.Storage(window.localStorage),"vis_default_editor",filter.input.language);persistedLog.add(filter.input.query)}));var outFilters=_lodash.default.transform(inFilters,(function(filters,filter){var input=_lodash.default.cloneDeep(filter.input);if(!input){console.log('malformed filter agg params, missing "input" query');return}var esQueryConfigs=(0,_common.getEsQueryConfig)(uiSettings);var query=(0,_common.buildEsQuery)(aggConfig.getIndexPattern(),[input],[],esQueryConfigs);if(!query){console.log('malformed filter agg params, missing "query" on input');return}var matchAllLabel=filter.input.query===""?"*":"";var label=filter.label||matchAllLabel||(typeof filter.input.query==="string"?filter.input.query:(0,_utils.toAngularJSON)(filter.input.query));filters[label]={query:query}}),{});if(!_lodash.default.size(outFilters))return;var params=output.params||(output.params={});params.filters=outFilters}}]})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterFilters=void 0;var _lodash=__webpack_require__(49);var _common=__webpack_require__(52);var createFilterFilters=function createFilterFilters(aggConfig,key){var dslFilters=(0,_lodash.get)(aggConfig.toDsl(),"filters.filters");var filter=dslFilters[key];var indexPattern=aggConfig.getIndexPattern();if(filter&&indexPattern&&indexPattern.id){return(0,_common.buildQueryFilter)(filter.query,indexPattern.id,key)}};exports.createFilterFilters=createFilterFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getCalculateAutoTimeExpression=getCalculateAutoTimeExpression;var _time_buckets=__webpack_require__(342);var _common=__webpack_require__(52);function getCalculateAutoTimeExpression(uiSettings){return function calculateAutoTimeExpression(range){var dates=(0,_common.toAbsoluteDates)(range);if(!dates){return}var buckets=new _time_buckets.TimeBuckets({uiSettings:uiSettings});buckets.setInterval("auto");buckets.setBounds({min:dates.from,max:dates.to});return buckets.getInterval().expression}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toAngularJSON=toAngularJSON;function toAngularJSON(obj,pretty){if(obj===undefined)return"";if(typeof pretty==="number"){pretty=pretty?2:null}return JSON.stringify(obj,toJsonReplacer,pretty)}function isWindow(obj){return obj&&obj.window===obj}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function toJsonReplacer(key,value){var val=value;if(typeof key==="string"&&key.charAt(0)==="$"&&key.charAt(1)==="$"){val=undefined}else if(isWindow(value)){val="$WINDOW"}else if(value&&window.document===value){val="$DOCUMENT"}else if(isScope(value)){val="$SCOPE"}return val}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.significantTermsBucketAgg=void 0;var _i18n=__webpack_require__(1);var _bucket_agg_type=__webpack_require__(96);var _terms=__webpack_require__(348);var _migrate_include_exclude_format=__webpack_require__(227);var _bucket_agg_types=__webpack_require__(90);var _common=__webpack_require__(52);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var significantTermsTitle=_i18n.i18n.translate("data.search.aggs.buckets.significantTermsTitle",{defaultMessage:"Significant Terms"});var significantTermsBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.SIGNIFICANT_TERMS,title:significantTermsTitle,makeLabel:function makeLabel(aggConfig){return _i18n.i18n.translate("data.search.aggs.buckets.significantTermsLabel",{defaultMessage:"Top {size} unusual terms in {fieldName}",values:{size:aggConfig.params.size,fieldName:aggConfig.getFieldDisplayName()}})},createFilter:_terms.createFilterTerms,params:[{name:"field",type:"field",scriptable:false,filterFieldTypes:_common.KBN_FIELD_TYPES.STRING},{name:"size",default:""},_objectSpread({name:"exclude",displayName:_i18n.i18n.translate("data.search.aggs.buckets.significantTerms.excludeLabel",{defaultMessage:"Exclude"}),type:"string",advanced:true,shouldShow:_migrate_include_exclude_format.isStringType},_migrate_include_exclude_format.migrateIncludeExcludeFormat),_objectSpread({name:"include",displayName:_i18n.i18n.translate("data.search.aggs.buckets.significantTerms.includeLabel",{defaultMessage:"Include"}),type:"string",advanced:true,shouldShow:_migrate_include_exclude_format.isStringType},_migrate_include_exclude_format.migrateIncludeExcludeFormat)]});exports.significantTermsBucketAgg=significantTermsBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoHashBucketAgg=void 0;var _i18n=__webpack_require__(1);var _bucket_agg_type=__webpack_require__(96);var _common=__webpack_require__(52);var _bucket_agg_types=__webpack_require__(90);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var defaultBoundingBox={top_left:{lat:1,lon:1},bottom_right:{lat:0,lon:0}};var defaultPrecision=2;var geohashGridTitle=_i18n.i18n.translate("data.search.aggs.buckets.geohashGridTitle",{defaultMessage:"Geohash"});var geoHashBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.GEOHASH_GRID,title:geohashGridTitle,params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.GEO_POINT},{name:"autoPrecision",default:true,write:function write(){}},{name:"precision",default:defaultPrecision,write:function write(aggConfig,output){output.params.precision=aggConfig.params.precision}},{name:"useGeocentroid",default:true,write:function write(){}},{name:"isFilteredByCollar",default:true,write:function write(){}},{name:"boundingBox",default:null,write:function write(){}}],getRequestAggs:function getRequestAggs(agg){var aggs=[];var params=agg.params;if(params.isFilteredByCollar&&agg.getField()){aggs.push(agg.aggConfigs.createAggConfig({type:"filter",id:"filter_agg",enabled:true,params:{geo_bounding_box:_defineProperty({ignore_unmapped:true},agg.getField().name,params.boundingBox||defaultBoundingBox)}},{addToAggConfigs:false}))}aggs.push(agg);if(params.useGeocentroid){aggs.push(agg.aggConfigs.createAggConfig({type:"geo_centroid",enabled:true,params:{field:agg.getField()}},{addToAggConfigs:false}))}return aggs}});exports.geoHashBucketAgg=geoHashBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.geoTileBucketAgg=void 0;var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(49);var _bucket_agg_type=__webpack_require__(96);var _bucket_agg_types=__webpack_require__(90);var _common=__webpack_require__(52);var _metric_agg_types=__webpack_require__(62);var geotileGridTitle=_i18n.i18n.translate("data.search.aggs.buckets.geotileGridTitle",{defaultMessage:"Geotile"});var geoTileBucketAgg=new _bucket_agg_type.BucketAggType({name:_bucket_agg_types.BUCKET_TYPES.GEOTILE_GRID,title:geotileGridTitle,params:[{name:"field",type:"field",filterFieldTypes:_common.KBN_FIELD_TYPES.GEO_POINT},{name:"useGeocentroid",default:true,write:_lodash.noop},{name:"precision",default:0}],getRequestAggs:function getRequestAggs(agg){var aggs=[];var useGeocentroid=agg.getParam("useGeocentroid");aggs.push(agg);if(useGeocentroid){var aggConfig={type:_metric_agg_types.METRIC_TYPES.GEO_CENTROID,enabled:true,params:{field:agg.getField()}};aggs.push(agg.aggConfigs.createAggConfig(aggConfig,{addToAggConfigs:false}))}return aggs}});exports.geoTileBucketAgg=geoTileBucketAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketSumMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _make_nested_label=__webpack_require__(115);var _sibling_pipeline_agg_helper=__webpack_require__(148);var _metric_agg_types=__webpack_require__(62);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var overallSumLabel=_i18n.i18n.translate("data.search.aggs.metrics.overallSumLabel",{defaultMessage:"overall sum"});var sumBucketTitle=_i18n.i18n.translate("data.search.aggs.metrics.sumBucketTitle",{defaultMessage:"Sum Bucket"});var bucketSumMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.SUM_BUCKET,title:sumBucketTitle,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,overallSumLabel)},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params()),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat});exports.bucketSumMetricAgg=bucketSumMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.siblingPipelineAggWriter=void 0;var _metric_agg_types=__webpack_require__(62);var siblingPipelineAggWriter=function siblingPipelineAggWriter(agg,output){var customMetric=agg.getParam("customMetric");if(!customMetric)return;var metricAgg=customMetric;var bucketAgg=agg.getParam("customBucket");if(metricAgg.type.name!==_metric_agg_types.METRIC_TYPES.COUNT){bucketAgg.subAggs=(output.subAggs||[]).concat(metricAgg);output.params.buckets_path="".concat(bucketAgg.id,">").concat(metricAgg.id)}else{output.params.buckets_path=bucketAgg.id+">_count"}output.parentAggs=(output.parentAggs||[]).concat(bucketAgg)};exports.siblingPipelineAggWriter=siblingPipelineAggWriter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketAvgMetricAgg=void 0;var _i18n=__webpack_require__(1);var _lodash=__webpack_require__(49);var _metric_agg_type=__webpack_require__(64);var _make_nested_label=__webpack_require__(115);var _sibling_pipeline_agg_helper=__webpack_require__(148);var _metric_agg_types=__webpack_require__(62);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var overallAverageLabel=_i18n.i18n.translate("data.search.aggs.metrics.overallAverageLabel",{defaultMessage:"overall average"});var averageBucketTitle=_i18n.i18n.translate("data.search.aggs.metrics.averageBucketTitle",{defaultMessage:"Average Bucket"});var bucketAvgMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.AVG_BUCKET,title:averageBucketTitle,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,overallAverageLabel)},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params()),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat,getValue:function getValue(agg,bucket){var customMetric=agg.getParam("customMetric");var customBucket=agg.getParam("customBucket");var scaleMetrics=customMetric.type&&customMetric.type.isScalable();var value=bucket[agg.id]&&bucket[agg.id].value;if(scaleMetrics&&customBucket.type.name==="date_histogram"){var aggInfo=customBucket.write();value*=(0,_lodash.get)(aggInfo,"bucketInterval.scale",1)}return value}});exports.bucketAvgMetricAgg=bucketAvgMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketMinMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _make_nested_label=__webpack_require__(115);var _sibling_pipeline_agg_helper=__webpack_require__(148);var _metric_agg_types=__webpack_require__(62);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var overallMinLabel=_i18n.i18n.translate("data.search.aggs.metrics.overallMinLabel",{defaultMessage:"overall min"});var minBucketTitle=_i18n.i18n.translate("data.search.aggs.metrics.minBucketTitle",{defaultMessage:"Min Bucket"});var bucketMinMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.MIN_BUCKET,title:minBucketTitle,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,overallMinLabel)},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params()),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat});exports.bucketMinMetricAgg=bucketMinMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bucketMaxMetricAgg=void 0;var _i18n=__webpack_require__(1);var _metric_agg_type=__webpack_require__(64);var _make_nested_label=__webpack_require__(115);var _sibling_pipeline_agg_helper=__webpack_require__(148);var _metric_agg_types=__webpack_require__(62);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var overallMaxLabel=_i18n.i18n.translate("data.search.aggs.metrics.overallMaxLabel",{defaultMessage:"overall max"});var maxBucketTitle=_i18n.i18n.translate("data.search.aggs.metrics.maxBucketTitle",{defaultMessage:"Max Bucket"});var bucketMaxMetricAgg=new _metric_agg_type.MetricAggType({name:_metric_agg_types.METRIC_TYPES.MAX_BUCKET,title:maxBucketTitle,makeLabel:function makeLabel(agg){return(0,_make_nested_label.makeNestedLabel)(agg,overallMaxLabel)},subtype:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.subtype,params:_toConsumableArray(_sibling_pipeline_agg_helper.siblingPipelineAggHelper.params()),getFormat:_sibling_pipeline_agg_helper.siblingPipelineAggHelper.getFormat});exports.bucketMaxMetricAgg=bucketMaxMetricAgg},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggTypesRegistry=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggTypesRegistry=function AggTypesRegistry(){var _this=this;_classCallCheck(this,AggTypesRegistry);_defineProperty(this,"bucketAggs",new Map);_defineProperty(this,"metricAggs",new Map);_defineProperty(this,"setup",(function(){return{registerBucket:function registerBucket(type){var name=type.name;if(_this.bucketAggs.get(name)){throw new Error("Bucket agg has already been registered with name: ".concat(name))}_this.bucketAggs.set(name,type)},registerMetric:function registerMetric(type){var name=type.name;if(_this.metricAggs.get(name)){throw new Error("Metric agg has already been registered with name: ".concat(name))}_this.metricAggs.set(name,type)}}}));_defineProperty(this,"start",(function(){return{get:function get(name){return _this.bucketAggs.get(name)||_this.metricAggs.get(name)},getBuckets:function getBuckets(){return Array.from(_this.bucketAggs.values())},getMetrics:function getMetrics(){return Array.from(_this.metricAggs.values())},getAll:function getAll(){return{buckets:Array.from(_this.bucketAggs.values()),metrics:Array.from(_this.metricAggs.values())}}}}))};exports.AggTypesRegistry=AggTypesRegistry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _interval_options=__webpack_require__(343);Object.keys(_interval_options).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _interval_options[key]}})}));var _bucket_agg_types=__webpack_require__(90);Object.keys(_bucket_agg_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _bucket_agg_types[key]}})}));var _date_histogram=__webpack_require__(341);Object.keys(_date_histogram).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _date_histogram[key]}})}));var _date_range=__webpack_require__(344);Object.keys(_date_range).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _date_range[key]}})}));var _ip_range=__webpack_require__(345);Object.keys(_ip_range).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _ip_range[key]}})}));var _cidr_mask=__webpack_require__(346);Object.keys(_cidr_mask).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _cidr_mask[key]}})}));var _date_range2=__webpack_require__(171);Object.keys(_date_range2).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _date_range2[key]}})}));var _ip_range2=__webpack_require__(172);Object.keys(_ip_range2).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _ip_range2[key]}})}));var _migrate_include_exclude_format=__webpack_require__(227);Object.keys(_migrate_include_exclude_format).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _migrate_include_exclude_format[key]}})}));var _terms=__webpack_require__(347);Object.keys(_terms).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _terms[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _metric_agg_type=__webpack_require__(64);Object.keys(_metric_agg_type).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _metric_agg_type[key]}})}));var _metric_agg_types=__webpack_require__(62);Object.keys(_metric_agg_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _metric_agg_types[key]}})}));var _parent_pipeline_agg_helper=__webpack_require__(147);Object.keys(_parent_pipeline_agg_helper).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _parent_pipeline_agg_helper[key]}})}));var _sibling_pipeline_agg_helper=__webpack_require__(148);Object.keys(_sibling_pipeline_agg_helper).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _sibling_pipeline_agg_helper[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"aggTypeFieldFilters",{enumerable:true,get:function get(){return _field_filters.aggTypeFieldFilters}});Object.defineProperty(exports,"AggTypeFieldFilters",{enumerable:true,get:function get(){return _field_filters.AggTypeFieldFilters}});var _field_filters=__webpack_require__(851)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AggTypeFieldFilters=exports.aggTypeFieldFilters=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AggTypeFieldFilters=function(){function AggTypeFieldFilters(){_classCallCheck(this,AggTypeFieldFilters);_defineProperty(this,"filters",new Set)}_createClass(AggTypeFieldFilters,[{key:"addFilter",value:function addFilter(filter){this.filters.add(filter)}},{key:"filter",value:function filter(fields,aggConfig){var allFilters=Array.from(this.filters);var allowedAggTypeFields=fields.filter((function(field){var isAggTypeFieldAllowed=allFilters.every((function(filter){return filter(field,aggConfig)}));return isAggTypeFieldAllowed}));return allowedAggTypeFields}}]);return AggTypeFieldFilters}();exports.AggTypeFieldFilters=AggTypeFieldFilters;var aggTypeFieldFilters=new AggTypeFieldFilters;exports.aggTypeFieldFilters=aggTypeFieldFilters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IAggConfig",{enumerable:true,get:function get(){return _agg_config.IAggConfig}});Object.defineProperty(exports,"CreateAggConfigParams",{enumerable:true,get:function get(){return _agg_configs.CreateAggConfigParams}});Object.defineProperty(exports,"IAggConfigs",{enumerable:true,get:function get(){return _agg_configs.IAggConfigs}});Object.defineProperty(exports,"IAggType",{enumerable:true,get:function get(){return _agg_type.IAggType}});Object.defineProperty(exports,"AggParam",{enumerable:true,get:function get(){return _agg_params.AggParam}});Object.defineProperty(exports,"AggParamOption",{enumerable:true,get:function get(){return _agg_params.AggParamOption}});Object.defineProperty(exports,"IFieldParamType",{enumerable:true,get:function get(){return _param_types.IFieldParamType}});Object.defineProperty(exports,"IMetricAggType",{enumerable:true,get:function get(){return _metric_agg_type.IMetricAggType}});Object.defineProperty(exports,"DateRangeKey",{enumerable:true,get:function get(){return _date_range.DateRangeKey}});Object.defineProperty(exports,"IpRangeKey",{enumerable:true,get:function get(){return _ip_range.IpRangeKey}});Object.defineProperty(exports,"OptionedValueProp",{enumerable:true,get:function get(){return _optioned.OptionedValueProp}});Object.defineProperty(exports,"OptionedParamEditorProps",{enumerable:true,get:function get(){return _optioned.OptionedParamEditorProps}});var _=__webpack_require__(174);var _agg_config=__webpack_require__(175);var _agg_configs=__webpack_require__(338);var _agg_type=__webpack_require__(177);var _agg_params=__webpack_require__(176);var _param_types=__webpack_require__(367);var _metric_agg_type=__webpack_require__(64);var _date_range=__webpack_require__(171);var _ip_range=__webpack_require__(172);var _optioned=__webpack_require__(224)},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";var _sync_search_strategy=__webpack_require__(183);var _es_search=__webpack_require__(306)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"esSearchStrategyProvider",{enumerable:true,get:function get(){return _es_search_strategy.esSearchStrategyProvider}});Object.defineProperty(exports,"getEsPreference",{enumerable:true,get:function get(){return _get_es_preference.getEsPreference}});var _es_search_strategy=__webpack_require__(368);var _get_es_preference=__webpack_require__(369)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEsClient=getEsClient;var _elasticsearch=_interopRequireDefault(__webpack_require__(46));var _rxjs=__webpack_require__(33);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getEsClient(injectedMetadata,http,packageInfo){var esRequestTimeout=injectedMetadata.getInjectedVar("esRequestTimeout");var esApiVersion=injectedMetadata.getInjectedVar("esApiVersion");var client=_elasticsearch.default.Client({host:getEsUrl(http,packageInfo),log:"info",requestTimeout:esRequestTimeout,apiVersion:esApiVersion});var loadingCount$=new _rxjs.BehaviorSubject(0);http.addLoadingCountSource(loadingCount$);return{search:wrapEsClientMethod(client,"search",loadingCount$),msearch:wrapEsClientMethod(client,"msearch",loadingCount$),create:wrapEsClientMethod(client,"create",loadingCount$)}}function wrapEsClientMethod(esClient,method,loadingCount$){return function(args){var customPromiseThingy=esClient[method](args);var abort=customPromiseThingy.abort;var resolved=false;loadingCount$.next(loadingCount$.getValue()+1);customPromiseThingy.abort=function(){abort();if(!resolved){resolved=true;loadingCount$.next(loadingCount$.getValue()-1)}};customPromiseThingy.finally((function(){resolved=true;loadingCount$.next(loadingCount$.getValue()-1)}));return customPromiseThingy}}function getEsUrl(http,packageInfo){var a=document.createElement("a");a.href=http.basePath.prepend("/elasticsearch");var protocolPort=/https/.test(a.protocol)?443:80;var port=a.port||protocolPort;return{host:a.hostname,port:port,protocol:a.protocol,pathname:a.pathname,headers:{"kbn-version":packageInfo.version}}}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLongQueryNotification=getLongQueryNotification;exports.LongQueryNotification=LongQueryNotification;var _eui=__webpack_require__(29);var _react=__webpack_require__(30);var _react2=_interopRequireDefault(__webpack_require__(28));var _public=__webpack_require__(31);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function getLongQueryNotification(props){return(0,_public.toMountPoint)(_react2.default.createElement(LongQueryNotification,{application:props.application}))}function LongQueryNotification(props){return _react2.default.createElement("div",null,_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.longQueryMessage",defaultMessage:"With an upgraded license, you can ensure requests have enough time to complete."}),_react2.default.createElement(_eui.EuiSpacer,{size:"s"}),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButton,{size:"s",onClick:_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return props.application.navigateToApp("kibana#/management/elasticsearch/license_management");case 2:case"end":return _context.stop()}}}),_callee)})))},_react2.default.createElement(_react.FormattedMessage,{id:"data.query.queryBar.licenseOptions",defaultMessage:"Go to license options"})))))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataPublicPlugin=void 0;var _public=__webpack_require__(34);var _autocomplete=__webpack_require__(223);var _search_service=__webpack_require__(860);var _field_formats=__webpack_require__(322);var _query=__webpack_require__(125);var _index_pattern_select=__webpack_require__(352);var _index_patterns=__webpack_require__(222);var _services=__webpack_require__(61);var _create_search_bar=__webpack_require__(355);var _expressions=__webpack_require__(178);var _public2=__webpack_require__(136);var _actions=__webpack_require__(874);var _select_range_action=__webpack_require__(379);var _value_click_action=__webpack_require__(380);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DataPublicPlugin=function(){function DataPublicPlugin(initializerContext){_classCallCheck(this,DataPublicPlugin);_defineProperty(this,"autocomplete",new _autocomplete.AutocompleteService);_defineProperty(this,"searchService",void 0);_defineProperty(this,"fieldFormatsService",void 0);_defineProperty(this,"queryService",void 0);_defineProperty(this,"storage",void 0);_defineProperty(this,"packageInfo",void 0);this.searchService=new _search_service.SearchService;this.queryService=new _query.QueryService;this.fieldFormatsService=new _field_formats.FieldFormatsService;this.storage=new _public.Storage(window.localStorage);this.packageInfo=initializerContext.env.packageInfo}_createClass(DataPublicPlugin,[{key:"setup",value:function setup(core,_ref){var expressions=_ref.expressions,uiActions=_ref.uiActions;(0,_services.setInjectedMetadata)(core.injectedMetadata);expressions.registerFunction(_expressions.esaggs);var queryService=this.queryService.setup({uiSettings:core.uiSettings,storage:this.storage});uiActions.registerAction((0,_actions.createFilterAction)(queryService.filterManager,queryService.timefilter.timefilter));uiActions.attachAction(_public2.SELECT_RANGE_TRIGGER,(0,_select_range_action.selectRangeAction)(queryService.filterManager,queryService.timefilter.timefilter));uiActions.attachAction(_public2.VALUE_CLICK_TRIGGER,(0,_value_click_action.valueClickAction)(queryService.filterManager,queryService.timefilter.timefilter));return{autocomplete:this.autocomplete.setup(core),search:this.searchService.setup(core,this.packageInfo),fieldFormats:this.fieldFormatsService.setup(core),query:queryService}}},{key:"start",value:function start(core,_ref2){var uiActions=_ref2.uiActions;var uiSettings=core.uiSettings,http=core.http,notifications=core.notifications,savedObjects=core.savedObjects,overlays=core.overlays;(0,_services.setHttp)(http);(0,_services.setNotifications)(notifications);(0,_services.setOverlays)(overlays);(0,_services.setUiSettings)(uiSettings);var fieldFormats=this.fieldFormatsService.start();(0,_services.setFieldFormats)(fieldFormats);var indexPatterns=new _index_patterns.IndexPatternsService(uiSettings,savedObjects.client,http);(0,_services.setIndexPatterns)(indexPatterns);var query=this.queryService.start(savedObjects);(0,_services.setQueryService)(query);var search=this.searchService.start(core);(0,_services.setSearchService)(search);uiActions.attachAction(_public2.APPLY_FILTER_TRIGGER,uiActions.getAction(_actions.ACTION_GLOBAL_APPLY_FILTER));var dataServices={actions:{createFiltersFromEvent:_actions.createFiltersFromEvent},autocomplete:this.autocomplete.start(),fieldFormats:fieldFormats,indexPatterns:indexPatterns,query:query,search:search};var SearchBar=(0,_create_search_bar.createSearchBar)({core:core,data:dataServices,storage:this.storage});return _objectSpread({},dataServices,{ui:{IndexPatternSelect:(0,_index_pattern_select.createIndexPatternSelect)(core.savedObjects.client),SearchBar:SearchBar}})}},{key:"stop",value:function stop(){this.autocomplete.clearProviders()}}]);return DataPublicPlugin}();exports.DataPublicPlugin=DataPublicPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SearchService=void 0;var _sync_search_strategy=__webpack_require__(183);var _es_client=__webpack_require__(370);var _search=__webpack_require__(169);var _es_search_strategy=__webpack_require__(368);var _search_interceptor=__webpack_require__(371);var _aggs=__webpack_require__(174);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchService=function(){function SearchService(){var _this=this;_classCallCheck(this,SearchService);_defineProperty(this,"searchStrategies",{});_defineProperty(this,"esClient",void 0);_defineProperty(this,"aggTypesRegistry",new _aggs.AggTypesRegistry);_defineProperty(this,"searchInterceptor",void 0);_defineProperty(this,"registerSearchStrategyProvider",(function(name,strategyProvider){_this.searchStrategies[name]=strategyProvider}));_defineProperty(this,"getSearchStrategy",(function(name){var strategyProvider=_this.searchStrategies[name];if(!strategyProvider)throw new Error("Search strategy ".concat(name," not found"));return strategyProvider}))}_createClass(SearchService,[{key:"setup",value:function setup(core,packageInfo){this.esClient=(0,_es_client.getEsClient)(core.injectedMetadata,core.http,packageInfo);this.registerSearchStrategyProvider(_sync_search_strategy.SYNC_SEARCH_STRATEGY,_sync_search_strategy.syncSearchStrategyProvider);this.registerSearchStrategyProvider(_search.ES_SEARCH_STRATEGY,_es_search_strategy.esSearchStrategyProvider);var aggTypesSetup=this.aggTypesRegistry.setup();var aggTypes=(0,_aggs.getAggTypes)({uiSettings:core.uiSettings});aggTypes.buckets.forEach((function(b){return aggTypesSetup.registerBucket(b)}));aggTypes.metrics.forEach((function(m){return aggTypesSetup.registerMetric(m)}));return{aggs:{calculateAutoTimeExpression:(0,_aggs.getCalculateAutoTimeExpression)(core.uiSettings),types:aggTypesSetup},registerSearchStrategyProvider:this.registerSearchStrategyProvider}}},{key:"start",value:function start(core){var _this2=this;this.searchInterceptor=new _search_interceptor.SearchInterceptor(core.notifications.toasts,core.application,core.injectedMetadata.getInjectedVar("esRequestTimeout"));var aggTypesStart=this.aggTypesRegistry.start();return{aggs:{calculateAutoTimeExpression:(0,_aggs.getCalculateAutoTimeExpression)(core.uiSettings),createAggConfigs:function createAggConfigs(indexPattern){var configStates=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var schemas=arguments.length>2?arguments[2]:undefined;return new _aggs.AggConfigs(indexPattern,configStates,{typesRegistry:aggTypesStart})},types:aggTypesStart},search:function search(request,options,strategyName){var strategyProvider=_this2.getSearchStrategy(strategyName||_search.DEFAULT_SEARCH_STRATEGY);var _strategyProvider=strategyProvider({core:core,getSearchStrategy:_this2.getSearchStrategy}),search=_strategyProvider.search;return _this2.searchInterceptor.search(search,request,options)},setInterceptor:function setInterceptor(searchInterceptor){_this2.searchInterceptor=searchInterceptor},__LEGACY:{esClient:this.esClient,AggConfig:_aggs.AggConfig,AggType:_aggs.AggType,aggTypeFieldFilters:_aggs.aggTypeFieldFilters,FieldParamType:_aggs.FieldParamType,MetricAggType:_aggs.MetricAggType,parentPipelineAggHelper:_aggs.parentPipelineAggHelper,siblingPipelineAggHelper:_aggs.siblingPipelineAggHelper}}}},{key:"stop",value:function stop(){}}]);return SearchService}();exports.SearchService=SearchService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UiActionsPlugin=void 0;var _service=__webpack_require__(373);var _triggers=__webpack_require__(232);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var UiActionsPlugin=function(){function UiActionsPlugin(initializerContext){_classCallCheck(this,UiActionsPlugin);_defineProperty(this,"service",new _service.UiActionsService)}_createClass(UiActionsPlugin,[{key:"setup",value:function setup(core){this.service.registerTrigger(_triggers.selectRangeTrigger);this.service.registerTrigger(_triggers.valueClickTrigger);this.service.registerTrigger(_triggers.applyFilterTrigger);return this.service}},{key:"start",value:function start(core){return this.service}},{key:"stop",value:function stop(){this.service.clear()}}]);return UiActionsPlugin}();exports.UiActionsPlugin=UiActionsPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UiActionsService=void 0;var _trigger_internal=__webpack_require__(374);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var UiActionsService=function UiActionsService(){var _this=this;var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$triggers=_ref.triggers,_triggers=_ref$triggers===void 0?new Map:_ref$triggers,_ref$actions=_ref.actions,_actions=_ref$actions===void 0?new Map:_ref$actions,_ref$triggerToActions=_ref.triggerToActions,_triggerToActions=_ref$triggerToActions===void 0?new Map:_ref$triggerToActions;_classCallCheck(this,UiActionsService);_defineProperty(this,"triggers",void 0);_defineProperty(this,"actions",void 0);_defineProperty(this,"triggerToActions",void 0);_defineProperty(this,"registerTrigger",(function(trigger){if(_this.triggers.has(trigger.id)){throw new Error("Trigger [trigger.id = ".concat(trigger.id,"] already registered."))}var triggerInternal=new _trigger_internal.TriggerInternal(_this,trigger);_this.triggers.set(trigger.id,triggerInternal);_this.triggerToActions.set(trigger.id,[])}));_defineProperty(this,"getTrigger",(function(triggerId){var trigger=_this.triggers.get(triggerId);if(!trigger){throw new Error("Trigger [triggerId = ".concat(triggerId,"] does not exist."))}return trigger.contract}));_defineProperty(this,"registerAction",(function(action){if(_this.actions.has(action.id)){throw new Error("Action [action.id = ".concat(action.id,"] already registered."))}_this.actions.set(action.id,action)}));_defineProperty(this,"getAction",(function(id){if(!_this.actions.has(id)){throw new Error("Action [action.id = ".concat(id,"] not registered."))}return _this.actions.get(id)}));_defineProperty(this,"attachAction",(function(triggerId,action){if(!_this.actions.has(action.id)){_this.registerAction(action)}else{var registeredAction=_this.actions.get(action.id);if(registeredAction!==action){throw new Error("A different action instance with this id is already registered.")}}var trigger=_this.triggers.get(triggerId);if(!trigger){throw new Error("No trigger [triggerId = ".concat(triggerId,"] exists, for attaching action [actionId = ").concat(action.id,"]."))}var actionIds=_this.triggerToActions.get(triggerId);if(!actionIds.find((function(id){return id===action.id}))){_this.triggerToActions.set(triggerId,[].concat(_toConsumableArray(actionIds),[action.id]))}}));_defineProperty(this,"detachAction",(function(triggerId,actionId){var trigger=_this.triggers.get(triggerId);if(!trigger){throw new Error("No trigger [triggerId = ".concat(triggerId,"] exists, for detaching action [actionId = ").concat(actionId,"]."))}var actionIds=_this.triggerToActions.get(triggerId);_this.triggerToActions.set(triggerId,actionIds.filter((function(id){return id!==actionId})))}));_defineProperty(this,"getTriggerActions",(function(triggerId){_this.getTrigger(triggerId);var actionIds=_this.triggerToActions.get(triggerId);var actions=actionIds.map((function(actionId){return _this.actions.get(actionId)})).filter(Boolean);return actions}));_defineProperty(this,"getTriggerCompatibleActions",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(triggerId,context){var actions,isCompatibles;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:actions=_this.getTriggerActions(triggerId);_context.next=3;return Promise.all(actions.map((function(action){return action.isCompatible(context)})));case 3:isCompatibles=_context.sent;return _context.abrupt("return",actions.reduce((function(acc,action,i){return isCompatibles[i]?[].concat(_toConsumableArray(acc),[action]):acc}),[]));case 5:case"end":return _context.stop()}}}),_callee)})));return function(_x,_x2){return _ref2.apply(this,arguments)}}());_defineProperty(this,"executeTriggerActions",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(triggerId,context){var trigger;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:trigger=_this.getTrigger(triggerId);_context2.next=3;return trigger.exec(context);case 3:case"end":return _context2.stop()}}}),_callee2)})));return function(_x3,_x4){return _ref3.apply(this,arguments)}}());_defineProperty(this,"clear",(function(){_this.actions.clear();_this.triggers.clear();_this.triggerToActions.clear()}));_defineProperty(this,"fork",(function(){var triggers=new Map;var actions=new Map;var triggerToActions=new Map;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=_this.triggers.entries()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step$value=_slicedToArray(_step.value,2),key=_step$value[0],value=_step$value[1];triggers.set(key,value)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=_this.actions.entries()[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _step2$value=_slicedToArray(_step2.value,2),_key=_step2$value[0],_value=_step2$value[1];actions.set(_key,_value)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return!=null){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=_this.triggerToActions.entries()[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _step3$value=_slicedToArray(_step3.value,2),_key2=_step3$value[0],_value2=_step3$value[1];triggerToActions.set(_key2,_toConsumableArray(_value2))}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return!=null){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}return new UiActionsService({triggers:triggers,actions:actions,triggerToActions:triggerToActions})}));this.triggers=_triggers;this.actions=_actions;this.triggerToActions=_triggerToActions};exports.UiActionsService=UiActionsService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildContextMenuForActions=buildContextMenuForActions;var React=_interopRequireWildcard(__webpack_require__(28));var _lodash=_interopRequireDefault(__webpack_require__(49));var _i18n=__webpack_require__(1);var _public=__webpack_require__(31);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function buildContextMenuForActions(_x){return _buildContextMenuForActions.apply(this,arguments)}function _buildContextMenuForActions(){_buildContextMenuForActions=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref2){var actions,actionContext,closeMenu,menuItems;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:actions=_ref2.actions,actionContext=_ref2.actionContext,closeMenu=_ref2.closeMenu;_context.next=3;return buildEuiContextMenuPanelItems({actions:actions,actionContext:actionContext,closeMenu:closeMenu});case 3:menuItems=_context.sent;return _context.abrupt("return",{id:"mainMenu",title:_i18n.i18n.translate("uiActions.actionPanel.title",{defaultMessage:"Options"}),items:menuItems});case 5:case"end":return _context.stop()}}}),_callee)})));return _buildContextMenuForActions.apply(this,arguments)}function buildEuiContextMenuPanelItems(_x2){return _buildEuiContextMenuPanelItems.apply(this,arguments)}function _buildEuiContextMenuPanelItems(){_buildEuiContextMenuPanelItems=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(_ref3){var actions,actionContext,closeMenu,items,promises;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:actions=_ref3.actions,actionContext=_ref3.actionContext,closeMenu=_ref3.closeMenu;items=[];promises=actions.map(function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(action){var isCompatible;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return action.isCompatible(actionContext);case 2:isCompatible=_context2.sent;if(isCompatible){_context2.next=5;break}return _context2.abrupt("return");case 5:items.push(convertPanelActionToContextMenuItem({action:action,actionContext:actionContext,closeMenu:closeMenu}));case 6:case"end":return _context2.stop()}}}),_callee2)})));return function(_x3){return _ref4.apply(this,arguments)}}());_context3.next=5;return Promise.all(promises);case 5:return _context3.abrupt("return",items);case 6:case"end":return _context3.stop()}}}),_callee3)})));return _buildEuiContextMenuPanelItems.apply(this,arguments)}function convertPanelActionToContextMenuItem(_ref){var action=_ref.action,actionContext=_ref.actionContext,closeMenu=_ref.closeMenu;var menuPanelItem={name:action.MenuItem?React.createElement((0,_public.uiToReactComponent)(action.MenuItem),{context:actionContext}):action.getDisplayName(actionContext),icon:action.getIconType(actionContext),panel:_lodash.default.get(action,"childContextMenuPanel.id"),"data-test-subj":"embeddablePanelAction-".concat(action.id)};menuPanelItem.onClick=function(){action.execute(actionContext);closeMenu()};if(action.getHref&&action.getHref(actionContext)){menuPanelItem.href=action.getHref(actionContext)}return menuPanelItem}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.openContextMenu=openContextMenu;exports.ContextMenuSession=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);var _events=__webpack_require__(181);var _reactDom=_interopRequireDefault(__webpack_require__(35));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var activeSession=null;var CONTAINER_ID="contextMenu-container";var initialized=false;function getOrCreateContainerElement(){var container=document.getElementById(CONTAINER_ID);var y=getMouseY()+document.body.scrollTop;if(!container){container=document.createElement("div");container.style.left=getMouseX()+"px";container.style.top=y+"px";container.style.position="absolute";container.style.zIndex="999";container.id=CONTAINER_ID;document.body.appendChild(container)}else{container.style.left=getMouseX()+"px";container.style.top=y+"px"}return container}var x=0;var y=0;function initialize(){if(!initialized){document.addEventListener("mousemove",onMouseUpdate,false);document.addEventListener("mouseenter",onMouseUpdate,false);initialized=true}}function onMouseUpdate(e){x=e.pageX;y=e.pageY}function getMouseX(){return x}function getMouseY(){return y}initialize();var ContextMenuSession=function(_EventEmitter){_inherits(ContextMenuSession,_EventEmitter);function ContextMenuSession(){_classCallCheck(this,ContextMenuSession);return _possibleConstructorReturn(this,_getPrototypeOf(ContextMenuSession).apply(this,arguments))}_createClass(ContextMenuSession,[{key:"bindToAngularScope",value:function bindToAngularScope(scope){var _this=this;var removeWatch=scope.$on("$destroy",(function(){return _this.close()}));this.on("closed",(function(){return removeWatch()}))}},{key:"close",value:function close(){if(activeSession===this){var container=document.getElementById(CONTAINER_ID);if(container){_reactDom.default.unmountComponentAtNode(container);this.emit("closed")}}}}]);return ContextMenuSession}(_events.EventEmitter);exports.ContextMenuSession=ContextMenuSession;function openContextMenu(panels){var props=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(activeSession){activeSession.close()}var container=getOrCreateContainerElement();var session=activeSession=new ContextMenuSession;var onClose=function onClose(){if(props.onClose){props.onClose()}session.close()};_reactDom.default.render(_react.default.createElement(_eui.EuiPopover,{className:"embPanel__optionsMenuPopover",button:container,isOpen:true,closePopover:onClose,panelPaddingSize:"none",anchorPosition:"downRight",withTitle:true},_react.default.createElement(_eui.EuiContextMenu,{initialPanelId:"mainMenu",panels:panels})),container);return session}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.selectRangeTrigger=exports.SELECT_RANGE_TRIGGER=void 0;var SELECT_RANGE_TRIGGER="SELECT_RANGE_TRIGGER";exports.SELECT_RANGE_TRIGGER=SELECT_RANGE_TRIGGER;var selectRangeTrigger={id:SELECT_RANGE_TRIGGER,title:"Select range",description:"Applies a range filter"};exports.selectRangeTrigger=selectRangeTrigger},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.valueClickTrigger=exports.VALUE_CLICK_TRIGGER=void 0;var VALUE_CLICK_TRIGGER="VALUE_CLICK_TRIGGER";exports.VALUE_CLICK_TRIGGER=VALUE_CLICK_TRIGGER;var valueClickTrigger={id:VALUE_CLICK_TRIGGER,title:"Value clicked",description:"Value was clicked"};exports.valueClickTrigger=valueClickTrigger},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.applyFilterTrigger=exports.APPLY_FILTER_TRIGGER=void 0;var APPLY_FILTER_TRIGGER="FILTER_TRIGGER";exports.APPLY_FILTER_TRIGGER=APPLY_FILTER_TRIGGER;var applyFilterTrigger={id:APPLY_FILTER_TRIGGER,title:"Filter click",description:"Triggered when user applies filter to an embeddable."};exports.applyFilterTrigger=applyFilterTrigger},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _action=__webpack_require__(870);Object.keys(_action).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _action[key]}})}));var _create_action=__webpack_require__(871);Object.keys(_create_action).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _create_action[key]}})}));var _incompatible_action_error=__webpack_require__(872);Object.keys(_incompatible_action_error).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _incompatible_action_error[key]}})}))},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createAction=createAction;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createAction(action){return _objectSpread({getIconType:function getIconType(){return undefined},order:0,id:action.type,isCompatible:function isCompatible(){return Promise.resolve(true)},getDisplayName:function getDisplayName(){return""},getHref:function getHref(){return undefined}},action)}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.IncompatibleActionError=void 0;var _i18n=__webpack_require__(1);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IncompatibleActionError=function(_Error){_inherits(IncompatibleActionError,_Error);function IncompatibleActionError(){var _this;_classCallCheck(this,IncompatibleActionError);_this=_possibleConstructorReturn(this,_getPrototypeOf(IncompatibleActionError).call(this,_i18n.i18n.translate("uiActions.errors.incompatibleAction",{defaultMessage:"Action is incompatible"})));_defineProperty(_assertThisInitialized(_this),"code","INCOMPATIBLE_ACTION");return _this}return IncompatibleActionError}(_wrapNativeSuper(Error));exports.IncompatibleActionError=IncompatibleActionError},function(module,exports,__webpack_require__){"use strict";var _triggers=__webpack_require__(232);var DEFAULT_TRIGGER="";var DEFAULT_ACTION=""},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ACTION_GLOBAL_APPLY_FILTER",{enumerable:true,get:function get(){return _apply_filter_action.ACTION_GLOBAL_APPLY_FILTER}});Object.defineProperty(exports,"createFilterAction",{enumerable:true,get:function get(){return _apply_filter_action.createFilterAction}});Object.defineProperty(exports,"createFiltersFromEvent",{enumerable:true,get:function get(){return _create_filters_from_event.createFiltersFromEvent}});Object.defineProperty(exports,"selectRangeAction",{enumerable:true,get:function get(){return _select_range_action.selectRangeAction}});Object.defineProperty(exports,"valueClickAction",{enumerable:true,get:function get(){return _value_click_action.valueClickAction}});var _apply_filter_action=__webpack_require__(875);var _create_filters_from_event=__webpack_require__(378);var _select_range_action=__webpack_require__(379);var _value_click_action=__webpack_require__(380)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterAction=createFilterAction;exports.ACTION_GLOBAL_APPLY_FILTER=void 0;var _i18n=__webpack_require__(1);var _public=__webpack_require__(31);var _public2=__webpack_require__(136);var _services=__webpack_require__(61);var _apply_filters=__webpack_require__(377);var _=__webpack_require__(63);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var ACTION_GLOBAL_APPLY_FILTER="ACTION_GLOBAL_APPLY_FILTER";exports.ACTION_GLOBAL_APPLY_FILTER=ACTION_GLOBAL_APPLY_FILTER;function isCompatible(_x){return _isCompatible.apply(this,arguments)}function _isCompatible(){_isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(context){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",context.filters!==undefined);case 1:case"end":return _context2.stop()}}}),_callee2)})));return _isCompatible.apply(this,arguments)}function createFilterAction(filterManager,timeFilter){return(0,_public2.createAction)({type:ACTION_GLOBAL_APPLY_FILTER,id:ACTION_GLOBAL_APPLY_FILTER,getDisplayName:function getDisplayName(){return _i18n.i18n.translate("data.filter.applyFilterActionTitle",{defaultMessage:"Apply filter to current view"})},isCompatible:isCompatible,execute:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var filters,timeFieldName,selectedFilters,indexPatterns,filterSelectionPromise,_esFilters$extractTim,timeRangeFilter,restOfFilters;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:filters=_ref.filters,timeFieldName=_ref.timeFieldName;if(filters){_context.next=3;break}throw new Error("Applying a filter requires a filter");case 3:_context.next=5;return isCompatible({filters:filters});case 5:if(_context.sent){_context.next=7;break}throw new _public2.IncompatibleActionError;case 7:selectedFilters=filters;if(!(selectedFilters.length>1)){_context.next=16;break}_context.next=11;return Promise.all(filters.map((function(filter){return(0,_services.getIndexPatterns)().get(filter.meta.index)})));case 11:indexPatterns=_context.sent;filterSelectionPromise=new Promise((function(resolve){var overlay=(0,_services.getOverlays)().openModal((0,_public.toMountPoint)((0,_apply_filters.applyFiltersPopover)(filters,indexPatterns,(function(){overlay.close();resolve([])}),(function(filterSelection){overlay.close();resolve(filterSelection)}))),{"data-test-subj":"test"})}));_context.next=15;return filterSelectionPromise;case 15:selectedFilters=_context.sent;case 16:if(timeFieldName){_esFilters$extractTim=_.esFilters.extractTimeFilter(timeFieldName,selectedFilters),timeRangeFilter=_esFilters$extractTim.timeRangeFilter,restOfFilters=_esFilters$extractTim.restOfFilters;filterManager.addFilters(restOfFilters);if(timeRangeFilter){_.esFilters.changeTimeFilter(timeFilter,timeRangeFilter)}}else{filterManager.addFilters(selectedFilters)}case 17:case"end":return _context.stop()}}}),_callee)})));function execute(_x2){return _execute.apply(this,arguments)}return execute}()})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.applyFiltersPopover=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _apply_filter_popover_content=__webpack_require__(877);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var applyFiltersPopover=function applyFiltersPopover(filters,indexPatterns,onCancel,onSubmit){return _react.default.createElement(_apply_filter_popover_content.ApplyFiltersPopoverContent,{indexPatterns:indexPatterns,filters:filters,onCancel:onCancel,onSubmit:onSubmit})};exports.applyFiltersPopover=applyFiltersPopover},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ApplyFiltersPopoverContent=void 0;var _eui=__webpack_require__(29);var _react=__webpack_require__(30);var _react2=_interopRequireWildcard(__webpack_require__(28));var _common=__webpack_require__(52);var _filter_bar=__webpack_require__(218);var _query=__webpack_require__(125);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ApplyFiltersPopoverContent=function(_Component){_inherits(ApplyFiltersPopoverContent,_Component);function ApplyFiltersPopoverContent(props){var _this;_classCallCheck(this,ApplyFiltersPopoverContent);_this=_possibleConstructorReturn(this,_getPrototypeOf(ApplyFiltersPopoverContent).call(this,props));_defineProperty(_assertThisInitialized(_this),"isFilterSelected",(function(i){return _this.state.isFilterSelected[i]}));_defineProperty(_assertThisInitialized(_this),"toggleFilterSelected",(function(i){var isFilterSelected=_toConsumableArray(_this.state.isFilterSelected);isFilterSelected[i]=!isFilterSelected[i];_this.setState({isFilterSelected:isFilterSelected})}));_defineProperty(_assertThisInitialized(_this),"onSubmit",(function(){var selectedFilters=_this.props.filters.filter((function(filter,i){return _this.state.isFilterSelected[i]}));_this.props.onSubmit(selectedFilters)}));_this.state={isFilterSelected:props.filters.map((function(){return true}))};return _this}_createClass(ApplyFiltersPopoverContent,[{key:"getLabel",value:function getLabel(filter){var valueLabel=(0,_common.getDisplayValueFromFilter)(filter,this.props.indexPatterns);return _react2.default.createElement(_filter_bar.FilterLabel,{filter:filter,valueLabel:valueLabel})}},{key:"render",value:function render(){var _this2=this;if(this.props.filters.length===0){return""}var mappedFilters=(0,_query.mapAndFlattenFilters)(this.props.filters);var form=_react2.default.createElement(_eui.EuiForm,null,mappedFilters.map((function(filter,i){return _react2.default.createElement(_eui.EuiFormRow,{key:i},_react2.default.createElement(_eui.EuiSwitch,{label:_this2.getLabel(filter),checked:_this2.isFilterSelected(i),onChange:function onChange(){return _this2.toggleFilterSelected(i)}}))})));return _react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement(_eui.EuiModalHeader,null,_react2.default.createElement(_eui.EuiModalHeaderTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.applyFilters.popupHeader",defaultMessage:"Select filters to apply"}))),_react2.default.createElement(_eui.EuiModalBody,null,form),_react2.default.createElement(_eui.EuiModalFooter,null,_react2.default.createElement(_eui.EuiButtonEmpty,{onClick:this.props.onCancel},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.applyFiltersPopup.cancelButtonLabel",defaultMessage:"Cancel"})),_react2.default.createElement(_eui.EuiButton,{onClick:this.onSubmit,"data-test-subj":"applyFiltersPopoverButton",fill:true},_react2.default.createElement(_react.FormattedMessage,{id:"data.filter.applyFiltersPopup.saveButtonLabel",defaultMessage:"Apply"}))))}}]);return ApplyFiltersPopoverContent}(_react2.Component);exports.ApplyFiltersPopoverContent=ApplyFiltersPopoverContent;_defineProperty(ApplyFiltersPopoverContent,"defaultProps",{filters:[]})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.onBrushEvent=onBrushEvent;var _lodash=__webpack_require__(49);var _moment=_interopRequireDefault(__webpack_require__(32));var _public=__webpack_require__(63);var _services=__webpack_require__(61);var _utils=__webpack_require__(231);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function onBrushEvent(_x){return _onBrushEvent.apply(this,arguments)}function _onBrushEvent(){_onBrushEvent=_asyncToGenerator(regeneratorRuntime.mark((function _callee(event){var isDate,xRaw,column,indexPattern,aggConfig,field,min,max,range;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isDate=(0,_lodash.get)(event.data,"ordered.date");xRaw=(0,_lodash.get)(event.data,"series[0].values[0].xRaw");if(xRaw){_context.next=4;break}return _context.abrupt("return");case 4:column=xRaw.table.columns[xRaw.column];if(!(!column||!column.meta)){_context.next=7;break}return _context.abrupt("return");case 7:_context.next=9;return(0,_services.getIndexPatterns)().get(column.meta.indexPatternId);case 9:indexPattern=_context.sent;aggConfig=(0,_utils.deserializeAggConfig)(_objectSpread({},column.meta,{indexPattern:indexPattern}));field=aggConfig.params.field;if(!(!field||event.range.length<=1)){_context.next=14;break}return _context.abrupt("return");case 14:min=event.range[0];max=(0,_lodash.last)(event.range);if(!(min===max)){_context.next=18;break}return _context.abrupt("return");case 18:range={gte:isDate?(0,_moment.default)(min).toISOString():min,lt:isDate?(0,_moment.default)(max).toISOString():max};if(isDate){range.format="strict_date_optional_time"}return _context.abrupt("return",_public.esFilters.buildRangeFilter(field,range,indexPattern));case 21:case"end":return _context.stop()}}}),_callee)})));return _onBrushEvent.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict"},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultPrivileges=getDefaultPrivileges;function getDefaultPrivileges(){return{canGetJobs:false,canCreateJob:false,canDeleteJob:false,canOpenJob:false,canCloseJob:false,canForecastJob:false,canGetDatafeeds:false,canStartStopDatafeed:false,canUpdateJob:false,canUpdateDatafeed:false,canPreviewDatafeed:false,canGetCalendars:false,canCreateCalendar:false,canDeleteCalendar:false,canGetFilters:false,canCreateFilter:false,canDeleteFilter:false,canFindFileStructure:false,canGetDataFrameAnalytics:false,canDeleteDataFrameAnalytics:false,canCreateDataFrameAnalytics:false,canStartStopDataFrameAnalytics:false}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPrivileges=getPrivileges;exports.getManageMlPrivileges=getManageMlPrivileges;var _ml_api_service=__webpack_require__(51);var _upgrade_service=__webpack_require__(381);function getPrivileges(){return new Promise((function(resolve,reject){_ml_api_service.ml.checkMlPrivileges().then((function(resp){if(resp.upgradeInProgress===true){(0,_upgrade_service.setUpgradeInProgress)(true)}resolve(resp)})).catch((function(){reject()}))}))}function getManageMlPrivileges(){return new Promise((function(resolve,reject){_ml_api_service.ml.checkManageMLPrivileges().then((function(resp){if(resp.upgradeInProgress===true){(0,_upgrade_service.setUpgradeInProgress)(true)}resolve(resp)})).catch((function(){reject()}))}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.annotations=void 0;var _http_service=__webpack_require__(116);var _index=__webpack_require__(51);var annotations={getAnnotations:function getAnnotations(obj){var body=JSON.stringify(obj);return(0,_http_service.http$)({path:"".concat((0,_index.basePath)(),"/annotations"),method:"POST",body:body})},indexAnnotation:function indexAnnotation(obj){var body=JSON.stringify(obj);return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/annotations/index"),method:"PUT",body:body})},deleteAnnotation:function deleteAnnotation(id){return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/annotations/delete/").concat(id),method:"DELETE"})}};exports.annotations=annotations},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.dataFrameAnalytics=void 0;var _http_service=__webpack_require__(116);var _index=__webpack_require__(51);var dataFrameAnalytics={getDataFrameAnalytics:function getDataFrameAnalytics(analyticsId){var analyticsIdString=analyticsId!==undefined?"/".concat(analyticsId):"";return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/data_frame/analytics").concat(analyticsIdString),method:"GET"})},getDataFrameAnalyticsStats:function getDataFrameAnalyticsStats(analyticsId){if(analyticsId!==undefined){return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/data_frame/analytics/").concat(analyticsId,"/_stats"),method:"GET"})}return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/data_frame/analytics/_stats"),method:"GET"})},createDataFrameAnalytics:function createDataFrameAnalytics(analyticsId,analyticsConfig){var body=JSON.stringify(analyticsConfig);return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/data_frame/analytics/").concat(analyticsId),method:"PUT",body:body})},evaluateDataFrameAnalytics:function evaluateDataFrameAnalytics(evaluateConfig){var body=JSON.stringify(evaluateConfig);return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/data_frame/_evaluate"),method:"POST",body:body})},explainDataFrameAnalytics:function explainDataFrameAnalytics(jobConfig){var body=JSON.stringify(jobConfig);return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/data_frame/analytics/_explain"),method:"POST",body:body})},deleteDataFrameAnalytics:function deleteDataFrameAnalytics(analyticsId){return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/data_frame/analytics/").concat(analyticsId),method:"DELETE"})},startDataFrameAnalytics:function startDataFrameAnalytics(analyticsId){return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/data_frame/analytics/").concat(analyticsId,"/_start"),method:"POST"})},stopDataFrameAnalytics:function stopDataFrameAnalytics(analyticsId){var force=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/data_frame/analytics/").concat(analyticsId,"/_stop"),method:"POST",query:{force:force}})},getAnalyticsAuditMessages:function getAnalyticsAuditMessages(analyticsId){return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/data_frame/analytics/").concat(analyticsId,"/messages"),method:"GET"})}};exports.dataFrameAnalytics=dataFrameAnalytics},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.filters=void 0;var _http_service=__webpack_require__(116);var _index=__webpack_require__(51);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var filters={filters:function filters(obj){var filterId=obj&&obj.filterId?"/".concat(obj.filterId):"";return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/filters").concat(filterId),method:"GET"})},filtersStats:function filtersStats(){return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/filters/_stats"),method:"GET"})},addFilter:function addFilter(filterId,description,items){var body=JSON.stringify({filterId:filterId,description:description,items:items});return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/filters"),method:"PUT",body:body})},updateFilter:function updateFilter(filterId,description,addItems,removeItems){var body=JSON.stringify(_objectSpread({},description!==undefined?{description:description}:{},{},addItems!==undefined?{addItems:addItems}:{},{},removeItems!==undefined?{removeItems:removeItems}:{}));return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/filters/").concat(filterId),method:"PUT",body:body})},deleteFilter:function deleteFilter(filterId){return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/filters/").concat(filterId),method:"DELETE"})}};exports.filters=filters},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.results=void 0;var _http_service=__webpack_require__(116);var _index=__webpack_require__(51);var results={getAnomaliesTableData:function getAnomaliesTableData(jobIds,criteriaFields,influencers,aggregationInterval,threshold,earliestMs,latestMs,dateFormatTz,maxRecords,maxExamples,influencersFilterQuery){var body=JSON.stringify({jobIds:jobIds,criteriaFields:criteriaFields,influencers:influencers,aggregationInterval:aggregationInterval,threshold:threshold,earliestMs:earliestMs,latestMs:latestMs,dateFormatTz:dateFormatTz,maxRecords:maxRecords,maxExamples:maxExamples,influencersFilterQuery:influencersFilterQuery});return(0,_http_service.http$)({path:"".concat((0,_index.basePath)(),"/results/anomalies_table_data"),method:"POST",body:body})},getMaxAnomalyScore:function getMaxAnomalyScore(jobIds,earliestMs,latestMs){var body=JSON.stringify({jobIds:jobIds,earliestMs:earliestMs,latestMs:latestMs});return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/results/max_anomaly_score"),method:"POST",body:body})},getCategoryDefinition:function getCategoryDefinition(jobId,categoryId){var body=JSON.stringify({jobId:jobId,categoryId:categoryId});return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/results/category_definition"),method:"POST",body:body})},getCategoryExamples:function getCategoryExamples(jobId,categoryIds,maxExamples){var body=JSON.stringify({jobId:jobId,categoryIds:categoryIds,maxExamples:maxExamples});return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/results/category_examples"),method:"POST",body:body})},fetchPartitionFieldsValues:function fetchPartitionFieldsValues(jobId,searchTerm,criteriaFields,earliestMs,latestMs){var body=JSON.stringify({jobId:jobId,searchTerm:searchTerm,criteriaFields:criteriaFields,earliestMs:earliestMs,latestMs:latestMs});return(0,_http_service.http$)({path:"".concat((0,_index.basePath)(),"/results/partition_fields_values"),method:"POST",body:body})}};exports.results=results},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.jobs=void 0;var _http_service=__webpack_require__(116);var _index=__webpack_require__(51);var jobs={jobsSummary:function jobsSummary(jobIds){var body=JSON.stringify({jobIds:jobIds});return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/jobs/jobs_summary"),method:"POST",body:body})},jobsWithTimerange:function jobsWithTimerange(dateFormatTz){var body=JSON.stringify({dateFormatTz:dateFormatTz});return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/jobs/jobs_with_time_range"),method:"POST",body:body})},jobs:function jobs(jobIds){var body=JSON.stringify({jobIds:jobIds});return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/jobs/jobs"),method:"POST",body:body})},groups:function groups(){return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/jobs/groups"),method:"GET"})},updateGroups:function updateGroups(updatedJobs){var body=JSON.stringify({jobs:updatedJobs});return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/jobs/update_groups"),method:"POST",body:body})},forceStartDatafeeds:function forceStartDatafeeds(datafeedIds,start,end){var body=JSON.stringify({datafeedIds:datafeedIds,start:start,end:end});return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/jobs/force_start_datafeeds"),method:"POST",body:body})},stopDatafeeds:function stopDatafeeds(datafeedIds){var body=JSON.stringify({datafeedIds:datafeedIds});return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/jobs/stop_datafeeds"),method:"POST",body:body})},deleteJobs:function deleteJobs(jobIds){var body=JSON.stringify({jobIds:jobIds});return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/jobs/delete_jobs"),method:"POST",body:body})},closeJobs:function closeJobs(jobIds){var body=JSON.stringify({jobIds:jobIds});return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/jobs/close_jobs"),method:"POST",body:body})},jobAuditMessages:function jobAuditMessages(jobId,from){var jobIdString=jobId!==undefined?"/".concat(jobId):"";var query=from!==undefined?{from:from}:{};return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/job_audit_messages/messages").concat(jobIdString),method:"GET",query:query})},deletingJobTasks:function deletingJobTasks(){return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/jobs/deleting_jobs_tasks"),method:"GET"})},jobsExist:function jobsExist(jobIds){var body=JSON.stringify({jobIds:jobIds});return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/jobs/jobs_exist"),method:"POST",body:body})},newJobCaps:function newJobCaps(indexPatternTitle){var isRollup=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var query=isRollup===true?{rollup:true}:{};return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/jobs/new_job_caps/").concat(indexPatternTitle),method:"GET",query:query})},newJobLineChart:function newJobLineChart(indexPatternTitle,timeField,start,end,intervalMs,query,aggFieldNamePairs,splitFieldName,splitFieldValue){var body=JSON.stringify({indexPatternTitle:indexPatternTitle,timeField:timeField,start:start,end:end,intervalMs:intervalMs,query:query,aggFieldNamePairs:aggFieldNamePairs,splitFieldName:splitFieldName,splitFieldValue:splitFieldValue});return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/jobs/new_job_line_chart"),method:"POST",body:body})},newJobPopulationsChart:function newJobPopulationsChart(indexPatternTitle,timeField,start,end,intervalMs,query,aggFieldNamePairs,splitFieldName){var body=JSON.stringify({indexPatternTitle:indexPatternTitle,timeField:timeField,start:start,end:end,intervalMs:intervalMs,query:query,aggFieldNamePairs:aggFieldNamePairs,splitFieldName:splitFieldName});return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/jobs/new_job_population_chart"),method:"POST",body:body})},getAllJobAndGroupIds:function getAllJobAndGroupIds(){return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/jobs/all_jobs_and_group_ids"),method:"GET"})},getLookBackProgress:function getLookBackProgress(jobId,start,end){var body=JSON.stringify({jobId:jobId,start:start,end:end});return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/jobs/look_back_progress"),method:"POST",body:body})},categorizationFieldExamples:function categorizationFieldExamples(indexPatternTitle,query,size,field,timeField,start,end,analyzer){var body=JSON.stringify({indexPatternTitle:indexPatternTitle,query:query,size:size,field:field,timeField:timeField,start:start,end:end,analyzer:analyzer});return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/jobs/categorization_field_examples"),method:"POST",body:body})},topCategories:function topCategories(jobId,count){var body=JSON.stringify({jobId:jobId,count:count});return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/jobs/top_categories"),method:"POST",body:body})}};exports.jobs=jobs},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fileDatavisualizer=void 0;var _http_service=__webpack_require__(116);var _index=__webpack_require__(51);var fileDatavisualizer={analyzeFile:function analyzeFile(file){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var body=JSON.stringify(file);return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/file_data_visualizer/analyze_file"),method:"POST",body:body,query:params})},import:function _import(_ref){var id=_ref.id,index=_ref.index,data=_ref.data,settings=_ref.settings,mappings=_ref.mappings,ingestPipeline=_ref.ingestPipeline;var query=id!==undefined?{id:id}:{};var body=JSON.stringify({index:index,data:data,settings:settings,mappings:mappings,ingestPipeline:ingestPipeline});return(0,_http_service.http)({path:"".concat((0,_index.basePath)(),"/file_data_visualizer/import"),method:"POST",query:query,body:body})}};exports.fileDatavisualizer=fileDatavisualizer},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useTimefilter=void 0;var _react=__webpack_require__(28);var _kibana_context=__webpack_require__(233);var useTimefilter=function useTimefilter(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},timeRangeSelector=_ref.timeRangeSelector,autoRefreshSelector=_ref.autoRefreshSelector;var _useMlKibana=(0,_kibana_context.useMlKibana)(),services=_useMlKibana.services;var timefilter=services.data.query.timefilter.timefilter;(0,_react.useEffect)((function(){if(timeRangeSelector===true){timefilter.enableTimeRangeSelector()}else if(timeRangeSelector===false){timefilter.disableTimeRangeSelector()}if(autoRefreshSelector===true){timefilter.enableAutoRefreshSelector()}else if(autoRefreshSelector===false){timefilter.disableAutoRefreshSelector()}}),[timeRangeSelector,autoRefreshSelector]);return timefilter};exports.useTimefilter=useTimefilter},,,,,,,,function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.mlInMemoryTableFactory=mlInMemoryTableFactory;exports.ProgressBar=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _types=__webpack_require__(383);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ProgressBar=function ProgressBar(_ref){var _ref$isLoading=_ref.isLoading,isLoading=_ref$isLoading===void 0?false:_ref$isLoading;return _react.default.createElement(_react.Fragment,null,isLoading&&_react.default.createElement(_eui.EuiProgress,{className:"mlAnalyticsProgressBar",size:"xs",color:"primary"}),!isLoading&&_react.default.createElement(_eui.EuiProgress,{className:"mlAnalyticsProgressBar",value:0,max:100,size:"xs"}))};exports.ProgressBar=ProgressBar;function findColumnByProp(columns,prop,value){for(var i=0;i<columns.length;i++){var column=columns[i];if(column[prop]===value){return column}}}var getInitialSorting=function getInitialSorting(columns,sorting){if(!sorting||!sorting.sort){return{sortName:undefined,sortDirection:undefined}}var _sorting$sort=sorting.sort,sortable=_sorting$sort.field,sortDirection=_sorting$sort.direction;var sortColumn=findColumnByProp(columns,"field",sortable);if(sortColumn==null){sortColumn=findColumnByProp(columns,"name",sortable)}if(sortColumn==null){return{sortName:undefined,sortDirection:undefined}}var sortName=sortColumn.name;return{sortName:sortName,sortDirection:sortDirection}};function mlInMemoryTableFactory(){var MlInMemoryTableBasic=(0,_types.mlInMemoryTableBasicFactory)();return(function(_MlInMemoryTableBasic){_inherits(MlInMemoryTable,_MlInMemoryTableBasic);function MlInMemoryTable(){_classCallCheck(this,MlInMemoryTable);return _possibleConstructorReturn(this,_getPrototypeOf(MlInMemoryTable).apply(this,arguments))}_createClass(MlInMemoryTable,null,[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var derivedState=_objectSpread({},prevState.prevProps,{pageIndex:nextProps.pagination.initialPageIndex,pageSize:nextProps.pagination.initialPageSize});if(nextProps.items!==prevState.prevProps.items){Object.assign(derivedState,{prevProps:{items:nextProps.items}})}var _getInitialSorting=getInitialSorting(nextProps.columns,nextProps.sorting),sortName=_getInitialSorting.sortName,sortDirection=_getInitialSorting.sortDirection;if(sortName!==prevState.prevProps.sortName||sortDirection!==prevState.prevProps.sortDirection){Object.assign(derivedState,{sortName:sortName,sortDirection:sortDirection})}return derivedState}}]);return MlInMemoryTable}(MlInMemoryTableBasic))}},,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mlMessageBarService=void 0;var _dependency_cache=__webpack_require__(5);var _ml_error=__webpack_require__(906);var _i18n=__webpack_require__(1);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function errorNotify(text,resp){var err=null;if(_typeof(text)==="object"&&text.response!==undefined){resp=text.response}else if(_typeof(text)==="object"&&text.message!==undefined){err=new Error(text.message)}else{err=new Error(text)}var toastNotifications=(0,_dependency_cache.getToastNotifications)();toastNotifications.addError(new _ml_error.MLRequestFailure(err,resp),{title:_i18n.i18n.translate("xpack.ml.messagebarService.errorTitle",{defaultMessage:"An error has ocurred"})})}var mlMessageBarService={notify:{error:errorNotify}};exports.mlMessageBarService=mlMessageBarService},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.MLRequestFailure=void 0;var _public=__webpack_require__(34);function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MLRequestFailure=function(_KbnError){_inherits(MLRequestFailure,_KbnError);function MLRequestFailure(error,resp){var _this;_classCallCheck(this,MLRequestFailure);error=error||{};_this=_possibleConstructorReturn(this,_getPrototypeOf(MLRequestFailure).call(this,error.message||JSON.stringify(resp)));_defineProperty(_assertThisInitialized(_this),"origError",void 0);_defineProperty(_assertThisInitialized(_this),"resp",void 0);_this.origError=error;_this.resp=typeof resp==="string"?JSON.parse(resp):resp;return _this}return MLRequestFailure}(_public.KbnError);exports.MLRequestFailure=MLRequestFailure},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.relativeToAbsolute=relativeToAbsolute;exports.isWebUrl=isWebUrl;function relativeToAbsolute(url){var a=document.createElement("a");a.setAttribute("href",url);return a.href}function isWebUrl(url){var absoluteUrl=relativeToAbsolute(url);return/^https?:\/\//.test(absoluteUrl)}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StatsBar=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _stat=__webpack_require__(910);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StatsBar=function StatsBar(_ref){var stats=_ref.stats,dataTestSub=_ref.dataTestSub;var statsList=Object.keys(stats).map((function(k){return stats[k]}));return _react.default.createElement("div",{className:"mlStatsBar","data-test-subj":dataTestSub},statsList.filter((function(s){return s.show})).map((function(s){return _react.default.createElement(_stat.Stat,{key:s.label,stat:s})})))};exports.StatsBar=StatsBar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Stat=void 0;var _react=_interopRequireDefault(__webpack_require__(28));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Stat=function Stat(_ref){var stat=_ref.stat;return _react.default.createElement("span",{className:"stat"},_react.default.createElement("span",null,stat.label),": ",_react.default.createElement("strong",null,stat.value))};exports.Stat=Stat},,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DATA_FRAME_TASK_STATE=void 0;var DATA_FRAME_TASK_STATE;exports.DATA_FRAME_TASK_STATE=DATA_FRAME_TASK_STATE;(function(DATA_FRAME_TASK_STATE){DATA_FRAME_TASK_STATE["ANALYZING"]="analyzing";DATA_FRAME_TASK_STATE["FAILED"]="failed";DATA_FRAME_TASK_STATE["REINDEXING"]="reindexing";DATA_FRAME_TASK_STATE["STARTED"]="started";DATA_FRAME_TASK_STATE["STARTING"]="starting";DATA_FRAME_TASK_STATE["STOPPED"]="stopped"})(DATA_FRAME_TASK_STATE||(exports.DATA_FRAME_TASK_STATE=DATA_FRAME_TASK_STATE={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.euiDataGridToolbarSettings=exports.euiDataGridStyle=void 0;var euiDataGridStyle={border:"all",fontSize:"s",cellPadding:"s",stripes:false,rowHover:"none",header:"shade"};exports.euiDataGridStyle=euiDataGridStyle;var euiDataGridToolbarSettings={showColumnSelector:true,showStyleSelector:false,showSortSelector:true,showFullScreenSelector:false};exports.euiDataGridToolbarSettings=euiDataGridToolbarSettings},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.deleteAnalytics=void 0;var _i18n=__webpack_require__(1);var _dependency_cache=__webpack_require__(5);var _ml_api_service=__webpack_require__(51);var _common=__webpack_require__(65);var _common2=__webpack_require__(101);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var deleteAnalytics=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(d){var toastNotifications;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:toastNotifications=(0,_dependency_cache.getToastNotifications)();_context.prev=1;if(!(0,_common2.isDataFrameAnalyticsFailed)(d.stats.state)){_context.next=5;break}_context.next=5;return _ml_api_service.ml.dataFrameAnalytics.stopDataFrameAnalytics(d.config.id,true);case 5:_context.next=7;return _ml_api_service.ml.dataFrameAnalytics.deleteDataFrameAnalytics(d.config.id);case 7:toastNotifications.addSuccess(_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.deleteAnalyticsSuccessMessage",{defaultMessage:"Request to delete data frame analytics {analyticsId} acknowledged.",values:{analyticsId:d.config.id}}));_context.next=13;break;case 10:_context.prev=10;_context.t0=_context["catch"](1);toastNotifications.addDanger(_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.deleteAnalyticsErrorMessage",{defaultMessage:"An error occurred deleting the data frame analytics {analyticsId}: {error}",values:{analyticsId:d.config.id,error:JSON.stringify(_context.t0)}}));case 13:_common.refreshAnalyticsList$.next(_common.REFRESH_ANALYTICS_LIST_STATE.REFRESH);case 14:case"end":return _context.stop()}}}),_callee,null,[[1,10]])})));return function deleteAnalytics(_x){return _ref.apply(this,arguments)}}();exports.deleteAnalytics=deleteAnalytics},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.startAnalytics=void 0;var _i18n=__webpack_require__(1);var _dependency_cache=__webpack_require__(5);var _ml_api_service=__webpack_require__(51);var _common=__webpack_require__(65);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var startAnalytics=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(d){var toastNotifications;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:toastNotifications=(0,_dependency_cache.getToastNotifications)();_context.prev=1;_context.next=4;return _ml_api_service.ml.dataFrameAnalytics.startDataFrameAnalytics(d.config.id);case 4:toastNotifications.addSuccess(_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.startAnalyticsSuccessMessage",{defaultMessage:"Request to start data frame analytics {analyticsId} acknowledged.",values:{analyticsId:d.config.id}}));_context.next=10;break;case 7:_context.prev=7;_context.t0=_context["catch"](1);toastNotifications.addDanger(_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.startAnalyticsErrorMessage",{defaultMessage:"An error occurred starting the data frame analytics {analyticsId}: {error}",values:{analyticsId:d.config.id,error:JSON.stringify(_context.t0)}}));case 10:_common.refreshAnalyticsList$.next(_common.REFRESH_ANALYTICS_LIST_STATE.REFRESH);case 11:case"end":return _context.stop()}}}),_callee,null,[[1,7]])})));return function startAnalytics(_x){return _ref.apply(this,arguments)}}();exports.startAnalytics=startAnalytics},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.stopAnalytics=void 0;var _i18n=__webpack_require__(1);var _dependency_cache=__webpack_require__(5);var _ml_api_service=__webpack_require__(51);var _common=__webpack_require__(65);var _common2=__webpack_require__(101);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var stopAnalytics=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(d){var toastNotifications;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:toastNotifications=(0,_dependency_cache.getToastNotifications)();_context.prev=1;_context.next=4;return _ml_api_service.ml.dataFrameAnalytics.stopDataFrameAnalytics(d.config.id,(0,_common2.isDataFrameAnalyticsFailed)(d.stats.state));case 4:toastNotifications.addSuccess(_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.stopAnalyticsSuccessMessage",{defaultMessage:"Request to stop data frame analytics {analyticsId} acknowledged.",values:{analyticsId:d.config.id}}));_context.next=10;break;case 7:_context.prev=7;_context.t0=_context["catch"](1);toastNotifications.addDanger(_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.stopAnalyticsErrorMessage",{defaultMessage:"An error occurred stopping the data frame analytics {analyticsId}: {error}",values:{analyticsId:d.config.id,error:JSON.stringify(_context.t0)}}));case 10:_common.refreshAnalyticsList$.next(_common.REFRESH_ANALYTICS_LIST_STATE.REFRESH);case 11:case"end":return _context.stop()}}}),_callee,null,[[1,7]])})));return function stopAnalytics(_x){return _ref.apply(this,arguments)}}();exports.stopAnalytics=stopAnalytics},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StartAction=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(29);var _analytics_service=__webpack_require__(153);var _check_privilege=__webpack_require__(56);var _common=__webpack_require__(101);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var StartAction=function StartAction(_ref){var item=_ref.item;var canStartStopDataFrameAnalytics=(0,_check_privilege.checkPermission)("canStartStopDataFrameAnalytics");var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isModalVisible=_useState2[0],setModalVisible=_useState2[1];var closeModal=function closeModal(){return setModalVisible(false)};var startAndCloseModal=function startAndCloseModal(){setModalVisible(false);(0,_analytics_service.startAnalytics)(item)};var openModal=function openModal(){return setModalVisible(true)};var buttonStartText=_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.startActionName",{defaultMessage:"Start"});var completeAnalytics=(0,_common.isCompletedAnalyticsJob)(item.stats);var startButton=_react.default.createElement(_eui.EuiButtonEmpty,{size:"xs",color:"text",disabled:!canStartStopDataFrameAnalytics||completeAnalytics,iconType:"play",onClick:openModal,"aria-label":buttonStartText,"data-test-sub":"mlAnalyticsJobStartButton"},buttonStartText);if(!canStartStopDataFrameAnalytics||completeAnalytics){startButton=_react.default.createElement(_eui.EuiToolTip,{position:"top",content:!canStartStopDataFrameAnalytics?(0,_check_privilege.createPermissionFailureMessage)("canStartStopDataFrameAnalytics"):_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.completeBatchAnalyticsToolTip",{defaultMessage:"{analyticsId} is a completed analytics job and cannot be restarted.",values:{analyticsId:item.config.id}})},startButton)}return _react.default.createElement(_react.Fragment,null,startButton,isModalVisible&&_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.startModalTitle",{defaultMessage:"Start {analyticsId}",values:{analyticsId:item.config.id}}),onCancel:closeModal,onConfirm:startAndCloseModal,cancelButtonText:_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.startModalCancelButton",{defaultMessage:"Cancel"}),confirmButtonText:_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.startModalStartButton",{defaultMessage:"Start"}),defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON,buttonColor:"primary"},_react.default.createElement("p",null,_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.startModalBody",{defaultMessage:"A data frame analytics job will increase search and indexing load in your cluster. Please stop the analytics job if excessive load is experienced. Are you sure you want to start this analytics job?"})))))};exports.StartAction=StartAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DeleteAction=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(29);var _analytics_service=__webpack_require__(153);var _check_privilege=__webpack_require__(56);var _common=__webpack_require__(101);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var DeleteAction=function DeleteAction(_ref){var item=_ref.item;var disabled=(0,_common.isDataFrameAnalyticsRunning)(item.stats.state);var canDeleteDataFrameAnalytics=(0,_check_privilege.checkPermission)("canDeleteDataFrameAnalytics");var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isModalVisible=_useState2[0],setModalVisible=_useState2[1];var closeModal=function closeModal(){return setModalVisible(false)};var deleteAndCloseModal=function deleteAndCloseModal(){setModalVisible(false);(0,_analytics_service.deleteAnalytics)(item)};var openModal=function openModal(){return setModalVisible(true)};var buttonDeleteText=_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.deleteActionName",{defaultMessage:"Delete"});var deleteButton=_react.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"mlAnalyticsJobDeleteButton",size:"xs",color:"text",disabled:disabled||!canDeleteDataFrameAnalytics,iconType:"trash",onClick:openModal,"aria-label":buttonDeleteText,style:{padding:0}},buttonDeleteText);if(disabled||!canDeleteDataFrameAnalytics){deleteButton=_react.default.createElement(_eui.EuiToolTip,{position:"top",content:disabled?_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.deleteActionDisabledToolTipContent",{defaultMessage:"Stop the data frame analytics in order to delete it."}):(0,_check_privilege.createPermissionFailureMessage)("canStartStopDataFrameAnalytics")},deleteButton)}return _react.default.createElement(_react.Fragment,null,deleteButton,isModalVisible&&_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.deleteModalTitle",{defaultMessage:"Delete {analyticsId}",values:{analyticsId:item.config.id}}),onCancel:closeModal,onConfirm:deleteAndCloseModal,cancelButtonText:_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.deleteModalCancelButton",{defaultMessage:"Cancel"}),confirmButtonText:_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.deleteModalDeleteButton",{defaultMessage:"Delete"}),defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON,buttonColor:"danger"},_react.default.createElement("p",null,_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.deleteModalBody",{defaultMessage:"Are you sure you want to delete this analytics job? The analytics job's destination index and optional Kibana index pattern will not be deleted."})))))};exports.DeleteAction=DeleteAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NodeAvailableWarning=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _react2=__webpack_require__(30);var _ml_nodes_check=__webpack_require__(154);var _ml_server_info=__webpack_require__(84);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var NodeAvailableWarning=function NodeAvailableWarning(){if((0,_ml_nodes_check.mlNodesAvailable)()===true||(0,_ml_nodes_check.permissionToViewMlNodeCount)()===false){return null}var id=(0,_ml_server_info.getCloudDeploymentId)();return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.nodeAvailableWarning.noMLNodesAvailableTitle",defaultMessage:"No ML nodes available"}),color:"warning",iconType:"alert"},_react.default.createElement("div",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.nodeAvailableWarning.noMLNodesAvailableDescription",defaultMessage:"There are no ML nodes available."})),_react.default.createElement("div",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.nodeAvailableWarning.unavailableCreateOrRunJobsDescription",defaultMessage:"You will not be able to create or run jobs."})),_ml_server_info.isCloud&&id!==null&&_react.default.createElement("div",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.nodeAvailableWarning.linkToCloudDescription",defaultMessage:"Please edit your {link}. You may enable a free 1GB machine learning node or expand your existing ML configuration.",values:{link:_react.default.createElement(_eui.EuiLink,{href:"https://cloud.elastic.co/deployments?q=".concat(id)},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.nodeAvailableWarning.linkToCloud.hereLinkText",defaultMessage:"Elastic Cloud deployment"}))}}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}))};exports.NodeAvailableWarning=NodeAvailableWarning},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UpgradeWarning=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);var _react2=__webpack_require__(30);var _upgrade_service=__webpack_require__(381);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var UpgradeWarning=function UpgradeWarning(){if((0,_upgrade_service.isUpgradeInProgress)()===true){return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.upgrade.upgradeWarning.upgradeInProgressWarningTitle",defaultMessage:"Index migration in progress"}),color:"warning",iconType:"alert"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.upgrade.upgradeWarning.upgradeInProgressWarningDescription",defaultMessage:"Indices related to Machine Learning are currently being upgraded."}),_react.default.createElement("br",null),_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.upgrade.upgradeWarning.upgradeInProgressWarningDescriptionExtra",defaultMessage:"Some actions will not be available during this time."}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}))}return null};exports.UpgradeWarning=UpgradeWarning},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JobsListView=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _react2=__webpack_require__(30);var _eui=__webpack_require__(29);var _ml_api_service=__webpack_require__(51);var _utils=__webpack_require__(111);var _jobs_list=__webpack_require__(1028);var _job_details=__webpack_require__(1034);var _job_filter_bar=__webpack_require__(1058);var _edit_job_flyout=__webpack_require__(1060);var _delete_job_modal=__webpack_require__(1219);var _start_datafeed_modal=__webpack_require__(1221);var _create_watch_flyout=__webpack_require__(461);var _multi_job_actions=__webpack_require__(1235);var _new_job_button=__webpack_require__(1244);var _jobs_stats_bar=__webpack_require__(1246);var _node_available_warning=__webpack_require__(234);var _upgrade=__webpack_require__(235);var _refresh_jobs_list_button=__webpack_require__(1248);var _lodash=__webpack_require__(49);var _jobs_list2=__webpack_require__(193);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var deletingJobsRefreshTimeout=null;var JobsListView=function(_Component){_inherits(JobsListView,_Component);function JobsListView(props){var _this;_classCallCheck(this,JobsListView);_this=_possibleConstructorReturn(this,_getPrototypeOf(JobsListView).call(this,props));_defineProperty(_assertThisInitialized(_this),"toggleRow",(function(jobId){if(_this.state.itemIdToExpandedRowMap[jobId]){var itemIdToExpandedRowMap=_objectSpread({},_this.state.itemIdToExpandedRowMap);delete itemIdToExpandedRowMap[jobId];_this.setState({itemIdToExpandedRowMap:itemIdToExpandedRowMap})}else{var _itemIdToExpandedRowMap=_objectSpread({},_this.state.itemIdToExpandedRowMap);if(_this.state.fullJobsList[jobId]!==undefined){_itemIdToExpandedRowMap[jobId]=_react.default.createElement(_job_details.JobDetails,{jobId:jobId,job:_this.state.fullJobsList[jobId],addYourself:_this.addUpdateFunction,removeYourself:_this.removeUpdateFunction,showFullDetails:_this.props.isManagementTable!==true})}else{_itemIdToExpandedRowMap[jobId]=_react.default.createElement(_job_details.JobDetails,{jobId:jobId,addYourself:_this.addUpdateFunction,removeYourself:_this.removeUpdateFunction,showFullDetails:_this.props.isManagementTable!==true})}_this.setState({itemIdToExpandedRowMap:_itemIdToExpandedRowMap},(function(){(0,_utils.loadFullJob)(jobId).then((function(job){var fullJobsList=_objectSpread({},_this.state.fullJobsList);fullJobsList[jobId]=job;_this.setState({fullJobsList:fullJobsList},(function(){_itemIdToExpandedRowMap=_objectSpread({},_this.state.itemIdToExpandedRowMap);if(_itemIdToExpandedRowMap[jobId]!==undefined){_itemIdToExpandedRowMap[jobId]=_react.default.createElement(_job_details.JobDetails,{jobId:jobId,job:job,addYourself:_this.addUpdateFunction,removeYourself:_this.removeUpdateFunction,showFullDetails:_this.props.isManagementTable!==true})}_this.setState({itemIdToExpandedRowMap:_itemIdToExpandedRowMap})}))})).catch((function(error){console.error(error)}))}))}}));_defineProperty(_assertThisInitialized(_this),"addUpdateFunction",(function(id,f){_this.updateFunctions[id]=f}));_defineProperty(_assertThisInitialized(_this),"removeUpdateFunction",(function(id){delete _this.updateFunctions[id]}));_defineProperty(_assertThisInitialized(_this),"setShowEditJobFlyoutFunction",(function(func){_this.showEditJobFlyout=func}));_defineProperty(_assertThisInitialized(_this),"unsetShowEditJobFlyoutFunction",(function(){_this.showEditJobFlyout=function(){}}));_defineProperty(_assertThisInitialized(_this),"setShowDeleteJobModalFunction",(function(func){_this.showDeleteJobModal=func}));_defineProperty(_assertThisInitialized(_this),"unsetShowDeleteJobModalFunction",(function(){_this.showDeleteJobModal=function(){}}));_defineProperty(_assertThisInitialized(_this),"setShowStartDatafeedModalFunction",(function(func){_this.showStartDatafeedModal=func}));_defineProperty(_assertThisInitialized(_this),"unsetShowStartDatafeedModalFunction",(function(){_this.showStartDatafeedModal=function(){}}));_defineProperty(_assertThisInitialized(_this),"setShowCreateWatchFlyoutFunction",(function(func){_this.showCreateWatchFlyout=func}));_defineProperty(_assertThisInitialized(_this),"unsetShowCreateWatchFlyoutFunction",(function(){_this.showCreateWatchFlyout=function(){}}));_defineProperty(_assertThisInitialized(_this),"getShowCreateWatchFlyoutFunction",(function(){return _this.showCreateWatchFlyout}));_defineProperty(_assertThisInitialized(_this),"selectJobChange",(function(selectedJobs){_this.setState({selectedJobs:selectedJobs})}));_defineProperty(_assertThisInitialized(_this),"setFilters",(function(filterClauses){var filteredJobsSummaryList=(0,_utils.filterJobs)(_this.state.jobsSummaryList,filterClauses);_this.setState({filteredJobsSummaryList:filteredJobsSummaryList,filterClauses:filterClauses},(function(){_this.refreshSelectedJobs()}))}));_defineProperty(_assertThisInitialized(_this),"onRefreshClick",(function(){_this.setState({isRefreshing:true});_this.refreshJobSummaryList(true)}));_defineProperty(_assertThisInitialized(_this),"isDoneRefreshing",(function(){_this.setState({isRefreshing:false})}));_this.state={isRefreshing:false,loading:null,jobsSummaryList:[],filteredJobsSummaryList:[],fullJobsList:{},selectedJobs:[],itemIdToExpandedRowMap:{},filterClauses:[],deletingJobIds:[]};_this.updateFunctions={};_this.showEditJobFlyout=function(){};_this.showDeleteJobModal=function(){};_this.showStartDatafeedModal=function(){};_this.showCreateWatchFlyout=function(){};return _this}_createClass(JobsListView,[{key:"componentDidMount",value:function componentDidMount(){this.refreshJobSummaryList(true);if(this.props.isManagementTable!==true){this.openAutoStartDatafeedModal()}}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(prevProps.lastRefresh!==this.props.lastRefresh){this.refreshJobSummaryList()}}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.props.isManagementTable===undefined){deletingJobsRefreshTimeout=null}}},{key:"openAutoStartDatafeedModal",value:function openAutoStartDatafeedModal(){var job=(0,_utils.checkForAutoStartDatafeed)();if(job!==undefined){this.showStartDatafeedModal([job])}}},{key:"refreshSelectedJobs",value:function refreshSelectedJobs(){var selectedJobsIds=this.state.selectedJobs.map((function(j){return j.id}));var filteredJobIds=this.state.filteredJobsSummaryList.map((function(j){return j.id}));var selectedJobs=this.state.jobsSummaryList.filter((function(j){return selectedJobsIds.find((function(id){return id===j.id}))})).filter((function(j){return filteredJobIds.find((function(id){return id===j.id}))}));this.setState({selectedJobs:selectedJobs})}},{key:"refreshJobSummaryList",value:function(){var _refreshJobSummaryList=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _this2=this;var forceRefresh,expandedJobsIds,jobs,fullJobsList,jobsSummaryList,filteredJobsSummaryList,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:forceRefresh=_args.length>0&&_args[0]!==undefined?_args[0]:false;if(!(forceRefresh===true||this.props.blockRefresh!==true)){_context.next=22;break}if(this.state.loading===null){this.setState({loading:true})}expandedJobsIds=Object.keys(this.state.itemIdToExpandedRowMap);_context.prev=4;_context.next=7;return _ml_api_service.ml.jobs.jobsSummary(expandedJobsIds);case 7:jobs=_context.sent;fullJobsList={};jobsSummaryList=jobs.map((function(job){if(job.fullJob!==undefined){fullJobsList[job.id]=job.fullJob;delete job.fullJob}job.latestTimestampSortValue=job.latestTimestampMs||0;return job}));filteredJobsSummaryList=(0,_utils.filterJobs)(jobsSummaryList,this.state.filterClauses);this.setState({jobsSummaryList:jobsSummaryList,filteredJobsSummaryList:filteredJobsSummaryList,fullJobsList:fullJobsList,loading:false},(function(){_this2.refreshSelectedJobs()}));Object.keys(this.updateFunctions).forEach((function(j){_this2.updateFunctions[j].setState({job:fullJobsList[j]})}));jobs.forEach((function(job){if(job.deleting&&_this2.state.itemIdToExpandedRowMap[job.id]){_this2.toggleRow(job.id)}}));this.isDoneRefreshing();if(jobsSummaryList.some((function(j){return j.deleting===true}))){this.checkDeletingJobTasks(forceRefresh)}_context.next=22;break;case 18:_context.prev=18;_context.t0=_context["catch"](4);console.error(_context.t0);this.setState({loading:false});case 22:case"end":return _context.stop()}}}),_callee,this,[[4,18]])})));function refreshJobSummaryList(){return _refreshJobSummaryList.apply(this,arguments)}return refreshJobSummaryList}()},{key:"checkDeletingJobTasks",value:function(){var _checkDeletingJobTasks=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _this3=this;var forceRefresh,_ref,taskJobIds,taskListHasChanged,_args2=arguments;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:forceRefresh=_args2.length>0&&_args2[0]!==undefined?_args2[0]:false;_context2.next=3;return _ml_api_service.ml.jobs.deletingJobTasks();case 3:_ref=_context2.sent;taskJobIds=_ref.jobIds;taskListHasChanged=(0,_lodash.isEqual)(taskJobIds.sort(),this.state.deletingJobIds.sort())===false;this.setState({deletingJobIds:taskJobIds});if(taskListHasChanged||forceRefresh){this.refreshJobSummaryList()}if(taskJobIds.length>0&&deletingJobsRefreshTimeout===null){deletingJobsRefreshTimeout=setTimeout((function(){deletingJobsRefreshTimeout=null;_this3.checkDeletingJobTasks()}),_jobs_list2.DELETING_JOBS_REFRESH_INTERVAL_MS)}case 9:case"end":return _context2.stop()}}}),_callee2,this)})));function checkDeletingJobTasks(){return _checkDeletingJobTasks.apply(this,arguments)}return checkDeletingJobTasks}()},{key:"renderManagementJobsListComponents",value:function renderManagementJobsListComponents(){var _this$state=this.state,isRefreshing=_this$state.isRefreshing,loading=_this$state.loading,itemIdToExpandedRowMap=_this$state.itemIdToExpandedRowMap,jobsSummaryList=_this$state.jobsSummaryList,filteredJobsSummaryList=_this$state.filteredJobsSummaryList,fullJobsList=_this$state.fullJobsList,selectedJobs=_this$state.selectedJobs;return _react.default.createElement("div",{className:"job-management","data-test-subj":"ml-jobs-list"},_react.default.createElement(_node_available_warning.NodeAvailableWarning,null),_react.default.createElement(_upgrade.UpgradeWarning,null),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_jobs_stats_bar.JobStatsBar,{jobsSummaryList:jobsSummaryList})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_refresh_jobs_list_button.RefreshJobsListButton,{onRefreshClick:this.onRefreshClick,isRefreshing:isRefreshing}))))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement("div",{className:"managementJobsList"},_react.default.createElement("div",null,_react.default.createElement(_job_filter_bar.JobFilterBar,{setFilters:this.setFilters})),_react.default.createElement(_jobs_list.JobsList,{jobsSummaryList:filteredJobsSummaryList,fullJobsList:fullJobsList,itemIdToExpandedRowMap:itemIdToExpandedRowMap,toggleRow:this.toggleRow,selectJobChange:this.selectJobChange,selectedJobsCount:selectedJobs.length,loading:loading,isManagementTable:true,isMlEnabledInSpace:this.props.isMlEnabledInSpace})))}},{key:"renderJobsListComponents",value:function renderJobsListComponents(){var _this4=this;var _this$state2=this.state,isRefreshing=_this$state2.isRefreshing,loading=_this$state2.loading,jobsSummaryList=_this$state2.jobsSummaryList;var jobIds=jobsSummaryList.map((function(j){return j.id}));return _react.default.createElement(_eui.EuiPage,{"data-test-subj":"ml-jobs-list"},_react.default.createElement(_eui.EuiPageBody,null,_react.default.createElement(_eui.EuiPageHeader,null,_react.default.createElement(_eui.EuiPageHeaderSection,null,_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h1",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.title",defaultMessage:"Anomaly detection jobs"}))))),_react.default.createElement(_node_available_warning.NodeAvailableWarning,null),_react.default.createElement(_upgrade.UpgradeWarning,null),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_jobs_stats_bar.JobStatsBar,{jobsSummaryList:jobsSummaryList})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_refresh_jobs_list_button.RefreshJobsListButton,{onRefreshClick:this.onRefreshClick,isRefreshing:isRefreshing})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_new_job_button.NewJobButton,null))))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement("div",null,_react.default.createElement("div",{className:"actions-bar"},_react.default.createElement(_multi_job_actions.MultiJobActions,{selectedJobs:this.state.selectedJobs,allJobIds:jobIds,showStartDatafeedModal:this.showStartDatafeedModal,showDeleteJobModal:this.showDeleteJobModal,refreshJobs:function refreshJobs(){return _this4.refreshJobSummaryList(true)}}),_react.default.createElement(_job_filter_bar.JobFilterBar,{setFilters:this.setFilters})),_react.default.createElement(_jobs_list.JobsList,{jobsSummaryList:this.state.filteredJobsSummaryList,fullJobsList:this.state.fullJobsList,itemIdToExpandedRowMap:this.state.itemIdToExpandedRowMap,toggleRow:this.toggleRow,selectJobChange:this.selectJobChange,showEditJobFlyout:this.showEditJobFlyout,showDeleteJobModal:this.showDeleteJobModal,showStartDatafeedModal:this.showStartDatafeedModal,refreshJobs:function refreshJobs(){return _this4.refreshJobSummaryList(true)},selectedJobsCount:this.state.selectedJobs.length,loading:loading}),_react.default.createElement(_edit_job_flyout.EditJobFlyout,{setShowFunction:this.setShowEditJobFlyoutFunction,unsetShowFunction:this.unsetShowEditJobFlyoutFunction,refreshJobs:function refreshJobs(){return _this4.refreshJobSummaryList(true)},allJobIds:jobIds}),_react.default.createElement(_delete_job_modal.DeleteJobModal,{setShowFunction:this.setShowDeleteJobModalFunction,unsetShowFunction:this.unsetShowDeleteJobModalFunction,refreshJobs:function refreshJobs(){return _this4.refreshJobSummaryList(true)}}),_react.default.createElement(_start_datafeed_modal.StartDatafeedModal,{setShowFunction:this.setShowStartDatafeedModalFunction,unsetShowFunction:this.unsetShowDeleteJobModalFunction,getShowCreateWatchFlyoutFunction:this.getShowCreateWatchFlyoutFunction,refreshJobs:function refreshJobs(){return _this4.refreshJobSummaryList(true)}}),_react.default.createElement(_create_watch_flyout.CreateWatchFlyout,{setShowFunction:this.setShowCreateWatchFlyoutFunction,unsetShowFunction:this.unsetShowCreateWatchFlyoutFunction}))))}},{key:"render",value:function render(){var isManagementTable=this.props.isManagementTable;return _react.default.createElement("div",null,!isManagementTable?this.renderJobsListComponents():this.renderManagementJobsListComponents())}}]);return JobsListView}(_react.Component);exports.JobsListView=JobsListView},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"JobsList",{enumerable:true,get:function get(){return _jobs_list.JobsList}});var _jobs_list=__webpack_require__(1029)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JobsList=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _lodash=__webpack_require__(49);var _moment=_interopRequireDefault(__webpack_require__(32));var _string_utils=__webpack_require__(80);var _job_actions=__webpack_require__(408);var _job_description=__webpack_require__(1031);var _job_message_icon=__webpack_require__(409);var _utils=__webpack_require__(111);var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(30);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PAGE_SIZE=10;var PAGE_SIZE_OPTIONS=[10,25,50];var TIME_FORMAT="YYYY-MM-DD HH:mm:ss";var JobsList=function(_Component){_inherits(JobsList,_Component);function JobsList(props){var _this;_classCallCheck(this,JobsList);_this=_possibleConstructorReturn(this,_getPrototypeOf(JobsList).call(this,props));_defineProperty(_assertThisInitialized(_this),"onTableChange",(function(_ref){var _ref$page=_ref.page,page=_ref$page===void 0?{}:_ref$page,_ref$sort=_ref.sort,sort=_ref$sort===void 0?{}:_ref$sort;var pageIndex=page.index,pageSize=page.size;var sortField=sort.field,sortDirection=sort.direction;_this.setState({pageIndex:pageIndex,pageSize:pageSize,sortField:sortField,sortDirection:sortDirection})}));_defineProperty(_assertThisInitialized(_this),"toggleRow",(function(item){_this.props.toggleRow(item.id)}));_this.state={jobsSummaryList:props.jobsSummaryList,pageIndex:0,pageSize:PAGE_SIZE,itemIdToExpandedRowMap:{},sortField:"id",sortDirection:"asc"};return _this}_createClass(JobsList,[{key:"getJobIdLink",value:function getJobIdLink(id){if(this.props.isMlEnabledInSpace===false){return id}return _react.default.createElement(_eui.EuiLink,{href:(0,_utils.getJobIdUrl)(id)},id)}},{key:"getPageOfJobs",value:function getPageOfJobs(index,size,sortField,sortDirection){var _this2=this;var list=this.state.jobsSummaryList;list=(0,_lodash.sortBy)(this.state.jobsSummaryList,(function(item){return item[sortField]}));list=sortDirection==="asc"?list:list.reverse();var listLength=list.length;var pageStart=index*size;if(pageStart>=listLength&&listLength!==0){pageStart=Math.floor((listLength-1)/size)*size;setTimeout((function(){_this2.setState({pageIndex:pageStart/size})}),0)}return{pageOfItems:list.slice(pageStart,pageStart+size),totalItemCount:listLength}}},{key:"render",value:function render(){var _this3=this;var _this$props=this.props,loading=_this$props.loading,isManagementTable=_this$props.isManagementTable;var selectionControls={selectable:function selectable(job){return job.deleting!==true},selectableMessage:function selectableMessage(selectable,rowItem){return selectable===false?_i18n.i18n.translate("xpack.ml.jobsList.cannotSelectRowForJobMessage",{defaultMessage:"Cannot select job ID {jobId}",values:{jobId:rowItem.id}}):_i18n.i18n.translate("xpack.ml.jobsList.selectRowForJobMessage",{defaultMessage:"Select the row for job ID {jobId}",values:{jobId:rowItem.id}})},onSelectionChange:this.props.selectJobChange};var columns=[{name:_react.default.createElement(_eui.EuiScreenReaderOnly,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.showDetailsColumn.screenReaderDescription",defaultMessage:"This column contains clickable controls for showing more details on each job"}))),render:function render(item){return _react.default.createElement(_eui.EuiButtonIcon,{onClick:function onClick(){return _this3.toggleRow(item)},isDisabled:item.deleting===true,iconType:_this3.state.itemIdToExpandedRowMap[item.id]?"arrowDown":"arrowRight","aria-label":_this3.state.itemIdToExpandedRowMap[item.id]?_i18n.i18n.translate("xpack.ml.jobsList.collapseJobDetailsAriaLabel",{defaultMessage:"Hide details for {itemId}",values:{itemId:item.id}}):_i18n.i18n.translate("xpack.ml.jobsList.expandJobDetailsAriaLabel",{defaultMessage:"Show details for {itemId}",values:{itemId:item.id}}),"data-row-id":item.id,"data-test-subj":"mlJobListRowDetailsToggle"})},width:"3%"},{field:"id","data-test-subj":"mlJobListColumnId",name:_i18n.i18n.translate("xpack.ml.jobsList.idLabel",{defaultMessage:"ID"}),sortable:true,truncateText:false,width:"20%",scope:"row",render:isManagementTable?function(id){return _this3.getJobIdLink(id)}:undefined},{field:"auditMessage",name:_react.default.createElement(_eui.EuiScreenReaderOnly,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.auditMessageColumn.screenReaderDescription",defaultMessage:"This column display icons when there are errors or warnings for the job in the past 24 hours"}))),render:function render(item){return _react.default.createElement(_job_message_icon.JobIcon,{message:item,showTooltip:true})}},{name:_i18n.i18n.translate("xpack.ml.jobsList.descriptionLabel",{defaultMessage:"Description"}),sortable:true,field:"description","data-test-subj":"mlJobListColumnDescription",render:function render(description,item){return _react.default.createElement(_job_description.JobDescription,{job:item})},textOnly:true,width:"20%"},{field:"processed_record_count","data-test-subj":"mlJobListColumnRecordCount",name:_i18n.i18n.translate("xpack.ml.jobsList.processedRecordsLabel",{defaultMessage:"Processed records"}),sortable:true,truncateText:false,dataType:"number",render:function render(count){return(0,_string_utils.toLocaleString)(count)},width:"10%"},{field:"memory_status","data-test-subj":"mlJobListColumnMemoryStatus",name:_i18n.i18n.translate("xpack.ml.jobsList.memoryStatusLabel",{defaultMessage:"Memory status"}),sortable:true,truncateText:false,width:"5%"},{field:"jobState","data-test-subj":"mlJobListColumnJobState",name:_i18n.i18n.translate("xpack.ml.jobsList.jobStateLabel",{defaultMessage:"Job state"}),sortable:true,truncateText:false,width:"8%"},{field:"datafeedState","data-test-subj":"mlJobListColumnDatafeedState",name:_i18n.i18n.translate("xpack.ml.jobsList.datafeedStateLabel",{defaultMessage:"Datafeed state"}),sortable:true,truncateText:false,width:"8%"},{name:_i18n.i18n.translate("xpack.ml.jobsList.actionsLabel",{defaultMessage:"Actions"}),render:function render(item){return _react.default.createElement(_job_actions.ResultLinks,{jobs:[item]})}}];if(isManagementTable===true){columns.splice(columns.length-1,0,{name:_i18n.i18n.translate("xpack.ml.jobsList.spacesLabel",{defaultMessage:"Spaces"}),render:function render(){return _react.default.createElement(_eui.EuiBadge,{color:"hollow"},"all")}});if(this.props.isMlEnabledInSpace===false){columns.pop()}}else{columns.splice(columns.length-1,0,{name:_i18n.i18n.translate("xpack.ml.jobsList.latestTimestampLabel",{defaultMessage:"Latest timestamp"}),truncateText:false,field:"latestTimestampSortValue","data-test-subj":"mlJobListColumnLatestTimestamp",sortable:true,render:function render(time,item){return _react.default.createElement("span",{className:"euiTableCellContent__text"},item.latestTimestampMs===undefined?"":(0,_moment.default)(item.latestTimestampMs).format(TIME_FORMAT))},textOnly:true,width:"15%"});columns.push({name:_react.default.createElement(_eui.EuiScreenReaderOnly,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.jobActionsColumn.screenReaderDescription",defaultMessage:"This column contains extra actions in a menu that can be performed on each job"}))),actions:(0,_job_actions.actionsMenuContent)(this.props.showEditJobFlyout,this.props.showDeleteJobModal,this.props.showStartDatafeedModal,this.props.refreshJobs)})}var _this$state=this.state,pageIndex=_this$state.pageIndex,pageSize=_this$state.pageSize,sortField=_this$state.sortField,sortDirection=_this$state.sortDirection;var _this$getPageOfJobs=this.getPageOfJobs(pageIndex,pageSize,sortField,sortDirection),pageOfItems=_this$getPageOfJobs.pageOfItems,totalItemCount=_this$getPageOfJobs.totalItemCount;var pagination={pageIndex:pageIndex,pageSize:pageSize,totalItemCount:totalItemCount,pageSizeOptions:PAGE_SIZE_OPTIONS};var sorting={sort:{field:sortField,direction:sortDirection}};var selectedJobsClass=this.props.selectedJobsCount?"jobs-selected":"";return _react.default.createElement(_eui.EuiBasicTable,{"data-test-subj":loading?"mlJobListTable loading":"mlJobListTable loaded",loading:loading===true,noItemsMessage:loading?_i18n.i18n.translate("xpack.ml.jobsList.loadingJobsLabel",{defaultMessage:"Loading jobs"}):_i18n.i18n.translate("xpack.ml.jobsList.noJobsFoundLabel",{defaultMessage:"No jobs found"}),itemId:"id",className:"jobs-list-table ".concat(selectedJobsClass),items:pageOfItems,columns:columns,pagination:pagination,onChange:this.onTableChange,selection:isManagementTable?undefined:selectionControls,itemIdToExpandedRowMap:this.state.itemIdToExpandedRowMap,isExpandable:true,sorting:sorting,hasActions:true,rowProps:function rowProps(item){return{"data-test-subj":"mlJobListRow row-".concat(item.id)}}})}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props){var itemIdToExpandedRowMap=props.itemIdToExpandedRowMap;var jobsSummaryList=props.jobsSummaryList;return{itemIdToExpandedRowMap:itemIdToExpandedRowMap,jobsSummaryList:jobsSummaryList}}}]);return JobsList}(_react.Component);exports.JobsList=JobsList;JobsList.propTypes={jobsSummaryList:_propTypes.default.array.isRequired,fullJobsList:_propTypes.default.object.isRequired,isManagementTable:_propTypes.default.bool,isMlEnabledInSpace:_propTypes.default.bool,itemIdToExpandedRowMap:_propTypes.default.object.isRequired,toggleRow:_propTypes.default.func.isRequired,selectJobChange:_propTypes.default.func.isRequired,showEditJobFlyout:_propTypes.default.func,showDeleteJobModal:_propTypes.default.func,showStartDatafeedModal:_propTypes.default.func,refreshJobs:_propTypes.default.func,selectedJobsCount:_propTypes.default.number.isRequired,loading:_propTypes.default.bool};JobsList.defaultProps={isManagementTable:false,isMlEnabledInSpace:true,loading:false}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.actionsMenuContent=actionsMenuContent;var _check_privilege=__webpack_require__(56);var _check_ml_nodes=__webpack_require__(81);var _index_utils=__webpack_require__(70);var _utils=__webpack_require__(111);var _i18n=__webpack_require__(1);function actionsMenuContent(showEditJobFlyout,showDeleteJobModal,showStartDatafeedModal,refreshJobs){var canCreateJob=(0,_check_privilege.checkPermission)("canCreateJob")&&(0,_check_ml_nodes.mlNodesAvailable)();var canUpdateJob=(0,_check_privilege.checkPermission)("canUpdateJob");var canDeleteJob=(0,_check_privilege.checkPermission)("canDeleteJob");var canUpdateDatafeed=(0,_check_privilege.checkPermission)("canUpdateDatafeed");var canStartStopDatafeed=(0,_check_privilege.checkPermission)("canStartStopDatafeed")&&(0,_check_ml_nodes.mlNodesAvailable)();var canCloseJob=(0,_check_privilege.checkPermission)("canCloseJob")&&(0,_check_ml_nodes.mlNodesAvailable)();return[{name:_i18n.i18n.translate("xpack.ml.jobsList.managementActions.startDatafeedLabel",{defaultMessage:"Start datafeed"}),description:_i18n.i18n.translate("xpack.ml.jobsList.managementActions.startDatafeedDescription",{defaultMessage:"Start datafeed"}),icon:"play",enabled:function enabled(item){return item.deleting!==true&&canStartStopDatafeed},available:function available(item){return(0,_utils.isStartable)([item])},onClick:function onClick(item){showStartDatafeedModal([item]);closeMenu()},"data-test-subj":"mlActionButtonStartDatafeed"},{name:_i18n.i18n.translate("xpack.ml.jobsList.managementActions.stopDatafeedLabel",{defaultMessage:"Stop datafeed"}),description:_i18n.i18n.translate("xpack.ml.jobsList.managementActions.stopDatafeedDescription",{defaultMessage:"Stop datafeed"}),icon:"stop",enabled:function enabled(item){return item.deleting!==true&&canStartStopDatafeed},available:function available(item){return(0,_utils.isStoppable)([item])},onClick:function onClick(item){(0,_utils.stopDatafeeds)([item],refreshJobs);closeMenu(true)},"data-test-subj":"mlActionButtonStopDatafeed"},{name:_i18n.i18n.translate("xpack.ml.jobsList.managementActions.closeJobLabel",{defaultMessage:"Close job"}),description:_i18n.i18n.translate("xpack.ml.jobsList.managementActions.closeJobDescription",{defaultMessage:"Close job"}),icon:"cross",enabled:function enabled(item){return item.deleting!==true&&canCloseJob},available:function available(item){return(0,_utils.isClosable)([item])},onClick:function onClick(item){(0,_utils.closeJobs)([item],refreshJobs);closeMenu(true)},"data-test-subj":"mlActionButtonCloseJob"},{name:_i18n.i18n.translate("xpack.ml.jobsList.managementActions.cloneJobLabel",{defaultMessage:"Clone job"}),description:_i18n.i18n.translate("xpack.ml.jobsList.managementActions.cloneJobDescription",{defaultMessage:"Clone job"}),icon:"copy",enabled:function enabled(item){var indexPatternNames=(0,_index_utils.getIndexPatternNames)();var jobIndicesAvailable=item.datafeedIndices.every((function(dfiName){return indexPatternNames.some((function(ipName){return ipName===dfiName}))}));return item.deleting!==true&&canCreateJob&&jobIndicesAvailable},onClick:function onClick(item){(0,_utils.cloneJob)(item.id);closeMenu(true)},"data-test-subj":"mlActionButtonCloneJob"},{name:_i18n.i18n.translate("xpack.ml.jobsList.managementActions.editJobLabel",{defaultMessage:"Edit job"}),description:_i18n.i18n.translate("xpack.ml.jobsList.managementActions.editJobDescription",{defaultMessage:"Edit job"}),icon:"pencil",enabled:function enabled(item){return item.deleting!==true&&canUpdateJob&&canUpdateDatafeed},onClick:function onClick(item){showEditJobFlyout(item);closeMenu()},"data-test-subj":"mlActionButtonEditJob"},{name:_i18n.i18n.translate("xpack.ml.jobsList.managementActions.deleteJobLabel",{defaultMessage:"Delete job"}),description:_i18n.i18n.translate("xpack.ml.jobsList.managementActions.deleteJobDescription",{defaultMessage:"Delete job"}),icon:"trash",color:"danger",enabled:function enabled(){return canDeleteJob},onClick:function onClick(item){showDeleteJobModal([item]);closeMenu()},"data-test-subj":"mlActionButtonDeleteJob"}]}function closeMenu(){var now=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(now){document.querySelector(".euiTable").click()}else{window.setTimeout((function(){var modalBody=document.querySelector(".euiModalBody");if(modalBody){modalBody.click()}else{document.querySelector(".euiTable").click()}}),500)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JobDescription=JobDescription;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireDefault(__webpack_require__(28));var _job_group=__webpack_require__(239);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function JobDescription(_ref){var job=_ref.job;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement("div",{className:"job-description"},job.description," ",job.groups.map((function(group){return _react.default.createElement(_job_group.JobGroup,{key:group,name:group})}))))}JobDescription.propTypes={job:_propTypes.default.object.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JobGroup=JobGroup;var _group_color_utils=__webpack_require__(151);var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireDefault(__webpack_require__(28));var _eui_theme_light=_interopRequireDefault(__webpack_require__(40));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function JobGroup(_ref){var name=_ref.name;return _react.default.createElement("div",{className:"inline-group","data-test-subj":"mlJobGroup",style:{backgroundColor:(0,_group_color_utils.tabColor)(name),display:"inline-block",padding:"2px 5px",borderRadius:"2px",fontSize:"12px",margin:"0px 3px",color:_eui_theme_light.default.euiColorEmptyShade}},name)}JobGroup.propTypes={name:_propTypes.default.string.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JobIcon=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var INFO="info",WARNING="warning",ERROR="error";var JobIcon=function JobIcon(_ref){var message=_ref.message,_ref$showTooltip=_ref.showTooltip,showTooltip=_ref$showTooltip===void 0?false:_ref$showTooltip;if(message===undefined){return _react.default.createElement("span",null)}var color="primary";var icon="alert";if(message.level===INFO){icon="iInCircle"}else if(message.level===WARNING){color="warning"}else if(message.level===ERROR){color="danger"}if(showTooltip){return _react.default.createElement(_eui.EuiToolTip,{position:"bottom",content:message.text},_react.default.createElement(_eui.EuiIcon,{type:icon,color:color}))}else{return _react.default.createElement(_eui.EuiIcon,{type:icon,color:color})}};exports.JobIcon=JobIcon},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"JobDetails",{enumerable:true,get:function get(){return _job_details.JobDetails}});var _job_details=__webpack_require__(1035)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JobDetails=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _extract_job_details=__webpack_require__(1036);var _json_tab=__webpack_require__(1038);var _datafeed_preview_tab=__webpack_require__(1049);var _annotations_table=__webpack_require__(240);var _annotation_flyout=__webpack_require__(243);var _forecasts_table=__webpack_require__(1053);var _job_details_pane=__webpack_require__(1055);var _job_messages_pane=__webpack_require__(1056);var _i18n=__webpack_require__(1);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var JobDetails=function(_Component){_inherits(JobDetails,_Component);function JobDetails(props){var _this;_classCallCheck(this,JobDetails);_this=_possibleConstructorReturn(this,_getPrototypeOf(JobDetails).call(this,props));_this.state={};if(_this.props.addYourself){_this.props.addYourself(props.jobId,_assertThisInitialized(_this))}return _this}_createClass(JobDetails,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.removeYourself(this.props.jobId)}},{key:"render",value:function render(){var job=this.state.job;if(job===undefined){return _react.default.createElement("div",{className:"job-loading-spinner","data-test-subj":"mlJobDetails loading"},_react.default.createElement(_eui.EuiLoadingSpinner,{size:"l"}))}else{var _extractJobDetails=(0,_extract_job_details.extractJobDetails)(job),general=_extractJobDetails.general,customUrl=_extractJobDetails.customUrl,node=_extractJobDetails.node,calendars=_extractJobDetails.calendars,detectors=_extractJobDetails.detectors,influencers=_extractJobDetails.influencers,analysisConfig=_extractJobDetails.analysisConfig,analysisLimits=_extractJobDetails.analysisLimits,dataDescription=_extractJobDetails.dataDescription,datafeed=_extractJobDetails.datafeed,counts=_extractJobDetails.counts,modelSizeStats=_extractJobDetails.modelSizeStats,datafeedTimingStats=_extractJobDetails.datafeedTimingStats;var showFullDetails=this.props.showFullDetails;var tabs=[{id:"job-settings","data-test-subj":"mlJobListTab-job-settings",name:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.tabs.jobSettingsLabel",{defaultMessage:"Job settings"}),content:_react.default.createElement(_job_details_pane.JobDetailsPane,{"data-test-subj":"mlJobDetails-job-settings",sections:[general,customUrl,node,calendars]}),time:job.open_time},{id:"job-config","data-test-subj":"mlJobListTab-job-config",name:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.tabs.jobConfigLabel",{defaultMessage:"Job config"}),content:_react.default.createElement(_job_details_pane.JobDetailsPane,{"data-test-subj":"mlJobDetails-job-config",sections:[detectors,influencers,analysisConfig,analysisLimits,dataDescription]})},{id:"counts","data-test-subj":"mlJobListTab-counts",name:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.tabs.countsLabel",{defaultMessage:"Counts"}),content:_react.default.createElement(_job_details_pane.JobDetailsPane,{"data-test-subj":"mlJobDetails-counts",sections:[counts,modelSizeStats]})},{id:"json","data-test-subj":"mlJobListTab-json",name:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.tabs.jsonLabel",{defaultMessage:"JSON"}),content:_react.default.createElement(_json_tab.JsonPane,{job:job})},{id:"job-messages","data-test-subj":"mlJobListTab-job-messages",name:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.tabs.jobMessagesLabel",{defaultMessage:"Job messages"}),content:_react.default.createElement(_job_messages_pane.JobMessagesPane,{jobId:job.job_id})}];if(showFullDetails){tabs.splice(2,0,{id:"datafeed","data-test-subj":"mlJobListTab-datafeed",name:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.tabs.datafeedLabel",{defaultMessage:"Datafeed"}),content:_react.default.createElement(_job_details_pane.JobDetailsPane,{"data-test-subj":"mlJobDetails-datafeed",sections:[datafeed,datafeedTimingStats]})});tabs.push({id:"datafeed-preview","data-test-subj":"mlJobListTab-datafeed-preview",name:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.tabs.datafeedPreviewLabel",{defaultMessage:"Datafeed preview"}),content:_react.default.createElement(_datafeed_preview_tab.DatafeedPreviewPane,{job:job})},{id:"forecasts","data-test-subj":"mlJobListTab-forecasts",name:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.tabs.forecastsLabel",{defaultMessage:"Forecasts"}),content:_react.default.createElement(_forecasts_table.ForecastsTable,{job:job})})}if(showFullDetails){tabs.push({id:"annotations","data-test-subj":"mlJobListTab-annotations",name:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.tabs.annotationsLabel",{defaultMessage:"Annotations"}),content:_react.default.createElement(_react.Fragment,null,_react.default.createElement(_annotations_table.AnnotationsTable,{jobs:[job],drillDown:true}),_react.default.createElement(_annotation_flyout.AnnotationFlyout,null))})}return _react.default.createElement("div",{className:"tab-contents","data-test-subj":"mlJobListRowDetails details-".concat(job.job_id)},_react.default.createElement(_eui.EuiTabbedContent,{tabs:tabs,initialSelectedTab:tabs[0],onTabClick:function onTabClick(){}}))}}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props){var job=props.job,loading=props.loading;return{job:job,loading:loading}}}]);return JobDetails}(_react.Component);exports.JobDetails=JobDetails;JobDetails.propTypes={jobId:_propTypes.default.string.isRequired,job:_propTypes.default.object,addYourself:_propTypes.default.func.isRequired,removeYourself:_propTypes.default.func.isRequired,showFullDetails:_propTypes.default.bool}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractJobDetails=extractJobDetails;var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);var _string_utils=__webpack_require__(80);var _format_values=__webpack_require__(1037);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function extractJobDetails(job){if(Object.keys(job).length===0){return{}}var general={id:"general",title:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.generalTitle",{defaultMessage:"General"}),position:"left",items:(0,_format_values.filterObjects)(job,true).map(_format_values.formatValues)};var customUrl={id:"customUrl",title:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.customUrlsTitle",{defaultMessage:"Custom URLs"}),position:"right",items:[]};if(job.custom_settings&&job.custom_settings.custom_urls){var _customUrl$items;(_customUrl$items=customUrl.items).push.apply(_customUrl$items,_toConsumableArray(job.custom_settings.custom_urls.map((function(cu){return[cu.url_name,cu.url_value,cu.time_range]}))))}var node={id:"node",title:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.nodeTitle",{defaultMessage:"Node"}),position:"right",items:[]};if(job.node){node.items.push(["name",job.node.name])}var calendars={id:"calendars",title:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.calendarsTitle",{defaultMessage:"Calendars"}),position:"right",items:[]};if(job.calendars){calendars.items=job.calendars.map((function(c){return["",_react.default.createElement(_eui.EuiLink,{href:"#/settings/calendars_list/edit_calendar/".concat(c,"?_g=()")},c)]}));var i=general.items.findIndex((function(item){return item[0]==="calendars"}));if(i>=0){general.items.splice(i,1)}}var detectors={id:"detectors",title:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.detectorsTitle",{defaultMessage:"Detectors"}),position:"left",items:[]};if(job.analysis_config&&job.analysis_config.detectors){var _detectors$items;(_detectors$items=detectors.items).push.apply(_detectors$items,_toConsumableArray(job.analysis_config.detectors.map((function(d){var stringifiedDtr=(0,_string_utils.detectorToString)(d);return[stringifiedDtr,stringifiedDtr!==d.detector_description?d.detector_description:""]}))))}var influencers={id:"influencers",title:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.influencersTitle",{defaultMessage:"Influencers"}),position:"left",items:job.analysis_config.influencers.map((function(i){return["",i]}))};var analysisConfig={id:"analysisConfig",title:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.analysisConfigTitle",{defaultMessage:"Analysis config"}),position:"left",items:(0,_format_values.filterObjects)(job.analysis_config)};var analysisLimits={id:"analysisLimits",title:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.analysisLimitsTitle",{defaultMessage:"Analysis limits"}),position:"left",items:(0,_format_values.filterObjects)(job.analysis_limits)};var dataDescription={id:"dataDescription",title:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.dataDescriptionTitle",{defaultMessage:"Data description"}),position:"right",items:(0,_format_values.filterObjects)(job.data_description)};var datafeed={id:"datafeed",title:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.datafeedTitle",{defaultMessage:"Datafeed"}),position:"left",items:(0,_format_values.filterObjects)(job.datafeed_config,true,true)};if(job.node){datafeed.items.push(["node",JSON.stringify(job.node)])}if(job.datafeed_config&&job.datafeed_config.timing_stats){var _i=datafeed.items.findIndex((function(item){return item[0]==="timing_stats"}));if(_i>=0){datafeed.items.splice(_i,1)}}var counts={id:"counts",title:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.countsTitle",{defaultMessage:"Counts"}),position:"left",items:(0,_format_values.filterObjects)(job.data_counts).map(_format_values.formatValues)};var modelSizeStats={id:"modelSizeStats",title:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.modelSizeStatsTitle",{defaultMessage:"Model size stats"}),position:"right",items:(0,_format_values.filterObjects)(job.model_size_stats).map(_format_values.formatValues)};var datafeedTimingStats={id:"datafeedTimingStats",title:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.datafeedTimingStatsTitle",{defaultMessage:"Timing stats"}),position:"right",items:job.datafeed_config&&job.datafeed_config.timing_stats?(0,_format_values.filterObjects)(job.datafeed_config.timing_stats).filter((function(o){return o[0]!=="total_search_time_ms"})).map(_format_values.formatValues):[]};return{general:general,customUrl:customUrl,node:node,calendars:calendars,detectors:detectors,influencers:influencers,analysisConfig:analysisConfig,analysisLimits:analysisLimits,dataDescription:dataDescription,datafeed:datafeed,counts:counts,modelSizeStats:modelSizeStats,datafeedTimingStats:datafeedTimingStats}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatValues=formatValues;exports.filterObjects=filterObjects;var _numeral=_interopRequireDefault(__webpack_require__(124));var _format=__webpack_require__(39);var _round_to_decimal_place=__webpack_require__(102);var _string_utils=__webpack_require__(80);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var TIME_FORMAT="YYYY-MM-DD HH:mm:ss";var DATA_FORMAT="0.0 b";function formatData(txt){return(0,_numeral.default)(txt).format(DATA_FORMAT)}function formatValues(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];switch(key){case"finished_time":case"create_time":case"log_time":case"timestamp":case"earliest_record_timestamp":case"latest_record_timestamp":case"last_data_time":case"latest_empty_bucket_timestamp":case"latest_sparse_bucket_timestamp":case"latest_bucket_timestamp":value=(0,_format.formatDate)(value,TIME_FORMAT);break;case"established_model_memory":case"input_bytes":case"model_bytes":case"model_bytes_exceeded":case"model_bytes_memory_limit":value=formatData(value);break;case"processed_record_count":case"processed_field_count":case"input_field_count":case"invalid_date_count":case"missing_field_count":case"out_of_order_timestamp_count":case"empty_bucket_count":case"sparse_bucket_count":case"bucket_count":case"input_record_count":case"total_by_field_count":case"total_over_field_count":case"total_partition_field_count":case"bucket_allocation_failures_count":case"search_count":value=(0,_string_utils.toLocaleString)(value);break;case"average_search_time_per_bucket_ms":case"exponential_average_search_time_per_hour_ms":value=typeof value==="number"?(0,_round_to_decimal_place.roundToDecimalPlace)(value,3).toLocaleString():value;break;default:break}return[key,value]}function filterObjects(obj,allowArrays,allowObjects){return Object.keys(obj).filter((function(k){return allowObjects||_typeof(obj[k])!=="object"||allowArrays&&Array.isArray(obj[k])})).map((function(k){var item=obj[k];if(Array.isArray(item)){item=item.join(", ")}else if(_typeof(obj[k])==="object"){item=JSON.stringify(item)}return[k,item]}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JsonPane=JsonPane;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);var _ml_job_editor=__webpack_require__(103);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function JsonPane(_ref){var job=_ref.job;var json=JSON.stringify(job,null,2);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_ml_job_editor.MLJobEditor,{value:json,readOnly:true,mode:_ml_job_editor.ML_EDITOR_MODE.XJSON}))}JsonPane.propTypes={job:_propTypes.default.object.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MLJobEditor=exports.ML_EDITOR_MODE=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);var _shared_imports=__webpack_require__(194);var _custom_hooks=__webpack_require__(196);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ML_EDITOR_MODE={TEXT:"text",JSON:"json",XJSON:_custom_hooks.xJsonMode};exports.ML_EDITOR_MODE=ML_EDITOR_MODE;var MLJobEditor=function MLJobEditor(_ref){var value=_ref.value,_ref$height=_ref.height,height=_ref$height===void 0?"500px":_ref$height,_ref$width=_ref.width,width=_ref$width===void 0?"100%":_ref$width,_ref$mode=_ref.mode,mode=_ref$mode===void 0?ML_EDITOR_MODE.JSON:_ref$mode,_ref$readOnly=_ref.readOnly,readOnly=_ref$readOnly===void 0?false:_ref$readOnly,_ref$syntaxChecking=_ref.syntaxChecking,syntaxChecking=_ref$syntaxChecking===void 0?true:_ref$syntaxChecking,_ref$theme=_ref.theme,theme=_ref$theme===void 0?"textmate":_ref$theme,_ref$onChange=_ref.onChange,onChange=_ref$onChange===void 0?function(){}:_ref$onChange;if(mode===ML_EDITOR_MODE.XJSON){value=(0,_shared_imports.expandLiteralStrings)(value)}return _react.default.createElement(_eui.EuiCodeEditor,{value:value,width:width,height:height,mode:mode,readOnly:readOnly,wrapEnabled:true,showPrintMargin:false,theme:theme,editorProps:{$blockScrolling:true},setOptions:{useWorker:syntaxChecking,tabSize:2,useSoftTabs:true},onChange:onChange})};exports.MLJobEditor=MLJobEditor},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.XJsonMode=XJsonMode;var _brace=_interopRequireDefault(__webpack_require__(195));var _index=__webpack_require__(1041);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var oop=_brace.default.acequire("ace/lib/oop");var _brace$default$acequi=_brace.default.acequire("ace/mode/json"),JSONMode=_brace$default$acequi.Mode;var _brace$default$acequi2=_brace.default.acequire("ace/tokenizer"),AceTokenizer=_brace$default$acequi2.Tokenizer;var _brace$default$acequi3=_brace.default.acequire("ace/mode/matching_brace_outdent"),MatchingBraceOutdent=_brace$default$acequi3.MatchingBraceOutdent;var _brace$default$acequi4=_brace.default.acequire("ace/mode/behaviour/cstyle"),CstyleBehaviour=_brace$default$acequi4.CstyleBehaviour;var _brace$default$acequi5=_brace.default.acequire("ace/mode/folding/cstyle"),CStyleFoldMode=_brace$default$acequi5.FoldMode;function XJsonMode(){var ruleset=new _index.XJsonHighlightRules;ruleset.normalizeRules();this.$tokenizer=new AceTokenizer(ruleset.getRules());this.$outdent=new MatchingBraceOutdent;this.$behaviour=new CstyleBehaviour;this.foldingRules=new CStyleFoldMode}oop.inherits(XJsonMode,JSONMode)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ElasticsearchSqlHighlightRules",{enumerable:true,get:function get(){return _lexer_rules.ElasticsearchSqlHighlightRules}});Object.defineProperty(exports,"ScriptHighlightRules",{enumerable:true,get:function get(){return _lexer_rules.ScriptHighlightRules}});Object.defineProperty(exports,"XJsonHighlightRules",{enumerable:true,get:function get(){return _lexer_rules.XJsonHighlightRules}});Object.defineProperty(exports,"addXJsonToRules",{enumerable:true,get:function get(){return _lexer_rules.addXJsonToRules}});Object.defineProperty(exports,"XJsonMode",{enumerable:true,get:function get(){return _x_json.XJsonMode}});Object.defineProperty(exports,"installXJsonMode",{enumerable:true,get:function get(){return _x_json.installXJsonMode}});var _lexer_rules=__webpack_require__(1042);var _x_json=__webpack_require__(410)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ElasticsearchSqlHighlightRules",{enumerable:true,get:function get(){return _elasticsearch_sql_highlight_rules.ElasticsearchSqlHighlightRules}});Object.defineProperty(exports,"ScriptHighlightRules",{enumerable:true,get:function get(){return _script_highlight_rules.ScriptHighlightRules}});Object.defineProperty(exports,"XJsonHighlightRules",{enumerable:true,get:function get(){return _x_json_highlight_rules.XJsonHighlightRules}});Object.defineProperty(exports,"addXJsonToRules",{enumerable:true,get:function get(){return _x_json_highlight_rules.addToRules}});var _elasticsearch_sql_highlight_rules=__webpack_require__(411);var _script_highlight_rules=__webpack_require__(412);var _x_json_highlight_rules=__webpack_require__(1043)},function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}Object.defineProperty(exports,"__esModule",{value:true});exports.XJsonHighlightRules=XJsonHighlightRules;exports.addToRules=addToRules;var _=_interopRequireWildcard(__webpack_require__(49));var _brace=_interopRequireDefault(__webpack_require__(195));__webpack_require__(1044);var _elasticsearch_sql_highlight_rules=__webpack_require__(411);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var _require=__webpack_require__(412),ScriptHighlightRules=_require.ScriptHighlightRules;var _brace$default$acequi=_brace.default.acequire("ace/mode/json_highlight_rules"),JsonHighlightRules=_brace$default$acequi.JsonHighlightRules;var oop=_brace.default.acequire("ace/lib/oop");var jsonRules=function jsonRules(root){root=root?root:"json";var rules={};var xJsonRules=[{token:["variable","whitespace","ace.punctuation.colon","whitespace","punctuation.start_triple_quote"],regex:'("(?:[^"]*_)?script"|"inline"|"source")(\\s*?)(:)(\\s*?)(""")',next:"script-start",merge:false,push:true},{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"punctuation.start_triple_quote",regex:'"""',next:"string_literal",merge:false,push:true},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"invalid.illegal",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"invalid.illegal",regex:"\\/\\/.*$"},{token:"paren.lparen",merge:false,regex:"{",next:root,push:true},{token:"paren.lparen",merge:false,regex:"[[(]"},{token:"paren.rparen",merge:false,regex:"[\\])]"},{token:"paren.rparen",regex:"}",merge:false,next:"pop"},{token:"punctuation.comma",regex:","},{token:"punctuation.colon",regex:":"},{token:"whitespace",regex:"\\s+"},{token:"text",regex:".+?"}];rules[root]=xJsonRules;rules[root+"-sql"]=[{token:["variable","whitespace","ace.punctuation.colon","whitespace","punctuation.start_triple_quote"],regex:'("query")(\\s*?)(:)(\\s*?)(""")',next:"sql-start",merge:false,push:true}].concat(xJsonRules);rules.string_literal=[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"},{token:"multi_string",regex:"."}];return rules};function XJsonHighlightRules(){this.$rules=_objectSpread({},jsonRules("start"));this.embedRules(ScriptHighlightRules,"script-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}]);this.embedRules(_elasticsearch_sql_highlight_rules.ElasticsearchSqlHighlightRules,"sql-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}])}oop.inherits(XJsonHighlightRules,JsonHighlightRules);function addToRules(otherRules,embedUnder){otherRules.$rules=_.defaultsDeep(otherRules.$rules,jsonRules(embedUnder));otherRules.embedRules(ScriptHighlightRules,"script-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}]);otherRules.embedRules(_elasticsearch_sql_highlight_rules.ElasticsearchSqlHighlightRules,"sql-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}])}},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"collapseLiteralStrings",{enumerable:true,get:function get(){return _json_xjson_translation_tools.collapseLiteralStrings}});Object.defineProperty(exports,"expandLiteralStrings",{enumerable:true,get:function get(){return _json_xjson_translation_tools.expandLiteralStrings}});var _json_xjson_translation_tools=__webpack_require__(413)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.usePartialState=usePartialState;var _react=__webpack_require__(28);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function usePartialState(initialValue){var _useState=(0,_react.useState)(initialValue),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var setFormStateCallback=function setFormStateCallback(update){setState(_objectSpread({},state,{},update))};return[state,setFormStateCallback]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useXJsonMode=exports.xJsonMode=void 0;var _react=__webpack_require__(28);var _shared_imports=__webpack_require__(194);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var xJsonMode=new _shared_imports.XJsonMode;exports.xJsonMode=xJsonMode;var useXJsonMode=function useXJsonMode(json){var _useState=(0,_react.useState)((0,_shared_imports.expandLiteralStrings)(json)),_useState2=_slicedToArray(_useState,2),xJson=_useState2[0],setXJson=_useState2[1];return{xJson:xJson,setXJson:setXJson,xJsonMode:xJsonMode,convertToJson:_shared_imports.collapseLiteralStrings}};exports.useXJsonMode=useXJsonMode},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DatafeedPreviewPane=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _job_service=__webpack_require__(58);var _check_privilege=__webpack_require__(56);var _job_utils=__webpack_require__(59);var _ml_job_editor=__webpack_require__(103);var _react2=__webpack_require__(30);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var DatafeedPreviewPane=function(_Component){_inherits(DatafeedPreviewPane,_Component);function DatafeedPreviewPane(props){var _this;_classCallCheck(this,DatafeedPreviewPane);_this=_possibleConstructorReturn(this,_getPrototypeOf(DatafeedPreviewPane).call(this,props));_this.state={previewJson:"",loading:true,canPreviewDatafeed:true};return _this}_createClass(DatafeedPreviewPane,[{key:"renderContent",value:function renderContent(){var _this$state=this.state,previewJson=_this$state.previewJson,loading=_this$state.loading,canPreviewDatafeed=_this$state.canPreviewDatafeed;if(canPreviewDatafeed===false){return _react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.jobDetails.noPermissionToViewDatafeedPreviewTitle",defaultMessage:"You do not have permission to view the datafeed preview"}),color:"warning",iconType:"alert"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.jobDetails.pleaseContactYourAdministratorLabel",defaultMessage:"Please contact your administrator"})))}else if(loading===true){return _react.default.createElement(_eui.EuiLoadingSpinner,{size:"xl"})}else{return _react.default.createElement(_ml_job_editor.MLJobEditor,{value:previewJson,readOnly:true})}}},{key:"componentDidMount",value:function componentDidMount(){var _this2=this;var canPreviewDatafeed=(0,_check_privilege.checkPermission)("canPreviewDatafeed")&&this.props.job.datafeed_config!==undefined;this.setState({canPreviewDatafeed:canPreviewDatafeed});updateDatafeedPreview(this.props.job,canPreviewDatafeed).then((function(previewJson){_this2.setState({previewJson:previewJson,loading:false})})).catch((function(error){console.log("Datafeed preview could not be loaded",error);_this2.setState({loading:false})}))}},{key:"render",value:function render(){return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),this.renderContent())}}]);return DatafeedPreviewPane}(_react.Component);exports.DatafeedPreviewPane=DatafeedPreviewPane;DatafeedPreviewPane.propTypes={job:_propTypes.default.object.isRequired};function updateDatafeedPreview(job,canPreviewDatafeed){return new Promise((function(resolve,reject){if(canPreviewDatafeed){_job_service.mlJobService.getDatafeedPreview(job.datafeed_config.datafeed_id).then((function(resp){if(Array.isArray(resp)){resolve(JSON.stringify(resp.slice(0,_job_utils.ML_DATA_PREVIEW_COUNT),null,2))}else{resolve("");console.log("Datafeed preview could not be loaded",resp)}})).catch((function(error){reject(error)}))}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AnnotationsTable=void 0;var _lodash=_interopRequireDefault(__webpack_require__(49));var _propTypes=_interopRequireDefault(__webpack_require__(50));var _risonNode=_interopRequireDefault(__webpack_require__(100));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(30);var _services=__webpack_require__(43);var _format=__webpack_require__(39);var _recently_accessed=__webpack_require__(241);var _ml_api_service=__webpack_require__(51);var _job_service=__webpack_require__(58);var _table_service=__webpack_require__(242);var _search=__webpack_require__(99);var _job_utils=__webpack_require__(59);var _annotations_service=__webpack_require__(159);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TIME_FORMAT="YYYY-MM-DD HH:mm:ss";var AnnotationsTable=function(_Component){_inherits(AnnotationsTable,_Component);function AnnotationsTable(props){var _this;_classCallCheck(this,AnnotationsTable);_this=_possibleConstructorReturn(this,_getPrototypeOf(AnnotationsTable).call(this,props));_defineProperty(_assertThisInitialized(_this),"annotationsRefreshSubscription",null);_defineProperty(_assertThisInitialized(_this),"previousJobId",undefined);_defineProperty(_assertThisInitialized(_this),"openSingleMetricView",(function(){var annotation=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var job=_this.getJob(annotation.job_id);var dataCounts=job.data_counts;var resultLatest=(0,_job_utils.getLatestDataOrBucketTimestamp)(dataCounts.latest_record_timestamp,dataCounts.latest_bucket_timestamp);var from=new Date(dataCounts.earliest_record_timestamp).toISOString();var to=new Date(resultLatest).toISOString();var globalSettings={ml:{jobIds:[job.job_id]},refreshInterval:{display:"Off",pause:false,value:0},time:{from:from,to:to,mode:"absolute"}};var appState={query:{query_string:{analyze_wildcard:true,query:"*"}}};if(annotation.timestamp!==undefined&&annotation.end_timestamp!==undefined){appState.mlTimeSeriesExplorer={zoom:{from:new Date(annotation.timestamp).toISOString(),to:new Date(annotation.end_timestamp).toISOString()}};if(annotation.timestamp<dataCounts.earliest_record_timestamp){globalSettings.time.from=new Date(annotation.timestamp).toISOString()}if(annotation.end_timestamp>dataCounts.latest_record_timestamp){globalSettings.time.to=new Date(annotation.end_timestamp).toISOString()}}var _g=_risonNode.default.encode(globalSettings);var _a=_risonNode.default.encode(appState);var url="?_g=".concat(_g,"&_a=").concat(_a);(0,_recently_accessed.addItemToRecentlyAccessed)("timeseriesexplorer",job.job_id,url);window.open("#/timeseriesexplorer".concat(url),"_self")}));_defineProperty(_assertThisInitialized(_this),"onMouseOverRow",(function(record){if(_this.mouseOverRecord!==undefined){if(_this.mouseOverRecord.rowId!==record.rowId){_table_service.mlTableService.rowMouseleave$.next({record:_this.mouseOverRecord,type:"annotation"});_table_service.mlTableService.rowMouseenter$.next({record:record,type:"annotation"})}}else{_table_service.mlTableService.rowMouseenter$.next({record:record,type:"annotation"})}_this.mouseOverRecord=record}));_defineProperty(_assertThisInitialized(_this),"onMouseLeaveRow",(function(){if(_this.mouseOverRecord!==undefined){_table_service.mlTableService.rowMouseleave$.next({record:_this.mouseOverRecord,type:"annotation"});_this.mouseOverRecord=undefined}}));_this.state={annotations:[],isLoading:false,jobId:Array.isArray(_this.props.jobs)&&_this.props.jobs.length>0&&_this.props.jobs[0]!==undefined?_this.props.jobs[0].job_id:undefined};return _this}_createClass(AnnotationsTable,[{key:"getAnnotations",value:function getAnnotations(){var _this2=this;var job=this.props.jobs[0];var dataCounts=job.data_counts;this.setState({isLoading:true});if(dataCounts.processed_record_count>0){_ml_api_service.ml.annotations.getAnnotations({jobIds:[job.job_id],earliestMs:null,latestMs:null,maxAnnotations:_search.ANNOTATIONS_TABLE_DEFAULT_QUERY_SIZE}).toPromise().then((function(resp){_this2.setState((function(prevState,props){return{annotations:resp.annotations[props.jobs[0].job_id]||[],errorMessage:undefined,isLoading:false,jobId:props.jobs[0].job_id}}))})).catch((function(resp){console.log("Error loading list of annotations for jobs list:",resp);_this2.setState({annotations:[],errorMessage:"Error loading the list of annotations for this job",isLoading:false,jobId:undefined})}))}}},{key:"getJob",value:function getJob(jobId){if(Array.isArray(this.props.jobs)&&this.props.jobs.length>0){var job=this.props.jobs[0];if(jobId===undefined||job.job_id===jobId){return job}}return _job_service.mlJobService.getJob(jobId)}},{key:"componentDidMount",value:function componentDidMount(){var _this3=this;if(this.props.annotations===undefined&&Array.isArray(this.props.jobs)&&this.props.jobs.length>0){this.annotationsRefreshSubscription=_annotations_service.annotationsRefresh$.subscribe((function(){return _this3.getAnnotations()}));(0,_annotations_service.annotationsRefreshed)()}}},{key:"componentDidUpdate",value:function componentDidUpdate(){if(Array.isArray(this.props.jobs)&&this.props.jobs.length>0&&this.previousJobId!==this.props.jobs[0].job_id&&this.props.annotations===undefined&&this.state.isLoading===false&&this.state.jobId!==this.props.jobs[0].job_id){(0,_annotations_service.annotationsRefreshed)();this.previousJobId=this.props.jobs[0].job_id}}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.annotationsRefreshSubscription!==null){this.annotationsRefreshSubscription.unsubscribe()}}},{key:"render",value:function render(){var _this4=this;var _this$props=this.props,_this$props$isSingleM=_this$props.isSingleMetricViewerLinkVisible,isSingleMetricViewerLinkVisible=_this$props$isSingleM===void 0?true:_this$props$isSingleM,_this$props$isNumberB=_this$props.isNumberBadgeVisible,isNumberBadgeVisible=_this$props$isNumberB===void 0?false:_this$props$isNumberB;if(this.props.annotations===undefined){if(this.state.isLoading===true){return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceAround"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiLoadingSpinner,{size:"l"})))}if(this.state.errorMessage!==undefined){return _react.default.createElement(_eui.EuiCallOut,{title:this.state.errorMessage,color:"danger",iconType:"cross"})}}var annotations=this.props.annotations||this.state.annotations;if(annotations.length===0){return _react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.annotationsTable.annotationsNotCreatedTitle",defaultMessage:"No annotations created for this job"}),iconType:"iInCircle",role:"alert"},this.state.jobId&&(0,_job_utils.isTimeSeriesViewJob)(this.getJob(this.state.jobId))&&_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.annotationsTable.howToCreateAnnotationDescription",defaultMessage:"To create an annotation, open the {linkToSingleMetricView}",values:{linkToSingleMetricView:_react.default.createElement(_eui.EuiLink,{onClick:function onClick(){return _this4.openSingleMetricView()}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.annotationsTable.howToCreateAnnotationDescription.singleMetricViewerLinkText",defaultMessage:"Single Metric Viewer"}))}})))}function renderDate(date){return(0,_format.formatDate)(date,TIME_FORMAT)}var columns=[{field:"annotation",name:_i18n.i18n.translate("xpack.ml.annotationsTable.annotationColumnName",{defaultMessage:"Annotation"}),sortable:true,width:"50%",scope:"row"},{field:"timestamp",name:_i18n.i18n.translate("xpack.ml.annotationsTable.fromColumnName",{defaultMessage:"From"}),dataType:"date",render:renderDate,sortable:true},{field:"end_timestamp",name:_i18n.i18n.translate("xpack.ml.annotationsTable.toColumnName",{defaultMessage:"To"}),dataType:"date",render:renderDate,sortable:true},{field:"modified_time",name:_i18n.i18n.translate("xpack.ml.annotationsTable.lastModifiedDateColumnName",{defaultMessage:"Last modified date"}),dataType:"date",render:renderDate,sortable:true},{field:"modified_username",name:_i18n.i18n.translate("xpack.ml.annotationsTable.lastModifiedByColumnName",{defaultMessage:"Last modified by"}),sortable:true}];var jobIds=_lodash.default.uniq(annotations.map((function(a){return a.job_id})));if(jobIds.length>1){columns.unshift({field:"job_id",name:_i18n.i18n.translate("xpack.ml.annotationsTable.jobIdColumnName",{defaultMessage:"job ID"}),sortable:true})}if(isNumberBadgeVisible){columns.unshift({field:"key",name:_i18n.i18n.translate("xpack.ml.annotationsTable.labelColumnName",{defaultMessage:"Label"}),sortable:true,width:"60px",render:function render(key){return _react.default.createElement(_eui.EuiBadge,{color:"default"},key)}})}var actions=[];actions.push({render:function render(annotation){var editAnnotationsTooltipText=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.annotationsTable.editAnnotationsTooltip",defaultMessage:"Edit annotation"});var editAnnotationsTooltipAriaLabelText=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.annotationsTable.editAnnotationsTooltipAriaLabel",defaultMessage:"Edit annotation"});return _react.default.createElement(_eui.EuiToolTip,{position:"bottom",content:editAnnotationsTooltipText},_react.default.createElement(_eui.EuiButtonIcon,{onClick:function onClick(){return _annotations_service.annotation$.next(annotation)},iconType:"pencil","aria-label":editAnnotationsTooltipAriaLabelText}))}});if(isSingleMetricViewerLinkVisible){actions.push({render:function render(annotation){var isDrillDownAvailable=(0,_job_utils.isTimeSeriesViewJob)(_this4.getJob(annotation.job_id));var openInSingleMetricViewerTooltipText=isDrillDownAvailable?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.annotationsTable.openInSingleMetricViewerTooltip",defaultMessage:"Open in Single Metric Viewer"}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.annotationsTable.jobConfigurationNotSupportedInSingleMetricViewerTooltip",defaultMessage:"Job configuration not supported in Single Metric Viewer"});var openInSingleMetricViewerAriaLabelText=isDrillDownAvailable?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.annotationsTable.openInSingleMetricViewerAriaLabel",defaultMessage:"Open in Single Metric Viewer"}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.annotationsTable.jobConfigurationNotSupportedInSingleMetricViewerAriaLabel",defaultMessage:"Job configuration not supported in Single Metric Viewer"});return _react.default.createElement(_eui.EuiToolTip,{position:"bottom",content:openInSingleMetricViewerTooltipText},_react.default.createElement(_eui.EuiButtonIcon,{onClick:function onClick(){return _this4.openSingleMetricView(annotation)},disabled:!isDrillDownAvailable,iconType:"stats","aria-label":openInSingleMetricViewerAriaLabelText}))}})}columns.push({align:_services.RIGHT_ALIGNMENT,width:"60px",name:_i18n.i18n.translate("xpack.ml.annotationsTable.actionsColumnName",{defaultMessage:"Actions"}),actions:actions});var getRowProps=function getRowProps(item){return{onMouseOver:function onMouseOver(){return _this4.onMouseOverRow(item)},onMouseLeave:function onMouseLeave(){return _this4.onMouseLeaveRow()}}};return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiInMemoryTable,{className:"eui-textOverflowWrap",compressed:true,items:annotations,columns:columns,pagination:{pageSizeOptions:[5,10,25]},sorting:{sort:{field:"timestamp",direction:"asc"}},rowProps:getRowProps}))}}]);return AnnotationsTable}(_react.Component);exports.AnnotationsTable=AnnotationsTable;_defineProperty(AnnotationsTable,"propTypes",{annotations:_propTypes.default.array,jobs:_propTypes.default.array,isSingleMetricViewerLinkVisible:_propTypes.default.bool,isNumberBadgeVisible:_propTypes.default.bool})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AnnotationDescriptionList=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);var _date_utils=__webpack_require__(83);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AnnotationDescriptionList=function AnnotationDescriptionList(_ref){var annotation=_ref.annotation;var listItems=[{title:_i18n.i18n.translate("xpack.ml.timeSeriesExplorer.annotationDescriptionList.jobIdTitle",{defaultMessage:"Job ID"}),description:annotation.job_id},{title:_i18n.i18n.translate("xpack.ml.timeSeriesExplorer.annotationDescriptionList.startTitle",{defaultMessage:"Start"}),description:(0,_date_utils.formatHumanReadableDateTimeSeconds)(annotation.timestamp)}];if(annotation.end_timestamp!==undefined){listItems.push({title:_i18n.i18n.translate("xpack.ml.timeSeriesExplorer.annotationDescriptionList.endTitle",{defaultMessage:"End"}),description:(0,_date_utils.formatHumanReadableDateTimeSeconds)(annotation.end_timestamp)})}if(annotation.create_time!==undefined&&annotation.modified_time!==undefined){listItems.push({title:_i18n.i18n.translate("xpack.ml.timeSeriesExplorer.annotationDescriptionList.createdTitle",{defaultMessage:"Created"}),description:(0,_date_utils.formatHumanReadableDateTimeSeconds)(annotation.create_time)});listItems.push({title:_i18n.i18n.translate("xpack.ml.timeSeriesExplorer.annotationDescriptionList.createdByTitle",{defaultMessage:"Created by"}),description:annotation.create_username});listItems.push({title:_i18n.i18n.translate("xpack.ml.timeSeriesExplorer.annotationDescriptionList.lastModifiedTitle",{defaultMessage:"Last modified"}),description:(0,_date_utils.formatHumanReadableDateTimeSeconds)(annotation.modified_time)});listItems.push({title:_i18n.i18n.translate("xpack.ml.timeSeriesExplorer.annotationDescriptionList.modifiedByTitle",{defaultMessage:"Modified by"}),description:annotation.modified_username})}return _react.default.createElement(_eui.EuiDescriptionList,{className:"ml-annotation-description-list",type:"column",listItems:listItems})};exports.AnnotationDescriptionList=AnnotationDescriptionList},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DeleteAnnotationModal=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _react2=__webpack_require__(30);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DeleteAnnotationModal=function DeleteAnnotationModal(_ref){var cancelAction=_ref.cancelAction,deleteAction=_ref.deleteAction,isVisible=_ref.isVisible;return _react.default.createElement(_react.Fragment,null,isVisible===true&&_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.deleteAnnotationModal.deleteAnnotationTitle",defaultMessage:"Delete this annotation?"}),onCancel:cancelAction,onConfirm:deleteAction,cancelButtonText:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.deleteAnnotationModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.deleteAnnotationModal.deleteButtonLabel",defaultMessage:"Delete"}),buttonColor:"danger",defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON,className:"eui-textBreakWord"})))};exports.DeleteAnnotationModal=DeleteAnnotationModal;DeleteAnnotationModal.propTypes={cancelAction:_propTypes.default.func.isRequired,deleteAction:_propTypes.default.func.isRequired,isVisible:_propTypes.default.bool.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ForecastsTable",{enumerable:true,get:function get(){return _forecasts_table.ForecastsTable}});var _forecasts_table=__webpack_require__(1054)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ForecastsTable=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _risonNode=_interopRequireDefault(__webpack_require__(100));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _format=__webpack_require__(39);var _states=__webpack_require__(108);var _recently_accessed=__webpack_require__(241);var _forecast_service=__webpack_require__(160);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(30);var _job_utils=__webpack_require__(59);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var MAX_FORECASTS=500;var TIME_FORMAT="YYYY-MM-DD HH:mm:ss";var ForecastsTable=function(_Component){_inherits(ForecastsTable,_Component);function ForecastsTable(props){var _this;_classCallCheck(this,ForecastsTable);_this=_possibleConstructorReturn(this,_getPrototypeOf(ForecastsTable).call(this,props));_this.state={isLoading:props.job.data_counts.processed_record_count!==0,forecasts:[]};return _this}_createClass(ForecastsTable,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;var dataCounts=this.props.job.data_counts;if(dataCounts.processed_record_count>0){_forecast_service.mlForecastService.getForecastsSummary(this.props.job,null,dataCounts.earliest_record_timestamp,MAX_FORECASTS).then((function(resp){_this2.setState({isLoading:false,forecasts:resp.forecasts})})).catch((function(resp){console.log("Error loading list of forecasts for jobs list:",resp);_this2.setState({isLoading:false,errorMessage:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.forecastsTable.loadingErrorMessage",{defaultMessage:"Error loading the list of forecasts run on this job"}),forecasts:[]})}))}}},{key:"openSingleMetricView",value:function openSingleMetricView(forecast){var dataCounts=this.props.job.data_counts;var jobEarliest=dataCounts.earliest_record_timestamp;var resultLatest=(0,_job_utils.getLatestDataOrBucketTimestamp)(dataCounts.latest_record_timestamp,dataCounts.latest_bucket_timestamp);var from=new Date(dataCounts.earliest_record_timestamp).toISOString();var to=forecast!==undefined?new Date(forecast.forecast_end_timestamp).toISOString():new Date(resultLatest).toISOString();var _g=_risonNode.default.encode({ml:{jobIds:[this.props.job.job_id]},refreshInterval:{display:"Off",pause:false,value:0},time:{from:from,to:to,mode:"absolute"}});var appState={query:{query_string:{analyze_wildcard:true,query:"*"}}};if(forecast!==undefined){var forecastDurationMs=forecast.forecast_end_timestamp-forecast.forecast_start_timestamp;var zoomFrom=Math.max(forecast.forecast_start_timestamp-forecastDurationMs,jobEarliest);appState.mlTimeSeriesExplorer={forecastId:forecast.forecast_id,zoom:{from:new Date(zoomFrom).toISOString(),to:new Date(forecast.forecast_end_timestamp).toISOString()}}}var _a=_risonNode.default.encode(appState);var url="?_g=".concat(_g,"&_a=").concat(_a);(0,_recently_accessed.addItemToRecentlyAccessed)("timeseriesexplorer",this.props.job.job_id,url);window.open("#/timeseriesexplorer".concat(url),"_self")}},{key:"render",value:function render(){var _this3=this;if(this.state.isLoading===true){return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceAround"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiLoadingSpinner,{size:"l"})))}if(this.state.errorMessage!==undefined){return _react.default.createElement(_eui.EuiCallOut,{title:this.state.errorMessage,color:"danger",iconType:"cross"})}var forecasts=this.state.forecasts;if(forecasts.length===0){return _react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.jobDetails.forecastsTable.noForecastsTitle",defaultMessage:"No forecasts have been run for this job"}),iconType:"iInCircle",role:"alert"},(0,_job_utils.isTimeSeriesViewJob)(this.props.job)&&_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.jobDetails.forecastsTable.noForecastsDescription",defaultMessage:"To run a forecast, open the {singleMetricViewerLink}",values:{singleMetricViewerLink:_react.default.createElement(_eui.EuiLink,{onClick:function onClick(){return _this3.openSingleMetricView()}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.jobDetails.forecastsTable.noForecastsDescription.linkText",defaultMessage:"Single Metric Viewer"}))}})))}var columns=[{field:"forecast_create_timestamp",name:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.forecastsTable.createdLabel",{defaultMessage:"Created"}),dataType:"date",render:function render(date){return(0,_format.formatDate)(date,TIME_FORMAT)},textOnly:true,sortable:true,scope:"row"},{field:"forecast_start_timestamp",name:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.forecastsTable.fromLabel",{defaultMessage:"From"}),dataType:"date",render:function render(date){return(0,_format.formatDate)(date,TIME_FORMAT)},textOnly:true,sortable:true},{field:"forecast_end_timestamp",name:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.forecastsTable.toLabel",{defaultMessage:"To"}),dataType:"date",render:function render(date){return(0,_format.formatDate)(date,TIME_FORMAT)},textOnly:true,sortable:true},{field:"forecast_status",name:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.forecastsTable.statusLabel",{defaultMessage:"Status"}),sortable:true},{field:"forecast_memory_bytes",name:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.forecastsTable.memorySizeLabel",{defaultMessage:"Memory size"}),render:function render(bytes){return(0,_format.formatNumber)(bytes,"0b")},sortable:true},{field:"processing_time_ms",name:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.forecastsTable.processingTimeLabel",{defaultMessage:"Processing time"}),render:function render(ms){return _i18n.i18n.translate("xpack.ml.jobsList.jobDetails.forecastsTable.msTimeUnitLabel",{defaultMessage:"{ms} ms",values:{ms:ms}})},sortable:true},{field:"forecast_expiry_timestamp",name:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.forecastsTable.expiresLabel",{defaultMessage:"Expires"}),render:function render(date){return(0,_format.formatDate)(date,TIME_FORMAT)},textOnly:true,sortable:true},{field:"forecast_messages",name:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.forecastsTable.messagesLabel",{defaultMessage:"Messages"}),sortable:false,render:function render(messages){return _react.default.createElement("div",null,messages.map((function(message,index){return _react.default.createElement("p",{key:index},message)})))},textOnly:true},{name:_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.forecastsTable.viewLabel",{defaultMessage:"View"}),width:"60px",render:function render(forecast){var viewForecastAriaLabel=_i18n.i18n.translate("xpack.ml.jobsList.jobDetails.forecastsTable.viewAriaLabel",{defaultMessage:"View forecast created at {createdDate}",values:{createdDate:(0,_format.formatDate)(forecast.forecast_create_timestamp,TIME_FORMAT)}});return _react.default.createElement(_eui.EuiButtonIcon,{onClick:function onClick(){return _this3.openSingleMetricView(forecast)},isDisabled:forecast.forecast_status!==_states.FORECAST_REQUEST_STATE.FINISHED,iconType:"stats","aria-label":viewForecastAriaLabel})}}];return _react.default.createElement(_eui.EuiInMemoryTable,{compressed:true,items:forecasts,columns:columns,pagination:{pageSizeOptions:[5,10,25]},sorting:true})}}]);return ForecastsTable}(_react.Component);exports.ForecastsTable=ForecastsTable;ForecastsTable.propTypes={job:_propTypes.default.object.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JobDetailsPane=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function SectionItem(_ref){var item=_ref.item;return _react.default.createElement(_eui.EuiTableRow,null,item[0]!==""&&_react.default.createElement(_eui.EuiTableRowCell,null,_react.default.createElement("span",{className:"job-item header"},item[0])),_react.default.createElement(_eui.EuiTableRowCell,null,_react.default.createElement("span",{className:"job-item"},item[1])))}SectionItem.propTypes={item:_propTypes.default.array.isRequired};function Section(_ref2){var section=_ref2.section;if(section.items.length===0){return _react.default.createElement("div",null)}return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h4",null,section.title)),_react.default.createElement("div",{className:"job-section","data-test-subj":"mlJobRowDetailsSection-".concat(section.id)},_react.default.createElement(_eui.EuiTable,{compressed:true},_react.default.createElement(_eui.EuiTableBody,null,section.items.map((function(item,i){return _react.default.createElement(SectionItem,{item:item,key:i})}))))))}Section.propTypes={section:_propTypes.default.object.isRequired};var JobDetailsPane=function(_Component){_inherits(JobDetailsPane,_Component);function JobDetailsPane(props){var _this;_classCallCheck(this,JobDetailsPane);_this=_possibleConstructorReturn(this,_getPrototypeOf(JobDetailsPane).call(this,props));_this.state={};return _this}_createClass(JobDetailsPane,[{key:"render",value:function render(){var _this$state=this.state,sections=_this$state.sections,time=_this$state.time;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement("div",{className:"row",time:time,"data-test-subj":this.props["data-test-subj"]},_react.default.createElement("div",{className:"col-md-6"},sections.filter((function(s){return s.position==="left"})).map((function(s,i){return _react.default.createElement(Section,{section:s,key:i})}))),_react.default.createElement("div",{className:"col-md-6"},sections.filter((function(s){return s.position==="right"})).map((function(s,i){return _react.default.createElement(Section,{section:s,key:i})})))))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props){var sections=props.sections,time=props.time;return{sections:sections,time:time}}}]);return JobDetailsPane}(_react.Component);exports.JobDetailsPane=JobDetailsPane;JobDetailsPane.propTypes={sections:_propTypes.default.array.isRequired,"data-test-subj":_propTypes.default.string}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JobMessagesPane=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _ml_api_service=__webpack_require__(51);var _job_messages=__webpack_require__(415);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var JobMessagesPane=function JobMessagesPane(_ref){var jobId=_ref.jobId;var _useState=(0,_react.useState)([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=(0,_react.useState)(""),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];var fetchMessages=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);_context.prev=1;_context.t0=setMessages;_context.next=5;return _ml_api_service.ml.jobs.jobAuditMessages(jobId);case 5:_context.t1=_context.sent;(0,_context.t0)(_context.t1);setIsLoading(false);_context.next=15;break;case 10:_context.prev=10;_context.t2=_context["catch"](1);setIsLoading(false);setErrorMessage(_context.t2);console.error("Job messages could not be loaded",_context.t2);case 15:case"end":return _context.stop()}}}),_callee,null,[[1,10]])})));return function fetchMessages(){return _ref2.apply(this,arguments)}}();(0,_react.useEffect)((function(){fetchMessages()}),[]);return _react.default.createElement(_job_messages.JobMessages,{messages:messages,loading:isLoading,error:errorMessage})};exports.JobMessagesPane=JobMessagesPane},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JobMessages=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);var _format=__webpack_require__(39);var _i18n=__webpack_require__(1);var _eui_theme_light=_interopRequireDefault(__webpack_require__(40));var _job_message_icon=__webpack_require__(409);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TIME_FORMAT="YYYY-MM-DD HH:mm:ss";var JobMessages=function JobMessages(_ref){var messages=_ref.messages,loading=_ref.loading,error=_ref.error;var columns=[{name:"",render:function render(message){return _react.default.createElement(_job_message_icon.JobIcon,{message:message})},width:"".concat(_eui_theme_light.default.euiSizeL)},{field:"timestamp",name:_i18n.i18n.translate("xpack.ml.jobMessages.timeLabel",{defaultMessage:"Time"}),render:function render(timestamp){return(0,_format.formatDate)(timestamp,TIME_FORMAT)},width:"120px",sortable:true},{field:"node_name",name:_i18n.i18n.translate("xpack.ml.jobMessages.nodeLabel",{defaultMessage:"Node"}),width:"150px"},{field:"message",name:_i18n.i18n.translate("xpack.ml.jobMessages.messageLabel",{defaultMessage:"Message"}),width:"50%"}];var defaultSorting={sort:{field:"timestamp",direction:"asc"}};return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiInMemoryTable,{className:"job-messages-table",items:messages,columns:columns,sorting:defaultSorting,compressed:true,loading:loading,error:error}))};exports.JobMessages=JobMessages},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"JobFilterBar",{enumerable:true,get:function get(){return _job_filter_bar.JobFilterBar}});var _job_filter_bar=__webpack_require__(1059)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JobFilterBar=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _ml_api_service=__webpack_require__(51);var _job_group=__webpack_require__(239);var _utils=__webpack_require__(111);var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(30);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function loadGroups(){return _ml_api_service.ml.jobs.groups().then((function(groups){return groups.map((function(g){return{value:g.id,view:_react.default.createElement("div",{className:"group-item"},_react.default.createElement(_job_group.JobGroup,{name:g.id}),"",_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.jobFilterBar.jobGroupTitle",defaultMessage:"({jobsCount, plural, one {# job} other {# jobs}})",values:{jobsCount:g.jobIds.length}})))}}))})).catch((function(error){console.log(error);return[]}))}var JobFilterBar=function(_Component){_inherits(JobFilterBar,_Component);function JobFilterBar(props){var _this;_classCallCheck(this,JobFilterBar);_this=_possibleConstructorReturn(this,_getPrototypeOf(JobFilterBar).call(this,props));_defineProperty(_assertThisInitialized(_this),"urlFilterIdCleared",false);_defineProperty(_assertThisInitialized(_this),"onChange",(function(_ref){var query=_ref.query,error=_ref.error;if(error){_this.setState({error:error})}else{if(query.text===""&&_this.urlFilterIdCleared===false){_this.urlFilterIdCleared=true;(0,_utils.clearSelectedJobIdFromUrl)(window.location.href)}var clauses=[];if(query&&query.ast!==undefined&&query.ast.clauses!==undefined){clauses=query.ast.clauses}_this.setFilters(clauses);_this.setState({error:null})}}));_this.state={error:null};_this.setFilters=props.setFilters;return _this}_createClass(JobFilterBar,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;var selectedId=(0,_utils.getSelectedJobIdFromUrl)(window.location.href);if(selectedId!==undefined){this.setState({selectedId:selectedId},(function(){var query=_eui.EuiSearchBar.Query.parse(selectedId);_this2.onChange({query:query})}))}}},{key:"render",value:function render(){var _this$state=this.state,error=_this$state.error,selectedId=_this$state.selectedId;var filters=[{type:"field_value_toggle_group",field:"job_state",items:[{value:"opened",name:_i18n.i18n.translate("xpack.ml.jobsList.jobFilterBar.openedLabel",{defaultMessage:"Opened"})},{value:"closed",name:_i18n.i18n.translate("xpack.ml.jobsList.jobFilterBar.closedLabel",{defaultMessage:"Closed"})},{value:"failed",name:_i18n.i18n.translate("xpack.ml.jobsList.jobFilterBar.failedLabel",{defaultMessage:"Failed"})}]},{type:"field_value_toggle_group",field:"datafeed_state",items:[{value:"started",name:_i18n.i18n.translate("xpack.ml.jobsList.jobFilterBar.startedLabel",{defaultMessage:"Started"})},{value:"stopped",name:_i18n.i18n.translate("xpack.ml.jobsList.jobFilterBar.stoppedLabel",{defaultMessage:"Stopped"})}]},{type:"field_value_selection",field:"groups",name:_i18n.i18n.translate("xpack.ml.jobsList.jobFilterBar.groupLabel",{defaultMessage:"Group"}),multiSelect:"or",cache:1e4,options:function options(){return loadGroups()}}];return _react.default.createElement(_eui.EuiFlexGroup,{direction:"column"},_react.default.createElement(_eui.EuiFlexItem,{"data-test-subj":"mlJobListSearchBar",grow:false},selectedId===undefined&&_react.default.createElement(_eui.EuiSearchBar,{box:{incremental:true},filters:filters,onChange:this.onChange,className:"mlJobFilterBar"}),selectedId!==undefined&&_react.default.createElement(_eui.EuiSearchBar,{box:{incremental:true},defaultQuery:selectedId,filters:filters,onChange:this.onChange,className:"mlJobFilterBar"}),_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,isInvalid:error!==null,error:getError(error),style:{maxHeight:"0px"}},_react.default.createElement(_react.Fragment,null))))}}]);return JobFilterBar}(_react.Component);exports.JobFilterBar=JobFilterBar;JobFilterBar.propTypes={setFilters:_propTypes.default.func.isRequired};function getError(error){if(error){return _i18n.i18n.translate("xpack.ml.jobsList.jobFilterBar.invalidSearchErrorMessage",{defaultMessage:"Invalid search: {errorMessage}",values:{errorMessage:error.message}})}return""}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"EditJobFlyout",{enumerable:true,get:function get(){return _edit_job_flyout.EditJobFlyout}});var _edit_job_flyout=__webpack_require__(1061)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EditJobFlyout=exports.EditJobFlyoutUI=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _lodash=__webpack_require__(49);var _eui=__webpack_require__(29);var _tabs=__webpack_require__(1062);var _edit_utils=__webpack_require__(458);var _utils=__webpack_require__(111);var _validate_job=__webpack_require__(459);var _messagebar=__webpack_require__(91);var _public=__webpack_require__(31);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(30);var _shared_imports=__webpack_require__(194);var _states=__webpack_require__(108);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EditJobFlyoutUI=function(_Component){_inherits(EditJobFlyoutUI,_Component);function EditJobFlyoutUI(props){var _this;_classCallCheck(this,EditJobFlyoutUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(EditJobFlyoutUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"_initialJobFormState",null);_defineProperty(_assertThisInitialized(_this),"closeFlyout",(function(){var isConfirmed=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(_this.containsUnsavedChanges()&&!isConfirmed){_this.setState({isConfirmationModalVisible:true});return}_this.setState({isConfirmationModalVisible:false});_this.setState({isFlyoutVisible:false})}));_defineProperty(_assertThisInitialized(_this),"showFlyout",(function(jobLite){var hasDatafeed=jobLite.hasDatafeed;(0,_utils.loadFullJob)(jobLite.id).then((function(job){_this.extractJob(job,hasDatafeed);_this.setState({job:job,isFlyoutVisible:true})})).catch((function(error){console.error(error)}))}));_defineProperty(_assertThisInitialized(_this),"setJobDetails",(function(jobDetails){var _this$state=_this.state,jobModelMemoryLimitValidationError=_this$state.jobModelMemoryLimitValidationError,jobGroupsValidationError=_this$state.jobGroupsValidationError;if(jobDetails.jobModelMemoryLimit!==undefined){jobModelMemoryLimitValidationError=(0,_validate_job.validateModelMemoryLimit)(jobDetails.jobModelMemoryLimit).message}if(jobDetails.jobGroups!==undefined){if(jobDetails.jobGroups.some((function(j){return _this.props.allJobIds.includes(j)}))){jobGroupsValidationError=_i18n.i18n.translate("xpack.ml.jobsList.editJobFlyout.groupsAndJobsHasSameIdErrorMessage",{defaultMessage:"A job with this ID already exists. Groups and jobs cannot use the same ID."})}else{jobGroupsValidationError=(0,_validate_job.validateGroupNames)(jobDetails.jobGroups).message}}var isValidJobDetails=jobModelMemoryLimitValidationError===""&&jobGroupsValidationError==="";_this.setState(_objectSpread({},jobDetails,{jobModelMemoryLimitValidationError:jobModelMemoryLimitValidationError,jobGroupsValidationError:jobGroupsValidationError,isValidJobDetails:isValidJobDetails}))}));_defineProperty(_assertThisInitialized(_this),"setDetectorDescriptions",(function(jobDetectorDescriptions){_this.setState(_objectSpread({},jobDetectorDescriptions))}));_defineProperty(_assertThisInitialized(_this),"setDatafeed",(function(datafeed){_this.setState(_objectSpread({},datafeed))}));_defineProperty(_assertThisInitialized(_this),"setCustomUrls",(function(jobCustomUrls){var isValidJobCustomUrls=(0,_validate_job.isValidCustomUrls)(jobCustomUrls);_this.setState({jobCustomUrls:jobCustomUrls,isValidJobCustomUrls:isValidJobCustomUrls})}));_defineProperty(_assertThisInitialized(_this),"save",(function(){var newJobData={description:_this.state.jobDescription,groups:_this.state.jobGroups,mml:_this.state.jobModelMemoryLimit,detectorDescriptions:_this.state.jobDetectorDescriptions,datafeedQuery:(0,_shared_imports.collapseLiteralStrings)(_this.state.datafeedQuery),datafeedQueryDelay:_this.state.datafeedQueryDelay,datafeedFrequency:_this.state.datafeedFrequency,datafeedScrollSize:_this.state.datafeedScrollSize,customUrls:_this.state.jobCustomUrls};var toasts=_this.props.kibana.services.notifications.toasts;(0,_edit_utils.saveJob)(_this.state.job,newJobData).then((function(){toasts.addSuccess(_i18n.i18n.translate("xpack.ml.jobsList.editJobFlyout.changesSavedNotificationMessage",{defaultMessage:"Changes to {jobId} saved",values:{jobId:_this.state.job.job_id}}));_this.refreshJobs();_this.closeFlyout(true)})).catch((function(error){console.error(error);toasts.addDanger(_i18n.i18n.translate("xpack.ml.jobsList.editJobFlyout.changesNotSavedNotificationMessage",{defaultMessage:"Could not save changes to {jobId}",values:{jobId:_this.state.job.job_id}}));_messagebar.mlMessageBarService.notify.error(error)}))}));_this.state={job:{},hasDatafeed:false,datafeedRunning:false,isFlyoutVisible:false,isConfirmationModalVisible:false,jobDescription:"",jobGroups:[],jobModelMemoryLimit:"",jobDetectors:[],jobDetectorDescriptions:[],jobCustomUrls:[],datafeedQuery:"",datafeedQueryDelay:"",datafeedFrequency:"",datafeedScrollSize:"",jobModelMemoryLimitValidationError:"",jobGroupsValidationError:"",isValidJobDetails:true,isValidJobCustomUrls:true};_this.refreshJobs=_this.props.refreshJobs;return _this}_createClass(EditJobFlyoutUI,[{key:"componentDidMount",value:function componentDidMount(){if(typeof this.props.setShowFunction==="function"){this.props.setShowFunction(this.showFlyout)}}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(typeof this.props.unsetShowFunction==="function"){this.props.unsetShowFunction()}}},{key:"containsUnsavedChanges",value:function containsUnsavedChanges(){return!(0,_lodash.isEqual)(this._initialJobFormState,(0,_lodash.pick)(this.state,["jobDescription","jobGroups","jobModelMemoryLimit","jobCustomUrls","jobDetectors","jobDetectorDescriptions","jobBucketSpan","datafeedQuery","datafeedQueryDelay","datafeedFrequency","datafeedScrollSize"]))}},{key:"extractInitialJobFormState",value:function extractInitialJobFormState(job,hasDatafeed){var mml=job.analysis_limits&&job.analysis_limits.model_memory_limit?job.analysis_limits.model_memory_limit:"";var detectors=job.analysis_config&&job.analysis_config.detectors?_toConsumableArray(job.analysis_config.detectors):[];var bucketSpan=job.analysis_config?job.analysis_config.bucket_span:"";var datafeedConfig=_objectSpread({},job.datafeed_config);var frequency=datafeedConfig.frequency!==undefined?datafeedConfig.frequency:"";var customUrls=job.custom_settings&&job.custom_settings.custom_urls?_toConsumableArray(job.custom_settings.custom_urls):[];this._initialJobFormState=Object.freeze({jobDescription:job.description,jobGroups:job.groups!==undefined?job.groups:[],jobModelMemoryLimit:mml,jobDetectors:detectors,jobDetectorDescriptions:detectors.map((function(d){return d.detector_description})),jobBucketSpan:bucketSpan,jobCustomUrls:customUrls,datafeedQuery:hasDatafeed?JSON.stringify(datafeedConfig.query,null,2):"",datafeedQueryDelay:hasDatafeed?datafeedConfig.query_delay:"",datafeedFrequency:hasDatafeed?frequency:"",datafeedScrollSize:hasDatafeed?+datafeedConfig.scroll_size:null})}},{key:"extractJob",value:function extractJob(job,hasDatafeed){this.extractInitialJobFormState(job,hasDatafeed);var datafeedRunning=hasDatafeed&&job.datafeed_config.state!==_states.DATAFEED_STATE.STOPPED;this.setState(_objectSpread({job:job,hasDatafeed:hasDatafeed,datafeedRunning:datafeedRunning,jobModelMemoryLimitValidationError:"",jobGroupsValidationError:""},(0,_lodash.cloneDeep)(this._initialJobFormState)))}},{key:"render",value:function render(){var _this2=this;var flyout;var confirmationModal;if(this.state.isFlyoutVisible){var _this$state2=this.state,job=_this$state2.job,jobDescription=_this$state2.jobDescription,jobGroups=_this$state2.jobGroups,jobModelMemoryLimit=_this$state2.jobModelMemoryLimit,jobDetectors=_this$state2.jobDetectors,jobDetectorDescriptions=_this$state2.jobDetectorDescriptions,jobBucketSpan=_this$state2.jobBucketSpan,jobCustomUrls=_this$state2.jobCustomUrls,datafeedQuery=_this$state2.datafeedQuery,datafeedQueryDelay=_this$state2.datafeedQueryDelay,datafeedFrequency=_this$state2.datafeedFrequency,datafeedScrollSize=_this$state2.datafeedScrollSize,jobGroupsValidationError=_this$state2.jobGroupsValidationError,jobModelMemoryLimitValidationError=_this$state2.jobModelMemoryLimitValidationError,isValidJobDetails=_this$state2.isValidJobDetails,isValidJobCustomUrls=_this$state2.isValidJobCustomUrls,datafeedRunning=_this$state2.datafeedRunning;var tabs=[{id:"job-details",name:_i18n.i18n.translate("xpack.ml.jobsList.editJobFlyout.jobDetailsTitle",{defaultMessage:"Job details"}),content:_react.default.createElement(_tabs.JobDetails,{datafeedRunning:datafeedRunning,jobDescription:jobDescription,jobGroups:jobGroups,jobModelMemoryLimit:jobModelMemoryLimit,setJobDetails:this.setJobDetails,jobGroupsValidationError:jobGroupsValidationError,jobModelMemoryLimitValidationError:jobModelMemoryLimitValidationError})},{id:"detectors",name:_i18n.i18n.translate("xpack.ml.jobsList.editJobFlyout.detectorsTitle",{defaultMessage:"Detectors"}),content:_react.default.createElement(_tabs.Detectors,{jobDetectors:jobDetectors,jobDetectorDescriptions:jobDetectorDescriptions,setDetectorDescriptions:this.setDetectorDescriptions})},{id:"datafeed",name:_i18n.i18n.translate("xpack.ml.jobsList.editJobFlyout.datafeedTitle",{defaultMessage:"Datafeed"}),content:_react.default.createElement(_tabs.Datafeed,{datafeedQuery:datafeedQuery,datafeedQueryDelay:datafeedQueryDelay,datafeedFrequency:datafeedFrequency,datafeedScrollSize:datafeedScrollSize,jobBucketSpan:jobBucketSpan,setDatafeed:this.setDatafeed,datafeedRunning:datafeedRunning})},{id:"custom-urls",name:_i18n.i18n.translate("xpack.ml.jobsList.editJobFlyout.customUrlsTitle",{defaultMessage:"Custom URLs"}),content:_react.default.createElement(_tabs.CustomUrls,{job:job,jobCustomUrls:jobCustomUrls,setCustomUrls:this.setCustomUrls})}];flyout=_react.default.createElement(_eui.EuiFlyout,{onClose:function onClose(){_this2.closeFlyout()},size:"m"},_react.default.createElement(_eui.EuiFlyoutHeader,null,_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.pageTitle",defaultMessage:"Edit {jobId}",values:{jobId:job.job_id}})))),_react.default.createElement(_eui.EuiFlyoutBody,null,_react.default.createElement(_eui.EuiTabbedContent,{tabs:tabs,initialSelectedTab:tabs[0],onTabClick:function onTabClick(){}})),_react.default.createElement(_eui.EuiFlyoutFooter,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"cross",onClick:function onClick(){_this2.closeFlyout()},flush:"left"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.closeButtonLabel",defaultMessage:"Close"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{onClick:this.save,fill:true,isDisabled:isValidJobDetails===false||isValidJobCustomUrls===false},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.saveButtonLabel",defaultMessage:"Save"}))))))}if(this.state.isConfirmationModalVisible){confirmationModal=_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.unsavedChangesDialogTitle",defaultMessage:"Save changes before leaving?"}),onCancel:function onCancel(){return _this2.closeFlyout(true)},onConfirm:function onConfirm(){return _this2.save()},cancelButtonText:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.leaveAnywayButtonLabel",defaultMessage:"Leave anyway"}),confirmButtonText:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.saveChangesButtonLabel",defaultMessage:"Save changes"}),defaultFocusedButton:"confirm"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.unsavedChangesDialogMessage",defaultMessage:"If you don't save, your changes will be lost."}))))}{return _react.default.createElement("div",null,flyout,confirmationModal)}}}]);return EditJobFlyoutUI}(_react.Component);exports.EditJobFlyoutUI=EditJobFlyoutUI;EditJobFlyoutUI.propTypes={setShowFunction:_propTypes.default.func.isRequired,unsetShowFunction:_propTypes.default.func.isRequired,refreshJobs:_propTypes.default.func.isRequired,allJobIds:_propTypes.default.array.isRequired};var EditJobFlyout=(0,_public.withKibana)(EditJobFlyoutUI);exports.EditJobFlyout=EditJobFlyout},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"JobDetails",{enumerable:true,get:function get(){return _job_details.JobDetails}});Object.defineProperty(exports,"Detectors",{enumerable:true,get:function get(){return _detectors.Detectors}});Object.defineProperty(exports,"Datafeed",{enumerable:true,get:function get(){return _datafeed.Datafeed}});Object.defineProperty(exports,"CustomUrls",{enumerable:true,get:function get(){return _custom_urls.CustomUrls}});var _job_details=__webpack_require__(1063);var _detectors=__webpack_require__(1064);var _datafeed=__webpack_require__(1065);var _custom_urls=__webpack_require__(416)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JobDetails=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _ml_api_service=__webpack_require__(51);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(30);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var JobDetails=function(_Component){_inherits(JobDetails,_Component);function JobDetails(props){var _this;_classCallCheck(this,JobDetails);_this=_possibleConstructorReturn(this,_getPrototypeOf(JobDetails).call(this,props));_defineProperty(_assertThisInitialized(_this),"onDescriptionChange",(function(e){_this.setJobDetails({jobDescription:e.target.value})}));_defineProperty(_assertThisInitialized(_this),"onMmlChange",(function(e){_this.setJobDetails({jobModelMemoryLimit:e.target.value})}));_defineProperty(_assertThisInitialized(_this),"onGroupsChange",(function(selectedGroups){_this.setJobDetails({jobGroups:selectedGroups.map((function(g){return g.label}))})}));_defineProperty(_assertThisInitialized(_this),"onCreateGroup",(function(input,flattenedOptions){var normalizedSearchValue=input.trim().toLowerCase();if(!normalizedSearchValue){return}var newGroup={label:input};var groups=_this.state.groups;if(flattenedOptions.findIndex((function(option){return option.label.trim().toLowerCase()===normalizedSearchValue}))===-1){groups.push(newGroup)}var selectedGroups=_this.state.selectedGroups.concat(newGroup);_this.setState({groups:groups},(function(){return _this.onGroupsChange(selectedGroups)}))}));_this.state={description:"",groups:[],selectedGroups:[],mml:"",mmlValidationError:"",groupsValidationError:""};_this.setJobDetails=props.setJobDetails;return _this}_createClass(JobDetails,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;_ml_api_service.ml.jobs.groups().then((function(resp){var groups=resp.map((function(g){return{label:g.id}}));_this2.setState({groups:groups})})).catch((function(error){console.error("Could not load groups",error)}))}},{key:"render",value:function render(){var _this$state=this.state,description=_this$state.description,selectedGroups=_this$state.selectedGroups,mml=_this$state.mml,groups=_this$state.groups,mmlValidationError=_this$state.mmlValidationError,groupsValidationError=_this$state.groupsValidationError;var datafeedRunning=this.props.datafeedRunning;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiForm,null,_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.jobDetails.jobDescriptionLabel",defaultMessage:"Job description"})},_react.default.createElement(_eui.EuiFieldText,{value:description,onChange:this.onDescriptionChange})),_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.jobDetails.jobGroupsLabel",defaultMessage:"Job groups"}),isInvalid:groupsValidationError!=="",error:groupsValidationError},_react.default.createElement(_eui.EuiComboBox,{placeholder:_i18n.i18n.translate("xpack.ml.jobsList.editJobFlyout.jobDetails.jobGroupsPlaceholder",{defaultMessage:"Select or create groups"}),options:groups,selectedOptions:selectedGroups,onChange:this.onGroupsChange,onCreateOption:this.onCreateGroup,isClearable:true,isInvalid:groupsValidationError!=="",error:groupsValidationError})),_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.jobDetails.modelMemoryLimitLabel",defaultMessage:"Model memory limit"}),helpText:datafeedRunning?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.jobDetails.modelMemoryLimitLabelHelp",defaultMessage:"Model memory limit cannot be edited while the datafeed is running."}):null,isInvalid:mmlValidationError!=="",error:mmlValidationError},_react.default.createElement(_eui.EuiFieldText,{value:mml,onChange:this.onMmlChange,isInvalid:mmlValidationError!=="",error:mmlValidationError,disabled:datafeedRunning}))))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props){var selectedGroups=props.jobGroups!==undefined?props.jobGroups.map((function(g){return{label:g}})):[];return{description:props.jobDescription,selectedGroups:selectedGroups,mml:props.jobModelMemoryLimit,mmlValidationError:props.jobModelMemoryLimitValidationError,groupsValidationError:props.jobGroupsValidationError}}}]);return JobDetails}(_react.Component);exports.JobDetails=JobDetails;JobDetails.propTypes={datafeedRunning:_propTypes.default.bool.isRequired,jobDescription:_propTypes.default.string.isRequired,jobGroups:_propTypes.default.array.isRequired,jobModelMemoryLimit:_propTypes.default.string.isRequired,setJobDetails:_propTypes.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Detectors=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _job_service=__webpack_require__(58);var _string_utils=__webpack_require__(80);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Detectors=function(_Component){_inherits(Detectors,_Component);function Detectors(props){var _this;_classCallCheck(this,Detectors);_this=_possibleConstructorReturn(this,_getPrototypeOf(Detectors).call(this,props));_defineProperty(_assertThisInitialized(_this),"onDescriptionChange",(function(e,i){var jobDetectorDescriptions=_this.state.detectorDescriptions;jobDetectorDescriptions[i]=e.target.value;_this.setDetectorDescriptions({jobDetectorDescriptions:jobDetectorDescriptions})}));_this.detectors=_job_service.mlJobService.getJobGroups().map((function(g){return{label:g.id}}));_this.state={detectors:[],detectorDescriptions:[]};_this.setDetectorDescriptions=props.setDetectorDescriptions;return _this}_createClass(Detectors,[{key:"render",value:function render(){var _this2=this;var _this$state=this.state,detectors=_this$state.detectors,detectorDescriptions=_this$state.detectorDescriptions;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiForm,null,detectorDescriptions.map((function(d,i){return _react.default.createElement(_eui.EuiFormRow,{label:(0,_string_utils.detectorToString)(detectors[i]),key:i},_react.default.createElement(_eui.EuiFieldText,{value:d,onChange:function onChange(e){return _this2.onDescriptionChange(e,i)}}))}))))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props){return{detectors:props.jobDetectors,detectorDescriptions:props.jobDetectorDescriptions}}}]);return Detectors}(_react.Component);exports.Detectors=Detectors;Detectors.propTypes={jobDetectors:_propTypes.default.array.isRequired,jobDetectorDescriptions:_propTypes.default.array.isRequired,setDetectorDescriptions:_propTypes.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Datafeed=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _job_utils=__webpack_require__(59);var _ml_server_info=__webpack_require__(84);var _parse_interval=__webpack_require__(74);var _ml_job_editor=__webpack_require__(103);var _react2=__webpack_require__(30);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getDefaults(bucketSpan,jobDefaults){var bucketSpanSeconds=bucketSpan!==undefined?(0,_parse_interval.parseInterval)(bucketSpan).asSeconds():"";return{queryDelay:"60s",frequency:(0,_job_utils.calculateDatafeedFrequencyDefaultSeconds)(bucketSpanSeconds)+"s",scrollSize:jobDefaults.datafeeds.scroll_size}}var Datafeed=function(_Component){_inherits(Datafeed,_Component);function Datafeed(props){var _this;_classCallCheck(this,Datafeed);_this=_possibleConstructorReturn(this,_getPrototypeOf(Datafeed).call(this,props));_defineProperty(_assertThisInitialized(_this),"onQueryChange",(function(query){_this.setDatafeed({datafeedQuery:query})}));_defineProperty(_assertThisInitialized(_this),"onQueryDelayChange",(function(e){_this.setDatafeed({datafeedQueryDelay:e.target.value})}));_defineProperty(_assertThisInitialized(_this),"onFrequencyChange",(function(e){_this.setDatafeed({datafeedFrequency:e.target.value})}));_defineProperty(_assertThisInitialized(_this),"onScrollSizeChange",(function(e){_this.setDatafeed({datafeedScrollSize:+e.target.value})}));_this.state={query:"",queryDelay:"",frequency:"",scrollSize:"",defaults:{queryDelay:"",frequency:"",scrollSize:0},jobDefaults:(0,_ml_server_info.getNewJobDefaults)()};_this.setDatafeed=props.setDatafeed;return _this}_createClass(Datafeed,[{key:"render",value:function render(){var _this$state=this.state,query=_this$state.query,queryDelay=_this$state.queryDelay,frequency=_this$state.frequency,scrollSize=_this$state.scrollSize,defaults=_this$state.defaults;var datafeedRunning=this.props.datafeedRunning;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),datafeedRunning&&_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiCallOut,{color:"warning"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.datafeed.readOnlyCalloutText",defaultMessage:"Datafeed settings cannot be edited while the datafeed is running. Please stop the job if you wish to edit these settings."})),_react.default.createElement(_eui.EuiSpacer,{size:"l"})),_react.default.createElement(_eui.EuiForm,null,_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.datafeed.queryLabel",defaultMessage:"Query"}),style:{maxWidth:"inherit"}},_react.default.createElement(_ml_job_editor.MLJobEditor,{mode:_ml_job_editor.ML_EDITOR_MODE.XJSON,value:query,onChange:this.onQueryChange,height:"200px",readOnly:datafeedRunning})),_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.datafeed.queryDelayLabel",defaultMessage:"Query delay"})},_react.default.createElement(_eui.EuiFieldText,{value:queryDelay,placeholder:defaults.queryDelay,onChange:this.onQueryDelayChange,disabled:datafeedRunning})),_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.datafeed.frequencyLabel",defaultMessage:"Frequency"})},_react.default.createElement(_eui.EuiFieldText,{value:frequency,placeholder:defaults.frequency,onChange:this.onFrequencyChange,disabled:datafeedRunning})),_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.editJobFlyout.datafeed.scrollSizeLabel",defaultMessage:"Scroll size"})},_react.default.createElement(_eui.EuiFieldNumber,{value:scrollSize,placeholder:defaults.scrollSize,onChange:this.onScrollSizeChange,disabled:datafeedRunning}))))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props,state){return{query:props.datafeedQuery,queryDelay:props.datafeedQueryDelay,frequency:props.datafeedFrequency,scrollSize:props.datafeedScrollSize,defaults:getDefaults(props.jobBucketSpan,state.jobDefaults)}}}]);return Datafeed}(_react.Component);exports.Datafeed=Datafeed;Datafeed.propTypes={datafeedRunning:_propTypes.default.bool.isRequired,datafeedQuery:_propTypes.default.string.isRequired,datafeedQueryDelay:_propTypes.default.string.isRequired,datafeedFrequency:_propTypes.default.string.isRequired,datafeedScrollSize:_propTypes.default.number.isRequired,jobBucketSpan:_propTypes.default.string.isRequired,setDatafeed:_propTypes.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CustomUrlList",{enumerable:true,get:function get(){return _list.CustomUrlList}});Object.defineProperty(exports,"CustomUrlEditor",{enumerable:true,get:function get(){return _editor.CustomUrlEditor}});var _list=__webpack_require__(1067);var _editor=__webpack_require__(1218)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CustomUrlList=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(30);var _kibana=__webpack_require__(57);var _custom_url_utils=__webpack_require__(139);var _utils=__webpack_require__(244);var _parse_interval=__webpack_require__(74);var _constants=__webpack_require__(245);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function isValidTimeRange(timeRange){if(timeRange===undefined||timeRange.length===0||timeRange===_constants.TIME_RANGE_TYPE.AUTO){return true}var interval=(0,_parse_interval.parseInterval)(timeRange);return interval!==null}var CustomUrlList=function CustomUrlList(_ref){var job=_ref.job,customUrls=_ref.customUrls,setCustomUrls=_ref.setCustomUrls;var _useMlKibana=(0,_kibana.useMlKibana)(),notifications=_useMlKibana.services.notifications;var _useState=(0,_react.useState)(null),_useState2=_slicedToArray(_useState,2),expandedUrlIndex=_useState2[0],setExpandedUrlIndex=_useState2[1];var onLabelChange=function onLabelChange(e,index){if(index<customUrls.length){customUrls[index]=_objectSpread({},customUrls[index],{url_name:e.target.value});setCustomUrls(customUrls)}};var onUrlValueChange=function onUrlValueChange(e,index){if(index<customUrls.length){customUrls[index]=_objectSpread({},customUrls[index],{url_value:e.target.value});setCustomUrls(customUrls)}};var onTimeRangeChange=function onTimeRangeChange(e,index){if(index<customUrls.length){customUrls[index]=_objectSpread({},customUrls[index]);var timeRange=e.target.value;if(timeRange!==undefined&&timeRange.length>0){customUrls[index].time_range=timeRange}else{delete customUrls[index].time_range}setCustomUrls(customUrls)}};var onDeleteButtonClick=function onDeleteButtonClick(index){if(index<customUrls.length){customUrls.splice(index,1);setCustomUrls(customUrls)}};var onTestButtonClick=function onTestButtonClick(index){if(index<customUrls.length){(0,_utils.getTestUrl)(job,customUrls[index]).then((function(testUrl){(0,_custom_url_utils.openCustomUrlWindow)(testUrl,customUrls[index])})).catch((function(resp){console.error("Error obtaining URL for test:",resp);var toasts=notifications.toasts;toasts.addDanger(_i18n.i18n.translate("xpack.ml.customUrlEditorList.obtainingUrlToTestConfigurationErrorMessage",{defaultMessage:"An error occurred obtaining the URL to test the configuration"}))}))}};var customUrlRows=customUrls.map((function(customUrl,index){var label=customUrl.url_name;var otherUrls=_toConsumableArray(customUrls);otherUrls.splice(index,1);var isInvalidLabel=!(0,_custom_url_utils.isValidLabel)(label,otherUrls);var invalidLabelError=isInvalidLabel?[_i18n.i18n.translate("xpack.ml.customUrlEditorList.labelIsNotUniqueErrorMessage",{defaultMessage:"A unique label must be supplied"})]:[];var timeRange=customUrl.time_range;var isInvalidTimeRange=!isValidTimeRange(timeRange);var invalidIntervalError=isInvalidTimeRange?[_i18n.i18n.translate("xpack.ml.customUrlEditorList.invalidTimeRangeFormatErrorMessage",{defaultMessage:"Invalid format"})]:[];return _react.default.createElement(_eui.EuiFlexGroup,{key:"url_".concat(index),"data-test-subj":"mlJobEditCustomUrlItem_".concat(index)},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.customUrlEditorList.labelLabel",defaultMessage:"Label"}),isInvalid:isInvalidLabel,error:invalidLabelError},_react.default.createElement(_eui.EuiFieldText,{value:label,isInvalid:isInvalidLabel,onChange:function onChange(e){return onLabelChange(e,index)},"data-test-subj":"mlJobEditCustomUrlLabelInput_".concat(index)}))),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.customUrlEditorList.urlLabel",defaultMessage:"URL"})},index===expandedUrlIndex?_react.default.createElement(_eui.EuiTextArea,{inputRef:function inputRef(input){if(input){input.focus()}},fullWidth:true,value:customUrl.url_value,onChange:function onChange(e){return onUrlValueChange(e,index)},onBlur:function onBlur(){setExpandedUrlIndex(null)},"data-test-subj":"mlJobEditCustomUrlTextarea_".concat(index)}):_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,value:customUrl.url_value,readOnly:true,onFocus:function onFocus(){return setExpandedUrlIndex(index)},"data-test-subj":"mlJobEditCustomUrlInput_".concat(index)}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.customUrlEditorList.timeRangeLabel",defaultMessage:"Time range"}),error:invalidIntervalError,isInvalid:isInvalidTimeRange},_react.default.createElement(_eui.EuiFieldText,{value:customUrl.time_range||"",isInvalid:isInvalidTimeRange,placeholder:_constants.TIME_RANGE_TYPE.AUTO,onChange:function onChange(e){return onTimeRangeChange(e,index)}}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{hasEmptyLabelSpace:true},_react.default.createElement(_eui.EuiToolTip,{content:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.customUrlEditorList.testCustomUrlTooltip",defaultMessage:"Test custom URL"})},_react.default.createElement(_eui.EuiButtonIcon,{size:"s",color:"primary",onClick:function onClick(){return onTestButtonClick(index)},iconType:"popout","aria-label":_i18n.i18n.translate("xpack.ml.customUrlEditorList.testCustomUrlAriaLabel",{defaultMessage:"Test custom URL"})})))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{hasEmptyLabelSpace:true},_react.default.createElement(_eui.EuiToolTip,{content:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.customUrlEditorList.deleteCustomUrlTooltip",defaultMessage:"Delete custom URL"})},_react.default.createElement(_eui.EuiButtonIcon,{size:"s",color:"danger",onClick:function onClick(){return onDeleteButtonClick(index)},iconType:"trash","aria-label":_i18n.i18n.translate("xpack.ml.customUrlEditorList.deleteCustomUrlAriaLabel",{defaultMessage:"Delete custom URL"})})))))}));return _react.default.createElement("div",{"data-test-subj":"mlJobEditCustomUrlsList"},customUrlRows)};exports.CustomUrlList=CustomUrlList},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;Object.defineProperty(exports,"Plugin",{enumerable:true,get:function get(){return _plugin.DashboardEmbeddableContainerPublicPlugin}});Object.defineProperty(exports,"DashboardStart",{enumerable:true,get:function get(){return _plugin.DashboardStart}});Object.defineProperty(exports,"DashboardDoc730ToLatest",{enumerable:true,get:function get(){return _bwc.DashboardDoc730ToLatest}});Object.defineProperty(exports,"DashboardDoc700To720",{enumerable:true,get:function get(){return _bwc.DashboardDoc700To720}});Object.defineProperty(exports,"RawSavedDashboardPanelTo60",{enumerable:true,get:function get(){return _bwc.RawSavedDashboardPanelTo60}});Object.defineProperty(exports,"RawSavedDashboardPanel610",{enumerable:true,get:function get(){return _bwc.RawSavedDashboardPanel610}});Object.defineProperty(exports,"RawSavedDashboardPanel620",{enumerable:true,get:function get(){return _bwc.RawSavedDashboardPanel620}});Object.defineProperty(exports,"RawSavedDashboardPanel630",{enumerable:true,get:function get(){return _bwc.RawSavedDashboardPanel630}});Object.defineProperty(exports,"RawSavedDashboardPanel640To720",{enumerable:true,get:function get(){return _bwc.RawSavedDashboardPanel640To720}});Object.defineProperty(exports,"RawSavedDashboardPanel730ToLatest",{enumerable:true,get:function get(){return _bwc.RawSavedDashboardPanel730ToLatest}});Object.defineProperty(exports,"DashboardDocPre700",{enumerable:true,get:function get(){return _bwc.DashboardDocPre700}});Object.defineProperty(exports,"DashboardContainer",{enumerable:true,get:function get(){return _embeddable.DashboardContainer}});Object.defineProperty(exports,"DashboardContainerInput",{enumerable:true,get:function get(){return _embeddable.DashboardContainerInput}});Object.defineProperty(exports,"DashboardContainerFactory",{enumerable:true,get:function get(){return _embeddable.DashboardContainerFactory}});Object.defineProperty(exports,"DASHBOARD_CONTAINER_TYPE",{enumerable:true,get:function get(){return _embeddable.DASHBOARD_CONTAINER_TYPE}});Object.defineProperty(exports,"DashboardPanelState",{enumerable:true,get:function get(){return _embeddable.DashboardPanelState}});Object.defineProperty(exports,"DEFAULT_PANEL_WIDTH",{enumerable:true,get:function get(){return _embeddable.DEFAULT_PANEL_WIDTH}});Object.defineProperty(exports,"DEFAULT_PANEL_HEIGHT",{enumerable:true,get:function get(){return _embeddable.DEFAULT_PANEL_HEIGHT}});Object.defineProperty(exports,"GridData",{enumerable:true,get:function get(){return _embeddable.GridData}});Object.defineProperty(exports,"SavedObjectDashboard",{enumerable:true,get:function get(){return _saved_dashboards.SavedObjectDashboard}});Object.defineProperty(exports,"DASHBOARD_APP_URL_GENERATOR",{enumerable:true,get:function get(){return _url_generator.DASHBOARD_APP_URL_GENERATOR}});__webpack_require__(1069);var _plugin=__webpack_require__(1074);var _bwc=__webpack_require__(1215);__webpack_require__(1217);__webpack_require__(430);var _embeddable=__webpack_require__(247);var _saved_dashboards=__webpack_require__(455);var _url_generator=__webpack_require__(454);function plugin(initializerContext){return new _plugin.DashboardEmbeddableContainerPublicPlugin(initializerContext)}},function(module,exports,__webpack_require__){if(window.__kbnDarkMode__){__webpack_require__(1070)}else{__webpack_require__(1072)}},function(module,exports,__webpack_require__){var api=__webpack_require__(2);var content=__webpack_require__(1071);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(3);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".react-grid-layout .gs-w {\n  z-index: auto; }\n\n/**\n * 1. Due to https://github.com/STRML/react-grid-layout/issues/240 we have to manually hide the resizable\n * element.\n */\n.dshLayout--viewing .react-resizable-handle {\n  display: none;\n  /* 1 */ }\n\n/**\n * 1. If we don't give the resizable handler a larger z index value the layout will hide it.\n */\n.dshLayout--editing .react-resizable-handle {\n  width: 24px;\n  height: 24px;\n  z-index: 1000;\n  /* 1 */\n  right: 0;\n  bottom: 0;\n  padding-right: 8px;\n  padding-bottom: 8px; }\n\n/**\n * 1. Need to override the react grid layout height when a single panel is expanded. Important is required because\n * otherwise the height is set inline.\n */\n.dshLayout-isMaximizedPanel {\n  height: 100% !important;\n  /* 1. */\n  width: 100%;\n  position: absolute !important;\n  /* 1 */ }\n\n/**\n * .dshLayout-withoutMargins only affects the panel styles themselves, see ../panel\n */\n/**\n * When a single panel is expanded, all the other panels are hidden in the grid.\n */\n.dshDashboardGrid__item--hidden {\n  display: none; }\n\n/**\n * 1. We need to mark this as important because react grid layout sets the width and height of the panels inline.\n */\n.dshDashboardGrid__item--expanded {\n  height: 100% !important;\n  /* 1 */\n  width: 100% !important;\n  /* 1 */\n  top: 0 !important;\n  /* 1 */\n  left: 0 !important;\n  /* 1 */ }\n\n.react-grid-item {\n  /**\n   * Disable transitions from the library on each grid element.\n   */\n  -webkit-transition: none;\n  transition: none;\n  /**\n    * Copy over and overwrite the fill color with EUI color mixin (for theming)\n    */\n  /**\n   * Dragged/Resized panels in dashboard should always appear above other panels\n   * and above the placeholder\n   */\n  /**\n   * Overwrites red coloring that comes from this library by default.\n   */ }\n  .react-grid-item > .react-resizable-handle {\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='6' height='6' viewBox='0 0 6 6'%3E%3Cpolygon fill='rgb%28152, 162, 179%29' points='6 6 0 6 0 4.2 4 4.2 4.2 4.2 4.2 0 6 0' /%3E%3C/svg%3E%0A\"); }\n    .react-grid-item > .react-resizable-handle::after {\n      border: none !important;\n      /** overrides library default visual indicator **/ }\n    .react-grid-item > .react-resizable-handle:hover, .react-grid-item > .react-resizable-handle:focus {\n      background-color: rgba(255, 206, 122, 0.3); }\n  .react-grid-item.resizing, .react-grid-item.react-draggable-dragging {\n    z-index: 2000 !important; }\n  .react-grid-item.react-draggable-dragging {\n    -webkit-transition: -webkit-box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    transition: -webkit-box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    transition: box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    transition: box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1), -webkit-box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    -webkit-box-shadow: 0 40px 64px 0 rgba(0, 0, 0, 0.1), 0 24px 32px 0 rgba(0, 0, 0, 0.1), 0 16px 16px 0 rgba(0, 0, 0, 0.1), 0 8px 8px 0 rgba(0, 0, 0, 0.1), 0 4px 4px 0 rgba(0, 0, 0, 0.1), 0 2px 2px 0 rgba(0, 0, 0, 0.1);\n            box-shadow: 0 40px 64px 0 rgba(0, 0, 0, 0.1), 0 24px 32px 0 rgba(0, 0, 0, 0.1), 0 16px 16px 0 rgba(0, 0, 0, 0.1), 0 8px 8px 0 rgba(0, 0, 0, 0.1), 0 4px 4px 0 rgba(0, 0, 0, 0.1), 0 2px 2px 0 rgba(0, 0, 0, 0.1);\n    border-radius: 4px; }\n  .react-grid-item.react-grid-placeholder {\n    border-radius: 4px;\n    background: #FFCE7A; }\n\n@media only screen and (max-width: 574px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n/**\n  * EDITING MODE\n  * Use .dshLayout--editing to target editing state because\n  * .embPanel--editing doesn't get updating without a hard refresh\n  */\n.dshLayout-withoutMargins .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  -webkit-box-shadow: none;\n          box-shadow: none;\n  border-radius: 0; }\n\n.dshLayout-withoutMargins:not(.dshLayout--editing) .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  border-color: transparent; }\n\n.dshDashboardViewport {\n  width: 100%; }\n\n.dshDashboardViewport-withMargins {\n  width: 100%; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(2);var content=__webpack_require__(1073);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(3);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".react-grid-layout .gs-w {\n  z-index: auto; }\n\n/**\n * 1. Due to https://github.com/STRML/react-grid-layout/issues/240 we have to manually hide the resizable\n * element.\n */\n.dshLayout--viewing .react-resizable-handle {\n  display: none;\n  /* 1 */ }\n\n/**\n * 1. If we don't give the resizable handler a larger z index value the layout will hide it.\n */\n.dshLayout--editing .react-resizable-handle {\n  width: 24px;\n  height: 24px;\n  z-index: 1000;\n  /* 1 */\n  right: 0;\n  bottom: 0;\n  padding-right: 8px;\n  padding-bottom: 8px; }\n\n/**\n * 1. Need to override the react grid layout height when a single panel is expanded. Important is required because\n * otherwise the height is set inline.\n */\n.dshLayout-isMaximizedPanel {\n  height: 100% !important;\n  /* 1. */\n  width: 100%;\n  position: absolute !important;\n  /* 1 */ }\n\n/**\n * .dshLayout-withoutMargins only affects the panel styles themselves, see ../panel\n */\n/**\n * When a single panel is expanded, all the other panels are hidden in the grid.\n */\n.dshDashboardGrid__item--hidden {\n  display: none; }\n\n/**\n * 1. We need to mark this as important because react grid layout sets the width and height of the panels inline.\n */\n.dshDashboardGrid__item--expanded {\n  height: 100% !important;\n  /* 1 */\n  width: 100% !important;\n  /* 1 */\n  top: 0 !important;\n  /* 1 */\n  left: 0 !important;\n  /* 1 */ }\n\n.react-grid-item {\n  /**\n   * Disable transitions from the library on each grid element.\n   */\n  -webkit-transition: none;\n  transition: none;\n  /**\n    * Copy over and overwrite the fill color with EUI color mixin (for theming)\n    */\n  /**\n   * Dragged/Resized panels in dashboard should always appear above other panels\n   * and above the placeholder\n   */\n  /**\n   * Overwrites red coloring that comes from this library by default.\n   */ }\n  .react-grid-item > .react-resizable-handle {\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='6' height='6' viewBox='0 0 6 6'%3E%3Cpolygon fill='rgb%28105, 112, 125%29' points='6 6 0 6 0 4.2 4 4.2 4.2 4.2 4.2 0 6 0' /%3E%3C/svg%3E%0A\"); }\n    .react-grid-item > .react-resizable-handle::after {\n      border: none !important;\n      /** overrides library default visual indicator **/ }\n    .react-grid-item > .react-resizable-handle:hover, .react-grid-item > .react-resizable-handle:focus {\n      background-color: rgba(245, 167, 0, 0.1); }\n  .react-grid-item.resizing, .react-grid-item.react-draggable-dragging {\n    z-index: 2000 !important; }\n  .react-grid-item.react-draggable-dragging {\n    -webkit-transition: -webkit-box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    transition: -webkit-box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    transition: box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    transition: box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1), -webkit-box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    -webkit-box-shadow: 0 40px 64px 0 rgba(65, 78, 101, 0.1), 0 24px 32px 0 rgba(65, 78, 101, 0.1), 0 16px 16px 0 rgba(65, 78, 101, 0.1), 0 8px 8px 0 rgba(65, 78, 101, 0.1), 0 4px 4px 0 rgba(65, 78, 101, 0.1), 0 2px 2px 0 rgba(65, 78, 101, 0.1);\n            box-shadow: 0 40px 64px 0 rgba(65, 78, 101, 0.1), 0 24px 32px 0 rgba(65, 78, 101, 0.1), 0 16px 16px 0 rgba(65, 78, 101, 0.1), 0 8px 8px 0 rgba(65, 78, 101, 0.1), 0 4px 4px 0 rgba(65, 78, 101, 0.1), 0 2px 2px 0 rgba(65, 78, 101, 0.1);\n    border-radius: 4px; }\n  .react-grid-item.react-grid-placeholder {\n    border-radius: 4px;\n    background: #F5A700; }\n\n@media only screen and (max-width: 574px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n@media only screen and (min-width: 575px) and (max-width: 767px) {\n  .dshLayout--viewing .react-grid-item {\n    position: static !important;\n    width: calc(100% - 16px) !important;\n    margin: 8px; }\n  .dshLayout--viewing.dshLayout-withoutMargins .react-grid-item {\n    width: 100% !important;\n    margin: 0; } }\n\n/**\n  * EDITING MODE\n  * Use .dshLayout--editing to target editing state because\n  * .embPanel--editing doesn't get updating without a hard refresh\n  */\n.dshLayout-withoutMargins .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  -webkit-box-shadow: none;\n          box-shadow: none;\n  border-radius: 0; }\n\n.dshLayout-withoutMargins:not(.dshLayout--editing) .embPanel,\n.dshDashboardGrid__item--expanded .embPanel {\n  border-color: transparent; }\n\n.dshDashboardViewport {\n  width: 100%; }\n\n.dshDashboardViewport-withMargins {\n  width: 100%; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardEmbeddableContainerPublicPlugin=void 0;var React=_interopRequireWildcard(__webpack_require__(28));var _public=__webpack_require__(417);var _actions=__webpack_require__(430);var _dashboard_container_factory=__webpack_require__(433);var _public2=__webpack_require__(200);var _public3=__webpack_require__(31);var _expand_panel_action=__webpack_require__(431);var _replace_panel_action=__webpack_require__(447);var _url_generator=__webpack_require__(454);var _saved_dashboards=__webpack_require__(455);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var DashboardEmbeddableContainerPublicPlugin=function(){function DashboardEmbeddableContainerPublicPlugin(initializerContext){_classCallCheck(this,DashboardEmbeddableContainerPublicPlugin)}_createClass(DashboardEmbeddableContainerPublicPlugin,[{key:"setup",value:function setup(core,_ref){var share=_ref.share,uiActions=_ref.uiActions,embeddable=_ref.embeddable;var expandPanelAction=new _actions.ExpandPanelAction;uiActions.registerAction(expandPanelAction);uiActions.attachAction(_public.CONTEXT_MENU_TRIGGER,expandPanelAction);var startServices=core.getStartServices();if(share){share.urlGenerators.registerUrlGenerator((0,_url_generator.createDirectAccessDashboardLinkGenerator)(_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return startServices;case 2:_context.t0=_context.sent[0].application.getUrlForApp("dashboard");_context.next=5;return startServices;case 5:_context.t1=_context.sent[0].uiSettings.get("state:storeInSessionStorage");return _context.abrupt("return",{appBasePath:_context.t0,useHashedUrl:_context.t1});case 7:case"end":return _context.stop()}}}),_callee)})))))}var getStartServices=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _ref4,_ref5,coreStart,deps,useHideChrome,ExitFullScreenButton;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return core.getStartServices();case 2:_ref4=_context2.sent;_ref5=_slicedToArray(_ref4,2);coreStart=_ref5[0];deps=_ref5[1];useHideChrome=function useHideChrome(){React.useEffect((function(){coreStart.chrome.setIsVisible(false);return function(){return coreStart.chrome.setIsVisible(true)}}),[])};ExitFullScreenButton=function ExitFullScreenButton(props){useHideChrome();return React.createElement(_public3.ExitFullScreenButton,props)};return _context2.abrupt("return",{capabilities:coreStart.application.capabilities,application:coreStart.application,notifications:coreStart.notifications,overlays:coreStart.overlays,embeddable:deps.embeddable,inspector:deps.inspector,SavedObjectFinder:(0,_public2.getSavedObjectFinder)(coreStart.savedObjects,coreStart.uiSettings),ExitFullScreenButton:ExitFullScreenButton,uiActions:deps.uiActions});case 9:case"end":return _context2.stop()}}}),_callee2)})));return function getStartServices(){return _ref3.apply(this,arguments)}}();var factory=new _dashboard_container_factory.DashboardContainerFactory(getStartServices);embeddable.registerEmbeddableFactory(factory.type,factory)}},{key:"start",value:function start(core,plugins){var notifications=core.notifications;var uiActions=plugins.uiActions,indexPatterns=plugins.data.indexPatterns;var SavedObjectFinder=(0,_public2.getSavedObjectFinder)(core.savedObjects,core.uiSettings);var changeViewAction=new _actions.ReplacePanelAction(core,SavedObjectFinder,notifications,plugins.embeddable.getEmbeddableFactories);uiActions.registerAction(changeViewAction);uiActions.attachAction(_public.CONTEXT_MENU_TRIGGER,changeViewAction);var savedDashboardLoader=(0,_saved_dashboards.createSavedDashboardLoader)({savedObjectsClient:core.savedObjects.client,indexPatterns:indexPatterns,chrome:core.chrome,overlays:core.overlays});return{getSavedDashboardLoader:function getSavedDashboardLoader(){return savedDashboardLoader}}}},{key:"stop",value:function stop(){}}]);return DashboardEmbeddableContainerPublicPlugin}();exports.DashboardEmbeddableContainerPublicPlugin=DashboardEmbeddableContainerPublicPlugin},function(module,exports,__webpack_require__){if(window.__kbnDarkMode__){__webpack_require__(1076)}else{__webpack_require__(1078)}},function(module,exports,__webpack_require__){var api=__webpack_require__(2);var content=__webpack_require__(1077);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(3);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".embPanel {\n  z-index: auto;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  height: 100%;\n  min-height: 26px;\n  position: relative; }\n  .embPanel-isLoading {\n    -webkit-box-pack: center;\n    -webkit-justify-content: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n        -ms-flex-align: center;\n            align-items: center; }\n  .embPanel .embPanel__content {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-flex: 1;\n    -webkit-flex: 1 1 100%;\n        -ms-flex: 1 1 100%;\n            flex: 1 1 100%;\n    z-index: 1;\n    min-height: 0; }\n  .embPanel .embPanel__content--fullWidth {\n    width: 100%; }\n\n.embPanel__header {\n  -webkit-box-flex: 0;\n  -webkit-flex: 0 0 auto;\n      -ms-flex: 0 0 auto;\n          flex: 0 0 auto;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n  -webkit-justify-content: flex-end;\n      -ms-flex-pack: end;\n          justify-content: flex-end; }\n\n.embPanel__title {\n  color: #dfe5ef;\n  font-size: 12px;\n  font-size: 0.75rem;\n  line-height: 1.5;\n  line-height: 1.5rem;\n  font-weight: 700;\n  overflow: hidden;\n  line-height: 1.5;\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-flex-wrap: wrap;\n      -ms-flex-wrap: wrap;\n          flex-wrap: wrap;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n  .embPanel__title:not(:empty) {\n    line-height: 24px;\n    padding-left: 8px; }\n  .embPanel__title .embPanel__titleInner {\n    overflow: hidden;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    padding-right: 8px; }\n  .embPanel__title .embPanel__titleText {\n    max-width: 100%;\n    overflow: hidden !important;\n    text-overflow: ellipsis !important;\n    white-space: nowrap !important;\n    word-wrap: normal !important; }\n\n.embPanel__dragger:not(.embPanel__title) {\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1; }\n\n.embPanel__header--floater {\n  position: absolute;\n  right: 0;\n  top: 0;\n  left: 0;\n  z-index: 1000; }\n\n/**\n  * 1. Use opacity to make this element accessible to screen readers and keyboard.\n  * 2. Show on focus to enable keyboard accessibility.\n  * 3. Always show in editing mode\n  */\n.embPanel__optionsMenuButton {\n  background-color: rgba(212, 218, 229, 0.1);\n  border-bottom-right-radius: 0;\n  border-top-left-radius: 0; }\n  .embPanel__optionsMenuButton:focus {\n    background-color: #232635; }\n\n.embPanel .embPanel__optionsMenuButton {\n  opacity: 0;\n  /* 1 */ }\n  .embPanel .embPanel__optionsMenuButton:focus {\n    opacity: 1;\n    /* 2 */ }\n\n.embPanel:hover .embPanel__optionsMenuButton {\n  opacity: 1; }\n\n.embPanel--editing {\n  border-style: dashed;\n  border-color: #535966;\n  -webkit-transition: all 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  transition: all 150ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n  .embPanel--editing:hover, .embPanel--editing:focus {\n    -webkit-box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.15), 0 2px 2px -1px rgba(0, 0, 0, 0.3);\n            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.15), 0 2px 2px -1px rgba(0, 0, 0, 0.3); }\n  .embPanel--editing .embPanel__dragger {\n    -webkit-transition: background-color 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    transition: background-color 150ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n    .embPanel--editing .embPanel__dragger:hover {\n      background-color: rgba(255, 206, 122, 0.3);\n      cursor: move; }\n  .embPanel--editing .embPanel__optionsMenuButton {\n    opacity: 1;\n    /* 3 */ }\n\n.embPanel__error {\n  text-align: center;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  overflow: auto;\n  text-align: center;\n  padding: 8px; }\n\n.embPanel__optionsMenuForm {\n  padding: 16px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(2);var content=__webpack_require__(1079);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(3);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".embPanel {\n  z-index: auto;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  height: 100%;\n  min-height: 26px;\n  position: relative; }\n  .embPanel-isLoading {\n    -webkit-box-pack: center;\n    -webkit-justify-content: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n        -ms-flex-align: center;\n            align-items: center; }\n  .embPanel .embPanel__content {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-flex: 1;\n    -webkit-flex: 1 1 100%;\n        -ms-flex: 1 1 100%;\n            flex: 1 1 100%;\n    z-index: 1;\n    min-height: 0; }\n  .embPanel .embPanel__content--fullWidth {\n    width: 100%; }\n\n.embPanel__header {\n  -webkit-box-flex: 0;\n  -webkit-flex: 0 0 auto;\n      -ms-flex: 0 0 auto;\n          flex: 0 0 auto;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: end;\n  -webkit-justify-content: flex-end;\n      -ms-flex-pack: end;\n          justify-content: flex-end; }\n\n.embPanel__title {\n  color: #1a1c21;\n  font-size: 12px;\n  font-size: 0.75rem;\n  line-height: 1.5;\n  line-height: 1.5rem;\n  font-weight: 700;\n  overflow: hidden;\n  line-height: 1.5;\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-flex-wrap: wrap;\n      -ms-flex-wrap: wrap;\n          flex-wrap: wrap;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center; }\n  .embPanel__title:not(:empty) {\n    line-height: 24px;\n    padding-left: 8px; }\n  .embPanel__title .embPanel__titleInner {\n    overflow: hidden;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    padding-right: 8px; }\n  .embPanel__title .embPanel__titleText {\n    max-width: 100%;\n    overflow: hidden !important;\n    text-overflow: ellipsis !important;\n    white-space: nowrap !important;\n    word-wrap: normal !important; }\n\n.embPanel__dragger:not(.embPanel__title) {\n  -webkit-box-flex: 1;\n  -webkit-flex-grow: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1; }\n\n.embPanel__header--floater {\n  position: absolute;\n  right: 0;\n  top: 0;\n  left: 0;\n  z-index: 1000; }\n\n/**\n  * 1. Use opacity to make this element accessible to screen readers and keyboard.\n  * 2. Show on focus to enable keyboard accessibility.\n  * 3. Always show in editing mode\n  */\n.embPanel__optionsMenuButton {\n  background-color: rgba(52, 55, 65, 0.1);\n  border-bottom-right-radius: 0;\n  border-top-left-radius: 0; }\n  .embPanel__optionsMenuButton:focus {\n    background-color: #e6f0f8; }\n\n.embPanel .embPanel__optionsMenuButton {\n  opacity: 0;\n  /* 1 */ }\n  .embPanel .embPanel__optionsMenuButton:focus {\n    opacity: 1;\n    /* 2 */ }\n\n.embPanel:hover .embPanel__optionsMenuButton {\n  opacity: 1; }\n\n.embPanel--editing {\n  border-style: dashed;\n  border-color: #98A2B3;\n  -webkit-transition: all 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n  transition: all 150ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n  .embPanel--editing:hover, .embPanel--editing:focus {\n    -webkit-box-shadow: 0 4px 8px 0 rgba(152, 162, 179, 0.15), 0 2px 2px -1px rgba(152, 162, 179, 0.3);\n            box-shadow: 0 4px 8px 0 rgba(152, 162, 179, 0.15), 0 2px 2px -1px rgba(152, 162, 179, 0.3); }\n  .embPanel--editing .embPanel__dragger {\n    -webkit-transition: background-color 150ms cubic-bezier(0.694, 0.0482, 0.335, 1);\n    transition: background-color 150ms cubic-bezier(0.694, 0.0482, 0.335, 1); }\n    .embPanel--editing .embPanel__dragger:hover {\n      background-color: rgba(245, 167, 0, 0.1);\n      cursor: move; }\n  .embPanel--editing .embPanel__optionsMenuButton {\n    opacity: 1;\n    /* 3 */ }\n\n.embPanel__error {\n  text-align: center;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  overflow: auto;\n  text-align: center;\n  padding: 8px; }\n\n.embPanel__optionsMenuForm {\n  padding: 16px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmbeddablePublicPlugin=void 0;var _bootstrap=__webpack_require__(1081);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EmbeddablePublicPlugin=function(){function EmbeddablePublicPlugin(initializerContext){var _this=this;_classCallCheck(this,EmbeddablePublicPlugin);_defineProperty(this,"embeddableFactories",new Map);_defineProperty(this,"registerEmbeddableFactory",(function(embeddableFactoryId,factory){if(_this.embeddableFactories.has(embeddableFactoryId)){throw new Error("Embeddable factory [embeddableFactoryId = ".concat(embeddableFactoryId,"] already registered in Embeddables API."))}_this.embeddableFactories.set(embeddableFactoryId,factory)}));_defineProperty(this,"getEmbeddableFactory",(function(embeddableFactoryId){var factory=_this.embeddableFactories.get(embeddableFactoryId);if(!factory){throw new Error("Embeddable factory [embeddableFactoryId = ".concat(embeddableFactoryId,"] does not exist."))}return factory}))}_createClass(EmbeddablePublicPlugin,[{key:"setup",value:function setup(core,_ref){var uiActions=_ref.uiActions;(0,_bootstrap.bootstrap)(uiActions);return{registerEmbeddableFactory:this.registerEmbeddableFactory}}},{key:"start",value:function start(core){var _this2=this;return{getEmbeddableFactory:this.getEmbeddableFactory,getEmbeddableFactories:function getEmbeddableFactories(){return _this2.embeddableFactories.values()}}}},{key:"stop",value:function stop(){}}]);return EmbeddablePublicPlugin}();exports.EmbeddablePublicPlugin=EmbeddablePublicPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.bootstrap=void 0;var _lib=__webpack_require__(418);var bootstrap=function bootstrap(uiActions){uiActions.registerTrigger(_lib.contextMenuTrigger);uiActions.registerTrigger(_lib.panelBadgeTrigger);var actionApplyFilter=(0,_lib.createFilterAction)();uiActions.registerAction(actionApplyFilter)};exports.bootstrap=bootstrap},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _public=__webpack_require__(362);Object.keys(_public).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _public[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmbeddableActionStorage=void 0;function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var EmbeddableActionStorage=function(){function EmbeddableActionStorage(embbeddable){_classCallCheck(this,EmbeddableActionStorage);this.embbeddable=embbeddable}_createClass(EmbeddableActionStorage,[{key:"create",value:function(){var _create=_asyncToGenerator(regeneratorRuntime.mark((function _callee(event){var input,events,exists;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:input=this.embbeddable.getInput();events=input.events||[];exists=!!events.find((function(_ref){var eventId=_ref.eventId;return eventId===event.eventId}));if(!exists){_context.next=5;break}throw new Error("[EEXIST]: Event with [eventId = ".concat(event.eventId,"] already exists on ")+"[embeddable.id = ".concat(input.id,", embeddable.title = ").concat(input.title,"]."));case 5:this.embbeddable.updateInput(_objectSpread({},input,{events:[].concat(_toConsumableArray(events),[event])}));case 6:case"end":return _context.stop()}}}),_callee,this)})));function create(_x){return _create.apply(this,arguments)}return create}()},{key:"update",value:function(){var _update=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(event){var input,events,index;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:input=this.embbeddable.getInput();events=input.events||[];index=events.findIndex((function(_ref2){var eventId=_ref2.eventId;return eventId===event.eventId}));if(!(index===-1)){_context2.next=5;break}throw new Error("[ENOENT]: Event with [eventId = ".concat(event.eventId,"] could not be ")+"updated as it does not exist in "+"[embeddable.id = ".concat(input.id,", embeddable.title = ").concat(input.title,"]."));case 5:this.embbeddable.updateInput(_objectSpread({},input,{events:[].concat(_toConsumableArray(events.slice(0,index)),[event],_toConsumableArray(events.slice(index+1)))}));case 6:case"end":return _context2.stop()}}}),_callee2,this)})));function update(_x2){return _update.apply(this,arguments)}return update}()},{key:"remove",value:function(){var _remove=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(eventId){var input,events,index;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:input=this.embbeddable.getInput();events=input.events||[];index=events.findIndex((function(event){return eventId===event.eventId}));if(!(index===-1)){_context3.next=5;break}throw new Error("[ENOENT]: Event with [eventId = ".concat(eventId,"] could not be ")+"removed as it does not exist in "+"[embeddable.id = ".concat(input.id,", embeddable.title = ").concat(input.title,"]."));case 5:this.embbeddable.updateInput(_objectSpread({},input,{events:[].concat(_toConsumableArray(events.slice(0,index)),_toConsumableArray(events.slice(index+1)))}));case 6:case"end":return _context3.stop()}}}),_callee3,this)})));function remove(_x3){return _remove.apply(this,arguments)}return remove}()},{key:"read",value:function(){var _read=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(eventId){var input,events,event;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:input=this.embbeddable.getInput();events=input.events||[];event=events.find((function(ev){return eventId===ev.eventId}));if(event){_context4.next=5;break}throw new Error("[ENOENT]: Event with [eventId = ".concat(eventId,"] could not be found in ")+"[embeddable.id = ".concat(input.id,", embeddable.title = ").concat(input.title,"]."));case 5:return _context4.abrupt("return",event);case 6:case"end":return _context4.stop()}}}),_callee4,this)})));function read(_x4){return _read.apply(this,arguments)}return read}()},{key:"__list",value:function __list(){var input=this.embbeddable.getInput();return input.events||[]}},{key:"count",value:function(){var _count=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:return _context5.abrupt("return",this.__list().length);case 1:case"end":return _context5.stop()}}}),_callee5,this)})));function count(){return _count.apply(this,arguments)}return count}()},{key:"list",value:function(){var _list=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(){return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:return _context6.abrupt("return",this.__list());case 1:case"end":return _context6.stop()}}}),_callee6,this)})));function list(){return _list.apply(this,arguments)}return list}()}]);return EmbeddableActionStorage}();exports.EmbeddableActionStorage=EmbeddableActionStorage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmbeddableFactory=void 0;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EmbeddableFactory=function(){function EmbeddableFactory(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},savedObjectMetaData=_ref.savedObjectMetaData;_classCallCheck(this,EmbeddableFactory);_defineProperty(this,"type",void 0);_defineProperty(this,"savedObjectMetaData",void 0);_defineProperty(this,"isContainerType",false);this.savedObjectMetaData=savedObjectMetaData}_createClass(EmbeddableFactory,[{key:"canCreateNew",value:function canCreateNew(){return true}},{key:"getDefaultInput",value:function getDefaultInput(partial){return{}}},{key:"getExplicitInput",value:function(){var _getExplicitInput=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",{});case 1:case"end":return _context.stop()}}}),_callee)})));function getExplicitInput(){return _getExplicitInput.apply(this,arguments)}return getExplicitInput}()},{key:"createFromSavedObject",value:function createFromSavedObject(savedObjectId,input,parent){throw new Error("Creation from saved object not supported by type ".concat(this.type))}}]);return EmbeddableFactory}();exports.EmbeddableFactory=EmbeddableFactory},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.isErrorEmbeddable=isErrorEmbeddable;exports.ErrorEmbeddable=exports.ERROR_EMBEDDABLE_TYPE=void 0;var _eui=__webpack_require__(29);var _react=_interopRequireDefault(__webpack_require__(28));var _reactDom=_interopRequireDefault(__webpack_require__(35));var _public=__webpack_require__(31);var _embeddable=__webpack_require__(420);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ERROR_EMBEDDABLE_TYPE="error";exports.ERROR_EMBEDDABLE_TYPE=ERROR_EMBEDDABLE_TYPE;function isErrorEmbeddable(embeddable){return embeddable.error!==undefined}var ErrorEmbeddable=function(_Embeddable){_inherits(ErrorEmbeddable,_Embeddable);function ErrorEmbeddable(error,input,parent){var _this;_classCallCheck(this,ErrorEmbeddable);_this=_possibleConstructorReturn(this,_getPrototypeOf(ErrorEmbeddable).call(this,input,{},parent));_defineProperty(_assertThisInitialized(_this),"type",ERROR_EMBEDDABLE_TYPE);_defineProperty(_assertThisInitialized(_this),"error",void 0);_defineProperty(_assertThisInitialized(_this),"dom",void 0);_this.error=error;return _this}_createClass(ErrorEmbeddable,[{key:"reload",value:function reload(){}},{key:"render",value:function render(dom){var title=typeof this.error==="string"?this.error:this.error.message;this.dom=dom;_reactDom.default.render(_react.default.createElement("div",{className:"embPanel__error embPanel__content","data-test-subj":"embeddableStackError"},_react.default.createElement(_eui.EuiText,{color:"subdued",size:"xs"},_react.default.createElement(_eui.EuiIcon,{type:"alert",color:"danger"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_public.Markdown,{markdown:title,openLinksInNewTab:true,"data-test-subj":"errorMessageMarkdown"}))),dom)}},{key:"destroy",value:function destroy(){if(this.dom){_reactDom.default.unmountComponentAtNode(this.dom)}}}]);return ErrorEmbeddable}(_embeddable.Embeddable);exports.ErrorEmbeddable=ErrorEmbeddable},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.withEmbeddableSubscription=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var Rx=_interopRequireWildcard(__webpack_require__(33));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var withEmbeddableSubscription=function withEmbeddableSubscription(WrappedComponent){var _temp;return _temp=function(_React$Component){_inherits(WithEmbeddableSubscription,_React$Component);function WithEmbeddableSubscription(props){var _this;_classCallCheck(this,WithEmbeddableSubscription);_this=_possibleConstructorReturn(this,_getPrototypeOf(WithEmbeddableSubscription).call(this,props));_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_defineProperty(_assertThisInitialized(_this),"mounted",false);_this.state={input:_this.props.embeddable.getInput(),output:_this.props.embeddable.getOutput()};return _this}_createClass(WithEmbeddableSubscription,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.mounted=true;this.subscription=Rx.merge(this.props.embeddable.getOutput$(),this.props.embeddable.getInput$()).subscribe((function(){if(_this2.mounted){_this2.setState({input:_this2.props.embeddable.getInput(),output:_this2.props.embeddable.getOutput()})}}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false;if(this.subscription){this.subscription.unsubscribe()}}},{key:"render",value:function render(){return _react.default.createElement(WrappedComponent,{input:this.state.input,output:this.state.output,embeddable:this.props.embeddable})}}]);return WithEmbeddableSubscription}(_react.default.Component),_temp};exports.withEmbeddableSubscription=withEmbeddableSubscription},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.EmbeddableFactoryRenderer=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _i18n=__webpack_require__(1);var _embeddable_root=__webpack_require__(421);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EmbeddableFactoryRenderer=function(_React$Component){_inherits(EmbeddableFactoryRenderer,_React$Component);function EmbeddableFactoryRenderer(props){var _this;_classCallCheck(this,EmbeddableFactoryRenderer);_this=_possibleConstructorReturn(this,_getPrototypeOf(EmbeddableFactoryRenderer).call(this,props));_defineProperty(_assertThisInitialized(_this),"embeddable",void 0);_this.state={loading:true,error:undefined};return _this}_createClass(EmbeddableFactoryRenderer,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;var factory=this.props.getEmbeddableFactory(this.props.type);if(factory===undefined){this.setState({loading:false,error:_i18n.i18n.translate("embeddableApi.errors.factoryDoesNotExist",{defaultMessage:"Embeddable factory of {type} does not exist. Ensure all neccessary plugins are installed and enabled.",values:{type:this.props.type}})});return}factory.create(this.props.input).then((function(embeddable){_this2.embeddable=embeddable;_this2.setState({loading:false})}))}},{key:"render",value:function render(){return _react.default.createElement(_embeddable_root.EmbeddableRoot,{embeddable:this.embeddable,loading:this.state.loading,error:this.state.error})}}]);return EmbeddableFactoryRenderer}(_react.default.Component);exports.EmbeddableFactoryRenderer=EmbeddableFactoryRenderer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createFilterAction=createFilterAction;exports.ACTION_APPLY_FILTER=void 0;var _i18n=__webpack_require__(1);var _ui_actions=__webpack_require__(246);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var ACTION_APPLY_FILTER="ACTION_APPLY_FILTER";exports.ACTION_APPLY_FILTER=ACTION_APPLY_FILTER;function isCompatible(_x){return _isCompatible.apply(this,arguments)}function _isCompatible(){_isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(context){var root;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(context.embeddable===undefined)){_context2.next=2;break}return _context2.abrupt("return",false);case 2:root=context.embeddable.getRoot();return _context2.abrupt("return",Boolean(root.getInput().filters!==undefined&&context.filters!==undefined));case 4:case"end":return _context2.stop()}}}),_callee2)})));return _isCompatible.apply(this,arguments)}function createFilterAction(){return(0,_ui_actions.createAction)({type:ACTION_APPLY_FILTER,id:ACTION_APPLY_FILTER,getDisplayName:function getDisplayName(){return _i18n.i18n.translate("embeddableApi.actions.applyFilterActionTitle",{defaultMessage:"Apply filter to current view"})},isCompatible:isCompatible,execute:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var embeddable,filters,root;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref.embeddable,filters=_ref.filters;if(!(!filters||!embeddable)){_context.next=3;break}throw new Error("Applying a filter requires a filter and embeddable as context");case 3:_context.next=5;return isCompatible({embeddable:embeddable,filters:filters});case 5:if(_context.sent){_context.next=7;break}throw new _ui_actions.IncompatibleActionError;case 7:root=embeddable.getRoot();root.updateInput({filters:filters});case 9:case"end":return _context.stop()}}}),_callee)})));function execute(_x2){return _execute.apply(this,arguments)}return execute}()})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EditPanelAction=exports.ACTION_EDIT_PANEL=void 0;var _i18n=__webpack_require__(1);var _types=__webpack_require__(130);var _errors=__webpack_require__(197);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ACTION_EDIT_PANEL="editPanel";exports.ACTION_EDIT_PANEL=ACTION_EDIT_PANEL;var EditPanelAction=function(){function EditPanelAction(getEmbeddableFactory){_classCallCheck(this,EditPanelAction);this.getEmbeddableFactory=getEmbeddableFactory;_defineProperty(this,"type",ACTION_EDIT_PANEL);_defineProperty(this,"id",ACTION_EDIT_PANEL);_defineProperty(this,"order",15)}_createClass(EditPanelAction,[{key:"getDisplayName",value:function getDisplayName(_ref){var embeddable=_ref.embeddable;var factory=this.getEmbeddableFactory(embeddable.type);if(!factory){throw new _errors.EmbeddableFactoryNotFoundError(embeddable.type)}return _i18n.i18n.translate("embeddableApi.panel.editPanel.displayName",{defaultMessage:"Edit {value}",values:{value:factory.getDisplayName()}})}},{key:"getIconType",value:function getIconType(){return"pencil"}},{key:"isCompatible",value:function(){var _isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref2){var embeddable,canEditEmbeddable,inDashboardEditMode;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref2.embeddable;canEditEmbeddable=Boolean(embeddable&&embeddable.getOutput().editable&&embeddable.getOutput().editUrl);inDashboardEditMode=embeddable.getInput().viewMode===_types.ViewMode.EDIT;return _context.abrupt("return",Boolean(canEditEmbeddable&&inDashboardEditMode));case 4:case"end":return _context.stop()}}}),_callee)})));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}()},{key:"execute",value:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return");case 1:case"end":return _context2.stop()}}}),_callee2)})));function execute(){return _execute.apply(this,arguments)}return execute}()},{key:"getHref",value:function getHref(_ref3){var embeddable=_ref3.embeddable;var editUrl=embeddable?embeddable.getOutput().editUrl:undefined;return editUrl?editUrl:""}}]);return EditPanelAction}();exports.EditPanelAction=EditPanelAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.panelBadgeTrigger=exports.PANEL_BADGE_TRIGGER=exports.contextMenuTrigger=exports.CONTEXT_MENU_TRIGGER=void 0;var CONTEXT_MENU_TRIGGER="CONTEXT_MENU_TRIGGER";exports.CONTEXT_MENU_TRIGGER=CONTEXT_MENU_TRIGGER;var contextMenuTrigger={id:CONTEXT_MENU_TRIGGER,title:"Context menu",description:"Triggered on top-right corner context-menu select."};exports.contextMenuTrigger=contextMenuTrigger;var PANEL_BADGE_TRIGGER="PANEL_BADGE_TRIGGER";exports.PANEL_BADGE_TRIGGER=PANEL_BADGE_TRIGGER;var panelBadgeTrigger={id:PANEL_BADGE_TRIGGER,title:"Panel badges",description:"Actions appear in title bar when an embeddable loads in a panel"};exports.panelBadgeTrigger=panelBadgeTrigger},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={IContainer:true,PanelState:true,ContainerInput:true,ContainerOutput:true,Container:true};Object.defineProperty(exports,"IContainer",{enumerable:true,get:function get(){return _i_container.IContainer}});Object.defineProperty(exports,"PanelState",{enumerable:true,get:function get(){return _i_container.PanelState}});Object.defineProperty(exports,"ContainerInput",{enumerable:true,get:function get(){return _i_container.ContainerInput}});Object.defineProperty(exports,"ContainerOutput",{enumerable:true,get:function get(){return _i_container.ContainerOutput}});Object.defineProperty(exports,"Container",{enumerable:true,get:function get(){return _container.Container}});var _i_container=__webpack_require__(1093);var _container=__webpack_require__(1094);var _embeddable_child_panel=__webpack_require__(1097);Object.keys(_embeddable_child_panel).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _embeddable_child_panel[key]}})}))},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.Container=void 0;var _uuid=_interopRequireDefault(__webpack_require__(1095));var _rxjs=__webpack_require__(33);var _embeddables=__webpack_require__(419);var _errors=__webpack_require__(197);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getKeys=function getKeys(o){return Object.keys(o)};var Container=function(_Embeddable){_inherits(Container,_Embeddable);function Container(input,output,getFactory,parent){var _this;_classCallCheck(this,Container);_this=_possibleConstructorReturn(this,_getPrototypeOf(Container).call(this,input,output,parent));_this.getFactory=getFactory;_defineProperty(_assertThisInitialized(_this),"isContainer",true);_defineProperty(_assertThisInitialized(_this),"children",{});_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_this.subscription=_this.getInput$().subscribe((function(){return _this.maybeUpdateChildren()}));return _this}_createClass(Container,[{key:"updateInputForChild",value:function updateInputForChild(id,changes){if(!this.input.panels[id]){throw new _errors.PanelNotFoundError}var panels={panels:_objectSpread({},this.input.panels,_defineProperty({},id,_objectSpread({},this.input.panels[id],{explicitInput:_objectSpread({},this.input.panels[id].explicitInput,{},changes)})))};this.updateInput(panels)}},{key:"reload",value:function reload(){Object.values(this.children).forEach((function(child){return child.reload()}))}},{key:"addNewEmbeddable",value:function(){var _addNewEmbeddable=_asyncToGenerator(regeneratorRuntime.mark((function _callee(type,explicitInput){var factory,panelState;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:factory=this.getFactory(type);if(factory){_context.next=3;break}throw new _errors.EmbeddableFactoryNotFoundError(type);case 3:panelState=this.createNewPanelState(factory,explicitInput);return _context.abrupt("return",this.createAndSaveEmbeddable(type,panelState));case 5:case"end":return _context.stop()}}}),_callee,this)})));function addNewEmbeddable(_x,_x2){return _addNewEmbeddable.apply(this,arguments)}return addNewEmbeddable}()},{key:"addSavedObjectEmbeddable",value:function(){var _addSavedObjectEmbeddable=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(type,savedObjectId){var factory,panelState;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:factory=this.getFactory(type);panelState=this.createNewPanelState(factory);panelState.savedObjectId=savedObjectId;return _context2.abrupt("return",this.createAndSaveEmbeddable(type,panelState));case 4:case"end":return _context2.stop()}}}),_callee2,this)})));function addSavedObjectEmbeddable(_x3,_x4){return _addSavedObjectEmbeddable.apply(this,arguments)}return addSavedObjectEmbeddable}()},{key:"removeEmbeddable",value:function removeEmbeddable(embeddableId){var panels=_objectSpread({},this.input.panels);delete panels[embeddableId];this.updateInput({panels:panels})}},{key:"getChildIds",value:function getChildIds(){return Object.keys(this.children)}},{key:"getChild",value:function getChild(id){return this.children[id]}},{key:"getInputForChild",value:function getInputForChild(embeddableId){var containerInput=this.getInheritedInput(embeddableId);var panelState=this.getPanelState(embeddableId);var explicitInput=panelState.explicitInput;var explicitFiltered={};var keys=getKeys(panelState.explicitInput);keys.forEach((function(key){if(explicitInput[key]===undefined&&containerInput[key]!==undefined){return}explicitFiltered[key]=explicitInput[key]}));return _objectSpread({},containerInput,{},explicitFiltered)}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Container.prototype),"destroy",this).call(this);Object.values(this.children).forEach((function(child){return child.destroy()}));this.subscription.unsubscribe()}},{key:"untilEmbeddableLoaded",value:function(){var _untilEmbeddableLoaded=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(id){var _this2=this;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(this.input.panels[id]){_context3.next=2;break}throw new _errors.PanelNotFoundError;case 2:if(!this.output.embeddableLoaded[id]){_context3.next=4;break}return _context3.abrupt("return",this.children[id]);case 4:return _context3.abrupt("return",new Promise((function(resolve,reject){var subscription=(0,_rxjs.merge)(_this2.getOutput$(),_this2.getInput$()).subscribe((function(){if(_this2.output.embeddableLoaded[id]){subscription.unsubscribe();resolve(_this2.children[id])}if(_this2.input.panels[id]===undefined){subscription.unsubscribe();resolve(undefined)}}))})));case 5:case"end":return _context3.stop()}}}),_callee3,this)})));function untilEmbeddableLoaded(_x5){return _untilEmbeddableLoaded.apply(this,arguments)}return untilEmbeddableLoaded}()},{key:"createNewPanelState",value:function createNewPanelState(factory){var partial=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var embeddableId=partial.id||_uuid.default.v4();var explicitInput=this.createNewExplicitEmbeddableInput(embeddableId,factory,partial);return{type:factory.type,explicitInput:_objectSpread({id:embeddableId},explicitInput)}}},{key:"getPanelState",value:function getPanelState(embeddableId){if(this.input.panels[embeddableId]===undefined){throw new _errors.PanelNotFoundError}var panelState=this.input.panels[embeddableId];return panelState}},{key:"createAndSaveEmbeddable",value:function(){var _createAndSaveEmbeddable=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(type,panelState){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this.updateInput({panels:_objectSpread({},this.input.panels,_defineProperty({},panelState.explicitInput.id,panelState))});_context4.next=3;return this.untilEmbeddableLoaded(panelState.explicitInput.id);case 3:return _context4.abrupt("return",_context4.sent);case 4:case"end":return _context4.stop()}}}),_callee4,this)})));function createAndSaveEmbeddable(_x6,_x7){return _createAndSaveEmbeddable.apply(this,arguments)}return createAndSaveEmbeddable}()},{key:"createNewExplicitEmbeddableInput",value:function createNewExplicitEmbeddableInput(id,factory){var partial=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var inheritedInput=this.getInheritedInput(id);var defaults=factory.getDefaultInput(partial);var explicitInput=partial;getKeys(defaults).forEach((function(key){var inheritedValue=inheritedInput[key];if(inheritedValue===undefined&&explicitInput[key]===undefined){explicitInput[key]=defaults[key]}}));return explicitInput}},{key:"onPanelRemoved",value:function onPanelRemoved(id){var embeddable=this.getChild(id);if(embeddable){embeddable.destroy();delete this.children[id]}this.updateOutput({embeddableLoaded:_objectSpread({},this.output.embeddableLoaded,_defineProperty({},id,undefined))})}},{key:"onPanelAdded",value:function(){var _onPanelAdded=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(panel){var embeddable,inputForChild,factory;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:this.updateOutput({embeddableLoaded:_objectSpread({},this.output.embeddableLoaded,_defineProperty({},panel.explicitInput.id,false))});inputForChild=this.getInputForChild(panel.explicitInput.id);_context5.prev=2;factory=this.getFactory(panel.type);if(factory){_context5.next=6;break}throw new _errors.EmbeddableFactoryNotFoundError(panel.type);case 6:if(!panel.savedObjectId){_context5.next=12;break}_context5.next=9;return factory.createFromSavedObject(panel.savedObjectId,inputForChild,this);case 9:_context5.t0=_context5.sent;_context5.next=15;break;case 12:_context5.next=14;return factory.create(inputForChild,this);case 14:_context5.t0=_context5.sent;case 15:embeddable=_context5.t0;_context5.next=21;break;case 18:_context5.prev=18;_context5.t1=_context5["catch"](2);embeddable=new _embeddables.ErrorEmbeddable(_context5.t1,{id:panel.explicitInput.id},this);case 21:if(!embeddable){_context5.next=30;break}if(this.input.panels[panel.explicitInput.id]){_context5.next=25;break}embeddable.destroy();return _context5.abrupt("return");case 25:if(embeddable.getOutput().savedObjectId){this.updateInput({panels:_objectSpread({},this.input.panels,_defineProperty({},panel.explicitInput.id,_objectSpread({},this.input.panels[panel.explicitInput.id],{},embeddable.getOutput().savedObjectId?{savedObjectId:embeddable.getOutput().savedObjectId}:undefined,{explicitInput:_objectSpread({},this.input.panels[panel.explicitInput.id].explicitInput)})))})}this.children[embeddable.id]=embeddable;this.updateOutput({embeddableLoaded:_objectSpread({},this.output.embeddableLoaded,_defineProperty({},panel.explicitInput.id,true))});_context5.next=31;break;case 30:if(embeddable===undefined){this.removeEmbeddable(panel.explicitInput.id)}case 31:return _context5.abrupt("return",embeddable);case 32:case"end":return _context5.stop()}}}),_callee5,this,[[2,18]])})));function onPanelAdded(_x8){return _onPanelAdded.apply(this,arguments)}return onPanelAdded}()},{key:"maybeUpdateChildren",value:function maybeUpdateChildren(){var _this3=this;var allIds=Object.keys(_objectSpread({},this.input.panels,{},this.output.embeddableLoaded));allIds.forEach((function(id){if(_this3.input.panels[id]!==undefined&&_this3.output.embeddableLoaded[id]===undefined){_this3.onPanelAdded(_this3.input.panels[id])}else if(_this3.input.panels[id]===undefined&&_this3.output.embeddableLoaded[id]!==undefined){_this3.onPanelRemoved(id)}}))}}]);return Container}(_embeddables.Embeddable);exports.Container=Container},,,function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.EmbeddableChildPanel=void 0;var _classnames=_interopRequireDefault(__webpack_require__(87));var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);var _panel=__webpack_require__(424);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EmbeddableChildPanel=function(_React$Component){_inherits(EmbeddableChildPanel,_React$Component);function EmbeddableChildPanel(props){var _this;_classCallCheck(this,EmbeddableChildPanel);_this=_possibleConstructorReturn(this,_getPrototypeOf(EmbeddableChildPanel).call(this,props));_defineProperty(_assertThisInitialized(_this),"mounted",void 0);_defineProperty(_assertThisInitialized(_this),"embeddable",void 0);_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_this.state={loading:true};_this.mounted=false;return _this}_createClass(EmbeddableChildPanel,[{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var container;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.mounted=true;container=this.props.container;_context.next=4;return container.untilEmbeddableLoaded(this.props.embeddableId);case 4:this.embeddable=_context.sent;if(this.mounted){this.setState({loading:false})}case 6:case"end":return _context.stop()}}}),_callee,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false;if(this.subscription){this.subscription.unsubscribe()}}},{key:"render",value:function render(){var classes=(0,_classnames.default)("embPanel",{"embPanel-isLoading":this.state.loading});return _react.default.createElement("div",{className:classes},this.state.loading||!this.embeddable?_react.default.createElement(_eui.EuiLoadingChart,{size:"l",mono:true}):_react.default.createElement(_panel.EmbeddablePanel,{embeddable:this.embeddable,getActions:this.props.getActions,getEmbeddableFactory:this.props.getEmbeddableFactory,getAllEmbeddableFactories:this.props.getAllEmbeddableFactories,overlays:this.props.overlays,notifications:this.props.notifications,inspector:this.props.inspector,SavedObjectFinder:this.props.SavedObjectFinder}))}}]);return EmbeddableChildPanel}(_react.default.Component);exports.EmbeddableChildPanel=EmbeddableChildPanel},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.EmbeddablePanel=void 0;var _eui=__webpack_require__(29);var _classnames=_interopRequireDefault(__webpack_require__(87));var _react=_interopRequireDefault(__webpack_require__(28));var _ui_actions=__webpack_require__(246);var _public=__webpack_require__(31);var _triggers=__webpack_require__(423);var _types=__webpack_require__(130);var _panel_actions=__webpack_require__(425);var _add_panel_action=__webpack_require__(427);var _customize_panel_action=__webpack_require__(429);var _panel_header=__webpack_require__(1104);var _inspect_panel_action=__webpack_require__(426);var _actions=__webpack_require__(422);var _customize_panel_modal=__webpack_require__(1106);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var EmbeddablePanel=function(_React$Component){_inherits(EmbeddablePanel,_React$Component);function EmbeddablePanel(props){var _this;_classCallCheck(this,EmbeddablePanel);_this=_possibleConstructorReturn(this,_getPrototypeOf(EmbeddablePanel).call(this,props));_defineProperty(_assertThisInitialized(_this),"embeddableRoot",void 0);_defineProperty(_assertThisInitialized(_this),"parentSubscription",void 0);_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_defineProperty(_assertThisInitialized(_this),"mounted",false);_defineProperty(_assertThisInitialized(_this),"generateId",(0,_eui.htmlIdGenerator)());_defineProperty(_assertThisInitialized(_this),"onFocus",(function(focusedPanelIndex){_this.setState({focusedPanelIndex:focusedPanelIndex})}));_defineProperty(_assertThisInitialized(_this),"onBlur",(function(blurredPanelIndex){if(_this.state.focusedPanelIndex===blurredPanelIndex){_this.setState({focusedPanelIndex:undefined})}}));_defineProperty(_assertThisInitialized(_this),"closeMyContextMenuPanel",(function(){if(_this.mounted){_this.setState({closeContextMenu:true},(function(){if(_this.mounted){_this.setState({closeContextMenu:false})}}))}}));_defineProperty(_assertThisInitialized(_this),"getActionContextMenuPanel",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var actions,_this$props$embeddabl,disabledActions,createGetUserData,extraActions,sorted;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.props.getActions(_triggers.CONTEXT_MENU_TRIGGER,{embeddable:_this.props.embeddable});case 2:actions=_context2.sent;_this$props$embeddabl=_this.props.embeddable.getInput(),disabledActions=_this$props$embeddabl.disabledActions;if(disabledActions){actions=actions.filter((function(action){return disabledActions.indexOf(action.id)===-1}))}createGetUserData=function createGetUserData(overlays){return function(){var _getUserData=_asyncToGenerator(regeneratorRuntime.mark((function _callee(context){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise((function(resolve){var session=overlays.openModal((0,_public.toMountPoint)(_react.default.createElement(_customize_panel_modal.CustomizePanelModal,{embeddable:context.embeddable,updateTitle:function updateTitle(title){session.close();resolve({title:title})}})),{"data-test-subj":"customizePanel"})})));case 1:case"end":return _context.stop()}}}),_callee)})));function getUserData(_x){return _getUserData.apply(this,arguments)}return getUserData}()};extraActions=[new _customize_panel_action.CustomizePanelTitleAction(createGetUserData(_this.props.overlays)),new _add_panel_action.AddPanelAction(_this.props.getEmbeddableFactory,_this.props.getAllEmbeddableFactories,_this.props.overlays,_this.props.notifications,_this.props.SavedObjectFinder),new _inspect_panel_action.InspectPanelAction(_this.props.inspector),new _panel_actions.RemovePanelAction,new _actions.EditPanelAction(_this.props.getEmbeddableFactory)];sorted=actions.concat(extraActions).sort((function(a,b){var bOrder=b.order||0;var aOrder=a.order||0;return bOrder-aOrder}));_context2.next=10;return(0,_ui_actions.buildContextMenuForActions)({actions:sorted,actionContext:{embeddable:_this.props.embeddable},closeMenu:_this.closeMyContextMenuPanel});case 10:return _context2.abrupt("return",_context2.sent);case 11:case"end":return _context2.stop()}}}),_callee2)}))));var embeddable=_this.props.embeddable;var viewMode=embeddable.getInput().viewMode?embeddable.getInput().viewMode:_types.ViewMode.EDIT;var hidePanelTitles=embeddable.parent?Boolean(embeddable.parent.getInput().hidePanelTitles):false;_this.state={panels:[],viewMode:viewMode,hidePanelTitles:hidePanelTitles,closeContextMenu:false,badges:[]};_this.embeddableRoot=_react.default.createRef();return _this}_createClass(EmbeddablePanel,[{key:"refreshBadges",value:function(){var _refreshBadges=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var badges,_this$props$embeddabl2,disabledActions;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.props.getActions(_triggers.PANEL_BADGE_TRIGGER,{embeddable:this.props.embeddable});case 2:badges=_context3.sent;if(this.mounted){_context3.next=5;break}return _context3.abrupt("return");case 5:_this$props$embeddabl2=this.props.embeddable.getInput(),disabledActions=_this$props$embeddabl2.disabledActions;if(disabledActions){badges=badges.filter((function(badge){return disabledActions.indexOf(badge.id)===-1}))}this.setState({badges:badges});case 8:case"end":return _context3.stop()}}}),_callee3,this)})));function refreshBadges(){return _refreshBadges.apply(this,arguments)}return refreshBadges}()},{key:"UNSAFE_componentWillMount",value:function UNSAFE_componentWillMount(){var _this2=this;this.mounted=true;var embeddable=this.props.embeddable;var parent=embeddable.parent;this.subscription=embeddable.getInput$().subscribe(_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(_this2.mounted){_this2.setState({viewMode:embeddable.getInput().viewMode?embeddable.getInput().viewMode:_types.ViewMode.EDIT});_this2.refreshBadges()}case 1:case"end":return _context4.stop()}}}),_callee4)}))));if(parent){this.parentSubscription=parent.getInput$().subscribe(_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(_this2.mounted&&parent){_this2.setState({hidePanelTitles:Boolean(parent.getInput().hidePanelTitles)});_this2.refreshBadges()}case 1:case"end":return _context5.stop()}}}),_callee5)}))))}}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false;if(this.subscription){this.subscription.unsubscribe()}if(this.parentSubscription){this.parentSubscription.unsubscribe()}this.props.embeddable.destroy()}},{key:"render",value:function render(){var viewOnlyMode=this.state.viewMode===_types.ViewMode.VIEW;var classes=(0,_classnames.default)("embPanel",{"embPanel--editing":!viewOnlyMode});var title=this.props.embeddable.getTitle();var headerId=this.generateId();return _react.default.createElement(_eui.EuiPanel,{className:classes,"data-test-subj":"embeddablePanel",paddingSize:"none",role:"figure","aria-labelledby":headerId},!this.props.hideHeader&&_react.default.createElement(_panel_header.PanelHeader,{getActionContextMenuPanel:this.getActionContextMenuPanel,hidePanelTitles:this.state.hidePanelTitles,isViewMode:viewOnlyMode,closeContextMenu:this.state.closeContextMenu,title:title,badges:this.state.badges,embeddable:this.props.embeddable,headerId:headerId}),_react.default.createElement("div",{className:"embPanel__content",ref:this.embeddableRoot}))}},{key:"componentDidMount",value:function componentDidMount(){if(this.embeddableRoot.current){this.props.embeddable.render(this.embeddableRoot.current)}}}]);return EmbeddablePanel}(_react.default.Component);exports.EmbeddablePanel=EmbeddablePanel},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _add_panel_action=__webpack_require__(427);Object.keys(_add_panel_action).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _add_panel_action[key]}})}));var _open_add_panel_flyout=__webpack_require__(428);Object.keys(_open_add_panel_flyout).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _open_add_panel_flyout[key]}})}))},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.AddPanelFlyout=void 0;var _i18n=__webpack_require__(1);var _react=__webpack_require__(30);var _react2=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);var _errors=__webpack_require__(197);var _saved_object_finder_create_new=__webpack_require__(1101);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function capitalize(_ref){var _ref2=_toArray(_ref),first=_ref2[0],letters=_ref2.slice(1);return"".concat(first.toUpperCase()).concat(letters.join(""))}var AddPanelFlyout=function(_React$Component){_inherits(AddPanelFlyout,_React$Component);function AddPanelFlyout(props){var _this;_classCallCheck(this,AddPanelFlyout);_this=_possibleConstructorReturn(this,_getPrototypeOf(AddPanelFlyout).call(this,props));_defineProperty(_assertThisInitialized(_this),"lastToast",void 0);_defineProperty(_assertThisInitialized(_this),"state",{isCreateMenuOpen:false});_defineProperty(_assertThisInitialized(_this),"showToast",(function(name){if(_this.lastToast){_this.props.notifications.toasts.remove(_this.lastToast)}_this.lastToast=_this.props.notifications.toasts.addSuccess({title:_i18n.i18n.translate("embeddableApi.addPanel.savedObjectAddedToContainerSuccessMessageTitle",{defaultMessage:"{savedObjectName} was added",values:{savedObjectName:name}}),"data-test-subj":"addObjectToContainerSuccess"})}));_defineProperty(_assertThisInitialized(_this),"createNewEmbeddable",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee(type){var factory,explicitInput,embeddable;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.props.onClose();factory=_this.props.getFactory(type);if(factory){_context.next=4;break}throw new _errors.EmbeddableFactoryNotFoundError(type);case 4:_context.next=6;return factory.getExplicitInput();case 6:explicitInput=_context.sent;_context.next=9;return _this.props.container.addNewEmbeddable(type,explicitInput);case 9:embeddable=_context.sent;if(embeddable){_this.showToast(embeddable.getInput().title||"")}case 11:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref3.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"onAddPanel",function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(id,type,name){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.props.container.addSavedObjectEmbeddable(type,id);_this.showToast(name);case 2:case"end":return _context2.stop()}}}),_callee2)})));return function(_x2,_x3,_x4){return _ref4.apply(this,arguments)}}());return _this}_createClass(AddPanelFlyout,[{key:"getCreateMenuItems",value:function getCreateMenuItems(){var _this2=this;return _toConsumableArray(this.props.getAllFactories()).filter((function(factory){return factory.isEditable()&&!factory.isContainerType&&factory.canCreateNew()})).map((function(factory){return _react2.default.createElement(_eui.EuiContextMenuItem,{key:factory.type,"data-test-subj":"createNew-".concat(factory.type),onClick:function onClick(){return _this2.createNewEmbeddable(factory.type)},className:"embPanel__addItem"},capitalize(factory.getDisplayName()))}))}},{key:"render",value:function render(){var SavedObjectFinder=this.props.SavedObjectFinder;var savedObjectsFinder=_react2.default.createElement(SavedObjectFinder,{onChoose:this.onAddPanel,savedObjectMetaData:_toConsumableArray(this.props.getAllFactories()).filter((function(embeddableFactory){return Boolean(embeddableFactory.savedObjectMetaData)&&!embeddableFactory.isContainerType})).map((function(_ref5){var savedObjectMetaData=_ref5.savedObjectMetaData;return savedObjectMetaData})),showFilter:true,noItemsMessage:_i18n.i18n.translate("embeddableApi.addPanel.noMatchingObjectsMessage",{defaultMessage:"No matching objects found."})},_react2.default.createElement(_saved_object_finder_create_new.SavedObjectFinderCreateNew,{menuItems:this.getCreateMenuItems()}));return _react2.default.createElement(_eui.EuiFlyout,{ownFocus:true,onClose:this.props.onClose,"data-test-subj":"dashboardAddPanel"},_react2.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react2.default.createElement(_eui.EuiTitle,{size:"m"},_react2.default.createElement("h2",null,_react2.default.createElement(_react.FormattedMessage,{id:"embeddableApi.addPanel.Title",defaultMessage:"Add panels"})))),_react2.default.createElement(_eui.EuiFlyoutBody,null,savedObjectsFinder))}}]);return AddPanelFlyout}(_react2.default.Component);exports.AddPanelFlyout=AddPanelFlyout},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectFinderCreateNew=SavedObjectFinderCreateNew;var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _react2=__webpack_require__(30);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function SavedObjectFinderCreateNew(_ref){var menuItems=_ref.menuItems;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isCreateMenuOpen=_useState2[0],setCreateMenuOpen=_useState2[1];var toggleCreateMenu=function toggleCreateMenu(){setCreateMenuOpen(!isCreateMenuOpen)};var closeCreateMenu=function closeCreateMenu(){setCreateMenuOpen(false)};return _react.default.createElement(_eui.EuiPopover,{id:"createNew",button:_react.default.createElement(_eui.EuiButton,{"data-test-subj":"createNew",iconType:"arrowDown",iconSide:"right",onClick:toggleCreateMenu,fill:true},_react.default.createElement(_react2.FormattedMessage,{id:"embeddableApi.addPanel.createNewDefaultOption",defaultMessage:"Create new"})),isOpen:isCreateMenuOpen,closePopover:closeCreateMenu,panelPaddingSize:"none",anchorPosition:"downRight"},_react.default.createElement(_eui.EuiContextMenuPanel,{items:menuItems}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RemovePanelAction=exports.REMOVE_PANEL_ACTION=void 0;var _i18n=__webpack_require__(1);var _ui_actions=__webpack_require__(246);var _types=__webpack_require__(130);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var REMOVE_PANEL_ACTION="deletePanel";exports.REMOVE_PANEL_ACTION=REMOVE_PANEL_ACTION;function hasExpandedPanelInput(container){return container.getInput().expandedPanelId!==undefined}var RemovePanelAction=function(){function RemovePanelAction(){_classCallCheck(this,RemovePanelAction);_defineProperty(this,"type",REMOVE_PANEL_ACTION);_defineProperty(this,"id",REMOVE_PANEL_ACTION);_defineProperty(this,"order",5)}_createClass(RemovePanelAction,[{key:"getDisplayName",value:function getDisplayName(){return _i18n.i18n.translate("embeddableApi.panel.removePanel.displayName",{defaultMessage:"Delete from dashboard"})}},{key:"getIconType",value:function getIconType(){return"trash"}},{key:"isCompatible",value:function(){var _isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var embeddable,isPanelExpanded;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref.embeddable;isPanelExpanded=embeddable.parent&&hasExpandedPanelInput(embeddable.parent)&&embeddable.parent.getInput().expandedPanelId===embeddable.id;return _context.abrupt("return",Boolean(embeddable.parent&&embeddable.getInput().viewMode===_types.ViewMode.EDIT&&!isPanelExpanded));case 3:case"end":return _context.stop()}}}),_callee)})));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}()},{key:"execute",value:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(_ref2){var embeddable;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:embeddable=_ref2.embeddable;_context2.t0=!embeddable.parent;if(_context2.t0){_context2.next=6;break}_context2.next=5;return this.isCompatible({embeddable:embeddable});case 5:_context2.t0=!_context2.sent;case 6:if(!_context2.t0){_context2.next=8;break}throw new _ui_actions.IncompatibleActionError;case 8:embeddable.parent.removeEmbeddable(embeddable.id);case 9:case"end":return _context2.stop()}}}),_callee2,this)})));function execute(_x2){return _execute.apply(this,arguments)}return execute}()}]);return RemovePanelAction}();exports.RemovePanelAction=RemovePanelAction},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _customize_panel_action=__webpack_require__(429);Object.keys(_customize_panel_action).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _customize_panel_action[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PanelHeader=PanelHeader;var _i18n=__webpack_require__(1);var _eui=__webpack_require__(29);var _classnames=_interopRequireDefault(__webpack_require__(87));var _react=_interopRequireDefault(__webpack_require__(28));var _panel_options_menu=__webpack_require__(1105);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function renderBadges(badges,embeddable){return badges.map((function(badge){return _react.default.createElement(_eui.EuiBadge,{key:badge.id,className:"embPanel__headerBadge",iconType:badge.getIconType({embeddable:embeddable}),onClick:function onClick(){return badge.execute({embeddable:embeddable})},onClickAriaLabel:badge.getDisplayName({embeddable:embeddable})},badge.getDisplayName({embeddable:embeddable}))}))}function renderTooltip(description){return description!==""&&_react.default.createElement(_eui.EuiToolTip,{content:description,delay:"regular",position:"right"},_react.default.createElement(_eui.EuiIcon,{type:"iInCircle"}))}var VISUALIZE_EMBEDDABLE_TYPE="visualization";function getViewDescription(embeddable){if(embeddable.type===VISUALIZE_EMBEDDABLE_TYPE){var description=embeddable.getVisualizationDescription();if(description){return description}}return""}function PanelHeader(_ref){var title=_ref.title,isViewMode=_ref.isViewMode,hidePanelTitles=_ref.hidePanelTitles,getActionContextMenuPanel=_ref.getActionContextMenuPanel,closeContextMenu=_ref.closeContextMenu,badges=_ref.badges,embeddable=_ref.embeddable,headerId=_ref.headerId;var viewDescription=getViewDescription(embeddable);var showTitle=!isViewMode||title&&!hidePanelTitles||viewDescription!=="";var showPanelBar=badges.length>0||showTitle;var classes=(0,_classnames.default)("embPanel__header",{"embPanel__header--floater":!showPanelBar});if(!showPanelBar){return _react.default.createElement("div",{className:classes},_react.default.createElement(_panel_options_menu.PanelOptionsMenu,{getActionContextMenuPanel:getActionContextMenuPanel,isViewMode:isViewMode,closeContextMenu:closeContextMenu,title:title}))}return _react.default.createElement("figcaption",{className:classes,"data-test-subj":"embeddablePanelHeading-".concat((title||"").replace(/\s/g,""))},_react.default.createElement("h2",{id:headerId,"data-test-subj":"dashboardPanelTitle",className:"embPanel__title embPanel__dragger"},showTitle?_react.default.createElement("span",{className:"embPanel__titleInner"},_react.default.createElement("span",{className:"embPanel__titleText","aria-hidden":"true"},title),_react.default.createElement(_eui.EuiScreenReaderOnly,null,_react.default.createElement("span",null,_i18n.i18n.translate("embeddableApi.panel.enhancedDashboardPanelAriaLabel",{defaultMessage:"Dashboard panel: {title}",values:{title:title}}))),renderTooltip(viewDescription)):_react.default.createElement(_eui.EuiScreenReaderOnly,null,_react.default.createElement("span",null,_i18n.i18n.translate("embeddableApi.panel.dashboardPanelAriaLabel",{defaultMessage:"Dashboard panel"}))),renderBadges(badges,embeddable)),_react.default.createElement(_panel_options_menu.PanelOptionsMenu,{isViewMode:isViewMode,getActionContextMenuPanel:getActionContextMenuPanel,closeContextMenu:closeContextMenu,title:title}))}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.PanelOptionsMenu=void 0;var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var PanelOptionsMenu=function(_React$Component){_inherits(PanelOptionsMenu,_React$Component);_createClass(PanelOptionsMenu,null,[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props,state){if(props.closeContextMenu){return _objectSpread({},state,{isPopoverOpen:false})}else{return state}}}]);function PanelOptionsMenu(props){var _this;_classCallCheck(this,PanelOptionsMenu);_this=_possibleConstructorReturn(this,_getPrototypeOf(PanelOptionsMenu).call(this,props));_defineProperty(_assertThisInitialized(_this),"mounted",false);_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){if(_this.mounted){_this.setState({isPopoverOpen:false})}}));_defineProperty(_assertThisInitialized(_this),"toggleContextMenu",(function(){if(!_this.mounted)return;var after=function after(){if(!_this.state.isPopoverOpen)return;_this.setState({actionContextMenuPanel:undefined});_this.props.getActionContextMenuPanel().then((function(actionContextMenuPanel){if(!_this.mounted)return;_this.setState({actionContextMenuPanel:actionContextMenuPanel})})).catch((function(error){return console.error(error)}))};_this.setState((function(_ref){var isPopoverOpen=_ref.isPopoverOpen;return{isPopoverOpen:!isPopoverOpen}}),after)}));_this.state={actionContextMenuPanel:undefined,isPopoverOpen:false};return _this}_createClass(PanelOptionsMenu,[{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var actionContextMenuPanel;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.mounted=true;this.setState({actionContextMenuPanel:undefined});_context.next=4;return this.props.getActionContextMenuPanel();case 4:actionContextMenuPanel=_context.sent;if(this.mounted){this.setState({actionContextMenuPanel:actionContextMenuPanel})}case 6:case"end":return _context.stop()}}}),_callee,this)})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false}},{key:"render",value:function render(){var _this$props=this.props,isViewMode=_this$props.isViewMode,title=_this$props.title;var enhancedAriaLabel=_i18n.i18n.translate("embeddableApi.panel.optionsMenu.panelOptionsButtonEnhancedAriaLabel",{defaultMessage:"Panel options for {title}",values:{title:title}});var ariaLabelWithoutTitle=_i18n.i18n.translate("embeddableApi.panel.optionsMenu.panelOptionsButtonAriaLabel",{defaultMessage:"Panel options"});var button=_react.default.createElement(_eui.EuiButtonIcon,{iconType:isViewMode?"boxesHorizontal":"gear",color:"text",className:"embPanel__optionsMenuButton","aria-label":title?enhancedAriaLabel:ariaLabelWithoutTitle,"data-test-subj":"embeddablePanelToggleMenuIcon",onClick:this.toggleContextMenu});return _react.default.createElement(_eui.EuiPopover,{className:"embPanel__optionsMenuPopover",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downRight","data-test-subj":this.state.isPopoverOpen?"embeddablePanelContextMenuOpen":"embeddablePanelContextMenuClosed",withTitle:true},_react.default.createElement(_eui.EuiContextMenu,{initialPanelId:"mainMenu",panels:this.state.actionContextMenuPanel?[this.state.actionContextMenuPanel]:[]}))}}]);return PanelOptionsMenu}(_react.default.Component);exports.PanelOptionsMenu=PanelOptionsMenu},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.CustomizePanelModal=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _react2=__webpack_require__(30);var _i18n=__webpack_require__(1);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var CustomizePanelModal=function(_Component){_inherits(CustomizePanelModal,_Component);function CustomizePanelModal(props){var _this;_classCallCheck(this,CustomizePanelModal);_this=_possibleConstructorReturn(this,_getPrototypeOf(CustomizePanelModal).call(this,props));_defineProperty(_assertThisInitialized(_this),"updateTitle",(function(title){_this.setState({title:title===""?undefined:title})}));_defineProperty(_assertThisInitialized(_this),"reset",(function(){_this.setState({title:undefined})}));_defineProperty(_assertThisInitialized(_this),"onHideTitleToggle",(function(){_this.setState((function(prevState){return{hideTitle:!prevState.hideTitle}}))}));_defineProperty(_assertThisInitialized(_this),"save",(function(){if(_this.state.hideTitle){_this.props.updateTitle("")}else{var _newTitle=_this.state.title===""?undefined:_this.state.title;_this.props.updateTitle(_newTitle)}}));_this.state={hideTitle:props.embeddable.getOutput().title==="",title:props.embeddable.getInput().title};return _this}_createClass(CustomizePanelModal,[{key:"render",value:function render(){var _this2=this;return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,{"data-test-subj":"customizePanelTitle"},"Customize panel")),_react.default.createElement(_eui.EuiModalBody,null,_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiSwitch,{checked:!this.state.hideTitle,"data-test-subj":"customizePanelHideTitle",id:"hideTitle",label:_react.default.createElement(_react2.FormattedMessage,{defaultMessage:"Show panel title",id:"embeddableApi.customizePanel.modal.showTitle"}),onChange:this.onHideTitleToggle})),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("embeddableApi.customizePanel.modal.optionsMenuForm.panelTitleFormRowLabel",{defaultMessage:"Panel title"})},_react.default.createElement(_eui.EuiFieldText,{id:"panelTitleInput","data-test-subj":"customEmbeddablePanelTitleInput",name:"min",type:"text",disabled:this.state.hideTitle,placeholder:this.props.embeddable.getOutput().defaultTitle,value:this.state.title||"",onChange:function onChange(e){return _this2.updateTitle(e.target.value)},"aria-label":_i18n.i18n.translate("embeddableApi.customizePanel.modal.optionsMenuForm.panelTitleInputAriaLabel",{defaultMessage:"Enter a custom title for your panel"}),append:_react.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"resetCustomEmbeddablePanelTitle",onClick:this.reset,disabled:this.state.hideTitle},_react.default.createElement(_react2.FormattedMessage,{id:"embeddableApi.customizePanel.modal.optionsMenuForm.resetCustomDashboardButtonLabel",defaultMessage:"Reset"}))}))),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiButtonEmpty,{onClick:function onClick(){return _this2.props.updateTitle(_this2.props.embeddable.getOutput().title)}},_react.default.createElement(_react2.FormattedMessage,{id:"embeddableApi.customizePanel.modal.cancel",defaultMessage:"Cancel"})),_react.default.createElement(_eui.EuiButton,{"data-test-subj":"saveNewTitleButton",onClick:this.save,fill:true},_react.default.createElement(_react2.FormattedMessage,{id:"embeddableApi.customizePanel.modal.saveButtonTitle",defaultMessage:"Save"}))))}}]);return CustomizePanelModal}(_react.Component);exports.CustomizePanelModal=CustomizePanelModal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _panel_actions=__webpack_require__(425);Object.keys(_panel_actions).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _panel_actions[key]}})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createPanelState=createPanelState;var _dashboard_constants=__webpack_require__(161);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function findTopLeftMostOpenSpace(width,height,currentPanels){var maxY=-1;currentPanels.forEach((function(panel){maxY=Math.max(panel.gridData.y+panel.gridData.h,maxY)}));if(maxY<0){return{x:0,y:0}}var grid=new Array(maxY);for(var y=0;y<maxY;y++){grid[y]=new Array(_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT).fill(0)}currentPanels.forEach((function(panel){for(var x=panel.gridData.x;x<panel.gridData.x+panel.gridData.w;x++){for(var _y=panel.gridData.y;_y<panel.gridData.y+panel.gridData.h;_y++){var row=grid[_y];if(row===undefined){throw new Error("Attempted to access a row that doesn't exist at ".concat(_y," for panel ").concat(JSON.stringify(panel)))}grid[_y][x]=1}}}));for(var _y2=0;_y2<maxY;_y2++){for(var x=0;x<_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT;x++){if(grid[_y2][x]===1){continue}else{for(var h=_y2;h<Math.min(_y2+height,maxY);h++){for(var w=x;w<Math.min(x+width,_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT);w++){var spaceIsEmpty=grid[h][w]===0;var fitsPanelWidth=w===x+width-1;var fitsPanelHeight=h===Math.min(_y2+height-1,maxY-1);if(spaceIsEmpty&&fitsPanelWidth&&fitsPanelHeight){return{x:x,y:_y2}}else if(grid[h][w]===1){break}}}}}}return{x:0,y:maxY}}function createPanelState(panelState,currentPanels){var _findTopLeftMostOpenS=findTopLeftMostOpenSpace(_dashboard_constants.DEFAULT_PANEL_WIDTH,_dashboard_constants.DEFAULT_PANEL_HEIGHT,currentPanels),x=_findTopLeftMostOpenS.x,y=_findTopLeftMostOpenS.y;return _objectSpread({gridData:{w:_dashboard_constants.DEFAULT_PANEL_WIDTH,h:_dashboard_constants.DEFAULT_PANEL_HEIGHT,x:x,y:y,i:panelState.explicitInput.id}},panelState)}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardViewport=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _grid=__webpack_require__(1110);var _public=__webpack_require__(31);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DashboardViewport=function(_React$Component){_inherits(DashboardViewport,_React$Component);function DashboardViewport(props){var _this;_classCallCheck(this,DashboardViewport);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardViewport).call(this,props));_defineProperty(_assertThisInitialized(_this),"context",void 0);_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_defineProperty(_assertThisInitialized(_this),"mounted",false);_defineProperty(_assertThisInitialized(_this),"onExitFullScreenMode",(function(){_this.props.container.updateInput({isFullScreenMode:false})}));var _this$props$container=_this.props.container.getInput(),isFullScreenMode=_this$props$container.isFullScreenMode,panels=_this$props$container.panels,useMargins=_this$props$container.useMargins,title=_this$props$container.title,isEmptyState=_this$props$container.isEmptyState;_this.state={isFullScreenMode:isFullScreenMode,panels:panels,useMargins:useMargins,title:title,isEmptyState:isEmptyState};return _this}_createClass(DashboardViewport,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.mounted=true;this.subscription=this.props.container.getInput$().subscribe((function(){var _this2$props$containe=_this2.props.container.getInput(),isFullScreenMode=_this2$props$containe.isFullScreenMode,useMargins=_this2$props$containe.useMargins,title=_this2$props$containe.title,description=_this2$props$containe.description,isEmptyState=_this2$props$containe.isEmptyState;if(_this2.mounted){_this2.setState({isFullScreenMode:isFullScreenMode,description:description,useMargins:useMargins,title:title,isEmptyState:isEmptyState})}}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false;if(this.subscription){this.subscription.unsubscribe()}}},{key:"renderEmptyScreen",value:function renderEmptyScreen(){var renderEmpty=this.props.renderEmpty;var isFullScreenMode=this.state.isFullScreenMode;return _react.default.createElement("div",{className:"dshDashboardEmptyScreen"},isFullScreenMode&&_react.default.createElement(this.context.services.ExitFullScreenButton,{onExitFullScreenMode:this.onExitFullScreenMode}),renderEmpty&&renderEmpty())}},{key:"renderContainerScreen",value:function renderContainerScreen(){var container=this.props.container;var _this$state=this.state,isFullScreenMode=_this$state.isFullScreenMode,panels=_this$state.panels,title=_this$state.title,description=_this$state.description,useMargins=_this$state.useMargins;return _react.default.createElement("div",{"data-shared-items-count":Object.values(panels).length,"data-shared-items-container":true,"data-title":title,"data-description":description,className:useMargins?"dshDashboardViewport-withMargins":"dshDashboardViewport"},isFullScreenMode&&_react.default.createElement(this.context.services.ExitFullScreenButton,{onExitFullScreenMode:this.onExitFullScreenMode}),_react.default.createElement(_grid.DashboardGrid,{container:container}))}},{key:"render",value:function render(){return _react.default.createElement(_react.default.Fragment,null,this.state.isEmptyState?this.renderEmptyScreen():null,this.renderContainerScreen())}}]);return DashboardViewport}(_react.default.Component);exports.DashboardViewport=DashboardViewport;_defineProperty(DashboardViewport,"contextType",_public.context)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DashboardGrid",{enumerable:true,get:function get(){return _dashboard_grid.DashboardGrid}});var _dashboard_grid=__webpack_require__(1111)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.DashboardGrid=void 0;__webpack_require__(1112);__webpack_require__(1114);var _reactSizeme=_interopRequireDefault(__webpack_require__(1116));var _react=__webpack_require__(30);var _classnames=_interopRequireDefault(__webpack_require__(87));var _lodash=_interopRequireDefault(__webpack_require__(49));var _react2=_interopRequireDefault(__webpack_require__(28));var _reactGridLayout=_interopRequireDefault(__webpack_require__(1140));var _embeddable_plugin=__webpack_require__(198);var _dashboard_constants=__webpack_require__(161);var _public=__webpack_require__(31);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _objectDestructuringEmpty(obj){if(obj==null)throw new TypeError("Cannot destructure undefined")}var lastValidGridSize=0;function ensureWindowScrollsToBottom(event){var WINDOW_BUFFER=10;if(event.clientY>window.innerHeight-WINDOW_BUFFER){window.scrollTo(0,event.pageY+WINDOW_BUFFER-window.innerHeight)}}function ResponsiveGrid(_ref){var size=_ref.size,isViewMode=_ref.isViewMode,layout=_ref.layout,onLayoutChange=_ref.onLayoutChange,children=_ref.children,maximizedPanelId=_ref.maximizedPanelId,useMargins=_ref.useMargins;lastValidGridSize=size.width>0?size.width:lastValidGridSize;var classes=(0,_classnames.default)({"dshLayout--viewing":isViewMode,"dshLayout--editing":!isViewMode,"dshLayout-isMaximizedPanel":maximizedPanelId!==undefined,"dshLayout-withoutMargins":!useMargins});var MARGINS=useMargins?8:0;return _react2.default.createElement(_reactGridLayout.default,{width:lastValidGridSize,className:classes,isDraggable:true,isResizable:true,useCSSTransforms:false,margin:[MARGINS,MARGINS],cols:_dashboard_constants.DASHBOARD_GRID_COLUMN_COUNT,rowHeight:_dashboard_constants.DASHBOARD_GRID_HEIGHT,draggableHandle:isViewMode?".doesnt-exist":".embPanel__dragger",layout:layout,onLayoutChange:onLayoutChange,onResize:function onResize(_ref2,_ref3,_ref4,_ref5,event){_objectDestructuringEmpty(_ref2);_objectDestructuringEmpty(_ref3);_objectDestructuringEmpty(_ref4);_objectDestructuringEmpty(_ref5);return ensureWindowScrollsToBottom(event)}},children)}var config={monitorWidth:true};var ResponsiveSizedGrid=(0,_reactSizeme.default)(config)(ResponsiveGrid);var DashboardGridUi=function(_React$Component){_inherits(DashboardGridUi,_React$Component);function DashboardGridUi(props){var _this;_classCallCheck(this,DashboardGridUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardGridUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"subscription",void 0);_defineProperty(_assertThisInitialized(_this),"mounted",false);_defineProperty(_assertThisInitialized(_this),"gridItems",{});_defineProperty(_assertThisInitialized(_this),"buildLayoutFromPanels",(function(){return _lodash.default.map(_this.state.panels,(function(panel){return panel.gridData}))}));_defineProperty(_assertThisInitialized(_this),"onLayoutChange",(function(layout){var panels=_this.state.panels;var updatedPanels=layout.reduce((function(updatedPanelsAcc,panelLayout){updatedPanelsAcc[panelLayout.i]=_objectSpread({},panels[panelLayout.i],{gridData:_lodash.default.pick(panelLayout,["x","y","w","h","i"])});return updatedPanelsAcc}),{});_this.onPanelsUpdated(updatedPanels)}));_defineProperty(_assertThisInitialized(_this),"onPanelsUpdated",(function(panels){_this.props.container.updateInput({panels:panels})}));_defineProperty(_assertThisInitialized(_this),"onPanelFocused",(function(focusedPanelIndex){_this.setState({focusedPanelIndex:focusedPanelIndex})}));_defineProperty(_assertThisInitialized(_this),"onPanelBlurred",(function(blurredPanelIndex){if(_this.state.focusedPanelIndex===blurredPanelIndex){_this.setState({focusedPanelIndex:undefined})}}));_this.state={layout:[],isLayoutInvalid:false,focusedPanelIndex:undefined,panels:_this.props.container.getInput().panels,viewMode:_this.props.container.getInput().viewMode,useMargins:_this.props.container.getInput().useMargins,expandedPanelId:_this.props.container.getInput().expandedPanelId};return _this}_createClass(DashboardGridUi,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.mounted=true;var isLayoutInvalid=false;var layout;try{layout=this.buildLayoutFromPanels()}catch(error){console.error(error);isLayoutInvalid=true;this.props.kibana.notifications.toasts.danger({title:this.props.intl.formatMessage({id:"dashboard.dashboardGrid.toast.unableToLoadDashboardDangerMessage",defaultMessage:"Unable to load dashboard."}),body:error.message,toastLifeTimeMs:5e3})}this.setState({layout:layout,isLayoutInvalid:isLayoutInvalid});this.subscription=this.props.container.getInput$().subscribe((function(input){if(_this2.mounted){_this2.setState({panels:input.panels,viewMode:input.viewMode,useMargins:input.useMargins,expandedPanelId:input.expandedPanelId})}}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false;if(this.subscription){this.subscription.unsubscribe()}}},{key:"renderPanels",value:function renderPanels(){var _this3=this;var _this$state=this.state,focusedPanelIndex=_this$state.focusedPanelIndex,panels=_this$state.panels,expandedPanelId=_this$state.expandedPanelId;var panelsInOrder=Object.keys(panels).map((function(key){return panels[key]}));panelsInOrder.sort((function(panelA,panelB){if(panelA.gridData.y===panelB.gridData.y){return panelA.gridData.x-panelB.gridData.x}else{return panelA.gridData.y-panelB.gridData.y}}));return _lodash.default.map(panelsInOrder,(function(panel){var expandPanel=expandedPanelId!==undefined&&expandedPanelId===panel.explicitInput.id;var hidePanel=expandedPanelId!==undefined&&expandedPanelId!==panel.explicitInput.id;var classes=(0,_classnames.default)({"dshDashboardGrid__item--expanded":expandPanel,"dshDashboardGrid__item--hidden":hidePanel});return _react2.default.createElement("div",{style:{zIndex:focusedPanelIndex===panel.explicitInput.id?2:"auto"},className:classes,key:panel.explicitInput.id,"data-test-subj":"dashboardPanel",ref:function ref(reactGridItem){_this3.gridItems[panel.explicitInput.id]=reactGridItem}},_react2.default.createElement(_embeddable_plugin.EmbeddableChildPanel,{embeddableId:panel.explicitInput.id,container:_this3.props.container,getActions:_this3.props.kibana.services.uiActions.getTriggerCompatibleActions,getEmbeddableFactory:_this3.props.kibana.services.embeddable.getEmbeddableFactory,getAllEmbeddableFactories:_this3.props.kibana.services.embeddable.getEmbeddableFactories,overlays:_this3.props.kibana.services.overlays,notifications:_this3.props.kibana.services.notifications,inspector:_this3.props.kibana.services.inspector,SavedObjectFinder:_this3.props.kibana.services.SavedObjectFinder}))}))}},{key:"render",value:function render(){if(this.state.isLayoutInvalid){return null}var viewMode=this.state.viewMode;var isViewMode=viewMode===_embeddable_plugin.ViewMode.VIEW;return _react2.default.createElement(ResponsiveSizedGrid,{isViewMode:isViewMode,layout:this.buildLayoutFromPanels(),onLayoutChange:this.onLayoutChange,maximizedPanelId:this.state.expandedPanelId,useMargins:this.state.useMargins},this.renderPanels())}}]);return DashboardGridUi}(_react2.default.Component);var DashboardGrid=(0,_react.injectI18n)((0,_public.withKibana)(DashboardGridUi));exports.DashboardGrid=DashboardGrid},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.openReplacePanelFlyout=openReplacePanelFlyout;var _react=_interopRequireDefault(__webpack_require__(28));var _public=__webpack_require__(31);var _replace_panel_flyout=__webpack_require__(1153);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function openReplacePanelFlyout(_x){return _openReplacePanelFlyout.apply(this,arguments)}function _openReplacePanelFlyout(){_openReplacePanelFlyout=_asyncToGenerator(regeneratorRuntime.mark((function _callee(options){var embeddable,core,panelToRemove,savedObjectFinder,notifications,getEmbeddableFactories,flyoutSession;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=options.embeddable,core=options.core,panelToRemove=options.panelToRemove,savedObjectFinder=options.savedObjectFinder,notifications=options.notifications,getEmbeddableFactories=options.getEmbeddableFactories;flyoutSession=core.overlays.openFlyout((0,_public.toMountPoint)(_react.default.createElement(_replace_panel_flyout.ReplacePanelFlyout,{container:embeddable,onClose:function onClose(){if(flyoutSession){flyoutSession.close()}},panelToRemove:panelToRemove,savedObjectsFinder:savedObjectFinder,notifications:notifications,getEmbeddableFactories:getEmbeddableFactories})),{"data-test-subj":"replacePanelFlyout"});case 2:case"end":return _context.stop()}}}),_callee)})));return _openReplacePanelFlyout.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ReplacePanelFlyout=void 0;var _i18n=__webpack_require__(1);var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ReplacePanelFlyout=function(_React$Component){_inherits(ReplacePanelFlyout,_React$Component);function ReplacePanelFlyout(props){var _this;_classCallCheck(this,ReplacePanelFlyout);_this=_possibleConstructorReturn(this,_getPrototypeOf(ReplacePanelFlyout).call(this,props));_defineProperty(_assertThisInitialized(_this),"lastToast",{id:"panelReplaceToast"});_defineProperty(_assertThisInitialized(_this),"showToast",(function(name){if(_this.lastToast){_this.props.notifications.toasts.remove(_this.lastToast)}_this.lastToast=_this.props.notifications.toasts.addSuccess({title:_i18n.i18n.translate("dashboard.addPanel.savedObjectAddedToContainerSuccessMessageTitle",{defaultMessage:"{savedObjectName} was added",values:{savedObjectName:name}}),"data-test-subj":"addObjectToContainerSuccess"})}));_defineProperty(_assertThisInitialized(_this),"onReplacePanel",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(id,type,name){var originalPanels,filteredPanels,nnw,nnh,nnx,nny,newObj,finalPanels;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:originalPanels=_this.props.container.getInput().panels;filteredPanels=_objectSpread({},originalPanels);nnw=filteredPanels[_this.props.panelToRemove.id].gridData.w;nnh=filteredPanels[_this.props.panelToRemove.id].gridData.h;nnx=filteredPanels[_this.props.panelToRemove.id].gridData.x;nny=filteredPanels[_this.props.panelToRemove.id].gridData.y;_context.next=8;return _this.props.container.addSavedObjectEmbeddable(type,id);case 8:newObj=_context.sent;finalPanels=_.cloneDeep(_this.props.container.getInput().panels);finalPanels[newObj.id].gridData.w=nnw;finalPanels[newObj.id].gridData.h=nnh;finalPanels[newObj.id].gridData.x=nnx;finalPanels[newObj.id].gridData.y=nny;delete finalPanels[_this.props.panelToRemove.id];_this.props.container.updateInput({panels:finalPanels});_this.props.container.reload();_this.showToast(name);_this.props.onClose();case 19:case"end":return _context.stop()}}}),_callee)})));return function(_x,_x2,_x3){return _ref.apply(this,arguments)}}());return _this}_createClass(ReplacePanelFlyout,[{key:"render",value:function render(){var SavedObjectFinder=this.props.savedObjectsFinder;var savedObjectsFinder=_react.default.createElement(SavedObjectFinder,{noItemsMessage:_i18n.i18n.translate("dashboard.addPanel.noMatchingObjectsMessage",{defaultMessage:"No matching objects found."}),savedObjectMetaData:_toConsumableArray(this.props.getEmbeddableFactories()).filter((function(embeddableFactory){return Boolean(embeddableFactory.savedObjectMetaData)&&!embeddableFactory.isContainerType})).map((function(_ref2){var savedObjectMetaData=_ref2.savedObjectMetaData;return savedObjectMetaData})),showFilter:true,onChoose:this.onReplacePanel});var panelToReplace="Replace panel "+this.props.panelToRemove.getTitle()+" with:";return _react.default.createElement(_eui.EuiFlyout,{ownFocus:true,onClose:this.props.onClose,"data-test-subj":"dashboardReplacePanel"},_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiTitle,{size:"m"},_react.default.createElement("h2",null,_react.default.createElement("span",null,panelToReplace)))),_react.default.createElement(_eui.EuiFlyoutBody,null,savedObjectsFinder))}}]);return ReplacePanelFlyout}(_react.default.Component);exports.ReplacePanelFlyout=ReplacePanelFlyout},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectsPublicPlugin=void 0;__webpack_require__(1155);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var SavedObjectsPublicPlugin=function(){function SavedObjectsPublicPlugin(){_classCallCheck(this,SavedObjectsPublicPlugin)}_createClass(SavedObjectsPublicPlugin,[{key:"setup",value:function setup(){}},{key:"start",value:function start(){}}]);return SavedObjectsPublicPlugin}();exports.SavedObjectsPublicPlugin=SavedObjectsPublicPlugin},function(module,exports,__webpack_require__){if(window.__kbnDarkMode__){__webpack_require__(1156)}else{__webpack_require__(1158)}},function(module,exports,__webpack_require__){var api=__webpack_require__(2);var content=__webpack_require__(1157);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(3);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".kbnSavedObjectSaveModal {\n  width: 400px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(2);var content=__webpack_require__(1159);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(3);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".kbnSavedObjectSaveModal {\n  width: 400px; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SavedObjectSaveModal",{enumerable:true,get:function get(){return _saved_object_save_modal.SavedObjectSaveModal}});Object.defineProperty(exports,"OnSaveProps",{enumerable:true,get:function get(){return _saved_object_save_modal.OnSaveProps}});Object.defineProperty(exports,"showSaveModal",{enumerable:true,get:function get(){return _show_saved_object_save_modal.showSaveModal}});Object.defineProperty(exports,"SaveResult",{enumerable:true,get:function get(){return _show_saved_object_save_modal.SaveResult}});var _saved_object_save_modal=__webpack_require__(1161);var _show_saved_object_save_modal=__webpack_require__(1162)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectSaveModal=void 0;var _eui=__webpack_require__(29);var _react=__webpack_require__(30);var _react2=_interopRequireDefault(__webpack_require__(28));var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var generateId=(0,_eui.htmlIdGenerator)();var SavedObjectSaveModal=function(_React$Component){_inherits(SavedObjectSaveModal,_React$Component);function SavedObjectSaveModal(){var _getPrototypeOf2;var _this;_classCallCheck(this,SavedObjectSaveModal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SavedObjectSaveModal)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"warning",_react2.default.createRef());_defineProperty(_assertThisInitialized(_this),"state",{title:_this.props.title,copyOnSave:false,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false,isLoading:false,visualizationDescription:_this.props.description?_this.props.description:""});_defineProperty(_assertThisInitialized(_this),"renderViewDescription",(function(){if(!_this.props.showDescription){return}return _react2.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.descriptionLabel",defaultMessage:"Description"})},_react2.default.createElement(_eui.EuiTextArea,{"data-test-subj":"viewDescription",value:_this.state.visualizationDescription,onChange:_this.onDescriptionChange}))}));_defineProperty(_assertThisInitialized(_this),"onDescriptionChange",(function(event){_this.setState({visualizationDescription:event.target.value})}));_defineProperty(_assertThisInitialized(_this),"onTitleDuplicate",(function(){_this.setState({isLoading:false,isTitleDuplicateConfirmed:true,hasTitleDuplicate:true});if(_this.warning.current){_this.warning.current.focus()}}));_defineProperty(_assertThisInitialized(_this),"saveSavedObject",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!_this.state.isLoading){_context.next=2;break}return _context.abrupt("return");case 2:_this.setState({isLoading:true});_context.next=5;return _this.props.onSave({newTitle:_this.state.title,newCopyOnSave:_this.state.copyOnSave,isTitleDuplicateConfirmed:_this.state.isTitleDuplicateConfirmed,onTitleDuplicate:_this.onTitleDuplicate,newDescription:_this.state.visualizationDescription});case 5:case"end":return _context.stop()}}}),_callee)}))));_defineProperty(_assertThisInitialized(_this),"onTitleChange",(function(event){_this.setState({title:event.target.value,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false})}));_defineProperty(_assertThisInitialized(_this),"onCopyOnSaveChange",(function(event){_this.setState({copyOnSave:event.target.checked})}));_defineProperty(_assertThisInitialized(_this),"onFormSubmit",(function(event){event.preventDefault();_this.saveSavedObject()}));_defineProperty(_assertThisInitialized(_this),"renderConfirmButton",(function(){var _this$state=_this.state,isLoading=_this$state.isLoading,title=_this$state.title;var confirmLabel=_i18n.i18n.translate("savedObjects.saveModal.saveButtonLabel",{defaultMessage:"Save"});if(_this.props.confirmButtonLabel){confirmLabel=_this.props.confirmButtonLabel}return _react2.default.createElement(_eui.EuiButton,{fill:true,"data-test-subj":"confirmSaveSavedObjectButton",isLoading:isLoading,isDisabled:title.length===0,type:"submit"},confirmLabel)}));_defineProperty(_assertThisInitialized(_this),"renderDuplicateTitleCallout",(function(duplicateWarningId){if(!_this.state.hasTitleDuplicate){return}return _react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement("div",{ref:_this.warning,tabIndex:-1},_react2.default.createElement(_eui.EuiCallOut,{title:_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.duplicateTitleLabel",defaultMessage:"A {objectType} with the title '{title}' already exists",values:{objectType:_this.props.objectType,title:_this.state.title}}),color:"warning","data-test-subj":"titleDupicateWarnMsg",id:duplicateWarningId},_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.duplicateTitleDescription",defaultMessage:"Clicking {confirmSaveLabel} will save the {objectType} with this duplicate title.",values:{objectType:_this.props.objectType,confirmSaveLabel:_react2.default.createElement("strong",null,_this.props.confirmButtonLabel?_this.props.confirmButtonLabel:_i18n.i18n.translate("savedObjects.saveModal.saveButtonLabel",{defaultMessage:"Save"}))}})))),_react2.default.createElement(_eui.EuiSpacer,null))}));_defineProperty(_assertThisInitialized(_this),"renderCopyOnSave",(function(){if(!_this.props.showCopyOnSave){return}return _react2.default.createElement(_react2.default.Fragment,null,_react2.default.createElement(_eui.EuiSwitch,{"data-test-subj":"saveAsNewCheckbox",checked:_this.state.copyOnSave,onChange:_this.onCopyOnSaveChange,label:_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.saveAsNewLabel",defaultMessage:"Save as new {objectType}",values:{objectType:_this.props.objectType}})}),_react2.default.createElement(_eui.EuiSpacer,null))}));return _this}_createClass(SavedObjectSaveModal,[{key:"render",value:function render(){var _this$state2=this.state,isTitleDuplicateConfirmed=_this$state2.isTitleDuplicateConfirmed,hasTitleDuplicate=_this$state2.hasTitleDuplicate,title=_this$state2.title;var duplicateWarningId=generateId();return _react2.default.createElement(_eui.EuiOverlayMask,null,_react2.default.createElement("form",{onSubmit:this.onFormSubmit},_react2.default.createElement(_eui.EuiModal,{"data-test-subj":"savedObjectSaveModal",className:"kbnSavedObjectSaveModal",onClose:this.props.onClose},_react2.default.createElement(_eui.EuiModalHeader,null,_react2.default.createElement(_eui.EuiModalHeaderTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.saveTitle",defaultMessage:"Save {objectType}",values:{objectType:this.props.objectType}}))),_react2.default.createElement(_eui.EuiModalBody,null,this.renderDuplicateTitleCallout(duplicateWarningId),_react2.default.createElement(_eui.EuiForm,null,!this.props.showDescription&&this.props.description&&_react2.default.createElement(_eui.EuiFormRow,null,_react2.default.createElement(_eui.EuiText,{color:"subdued"},this.props.description)),this.renderCopyOnSave(),_react2.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.titleLabel",defaultMessage:"Title"})},_react2.default.createElement(_eui.EuiFieldText,{fullWidth:true,autoFocus:true,"data-test-subj":"savedObjectTitle",value:title,onChange:this.onTitleChange,isInvalid:!isTitleDuplicateConfirmed&&hasTitleDuplicate||title.length===0,"aria-describedby":this.state.hasTitleDuplicate?duplicateWarningId:undefined})),this.renderViewDescription(),this.props.options)),_react2.default.createElement(_eui.EuiModalFooter,null,_react2.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"saveCancelButton",onClick:this.props.onClose},_react2.default.createElement(_react.FormattedMessage,{id:"savedObjects.saveModal.cancelButtonLabel",defaultMessage:"Cancel"})),this.renderConfirmButton()))))}}]);return SavedObjectSaveModal}(_react2.default.Component);exports.SavedObjectSaveModal=SavedObjectSaveModal},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.showSaveModal=showSaveModal;var _react=_interopRequireDefault(__webpack_require__(28));var _reactDom=_interopRequireDefault(__webpack_require__(35));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function isSuccess(result){return"id"in result}function showSaveModal(saveModal,I18nContext){var container=document.createElement("div");var closeModal=function closeModal(){_reactDom.default.unmountComponentAtNode(container);document.body.removeChild(container)};var onSave=saveModal.props.onSave;var onSaveConfirmed=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var response,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return onSave.apply(void 0,_args);case 2:response=_context.sent;if(Boolean(isSuccess(response)?response.id:response.error)){closeModal()}return _context.abrupt("return",response);case 5:case"end":return _context.stop()}}}),_callee)})));return function onSaveConfirmed(){return _ref.apply(this,arguments)}}();document.body.appendChild(container);var element=_react.default.cloneElement(saveModal,{onSave:onSaveConfirmed,onClose:closeModal});_reactDom.default.render(_react.default.createElement(I18nContext,null,element),container)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SavedObjectMetaData",{enumerable:true,get:function get(){return _saved_object_finder.SavedObjectMetaData}});Object.defineProperty(exports,"SavedObjectFinderUi",{enumerable:true,get:function get(){return _saved_object_finder.SavedObjectFinderUi}});Object.defineProperty(exports,"getSavedObjectFinder",{enumerable:true,get:function get(){return _saved_object_finder.getSavedObjectFinder}});var _saved_object_finder=__webpack_require__(1164)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectFinderUi=exports.getSavedObjectFinder=void 0;var _lodash=_interopRequireDefault(__webpack_require__(49));var _propTypes=_interopRequireDefault(__webpack_require__(55));var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SavedObjectFinderUi=function(_React$Component){_inherits(SavedObjectFinderUi,_React$Component);function SavedObjectFinderUi(props){var _this;_classCallCheck(this,SavedObjectFinderUi);_this=_possibleConstructorReturn(this,_getPrototypeOf(SavedObjectFinderUi).call(this,props));_defineProperty(_assertThisInitialized(_this),"isComponentMounted",false);_defineProperty(_assertThisInitialized(_this),"debouncedFetch",_lodash.default.debounce(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(query){var metaDataMap,fields,perPage,resp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:metaDataMap=_this.getSavedObjectMetaDataMap();fields=Object.values(metaDataMap).map((function(metaData){return metaData.includeFields||[]})).reduce((function(allFields,currentFields){return allFields.concat(currentFields)}),["title"]);perPage=_this.props.uiSettings.get("savedObjects:listingLimit");_context.next=5;return _this.props.savedObjects.client.find({type:Object.keys(metaDataMap),fields:_toConsumableArray(new Set(fields)),search:query?"".concat(query,"*"):undefined,page:1,perPage:perPage,searchFields:["title^3","description"],defaultSearchOperator:"AND"});case 5:resp=_context.sent;resp.savedObjects=resp.savedObjects.filter((function(savedObject){var metaData=metaDataMap[savedObject.type];if(metaData.showSavedObject){return metaData.showSavedObject(savedObject)}else{return true}}));if(_this.isComponentMounted){_context.next=9;break}return _context.abrupt("return");case 9:if(query===_this.state.query){_this.setState({isFetchingItems:false,page:0,items:resp.savedObjects.map((function(savedObject){var title=savedObject.attributes.title,id=savedObject.id,type=savedObject.type;return{title:typeof title==="string"?title:"",id:id,type:type,savedObject:savedObject}}))})}case 10:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}(),300));_defineProperty(_assertThisInitialized(_this),"getPageOfItems",(function(){var items=_this.state.items.slice();var sortDirection=_this.state.sortDirection;if(sortDirection||!_this.state.query){items.sort((function(_ref2,_ref3){var titleA=_ref2.title;var titleB=_ref3.title;var order=1;if(sortDirection==="desc"){order=-1}return order*(titleA||"").toLowerCase().localeCompare((titleB||"").toLowerCase())}))}var startIndex=_this.state.page*_this.state.perPage;var lastIndex=startIndex+_this.state.perPage;return items.filter((function(item){return _this.state.filteredTypes.length===0||_this.state.filteredTypes.includes(item.type)})).slice(startIndex,lastIndex)}));_defineProperty(_assertThisInitialized(_this),"fetchItems",(function(){_this.setState({isFetchingItems:true},_this.debouncedFetch.bind(null,_this.state.query))}));_this.state={items:[],isFetchingItems:false,page:0,perPage:props.initialPageSize||props.fixedPageSize||10,query:"",filterOpen:false,filteredTypes:[],sortOpen:false};return _this}_createClass(SavedObjectFinderUi,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.isComponentMounted=false;this.debouncedFetch.cancel()}},{key:"componentDidMount",value:function componentDidMount(){this.isComponentMounted=true;this.fetchItems()}},{key:"render",value:function render(){return _react.default.createElement(_react.default.Fragment,null,this.renderSearchBar(),this.renderListing())}},{key:"getSavedObjectMetaDataMap",value:function getSavedObjectMetaDataMap(){return this.props.savedObjectMetaData.reduce((function(map,metaData){return _objectSpread({},map,_defineProperty({},metaData.type,metaData))}),{})}},{key:"getPageCount",value:function getPageCount(){var _this2=this;return Math.ceil((this.state.filteredTypes.length===0?this.state.items.length:this.state.items.filter((function(item){return _this2.state.filteredTypes.length===0||_this2.state.filteredTypes.includes(item.type)})).length)/this.state.perPage)}},{key:"getAvailableSavedObjectMetaData",value:function getAvailableSavedObjectMetaData(){var typesInItems=new Set;this.state.items.forEach((function(item){typesInItems.add(item.type)}));return this.props.savedObjectMetaData.filter((function(metaData){return typesInItems.has(metaData.type)}))}},{key:"getSortOptions",value:function getSortOptions(){var _this3=this;var sortOptions=[_react.default.createElement(_eui.EuiContextMenuItem,{key:"asc",icon:this.state.sortDirection==="asc"||this.state.query===""&&this.state.sortDirection!=="desc"?"check":"empty",onClick:function onClick(){_this3.setState({sortDirection:"asc"})}},_i18n.i18n.translate("savedObjects.finder.sortAsc",{defaultMessage:"Ascending"})),_react.default.createElement(_eui.EuiContextMenuItem,{key:"desc",icon:this.state.sortDirection==="desc"?"check":"empty",onClick:function onClick(){_this3.setState({sortDirection:"desc"})}},_i18n.i18n.translate("savedObjects.finder.sortDesc",{defaultMessage:"Descending"}))];if(this.state.query){sortOptions.push(_react.default.createElement(_eui.EuiContextMenuItem,{key:"auto",icon:!this.state.sortDirection?"check":"empty",onClick:function onClick(){_this3.setState({sortDirection:undefined})}},_i18n.i18n.translate("savedObjects.finder.sortAuto",{defaultMessage:"Best match"})))}return sortOptions}},{key:"renderSearchBar",value:function renderSearchBar(){var _this4=this;var availableSavedObjectMetaData=this.getAvailableSavedObjectMetaData();return _react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"m"},_react.default.createElement(_eui.EuiFlexItem,{grow:true},_react.default.createElement(_eui.EuiFieldSearch,{placeholder:_i18n.i18n.translate("savedObjects.finder.searchPlaceholder",{defaultMessage:"Search"}),"aria-label":_i18n.i18n.translate("savedObjects.finder.searchPlaceholder",{defaultMessage:"Search"}),fullWidth:true,value:this.state.query,onChange:function onChange(e){_this4.setState({query:e.target.value},_this4.fetchItems)},"data-test-subj":"savedObjectFinderSearchInput",isLoading:this.state.isFetchingItems})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFilterGroup,null,_react.default.createElement(_eui.EuiPopover,{id:"addPanelSortPopover",panelClassName:"euiFilterGroup__popoverPanel",panelPaddingSize:"none",isOpen:this.state.sortOpen,closePopover:function closePopover(){return _this4.setState({sortOpen:false})},button:_react.default.createElement(_eui.EuiFilterButton,{onClick:function onClick(){return _this4.setState((function(_ref4){var sortOpen=_ref4.sortOpen;return{sortOpen:!sortOpen}}))},iconType:"arrowDown",isSelected:this.state.sortOpen,"data-test-subj":"savedObjectFinderSortButton"},_i18n.i18n.translate("savedObjects.finder.sortButtonLabel",{defaultMessage:"Sort"}))},_react.default.createElement(_eui.EuiContextMenuPanel,{watchedItemProps:["icon","disabled"],items:this.getSortOptions()})),this.props.showFilter&&_react.default.createElement(_eui.EuiPopover,{id:"addPanelFilterPopover",panelClassName:"euiFilterGroup__popoverPanel",panelPaddingSize:"none",isOpen:this.state.filterOpen,closePopover:function closePopover(){return _this4.setState({filterOpen:false})},button:_react.default.createElement(_eui.EuiFilterButton,{onClick:function onClick(){return _this4.setState((function(_ref5){var filterOpen=_ref5.filterOpen;return{filterOpen:!filterOpen}}))},iconType:"arrowDown","data-test-subj":"savedObjectFinderFilterButton",isSelected:this.state.filterOpen,numFilters:this.props.savedObjectMetaData.length,hasActiveFilters:this.state.filteredTypes.length>0,numActiveFilters:this.state.filteredTypes.length},_i18n.i18n.translate("savedObjects.finder.filterButtonLabel",{defaultMessage:"Types"}))},_react.default.createElement(_eui.EuiContextMenuPanel,{watchedItemProps:["icon","disabled"],items:this.props.savedObjectMetaData.map((function(metaData){return _react.default.createElement(_eui.EuiContextMenuItem,{key:metaData.type,disabled:!availableSavedObjectMetaData.includes(metaData),icon:_this4.state.filteredTypes.includes(metaData.type)?"check":"empty","data-test-subj":"savedObjectFinderFilter-".concat(metaData.type),onClick:function onClick(){_this4.setState((function(_ref6){var filteredTypes=_ref6.filteredTypes;return{filteredTypes:filteredTypes.includes(metaData.type)?filteredTypes.filter((function(t){return t!==metaData.type})):[].concat(_toConsumableArray(filteredTypes),[metaData.type]),page:0}}))}},metaData.name)}))})))),this.props.children?_react.default.createElement(_eui.EuiFlexItem,{grow:false},this.props.children):null)}},{key:"renderListing",value:function renderListing(){var _this5=this;var items=this.state.items.length===0?[]:this.getPageOfItems();var _this$props=this.props,onChoose=_this$props.onChoose,savedObjectMetaData=_this$props.savedObjectMetaData;return _react.default.createElement(_react.default.Fragment,null,this.state.isFetchingItems&&this.state.items.length===0&&_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiLoadingSpinner,{"data-test-subj":"savedObjectFinderLoadingIndicator"}))),items.length>0?_react.default.createElement(_eui.EuiListGroup,{"data-test-subj":"savedObjectFinderItemList",maxWidth:false},items.map((function(item){var currentSavedObjectMetaData=savedObjectMetaData.find((function(metaData){return metaData.type===item.type}));var fullName=currentSavedObjectMetaData.getTooltipForSavedObject?currentSavedObjectMetaData.getTooltipForSavedObject(item.savedObject):"".concat(item.title," (").concat(currentSavedObjectMetaData.name,")");var iconType=(currentSavedObjectMetaData||{getIconForSavedObject:function getIconForSavedObject(){return"document"}}).getIconForSavedObject(item.savedObject);return _react.default.createElement(_eui.EuiListGroupItem,{key:item.id,iconType:iconType,label:item.title,onClick:onChoose?function(){onChoose(item.id,item.type,fullName,item.savedObject)}:undefined,title:fullName,"data-test-subj":"savedObjectTitle".concat((item.title||"").split(" ").join("-"))})}))):!this.state.isFetchingItems&&_react.default.createElement(_eui.EuiEmptyPrompt,{body:this.props.noItemsMessage}),this.getPageCount()>1&&(this.props.fixedPageSize?_react.default.createElement(_eui.EuiPagination,{activePage:this.state.page,pageCount:this.getPageCount(),onPageClick:function onPageClick(page){_this5.setState({page:page})}}):_react.default.createElement(_eui.EuiTablePagination,{activePage:this.state.page,pageCount:this.getPageCount(),onChangePage:function onChangePage(page){_this5.setState({page:page})},onChangeItemsPerPage:function onChangeItemsPerPage(perPage){_this5.setState({perPage:perPage})},itemsPerPage:this.state.perPage,itemsPerPageOptions:[5,10,15,25]})))}}]);return SavedObjectFinderUi}(_react.default.Component);exports.SavedObjectFinderUi=SavedObjectFinderUi;_defineProperty(SavedObjectFinderUi,"propTypes",{onChoose:_propTypes.default.func,noItemsMessage:_propTypes.default.node,savedObjectMetaData:_propTypes.default.array.isRequired,initialPageSize:_propTypes.default.oneOf([5,10,15,25]),fixedPageSize:_propTypes.default.number,showFilter:_propTypes.default.bool});var getSavedObjectFinder=function getSavedObjectFinder(savedObject,uiSettings){return function(props){return _react.default.createElement(SavedObjectFinderUi,_extends({},props,{savedObjects:savedObject,uiSettings:uiSettings}))}};exports.getSavedObjectFinder=getSavedObjectFinder},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"createSavedObjectClass",{enumerable:true,get:function get(){return _saved_object.createSavedObjectClass}});Object.defineProperty(exports,"SavedObjectLoader",{enumerable:true,get:function get(){return _saved_object_loader.SavedObjectLoader}});Object.defineProperty(exports,"checkForDuplicateTitle",{enumerable:true,get:function get(){return _check_for_duplicate_title.checkForDuplicateTitle}});Object.defineProperty(exports,"saveWithConfirmation",{enumerable:true,get:function get(){return _save_with_confirmation.saveWithConfirmation}});Object.defineProperty(exports,"isErrorNonFatal",{enumerable:true,get:function get(){return _save_saved_object.isErrorNonFatal}});var _saved_object=__webpack_require__(1166);var _saved_object_loader=__webpack_require__(1209);var _check_for_duplicate_title=__webpack_require__(453);var _save_with_confirmation=__webpack_require__(1211);var _save_saved_object=__webpack_require__(452)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSavedObjectClass=createSavedObjectClass;var _build_saved_object=__webpack_require__(1167);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function createSavedObjectClass(services){var SavedObjectClass=function SavedObjectClass(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,SavedObjectClass);var self=this;(0,_build_saved_object.buildSavedObject)(self,config,services)};return SavedObjectClass}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildSavedObject=buildSavedObject;var _lodash=_interopRequireDefault(__webpack_require__(49));var _public=__webpack_require__(63);var _hydrate_index_pattern=__webpack_require__(1168);var _initialize_saved_object=__webpack_require__(1169);var _serialize_saved_object=__webpack_require__(1170);var _apply_es_resp=__webpack_require__(1171);var _save_saved_object=__webpack_require__(452);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function buildSavedObject(savedObject){var config=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var services=arguments.length>2?arguments[2]:undefined;var indexPatterns=services.indexPatterns,savedObjectsClient=services.savedObjectsClient;var esType=config.type||"";savedObject.getDisplayName=function(){return esType};savedObject.getEsType=function(){return esType};savedObject.isSaving=false;savedObject.defaults=config.defaults||{};savedObject.searchSource=config.searchSource?new _public.SearchSource:undefined;savedObject.id=config.id||void 0;savedObject.migrationVersion=config.migrationVersion;savedObject.copyOnSave=false;savedObject.hydrateIndexPattern=function(id){return(0,_hydrate_index_pattern.hydrateIndexPattern)(id||"",savedObject,indexPatterns,config)};savedObject.init=_lodash.default.once((function(){return(0,_initialize_saved_object.intializeSavedObject)(savedObject,savedObjectsClient,config)}));savedObject.applyESResp=function(resp){return(0,_apply_es_resp.applyESResp)(resp,savedObject,config)};savedObject._serialize=function(){return(0,_serialize_saved_object.serializeSavedObject)(savedObject,config)};savedObject.isTitleChanged=function(){return savedObject._source&&savedObject._source.title!==savedObject.title};savedObject.creationOpts=function(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return _objectSpread({id:savedObject.id,migrationVersion:savedObject.migrationVersion},opts)};savedObject.save=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(opts){var result;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return(0,_save_saved_object.saveSavedObject)(savedObject,config,opts,services);case 3:result=_context.sent;return _context.abrupt("return",Promise.resolve(result));case 7:_context.prev=7;_context.t0=_context["catch"](0);return _context.abrupt("return",Promise.reject(_context.t0));case 10:case"end":return _context.stop()}}}),_callee,null,[[0,7]])})));return function(_x){return _ref.apply(this,arguments)}}();savedObject.destroy=function(){};savedObject.delete=function(){if(!savedObject.id){return Promise.reject(new Error("Deleting a saved Object requires type and id"))}return savedObjectsClient.delete(esType,savedObject.id)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hydrateIndexPattern=hydrateIndexPattern;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function hydrateIndexPattern(_x,_x2,_x3,_x4){return _hydrateIndexPattern.apply(this,arguments)}function _hydrateIndexPattern(){_hydrateIndexPattern=_asyncToGenerator(regeneratorRuntime.mark((function _callee(id,savedObject,indexPatterns,config){var clearSavedIndexPattern,indexPattern,index,indexObj;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:clearSavedIndexPattern=!!config.clearSavedIndexPattern;indexPattern=config.indexPattern;if(savedObject.searchSource){_context.next=4;break}return _context.abrupt("return",null);case 4:if(!clearSavedIndexPattern){_context.next=7;break}savedObject.searchSource.setField("index",undefined);return _context.abrupt("return",null);case 7:index=id||indexPattern||savedObject.searchSource.getOwnField("index");if(!(typeof index!=="string"||!index)){_context.next=10;break}return _context.abrupt("return",null);case 10:_context.next=12;return indexPatterns.get(index);case 12:indexObj=_context.sent;savedObject.searchSource.setField("index",indexObj);return _context.abrupt("return",indexObj);case 15:case"end":return _context.stop()}}}),_callee)})));return _hydrateIndexPattern.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.intializeSavedObject=intializeSavedObject;var _lodash=_interopRequireDefault(__webpack_require__(49));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function intializeSavedObject(_x,_x2,_x3){return _intializeSavedObject.apply(this,arguments)}function _intializeSavedObject(){_intializeSavedObject=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObject,savedObjectsClient,config){var esType,resp,respMapped;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:esType=config.type;if(esType){_context.next=3;break}throw new Error("You must define a type name to use SavedObject objects.");case 3:if(savedObject.id){_context.next=12;break}_lodash.default.assign(savedObject,savedObject.defaults);_context.next=7;return savedObject.hydrateIndexPattern();case 7:if(!(typeof config.afterESResp==="function")){_context.next=11;break}_context.next=10;return config.afterESResp(savedObject);case 10:savedObject=_context.sent;case 11:return _context.abrupt("return",savedObject);case 12:_context.next=14;return savedObjectsClient.get(esType,savedObject.id);case 14:resp=_context.sent;respMapped={_id:resp.id,_type:resp.type,_source:_lodash.default.cloneDeep(resp.attributes),references:resp.references,found:!!resp._version};_context.next=18;return savedObject.applyESResp(respMapped);case 18:if(!(typeof config.init==="function")){_context.next=21;break}_context.next=21;return config.init.call(savedObject);case 21:return _context.abrupt("return",savedObject);case 22:case"end":return _context.stop()}}}),_callee)})));return _intializeSavedObject.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.serializeSavedObject=serializeSavedObject;var _lodash=_interopRequireDefault(__webpack_require__(49));var _angular=_interopRequireDefault(__webpack_require__(38));var _public=__webpack_require__(34);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function serializeSavedObject(savedObject,config){var mapping=(0,_public.expandShorthand)(config.mapping);var attributes={};var references=[];_lodash.default.forOwn(mapping,(function(fieldMapping,fieldName){if(typeof fieldName!=="string"){return}var savedObjectFieldVal=savedObject[fieldName];if(savedObjectFieldVal!=null){attributes[fieldName]=fieldMapping._serialize?fieldMapping._serialize(savedObjectFieldVal):savedObjectFieldVal}}));if(savedObject.searchSource){var searchSourceFields=_lodash.default.omit(savedObject.searchSource.getFields(),["sort","size"]);if(searchSourceFields.index){var indexId=typeof searchSourceFields.index==="string"?searchSourceFields.index:searchSourceFields.index.id;var refName="kibanaSavedObjectMeta.searchSourceJSON.index";references.push({name:refName,type:"index-pattern",id:indexId});searchSourceFields=_objectSpread({},searchSourceFields,{indexRefName:refName,index:undefined})}if(searchSourceFields.filter){searchSourceFields=_objectSpread({},searchSourceFields,{filter:searchSourceFields.filter.map((function(filterRow,i){if(!filterRow.meta||!filterRow.meta.index){return filterRow}var refName="kibanaSavedObjectMeta.searchSourceJSON.filter[".concat(i,"].meta.index");references.push({name:refName,type:"index-pattern",id:filterRow.meta.index});return _objectSpread({},filterRow,{meta:_objectSpread({},filterRow.meta,{indexRefName:refName,index:undefined})})}))})}attributes.kibanaSavedObjectMeta={searchSourceJSON:_angular.default.toJson(searchSourceFields)}}return{attributes:attributes,references:references}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.applyESResp=applyESResp;var _lodash=_interopRequireDefault(__webpack_require__(49));var _parse_search_source=__webpack_require__(1172);var _public=__webpack_require__(34);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function applyESResp(_x,_x2,_x3){return _applyESResp.apply(this,arguments)}function _applyESResp(){_applyESResp=_asyncToGenerator(regeneratorRuntime.mark((function _callee(resp,savedObject,config){var mapping,esType,injectReferences,hydrateIndexPattern,meta;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:mapping=(0,_public.expandShorthand)(config.mapping);esType=config.type||"";savedObject._source=_lodash.default.cloneDeep(resp._source);injectReferences=config.injectReferences;hydrateIndexPattern=savedObject.hydrateIndexPattern;if(!(typeof resp.found==="boolean"&&!resp.found)){_context.next=7;break}throw new _public.SavedObjectNotFound(esType,savedObject.id||"");case 7:meta=resp._source.kibanaSavedObjectMeta||{};delete resp._source.kibanaSavedObjectMeta;if(!config.indexPattern&&savedObject._source.indexPattern){config.indexPattern=savedObject._source.indexPattern;delete savedObject._source.indexPattern}_lodash.default.defaults(savedObject._source,savedObject.defaults);_lodash.default.forOwn(mapping,(function(fieldMapping,fieldName){if(fieldMapping._deserialize&&typeof fieldName==="string"){savedObject._source[fieldName]=fieldMapping._deserialize(savedObject._source[fieldName])}}));_lodash.default.assign(savedObject,savedObject._source);savedObject.lastSavedTitle=savedObject.title;_context.next=16;return(0,_parse_search_source.parseSearchSource)(savedObject,esType,meta.searchSourceJSON,resp.references);case 16:_context.next=18;return hydrateIndexPattern();case 18:if(injectReferences&&resp.references&&resp.references.length>0){injectReferences(savedObject,resp.references)}if(!(typeof config.afterESResp==="function")){_context.next=23;break}_context.next=22;return config.afterESResp(savedObject);case 22:savedObject=_context.sent;case 23:return _context.abrupt("return",savedObject);case 24:case"end":return _context.stop()}}}),_callee)})));return _applyESResp.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.parseSearchSource=parseSearchSource;var _lodash=_interopRequireDefault(__webpack_require__(49));var _public=__webpack_require__(1173);var _public2=__webpack_require__(34);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function parseSearchSource(savedObject,esType,searchSourceJson,references){if(!savedObject.searchSource)return;var searchSourceValues;try{searchSourceValues=JSON.parse(searchSourceJson)}catch(e){throw new _public2.InvalidJSONProperty("Invalid JSON in ".concat(esType,' "').concat(savedObject.id,'". ').concat(e.message," JSON: ").concat(searchSourceJson))}if(!searchSourceValues||_typeof(searchSourceValues)!=="object"){throw new _public2.InvalidJSONProperty("Invalid searchSourceJSON in ".concat(esType,' "').concat(savedObject.id,'".'))}if(searchSourceValues.indexRefName){var reference=references.find((function(ref){return ref.name===searchSourceValues.indexRefName}));if(!reference){throw new Error("Could not find reference for ".concat(searchSourceValues.indexRefName," on ").concat(savedObject.getEsType()," ").concat(savedObject.id))}searchSourceValues.index=reference.id;delete searchSourceValues.indexRefName}if(searchSourceValues.filter){searchSourceValues.filter.forEach((function(filterRow){if(!filterRow.meta||!filterRow.meta.indexRefName){return}var reference=references.find((function(ref){return ref.name===filterRow.meta.indexRefName}));if(!reference){throw new Error("Could not find reference for ".concat(filterRow.meta.indexRefName," on ").concat(savedObject.getEsType()))}filterRow.meta.index=reference.id;delete filterRow.meta.indexRefName}))}var searchSourceFields=savedObject.searchSource.getFields();var fnProps=_lodash.default.transform(searchSourceFields,(function(dynamic,val,name){if(_lodash.default.isFunction(val)&&name)dynamic[name]=val}),{});savedObject.searchSource.setFields(_lodash.default.defaults(searchSourceValues,fnProps));var query=savedObject.searchSource.getOwnField("query");if(typeof query!=="undefined"){savedObject.searchSource.setField("query",(0,_public.migrateLegacyQuery)(query))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={plugin:true,kbnBaseUrl:true,initAngularBootstrap:true,PaginateDirectiveProvider:true,PaginateControlsDirectiveProvider:true};Object.defineProperty(exports,"kbnBaseUrl",{enumerable:true,get:function get(){return _kbn_base_url.kbnBaseUrl}});Object.defineProperty(exports,"initAngularBootstrap",{enumerable:true,get:function get(){return _angular_bootstrap.initAngularBootstrap}});Object.defineProperty(exports,"PaginateDirectiveProvider",{enumerable:true,get:function get(){return _paginate.PaginateDirectiveProvider}});Object.defineProperty(exports,"PaginateControlsDirectiveProvider",{enumerable:true,get:function get(){return _paginate.PaginateControlsDirectiveProvider}});exports.plugin=void 0;var _plugin=__webpack_require__(1174);Object.keys(_plugin).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _plugin[key]}})}));var _kbn_base_url=__webpack_require__(1176);var _angular_bootstrap=__webpack_require__(1177);var _paginate=__webpack_require__(1183);var _angular=__webpack_require__(1185);Object.keys(_angular).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _angular[key]}})}));var _notify=__webpack_require__(1201);Object.keys(_notify).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _notify[key]}})}));var _utils=__webpack_require__(448);Object.keys(_utils).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _utils[key]}})}));var plugin=function plugin(initializerContext){return new _plugin.KibanaLegacyPlugin(initializerContext)};exports.plugin=plugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KibanaLegacyPlugin=void 0;var _dashboard_config=__webpack_require__(1175);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var KibanaLegacyPlugin=function(){function KibanaLegacyPlugin(initializerContext){_classCallCheck(this,KibanaLegacyPlugin);this.initializerContext=initializerContext;_defineProperty(this,"apps",[]);_defineProperty(this,"forwards",[])}_createClass(KibanaLegacyPlugin,[{key:"setup",value:function setup(){var _this=this;return{registerLegacyApp:function registerLegacyApp(app){_this.apps.push(app)},forwardApp:function forwardApp(legacyAppId,newAppId){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{keepPrefix:false};_this.forwards.push(_objectSpread({legacyAppId:legacyAppId,newAppId:newAppId},options))},config:this.initializerContext.config.get(),env:this.initializerContext.env}}},{key:"start",value:function start(_ref){var _this2=this;var application=_ref.application;return{getApps:function getApps(){return _this2.apps},getForwards:function getForwards(){return _this2.forwards},config:this.initializerContext.config.get(),dashboardConfig:(0,_dashboard_config.getDashboardConfig)(!application.capabilities.dashboard.showWriteControls)}}}]);return KibanaLegacyPlugin}();exports.KibanaLegacyPlugin=KibanaLegacyPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDashboardConfig=getDashboardConfig;function getDashboardConfig(hideWriteControls){var _hideWriteControls=hideWriteControls;return{turnHideWriteControlsOn:function turnHideWriteControlsOn(){_hideWriteControls=true},getHideWriteControls:function getHideWriteControls(){return _hideWriteControls}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.kbnBaseUrl=void 0;var kbnBaseUrl="/app/kibana";exports.kbnBaseUrl=kbnBaseUrl},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initAngularBootstrap=void 0;var _lodash=__webpack_require__(49);var _angular=_interopRequireDefault(__webpack_require__(38));var _bind_html=__webpack_require__(1178);var _tooltip=__webpack_require__(1179);var _tooltip_popup=_interopRequireDefault(__webpack_require__(1181));var _tooltip_html_unsafe_popup=_interopRequireDefault(__webpack_require__(1182));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var initAngularBootstrap=(0,_lodash.once)((function(){_angular.default.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.bindHtml","ui.bootstrap.tooltip"]);_angular.default.module("ui.bootstrap.tpls",["template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html"]);(0,_bind_html.initBindHtml)();(0,_tooltip.initBootstrapTooltip)();_angular.default.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-html-unsafe-popup.html",_tooltip_html_unsafe_popup.default)}]);_angular.default.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-popup.html",_tooltip_popup.default)}])}));exports.initAngularBootstrap=initAngularBootstrap},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initBindHtml=initBindHtml;var _angular=_interopRequireDefault(__webpack_require__(38));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function initBindHtml(){_angular.default.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",(function(){return function(scope,element,attr){element.addClass("ng-binding").data("$binding",attr.bindHtmlUnsafe);scope.$watch(attr.bindHtmlUnsafe,(function bindHtmlUnsafeWatchAction(value){element.html(value||"")}))}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initBootstrapTooltip=initBootstrapTooltip;var _angular=_interopRequireDefault(__webpack_require__(38));var _position=__webpack_require__(1180);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function initBootstrapTooltip(){(0,_position.initBootstrapPosition)();_angular.default.module("ui.bootstrap.tooltip",["ui.bootstrap.position"]).provider("$tooltip",(function(){var defaultOptions={placement:"top",animation:true,popupDelay:0};var triggerMap={mouseenter:"mouseleave",click:"click",focus:"blur"};var globalOptions={};this.options=function(value){_angular.default.extend(globalOptions,value)};this.setTriggers=function setTriggers(triggers){_angular.default.extend(triggerMap,triggers)};function snake_case(name){var regexp=/[A-Z]/g;var separator="-";return name.replace(regexp,(function(letter,pos){return(pos?separator:"")+letter.toLowerCase()}))}this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function($window,$compile,$timeout,$document,$position,$interpolate){return function $tooltip(type,prefix,defaultTriggerShow){var options=_angular.default.extend({},defaultOptions,globalOptions);function getTriggers(trigger){var show=trigger||options.trigger||defaultTriggerShow;var hide=triggerMap[show]||show;return{show:show,hide:hide}}var directiveName=snake_case(type);var startSym=$interpolate.startSymbol();var endSym=$interpolate.endSymbol();var template="<div "+directiveName+"-popup "+'title="'+startSym+"title"+endSym+'" '+'content="'+startSym+"content"+endSym+'" '+'placement="'+startSym+"placement"+endSym+'" '+'animation="animation" '+'is-open="isOpen"'+">"+"</div>";return{restrict:"EA",compile:function compile(tElem,tAttrs){var tooltipLinker=$compile(template);return function link(scope,element,attrs){var tooltip;var tooltipLinkedScope;var transitionTimeout;var popupTimeout;var appendToBody=_angular.default.isDefined(options.appendToBody)?options.appendToBody:false;var triggers=getTriggers(undefined);var hasEnableExp=_angular.default.isDefined(attrs[prefix+"Enable"]);var ttScope=scope.$new(true);var positionTooltip=function positionTooltip(){var ttPosition=$position.positionElements(element,tooltip,ttScope.placement,appendToBody);ttPosition.top+="px";ttPosition.left+="px";tooltip.css(ttPosition)};ttScope.isOpen=false;function toggleTooltipBind(){if(!ttScope.isOpen){showTooltipBind()}else{hideTooltipBind()}}function showTooltipBind(){if(hasEnableExp&&!scope.$eval(attrs[prefix+"Enable"])){return}prepareTooltip();if(ttScope.popupDelay){if(!popupTimeout){popupTimeout=$timeout(show,ttScope.popupDelay,false);popupTimeout.then((function(reposition){return reposition()})).catch((function(error){if(error!=="canceled"){throw error}}))}}else{show()()}}function hideTooltipBind(){scope.$evalAsync((function(){hide()}))}function show(){popupTimeout=null;if(transitionTimeout){$timeout.cancel(transitionTimeout);transitionTimeout=null}if(!ttScope.content){return _angular.default.noop}createTooltip();tooltip.css({top:0,left:0,display:"block"});ttScope.$digest();positionTooltip();ttScope.isOpen=true;ttScope.$digest();return positionTooltip}function hide(){ttScope.isOpen=false;$timeout.cancel(popupTimeout);popupTimeout=null;if(ttScope.animation){if(!transitionTimeout){transitionTimeout=$timeout(removeTooltip,500)}}else{removeTooltip()}}function createTooltip(){if(tooltip){removeTooltip()}tooltipLinkedScope=ttScope.$new();tooltip=tooltipLinker(tooltipLinkedScope,(function(tooltip){if(appendToBody){$document.find("body").append(tooltip)}else{element.after(tooltip)}}))}function removeTooltip(){transitionTimeout=null;if(tooltip){tooltip.remove();tooltip=null}if(tooltipLinkedScope){tooltipLinkedScope.$destroy();tooltipLinkedScope=null}}function prepareTooltip(){prepPlacement();prepPopupDelay()}attrs.$observe(type,(function(val){ttScope.content=val;if(!val&&ttScope.isOpen){hide()}}));attrs.$observe(prefix+"Title",(function(val){ttScope.title=val}));function prepPlacement(){var val=attrs[prefix+"Placement"];ttScope.placement=_angular.default.isDefined(val)?val:options.placement}function prepPopupDelay(){var val=attrs[prefix+"PopupDelay"];var delay=parseInt(val,10);ttScope.popupDelay=!isNaN(delay)?delay:options.popupDelay}var unregisterTriggers=function unregisterTriggers(){element.unbind(triggers.show,showTooltipBind);element.unbind(triggers.hide,hideTooltipBind)};function prepTriggers(){var val=attrs[prefix+"Trigger"];unregisterTriggers();triggers=getTriggers(val);if(triggers.show===triggers.hide){element.bind(triggers.show,toggleTooltipBind)}else{element.bind(triggers.show,showTooltipBind);element.bind(triggers.hide,hideTooltipBind)}}prepTriggers();var animation=scope.$eval(attrs[prefix+"Animation"]);ttScope.animation=_angular.default.isDefined(animation)?!!animation:options.animation;var appendToBodyVal=scope.$eval(attrs[prefix+"AppendToBody"]);appendToBody=_angular.default.isDefined(appendToBodyVal)?appendToBodyVal:appendToBody;if(appendToBody){scope.$on("$locationChangeSuccess",(function closeTooltipOnLocationChangeSuccess(){if(ttScope.isOpen){hide()}}))}scope.$on("$destroy",(function onDestroyTooltip(){$timeout.cancel(transitionTimeout);$timeout.cancel(popupTimeout);unregisterTriggers();removeTooltip();ttScope=null}))}}}}}]})).directive("tooltip",["$tooltip",function($tooltip){return $tooltip("tooltip","tooltip","mouseenter")}]).directive("tooltipPopup",(function(){return{restrict:"EA",replace:true,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}})).directive("tooltipHtmlUnsafe",["$tooltip",function($tooltip){return $tooltip("tooltipHtmlUnsafe","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",(function(){return{restrict:"EA",replace:true,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initBootstrapPosition=initBootstrapPosition;var _angular=_interopRequireDefault(__webpack_require__(38));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function initBootstrapPosition(){_angular.default.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function($document,$window){function getStyle(el,cssprop){if(el.currentStyle){return el.currentStyle[cssprop]}else if($window.getComputedStyle){return $window.getComputedStyle(el)[cssprop]}return el.style[cssprop]}function isStaticPositioned(element){return(getStyle(element,"position")||"static")==="static"}var parentOffsetEl=function parentOffsetEl(element){var docDomEl=$document[0];var offsetParent=element.offsetParent||docDomEl;while(offsetParent&&offsetParent!==docDomEl&&isStaticPositioned(offsetParent)){offsetParent=offsetParent.offsetParent}return offsetParent||docDomEl};return{position:function position(element){var elBCR=this.offset(element);var offsetParentBCR={top:0,left:0};var offsetParentEl=parentOffsetEl(element[0]);if(offsetParentEl!=$document[0]){offsetParentBCR=this.offset(_angular.default.element(offsetParentEl));offsetParentBCR.top+=offsetParentEl.clientTop-offsetParentEl.scrollTop;offsetParentBCR.left+=offsetParentEl.clientLeft-offsetParentEl.scrollLeft}var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:elBCR.top-offsetParentBCR.top,left:elBCR.left-offsetParentBCR.left}},offset:function offset(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:boundingClientRect.top+($window.pageYOffset||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].documentElement.scrollLeft)}},positionElements:function positionElements(hostEl,targetEl,positionStr,appendToBody){var positionStrParts=positionStr.split("-");var pos0=positionStrParts[0];var pos1=positionStrParts[1]||"center";var hostElPos;var targetElWidth;var targetElHeight;var targetElPos;hostElPos=appendToBody?this.offset(hostEl):this.position(hostEl);targetElWidth=targetEl.prop("offsetWidth");targetElHeight=targetEl.prop("offsetHeight");var shiftWidth={center:function center(){return hostElPos.left+hostElPos.width/2-targetElWidth/2},left:function left(){return hostElPos.left},right:function right(){return hostElPos.left+hostElPos.width}};var shiftHeight={center:function center(){return hostElPos.top+hostElPos.height/2-targetElHeight/2},top:function top(){return hostElPos.top},bottom:function bottom(){return hostElPos.top+hostElPos.height}};switch(pos0){case"right":targetElPos={top:shiftHeight[pos1](),left:shiftWidth[pos0]()};break;case"left":targetElPos={top:shiftHeight[pos1](),left:hostElPos.left-targetElWidth};break;case"bottom":targetElPos={top:shiftHeight[pos0](),left:shiftWidth[pos1]()};break;default:targetElPos={top:hostElPos.top-targetElHeight,left:shiftWidth[pos1]()};break}return targetElPos}}}])}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="bsTooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\t\n    <div class="bsTooltip-arrow"></div>\t\n    <div class="bsTooltip-inner" ng-bind="content"></div>\t\n  </div>'},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="bsTooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\t\n    <div class="bsTooltip-arrow"></div>\t\n    <div class="bsTooltip-inner" bind-html-unsafe="content"></div>\t\n  </div>'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PaginateDirectiveProvider=PaginateDirectiveProvider;exports.PaginateControlsDirectiveProvider=PaginateControlsDirectiveProvider;var _lodash=_interopRequireDefault(__webpack_require__(49));var _i18n=__webpack_require__(1);var _paginate_controls=_interopRequireDefault(__webpack_require__(1184));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PaginateDirectiveProvider($parse,$compile){return{restrict:"E",scope:true,link:{pre:function pre($scope,$el,attrs){if(_lodash.default.isUndefined(attrs.bottomControls))attrs.bottomControls=true;if($el.find("paginate-controls.paginate-bottom").length===0&&attrs.bottomControls){$el.append($compile('<paginate-controls class="paginate-bottom">')($scope))}},post:function post($scope,$el,attrs){if(_lodash.default.isUndefined(attrs.topControls))attrs.topControls=false;if($el.find("paginate-controls.paginate-top").length===0&&attrs.topControls){$el.prepend($compile('<paginate-controls class="paginate-top">')($scope))}var paginate=$scope.paginate;paginate.getList=$parse(attrs.list);paginate.perPageProp=attrs.perPageProp;if(attrs.perPage){paginate.perPage=attrs.perPage;$scope.showSelector=false}else{$scope.showSelector=true}paginate.otherWidthGetter=$parse(attrs.otherWidth);paginate.init()}},controllerAs:"paginate",controller:function controller($scope,$document){var self=this;var ALL=0;var allSizeTitle=_i18n.i18n.translate("kibana_legacy.paginate.size.allDropDownOptionLabel",{defaultMessage:"All"});self.sizeOptions=[{title:"10",value:10},{title:"25",value:25},{title:"100",value:100},{title:allSizeTitle,value:ALL}];self.init=function(){self.perPage=_lodash.default.parseInt(self.perPage)||$scope[self.perPageProp];$scope.$watchMulti(["paginate.perPage",self.perPageProp,self.otherWidthGetter],(function(vals,oldVals){var intChanges=vals[0]!==oldVals[0];if(intChanges){if(!setPerPage(self.perPage)){self.renderList()}return}self.perPage=_lodash.default.parseInt(self.perPage)||$scope[self.perPageProp];if(self.perPage==null){self.perPage=ALL;return}self.renderList()}));$scope.$watch("page",self.changePage);$scope.$watchCollection(self.getList,(function(list){$scope.list=list;self.renderList()}))};self.goToPage=function(number){if(number){if(number.hasOwnProperty("number"))number=number.number;$scope.page=$scope.pages[number-1]||$scope.pages[0]}};self.goToTop=function goToTop(){$document.scrollTop(0)};self.renderList=function(){$scope.pages=[];if(!$scope.list)return;var perPage=_lodash.default.parseInt(self.perPage);var count=perPage?Math.ceil($scope.list.length/perPage):1;_lodash.default.times(count,(function(i){var page;if(perPage){var start=perPage*i;page=$scope.list.slice(start,start+perPage)}else{page=$scope.list.slice(0)}page.number=i+1;page.i=i;page.count=count;page.first=page.number===1;page.last=page.number===count;page.firstItem=(page.number-1)*perPage+1;page.lastItem=Math.min(page.number*perPage,$scope.list.length);page.prev=$scope.pages[i-1];if(page.prev)page.prev.next=page;$scope.pages.push(page)}));if($scope.page&&$scope.page.i<$scope.pages.length){$scope.page=$scope.pages[$scope.page.i]}else{$scope.page=$scope.pages[0]}if($scope.page&&$scope.onPageChanged){$scope.onPageChanged($scope.page)}};self.changePage=function(page){if(!page){$scope.otherPages=null;return}$scope.otherPages=[];var width=+self.otherWidthGetter($scope)||5;var left=page.i-Math.round((width-1)/2);var right=left+width-1;if(left<0){right+=0-left;left=0}var lastI=page.count-1;if(right>lastI){right=lastI;left=right-width+1}for(var i=left;i<=right;i++){var other=$scope.pages[i];if(!other)continue;$scope.otherPages.push(other);if(other.last)$scope.otherPages.containsLast=true;if(other.first)$scope.otherPages.containsFirst=true}if($scope.onPageChanged){$scope.onPageChanged($scope.page)}};function setPerPage(val){var $ppParent=$scope;while($ppParent&&!_lodash.default.has($ppParent,self.perPageProp)){$ppParent=$ppParent.$parent}if($ppParent){$ppParent[self.perPageProp]=val;return true}}}}}function PaginateControlsDirectiveProvider(){return{restrict:"E",template:_paginate_controls.default}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<button\n  class="kuiLink"\n  ng-if="linkToTop"\n  ng-click="paginate.goToTop()"\n  data-test-subj="paginateControlsLinkToTop"\n  i18n-id="kibana_legacy.paginate.controls.scrollTopButtonLabel"\n  i18n-default-message="Scroll to top"\n></button>\n\n<div\n  class="pagination-other-pages"\n  data-test-subj="paginationControls"\n>\n  <ul class="pagination-other-pages-list pagination-sm" ng-if="page.count > 1">\n    <li ng-style="{\'visibility\':\'hidden\'}" ng-if="page.first">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-click="paginate.goToPage(page.prev)"\n      >\n        <span class="euiButtonEmpty__content"></span>\n      </button>\n    </li>\n    <li ng-style="{\'visibility\':\'visible\'}" ng-if="!page.first">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-click="paginate.goToPage(page.prev)"\n      >\n        <span class="euiButtonEmpty__content"></span>\n      </button>\n    </li>\n\n    <li ng-if="!otherPages.containsFirst">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-click="paginate.goToPage(1)"\n      >\n        <span class="euiButtonEmpty__content">1</span>\n      </button>\n      ...\n    </li>\n\n    <li\n      ng-repeat="other in otherPages"\n      ng-class="{ active: other.number === page.number }"\n    >\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-class="{ \'euiPaginationButton-isActive\': other.number === page.number }"\n        ng-click="paginate.goToPage(other)"\n      >\n        <span class="euiButtonEmpty__content">{{other.number}}</span>\n      </button>\n    </li>\n\n    <li ng-if="!otherPages.containsLast">\n      ...\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        ng-click="paginate.goToPage(page.count)"\n      >\n        <span class="euiButtonEmpty__content">{{page.count}}</span>\n      </button>\n    </li>\n\n    <li ng-style="{\'visibility\':\'hidden\'}" ng-if="page.last">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        data-test-subj="paginateNext"\n        ng-click="paginate.goToPage(page.next)"\n      >\n        <span class="euiButtonEmpty__content"></span>\n      </button>\n    </li>\n    <li ng-style="{\'visibility\':\'visible\'}" ng-if="!page.last">\n      <button\n        class="euiButtonEmpty euiButtonEmpty--text euiButtonEmpty--small euiPaginationButton"\n        data-test-subj="paginateNext"\n        ng-click="paginate.goToPage(page.next)"\n      >\n        <span class="euiButtonEmpty__content"></span>\n      </button>\n    </li>\n  </ul>\n</div>\n\n<form class="form-inline pagination-size" ng-if="showSelector">\n  <div class="form-group">\n    <label\n      i18n-id="kibana_legacy.paginate.controls.pageSizeLabel"\n      i18n-default-message="Page Size"\n    ></label>\n    <select\n      ng-model="paginate.perPage"\n      ng-options="opt.value as opt.title for opt in paginate.sizeOptions"\n      data-test-subj="paginateControlsPageSizeSelect"\n    ></select>\n  </div>\n</form>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={PromiseServiceCreator:true,watchMultiDecorator:true,createTopNavDirective:true,createTopNavHelper:true,loadKbnTopNavDirectives:true,subscribeWithScope:true};Object.defineProperty(exports,"PromiseServiceCreator",{enumerable:true,get:function get(){return _promises.PromiseServiceCreator}});Object.defineProperty(exports,"watchMultiDecorator",{enumerable:true,get:function get(){return _watch_multi.watchMultiDecorator}});Object.defineProperty(exports,"createTopNavDirective",{enumerable:true,get:function get(){return _kbn_top_nav.createTopNavDirective}});Object.defineProperty(exports,"createTopNavHelper",{enumerable:true,get:function get(){return _kbn_top_nav.createTopNavHelper}});Object.defineProperty(exports,"loadKbnTopNavDirectives",{enumerable:true,get:function get(){return _kbn_top_nav.loadKbnTopNavDirectives}});Object.defineProperty(exports,"subscribeWithScope",{enumerable:true,get:function get(){return _subscribe_with_scope.subscribeWithScope}});var _promises=__webpack_require__(1186);var _watch_multi=__webpack_require__(1187);var _angular_config=__webpack_require__(1188);Object.keys(_angular_config).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _angular_config[key]}})}));var _kbn_top_nav=__webpack_require__(1198);var _subscribe_with_scope=__webpack_require__(1200)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PromiseServiceCreator=PromiseServiceCreator;var _lodash=_interopRequireDefault(__webpack_require__(49));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PromiseServiceCreator($q,$timeout){function Promise(fn){if(typeof this==="undefined")throw new Error('Promise constructor must be called with "new"');var defer=$q.defer();try{fn(defer.resolve,defer.reject)}catch(e){defer.reject(e)}return defer.promise}Promise.all=Promise.props=$q.all;Promise.resolve=function(val){var defer=$q.defer();defer.resolve(val);return defer.promise};Promise.reject=function(reason){var defer=$q.defer();defer.reject(reason);return defer.promise};Promise.cast=$q.when;Promise.delay=function(ms){return $timeout(_lodash.default.noop,ms)};Promise.method=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return Promise.try(fn,args,this)}};Promise.nodeify=function(promise,cb){promise.then((function(val){cb(void 0,val)}),cb)};Promise.map=function(arr,fn){return Promise.all(arr.map((function(i,el,list){return Promise.try(fn,[i,el,list])})))};Promise.each=function(arr,fn){var queue=arr.slice(0);var i=0;return function next(){if(!queue.length)return arr;return Promise.try(fn,[arr.shift(),i++]).then(next)}()};Promise.is=function(obj){return obj&&typeof obj.then==="function"};Promise.halt=_lodash.default.once((function(){var promise=new Promise((function(){}));promise.then=_lodash.default.constant(promise);promise.catch=_lodash.default.constant(promise);return promise}));Promise.try=function(fn,args,ctx){if(typeof fn!=="function"){return Promise.reject(new TypeError("fn must be a function"))}var value;if(Array.isArray(args)){try{value=fn.apply(ctx,args)}catch(e){return Promise.reject(e)}}else{try{value=fn.call(ctx,args)}catch(e){return Promise.reject(e)}}return Promise.resolve(value)};Promise.fromNode=function(takesCbFn){return new Promise((function(resolve,reject){takesCbFn((function(err){for(var _len=arguments.length,results=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){results[_key-1]=arguments[_key]}if(err)reject(err);else if(results.length>1)resolve(results);else resolve(results[0])}))}))};Promise.race=function(iterable){return new Promise((function(resolve,reject){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=iterable[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var i=_step.value;Promise.resolve(i).then(resolve,reject)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}))};return Promise}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.watchMultiDecorator=watchMultiDecorator;var _lodash=_interopRequireDefault(__webpack_require__(49));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function watchMultiDecorator($provide){$provide.decorator("$rootScope",(function($delegate){$delegate.constructor.prototype.$watchMulti=function(expressions,fn){if(!Array.isArray(expressions)){throw new TypeError("expected an array of expressions to watch")}if(!_lodash.default.isFunction(fn)){throw new TypeError("expected a function that is triggered on each watch")}var $scope=this;var vals=new Array(expressions.length);var prev=new Array(expressions.length);var fire=false;var init=0;var neededInits=expressions.length;var unwatchers=expressions.map((function(expr,i){expr=normalizeExpression($scope,expr);if(!expr)return;return expr.fn.call($scope,expr.get,(function(newVal,oldVal){if(newVal===oldVal){init+=1}vals[i]=newVal;prev[i]=oldVal;fire=true}),expr.deep)}));var flip=false;unwatchers.push($scope.$watch((function(){if(init<neededInits)return init;if(fire){fire=false;flip=!flip}return flip}),(function(){if(init<neededInits)return false;fn(vals.slice(0),prev.slice(0));vals.forEach((function(v,i){prev[i]=v}))})));return function(){unwatchers.forEach((function(listener){return listener()}))}};function normalizeExpression($scope,expr){if(!expr)return;var norm={fn:$scope.$watch,deep:false};if(_lodash.default.isFunction(expr))return _lodash.default.assign(norm,{get:expr});if(_lodash.default.isObject(expr))return _lodash.default.assign(norm,expr);if(!_lodash.default.isString(expr))return;if(expr.substr(0,2)==="[]"){return _lodash.default.assign(norm,{fn:$scope.$watchCollection,get:expr.substr(2)})}if(expr.charAt(0)==="="){return _lodash.default.assign(norm,{deep:true,get:expr.substr(1)})}return _lodash.default.assign(norm,{get:expr})}return $delegate}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.$setupXsrfRequestInterceptor=exports.configureAppAngularModule=void 0;var _jquery=_interopRequireDefault(__webpack_require__(44));var _lodash=__webpack_require__(49);var _react=_interopRequireWildcard(__webpack_require__(28));var Rx=_interopRequireWildcard(__webpack_require__(33));var _i18n=__webpack_require__(1);var _react2=__webpack_require__(30);var _utils=__webpack_require__(180);var _public=__webpack_require__(31);var _utils2=__webpack_require__(448);var _lib=__webpack_require__(449);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var URL_LIMIT_WARN_WITHIN=1e3;function isDummyRoute($route,isLocalAngular){return $route.current&&$route.current.$$route&&$route.current.$$route.outerAngularWrapperRoute||!$route.current&&isLocalAngular}var configureAppAngularModule=function configureAppAngularModule(angularModule,newPlatform,isLocalAngular){var core="core"in newPlatform?newPlatform.core:newPlatform;var packageInfo="injectedMetadata"in newPlatform?newPlatform.injectedMetadata.getLegacyMetadata():newPlatform.env.packageInfo;if("injectedMetadata"in newPlatform){(0,_lodash.forOwn)(newPlatform.injectedMetadata.getInjectedVars(),(function(val,name){if(name!==undefined){angularModule.value(name,(0,_lodash.cloneDeep)(val))}}))}angularModule.value("kbnVersion",packageInfo.version).value("buildNum",packageInfo.buildNum).value("buildSha",packageInfo.buildSha).value("esUrl",getEsUrl(core)).value("uiCapabilities",core.application.capabilities).config(setupCompileProvider("injectedMetadata"in newPlatform?newPlatform.injectedMetadata.getLegacyMetadata().devMode:newPlatform.env.mode.dev)).config(setupLocationProvider()).config($setupXsrfRequestInterceptor(packageInfo.version)).run(capture$httpLoadingCount(core)).run($setupBreadcrumbsAutoClear(core,isLocalAngular)).run($setupBadgeAutoClear(core,isLocalAngular)).run($setupHelpExtensionAutoClear(core,isLocalAngular)).run($setupUrlOverflowHandling(core,isLocalAngular)).run($setupUICapabilityRedirect(core))};exports.configureAppAngularModule=configureAppAngularModule;var getEsUrl=function getEsUrl(newPlatform){var a=document.createElement("a");a.href=newPlatform.http.basePath.prepend("/elasticsearch");var protocolPort=/https/.test(a.protocol)?443:80;var port=a.port||protocolPort;return{host:a.hostname,port:port,protocol:a.protocol,pathname:a.pathname}};var setupCompileProvider=function setupCompileProvider(devMode){return function($compileProvider){if(!devMode){$compileProvider.debugInfoEnabled(false)}}};var setupLocationProvider=function setupLocationProvider(){return function($locationProvider){$locationProvider.html5Mode({enabled:false,requireBase:false,rewriteLinks:false});$locationProvider.hashPrefix("")}};var $setupXsrfRequestInterceptor=function $setupXsrfRequestInterceptor(version){_jquery.default.ajaxPrefilter((function(_ref,originalOptions,jqXHR){var _ref$kbnXsrfToken=_ref.kbnXsrfToken,kbnXsrfToken=_ref$kbnXsrfToken===void 0?true:_ref$kbnXsrfToken;if(kbnXsrfToken){jqXHR.setRequestHeader("kbn-version",version)}}));return function($httpProvider){$httpProvider.interceptors.push((function(){return{request:function request(opts){var _ref2=opts,_ref2$kbnXsrfToken=_ref2.kbnXsrfToken,kbnXsrfToken=_ref2$kbnXsrfToken===void 0?true:_ref2$kbnXsrfToken;if(kbnXsrfToken){(0,_lodash.set)(opts,["headers","kbn-version"],version)}return opts}}}))}};exports.$setupXsrfRequestInterceptor=$setupXsrfRequestInterceptor;var capture$httpLoadingCount=function capture$httpLoadingCount(newPlatform){return function($rootScope,$http){newPlatform.http.addLoadingCountSource(new Rx.Observable((function(observer){var unwatch=$rootScope.$watch((function(){var reqs=$http.pendingRequests||[];observer.next(reqs.filter((function(req){return!(0,_utils2.isSystemApiRequest)(req)})).length)}));return unwatch})))}};var $setupUICapabilityRedirect=function $setupUICapabilityRedirect(newPlatform){return function($rootScope,$injector){var isKibanaAppRoute=window.location.pathname.endsWith("/app/kibana");if(!isKibanaAppRoute){return}$rootScope.$on("$routeChangeStart",(function(event){var _ref3=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},route=_ref3.$$route;if(!route||!route.requireUICapability){return}if(!(0,_lodash.get)(newPlatform.application.capabilities,route.requireUICapability)){$injector.get("$location").url("/home");event.preventDefault()}}))}};var $setupBreadcrumbsAutoClear=function $setupBreadcrumbsAutoClear(newPlatform,isLocalAngular){return function($rootScope,$injector){var breadcrumbSetSinceRouteChange=false;var $route=$injector.has("$route")?$injector.get("$route"):{};newPlatform.chrome.getBreadcrumbs$().subscribe({next:function next(){breadcrumbSetSinceRouteChange=true}});$rootScope.$on("$routeChangeStart",(function(){breadcrumbSetSinceRouteChange=false}));$rootScope.$on("$routeChangeSuccess",(function(){if(isDummyRoute($route,isLocalAngular)){return}var current=$route.current||{};if(breadcrumbSetSinceRouteChange||current.$$route&&current.$$route.redirectTo){return}var k7BreadcrumbsProvider=current.k7Breadcrumbs;if(!k7BreadcrumbsProvider){newPlatform.chrome.setBreadcrumbs([]);return}try{newPlatform.chrome.setBreadcrumbs($injector.invoke(k7BreadcrumbsProvider))}catch(error){if((0,_lib.isAngularHttpError)(error)){error=(0,_lib.formatAngularHttpError)(error)}newPlatform.fatalErrors.add(error,"location")}}))}};var $setupBadgeAutoClear=function $setupBadgeAutoClear(newPlatform,isLocalAngular){return function($rootScope,$injector){var badgeSetSinceRouteChange=false;var $route=$injector.has("$route")?$injector.get("$route"):{};$rootScope.$on("$routeChangeStart",(function(){badgeSetSinceRouteChange=false}));$rootScope.$on("$routeChangeSuccess",(function(){if(isDummyRoute($route,isLocalAngular)){return}var current=$route.current||{};if(badgeSetSinceRouteChange||current.$$route&&current.$$route.redirectTo){return}var badgeProvider=current.badge;if(!badgeProvider){newPlatform.chrome.setBadge(undefined);return}try{newPlatform.chrome.setBadge($injector.invoke(badgeProvider))}catch(error){if((0,_lib.isAngularHttpError)(error)){error=(0,_lib.formatAngularHttpError)(error)}newPlatform.fatalErrors.add(error,"location")}}))}};var $setupHelpExtensionAutoClear=function $setupHelpExtensionAutoClear(newPlatform,isLocalAngular){return function($rootScope,$injector){var helpExtensionSetSinceRouteChange=false;newPlatform.chrome.getHelpExtension$().subscribe({next:function next(){helpExtensionSetSinceRouteChange=true}});var $route=$injector.has("$route")?$injector.get("$route"):{};$rootScope.$on("$routeChangeStart",(function(){if(isDummyRoute($route,isLocalAngular)){return}helpExtensionSetSinceRouteChange=false}));$rootScope.$on("$routeChangeSuccess",(function(){if(isDummyRoute($route,isLocalAngular)){return}var current=$route.current||{};if(helpExtensionSetSinceRouteChange||current.$$route&&current.$$route.redirectTo){return}newPlatform.chrome.setHelpExtension(current.helpExtension)}))}};var $setupUrlOverflowHandling=function $setupUrlOverflowHandling(newPlatform,isLocalAngular){return function($location,$rootScope,$injector){var $route=$injector.has("$route")?$injector.get("$route"):{};var urlOverflow=new _utils2.UrlOverflowService;var check=function check(){if(isDummyRoute($route,isLocalAngular)){return}if(newPlatform.uiSettings.get("state:storeInSessionStorage")){return}if($location.path()==="/error/url-overflow"){return}try{if(urlOverflow.check($location.absUrl())<=URL_LIMIT_WARN_WITHIN){newPlatform.notifications.toasts.addWarning({title:_i18n.i18n.translate("kibana_legacy.bigUrlWarningNotificationTitle",{defaultMessage:"The URL is big and Kibana might stop working"}),text:(0,_public.toMountPoint)(_react.default.createElement(_react.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"kibana_legacy.bigUrlWarningNotificationMessage",defaultMessage:"Either enable the {storeInSessionStorageParam} option in {advancedSettingsLink} or simplify the onscreen visuals.",values:{storeInSessionStorageParam:_react.default.createElement("code",null,"state:storeInSessionStorage"),advancedSettingsLink:_react.default.createElement("a",{href:"#/management/kibana/settings"},_react.default.createElement(_react2.FormattedMessage,{id:"kibana_legacy.bigUrlWarningNotificationMessage.advancedSettingsLinkText",defaultMessage:"advanced settings"}))}})))})}}catch(e){window.location.href=(0,_utils.modifyUrl)(window.location.href,(function(parts){parts.hash="#/error/url-overflow"}));window.location.reload()}};$rootScope.$on("$routeUpdate",check);$rootScope.$on("$routeChangeStart",check)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.migrateLegacyQuery=migrateLegacyQuery;var _lodash=__webpack_require__(49);function migrateLegacyQuery(query){if(!(0,_lodash.has)(query,"language")){return{query:query,language:"lucene"}}return query}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addSystemApiHeader=addSystemApiHeader;exports.isSystemApiRequest=isSystemApiRequest;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SYSTEM_REQUEST_HEADER_NAME="kbn-system-request";var LEGACY_SYSTEM_API_HEADER_NAME="kbn-system-api";function addSystemApiHeader(originalHeaders){var systemApiHeaders=_defineProperty({},SYSTEM_REQUEST_HEADER_NAME,true);return _objectSpread({},originalHeaders,{},systemApiHeaders)}function isSystemApiRequest(request){var headers=request.headers;return headers&&(!!headers[SYSTEM_REQUEST_HEADER_NAME]||!!headers[LEGACY_SYSTEM_API_HEADER_NAME])}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UrlOverflowService=exports.IE_REGEX=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var URL_MAX_IE=2e3;var URL_MAX_OTHERS=25e3;var IE_REGEX=/(; ?MSIE |Edge\/\d|Trident\/[\d+\.]+;.*rv:*11\.\d+)/;exports.IE_REGEX=IE_REGEX;var UrlOverflowService=function(){function UrlOverflowService(){var _this=this;_classCallCheck(this,UrlOverflowService);_defineProperty(this,"_ieLike",void 0);_defineProperty(this,"_val",void 0);_defineProperty(this,"_sync",void 0);var key="error/url-overflow/url";var store=window.sessionStorage||{getItem:function getItem(){},setItem:function setItem(){},removeItem:function removeItem(){}};this._ieLike=IE_REGEX.test(window.navigator.userAgent);this._val=store.getItem(key);this._sync=function(){if(typeof _this._val==="string"){store.setItem(key,_this._val)}else{store.removeItem(key)}}}_createClass(UrlOverflowService,[{key:"failLength",value:function failLength(){return this._ieLike?URL_MAX_IE:URL_MAX_OTHERS}},{key:"set",value:function set(v){this._val=v;this._sync()}},{key:"get",value:function get(){return this._val}},{key:"check",value:function check(absUrl){if(!this.get()){var urlLength=absUrl.length;var remaining=this.failLength()-urlLength;if(remaining>0){return remaining}this.set(absUrl)}throw new Error("\n      The URL has gotten too big and kibana can no longer\n      continue. Please refresh to return to your previous state.\n    ")}},{key:"clear",value:function clear(){this._val=undefined;this._sync()}}]);return UrlOverflowService}();exports.UrlOverflowService=UrlOverflowService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KbnAccessibleClickProvider=KbnAccessibleClickProvider;var _eui=__webpack_require__(29);function KbnAccessibleClickProvider(){return{restrict:"A",controller:function controller($element){$element.on("keydown",(function(e){if(e.keyCode===_eui.keyCodes.SPACE){e.preventDefault()}}))},link:function link(scope,element,attrs){var elementType=element.prop("tagName");if(elementType==="BUTTON"){throw new Error("kbnAccessibleClick doesn't need to be used on a button.")}if(elementType==="A"&&attrs.href!==undefined){throw new Error("kbnAccessibleClick doesn't need to be used on a link if it has a href attribute.")}if(!attrs.ngClick){throw new Error("kbnAccessibleClick requires ng-click to be defined on its element.")}if(attrs.tabindex===undefined){element.attr("tabindex","0")}if(attrs.role===undefined){element.attr("role","button")}element.on("keyup",(function(e){if(_eui.accessibleClickKeys[e.keyCode]){element.click()}}))}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PrivateProvider=PrivateProvider;var _lodash=_interopRequireDefault(__webpack_require__(49));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var nextId=_lodash.default.partial(_lodash.default.uniqueId,"privateProvider#");function name(fn){return fn.name||fn.toString().split("\n").shift()}function PrivateProvider(){var provider=this;var cache={};var swaps={};function identify(fn){if(typeof fn!=="function"){throw new TypeError('Expected private module "'+fn+'" to be a function')}if(fn.$$id)return fn.$$id;else return fn.$$id=nextId()}provider.stub=function(fn,instance){cache[identify(fn)]=instance;return instance};provider.swap=function(fn,prov){var id=identify(fn);swaps[id]=prov};provider.$get=["$injector",function PrivateFactory($injector){var privPath=[];var pathToString=function pathToString(){return privPath.map(name).join(" -> ")};function instantiate(prov,locals){if(~privPath.indexOf(prov)){throw new Error('Circular reference to "'+name(prov)+'"'+" found while resolving private deps: "+pathToString())}privPath.push(prov);var context={};var instance=$injector.invoke(prov,context,locals);if(!_lodash.default.isObject(instance))instance=context;privPath.pop();return instance}function get(id,prov,$delegateId,$delegateProv){if(cache[id])return cache[id];var instance;if($delegateId!=null&&$delegateProv!=null){instance=instantiate(prov,{$decorate:_lodash.default.partial(get,$delegateId,$delegateProv)})}else{instance=instantiate(prov)}return cache[id]=instance}function Private(prov){var id=identify(prov);var $delegateId;var $delegateProv;if(swaps[id]){$delegateId=id;$delegateProv=prov;prov=swaps[$delegateId];id=identify(prov)}return get(id,prov,$delegateId,$delegateProv)}Private.stub=provider.stub;Private.swap=provider.swap;return Private}]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.registerListenEventListener=registerListenEventListener;function registerListenEventListener($rootScope){$rootScope.constructor.prototype.$listen=function(emitter,eventName,handler){emitter.on(eventName,handler);this.$on("$destroy",(function(){emitter.off(eventName,handler)}))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatMsg=formatMsg;var _lodash=_interopRequireDefault(__webpack_require__(49));var _i18n=__webpack_require__(1);var _format_es_msg=__webpack_require__(450);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var has=_lodash.default.has;function formatMsg(err){var source=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var message="";if(source){message+=source+": "}var esMsg=(0,_format_es_msg.formatESMsg)(err);if(typeof err==="string"){message+=err}else if(esMsg){message+=esMsg}else if(err instanceof Error){message+=formatMsg.describeError(err)}else if(has(err,"status")&&has(err,"data")){if(err.status===-1){message+=_i18n.i18n.translate("kibana_legacy.notify.toaster.unavailableServerErrorMessage",{defaultMessage:"An HTTP request has failed to connect. "+"Please check if the Kibana server is running and that your browser has a working connection, "+"or contact your system administrator."})}else{message+=_i18n.i18n.translate("kibana_legacy.notify.toaster.errorStatusMessage",{defaultMessage:"Error {errStatus} {errStatusText}: {errMessage}",values:{errStatus:err.status,errStatusText:err.statusText,errMessage:err.data.message}})}}return message}formatMsg.describeError=function(err){if(!err)return undefined;if(err.shortMessage)return err.shortMessage;if(err.body&&err.body.message)return err.body.message;if(err.message)return err.message;return""+err}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.formatStack=formatStack;var _i18n=__webpack_require__(1);function formatStack(err){if(err.stack&&err.stack.indexOf(err.message)===-1){return _i18n.i18n.translate("kibana_legacy.notify.toaster.errorMessage",{defaultMessage:"Error: {errorMessage}\n      {errorStack}",values:{errorMessage:err.message,errorStack:err.stack}})}return err.stack}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addFatalError=addFatalError;var _format_angular_http_error=__webpack_require__(451);function addFatalError(fatalErrors,error,location){if((0,_format_angular_http_error.isAngularHttpError)(error)){error=(0,_format_angular_http_error.formatAngularHttpError)(error)}fatalErrors.add(error,location)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createTopNavDirective=createTopNavDirective;exports.loadKbnTopNavDirectives=loadKbnTopNavDirectives;exports.createTopNavHelper=void 0;var _angular=_interopRequireDefault(__webpack_require__(38));__webpack_require__(1199);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createTopNavDirective(){return{restrict:"E",template:"",compile:function compile(elem){var child=document.createElement("kbn-top-nav-helper");var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=elem[0].attributes[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var attr=_step.value;child.setAttribute(attr.name,attr.value)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}child.setAttribute("disabled-buttons","disabledButtons");elem.append(child);var linkFn=function linkFn($scope,_,$attr){$scope.$watch((function(){var config=$scope.$eval($attr.config)||[];return config.map((function(item){if(item.key&&!item.id){item.id=item.key}if(typeof item.disableButton==="function"){return item.disableButton()}return item.disableButton}))}),(function(newVal){$scope.disabledButtons=newVal}),true)};return linkFn}}}var createTopNavHelper=function createTopNavHelper(_ref){var TopNavMenu=_ref.TopNavMenu;return function(reactDirective){return reactDirective(TopNavMenu,[["config",{watchDepth:"value"}],["disabledButtons",{watchDepth:"reference"}],["query",{watchDepth:"reference"}],["savedQuery",{watchDepth:"reference"}],["intl",{watchDepth:"reference"}],["onQuerySubmit",{watchDepth:"reference"}],["onFiltersUpdated",{watchDepth:"reference"}],["onRefreshChange",{watchDepth:"reference"}],["onClearSavedQuery",{watchDepth:"reference"}],["onSaved",{watchDepth:"reference"}],["onSavedQueryUpdated",{watchDepth:"reference"}],["onSavedQueryIdChange",{watchDepth:"reference"}],["indexPatterns",{watchDepth:"collection"}],["filters",{watchDepth:"collection"}],"showSearchBar","showFilterBar","showQueryBar","showQueryInput","showDatePicker","showSaveQuery","appName","screenTitle","dateRangeFrom","dateRangeTo","savedQueryId","isRefreshPaused","refreshInterval","disableAutoFocus","showAutoRefreshOnly","useDefaultBehaviors"])}};exports.createTopNavHelper=createTopNavHelper;var isLoaded=false;function loadKbnTopNavDirectives(navUi){if(!isLoaded){isLoaded=true;_angular.default.module("kibana").directive("kbnTopNav",createTopNavDirective).directive("kbnTopNavHelper",createTopNavHelper(navUi))}}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.subscribeWithScope=subscribeWithScope;function callInDigest($scope,fn,fatalError){try{if($scope.$root.$$phase){fn()}else{$scope.$apply((function(){return fn()}))}}catch(error){if(fatalError){fatalError(error)}}}function subscribeWithScope($scope,observable,observer,fatalError){return observable.subscribe({next:function next(value){if(observer&&observer.next){callInDigest($scope,(function(){return observer.next(value)}),fatalError)}},error:function(_error){function error(_x){return _error.apply(this,arguments)}error.toString=function(){return _error.toString()};return error}((function(error){callInDigest($scope,(function(){if(observer&&observer.error){observer.error(error)}else{throw new Error("Uncaught error in subscribeWithScope(): ".concat(error?error.stack||error.message:error))}}),fatalError)})),complete:function complete(){if(observer&&observer.complete){callInDigest($scope,(function(){return observer.complete()}),fatalError)}}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={addAppRedirectMessageToUrl:true,showAppRedirectNotification:true};Object.defineProperty(exports,"addAppRedirectMessageToUrl",{enumerable:true,get:function get(){return _app_redirect.addAppRedirectMessageToUrl}});Object.defineProperty(exports,"showAppRedirectNotification",{enumerable:true,get:function get(){return _app_redirect.showAppRedirectNotification}});var _toasts=__webpack_require__(1202);Object.keys(_toasts).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _toasts[key]}})}));var _lib=__webpack_require__(449);Object.keys(_lib).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _lib[key]}})}));var _app_redirect=__webpack_require__(1204)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ToastNotifications",{enumerable:true,get:function get(){return _toast_notifications.ToastNotifications}});var _toast_notifications=__webpack_require__(1203)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ToastNotifications=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ToastNotifications=function ToastNotifications(toasts){var _this=this;_classCallCheck(this,ToastNotifications);this.toasts=toasts;_defineProperty(this,"list",[]);_defineProperty(this,"onChangeCallback",void 0);_defineProperty(this,"onChange",(function(callback){_this.onChangeCallback=callback}));_defineProperty(this,"add",(function(toastOrTitle){return _this.toasts.add(toastOrTitle)}));_defineProperty(this,"remove",(function(toast){return _this.toasts.remove(toast)}));_defineProperty(this,"addSuccess",(function(toastOrTitle){return _this.toasts.addSuccess(toastOrTitle)}));_defineProperty(this,"addWarning",(function(toastOrTitle){return _this.toasts.addWarning(toastOrTitle)}));_defineProperty(this,"addDanger",(function(toastOrTitle){return _this.toasts.addDanger(toastOrTitle)}));_defineProperty(this,"addError",(function(error,options){return _this.toasts.addError(error,options)}));toasts.get$().subscribe((function(list){_this.list=list;if(_this.onChangeCallback){_this.onChangeCallback()}}))};exports.ToastNotifications=ToastNotifications},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"addAppRedirectMessageToUrl",{enumerable:true,get:function get(){return _app_redirect.addAppRedirectMessageToUrl}});Object.defineProperty(exports,"showAppRedirectNotification",{enumerable:true,get:function get(){return _app_redirect.showAppRedirectNotification}});var _app_redirect=__webpack_require__(1205)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addAppRedirectMessageToUrl=addAppRedirectMessageToUrl;exports.showAppRedirectNotification=showAppRedirectNotification;var _utils=__webpack_require__(180);var APP_REDIRECT_MESSAGE_PARAM="app_redirect_message";function addAppRedirectMessageToUrl(url,message){return(0,_utils.modifyUrl)(url,(function(urlParts){urlParts.hash=(0,_utils.modifyUrl)(urlParts.hash||"",(function(hashParts){hashParts.query[APP_REDIRECT_MESSAGE_PARAM]=message}))}))}function showAppRedirectNotification($location,toasts){var queryString=$location.search();if(!queryString[APP_REDIRECT_MESSAGE_PARAM]){return}var message=queryString[APP_REDIRECT_MESSAGE_PARAM];$location.search(APP_REDIRECT_MESSAGE_PARAM,null);toasts.addDanger(message)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSource=createSource;var _lodash=_interopRequireDefault(__webpack_require__(49));var _i18n=__webpack_require__(1);var _constants=__webpack_require__(163);var _confirm_modal_promise=__webpack_require__(250);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function createSource(_x,_x2,_x3){return _createSource.apply(this,arguments)}function _createSource(){_createSource=_asyncToGenerator(regeneratorRuntime.mark((function _callee(source,savedObject,esType){var options,services,savedObjectsClient,overlays,confirmMessage,title,confirmButtonText,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:options=_args.length>3&&_args[3]!==undefined?_args[3]:{};services=_args.length>4?_args[4]:undefined;savedObjectsClient=services.savedObjectsClient,overlays=services.overlays;_context.prev=3;_context.next=6;return savedObjectsClient.create(esType,source,options);case 6:return _context.abrupt("return",_context.sent);case 9:_context.prev=9;_context.t0=_context["catch"](3);if(!(_lodash.default.get(_context.t0,"res.status")===409)){_context.next=16;break}confirmMessage=_i18n.i18n.translate("savedObjects.confirmModal.overwriteConfirmationMessage",{defaultMessage:"Are you sure you want to overwrite {title}?",values:{title:savedObject.title}});title=_i18n.i18n.translate("savedObjects.confirmModal.overwriteTitle",{defaultMessage:"Overwrite {name}?",values:{name:savedObject.getDisplayName()}});confirmButtonText=_i18n.i18n.translate("savedObjects.confirmModal.overwriteButtonLabel",{defaultMessage:"Overwrite"});return _context.abrupt("return",(0,_confirm_modal_promise.confirmModalPromise)(confirmMessage,title,confirmButtonText,overlays).then((function(){return savedObjectsClient.create(esType,source,savedObject.creationOpts(_objectSpread({overwrite:true},options)))})).catch((function(){return Promise.reject(new Error(_constants.OVERWRITE_REJECTED))})));case 16:_context.next=18;return Promise.reject(_context.t0);case 18:return _context.abrupt("return",_context.sent);case 19:case"end":return _context.stop()}}}),_callee,null,[[3,9]])})));return _createSource.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.findObjectByTitle=findObjectByTitle;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function findObjectByTitle(_x,_x2,_x3){return _findObjectByTitle.apply(this,arguments)}function _findObjectByTitle(){_findObjectByTitle=_asyncToGenerator(regeneratorRuntime.mark((function _callee(savedObjectsClient,type,title){var response;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(title){_context.next=2;break}return _context.abrupt("return");case 2:_context.next=4;return savedObjectsClient.find({type:type,perPage:10,search:'"'.concat(title,'"'),searchFields:["title"],fields:["title"]});case 4:response=_context.sent;return _context.abrupt("return",response.savedObjects.find((function(obj){return obj.get("title").toLowerCase()===title.toLowerCase()})));case 6:case"end":return _context.stop()}}}),_callee)})));return _findObjectByTitle.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.displayDuplicateTitleConfirmModal=displayDuplicateTitleConfirmModal;var _i18n=__webpack_require__(1);var _constants=__webpack_require__(163);var _confirm_modal_promise=__webpack_require__(250);function displayDuplicateTitleConfirmModal(savedObject,overlays){var confirmMessage=_i18n.i18n.translate("savedObjects.confirmModal.saveDuplicateConfirmationMessage",{defaultMessage:"A {name} with the title '{title}' already exists. Would you like to save anyway?",values:{title:savedObject.title,name:savedObject.getDisplayName()}});var confirmButtonText=_i18n.i18n.translate("savedObjects.confirmModal.saveDuplicateButtonLabel",{defaultMessage:"Save {name}",values:{name:savedObject.getDisplayName()}});try{return(0,_confirm_modal_promise.confirmModalPromise)(confirmMessage,"",confirmButtonText,overlays)}catch(_){return Promise.reject(new Error(_constants.SAVE_DUPLICATE_REJECTED))}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectLoader=void 0;var _string_utils=__webpack_require__(1210);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SavedObjectLoader=function(){function SavedObjectLoader(SavedObjectClass,savedObjectsClient,chrome){_classCallCheck(this,SavedObjectLoader);this.savedObjectsClient=savedObjectsClient;this.chrome=chrome;_defineProperty(this,"Class",void 0);_defineProperty(this,"type",void 0);_defineProperty(this,"lowercaseType",void 0);_defineProperty(this,"loaderProperties",void 0);this.type=SavedObjectClass.type;this.Class=SavedObjectClass;this.lowercaseType=this.type.toLowerCase();this.loaderProperties={name:"".concat(this.lowercaseType,"s"),noun:_string_utils.StringUtils.upperFirst(this.type),nouns:"".concat(this.lowercaseType,"s")}}_createClass(SavedObjectLoader,[{key:"get",value:function(){var _get=_asyncToGenerator(regeneratorRuntime.mark((function _callee(id){var obj;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:obj=new this.Class(id);return _context.abrupt("return",obj.init());case 2:case"end":return _context.stop()}}}),_callee,this)})));function get(_x){return _get.apply(this,arguments)}return get}()},{key:"urlFor",value:function urlFor(id){return"#/".concat(this.lowercaseType,"/").concat(encodeURIComponent(id))}},{key:"delete",value:function(){var _delete2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(ids){var _this=this;var idsUsed,deletions,coreNavLinks;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:idsUsed=!Array.isArray(ids)?[ids]:ids;deletions=idsUsed.map((function(id){var savedObject=new _this.Class(id);return savedObject.delete()}));_context2.next=4;return Promise.all(deletions);case 4:coreNavLinks=this.chrome.navLinks;coreNavLinks.getAll().filter((function(link){return link.linkToLastSubUrl&&idsUsed.find((function(deletedId){return link.url&&link.url.includes(deletedId)}))!==undefined})).forEach((function(link){return coreNavLinks.update(link.id,{url:link.baseUrl})}));case 6:case"end":return _context2.stop()}}}),_callee2,this)})));function _delete(_x2){return _delete2.apply(this,arguments)}return _delete}()},{key:"mapHitSource",value:function mapHitSource(source,id){source.id=id;source.url=this.urlFor(id);return source}},{key:"mapSavedObjectApiHits",value:function mapSavedObjectApiHits(hit){return this.mapHitSource(hit.attributes,hit.id)}},{key:"findAll",value:function findAll(){var _this2=this;var search=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;var fields=arguments.length>2?arguments[2]:undefined;return this.savedObjectsClient.find({type:this.lowercaseType,search:search?"".concat(search,"*"):undefined,perPage:size,page:1,searchFields:["title^3","description"],defaultSearchOperator:"AND",fields:fields}).then((function(resp){return{total:resp.total,hits:resp.savedObjects.map((function(savedObject){return _this2.mapSavedObjectApiHits(savedObject)}))}}))}},{key:"find",value:function find(){var search=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;return this.findAll(search,size).then((function(resp){return{total:resp.total,hits:resp.hits.filter((function(savedObject){return!savedObject.error}))}}))}}]);return SavedObjectLoader}();exports.SavedObjectLoader=SavedObjectLoader},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StringUtils=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var StringUtils=function(){function StringUtils(){_classCallCheck(this,StringUtils)}_createClass(StringUtils,null,[{key:"upperFirst",value:function upperFirst(){var str=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return str?str.charAt(0).toUpperCase()+str.slice(1):""}}]);return StringUtils}();exports.StringUtils=StringUtils},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.saveWithConfirmation=saveWithConfirmation;var _lodash=__webpack_require__(49);var _i18n=__webpack_require__(1);var _constants=__webpack_require__(163);var _confirm_modal_promise=__webpack_require__(250);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function saveWithConfirmation(_x,_x2,_x3,_x4){return _saveWithConfirmation.apply(this,arguments)}function _saveWithConfirmation(){_saveWithConfirmation=_asyncToGenerator(regeneratorRuntime.mark((function _callee(source,savedObject,options,services){var savedObjectsClient,overlays,confirmMessage,title,confirmButtonText;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:savedObjectsClient=services.savedObjectsClient,overlays=services.overlays;_context.prev=1;_context.next=4;return savedObjectsClient.create(savedObject.getEsType(),source,options);case 4:return _context.abrupt("return",_context.sent);case 7:_context.prev=7;_context.t0=_context["catch"](1);if(!((0,_lodash.get)(_context.t0,"res.status")===409)){_context.next=14;break}confirmMessage=_i18n.i18n.translate("savedObjects.confirmModal.overwriteConfirmationMessage",{defaultMessage:"Are you sure you want to overwrite {title}?",values:{title:savedObject.title}});title=_i18n.i18n.translate("savedObjects.confirmModal.overwriteTitle",{defaultMessage:"Overwrite {name}?",values:{name:savedObject.displayName}});confirmButtonText=_i18n.i18n.translate("savedObjects.confirmModal.overwriteButtonLabel",{defaultMessage:"Overwrite"});return _context.abrupt("return",(0,_confirm_modal_promise.confirmModalPromise)(confirmMessage,title,confirmButtonText,overlays).then((function(){return savedObjectsClient.create(savedObject.getEsType(),source,_objectSpread({overwrite:true},options))})).catch((function(){return Promise.reject(new Error(_constants.OVERWRITE_REJECTED))})));case 14:_context.next=16;return Promise.reject(_context.t0);case 16:return _context.abrupt("return",_context.sent);case 17:case"end":return _context.stop()}}}),_callee,null,[[1,7]])})));return _saveWithConfirmation.apply(this,arguments)}},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createDashboardEditUrl=createDashboardEditUrl;exports.DashboardConstants=void 0;var DashboardConstants={ADD_VISUALIZATION_TO_DASHBOARD_MODE_PARAM:"addToDashboard",LANDING_PAGE_PATH:"/dashboards",CREATE_NEW_DASHBOARD_URL:"/dashboard",ADD_EMBEDDABLE_ID:"addEmbeddableId",ADD_EMBEDDABLE_TYPE:"addEmbeddableType",DASHBOARDS_ID:"dashboards",DASHBOARD_ID:"dashboard"};exports.DashboardConstants=DashboardConstants;function createDashboardEditUrl(id){return"/dashboard/".concat(id)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createSavedDashboardLoader=createSavedDashboardLoader;var _public=__webpack_require__(200);var _saved_dashboard=__webpack_require__(457);function createSavedDashboardLoader(services){var SavedDashboard=(0,_saved_dashboard.createSavedDashboardClass)(services);return new _public.SavedObjectLoader(SavedDashboard,services.savedObjectsClient,services.chrome)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _types=__webpack_require__(1216);Object.keys(_types).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _types[key]}})}))},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CustomUrlEditor=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(30);var _utils=__webpack_require__(244);var _custom_url_utils=__webpack_require__(139);var _constants=__webpack_require__(245);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getLinkToOptions(){return[{id:_constants.URL_TYPE.KIBANA_DASHBOARD,label:_i18n.i18n.translate("xpack.ml.customUrlEditor.kibanaDashboardLabel",{defaultMessage:"Kibana dashboard"})},{id:_constants.URL_TYPE.KIBANA_DISCOVER,label:_i18n.i18n.translate("xpack.ml.customUrlEditor.discoverLabel",{defaultMessage:"Discover"})},{id:_constants.URL_TYPE.OTHER,label:_i18n.i18n.translate("xpack.ml.customUrlEditor.otherLabel",{defaultMessage:"Other"})}]}var CustomUrlEditor=function CustomUrlEditor(_ref){var customUrl=_ref.customUrl,setEditCustomUrl=_ref.setEditCustomUrl,savedCustomUrls=_ref.savedCustomUrls,dashboards=_ref.dashboards,indexPatterns=_ref.indexPatterns,queryEntityFieldNames=_ref.queryEntityFieldNames;if(customUrl===undefined){return null}var onLabelChange=function onLabelChange(e){setEditCustomUrl(_objectSpread({},customUrl,{label:e.target.value}))};var onTypeChange=function onTypeChange(linkType){setEditCustomUrl(_objectSpread({},customUrl,{type:linkType}))};var onDashboardChange=function onDashboardChange(e){var kibanaSettings=customUrl.kibanaSettings;setEditCustomUrl(_objectSpread({},customUrl,{kibanaSettings:_objectSpread({},kibanaSettings,{dashboardId:e.target.value})}))};var onDiscoverIndexPatternChange=function onDiscoverIndexPatternChange(e){var kibanaSettings=customUrl.kibanaSettings;setEditCustomUrl(_objectSpread({},customUrl,{kibanaSettings:_objectSpread({},kibanaSettings,{discoverIndexPatternId:e.target.value})}))};var onQueryEntitiesChange=function onQueryEntitiesChange(selectedOptions){var selectedFieldNames=selectedOptions.map((function(option){return option.label}));var kibanaSettings=customUrl.kibanaSettings;setEditCustomUrl(_objectSpread({},customUrl,{kibanaSettings:_objectSpread({},kibanaSettings,{queryFieldNames:selectedFieldNames})}))};var onOtherUrlValueChange=function onOtherUrlValueChange(e){setEditCustomUrl(_objectSpread({},customUrl,{otherUrlSettings:{urlValue:e.target.value}}))};var onTimeRangeTypeChange=function onTimeRangeTypeChange(e){var timeRange=customUrl.timeRange;setEditCustomUrl(_objectSpread({},customUrl,{timeRange:_objectSpread({},timeRange,{type:e.target.value})}))};var onTimeRangeIntervalChange=function onTimeRangeIntervalChange(e){var timeRange=customUrl.timeRange;setEditCustomUrl(_objectSpread({},customUrl,{timeRange:_objectSpread({},timeRange,{interval:e.target.value})}))};var label=customUrl.label,type=customUrl.type,timeRange=customUrl.timeRange,kibanaSettings=customUrl.kibanaSettings,otherUrlSettings=customUrl.otherUrlSettings;var dashboardOptions=dashboards.map((function(dashboard){return{value:dashboard.id,text:dashboard.title}}));var indexPatternOptions=indexPatterns.map((function(indexPattern){return{value:indexPattern.id,text:indexPattern.title}}));var entityOptions=queryEntityFieldNames.map((function(fieldName){return{label:fieldName}}));var selectedEntityOptions=[];if(kibanaSettings!==undefined&&kibanaSettings.queryFieldNames!==undefined){var queryFieldNames=kibanaSettings.queryFieldNames;selectedEntityOptions=queryFieldNames.map((function(fieldName){return{label:fieldName}}))}var timeRangeOptions=Object.values(_constants.TIME_RANGE_TYPE).map((function(timeRangeType){return{value:timeRangeType,text:timeRangeType}}));var isInvalidLabel=!(0,_custom_url_utils.isValidLabel)(label,savedCustomUrls);var invalidLabelError=isInvalidLabel?[_i18n.i18n.translate("xpack.ml.customUrlsEditor.invalidLabelErrorMessage",{defaultMessage:"A unique label must be supplied"})]:[];var isInvalidTimeRange=!(0,_utils.isValidCustomUrlSettingsTimeRange)(timeRange);var invalidIntervalError=isInvalidTimeRange?[_i18n.i18n.translate("xpack.ml.customUrlsList.invalidIntervalFormatErrorMessage",{defaultMessage:"Invalid interval format"})]:[];return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("h4",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.customUrlsEditor.createNewCustomUrlTitle",defaultMessage:"Create new custom URL"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiForm,{className:"ml-edit-url-form"},_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.customUrlsEditor.labelLabel",defaultMessage:"Label"}),className:"url-label",error:invalidLabelError,isInvalid:isInvalidLabel,compressed:true},_react.default.createElement(_eui.EuiFieldText,{name:"label",value:label,onChange:onLabelChange,isInvalid:isInvalidLabel,compressed:true,"data-test-subj":"mlJobCustomUrlLabelInput"})),_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.customUrlsEditor.linkToLabel",defaultMessage:"Link to"}),compressed:true},_react.default.createElement(_eui.EuiRadioGroup,{options:getLinkToOptions(),idSelected:type,onChange:onTypeChange,className:"url-link-to-radio"})),type===_constants.URL_TYPE.KIBANA_DASHBOARD&&_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.customUrlsEditor.dashboardNameLabel",defaultMessage:"Dashboard name"}),compressed:true},_react.default.createElement(_eui.EuiSelect,{options:dashboardOptions,value:kibanaSettings.dashboardId,onChange:onDashboardChange,compressed:true})),type===_constants.URL_TYPE.KIBANA_DISCOVER&&_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.customUrlsEditor.indexPatternLabel",defaultMessage:"Index pattern"}),compressed:true},_react.default.createElement(_eui.EuiSelect,{options:indexPatternOptions,value:kibanaSettings.discoverIndexPatternId,onChange:onDiscoverIndexPatternChange,compressed:true})),(type===_constants.URL_TYPE.KIBANA_DASHBOARD||type===_constants.URL_TYPE.KIBANA_DISCOVER)&&entityOptions.length>0&&_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.customUrlsEditor.queryEntitiesLabel",defaultMessage:"Query entities"})},_react.default.createElement(_eui.EuiComboBox,{placeholder:_i18n.i18n.translate("xpack.ml.customUrlsEditor.selectEntitiesPlaceholder",{defaultMessage:"Select entities"}),options:entityOptions,selectedOptions:selectedEntityOptions,onChange:onQueryEntitiesChange,isClearable:true})),(type===_constants.URL_TYPE.KIBANA_DASHBOARD||type===_constants.URL_TYPE.KIBANA_DISCOVER)&&_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.customUrlsEditor.timeRangeLabel",defaultMessage:"Time range"}),className:"url-time-range",compressed:true},_react.default.createElement(_eui.EuiSelect,{options:timeRangeOptions,value:timeRange.type,onChange:onTimeRangeTypeChange,compressed:true}))),timeRange.type===_constants.TIME_RANGE_TYPE.INTERVAL&&_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.customUrlsEditor.intervalLabel",defaultMessage:"Interval"}),className:"url-time-range",error:invalidIntervalError,isInvalid:isInvalidTimeRange,compressed:true},_react.default.createElement(_eui.EuiFieldText,{value:timeRange.interval,onChange:onTimeRangeIntervalChange,isInvalid:isInvalidTimeRange,compressed:true}))))),type===_constants.URL_TYPE.OTHER&&_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.customUrlsEditor.urlLabel",defaultMessage:"URL"}),compressed:true,fullWidth:true},_react.default.createElement(_eui.EuiTextArea,{fullWidth:true,rows:2,value:otherUrlSettings.urlValue,onChange:onOtherUrlValueChange,compressed:true}))))};exports.CustomUrlEditor=CustomUrlEditor},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"DeleteJobModal",{enumerable:true,get:function get(){return _delete_job_modal.DeleteJobModal}});var _delete_job_modal=__webpack_require__(1220)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DeleteJobModal=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _utils=__webpack_require__(111);var _jobs_list=__webpack_require__(193);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(30);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var DeleteJobModal=function(_Component){_inherits(DeleteJobModal,_Component);function DeleteJobModal(props){var _this;_classCallCheck(this,DeleteJobModal);_this=_possibleConstructorReturn(this,_getPrototypeOf(DeleteJobModal).call(this,props));_defineProperty(_assertThisInitialized(_this),"closeModal",(function(){_this.setState({isModalVisible:false})}));_defineProperty(_assertThisInitialized(_this),"showModal",(function(jobs){_this.setState({jobs:jobs,isModalVisible:true,deleting:false})}));_defineProperty(_assertThisInitialized(_this),"deleteJob",(function(){_this.setState({deleting:true});(0,_utils.deleteJobs)(_this.state.jobs);setTimeout((function(){_this.closeModal();_this.refreshJobs()}),_jobs_list.DELETING_JOBS_REFRESH_INTERVAL_MS)}));_defineProperty(_assertThisInitialized(_this),"setEL",(function(el){if(el){_this.el=el}}));_this.state={jobs:[],isModalVisible:false,deleting:false};_this.refreshJobs=_this.props.refreshJobs;return _this}_createClass(DeleteJobModal,[{key:"componentDidMount",value:function componentDidMount(){if(typeof this.props.setShowFunction==="function"){this.props.setShowFunction(this.showModal)}}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(typeof this.props.unsetShowFunction==="function"){this.props.unsetShowFunction()}}},{key:"render",value:function render(){var modal;if(this.state.isModalVisible){if(this.el&&this.state.deleting===true){this.el.confirmButton.style.display="none";this.el.cancelButton.textContent=_i18n.i18n.translate("xpack.ml.jobsList.deleteJobModal.closeButtonLabel",{defaultMessage:"Close"})}var title=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.deleteJobModal.deleteJobsTitle",defaultMessage:"Delete {jobsCount, plural, one {{jobId}} other {# jobs}}",values:{jobsCount:this.state.jobs.length,jobId:this.state.jobs[0].id}});modal=_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{"data-test-subj":"mlDeleteJobConfirmModal",ref:this.setEL,title:title,onCancel:this.closeModal,onConfirm:this.deleteJob,cancelButtonText:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.deleteJobModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.deleteJobModal.deleteButtonLabel",defaultMessage:"Delete"}),buttonColor:"danger",defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON,className:"eui-textBreakWord"},this.state.deleting===true&&_react.default.createElement("div",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.deleteJobModal.deletingJobsStatusLabel",defaultMessage:"Deleting jobs"}),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement("div",{style:{textAlign:"center"}},_react.default.createElement(_eui.EuiLoadingSpinner,{size:"l"}))),this.state.deleting===false&&_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.deleteJobModal.deleteJobsDescription",defaultMessage:"Are you sure you want to delete {jobsCount, plural, one {this job} other {these jobs}}?",values:{jobsCount:this.state.jobs.length}})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.deleteJobModal.deleteMultipleJobsDescription",defaultMessage:"Deleting {jobsCount, plural, one {a job} other {multiple jobs}} can be time consuming. {jobsCount, plural, one {It} other {They}} will be deleted in the background and may not disappear from the jobs list instantly",values:{jobsCount:this.state.jobs.length}})))))}return _react.default.createElement("div",null,modal)}}]);return DeleteJobModal}(_react.Component);exports.DeleteJobModal=DeleteJobModal;_defineProperty(DeleteJobModal,"displayName","DeleteJobModal");_defineProperty(DeleteJobModal,"propTypes",{setShowFunction:_propTypes.default.func.isRequired,unsetShowFunction:_propTypes.default.func.isRequired,refreshJobs:_propTypes.default.func.isRequired})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"StartDatafeedModal",{enumerable:true,get:function get(){return _start_datafeed_modal.StartDatafeedModal}});var _start_datafeed_modal=__webpack_require__(1222)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StartDatafeedModal=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _moment=_interopRequireDefault(__webpack_require__(32));var _utils=__webpack_require__(111);var _time_range_selector=__webpack_require__(1223);var _react2=__webpack_require__(30);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var StartDatafeedModal=function(_Component){_inherits(StartDatafeedModal,_Component);function StartDatafeedModal(props){var _this;_classCallCheck(this,StartDatafeedModal);_this=_possibleConstructorReturn(this,_getPrototypeOf(StartDatafeedModal).call(this,props));_defineProperty(_assertThisInitialized(_this),"setStartTime",(function(time){_this.setState({startTime:time})}));_defineProperty(_assertThisInitialized(_this),"setEndTime",(function(time){_this.setState({endTime:time})}));_defineProperty(_assertThisInitialized(_this),"setCreateWatch",(function(e){_this.setState({createWatch:e.target.checked})}));_defineProperty(_assertThisInitialized(_this),"closeModal",(function(){_this.setState({isModalVisible:false})}));_defineProperty(_assertThisInitialized(_this),"setTimeRangeValid",(function(timeRangeValid){_this.setState({timeRangeValid:timeRangeValid})}));_defineProperty(_assertThisInitialized(_this),"showModal",(function(jobs,showCreateWatchFlyout){var startTime=undefined;var now=(0,_moment.default)();var endTime=now;var initialSpecifiedStartTime=getLowestLatestTime(jobs);var allowCreateWatch=jobs.length===1;_this.setState({jobs:jobs,isModalVisible:true,startTime:startTime,endTime:endTime,initialSpecifiedStartTime:initialSpecifiedStartTime,showCreateWatchFlyout:showCreateWatchFlyout,allowCreateWatch:allowCreateWatch,createWatch:false,now:now})}));_defineProperty(_assertThisInitialized(_this),"save",(function(){var jobs=_this.state.jobs;var start=_moment.default.isMoment(_this.state.startTime)?_this.state.startTime.valueOf():_this.state.startTime;var end=_moment.default.isMoment(_this.state.endTime)?_this.state.endTime.valueOf():_this.state.endTime;(0,_utils.forceStartDatafeeds)(jobs,start,end,(function(){if(_this.state.createWatch&&jobs.length===1){var jobId=jobs[0].id;_this.getShowCreateWatchFlyoutFunction()(jobId)}_this.refreshJobs()}));_this.closeModal()}));var _now=(0,_moment.default)();_this.state={jobs:_this.props.jobs,isModalVisible:false,startTime:_now,endTime:_now,createWatch:false,allowCreateWatch:false,initialSpecifiedStartTime:_now,now:_now,timeRangeValid:true};_this.initialSpecifiedStartTime=_now;_this.refreshJobs=_this.props.refreshJobs;_this.getShowCreateWatchFlyoutFunction=_this.props.getShowCreateWatchFlyoutFunction;return _this}_createClass(StartDatafeedModal,[{key:"componentDidMount",value:function componentDidMount(){if(typeof this.props.setShowFunction==="function"){this.props.setShowFunction(this.showModal)}}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(typeof this.props.unsetShowFunction==="function"){this.props.unsetShowFunction()}}},{key:"render",value:function render(){var _this$state=this.state,jobs=_this$state.jobs,initialSpecifiedStartTime=_this$state.initialSpecifiedStartTime,startTime=_this$state.startTime,endTime=_this$state.endTime,createWatch=_this$state.createWatch,now=_this$state.now,timeRangeValid=_this$state.timeRangeValid;var startableJobs=jobs!==undefined?jobs.filter((function(j){return j.hasDatafeed})):[];var startDisabled=timeRangeValid===false||startTime!==undefined&&startTime===endTime;var modal;if(this.state.isModalVisible){modal=_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiModal,{onClose:this.closeModal,style:{width:"850px"},maxWidth:false,"data-test-subj":"mlStartDatafeedModal"},_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.startDatafeedModal.startJobsTitle",defaultMessage:"Start {jobsCount, plural, one {{jobId}} other {# jobs}}",values:{jobsCount:startableJobs.length,jobId:startableJobs[0].id}}))),_react.default.createElement(_eui.EuiModalBody,null,_react.default.createElement(_time_range_selector.TimeRangeSelector,{startTime:startTime===undefined?initialSpecifiedStartTime:startTime,endTime:endTime,setStartTime:this.setStartTime,setEndTime:this.setEndTime,now:now,setTimeRangeValid:this.setTimeRangeValid}),this.state.endTime===undefined&&_react.default.createElement("div",{className:"create-watch"},_react.default.createElement(_eui.EuiHorizontalRule,null),_react.default.createElement(_eui.EuiCheckbox,{id:"createWatch",label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.startDatafeedModal.createWatchDescription",defaultMessage:"Create watch after datafeed has started"}),checked:createWatch,onChange:this.setCreateWatch}))),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiButtonEmpty,{onClick:this.closeModal,"data-test-subj":"mlStartDatafeedModalCancelButton"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.startDatafeedModal.cancelButtonLabel",defaultMessage:"Cancel"})),_react.default.createElement(_eui.EuiButton,{onClick:this.save,isDisabled:startDisabled,fill:true,"data-test-subj":"mlStartDatafeedModalStartButton"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.startDatafeedModal.startButtonLabel",defaultMessage:"Start"})))))}return _react.default.createElement("div",null,modal)}}]);return StartDatafeedModal}(_react.Component);exports.StartDatafeedModal=StartDatafeedModal;StartDatafeedModal.propTypes={setShowFunction:_propTypes.default.func.isRequired,unsetShowFunction:_propTypes.default.func.isRequired,refreshJobs:_propTypes.default.func.isRequired};function getLowestLatestTime(jobs){var times=jobs.map((function(j){return j.latestTimestampSortValue}));return(0,_moment.default)(Math.min.apply(Math,_toConsumableArray(times)))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TimeRangeSelector",{enumerable:true,get:function get(){return _time_range_selector.TimeRangeSelector}});var _time_range_selector=__webpack_require__(1224)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeRangeSelector=void 0;__webpack_require__(1225);var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _moment=_interopRequireDefault(__webpack_require__(32));var _i18n=__webpack_require__(1);var _react2=__webpack_require__(30);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TIME_FORMAT="YYYY-MM-DD HH:mm:ss";var TimeRangeSelector=function(_Component){_inherits(TimeRangeSelector,_Component);function TimeRangeSelector(props){var _this;_classCallCheck(this,TimeRangeSelector);_this=_possibleConstructorReturn(this,_getPrototypeOf(TimeRangeSelector).call(this,props));_defineProperty(_assertThisInitialized(_this),"setStartTab",(function(tab){_this.setState({startTab:tab});switch(tab){case 0:_this.setStartTime(undefined);break;case 1:_this.setStartTime(_this.now);break;default:break}}));_defineProperty(_assertThisInitialized(_this),"setEndTab",(function(tab){_this.setState({endTab:tab});switch(tab){case 0:_this.setEndTime(undefined);break;case 1:_this.setEndTime(_this.now);break;default:break}}));_defineProperty(_assertThisInitialized(_this),"setStartTime",(function(time){_this.props.setStartTime(time)}));_defineProperty(_assertThisInitialized(_this),"setEndTime",(function(time){_this.props.setEndTime(time)}));_this.state={startTab:0,endTab:1};_this.latestTimestamp=_this.props.startTime;_this.now=_this.props.now;return _this}_createClass(TimeRangeSelector,[{key:"getTabItems",value:function getTabItems(){var datePickerTimes={start:_moment.default.isMoment(this.props.startTime)?this.props.startTime:this.latestTimestamp,end:_moment.default.isMoment(this.props.endTime)?this.props.endTime:this.now};var formattedLatestStartTime=this.latestTimestamp.format(TIME_FORMAT);var showContinueLabels=this.latestTimestamp.valueOf()>0;var startLabels=showContinueLabels===true?[_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.startDatafeedModal.continueFromStartTimeLabel",defaultMessage:"Continue from {formattedLatestStartTime}",values:{formattedLatestStartTime:formattedLatestStartTime}}),_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.startDatafeedModal.continueFromNowLabel",defaultMessage:"Continue from now"}),_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.startDatafeedModal.continueFromSpecifiedTimeLabel",defaultMessage:"Continue from specified time"})]:[_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.startDatafeedModal.startAtBeginningOfDataLabel",defaultMessage:"Start at beginning of data"}),_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.startDatafeedModal.startFromNowLabel",defaultMessage:"Start from now"}),_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.startDatafeedModal.specifyStartTimeLabel",defaultMessage:"Specify start time"})];var startItems=[{index:0,label:startLabels[0]},{index:1,label:startLabels[1]},{index:2,label:startLabels[2],body:_react.default.createElement(DatePickerWithInput,{date:datePickerTimes.start,onChange:this.setStartTime,maxDate:datePickerTimes.end,setIsValid:this.props.setTimeRangeValid,tab:this.state.startTab})}];var endItems=[{index:0,label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.startDatafeedModal.noEndTimeLabel",defaultMessage:"No end time (Real-time search)"})},{index:1,label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.startDatafeedModal.specifyEndTimeLabel",defaultMessage:"Specify end time"}),body:_react.default.createElement(DatePickerWithInput,{date:datePickerTimes.end,onChange:this.setEndTime,minDate:datePickerTimes.start,setIsValid:this.props.setTimeRangeValid,tab:this.state.endTab})}];return{startItems:startItems,endItems:endItems}}},{key:"render",value:function render(){var _this$getTabItems=this.getTabItems(),startItems=_this$getTabItems.startItems,endItems=_this$getTabItems.endItems;return _react.default.createElement("div",{className:"time-range-selector"},_react.default.createElement("div",{className:"time-range-section-container"},_react.default.createElement(TabStack,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.startDatafeedModal.searchStartTimeTitle",defaultMessage:"Search start time"}),items:startItems,switchState:this.state.startTab,switchFunc:this.setStartTab}),_react.default.createElement(TabStack,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.startDatafeedModal.searchEndTimeTitle",defaultMessage:"Search end time"}),items:endItems,switchState:this.state.endTab,switchFunc:this.setEndTab})))}}]);return TimeRangeSelector}(_react.Component);exports.TimeRangeSelector=TimeRangeSelector;function TabStack(_ref){var title=_ref.title,items=_ref.items,switchState=_ref.switchState,switchFunc=_ref.switchFunc;return _react.default.createElement("div",{className:"time-range-section"},_react.default.createElement("div",{className:"time-range-section-title"},title),_react.default.createElement("ul",{className:"tab-stack"},items.map((function(item,i){var className="";if(switchState===item.index){className+="active "}if(item.body!==undefined){className+="has-body "}return _react.default.createElement("li",{key:i,className:className},_react.default.createElement("a",{onClick:function onClick(){return switchFunc(item.index)},onKeyUp:function onKeyUp(){}},item.label),item.body!==undefined&&_react.default.createElement("div",{className:"body"},item.body))}))))}var DatePickerWithInput=function DatePickerWithInput(_ref2){var date=_ref2.date,onChange=_ref2.onChange,minDate=_ref2.minDate,setIsValid=_ref2.setIsValid,tab=_ref2.tab;var _useState=(0,_react.useState)(date.format(TIME_FORMAT)),_useState2=_slicedToArray(_useState,2),dateString=_useState2[0],setDateString=_useState2[1];var _useState3=(0,_react.useState)(tab),_useState4=_slicedToArray(_useState3,2),currentTab=_useState4[0],setCurrentTab=_useState4[1];(0,_react.useEffect)((function(){if(currentTab!==tab){setDateString(date.format(TIME_FORMAT));setCurrentTab(tab)}}),[tab]);function onTextChange(e){var val=e.target.value;setDateString(val);var newDate=(0,_moment.default)(val);if(newDate.isValid()){setIsValid(true);onChange(newDate)}else{setIsValid(false)}}function onCalendarChange(newDate){setDateString(newDate.format(TIME_FORMAT));setIsValid(true);onChange(newDate)}return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFieldText,{value:dateString,onChange:onTextChange,placeholder:TIME_FORMAT,"aria-label":_i18n.i18n.translate('xpack.ml.jobsList.startDatafeedModal.enterDateText"',{defaultMessage:"Enter date"})}),_react.default.createElement(_eui.EuiDatePicker,{selected:date,onChange:onCalendarChange,minDate:minDate,inline:true,showTimeSelect:true}))};TimeRangeSelector.propTypes={startTime:_propTypes.default.object.isRequired,endTime:_propTypes.default.object,setStartTime:_propTypes.default.func.isRequired,setEndTime:_propTypes.default.func.isRequired}},function(module,exports,__webpack_require__){if(window.__kbnDarkMode__){__webpack_require__(1226)}else{__webpack_require__(1228)}},function(module,exports,__webpack_require__){var api=__webpack_require__(2);var content=__webpack_require__(1227);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(3);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".time-range-selector .time-range-section-container {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex; }\n\n.time-range-selector .time-range-section-title {\n  font-weight: bold;\n  margin-bottom: 8px; }\n\n.time-range-selector .time-range-section {\n  -webkit-box-flex: 50%;\n  -webkit-flex: 50%;\n      -ms-flex: 50%;\n          flex: 50%;\n  padding: 0px 8px;\n  border-right: 1px solid #343741; }\n\n.time-range-selector .tab-stack {\n  margin-bottom: 0;\n  padding-left: 0;\n  list-style: none; }\n  .time-range-selector .tab-stack > li {\n    float: none;\n    position: relative;\n    display: block;\n    margin-bottom: 4px; }\n    .time-range-selector .tab-stack > li > a {\n      position: relative;\n      display: block;\n      padding: 8px 16px;\n      border-radius: 4px; }\n    .time-range-selector .tab-stack > li > a:hover {\n      background-color: #25262E; }\n    .time-range-selector .tab-stack > li .body {\n      display: none; }\n  .time-range-selector .tab-stack > li.active > a {\n    color: #1D1E24;\n    background-color: #1BA9F5; }\n  .time-range-selector .tab-stack > li.active .body {\n    display: block; }\n  .time-range-selector .tab-stack > li.has-body.active > a {\n    border-radius: 4px 4px 0px 0px; }\n  .time-range-selector .tab-stack > li.has-body.active .react-datepicker {\n    border-radius: 0px 0px 4px 4px;\n    border-top: none; }\n\n.time-range-selector .time-range-section:last-child {\n  border-right: none; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){var api=__webpack_require__(2);var content=__webpack_require__(1229);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(3);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".time-range-selector .time-range-section-container {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex; }\n\n.time-range-selector .time-range-section-title {\n  font-weight: bold;\n  margin-bottom: 8px; }\n\n.time-range-selector .time-range-section {\n  -webkit-box-flex: 50%;\n  -webkit-flex: 50%;\n      -ms-flex: 50%;\n          flex: 50%;\n  padding: 0px 8px;\n  border-right: 1px solid #D3DAE6; }\n\n.time-range-selector .tab-stack {\n  margin-bottom: 0;\n  padding-left: 0;\n  list-style: none; }\n  .time-range-selector .tab-stack > li {\n    float: none;\n    position: relative;\n    display: block;\n    margin-bottom: 4px; }\n    .time-range-selector .tab-stack > li > a {\n      position: relative;\n      display: block;\n      padding: 8px 16px;\n      border-radius: 4px; }\n    .time-range-selector .tab-stack > li > a:hover {\n      background-color: #F5F7FA; }\n    .time-range-selector .tab-stack > li .body {\n      display: none; }\n  .time-range-selector .tab-stack > li.active > a {\n    color: #FFF;\n    background-color: #006BB4; }\n  .time-range-selector .tab-stack > li.active .body {\n    display: block; }\n  .time-range-selector .tab-stack > li.has-body.active > a {\n    border-radius: 4px 4px 0px 0px; }\n  .time-range-selector .tab-stack > li.has-body.active .react-datepicker {\n    border-radius: 0px 0px 4px 4px;\n    border-top: none; }\n\n.time-range-selector .time-range-section:last-child {\n  border-right: none; }\n",""]);module.exports=exports},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CreateWatchFlyout=exports.CreateWatchFlyoutUI=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _utils=__webpack_require__(111);var _create_watch_service=__webpack_require__(462);var _create_watch_view=__webpack_require__(1234);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(30);var _public=__webpack_require__(31);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getSuccessToast(id,url){return{title:_i18n.i18n.translate("xpack.ml.jobsList.createWatchFlyout.watchCreatedSuccessfullyNotificationMessage",{defaultMessage:"Watch {id} created successfully",values:{id:id}}),text:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",href:url,target:"_blank",iconType:"link"},_i18n.i18n.translate("xpack.ml.jobsList.createWatchFlyout.editWatchButtonLabel",{defaultMessage:"Edit watch"})))))}}var CreateWatchFlyoutUI=function(_Component){_inherits(CreateWatchFlyoutUI,_Component);function CreateWatchFlyoutUI(props){var _this;_classCallCheck(this,CreateWatchFlyoutUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(CreateWatchFlyoutUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"closeFlyout",(function(){var watchCreated=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;_this.setState({isFlyoutVisible:false},(function(){if(typeof _this.props.flyoutHidden==="function"){_this.props.flyoutHidden(watchCreated)}}))}));_defineProperty(_assertThisInitialized(_this),"showFlyout",(function(jobId){(0,_utils.loadFullJob)(jobId).then((function(job){var bucketSpan=job.analysis_config.bucket_span;_create_watch_service.mlCreateWatchService.config.includeInfluencers=job.analysis_config.influencers.length>0;_this.setState({job:job,jobId:jobId,bucketSpan:bucketSpan,isFlyoutVisible:true})})).catch((function(error){console.error(error)}))}));_defineProperty(_assertThisInitialized(_this),"save",(function(){var toasts=_this.props.kibana.services.notifications.toasts;_create_watch_service.mlCreateWatchService.createNewWatch(_this.state.jobId).then((function(resp){toasts.addSuccess(getSuccessToast(resp.id,resp.url));_this.closeFlyout(true)})).catch((function(error){toasts.addDanger(_i18n.i18n.translate("xpack.ml.jobsList.createWatchFlyout.watchNotSavedErrorNotificationMessage",{defaultMessage:"Could not save watch"}));console.error(error)}))}));_this.state={jobId:null,bucketSpan:null};return _this}_createClass(CreateWatchFlyoutUI,[{key:"componentDidMount",value:function componentDidMount(){if(typeof this.props.setShowFunction==="function"){this.props.setShowFunction(this.showFlyout)}}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(typeof this.props.unsetShowFunction==="function"){this.props.unsetShowFunction()}}},{key:"render",value:function render(){var _this$state=this.state,jobId=_this$state.jobId,bucketSpan=_this$state.bucketSpan;var flyout;if(this.state.isFlyoutVisible){flyout=_react.default.createElement(_eui.EuiFlyout,{onClose:this.closeFlyout,size:"s"},_react.default.createElement(_eui.EuiFlyoutHeader,null,_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.createWatchFlyout.pageTitle",defaultMessage:"Create watch for {jobId}",values:{jobId:jobId}})))),_react.default.createElement(_eui.EuiFlyoutBody,null,_react.default.createElement(_create_watch_view.CreateWatch,{jobId:jobId,bucketSpan:bucketSpan})),_react.default.createElement(_eui.EuiFlyoutFooter,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"cross",onClick:this.closeFlyout,flush:"left"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.createWatchFlyout.closeButtonLabel",defaultMessage:"Close"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{onClick:this.save,fill:true},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.createWatchFlyout.saveButtonLabel",defaultMessage:"Save"}))))))}return _react.default.createElement("div",null,flyout)}}]);return CreateWatchFlyoutUI}(_react.Component);exports.CreateWatchFlyoutUI=CreateWatchFlyoutUI;CreateWatchFlyoutUI.propTypes={setShowFunction:_propTypes.default.func.isRequired,unsetShowFunction:_propTypes.default.func.isRequired,flyoutHidden:_propTypes.default.func};var CreateWatchFlyout=(0,_public.withKibana)(CreateWatchFlyoutUI);exports.CreateWatchFlyout=CreateWatchFlyout},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]="<html>\n  <body>\n    <strong>\n      <%= elasticStackMachineLearningAlertLabel %>\n    </strong>\n    <br />\n    <br />\n\n    <strong>\n      <%= jobLabel %>\n    </strong>: {{ctx.payload.aggregations.bucket_results.top_bucket_hits.hits.hits.0._source.job_id}}\n    <br />\n\n    <strong>\n      <%= timeLabel %>\n    </strong>: {{ctx.payload.aggregations.bucket_results.top_bucket_hits.hits.hits.0.fields.timestamp_iso8601.0}}\n    <br />\n\n    <strong>\n      <%= anomalyScoreLabel %>\n    </strong>: {{ctx.payload.aggregations.bucket_results.top_bucket_hits.hits.hits.0.fields.score.0}}\n    <br />\n    <br />\n\n    <a href=\"<%= serverAddress %>#/explorer/?_g=(ml:(jobIds:!('{{ctx.payload.aggregations.bucket_results.top_bucket_hits.hits.hits.0._source.job_id}}')),refreshInterval:(display:Off,pause:!f,value:0),time:(from:'{{ctx.payload.aggregations.bucket_results.top_bucket_hits.hits.hits.0.fields.start.0}}',mode:absolute,to:'{{ctx.payload.aggregations.bucket_results.top_bucket_hits.hits.hits.0.fields.end.0}}'))&_a=(filters:!(),mlAnomaliesTable:(intervalValue:auto,thresholdValue:0),mlExplorerSwimlane:(selectedLane:Overall,selectedTime:{{ctx.payload.aggregations.bucket_results.top_bucket_hits.hits.hits.0.fields.timestamp_epoch.0}},selectedType:overall),query:(query_string:(analyze_wildcard:!t,query:'*')))\">\n      <%= openInAnomalyExplorerLinkText %>\n    </a>\n    <br />\n    <br />\n\n    <%= influencersSection %>\n\n    <strong>\n      <%= topRecordsLabel %>\n    </strong>\n    <br />\n    {{#ctx.payload.aggregations.record_results.top_record_hits.hits.hits}}\n      {{_source.function}}({{_source.field_name}}) {{_source.by_field_value}} {{_source.over_field_value}} {{_source.partition_field_value}} [{{fields.score.0}}]\n      <br />\n    {{/ctx.payload.aggregations.record_results.top_record_hits.hits.hits}}\n\n  </body>\n</html>\n"},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]="<strong>\n  <%= topInfluencersLabel %>\n</strong>\n<br />\n  {{#ctx.payload.aggregations.influencer_results.top_influencer_hits.hits.hits}}\n    {{_source.influencer_field_name}} = {{_source.influencer_field_value}} [{{fields.score.0}}]\n    <br />\n  {{/ctx.payload.aggregations.influencer_results.top_influencer_hits.hits.hits}}\n<br />\n"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.watch=void 0;var _index_patterns=__webpack_require__(120);var watch={trigger:{schedule:{interval:"60s"}},input:{search:{request:{search_type:"query_then_fetch",indices:[_index_patterns.ML_RESULTS_INDEX_PATTERN],body:{size:0,query:{bool:{filter:[{term:{job_id:null}},{range:{timestamp:{gte:null}}},{terms:{result_type:["bucket","record","influencer"]}}]}},aggs:{bucket_results:{filter:{range:{anomaly_score:{gte:null}}},aggs:{top_bucket_hits:{top_hits:{sort:[{anomaly_score:{order:"desc"}}],_source:{includes:["job_id","result_type","timestamp","anomaly_score","is_interim"]},size:1,script_fields:{start:{script:{lang:"painless",source:'LocalDateTime.ofEpochSecond((doc["timestamp"].value.getMillis()-((doc["bucket_span"].value * 1000)\n * params.padding)) / 1000, 0, ZoneOffset.UTC).toString()+":00.000Z"',params:{padding:10}}},end:{script:{lang:"painless",source:'LocalDateTime.ofEpochSecond((doc["timestamp"].value.getMillis()+((doc["bucket_span"].value * 1000)\n * params.padding)) / 1000, 0, ZoneOffset.UTC).toString()+":00.000Z"',params:{padding:10}}},timestamp_epoch:{script:{lang:"painless",source:'doc["timestamp"].value.getMillis()/1000'}},timestamp_iso8601:{script:{lang:"painless",source:'doc["timestamp"].value'}},score:{script:{lang:"painless",source:'Math.round(doc["anomaly_score"].value)'}}}}}}},influencer_results:{filter:{range:{influencer_score:{gte:3}}},aggs:{top_influencer_hits:{top_hits:{sort:[{influencer_score:{order:"desc"}}],_source:{includes:["result_type","timestamp","influencer_field_name","influencer_field_value","influencer_score","isInterim"]},size:3,script_fields:{score:{script:{lang:"painless",source:'Math.round(doc["influencer_score"].value)'}}}}}}},record_results:{filter:{range:{record_score:{gte:3}}},aggs:{top_record_hits:{top_hits:{sort:[{record_score:{order:"desc"}}],_source:{includes:["result_type","timestamp","record_score","is_interim","function","field_name","by_field_value","over_field_value","partition_field_value"]},size:3,script_fields:{score:{script:{lang:"painless",source:'Math.round(doc["record_score"].value)'}}}}}}}}}}}},condition:{compare:{"ctx.payload.aggregations.bucket_results.doc_count":{gt:0}}},actions:{log:{logging:{level:"info",text:""}}}};exports.watch=watch;var txt="Alert for job [{{ctx.payload.aggregations.bucket_results.top_bucket_hits.hits.hits.0._source.job_id}}] at ";txt+="[{{ctx.payload.aggregations.bucket_results.top_bucket_hits.hits.hits.0.fields.timestamp_iso8601.0}}] score ";txt+="[{{ctx.payload.aggregations.bucket_results.top_bucket_hits.hits.hits.0.fields.score.0}}]";watch.actions.log.logging.text=txt},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CreateWatch=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _lodash=__webpack_require__(49);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(30);var _parse_interval=__webpack_require__(74);var _ml_api_service=__webpack_require__(51);var _select_severity=__webpack_require__(463);var _create_watch_service=__webpack_require__(462);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var STATUS=_create_watch_service.mlCreateWatchService.STATUS;var CreateWatch=function(_Component){_inherits(CreateWatch,_Component);function CreateWatch(props){var _this;_classCallCheck(this,CreateWatch);_this=_possibleConstructorReturn(this,_getPrototypeOf(CreateWatch).call(this,props));_defineProperty(_assertThisInitialized(_this),"onThresholdChange",(function(threshold){_this.setState({threshold:threshold},(function(){_this.config.threshold=threshold}))}));_defineProperty(_assertThisInitialized(_this),"onIntervalChange",(function(e){var interval=e.target.value;_this.setState({interval:interval},(function(){_this.config.interval=interval}))}));_defineProperty(_assertThisInitialized(_this),"onIncludeEmailChanged",(function(e){var includeEmail=e.target.checked;_this.setState({includeEmail:includeEmail},(function(){_this.config.includeEmail=includeEmail}))}));_defineProperty(_assertThisInitialized(_this),"onEmailChange",(function(e){var email=e.target.value;_this.setState({email:email},(function(){_this.config.email=email}))}));_create_watch_service.mlCreateWatchService.reset();_this.config=_create_watch_service.mlCreateWatchService.config;_this.state={jobId:_this.props.jobId,bucketSpan:_this.props.bucketSpan,interval:_this.config.interval,threshold:_this.config.threshold,includeEmail:_this.config.emailIncluded,email:_this.config.email,emailEnabled:false,status:null,watchAlreadyExists:false};return _this}_createClass(CreateWatch,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;if(this.state.bucketSpan){var intervalObject=(0,_parse_interval.parseInterval)(this.state.bucketSpan);var bs=intervalObject.asMinutes()*2;if(bs<1){bs=1}var interval="".concat(bs,"m");this.setState({interval:interval},(function(){_this2.config.interval=interval}))}_ml_api_service.ml.getNotificationSettings().then((function(resp){if((0,_lodash.has)(resp,"defaults.xpack.notification.email")){_this2.setState({emailEnabled:true})}}));_create_watch_service.mlCreateWatchService.loadWatch(this.state.jobId).then((function(){_this2.setState({watchAlreadyExists:true})})).catch((function(){_this2.setState({watchAlreadyExists:false})}))}},{key:"render",value:function render(){var status=this.state.status;if(status===null||status===STATUS.SAVING||status===STATUS.SAVE_FAILED){return _react.default.createElement("div",{className:"create-watch"},_react.default.createElement("div",{className:"form-group form-group-flex"},_react.default.createElement("div",{className:"sub-form-group"},_react.default.createElement("div",null,_react.default.createElement("label",{htmlFor:"selectInterval",className:"euiFormLabel"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.newJob.simple.createWatchView.timeRangeLabel",defaultMessage:"Time range"}))),_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.newJob.simple.createWatchView.nowLabel",defaultMessage:"Now - {selectInterval}",values:{selectInterval:_react.default.createElement(_eui.EuiFieldText,{id:"selectInterval",value:this.state.interval,onChange:this.onIntervalChange})}})),_react.default.createElement("div",{className:"sub-form-group"},_react.default.createElement("div",null,_react.default.createElement("label",{htmlFor:"selectSeverity",className:"euiFormLabel"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.newJob.simple.createWatchView.severityThresholdLabel",defaultMessage:"Severity threshold"}))),_react.default.createElement("div",{className:"dropdown-group"},_react.default.createElement(_select_severity.SelectSeverity,{onChange:this.onThresholdChange})))),this.state.emailEnabled&&_react.default.createElement("div",{className:"form-group"},_react.default.createElement(_eui.EuiCheckbox,{id:"includeEmail",label:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.newJob.simple.createWatchView.sendEmailLabel",defaultMessage:"Send email"}),checked:this.state.includeEmail,onChange:this.onIncludeEmailChanged}),this.state.includeEmail&&_react.default.createElement("div",{className:"email-section"},_react.default.createElement(_eui.EuiFieldText,{value:this.state.email,onChange:this.onEmailChange,placeholder:_i18n.i18n.translate("xpack.ml.newJob.simple.createWatchView.emailAddressPlaceholder",{defaultMessage:"email address"}),"aria-label":_i18n.i18n.translate("xpack.ml.newJob.simple.createWatchView.watchEmailAddressAriaLabel",{defaultMessage:"Watch email address"})}))),this.state.watchAlreadyExists&&_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.newJob.simple.createWatchView.watchAlreadyExistsWarningMessage",defaultMessage:"Warning, watch ml-{jobId} already exists, clicking apply will overwrite the original.",values:{jobId:this.state.jobId}})}))}else if(status===STATUS.SAVED){return _react.default.createElement("div",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.newJob.simple.createWatchView.successLabel",defaultMessage:"Success"}))}else{return _react.default.createElement("div",null)}}}]);return CreateWatch}(_react.Component);exports.CreateWatch=CreateWatch;_defineProperty(CreateWatch,"propTypes",{jobId:_propTypes.default.string.isRequired,bucketSpan:_propTypes.default.string.isRequired})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"MultiJobActions",{enumerable:true,get:function get(){return _multi_job_actions.MultiJobActions}});var _multi_job_actions=__webpack_require__(1236)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MultiJobActions=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _job_actions=__webpack_require__(408);var _actions_menu=__webpack_require__(1237);var _group_selector=__webpack_require__(1238);var _react2=__webpack_require__(30);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var MultiJobActions=function(_Component){_inherits(MultiJobActions,_Component);function MultiJobActions(props){var _this;_classCallCheck(this,MultiJobActions);_this=_possibleConstructorReturn(this,_getPrototypeOf(MultiJobActions).call(this,props));_this.state={};return _this}_createClass(MultiJobActions,[{key:"render",value:function render(){var jobsSelected=this.props.selectedJobs.length>0;return _react.default.createElement("div",{className:"multi-select-actions".concat(jobsSelected?"":"-no-display")},jobsSelected&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"s",style:{display:"inline"}},_react.default.createElement("h3",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.multiJobsActions.jobsSelectedLabel",defaultMessage:"{selectedJobsCount, plural, one {# job} other {# jobs}}   selected",values:{selectedJobsCount:this.props.selectedJobs.length}}))),_react.default.createElement("div",{className:"actions-border-large"}),_react.default.createElement(_job_actions.ResultLinks,{jobs:this.props.selectedJobs}),_react.default.createElement(_group_selector.GroupSelector,{jobs:this.props.selectedJobs,allJobIds:this.props.allJobIds,refreshJobs:this.props.refreshJobs}),_react.default.createElement(_actions_menu.MultiJobActionsMenu,{jobs:this.props.selectedJobs,showStartDatafeedModal:this.props.showStartDatafeedModal,showDeleteJobModal:this.props.showDeleteJobModal,refreshJobs:this.props.refreshJobs})))}}]);return MultiJobActions}(_react.Component);exports.MultiJobActions=MultiJobActions;MultiJobActions.propTypes={selectedJobs:_propTypes.default.array.isRequired,allJobIds:_propTypes.default.array.isRequired,showStartDatafeedModal:_propTypes.default.func.isRequired,showDeleteJobModal:_propTypes.default.func.isRequired,refreshJobs:_propTypes.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MultiJobActionsMenu=void 0;var _check_privilege=__webpack_require__(56);var _check_ml_nodes=__webpack_require__(81);var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _utils=__webpack_require__(111);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(30);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var MultiJobActionsMenuUI=function(_Component){_inherits(MultiJobActionsMenuUI,_Component);function MultiJobActionsMenuUI(props){var _this;_classCallCheck(this,MultiJobActionsMenuUI);_this=_possibleConstructorReturn(this,_getPrototypeOf(MultiJobActionsMenuUI).call(this,props));_defineProperty(_assertThisInitialized(_this),"onButtonClick",(function(){_this.setState((function(prevState){return{isOpen:!prevState.isOpen}}))}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({isOpen:false})}));_this.state={isOpen:false};_this.canDeleteJob=(0,_check_privilege.checkPermission)("canDeleteJob");_this.canStartStopDatafeed=(0,_check_privilege.checkPermission)("canStartStopDatafeed")&&(0,_check_ml_nodes.mlNodesAvailable)();_this.canCloseJob=(0,_check_privilege.checkPermission)("canCloseJob")&&(0,_check_ml_nodes.mlNodesAvailable)();return _this}_createClass(MultiJobActionsMenuUI,[{key:"render",value:function render(){var _this2=this;var anyJobsDeleting=this.props.jobs.some((function(j){return j.deleting}));var button=_react.default.createElement(_eui.EuiButtonIcon,{size:"s",onClick:this.onButtonClick,iconType:"gear","aria-label":_i18n.i18n.translate("xpack.ml.jobsList.multiJobActionsMenu.managementActionsAriaLabel",{defaultMessage:"Management actions"}),color:"text",disabled:anyJobsDeleting||this.canDeleteJob===false&&this.canStartStopDatafeed===false});var items=[_react.default.createElement(_eui.EuiContextMenuItem,{key:"delete",icon:"trash",disabled:this.canDeleteJob===false,onClick:function onClick(){_this2.props.showDeleteJobModal(_this2.props.jobs);_this2.closePopover()}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.multiJobsActions.deleteJobsLabel",defaultMessage:"Delete {jobsCount, plural, one {job} other {jobs}}",values:{jobsCount:this.props.jobs.length}}))];if((0,_utils.isClosable)(this.props.jobs)){items.push(_react.default.createElement(_eui.EuiContextMenuItem,{key:"close job",icon:"cross",disabled:this.canCloseJob===false,onClick:function onClick(){(0,_utils.closeJobs)(_this2.props.jobs);_this2.closePopover()}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.multiJobsActions.closeJobsLabel",defaultMessage:"Close {jobsCount, plural, one {job} other {jobs}}",values:{jobsCount:this.props.jobs.length}})))}if((0,_utils.isStoppable)(this.props.jobs)){items.push(_react.default.createElement(_eui.EuiContextMenuItem,{key:"stop datafeed",icon:"stop",disabled:this.canStartStopDatafeed===false,onClick:function onClick(){(0,_utils.stopDatafeeds)(_this2.props.jobs,_this2.props.refreshJobs);_this2.closePopover()}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.multiJobsActions.stopDatafeedsLabel",defaultMessage:"Stop {jobsCount, plural, one {datafeed} other {datafeeds}}",values:{jobsCount:this.props.jobs.length}})))}if((0,_utils.isStartable)(this.props.jobs)){items.push(_react.default.createElement(_eui.EuiContextMenuItem,{key:"start datafeed",icon:"play",disabled:this.canStartStopDatafeed===false,onClick:function onClick(){_this2.props.showStartDatafeedModal(_this2.props.jobs);_this2.closePopover()}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.multiJobsActions.startDatafeedsLabel",defaultMessage:"Start {jobsCount, plural, one {datafeed} other {datafeeds}}",values:{jobsCount:this.props.jobs.length}})))}return _react.default.createElement(_eui.EuiPopover,{button:button,isOpen:this.state.isOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downCenter"},_react.default.createElement(_eui.EuiContextMenuPanel,{items:items.reverse()}))}}]);return MultiJobActionsMenuUI}(_react.Component);MultiJobActionsMenuUI.propTypes={jobs:_propTypes.default.array.isRequired,showStartDatafeedModal:_propTypes.default.func.isRequired,showDeleteJobModal:_propTypes.default.func.isRequired,refreshJobs:_propTypes.default.func.isRequired};var MultiJobActionsMenu=MultiJobActionsMenuUI;exports.MultiJobActionsMenu=MultiJobActionsMenu},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"GroupSelector",{enumerable:true,get:function get(){return _group_selector.GroupSelector}});var _group_selector=__webpack_require__(1239)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GroupSelector=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _lodash=__webpack_require__(49);var _ml_api_service=__webpack_require__(51);var _check_privilege=__webpack_require__(56);var _group_list=__webpack_require__(1240);var _new_group_input=__webpack_require__(1242);var _messagebar=__webpack_require__(91);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(30);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function createSelectedGroups(jobs,groups){var jobIds=jobs.map((function(j){return j.id}));var groupCounts={};jobs.forEach((function(j){j.groups.forEach((function(g){if(groupCounts[g]===undefined){groupCounts[g]=0}groupCounts[g]++}))}));var selectedGroups=groups.reduce((function(p,c){if(c.jobIds.some((function(j){return jobIds.includes(j)}))){p[c.id]={partial:groupCounts[c.id]!==jobIds.length}}return p}),{});return selectedGroups}var GroupSelector=function(_Component){_inherits(GroupSelector,_Component);function GroupSelector(props){var _this;_classCallCheck(this,GroupSelector);_this=_possibleConstructorReturn(this,_getPrototypeOf(GroupSelector).call(this,props));_defineProperty(_assertThisInitialized(_this),"togglePopover",(function(){if(_this.state.isPopoverOpen){_this.closePopover()}else{_ml_api_service.ml.jobs.groups().then((function(groups){var selectedGroups=createSelectedGroups(_this.props.jobs,groups);_this.setState({isPopoverOpen:true,edited:false,selectedGroups:selectedGroups,groups:groups})})).catch((function(error){console.error(error)}))}}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({edited:false,isPopoverOpen:false})}));_defineProperty(_assertThisInitialized(_this),"selectGroup",(function(group){var newSelectedGroups=(0,_lodash.cloneDeep)(_this.state.selectedGroups);if(newSelectedGroups[group.id]===undefined){newSelectedGroups[group.id]={partial:false}}else if(newSelectedGroups[group.id].partial===true){newSelectedGroups[group.id].partial=false}else{delete newSelectedGroups[group.id]}_this.setState({selectedGroups:newSelectedGroups,edited:true})}));_defineProperty(_assertThisInitialized(_this),"applyChanges",(function(){var selectedGroups=_this.state.selectedGroups;var jobs=_this.props.jobs;var newJobs=jobs.map((function(j){return{id:j.id,oldGroups:j.groups,newGroups:[]}}));var _loop=function _loop(gId){if(selectedGroups.hasOwnProperty(gId)){var group=selectedGroups[gId];newJobs.forEach((function(j){if(group.partial===false||group.partial===true&&j.oldGroups.includes(gId)){j.newGroups.push(gId)}}))}};for(var gId in selectedGroups){_loop(gId)}var tempJobs=newJobs.map((function(j){return{job_id:j.id,groups:j.newGroups}}));_ml_api_service.ml.jobs.updateGroups(tempJobs).then((function(resp){var success=true;for(var jobId in resp){if(resp.hasOwnProperty(jobId)){if(resp[jobId].success===false){_messagebar.mlMessageBarService.notify.error(resp[jobId].error);success=false}}}if(success){_this.refreshJobs();_this.closePopover()}else{console.error(resp)}})).catch((function(error){_messagebar.mlMessageBarService.notify.error(error);console.error(error)}))}));_defineProperty(_assertThisInitialized(_this),"addNewGroup",(function(id){var newGroup={id:id,calendarIds:[],jobIds:[]};var groups=_this.state.groups;if(groups.some((function(g){return g.id===newGroup.id}))===false){groups.push(newGroup)}_this.setState({groups:groups})}));_this.state={isPopoverOpen:false,groups:[],selectedGroups:{},edited:false};_this.refreshJobs=_this.props.refreshJobs;_this.canUpdateJob=(0,_check_privilege.checkPermission)("canUpdateJob");return _this}_createClass(GroupSelector,[{key:"render",value:function render(){var _this2=this;var _this$state=this.state,groups=_this$state.groups,selectedGroups=_this$state.selectedGroups,edited=_this$state.edited;var button=_react.default.createElement(_eui.EuiToolTip,{position:"bottom",content:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.multiJobActions.groupSelector.editJobGroupsButtonTooltip",defaultMessage:"Edit job groups"})},_react.default.createElement(_eui.EuiButtonIcon,{iconType:"indexEdit","aria-label":_i18n.i18n.translate("xpack.ml.jobsList.multiJobActions.groupSelector.editJobGroupsButtonAriaLabel",{defaultMessage:"Edit job groups"}),onClick:function onClick(){return _this2.togglePopover()},disabled:this.canUpdateJob===false}));return _react.default.createElement(_eui.EuiPopover,{id:"trapFocus",ownFocus:true,button:button,isOpen:this.state.isPopoverOpen,closePopover:function closePopover(){return _this2.closePopover()}},_react.default.createElement("div",{className:"group-selector"},_react.default.createElement(_eui.EuiPopoverTitle,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.multiJobActions.groupSelector.applyGroupsToJobTitle",defaultMessage:"Apply groups to {jobsCount, plural, one {job} other {jobs}}",values:{jobsCount:this.props.jobs.length}})),_react.default.createElement(_group_list.GroupList,{groups:groups,selectedGroups:selectedGroups,selectGroup:this.selectGroup}),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"xs"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_new_group_input.NewGroupInput,{addNewGroup:this.addNewGroup,allJobIds:this.props.allJobIds}),_react.default.createElement(_eui.EuiHorizontalRule,{margin:"m"}),_react.default.createElement("div",null,_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",onClick:this.applyChanges,isDisabled:edited===false},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.multiJobActions.groupSelector.applyButtonLabel",defaultMessage:"Apply"})))))))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props,state){if(state.edited===false){var selectedGroups=createSelectedGroups(props.jobs,state.groups);return{selectedGroups:selectedGroups}}else{return{}}}}]);return GroupSelector}(_react.Component);exports.GroupSelector=GroupSelector;_defineProperty(GroupSelector,"propTypes",{jobs:_propTypes.default.array.isRequired,allJobIds:_propTypes.default.array.isRequired,refreshJobs:_propTypes.default.func.isRequired})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"GroupList",{enumerable:true,get:function get(){return _group_list.GroupList}});var _group_list=__webpack_require__(1241)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GroupList=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _job_group=__webpack_require__(239);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function Check(_ref){var group=_ref.group,selectedGroups=_ref.selectedGroups;if(selectedGroups[group.id]!==undefined){if(selectedGroups[group.id].partial){return _react.default.createElement("div",{className:"check selected"},_react.default.createElement("span",null,""))}else{return _react.default.createElement("div",{className:"check selected"},_react.default.createElement(_eui.EuiIcon,{type:"check"}))}}else{return _react.default.createElement("div",{className:"check"})}}var GroupList=function(_Component){_inherits(GroupList,_Component);function GroupList(props){var _this;_classCallCheck(this,GroupList);_this=_possibleConstructorReturn(this,_getPrototypeOf(GroupList).call(this,props));_defineProperty(_assertThisInitialized(_this),"selectGroup",(function(group){_this.props.selectGroup(group)}));_defineProperty(_assertThisInitialized(_this),"moveUp",(function(event,index){event.preventDefault();if(index<0){return}else if(index>0){_this.selectItems[index-1].focus()}}));_defineProperty(_assertThisInitialized(_this),"moveDown",(function(event,index){event.preventDefault();if(index<_this.selectItems.length-1){_this.selectItems[index+1].focus()}}));_defineProperty(_assertThisInitialized(_this),"handleKeyDown",(function(event,group,index){switch(event.keyCode){case _eui.keyCodes.ENTER:_this.selectGroup(group);break;case _eui.keyCodes.SPACE:_this.selectGroup(group);break;case _eui.keyCodes.DOWN:_this.moveDown(event,index);break;case _eui.keyCodes.UP:_this.moveUp(event,index);break}}));_defineProperty(_assertThisInitialized(_this),"setRef",(function(ref,index){_this.selectItems[index]=ref}));_this.state={groups:[]};_this.selectItems=[];return _this}_createClass(GroupList,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,selectedGroups=_this$props.selectedGroups,groups=_this$props.groups;return _react.default.createElement("div",{className:"group-list"},groups.map((function(g,index){return _react.default.createElement("div",{tabIndex:"0",onKeyDown:function onKeyDown(event){return _this2.handleKeyDown(event,g,index)},key:g.id,className:"group-item",onClick:function onClick(){return _this2.selectGroup(g)},ref:function ref(_ref2){return _this2.setRef(_ref2,index)}},_react.default.createElement(Check,{group:g,selectedGroups:selectedGroups}),_react.default.createElement(_job_group.JobGroup,{name:g.id}))})))}}]);return GroupList}(_react.Component);exports.GroupList=GroupList;GroupList.propTypes={selectedGroups:_propTypes.default.object.isRequired,groups:_propTypes.default.array.isRequired,selectGroup:_propTypes.default.func.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"NewGroupInput",{enumerable:true,get:function get(){return _new_group_input.NewGroupInput}});var _new_group_input=__webpack_require__(1243)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NewGroupInput=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);var _validate_job=__webpack_require__(459);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NewGroupInput=function(_Component){_inherits(NewGroupInput,_Component);function NewGroupInput(props){var _this;_classCallCheck(this,NewGroupInput);_this=_possibleConstructorReturn(this,_getPrototypeOf(NewGroupInput).call(this,props));_defineProperty(_assertThisInitialized(_this),"changeTempNewGroup",(function(e){var tempNewGroupName=e.target.value;var groupsValidationError="";if(tempNewGroupName===""){groupsValidationError=""}else if(_this.props.allJobIds.includes(tempNewGroupName)){groupsValidationError=_i18n.i18n.translate("xpack.ml.jobsList.multiJobActions.groupSelector.groupsAndJobsCanNotUseSameIdErrorMessage",{defaultMessage:"A job with this ID already exists. Groups and jobs cannot use the same ID."})}else{groupsValidationError=(0,_validate_job.validateGroupNames)([tempNewGroupName]).message}_this.setState({tempNewGroupName:tempNewGroupName,groupsValidationError:groupsValidationError})}));_defineProperty(_assertThisInitialized(_this),"newGroupKeyPress",(function(e){if(e.keyCode===_eui.keyCodes.ENTER&&_this.state.groupsValidationError===""&&_this.state.tempNewGroupName!==""){_this.addNewGroup()}}));_defineProperty(_assertThisInitialized(_this),"addNewGroup",(function(){_this.props.addNewGroup(_this.state.tempNewGroupName);_this.setState({tempNewGroupName:""})}));_this.state={tempNewGroupName:"",groupsValidationError:""};return _this}_createClass(NewGroupInput,[{key:"render",value:function render(){var _this$state=this.state,tempNewGroupName=_this$state.tempNewGroupName,groupsValidationError=_this$state.groupsValidationError;return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFormRow,{compressed:true,isInvalid:groupsValidationError!=="",error:groupsValidationError,className:"new-group-input"},_react.default.createElement(_eui.EuiFieldText,{compressed:true,placeholder:_i18n.i18n.translate("xpack.ml.jobsList.multiJobActions.groupSelector.addNewGroupPlaceholder",{defaultMessage:"Add new group"}),value:tempNewGroupName,onChange:this.changeTempNewGroup,onKeyDown:this.newGroupKeyPress,isInvalid:groupsValidationError!=="",error:groupsValidationError}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFormRow,{className:"new-group-input"},_react.default.createElement(_eui.EuiButtonIcon,{onClick:this.addNewGroup,iconType:"plusInCircle","aria-label":_i18n.i18n.translate("xpack.ml.jobsList.multiJobActions.groupSelector.addButtonAriaLabel",{defaultMessage:"Add"}),disabled:tempNewGroupName===""||groupsValidationError!==""})))))}}]);return NewGroupInput}(_react.Component);exports.NewGroupInput=NewGroupInput;_defineProperty(NewGroupInput,"propTypes",{addNewGroup:_propTypes.default.func.isRequired,allJobIds:_propTypes.default.array.isRequired})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"NewJobButton",{enumerable:true,get:function get(){return _new_job_button.NewJobButton}});var _new_job_button=__webpack_require__(1245)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.NewJobButton=NewJobButton;var _check_privilege=__webpack_require__(56);var _check_ml_nodes=__webpack_require__(81);var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);var _react2=__webpack_require__(30);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function newJob(){window.location.href="#/jobs/new_job"}function NewJobButton(){var buttonEnabled=(0,_check_privilege.checkPermission)("canCreateJob")&&(0,_check_ml_nodes.mlNodesAvailable)();return _react.default.createElement(_eui.EuiButton,{"data-test-subj":"mlCreateNewJobButton",onClick:newJob,size:"s",disabled:buttonEnabled===false,fill:true,iconType:"plusInCircle"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.createNewJobButtonLabel",defaultMessage:"Create job"}))}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"JobStatsBar",{enumerable:true,get:function get(){return _jobs_stats_bar.JobStatsBar}});var _jobs_stats_bar=__webpack_require__(1247)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JobStatsBar=void 0;var _states=__webpack_require__(108);var _stats_bar=__webpack_require__(186);var _propTypes=_interopRequireDefault(__webpack_require__(50));var _react=_interopRequireDefault(__webpack_require__(28));var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createJobStats(jobsSummaryList){var jobStats={activeNodes:{label:_i18n.i18n.translate("xpack.ml.jobsList.statsBar.activeMLNodesLabel",{defaultMessage:"Active ML nodes"}),value:0,show:true},total:{label:_i18n.i18n.translate("xpack.ml.jobsList.statsBar.totalJobsLabel",{defaultMessage:"Total jobs"}),value:0,show:true},open:{label:_i18n.i18n.translate("xpack.ml.jobsList.statsBar.openJobsLabel",{defaultMessage:"Open jobs"}),value:0,show:true},closed:{label:_i18n.i18n.translate("xpack.ml.jobsList.statsBar.closedJobsLabel",{defaultMessage:"Closed jobs"}),value:0,show:true},failed:{label:_i18n.i18n.translate("xpack.ml.jobsList.statsBar.failedJobsLabel",{defaultMessage:"Failed jobs"}),value:0,show:false},activeDatafeeds:{label:_i18n.i18n.translate("xpack.ml.jobsList.statsBar.activeDatafeedsLabel",{defaultMessage:"Active datafeeds"}),value:0,show:true}};if(jobsSummaryList===undefined){return jobStats}var mlNodes={};var failedJobs=0;jobsSummaryList.forEach((function(job){if(job.jobState===_states.JOB_STATE.OPENED){jobStats.open.value++}else if(job.jobState===_states.JOB_STATE.CLOSED){jobStats.closed.value++}else if(job.jobState===_states.JOB_STATE.FAILED){failedJobs++}if(job.hasDatafeed&&job.datafeedState===_states.DATAFEED_STATE.STARTED){jobStats.activeDatafeeds.value++}if(job.nodeName!==undefined){mlNodes[job.nodeName]={}}}));jobStats.total.value=jobsSummaryList.length;if(failedJobs){jobStats.failed.value=failedJobs;jobStats.failed.show=true}else{jobStats.failed.show=false}jobStats.activeNodes.value=Object.keys(mlNodes).length;return jobStats}var JobStatsBar=function JobStatsBar(_ref){var jobsSummaryList=_ref.jobsSummaryList;var jobStats=createJobStats(jobsSummaryList);return _react.default.createElement(_stats_bar.StatsBar,{stats:jobStats,dataTestSub:"mlJobStatsBar"})};exports.JobStatsBar=JobStatsBar;JobStatsBar.propTypes={jobsSummaryList:_propTypes.default.array.isRequired}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RefreshJobsListButton",{enumerable:true,get:function get(){return _refresh_jobs_list_button.RefreshJobsListButton}});var _refresh_jobs_list_button=__webpack_require__(1249)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RefreshJobsListButton=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _propTypes=_interopRequireDefault(__webpack_require__(50));var _eui=__webpack_require__(29);var _react2=__webpack_require__(30);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var RefreshJobsListButton=function RefreshJobsListButton(_ref){var onRefreshClick=_ref.onRefreshClick,isRefreshing=_ref.isRefreshing;return _react.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"mlRefreshJobListButton",onClick:onRefreshClick,isLoading:isRefreshing},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.jobsList.refreshButtonLabel",defaultMessage:"Refresh"}))};exports.RefreshJobsListButton=RefreshJobsListButton;RefreshJobsListButton.propTypes={onRefreshClick:_propTypes.default.func.isRequired,isRefreshing:_propTypes.default.bool.isRequired}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DataFrameAnalyticsList=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(29);var _common=__webpack_require__(65);var _check_privilege=__webpack_require__(56);var _columns=__webpack_require__(117);var _common2=__webpack_require__(101);var _analytics_service=__webpack_require__(153);var _expanded_row=__webpack_require__(1591);var _ml_in_memory_table=__webpack_require__(127);var _stats_bar=__webpack_require__(186);var _refresh_analytics_list_button=__webpack_require__(1596);var _create_analytics_button=__webpack_require__(1598);var _create_analytics_flyout_wrapper=__webpack_require__(1600);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function getItemIdToExpandedRowMap(itemIds,dataFrameAnalytics){return itemIds.reduce((function(m,analyticsId){var item=dataFrameAnalytics.find((function(analytics){return analytics.config.id===analyticsId}));if(item!==undefined){m[analyticsId]=_react.default.createElement(_expanded_row.ExpandedRow,{item:item})}return m}),{})}function stringMatch(str,substr){return typeof str==="string"&&typeof substr==="string"&&str.toLowerCase().match(substr.toLowerCase())===null===false}var MlInMemoryTable=(0,_ml_in_memory_table.mlInMemoryTableFactory)();var DataFrameAnalyticsList=function DataFrameAnalyticsList(_ref){var _ref$isManagementTabl=_ref.isManagementTable,isManagementTable=_ref$isManagementTabl===void 0?false:_ref$isManagementTabl,_ref$isMlEnabledInSpa=_ref.isMlEnabledInSpace,isMlEnabledInSpace=_ref$isMlEnabledInSpa===void 0?true:_ref$isMlEnabledInSpa,_ref$blockRefresh=_ref.blockRefresh,blockRefresh=_ref$blockRefresh===void 0?false:_ref$blockRefresh,createAnalyticsForm=_ref.createAnalyticsForm;var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isInitialized=_useState2[0],setIsInitialized=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=(0,_react.useState)(false),_useState6=_slicedToArray(_useState5,2),filterActive=_useState6[0],setFilterActive=_useState6[1];var _useState7=(0,_react.useState)([]),_useState8=_slicedToArray(_useState7,2),analytics=_useState8[0],setAnalytics=_useState8[1];var _useState9=(0,_react.useState)(undefined),_useState10=_slicedToArray(_useState9,2),analyticsStats=_useState10[0],setAnalyticsStats=_useState10[1];var _useState11=(0,_react.useState)([]),_useState12=_slicedToArray(_useState11,2),filteredAnalytics=_useState12[0],setFilteredAnalytics=_useState12[1];var _useState13=(0,_react.useState)([]),_useState14=_slicedToArray(_useState13,2),expandedRowItemIds=_useState14[0],setExpandedRowItemIds=_useState14[1];var _useState15=(0,_react.useState)(undefined),_useState16=_slicedToArray(_useState15,2),errorMessage=_useState16[0],setErrorMessage=_useState16[1];var _useState17=(0,_react.useState)(undefined),_useState18=_slicedToArray(_useState17,2),searchError=_useState18[0],setSearchError=_useState18[1];var _useState19=(0,_react.useState)(0),_useState20=_slicedToArray(_useState19,2),pageIndex=_useState20[0],setPageIndex=_useState20[1];var _useState21=(0,_react.useState)(10),_useState22=_slicedToArray(_useState21,2),pageSize=_useState22[0],setPageSize=_useState22[1];var _useState23=(0,_react.useState)(_common2.DataFrameAnalyticsListColumn.id),_useState24=_slicedToArray(_useState23,2),sortField=_useState24[0],setSortField=_useState24[1];var _useState25=(0,_react.useState)(_ml_in_memory_table.SORT_DIRECTION.ASC),_useState26=_slicedToArray(_useState25,2),sortDirection=_useState26[0],setSortDirection=_useState26[1];var disabled=!(0,_check_privilege.checkPermission)("canCreateDataFrameAnalytics")||!(0,_check_privilege.checkPermission)("canStartStopDataFrameAnalytics");var getAnalytics=(0,_analytics_service.getAnalyticsFactory)(setAnalytics,setAnalyticsStats,setErrorMessage,setIsInitialized,blockRefresh);(0,_common.useRefreshAnalyticsList)({isLoading:setIsLoading,onRefresh:function onRefresh(){return getAnalytics(true)}});var onQueryChange=function onQueryChange(_ref2){var query=_ref2.query,error=_ref2.error;if(error){setSearchError(error.message)}else{var clauses=[];if(query&&query.ast!==undefined&&query.ast.clauses!==undefined){clauses=query.ast.clauses}if(clauses.length>0){setFilterActive(true);filterAnalytics(clauses)}else{setFilterActive(false)}setSearchError(undefined)}};var filterAnalytics=function filterAnalytics(clauses){setIsLoading(true);var matches=analytics.reduce((function(p,c){p[c.id]={analytics:c,count:0};return p}),{});clauses.forEach((function(c){var bool=c.match==="must";var ts=[];if(c.type==="term"){if(bool===true){ts=analytics.filter((function(d){return stringMatch(d.id,c.value)===bool}))}else{ts=analytics.filter((function(d){return stringMatch(d.id,c.value)===bool}))}}else{if(Array.isArray(c.value)){ts=analytics.filter((function(d){return c.value.includes(d.stats.state)}))}else{ts=analytics.filter((function(d){return d.mode===c.value}))}}ts.forEach((function(t){return matches[t.id].count++}))}));var filtered=Object.values(matches).filter((function(m){return(m&&m.count)>=clauses.length})).map((function(m){return m.analytics}));var pageStart=pageIndex*pageSize;if(pageStart>=filtered.length&&filtered.length!==0){pageStart=Math.floor((filtered.length-1)/pageSize)*pageSize;setPageIndex(pageStart/pageSize)}setFilteredAnalytics(filtered);setIsLoading(false)};if(!isInitialized){return _react.default.createElement(_ml_in_memory_table.ProgressBar,{isLoading:isLoading})}if(typeof errorMessage!=="undefined"){return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_ml_in_memory_table.ProgressBar,{isLoading:isLoading}),_react.default.createElement(_eui.EuiCallOut,{title:_i18n.i18n.translate("xpack.ml.dataFrame.analyticsList.errorPromptTitle",{defaultMessage:"An error occurred getting the data frame analytics list."}),color:"danger",iconType:"alert"},_react.default.createElement("pre",null,JSON.stringify(errorMessage))))}if(analytics.length===0){return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_ml_in_memory_table.ProgressBar,{isLoading:isLoading}),_react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement("h2",null,_i18n.i18n.translate("xpack.ml.dataFrame.analyticsList.emptyPromptTitle",{defaultMessage:"No data frame analytics jobs found"})),actions:!isManagementTable&&createAnalyticsForm?[_react.default.createElement(_eui.EuiButtonEmpty,{onClick:createAnalyticsForm.actions.openModal,isDisabled:disabled,"data-test-subj":"mlAnalyticsCreateFirstButton"},_i18n.i18n.translate("xpack.ml.dataFrame.analyticsList.emptyPromptButtonText",{defaultMessage:"Create your first data frame analytics job"}))]:[],"data-test-subj":"mlNoDataFrameAnalyticsFound"}),!isManagementTable&&createAnalyticsForm&&_react.default.createElement(_create_analytics_flyout_wrapper.CreateAnalyticsFlyoutWrapper,createAnalyticsForm))}var columns=(0,_columns.getColumns)(expandedRowItemIds,setExpandedRowItemIds,isManagementTable,isMlEnabledInSpace,createAnalyticsForm);var sorting={sort:{field:sortField,direction:sortDirection}};var itemIdToExpandedRowMap=getItemIdToExpandedRowMap(expandedRowItemIds,analytics);var pagination={initialPageIndex:pageIndex,initialPageSize:pageSize,totalItemCount:analytics.length,pageSizeOptions:[10,20,50],hidePerPageOptions:false};var search={onChange:onQueryChange,box:{incremental:true},filters:[{type:"field_value_selection",field:"state.state",name:_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.statusFilter",{defaultMessage:"Status"}),multiSelect:"or",options:Object.values(_common2.DATA_FRAME_TASK_STATE).map((function(val){return{value:val,name:val,view:(0,_columns.getTaskStateBadge)(val)}}))}]};var onTableChange=function onTableChange(_ref3){var _ref3$page=_ref3.page,page=_ref3$page===void 0?{index:0,size:10}:_ref3$page,_ref3$sort=_ref3.sort,sort=_ref3$sort===void 0?{field:_common2.DataFrameAnalyticsListColumn.id,direction:_ml_in_memory_table.SORT_DIRECTION.ASC}:_ref3$sort;var index=page.index,size=page.size;setPageIndex(index);setPageSize(size);var field=sort.field,direction=sort.direction;setSortField(field);setSortDirection(direction)};return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},analyticsStats&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_stats_bar.StatsBar,{stats:analyticsStats,dataTestSub:"mlAnalyticsStatsBar"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_refresh_analytics_list_button.RefreshAnalyticsListButton,null)),!isManagementTable&&createAnalyticsForm&&_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_create_analytics_button.CreateAnalyticsButton,createAnalyticsForm))))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement("div",{"data-test-subj":"mlAnalyticsTableContainer"},_react.default.createElement(MlInMemoryTable,{allowNeutralSort:false,className:"mlAnalyticsTable",columns:columns,error:searchError,hasActions:false,isExpandable:true,isSelectable:false,items:filterActive?filteredAnalytics:analytics,itemId:_common2.DataFrameAnalyticsListColumn.id,itemIdToExpandedRowMap:itemIdToExpandedRowMap,onTableChange:onTableChange,pagination:pagination,sorting:sorting,search:search,"data-test-subj":isLoading?"mlAnalyticsTable loading":"mlAnalyticsTable loaded",rowProps:function rowProps(item){return{"data-test-subj":"mlAnalyticsTableRow row-".concat(item.id)}}})),!isManagementTable&&(createAnalyticsForm===null||createAnalyticsForm===void 0?void 0:createAnalyticsForm.state.isModalVisible)&&_react.default.createElement(_create_analytics_flyout_wrapper.CreateAnalyticsFlyoutWrapper,createAnalyticsForm))};exports.DataFrameAnalyticsList=DataFrameAnalyticsList},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.ExpandedRow=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _momentTimezone=_interopRequireDefault(__webpack_require__(36));var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);var _date_utils=__webpack_require__(83);var _expanded_row_details_pane=__webpack_require__(1592);var _expanded_row_json_pane=__webpack_require__(1593);var _progress_bar=__webpack_require__(1594);var _common=__webpack_require__(65);var _columns=__webpack_require__(117);var _common2=__webpack_require__(101);var _analytics=__webpack_require__(76);var _expanded_row_messages_pane=__webpack_require__(1595);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function getItemDescription(value){if(_typeof(value)==="object"){return JSON.stringify(value)}return value.toString()}var LoadedStat=function LoadedStat(_ref){var isLoading=_ref.isLoading,evalData=_ref.evalData,resultProperty=_ref.resultProperty;return _react.default.createElement(_react.Fragment,null,isLoading===false&&evalData.error!==null&&_react.default.createElement(_eui.EuiIcon,{type:"alert",size:"s"}),isLoading===true&&_react.default.createElement(_eui.EuiLoadingSpinner,{size:"s"}),isLoading===false&&evalData.error===null&&evalData[resultProperty])};var defaultEval={meanSquaredError:"",rSquared:"",error:null};var ExpandedRow=function ExpandedRow(_ref2){var _item$config,_item$config$dest,_item$config2;var item=_ref2.item;var _useState=(0,_react.useState)(defaultEval),_useState2=_slicedToArray(_useState,2),trainingEval=_useState2[0],setTrainingEval=_useState2[1];var _useState3=(0,_react.useState)(defaultEval),_useState4=_slicedToArray(_useState3,2),generalizationEval=_useState4[0],setGeneralizationEval=_useState4[1];var _useState5=(0,_react.useState)(false),_useState6=_slicedToArray(_useState5,2),isLoadingTraining=_useState6[0],setIsLoadingTraining=_useState6[1];var _useState7=(0,_react.useState)(false),_useState8=_slicedToArray(_useState7,2),isLoadingGeneralization=_useState8[0],setIsLoadingGeneralization=_useState8[1];var index=item===null||item===void 0?void 0:(_item$config=item.config)===null||_item$config===void 0?void 0:(_item$config$dest=_item$config.dest)===null||_item$config$dest===void 0?void 0:_item$config$dest.index;var dependentVariable=(0,_common.getDependentVar)(item.config.analysis);var predictionFieldName=(0,_common.getPredictionFieldName)(item.config.analysis);var resultsField=item.config.dest.results_field;var jobIsCompleted=(0,_common2.isCompletedAnalyticsJob)(item.stats);var isRegressionJob=(0,_analytics.isRegressionAnalysis)(item.config.analysis);var loadData=function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var genErrorEval,_getValuesFromRespons,meanSquaredError,rSquared,trainingErrorEval,_getValuesFromRespons2,_meanSquaredError,_rSquared;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoadingGeneralization(true);setIsLoadingTraining(true);_context.next=4;return(0,_common.loadEvalData)({isTraining:false,index:index,dependentVariable:dependentVariable,resultsField:resultsField,predictionFieldName:predictionFieldName,jobType:_analytics.ANALYSIS_CONFIG_TYPE.REGRESSION});case 4:genErrorEval=_context.sent;if(genErrorEval.success===true&&genErrorEval.eval&&(0,_analytics.isRegressionEvaluateResponse)(genErrorEval.eval)){_getValuesFromRespons=(0,_common.getValuesFromResponse)(genErrorEval.eval),meanSquaredError=_getValuesFromRespons.meanSquaredError,rSquared=_getValuesFromRespons.rSquared;setGeneralizationEval({meanSquaredError:meanSquaredError,rSquared:rSquared,error:null});setIsLoadingGeneralization(false)}else{setIsLoadingGeneralization(false);setGeneralizationEval({meanSquaredError:"",rSquared:"",error:genErrorEval.error})}_context.next=8;return(0,_common.loadEvalData)({isTraining:true,index:index,dependentVariable:dependentVariable,resultsField:resultsField,predictionFieldName:predictionFieldName,jobType:_analytics.ANALYSIS_CONFIG_TYPE.REGRESSION});case 8:trainingErrorEval=_context.sent;if(trainingErrorEval.success===true&&trainingErrorEval.eval&&(0,_analytics.isRegressionEvaluateResponse)(trainingErrorEval.eval)){_getValuesFromRespons2=(0,_common.getValuesFromResponse)(trainingErrorEval.eval),_meanSquaredError=_getValuesFromRespons2.meanSquaredError,_rSquared=_getValuesFromRespons2.rSquared;setTrainingEval({meanSquaredError:_meanSquaredError,rSquared:_rSquared,error:null});setIsLoadingTraining(false)}else{setIsLoadingTraining(false);setTrainingEval({meanSquaredError:"",rSquared:"",error:genErrorEval.error})}case 10:case"end":return _context.stop()}}}),_callee)})));return function loadData(){return _ref3.apply(this,arguments)}}();(0,_react.useEffect)((function(){if(jobIsCompleted&&isRegressionJob){loadData()}}),[jobIsCompleted]);var stateValues=_objectSpread({},item.stats);if((_item$config2=item.config)===null||_item$config2===void 0?void 0:_item$config2.description){stateValues.description=item.config.description}delete stateValues.progress;var state={title:_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.expandedRow.tabs.jobSettings.state",{defaultMessage:"State"}),items:Object.entries(stateValues).map((function(_ref4){var _ref5=_slicedToArray(_ref4,2),stateKey=_ref5[0],stateValue=_ref5[1];var title=stateKey.toString();if(title==="state"){return{title:title,description:(0,_columns.getTaskStateBadge)(getItemDescription(stateValue))}}return{title:title,description:getItemDescription(stateValue)}})),position:"left"};var progress={title:_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.expandedRow.tabs.jobSettings.progress",{defaultMessage:"Progress"}),items:item.stats.progress.map((function(s){return{title:s.phase,description:_react.default.createElement(_progress_bar.ProgressBar,{progress:s.progress_percent})}})),position:"left"};var stats={title:_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.expandedRow.tabs.jobSettings.stats",{defaultMessage:"Stats"}),items:[{title:"create_time",description:(0,_date_utils.formatHumanReadableDateTimeSeconds)((0,_momentTimezone.default)(item.config.create_time).unix()*1e3)},{title:"model_memory_limit",description:item.config.model_memory_limit},{title:"version",description:item.config.version}],position:"right"};if(jobIsCompleted&&isRegressionJob){stats.items.push({title:"generalization mean squared error",description:_react.default.createElement(LoadedStat,{isLoading:isLoadingGeneralization,evalData:generalizationEval,resultProperty:"meanSquaredError"})},{title:"generalization r squared",description:_react.default.createElement(LoadedStat,{isLoading:isLoadingGeneralization,evalData:generalizationEval,resultProperty:"rSquared"})},{title:"training mean squared error",description:_react.default.createElement(LoadedStat,{isLoading:isLoadingTraining,evalData:trainingEval,resultProperty:"meanSquaredError"})},{title:"training r squared",description:_react.default.createElement(LoadedStat,{isLoading:isLoadingTraining,evalData:trainingEval,resultProperty:"rSquared"})})}var tabs=[{id:"ml-analytics-job-details",name:_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.expandedRow.tabs.jobSettingsLabel",{defaultMessage:"Job details"}),content:_react.default.createElement(_expanded_row_details_pane.ExpandedRowDetailsPane,{sections:[state,progress,stats]})},{id:"ml-analytics-job-json",name:"JSON",content:_react.default.createElement(_expanded_row_json_pane.ExpandedRowJsonPane,{json:item.config})},{id:"ml-analytics-job-messages",name:_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.analyticsDetails.tabs.analyticsMessagesLabel",{defaultMessage:"Job messages"}),content:_react.default.createElement(_expanded_row_messages_pane.ExpandedRowMessagesPane,{analyticsId:item.id})}];return _react.default.createElement(_eui.EuiTabbedContent,{size:"s",tabs:tabs,initialSelectedTab:tabs[0],onTabClick:function onTabClick(){},expand:false,style:{width:"100%"}})};exports.ExpandedRow=ExpandedRow},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExpandedRowDetailsPane=exports.Section=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var Section=function Section(_ref){var section=_ref.section;if(section.items.length===0){return null}return _react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("span",null,section.title)),_react.default.createElement(_eui.EuiDescriptionList,{compressed:true,type:"column",listItems:section.items}))};exports.Section=Section;var ExpandedRowDetailsPane=function ExpandedRowDetailsPane(_ref2){var sections=_ref2.sections;return _react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{style:{width:"50%"}},sections.filter((function(s){return s.position==="left"})).map((function(s){return _react.default.createElement(_react.Fragment,{key:s.title},_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(Section,{section:s}))}))),_react.default.createElement(_eui.EuiFlexItem,{style:{width:"50%"}},sections.filter((function(s){return s.position==="right"})).map((function(s){return _react.default.createElement(_react.Fragment,{key:s.title},_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(Section,{section:s}))}))))};exports.ExpandedRowDetailsPane=ExpandedRowDetailsPane},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExpandedRowJsonPane=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ExpandedRowJsonPane=function ExpandedRowJsonPane(_ref){var json=_ref.json;return _react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiCodeEditor,{value:JSON.stringify(json,null,2),readOnly:true,mode:"json",style:{width:"100%"},theme:"textmate"})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},""))};exports.ExpandedRowJsonPane=ExpandedRowJsonPane},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ProgressBar=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ProgressBar=function ProgressBar(_ref){var progress=_ref.progress;return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},_react.default.createElement(_eui.EuiFlexItem,{style:{width:"100px"},grow:false},_react.default.createElement(_eui.EuiProgress,{value:progress,max:100,color:"primary",size:"m"},progress,"%")),_react.default.createElement(_eui.EuiFlexItem,{style:{width:"35px"},grow:false},_react.default.createElement(_eui.EuiText,{size:"xs"},"".concat(progress,"%"))))};exports.ProgressBar=ProgressBar},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExpandedRowMessagesPane=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _i18n=__webpack_require__(1);var _ml_api_service=__webpack_require__(51);var _common=__webpack_require__(65);var _job_messages=__webpack_require__(415);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var ExpandedRowMessagesPane=function ExpandedRowMessagesPane(_ref){var analyticsId=_ref.analyticsId;var _useState=(0,_react.useState)([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=(0,_react.useState)(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=(0,_react.useState)(""),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];var getMessagesFactory=function getMessagesFactory(){var concurrentLoads=0;return(function(){var _getMessages=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var messagesResp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;concurrentLoads++;if(!(concurrentLoads>1)){_context.next=4;break}return _context.abrupt("return");case 4:setIsLoading(true);_context.next=7;return _ml_api_service.ml.dataFrameAnalytics.getAnalyticsAuditMessages(analyticsId);case 7:messagesResp=_context.sent;setIsLoading(false);setMessages(messagesResp);concurrentLoads--;if(concurrentLoads>0){concurrentLoads=0;getMessages()}_context.next=18;break;case 14:_context.prev=14;_context.t0=_context["catch"](0);setIsLoading(false);setErrorMessage(_i18n.i18n.translate("xpack.ml.dfAnalyticsList.analyticsDetails.messagesPane.errorMessage",{defaultMessage:"Messages could not be loaded"}));case 18:case"end":return _context.stop()}}}),_callee,null,[[0,14]])})));function getMessages(){return _getMessages.apply(this,arguments)}return getMessages}())};(0,_common.useRefreshAnalyticsList)({onRefresh:getMessagesFactory()});return _react.default.createElement(_job_messages.JobMessages,{messages:messages,loading:isLoading,error:errorMessage})};exports.ExpandedRowMessagesPane=ExpandedRowMessagesPane},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RefreshAnalyticsListButton",{enumerable:true,get:function get(){return _refresh_analytics_list_button.RefreshAnalyticsListButton}});var _refresh_analytics_list_button=__webpack_require__(1597)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RefreshAnalyticsListButton=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _react2=__webpack_require__(30);var _common=__webpack_require__(65);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var RefreshAnalyticsListButton=function RefreshAnalyticsListButton(){var _useState=(0,_react.useState)(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useRefreshAnalyticsL=(0,_common.useRefreshAnalyticsList)({isLoading:setIsLoading}),refresh=_useRefreshAnalyticsL.refresh;return _react.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"mlAnalyticsRefreshListButton",onClick:refresh,isLoading:isLoading},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.dataframe.analyticsList.refreshButtonLabel",defaultMessage:"Refresh"}))};exports.RefreshAnalyticsListButton=RefreshAnalyticsListButton},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CreateAnalyticsButton",{enumerable:true,get:function get(){return _create_analytics_button.CreateAnalyticsButton}});var _create_analytics_button=__webpack_require__(1599)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CreateAnalyticsButton=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);var _check_privilege=__webpack_require__(56);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CreateAnalyticsButton=function CreateAnalyticsButton(props){var disabled=props.state.disabled;var openModal=props.actions.openModal;var button=_react.default.createElement(_eui.EuiButton,{disabled:disabled,fill:true,onClick:openModal,iconType:"plusInCircle",size:"s","data-test-subj":"mlAnalyticsButtonCreate"},_i18n.i18n.translate("xpack.ml.dataframe.analyticsList.createDataFrameAnalyticsButton",{defaultMessage:"Create analytics job"}));if(disabled){return _react.default.createElement(_eui.EuiToolTip,{position:"top",content:(0,_check_privilege.createPermissionFailureMessage)("canCreateDataFrameAnalytics")},button)}return button};exports.CreateAnalyticsButton=CreateAnalyticsButton},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CreateAnalyticsFlyoutWrapper",{enumerable:true,get:function get(){return _create_analytics_flyout_wrapper.CreateAnalyticsFlyoutWrapper}});var _create_analytics_flyout_wrapper=__webpack_require__(1601)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CreateAnalyticsFlyoutWrapper=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _create_analytics_advanced_editor=__webpack_require__(1602);var _create_analytics_form=__webpack_require__(1604);var _create_analytics_flyout=__webpack_require__(1611);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CreateAnalyticsFlyoutWrapper=function CreateAnalyticsFlyoutWrapper(props){var _props$state=props.state,isAdvancedEditorEnabled=_props$state.isAdvancedEditorEnabled,isModalVisible=_props$state.isModalVisible;if(isModalVisible===false){return null}return _react.default.createElement(_create_analytics_flyout.CreateAnalyticsFlyout,props,isAdvancedEditorEnabled===false&&_react.default.createElement(_create_analytics_form.CreateAnalyticsForm,props),isAdvancedEditorEnabled===true&&_react.default.createElement(_create_analytics_advanced_editor.CreateAnalyticsAdvancedEditor,props))};exports.CreateAnalyticsFlyoutWrapper=CreateAnalyticsFlyoutWrapper},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CreateAnalyticsAdvancedEditor",{enumerable:true,get:function get(){return _create_analytics_advanced_editor.CreateAnalyticsAdvancedEditor}});var _create_analytics_advanced_editor=__webpack_require__(1603)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CreateAnalyticsAdvancedEditor=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);var _custom_hooks=__webpack_require__(196);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var CreateAnalyticsAdvancedEditor=function CreateAnalyticsAdvancedEditor(_ref){var actions=_ref.actions,state=_ref.state;var setAdvancedEditorRawString=actions.setAdvancedEditorRawString,setFormState=actions.setFormState;var advancedEditorMessages=state.advancedEditorMessages,advancedEditorRawString=state.advancedEditorRawString,isJobCreated=state.isJobCreated,requestMessages=state.requestMessages;var _state$form=state.form,createIndexPattern=_state$form.createIndexPattern,destinationIndexPatternTitleExists=_state$form.destinationIndexPatternTitleExists,jobId=_state$form.jobId,jobIdEmpty=_state$form.jobIdEmpty,jobIdExists=_state$form.jobIdExists,jobIdValid=_state$form.jobIdValid;var forceInput=(0,_react.useRef)(null);var onChange=function onChange(str){setAdvancedEditorRawString(str)};(0,_react.useEffect)((function(){if(forceInput.current===null){return}var evt=document.createEvent("MouseEvents");evt.initEvent("mouseup",true,true);forceInput.current.dispatchEvent(evt)}),[]);return _react.default.createElement(_eui.EuiForm,{className:"mlDataFrameAnalyticsCreateForm"},requestMessages.map((function(requestMessage,i){return _react.default.createElement(_react.Fragment,{key:i},_react.default.createElement(_eui.EuiCallOut,{title:requestMessage.message,color:requestMessage.error!==undefined?"danger":"primary",iconType:requestMessage.error!==undefined?"alert":"checkInCircleFilled",size:"s"},requestMessage.error!==undefined?_react.default.createElement("p",null,requestMessage.error):null),_react.default.createElement(_eui.EuiSpacer,{size:"s"}))})),!isJobCreated&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.advancedEditor.jobIdLabel",{defaultMessage:"Analytics job ID"}),isInvalid:!jobIdEmpty&&!jobIdValid||jobIdExists,error:[].concat(_toConsumableArray(!jobIdEmpty&&!jobIdValid?[_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.advancedEditor.jobIdInvalidError",{defaultMessage:"Must contain lowercase alphanumeric characters (a-z and 0-9), hyphens, and underscores only and must start and end with alphanumeric characters."})]:[]),_toConsumableArray(jobIdExists?[_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.advancedEditor.jobIdExistsError",{defaultMessage:"An analytics job with this ID already exists."})]:[]))},_react.default.createElement(_eui.EuiFieldText,{inputRef:function inputRef(input){if(input){forceInput.current=input}},disabled:isJobCreated,placeholder:"analytics job ID",value:jobId,onChange:function onChange(e){return setFormState({jobId:e.target.value})},"aria-label":_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.advancedEditor.jobIdInputAriaLabel",{defaultMessage:"Choose a unique analytics job ID."}),isInvalid:!jobIdEmpty&&!jobIdValid||jobIdExists})),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.advancedEditor.configRequestBody",{defaultMessage:"Configuration request body"}),style:{maxWidth:"100%"}},_react.default.createElement(_eui.EuiCodeEditor,{mode:_custom_hooks.xJsonMode,width:"100%",value:advancedEditorRawString,onChange:onChange,setOptions:{fontSize:"12px",maxLines:20},theme:"textmate","aria-label":_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.advancedEditor.codeEditorAriaLabel",{defaultMessage:"Advanced analytics job editor"})})),_react.default.createElement(_eui.EuiSpacer,null),advancedEditorMessages.map((function(advancedEditorMessage,i){return _react.default.createElement(_react.Fragment,{key:i},_react.default.createElement(_eui.EuiCallOut,{title:advancedEditorMessage.message!==""?advancedEditorMessage.message:advancedEditorMessage.error,color:advancedEditorMessage.error!==undefined?"danger":"primary",iconType:advancedEditorMessage.error!==undefined?"alert":"checkInCircleFilled",size:"s"},advancedEditorMessage.message!==""&&advancedEditorMessage.error!==undefined?_react.default.createElement("p",null,advancedEditorMessage.error):null),_react.default.createElement(_eui.EuiSpacer,null))})),_react.default.createElement(_eui.EuiFormRow,{isInvalid:createIndexPattern&&destinationIndexPatternTitleExists,error:createIndexPattern&&destinationIndexPatternTitleExists&&[_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.indexPatternAlreadyExistsError",{defaultMessage:"An index pattern with this title already exists."})]},_react.default.createElement(_eui.EuiSwitch,{disabled:isJobCreated,name:"mlDataFrameAnalyticsCreateIndexPattern",label:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.createIndexPatternLabel",{defaultMessage:"Create index pattern"}),checked:createIndexPattern===true,onChange:function onChange(){return setFormState({createIndexPattern:!createIndexPattern})}}))))};exports.CreateAnalyticsAdvancedEditor=CreateAnalyticsAdvancedEditor},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CreateAnalyticsForm",{enumerable:true,get:function get(){return _create_analytics_form.CreateAnalyticsForm}});var _create_analytics_form=__webpack_require__(1605)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CreateAnalyticsForm=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);var _lodash=__webpack_require__(49);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(30);var _kibana=__webpack_require__(57);var _ml_api_service=__webpack_require__(51);var _new_job_capabilities_service=__webpack_require__(66);var _ml=__webpack_require__(77);var _state=__webpack_require__(266);var _validation=__webpack_require__(107);var _messages=__webpack_require__(1606);var _job_type=__webpack_require__(1607);var _job_description=__webpack_require__(1608);var _reducer=__webpack_require__(510);var _public=__webpack_require__(63);var _analytics=__webpack_require__(76);var _form_options_validation=__webpack_require__(1610);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var CreateAnalyticsForm=function CreateAnalyticsForm(_ref){var actions=_ref.actions,state=_ref.state;var _useMlKibana=(0,_kibana.useMlKibana)(),docLinks=_useMlKibana.services.docLinks;var ELASTIC_WEBSITE_URL=docLinks.ELASTIC_WEBSITE_URL,DOC_LINK_VERSION=docLinks.DOC_LINK_VERSION;var setFormState=actions.setFormState,setEstimatedModelMemoryLimit=actions.setEstimatedModelMemoryLimit;var mlContext=(0,_ml.useMlContext)();var form=state.form,indexPatternsMap=state.indexPatternsMap,isAdvancedEditorEnabled=state.isAdvancedEditorEnabled,isJobCreated=state.isJobCreated,requestMessages=state.requestMessages;var forceInput=(0,_react.useRef)(null);var firstUpdate=(0,_react.useRef)(true);var createIndexPattern=form.createIndexPattern,dependentVariable=form.dependentVariable,dependentVariableFetchFail=form.dependentVariableFetchFail,dependentVariableOptions=form.dependentVariableOptions,description=form.description,destinationIndex=form.destinationIndex,destinationIndexNameEmpty=form.destinationIndexNameEmpty,destinationIndexNameExists=form.destinationIndexNameExists,destinationIndexNameValid=form.destinationIndexNameValid,destinationIndexPatternTitleExists=form.destinationIndexPatternTitleExists,excludes=form.excludes,excludesOptions=form.excludesOptions,fieldOptionsFetchFail=form.fieldOptionsFetchFail,jobId=form.jobId,jobIdEmpty=form.jobIdEmpty,jobIdExists=form.jobIdExists,jobIdValid=form.jobIdValid,jobIdInvalidMaxLength=form.jobIdInvalidMaxLength,jobType=form.jobType,loadingDepVarOptions=form.loadingDepVarOptions,loadingFieldOptions=form.loadingFieldOptions,maxDistinctValuesError=form.maxDistinctValuesError,modelMemoryLimit=form.modelMemoryLimit,modelMemoryLimitValidationResult=form.modelMemoryLimitValidationResult,previousJobType=form.previousJobType,previousSourceIndex=form.previousSourceIndex,sourceIndex=form.sourceIndex,sourceIndexNameEmpty=form.sourceIndexNameEmpty,sourceIndexNameValid=form.sourceIndexNameValid,sourceIndexContainsNumericalFields=form.sourceIndexContainsNumericalFields,sourceIndexFieldsCheckFailed=form.sourceIndexFieldsCheckFailed,trainingPercent=form.trainingPercent;var characterList=_public.indexPatterns.ILLEGAL_CHARACTERS_VISIBLE.join(", ");var mmlErrors=(0,_react.useMemo)((function(){return(0,_reducer.getModelMemoryLimitErrors)(modelMemoryLimitValidationResult)}),[modelMemoryLimitValidationResult]);var isJobTypeWithDepVar=jobType===_analytics.ANALYSIS_CONFIG_TYPE.REGRESSION||jobType===_analytics.ANALYSIS_CONFIG_TYPE.CLASSIFICATION;var validateSourceIndexFields=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var indexPattern,containsNumericalFields;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return mlContext.indexPatterns.get(indexPatternsMap[sourceIndex].value);case 3:indexPattern=_context.sent;containsNumericalFields=indexPattern.fields.some((function(_ref3){var name=_ref3.name,type=_ref3.type;return!_form_options_validation.OMIT_FIELDS.includes(name)&&type==="number"}));setFormState({sourceIndexContainsNumericalFields:containsNumericalFields,sourceIndexFieldsCheckFailed:false});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](0);setFormState({sourceIndexFieldsCheckFailed:true});case 11:case"end":return _context.stop()}}}),_callee,null,[[0,8]])})));return function validateSourceIndexFields(){return _ref2.apply(this,arguments)}}();var onCreateOption=function onCreateOption(searchValue,flattenedOptions){var normalizedSearchValue=searchValue.trim().toLowerCase();if(!normalizedSearchValue){return}var newOption={label:searchValue};if(!flattenedOptions.some((function(option){return option.label.trim().toLowerCase()===normalizedSearchValue}))){excludesOptions.push(newOption);setFormState({excludes:[].concat(_toConsumableArray(excludes),[newOption.label])})}};var debouncedGetExplainData=(0,_lodash.debounce)(_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var shouldUpdateModelMemoryLimit,_resp$memory_estimati,jobConfig,resp,expectedMemoryWithoutDisk,analyzedFieldsOptions,errorMessage,fallbackModelMemoryLimit;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:shouldUpdateModelMemoryLimit=!firstUpdate.current||!modelMemoryLimit;if(firstUpdate.current){firstUpdate.current=false}if(previousSourceIndex!==sourceIndex||previousJobType!==jobType){setFormState({loadingFieldOptions:true})}_context2.prev=3;jobConfig=(0,_state.getJobConfigFromFormState)(form);delete jobConfig.dest;delete jobConfig.model_memory_limit;delete jobConfig.analyzed_fields;_context2.next=10;return _ml_api_service.ml.dataFrameAnalytics.explainDataFrameAnalytics(jobConfig);case 10:resp=_context2.sent;expectedMemoryWithoutDisk=(_resp$memory_estimati=resp.memory_estimation)===null||_resp$memory_estimati===void 0?void 0:_resp$memory_estimati.expected_memory_without_disk;if(shouldUpdateModelMemoryLimit){setEstimatedModelMemoryLimit(expectedMemoryWithoutDisk)}if(previousSourceIndex!==sourceIndex||previousJobType!==jobType){analyzedFieldsOptions=[];if(resp.field_selection){resp.field_selection.forEach((function(selectedField){if(selectedField.is_included===true&&selectedField.name!==dependentVariable){analyzedFieldsOptions.push({label:selectedField.name})}}))}setFormState(_objectSpread({},shouldUpdateModelMemoryLimit?{modelMemoryLimit:expectedMemoryWithoutDisk}:{},{excludesOptions:analyzedFieldsOptions,loadingFieldOptions:false,fieldOptionsFetchFail:false,maxDistinctValuesError:undefined}))}else{setFormState(_objectSpread({},shouldUpdateModelMemoryLimit?{modelMemoryLimit:expectedMemoryWithoutDisk}:{}))}_context2.next=22;break;case 16:_context2.prev=16;_context2.t0=_context2["catch"](3);if(jobType===_analytics.ANALYSIS_CONFIG_TYPE.CLASSIFICATION&&_context2.t0.message!==undefined&&_context2.t0.message.includes("status_exception")&&_context2.t0.message.includes("must have at most")){errorMessage=_context2.t0.message}fallbackModelMemoryLimit=jobType!==undefined?_state.DEFAULT_MODEL_MEMORY_LIMIT[jobType]:_state.DEFAULT_MODEL_MEMORY_LIMIT.outlier_detection;setEstimatedModelMemoryLimit(fallbackModelMemoryLimit);setFormState(_objectSpread({fieldOptionsFetchFail:true,maxDistinctValuesError:errorMessage,loadingFieldOptions:false},shouldUpdateModelMemoryLimit?{modelMemoryLimit:fallbackModelMemoryLimit}:{}));case 22:case"end":return _context2.stop()}}}),_callee2,null,[[3,16]])}))),400);var loadDepVarOptions=function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(formState){var indexPattern,formStateUpdate,fields,resetDependentVariable,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,field;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setFormState({loadingDepVarOptions:true,maxDistinctValuesError:undefined,sourceIndexFieldsCheckFailed:false,sourceIndexContainsNumericalFields:true});_context3.prev=1;_context3.next=4;return mlContext.indexPatterns.get(indexPatternsMap[sourceIndex].value);case 4:indexPattern=_context3.sent;if(!(indexPattern!==undefined)){_context3.next=32;break}formStateUpdate={loadingDepVarOptions:false,dependentVariableFetchFail:false,dependentVariableOptions:[]};_context3.next=9;return _new_job_capabilities_service.newJobCapsService.initializeFromIndexPattern(indexPattern);case 9:fields=_new_job_capabilities_service.newJobCapsService.fields;resetDependentVariable=true;_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context3.prev=14;for(_iterator=fields[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){field=_step.value;if((0,_form_options_validation.shouldAddAsDepVarOption)(field,jobType)){formStateUpdate.dependentVariableOptions.push({label:field.id});if(formState.dependentVariable===field.id){resetDependentVariable=false}}}_context3.next=22;break;case 18:_context3.prev=18;_context3.t0=_context3["catch"](14);_didIteratorError=true;_iteratorError=_context3.t0;case 22:_context3.prev=22;_context3.prev=23;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}case 25:_context3.prev=25;if(!_didIteratorError){_context3.next=28;break}throw _iteratorError;case 28:return _context3.finish(25);case 29:return _context3.finish(22);case 30:if(resetDependentVariable){formStateUpdate.dependentVariable=""}setFormState(formStateUpdate);case 32:_context3.next=37;break;case 34:_context3.prev=34;_context3.t1=_context3["catch"](1);setFormState({loadingDepVarOptions:false,dependentVariableFetchFail:true});case 37:case"end":return _context3.stop()}}}),_callee3,null,[[1,34],[14,18,22,30],[23,,25,29]])})));return function loadDepVarOptions(_x){return _ref5.apply(this,arguments)}}();var getSourceIndexErrorMessages=function getSourceIndexErrorMessages(){var errors=[];if(!sourceIndexNameEmpty&&!sourceIndexNameValid){errors.push(_react.default.createElement(_react.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.dataframe.analytics.create.sourceIndexInvalidError",defaultMessage:"Invalid source index name, it cannot contain spaces or the characters: {characterList}",values:{characterList:characterList}})))}if(sourceIndexFieldsCheckFailed===true){errors.push(_react.default.createElement(_react.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.ml.dataframe.analytics.create.sourceIndexFieldCheckError",defaultMessage:"There was a problem checking for numerical fields. Please refresh the page and try again."})))}return errors};var onSourceIndexChange=function onSourceIndexChange(selectedOptions){setFormState({excludes:[],excludesOptions:[],previousSourceIndex:sourceIndex,sourceIndex:selectedOptions[0].label||""})};(0,_react.useEffect)((function(){if(isJobTypeWithDepVar&&sourceIndexNameEmpty===false){loadDepVarOptions(form)}if(jobType===_analytics.ANALYSIS_CONFIG_TYPE.OUTLIER_DETECTION&&sourceIndexNameEmpty===false){validateSourceIndexFields()}}),[sourceIndex,jobType,sourceIndexNameEmpty]);(0,_react.useEffect)((function(){var hasBasicRequiredFields=jobType!==undefined&&sourceIndex!==""&&sourceIndexNameValid===true;var hasRequiredAnalysisFields=isJobTypeWithDepVar&&dependentVariable!==""||jobType===_analytics.ANALYSIS_CONFIG_TYPE.OUTLIER_DETECTION;if(hasBasicRequiredFields&&hasRequiredAnalysisFields){debouncedGetExplainData()}return function(){debouncedGetExplainData.cancel()}}),[jobType,sourceIndex,sourceIndexNameEmpty,dependentVariable,trainingPercent]);(0,_react.useEffect)((function(){if(forceInput.current===null){return}var evt=document.createEvent("MouseEvents");evt.initEvent("mouseup",true,true);forceInput.current.dispatchEvent(evt)}),[]);return _react.default.createElement(_eui.EuiForm,{className:"mlDataFrameAnalyticsCreateForm"},_react.default.createElement(_messages.Messages,{messages:requestMessages}),!isJobCreated&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_job_type.JobType,{type:jobType,setFormState:setFormState}),_react.default.createElement(_eui.EuiFormRow,{helpText:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.enableAdvancedEditorHelpText",{defaultMessage:"You cannot switch back to this form from the advanced editor."})},_react.default.createElement(_eui.EuiSwitch,{disabled:jobType===undefined,compressed:true,name:"mlDataFrameAnalyticsEnableAdvancedEditor",label:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.enableAdvancedEditorSwitch",{defaultMessage:"Enable advanced editor"}),checked:isAdvancedEditorEnabled,onChange:actions.switchToAdvancedEditor,"data-test-subj":"mlAnalyticsCreateJobFlyoutAdvancedEditorSwitch"})),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.jobIdLabel",{defaultMessage:"Job ID"}),isInvalid:!jobIdEmpty&&!jobIdValid||jobIdExists||jobIdInvalidMaxLength,error:[].concat(_toConsumableArray(!jobIdEmpty&&!jobIdValid?[_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.jobIdInvalidError",{defaultMessage:"Must contain lowercase alphanumeric characters (a-z and 0-9), hyphens, and underscores only and must start and end with alphanumeric characters."})]:[]),_toConsumableArray(jobIdExists?[_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.jobIdExistsError",{defaultMessage:"An analytics job with this ID already exists."})]:[]),_toConsumableArray(jobIdInvalidMaxLength?[_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.jobIdInvalidMaxLengthErrorMessage",{defaultMessage:"Job ID must be no more than {maxLength, plural, one {# character} other {# characters}} long.",values:{maxLength:_validation.JOB_ID_MAX_LENGTH}})]:[]))},_react.default.createElement(_eui.EuiFieldText,{inputRef:function inputRef(input){if(input){forceInput.current=input}},disabled:isJobCreated,placeholder:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.jobIdPlaceholder",{defaultMessage:"Job ID"}),value:jobId,onChange:function onChange(e){return setFormState({jobId:e.target.value})},"aria-label":_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.jobIdInputAriaLabel",{defaultMessage:"Choose a unique analytics job ID."}),isInvalid:!jobIdEmpty&&!jobIdValid||jobIdExists,"data-test-subj":"mlAnalyticsCreateJobFlyoutJobIdInput"})),_react.default.createElement(_job_description.JobDescriptionInput,{description:description,setFormState:setFormState}),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.sourceIndexLabel",{defaultMessage:"Source index"}),helpText:!sourceIndexNameEmpty&&!sourceIndexContainsNumericalFields&&_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.sourceIndexHelpText",{defaultMessage:"This index pattern does not contain any numeric type fields. The analytics job may not be able to come up with any outliers."}),isInvalid:!sourceIndexNameEmpty&&!sourceIndexNameValid,error:getSourceIndexErrorMessages()},_react.default.createElement(_react.Fragment,null,!isJobCreated&&_react.default.createElement(_eui.EuiComboBox,{placeholder:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.sourceIndexPlaceholder",{defaultMessage:"Choose a source index pattern."}),singleSelection:{asPlainText:true},options:Object.values(indexPatternsMap).sort((function(a,b){return a.label.localeCompare(b.label)})),selectedOptions:indexPatternsMap[sourceIndex]!==undefined?[{label:sourceIndex}]:[],onChange:onSourceIndexChange,isClearable:false,"data-test-subj":"mlAnalyticsCreateJobFlyoutSourceIndexSelect"}),isJobCreated&&_react.default.createElement(_eui.EuiFieldText,{disabled:true,value:sourceIndex,"aria-label":_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.sourceIndexInputAriaLabel",{defaultMessage:"Source index pattern or search."})}))),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.destinationIndexLabel",{defaultMessage:"Destination index"}),isInvalid:!destinationIndexNameEmpty&&!destinationIndexNameValid,helpText:destinationIndexNameExists&&_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.destinationIndexHelpText",{defaultMessage:"An index with this name already exists. Be aware that running this analytics job will modify this destination index."}),error:!destinationIndexNameEmpty&&!destinationIndexNameValid&&[_react.default.createElement(_react.Fragment,null,_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.destinationIndexInvalidError",{defaultMessage:"Invalid destination index name."}),_react.default.createElement("br",null),_react.default.createElement(_eui.EuiLink,{href:"".concat(ELASTIC_WEBSITE_URL,"guide/en/elasticsearch/reference/").concat(DOC_LINK_VERSION,"/indices-create-index.html#indices-create-index"),target:"_blank"},_i18n.i18n.translate("xpack.ml.dataframe.stepDetailsForm.destinationIndexInvalidErrorLink",{defaultMessage:"Learn more about index name limitations."})))]},_react.default.createElement(_eui.EuiFieldText,{disabled:isJobCreated,placeholder:"destination index",value:destinationIndex,onChange:function onChange(e){return setFormState({destinationIndex:e.target.value})},"aria-label":_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.destinationIndexInputAriaLabel",{defaultMessage:"Choose a unique destination index name."}),isInvalid:!destinationIndexNameEmpty&&!destinationIndexNameValid,"data-test-subj":"mlAnalyticsCreateJobFlyoutDestinationIndexInput"})),(jobType===_analytics.ANALYSIS_CONFIG_TYPE.REGRESSION||jobType===_analytics.ANALYSIS_CONFIG_TYPE.CLASSIFICATION)&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,isInvalid:maxDistinctValuesError!==undefined,error:_toConsumableArray(fieldOptionsFetchFail===true&&maxDistinctValuesError!==undefined?[_react.default.createElement(_react.Fragment,null,_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.dependentVariableMaxDistictValuesError",{defaultMessage:"Invalid. {message}",values:{message:maxDistinctValuesError}}))]:[])},_react.default.createElement(_react.Fragment,null)),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.dependentVariableLabel",{defaultMessage:"Dependent variable"}),helpText:dependentVariableOptions.length===0&&dependentVariableFetchFail===false&&!sourceIndexNameEmpty&&_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.dependentVariableOptionsNoNumericalFields",{defaultMessage:"No numeric type fields were found for this index pattern."}),isInvalid:maxDistinctValuesError!==undefined,error:_toConsumableArray(dependentVariableFetchFail===true?[_react.default.createElement(_react.Fragment,null,_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.dependentVariableOptionsFetchError",{defaultMessage:"There was a problem fetching fields. Please refresh the page and try again."}))]:[])},_react.default.createElement(_eui.EuiComboBox,{"aria-label":_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.dependentVariableInputAriaLabel",{defaultMessage:"Enter field to be used as dependent variable."}),placeholder:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.dependentVariablePlaceholder",{defaultMessage:"dependent variable"}),isDisabled:isJobCreated,isLoading:loadingDepVarOptions,singleSelection:true,options:dependentVariableOptions,selectedOptions:dependentVariable?[{label:dependentVariable}]:[],onChange:function onChange(selectedOptions){return setFormState({dependentVariable:selectedOptions[0].label||""})},isClearable:false,isInvalid:dependentVariable==="","data-test-subj":"mlAnalyticsCreateJobFlyoutDependentVariableSelect"})),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.trainingPercentLabel",{defaultMessage:"Training percent"})},_react.default.createElement(_eui.EuiRange,{min:_analytics.TRAINING_PERCENT_MIN,max:_analytics.TRAINING_PERCENT_MAX,step:1,showLabels:true,showRange:true,showValue:true,value:trainingPercent,onChange:function onChange(e){return setFormState({trainingPercent:+e.target.value})},"data-test-subj":"mlAnalyticsCreateJobFlyoutTrainingPercentSlider"}))),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.excludedFieldsLabel",{defaultMessage:"Excluded fields"}),helpText:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.excludedFieldsHelpText",{defaultMessage:"Select fields to exclude from analysis. All other supported fields are included."}),error:excludesOptions.length===0&&fieldOptionsFetchFail===false&&!sourceIndexNameEmpty&&[_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.excludesOptionsNoSupportedFields",{defaultMessage:"No supported analysis fields were found for this index pattern."})]},_react.default.createElement(_eui.EuiComboBox,{"aria-label":_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.excludesInputAriaLabel",{defaultMessage:"Optional. Enter or select field to be excluded."}),isDisabled:isJobCreated,isLoading:loadingFieldOptions,options:excludesOptions,selectedOptions:excludes.map((function(field){return{label:field}})),onCreateOption:onCreateOption,onChange:function onChange(selectedOptions){return setFormState({excludes:selectedOptions.map((function(option){return option.label}))})},isClearable:true,"data-test-subj":"mlAnalyticsCreateJobFlyoutExcludesSelect"})),_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.modelMemoryLimitLabel",{defaultMessage:"Model memory limit"}),isInvalid:modelMemoryLimitValidationResult!==null,error:mmlErrors},_react.default.createElement(_eui.EuiFieldText,{placeholder:jobType!==undefined?_state.DEFAULT_MODEL_MEMORY_LIMIT[jobType]:_state.DEFAULT_MODEL_MEMORY_LIMIT.outlier_detection,disabled:isJobCreated,value:modelMemoryLimit||"",onChange:function onChange(e){return setFormState({modelMemoryLimit:e.target.value})},isInvalid:modelMemoryLimitValidationResult!==null,"data-test-subj":"mlAnalyticsCreateJobFlyoutModelMemoryInput"})),_react.default.createElement(_eui.EuiFormRow,{isInvalid:createIndexPattern&&destinationIndexPatternTitleExists,error:createIndexPattern&&destinationIndexPatternTitleExists&&[_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.indexPatternExistsError",{defaultMessage:"An index pattern with this title already exists."})]},_react.default.createElement(_eui.EuiSwitch,{disabled:isJobCreated,name:"mlDataFrameAnalyticsCreateIndexPattern",label:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.createIndexPatternLabel",{defaultMessage:"Create index pattern"}),checked:createIndexPattern===true,onChange:function onChange(){return setFormState({createIndexPattern:!createIndexPattern})},"data-test-subj":"mlAnalyticsCreateJobFlyoutCreateIndexPatternSwitch"}))))};exports.CreateAnalyticsForm=CreateAnalyticsForm},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Messages=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _eui=__webpack_require__(29);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var Messages=function Messages(_ref){var messages=_ref.messages;return _react.default.createElement(_react.default.Fragment,null,messages.map((function(requestMessage,i){return _react.default.createElement(_react.Fragment,{key:i},_react.default.createElement(_eui.EuiCallOut,{title:requestMessage.message,color:requestMessage.error!==undefined?"danger":"primary",iconType:requestMessage.error!==undefined?"alert":"checkInCircleFilled",size:"s"},requestMessage.error!==undefined&&_react.default.createElement(_eui.EuiCodeBlock,{language:"json",fontSize:"s",paddingSize:"s",isCopyable:true},requestMessage.error)),_react.default.createElement(_eui.EuiSpacer,{size:"s"}))})))};exports.Messages=Messages},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JobType=void 0;var _react=_interopRequireWildcard(__webpack_require__(28));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(29);var _common=__webpack_require__(65);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var JobType=function JobType(_ref){var _helpText;var type=_ref.type,setFormState=_ref.setFormState;var outlierHelpText=_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.outlierDetectionHelpText",{defaultMessage:"Outlier detection jobs require a source index that is mapped as a table-like data structure and analyze only numeric and boolean fields. Use the advanced editor to add custom options to the configuration."});var regressionHelpText=_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.outlierRegressionHelpText",{defaultMessage:"Regression jobs analyze only numeric fields. Use the advanced editor to apply custom options, such as the prediction field name."});var classificationHelpText=_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.classificationHelpText",{defaultMessage:"Classification jobs require a source index that is mapped as a table-like data structure and support fields that are numeric, boolean, text, keyword, or ip. Use the advanced editor to apply custom options, such as the prediction field name."});var helpText=(_helpText={},_defineProperty(_helpText,_common.ANALYSIS_CONFIG_TYPE.REGRESSION,regressionHelpText),_defineProperty(_helpText,_common.ANALYSIS_CONFIG_TYPE.OUTLIER_DETECTION,outlierHelpText),_defineProperty(_helpText,_common.ANALYSIS_CONFIG_TYPE.CLASSIFICATION,classificationHelpText),_helpText);return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.jobTypeLabel",{defaultMessage:"Job type"}),helpText:type!==undefined?helpText[type]:""},_react.default.createElement(_eui.EuiSelect,{options:Object.values(_common.ANALYSIS_CONFIG_TYPE).map((function(jobType){return{value:jobType,text:jobType.replace(/_/g," ")}})),value:type,hasNoInitialSelection:true,onChange:function onChange(e){var value=e.target.value;setFormState({previousJobType:type,jobType:value,excludes:[]})},"data-test-subj":"mlAnalyticsCreateJobFlyoutJobTypeSelect"})))};exports.JobType=JobType},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JobDescriptionInput=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var helpText=_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.jobDescription.helpText",{defaultMessage:"Optional descriptive text"});var JobDescriptionInput=function JobDescriptionInput(_ref){var description=_ref.description,setFormState=_ref.setFormState;return _react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.jobDescription.label",{defaultMessage:"Job description"})},_react.default.createElement(_eui.EuiTextArea,{value:description,placeholder:helpText,rows:2,onChange:function onChange(e){var value=e.target.value;setFormState({description:value})},"data-test-subj":"mlDFAnalyticsJobCreationJobDescription"}))};exports.JobDescriptionInput=JobDescriptionInput},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isValidIndexName=isValidIndexName;var windowWithTextEncoder=window;function isValidIndexNameLength(indexName){if(windowWithTextEncoder.TextEncoder&&new windowWithTextEncoder.TextEncoder("utf-8").encode(indexName).length>255){return false}return indexName.length<=255}function isValidIndexName(indexName){return typeof indexName==="string"&&indexName===indexName.toLowerCase()&&/^[^\*\\/\?"<>|\s,#:]+$/.test(indexName)&&/^[^-_\+]+$/.test(indexName.charAt(0))&&indexName!=="."&&indexName!==".."&&isValidIndexNameLength(indexName)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.shouldAddAsDepVarOption=exports.OMIT_FIELDS=void 0;var _public=__webpack_require__(63);var _fields=__webpack_require__(118);var _analytics=__webpack_require__(76);var _fields2=__webpack_require__(137);var CATEGORICAL_TYPES=new Set(["ip","keyword","text"]);var OMIT_FIELDS=["_source","_type","_index","_id","_version","_score"];exports.OMIT_FIELDS=OMIT_FIELDS;var shouldAddAsDepVarOption=function shouldAddAsDepVarOption(field,jobType){if(field.id===_fields.EVENT_RATE_FIELD_ID)return false;var isBasicNumerical=_fields2.BASIC_NUMERICAL_TYPES.has(field.type);var isSupportedByClassification=isBasicNumerical||CATEGORICAL_TYPES.has(field.type)||field.type===_public.ES_FIELD_TYPES.BOOLEAN;if(jobType===_analytics.ANALYSIS_CONFIG_TYPE.REGRESSION){return isBasicNumerical||_fields2.EXTENDED_NUMERICAL_TYPES.has(field.type)}if(jobType===_analytics.ANALYSIS_CONFIG_TYPE.CLASSIFICATION)return isSupportedByClassification};exports.shouldAddAsDepVarOption=shouldAddAsDepVarOption},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CreateAnalyticsFlyout",{enumerable:true,get:function get(){return _create_analytics_flyout.CreateAnalyticsFlyout}});var _create_analytics_flyout=__webpack_require__(1612)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CreateAnalyticsFlyout=void 0;var _react=_interopRequireDefault(__webpack_require__(28));var _eui=__webpack_require__(29);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CreateAnalyticsFlyout=function CreateAnalyticsFlyout(_ref){var actions=_ref.actions,children=_ref.children,state=_ref.state;var closeModal=actions.closeModal,createAnalyticsJob=actions.createAnalyticsJob,startAnalyticsJob=actions.startAnalyticsJob;var isJobCreated=state.isJobCreated,isJobStarted=state.isJobStarted,isModalButtonDisabled=state.isModalButtonDisabled,isValid=state.isValid,isAdvancedEditorValidJson=state.isAdvancedEditorValidJson,cloneJob=state.cloneJob;var headerText=!!cloneJob?_i18n.i18n.translate("xpack.ml.dataframe.analytics.clone.flyoutHeaderTitle",{defaultMessage:"Clone job from {job_id}",values:{job_id:cloneJob.id}}):_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.flyoutHeaderTitle",{defaultMessage:"Create analytics job"});return _react.default.createElement(_eui.EuiFlyout,{size:"m",onClose:closeModal,"data-test-subj":"mlAnalyticsCreateJobFlyout"},_react.default.createElement(_eui.EuiFlyoutHeader,null,_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h2",{"data-test-subj":"mlDataFrameAnalyticsFlyoutHeaderTitle"},headerText))),_react.default.createElement(_eui.EuiFlyoutBody,null,children),_react.default.createElement(_eui.EuiFlyoutFooter,null,(!isJobCreated||!isJobStarted)&&_react.default.createElement(_eui.EuiButtonEmpty,{onClick:closeModal},isJobCreated===true?_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.flyoutCloseButton",{defaultMessage:"Close"}):_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.flyoutCancelButton",{defaultMessage:"Cancel"})),!isJobCreated&&!isJobStarted&&_react.default.createElement(_eui.EuiButton,{className:"mlAnalyticsCreateFlyout__footerButton",disabled:!isValid||!isAdvancedEditorValidJson||isModalButtonDisabled,onClick:createAnalyticsJob,fill:true,"data-test-subj":"mlAnalyticsCreateJobFlyoutCreateButton"},_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.flyoutCreateButton",{defaultMessage:"Create"})),isJobCreated&&!isJobStarted&&_react.default.createElement(_eui.EuiButton,{className:"mlAnalyticsCreateFlyout__footerButton",disabled:isModalButtonDisabled,onClick:startAnalyticsJob,fill:true,"data-test-subj":"mlAnalyticsCreateJobFlyoutStartButton"},_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.flyoutStartButton",{defaultMessage:"Start"})),isJobCreated&&isJobStarted&&_react.default.createElement(_eui.EuiButton,{onClick:closeModal,fill:true,"data-test-subj":"mlAnalyticsCreateJobFlyoutCloseButton"},_i18n.i18n.translate("xpack.ml.dataframe.analytics.create.flyoutCloseButton",{defaultMessage:"Close"}))))};exports.CreateAnalyticsFlyout=CreateAnalyticsFlyout}])]);