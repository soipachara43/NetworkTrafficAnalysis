(window["licenseManagement_bundle_jsonpfunction"]=window["licenseManagement_bundle_jsonpfunction"]||[]).push([[2],Array(23).concat([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AppDependencies",{enumerable:true,get:function get(){return _app_context.AppDependencies}});exports.renderApp=void 0;var _react=_interopRequireDefault(__webpack_require__(17));var _reactDom=__webpack_require__(21);var _reactRouterDom=__webpack_require__(20);var _app_context=__webpack_require__(40);var _app_providers=__webpack_require__(83);var _app=__webpack_require__(143);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AppWithRouter=function AppWithRouter(props){return _react.default.createElement(_reactRouterDom.HashRouter,null,_react.default.createElement(_app.App,props))};var renderApp=function renderApp(element,dependencies){(0,_reactDom.render)(_react.default.createElement(_app_providers.AppProviders,{appDependencies:dependencies},_react.default.createElement(AppWithRouter,{telemetry:dependencies.plugins.telemetry})),element);return function(){(0,_reactDom.unmountComponentAtNode)(element)}};exports.renderApp=renderApp},,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getStartBasicMessages=exports.startBasicLicenseNeedsAcknowledgement=exports.startTrialError=exports.shouldShowRequestTrialExtension=exports.shouldShowStartTrial=exports.getUploadErrorMessage=exports.isInvalid=exports.uploadMessages=exports.isApplying=exports.uploadNeedsAcknowledgement=exports.shouldShowRevertToBasicLicense=exports.isImminentExpiration=exports.isExpired=exports.getExpirationDateFormatted=exports.getExpirationDate=exports.getExpirationMillis=exports.getLicenseType=exports.getLicense=exports.getPermissionsError=exports.isPermissionsLoading=exports.getPermission=exports.licenseManagement=exports.WARNING_THRESHOLD_IN_DAYS=void 0;var _redux=__webpack_require__(44);var _license=__webpack_require__(118);var _upload_status=__webpack_require__(138);var _start_basic_license_status=__webpack_require__(139);var _upload_error_message=__webpack_require__(140);var _trial_status=__webpack_require__(141);var _permissions=__webpack_require__(142);var _momentTimezone=_interopRequireDefault(__webpack_require__(24));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var WARNING_THRESHOLD_IN_DAYS=25;exports.WARNING_THRESHOLD_IN_DAYS=WARNING_THRESHOLD_IN_DAYS;var licenseManagement=(0,_redux.combineReducers)({license:_license.license,uploadStatus:_upload_status.uploadStatus,uploadErrorMessage:_upload_error_message.uploadErrorMessage,trialStatus:_trial_status.trialStatus,startBasicStatus:_start_basic_license_status.startBasicStatus,permissions:_permissions.permissions});exports.licenseManagement=licenseManagement;var getPermission=function getPermission(state){return state.permissions.hasPermission};exports.getPermission=getPermission;var isPermissionsLoading=function isPermissionsLoading(state){return state.permissions.loading};exports.isPermissionsLoading=isPermissionsLoading;var getPermissionsError=function getPermissionsError(state){return state.permissions.error};exports.getPermissionsError=getPermissionsError;var getLicense=function getLicense(state){return state.license};exports.getLicense=getLicense;var getLicenseType=function getLicenseType(state){return getLicense(state).type};exports.getLicenseType=getLicenseType;var getExpirationMillis=function getExpirationMillis(state){return getLicense(state).expiryDateInMillis};exports.getExpirationMillis=getExpirationMillis;var getExpirationDate=function getExpirationDate(state){if(getLicenseType(state)==="basic"){return null}var expirationMillis=getExpirationMillis(state);if(expirationMillis){return _momentTimezone.default.tz(getExpirationMillis(state),_momentTimezone.default.tz.guess())}else{return null}};exports.getExpirationDate=getExpirationDate;var getExpirationDateFormatted=function getExpirationDateFormatted(state){var expirationDate=getExpirationDate(state);return expirationDate?expirationDate.format("LLL z"):null};exports.getExpirationDateFormatted=getExpirationDateFormatted;var isExpired=function isExpired(state){return(new Date).getTime()>getExpirationMillis(state)};exports.isExpired=isExpired;var isImminentExpiration=function isImminentExpiration(state){var now=new Date;var expirationDate=getExpirationDate(state);return expirationDate&&expirationDate.isAfter(now)&&expirationDate.diff(now,"days")<=WARNING_THRESHOLD_IN_DAYS};exports.isImminentExpiration=isImminentExpiration;var shouldShowRevertToBasicLicense=function shouldShowRevertToBasicLicense(state){var _getLicense=getLicense(state),type=_getLicense.type;return type==="trial"||isImminentExpiration(state)||isExpired(state)};exports.shouldShowRevertToBasicLicense=shouldShowRevertToBasicLicense;var uploadNeedsAcknowledgement=function uploadNeedsAcknowledgement(state){return!!state.uploadStatus.acknowledge};exports.uploadNeedsAcknowledgement=uploadNeedsAcknowledgement;var isApplying=function isApplying(state){return!!state.uploadStatus.applying};exports.isApplying=isApplying;var uploadMessages=function uploadMessages(state){return state.uploadStatus.messages};exports.uploadMessages=uploadMessages;var isInvalid=function isInvalid(state){return!!state.uploadStatus.invalid};exports.isInvalid=isInvalid;var getUploadErrorMessage=function getUploadErrorMessage(state){return state.uploadErrorMessage};exports.getUploadErrorMessage=getUploadErrorMessage;var shouldShowStartTrial=function shouldShowStartTrial(state){var licenseType=getLicenseType(state);return state.trialStatus.canStartTrial&&licenseType!=="trial"&&(licenseType!=="platinum"&&licenseType!=="enterprise"||isExpired(state))};exports.shouldShowStartTrial=shouldShowStartTrial;var shouldShowRequestTrialExtension=function shouldShowRequestTrialExtension(state){if(state.trialStatus.canStartTrial){return false}var _getLicense2=getLicense(state),type=_getLicense2.type;return type!=="platinum"&&type!=="enterprise"||isExpired(state)};exports.shouldShowRequestTrialExtension=shouldShowRequestTrialExtension;var startTrialError=function startTrialError(state){return state.trialStatus.startTrialError};exports.startTrialError=startTrialError;var startBasicLicenseNeedsAcknowledgement=function startBasicLicenseNeedsAcknowledgement(state){return!!state.startBasicStatus.acknowledge};exports.startBasicLicenseNeedsAcknowledgement=startBasicLicenseNeedsAcknowledgement;var getStartBasicMessages=function getStartBasicMessages(state){return state.startBasicStatus.messages};exports.getStartBasicMessages=getStartBasicMessages},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KIBANA_STATS_TYPE=exports.KIBANA_USAGE_TYPE=exports.KIBANA_STACK_MANAGEMENT_STATS_TYPE=exports.APPLICATION_USAGE_TYPE=exports.UI_METRIC_USAGE_TYPE=exports.ENDPOINT_VERSION=exports.TELEMETRY_STATS_TYPE=exports.PRIVACY_STATEMENT_URL=exports.PATH_TO_ADVANCED_SETTINGS=exports.LOCALSTORAGE_KEY=exports.REPORT_INTERVAL_MS=exports.getConfigTelemetryDesc=exports.CONFIG_TELEMETRY=void 0;var _i18n=__webpack_require__(0);var CONFIG_TELEMETRY="telemetry:optIn";exports.CONFIG_TELEMETRY=CONFIG_TELEMETRY;var getConfigTelemetryDesc=function getConfigTelemetryDesc(){return _i18n.i18n.translate("telemetry.telemetryConfigDescription",{defaultMessage:"Help us improve the Elastic Stack by providing usage statistics for basic features. We will not share this data outside of Elastic."})};exports.getConfigTelemetryDesc=getConfigTelemetryDesc;var REPORT_INTERVAL_MS=864e5;exports.REPORT_INTERVAL_MS=REPORT_INTERVAL_MS;var LOCALSTORAGE_KEY="telemetry.data";exports.LOCALSTORAGE_KEY=LOCALSTORAGE_KEY;var PATH_TO_ADVANCED_SETTINGS="kibana#/management/kibana/settings";exports.PATH_TO_ADVANCED_SETTINGS=PATH_TO_ADVANCED_SETTINGS;var PRIVACY_STATEMENT_URL="https://www.elastic.co/legal/privacy-statement";exports.PRIVACY_STATEMENT_URL=PRIVACY_STATEMENT_URL;var TELEMETRY_STATS_TYPE="telemetry";exports.TELEMETRY_STATS_TYPE=TELEMETRY_STATS_TYPE;var ENDPOINT_VERSION="v2";exports.ENDPOINT_VERSION=ENDPOINT_VERSION;var UI_METRIC_USAGE_TYPE="ui_metric";exports.UI_METRIC_USAGE_TYPE=UI_METRIC_USAGE_TYPE;var APPLICATION_USAGE_TYPE="application_usage";exports.APPLICATION_USAGE_TYPE=APPLICATION_USAGE_TYPE;var KIBANA_STACK_MANAGEMENT_STATS_TYPE="stack_management";exports.KIBANA_STACK_MANAGEMENT_STATS_TYPE=KIBANA_STACK_MANAGEMENT_STATS_TYPE;var KIBANA_USAGE_TYPE="kibana";exports.KIBANA_USAGE_TYPE=KIBANA_USAGE_TYPE;var KIBANA_STATS_TYPE="kibana_stats";exports.KIBANA_STATS_TYPE=KIBANA_STATS_TYPE},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.putLicense=putLicense;exports.startBasic=startBasic;exports.startTrial=startTrial;exports.canStartTrial=canStartTrial;exports.getPermissions=getPermissions;var _constants=__webpack_require__(1);function putLicense(http,license,acknowledge){return http.put(_constants.API_BASE_PATH,{query:{acknowledge:acknowledge?"true":""},body:license,headers:{contentType:"application/json"},cache:"no-cache"})}function startBasic(http,acknowledge){return http.post("".concat(_constants.API_BASE_PATH,"/start_basic"),{query:{acknowledge:acknowledge?"true":""},headers:{contentType:"application/json"},body:null,cache:"no-cache"})}function startTrial(http){return http.post("".concat(_constants.API_BASE_PATH,"/start_trial"),{headers:{contentType:"application/json"},cache:"no-cache"})}function canStartTrial(http){return http.get("".concat(_constants.API_BASE_PATH,"/start_trial"),{headers:{contentType:"application/json"},cache:"no-cache"})}function getPermissions(http){return http.post("".concat(_constants.API_BASE_PATH,"/permissions"),{headers:{contentType:"application/json"},cache:"no-cache"})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"isDefaultValue",{enumerable:true,get:function get(){return _is_default_value.isDefaultValue}});Object.defineProperty(exports,"toEditableConfig",{enumerable:true,get:function get(){return _to_editable_config.toEditableConfig}});Object.defineProperty(exports,"getCategoryName",{enumerable:true,get:function get(){return _get_category_name.getCategoryName}});Object.defineProperty(exports,"DEFAULT_CATEGORY",{enumerable:true,get:function get(){return _default_category.DEFAULT_CATEGORY}});Object.defineProperty(exports,"getAriaName",{enumerable:true,get:function get(){return _get_aria_name.getAriaName}});var _is_default_value=__webpack_require__(198);var _to_editable_config=__webpack_require__(199);var _get_category_name=__webpack_require__(201);var _default_category=__webpack_require__(81);var _get_aria_name=__webpack_require__(79)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useAppContext=exports.AppContextConsumer=exports.AppContextProvider=void 0;var _react=_interopRequireWildcard(__webpack_require__(17));function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var AppContext=(0,_react.createContext)(undefined);var AppContextProvider=function AppContextProvider(_ref){var children=_ref.children,value=_ref.value;return _react.default.createElement(AppContext.Provider,{value:value},children)};exports.AppContextProvider=AppContextProvider;var AppContextConsumer=AppContext.Consumer;exports.AppContextConsumer=AppContextConsumer;var useAppContext=function useAppContext(){var ctx=(0,_react.useContext)(AppContext);if(!ctx){throw new Error('"useAppContext" can only be called inside of AppContext.Provider!')}return ctx};exports.useAppContext=useAppContext},,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addUploadErrorMessage=void 0;var _reduxActions=__webpack_require__(28);var addUploadErrorMessage=(0,_reduxActions.createAction)("LICENSE_MANAGEMENT_ADD_UPLOAD_ERROR_MESSAGE");exports.addUploadErrorMessage=addUploadErrorMessage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.shouldShowTelemetryOptIn=shouldShowTelemetryOptIn;Object.defineProperty(exports,"TelemetryPluginSetup",{enumerable:true,get:function get(){return _public.TelemetryPluginSetup}});Object.defineProperty(exports,"OptInExampleFlyout",{enumerable:true,get:function get(){return _components.OptInExampleFlyout}});Object.defineProperty(exports,"PRIVACY_STATEMENT_URL",{enumerable:true,get:function get(){return _constants.PRIVACY_STATEMENT_URL}});var _public=__webpack_require__(159);var _components=__webpack_require__(179);var _constants=__webpack_require__(35);function shouldShowTelemetryOptIn(telemetry){if(telemetry){var telemetryService=telemetry.telemetryService;var isOptedIn=telemetryService.getIsOptedIn();var canChangeOptInStatus=telemetryService.getCanChangeOptInStatus();return canChangeOptInStatus&&!isOptedIn}return false}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ComponentRegistry",{enumerable:true,get:function get(){return _component_registry.ComponentRegistry}});var _component_registry=__webpack_require__(183)},,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addLicense=void 0;var _reduxActions=__webpack_require__(28);var addLicense=(0,_reduxActions.createAction)("LICENSE_MANAGEMENT_ADD_LICENSE");exports.addLicense=addLicense},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.uploadLicense=exports.uploadLicenseStatus=void 0;var _reduxActions=__webpack_require__(28);var _add_license=__webpack_require__(69);var _es=__webpack_require__(38);var _add_error_message=__webpack_require__(48);var _i18n=__webpack_require__(0);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var uploadLicenseStatus=(0,_reduxActions.createAction)("LICENSE_MANAGEMENT_UPLOAD_LICENSE_STATUS");exports.uploadLicenseStatus=uploadLicenseStatus;var genericUploadError=_i18n.i18n.translate("xpack.licenseMgmt.uploadLicense.genericUploadErrorMessage",{defaultMessage:"Error encountered uploading license:"});var dispatchFromResponse=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(response,dispatch,currentLicenseType,newLicenseType,_ref2){var history,licensing,error,acknowledged,licenseStatus,acknowledge,updatedLicense,messages,first;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:history=_ref2.history,licensing=_ref2.licensing;error=response.error,acknowledged=response.acknowledged,licenseStatus=response.license_status,acknowledge=response.acknowledge;if(!error){_context.next=7;break}dispatch(uploadLicenseStatus({}));dispatch((0,_add_error_message.addUploadErrorMessage)("".concat(genericUploadError," ").concat(error.reason)));_context.next=30;break;case 7:if(!acknowledged){_context.next=27;break}if(!(licenseStatus==="invalid")){_context.next=13;break}dispatch(uploadLicenseStatus({}));dispatch((0,_add_error_message.addUploadErrorMessage)(_i18n.i18n.translate("xpack.licenseMgmt.uploadLicense.invalidLicenseErrorMessage",{defaultMessage:"The supplied license is not valid for this product."})));_context.next=25;break;case 13:if(!(licenseStatus==="expired")){_context.next=18;break}dispatch(uploadLicenseStatus({}));dispatch((0,_add_error_message.addUploadErrorMessage)(_i18n.i18n.translate("xpack.licenseMgmt.uploadLicense.expiredLicenseErrorMessage",{defaultMessage:"The supplied license has expired."})));_context.next=25;break;case 18:_context.next=20;return licensing.refresh();case 20:updatedLicense=_context.sent;dispatch((0,_add_license.addLicense)(updatedLicense));dispatch(uploadLicenseStatus({}));history.replace("/home");window.location.reload();case 25:_context.next=30;break;case 27:messages=Object.values(acknowledge).slice(1);first=_i18n.i18n.translate("xpack.licenseMgmt.uploadLicense.problemWithUploadedLicenseDescription",{defaultMessage:"Some functionality will be lost if you replace your {currentLicenseType} license with a {newLicenseType} license. Review the list of features below.",values:{currentLicenseType:currentLicenseType.toUpperCase(),newLicenseType:newLicenseType.toUpperCase()}});dispatch(uploadLicenseStatus({acknowledge:true,messages:[first].concat(_toConsumableArray(messages))}));case 30:case"end":return _context.stop()}}}),_callee)})));return function dispatchFromResponse(_x,_x2,_x3,_x4,_x5){return _ref.apply(this,arguments)}}();var uploadLicense=function uploadLicense(licenseString,currentLicenseType,acknowledge){return function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(dispatch,getState,services){var newLicenseType,response,message;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(uploadLicenseStatus({applying:true}));newLicenseType=null;_context2.prev=2;newLicenseType=JSON.parse(licenseString).license.type;_context2.next=10;break;case 6:_context2.prev=6;_context2.t0=_context2["catch"](2);dispatch(uploadLicenseStatus({}));return _context2.abrupt("return",dispatch((0,_add_error_message.addUploadErrorMessage)(_i18n.i18n.translate("xpack.licenseMgmt.uploadLicense.checkLicenseFileErrorMessage",{defaultMessage:"{genericUploadError} Check your license file.",values:{genericUploadError:genericUploadError}}))));case 10:_context2.prev=10;_context2.next=13;return(0,_es.putLicense)(services.http,licenseString,acknowledge);case 13:response=_context2.sent;_context2.next=16;return dispatchFromResponse(response,dispatch,currentLicenseType,newLicenseType,services);case 16:_context2.next=23;break;case 18:_context2.prev=18;_context2.t1=_context2["catch"](10);message=_context2.t1.responseJSON&&_context2.t1.responseJSON.error.reason?_context2.t1.responseJSON.error.reason:_i18n.i18n.translate("xpack.licenseMgmt.uploadLicense.unknownErrorErrorMessage",{defaultMessage:"Unknown error."});dispatch(uploadLicenseStatus({}));dispatch((0,_add_error_message.addUploadErrorMessage)("".concat(genericUploadError," ").concat(message)));case 23:case"end":return _context2.stop()}}}),_callee2,null,[[2,6],[10,18]])})));return function(_x6,_x7,_x8){return _ref3.apply(this,arguments)}}()};exports.uploadLicense=uploadLicense},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.startBasicLicense=exports.cancelStartBasicLicense=exports.startBasicLicenseStatus=void 0;var _i18n=__webpack_require__(0);var _reduxActions=__webpack_require__(28);var _es=__webpack_require__(38);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var startBasicLicenseStatus=(0,_reduxActions.createAction)("LICENSE_MANAGEMENT_START_BASIC_LICENSE_STATUS");exports.startBasicLicenseStatus=startBasicLicenseStatus;var cancelStartBasicLicense=(0,_reduxActions.createAction)("LICENSE_MANAGEMENT_CANCEL_START_BASIC_LICENSE");exports.cancelStartBasicLicense=cancelStartBasicLicense;var startBasicLicense=function startBasicLicense(currentLicenseType,ack){return function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(dispatch,getState,_ref2){var licensing,toasts,http,_ref3,acknowledged,basic_was_started,error_message,acknowledge,messages,first;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:licensing=_ref2.licensing,toasts=_ref2.toasts,http=_ref2.http;_context.next=3;return(0,_es.startBasic)(http,ack);case 3:_ref3=_context.sent;acknowledged=_ref3.acknowledged;basic_was_started=_ref3.basic_was_started;error_message=_ref3.error_message;acknowledge=_ref3.acknowledge;if(!acknowledged){_context.next=18;break}if(!basic_was_started){_context.next=15;break}_context.next=12;return licensing.refresh();case 12:window.location.reload();_context.next=16;break;case 15:return _context.abrupt("return",toasts.addDanger(error_message));case 16:_context.next=21;break;case 18:messages=Object.values(acknowledge).slice(1).map((function(item){return item[0]}));first=_i18n.i18n.translate("xpack.licenseMgmt.replacingCurrentLicenseWithBasicLicenseWarningMessage",{defaultMessage:"Some functionality will be lost if you replace your {currentLicenseType} license with a BASIC license. Review the list of features below.",values:{currentLicenseType:currentLicenseType.toUpperCase()}});dispatch(startBasicLicenseStatus({acknowledge:true,messages:[first].concat(_toConsumableArray(messages))}));case 21:case"end":return _context.stop()}}}),_callee)})));return function(_x,_x2,_x3){return _ref.apply(this,arguments)}}()};exports.startBasicLicense=startBasicLicense},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.startLicenseTrial=exports.loadTrialStatus=exports.trialStatusLoaded=void 0;var _reduxActions=__webpack_require__(28);var _es=__webpack_require__(38);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var trialStatusLoaded=(0,_reduxActions.createAction)("LICENSE_MANAGEMENT_TRIAL_STATUS_LOADED");exports.trialStatusLoaded=trialStatusLoaded;var loadTrialStatus=function loadTrialStatus(){return function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(dispatch,getState,_ref2){var http,trialOK;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:http=_ref2.http;_context.next=3;return(0,_es.canStartTrial)(http);case 3:trialOK=_context.sent;dispatch(trialStatusLoaded(trialOK));case 5:case"end":return _context.stop()}}}),_callee)})));return function(_x,_x2,_x3){return _ref.apply(this,arguments)}}()};exports.loadTrialStatus=loadTrialStatus;var startLicenseTrial=function startLicenseTrial(){return function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(dispatch,getState,_ref4){var licensing,toasts,http,_ref5,trial_was_started,error_message;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:licensing=_ref4.licensing,toasts=_ref4.toasts,http=_ref4.http;_context2.next=3;return(0,_es.startTrial)(http);case 3:_ref5=_context2.sent;trial_was_started=_ref5.trial_was_started;error_message=_ref5.error_message;if(!trial_was_started){_context2.next=12;break}_context2.next=9;return licensing.refresh();case 9:window.location.reload();_context2.next=13;break;case 12:return _context2.abrupt("return",toasts.addDanger(error_message));case 13:case"end":return _context2.stop()}}}),_callee2)})));return function(_x4,_x5,_x6){return _ref3.apply(this,arguments)}}()};exports.startLicenseTrial=startLicenseTrial},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.loadPermissions=exports.permissionsError=exports.permissionsSuccess=exports.permissionsLoading=void 0;var _reduxActions=__webpack_require__(28);var _es=__webpack_require__(38);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var permissionsLoading=(0,_reduxActions.createAction)("LICENSE_MANAGEMENT_PERMISSIONS_LOADING");exports.permissionsLoading=permissionsLoading;var permissionsSuccess=(0,_reduxActions.createAction)("LICENSE_MANAGEMENT_PERMISSIONS_SUCCESS");exports.permissionsSuccess=permissionsSuccess;var permissionsError=(0,_reduxActions.createAction)("LICENSE_MANAGEMENT_PERMISSIONS_ERROR");exports.permissionsError=permissionsError;var loadPermissions=function loadPermissions(){return function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(dispatch,getState,_ref2){var http,permissions;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:http=_ref2.http;dispatch(permissionsLoading(true));_context.prev=2;_context.next=5;return(0,_es.getPermissions)(http);case 5:permissions=_context.sent;dispatch(permissionsLoading(false));dispatch(permissionsSuccess(permissions.hasPermission));_context.next=14;break;case 10:_context.prev=10;_context.t0=_context["catch"](2);dispatch(permissionsLoading(false));dispatch(permissionsError(_context.t0));case 14:case"end":return _context.stop()}}}),_callee,null,[[2,10]])})));return function(_x,_x2,_x3){return _ref.apply(this,arguments)}}()};exports.loadPermissions=loadPermissions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TelemetryOptIn",{enumerable:true,get:function get(){return _telemetry_opt_in.TelemetryOptIn}});var _telemetry_opt_in=__webpack_require__(158)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.OptInExampleFlyout=void 0;var React=_interopRequireWildcard(__webpack_require__(17));var _eui=__webpack_require__(18);var _react2=__webpack_require__(19);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var OptInExampleFlyout=function(_React$PureComponent){_inherits(OptInExampleFlyout,_React$PureComponent);function OptInExampleFlyout(){var _getPrototypeOf2;var _this;_classCallCheck(this,OptInExampleFlyout);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(OptInExampleFlyout)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{data:null,isLoading:true,hasPrivilegeToRead:false});return _this}_createClass(OptInExampleFlyout,[{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var fetchExample,clusters;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;fetchExample=this.props.fetchExample;_context.next=4;return fetchExample();case 4:clusters=_context.sent;this.setState({data:Array.isArray(clusters)?clusters:null,isLoading:false,hasPrivilegeToRead:true});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](0);this.setState({isLoading:false,hasPrivilegeToRead:_context.t0.status!==403});case 11:case"end":return _context.stop()}}}),_callee,this,[[0,8]])})));function componentDidMount(){return _componentDidMount.apply(this,arguments)}return componentDidMount}()},{key:"renderBody",value:function renderBody(_ref){var data=_ref.data,isLoading=_ref.isLoading,hasPrivilegeToRead=_ref.hasPrivilegeToRead;if(isLoading){return React.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceAround"},React.createElement(_eui.EuiFlexItem,{grow:false},React.createElement(_eui.EuiLoadingSpinner,{size:"xl"})))}if(!hasPrivilegeToRead){return React.createElement(_eui.EuiCallOut,{title:React.createElement(_react2.FormattedMessage,{id:"telemetry.callout.errorUnprivilegedUserTitle",defaultMessage:"Error displaying cluster statistics"}),color:"danger",iconType:"cross"},React.createElement(_react2.FormattedMessage,{id:"telemetry.callout.errorUnprivilegedUserDescription",defaultMessage:"You do not have access to see unencrypted cluster statistics."}))}if(data===null){return React.createElement(_eui.EuiCallOut,{title:React.createElement(_react2.FormattedMessage,{id:"telemetry.callout.errorLoadingClusterStatisticsTitle",defaultMessage:"Error loading cluster statistics"}),color:"danger",iconType:"cross"},React.createElement(_react2.FormattedMessage,{id:"telemetry.callout.errorLoadingClusterStatisticsDescription",defaultMessage:"An unexpected error occured while attempting to fetch the cluster statistics. This can occur because Elasticsearch failed, Kibana failed, or there is a network error. Check Kibana, then reload the page and try again."}))}return React.createElement(_eui.EuiCodeBlock,{language:"js"},JSON.stringify(data,null,2))}},{key:"render",value:function render(){return React.createElement(_eui.EuiPortal,null,React.createElement(_eui.EuiFlyout,{ownFocus:true,onClose:this.props.onClose,maxWidth:true},React.createElement(_eui.EuiFlyoutHeader,null,React.createElement(_eui.EuiTitle,null,React.createElement("h2",null,React.createElement(_react2.FormattedMessage,{id:"telemetry.callout.clusterStatisticsTitle",defaultMessage:"Cluster statistics"}))),React.createElement(_eui.EuiTextColor,{color:"subdued"},React.createElement(_eui.EuiText,null,React.createElement(_react2.FormattedMessage,{id:"telemetry.callout.clusterStatisticsDescription",defaultMessage:"This is an example of the basic cluster statistics that we'll collect. It includes the number of indices, shards, and nodes. It also includes high-level usage statistics, such as whether monitoring is turned on."})))),React.createElement(_eui.EuiFlyoutBody,null,this.renderBody(this.state))))}}]);return OptInExampleFlyout}(React.PureComponent);exports.OptInExampleFlyout=OptInExampleFlyout},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.TelemetryManagementSection=void 0;var _react=_interopRequireWildcard(__webpack_require__(17));var _eui=__webpack_require__(18);var _react2=__webpack_require__(19);var _i18n=__webpack_require__(0);var _constants=__webpack_require__(35);var _opt_in_example_flyout=__webpack_require__(75);var _public=__webpack_require__(181);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SEARCH_TERMS=["telemetry","usage","data","usage data"];var TelemetryManagementSection=function(_Component){_inherits(TelemetryManagementSection,_Component);function TelemetryManagementSection(){var _getPrototypeOf2;var _this;_classCallCheck(this,TelemetryManagementSection);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TelemetryManagementSection)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{processing:false,showExample:false,queryMatches:null,enabled:_this.props.telemetryService.getIsOptedIn()||false});_defineProperty(_assertThisInitialized(_this),"maybeGetAppliesSettingMessage",(function(){if(!_this.props.showAppliesSettingMessage){return null}return _react.default.createElement(_eui.EuiCallOut,{color:"primary",iconType:"spacesApp",title:_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"telemetry.callout.appliesSettingTitle",defaultMessage:"Changes to this setting apply to {allOfKibanaText} and are saved automatically.",values:{allOfKibanaText:_react.default.createElement("strong",null,_react.default.createElement(_react2.FormattedMessage,{id:"telemetry.callout.appliesSettingTitle.allOfKibanaText",defaultMessage:"all of Kibana"}))}}))})}));_defineProperty(_assertThisInitialized(_this),"renderDescription",(function(){return _react.default.createElement(_react.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"telemetry.telemetryConfigAndLinkDescription",defaultMessage:"Enabling data usage collection helps us manage and improve our products and services. See our {privacyStatementLink} for more details.",values:{privacyStatementLink:_react.default.createElement(_eui.EuiLink,{href:_constants.PRIVACY_STATEMENT_URL,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"telemetry.readOurUsageDataPrivacyStatementLinkText",defaultMessage:"Privacy Statement"}))}})),_react.default.createElement("p",null,_react.default.createElement(_eui.EuiLink,{onClick:_this.toggleExample},_react.default.createElement(_react2.FormattedMessage,{id:"telemetry.seeExampleOfWhatWeCollectLinkText",defaultMessage:"See an example of what we collect"}))))}));_defineProperty(_assertThisInitialized(_this),"toggleOptIn",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _this$props,telemetryService,toasts,newOptInValue;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props=_this.props,telemetryService=_this$props.telemetryService,toasts=_this$props.toasts;newOptInValue=!_this.state.enabled;return _context2.abrupt("return",new Promise((function(resolve,reject){_this.setState({processing:true,enabled:newOptInValue},_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return telemetryService.setOptIn(newOptInValue);case 3:_this.setState({processing:false});toasts.addSuccess(newOptInValue?_i18n.i18n.translate("telemetry.optInSuccessOn",{defaultMessage:"Usage data collection turned on."}):_i18n.i18n.translate("telemetry.optInSuccessOff",{defaultMessage:"Usage data collection turned off."}));resolve(true);_context.next=12;break;case 8:_context.prev=8;_context.t0=_context["catch"](0);_this.setState({processing:false});reject(_context.t0);case 12:case"end":return _context.stop()}}}),_callee,null,[[0,8]])}))))})));case 3:case"end":return _context2.stop()}}}),_callee2)}))));_defineProperty(_assertThisInitialized(_this),"toggleExample",(function(){_this.setState({showExample:!_this.state.showExample})}));return _this}_createClass(TelemetryManagementSection,[{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(nextProps){var _this2=this;var query=nextProps.query;var searchTerm=(query.text||"").toLowerCase();var searchTermMatches=SEARCH_TERMS.some((function(term){return term.indexOf(searchTerm)>=0}));if(searchTermMatches!==this.state.queryMatches){this.setState({queryMatches:searchTermMatches},(function(){_this2.props.onQueryMatchChange(searchTermMatches)}))}}},{key:"render",value:function render(){var telemetryService=this.props.telemetryService;var _this$state=this.state,showExample=_this$state.showExample,queryMatches=_this$state.queryMatches,enabled=_this$state.enabled,processing=_this$state.processing;if(!telemetryService.getCanChangeOptInStatus()){return null}if(queryMatches!==null&&!queryMatches){return null}return _react.default.createElement(_react.Fragment,null,showExample&&_react.default.createElement(_opt_in_example_flyout.OptInExampleFlyout,{fetchExample:telemetryService.fetchExample,onClose:this.toggleExample}),_react.default.createElement(_eui.EuiPanel,{paddingSize:"l"},_react.default.createElement(_eui.EuiForm,null,_react.default.createElement(_eui.EuiText,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"baseline"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"telemetry.usageDataTitle",defaultMessage:"Usage Data"}))))),this.maybeGetAppliesSettingMessage(),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_public.Field,{setting:{type:"boolean",name:"telemetry:enabled",displayName:_i18n.i18n.translate("telemetry.provideUsageStatisticsTitle",{defaultMessage:"Provide usage statistics"}),value:enabled,description:this.renderDescription(),defVal:true,ariaName:_i18n.i18n.translate("telemetry.provideUsageStatisticsAriaName",{defaultMessage:"Provide usage statistics"})},loading:processing,dockLinks:null,toasts:null,handleChange:this.toggleOptIn,enableSaving:this.props.enableSaving}))))}}]);return TelemetryManagementSection}(_react.Component);exports.TelemetryManagementSection=TelemetryManagementSection},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Field",{enumerable:true,get:function get(){return _field.Field}});Object.defineProperty(exports,"getEditableValue",{enumerable:true,get:function get(){return _field.getEditableValue}});var _field=__webpack_require__(191)},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAriaName=getAriaName;var _lodash=__webpack_require__(80);function getAriaName(name){return(0,_lodash.words)(name||"").map((function(word){return word.toLowerCase()})).join(" ")}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_CATEGORY=void 0;var DEFAULT_CATEGORY="general";exports.DEFAULT_CATEGORY=DEFAULT_CATEGORY},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setBreadcrumb=void 0;var setBreadcrumb=function setBreadcrumb(section){return function(dispatch,getState,_ref){var breadcrumbService=_ref.breadcrumbService;breadcrumbService.setBreadcrumbs(section)}};exports.setBreadcrumb=setBreadcrumb},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AppProviders=void 0;var _react=_interopRequireDefault(__webpack_require__(17));var history=_interopRequireWildcard(__webpack_require__(84));var _reactRedux=__webpack_require__(29);var _constants=__webpack_require__(1);var _app_context=__webpack_require__(40);var _store=__webpack_require__(114);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AppProviders=function AppProviders(_ref){var appDependencies=_ref.appDependencies,children=_ref.children;var core=appDependencies.core,plugins=appDependencies.plugins,services=appDependencies.services,initialLicense=appDependencies.store.initialLicense;var http=core.http,toasts=core.notifications.toasts,I18nContext=core.i18n.Context;var thunkServices={history:history.createHashHistory({basename:_constants.BASE_PATH}),toasts:toasts,http:http,telemetry:plugins.telemetry,licensing:plugins.licensing,breadcrumbService:services.breadcrumbService};var initialState={license:initialLicense};var store=(0,_store.licenseManagementStore)(initialState,thunkServices);return _react.default.createElement(I18nContext,null,_react.default.createElement(_reactRedux.Provider,{store:store},_react.default.createElement(_app_context.AppContextProvider,{value:appDependencies},children)))};exports.AppProviders=AppProviders},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"licenseManagementStore",{enumerable:true,get:function get(){return _store.licenseManagementStore}});var _store=__webpack_require__(115)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.licenseManagementStore=void 0;var _redux=__webpack_require__(44);var _reduxThunk=_interopRequireDefault(__webpack_require__(116));var _reducers=__webpack_require__(117);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var licenseManagementStore=function licenseManagementStore(){var initialState=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var services=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var enhancers=[(0,_redux.applyMiddleware)(_reduxThunk.default.withExtraArgument(services))];window.__REDUX_DEVTOOLS_EXTENSION__&&enhancers.push(window.__REDUX_DEVTOOLS_EXTENSION__());return(0,_redux.createStore)(_reducers.licenseManagement,initialState,_redux.compose.apply(void 0,enhancers))};exports.licenseManagementStore=licenseManagementStore},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"licenseManagement",{enumerable:true,get:function get(){return _license_management.licenseManagement}});var _license_management=__webpack_require__(32)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.license=void 0;var _reduxActions=__webpack_require__(28);var _add_license=__webpack_require__(69);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var license=(0,_reduxActions.handleActions)(_defineProperty({},_add_license.addLicense,(function(state,_ref){var payload=_ref.payload;return payload})),{});exports.license=license},,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.uploadStatus=void 0;var _reduxActions=__webpack_require__(28);var _upload_license=__webpack_require__(70);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var uploadStatus=(0,_reduxActions.handleActions)(_defineProperty({},_upload_license.uploadLicenseStatus,(function(state,_ref){var payload=_ref.payload;return payload})),{});exports.uploadStatus=uploadStatus},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.startBasicStatus=void 0;var _reduxActions=__webpack_require__(28);var _start_basic=__webpack_require__(71);var _handleActions;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var startBasicStatus=(0,_reduxActions.handleActions)((_handleActions={},_defineProperty(_handleActions,_start_basic.startBasicLicenseStatus,(function(state,_ref){var payload=_ref.payload;return payload})),_defineProperty(_handleActions,_start_basic.cancelStartBasicLicense,(function(){return{}})),_handleActions),{});exports.startBasicStatus=startBasicStatus},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.uploadErrorMessage=void 0;var _reduxActions=__webpack_require__(28);var _add_error_message=__webpack_require__(48);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var uploadErrorMessage=(0,_reduxActions.handleActions)(_defineProperty({},_add_error_message.addUploadErrorMessage,(function(state,_ref){var payload=_ref.payload;return payload})),"");exports.uploadErrorMessage=uploadErrorMessage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.trialStatus=void 0;var _reduxActions=__webpack_require__(28);var _start_trial=__webpack_require__(72);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var trialStatus=(0,_reduxActions.handleActions)(_defineProperty({},_start_trial.trialStatusLoaded,(function(state,_ref){var payload=_ref.payload;return{canStartTrial:payload}})),{});exports.trialStatus=trialStatus},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.permissions=void 0;var _reduxActions=__webpack_require__(28);var _permissions=__webpack_require__(73);var _handleActions;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var permissions=(0,_reduxActions.handleActions)((_handleActions={},_defineProperty(_handleActions,_permissions.permissionsLoading,(function(state,_ref){var payload=_ref.payload;return{loading:payload}})),_defineProperty(_handleActions,_permissions.permissionsSuccess,(function(state,_ref2){var payload=_ref2.payload;return{hasPermission:payload}})),_defineProperty(_handleActions,_permissions.permissionsError,(function(state,_ref3){var payload=_ref3.payload;return{error:payload}})),_handleActions),{});exports.permissions=permissions},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.App=void 0;var _reactRedux=__webpack_require__(29);var _reactRouterDom=__webpack_require__(20);var _app=__webpack_require__(144);var _license_management=__webpack_require__(32);var _permissions=__webpack_require__(73);var mapStateToProps=function mapStateToProps(state){return{hasPermission:(0,_license_management.getPermission)(state),permissionsLoading:(0,_license_management.isPermissionsLoading)(state),permissionsError:(0,_license_management.getPermissionsError)(state)}};var mapDispatchToProps={loadPermissions:_permissions.loadPermissions};var App=(0,_reactRouterDom.withRouter)((0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_app.App));exports.App=App},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.App=void 0;var _react=_interopRequireWildcard(__webpack_require__(17));var _react2=__webpack_require__(19);var _sections=__webpack_require__(145);var _reactRouterDom=__webpack_require__(20);var _constants=__webpack_require__(1);var _eui=__webpack_require__(18);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var App=function(_Component){_inherits(App,_Component);function App(){_classCallCheck(this,App);return _possibleConstructorReturn(this,_getPrototypeOf(App).apply(this,arguments))}_createClass(App,[{key:"componentDidMount",value:function componentDidMount(){var loadPermissions=this.props.loadPermissions;loadPermissions()}},{key:"render",value:function render(){var _this$props=this.props,hasPermission=_this$props.hasPermission,permissionsLoading=_this$props.permissionsLoading,permissionsError=_this$props.permissionsError,telemetry=_this$props.telemetry;if(permissionsLoading){return _react.default.createElement(_eui.EuiEmptyPrompt,{title:_react.default.createElement(_eui.EuiLoadingSpinner,{size:"xl"}),body:_react.default.createElement(_eui.EuiText,{color:"subdued"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.app.loadingPermissionsDescription",defaultMessage:"Checking permissions…"})),"data-test-subj":"sectionLoading"})}if(permissionsError){return _react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.app.checkingPermissionsErrorMessage",defaultMessage:"Error checking permissions"}),color:"danger",iconType:"alert"},permissionsError.data&&permissionsError.data.message?_react.default.createElement("div",null,permissionsError.data.message):null)}if(!hasPermission){return _react.default.createElement(_eui.EuiPageBody,null,_react.default.createElement(_eui.EuiEmptyPrompt,{iconType:"securityApp",title:_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.app.deniedPermissionTitle",defaultMessage:"You're missing cluster privileges"})),body:_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.app.deniedPermissionDescription",defaultMessage:"To use License Management, you must have {permissionType} privileges.",values:{permissionType:_react.default.createElement("strong",null,_constants.APP_PERMISSION)}}))}))}var withTelemetry=function withTelemetry(Component){return function(props){return _react.default.createElement(Component,_extends({},props,{telemetry:telemetry}))}};return _react.default.createElement(_eui.EuiPageBody,null,_react.default.createElement(_reactRouterDom.Switch,null,_react.default.createElement(_reactRouterDom.Route,{path:"".concat(_constants.BASE_PATH,"upload_license"),component:withTelemetry(_sections.UploadLicense)}),_react.default.createElement(_reactRouterDom.Route,{path:_constants.BASE_PATH,component:withTelemetry(_sections.LicenseDashboard)})))}}]);return App}(_react.Component);exports.App=App},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"LicenseDashboard",{enumerable:true,get:function get(){return _license_dashboard.LicenseDashboard}});Object.defineProperty(exports,"UploadLicense",{enumerable:true,get:function get(){return _upload_license.UploadLicense}});var _license_dashboard=__webpack_require__(146);var _upload_license=__webpack_require__(207)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"LicenseDashboard",{enumerable:true,get:function get(){return _license_dashboard.LicenseDashboard}});var _license_dashboard=__webpack_require__(147)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LicenseDashboard=void 0;var _reactRedux=__webpack_require__(29);var _license_dashboard=__webpack_require__(148);var _set_breadcrumb=__webpack_require__(82);var mapDispatchToProps={setBreadcrumb:_set_breadcrumb.setBreadcrumb};var LicenseDashboard=(0,_reactRedux.connect)(null,mapDispatchToProps)(_license_dashboard.LicenseDashboard);exports.LicenseDashboard=LicenseDashboard},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LicenseDashboard=void 0;var _react=_interopRequireWildcard(__webpack_require__(17));var _license_status=__webpack_require__(149);var _revert_to_basic=__webpack_require__(152);var _start_trial=__webpack_require__(155);var _add_license=__webpack_require__(202);var _request_trial_extension=__webpack_require__(204);var _eui=__webpack_require__(18);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var LicenseDashboard=function LicenseDashboard(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{setBreadcrumb:function setBreadcrumb(){}},setBreadcrumb=_ref.setBreadcrumb,telemetry=_ref.telemetry;(0,_react.useEffect)((function(){setBreadcrumb("dashboard")}));return _react.default.createElement("div",null,_react.default.createElement(_license_status.LicenseStatus,null),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceAround"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_add_license.AddLicense,null)),_react.default.createElement(_start_trial.StartTrial,{telemetry:telemetry}),_react.default.createElement(_request_trial_extension.RequestTrialExtension,null),_react.default.createElement(_revert_to_basic.RevertToBasic,null)))};exports.LicenseDashboard=LicenseDashboard},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"LicenseStatus",{enumerable:true,get:function get(){return _license_status.LicenseStatus}});var _license_status=__webpack_require__(150)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LicenseStatus=void 0;var _license_status=__webpack_require__(151);var _reactRedux=__webpack_require__(29);var _license_management=__webpack_require__(32);var _i18n=__webpack_require__(0);var mapStateToProps=function mapStateToProps(state){var _getLicense=(0,_license_management.getLicense)(state),isActive=_getLicense.isActive,type=_getLicense.type;return{status:isActive?_i18n.i18n.translate("xpack.licenseMgmt.licenseDashboard.licenseStatus.activeLicenseStatusText",{defaultMessage:"Active"}):_i18n.i18n.translate("xpack.licenseMgmt.licenseDashboard.licenseStatus.inactiveLicenseStatusText",{defaultMessage:"Inactive"}),type:type,isExpired:(0,_license_management.isExpired)(state),expiryDate:(0,_license_management.getExpirationDateFormatted)(state)}};var LicenseStatus=(0,_reactRedux.connect)(mapStateToProps)(_license_status.LicenseStatus);exports.LicenseStatus=LicenseStatus},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LicenseStatus=void 0;var _react=_interopRequireWildcard(__webpack_require__(17));var _eui=__webpack_require__(18);var _react2=__webpack_require__(19);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var LicenseStatus=function(_React$PureComponent){_inherits(LicenseStatus,_React$PureComponent);function LicenseStatus(){_classCallCheck(this,LicenseStatus);return _possibleConstructorReturn(this,_getPrototypeOf(LicenseStatus).apply(this,arguments))}_createClass(LicenseStatus,[{key:"render",value:function render(){var _this$props=this.props,isExpired=_this$props.isExpired,status=_this$props.status,type=_this$props.type,expiryDate=_this$props.expiryDate;var typeTitleCase=type.charAt(0).toUpperCase()+type.substr(1).toLowerCase();var icon;var title;var message;if(isExpired){icon=_react.default.createElement(_eui.EuiIcon,{color:"danger",type:"alert"});message=_react.default.createElement(_react.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.licenseStatus.expiredLicenseStatusDescription",defaultMessage:"Your license expired on {expiryDate}",values:{expiryDate:_react.default.createElement("strong",null,expiryDate)}}));title=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.licenseStatus.expiredLicenseStatusTitle",defaultMessage:"Your {typeTitleCase} license has expired",values:{typeTitleCase:typeTitleCase}})}else{icon=_react.default.createElement(_eui.EuiIcon,{color:"success",type:"checkInCircleFilled",size:"l"});message=expiryDate?_react.default.createElement(_react.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.licenseStatus.activeLicenseStatusDescription",defaultMessage:"Your license will expire on {expiryDate}",values:{expiryDate:_react.default.createElement("strong",null,expiryDate)}})):_react.default.createElement(_react.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.licenseStatus.permanentActiveLicenseStatusDescription",defaultMessage:"Your license will never expire."}));title=_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.licenseStatus.activeLicenseStatusTitle",defaultMessage:"Your {typeTitleCase} license is {status}",values:{typeTitleCase:typeTitleCase,status:status.toLowerCase()}})}return _react.default.createElement(_eui.EuiTextAlign,{textAlign:"center"},_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center",alignItems:"center",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},icon),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"m"},_react.default.createElement("h1",{"data-test-subj":"licenseText"},title)))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiText,{"data-test-subj":"licenseSubText"},message))}}]);return LicenseStatus}(_react.default.PureComponent);exports.LicenseStatus=LicenseStatus},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RevertToBasic",{enumerable:true,get:function get(){return _revert_to_basic.RevertToBasic}});var _revert_to_basic=__webpack_require__(153)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RevertToBasic=void 0;var _reactRedux=__webpack_require__(29);var _revert_to_basic=__webpack_require__(154);var _license_management=__webpack_require__(32);var _start_basic=__webpack_require__(71);var mapStateToProps=function mapStateToProps(state){return{shouldShowRevertToBasicLicense:(0,_license_management.shouldShowRevertToBasicLicense)(state),licenseType:(0,_license_management.getLicenseType)(state),needsAcknowledgement:(0,_license_management.startBasicLicenseNeedsAcknowledgement)(state),messages:(0,_license_management.getStartBasicMessages)(state)}};var mapDispatchToProps={startBasicLicense:_start_basic.startBasicLicense,cancelStartBasicLicense:_start_basic.cancelStartBasicLicense};var RevertToBasic=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_revert_to_basic.RevertToBasic);exports.RevertToBasic=RevertToBasic},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RevertToBasic=void 0;var _react=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(18);var _react2=__webpack_require__(19);var _constants=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var RevertToBasic=function(_React$PureComponent){_inherits(RevertToBasic,_React$PureComponent);function RevertToBasic(){var _getPrototypeOf2;var _this;_classCallCheck(this,RevertToBasic);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(RevertToBasic)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"cancel",(function(){_this.props.uploadLicenseStatus({})}));return _this}_createClass(RevertToBasic,[{key:"acknowledgeModal",value:function acknowledgeModal(){var _this$props=this.props,needsAcknowledgement=_this$props.needsAcknowledgement,_this$props$messages=_this$props.messages;_this$props$messages=_this$props$messages===void 0?[]:_this$props$messages;var _this$props$messages2=_toArray(_this$props$messages),firstLine=_this$props$messages2[0],messages=_this$props$messages2.slice(1),startBasicLicense=_this$props.startBasicLicense,cancelStartBasicLicense=_this$props.cancelStartBasicLicense,licenseType=_this$props.licenseType;if(!needsAcknowledgement){return null}return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.revertToBasic.confirmModalTitle",defaultMessage:"Confirm Revert to Basic License"}),onCancel:cancelStartBasicLicense,onConfirm:function onConfirm(){return startBasicLicense(licenseType,true)},cancelButtonText:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.revertToBasic.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.revertToBasic.confirmModal.confirmButtonLabel",defaultMessage:"Confirm"})},_react.default.createElement("div",null,_react.default.createElement(_eui.EuiText,null,firstLine),_react.default.createElement(_eui.EuiText,null,_react.default.createElement("ul",null,messages.map((function(message){return _react.default.createElement("li",{key:message},message)})))))))}},{key:"render",value:function render(){var _this$props2=this.props,licenseType=_this$props2.licenseType,shouldShowRevertToBasicLicense=_this$props2.shouldShowRevertToBasicLicense,startBasicLicense=_this$props2.startBasicLicense;if(!shouldShowRevertToBasicLicense){return null}var description=_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.revertToBasic.revertToFreeFeaturesDescription",defaultMessage:"You’ll revert to our free features and lose access to machine learning, advanced security, and other {platinumLicenseFeaturesLinkText}.",values:{platinumLicenseFeaturesLinkText:_react.default.createElement(_eui.EuiLink,{href:_constants.EXTERNAL_LINKS.SUBSCRIPTIONS,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.revertToBasic.platinumLicenseFeaturesLinkText",defaultMessage:"Platinum features"}))}}));return _react.default.createElement(_eui.EuiFlexItem,null,this.acknowledgeModal(),_react.default.createElement(_eui.EuiCard,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.revertToBasic.acknowledgeModalTitle",defaultMessage:"Revert to Basic license"}),description:description,footer:_react.default.createElement(_eui.EuiButton,{"data-test-subj":"revertToBasicButton",onClick:function onClick(){return startBasicLicense(licenseType)}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.revertToBasic.acknowledgeModal.revertToBasicButtonLabel",defaultMessage:"Revert to Basic"}))}))}}]);return RevertToBasic}(_react.default.PureComponent);exports.RevertToBasic=RevertToBasic},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"StartTrial",{enumerable:true,get:function get(){return _start_trial.StartTrial}});var _start_trial=__webpack_require__(156)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StartTrial=void 0;var _reactRedux=__webpack_require__(29);var _start_trial=__webpack_require__(157);var _start_trial2=__webpack_require__(72);var _license_management=__webpack_require__(32);var mapStateToProps=function mapStateToProps(state){return{shouldShowStartTrial:(0,_license_management.shouldShowStartTrial)(state)}};var mapDispatchToProps={loadTrialStatus:_start_trial2.loadTrialStatus,startLicenseTrial:_start_trial2.startLicenseTrial};var StartTrial=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_start_trial.StartTrial);exports.StartTrial=StartTrial},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.StartTrial=void 0;var _react=_interopRequireWildcard(__webpack_require__(17));var _eui=__webpack_require__(18);var _react2=__webpack_require__(19);var _telemetry_opt_in=__webpack_require__(74);var _constants=__webpack_require__(1);var _app_context=__webpack_require__(40);var _telemetry=__webpack_require__(49);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var StartTrial=function(_Component){_inherits(StartTrial,_Component);function StartTrial(){var _getPrototypeOf2;var _this;_classCallCheck(this,StartTrial);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(StartTrial)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"cancelRef",void 0);_defineProperty(_assertThisInitialized(_this),"confirmRef",void 0);_defineProperty(_assertThisInitialized(_this),"state",{showConfirmation:false,isOptingInToTelemetry:false});_defineProperty(_assertThisInitialized(_this),"onOptInChange",(function(isOptingInToTelemetry){_this.setState({isOptingInToTelemetry:isOptingInToTelemetry})}));_defineProperty(_assertThisInitialized(_this),"onStartLicenseTrial",(function(){var _this$props=_this.props,telemetry=_this$props.telemetry,startLicenseTrial=_this$props.startLicenseTrial;if(_this.state.isOptingInToTelemetry&&telemetry){telemetry.telemetryService.setOptIn(true)}startLicenseTrial()}));_defineProperty(_assertThisInitialized(_this),"cancel",(function(){_this.setState({showConfirmation:false})}));return _this}_createClass(StartTrial,[{key:"UNSAFE_componentWillMount",value:function UNSAFE_componentWillMount(){this.props.loadTrialStatus()}},{key:"acknowledgeModal",value:function acknowledgeModal(docLinks){var _this$state=this.state,showConfirmation=_this$state.showConfirmation,isOptingInToTelemetry=_this$state.isOptingInToTelemetry;var telemetry=this.props.telemetry;if(!showConfirmation){return null}return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiModal,{className:"licManagement__modal",onClose:this.cancel},_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,{"data-test-subj":"confirmModalTitleText"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalTitle",defaultMessage:"Start your free 30-day trial"}))),_react.default.createElement(_eui.EuiModalBody,null,_react.default.createElement(_eui.EuiText,{"data-test-subj":"confirmModalBodyText"},_react.default.createElement("div",null,_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription",defaultMessage:"This trial is for the full set of {platinumLicenseFeaturesLinkText} of the Elastic Stack. You'll get immediate access to:",values:{platinumLicenseFeaturesLinkText:_react.default.createElement(_eui.EuiLink,{href:_constants.EXTERNAL_LINKS.SUBSCRIPTIONS,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription.platinumLicenseFeaturesLinkText",defaultMessage:"Platinum features"}))}})),_react.default.createElement("ul",null,_react.default.createElement("li",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription.mashingLearningFeatureTitle",defaultMessage:"Machine learning"})),_react.default.createElement("li",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription.alertingFeatureTitle",defaultMessage:"Alerting"})),_react.default.createElement("li",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription.graphCapabilitiesFeatureTitle",defaultMessage:"Graph capabilities"})),_react.default.createElement("li",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription.dataBaseConnectivityFeatureTitle",defaultMessage:"{jdbcStandard} and {odbcStandard} connectivity for {sqlDataBase}",values:{jdbcStandard:"JDBC",odbcStandard:"ODBC",sqlDataBase:"SQL"}}))),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription.securityFeaturesConfigurationDescription",defaultMessage:"Advanced security features, such as authentication ({authenticationTypeList}), field- and document-level security, and auditing, require configuration. See the {securityDocumentationLinkText} for instructions.",values:{authenticationTypeList:"AD/LDAP, SAML, PKI, SAML/SSO",securityDocumentationLinkText:_react.default.createElement(_eui.EuiLink,{href:docLinks.security,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription.securityDocumentationLinkText",defaultMessage:"documentation"}))}})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription.termsAndConditionsDescription",defaultMessage:"By starting this trial, you agree that it is subject to these {termsAndConditionsLinkText}.",values:{termsAndConditionsLinkText:_react.default.createElement(_eui.EuiLink,{href:_constants.EXTERNAL_LINKS.TRIAL_LICENSE,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription.termsAndConditionsLinkText",defaultMessage:"terms and conditions"}))}})))))),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},(0,_telemetry.shouldShowTelemetryOptIn)(telemetry)&&_react.default.createElement(_telemetry_opt_in.TelemetryOptIn,{telemetry:telemetry,isStartTrial:true,onOptInChange:this.onOptInChange,isOptingInToTelemetry:isOptingInToTelemetry})),_react.default.createElement(_eui.EuiFlexItem,{grow:false,className:"licManagement__ieFlex"},_react.default.createElement(_eui.EuiFlexGroup,{responsive:false},_react.default.createElement(_eui.EuiFlexItem,{grow:false,className:"licManagement__ieFlex"},_react.default.createElement(_eui.EuiButtonEmpty,{"data-test-subj":"confirmModalCancelButton",onClick:this.cancel,buttonRef:this.cancelRef},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false,className:"licManagement__ieFlex"},_react.default.createElement(_eui.EuiButton,{"data-test-subj":"confirmModalConfirmButton",onClick:this.onStartLicenseTrial,fill:true,buttonRef:this.confirmRef,color:"primary"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModal.startTrialButtonLabel",defaultMessage:"Start my trial"})))))))))}},{key:"render",value:function render(){var _this2=this;var shouldShowStartTrial=this.props.shouldShowStartTrial;if(!shouldShowStartTrial){return null}var description=_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.platinumFeaturesExperienceDescription",defaultMessage:"Experience what machine learning, advanced security, and all our other {platinumLicenseFeaturesLinkText} have to offer.",values:{platinumLicenseFeaturesLinkText:_react.default.createElement(_eui.EuiLink,{href:_constants.EXTERNAL_LINKS.SUBSCRIPTIONS,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.platinumLicenseFeaturesLinkText",defaultMessage:"Platinum features"}))}}));var footer=_react.default.createElement(_eui.EuiButton,{"data-test-subj":"startTrialButton",onClick:function onClick(){return _this2.setState({showConfirmation:true})}},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.startTrialButtonLabel",defaultMessage:"Start trial"}));return _react.default.createElement(_app_context.AppContextConsumer,null,(function(dependencies){return _react.default.createElement(_eui.EuiFlexItem,null,_this2.acknowledgeModal(dependencies.docLinks),_react.default.createElement(_eui.EuiCard,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrialTitle",defaultMessage:"Start a 30-day trial"}),description:description,footer:footer}))}))}}]);return StartTrial}(_react.Component);exports.StartTrial=StartTrial},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.TelemetryOptIn=void 0;var _react=_interopRequireWildcard(__webpack_require__(17));var _eui=__webpack_require__(18);var _react2=__webpack_require__(19);var _telemetry=__webpack_require__(49);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TelemetryOptIn=function(_React$Component){_inherits(TelemetryOptIn,_React$Component);function TelemetryOptIn(){var _getPrototypeOf2;var _this;_classCallCheck(this,TelemetryOptIn);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TelemetryOptIn)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{showMoreTelemetryInfo:false,showExample:false});_defineProperty(_assertThisInitialized(_this),"closeReadMorePopover",(function(){_this.setState({showMoreTelemetryInfo:false})}));_defineProperty(_assertThisInitialized(_this),"onClickReadMore",(function(){var showMoreTelemetryInfo=_this.state.showMoreTelemetryInfo;_this.setState({showMoreTelemetryInfo:!showMoreTelemetryInfo})}));_defineProperty(_assertThisInitialized(_this),"onClickExample",(function(){_this.setState({showExample:true});_this.closeReadMorePopover()}));_defineProperty(_assertThisInitialized(_this),"onChangeOptIn",(function(event){var isOptingInToTelemetry=event.target.checked;var onOptInChange=_this.props.onOptInChange;onOptInChange(isOptingInToTelemetry)}));return _this}_createClass(TelemetryOptIn,[{key:"render",value:function render(){var _this2=this;var _this$state=this.state,showMoreTelemetryInfo=_this$state.showMoreTelemetryInfo,showExample=_this$state.showExample;var _this$props=this.props,isStartTrial=_this$props.isStartTrial,isOptingInToTelemetry=_this$props.isOptingInToTelemetry,telemetry=_this$props.telemetry;var example=null;if(showExample){example=_react.default.createElement(_telemetry.OptInExampleFlyout,{onClose:function onClose(){return _this2.setState({showExample:false})},fetchExample:telemetry.telemetryService.fetchExample})}var toCurrentCustomers;if(!isStartTrial){toCurrentCustomers=_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h4",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.telemetryOptIn.customersHelpSupportDescription",defaultMessage:"Help Elastic support provide better service"}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}))}var readMoreButton=_react.default.createElement(_eui.EuiLink,{onClick:this.onClickReadMore},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.telemetryOptIn.readMoreLinkText",defaultMessage:"Read more"}));var popover=_react.default.createElement(_eui.EuiPopover,{ownFocus:true,id:"readMorePopover",button:readMoreButton,isOpen:showMoreTelemetryInfo,closePopover:this.closeReadMorePopover,className:"eui-AlignBaseline"},_react.default.createElement(_eui.EuiText,{className:"licManagement__narrowText"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.telemetryOptIn.featureUsageWarningMessage",defaultMessage:"This feature periodically sends basic feature usage statistics. This information will not be shared outside of Elastic. See an {exampleLink} or read our {telemetryPrivacyStatementLink}. You can disable this feature any time.",values:{exampleLink:_react.default.createElement(_eui.EuiLink,{onClick:this.onClickExample},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.telemetryOptIn.exampleLinkText",defaultMessage:"example"})),telemetryPrivacyStatementLink:_react.default.createElement(_eui.EuiLink,{href:_telemetry.PRIVACY_STATEMENT_URL,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.telemetryOptIn.telemetryPrivacyStatementLinkText",defaultMessage:"telemetry privacy statement"}))}}))));return _react.default.createElement(_react.Fragment,null,example,toCurrentCustomers,_react.default.createElement(_eui.EuiCheckbox,{label:_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.telemetryOptIn.sendBasicFeatureStatisticsLabel",defaultMessage:"Send basic feature usage statistics to Elastic periodically. {popover}",values:{popover:popover}})),id:"isOptingInToTelemetry",checked:isOptingInToTelemetry,onChange:this.onChangeOptIn}))}}]);return TelemetryOptIn}(_react.default.Component);exports.TelemetryOptIn=TelemetryOptIn},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;Object.defineProperty(exports,"TelemetryPluginStart",{enumerable:true,get:function get(){return _plugin.TelemetryPluginStart}});Object.defineProperty(exports,"TelemetryPluginSetup",{enumerable:true,get:function get(){return _plugin.TelemetryPluginSetup}});var _plugin=__webpack_require__(160);function plugin(initializerContext){return new _plugin.TelemetryPlugin(initializerContext)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TelemetryPlugin=void 0;var _services=__webpack_require__(161);var _telemetry_config=__webpack_require__(171);var _get_telemetry_notify_user_about_optin_default=__webpack_require__(178);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TelemetryPlugin=function(){function TelemetryPlugin(initializerContext){_classCallCheck(this,TelemetryPlugin);_defineProperty(this,"currentKibanaVersion",void 0);_defineProperty(this,"config",void 0);_defineProperty(this,"telemetrySender",void 0);_defineProperty(this,"telemetryNotifications",void 0);_defineProperty(this,"telemetryService",void 0);this.currentKibanaVersion=initializerContext.env.packageInfo.version;this.config=initializerContext.config.get()}_createClass(TelemetryPlugin,[{key:"setup",value:function setup(_ref){var http=_ref.http,notifications=_ref.notifications;var config=this.config;this.telemetryService=new _services.TelemetryService({config:config,http:http,notifications:notifications});this.telemetrySender=new _services.TelemetrySender(this.telemetryService);return{telemetryService:this.telemetryService}}},{key:"start",value:function start(_ref2){var _this=this;var http=_ref2.http,overlays=_ref2.overlays,application=_ref2.application,savedObjects=_ref2.savedObjects;if(!this.telemetryService){throw Error("Telemetry plugin failed to initialize properly.")}this.telemetryNotifications=new _services.TelemetryNotifications({overlays:overlays,telemetryService:this.telemetryService});application.currentAppId$.subscribe(_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var isUnauthenticated,telemetrySavedObject,updatedConfig,telemetryBanner;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isUnauthenticated=_this.getIsUnauthenticated(http);if(!isUnauthenticated){_context.next=3;break}return _context.abrupt("return");case 3:_context.next=5;return _this.getTelemetrySavedObject(savedObjects.client);case 5:telemetrySavedObject=_context.sent;_context.next=8;return _this.updateConfigsBasedOnSavedObjects(telemetrySavedObject);case 8:updatedConfig=_context.sent;_this.telemetryService.config=updatedConfig;telemetryBanner=updatedConfig.banner;_this.maybeStartTelemetryPoller();if(telemetryBanner){_this.maybeShowOptedInNotificationBanner();_this.maybeShowOptInBanner()}case 13:case"end":return _context.stop()}}}),_callee)}))));return{telemetryService:this.telemetryService,telemetryNotifications:this.telemetryNotifications}}},{key:"getIsUnauthenticated",value:function getIsUnauthenticated(http){var anonymousPaths=http.anonymousPaths;return anonymousPaths.isAnonymous(window.location.pathname)}},{key:"maybeStartTelemetryPoller",value:function maybeStartTelemetryPoller(){if(!this.telemetrySender){return}this.telemetrySender.startChecking()}},{key:"maybeShowOptedInNotificationBanner",value:function maybeShowOptedInNotificationBanner(){if(!this.telemetryNotifications){return}var shouldShowBanner=this.telemetryNotifications.shouldShowOptedInNoticeBanner();if(shouldShowBanner){this.telemetryNotifications.renderOptedInNoticeBanner()}}},{key:"maybeShowOptInBanner",value:function maybeShowOptInBanner(){if(!this.telemetryNotifications){return}var shouldShowBanner=this.telemetryNotifications.shouldShowOptInBanner();if(shouldShowBanner){this.telemetryNotifications.renderOptInBanner()}}},{key:"updateConfigsBasedOnSavedObjects",value:function(){var _updateConfigsBasedOnSavedObjects=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(telemetrySavedObject){var configTelemetrySendUsageFrom,configTelemetryOptIn,configTelemetryAllowChangingOptInStatus,currentKibanaVersion,allowChangingOptInStatus,optIn,sendUsageFrom,telemetryNotifyUserAboutOptInDefault;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:configTelemetrySendUsageFrom=this.config.sendUsageFrom;configTelemetryOptIn=this.config.optIn;configTelemetryAllowChangingOptInStatus=this.config.allowChangingOptInStatus;currentKibanaVersion=this.currentKibanaVersion;allowChangingOptInStatus=(0,_telemetry_config.getTelemetryAllowChangingOptInStatus)({configTelemetryAllowChangingOptInStatus:configTelemetryAllowChangingOptInStatus,telemetrySavedObject:telemetrySavedObject});optIn=(0,_telemetry_config.getTelemetryOptIn)({configTelemetryOptIn:configTelemetryOptIn,allowChangingOptInStatus:allowChangingOptInStatus,telemetrySavedObject:telemetrySavedObject,currentKibanaVersion:currentKibanaVersion});sendUsageFrom=(0,_telemetry_config.getTelemetrySendUsageFrom)({configTelemetrySendUsageFrom:configTelemetrySendUsageFrom,telemetrySavedObject:telemetrySavedObject});telemetryNotifyUserAboutOptInDefault=(0,_get_telemetry_notify_user_about_optin_default.getNotifyUserAboutOptInDefault)({telemetrySavedObject:telemetrySavedObject,allowChangingOptInStatus:allowChangingOptInStatus,configTelemetryOptIn:configTelemetryOptIn,telemetryOptedIn:optIn});return _context2.abrupt("return",_objectSpread({},this.config,{optIn:optIn,sendUsageFrom:sendUsageFrom,telemetryNotifyUserAboutOptInDefault:telemetryNotifyUserAboutOptInDefault}));case 9:case"end":return _context2.stop()}}}),_callee2,this)})));function updateConfigsBasedOnSavedObjects(_x){return _updateConfigsBasedOnSavedObjects.apply(this,arguments)}return updateConfigsBasedOnSavedObjects}()},{key:"getTelemetrySavedObject",value:function(){var _getTelemetrySavedObject=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(savedObjectsClient){var _ref4,attributes,errorCode;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return savedObjectsClient.get("telemetry","telemetry");case 3:_ref4=_context3.sent;attributes=_ref4.attributes;return _context3.abrupt("return",attributes);case 8:_context3.prev=8;_context3.t0=_context3["catch"](0);errorCode=_context3.t0[Symbol("SavedObjectsClientErrorCode")];if(!(errorCode==="SavedObjectsClient/notFound")){_context3.next=13;break}return _context3.abrupt("return",null);case 13:if(!(errorCode==="SavedObjectsClient/forbidden")){_context3.next=15;break}return _context3.abrupt("return",false);case 15:throw _context3.t0;case 16:case"end":return _context3.stop()}}}),_callee3,null,[[0,8]])})));function getTelemetrySavedObject(_x2){return _getTelemetrySavedObject.apply(this,arguments)}return getTelemetrySavedObject}()}]);return TelemetryPlugin}();exports.TelemetryPlugin=TelemetryPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TelemetrySender",{enumerable:true,get:function get(){return _telemetry_sender.TelemetrySender}});Object.defineProperty(exports,"TelemetryService",{enumerable:true,get:function get(){return _telemetry_service.TelemetryService}});Object.defineProperty(exports,"TelemetryNotifications",{enumerable:true,get:function get(){return _telemetry_notifications.TelemetryNotifications}});var _telemetry_sender=__webpack_require__(162);var _telemetry_service=__webpack_require__(163);var _telemetry_notifications=__webpack_require__(164)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TelemetrySender=void 0;var _constants=__webpack_require__(35);var _public=__webpack_require__(25);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TelemetrySender=function TelemetrySender(telemetryService){var _this=this;_classCallCheck(this,TelemetrySender);_defineProperty(this,"telemetryService",void 0);_defineProperty(this,"isSending",false);_defineProperty(this,"lastReported",void 0);_defineProperty(this,"storage",void 0);_defineProperty(this,"intervalId",void 0);_defineProperty(this,"saveToBrowser",(function(){_this.storage.set(_constants.LOCALSTORAGE_KEY,{lastReport:_this.lastReported})}));_defineProperty(this,"shouldSendReport",(function(){if(_this.telemetryService.getIsOptedIn()){if(!_this.lastReported){return true}var lastReported=parseInt(_this.lastReported,10);if(isNaN(lastReported)||Date.now()-lastReported>_constants.REPORT_INTERVAL_MS){return true}}return false}));_defineProperty(this,"sendIfDue",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var telemetryUrl,telemetryData,clusters;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(_this.isSending||!_this.shouldSendReport())){_context2.next=2;break}return _context2.abrupt("return");case 2:_this.isSending=true;_context2.prev=3;telemetryUrl=_this.telemetryService.getTelemetryUrl();_context2.next=7;return _this.telemetryService.fetchTelemetry();case 7:telemetryData=_context2.sent;clusters=[].concat(telemetryData);_context2.next=11;return Promise.all(clusters.map(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(cluster){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(telemetryUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:cluster});case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}()));case 11:_this.lastReported="".concat(Date.now());_this.saveToBrowser();_context2.next=17;break;case 15:_context2.prev=15;_context2.t0=_context2["catch"](3);case 17:_context2.prev=17;_this.isSending=false;return _context2.finish(17);case 20:case"end":return _context2.stop()}}}),_callee2,null,[[3,15,17,20]])}))));_defineProperty(this,"startChecking",(function(){if(typeof _this.intervalId==="undefined"){_this.intervalId=window.setInterval(_this.sendIfDue,6e4)}}));this.telemetryService=telemetryService;this.storage=new _public.Storage(window.localStorage);var attributes=this.storage.get(_constants.LOCALSTORAGE_KEY);if(attributes){this.lastReported=attributes.lastReport}};exports.TelemetrySender=TelemetrySender},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TelemetryService=void 0;var _moment=_interopRequireDefault(__webpack_require__(26));var _i18n=__webpack_require__(0);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TelemetryService=function(){function TelemetryService(_ref){var _this=this;var config=_ref.config,http=_ref.http,notifications=_ref.notifications,_ref$reportOptInStatu=_ref.reportOptInStatusChange,reportOptInStatusChange=_ref$reportOptInStatu===void 0?true:_ref$reportOptInStatu;_classCallCheck(this,TelemetryService);_defineProperty(this,"http",void 0);_defineProperty(this,"reportOptInStatusChange",void 0);_defineProperty(this,"notifications",void 0);_defineProperty(this,"defaultConfig",void 0);_defineProperty(this,"updatedConfig",void 0);_defineProperty(this,"getCanChangeOptInStatus",(function(){var allowChangingOptInStatus=_this.config.allowChangingOptInStatus;return allowChangingOptInStatus}));_defineProperty(this,"getOptInStatusUrl",(function(){var telemetryOptInStatusUrl=_this.config.optInStatusUrl;return telemetryOptInStatusUrl}));_defineProperty(this,"getTelemetryUrl",(function(){var telemetryUrl=_this.config.url;return telemetryUrl}));_defineProperty(this,"getUserHasSeenOptedInNotice",(function(){return _this.config.telemetryNotifyUserAboutOptInDefault||false}));_defineProperty(this,"getIsOptedIn",(function(){return _this.isOptedIn}));_defineProperty(this,"fetchExample",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.fetchTelemetry({unencrypted:true});case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}}),_callee)}))));_defineProperty(this,"fetchTelemetry",function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _ref4,_ref4$unencrypted,unencrypted,now,_args2=arguments;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_ref4=_args2.length>0&&_args2[0]!==undefined?_args2[0]:{},_ref4$unencrypted=_ref4.unencrypted,unencrypted=_ref4$unencrypted===void 0?false:_ref4$unencrypted;now=(0,_moment.default)();return _context2.abrupt("return",_this.http.post("/api/telemetry/v2/clusters/_stats",{body:JSON.stringify({unencrypted:unencrypted,timeRange:{min:now.clone().subtract(20,"minutes").toISOString(),max:now.toISOString()}})}));case 3:case"end":return _context2.stop()}}}),_callee2)})));return function(){return _ref3.apply(this,arguments)}}());_defineProperty(this,"setOptIn",function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(optedIn){var canChangeOptInStatus,optInPayload;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:canChangeOptInStatus=_this.getCanChangeOptInStatus();if(canChangeOptInStatus){_context3.next=3;break}return _context3.abrupt("return",false);case 3:_context3.prev=3;_context3.next=6;return _this.http.post("/api/telemetry/v2/optIn",{body:JSON.stringify({enabled:optedIn})});case 6:optInPayload=_context3.sent;if(!_this.reportOptInStatusChange){_context3.next=10;break}_context3.next=10;return _this.reportOptInStatus(optInPayload);case 10:_this.isOptedIn=optedIn;_context3.next=17;break;case 13:_context3.prev=13;_context3.t0=_context3["catch"](3);_this.notifications.toasts.addError(_context3.t0,{title:_i18n.i18n.translate("telemetry.optInErrorToastTitle",{defaultMessage:"Error"}),toastMessage:_i18n.i18n.translate("telemetry.optInErrorToastText",{defaultMessage:"An error occurred while trying to set the usage statistics preference."})});return _context3.abrupt("return",false);case 17:return _context3.abrupt("return",true);case 18:case"end":return _context3.stop()}}}),_callee3,null,[[3,13]])})));return function(_x){return _ref5.apply(this,arguments)}}());_defineProperty(this,"setUserHasSeenNotice",_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return _this.http.put("/api/telemetry/v2/userHasSeenNotice");case 3:_this.userHasSeenOptedInNotice=true;_context4.next=10;break;case 6:_context4.prev=6;_context4.t0=_context4["catch"](0);_this.notifications.toasts.addError(_context4.t0,{title:_i18n.i18n.translate("telemetry.optInNoticeSeenErrorTitle",{defaultMessage:"Error"}),toastMessage:_i18n.i18n.translate("telemetry.optInNoticeSeenErrorToastText",{defaultMessage:"An error occurred dismissing the notice"})});_this.userHasSeenOptedInNotice=false;case 10:case"end":return _context4.stop()}}}),_callee4,null,[[0,6]])}))));_defineProperty(this,"reportOptInStatus",function(){var _ref7=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(optInPayload){var telemetryOptInStatusUrl;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:telemetryOptInStatusUrl=_this.getOptInStatusUrl();_context5.prev=1;_context5.next=4;return fetch(telemetryOptInStatusUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(optInPayload)});case 4:_context5.next=8;break;case 6:_context5.prev=6;_context5.t0=_context5["catch"](1);case 8:case"end":return _context5.stop()}}}),_callee5,null,[[1,6]])})));return function(_x2){return _ref7.apply(this,arguments)}}());this.defaultConfig=config;this.reportOptInStatusChange=reportOptInStatusChange;this.notifications=notifications;this.http=http}_createClass(TelemetryService,[{key:"config",set:function set(updatedConfig){this.updatedConfig=updatedConfig},get:function get(){return _objectSpread({},this.defaultConfig,{},this.updatedConfig)}},{key:"isOptedIn",get:function get(){return this.config.optIn},set:function set(optIn){this.config=_objectSpread({},this.config,{optIn:optIn})}},{key:"userHasSeenOptedInNotice",get:function get(){return this.config.telemetryNotifyUserAboutOptInDefault},set:function set(telemetryNotifyUserAboutOptInDefault){this.config=_objectSpread({},this.config,{telemetryNotifyUserAboutOptInDefault:telemetryNotifyUserAboutOptInDefault})}}]);return TelemetryService}();exports.TelemetryService=TelemetryService},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TelemetryNotifications",{enumerable:true,get:function get(){return _telemetry_notifications.TelemetryNotifications}});var _telemetry_notifications=__webpack_require__(165)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TelemetryNotifications=void 0;var _render_opted_in_notice_banner=__webpack_require__(166);var _render_opt_in_banner=__webpack_require__(168);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var TelemetryNotifications=function TelemetryNotifications(_ref){var _this=this;var overlays=_ref.overlays,telemetryService=_ref.telemetryService;_classCallCheck(this,TelemetryNotifications);_defineProperty(this,"overlays",void 0);_defineProperty(this,"telemetryService",void 0);_defineProperty(this,"optedInNoticeBannerId",void 0);_defineProperty(this,"optInBannerId",void 0);_defineProperty(this,"shouldShowOptedInNoticeBanner",(function(){var userHasSeenOptedInNotice=_this.telemetryService.getUserHasSeenOptedInNotice();var bannerOnScreen=typeof _this.optedInNoticeBannerId!=="undefined";return!bannerOnScreen&&userHasSeenOptedInNotice}));_defineProperty(this,"renderOptedInNoticeBanner",(function(){var bannerId=(0,_render_opted_in_notice_banner.renderOptedInNoticeBanner)({onSeen:_this.setOptedInNoticeSeen,overlays:_this.overlays});_this.optedInNoticeBannerId=bannerId}));_defineProperty(this,"shouldShowOptInBanner",(function(){var isOptedIn=_this.telemetryService.getIsOptedIn();var bannerOnScreen=typeof _this.optInBannerId!=="undefined";return!bannerOnScreen&&isOptedIn===null}));_defineProperty(this,"renderOptInBanner",(function(){var bannerId=(0,_render_opt_in_banner.renderOptInBanner)({setOptIn:_this.onSetOptInClick,overlays:_this.overlays});_this.optInBannerId=bannerId}));_defineProperty(this,"onSetOptInClick",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(isOptIn){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(_this.optInBannerId){_this.overlays.banners.remove(_this.optInBannerId);_this.optInBannerId=undefined}_context.next=3;return _this.telemetryService.setOptIn(isOptIn);case 3:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}());_defineProperty(this,"setOptedInNoticeSeen",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(_this.optedInNoticeBannerId){_this.overlays.banners.remove(_this.optedInNoticeBannerId);_this.optedInNoticeBannerId=undefined}_context2.next=3;return _this.telemetryService.setUserHasSeenNotice();case 3:case"end":return _context2.stop()}}}),_callee2)}))));this.telemetryService=telemetryService;this.overlays=overlays};exports.TelemetryNotifications=TelemetryNotifications},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renderOptedInNoticeBanner=renderOptedInNoticeBanner;var _react=_interopRequireDefault(__webpack_require__(17));var _opted_in_notice_banner=__webpack_require__(167);var _public=__webpack_require__(22);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function renderOptedInNoticeBanner(_ref){var onSeen=_ref.onSeen,overlays=_ref.overlays;var mount=(0,_public.toMountPoint)(_react.default.createElement(_opted_in_notice_banner.OptedInNoticeBanner,{onSeenBanner:onSeen}));var bannerId=overlays.banners.add(mount,1e4);return bannerId}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.OptedInNoticeBanner=void 0;var React=_interopRequireWildcard(__webpack_require__(17));var _eui=__webpack_require__(18);var _react2=__webpack_require__(19);var _i18n=__webpack_require__(0);var _constants=__webpack_require__(35);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var OptedInNoticeBanner=function(_React$PureComponent){_inherits(OptedInNoticeBanner,_React$PureComponent);function OptedInNoticeBanner(){_classCallCheck(this,OptedInNoticeBanner);return _possibleConstructorReturn(this,_getPrototypeOf(OptedInNoticeBanner).apply(this,arguments))}_createClass(OptedInNoticeBanner,[{key:"render",value:function render(){var onSeenBanner=this.props.onSeenBanner;var bannerTitle=_i18n.i18n.translate("telemetry.telemetryOptedInNoticeTitle",{defaultMessage:"Help us improve the Elastic Stack"});return React.createElement(_eui.EuiCallOut,{title:bannerTitle},React.createElement(_react2.FormattedMessage,{id:"telemetry.telemetryOptedInNoticeDescription",defaultMessage:"To learn about how usage data helps us manage and improve our products and services, see our {privacyStatementLink}. To stop collection, {disableLink}.",values:{privacyStatementLink:React.createElement(_eui.EuiLink,{onClick:onSeenBanner,href:_constants.PRIVACY_STATEMENT_URL,target:"_blank",rel:"noopener"},React.createElement(_react2.FormattedMessage,{id:"telemetry.telemetryOptedInPrivacyStatement",defaultMessage:"Privacy Statement"})),disableLink:React.createElement(_eui.EuiLink,{href:_constants.PATH_TO_ADVANCED_SETTINGS,onClick:onSeenBanner},React.createElement(_react2.FormattedMessage,{id:"telemetry.telemetryOptedInDisableUsage",defaultMessage:"disable usage data here"}))}}),React.createElement(_eui.EuiSpacer,{size:"s"}),React.createElement(_eui.EuiButton,{size:"s",onClick:onSeenBanner},React.createElement(_react2.FormattedMessage,{id:"telemetry.telemetryOptedInDismissMessage",defaultMessage:"Dismiss"})))}}]);return OptedInNoticeBanner}(React.PureComponent);exports.OptedInNoticeBanner=OptedInNoticeBanner},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renderOptInBanner=renderOptInBanner;var _react=_interopRequireDefault(__webpack_require__(17));var _opt_in_banner=__webpack_require__(169);var _public=__webpack_require__(22);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function renderOptInBanner(_ref){var setOptIn=_ref.setOptIn,overlays=_ref.overlays;var mount=(0,_public.toMountPoint)(_react.default.createElement(_opt_in_banner.OptInBanner,{onChangeOptInClick:setOptIn}));var bannerId=overlays.banners.add(mount,1e4);return bannerId}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.OptInBanner=void 0;var React=_interopRequireWildcard(__webpack_require__(17));var _eui=__webpack_require__(18);var _react2=__webpack_require__(19);var _opt_in_message=__webpack_require__(170);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var OptInBanner=function(_React$PureComponent){_inherits(OptInBanner,_React$PureComponent);function OptInBanner(){_classCallCheck(this,OptInBanner);return _possibleConstructorReturn(this,_getPrototypeOf(OptInBanner).apply(this,arguments))}_createClass(OptInBanner,[{key:"render",value:function render(){var onChangeOptInClick=this.props.onChangeOptInClick;var title=React.createElement(_react2.FormattedMessage,{id:"telemetry.welcomeBanner.title",defaultMessage:"Help us improve the Elastic Stack"});return React.createElement(_eui.EuiCallOut,{iconType:"questionInCircle",title:title},React.createElement(_opt_in_message.OptInMessage,null),React.createElement(_eui.EuiSpacer,{size:"s"}),React.createElement(_eui.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},React.createElement(_eui.EuiFlexItem,{grow:false},React.createElement(_eui.EuiButton,{size:"s","data-test-subj":"enable",onClick:function onClick(){return onChangeOptInClick(true)}},React.createElement(_react2.FormattedMessage,{id:"telemetry.welcomeBanner.enableButtonLabel",defaultMessage:"Enable"}))),React.createElement(_eui.EuiFlexItem,{grow:false},React.createElement(_eui.EuiButton,{size:"s","data-test-subj":"disable",onClick:function onClick(){return onChangeOptInClick(false)}},React.createElement(_react2.FormattedMessage,{id:"telemetry.welcomeBanner.disableButtonLabel",defaultMessage:"Disable"})))))}}]);return OptInBanner}(React.PureComponent);exports.OptInBanner=OptInBanner},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.OptInMessage=void 0;var React=_interopRequireWildcard(__webpack_require__(17));var _eui=__webpack_require__(18);var _react2=__webpack_require__(19);var _constants=__webpack_require__(35);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var OptInMessage=function(_React$PureComponent){_inherits(OptInMessage,_React$PureComponent);function OptInMessage(){_classCallCheck(this,OptInMessage);return _possibleConstructorReturn(this,_getPrototypeOf(OptInMessage).apply(this,arguments))}_createClass(OptInMessage,[{key:"render",value:function render(){return React.createElement(React.Fragment,null,React.createElement(_react2.FormattedMessage,{id:"telemetry.telemetryBannerDescription",defaultMessage:"Want to help us improve the Elastic Stack? Data usage collection is currently disabled. Enabling data usage collection helps us manage and improve our products and services. See our {privacyStatementLink} for more details.",values:{privacyStatementLink:React.createElement(_eui.EuiLink,{href:_constants.PRIVACY_STATEMENT_URL,target:"_blank",rel:"noopener"},React.createElement(_react2.FormattedMessage,{id:"telemetry.welcomeBanner.telemetryConfigDetailsDescription.telemetryPrivacyStatementLinkText",defaultMessage:"Privacy Statement"}))}}))}}]);return OptInMessage}(React.PureComponent);exports.OptInMessage=OptInMessage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getTelemetryOptIn",{enumerable:true,get:function get(){return _get_telemetry_opt_in.getTelemetryOptIn}});Object.defineProperty(exports,"getTelemetrySendUsageFrom",{enumerable:true,get:function get(){return _get_telemetry_send_usage_from.getTelemetrySendUsageFrom}});Object.defineProperty(exports,"getTelemetryAllowChangingOptInStatus",{enumerable:true,get:function get(){return _get_telemetry_allow_changing_opt_in_status.getTelemetryAllowChangingOptInStatus}});Object.defineProperty(exports,"getTelemetryFailureDetails",{enumerable:true,get:function get(){return _get_telemetry_failure_details.getTelemetryFailureDetails}});Object.defineProperty(exports,"TelemetryFailureDetails",{enumerable:true,get:function get(){return _get_telemetry_failure_details.TelemetryFailureDetails}});var _get_telemetry_opt_in=__webpack_require__(172);var _get_telemetry_send_usage_from=__webpack_require__(175);var _get_telemetry_allow_changing_opt_in_status=__webpack_require__(176);var _get_telemetry_failure_details=__webpack_require__(177)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTelemetryOptIn=void 0;var _semver=_interopRequireDefault(__webpack_require__(173));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getTelemetryOptIn=function getTelemetryOptIn(_ref){var telemetrySavedObject=_ref.telemetrySavedObject,currentKibanaVersion=_ref.currentKibanaVersion,allowChangingOptInStatus=_ref.allowChangingOptInStatus,configTelemetryOptIn=_ref.configTelemetryOptIn;if(typeof configTelemetryOptIn==="boolean"&&!allowChangingOptInStatus){return configTelemetryOptIn}if(telemetrySavedObject===false){return false}if(telemetrySavedObject===null||typeof telemetrySavedObject.enabled!=="boolean"){return configTelemetryOptIn}var savedOptIn=telemetrySavedObject.enabled;if(savedOptIn===true)return savedOptIn;var lastKibanaVersion=telemetrySavedObject.lastVersionChecked;if(typeof lastKibanaVersion!=="string")return null;if(lastKibanaVersion===currentKibanaVersion)return savedOptIn;var lastSemver=parseSemver(lastKibanaVersion);var currentSemver=parseSemver(currentKibanaVersion);if(lastSemver==null||currentSemver==null)return null;if(currentSemver.major>lastSemver.major)return null;if(currentSemver.major===lastSemver.major){if(currentSemver.minor>lastSemver.minor)return null}return savedOptIn};exports.getTelemetryOptIn=getTelemetryOptIn;function parseSemver(version){try{return _semver.default.parse(version)}catch(err){return null}}},,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTelemetrySendUsageFrom=getTelemetrySendUsageFrom;function getTelemetrySendUsageFrom(_ref){var telemetrySavedObject=_ref.telemetrySavedObject,configTelemetrySendUsageFrom=_ref.configTelemetrySendUsageFrom;if(!telemetrySavedObject){return configTelemetrySendUsageFrom}if(typeof telemetrySavedObject.sendUsageFrom==="undefined"){return configTelemetrySendUsageFrom}return telemetrySavedObject.sendUsageFrom}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTelemetryAllowChangingOptInStatus=getTelemetryAllowChangingOptInStatus;function getTelemetryAllowChangingOptInStatus(_ref){var telemetrySavedObject=_ref.telemetrySavedObject,configTelemetryAllowChangingOptInStatus=_ref.configTelemetryAllowChangingOptInStatus;if(!telemetrySavedObject){return configTelemetryAllowChangingOptInStatus}if(typeof telemetrySavedObject.allowChangingOptInStatus==="undefined"){return configTelemetryAllowChangingOptInStatus}return telemetrySavedObject.allowChangingOptInStatus}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTelemetryFailureDetails=getTelemetryFailureDetails;function getTelemetryFailureDetails(_ref){var telemetrySavedObject=_ref.telemetrySavedObject;if(!telemetrySavedObject){return{failureVersion:undefined,failureCount:0}}var reportFailureCount=telemetrySavedObject.reportFailureCount,reportFailureVersion=telemetrySavedObject.reportFailureVersion;return{failureCount:typeof reportFailureCount==="number"?reportFailureCount:0,failureVersion:typeof reportFailureVersion==="string"?reportFailureVersion:undefined}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getNotifyUserAboutOptInDefault=getNotifyUserAboutOptInDefault;function getNotifyUserAboutOptInDefault(_ref){var allowChangingOptInStatus=_ref.allowChangingOptInStatus,telemetrySavedObject=_ref.telemetrySavedObject,telemetryOptedIn=_ref.telemetryOptedIn,configTelemetryOptIn=_ref.configTelemetryOptIn;if(allowChangingOptInStatus===false){return false}if(telemetrySavedObject&&telemetrySavedObject.userHasSeenNotice===true){return false}return telemetryOptedIn===true&&configTelemetryOptIn===true}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"OptInExampleFlyout",{enumerable:true,get:function get(){return _opt_in_example_flyout.OptInExampleFlyout}});Object.defineProperty(exports,"telemetryManagementSectionWrapper",{enumerable:true,get:function get(){return _telemetry_management_section_wrapper.telemetryManagementSectionWrapper}});Object.defineProperty(exports,"TelemetryManagementSection",{enumerable:true,get:function get(){return _telemetry_management_section.TelemetryManagementSection}});var _opt_in_example_flyout=__webpack_require__(75);var _telemetry_management_section_wrapper=__webpack_require__(180);var _telemetry_management_section=__webpack_require__(76)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.telemetryManagementSectionWrapper=telemetryManagementSectionWrapper;var _react=_interopRequireDefault(__webpack_require__(17));var _telemetry_management_section=__webpack_require__(76);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function telemetryManagementSectionWrapper(telemetryService){var TelemetryManagementSectionWrapper=function TelemetryManagementSectionWrapper(props){return _react.default.createElement(_telemetry_management_section.TelemetryManagementSection,_extends({showAppliesSettingMessage:true,telemetryService:telemetryService},props))};return TelemetryManagementSectionWrapper}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;Object.defineProperty(exports,"AdvancedSettingsSetup",{enumerable:true,get:function get(){return _types.AdvancedSettingsSetup}});Object.defineProperty(exports,"AdvancedSettingsStart",{enumerable:true,get:function get(){return _types.AdvancedSettingsStart}});Object.defineProperty(exports,"ComponentRegistry",{enumerable:true,get:function get(){return _component_registry.ComponentRegistry}});Object.defineProperty(exports,"Field",{enumerable:true,get:function get(){return _field.Field}});var _plugin=__webpack_require__(182);var _types=__webpack_require__(190);var _component_registry=__webpack_require__(50);var _field=__webpack_require__(77);function plugin(initializerContext){return new _plugin.AdvancedSettingsPlugin}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AdvancedSettingsPlugin=void 0;var _i18n=__webpack_require__(0);var _component_registry=__webpack_require__(50);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var component=new _component_registry.ComponentRegistry;var title=_i18n.i18n.translate("advancedSettings.advancedSettingsLabel",{defaultMessage:"Advanced Settings"});var AdvancedSettingsPlugin=function(){function AdvancedSettingsPlugin(){_classCallCheck(this,AdvancedSettingsPlugin);_defineProperty(this,"managementApp",void 0)}_createClass(AdvancedSettingsPlugin,[{key:"setup",value:function setup(core,_ref){var management=_ref.management;var kibanaSection=management.sections.getSection("kibana");if(!kibanaSection){throw new Error("`kibana` management section not found.")}this.managementApp=kibanaSection.registerApp({id:"settings",title:title,order:20,mount:function mount(params){return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _ref2,mountManagementSection;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return __webpack_require__.e(3).then(__webpack_require__.t.bind(null,210,7));case 2:_ref2=_context.sent;mountManagementSection=_ref2.mountManagementSection;return _context.abrupt("return",mountManagementSection(core.getStartServices,params,component.start));case 5:case"end":return _context.stop()}}}),_callee)})))()}});return{component:component.setup}}},{key:"start",value:function start(core){if(!core.application.capabilities.management.kibana.settings){this.managementApp.disable()}return{component:component.start}}}]);return AdvancedSettingsPlugin}();exports.AdvancedSettingsPlugin=AdvancedSettingsPlugin},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ComponentRegistry=void 0;var _page_title=__webpack_require__(184);var _page_subtitle=__webpack_require__(186);var _page_footer=__webpack_require__(188);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var componentType={PAGE_TITLE_COMPONENT:"advanced_settings_page_title",PAGE_SUBTITLE_COMPONENT:"advanced_settings_page_subtitle",PAGE_FOOTER_COMPONENT:"advanced_settings_page_footer"};var ComponentRegistry=function(){function ComponentRegistry(){_classCallCheck(this,ComponentRegistry);_defineProperty(this,"registry",{});_defineProperty(this,"setup",{componentType:ComponentRegistry.componentType,register:this.register.bind(this)});_defineProperty(this,"start",{componentType:ComponentRegistry.componentType,get:this.get.bind(this)})}_createClass(ComponentRegistry,[{key:"register",value:function register(id,component){var allowOverride=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!allowOverride&&id in this.registry){throw new Error("Component with id ".concat(id," is already registered."))}if(!component.displayName){component.displayName=id}this.registry[id]=component}},{key:"get",value:function get(id){return this.registry[id]||ComponentRegistry.defaultRegistry[id]}}]);return ComponentRegistry}();exports.ComponentRegistry=ComponentRegistry;_defineProperty(ComponentRegistry,"componentType",componentType);_defineProperty(ComponentRegistry,"defaultRegistry",{advanced_settings_page_title:_page_title.PageTitle,advanced_settings_page_subtitle:_page_subtitle.PageSubtitle,advanced_settings_page_footer:_page_footer.PageFooter})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PageTitle",{enumerable:true,get:function get(){return _page_title.PageTitle}});var _page_title=__webpack_require__(185)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PageTitle=void 0;var _react=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(18);var _react2=__webpack_require__(19);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PageTitle=function PageTitle(){return _react.default.createElement(_eui.EuiText,null,_react.default.createElement("h1",{"data-test-subj":"managementSettingsTitle"},_react.default.createElement(_react2.FormattedMessage,{id:"advancedSettings.pageTitle",defaultMessage:"Settings"})))};exports.PageTitle=PageTitle},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PageSubtitle",{enumerable:true,get:function get(){return _page_subtitle.PageSubtitle}});var _page_subtitle=__webpack_require__(187)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PageSubtitle=void 0;var PageSubtitle=function PageSubtitle(){return null};exports.PageSubtitle=PageSubtitle},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PageFooter",{enumerable:true,get:function get(){return _page_footer.PageFooter}});var _page_footer=__webpack_require__(189)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PageFooter=void 0;var PageFooter=function PageFooter(){return null};exports.PageFooter=PageFooter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ComponentRegistry",{enumerable:true,get:function get(){return _component_registry.ComponentRegistry}});var _component_registry=__webpack_require__(50)},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.Field=exports.getEditableValue=void 0;var _react=_interopRequireWildcard(__webpack_require__(17));var _classnames=_interopRequireDefault(__webpack_require__(78));__webpack_require__(192);__webpack_require__(193);var _eui=__webpack_require__(18);var _i18n=__webpack_require__(0);var _react2=__webpack_require__(19);var _lib=__webpack_require__(39);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getEditableValue=function getEditableValue(type,value,defVal){var val=value===null||value===undefined?defVal:value;switch(type){case"array":return val.join(", ");case"boolean":return!!val;case"number":return Number(val);case"image":return val;default:return val||""}};exports.getEditableValue=getEditableValue;var Field=function(_PureComponent){_inherits(Field,_PureComponent);function Field(){var _getPrototypeOf2;var _this;_classCallCheck(this,Field);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Field)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"changeImageForm",_react.default.createRef());_defineProperty(_assertThisInitialized(_this),"handleChange",(function(unsavedChanges){_this.props.handleChange(_this.props.setting.name,unsavedChanges)}));_defineProperty(_assertThisInitialized(_this),"resetField",(function(){var _this$props$setting=_this.props.setting,type=_this$props$setting.type,defVal=_this$props$setting.defVal;if(type==="image"){_this.cancelChangeImage();return _this.handleChange({value:getEditableValue(type,defVal),changeImage:true})}return _this.handleChange({value:getEditableValue(type,defVal)})}));_defineProperty(_assertThisInitialized(_this),"onCodeEditorChange",(function(value){var _this$props$setting2=_this.props.setting,defVal=_this$props$setting2.defVal,type=_this$props$setting2.type;var newUnsavedValue;var errorParams={};switch(type){case"json":var isJsonArray=Array.isArray(JSON.parse(defVal||"{}"));newUnsavedValue=value.trim()||(isJsonArray?"[]":"{}");try{JSON.parse(newUnsavedValue)}catch(e){errorParams={error:_i18n.i18n.translate("advancedSettings.field.codeEditorSyntaxErrorMessage",{defaultMessage:"Invalid JSON syntax"}),isInvalid:true}}break;default:newUnsavedValue=value}_this.handleChange(_objectSpread({value:newUnsavedValue},errorParams))}));_defineProperty(_assertThisInitialized(_this),"onFieldChangeSwitch",(function(e){return _this.onFieldChange(e.target.checked)}));_defineProperty(_assertThisInitialized(_this),"onFieldChangeEvent",(function(e){return _this.onFieldChange(e.target.value)}));_defineProperty(_assertThisInitialized(_this),"onFieldChange",(function(targetValue){var _ref;var _this$props$setting3=_this.props.setting,type=_this$props$setting3.type,validation=_this$props$setting3.validation,value=_this$props$setting3.value,defVal=_this$props$setting3.defVal;var newUnsavedValue;switch(type){case"boolean":var unsavedChanges=_this.props.unsavedChanges;var currentValue=unsavedChanges?unsavedChanges.value:getEditableValue(type,value,defVal);newUnsavedValue=!currentValue;break;case"number":newUnsavedValue=Number(targetValue);break;default:newUnsavedValue=targetValue}var errorParams={};if((_ref=validation)===null||_ref===void 0?void 0:_ref.regex){if(!validation.regex.test(newUnsavedValue.toString())){errorParams={error:validation.message,isInvalid:true}}}_this.handleChange(_objectSpread({value:newUnsavedValue},errorParams))}));_defineProperty(_assertThisInitialized(_this),"onImageChange",function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(files){var file,_ref3,maxSize,base64Image,errorParams,isInvalid;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(files==null)){_context.next=2;break}return _context.abrupt("return");case 2:if(files.length){_context.next=5;break}_this.setState({unsavedValue:null});return _context.abrupt("return");case 5:file=files[0];_ref3=_this.props.setting.validation,maxSize=_ref3.maxSize;_context.prev=7;base64Image="";if(!(file instanceof File)){_context.next=13;break}_context.next=12;return _this.getImageAsBase64(file);case 12:base64Image=_context.sent;case 13:errorParams={};isInvalid=!!((maxSize===null||maxSize===void 0?void 0:maxSize.length)&&base64Image.length>maxSize.length);if(isInvalid){errorParams={isInvalid:isInvalid,error:_i18n.i18n.translate("advancedSettings.field.imageTooLargeErrorMessage",{defaultMessage:"Image is too large, maximum size is {maxSizeDescription}",values:{maxSizeDescription:maxSize.description}})}}_this.handleChange(_objectSpread({changeImage:true,value:base64Image},errorParams));_context.next=23;break;case 19:_context.prev=19;_context.t0=_context["catch"](7);_this.props.toasts.addDanger(_i18n.i18n.translate("advancedSettings.field.imageChangeErrorMessage",{defaultMessage:"Image could not be saved"}));_this.cancelChangeImage();case 23:case"end":return _context.stop()}}}),_callee,null,[[7,19]])})));return function(_x){return _ref2.apply(this,arguments)}}());_defineProperty(_assertThisInitialized(_this),"changeImage",(function(){_this.handleChange({value:null,changeImage:true})}));_defineProperty(_assertThisInitialized(_this),"cancelChangeImage",(function(){var _this$changeImageForm;if((_this$changeImageForm=_this.changeImageForm.current)===null||_this$changeImageForm===void 0?void 0:_this$changeImageForm.fileInput){_this.changeImageForm.current.fileInput.value="";_this.changeImageForm.current.handleChange()}if(_this.props.clearChange){_this.props.clearChange(_this.props.setting.name)}}));return _this}_createClass(Field,[{key:"getDisplayedDefaultValue",value:function getDisplayedDefaultValue(type,defVal){var optionLabels=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(defVal===undefined||defVal===null||defVal===""){return"null"}switch(type){case"array":return defVal.join(", ");case"select":return optionLabels.hasOwnProperty(String(defVal))?optionLabels[String(defVal)]:String(defVal);default:return String(defVal)}}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _prevProps$unsavedCha,_this$props$unsavedCh;if(prevProps.setting.type==="image"&&((_prevProps$unsavedCha=prevProps.unsavedChanges)===null||_prevProps$unsavedCha===void 0?void 0:_prevProps$unsavedCha.value)&&!((_this$props$unsavedCh=this.props.unsavedChanges)===null||_this$props$unsavedCh===void 0?void 0:_this$props$unsavedCh.value)){this.cancelChangeImage()}}},{key:"getImageAsBase64",value:function(){var _getImageAsBase=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(file){var reader;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:reader=new FileReader;reader.readAsDataURL(file);return _context2.abrupt("return",new Promise((function(resolve,reject){reader.onload=function(){resolve(reader.result||undefined)};reader.onerror=function(err){reject(err)}})));case 3:case"end":return _context2.stop()}}}),_callee2)})));function getImageAsBase64(_x2){return _getImageAsBase.apply(this,arguments)}return getImageAsBase64}()},{key:"renderField",value:function renderField(id,setting){var _this$props=this.props,enableSaving=_this$props.enableSaving,unsavedChanges=_this$props.unsavedChanges,loading=_this$props.loading;var name=setting.name,value=setting.value,type=setting.type,options=setting.options,_setting$optionLabels=setting.optionLabels,optionLabels=_setting$optionLabels===void 0?{}:_setting$optionLabels,isOverridden=setting.isOverridden,defVal=setting.defVal,ariaName=setting.ariaName;var a11yProps=unsavedChanges?{"aria-label":ariaName,"aria-describedby":id}:{"aria-label":ariaName};var currentValue=unsavedChanges?unsavedChanges.value:getEditableValue(type,value,defVal);switch(type){case"boolean":return _react.default.createElement(_eui.EuiSwitch,_extends({label:!!currentValue?_react.default.createElement(_react2.FormattedMessage,{id:"advancedSettings.field.onLabel",defaultMessage:"On"}):_react.default.createElement(_react2.FormattedMessage,{id:"advancedSettings.field.offLabel",defaultMessage:"Off"}),checked:!!currentValue,onChange:this.onFieldChangeSwitch,disabled:loading||isOverridden||!enableSaving,"data-test-subj":"advancedSetting-editField-".concat(name)},a11yProps));case"markdown":case"json":return _react.default.createElement("div",{"data-test-subj":"advancedSetting-editField-".concat(name)},_react.default.createElement(_eui.EuiCodeEditor,_extends({},a11yProps,{mode:type,theme:"textmate",value:currentValue,onChange:this.onCodeEditorChange,width:"100%",height:"auto",minLines:6,maxLines:30,isReadOnly:isOverridden||!enableSaving,setOptions:{showLineNumbers:false,tabSize:2},editorProps:{$blockScrolling:Infinity},showGutter:false})));case"image":var changeImage=unsavedChanges===null||unsavedChanges===void 0?void 0:unsavedChanges.changeImage;if(!(0,_lib.isDefaultValue)(setting)&&!changeImage){return _react.default.createElement(_eui.EuiImage,_extends({},a11yProps,{allowFullScreen:true,url:value,alt:name}))}else{return _react.default.createElement(_eui.EuiFilePicker,{disabled:loading||isOverridden||!enableSaving,onChange:this.onImageChange,accept:".jpg,.jpeg,.png",ref:this.changeImageForm,fullWidth:true,"data-test-subj":"advancedSetting-editField-".concat(name)})}case"select":return _react.default.createElement(_eui.EuiSelect,_extends({},a11yProps,{value:currentValue,options:options.map((function(option){return{text:optionLabels.hasOwnProperty(option)?optionLabels[option]:option,value:option}})),onChange:this.onFieldChangeEvent,isLoading:loading,disabled:loading||isOverridden||!enableSaving,fullWidth:true,"data-test-subj":"advancedSetting-editField-".concat(name)}));case"number":return _react.default.createElement(_eui.EuiFieldNumber,_extends({},a11yProps,{value:currentValue,onChange:this.onFieldChangeEvent,isLoading:loading,disabled:loading||isOverridden||!enableSaving,fullWidth:true,"data-test-subj":"advancedSetting-editField-".concat(name)}));default:return _react.default.createElement(_eui.EuiFieldText,_extends({},a11yProps,{value:currentValue,onChange:this.onFieldChangeEvent,isLoading:loading,disabled:loading||isOverridden||!enableSaving,fullWidth:true,"data-test-subj":"advancedSetting-editField-".concat(name)}))}}},{key:"renderLabel",value:function renderLabel(setting){return setting.name}},{key:"renderHelpText",value:function renderHelpText(setting){if(setting.isOverridden){return _react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement(_react2.FormattedMessage,{id:"advancedSettings.field.helpText",defaultMessage:"This setting is overridden by the Kibana server and can not be changed."}))}var canUpdateSetting=this.props.enableSaving;var defaultLink=this.renderResetToDefaultLink(setting);var imageLink=this.renderChangeImageLink(setting);if(canUpdateSetting&&(defaultLink||imageLink)){return _react.default.createElement("span",null,defaultLink,imageLink)}return null}},{key:"renderTitle",value:function renderTitle(setting){var unsavedChanges=this.props.unsavedChanges;var isInvalid=unsavedChanges===null||unsavedChanges===void 0?void 0:unsavedChanges.isInvalid;var unsavedIconLabel=unsavedChanges?isInvalid?_i18n.i18n.translate("advancedSettings.field.invalidIconLabel",{defaultMessage:"Invalid"}):_i18n.i18n.translate("advancedSettings.field.unsavedIconLabel",{defaultMessage:"Unsaved"}):undefined;return _react.default.createElement("h3",null,_react.default.createElement("span",{className:"mgtAdvancedSettings__fieldTitle"},setting.displayName||setting.name),setting.isCustom?_react.default.createElement(_eui.EuiIconTip,{type:"asterisk",color:"primary","aria-label":_i18n.i18n.translate("advancedSettings.field.customSettingAriaLabel",{defaultMessage:"Custom setting"}),content:_react.default.createElement(_react2.FormattedMessage,{id:"advancedSettings.field.customSettingTooltip",defaultMessage:"Custom setting"})}):"",unsavedChanges?_react.default.createElement(_eui.EuiIconTip,{anchorClassName:"mgtAdvancedSettings__fieldTitleUnsavedIcon",type:isInvalid?"alert":"dot",color:isInvalid?"danger":"warning","aria-label":unsavedIconLabel,content:unsavedIconLabel}):"")}},{key:"renderDescription",value:function renderDescription(setting){var description;var deprecation;if(setting.deprecation){var links=this.props.dockLinks;deprecation=_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiToolTip,{content:setting.deprecation.message},_react.default.createElement(_eui.EuiBadge,{color:"warning",onClick:function onClick(){window.open(links.management[setting.deprecation.docLinksKey],"_blank")},onClickAriaLabel:_i18n.i18n.translate("advancedSettings.field.deprecationClickAreaLabel",{defaultMessage:"Click to view deprecation documentation for {settingName}.",values:{settingName:setting.name}})},"Deprecated")),_react.default.createElement(_eui.EuiSpacer,{size:"s"}))}if(_react.default.isValidElement(setting.description)){description=setting.description}else{description=_react.default.createElement("div",{dangerouslySetInnerHTML:{__html:setting.description||""}})}return _react.default.createElement(_react.Fragment,null,deprecation,description,this.renderDefaultValue(setting))}},{key:"renderDefaultValue",value:function renderDefaultValue(setting){var type=setting.type,defVal=setting.defVal,optionLabels=setting.optionLabels;if((0,_lib.isDefaultValue)(setting)){return}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiText,{size:"xs"},type==="json"?_react.default.createElement(_react.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"advancedSettings.field.defaultValueTypeJsonText",defaultMessage:"Default: {value}",values:{value:_react.default.createElement(_eui.EuiCodeBlock,{language:"json",paddingSize:"s",overflowHeight:defVal.length>=500?300:undefined},this.getDisplayedDefaultValue(type,defVal))}})):_react.default.createElement(_react.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"advancedSettings.field.defaultValueText",defaultMessage:"Default: {value}",values:{value:_react.default.createElement(_eui.EuiCode,null,this.getDisplayedDefaultValue(type,defVal,optionLabels))}}))))}},{key:"renderResetToDefaultLink",value:function renderResetToDefaultLink(setting){var _this$props$unsavedCh2;var defVal=setting.defVal,ariaName=setting.ariaName,name=setting.name;if(defVal===((_this$props$unsavedCh2=this.props.unsavedChanges)===null||_this$props$unsavedCh2===void 0?void 0:_this$props$unsavedCh2.value)||(0,_lib.isDefaultValue)(setting)||this.props.loading){return}return _react.default.createElement("span",null,_react.default.createElement(_eui.EuiLink,{"aria-label":_i18n.i18n.translate("advancedSettings.field.resetToDefaultLinkAriaLabel",{defaultMessage:"Reset {ariaName} to default",values:{ariaName:ariaName}}),onClick:this.resetField,"data-test-subj":"advancedSetting-resetField-".concat(name)},_react.default.createElement(_react2.FormattedMessage,{id:"advancedSettings.field.resetToDefaultLinkText",defaultMessage:"Reset to default"})),"   ")}},{key:"renderChangeImageLink",value:function renderChangeImageLink(setting){var _this$props$unsavedCh3;var changeImage=(_this$props$unsavedCh3=this.props.unsavedChanges)===null||_this$props$unsavedCh3===void 0?void 0:_this$props$unsavedCh3.changeImage;var type=setting.type,value=setting.value,ariaName=setting.ariaName,name=setting.name;if(type!=="image"||!value||changeImage){return}return _react.default.createElement("span",null,_react.default.createElement(_eui.EuiLink,{"aria-label":_i18n.i18n.translate("advancedSettings.field.changeImageLinkAriaLabel",{defaultMessage:"Change {ariaName}",values:{ariaName:ariaName}}),onClick:this.changeImage,"data-test-subj":"advancedSetting-changeImage-".concat(name)},_react.default.createElement(_react2.FormattedMessage,{id:"advancedSettings.field.changeImageLinkText",defaultMessage:"Change image"})))}},{key:"render",value:function render(){var _this$props2=this.props,setting=_this$props2.setting,unsavedChanges=_this$props2.unsavedChanges;var error=unsavedChanges===null||unsavedChanges===void 0?void 0:unsavedChanges.error;var isInvalid=unsavedChanges===null||unsavedChanges===void 0?void 0:unsavedChanges.isInvalid;var className=(0,_classnames.default)("mgtAdvancedSettings__field",{"mgtAdvancedSettings__field--unsaved":unsavedChanges,"mgtAdvancedSettings__field--invalid":isInvalid});var id=setting.name;return _react.default.createElement(_eui.EuiDescribedFormGroup,{className:className,title:this.renderTitle(setting),description:this.renderDescription(setting),fullWidth:true},_react.default.createElement(_eui.EuiFormRow,{isInvalid:isInvalid,error:error,label:this.renderLabel(setting),helpText:this.renderHelpText(setting),className:"mgtAdvancedSettings__fieldRow",hasChildLabel:setting.type!=="boolean",fullWidth:true},_react.default.createElement(_react.default.Fragment,null,this.renderField(id,setting),unsavedChanges&&_react.default.createElement(_eui.EuiScreenReaderOnly,null,_react.default.createElement("p",{id:id},unsavedChanges.error?unsavedChanges.error:_i18n.i18n.translate("advancedSettings.field.settingIsUnsaved",{defaultMessage:"Setting is currently not saved."}))))))}}]);return Field}(_react.PureComponent);exports.Field=Field},,,,,,,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isDefaultValue=isDefaultValue;function isDefaultValue(setting){return setting.isCustom||setting.value===undefined||setting.value===""||String(setting.value)===String(setting.defVal)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toEditableConfig=toEditableConfig;var _get_val_type=__webpack_require__(200);var _get_aria_name=__webpack_require__(79);var _default_category=__webpack_require__(81);function toEditableConfig(_ref){var def=_ref.def,name=_ref.name,value=_ref.value,isCustom=_ref.isCustom,isOverridden=_ref.isOverridden;if(!def){def={}}var validationTyped=def.validation;var conf={name:name,displayName:def.name||name,ariaName:def.name||(0,_get_aria_name.getAriaName)(name),value:value,category:def.category&&def.category.length?def.category:[_default_category.DEFAULT_CATEGORY],isCustom:isCustom,isOverridden:isOverridden,readonly:!!def.readonly,defVal:def.value,type:(0,_get_val_type.getValType)(def,value),description:def.description,deprecation:def.deprecation,validation:validationTyped&&validationTyped.regexString?{regex:new RegExp(validationTyped.regexString),message:validationTyped.message}:def.validation,options:def.options,optionLabels:def.optionLabels,requiresPageReload:!!def.requiresPageReload};return conf}},function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.getValType=getValType;function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function getValType(def,value){if(def.type){return def.type}if(Array.isArray(value)||Array.isArray(def.value)){return"array"}var typeofVal=def.value!=null?_typeof(def.value):_typeof(value);if(typeofVal==="bigint"){return"number"}if(typeofVal==="symbol"||typeofVal==="object"||typeofVal==="function"){throw new Error("incompatible UiSettingsType: '".concat(def.name,"' type ").concat(typeofVal," | ").concat(JSON.stringify(def)))}return typeofVal}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getCategoryName=getCategoryName;var _i18n=__webpack_require__(0);var upperFirst=function upperFirst(){var str=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return str.replace(/^./,(function(strng){return strng.toUpperCase()}))};var names={general:_i18n.i18n.translate("advancedSettings.categoryNames.generalLabel",{defaultMessage:"General"}),timelion:_i18n.i18n.translate("advancedSettings.categoryNames.timelionLabel",{defaultMessage:"Timelion"}),notifications:_i18n.i18n.translate("advancedSettings.categoryNames.notificationsLabel",{defaultMessage:"Notifications"}),visualizations:_i18n.i18n.translate("advancedSettings.categoryNames.visualizationsLabel",{defaultMessage:"Visualizations"}),discover:_i18n.i18n.translate("advancedSettings.categoryNames.discoverLabel",{defaultMessage:"Discover"}),dashboard:_i18n.i18n.translate("advancedSettings.categoryNames.dashboardLabel",{defaultMessage:"Dashboard"}),reporting:_i18n.i18n.translate("advancedSettings.categoryNames.reportingLabel",{defaultMessage:"Reporting"}),search:_i18n.i18n.translate("advancedSettings.categoryNames.searchLabel",{defaultMessage:"Search"}),siem:_i18n.i18n.translate("advancedSettings.categoryNames.siemLabel",{defaultMessage:"SIEM"})};function getCategoryName(category){return category?names[category]||upperFirst(category):""}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AddLicense",{enumerable:true,get:function get(){return _add_license.AddLicense}});var _add_license=__webpack_require__(203)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AddLicense=void 0;var _react=_interopRequireDefault(__webpack_require__(17));var _constants=__webpack_require__(1);var _eui=__webpack_require__(18);var _react2=__webpack_require__(19);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AddLicense=function AddLicense(_ref){var _ref$uploadPath=_ref.uploadPath,uploadPath=_ref$uploadPath===void 0?"#".concat(_constants.BASE_PATH,"upload_license"):_ref$uploadPath;return _react.default.createElement(_eui.EuiCard,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.addLicense.updateLicenseTitle",defaultMessage:"Update your license"}),description:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.addLicense.useAvailableLicenseDescription",defaultMessage:"If you already have a new license, upload it now."}),footer:_react.default.createElement(_eui.EuiButton,{"data-test-subj":"updateLicenseButton",href:uploadPath},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.addLicense.updateLicenseButtonLabel",defaultMessage:"Update license"}))})};exports.AddLicense=AddLicense},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"RequestTrialExtension",{enumerable:true,get:function get(){return _request_trial_extension.RequestTrialExtension}});var _request_trial_extension=__webpack_require__(205)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestTrialExtension=void 0;var _reactRedux=__webpack_require__(29);var _request_trial_extension=__webpack_require__(206);var _license_management=__webpack_require__(32);var mapStateToProps=function mapStateToProps(state){return{shouldShowRequestTrialExtension:(0,_license_management.shouldShowRequestTrialExtension)(state)}};var RequestTrialExtension=(0,_reactRedux.connect)(mapStateToProps)(_request_trial_extension.RequestTrialExtension);exports.RequestTrialExtension=RequestTrialExtension},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RequestTrialExtension=void 0;var _react=_interopRequireDefault(__webpack_require__(17));var _eui=__webpack_require__(18);var _react2=__webpack_require__(19);var _constants=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var RequestTrialExtension=function RequestTrialExtension(_ref){var shouldShowRequestTrialExtension=_ref.shouldShowRequestTrialExtension;if(!shouldShowRequestTrialExtension){return null}var description=_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.requestTrialExtension.howToContinueUsingPluginsDescription",defaultMessage:"If you’d like to continue using machine learning, advanced security, and our other awesome {platinumLicenseFeaturesLinkText}, request an extension now.",values:{platinumLicenseFeaturesLinkText:_react.default.createElement(_eui.EuiLink,{href:_constants.EXTERNAL_LINKS.SUBSCRIPTIONS,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.requestTrialExtension.platinumLicenseFeaturesLinkText",defaultMessage:"Platinum features"}))}}));return _react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiCard,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.requestTrialExtension.extendYourTrialTitle",defaultMessage:"Extend your trial"}),description:description,footer:_react.default.createElement(_eui.EuiButton,{"data-test-subj":"extendTrialButton",target:"_blank",href:_constants.EXTERNAL_LINKS.TRIAL_EXTENSION},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.requestTrialExtension.extendTrialButtonLabel",defaultMessage:"Extend trial"}))}))};exports.RequestTrialExtension=RequestTrialExtension},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"UploadLicense",{enumerable:true,get:function get(){return _upload_license.UploadLicense}});var _upload_license=__webpack_require__(208)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UploadLicense=void 0;var _reactRedux=__webpack_require__(29);var _set_breadcrumb=__webpack_require__(82);var _upload_license=__webpack_require__(70);var _add_error_message=__webpack_require__(48);var _license_management=__webpack_require__(32);var _upload_license2=__webpack_require__(209);var mapStateToProps=function mapStateToProps(state){return{isInvalid:(0,_license_management.isInvalid)(state),needsAcknowledgement:(0,_license_management.uploadNeedsAcknowledgement)(state),messages:(0,_license_management.uploadMessages)(state),errorMessage:(0,_license_management.getUploadErrorMessage)(state),applying:(0,_license_management.isApplying)(state),currentLicenseType:(0,_license_management.getLicenseType)(state)||""}};var mapDispatchToProps={addUploadErrorMessage:_add_error_message.addUploadErrorMessage,uploadLicense:_upload_license.uploadLicense,uploadLicenseStatus:_upload_license.uploadLicenseStatus,setBreadcrumb:_set_breadcrumb.setBreadcrumb};var UploadLicense=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_upload_license2.UploadLicense);exports.UploadLicense=UploadLicense},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UploadLicense=void 0;var _react=_interopRequireWildcard(__webpack_require__(17));var _constants=__webpack_require__(1);var _eui=__webpack_require__(18);var _telemetry_opt_in=__webpack_require__(74);var _telemetry=__webpack_require__(49);var _react2=__webpack_require__(19);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_nonIterableRest()}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var UploadLicense=function(_React$PureComponent){_inherits(UploadLicense,_React$PureComponent);function UploadLicense(){var _getPrototypeOf2;var _this;_classCallCheck(this,UploadLicense);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(UploadLicense)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isOptingInToTelemetry:false});_defineProperty(_assertThisInitialized(_this),"onOptInChange",(function(isOptingInToTelemetry){_this.setState({isOptingInToTelemetry:isOptingInToTelemetry})}));_defineProperty(_assertThisInitialized(_this),"send",(function(acknowledge){var file=_this.file;var fr=new FileReader;fr.onload=function(_ref){var result=_ref.target.result;if(_this.state.isOptingInToTelemetry){var _this$props$telemetry;(_this$props$telemetry=_this.props.telemetry)===null||_this$props$telemetry===void 0?void 0:_this$props$telemetry.telemetryService.setOptIn(true)}_this.props.uploadLicense(result,_this.props.currentLicenseType,acknowledge)};fr.readAsText(file)}));_defineProperty(_assertThisInitialized(_this),"cancel",(function(){_this.props.uploadLicenseStatus({})}));_defineProperty(_assertThisInitialized(_this),"handleFile",(function(_ref2){var _ref3=_slicedToArray(_ref2,1),file=_ref3[0];if(file){_this.props.addUploadErrorMessage("")}_this.file=file}));_defineProperty(_assertThisInitialized(_this),"submit",(function(event){event.preventDefault();if(_this.file){_this.send()}else{_this.props.addUploadErrorMessage(_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.licenseFileNotSelectedErrorMessage",defaultMessage:"You must select a license file."}))}}));return _this}_createClass(UploadLicense,[{key:"componentDidMount",value:function componentDidMount(){this.props.setBreadcrumb("upload");this.props.addUploadErrorMessage("")}},{key:"acknowledgeModal",value:function acknowledgeModal(){var _this2=this;var _this$props=this.props,needsAcknowledgement=_this$props.needsAcknowledgement,_this$props$messages=_this$props.messages;_this$props$messages=_this$props$messages===void 0?[]:_this$props$messages;var _this$props$messages2=_toArray(_this$props$messages),firstLine=_this$props$messages2[0],messages=_this$props$messages2.slice(1);if(!needsAcknowledgement){return null}return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.confirmModalTitle",defaultMessage:"Confirm License Upload"}),onCancel:this.cancel,onConfirm:function onConfirm(){return _this2.send(true)},cancelButtonText:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.confirmModal.confirmButtonLabel",defaultMessage:"Confirm"})},_react.default.createElement("div",null,_react.default.createElement(_eui.EuiText,null,firstLine),_react.default.createElement(_eui.EuiText,null,_react.default.createElement("ul",null,messages.map((function(message){return _react.default.createElement("li",{key:message},message)})))))))}},{key:"errorMessage",value:function errorMessage(){var errorMessage=this.props.errorMessage;if(!errorMessage){return null}return[errorMessage]}},{key:"render",value:function render(){var _this$props2=this.props,currentLicenseType=_this$props2.currentLicenseType,applying=_this$props2.applying,telemetry=_this$props2.telemetry;return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiPageContent,{horizontalPosition:"center",verticalPosition:"center"},_react.default.createElement(_eui.EuiPageContentBody,null,_react.default.createElement(_eui.EuiTitle,{size:"m"},_react.default.createElement("h1",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.uploadLicenseTitle",defaultMessage:"Upload your license"}))),_react.default.createElement(_eui.EuiSpacer,null),this.acknowledgeModal(),_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.licenseKeyTypeDescription",defaultMessage:"Your license key is a JSON file with a signature attached."})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.replacingCurrentLicenseWarningMessage",defaultMessage:"Uploading a license will replace your current {currentLicenseType} license.",values:{currentLicenseType:_react.default.createElement("strong",null,currentLicenseType.toUpperCase())}}))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiForm,{isInvalid:!!this.errorMessage(),error:this.errorMessage()},_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,null,_react.default.createElement(_eui.EuiFilePicker,{id:"licenseFile",initialPromptText:_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.selectLicenseFileDescription",defaultMessage:"Select or drag your license file"}),onChange:this.handleFile})))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),(0,_telemetry.shouldShowTelemetryOptIn)(telemetry)&&_react.default.createElement(_telemetry_opt_in.TelemetryOptIn,{isOptingInToTelemetry:this.state.isOptingInToTelemetry,onOptInChange:this.onOptInChange,telemetry:telemetry}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{href:"#".concat(_constants.BASE_PATH,"home")},_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.cancelButtonLabel",defaultMessage:"Cancel"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{"data-test-subj":"uploadLicenseButton",fill:true,isLoading:applying,onClick:this.submit},applying?_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.uploadingButtonLabel",defaultMessage:"Uploading…"}):_react.default.createElement(_react2.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.uploadButtonLabel",defaultMessage:"Upload"}))))))))}}]);return UploadLicense}(_react.default.PureComponent);exports.UploadLicense=UploadLicense}])]);